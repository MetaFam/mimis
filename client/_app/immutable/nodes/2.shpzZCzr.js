import"../chunks/E7NgtQj1.js";import{aK as rl,aL as Jt,aM as nl,K as sl,Q as ol,k as Yo,h as Ur,j as Xo,l as il,y as L,aN as va,aF as fn,v as Aa,T as Sa,aO as al,u as cl,aP as Qo,aH as re,Z as fe,aI as Sr,_ as W,D as Ln,r as ul,b as Ze,F as V,I as ee,aQ as _r,G as H,a as Pe,E as Dn,t as dt,aR as _a,aJ as ll,aS as Ia,aT as fl,aU as ei,aV as dl,aW as hl,aX as ti,c as pl,f as ri}from"../chunks/BGk_9FmB.js";import{d as oo,e as Ns,s as Ir}from"../chunks/CvmZDYTs.js";import{p as ct,b as Ts,i as dn}from"../chunks/k-yb9S9W.js";import{r as _t,s as je,h as yl}from"../chunks/BD1YdZsr.js";import{p as Ba}from"../chunks/C0OBITU4.js";import{b as gl,a as Nr,q as at,r as hn,H as Os,g as wl,R as ml,c as Ca,d as $a,v as bl,e as xl}from"../chunks/Dq90KJw9.js";function ns(e,t=[],r=[],n){var s=rl(),o=Jt,i=!s.is_pending();s.update_pending_count(1),o.increment(i);var a=Ur;if(a){sl();var c=il,f=ol(!1);Yo(f)}nl(t,[],r,u=>{a&&(Xo(!0),Yo(c));try{for(const l of u)L(l);n(e,...u)}finally{a&&Xo(!1),s.update_pending_count(-1),o.decrement(i)}})}const ni=[...` 	
\r\f¬†\v\uFEFF`];function El(e,t,r){var n=""+e;if(r){for(var s in r)if(r[s])n=n?n+" "+s:s;else if(n.length)for(var o=s.length,i=0;(i=n.indexOf(s,i))>=0;){var a=i+o;(i===0||ni.includes(n[i-1]))&&(a===n.length||ni.includes(n[a]))?n=(i===0?"":n.substring(0,i))+n.substring(a+1):i=a}}return n===""?null:n}function si(e,t,r,n,s,o){var i=e.__className;if(Ur||i!==r||i===void 0){var a=El(r,n,o);(!Ur||a!==e.getAttribute("class"))&&(a==null?e.removeAttribute("class"):e.className=a),e.__className=r}else if(o&&s!==o)for(var c in o){var f=!!o[c];(s==null||f!==!!s[c])&&e.classList.toggle(c,f)}return o}function Yt(e,t,r=t){var n=new WeakSet;va(e,"input",async s=>{var o=s?e.defaultValue:e.value;if(o=ss(e)?os(o):o,r(o),Jt!==null&&n.add(Jt),await fn(),o!==(o=t())){var i=e.selectionStart,a=e.selectionEnd,c=e.value.length;if(e.value=o??"",a!==null){var f=e.value.length;i===a&&a===c&&f>c?(e.selectionStart=f,e.selectionEnd=f):(e.selectionStart=i,e.selectionEnd=Math.min(a,f))}}}),(Ur&&e.defaultValue!==e.value||Aa(t)==null&&e.value)&&(r(ss(e)?os(e.value):e.value),Jt!==null&&n.add(Jt)),Sa(()=>{var s=t();if(e===document.activeElement){var o=al??Jt;if(n.has(o))return}ss(e)&&s===os(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function oi(e,t,r=t){va(e,"change",n=>{var s=n?e.defaultChecked:e.checked;r(s)}),(Ur&&e.defaultChecked!==e.checked||Aa(t)==null)&&r(e.checked),Sa(()=>{var n=t();e.checked=!!n})}function ss(e){var t=e.type;return t==="number"||t==="range"}function os(e){return e===""?null:+e}class is extends Error{constructor(t,r){super(t),this.name="DevalueError",this.path=r.join("")}}function ii(e){return Object(e)!==e}const vl=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Al(e){const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null||Object.getPrototypeOf(t)===null||Object.getOwnPropertyNames(t).sort().join("\0")===vl}function Sl(e){return Object.prototype.toString.call(e).slice(8,-1)}function _l(e){switch(e){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e<" "?`\\u${e.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}function ut(e){let t="",r=0;const n=e.length;for(let s=0;s<n;s+=1){const o=e[s],i=_l(o);i&&(t+=e.slice(r,s)+i,r=s+1)}return`"${r===0?e:t+e.slice(r)}"`}function Il(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.getOwnPropertyDescriptor(e,t).enumerable)}const Bl=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function ai(e){return Bl.test(e)?"."+e:"["+JSON.stringify(e)+"]"}function Cl(e){const t=new DataView(e);let r="";for(let n=0;n<e.byteLength;n++)r+=String.fromCharCode(t.getUint8(n));return kl(r)}function $l(e){const t=Pl(e),r=new ArrayBuffer(t.length),n=new DataView(r);for(let s=0;s<r.byteLength;s++)n.setUint8(s,t.charCodeAt(s));return r}const Pa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Pl(e){e.length%4===0&&(e=e.replace(/==?$/,""));let t="",r=0,n=0;for(let s=0;s<e.length;s++)r<<=6,r|=Pa.indexOf(e[s]),n+=6,n===24&&(t+=String.fromCharCode((r&16711680)>>16),t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255),r=n=0);return n===12?(r>>=4,t+=String.fromCharCode(r)):n===18&&(r>>=2,t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255)),t}function kl(e){let t="";for(let r=0;r<e.length;r+=3){const n=[void 0,void 0,void 0,void 0];n[0]=e.charCodeAt(r)>>2,n[1]=(e.charCodeAt(r)&3)<<4,e.length>r+1&&(n[1]|=e.charCodeAt(r+1)>>4,n[2]=(e.charCodeAt(r+1)&15)<<2),e.length>r+2&&(n[2]|=e.charCodeAt(r+2)>>6,n[3]=e.charCodeAt(r+2)&63);for(let s=0;s<n.length;s++)typeof n[s]>"u"?t+="=":t+=Pa[n[s]]}return t}const io=-1,ka=-2,Ua=-3,Na=-4,Ta=-5,ao=-6;function co(e,t){return Ul(JSON.parse(e),t)}function Ul(e,t){if(typeof e=="number")return s(e,!0);if(!Array.isArray(e)||e.length===0)throw new Error("Invalid input");const r=e,n=Array(r.length);function s(o,i=!1){if(o===io)return;if(o===Ua)return NaN;if(o===Na)return 1/0;if(o===Ta)return-1/0;if(o===ao)return-0;if(i||typeof o!="number")throw new Error("Invalid input");if(o in n)return n[o];const a=r[o];if(!a||typeof a!="object")n[o]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const c=a[0],f=t?.[c];if(f){let u=a[1];return typeof u!="number"&&(u=r.push(a[1])-1),n[o]=f(s(u))}switch(c){case"Date":n[o]=new Date(a[1]);break;case"Set":const u=new Set;n[o]=u;for(let d=1;d<a.length;d+=1)u.add(s(a[d]));break;case"Map":const l=new Map;n[o]=l;for(let d=1;d<a.length;d+=2)l.set(s(a[d]),s(a[d+1]));break;case"RegExp":n[o]=new RegExp(a[1],a[2]);break;case"Object":n[o]=Object(a[1]);break;case"BigInt":n[o]=BigInt(a[1]);break;case"null":const w=Object.create(null);n[o]=w;for(let d=1;d<a.length;d+=2)w[a[d]]=s(a[d+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const d=globalThis[c],p=new d(s(a[1]));n[o]=a[2]!==void 0?p.subarray(a[2],a[3]):p;break}case"ArrayBuffer":{const d=a[1],p=$l(d);n[o]=p;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":{const d=c.slice(9);n[o]=Temporal[d].from(a[1]);break}case"URL":{const d=new URL(a[1]);n[o]=d;break}case"URLSearchParams":{const d=new URLSearchParams(a[1]);n[o]=d;break}default:throw new Error(`Unknown type ${c}`)}}else{const c=new Array(a.length);n[o]=c;for(let f=0;f<a.length;f+=1){const u=a[f];u!==ka&&(c[f]=s(u))}}else{const c={};n[o]=c;for(const f in a){if(f==="__proto__")throw new Error("Cannot parse an object with a `__proto__` property");const u=a[f];c[f]=s(u)}}return n[o]}return s(0)}function Nl(e,t){const r=[],n=new Map,s=[];if(t)for(const f of Object.getOwnPropertyNames(t))s.push({key:f,fn:t[f]});const o=[];let i=0;function a(f){if(f===void 0)return io;if(Number.isNaN(f))return Ua;if(f===1/0)return Na;if(f===-1/0)return Ta;if(f===0&&1/f<0)return ao;if(n.has(f))return n.get(f);const u=i++;n.set(f,u);for(const{key:w,fn:d}of s){const p=d(f);if(p)return r[u]=`["${w}",${a(p)}]`,u}if(typeof f=="function")throw new is("Cannot stringify a function",o);let l="";if(ii(f))l=as(f);else{const w=Sl(f);switch(w){case"Number":case"String":case"Boolean":l=`["Object",${as(f)}]`;break;case"BigInt":l=`["BigInt",${f}]`;break;case"Date":l=`["Date","${!isNaN(f.getDate())?f.toISOString():""}"]`;break;case"URL":l=`["URL",${ut(f.toString())}]`;break;case"URLSearchParams":l=`["URLSearchParams",${ut(f.toString())}]`;break;case"RegExp":const{source:p,flags:g}=f;l=g?`["RegExp",${ut(p)},"${g}"]`:`["RegExp",${ut(p)}]`;break;case"Array":l="[";for(let h=0;h<f.length;h+=1)h>0&&(l+=","),h in f?(o.push(`[${h}]`),l+=a(f[h]),o.pop()):l+=ka;l+="]";break;case"Set":l='["Set"';for(const h of f)l+=`,${a(h)}`;l+="]";break;case"Map":l='["Map"';for(const[h,b]of f)o.push(`.get(${ii(h)?as(h):"..."})`),l+=`,${a(h)},${a(b)}`,o.pop();l+="]";break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const h=f;l='["'+w+'",'+a(h.buffer);const b=f.byteOffset,S=b+f.byteLength;if(b>0||S!==h.buffer.byteLength){const _=+/(\d+)/.exec(w)[1]/8;l+=`,${b/_},${S/_}`}l+="]";break}case"ArrayBuffer":{l=`["ArrayBuffer","${Cl(f)}"]`;break}case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":l=`["${w}",${ut(f.toString())}]`;break;default:if(!Al(f))throw new is("Cannot stringify arbitrary non-POJOs",o);if(Il(f).length>0)throw new is("Cannot stringify POJOs with symbolic keys",o);if(Object.getPrototypeOf(f)===null){l='["null"';for(const h in f)o.push(ai(h)),l+=`,${ut(h)},${a(f[h])}`,o.pop();l+="]"}else{l="{";let h=!1;for(const b in f)h&&(l+=","),h=!0,o.push(ai(b)),l+=`${ut(b)}:${a(f[b])}`,o.pop();l+="}"}}}return r[u]=l,u}const c=a(e);return c<0?`${c}`:`[${r.join(",")}]`}function as(e){const t=typeof e;return t==="string"?ut(e):e instanceof String?ut(e.toString()):e===void 0?io.toString():e===0&&1/e<0?ao.toString():t==="bigint"?`["BigInt","${e}"]`:String(e)}function Tl(e,t){const r=Object.fromEntries(Object.entries(t).map(([n,s])=>[n,s.encode]));return Nl(e,r)}function Oa(e,t){if(e===void 0)return"";const r=Tl(e,t),n=new TextEncoder().encode(r);return gl(n).replaceAll("=","").replaceAll("+","-").replaceAll("/","_")}function Ol(e,t){return e+"/"+t}async function Ll(e){const t=await fetch(e,{headers:{"x-sveltekit-pathname":location.pathname,"x-sveltekit-search":location.search}});if(!t.ok)throw new Os(500,"Failed to execute remote function");const r=await t.json();if(r.type==="redirect")throw await wl(r.location),new ml(307,r.location);if(r.type==="error")throw new Os(r.status??500,r.error);return r.result}function Dl(e,t){return r=>{const n=Oa(r,Nr.hooks.transport),s=Ol(e,n);let o=at.get(s),i=!0;try{cl(()=>(o&&o.count++,()=>{const c=at.get(s);c&&(c.count--,fn().then(()=>{!c.count&&c===at.get(s)&&(at.delete(s),delete hn[s])}))}))}catch{i=!1}let a=o?.resource;return a||(a=t(s,n),Object.defineProperty(a,"_key",{value:s}),at.set(s,o={count:i?1:0,resource:a}),a.then(()=>{fn().then(()=>{!o.count&&o===at.get(s)&&at.delete(s)})}).catch(()=>{at.delete(s)})),a}}function cs(e){for(const t of e)"release"in t&&t.release()}function Rl(e,t=[]){const r=Object.entries(co(e,Nr.decoders));for(const[n,s]of r){const o=t.find(a=>a._key===n);o&&"release"in o&&o.release(),at.get(n)?.resource.set(s)}}function La(e){let t=re(0);const r=n=>{let s=[];Qo(t);const o=(async()=>{try{await Promise.resolve();const i=await fetch(`${Ca}/${$a}/remote/${e}`,{method:"POST",body:JSON.stringify({payload:Oa(n,Nr.hooks.transport),refreshes:s.map(c=>c._key)}),headers:{"Content-Type":"application/json","x-sveltekit-pathname":location.pathname,"x-sveltekit-search":location.search}});if(!i.ok)throw cs(s),new Error("Failed to execute remote function");const a=await i.json();if(a.type==="redirect")throw cs(s),new Error("Redirects are not allowed in commands. Return a result instead and use goto on the client");if(a.type==="error")throw cs(s),new Os(a.status??500,a.error);return a.refreshes&&Rl(a.refreshes,s),co(a.result,Nr.decoders)}finally{Qo(t,-1)}})();return o.updates=(...i)=>(s=i,delete o.updates,o),o};return Object.defineProperty(r,"pending",{get:()=>L(t)}),r}const ci=`sveltekit:${bl}`;let jl;(async()=>{if(typeof caches<"u")try{jl=await caches.open(ci);const e=await caches.keys();for(const t of e)t.startsWith("sveltekit:")&&t!==ci&&await caches.delete(t)}catch(e){console.warn("Failed to initialize SvelteKit cache:",e)}})();function Da(e){return Dl(e,(t,r)=>new Fl(t,async()=>{if(Object.hasOwn(hn,t))return hn[t];const n=`${Ca}/${$a}/remote/${e}${r?`?payload=${r}`:""}`,s=await Ll(n);return co(s,Nr.decoders)}))}class Fl{_key;#n=!1;#e;#t=re(!0);#r=[];#i=re(!1);#u=re();#a;#s=re(fe([]));#l=Sr(()=>{if(L(this.#i))return L(this.#s).reduce((t,r)=>r(t),L(this.#u))});#c=re(void 0);#o=Sr(()=>{const t=L(this.#a);return L(this.#s).length,(r,n)=>{const s=(async()=>(await t,await fn(),L(this.#l)))();return r||n?s.then(r,n):s}});constructor(t,r){this._key=t,this.#e=r,this.#a=re(this.#f())}#f(){this.#n?W(this.#t,!0):this.#n=!0;let t,r;const n=new Promise((s,o)=>{t=s,r=o});return this.#r.push(t),Promise.resolve(this.#e()).then(s=>{const o=this.#r.indexOf(t);o!==-1&&(this.#r.splice(0,o).forEach(i=>i()),W(this.#i,!0),W(this.#t,!1),W(this.#u,s),W(this.#c,void 0),t())}).catch(s=>{const o=this.#r.indexOf(t);o!==-1&&(this.#r.splice(0,o).forEach(i=>i()),W(this.#c,s),W(this.#t,!1),r(s))}),n}get then(){return L(this.#o)}get catch(){return L(this.#o),t=>L(this.#o)(void 0,t)}get finally(){return L(this.#o),t=>L(this.#o)(r=>(t(),r),r=>{throw t(),r})}get current(){return L(this.#l)}get error(){return L(this.#c)}get loading(){return L(this.#t)}get ready(){return L(this.#i)}refresh(){return delete hn[this._key],W(this.#a,this.#f())}set(t){W(this.#i,!0),W(this.#t,!1),W(this.#c,void 0),W(this.#u,t),W(this.#a,Promise.resolve())}withOverride(t){return L(this.#s).push(t),{_key:this._key,release:()=>{const r=L(this.#s).indexOf(t);r!==-1&&L(this.#s).splice(r,1)}}}}const zl=Da("1a287au/searchFor"),Ml=La("x98l3z/createSpot"),Hl=La("1ugnjef/addFiles"),Vl=Da("froafq/spotId"),me=globalThis.__sveltekit_1pvawil.env;class te{static keys={ipfsURLPattern:"mimis-setting-ipfs-url-pattern",ipfsAPI:"mimis-setting-ipfs-api",neo4jURL:"mimis-setting-neo4j-url",neo4jUser:"mimis-setting-neo4j-user",neo4jPass:"mimis-setting-neo4j-pass",limit:"mimis-setting-limit",debugging:"mimis-setting-debugging",useKubo:"mimis-setting-use-kubo",kuboUsername:"mimis-setting-kubo-username",kuboPassword:"mimis-setting-kubo-password",useStoracha:"mimis-setting-use-storacha",storachaEmail:"mimis-setting-storacha-email",storachaSpace:"mimis-setting-storacha-space",detailsZoom:"mimis-setting-details-zoom",janusGraphURL:"mimis-setting-janusgraph-url"};static defaults={[te.keys.ipfsURLPattern]:me.PUBLIC_IPFS_URL_PATTERN||"http://localhost:8080/ipfs/{cid}{path}",[te.keys.ipfsAPI]:me.PUBLIC_IPFS_API||"http://localhost:5001/api/v0",[te.keys.neo4jURL]:me.PUBLIC_NEO4J_URI||"bolt://localhost:7687",[te.keys.neo4jUser]:me.PUBLIC_NEO4J_USER||"neo4j",[te.keys.neo4jPass]:me.PUBLIC_NEO4J_PASS||"neo4j",[te.keys.limit]:me.PUBLIC_LIMIT?Number(me.PUBLIC_LIMIT):125,[te.keys.debugging]:Ba.url.searchParams.has("debug")?!0:me.PUBLIC_DEBUGGING?!!me.PUBLIC_DEBUGGING:!1,[te.keys.useKubo]:me.PUBLIC_USE_KUBO?!!me.PUBLIC_USE_KUBO:!0,[te.keys.kuboUsername]:"",[te.keys.kuboPassword]:"",[te.keys.useStoracha]:me.PUBLIC_USE_STORACHA?!!me.PUBLIC_USE_STORACHA:!1,[te.keys.storachaEmail]:"",[te.keys.storachaSpace]:"M√Ømis",[te.keys.detailsZoom]:me.PUBLIC_DETAILS_ZOOM?Number(me.PUBLIC_DETAILS_ZOOM):1,[te.keys.janusGraphURL]:me.PUBLIC_JANUSGRAPH_URL||"ws://localhost:8182/gremlin"};constructor(t){Object.entries(t??{}).forEach(([r,n])=>{switch(r){case"debugging":{this.debugging=!!n;break}case"useKubo":{this.useKubo=!!n;break}case"useStoracha":{this.useStoracha=!!n;break}default:Object.keys(te.keys).includes(r)?this[r]=n:console.warn(`Unhanded constructor argument: "${r}".`)}})}valueOf(t){const r=te.defaults[te.keys[t]],n=typeof localStorage<"u"?localStorage.getItem(te.keys[t]):r;return n!=null?typeof r=="number"?Number(n):typeof r=="boolean"?!!n:n:r}get values(){return new te(this)}set values(t){for(const r of Object.keys(te.keys))this[r]=t[r]}#n=re(fe(this.valueOf("ipfsAPI")));get ipfsAPI(){return L(this.#n)}set ipfsAPI(t){W(this.#n,t,!0)}#e=re(fe(this.valueOf("ipfsURLPattern")));get ipfsURLPattern(){return L(this.#e)}set ipfsURLPattern(t){W(this.#e,t,!0)}#t=re(fe(this.valueOf("neo4jURL")));get neo4jURL(){return L(this.#t)}set neo4jURL(t){W(this.#t,t,!0)}#r=re(fe(this.valueOf("neo4jUser")));get neo4jUser(){return L(this.#r)}set neo4jUser(t){W(this.#r,t,!0)}#i=re(fe(this.valueOf("neo4jPass")));get neo4jPass(){return L(this.#i)}set neo4jPass(t){W(this.#i,t,!0)}#u=re(fe(this.valueOf("limit")));get limit(){return L(this.#u)}set limit(t){W(this.#u,t,!0)}#a=re(fe(!!this.valueOf("debugging")));get debugging(){return L(this.#a)}set debugging(t){W(this.#a,t,!0)}#s=re(fe(!!this.valueOf("useKubo")));get useKubo(){return L(this.#s)}set useKubo(t){W(this.#s,t,!0)}#l=re(fe(this.valueOf("kuboUsername")));get kuboUsername(){return L(this.#l)}set kuboUsername(t){W(this.#l,t,!0)}#c=re(fe(this.valueOf("kuboPassword")));get kuboPassword(){return L(this.#c)}set kuboPassword(t){W(this.#c,t,!0)}#o=re(fe(!!this.valueOf("useStoracha")));get useStoracha(){return L(this.#o)}set useStoracha(t){W(this.#o,t,!0)}#f=re(fe(this.valueOf("storachaEmail")));get storachaEmail(){return L(this.#f)}set storachaEmail(t){W(this.#f,t,!0)}#d=re(fe(this.valueOf("storachaSpace")));get storachaSpace(){return L(this.#d)}set storachaSpace(t){W(this.#d,t,!0)}#h=re(fe(this.valueOf("detailsZoom")));get detailsZoom(){return L(this.#h)}set detailsZoom(t){W(this.#h,t,!0)}#p=re(fe(this.valueOf("janusGraphURL")));get janusGraphURL(){return L(this.#p)}set janusGraphURL(t){W(this.#p,t,!0)}save(t){if(typeof localStorage<"u")if(t!=null)this[t]==null||this[t]===""?localStorage.removeItem(te.keys[t]):localStorage.setItem(te.keys[t],String(this[t]));else for(const r of Object.keys(te.keys))this.save(r)}}const ke=new te;var ql=Ze('<dialog><form class="svelte-c6pxa5"><fieldset class="svelte-c6pxa5"><legend>General Settings</legend> <label class="svelte-c6pxa5"><input type="checkbox" class="svelte-c6pxa5"/> <span class="svelte-c6pxa5">Debug Logging</span></label> <label class="svelte-c6pxa5"><span class="svelte-c6pxa5">Details Zoom</span> <input type="text" inputmode="numeric" pattern="[0-9]*\\.?[0-9]*" class="svelte-c6pxa5"/></label></fieldset> <fieldset class="svelte-c6pxa5"><legend>IPFS Settings</legend> <label class="svelte-c6pxa5"><span class="svelte-c6pxa5">Gateway URL Pattern</span> <input class="svelte-c6pxa5"/></label></fieldset> <fieldset class="svelte-c6pxa5"><legend>Kubo Settings</legend> <label class="svelte-c6pxa5"><input type="checkbox" class="svelte-c6pxa5"/> <span class="svelte-c6pxa5">Save to Kubo</span></label> <label class="svelte-c6pxa5"><span class="svelte-c6pxa5">URL</span> <input class="svelte-c6pxa5"/></label> <label class="svelte-c6pxa5"><span class="svelte-c6pxa5">Username</span> <input placeholder="Leave blank to disable authentication‚Ä¶" autocomplete="username" class="svelte-c6pxa5"/></label> <label class="svelte-c6pxa5"><span class="svelte-c6pxa5">Password</span> <input type="password" autocomplete="new-password" class="svelte-c6pxa5"/></label></fieldset> <menu class="svelte-c6pxa5"><button type="button" class="svelte-c6pxa5">Cancel</button> <button class="svelte-c6pxa5">Save</button></menu></form></dialog>');function Gl(e,t){Ln(t,!0);let r=ct(t,"self",15);const n=new te(ke);ul(()=>{const v=E=>{const A=r().getBoundingClientRect(),B=E.clientX>=A.left&&E.clientX<=A.right&&E.clientY>=A.top&&E.clientY<=A.bottom;r().open&&!B&&!(E.target instanceof HTMLButtonElement&&E.target?.classList.contains("menu-open"))&&r().close()};return document.addEventListener("click",v),()=>document.removeEventListener("click",v)});function s(v){t.onsubmit?.(v),ke.values=n,ke.save(),r().close()}var o=ql(),i=V(o),a=V(i),c=ee(V(a),2),f=V(c);_t(f),_r(2),H(c);var u=ee(c,2),l=ee(V(u),2);_t(l),H(u),H(a);var w=ee(a,2),d=ee(V(w),2),p=ee(V(d),2);_t(p),H(d),H(w);var g=ee(w,2),h=ee(V(g),2),b=V(h);_t(b),_r(2),H(h);var S=ee(h,2),_=ee(V(S),2);_t(_),H(S);var P=ee(S,2),x=ee(V(P),2);_t(x),H(P);var N=ee(P,2),k=ee(V(N),2);_t(k),H(N),H(g);var I=ee(g,2),m=V(I);m.__click=v=>{n.values=ke,r().close()},_r(2),H(I),H(i),H(o),Ts(o,v=>r(v),()=>r()),Ns("submit",i,s),oi(f,()=>n.debugging,v=>n.debugging=v),Yt(l,()=>ke.detailsZoom,v=>ke.detailsZoom=v),Yt(p,()=>n.ipfsURLPattern,v=>n.ipfsURLPattern=v),oi(b,()=>n.useKubo,v=>n.useKubo=v),Yt(_,()=>n.ipfsAPI,v=>n.ipfsAPI=v),Yt(x,()=>n.kuboUsername,v=>n.kuboUsername=v),Yt(k,()=>n.kuboPassword,v=>n.kuboPassword=v),Pe(e,o),Dn()}oo(["click"]);var Kl=Ze("<span> </span>"),Zl=Ze('<form class="svelte-ear2p7"><label class="svelte-ear2p7"><!> <input type="range" class="svelte-ear2p7"/></label></form>');function Wl(e,t){Ln(t,!0);let r=ct(t,"min",3,0),n=ct(t,"max",3,100),s=ct(t,"step",3,1),o=ct(t,"prefix",3,""),i=ct(t,"suffix",3,""),a=ct(t,"label",3,null),c=ct(t,"value",31,()=>fe(document.documentElement.style.getPropertyValue(t.property)??0));function f(g){document.documentElement.style.setProperty(t.property,`${o()}${c()}${i()}`)}var u=Zl(),l=V(u),w=V(l);{var d=g=>{var h=Kl(),b=V(h,!0);H(h),dt(()=>Ir(b,a())),Pe(g,h)};dn(w,g=>{a()&&g(d)})}var p=ee(w,2);_t(p),p.__input=f,H(l),H(u),dt(()=>{je(p,"min",r()),je(p,"max",n()),je(p,"step",s())}),Yt(p,c),Pe(e,u),Dn()}oo(["input"]);const Jl=""+new URL("../assets/root.DxdJSLNx.svg",import.meta.url).href;var Yl=Ze('<img alt="ü™æ" class="svelte-1ci3tk1"/>'),Xl=Ze('<li class="svelte-1ci3tk1"><button>‚á®</button> <a class="svelte-1ci3tk1"><!></a></li>'),Ql=Ze('<ol class="svelte-1ci3tk1"></ol>');function ef(e,t){Ln(t,!0);let r=ct(t,"path",19,()=>[]);var n=Ql();_a(n,21,()=>({length:r().length+1}),Ia,(s,o,i)=>{const a=Sr(()=>`/${r().slice(0,i).join("/")}${i>0?"/":""}`),c=Sr(()=>`${r().at(i-1)}`),f=Sr(()=>decodeURI(L(c)));var u=Xl(),l=ee(V(u),2),w=V(l);{var d=g=>{var h=Yl();dt(()=>je(h,"src",Jl)),Pe(g,h)},p=g=>{var h=ll();dt(()=>Ir(h,`${L(f)??""}/`)),Pe(g,h)};dn(w,g=>{i===0?g(d):g(p,!1)})}H(l),H(u),dt(()=>{je(l,"href",L(a)),je(l,"title",i===0?"ùôçùô§ùô§ùô©":L(f))}),Pe(s,u)}),H(n),Pe(e,n),Dn()}const tf=""+new URL("../assets/folder.I7zX7laP.svg",import.meta.url).href;function bt(e=0){return new Uint8Array(e)}function $t(e=0){return new Uint8Array(e)}const rf=Math.pow(2,7),nf=Math.pow(2,14),sf=Math.pow(2,21),uo=Math.pow(2,28),lo=Math.pow(2,35),fo=Math.pow(2,42),ho=Math.pow(2,49),X=128,Ee=127;function rt(e){if(e<rf)return 1;if(e<nf)return 2;if(e<sf)return 3;if(e<uo)return 4;if(e<lo)return 5;if(e<fo)return 6;if(e<ho)return 7;if(Number.MAX_SAFE_INTEGER!=null&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function Ra(e,t,r=0){switch(rt(e)){case 8:t[r++]=e&255|X,e/=128;case 7:t[r++]=e&255|X,e/=128;case 6:t[r++]=e&255|X,e/=128;case 5:t[r++]=e&255|X,e/=128;case 4:t[r++]=e&255|X,e>>>=7;case 3:t[r++]=e&255|X,e>>>=7;case 2:t[r++]=e&255|X,e>>>=7;case 1:{t[r++]=e&255,e>>>=7;break}default:throw new Error("unreachable")}return t}function of(e,t,r=0){switch(rt(e)){case 8:t.set(r++,e&255|X),e/=128;case 7:t.set(r++,e&255|X),e/=128;case 6:t.set(r++,e&255|X),e/=128;case 5:t.set(r++,e&255|X),e/=128;case 4:t.set(r++,e&255|X),e>>>=7;case 3:t.set(r++,e&255|X),e>>>=7;case 2:t.set(r++,e&255|X),e>>>=7;case 1:{t.set(r++,e&255),e>>>=7;break}default:throw new Error("unreachable")}return t}function ja(e,t){let r=e[t],n=0;if(n+=r&Ee,r<X||(r=e[t+1],n+=(r&Ee)<<7,r<X)||(r=e[t+2],n+=(r&Ee)<<14,r<X)||(r=e[t+3],n+=(r&Ee)<<21,r<X)||(r=e[t+4],n+=(r&Ee)*uo,r<X)||(r=e[t+5],n+=(r&Ee)*lo,r<X)||(r=e[t+6],n+=(r&Ee)*fo,r<X)||(r=e[t+7],n+=(r&Ee)*ho,r<X))return n;throw new RangeError("Could not decode varint")}function af(e,t){let r=e.get(t),n=0;if(n+=r&Ee,r<X||(r=e.get(t+1),n+=(r&Ee)<<7,r<X)||(r=e.get(t+2),n+=(r&Ee)<<14,r<X)||(r=e.get(t+3),n+=(r&Ee)<<21,r<X)||(r=e.get(t+4),n+=(r&Ee)*uo,r<X)||(r=e.get(t+5),n+=(r&Ee)*lo,r<X)||(r=e.get(t+6),n+=(r&Ee)*fo,r<X)||(r=e.get(t+7),n+=(r&Ee)*ho,r<X))return n;throw new RangeError("Could not decode varint")}function Rn(e,t,r=0){return t==null&&(t=$t(rt(e))),t instanceof Uint8Array?Ra(e,t,r):of(e,t,r)}function jr(e,t=0){return e instanceof Uint8Array?ja(e,t):af(e,t)}function pt(e,t){t==null&&(t=e.reduce((s,o)=>s+o.length,0));const r=$t(t);let n=0;for(const s of e)r.set(s,n),n+=s.length;return r}function cf(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function lr(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function uf(e){return new TextEncoder().encode(e)}function lf(e){return new TextDecoder().decode(e)}function ff(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<e.length;s++){var o=e.charAt(s),i=o.charCodeAt(0);if(r[i]!==255)throw new TypeError(o+" is ambiguous");r[i]=s}var a=e.length,c=e.charAt(0),f=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function l(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,h=0,b=0,S=p.length;b!==S&&p[b]===0;)b++,g++;for(var _=(S-b)*u+1>>>0,P=new Uint8Array(_);b!==S;){for(var x=p[b],N=0,k=_-1;(x!==0||N<h)&&k!==-1;k--,N++)x+=256*P[k]>>>0,P[k]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");h=N,b++}for(var I=_-h;I!==_&&P[I]===0;)I++;for(var m=c.repeat(g);I<_;++I)m+=e.charAt(P[I]);return m}function w(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var h=0,b=0;p[g]===c;)h++,g++;for(var S=(p.length-g)*f+1>>>0,_=new Uint8Array(S);p[g];){var P=r[p.charCodeAt(g)];if(P===255)return;for(var x=0,N=S-1;(P!==0||x<b)&&N!==-1;N--,x++)P+=a*_[N]>>>0,_[N]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");b=x,g++}if(p[g]!==" "){for(var k=S-b;k!==S&&_[k]===0;)k++;for(var I=new Uint8Array(h+(S-k)),m=h;k!==S;)I[m++]=_[k++];return I}}}function d(p){var g=w(p);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:w,decode:d}}var df=ff,hf=df;let pf=class{name;prefix;baseEncode;constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},yf=class{name;prefix;baseDecode;prefixCodePoint;constructor(t,r,n){this.name=t,this.prefix=r;const s=r.codePointAt(0);if(s===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=s,this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Fa(this,t)}},gf=class{decoders;constructor(t){this.decoders=t}or(t){return Fa(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n!=null)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function Fa(e,t){return new gf({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}let wf=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(t,r,n,s){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new pf(t,r,n),this.decoder=new yf(t,r,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};function jn({name:e,prefix:t,encode:r,decode:n}){return new wf(e,t,r,n)}function Fr({name:e,prefix:t,alphabet:r}){const{encode:n,decode:s}=hf(r,e);return jn({prefix:t,name:e,encode:n,decode:o=>lr(s(o))})}function mf(e,t,r,n){let s=e.length;for(;e[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let i=0,a=0,c=0;for(let f=0;f<s;++f){const u=t[e[f]];if(u===void 0)throw new SyntaxError(`Non-${n} character`);a=a<<r|u,i+=r,i>=8&&(i-=8,o[c++]=255&a>>i)}if(i>=r||(255&a<<8-i)!==0)throw new SyntaxError("Unexpected end of data");return o}function bf(e,t,r){const n=t[t.length-1]==="=",s=(1<<r)-1;let o="",i=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],i+=8;i>r;)i-=r,o+=t[s&a>>i];if(i!==0&&(o+=t[s&a<<r-i]),n)for(;(o.length*r&7)!==0;)o+="=";return o}function xf(e){const t={};for(let r=0;r<e.length;++r)t[e[r]]=r;return t}function ge({name:e,prefix:t,bitsPerChar:r,alphabet:n}){const s=xf(n);return jn({prefix:t,name:e,encode(o){return bf(o,n,r)},decode(o){return mf(o,s,r,e)}})}const Ef=Fr({prefix:"9",name:"base10",alphabet:"0123456789"}),vf=Object.freeze(Object.defineProperty({__proto__:null,base10:Ef},Symbol.toStringTag,{value:"Module"})),Af=ge({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Sf=ge({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),_f=Object.freeze(Object.defineProperty({__proto__:null,base16:Af,base16upper:Sf},Symbol.toStringTag,{value:"Module"})),If=ge({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Bf=Object.freeze(Object.defineProperty({__proto__:null,base2:If},Symbol.toStringTag,{value:"Module"})),za=Array.from("üöÄü™ê‚òÑüõ∞üååüåëüåíüåìüåîüåïüåñüåóüåòüåçüåèüåéüêâ‚òÄüíªüñ•üíæüíøüòÇ‚ù§üòçü§£üòäüôèüíïüò≠üòòüëçüòÖüëèüòÅüî•ü•∞üíîüíñüíôüò¢ü§îüòÜüôÑüí™üòâ‚ò∫üëåü§óüíúüòîüòéüòáüåπü§¶üéâüíû‚úå‚ú®ü§∑üò±üòåüå∏üôåüòãüíóüíöüòèüíõüôÇüíìü§©üòÑüòÄüñ§üòÉüíØüôàüëáüé∂üòíü§≠‚ù£üòúüíãüëÄüò™üòëüí•üôãüòûüò©üò°ü§™üëäü•≥üò•ü§§üëâüíÉüò≥‚úãüòöüòùüò¥üåüüò¨üôÉüçÄüå∑üòªüòì‚≠ê‚úÖü•∫üåàüòàü§òüí¶‚úîüò£üèÉüíê‚òπüéäüíòüò†‚òùüòïüå∫üéÇüåªüòêüñïüíùüôäüòπüó£üí´üíÄüëëüéµü§ûüòõüî¥üò§üåºüò´‚öΩü§ô‚òïüèÜü§´üëàüòÆüôÜüçªüçÉüê∂üíÅüò≤üåøüß°üéÅ‚ö°üåûüéà‚ùå‚úäüëãüò∞ü§®üò∂ü§ùüö∂üí∞üçìüí¢ü§üüôÅüö®üí®ü§¨‚úàüéÄüç∫ü§ìüòôüíüüå±üòñüë∂ü•¥‚ñ∂‚û°‚ùìüíéüí∏‚¨áüò®üåöü¶ãüò∑üï∫‚ö†üôÖüòüüòµüëéü§≤ü§†ü§ßüìåüîµüíÖüßêüêæüçíüòóü§ëüåäü§Øüê∑‚òéüíßüòØüíÜüëÜüé§üôáüçë‚ùÑüå¥üí£üê∏üíåüìçü•Äü§¢üëÖüí°üí©üëêüì∏üëªü§êü§Æüéºü•µüö©üçéüçäüëºüíçüì£ü•Ç"),Cf=za.reduce((e,t,r)=>(e[r]=t,e),[]),$f=za.reduce((e,t,r)=>{const n=t.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${t}`);return e[n]=r,e},[]);function Pf(e){return e.reduce((t,r)=>(t+=Cf[r],t),"")}function kf(e){const t=[];for(const r of e){const n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);const s=$f[n];if(s==null)throw new Error(`Non-base256emoji character: ${r}`);t.push(s)}return new Uint8Array(t)}const Uf=jn({prefix:"üöÄ",name:"base256emoji",encode:Pf,decode:kf}),Nf=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Uf},Symbol.toStringTag,{value:"Module"})),Ct=ge({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Tf=ge({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Of=ge({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Lf=ge({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Df=ge({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Rf=ge({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),jf=ge({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ff=ge({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),zf=ge({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Mf=Object.freeze(Object.defineProperty({__proto__:null,base32:Ct,base32hex:Df,base32hexpad:jf,base32hexpadupper:Ff,base32hexupper:Rf,base32pad:Of,base32padupper:Lf,base32upper:Tf,base32z:zf},Symbol.toStringTag,{value:"Module"})),cn=Fr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Hf=Fr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Vf=Object.freeze(Object.defineProperty({__proto__:null,base36:cn,base36upper:Hf},Symbol.toStringTag,{value:"Module"})),de=Fr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),qf=Fr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Gf=Object.freeze(Object.defineProperty({__proto__:null,base58btc:de,base58flickr:qf},Symbol.toStringTag,{value:"Module"})),Fn=ge({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Kf=ge({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),zn=ge({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Zf=ge({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Wf=Object.freeze(Object.defineProperty({__proto__:null,base64:Fn,base64pad:Kf,base64url:zn,base64urlpad:Zf},Symbol.toStringTag,{value:"Module"})),Jf=ge({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Yf=Object.freeze(Object.defineProperty({__proto__:null,base8:Jf},Symbol.toStringTag,{value:"Module"})),Xf=jn({prefix:"\0",name:"identity",encode:e=>lf(e),decode:e=>uf(e)}),Qf=Object.freeze(Object.defineProperty({__proto__:null,identity:Xf},Symbol.toStringTag,{value:"Module"})),ed=new TextEncoder,td=new TextDecoder,rd="json",nd=512;function sd(e){return ed.encode(JSON.stringify(e))}function od(e){return JSON.parse(td.decode(e))}const id=Object.freeze(Object.defineProperty({__proto__:null,code:nd,decode:od,encode:sd,name:rd},Symbol.toStringTag,{value:"Module"})),ad="raw",cd=85;function ud(e){return lr(e)}function ld(e){return lr(e)}const fd=Object.freeze(Object.defineProperty({__proto__:null,code:cd,decode:ld,encode:ud,name:ad},Symbol.toStringTag,{value:"Module"}));var dd=Ma,ui=128,hd=-128,pd=Math.pow(2,31);function Ma(e,t,r){t=t||[],r=r||0;for(var n=r;e>=pd;)t[r++]=e&255|ui,e/=128;for(;e&hd;)t[r++]=e&255|ui,e>>>=7;return t[r]=e|0,Ma.bytes=r-n+1,t}var yd=Ls,gd=128,li=127;function Ls(e,n){var r=0,n=n||0,s=0,o=n,i,a=e.length;do{if(o>=a)throw Ls.bytes=0,new RangeError("Could not decode varint");i=e[o++],r+=s<28?(i&li)<<s:(i&li)*Math.pow(2,s),s+=7}while(i>=gd);return Ls.bytes=o-n,r}var wd=Math.pow(2,7),md=Math.pow(2,14),bd=Math.pow(2,21),xd=Math.pow(2,28),Ed=Math.pow(2,35),vd=Math.pow(2,42),Ad=Math.pow(2,49),Sd=Math.pow(2,56),_d=Math.pow(2,63),Id=function(e){return e<wd?1:e<md?2:e<bd?3:e<xd?4:e<Ed?5:e<vd?6:e<Ad?7:e<Sd?8:e<_d?9:10},Bd={encode:dd,decode:yd,encodingLength:Id},pn=Bd;function Ds(e,t=0){return[pn.decode(e,t),pn.decode.bytes]}function yn(e,t,r=0){return pn.encode(e,t,r),t}function gn(e){return pn.encodingLength(e)}function Tr(e,t){const r=t.byteLength,n=gn(e),s=n+gn(r),o=new Uint8Array(s+r);return yn(e,o,0),yn(r,o,n),o.set(t,s),new yo(e,r,t,o)}function po(e){const t=lr(e),[r,n]=Ds(t),[s,o]=Ds(t.subarray(n)),i=t.subarray(n+o);if(i.byteLength!==s)throw new Error("Incorrect length");return new yo(r,s,i,t)}function Cd(e,t){if(e===t)return!0;{const r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&cf(e.bytes,r.bytes)}}let yo=class{code;size;digest;bytes;constructor(t,r,n,s){this.code=t,this.size=r,this.digest=n,this.bytes=s}};const Ha=0,$d="identity",Va=lr;function Pd(e){return Tr(Ha,Va(e))}const Pt={code:Ha,name:$d,encode:Va,digest:Pd},kd=Object.freeze(Object.defineProperty({__proto__:null,identity:Pt},Symbol.toStringTag,{value:"Module"}));function qa({name:e,code:t,encode:r}){return new Ud(e,t,r)}class Ud{name;code;encode;constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?Tr(this.code,r):r.then(n=>Tr(this.code,n))}else throw Error("Unknown type, must be binary type")}}function Ga(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}const go=qa({name:"sha2-256",code:18,encode:Ga("SHA-256")}),Nd=qa({name:"sha2-512",code:19,encode:Ga("SHA-512")}),Td=Object.freeze(Object.defineProperty({__proto__:null,sha256:go,sha512:Nd},Symbol.toStringTag,{value:"Module"}));function fi(e,t){const{bytes:r,version:n}=e;switch(n){case 0:return Ld(r,Rs(e),t??de.encoder);default:return Dd(r,Rs(e),t??Ct.encoder)}}const di=new WeakMap;function Rs(e){const t=di.get(e);if(t==null){const r=new Map;return di.set(e,r),r}return t}let F=class xe{code;version;multihash;bytes;"/";constructor(t,r,n,s){this.code=r,this.version=t,this.multihash=n,this.bytes=s,this["/"]=s}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:t,multihash:r}=this;if(t!==mr)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Rd)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return xe.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:t,digest:r}=this.multihash,n=Tr(t,r);return xe.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return xe.equals(this,t)}static equals(t,r){const n=r;return n!=null&&t.code===n.code&&t.version===n.version&&Cd(t.multihash,n.multihash)}toString(t){return fi(this,t)}toJSON(){return{"/":fi(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;const r=t;if(r instanceof xe)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:s,multihash:o,bytes:i}=r;return new xe(n,s,o,i??hi(n,s,o.bytes))}else if(r[jd]===!0){const{version:n,multihash:s,code:o}=r,i=po(s);return xe.create(n,o,i)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(r!==mr)throw new Error(`Version 0 CID must use dag-pb (code: ${mr}) block encoding`);return new xe(t,r,n,n.bytes)}case 1:{const s=hi(t,r,n.bytes);return new xe(t,r,n,s)}default:throw new Error("Invalid version")}}static createV0(t){return xe.create(0,mr,t)}static createV1(t,r){return xe.create(1,t,r)}static decode(t){const[r,n]=xe.decodeFirst(t);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(t){const r=xe.inspectBytes(t),n=r.size-r.multihashSize,s=lr(t.subarray(n,n+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");const o=s.subarray(r.multihashSize-r.digestSize),i=new yo(r.multihashCode,r.digestSize,o,s);return[r.version===0?xe.createV0(i):xe.createV1(r.codec,i),t.subarray(r.size)]}static inspectBytes(t){let r=0;const n=()=>{const[l,w]=Ds(t.subarray(r));return r+=w,l};let s=n(),o=mr;if(s===18?(s=0,r=0):o=n(),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);const i=r,a=n(),c=n(),f=r+c,u=f-i;return{version:s,codec:o,multihashCode:a,digestSize:c,multihashSize:u,size:f}}static parse(t,r){const[n,s]=Od(t,r),o=xe.decode(s);if(o.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Rs(o).set(n,t),o}};function Od(e,t){switch(e[0]){case"Q":{const r=t??de;return[de.prefix,r.decode(`${de.prefix}${e}`)]}case de.prefix:{const r=t??de;return[de.prefix,r.decode(e)]}case Ct.prefix:{const r=t??Ct;return[Ct.prefix,r.decode(e)]}case cn.prefix:{const r=t??cn;return[cn.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}}function Ld(e,t,r){const{prefix:n}=r;if(n!==de.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const s=t.get(n);if(s==null){const o=r.encode(e).slice(1);return t.set(n,o),o}else return s}function Dd(e,t,r){const{prefix:n}=r,s=t.get(n);if(s==null){const o=r.encode(e);return t.set(n,o),o}else return s}const mr=112,Rd=18;function hi(e,t,r){const n=gn(e),s=n+gn(t),o=new Uint8Array(s+r.byteLength);return yn(e,o,0),yn(t,o,n),o.set(r,s),o}const jd=Symbol.for("@ipld/js-cid/CID"),wn={...Qf,...Bf,...Yf,...vf,..._f,...Mf,...Vf,...Gf,...Wf,...Nf},Fd={...Td,...kd},zd={raw:fd,json:id};function Ka(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const pi=Ka("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),us=Ka("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=$t(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Za={utf8:pi,"utf-8":pi,hex:wn.base16,latin1:us,ascii:us,binary:us,...wn};function ne(e,t="utf8"){const r=Za[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)}class Md{index=0;input="";new(t){return this.index=0,this.input=t,this}readAtomically(t){const r=this.index,n=t();return n===void 0&&(this.index=r),n}parseWith(t){const r=t();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(t){return this.readAtomically(()=>{const r=this.readChar();if(r===t)return r})}readSeparator(t,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(t)===void 0))return n()})}readNumber(t,r,n,s){return this.readAtomically(()=>{let o=0,i=0;const a=this.peekChar();if(a===void 0)return;const c=a==="0",f=2**(8*s)-1;for(;;){const u=this.readAtomically(()=>{const l=this.readChar();if(l===void 0)return;const w=Number.parseInt(l,t);if(!Number.isNaN(w))return w});if(u===void 0)break;if(o*=t,o+=u,o>f||(i+=1,r!==void 0&&i>r))return}if(i!==0)return!n&&c&&i>1?void 0:o})}readIPv4Addr(){return this.readAtomically(()=>{const t=new Uint8Array(4);for(let r=0;r<t.length;r++){const n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;t[r]=n}return t})}readIPv6Addr(){const t=r=>{for(let n=0;n<r.length/2;n++){const s=n*2;if(n<r.length-3){const i=this.readSeparator(":",n,()=>this.readIPv4Addr());if(i!==void 0)return r[s]=i[0],r[s+1]=i[1],r[s+2]=i[2],r[s+3]=i[3],[s+4,!0]}const o=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(o===void 0)return[s,!1];r[s]=o>>8,r[s+1]=o&255}return[r.length,!1]};return this.readAtomically(()=>{const r=new Uint8Array(16),[n,s]=t(r);if(n===16)return r;if(s||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const o=new Uint8Array(14),i=16-(n+2),[a]=t(o.subarray(0,i));return r.set(o.subarray(0,a),16-a),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const Wa=45,Hd=15,tr=new Md;function Vd(e){if(!(e.length>Hd))return tr.new(e).parseWith(()=>tr.readIPv4Addr())}function qd(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>Wa))return tr.new(e).parseWith(()=>tr.readIPv6Addr())}function Gd(e,t=!1){if(e.includes("%")&&(e=e.split("%")[0]),e.length>Wa)return;const r=tr.new(e).parseWith(()=>tr.readIPAddr());if(r)return t&&r.length===4?Uint8Array.from([0,0,0,0,0,0,0,0,0,0,255,255,r[0],r[1],r[2],r[3]]):r}function Fe(e,t="utf8"){const r=Za[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)}function Kd(e){return!!Vd(e)}function Zd(e){return!!qd(e)}function Ja(e){return!!Gd(e)}const yi=Kd,Wd=Zd,Ya=function(e){let t=0;if(e=e.toString().trim(),yi(e)){const r=new Uint8Array(t+4);return e.split(/\./g).forEach(n=>{r[t++]=parseInt(n,10)&255}),r}if(Wd(e)){const r=e.split(":",8);let n;for(n=0;n<r.length;n++){const o=yi(r[n]);let i;o&&(i=Ya(r[n]),r[n]=ne(i.slice(0,2),"base16")),i!=null&&++n<8&&r.splice(n,0,ne(i.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);const o=[n,1];for(n=9-r.length;n>0;n--)o.push("0");r.splice.apply(r,o)}const s=new Uint8Array(t+16);for(n=0;n<r.length;n++){const o=parseInt(r[n],16);s[t++]=o>>8&255,s[t++]=o&255}return s}throw new Error("invalid ip address")},Jd=function(e,t=0,r){t=~~t,r=r??e.length-t;const n=new DataView(e.buffer);if(r===4){const s=[];for(let o=0;o<r;o++)s.push(e[t+o]);return s.join(".")}if(r===16){const s=[];for(let o=0;o<r;o+=2)s.push(n.getUint16(t+o).toString(16));return s.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},Ce=-1,Or={},js={},Yd=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,Ce,"ip6zone"],[43,8,"ipcidr"],[53,Ce,"dns",!0],[54,Ce,"dns4",!0],[55,Ce,"dns6",!0],[56,Ce,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,Ce,"unix",!1,!0],[421,Ce,"ipfs"],[421,Ce,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,Ce,"garlic64"],[448,0,"tls"],[449,Ce,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,Ce,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[481,Ce,"http-path"],[777,Ce,"memory"]];Yd.forEach(e=>{const t=Xd(...e);js[t.code]=t,Or[t.name]=t});function Xd(e,t,r,n,s){return{code:e,size:t,name:r,resolvable:!!n,path:!!s}}function K(e){if(typeof e=="number"){if(js[e]!=null)return js[e];throw new Error(`no protocol with code: ${e}`)}else if(typeof e=="string"){if(Or[e]!=null)return Or[e];throw new Error(`no protocol with name: ${e}`)}throw new Error(`invalid protocol id type: ${typeof e}`)}K("ip4");K("ip6");K("ipcidr");function Xa(e,t){switch(K(e).code){case 4:case 41:return eh(t);case 42:return ds(t);case 43:return ne(t,"base10");case 6:case 273:case 33:case 132:return Qa(t).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return ds(t);case 421:return sh(t);case 444:return mi(t);case 445:return mi(t);case 466:return nh(t);case 481:return globalThis.encodeURIComponent(ds(t));default:return ne(t,"base16")}}function gi(e,t){switch(K(e).code){case 4:return wi(t);case 41:return wi(t);case 42:return fs(t);case 43:return Fe(t,"base10");case 6:case 273:case 33:case 132:return wo(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return fs(t);case 421:return th(t);case 444:return oh(t);case 445:return ih(t);case 466:return rh(t);case 481:return fs(globalThis.decodeURIComponent(t));default:return Fe(t,"base16")}}const ls=Object.values(wn).map(e=>e.decoder),Qd=(function(){let e=ls[0].or(ls[1]);return ls.slice(2).forEach(t=>e=e.or(t)),e})();function wi(e){if(!Ja(e))throw new Error("invalid ip address");return Ya(e)}function eh(e){const t=Jd(e,0,e.length);if(t==null)throw new Error("ipBuff is required");if(!Ja(t))throw new Error("invalid ip address");return t}function wo(e){const t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function Qa(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function fs(e){const t=Fe(e),r=Uint8Array.from(Rn(t.length));return pt([r,t],r.length+t.length)}function ds(e){const t=jr(e);if(e=e.slice(rt(t)),e.length!==t)throw new Error("inconsistent lengths");return ne(e)}function th(e){let t;e[0]==="Q"||e[0]==="1"?t=po(de.decode(`z${e}`)).bytes:t=F.parse(e).multihash.bytes;const r=Uint8Array.from(Rn(t.length));return pt([r,t],r.length+t.length)}function rh(e){const t=Qd.decode(e),r=Uint8Array.from(Rn(t.length));return pt([r,t],r.length+t.length)}function nh(e){const t=jr(e),r=e.slice(rt(t));if(r.length!==t)throw new Error("inconsistent lengths");return"u"+ne(r,"base64url")}function sh(e){const t=jr(e),r=e.slice(rt(t));if(r.length!==t)throw new Error("inconsistent lengths");return ne(r,"base58btc")}function oh(e){const t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==16)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);const r=Ct.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const s=wo(n);return pt([r,s],r.length+s.length)}function ih(e){const t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==56)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);const r=Ct.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const s=wo(n);return pt([r,s],r.length+s.length)}function mi(e){const t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=ne(t,"base32"),s=Qa(r);return`${n}:${s}`}function ah(e){e=Fs(e);const t=[],r=[];let n=null;const s=e.split("/").slice(1);if(s.length===1&&s[0]==="")return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let o=0;o<s.length;o++){const i=s[o],a=K(i);if(a.size===0){t.push([a.code]),r.push([a.code]);continue}if(o++,o>=s.length)throw new rc("invalid address: "+e);if(a.path===!0){n=Fs(s.slice(o).join("/")),t.push([a.code,gi(a.code,n)]),r.push([a.code,n]);break}const c=gi(a.code,s[o]);t.push([a.code,c]),r.push([a.code,Xa(a.code,c)])}return{string:ec(r),bytes:tc(t),tuples:t,stringTuples:r,path:n}}function bi(e){const t=[],r=[];let n=null,s=0;for(;s<e.length;){const o=jr(e,s),i=rt(o),a=K(o),c=ch(a,e.slice(s+i));if(c===0){t.push([o]),r.push([o]),s+=i;continue}const f=e.slice(s+i,s+i+c);if(s+=c+i,s>e.length)throw new rc("Invalid address Uint8Array: "+ne(e,"base16"));t.push([o,f]);const u=Xa(o,f);if(r.push([o,u]),a.path===!0){n=u;break}}return{bytes:Uint8Array.from(e),string:ec(r),tuples:t,stringTuples:r,path:n}}function ec(e){const t=[];return e.map(r=>{const n=K(r[0]);return t.push(n.name),r.length>1&&r[1]!=null&&t.push(r[1]),null}),Fs(t.join("/"))}function tc(e){return pt(e.map(t=>{const r=K(t[0]);let n=Uint8Array.from(Rn(r.code));return t.length>1&&t[1]!=null&&(n=pt([n,t[1]])),n}))}function ch(e,t){if(e.size>0)return e.size/8;if(e.size===0)return 0;{const r=jr(t instanceof Uint8Array?t:Uint8Array.from(t));return r+rt(r)}}function Fs(e){return"/"+e.trim().split("/").filter(t=>t).join("/")}class rc extends Error{static name="ParseError";name="ParseError";constructor(t){super(`Error parsing address: ${t}`)}}function kt(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}const uh=Symbol.for("nodejs.util.inspect.custom"),nc=Symbol.for("@multiformats/js-multiaddr/multiaddr"),lh=[K("dns").code,K("dns4").code,K("dns6").code,K("dnsaddr").code];class fh extends Error{constructor(t="No available resolver"){super(t),this.name="NoAvailableResolverError"}}class Xt{bytes;#n;#e;#t;#r;[nc]=!0;constructor(t){t==null&&(t="");let r;if(t instanceof Uint8Array)r=bi(t);else if(typeof t=="string"){if(t.length>0&&t.charAt(0)!=="/")throw new Error(`multiaddr "${t}" must start with a "/"`);r=ah(t)}else if(mn(t))r=bi(t.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=r.bytes,this.#n=r.string,this.#e=r.tuples,this.#t=r.stringTuples,this.#r=r.path}toString(){return this.#n}toJSON(){return this.toString()}toOptions(){let t,r,n,s,o="";const i=K("tcp"),a=K("udp"),c=K("ip4"),f=K("ip6"),u=K("dns6"),l=K("ip6zone");for(const[d,p]of this.stringTuples())d===l.code&&(o=`%${p??""}`),lh.includes(d)&&(r=i.name==="tcp"?"tcp":"udp",s=443,n=`${p??""}${o}`,t=d===u.code?6:4),(d===i.code||d===a.code)&&(r=K(d).name==="tcp"?"tcp":"udp",s=parseInt(p??"")),(d===c.code||d===f.code)&&(r=K(d).name==="tcp"?"tcp":"udp",n=`${p??""}${o}`,t=d===f.code?6:4);if(t==null||r==null||n==null||s==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:t,host:n,transport:r,port:s}}protos(){return this.#e.map(([t])=>Object.assign({},K(t)))}protoCodes(){return this.#e.map(([t])=>t)}protoNames(){return this.#e.map(([t])=>K(t).name)}tuples(){return this.#e.map(([t,r])=>r==null?[t]:[t,r])}stringTuples(){return this.#t.map(([t,r])=>r==null?[t]:[t,r])}encapsulate(t){return t=new Xt(t),new Xt(this.toString()+t.toString())}decapsulate(t){const r=t.toString(),n=this.toString(),s=n.lastIndexOf(r);if(s<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new Xt(n.slice(0,s))}decapsulateCode(t){const r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===t)return new Xt(tc(r.slice(0,n)));return this}getPeerId(){try{let t=[];this.stringTuples().forEach(([n,s])=>{n===Or.p2p.code&&t.push([n,s]),n===Or["p2p-circuit"].code&&(t=[])});const r=t.pop();if(r?.[1]!=null){const n=r[1];return n[0]==="Q"||n[0]==="1"?ne(de.decode(`z${n}`),"base58btc"):ne(F.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){return this.#r}equals(t){return kt(this.bytes,t.bytes)}async resolve(t){const r=this.protos().find(o=>o.resolvable);if(r==null)return[this];const n=dh.get(r.name);if(n==null)throw new fh(`no available resolver for ${r.name}`);return(await n(this,t)).map(o=>Ie(o))}nodeAddress(){const t=this.toOptions();if(t.transport!=="tcp"&&t.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(t){const r=(t??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[uh](){return`Multiaddr(${this.#n})`}}const dh=new Map;function mn(e){return!!e?.[nc]}function Ie(e){return new Xt(e)}const hh=["string","number","bigint","symbol"],ph=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function yh(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";const t=typeof e;if(hh.includes(t))return t;if(t==="function")return"Function";if(Array.isArray(e))return"Array";if(gh(e))return"Buffer";const r=wh(e);return r||"Object"}function gh(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function wh(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(ph.includes(t))return t}class y{constructor(t,r,n){this.major=t,this.majorEncoded=t<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}}y.uint=new y(0,"uint",!0);y.negint=new y(1,"negint",!0);y.bytes=new y(2,"bytes",!0);y.string=new y(3,"string",!0);y.array=new y(4,"array",!1);y.map=new y(5,"map",!1);y.tag=new y(6,"tag",!1);y.float=new y(7,"float",!0);y.false=new y(7,"false",!0);y.true=new y(7,"true",!0);y.null=new y(7,"null",!0);y.undefined=new y(7,"undefined",!0);y.break=new y(7,"break",!0);class ${constructor(t,r,n){this.type=t,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const fr=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",mh=new TextDecoder,bh=new TextEncoder;function bn(e){return fr&&globalThis.Buffer.isBuffer(e)}function mo(e){return e instanceof Uint8Array?bn(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const xh=fr?(e,t,r)=>r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):Ei(e,t,r):(e,t,r)=>r-t>64?mh.decode(e.subarray(t,r)):Ei(e,t,r),sc=fr?e=>e.length>64?globalThis.Buffer.from(e):xi(e):e=>e.length>64?bh.encode(e):xi(e),st=e=>Uint8Array.from(e),bo=fr?(e,t,r)=>bn(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r):(e,t,r)=>e.slice(t,r),Eh=fr?(e,t)=>(e=e.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),mo(globalThis.Buffer.concat(e,t))):(e,t)=>{const r=new Uint8Array(t);let n=0;for(let s of e)n+s.length>r.length&&(s=s.subarray(0,r.length-n)),r.set(s,n),n+=s.length;return r},vh=fr?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function Ah(e,t){if(bn(e)&&bn(t))return e.compare(t);for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function xi(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let s=e.charCodeAt(n);s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=s&63|128):(s&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=s&63|128):(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=s&63|128)}return t}function Ei(e,t,r){const n=[];for(;t<r;){const s=e[t];let o=null,i=s>239?4:s>223?3:s>191?2:1;if(t+i<=r){let a,c,f,u;switch(i){case 1:s<128&&(o=s);break;case 2:a=e[t+1],(a&192)===128&&(u=(s&31)<<6|a&63,u>127&&(o=u));break;case 3:a=e[t+1],c=e[t+2],(a&192)===128&&(c&192)===128&&(u=(s&15)<<12|(a&63)<<6|c&63,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:a=e[t+1],c=e[t+2],f=e[t+3],(a&192)===128&&(c&192)===128&&(f&192)===128&&(u=(s&15)<<18|(a&63)<<12|(c&63)<<6|f&63,u>65535&&u<1114112&&(o=u))}}o===null?(o=65533,i=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),t+=i}return oc(n)}const vi=4096;function oc(e){const t=e.length;if(t<=vi)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=vi));return r}const Sh=256;class ic{constructor(t=Sh){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let r=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){const s=r.length-(this.maxCursor-this.cursor)-1;r.set(t,s)}else{if(r){const s=r.length-(this.maxCursor-this.cursor)-1;s<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,s),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(r=vh(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let r;if(this.chunks.length===1){const n=this.chunks[0];t&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=bo(n,0,this.cursor)}else r=Eh(this.chunks,this.cursor);return t&&this.reset(),r}}const j="CBOR decode error:",Lt="CBOR encode error:";function dr(e,t,r){if(e.length-t<r)throw new Error(`${j} not enough data for type`)}const he=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Ft(e,t,r){dr(e,t,1);const n=e[t];if(r.strict===!0&&n<he[0])throw new Error(`${j} integer encoded in more bytes than necessary (strict decode)`);return n}function zt(e,t,r){dr(e,t,2);const n=e[t]<<8|e[t+1];if(r.strict===!0&&n<he[1])throw new Error(`${j} integer encoded in more bytes than necessary (strict decode)`);return n}function Mt(e,t,r){dr(e,t,4);const n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(r.strict===!0&&n<he[2])throw new Error(`${j} integer encoded in more bytes than necessary (strict decode)`);return n}function Ht(e,t,r){dr(e,t,8);const n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],s=e[t+4]*16777216+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],o=(BigInt(n)<<BigInt(32))+BigInt(s);if(r.strict===!0&&o<he[3])throw new Error(`${j} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(r.allowBigInt===!0)return o;throw new Error(`${j} integers outside of the safe integer range are not supported`)}function _h(e,t,r,n){return new $(y.uint,Ft(e,t+1,n),2)}function Ih(e,t,r,n){return new $(y.uint,zt(e,t+1,n),3)}function Bh(e,t,r,n){return new $(y.uint,Mt(e,t+1,n),5)}function Ch(e,t,r,n){return new $(y.uint,Ht(e,t+1,n),9)}function Vt(e,t){return ze(e,0,t.value)}function ze(e,t,r){if(r<he[0]){const n=Number(r);e.push([t|n])}else if(r<he[1]){const n=Number(r);e.push([t|24,n])}else if(r<he[2]){const n=Number(r);e.push([t|25,n>>>8,n&255])}else if(r<he[3]){const n=Number(r);e.push([t|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{const n=BigInt(r);if(n<he[4]){const s=[t|27,0,0,0,0,0,0,0];let o=Number(n&BigInt(4294967295)),i=Number(n>>BigInt(32)&BigInt(4294967295));s[8]=o&255,o=o>>8,s[7]=o&255,o=o>>8,s[6]=o&255,o=o>>8,s[5]=o&255,s[4]=i&255,i=i>>8,s[3]=i&255,i=i>>8,s[2]=i&255,i=i>>8,s[1]=i&255,e.push(s)}else throw new Error(`${j} encountered BigInt larger than allowable range`)}}Vt.encodedSize=function(t){return ze.encodedSize(t.value)};ze.encodedSize=function(t){return t<he[0]?1:t<he[1]?2:t<he[2]?3:t<he[3]?5:9};Vt.compareTokens=function(t,r){return t.value<r.value?-1:t.value>r.value?1:0};function $h(e,t,r,n){return new $(y.negint,-1-Ft(e,t+1,n),2)}function Ph(e,t,r,n){return new $(y.negint,-1-zt(e,t+1,n),3)}function kh(e,t,r,n){return new $(y.negint,-1-Mt(e,t+1,n),5)}const xo=BigInt(-1),ac=BigInt(1);function Uh(e,t,r,n){const s=Ht(e,t+1,n);if(typeof s!="bigint"){const o=-1-s;if(o>=Number.MIN_SAFE_INTEGER)return new $(y.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${j} integers outside of the safe integer range are not supported`);return new $(y.negint,xo-BigInt(s),9)}function Eo(e,t){const r=t.value,n=typeof r=="bigint"?r*xo-ac:r*-1-1;ze(e,t.type.majorEncoded,n)}Eo.encodedSize=function(t){const r=t.value,n=typeof r=="bigint"?r*xo-ac:r*-1-1;return n<he[0]?1:n<he[1]?2:n<he[2]?3:n<he[3]?5:9};Eo.compareTokens=function(t,r){return t.value<r.value?1:t.value>r.value?-1:0};function zr(e,t,r,n){dr(e,t,r+n);const s=bo(e,t+r,t+r+n);return new $(y.bytes,s,r+n)}function Nh(e,t,r,n){return zr(e,t,1,r)}function Th(e,t,r,n){return zr(e,t,2,Ft(e,t+1,n))}function Oh(e,t,r,n){return zr(e,t,3,zt(e,t+1,n))}function Lh(e,t,r,n){return zr(e,t,5,Mt(e,t+1,n))}function Dh(e,t,r,n){const s=Ht(e,t+1,n);if(typeof s=="bigint")throw new Error(`${j} 64-bit integer bytes lengths not supported`);return zr(e,t,9,s)}function xn(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===y.string?sc(e.value):e.value),e.encodedBytes}function Mn(e,t){const r=xn(t);ze(e,t.type.majorEncoded,r.length),e.push(r)}Mn.encodedSize=function(t){const r=xn(t);return ze.encodedSize(r.length)+r.length};Mn.compareTokens=function(t,r){return Rh(xn(t),xn(r))};function Rh(e,t){return e.length<t.length?-1:e.length>t.length?1:Ah(e,t)}function Mr(e,t,r,n,s){const o=r+n;dr(e,t,o);const i=new $(y.string,xh(e,t+r,t+o),o);return s.retainStringBytes===!0&&(i.byteValue=bo(e,t+r,t+o)),i}function jh(e,t,r,n){return Mr(e,t,1,r,n)}function Fh(e,t,r,n){return Mr(e,t,2,Ft(e,t+1,n),n)}function zh(e,t,r,n){return Mr(e,t,3,zt(e,t+1,n),n)}function Mh(e,t,r,n){return Mr(e,t,5,Mt(e,t+1,n),n)}function Hh(e,t,r,n){const s=Ht(e,t+1,n);if(typeof s=="bigint")throw new Error(`${j} 64-bit integer string lengths not supported`);return Mr(e,t,9,s,n)}const Vh=Mn;function hr(e,t,r,n){return new $(y.array,n,r)}function qh(e,t,r,n){return hr(e,t,1,r)}function Gh(e,t,r,n){return hr(e,t,2,Ft(e,t+1,n))}function Kh(e,t,r,n){return hr(e,t,3,zt(e,t+1,n))}function Zh(e,t,r,n){return hr(e,t,5,Mt(e,t+1,n))}function Wh(e,t,r,n){const s=Ht(e,t+1,n);if(typeof s=="bigint")throw new Error(`${j} 64-bit integer array lengths not supported`);return hr(e,t,9,s)}function Jh(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${j} indefinite length items not allowed`);return hr(e,t,1,1/0)}function vo(e,t){ze(e,y.array.majorEncoded,t.value)}vo.compareTokens=Vt.compareTokens;vo.encodedSize=function(t){return ze.encodedSize(t.value)};function pr(e,t,r,n){return new $(y.map,n,r)}function Yh(e,t,r,n){return pr(e,t,1,r)}function Xh(e,t,r,n){return pr(e,t,2,Ft(e,t+1,n))}function Qh(e,t,r,n){return pr(e,t,3,zt(e,t+1,n))}function ep(e,t,r,n){return pr(e,t,5,Mt(e,t+1,n))}function tp(e,t,r,n){const s=Ht(e,t+1,n);if(typeof s=="bigint")throw new Error(`${j} 64-bit integer map lengths not supported`);return pr(e,t,9,s)}function rp(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${j} indefinite length items not allowed`);return pr(e,t,1,1/0)}function Ao(e,t){ze(e,y.map.majorEncoded,t.value)}Ao.compareTokens=Vt.compareTokens;Ao.encodedSize=function(t){return ze.encodedSize(t.value)};function np(e,t,r,n){return new $(y.tag,r,1)}function sp(e,t,r,n){return new $(y.tag,Ft(e,t+1,n),2)}function op(e,t,r,n){return new $(y.tag,zt(e,t+1,n),3)}function ip(e,t,r,n){return new $(y.tag,Mt(e,t+1,n),5)}function ap(e,t,r,n){return new $(y.tag,Ht(e,t+1,n),9)}function So(e,t){ze(e,y.tag.majorEncoded,t.value)}So.compareTokens=Vt.compareTokens;So.encodedSize=function(t){return ze.encodedSize(t.value)};const cp=20,up=21,lp=22,fp=23;function dp(e,t,r,n){if(n.allowUndefined===!1)throw new Error(`${j} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new $(y.null,null,1):new $(y.undefined,void 0,1)}function hp(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${j} indefinite length items not allowed`);return new $(y.break,void 0,1)}function _o(e,t,r){if(r){if(r.allowNaN===!1&&Number.isNaN(e))throw new Error(`${j} NaN values are not supported`);if(r.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${j} Infinity values are not supported`)}return new $(y.float,e,t)}function pp(e,t,r,n){return _o(Bo(e,t+1),3,n)}function yp(e,t,r,n){return _o(Co(e,t+1),5,n)}function gp(e,t,r,n){return _o(fc(e,t+1),9,n)}function Io(e,t,r){const n=t.value;if(n===!1)e.push([y.float.majorEncoded|cp]);else if(n===!0)e.push([y.float.majorEncoded|up]);else if(n===null)e.push([y.float.majorEncoded|lp]);else if(n===void 0)e.push([y.float.majorEncoded|fp]);else{let s,o=!1;(!r||r.float64!==!0)&&(uc(n),s=Bo(qe,1),n===s||Number.isNaN(n)?(qe[0]=249,e.push(qe.slice(0,3)),o=!0):(lc(n),s=Co(qe,1),n===s&&(qe[0]=250,e.push(qe.slice(0,5)),o=!0))),o||(wp(n),s=fc(qe,1),qe[0]=251,e.push(qe.slice(0,9)))}}Io.encodedSize=function(t,r){const n=t.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){uc(n);let s=Bo(qe,1);if(n===s||Number.isNaN(n))return 3;if(lc(n),s=Co(qe,1),n===s)return 5}return 9};const cc=new ArrayBuffer(9),Re=new DataView(cc,1),qe=new Uint8Array(cc,0);function uc(e){if(e===1/0)Re.setUint16(0,31744,!1);else if(e===-1/0)Re.setUint16(0,64512,!1);else if(Number.isNaN(e))Re.setUint16(0,32256,!1);else{Re.setFloat32(0,e);const t=Re.getUint32(0),r=(t&2139095040)>>23,n=t&8388607;if(r===255)Re.setUint16(0,31744,!1);else if(r===0)Re.setUint16(0,(e&2147483648)>>16|n>>13,!1);else{const s=r-127;s<-24?Re.setUint16(0,0):s<-14?Re.setUint16(0,(t&2147483648)>>16|1<<24+s,!1):Re.setUint16(0,(t&2147483648)>>16|s+15<<10|n>>13,!1)}}}function Bo(e,t){if(e.length-t<2)throw new Error(`${j} not enough data for float16`);const r=(e[t]<<8)+e[t+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;const n=r>>10&31,s=r&1023;let o;return n===0?o=s*2**-24:n!==31?o=(s+1024)*2**(n-25):o=s===0?1/0:NaN,r&32768?-o:o}function lc(e){Re.setFloat32(0,e,!1)}function Co(e,t){if(e.length-t<4)throw new Error(`${j} not enough data for float32`);const r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function wp(e){Re.setFloat64(0,e,!1)}function fc(e,t){if(e.length-t<8)throw new Error(`${j} not enough data for float64`);const r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}Io.compareTokens=Vt.compareTokens;function J(e,t,r){throw new Error(`${j} encountered invalid minor (${r}) for major ${e[t]>>>5}`)}function Hn(e){return()=>{throw new Error(`${j} ${e}`)}}const U=[];for(let e=0;e<=23;e++)U[e]=J;U[24]=_h;U[25]=Ih;U[26]=Bh;U[27]=Ch;U[28]=J;U[29]=J;U[30]=J;U[31]=J;for(let e=32;e<=55;e++)U[e]=J;U[56]=$h;U[57]=Ph;U[58]=kh;U[59]=Uh;U[60]=J;U[61]=J;U[62]=J;U[63]=J;for(let e=64;e<=87;e++)U[e]=Nh;U[88]=Th;U[89]=Oh;U[90]=Lh;U[91]=Dh;U[92]=J;U[93]=J;U[94]=J;U[95]=Hn("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)U[e]=jh;U[120]=Fh;U[121]=zh;U[122]=Mh;U[123]=Hh;U[124]=J;U[125]=J;U[126]=J;U[127]=Hn("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)U[e]=qh;U[152]=Gh;U[153]=Kh;U[154]=Zh;U[155]=Wh;U[156]=J;U[157]=J;U[158]=J;U[159]=Jh;for(let e=160;e<=183;e++)U[e]=Yh;U[184]=Xh;U[185]=Qh;U[186]=ep;U[187]=tp;U[188]=J;U[189]=J;U[190]=J;U[191]=rp;for(let e=192;e<=215;e++)U[e]=np;U[216]=sp;U[217]=op;U[218]=ip;U[219]=ap;U[220]=J;U[221]=J;U[222]=J;U[223]=J;for(let e=224;e<=243;e++)U[e]=Hn("simple values are not supported");U[244]=J;U[245]=J;U[246]=J;U[247]=dp;U[248]=Hn("simple values are not supported");U[249]=pp;U[250]=yp;U[251]=gp;U[252]=J;U[253]=J;U[254]=J;U[255]=hp;const nt=[];for(let e=0;e<24;e++)nt[e]=new $(y.uint,e,1);for(let e=-1;e>=-24;e--)nt[31-e]=new $(y.negint,e,1);nt[64]=new $(y.bytes,new Uint8Array(0),1);nt[96]=new $(y.string,"",1);nt[128]=new $(y.array,0,1);nt[160]=new $(y.map,0,1);nt[244]=new $(y.false,!1,1);nt[245]=new $(y.true,!0,1);nt[246]=new $(y.null,null,1);function mp(e){switch(e.type){case y.false:return st([244]);case y.true:return st([245]);case y.null:return st([246]);case y.bytes:return e.value.length?void 0:st([64]);case y.string:return e.value===""?st([96]):void 0;case y.array:return e.value===0?st([128]):void 0;case y.map:return e.value===0?st([160]):void 0;case y.uint:return e.value<24?st([Number(e.value)]):void 0;case y.negint:if(e.value>=-24)return st([31-Number(e.value)])}}const bp={float64:!1,mapSorter:vp,quickEncodeToken:mp};function xp(){const e=[];return e[y.uint.major]=Vt,e[y.negint.major]=Eo,e[y.bytes.major]=Mn,e[y.string.major]=Vh,e[y.array.major]=vo,e[y.map.major]=Ao,e[y.tag.major]=So,e[y.float.major]=Io,e}const dc=xp(),hs=new ic;class En{constructor(t,r){this.obj=t,this.parent=r}includes(t){let r=this;do if(r.obj===t)return!0;while(r=r.parent);return!1}static createCheck(t,r){if(t&&t.includes(r))throw new Error(`${Lt} object contains circular references`);return new En(r,t)}}const xt={null:new $(y.null,null),undefined:new $(y.undefined,void 0),true:new $(y.true,!0),false:new $(y.false,!1),emptyArray:new $(y.array,0),emptyMap:new $(y.map,0)},Ut={number(e,t,r,n){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new $(y.float,e):e>=0?new $(y.uint,e):new $(y.negint,e)},bigint(e,t,r,n){return e>=BigInt(0)?new $(y.uint,e):new $(y.negint,e)},Uint8Array(e,t,r,n){return new $(y.bytes,e)},string(e,t,r,n){return new $(y.string,e)},boolean(e,t,r,n){return e?xt.true:xt.false},null(e,t,r,n){return xt.null},undefined(e,t,r,n){return xt.undefined},ArrayBuffer(e,t,r,n){return new $(y.bytes,new Uint8Array(e))},DataView(e,t,r,n){return new $(y.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,r,n){if(!e.length)return r.addBreakTokens===!0?[xt.emptyArray,new $(y.break)]:xt.emptyArray;n=En.createCheck(n,e);const s=[];let o=0;for(const i of e)s[o++]=un(i,r,n);return r.addBreakTokens?[new $(y.array,e.length),s,new $(y.break)]:[new $(y.array,e.length),s]},Object(e,t,r,n){const s=t!=="Object",o=s?e.keys():Object.keys(e),i=s?e.size:o.length;if(!i)return r.addBreakTokens===!0?[xt.emptyMap,new $(y.break)]:xt.emptyMap;n=En.createCheck(n,e);const a=[];let c=0;for(const f of o)a[c++]=[un(f,r,n),un(s?e.get(f):e[f],r,n)];return Ep(a,r),r.addBreakTokens?[new $(y.map,i),a,new $(y.break)]:[new $(y.map,i),a]}};Ut.Map=Ut.Object;Ut.Buffer=Ut.Uint8Array;for(const e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Ut[`${e}Array`]=Ut.DataView;function un(e,t={},r){const n=yh(e),s=t&&t.typeEncoders&&t.typeEncoders[n]||Ut[n];if(typeof s=="function"){const i=s(e,n,t,r);if(i!=null)return i}const o=Ut[n];if(!o)throw new Error(`${Lt} unsupported type: ${n}`);return o(e,n,t,r)}function Ep(e,t){t.mapSorter&&e.sort(t.mapSorter)}function vp(e,t){const r=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type)return r.type.compare(n.type);const s=r.type.major,o=dc[s].compareTokens(r,n);return o===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),o}function hc(e,t,r,n){if(Array.isArray(t))for(const s of t)hc(e,s,r,n);else r[t.type.major](e,t,n)}function pc(e,t,r){const n=un(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){const s=r.quickEncodeToken(n);if(s)return s;const o=t[n.type.major];if(o.encodedSize){const i=o.encodedSize(n,r),a=new ic(i);if(o(a,n,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return mo(a.chunks[0])}}return hs.reset(),hc(hs,n,t,r),hs.toBytes(!0)}function Ap(e,t){return t=Object.assign({},bp,t),pc(e,dc,t)}const Sp={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class _p{constructor(t,r={}){this._pos=0,this.data=t,this.options=r}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const t=this.data[this._pos];let r=nt[t];if(r===void 0){const n=U[t];if(!n)throw new Error(`${j} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);const s=t&31;r=n(this.data,this._pos,s,this.options)}return this._pos+=r.encodedLength,r}}const Lr=Symbol.for("DONE"),Vn=Symbol.for("BREAK");function Ip(e,t,r){const n=[];for(let s=0;s<e.value;s++){const o=Dr(t,r);if(o===Vn){if(e.value===1/0)break;throw new Error(`${j} got unexpected break to lengthed array`)}if(o===Lr)throw new Error(`${j} found array but not enough entries (got ${s}, expected ${e.value})`);n[s]=o}return n}function Bp(e,t,r){const n=r.useMaps===!0,s=n?void 0:{},o=n?new Map:void 0;for(let i=0;i<e.value;i++){const a=Dr(t,r);if(a===Vn){if(e.value===1/0)break;throw new Error(`${j} got unexpected break to lengthed map`)}if(a===Lr)throw new Error(`${j} found map but not enough entries (got ${i} [no key], expected ${e.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${j} non-string keys not supported (got ${typeof a})`);if(r.rejectDuplicateMapKeys===!0&&(n&&o.has(a)||!n&&a in s))throw new Error(`${j} found repeat map key "${a}"`);const c=Dr(t,r);if(c===Lr)throw new Error(`${j} found map but not enough entries (got ${i} [no value], expected ${e.value})`);n?o.set(a,c):s[a]=c}return n?o:s}function Dr(e,t){if(e.done())return Lr;const r=e.next();if(r.type===y.break)return Vn;if(r.type.terminal)return r.value;if(r.type===y.array)return Ip(r,e,t);if(r.type===y.map)return Bp(r,e,t);if(r.type===y.tag){if(t.tags&&typeof t.tags[r.value]=="function"){const n=Dr(e,t);return t.tags[r.value](n)}throw new Error(`${j} tag not supported (${r.value})`)}throw new Error("unsupported")}function Cp(e,t){if(!(e instanceof Uint8Array))throw new Error(`${j} data to decode must be a Uint8Array`);t=Object.assign({},Sp,t);const r=t.tokenizer||new _p(e,t),n=Dr(r,t);if(n===Lr)throw new Error(`${j} did not find any content to decode`);if(n===Vn)throw new Error(`${j} got unexpected break`);return[n,e.subarray(r.pos())]}function yc(e,t){const[r,n]=Cp(e,t);if(n.length>0)throw new Error(`${j} too many terminals, data makes no sense`);return r}const gc=42;function wc(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function $p(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const t=F.asCID(e);if(!t)return null;const r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new $(y.tag,gc),new $(y.bytes,r)]}function Pp(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function kp(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const zs={float64:!0,typeEncoders:{Object:$p,undefined:Pp,number:kp}},Up={...zs,typeEncoders:{...zs.typeEncoders}};function Np(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return F.decode(e.subarray(1))}const vn={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};vn.tags[gc]=Np;const Tp={...vn,tags:vn.tags.slice()},Op="dag-cbor",Lp=113,mc=e=>Ap(e,zs),bc=e=>yc(wc(e),vn),Dp=Object.freeze(Object.defineProperty({__proto__:null,code:Lp,decode:bc,decodeOptions:Tp,encode:mc,encodeOptions:Up,name:Op,toByteView:wc},Symbol.toStringTag,{value:"Module"}));class Rp extends Array{constructor(){super(),this.inRecursive=[]}prefix(t){const r=this.inRecursive[this.inRecursive.length-1];r&&(r.type===y.array&&(r.elements++,r.elements!==1&&t.push([44])),r.type===y.map&&(r.elements++,r.elements!==1&&(r.elements%2===1?t.push([44]):t.push([58]))))}[y.uint.major](t,r){this.prefix(t);const n=String(r.value),s=[];for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);t.push(s)}[y.negint.major](t,r){this[y.uint.major](t,r)}[y.bytes.major](t,r){throw new Error(`${Lt} unsupported type: Uint8Array`)}[y.string.major](t,r){this.prefix(t);const n=sc(JSON.stringify(r.value));t.push(n.length>32?mo(n):n)}[y.array.major](t,r){this.prefix(t),this.inRecursive.push({type:y.array,elements:0}),t.push([91])}[y.map.major](t,r){this.prefix(t),this.inRecursive.push({type:y.map,elements:0}),t.push([123])}[y.tag.major](t,r){}[y.float.major](t,r){if(r.type.name==="break"){const i=this.inRecursive.pop();if(i){if(i.type===y.array)t.push([93]);else if(i.type===y.map)t.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(r.value===void 0)throw new Error(`${Lt} unsupported type: undefined`);if(this.prefix(t),r.type.name==="true"){t.push([116,114,117,101]);return}else if(r.type.name==="false"){t.push([102,97,108,115,101]);return}else if(r.type.name==="null"){t.push([110,117,108,108]);return}const n=String(r.value),s=[];let o=!1;for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i),!o&&(s[i]===46||s[i]===101||s[i]===69)&&(o=!0);o||(s.push(46),s.push(48)),t.push(s)}}function jp(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw new Error(`${Lt} complex map keys are not supported`);const r=e[0],n=t[0];if(r.type!==y.string||n.type!==y.string)throw new Error(`${Lt} non-string map keys are not supported`);if(r<n)return-1;if(r>n)return 1;throw new Error(`${Lt} unexpected duplicate map keys, this is not supported`)}const Fp={addBreakTokens:!0,mapSorter:jp};function zp(e,t){return t=Object.assign({},Fp,t),pc(e,new Rp,t)}class xc{constructor(t,r={}){this._pos=0,this.data=t,this.options=r,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let t=this.ch();for(;t===32||t===9||t===13||t===10;)t=this.data[++this._pos]}expect(t){if(this.data.length-this._pos<t.length)throw new Error(`${j} unexpected end of input at position ${this._pos}`);for(let r=0;r<t.length;r++)if(this.data[this._pos++]!==t[r])throw new Error(`${j} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...t)}'`)}parseNumber(){const t=this._pos;let r=!1,n=!1;const s=a=>{for(;!this.done();){const c=this.ch();if(a.includes(c))this._pos++;else break}};if(this.ch()===45&&(r=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,n=!0;else return new $(y.uint,0,this._pos-t);if(s([48,49,50,51,52,53,54,55,56,57]),r&&this._pos===t+1)throw new Error(`${j} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${j} unexpected token at position ${this._pos}`);n=!0,this._pos++,s([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,s([48,49,50,51,52,53,54,55,56,57]));const o=String.fromCharCode.apply(null,this.data.subarray(t,this._pos)),i=parseFloat(o);return n?new $(y.float,i,this._pos-t):this.options.allowBigInt!==!0||Number.isSafeInteger(i)?new $(i>=0?y.uint:y.negint,i,this._pos-t):new $(i>=0?y.uint:y.negint,BigInt(o),this._pos-t)}parseString(){if(this.ch()!==34)throw new Error(`${j} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let o=this._pos,i=0;o<this.data.length&&i<65536;o++,i++){const a=this.data[o];if(a===92||a<32||a>=128)break;if(a===34){const c=String.fromCharCode.apply(null,this.data.subarray(this._pos,o));return this._pos=o+1,new $(y.string,c,i)}}const t=this._pos,r=[],n=()=>{if(this._pos+4>=this.data.length)throw new Error(`${j} unexpected end of unicode escape sequence at position ${this._pos}`);let o=0;for(let i=0;i<4;i++){let a=this.ch();if(a>=48&&a<=57)a-=48;else if(a>=97&&a<=102)a=a-97+10;else if(a>=65&&a<=70)a=a-65+10;else throw new Error(`${j} unexpected unicode escape character at position ${this._pos}`);o=o*16+a,this._pos++}return o},s=()=>{const o=this.ch();let i=null,a=o>239?4:o>223?3:o>191?2:1;if(this._pos+a>this.data.length)throw new Error(`${j} unexpected unicode sequence at position ${this._pos}`);let c,f,u,l;switch(a){case 1:o<128&&(i=o);break;case 2:c=this.data[this._pos+1],(c&192)===128&&(l=(o&31)<<6|c&63,l>127&&(i=l));break;case 3:c=this.data[this._pos+1],f=this.data[this._pos+2],(c&192)===128&&(f&192)===128&&(l=(o&15)<<12|(c&63)<<6|f&63,l>2047&&(l<55296||l>57343)&&(i=l));break;case 4:c=this.data[this._pos+1],f=this.data[this._pos+2],u=this.data[this._pos+3],(c&192)===128&&(f&192)===128&&(u&192)===128&&(l=(o&15)<<18|(c&63)<<12|(f&63)<<6|u&63,l>65535&&l<1114112&&(i=l))}i===null?(i=65533,a=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|i&1023),r.push(i),this._pos+=a};for(;!this.done();){const o=this.ch();let i;switch(o){case 92:if(this._pos++,this.done())throw new Error(`${j} unexpected string termination at position ${this._pos}`);switch(i=this.ch(),this._pos++,i){case 34:case 39:case 92:case 47:r.push(i);break;case 98:r.push(8);break;case 116:r.push(9);break;case 110:r.push(10);break;case 102:r.push(12);break;case 114:r.push(13);break;case 117:r.push(n());break;default:throw new Error(`${j} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new $(y.string,oc(r),this._pos-t);default:if(o<32)throw new Error(`${j} invalid control character at position ${this._pos}`);o<128?(r.push(o),this._pos++):s()}}throw new Error(`${j} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new $(y.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new $(y.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new $(y.null,null,4);case 102:return this.expect([102,97,108,115,101]),new $(y.false,!1,5);case 116:return this.expect([116,114,117,101]),new $(y.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${j} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new $(y.break,void 0,1);if(this.ch()!==44)throw new Error(`${j} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new $(y.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new $(y.break,void 0,1);if(this.ch()!==44)throw new Error(`${j} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new $(y.break,void 0,1);const t=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${j} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),t}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${j} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}}function Mp(e,t){return t=Object.assign({tokenizer:new xc(e,t)},t),yc(e,t)}function Hp(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function Vp(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const t=F.asCID(e);if(!t)return null;const r=t.toString();return[new $(y.map,1/0,1),new $(y.string,"/",1),new $(y.string,r,r.length),new $(y.break,void 0,1)]}function An(e){const t=Fn.encode(e).slice(1);return[new $(y.map,1/0,1),new $(y.string,"/",1),new $(y.map,1/0,1),new $(y.string,"bytes",5),new $(y.string,t,t.length),new $(y.break,void 0,1),new $(y.break,void 0,1)]}function Me(e){return An(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function qp(e){return An(new Uint8Array(e))}function Gp(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Kp(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const Zp={typeEncoders:{Object:Vp,Buffer:An,Uint8Array:An,Int8Array:Me,Uint16Array:Me,Int16Array:Me,Uint32Array:Me,Int32Array:Me,Float32Array:Me,Float64Array:Me,Uint8ClampedArray:Me,BigInt64Array:Me,BigUint64Array:Me,DataView:Me,ArrayBuffer:qp,undefined:Gp,number:Kp}};class Wp extends xc{constructor(t,r){super(t,r),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const t=this._next();if(t.type===y.map){const r=this._next();if(r.type===y.string&&r.value==="/"){const n=this._next();if(n.type===y.string){if(this._next().type!==y.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new $(y.tag,42,0)}if(n.type===y.map){const s=this._next();if(s.type===y.string&&s.value==="bytes"){const o=this._next();if(o.type===y.string){for(let a=0;a<2;a++)if(this._next().type!==y.break)throw new Error("Invalid encoded Bytes form");const i=Fn.decode(`m${o.value}`);return new $(y.bytes,i,o.value.length)}this.tokenBuffer.push(o)}this.tokenBuffer.push(s)}this.tokenBuffer.push(n)}this.tokenBuffer.push(r)}return t}}const Ms={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Ms.tags[42]=F.parse;const Jp="dag-json",Yp=297,Ec=e=>zp(e,Zp),vc=e=>{const t=Hp(e),r=Object.assign(Ms,{tokenizer:new Wp(t,Ms)});return Mp(t,r)},Ai=e=>Xp.decode(Ec(e)),Xp=new TextDecoder,Qp=e=>vc(e0.encode(e)),e0=new TextEncoder,t0=Object.freeze(Object.defineProperty({__proto__:null,code:Yp,decode:vc,encode:Ec,format:Ai,name:Jp,parse:Qp,stringify:Ai},Symbol.toStringTag,{value:"Module"})),r0=new TextDecoder;function $o(e,t){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");const s=e[t++];if(r+=n<28?(s&127)<<n:(s&127)*2**n,s<128)break}return[r,t]}function Sn(e,t){let r;[r,t]=$o(e,t);const n=t+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,n),n]}function Ac(e,t){let r;return[r,t]=$o(e,t),[r&7,r>>3,t]}function n0(e){const t={},r=e.length;let n=0;for(;n<r;){let s,o;if([s,o,n]=Ac(e,n),o===1){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(s!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${s}) for Hash`);if(t.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,n]=Sn(e,n)}else if(o===2){if(t.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(s!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${s}) for Name`);if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let i;[i,n]=Sn(e,n),t.Name=r0.decode(i)}else if(o===3){if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(s!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${s}) for Tsize`);[t.Tsize,n]=$o(e,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return t}function s0(e){const t=e.length;let r=0,n,s=!1,o;for(;r<t;){let a,c;if([a,c,r]=Ac(e,r),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(c===1){if(o)throw new Error("protobuf: (PBNode) duplicate Data section");[o,r]=Sn(e,r),n&&(s=!0)}else if(c===2){if(s)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let f;[f,r]=Sn(e,r),n.push(n0(f))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(r>t)throw new Error("protobuf: (PBNode) unexpected end of data");const i={};return o&&(i.Data=o),i.Links=n||[],i}const Sc=new TextEncoder,Si=2**32,o0=2**31;function i0(e,t){let r=t.length;if(typeof e.Tsize=="number"){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");r=Br(t,r,e.Tsize)-1,t[r]=24}if(typeof e.Name=="string"){const n=Sc.encode(e.Name);r-=n.length,t.set(n,r),r=Br(t,r,n.length)-1,t[r]=18}return e.Hash&&(r-=e.Hash.length,t.set(e.Hash,r),r=Br(t,r,e.Hash.length)-1,t[r]=10),t.length-r}function a0(e){const t=u0(e),r=new Uint8Array(t);let n=t;if(e.Data&&(n-=e.Data.length,r.set(e.Data,n),n=Br(r,n,e.Data.length)-1,r[n]=10),e.Links)for(let s=e.Links.length-1;s>=0;s--){const o=i0(e.Links[s],r.subarray(0,n));n-=o,n=Br(r,n,o)-1,r[n]=18}return r}function c0(e){let t=0;if(e.Hash){const r=e.Hash.length;t+=1+r+er(r)}if(typeof e.Name=="string"){const r=Sc.encode(e.Name).length;t+=1+r+er(r)}return typeof e.Tsize=="number"&&(t+=1+er(e.Tsize)),t}function u0(e){let t=0;if(e.Data){const r=e.Data.length;t+=1+r+er(r)}if(e.Links)for(const r of e.Links){const n=c0(r);t+=1+n+er(n)}return t}function Br(e,t,r){t-=er(r);const n=t;for(;r>=o0;)e[t++]=r&127|128,r/=128;for(;r>=128;)e[t++]=r&127|128,r>>>=7;return e[t]=r,n}function er(e){return e%2===0&&e++,Math.floor((l0(e)+6)/7)}function l0(e){let t=0;return e>=Si&&(e=Math.floor(e/Si),t=32),e>=65536&&(e>>>=16,t+=16),e>=256&&(e>>>=8,t+=8),t+f0[e]}const f0=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],d0=["Data","Links"],h0=["Hash","Name","Tsize"],Hs=new TextEncoder;function _c(e,t){if(e===t)return 0;const r=e.Name?Hs.encode(e.Name):[],n=t.Name?Hs.encode(t.Name):[];let s=r.length,o=n.length;for(let i=0,a=Math.min(s,o);i<a;++i)if(r[i]!==n[i]){s=r[i],o=n[i];break}return s<o?-1:o<s?1:0}function _i(e,t){return!Object.keys(e).some(r=>!t.includes(r))}function Ic(e){if(typeof e.asCID=="object"){const r=F.asCID(e);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(e.Hash){let r=F.asCID(e.Hash);try{r||(typeof e.Hash=="string"?r=F.parse(e.Hash):e.Hash instanceof Uint8Array&&(r=F.decode(e.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(t.Hash=r)}if(!t.Hash)throw new TypeError("Invalid DAG-PB form");return typeof e.Name=="string"&&(t.Name=e.Name),typeof e.Tsize=="number"&&(t.Tsize=e.Tsize),t}function Bc(e){if((e instanceof Uint8Array||typeof e=="string")&&(e={Data:e}),typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(e.Data!==void 0)if(typeof e.Data=="string")t.Data=Hs.encode(e.Data);else if(e.Data instanceof Uint8Array)t.Data=e.Data;else throw new TypeError("Invalid DAG-PB form");if(e.Links!==void 0)if(Array.isArray(e.Links))t.Links=e.Links.map(Ic),t.Links.sort(_c);else throw new TypeError("Invalid DAG-PB form");else t.Links=[];return t}function Cc(e){if(!e||typeof e!="object"||Array.isArray(e)||e instanceof Uint8Array||e["/"]&&e["/"]===e.bytes)throw new TypeError("Invalid DAG-PB form");if(!_i(e,d0))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(e.Data!==void 0&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let t=0;t<e.Links.length;t++){const r=e.Links[t];if(!r||typeof r!="object"||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!_i(r,h0))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(r.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash==null||!r.Hash["/"]||r.Hash["/"]!==r.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0){if(typeof r.Tsize!="number"||r.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(t>0&&_c(r,e.Links[t-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function p0(e,t=[]){return Bc({Data:e,Links:t})}function y0(e,t,r){return Ic({Hash:r,Name:e,Tsize:t})}function g0(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}const w0="dag-pb",m0=112;function b0(e){Cc(e);const t={};return e.Links&&(t.Links=e.Links.map(r=>{const n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),e.Data&&(t.Data=e.Data),a0(t)}function x0(e){const t=g0(e),r=s0(t),n={};return r.Data&&(n.Data=r.Data),r.Links&&(n.Links=r.Links.map(s=>{const o={};try{o.Hash=F.decode(s.Hash)}catch{}if(!o.Hash)throw new Error("Invalid Hash field found in link, expected CID");return s.Name!==void 0&&(o.Name=s.Name),s.Tsize!==void 0&&(o.Tsize=s.Tsize),o})),n}const E0=Object.freeze(Object.defineProperty({__proto__:null,code:m0,createLink:y0,createNode:p0,decode:x0,encode:b0,name:w0,prepare:Bc,validate:Cc},Symbol.toStringTag,{value:"Module"}));function v0(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function Po(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function A0(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<e.length;s++){var o=e.charAt(s),i=o.charCodeAt(0);if(r[i]!==255)throw new TypeError(o+" is ambiguous");r[i]=s}var a=e.length,c=e.charAt(0),f=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function l(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,h=0,b=0,S=p.length;b!==S&&p[b]===0;)b++,g++;for(var _=(S-b)*u+1>>>0,P=new Uint8Array(_);b!==S;){for(var x=p[b],N=0,k=_-1;(x!==0||N<h)&&k!==-1;k--,N++)x+=256*P[k]>>>0,P[k]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");h=N,b++}for(var I=_-h;I!==_&&P[I]===0;)I++;for(var m=c.repeat(g);I<_;++I)m+=e.charAt(P[I]);return m}function w(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var h=0,b=0;p[g]===c;)h++,g++;for(var S=(p.length-g)*f+1>>>0,_=new Uint8Array(S);p[g];){var P=r[p.charCodeAt(g)];if(P===255)return;for(var x=0,N=S-1;(P!==0||x<b)&&N!==-1;N--,x++)P+=a*_[N]>>>0,_[N]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");b=x,g++}if(p[g]!==" "){for(var k=S-b;k!==S&&_[k]===0;)k++;for(var I=new Uint8Array(h+(S-k)),m=h;k!==S;)I[m++]=_[k++];return I}}}function d(p){var g=w(p);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:w,decode:d}}var S0=A0,_0=S0;class I0{name;prefix;baseEncode;constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class B0{name;prefix;baseDecode;prefixCodePoint;constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return $c(this,t)}}class C0{decoders;constructor(t){this.decoders=t}or(t){return $c(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n!=null)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function $c(e,t){return new C0({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}class $0{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(t,r,n,s){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new I0(t,r,n),this.decoder=new B0(t,r,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}function Pc({name:e,prefix:t,encode:r,decode:n}){return new $0(e,t,r,n)}function kc({name:e,prefix:t,alphabet:r}){const{encode:n,decode:s}=_0(r,e);return Pc({prefix:t,name:e,encode:n,decode:o=>Po(s(o))})}function P0(e,t,r,n){const s={};for(let u=0;u<t.length;++u)s[t[u]]=u;let o=e.length;for(;e[o-1]==="=";)--o;const i=new Uint8Array(o*r/8|0);let a=0,c=0,f=0;for(let u=0;u<o;++u){const l=s[e[u]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|l,a+=r,a>=8&&(a-=8,i[f++]=255&c>>a)}if(a>=r||(255&c<<8-a)!==0)throw new SyntaxError("Unexpected end of data");return i}function k0(e,t,r){const n=t[t.length-1]==="=",s=(1<<r)-1;let o="",i=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],i+=8;i>r;)i-=r,o+=t[s&a>>i];if(i!==0&&(o+=t[s&a<<r-i]),n)for(;(o.length*r&7)!==0;)o+="=";return o}function Te({name:e,prefix:t,bitsPerChar:r,alphabet:n}){return Pc({prefix:t,name:e,encode(s){return k0(s,n,r)},decode(s){return P0(s,n,r,e)}})}Te({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});Te({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const Uc=Te({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});Te({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function ft(e){return Uc.encode(e).slice(1)}function Qe(e){return Uc.decode(`u${e}`)}const ln=Te({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});Te({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});Te({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});Te({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});Te({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});Te({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});Te({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});Te({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});Te({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const It=kc({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});kc({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var U0=Nc,Ii=128,N0=-128,T0=Math.pow(2,31);function Nc(e,t,r){t=t||[],r=r||0;for(var n=r;e>=T0;)t[r++]=e&255|Ii,e/=128;for(;e&N0;)t[r++]=e&255|Ii,e>>>=7;return t[r]=e|0,Nc.bytes=r-n+1,t}var O0=Vs,L0=128,Bi=127;function Vs(e,n){var r=0,n=n||0,s=0,o=n,i,a=e.length;do{if(o>=a)throw Vs.bytes=0,new RangeError("Could not decode varint");i=e[o++],r+=s<28?(i&Bi)<<s:(i&Bi)*Math.pow(2,s),s+=7}while(i>=L0);return Vs.bytes=o-n,r}var D0=Math.pow(2,7),R0=Math.pow(2,14),j0=Math.pow(2,21),F0=Math.pow(2,28),z0=Math.pow(2,35),M0=Math.pow(2,42),H0=Math.pow(2,49),V0=Math.pow(2,56),q0=Math.pow(2,63),G0=function(e){return e<D0?1:e<R0?2:e<j0?3:e<F0?4:e<z0?5:e<M0?6:e<H0?7:e<V0?8:e<q0?9:10},K0={encode:U0,decode:O0,encodingLength:G0},_n=K0;function qs(e,t=0){return[_n.decode(e,t),_n.decode.bytes]}function In(e,t,r=0){return _n.encode(e,t,r),t}function Bn(e){return _n.encodingLength(e)}function Z0(e,t){const r=t.byteLength,n=Bn(e),s=n+Bn(r),o=new Uint8Array(s+r);return In(e,o,0),In(r,o,n),o.set(t,s),new ko(e,r,t,o)}function W0(e){const t=Po(e),[r,n]=qs(t),[s,o]=qs(t.subarray(n)),i=t.subarray(n+o);if(i.byteLength!==s)throw new Error("Incorrect length");return new ko(r,s,i,t)}function J0(e,t){if(e===t)return!0;{const r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&v0(e.bytes,r.bytes)}}class ko{code;size;digest;bytes;constructor(t,r,n,s){this.code=t,this.size=r,this.digest=n,this.bytes=s}}function Ci(e,t){const{bytes:r,version:n}=e;switch(n){case 0:return X0(r,Gs(e),t??It.encoder);default:return Q0(r,Gs(e),t??ln.encoder)}}const $i=new WeakMap;function Gs(e){const t=$i.get(e);if(t==null){const r=new Map;return $i.set(e,r),r}return t}class le{code;version;multihash;bytes;"/";constructor(t,r,n,s){this.code=r,this.version=t,this.multihash=n,this.bytes=s,this["/"]=s}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:t,multihash:r}=this;if(t!==br)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==ey)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return le.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:t,digest:r}=this.multihash,n=Z0(t,r);return le.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return le.equals(this,t)}static equals(t,r){const n=r;return n!=null&&t.code===n.code&&t.version===n.version&&J0(t.multihash,n.multihash)}toString(t){return Ci(this,t)}toJSON(){return{"/":Ci(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;const r=t;if(r instanceof le)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:s,multihash:o,bytes:i}=r;return new le(n,s,o,i??Pi(n,s,o.bytes))}else if(r[ty]===!0){const{version:n,multihash:s,code:o}=r,i=W0(s);return le.create(n,o,i)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(r!==br)throw new Error(`Version 0 CID must use dag-pb (code: ${br}) block encoding`);return new le(t,r,n,n.bytes)}case 1:{const s=Pi(t,r,n.bytes);return new le(t,r,n,s)}default:throw new Error("Invalid version")}}static createV0(t){return le.create(0,br,t)}static createV1(t,r){return le.create(1,t,r)}static decode(t){const[r,n]=le.decodeFirst(t);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(t){const r=le.inspectBytes(t),n=r.size-r.multihashSize,s=Po(t.subarray(n,n+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");const o=s.subarray(r.multihashSize-r.digestSize),i=new ko(r.multihashCode,r.digestSize,o,s);return[r.version===0?le.createV0(i):le.createV1(r.codec,i),t.subarray(r.size)]}static inspectBytes(t){let r=0;const n=()=>{const[l,w]=qs(t.subarray(r));return r+=w,l};let s=n(),o=br;if(s===18?(s=0,r=0):o=n(),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);const i=r,a=n(),c=n(),f=r+c,u=f-i;return{version:s,codec:o,multihashCode:a,digestSize:c,multihashSize:u,size:f}}static parse(t,r){const[n,s]=Y0(t,r),o=le.decode(s);if(o.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Gs(o).set(n,t),o}}function Y0(e,t){switch(e[0]){case"Q":{const r=t??It;return[It.prefix,r.decode(`${It.prefix}${e}`)]}case It.prefix:{const r=t??It;return[It.prefix,r.decode(e)]}case ln.prefix:{const r=t??ln;return[ln.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}}function X0(e,t,r){const{prefix:n}=r;if(n!==It.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const s=t.get(n);if(s==null){const o=r.encode(e).slice(1);return t.set(n,o),o}else return s}function Q0(e,t,r){const{prefix:n}=r,s=t.get(n);if(s==null){const o=r.encode(e);return t.set(n,o),o}else return s}const br=112,ey=18;function Pi(e,t,r){const n=Bn(e),s=n+Bn(t),o=new Uint8Array(s+r.byteLength);return In(e,o,0),In(t,o,n),o.set(r,s),o}const ty=Symbol.for("@ipld/js-cid/CID");function ry(e){const[t,r,n]=e;return{payload:r,signatures:[{protected:t,signature:n}],link:le.decode(Qe(r))}}function ny(e){const t={signature:Qe(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=Qe(e.protected)),t}function sy(e){return{payload:Qe(e.payload),signatures:e.signatures.map(ny)}}function oy(e){const t={signature:ft(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=ft(e.protected)),t}function iy(e){const t={payload:ft(e.payload),signatures:e.signatures.map(oy)};try{return t.pld=Ks(cy(e.payload)),t}catch{try{return t.link=le.decode(new Uint8Array(e.payload)),t}catch{throw new Error("Invalid payload, must be either JSON or CID")}}}function Ks(e){if(typeof e=="string"){if(e.startsWith("ipfs://"))return le.parse(e.slice(7))}else{if(Array.isArray(e))return e.map(Ks);if(ay(e)){const t={};for(const r in e)t[r]=Ks(e[r]);return t}}return e}function ay(e){return typeof e=="object"&&e!==null}function cy(e){return JSON.parse(new TextDecoder().decode(e))}function uy(e){const[t,r,n,s,o]=e,i={ciphertext:s,iv:n,protected:t,tag:o};return r&&(i.recipients=[{encrypted_key:r}]),i}function ly(e){const t={};return e.encrypted_key&&(t.encrypted_key=Qe(e.encrypted_key)),e.header&&(t.header=e.header),t}function fy(e){const t={ciphertext:Qe(e.ciphertext),protected:Qe(e.protected),iv:Qe(e.iv),tag:Qe(e.tag)};return e.aad&&(t.aad=Qe(e.aad)),e.recipients&&(t.recipients=e.recipients.map(ly)),e.unprotected&&(t.unprotected=e.unprotected),t}function dy(e){const t={};return e.encrypted_key&&(t.encrypted_key=ft(e.encrypted_key)),e.header&&(t.header=e.header),t}function hy(e){const t={ciphertext:ft(e.ciphertext),protected:ft(e.protected),iv:ft(e.iv),tag:ft(e.tag)};return e.aad&&(t.aad=ft(e.aad)),e.recipients&&(t.recipients=e.recipients.map(dy)),e.unprotected&&(t.unprotected=e.unprotected),t}const py="dag-jose",yy=133;function Tc(e){return"payload"in e&&typeof e.payload=="string"&&"signatures"in e&&Array.isArray(e.signatures)}function gy(e){return"payload"in e&&e.payload instanceof Uint8Array&&"signatures"in e&&Array.isArray(e.signatures)}function wy(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}function Oc(e){return"ciphertext"in e&&typeof e.ciphertext=="string"&&"iv"in e&&typeof e.iv=="string"&&"protected"in e&&typeof e.protected=="string"&&"tag"in e&&typeof e.tag=="string"}function Lc(e){if(typeof e=="string"){const t=e.split(".");if(t.length===3)return ry(t);if(t.length===5)return uy(t);throw new Error("Not a valid JOSE string")}if(Tc(e)||Oc(e))return e;throw new Error("Not a valid unencoded JOSE object")}function my(e){typeof e=="string"&&(e=Lc(e));let t;if(Tc(e))t=sy(e);else if(Oc(e))t=fy(e);else throw new Error("Not a valid JOSE object");return new Uint8Array(mc(t))}function by(e){let t;try{t=bc(e)}catch{throw new Error("Not a valid DAG-JOSE object")}if(gy(t))return iy(t);if(wy(t))return hy(t);throw new Error("Not a valid DAG-JOSE object")}const xy=Object.freeze(Object.defineProperty({__proto__:null,code:yy,decode:by,encode:my,name:py,toGeneral:Lc},Symbol.toStringTag,{value:"Module"}));function yt(e){const t=new globalThis.AbortController;function r(){t.abort();for(const o of e)o?.removeEventListener!=null&&o.removeEventListener("abort",r)}for(const o of e){if(o?.aborted===!0){r();break}o?.addEventListener!=null&&o.addEventListener("abort",r)}function n(){for(const o of e)o?.removeEventListener!=null&&o.removeEventListener("abort",r)}const s=t.signal;return s.clear=n,s}const Ey="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let vy=(e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=Ey[r[e]&63];return t};function Uo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ps,ki;function Ay(){if(ki)return ps;ki=1;function e(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}return ps=e,ps}var Sy=Ay();const _y=Uo(Sy),Dc=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,No=_y(),qn=Dc&&!No,Iy=No&&Dc,By=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!No,Gn=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;async function*Kn(e,t={}){const r=e.getReader();try{for(;;){const n=await r.read();if(n.done)return;yield n.value}}finally{t.preventCancel!==!0&&await r.cancel(),r.releaseLock()}}var ys,Ui;function Cy(){if(Ui)return ys;Ui=1;function e(r,n){for(const s in n)Object.defineProperty(r,s,{value:n[s],enumerable:!0,configurable:!0});return r}function t(r,n,s){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");s||(s={}),typeof n=="object"&&(s=n,n=""),n&&(s.code=n);try{return e(r,s)}catch{s.message=r.message,s.stack=r.stack;const i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(r)),e(new i,s)}}return ys=t,ys}var $y=Cy();const et=Uo($y);function Zn(e){const[t,r]=e[Symbol.asyncIterator]!=null?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>t.next(),push:s=>{n.push(s)},next:()=>n.length>0?{done:!1,value:n.shift()}:t.next(),[r](){return this}}}function Py(e){return e[Symbol.asyncIterator]!=null}function Ni(e,t){let r=0;if(Py(e))return(async function*(){for await(const c of e)yield t(c,r++)})();const n=Zn(e),{value:s,done:o}=n.next();if(o===!0)return(function*(){})();const i=t(s,r++);if(typeof i.then=="function")return(async function*(){yield await i;for await(const c of n)yield t(c,r++)})();const a=t;return(function*(){yield i;for(const c of n)yield a(c,r++)})()}let ky=class extends Error{response;constructor(t){super(t.statusText),this.name="HTTPError",this.response=t}};class Uy extends Error{constructor(t="Invalid mtime"){super(t),this.name="InvalidMtimeError"}}function rr(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function Cn(e){return e.constructor!=null&&(e.constructor.name==="Blob"||e.constructor.name==="File")&&typeof e.stream=="function"}function Zs(e){return typeof e=="object"&&(e.path!=null||e.content!=null)}function $n(e){return typeof e?.getReader=="function"}function Rc(e){if(e!=null)return typeof e=="string"&&(e=parseInt(e,8)),e&4095}function Ny(e){return Object.prototype.hasOwnProperty.call(e,"secs")}function Ty(e){return Object.prototype.hasOwnProperty.call(e,"Seconds")}function Oy(e){return Array.isArray(e)}function Wn(e){if(e!=null){if(Ny(e)&&(e={secs:e.secs,nsecs:e.nsecs}),Ty(e)&&(e={secs:BigInt(e.Seconds),nsecs:e.FractionalNanoseconds}),Oy(e)&&(e={secs:BigInt(e[0]),nsecs:e[1]}),e instanceof Date){const t=e.getTime(),r=Math.floor(t/1e3);e={secs:BigInt(r),nsecs:(t-r*1e3)*1e3}}if(typeof e=="bigint"){const t=e/BigInt(1e9),r=e-t*BigInt(1e9);e={secs:t,nsecs:Number(r)}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw new Uy("mtime-nsecs must be within the range [0,999999999]");return e}}}async function*Ly(e,t){if(typeof e=="string"||e instanceof String||rr(e)||Cn(e)||e._readableState!=null)throw et(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if($n(e)&&(e=Kn(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const r=Zn(e),{value:n,done:s}=await r.peek();if(s===!0){yield*[];return}if(r.push(n),Number.isInteger(n))throw et(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState!=null){yield*Ni(r,async o=>gs({content:o},t));return}if(rr(n)){yield gs({content:r},t);return}if(Zs(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||$n(n)||Cn(n)){yield*Ni(r,async o=>gs(o,t));return}}throw Zs(e)?et(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):et(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}async function gs(e,t){const{path:r,mode:n,mtime:s,content:o}=e,i={path:r??"",mode:Rc(n),mtime:Wn(s)};return o!=null?i.content=await t(o):r==null&&(i.content=await t(e)),i}const jc=Symbol.for("@libp2p/peer-id");class Ke extends Error{static name="InvalidParametersError";constructor(t="Invalid parameters"){super(t),this.name="InvalidParametersError"}}class Fc extends Error{static name="InvalidPublicKeyError";constructor(t="Invalid public key"){super(t),this.name="InvalidPublicKeyError"}}class Dy extends Error{static name="InvalidCIDError";constructor(t="Invalid CID"){super(t),this.name="InvalidCIDError"}}class Ry extends Error{static name="InvalidMultihashError";constructor(t="Invalid Multihash"){super(t),this.name="InvalidMultihashError"}}class zc extends Error{static name="UnsupportedKeyTypeError";constructor(t="Unsupported key type"){super(t),this.name="UnsupportedKeyTypeError"}}function jy(e){return e[Symbol.asyncIterator]!=null}function Mc(e){if(jy(e))return(async()=>{const r=[];for await(const n of e)r.push(n);return r})();const t=[];for(const r of e)t.push(r);return t}async function Hc(e){if(rr(e))return new Blob([e]);if(typeof e=="string"||e instanceof String)return new Blob([e.toString()]);if(Cn(e))return e;if($n(e)&&(e=Kn(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=Zn(e),{value:r,done:n}=await t.peek();if(n===!0)return Ti(t);if(t.push(r),Number.isInteger(r))return new Blob([Uint8Array.from(await Mc(t))]);if(rr(r)||typeof r=="string"||r instanceof String)return Ti(t)}throw new Ke(`Unexpected input: ${e}`)}async function Ti(e){const t=[];for await(const r of e)t.push(r);return new Blob(t)}function Fy(e){return Ly(e,Hc)}function To(e){if(e!=null)return typeof e=="string"?e:e.toString(8).padStart(4,"0")}async function Oi(e,t,r={},n){const s=[],o=new FormData;let i=0,a=0;for await(const{content:c,path:f,mode:u,mtime:l}of Fy(e)){let w="";const d=c!=null?"file":"dir";i>0&&(w=`-${i}`);let p=d+w;const g=[];if(u!=null&&g.push(`mode=${To(u)}`),l!=null){const{secs:h,nsecs:b}=l;g.push(`mtime=${h}`),b!=null&&g.push(`mtime-nsecs=${b}`)}if(g.length>0&&(p=`${p}?${g.join("&")}`),c!=null){o.set(p,c,f!=null?encodeURIComponent(f):void 0);const h=a+c.size;s.push({name:f,start:a,end:h}),a=h}else if(f!=null)o.set(p,new File([""],encodeURIComponent(f),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");i++}return{total:a,parts:s,headers:r,body:o}}async function Nt(e,t,r={},n=`-----------------------------${vy()}`){let s=Oi;return Iy&&(s=Oi),s(e,t,r,n)}function we(e){if(e==null)return e;const t=/^[A-Z]+$/,r={};return Object.keys(e).reduce((n,s)=>(t.test(s)?n[s.toLowerCase()]=e[s]:t.test(s[0])?n[s[0].toLowerCase()+s.slice(1)]=e[s]:n[s]=e[s],n),r)}function C({arg:e,searchParams:t,hashAlg:r,mtime:n,mode:s,...o}={}){t!=null&&(o={...o,...t}),r!=null&&(o.hash=r),n!=null&&(n=Wn(n),o.mtime=n.secs,o.mtimeNsecs=n.nsecs),s!=null&&(o.mode=To(s)),isNaN(o.timeout)||(o.timeout=`${o.timeout}ms`),e==null?e=[]:Array.isArray(e)||(e=[e]);const i=new URLSearchParams(o);return e.forEach(a=>{i.append("arg",a)}),i}function Vc(e){return async function*(r,n={}){const s=new AbortController,o=yt([s.signal,n.signal]);try{const{headers:i,body:a,total:c,parts:f}=await Nt(r,s,n.headers),[u,l]=typeof n.progress=="function"?zy(c,n.progress,f):[void 0,void 0],w=await e.post("add",{searchParams:C({"stream-channels":!0,...n,progress:!!u}),onUploadProgress:l,signal:o,headers:i,body:a});for await(let d of w.ndjson())d=we(d),d.hash!==void 0?yield Hy(d):u?.(d.bytes??0,d.name)}finally{o.clear()}}}const zy=(e,t,r)=>r!=null?[void 0,My(e,r,t)]:[t,void 0],My=(e,t,r)=>{let n=0;const s=t.length;return({loaded:o,total:i})=>{const a=Math.floor(o/i*e);for(;n<s;){const{start:c,end:f,name:u}=t[n];if(a<f){r(a-c,u);break}else r(f-c,u),n+=1}}};function Hy({name:e,hash:t,size:r,mode:n,mtime:s,mtimeNsecs:o}){const i={path:e,cid:F.parse(t),size:parseInt(r)};return n!=null&&(i.mode=parseInt(n,8)),s!=null&&(i.mtime={secs:s,nsecs:o??0}),i}function Vy(e){return e[Symbol.asyncIterator]!=null}function Jn(e){if(Vy(e))return(async()=>{let r;for await(const n of e)r=n;return r})();let t;for(const r of e)t=r;return t}async function*qy(e,t){if(e==null)throw et(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if(typeof e=="string"||e instanceof String){yield Kr(e.toString(),t);return}if(rr(e)||Cn(e)){yield Kr(e,t);return}if($n(e)&&(e=Kn(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const r=Zn(e),{value:n,done:s}=await r.peek();if(s===!0){yield{content:[]};return}if(r.push(n),Number.isInteger(n)||rr(n)||typeof n=="string"||n instanceof String){yield Kr(r,t);return}throw et(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(Zs(e)){yield Kr(e,t);return}throw et(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function Kr(e,t){const{path:r,mode:n,mtime:s,content:o}=e,i={path:r??"",mode:Rc(n),mtime:Wn(s)};return o!=null?i.content=await t(o):r==null&&(i.content=await t(e)),i}function Gy(e){return qy(e,Hc)}function Ky(e){const t=Vc(e);return async function(n,s={}){const o=Gy(n),i=t(o,s),a=await Jn(i);if(a==null)throw new Error("Invalid body");return a}}const qc=Symbol.for("@achingbrain/uint8arraylist");function Li(e,t){if(t==null||t<0)throw new RangeError("index is out of bounds");let r=0;for(const n of e){const s=r+n.byteLength;if(t<s)return{buf:n,index:t-r};r=s}throw new RangeError("index is out of bounds")}function Zr(e){return!!e?.[qc]}class Ne{bufs;length;[qc]=!0;constructor(...t){this.bufs=[],this.length=0,t.length>0&&this.appendAll(t)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...t){this.appendAll(t)}appendAll(t){let r=0;for(const n of t)if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.push(n);else if(Zr(n))r+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}prepend(...t){this.prependAll(t)}prependAll(t){let r=0;for(const n of t.reverse())if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.unshift(n);else if(Zr(n))r+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}get(t){const r=Li(this.bufs,t);return r.buf[r.index]}set(t,r){const n=Li(this.bufs,t);n.buf[n.index]=r}write(t,r=0){if(t instanceof Uint8Array)for(let n=0;n<t.length;n++)this.set(r+n,t[n]);else if(Zr(t))for(let n=0;n<t.length;n++)this.set(r+n,t.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(t){if(t=Math.trunc(t),!(Number.isNaN(t)||t<=0)){if(t===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(t>=this.bufs[0].byteLength)t-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(t),this.length-=t;break}}}slice(t,r){const{bufs:n,length:s}=this._subList(t,r);return pt(n,s)}subarray(t,r){const{bufs:n,length:s}=this._subList(t,r);return n.length===1?n[0]:pt(n,s)}sublist(t,r){const{bufs:n,length:s}=this._subList(t,r),o=new Ne;return o.length=s,o.bufs=[...n],o}_subList(t,r){if(t=t??0,r=r??this.length,t<0&&(t=this.length+t),r<0&&(r=this.length+r),t<0||r>this.length)throw new RangeError("index is out of bounds");if(t===r)return{bufs:[],length:0};if(t===0&&r===this.length)return{bufs:this.bufs,length:this.length};const n=[];let s=0;for(let o=0;o<this.bufs.length;o++){const i=this.bufs[o],a=s,c=a+i.byteLength;if(s=c,t>=c)continue;const f=t>=a&&t<c,u=r>a&&r<=c;if(f&&u){if(t===a&&r===c){n.push(i);break}const l=t-a;n.push(i.subarray(l,l+(r-t)));break}if(f){if(t===0){n.push(i);continue}n.push(i.subarray(t-a));continue}if(u){if(r===c){n.push(i);break}n.push(i.subarray(0,r-a));break}n.push(i)}return{bufs:n,length:r-t}}indexOf(t,r=0){if(!Zr(t)&&!(t instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const n=t instanceof Uint8Array?t:t.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),t.length===0)return r>this.length?this.length:r;const s=n.byteLength;if(s===0)throw new TypeError("search must be at least 1 byte long");const o=256,i=new Int32Array(o);for(let l=0;l<o;l++)i[l]=-1;for(let l=0;l<s;l++)i[n[l]]=l;const a=i,c=this.byteLength-n.byteLength,f=n.byteLength-1;let u;for(let l=r;l<=c;l+=u){u=0;for(let w=f;w>=0;w--){const d=this.get(l+w);if(n[w]!==d){u=Math.max(1,w-a[d]);break}}if(u===0)return l}return-1}getInt8(t){const r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(t,r){const n=$t(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,r),this.write(n,t)}getInt16(t,r){const n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,r)}setInt16(t,r,n){const s=bt(2);new DataView(s.buffer,s.byteOffset,s.byteLength).setInt16(0,r,n),this.write(s,t)}getInt32(t,r){const n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,r)}setInt32(t,r,n){const s=bt(4);new DataView(s.buffer,s.byteOffset,s.byteLength).setInt32(0,r,n),this.write(s,t)}getBigInt64(t,r){const n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,r)}setBigInt64(t,r,n){const s=bt(8);new DataView(s.buffer,s.byteOffset,s.byteLength).setBigInt64(0,r,n),this.write(s,t)}getUint8(t){const r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(t,r){const n=$t(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,r),this.write(n,t)}getUint16(t,r){const n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,r)}setUint16(t,r,n){const s=bt(2);new DataView(s.buffer,s.byteOffset,s.byteLength).setUint16(0,r,n),this.write(s,t)}getUint32(t,r){const n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,r)}setUint32(t,r,n){const s=bt(4);new DataView(s.buffer,s.byteOffset,s.byteLength).setUint32(0,r,n),this.write(s,t)}getBigUint64(t,r){const n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,r)}setBigUint64(t,r,n){const s=bt(8);new DataView(s.buffer,s.byteOffset,s.byteLength).setBigUint64(0,r,n),this.write(s,t)}getFloat32(t,r){const n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,r)}setFloat32(t,r,n){const s=bt(4);new DataView(s.buffer,s.byteOffset,s.byteLength).setFloat32(0,r,n),this.write(s,t)}getFloat64(t,r){const n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,r)}setFloat64(t,r,n){const s=bt(8);new DataView(s.buffer,s.byteOffset,s.byteLength).setFloat64(0,r,n),this.write(s,t)}equals(t){if(t==null||!(t instanceof Ne)||t.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!kt(this.bufs[r],t.bufs[r]))return!1;return!0}static fromUint8Arrays(t,r){const n=new Ne;return n.bufs=t,r==null&&(r=t.reduce((s,o)=>s+o.byteLength,0)),n.length=r,n}}const Zy=parseInt("11111",2),Ws=parseInt("10000000",2),Wy=parseInt("01111111",2),Di={0:xr,1:xr,2:Jy,3:Qy,4:eg,5:Xy,6:Yy,16:xr,22:xr,48:xr};function Yn(e,t={offset:0}){const r=e[t.offset]&Zy;if(t.offset++,Di[r]!=null)return Di[r](e,t);throw new Error("No decoder for tag "+r)}function Hr(e,t){let r=0;if((e[t.offset]&Ws)===Ws){const n=e[t.offset]&Wy;let s="0x";t.offset++;for(let o=0;o<n;o++,t.offset++)s+=e[t.offset].toString(16).padStart(2,"0");r=parseInt(s,16)}else r=e[t.offset],t.offset++;return r}function xr(e,t){Hr(e,t);const r=[];for(;!(t.offset>=e.byteLength);){const n=Yn(e,t);if(n===null)break;r.push(n)}return r}function Jy(e,t){const r=Hr(e,t),n=t.offset,s=t.offset+r,o=[];for(let i=n;i<s;i++)i===n&&e[i]===0||o.push(e[i]);return t.offset+=r,Uint8Array.from(o)}function Yy(e,t){const r=Hr(e,t),n=t.offset+r,s=e[t.offset];t.offset++;let o=0,i=0;s<40?(o=0,i=s):s<80?(o=1,i=s-40):(o=2,i=s-80);let a=`${o}.${i}`,c=[];for(;t.offset<n;){const f=e[t.offset];if(t.offset++,c.push(f&127),f<128){c.reverse();let u=0;for(let l=0;l<c.length;l++)u+=c[l]<<l*7;a+=`.${u}`,c=[]}}return a}function Xy(e,t){return t.offset++,null}function Qy(e,t){const r=Hr(e,t),n=e[t.offset];t.offset++;const s=e.subarray(t.offset,t.offset+r-1);if(t.offset+=r,n!==0)throw new Error("Unused bits in bit string is unimplemented");return s}function eg(e,t){const r=Hr(e,t),n=e.subarray(t.offset,t.offset+r);return t.offset+=r,n}function tg(e){let t=e.toString(16);t.length%2===1&&(t="0"+t);const r=new Ne;for(let n=0;n<t.length;n+=2)r.append(Uint8Array.from([parseInt(`${t[n]}${t[n+1]}`,16)]));return r}function Oo(e){if(e.byteLength<128)return Uint8Array.from([e.byteLength]);const t=tg(e.byteLength);return new Ne(Uint8Array.from([t.byteLength|Ws]),t)}function Js(e){const t=new Ne,r=128;return(e.subarray()[0]&r)===r&&t.append(Uint8Array.from([0])),t.append(e),new Ne(Uint8Array.from([2]),Oo(t),t)}function Gc(e){const t=Uint8Array.from([0]),r=new Ne(t,e);return new Ne(Uint8Array.from([3]),Oo(r),r)}function Cr(e,t=48){const r=new Ne;for(const n of e)r.append(n);return new Ne(Uint8Array.from([t]),Oo(r),r)}async function rg(e,t,r){const n=await crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:e.crv??"P-256"},!1,["verify"]);return crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},n,t,r.subarray())}const ng=Uint8Array.from([6,8,42,134,72,206,61,3,1,7]),sg=Uint8Array.from([6,5,43,129,4,0,34]),og=Uint8Array.from([6,5,43,129,4,0,35]),ig={ext:!0,kty:"EC",crv:"P-256"},ag={ext:!0,kty:"EC",crv:"P-384"},cg={ext:!0,kty:"EC",crv:"P-521"},ws=32,ms=48,bs=66;function Kc(e){const t=Yn(e);return ug(t)}function ug(e){const t=e[1][1][0],r=1;let n,s;if(t.byteLength===ws*2+1)return n=ne(t.subarray(r,r+ws),"base64url"),s=ne(t.subarray(r+ws),"base64url"),new xs({...ig,key_ops:["verify"],x:n,y:s});if(t.byteLength===ms*2+1)return n=ne(t.subarray(r,r+ms),"base64url"),s=ne(t.subarray(r+ms),"base64url"),new xs({...ag,key_ops:["verify"],x:n,y:s});if(t.byteLength===bs*2+1)return n=ne(t.subarray(r,r+bs),"base64url"),s=ne(t.subarray(r+bs),"base64url"),new xs({...cg,key_ops:["verify"],x:n,y:s});throw new Ke(`coordinates were wrong length, got ${t.byteLength}, expected 65, 97 or 133`)}function lg(e){return Cr([Js(Uint8Array.from([1])),Cr([fg(e.crv)],160),Cr([Gc(new Ne(Uint8Array.from([4]),Fe(e.x??"","base64url"),Fe(e.y??"","base64url")))],161)]).subarray()}function fg(e){if(e==="P-256")return ng;if(e==="P-384")return sg;if(e==="P-521")return og;throw new Ke(`Invalid curve ${e}`)}class xs{type="ECDSA";jwk;_raw;constructor(t){this.jwk=t}get raw(){return this._raw==null&&(this._raw=lg(this.jwk)),this._raw}toMultihash(){return Pt.digest(Ho(this))}toCID(){return F.createV1(114,this.toMultihash())}toString(){return de.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:kt(this.raw,t.raw)}async verify(t,r){return rg(this.jwk,r,t)}}const Kt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Lo(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Ys(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function tt(e,...t){if(!Lo(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function dg(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ys(e.outputLen),Ys(e.blockLen)}function Pn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function hg(e,t){tt(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function nr(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Es(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Je(e,t){return e<<32-t|e>>>t}const Zc=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",pg=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function sr(e){if(tt(e),Zc)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=pg[e[r]];return t}const ot={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ri(e){if(e>=ot._0&&e<=ot._9)return e-ot._0;if(e>=ot.A&&e<=ot.F)return e-(ot.A-10);if(e>=ot.a&&e<=ot.f)return e-(ot.a-10)}function Do(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Zc)return Uint8Array.fromHex(e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let s=0,o=0;s<r;s++,o+=2){const i=Ri(e.charCodeAt(o)),a=Ri(e.charCodeAt(o+1));if(i===void 0||a===void 0){const c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}n[s]=i*16+a}return n}function yg(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Ro(e){return typeof e=="string"&&(e=yg(e)),tt(e),e}function ht(...e){let t=0;for(let n=0;n<e.length;n++){const s=e[n];tt(s),t+=s.length}const r=new Uint8Array(t);for(let n=0,s=0;n<e.length;n++){const o=e[n];r.set(o,s),s+=o.length}return r}class Wc{}function Jc(e){const t=n=>e().update(Ro(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Yc(e=32){if(Kt&&typeof Kt.getRandomValues=="function")return Kt.getRandomValues(new Uint8Array(e));if(Kt&&typeof Kt.randomBytes=="function")return Uint8Array.from(Kt.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function gg(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);const s=BigInt(32),o=BigInt(4294967295),i=Number(r>>s&o),a=Number(r&o),c=n?4:0,f=n?0:4;e.setUint32(t+c,i,n),e.setUint32(t+f,a,n)}function wg(e,t,r){return e&t^~e&r}function mg(e,t,r){return e&t^e&r^t&r}class Xc extends Wc{constructor(t,r,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(t),this.view=Es(this.buffer)}update(t){Pn(this),t=Ro(t),tt(t);const{view:r,buffer:n,blockLen:s}=this,o=t.length;for(let i=0;i<o;){const a=Math.min(s-this.pos,o-i);if(a===s){const c=Es(t);for(;s<=o-i;i+=s)this.process(c,i);continue}n.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Pn(this),hg(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:o}=this;let{pos:i}=this;r[i++]=128,nr(this.buffer.subarray(i)),this.padOffset>s-i&&(this.process(n,0),i=0);for(let l=i;l<s;l++)r[l]=0;gg(n,s-8,BigInt(this.length*8),o),this.process(n,0);const a=Es(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=c/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<f;l++)a.setUint32(4*l,u[l],o)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:o,destroyed:i,pos:a}=this;return t.destroyed=i,t.finished=o,t.length=s,t.pos=a,s%r&&t.buffer.set(n),t}clone(){return this._cloneInto()}}const Et=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),be=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Wr=BigInt(2**32-1),ji=BigInt(32);function bg(e,t=!1){return t?{h:Number(e&Wr),l:Number(e>>ji&Wr)}:{h:Number(e>>ji&Wr)|0,l:Number(e&Wr)|0}}function xg(e,t=!1){const r=e.length;let n=new Uint32Array(r),s=new Uint32Array(r);for(let o=0;o<r;o++){const{h:i,l:a}=bg(e[o],t);[n[o],s[o]]=[i,a]}return[n,s]}const Fi=(e,t,r)=>e>>>r,zi=(e,t,r)=>e<<32-r|t>>>r,Zt=(e,t,r)=>e>>>r|t<<32-r,Wt=(e,t,r)=>e<<32-r|t>>>r,Jr=(e,t,r)=>e<<64-r|t>>>r-32,Yr=(e,t,r)=>e>>>r-32|t<<64-r;function it(e,t,r,n){const s=(t>>>0)+(n>>>0);return{h:e+r+(s/2**32|0)|0,l:s|0}}const Eg=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),vg=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,Ag=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),Sg=(e,t,r,n,s)=>t+r+n+s+(e/2**32|0)|0,_g=(e,t,r,n,s)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(s>>>0),Ig=(e,t,r,n,s,o)=>t+r+n+s+o+(e/2**32|0)|0,Bg=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),vt=new Uint32Array(64);class Cg extends Xc{constructor(t=32){super(64,t,8,!1),this.A=Et[0]|0,this.B=Et[1]|0,this.C=Et[2]|0,this.D=Et[3]|0,this.E=Et[4]|0,this.F=Et[5]|0,this.G=Et[6]|0,this.H=Et[7]|0}get(){const{A:t,B:r,C:n,D:s,E:o,F:i,G:a,H:c}=this;return[t,r,n,s,o,i,a,c]}set(t,r,n,s,o,i,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=o|0,this.F=i|0,this.G=a|0,this.H=c|0}process(t,r){for(let l=0;l<16;l++,r+=4)vt[l]=t.getUint32(r,!1);for(let l=16;l<64;l++){const w=vt[l-15],d=vt[l-2],p=Je(w,7)^Je(w,18)^w>>>3,g=Je(d,17)^Je(d,19)^d>>>10;vt[l]=g+vt[l-7]+p+vt[l-16]|0}let{A:n,B:s,C:o,D:i,E:a,F:c,G:f,H:u}=this;for(let l=0;l<64;l++){const w=Je(a,6)^Je(a,11)^Je(a,25),d=u+w+wg(a,c,f)+Bg[l]+vt[l]|0,g=(Je(n,2)^Je(n,13)^Je(n,22))+mg(n,s,o)|0;u=f,f=c,c=a,a=i+d|0,i=o,o=s,s=n,n=d+g|0}n=n+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(n,s,o,i,a,c,f,u)}roundClean(){nr(vt)}destroy(){this.set(0,0,0,0,0,0,0,0),nr(this.buffer)}}const Qc=xg(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),$g=Qc[0],Pg=Qc[1],At=new Uint32Array(80),St=new Uint32Array(80);class kg extends Xc{constructor(t=64){super(128,t,16,!1),this.Ah=be[0]|0,this.Al=be[1]|0,this.Bh=be[2]|0,this.Bl=be[3]|0,this.Ch=be[4]|0,this.Cl=be[5]|0,this.Dh=be[6]|0,this.Dl=be[7]|0,this.Eh=be[8]|0,this.El=be[9]|0,this.Fh=be[10]|0,this.Fl=be[11]|0,this.Gh=be[12]|0,this.Gl=be[13]|0,this.Hh=be[14]|0,this.Hl=be[15]|0}get(){const{Ah:t,Al:r,Bh:n,Bl:s,Ch:o,Cl:i,Dh:a,Dl:c,Eh:f,El:u,Fh:l,Fl:w,Gh:d,Gl:p,Hh:g,Hl:h}=this;return[t,r,n,s,o,i,a,c,f,u,l,w,d,p,g,h]}set(t,r,n,s,o,i,a,c,f,u,l,w,d,p,g,h){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=o|0,this.Cl=i|0,this.Dh=a|0,this.Dl=c|0,this.Eh=f|0,this.El=u|0,this.Fh=l|0,this.Fl=w|0,this.Gh=d|0,this.Gl=p|0,this.Hh=g|0,this.Hl=h|0}process(t,r){for(let _=0;_<16;_++,r+=4)At[_]=t.getUint32(r),St[_]=t.getUint32(r+=4);for(let _=16;_<80;_++){const P=At[_-15]|0,x=St[_-15]|0,N=Zt(P,x,1)^Zt(P,x,8)^Fi(P,x,7),k=Wt(P,x,1)^Wt(P,x,8)^zi(P,x,7),I=At[_-2]|0,m=St[_-2]|0,v=Zt(I,m,19)^Jr(I,m,61)^Fi(I,m,6),E=Wt(I,m,19)^Yr(I,m,61)^zi(I,m,6),A=Ag(k,E,St[_-7],St[_-16]),B=Sg(A,N,v,At[_-7],At[_-16]);At[_]=B|0,St[_]=A|0}let{Ah:n,Al:s,Bh:o,Bl:i,Ch:a,Cl:c,Dh:f,Dl:u,Eh:l,El:w,Fh:d,Fl:p,Gh:g,Gl:h,Hh:b,Hl:S}=this;for(let _=0;_<80;_++){const P=Zt(l,w,14)^Zt(l,w,18)^Jr(l,w,41),x=Wt(l,w,14)^Wt(l,w,18)^Yr(l,w,41),N=l&d^~l&g,k=w&p^~w&h,I=_g(S,x,k,Pg[_],St[_]),m=Ig(I,b,P,N,$g[_],At[_]),v=I|0,E=Zt(n,s,28)^Jr(n,s,34)^Jr(n,s,39),A=Wt(n,s,28)^Yr(n,s,34)^Yr(n,s,39),B=n&o^n&a^o&a,O=s&i^s&c^i&c;b=g|0,S=h|0,g=d|0,h=p|0,d=l|0,p=w|0,{h:l,l:w}=it(f|0,u|0,m|0,v|0),f=a|0,u=c|0,a=o|0,c=i|0,o=n|0,i=s|0;const T=Eg(v,A,O);n=vg(T,m,E,B),s=T|0}({h:n,l:s}=it(this.Ah|0,this.Al|0,n|0,s|0)),{h:o,l:i}=it(this.Bh|0,this.Bl|0,o|0,i|0),{h:a,l:c}=it(this.Ch|0,this.Cl|0,a|0,c|0),{h:f,l:u}=it(this.Dh|0,this.Dl|0,f|0,u|0),{h:l,l:w}=it(this.Eh|0,this.El|0,l|0,w|0),{h:d,l:p}=it(this.Fh|0,this.Fl|0,d|0,p|0),{h:g,l:h}=it(this.Gh|0,this.Gl|0,g|0,h|0),{h:b,l:S}=it(this.Hh|0,this.Hl|0,b|0,S|0),this.set(n,s,o,i,a,c,f,u,l,w,d,p,g,h,b,S)}roundClean(){nr(At,St)}destroy(){nr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const eu=Jc(()=>new Cg),Ug=Jc(()=>new kg);const jo=BigInt(0),Xs=BigInt(1);function Rt(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function Xr(e){const t=e.toString(16);return t.length&1?"0"+t:t}function tu(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?jo:BigInt("0x"+e)}function Xn(e){return tu(sr(e))}function Rr(e){return tt(e),tu(sr(Uint8Array.from(e).reverse()))}function Fo(e,t){return Do(e.toString(16).padStart(t*2,"0"))}function Qn(e,t){return Fo(e,t).reverse()}function ce(e,t,r){let n;if(typeof t=="string")try{n=Do(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else if(Lo(t))n=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(e+" of length "+r+" expected, got "+s);return n}const vs=e=>typeof e=="bigint"&&jo<=e;function Ng(e,t,r){return vs(e)&&vs(t)&&vs(r)&&t<=e&&e<r}function Qt(e,t,r,n){if(!Ng(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function Tg(e){let t;for(t=0;e>jo;e>>=Xs,t+=1);return t}const es=e=>(Xs<<BigInt(e))-Xs;function Og(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=d=>new Uint8Array(d),s=d=>Uint8Array.of(d);let o=n(e),i=n(e),a=0;const c=()=>{o.fill(1),i.fill(0),a=0},f=(...d)=>r(i,o,...d),u=(d=n(0))=>{i=f(s(0),d),o=f(),d.length!==0&&(i=f(s(1),d),o=f())},l=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const p=[];for(;d<t;){o=f();const g=o.slice();p.push(g),d+=o.length}return ht(...p)};return(d,p)=>{c(),u(d);let g;for(;!(g=p(l()));)u();return c(),g}}function Vr(e,t,r={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function n(s,o,i){const a=e[s];if(i&&a===void 0)return;const c=typeof a;if(c!==o||a===null)throw new Error(`param "${s}" is invalid: expected ${o}, got ${c}`)}Object.entries(t).forEach(([s,o])=>n(s,o,!1)),Object.entries(r).forEach(([s,o])=>n(s,o,!0))}function kn(e){const t=new WeakMap;return(r,...n)=>{const s=t.get(r);if(s!==void 0)return s;const o=e(r,...n);return t.set(r,o),o}}const Be=BigInt(0),ye=BigInt(1),Tt=BigInt(2),Lg=BigInt(3),ru=BigInt(4),nu=BigInt(5),su=BigInt(8);function ue(e,t){const r=e%t;return r>=Be?r:t+r}function ae(e,t,r){let n=e;for(;t-- >Be;)n*=n,n%=r;return n}function Mi(e,t){if(e===Be)throw new Error("invert: expected non-zero number");if(t<=Be)throw new Error("invert: expected positive modulus, got "+t);let r=ue(e,t),n=t,s=Be,o=ye;for(;r!==Be;){const a=n/r,c=n%r,f=s-o*a;n=r,r=c,s=o,o=f}if(n!==ye)throw new Error("invert: does not exist");return ue(s,t)}function ou(e,t){const r=(e.ORDER+ye)/ru,n=e.pow(t,r);if(!e.eql(e.sqr(n),t))throw new Error("Cannot find square root");return n}function Dg(e,t){const r=(e.ORDER-nu)/su,n=e.mul(t,Tt),s=e.pow(n,r),o=e.mul(t,s),i=e.mul(e.mul(o,Tt),s),a=e.mul(o,e.sub(i,e.ONE));if(!e.eql(e.sqr(a),t))throw new Error("Cannot find square root");return a}function Rg(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-ye,r=0;for(;t%Tt===Be;)t/=Tt,r++;let n=Tt;const s=yr(e);for(;Hi(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return ou;let o=s.pow(n,t);const i=(t+ye)/Tt;return function(c,f){if(c.is0(f))return f;if(Hi(c,f)!==1)throw new Error("Cannot find square root");let u=r,l=c.mul(c.ONE,o),w=c.pow(f,t),d=c.pow(f,i);for(;!c.eql(w,c.ONE);){if(c.is0(w))return c.ZERO;let p=1,g=c.sqr(w);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const h=ye<<BigInt(u-p-1),b=c.pow(l,h);u=p,l=c.sqr(b),w=c.mul(w,l),d=c.mul(d,b)}return d}}function jg(e){return e%ru===Lg?ou:e%su===nu?Dg:Rg(e)}const Fg=(e,t)=>(ue(e,t)&ye)===ye,zg=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Mg(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=zg.reduce((n,s)=>(n[s]="function",n),t);return Vr(e,r),e}function Hg(e,t,r){if(r<Be)throw new Error("invalid exponent, negatives unsupported");if(r===Be)return e.ONE;if(r===ye)return t;let n=e.ONE,s=t;for(;r>Be;)r&ye&&(n=e.mul(n,s)),s=e.sqr(s),r>>=ye;return n}function iu(e,t,r=!1){const n=new Array(t.length).fill(r?e.ZERO:void 0),s=t.reduce((i,a,c)=>e.is0(a)?i:(n[c]=i,e.mul(i,a)),e.ONE),o=e.inv(s);return t.reduceRight((i,a,c)=>e.is0(a)?i:(n[c]=e.mul(i,n[c]),e.mul(i,a)),o),n}function Hi(e,t){const r=(e.ORDER-ye)/Tt,n=e.pow(t,r),s=e.eql(n,e.ONE),o=e.eql(n,e.ZERO),i=e.eql(n,e.neg(e.ONE));if(!s&&!o&&!i)throw new Error("invalid Legendre symbol result");return s?1:o?0:-1}function Vg(e,t){t!==void 0&&Ys(t);const r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function yr(e,t,r=!1,n={}){if(e<=Be)throw new Error("invalid field: expected ORDER > 0, got "+e);let s,o;if(typeof t=="object"&&t!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const u=t;u.BITS&&(s=u.BITS),u.sqrt&&(o=u.sqrt),typeof u.isLE=="boolean"&&(r=u.isLE)}else typeof t=="number"&&(s=t),n.sqrt&&(o=n.sqrt);const{nBitLength:i,nByteLength:a}=Vg(e,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const f=Object.freeze({ORDER:e,isLE:r,BITS:i,BYTES:a,MASK:es(i),ZERO:Be,ONE:ye,create:u=>ue(u,e),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Be<=u&&u<e},is0:u=>u===Be,isValidNot0:u=>!f.is0(u)&&f.isValid(u),isOdd:u=>(u&ye)===ye,neg:u=>ue(-u,e),eql:(u,l)=>u===l,sqr:u=>ue(u*u,e),add:(u,l)=>ue(u+l,e),sub:(u,l)=>ue(u-l,e),mul:(u,l)=>ue(u*l,e),pow:(u,l)=>Hg(f,u,l),div:(u,l)=>ue(u*Mi(l,e),e),sqrN:u=>u*u,addN:(u,l)=>u+l,subN:(u,l)=>u-l,mulN:(u,l)=>u*l,inv:u=>Mi(u,e),sqrt:o||(u=>(c||(c=jg(e)),c(f,u))),toBytes:u=>r?Qn(u,a):Fo(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return r?Rr(u):Xn(u)},invertBatch:u=>iu(f,u),cmov:(u,l,w)=>w?l:u});return Object.freeze(f)}function au(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function cu(e){const t=au(e);return t+Math.ceil(t/2)}function qg(e,t,r=!1){const n=e.length,s=au(t),o=cu(t);if(n<16||n<o||n>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+n);const i=r?Rr(e):Xn(e),a=ue(i,t-ye)+ye;return r?Qn(a,s):Fo(a,s)}const or=BigInt(0),Ot=BigInt(1);function $r(e,t){const r=t.negate();return e?r:t}function uu(e,t,r){const n=t==="pz"?i=>i.pz:i=>i.ez,s=iu(e.Fp,r.map(n));return r.map((i,a)=>i.toAffine(s[a])).map(e.fromAffine)}function lu(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function As(e,t){lu(e,t);const r=Math.ceil(t/e)+1,n=2**(e-1),s=2**e,o=es(e),i=BigInt(e);return{windows:r,windowSize:n,mask:o,maxNumber:s,shiftBy:i}}function Vi(e,t,r){const{windowSize:n,mask:s,maxNumber:o,shiftBy:i}=r;let a=Number(e&s),c=e>>i;a>n&&(a-=o,c+=Ot);const f=t*n,u=f+Math.abs(a)-1,l=a===0,w=a<0,d=t%2!==0;return{nextN:c,offset:u,isZero:l,isNeg:w,isNegF:d,offsetF:f}}function Gg(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((r,n)=>{if(!(r instanceof t))throw new Error("invalid point at index "+n)})}function Kg(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((r,n)=>{if(!t.isValid(r))throw new Error("invalid scalar at index "+n)})}const Ss=new WeakMap,fu=new WeakMap;function _s(e){return fu.get(e)||1}function qi(e){if(e!==or)throw new Error("invalid wNAF")}function du(e,t){return{constTimeNegate:$r,hasPrecomputes(r){return _s(r)!==1},unsafeLadder(r,n,s=e.ZERO){let o=r;for(;n>or;)n&Ot&&(s=s.add(o)),o=o.double(),n>>=Ot;return s},precomputeWindow(r,n){const{windows:s,windowSize:o}=As(n,t),i=[];let a=r,c=a;for(let f=0;f<s;f++){c=a,i.push(c);for(let u=1;u<o;u++)c=c.add(a),i.push(c);a=c.double()}return i},wNAF(r,n,s){let o=e.ZERO,i=e.BASE;const a=As(r,t);for(let c=0;c<a.windows;c++){const{nextN:f,offset:u,isZero:l,isNeg:w,isNegF:d,offsetF:p}=Vi(s,c,a);s=f,l?i=i.add($r(d,n[p])):o=o.add($r(w,n[u]))}return qi(s),{p:o,f:i}},wNAFUnsafe(r,n,s,o=e.ZERO){const i=As(r,t);for(let a=0;a<i.windows&&s!==or;a++){const{nextN:c,offset:f,isZero:u,isNeg:l}=Vi(s,a,i);if(s=c,!u){const w=n[f];o=o.add(l?w.negate():w)}}return qi(s),o},getPrecomputes(r,n,s){let o=Ss.get(n);return o||(o=this.precomputeWindow(n,r),r!==1&&(typeof s=="function"&&(o=s(o)),Ss.set(n,o))),o},wNAFCached(r,n,s){const o=_s(r);return this.wNAF(o,this.getPrecomputes(o,r,s),n)},wNAFCachedUnsafe(r,n,s,o){const i=_s(r);return i===1?this.unsafeLadder(r,n,o):this.wNAFUnsafe(i,this.getPrecomputes(i,r,s),n,o)},setWindowSize(r,n){lu(n,t),fu.set(r,n),Ss.delete(r)}}}function Zg(e,t,r,n){let s=t,o=e.ZERO,i=e.ZERO;for(;r>or||n>or;)r&Ot&&(o=o.add(s)),n&Ot&&(i=i.add(s)),s=s.double(),r>>=Ot,n>>=Ot;return{p1:o,p2:i}}function hu(e,t,r,n){Gg(r,e),Kg(n,t);const s=r.length,o=n.length;if(s!==o)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,a=Tg(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const f=es(c),u=new Array(Number(f)+1).fill(i),l=Math.floor((t.BITS-1)/c)*c;let w=i;for(let d=l;d>=0;d-=c){u.fill(i);for(let g=0;g<o;g++){const h=n[g],b=Number(h>>BigInt(d)&f);u[b]=u[b].add(r[g])}let p=i;for(let g=u.length-1,h=i;g>0;g--)h=h.add(u[g]),p=p.add(h);if(w=w.add(p),d!==0)for(let g=0;g<c;g++)w=w.double()}return w}function Gi(e,t){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Mg(t),t}else return yr(e)}function pu(e,t,r={}){if(!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const a of["p","n","h"]){const c=t[a];if(!(typeof c=="bigint"&&c>or))throw new Error(`CURVE.${a} must be positive bigint`)}const n=Gi(t.p,r.Fp),s=Gi(t.n,r.Fn),i=["Gx","Gy","a",e==="weierstrass"?"b":"d"];for(const a of i)if(!n.isValid(t[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:s}}const Ye=BigInt(0),Se=BigInt(1),Is=BigInt(2),Wg=BigInt(8),Jg={zip215:!0};function Yg(e,t,r,n){const s=e.sqr(r),o=e.sqr(n),i=e.add(e.mul(t.a,s),o),a=e.add(e.ONE,e.mul(t.d,e.mul(s,o)));return e.eql(i,a)}function Xg(e,t={}){const{Fp:r,Fn:n}=pu("edwards",e,t),{h:s,n:o}=e;Vr(t,{},{uvRatio:"function"});const i=Is<<BigInt(n.BYTES*8)-Se,a=g=>r.create(g),c=t.uvRatio||((g,h)=>{try{return{isValid:!0,value:r.sqrt(r.div(g,h))}}catch{return{isValid:!1,value:Ye}}});if(!Yg(r,e,e.Gx,e.Gy))throw new Error("bad curve params: generator point");function f(g,h,b=!1){const S=b?Se:Ye;return Qt("coordinate "+g,h,S,i),h}function u(g){if(!(g instanceof d))throw new Error("ExtendedPoint expected")}const l=kn((g,h)=>{const{ex:b,ey:S,ez:_}=g,P=g.is0();h==null&&(h=P?Wg:r.inv(_));const x=a(b*h),N=a(S*h),k=a(_*h);if(P)return{x:Ye,y:Se};if(k!==Se)throw new Error("invZ was invalid");return{x,y:N}}),w=kn(g=>{const{a:h,d:b}=e;if(g.is0())throw new Error("bad point: ZERO");const{ex:S,ey:_,ez:P,et:x}=g,N=a(S*S),k=a(_*_),I=a(P*P),m=a(I*I),v=a(N*h),E=a(I*a(v+k)),A=a(m+a(b*a(N*k)));if(E!==A)throw new Error("bad point: equation left != right (1)");const B=a(S*_),O=a(P*x);if(B!==O)throw new Error("bad point: equation left != right (2)");return!0});class d{constructor(h,b,S,_){this.ex=f("x",h),this.ey=f("y",b),this.ez=f("z",S,!0),this.et=f("t",_),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(h){if(h instanceof d)throw new Error("extended point not allowed");const{x:b,y:S}=h||{};return f("x",b),f("y",S),new d(b,S,Se,a(b*S))}static normalizeZ(h){return uu(d,"ez",h)}static msm(h,b){return hu(d,n,h,b)}_setWindowSize(h){this.precompute(h)}precompute(h=8,b=!0){return p.setWindowSize(this,h),b||this.multiply(Is),this}assertValidity(){w(this)}equals(h){u(h);const{ex:b,ey:S,ez:_}=this,{ex:P,ey:x,ez:N}=h,k=a(b*N),I=a(P*_),m=a(S*N),v=a(x*_);return k===I&&m===v}is0(){return this.equals(d.ZERO)}negate(){return new d(a(-this.ex),this.ey,this.ez,a(-this.et))}double(){const{a:h}=e,{ex:b,ey:S,ez:_}=this,P=a(b*b),x=a(S*S),N=a(Is*a(_*_)),k=a(h*P),I=b+S,m=a(a(I*I)-P-x),v=k+x,E=v-N,A=k-x,B=a(m*E),O=a(v*A),T=a(m*A),D=a(E*v);return new d(B,O,D,T)}add(h){u(h);const{a:b,d:S}=e,{ex:_,ey:P,ez:x,et:N}=this,{ex:k,ey:I,ez:m,et:v}=h,E=a(_*k),A=a(P*I),B=a(N*S*v),O=a(x*m),T=a((_+P)*(k+I)-E-A),D=O-B,z=O+B,R=a(A-b*E),se=a(T*D),G=a(z*R),M=a(T*R),oe=a(D*z);return new d(se,G,oe,M)}subtract(h){return this.add(h.negate())}multiply(h){const b=h;Qt("scalar",b,Se,o);const{p:S,f:_}=p.wNAFCached(this,b,d.normalizeZ);return d.normalizeZ([S,_])[0]}multiplyUnsafe(h,b=d.ZERO){const S=h;return Qt("scalar",S,Ye,o),S===Ye?d.ZERO:this.is0()||S===Se?this:p.wNAFCachedUnsafe(this,S,d.normalizeZ,b)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return p.wNAFCachedUnsafe(this,o).is0()}toAffine(h){return l(this,h)}clearCofactor(){return s===Se?this:this.multiplyUnsafe(s)}static fromBytes(h,b=!1){return tt(h),this.fromHex(h,b)}static fromHex(h,b=!1){const{d:S,a:_}=e,P=r.BYTES;h=ce("pointHex",h,P),Rt("zip215",b);const x=h.slice(),N=h[P-1];x[P-1]=N&-129;const k=Rr(x),I=b?i:r.ORDER;Qt("pointHex.y",k,Ye,I);const m=a(k*k),v=a(m-Se),E=a(S*m-_);let{isValid:A,value:B}=c(v,E);if(!A)throw new Error("Point.fromHex: invalid y coordinate");const O=(B&Se)===Se,T=(N&128)!==0;if(!b&&B===Ye&&T)throw new Error("Point.fromHex: x=0 and x_0=1");return T!==O&&(B=a(-B)),d.fromAffine({x:B,y:k})}static fromPrivateScalar(h){return d.BASE.multiply(h)}toBytes(){const{x:h,y:b}=this.toAffine(),S=Qn(b,r.BYTES);return S[S.length-1]|=h&Se?128:0,S}toRawBytes(){return this.toBytes()}toHex(){return sr(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}d.BASE=new d(e.Gx,e.Gy,Se,a(e.Gx*e.Gy)),d.ZERO=new d(Ye,Se,Se,Ye),d.Fp=r,d.Fn=n;const p=du(d,n.BYTES*8);return d}function Qg(e,t){Vr(t,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r,hash:n}=t,{BASE:s,Fp:o,Fn:i}=e,a=i.ORDER,c=t.randomBytes||Yc,f=t.adjustScalarBytes||(x=>x),u=t.domain||((x,N,k)=>{if(Rt("phflag",k),N.length||k)throw new Error("Contexts/pre-hash are not supported");return x});function l(x){return i.create(x)}function w(x){return l(Rr(x))}function d(x){const N=o.BYTES;x=ce("private key",x,N);const k=ce("hashed private key",n(x),2*N),I=f(k.slice(0,N)),m=k.slice(N,2*N),v=w(I);return{head:I,prefix:m,scalar:v}}function p(x){const{head:N,prefix:k,scalar:I}=d(x),m=s.multiply(I),v=m.toBytes();return{head:N,prefix:k,scalar:I,point:m,pointBytes:v}}function g(x){return p(x).pointBytes}function h(x=Uint8Array.of(),...N){const k=ht(...N);return w(n(u(k,ce("context",x),!!r)))}function b(x,N,k={}){x=ce("message",x),r&&(x=r(x));const{prefix:I,scalar:m,pointBytes:v}=p(N),E=h(k.context,I,x),A=s.multiply(E).toBytes(),B=h(k.context,A,v,x),O=l(E+B*m);Qt("signature.s",O,Ye,a);const T=o.BYTES,D=ht(A,Qn(O,T));return ce("result",D,T*2)}const S=Jg;function _(x,N,k,I=S){const{context:m,zip215:v}=I,E=o.BYTES;x=ce("signature",x,2*E),N=ce("message",N),k=ce("publicKey",k,E),v!==void 0&&Rt("zip215",v),r&&(N=r(N));const A=Rr(x.slice(E,2*E));let B,O,T;try{B=e.fromHex(k,v),O=e.fromHex(x.slice(0,E),v),T=s.multiplyUnsafe(A)}catch{return!1}if(!v&&B.isSmallOrder())return!1;const D=h(m,O.toBytes(),B.toBytes(),N);return O.add(B.multiplyUnsafe(D)).subtract(T).clearCofactor().is0()}return s.precompute(8),{getPublicKey:g,sign:b,verify:_,utils:{getExtendedPublicKey:p,randomPrivateKey:()=>c(o.BYTES),precompute(x=8,N=e.BASE){return N.precompute(x,!1)}},Point:e}}function ew(e){const t={a:e.a,d:e.d,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r=e.Fp,n=yr(t.n,e.nBitLength,!0),s={Fp:r,Fn:n,uvRatio:e.uvRatio},o={hash:e.hash,randomBytes:e.randomBytes,adjustScalarBytes:e.adjustScalarBytes,domain:e.domain,prehash:e.prehash,mapToCurve:e.mapToCurve};return{CURVE:t,curveOpts:s,eddsaOpts:o}}function tw(e,t){return Object.assign({},t,{ExtendedPoint:t.Point,CURVE:e})}function rw(e){const{CURVE:t,curveOpts:r,eddsaOpts:n}=ew(e),s=Xg(t,r),o=Qg(s,n);return tw(e,o)}BigInt(0);const nw=BigInt(1),Ki=BigInt(2);BigInt(3);const sw=BigInt(5),ow=BigInt(8),ts={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:ow,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function iw(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),o=ts.p,a=e*e%o*e%o,c=ae(a,Ki,o)*a%o,f=ae(c,nw,o)*e%o,u=ae(f,sw,o)*f%o,l=ae(u,t,o)*u%o,w=ae(l,r,o)*l%o,d=ae(w,n,o)*w%o,p=ae(d,s,o)*d%o,g=ae(p,s,o)*d%o,h=ae(g,t,o)*u%o;return{pow_p_5_8:ae(h,Ki,o)*e%o,b2:a}}function aw(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const Zi=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function cw(e,t){const r=ts.p,n=ue(t*t*t,r),s=ue(n*n*t,r),o=iw(e*s).pow_p_5_8;let i=ue(e*n*o,r);const a=ue(t*i*i,r),c=i,f=ue(i*Zi,r),u=a===e,l=a===ue(-e,r),w=a===ue(-e*Zi,r);return u&&(i=c),(l||w)&&(i=f),Fg(i,r)&&(i=ue(-i,r)),{isValid:u||l,value:i}}const uw=yr(ts.p,void 0,!0),lw={...ts,Fp:uw,hash:Ug,adjustScalarBytes:aw,uvRatio:cw},fw=rw(lw),yu=32;function dw(e,t,r){return fw.verify(t,r instanceof Uint8Array?r:r.subarray(),e)}class hw{type="Ed25519";raw;constructor(t){this.raw=wu(t,yu)}toMultihash(){return Pt.digest(Ho(this))}toCID(){return F.createV1(114,this.toMultihash())}toString(){return de.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:kt(this.raw,t.raw)}verify(t,r){return dw(this.raw,r,t)}}function gu(e){return e=wu(e,yu),new hw(e)}function wu(e,t){if(e=Uint8Array.from(e??[]),e.length!==t)throw new Ke(`Key must be a Uint8Array of length ${t}, got ${e.length}`);return e}const zo=new Float32Array([-0]),Bt=new Uint8Array(zo.buffer);function pw(e,t,r){zo[0]=e,t[r]=Bt[0],t[r+1]=Bt[1],t[r+2]=Bt[2],t[r+3]=Bt[3]}function yw(e,t){return Bt[0]=e[t],Bt[1]=e[t+1],Bt[2]=e[t+2],Bt[3]=e[t+3],zo[0]}const Mo=new Float64Array([-0]),ve=new Uint8Array(Mo.buffer);function gw(e,t,r){Mo[0]=e,t[r]=ve[0],t[r+1]=ve[1],t[r+2]=ve[2],t[r+3]=ve[3],t[r+4]=ve[4],t[r+5]=ve[5],t[r+6]=ve[6],t[r+7]=ve[7]}function ww(e,t){return ve[0]=e[t],ve[1]=e[t+1],ve[2]=e[t+2],ve[3]=e[t+3],ve[4]=e[t+4],ve[5]=e[t+5],ve[6]=e[t+6],ve[7]=e[t+7],Mo[0]}const mw=BigInt(Number.MAX_SAFE_INTEGER),bw=BigInt(Number.MIN_SAFE_INTEGER);class Ae{lo;hi;constructor(t,r){this.lo=t|0,this.hi=r|0}toNumber(t=!1){if(!t&&this.hi>>>31>0){const r=~this.lo+1>>>0;let n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(t=!1){if(t)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const r=~this.lo+1>>>0;let n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(t=!1){return this.toBigInt(t).toString()}zzEncode(){const t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this}zzDecode(){const t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this}length(){const t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}static fromBigInt(t){if(t===0n)return Dt;if(t<mw&&t>bw)return this.fromNumber(Number(t));const r=t<0n;r&&(t=-t);let n=t>>32n,s=t-(n<<32n);return r&&(n=~n|0n,s=~s|0n,++s>Wi&&(s=0n,++n>Wi&&(n=0n))),new Ae(Number(s),Number(n))}static fromNumber(t){if(t===0)return Dt;const r=t<0;r&&(t=-t);let n=t>>>0,s=(t-n)/4294967296>>>0;return r&&(s=~s>>>0,n=~n>>>0,++n>4294967295&&(n=0,++s>4294967295&&(s=0))),new Ae(n,s)}static from(t){return typeof t=="number"?Ae.fromNumber(t):typeof t=="bigint"?Ae.fromBigInt(t):typeof t=="string"?Ae.fromBigInt(BigInt(t)):t.low!=null||t.high!=null?new Ae(t.low>>>0,t.high>>>0):Dt}}const Dt=new Ae(0,0);Dt.toBigInt=function(){return 0n};Dt.zzEncode=Dt.zzDecode=function(){return this};Dt.length=function(){return 1};const Wi=4294967296n;function xw(e){let t=0,r=0;for(let n=0;n<e.length;++n)r=e.charCodeAt(n),r<128?t+=1:r<2048?t+=2:(r&64512)===55296&&(e.charCodeAt(n+1)&64512)===56320?(++n,t+=4):t+=3;return t}function Ew(e,t,r){if(r-t<1)return"";let s;const o=[];let i=0,a;for(;t<r;)a=e[t++],a<128?o[i++]=a:a>191&&a<224?o[i++]=(a&31)<<6|e[t++]&63:a>239&&a<365?(a=((a&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,o[i++]=55296+(a>>10),o[i++]=56320+(a&1023)):o[i++]=(a&15)<<12|(e[t++]&63)<<6|e[t++]&63,i>8191&&((s??(s=[])).push(String.fromCharCode.apply(String,o)),i=0);return s!=null?(i>0&&s.push(String.fromCharCode.apply(String,o.slice(0,i))),s.join("")):String.fromCharCode.apply(String,o.slice(0,i))}function mu(e,t,r){const n=r;let s,o;for(let i=0;i<e.length;++i)s=e.charCodeAt(i),s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=s&63|128):(s&64512)===55296&&((o=e.charCodeAt(i+1))&64512)===56320?(s=65536+((s&1023)<<10)+(o&1023),++i,t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=s&63|128):(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=s&63|128);return r-n}function He(e,t){return RangeError(`index out of range: ${e.pos} + ${t??1} > ${e.len}`)}function Qr(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}class vw{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(t){this.buf=t,this.pos=0,this.len=t.length}uint32(){let t=4294967295;if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,He(this,10);return t}int32(){return this.uint32()|0}sint32(){const t=this.uint32();return t>>>1^-(t&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw He(this,4);return Qr(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw He(this,4);return Qr(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw He(this,4);const t=yw(this.buf,this.pos);return this.pos+=4,t}double(){if(this.pos+8>this.len)throw He(this,4);const t=ww(this.buf,this.pos);return this.pos+=8,t}bytes(){const t=this.uint32(),r=this.pos,n=this.pos+t;if(n>this.len)throw He(this,t);return this.pos+=t,r===n?new Uint8Array(0):this.buf.subarray(r,n)}string(){const t=this.bytes();return Ew(t,0,t.length)}skip(t){if(typeof t=="number"){if(this.pos+t>this.len)throw He(this,t);this.pos+=t}else do if(this.pos>=this.len)throw He(this);while((this.buf[this.pos++]&128)!==0);return this}skipType(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${t} at offset ${this.pos}`)}return this}readLongVarint(){const t=new Ae(0,0);let r=0;if(this.len-this.pos>4){for(;r<4;++r)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw He(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,t}if(this.len-this.pos>4){for(;r<5;++r)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;r<5;++r){if(this.pos>=this.len)throw He(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw He(this,8);const t=Qr(this.buf,this.pos+=4),r=Qr(this.buf,this.pos+=4);return new Ae(t,r)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const t=ja(this.buf,this.pos);return this.pos+=rt(t),t}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function Aw(e){return new vw(e instanceof Uint8Array?e:e.subarray())}function bu(e,t,r){const n=Aw(e);return t.decode(n,void 0,r)}function Sw(e){let n,s=8192;return function(i){if(i<1||i>4096)return $t(i);s+i>8192&&(n=$t(8192),s=0);const a=n.subarray(s,s+=i);return(s&7)!==0&&(s=(s|7)+1),a}}class vr{fn;len;next;val;constructor(t,r,n){this.fn=t,this.len=r,this.next=void 0,this.val=n}}function Bs(){}class _w{head;tail;len;next;constructor(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}}const Iw=Sw();function Bw(e){return globalThis.Buffer!=null?$t(e):Iw(e)}class Qs{len;head;tail;states;constructor(){this.len=0,this.head=new vr(Bs,0,0),this.tail=this.head,this.states=null}_push(t,r,n){return this.tail=this.tail.next=new vr(t,r,n),this.len+=r,this}uint32(t){return this.len+=(this.tail=this.tail.next=new $w((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this}int32(t){return t<0?this._push(en,10,Ae.fromNumber(t)):this.uint32(t)}sint32(t){return this.uint32((t<<1^t>>31)>>>0)}uint64(t){const r=Ae.fromBigInt(t);return this._push(en,r.length(),r)}uint64Number(t){return this._push(Ra,rt(t),t)}uint64String(t){return this.uint64(BigInt(t))}int64(t){return this.uint64(t)}int64Number(t){return this.uint64Number(t)}int64String(t){return this.uint64String(t)}sint64(t){const r=Ae.fromBigInt(t).zzEncode();return this._push(en,r.length(),r)}sint64Number(t){const r=Ae.fromNumber(t).zzEncode();return this._push(en,r.length(),r)}sint64String(t){return this.sint64(BigInt(t))}bool(t){return this._push(Cs,1,t?1:0)}fixed32(t){return this._push(Er,4,t>>>0)}sfixed32(t){return this.fixed32(t)}fixed64(t){const r=Ae.fromBigInt(t);return this._push(Er,4,r.lo)._push(Er,4,r.hi)}fixed64Number(t){const r=Ae.fromNumber(t);return this._push(Er,4,r.lo)._push(Er,4,r.hi)}fixed64String(t){return this.fixed64(BigInt(t))}sfixed64(t){return this.fixed64(t)}sfixed64Number(t){return this.fixed64Number(t)}sfixed64String(t){return this.fixed64String(t)}float(t){return this._push(pw,4,t)}double(t){return this._push(gw,8,t)}bytes(t){const r=t.length>>>0;return r===0?this._push(Cs,1,0):this.uint32(r)._push(Pw,r,t)}string(t){const r=xw(t);return r!==0?this.uint32(r)._push(mu,r,t):this._push(Cs,1,0)}fork(){return this.states=new _w(this),this.head=this.tail=new vr(Bs,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new vr(Bs,0,0),this.len=0),this}ldelim(){const t=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=t.next,this.tail=r,this.len+=n),this}finish(){let t=this.head.next;const r=Bw(this.len);let n=0;for(;t!=null;)t.fn(t.val,r,n),n+=t.len,t=t.next;return r}}function Cs(e,t,r){t[r]=e&255}function Cw(e,t,r){for(;e>127;)t[r++]=e&127|128,e>>>=7;t[r]=e}class $w extends vr{next;constructor(t,r){super(Cw,t,r),this.next=void 0}}function en(e,t,r){for(;e.hi!==0;)t[r++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=e.lo&127|128,e.lo=e.lo>>>7;t[r++]=e.lo}function Er(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function Pw(e,t,r){t.set(e,r)}globalThis.Buffer!=null&&(Qs.prototype.bytes=function(e){const t=e.length>>>0;return this.uint32(t),t>0&&this._push(kw,t,e),this},Qs.prototype.string=function(e){const t=globalThis.Buffer.byteLength(e);return this.uint32(t),t>0&&this._push(Uw,t,e),this});function kw(e,t,r){t.set(e,r)}function Uw(e,t,r){e.length<40?mu(e,t,r):t.utf8Write!=null?t.utf8Write(e,r):t.set(Fe(e),r)}function Nw(){return new Qs}function xu(e,t){const r=Nw();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}var Un;(function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"})(Un||(Un={}));function Eu(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function Tw(e){function t(s){if(e[s.toString()]==null)throw new Error("Invalid enum value");return e[s]}const r=function(o,i){const a=t(o);i.int32(a)},n=function(o){const i=o.int32();return t(i)};return Eu("enum",Un.VARINT,r,n)}function vu(e,t){return Eu("message",Un.LENGTH_DELIMITED,e,t)}var pe;(function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.secp256k1="secp256k1",e.ECDSA="ECDSA"})(pe||(pe={}));var eo;(function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.secp256k1=2]="secp256k1",e[e.ECDSA=3]="ECDSA"})(eo||(eo={}));(function(e){e.codec=()=>Tw(eo)})(pe||(pe={}));var ir;(function(e){let t;e.codec=()=>(t==null&&(t=vu((r,n,s={})=>{s.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),pe.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),s.lengthDelimited!==!1&&n.ldelim()},(r,n,s={})=>{const o={},i=n==null?r.len:r.pos+n;for(;r.pos<i;){const a=r.uint32();switch(a>>>3){case 1:{o.Type=pe.codec().decode(r);break}case 2:{o.Data=r.bytes();break}default:{r.skipType(a&7);break}}}return o})),t),e.encode=r=>xu(r,e.codec()),e.decode=(r,n)=>bu(r,e.codec(),n)})(ir||(ir={}));var Ji;(function(e){let t;e.codec=()=>(t==null&&(t=vu((r,n,s={})=>{s.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),pe.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),s.lengthDelimited!==!1&&n.ldelim()},(r,n,s={})=>{const o={},i=n==null?r.len:r.pos+n;for(;r.pos<i;){const a=r.uint32();switch(a>>>3){case 1:{o.Type=pe.codec().decode(r);break}case 2:{o.Data=r.bytes();break}default:{r.skipType(a&7);break}}}return o})),t),e.encode=r=>xu(r,e.codec()),e.decode=(r,n)=>bu(r,e.codec(),n)})(Ji||(Ji={}));class Yi extends Error{constructor(t="An error occurred while verifying a message"){super(t),this.name="VerificationError"}}class Ow extends Error{constructor(t="Missing Web Crypto API"){super(t),this.name="WebCryptoMissingError"}}const Xi={get(e=globalThis){const t=e.crypto;if(t?.subtle==null)throw new Ow("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return t}},Lw=eu;class Dw{type="RSA";jwk;_raw;_multihash;constructor(t,r){this.jwk=t,this._multihash=r}get raw(){return this._raw==null&&(this._raw=Mw(this.jwk)),this._raw}toMultihash(){return this._multihash}toCID(){return F.createV1(114,this._multihash)}toString(){return de.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:kt(this.raw,t.raw)}verify(t,r){return qw(this.jwk,r,t)}}const Rw=18,jw=1062,Fw=Uint8Array.from([48,13,6,9,42,134,72,134,247,13,1,1,1,5,0]);function zw(e){const t=Yn(e[1],{offset:0});return{kty:"RSA",n:ne(t[0],"base64url"),e:ne(t[1],"base64url")}}function Mw(e){if(e.n==null||e.e==null)throw new Ke("JWK was missing components");return Cr([Fw,Gc(Cr([Js(Fe(e.n,"base64url")),Js(Fe(e.e,"base64url"))]))]).subarray()}function Hw(e,t){if(e.byteLength>=jw)throw new Fc("Key size is too large");const r=Yn(e,{offset:0});return Vw(r,e,t)}function Vw(e,t,r){const n=zw(e);if(r==null){const s=Lw(ir.encode({Type:pe.RSA,Data:t}));r=Tr(Rw,s)}return new Dw(n,r)}async function qw(e,t,r){const n=await Xi.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return Xi.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,t,r instanceof Uint8Array?r:r.subarray())}class Au extends Wc{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,dg(t);const n=Ro(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(n.length>s?t.create().update(n).digest():n);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=t.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),nr(o)}update(t){return Pn(this),this.iHash.update(t),this}digestInto(t){Pn(this),tt(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:o,blockLen:i,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=o,t.blockLen=i,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Su=(e,t,r)=>new Au(e,t).update(r).digest();Su.create=(e,t)=>new Au(e,t);function Qi(e){e.lowS!==void 0&&Rt("lowS",e.lowS),e.prehash!==void 0&&Rt("prehash",e.prehash)}class Gw extends Error{constructor(t=""){super(t)}}const lt={Err:Gw,_tlv:{encode:(e,t)=>{const{Err:r}=lt;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length&1)throw new r("tlv.encode: unpadded data");const n=t.length/2,s=Xr(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");const o=n>127?Xr(s.length/2|128):"";return Xr(e)+o+s+t},decode(e,t){const{Err:r}=lt;let n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");const s=t[n++],o=!!(s&128);let i=0;if(!o)i=s;else{const c=s&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const f=t.subarray(n,n+c);if(f.length!==c)throw new r("tlv.decode: length bytes not complete");if(f[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const u of f)i=i<<8|u;if(n+=c,i<128)throw new r("tlv.decode(long): not minimal encoding")}const a=t.subarray(n,n+i);if(a.length!==i)throw new r("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+i)}}},_int:{encode(e){const{Err:t}=lt;if(e<Pr)throw new t("integer: negative integers are not allowed");let r=Xr(e);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){const{Err:t}=lt;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Xn(e)}},toSig(e){const{Err:t,_int:r,_tlv:n}=lt,s=ce("signature",e),{v:o,l:i}=n.decode(48,s);if(i.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,o),{v:f,l:u}=n.decode(2,c);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(f)}},hexFromSig(e){const{_tlv:t,_int:r}=lt,n=t.encode(2,r.encode(e.r)),s=t.encode(2,r.encode(e.s)),o=n+s;return t.encode(48,o)}},Pr=BigInt(0),kr=BigInt(1),Kw=BigInt(2),tn=BigInt(3),Zw=BigInt(4);function Ww(e,t,r){function n(s){const o=e.sqr(s),i=e.mul(o,s);return e.add(e.add(i,e.mul(s,t)),r)}return n}function _u(e,t,r){const{BYTES:n}=e;function s(o){let i;if(typeof o=="bigint")i=o;else{let a=ce("private key",o);if(t){if(!t.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(n);c.set(a,c.length-a.length),a=c}try{i=e.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof o}`)}}if(r&&(i=e.create(i)),!e.isValidNot0(i))throw new Error("invalid private key: out of range [1..N-1]");return i}return s}function Jw(e,t={}){const{Fp:r,Fn:n}=pu("weierstrass",e,t),{h:s,n:o}=e;Vr(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:i}=t;if(i&&(!r.is0(e.a)||typeof i.beta!="bigint"||typeof i.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(I,m,v){const{x:E,y:A}=m.toAffine(),B=r.toBytes(E);if(Rt("isCompressed",v),v){a();const O=!r.isOdd(A);return ht(Iu(O),B)}else return ht(Uint8Array.of(4),B,r.toBytes(A))}function f(I){tt(I);const m=r.BYTES,v=m+1,E=2*m+1,A=I.length,B=I[0],O=I.subarray(1);if(A===v&&(B===2||B===3)){const T=r.fromBytes(O);if(!r.isValid(T))throw new Error("bad point: is not on curve, wrong x");const D=w(T);let z;try{z=r.sqrt(D)}catch(G){const M=G instanceof Error?": "+G.message:"";throw new Error("bad point: is not on curve, sqrt error"+M)}a();const R=r.isOdd(z);return(B&1)===1!==R&&(z=r.neg(z)),{x:T,y:z}}else if(A===E&&B===4){const T=r.fromBytes(O.subarray(m*0,m*1)),D=r.fromBytes(O.subarray(m*1,m*2));if(!d(T,D))throw new Error("bad point: is not on curve");return{x:T,y:D}}else throw new Error(`bad point: got length ${A}, expected compressed=${v} or uncompressed=${E}`)}const u=t.toBytes||c,l=t.fromBytes||f,w=Ww(r,e.a,e.b);function d(I,m){const v=r.sqr(m),E=w(I);return r.eql(v,E)}if(!d(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const p=r.mul(r.pow(e.a,tn),Zw),g=r.mul(r.sqr(e.b),BigInt(27));if(r.is0(r.add(p,g)))throw new Error("bad curve params: a or b");function h(I,m,v=!1){if(!r.isValid(m)||v&&r.is0(m))throw new Error(`bad point coordinate ${I}`);return m}function b(I){if(!(I instanceof x))throw new Error("ProjectivePoint expected")}const S=kn((I,m)=>{const{px:v,py:E,pz:A}=I;if(r.eql(A,r.ONE))return{x:v,y:E};const B=I.is0();m==null&&(m=B?r.ONE:r.inv(A));const O=r.mul(v,m),T=r.mul(E,m),D=r.mul(A,m);if(B)return{x:r.ZERO,y:r.ZERO};if(!r.eql(D,r.ONE))throw new Error("invZ was invalid");return{x:O,y:T}}),_=kn(I=>{if(I.is0()){if(t.allowInfinityPoint&&!r.is0(I.py))return;throw new Error("bad point: ZERO")}const{x:m,y:v}=I.toAffine();if(!r.isValid(m)||!r.isValid(v))throw new Error("bad point: x or y not field elements");if(!d(m,v))throw new Error("bad point: equation left != right");if(!I.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function P(I,m,v,E,A){return v=new x(r.mul(v.px,I),v.py,v.pz),m=$r(E,m),v=$r(A,v),m.add(v)}class x{constructor(m,v,E){this.px=h("x",m),this.py=h("y",v,!0),this.pz=h("z",E),Object.freeze(this)}static fromAffine(m){const{x:v,y:E}=m||{};if(!m||!r.isValid(v)||!r.isValid(E))throw new Error("invalid affine point");if(m instanceof x)throw new Error("projective point not allowed");return r.is0(v)&&r.is0(E)?x.ZERO:new x(v,E,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){return uu(x,"pz",m)}static fromBytes(m){return tt(m),x.fromHex(m)}static fromHex(m){const v=x.fromAffine(l(ce("pointHex",m)));return v.assertValidity(),v}static fromPrivateKey(m){const v=_u(n,t.allowedPrivateKeyLengths,t.wrapPrivateKey);return x.BASE.multiply(v(m))}static msm(m,v){return hu(x,n,m,v)}precompute(m=8,v=!0){return k.setWindowSize(this,m),v||this.multiply(tn),this}_setWindowSize(m){this.precompute(m)}assertValidity(){_(this)}hasEvenY(){const{y:m}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(m)}equals(m){b(m);const{px:v,py:E,pz:A}=this,{px:B,py:O,pz:T}=m,D=r.eql(r.mul(v,T),r.mul(B,A)),z=r.eql(r.mul(E,T),r.mul(O,A));return D&&z}negate(){return new x(this.px,r.neg(this.py),this.pz)}double(){const{a:m,b:v}=e,E=r.mul(v,tn),{px:A,py:B,pz:O}=this;let T=r.ZERO,D=r.ZERO,z=r.ZERO,R=r.mul(A,A),se=r.mul(B,B),G=r.mul(O,O),M=r.mul(A,B);return M=r.add(M,M),z=r.mul(A,O),z=r.add(z,z),T=r.mul(m,z),D=r.mul(E,G),D=r.add(T,D),T=r.sub(se,D),D=r.add(se,D),D=r.mul(T,D),T=r.mul(M,T),z=r.mul(E,z),G=r.mul(m,G),M=r.sub(R,G),M=r.mul(m,M),M=r.add(M,z),z=r.add(R,R),R=r.add(z,R),R=r.add(R,G),R=r.mul(R,M),D=r.add(D,R),G=r.mul(B,O),G=r.add(G,G),R=r.mul(G,M),T=r.sub(T,R),z=r.mul(G,se),z=r.add(z,z),z=r.add(z,z),new x(T,D,z)}add(m){b(m);const{px:v,py:E,pz:A}=this,{px:B,py:O,pz:T}=m;let D=r.ZERO,z=r.ZERO,R=r.ZERO;const se=e.a,G=r.mul(e.b,tn);let M=r.mul(v,B),oe=r.mul(E,O),q=r.mul(A,T),Q=r.add(v,E),Y=r.add(B,O);Q=r.mul(Q,Y),Y=r.add(M,oe),Q=r.sub(Q,Y),Y=r.add(v,A);let ie=r.add(B,T);return Y=r.mul(Y,ie),ie=r.add(M,q),Y=r.sub(Y,ie),ie=r.add(E,A),D=r.add(O,T),ie=r.mul(ie,D),D=r.add(oe,q),ie=r.sub(ie,D),R=r.mul(se,Y),D=r.mul(G,q),R=r.add(D,R),D=r.sub(oe,R),R=r.add(oe,R),z=r.mul(D,R),oe=r.add(M,M),oe=r.add(oe,M),q=r.mul(se,q),Y=r.mul(G,Y),oe=r.add(oe,q),q=r.sub(M,q),q=r.mul(se,q),Y=r.add(Y,q),M=r.mul(oe,Y),z=r.add(z,M),M=r.mul(ie,Y),D=r.mul(Q,D),D=r.sub(D,M),M=r.mul(Q,oe),R=r.mul(ie,R),R=r.add(R,M),new x(D,z,R)}subtract(m){return this.add(m.negate())}is0(){return this.equals(x.ZERO)}multiply(m){const{endo:v}=t;if(!n.isValidNot0(m))throw new Error("invalid scalar: out of range");let E,A;const B=O=>k.wNAFCached(this,O,x.normalizeZ);if(v){const{k1neg:O,k1:T,k2neg:D,k2:z}=v.splitScalar(m),{p:R,f:se}=B(T),{p:G,f:M}=B(z);A=se.add(M),E=P(v.beta,R,G,O,D)}else{const{p:O,f:T}=B(m);E=O,A=T}return x.normalizeZ([E,A])[0]}multiplyUnsafe(m){const{endo:v}=t,E=this;if(!n.isValid(m))throw new Error("invalid scalar: out of range");if(m===Pr||E.is0())return x.ZERO;if(m===kr)return E;if(k.hasPrecomputes(this))return this.multiply(m);if(v){const{k1neg:A,k1:B,k2neg:O,k2:T}=v.splitScalar(m),{p1:D,p2:z}=Zg(x,E,B,T);return P(v.beta,D,z,A,O)}else return k.wNAFCachedUnsafe(E,m)}multiplyAndAddUnsafe(m,v,E){const A=this.multiplyUnsafe(v).add(m.multiplyUnsafe(E));return A.is0()?void 0:A}toAffine(m){return S(this,m)}isTorsionFree(){const{isTorsionFree:m}=t;return s===kr?!0:m?m(x,this):k.wNAFCachedUnsafe(this,o).is0()}clearCofactor(){const{clearCofactor:m}=t;return s===kr?this:m?m(x,this):this.multiplyUnsafe(s)}toBytes(m=!0){return Rt("isCompressed",m),this.assertValidity(),u(x,this,m)}toRawBytes(m=!0){return this.toBytes(m)}toHex(m=!0){return sr(this.toBytes(m))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}x.BASE=new x(e.Gx,e.Gy,r.ONE),x.ZERO=new x(r.ZERO,r.ONE,r.ZERO),x.Fp=r,x.Fn=n;const N=n.BITS,k=du(x,t.endo?Math.ceil(N/2):N);return x}function Iu(e){return Uint8Array.of(e?2:3)}function Yw(e,t,r={}){Vr(t,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=t.randomBytes||Yc,s=t.hmac||((E,...A)=>Su(t.hash,E,ht(...A))),{Fp:o,Fn:i}=e,{ORDER:a,BITS:c}=i;function f(E){const A=a>>kr;return E>A}function u(E){return f(E)?i.neg(E):E}function l(E,A){if(!i.isValidNot0(A))throw new Error(`invalid signature ${E}: out of range 1..CURVE.n`)}class w{constructor(A,B,O){l("r",A),l("s",B),this.r=A,this.s=B,O!=null&&(this.recovery=O),Object.freeze(this)}static fromCompact(A){const B=i.BYTES,O=ce("compactSignature",A,B*2);return new w(i.fromBytes(O.subarray(0,B)),i.fromBytes(O.subarray(B,B*2)))}static fromDER(A){const{r:B,s:O}=lt.toSig(ce("DER",A));return new w(B,O)}assertValidity(){}addRecoveryBit(A){return new w(this.r,this.s,A)}recoverPublicKey(A){const B=o.ORDER,{r:O,s:T,recovery:D}=this;if(D==null||![0,1,2,3].includes(D))throw new Error("recovery id invalid");if(a*Kw<B&&D>1)throw new Error("recovery id is ambiguous for h>1 curve");const R=D===2||D===3?O+a:O;if(!o.isValid(R))throw new Error("recovery id 2 or 3 invalid");const se=o.toBytes(R),G=e.fromHex(ht(Iu((D&1)===0),se)),M=i.inv(R),oe=_(ce("msgHash",A)),q=i.create(-oe*M),Q=i.create(T*M),Y=e.BASE.multiplyUnsafe(q).add(G.multiplyUnsafe(Q));if(Y.is0())throw new Error("point at infinify");return Y.assertValidity(),Y}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,i.neg(this.s),this.recovery):this}toBytes(A){if(A==="compact")return ht(i.toBytes(this.r),i.toBytes(this.s));if(A==="der")return Do(lt.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return sr(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return sr(this.toBytes("compact"))}}const d=_u(i,r.allowedPrivateKeyLengths,r.wrapPrivateKey),p={isValidPrivateKey(E){try{return d(E),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const E=a;return qg(n(cu(E)),E)},precompute(E=8,A=e.BASE){return A.precompute(E,!1)}};function g(E,A=!0){return e.fromPrivateKey(E).toBytes(A)}function h(E){if(typeof E=="bigint")return!1;if(E instanceof e)return!0;const B=ce("key",E).length,O=o.BYTES,T=O+1,D=2*O+1;if(!(r.allowedPrivateKeyLengths||i.BYTES===T))return B===T||B===D}function b(E,A,B=!0){if(h(E)===!0)throw new Error("first arg must be private key");if(h(A)===!1)throw new Error("second arg must be public key");return e.fromHex(A).multiply(d(E)).toBytes(B)}const S=t.bits2int||function(E){if(E.length>8192)throw new Error("input is too large");const A=Xn(E),B=E.length*8-c;return B>0?A>>BigInt(B):A},_=t.bits2int_modN||function(E){return i.create(S(E))},P=es(c);function x(E){return Qt("num < 2^"+c,E,Pr,P),i.toBytes(E)}function N(E,A,B=k){if(["recovered","canonical"].some(Q=>Q in B))throw new Error("sign() legacy options not supported");const{hash:O}=t;let{lowS:T,prehash:D,extraEntropy:z}=B;T==null&&(T=!0),E=ce("msgHash",E),Qi(B),D&&(E=ce("prehashed msgHash",O(E)));const R=_(E),se=d(A),G=[x(se),x(R)];if(z!=null&&z!==!1){const Q=z===!0?n(o.BYTES):z;G.push(ce("extraEntropy",Q))}const M=ht(...G),oe=R;function q(Q){const Y=S(Q);if(!i.isValidNot0(Y))return;const ie=i.inv(Y),Oe=e.BASE.multiply(Y).toAffine(),Le=i.create(Oe.x);if(Le===Pr)return;const De=i.create(ie*i.create(oe+Le*se));if(De===Pr)return;let We=(Oe.x===Le?0:2)|Number(Oe.y&kr),gt=De;return T&&f(De)&&(gt=u(De),We^=1),new w(Le,gt,We)}return{seed:M,k2sig:q}}const k={lowS:t.lowS,prehash:!1},I={lowS:t.lowS,prehash:!1};function m(E,A,B=k){const{seed:O,k2sig:T}=N(E,A,B);return Og(t.hash.outputLen,i.BYTES,s)(O,T)}e.BASE.precompute(8);function v(E,A,B,O=I){const T=E;A=ce("msgHash",A),B=ce("publicKey",B),Qi(O);const{lowS:D,prehash:z,format:R}=O;if("strict"in O)throw new Error("options.strict was renamed to lowS");if(R!==void 0&&!["compact","der","js"].includes(R))throw new Error('format must be "compact", "der" or "js"');const se=typeof T=="string"||Lo(T),G=!se&&!R&&typeof T=="object"&&T!==null&&typeof T.r=="bigint"&&typeof T.s=="bigint";if(!se&&!G)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let M,oe;try{if(G)if(R===void 0||R==="js")M=new w(T.r,T.s);else throw new Error("invalid format");if(se){try{R!=="compact"&&(M=w.fromDER(T))}catch(gt){if(!(gt instanceof lt.Err))throw gt}!M&&R!=="der"&&(M=w.fromCompact(T))}oe=e.fromHex(B)}catch{return!1}if(!M||D&&M.hasHighS())return!1;z&&(A=t.hash(A));const{r:q,s:Q}=M,Y=_(A),ie=i.inv(Q),Oe=i.create(Y*ie),Le=i.create(q*ie),De=e.BASE.multiplyUnsafe(Oe).add(oe.multiplyUnsafe(Le));return De.is0()?!1:i.create(De.x)===q}return Object.freeze({getPublicKey:g,getSharedSecret:b,sign:m,verify:v,utils:p,Point:e,Signature:w})}function Xw(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r=e.Fp,n=yr(t.n,e.nBitLength),s={Fp:r,Fn:n,allowedPrivateKeyLengths:e.allowedPrivateKeyLengths,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,wrapPrivateKey:e.wrapPrivateKey,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:s}}function Qw(e){const{CURVE:t,curveOpts:r}=Xw(e),n={hash:e.hash,hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:r,ecdsaOpts:n}}function em(e,t){return Object.assign({},t,{ProjectivePoint:t.Point,CURVE:e})}function tm(e){const{CURVE:t,curveOpts:r,ecdsaOpts:n}=Qw(e),s=Jw(t,r),o=Yw(s,n,r);return em(e,o)}function rm(e,t){const r=n=>tm({...e,hash:n});return{...r(t),create:r}}const Nn={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const nm=BigInt(1),to=BigInt(2),ea=(e,t)=>(e+t/to)/t;function sm(e){const t=Nn.p,r=BigInt(3),n=BigInt(6),s=BigInt(11),o=BigInt(22),i=BigInt(23),a=BigInt(44),c=BigInt(88),f=e*e*e%t,u=f*f*e%t,l=ae(u,r,t)*u%t,w=ae(l,r,t)*u%t,d=ae(w,to,t)*f%t,p=ae(d,s,t)*d%t,g=ae(p,o,t)*p%t,h=ae(g,a,t)*g%t,b=ae(h,c,t)*h%t,S=ae(b,a,t)*g%t,_=ae(S,r,t)*u%t,P=ae(_,i,t)*p%t,x=ae(P,n,t)*f%t,N=ae(x,to,t);if(!ro.eql(ro.sqr(N),e))throw new Error("Cannot find square root");return N}const ro=yr(Nn.p,void 0,void 0,{sqrt:sm}),Tn=rm({...Nn,Fp:ro,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Nn.n,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-nm*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,i=BigInt("0x100000000000000000000000000000000"),a=ea(o*e,t),c=ea(-n*e,t);let f=ue(e-a*r-c*s,t),u=ue(-a*n-c*o,t);const l=f>i,w=u>i;if(l&&(f=t-f),w&&(u=t-u),f>i||u>i)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:f,k2neg:w,k2:u}}}},eu);function om(e){return e==null?!1:typeof e.then=="function"&&typeof e.catch=="function"&&typeof e.finally=="function"}function im(e,t,r){const n=go.digest(r instanceof Uint8Array?r:r.subarray());if(om(n))return n.then(({digest:s})=>Tn.verify(t,s,e)).catch(s=>{throw new Yi(String(s))});try{return Tn.verify(t,n.digest,e)}catch(s){throw new Yi(String(s))}}class am{type="secp256k1";raw;_key;constructor(t){this._key=um(t),this.raw=cm(this._key)}toMultihash(){return Pt.digest(Ho(this))}toCID(){return F.createV1(114,this.toMultihash())}toString(){return de.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:kt(this.raw,t.raw)}verify(t,r){return im(this._key,r,t)}}function Bu(e){return new am(e)}function cm(e){return Tn.ProjectivePoint.fromHex(e).toRawBytes(!0)}function um(e){try{return Tn.ProjectivePoint.fromHex(e),e}catch(t){throw new Fc(String(t))}}function lm(e,t){const{Type:r,Data:n}=ir.decode(e),s=n??new Uint8Array;switch(r){case pe.RSA:return Hw(s,t);case pe.Ed25519:return gu(s);case pe.secp256k1:return Bu(s);case pe.ECDSA:return Kc(s);default:throw new zc}}function fm(e){const{Type:t,Data:r}=ir.decode(e.digest),n=r??new Uint8Array;switch(t){case pe.Ed25519:return gu(n);case pe.secp256k1:return Bu(n);case pe.ECDSA:return Kc(n);default:throw new zc}}function Ho(e){return ir.encode({Type:pe[e.type],Data:e.raw})}const Cu=Symbol.for("nodejs.util.inspect.custom"),dm=114;class Vo{type;multihash;publicKey;string;constructor(t){this.type=t.type,this.multihash=t.multihash,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}[jc]=!0;toString(){return this.string==null&&(this.string=de.encode(this.multihash.bytes).slice(1)),this.string}toMultihash(){return this.multihash}toCID(){return F.createV1(dm,this.multihash)}toJSON(){return this.toString()}equals(t){if(t==null)return!1;if(t instanceof Uint8Array)return kt(this.multihash.bytes,t);if(typeof t=="string")return this.toString()===t;if(t?.toMultihash()?.bytes!=null)return kt(this.multihash.bytes,t.toMultihash().bytes);throw new Error("not valid Id")}[Cu](){return`PeerId(${this.toString()})`}}class hm extends Vo{type="RSA";publicKey;constructor(t){super({...t,type:"RSA"}),this.publicKey=t.publicKey}}class pm extends Vo{type="Ed25519";publicKey;constructor(t){super({...t,type:"Ed25519"}),this.publicKey=t.publicKey}}class ym extends Vo{type="secp256k1";publicKey;constructor(t){super({...t,type:"secp256k1"}),this.publicKey=t.publicKey}}const gm=2336;class $u{type="url";multihash;publicKey;url;constructor(t){this.url=t.toString(),this.multihash=Pt.digest(Fe(this.url))}[Cu](){return`PeerId(${this.url})`}[jc]=!0;toString(){return this.toCID().toString()}toMultihash(){return this.multihash}toCID(){return F.createV1(gm,this.toMultihash())}toJSON(){return this.toString()}equals(t){return t==null?!1:(t instanceof Uint8Array&&(t=ne(t)),t.toString()===this.toString())}}const wm=114,ta=2336;function $e(e,t){let r;if(e.charAt(0)==="1"||e.charAt(0)==="Q")r=po(de.decode(`z${e}`));else{if(e.startsWith("k51qzi5uqu5")||e.startsWith("kzwfwjn5ji4")||e.startsWith("k2k4r8")||e.startsWith("bafz"))return mm(F.parse(e));throw new Ke('Please pass a multibase decoder for strings that do not start with "1" or "Q"')}return Pu(r)}function Pu(e){if(xm(e))return new hm({multihash:e});if(bm(e))try{const t=fm(e);if(t.type==="Ed25519")return new pm({multihash:e,publicKey:t});if(t.type==="secp256k1")return new ym({multihash:e,publicKey:t})}catch{const r=ne(e.digest);return new $u(new URL(r))}throw new Ry("Supplied PeerID Multihash is invalid")}function mm(e){if(e?.multihash==null||e.version==null||e.version===1&&e.code!==wm&&e.code!==ta)throw new Dy("Supplied PeerID CID is invalid");if(e.code===ta){const t=ne(e.multihash.digest);return new $u(new URL(t))}return Pu(e.multihash)}function bm(e){return e.code===Pt.code}function xm(e){return e.code===go.code}function ku(e){return async function(r={}){const n=await e.post("bitswap/stat",{searchParams:C(r),signal:r.signal,headers:r.headers});return Em(await n.json())}}function Em(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist??[]).map(t=>F.parse(t["/"])),peers:(e.Peers??[]).map(t=>$e(t)),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}function vm(e){return async function(r,n={}){return((await(await e.post("bitswap/wantlist",{signal:n.signal,searchParams:C({...n,peer:r.toString()}),headers:n.headers})).json()).Keys??[]).map(o=>F.parse(o["/"]))}}function Am(e){return async function(r={}){return((await(await e.post("bitswap/wantlist",{signal:r.signal,searchParams:C(r),headers:r.headers})).json()).Keys??[]).map(s=>F.parse(s["/"]))}}function Sm(e){return{wantlist:Am(e),wantlistForPeer:vm(e),stat:ku(e)}}function Uu(e){return async function(r,n={}){const s=await e.post("block/get",{signal:n.signal,searchParams:C({arg:r.toString(),...n}),headers:n.headers});return new Uint8Array(await s.arrayBuffer())}}function _m(e){return async function t(r,n={}){const s=new AbortController,o=yt([s.signal,n.signal]);let i;try{i=await(await e.post("block/put",{signal:o,searchParams:C(n),...await Nt([r],s,n.headers)})).json()}catch(a){if(n.format==="dag-pb")return await t(r,{...n,format:"protobuf"});if(n.format==="dag-cbor")return await t(r,{...n,format:"cbor"});throw a}finally{o.clear()}return F.parse(i.Key)}}function Im(e){return async function*(r,n={}){Array.isArray(r)||(r=[r]);const s=await e.post("block/rm",{signal:n.signal,searchParams:C({arg:r.map(o=>o.toString()),"stream-channels":!0,...n}),headers:n.headers});for await(const o of s.ndjson())yield Bm(o)}}function Bm(e){const t={cid:F.parse(e.Hash)};return e.Error!=null&&(t.error=new Error(e.Error)),t}function Cm(e){return async function(r,n={}){const o=await(await e.post("block/stat",{signal:n.signal,searchParams:C({arg:r.toString(),...n}),headers:n.headers})).json();return{cid:F.parse(o.Key),size:o.Size}}}function $m(e){return{get:Uu(e),put:_m(e),rm:Im(e),stat:Cm(e)}}function Pm(e){return async function(r,n={}){const s=await e.post("bootstrap/add",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers}),{Peers:o}=await s.json();return{Peers:o.map(i=>Ie(i))}}}function km(e){return async function(r={}){const n=await e.post("bootstrap/list",{signal:r.signal,searchParams:C(r),headers:r.headers}),{Peers:s}=await n.json();return{Peers:s.map(o=>Ie(o))}}}function Um(e){return async function(r,n={}){const s=await e.post("bootstrap/rm",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers}),{Peers:o}=await s.json();return{Peers:o.map(i=>Ie(i))}}}function Nm(e){return{add:Pm(e),list:km(e),rm:Um(e)}}function Tm(e){return async function*(r,n={}){yield*(await e.post("cat",{signal:n.signal,searchParams:C({arg:r.toString(),...n}),headers:n.headers})).iterator()}}function Om(e){return async function(r={}){return(await e.post("commands",{signal:r.signal,searchParams:C(r),headers:r.headers})).json()}}function Lm(e){return async function(r={}){return await(await e.post("config/show",{signal:r.signal,searchParams:C({...r}),headers:r.headers})).json()}}function Dm(e){return async function(r,n={}){if(r==null)throw new Error("key argument is required");return(await(await e.post("config",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers})).json()).Value}}function Rm(e){return async function(r,n={}){const o=await(await e.post("config/profile/apply",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers})).json();return{original:o.OldCfg,updated:o.NewCfg}}}function jm(e){return{apply:Rm(e)}}function Fm(e){return async function(r,n={}){const s=new AbortController,o=yt([s.signal,n.signal]);try{await(await e.post("config/replace",{signal:o,searchParams:C(n),...await Nt([Fe(JSON.stringify(r))],s,n.headers)})).text()}finally{o.clear()}}}function zm(e){return async function(r,n,s={}){if(typeof r!="string")throw new Error("Invalid key type");const o={...s,...Mm(r,n)};await(await e.post("config",{signal:s.signal,searchParams:C(o),headers:s.headers})).text()}}function Mm(e,t){switch(typeof t){case"boolean":return{arg:[e,t.toString()],bool:!0};case"string":return{arg:[e,t]};default:return{arg:[e,JSON.stringify(t)],json:!0}}}function Hm(e){return{getAll:Lm(e),get:Dm(e),set:zm(e),replace:Fm(e),profiles:jm(e)}}function Vm(e){return async function*(r,n={}){yield*(await e.post("dag/export",{signal:n.signal,searchParams:C({arg:r.toString()}),headers:n.headers})).iterator()}}function qm(e){return e[Symbol.asyncIterator]!=null}function Gm(e){if(qm(e))return(async()=>{for await(const t of e)return t})();for(const t of e)return t}async function*ra(e,t,r,n,s){const o=async f=>{const u=await r.getCodec(f.code),l=await n(f,s);return u.decode(l)},i=t.split("/").filter(Boolean);let a=await o(e),c=e;for(;i.length>0;){const f=i.shift();if(f==null)throw et(new Error(`Could not resolve path "${t}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(a,f))a=a[f],yield{value:a,remainderPath:i.join("/")};else throw et(new Error(`no link named "${f}" under ${c}`),"ERR_NO_LINK");const u=F.asCID(a);u!=null&&(c=u,a=await o(a))}yield{value:a,remainderPath:""}}function Km(e,t){const r=Uu(e);return async function(s,o={}){if(o.path!=null){const u=o.localResolve===!0?await Gm(ra(s,o.path,t,r,o)):await Jn(ra(s,o.path,t,r,o));if(u==null)throw et(new Error("Not found"),"ERR_NOT_FOUND");return u}const i=await t.getCodec(s.code),a=await r(s,o);return{value:i.decode(a),remainderPath:""}}}function Zm(e){return async function*(r,n={}){const s=new AbortController,o=yt([s.signal,n.signal]);try{const{headers:i,body:a}=await Nt(r,s,n.headers),c=await e.post("dag/import",{signal:o,headers:i,body:a,searchParams:C({"pin-roots":n.pinRoots})});for await(const{Root:f}of c.ndjson())if(f!==void 0){const{Cid:{"/":u},PinErrorMsg:l}=f;yield{root:{cid:F.parse(u),pinErrorMsg:l}}}}finally{o.clear()}}}function Wm(e,t){return async function(n,s={}){const o={storeCodec:"dag-cbor",hashAlg:"sha2-256",...s};let i;if(o.inputCodec!=null){if(!(n instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");i=n}else i=(await t.getCodec(o.storeCodec??"dag-cbor")).encode(n),o.inputCodec=o.storeCodec;const a=new AbortController,c=yt([a.signal,o.signal]);try{const u=await(await e.post("dag/put",{timeout:o.timeout,signal:c,searchParams:C(o),...await Nt([i],a,o.headers)})).json();return F.parse(u.Cid["/"])}finally{c.clear()}}}function Jm(e){return async function(r,n={}){const o=await(await e.post("dag/resolve",{signal:n.signal,searchParams:C({arg:`${r}${n.path!=null?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers})).json();return{cid:F.parse(o.Cid["/"]),remainderPath:o.RemPath}}}function Ym(e,t){return{export:Vm(e),get:Km(e,t),import:Zm(e),put:Wm(e,t),resolve:Jm(e)}}const Xm=0,Qm=1,eb=2,tb=3,rb=4,nb=5,sb=6,ob=7;function gr(e){if(e.Type===Xm)return{name:"SENDING_QUERY",type:e.Type};if(e.Type===Qm)return{from:$e(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses??[]).map(({ID:t,Addrs:r})=>({id:$e(t),multiaddrs:r.map(n=>Ie(n)),protocols:[]})),providers:(e.Responses??[]).map(({ID:t,Addrs:r})=>({id:$e(t),multiaddrs:r.map(n=>Ie(n)),protocols:[]}))};if(e.Type===eb){let t={id:e.ID??$e(e.ID),multiaddrs:[],protocols:[]};return e.Responses?.length>0&&(t={id:$e(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map(r=>Ie(r)),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:t}}if(e.Type===tb)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(e.Type===rb)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map(({ID:t,Addrs:r})=>({id:$e(t),multiaddrs:r.map(n=>Ie(n)),protocols:[]}))};if(e.Type===nb)return{name:"VALUE",type:e.Type,value:Fe(e.Extra,"base64pad")};if(e.Type===sb){const t=e.Responses.map(({ID:r})=>$e(r));if(t.length===0)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:t[0]}}if(e.Type===ob)return{name:"DIALING_PEER",type:e.Type,peer:$e(e.ID)};throw new Error("Unknown DHT event type")}function ib(e){return async function*(r,n={}){const s=await e.post("dht/query",{signal:n.signal,searchParams:C({arg:r.toString(),...n}),headers:n.headers});for await(const o of s.ndjson())yield gr(o)}}var na;(function(e){e[e.SENDING_QUERY=0]="SENDING_QUERY",e[e.PEER_RESPONSE=1]="PEER_RESPONSE",e[e.FINAL_PEER=2]="FINAL_PEER",e[e.QUERY_ERROR=3]="QUERY_ERROR",e[e.PROVIDER=4]="PROVIDER",e[e.VALUE=5]="VALUE",e[e.ADDING_PEER=6]="ADDING_PEER",e[e.DIALING_PEER=7]="DIALING_PEER"})(na||(na={}));var sa;(function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"})(sa||(sa={}));function ab(e){return{query:ib(e)}}function cb(e){return async function(r={}){return(await e.post("diag/cmds",{signal:r.signal,searchParams:C(r),headers:r.headers})).json()}}function ub(e){return async function(r={}){return(await e.post("diag/net",{signal:r.signal,searchParams:C(r),headers:r.headers})).json()}}function lb(e){return async function(r={}){return(await e.post("diag/sys",{signal:r.signal,searchParams:C(r),headers:r.headers})).json()}}function fb(e){return{cmds:cb(e),net:ub(e),sys:lb(e)}}function db(e){return async function(r,n,s={}){const o=Array.isArray(r)?r:[r];await(await e.post("files/cp",{signal:s.signal,searchParams:C({arg:o.concat(n).map(a=>F.asCID(a)!=null?`/ipfs/${a}`:a),...s}),headers:s.headers})).text()}}function hb(e){return async function(r,n={}){if(typeof r!="string")throw new Error("ipfs.files.flush requires a path");const o=await(await e.post("files/flush",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers})).json();return F.parse(o.Cid)}}function no(e){const t=we(e);return Object.prototype.hasOwnProperty.call(t,"mode")&&(t.mode=parseInt(t.mode,8)),Object.prototype.hasOwnProperty.call(t,"mtime")&&(t.mtime={secs:t.mtime,nsecs:t.mtimeNsecs??0},delete t.mtimeNsecs),t}function pb(e){return async function*(r,n={}){if(r==null)throw new Error("ipfs.files.ls requires a path");const s=await e.post("files/ls",{signal:n.signal,searchParams:C({arg:F.asCID(r)!=null?`/ipfs/${r}`:r,long:!0,...n,stream:!0}),headers:n.headers});for await(const o of s.ndjson())if("Entries"in o)for(const i of o.Entries??[])yield oa(no(i));else yield oa(no(o))}}function oa(e){return e.hash!=null&&(e.cid=F.parse(e.hash)),delete e.hash,e.type=e.type===1?"directory":"file",e}function yb(e){return async function(r,n={}){await(await e.post("files/mkdir",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers})).text()}}function gb(e){return async function(r,n,s={}){Array.isArray(r)||(r=[r]),await(await e.post("files/mv",{signal:s.signal,searchParams:C({arg:r.concat(n),...s}),headers:s.headers})).text()}}function wb(e){if(bb(e))return(async function*(){const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}})();if(mb(e))return e;throw new Error("unknown stream")}function mb(e){return e[Symbol.asyncIterator]!=null}function bb(e){return typeof e?.getReader=="function"}function xb(e){return async function*(r,n={}){const s=await e.post("files/read",{signal:n.signal,searchParams:C({arg:r,count:n.length,...n}),headers:n.headers});if(s.body==null)throw new Error("Invalid response body");yield*wb(s.body)}}function Eb(e){return async function(r,n={}){const s=await e.post("files/rm",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers}),o=await s.text();if(o!==""){const i=new ky(s);throw i.message=o,i}}}function Nu(e){return async function(r,n={}){const o=await(await e.post("files/stat",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers})).json();return o.WithLocality=o.WithLocality??!1,vb(no(o))}}function vb(e){return e.cid=F.parse(e.hash),delete e.hash,e}function Ab(e){return async function(r,n,s={}){const o=new AbortController,i=yt([o.signal,s.signal]);try{await(await e.post("files/write",{signal:i,searchParams:C({arg:r,streamChannels:!0,count:s.length,...s}),...await Nt([{content:n,path:"arg",mode:To(s.mode),mtime:Wn(s.mtime)}],o,s.headers)})).text()}finally{i.clear()}}}function Sb(e){return{cp:db(e),flush:hb(e),ls:pb(e),mkdir:yb(e),mv:gb(e),read:xb(e),rm:Eb(e),stat:Nu(e),write:Ab(e)}}function _b(e){return function(){const r=new URL(e.opts.base??"");return{host:r.hostname,port:r.port,protocol:r.protocol,pathname:r.pathname,"api-path":r.pathname}}}function Ib(e){return async function*(r,n={}){const s={arg:`${r instanceof Uint8Array?F.decode(r):r}`,...n};yield*(await e.post("get",{signal:n.signal,searchParams:C(s),headers:n.headers})).iterator()}}function Tu(e){return async function(r={}){const s=await(await e.post("id",{signal:r.signal,searchParams:C({arg:r.peerId!=null?r.peerId.toString():void 0,...r}),headers:r.headers})).json(),o={...we(s)};return o.id=$e(o.id),o.addresses!=null&&(o.addresses=o.addresses.map(i=>Ie(i))),o}}function Bb(e){const t=Tu(e);return async function(n={}){try{return!!(await t(n))?.addresses?.length}catch{return!1}}}const Cb={type:"ed25519"};function $b(e){return async function(r,n=Cb){const o=await(await e.post("key/gen",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers})).json();return we(o)}}function Pb(e){return async function(r,n,s,o={}){const a=await(await e.post("key/import",{signal:o.signal,searchParams:C({arg:r,pem:n,password:s,...o}),headers:o.headers})).json();return we(a)}}function kb(e){return async function(r={}){return((await(await e.post("key/list",{signal:r.signal,searchParams:C(r),headers:r.headers})).json()).Keys??[]).map(o=>we(o))}}function Ub(e){return async function(r,n,s={}){const o=await e.post("key/rename",{signal:s.signal,searchParams:C({arg:[r,n],...s}),headers:s.headers});return we(await o.json())}}function Nb(e){return async function(r,n={}){const o=await(await e.post("key/rm",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers})).json();return we(o.Keys[0])}}function Tb(e){return{gen:$b(e),import:Pb(e),list:kb(e),rename:Ub(e),rm:Nb(e)}}const ar=1e3,cr=ar*60,ur=cr*60,jt=ur*24,Ob=jt*7,Lb=jt*365.25;function Ou(e,t){try{if(typeof e=="string"&&e.length>0)return Db(e);if(typeof e=="number"&&isFinite(e))return t?.long?jb(e):Rb(e);throw new Error("Value is not a string or number.")}catch(r){const n=Fb(r)?`${r.message}. value=${JSON.stringify(e)}`:"An unknown error has occured.";throw new Error(n)}}function Db(e){if(e=String(e),e.length>100)throw new Error("Value exceeds the maximum length of 100 characters.");const t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return NaN;const r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Lb;case"weeks":case"week":case"w":return r*Ob;case"days":case"day":case"d":return r*jt;case"hours":case"hour":case"hrs":case"hr":case"h":return r*ur;case"minutes":case"minute":case"mins":case"min":case"m":return r*cr;case"seconds":case"second":case"secs":case"sec":case"s":return r*ar;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:throw new Error(`The unit ${n} was matched, but no matching case exists.`)}}function Rb(e){const t=Math.abs(e);return t>=jt?`${Math.round(e/jt)}d`:t>=ur?`${Math.round(e/ur)}h`:t>=cr?`${Math.round(e/cr)}m`:t>=ar?`${Math.round(e/ar)}s`:`${e}ms`}function jb(e){const t=Math.abs(e);return t>=jt?rn(e,t,jt,"day"):t>=ur?rn(e,t,ur,"hour"):t>=cr?rn(e,t,cr,"minute"):t>=ar?rn(e,t,ar,"second"):`${e} ms`}function rn(e,t,r,n){const s=t>=r*1.5;return`${Math.round(e/r)} ${n}${s?"s":""}`}function Fb(e){return typeof e=="object"&&e!==null&&"message"in e}function zb(e){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=s,r.enabled=i,r.humanize=Ou,r.destroy=f,Object.keys(e).forEach(u=>{r[u]=e[u]}),r.names=[],r.skips=[],r.formatters={};function t(u){let l=0;for(let w=0;w<u.length;w++)l=(l<<5)-l+u.charCodeAt(w),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=t;function r(u){let l,w=null,d,p;function g(...h){if(!g.enabled)return;const b=g,S=Number(new Date),_=S-(l||S);b.diff=_,b.prev=l,b.curr=S,l=S,h[0]=r.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");let P=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,(N,k)=>{if(N==="%%")return"%";P++;const I=r.formatters[k];if(typeof I=="function"){const m=h[P];N=I.call(b,m),h.splice(P,1),P--}return N}),r.formatArgs.call(b,h),(b.log||r.log).apply(b,h)}return g.namespace=u,g.useColors=r.useColors(),g.color=r.selectColor(u),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>w!==null?w:(d!==r.namespaces&&(d=r.namespaces,p=r.enabled(u)),p),set:h=>{w=h}}),typeof r.init=="function"&&r.init(g),g}function n(u,l){const w=r(this.namespace+(typeof l>"u"?":":l)+u);return w.log=this.log,w}function s(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let l;const w=(typeof u=="string"?u:"").split(/[\s,]+/),d=w.length;for(l=0;l<d;l++)w[l]&&(u=w[l].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.substr(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function o(){const u=[...r.names.map(a),...r.skips.map(a).map(l=>"-"+l)].join(",");return r.enable(""),u}function i(u){if(u[u.length-1]==="*")return!0;let l,w;for(l=0,w=r.skips.length;l<w;l++)if(r.skips[l].test(u))return!1;for(l=0,w=r.names.length;l<w;l++)if(r.names[l].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack??u.message:u}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.setupFormatters(r.formatters),r.enable(r.load()),r}var Mb={};const On=Wb(),Hb=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Vb(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/(edge|trident)\/(\d+)/)!=null?!1:typeof document<"u"&&document.documentElement?.style?.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/firefox\/(\d+)/)!=null&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/applewebkit\/(\d+)/)}function qb(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Ou(this.diff),!this.useColors)return;const t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(r++,s==="%c"&&(n=r))}),e.splice(n,0,t)}const Gb=console.debug??console.log??(()=>{});function Kb(e){try{e?On?.setItem("debug",e):On?.removeItem("debug")}catch{}}function Zb(){let e;try{e=On?.getItem("debug")}catch{}return!e&&typeof globalThis.process<"u"&&"env"in globalThis.process&&(e=Mb.DEBUG),e}function Wb(){try{return localStorage}catch{}}function Jb(e){e.j=function(t){try{return JSON.stringify(t)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}}const Ue=zb({formatArgs:qb,save:Kb,load:Zb,useColors:Vb,setupFormatters:Jb,colors:Hb,storage:On,log:Gb});Ue.formatters.b=e=>e==null?"undefined":de.baseEncode(e);Ue.formatters.t=e=>e==null?"undefined":Ct.baseEncode(e);Ue.formatters.m=e=>e==null?"undefined":Fn.baseEncode(e);Ue.formatters.p=e=>e==null?"undefined":e.toString();Ue.formatters.c=e=>e==null?"undefined":e.toString();Ue.formatters.k=e=>e==null?"undefined":e.toString();Ue.formatters.a=e=>e==null?"undefined":e.toString();Ue.formatters.e=e=>e==null?"undefined":ia(e.stack)??ia(e.message)??e.toString();function Yb(e){const t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=e,t.destroy=()=>!0,t.extend=()=>t,t}function qo(e){let t=Yb(`${e}:trace`);return Ue.enabled(`${e}:trace`)&&Ue.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(t=Ue(`${e}:trace`)),Object.assign(Ue(e),{error:Ue(`${e}:error`),trace:t})}function ia(e){if(e!=null&&(e=e.trim(),e.length!==0))return e}var $s,aa;function Xb(){return aa||(aa=1,$s=e=>{if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}),$s}var nn,ca;function Qb(){if(ca)return nn;ca=1;const e=Xb(),{hasOwnProperty:t}=Object.prototype,{propertyIsEnumerable:r}=Object,n=(d,p,g)=>Object.defineProperty(d,p,{value:g,writable:!0,enumerable:!0,configurable:!0}),s=nn,o={concatArrays:!1,ignoreUndefined:!1},i=d=>{const p=[];for(const g in d)t.call(d,g)&&p.push(g);if(Object.getOwnPropertySymbols){const g=Object.getOwnPropertySymbols(d);for(const h of g)r.call(d,h)&&p.push(h)}return p};function a(d){return Array.isArray(d)?c(d):e(d)?f(d):d}function c(d){const p=d.slice(0,0);return i(d).forEach(g=>{n(p,g,a(d[g]))}),p}function f(d){const p=Object.getPrototypeOf(d)===null?Object.create(null):{};return i(d).forEach(g=>{n(p,g,a(d[g]))}),p}const u=(d,p,g,h)=>(g.forEach(b=>{typeof p[b]>"u"&&h.ignoreUndefined||(b in d&&d[b]!==Object.getPrototypeOf(d)?n(d,b,w(d[b],p[b],h)):n(d,b,a(p[b])))}),d),l=(d,p,g)=>{let h=d.slice(0,0),b=0;return[d,p].forEach(S=>{const _=[];for(let P=0;P<S.length;P++)t.call(S,P)&&(_.push(String(P)),S===d?n(h,b++,S[P]):n(h,b++,a(S[P])));h=u(h,S,i(S).filter(P=>!_.includes(P)),g)}),h};function w(d,p,g){return g.concatArrays&&Array.isArray(d)&&Array.isArray(p)?l(d,p,g):!e(p)||!e(d)?a(p):u(d,p,i(p),g)}return nn=function(...d){const p=w(a(o),this!==s&&this||{},o);let g={_:{}};for(const h of d)if(h!==void 0){if(!e(h))throw new TypeError("`"+h+"` is not an Option Object");g=w(g,{_:h},p)}return g._},nn}var e1=Qb();const Lu=Uo(e1),Z=Object.create(null),Du=6e4,Ru=Du*60,Go=Ru*24,ju=Go*365.25;Z.year=Z.yr=Z.y=ju;Z.month=Z.mo=Z.mth=ju/12;Z.week=Z.wk=Z.w=Go*7;Z.day=Z.d=Go;Z.hour=Z.hr=Z.h=Ru;Z.minute=Z.min=Z.m=Du;Z.second=Z.sec=Z.s=1e3;Z.millisecond=Z.millisec=Z.ms=1;Z.microsecond=Z.microsec=Z.us=Z.¬µs=.001;Z.nanosecond=Z.nanosec=Z.ns=1e-6;Z.group=",";Z.decimal=".";Z.placeholder=" _";const t1=/((?:\d{1,16}(?:\.\d{1,16})?|\.\d{1,16})(?:[eE][-+]?\d{1,4})?)\s?([\p{L}]{0,14})/gu;Xe.unit=Z;function Xe(e="",t="ms"){let r=null,n;return String(e).replace(new RegExp(`(\\d)[${Xe.unit.placeholder}${Xe.unit.group}](\\d)`,"g"),"$1$2").replace(Xe.unit.decimal,".").replace(t1,(s,o,i)=>{if(i)i=i.toLowerCase();else if(n){for(const a in Xe.unit)if(Xe.unit[a]<n){i=a;break}}else i=t;n=i=Xe.unit[i]||Xe.unit[i.replace(/s$/,"")],i&&(r=(r||0)+o*i)}),r&&r/(Xe.unit[t]||1)*(e[0]==="-"?-1:1)}const r1=()=>{};var Ps,ua;function Fu(){if(ua)return Ps;ua=1;const e=typeof navigator<"u"&&navigator.product==="ReactNative";function t(){return e?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const r=self.URL,n=t();class s{constructor(a="",c=n){this.super=new r(a,c),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(a){this.super.hash=a}set host(a){this.super.host=a}set hostname(a){this.super.hostname=a}set href(a){this.super.href=a}set password(a){this.super.password=a}set pathname(a){this.super.pathname=a}set port(a){this.super.port=a}set protocol(a){this.super.protocol=a}set search(a){this.super.search=a}set username(a){this.super.username=a}static createObjectURL(a){return r.createObjectURL(a)}static revokeObjectURL(a){r.revokeObjectURL(a)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}}function o(i){if(typeof i=="string")return new r(i).toString();if(!(i instanceof r)){const a=i.username&&i.password?`${i.username}:${i.password}@`:"",c=i.auth?i.auth+"@":"",f=i.port?":"+i.port:"",u=i.protocol?i.protocol+"//":"",l=i.host||"",w=i.hostname||"",d=i.search||(i.query?"?"+i.query:""),p=i.hash||"",g=i.pathname||"",h=i.path||g+d;return`${u}${a||c}${l||w+f}${h}${p}`}}return Ps={URLWithLegacySupport:s,URLSearchParams:self.URLSearchParams,defaultBase:n,format:o},Ps}var ks,la;function n1(){if(la)return ks;la=1;const{URLWithLegacySupport:e,format:t}=Fu();return ks=(r,n={},s={},o)=>{let i=n.protocol?n.protocol.replace(":",""):"http";i=(s[i]||o||i)+":";let a;try{a=new e(r)}catch{a={}}const c=Object.assign({},n,{protocol:i||a.protocol,host:n.host||a.host});return new e(r,t(c)).toString()},ks}var Us,fa;function s1(){if(fa)return Us;fa=1;const{URLWithLegacySupport:e,format:t,URLSearchParams:r,defaultBase:n}=Fu(),s=n1();return Us={URL:e,URLSearchParams:r,format:t,relative:s,defaultBase:n},Us}var sn=s1();class zu extends Error{constructor(t="Request timed out"){super(t),this.name="TimeoutError"}}class o1 extends Error{constructor(t="The operation was aborted."){super(t),this.name="AbortError"}}class da extends Error{response;constructor(t){super(t.statusText),this.name="HTTPError",this.response=t}}const i1=globalThis.fetch,Ko=globalThis.Headers,a1=globalThis.Request,Mu=globalThis.Response,c1=async(e,t={})=>{const r=new XMLHttpRequest;r.open(t.method??"GET",e.toString(),!0);const{timeout:n,headers:s}=t,o=Number(n);if(!isNaN(o)&&o>0&&o<1/0&&(r.timeout=o),t.overrideMimeType!=null&&r.overrideMimeType(t.overrideMimeType),s!=null)for(const[i,a]of new Ko(s))r.setRequestHeader(i,a);return t.signal!=null&&(t.signal.onabort=()=>{r.abort()}),t.onUploadProgress!=null&&(r.upload.onprogress=t.onUploadProgress),r.responseType="arraybuffer",new Promise((i,a)=>{const c=f=>{switch(f.type){case"error":{i(Mu.error());break}case"load":{i(new d1(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:f1(r.getAllResponseHeaders())}));break}case"timeout":{a(new zu);break}case"abort":{a(new o1);break}}};r.onerror=c,r.onload=c,r.ontimeout=c,r.onabort=c,r.send(t.body)})},u1=i1,l1=(e,t={})=>t.onUploadProgress!=null?c1(e,t):u1(e,t),f1=e=>{const t=new Ko;for(const r of e.trim().split(/[\r\n]+/)){const n=r.indexOf(": ");n>0&&t.set(r.slice(0,n),r.slice(n+1))}return t};class d1 extends Mu{constructor(t,r,n){super(r,n),Object.defineProperty(this,"url",{value:t})}}const ha=Lu.bind({ignoreUndefined:!0}),on=qo("kubo-rpc-client:fetch"),h1={throwHttpErrors:!0,credentials:"same-origin"};class Ge{static HTTPError=da;static TimeoutError=zu;static post=async(t,r)=>new Ge(r).post(t,r);static get=async(t,r)=>new Ge(r).get(t,r);static put=async(t,r)=>new Ge(r).put(t,r);static delete=async(t,r)=>new Ge(r).delete(t,r);static options=async(t,r)=>new Ge(r).options(t,r);opts;constructor(t={}){this.opts=ha({},h1,t)}async fetch(t,r={}){const n=ha({},this.opts,r),s=new Ko(n.headers);if(typeof t!="string"&&!(t instanceof sn.URL||t instanceof a1))throw new TypeError("`resource` must be a string, URL, or Request");const o=new sn.URL(t.toString(),n.base),{searchParams:i,transformSearchParams:a,json:c}=n;i!=null&&(typeof a=="function"?o.search=a(new sn.URLSearchParams(n.searchParams)):o.search=new sn.URLSearchParams(n.searchParams).toString()),c!=null&&(n.body=JSON.stringify(n.json),s.set("content-type","application/json"));const f=[n.signal];n.timeout!=null&&isNaN(n.timeout)&&n.timeout>0&&f.push(AbortSignal.timeout(n.timeout));const u=yt(f);try{globalThis.ReadableStream!=null&&n.body instanceof globalThis.ReadableStream&&(qn||Gn)&&(n.body=new Blob(await Mc(Kn(n.body)))),on.trace("outgoing headers",n.headers),on.trace("%s %s",n.method,o);const l=await l1(o.toString(),{...n,signal:n.signal,timeout:void 0,headers:s,duplex:"half"});if(on("%s %s %d",n.method,o,l.status),on.trace("incoming headers",l.headers),!l.ok&&n.throwHttpErrors===!0)throw n.handleError!=null&&await n.handleError(l),new da(l);return l.iterator=async function*(){yield*y1(l.body)},l.ndjson=async function*(){for await(const w of p1(l.iterator()))r.transform!=null?yield r.transform(w):yield w},l}finally{u.clear()}}async post(t,r={}){return this.fetch(t,{...r,method:"POST"})}async get(t,r={}){return this.fetch(t,{...r,method:"GET"})}async put(t,r={}){return this.fetch(t,{...r,method:"PUT"})}async delete(t,r={}){return this.fetch(t,{...r,method:"DELETE"})}async options(t,r={}){return this.fetch(t,{...r,method:"OPTIONS"})}}const p1=async function*(e){const t=new TextDecoder;let r="";for await(const n of e){r+=t.decode(n,{stream:!0});const s=r.split(/\r?\n/);for(let o=0;o<s.length-1;o++){const i=s[o].trim();i.length>0&&(yield JSON.parse(i))}r=s[s.length-1]}r+=t.decode(),r=r.trim(),r.length!==0&&(yield JSON.parse(r))},y1=e=>{if(g1(e))return e;if(m1(e)){const t=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:t.next.bind(t),return(r){return e.destroy(),typeof t.return=="function"?t.return():Promise.resolve({done:!0,value:r})}}}}}if(w1(e)){const t=e.getReader();return(async function*(){try{for(;;){const{done:r,value:n}=await t.read();if(r)return;n!=null&&(yield n)}}finally{t.releaseLock()}})()}throw new TypeError("Body can't be converted to AsyncIterable")},g1=e=>e!==null&&typeof e[Symbol.asyncIterator]=="function",w1=e=>e!=null&&typeof e.getReader=="function",m1=e=>Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable"),b1=[K("tcp").code,K("dns").code,K("dnsaddr").code,K("dns4").code,K("dns6").code];function pa(e){return Hu("sni",e)?.[1]}function ya(e){const t=Hu("tcp",e)?.[1];return t==null?"":`:${t}`}function Hu(e,t){let r;try{r=K(e).code}catch{return}for(const[n,s]of t)if(n===r&&s!=null)return[n,s]}function ga(e){return e.some(([t,r])=>t===K("tls").code)}function Ve(e,t,r){const n=Vu[K(e).name];if(n==null)throw new Error(`Can't interpret protocol ${K(e).name}`);const s=n(t,r);return e===K("ip6").code?`[${s}]`:s}const Vu={ip4:(e,t)=>e,ip6:(e,t)=>t.length===0?e:`[${e}]`,tcp:(e,t)=>{const r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`tcp://${Ve(r[0],r[1]??"",t)}:${e}`},udp:(e,t)=>{const r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`udp://${Ve(r[0],r[1]??"",t)}:${e}`},dnsaddr:(e,t)=>e,dns4:(e,t)=>e,dns6:(e,t)=>e,dns:(e,t)=>e,ipfs:(e,t)=>{const r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${Ve(r[0],r[1]??"",t)}`},p2p:(e,t)=>{const r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${Ve(r[0],r[1]??"",t)}`},http:(e,t)=>{const r=ga(t),n=pa(t),s=ya(t);if(r&&n!=null)return`https://${n}${s}`;const o=r?"https://":"http://",i=t.pop();if(i==null)throw new Error("Unexpected end of multiaddr");let a=Ve(i[0],i[1]??"",t);return a=a.replace("tcp://",""),`${o}${a}`},"http-path":(e,t)=>{const r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");const n=Ve(r[0],r[1]??"",t),s=decodeURIComponent(e);return`${n}/${s}`},tls:(e,t)=>{const r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return Ve(r[0],r[1]??"",t)},sni:(e,t)=>{const r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return Ve(r[0],r[1]??"",t)},https:(e,t)=>{const r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");let n=Ve(r[0],r[1]??"",t);return n=n.replace("tcp://",""),`https://${n}`},ws:(e,t)=>{const r=ga(t),n=pa(t),s=ya(t);if(r&&n!=null)return`wss://${n}${s}`;const o=r?"wss://":"ws://",i=t.pop();if(i==null)throw new Error("Unexpected end of multiaddr");let a=Ve(i[0],i[1]??"",t);return a=a.replace("tcp://",""),`${o}${a}`},wss:(e,t)=>{const r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");let n=Ve(r[0],r[1]??"",t);return n=n.replace("tcp://",""),`wss://${n}`}};function x1(e,t){const n=Ie(e).stringTuples(),s=n.pop();if(s==null)throw new Error("Unexpected end of multiaddr");const o=K(s[0]),i=Vu[o.name];if(i==null)throw new Error(`No interpreter found for ${o.name}`);let a=i(s[1]??"",n);return b1.includes(s[0])&&(a=a.replace(/^.*:\/\//,""),s[1]==="443"?a=`https://${a}`:a=`http://${a}`),(a.startsWith("http://")||a.startsWith("https://")||a.startsWith("ws://")||a.startsWith("wss://"))&&(a=new URL(a).toString(),a.endsWith("/")&&(a=a.substring(0,a.length-1))),a}function wa(e){try{e=x1(Ie(e))}catch{}return e=e.toString(),e}const ma=qo("js-kubo-rpc-client:lib:error-handler"),E1=Lu.bind({ignoreUndefined:!0}),v1=qn||Gn?location.protocol:"http",A1=qn||Gn?location.hostname:"localhost",S1=qn||Gn?location.port:"5001",_1=(e={})=>{let t,r={},n;if(typeof e=="string"||mn(e))t=new URL(wa(e));else if(e instanceof URL)t=e;else if(typeof e.url=="string"||mn(e.url))t=new URL(wa(e.url)),r=e;else if(e.url instanceof URL)t=e.url,r=e;else{r=e??{};const s=(r.protocol??v1).replace(":",""),o=(r.host??A1).split(":")[0],i=r.port??S1;t=new URL(`${s}://${o}:${i}`)}if(r.apiPath!=null?t.pathname=r.apiPath:(t.pathname==="/"||t.pathname===void 0)&&(t.pathname="api/v0"),By){const s=r1();n=r.agent??new s({keepAlive:!0,maxSockets:6})}return{...r,host:t.host,protocol:t.protocol.replace(":",""),port:Number(t.port),apiPath:t.pathname,url:t,agent:n}},I1=async e=>{let t;try{if((e.headers.get("Content-Type")??"").startsWith("application/json")){const n=await e.json();ma(n),t=n.Message??n.message}else t=await e.text()}catch(n){ma("Failed to parse error response",n),t=n.message}let r=new Ge.HTTPError(e);throw t!=null&&(t.includes("deadline has elapsed")&&(r=new Ge.TimeoutError),t.includes("context deadline exceeded")&&(r=new Ge.TimeoutError),t.includes("request timed out")&&(r=new Ge.TimeoutError),r.message=t),r},B1=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,ba=e=>e.replace(B1,function(t){return"-"+t.toLowerCase()}),C1=e=>typeof e=="string"?Xe(e)??0:e;class $1 extends Ge{constructor(t={}){const r=_1(t);super({timeout:r.timeout!=null?C1(r.timeout):void 0,headers:r.headers,base:`${r.url}`,handleError:I1,transformSearchParams:s=>{const o=new URLSearchParams;for(const[i,a]of s)a!=="undefined"&&a!=="null"&&i!=="signal"&&i!=="timeout"&&o.append(ba(i),a),i==="timeout"&&!isNaN(parseInt(a))&&o.append(ba(i),a);return o},agent:r.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;const n=this.fetch;this.fetch=async(s,o={})=>(typeof s=="string"&&!s.startsWith("/")&&(s=`${r.url}/${s}`),n.call(this,s,E1(o,{method:"POST"})))}}const P1=async e=>Promise.reject(new Error(`No base found for "${e}"`));class k1{_basesByName;_basesByPrefix;_loadBase;constructor(t){this._basesByName={},this._basesByPrefix={},this._loadBase=t.loadBase??P1;for(const r of t.bases)this.addBase(r)}addBase(t){if(this._basesByName[t.name]!=null&&this._basesByPrefix[t.prefix]!=null)throw new Error(`Codec already exists for codec "${t.name}"`);this._basesByName[t.name]=t,this._basesByPrefix[t.prefix]=t}removeBase(t){delete this._basesByName[t.name],delete this._basesByPrefix[t.prefix]}async getBase(t){if(this._basesByName[t]!=null)return this._basesByName[t];if(this._basesByPrefix[t]!=null)return this._basesByPrefix[t];const r=await this._loadBase(t);return this._basesByName[r.name]==null&&this._basesByPrefix[r.prefix]==null&&this.addBase(r),r}listBases(){return Object.values(this._basesByName)}}const U1=async e=>Promise.reject(new Error(`No codec found for "${e}"`));class N1{_codecsByName;_codecsByCode;_loadCodec;constructor(t){this._codecsByName={},this._codecsByCode={},this._loadCodec=t.loadCodec??U1;for(const r of t.codecs)this.addCodec(r)}addCodec(t){if(this._codecsByName[t.name]!=null||this._codecsByCode[t.code]!=null)throw new Error(`Resolver already exists for codec "${t.name}"`);this._codecsByName[t.name]=t,this._codecsByCode[t.code]=t}removeCodec(t){delete this._codecsByName[t.name],delete this._codecsByCode[t.code]}async getCodec(t){const r=typeof t=="string"?this._codecsByName:this._codecsByCode;if(r[t]!=null)return r[t];const n=await this._loadCodec(t);return r[t]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}}const T1=async e=>Promise.reject(new Error(`No hasher found for "${e}"`));class O1{_hashersByName;_hashersByCode;_loadHasher;constructor(t){this._hashersByName={},this._hashersByCode={},this._loadHasher=t.loadHasher??T1;for(const r of t.hashers)this.addHasher(r)}addHasher(t){if(this._hashersByName[t.name]!=null||this._hashersByCode[t.code]!=null)throw new Error(`Resolver already exists for codec "${t.name}"`);this._hashersByName[t.name]=t,this._hashersByCode[t.code]=t}removeHasher(t){delete this._hashersByName[t.name],delete this._hashersByCode[t.code]}async getHasher(t){const r=typeof t=="string"?this._hashersByName:this._hashersByCode;if(r[t]!=null)return r[t];const n=await this._loadHasher(t);return r[t]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}}function L1(e){return async function(t,r,n={}){const s=await e.post("log/level",{signal:n.signal,searchParams:C({arg:[t,r],...n}),headers:n.headers});return we(await s.json())}}function D1(e){return async function(r={}){return(await(await e.post("log/ls",{signal:r.signal,searchParams:C(r),headers:r.headers})).json()).Strings}}function R1(e){return async function*(r={}){yield*(await e.post("log/tail",{signal:r.signal,searchParams:C(r),headers:r.headers})).ndjson()}}function j1(e){return{level:L1(e),ls:D1(e),tail:R1(e)}}function F1(e){return async function*(r,n={}){const s=`${r instanceof Uint8Array?F.decode(r):r}`;async function o(a){let c=a.Hash;if(c.includes("/")===!0){const u=c.startsWith("/ipfs/")===!0?c:`/ipfs/${c}`;c=(await Nu(e)(u)).cid}else c=F.parse(c);return{name:a.Name,path:s+(a.Name!=null?`/${a.Name}`:""),size:a.Size,cid:c,type:z1(a)}}const i=await e.post("ls",{signal:n.signal,searchParams:C({arg:s,...n}),headers:n.headers});for await(let a of i.ndjson()){if(a=a.Objects,a==null)throw new Error("expected .Objects in results");if(a=a[0],a==null)throw new Error("expected one array in results.Objects");const c=a.Links;if(!Array.isArray(c))throw new Error("expected one array in results.Objects[0].Links");if(c.length===0){yield o(a);return}yield*c.map(o)}}}function z1(e){switch(e.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}function M1(e){return async function(r={}){const n=await e.post("dns",{signal:r.signal,searchParams:C(r),headers:r.headers});return we(await n.json())}}function H1(e){return async function(r,n={}){const s=await e.post("name/publish",{signal:n.signal,searchParams:C({arg:`${r}`,...n}),headers:n.headers});return we(await s.json())}}function V1(e){return async function(r,n={}){const s=await e.post("name/pubsub/cancel",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers});return we(await s.json())}}function q1(e){return async function(r={}){const n=await e.post("name/pubsub/state",{signal:r.signal,searchParams:C(r),headers:r.headers});return we(await n.json())}}function G1(e){return async function(r={}){return(await(await e.post("name/pubsub/subs",{signal:r.signal,searchParams:C(r),headers:r.headers})).json()).Strings??[]}}function K1(e){return{cancel:V1(e),state:q1(e),subs:G1(e)}}function Z1(e){return async function*(r,n={}){const s=await e.post("name/resolve",{signal:n.signal,searchParams:C({arg:r,stream:!0,...n}),headers:n.headers});for await(const o of s.ndjson())yield o.Path}}function W1(e){return{publish:H1(e),resolve:Z1(e),pubsub:K1(e)}}function J1(e){return async function(r,n,s={}){const o=await e.post("object/patch/add-link",{signal:s.signal,searchParams:C({arg:[`${r}`,n.Name??n.name??"",(n.Hash??n.cid??"").toString()??null],...s}),headers:s.headers}),{Hash:i}=await o.json();return F.parse(i)}}function Y1(e){return async function(r,n,s={}){const o=await e.post("object/patch/rm-link",{signal:s.signal,searchParams:C({arg:[`${r}`,n.Name??n.name??null],...s}),headers:s.headers}),{Hash:i}=await o.json();return F.parse(i)}}function X1(e){return{addLink:J1(e),rmLink:Y1(e)}}function Q1(e,t){return{patch:X1(e)}}function e2(e){return Symbol.iterator in e}function t2(e){return Symbol.asyncIterator in e}function xa(e){return F.asCID(e)!=null}async function*qu(e){if(e==null)throw new Ke(`Unexpected input: ${e}`);const t=F.asCID(e);if(t!=null){yield _e({cid:t});return}if(typeof e=="string"){yield _e({path:e});return}if(e.cid!=null||e.path!=null)return yield _e(e);if(e2(e)){const r=e[Symbol.iterator](),n=r.next();if(n.done===!0)return r;if(xa(n.value)){yield _e({cid:n.value});for(const s of r)yield _e({cid:s});return}if(typeof n.value=="string"){yield _e({path:n.value});for(const s of r)yield _e({path:s});return}if(n.value.cid!=null||n.value.path!=null){yield _e(n.value);for(const s of r)yield _e(s);return}throw new Ke(`Unexpected input: ${typeof e}`)}if(t2(e)){const r=e[Symbol.asyncIterator](),n=await r.next();if(n.done===!0)return r;if(xa(n.value)){yield _e({cid:n.value});for await(const s of r)yield _e({cid:s});return}if(typeof n.value=="string"){yield _e({path:n.value});for await(const s of r)yield _e({path:s});return}if(n.value.cid!=null||n.value.path!=null){yield _e(n.value);for await(const s of r)yield _e(s);return}throw new Ke(`Unexpected input: ${typeof e}`)}throw new Ke(`Unexpected input: ${typeof e}`)}function _e(e){const t=e.cid??`${e.path}`;if(t==null)throw new Ke("Unexpected input: Please path either a CID or an IPFS path");const r={path:t,recursive:e.recursive!==!1};return e.metadata!=null&&(r.metadata=e.metadata),r}function Gu(e){return async function*(r,n={}){for await(const{path:s,recursive:o,metadata:i}of qu(r)){const a=await e.post("pin/add",{signal:n.signal,searchParams:C({...n,arg:s,recursive:o,metadata:i!=null?JSON.stringify(i):void 0,stream:!0}),headers:n.headers});for await(const c of a.ndjson()){if(c.Pins!=null){for(const f of c.Pins)yield F.parse(f);continue}yield F.parse(c)}}}}function r2(e){const t=Gu(e);return async function(n,s={}){const o=await Jn(t([{path:n.toString(),...s}],s));if(o==null)throw new Error("No response received");return o}}function Ea(e,t,r,n){const s={type:e,cid:F.parse(t)};return r!=null&&(s.metadata=r),n!=null&&(s.name=n),s}function n2(e){return async function*(r={}){let n=[];r.paths!=null&&(n=Array.isArray(r.paths)?r.paths:[r.paths]);const s=await e.post("pin/ls",{signal:r.signal,searchParams:C({...r,arg:n.map(o=>`${o}`),stream:!0}),headers:r.headers});for await(const o of s.ndjson()){if(o.Keys!=null){for(const i of Object.keys(o.Keys))yield Ea(o.Keys[i].Type,i,o.Keys[i].Metadata,o.Keys[i].Name);return}yield Ea(o.Type,o.Cid,o.Metadata,o.Name)}}}const Ku=({Name:e,Status:t,Cid:r})=>({cid:F.parse(r),name:e,status:t}),Zu=e=>{if(typeof e=="string"&&e!=="")return e;throw new TypeError("service name must be passed")},Wu=e=>{if(F.asCID(e)!=null)return e.toString();throw new TypeError(`CID instance expected instead of ${typeof e}`)},Zo=({service:e,cid:t,name:r,status:n,all:s})=>{const o=C({service:Zu(e),name:r,force:s===!0?!0:void 0});if(t!=null)for(const i of t)o.append("cid",Wu(i));if(n!=null)for(const i of n)o.append("status",i);return o},s2=(e,{service:t,background:r,name:n,origins:s})=>{const o=C({arg:Wu(e),service:Zu(t),name:n,background:r===!0?!0:void 0});if(s!=null)for(const i of s)o.append("origin",i.toString());return o};function o2(e){return async function(r,{timeout:n,signal:s,headers:o,...i}){const a=await e.post("pin/remote/add",{timeout:n,signal:s,headers:o,searchParams:s2(r,i)});return Ku(await a.json())}}function i2(e){return async function*({timeout:r,signal:n,headers:s,...o}){const i=await e.post("pin/remote/ls",{timeout:r,signal:n,headers:s,searchParams:Zo(o)});for await(const a of i.ndjson())yield Ku(a)}}function a2(e){return async function({timeout:r,signal:n,headers:s,...o}){await e.post("pin/remote/rm",{timeout:r,signal:n,headers:s,searchParams:Zo({...o,all:!0})})}}function c2(e){return async function({timeout:r,signal:n,headers:s,...o}){await e.post("pin/remote/rm",{timeout:r,signal:n,headers:s,searchParams:Zo({...o,all:!1})})}}function u2(e){const t=String(e);if(t==="undefined")throw Error("endpoint is required");return t[t.length-1]==="/"?t.slice(0,-1):t}function l2(e){const t={service:e.Service,endpoint:new URL(e.ApiEndpoint)};return e.Stat!=null&&(t.stat=f2(e.Stat)),t}function f2(e){switch(e.Status){case"valid":{const{Pinning:t,Pinned:r,Queued:n,Failed:s}=e.PinCount;return{status:"valid",pinCount:{queued:n,pinning:t,pinned:r,failed:s}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function d2(e){return async function(r,n){const{endpoint:s,key:o,headers:i,timeout:a,signal:c}=n;await e.post("pin/remote/service/add",{timeout:a,signal:c,searchParams:C({arg:[r,u2(s),o]}),headers:i})}}function h2(e){return async function(r={}){const{stat:n,headers:s,timeout:o,signal:i}=r;return(await(await e.post("pin/remote/service/ls",{timeout:o,signal:i,headers:s,searchParams:n===!0?C({stat:n}):void 0})).json()).RemoteServices.map(l2)}}function p2(e){return async function(r,n={}){await e.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:C({arg:r})})}}function y2(e){return{add:d2(e),ls:h2(e),rm:p2(e)}}function g2(e){return{add:o2(e),ls:i2(e),rm:c2(e),rmAll:a2(e),service:y2(e)}}function Ju(e){return async function*(r,n={}){for await(const{path:s,recursive:o}of qu(r)){const i=new URLSearchParams(n.searchParams);i.append("arg",`${s}`),o!=null&&i.set("recursive",String(o));const a=await e.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:C({...n,arg:`${s}`,recursive:o})});for await(const c of a.ndjson()){if(c.Pins!=null){yield*c.Pins.map(f=>F.parse(f));continue}yield F.parse(c)}}}}function w2(e){const t=Ju(e);return async function(n,s={}){const o=await Jn(t([{path:n.toString(),...s}],s));if(o==null)throw new Error("No response received");return o}}function m2(e){return{addAll:Gu(e),add:r2(e),ls:n2(e),rmAll:Ju(e),rm:w2(e),remote:g2(e)}}function b2(e){return async function*(r,n={}){yield*(await e.post("ping",{signal:n.signal,searchParams:C({arg:`${r}`,...n}),headers:n.headers,transform:we})).ndjson()}}const x2=e=>Array.isArray(e)?e.map(so):e,so=e=>ne(Ar(e)),Ar=e=>zn.decode(e),E2=e=>BigInt(`0x${ne(zn.decode(e),"base16")}`),Wo=e=>zn.encode(Fe(e));function v2(e){return async function(r={}){const{Strings:n}=await(await e.post("pubsub/ls",{signal:r.signal,searchParams:C(r),headers:r.headers})).json();return x2(n)??[]}}function A2(e){return async function(r,n={}){const s=await e.post("pubsub/peers",{signal:n.signal,searchParams:C({arg:Wo(r),...n}),headers:n.headers}),{Strings:o}=await s.json();return o??[]}}function S2(e){return async function(r,n,s={}){const o=C({arg:Wo(r),...s}),i=new AbortController,a=yt([i.signal,s.signal]);try{await(await e.post("pubsub/pub",{signal:a,searchParams:o,...await Nt([n],i,s.headers)})).text()}finally{a.clear()}}}const _2=qo("js-kubo-rpc-client:pubsub:subscribe");function I2(e,t){return async function(n,s,o={}){o.signal=t.subscribe(n,s,o.signal);let i,a;const c=new Promise((u,l)=>{i=u,a=l}),f=setTimeout(()=>{i()},1e3);return e.post("pubsub/sub",{signal:o.signal,searchParams:C({arg:Wo(n),...o}),headers:o.headers}).catch(u=>{t.unsubscribe(n,s),a(u)}).then(u=>{clearTimeout(f),u!=null&&(B2(u,{onMessage:l=>{if(s!=null){if(typeof s=="function"){s(l);return}typeof s.handleEvent=="function"&&s.handleEvent(l)}},onEnd:()=>{t.unsubscribe(n,s)},onError:o.onError}),i())}),c}}async function B2(e,{onMessage:t,onEnd:r,onError:n}){n=n??_2;try{for await(const s of e.ndjson())try{if(s.from==null)continue;s.from!=null&&s.seqno!=null?t({type:"signed",from:$e(s.from),data:Ar(s.data),sequenceNumber:E2(s.seqno),topic:so(s.topicIDs[0]),key:s.key!=null?lm(Ar(s.key??"u")):void 0,signature:Ar(s.signature??"u")}):t({type:"unsigned",data:Ar(s.data),topic:so(s.topicIDs[0])})}catch(o){o.message=`Failed to parse pubsub message: ${o.message}`,n(o,!1,s)}}catch(s){C2(s)||n(s,!0)}finally{r()}}const C2=e=>{switch(e.type){case"aborted":return!0;case"abort":return!0;default:return e.name==="AbortError"}};class $2{_subs;constructor(){this._subs=new Map}subscribe(t,r,n){const s=this._subs.get(t)??[];if(s.find(i=>i.handler===r)!=null)throw new Error(`Already subscribed to ${t} with this handler`);const o=new AbortController;return this._subs.set(t,[{handler:r,controller:o}].concat(s)),n?.addEventListener("abort",()=>{this.unsubscribe(t,r)}),o.signal}unsubscribe(t,r){const n=this._subs.get(t)??[];let s;r!=null?(this._subs.set(t,n.filter(o=>o.handler!==r)),s=n.filter(o=>o.handler===r)):(this._subs.set(t,[]),s=n),(this._subs.get(t)??[]).length===0&&this._subs.delete(t),s.forEach(o=>{o.controller.abort()})}}function P2(e,t){return async function(n,s){t.unsubscribe(n,s)}}function k2(e){const t=new $2;return{ls:v2(e),peers:A2(e),publish:S2(e),subscribe:I2(e,t),unsubscribe:P2(e,t)}}function U2(e){return async function*(r={}){yield*(await e.post("refs/local",{signal:r.signal,transform:we,searchParams:C(r),headers:r.headers})).ndjson()}}function N2(e){async function*t(r,n={}){const s=Array.isArray(r)?r:[r];yield*(await e.post("refs",{signal:n.signal,searchParams:C({arg:s.map(i=>`${i instanceof Uint8Array?F.decode(i):i}`),...n}),headers:n.headers,transform:we})).ndjson()}return Object.assign(t,{local:U2(e)})}function T2(e){return async function*(r={}){yield*(await e.post("repo/gc",{signal:r.signal,searchParams:C(r),headers:r.headers,transform:s=>({err:s.Error!=null?new Error(s.Error):null,cid:s.Key?.["/"]!=null?F.parse(s.Key["/"]):null})})).ndjson()}}function Yu(e){return async function(r={}){const s=await(await e.post("repo/stat",{signal:r.signal,searchParams:C(r),headers:r.headers})).json();return{numObjects:BigInt(s.NumObjects),repoSize:BigInt(s.RepoSize),repoPath:s.RepoPath,version:s.Version,storageMax:BigInt(s.StorageMax)}}}function O2(e){return async function(r={}){return(await(await e.post("repo/version",{signal:r.signal,searchParams:C(r),headers:r.headers})).json()).Version}}function L2(e){return{gc:T2(e),stat:Yu(e),version:O2(e)}}function D2(e){return async function(r,n={}){const s=await e.post("resolve",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers}),{Path:o}=await s.json();return o}}function R2(e){return async function*(r,n={}){const s=await e.post("routing/findpeer",{signal:n.signal,searchParams:C({arg:r.toString(),stream:!0,...n}),headers:n.headers});for await(const o of s.ndjson())yield gr(o)}}function j2(e){return async function*(r,n={}){const s=await e.post("routing/findprovs",{signal:n.signal,searchParams:C({arg:r.toString(),...n}),headers:n.headers});for await(const o of s.ndjson())yield gr(o)}}function F2(e){return async function*(r,n={}){const s=await e.post("routing/get",{signal:n.signal,searchParams:C({arg:r instanceof Uint8Array?ne(r):r.toString(),...n}),headers:n.headers});for await(const o of s.ndjson())yield gr(o)}}function z2(e){return async function*(r,n={recursive:!1}){const s=Array.isArray(r)?r:[r],o=await e.post("routing/provide",{signal:n.signal,searchParams:C({arg:s.map(i=>i.toString()),...n}),headers:n.headers});for await(const i of o.ndjson())yield gr(i)}}function M2(e){return async function*(r,n,s={}){const o=new AbortController,i=yt([o.signal,s.signal]);try{const a=await e.post("routing/put",{signal:i,searchParams:C({arg:r instanceof Uint8Array?ne(r):r.toString(),stream:!0,...s}),...await Nt([n],o,s.headers)});for await(const c of a.ndjson())yield gr(c)}finally{i.clear()}}}function H2(e){return{findPeer:R2(e),findProvs:j2(e),get:F2(e),provide:z2(e),put:M2(e)}}function V2(e){return async function*(r={}){yield*(await e.post("stats/bw",{signal:r.signal,searchParams:C(r),headers:r.headers,transform:s=>({totalIn:BigInt(s.TotalIn),totalOut:BigInt(s.TotalOut),rateIn:parseFloat(s.RateIn),rateOut:parseFloat(s.RateOut)})})).ndjson()}}function q2(e){return{bitswap:ku(e),repo:Yu(e),bw:V2(e)}}function G2(e){return async function(r={}){await(await e.post("shutdown",{signal:r.signal,searchParams:C(r),headers:r.headers})).text()}}function K2(e){return async function(r={}){const n=await e.post("swarm/addrs",{signal:r.signal,searchParams:C(r),headers:r.headers}),{Addrs:s}=await n.json();return Object.keys(s).map(o=>({id:$e(o),addrs:(s[o]??[]).map(i=>Ie(i))}))}}function Z2(e){return async function(r,n={}){const s=await e.post("swarm/connect",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers}),{Strings:o}=await s.json();return o??[]}}function W2(e){return async function(r,n={}){const s=await e.post("swarm/disconnect",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers}),{Strings:o}=await s.json();return o??[]}}function J2(e){return async function(r={}){const n=await e.post("swarm/addrs/local",{signal:r.signal,searchParams:C(r),headers:r.headers}),{Strings:s}=await n.json();return(s??[]).map(o=>Ie(o))}}function Y2(e){return async function(r={}){return((await(await e.post("swarm/peers",{signal:r.signal,searchParams:C(r),headers:r.headers})).json()).Peers??[]).map(o=>({addr:Ie(o.Addr),peer:$e(o.Peer),muxer:o.Muxer,latency:o.Latency,streams:o.Streams,direction:o.Direction==null?void 0:o.Direction===0?"inbound":"outbound"}))}}function X2(e){return{addrs:K2(e),connect:Z2(e),disconnect:W2(e),localAddrs:J2(e),peers:Y2(e)}}function Q2(e){return async function(r={}){const n=await e.post("version",{signal:r.signal,searchParams:C(r),headers:r.headers});return{...we(await n.json()),"ipfs-http-client":"1.0.0"}}}class ex{bases;codecs;hashers;bitswap;block;bootstrap;config;dag;dht;diag;files;key;log;name;object;pin;pubsub;refs;repo;routing;stats;swarm;add;addAll;cat;get;ls;id;version;stop;ping;resolve;commands;mount;isOnline;getEndpointConfig;constructor(t){const r=new $1(t),n={name:Pt.name,code:Pt.code,encode:a=>a,decode:a=>a},s=Object.values(wn);(t.ipld?.bases??[]).forEach(a=>s.push(a)),this.bases=new k1({bases:s,loadBase:t.ipld?.loadBase});const o=Object.values(zd);[E0,Dp,t0,xy,n].concat(t.ipld?.codecs??[]).forEach(a=>{o.push(a)}),this.codecs=new N1({codecs:o,loadCodec:t.ipld?.loadCodec});const i=Object.values(Fd);(t.ipld?.hashers??[]).forEach(a=>i.push(a)),this.hashers=new O1({hashers:i,loadHasher:t.ipld?.loadHasher}),this.bitswap=Sm(r),this.block=$m(r),this.bootstrap=Nm(r),this.config=Hm(r),this.dag=Ym(r,this.codecs),this.dht=ab(r),this.diag=fb(r),this.files=Sb(r),this.key=Tb(r),this.log=j1(r),this.name=W1(r),this.object=Q1(r,this.codecs),this.pin=m2(r),this.pubsub=k2(r),this.refs=N2(r),this.repo=L2(r),this.routing=H2(r),this.stats=q2(r),this.swarm=X2(r),this.add=Ky(r),this.addAll=Vc(r),this.cat=Tm(r),this.get=Ib(r),this.ls=F1(r),this.id=Tu(r),this.version=Q2(r),this.stop=G2(r),this.ping=b2(r),this.resolve=D2(r),this.commands=Om(r),this.mount=M1(r),this.isOnline=Bb(r),this.getEndpointConfig=_b(r)}}function tx(e){return new ex(e)}function rx(e={}){return(typeof e=="string"||mn(e)||e instanceof URL)&&(e={url:e}),tx(e)}async function nx({files:e,progress:t}){const r={chunker:"rabin",cidVersion:1,progress:t,timeout:6e4},n=e.reduce((c,{size:f})=>c+f,0);ke.debugging&&console.debug({Adding:e,"Total Size":n,options:r});let s=[],o=0;const i=ke.ipfsAPI.replace(/\/+$/,"");ke.debugging&&console.debug({"IPFS API URL":i});const a=rx(i);for await(const{cid:c}of a.addAll(e,r))ke.debugging&&console.debug({"Added Local":{cid:c,file:e[o].name}}),s.push({cid:c.toString(),title:e[o].name.replace(/\.[^.]*$/,""),type:e[o].type}),o++;return s}function sx({url:e,cid:t}){if(!e&&!t||e&&t)throw new Error("Must provide either `url` xor `cid`.");let r=[];if(e!=null?[,t,...r]=Array.from(/^(?:ipfs:\/\/)?([^/]+)(\/.*)?$/.exec(e)??[]):t!=null&&([t,...r]=t.split("/")),t==null)throw new Error("Could not determine `cid`.");return ke.ipfsURLPattern.replace("{cid}",t).replace("{path}",`/${r.join("/")}`)}function an(e){if(ox(e))throw new Error(e.error);return e}function ox(e){return typeof e=="object"&&e!=null&&Object.keys(e).length===1&&Object.keys(e).at(0)==="error"&&typeof Object.values(e).at(0)=="string"}var ix=Ze('<a class="svelte-1pgso1u"><img alt="üìÅ" class="svelte-1pgso1u"/> <span class="svelte-1pgso1u"> </span></a>'),ax=Ze('<img class="svelte-1pgso1u"/> <span class="svelte-1pgso1u"> </span>',1),cx=Ze("<aside> </aside>"),ux=Ze("<li><!></li>"),lx=Ze('<main class="svelte-1pgso1u"><menu id="actions"><ul class="svelte-1pgso1u"><li><button class="svelte-1pgso1u">Add Directory</button></li> <li><button class="svelte-1pgso1u">Import Files</button></li> <li><button class="svelte-1pgso1u">Import Directory</button></li> <li><button class="svelte-1pgso1u">Export to CAR</button></li> <li><button class="svelte-1pgso1u">Export to CBOR-DAG</button></li> <li><button class="menu-open svelte-1pgso1u">Settings</button></li> <li><!></li></ul></menu> <section id="locations" class="svelte-1pgso1u"><section class="general tools svelte-1pgso1u"><button><span class="svelte-1pgso1u">ü¢ó</span><span class="svelte-1pgso1u">‚ò∞</span><span class="svelte-1pgso1u">ü¢ó</span></button> <input type="search" class="svelte-1pgso1u"/></section> <nav class="system locations"><ul class="svelte-1pgso1u"><li class="svelte-1pgso1u"><a href="/">Root</a></li> <li class="svelte-1pgso1u">Recent</li> <li class="svelte-1pgso1u">Categories</li> <li class="svelte-1pgso1u">Volumes</li></ul></nav> <nav class="user locations"><ul class="svelte-1pgso1u"><li class="svelte-1pgso1u"><a href="/media/book/by/">Books</a></li> <li class="svelte-1pgso1u"><a href="/media/movies/entitled/">Movies</a></li> <li class="svelte-1pgso1u"><a href="/science/biology/papers/ordered/by/publication date/">Biology Papers</a></li> <li class="svelte-1pgso1u"><button type="button" class="svelte-1pgso1u">‚ûï</button></li></ul></nav></section> <section id="files" class="svelte-1pgso1u"><nav id="crumbs" class="svelte-1pgso1u"><!></nav> <nav id="details" class="svelte-1pgso1u"><ul class="svelte-1pgso1u"><!></ul></nav></section> <dialog id="add-spot" class="svelte-1pgso1u"><form><fieldset><legend>Path to New Spot</legend> <input name="path" value="" class="svelte-1pgso1u"/> <button class="svelte-1pgso1u">Add</button></fieldset></form></dialog> <dialog id="add-files"><form><fieldset><legend>Files to Add</legend> <input name="files" type="file" multiple class="svelte-1pgso1u"/> <button class="svelte-1pgso1u">Add</button></fieldset></form></dialog> <!></main>');function Sx(e,t){Ln(t,!0);let r=re(fe(Ba.params.path?.split("/").filter(Boolean)??[]));async function n(q){try{if(q.preventDefault(),L(u)==null)throw new Error("No Container Specified: ¬°I don‚Äôt know where I am!");if(!L(a))throw new Error("¬øHow was this directory submitted?");const Y=new FormData(q.currentTarget).getAll("path");an(await Ml({containerId:L(u),path:Y})),L(a).requestClose()}catch(Q){console.error({error:Q})}}async function s(q){try{if(q.preventDefault(),L(u)==null)throw new Error("No Container Specified: ¬°I don‚Äôt know where I am!");if(!L(c))throw new Error("¬øHow were these files submitted?");const Q=q.currentTarget,ie=new FormData(Q).getAll("files"),Le=(await nx({files:ie})).map((De,We)=>({...De,name:ie[We].name,size:ie[We].size}));an(await Hl({containerId:L(u),files:Le})),Q.reset(),L(c).requestClose()}catch(Q){console.error({error:Q})}}var o,i,a,c,f,u,l=fl([async()=>o=await ti(async()=>an(await zl({path:L(r)}))),()=>i=re(!1),()=>a=re(void 0),()=>c=re(void 0),()=>f=re(void 0),async()=>u=await ti(async()=>an(await Vl({path:L(r)}))),()=>void xl(async({to:q})=>{W(r,q?.url.pathname.split("/").map(decodeURI).filter(Boolean)??[],!0)})]),w=lx();yl("1pgso1u",q=>{dl(()=>{hl.title=`√Ø: ${L(r)??""}`},void 0,void 0,[l[6]])});var d=V(w);let p;var g=V(d),h=V(g),b=V(h);b.__click=()=>L(a)?.showModal(),H(h);var S=ee(h,2),_=V(S);_.__click=()=>L(c)?.showModal(),H(S);var P=ee(S,8),x=V(P);x.__click=()=>L(f)?.showModal(),H(P);var N=ee(P,2),k=V(N);Wl(k,{min:.1,max:1.5,step:.1,property:"--zoom",label:"üîé",get value(){return ke.detailsZoom},set value(q){ke.detailsZoom=q}}),H(N),H(g),H(d);var I=ee(d,2),m=V(I),v=V(m);v.__click=()=>W(i,!L(i));let E;_r(2),H(m),_r(4),H(I);var A=ee(I,2),B=V(A),O=V(B);ns(O,[l[6]],void 0,q=>{ef(O,{get path(){return L(r)}})}),H(B);var T=ee(B,2),D=V(T),z=V(D);ns(z,[l[0]],[()=>L(o)],(q,Q)=>{_a(q,17,()=>L(Q),Ia,(Y,ie)=>{let Oe=()=>L(ie).name,Le=()=>L(ie).type,De=()=>L(ie).cid;var We=ux(),gt=V(We);{var Xu=qt=>{var wt=ix(),qr=V(wt),Gr=ee(qr,2),rs=V(Gr,!0);H(Gr),H(wt),dt(mt=>{je(wt,"href",`${L(r).length>0?"/":""}${mt??""}/${Oe()??""}`),je(wt,"title",Oe()),je(qr,"src",tf),Ir(rs,Oe())},[()=>L(r).join("/")],void 0,[l[6]]),Pe(qt,wt)},Qu=qt=>{var wt=pl(),qr=ri(wt);{var Gr=mt=>{var Gt=ax(),wr=ri(Gt),Jo=ee(wr,2),el=V(Jo,!0);H(Jo),dt(tl=>{je(wr,"src",tl),je(wr,"alt",Oe()),Ir(el,Oe())},[()=>sx({cid:De()})]),Pe(mt,Gt)},rs=mt=>{var Gt=cx(),wr=V(Gt);H(Gt),dt(()=>Ir(wr,`Unknown Type: ${Le()??""}`)),Pe(mt,Gt)};dn(qr,mt=>{Le()==="image"&&De()?mt(Gr):mt(rs,!1)},!0)}Pe(qt,wt)};dn(gt,qt=>{Le()==="spot"?qt(Xu):qt(Qu,!1)})}H(We),Pe(Y,We)})}),H(D),H(T),H(A);var R=ee(A,2),se=V(R);H(R),ei([l[2]],()=>{Ts(R,q=>W(a,q),()=>L(a))});var G=ee(R,2),M=V(G);H(G),ei([l[3]],()=>{Ts(G,q=>W(c,q),()=>L(c))});var oe=ee(G,2);ns(oe,[l[4]],void 0,q=>{Gl(oe,{get self(){return L(f)},set self(Q){W(f,Q,!0)}})}),H(w),dt(()=>{p=si(d,1,"svelte-1pgso1u",null,p,{open:L(i)}),je(v,"title",`${L(i)?"Close":"Open"} Actions`),E=si(v,1,"svelte-1pgso1u",null,E,{"actions-open":L(i)})},void 0,void 0,[l[1]]),Ns("submit",se,n),Ns("submit",M,s),Pe(e,w),Dn()}oo(["click"]);export{Sx as component};

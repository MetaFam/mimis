var zS=Object.defineProperty;var Lp=e=>{throw TypeError(e)};var qS=(e,r,t)=>r in e?zS(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var O=(e,r,t)=>qS(e,typeof r!="symbol"?r+"":r,t),Up=(e,r,t)=>r.has(e)||Lp("Cannot "+t);var he=(e,r,t)=>(Up(e,r,"read from private field"),t?t.call(e):r.get(e)),bs=(e,r,t)=>r.has(e)?Lp("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,t),ms=(e,r,t,n)=>(Up(e,r,"write to private field"),n?n.call(e,t):r.set(e,t),t);import{c as f,g as $c}from"./BosuxZz1.js";import{b as gg,r as HS}from"./B5yx_Guq.js";import{v as GS,w as Mr,x as Og,y as KS,z as YS,A as ZS,B as wg,D as QS,E as XS,F as JS,R as eP,G as tP,u as Eg,C as G,i as Dr,t as F,H as Di,I as rP,J as nP,K as oP,L as iP,M as Me,T as se,N as aP,e as uP,d as sP,s as Sg,a as cP,O as lP,P as fP}from"./BaF23LuM.js";import{r as dP,d as hP,g as vP,f as Fp,k as _P,l as pP}from"./HPHRWQPs.js";import{F as Pg,_ as yP,a as Tg,w as bP,b as ev,n as mP,p as gP,m as Bp,d as Ai,e as Yt,f as tv,g as Cg,h as vr,i as Mt,j as OP,s as tc}from"./BSbEpPcy.js";import{s as Ks}from"./DgioQx5z.js";var Ag={exports:{}};/*!
 * Toastify js 1.12.0
 * https://github.com/apvarun/toastify-js
 * @license MIT licensed
 *
 * Copyright (C) 2018 Varun A P
 */(function(e){(function(r,t){e.exports?e.exports=t():r.Toastify=t()})(f,function(r){var t=function(a){return new t.lib.init(a)},n="1.12.0";t.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},t.lib=t.prototype={toastify:n,constructor:t,init:function(a){return a||(a={}),this.options={},this.toastElement=null,this.options.text=a.text||t.defaults.text,this.options.node=a.node||t.defaults.node,this.options.duration=a.duration===0?0:a.duration||t.defaults.duration,this.options.selector=a.selector||t.defaults.selector,this.options.callback=a.callback||t.defaults.callback,this.options.destination=a.destination||t.defaults.destination,this.options.newWindow=a.newWindow||t.defaults.newWindow,this.options.close=a.close||t.defaults.close,this.options.gravity=a.gravity==="bottom"?"toastify-bottom":t.defaults.gravity,this.options.positionLeft=a.positionLeft||t.defaults.positionLeft,this.options.position=a.position||t.defaults.position,this.options.backgroundColor=a.backgroundColor||t.defaults.backgroundColor,this.options.avatar=a.avatar||t.defaults.avatar,this.options.className=a.className||t.defaults.className,this.options.stopOnFocus=a.stopOnFocus===void 0?t.defaults.stopOnFocus:a.stopOnFocus,this.options.onClick=a.onClick||t.defaults.onClick,this.options.offset=a.offset||t.defaults.offset,this.options.escapeMarkup=a.escapeMarkup!==void 0?a.escapeMarkup:t.defaults.escapeMarkup,this.options.ariaLive=a.ariaLive||t.defaults.ariaLive,this.options.style=a.style||t.defaults.style,a.backgroundColor&&(this.options.style.background=a.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var a=document.createElement("div");a.className="toastify on "+this.options.className,this.options.position?a.className+=" toastify-"+this.options.position:this.options.positionLeft===!0?(a.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):a.className+=" toastify-right",a.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.');for(var s in this.options.style)a.style[s]=this.options.style[s];if(this.options.ariaLive&&a.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)a.appendChild(this.options.node);else if(this.options.escapeMarkup?a.innerText=this.options.text:a.innerHTML=this.options.text,this.options.avatar!==""){var c=document.createElement("img");c.src=this.options.avatar,c.className="toastify-avatar",this.options.position=="left"||this.options.positionLeft===!0?a.appendChild(c):a.insertAdjacentElement("afterbegin",c)}if(this.options.close===!0){var u=document.createElement("button");u.type="button",u.setAttribute("aria-label","Close"),u.className="toast-close",u.innerHTML="&#10006;",u.addEventListener("click",(function(p){p.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}).bind(this));var l=window.innerWidth>0?window.innerWidth:screen.width;(this.options.position=="left"||this.options.positionLeft===!0)&&l>360?a.insertAdjacentElement("afterbegin",u):a.appendChild(u)}if(this.options.stopOnFocus&&this.options.duration>0){var d=this;a.addEventListener("mouseover",function(p){window.clearTimeout(a.timeOutValue)}),a.addEventListener("mouseleave",function(){a.timeOutValue=window.setTimeout(function(){d.removeElement(a)},d.options.duration)})}if(typeof this.options.destination<"u"&&a.addEventListener("click",(function(p){p.stopPropagation(),this.options.newWindow===!0?window.open(this.options.destination,"_blank"):window.location=this.options.destination}).bind(this)),typeof this.options.onClick=="function"&&typeof this.options.destination>"u"&&a.addEventListener("click",(function(p){p.stopPropagation(),this.options.onClick()}).bind(this)),typeof this.options.offset=="object"){var h=o("x",this.options),v=o("y",this.options),_=this.options.position=="left"?h:"-"+h,y=this.options.gravity=="toastify-top"?v:"-"+v;a.style.transform="translate("+_+","+y+")"}return a},showToast:function(){this.toastElement=this.buildToast();var a;if(typeof this.options.selector=="string"?a=document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||typeof ShadowRoot<"u"&&this.options.selector instanceof ShadowRoot?a=this.options.selector:a=document.body,!a)throw"Root element is not defined";var s=t.defaults.oldestFirst?a.firstChild:a.lastChild;return a.insertBefore(this.toastElement,s),t.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout((function(){this.removeElement(this.toastElement)}).bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(a){a.className=a.className.replace(" on",""),window.setTimeout((function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),a.parentNode&&a.parentNode.removeChild(a),this.options.callback.call(a),t.reposition()}).bind(this),400)}},t.reposition=function(){for(var a={top:15,bottom:15},s={top:15,bottom:15},c={top:15,bottom:15},u=document.getElementsByClassName("toastify"),l,d=0;d<u.length;d++){i(u[d],"toastify-top")===!0?l="toastify-top":l="toastify-bottom";var h=u[d].offsetHeight;l=l.substr(9,l.length-1);var v=15,_=window.innerWidth>0?window.innerWidth:screen.width;_<=360?(u[d].style[l]=c[l]+"px",c[l]+=h+v):i(u[d],"toastify-left")===!0?(u[d].style[l]=a[l]+"px",a[l]+=h+v):(u[d].style[l]=s[l]+"px",s[l]+=h+v)}return this};function o(a,s){return s.offset[a]?isNaN(s.offset[a])?s.offset[a]:s.offset[a]+"px":"0px"}function i(a,s){return!a||typeof s!="string"?!1:!!(a.className&&a.className.trim().split(/\s+/gi).indexOf(s)>-1)}return t.lib.init.prototype=t.lib,t})})(Ag);var wP=Ag.exports;const Lee=$c(wP);var rv={},er={},W={},oe={},It={},tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.getBrokenObjectReason=tr.isBrokenObject=tr.createBrokenObject=void 0;var Ig="__isBrokenObject__",Rg="__reason__";function EP(e,r){r===void 0&&(r={});var t=function(){throw e};return new Proxy(r,{get:function(n,o){if(o===Ig)return!0;if(o===Rg)return e;if(o==="toJSON")return;t()},set:t,apply:t,construct:t,defineProperty:t,deleteProperty:t,getOwnPropertyDescriptor:t,getPrototypeOf:t,has:t,isExtensible:t,ownKeys:t,preventExtensions:t,setPrototypeOf:t})}tr.createBrokenObject=EP;function SP(e){return e!==null&&typeof e=="object"&&e[Ig]===!0}tr.isBrokenObject=SP;function PP(e){return e[Rg]}tr.getBrokenObjectReason=PP;Object.defineProperty(It,"__esModule",{value:!0});It.stringify=void 0;var xp=tr;function TP(e,r){return JSON.stringify(e,function(t,n){return(0,xp.isBrokenObject)(n)?{__isBrokenObject__:!0,__reason__:(0,xp.getBrokenObjectReason)(n)}:typeof n=="bigint"?"".concat(n,"n"):(r==null?void 0:r.sortedElements)===!0&&typeof n=="object"&&!Array.isArray(n)?Object.keys(n).sort().reduce(function(o,i){return o[i]=n[i],o},{}):(r==null?void 0:r.useCustomToString)===!0&&typeof n=="object"&&!Array.isArray(n)&&typeof n.toString=="function"&&n.toString!==Object.prototype.toString?n==null?void 0:n.toString():n})}It.stringify=TP;var a_={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.rawPolyfilledDiagnosticRecord=void 0,e.rawPolyfilledDiagnosticRecord={OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"},Object.freeze(e.rawPolyfilledDiagnosticRecord)})(a_);var jg=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),CP=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),AP=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),IP=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&CP(r,e,t);return AP(r,e),r};Object.defineProperty(oe,"__esModule",{value:!0});oe.PROTOCOL_ERROR=oe.SESSION_EXPIRED=oe.SERVICE_UNAVAILABLE=oe.GQLError=oe.Neo4jError=oe.isRetriableError=oe.newGQLError=oe.newError=void 0;var RP=IP(It),$g=a_,Ng={DATABASE_ERROR:"DATABASE_ERROR",CLIENT_ERROR:"CLIENT_ERROR",TRANSIENT_ERROR:"TRANSIENT_ERROR",UNKNOWN:"UNKNOWN"};Object.freeze(Ng);var jP=Object.values(Ng),kg="ServiceUnavailable";oe.SERVICE_UNAVAILABLE=kg;var Mg="SessionExpired";oe.SESSION_EXPIRED=Mg;var $P="ProtocolError";oe.PROTOCOL_ERROR=$P;var NP="N/A",u_=function(e){jg(r,e);function r(t,n,o,i,a){var s=this,c;return s=e.call(this,t,a!=null?{cause:a}:void 0)||this,s.constructor=r,s.__proto__=r.prototype,s.cause=a??void 0,s.gqlStatus=n,s.gqlStatusDescription=o,s.diagnosticRecord=i,s.classification=BP(s.diagnosticRecord),s.rawClassification=(c=i==null?void 0:i._classification)!==null&&c!==void 0?c:void 0,s.name="GQLError",s}return Object.defineProperty(r.prototype,"diagnosticRecordAsJsonString",{get:function(){return RP.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),r}(Error);oe.GQLError=u_;var s_=function(e){jg(r,e);function r(t,n,o,i,a,s){var c=e.call(this,t,o,i,a,s)||this;return c.constructor=r,c.__proto__=r.prototype,c.code=n,c.name="Neo4jError",c.retriable=LP(n),c}return r.isRetriable=function(t){return t!=null&&t instanceof r&&t.retriable},r}(u_);oe.Neo4jError=s_;function kP(e,r,t,n,o,i){return new s_(e,r??NP,n??"50N42",o??"error: general processing exception - unexpected error. "+e,i??$g.rawPolyfilledDiagnosticRecord,t)}oe.newError=kP;function MP(e,r,t,n,o){return new u_(e,t??"50N42",n??"error: general processing exception - unexpected error. "+e,o??$g.rawPolyfilledDiagnosticRecord,r)}oe.newGQLError=MP;var DP=s_.isRetriable;oe.isRetriableError=DP;function LP(e){return e===kg||e===Mg||FP(e)||UP(e)}function UP(e){return(e==null?void 0:e.includes("TransientError"))===!0}function FP(e){return e==="Neo.ClientError.Security.AuthorizationExpired"}function BP(e){return e===void 0||e._classification===void 0?"UNKNOWN":jP.includes(e._classification)?e==null?void 0:e._classification:"UNKNOWN"}var Le={};Object.defineProperty(Le,"__esModule",{value:!0});Le.toString=Le.toNumber=Le.inSafeRange=Le.isInt=Le.int=void 0;var hi=oe,Wp=new Map,Lr=function(){function e(r,t){this.low=r??0,this.high=t??0}return e.prototype.inSafeRange=function(){return this.greaterThanOrEqual(e.MIN_SAFE_VALUE)&&this.lessThanOrEqual(e.MAX_SAFE_VALUE)},e.prototype.toInt=function(){return this.low},e.prototype.toNumber=function(){return this.high*vn+(this.low>>>0)},e.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(vn)+BigInt(this.low>>>0);var r=this.negate();return BigInt(-1)*(BigInt(r.high>>>0)*BigInt(vn)+BigInt(r.low>>>0))},e.prototype.toNumberOrInfinity=function(){return this.lessThan(e.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(e.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},e.prototype.toString=function(r){if(r=r??10,r<2||r>36)throw RangeError("radix out of range: "+r.toString());if(this.isZero())return"0";var t;if(this.isNegative())if(this.equals(e.MIN_VALUE)){var n=e.fromNumber(r),o=this.div(n);return t=o.multiply(n).subtract(this),o.toString(r)+t.toInt().toString(r)}else return"-"+this.negate().toString(r);var i=e.fromNumber(Math.pow(r,6));t=this;for(var a="";;){var s=t.div(i),c=t.subtract(s.multiply(i)).toInt()>>>0,u=c.toString(r);if(t=s,t.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},e.prototype.valueOf=function(){return this.toBigInt()},e.prototype.getHighBits=function(){return this.high},e.prototype.getLowBits=function(){return this.low},e.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(e.MIN_VALUE)?64:this.negate().getNumBitsAbs();var r=this.high!==0?this.high:this.low,t=0;for(t=31;t>0&&!(r&1<<t);t--);return this.high!==0?t+33:t+1},e.prototype.isZero=function(){return this.high===0&&this.low===0},e.prototype.isNegative=function(){return this.high<0},e.prototype.isPositive=function(){return this.high>=0},e.prototype.isOdd=function(){return(this.low&1)===1},e.prototype.isEven=function(){return(this.low&1)===0},e.prototype.equals=function(r){var t=e.fromValue(r);return this.high===t.high&&this.low===t.low},e.prototype.notEquals=function(r){return!this.equals(r)},e.prototype.lessThan=function(r){return this.compare(r)<0},e.prototype.lessThanOrEqual=function(r){return this.compare(r)<=0},e.prototype.greaterThan=function(r){return this.compare(r)>0},e.prototype.greaterThanOrEqual=function(r){return this.compare(r)>=0},e.prototype.compare=function(r){var t=e.fromValue(r);if(this.equals(t))return 0;var n=this.isNegative(),o=t.isNegative();return n&&!o?-1:!n&&o?1:this.subtract(t).isNegative()?-1:1},e.prototype.negate=function(){return this.equals(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.add=function(r){var t=e.fromValue(r),n=this.high>>>16,o=this.high&65535,i=this.low>>>16,a=this.low&65535,s=t.high>>>16,c=t.high&65535,u=t.low>>>16,l=t.low&65535,d=0,h=0,v=0,_=0;return _+=a+l,v+=_>>>16,_&=65535,v+=i+u,h+=v>>>16,v&=65535,h+=o+c,d+=h>>>16,h&=65535,d+=n+s,d&=65535,e.fromBits(v<<16|_,d<<16|h)},e.prototype.subtract=function(r){var t=e.fromValue(r);return this.add(t.negate())},e.prototype.multiply=function(r){if(this.isZero())return e.ZERO;var t=e.fromValue(r);if(t.isZero())return e.ZERO;if(this.equals(e.MIN_VALUE))return t.isOdd()?e.MIN_VALUE:e.ZERO;if(t.equals(e.MIN_VALUE))return this.isOdd()?e.MIN_VALUE:e.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(qp)&&t.lessThan(qp))return e.fromNumber(this.toNumber()*t.toNumber());var n=this.high>>>16,o=this.high&65535,i=this.low>>>16,a=this.low&65535,s=t.high>>>16,c=t.high&65535,u=t.low>>>16,l=t.low&65535,d=0,h=0,v=0,_=0;return _+=a*l,v+=_>>>16,_&=65535,v+=i*l,h+=v>>>16,v&=65535,v+=a*u,h+=v>>>16,v&=65535,h+=o*l,d+=h>>>16,h&=65535,h+=i*u,d+=h>>>16,h&=65535,h+=a*c,d+=h>>>16,h&=65535,d+=n*l+o*u+i*c+a*s,d&=65535,e.fromBits(v<<16|_,d<<16|h)},e.prototype.div=function(r){var t=e.fromValue(r);if(t.isZero())throw(0,hi.newError)("division by zero");if(this.isZero())return e.ZERO;var n,o,i;if(this.equals(e.MIN_VALUE)){if(t.equals(e.ONE)||t.equals(e.NEG_ONE))return e.MIN_VALUE;if(t.equals(e.MIN_VALUE))return e.ONE;var a=this.shiftRight(1);return n=a.div(t).shiftLeft(1),n.equals(e.ZERO)?t.isNegative()?e.ONE:e.NEG_ONE:(o=this.subtract(t.multiply(n)),i=n.add(o.div(t)),i)}else if(t.equals(e.MIN_VALUE))return e.ZERO;if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();for(i=e.ZERO,o=this;o.greaterThanOrEqual(t);){n=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),c=s<=48?1:Math.pow(2,s-48),u=e.fromNumber(n),l=u.multiply(t);l.isNegative()||l.greaterThan(o);)n-=c,u=e.fromNumber(n),l=u.multiply(t);u.isZero()&&(u=e.ONE),i=i.add(u),o=o.subtract(l)}return i},e.prototype.modulo=function(r){var t=e.fromValue(r);return this.subtract(this.div(t).multiply(t))},e.prototype.not=function(){return e.fromBits(~this.low,~this.high)},e.prototype.and=function(r){var t=e.fromValue(r);return e.fromBits(this.low&t.low,this.high&t.high)},e.prototype.or=function(r){var t=e.fromValue(r);return e.fromBits(this.low|t.low,this.high|t.high)},e.prototype.xor=function(r){var t=e.fromValue(r);return e.fromBits(this.low^t.low,this.high^t.high)},e.prototype.shiftLeft=function(r){var t=e.toNumber(r);return(t&=63)===0?e.ZERO:t<32?e.fromBits(this.low<<t,this.high<<t|this.low>>>32-t):e.fromBits(0,this.low<<t-32)},e.prototype.shiftRight=function(r){var t=e.toNumber(r),n=e.toNumber(r);return(t&=63)===0?e.ZERO:n<32?e.fromBits(this.low>>>t|this.high<<32-t,this.high>>t):e.fromBits(this.high>>t-32,this.high>=0?0:-1)},e.isInteger=function(r){return(r==null?void 0:r.__isInteger__)===!0},e.fromInt=function(r){var t;if(r=r|0,r>=-128&&r<128&&(t=Wp.get(r),t!=null))return t;var n=new e(r,r<0?-1:0);return r>=-128&&r<128&&Wp.set(r,n),n},e.fromBits=function(r,t){return new e(r,t)},e.fromNumber=function(r){return isNaN(r)||!isFinite(r)?e.ZERO:r<=-zp?e.MIN_VALUE:r+1>=zp?e.MAX_VALUE:r<0?e.fromNumber(-r).negate():new e(r%vn|0,r/vn|0)},e.fromString=function(r,t,n){var o=n===void 0?{}:n,i=o.strictStringValidation;if(r.length===0)throw(0,hi.newError)("number format error: empty string");if(r==="NaN"||r==="Infinity"||r==="+Infinity"||r==="-Infinity")return e.ZERO;if(t=t??10,t<2||t>36)throw(0,hi.newError)("radix out of range: "+t.toString());var a;if((a=r.indexOf("-"))>0)throw(0,hi.newError)('number format error: interior "-" character: '+r);if(a===0)return e.fromString(r.substring(1),t).negate();for(var s=e.fromNumber(Math.pow(t,8)),c=e.ZERO,u=0;u<r.length;u+=8){var l=Math.min(8,r.length-u),d=r.substring(u,u+l),h=parseInt(d,t);if(i===!0&&!WP(d,h,t))throw(0,hi.newError)('number format error: "'.concat(d,'" is NaN in radix ').concat(t,": ").concat(r));if(l<8){var v=e.fromNumber(Math.pow(t,l));c=c.multiply(v).add(e.fromNumber(h))}else c=c.multiply(s),c=c.add(e.fromNumber(h))}return c},e.fromValue=function(r,t){return t===void 0&&(t={}),r instanceof e?r:typeof r=="number"?(t.ceilFloat===!0&&(r=Math.ceil(r)),e.fromNumber(r)):typeof r=="string"?e.fromString(r,void 0,t):typeof r=="bigint"?e.fromString(r.toString()):new e(r.low,r.high)},e.toNumber=function(r){switch(typeof r){case"number":return r;case"bigint":return Number(r);default:return e.fromValue(r).toNumber()}},e.toString=function(r,t){return e.fromValue(r).toString(t)},e.inSafeRange=function(r){return e.fromValue(r).inSafeRange()},e.ZERO=e.fromInt(0),e.ONE=e.fromInt(1),e.NEG_ONE=e.fromInt(-1),e.MAX_VALUE=e.fromBits(-1,2147483647),e.MIN_VALUE=e.fromBits(0,-2147483648),e.MIN_SAFE_VALUE=e.fromBits(1,-2097152),e.MAX_SAFE_VALUE=e.fromBits(-1,2097151),e.__isInteger__=!0,e}();function xP(e,r,t){var n=e.toString(r),o=Math.max(t-n.length,0),i="0".repeat(o);return"".concat(i).concat(n)}function WP(e,r,t){return!Number.isNaN(e)&&!Number.isNaN(r)&&xP(r,t,e.length)===e.toLowerCase()}Object.defineProperty(Lr.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var Vp=65536,VP=1<<24,vn=Vp*Vp,zP=vn*vn,zp=zP/2,qp=Lr.fromInt(VP),qP=Lr.fromValue;Le.int=qP;var HP=Lr.isInteger;Le.isInt=HP;var GP=Lr.inSafeRange;Le.inSafeRange=GP;var KP=Lr.toNumber;Le.toNumber=KP;var YP=Lr.toString;Le.toString=YP;Le.default=Lr;var le={},c_={},Q={},ZP=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),QP=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),XP=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&ZP(r,e,t);return QP(r,e),r},JP=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Q,"__esModule",{value:!0});Q.ENCRYPTION_OFF=Q.ENCRYPTION_ON=Q.equals=Q.validateQueryAndParameters=Q.toNumber=Q.assertValidDate=Q.assertNumberOrInteger=Q.assertNumber=Q.assertString=Q.assertObject=Q.isString=Q.isObject=Q.isEmptyObjectOrNull=void 0;var nv=XP(Le),On=It,eT="ENCRYPTION_ON";Q.ENCRYPTION_ON=eT;var tT="ENCRYPTION_OFF";Q.ENCRYPTION_OFF=tT;function rT(e){if(e===null)return!0;if(!Nc(e))return!1;for(var r in e)if(e[r]!==void 0)return!1;return!0}Q.isEmptyObjectOrNull=rT;function Nc(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}Q.isObject=Nc;function nT(e,r,t){var n,o,i="",a=r??{},s=(n=t==null?void 0:t.skipAsserts)!==null&&n!==void 0?n:!1;return typeof e=="string"?i=e:e instanceof String?i=e.toString():typeof e=="object"&&e.text!=null&&(i=e.text,a=(o=e.parameters)!==null&&o!==void 0?o:{}),s||(sT(i),cT(a)),{validatedQuery:i,params:a}}Q.validateQueryAndParameters=nT;function oT(e,r){if(!Nc(e))throw new TypeError(r+" expected to be an object but was: "+(0,On.stringify)(e));return e}Q.assertObject=oT;function Dg(e,r){if(!Lg(e))throw new TypeError((0,On.stringify)(r)+" expected to be string but was: "+(0,On.stringify)(e));return e}Q.assertString=Dg;function iT(e,r){if(typeof e!="number")throw new TypeError(r+" expected to be a number but was: "+(0,On.stringify)(e));return e}Q.assertNumber=iT;function aT(e,r){if(typeof e!="number"&&typeof e!="bigint"&&!(0,nv.isInt)(e))throw new TypeError(r+" expected to be either a number or an Integer object but was: "+(0,On.stringify)(e));return e}Q.assertNumberOrInteger=aT;function uT(e,r){if(Object.prototype.toString.call(e)!=="[object Date]")throw new TypeError(r+" expected to be a standard JavaScript Date but was: "+(0,On.stringify)(e));if(Number.isNaN(e.getTime()))throw new TypeError(r+" expected to be valid JavaScript Date but its time was NaN: "+(0,On.stringify)(e));return e}Q.assertValidDate=uT;function sT(e){if(Dg(e,"Cypher query"),e.trim().length===0)throw new TypeError("Cypher query is expected to be a non-empty string.")}function cT(e){if(!Nc(e)){var r=e.constructor!=null?" "+e.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(r," ").concat(JSON.stringify(e)))}}function Lg(e){return Object.prototype.toString.call(e)==="[object String]"}Q.isString=Lg;function Ug(e,r){var t,n;if(e===r)return!0;if(e===null||r===null)return!1;if(typeof e=="object"&&typeof r=="object"){var o=Object.keys(e),i=Object.keys(r);if(o.length!==i.length)return!1;try{for(var a=JP(o),s=a.next();!s.done;s=a.next()){var c=s.value;if(!Ug(e[c],r[c]))return!1}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0}return!1}Q.equals=Ug;function lT(e){return e instanceof nv.default?e.toNumber():typeof e=="bigint"?(0,nv.int)(e).toNumber():e}Q.toNumber=lT;(function(e){var r=f&&f.__createBinding||(Object.create?function(m,C,j,L){L===void 0&&(L=j);var Z=Object.getOwnPropertyDescriptor(C,j);(!Z||("get"in Z?!C.__esModule:Z.writable||Z.configurable))&&(Z={enumerable:!0,get:function(){return C[j]}}),Object.defineProperty(m,L,Z)}:function(m,C,j,L){L===void 0&&(L=j),m[L]=C[j]}),t=f&&f.__setModuleDefault||(Object.create?function(m,C){Object.defineProperty(m,"default",{enumerable:!0,value:C})}:function(m,C){m.default=C}),n=f&&f.__importStar||function(m){if(m&&m.__esModule)return m;var C={};if(m!=null)for(var j in m)j!=="default"&&Object.prototype.hasOwnProperty.call(m,j)&&r(C,m,j);return t(C,m),C};Object.defineProperty(e,"__esModule",{value:!0}),e.floorMod=e.floorDiv=e.assertValidZoneId=e.assertValidNanosecond=e.assertValidSecond=e.assertValidMinute=e.assertValidHour=e.assertValidDay=e.assertValidMonth=e.assertValidYear=e.timeZoneOffsetInSeconds=e.totalNanoseconds=e.newDate=e.toStandardDate=e.isoStringToStandardDate=e.dateToIsoString=e.timeZoneOffsetToIsoString=e.timeToIsoString=e.durationToIsoString=e.dateToEpochDay=e.localDateTimeToEpochSecond=e.localTimeToNanoOfDay=e.normalizeNanosecondsForDuration=e.normalizeSecondsForDuration=e.SECONDS_PER_DAY=e.DAYS_PER_400_YEAR_CYCLE=e.DAYS_0000_TO_1970=e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE=e.NANOS_PER_MILLISECOND=e.NANOS_PER_SECOND=e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE=e.MINUTES_PER_HOUR=e.NANOSECOND_OF_SECOND_RANGE=e.SECOND_OF_MINUTE_RANGE=e.MINUTE_OF_HOUR_RANGE=e.HOUR_OF_DAY_RANGE=e.DAY_OF_MONTH_RANGE=e.MONTH_OF_YEAR_RANGE=e.YEAR_RANGE=void 0;var o=n(Le),i=oe,a=Q,s=function(){function m(C,j){this._minNumber=C,this._maxNumber=j,this._minInteger=(0,o.int)(C),this._maxInteger=(0,o.int)(j)}return m.prototype.contains=function(C){if((0,o.isInt)(C)&&C instanceof o.default)return C.greaterThanOrEqual(this._minInteger)&&C.lessThanOrEqual(this._maxInteger);if(typeof C=="bigint"){var j=(0,o.int)(C);return j.greaterThanOrEqual(this._minInteger)&&j.lessThanOrEqual(this._maxInteger)}else return C>=this._minNumber&&C<=this._maxNumber},m.prototype.toString=function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")},m}();e.YEAR_RANGE=new s(-999999999,999999999),e.MONTH_OF_YEAR_RANGE=new s(1,12),e.DAY_OF_MONTH_RANGE=new s(1,31),e.HOUR_OF_DAY_RANGE=new s(0,23),e.MINUTE_OF_HOUR_RANGE=new s(0,59),e.SECOND_OF_MINUTE_RANGE=new s(0,59),e.NANOSECOND_OF_SECOND_RANGE=new s(0,999999999),e.MINUTES_PER_HOUR=60,e.SECONDS_PER_MINUTE=60,e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE*e.MINUTES_PER_HOUR,e.NANOS_PER_SECOND=1e9,e.NANOS_PER_MILLISECOND=1e6,e.NANOS_PER_MINUTE=e.NANOS_PER_SECOND*e.SECONDS_PER_MINUTE,e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE*e.MINUTES_PER_HOUR,e.DAYS_0000_TO_1970=719528,e.DAYS_PER_400_YEAR_CYCLE=146097,e.SECONDS_PER_DAY=86400;function c(m,C){return(0,o.int)(m).add(J(C,e.NANOS_PER_SECOND))}e.normalizeSecondsForDuration=c;function u(m){return fe(m,e.NANOS_PER_SECOND)}e.normalizeNanosecondsForDuration=u;function l(m,C,j,L){m=(0,o.int)(m),C=(0,o.int)(C),j=(0,o.int)(j),L=(0,o.int)(L);var Z=m.multiply(e.NANOS_PER_HOUR);return Z=Z.add(C.multiply(e.NANOS_PER_MINUTE)),Z=Z.add(j.multiply(e.NANOS_PER_SECOND)),Z.add(L)}e.localTimeToNanoOfDay=l;function d(m,C,j,L,Z,ke,mt){var Qr=h(m,C,j),di=z(L,Z,ke);return Qr.multiply(e.SECONDS_PER_DAY).add(di)}e.localDateTimeToEpochSecond=d;function h(m,C,j){m=(0,o.int)(m),C=(0,o.int)(C),j=(0,o.int)(j);var L=m.multiply(365);return m.greaterThanOrEqual(0)?L=L.add(m.add(3).div(4).subtract(m.add(99).div(100)).add(m.add(399).div(400))):L=L.subtract(m.div(-4).subtract(m.div(-100)).add(m.div(-400))),L=L.add(C.multiply(367).subtract(362).div(12)),L=L.add(j.subtract(1)),C.greaterThan(2)&&(L=L.subtract(1),N(m)||(L=L.subtract(1))),L.subtract(e.DAYS_0000_TO_1970)}e.dateToEpochDay=h;function v(m,C,j,L){var Z=de(m),ke=de(C),mt=Se(j,L);return"P".concat(Z,"M").concat(ke,"DT").concat(mt,"S")}e.durationToIsoString=v;function _(m,C,j,L){var Z=de(m,2),ke=de(C,2),mt=de(j,2),Qr=Y(L);return"".concat(Z,":").concat(ke,":").concat(mt).concat(Qr)}e.timeToIsoString=_;function y(m){if(m=(0,o.int)(m),m.equals(0))return"Z";var C=m.isNegative();C&&(m=m.multiply(-1));var j=C?"-":"+",L=de(m.div(e.SECONDS_PER_HOUR),2),Z=de(m.div(e.SECONDS_PER_MINUTE).modulo(e.MINUTES_PER_HOUR),2),ke=m.modulo(e.SECONDS_PER_MINUTE),mt=ke.equals(0)?null:de(ke,2);return mt!=null?"".concat(j).concat(L,":").concat(Z,":").concat(mt):"".concat(j).concat(L,":").concat(Z)}e.timeZoneOffsetToIsoString=y;function p(m,C,j){var L=Ce(m),Z=de(C,2),ke=de(j,2);return"".concat(L,"-").concat(Z,"-").concat(ke)}e.dateToIsoString=p;function b(m){return new Date(m)}e.isoStringToStandardDate=b;function g(m){return new Date(m)}e.toStandardDate=g;function w(m){return new Date(m)}e.newDate=w;function E(m,C){C=C??0;var j=m.getMilliseconds()*e.NANOS_PER_MILLISECOND;return ot(C,j)}e.totalNanoseconds=E;function S(m){var C=m.getSeconds()-m.getUTCSeconds(),j=m.getMinutes()-m.getUTCMinutes(),L=m.getHours()-m.getUTCHours(),Z=T(m);return L*e.SECONDS_PER_HOUR+j*e.SECONDS_PER_MINUTE+C+Z*e.SECONDS_PER_DAY}e.timeZoneOffsetInSeconds=S;function T(m){return m.getMonth()===m.getUTCMonth()?m.getDate()-m.getUTCDate():m.getFullYear()>m.getUTCFullYear()||m.getMonth()>m.getUTCMonth()&&m.getFullYear()===m.getUTCFullYear()?m.getDate()+P(m.getUTCMonth(),m.getUTCFullYear())-m.getUTCDate():m.getDate()-(m.getUTCDate()+P(m.getMonth(),m.getFullYear()))}function P(m,C){return m===1?C%400===0||C%4===0&&C%100!==0?29:28:[0,2,4,6,7,9,11].includes(m)?31:30}function I(m){return X(m,e.YEAR_RANGE,"Year")}e.assertValidYear=I;function k(m){return X(m,e.MONTH_OF_YEAR_RANGE,"Month")}e.assertValidMonth=k;function D(m){return X(m,e.DAY_OF_MONTH_RANGE,"Day")}e.assertValidDay=D;function K(m){return X(m,e.HOUR_OF_DAY_RANGE,"Hour")}e.assertValidHour=K;function V(m){return X(m,e.MINUTE_OF_HOUR_RANGE,"Minute")}e.assertValidMinute=V;function H(m){return X(m,e.SECOND_OF_MINUTE_RANGE,"Second")}e.assertValidSecond=H;function ue(m){return X(m,e.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")}e.assertValidNanosecond=ue;var B=new Map,re=function(m,C){return(0,i.newError)("".concat(C,' is expected to be a valid ZoneId but was: "').concat(m,'"'))};function x(m,C){var j=B.get(C);if(j!==!0){if(j===!1)throw re(C,m);try{Intl.DateTimeFormat(void 0,{timeZone:C}),B.set(C,!0)}catch{throw B.set(C,!1),re(C,m)}}}e.assertValidZoneId=x;function X(m,C,j){if((0,a.assertNumberOrInteger)(m,j),!C.contains(m))throw(0,i.newError)("".concat(j," is expected to be in range ").concat(C.toString()," but was: ").concat(m.toString()));return m}function z(m,C,j){m=(0,o.int)(m),C=(0,o.int)(C),j=(0,o.int)(j);var L=m.multiply(e.SECONDS_PER_HOUR);return L=L.add(C.multiply(e.SECONDS_PER_MINUTE)),L.add(j)}function N(m){return m=(0,o.int)(m),m.modulo(4).equals(0)?m.modulo(100).equals(0)?!!m.modulo(400).equals(0):!0:!1}function J(m,C){m=(0,o.int)(m),C=(0,o.int)(C);var j=m.div(C);return m.isPositive()!==C.isPositive()&&j.multiply(C).notEquals(m)&&(j=j.subtract(1)),j}e.floorDiv=J;function fe(m,C){return m=(0,o.int)(m),C=(0,o.int)(C),m.subtract(J(m,C).multiply(C))}e.floorMod=fe;function Se(m,C){m=(0,o.int)(m),C=(0,o.int)(C);var j,L,Z=m.isNegative(),ke=C.greaterThan(0);return Z&&ke?m.equals(-1)?j="-0":j=m.add(1).toString():j=m.toString(),ke&&(Z?L=Y(C.negate().add(2*e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND)):L=Y(C.add(e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND))),L!=null?j+L:j}function Y(m){return m=(0,o.int)(m),m.equals(0)?"":"."+de(m,9)}function Ce(m){var C=(0,o.int)(m);return C.isNegative()||C.greaterThan(9999)?de(C,6,{usePositiveSign:!0}):de(C,4)}function de(m,C,j){m=(0,o.int)(m);var L=m.isNegative();L&&(m=m.negate());var Z=m.toString();if(C!=null)for(;Z.length<C;)Z="0"+Z;return L?"-"+Z:(j==null?void 0:j.usePositiveSign)===!0?"+"+Z:Z}function ot(m,C){return m instanceof o.default?m.add(C):typeof m=="bigint"?m+BigInt(C):m+C}})(c_);var fT=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),dT=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Fg=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&fT(r,e,t);return dT(r,e),r},hT=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(le,"__esModule",{value:!0});le.isDateTime=le.DateTime=le.isLocalDateTime=le.LocalDateTime=le.isDate=le.Date=le.isTime=le.Time=le.isLocalTime=le.LocalTime=le.isDuration=le.Duration=void 0;var q=Fg(c_),Jt=Q,vT=oe,bn=Fg(Le),Io={value:!0,enumerable:!1,configurable:!1,writable:!1},Bg="__isDuration__",xg="__isLocalTime__",Wg="__isTime__",Vg="__isDate__",zg="__isLocalDateTime__",qg="__isDateTime__",Hg=function(){function e(r,t,n,o){this.months=(0,Jt.assertNumberOrInteger)(r,"Months"),this.days=(0,Jt.assertNumberOrInteger)(t,"Days"),(0,Jt.assertNumberOrInteger)(n,"Seconds"),(0,Jt.assertNumberOrInteger)(o,"Nanoseconds"),this.seconds=q.normalizeSecondsForDuration(n,o),this.nanoseconds=q.normalizeNanosecondsForDuration(o),Object.freeze(this)}return e.prototype.toString=function(){return q.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},e}();le.Duration=Hg;Object.defineProperty(Hg.prototype,Bg,Io);function _T(e){return Ro(e,Bg)}le.isDuration=_T;var Gg=function(){function e(r,t,n,o){this.hour=q.assertValidHour(r),this.minute=q.assertValidMinute(t),this.second=q.assertValidSecond(n),this.nanosecond=q.assertValidNanosecond(o),Object.freeze(this)}return e.fromStandardDate=function(r,t){ra(r,t);var n=q.totalNanoseconds(r,t);return new e(r.getHours(),r.getMinutes(),r.getSeconds(),n instanceof bn.default?n.toInt():typeof n=="bigint"?(0,bn.int)(n).toInt():n)},e.prototype.toString=function(){return q.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},e}();le.LocalTime=Gg;Object.defineProperty(Gg.prototype,xg,Io);function pT(e){return Ro(e,xg)}le.isLocalTime=pT;var Kg=function(){function e(r,t,n,o,i){this.hour=q.assertValidHour(r),this.minute=q.assertValidMinute(t),this.second=q.assertValidSecond(n),this.nanosecond=q.assertValidNanosecond(o),this.timeZoneOffsetSeconds=(0,Jt.assertNumberOrInteger)(i,"Time zone offset in seconds"),Object.freeze(this)}return e.fromStandardDate=function(r,t){return ra(r,t),new e(r.getHours(),r.getMinutes(),r.getSeconds(),(0,bn.toNumber)(q.totalNanoseconds(r,t)),q.timeZoneOffsetInSeconds(r))},e.prototype.toString=function(){return q.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+q.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},e}();le.Time=Kg;Object.defineProperty(Kg.prototype,Wg,Io);function yT(e){return Ro(e,Wg)}le.isTime=yT;var Yg=function(){function e(r,t,n){this.year=q.assertValidYear(r),this.month=q.assertValidMonth(t),this.day=q.assertValidDay(n),Object.freeze(this)}return e.fromStandardDate=function(r){return ra(r),new e(r.getFullYear(),r.getMonth()+1,r.getDate())},e.prototype.toStandardDate=function(){return q.isoStringToStandardDate(this.toString())},e.prototype.toString=function(){return q.dateToIsoString(this.year,this.month,this.day)},e}();le.Date=Yg;Object.defineProperty(Yg.prototype,Vg,Io);function bT(e){return Ro(e,Vg)}le.isDate=bT;var Zg=function(){function e(r,t,n,o,i,a,s){this.year=q.assertValidYear(r),this.month=q.assertValidMonth(t),this.day=q.assertValidDay(n),this.hour=q.assertValidHour(o),this.minute=q.assertValidMinute(i),this.second=q.assertValidSecond(a),this.nanosecond=q.assertValidNanosecond(s),Object.freeze(this)}return e.fromStandardDate=function(r,t){return ra(r,t),new e(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),(0,bn.toNumber)(q.totalNanoseconds(r,t)))},e.prototype.toStandardDate=function(){return q.isoStringToStandardDate(this.toString())},e.prototype.toString=function(){return Xg(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},e}();le.LocalDateTime=Zg;Object.defineProperty(Zg.prototype,zg,Io);function mT(e){return Ro(e,zg)}le.isLocalDateTime=mT;var Qg=function(){function e(r,t,n,o,i,a,s,c,u){this.year=q.assertValidYear(r),this.month=q.assertValidMonth(t),this.day=q.assertValidDay(n),this.hour=q.assertValidHour(o),this.minute=q.assertValidMinute(i),this.second=q.assertValidSecond(a),this.nanosecond=q.assertValidNanosecond(s);var l=hT(OT(c,u),2),d=l[0],h=l[1];this.timeZoneOffsetSeconds=d,this.timeZoneId=h??void 0,Object.freeze(this)}return e.fromStandardDate=function(r,t){return ra(r,t),new e(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),(0,bn.toNumber)(q.totalNanoseconds(r,t)),q.timeZoneOffsetInSeconds(r),null)},e.prototype.toStandardDate=function(){return q.toStandardDate(this._toUTC())},e.prototype.toString=function(){var r,t=Xg(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),n=this.timeZoneOffsetSeconds!=null?q.timeZoneOffsetToIsoString((r=this.timeZoneOffsetSeconds)!==null&&r!==void 0?r:0):"",o=this.timeZoneId!=null?"[".concat(this.timeZoneId,"]"):"";return t+n+o},e.prototype._toUTC=function(){var r;if(this.timeZoneOffsetSeconds===void 0)throw new Error("Requires DateTime created with time zone offset");var t=q.localDateTimeToEpochSecond(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),n=t.subtract((r=this.timeZoneOffsetSeconds)!==null&&r!==void 0?r:0);return(0,bn.int)(n).multiply(1e3).add((0,bn.int)(this.nanosecond).div(1e6)).toNumber()},e}();le.DateTime=Qg;Object.defineProperty(Qg.prototype,qg,Io);function gT(e){return Ro(e,qg)}le.isDateTime=gT;function Ro(e,r){return e!=null&&e[r]===!0}function Xg(e,r,t,n,o,i,a){return q.dateToIsoString(e,r,t)+"T"+q.timeToIsoString(n,o,i,a)}function OT(e,r){var t=e!=null,n=r!=null&&r!=="";if(!t&&!n)throw(0,vT.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(e," and id: ").concat(r));var o=[void 0,void 0];return t&&((0,Jt.assertNumberOrInteger)(e,"Time zone offset in seconds"),o[0]=e),n&&((0,Jt.assertString)(r,"Time zone ID"),q.assertValidZoneId("Time zone ID",r),o[1]=r),o}function ra(e,r){(0,Jt.assertValidDate)(e,"Standard date"),r!=null&&(0,Jt.assertNumberOrInteger)(r,"Nanosecond")}var be={};Object.defineProperty(be,"__esModule",{value:!0});be.isPathSegment=be.PathSegment=be.isPath=be.Path=be.isUnboundRelationship=be.UnboundRelationship=be.isRelationship=be.Relationship=be.isNode=be.Node=void 0;var l_=It,na={value:!0,enumerable:!1,configurable:!1,writable:!1},Jg="__isNode__",e0="__isRelationship__",t0="__isUnboundRelationship__",r0="__isPath__",n0="__isPathSegment__";function oa(e,r){return e!=null&&e[r]===!0}var o0=function(){function e(r,t,n,o){this.identity=r,this.labels=t,this.properties=n,this.elementId=Li(o,function(){return r.toString()})}return e.prototype.toString=function(){for(var r="("+this.elementId,t=0;t<this.labels.length;t++)r+=":"+this.labels[t];var n=Object.keys(this.properties);if(n.length>0){r+=" {";for(var t=0;t<n.length;t++)t>0&&(r+=","),r+=n[t]+":"+(0,l_.stringify)(this.properties[n[t]]);r+="}"}return r+=")",r},e}();be.Node=o0;Object.defineProperty(o0.prototype,Jg,na);function wT(e){return oa(e,Jg)}be.isNode=wT;var rc=function(){function e(r,t,n,o,i,a,s,c){this.identity=r,this.start=t,this.end=n,this.type=o,this.properties=i,this.elementId=Li(a,function(){return r.toString()}),this.startNodeElementId=Li(s,function(){return t.toString()}),this.endNodeElementId=Li(c,function(){return n.toString()})}return e.prototype.toString=function(){var r="("+this.startNodeElementId+")-[:"+this.type,t=Object.keys(this.properties);if(t.length>0){r+=" {";for(var n=0;n<t.length;n++)n>0&&(r+=","),r+=t[n]+":"+(0,l_.stringify)(this.properties[t[n]]);r+="}"}return r+="]->("+this.endNodeElementId+")",r},e}();be.Relationship=rc;Object.defineProperty(rc.prototype,e0,na);function ET(e){return oa(e,e0)}be.isRelationship=ET;var i0=function(){function e(r,t,n,o){this.identity=r,this.type=t,this.properties=n,this.elementId=Li(o,function(){return r.toString()})}return e.prototype.bind=function(r,t){return new rc(this.identity,r,t,this.type,this.properties,this.elementId)},e.prototype.bindTo=function(r,t){return new rc(this.identity,r.identity,t.identity,this.type,this.properties,this.elementId,r.elementId,t.elementId)},e.prototype.toString=function(){var r="-[:"+this.type,t=Object.keys(this.properties);if(t.length>0){r+=" {";for(var n=0;n<t.length;n++)n>0&&(r+=","),r+=t[n]+":"+(0,l_.stringify)(this.properties[t[n]]);r+="}"}return r+="]->",r},e}();be.UnboundRelationship=i0;Object.defineProperty(i0.prototype,t0,na);function ST(e){return oa(e,t0)}be.isUnboundRelationship=ST;var a0=function(){function e(r,t,n){this.start=r,this.relationship=t,this.end=n}return e}();be.PathSegment=a0;Object.defineProperty(a0.prototype,n0,na);function PT(e){return oa(e,n0)}be.isPathSegment=PT;var u0=function(){function e(r,t,n){this.start=r,this.end=t,this.segments=n,this.length=n.length}return e}();be.Path=u0;Object.defineProperty(u0.prototype,r0,na);function TT(e){return oa(e,r0)}be.isPath=TT;function Li(e,r){return e??r()}var f_={},Jd=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},eh=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},th=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(f_,"__esModule",{value:!0});var Hp=oe;function CT(e){var r={};return e.forEach(function(t,n){r[t]=n}),r}var AT=function(){function e(r,t,n){this.keys=r,this.length=r.length,this._fields=t,this._fieldLookup=n??CT(r)}return e.prototype.forEach=function(r){var t,n;try{for(var o=eh(this.entries()),i=o.next();!i.done;i=o.next()){var a=th(i.value,2),s=a[0],c=a[1];r(c,s,this)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},e.prototype.map=function(r){var t,n,o=[];try{for(var i=eh(this.entries()),a=i.next();!a.done;a=i.next()){var s=th(a.value,2),c=s[0],u=s[1];o.push(r(u,c,this))}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return o},e.prototype.entries=function(){var r;return Jd(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,[this.keys[r],this._fields[r]]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype.values=function(){var r;return Jd(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,this._fields[r]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype[Symbol.iterator]=function(){var r;return Jd(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,this._fields[r]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype.toObject=function(){var r,t,n={};try{for(var o=eh(this.entries()),i=o.next();!i.done;i=o.next()){var a=th(i.value,2),s=a[0],c=a[1];n[s]=c}}catch(u){r={error:u}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(r)throw r.error}}return n},e.prototype.get=function(r){var t;if(typeof r!="number"){if(t=this._fieldLookup[r],t===void 0)throw(0,Hp.newError)("This record has no field with key '".concat(r.toString(),"', available keys are: [")+this.keys.toString()+"].")}else t=r;if(t>this._fields.length-1||t<0)throw(0,Hp.newError)("This record has no field with index '"+t.toString()+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[t]},e.prototype.has=function(r){return typeof r=="number"?r>=0&&r<this._fields.length:this._fieldLookup[r]!==void 0},e}();f_.default=AT;var vo={};Object.defineProperty(vo,"__esModule",{value:!0});vo.isPoint=vo.Point=void 0;var gs=Q,s0="__isPoint__",c0=function(){function e(r,t,n,o){this.srid=(0,gs.assertNumberOrInteger)(r,"SRID"),this.x=(0,gs.assertNumber)(t,"X coordinate"),this.y=(0,gs.assertNumber)(n,"Y coordinate"),this.z=o==null?o:(0,gs.assertNumber)(o,"Z coordinate"),Object.freeze(this)}return e.prototype.toString=function(){return this.z!=null&&!isNaN(this.z)?"Point{srid=".concat(Jr(this.srid),", x=").concat(Jr(this.x),", y=").concat(Jr(this.y),", z=").concat(Jr(this.z),"}"):"Point{srid=".concat(Jr(this.srid),", x=").concat(Jr(this.x),", y=").concat(Jr(this.y),"}")},e}();vo.Point=c0;function Jr(e){return Number.isInteger(e)?e.toString()+".0":e.toString()}Object.defineProperty(c0.prototype,s0,{value:!0,enumerable:!1,configurable:!1,writable:!1});function IT(e){var r=e;return e!=null&&r[s0]===!0}vo.isPoint=IT;var He={},ee={},Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});Sr.FailedObserver=Sr.CompletedObserver=void 0;var RT=function(){function e(){}return e.prototype.subscribe=function(r){Ui(r,r.onKeys,[]),Ui(r,r.onCompleted,{})},e.prototype.cancel=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.prepareToHandleSingleResponse=function(){},e.prototype.markCompleted=function(){},e.prototype.onError=function(r){throw new Error("CompletedObserver not supposed to call onError",{cause:r})},e}();Sr.CompletedObserver=RT;var jT=function(){function e(r){var t=r.error,n=r.onError;this._error=t,this._beforeError=n,this._observers=[],this.onError(t)}return e.prototype.subscribe=function(r){Ui(r,r.onError,this._error),this._observers.push(r)},e.prototype.onError=function(r){Ui(this,this._beforeError,r),this._observers.forEach(function(t){return Ui(t,t.onError,r)})},e.prototype.cancel=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.markCompleted=function(){},e.prototype.prepareToHandleSingleResponse=function(){},e}();Sr.FailedObserver=jT;function Ui(e,r,t){r!=null&&r.bind(e)(t)}var Ur={},$T=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),NT=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),kT=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&$T(r,e,t);return NT(r,e),r},MT=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},DT=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.Bookmarks=void 0;var Gp=kT(Q),LT="bookmarks",l0=function(){function e(r){this._values=FT(r)}return e.empty=function(){return UT},e.prototype.isEmpty=function(){return this._values.length===0},e.prototype.values=function(){return this._values},e.prototype[Symbol.iterator]=function(){return this._values[Symbol.iterator]()},e.prototype.asBeginTransactionParameters=function(){var r;return this.isEmpty()?{}:(r={},r[LT]=this._values,r)},e}();Ur.Bookmarks=l0;var UT=new l0(null);function FT(e){if(e==null||e==="")return[];if(Gp.isString(e))return[e];if(Array.isArray(e)){for(var r=new Set,t=f0(e),n=0;n<t.length;n++){var o=t[n];if(o!=null){if(!Gp.isString(o))throw new TypeError("Bookmark value should be a string, given: '".concat(o,"'"));r.add(o)}}return DT([],MT(r),!1)}throw new TypeError("Bookmarks should either be a string or a string array, given: '".concat(e,"'"))}function f0(e){return e.reduce(function(r,t){return Array.isArray(t)?r.concat(f0(t)):r.concat(t)},[])}var U={};Object.defineProperty(U,"__esModule",{value:!0});U.TELEMETRY_APIS=U.BOLT_PROTOCOL_V5_8=U.BOLT_PROTOCOL_V5_7=U.BOLT_PROTOCOL_V5_6=U.BOLT_PROTOCOL_V5_5=U.BOLT_PROTOCOL_V5_4=U.BOLT_PROTOCOL_V5_3=U.BOLT_PROTOCOL_V5_2=U.BOLT_PROTOCOL_V5_1=U.BOLT_PROTOCOL_V5_0=U.BOLT_PROTOCOL_V4_4=U.BOLT_PROTOCOL_V4_3=U.BOLT_PROTOCOL_V4_2=U.BOLT_PROTOCOL_V4_1=U.BOLT_PROTOCOL_V4_0=U.BOLT_PROTOCOL_V3=U.BOLT_PROTOCOL_V2=U.BOLT_PROTOCOL_V1=U.DEFAULT_POOL_MAX_SIZE=U.DEFAULT_POOL_ACQUISITION_TIMEOUT=U.DEFAULT_CONNECTION_TIMEOUT_MILLIS=U.ACCESS_MODE_WRITE=U.ACCESS_MODE_READ=U.FETCH_ALL=void 0;var BT=-1;U.FETCH_ALL=BT;var xT=60*1e3;U.DEFAULT_POOL_ACQUISITION_TIMEOUT=xT;var WT=100;U.DEFAULT_POOL_MAX_SIZE=WT;var VT=3e4;U.DEFAULT_CONNECTION_TIMEOUT_MILLIS=VT;var zT="READ";U.ACCESS_MODE_READ=zT;var qT="WRITE";U.ACCESS_MODE_WRITE=qT;var HT=1;U.BOLT_PROTOCOL_V1=HT;var GT=2;U.BOLT_PROTOCOL_V2=GT;var KT=3;U.BOLT_PROTOCOL_V3=KT;var YT=4;U.BOLT_PROTOCOL_V4_0=YT;var ZT=4.1;U.BOLT_PROTOCOL_V4_1=ZT;var QT=4.2;U.BOLT_PROTOCOL_V4_2=QT;var XT=4.3;U.BOLT_PROTOCOL_V4_3=XT;var JT=4.4;U.BOLT_PROTOCOL_V4_4=JT;var eC=5;U.BOLT_PROTOCOL_V5_0=eC;var tC=5.1;U.BOLT_PROTOCOL_V5_1=tC;var rC=5.2;U.BOLT_PROTOCOL_V5_2=rC;var nC=5.3;U.BOLT_PROTOCOL_V5_3=nC;var oC=5.4;U.BOLT_PROTOCOL_V5_4=oC;var iC=5.5;U.BOLT_PROTOCOL_V5_5=iC;var aC=5.6;U.BOLT_PROTOCOL_V5_6=aC;var uC=5.7;U.BOLT_PROTOCOL_V5_7=uC;var sC=5.8;U.BOLT_PROTOCOL_V5_8=sC;var cC={MANAGED_TRANSACTION:0,UNMANAGED_TRANSACTION:1,AUTO_COMMIT_TRANSACTION:2,EXECUTE_QUERY:3};U.TELEMETRY_APIS=cC;var Ct={},kn={},lC=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Kn;Object.defineProperty(kn,"__esModule",{value:!0});kn.Logger=void 0;var d0=oe,ov="error",iv="warn",Gi="info",av="debug",fC=Gi,nc=(Kn={},Kn[ov]=0,Kn[iv]=1,Kn[Gi]=2,Kn[av]=3,Kn),h0=function(){function e(r,t){this._level=r,this._loggerFunction=t}return e.create=function(r){if((r==null?void 0:r.logging)!=null){var t=r.logging,n=vC(t),o=_C(t);return new e(n,o)}return this.noOp()},e.noOp=function(){return hC},e.prototype.isErrorEnabled=function(){return Os(this._level,ov)},e.prototype.error=function(r){this.isErrorEnabled()&&this._loggerFunction(ov,r)},e.prototype.isWarnEnabled=function(){return Os(this._level,iv)},e.prototype.warn=function(r){this.isWarnEnabled()&&this._loggerFunction(iv,r)},e.prototype.isInfoEnabled=function(){return Os(this._level,Gi)},e.prototype.info=function(r){this.isInfoEnabled()&&this._loggerFunction(Gi,r)},e.prototype.isDebugEnabled=function(){return Os(this._level,av)},e.prototype.debug=function(r){this.isDebugEnabled()&&this._loggerFunction(av,r)},e}();kn.Logger=h0;var dC=function(e){lC(r,e);function r(){return e.call(this,Gi,function(t,n){})||this}return r.prototype.isErrorEnabled=function(){return!1},r.prototype.error=function(t){},r.prototype.isWarnEnabled=function(){return!1},r.prototype.warn=function(t){},r.prototype.isInfoEnabled=function(){return!1},r.prototype.info=function(t){},r.prototype.isDebugEnabled=function(){return!1},r.prototype.debug=function(t){},r}(h0),hC=new dC;function Os(e,r){return nc[e]>=nc[r]}function vC(e){if((e==null?void 0:e.level)!=null){var r=e.level,t=nc[r];if(t==null&&t!==0)throw(0,d0.newError)("Illegal logging level: ".concat(r,". Supported levels are: ").concat(Object.keys(nc).toString()));return r}return fC}function _C(e){var r,t;if((e==null?void 0:e.logger)!=null){var n=e.logger;if(n!=null&&typeof n=="function")return n}throw(0,d0.newError)("Illegal logger function: ".concat((t=(r=e==null?void 0:e.logger)===null||r===void 0?void 0:r.toString())!==null&&t!==void 0?t:"undefined"))}var v0=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fi=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Bi=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.EMPTY_CONNECTION_HOLDER=Ct.ReadOnlyConnectionHolder=Ct.ConnectionHolder=void 0;var pC=oe,yC=Q,bC=U,Kp=Ur,mC=kn,d_=function(){function e(r){var t=r.mode,n=r.database,o=n===void 0?"":n,i=r.bookmarks,a=r.connectionProvider,s=r.impersonatedUser,c=r.onDatabaseNameResolved,u=r.getConnectionAcquistionBookmarks,l=r.auth,d=r.log;this._mode=t??bC.ACCESS_MODE_WRITE,this._closed=!1,this._database=o!=null?(0,yC.assertString)(o,"database"):"",this._bookmarks=i??Kp.Bookmarks.empty(),this._connectionProvider=a,this._impersonatedUser=s,this._referenceCount=0,this._connectionPromise=Promise.resolve(null),this._onDatabaseNameResolved=c,this._auth=l,this._log=d,this._logError=this._logError.bind(this),this._getConnectionAcquistionBookmarks=u??function(){return Promise.resolve(Kp.Bookmarks.empty())}}return e.prototype.mode=function(){return this._mode},e.prototype.database=function(){return this._database},e.prototype.setDatabase=function(r){this._database=r},e.prototype.bookmarks=function(){return this._bookmarks},e.prototype.connectionProvider=function(){return this._connectionProvider},e.prototype.referenceCount=function(){return this._referenceCount},e.prototype.initializeConnection=function(r){if(this._referenceCount===0&&this._connectionProvider!=null)this._connectionPromise=this._createConnectionPromise(this._connectionProvider,r);else return this._referenceCount++,!1;return this._referenceCount++,!0},e.prototype._createConnectionPromise=function(r,t){return Fi(this,void 0,void 0,function(){var n,o,i;return Bi(this,function(a){switch(a.label){case 0:return o=(n=r).acquireConnection,i={accessMode:this._mode,database:this._database},[4,this._getBookmarks()];case 1:return[4,o.apply(n,[(i.bookmarks=a.sent(),i.impersonatedUser=this._impersonatedUser,i.onDatabaseNameResolved=this._onDatabaseNameResolved,i.auth=this._auth,i.homeDb=t,i)])];case 2:return[2,a.sent()]}})})},e.prototype._getBookmarks=function(){return Fi(this,void 0,void 0,function(){return Bi(this,function(r){switch(r.label){case 0:return[4,this._getConnectionAcquistionBookmarks()];case 1:return[2,r.sent()]}})})},e.prototype.getConnection=function(){return this._connectionPromise},e.prototype.releaseConnection=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount--,this._referenceCount===0?this._releaseConnection():this._connectionPromise)},e.prototype.close=function(r){return this._closed=!0,this._referenceCount===0?this._connectionPromise:(this._referenceCount=0,this._releaseConnection(r))},e.prototype.log=function(){return this._log},e.prototype._releaseConnection=function(r){return this._connectionPromise=this._connectionPromise.then(function(t){return t!=null?t.isOpen()&&(t.hasOngoingObservableRequests()||r===!0)?t.resetAndFlush().catch(wC).then(function(){return t.release().then(function(){return null})}):t.release().then(function(){return null}):Promise.resolve(null)}).catch(this._logError),this._connectionPromise},e.prototype._logError=function(r){return this._log.isWarnEnabled()&&this._log.warn("ConnectionHolder got an error while releasing the connection. Error ".concat(r,". Stacktrace: ").concat(r.stack)),null},e}();Ct.ConnectionHolder=d_;var _0=function(e){v0(r,e);function r(t){var n=e.call(this,{mode:t.mode(),database:t.database(),bookmarks:t.bookmarks(),getConnectionAcquistionBookmarks:t._getConnectionAcquistionBookmarks,connectionProvider:t.connectionProvider(),log:t.log()})||this;return n._connectionHolder=t,n}return r.prototype.initializeConnection=function(){return this._connectionHolder.referenceCount()!==0},r.prototype.getConnection=function(){return this._connectionHolder.getConnection()},r.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},r.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},r}(d_);Ct.ReadOnlyConnectionHolder=_0;Ct.default=_0;var gC=function(e){v0(r,e);function r(){return e.call(this,{log:mC.Logger.create({})})||this}return r.prototype.mode=function(){},r.prototype.database=function(){},r.prototype.initializeConnection=function(){return!0},r.prototype.getConnection=function(){return Fi(this,void 0,void 0,function(){return Bi(this,function(t){switch(t.label){case 0:return[4,Promise.reject((0,pC.newError)("This connection holder does not serve connections"))];case 1:return[2,t.sent()]}})})},r.prototype.releaseConnection=function(){return Fi(this,void 0,void 0,function(){return Bi(this,function(t){switch(t.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,t.sent()]}})})},r.prototype.close=function(){return Fi(this,void 0,void 0,function(){return Bi(this,function(t){switch(t.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,t.sent()]}})})},r}(d_),OC=new gC;Ct.EMPTY_CONNECTION_HOLDER=OC;function wC(e){return null}var jo={},EC=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),SC=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),PC=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&EC(r,e,t);return SC(r,e),r};Object.defineProperty(jo,"__esModule",{value:!0});jo.TxConfig=void 0;var Ki=PC(Q),TC=oe,CC=Le,p0=function(){function e(r,t){$C(r),this.timeout=IC(r,t),this.metadata=jC(r)}return e.empty=function(){return AC},e.prototype.isEmpty=function(){return Object.values(this).every(function(r){return r==null})},e}();jo.TxConfig=p0;var AC=new p0({});function IC(e,r){if(Ki.isObject(e)&&e.timeout!=null){Ki.assertNumberOrInteger(e.timeout,"Transaction timeout"),RC(e)&&(r==null?void 0:r.isInfoEnabled())===!0&&(r==null||r.info("Transaction timeout expected to be an integer, got: ".concat(e.timeout,". The value will be rounded up.")));var t=(0,CC.int)(e.timeout,{ceilFloat:!0});if(t.isNegative())throw(0,TC.newError)("Transaction timeout should not be negative");return t}return null}function RC(e){return typeof e.timeout=="number"&&!Number.isInteger(e.timeout)}function jC(e){if(Ki.isObject(e)&&e.metadata!=null){var r=e.metadata;if(Ki.assertObject(r,"config.metadata"),Object.keys(r).length!==0)return r}return null}function $C(e){e!=null&&Ki.assertObject(e,"Transaction config")}var ia={},uv=f&&f.__assign||function(){return uv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},uv.apply(this,arguments)},NC=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},kC=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},MC=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},DC=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(ia,"__esModule",{value:!0});ia.TransactionExecutor=void 0;var vi=oe,LC=U,UC=30*1e3,FC=1e3,BC=2,xC=.2;function WC(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return setTimeout.apply(void 0,DC([e,r],MC(t),!1))}function VC(e){return clearTimeout(e)}var zC=function(){function e(r,t,n,o,i){i===void 0&&(i={setTimeout:WC,clearTimeout:VC}),this._maxRetryTimeMs=ws(r,UC),this._initialRetryDelayMs=ws(t,FC),this._multiplier=ws(n,BC),this._jitterFactor=ws(o,xC),this._setTimeout=i.setTimeout,this._clearTimeout=i.clearTimeout,this._inFlightTimeoutIds=[],this.pipelineBegin=!1,this.telemetryApi=LC.TELEMETRY_APIS.MANAGED_TRANSACTION,this._verifyAfterConstruction()}return e.prototype.execute=function(r,t,n){var o=this,i={apiTransactionConfig:{api:this.telemetryApi,onTelemetrySuccess:function(){i.apiTransactionConfig=void 0}}};return new Promise(function(a,s){o._executeTransactionInsidePromise(r,t,a,s,n,i).catch(s)}).catch(function(a){var s=Date.now(),c=o._initialRetryDelayMs;return o._retryTransactionPromise(r,t,a,s,c,n,i)})},e.prototype.close=function(){var r=this;this._inFlightTimeoutIds.forEach(function(t){return r._clearTimeout(t)}),this._inFlightTimeoutIds=[]},e.prototype._retryTransactionPromise=function(r,t,n,o,i,a,s){var c=this,u=Date.now()-o;return u>this._maxRetryTimeMs||!(0,vi.isRetriableError)(n)?Promise.reject(n):new Promise(function(l,d){var h=c._computeDelayWithJitter(i),v=c._setTimeout(function(){c._inFlightTimeoutIds=c._inFlightTimeoutIds.filter(function(_){return _!==v}),c._executeTransactionInsidePromise(r,t,l,d,a,s).catch(d)},h);c._inFlightTimeoutIds.push(v)}).catch(function(l){var d=i*c._multiplier;return c._retryTransactionPromise(r,t,l,o,d,a,s)})},e.prototype._executeTransactionInsidePromise=function(r,t,n,o,i,a){return NC(this,void 0,void 0,function(){var s,c,u,l,d,h,v,_=this;return kC(this,function(y){switch(y.label){case 0:return y.trys.push([0,4,,5]),c=r((a==null?void 0:a.apiTransactionConfig)!=null?uv({},a==null?void 0:a.apiTransactionConfig):void 0),this.pipelineBegin?(u=c,[3,3]):[3,1];case 1:return[4,c];case 2:u=y.sent(),y.label=3;case 3:return s=u,[3,5];case 4:return l=y.sent(),o(l),[2];case 5:return d=i??function(p){return p},h=d(s),v=this._safeExecuteTransactionWork(h,t),v.then(function(p){return _._handleTransactionWorkSuccess(p,s,n,o)}).catch(function(p){return _._handleTransactionWorkFailure(p,s,o)}),[2]}})})},e.prototype._safeExecuteTransactionWork=function(r,t){try{var n=t(r);return Promise.resolve(n)}catch(o){return Promise.reject(o)}},e.prototype._handleTransactionWorkSuccess=function(r,t,n,o){t.isOpen()?t.commit().then(function(){n(r)}).catch(function(i){o(i)}):n(r)},e.prototype._handleTransactionWorkFailure=function(r,t,n){t.isOpen()?t.rollback().catch(function(o){}).then(function(){return n(r)}).catch(n):n(r)},e.prototype._computeDelayWithJitter=function(r){var t=r*this._jitterFactor,n=r-t,o=r+t;return Math.random()*(o-n)+n},e.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,vi.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs.toString());if(this._initialRetryDelayMs<0)throw(0,vi.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs.toString());if(this._multiplier<1)throw(0,vi.newError)("Multiplier should be >= 1.0: "+this._multiplier.toString());if(this._jitterFactor<0||this._jitterFactor>1)throw(0,vi.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor.toFixed())},e}();ia.TransactionExecutor=zC;function ws(e,r){return e??r}var at={},oc=f&&f.__assign||function(){return oc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},oc.apply(this,arguments)},y0=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(at,"__esModule",{value:!0});at.Url=at.formatIPv6Address=at.formatIPv4Address=at.defaultPortForScheme=at.parseDatabaseUrl=void 0;var qC=Q,HC=7687,GC=7474,KC=7473,b0=function(){function e(r,t,n,o,i){this.scheme=r,this.host=t,this.port=n,this.hostAndPort=o,this.query=i}return e}();at.Url=b0;function YC(e){var r;(0,qC.assertString)(e,"URL");var t=QC(e),n=aA(t.url),o=t.schemeMissing?null:XC(n.scheme),i=JC(n.host),a=nA(i),s=eA(n.port,o),c="".concat(a,":").concat(s),u=tA((r=n.query)!==null&&r!==void 0?r:ZC(n.resourceName),e);return new b0(o,i,s,c,u)}at.parseDatabaseUrl=YC;function ZC(e){if(typeof e!="string")return null;var r=y0(e.split("?"),2),t=r[1];return t}function QC(e){return e=e.trim(),e.includes("://")?{schemeMissing:!1,url:e}:{schemeMissing:!0,url:"none://".concat(e)}}function XC(e){return e!=null?(e=e.trim(),e.charAt(e.length-1)===":"&&(e=e.substring(0,e.length-1)),e):null}function JC(e,r){if(e==null)throw new Error("Unable to extract host from null or undefined URL");return e.trim()}function eA(e,r){var t=typeof e=="string"?parseInt(e,10):e;return t!=null&&!isNaN(t)?t:g0(r)}function tA(e,r){var t=e!=null?rA(e):null,n={};return t!=null&&t.split("&").forEach(function(o){var i=o.split("=");if(i.length!==2)throw new Error("Invalid parameters: '".concat(i.toString(),"' in URL '").concat(r,"'."));var a=Yp(i[0],"key",r),s=Yp(i[1],"value",r);if(n[a]!==void 0)throw new Error("Duplicated query parameters with key '".concat(a,"' in URL '").concat(r,"'"));n[a]=s}),n}function rA(e){return e=(e??"").trim(),(e==null?void 0:e.charAt(0))==="?"&&(e=e.substring(1,e.length)),e}function Yp(e,r,t){if(e=(e??"").trim(),e==="")throw new Error("Illegal empty ".concat(r," in URL query '").concat(t,"'"));return e}function m0(e){var r=e.charAt(0)==="[",t=e.charAt(e.length-1)==="]";if(!r&&!t)return"[".concat(e,"]");if(r&&t)return e;throw new Error("Illegal IPv6 address ".concat(e))}function nA(e){if(e===""||e==null)throw new Error("Illegal host ".concat(e));var r=e.includes(":");return r?m0(e):e}function oA(e,r){return"".concat(e,":").concat(r)}at.formatIPv4Address=oA;function iA(e,r){var t=m0(e);return"".concat(t,":").concat(r)}at.formatIPv6Address=iA;function g0(e){return e==="http"?GC:e==="https"?KC:HC}at.defaultPortForScheme=g0;function aA(e){function r(s,c){var u=s.indexOf(c);return u>=0?[s.substring(0,u),s[u],s.substring(u+1)]:[s,"",""]}function t(s,c){var u=s.lastIndexOf(c);return u>=0?[s.substring(0,u),s[u],s.substring(u+1)]:["","",s]}function n(s,c,u){var l=r(s,c),d=r(l[2],u);return[d[0],d[2]]}function o(s){var c={},u;u=t(s,"@"),u[1]==="@"&&(c.userInfo=decodeURIComponent(u[0]),s=u[2]);var l=y0(n(s,"[","]"),2),d=l[0],h=l[1];return d!==""?(c.host=d,u=r(h,":")):(u=r(s,":"),c.host=u[0]),u[1]===":"&&(c.port=u[2]),c}var i={},a;return a=r(e,":"),a[1]===":"&&(i.scheme=decodeURIComponent(a[0]),e=a[2]),a=r(e,"#"),a[1]==="#"&&(i.fragment=decodeURIComponent(a[2]),e=a[0]),a=r(e,"?"),a[1]==="?"&&(i.query=a[2],e=a[0]),e.startsWith("//")?(a=r(e.substr(2),"/"),i=oc(oc({},i),o(a[0])),i.path=a[1]+a[2]):i.path=e,i}var aa={},uA=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),sA=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),cA=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&uA(r,e,t);return sA(r,e),r};Object.defineProperty(aa,"__esModule",{value:!0});aa.ServerAddress=void 0;var rh=Q,lA=cA(at),fA=function(){function e(r,t,n,o){this._host=(0,rh.assertString)(r,"host"),this._resolved=t!=null?(0,rh.assertString)(t,"resolved"):null,this._port=(0,rh.assertNumber)(n,"port"),this._hostPort=o,this._stringValue=t!=null?"".concat(o,"(").concat(t,")"):"".concat(o)}return e.prototype.host=function(){return this._host},e.prototype.resolvedHost=function(){return this._resolved!=null?this._resolved:this._host},e.prototype.port=function(){return this._port},e.prototype.resolveWith=function(r){return new e(this._host,r,this._port,this._hostPort)},e.prototype.asHostPort=function(){return this._hostPort},e.prototype.asKey=function(){return this._hostPort},e.prototype.toString=function(){return this._stringValue},e.fromUrl=function(r){var t=lA.parseDatabaseUrl(r);return new e(t.host,null,t.port,t.hostAndPort)},e}();aa.ServerAddress=fA;var _o={},h_={};Object.defineProperty(h_,"__esModule",{value:!0});var dA=function(){function e(){}return e.prototype.resolve=function(){throw new Error("Abstract function")},e.prototype._resolveToItself=function(r){return Promise.resolve([r])},e}();h_.default=dA;var kc={};Object.defineProperty(kc,"__esModule",{value:!0});var hA=aa;function vA(e){return Promise.resolve([e])}var _A=function(){function e(r){this._resolverFunction=r??vA}return e.prototype.resolve=function(r){var t=this;return new Promise(function(n){return n(t._resolverFunction(r.asHostPort()))}).then(function(n){if(!Array.isArray(n))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(n));return n.map(function(o){return hA.ServerAddress.fromUrl(o)})})},e}();kc.default=_A;var O0=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_o,"__esModule",{value:!0});_o.ConfiguredCustomResolver=_o.BaseHostNameResolver=void 0;var pA=O0(h_);_o.BaseHostNameResolver=pA.default;var yA=O0(kc);_o.ConfiguredCustomResolver=yA.default;var w0={},Mc={};Object.defineProperty(Mc,"__esModule",{value:!0});Mc.fromVersion=void 0;function bA(e,r){r===void 0&&(r=function(){return{get userAgent(){var i;return i==null?void 0:i.userAgent}}});var t=r(),n=t.userAgent!=null?t.userAgent.split("(")[1].split(")")[0]:void 0,o=t.userAgent||void 0;return{product:"neo4j-javascript/".concat(e),platform:n,languageDetails:o}}Mc.fromVersion=bA;(function(e){var r=f&&f.__createBinding||(Object.create?function(n,o,i,a){a===void 0&&(a=i);var s=Object.getOwnPropertyDescriptor(o,i);(!s||("get"in s?!o.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(n,a,s)}:function(n,o,i,a){a===void 0&&(a=i),n[a]=o[i]}),t=f&&f.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&r(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),t(Mc,e)})(w0);var E0={},Pr={};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.DEFAULT_ACQUISITION_TIMEOUT=Pr.DEFAULT_MAX_SIZE=void 0;var Ys=100;Pr.DEFAULT_MAX_SIZE=Ys;var Zs=60*1e3;Pr.DEFAULT_ACQUISITION_TIMEOUT=Zs;var mA=function(){function e(r,t){this.maxSize=Zp(r,Ys),this.acquisitionTimeout=Zp(t,Zs)}return e.defaultConfig=function(){return new e(Ys,Zs)},e.fromDriverConfig=function(r){var t=sv(r.maxConnectionPoolSize)?r.maxConnectionPoolSize:Ys,n=sv(r.connectionAcquisitionTimeout)?r.connectionAcquisitionTimeout:Zs;return new e(t,n)},e}();Pr.default=mA;function Zp(e,r){return sv(e)?e:r}function sv(e){return e===0||e!=null}var v_={},ht=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},vt=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},gA=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(v_,"__esModule",{value:!0});var OA=gA(Pr),Qp=oe,wA=kn,EA=function(){function e(r){var t=r.create,n=t===void 0?function(w,E,S){return ht(g,void 0,void 0,function(){return vt(this,function(T){switch(T.label){case 0:return[4,Promise.reject(new Error("Not implemented"))];case 1:return[2,T.sent()]}})})}:t,o=r.destroy,i=o===void 0?function(w){return ht(g,void 0,void 0,function(){return vt(this,function(E){switch(E.label){case 0:return[4,Promise.resolve()];case 1:return[2,E.sent()]}})})}:o,a=r.validateOnAcquire,s=a===void 0?function(w,E){return!0}:a,c=r.validateOnRelease,u=c===void 0?function(w){return!0}:c,l=r.installIdleObserver,d=l===void 0?function(w,E){}:l,h=r.removeIdleObserver,v=h===void 0?function(w){}:h,_=r.config,y=_===void 0?OA.default.defaultConfig():_,p=r.log,b=p===void 0?wA.Logger.noOp():p,g=this;this._create=n,this._destroy=i,this._validateOnAcquire=s,this._validateOnRelease=u,this._installIdleObserver=d,this._removeIdleObserver=v,this._maxSize=y.maxSize,this._acquisitionTimeout=y.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=b,this._closed=!1}return e.prototype.acquire=function(r,t,n){return ht(this,void 0,void 0,function(){var o,i,a,s=this;return vt(this,function(c){switch(c.label){case 0:return o=t.asKey(),i=this._acquireRequests,a=i[o],a==null&&(i[o]=[]),[4,new Promise(function(u,l){var d=setTimeout(function(){var v=i[o];if(v!=null&&(i[o]=v.filter(function(p){return p!==h})),!h.isCompleted()){var _=s.activeResourceCount(t),y=s.has(t)?s._pools[o].length:0;h.reject((0,Qp.newError)("Connection acquisition timed out in ".concat(s._acquisitionTimeout," ms. Pool status: Active conn count = ").concat(_,", Idle conn count = ").concat(y,".")))}},s._acquisitionTimeout);typeof d=="object"&&d.unref();var h=new SA(o,r,n,u,l,d,s._log);i[o].push(h),s._processPendingAcquireRequests(t)})];case 1:return[2,c.sent()]}})})},e.prototype.purge=function(r){return ht(this,void 0,void 0,function(){return vt(this,function(t){switch(t.label){case 0:return[4,this._purgeKey(r.asKey())];case 1:return[2,t.sent()]}})})},e.prototype.apply=function(r,t){var n=r.asKey();n in this._pools&&this._pools[n].apply(t)},e.prototype.close=function(){return ht(this,void 0,void 0,function(){var r=this;return vt(this,function(t){switch(t.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(n){return ht(r,void 0,void 0,function(){return vt(this,function(o){switch(o.label){case 0:return[4,this._purgeKey(n)];case 1:return[2,o.sent()]}})})})).then()];case 1:return[2,t.sent()]}})})},e.prototype.keepAll=function(r){return ht(this,void 0,void 0,function(){var t,n,o,i=this;return vt(this,function(a){switch(a.label){case 0:return t=r.map(function(s){return s.asKey()}),n=Object.keys(this._pools),o=n.filter(function(s){return!t.includes(s)}),[4,Promise.all(o.map(function(s){return ht(i,void 0,void 0,function(){return vt(this,function(c){switch(c.label){case 0:return[4,this._purgeKey(s)];case 1:return[2,c.sent()]}})})})).then()];case 1:return[2,a.sent()]}})})},e.prototype.has=function(r){return r.asKey()in this._pools},e.prototype.activeResourceCount=function(r){var t;return(t=this._activeResourceCounts[r.asKey()])!==null&&t!==void 0?t:0},e.prototype._getOrInitializePoolFor=function(r){var t=this._pools[r];return t==null&&(t=new PA,this._pools[r]=t,this._pendingCreates[r]=0),t},e.prototype._acquire=function(r,t,n){return ht(this,void 0,void 0,function(){var o,i,a,s,c,l,u,l,d,h=this;return vt(this,function(v){switch(v.label){case 0:if(this._closed)throw(0,Qp.newError)("Pool is closed, it is no more able to serve requests.");if(o=t.asKey(),i=this._getOrInitializePoolFor(o),n)return[3,10];v.label=1;case 1:if(!(i.length>0))return[3,10];if(a=i.pop(),a==null)return[3,1];Xp(o,this._activeResourceCounts),this._removeIdleObserver!=null&&this._removeIdleObserver(a),s=!1,v.label=2;case 2:return v.trys.push([2,4,,6]),[4,this._validateOnAcquire(r,a)];case 3:return s=v.sent(),[3,6];case 4:return c=v.sent(),nh(o,this._activeResourceCounts),i.removeInUse(a),[4,this._destroy(a)];case 5:throw v.sent(),c;case 6:return s?(this._log.isDebugEnabled()&&this._log.debug("".concat(a," acquired from the pool ").concat(o)),[2,{resource:a,pool:i}]):[3,7];case 7:return nh(o,this._activeResourceCounts),i.removeInUse(a),[4,this._destroy(a)];case 8:v.sent(),v.label=9;case 9:return[3,1];case 10:if(this._maxSize>0&&(l=this.activeResourceCount(t)+this._pendingCreates[o],l>=this._maxSize))return[2,{resource:null,pool:i}];this._pendingCreates[o]=this._pendingCreates[o]+1,v.label=11;case 11:return v.trys.push([11,,15,16]),l=this.activeResourceCount(t)+i.length,l>=this._maxSize&&n?(d=i.pop(),d==null?[3,13]:(this._removeIdleObserver!=null&&this._removeIdleObserver(d),i.removeInUse(d),[4,this._destroy(d)])):[3,13];case 12:v.sent(),v.label=13;case 13:return[4,this._create(r,t,function(_,y){return ht(h,void 0,void 0,function(){return vt(this,function(p){switch(p.label){case 0:return[4,this._release(_,y,i)];case 1:return[2,p.sent()]}})})})];case 14:return u=v.sent(),i.pushInUse(u),Xp(o,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(u," created for the pool ").concat(o)),[3,16];case 15:return this._pendingCreates[o]=this._pendingCreates[o]-1,[7];case 16:return[2,{resource:u,pool:i}]}})})},e.prototype._release=function(r,t,n){return ht(this,void 0,void 0,function(){var o,i=this;return vt(this,function(a){switch(a.label){case 0:o=r.asKey(),a.label=1;case 1:return a.trys.push([1,,9,10]),n.isActive()?[4,this._validateOnRelease(t)]:[3,6];case 2:return a.sent()?[3,4]:(this._log.isDebugEnabled()&&this._log.debug("".concat(t," destroyed and can't be released to the pool ").concat(o," because it is not functional")),n.removeInUse(t),[4,this._destroy(t)]);case 3:return a.sent(),[3,5];case 4:this._installIdleObserver!=null&&this._installIdleObserver(t,{onError:function(s){i._log.debug("Idle connection ".concat(t," destroyed because of error: ").concat(s));var c=i._pools[o];c!=null&&(i._pools[o]=c.filter(function(u){return u!==t}),c.removeInUse(t)),i._destroy(t).catch(function(){})}}),n.push(t),this._log.isDebugEnabled()&&this._log.debug("".concat(t," released to the pool ").concat(o)),a.label=5;case 5:return[3,8];case 6:return this._log.isDebugEnabled()&&this._log.debug("".concat(t," destroyed and can't be released to the pool ").concat(o," because pool has been purged")),n.removeInUse(t),[4,this._destroy(t)];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:return nh(o,this._activeResourceCounts),this._processPendingAcquireRequests(r),[7];case 10:return[2]}})})},e.prototype._purgeKey=function(r){return ht(this,void 0,void 0,function(){var t,n,o;return vt(this,function(i){switch(i.label){case 0:if(t=this._pools[r],n=[],t==null)return[3,2];for(;t.length>0;)o=t.pop(),o!=null&&(this._removeIdleObserver!=null&&this._removeIdleObserver(o),n.push(this._destroy(o)));return t.close(),delete this._pools[r],[4,Promise.all(n)];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype._processPendingAcquireRequests=function(r){var t=this,n=r.asKey(),o=this._acquireRequests[n];if(o!=null){var i=o.shift();i!=null?this._acquire(i.context,r,i.requireNew).catch(function(a){return i.reject(a),{resource:null,pool:null}}).then(function(a){var s=a.resource,c=a.pool;s!=null&&c!=null?i.isCompleted()?t._release(r,s,c).catch(function(u){t._log.isDebugEnabled()&&t._log.debug("".concat(s," could not be release back to the pool. Cause: ").concat(u))}):i.resolve(s):i.isCompleted()||(t._acquireRequests[n]==null&&(t._acquireRequests[n]=[]),t._acquireRequests[n].unshift(i))}).catch(function(a){return i.reject(a)}):delete this._acquireRequests[n]}},e}();function Xp(e,r){var t,n=(t=r[e])!==null&&t!==void 0?t:0;r[e]=n+1}function nh(e,r){var t,n=(t=r[e])!==null&&t!==void 0?t:0,o=n-1;o>0?r[e]=o:delete r[e]}var SA=function(){function e(r,t,n,o,i,a,s){this._key=r,this._context=t,this._resolve=o,this._reject=i,this._timeoutId=a,this._log=s,this._completed=!1,this._config=n??{}}return Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requireNew",{get:function(){var r;return(r=this._config.requireNew)!==null&&r!==void 0?r:!1},enumerable:!1,configurable:!0}),e.prototype.isCompleted=function(){return this._completed},e.prototype.resolve=function(r){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(r," acquired from the pool ").concat(this._key)),this._resolve(r))},e.prototype.reject=function(r){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(r))},e}(),PA=function(){function e(){this._active=!0,this._elements=[],this._elementsInUse=new Set}return e.prototype.isActive=function(){return this._active},e.prototype.close=function(){this._active=!1,this._elements=[],this._elementsInUse=new Set},e.prototype.filter=function(r){return this._elements=this._elements.filter(r),this},e.prototype.apply=function(r){this._elements.forEach(r),this._elementsInUse.forEach(r)},Object.defineProperty(e.prototype,"length",{get:function(){return this._elements.length},enumerable:!1,configurable:!0}),e.prototype.pop=function(){var r=this._elements.pop();return r!=null&&this._elementsInUse.add(r),r},e.prototype.push=function(r){return this._elementsInUse.delete(r),this._elements.push(r)},e.prototype.pushInUse=function(r){this._elementsInUse.add(r)},e.prototype.removeInUse=function(r){this._elementsInUse.delete(r)},e}();v_.default=EA;(function(e){var r=f&&f.__createBinding||(Object.create?function(s,c,u,l){l===void 0&&(l=u);var d=Object.getOwnPropertyDescriptor(c,u);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(s,l,d)}:function(s,c,u,l){l===void 0&&(l=u),s[l]=c[u]}),t=f&&f.__setModuleDefault||(Object.create?function(s,c){Object.defineProperty(s,"default",{enumerable:!0,value:c})}:function(s,c){s.default=c}),n=f&&f.__importStar||function(s){if(s&&s.__esModule)return s;var c={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&r(c,s,u);return t(c,s),c},o=f&&f.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_MAX_SIZE=e.DEFAULT_ACQUISITION_TIMEOUT=e.PoolConfig=e.Pool=void 0;var i=n(Pr);e.PoolConfig=i.default,Object.defineProperty(e,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return i.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(e,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return i.DEFAULT_MAX_SIZE}});var a=o(v_);e.Pool=a.default,e.default=a.default})(E0);var TA=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),CA=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Je=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&TA(r,e,t);return CA(r,e),r};Object.defineProperty(ee,"__esModule",{value:!0});ee.pool=ee.boltAgent=ee.objectUtil=ee.resolver=ee.serverAddress=ee.urlUtil=ee.logger=ee.transactionExecutor=ee.txConfig=ee.connectionHolder=ee.constants=ee.bookmarks=ee.observer=ee.temporalUtil=ee.util=void 0;var AA=Je(Q);ee.util=AA;var IA=Je(c_);ee.temporalUtil=IA;var RA=Je(Sr);ee.observer=RA;var jA=Je(Ur);ee.bookmarks=jA;var $A=Je(U);ee.constants=$A;var NA=Je(Ct);ee.connectionHolder=NA;var kA=Je(jo);ee.txConfig=kA;var MA=Je(ia);ee.transactionExecutor=MA;var DA=Je(kn);ee.logger=DA;var LA=Je(at);ee.urlUtil=LA;var UA=Je(aa);ee.serverAddress=UA;var FA=Je(_o);ee.resolver=FA;var BA=Je(tr);ee.objectUtil=BA;var xA=Je(w0);ee.boltAgent=xA;var WA=Je(E0);ee.pool=WA;var me={},Yi=f&&f.__assign||function(){return Yi=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Yi.apply(this,arguments)},VA=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),zA=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),qA=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&VA(r,e,t);return zA(r,e),r},HA=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},GA=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(me,"__esModule",{value:!0});me.buildNotificationsFromMetadata=me.buildGqlStatusObjectFromMetadata=me.polyfillNotification=me.polyfillGqlStatusObject=me.GqlStatusObject=me.Notification=me.notificationClassification=me.notificationCategory=me.notificationSeverityLevel=void 0;var KA=qA(It),oh=ee,Ii=a_,cv={WARNING:{gql_status:"01N42",status_description:"warn: unknown warning"},NO_DATA:{gql_status:"02N42",status_description:"note: no data - unknown subcondition"},INFORMATION:{gql_status:"03N42",status_description:"info: unknown notification"}},ua={WARNING:"WARNING",INFORMATION:"INFORMATION",UNKNOWN:"UNKNOWN"};me.notificationSeverityLevel=ua;Object.freeze(ua);var YA=Object.values(ua),Dc={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",DEPRECATION:"DEPRECATION",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",GENERIC:"GENERIC",SCHEMA:"SCHEMA",UNKNOWN:"UNKNOWN"};me.notificationCategory=Dc;Object.freeze(Dc);var ZA=Object.values(Dc),S0=Dc;me.notificationClassification=S0;var Lc=function(){function e(r){this.code=r.code,this.title=r.title,this.description=r.description,this.severity=r.severity,this.position=C0(r.position),this.severityLevel=A0(r.severity),this.rawSeverityLevel=r.severity,this.category=I0(r.category),this.rawCategory=r.category}return e}();me.Notification=Lc;var _n=function(){function e(r){var t;this.gqlStatus=r.gql_status,this.statusDescription=r.status_description,this.diagnosticRecord=(t=r.diagnostic_record)!==null&&t!==void 0?t:{},this.position=this.diagnosticRecord._position!=null?C0(this.diagnosticRecord._position):void 0,this.severity=A0(this.diagnosticRecord._severity),this.rawSeverity=this.diagnosticRecord._severity,this.classification=I0(this.diagnosticRecord._classification),this.rawClassification=this.diagnosticRecord._classification,this.isNotification=r.neo4j_code!=null,Object.freeze(this)}return Object.defineProperty(e.prototype,"diagnosticRecordAsJsonString",{get:function(){return KA.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),e}();me.GqlStatusObject=_n;function P0(e){var r,t,n;if(e.neo4j_code!=null)return new Lc({code:e.neo4j_code,title:e.title,description:e.description,severity:(r=e.diagnostic_record)===null||r===void 0?void 0:r._severity,category:(t=e.diagnostic_record)===null||t===void 0?void 0:t._classification,position:(n=e.diagnostic_record)===null||n===void 0?void 0:n._position})}me.polyfillNotification=P0;function T0(e){var r,t=e.severity===ua.WARNING?cv.WARNING:cv.INFORMATION,n={gql_status:t.gql_status,status_description:(r=e.description)!==null&&r!==void 0?r:t.status_description,neo4j_code:e.code,title:e.title,diagnostic_record:Yi({},Ii.rawPolyfilledDiagnosticRecord)};return e.severity!=null&&(n.diagnostic_record._severity=e.severity),e.category!=null&&(n.diagnostic_record._classification=e.category),e.position!=null&&(n.diagnostic_record._position=e.position),new _n(n)}me.polyfillGqlStatusObject=T0;var Ri={SUCCESS:new _n({gql_status:"00000",status_description:"note: successful completion",diagnostic_record:Ii.rawPolyfilledDiagnosticRecord}),NO_DATA:new _n({gql_status:"02000",status_description:"note: no data",diagnostic_record:Ii.rawPolyfilledDiagnosticRecord}),NO_DATA_UNKNOWN_SUBCONDITION:new _n(Yi(Yi({},cv.NO_DATA),{diagnostic_record:Ii.rawPolyfilledDiagnosticRecord})),OMITTED_RESULT:new _n({gql_status:"00001",status_description:"note: successful completion - omitted result",diagnostic_record:Ii.rawPolyfilledDiagnosticRecord})};Object.freeze(Ri);function QA(e){var r,t;function n(a){return(a==null?void 0:a.have_records_streamed)===!0?Ri.SUCCESS:(a==null?void 0:a.has_keys)===!1?Ri.OMITTED_RESULT:(a==null?void 0:a.pulled)===!0?Ri.NO_DATA:Ri.NO_DATA_UNKNOWN_SUBCONDITION}if(e.statuses!=null)return e.statuses.map(function(a){return new _n(a)});var o=n(e.stream_summary),i=GA([o],HA((t=(r=e.notifications)===null||r===void 0?void 0:r.map(T0))!==null&&t!==void 0?t:[]),!1);return i.sort(function(a,s){return Jp(a)-Jp(s)})}me.buildGqlStatusObjectFromMetadata=QA;var XA=Object.freeze({"02":0,"01":1,"00":2});function Jp(e){var r,t,n=(r=e.gqlStatus)===null||r===void 0?void 0:r.slice(0,2);return(t=XA[n])!==null&&t!==void 0?t:9999}function JA(e){return e.notifications!=null?e.notifications.map(function(r){return new Lc(r)}):e.statuses!=null?e.statuses.map(P0).filter(function(r){return r!=null}):[]}me.buildNotificationsFromMetadata=JA;function C0(e){return e==null?{}:{offset:oh.util.toNumber(e.offset),line:oh.util.toNumber(e.line),column:oh.util.toNumber(e.column)}}function A0(e){return YA.includes(e)?e:ua.UNKNOWN}function I0(e){return ZA.includes(e)?e:S0.UNKNOWN}me.default=Lc;Object.defineProperty(He,"__esModule",{value:!0});He.Stats=He.QueryStatistics=He.ProfiledPlan=He.Plan=He.ServerInfo=He.queryType=void 0;var lv=ee,ey=me,eI=function(){function e(r,t,n,o){var i,a,s;this.query={text:r,parameters:t},this.queryType=n.type,this.counters=new R0((i=n.stats)!==null&&i!==void 0?i:{}),this.updateStatistics=this.counters,this.plan=n.plan!=null||n.profile!=null?new fv((a=n.plan)!==null&&a!==void 0?a:n.profile):!1,this.profile=n.profile!=null?new dv(n.profile):!1,this.notifications=(0,ey.buildNotificationsFromMetadata)(n),this.gqlStatusObjects=(0,ey.buildGqlStatusObjectFromMetadata)(n),this.server=new j0(n.server,o),this.resultConsumedAfter=n.result_consumed_after,this.resultAvailableAfter=n.result_available_after,this.database={name:(s=n.db)!==null&&s!==void 0?s:null}}return e.prototype.hasPlan=function(){return this.plan instanceof fv},e.prototype.hasProfile=function(){return this.profile instanceof dv},e}(),fv=function(){function e(r){this.operatorType=r.operatorType,this.identifiers=r.identifiers,this.arguments=r.args,this.children=r.children!=null?r.children.map(function(t){return new e(t)}):[]}return e}();He.Plan=fv;var dv=function(){function e(r){this.operatorType=r.operatorType,this.identifiers=r.identifiers,this.arguments=r.args,this.dbHits=Yn("dbHits",r),this.rows=Yn("rows",r),this.pageCacheMisses=Yn("pageCacheMisses",r),this.pageCacheHits=Yn("pageCacheHits",r),this.pageCacheHitRatio=Yn("pageCacheHitRatio",r),this.time=Yn("time",r),this.children=r.children!=null?r.children.map(function(t){return new e(t)}):[]}return e.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},e}();He.ProfiledPlan=dv;var tI=function(){function e(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0}return e}();He.Stats=tI;var R0=function(){function e(r){var t=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(r).forEach(function(n){var o=n.replace(/(-\w)/g,function(i){return i[1].toUpperCase()});o in t._stats?t._stats[o]=lv.util.toNumber(r[n]):o==="systemUpdates"?t._systemUpdates=lv.util.toNumber(r[n]):o==="containsSystemUpdates"?t._containsSystemUpdates=r[n]:o==="containsUpdates"&&(t._containsUpdates=r[n])}),this._stats=Object.freeze(this._stats)}return e.prototype.containsUpdates=function(){var r=this;return this._containsUpdates!==void 0?this._containsUpdates:Object.keys(this._stats).reduce(function(t,n){return t+r._stats[n]},0)>0},e.prototype.updates=function(){return this._stats},e.prototype.containsSystemUpdates=function(){return this._containsSystemUpdates!==void 0?this._containsSystemUpdates:this._systemUpdates>0},e.prototype.systemUpdates=function(){return this._systemUpdates},e}();He.QueryStatistics=R0;var j0=function(){function e(r,t){r!=null&&(this.address=r.address,this.agent=r.version),this.protocolVersion=t}return e}();He.ServerInfo=j0;function Yn(e,r,t){if(t===void 0&&(t=0),r!==!1&&e in r){var n=r[e];return lv.util.toNumber(n)}else return t}var rI={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"};He.queryType=rI;He.default=eI;var rr={};Object.defineProperty(rr,"__esModule",{value:!0});rr.notificationFilterDisabledClassification=rr.notificationFilterDisabledCategory=rr.notificationFilterMinimumSeverityLevel=void 0;var $0={OFF:"OFF",WARNING:"WARNING",INFORMATION:"INFORMATION"};rr.notificationFilterMinimumSeverityLevel=$0;Object.freeze($0);var __={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",DEPRECATION:"DEPRECATION",GENERIC:"GENERIC",SCHEMA:"SCHEMA"};rr.notificationFilterDisabledCategory=__;Object.freeze(__);var nI=__;rr.notificationFilterDisabledClassification=nI;var oI=function(){function e(){throw this.minimumSeverityLevel=void 0,this.disabledCategories=void 0,this.disabledClassifications=void 0,new Error("Not implemented")}return e}();rr.default=oI;var sa={},en=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},tn=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},iI=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},N0;Object.defineProperty(sa,"__esModule",{value:!0});var aI=iI(He),k0=ee,_i=oe,uI=k0.connectionHolder.EMPTY_CONNECTION_HOLDER,sI=function(e){console.log("Uncaught error when processing result: "+e)},cI=function(e){},lI=function(e){},fI=function(){function e(r,t,n,o,i){i===void 0&&(i={high:Number.MAX_VALUE,low:Number.MAX_VALUE}),this[N0]="Result",this._stack=dI(),this._streamObserverPromise=r,this._p=null,this._query=t,this._parameters=n??{},this._connectionHolder=o??uI,this._keys=null,this._summary=null,this._error=null,this._watermarks=i}return e.prototype.keys=function(){var r=this;return this._keys!==null?Promise.resolve(this._keys):this._error!==null?Promise.reject(this._error):new Promise(function(t,n){r._streamObserverPromise.then(function(o){return o.subscribe(r._decorateObserver({onKeys:function(i){return t(i)},onError:function(i){return n(i)}}))}).catch(n)})},e.prototype.summary=function(){var r=this;return this._summary!==null?Promise.resolve(this._summary):this._error!==null?Promise.reject(this._error):new Promise(function(t,n){r._streamObserverPromise.then(function(o){o.cancel(),o.subscribe(r._decorateObserver({onCompleted:function(i){return t(i)},onError:function(i){return n(i)}}))}).catch(n)})},e.prototype._getOrCreatePromise=function(){var r=this;return this._p==null&&(this._p=new Promise(function(t,n){var o=[],i={onNext:function(a){o.push(a)},onCompleted:function(a){t({records:o,summary:a})},onError:function(a){n(a)}};r.subscribe(i)})),this._p},e.prototype[Symbol.asyncIterator]=function(){var r=this;if(!this.isOpen()){var t=(0,_i.newError)("Result is already consumed");return{next:function(){return Promise.reject(t)},peek:function(){return Promise.reject(t)}}}var n={paused:!0,firstRun:!0,finished:!1},o=function(){var s,c;if(n.streaming!=null){var u=(c=(s=n.queuedObserver)===null||s===void 0?void 0:s.size)!==null&&c!==void 0?c:0,l=u>=r._watermarks.high,d=u<=r._watermarks.low;l&&!n.paused?(n.paused=!0,n.streaming.pause()):(d&&n.paused||n.firstRun&&!l)&&(n.firstRun=!1,n.paused=!1,n.streaming.resume())}},i=function(){return en(r,void 0,void 0,function(){var s;return tn(this,function(c){switch(c.label){case 0:return n.queuedObserver!==void 0?[3,2]:(n.queuedObserver=this._createQueuedResultObserver(o),s=n,[4,this._subscribe(n.queuedObserver,!0).catch(function(){})]);case 1:s.streaming=c.sent(),o(),c.label=2;case 2:return[2,n.queuedObserver]}})})},a=function(s){if(s===void 0)throw(0,_i.newError)("InvalidState: Result stream finished without Summary",_i.PROTOCOL_ERROR);return!0};return{next:function(){return en(r,void 0,void 0,function(){var s,c;return tn(this,function(u){switch(u.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:n.summary}]:[4,i()];case 1:return s=u.sent(),[4,s.dequeue()];case 2:return c=u.sent(),c.done===!0&&(n.finished=c.done,n.summary=c.value),[2,c]}})})},return:function(s){return en(r,void 0,void 0,function(){var c,u,l;return tn(this,function(d){switch(d.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:s??n.summary}]:((l=n.streaming)===null||l===void 0||l.cancel(),[4,i()]);case 1:return c=d.sent(),[4,c.dequeueUntilDone()];case 2:return u=d.sent(),n.finished=!0,u.value=s??u.value,n.summary=u.value,[2,u]}})})},peek:function(){return en(r,void 0,void 0,function(){var s;return tn(this,function(c){switch(c.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:n.summary}]:[4,i()];case 1:return s=c.sent(),[4,s.head()];case 2:return[2,c.sent()]}})})}}},e.prototype.then=function(r,t){return this._getOrCreatePromise().then(r,t)},e.prototype.catch=function(r){return this._getOrCreatePromise().catch(r)},e.prototype.finally=function(r){return this._getOrCreatePromise().finally(r)},e.prototype.subscribe=function(r){this._subscribe(r).catch(function(){})},e.prototype.isOpen=function(){return this._summary===null&&this._error===null},e.prototype._subscribe=function(r,t){t===void 0&&(t=!1);var n=this._decorateObserver(r);return this._streamObserverPromise.then(function(o){return t&&o.pause(),o.subscribe(n),o}).catch(function(o){return n.onError!=null&&n.onError(o),Promise.reject(o)})},e.prototype._decorateObserver=function(r){var t=this,n,o,i,a=(n=r.onCompleted)!==null&&n!==void 0?n:cI,s=(o=r.onError)!==null&&o!==void 0?o:sI,c=(i=r.onKeys)!==null&&i!==void 0?i:lI,u=function(h){t._releaseConnectionAndGetSummary(h).then(function(v){return t._summary!==null?a.call(r,t._summary):(t._summary=v,a.call(r,v))}).catch(s)},l=function(h){t._connectionHolder.releaseConnection().then(function(){hI(h,t._stack),t._error=h,s.call(r,h)}).catch(s)},d=function(h){return t._keys=h,c.call(r,h)};return{onNext:r.onNext!=null?r.onNext.bind(r):void 0,onKeys:d,onCompleted:u,onError:l}},e.prototype._cancel=function(){this._summary===null&&this._error===null&&this._streamObserverPromise.then(function(r){return r.cancel()}).catch(function(){})},e.prototype._releaseConnectionAndGetSummary=function(r){var t=k0.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),n=t.validatedQuery,o=t.params,i=this._connectionHolder;return i.getConnection().then(function(a){return i.releaseConnection().then(function(){return a==null?void 0:a.getProtocolVersion()})},function(a){}).then(function(a){return new aI.default(n,o,r,a)})},e.prototype._createQueuedResultObserver=function(r){var t=this;function n(){var u={};return u.promise=new Promise(function(l,d){u.resolve=l,u.reject=d}),u}function o(u){return u instanceof Error}function i(){var u;return en(this,void 0,void 0,function(){var l;return tn(this,function(d){switch(d.label){case 0:if(a.length>0){if(l=(u=a.shift())!==null&&u!==void 0?u:(0,_i.newError)("Unexpected empty buffer",_i.PROTOCOL_ERROR),r(),o(l))throw l;return[2,l]}return s.resolvable=n(),[4,s.resolvable.promise];case 1:return[2,d.sent()]}})})}var a=[],s={resolvable:null},c={onNext:function(u){c._push({done:!1,value:u})},onCompleted:function(u){c._push({done:!0,value:u})},onError:function(u){c._push(u)},_push:function(u){if(s.resolvable!==null){var l=s.resolvable;s.resolvable=null,o(u)?l.reject(u):l.resolve(u)}else a.push(u),r()},dequeue:i,dequeueUntilDone:function(){return en(t,void 0,void 0,function(){var u;return tn(this,function(l){switch(l.label){case 0:return[4,i()];case 1:return u=l.sent(),u.done===!0?[2,u]:[3,0];case 2:return[2]}})})},head:function(){return en(t,void 0,void 0,function(){var u,u,l;return tn(this,function(d){switch(d.label){case 0:if(a.length>0){if(u=a[0],o(u))throw u;return[2,u]}s.resolvable=n(),d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,s.resolvable.promise];case 2:return u=d.sent(),a.unshift(u),[2,u];case 3:throw l=d.sent(),a.unshift(l),l;case 4:return r(),[7];case 5:return[2]}})})},get size(){return a.length}};return c},e}();N0=Symbol.toStringTag;function dI(){var e=new Error("");return e.stack!=null?e.stack.replace(/^Error(\n\r)*/,""):null}function hI(e,r){r!=null&&(e.stack=e.toString()+`
`+r)}sa.default=fI;var Uc={};Object.defineProperty(Uc,"__esModule",{value:!0});var vI=function(){function e(r,t,n){this.keys=r,this.records=t,this.summary=n}return e}();Uc.default=vI;var ca={};Object.defineProperty(ca,"__esModule",{value:!0});ca.Releasable=void 0;var _I=function(){function e(){}return e.prototype.release=function(){throw new Error("Not implemented")},e}();ca.Releasable=_I;var pI=function(){function e(){}return e.prototype.acquireConnection=function(r){throw Error("Not implemented")},e.prototype.supportsMultiDb=function(){throw Error("Not implemented")},e.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},e.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},e.prototype.supportsSessionAuth=function(){throw Error("Not implemented")},e.prototype.SSREnabled=function(){return!1},e.prototype.verifyConnectivityAndGetServerInfo=function(r){throw Error("Not implemented")},e.prototype.verifyAuthentication=function(r){throw Error("Not implemented")},e.prototype.getNegotiatedProtocolVersion=function(){throw Error("Not Implemented")},e.prototype.close=function(){throw Error("Not implemented")},e}();ca.default=pI;var p_={};Object.defineProperty(p_,"__esModule",{value:!0});var yI=function(){function e(){}return e.prototype.beginTransaction=function(r){throw new Error("Not implemented")},e.prototype.run=function(r,t,n){throw new Error("Not implemented")},e.prototype.commitTransaction=function(r){throw new Error("Not implemented")},e.prototype.rollbackTransaction=function(r){throw new Error("Not implemented")},e.prototype.resetAndFlush=function(){throw new Error("Not implemented")},e.prototype.isOpen=function(){throw new Error("Not implemented")},e.prototype.getProtocolVersion=function(){throw new Error("Not implemented")},e.prototype.hasOngoingObservableRequests=function(){throw new Error("Not implemented")},e}();p_.default=yI;var Fc={},ty=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},ry=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},bI=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fc,"__esModule",{value:!0});var mI=Q,xi=Ct,Qs=Ur,gI=jo,Et=Sr,Pt=oe,M0=bI(sa),OI=function(){function e(r){var t=r.connectionHolder,n=r.onClose,o=r.onBookmarks,i=r.onConnection,a=r.reactive,s=r.fetchSize,c=r.impersonatedUser,u=r.highRecordWatermark,l=r.lowRecordWatermark,d=r.notificationFilter,h=r.apiTelemetryConfig,v=this;this._connectionHolder=t,this._reactive=a,this._state=_t.ACTIVE,this._onClose=n,this._onBookmarks=o,this._onConnection=i,this._onError=this._onErrorCallback.bind(this),this._fetchSize=s,this._onComplete=this._onCompleteCallback.bind(this),this._results=[],this._impersonatedUser=c,this._lowRecordWatermak=l,this._highRecordWatermark=u,this._bookmarks=Qs.Bookmarks.empty(),this._notificationFilter=d,this._apiTelemetryConfig=h,this._acceptActive=function(){},this._activePromise=new Promise(function(_,y){v._acceptActive=_})}return e.prototype._begin=function(r,t,n){var o=this;this._connectionHolder.getConnection().then(function(i){return ty(o,void 0,void 0,function(){var a,s=this;return ry(this,function(c){switch(c.label){case 0:return this._onConnection(),i==null?[3,2]:(a=this,[4,r()]);case 1:return a._bookmarks=c.sent(),[2,i.beginTransaction({bookmarks:this._bookmarks,txConfig:t,mode:this._connectionHolder.mode(),database:this._connectionHolder.database(),impersonatedUser:this._impersonatedUser,notificationFilter:this._notificationFilter,apiTelemetryConfig:this._apiTelemetryConfig,beforeError:function(u){n!=null&&n.onError(u),s._onError(u).catch(function(){})},afterComplete:function(u){n!=null&&n.onComplete(u),u.db!==void 0&&(n==null?void 0:n.onDB)!=null&&n.onDB(u.db),s._onComplete(u)}})];case 2:throw(0,Pt.newError)("No connection available")}})})}).catch(function(i){n!=null&&n.onError(i),o._onError(i).catch(function(){})}).finally(function(){return o._acceptActive()})},e.prototype.run=function(r,t){var n=(0,mI.validateQueryAndParameters)(r,t),o=n.validatedQuery,i=n.params,a=this._state.run(o,i,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize,highRecordWatermark:this._highRecordWatermark,lowRecordWatermark:this._lowRecordWatermak,preparationJob:this._activePromise});return this._results.push(a),a},e.prototype.commit=function(){var r=this,t=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:function(n){return r._onCompleteCallback(n,r._bookmarks)},onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=t.state,this._onClose(),new Promise(function(n,o){t.result.subscribe({onCompleted:function(){return n()},onError:function(i){return o(i)}})})},e.prototype.rollback=function(){var r=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=r.state,this._onClose(),new Promise(function(t,n){r.result.subscribe({onCompleted:function(){return t()},onError:function(o){return n(o)}})})},e.prototype.isOpen=function(){return this._state===_t.ACTIVE},e.prototype.close=function(){return ty(this,void 0,void 0,function(){return ry(this,function(r){switch(r.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._onErrorCallback=function(r){return this._state===_t.FAILED?Promise.resolve(null):(this._state=_t.FAILED,this._onClose(),this._results.forEach(function(t){t.isOpen()&&t._streamObserverPromise.then(function(n){return n.onError(r)}).catch(function(n){})}),this._connectionHolder.releaseConnection())},e.prototype._onCompleteCallback=function(r,t){this._onBookmarks(new Qs.Bookmarks(r==null?void 0:r.bookmark),t??Qs.Bookmarks.empty(),r==null?void 0:r.db)},e}(),_t={ACTIVE:{commit:function(e){var r=e.connectionHolder,t=e.onError,n=e.onComplete,o=e.onConnection,i=e.pendingResults,a=e.preparationJob;return{result:ny(!0,r,t,n,o,i,a),state:_t.SUCCEEDED}},rollback:function(e){var r=e.connectionHolder,t=e.onError,n=e.onComplete,o=e.onConnection,i=e.pendingResults,a=e.preparationJob;return{result:ny(!1,r,t,n,o,i,a),state:_t.ROLLED_BACK}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError,i=t.onComplete,a=t.onConnection,s=t.reactive,c=t.fetchSize,u=t.highRecordWatermark,l=t.lowRecordWatermark,d=t.preparationJob,h=d??Promise.resolve(),v=n.getConnection().then(function(_){return h.then(function(){return _})}).then(function(_){if(a(),_!=null)return _.run(e,r,{bookmarks:Qs.Bookmarks.empty(),txConfig:gI.TxConfig.empty(),beforeError:o,afterComplete:i,reactive:s,fetchSize:c,highRecordWatermark:u,lowRecordWatermark:l});throw(0,Pt.newError)("No connection available")}).catch(function(_){return new Et.FailedObserver({error:_,onError:o})});return Dt(v,e,r,n,u,l)}},FAILED:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:Dt(new Et.FailedObserver({error:(0,Pt.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:t}),"COMMIT",{},r,0,0),state:_t.FAILED}},rollback:function(e){var r=e.connectionHolder;return e.onError,e.onComplete,{result:Dt(new Et.CompletedObserver,"ROLLBACK",{},r,0,0),state:_t.FAILED}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError;return t.onComplete,Dt(new Et.FailedObserver({error:(0,Pt.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:o}),e,r,n,0,0)}},SUCCEEDED:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:Dt(new Et.FailedObserver({error:(0,Pt.newError)("Cannot commit this transaction, because it has already been committed."),onError:t}),"COMMIT",{},xi.EMPTY_CONNECTION_HOLDER,0,0),state:_t.SUCCEEDED,connectionHolder:r}},rollback:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:Dt(new Et.FailedObserver({error:(0,Pt.newError)("Cannot rollback this transaction, because it has already been committed."),onError:t}),"ROLLBACK",{},xi.EMPTY_CONNECTION_HOLDER,0,0),state:_t.SUCCEEDED,connectionHolder:r}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError;return t.onComplete,Dt(new Et.FailedObserver({error:(0,Pt.newError)("Cannot run query in this transaction, because it has already been committed."),onError:o}),e,r,n,0,0)}},ROLLED_BACK:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:Dt(new Et.FailedObserver({error:(0,Pt.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:t}),"COMMIT",{},r,0,0),state:_t.ROLLED_BACK}},rollback:function(e){var r=e.connectionHolder;return e.onError,e.onComplete,{result:Dt(new Et.FailedObserver({error:(0,Pt.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},r,0,0),state:_t.ROLLED_BACK}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError;return t.onComplete,Dt(new Et.FailedObserver({error:(0,Pt.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:o}),e,r,n,0,0)}}};function ny(e,r,t,n,o,i,a){var s=a??Promise.resolve(),c=r.getConnection().then(function(u){return s.then(function(){return u})}).then(function(u){return o(),i.forEach(function(l){return l._cancel()}),Promise.all(i.map(function(l){return l.summary()})).then(function(l){if(u!=null)return e?u.commitTransaction({beforeError:t,afterComplete:n}):u.rollbackTransaction({beforeError:t,afterComplete:n});throw(0,Pt.newError)("No connection available")})}).catch(function(u){return new Et.FailedObserver({error:u,onError:t})});return new M0.default(c,e?"COMMIT":"ROLLBACK",{},r,{high:Number.MAX_VALUE,low:Number.MAX_VALUE})}function Dt(e,r,t,n,o,i){return n===void 0&&(n=xi.EMPTY_CONNECTION_HOLDER),new M0.default(Promise.resolve(e),r,t,new xi.ReadOnlyConnectionHolder(n??xi.EMPTY_CONNECTION_HOLDER),{low:i,high:o})}Fc.default=OI;var Bc={};Object.defineProperty(Bc,"__esModule",{value:!0});var wI=function(){function e(r){var t=r.run;this._run=t}return e.fromTransaction=function(r){return new e({run:r.run.bind(r)})},e.prototype.run=function(r,t){return this._run(r,t)},e}();Bc.default=wI;var xc={},EI=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ic=f&&f.__assign||function(){return ic=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ic.apply(this,arguments)},SI=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},D0;Object.defineProperty(xc,"__esModule",{value:!0});var PI=SI(Fc),TI=function(e){EI(r,e);function r(t){var n=t.connectionHolder,o=t.onClose,i=t.onBookmarks,a=t.onConnection,s=t.reactive,c=t.fetchSize,u=t.impersonatedUser,l=t.highRecordWatermark,d=t.lowRecordWatermark,h=t.notificationFilter,v=t.apiTelemetryConfig,_=t.onDbCallback,y=e.call(this,{connectionHolder:n,onClose:o,onBookmarks:i,onConnection:a,reactive:s,fetchSize:c,impersonatedUser:u,highRecordWatermark:l,lowRecordWatermark:d,notificationFilter:h,apiTelemetryConfig:v})||this;return y[D0]="TransactionPromise",y._onDbCallback=_,y}return r.prototype.then=function(t,n){return this._getOrCreateBeginPromise().then(t,n)},r.prototype.catch=function(t){return this._getOrCreateBeginPromise().catch(t)},r.prototype.finally=function(t){return this._getOrCreateBeginPromise().finally(t)},r.prototype._getOrCreateBeginPromise=function(){var t=this;return this._beginPromise==null&&(this._beginPromise=new Promise(function(n,o){t._resolve=n,t._reject=o,t._beginError!=null&&o(t._beginError),t._beginMetadata!=null&&n(t._toTransaction())})),this._beginPromise},r.prototype._toTransaction=function(){return ic(ic({},this),{run:e.prototype.run.bind(this),commit:e.prototype.commit.bind(this),rollback:e.prototype.rollback.bind(this),close:e.prototype.close.bind(this),isOpen:e.prototype.isOpen.bind(this),_begin:this._begin.bind(this)})},r.prototype._begin=function(t,n){return e.prototype._begin.call(this,t,n,{onError:this._onBeginError.bind(this),onComplete:this._onBeginMetadata.bind(this),onDB:this._onDbCallback})},r.prototype._onBeginError=function(t){this._beginError=t,this._reject!=null&&this._reject(t)},r.prototype._onBeginMetadata=function(t){this._beginMetadata=t??{},this._resolve!=null&&this._resolve(this._toTransaction())},r}(PI.default);D0=Symbol.toStringTag;xc.default=TI;var Wc={},la={};Object.defineProperty(la,"__esModule",{value:!0});la.cacheKey=void 0;var CI=It;function AI(e,r){var t;return r!=null?"basic:"+r:e===void 0?"DEFAULT":e.scheme==="basic"?"basic:"+((t=e.principal)!==null&&t!==void 0?t:""):e.scheme==="kerberos"?"kerberos:"+e.credentials:e.scheme==="bearer"?"bearer:"+e.credentials:e.scheme==="none"?"none":(0,CI.stringify)(e,{sortedElements:!0})}la.cacheKey=AI;var pi=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},yi=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Es=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Ss=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))},y_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wc,"__esModule",{value:!0});var II=Sr,RI=Q,et=U,rn=oe,jI=y_(sa),oy=Ct,$I=ia,bi=Ur,_r=jo,NI=y_(xc),kI=y_(Bc),MI=la,DI=function(){function e(r){var t=r.mode,n=r.connectionProvider,o=r.bookmarks,i=r.database,a=r.config,s=r.reactive,c=r.fetchSize,u=r.impersonatedUser,l=r.bookmarkManager,d=r.notificationFilter,h=r.auth,v=r.log,_=r.homeDatabaseCallback,y;this._mode=t,this._database=i,this._reactive=s,this._fetchSize=c,this._homeDatabaseCallback=_,this._auth=h,this._getConnectionAcquistionBookmarks=this._getConnectionAcquistionBookmarks.bind(this),this._readConnectionHolder=new oy.ConnectionHolder({mode:et.ACCESS_MODE_READ,auth:h,database:i,bookmarks:o,connectionProvider:n,impersonatedUser:u,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:v}),this._writeConnectionHolder=new oy.ConnectionHolder({mode:et.ACCESS_MODE_WRITE,auth:h,database:i,bookmarks:o,connectionProvider:n,impersonatedUser:u,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:v}),this._open=!0,this._hasTx=!1,this._impersonatedUser=u,this._lastBookmarks=o??bi.Bookmarks.empty(),this._configuredBookmarks=this._lastBookmarks,this._transactionExecutor=LI(a),this._databaseNameResolved=this._database!=="";var p=this._calculateWatermaks();this._lowRecordWatermark=p.low,this._highRecordWatermark=p.high,this._results=[],this._bookmarkManager=l,this._notificationFilter=d,this._log=v,this._databaseGuess=a==null?void 0:a.cachedHomeDatabase,this._isRoutingSession=(y=a==null?void 0:a.routingDriver)!==null&&y!==void 0?y:!1}return e.prototype.run=function(r,t,n){var o=this,i=(0,RI.validateQueryAndParameters)(r,t),a=i.validatedQuery,s=i.params,c=n!=null?new _r.TxConfig(n,this._log):_r.TxConfig.empty(),u=this._run(a,s,function(l){return pi(o,void 0,void 0,function(){var d,h=this;return yi(this,function(v){switch(v.label){case 0:return[4,this._bookmarks()];case 1:return d=v.sent(),this._assertSessionIsOpen(),[2,l.run(a,s,{bookmarks:d,txConfig:c,mode:this._mode,database:this._database,apiTelemetryConfig:{api:et.TELEMETRY_APIS.AUTO_COMMIT_TRANSACTION},impersonatedUser:this._impersonatedUser,afterComplete:function(_){return h._onCompleteCallback(_,d)},reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,onDb:this._onDatabaseNameResolved.bind(this)})]}})})});return this._results.push(u),u},e.prototype._run=function(r,t,n){var o=this._acquireAndConsumeConnection(n),i=o.connectionHolder,a=o.resultPromise,s=a.catch(function(u){return Promise.resolve(new II.FailedObserver({error:u}))}),c={high:this._highRecordWatermark,low:this._lowRecordWatermark};return new jI.default(s,r,t,i,c)},e.prototype._acquireConnection=function(r){var t=this,n=this._acquireAndConsumeConnection(r),o=n.connectionHolder,i=n.resultPromise;return i.then(function(a){return pi(t,void 0,void 0,function(){return yi(this,function(s){switch(s.label){case 0:return[4,o.releaseConnection()];case 1:return s.sent(),[2,a]}})})})},e.prototype._acquireAndConsumeConnection=function(r){var t,n=this._connectionHolderWithMode(this._mode);return this._open?!this._hasTx&&n.initializeConnection(this._databaseGuess)?t=n.getConnection().then(function(o){return r(o)}):t=Promise.reject((0,rn.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):t=Promise.reject((0,rn.newError)("Cannot run query in a closed session.")),{connectionHolder:n,resultPromise:t}},e.prototype.beginTransaction=function(r){var t=r,n=_r.TxConfig.empty();return t!=null&&(n=new _r.TxConfig(t,this._log)),this._beginTransaction(this._mode,n,{api:et.TELEMETRY_APIS.UNMANAGED_TRANSACTION})},e.prototype._beginTransaction=function(r,t,n){var o=this;if(!this._open)throw(0,rn.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,rn.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var i=e._validateSessionMode(r),a=this._connectionHolderWithMode(i);a.initializeConnection(this._databaseGuess),this._hasTx=!0;var s=new NI.default({connectionHolder:a,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmarks:function(c,u,l){return o._updateBookmarks(c,u,l)},onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,apiTelemetryConfig:n,onDbCallback:this._onDatabaseNameResolved.bind(this)});return s._begin(function(){return o._bookmarks()},t),s},e.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,rn.newError)("You cannot run more transactions on a closed session.")},e.prototype._transactionClosed=function(){this._hasTx=!1},e.prototype.lastBookmark=function(){return this.lastBookmarks()},e.prototype.lastBookmarks=function(){return this._lastBookmarks.values()},e.prototype._bookmarks=function(){var r;return pi(this,void 0,void 0,function(){var t;return yi(this,function(n){switch(n.label){case 0:return[4,(r=this._bookmarkManager)===null||r===void 0?void 0:r.getBookmarks()];case 1:return t=n.sent(),t===void 0?[2,this._lastBookmarks]:[2,new bi.Bookmarks(Ss(Ss([],Es(t),!1),Es(this._configuredBookmarks),!1))]}})})},e.prototype.readTransaction=function(r,t){var n=new _r.TxConfig(t,this._log);return this._runTransaction(et.ACCESS_MODE_READ,n,r)},e.prototype.writeTransaction=function(r,t){var n=new _r.TxConfig(t,this._log);return this._runTransaction(et.ACCESS_MODE_WRITE,n,r)},e.prototype._runTransaction=function(r,t,n){var o=this;return this._transactionExecutor.execute(function(i){return o._beginTransaction(r,t,i)},n)},e.prototype.executeRead=function(r,t){var n=new _r.TxConfig(t,this._log);return this._executeInTransaction(et.ACCESS_MODE_READ,n,r)},e.prototype.executeWrite=function(r,t){var n=new _r.TxConfig(t,this._log);return this._executeInTransaction(et.ACCESS_MODE_WRITE,n,r)},e.prototype._executeInTransaction=function(r,t,n){var o=this;return this._transactionExecutor.execute(function(i){return o._beginTransaction(r,t,i)},n,kI.default.fromTransaction)},e.prototype._onDatabaseNameResolved=function(r){if(this._isRoutingSession&&(this._databaseGuess=r,!this._databaseNameResolved)){var t=r??"";this._database=t,this._readConnectionHolder.setDatabase(t),this._writeConnectionHolder.setDatabase(t),this._databaseNameResolved=!0,this._homeDatabaseCallback!=null&&this._homeDatabaseCallback((0,MI.cacheKey)(this._auth,this._impersonatedUser),r)}},e.prototype._getConnectionAcquistionBookmarks=function(){var r;return pi(this,void 0,void 0,function(){var t;return yi(this,function(n){switch(n.label){case 0:return[4,(r=this._bookmarkManager)===null||r===void 0?void 0:r.getBookmarks()];case 1:return t=n.sent(),t===void 0?[2,this._lastBookmarks]:[2,new bi.Bookmarks(Ss(Ss([],Es(this._configuredBookmarks),!1),Es(t),!1))]}})})},e.prototype._updateBookmarks=function(r,t,n){var o,i,a;r!=null&&!r.isEmpty()&&((o=this._bookmarkManager)===null||o===void 0||o.updateBookmarks((i=t==null?void 0:t.values())!==null&&i!==void 0?i:[],(a=r==null?void 0:r.values())!==null&&a!==void 0?a:[]).catch(function(){}),this._lastBookmarks=r,this._configuredBookmarks=bi.Bookmarks.empty())},e.prototype.close=function(){return pi(this,void 0,void 0,function(){return yi(this,function(r){switch(r.label){case 0:return this._open?(this._open=!1,this._results.forEach(function(t){return t._cancel()}),this._transactionExecutor.close(),[4,this._readConnectionHolder.close(this._hasTx)]):[3,3];case 1:return r.sent(),[4,this._writeConnectionHolder.close(this._hasTx)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._connectionHolderWithMode=function(r){if(r===et.ACCESS_MODE_READ)return this._readConnectionHolder;if(r===et.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,rn.newError)("Unknown access mode: "+r)},e.prototype._onCompleteCallback=function(r,t){this._updateBookmarks(new bi.Bookmarks(r.bookmark),t,r.db)},e.prototype._calculateWatermaks=function(){return this._fetchSize===et.FETCH_ALL?{low:Number.MAX_VALUE,high:Number.MAX_VALUE}:{low:.3*this._fetchSize,high:.7*this._fetchSize}},e.prototype._configureTransactionExecutor=function(r,t){this._transactionExecutor.pipelineBegin=r,this._transactionExecutor.telemetryApi=t},e._validateSessionMode=function(r){var t=r??et.ACCESS_MODE_WRITE;if(t!==et.ACCESS_MODE_READ&&t!==et.ACCESS_MODE_WRITE)throw(0,rn.newError)("Illegal session mode "+t);return t},e}();function LI(e){var r,t=(r=e==null?void 0:e.maxTransactionRetryTime)!==null&&r!==void 0?r:null;return new $I.TransactionExecutor(t)}Wc.default=DI;var Ge={},$o={},ac=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},uc=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},ih=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},iy=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},ay=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty($o,"__esModule",{value:!0});$o.bookmarkManager=void 0;var UI=function(){function e(){throw new Error("Not implemented")}return e.prototype.updateBookmarks=function(r,t){return ac(this,void 0,void 0,function(){return uc(this,function(n){throw new Error("Not implemented")})})},e.prototype.getBookmarks=function(){return ac(this,void 0,void 0,function(){return uc(this,function(r){throw new Error("Not implemented")})})},e}();$o.default=UI;function FI(e){e===void 0&&(e={});var r=new Set(e.initialBookmarks);return new BI(r,e.bookmarksSupplier,e.bookmarksConsumer)}$o.bookmarkManager=FI;var BI=function(){function e(r,t,n){this._bookmarks=r,this._bookmarksSupplier=t,this._bookmarksConsumer=n}return e.prototype.updateBookmarks=function(r,t){return ac(this,void 0,void 0,function(){var n,o,i,c,a,s,c,u,l,d,h;return uc(this,function(v){switch(v.label){case 0:n=this._bookmarks;try{for(o=ih(r),i=o.next();!i.done;i=o.next())c=i.value,n.delete(c)}catch(_){u={error:_}}finally{try{i&&!i.done&&(l=o.return)&&l.call(o)}finally{if(u)throw u.error}}try{for(a=ih(t),s=a.next();!s.done;s=a.next())c=s.value,n.add(c)}catch(_){d={error:_}}finally{try{s&&!s.done&&(h=a.return)&&h.call(a)}finally{if(d)throw d.error}}return typeof this._bookmarksConsumer!="function"?[3,2]:[4,this._bookmarksConsumer(ay([],iy(n),!1))];case 1:v.sent(),v.label=2;case 2:return[2]}})})},e.prototype.getBookmarks=function(){var r;return ac(this,void 0,void 0,function(){var t,n,o,i,a,s,c;return uc(this,function(u){switch(u.label){case 0:return t=new Set(this._bookmarks),typeof this._bookmarksSupplier!="function"?[3,2]:[4,this._bookmarksSupplier()];case 1:n=(r=u.sent())!==null&&r!==void 0?r:[];try{for(o=ih(n),i=o.next();!i.done;i=o.next())a=i.value,t.add(a)}catch(l){s={error:l}}finally{try{i&&!i.done&&(c=o.return)&&c.call(o)}finally{if(s)throw s.error}}u.label=2;case 2:return[2,ay([],iy(t),!1)]}})})},e}(),Vc={},zc=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},qc=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},xI=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vc,"__esModule",{value:!0});var WI=xI(Uc),VI=oe,zI=function(){function e(){}return e.prototype.eagerResultTransformer=function(){return uy},e.prototype.eager=function(){return uy},e.prototype.mappedResultTransformer=function(r){return sy(r)},e.prototype.mapped=function(r){return sy(r)},e.prototype.first=function(){return qI},e.prototype.summary=function(){return HI},e}(),L0=new zI;Object.freeze(L0);Vc.default=L0;function uy(e){return zc(this,void 0,void 0,function(){var r,t,n,o;return qc(this,function(i){switch(i.label){case 0:return[4,e];case 1:return r=i.sent(),t=r.summary,n=r.records,[4,e.keys()];case 2:return o=i.sent(),[2,new WI.default(o,n,t)]}})})}function sy(e){var r=this;if(e==null||e.collect==null&&e.map==null)throw(0,VI.newError)("Requires a map or/and a collect functions.");return function(t){return zc(r,void 0,void 0,function(){return qc(this,function(n){switch(n.label){case 0:return[4,new Promise(function(o,i){var a={records:[],keys:[]};t.subscribe({onKeys:function(s){a.keys=s},onNext:function(s){if(e.map!=null){var c=e.map(s);c!==void 0&&a.records.push(c)}else a.records.push(s)},onCompleted:function(s){if(e.collect!=null)o(e.collect(a.records,s,a.keys));else{var c={records:a.records,summary:s,keys:a.keys};o(c)}},onError:function(s){i(s)}})})];case 1:return[2,n.sent()]}})})}}function qI(e){return zc(this,void 0,void 0,function(){var r,t,n,o;return qc(this,function(i){switch(i.label){case 0:return r=e[Symbol.asyncIterator](),[4,r.next()];case 1:t=i.sent(),n=t.value,o=t.done,i.label=2;case 2:return i.trys.push([2,,3,6]),o===!0?[2,void 0]:[2,n];case 3:return r.return==null?[3,5]:[4,r.return()];case 4:i.sent(),i.label=5;case 5:return[7];case 6:return[2]}})})}function HI(e){return zc(this,void 0,void 0,function(){return qc(this,function(r){switch(r.label){case 0:return[4,e.summary()];case 1:return[2,r.sent()]}})})}var b_={},ah=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},uh=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(b_,"__esModule",{value:!0});var GI=U,KI=function(){function e(r){this._createSession=r}return e.prototype.execute=function(r,t,n){return ah(this,void 0,void 0,function(){var o,i,a,s=this;return uh(this,function(c){switch(c.label){case 0:o=this._createSession({database:r.database,bookmarkManager:r.bookmarkManager,impersonatedUser:r.impersonatedUser,auth:r.auth}),i=YI(r.signal,"abort",function(){return ah(s,void 0,void 0,function(){return uh(this,function(u){switch(u.label){case 0:return[4,o.close()];case 1:return[2,u.sent()]}})})}),o._configureTransactionExecutor(!0,GI.TELEMETRY_APIS.EXECUTE_QUERY),c.label=1;case 1:return c.trys.push([1,,3,5]),a=r.routing==="READ"?o.executeRead.bind(o):o.executeWrite.bind(o),[4,a(function(u){return ah(s,void 0,void 0,function(){var l;return uh(this,function(d){switch(d.label){case 0:return l=u.run(t,n),[4,r.resultTransformer(l)];case 1:return[2,d.sent()]}})})},r.transactionConfig)];case 2:return[2,c.sent()];case 3:return i.uninstall(),[4,o.close()];case 4:return c.sent(),[7];case 5:return[2]}})})},e}();b_.default=KI;function YI(e,r,t){return typeof(e==null?void 0:e.addEventListener)=="function"&&e.addEventListener(r,t),{uninstall:function(){typeof(e==null?void 0:e.removeEventListener)=="function"&&e.removeEventListener(r,t)}}}var m_={};Object.defineProperty(m_,"__esModule",{value:!0});var ZI=function(){function e(r){this.maxSize=r,this.pruneCount=Math.max(Math.round(.01*r*Math.log(r)),1),this.map=new Map}return e.prototype.set=function(r,t){this.map.set(r,{database:t,lastUsed:Date.now()}),this._pruneCache()},e.prototype.get=function(r){var t=this.map.get(r);if(t!==void 0)return t.lastUsed=Date.now(),t.database},e.prototype.delete=function(r){this.map.delete(r)},e.prototype._pruneCache=function(){if(this.map.size>this.maxSize)for(var r=Array.from(this.map.entries()).sort(function(n,o){return n[1].lastUsed-o[1].lastUsed}),t=0;t<this.pruneCount;t++)this.map.delete(r[t][0])},e}();m_.default=ZI;var hv=f&&f.__assign||function(){return hv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},hv.apply(this,arguments)},cy=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},ly=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},fa=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.QueryConfig=Ge.SessionConfig=Ge.routing=Ge.WRITE=Ge.READ=Ge.Driver=void 0;var fy=Ur,QI=fa(kc),wn=U,XI=kn,dy=fa(Wc),JI=Q,eR=$o,tR=fa(Vc),rR=fa(b_),nR=oe,oR=fa(m_),iR=la,aR=60*60*1e3,uR=1e3,sR=1e4,Xs=wn.ACCESS_MODE_READ;Ge.READ=Xs;var g_=wn.ACCESS_MODE_WRITE;Ge.WRITE=g_;var cR=0,lR=function(){function e(){this.defaultAccessMode=g_,this.bookmarks=[],this.database="",this.impersonatedUser=void 0,this.auth=void 0,this.fetchSize=void 0,this.bookmarkManager=void 0,this.notificationFilter=void 0}return e}();Ge.SessionConfig=lR;var fR="WRITE",dR="READ",uo={WRITE:fR,READ:dR};Ge.routing=uo;Object.freeze(uo);var hR=function(){function e(){this.routing=uo.WRITE,this.resultTransformer=void 0,this.database="",this.impersonatedUser=void 0,this.bookmarkManager=void 0,this.transactionConfig=void 0,this.auth=void 0,this.signal=void 0}return e}();Ge.QueryConfig=hR;var U0=function(){function e(r,t,n,o,i){t===void 0&&(t={}),o===void 0&&(o=function(s){return new dy.default(s)}),i===void 0&&(i=function(s){return new rR.default(s)}),_R(t);var a=XI.Logger.create(t);vR(t,a),this._id=cR++,this._meta=r,this._config=t,this._log=a,this._createConnectionProvider=n,this._createSession=o,this._defaultExecuteQueryBookmarkManager=(0,eR.bookmarkManager)(),this._queryExecutor=i(this.session.bind(this)),this._connectionProvider=null,this.homeDatabaseCache=new oR.default(sR),this._afterConstruction()}return Object.defineProperty(e.prototype,"executeQueryBookmarkManager",{get:function(){return this._defaultExecuteQueryBookmarkManager},enumerable:!1,configurable:!0}),e.prototype.executeQuery=function(r,t,n){var o,i,a;return n===void 0&&(n={}),cy(this,void 0,void 0,function(){var s,c,u;return ly(this,function(l){switch(l.label){case 0:if(s=n.bookmarkManager===null?void 0:(o=n.bookmarkManager)!==null&&o!==void 0?o:this.executeQueryBookmarkManager,c=(i=n.resultTransformer)!==null&&i!==void 0?i:tR.default.eagerResultTransformer(),u=(a=n.routing)!==null&&a!==void 0?a:uo.WRITE,u!==uo.READ&&u!==uo.WRITE)throw(0,nR.newError)('Illegal query routing config: "'.concat(u,'"'));return[4,this._queryExecutor.execute({resultTransformer:c,bookmarkManager:s,routing:u,database:n.database,impersonatedUser:n.impersonatedUser,transactionConfig:n.transactionConfig,auth:n.auth,signal:n.signal},r,t)];case 1:return[2,l.sent()]}})})},e.prototype.verifyConnectivity=function(r){var t=r===void 0?{}:r,n=t.database,o=n===void 0?"":n,i=this._getOrCreateConnectionProvider();return i.verifyConnectivityAndGetServerInfo({database:o,accessMode:Xs})},e.prototype.verifyAuthentication=function(r){var t=r===void 0?{}:r,n=t.database,o=t.auth;return cy(this,void 0,void 0,function(){var i;return ly(this,function(a){switch(a.label){case 0:return i=this._getOrCreateConnectionProvider(),[4,i.verifyAuthentication({database:n??"system",auth:o,accessMode:Xs})];case 1:return[2,a.sent()]}})})},e.prototype.getServerInfo=function(r){var t=r===void 0?{}:r,n=t.database,o=n===void 0?"":n,i=this._getOrCreateConnectionProvider();return i.verifyConnectivityAndGetServerInfo({database:o,accessMode:Xs})},e.prototype.supportsMultiDb=function(){var r=this._getOrCreateConnectionProvider();return r.supportsMultiDb()},e.prototype.supportsTransactionConfig=function(){var r=this._getOrCreateConnectionProvider();return r.supportsTransactionConfig()},e.prototype.supportsUserImpersonation=function(){var r=this._getOrCreateConnectionProvider();return r.supportsUserImpersonation()},e.prototype.supportsSessionAuth=function(){var r=this._getOrCreateConnectionProvider();return r.supportsSessionAuth()},e.prototype.getNegotiatedProtocolVersion=function(){var r=this._getOrCreateConnectionProvider();return r.getNegotiatedProtocolVersion()},e.prototype.isEncrypted=function(){return this._isEncrypted()},e.prototype._supportsRouting=function(){return this._meta.routing},e.prototype._isEncrypted=function(){return this._config.encrypted===JI.ENCRYPTION_ON||this._config.encrypted===!0},e.prototype._getTrust=function(){return this._config.trust},e.prototype.session=function(r){var t=r===void 0?{}:r,n=t.defaultAccessMode,o=n===void 0?g_:n,i=t.bookmarks,a=t.database,s=a===void 0?"":a,c=t.impersonatedUser,u=t.fetchSize,l=t.bookmarkManager,d=t.notificationFilter,h=t.auth;return this._newSession({defaultAccessMode:o,bookmarkOrBookmarks:i,database:s,reactive:!1,impersonatedUser:c,fetchSize:F0(u,this._config.fetchSize),bookmarkManager:l,notificationFilter:d,auth:h})},e.prototype.close=function(){return this._log.info("Driver ".concat(this._id," closing")),this._connectionProvider!=null?this._connectionProvider.close():Promise.resolve()},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._afterConstruction=function(){this._log.info("".concat(this._meta.typename," driver ").concat(this._id," created for server address ").concat(this._meta.address.toString()))},e.prototype._homeDatabaseCallback=function(r,t){this.homeDatabaseCache.set(r,t)},e.prototype._newSession=function(r){var t=r.defaultAccessMode,n=r.bookmarkOrBookmarks,o=r.database,i=r.reactive,a=r.impersonatedUser,s=r.fetchSize,c=r.bookmarkManager,u=r.notificationFilter,l=r.auth,d=dy.default._validateSessionMode(t),h=this._getOrCreateConnectionProvider(),v=this.homeDatabaseCache.get((0,iR.cacheKey)(l,a)),_=this._homeDatabaseCallback.bind(this),y=n!=null?new fy.Bookmarks(n):fy.Bookmarks.empty();return this._createSession({mode:d,database:o??"",connectionProvider:h,bookmarks:y,config:hv({cachedHomeDatabase:v,routingDriver:this._supportsRouting()},this._config),reactive:i,impersonatedUser:a,fetchSize:s,bookmarkManager:c,notificationFilter:u,auth:l,log:this._log,homeDatabaseCallback:_})},e.prototype._getOrCreateConnectionProvider=function(){return this._connectionProvider==null&&(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,bR(this._config))),this._connectionProvider},e}();Ge.Driver=U0;function vR(e,r){var t,n,o=e.resolver;if(o!=null&&typeof o!="function")throw new TypeError("Configured resolver should be a function. Got: ".concat(typeof o));if(e.connectionAcquisitionTimeout<e.connectionTimeout&&r.warn('Configuration for "connectionAcquisitionTimeout" should be greater than or equal to "connectionTimeout". Otherwise, the connection acquisition timeout will take precedence for over the connection timeout in scenarios where a new connection is created while it is acquired'),((t=e.notificationFilter)===null||t===void 0?void 0:t.disabledCategories)!=null&&((n=e.notificationFilter)===null||n===void 0?void 0:n.disabledClassifications)!=null)throw new Error(`The notificationFilter can't have both "disabledCategories" and  "disabledClassifications" configured at the same time.`);return e}function _R(e){e.maxConnectionLifetime=sh(e.maxConnectionLifetime,aR),e.maxConnectionPoolSize=sh(e.maxConnectionPoolSize,wn.DEFAULT_POOL_MAX_SIZE),e.connectionAcquisitionTimeout=sh(e.connectionAcquisitionTimeout,wn.DEFAULT_POOL_ACQUISITION_TIMEOUT),e.fetchSize=F0(e.fetchSize,uR),e.connectionTimeout=pR(e),e.connectionLivenessCheckTimeout=yR(e.connectionLivenessCheckTimeout)}function sh(e,r){var t=parseInt(e,10);return t>0||t===0?t:t<0?Number.MAX_SAFE_INTEGER:r}function F0(e,r){var t=parseInt(e,10);if(t>0||t===wn.FETCH_ALL)return t;if(t===0||t<0)throw new Error("The fetch size can only be a positive value or ".concat(wn.FETCH_ALL," for ALL. However fetchSize = ").concat(t));return r}function pR(e){var r=parseInt(e.connectionTimeout,10);return r===0||!isNaN(r)&&r<0?null:isNaN(r)?wn.DEFAULT_CONNECTION_TIMEOUT_MILLIS:r}function yR(e){if(e!=null){var r=parseInt(e,10);if(r<0||Number.isNaN(r))throw new Error("The connectionLivenessCheckTimeout can only be a positive value or 0 for always. However connectionLivenessCheckTimeout = ".concat(r));return r}}function bR(e){return new QI.default(e.resolver)}Ge.default=U0;var Hc={};Object.defineProperty(Hc,"__esModule",{value:!0});var mR=oe,gR=It,OR={basic:function(e,r,t){return t!=null?{scheme:"basic",principal:e,credentials:r,realm:t}:{scheme:"basic",principal:e,credentials:r}},kerberos:function(e){return{scheme:"kerberos",principal:"",credentials:e}},bearer:function(e){return{scheme:"bearer",credentials:e}},none:function(){return{scheme:"none"}},custom:function(e,r,t,n,o){var i={scheme:n,principal:e};if(ch(r)&&(i.credentials=r),ch(t)&&(i.realm=t),ch(o)){try{(0,gR.stringify)(o)}catch(a){throw(0,mR.newError)("Circular references in custom auth token parameters",void 0,a)}i.parameters=o}return i}};function ch(e){return!(e==null||e===""||Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length===0)}Hc.default=OR;var nr={},vv=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},_v=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},wR=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nr,"__esModule",{value:!0});nr.staticAuthTokenManager=nr.authTokenManagers=nr.AuthTokenAndExpiration=void 0;var ER=wR(Hc),SR=ee,PR=function(){function e(){}return e.prototype.getToken=function(){throw new Error("Not Implemented")},e.prototype.handleSecurityException=function(r,t){throw new Error("Not implemented")},e}();nr.default=PR;var TR=function(){function e(){this.token=ER.default.none(),this.expiration=void 0}return e}();nr.AuthTokenAndExpiration=TR;var CR=function(){function e(){}return e.prototype.bearer=function(r){var t=r.tokenProvider;if(typeof t!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof t));return new hy(t,["Neo.ClientError.Security.Unauthorized","Neo.ClientError.Security.TokenExpired"])},e.prototype.basic=function(r){var t=this,n=r.tokenProvider;if(typeof n!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof n));return new hy(function(){return vv(t,void 0,void 0,function(){var o;return _v(this,function(i){switch(i.label){case 0:return o={},[4,n()];case 1:return[2,(o.token=i.sent(),o)]}})})},["Neo.ClientError.Security.Unauthorized"])},e}(),B0=new CR;nr.authTokenManagers=B0;Object.freeze(B0);function AR(e){var r=e.authToken;return new RR(r)}nr.staticAuthTokenManager=AR;var IR=function(){function e(r){r===void 0&&(r=[]),this._subscribers=r}return e.prototype.subscribe=function(r){this._subscribers.push(r)},e.prototype.onCompleted=function(r){this._subscribers.forEach(function(t){return t.onCompleted(r)})},e.prototype.onError=function(r){this._subscribers.forEach(function(t){return t.onError(r)})},e}(),hy=function(){function e(r,t,n,o){this._tokenProvider=r,this._handledSecurityCodes=t,this._currentAuthData=n,this._refreshObservable=o}return e.prototype.getToken=function(){var r;return vv(this,void 0,void 0,function(){return _v(this,function(t){switch(t.label){case 0:return this._currentAuthData===void 0||this._currentAuthData.expiration!==void 0&&this._currentAuthData.expiration<new Date?[4,this._refreshAuthToken()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2,(r=this._currentAuthData)===null||r===void 0?void 0:r.token]}})})},e.prototype.handleSecurityException=function(r,t){var n;return this._handledSecurityCodes.includes(t)?(SR.util.equals(r,(n=this._currentAuthData)===null||n===void 0?void 0:n.token)&&this._scheduleRefreshAuthToken(),!0):!1},e.prototype._scheduleRefreshAuthToken=function(r){var t=this;this._refreshObservable===void 0&&(this._currentAuthData=void 0,this._refreshObservable=new IR,Promise.resolve(this._tokenProvider()).then(function(n){var o;t._currentAuthData=n,(o=t._refreshObservable)===null||o===void 0||o.onCompleted(n)}).catch(function(n){var o;(o=t._refreshObservable)===null||o===void 0||o.onError(n)}).finally(function(){t._refreshObservable=void 0})),r!==void 0&&this._refreshObservable.subscribe(r)},e.prototype._refreshAuthToken=function(){return vv(this,void 0,void 0,function(){var r=this;return _v(this,function(t){switch(t.label){case 0:return[4,new Promise(function(n,o){r._scheduleRefreshAuthToken({onCompleted:n,onError:o})})];case 1:return[2,t.sent()]}})})},e}(),RR=function(){function e(r){this._authToken=r}return e.prototype.getToken=function(){return this._authToken},e.prototype.handleSecurityException=function(r,t){return!1},e}(),po={},jR=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(po,"__esModule",{value:!0});po.InternalConfig=po.Config=void 0;var x0=function(){function e(){this.encrypted=void 0,this.trust=void 0,this.trustedCertificates=[],this.maxConnectionPoolSize=100,this.maxConnectionLifetime=60*60*1e3,this.connectionAcquisitionTimeout=6e4,this.maxTransactionRetryTime=3e4,this.connectionLivenessCheckTimeout=void 0,this.connectionTimeout=3e4,this.disableLosslessIntegers=!1,this.useBigInt=!1,this.logging=void 0,this.resolver=void 0,this.notificationFilter=void 0,this.userAgent=void 0,this.telemetryDisabled=!1,this.clientCertificate=void 0}return e}();po.Config=x0;var $R=function(e){jR(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(x0);po.InternalConfig=$R;var Tt={},NR=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Zi=f&&f.__assign||function(){return Zi=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Zi.apply(this,arguments)},kR=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),MR=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),DR=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&kR(r,e,t);return MR(r,e),r};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.resolveCertificateProvider=Tt.clientCertificateProviders=Tt.RotatingClientCertificateProvider=Tt.ClientCertificateProvider=void 0;var O_=DR(It),LR=function(){function e(){this.certfile="",this.keyfile="",this.password=void 0}return e}();Tt.default=LR;var W0=function(){function e(){}return e.prototype.hasUpdate=function(){throw new Error("Not Implemented")},e.prototype.getClientCertificate=function(){throw new Error("Not Implemented")},e}();Tt.ClientCertificateProvider=W0;var UR=function(e){NR(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.updateCertificate=function(t){throw new Error("Not implemented")},r}(W0);Tt.RotatingClientCertificateProvider=UR;var FR=function(){function e(){}return e.prototype.rotating=function(r){var t=r.initialCertificate;if(t==null||!w_(t))throw new TypeError("initialCertificate should be ClientCertificate, but got ".concat(O_.stringify(t)));var n=Zi({},t);return new VR(n)},e}(),V0=new FR;Tt.clientCertificateProviders=V0;Object.freeze(V0);function BR(e){if(e!=null){if(typeof e=="object"&&"hasUpdate"in e&&"getClientCertificate"in e&&typeof e.getClientCertificate=="function"&&typeof e.hasUpdate=="function")return e;if(w_(e)){var r=Zi({},e);return{getClientCertificate:function(){return r},hasUpdate:function(){return!1}}}throw new TypeError("clientCertificate should be configured with ClientCertificate or ClientCertificateProvider, but got ".concat(O_.stringify(e)))}}Tt.resolveCertificateProvider=BR;function w_(e){return e!=null&&typeof e=="object"&&"certfile"in e&&xR(e.certfile)&&"keyfile"in e&&WR(e.keyfile)&&q0("password",e)}function xR(e){return vy(e)||z0(e,vy)}function WR(e){function r(t){return typeof t=="string"||t!=null&&typeof t=="object"&&"path"in t&&typeof t.path=="string"&&q0("password",t)}return r(e)||z0(e,r)}function vy(e){return typeof e=="string"}function z0(e,r,t){return t===void 0&&(t=!1),Array.isArray(e)&&(t||e.length>0)&&e.filter(r).length===e.length}function q0(e,r){return!(e in r)||r[e]==null||typeof r[e]=="string"}var VR=function(){function e(r,t){t===void 0&&(t=!1),this._certificate=r,this._updated=t}return e.prototype.hasUpdate=function(){try{return this._updated}finally{this._updated=!1}},e.prototype.getClientCertificate=function(){return this._certificate},e.prototype.updateCertificate=function(r){if(!w_(r))throw new TypeError("certificate should be ClientCertificate, but got ".concat(O_.stringify(r)));this._certificate=Zi({},r),this._updated=!0},e}();(function(e){var r=f&&f.__createBinding||(Object.create?function(z,N,J,fe){fe===void 0&&(fe=J);var Se=Object.getOwnPropertyDescriptor(N,J);(!Se||("get"in Se?!N.__esModule:Se.writable||Se.configurable))&&(Se={enumerable:!0,get:function(){return N[J]}}),Object.defineProperty(z,fe,Se)}:function(z,N,J,fe){fe===void 0&&(fe=J),z[fe]=N[J]}),t=f&&f.__setModuleDefault||(Object.create?function(z,N){Object.defineProperty(z,"default",{enumerable:!0,value:N})}:function(z,N){z.default=N}),n=f&&f.__importStar||function(z){if(z&&z.__esModule)return z;var N={};if(z!=null)for(var J in z)J!=="default"&&Object.prototype.hasOwnProperty.call(z,J)&&r(N,z,J);return t(N,z),N},o=f&&f.__importDefault||function(z){return z&&z.__esModule?z:{default:z}};Object.defineProperty(e,"__esModule",{value:!0}),e.EagerResult=e.Result=e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.GqlStatusObject=e.Notification=e.ServerInfo=e.queryType=e.ResultSummary=e.Record=e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=e.Time=e.LocalTime=e.LocalDateTime=e.isTime=e.isLocalTime=e.isLocalDateTime=e.isDuration=e.isDateTime=e.isDate=e.Duration=e.DateTime=e.Date=e.Point=e.isPoint=e.internal=e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=e.Integer=e.error=e.isRetriableError=e.GQLError=e.newGQLError=e.Neo4jError=e.newError=e.authTokenManagers=void 0,e.resolveCertificateProvider=e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.routing=e.staticAuthTokenManager=e.bookmarkManager=e.auth=e.json=e.driver=e.types=e.Driver=e.Session=e.TransactionPromise=e.ManagedTransaction=e.Transaction=e.Connection=e.Releasable=e.ConnectionProvider=void 0;var i=oe;Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return i.newError}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return i.Neo4jError}}),Object.defineProperty(e,"newGQLError",{enumerable:!0,get:function(){return i.newGQLError}}),Object.defineProperty(e,"GQLError",{enumerable:!0,get:function(){return i.GQLError}}),Object.defineProperty(e,"isRetriableError",{enumerable:!0,get:function(){return i.isRetriableError}});var a=n(Le);e.Integer=a.default,Object.defineProperty(e,"int",{enumerable:!0,get:function(){return a.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return a.isInt}}),Object.defineProperty(e,"inSafeRange",{enumerable:!0,get:function(){return a.inSafeRange}}),Object.defineProperty(e,"toNumber",{enumerable:!0,get:function(){return a.toNumber}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return a.toString}});var s=le;Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return s.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return s.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return s.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return s.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return s.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return s.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return s.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return s.isLocalTime}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return s.isTime}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return s.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return s.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return s.Time}});var c=be;Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return c.Node}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return c.isNode}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return c.Relationship}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return c.isRelationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return c.UnboundRelationship}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return c.isUnboundRelationship}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return c.Path}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return c.isPath}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return c.PathSegment}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return c.isPathSegment}});var u=o(f_);e.Record=u.default;var l=vo;Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return l.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return l.Point}});var d=n(He);e.ResultSummary=d.default,Object.defineProperty(e,"queryType",{enumerable:!0,get:function(){return d.queryType}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return d.ServerInfo}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return d.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return d.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return d.QueryStatistics}}),Object.defineProperty(e,"Stats",{enumerable:!0,get:function(){return d.Stats}});var h=n(me);e.Notification=h.default,Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return h.GqlStatusObject}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return h.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return h.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return h.notificationSeverityLevel}});var v=rr;Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return v.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return v.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return v.notificationFilterMinimumSeverityLevel}});var _=o(sa);e.Result=_.default;var y=o(Uc);e.EagerResult=y.default;var p=n(ca);e.ConnectionProvider=p.default,Object.defineProperty(e,"Releasable",{enumerable:!0,get:function(){return p.Releasable}});var b=o(p_);e.Connection=b.default;var g=o(Fc);e.Transaction=g.default;var w=o(Bc);e.ManagedTransaction=w.default;var E=o(xc);e.TransactionPromise=E.default;var S=o(Wc);e.Session=S.default;var T=n(Ge),P=T;e.Driver=T.default,e.driver=P;var I=o(Hc);e.auth=I.default;var k=$o;Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return k.bookmarkManager}});var D=nr;Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return D.authTokenManagers}}),Object.defineProperty(e,"staticAuthTokenManager",{enumerable:!0,get:function(){return D.staticAuthTokenManager}});var K=Ge;Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return K.routing}});var V=n(po);e.types=V;var H=n(It);e.json=H;var ue=o(Vc);e.resultTransformers=ue.default;var B=Tt;Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return B.clientCertificateProviders}}),Object.defineProperty(e,"resolveCertificateProvider",{enumerable:!0,get:function(){return B.resolveCertificateProvider}});var re=n(ee);e.internal=re;var x={SERVICE_UNAVAILABLE:i.SERVICE_UNAVAILABLE,SESSION_EXPIRED:i.SESSION_EXPIRED,PROTOCOL_ERROR:i.PROTOCOL_ERROR};e.error=x;var X={authTokenManagers:D.authTokenManagers,newError:i.newError,Neo4jError:i.Neo4jError,newGQLError:i.newGQLError,GQLError:i.GQLError,isRetriableError:i.isRetriableError,error:x,Integer:a.default,int:a.int,isInt:a.isInt,inSafeRange:a.inSafeRange,toNumber:a.toNumber,toString:a.toString,internal:re,isPoint:l.isPoint,Point:l.Point,Date:s.Date,DateTime:s.DateTime,Duration:s.Duration,isDate:s.isDate,isDateTime:s.isDateTime,isDuration:s.isDuration,isLocalDateTime:s.isLocalDateTime,isLocalTime:s.isLocalTime,isTime:s.isTime,LocalDateTime:s.LocalDateTime,LocalTime:s.LocalTime,Time:s.Time,Node:c.Node,isNode:c.isNode,Relationship:c.Relationship,isRelationship:c.isRelationship,UnboundRelationship:c.UnboundRelationship,isUnboundRelationship:c.isUnboundRelationship,Path:c.Path,isPath:c.isPath,PathSegment:c.PathSegment,isPathSegment:c.isPathSegment,Record:u.default,ResultSummary:d.default,queryType:d.queryType,ServerInfo:d.ServerInfo,Notification:h.default,GqlStatusObject:h.GqlStatusObject,Plan:d.Plan,ProfiledPlan:d.ProfiledPlan,QueryStatistics:d.QueryStatistics,Stats:d.Stats,Result:_.default,EagerResult:y.default,Transaction:g.default,ManagedTransaction:w.default,TransactionPromise:E.default,Session:S.default,Driver:T.default,Connection:b.default,Releasable:p.Releasable,types:V,driver:P,json:H,auth:I.default,bookmarkManager:k.bookmarkManager,routing:K.routing,resultTransformers:ue.default,notificationCategory:h.notificationCategory,notificationClassification:h.notificationClassification,notificationSeverityLevel:h.notificationSeverityLevel,notificationFilterDisabledCategory:v.notificationFilterDisabledCategory,notificationFilterDisabledClassification:v.notificationFilterDisabledClassification,notificationFilterMinimumSeverityLevel:v.notificationFilterMinimumSeverityLevel,clientCertificateProviders:B.clientCertificateProviders,resolveCertificateProvider:B.resolveCertificateProvider};e.default=X})(W);var Gc={},da={},ae={},No={},ie={};Object.defineProperty(ie,"__esModule",{value:!0});ie.isFunction=void 0;function zR(e){return typeof e=="function"}ie.isFunction=zR;var Ie={},ha={},zt={};Object.defineProperty(zt,"__esModule",{value:!0});zt.createErrorClass=void 0;function qR(e){var r=function(n){Error.call(n),n.stack=new Error().stack},t=e(r);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}zt.createErrorClass=qR;Object.defineProperty(ha,"__esModule",{value:!0});ha.UnsubscriptionError=void 0;var HR=zt;ha.UnsubscriptionError=HR.createErrorClass(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,o){return o+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});var Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.arrRemove=void 0;function GR(e,r){if(e){var t=e.indexOf(r);0<=t&&e.splice(t,1)}}Rt.arrRemove=GR;var _y=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},py=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},yy=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.isSubscription=Ie.EMPTY_SUBSCRIPTION=Ie.Subscription=void 0;var Wi=ie,lh=ha,by=Rt,E_=function(){function e(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var r,t,n,o,i;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var s=_y(a),c=s.next();!c.done;c=s.next()){var u=c.value;u.remove(this)}}catch(y){r={error:y}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(r)throw r.error}}else a.remove(this);var l=this.initialTeardown;if(Wi.isFunction(l))try{l()}catch(y){i=y instanceof lh.UnsubscriptionError?y.errors:[y]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var h=_y(d),v=h.next();!v.done;v=h.next()){var _=v.value;try{my(_)}catch(y){i=i??[],y instanceof lh.UnsubscriptionError?i=yy(yy([],py(i)),py(y.errors)):i.push(y)}}}catch(y){n={error:y}}finally{try{v&&!v.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}}if(i)throw new lh.UnsubscriptionError(i)}},e.prototype.add=function(r){var t;if(r&&r!==this)if(this.closed)my(r);else{if(r instanceof e){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(r)}},e.prototype._hasParent=function(r){var t=this._parentage;return t===r||Array.isArray(t)&&t.includes(r)},e.prototype._addParent=function(r){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(r),t):t?[t,r]:r},e.prototype._removeParent=function(r){var t=this._parentage;t===r?this._parentage=null:Array.isArray(t)&&by.arrRemove(t,r)},e.prototype.remove=function(r){var t=this._finalizers;t&&by.arrRemove(t,r),r instanceof e&&r._removeParent(this)},e.EMPTY=function(){var r=new e;return r.closed=!0,r}(),e}();Ie.Subscription=E_;Ie.EMPTY_SUBSCRIPTION=E_.EMPTY;function KR(e){return e instanceof E_||e&&"closed"in e&&Wi.isFunction(e.remove)&&Wi.isFunction(e.add)&&Wi.isFunction(e.unsubscribe)}Ie.isSubscription=KR;function my(e){Wi.isFunction(e)?e():e.unsubscribe()}var Fr={};Object.defineProperty(Fr,"__esModule",{value:!0});Fr.config=void 0;Fr.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var va={},S_={};(function(e){var r=f&&f.__read||function(n,o){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var a=i.call(n),s,c=[],u;try{for(;(o===void 0||o-- >0)&&!(s=a.next()).done;)c.push(s.value)}catch(l){u={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(u)throw u.error}}return c},t=f&&f.__spreadArray||function(n,o){for(var i=0,a=o.length,s=n.length;i<a;i++,s++)n[s]=o[i];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutProvider=void 0,e.timeoutProvider={setTimeout:function(n,o){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=e.timeoutProvider.delegate;return s!=null&&s.setTimeout?s.setTimeout.apply(s,t([n,o],r(i))):setTimeout.apply(void 0,t([n,o],r(i)))},clearTimeout:function(n){var o=e.timeoutProvider.delegate;return((o==null?void 0:o.clearTimeout)||clearTimeout)(n)},delegate:void 0}})(S_);Object.defineProperty(va,"__esModule",{value:!0});va.reportUnhandledError=void 0;var YR=Fr,ZR=S_;function QR(e){ZR.timeoutProvider.setTimeout(function(){var r=YR.config.onUnhandledError;if(r)r(e);else throw e})}va.reportUnhandledError=QR;var Re={};Object.defineProperty(Re,"__esModule",{value:!0});Re.noop=void 0;function XR(){}Re.noop=XR;var xt={};Object.defineProperty(xt,"__esModule",{value:!0});xt.createNotification=xt.nextNotification=xt.errorNotification=xt.COMPLETE_NOTIFICATION=void 0;xt.COMPLETE_NOTIFICATION=function(){return Kc("C",void 0,void 0)}();function JR(e){return Kc("E",void 0,e)}xt.errorNotification=JR;function ej(e){return Kc("N",e,void 0)}xt.nextNotification=ej;function Kc(e,r,t){return{kind:e,value:r,error:t}}xt.createNotification=Kc;var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});Tr.captureError=Tr.errorContext=void 0;var H0=Fr,pn=null;function tj(e){if(H0.config.useDeprecatedSynchronousErrorHandling){var r=!pn;if(r&&(pn={errorThrown:!1,error:null}),e(),r){var t=pn,n=t.errorThrown,o=t.error;if(pn=null,n)throw o}}else e()}Tr.errorContext=tj;function rj(e){H0.config.useDeprecatedSynchronousErrorHandling&&pn&&(pn.errorThrown=!0,pn.error=e)}Tr.captureError=rj;(function(e){var r=f&&f.__extends||function(){var g=function(w,E){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,T){S.__proto__=T}||function(S,T){for(var P in T)Object.prototype.hasOwnProperty.call(T,P)&&(S[P]=T[P])},g(w,E)};return function(w,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");g(w,E);function S(){this.constructor=w}w.prototype=E===null?Object.create(E):(S.prototype=E.prototype,new S)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_OBSERVER=e.SafeSubscriber=e.Subscriber=void 0;var t=ie,n=Ie,o=Fr,i=va,a=Re,s=xt,c=S_,u=Tr,l=function(g){r(w,g);function w(E){var S=g.call(this)||this;return S.isStopped=!1,E?(S.destination=E,n.isSubscription(E)&&E.add(S)):S.destination=e.EMPTY_OBSERVER,S}return w.create=function(E,S,T){return new _(E,S,T)},w.prototype.next=function(E){this.isStopped?b(s.nextNotification(E),this):this._next(E)},w.prototype.error=function(E){this.isStopped?b(s.errorNotification(E),this):(this.isStopped=!0,this._error(E))},w.prototype.complete=function(){this.isStopped?b(s.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},w.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,g.prototype.unsubscribe.call(this),this.destination=null)},w.prototype._next=function(E){this.destination.next(E)},w.prototype._error=function(E){try{this.destination.error(E)}finally{this.unsubscribe()}},w.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},w}(n.Subscription);e.Subscriber=l;var d=Function.prototype.bind;function h(g,w){return d.call(g,w)}var v=function(){function g(w){this.partialObserver=w}return g.prototype.next=function(w){var E=this.partialObserver;if(E.next)try{E.next(w)}catch(S){y(S)}},g.prototype.error=function(w){var E=this.partialObserver;if(E.error)try{E.error(w)}catch(S){y(S)}else y(w)},g.prototype.complete=function(){var w=this.partialObserver;if(w.complete)try{w.complete()}catch(E){y(E)}},g}(),_=function(g){r(w,g);function w(E,S,T){var P=g.call(this)||this,I;if(t.isFunction(E)||!E)I={next:E??void 0,error:S??void 0,complete:T??void 0};else{var k;P&&o.config.useDeprecatedNextContext?(k=Object.create(E),k.unsubscribe=function(){return P.unsubscribe()},I={next:E.next&&h(E.next,k),error:E.error&&h(E.error,k),complete:E.complete&&h(E.complete,k)}):I=E}return P.destination=new v(I),P}return w}(l);e.SafeSubscriber=_;function y(g){o.config.useDeprecatedSynchronousErrorHandling?u.captureError(g):i.reportUnhandledError(g)}function p(g){throw g}function b(g,w){var E=o.config.onStoppedNotification;E&&c.timeoutProvider.setTimeout(function(){return E(g,w)})}e.EMPTY_OBSERVER={closed:!0,next:a.noop,error:p,complete:a.noop}})(No);var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.observable=void 0;Mn.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();var ar={},je={};Object.defineProperty(je,"__esModule",{value:!0});je.identity=void 0;function nj(e){return e}je.identity=nj;Object.defineProperty(ar,"__esModule",{value:!0});ar.pipeFromArray=ar.pipe=void 0;var oj=je;function ij(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return G0(e)}ar.pipe=ij;function G0(e){return e.length===0?oj.identity:e.length===1?e[0]:function(t){return e.reduce(function(n,o){return o(n)},t)}}ar.pipeFromArray=G0;Object.defineProperty(ae,"__esModule",{value:!0});ae.Observable=void 0;var pv=No,aj=Ie,uj=Mn,sj=ar,cj=Fr,fh=ie,lj=Tr,fj=function(){function e(r){r&&(this._subscribe=r)}return e.prototype.lift=function(r){var t=new e;return t.source=this,t.operator=r,t},e.prototype.subscribe=function(r,t,n){var o=this,i=hj(r)?r:new pv.SafeSubscriber(r,t,n);return lj.errorContext(function(){var a=o,s=a.operator,c=a.source;i.add(s?s.call(i,c):c?o._subscribe(i):o._trySubscribe(i))}),i},e.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(t){r.error(t)}},e.prototype.forEach=function(r,t){var n=this;return t=gy(t),new t(function(o,i){var a=new pv.SafeSubscriber({next:function(s){try{r(s)}catch(c){i(c),a.unsubscribe()}},error:i,complete:o});n.subscribe(a)})},e.prototype._subscribe=function(r){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(r)},e.prototype[uj.observable]=function(){return this},e.prototype.pipe=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return sj.pipeFromArray(r)(this)},e.prototype.toPromise=function(r){var t=this;return r=gy(r),new r(function(n,o){var i;t.subscribe(function(a){return i=a},function(a){return o(a)},function(){return n(i)})})},e.create=function(r){return new e(r)},e}();ae.Observable=fj;function gy(e){var r;return(r=e??cj.config.Promise)!==null&&r!==void 0?r:Promise}function dj(e){return e&&fh.isFunction(e.next)&&fh.isFunction(e.error)&&fh.isFunction(e.complete)}function hj(e){return e&&e instanceof pv.Subscriber||dj(e)&&aj.isSubscription(e)}var Dn={},ko={},R={};Object.defineProperty(R,"__esModule",{value:!0});R.operate=R.hasLift=void 0;var vj=ie;function K0(e){return vj.isFunction(e==null?void 0:e.lift)}R.hasLift=K0;function _j(e){return function(r){if(K0(r))return r.lift(function(t){try{return e(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}R.operate=_j;var $={},pj=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty($,"__esModule",{value:!0});$.OperatorSubscriber=$.createOperatorSubscriber=void 0;var yj=No;function bj(e,r,t,n,o){return new Y0(e,r,t,n,o)}$.createOperatorSubscriber=bj;var Y0=function(e){pj(r,e);function r(t,n,o,i,a,s){var c=e.call(this,t)||this;return c.onFinalize=a,c.shouldUnsubscribe=s,c._next=n?function(u){try{n(u)}catch(l){t.error(l)}}:e.prototype._next,c._error=i?function(u){try{i(u)}catch(l){t.error(l)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=o?function(){try{o()}catch(u){t.error(u)}finally{this.unsubscribe()}}:e.prototype._complete,c}return r.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},r}(yj.Subscriber);$.OperatorSubscriber=Y0;Object.defineProperty(ko,"__esModule",{value:!0});ko.refCount=void 0;var mj=R,gj=$;function Oj(){return mj.operate(function(e,r){var t=null;e._refCount++;var n=gj.createOperatorSubscriber(r,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount){t=null;return}var o=e._connection,i=t;t=null,o&&(!i||o===i)&&o.unsubscribe(),r.unsubscribe()});e.subscribe(n),n.closed||(t=e.connect())})}ko.refCount=Oj;var wj=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Dn,"__esModule",{value:!0});Dn.ConnectableObservable=void 0;var Ej=ae,Oy=Ie,Sj=ko,Pj=$,Tj=R,Cj=function(e){wj(r,e);function r(t,n){var o=e.call(this)||this;return o.source=t,o.subjectFactory=n,o._subject=null,o._refCount=0,o._connection=null,Tj.hasLift(t)&&(o.lift=t.lift),o}return r.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},r.prototype.getSubject=function(){var t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject},r.prototype._teardown=function(){this._refCount=0;var t=this._connection;this._subject=this._connection=null,t==null||t.unsubscribe()},r.prototype.connect=function(){var t=this,n=this._connection;if(!n){n=this._connection=new Oy.Subscription;var o=this.getSubject();n.add(this.source.subscribe(Pj.createOperatorSubscriber(o,void 0,function(){t._teardown(),o.complete()},function(i){t._teardown(),o.error(i)},function(){return t._teardown()}))),n.closed&&(this._connection=null,n=Oy.Subscription.EMPTY)}return n},r.prototype.refCount=function(){return Sj.refCount()(this)},r}(Ej.Observable);Dn.ConnectableObservable=Cj;var Yc={},Z0={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.performanceTimestampProvider=void 0,e.performanceTimestampProvider={now:function(){return(e.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}})(Z0);var P_={};(function(e){var r=f&&f.__read||function(o,i){var a=typeof Symbol=="function"&&o[Symbol.iterator];if(!a)return o;var s=a.call(o),c,u=[],l;try{for(;(i===void 0||i-- >0)&&!(c=s.next()).done;)u.push(c.value)}catch(d){l={error:d}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(l)throw l.error}}return u},t=f&&f.__spreadArray||function(o,i){for(var a=0,s=i.length,c=o.length;a<s;a++,c++)o[c]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrameProvider=void 0;var n=Ie;e.animationFrameProvider={schedule:function(o){var i=requestAnimationFrame,a=cancelAnimationFrame,s=e.animationFrameProvider.delegate;s&&(i=s.requestAnimationFrame,a=s.cancelAnimationFrame);var c=i(function(u){a=void 0,o(u)});return new n.Subscription(function(){return a==null?void 0:a(c)})},requestAnimationFrame:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=e.animationFrameProvider.delegate;return((a==null?void 0:a.requestAnimationFrame)||requestAnimationFrame).apply(void 0,t([],r(o)))},cancelAnimationFrame:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=e.animationFrameProvider.delegate;return((a==null?void 0:a.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,t([],r(o)))},delegate:void 0}})(P_);Object.defineProperty(Yc,"__esModule",{value:!0});Yc.animationFrames=void 0;var Aj=ae,Ij=Z0,wy=P_;function Rj(e){return e?Q0(e):jj}Yc.animationFrames=Rj;function Q0(e){return new Aj.Observable(function(r){var t=e||Ij.performanceTimestampProvider,n=t.now(),o=0,i=function(){r.closed||(o=wy.animationFrameProvider.requestAnimationFrame(function(a){o=0;var s=t.now();r.next({timestamp:e?s:a,elapsed:s-n}),i()}))};return i(),function(){o&&wy.animationFrameProvider.cancelAnimationFrame(o)}})}var jj=Q0(),Ee={},_a={};Object.defineProperty(_a,"__esModule",{value:!0});_a.ObjectUnsubscribedError=void 0;var $j=zt;_a.ObjectUnsubscribedError=$j.createErrorClass(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var X0=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Nj=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.AnonymousSubject=Ee.Subject=void 0;var Ey=ae,yv=Ie,kj=_a,Mj=Rt,dh=Tr,J0=function(e){X0(r,e);function r(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r.prototype.lift=function(t){var n=new bv(this,this);return n.operator=t,n},r.prototype._throwIfClosed=function(){if(this.closed)throw new kj.ObjectUnsubscribedError},r.prototype.next=function(t){var n=this;dh.errorContext(function(){var o,i;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var a=Nj(n.currentObservers),s=a.next();!s.done;s=a.next()){var c=s.value;c.next(t)}}catch(u){o={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}}})},r.prototype.error=function(t){var n=this;dh.errorContext(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=t;for(var o=n.observers;o.length;)o.shift().error(t)}})},r.prototype.complete=function(){var t=this;dh.errorContext(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var n=t.observers;n.length;)n.shift().complete()}})},r.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(r.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),r.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},r.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},r.prototype._innerSubscribe=function(t){var n=this,o=this,i=o.hasError,a=o.isStopped,s=o.observers;return i||a?yv.EMPTY_SUBSCRIPTION:(this.currentObservers=null,s.push(t),new yv.Subscription(function(){n.currentObservers=null,Mj.arrRemove(s,t)}))},r.prototype._checkFinalizedStatuses=function(t){var n=this,o=n.hasError,i=n.thrownError,a=n.isStopped;o?t.error(i):a&&t.complete()},r.prototype.asObservable=function(){var t=new Ey.Observable;return t.source=this,t},r.create=function(t,n){return new bv(t,n)},r}(Ey.Observable);Ee.Subject=J0;var bv=function(e){X0(r,e);function r(t,n){var o=e.call(this)||this;return o.destination=t,o.source=n,o}return r.prototype.next=function(t){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.next)===null||o===void 0||o.call(n,t)},r.prototype.error=function(t){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.error)===null||o===void 0||o.call(n,t)},r.prototype.complete=function(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)},r.prototype._subscribe=function(t){var n,o;return(o=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&o!==void 0?o:yv.EMPTY_SUBSCRIPTION},r}(J0);Ee.AnonymousSubject=bv;var pa={},Dj=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(pa,"__esModule",{value:!0});pa.BehaviorSubject=void 0;var Lj=Ee,Uj=function(e){Dj(r,e);function r(t){var n=e.call(this)||this;return n._value=t,n}return Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),r.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},r.prototype.getValue=function(){var t=this,n=t.hasError,o=t.thrownError,i=t._value;if(n)throw o;return this._throwIfClosed(),i},r.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},r}(Lj.Subject);pa.BehaviorSubject=Uj;var Mo={},Zc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.dateTimestampProvider=void 0,e.dateTimestampProvider={now:function(){return(e.dateTimestampProvider.delegate||Date).now()},delegate:void 0}})(Zc);var Fj=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Mo,"__esModule",{value:!0});Mo.ReplaySubject=void 0;var Bj=Ee,xj=Zc,Wj=function(e){Fj(r,e);function r(t,n,o){t===void 0&&(t=1/0),n===void 0&&(n=1/0),o===void 0&&(o=xj.dateTimestampProvider);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=n,i._timestampProvider=o,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,n),i}return r.prototype.next=function(t){var n=this,o=n.isStopped,i=n._buffer,a=n._infiniteTimeWindow,s=n._timestampProvider,c=n._windowTime;o||(i.push(t),!a&&i.push(s.now()+c)),this._trimBuffer(),e.prototype.next.call(this,t)},r.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(t),o=this,i=o._infiniteTimeWindow,a=o._buffer,s=a.slice(),c=0;c<s.length&&!t.closed;c+=i?1:2)t.next(s[c]);return this._checkFinalizedStatuses(t),n},r.prototype._trimBuffer=function(){var t=this,n=t._bufferSize,o=t._timestampProvider,i=t._buffer,a=t._infiniteTimeWindow,s=(a?1:2)*n;if(n<1/0&&s<i.length&&i.splice(0,i.length-s),!a){for(var c=o.now(),u=0,l=1;l<i.length&&i[l]<=c;l+=2)u=l;u&&i.splice(0,u+1)}},r}(Bj.Subject);Mo.ReplaySubject=Wj;var Do={},Vj=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Do,"__esModule",{value:!0});Do.AsyncSubject=void 0;var zj=Ee,qj=function(e){Vj(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t._value=null,t._hasValue=!1,t._isComplete=!1,t}return r.prototype._checkFinalizedStatuses=function(t){var n=this,o=n.hasError,i=n._hasValue,a=n._value,s=n.thrownError,c=n.isStopped,u=n._isComplete;o?t.error(s):(c||u)&&(i&&t.next(a),t.complete())},r.prototype.next=function(t){this.isStopped||(this._value=t,this._hasValue=!0)},r.prototype.complete=function(){var t=this,n=t._hasValue,o=t._value,i=t._isComplete;i||(this._isComplete=!0,n&&e.prototype.next.call(this,o),e.prototype.complete.call(this))},r}(zj.Subject);Do.AsyncSubject=qj;var eO={},Qc={},Br={},Xc={},Hj=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Xc,"__esModule",{value:!0});Xc.Action=void 0;var Gj=Ie,Kj=function(e){Hj(r,e);function r(t,n){return e.call(this)||this}return r.prototype.schedule=function(t,n){return this},r}(Gj.Subscription);Xc.Action=Kj;var tO={};(function(e){var r=f&&f.__read||function(n,o){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var a=i.call(n),s,c=[],u;try{for(;(o===void 0||o-- >0)&&!(s=a.next()).done;)c.push(s.value)}catch(l){u={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(u)throw u.error}}return c},t=f&&f.__spreadArray||function(n,o){for(var i=0,a=o.length,s=n.length;i<a;i++,s++)n[s]=o[i];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.intervalProvider=void 0,e.intervalProvider={setInterval:function(n,o){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=e.intervalProvider.delegate;return s!=null&&s.setInterval?s.setInterval.apply(s,t([n,o],r(i))):setInterval.apply(void 0,t([n,o],r(i)))},clearInterval:function(n){var o=e.intervalProvider.delegate;return((o==null?void 0:o.clearInterval)||clearInterval)(n)},delegate:void 0}})(tO);var Yj=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Br,"__esModule",{value:!0});Br.AsyncAction=void 0;var Zj=Xc,Sy=tO,Qj=Rt,Xj=function(e){Yj(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o.pending=!1,o}return r.prototype.schedule=function(t,n){var o;if(n===void 0&&(n=0),this.closed)return this;this.state=t;var i=this.id,a=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(a,i,n)),this.pending=!0,this.delay=n,this.id=(o=this.id)!==null&&o!==void 0?o:this.requestAsyncId(a,this.id,n),this},r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),Sy.intervalProvider.setInterval(t.flush.bind(t,this),o)},r.prototype.recycleAsyncId=function(t,n,o){if(o===void 0&&(o=0),o!=null&&this.delay===o&&this.pending===!1)return n;n!=null&&Sy.intervalProvider.clearInterval(n)},r.prototype.execute=function(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var o=this._execute(t,n);if(o)return o;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(t,n){var o=!1,i;try{this.work(t)}catch(a){o=!0,i=a||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),i},r.prototype.unsubscribe=function(){if(!this.closed){var t=this,n=t.id,o=t.scheduler,i=o.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Qj.arrRemove(i,this),n!=null&&(this.id=this.recycleAsyncId(o,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},r}(Zj.Action);Br.AsyncAction=Xj;var rO={},yo={};Object.defineProperty(yo,"__esModule",{value:!0});yo.TestTools=yo.Immediate=void 0;var Jj=1,hh,sc={};function Py(e){return e in sc?(delete sc[e],!0):!1}yo.Immediate={setImmediate:function(e){var r=Jj++;return sc[r]=!0,hh||(hh=Promise.resolve()),hh.then(function(){return Py(r)&&e()}),r},clearImmediate:function(e){Py(e)}};yo.TestTools={pending:function(){return Object.keys(sc).length}};(function(e){var r=f&&f.__read||function(a,s){var c=typeof Symbol=="function"&&a[Symbol.iterator];if(!c)return a;var u=c.call(a),l,d=[],h;try{for(;(s===void 0||s-- >0)&&!(l=u.next()).done;)d.push(l.value)}catch(v){h={error:v}}finally{try{l&&!l.done&&(c=u.return)&&c.call(u)}finally{if(h)throw h.error}}return d},t=f&&f.__spreadArray||function(a,s){for(var c=0,u=s.length,l=a.length;c<u;c++,l++)a[l]=s[c];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.immediateProvider=void 0;var n=yo,o=n.Immediate.setImmediate,i=n.Immediate.clearImmediate;e.immediateProvider={setImmediate:function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var c=e.immediateProvider.delegate;return((c==null?void 0:c.setImmediate)||o).apply(void 0,t([],r(a)))},clearImmediate:function(a){var s=e.immediateProvider.delegate;return((s==null?void 0:s.clearImmediate)||i)(a)},delegate:void 0}})(rO);var e$=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Qc,"__esModule",{value:!0});Qc.AsapAction=void 0;var t$=Br,Ty=rO,r$=function(e){e$(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o}return r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),o!==null&&o>0?e.prototype.requestAsyncId.call(this,t,n,o):(t.actions.push(this),t._scheduled||(t._scheduled=Ty.immediateProvider.setImmediate(t.flush.bind(t,void 0))))},r.prototype.recycleAsyncId=function(t,n,o){var i;if(o===void 0&&(o=0),o!=null?o>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,o);var a=t.actions;n!=null&&((i=a[a.length-1])===null||i===void 0?void 0:i.id)!==n&&(Ty.immediateProvider.clearImmediate(n),t._scheduled===n&&(t._scheduled=void 0))},r}(t$.AsyncAction);Qc.AsapAction=r$;var Jc={},xr={},ya={};Object.defineProperty(ya,"__esModule",{value:!0});ya.Scheduler=void 0;var n$=Zc,o$=function(){function e(r,t){t===void 0&&(t=e.now),this.schedulerActionCtor=r,this.now=t}return e.prototype.schedule=function(r,t,n){return t===void 0&&(t=0),new this.schedulerActionCtor(this,r).schedule(n,t)},e.now=n$.dateTimestampProvider.now,e}();ya.Scheduler=o$;var i$=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(xr,"__esModule",{value:!0});xr.AsyncScheduler=void 0;var Cy=ya,a$=function(e){i$(r,e);function r(t,n){n===void 0&&(n=Cy.Scheduler.now);var o=e.call(this,t,n)||this;return o.actions=[],o._active=!1,o}return r.prototype.flush=function(t){var n=this.actions;if(this._active){n.push(t);return}var o;this._active=!0;do if(o=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,o){for(;t=n.shift();)t.unsubscribe();throw o}},r}(Cy.Scheduler);xr.AsyncScheduler=a$;var u$=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Jc,"__esModule",{value:!0});Jc.AsapScheduler=void 0;var s$=xr,c$=function(e){u$(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.flush=function(t){this._active=!0;var n=this._scheduled;this._scheduled=void 0;var o=this.actions,i;t=t||o.shift();do if(i=t.execute(t.state,t.delay))break;while((t=o[0])&&t.id===n&&o.shift());if(this._active=!1,i){for(;(t=o[0])&&t.id===n&&o.shift();)t.unsubscribe();throw i}},r}(s$.AsyncScheduler);Jc.AsapScheduler=c$;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.asap=e.asapScheduler=void 0;var r=Qc,t=Jc;e.asapScheduler=new t.AsapScheduler(r.AsapAction),e.asap=e.asapScheduler})(eO);var nt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.async=e.asyncScheduler=void 0;var r=Br,t=xr;e.asyncScheduler=new t.AsyncScheduler(r.AsyncAction),e.async=e.asyncScheduler})(nt);var nO={},el={},l$=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(el,"__esModule",{value:!0});el.QueueAction=void 0;var f$=Br,d$=function(e){l$(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o}return r.prototype.schedule=function(t,n){return n===void 0&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},r.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),o!=null&&o>0||o==null&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,o):(t.flush(this),0)},r}(f$.AsyncAction);el.QueueAction=d$;var tl={},h$=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(tl,"__esModule",{value:!0});tl.QueueScheduler=void 0;var v$=xr,_$=function(e){h$(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(v$.AsyncScheduler);tl.QueueScheduler=_$;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.queue=e.queueScheduler=void 0;var r=el,t=tl;e.queueScheduler=new t.QueueScheduler(r.QueueAction),e.queue=e.queueScheduler})(nO);var oO={},rl={},p$=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(rl,"__esModule",{value:!0});rl.AnimationFrameAction=void 0;var y$=Br,Ay=P_,b$=function(e){p$(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o}return r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),o!==null&&o>0?e.prototype.requestAsyncId.call(this,t,n,o):(t.actions.push(this),t._scheduled||(t._scheduled=Ay.animationFrameProvider.requestAnimationFrame(function(){return t.flush(void 0)})))},r.prototype.recycleAsyncId=function(t,n,o){var i;if(o===void 0&&(o=0),o!=null?o>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,o);var a=t.actions;n!=null&&n===t._scheduled&&((i=a[a.length-1])===null||i===void 0?void 0:i.id)!==n&&(Ay.animationFrameProvider.cancelAnimationFrame(n),t._scheduled=void 0)},r}(y$.AsyncAction);rl.AnimationFrameAction=b$;var nl={},m$=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(nl,"__esModule",{value:!0});nl.AnimationFrameScheduler=void 0;var g$=xr,O$=function(e){m$(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.flush=function(t){this._active=!0;var n;t?n=t.id:(n=this._scheduled,this._scheduled=void 0);var o=this.actions,i;t=t||o.shift();do if(i=t.execute(t.state,t.delay))break;while((t=o[0])&&t.id===n&&o.shift());if(this._active=!1,i){for(;(t=o[0])&&t.id===n&&o.shift();)t.unsubscribe();throw i}},r}(g$.AsyncScheduler);nl.AnimationFrameScheduler=O$;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrame=e.animationFrameScheduler=void 0;var r=rl,t=nl;e.animationFrameScheduler=new t.AnimationFrameScheduler(r.AnimationFrameAction),e.animationFrame=e.animationFrameScheduler})(oO);var bo={},iO=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(bo,"__esModule",{value:!0});bo.VirtualAction=bo.VirtualTimeScheduler=void 0;var w$=Br,E$=Ie,S$=xr,P$=function(e){iO(r,e);function r(t,n){t===void 0&&(t=aO),n===void 0&&(n=1/0);var o=e.call(this,t,function(){return o.frame})||this;return o.maxFrames=n,o.frame=0,o.index=-1,o}return r.prototype.flush=function(){for(var t=this,n=t.actions,o=t.maxFrames,i,a;(a=n[0])&&a.delay<=o&&(n.shift(),this.frame=a.delay,!(i=a.execute(a.state,a.delay))););if(i){for(;a=n.shift();)a.unsubscribe();throw i}},r.frameTimeFactor=10,r}(S$.AsyncScheduler);bo.VirtualTimeScheduler=P$;var aO=function(e){iO(r,e);function r(t,n,o){o===void 0&&(o=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=o,i.active=!0,i.index=t.index=o,i}return r.prototype.schedule=function(t,n){if(n===void 0&&(n=0),Number.isFinite(n)){if(!this.id)return e.prototype.schedule.call(this,t,n);this.active=!1;var o=new r(this.scheduler,this.work);return this.add(o),o.schedule(t,n)}else return E$.Subscription.EMPTY},r.prototype.requestAsyncId=function(t,n,o){o===void 0&&(o=0),this.delay=t.frame+o;var i=t.actions;return i.push(this),i.sort(r.sortActions),1},r.prototype.recycleAsyncId=function(t,n,o){},r.prototype._execute=function(t,n){if(this.active===!0)return e.prototype._execute.call(this,t,n)},r.sortActions=function(t,n){return t.delay===n.delay?t.index===n.index?0:t.index>n.index?1:-1:t.delay>n.delay?1:-1},r}(w$.AsyncAction);bo.VirtualAction=aO;var ol={},At={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=void 0;var r=ae;e.EMPTY=new r.Observable(function(o){return o.complete()});function t(o){return o?n(o):e.EMPTY}e.empty=t;function n(o){return new r.Observable(function(i){return o.schedule(function(){return i.complete()})})}})(At);var Lo={},Te={},Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.isScheduler=void 0;var T$=ie;function C$(e){return e&&T$.isFunction(e.schedule)}Ln.isScheduler=C$;Object.defineProperty(Te,"__esModule",{value:!0});Te.popNumber=Te.popScheduler=Te.popResultSelector=void 0;var A$=ie,I$=Ln;function T_(e){return e[e.length-1]}function R$(e){return A$.isFunction(T_(e))?e.pop():void 0}Te.popResultSelector=R$;function j$(e){return I$.isScheduler(T_(e))?e.pop():void 0}Te.popScheduler=j$;function $$(e,r){return typeof T_(e)=="number"?e.pop():r}Te.popNumber=$$;var jt={},ba={},il={},M={},Uo={};Object.defineProperty(Uo,"__esModule",{value:!0});Uo.isArrayLike=void 0;Uo.isArrayLike=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};var ma={};Object.defineProperty(ma,"__esModule",{value:!0});ma.isPromise=void 0;var N$=ie;function k$(e){return N$.isFunction(e==null?void 0:e.then)}ma.isPromise=k$;var ga={};Object.defineProperty(ga,"__esModule",{value:!0});ga.isInteropObservable=void 0;var M$=Mn,D$=ie;function L$(e){return D$.isFunction(e[M$.observable])}ga.isInteropObservable=L$;var Oa={};Object.defineProperty(Oa,"__esModule",{value:!0});Oa.isAsyncIterable=void 0;var U$=ie;function F$(e){return Symbol.asyncIterator&&U$.isFunction(e==null?void 0:e[Symbol.asyncIterator])}Oa.isAsyncIterable=F$;var wa={};Object.defineProperty(wa,"__esModule",{value:!0});wa.createInvalidObservableTypeError=void 0;function B$(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}wa.createInvalidObservableTypeError=B$;var Ea={},En={};Object.defineProperty(En,"__esModule",{value:!0});En.iterator=En.getSymbolIterator=void 0;function uO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}En.getSymbolIterator=uO;En.iterator=uO();Object.defineProperty(Ea,"__esModule",{value:!0});Ea.isIterable=void 0;var x$=En,W$=ie;function V$(e){return W$.isFunction(e==null?void 0:e[x$.iterator])}Ea.isIterable=V$;var Cr={},z$=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},so=f&&f.__await||function(e){return this instanceof so?(this.v=e,this):new so(e)},q$=f&&f.__asyncGenerator||function(e,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(e,r||[]),o,i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(h){n[h]&&(o[h]=function(v){return new Promise(function(_,y){i.push([h,v,_,y])>1||s(h,v)})})}function s(h,v){try{c(n[h](v))}catch(_){d(i[0][3],_)}}function c(h){h.value instanceof so?Promise.resolve(h.value.v).then(u,l):d(i[0][2],h)}function u(h){s("next",h)}function l(h){s("throw",h)}function d(h,v){h(v),i.shift(),i.length&&s(i[0][0],i[0][1])}};Object.defineProperty(Cr,"__esModule",{value:!0});Cr.isReadableStreamLike=Cr.readableStreamLikeToAsyncGenerator=void 0;var H$=ie;function G$(e){return q$(this,arguments,function(){var t,n,o,i;return z$(this,function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,so(t.read())];case 3:return n=a.sent(),o=n.value,i=n.done,i?[4,so(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,so(o)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}Cr.readableStreamLikeToAsyncGenerator=G$;function K$(e){return H$.isFunction(e==null?void 0:e.getReader)}Cr.isReadableStreamLike=K$;var Y$=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Z$=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Q$=f&&f.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e[Symbol.asyncIterator],t;return r?r.call(e):(e=typeof mv=="function"?mv(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(a){return new Promise(function(s,c){a=e[i](a),o(s,c,a.done,a.value)})}}function o(i,a,s,c){Promise.resolve(c).then(function(u){i({value:u,done:s})},a)}},mv=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(M,"__esModule",{value:!0});M.fromReadableStreamLike=M.fromAsyncIterable=M.fromIterable=M.fromPromise=M.fromArrayLike=M.fromInteropObservable=M.innerFrom=void 0;var X$=Uo,J$=ma,Fo=ae,eN=ga,tN=Oa,rN=wa,nN=Ea,sO=Cr,oN=ie,iN=va,aN=Mn;function uN(e){if(e instanceof Fo.Observable)return e;if(e!=null){if(eN.isInteropObservable(e))return cO(e);if(X$.isArrayLike(e))return lO(e);if(J$.isPromise(e))return fO(e);if(tN.isAsyncIterable(e))return C_(e);if(nN.isIterable(e))return dO(e);if(sO.isReadableStreamLike(e))return hO(e)}throw rN.createInvalidObservableTypeError(e)}M.innerFrom=uN;function cO(e){return new Fo.Observable(function(r){var t=e[aN.observable]();if(oN.isFunction(t.subscribe))return t.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}M.fromInteropObservable=cO;function lO(e){return new Fo.Observable(function(r){for(var t=0;t<e.length&&!r.closed;t++)r.next(e[t]);r.complete()})}M.fromArrayLike=lO;function fO(e){return new Fo.Observable(function(r){e.then(function(t){r.closed||(r.next(t),r.complete())},function(t){return r.error(t)}).then(null,iN.reportUnhandledError)})}M.fromPromise=fO;function dO(e){return new Fo.Observable(function(r){var t,n;try{for(var o=mv(e),i=o.next();!i.done;i=o.next()){var a=i.value;if(r.next(a),r.closed)return}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}r.complete()})}M.fromIterable=dO;function C_(e){return new Fo.Observable(function(r){sN(e,r).catch(function(t){return r.error(t)})})}M.fromAsyncIterable=C_;function hO(e){return C_(sO.readableStreamLikeToAsyncGenerator(e))}M.fromReadableStreamLike=hO;function sN(e,r){var t,n,o,i;return Y$(this,void 0,void 0,function(){var a,s;return Z$(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),t=Q$(e),c.label=1;case 1:return[4,t.next()];case 2:if(n=c.sent(),!!n.done)return[3,4];if(a=n.value,r.next(a),r.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=c.sent(),o={error:s},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(i=t.return)?[4,i.call(t)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return r.complete(),[2]}})})}var Wr={},$t={};Object.defineProperty($t,"__esModule",{value:!0});$t.executeSchedule=void 0;function cN(e,r,t,n,o){n===void 0&&(n=0),o===void 0&&(o=!1);var i=r.schedule(function(){t(),o?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(i),!o)return i}$t.executeSchedule=cN;Object.defineProperty(Wr,"__esModule",{value:!0});Wr.observeOn=void 0;var vh=$t,lN=R,fN=$;function dN(e,r){return r===void 0&&(r=0),lN.operate(function(t,n){t.subscribe(fN.createOperatorSubscriber(n,function(o){return vh.executeSchedule(n,e,function(){return n.next(o)},r)},function(){return vh.executeSchedule(n,e,function(){return n.complete()},r)},function(o){return vh.executeSchedule(n,e,function(){return n.error(o)},r)}))})}Wr.observeOn=dN;var Vr={};Object.defineProperty(Vr,"__esModule",{value:!0});Vr.subscribeOn=void 0;var hN=R;function vN(e,r){return r===void 0&&(r=0),hN.operate(function(t,n){n.add(e.schedule(function(){return t.subscribe(n)},r))})}Vr.subscribeOn=vN;Object.defineProperty(il,"__esModule",{value:!0});il.scheduleObservable=void 0;var _N=M,pN=Wr,yN=Vr;function bN(e,r){return _N.innerFrom(e).pipe(yN.subscribeOn(r),pN.observeOn(r))}il.scheduleObservable=bN;var al={};Object.defineProperty(al,"__esModule",{value:!0});al.schedulePromise=void 0;var mN=M,gN=Wr,ON=Vr;function wN(e,r){return mN.innerFrom(e).pipe(ON.subscribeOn(r),gN.observeOn(r))}al.schedulePromise=wN;var ul={};Object.defineProperty(ul,"__esModule",{value:!0});ul.scheduleArray=void 0;var EN=ae;function SN(e,r){return new EN.Observable(function(t){var n=0;return r.schedule(function(){n===e.length?t.complete():(t.next(e[n++]),t.closed||this.schedule())})})}ul.scheduleArray=SN;var Sa={};Object.defineProperty(Sa,"__esModule",{value:!0});Sa.scheduleIterable=void 0;var PN=ae,TN=En,CN=ie,Iy=$t;function AN(e,r){return new PN.Observable(function(t){var n;return Iy.executeSchedule(t,r,function(){n=e[TN.iterator](),Iy.executeSchedule(t,r,function(){var o,i,a;try{o=n.next(),i=o.value,a=o.done}catch(s){t.error(s);return}a?t.complete():t.next(i)},0,!0)}),function(){return CN.isFunction(n==null?void 0:n.return)&&n.return()}})}Sa.scheduleIterable=AN;var Pa={};Object.defineProperty(Pa,"__esModule",{value:!0});Pa.scheduleAsyncIterable=void 0;var IN=ae,Ry=$t;function RN(e,r){if(!e)throw new Error("Iterable cannot be null");return new IN.Observable(function(t){Ry.executeSchedule(t,r,function(){var n=e[Symbol.asyncIterator]();Ry.executeSchedule(t,r,function(){n.next().then(function(o){o.done?t.complete():t.next(o.value)})},0,!0)})})}Pa.scheduleAsyncIterable=RN;var sl={};Object.defineProperty(sl,"__esModule",{value:!0});sl.scheduleReadableStreamLike=void 0;var jN=Pa,$N=Cr;function NN(e,r){return jN.scheduleAsyncIterable($N.readableStreamLikeToAsyncGenerator(e),r)}sl.scheduleReadableStreamLike=NN;Object.defineProperty(ba,"__esModule",{value:!0});ba.scheduled=void 0;var kN=il,MN=al,DN=ul,LN=Sa,UN=Pa,FN=ga,BN=ma,xN=Uo,WN=Ea,VN=Oa,zN=wa,qN=Cr,HN=sl;function GN(e,r){if(e!=null){if(FN.isInteropObservable(e))return kN.scheduleObservable(e,r);if(xN.isArrayLike(e))return DN.scheduleArray(e,r);if(BN.isPromise(e))return MN.schedulePromise(e,r);if(VN.isAsyncIterable(e))return UN.scheduleAsyncIterable(e,r);if(WN.isIterable(e))return LN.scheduleIterable(e,r);if(qN.isReadableStreamLike(e))return HN.scheduleReadableStreamLike(e,r)}throw zN.createInvalidObservableTypeError(e)}ba.scheduled=GN;Object.defineProperty(jt,"__esModule",{value:!0});jt.from=void 0;var KN=ba,YN=M;function ZN(e,r){return r?KN.scheduled(e,r):YN.innerFrom(e)}jt.from=ZN;Object.defineProperty(Lo,"__esModule",{value:!0});Lo.of=void 0;var QN=Te,XN=jt;function JN(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=QN.popScheduler(e);return XN.from(e,t)}Lo.of=JN;var Ta={};Object.defineProperty(Ta,"__esModule",{value:!0});Ta.throwError=void 0;var ek=ae,tk=ie;function rk(e,r){var t=tk.isFunction(e)?e:function(){return e},n=function(o){return o.error(t())};return new ek.Observable(r?function(o){return r.schedule(n,0,o)}:n)}Ta.throwError=rk;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.observeNotification=e.Notification=e.NotificationKind=void 0;var r=At,t=Lo,n=Ta,o=ie;(function(s){s.NEXT="N",s.ERROR="E",s.COMPLETE="C"})(e.NotificationKind||(e.NotificationKind={}));var i=function(){function s(c,u,l){this.kind=c,this.value=u,this.error=l,this.hasValue=c==="N"}return s.prototype.observe=function(c){return a(this,c)},s.prototype.do=function(c,u,l){var d=this,h=d.kind,v=d.value,_=d.error;return h==="N"?c==null?void 0:c(v):h==="E"?u==null?void 0:u(_):l==null?void 0:l()},s.prototype.accept=function(c,u,l){var d;return o.isFunction((d=c)===null||d===void 0?void 0:d.next)?this.observe(c):this.do(c,u,l)},s.prototype.toObservable=function(){var c=this,u=c.kind,l=c.value,d=c.error,h=u==="N"?t.of(l):u==="E"?n.throwError(function(){return d}):u==="C"?r.EMPTY:0;if(!h)throw new TypeError("Unexpected notification kind "+u);return h},s.createNext=function(c){return new s("N",c)},s.createError=function(c){return new s("E",void 0,c)},s.createComplete=function(){return s.completeNotification},s.completeNotification=new s("C"),s}();e.Notification=i;function a(s,c){var u,l,d,h=s,v=h.kind,_=h.value,y=h.error;if(typeof v!="string")throw new TypeError('Invalid notification, missing "kind"');v==="N"?(u=c.next)===null||u===void 0||u.call(c,_):v==="E"?(l=c.error)===null||l===void 0||l.call(c,y):(d=c.complete)===null||d===void 0||d.call(c)}e.observeNotification=a})(ol);var cl={};Object.defineProperty(cl,"__esModule",{value:!0});cl.isObservable=void 0;var nk=ae,jy=ie;function ok(e){return!!e&&(e instanceof nk.Observable||jy.isFunction(e.lift)&&jy.isFunction(e.subscribe))}cl.isObservable=ok;var ll={},qt={};Object.defineProperty(qt,"__esModule",{value:!0});qt.EmptyError=void 0;var ik=zt;qt.EmptyError=ik.createErrorClass(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});Object.defineProperty(ll,"__esModule",{value:!0});ll.lastValueFrom=void 0;var ak=qt;function uk(e,r){var t=typeof r=="object";return new Promise(function(n,o){var i=!1,a;e.subscribe({next:function(s){a=s,i=!0},error:o,complete:function(){i?n(a):t?n(r.defaultValue):o(new ak.EmptyError)}})})}ll.lastValueFrom=uk;var fl={};Object.defineProperty(fl,"__esModule",{value:!0});fl.firstValueFrom=void 0;var sk=qt,ck=No;function lk(e,r){var t=typeof r=="object";return new Promise(function(n,o){var i=new ck.SafeSubscriber({next:function(a){n(a),i.unsubscribe()},error:o,complete:function(){t?n(r.defaultValue):o(new sk.EmptyError)}});e.subscribe(i)})}fl.firstValueFrom=lk;var Ca={};Object.defineProperty(Ca,"__esModule",{value:!0});Ca.ArgumentOutOfRangeError=void 0;var fk=zt;Ca.ArgumentOutOfRangeError=fk.createErrorClass(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}});var Aa={};Object.defineProperty(Aa,"__esModule",{value:!0});Aa.NotFoundError=void 0;var dk=zt;Aa.NotFoundError=dk.createErrorClass(function(e){return function(t){e(this),this.name="NotFoundError",this.message=t}});var Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});Ia.SequenceError=void 0;var hk=zt;Ia.SequenceError=hk.createErrorClass(function(e){return function(t){e(this),this.name="SequenceError",this.message=t}});var Qi={},Bo={};Object.defineProperty(Bo,"__esModule",{value:!0});Bo.isValidDate=void 0;function vk(e){return e instanceof Date&&!isNaN(e)}Bo.isValidDate=vk;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.timeout=e.TimeoutError=void 0;var r=nt,t=Bo,n=R,o=M,i=zt,a=$,s=$t;e.TimeoutError=i.createErrorClass(function(l){return function(h){h===void 0&&(h=null),l(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=h}});function c(l,d){var h=t.isValidDate(l)?{first:l}:typeof l=="number"?{each:l}:l,v=h.first,_=h.each,y=h.with,p=y===void 0?u:y,b=h.scheduler,g=b===void 0?d??r.asyncScheduler:b,w=h.meta,E=w===void 0?null:w;if(v==null&&_==null)throw new TypeError("No timeout provided.");return n.operate(function(S,T){var P,I,k=null,D=0,K=function(V){I=s.executeSchedule(T,g,function(){try{P.unsubscribe(),o.innerFrom(p({meta:E,lastValue:k,seen:D})).subscribe(T)}catch(H){T.error(H)}},V)};P=S.subscribe(a.createOperatorSubscriber(T,function(V){I==null||I.unsubscribe(),D++,T.next(k=V),_>0&&K(_)},void 0,void 0,function(){I!=null&&I.closed||I==null||I.unsubscribe(),k=null})),!D&&K(v!=null?typeof v=="number"?v:+v-g.now():_)})}e.timeout=c;function u(l){throw new e.TimeoutError(l)}})(Qi);var dl={},Ra={},Ht={},Nt={};Object.defineProperty(Nt,"__esModule",{value:!0});Nt.map=void 0;var _k=R,pk=$;function yk(e,r){return _k.operate(function(t,n){var o=0;t.subscribe(pk.createOperatorSubscriber(n,function(i){n.next(e.call(r,i,o++))}))})}Nt.map=yk;var bk=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},mk=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.mapOneOrManyArgs=void 0;var gk=Nt,Ok=Array.isArray;function wk(e,r){return Ok(r)?e.apply(void 0,mk([],bk(r))):e(r)}function Ek(e){return gk.map(function(r){return wk(e,r)})}Ht.mapOneOrManyArgs=Ek;var Sk=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},$y=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ra,"__esModule",{value:!0});Ra.bindCallbackInternals=void 0;var Pk=Ln,Tk=ae,Ck=Vr,Ak=Ht,Ik=Wr,Rk=Do;function gv(e,r,t,n){if(t)if(Pk.isScheduler(t))n=t;else return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return gv(e,r,n).apply(this,o).pipe(Ak.mapOneOrManyArgs(t))};return n?function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return gv(e,r).apply(this,o).pipe(Ck.subscribeOn(n),Ik.observeOn(n))}:function(){for(var o=this,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=new Rk.AsyncSubject,c=!0;return new Tk.Observable(function(u){var l=s.subscribe(u);if(c){c=!1;var d=!1,h=!1;r.apply(o,$y($y([],Sk(i)),[function(){for(var v=[],_=0;_<arguments.length;_++)v[_]=arguments[_];if(e){var y=v.shift();if(y!=null){s.error(y);return}}s.next(1<v.length?v:v[0]),h=!0,d&&s.complete()}])),h&&s.complete(),d=!0}return l})}}Ra.bindCallbackInternals=gv;Object.defineProperty(dl,"__esModule",{value:!0});dl.bindCallback=void 0;var jk=Ra;function $k(e,r,t){return jk.bindCallbackInternals(!1,e,r,t)}dl.bindCallback=$k;var hl={};Object.defineProperty(hl,"__esModule",{value:!0});hl.bindNodeCallback=void 0;var Nk=Ra;function kk(e,r,t){return Nk.bindCallbackInternals(!0,e,r,t)}hl.bindNodeCallback=kk;var Ar={},ja={};Object.defineProperty(ja,"__esModule",{value:!0});ja.argsArgArrayOrObject=void 0;var Mk=Array.isArray,Dk=Object.getPrototypeOf,Lk=Object.prototype,Uk=Object.keys;function Fk(e){if(e.length===1){var r=e[0];if(Mk(r))return{args:r,keys:null};if(Bk(r)){var t=Uk(r);return{args:t.map(function(n){return r[n]}),keys:t}}}return{args:e,keys:null}}ja.argsArgArrayOrObject=Fk;function Bk(e){return e&&typeof e=="object"&&Dk(e)===Lk}var $a={};Object.defineProperty($a,"__esModule",{value:!0});$a.createObject=void 0;function xk(e,r){return e.reduce(function(t,n,o){return t[n]=r[o],t},{})}$a.createObject=xk;Object.defineProperty(Ar,"__esModule",{value:!0});Ar.combineLatestInit=Ar.combineLatest=void 0;var Wk=ae,Vk=ja,vO=jt,_O=je,zk=Ht,Ny=Te,qk=$a,Hk=$,Gk=$t;function Kk(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Ny.popScheduler(e),n=Ny.popResultSelector(e),o=Vk.argsArgArrayOrObject(e),i=o.args,a=o.keys;if(i.length===0)return vO.from([],t);var s=new Wk.Observable(pO(i,t,a?function(c){return qk.createObject(a,c)}:_O.identity));return n?s.pipe(zk.mapOneOrManyArgs(n)):s}Ar.combineLatest=Kk;function pO(e,r,t){return t===void 0&&(t=_O.identity),function(n){ky(r,function(){for(var o=e.length,i=new Array(o),a=o,s=o,c=function(l){ky(r,function(){var d=vO.from(e[l],r),h=!1;d.subscribe(Hk.createOperatorSubscriber(n,function(v){i[l]=v,h||(h=!0,s--),s||n.next(t(i.slice()))},function(){--a||n.complete()}))},n)},u=0;u<o;u++)c(u)},n)}}Ar.combineLatestInit=pO;function ky(e,r,t){e?Gk.executeSchedule(t,e,r):r()}var Un={},Fn={},zr={},bt={},xo={};Object.defineProperty(xo,"__esModule",{value:!0});xo.mergeInternals=void 0;var Yk=M,Zk=$t,My=$;function Qk(e,r,t,n,o,i,a,s){var c=[],u=0,l=0,d=!1,h=function(){d&&!c.length&&!u&&r.complete()},v=function(y){return u<n?_(y):c.push(y)},_=function(y){i&&r.next(y),u++;var p=!1;Yk.innerFrom(t(y,l++)).subscribe(My.createOperatorSubscriber(r,function(b){o==null||o(b),i?v(b):r.next(b)},function(){p=!0},void 0,function(){if(p)try{u--;for(var b=function(){var g=c.shift();a?Zk.executeSchedule(r,a,function(){return _(g)}):_(g)};c.length&&u<n;)b();h()}catch(g){r.error(g)}}))};return e.subscribe(My.createOperatorSubscriber(r,v,function(){d=!0,h()})),function(){s==null||s()}}xo.mergeInternals=Qk;Object.defineProperty(bt,"__esModule",{value:!0});bt.mergeMap=void 0;var Xk=Nt,Jk=M,eM=R,tM=xo,rM=ie;function yO(e,r,t){return t===void 0&&(t=1/0),rM.isFunction(r)?yO(function(n,o){return Xk.map(function(i,a){return r(n,i,o,a)})(Jk.innerFrom(e(n,o)))},t):(typeof r=="number"&&(t=r),eM.operate(function(n,o){return tM.mergeInternals(n,o,e,t)}))}bt.mergeMap=yO;Object.defineProperty(zr,"__esModule",{value:!0});zr.mergeAll=void 0;var nM=bt,oM=je;function iM(e){return e===void 0&&(e=1/0),nM.mergeMap(oM.identity,e)}zr.mergeAll=iM;Object.defineProperty(Fn,"__esModule",{value:!0});Fn.concatAll=void 0;var aM=zr;function uM(){return aM.mergeAll(1)}Fn.concatAll=uM;Object.defineProperty(Un,"__esModule",{value:!0});Un.concat=void 0;var sM=Fn,cM=Te,lM=jt;function fM(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return sM.concatAll()(lM.from(e,cM.popScheduler(e)))}Un.concat=fM;var vl={},Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.defer=void 0;var dM=ae,hM=M;function vM(e){return new dM.Observable(function(r){hM.innerFrom(e()).subscribe(r)})}Bn.defer=vM;Object.defineProperty(vl,"__esModule",{value:!0});vl.connectable=void 0;var _M=Ee,pM=ae,yM=Bn,bM={connector:function(){return new _M.Subject},resetOnDisconnect:!0};function mM(e,r){r===void 0&&(r=bM);var t=null,n=r.connector,o=r.resetOnDisconnect,i=o===void 0?!0:o,a=n(),s=new pM.Observable(function(c){return a.subscribe(c)});return s.connect=function(){return(!t||t.closed)&&(t=yM.defer(function(){return e}).subscribe(a),i&&t.add(function(){return a=n()})),t},s}vl.connectable=mM;var _l={};Object.defineProperty(_l,"__esModule",{value:!0});_l.forkJoin=void 0;var gM=ae,OM=ja,wM=M,EM=Te,SM=$,PM=Ht,TM=$a;function CM(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=EM.popResultSelector(e),n=OM.argsArgArrayOrObject(e),o=n.args,i=n.keys,a=new gM.Observable(function(s){var c=o.length;if(!c){s.complete();return}for(var u=new Array(c),l=c,d=c,h=function(_){var y=!1;wM.innerFrom(o[_]).subscribe(SM.createOperatorSubscriber(s,function(p){y||(y=!0,d--),u[_]=p},function(){return l--},void 0,function(){(!l||!y)&&(d||s.next(i?TM.createObject(i,u):u),s.complete())}))},v=0;v<c;v++)h(v)});return t?a.pipe(PM.mapOneOrManyArgs(t)):a}_l.forkJoin=CM;var pl={},AM=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(pl,"__esModule",{value:!0});pl.fromEvent=void 0;var IM=M,RM=ae,jM=bt,$M=Uo,Sn=ie,NM=Ht,kM=["addListener","removeListener"],MM=["addEventListener","removeEventListener"],DM=["on","off"];function Ov(e,r,t,n){if(Sn.isFunction(t)&&(n=t,t=void 0),n)return Ov(e,r,t).pipe(NM.mapOneOrManyArgs(n));var o=AM(FM(e)?MM.map(function(s){return function(c){return e[s](r,c,t)}}):LM(e)?kM.map(Dy(e,r)):UM(e)?DM.map(Dy(e,r)):[],2),i=o[0],a=o[1];if(!i&&$M.isArrayLike(e))return jM.mergeMap(function(s){return Ov(s,r,t)})(IM.innerFrom(e));if(!i)throw new TypeError("Invalid event target");return new RM.Observable(function(s){var c=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return s.next(1<u.length?u:u[0])};return i(c),function(){return a(c)}})}pl.fromEvent=Ov;function Dy(e,r){return function(t){return function(n){return e[t](r,n)}}}function LM(e){return Sn.isFunction(e.addListener)&&Sn.isFunction(e.removeListener)}function UM(e){return Sn.isFunction(e.on)&&Sn.isFunction(e.off)}function FM(e){return Sn.isFunction(e.addEventListener)&&Sn.isFunction(e.removeEventListener)}var yl={};Object.defineProperty(yl,"__esModule",{value:!0});yl.fromEventPattern=void 0;var BM=ae,xM=ie,WM=Ht;function bO(e,r,t){return t?bO(e,r).pipe(WM.mapOneOrManyArgs(t)):new BM.Observable(function(n){var o=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return n.next(a.length===1?a[0]:a)},i=e(o);return xM.isFunction(r)?function(){return r(o,i)}:void 0})}yl.fromEventPattern=bO;var bl={},VM=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(bl,"__esModule",{value:!0});bl.generate=void 0;var Ly=je,zM=Ln,qM=Bn,HM=Sa;function GM(e,r,t,n,o){var i,a,s,c;arguments.length===1?(i=e,c=i.initialState,r=i.condition,t=i.iterate,a=i.resultSelector,s=a===void 0?Ly.identity:a,o=i.scheduler):(c=e,!n||zM.isScheduler(n)?(s=Ly.identity,o=n):s=n);function u(){var l;return VM(this,function(d){switch(d.label){case 0:l=c,d.label=1;case 1:return!r||r(l)?[4,s(l)]:[3,4];case 2:d.sent(),d.label=3;case 3:return l=t(l),[3,1];case 4:return[2]}})}return qM.defer(o?function(){return HM.scheduleIterable(u(),o)}:u)}bl.generate=GM;var ml={};Object.defineProperty(ml,"__esModule",{value:!0});ml.iif=void 0;var KM=Bn;function YM(e,r,t){return KM.defer(function(){return e()?r:t})}ml.iif=YM;var Na={},Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.timer=void 0;var ZM=ae,QM=nt,XM=Ln,JM=Bo;function eD(e,r,t){e===void 0&&(e=0),t===void 0&&(t=QM.async);var n=-1;return r!=null&&(XM.isScheduler(r)?t=r:n=r),new ZM.Observable(function(o){var i=JM.isValidDate(e)?+e-t.now():e;i<0&&(i=0);var a=0;return t.schedule(function(){o.closed||(o.next(a++),0<=n?this.schedule(void 0,n):o.complete())},i)})}Gt.timer=eD;Object.defineProperty(Na,"__esModule",{value:!0});Na.interval=void 0;var tD=nt,rD=Gt;function nD(e,r){return e===void 0&&(e=0),r===void 0&&(r=tD.asyncScheduler),e<0&&(e=0),rD.timer(e,e,r)}Na.interval=nD;var gl={};Object.defineProperty(gl,"__esModule",{value:!0});gl.merge=void 0;var oD=zr,iD=M,aD=At,Uy=Te,uD=jt;function sD(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Uy.popScheduler(e),n=Uy.popNumber(e,1/0),o=e;return o.length?o.length===1?iD.innerFrom(o[0]):oD.mergeAll(n)(uD.from(o,t)):aD.EMPTY}gl.merge=sD;var wv={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.never=e.NEVER=void 0;var r=ae,t=Re;e.NEVER=new r.Observable(t.noop);function n(){return e.NEVER}e.never=n})(wv);var ka={},ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.argsOrArgArray=void 0;var cD=Array.isArray;function lD(e){return e.length===1&&cD(e[0])?e[0]:e}ur.argsOrArgArray=lD;Object.defineProperty(ka,"__esModule",{value:!0});ka.onErrorResumeNext=void 0;var fD=ae,dD=ur,hD=$,Fy=Re,vD=M;function _D(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=dD.argsOrArgArray(e);return new fD.Observable(function(n){var o=0,i=function(){if(o<t.length){var a=void 0;try{a=vD.innerFrom(t[o++])}catch{i();return}var s=new hD.OperatorSubscriber(n,void 0,Fy.noop,Fy.noop);a.subscribe(s),s.add(i)}else n.complete()};i()})}ka.onErrorResumeNext=_D;var Ol={};Object.defineProperty(Ol,"__esModule",{value:!0});Ol.pairs=void 0;var pD=jt;function yD(e,r){return pD.from(Object.entries(e),r)}Ol.pairs=yD;var wl={},Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});Ma.not=void 0;function bD(e,r){return function(t,n){return!e.call(r,t,n)}}Ma.not=bD;var kt={};Object.defineProperty(kt,"__esModule",{value:!0});kt.filter=void 0;var mD=R,gD=$;function OD(e,r){return mD.operate(function(t,n){var o=0;t.subscribe(gD.createOperatorSubscriber(n,function(i){return e.call(r,i,o++)&&n.next(i)}))})}kt.filter=OD;Object.defineProperty(wl,"__esModule",{value:!0});wl.partition=void 0;var wD=Ma,By=kt,xy=M;function ED(e,r,t){return[By.filter(r,t)(xy.innerFrom(e)),By.filter(wD.not(r,t))(xy.innerFrom(e))]}wl.partition=ED;var Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.raceInit=Pn.race=void 0;var SD=ae,mO=M,PD=ur,TD=$;function CD(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e=PD.argsOrArgArray(e),e.length===1?mO.innerFrom(e[0]):new SD.Observable(gO(e))}Pn.race=CD;function gO(e){return function(r){for(var t=[],n=function(i){t.push(mO.innerFrom(e[i]).subscribe(TD.createOperatorSubscriber(r,function(a){if(t){for(var s=0;s<t.length;s++)s!==i&&t[s].unsubscribe();t=null}r.next(a)})))},o=0;t&&!r.closed&&o<e.length;o++)n(o)}}Pn.raceInit=gO;var El={};Object.defineProperty(El,"__esModule",{value:!0});El.range=void 0;var AD=ae,ID=At;function RD(e,r,t){if(r==null&&(r=e,e=0),r<=0)return ID.EMPTY;var n=r+e;return new AD.Observable(t?function(o){var i=e;return t.schedule(function(){i<n?(o.next(i++),this.schedule()):o.complete()})}:function(o){for(var i=e;i<n&&!o.closed;)o.next(i++);o.complete()})}El.range=RD;var Sl={};Object.defineProperty(Sl,"__esModule",{value:!0});Sl.using=void 0;var jD=ae,$D=M,ND=At;function kD(e,r){return new jD.Observable(function(t){var n=e(),o=r(n),i=o?$D.innerFrom(o):ND.EMPTY;return i.subscribe(t),function(){n&&n.unsubscribe()}})}Sl.using=kD;var Wo={},MD=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},DD=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Wo,"__esModule",{value:!0});Wo.zip=void 0;var LD=ae,UD=M,FD=ur,BD=At,xD=$,WD=Te;function VD(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=WD.popResultSelector(e),n=FD.argsOrArgArray(e);return n.length?new LD.Observable(function(o){var i=n.map(function(){return[]}),a=n.map(function(){return!1});o.add(function(){i=a=null});for(var s=function(u){UD.innerFrom(n[u]).subscribe(xD.createOperatorSubscriber(o,function(l){if(i[u].push(l),i.every(function(h){return h.length})){var d=i.map(function(h){return h.shift()});o.next(t?t.apply(void 0,DD([],MD(d))):d),i.some(function(h,v){return!h.length&&a[v]})&&o.complete()}},function(){a[u]=!0,!i[u].length&&o.complete()}))},c=0;!o.closed&&c<n.length;c++)s(c);return function(){i=a=null}}):BD.EMPTY}Wo.zip=VD;var OO={};Object.defineProperty(OO,"__esModule",{value:!0});var Vo={};Object.defineProperty(Vo,"__esModule",{value:!0});Vo.audit=void 0;var zD=R,qD=M,Wy=$;function HD(e){return zD.operate(function(r,t){var n=!1,o=null,i=null,a=!1,s=function(){if(i==null||i.unsubscribe(),i=null,n){n=!1;var u=o;o=null,t.next(u)}a&&t.complete()},c=function(){i=null,a&&t.complete()};r.subscribe(Wy.createOperatorSubscriber(t,function(u){n=!0,o=u,i||qD.innerFrom(e(u)).subscribe(i=Wy.createOperatorSubscriber(t,s,c))},function(){a=!0,(!n||!i||i.closed)&&t.complete()}))})}Vo.audit=HD;var Da={};Object.defineProperty(Da,"__esModule",{value:!0});Da.auditTime=void 0;var GD=nt,KD=Vo,YD=Gt;function ZD(e,r){return r===void 0&&(r=GD.asyncScheduler),KD.audit(function(){return YD.timer(e,r)})}Da.auditTime=ZD;var La={};Object.defineProperty(La,"__esModule",{value:!0});La.buffer=void 0;var QD=R,XD=Re,Vy=$,JD=M;function eL(e){return QD.operate(function(r,t){var n=[];return r.subscribe(Vy.createOperatorSubscriber(t,function(o){return n.push(o)},function(){t.next(n),t.complete()})),JD.innerFrom(e).subscribe(Vy.createOperatorSubscriber(t,function(){var o=n;n=[],t.next(o)},XD.noop)),function(){n=null}})}La.buffer=eL;var Ua={},_h=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.bufferCount=void 0;var tL=R,rL=$,nL=Rt;function oL(e,r){return r===void 0&&(r=null),r=r??e,tL.operate(function(t,n){var o=[],i=0;t.subscribe(rL.createOperatorSubscriber(n,function(a){var s,c,u,l,d=null;i++%r===0&&o.push([]);try{for(var h=_h(o),v=h.next();!v.done;v=h.next()){var _=v.value;_.push(a),e<=_.length&&(d=d??[],d.push(_))}}catch(b){s={error:b}}finally{try{v&&!v.done&&(c=h.return)&&c.call(h)}finally{if(s)throw s.error}}if(d)try{for(var y=_h(d),p=y.next();!p.done;p=y.next()){var _=p.value;nL.arrRemove(o,_),n.next(_)}}catch(b){u={error:b}}finally{try{p&&!p.done&&(l=y.return)&&l.call(y)}finally{if(u)throw u.error}}},function(){var a,s;try{for(var c=_h(o),u=c.next();!u.done;u=c.next()){var l=u.value;n.next(l)}}catch(d){a={error:d}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}n.complete()},void 0,function(){o=null}))})}Ua.bufferCount=oL;var Fa={},iL=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Fa,"__esModule",{value:!0});Fa.bufferTime=void 0;var aL=Ie,uL=R,sL=$,cL=Rt,lL=nt,fL=Te,zy=$t;function dL(e){for(var r,t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=(r=fL.popScheduler(n))!==null&&r!==void 0?r:lL.asyncScheduler,a=(t=n[0])!==null&&t!==void 0?t:null,s=n[1]||1/0;return uL.operate(function(c,u){var l=[],d=!1,h=function(y){var p=y.buffer,b=y.subs;b.unsubscribe(),cL.arrRemove(l,y),u.next(p),d&&v()},v=function(){if(l){var y=new aL.Subscription;u.add(y);var p=[],b={buffer:p,subs:y};l.push(b),zy.executeSchedule(y,i,function(){return h(b)},e)}};a!==null&&a>=0?zy.executeSchedule(u,i,v,a,!0):d=!0,v();var _=sL.createOperatorSubscriber(u,function(y){var p,b,g=l.slice();try{for(var w=iL(g),E=w.next();!E.done;E=w.next()){var S=E.value,T=S.buffer;T.push(y),s<=T.length&&h(S)}}catch(P){p={error:P}}finally{try{E&&!E.done&&(b=w.return)&&b.call(w)}finally{if(p)throw p.error}}},function(){for(;l!=null&&l.length;)u.next(l.shift().buffer);_==null||_.unsubscribe(),u.complete(),u.unsubscribe()},void 0,function(){return l=null});c.subscribe(_)})}Fa.bufferTime=dL;var Ba={},hL=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ba,"__esModule",{value:!0});Ba.bufferToggle=void 0;var vL=Ie,_L=R,qy=M,ph=$,Hy=Re,pL=Rt;function yL(e,r){return _L.operate(function(t,n){var o=[];qy.innerFrom(e).subscribe(ph.createOperatorSubscriber(n,function(i){var a=[];o.push(a);var s=new vL.Subscription,c=function(){pL.arrRemove(o,a),n.next(a),s.unsubscribe()};s.add(qy.innerFrom(r(i)).subscribe(ph.createOperatorSubscriber(n,c,Hy.noop)))},Hy.noop)),t.subscribe(ph.createOperatorSubscriber(n,function(i){var a,s;try{for(var c=hL(o),u=c.next();!u.done;u=c.next()){var l=u.value;l.push(i)}}catch(d){a={error:d}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}},function(){for(;o.length>0;)n.next(o.shift());n.complete()}))})}Ba.bufferToggle=yL;var xa={};Object.defineProperty(xa,"__esModule",{value:!0});xa.bufferWhen=void 0;var bL=R,mL=Re,Gy=$,gL=M;function OL(e){return bL.operate(function(r,t){var n=null,o=null,i=function(){o==null||o.unsubscribe();var a=n;n=[],a&&t.next(a),gL.innerFrom(e()).subscribe(o=Gy.createOperatorSubscriber(t,i,mL.noop))};i(),r.subscribe(Gy.createOperatorSubscriber(t,function(a){return n==null?void 0:n.push(a)},function(){n&&t.next(n),t.complete()},void 0,function(){return n=o=null}))})}xa.bufferWhen=OL;var Wa={};Object.defineProperty(Wa,"__esModule",{value:!0});Wa.catchError=void 0;var wL=M,EL=$,SL=R;function wO(e){return SL.operate(function(r,t){var n=null,o=!1,i;n=r.subscribe(EL.createOperatorSubscriber(t,void 0,void 0,function(a){i=wL.innerFrom(e(a,wO(e)(r))),n?(n.unsubscribe(),n=null,i.subscribe(t)):o=!0})),o&&(n.unsubscribe(),n=null,i.subscribe(t))})}Wa.catchError=wO;var Va={},zo={},za={},qo={},sr={},qa={};Object.defineProperty(qa,"__esModule",{value:!0});qa.scanInternals=void 0;var PL=$;function TL(e,r,t,n,o){return function(i,a){var s=t,c=r,u=0;i.subscribe(PL.createOperatorSubscriber(a,function(l){var d=u++;c=s?e(c,l,d):(s=!0,l),n&&a.next(c)},o&&function(){s&&a.next(c),a.complete()}))}}qa.scanInternals=TL;Object.defineProperty(sr,"__esModule",{value:!0});sr.reduce=void 0;var CL=qa,AL=R;function IL(e,r){return AL.operate(CL.scanInternals(e,r,arguments.length>=2,!1,!0))}sr.reduce=IL;Object.defineProperty(qo,"__esModule",{value:!0});qo.toArray=void 0;var RL=sr,jL=R,$L=function(e,r){return e.push(r),e};function NL(){return jL.operate(function(e,r){RL.reduce($L,[])(e).subscribe(r)})}qo.toArray=NL;Object.defineProperty(za,"__esModule",{value:!0});za.joinAllInternals=void 0;var kL=je,ML=Ht,DL=ar,LL=bt,UL=qo;function FL(e,r){return DL.pipe(UL.toArray(),LL.mergeMap(function(t){return e(t)}),r?ML.mapOneOrManyArgs(r):kL.identity)}za.joinAllInternals=FL;Object.defineProperty(zo,"__esModule",{value:!0});zo.combineLatestAll=void 0;var BL=Ar,xL=za;function WL(e){return xL.joinAllInternals(BL.combineLatest,e)}zo.combineLatestAll=WL;Object.defineProperty(Va,"__esModule",{value:!0});Va.combineAll=void 0;var VL=zo;Va.combineAll=VL.combineLatestAll;var Ha={},Ga={},Ky=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Yy=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ga,"__esModule",{value:!0});Ga.combineLatest=void 0;var zL=Ar,qL=R,HL=ur,GL=Ht,KL=ar,YL=Te;function EO(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=YL.popResultSelector(e);return t?KL.pipe(EO.apply(void 0,Yy([],Ky(e))),GL.mapOneOrManyArgs(t)):qL.operate(function(n,o){zL.combineLatestInit(Yy([n],Ky(HL.argsOrArgArray(e))))(o)})}Ga.combineLatest=EO;var ZL=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},QL=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ha,"__esModule",{value:!0});Ha.combineLatestWith=void 0;var XL=Ga;function JL(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return XL.combineLatest.apply(void 0,QL([],ZL(e)))}Ha.combineLatestWith=JL;var Ho={};Object.defineProperty(Ho,"__esModule",{value:!0});Ho.concatMap=void 0;var Zy=bt,e2=ie;function t2(e,r){return e2.isFunction(r)?Zy.mergeMap(e,r,1):Zy.mergeMap(e,1)}Ho.concatMap=t2;var Ka={};Object.defineProperty(Ka,"__esModule",{value:!0});Ka.concatMapTo=void 0;var Qy=Ho,r2=ie;function n2(e,r){return r2.isFunction(r)?Qy.concatMap(function(){return e},r):Qy.concatMap(function(){return e})}Ka.concatMapTo=n2;var Ya={},Za={},o2=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},i2=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Za,"__esModule",{value:!0});Za.concat=void 0;var a2=R,u2=Fn,s2=Te,c2=jt;function l2(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=s2.popScheduler(e);return a2.operate(function(n,o){u2.concatAll()(c2.from(i2([n],o2(e)),t)).subscribe(o)})}Za.concat=l2;var f2=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},d2=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ya,"__esModule",{value:!0});Ya.concatWith=void 0;var h2=Za;function v2(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return h2.concat.apply(void 0,d2([],f2(e)))}Ya.concatWith=v2;var xn={},Pl={};Object.defineProperty(Pl,"__esModule",{value:!0});Pl.fromSubscribable=void 0;var _2=ae;function p2(e){return new _2.Observable(function(r){return e.subscribe(r)})}Pl.fromSubscribable=p2;Object.defineProperty(xn,"__esModule",{value:!0});xn.connect=void 0;var y2=Ee,b2=M,m2=R,g2=Pl,O2={connector:function(){return new y2.Subject}};function w2(e,r){r===void 0&&(r=O2);var t=r.connector;return m2.operate(function(n,o){var i=t();b2.innerFrom(e(g2.fromSubscribable(i))).subscribe(o),o.add(n.subscribe(i))})}xn.connect=w2;var Qa={};Object.defineProperty(Qa,"__esModule",{value:!0});Qa.count=void 0;var E2=sr;function S2(e){return E2.reduce(function(r,t,n){return!e||e(t,n)?r+1:r},0)}Qa.count=S2;var Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});Xa.debounce=void 0;var P2=R,T2=Re,Xy=$,C2=M;function A2(e){return P2.operate(function(r,t){var n=!1,o=null,i=null,a=function(){if(i==null||i.unsubscribe(),i=null,n){n=!1;var s=o;o=null,t.next(s)}};r.subscribe(Xy.createOperatorSubscriber(t,function(s){i==null||i.unsubscribe(),n=!0,o=s,i=Xy.createOperatorSubscriber(t,a,T2.noop),C2.innerFrom(e(s)).subscribe(i)},function(){a(),t.complete()},void 0,function(){o=i=null}))})}Xa.debounce=A2;var Ja={};Object.defineProperty(Ja,"__esModule",{value:!0});Ja.debounceTime=void 0;var I2=nt,R2=R,j2=$;function $2(e,r){return r===void 0&&(r=I2.asyncScheduler),R2.operate(function(t,n){var o=null,i=null,a=null,s=function(){if(o){o.unsubscribe(),o=null;var u=i;i=null,n.next(u)}};function c(){var u=a+e,l=r.now();if(l<u){o=this.schedule(void 0,u-l),n.add(o);return}s()}t.subscribe(j2.createOperatorSubscriber(n,function(u){i=u,a=r.now(),o||(o=r.schedule(c,e),n.add(o))},function(){s(),n.complete()},void 0,function(){i=o=null}))})}Ja.debounceTime=$2;var qr={};Object.defineProperty(qr,"__esModule",{value:!0});qr.defaultIfEmpty=void 0;var N2=R,k2=$;function M2(e){return N2.operate(function(r,t){var n=!1;r.subscribe(k2.createOperatorSubscriber(t,function(o){n=!0,t.next(o)},function(){n||t.next(e),t.complete()}))})}qr.defaultIfEmpty=M2;var eu={},Go={},Hr={};Object.defineProperty(Hr,"__esModule",{value:!0});Hr.take=void 0;var D2=At,L2=R,U2=$;function F2(e){return e<=0?function(){return D2.EMPTY}:L2.operate(function(r,t){var n=0;r.subscribe(U2.createOperatorSubscriber(t,function(o){++n<=e&&(t.next(o),e<=n&&t.complete())}))})}Hr.take=F2;var Ko={};Object.defineProperty(Ko,"__esModule",{value:!0});Ko.ignoreElements=void 0;var B2=R,x2=$,W2=Re;function V2(){return B2.operate(function(e,r){e.subscribe(x2.createOperatorSubscriber(r,W2.noop))})}Ko.ignoreElements=V2;var Yo={};Object.defineProperty(Yo,"__esModule",{value:!0});Yo.mapTo=void 0;var z2=Nt;function q2(e){return z2.map(function(){return e})}Yo.mapTo=q2;Object.defineProperty(Go,"__esModule",{value:!0});Go.delayWhen=void 0;var H2=Un,Jy=Hr,G2=Ko,K2=Yo,Y2=bt,Z2=M;function SO(e,r){return r?function(t){return H2.concat(r.pipe(Jy.take(1),G2.ignoreElements()),t.pipe(SO(e)))}:Y2.mergeMap(function(t,n){return Z2.innerFrom(e(t,n)).pipe(Jy.take(1),K2.mapTo(t))})}Go.delayWhen=SO;Object.defineProperty(eu,"__esModule",{value:!0});eu.delay=void 0;var Q2=nt,X2=Go,J2=Gt;function eU(e,r){r===void 0&&(r=Q2.asyncScheduler);var t=J2.timer(e,r);return X2.delayWhen(function(){return t})}eu.delay=eU;var tu={};Object.defineProperty(tu,"__esModule",{value:!0});tu.dematerialize=void 0;var tU=ol,rU=R,nU=$;function oU(){return rU.operate(function(e,r){e.subscribe(nU.createOperatorSubscriber(r,function(t){return tU.observeNotification(t,r)}))})}tu.dematerialize=oU;var ru={};Object.defineProperty(ru,"__esModule",{value:!0});ru.distinct=void 0;var iU=R,eb=$,aU=Re,uU=M;function sU(e,r){return iU.operate(function(t,n){var o=new Set;t.subscribe(eb.createOperatorSubscriber(n,function(i){var a=e?e(i):i;o.has(a)||(o.add(a),n.next(i))})),r&&uU.innerFrom(r).subscribe(eb.createOperatorSubscriber(n,function(){return o.clear()},aU.noop))})}ru.distinct=sU;var Zo={};Object.defineProperty(Zo,"__esModule",{value:!0});Zo.distinctUntilChanged=void 0;var cU=je,lU=R,fU=$;function dU(e,r){return r===void 0&&(r=cU.identity),e=e??hU,lU.operate(function(t,n){var o,i=!0;t.subscribe(fU.createOperatorSubscriber(n,function(a){var s=r(a);(i||!e(o,s))&&(i=!1,o=s,n.next(a))}))})}Zo.distinctUntilChanged=dU;function hU(e,r){return e===r}var nu={};Object.defineProperty(nu,"__esModule",{value:!0});nu.distinctUntilKeyChanged=void 0;var vU=Zo;function _U(e,r){return vU.distinctUntilChanged(function(t,n){return r?r(t[e],n[e]):t[e]===n[e]})}nu.distinctUntilKeyChanged=_U;var ou={},Gr={};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.throwIfEmpty=void 0;var pU=qt,yU=R,bU=$;function mU(e){return e===void 0&&(e=gU),yU.operate(function(r,t){var n=!1;r.subscribe(bU.createOperatorSubscriber(t,function(o){n=!0,t.next(o)},function(){return n?t.complete():t.error(e())}))})}Gr.throwIfEmpty=mU;function gU(){return new pU.EmptyError}Object.defineProperty(ou,"__esModule",{value:!0});ou.elementAt=void 0;var tb=Ca,OU=kt,wU=Gr,EU=qr,SU=Hr;function PU(e,r){if(e<0)throw new tb.ArgumentOutOfRangeError;var t=arguments.length>=2;return function(n){return n.pipe(OU.filter(function(o,i){return i===e}),SU.take(1),t?EU.defaultIfEmpty(r):wU.throwIfEmpty(function(){return new tb.ArgumentOutOfRangeError}))}}ou.elementAt=PU;var iu={},TU=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},CU=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(iu,"__esModule",{value:!0});iu.endWith=void 0;var AU=Un,IU=Lo;function RU(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(t){return AU.concat(t,IU.of.apply(void 0,CU([],TU(e))))}}iu.endWith=RU;var au={};Object.defineProperty(au,"__esModule",{value:!0});au.every=void 0;var jU=R,$U=$;function NU(e,r){return jU.operate(function(t,n){var o=0;t.subscribe($U.createOperatorSubscriber(n,function(i){e.call(r,i,o++,t)||(n.next(!1),n.complete())},function(){n.next(!0),n.complete()}))})}au.every=NU;var uu={},Qo={},Xo={};Object.defineProperty(Xo,"__esModule",{value:!0});Xo.exhaustMap=void 0;var kU=Nt,rb=M,MU=R,nb=$;function PO(e,r){return r?function(t){return t.pipe(PO(function(n,o){return rb.innerFrom(e(n,o)).pipe(kU.map(function(i,a){return r(n,i,o,a)}))}))}:MU.operate(function(t,n){var o=0,i=null,a=!1;t.subscribe(nb.createOperatorSubscriber(n,function(s){i||(i=nb.createOperatorSubscriber(n,void 0,function(){i=null,a&&n.complete()}),rb.innerFrom(e(s,o++)).subscribe(i))},function(){a=!0,!i&&n.complete()}))})}Xo.exhaustMap=PO;Object.defineProperty(Qo,"__esModule",{value:!0});Qo.exhaustAll=void 0;var DU=Xo,LU=je;function UU(){return DU.exhaustMap(LU.identity)}Qo.exhaustAll=UU;Object.defineProperty(uu,"__esModule",{value:!0});uu.exhaust=void 0;var FU=Qo;uu.exhaust=FU.exhaustAll;var su={};Object.defineProperty(su,"__esModule",{value:!0});su.expand=void 0;var BU=R,xU=xo;function WU(e,r,t){return r===void 0&&(r=1/0),r=(r||0)<1?1/0:r,BU.operate(function(n,o){return xU.mergeInternals(n,o,e,r,void 0,!0,t)})}su.expand=WU;var cu={};Object.defineProperty(cu,"__esModule",{value:!0});cu.finalize=void 0;var VU=R;function zU(e){return VU.operate(function(r,t){try{r.subscribe(t)}finally{t.add(e)}})}cu.finalize=zU;var Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.createFind=Ir.find=void 0;var qU=R,HU=$;function GU(e,r){return qU.operate(TO(e,r,"value"))}Ir.find=GU;function TO(e,r,t){var n=t==="index";return function(o,i){var a=0;o.subscribe(HU.createOperatorSubscriber(i,function(s){var c=a++;e.call(r,s,c,o)&&(i.next(n?c:s),i.complete())},function(){i.next(n?-1:void 0),i.complete()}))}}Ir.createFind=TO;var lu={};Object.defineProperty(lu,"__esModule",{value:!0});lu.findIndex=void 0;var KU=R,YU=Ir;function ZU(e,r){return KU.operate(YU.createFind(e,r,"index"))}lu.findIndex=ZU;var fu={};Object.defineProperty(fu,"__esModule",{value:!0});fu.first=void 0;var QU=qt,XU=kt,JU=Hr,eF=qr,tF=Gr,rF=je;function nF(e,r){var t=arguments.length>=2;return function(n){return n.pipe(e?XU.filter(function(o,i){return e(o,i,n)}):rF.identity,JU.take(1),t?eF.defaultIfEmpty(r):tF.throwIfEmpty(function(){return new QU.EmptyError}))}}fu.first=nF;var du={};Object.defineProperty(du,"__esModule",{value:!0});du.groupBy=void 0;var oF=ae,iF=M,aF=Ee,uF=R,ob=$;function sF(e,r,t,n){return uF.operate(function(o,i){var a;!r||typeof r=="function"?a=r:(t=r.duration,a=r.element,n=r.connector);var s=new Map,c=function(_){s.forEach(_),_(i)},u=function(_){return c(function(y){return y.error(_)})},l=0,d=!1,h=new ob.OperatorSubscriber(i,function(_){try{var y=e(_),p=s.get(y);if(!p){s.set(y,p=n?n():new aF.Subject);var b=v(y,p);if(i.next(b),t){var g=ob.createOperatorSubscriber(p,function(){p.complete(),g==null||g.unsubscribe()},void 0,void 0,function(){return s.delete(y)});h.add(iF.innerFrom(t(b)).subscribe(g))}}p.next(a?a(_):_)}catch(w){u(w)}},function(){return c(function(_){return _.complete()})},u,function(){return s.clear()},function(){return d=!0,l===0});o.subscribe(h);function v(_,y){var p=new oF.Observable(function(b){l++;var g=y.subscribe(b);return function(){g.unsubscribe(),--l===0&&d&&h.unsubscribe()}});return p.key=_,p}})}du.groupBy=sF;var hu={};Object.defineProperty(hu,"__esModule",{value:!0});hu.isEmpty=void 0;var cF=R,lF=$;function fF(){return cF.operate(function(e,r){e.subscribe(lF.createOperatorSubscriber(r,function(){r.next(!1),r.complete()},function(){r.next(!0),r.complete()}))})}hu.isEmpty=fF;var vu={},Jo={},dF=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Jo,"__esModule",{value:!0});Jo.takeLast=void 0;var hF=At,vF=R,_F=$;function pF(e){return e<=0?function(){return hF.EMPTY}:vF.operate(function(r,t){var n=[];r.subscribe(_F.createOperatorSubscriber(t,function(o){n.push(o),e<n.length&&n.shift()},function(){var o,i;try{for(var a=dF(n),s=a.next();!s.done;s=a.next()){var c=s.value;t.next(c)}}catch(u){o={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}t.complete()},void 0,function(){n=null}))})}Jo.takeLast=pF;Object.defineProperty(vu,"__esModule",{value:!0});vu.last=void 0;var yF=qt,bF=kt,mF=Jo,gF=Gr,OF=qr,wF=je;function EF(e,r){var t=arguments.length>=2;return function(n){return n.pipe(e?bF.filter(function(o,i){return e(o,i,n)}):wF.identity,mF.takeLast(1),t?OF.defaultIfEmpty(r):gF.throwIfEmpty(function(){return new yF.EmptyError}))}}vu.last=EF;var _u={};Object.defineProperty(_u,"__esModule",{value:!0});_u.materialize=void 0;var yh=ol,SF=R,PF=$;function TF(){return SF.operate(function(e,r){e.subscribe(PF.createOperatorSubscriber(r,function(t){r.next(yh.Notification.createNext(t))},function(){r.next(yh.Notification.createComplete()),r.complete()},function(t){r.next(yh.Notification.createError(t)),r.complete()}))})}_u.materialize=TF;var pu={};Object.defineProperty(pu,"__esModule",{value:!0});pu.max=void 0;var CF=sr,AF=ie;function IF(e){return CF.reduce(AF.isFunction(e)?function(r,t){return e(r,t)>0?r:t}:function(r,t){return r>t?r:t})}pu.max=IF;var yu={};Object.defineProperty(yu,"__esModule",{value:!0});yu.flatMap=void 0;var RF=bt;yu.flatMap=RF.mergeMap;var bu={};Object.defineProperty(bu,"__esModule",{value:!0});bu.mergeMapTo=void 0;var ib=bt,jF=ie;function $F(e,r,t){return t===void 0&&(t=1/0),jF.isFunction(r)?ib.mergeMap(function(){return e},r,t):(typeof r=="number"&&(t=r),ib.mergeMap(function(){return e},t))}bu.mergeMapTo=$F;var mu={};Object.defineProperty(mu,"__esModule",{value:!0});mu.mergeScan=void 0;var NF=R,kF=xo;function MF(e,r,t){return t===void 0&&(t=1/0),NF.operate(function(n,o){var i=r;return kF.mergeInternals(n,o,function(a,s){return e(i,a,s)},t,function(a){i=a},!1,void 0,function(){return i=null})})}mu.mergeScan=MF;var gu={},Ou={},DF=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},LF=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ou,"__esModule",{value:!0});Ou.merge=void 0;var UF=R,FF=zr,ab=Te,BF=jt;function xF(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=ab.popScheduler(e),n=ab.popNumber(e,1/0);return UF.operate(function(o,i){FF.mergeAll(n)(BF.from(LF([o],DF(e)),t)).subscribe(i)})}Ou.merge=xF;var WF=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},VF=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(gu,"__esModule",{value:!0});gu.mergeWith=void 0;var zF=Ou;function qF(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return zF.merge.apply(void 0,VF([],WF(e)))}gu.mergeWith=qF;var wu={};Object.defineProperty(wu,"__esModule",{value:!0});wu.min=void 0;var HF=sr,GF=ie;function KF(e){return HF.reduce(GF.isFunction(e)?function(r,t){return e(r,t)<0?r:t}:function(r,t){return r<t?r:t})}wu.min=KF;var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.multicast=void 0;var YF=Dn,ub=ie,ZF=xn;function QF(e,r){var t=ub.isFunction(e)?e:function(){return e};return ub.isFunction(r)?ZF.connect(r,{connector:t}):function(n){return new YF.ConnectableObservable(n,t)}}Wn.multicast=QF;var Tn={},XF=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},JF=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.onErrorResumeNext=Tn.onErrorResumeNextWith=void 0;var e4=ur,t4=ka;function CO(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=e4.argsOrArgArray(e);return function(n){return t4.onErrorResumeNext.apply(void 0,JF([n],XF(t)))}}Tn.onErrorResumeNextWith=CO;Tn.onErrorResumeNext=CO;var Eu={};Object.defineProperty(Eu,"__esModule",{value:!0});Eu.pairwise=void 0;var r4=R,n4=$;function o4(){return r4.operate(function(e,r){var t,n=!1;e.subscribe(n4.createOperatorSubscriber(r,function(o){var i=t;t=o,n&&r.next([i,o]),n=!0}))})}Eu.pairwise=o4;var Su={};Object.defineProperty(Su,"__esModule",{value:!0});Su.pluck=void 0;var i4=Nt;function a4(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=e.length;if(t===0)throw new Error("list of properties cannot be empty.");return i4.map(function(n){for(var o=n,i=0;i<t;i++){var a=o==null?void 0:o[e[i]];if(typeof a<"u")o=a;else return}return o})}Su.pluck=a4;var Pu={};Object.defineProperty(Pu,"__esModule",{value:!0});Pu.publish=void 0;var u4=Ee,s4=Wn,c4=xn;function l4(e){return e?function(r){return c4.connect(e)(r)}:function(r){return s4.multicast(new u4.Subject)(r)}}Pu.publish=l4;var Tu={};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.publishBehavior=void 0;var f4=pa,d4=Dn;function h4(e){return function(r){var t=new f4.BehaviorSubject(e);return new d4.ConnectableObservable(r,function(){return t})}}Tu.publishBehavior=h4;var Cu={};Object.defineProperty(Cu,"__esModule",{value:!0});Cu.publishLast=void 0;var v4=Do,_4=Dn;function p4(){return function(e){var r=new v4.AsyncSubject;return new _4.ConnectableObservable(e,function(){return r})}}Cu.publishLast=p4;var Au={};Object.defineProperty(Au,"__esModule",{value:!0});Au.publishReplay=void 0;var y4=Mo,b4=Wn,sb=ie;function m4(e,r,t,n){t&&!sb.isFunction(t)&&(n=t);var o=sb.isFunction(t)?t:void 0;return function(i){return b4.multicast(new y4.ReplaySubject(e,r,n),o)(i)}}Au.publishReplay=m4;var ei={},g4=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},O4=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(ei,"__esModule",{value:!0});ei.raceWith=void 0;var w4=Pn,E4=R,S4=je;function P4(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length?E4.operate(function(t,n){w4.raceInit(O4([t],g4(e)))(n)}):S4.identity}ei.raceWith=P4;var Iu={};Object.defineProperty(Iu,"__esModule",{value:!0});Iu.repeat=void 0;var T4=At,C4=R,cb=$,A4=M,I4=Gt;function R4(e){var r,t=1/0,n;return e!=null&&(typeof e=="object"?(r=e.count,t=r===void 0?1/0:r,n=e.delay):t=e),t<=0?function(){return T4.EMPTY}:C4.operate(function(o,i){var a=0,s,c=function(){if(s==null||s.unsubscribe(),s=null,n!=null){var l=typeof n=="number"?I4.timer(n):A4.innerFrom(n(a)),d=cb.createOperatorSubscriber(i,function(){d.unsubscribe(),u()});l.subscribe(d)}else u()},u=function(){var l=!1;s=o.subscribe(cb.createOperatorSubscriber(i,void 0,function(){++a<t?s?c():l=!0:i.complete()})),l&&c()};u()})}Iu.repeat=R4;var Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});Ru.repeatWhen=void 0;var j4=M,$4=Ee,N4=R,lb=$;function k4(e){return N4.operate(function(r,t){var n,o=!1,i,a=!1,s=!1,c=function(){return s&&a&&(t.complete(),!0)},u=function(){return i||(i=new $4.Subject,j4.innerFrom(e(i)).subscribe(lb.createOperatorSubscriber(t,function(){n?l():o=!0},function(){a=!0,c()}))),i},l=function(){s=!1,n=r.subscribe(lb.createOperatorSubscriber(t,void 0,function(){s=!0,!c()&&u().next()})),o&&(n.unsubscribe(),n=null,o=!1,l())};l()})}Ru.repeatWhen=k4;var ju={};Object.defineProperty(ju,"__esModule",{value:!0});ju.retry=void 0;var M4=R,fb=$,D4=je,L4=Gt,U4=M;function F4(e){e===void 0&&(e=1/0);var r;e&&typeof e=="object"?r=e:r={count:e};var t=r.count,n=t===void 0?1/0:t,o=r.delay,i=r.resetOnSuccess,a=i===void 0?!1:i;return n<=0?D4.identity:M4.operate(function(s,c){var u=0,l,d=function(){var h=!1;l=s.subscribe(fb.createOperatorSubscriber(c,function(v){a&&(u=0),c.next(v)},void 0,function(v){if(u++<n){var _=function(){l?(l.unsubscribe(),l=null,d()):h=!0};if(o!=null){var y=typeof o=="number"?L4.timer(o):U4.innerFrom(o(v,u)),p=fb.createOperatorSubscriber(c,function(){p.unsubscribe(),_()},function(){c.complete()});y.subscribe(p)}else _()}else c.error(v)})),h&&(l.unsubscribe(),l=null,d())};d()})}ju.retry=F4;var $u={};Object.defineProperty($u,"__esModule",{value:!0});$u.retryWhen=void 0;var B4=M,x4=Ee,W4=R,db=$;function V4(e){return W4.operate(function(r,t){var n,o=!1,i,a=function(){n=r.subscribe(db.createOperatorSubscriber(t,void 0,void 0,function(s){i||(i=new x4.Subject,B4.innerFrom(e(i)).subscribe(db.createOperatorSubscriber(t,function(){return n?a():o=!0}))),i&&i.next(s)})),o&&(n.unsubscribe(),n=null,o=!1,a())};a()})}$u.retryWhen=V4;var ti={};Object.defineProperty(ti,"__esModule",{value:!0});ti.sample=void 0;var z4=M,q4=R,H4=Re,hb=$;function G4(e){return q4.operate(function(r,t){var n=!1,o=null;r.subscribe(hb.createOperatorSubscriber(t,function(i){n=!0,o=i})),z4.innerFrom(e).subscribe(hb.createOperatorSubscriber(t,function(){if(n){n=!1;var i=o;o=null,t.next(i)}},H4.noop))})}ti.sample=G4;var Nu={};Object.defineProperty(Nu,"__esModule",{value:!0});Nu.sampleTime=void 0;var K4=nt,Y4=ti,Z4=Na;function Q4(e,r){return r===void 0&&(r=K4.asyncScheduler),Y4.sample(Z4.interval(e,r))}Nu.sampleTime=Q4;var ku={};Object.defineProperty(ku,"__esModule",{value:!0});ku.scan=void 0;var X4=R,J4=qa;function eB(e,r){return X4.operate(J4.scanInternals(e,r,arguments.length>=2,!0))}ku.scan=eB;var Mu={};Object.defineProperty(Mu,"__esModule",{value:!0});Mu.sequenceEqual=void 0;var tB=R,rB=$,nB=M;function oB(e,r){return r===void 0&&(r=function(t,n){return t===n}),tB.operate(function(t,n){var o=vb(),i=vb(),a=function(c){n.next(c),n.complete()},s=function(c,u){var l=rB.createOperatorSubscriber(n,function(d){var h=u.buffer,v=u.complete;h.length===0?v?a(!1):c.buffer.push(d):!r(d,h.shift())&&a(!1)},function(){c.complete=!0;var d=u.complete,h=u.buffer;d&&a(h.length===0),l==null||l.unsubscribe()});return l};t.subscribe(s(o,i)),nB.innerFrom(e).subscribe(s(i,o))})}Mu.sequenceEqual=oB;function vb(){return{buffer:[],complete:!1}}var ri={},iB=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},aB=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(ri,"__esModule",{value:!0});ri.share=void 0;var AO=M,uB=Ee,IO=No,sB=R;function cB(e){e===void 0&&(e={});var r=e.connector,t=r===void 0?function(){return new uB.Subject}:r,n=e.resetOnError,o=n===void 0?!0:n,i=e.resetOnComplete,a=i===void 0?!0:i,s=e.resetOnRefCountZero,c=s===void 0?!0:s;return function(u){var l,d,h,v=0,_=!1,y=!1,p=function(){d==null||d.unsubscribe(),d=void 0},b=function(){p(),l=h=void 0,_=y=!1},g=function(){var w=l;b(),w==null||w.unsubscribe()};return sB.operate(function(w,E){v++,!y&&!_&&p();var S=h=h??t();E.add(function(){v--,v===0&&!y&&!_&&(d=bh(g,c))}),S.subscribe(E),!l&&v>0&&(l=new IO.SafeSubscriber({next:function(T){return S.next(T)},error:function(T){y=!0,p(),d=bh(b,o,T),S.error(T)},complete:function(){_=!0,p(),d=bh(b,a),S.complete()}}),AO.innerFrom(w).subscribe(l))})(u)}}ri.share=cB;function bh(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];if(r===!0){e();return}if(r!==!1){var o=new IO.SafeSubscriber({next:function(){o.unsubscribe(),e()}});return AO.innerFrom(r.apply(void 0,aB([],iB(t)))).subscribe(o)}}var Du={};Object.defineProperty(Du,"__esModule",{value:!0});Du.shareReplay=void 0;var lB=Mo,fB=ri;function dB(e,r,t){var n,o,i,a,s=!1;return e&&typeof e=="object"?(n=e.bufferSize,a=n===void 0?1/0:n,o=e.windowTime,r=o===void 0?1/0:o,i=e.refCount,s=i===void 0?!1:i,t=e.scheduler):a=e??1/0,fB.share({connector:function(){return new lB.ReplaySubject(a,r,t)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}Du.shareReplay=dB;var Lu={};Object.defineProperty(Lu,"__esModule",{value:!0});Lu.single=void 0;var hB=qt,vB=Ia,_B=Aa,pB=R,yB=$;function bB(e){return pB.operate(function(r,t){var n=!1,o,i=!1,a=0;r.subscribe(yB.createOperatorSubscriber(t,function(s){i=!0,(!e||e(s,a++,r))&&(n&&t.error(new vB.SequenceError("Too many matching values")),n=!0,o=s)},function(){n?(t.next(o),t.complete()):t.error(i?new _B.NotFoundError("No matching values"):new hB.EmptyError)}))})}Lu.single=bB;var Uu={};Object.defineProperty(Uu,"__esModule",{value:!0});Uu.skip=void 0;var mB=kt;function gB(e){return mB.filter(function(r,t){return e<=t})}Uu.skip=gB;var Fu={};Object.defineProperty(Fu,"__esModule",{value:!0});Fu.skipLast=void 0;var OB=je,wB=R,EB=$;function SB(e){return e<=0?OB.identity:wB.operate(function(r,t){var n=new Array(e),o=0;return r.subscribe(EB.createOperatorSubscriber(t,function(i){var a=o++;if(a<e)n[a]=i;else{var s=a%e,c=n[s];n[s]=i,t.next(c)}})),function(){n=null}})}Fu.skipLast=SB;var Bu={};Object.defineProperty(Bu,"__esModule",{value:!0});Bu.skipUntil=void 0;var PB=R,_b=$,TB=M,CB=Re;function AB(e){return PB.operate(function(r,t){var n=!1,o=_b.createOperatorSubscriber(t,function(){o==null||o.unsubscribe(),n=!0},CB.noop);TB.innerFrom(e).subscribe(o),r.subscribe(_b.createOperatorSubscriber(t,function(i){return n&&t.next(i)}))})}Bu.skipUntil=AB;var xu={};Object.defineProperty(xu,"__esModule",{value:!0});xu.skipWhile=void 0;var IB=R,RB=$;function jB(e){return IB.operate(function(r,t){var n=!1,o=0;r.subscribe(RB.createOperatorSubscriber(t,function(i){return(n||(n=!e(i,o++)))&&t.next(i)}))})}xu.skipWhile=jB;var Wu={};Object.defineProperty(Wu,"__esModule",{value:!0});Wu.startWith=void 0;var pb=Un,$B=Te,NB=R;function kB(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=$B.popScheduler(e);return NB.operate(function(n,o){(t?pb.concat(e,n,t):pb.concat(e,n)).subscribe(o)})}Wu.startWith=kB;var Vu={},Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.switchMap=void 0;var MB=M,DB=R,yb=$;function LB(e,r){return DB.operate(function(t,n){var o=null,i=0,a=!1,s=function(){return a&&!o&&n.complete()};t.subscribe(yb.createOperatorSubscriber(n,function(c){o==null||o.unsubscribe();var u=0,l=i++;MB.innerFrom(e(c,l)).subscribe(o=yb.createOperatorSubscriber(n,function(d){return n.next(r?r(c,d,l,u++):d)},function(){o=null,s()}))},function(){a=!0,s()}))})}Kr.switchMap=LB;Object.defineProperty(Vu,"__esModule",{value:!0});Vu.switchAll=void 0;var UB=Kr,FB=je;function BB(){return UB.switchMap(FB.identity)}Vu.switchAll=BB;var zu={};Object.defineProperty(zu,"__esModule",{value:!0});zu.switchMapTo=void 0;var bb=Kr,xB=ie;function WB(e,r){return xB.isFunction(r)?bb.switchMap(function(){return e},r):bb.switchMap(function(){return e})}zu.switchMapTo=WB;var qu={};Object.defineProperty(qu,"__esModule",{value:!0});qu.switchScan=void 0;var VB=Kr,zB=R;function qB(e,r){return zB.operate(function(t,n){var o=r;return VB.switchMap(function(i,a){return e(o,i,a)},function(i,a){return o=a,a})(t).subscribe(n),function(){o=null}})}qu.switchScan=qB;var Hu={};Object.defineProperty(Hu,"__esModule",{value:!0});Hu.takeUntil=void 0;var HB=R,GB=$,KB=M,YB=Re;function ZB(e){return HB.operate(function(r,t){KB.innerFrom(e).subscribe(GB.createOperatorSubscriber(t,function(){return t.complete()},YB.noop)),!t.closed&&r.subscribe(t)})}Hu.takeUntil=ZB;var Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});Gu.takeWhile=void 0;var QB=R,XB=$;function JB(e,r){return r===void 0&&(r=!1),QB.operate(function(t,n){var o=0;t.subscribe(XB.createOperatorSubscriber(n,function(i){var a=e(i,o++);(a||r)&&n.next(i),!a&&n.complete()}))})}Gu.takeWhile=JB;var Ku={};Object.defineProperty(Ku,"__esModule",{value:!0});Ku.tap=void 0;var e3=ie,t3=R,r3=$,n3=je;function o3(e,r,t){var n=e3.isFunction(e)||r||t?{next:e,error:r,complete:t}:e;return n?t3.operate(function(o,i){var a;(a=n.subscribe)===null||a===void 0||a.call(n);var s=!0;o.subscribe(r3.createOperatorSubscriber(i,function(c){var u;(u=n.next)===null||u===void 0||u.call(n,c),i.next(c)},function(){var c;s=!1,(c=n.complete)===null||c===void 0||c.call(n),i.complete()},function(c){var u;s=!1,(u=n.error)===null||u===void 0||u.call(n,c),i.error(c)},function(){var c,u;s&&((c=n.unsubscribe)===null||c===void 0||c.call(n)),(u=n.finalize)===null||u===void 0||u.call(n)}))}):n3.identity}Ku.tap=o3;var ni={};Object.defineProperty(ni,"__esModule",{value:!0});ni.throttle=void 0;var i3=R,mb=$,a3=M;function u3(e,r){return i3.operate(function(t,n){var o=r??{},i=o.leading,a=i===void 0?!0:i,s=o.trailing,c=s===void 0?!1:s,u=!1,l=null,d=null,h=!1,v=function(){d==null||d.unsubscribe(),d=null,c&&(p(),h&&n.complete())},_=function(){d=null,h&&n.complete()},y=function(b){return d=a3.innerFrom(e(b)).subscribe(mb.createOperatorSubscriber(n,v,_))},p=function(){if(u){u=!1;var b=l;l=null,n.next(b),!h&&y(b)}};t.subscribe(mb.createOperatorSubscriber(n,function(b){u=!0,l=b,!(d&&!d.closed)&&(a?p():y(b))},function(){h=!0,!(c&&u&&d&&!d.closed)&&n.complete()}))})}ni.throttle=u3;var Yu={};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.throttleTime=void 0;var s3=nt,c3=ni,l3=Gt;function f3(e,r,t){r===void 0&&(r=s3.asyncScheduler);var n=l3.timer(e,r);return c3.throttle(function(){return n},t)}Yu.throttleTime=f3;var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.TimeInterval=Cn.timeInterval=void 0;var d3=nt,h3=R,v3=$;function _3(e){return e===void 0&&(e=d3.asyncScheduler),h3.operate(function(r,t){var n=e.now();r.subscribe(v3.createOperatorSubscriber(t,function(o){var i=e.now(),a=i-n;n=i,t.next(new RO(o,a))}))})}Cn.timeInterval=_3;var RO=function(){function e(r,t){this.value=r,this.interval=t}return e}();Cn.TimeInterval=RO;var Zu={};Object.defineProperty(Zu,"__esModule",{value:!0});Zu.timeoutWith=void 0;var p3=nt,y3=Bo,b3=Qi;function m3(e,r,t){var n,o,i;if(t=t??p3.async,y3.isValidDate(e)?n=e:typeof e=="number"&&(o=e),r)i=function(){return r};else throw new TypeError("No observable provided to switch to");if(n==null&&o==null)throw new TypeError("No timeout provided.");return b3.timeout({first:n,each:o,scheduler:t,with:i})}Zu.timeoutWith=m3;var Qu={};Object.defineProperty(Qu,"__esModule",{value:!0});Qu.timestamp=void 0;var g3=Zc,O3=Nt;function w3(e){return e===void 0&&(e=g3.dateTimestampProvider),O3.map(function(r){return{value:r,timestamp:e.now()}})}Qu.timestamp=w3;var Xu={};Object.defineProperty(Xu,"__esModule",{value:!0});Xu.window=void 0;var gb=Ee,E3=R,Ob=$,S3=Re,P3=M;function T3(e){return E3.operate(function(r,t){var n=new gb.Subject;t.next(n.asObservable());var o=function(i){n.error(i),t.error(i)};return r.subscribe(Ob.createOperatorSubscriber(t,function(i){return n==null?void 0:n.next(i)},function(){n.complete(),t.complete()},o)),P3.innerFrom(e).subscribe(Ob.createOperatorSubscriber(t,function(){n.complete(),t.next(n=new gb.Subject)},S3.noop,o)),function(){n==null||n.unsubscribe(),n=null}})}Xu.window=T3;var Ju={},C3=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ju,"__esModule",{value:!0});Ju.windowCount=void 0;var wb=Ee,A3=R,I3=$;function R3(e,r){r===void 0&&(r=0);var t=r>0?r:e;return A3.operate(function(n,o){var i=[new wb.Subject],a=0;o.next(i[0].asObservable()),n.subscribe(I3.createOperatorSubscriber(o,function(s){var c,u;try{for(var l=C3(i),d=l.next();!d.done;d=l.next()){var h=d.value;h.next(s)}}catch(y){c={error:y}}finally{try{d&&!d.done&&(u=l.return)&&u.call(l)}finally{if(c)throw c.error}}var v=a-e+1;if(v>=0&&v%t===0&&i.shift().complete(),++a%t===0){var _=new wb.Subject;i.push(_),o.next(_.asObservable())}},function(){for(;i.length>0;)i.shift().complete();o.complete()},function(s){for(;i.length>0;)i.shift().error(s);o.error(s)},function(){i=null}))})}Ju.windowCount=R3;var es={};Object.defineProperty(es,"__esModule",{value:!0});es.windowTime=void 0;var j3=Ee,$3=nt,N3=Ie,k3=R,M3=$,D3=Rt,L3=Te,Eb=$t;function U3(e){for(var r,t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=(r=L3.popScheduler(n))!==null&&r!==void 0?r:$3.asyncScheduler,a=(t=n[0])!==null&&t!==void 0?t:null,s=n[1]||1/0;return k3.operate(function(c,u){var l=[],d=!1,h=function(p){var b=p.window,g=p.subs;b.complete(),g.unsubscribe(),D3.arrRemove(l,p),d&&v()},v=function(){if(l){var p=new N3.Subscription;u.add(p);var b=new j3.Subject,g={window:b,subs:p,seen:0};l.push(g),u.next(b.asObservable()),Eb.executeSchedule(p,i,function(){return h(g)},e)}};a!==null&&a>=0?Eb.executeSchedule(u,i,v,a,!0):d=!0,v();var _=function(p){return l.slice().forEach(p)},y=function(p){_(function(b){var g=b.window;return p(g)}),p(u),u.unsubscribe()};return c.subscribe(M3.createOperatorSubscriber(u,function(p){_(function(b){b.window.next(p),s<=++b.seen&&h(b)})},function(){return y(function(p){return p.complete()})},function(p){return y(function(b){return b.error(p)})})),function(){l=null}})}es.windowTime=U3;var ts={},F3=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ts,"__esModule",{value:!0});ts.windowToggle=void 0;var B3=Ee,x3=Ie,W3=R,Sb=M,mh=$,Pb=Re,V3=Rt;function z3(e,r){return W3.operate(function(t,n){var o=[],i=function(a){for(;0<o.length;)o.shift().error(a);n.error(a)};Sb.innerFrom(e).subscribe(mh.createOperatorSubscriber(n,function(a){var s=new B3.Subject;o.push(s);var c=new x3.Subscription,u=function(){V3.arrRemove(o,s),s.complete(),c.unsubscribe()},l;try{l=Sb.innerFrom(r(a))}catch(d){i(d);return}n.next(s.asObservable()),c.add(l.subscribe(mh.createOperatorSubscriber(n,u,Pb.noop,i)))},Pb.noop)),t.subscribe(mh.createOperatorSubscriber(n,function(a){var s,c,u=o.slice();try{for(var l=F3(u),d=l.next();!d.done;d=l.next()){var h=d.value;h.next(a)}}catch(v){s={error:v}}finally{try{d&&!d.done&&(c=l.return)&&c.call(l)}finally{if(s)throw s.error}}},function(){for(;0<o.length;)o.shift().complete();n.complete()},i,function(){for(;0<o.length;)o.shift().unsubscribe()}))})}ts.windowToggle=z3;var rs={};Object.defineProperty(rs,"__esModule",{value:!0});rs.windowWhen=void 0;var q3=Ee,H3=R,Tb=$,G3=M;function K3(e){return H3.operate(function(r,t){var n,o,i=function(s){n.error(s),t.error(s)},a=function(){o==null||o.unsubscribe(),n==null||n.complete(),n=new q3.Subject,t.next(n.asObservable());var s;try{s=G3.innerFrom(e())}catch(c){i(c);return}s.subscribe(o=Tb.createOperatorSubscriber(t,a,a,i))};a(),r.subscribe(Tb.createOperatorSubscriber(t,function(s){return n.next(s)},function(){n.complete(),t.complete()},i,function(){o==null||o.unsubscribe(),n=null}))})}rs.windowWhen=K3;var ns={},Cb=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Ab=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(ns,"__esModule",{value:!0});ns.withLatestFrom=void 0;var Y3=R,Ib=$,Z3=M,Q3=je,X3=Re,J3=Te;function e6(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=J3.popResultSelector(e);return Y3.operate(function(n,o){for(var i=e.length,a=new Array(i),s=e.map(function(){return!1}),c=!1,u=function(d){Z3.innerFrom(e[d]).subscribe(Ib.createOperatorSubscriber(o,function(h){a[d]=h,!c&&!s[d]&&(s[d]=!0,(c=s.every(Q3.identity))&&(s=null))},X3.noop))},l=0;l<i;l++)u(l);n.subscribe(Ib.createOperatorSubscriber(o,function(d){if(c){var h=Ab([d],Cb(a));o.next(t?t.apply(void 0,Ab([],Cb(h))):h)}}))})}ns.withLatestFrom=e6;var os={};Object.defineProperty(os,"__esModule",{value:!0});os.zipAll=void 0;var t6=Wo,r6=za;function n6(e){return r6.joinAllInternals(t6.zip,e)}os.zipAll=n6;var is={},as={},o6=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},i6=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(as,"__esModule",{value:!0});as.zip=void 0;var a6=Wo,u6=R;function s6(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return u6.operate(function(t,n){a6.zip.apply(void 0,i6([t],o6(e))).subscribe(n)})}as.zip=s6;var c6=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},l6=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(is,"__esModule",{value:!0});is.zipWith=void 0;var f6=as;function d6(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return f6.zip.apply(void 0,l6([],c6(e)))}is.zipWith=d6;(function(e){var r=f&&f.__createBinding||(Object.create?function(Hn,Gn,Kt,Xr){Xr===void 0&&(Xr=Kt),Object.defineProperty(Hn,Xr,{enumerable:!0,get:function(){return Gn[Kt]}})}:function(Hn,Gn,Kt,Xr){Xr===void 0&&(Xr=Kt),Hn[Xr]=Gn[Kt]}),t=f&&f.__exportStar||function(Hn,Gn){for(var Kt in Hn)Kt!=="default"&&!Object.prototype.hasOwnProperty.call(Gn,Kt)&&r(Gn,Hn,Kt)};Object.defineProperty(e,"__esModule",{value:!0}),e.interval=e.iif=e.generate=e.fromEventPattern=e.fromEvent=e.from=e.forkJoin=e.empty=e.defer=e.connectable=e.concat=e.combineLatest=e.bindNodeCallback=e.bindCallback=e.UnsubscriptionError=e.TimeoutError=e.SequenceError=e.ObjectUnsubscribedError=e.NotFoundError=e.EmptyError=e.ArgumentOutOfRangeError=e.firstValueFrom=e.lastValueFrom=e.isObservable=e.identity=e.noop=e.pipe=e.NotificationKind=e.Notification=e.Subscriber=e.Subscription=e.Scheduler=e.VirtualAction=e.VirtualTimeScheduler=e.animationFrameScheduler=e.animationFrame=e.queueScheduler=e.queue=e.asyncScheduler=e.async=e.asapScheduler=e.asap=e.AsyncSubject=e.ReplaySubject=e.BehaviorSubject=e.Subject=e.animationFrames=e.observable=e.ConnectableObservable=e.Observable=void 0,e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.combineLatestWith=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=e.config=e.NEVER=e.EMPTY=e.scheduled=e.zip=e.using=e.timer=e.throwError=e.range=e.race=e.partition=e.pairs=e.onErrorResumeNext=e.of=e.never=e.merge=void 0,e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.pairwise=e.onErrorResumeNextWith=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=e.mergeAll=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=void 0,e.zipWith=e.zipAll=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=void 0;var n=ae;Object.defineProperty(e,"Observable",{enumerable:!0,get:function(){return n.Observable}});var o=Dn;Object.defineProperty(e,"ConnectableObservable",{enumerable:!0,get:function(){return o.ConnectableObservable}});var i=Mn;Object.defineProperty(e,"observable",{enumerable:!0,get:function(){return i.observable}});var a=Yc;Object.defineProperty(e,"animationFrames",{enumerable:!0,get:function(){return a.animationFrames}});var s=Ee;Object.defineProperty(e,"Subject",{enumerable:!0,get:function(){return s.Subject}});var c=pa;Object.defineProperty(e,"BehaviorSubject",{enumerable:!0,get:function(){return c.BehaviorSubject}});var u=Mo;Object.defineProperty(e,"ReplaySubject",{enumerable:!0,get:function(){return u.ReplaySubject}});var l=Do;Object.defineProperty(e,"AsyncSubject",{enumerable:!0,get:function(){return l.AsyncSubject}});var d=eO;Object.defineProperty(e,"asap",{enumerable:!0,get:function(){return d.asap}}),Object.defineProperty(e,"asapScheduler",{enumerable:!0,get:function(){return d.asapScheduler}});var h=nt;Object.defineProperty(e,"async",{enumerable:!0,get:function(){return h.async}}),Object.defineProperty(e,"asyncScheduler",{enumerable:!0,get:function(){return h.asyncScheduler}});var v=nO;Object.defineProperty(e,"queue",{enumerable:!0,get:function(){return v.queue}}),Object.defineProperty(e,"queueScheduler",{enumerable:!0,get:function(){return v.queueScheduler}});var _=oO;Object.defineProperty(e,"animationFrame",{enumerable:!0,get:function(){return _.animationFrame}}),Object.defineProperty(e,"animationFrameScheduler",{enumerable:!0,get:function(){return _.animationFrameScheduler}});var y=bo;Object.defineProperty(e,"VirtualTimeScheduler",{enumerable:!0,get:function(){return y.VirtualTimeScheduler}}),Object.defineProperty(e,"VirtualAction",{enumerable:!0,get:function(){return y.VirtualAction}});var p=ya;Object.defineProperty(e,"Scheduler",{enumerable:!0,get:function(){return p.Scheduler}});var b=Ie;Object.defineProperty(e,"Subscription",{enumerable:!0,get:function(){return b.Subscription}});var g=No;Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return g.Subscriber}});var w=ol;Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return w.Notification}}),Object.defineProperty(e,"NotificationKind",{enumerable:!0,get:function(){return w.NotificationKind}});var E=ar;Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return E.pipe}});var S=Re;Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return S.noop}});var T=je;Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return T.identity}});var P=cl;Object.defineProperty(e,"isObservable",{enumerable:!0,get:function(){return P.isObservable}});var I=ll;Object.defineProperty(e,"lastValueFrom",{enumerable:!0,get:function(){return I.lastValueFrom}});var k=fl;Object.defineProperty(e,"firstValueFrom",{enumerable:!0,get:function(){return k.firstValueFrom}});var D=Ca;Object.defineProperty(e,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return D.ArgumentOutOfRangeError}});var K=qt;Object.defineProperty(e,"EmptyError",{enumerable:!0,get:function(){return K.EmptyError}});var V=Aa;Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return V.NotFoundError}});var H=_a;Object.defineProperty(e,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return H.ObjectUnsubscribedError}});var ue=Ia;Object.defineProperty(e,"SequenceError",{enumerable:!0,get:function(){return ue.SequenceError}});var B=Qi;Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return B.TimeoutError}});var re=ha;Object.defineProperty(e,"UnsubscriptionError",{enumerable:!0,get:function(){return re.UnsubscriptionError}});var x=dl;Object.defineProperty(e,"bindCallback",{enumerable:!0,get:function(){return x.bindCallback}});var X=hl;Object.defineProperty(e,"bindNodeCallback",{enumerable:!0,get:function(){return X.bindNodeCallback}});var z=Ar;Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return z.combineLatest}});var N=Un;Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return N.concat}});var J=vl;Object.defineProperty(e,"connectable",{enumerable:!0,get:function(){return J.connectable}});var fe=Bn;Object.defineProperty(e,"defer",{enumerable:!0,get:function(){return fe.defer}});var Se=At;Object.defineProperty(e,"empty",{enumerable:!0,get:function(){return Se.empty}});var Y=_l;Object.defineProperty(e,"forkJoin",{enumerable:!0,get:function(){return Y.forkJoin}});var Ce=jt;Object.defineProperty(e,"from",{enumerable:!0,get:function(){return Ce.from}});var de=pl;Object.defineProperty(e,"fromEvent",{enumerable:!0,get:function(){return de.fromEvent}});var ot=yl;Object.defineProperty(e,"fromEventPattern",{enumerable:!0,get:function(){return ot.fromEventPattern}});var m=bl;Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return m.generate}});var C=ml;Object.defineProperty(e,"iif",{enumerable:!0,get:function(){return C.iif}});var j=Na;Object.defineProperty(e,"interval",{enumerable:!0,get:function(){return j.interval}});var L=gl;Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return L.merge}});var Z=wv;Object.defineProperty(e,"never",{enumerable:!0,get:function(){return Z.never}});var ke=Lo;Object.defineProperty(e,"of",{enumerable:!0,get:function(){return ke.of}});var mt=ka;Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return mt.onErrorResumeNext}});var Qr=Ol;Object.defineProperty(e,"pairs",{enumerable:!0,get:function(){return Qr.pairs}});var di=wl;Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return di.partition}});var Hf=Pn;Object.defineProperty(e,"race",{enumerable:!0,get:function(){return Hf.race}});var Gf=El;Object.defineProperty(e,"range",{enumerable:!0,get:function(){return Gf.range}});var Kf=Ta;Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return Kf.throwError}});var Yf=Gt;Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return Yf.timer}});var Zf=Sl;Object.defineProperty(e,"using",{enumerable:!0,get:function(){return Zf.using}});var Qf=Wo;Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return Qf.zip}});var Xf=ba;Object.defineProperty(e,"scheduled",{enumerable:!0,get:function(){return Xf.scheduled}});var Jf=At;Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return Jf.EMPTY}});var ed=wv;Object.defineProperty(e,"NEVER",{enumerable:!0,get:function(){return ed.NEVER}}),t(OO,e);var td=Fr;Object.defineProperty(e,"config",{enumerable:!0,get:function(){return td.config}});var rd=Vo;Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return rd.audit}});var nd=Da;Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return nd.auditTime}});var od=La;Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return od.buffer}});var id=Ua;Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return id.bufferCount}});var ad=Fa;Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return ad.bufferTime}});var ud=Ba;Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return ud.bufferToggle}});var sd=xa;Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return sd.bufferWhen}});var cd=Wa;Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return cd.catchError}});var ld=Va;Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return ld.combineAll}});var fd=zo;Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return fd.combineLatestAll}});var dd=Ha;Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return dd.combineLatestWith}});var hd=Fn;Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return hd.concatAll}});var vd=Ho;Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return vd.concatMap}});var _d=Ka;Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return _d.concatMapTo}});var pd=Ya;Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return pd.concatWith}});var yd=xn;Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return yd.connect}});var bd=Qa;Object.defineProperty(e,"count",{enumerable:!0,get:function(){return bd.count}});var md=Xa;Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return md.debounce}});var gd=Ja;Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return gd.debounceTime}});var Od=qr;Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return Od.defaultIfEmpty}});var wd=eu;Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return wd.delay}});var Ed=Go;Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return Ed.delayWhen}});var Sd=tu;Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return Sd.dematerialize}});var Pd=ru;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return Pd.distinct}});var Td=Zo;Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return Td.distinctUntilChanged}});var Cd=nu;Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return Cd.distinctUntilKeyChanged}});var Ad=ou;Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return Ad.elementAt}});var Id=iu;Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return Id.endWith}});var Rd=au;Object.defineProperty(e,"every",{enumerable:!0,get:function(){return Rd.every}});var jd=uu;Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return jd.exhaust}});var $d=Qo;Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return $d.exhaustAll}});var Nd=Xo;Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return Nd.exhaustMap}});var kd=su;Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return kd.expand}});var Md=kt;Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return Md.filter}});var Dd=cu;Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return Dd.finalize}});var Ld=Ir;Object.defineProperty(e,"find",{enumerable:!0,get:function(){return Ld.find}});var Ud=lu;Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return Ud.findIndex}});var Fd=fu;Object.defineProperty(e,"first",{enumerable:!0,get:function(){return Fd.first}});var Bd=du;Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return Bd.groupBy}});var xd=Ko;Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return xd.ignoreElements}});var Wd=hu;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return Wd.isEmpty}});var Vd=vu;Object.defineProperty(e,"last",{enumerable:!0,get:function(){return Vd.last}});var zd=Nt;Object.defineProperty(e,"map",{enumerable:!0,get:function(){return zd.map}});var qd=Yo;Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return qd.mapTo}});var Hd=_u;Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return Hd.materialize}});var Gd=pu;Object.defineProperty(e,"max",{enumerable:!0,get:function(){return Gd.max}});var Kd=zr;Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return Kd.mergeAll}});var Yd=yu;Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return Yd.flatMap}});var Zd=bt;Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return Zd.mergeMap}});var Qd=bu;Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return Qd.mergeMapTo}});var Xd=mu;Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return Xd.mergeScan}});var WE=gu;Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return WE.mergeWith}});var VE=wu;Object.defineProperty(e,"min",{enumerable:!0,get:function(){return VE.min}});var zE=Wn;Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return zE.multicast}});var qE=Wr;Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return qE.observeOn}});var HE=Tn;Object.defineProperty(e,"onErrorResumeNextWith",{enumerable:!0,get:function(){return HE.onErrorResumeNextWith}});var GE=Eu;Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return GE.pairwise}});var KE=Su;Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return KE.pluck}});var YE=Pu;Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return YE.publish}});var ZE=Tu;Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return ZE.publishBehavior}});var QE=Cu;Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return QE.publishLast}});var XE=Au;Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return XE.publishReplay}});var JE=ei;Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return JE.raceWith}});var eS=sr;Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return eS.reduce}});var tS=Iu;Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return tS.repeat}});var rS=Ru;Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return rS.repeatWhen}});var nS=ju;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return nS.retry}});var oS=$u;Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return oS.retryWhen}});var iS=ko;Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return iS.refCount}});var aS=ti;Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return aS.sample}});var uS=Nu;Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return uS.sampleTime}});var sS=ku;Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return sS.scan}});var cS=Mu;Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return cS.sequenceEqual}});var lS=ri;Object.defineProperty(e,"share",{enumerable:!0,get:function(){return lS.share}});var fS=Du;Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return fS.shareReplay}});var dS=Lu;Object.defineProperty(e,"single",{enumerable:!0,get:function(){return dS.single}});var hS=Uu;Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return hS.skip}});var vS=Fu;Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return vS.skipLast}});var _S=Bu;Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return _S.skipUntil}});var pS=xu;Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return pS.skipWhile}});var yS=Wu;Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return yS.startWith}});var bS=Vr;Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return bS.subscribeOn}});var mS=Vu;Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return mS.switchAll}});var gS=Kr;Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return gS.switchMap}});var OS=zu;Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return OS.switchMapTo}});var wS=qu;Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return wS.switchScan}});var ES=Hr;Object.defineProperty(e,"take",{enumerable:!0,get:function(){return ES.take}});var SS=Jo;Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return SS.takeLast}});var PS=Hu;Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return PS.takeUntil}});var TS=Gu;Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return TS.takeWhile}});var CS=Ku;Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return CS.tap}});var AS=ni;Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return AS.throttle}});var IS=Yu;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return IS.throttleTime}});var RS=Gr;Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return RS.throwIfEmpty}});var jS=Cn;Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return jS.timeInterval}});var $S=Qi;Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return $S.timeout}});var NS=Zu;Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return NS.timeoutWith}});var kS=Qu;Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return kS.timestamp}});var MS=qo;Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return MS.toArray}});var DS=Xu;Object.defineProperty(e,"window",{enumerable:!0,get:function(){return DS.window}});var LS=Ju;Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return LS.windowCount}});var US=es;Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return US.windowTime}});var FS=ts;Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return FS.windowToggle}});var BS=rs;Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return BS.windowWhen}});var xS=ns;Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return xS.withLatestFrom}});var WS=os;Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return WS.zipAll}});var VS=is;Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return VS.zipWith}})})(da);var Tl={},Cl={};Object.defineProperty(Cl,"__esModule",{value:!0});Cl.partition=void 0;var h6=Ma,Rb=kt;function v6(e,r){return function(t){return[Rb.filter(e,r)(t),Rb.filter(h6.not(e,r))(t)]}}Cl.partition=v6;var Al={},_6=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},p6=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Al,"__esModule",{value:!0});Al.race=void 0;var y6=ur,b6=ei;function m6(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return b6.raceWith.apply(void 0,p6([],_6(y6.argsOrArgArray(e))))}Al.race=m6;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=e.merge=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.concat=e.combineLatestWith=e.combineLatest=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=void 0,e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.race=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.partition=e.pairwise=e.onErrorResumeNext=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=void 0,e.zipWith=e.zipAll=e.zip=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=void 0;var r=Vo;Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return r.audit}});var t=Da;Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return t.auditTime}});var n=La;Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return n.buffer}});var o=Ua;Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return o.bufferCount}});var i=Fa;Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return i.bufferTime}});var a=Ba;Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return a.bufferToggle}});var s=xa;Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return s.bufferWhen}});var c=Wa;Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return c.catchError}});var u=Va;Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return u.combineAll}});var l=zo;Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return l.combineLatestAll}});var d=Ga;Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return d.combineLatest}});var h=Ha;Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return h.combineLatestWith}});var v=Za;Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return v.concat}});var _=Fn;Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return _.concatAll}});var y=Ho;Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return y.concatMap}});var p=Ka;Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return p.concatMapTo}});var b=Ya;Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return b.concatWith}});var g=xn;Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return g.connect}});var w=Qa;Object.defineProperty(e,"count",{enumerable:!0,get:function(){return w.count}});var E=Xa;Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return E.debounce}});var S=Ja;Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return S.debounceTime}});var T=qr;Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return T.defaultIfEmpty}});var P=eu;Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return P.delay}});var I=Go;Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return I.delayWhen}});var k=tu;Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return k.dematerialize}});var D=ru;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return D.distinct}});var K=Zo;Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return K.distinctUntilChanged}});var V=nu;Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return V.distinctUntilKeyChanged}});var H=ou;Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return H.elementAt}});var ue=iu;Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return ue.endWith}});var B=au;Object.defineProperty(e,"every",{enumerable:!0,get:function(){return B.every}});var re=uu;Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return re.exhaust}});var x=Qo;Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return x.exhaustAll}});var X=Xo;Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return X.exhaustMap}});var z=su;Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return z.expand}});var N=kt;Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return N.filter}});var J=cu;Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return J.finalize}});var fe=Ir;Object.defineProperty(e,"find",{enumerable:!0,get:function(){return fe.find}});var Se=lu;Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return Se.findIndex}});var Y=fu;Object.defineProperty(e,"first",{enumerable:!0,get:function(){return Y.first}});var Ce=du;Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return Ce.groupBy}});var de=Ko;Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return de.ignoreElements}});var ot=hu;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return ot.isEmpty}});var m=vu;Object.defineProperty(e,"last",{enumerable:!0,get:function(){return m.last}});var C=Nt;Object.defineProperty(e,"map",{enumerable:!0,get:function(){return C.map}});var j=Yo;Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return j.mapTo}});var L=_u;Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return L.materialize}});var Z=pu;Object.defineProperty(e,"max",{enumerable:!0,get:function(){return Z.max}});var ke=Ou;Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return ke.merge}});var mt=zr;Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return mt.mergeAll}});var Qr=yu;Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return Qr.flatMap}});var di=bt;Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return di.mergeMap}});var Hf=bu;Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return Hf.mergeMapTo}});var Gf=mu;Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return Gf.mergeScan}});var Kf=gu;Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return Kf.mergeWith}});var Yf=wu;Object.defineProperty(e,"min",{enumerable:!0,get:function(){return Yf.min}});var Zf=Wn;Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return Zf.multicast}});var Qf=Wr;Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return Qf.observeOn}});var Xf=Tn;Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return Xf.onErrorResumeNext}});var Jf=Eu;Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return Jf.pairwise}});var ed=Cl;Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return ed.partition}});var td=Su;Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return td.pluck}});var rd=Pu;Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return rd.publish}});var nd=Tu;Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return nd.publishBehavior}});var od=Cu;Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return od.publishLast}});var id=Au;Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return id.publishReplay}});var ad=Al;Object.defineProperty(e,"race",{enumerable:!0,get:function(){return ad.race}});var ud=ei;Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return ud.raceWith}});var sd=sr;Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return sd.reduce}});var cd=Iu;Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return cd.repeat}});var ld=Ru;Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return ld.repeatWhen}});var fd=ju;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return fd.retry}});var dd=$u;Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return dd.retryWhen}});var hd=ko;Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return hd.refCount}});var vd=ti;Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return vd.sample}});var _d=Nu;Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return _d.sampleTime}});var pd=ku;Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return pd.scan}});var yd=Mu;Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return yd.sequenceEqual}});var bd=ri;Object.defineProperty(e,"share",{enumerable:!0,get:function(){return bd.share}});var md=Du;Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return md.shareReplay}});var gd=Lu;Object.defineProperty(e,"single",{enumerable:!0,get:function(){return gd.single}});var Od=Uu;Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return Od.skip}});var wd=Fu;Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return wd.skipLast}});var Ed=Bu;Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return Ed.skipUntil}});var Sd=xu;Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return Sd.skipWhile}});var Pd=Wu;Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return Pd.startWith}});var Td=Vr;Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return Td.subscribeOn}});var Cd=Vu;Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return Cd.switchAll}});var Ad=Kr;Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return Ad.switchMap}});var Id=zu;Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return Id.switchMapTo}});var Rd=qu;Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return Rd.switchScan}});var jd=Hr;Object.defineProperty(e,"take",{enumerable:!0,get:function(){return jd.take}});var $d=Jo;Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return $d.takeLast}});var Nd=Hu;Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return Nd.takeUntil}});var kd=Gu;Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return kd.takeWhile}});var Md=Ku;Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return Md.tap}});var Dd=ni;Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return Dd.throttle}});var Ld=Yu;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return Ld.throttleTime}});var Ud=Gr;Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return Ud.throwIfEmpty}});var Fd=Cn;Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return Fd.timeInterval}});var Bd=Qi;Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return Bd.timeout}});var xd=Zu;Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return xd.timeoutWith}});var Wd=Qu;Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return Wd.timestamp}});var Vd=qo;Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return Vd.toArray}});var zd=Xu;Object.defineProperty(e,"window",{enumerable:!0,get:function(){return zd.window}});var qd=Ju;Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return qd.windowCount}});var Hd=es;Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return Hd.windowTime}});var Gd=ts;Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return Gd.windowToggle}});var Kd=rs;Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return Kd.windowWhen}});var Yd=ns;Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return Yd.withLatestFrom}});var Zd=as;Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return Zd.zip}});var Qd=os;Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return Qd.zipAll}});var Xd=is;Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return Xd.zipWith}})})(Tl);var oi={},co=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},lo=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(oi,"__esModule",{value:!0});var g6=W,dn=da,nn=Tl,mi={READY:0,STREAMING:1,COMPLETED:2},O6=function(){function e(r,t){var n=r.pipe((0,nn.publishReplay)(1),(0,nn.refCount)());this._result=n,this._keys=n.pipe((0,nn.mergeMap)(function(o){return(0,dn.from)(o.keys())}),(0,nn.publishReplay)(1),(0,nn.refCount)()),this._records=void 0,this._controls=new jO,this._summary=new dn.ReplaySubject,this._state=t||mi.READY}return e.prototype.keys=function(){return this._keys},e.prototype.records=function(){var r=this,t=this._result.pipe((0,nn.mergeMap)(function(n){return new dn.Observable(function(o){return r._startStreaming({result:n,recordsObserver:o})})}));return t.push=function(){return r._push()},t},e.prototype.consume=function(){var r=this;return this._result.pipe((0,nn.mergeMap)(function(t){return new dn.Observable(function(n){return r._startStreaming({result:t,summaryObserver:n})})}))},e.prototype.pause=function(){this._controls.pause()},e.prototype.resume=function(){return this._controls.resume()},e.prototype.push=function(){return this._controls.push()},e.prototype._startStreaming=function(r){var t=r===void 0?{}:r,n=t.result,o=t.recordsObserver,i=o===void 0?null:o,a=t.summaryObserver,s=a===void 0?null:a,c=[];return s&&c.push(this._summary.subscribe(s)),this._state<mi.STREAMING?(this._state=mi.STREAMING,this._setupRecordsStream(n),i?c.push(this._records.subscribe(i)):n._cancel(),c.push({unsubscribe:function(){n._cancel&&n._cancel()}})):i&&i.error((0,g6.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){c.forEach(function(u){return u.unsubscribe()})}},e.prototype._toObservable=function(){var r=this;function t(n){return new dn.Observable(function(o){o.next(n),o.complete()})}return new dn.Observable(function(n){r._result.subscribe({complete:function(){return n.complete()},next:function(o){return n.next(new e(t(o)),r._state)},error:function(o){return n.error(o)}})})},e.prototype._setupRecordsStream=function(r){var t=this;return this._records?this._records:(this._records=w6(r[Symbol.asyncIterator](),{complete:function(){return co(t,void 0,void 0,function(){var n,o;return lo(this,function(i){switch(i.label){case 0:return this._state=mi.COMPLETED,o=(n=this._summary).next,[4,r.summary()];case 1:return o.apply(n,[i.sent()]),this._summary.complete(),[2]}})})},error:function(n){t._state=mi.COMPLETED,t._summary.error(n)}},this._controls),this._records)},e}();oi.default=O6;function w6(e,r,t){var n=this;t===void 0&&(t=new jO);var o=new dn.Subject,i=function(s){return co(n,void 0,void 0,function(){var c,u,l,d;return lo(this,function(h){switch(h.label){case 0:return h.trys.push([0,2,3,4]),t.pushing=!0,[4,s];case 1:return c=h.sent(),u=c.done,l=c.value,u?(o.complete(),r.complete()):(o.next(l),t.paused||i(e.next()).catch(function(){})),[3,4];case 2:return d=h.sent(),o.error(d),r.error(d),[3,4];case 3:return t.pushing=!1,[7];case 4:return[2]}})})};function a(s){return co(this,void 0,void 0,function(){return lo(this,function(c){switch(c.label){case 0:return[4,i(e.next(s))];case 1:return c.sent(),[2]}})})}return t.pusher=a,a(),o}var jO=function(){function e(r){r===void 0&&(r=function(){return co(t,void 0,void 0,function(){return lo(this,function(n){return[2]})})});var t=this;this._paused=!1,this._pushing=!1,this._push=r}return e.prototype.pause=function(){this._paused=!0},Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushing",{get:function(){return this._pushing},set:function(r){this._pushing=r},enumerable:!1,configurable:!0}),e.prototype.resume=function(){return co(this,void 0,void 0,function(){var r;return lo(this,function(t){switch(t.label){case 0:return r=this._paused,this._paused=!1,r&&!this._pushing?[4,this._push()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.push=function(){return co(this,void 0,void 0,function(){return lo(this,function(r){switch(r.label){case 0:return this.pause(),[4,this._push()];case 1:return[2,r.sent()]}})})},Object.defineProperty(e.prototype,"pusher",{get:function(){return this._push},set:function(r){this._push=r},enumerable:!1,configurable:!0}),e}(),us={},$O=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(us,"__esModule",{value:!0});var Ps=da,E6=$O(oi);$O(W);var S6=function(){function e(r){this._txc=r}return e.prototype.run=function(r,t){var n=this;return new E6.default(new Ps.Observable(function(o){try{o.next(n._txc.run(r,t)),o.complete()}catch(i){o.error(i)}return function(){}}))},e.prototype.commit=function(){var r=this;return new Ps.Observable(function(t){r._txc.commit().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype.rollback=function(){var r=this;return new Ps.Observable(function(t){r._txc.rollback().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype.isOpen=function(){return this._txc.isOpen()},e.prototype.close=function(){var r=this;return new Ps.Observable(function(t){r._txc.close().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e}();us.default=S6;var Il={},NO=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Il,"__esModule",{value:!0});NO(oi);NO(us);var P6=function(){function e(r){var t=r.run;this._run=t}return e.fromTransaction=function(r){return new e({run:r.run.bind(r)})},e.prototype.run=function(r,t){return this._run(r,t)},e}();Il.default=P6;var A_={};Object.defineProperty(A_,"__esModule",{value:!0});var cc=W,gh=da,Oh=Tl;cc.internal.logger.Logger;var T6=cc.error.SERVICE_UNAVAILABLE,jb=30*1e3,$b=1e3,Nb=2,kb=.2,C6=function(){function e(r){var t=r===void 0?{}:r,n=t.maxRetryTimeout,o=n===void 0?jb:n,i=t.initialDelay,a=i===void 0?$b:i,s=t.delayMultiplier,c=s===void 0?Nb:s,u=t.delayJitter,l=u===void 0?kb:u,d=t.logger,h=d===void 0?null:d;this._maxRetryTimeout=Ts(o,jb),this._initialDelay=Ts(a,$b),this._delayMultiplier=Ts(c,Nb),this._delayJitter=Ts(l,kb),this._logger=h}return e.prototype.retry=function(r){var t=this;return r.pipe((0,Oh.retryWhen)(function(n){var o=[],i=Date.now(),a=1,s=t._initialDelay;return n.pipe((0,Oh.mergeMap)(function(c){if(!(0,cc.isRetriableError)(c))return(0,gh.throwError)(function(){return c});if(o.push(c),a>=2&&Date.now()-i>=t._maxRetryTimeout){var u=(0,cc.newError)("Failed after retried for ".concat(a," times in ").concat(t._maxRetryTimeout," ms. Make sure that your database is online and retry again."),T6);return u.seenErrors=o,(0,gh.throwError)(function(){return u})}var l=t._computeNextDelay(s);return s=s*t._delayMultiplier,a++,t._logger&&t._logger.warn("Transaction failed and will be retried in ".concat(l)),(0,gh.of)(1).pipe((0,Oh.delay)(l))}))}))},e.prototype._computeNextDelay=function(r){var t=r*this._delayJitter;return r-t+2*t*Math.random()},e}();A_.default=C6;function Ts(e,r){return e||e===0?e:r}var Rl=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gc,"__esModule",{value:!0});var on=da,gi=Tl,A6=Rl(oi),kO=W,I6=Rl(us),R6=Rl(Il),j6=Rl(A_),I_=kO.internal.constants,Mb=I_.ACCESS_MODE_READ,Db=I_.ACCESS_MODE_WRITE,Lb=I_.TELEMETRY_APIS,Cs=kO.internal.txConfig.TxConfig,$6=function(){function e(r){var t=r===void 0?{}:r,n=t.session,o=t.config,i=t.log;this._session=n,this._retryLogic=N6(o),this._log=i}return e.prototype.run=function(r,t,n){var o=this;return new A6.default(new on.Observable(function(i){try{i.next(o._session.run(r,t,n)),i.complete()}catch(a){i.error(a)}return function(){}}))},e.prototype.beginTransaction=function(r){return this._beginTransaction(this._session._mode,r,{api:Lb.UNMANAGED_TRANSACTION})},e.prototype.readTransaction=function(r,t){return this._runTransaction(Mb,r,t)},e.prototype.writeTransaction=function(r,t){return this._runTransaction(Db,r,t)},e.prototype.executeRead=function(r,t){return this._executeInTransaction(Mb,r,t)},e.prototype.executeWrite=function(r,t){return this._executeInTransaction(Db,r,t)},e.prototype._executeInTransaction=function(r,t,n){var o=function(i){return new R6.default({run:i.run.bind(i)})};return this._runTransaction(r,t,n,o)},e.prototype.close=function(){var r=this;return new on.Observable(function(t){r._session.close().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype.lastBookmark=function(){return this.lastBookmarks()},e.prototype.lastBookmarks=function(){return this._session.lastBookmarks()},e.prototype._beginTransaction=function(r,t,n){var o=this,i=Cs.empty();return t&&(i=new Cs(t,this._log)),new on.Observable(function(a){try{o._session._beginTransaction(r,i,n).then(function(s){a.next(new I6.default(s)),a.complete()}).catch(function(s){return a.error(s)})}catch(s){a.error(s)}return function(){}})},e.prototype._runTransaction=function(r,t,n,o){var i=this;o===void 0&&(o=function(c){return c});var a=Cs.empty();n&&(a=new Cs(n));var s={apiTelemetryConfig:{api:Lb.MANAGED_TRANSACTION,onTelemetrySuccess:function(){s.apiTelemetryConfig=void 0}}};return this._retryLogic.retry((0,on.of)(1).pipe((0,gi.mergeMap)(function(){return i._beginTransaction(r,a,s.apiTelemetryConfig)}),(0,gi.mergeMap)(function(c){return(0,on.defer)(function(){try{return t(o(c))}catch(u){return(0,on.throwError)(function(){return u})}}).pipe((0,gi.catchError)(function(u){return c.rollback().pipe((0,gi.concatWith)((0,on.throwError)(function(){return u})))}),(0,gi.concatWith)(c.commit()))})))},e}();Gc.default=$6;function N6(e){var r=e&&e.maxTransactionRetryTime?e.maxTransactionRetryTime:null;return new j6.default({maxRetryTimeout:r})}var k6=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),M6=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(er,"__esModule",{value:!0});er.WRITE=er.READ=er.Driver=void 0;var jl=W,D6=M6(Gc),Ub=jl.internal.constants.FETCH_ALL,L6=jl.driver.READ,MO=jl.driver.WRITE;er.READ=L6;er.WRITE=MO;var DO=function(e){k6(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.rxSession=function(t){var n=t===void 0?{}:t,o=n.defaultAccessMode,i=o===void 0?MO:o,a=n.bookmarks,s=n.database,c=s===void 0?"":s,u=n.fetchSize,l=n.impersonatedUser,d=n.bookmarkManager,h=n.notificationFilter,v=n.auth;return new D6.default({session:this._newSession({defaultAccessMode:i,bookmarkOrBookmarks:a,database:c,impersonatedUser:l,auth:v,reactive:!1,fetchSize:U6(u,this._config.fetchSize),bookmarkManager:d,notificationFilter:h,log:this._log}),config:this._config,log:this._log})},r}(jl.Driver);er.Driver=DO;function U6(e,r){var t=parseInt(e,10);if(t>0||t===Ub)return t;if(t===0||t<0)throw new Error("The fetch size can only be a positive value or ".concat(Ub," for ALL. However fetchSize = ").concat(t));return r}er.default=DO;var R_={};Object.defineProperty(R_,"__esModule",{value:!0});R_.default="5.28.1";var LO={},Rr={},$l={};Object.defineProperty($l,"__esModule",{value:!0});var F6=function(){function e(){}return e.prototype.selectReader=function(r){throw new Error("Abstract function")},e.prototype.selectWriter=function(r){throw new Error("Abstract function")},e}();$l.default=F6;var j_={},$_={};Object.defineProperty($_,"__esModule",{value:!0});var B6=function(){function e(r){this._offset=r||0}return e.prototype.next=function(r){if(r===0)return-1;var t=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),t%r},e}();$_.default=B6;var x6=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),UO=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(j_,"__esModule",{value:!0});var Fb=UO($_),W6=UO($l),V6=function(e){x6(r,e);function r(t){var n=e.call(this)||this;return n._readersIndex=new Fb.default,n._writersIndex=new Fb.default,n._connectionPool=t,n}return r.prototype.selectReader=function(t){return this._select(t,this._readersIndex)},r.prototype.selectWriter=function(t){return this._select(t,this._writersIndex)},r.prototype._select=function(t,n){var o=t.length;if(o===0)return null;var i=n.next(o),a=i,s=null,c=Number.MAX_SAFE_INTEGER;do{var u=t[a],l=this._connectionPool.activeResourceCount(u);l<c&&(s=u,c=l),a===o-1?a=0:a++}while(a!==i);return s},r}(W6.default);j_.default=V6;var FO=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rr,"__esModule",{value:!0});Rr.LeastConnectedLoadBalancingStrategy=Rr.LoadBalancingStrategy=void 0;var z6=FO($l);Rr.LoadBalancingStrategy=z6.default;var BO=FO(j_);Rr.LeastConnectedLoadBalancingStrategy=BO.default;Rr.default=BO.default;var N_={},k_={},Vn={},Er={},M_={},cr={},zn={},Nl={},q6=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Nl,"__esModule",{value:!0});var xO=function(){function e(r){this.position=0,this.length=r}return e.prototype.getUInt8=function(r){throw new Error("Not implemented")},e.prototype.getInt8=function(r){throw new Error("Not implemented")},e.prototype.getFloat64=function(r){throw new Error("Not implemented")},e.prototype.getVarInt=function(r){throw new Error("Not implemented")},e.prototype.putUInt8=function(r,t){throw new Error("Not implemented")},e.prototype.putInt8=function(r,t){throw new Error("Not implemented")},e.prototype.putFloat64=function(r,t){throw new Error("Not implemented")},e.prototype.getInt16=function(r){return this.getInt8(r)<<8|this.getUInt8(r+1)},e.prototype.getUInt16=function(r){return this.getUInt8(r)<<8|this.getUInt8(r+1)},e.prototype.getInt32=function(r){return this.getInt8(r)<<24|this.getUInt8(r+1)<<16|this.getUInt8(r+2)<<8|this.getUInt8(r+3)},e.prototype.getUInt32=function(r){return this.getUInt8(r)<<24|this.getUInt8(r+1)<<16|this.getUInt8(r+2)<<8|this.getUInt8(r+3)},e.prototype.getInt64=function(r){return this.getInt8(r)<<56|this.getUInt8(r+1)<<48|this.getUInt8(r+2)<<40|this.getUInt8(r+3)<<32|this.getUInt8(r+4)<<24|this.getUInt8(r+5)<<16|this.getUInt8(r+6)<<8|this.getUInt8(r+7)},e.prototype.getSlice=function(r,t){return new H6(r,t,this)},e.prototype.putInt16=function(r,t){this.putInt8(r,t>>8),this.putUInt8(r+1,t&255)},e.prototype.putUInt16=function(r,t){this.putUInt8(r,t>>8&255),this.putUInt8(r+1,t&255)},e.prototype.putInt32=function(r,t){this.putInt8(r,t>>24),this.putUInt8(r+1,t>>16&255),this.putUInt8(r+2,t>>8&255),this.putUInt8(r+3,t&255)},e.prototype.putUInt32=function(r,t){this.putUInt8(r,t>>24&255),this.putUInt8(r+1,t>>16&255),this.putUInt8(r+2,t>>8&255),this.putUInt8(r+3,t&255)},e.prototype.putInt64=function(r,t){this.putInt8(r,t>>48),this.putUInt8(r+1,t>>42&255),this.putUInt8(r+2,t>>36&255),this.putUInt8(r+3,t>>30&255),this.putUInt8(r+4,t>>24&255),this.putUInt8(r+5,t>>16&255),this.putUInt8(r+6,t>>8&255),this.putUInt8(r+7,t&255)},e.prototype.putVarInt=function(r,t){for(var n=0;t>1;){var o=t%128;t>=128&&(o+=128),t=t/128,this.putUInt8(r+n,o),n+=1}return n},e.prototype.putBytes=function(r,t){for(var n=0,o=t.remaining();n<o;n++)this.putUInt8(r+n,t.readUInt8())},e.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},e.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},e.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},e.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},e.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},e.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},e.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},e.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},e.prototype.readVarInt=function(){var r=this.getVarInt(this.position);return this._updatePos(r.length),r.value},e.prototype.writeUInt8=function(r){this.putUInt8(this._updatePos(1),r)},e.prototype.writeInt8=function(r){this.putInt8(this._updatePos(1),r)},e.prototype.writeInt16=function(r){this.putInt16(this._updatePos(2),r)},e.prototype.writeInt32=function(r){this.putInt32(this._updatePos(4),r)},e.prototype.writeUInt32=function(r){this.putUInt32(this._updatePos(4),r)},e.prototype.writeInt64=function(r){this.putInt64(this._updatePos(8),r)},e.prototype.writeFloat64=function(r){this.putFloat64(this._updatePos(8),r)},e.prototype.writeVarInt=function(r){var t=this.putVarInt(this.position,r);this._updatePos(t)},e.prototype.writeBytes=function(r){this.putBytes(this._updatePos(r.remaining()),r)},e.prototype.readSlice=function(r){return this.getSlice(this._updatePos(r),r)},e.prototype._updatePos=function(r){var t=this.position;return this.position+=r,t},e.prototype.remaining=function(){return this.length-this.position},e.prototype.hasRemaining=function(){return this.remaining()>0},e.prototype.reset=function(){this.position=0},e.prototype.toString=function(){return this.constructor.name+"( position="+this.position+` )
  `+this.toHex()},e.prototype.toHex=function(){for(var r="",t=0;t<this.length;t++){var n=this.getUInt8(t).toString(16);n.length===1&&(n="0"+n),r+=n,t!==this.length-1&&(r+=" ")}return r},e}();Nl.default=xO;var H6=function(e){q6(r,e);function r(t,n,o){var i=e.call(this,n)||this;return i._start=t,i._inner=o,i}return r.prototype.putUInt8=function(t,n){this._inner.putUInt8(this._start+t,n)},r.prototype.getUInt8=function(t){return this._inner.getUInt8(this._start+t)},r.prototype.putInt8=function(t,n){this._inner.putInt8(this._start+t,n)},r.prototype.putFloat64=function(t,n){this._inner.putFloat64(this._start+t,n)},r.prototype.getInt8=function(t){return this._inner.getInt8(this._start+t)},r.prototype.getFloat64=function(t){return this._inner.getFloat64(this._start+t)},r}(xO),G6=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zn,"__esModule",{value:!0});zn.BaseBuffer=void 0;var WO=G6(Nl);zn.BaseBuffer=WO.default;zn.default=WO.default;var K6=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),VO=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cr,"__esModule",{value:!0});cr.alloc=void 0;var As=VO(gg),Y6=VO(zn),zO=function(e){K6(r,e);function r(t){var n=this,o=Q6(t);return n=e.call(this,o.length)||this,n._buffer=o,n}return r.prototype.getUInt8=function(t){return this._buffer.readUInt8(t)},r.prototype.getInt8=function(t){return this._buffer.readInt8(t)},r.prototype.getFloat64=function(t){return this._buffer.readDoubleBE(t)},r.prototype.getVarInt=function(t){for(var n=0,o=this._buffer.readInt8(t+n),i=o%128;o/128>=1;)n+=1,o=this._buffer.readInt8(t+n),i+=o%128;return{length:n+1,value:i}},r.prototype.putUInt8=function(t,n){this._buffer.writeUInt8(n,t)},r.prototype.putInt8=function(t,n){this._buffer.writeInt8(n,t)},r.prototype.putFloat64=function(t,n){this._buffer.writeDoubleBE(n,t)},r.prototype.putBytes=function(t,n){if(n instanceof r){var o=Math.min(n.length-n.position,this.length-t);n._buffer.copy(this._buffer,t,n.position,n.position+o),n.position+=o}else e.prototype.putBytes.call(this,t,n)},r.prototype.getSlice=function(t,n){return new r(this._buffer.slice(t,t+n))},r}(Y6.default);cr.default=zO;function Z6(e){return new zO(e)}cr.alloc=Z6;function Q6(e){return e instanceof As.default.Buffer?e:typeof e=="number"&&typeof As.default.Buffer.alloc=="function"?As.default.Buffer.alloc(e):new As.default.Buffer(e)}var X6=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(M_,"__esModule",{value:!0});var Bb=X6(cr),Jn=W,qO=Jn.internal.util,HO=qO.ENCRYPTION_OFF,J6=qO.ENCRYPTION_ON,xb=1,ex=3,tx=function(){function e(r,t,n){t===void 0&&(t=fx),n===void 0&&(n=function(u){return new WebSocket(u)});var o=this;this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=r,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._receiveTimeoutId=null,this._closingPromise=null;var i=ax(r,t),a=i.scheme,s=i.error;if(s){this._error=s;return}this._ws=rx(a,r.address,n),this._ws.binaryType="arraybuffer";var c=this;this._ws.onclose=function(u){u&&!u.wasClean&&c._handleConnectionError(),c._open=!1},this._ws.onopen=function(){c._clearConnectionTimeout();var u=c._pending;c._pending=null;for(var l=0;l<u.length;l++)c.write(u[l])},this._ws.onmessage=function(u){if(o._resetTimeout(),c.onmessage){var l=new Bb.default(u.data);c.onmessage(l)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}return e.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired){this._error=(0,Jn.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),this.onerror&&this.onerror(this._error);return}this._open&&!this._timedout&&(this._error=(0,Jn.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},e.prototype.write=function(r){if(this._pending!==null)this._pending.push(r);else if(r instanceof Bb.default)try{this._ws.send(r._buffer)}catch(t){if(this._ws.readyState!==xb)this._handleConnectionError();else throw t}else throw(0,Jn.newError)("Don't know how to send buffer: "+r)},e.prototype.close=function(){var r=this;return this._closingPromise===null&&(this._closingPromise=new Promise(function(t,n){r._clearConnectionTimeout(),r._ws&&r._ws.readyState!==ex?(r._open=!1,r.stopReceiveTimeout(),r._ws.onclose=function(){t()},r._ws.close()):t()})),this._closingPromise},e.prototype.setupReceiveTimeout=function(r){this._receiveTimeout=r},e.prototype.stopReceiveTimeout=function(){this._receiveTimeout!==null&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,this._receiveTimeoutId!=null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=null)},e.prototype.startReceiveTimeout=function(){this._open&&this._receiveTimeout!==null&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._resetTimeout())},e.prototype._resetTimeout=function(){var r=this;this._receiveTimeoutStarted&&(this._receiveTimeoutId!==null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=setTimeout(function(){r._receiveTimeoutId=null,r._timedout=!0,r.stopReceiveTimeout(),r._error=(0,Jn.newError)("Connection lost. Server didn't respond in ".concat(r._receiveTimeout,"ms"),r._config.connectionErrorCode),r.close(),r.onerror&&r.onerror(r._error)},this._receiveTimeout))},e.prototype._setupConnectionTimeout=function(){var r=this,t=this._config.connectionTimeout;if(t){var n=this._ws;return setTimeout(function(){n.readyState!==xb&&(r._connectionTimeoutFired=!0,n.close())},t)}return null},e.prototype._clearConnectionTimeout=function(){var r=this._connectionTimeoutId;(r||r===0)&&(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(r))},e}();M_.default=tx;function rx(e,r,t){var n=e+"://"+r.asHostPort();try{return t(n)}catch(i){if(nx(i,r)){var o=ix(e,r);return t(o)}else throw i}}function nx(e,r){return e.name==="SyntaxError"&&ox(r.asHostPort())}function ox(e){return e.charAt(0)==="["&&e.indexOf("]")!==-1}function ix(e,r){var t=r.host().replace(/:/g,"-"),n=t.replace("%","s"),o=n+".ipv6-literal.net";return"".concat(e,"://").concat(o,":").concat(r.port())}function ax(e,r){var t=ux(e),n=sx(e),o=e.trust,i=cx(r);if(lx(t,n,i),n)return{scheme:"ws",error:null};if(i)return{scheme:"wss",error:null};if(t){if(!o||o==="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES")return{scheme:"wss",error:null};var a=(0,Jn.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+o+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+HO+'"` in the driver configuration.');return{scheme:null,error:a}}return{scheme:"ws",error:null}}function ux(e){return e.encrypted===!0||e.encrypted===J6}function sx(e){return e.encrypted===!1||e.encrypted===HO}function cx(e){var r=typeof e=="function"?e():"";return r&&r.toLowerCase().indexOf("https")>=0}function lx(e,r,t){t===null||(e&&!t?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):r&&t&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}function fx(){return typeof window<"u"&&window.location?window.location.protocol:null}var D_={},dx=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(D_,"__esModule",{value:!0});var hx=W,vx=hx.internal.resolver.BaseHostNameResolver,_x=function(e){dx(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.resolve=function(t){return this._resolveToItself(t)},r}(vx);D_.default=_x;var L_={},px=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},yx=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(L_,"__esModule",{value:!0});L_.default={load:function(e){return px(this,void 0,void 0,function(){return yx(this,function(r){return[2,e]})})}};var U_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Er,"__esModule",{value:!0});Er.ClientCertificatesLoader=Er.HostNameResolver=Er.Channel=void 0;var bx=U_(M_),mx=U_(D_),gx=U_(L_);Er.Channel=bx.default;Er.HostNameResolver=mx.default;Er.ClientCertificatesLoader=gx.default;var mo={},F_={},Ox=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(F_,"__esModule",{value:!0});var wx=zn,Ex=cr,Sx=function(e){Ox(r,e);function r(t){for(var n=this,o=0,i=0;i<t.length;i++)o+=t[i].length;return n=e.call(this,o)||this,n._buffers=t,n}return r.prototype.getUInt8=function(t){for(var n=0;n<this._buffers.length;n++){var o=this._buffers[n];if(t>=o.length)t-=o.length;else return o.getUInt8(t)}},r.prototype.getInt8=function(t){for(var n=0;n<this._buffers.length;n++){var o=this._buffers[n];if(t>=o.length)t-=o.length;else return o.getInt8(t)}},r.prototype.getFloat64=function(t){for(var n=(0,Ex.alloc)(8),o=0;o<8;o++)n.putUInt8(o,this.getUInt8(t+o));return n.getFloat64(0)},r}(wx.BaseBuffer);F_.default=Sx;var Px=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),GO=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(mo,"__esModule",{value:!0});mo.Dechunker=mo.Chunker=void 0;var Tx=GO(Nl),Wb=cr,Cx=GO(F_),Is=2,Ax=0,Ix=1400,Rx=function(e){Px(r,e);function r(t,n){var o=e.call(this,0)||this;return o._bufferSize=n||Ix,o._ch=t,o._buffer=(0,Wb.alloc)(o._bufferSize),o._currentChunkStart=0,o._chunkOpen=!1,o}return r.prototype.putUInt8=function(t,n){this._ensure(1),this._buffer.writeUInt8(n)},r.prototype.putInt8=function(t,n){this._ensure(1),this._buffer.writeInt8(n)},r.prototype.putFloat64=function(t,n){this._ensure(8),this._buffer.writeFloat64(n)},r.prototype.putBytes=function(t,n){for(;n.remaining()>0;)this._ensure(1),this._buffer.remaining()>n.remaining()?this._buffer.writeBytes(n):this._buffer.writeBytes(n.readSlice(this._buffer.remaining()));return this},r.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var t=this._buffer;this._buffer=null,this._ch.write(t.getSlice(0,t.position)),this._buffer=(0,Wb.alloc)(this._bufferSize),this._chunkOpen=!1}return this},r.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<Is&&this.flush(),this._buffer.writeInt16(Ax)},r.prototype._ensure=function(t){var n=this._chunkOpen?t:t+Is;this._buffer.remaining()<n&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+Is,this._chunkOpen=!0)},r.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var t=this._buffer.position-(this._currentChunkStart+Is);this._buffer.putUInt16(this._currentChunkStart,t),this._chunkOpen=!1}},r}(Tx.default);mo.Chunker=Rx;var jx=function(){function e(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return e.prototype.AWAITING_CHUNK=function(r){return r.remaining()>=2?this._onHeader(r.readUInt16()):(this._partialChunkHeader=r.readUInt8()<<8,this.IN_HEADER)},e.prototype.IN_HEADER=function(r){return this._onHeader((this._partialChunkHeader|r.readUInt8())&65535)},e.prototype.IN_CHUNK=function(r){return this._chunkSize<=r.remaining()?(this._currentMessage.push(r.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=r.remaining(),this._currentMessage.push(r.readSlice(r.remaining())),this.IN_CHUNK)},e.prototype.CLOSED=function(r){},e.prototype._onHeader=function(r){if(r===0){var t=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:t=this._currentMessage[0];break;default:t=new Cx.default(this._currentMessage);break}return this._currentMessage=[],this.onmessage(t),this.AWAITING_CHUNK}else return this._chunkSize=r,this.IN_CHUNK},e.prototype.write=function(r){for(;r.hasRemaining();)this._state=this._state(r)},e}();mo.Dechunker=jx;var B_={};Object.defineProperty(B_,"__esModule",{value:!0});var kl=W,KO=kl.internal.util,$x=KO.ENCRYPTION_OFF,Nx=KO.ENCRYPTION_ON,kx=kl.error.SERVICE_UNAVAILABLE,Vb=[null,void 0,!0,!1,Nx,$x],zb=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"],Mx=function(){function e(r,t,n,o){this.address=r,this.encrypted=Dx(t),this.trust=Lx(t),this.trustedCertificates=Ux(t),this.knownHostsPath=Fx(t),this.connectionErrorCode=n||kx,this.connectionTimeout=t.connectionTimeout,this.clientCertificate=o}return e}();B_.default=Mx;function Dx(e){var r=e.encrypted;if(Vb.indexOf(r)===-1)throw(0,kl.newError)("Illegal value of the encrypted setting ".concat(r,". Expected one of ").concat(Vb));return r}function Lx(e){var r=e.trust;if(zb.indexOf(r)===-1)throw(0,kl.newError)("Illegal value of the trust setting ".concat(r,". Expected one of ").concat(zb));return r}function Ux(e){return e.trustedCertificates||[]}function Fx(e){return e.knownHosts||null}var x_={},YO=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(x_,"__esModule",{value:!0});var Bx=YO(cr),xx=W,wh=YO(gg),Wx=HS(),qb=new Wx.StringDecoder("utf8");function Vx(e){return new Bx.default(Kx(e))}function zx(e,r){if(Object.prototype.hasOwnProperty.call(e,"_buffer"))return qx(e,r);if(Object.prototype.hasOwnProperty.call(e,"_buffers"))return Hx(e,r);throw(0,xx.newError)("Don't know how to decode strings from '".concat(e,"'"))}function qx(e,r){var t=e.position,n=t+r;return e.position=Math.min(n,e.length),e._buffer.toString("utf8",t,n)}function Hx(e,r){return Gx(e,r,function(t){return qb.write(t._buffer)},function(){return qb.end()})}function Gx(e,r,t,n){var o=r,i=e.position;e._updatePos(Math.min(r,e.length-i));var a=e._buffers.reduce(function(s,c){if(o<=0)return s;if(i>=c.length)return i-=c.length,"";c._updatePos(i-c.position);var u=Math.min(c.length-i,o),l=c.readSlice(u);return c._updatePos(u),o=Math.max(o-l.length,0),i=0,s+t(l)},"");return a+n()}function Kx(e){return typeof wh.default.Buffer.from=="function"?wh.default.Buffer.from(e,"utf8"):new wh.default.Buffer(e,"utf8")}x_.default={encode:Vx,decode:zx};(function(e){var r=f&&f.__createBinding||(Object.create?function(s,c,u,l){l===void 0&&(l=u);var d=Object.getOwnPropertyDescriptor(c,u);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(s,l,d)}:function(s,c,u,l){l===void 0&&(l=u),s[l]=c[u]}),t=f&&f.__exportStar||function(s,c){for(var u in s)u!=="default"&&!Object.prototype.hasOwnProperty.call(c,u)&&r(c,s,u)},n=f&&f.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.utf8=e.alloc=e.ChannelConfig=void 0,t(Er,e),t(mo,e);var o=B_;Object.defineProperty(e,"ChannelConfig",{enumerable:!0,get:function(){return n(o).default}});var i=cr;Object.defineProperty(e,"alloc",{enumerable:!0,get:function(){return i.alloc}});var a=x_;Object.defineProperty(e,"utf8",{enumerable:!0,get:function(){return n(a).default}})})(Vn);Object.defineProperty(k_,"__esModule",{value:!0});var ZO=Vn,QO=W,Yx=1616949271,Zx=["5.8","5.7","5.6","5.4","5.3","5.2","5.1","5.0","4.4","4.3","4.2","3.0"],Qx=0;function Zn(e,r){return{major:e,minor:r}}function Xx(e){if(e.length>4)throw(0,QO.newError)("It should not have more than 4 versions of the protocol");var r=(0,ZO.alloc)(5*4);return r.writeInt32(Yx),e.forEach(function(t){if(t instanceof Array){var n=t[0],o=n.major,i=n.minor,a=t[1].minor,s=i-a;r.writeInt32(s<<16|i<<8|o)}else{var o=t.major,i=t.minor;r.writeInt32(i<<8|o)}}),r.reset(),r}function Jx(e,r){var t=[e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readUInt8()];if(t[0]===72&&t[1]===84&&t[2]===84&&t[3]===80)throw r.error("Handshake failed since server responded with HTTP."),(0,QO.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return+(t[3]+"."+t[2])}function e5(e,r,t){for(var n=r.readVarInt(),o=[],i=0;i<n;i++){var a=[r.readUInt8(),r.readUInt8(),r.readUInt8(),r.readUInt8()];o=o.concat(o5(a))}r.readVarInt();var s=i5(),c=0,u=0;o.sort(function(d,h){return Number(d.major)!==Number(h.major)?Number(h.major)-Number(d.major):Number(h.minor)-Number(d.minor)});for(var i=0;i<o.length;i++){var l=o[i];if(Zx.includes(l.major+"."+l.minor)){c=l.major,u=l.minor;break}}return new Promise(function(d,h){try{var v=(0,ZO.alloc)(5);v.writeInt32(u<<8|c),v.writeVarInt(s),e.write(v),d({protocolVersion:+(c+"."+u),capabilites:s,consumeRemainingBuffer:function(_){r.hasRemaining()&&_(r.readSlice(r.remaining()))}})}catch(_){h(_)}})}function t5(){return Xx([Zn(255,1),[Zn(5,8),Zn(5,0)],[Zn(4,4),Zn(4,2)],Zn(3,0)])}function r5(e,r){return n5(e,r).then(function(t){return t.protocolVersion===255.1?e5(e,t.buffer):t})}k_.default=r5;function n5(e,r){var t=this;return new Promise(function(n,o){var i=function(a){o(a)};e.onerror=i.bind(t),e._error&&i(e._error),e.onmessage=function(a){try{var s=Jx(a,r);n({protocolVersion:s,capabilites:0,buffer:a,consumeRemainingBuffer:function(c){a.hasRemaining()&&c(a.readSlice(a.remaining()))}})}catch(c){o(c)}},e.write(t5())})}function o5(e){for(var r=[],t=e[3],n=e[2],o=0;o<=e[1];o++)r.push({major:t,minor:n-o});return r}function i5(e){return Qx}var W_={},Ml={},Ue={},te={},Dl={},V_=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),a5=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dl,"__esModule",{value:!0});a5(W);var Ll=function(){function e(){}return e.ofRecord=function(r){return r===null?e.ofNull():new c5(r)},e.ofMessageResponse=function(r){return r===null?e.ofNull():new u5(r)},e.ofNull=function(){return new s5},Object.defineProperty(e.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),e}();Dl.default=Ll;var u5=function(e){V_(r,e);function r(t){var n=e.call(this)||this;return n._response=t,n}return Object.defineProperty(r.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNull",{get:function(){return this._response===null},enumerable:!1,configurable:!0}),r}(Ll),s5=function(e){V_(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),r}(Ll),c5=function(e){V_(r,e);function r(t){var n=e.call(this)||this;return n._record=t,n}return Object.defineProperty(r.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNull",{get:function(){return this._record===null},enumerable:!1,configurable:!0}),r}(Ll),Vt={},An={};Object.defineProperty(An,"__esModule",{value:!0});An.reuseOngoingRequest=An.identity=void 0;var l5=W;function f5(e){return e}An.identity=f5;function d5(e,r){r===void 0&&(r=null);var t=new Map;return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=l5.json.stringify(n);if(t.has(i))return t.get(i);var a=e.apply(r,n);return t.set(i,a),a.finally(function(){t.delete(i)})}}An.reuseOngoingRequest=d5;var Ul={},h5=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ul,"__esModule",{value:!0});Ul.equals=void 0;function v5(e,r){var t,n;if(e===r)return!0;if(e===null||r===null)return!1;if(typeof e=="object"&&typeof r=="object"){var o=Object.keys(e),i=Object.keys(r);if(o.length!==i.length)return!1;try{for(var a=h5(o),s=a.next();!s.done;s=a.next()){var c=s.value;if(e[c]!==r[c])return!1}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0}return!1}Ul.equals=v5;var _5=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),p5=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),XO=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&_5(r,e,t);return p5(r,e),r};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.object=Vt.functional=void 0;Vt.functional=XO(An);Vt.object=XO(Ul);var lr=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),y5=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(te,"__esModule",{value:!0});te.TelemetryObserver=te.ProcedureRouteObserver=te.RouteObserver=te.CompletedObserver=te.FailedObserver=te.ResetObserver=te.LogoffObserver=te.LoginObserver=te.ResultStreamObserver=te.StreamObserver=void 0;var Ze=W,JO=y5(Dl),b5=Vt,m5=Ze.internal.constants.FETCH_ALL,jr=Ze.error.PROTOCOL_ERROR,qn=function(){function e(){}return e.prototype.onNext=function(r){},e.prototype.onError=function(r){},e.prototype.onCompleted=function(r){},e}();te.StreamObserver=qn;var Fl=function(e){lr(r,e);function r(t){var n=t===void 0?{}:t,o=n.reactive,i=o===void 0?!1:o,a=n.moreFunction,s=n.discardFunction,c=n.fetchSize,u=c===void 0?m5:c,l=n.beforeError,d=n.afterError,h=n.beforeKeys,v=n.afterKeys,_=n.beforeComplete,y=n.afterComplete,p=n.server,b=n.highRecordWatermark,g=b===void 0?Number.MAX_VALUE:b,w=n.lowRecordWatermark,E=w===void 0?Number.MAX_VALUE:w,S=n.enrichMetadata,T=n.onDb,P=e.call(this)||this;return P._fieldKeys=null,P._fieldLookup=null,P._head=null,P._queuedRecords=[],P._tail=null,P._error=null,P._observers=[],P._meta={},P._server=p,P._beforeError=l,P._afterError=d,P._beforeKeys=h,P._afterKeys=v,P._beforeComplete=_,P._afterComplete=y,P._enrichMetadata=S||b5.functional.identity,P._queryId=null,P._moreFunction=a,P._discardFunction=s,P._discard=!1,P._fetchSize=u,P._lowRecordWatermark=E,P._highRecordWatermark=g,P._setState(i?St.READY:St.READY_STREAMING),P._setupAutoPull(),P._paused=!1,P._pulled=!i,P._haveRecordStreamed=!1,P._onDb=T,P}return r.prototype.pause=function(){this._paused=!0},r.prototype.resume=function(){this._paused=!1,this._setupAutoPull(!0),this._state.pull(this)},r.prototype.onNext=function(t){this._haveRecordStreamed=!0;var n=new Ze.Record(this._fieldKeys,t,this._fieldLookup);this._observers.some(function(o){return o.onNext})?this._observers.forEach(function(o){o.onNext&&o.onNext(n)}):(this._queuedRecords.push(n),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},r.prototype.onCompleted=function(t){this._state.onSuccess(this,t)},r.prototype.onError=function(t){this._state.onError(this,t)},r.prototype.cancel=function(){this._discard=!0},r.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(St.STREAMING)},r.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(St.SUCCEEDED)},r.prototype.subscribe=function(t){if(this._head&&t.onKeys&&t.onKeys(this._head),this._queuedRecords.length>0&&t.onNext)for(var n=0;n<this._queuedRecords.length;n++)t.onNext(this._queuedRecords[n]),this._queuedRecords.length-n-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===St.READY&&this._handleStreaming());this._tail&&t.onCompleted&&t.onCompleted(this._tail),this._error&&t.onError(this._error),this._observers.push(t),this._state===St.READY&&this._handleStreaming()},r.prototype._handleHasMore=function(t){this._setState(St.READY),this._handleStreaming(),delete t.has_more},r.prototype._handlePullSuccess=function(t){var n=this,o=this._enrichMetadata(Object.assign(this._server?{server:this._server}:{},this._meta,{stream_summary:{have_records_streamed:this._haveRecordStreamed,pulled:this._pulled,has_keys:this._fieldKeys.length>0}},t));if(![void 0,null,"r","w","rw","s"].includes(o.type)){this.onError((0,Ze.newError)(`Server returned invalid query type. Expected one of [undefined, null, "r", "w", "rw", "s"] but got '`.concat(o.type,"'"),jr));return}this._setState(St.SUCCEEDED);var i=null;this._beforeComplete&&(i=this._beforeComplete(o));var a=function(){n._tail=o,n._observers.some(function(s){return s.onCompleted})&&n._observers.forEach(function(s){s.onCompleted&&s.onCompleted(o)}),n._afterComplete&&n._afterComplete(o)};i?Promise.resolve(i).then(function(){return a()}):a()},r.prototype._handleRunSuccess=function(t,n){var o=this;if(this._fieldKeys===null){if(this._fieldKeys=[],this._fieldLookup={},t.fields&&t.fields.length>0){this._fieldKeys=t.fields;for(var i=0;i<t.fields.length;i++)this._fieldLookup[t.fields[i]]=i}t.db!==null&&this._onDb!==void 0&&this._onDb(t.db),t.fields!=null&&delete t.fields,t.qid!==null&&t.qid!==void 0&&(this._queryId=t.qid,delete t.qid),this._storeMetadataForCompletion(t);var a=null;this._beforeKeys&&(a=this._beforeKeys(this._fieldKeys));var s=function(){o._head=o._fieldKeys,o._observers.some(function(c){return c.onKeys})&&o._observers.forEach(function(c){c.onKeys&&c.onKeys(o._fieldKeys)}),o._afterKeys&&o._afterKeys(o._fieldKeys),n()};a?Promise.resolve(a).then(function(){return s()}):s()}},r.prototype._handleError=function(t){var n=this;this._setState(St.FAILED),this._error=t;var o=null;this._beforeError&&(o=this._beforeError(t));var i=function(){n._observers.some(function(a){return a.onError})&&n._observers.forEach(function(a){a.onError&&a.onError(t)}),n._afterError&&n._afterError(t)};o?Promise.resolve(o).then(function(){return i()}):i()},r.prototype._handleStreaming=function(){this._head&&this._observers.some(function(t){return t.onNext||t.onCompleted})&&!this._paused&&(this._discard||this._autoPull)&&this._more()},r.prototype._more=function(){this._discard?this._discardFunction(this._queryId,this):(this._pulled=!0,this._moreFunction(this._queryId,this._fetchSize,this)),this._setState(St.STREAMING)},r.prototype._storeMetadataForCompletion=function(t){for(var n=Object.keys(t),o=n.length,i="";o--;)i=n[o],this._meta[i]=t[i]},r.prototype._setState=function(t){this._state=t},r.prototype._setupAutoPull=function(){this._autoPull=!0},r}(qn);te.ResultStreamObserver=Fl;var g5=function(e){lr(r,e);function r(t){var n=t===void 0?{}:t,o=n.onError,i=n.onCompleted,a=e.call(this)||this;return a._onError=o,a._onCompleted=i,a}return r.prototype.onNext=function(t){this.onError((0,Ze.newError)("Received RECORD when initializing "+Ze.json.stringify(t)))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(qn);te.LoginObserver=g5;var O5=function(e){lr(r,e);function r(t){var n=t===void 0?{}:t,o=n.onError,i=n.onCompleted,a=e.call(this)||this;return a._onError=o,a._onCompleted=i,a}return r.prototype.onNext=function(t){this.onError((0,Ze.newError)("Received RECORD when logging off "+Ze.json.stringify(t)))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(qn);te.LogoffObserver=O5;var w5=function(e){lr(r,e);function r(t){var n=t===void 0?{}:t,o=n.onProtocolError,i=n.onError,a=n.onComplete,s=e.call(this)||this;return s._onProtocolError=o,s._onError=i,s._onComplete=a,s}return r.prototype.onNext=function(t){this.onError((0,Ze.newError)("Received RECORD when resetting: received record is: "+Ze.json.stringify(t),jr))},r.prototype.onError=function(t){t.code===jr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onComplete&&this._onComplete(t)},r}(qn);te.ResetObserver=w5;var E5=function(e){lr(r,e);function r(t){var n=t===void 0?{}:t,o=n.onError,i=n.onCompleted,a=e.call(this)||this;return a._onError=o,a._onCompleted=i,a}return r.prototype.onNext=function(t){this.onError((0,Ze.newError)("Received RECORD when sending telemetry "+Ze.json.stringify(t),jr))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(Fl);te.TelemetryObserver=E5;var S5=function(e){lr(r,e);function r(t){var n=t.error,o=t.onError,i=e.call(this,{beforeError:o})||this;return i.onError(n),i}return r}(Fl);te.FailedObserver=S5;var P5=function(e){lr(r,e);function r(){var t=e.call(this)||this;return e.prototype.markCompleted.call(t),t}return r}(Fl);te.CompletedObserver=P5;var T5=function(e){lr(r,e);function r(t){var n=t.resultObserver,o=t.onProtocolError,i=t.onError,a=t.onCompleted,s=e.call(this)||this;return s._resultObserver=n,s._onError=i,s._onCompleted=a,s._records=[],s._onProtocolError=o,n.subscribe(s),s}return r.prototype.onNext=function(t){this._records.push(t)},r.prototype.onError=function(t){t.code===jr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(){if(this._records!==null&&this._records.length!==1){this.onError((0,Ze.newError)("Illegal response from router. Received "+this._records.length+` records but expected only one.
`+Ze.json.stringify(this._records),jr));return}this._onCompleted&&this._onCompleted(JO.default.ofRecord(this._records[0]))},r}(qn);te.ProcedureRouteObserver=T5;var C5=function(e){lr(r,e);function r(t){var n=t===void 0?{}:t,o=n.onProtocolError,i=n.onError,a=n.onCompleted,s=e.call(this)||this;return s._onProtocolError=o,s._onError=i,s._onCompleted=a,s}return r.prototype.onNext=function(t){this.onError((0,Ze.newError)("Received RECORD when resetting: received record is: "+Ze.json.stringify(t),jr))},r.prototype.onError=function(t){t.code===jr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(JO.default.ofMessageResponse(t))},r}(qn);te.RouteObserver=C5;var St={READY_STREAMING:{onSuccess:function(e,r){e._handleRunSuccess(r,function(){e._setState(St.STREAMING)})},onError:function(e,r){e._handleError(r)},name:function(){return"READY_STREAMING"},pull:function(){}},READY:{onSuccess:function(e,r){e._handleRunSuccess(r,function(){return e._handleStreaming()})},onError:function(e,r){e._handleError(r)},name:function(){return"READY"},pull:function(e){return e._more()}},STREAMING:{onSuccess:function(e,r){r.has_more?e._handleHasMore(r):e._handlePullSuccess(r)},onError:function(e,r){e._handleError(r)},name:function(){return"STREAMING"},pull:function(){}},FAILED:{onError:function(e){},name:function(){return"FAILED"},pull:function(){}},SUCCEEDED:{name:function(){return"SUCCEEDED"},pull:function(){}}};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.assertNotificationFilterIsEmpty=Ue.assertImpersonatedUserIsEmpty=Ue.assertTxConfigIsEmpty=Ue.assertDatabaseIsEmpty=void 0;var Xi=W;function A5(e,r,t){if(r===void 0&&(r=function(){}),e&&!e.isEmpty()){var n=(0,Xi.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw r(n.message),t.onError(n),n}}Ue.assertTxConfigIsEmpty=A5;function I5(e,r,t){if(r===void 0&&(r=function(){}),e){var n=(0,Xi.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw r(n.message),t.onError(n),n}}Ue.assertDatabaseIsEmpty=I5;function R5(e,r,t){if(r===void 0&&(r=function(){}),e){var n=(0,Xi.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+"Trying to impersonate ".concat(e,"."));throw r(n.message),t.onError(n),n}}Ue.assertImpersonatedUserIsEmpty=R5;function j5(e,r,t){if(r===void 0&&(r=function(){}),e!==void 0){var n=(0,Xi.newError)("Driver is connected to a database that does not support user notification filters. Please upgrade to Neo4j 5.7.0 or later in order to use this functionality. "+"Trying to set notifications to ".concat(Xi.json.stringify(e),"."));throw r(n.message),t.onError(n),n}}Ue.assertNotificationFilterIsEmpty=j5;var Ye={},In={},$r={};Object.defineProperty($r,"__esModule",{value:!0});$r.verifyStructSize=$r.Structure=void 0;var ew=W,$5=ew.error.PROTOCOL_ERROR,tw=function(){function e(r,t){this.signature=r,this.fields=t}return Object.defineProperty(e.prototype,"size",{get:function(){return this.fields.length},enumerable:!1,configurable:!0}),e.prototype.toString=function(){for(var r="",t=0;t<this.fields.length;t++)t>0&&(r+=", "),r+=this.fields[t];return"Structure("+this.signature+", ["+r+"])"},e}();$r.Structure=tw;function N5(e,r,t){if(r!==t)throw(0,ew.newError)("Wrong struct size for ".concat(e,", expected ").concat(r," but was ").concat(t),$5)}$r.verifyStructSize=N5;$r.default=tw;Object.defineProperty(In,"__esModule",{value:!0});In.Unpacker=In.Packer=void 0;var ji=Vn,rw=Vt,nw=$r,Pe=W,k5=Pe.error.PROTOCOL_ERROR,ow=128,iw=144,aw=160,uw=176,sw=192,cw=193,lw=194,fw=195,dw=200,hw=201,vw=202,_w=203,pw=208,yw=209,bw=210,mw=212,gw=213,Ow=214,ww=204,Ew=205,Sw=206,Pw=216,Tw=217,Cw=218,Aw=220,Iw=221,M5=function(){function e(r){this._ch=r,this._byteArraysSupported=!0}return e.prototype.packable=function(r,t){var n=this;t===void 0&&(t=rw.functional.identity);try{r=t(r)}catch(a){return function(){throw a}}if(r===null)return function(){return n._ch.writeUInt8(sw)};if(r===!0)return function(){return n._ch.writeUInt8(fw)};if(r===!1)return function(){return n._ch.writeUInt8(lw)};if(typeof r=="number")return function(){return n.packFloat(r)};if(typeof r=="string")return function(){return n.packString(r)};if(typeof r=="bigint")return function(){return n.packInteger((0,Pe.int)(r))};if((0,Pe.isInt)(r))return function(){return n.packInteger(r)};if(r instanceof Int8Array)return function(){return n.packBytes(r)};if(r instanceof Array)return function(){n.packListHeader(r.length);for(var a=0;a<r.length;a++)n.packable(r[a]===void 0?null:r[a],t)()};if(L5(r))return this.packableIterable(r,t);if(r instanceof nw.Structure){for(var o=[],i=0;i<r.fields.length;i++)o[i]=this.packable(r.fields[i],t);return function(){return n.packStruct(r.signature,o)}}else return typeof r=="object"?function(){for(var a=Object.keys(r),s=0,c=0;c<a.length;c++)r[a[c]]!==void 0&&s++;n.packMapHeader(s);for(var c=0;c<a.length;c++){var u=a[c];r[u]!==void 0&&(n.packString(u),n.packable(r[u],t)())}}:this._nonPackableValue("Unable to pack the given value: ".concat(r))},e.prototype.packableIterable=function(r,t){try{var n=Array.from(r);return this.packable(n,t)}catch(o){throw(0,Pe.newError)("Cannot pack given iterable, ".concat(o.message,": ").concat(r))}},e.prototype.packStruct=function(r,t){t=t||[],this.packStructHeader(t.length,r);for(var n=0;n<t.length;n++)t[n]()},e.prototype.packInteger=function(r){var t=r.high,n=r.low;r.greaterThanOrEqual(-16)&&r.lessThan(128)?this._ch.writeInt8(n):r.greaterThanOrEqual(-128)&&r.lessThan(-16)?(this._ch.writeUInt8(dw),this._ch.writeInt8(n)):r.greaterThanOrEqual(-32768)&&r.lessThan(32768)?(this._ch.writeUInt8(hw),this._ch.writeInt16(n)):r.greaterThanOrEqual(-2147483648)&&r.lessThan(2147483648)?(this._ch.writeUInt8(vw),this._ch.writeInt32(n)):(this._ch.writeUInt8(_w),this._ch.writeInt32(t),this._ch.writeInt32(n))},e.prototype.packFloat=function(r){this._ch.writeUInt8(cw),this._ch.writeFloat64(r)},e.prototype.packString=function(r){var t=ji.utf8.encode(r),n=t.length;if(n<16)this._ch.writeUInt8(ow|n),this._ch.writeBytes(t);else if(n<256)this._ch.writeUInt8(pw),this._ch.writeUInt8(n),this._ch.writeBytes(t);else if(n<65536)this._ch.writeUInt8(yw),this._ch.writeUInt8(n/256>>0),this._ch.writeUInt8(n%256),this._ch.writeBytes(t);else if(n<4294967296)this._ch.writeUInt8(bw),this._ch.writeUInt8((n/16777216>>0)%256),this._ch.writeUInt8((n/65536>>0)%256),this._ch.writeUInt8((n/256>>0)%256),this._ch.writeUInt8(n%256),this._ch.writeBytes(t);else throw(0,Pe.newError)("UTF-8 strings of size "+n+" are not supported")},e.prototype.packListHeader=function(r){if(r<16)this._ch.writeUInt8(iw|r);else if(r<256)this._ch.writeUInt8(mw),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(gw),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(Ow),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Pe.newError)("Lists of size "+r+" are not supported")},e.prototype.packBytes=function(r){if(this._byteArraysSupported){this.packBytesHeader(r.length);for(var t=0;t<r.length;t++)this._ch.writeInt8(r[t])}else throw(0,Pe.newError)("Byte arrays are not supported by the database this driver is connected to")},e.prototype.packBytesHeader=function(r){if(r<256)this._ch.writeUInt8(ww),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(Ew),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(Sw),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Pe.newError)("Byte arrays of size "+r+" are not supported")},e.prototype.packMapHeader=function(r){if(r<16)this._ch.writeUInt8(aw|r);else if(r<256)this._ch.writeUInt8(Pw),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(Tw),this._ch.writeUInt8(r/256>>0),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(Cw),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Pe.newError)("Maps of size "+r+" are not supported")},e.prototype.packStructHeader=function(r,t){if(r<16)this._ch.writeUInt8(uw|r),this._ch.writeUInt8(t);else if(r<256)this._ch.writeUInt8(Aw),this._ch.writeUInt8(r),this._ch.writeUInt8(t);else if(r<65536)this._ch.writeUInt8(Iw),this._ch.writeUInt8(r/256>>0),this._ch.writeUInt8(r%256);else throw(0,Pe.newError)("Structures of size "+r+" are not supported")},e.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},e.prototype._nonPackableValue=function(r){return function(){throw(0,Pe.newError)(r,k5)}},e}();In.Packer=M5;var D5=function(){function e(r,t){r===void 0&&(r=!1),t===void 0&&(t=!1),this._disableLosslessIntegers=r,this._useBigInt=t}return e.prototype.unpack=function(r,t){t===void 0&&(t=rw.functional.identity);var n=r.readUInt8(),o=n&240,i=n&15;if(n===sw)return null;var a=this._unpackBoolean(n);if(a!==null)return a;var s=this._unpackNumberOrInteger(n,r);if(s!==null){if((0,Pe.isInt)(s)){if(this._useBigInt)return s.toBigInt();if(this._disableLosslessIntegers)return s.toNumberOrInfinity()}return s}var c=this._unpackString(n,o,i,r);if(c!==null)return c;var u=this._unpackList(n,o,i,r,t);if(u!==null)return u;var l=this._unpackByteArray(n,r);if(l!==null)return l;var d=this._unpackMap(n,o,i,r,t);if(d!==null)return d;var h=this._unpackStruct(n,o,i,r,t);if(h!==null)return h;throw(0,Pe.newError)("Unknown packed value with marker "+n.toString(16))},e.prototype.unpackInteger=function(r){var t=r.readUInt8(),n=this._unpackInteger(t,r);if(n==null)throw(0,Pe.newError)("Unable to unpack integer value with marker "+t.toString(16));return n},e.prototype._unpackBoolean=function(r){return r===fw?!0:r===lw?!1:null},e.prototype._unpackNumberOrInteger=function(r,t){return r===cw?t.readFloat64():this._unpackInteger(r,t)},e.prototype._unpackInteger=function(r,t){if(r>=0&&r<128)return(0,Pe.int)(r);if(r>=240&&r<256)return(0,Pe.int)(r-256);if(r===dw)return(0,Pe.int)(t.readInt8());if(r===hw)return(0,Pe.int)(t.readInt16());if(r===vw){var n=t.readInt32();return(0,Pe.int)(n)}else if(r===_w){var o=t.readInt32(),i=t.readInt32();return new Pe.Integer(i,o)}else return null},e.prototype._unpackString=function(r,t,n,o){return t===ow?ji.utf8.decode(o,n):r===pw?ji.utf8.decode(o,o.readUInt8()):r===yw?ji.utf8.decode(o,o.readUInt16()):r===bw?ji.utf8.decode(o,o.readUInt32()):null},e.prototype._unpackList=function(r,t,n,o,i){return t===iw?this._unpackListWithSize(n,o,i):r===mw?this._unpackListWithSize(o.readUInt8(),o,i):r===gw?this._unpackListWithSize(o.readUInt16(),o,i):r===Ow?this._unpackListWithSize(o.readUInt32(),o,i):null},e.prototype._unpackListWithSize=function(r,t,n){for(var o=[],i=0;i<r;i++)o.push(this.unpack(t,n));return o},e.prototype._unpackByteArray=function(r,t){return r===ww?this._unpackByteArrayWithSize(t.readUInt8(),t):r===Ew?this._unpackByteArrayWithSize(t.readUInt16(),t):r===Sw?this._unpackByteArrayWithSize(t.readUInt32(),t):null},e.prototype._unpackByteArrayWithSize=function(r,t){for(var n=new Int8Array(r),o=0;o<r;o++)n[o]=t.readInt8();return n},e.prototype._unpackMap=function(r,t,n,o,i){return t===aw?this._unpackMapWithSize(n,o,i):r===Pw?this._unpackMapWithSize(o.readUInt8(),o,i):r===Tw?this._unpackMapWithSize(o.readUInt16(),o,i):r===Cw?this._unpackMapWithSize(o.readUInt32(),o,i):null},e.prototype._unpackMapWithSize=function(r,t,n){for(var o={},i=0;i<r;i++){var a=this.unpack(t,n);o[a]=this.unpack(t,n)}return o},e.prototype._unpackStruct=function(r,t,n,o,i){return t===uw?this._unpackStructWithSize(n,o,i):r===Aw?this._unpackStructWithSize(o.readUInt8(),o,i):r===Iw?this._unpackStructWithSize(o.readUInt16(),o,i):null},e.prototype._unpackStructWithSize=function(r,t,n){for(var o=t.readUInt8(),i=new nw.Structure(o,[]),a=0;a<r;a++)i.fields.push(this.unpack(t,n));return n(i)},e}();In.Unpacker=D5;function L5(e){return e==null?!1:typeof e[Symbol.iterator]=="function"}var go={},Rw=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),U5=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),F5=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),B5=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&U5(r,e,t);return F5(r,e),r};Object.defineProperty(go,"__esModule",{value:!0});go.Unpacker=go.Packer=void 0;var jw=B5(In),x5=function(e){Rw(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},r}(jw.Packer);go.Packer=x5;var W5=function(e){Rw(r,e);function r(t,n){return t===void 0&&(t=!1),n===void 0&&(n=!1),e.call(this,t,n)||this}return r}(jw.Unpacker);go.Unpacker=W5;var V5=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),z5=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),z_=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&V5(r,e,t);return z5(r,e),r};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.structure=Ye.v2=Ye.v1=void 0;var q5=z_(In);Ye.v1=q5;var $w=z_(go);Ye.v2=$w;var H5=z_($r);Ye.structure=H5;Ye.default=$w;var Be={};Object.defineProperty(Be,"__esModule",{value:!0});Be.SIGNATURES=void 0;var ye=W,Nw=ye.internal.constants,G5=Nw.ACCESS_MODE_READ,Rs=Nw.FETCH_ALL,Hb=ye.internal.util.assertString,kw=1,Mw=15,Js=16,Dw=63,Xn=1,Lw=2,Ev=17,Uw=18,Fw=19,Bw=84,Sv=102,xw=106,Ww=107,Vw=47,zw=63,K5="r",$i=-1,Y5=Object.freeze({INIT:kw,RESET:Mw,RUN:Js,PULL_ALL:Dw,HELLO:Xn,GOODBYE:Lw,BEGIN:Ev,COMMIT:Uw,ROLLBACK:Fw,TELEMETRY:Bw,ROUTE:Sv,LOGON:xw,LOGOFF:Ww,DISCARD:Vw,PULL:zw});Be.SIGNATURES=Y5;var ii=function(){function e(r,t,n){this.signature=r,this.fields=t,this.toString=n}return e.init=function(r,t){return new e(kw,[r,t],function(){return"INIT ".concat(r," {...}")})},e.run=function(r,t){return new e(Js,[r,t],function(){return"RUN ".concat(r," ").concat(ye.json.stringify(t))})},e.pullAll=function(){return Z5},e.reset=function(){return Q5},e.hello=function(r,t,n,o){n===void 0&&(n=null),o===void 0&&(o=null);var i=Object.assign({user_agent:r},t);return n&&(i.routing=n),o&&(i.patch_bolt=o),new e(Xn,[i],function(){return"HELLO {user_agent: '".concat(r,"', ...}")})},e.hello5x1=function(r,t){t===void 0&&(t=null);var n={user_agent:r};return t&&(n.routing=t),new e(Xn,[n],function(){return"HELLO {user_agent: '".concat(r,"', ...}")})},e.hello5x2=function(r,t,n){t===void 0&&(t=null),n===void 0&&(n=null);var o={user_agent:r};return Pv(o,t),n&&(o.routing=n),new e(Xn,[o],function(){return"HELLO ".concat(ye.json.stringify(o))})},e.hello5x3=function(r,t,n,o){n===void 0&&(n=null),o===void 0&&(o=null);var i={};return r&&(i.user_agent=r),t&&(i.bolt_agent={product:t.product,platform:t.platform,language:t.language,language_details:t.languageDetails}),Pv(i,n),o&&(i.routing=o),new e(Xn,[i],function(){return"HELLO ".concat(ye.json.stringify(i))})},e.hello5x5=function(r,t,n,o){n===void 0&&(n=null),o===void 0&&(o=null);var i={};return r&&(i.user_agent=r),t&&(i.bolt_agent={product:t.product,platform:t.platform,language:t.language,language_details:t.languageDetails}),Eh(i,n),o&&(i.routing=o),new e(Xn,[i],function(){return"HELLO ".concat(ye.json.stringify(i))})},e.logon=function(r){return new e(xw,[r],function(){return"LOGON { ... }"})},e.logoff=function(){return new e(Ww,[],function(){return"LOGOFF"})},e.begin=function(r){var t=r===void 0?{}:r,n=t.bookmarks,o=t.txConfig,i=t.database,a=t.mode,s=t.impersonatedUser,c=t.notificationFilter,u=js(n,o,i,a,s,c);return new e(Ev,[u],function(){return"BEGIN ".concat(ye.json.stringify(u))})},e.begin5x5=function(r){var t=r===void 0?{}:r,n=t.bookmarks,o=t.txConfig,i=t.database,a=t.mode,s=t.impersonatedUser,c=t.notificationFilter,u=js(n,o,i,a,s,c,{appendNotificationFilter:Eh});return new e(Ev,[u],function(){return"BEGIN ".concat(ye.json.stringify(u))})},e.commit=function(){return X5},e.rollback=function(){return J5},e.runWithMetadata=function(r,t,n){var o=n===void 0?{}:n,i=o.bookmarks,a=o.txConfig,s=o.database,c=o.mode,u=o.impersonatedUser,l=o.notificationFilter,d=js(i,a,s,c,u,l);return new e(Js,[r,t,d],function(){return"RUN ".concat(r," ").concat(ye.json.stringify(t)," ").concat(ye.json.stringify(d))})},e.runWithMetadata5x5=function(r,t,n){var o=n===void 0?{}:n,i=o.bookmarks,a=o.txConfig,s=o.database,c=o.mode,u=o.impersonatedUser,l=o.notificationFilter,d=js(i,a,s,c,u,l,{appendNotificationFilter:Eh});return new e(Js,[r,t,d],function(){return"RUN ".concat(r," ").concat(ye.json.stringify(t)," ").concat(ye.json.stringify(d))})},e.goodbye=function(){return e8},e.pull=function(r){var t=r===void 0?{}:r,n=t.stmtId,o=n===void 0?$i:n,i=t.n,a=i===void 0?Rs:i,s=Gb(o??$i,a||Rs);return new e(zw,[s],function(){return"PULL ".concat(ye.json.stringify(s))})},e.discard=function(r){var t=r===void 0?{}:r,n=t.stmtId,o=n===void 0?$i:n,i=t.n,a=i===void 0?Rs:i,s=Gb(o??$i,a||Rs);return new e(Vw,[s],function(){return"DISCARD ".concat(ye.json.stringify(s))})},e.telemetry=function(r){var t=r.api,n=(0,ye.int)(t);return new e(Bw,[n],function(){return"TELEMETRY ".concat(n.toString())})},e.route=function(r,t,n){return r===void 0&&(r={}),t===void 0&&(t=[]),n===void 0&&(n=null),new e(Sv,[r,t,n],function(){return"ROUTE ".concat(ye.json.stringify(r)," ").concat(ye.json.stringify(t)," ").concat(n)})},e.routeV4x4=function(r,t,n){r===void 0&&(r={}),t===void 0&&(t=[]),n===void 0&&(n={});var o={};return n.databaseName&&(o.db=n.databaseName),n.impersonatedUser&&(o.imp_user=n.impersonatedUser),new e(Sv,[r,t,o],function(){return"ROUTE ".concat(ye.json.stringify(r)," ").concat(ye.json.stringify(t)," ").concat(ye.json.stringify(o))})},e}();Be.default=ii;function js(e,r,t,n,o,i,a){var s;a===void 0&&(a={});var c={};e.isEmpty()||(c.bookmarks=e.values()),r.timeout!==null&&(c.tx_timeout=r.timeout),r.metadata&&(c.tx_metadata=r.metadata),t&&(c.db=Hb(t,"database")),o&&(c.imp_user=Hb(o,"impersonatedUser")),n===G5&&(c.mode=K5);var u=(s=a.appendNotificationFilter)!==null&&s!==void 0?s:Pv;return u(c,i),c}function Gb(e,r){var t={n:(0,ye.int)(r)};return e!==$i&&(t.qid=(0,ye.int)(e)),t}function Pv(e,r){r&&(r.minimumSeverityLevel&&(e.notifications_minimum_severity=r.minimumSeverityLevel),r.disabledCategories&&(e.notifications_disabled_categories=r.disabledCategories),r.disabledClassifications&&(e.notifications_disabled_categories=r.disabledClassifications))}function Eh(e,r){r&&(r.minimumSeverityLevel&&(e.notifications_minimum_severity=r.minimumSeverityLevel),r.disabledCategories&&(e.notifications_disabled_classifications=r.disabledCategories),r.disabledClassifications&&(e.notifications_disabled_classifications=r.disabledClassifications))}var Z5=new ii(Dw,[],function(){return"PULL_ALL"}),Q5=new ii(Mw,[],function(){return"RESET"}),X5=new ii(Uw,[],function(){return"COMMIT"}),J5=new ii(Fw,[],function(){return"ROLLBACK"}),e8=new ii(Lw,[],function(){return"GOODBYE"}),Bl={},pe={};Object.defineProperty(pe,"__esModule",{value:!0});pe.TypeTransformer=void 0;var t8=Ye,r8=W,n8=r8.internal.objectUtil,o8=function(){function e(r){this._transformers=r,this._transformersPerSignature=new Map(r.map(function(t){return[t.signature,t]})),this.fromStructure=this.fromStructure.bind(this),this.toStructure=this.toStructure.bind(this),Object.freeze(this)}return e.prototype.fromStructure=function(r){try{if(r instanceof t8.structure.Structure&&this._transformersPerSignature.has(r.signature)){var t=this._transformersPerSignature.get(r.signature).fromStructure;return t(r)}return r}catch(n){return n8.createBrokenObject(n)}},e.prototype.toStructure=function(r){var t=this._transformers.find(function(n){var o=n.isTypeInstance;return o(r)});return t!==void 0?t.toStructure(r):r},e}();pe.default=o8;var i8=function(){function e(r){var t=r.signature,n=r.fromStructure,o=r.toStructure,i=r.isTypeInstance;this.signature=t,this.isTypeInstance=i,this.fromStructure=n,this.toStructure=o,Object.freeze(this)}return e.prototype.extendsWith=function(r){var t=r.signature,n=r.fromStructure,o=r.toStructure,i=r.isTypeInstance;return new e({signature:t||this.signature,fromStructure:n||this.fromStructure,toStructure:o||this.toStructure,isTypeInstance:i||this.isTypeInstance})},e}();pe.TypeTransformer=i8;var xl=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(Bl,"__esModule",{value:!0});var De=W,Wl=Ye,Vl=pe,zl=De.error.PROTOCOL_ERROR,a8=78,u8=3,s8=82,c8=5,l8=114,f8=3,d8=80,h8=3;function v8(){return new Vl.TypeTransformer({signature:a8,isTypeInstance:function(e){return e instanceof De.Node},toStructure:function(e){throw(0,De.newError)("It is not allowed to pass nodes in query parameters, given: ".concat(e),zl)},fromStructure:function(e){Wl.structure.verifyStructSize("Node",u8,e.size);var r=xl(e.fields,3),t=r[0],n=r[1],o=r[2];return new De.Node(t,n,o)}})}function _8(){return new Vl.TypeTransformer({signature:s8,isTypeInstance:function(e){return e instanceof De.Relationship},toStructure:function(e){throw(0,De.newError)("It is not allowed to pass relationships in query parameters, given: ".concat(e),zl)},fromStructure:function(e){Wl.structure.verifyStructSize("Relationship",c8,e.size);var r=xl(e.fields,5),t=r[0],n=r[1],o=r[2],i=r[3],a=r[4];return new De.Relationship(t,n,o,i,a)}})}function p8(){return new Vl.TypeTransformer({signature:l8,isTypeInstance:function(e){return e instanceof De.UnboundRelationship},toStructure:function(e){throw(0,De.newError)("It is not allowed to pass unbound relationships in query parameters, given: ".concat(e),zl)},fromStructure:function(e){Wl.structure.verifyStructSize("UnboundRelationship",f8,e.size);var r=xl(e.fields,3),t=r[0],n=r[1],o=r[2];return new De.UnboundRelationship(t,n,o)}})}function y8(){return new Vl.TypeTransformer({signature:d8,isTypeInstance:function(e){return e instanceof De.Path},toStructure:function(e){throw(0,De.newError)("It is not allowed to pass paths in query parameters, given: ".concat(e),zl)},fromStructure:function(e){Wl.structure.verifyStructSize("Path",h8,e.size);for(var r=xl(e.fields,3),t=r[0],n=r[1],o=r[2],i=[],a=t[0],s=0;s<o.length;s+=2){var c=t[o[s+1]],u=(0,De.toNumber)(o[s]),l=void 0;u>0?(l=n[u-1],l instanceof De.UnboundRelationship&&(n[u-1]=l=l.bindTo(a,c))):(l=n[-u-1],l instanceof De.UnboundRelationship&&(n[-u-1]=l=l.bindTo(c,a))),i.push(new De.PathSegment(a,l,c)),a=c}return new De.Path(t[0],t[t.length-1],i)}})}Bl.default={createNodeTransformer:v8,createRelationshipTransformer:_8,createUnboundRelationshipTransformer:p8,createPathTransformer:y8};var eo=f&&f.__assign||function(){return eo=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},eo.apply(this,arguments)},b8=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),m8=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),g8=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&b8(r,e,t);return m8(r,e),r},qw=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ml,"__esModule",{value:!0});var Oi=Ue,Sh=Ye,an=g8(Be),Qn=te,Oo=W,O8=qw(Bl),w8=qw(pe),Kb=Oo.internal.bookmarks.Bookmarks,Hw=Oo.internal.constants,Yb=Hw.ACCESS_MODE_WRITE,E8=Hw.BOLT_PROTOCOL_V1;Oo.internal.logger.Logger;var Zb=Oo.internal.txConfig.TxConfig,S8=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),P8=function(){function e(r,t,n,o,i,a){var s=n===void 0?{}:n,c=s.disableLosslessIntegers,u=s.useBigInt;o===void 0&&(o=function(){return null}),this._server=r||{},this._chunker=t,this._packer=this._createPacker(t),this._unpacker=this._createUnpacker(c,u),this._responseHandler=o(this),this._log=i,this._onProtocolError=a,this._fatalError=null,this._lastMessageSignature=null,this._config={disableLosslessIntegers:c,useBigInt:u}}return Object.defineProperty(e.prototype,"transformer",{get:function(){var r=this;return this._transformer===void 0&&(this._transformer=new w8.default(Object.values(O8.default).map(function(t){return t(r._config,r._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return E8},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportsReAuth",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initialized",{get:function(){return!!this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authToken",{get:function(){return this._authToken},enumerable:!1,configurable:!0}),e.prototype.packer=function(){return this._packer},e.prototype.packable=function(r){return this._packer.packable(r,this.transformer.toStructure)},e.prototype.unpacker=function(){return this._unpacker},e.prototype.unpack=function(r){return this._unpacker.unpack(r,this.transformer.fromStructure)},e.prototype.transformMetadata=function(r){return r},e.prototype.enrichErrorMetadata=function(r){return eo(eo({},r),{diagnostic_record:r.diagnostic_record!==null?eo(eo({},S8),r.diagnostic_record):null})},e.prototype.initialize=function(r){var t=this,n=r===void 0?{}:r,o=n.userAgent;n.boltAgent;var i=n.authToken,a=n.notificationFilter,s=n.onError,c=n.onComplete,u=new Qn.LoginObserver({onError:function(l){return t._onLoginError(l,s)},onCompleted:function(l){return t._onLoginCompleted(l,c)}});return(0,Oi.assertNotificationFilterIsEmpty)(a,this._onProtocolError,u),this.write(an.default.init(o,i),u,!0),u},e.prototype.logoff=function(r){var t=r===void 0?{}:r,n=t.onComplete,o=t.onError;t.flush;var i=new Qn.LogoffObserver({onCompleted:n,onError:o}),a=(0,Oo.newError)("Driver is connected to a database that does not support logoff. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(a.message),i.onError(a),a},e.prototype.logon=function(r){var t=this,n=r===void 0?{}:r,o=n.authToken,i=n.onComplete,a=n.onError;n.flush;var s=new Qn.LoginObserver({onCompleted:function(){return t._onLoginCompleted({},o,i)},onError:function(u){return t._onLoginError(u,a)}}),c=(0,Oo.newError)("Driver is connected to a database that does not support logon. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(c.message),s.onError(c),c},e.prototype.prepareToClose=function(){},e.prototype.beginTransaction=function(r){var t=r===void 0?{}:r,n=t.bookmarks,o=t.txConfig,i=t.database,a=t.mode,s=t.impersonatedUser,c=t.notificationFilter,u=t.beforeError,l=t.afterError,d=t.beforeComplete,h=t.afterComplete;return this.run("BEGIN",n?n.asBeginTransactionParameters():{},{bookmarks:n,txConfig:o,database:i,mode:a,impersonatedUser:s,notificationFilter:c,beforeError:u,afterError:l,beforeComplete:d,afterComplete:h,flush:!1})},e.prototype.commitTransaction=function(r){var t=r===void 0?{}:r,n=t.beforeError,o=t.afterError,i=t.beforeComplete,a=t.afterComplete;return this.run("COMMIT",{},{bookmarks:Kb.empty(),txConfig:Zb.empty(),mode:Yb,beforeError:n,afterError:o,beforeComplete:i,afterComplete:a})},e.prototype.rollbackTransaction=function(r){var t=r===void 0?{}:r,n=t.beforeError,o=t.afterError,i=t.beforeComplete,a=t.afterComplete;return this.run("ROLLBACK",{},{bookmarks:Kb.empty(),txConfig:Zb.empty(),mode:Yb,beforeError:n,afterError:o,beforeComplete:i,afterComplete:a})},e.prototype.run=function(r,t,n){var o=n===void 0?{}:n;o.bookmarks;var i=o.txConfig,a=o.database;o.mode;var s=o.impersonatedUser,c=o.notificationFilter,u=o.beforeKeys,l=o.afterKeys,d=o.beforeError,h=o.afterError,v=o.beforeComplete,_=o.afterComplete,y=o.flush,p=y===void 0?!0:y,b=o.highRecordWatermark,g=b===void 0?Number.MAX_VALUE:b,w=o.lowRecordWatermark,E=w===void 0?Number.MAX_VALUE:w,S=new Qn.ResultStreamObserver({server:this._server,beforeKeys:u,afterKeys:l,beforeError:d,afterError:h,beforeComplete:v,afterComplete:_,highRecordWatermark:g,lowRecordWatermark:E});return(0,Oi.assertTxConfigIsEmpty)(i,this._onProtocolError,S),(0,Oi.assertDatabaseIsEmpty)(a,this._onProtocolError,S),(0,Oi.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,S),(0,Oi.assertNotificationFilterIsEmpty)(c,this._onProtocolError,S),this.write(an.default.run(r,t),S,!1),this.write(an.default.pullAll(),S,p),S},Object.defineProperty(e.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),e.prototype.reset=function(r){var t=r===void 0?{}:r,n=t.onError,o=t.onComplete,i=new Qn.ResetObserver({onProtocolError:this._onProtocolError,onError:n,onComplete:o});return this.write(an.default.reset(),i,!0),i},e.prototype.telemetry=function(r,t){r.api;var n=t===void 0?{}:t;n.onError;var o=n.onCompleted,i=new Qn.CompletedObserver;return o&&o(),i},e.prototype._createPacker=function(r){return new Sh.v1.Packer(r)},e.prototype._createUnpacker=function(r,t){return new Sh.v1.Unpacker(r,t)},e.prototype.write=function(r,t,n){var o=this.queueObserverIfProtocolIsNotBroken(t);if(o){this._log.isDebugEnabled()&&this._log.debug("C: ".concat(r)),this._lastMessageSignature=r.signature;var i=new Sh.structure.Structure(r.signature,r.fields);this.packable(i)(),this._chunker.messageBoundary(),n&&this._chunker.flush()}},e.prototype.isLastMessageLogon=function(){return this._lastMessageSignature===an.SIGNATURES.HELLO||this._lastMessageSignature===an.SIGNATURES.LOGON},e.prototype.isLastMessageReset=function(){return this._lastMessageSignature===an.SIGNATURES.RESET},e.prototype.notifyFatalError=function(r){return this._fatalError=r,this._responseHandler._notifyErrorToObservers(r)},e.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},e.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},e.prototype.queueObserverIfProtocolIsNotBroken=function(r){return this.isBroken()?(this.notifyFatalErrorToObserver(r),!1):this._responseHandler._queueObserver(r)},e.prototype.isBroken=function(){return!!this._fatalError},e.prototype.notifyFatalErrorToObserver=function(r){r&&r.onError&&r.onError(this._fatalError)},e.prototype.resetFailure=function(){this._responseHandler._resetFailure()},e.prototype._onLoginCompleted=function(r,t,n){if(this._initialized=!0,this._authToken=t,r){var o=r.server;this._server.version||(this._server.version=o)}n&&n(r)},e.prototype._onLoginError=function(r,t){this._onProtocolError(r.message),t&&t(r)},e}();Ml.default=P8;var ql={},Hl={},or={};Object.defineProperty(or,"__esModule",{value:!0});or.epochSecondAndNanoToLocalDateTime=or.nanoOfDayToLocalTime=or.epochDayToDate=void 0;var mn=W,Yr=mn.internal.temporalUtil,T8=Yr.DAYS_0000_TO_1970,Ph=Yr.DAYS_PER_400_YEAR_CYCLE,Qb=Yr.NANOS_PER_HOUR,Xb=Yr.NANOS_PER_MINUTE,Tv=Yr.NANOS_PER_SECOND,Jb=Yr.SECONDS_PER_DAY,C8=Yr.floorDiv,A8=Yr.floorMod;function Gw(e){e=(0,mn.int)(e);var r=e.add(T8).subtract(60),t=(0,mn.int)(0);if(r.lessThan(0)){var n=r.add(1).div(Ph).subtract(1);t=n.multiply(400),r=r.add(n.multiply(-Ph))}var o=r.multiply(400).add(591).div(Ph),i=r.subtract(o.multiply(365).add(o.div(4)).subtract(o.div(100)).add(o.div(400)));i.lessThan(0)&&(o=o.subtract(1),i=r.subtract(o.multiply(365).add(o.div(4)).subtract(o.div(100)).add(o.div(400)))),o=o.add(t);var a=i,s=a.multiply(5).add(2).div(153),c=s.add(2).modulo(12).add(1),u=a.subtract(s.multiply(306).add(5).div(10)).add(1);return o=o.add(s.div(10)),new mn.Date(o,c,u)}or.epochDayToDate=Gw;function Kw(e){e=(0,mn.int)(e);var r=e.div(Qb);e=e.subtract(r.multiply(Qb));var t=e.div(Xb);e=e.subtract(t.multiply(Xb));var n=e.div(Tv),o=e.subtract(n.multiply(Tv));return new mn.LocalTime(r,t,n,o)}or.nanoOfDayToLocalTime=Kw;function I8(e,r){var t=C8(e,Jb),n=A8(e,Jb),o=n.multiply(Tv).add(r),i=Gw(t),a=Kw(o);return new mn.LocalDateTime(i.year,i.month,i.day,a.hour,a.minute,a.second,a.nanosecond)}or.epochSecondAndNanoToLocalDateTime=I8;var lc=f&&f.__assign||function(){return lc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},lc.apply(this,arguments)},fr=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},R8=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hl,"__esModule",{value:!0});var ce=W,$e=Ye,dr=pe,ai=or,j8=R8(Bl),q_=ce.internal.temporalUtil,$8=q_.dateToEpochDay,H_=q_.localDateTimeToEpochSecond,Yw=q_.localTimeToNanoOfDay,em=88,N8=3,tm=89,k8=4,rm=69,M8=4,nm=116,D8=1,om=84,L8=2,im=68,U8=1,am=100,F8=2,um=70,B8=3,sm=102,x8=3;function W8(){return new dr.TypeTransformer({signature:em,isTypeInstance:function(e){return(0,ce.isPoint)(e)&&(e.z===null||e.z===void 0)},toStructure:function(e){return new $e.structure.Structure(em,[(0,ce.int)(e.srid),e.x,e.y])},fromStructure:function(e){$e.structure.verifyStructSize("Point2D",N8,e.size);var r=fr(e.fields,3),t=r[0],n=r[1],o=r[2];return new ce.Point(t,n,o,void 0)}})}function V8(){return new dr.TypeTransformer({signature:tm,isTypeInstance:function(e){return(0,ce.isPoint)(e)&&e.z!==null&&e.z!==void 0},toStructure:function(e){return new $e.structure.Structure(tm,[(0,ce.int)(e.srid),e.x,e.y,e.z])},fromStructure:function(e){$e.structure.verifyStructSize("Point3D",k8,e.size);var r=fr(e.fields,4),t=r[0],n=r[1],o=r[2],i=r[3];return new ce.Point(t,n,o,i)}})}function z8(){return new dr.TypeTransformer({signature:rm,isTypeInstance:ce.isDuration,toStructure:function(e){var r=(0,ce.int)(e.months),t=(0,ce.int)(e.days),n=(0,ce.int)(e.seconds),o=(0,ce.int)(e.nanoseconds);return new $e.structure.Structure(rm,[r,t,n,o])},fromStructure:function(e){$e.structure.verifyStructSize("Duration",M8,e.size);var r=fr(e.fields,4),t=r[0],n=r[1],o=r[2],i=r[3];return new ce.Duration(t,n,o,i)}})}function q8(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new dr.TypeTransformer({signature:nm,isTypeInstance:ce.isLocalTime,toStructure:function(n){var o=Yw(n.hour,n.minute,n.second,n.nanosecond);return new $e.structure.Structure(nm,[o])},fromStructure:function(n){$e.structure.verifyStructSize("LocalTime",D8,n.size);var o=fr(n.fields,1),i=o[0],a=(0,ai.nanoOfDayToLocalTime)(i);return ui(a,r,t)}})}function H8(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new dr.TypeTransformer({signature:om,isTypeInstance:ce.isTime,toStructure:function(n){var o=Yw(n.hour,n.minute,n.second,n.nanosecond),i=(0,ce.int)(n.timeZoneOffsetSeconds);return new $e.structure.Structure(om,[o,i])},fromStructure:function(n){$e.structure.verifyStructSize("Time",L8,n.size);var o=fr(n.fields,2),i=o[0],a=o[1],s=(0,ai.nanoOfDayToLocalTime)(i),c=new ce.Time(s.hour,s.minute,s.second,s.nanosecond,a);return ui(c,r,t)}})}function G8(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new dr.TypeTransformer({signature:im,isTypeInstance:ce.isDate,toStructure:function(n){var o=$8(n.year,n.month,n.day);return new $e.structure.Structure(im,[o])},fromStructure:function(n){$e.structure.verifyStructSize("Date",U8,n.size);var o=fr(n.fields,1),i=o[0],a=(0,ai.epochDayToDate)(i);return ui(a,r,t)}})}function K8(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new dr.TypeTransformer({signature:am,isTypeInstance:ce.isLocalDateTime,toStructure:function(n){var o=H_(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),i=(0,ce.int)(n.nanosecond);return new $e.structure.Structure(am,[o,i])},fromStructure:function(n){$e.structure.verifyStructSize("LocalDateTime",F8,n.size);var o=fr(n.fields,2),i=o[0],a=o[1],s=(0,ai.epochSecondAndNanoToLocalDateTime)(i,a);return ui(s,r,t)}})}function Y8(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new dr.TypeTransformer({signature:sm,isTypeInstance:function(n){return(0,ce.isDateTime)(n)&&n.timeZoneId!=null},toStructure:function(n){var o=H_(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),i=(0,ce.int)(n.nanosecond),a=n.timeZoneId;return new $e.structure.Structure(sm,[o,i,a])},fromStructure:function(n){$e.structure.verifyStructSize("DateTimeWithZoneId",x8,n.size);var o=fr(n.fields,3),i=o[0],a=o[1],s=o[2],c=(0,ai.epochSecondAndNanoToLocalDateTime)(i,a),u=new ce.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,c.nanosecond,null,s);return ui(u,r,t)}})}function Z8(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new dr.TypeTransformer({signature:um,isTypeInstance:function(n){return(0,ce.isDateTime)(n)&&n.timeZoneId==null},toStructure:function(n){var o=H_(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),i=(0,ce.int)(n.nanosecond),a=(0,ce.int)(n.timeZoneOffsetSeconds);return new $e.structure.Structure(um,[o,i,a])},fromStructure:function(n){$e.structure.verifyStructSize("DateTimeWithZoneOffset",B8,n.size);var o=fr(n.fields,3),i=o[0],a=o[1],s=o[2],c=(0,ai.epochSecondAndNanoToLocalDateTime)(i,a),u=new ce.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,c.nanosecond,s,null);return ui(u,r,t)}})}function ui(e,r,t){if(!r&&!t)return e;var n=function(s){return t?s.toBigInt():s.toNumberOrInfinity()},o=Object.create(Object.getPrototypeOf(e));for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)===!0){var a=e[i];o[i]=(0,ce.isInt)(a)?n(a):a}return Object.freeze(o),o}Hl.default=lc(lc({},j8.default),{createPoint2DTransformer:W8,createPoint3DTransformer:V8,createDurationTransformer:z8,createLocalTimeTransformer:q8,createTimeTransformer:H8,createDateTransformer:G8,createLocalDateTimeTransformer:K8,createDateTimeWithZoneIdTransformer:Y8,createDateTimeWithOffsetTransformer:Z8});var Q8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gl=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ql,"__esModule",{value:!0});var X8=Gl(Ml),cm=Gl(Ye),J8=W,eW=Gl(Hl),tW=Gl(pe),rW=J8.internal.constants.BOLT_PROTOCOL_V2,nW=function(e){Q8(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype._createPacker=function(t){return new cm.default.Packer(t)},r.prototype._createUnpacker=function(t,n){return new cm.default.Unpacker(t,n)},Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new tW.default(Object.values(eW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return rW},enumerable:!1,configurable:!0}),r}(X8.default);ql.default=nW;var Kl={},Yl={},Cv=f&&f.__assign||function(){return Cv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Cv.apply(this,arguments)},oW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yl,"__esModule",{value:!0});var iW=oW(Hl);Yl.default=Cv({},iW.default);var aW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fc=f&&f.__assign||function(){return fc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},fc.apply(this,arguments)},Zl=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kl,"__esModule",{value:!0});var uW=Zl(ql),un=Zl(Be),sn=Ue,hn=te,sW=Zl(Yl),cW=Zl(pe),G_=W;G_.internal.bookmarks.Bookmarks;var lW=G_.internal.constants.BOLT_PROTOCOL_V3,fW=G_.internal.txConfig.TxConfig,Zw="context",dW="CALL dbms.cluster.routing.getRoutingTable($".concat(Zw,")"),hW=new hn.StreamObserver,vW=function(e){aW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return lW},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new cW.default(Object.values(sW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.transformMetadata=function(t){return"t_first"in t&&(t.result_available_after=t.t_first,delete t.t_first),"t_last"in t&&(t.result_consumed_after=t.t_last,delete t.t_last),t},r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new hn.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return n._onLoginCompleted(d,a,u)}});return(0,sn.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(un.default.hello(i,a),l,!0),l},r.prototype.prepareToClose=function(){this.write(un.default.goodbye(),hW,!0)},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.impersonatedUser,c=n.notificationFilter,u=n.mode,l=n.beforeError,d=n.afterError,h=n.beforeComplete,v=n.afterComplete,_=new hn.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:v});return _.prepareToHandleSingleResponse(),(0,sn.assertDatabaseIsEmpty)(a,this._onProtocolError,_),(0,sn.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,_),(0,sn.assertNotificationFilterIsEmpty)(c,this._onProtocolError,_),this.write(un.default.begin({bookmarks:o,txConfig:i,mode:u}),_,!0),_},r.prototype.commitTransaction=function(t){var n=t===void 0?{}:t,o=n.beforeError,i=n.afterError,a=n.beforeComplete,s=n.afterComplete,c=new hn.ResultStreamObserver({server:this._server,beforeError:o,afterError:i,beforeComplete:a,afterComplete:s});return c.prepareToHandleSingleResponse(),this.write(un.default.commit(),c,!0),c},r.prototype.rollbackTransaction=function(t){var n=t===void 0?{}:t,o=n.beforeError,i=n.afterError,a=n.beforeComplete,s=n.afterComplete,c=new hn.ResultStreamObserver({server:this._server,beforeError:o,afterError:i,beforeComplete:a,afterComplete:s});return c.prepareToHandleSingleResponse(),this.write(un.default.rollback(),c,!0),c},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.impersonatedUser,l=i.notificationFilter,d=i.mode,h=i.beforeKeys,v=i.afterKeys,_=i.beforeError,y=i.afterError,p=i.beforeComplete,b=i.afterComplete,g=i.flush,w=g===void 0?!0:g,E=i.highRecordWatermark,S=E===void 0?Number.MAX_VALUE:E,T=i.lowRecordWatermark,P=T===void 0?Number.MAX_VALUE:T,I=new hn.ResultStreamObserver({server:this._server,beforeKeys:h,afterKeys:v,beforeError:_,afterError:y,beforeComplete:p,afterComplete:b,highRecordWatermark:S,lowRecordWatermark:P});return(0,sn.assertDatabaseIsEmpty)(c,this._onProtocolError,I),(0,sn.assertImpersonatedUserIsEmpty)(u,this._onProtocolError,I),(0,sn.assertNotificationFilterIsEmpty)(l,this._onProtocolError,I),this.write(un.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,mode:d}),I,!1),this.write(un.default.pullAll(),I,w),I},r.prototype.requestRoutingInformation=function(t){var n,o=t.routingContext,i=o===void 0?{}:o,a=t.sessionContext,s=a===void 0?{}:a,c=t.onError,u=t.onCompleted,l=this.run(dW,(n={},n[Zw]=i,n),fc(fc({},s),{txConfig:fW.empty()}));return new hn.ProcedureRouteObserver({resultObserver:l,onProtocolError:this._onProtocolError,onError:c,onCompleted:u})},r}(uW.default);Kl.default=vW;var Ql={},Xl={},Av=f&&f.__assign||function(){return Av=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Av.apply(this,arguments)},_W=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xl,"__esModule",{value:!0});var pW=_W(Yl);Xl.default=Av({},pW.default);var yW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),dc=f&&f.__assign||function(){return dc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},dc.apply(this,arguments)},Jl=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ql,"__esModule",{value:!0});var bW=Jl(Kl),wi=Jl(Be),$s=Ue,Th=te,mW=Jl(Xl),gW=Jl(pe),K_=W;K_.internal.bookmarks.Bookmarks;var Qw=K_.internal.constants,OW=Qw.BOLT_PROTOCOL_V4_0,wW=Qw.FETCH_ALL,EW=K_.internal.txConfig.TxConfig,Xw="context",Jw="database",SW="CALL dbms.routing.getRoutingTable($".concat(Xw,", $").concat(Jw,")"),PW=function(e){yW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return OW},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new gW.default(Object.values(mW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.impersonatedUser,c=n.notificationFilter,u=n.mode,l=n.beforeError,d=n.afterError,h=n.beforeComplete,v=n.afterComplete,_=new Th.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:v});return _.prepareToHandleSingleResponse(),(0,$s.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,_),(0,$s.assertNotificationFilterIsEmpty)(c,this._onProtocolError,_),this.write(wi.default.begin({bookmarks:o,txConfig:i,database:a,mode:u}),_,!0),_},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.impersonatedUser,l=i.notificationFilter,d=i.mode,h=i.beforeKeys,v=i.afterKeys,_=i.beforeError,y=i.afterError,p=i.beforeComplete,b=i.afterComplete,g=i.flush,w=g===void 0?!0:g,E=i.reactive,S=E===void 0?!1:E,T=i.fetchSize,P=T===void 0?wW:T,I=i.highRecordWatermark,k=I===void 0?Number.MAX_VALUE:I,D=i.lowRecordWatermark,K=D===void 0?Number.MAX_VALUE:D,V=new Th.ResultStreamObserver({server:this._server,reactive:S,fetchSize:P,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:v,beforeError:_,afterError:y,beforeComplete:p,afterComplete:b,highRecordWatermark:k,lowRecordWatermark:K});(0,$s.assertImpersonatedUserIsEmpty)(u,this._onProtocolError,V),(0,$s.assertNotificationFilterIsEmpty)(l,this._onProtocolError,V);var H=S;return this.write(wi.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,database:c,mode:d}),V,H&&w),S||this.write(wi.default.pull({n:P}),V,w),V},r.prototype._requestMore=function(t,n,o){this.write(wi.default.pull({stmtId:t,n}),o,!0)},r.prototype._requestDiscard=function(t,n){this.write(wi.default.discard({stmtId:t}),n,!0)},r.prototype._noOp=function(){},r.prototype.requestRoutingInformation=function(t){var n,o=t.routingContext,i=o===void 0?{}:o,a=t.databaseName,s=a===void 0?null:a,c=t.sessionContext,u=c===void 0?{}:c,l=t.onError,d=t.onCompleted,h=this.run(SW,(n={},n[Xw]=i,n[Jw]=s,n),dc(dc({},u),{txConfig:EW.empty()}));return new Th.ProcedureRouteObserver({resultObserver:h,onProtocolError:this._onProtocolError,onError:l,onCompleted:d})},r}(bW.default);Ql.default=PW;var ef={},tf={},Iv=f&&f.__assign||function(){return Iv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Iv.apply(this,arguments)},TW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tf,"__esModule",{value:!0});var CW=TW(Xl);tf.default=Iv({},CW.default);var AW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),rf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ef,"__esModule",{value:!0});var IW=rf(Ql),RW=rf(Be),jW=te,$W=W,NW=Ue,kW=rf(tf),MW=rf(pe),DW=$W.internal.constants.BOLT_PROTOCOL_V4_1,LW=function(e){AW(r,e);function r(t,n,o,i,a,s,c){i===void 0&&(i=function(){return null});var u=e.call(this,t,n,o,i,a,s)||this;return u._serversideRouting=c,u}return Object.defineProperty(r.prototype,"version",{get:function(){return DW},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new MW.default(Object.values(kW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new jW.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return n._onLoginCompleted(d,a,u)}});return(0,NW.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(RW.default.hello(i,a,this._serversideRouting),l,!0),l},r}(IW.default);ef.default=LW;var nf={},of={},Rv=f&&f.__assign||function(){return Rv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Rv.apply(this,arguments)},UW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(of,"__esModule",{value:!0});var FW=UW(tf);of.default=Rv({},FW.default);var BW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Y_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nf,"__esModule",{value:!0});var xW=Y_(ef),WW=W,VW=Y_(of),zW=Y_(pe),qW=WW.internal.constants.BOLT_PROTOCOL_V4_2,HW=function(e){BW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return qW},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new zW.default(Object.values(VW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r}(xW.default);nf.default=HW;var ss={},af={},jv=f&&f.__assign||function(){return jv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},jv.apply(this,arguments)},GW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(af,"__esModule",{value:!0});var KW=GW(of);af.default=jv({},KW.default);var cs={},ls={},$v=f&&f.__assign||function(){return $v=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},$v.apply(this,arguments)},YW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ls,"__esModule",{value:!0});var ZW=YW(af);ls.default=$v({},ZW.default);var e1=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},QW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cs,"__esModule",{value:!0});var hc=Ye,st=W,t1=QW(ls),XW=or,JW=An,Ji=st.internal.temporalUtil.localDateTimeToEpochSecond,lm=73,eV=3,fm=105,tV=3;function rV(e,r){var t=e.disableLosslessIntegers,n=e.useBigInt,o=t1.default.createDateTimeWithZoneIdTransformer(e);return o.extendsWith({signature:fm,fromStructure:function(i){hc.structure.verifyStructSize("DateTimeWithZoneId",tV,i.size);var a=e1(i.fields,3),s=a[0],c=a[1],u=a[2],l=Nv(u,s,c),d=new st.DateTime(l.year,l.month,l.day,l.hour,l.minute,l.second,(0,st.int)(c),l.timeZoneOffsetSeconds,u);return r1(d,t,n)},toStructure:function(i){var a=Ji(i.year,i.month,i.day,i.hour,i.minute,i.second,i.nanosecond),s=i.timeZoneOffsetSeconds!=null?i.timeZoneOffsetSeconds:nV(i.timeZoneId,a,i.nanosecond);i.timeZoneOffsetSeconds==null&&r.warn('DateTime objects without "timeZoneOffsetSeconds" property are prune to bugs related to ambiguous times. For instance, 2022-10-30T2:30:00[Europe/Berlin] could be GMT+1 or GMT+2.');var c=a.subtract(s),u=(0,st.int)(i.nanosecond),l=i.timeZoneId;return new hc.structure.Structure(fm,[c,u,l])}})}function nV(e,r,t){var n=Nv(e,r,t),o=Ji(n.year,n.month,n.day,n.hour,n.minute,n.second,t),i=o.subtract(r),a=r.subtract(i),s=Nv(e,a,t),c=Ji(s.year,s.month,s.day,s.hour,s.minute,s.second,t),u=c.subtract(a);return u}var Ch=new Map;function oV(e){if(!Ch.has(e)){var r=new Intl.DateTimeFormat("en-US",{timeZone:e,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"});Ch.set(e,r)}return Ch.get(e)}function Nv(e,r,t){var n=oV(e),o=(0,st.int)(r).multiply(1e3).add((0,st.int)(t).div(1e6)).toNumber(),i=n.formatToParts(o),a=i.reduce(function(c,u){return u.type==="era"?c.adjustEra=u.value.toUpperCase()==="B"?function(l){return l.subtract(1).negate()}:JW.identity:u.type==="hour"?c.hour=(0,st.int)(u.value).modulo(24):u.type!=="literal"&&(c[u.type]=(0,st.int)(u.value)),c},{});a.year=a.adjustEra(a.year);var s=Ji(a.year,a.month,a.day,a.hour,a.minute,a.second,a.nanosecond);return a.timeZoneOffsetSeconds=s.subtract(r),a.hour=a.hour.modulo(24),a}function iV(e){var r=e.disableLosslessIntegers,t=e.useBigInt,n=t1.default.createDateTimeWithOffsetTransformer(e);return n.extendsWith({signature:lm,toStructure:function(o){var i=Ji(o.year,o.month,o.day,o.hour,o.minute,o.second,o.nanosecond),a=(0,st.int)(o.nanosecond),s=(0,st.int)(o.timeZoneOffsetSeconds),c=i.subtract(s);return new hc.structure.Structure(lm,[c,a,s])},fromStructure:function(o){hc.structure.verifyStructSize("DateTimeWithZoneOffset",eV,o.size);var i=e1(o.fields,3),a=i[0],s=i[1],c=i[2],u=(0,st.int)(a).add(c),l=(0,XW.epochSecondAndNanoToLocalDateTime)(u,s),d=new st.DateTime(l.year,l.month,l.day,l.hour,l.minute,l.second,l.nanosecond,c,null);return r1(d,r,t)}})}function r1(e,r,t){if(!r&&!t)return e;var n=function(s){return t?s.toBigInt():s.toNumberOrInfinity()},o=Object.create(Object.getPrototypeOf(e));for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)===!0){var a=e[i];o[i]=(0,st.isInt)(a)?n(a):a}return Object.freeze(o),o}cs.default={createDateTimeWithZoneIdTransformer:rV,createDateTimeWithOffsetTransformer:iV};var aV=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),vc=f&&f.__assign||function(){return vc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},vc.apply(this,arguments)},fs=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ss,"__esModule",{value:!0});var uV=fs(nf),dm=fs(Be),hm=te,sV=Ue,vm=fs(af),cV=fs(cs),_m=fs(pe),n1=W,lV=n1.internal.bookmarks.Bookmarks,fV=n1.internal.constants.BOLT_PROTOCOL_V4_3,dV=function(e){aV(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return fV},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new _m.default(Object.values(vm.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.requestRoutingInformation=function(t){var n=t.routingContext,o=n===void 0?{}:n,i=t.databaseName,a=i===void 0?null:i,s=t.sessionContext,c=s===void 0?{}:s,u=t.onError,l=t.onCompleted,d=new hm.RouteObserver({onProtocolError:this._onProtocolError,onError:u,onCompleted:l}),h=c.bookmarks||lV.empty();return this.write(dm.default.route(o,h.values(),a),d,!0),d},r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new hm.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return d.patch_bolt!==void 0&&n._applyPatches(d.patch_bolt),n._onLoginCompleted(d,a,u)}});return(0,sV.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(dm.default.hello(i,a,this._serversideRouting,["utc"]),l,!0),l},r.prototype._applyPatches=function(t){t.includes("utc")&&this._applyUtcPatch()},r.prototype._applyUtcPatch=function(){var t=this;this._transformer=new _m.default(Object.values(vc(vc({},vm.default),cV.default)).map(function(n){return n(t._config,t._log)}))},r}(uV.default);ss.default=dV;var uf={},hV=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_c=f&&f.__assign||function(){return _c=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_c.apply(this,arguments)},ds=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(uf,"__esModule",{value:!0});var vV=ds(ss),o1=W,Ns=ds(Be),Ah=te,pm=Ue,ym=ds(ls),_V=ds(cs),bm=ds(pe),i1=o1.internal.constants,pV=i1.BOLT_PROTOCOL_V4_4,yV=i1.FETCH_ALL,bV=o1.internal.bookmarks.Bookmarks,mV=function(e){hV(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return pV},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new bm.default(Object.values(ym.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.requestRoutingInformation=function(t){var n=t.routingContext,o=n===void 0?{}:n,i=t.databaseName,a=i===void 0?null:i,s=t.impersonatedUser,c=s===void 0?null:s,u=t.sessionContext,l=u===void 0?{}:u,d=t.onError,h=t.onCompleted,v=new Ah.RouteObserver({onProtocolError:this._onProtocolError,onError:d,onCompleted:h}),_=l.bookmarks||bV.empty();return this.write(Ns.default.routeV4x4(o,_.values(),{databaseName:a,impersonatedUser:c}),v,!0),v},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,v=i.afterKeys,_=i.beforeError,y=i.afterError,p=i.beforeComplete,b=i.afterComplete,g=i.flush,w=g===void 0?!0:g,E=i.reactive,S=E===void 0?!1:E,T=i.fetchSize,P=T===void 0?yV:T,I=i.highRecordWatermark,k=I===void 0?Number.MAX_VALUE:I,D=i.lowRecordWatermark,K=D===void 0?Number.MAX_VALUE:D,V=new Ah.ResultStreamObserver({server:this._server,reactive:S,fetchSize:P,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:v,beforeError:_,afterError:y,beforeComplete:p,afterComplete:b,highRecordWatermark:k,lowRecordWatermark:K});(0,pm.assertNotificationFilterIsEmpty)(d,this._onProtocolError,V);var H=S;return this.write(Ns.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l}),V,H&&w),S||this.write(Ns.default.pull({n:P}),V,w),V},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.mode,c=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,d=n.afterError,h=n.beforeComplete,v=n.afterComplete,_=new Ah.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:v});return _.prepareToHandleSingleResponse(),(0,pm.assertNotificationFilterIsEmpty)(u,this._onProtocolError,_),this.write(Ns.default.begin({bookmarks:o,txConfig:i,database:a,mode:s,impersonatedUser:c}),_,!0),_},r.prototype._applyUtcPatch=function(){var t=this;this._transformer=new bm.default(Object.values(_c(_c({},ym.default),_V.default)).map(function(n){return n(t._config,t._log)}))},r}(vV.default);uf.default=mV;var sf={},cf={},Vi=f&&f.__assign||function(){return Vi=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Vi.apply(this,arguments)},Z_=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},a1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cf,"__esModule",{value:!0});var Q_=Ye,X_=W,lf=a1(ls),gV=a1(cs),OV=4,wV=8,EV=4;function SV(e){var r=lf.default.createNodeTransformer(e);return r.extendsWith({fromStructure:function(t){Q_.structure.verifyStructSize("Node",OV,t.size);var n=Z_(t.fields,4),o=n[0],i=n[1],a=n[2],s=n[3];return new X_.Node(o,i,a,s)}})}function PV(e){var r=lf.default.createRelationshipTransformer(e);return r.extendsWith({fromStructure:function(t){Q_.structure.verifyStructSize("Relationship",wV,t.size);var n=Z_(t.fields,8),o=n[0],i=n[1],a=n[2],s=n[3],c=n[4],u=n[5],l=n[6],d=n[7];return new X_.Relationship(o,i,a,s,c,u,l,d)}})}function TV(e){var r=lf.default.createUnboundRelationshipTransformer(e);return r.extendsWith({fromStructure:function(t){Q_.structure.verifyStructSize("UnboundRelationship",EV,t.size);var n=Z_(t.fields,4),o=n[0],i=n[1],a=n[2],s=n[3];return new X_.UnboundRelationship(o,i,a,s)}})}cf.default=Vi(Vi(Vi({},lf.default),gV.default),{createNodeTransformer:SV,createRelationshipTransformer:PV,createUnboundRelationshipTransformer:TV});var CV=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ff=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sf,"__esModule",{value:!0});var AV=ff(uf),IV=Ue,RV=ff(cf),jV=ff(pe),$V=ff(Be),NV=te,kV=W,MV=kV.internal.constants.BOLT_PROTOCOL_V5_0,DV=function(e){CV(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return MV},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new jV.default(Object.values(RV.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new NV.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return n._onLoginCompleted(d,a,u)}});return(0,IV.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write($V.default.hello(i,a,this._serversideRouting),l,!0),l},r}(AV.default);sf.default=DV;var df={},hf={},kv=f&&f.__assign||function(){return kv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},kv.apply(this,arguments)},LV=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hf,"__esModule",{value:!0});var UV=LV(cf);hf.default=kv({},UV.default);var FV=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),pc=f&&f.__assign||function(){return pc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},pc.apply(this,arguments)},vf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(df,"__esModule",{value:!0});var BV=vf(sf),xV=Ue,WV=vf(hf),VV=vf(pe),Ih=vf(Be),Rh=te,zV=W,qV=zV.internal.constants.BOLT_PROTOCOL_V5_1,HV=function(e){FV(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return qV},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new VV.default(Object.values(WV.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l={},d=new Rh.LoginObserver({onError:function(h){return n._onLoginError(h,c)},onCompleted:function(h){return l.metadata=h,n._onLoginCompleted(h)}});return(0,xV.assertNotificationFilterIsEmpty)(s,this._onProtocolError,d),this.write(Ih.default.hello5x1(i,this._serversideRouting),d,!1),this.logon({authToken:a,onComplete:function(h){return u(pc(pc({},h),l.metadata))},onError:c,flush:!0})},r.prototype.logon=function(t){var n=this,o=t===void 0?{}:t,i=o.authToken,a=o.onComplete,s=o.onError,c=o.flush,u=new Rh.LoginObserver({onCompleted:function(){return n._onLoginCompleted(null,i,a)},onError:function(l){return n._onLoginError(l,s)}});return this.write(Ih.default.logon(i),u,c),u},r.prototype.logoff=function(t){var n=t===void 0?{}:t,o=n.onComplete,i=n.onError,a=n.flush,s=new Rh.LogoffObserver({onCompleted:o,onError:i});return this.write(Ih.default.logoff(),s,a),s},r}(BV.default);df.default=HV;var _f={},pf={},Mv=f&&f.__assign||function(){return Mv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Mv.apply(this,arguments)},GV=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pf,"__esModule",{value:!0});var KV=GV(hf);pf.default=Mv({},KV.default);var YV=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),yc=f&&f.__assign||function(){return yc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},yc.apply(this,arguments)},yf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_f,"__esModule",{value:!0});var ZV=yf(df),QV=yf(pf),XV=yf(pe),ks=yf(Be),jh=te,JV=W,u1=JV.internal.constants,ez=u1.BOLT_PROTOCOL_V5_2,tz=u1.FETCH_ALL,rz=function(e){YV(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return ez},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new XV.default(Object.values(QV.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l={},d=new jh.LoginObserver({onError:function(h){return n._onLoginError(h,c)},onCompleted:function(h){return l.metadata=h,n._onLoginCompleted(h)}});return this.write(ks.default.hello5x2(i,s,this._serversideRouting),d,!1),this.logon({authToken:a,onComplete:function(h){return u(yc(yc({},h),l.metadata))},onError:c,flush:!0})},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.mode,c=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,d=n.afterError,h=n.beforeComplete,v=n.afterComplete,_=new jh.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:v});return _.prepareToHandleSingleResponse(),this.write(ks.default.begin({bookmarks:o,txConfig:i,database:a,mode:s,impersonatedUser:c,notificationFilter:u}),_,!0),_},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,v=i.afterKeys,_=i.beforeError,y=i.afterError,p=i.beforeComplete,b=i.afterComplete,g=i.flush,w=g===void 0?!0:g,E=i.reactive,S=E===void 0?!1:E,T=i.fetchSize,P=T===void 0?tz:T,I=i.highRecordWatermark,k=I===void 0?Number.MAX_VALUE:I,D=i.lowRecordWatermark,K=D===void 0?Number.MAX_VALUE:D,V=new jh.ResultStreamObserver({server:this._server,reactive:S,fetchSize:P,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:v,beforeError:_,afterError:y,beforeComplete:p,afterComplete:b,highRecordWatermark:k,lowRecordWatermark:K}),H=S;return this.write(ks.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l,notificationFilter:d}),V,H&&w),S||this.write(ks.default.pull({n:P}),V,w),V},r}(ZV.default);_f.default=rz;var bf={},mf={},Dv=f&&f.__assign||function(){return Dv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Dv.apply(this,arguments)},nz=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(mf,"__esModule",{value:!0});var oz=nz(pf);mf.default=Dv({},oz.default);var iz=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bc=f&&f.__assign||function(){return bc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},bc.apply(this,arguments)},gf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bf,"__esModule",{value:!0});var az=gf(_f),uz=gf(mf),sz=gf(pe),cz=gf(Be),lz=te,fz=W,dz=fz.internal.constants.BOLT_PROTOCOL_V5_3,hz=function(e){iz(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return dz},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new sz.default(Object.values(uz.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent,a=o.boltAgent,s=o.authToken,c=o.notificationFilter,u=o.onError,l=o.onComplete,d={},h=new lz.LoginObserver({onError:function(v){return n._onLoginError(v,u)},onCompleted:function(v){return d.metadata=v,n._onLoginCompleted(v)}});return this.write(cz.default.hello5x3(i,a,c,this._serversideRouting),h,!1),this.logon({authToken:s,onComplete:function(v){return l(bc(bc({},v),d.metadata))},onError:u,flush:!0})},r}(az.default);bf.default=hz;var Of={},wf={},Lv=f&&f.__assign||function(){return Lv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Lv.apply(this,arguments)},vz=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wf,"__esModule",{value:!0});var _z=vz(mf);wf.default=Lv({},_z.default);var pz=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ef=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Of,"__esModule",{value:!0});var yz=Ef(bf),bz=Ef(wf),mz=Ef(Be),gz=te,Oz=Ef(pe),wz=W,Ez=wz.internal.constants.BOLT_PROTOCOL_V5_4,Sz=function(e){pz(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return Ez},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Oz.default(Object.values(bz.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.telemetry=function(t,n){var o=t.api,i=n===void 0?{}:n,a=i.onError,s=i.onCompleted,c=new gz.TelemetryObserver({onCompleted:s,onError:a});return this.write(mz.default.telemetry({api:o}),c,!1),c},r}(yz.default);Of.default=Sz;var Sf={},Pf={},Uv=f&&f.__assign||function(){return Uv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Uv.apply(this,arguments)},Pz=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pf,"__esModule",{value:!0});var Tz=Pz(wf);Pf.default=Uv({},Tz.default);var Cz=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),gr=f&&f.__assign||function(){return gr=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},gr.apply(this,arguments)},Tf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sf,"__esModule",{value:!0});var Az=Tf(Of),Iz=Tf(Pf),Rz=Tf(pe),Ms=Tf(Be),$h=te,jz=W,s1=jz.internal.constants,$z=s1.BOLT_PROTOCOL_V5_5,Nz=s1.FETCH_ALL,kz=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),Mz=function(e){Cz(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return $z},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Rz.default(Object.values(Iz.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent,a=o.boltAgent,s=o.authToken,c=o.notificationFilter,u=o.onError,l=o.onComplete,d={},h=new $h.LoginObserver({onError:function(v){return n._onLoginError(v,u)},onCompleted:function(v){return d.metadata=v,n._onLoginCompleted(v)}});return this.write(Ms.default.hello5x5(i,a,c,this._serversideRouting),h,!1),this.logon({authToken:s,onComplete:function(v){return l(gr(gr({},v),d.metadata))},onError:u,flush:!0})},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.mode,c=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,d=n.afterError,h=n.beforeComplete,v=n.afterComplete,_=new $h.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:v});return _.prepareToHandleSingleResponse(),this.write(Ms.default.begin5x5({bookmarks:o,txConfig:i,database:a,mode:s,impersonatedUser:c,notificationFilter:u}),_,!0),_},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,v=i.afterKeys,_=i.beforeError,y=i.afterError,p=i.beforeComplete,b=i.afterComplete,g=i.flush,w=g===void 0?!0:g,E=i.reactive,S=E===void 0?!1:E,T=i.fetchSize,P=T===void 0?Nz:T,I=i.highRecordWatermark,k=I===void 0?Number.MAX_VALUE:I,D=i.lowRecordWatermark,K=D===void 0?Number.MAX_VALUE:D,V=new $h.ResultStreamObserver({server:this._server,reactive:S,fetchSize:P,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:v,beforeError:_,afterError:y,beforeComplete:p,afterComplete:b,highRecordWatermark:k,lowRecordWatermark:K,enrichMetadata:this._enrichMetadata}),H=S;return this.write(Ms.default.runWithMetadata5x5(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l,notificationFilter:d}),V,H&&w),S||this.write(Ms.default.pull({n:P}),V,w),V},r.prototype._enrichMetadata=function(t){return Array.isArray(t.statuses)&&(t.statuses=t.statuses.map(function(n){return gr(gr({},n),{description:n.neo4j_code!=null?n.status_description:n.description,diagnostic_record:n.diagnostic_record!==null?gr(gr({},kz),n.diagnostic_record):null})})),t},r}(Az.default);Sf.default=Mz;var Cf={},Af={},Fv=f&&f.__assign||function(){return Fv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Fv.apply(this,arguments)},Dz=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Af,"__esModule",{value:!0});var Lz=Dz(Pf);Af.default=Fv({},Lz.default);var Uz=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),to=f&&f.__assign||function(){return to=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},to.apply(this,arguments)},J_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cf,"__esModule",{value:!0});var Fz=J_(Sf),Bz=J_(Af),xz=J_(pe),Wz=W,Vz=Wz.internal.constants.BOLT_PROTOCOL_V5_6,zz=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),qz=function(e){Uz(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return Vz},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new xz.default(Object.values(Bz.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype._enrichMetadata=function(t){return Array.isArray(t.statuses)&&(t.statuses=t.statuses.map(function(n){return to(to({},n),{diagnostic_record:n.diagnostic_record!==null?to(to({},zz),n.diagnostic_record):null})})),t},r}(Fz.default);Cf.default=qz;var If={},Rf={},Bv=f&&f.__assign||function(){return Bv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Bv.apply(this,arguments)},Hz=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rf,"__esModule",{value:!0});var Gz=Hz(Af);Rf.default=Bv({},Gz.default);var Kz=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ro=f&&f.__assign||function(){return ro=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ro.apply(this,arguments)},ep=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(If,"__esModule",{value:!0});var Yz=ep(Cf),Zz=ep(Rf),Qz=ep(pe),Xz=W,Jz=Xz.internal.constants.BOLT_PROTOCOL_V5_7,eq=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),tq=function(e){Kz(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return Jz},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Qz.default(Object.values(Zz.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.enrichErrorMetadata=function(t){return ro(ro({},t),{cause:t.cause!==null&&t.cause!==void 0?this.enrichErrorMetadata(t.cause):null,code:t.neo4j_code,diagnostic_record:t.diagnostic_record!==null?ro(ro({},eq),t.diagnostic_record):null})},r}(Yz.default);If.default=tq;var tp={},rp={},xv=f&&f.__assign||function(){return xv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},xv.apply(this,arguments)},rq=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rp,"__esModule",{value:!0});var nq=rq(Rf);rp.default=xv({},nq.default);var oq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),jf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tp,"__esModule",{value:!0});var iq=jf(If),aq=jf(rp),uq=jf(pe),mm=jf(Be),sq=te,cq=W,c1=cq.internal.constants,lq=c1.BOLT_PROTOCOL_V5_8,fq=c1.FETCH_ALL,dq=function(e){oq(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return lq},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new uq.default(Object.values(aq.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,v=i.afterKeys,_=i.beforeError,y=i.afterError,p=i.beforeComplete,b=i.afterComplete,g=i.flush,w=g===void 0?!0:g,E=i.reactive,S=E===void 0?!1:E,T=i.fetchSize,P=T===void 0?fq:T,I=i.highRecordWatermark,k=I===void 0?Number.MAX_VALUE:I,D=i.lowRecordWatermark,K=D===void 0?Number.MAX_VALUE:D,V=i.onDb,H=new sq.ResultStreamObserver({server:this._server,reactive:S,fetchSize:P,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:v,beforeError:_,afterError:y,beforeComplete:p,afterComplete:b,highRecordWatermark:k,lowRecordWatermark:K,enrichMetadata:this._enrichMetadata,onDb:V}),ue=S;return this.write(mm.default.runWithMetadata5x5(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l,notificationFilter:d}),H,ue&&w),S||this.write(mm.default.pull({n:P}),H,w),H},r}(iq.default);tp.default=dq;var np={};Object.defineProperty(np,"__esModule",{value:!0});var pr=W,hq=112,vq=113,_q=126,pq=127;function Qt(){}function Nh(e){return e}var yq={onNext:Qt,onCompleted:Qt,onError:Qt},bq=function(){function e(r){var t=r===void 0?{}:r,n=t.transformMetadata,o=t.enrichErrorMetadata,i=t.log,a=t.observer;this._pendingObservers=[],this._log=i,this._transformMetadata=n||Nh,this._enrichErrorMetadata=o||Nh,this._observer=Object.assign({onObserversCountChange:Qt,onError:Qt,onFailure:Qt,onErrorApplyTransformation:Nh},a)}return Object.defineProperty(e.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),e.prototype.handleResponse=function(r){var t=r.fields[0];switch(r.signature){case vq:this._log.isDebugEnabled()&&this._log.debug("S: RECORD ".concat(pr.json.stringify(r))),this._currentObserver.onNext(t);break;case hq:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS ".concat(pr.json.stringify(r)));try{var n=this._transformMetadata(t);this._currentObserver.onCompleted(n)}finally{this._updateCurrentObserver()}break;case pq:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE ".concat(pr.json.stringify(r)));try{this._currentFailure=this._handleErrorPayload(this._enrichErrorMetadata(t)),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case _q:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED ".concat(pr.json.stringify(r)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,pr.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,pr.newError)("Unknown Bolt protocol message: "+r))}},e.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onObserversCountChange(this._observersCount)},Object.defineProperty(e.prototype,"_observersCount",{get:function(){return this._currentObserver==null?this._pendingObservers.length:this._pendingObservers.length+1},enumerable:!1,configurable:!0}),e.prototype._queueObserver=function(r){return r=r||yq,r.onCompleted=r.onCompleted||Qt,r.onError=r.onError||Qt,r.onNext=r.onNext||Qt,this._currentObserver===void 0?this._currentObserver=r:this._pendingObservers.push(r),this._observer.onObserversCountChange(this._observersCount),!0},e.prototype._notifyErrorToObservers=function(r){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(r);this._pendingObservers.length>0;){var t=this._pendingObservers.shift();t&&t.onError&&t.onError(r)}},e.prototype.hasOngoingObservableRequests=function(){return this._currentObserver!=null||this._pendingObservers.length>0},e.prototype._resetFailure=function(){this._currentFailure=null},e.prototype._handleErrorPayload=function(r){var t=mq(r.code),n=r.cause!=null?this._handleErrorCause(r.cause):void 0,o=(0,pr.newError)(r.message,t,n,r.gql_status,r.description,r.diagnostic_record);return this._observer.onErrorApplyTransformation(o)},e.prototype._handleErrorCause=function(r){var t=r.cause!=null?this._handleErrorCause(r.cause):void 0,n=(0,pr.newGQLError)(r.message,t,r.gql_status,r.description,r.diagnostic_record);return this._observer.onErrorApplyTransformation(n)},e}();np.default=bq;function mq(e){return e==="Neo.TransientError.Transaction.Terminated"?"Neo.ClientError.Transaction.Terminated":e==="Neo.TransientError.Transaction.LockClientStopped"?"Neo.ClientError.Transaction.LockClientStopped":e}var Ne=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(W_,"__esModule",{value:!0});var gq=W,Oq=Ne(Ml),wq=Ne(ql),Eq=Ne(Kl),Sq=Ne(Ql),Pq=Ne(ef),Tq=Ne(nf),Cq=Ne(ss),Aq=Ne(uf),Iq=Ne(sf),Rq=Ne(df),jq=Ne(_f),$q=Ne(bf),Nq=Ne(Of),kq=Ne(Sf),Mq=Ne(Cf),Dq=Ne(If),Lq=Ne(tp),Uq=Ne(np);function Fq(e){var r=e===void 0?{}:e,t=r.version,n=r.chunker,o=r.dechunker,i=r.channel,a=r.disableLosslessIntegers,s=r.useBigInt,c=r.serversideRouting,u=r.server,l=r.log,d=r.observer,h=function(v){var _=new Uq.default({transformMetadata:v.transformMetadata.bind(v),enrichErrorMetadata:v.enrichErrorMetadata.bind(v),log:l,observer:d});return i.onerror=d.onError.bind(d),i.onmessage=function(y){return o.write(y)},o.onmessage=function(y){try{_.handleResponse(v.unpack(y))}catch(p){return d.onError(p)}},_};return Bq(t,u,n,{disableLosslessIntegers:a,useBigInt:s},c,h,d.onProtocolError.bind(d),l)}W_.default=Fq;function Bq(e,r,t,n,o,i,a,s){switch(e){case 1:return new Oq.default(r,t,n,i,s,a);case 2:return new wq.default(r,t,n,i,s,a);case 3:return new Eq.default(r,t,n,i,s,a);case 4:return new Sq.default(r,t,n,i,s,a);case 4.1:return new Pq.default(r,t,n,i,s,a,o);case 4.2:return new Tq.default(r,t,n,i,s,a,o);case 4.3:return new Cq.default(r,t,n,i,s,a,o);case 4.4:return new Aq.default(r,t,n,i,s,a,o);case 5:return new Iq.default(r,t,n,i,s,a,o);case 5.1:return new Rq.default(r,t,n,i,s,a,o);case 5.2:return new jq.default(r,t,n,i,s,a,o);case 5.3:return new $q.default(r,t,n,i,s,a,o);case 5.4:return new Nq.default(r,t,n,i,s,a,o);case 5.5:return new kq.default(r,t,n,i,s,a,o);case 5.6:return new Mq.default(r,t,n,i,s,a,o);case 5.7:return new Dq.default(r,t,n,i,s,a,o);case 5.8:return new Lq.default(r,t,n,i,s,a,o);default:throw(0,gq.newError)("Unknown Bolt protocol version: "+e)}}(function(e){var r=f&&f.__createBinding||(Object.create?function(c,u,l,d){d===void 0&&(d=l);var h=Object.getOwnPropertyDescriptor(u,l);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(c,d,h)}:function(c,u,l,d){d===void 0&&(d=l),c[d]=u[l]}),t=f&&f.__exportStar||function(c,u){for(var l in c)l!=="default"&&!Object.prototype.hasOwnProperty.call(u,l)&&r(u,c,l)},n=f&&f.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.RawRoutingTable=e.BoltProtocol=void 0;var o=n(k_),i=n(W_),a=n(ss),s=n(Dl);t(te,e),e.BoltProtocol=a.default,e.RawRoutingTable=s.default,e.default={handshake:o.default,create:i.default}})(N_);var l1={},$f={},xq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty($f,"__esModule",{value:!0});var Wq=W,Vq=function(e){xq(r,e);function r(t){var n=e.call(this)||this;return n._connection=t,n}return r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t;n.accessMode,n.database,n.bookmarks;var o=this._connection;return this._connection=null,Promise.resolve(o)},r}(Wq.ConnectionProvider);$f.default=Vq;var hs={},Nf={},vs={},zq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(vs,"__esModule",{value:!0});var qq=W,Hq=function(e){zq(r,e);function r(t){var n=e.call(this)||this;return n._errorHandler=t,n}return Object.defineProperty(r.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"authToken",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(r.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.connect=function(t,n,o,i){throw new Error("not implemented")},r.prototype.write=function(t,n,o){throw new Error("not implemented")},r.prototype.close=function(){throw new Error("not implemented")},r.prototype.handleAndTransformError=function(t,n){return this._errorHandler?this._errorHandler.handleAndTransformError(t,n,this):t},r}(qq.Connection);vs.default=Hq;var _s={},Gq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),gm=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Om=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},f1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_s,"__esModule",{value:!0});_s.createChannelConnection=void 0;var Ds=Vn,no=W,Kq=f1(vs),wm=f1(N_),Yq=no.error.PROTOCOL_ERROR,Zq=no.internal.logger.Logger,Qq=0;function Xq(e,r,t,n,o,i,a,s){i===void 0&&(i=null),s===void 0&&(s=function(l){return new Ds.Channel(l)});var c=new Ds.ChannelConfig(e,r,t.errorCode(),o),u=s(c);return wm.default.handshake(u,n).then(function(l){var d=l.protocolVersion,h=l.consumeRemainingBuffer,v=new Ds.Chunker(u),_=new Ds.Dechunker,y=function(b){return wm.default.create({version:d,channel:u,chunker:v,dechunker:_,disableLosslessIntegers:r.disableLosslessIntegers,useBigInt:r.useBigInt,serversideRouting:i,server:b.server,log:b.logger,observer:{onObserversCountChange:b._handleOngoingRequestsNumberChange.bind(b),onError:b._handleFatalError.bind(b),onFailure:b._resetOnFailure.bind(b),onProtocolError:b._handleProtocolError.bind(b),onErrorApplyTransformation:function(g){return b.handleAndTransformError(g,b._address)}}})},p=new d1(u,t,e,n,r.disableLosslessIntegers,i,v,r.notificationFilter,y,r.telemetryDisabled,a);return h(function(b){return _.write(b)}),p}).catch(function(l){return u.close().then(function(){throw l})})}_s.createChannelConnection=Xq;var d1=function(e){Gq(r,e);function r(t,n,o,i,a,s,c,u,l,d,h){a===void 0&&(a=!1),s===void 0&&(s=null),h===void 0&&(h=function(_){});var v=e.call(this,n)||this;return v._authToken=null,v._idle=!1,v._reseting=!1,v._resetObservers=[],v._id=Qq++,v._address=o,v._server={address:o.asHostPort()},v._creationTimestamp=Date.now(),v._disableLosslessIntegers=a,v._ch=t,v._chunker=c,v._log=Jq(v,i),v._serversideRouting=s,v._notificationFilter=u,v._telemetryDisabledDriverConfig=d===!0,v._telemetryDisabledConnection=!0,v._ssrCallback=h,v._dbConnectionId=null,v._protocol=l(v),v._isBroken=!1,v._log.isDebugEnabled()&&v._log.debug("created towards ".concat(o)),v}return r.prototype.beginTransaction=function(t){return this._sendTelemetryIfEnabled(t),this._protocol.beginTransaction(t)},r.prototype.run=function(t,n,o){return this._sendTelemetryIfEnabled(o),this._protocol.run(t,n,o)},r.prototype._sendTelemetryIfEnabled=function(t){this._telemetryDisabledConnection||this._telemetryDisabledDriverConfig||t==null||t.apiTelemetryConfig==null||this._protocol.telemetry({api:t.apiTelemetryConfig.api},{onCompleted:t.apiTelemetryConfig.onTelemetrySuccess,onError:t.beforeError})},r.prototype.commitTransaction=function(t){return this._protocol.commitTransaction(t)},r.prototype.rollbackTransaction=function(t){return this._protocol.rollbackTransaction(t)},r.prototype.getProtocolVersion=function(){return this._protocol.version},Object.defineProperty(r.prototype,"authToken",{get:function(){return this._authToken},set:function(t){this._authToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return this._protocol.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(t){this._dbConnectionId=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){return this._idleTimestamp},set:function(t){this._idleTimestamp=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){return this._creationTimestamp},enumerable:!1,configurable:!0}),r.prototype.connect=function(t,n,o,i){return gm(this,void 0,void 0,function(){var a=this;return Om(this,function(s){switch(s.label){case 0:if(this._protocol.initialized&&!this._protocol.supportsReAuth)throw(0,no.newError)("Connection does not support re-auth");return this._authToken=o,this._protocol.initialized?[3,2]:[4,this._initialize(t,n,o)];case 1:return[2,s.sent()];case 2:return i?[4,new Promise(function(c,u){a._protocol.logoff({onError:u}),a._protocol.logon({authToken:o,onError:u,onComplete:function(){return c(a)},flush:!0})})]:[3,4];case 3:return[2,s.sent()];case 4:return this._protocol.logoff(),this._protocol.logon({authToken:o,flush:!0}),[2,this]}})})},r.prototype._initialize=function(t,n,o){var i=this,a=this;return new Promise(function(s,c){i._protocol.initialize({userAgent:t,boltAgent:n,authToken:o,notificationFilter:i._notificationFilter,onError:function(u){return c(u)},onComplete:function(u){var l;if(u){var d=u.server;(!i.version||d)&&(i.version=d);var h=u.connection_id;if(i.databaseId||(i.databaseId=h),u.hints){var v=u.hints["connection.recv_timeout_seconds"];if(v!=null){var _=(0,no.toNumber)(v);Number.isInteger(_)&&_>0?i._ch.setupReceiveTimeout(_*1e3):i._log.info("Server located at ".concat(i._address," supplied an invalid connection receive timeout value (").concat(_,"). ")+"Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}var y=u.hints["telemetry.enabled"];y===!0&&(i._telemetryDisabledConnection=!1),i.SSREnabledHint=u.hints["ssr.enabled"]}i._ssrCallback((l=i.SSREnabledHint)!==null&&l!==void 0?l:!1,"OPEN")}s(a)}})})},r.prototype.protocol=function(){return this._protocol},Object.defineProperty(r.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return this._server.version},set:function(t){this._server.version=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),r.prototype._handleFatalError=function(t){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||t,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by ".concat(this._error," (").concat(no.json.stringify(this._error),")")),this._protocol.notifyFatalError(this._error)},r.prototype._setIdle=function(t){this._idle=!0,this._ch.stopReceiveTimeout(),this._protocol.queueObserverIfProtocolIsNotBroken(t)},r.prototype._unsetIdle=function(){this._idle=!1,this._updateCurrentObserver()},r.prototype._queueObserver=function(t){return this._protocol.queueObserverIfProtocolIsNotBroken(t)},r.prototype.hasOngoingObservableRequests=function(){return!this._idle&&this._protocol.hasOngoingObservableRequests()},r.prototype.resetAndFlush=function(){var t=this;return new Promise(function(n,o){t._reset({onError:function(i){if(t._isBroken)o(i);else{var a=t._handleProtocolError("Received FAILURE as a response for RESET: ".concat(i));o(a)}},onComplete:function(){n()}})})},r.prototype._resetOnFailure=function(){var t=this;this.isOpen()&&this._reset({onError:function(){t._protocol.resetFailure()},onComplete:function(){t._protocol.resetFailure()}})},r.prototype._reset=function(t){var n=this;if(this._reseting){this._protocol.isLastMessageReset()?this._resetObservers.push(t):this._protocol.reset({onError:function(i){t.onError(i)},onComplete:function(){t.onComplete()}});return}this._resetObservers.push(t),this._reseting=!0;var o=function(i){n._reseting=!1;var a=n._resetObservers;n._resetObservers=[],a.forEach(i)};this._protocol.reset({onError:function(i){o(function(a){return a.onError(i)})},onComplete:function(){o(function(i){return i.onComplete()})}})},r.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},r.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},r.prototype._handleOngoingRequestsNumberChange=function(t){this._idle||(t===0?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout())},r.prototype.close=function(){var t;return gm(this,void 0,void 0,function(){return Om(this,function(n){switch(n.label){case 0:return this._ssrCallback((t=this.SSREnabledHint)!==null&&t!==void 0?t:!1,"CLOSE"),this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return n.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},r.prototype.toString=function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")},r.prototype._handleProtocolError=function(t){this._protocol.resetFailure(),this._updateCurrentObserver();var n=(0,no.newError)(t,Yq);return this._handleFatalError(n),n},r}(Kq.default);_s.default=d1;function Jq(e,r){return new Zq(r._level,function(t,n){return r._loggerFunction(t,"".concat(e," ").concat(n))})}var op={},eH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),tH=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(op,"__esModule",{value:!0});var rH=tH(vs),nH=function(e){eH(r,e);function r(t,n){var o=e.call(this,n)||this;return n&&(o._originalErrorHandler=t._errorHandler,t._errorHandler=o._errorHandler),o._delegate=t,o}return r.prototype.beginTransaction=function(t){return this._delegate.beginTransaction(t)},r.prototype.run=function(t,n,o){return this._delegate.run(t,n,o)},r.prototype.commitTransaction=function(t){return this._delegate.commitTransaction(t)},r.prototype.rollbackTransaction=function(t){return this._delegate.rollbackTransaction(t)},r.prototype.getProtocolVersion=function(){return this._delegate.getProtocolVersion()},Object.defineProperty(r.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(t){this._delegate.databaseId=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"authToken",{get:function(){return this._delegate.authToken},set:function(t){this._delegate.authToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return this._delegate.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return this._delegate.version},set:function(t){this._delegate.version=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){return this._delegate.creationTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){return this._delegate.idleTimestamp},set:function(t){this._delegate.idleTimestamp=t},enumerable:!1,configurable:!0}),r.prototype.isOpen=function(){return this._delegate.isOpen()},r.prototype.protocol=function(){return this._delegate.protocol()},r.prototype.connect=function(t,n,o,i){return this._delegate.connect(t,n,o,i)},r.prototype.write=function(t,n,o){return this._delegate.write(t,n,o)},r.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},r.prototype.hasOngoingObservableRequests=function(){return this._delegate.hasOngoingObservableRequests()},r.prototype.close=function(){return this._delegate.close()},r.prototype.release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate.release()},r}(rH.default);op.default=nH;var ip={};Object.defineProperty(ip,"__esModule",{value:!0});var h1=W,oH=h1.error.SERVICE_UNAVAILABLE,iH=h1.error.SESSION_EXPIRED,aH=function(){function e(r,t,n,o){this._errorCode=r,this._handleUnavailability=t||kh,this._handleWriteFailure=n||kh,this._handleSecurityError=o||kh}return e.create=function(r){var t=r.errorCode,n=r.handleUnavailability,o=r.handleWriteFailure,i=r.handleSecurityError;return new e(t,n,o,i)},e.prototype.errorCode=function(){return this._errorCode},e.prototype.handleAndTransformError=function(r,t,n){return uH(r)?this._handleSecurityError(r,t,n):sH(r)?this._handleUnavailability(r,t,n):cH(r)?this._handleWriteFailure(r,t,n):r},e}();ip.default=aH;function uH(e){return e!=null&&e.code!=null&&e.code.startsWith("Neo.ClientError.Security.")}function sH(e){return e?e.code===iH||e.code===oH||e.code==="Neo.TransientError.General.DatabaseUnavailable":!1}function cH(e){return e?e.code==="Neo.ClientError.Cluster.NotALeader"||e.code==="Neo.ClientError.General.ForbiddenOnReadOnlyDatabase":!1}function kh(e){return e}(function(e){var r=f&&f.__createBinding||(Object.create?function(u,l,d,h){h===void 0&&(h=d);var v=Object.getOwnPropertyDescriptor(l,d);(!v||("get"in v?!l.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return l[d]}}),Object.defineProperty(u,h,v)}:function(u,l,d,h){h===void 0&&(h=d),u[h]=l[d]}),t=f&&f.__setModuleDefault||(Object.create?function(u,l){Object.defineProperty(u,"default",{enumerable:!0,value:l})}:function(u,l){u.default=l}),n=f&&f.__importStar||function(u){if(u&&u.__esModule)return u;var l={};if(u!=null)for(var d in u)d!=="default"&&Object.prototype.hasOwnProperty.call(u,d)&&r(l,u,d);return t(l,u),l},o=f&&f.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=e.ConnectionErrorHandler=e.DelegateConnection=e.ChannelConnection=e.Connection=void 0;var i=o(vs);e.Connection=i.default;var a=n(_s);e.ChannelConnection=a.default,Object.defineProperty(e,"createChannelConnection",{enumerable:!0,get:function(){return a.createChannelConnection}});var s=o(op);e.DelegateConnection=s.default;var c=o(ip);e.ConnectionErrorHandler=c.default,e.default=i.default})(Nf);var ap={},lH=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},fH=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(ap,"__esModule",{value:!0});var dH=W,Em=Vt,hH=function(){function e(r){var t=r.authTokenManager,n=r.userAgent,o=r.boltAgent;this._authTokenManager=t||(0,dH.staticAuthTokenManager)({}),this._userAgent=n,this._boltAgent=o}return e.prototype.authenticate=function(r){var t=r.connection,n=r.auth,o=r.skipReAuth,i=r.waitReAuth,a=r.forceReAuth;return lH(this,void 0,void 0,function(){var s,c;return fH(this,function(u){switch(u.label){case 0:return n==null?[3,3]:(s=t.supportsReAuth===!0&&(!Em.object.equals(t.authToken,n)&&o!==!0||a===!0),t.authToken==null||s?[4,t.connect(this._userAgent,this._boltAgent,n,i||!1)]:[3,2]);case 1:return[2,u.sent()];case 2:return[2,t];case 3:return[4,this._authTokenManager.getToken()];case 4:return c=u.sent(),Em.object.equals(c,t.authToken)?[3,6]:[4,t.connect(this._userAgent,this._boltAgent,c,!1)];case 5:return[2,u.sent()];case 6:return[2,t]}})})},e.prototype.handleError=function(r){var t=r.connection,n=r.code;return t&&n.startsWith("Neo.ClientError.Security.")?this._authTokenManager.handleSecurityException(t.authToken,n):!1},e}();ap.default=hH;var up={},vH=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},_H=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(up,"__esModule",{value:!0});var pH=function(){function e(r){var t=r.connectionLivenessCheckTimeout;this._connectionLivenessCheckTimeout=t}return e.prototype.check=function(r){return vH(this,void 0,void 0,function(){var t;return _H(this,function(n){switch(n.label){case 0:return this._isCheckDisabled||this._isNewlyCreatedConnection(r)?[2,!0]:(t=Date.now()-r.idleTimestamp,this._connectionLivenessCheckTimeout===0||t>this._connectionLivenessCheckTimeout?[4,r.resetAndFlush().then(function(){return!0})]:[3,2]);case 1:return[2,n.sent()];case 2:return[2,!0]}})})},Object.defineProperty(e.prototype,"_isCheckDisabled",{get:function(){return this._connectionLivenessCheckTimeout==null||this._connectionLivenessCheckTimeout<0},enumerable:!1,configurable:!0}),e.prototype._isNewlyCreatedConnection=function(r){return r.authToken==null},e}();up.default=pH;var sp={},yH=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},bH=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(sp,"__esModule",{value:!0});var mH=Vn,gH=function(){function e(r){var t=r.clientCertificateProvider,n=r.loader;this._clientCertificateProvider=t,this._loader=n||mH.ClientCertificatesLoader,this._clientCertificate=null}return e.prototype.getClientCertificate=function(){return yH(this,void 0,void 0,function(){var r,t,n=this;return bH(this,function(o){switch(o.label){case 0:return r=this._clientCertificateProvider!=null,r?(t=this._clientCertificate==null,t?[3,2]:[4,this._clientCertificateProvider.hasUpdate()]):[3,3];case 1:t=o.sent(),o.label=2;case 2:r=t,o.label=3;case 3:return r&&(this._clientCertificate=Promise.resolve(this._clientCertificateProvider.getClientCertificate()).then(this._loader.load).then(function(i){return n._clientCertificate=i,n._clientCertificate}).catch(function(i){throw n._clientCertificate=null,i})),[2,this._clientCertificate]}})})},e}();sp.default=gH;var OH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),cn=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},ln=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},wH=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},EH=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))},cp=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hs,"__esModule",{value:!0});var Sm=Nf,oo=W,SH=cp(ap),PH=Vt,TH=cp(up),CH=cp(sp),AH=oo.error.SERVICE_UNAVAILABLE,IH=["Neo.ClientError.Security.CredentialsExpired","Neo.ClientError.Security.Forbidden","Neo.ClientError.Security.TokenExpired","Neo.ClientError.Security.Unauthorized"],v1=oo.internal.pool,Pm=v1.Pool,RH=v1.PoolConfig,jH=function(e){OH(r,e);function r(t,n){var o=t.id,i=t.config,a=t.log,s=t.userAgent,c=t.boltAgent,u=t.authTokenManager,l=t.newPool,d=l===void 0?function(){for(var v=[],_=0;_<arguments.length;_++)v[_]=arguments[_];return new(Pm.bind.apply(Pm,EH([void 0],wH(v),!1)))}:l;n===void 0&&(n=null);var h=e.call(this)||this;return h._id=o,h._config=i,h._log=a,h._clientCertificateHolder=new CH.default({clientCertificateProvider:h._config.clientCertificate}),h._authenticationProvider=new SH.default({authTokenManager:u,userAgent:s,boltAgent:c}),h._livenessCheckProvider=new TH.default({connectionLivenessCheckTimeout:i.connectionLivenessCheckTimeout}),h._userAgent=s,h._boltAgent=c,h._createChannelConnection=n||function(v){return cn(h,void 0,void 0,function(){var _,y;return ln(this,function(p){switch(p.label){case 0:return _=Sm.createChannelConnection,y=[v,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,_.apply(void 0,y.concat([p.sent()]))]}})})},h._connectionPool=d({create:h._createConnection.bind(h),destroy:h._destroyConnection.bind(h),validateOnAcquire:h._validateConnectionOnAcquire.bind(h),validateOnRelease:h._validateConnectionOnRelease.bind(h),installIdleObserver:r._installIdleObserverOnConnection.bind(h),removeIdleObserver:r._removeIdleObserverOnConnection.bind(h),config:RH.fromDriverConfig(i),log:h._log}),h._openConnections={},h}return r.prototype._createConnectionErrorHandler=function(){return new Sm.ConnectionErrorHandler(AH)},r.prototype._getClientCertificate=function(){return cn(this,void 0,void 0,function(){return ln(this,function(t){return[2,this._config.clientCertificate.getClientCertificate()]})})},r.prototype._createConnection=function(t,n,o){var i=this,a=t.auth;return this._createChannelConnection(n).then(function(s){return s.release=function(){return s.idleTimestamp=Date.now(),o(n,s)},i._openConnections[s.id]=s,i._authenticationProvider.authenticate({connection:s,auth:a}).catch(function(c){throw i._destroyConnection(s),c})})},r.prototype._validateConnectionOnAcquire=function(t,n){var o=t.auth,i=t.skipReAuth;return cn(this,void 0,void 0,function(){var a,s;return ln(this,function(c){switch(c.label){case 0:if(!this._validateConnection(n))return[2,!1];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this._livenessCheckProvider.check(n)];case 2:return c.sent(),[3,4];case 3:return a=c.sent(),this._log.debug("The connection ".concat(n.id," is not alive because of an error ").concat(a.code," '").concat(a.message,"'")),[2,!1];case 4:return c.trys.push([4,6,,7]),[4,this._authenticationProvider.authenticate({connection:n,auth:o,skipReAuth:i})];case 5:return c.sent(),[2,!0];case 6:return s=c.sent(),this._log.debug("The connection ".concat(n.id," is not valid because of an error ").concat(s.code," '").concat(s.message,"'")),[2,!1];case 7:return[2]}})})},r.prototype._validateConnectionOnRelease=function(t){return t._sticky!==!0&&this._validateConnection(t)},r.prototype._validateConnection=function(t){if(!t.isOpen())return!1;var n=this._config.maxConnectionLifetime,o=Date.now()-t.creationTimestamp;return!(o>n)},r.prototype._destroyConnection=function(t){return delete this._openConnections[t.id],t.close()},r.prototype._verifyConnectivityAndGetServerVersion=function(t){var n=t.address;return cn(this,void 0,void 0,function(){var o,i;return ln(this,function(a){switch(a.label){case 0:return[4,this._connectionPool.acquire({},n)];case 1:o=a.sent(),i=new oo.ServerInfo(o.server,o.protocol().version),a.label=2;case 2:return a.trys.push([2,,5,7]),o.protocol().isLastMessageLogon()?[3,4]:[4,o.resetAndFlush()];case 3:a.sent(),a.label=4;case 4:return[3,7];case 5:return[4,o.release()];case 6:return a.sent(),[7];case 7:return[2,i]}})})},r.prototype._verifyAuthentication=function(t){var n=t.getAddress,o=t.auth;return cn(this,void 0,void 0,function(){var i,a,s,c,u,l;return ln(this,function(d){switch(d.label){case 0:i=[],d.label=1;case 1:return d.trys.push([1,8,9,11]),[4,n()];case 2:return a=d.sent(),[4,this._connectionPool.acquire({auth:o,skipReAuth:!0},a)];case 3:if(s=d.sent(),i.push(s),c=!s.protocol().isLastMessageLogon(),!s.supportsReAuth)throw(0,oo.newError)("Driver is connected to a database that does not support user switch.");return c&&s.supportsReAuth?[4,this._authenticationProvider.authenticate({connection:s,auth:o,waitReAuth:!0,forceReAuth:!0})]:[3,5];case 4:return d.sent(),[3,7];case 5:return c&&!s.supportsReAuth?[4,this._connectionPool.acquire({auth:o},a,{requireNew:!0})]:[3,7];case 6:u=d.sent(),u._sticky=!0,i.push(u),d.label=7;case 7:return[2,!0];case 8:if(l=d.sent(),IH.includes(l.code))return[2,!1];throw l;case 9:return[4,Promise.all(i.map(function(h){return h.release()}))];case 10:return d.sent(),[7];case 11:return[2]}})})},r.prototype._verifyStickyConnection=function(t){var n=t.auth,o=t.connection;return t.address,cn(this,void 0,void 0,function(){var i,a;return ln(this,function(s){switch(s.label){case 0:return i=PH.object.equals(n,o.authToken),a=!i,o._sticky=i&&!o.supportsReAuth,a||o._sticky?[4,o.release()]:[3,2];case 1:throw s.sent(),(0,oo.newError)("Driver is connected to a database that does not support user switch.");case 2:return[2]}})})},r.prototype.close=function(){return cn(this,void 0,void 0,function(){return ln(this,function(t){switch(t.label){case 0:return[4,this._connectionPool.close()];case 1:return t.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(n){return n.close()}))];case 2:return t.sent(),[2]}})})},r._installIdleObserverOnConnection=function(t,n){t._setIdle(n)},r._removeIdleObserverOnConnection=function(t){t._unsetIdle()},r.prototype._handleSecurityError=function(t,n,o){var i=this._authenticationProvider.handleError({connection:o,code:t.code});return i&&(t.retriable=!0),t.code==="Neo.ClientError.Security.AuthorizationExpired"&&this._connectionPool.apply(n,function(a){a.authToken=null}),o&&o.close().catch(function(){}),t},r}(oo.ConnectionProvider);hs.default=jH;var lp={},$H=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),yr=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},br=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},NH=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lp,"__esModule",{value:!0});var kH=NH(hs),Tm=Nf,_1=W,kf=_1.internal.constants,MH=kf.BOLT_PROTOCOL_V3,DH=kf.BOLT_PROTOCOL_V4_0,LH=kf.BOLT_PROTOCOL_V4_4,UH=kf.BOLT_PROTOCOL_V5_1,FH=_1.error.SERVICE_UNAVAILABLE,BH=function(e){$H(r,e);function r(t){var n=t.id,o=t.config,i=t.log,a=t.address,s=t.userAgent,c=t.boltAgent,u=t.authTokenManager,l=t.newPool,d=e.call(this,{id:n,config:o,log:i,userAgent:s,boltAgent:c,authTokenManager:u,newPool:l})||this;return d._address=a,d}return r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t;n.accessMode;var o=n.database;n.bookmarks;var i=n.auth,a=n.forceReAuth;return yr(this,void 0,void 0,function(){var s,c,u=this;return br(this,function(l){switch(l.label){case 0:return s=Tm.ConnectionErrorHandler.create({errorCode:FH,handleSecurityError:function(d,h,v){return u._handleSecurityError(d,h,v,o)}}),[4,this._connectionPool.acquire({auth:i,forceReAuth:a},this._address)];case 1:return c=l.sent(),i?[4,this._verifyStickyConnection({auth:i,connection:c,address:this._address})]:[3,3];case 2:return l.sent(),[2,c];case 3:return[2,new Tm.DelegateConnection(c,s)]}})})},r.prototype._handleSecurityError=function(t,n,o,i){return this._log.warn("Direct driver ".concat(this._id," will close connection to ").concat(n," for database '").concat(i,"' because of an error ").concat(t.code," '").concat(t.message,"'")),e.prototype._handleSecurityError.call(this,t,n,o)},r.prototype._hasProtocolVersion=function(t){return yr(this,void 0,void 0,function(){var n,o;return br(this,function(i){switch(i.label){case 0:return[4,this._createChannelConnection(this._address)];case 1:return n=i.sent(),o=n.protocol()?n.protocol().version:null,[4,n.close()];case 2:return i.sent(),o?[2,t(o)]:[2,!1]}})})},r.prototype.supportsMultiDb=function(){return yr(this,void 0,void 0,function(){return br(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=DH})];case 1:return[2,t.sent()]}})})},r.prototype.getNegotiatedProtocolVersion=function(){var t=this;return new Promise(function(n,o){t._hasProtocolVersion(n).catch(o)})},r.prototype.supportsTransactionConfig=function(){return yr(this,void 0,void 0,function(){return br(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=MH})];case 1:return[2,t.sent()]}})})},r.prototype.supportsUserImpersonation=function(){return yr(this,void 0,void 0,function(){return br(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=LH})];case 1:return[2,t.sent()]}})})},r.prototype.supportsSessionAuth=function(){return yr(this,void 0,void 0,function(){return br(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=UH})];case 1:return[2,t.sent()]}})})},r.prototype.verifyAuthentication=function(t){var n=t.auth;return yr(this,void 0,void 0,function(){var o=this;return br(this,function(i){return[2,this._verifyAuthentication({auth:n,getAddress:function(){return o._address}})]})})},r.prototype.verifyConnectivityAndGetServerInfo=function(){return yr(this,void 0,void 0,function(){return br(this,function(t){switch(t.label){case 0:return[4,this._verifyConnectivityAndGetServerVersion({address:this._address})];case 1:return[2,t.sent()]}})})},r}(kH.default);lp.default=BH;var fp={},Rn={},dp={},si={},Mh=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Dh=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(si,"__esModule",{value:!0});si.createValidRoutingTable=void 0;var pt=W,p1=pt.internal.constants,xH=p1.ACCESS_MODE_WRITE,WH=p1.ACCESS_MODE_READ,Lh=pt.internal.serverAddress.ServerAddress,hp=pt.error.PROTOCOL_ERROR,VH=1,y1=function(){function e(r){var t=r===void 0?{}:r,n=t.database,o=t.routers,i=t.readers,a=t.writers,s=t.expirationTime,c=t.ttl;this.database=n||null,this.databaseName=n||"default database",this.routers=o||[],this.readers=i||[],this.writers=a||[],this.expirationTime=s||(0,pt.int)(0),this.ttl=c}return e.fromRawRoutingTable=function(r,t,n){return b1(r,t,n)},e.prototype.forget=function(r){this.readers=Ls(this.readers,r),this.writers=Ls(this.writers,r)},e.prototype.forgetRouter=function(r){this.routers=Ls(this.routers,r)},e.prototype.forgetWriter=function(r){this.writers=Ls(this.writers,r)},e.prototype.isStaleFor=function(r){return this.expirationTime.lessThan(Date.now())||this.routers.length<VH||r===WH&&this.readers.length===0||r===xH&&this.writers.length===0},e.prototype.isExpiredFor=function(r){return this.expirationTime.add(r).lessThan(Date.now())},e.prototype.allServers=function(){return Dh(Dh(Dh([],Mh(this.routers),!1),Mh(this.readers),!1),Mh(this.writers),!1)},e.prototype.toString=function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")},e}();si.default=y1;function Ls(e,r){return e.filter(function(t){return t.asKey()!==r.asKey()})}function b1(e,r,t){var n=t.ttl,o=qH(t,r),i=zH(t,r),a=i.routers,s=i.readers,c=i.writers;return Cm(a,"routers",r),Cm(s,"readers",r),new y1({database:e||t.db,routers:a,readers:s,writers:c,expirationTime:o,ttl:n})}si.createValidRoutingTable=b1;function zH(e,r){try{var t=[],n=[],o=[];return e.servers.forEach(function(i){var a=i.role,s=i.addresses;a==="ROUTE"?t=Uh(s).map(function(c){return Lh.fromUrl(c)}):a==="WRITE"?o=Uh(s).map(function(c){return Lh.fromUrl(c)}):a==="READ"&&(n=Uh(s).map(function(c){return Lh.fromUrl(c)}))}),{routers:t,readers:n,writers:o}}catch(i){throw(0,pt.newError)("Unable to parse servers entry from router ".concat(r,` from addresses:
`).concat(pt.json.stringify(e.servers),`
Error message: `).concat(i.message),hp)}}function qH(e,r){try{var t=(0,pt.int)(Date.now()),n=(0,pt.int)(e.ttl).multiply(1e3).add(t);return n.lessThan(t)?pt.Integer.MAX_VALUE:n}catch(o){throw(0,pt.newError)("Unable to parse TTL entry from router ".concat(r,` from raw routing table:
`).concat(pt.json.stringify(e),`
Error message: `).concat(o.message),hp)}}function Cm(e,r,t){if(e.length===0)throw(0,pt.newError)("Received no "+r+" from router "+t,hp)}function Uh(e){if(!Array.isArray(e))throw new TypeError("Array expected but got: "+e);return Array.from(e)}var HH=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dp,"__esModule",{value:!0});var GH=HH(si),KH=function(){function e(r){this._routingContext=r}return e.prototype.lookupRoutingTableOnRouter=function(r,t,n,o){var i=this;return r._acquireConnection(function(a){return i._requestRawRoutingTable(a,r,t,n,o).then(function(s){return s.isNull?null:GH.default.fromRawRoutingTable(t,n,s)})})},e.prototype._requestRawRoutingTable=function(r,t,n,o,i){var a=this;return new Promise(function(s,c){r.protocol().requestRoutingInformation({routingContext:a._routingContext,databaseName:n,impersonatedUser:i,sessionContext:{bookmarks:t._lastBookmarks,mode:t._mode,database:t._database,afterComplete:t._onComplete},onCompleted:s,onError:c})})},e}();dp.default=KH;var m1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.RoutingTable=Rn.Rediscovery=void 0;var g1=m1(dp);Rn.Rediscovery=g1.default;var YH=m1(si);Rn.RoutingTable=YH.default;Rn.default=g1.default;var ZH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),mc=f&&f.__assign||function(){return mc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},mc.apply(this,arguments)},QH=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),XH=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),JH=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&QH(r,e,t);return XH(r,e),r},Oe=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},we=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Wv=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},Zt=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},O1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fp,"__esModule",{value:!0});var Ve=W,Fh=JH(Rn),eG=Vn,tG=O1($f),rG=O1(hs),nG=Rr,fn=Nf,oG=Vt,Us=Ve.error.SERVICE_UNAVAILABLE,Ei=Ve.error.SESSION_EXPIRED,iG=Ve.internal.bookmarks.Bookmarks,ci=Ve.internal.constants,Am=ci.ACCESS_MODE_READ,Fs=ci.ACCESS_MODE_WRITE,aG=ci.BOLT_PROTOCOL_V3,uG=ci.BOLT_PROTOCOL_V4_0,sG=ci.BOLT_PROTOCOL_V4_4,cG=ci.BOLT_PROTOCOL_V5_1,lG="Neo.ClientError.Procedure.ProcedureNotFound",fG="Neo.ClientError.Database.DatabaseNotFound",dG="Neo.ClientError.Transaction.InvalidBookmark",hG="Neo.ClientError.Transaction.InvalidBookmarkMixture",vG="Neo.ClientError.Security.AuthorizationExpired",_G="Neo.ClientError.Statement.ArgumentError",pG="Neo.ClientError.Request.Invalid",yG="Neo.ClientError.Statement.TypeError",bG="N/A",mG="system",Si=null,gG=(0,Ve.int)(3e4),OG=function(e){ZH(r,e);function r(t){var n=t.id,o=t.address,i=t.routingContext,a=t.hostNameResolver,s=t.config,c=t.log,u=t.userAgent,l=t.boltAgent,d=t.authTokenManager,h=t.routingTablePurgeDelay,v=t.newPool,_=e.call(this,{id:n,config:s,log:c,userAgent:u,boltAgent:l,authTokenManager:d,newPool:v},function(y){return Oe(_,void 0,void 0,function(){var p,b;return we(this,function(g){switch(g.label){case 0:return p=fn.createChannelConnection,b=[y,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,p.apply(void 0,b.concat([g.sent(),this._routingContext,this._channelSsrCallback.bind(this)]))]}})})})||this;return _._routingContext=mc(mc({},i),{address:o.toString()}),_._seedRouter=o,_._rediscovery=new Fh.default(_._routingContext),_._loadBalancingStrategy=new nG.LeastConnectedLoadBalancingStrategy(_._connectionPool),_._hostNameResolver=a,_._dnsResolver=new eG.HostNameResolver,_._log=c,_._useSeedRouter=!0,_._routingTableRegistry=new wG(h?(0,Ve.int)(h):gG),_._refreshRoutingTable=oG.functional.reuseOngoingRequest(_._refreshRoutingTable,_),_._withSSR=0,_._withoutSSR=0,_}return r.prototype._createConnectionErrorHandler=function(){return new fn.ConnectionErrorHandler(Ei)},r.prototype._handleUnavailability=function(t,n,o){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(n," for database '").concat(o,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forget(n,o||Si),t},r.prototype._handleSecurityError=function(t,n,o,i){return this._log.warn("Routing driver ".concat(this._id," will close connections to ").concat(n," for database '").concat(i,"' because of an error ").concat(t.code," '").concat(t.message,"'")),e.prototype._handleSecurityError.call(this,t,n,o,i)},r.prototype._handleWriteFailure=function(t,n,o){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(n," for database '").concat(o,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forgetWriter(n,o||Si),(0,Ve.newError)("No longer possible to write to server at "+n,Ei,t)},r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t,o=n.accessMode,i=n.database,a=n.bookmarks,s=n.impersonatedUser,c=n.onDatabaseNameResolved,u=n.auth,l=n.homeDb;return Oe(this,void 0,void 0,function(){var d,h,v,_,y,p=this;return we(this,function(b){switch(b.label){case 0:return d={database:i||Si},h=new fn.ConnectionErrorHandler(Ei,function(g,w){return p._handleUnavailability(g,w,d.database)},function(g,w){return p._handleWriteFailure(g,w,l??d.database)},function(g,w,E){return p._handleSecurityError(g,w,E,d.database)}),this.SSREnabled()&&l!==void 0&&i===""?(_=this._routingTableRegistry.get(l,function(){return new Fh.RoutingTable({database:l})}),_&&!_.isStaleFor(o)?[4,this.getConnectionFromRoutingTable(_,u,o,h)]:[3,2]):[3,2];case 1:if(v=b.sent(),this.SSREnabled())return[2,v];v.release(),b.label=2;case 2:return[4,this._freshRoutingTable({accessMode:o,database:d.database,bookmarks:a,impersonatedUser:s,auth:u,onDatabaseNameResolved:function(g){d.database=d.database||g,c&&c(g)}})];case 3:return y=b.sent(),[2,this.getConnectionFromRoutingTable(y,u,o,h)]}})})},r.prototype.getConnectionFromRoutingTable=function(t,n,o,i){return Oe(this,void 0,void 0,function(){var a,s,c,u,l;return we(this,function(d){switch(d.label){case 0:if(o===Am)s=this._loadBalancingStrategy.selectReader(t.readers),a="read";else if(o===Fs)s=this._loadBalancingStrategy.selectWriter(t.writers),a="write";else throw(0,Ve.newError)("Illegal mode "+o);if(!s)throw(0,Ve.newError)("Failed to obtain connection towards ".concat(a," server. Known routing table is: ").concat(t),Ei);d.label=1;case 1:return d.trys.push([1,5,,6]),[4,this._connectionPool.acquire({auth:n},s)];case 2:return c=d.sent(),n?[4,this._verifyStickyConnection({auth:n,connection:c,address:s})]:[3,4];case 3:return d.sent(),[2,c];case 4:return[2,new fn.DelegateConnection(c,i)];case 5:throw u=d.sent(),l=i.handleAndTransformError(u,s),l;case 6:return[2]}})})},r.prototype._hasProtocolVersion=function(t){return Oe(this,void 0,void 0,function(){var n,o,i,a,s,c;return we(this,function(u){switch(u.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:n=u.sent(),i=0,u.label=2;case 2:if(!(i<n.length))return[3,8];u.label=3;case 3:return u.trys.push([3,6,,7]),[4,this._createChannelConnection(n[i])];case 4:return a=u.sent(),s=a.protocol()?a.protocol().version:null,[4,a.close()];case 5:return u.sent(),s?[2,t(s)]:[2,!1];case 6:return c=u.sent(),o=c,[3,7];case 7:return i++,[3,2];case 8:if(o)throw o;return[2,!1]}})})},r.prototype.supportsMultiDb=function(){return Oe(this,void 0,void 0,function(){return we(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=uG})];case 1:return[2,t.sent()]}})})},r.prototype.supportsTransactionConfig=function(){return Oe(this,void 0,void 0,function(){return we(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=aG})];case 1:return[2,t.sent()]}})})},r.prototype.supportsUserImpersonation=function(){return Oe(this,void 0,void 0,function(){return we(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=sG})];case 1:return[2,t.sent()]}})})},r.prototype.supportsSessionAuth=function(){return Oe(this,void 0,void 0,function(){return we(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=cG})];case 1:return[2,t.sent()]}})})},r.prototype.getNegotiatedProtocolVersion=function(){var t=this;return new Promise(function(n,o){t._hasProtocolVersion(n).catch(o)})},r.prototype.verifyAuthentication=function(t){var n=t.database,o=t.accessMode,i=t.auth;return Oe(this,void 0,void 0,function(){var a=this;return we(this,function(s){return[2,this._verifyAuthentication({auth:i,getAddress:function(){return Oe(a,void 0,void 0,function(){var c,u,l;return we(this,function(d){switch(d.label){case 0:return c={database:n||Si},[4,this._freshRoutingTable({accessMode:o,database:c.database,auth:i,onDatabaseNameResolved:function(h){c.database=c.database||h}})];case 1:if(u=d.sent(),l=o===Fs?u.writers:u.readers,l.length===0)throw(0,Ve.newError)("No servers available for database '".concat(c.database,"' with access mode '").concat(o,"'"),Us);return[2,l[0]]}})})}})]})})},r.prototype.verifyConnectivityAndGetServerInfo=function(t){var n=t.database,o=t.accessMode;return Oe(this,void 0,void 0,function(){var i,a,s,c,u,l,d,h,v,_,y,p;return we(this,function(b){switch(b.label){case 0:return i={database:n||Si},[4,this._freshRoutingTable({accessMode:o,database:i.database,onDatabaseNameResolved:function(g){i.database=i.database||g}})];case 1:a=b.sent(),s=o===Fs?a.writers:a.readers,c=(0,Ve.newError)("No servers available for database '".concat(i.database,"' with access mode '").concat(o,"'"),Us),b.label=2;case 2:b.trys.push([2,9,10,11]),u=Wv(s),l=u.next(),b.label=3;case 3:if(l.done)return[3,8];d=l.value,b.label=4;case 4:return b.trys.push([4,6,,7]),[4,this._verifyConnectivityAndGetServerVersion({address:d})];case 5:return h=b.sent(),[2,h];case 6:return v=b.sent(),c=v,[3,7];case 7:return l=u.next(),[3,3];case 8:return[3,11];case 9:return _=b.sent(),y={error:_},[3,11];case 10:try{l&&!l.done&&(p=u.return)&&p.call(u)}finally{if(y)throw y.error}return[7];case 11:throw c}})})},r.prototype.forget=function(t,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(o){return o.forget(t)}}),this._connectionPool.purge(t).catch(function(){})},r.prototype.forgetWriter=function(t,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(o){return o.forgetWriter(t)}})},r.prototype._freshRoutingTable=function(t){var n=t===void 0?{}:t,o=n.accessMode,i=n.database,a=n.bookmarks,s=n.impersonatedUser,c=n.onDatabaseNameResolved,u=n.auth,l=this._routingTableRegistry.get(i,function(){return new Fh.RoutingTable({database:i})});return l.isStaleFor(o)?(this._log.info('Routing table is stale for database: "'.concat(i,'" and access mode: "').concat(o,'": ').concat(l)),this._refreshRoutingTable(l,a,s,u).then(function(d){return c(d.database),d})):l},r.prototype._refreshRoutingTable=function(t,n,o,i){var a=t.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(a,t,n,o,i):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(a,t,n,o,i)},r.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(t,n,o,i,a){return Oe(this,void 0,void 0,function(){var s,c,u,l,d,h,v;return we(this,function(_){switch(_.label){case 0:return s=[],[4,this._fetchRoutingTableUsingSeedRouter(s,this._seedRouter,n,o,i,a)];case 1:return c=Zt.apply(void 0,[_.sent(),2]),u=c[0],l=c[1],u?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(t,n,o,i,a)];case 3:d=Zt.apply(void 0,[_.sent(),2]),h=d[0],v=d[1],u=h,l=v||l,_.label=4;case 4:return[4,this._applyRoutingTableIfPossible(n,u,l)];case 5:return[2,_.sent()]}})})},r.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(t,n,o,i,a){return Oe(this,void 0,void 0,function(){var s,c,u,l;return we(this,function(d){switch(d.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(t,n,o,i,a)];case 1:return s=Zt.apply(void 0,[d.sent(),2]),c=s[0],u=s[1],c?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(t,this._seedRouter,n,o,i,a)];case 2:l=Zt.apply(void 0,[d.sent(),2]),c=l[0],u=l[1],d.label=3;case 3:return[4,this._applyRoutingTableIfPossible(n,c,u)];case 4:return[2,d.sent()]}})})},r.prototype._fetchRoutingTableUsingKnownRouters=function(t,n,o,i,a){return Oe(this,void 0,void 0,function(){var s,c,u,l;return we(this,function(d){switch(d.label){case 0:return[4,this._fetchRoutingTable(t,n,o,i,a)];case 1:return s=Zt.apply(void 0,[d.sent(),2]),c=s[0],u=s[1],c?[2,[c,null]]:(l=t.length-1,r._forgetRouter(n,t,l),[2,[null,u]])}})})},r.prototype._fetchRoutingTableUsingSeedRouter=function(t,n,o,i,a,s){return Oe(this,void 0,void 0,function(){var c,u;return we(this,function(l){switch(l.label){case 0:return[4,this._resolveSeedRouter(n)];case 1:return c=l.sent(),u=c.filter(function(d){return t.indexOf(d)<0}),[4,this._fetchRoutingTable(u,o,i,a,s)];case 2:return[2,l.sent()]}})})},r.prototype._resolveSeedRouter=function(t){return Oe(this,void 0,void 0,function(){var n,o,i=this;return we(this,function(a){switch(a.label){case 0:return[4,this._hostNameResolver.resolve(t)];case 1:return n=a.sent(),[4,Promise.all(n.map(function(s){return i._dnsResolver.resolve(s)}))];case 2:return o=a.sent(),[2,[].concat.apply([],o)]}})})},r.prototype._fetchRoutingTable=function(t,n,o,i,a){return Oe(this,void 0,void 0,function(){var s=this;return we(this,function(c){return[2,t.reduce(function(u,l,d){return Oe(s,void 0,void 0,function(){var h,v,_,y,p,b,g;return we(this,function(w){switch(w.label){case 0:return[4,u];case 1:return h=Zt.apply(void 0,[w.sent(),1]),v=h[0],v?[2,[v,null]]:(_=d-1,r._forgetRouter(n,t,_),[4,this._createSessionForRediscovery(l,o,i,a)]);case 2:if(y=Zt.apply(void 0,[w.sent(),2]),p=y[0],b=y[1],!p)return[3,8];w.label=3;case 3:return w.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(p,n.database,l,i)];case 4:return[2,[w.sent(),null]];case 5:return g=w.sent(),[2,this._handleRediscoveryError(g,l)];case 6:return p.close(),[7];case 7:return[3,9];case 8:return[2,[null,b]];case 9:return[2]}})})},Promise.resolve([null,null]))]})})},r.prototype._createSessionForRediscovery=function(t,n,o,i){return Oe(this,void 0,void 0,function(){var a,s,c,u,l,d,h=this;return we(this,function(v){switch(v.label){case 0:return v.trys.push([0,4,,5]),[4,this._connectionPool.acquire({auth:i},t)];case 1:return a=v.sent(),i?[4,this._verifyStickyConnection({auth:i,connection:a,address:t})]:[3,3];case 2:v.sent(),v.label=3;case 3:return s=fn.ConnectionErrorHandler.create({errorCode:Ei,handleSecurityError:function(_,y,p){return h._handleSecurityError(_,y,p)}}),c=a._sticky?new fn.DelegateConnection(a):new fn.DelegateConnection(a,s),u=new tG.default(c),l=a.protocol().version,l<4?[2,[new Ve.Session({mode:Fs,bookmarks:iG.empty(),connectionProvider:u}),null]]:[2,[new Ve.Session({mode:Am,database:mG,bookmarks:n,connectionProvider:u,impersonatedUser:o}),null]];case 4:return d=v.sent(),[2,this._handleRediscoveryError(d,t)];case 5:return[2]}})})},r.prototype._handleRediscoveryError=function(t,n){if(EG(t)||SG(t))throw t;if(t.code===lG)throw(0,Ve.newError)("Server at ".concat(n.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),Us,t);return this._log.warn("unable to fetch routing table because of an error ".concat(t)),[null,t]},r.prototype._applyRoutingTableIfPossible=function(t,n,o){return Oe(this,void 0,void 0,function(){return we(this,function(i){switch(i.label){case 0:if(!n)throw(0,Ve.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(t),Us,o);return n.writers.length===0&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(n)];case 1:return i.sent(),[2,n]}})})},r.prototype._updateRoutingTable=function(t){return Oe(this,void 0,void 0,function(){return we(this,function(n){switch(n.label){case 0:return[4,this._connectionPool.keepAll(t.allServers())];case 1:return n.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(t),this._log.info("Updated routing table ".concat(t)),[2]}})})},r._forgetRouter=function(t,n,o){var i=n[o];t&&i&&t.forgetRouter(i)},r.prototype._channelSsrCallback=function(t,n){if(n==="OPEN")t===!0?this._withSSR=this._withSSR+1:this._withoutSSR=this._withoutSSR+1;else if(n==="CLOSE")t===!0?this._withSSR=this._withSSR-1:this._withoutSSR=this._withoutSSR-1;else throw(0,Ve.newError)("Channel SSR Callback invoked with action other than 'OPEN' or 'CLOSE'")},r.prototype.SSREnabled=function(){return this._withSSR>0&&this._withoutSSR===0},r}(rG.default);fp.default=OG;var wG=function(){function e(r){this._tables=new Map,this._routingTablePurgeDelay=r}return e.prototype.register=function(r){return this._tables.set(r.database,r),this},e.prototype.apply=function(r,t){var n=t===void 0?{}:t,o=n.applyWhenExists,i=n.applyWhenDontExists,a=i===void 0?function(){}:i;return this._tables.has(r)?o(this._tables.get(r)):typeof r=="string"||r===null?a():this._forEach(o),this},e.prototype.get=function(r,t){return this._tables.has(r)?this._tables.get(r):typeof t=="function"?t():t},e.prototype.removeExpired=function(){var r=this;return this._removeIf(function(t){return t.isExpiredFor(r._routingTablePurgeDelay)})},e.prototype._forEach=function(r){var t,n;try{for(var o=Wv(this._tables),i=o.next();!i.done;i=o.next()){var a=Zt(i.value,2),s=a[1];r(s)}}catch(c){t={error:c}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return this},e.prototype._remove=function(r){return this._tables.delete(r),this},e.prototype._removeIf=function(r){var t,n;try{for(var o=Wv(this._tables),i=o.next();!i.done;i=o.next()){var a=Zt(i.value,2),s=a[0],c=a[1];r(c)&&this._remove(s)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return this},e}();function EG(e){return[fG,dG,hG,_G,pG,yG,bG].includes(e.code)}function SG(e){return e.code.startsWith("Neo.ClientError.Security.")&&![vG].includes(e.code)}(function(e){var r=f&&f.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingConnectionProvider=e.DirectConnectionProvider=e.PooledConnectionProvider=e.SingleConnectionProvider=void 0;var t=$f;Object.defineProperty(e,"SingleConnectionProvider",{enumerable:!0,get:function(){return r(t).default}});var n=hs;Object.defineProperty(e,"PooledConnectionProvider",{enumerable:!0,get:function(){return r(n).default}});var o=lp;Object.defineProperty(e,"DirectConnectionProvider",{enumerable:!0,get:function(){return r(o).default}});var i=fp;Object.defineProperty(e,"RoutingConnectionProvider",{enumerable:!0,get:function(){return r(i).default}})})(l1);(function(e){var r=f&&f.__createBinding||(Object.create?function(i,a,s,c){c===void 0&&(c=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(i,c,u)}:function(i,a,s,c){c===void 0&&(c=s),i[c]=a[s]}),t=f&&f.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),n=f&&f.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var s in i)s!=="default"&&Object.prototype.hasOwnProperty.call(i,s)&&r(a,i,s);return t(a,i),a},o=f&&f.__exportStar||function(i,a){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&r(a,i,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.packstream=e.channel=e.buf=e.bolt=e.loadBalancing=void 0,e.loadBalancing=n(Rr),e.bolt=n(N_),e.buf=n(zn),e.channel=n(Vn),e.packstream=n(Ye),o(l1,e)})(LO);(function(e){var r=f&&f.__awaiter||function(B,re,x,X){function z(N){return N instanceof x?N:new x(function(J){J(N)})}return new(x||(x=Promise))(function(N,J){function fe(Ce){try{Y(X.next(Ce))}catch(de){J(de)}}function Se(Ce){try{Y(X.throw(Ce))}catch(de){J(de)}}function Y(Ce){Ce.done?N(Ce.value):z(Ce.value).then(fe,Se)}Y((X=X.apply(B,re||[])).next())})},t=f&&f.__generator||function(B,re){var x={label:0,sent:function(){if(N[0]&1)throw N[1];return N[1]},trys:[],ops:[]},X,z,N,J;return J={next:fe(0),throw:fe(1),return:fe(2)},typeof Symbol=="function"&&(J[Symbol.iterator]=function(){return this}),J;function fe(Y){return function(Ce){return Se([Y,Ce])}}function Se(Y){if(X)throw new TypeError("Generator is already executing.");for(;J&&(J=0,Y[0]&&(x=0)),x;)try{if(X=1,z&&(N=Y[0]&2?z.return:Y[0]?z.throw||((N=z.return)&&N.call(z),0):z.next)&&!(N=N.call(z,Y[1])).done)return N;switch(z=0,N&&(Y=[Y[0]&2,N.value]),Y[0]){case 0:case 1:N=Y;break;case 4:return x.label++,{value:Y[1],done:!1};case 5:x.label++,z=Y[1],Y=[0];continue;case 7:Y=x.ops.pop(),x.trys.pop();continue;default:if(N=x.trys,!(N=N.length>0&&N[N.length-1])&&(Y[0]===6||Y[0]===2)){x=0;continue}if(Y[0]===3&&(!N||Y[1]>N[0]&&Y[1]<N[3])){x.label=Y[1];break}if(Y[0]===6&&x.label<N[1]){x.label=N[1],N=Y;break}if(N&&x.label<N[2]){x.label=N[2],x.ops.push(Y);break}N[2]&&x.ops.pop(),x.trys.pop();continue}Y=re.call(B,x)}catch(Ce){Y=[6,Ce],z=0}finally{X=N=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}},n=f&&f.__importDefault||function(B){return B&&B.__esModule?B:{default:B}};Object.defineProperty(e,"__esModule",{value:!0}),e.UnboundRelationship=e.Relationship=e.Node=e.Record=e.ServerInfo=e.GqlStatusObject=e.Notification=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ResultSummary=e.RxResult=e.RxManagedTransaction=e.RxTransaction=e.RxSession=e.EagerResult=e.Result=e.ManagedTransaction=e.Transaction=e.Session=e.Driver=e.temporal=e.spatial=e.graph=e.error=e.routing=e.session=e.types=e.logging=e.auth=e.isRetryableError=e.Neo4jError=e.integer=e.isUnboundRelationship=e.isRelationship=e.isPathSegment=e.isPath=e.isNode=e.isDateTime=e.isLocalDateTime=e.isDate=e.isTime=e.isLocalTime=e.isDuration=e.isPoint=e.isInt=e.int=e.hasReachableServer=e.driver=e.authTokenManagers=void 0,e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.bookmarkManager=e.DateTime=e.LocalDateTime=e.Date=e.Time=e.LocalTime=e.Duration=e.Integer=e.Point=e.PathSegment=e.Path=void 0;var o=er;Object.defineProperty(e,"Driver",{enumerable:!0,get:function(){return o.Driver}});var i=n(R_),a=W;Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return a.authTokenManagers}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return a.Neo4jError}}),Object.defineProperty(e,"isRetryableError",{enumerable:!0,get:function(){return a.isRetryableError}}),Object.defineProperty(e,"error",{enumerable:!0,get:function(){return a.error}}),Object.defineProperty(e,"Integer",{enumerable:!0,get:function(){return a.Integer}}),Object.defineProperty(e,"int",{enumerable:!0,get:function(){return a.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return a.isInt}}),Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return a.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return a.Point}}),Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return a.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return a.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return a.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return a.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return a.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return a.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return a.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return a.isLocalTime}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return a.isNode}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return a.isPath}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return a.isPathSegment}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return a.isRelationship}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return a.isTime}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return a.isUnboundRelationship}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return a.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return a.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return a.Time}}),Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return a.Node}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return a.Path}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return a.PathSegment}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return a.Relationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return a.UnboundRelationship}}),Object.defineProperty(e,"Record",{enumerable:!0,get:function(){return a.Record}}),Object.defineProperty(e,"ResultSummary",{enumerable:!0,get:function(){return a.ResultSummary}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return a.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return a.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return a.QueryStatistics}}),Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return a.Notification}}),Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return a.GqlStatusObject}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return a.ServerInfo}}),Object.defineProperty(e,"Result",{enumerable:!0,get:function(){return a.Result}}),Object.defineProperty(e,"EagerResult",{enumerable:!0,get:function(){return a.EagerResult}}),Object.defineProperty(e,"auth",{enumerable:!0,get:function(){return a.auth}}),Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return a.Session}}),Object.defineProperty(e,"Transaction",{enumerable:!0,get:function(){return a.Transaction}}),Object.defineProperty(e,"ManagedTransaction",{enumerable:!0,get:function(){return a.ManagedTransaction}}),Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return a.bookmarkManager}}),Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return a.routing}}),Object.defineProperty(e,"resultTransformers",{enumerable:!0,get:function(){return a.resultTransformers}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return a.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return a.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return a.notificationSeverityLevel}}),Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return a.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return a.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return a.notificationFilterMinimumSeverityLevel}}),Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return a.clientCertificateProviders}});var s=LO,c=n(Gc);e.RxSession=c.default;var u=n(us);e.RxTransaction=u.default;var l=n(Il);e.RxManagedTransaction=l.default;var d=n(oi);e.RxResult=d.default;var h=a.internal.util,v=h.ENCRYPTION_ON,_=h.assertString,y=h.isEmptyObjectOrNull,p=a.internal.serverAddress.ServerAddress,b=a.internal.urlUtil,g="neo4j-javascript/"+i.default;function w(B){return typeof B=="object"&&B!=null&&"getToken"in B&&"handleSecurityException"in B&&typeof B.getToken=="function"&&typeof B.handleSecurityException=="function"}function E(B){if(w(B))return B;var re=B;return re=re||{},re.scheme=re.scheme||"none",(0,a.staticAuthTokenManager)({authToken:re})}function S(B,re,x){x===void 0&&(x={}),_(B,"Bolt URL");var X=b.parseDatabaseUrl(B),z=!1,N=!1,J;switch(X.scheme){case"bolt":break;case"bolt+s":N=!0,J="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":N=!0,J="TRUST_ALL_CERTIFICATES";break;case"neo4j":z=!0;break;case"neo4j+s":N=!0,J="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",z=!0;break;case"neo4j+ssc":N=!0,J="TRUST_ALL_CERTIFICATES",z=!0;break;default:throw new Error("Unknown scheme: ".concat(X.scheme))}if(N){if("encrypted"in x||"trust"in x)throw new Error("Encryption/trust can only be configured either through URL or config, not both");x.encrypted=v,x.trust=J,x.clientCertificate=(0,a.resolveCertificateProvider)(x.clientCertificate)}var fe=E(re);x.userAgent=x.userAgent||g,x.boltAgent=a.internal.boltAgent.fromVersion(i.default);var Se=p.fromUrl(X.hostAndPort),Y={address:Se,typename:z?"Routing":"Direct",routing:z};return new o.Driver(Y,x,Ce());function Ce(){if(z)return function(de,ot,m,C){return new s.RoutingConnectionProvider({id:de,config:ot,log:m,hostNameResolver:C,authTokenManager:fe,address:Se,userAgent:ot.userAgent,boltAgent:ot.boltAgent,routingContext:X.query})};if(!y(X.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(B,"'"));return function(de,ot,m){return new s.DirectConnectionProvider({id:de,config:ot,log:m,authTokenManager:fe,address:Se,userAgent:ot.userAgent,boltAgent:ot.boltAgent})}}}e.driver=S;function T(B,re){return r(this,void 0,void 0,function(){var x;return t(this,function(X){switch(X.label){case 0:x=S(B,{scheme:"none",principal:"",credentials:""},re),X.label=1;case 1:return X.trys.push([1,,3,5]),[4,x.getNegotiatedProtocolVersion()];case 2:return X.sent(),[2,!0];case 3:return[4,x.close()];case 4:return X.sent(),[7];case 5:return[2]}})})}e.hasReachableServer=T;var P={console:function(B){return{level:B,logger:function(re,x){return console.log("".concat(f.Date.now()," ").concat(re.toUpperCase()," ").concat(x))}}}};e.logging=P;var I={Node:a.Node,Relationship:a.Relationship,UnboundRelationship:a.UnboundRelationship,PathSegment:a.PathSegment,Path:a.Path,Result:a.Result,EagerResult:a.EagerResult,ResultSummary:a.ResultSummary,Record:a.Record,Point:a.Point,Date:a.Date,DateTime:a.DateTime,Duration:a.Duration,LocalDateTime:a.LocalDateTime,LocalTime:a.LocalTime,Time:a.Time,Integer:a.Integer};e.types=I;var k={READ:o.READ,WRITE:o.WRITE};e.session=k;var D={toNumber:a.toNumber,toString:a.toString,inSafeRange:a.inSafeRange};e.integer=D;var K={isPoint:a.isPoint};e.spatial=K;var V={isDuration:a.isDuration,isLocalTime:a.isLocalTime,isTime:a.isTime,isDate:a.isDate,isLocalDateTime:a.isLocalDateTime,isDateTime:a.isDateTime};e.temporal=V;var H={isNode:a.isNode,isPath:a.isPath,isPathSegment:a.isPathSegment,isRelationship:a.isRelationship,isUnboundRelationship:a.isUnboundRelationship};e.graph=H;var ue={authTokenManagers:a.authTokenManagers,driver:S,hasReachableServer:T,int:a.int,isInt:a.isInt,isPoint:a.isPoint,isDuration:a.isDuration,isLocalTime:a.isLocalTime,isTime:a.isTime,isDate:a.isDate,isLocalDateTime:a.isLocalDateTime,isDateTime:a.isDateTime,isNode:a.isNode,isPath:a.isPath,isPathSegment:a.isPathSegment,isRelationship:a.isRelationship,isUnboundRelationship:a.isUnboundRelationship,integer:D,Neo4jError:a.Neo4jError,isRetryableError:a.isRetryableError,auth:a.auth,logging:P,types:I,session:k,routing:a.routing,error:a.error,graph:H,spatial:K,temporal:V,Driver:o.Driver,Session:a.Session,Transaction:a.Transaction,ManagedTransaction:a.ManagedTransaction,Result:a.Result,EagerResult:a.EagerResult,RxSession:c.default,RxTransaction:u.default,RxManagedTransaction:l.default,RxResult:d.default,ResultSummary:a.ResultSummary,Plan:a.Plan,ProfiledPlan:a.ProfiledPlan,QueryStatistics:a.QueryStatistics,Notification:a.Notification,GqlStatusObject:a.GqlStatusObject,ServerInfo:a.ServerInfo,Record:a.Record,Node:a.Node,Relationship:a.Relationship,UnboundRelationship:a.UnboundRelationship,Path:a.Path,PathSegment:a.PathSegment,Point:a.Point,Integer:a.Integer,Duration:a.Duration,LocalTime:a.LocalTime,Time:a.Time,Date:a.Date,LocalDateTime:a.LocalDateTime,DateTime:a.DateTime,bookmarkManager:a.bookmarkManager,resultTransformers:a.resultTransformers,notificationCategory:a.notificationCategory,notificationSeverityLevel:a.notificationSeverityLevel,notificationFilterDisabledCategory:a.notificationFilterDisabledCategory,notificationFilterMinimumSeverityLevel:a.notificationFilterMinimumSeverityLevel,clientCertificateProviders:a.clientCertificateProviders};e.default=ue})(rv);const PG=GS({prefix:"9",name:"base10",alphabet:"0123456789"}),TG=Object.freeze(Object.defineProperty({__proto__:null,base10:PG},Symbol.toStringTag,{value:"Module"})),CG=Mr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),AG=Mr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),IG=Object.freeze(Object.defineProperty({__proto__:null,base16:CG,base16upper:AG},Symbol.toStringTag,{value:"Module"})),RG=Mr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),jG=Object.freeze(Object.defineProperty({__proto__:null,base2:RG},Symbol.toStringTag,{value:"Module"})),w1=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),$G=w1.reduce((e,r,t)=>(e[t]=r,e),[]),NG=w1.reduce((e,r,t)=>{const n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);return e[n]=t,e},[]);function kG(e){return e.reduce((r,t)=>(r+=$G[t],r),"")}function MG(e){const r=[];for(const t of e){const n=t.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${t}`);const o=NG[n];if(o==null)throw new Error(`Non-base256emoji character: ${t}`);r.push(o)}return new Uint8Array(r)}const DG=Og({prefix:"🚀",name:"base256emoji",encode:kG,decode:MG}),LG=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:DG},Symbol.toStringTag,{value:"Module"})),Mf=Mr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),UG=Mr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ps=Mr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),FG=Mr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),BG=Object.freeze(Object.defineProperty({__proto__:null,base64:Mf,base64pad:UG,base64url:ps,base64urlpad:FG},Symbol.toStringTag,{value:"Module"})),xG=Mr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),WG=Object.freeze(Object.defineProperty({__proto__:null,base8:xG},Symbol.toStringTag,{value:"Module"})),VG=Og({prefix:"\0",name:"identity",encode:e=>KS(e),decode:e=>YS(e)}),zG=Object.freeze(Object.defineProperty({__proto__:null,identity:VG},Symbol.toStringTag,{value:"Module"})),qG=new TextEncoder,HG=new TextDecoder,GG="json",KG=512;function YG(e){return qG.encode(JSON.stringify(e))}function ZG(e){return JSON.parse(HG.decode(e))}const QG=Object.freeze(Object.defineProperty({__proto__:null,code:KG,decode:ZG,encode:YG,name:GG},Symbol.toStringTag,{value:"Module"})),E1=0,XG="identity",S1=ZS;function JG(e){return wg(E1,S1(e))}const Nr={code:E1,name:XG,encode:S1,digest:JG},e7=Object.freeze(Object.defineProperty({__proto__:null,identity:Nr},Symbol.toStringTag,{value:"Module"})),gc={...zG,...jG,...WG,...TG,...IG,...JS,...XS,...QS,...BG,...LG},t7={...tP,...e7},r7={raw:eP,json:QG};function mr(e=0){return new Uint8Array(e)}function jn(e=0){return new Uint8Array(e)}function P1(e,r,t,n){return{name:e,prefix:r,encoder:{name:e,prefix:r,encode:t},decoder:{decode:n}}}const Im=P1("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Bh=P1("ascii","a",e=>{let r="a";for(let t=0;t<e.length;t++)r+=String.fromCharCode(e[t]);return r},e=>{e=e.substring(1);const r=jn(e.length);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return r}),T1={utf8:Im,"utf-8":Im,hex:gc.base16,latin1:Bh,ascii:Bh,binary:Bh,...gc};function ge(e,r="utf8"){const t=T1[r];if(t==null)throw new Error(`Unsupported encoding "${r}"`);return t.encoder.encode(e).substring(1)}class ct extends Error{constructor(){super(...arguments);O(this,"name","InvalidMultiaddrError")}}O(ct,"name","InvalidMultiaddrError");class wo extends Error{constructor(){super(...arguments);O(this,"name","ValidationError")}}O(wo,"name","ValidationError");var Jh;let n7=(Jh=class extends Error{constructor(){super(...arguments);O(this,"name","InvalidParametersError")}},O(Jh,"name","InvalidParametersError"),Jh);class C1 extends Error{constructor(){super(...arguments);O(this,"name","UnknownProtocolError")}}O(C1,"name","UnknownProtocolError");function kr(e,r){if(e===r)return!0;if(e.byteLength!==r.byteLength)return!1;for(let t=0;t<e.byteLength;t++)if(e[t]!==r[t])return!1;return!0}function ft(e,r="utf8"){const t=T1[r];if(t==null)throw new Error(`Unsupported encoding "${r}"`);return t.decoder.decode(`${t.prefix}${e}`)}const o7=Math.pow(2,7),i7=Math.pow(2,14),a7=Math.pow(2,21),vp=Math.pow(2,28),_p=Math.pow(2,35),pp=Math.pow(2,42),yp=Math.pow(2,49),_e=128,ze=127;function $n(e){if(e<o7)return 1;if(e<i7)return 2;if(e<a7)return 3;if(e<vp)return 4;if(e<_p)return 5;if(e<pp)return 6;if(e<yp)return 7;if(Number.MAX_SAFE_INTEGER!=null&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function Vv(e,r,t=0){switch($n(e)){case 8:r[t++]=e&255|_e,e/=128;case 7:r[t++]=e&255|_e,e/=128;case 6:r[t++]=e&255|_e,e/=128;case 5:r[t++]=e&255|_e,e/=128;case 4:r[t++]=e&255|_e,e>>>=7;case 3:r[t++]=e&255|_e,e>>>=7;case 2:r[t++]=e&255|_e,e>>>=7;case 1:{r[t++]=e&255,e>>>=7;break}default:throw new Error("unreachable")}return r}function A1(e,r){let t=e[r],n=0;if(n+=t&ze,t<_e||(t=e[r+1],n+=(t&ze)<<7,t<_e)||(t=e[r+2],n+=(t&ze)<<14,t<_e)||(t=e[r+3],n+=(t&ze)<<21,t<_e)||(t=e[r+4],n+=(t&ze)*vp,t<_e)||(t=e[r+5],n+=(t&ze)*_p,t<_e)||(t=e[r+6],n+=(t&ze)*pp,t<_e)||(t=e[r+7],n+=(t&ze)*yp,t<_e))return n;throw new RangeError("Could not decode varint")}function u7(e,r){let t=e.get(r),n=0;if(n+=t&ze,t<_e||(t=e.get(r+1),n+=(t&ze)<<7,t<_e)||(t=e.get(r+2),n+=(t&ze)<<14,t<_e)||(t=e.get(r+3),n+=(t&ze)<<21,t<_e)||(t=e.get(r+4),n+=(t&ze)*vp,t<_e)||(t=e.get(r+5),n+=(t&ze)*_p,t<_e)||(t=e.get(r+6),n+=(t&ze)*pp,t<_e)||(t=e.get(r+7),n+=(t&ze)*yp,t<_e))return n;throw new RangeError("Could not decode varint")}function I1(e,r=0){return e instanceof Uint8Array?A1(e,r):u7(e,r)}function ea(e,r){r==null&&(r=e.reduce((o,i)=>o+i.length,0));const t=jn(r);let n=0;for(const o of e)t.set(o,n),n+=o.length;return t}class s7{constructor(){O(this,"index",0);O(this,"input","")}new(r){return this.index=0,this.input=r,this}readAtomically(r){const t=this.index,n=r();return n===void 0&&(this.index=t),n}parseWith(r){const t=r();if(this.index===this.input.length)return t}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(r){return this.readAtomically(()=>{const t=this.readChar();if(t===r)return t})}readSeparator(r,t,n){return this.readAtomically(()=>{if(!(t>0&&this.readGivenChar(r)===void 0))return n()})}readNumber(r,t,n,o){return this.readAtomically(()=>{let i=0,a=0;const s=this.peekChar();if(s===void 0)return;const c=s==="0",u=2**(8*o)-1;for(;;){const l=this.readAtomically(()=>{const d=this.readChar();if(d===void 0)return;const h=Number.parseInt(d,r);if(!Number.isNaN(h))return h});if(l===void 0)break;if(i*=r,i+=l,i>u||(a+=1,t!==void 0&&a>t))return}if(a!==0)return!n&&c&&a>1?void 0:i})}readIPv4Addr(){return this.readAtomically(()=>{const r=new Uint8Array(4);for(let t=0;t<r.length;t++){const n=this.readSeparator(".",t,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;r[t]=n}return r})}readIPv6Addr(){const r=t=>{for(let n=0;n<t.length/2;n++){const o=n*2;if(n<t.length-3){const a=this.readSeparator(":",n,()=>this.readIPv4Addr());if(a!==void 0)return t[o]=a[0],t[o+1]=a[1],t[o+2]=a[2],t[o+3]=a[3],[o+4,!0]}const i=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(i===void 0)return[o,!1];t[o]=i>>8,t[o+1]=i&255}return[t.length,!1]};return this.readAtomically(()=>{const t=new Uint8Array(16),[n,o]=r(t);if(n===16)return t;if(o||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const i=new Uint8Array(14),a=16-(n+2),[s]=r(i.subarray(0,a));return t.set(i.subarray(0,s),16-s),t})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const c7=45,l7=15,Oc=new s7;function f7(e){if(!(e.length>l7))return Oc.new(e).parseWith(()=>Oc.readIPv4Addr())}function d7(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>c7))return Oc.new(e).parseWith(()=>Oc.readIPv6Addr())}function R1(e){return!!f7(e)}function h7(e){return!!d7(e)}const zv=4,wc=6,qv=273,v7=33,zi=41,j1=42,_7=43,bp=53,mp=54,Df=55,gp=56,p7=132,y7=301,b7=302,m7=400,$1=421,g7=444,O7=445,w7=446,E7=447,N1=448,S7=449,P7=454,T7=460,C7=461,A7=465,I7=466,R7=480,j7=481,$7=443,N7=477,k7=478,M7=479,D7=277,L7=275,U7=276,F7=280,B7=281,k1=290,x7=777;function Rm(e){return r=>ge(r,e)}function jm(e){return r=>ft(r,e)}function Ni(e){return new DataView(e.buffer).getUint16(e.byteOffset).toString()}function io(e){const r=new ArrayBuffer(2);return new DataView(r).setUint16(0,typeof e=="string"?parseInt(e):e),new Uint8Array(r)}function W7(e){const r=e.split(":");if(r.length!==2)throw new Error(`failed to parse onion addr: ["'${r.join('", "')}'"]' does not contain a port number`);if(r[0].length!==16)throw new Error(`failed to parse onion addr: ${r[0]} not a Tor onion address.`);const t=ft(r[0],"base32"),n=parseInt(r[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const o=io(n);return ea([t,o],t.length+o.length)}function V7(e){const r=e.split(":");if(r.length!==2)throw new Error(`failed to parse onion addr: ["'${r.join('", "')}'"]' does not contain a port number`);if(r[0].length!==56)throw new Error(`failed to parse onion addr: ${r[0]} not a Tor onion3 address.`);const t=Eg.decode(`b${r[0]}`),n=parseInt(r[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const o=io(n);return ea([t,o],t.length+o.length)}function $m(e){const r=e.subarray(0,e.length-2),t=e.subarray(e.length-2),n=ge(r,"base32"),o=Ni(t);return`${n}:${o}`}const M1=function(e){e=e.toString().trim();const r=new Uint8Array(4);return e.split(/\./g).forEach((t,n)=>{const o=parseInt(t,10);if(isNaN(o)||o<0||o>255)throw new ct("Invalid byte value in IP address");r[n]=o}),r},z7=function(e){let r=0;e=e.toString().trim();const t=e.split(":",8);let n;for(n=0;n<t.length;n++){const i=R1(t[n]);let a;i&&(a=M1(t[n]),t[n]=ge(a.subarray(0,2),"base16")),a!=null&&++n<8&&t.splice(n,0,ge(a.subarray(2,4),"base16"))}if(t[0]==="")for(;t.length<8;)t.unshift("0");else if(t[t.length-1]==="")for(;t.length<8;)t.push("0");else if(t.length<8){for(n=0;n<t.length&&t[n]!=="";n++);const i=[n,1];for(n=9-t.length;n>0;n--)i.push("0");t.splice.apply(t,i)}const o=new Uint8Array(r+16);for(n=0;n<t.length;n++){t[n]===""&&(t[n]="0");const i=parseInt(t[n],16);if(isNaN(i)||i<0||i>65535)throw new ct("Invalid byte value in IP address");o[r++]=i>>8&255,o[r++]=i&255}return o},q7=function(e){if(e.byteLength!==4)throw new ct("IPv4 address was incorrect length");const r=[];for(let t=0;t<e.byteLength;t++)r.push(e[t]);return r.join(".")},H7=function(e){if(e.byteLength!==16)throw new ct("IPv6 address was incorrect length");const r=[];for(let n=0;n<e.byteLength;n+=2){const o=e[n],i=e[n+1],a=`${o.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}`;r.push(a)}const t=r.join(":");try{const n=new URL(`http://[${t}]`);return n.hostname.substring(1,n.hostname.length-1)}catch{throw new ct(`Invalid IPv6 address "${t}"`)}};function G7(e){try{const r=new URL(`http://[${e}]`);return r.hostname.substring(1,r.hostname.length-1)}catch{throw new ct(`Invalid IPv6 address "${e}"`)}}const xh=Object.values(gc).map(e=>e.decoder),K7=function(){let e=xh[0].or(xh[1]);return xh.slice(2).forEach(r=>e=e.or(r)),e}();function Y7(e){return K7.decode(e)}function Z7(e){return r=>e.encoder.encode(r)}function Q7(e){if(parseInt(e).toString()!==e)throw new wo("Value must be an integer")}function X7(e){if(e<0)throw new wo("Value must be a positive integer, or zero")}function J7(e){return r=>{if(r>e)throw new wo(`Value must be smaller than or equal to ${e}`)}}function e9(...e){return r=>{for(const t of e)t(r)}}const Bs=e9(Q7,X7,J7(65535)),We=-1;class t9{constructor(){O(this,"protocolsByCode",new Map);O(this,"protocolsByName",new Map)}getProtocol(r){let t;if(typeof r=="string"?t=this.protocolsByName.get(r):t=this.protocolsByCode.get(r),t==null)throw new C1(`Protocol ${r} was unknown`);return t}addProtocol(r){var t;this.protocolsByCode.set(r.code,r),this.protocolsByName.set(r.name,r),(t=r.aliases)==null||t.forEach(n=>{this.protocolsByName.set(n,r)})}removeProtocol(r){var n;const t=this.protocolsByCode.get(r);t!=null&&(this.protocolsByCode.delete(t.code),this.protocolsByName.delete(t.name),(n=t.aliases)==null||n.forEach(o=>{this.protocolsByName.delete(o)}))}}const ir=new t9,r9=[{code:zv,name:"ip4",size:32,valueToBytes:M1,bytesToValue:q7,validate:e=>{if(!R1(e))throw new wo(`Invalid IPv4 address "${e}"`)}},{code:wc,name:"tcp",size:16,valueToBytes:io,bytesToValue:Ni,validate:Bs},{code:qv,name:"udp",size:16,valueToBytes:io,bytesToValue:Ni,validate:Bs},{code:v7,name:"dccp",size:16,valueToBytes:io,bytesToValue:Ni,validate:Bs},{code:zi,name:"ip6",size:128,valueToBytes:z7,bytesToValue:H7,stringToValue:G7,validate:e=>{if(!h7(e))throw new wo(`Invalid IPv6 address "${e}"`)}},{code:j1,name:"ip6zone",size:We},{code:_7,name:"ipcidr",size:8,bytesToValue:Rm("base10"),valueToBytes:jm("base10")},{code:bp,name:"dns",size:We,resolvable:!0},{code:mp,name:"dns4",size:We,resolvable:!0},{code:Df,name:"dns6",size:We,resolvable:!0},{code:gp,name:"dnsaddr",size:We,resolvable:!0},{code:p7,name:"sctp",size:16,valueToBytes:io,bytesToValue:Ni,validate:Bs},{code:y7,name:"udt"},{code:b7,name:"utp"},{code:m7,name:"unix",size:We,path:!0,stringToValue:e=>decodeURIComponent(e),valueToString:e=>encodeURIComponent(e)},{code:$1,name:"p2p",aliases:["ipfs"],size:We,bytesToValue:Rm("base58btc"),valueToBytes:e=>e.startsWith("Q")||e.startsWith("1")?jm("base58btc")(e):G.parse(e).multihash.bytes},{code:g7,name:"onion",size:96,bytesToValue:$m,valueToBytes:W7},{code:O7,name:"onion3",size:296,bytesToValue:$m,valueToBytes:V7},{code:w7,name:"garlic64",size:We},{code:E7,name:"garlic32",size:We},{code:N1,name:"tls"},{code:S7,name:"sni",size:We},{code:P7,name:"noise"},{code:T7,name:"quic"},{code:C7,name:"quic-v1"},{code:A7,name:"webtransport"},{code:I7,name:"certhash",size:We,bytesToValue:Z7(ps),valueToBytes:Y7},{code:R7,name:"http"},{code:j7,name:"http-path",size:We,stringToValue:e=>`/${decodeURIComponent(e)}`,valueToString:e=>encodeURIComponent(e.substring(1))},{code:$7,name:"https"},{code:N7,name:"ws"},{code:k7,name:"wss"},{code:M7,name:"p2p-websocket-star"},{code:D7,name:"p2p-stardust"},{code:L7,name:"p2p-webrtc-star"},{code:U7,name:"p2p-webrtc-direct"},{code:F7,name:"webrtc-direct"},{code:B7,name:"webrtc"},{code:k1,name:"p2p-circuit"},{code:x7,name:"memory",size:We}];r9.forEach(e=>{ir.addProtocol(e)});function n9(e){var n;const r=[];let t=0;for(;t<e.length;){const o=I1(e,t),i=ir.getProtocol(o),a=$n(o),s=u9(i,e,t+a);let c=0;s>0&&i.size===We&&(c=$n(s));const u=a+c+s,l={code:o,name:i.name,bytes:e.subarray(t,t+u)};if(s>0){const d=t+a+c,h=e.subarray(d,d+s);l.value=((n=i.bytesToValue)==null?void 0:n.call(i,h))??ge(h)}r.push(l),t+=u}return r}function o9(e){var n;let r=0;const t=[];for(const o of e){if(o.bytes==null){const i=ir.getProtocol(o.code),a=$n(o.code);let s,c=0,u=0;o.value!=null&&(s=((n=i.valueToBytes)==null?void 0:n.call(i,o.value))??ft(o.value),c=s.byteLength,i.size===We&&(u=$n(c)));const l=new Uint8Array(a+u+c);let d=0;Vv(o.code,l,d),d+=a,s!=null&&(i.size===We&&(Vv(c,l,d),d+=u),l.set(s,d)),o.bytes=l}t.push(o.bytes),r+=o.bytes.byteLength}return ea(t,r)}function i9(e){var i;if(e.charAt(0)!=="/")throw new ct('String multiaddr must start with "/"');const r=[];let t="protocol",n="",o="";for(let a=1;a<e.length;a++){const s=e.charAt(a);s!=="/"&&(t==="protocol"?o+=e.charAt(a):n+=e.charAt(a));const c=a===e.length-1;if(s==="/"||c){const u=ir.getProtocol(o);if(t==="protocol"){if(u.size==null||u.size===0){r.push({code:u.code,name:u.name}),n="",o="",t="protocol";continue}else if(c)throw new ct(`Component ${o} was missing value`);t="value"}else if(t==="value"){const l={code:u.code,name:u.name};if(u.size!=null&&u.size!==0){if(n==="")throw new ct(`Component ${o} was missing value`);l.value=((i=u.stringToValue)==null?void 0:i.call(u,n))??n}r.push(l),n="",o="",t="protocol"}}}if(o!==""&&n!=="")throw new ct("Incomplete multiaddr");return r}function a9(e){return`/${e.flatMap(r=>{var n;if(r.value==null)return r.name;const t=ir.getProtocol(r.code);if(t==null)throw new ct(`Unknown protocol code ${r.code}`);return[r.name,((n=t.valueToString)==null?void 0:n.call(t,r.value))??r.value]}).join("/")}`}function u9(e,r,t){return e.size==null||e.size===0?0:e.size>0?e.size/8:I1(r,t)}const s9=Symbol.for("nodejs.util.inspect.custom"),D1=Symbol.for("@multiformats/multiaddr"),c9=[bp,mp,Df,gp];class l9 extends Error{constructor(r="No available resolver"){super(r),this.name="NoAvailableResolverError"}}function f9(e){if(e==null&&(e="/"),Ec(e))return e.getComponents();if(e instanceof Uint8Array)return n9(e);if(typeof e=="string")return e=e.replace(/\/(\/)+/,"/").replace(/(\/)+$/,""),e===""&&(e="/"),i9(e);if(Array.isArray(e))return e;throw new ct("Must be a string, Uint8Array, Component[], or another Multiaddr")}var vg,ve,fo,ho;const ao=class ao{constructor(r="/",t={}){O(this,vg,!0);bs(this,ve);bs(this,fo);bs(this,ho);ms(this,ve,f9(r)),t.validate!==!1&&d9(this)}get bytes(){return he(this,ho)==null&&ms(this,ho,o9(he(this,ve))),he(this,ho)}toString(){return he(this,fo)==null&&ms(this,fo,a9(he(this,ve))),he(this,fo)}toJSON(){return this.toString()}toOptions(){let r,t,n,o,i="";for(const{code:s,name:c,value:u}of he(this,ve))s===j1&&(i=`%${u??""}`),c9.includes(s)&&(t="tcp",o=443,n=`${u??""}${i}`,r=s===Df?6:4),(s===wc||s===qv)&&(t=c==="tcp"?"tcp":"udp",o=parseInt(u??"")),(s===zv||s===zi)&&(t="tcp",n=`${u??""}${i}`,r=s===zi?6:4);if(r==null||t==null||n==null||o==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:r,host:n,transport:t,port:o}}getComponents(){return[...he(this,ve)]}protos(){return he(this,ve).map(({code:r,value:t})=>{const n=ir.getProtocol(r);return{code:r,size:n.size??0,name:n.name,resolvable:!!n.resolvable,path:!!n.path}})}protoCodes(){return he(this,ve).map(({code:r})=>r)}protoNames(){return he(this,ve).map(({name:r})=>r)}tuples(){return he(this,ve).map(({code:r,value:t})=>{var i;if(t==null)return[r];const n=ir.getProtocol(r),o=[r];return t!=null&&o.push(((i=n.valueToBytes)==null?void 0:i.call(n,t))??ft(t)),o})}stringTuples(){return he(this,ve).map(({code:r,value:t})=>t==null?[r]:[r,t])}encapsulate(r){const t=new ao(r);return new ao([...he(this,ve),...t.getComponents()],{validate:!1})}decapsulate(r){const t=r.toString(),n=this.toString(),o=n.lastIndexOf(t);if(o<0)throw new n7(`Address ${this.toString()} does not contain subaddress: ${r.toString()}`);return new ao(n.slice(0,o),{validate:!1})}decapsulateCode(r){let t;for(let n=he(this,ve).length-1;n>-1;n--)if(he(this,ve)[n].code===r){t=n;break}return new ao(he(this,ve).slice(0,t),{validate:!1})}getPeerId(){try{let r=[];he(this,ve).forEach(({code:n,value:o})=>{n===$1&&r.push([n,o]),n===k1&&(r=[])});const t=r.pop();if((t==null?void 0:t[1])!=null){const n=t[1];return n[0]==="Q"||n[0]==="1"?ge(Dr.decode(`z${n}`),"base58btc"):ge(G.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){for(const r of he(this,ve))if(ir.getProtocol(r.code).path)return r.value??null;return null}equals(r){return kr(this.bytes,r.bytes)}async resolve(r){const t=this.protos().find(i=>i.resolvable);if(t==null)return[this];const n=h9.get(t.name);if(n==null)throw new l9(`no available resolver for ${t.name}`);return(await n(this,r)).map(i=>rt(i))}nodeAddress(){const r=this.toOptions();if(r.transport!=="tcp"&&r.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${r.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:r.family,address:r.host,port:r.port}}isThinWaistAddress(){return!(he(this,ve).length!==2||he(this,ve)[0].code!==zv&&he(this,ve)[0].code!==zi||he(this,ve)[1].code!==wc&&he(this,ve)[1].code!==qv)}[(vg=D1,s9)](){return`Multiaddr(${this.toString()})`}};ve=new WeakMap,fo=new WeakMap,ho=new WeakMap;let Hv=ao;function d9(e){e.getComponents().forEach(r=>{var n;const t=ir.getProtocol(r.code);r.value!=null&&((n=t.validate)==null||n.call(t,r.value))})}const h9=new Map;function Ec(e){return!!(e!=null&&e[D1])}function rt(e){return new Hv(e)}class v9 extends Array{constructor(){super(),this.inRecursive=[]}prefix(r){const t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===F.array&&(t.elements++,t.elements!==1&&r.push([44])),t.type===F.map&&(t.elements++,t.elements!==1&&(t.elements%2===1?r.push([44]):r.push([58]))))}[F.uint.major](r,t){this.prefix(r);const n=String(t.value),o=[];for(let i=0;i<n.length;i++)o[i]=n.charCodeAt(i);r.push(o)}[F.negint.major](r,t){this[F.uint.major](r,t)}[F.bytes.major](r,t){throw new Error(`${Di} unsupported type: Uint8Array`)}[F.string.major](r,t){this.prefix(r);const n=rP(JSON.stringify(t.value));r.push(n.length>32?nP(n):n)}[F.array.major](r,t){this.prefix(r),this.inRecursive.push({type:F.array,elements:0}),r.push([91])}[F.map.major](r,t){this.prefix(r),this.inRecursive.push({type:F.map,elements:0}),r.push([123])}[F.tag.major](r,t){}[F.float.major](r,t){if(t.type.name==="break"){const a=this.inRecursive.pop();if(a){if(a.type===F.array)r.push([93]);else if(a.type===F.map)r.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(t.value===void 0)throw new Error(`${Di} unsupported type: undefined`);if(this.prefix(r),t.type.name==="true"){r.push([116,114,117,101]);return}else if(t.type.name==="false"){r.push([102,97,108,115,101]);return}else if(t.type.name==="null"){r.push([110,117,108,108]);return}const n=String(t.value),o=[];let i=!1;for(let a=0;a<n.length;a++)o[a]=n.charCodeAt(a),!i&&(o[a]===46||o[a]===101||o[a]===69)&&(i=!0);i||(o.push(46),o.push(48)),r.push(o)}}function _9(e,r){if(Array.isArray(e[0])||Array.isArray(r[0]))throw new Error(`${Di} complex map keys are not supported`);const t=e[0],n=r[0];if(t.type!==F.string||n.type!==F.string)throw new Error(`${Di} non-string map keys are not supported`);if(t<n)return-1;if(t>n)return 1;throw new Error(`${Di} unexpected duplicate map keys, this is not supported`)}const p9={addBreakTokens:!0,mapSorter:_9};function y9(e,r){return r=Object.assign({},p9,r),oP(e,new v9,r)}class L1{constructor(r,t={}){this._pos=0,this.data=r,this.options=t,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let r=this.ch();for(;r===32||r===9||r===13||r===10;)r=this.data[++this._pos]}expect(r){if(this.data.length-this._pos<r.length)throw new Error(`${Me} unexpected end of input at position ${this._pos}`);for(let t=0;t<r.length;t++)if(this.data[this._pos++]!==r[t])throw new Error(`${Me} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...r)}'`)}parseNumber(){const r=this._pos;let t=!1,n=!1;const o=s=>{for(;!this.done();){const c=this.ch();if(s.includes(c))this._pos++;else break}};if(this.ch()===45&&(t=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,n=!0;else return new se(F.uint,0,this._pos-r);if(o([48,49,50,51,52,53,54,55,56,57]),t&&this._pos===r+1)throw new Error(`${Me} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${Me} unexpected token at position ${this._pos}`);n=!0,this._pos++,o([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,o([48,49,50,51,52,53,54,55,56,57]));const i=String.fromCharCode.apply(null,this.data.subarray(r,this._pos)),a=parseFloat(i);return n?new se(F.float,a,this._pos-r):this.options.allowBigInt!==!0||Number.isSafeInteger(a)?new se(a>=0?F.uint:F.negint,a,this._pos-r):new se(a>=0?F.uint:F.negint,BigInt(i),this._pos-r)}parseString(){if(this.ch()!==34)throw new Error(`${Me} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let i=this._pos,a=0;i<this.data.length&&a<65536;i++,a++){const s=this.data[i];if(s===92||s<32||s>=128)break;if(s===34){const c=String.fromCharCode.apply(null,this.data.subarray(this._pos,i));return this._pos=i+1,new se(F.string,c,a)}}const r=this._pos,t=[],n=()=>{if(this._pos+4>=this.data.length)throw new Error(`${Me} unexpected end of unicode escape sequence at position ${this._pos}`);let i=0;for(let a=0;a<4;a++){let s=this.ch();if(s>=48&&s<=57)s-=48;else if(s>=97&&s<=102)s=s-97+10;else if(s>=65&&s<=70)s=s-65+10;else throw new Error(`${Me} unexpected unicode escape character at position ${this._pos}`);i=i*16+s,this._pos++}return i},o=()=>{const i=this.ch();let a=null,s=i>239?4:i>223?3:i>191?2:1;if(this._pos+s>this.data.length)throw new Error(`${Me} unexpected unicode sequence at position ${this._pos}`);let c,u,l,d;switch(s){case 1:i<128&&(a=i);break;case 2:c=this.data[this._pos+1],(c&192)===128&&(d=(i&31)<<6|c&63,d>127&&(a=d));break;case 3:c=this.data[this._pos+1],u=this.data[this._pos+2],(c&192)===128&&(u&192)===128&&(d=(i&15)<<12|(c&63)<<6|u&63,d>2047&&(d<55296||d>57343)&&(a=d));break;case 4:c=this.data[this._pos+1],u=this.data[this._pos+2],l=this.data[this._pos+3],(c&192)===128&&(u&192)===128&&(l&192)===128&&(d=(i&15)<<18|(c&63)<<12|(u&63)<<6|l&63,d>65535&&d<1114112&&(a=d))}a===null?(a=65533,s=1):a>65535&&(a-=65536,t.push(a>>>10&1023|55296),a=56320|a&1023),t.push(a),this._pos+=s};for(;!this.done();){const i=this.ch();let a;switch(i){case 92:if(this._pos++,this.done())throw new Error(`${Me} unexpected string termination at position ${this._pos}`);switch(a=this.ch(),this._pos++,a){case 34:case 39:case 92:case 47:t.push(a);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(n());break;default:throw new Error(`${Me} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new se(F.string,aP(t),this._pos-r);default:if(i<32)throw new Error(`${Me} invalid control character at position ${this._pos}`);i<128?(t.push(i),this._pos++):o()}}throw new Error(`${Me} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new se(F.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new se(F.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new se(F.null,null,4);case 102:return this.expect([102,97,108,115,101]),new se(F.false,!1,5);case 116:return this.expect([116,114,117,101]),new se(F.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${Me} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new se(F.break,void 0,1);if(this.ch()!==44)throw new Error(`${Me} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new se(F.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new se(F.break,void 0,1);if(this.ch()!==44)throw new Error(`${Me} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new se(F.break,void 0,1);const r=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${Me} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),r}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${Me} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}}function b9(e,r){return r=Object.assign({tokenizer:new L1(e,r)},r),iP(e,r)}function m9(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function g9(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const r=G.asCID(e);if(!r)return null;const t=r.toString();return[new se(F.map,1/0,1),new se(F.string,"/",1),new se(F.string,t,t.length),new se(F.break,void 0,1)]}function Sc(e){const r=Mf.encode(e).slice(1);return[new se(F.map,1/0,1),new se(F.string,"/",1),new se(F.map,1/0,1),new se(F.string,"bytes",5),new se(F.string,r,r.length),new se(F.break,void 0,1),new se(F.break,void 0,1)]}function gt(e){return Sc(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function O9(e){return Sc(new Uint8Array(e))}function w9(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function E9(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const S9={typeEncoders:{Object:g9,Buffer:Sc,Uint8Array:Sc,Int8Array:gt,Uint16Array:gt,Int16Array:gt,Uint32Array:gt,Int32Array:gt,Float32Array:gt,Float64Array:gt,Uint8ClampedArray:gt,BigInt64Array:gt,BigUint64Array:gt,DataView:gt,ArrayBuffer:O9,undefined:w9,number:E9}};class P9 extends L1{constructor(r,t){super(r,t),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const r=this._next();if(r.type===F.map){const t=this._next();if(t.type===F.string&&t.value==="/"){const n=this._next();if(n.type===F.string){if(this._next().type!==F.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new se(F.tag,42,0)}if(n.type===F.map){const o=this._next();if(o.type===F.string&&o.value==="bytes"){const i=this._next();if(i.type===F.string){for(let s=0;s<2;s++)if(this._next().type!==F.break)throw new Error("Invalid encoded Bytes form");const a=Mf.decode(`m${i.value}`);return new se(F.bytes,a,i.value.length)}this.tokenBuffer.push(i)}this.tokenBuffer.push(o)}this.tokenBuffer.push(n)}this.tokenBuffer.push(t)}return r}}const Gv={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Gv.tags[42]=G.parse;const T9="dag-json",C9=297,U1=e=>y9(e,S9),F1=e=>{const r=m9(e),t=Object.assign(Gv,{tokenizer:new P9(r,Gv)});return b9(r,t)},Nm=e=>A9.decode(U1(e)),A9=new TextDecoder,I9=e=>F1(R9.encode(e)),R9=new TextEncoder,j9=Object.freeze(Object.defineProperty({__proto__:null,code:C9,decode:F1,encode:U1,format:Nm,name:T9,parse:I9,stringify:Nm},Symbol.toStringTag,{value:"Module"}));function $9(e,r){if(e===r)return!0;if(e.byteLength!==r.byteLength)return!1;for(let t=0;t<e.byteLength;t++)if(e[t]!==r[t])return!1;return!0}function Op(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function N9(e,r){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),a=i.charCodeAt(0);if(t[a]!==255)throw new TypeError(i+" is ambiguous");t[a]=o}var s=e.length,c=e.charAt(0),u=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function d(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var y=0,p=0,b=0,g=_.length;b!==g&&_[b]===0;)b++,y++;for(var w=(g-b)*l+1>>>0,E=new Uint8Array(w);b!==g;){for(var S=_[b],T=0,P=w-1;(S!==0||T<p)&&P!==-1;P--,T++)S+=256*E[P]>>>0,E[P]=S%s>>>0,S=S/s>>>0;if(S!==0)throw new Error("Non-zero carry");p=T,b++}for(var I=w-p;I!==w&&E[I]===0;)I++;for(var k=c.repeat(y);I<w;++I)k+=e.charAt(E[I]);return k}function h(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;var y=0;if(_[y]!==" "){for(var p=0,b=0;_[y]===c;)p++,y++;for(var g=(_.length-y)*u+1>>>0,w=new Uint8Array(g);_[y];){var E=t[_.charCodeAt(y)];if(E===255)return;for(var S=0,T=g-1;(E!==0||S<b)&&T!==-1;T--,S++)E+=s*w[T]>>>0,w[T]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");b=S,y++}if(_[y]!==" "){for(var P=g-b;P!==g&&w[P]===0;)P++;for(var I=new Uint8Array(p+(g-P)),k=p;P!==g;)I[k++]=w[P++];return I}}}function v(_){var y=h(_);if(y)return y;throw new Error(`Non-${r} character`)}return{encode:d,decodeUnsafe:h,decode:v}}var k9=N9,M9=k9;class D9{constructor(r,t,n){O(this,"name");O(this,"prefix");O(this,"baseEncode");this.name=r,this.prefix=t,this.baseEncode=n}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}}class L9{constructor(r,t,n){O(this,"name");O(this,"prefix");O(this,"baseDecode");O(this,"prefixCodePoint");if(this.name=r,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return B1(this,r)}}class U9{constructor(r){O(this,"decoders");this.decoders=r}or(r){return B1(this,r)}decode(r){const t=r[0],n=this.decoders[t];if(n!=null)return n.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function B1(e,r){return new U9({...e.decoders??{[e.prefix]:e},...r.decoders??{[r.prefix]:r}})}class F9{constructor(r,t,n,o){O(this,"name");O(this,"prefix");O(this,"baseEncode");O(this,"baseDecode");O(this,"encoder");O(this,"decoder");this.name=r,this.prefix=t,this.baseEncode=n,this.baseDecode=o,this.encoder=new D9(r,t,n),this.decoder=new L9(r,t,o)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}}function x1({name:e,prefix:r,encode:t,decode:n}){return new F9(e,r,t,n)}function W1({name:e,prefix:r,alphabet:t}){const{encode:n,decode:o}=M9(t,e);return x1({prefix:r,name:e,encode:n,decode:i=>Op(o(i))})}function B9(e,r,t,n){const o={};for(let l=0;l<r.length;++l)o[r[l]]=l;let i=e.length;for(;e[i-1]==="=";)--i;const a=new Uint8Array(i*t/8|0);let s=0,c=0,u=0;for(let l=0;l<i;++l){const d=o[e[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|d,s+=t,s>=8&&(s-=8,a[u++]=255&c>>s)}if(s>=t||255&c<<8-s)throw new SyntaxError("Unexpected end of data");return a}function x9(e,r,t){const n=r[r.length-1]==="=",o=(1<<t)-1;let i="",a=0,s=0;for(let c=0;c<e.length;++c)for(s=s<<8|e[c],a+=8;a>t;)a-=t,i+=r[o&s>>a];if(a!==0&&(i+=r[o&s<<t-a]),n)for(;i.length*t&7;)i+="=";return i}function dt({name:e,prefix:r,bitsPerChar:t,alphabet:n}){return x1({prefix:r,name:e,encode(o){return x9(o,n,t)},decode(o){return B9(o,n,t,e)}})}dt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});dt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const V1=dt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});dt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function Xt(e){return V1.encode(e).slice(1)}function Bt(e){return V1.decode(`u${e}`)}const ec=dt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});dt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});dt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});dt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});dt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});dt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});dt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});dt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});dt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const Or=W1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});W1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var W9=z1,km=128,V9=-128,z9=Math.pow(2,31);function z1(e,r,t){r=r||[],t=t||0;for(var n=t;e>=z9;)r[t++]=e&255|km,e/=128;for(;e&V9;)r[t++]=e&255|km,e>>>=7;return r[t]=e|0,z1.bytes=t-n+1,r}var q9=Kv,H9=128,Mm=127;function Kv(e,n){var t=0,n=n||0,o=0,i=n,a,s=e.length;do{if(i>=s)throw Kv.bytes=0,new RangeError("Could not decode varint");a=e[i++],t+=o<28?(a&Mm)<<o:(a&Mm)*Math.pow(2,o),o+=7}while(a>=H9);return Kv.bytes=i-n,t}var G9=Math.pow(2,7),K9=Math.pow(2,14),Y9=Math.pow(2,21),Z9=Math.pow(2,28),Q9=Math.pow(2,35),X9=Math.pow(2,42),J9=Math.pow(2,49),eK=Math.pow(2,56),tK=Math.pow(2,63),rK=function(e){return e<G9?1:e<K9?2:e<Y9?3:e<Z9?4:e<Q9?5:e<X9?6:e<J9?7:e<eK?8:e<tK?9:10},nK={encode:W9,decode:q9,encodingLength:rK},Pc=nK;function Yv(e,r=0){return[Pc.decode(e,r),Pc.decode.bytes]}function Tc(e,r,t=0){return Pc.encode(e,r,t),r}function Cc(e){return Pc.encodingLength(e)}function oK(e,r){const t=r.byteLength,n=Cc(e),o=n+Cc(t),i=new Uint8Array(o+t);return Tc(e,i,0),Tc(t,i,n),i.set(r,o),new wp(e,t,r,i)}function iK(e){const r=Op(e),[t,n]=Yv(r),[o,i]=Yv(r.subarray(n)),a=r.subarray(n+i);if(a.byteLength!==o)throw new Error("Incorrect length");return new wp(t,o,a,r)}function aK(e,r){if(e===r)return!0;{const t=r;return e.code===t.code&&e.size===t.size&&t.bytes instanceof Uint8Array&&$9(e.bytes,t.bytes)}}class wp{constructor(r,t,n,o){O(this,"code");O(this,"size");O(this,"digest");O(this,"bytes");this.code=r,this.size=t,this.digest=n,this.bytes=o}}function Dm(e,r){const{bytes:t,version:n}=e;switch(n){case 0:return sK(t,Zv(e),r??Or.encoder);default:return cK(t,Zv(e),r??ec.encoder)}}const Lm=new WeakMap;function Zv(e){const r=Lm.get(e);if(r==null){const t=new Map;return Lm.set(e,t),t}return r}var _g;class Ae{constructor(r,t,n,o){O(this,"code");O(this,"version");O(this,"multihash");O(this,"bytes");O(this,"/");O(this,_g,"CID");this.code=t,this.version=r,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:r,multihash:t}=this;if(r!==Pi)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==lK)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ae.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:r,digest:t}=this.multihash,n=oK(r,t);return Ae.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(r){return Ae.equals(this,r)}static equals(r,t){const n=t;return n!=null&&r.code===n.code&&r.version===n.version&&aK(r.multihash,n.multihash)}toString(r){return Dm(this,r)}toJSON(){return{"/":Dm(this)}}link(){return this}[(_g=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(r){if(r==null)return null;const t=r;if(t instanceof Ae)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){const{version:n,code:o,multihash:i,bytes:a}=t;return new Ae(n,o,i,a??Um(n,o,i.bytes))}else if(t[fK]===!0){const{version:n,multihash:o,code:i}=t,a=iK(o);return Ae.create(n,i,a)}else return null}static create(r,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(r){case 0:{if(t!==Pi)throw new Error(`Version 0 CID must use dag-pb (code: ${Pi}) block encoding`);return new Ae(r,t,n,n.bytes)}case 1:{const o=Um(r,t,n.bytes);return new Ae(r,t,n,o)}default:throw new Error("Invalid version")}}static createV0(r){return Ae.create(0,Pi,r)}static createV1(r,t){return Ae.create(1,r,t)}static decode(r){const[t,n]=Ae.decodeFirst(r);if(n.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(r){const t=Ae.inspectBytes(r),n=t.size-t.multihashSize,o=Op(r.subarray(n,n+t.multihashSize));if(o.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=o.subarray(t.multihashSize-t.digestSize),a=new wp(t.multihashCode,t.digestSize,i,o);return[t.version===0?Ae.createV0(a):Ae.createV1(t.codec,a),r.subarray(t.size)]}static inspectBytes(r){let t=0;const n=()=>{const[d,h]=Yv(r.subarray(t));return t+=h,d};let o=n(),i=Pi;if(o===18?(o=0,t=0):i=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const a=t,s=n(),c=n(),u=t+c,l=u-a;return{version:o,codec:i,multihashCode:s,digestSize:c,multihashSize:l,size:u}}static parse(r,t){const[n,o]=uK(r,t),i=Ae.decode(o);if(i.version===0&&r[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Zv(i).set(n,r),i}}function uK(e,r){switch(e[0]){case"Q":{const t=r??Or;return[Or.prefix,t.decode(`${Or.prefix}${e}`)]}case Or.prefix:{const t=r??Or;return[Or.prefix,t.decode(e)]}case ec.prefix:{const t=r??ec;return[ec.prefix,t.decode(e)]}default:{if(r==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],r.decode(e)]}}}function sK(e,r,t){const{prefix:n}=t;if(n!==Or.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const o=r.get(n);if(o==null){const i=t.encode(e).slice(1);return r.set(n,i),i}else return o}function cK(e,r,t){const{prefix:n}=t,o=r.get(n);if(o==null){const i=t.encode(e);return r.set(n,i),i}else return o}const Pi=112,lK=18;function Um(e,r,t){const n=Cc(e),o=n+Cc(r),i=new Uint8Array(o+t.byteLength);return Tc(e,i,0),Tc(r,i,n),i.set(t,o),i}const fK=Symbol.for("@ipld/js-cid/CID");function dK(e){const[r,t,n]=e;return{payload:t,signatures:[{protected:r,signature:n}],link:Ae.decode(Bt(t))}}function hK(e){const r={signature:Bt(e.signature)};return e.header&&(r.header=e.header),e.protected&&(r.protected=Bt(e.protected)),r}function vK(e){return{payload:Bt(e.payload),signatures:e.signatures.map(hK)}}function _K(e){const r={signature:Xt(e.signature)};return e.header&&(r.header=e.header),e.protected&&(r.protected=Xt(e.protected)),r}function pK(e){const r={payload:Xt(e.payload),signatures:e.signatures.map(_K)};try{return r.pld=Qv(bK(e.payload)),r}catch{try{return r.link=Ae.decode(new Uint8Array(e.payload)),r}catch{throw new Error("Invalid payload, must be either JSON or CID")}}}function Qv(e){if(typeof e=="string"){if(e.startsWith("ipfs://"))return Ae.parse(e.slice(7))}else{if(Array.isArray(e))return e.map(Qv);if(yK(e)){const r={};for(const t in e)r[t]=Qv(e[t]);return r}}return e}function yK(e){return typeof e=="object"&&e!==null}function bK(e){return JSON.parse(new TextDecoder().decode(e))}function mK(e){const[r,t,n,o,i]=e,a={ciphertext:o,iv:n,protected:r,tag:i};return t&&(a.recipients=[{encrypted_key:t}]),a}function gK(e){const r={};return e.encrypted_key&&(r.encrypted_key=Bt(e.encrypted_key)),e.header&&(r.header=e.header),r}function OK(e){const r={ciphertext:Bt(e.ciphertext),protected:Bt(e.protected),iv:Bt(e.iv),tag:Bt(e.tag)};return e.aad&&(r.aad=Bt(e.aad)),e.recipients&&(r.recipients=e.recipients.map(gK)),e.unprotected&&(r.unprotected=e.unprotected),r}function wK(e){const r={};return e.encrypted_key&&(r.encrypted_key=Xt(e.encrypted_key)),e.header&&(r.header=e.header),r}function EK(e){const r={ciphertext:Xt(e.ciphertext),protected:Xt(e.protected),iv:Xt(e.iv),tag:Xt(e.tag)};return e.aad&&(r.aad=Xt(e.aad)),e.recipients&&(r.recipients=e.recipients.map(wK)),e.unprotected&&(r.unprotected=e.unprotected),r}const SK="dag-jose",PK=133;function q1(e){return"payload"in e&&typeof e.payload=="string"&&"signatures"in e&&Array.isArray(e.signatures)}function TK(e){return"payload"in e&&e.payload instanceof Uint8Array&&"signatures"in e&&Array.isArray(e.signatures)}function CK(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}function H1(e){return"ciphertext"in e&&typeof e.ciphertext=="string"&&"iv"in e&&typeof e.iv=="string"&&"protected"in e&&typeof e.protected=="string"&&"tag"in e&&typeof e.tag=="string"}function G1(e){if(typeof e=="string"){const r=e.split(".");if(r.length===3)return dK(r);if(r.length===5)return mK(r);throw new Error("Not a valid JOSE string")}if(q1(e)||H1(e))return e;throw new Error("Not a valid unencoded JOSE object")}function AK(e){typeof e=="string"&&(e=G1(e));let r;if(q1(e))r=vK(e);else if(H1(e))r=OK(e);else throw new Error("Not a valid JOSE object");return new Uint8Array(uP(r))}function IK(e){let r;try{r=sP(e)}catch{throw new Error("Not a valid DAG-JOSE object")}if(TK(r))return pK(r);if(CK(r))return EK(r);throw new Error("Not a valid DAG-JOSE object")}const RK=Object.freeze(Object.defineProperty({__proto__:null,code:PK,decode:IK,encode:AK,name:SK,toGeneral:G1},Symbol.toStringTag,{value:"Module"}));function hr(e){const r=new globalThis.AbortController;function t(){r.abort();for(const i of e)(i==null?void 0:i.removeEventListener)!=null&&i.removeEventListener("abort",t)}for(const i of e){if((i==null?void 0:i.aborted)===!0){t();break}(i==null?void 0:i.addEventListener)!=null&&i.addEventListener("abort",t)}function n(){for(const i of e)(i==null?void 0:i.removeEventListener)!=null&&i.removeEventListener("abort",t)}const o=r.signal;return o.clear=n,o}const jK="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let $K=(e=21)=>{let r="",t=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)r+=jK[t[e]&63];return r};function NK(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var kK=NK;const MK=$c(kK),K1=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,Ep=MK(),Lf=K1&&!Ep,DK=Ep&&K1,LK=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!Ep,Uf=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;async function*Ff(e,r={}){const t=e.getReader();try{for(;;){const n=await t.read();if(n.done)return;yield n.value}}finally{r.preventCancel!==!0&&await t.cancel(),t.releaseLock()}}function Fm(e,r){for(const t in r)Object.defineProperty(e,t,{value:r[t],enumerable:!0,configurable:!0});return e}function UK(e,r,t){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof r=="object"&&(t=r,r=""),r&&(t.code=r);try{return Fm(e,t)}catch{t.message=e.message,t.stack=e.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(e)),Fm(new o,t)}}var FK=UK;const Wt=$c(FK);function Bf(e){const[r,t]=e[Symbol.asyncIterator]!=null?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>r.next(),push:o=>{n.push(o)},next:()=>n.length>0?{done:!1,value:n.shift()}:r.next(),[t](){return this}}}function BK(e){return e[Symbol.asyncIterator]!=null}function Bm(e,r){let t=0;if(BK(e))return async function*(){for await(const c of e)yield r(c,t++)}();const n=Bf(e),{value:o,done:i}=n.next();if(i===!0)return function*(){}();const a=r(o,t++);if(typeof a.then=="function")return async function*(){yield await a;for(const c of n)yield r(c,t++)}();const s=r;return function*(){yield a;for(const c of n)yield s(c,t++)}()}let xK=class extends Error{constructor(t){super(t.statusText);O(this,"response");this.name="HTTPError",this.response=t}};class WK extends Error{constructor(r="Invalid mtime"){super(r),this.name="InvalidMtimeError"}}function Eo(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function Ac(e){return e.constructor!=null&&(e.constructor.name==="Blob"||e.constructor.name==="File")&&typeof e.stream=="function"}function Xv(e){return typeof e=="object"&&(e.path!=null||e.content!=null)}function Ic(e){return typeof(e==null?void 0:e.getReader)=="function"}function Y1(e){if(e!=null)return typeof e=="string"&&(e=parseInt(e,8)),e&4095}function VK(e){return Object.prototype.hasOwnProperty.call(e,"secs")}function zK(e){return Object.prototype.hasOwnProperty.call(e,"Seconds")}function qK(e){return Array.isArray(e)}function xf(e){if(e!=null){if(VK(e)&&(e={secs:e.secs,nsecs:e.nsecs}),zK(e)&&(e={secs:BigInt(e.Seconds),nsecs:e.FractionalNanoseconds}),qK(e)&&(e={secs:BigInt(e[0]),nsecs:e[1]}),e instanceof Date){const r=e.getTime(),t=Math.floor(r/1e3);e={secs:BigInt(t),nsecs:(r-t*1e3)*1e3}}if(typeof e=="bigint"){const r=e/BigInt(1e9),t=e-r*BigInt(1e9);e={secs:r,nsecs:Number(t)}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw new WK("mtime-nsecs must be within the range [0,999999999]");return e}}}async function*HK(e,r){if(typeof e=="string"||e instanceof String||Eo(e)||Ac(e)||e._readableState!=null)throw Wt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(Ic(e)&&(e=Ff(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=Bf(e),{value:n,done:o}=await t.peek();if(o===!0){yield*[];return}if(t.push(n),Number.isInteger(n))throw Wt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState!=null){yield*Bm(t,async i=>Wh({content:i},r));return}if(Eo(n)){yield Wh({content:t},r);return}if(Xv(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||Ic(n)||Ac(n)){yield*Bm(t,async i=>Wh(i,r));return}}throw Xv(e)?Wt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):Wt(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}async function Wh(e,r){const{path:t,mode:n,mtime:o,content:i}=e,a={path:t??"",mode:Y1(n),mtime:xf(o)};return i!=null?a.content=await r(i):t==null&&(a.content=await r(e)),a}const Z1=Symbol.for("@libp2p/peer-id");class yt extends Error{constructor(r="Invalid parameters"){super(r),this.name="InvalidParametersError"}}O(yt,"name","InvalidParametersError");class Sp extends Error{constructor(r="Invalid public key"){super(r),this.name="InvalidPublicKeyError"}}O(Sp,"name","InvalidPublicKeyError");class Q1 extends Error{constructor(r="Invalid CID"){super(r),this.name="InvalidCIDError"}}O(Q1,"name","InvalidCIDError");class X1 extends Error{constructor(r="Invalid Multihash"){super(r),this.name="InvalidMultihashError"}}O(X1,"name","InvalidMultihashError");class Pp extends Error{constructor(r="Unsupported key type"){super(r),this.name="UnsupportedKeyTypeError"}}O(Pp,"name","UnsupportedKeyTypeError");function GK(e){return e[Symbol.asyncIterator]!=null}function J1(e){if(GK(e))return(async()=>{const t=[];for await(const n of e)t.push(n);return t})();const r=[];for(const t of e)r.push(t);return r}async function eE(e){if(Eo(e))return new Blob([e]);if(typeof e=="string"||e instanceof String)return new Blob([e.toString()]);if(Ac(e))return e;if(Ic(e)&&(e=Ff(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const r=Bf(e),{value:t,done:n}=await r.peek();if(n===!0)return xm(r);if(r.push(t),Number.isInteger(t))return new Blob([Uint8Array.from(await J1(r))]);if(Eo(t)||typeof t=="string"||t instanceof String)return xm(r)}throw new yt(`Unexpected input: ${e}`)}async function xm(e){const r=[];for await(const t of e)r.push(t);return new Blob(r)}function KK(e){return HK(e,eE)}function Tp(e){if(e!=null)return typeof e=="string"?e:e.toString(8).padStart(4,"0")}async function Wm(e,r,t={},n){const o=[],i=new FormData;let a=0,s=0;for await(const{content:c,path:u,mode:l,mtime:d}of KK(e)){let h="";const v=c!=null?"file":"dir";a>0&&(h=`-${a}`);let _=v+h;const y=[];if(l!=null&&y.push(`mode=${Tp(l)}`),d!=null){const{secs:p,nsecs:b}=d;y.push(`mtime=${p}`),b!=null&&y.push(`mtime-nsecs=${b}`)}if(y.length>0&&(_=`${_}?${y.join("&")}`),c!=null){i.set(_,c,u!=null?encodeURIComponent(u):void 0);const p=s+c.size;o.push({name:u,start:s,end:p}),s=p}else if(u!=null)i.set(_,new File([""],encodeURIComponent(u),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");a++}return{total:s,parts:o,headers:t,body:i}}async function Zr(e,r,t={},n=`-----------------------------${$K()}`){let o=Wm;return DK&&(o=Wm),o(e,r,t,n)}function xe(e){if(e==null)return e;const r=/^[A-Z]+$/,t={};return Object.keys(e).reduce((n,o)=>(r.test(o)?n[o.toLowerCase()]=e[o]:r.test(o[0])?n[o[0].toLowerCase()+o.slice(1)]=e[o]:n[o]=e[o],n),t)}function A({arg:e,searchParams:r,hashAlg:t,mtime:n,mode:o,...i}={}){r!=null&&(i={...i,...r}),t!=null&&(i.hash=t),n!=null&&(n=xf(n),i.mtime=n.secs,i.mtimeNsecs=n.nsecs),o!=null&&(i.mode=Tp(o)),isNaN(i.timeout)||(i.timeout=`${i.timeout}ms`),e==null?e=[]:Array.isArray(e)||(e=[e]);const a=new URLSearchParams(i);return e.forEach(s=>{a.append("arg",s)}),a}function tE(e){return async function*(t,n={}){const o=new AbortController,i=hr([o.signal,n.signal]);try{const{headers:a,body:s,total:c,parts:u}=await Zr(t,o,n.headers),[l,d]=typeof n.progress=="function"?YK(c,n.progress,u):[void 0,void 0],h=await e.post("add",{searchParams:A({"stream-channels":!0,...n,progress:!!l}),onUploadProgress:d,signal:i,headers:a,body:s});for await(let v of h.ndjson())v=xe(v),v.hash!==void 0?yield QK(v):l!=null&&l(v.bytes??0,v.name)}finally{i.clear()}}}const YK=(e,r,t)=>t!=null?[void 0,ZK(e,t,r)]:[r,void 0],ZK=(e,r,t)=>{let n=0;const o=r.length;return({loaded:i,total:a})=>{const s=Math.floor(i/a*e);for(;n<o;){const{start:c,end:u,name:l}=r[n];if(s<u){t(s-c,l);break}else t(u-c,l),n+=1}}};function QK({name:e,hash:r,size:t,mode:n,mtime:o,mtimeNsecs:i}){const a={path:e,cid:G.parse(r),size:parseInt(t)};return n!=null&&(a.mode=parseInt(n,8)),o!=null&&(a.mtime={secs:o,nsecs:i??0}),a}function XK(e){return e[Symbol.asyncIterator]!=null}function Wf(e){if(XK(e))return(async()=>{let t;for await(const n of e)t=n;return t})();let r;for(const t of e)r=t;return r}async function*JK(e,r){if(e==null)throw Wt(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if(typeof e=="string"||e instanceof String){yield xs(e.toString(),r);return}if(Eo(e)||Ac(e)){yield xs(e,r);return}if(Ic(e)&&(e=Ff(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=Bf(e),{value:n,done:o}=await t.peek();if(o===!0){yield{content:[]};return}if(t.push(n),Number.isInteger(n)||Eo(n)||typeof n=="string"||n instanceof String){yield xs(t,r);return}throw Wt(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(Xv(e)){yield xs(e,r);return}throw Wt(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function xs(e,r){const{path:t,mode:n,mtime:o,content:i}=e,a={path:t??"",mode:Y1(n),mtime:xf(o)};return i!=null?a.content=await r(i):t==null&&(a.content=await r(e)),a}function eY(e){return JK(e,eE)}function tY(e){const r=tE(e);return async function(n,o={}){const i=eY(n),a=r(i,o),s=await Wf(a);if(s==null)throw new Error("Invalid body");return s}}const rE=Symbol.for("@achingbrain/uint8arraylist");function Vm(e,r){if(r==null||r<0)throw new RangeError("index is out of bounds");let t=0;for(const n of e){const o=t+n.byteLength;if(r<o)return{buf:n,index:r-t};t=o}throw new RangeError("index is out of bounds")}function Ws(e){return!!(e!=null&&e[rE])}var pg;class lt{constructor(...r){O(this,"bufs");O(this,"length");O(this,pg,!0);this.bufs=[],this.length=0,r.length>0&&this.appendAll(r)}*[(pg=rE,Symbol.iterator)](){yield*this.bufs}get byteLength(){return this.length}append(...r){this.appendAll(r)}appendAll(r){let t=0;for(const n of r)if(n instanceof Uint8Array)t+=n.byteLength,this.bufs.push(n);else if(Ws(n))t+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=t}prepend(...r){this.prependAll(r)}prependAll(r){let t=0;for(const n of r.reverse())if(n instanceof Uint8Array)t+=n.byteLength,this.bufs.unshift(n);else if(Ws(n))t+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=t}get(r){const t=Vm(this.bufs,r);return t.buf[t.index]}set(r,t){const n=Vm(this.bufs,r);n.buf[n.index]=t}write(r,t=0){if(r instanceof Uint8Array)for(let n=0;n<r.length;n++)this.set(t+n,r[n]);else if(Ws(r))for(let n=0;n<r.length;n++)this.set(t+n,r.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(r){if(r=Math.trunc(r),!(Number.isNaN(r)||r<=0)){if(r===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(r>=this.bufs[0].byteLength)r-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(r),this.length-=r;break}}}slice(r,t){const{bufs:n,length:o}=this._subList(r,t);return ea(n,o)}subarray(r,t){const{bufs:n,length:o}=this._subList(r,t);return n.length===1?n[0]:ea(n,o)}sublist(r,t){const{bufs:n,length:o}=this._subList(r,t),i=new lt;return i.length=o,i.bufs=[...n],i}_subList(r,t){if(r=r??0,t=t??this.length,r<0&&(r=this.length+r),t<0&&(t=this.length+t),r<0||t>this.length)throw new RangeError("index is out of bounds");if(r===t)return{bufs:[],length:0};if(r===0&&t===this.length)return{bufs:this.bufs,length:this.length};const n=[];let o=0;for(let i=0;i<this.bufs.length;i++){const a=this.bufs[i],s=o,c=s+a.byteLength;if(o=c,r>=c)continue;const u=r>=s&&r<c,l=t>s&&t<=c;if(u&&l){if(r===s&&t===c){n.push(a);break}const d=r-s;n.push(a.subarray(d,d+(t-r)));break}if(u){if(r===0){n.push(a);continue}n.push(a.subarray(r-s));continue}if(l){if(t===c){n.push(a);break}n.push(a.subarray(0,t-s));break}n.push(a)}return{bufs:n,length:t-r}}indexOf(r,t=0){if(!Ws(r)&&!(r instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const n=r instanceof Uint8Array?r:r.subarray();if(t=Number(t??0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),r.length===0)return t>this.length?this.length:t;const o=n.byteLength;if(o===0)throw new TypeError("search must be at least 1 byte long");const i=256,a=new Int32Array(i);for(let d=0;d<i;d++)a[d]=-1;for(let d=0;d<o;d++)a[n[d]]=d;const s=a,c=this.byteLength-n.byteLength,u=n.byteLength-1;let l;for(let d=t;d<=c;d+=l){l=0;for(let h=u;h>=0;h--){const v=this.get(d+h);if(n[h]!==v){l=Math.max(1,h-s[v]);break}}if(l===0)return d}return-1}getInt8(r){const t=this.subarray(r,r+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getInt8(0)}setInt8(r,t){const n=jn(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,t),this.write(n,r)}getInt16(r,t){const n=this.subarray(r,r+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,t)}setInt16(r,t,n){const o=mr(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt16(0,t,n),this.write(o,r)}getInt32(r,t){const n=this.subarray(r,r+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,t)}setInt32(r,t,n){const o=mr(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt32(0,t,n),this.write(o,r)}getBigInt64(r,t){const n=this.subarray(r,r+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,t)}setBigInt64(r,t,n){const o=mr(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigInt64(0,t,n),this.write(o,r)}getUint8(r){const t=this.subarray(r,r+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0)}setUint8(r,t){const n=jn(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,t),this.write(n,r)}getUint16(r,t){const n=this.subarray(r,r+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,t)}setUint16(r,t,n){const o=mr(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint16(0,t,n),this.write(o,r)}getUint32(r,t){const n=this.subarray(r,r+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,t)}setUint32(r,t,n){const o=mr(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint32(0,t,n),this.write(o,r)}getBigUint64(r,t){const n=this.subarray(r,r+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,t)}setBigUint64(r,t,n){const o=mr(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigUint64(0,t,n),this.write(o,r)}getFloat32(r,t){const n=this.subarray(r,r+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,t)}setFloat32(r,t,n){const o=mr(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat32(0,t,n),this.write(o,r)}getFloat64(r,t){const n=this.subarray(r,r+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,t)}setFloat64(r,t,n){const o=mr(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat64(0,t,n),this.write(o,r)}equals(r){if(r==null||!(r instanceof lt)||r.bufs.length!==this.bufs.length)return!1;for(let t=0;t<this.bufs.length;t++)if(!kr(this.bufs[t],r.bufs[t]))return!1;return!0}static fromUint8Arrays(r,t){const n=new lt;return n.bufs=r,t==null&&(t=r.reduce((o,i)=>o+i.byteLength,0)),n.length=t,n}}const rY=parseInt("11111",2),Jv=parseInt("10000000",2),nY=parseInt("01111111",2),zm={0:Ti,1:Ti,2:oY,3:uY,4:sY,5:aY,6:iY,16:Ti,22:Ti,48:Ti};function Vf(e,r={offset:0}){const t=e[r.offset]&rY;if(r.offset++,zm[t]!=null)return zm[t](e,r);throw new Error("No decoder for tag "+t)}function ys(e,r){let t=0;if((e[r.offset]&Jv)===Jv){const n=e[r.offset]&nY;let o="0x";r.offset++;for(let i=0;i<n;i++,r.offset++)o+=e[r.offset].toString(16).padStart(2,"0");t=parseInt(o,16)}else t=e[r.offset],r.offset++;return t}function Ti(e,r){ys(e,r);const t=[];for(;!(r.offset>=e.byteLength);){const n=Vf(e,r);if(n===null)break;t.push(n)}return t}function oY(e,r){const t=ys(e,r),n=r.offset,o=r.offset+t,i=[];for(let a=n;a<o;a++)a===n&&e[a]===0||i.push(e[a]);return r.offset+=t,Uint8Array.from(i)}function iY(e,r){const t=ys(e,r),n=r.offset+t,o=e[r.offset];r.offset++;let i=0,a=0;o<40?(i=0,a=o):o<80?(i=1,a=o-40):(i=2,a=o-80);let s=`${i}.${a}`,c=[];for(;r.offset<n;){const u=e[r.offset];if(r.offset++,c.push(u&127),u<128){c.reverse();let l=0;for(let d=0;d<c.length;d++)l+=c[d]<<d*7;s+=`.${l}`,c=[]}}return s}function aY(e,r){return r.offset++,null}function uY(e,r){const t=ys(e,r),n=e[r.offset];r.offset++;const o=e.subarray(r.offset,r.offset+t-1);if(r.offset+=t,n!==0)throw new Error("Unused bits in bit string is unimplemented");return o}function sY(e,r){const t=ys(e,r),n=e.subarray(r.offset,r.offset+t);return r.offset+=t,n}function cY(e){let r=e.toString(16);r.length%2===1&&(r="0"+r);const t=new lt;for(let n=0;n<r.length;n+=2)t.append(Uint8Array.from([parseInt(`${r[n]}${r[n+1]}`,16)]));return t}function Cp(e){if(e.byteLength<128)return Uint8Array.from([e.byteLength]);const r=cY(e.byteLength);return new lt(Uint8Array.from([r.byteLength|Jv]),r)}function e_(e){const r=new lt,t=128;return(e.subarray()[0]&t)===t&&r.append(Uint8Array.from([0])),r.append(e),new lt(Uint8Array.from([2]),Cp(r),r)}function nE(e){const r=Uint8Array.from([0]),t=new lt(r,e);return new lt(Uint8Array.from([3]),Cp(t),t)}function qi(e,r=48){const t=new lt;for(const n of e)t.append(n);return new lt(Uint8Array.from([r]),Cp(t),t)}async function lY(e,r,t,n){var a,s;const o=await crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:e.crv??"P-256"},!1,["verify"]);(a=n==null?void 0:n.signal)==null||a.throwIfAborted();const i=await crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},o,r,t.subarray());return(s=n==null?void 0:n.signal)==null||s.throwIfAborted(),i}const fY=Uint8Array.from([6,8,42,134,72,206,61,3,1,7]),dY=Uint8Array.from([6,5,43,129,4,0,34]),hY=Uint8Array.from([6,5,43,129,4,0,35]),vY={ext:!0,kty:"EC",crv:"P-256"},_Y={ext:!0,kty:"EC",crv:"P-384"},pY={ext:!0,kty:"EC",crv:"P-521"},Vh=32,zh=48,qh=66;function oE(e){const r=Vf(e);return yY(r)}function yY(e){const r=e[1][1][0],t=1;let n,o;if(r.byteLength===Vh*2+1)return n=ge(r.subarray(t,t+Vh),"base64url"),o=ge(r.subarray(t+Vh),"base64url"),new Hh({...vY,key_ops:["verify"],x:n,y:o});if(r.byteLength===zh*2+1)return n=ge(r.subarray(t,t+zh),"base64url"),o=ge(r.subarray(t+zh),"base64url"),new Hh({..._Y,key_ops:["verify"],x:n,y:o});if(r.byteLength===qh*2+1)return n=ge(r.subarray(t,t+qh),"base64url"),o=ge(r.subarray(t+qh),"base64url"),new Hh({...pY,key_ops:["verify"],x:n,y:o});throw new yt(`coordinates were wrong length, got ${r.byteLength}, expected 65, 97 or 133`)}function bY(e){return qi([e_(Uint8Array.from([1])),qi([mY(e.crv)],160),qi([nE(new lt(Uint8Array.from([4]),ft(e.x??"","base64url"),ft(e.y??"","base64url")))],161)]).subarray()}function mY(e){if(e==="P-256")return fY;if(e==="P-384")return dY;if(e==="P-521")return hY;throw new yt(`Invalid curve ${e}`)}class Hh{constructor(r){O(this,"type","ECDSA");O(this,"jwk");O(this,"_raw");this.jwk=r}get raw(){return this._raw==null&&(this._raw=bY(this.jwk)),this._raw}toMultihash(){return Nr.digest(Rp(this))}toCID(){return G.createV1(114,this.toMultihash())}toString(){return Dr.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:kr(this.raw,r.raw)}async verify(r,t,n){return lY(this.jwk,t,r,n)}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Lt=BigInt(0),Qe=BigInt(1),Gh=BigInt(2),gY=BigInt(8),OY={zip215:!0};function wY(e,r,t,n){const o=e.sqr(t),i=e.sqr(n),a=e.add(e.mul(r.a,o),i),s=e.add(e.ONE,e.mul(r.d,e.mul(o,i)));return e.eql(a,s)}function EY(e,r={}){const{Fp:t,Fn:n}=yP("edwards",e,r),{h:o,n:i}=e;Tg(r,{},{uvRatio:"function"});const a=Gh<<BigInt(n.BYTES*8)-Qe,s=y=>t.create(y),c=r.uvRatio||((y,p)=>{try{return{isValid:!0,value:t.sqrt(t.div(y,p))}}catch{return{isValid:!1,value:Lt}}});if(!wY(t,e,e.Gx,e.Gy))throw new Error("bad curve params: generator point");function u(y,p,b=!1){const g=b?Qe:Lt;return Ai("coordinate "+y,p,g,a),p}function l(y){if(!(y instanceof v))throw new Error("ExtendedPoint expected")}const d=Bp((y,p)=>{const{ex:b,ey:g,ez:w}=y,E=y.is0();p==null&&(p=E?gY:t.inv(w));const S=s(b*p),T=s(g*p),P=s(w*p);if(E)return{x:Lt,y:Qe};if(P!==Qe)throw new Error("invZ was invalid");return{x:S,y:T}}),h=Bp(y=>{const{a:p,d:b}=e;if(y.is0())throw new Error("bad point: ZERO");const{ex:g,ey:w,ez:E,et:S}=y,T=s(g*g),P=s(w*w),I=s(E*E),k=s(I*I),D=s(T*p),K=s(I*s(D+P)),V=s(k+s(b*s(T*P)));if(K!==V)throw new Error("bad point: equation left != right (1)");const H=s(g*w),ue=s(E*S);if(H!==ue)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(p,b,g,w){this.ex=u("x",p),this.ey=u("y",b),this.ez=u("z",g,!0),this.et=u("t",w),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(p){if(p instanceof v)throw new Error("extended point not allowed");const{x:b,y:g}=p||{};return u("x",b),u("y",g),new v(b,g,Qe,s(b*g))}static normalizeZ(p){return mP(v,"ez",p)}static msm(p,b){return gP(v,n,p,b)}_setWindowSize(p){this.precompute(p)}precompute(p=8,b=!0){return _.setWindowSize(this,p),b||this.multiply(Gh),this}assertValidity(){h(this)}equals(p){l(p);const{ex:b,ey:g,ez:w}=this,{ex:E,ey:S,ez:T}=p,P=s(b*T),I=s(E*w),k=s(g*T),D=s(S*w);return P===I&&k===D}is0(){return this.equals(v.ZERO)}negate(){return new v(s(-this.ex),this.ey,this.ez,s(-this.et))}double(){const{a:p}=e,{ex:b,ey:g,ez:w}=this,E=s(b*b),S=s(g*g),T=s(Gh*s(w*w)),P=s(p*E),I=b+g,k=s(s(I*I)-E-S),D=P+S,K=D-T,V=P-S,H=s(k*K),ue=s(D*V),B=s(k*V),re=s(K*D);return new v(H,ue,re,B)}add(p){l(p);const{a:b,d:g}=e,{ex:w,ey:E,ez:S,et:T}=this,{ex:P,ey:I,ez:k,et:D}=p,K=s(w*P),V=s(E*I),H=s(T*g*D),ue=s(S*k),B=s((w+E)*(P+I)-K-V),re=ue-H,x=ue+H,X=s(V-b*K),z=s(B*re),N=s(x*X),J=s(B*X),fe=s(re*x);return new v(z,N,fe,J)}subtract(p){return this.add(p.negate())}multiply(p){const b=p;Ai("scalar",b,Qe,i);const{p:g,f:w}=_.wNAFCached(this,b,v.normalizeZ);return v.normalizeZ([g,w])[0]}multiplyUnsafe(p,b=v.ZERO){const g=p;return Ai("scalar",g,Lt,i),g===Lt?v.ZERO:this.is0()||g===Qe?this:_.wNAFCachedUnsafe(this,g,v.normalizeZ,b)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return _.wNAFCachedUnsafe(this,i).is0()}toAffine(p){return d(this,p)}clearCofactor(){return o===Qe?this:this.multiplyUnsafe(o)}static fromBytes(p,b=!1){return hP(p),this.fromHex(p,b)}static fromHex(p,b=!1){const{d:g,a:w}=e,E=t.BYTES;p=Yt("pointHex",p,E),ev("zip215",b);const S=p.slice(),T=p[E-1];S[E-1]=T&-129;const P=tv(S),I=b?a:t.ORDER;Ai("pointHex.y",P,Lt,I);const k=s(P*P),D=s(k-Qe),K=s(g*k-w);let{isValid:V,value:H}=c(D,K);if(!V)throw new Error("Point.fromHex: invalid y coordinate");const ue=(H&Qe)===Qe,B=(T&128)!==0;if(!b&&H===Lt&&B)throw new Error("Point.fromHex: x=0 and x_0=1");return B!==ue&&(H=s(-H)),v.fromAffine({x:H,y:P})}static fromPrivateScalar(p){return v.BASE.multiply(p)}toBytes(){const{x:p,y:b}=this.toAffine(),g=Cg(b,t.BYTES);return g[g.length-1]|=p&Qe?128:0,g}toRawBytes(){return this.toBytes()}toHex(){return vP(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}v.BASE=new v(e.Gx,e.Gy,Qe,s(e.Gx*e.Gy)),v.ZERO=new v(Lt,Qe,Qe,Lt),v.Fp=t,v.Fn=n;const _=bP(v,n.BYTES*8);return v}function SY(e,r){Tg(r,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:t,hash:n}=r,{BASE:o,Fp:i,Fn:a}=e,s=a.ORDER,c=r.randomBytes||dP,u=r.adjustScalarBytes||(S=>S),l=r.domain||((S,T,P)=>{if(ev("phflag",P),T.length||P)throw new Error("Contexts/pre-hash are not supported");return S});function d(S){return a.create(S)}function h(S){return d(tv(S))}function v(S){const T=i.BYTES;S=Yt("private key",S,T);const P=Yt("hashed private key",n(S),2*T),I=u(P.slice(0,T)),k=P.slice(T,2*T),D=h(I);return{head:I,prefix:k,scalar:D}}function _(S){const{head:T,prefix:P,scalar:I}=v(S),k=o.multiply(I),D=k.toBytes();return{head:T,prefix:P,scalar:I,point:k,pointBytes:D}}function y(S){return _(S).pointBytes}function p(S=Uint8Array.of(),...T){const P=Fp(...T);return h(n(l(P,Yt("context",S),!!t)))}function b(S,T,P={}){S=Yt("message",S),t&&(S=t(S));const{prefix:I,scalar:k,pointBytes:D}=_(T),K=p(P.context,I,S),V=o.multiply(K).toBytes(),H=p(P.context,V,D,S),ue=d(K+H*k);Ai("signature.s",ue,Lt,s);const B=i.BYTES,re=Fp(V,Cg(ue,B));return Yt("result",re,B*2)}const g=OY;function w(S,T,P,I=g){const{context:k,zip215:D}=I,K=i.BYTES;S=Yt("signature",S,2*K),T=Yt("message",T),P=Yt("publicKey",P,K),D!==void 0&&ev("zip215",D),t&&(T=t(T));const V=tv(S.slice(K,2*K));let H,ue,B;try{H=e.fromHex(P,D),ue=e.fromHex(S.slice(0,K),D),B=o.multiplyUnsafe(V)}catch{return!1}if(!D&&H.isSmallOrder())return!1;const re=p(k,ue.toBytes(),H.toBytes(),T);return ue.add(H.multiplyUnsafe(re)).subtract(B).clearCofactor().is0()}return o.precompute(8),{getPublicKey:y,sign:b,verify:w,utils:{getExtendedPublicKey:_,randomPrivateKey:()=>c(i.BYTES),precompute(S=8,T=e.BASE){return T.precompute(S,!1)}},Point:e}}function PY(e){const r={a:e.a,d:e.d,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},t=e.Fp,n=Pg(r.n,e.nBitLength,!0),o={Fp:t,Fn:n,uvRatio:e.uvRatio},i={hash:e.hash,randomBytes:e.randomBytes,adjustScalarBytes:e.adjustScalarBytes,domain:e.domain,prehash:e.prehash,mapToCurve:e.mapToCurve};return{CURVE:r,curveOpts:o,eddsaOpts:i}}function TY(e,r){return Object.assign({},r,{ExtendedPoint:r.Point,CURVE:e})}function CY(e){const{CURVE:r,curveOpts:t,eddsaOpts:n}=PY(e),o=EY(r,t),i=SY(o,n);return TY(e,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const AY=BigInt(1),qm=BigInt(2);BigInt(3);const IY=BigInt(5),RY=BigInt(8),zf={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:RY,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function jY(e){const r=BigInt(10),t=BigInt(20),n=BigInt(40),o=BigInt(80),i=zf.p,s=e*e%i*e%i,c=Mt(s,qm,i)*s%i,u=Mt(c,AY,i)*e%i,l=Mt(u,IY,i)*u%i,d=Mt(l,r,i)*l%i,h=Mt(d,t,i)*d%i,v=Mt(h,n,i)*h%i,_=Mt(v,o,i)*v%i,y=Mt(_,o,i)*v%i,p=Mt(y,r,i)*l%i;return{pow_p_5_8:Mt(p,qm,i)*e%i,b2:s}}function $Y(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const Hm=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function NY(e,r){const t=zf.p,n=vr(r*r*r,t),o=vr(n*n*r,t),i=jY(e*o).pow_p_5_8;let a=vr(e*n*i,t);const s=vr(r*a*a,t),c=a,u=vr(a*Hm,t),l=s===e,d=s===vr(-e,t),h=s===vr(-e*Hm,t);return l&&(a=c),(d||h)&&(a=u),OP(a,t)&&(a=vr(-a,t)),{isValid:l||d,value:a}}const kY=Pg(zf.p,void 0,!0),MY={...zf,Fp:kY,hash:_P,adjustScalarBytes:$Y,uvRatio:NY},DY=CY(MY);class Gm extends Error{constructor(r="An error occurred while verifying a message"){super(r),this.name="VerificationError"}}class LY extends Error{constructor(r="Missing Web Crypto API"){super(r),this.name="WebCryptoMissingError"}}const ta={get(e=globalThis){const r=e.crypto;if((r==null?void 0:r.subtle)==null)throw new LY("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return r}},iE=32;let Kh;const UY=(async()=>{try{return await ta.get().subtle.generateKey({name:"Ed25519"},!0,["sign","verify"]),!0}catch{return!1}})();async function FY(e,r,t){if(e.buffer instanceof ArrayBuffer){const n=await ta.get().subtle.importKey("raw",e.buffer,{name:"Ed25519"},!1,["verify"]);return await ta.get().subtle.verify({name:"Ed25519"},n,r,t instanceof Uint8Array?t:t.subarray())}throw new TypeError("WebCrypto does not support SharedArrayBuffer for Ed25519 keys")}function BY(e,r,t){return DY.verify(r,t instanceof Uint8Array?t:t.subarray(),e)}async function xY(e,r,t){return Kh==null&&(Kh=await UY),Kh?FY(e,r,t):BY(e,r,t)}function aE(e){return e==null?!1:typeof e.then=="function"&&typeof e.catch=="function"&&typeof e.finally=="function"}class WY{constructor(r){O(this,"type","Ed25519");O(this,"raw");this.raw=sE(r,iE)}toMultihash(){return Nr.digest(Rp(this))}toCID(){return G.createV1(114,this.toMultihash())}toString(){return Dr.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:kr(this.raw,r.raw)}verify(r,t,n){var i;(i=n==null?void 0:n.signal)==null||i.throwIfAborted();const o=xY(this.raw,t,r);return aE(o)?o.then(a=>{var s;return(s=n==null?void 0:n.signal)==null||s.throwIfAborted(),a}):o}}function uE(e){return e=sE(e,iE),new WY(e)}function sE(e,r){if(e=Uint8Array.from(e??[]),e.length!==r)throw new yt(`Key must be a Uint8Array of length ${r}, got ${e.length}`);return e}const Ap=new Float32Array([-0]),wr=new Uint8Array(Ap.buffer);function VY(e,r,t){Ap[0]=e,r[t]=wr[0],r[t+1]=wr[1],r[t+2]=wr[2],r[t+3]=wr[3]}function zY(e,r){return wr[0]=e[r],wr[1]=e[r+1],wr[2]=e[r+2],wr[3]=e[r+3],Ap[0]}const Ip=new Float64Array([-0]),qe=new Uint8Array(Ip.buffer);function qY(e,r,t){Ip[0]=e,r[t]=qe[0],r[t+1]=qe[1],r[t+2]=qe[2],r[t+3]=qe[3],r[t+4]=qe[4],r[t+5]=qe[5],r[t+6]=qe[6],r[t+7]=qe[7]}function HY(e,r){return qe[0]=e[r],qe[1]=e[r+1],qe[2]=e[r+2],qe[3]=e[r+3],qe[4]=e[r+4],qe[5]=e[r+5],qe[6]=e[r+6],qe[7]=e[r+7],Ip[0]}const GY=BigInt(Number.MAX_SAFE_INTEGER),KY=BigInt(Number.MIN_SAFE_INTEGER);class Ke{constructor(r,t){O(this,"lo");O(this,"hi");this.lo=r|0,this.hi=t|0}toNumber(r=!1){if(!r&&this.hi>>>31>0){const t=~this.lo+1>>>0;let n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(r=!1){if(r)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const t=~this.lo+1>>>0;let n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(BigInt(t)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(r=!1){return this.toBigInt(r).toString()}zzEncode(){const r=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^r)>>>0,this.lo=(this.lo<<1^r)>>>0,this}zzDecode(){const r=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^r)>>>0,this.hi=(this.hi>>>1^r)>>>0,this}length(){const r=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?r<16384?r<128?1:2:r<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}static fromBigInt(r){if(r===0n)return gn;if(r<GY&&r>KY)return this.fromNumber(Number(r));const t=r<0n;t&&(r=-r);let n=r>>32n,o=r-(n<<32n);return t&&(n=~n|0n,o=~o|0n,++o>Km&&(o=0n,++n>Km&&(n=0n))),new Ke(Number(o),Number(n))}static fromNumber(r){if(r===0)return gn;const t=r<0;t&&(r=-r);let n=r>>>0,o=(r-n)/4294967296>>>0;return t&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new Ke(n,o)}static from(r){return typeof r=="number"?Ke.fromNumber(r):typeof r=="bigint"?Ke.fromBigInt(r):typeof r=="string"?Ke.fromBigInt(BigInt(r)):r.low!=null||r.high!=null?new Ke(r.low>>>0,r.high>>>0):gn}}const gn=new Ke(0,0);gn.toBigInt=function(){return 0n};gn.zzEncode=gn.zzDecode=function(){return this};gn.length=function(){return 1};const Km=4294967296n;function YY(e){let r=0,t=0;for(let n=0;n<e.length;++n)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:(t&64512)===55296&&(e.charCodeAt(n+1)&64512)===56320?(++n,r+=4):r+=3;return r}function ZY(e,r,t){if(t-r<1)return"";let o;const i=[];let a=0,s;for(;r<t;)s=e[r++],s<128?i[a++]=s:s>191&&s<224?i[a++]=(s&31)<<6|e[r++]&63:s>239&&s<365?(s=((s&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,i[a++]=55296+(s>>10),i[a++]=56320+(s&1023)):i[a++]=(s&15)<<12|(e[r++]&63)<<6|e[r++]&63,a>8191&&((o??(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o!=null?(a>0&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))}function cE(e,r,t){const n=t;let o,i;for(let a=0;a<e.length;++a)o=e.charCodeAt(a),o<128?r[t++]=o:o<2048?(r[t++]=o>>6|192,r[t++]=o&63|128):(o&64512)===55296&&((i=e.charCodeAt(a+1))&64512)===56320?(o=65536+((o&1023)<<10)+(i&1023),++a,r[t++]=o>>18|240,r[t++]=o>>12&63|128,r[t++]=o>>6&63|128,r[t++]=o&63|128):(r[t++]=o>>12|224,r[t++]=o>>6&63|128,r[t++]=o&63|128);return t-n}function Ot(e,r){return RangeError(`index out of range: ${e.pos} + ${r??1} > ${e.len}`)}function Vs(e,r){return(e[r-4]|e[r-3]<<8|e[r-2]<<16|e[r-1]<<24)>>>0}class QY{constructor(r){O(this,"buf");O(this,"pos");O(this,"len");O(this,"_slice",Uint8Array.prototype.subarray);this.buf=r,this.pos=0,this.len=r.length}uint32(){let r=4294967295;if(r=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(r=(r|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return r;if((this.pos+=5)>this.len)throw this.pos=this.len,Ot(this,10);return r}int32(){return this.uint32()|0}sint32(){const r=this.uint32();return r>>>1^-(r&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw Ot(this,4);return Vs(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw Ot(this,4);return Vs(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw Ot(this,4);const r=zY(this.buf,this.pos);return this.pos+=4,r}double(){if(this.pos+8>this.len)throw Ot(this,4);const r=HY(this.buf,this.pos);return this.pos+=8,r}bytes(){const r=this.uint32(),t=this.pos,n=this.pos+r;if(n>this.len)throw Ot(this,r);return this.pos+=r,t===n?new Uint8Array(0):this.buf.subarray(t,n)}string(){const r=this.bytes();return ZY(r,0,r.length)}skip(r){if(typeof r=="number"){if(this.pos+r>this.len)throw Ot(this,r);this.pos+=r}else do if(this.pos>=this.len)throw Ot(this);while(this.buf[this.pos++]&128);return this}skipType(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${r} at offset ${this.pos}`)}return this}readLongVarint(){const r=new Ke(0,0);let t=0;if(this.len-this.pos>4){for(;t<4;++t)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw Ot(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,r}if(this.len-this.pos>4){for(;t<5;++t)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;t<5;++t){if(this.pos>=this.len)throw Ot(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw Ot(this,8);const r=Vs(this.buf,this.pos+=4),t=Vs(this.buf,this.pos+=4);return new Ke(r,t)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const r=A1(this.buf,this.pos);return this.pos+=$n(r),r}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function XY(e){return new QY(e instanceof Uint8Array?e:e.subarray())}function lE(e,r,t){const n=XY(e);return r.decode(n,void 0,t)}function JY(e){let n,o=8192;return function(a){if(a<1||a>4096)return jn(a);o+a>8192&&(n=jn(8192),o=0);const s=n.subarray(o,o+=a);return o&7&&(o=(o|7)+1),s}}class ki{constructor(r,t,n){O(this,"fn");O(this,"len");O(this,"next");O(this,"val");this.fn=r,this.len=t,this.next=void 0,this.val=n}}function Yh(){}class eZ{constructor(r){O(this,"head");O(this,"tail");O(this,"len");O(this,"next");this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}}const tZ=JY();function rZ(e){return globalThis.Buffer!=null?jn(e):tZ(e)}class t_{constructor(){O(this,"len");O(this,"head");O(this,"tail");O(this,"states");this.len=0,this.head=new ki(Yh,0,0),this.tail=this.head,this.states=null}_push(r,t,n){return this.tail=this.tail.next=new ki(r,t,n),this.len+=t,this}uint32(r){return this.len+=(this.tail=this.tail.next=new oZ((r=r>>>0)<128?1:r<16384?2:r<2097152?3:r<268435456?4:5,r)).len,this}int32(r){return r<0?this._push(zs,10,Ke.fromNumber(r)):this.uint32(r)}sint32(r){return this.uint32((r<<1^r>>31)>>>0)}uint64(r){const t=Ke.fromBigInt(r);return this._push(zs,t.length(),t)}uint64Number(r){return this._push(Vv,$n(r),r)}uint64String(r){return this.uint64(BigInt(r))}int64(r){return this.uint64(r)}int64Number(r){return this.uint64Number(r)}int64String(r){return this.uint64String(r)}sint64(r){const t=Ke.fromBigInt(r).zzEncode();return this._push(zs,t.length(),t)}sint64Number(r){const t=Ke.fromNumber(r).zzEncode();return this._push(zs,t.length(),t)}sint64String(r){return this.sint64(BigInt(r))}bool(r){return this._push(Zh,1,r?1:0)}fixed32(r){return this._push(Ci,4,r>>>0)}sfixed32(r){return this.fixed32(r)}fixed64(r){const t=Ke.fromBigInt(r);return this._push(Ci,4,t.lo)._push(Ci,4,t.hi)}fixed64Number(r){const t=Ke.fromNumber(r);return this._push(Ci,4,t.lo)._push(Ci,4,t.hi)}fixed64String(r){return this.fixed64(BigInt(r))}sfixed64(r){return this.fixed64(r)}sfixed64Number(r){return this.fixed64Number(r)}sfixed64String(r){return this.fixed64String(r)}float(r){return this._push(VY,4,r)}double(r){return this._push(qY,8,r)}bytes(r){const t=r.length>>>0;return t===0?this._push(Zh,1,0):this.uint32(t)._push(iZ,t,r)}string(r){const t=YY(r);return t!==0?this.uint32(t)._push(cE,t,r):this._push(Zh,1,0)}fork(){return this.states=new eZ(this),this.head=this.tail=new ki(Yh,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ki(Yh,0,0),this.len=0),this}ldelim(){const r=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=r.next,this.tail=t,this.len+=n),this}finish(){let r=this.head.next;const t=rZ(this.len);let n=0;for(;r!=null;)r.fn(r.val,t,n),n+=r.len,r=r.next;return t}}function Zh(e,r,t){r[t]=e&255}function nZ(e,r,t){for(;e>127;)r[t++]=e&127|128,e>>>=7;r[t]=e}class oZ extends ki{constructor(t,n){super(nZ,t,n);O(this,"next");this.next=void 0}}function zs(e,r,t){for(;e.hi!==0;)r[t++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)r[t++]=e.lo&127|128,e.lo=e.lo>>>7;r[t++]=e.lo}function Ci(e,r,t){r[t]=e&255,r[t+1]=e>>>8&255,r[t+2]=e>>>16&255,r[t+3]=e>>>24}function iZ(e,r,t){r.set(e,t)}globalThis.Buffer!=null&&(t_.prototype.bytes=function(e){const r=e.length>>>0;return this.uint32(r),r>0&&this._push(aZ,r,e),this},t_.prototype.string=function(e){const r=globalThis.Buffer.byteLength(e);return this.uint32(r),r>0&&this._push(uZ,r,e),this});function aZ(e,r,t){r.set(e,t)}function uZ(e,r,t){e.length<40?cE(e,r,t):r.utf8Write!=null?r.utf8Write(e,t):r.set(ft(e),t)}function sZ(){return new t_}function fE(e,r){const t=sZ();return r.encode(e,t,{lengthDelimited:!1}),t.finish()}var Rc;(function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"})(Rc||(Rc={}));function dE(e,r,t,n){return{name:e,type:r,encode:t,decode:n}}function cZ(e){function r(o){if(e[o.toString()]==null)throw new Error("Invalid enum value");return e[o]}const t=function(i,a){const s=r(i);a.int32(s)},n=function(i){const a=i.int32();return r(a)};return dE("enum",Rc.VARINT,t,n)}function hE(e,r){return dE("message",Rc.LENGTH_DELIMITED,e,r)}var Fe;(function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.secp256k1="secp256k1",e.ECDSA="ECDSA"})(Fe||(Fe={}));var r_;(function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.secp256k1=2]="secp256k1",e[e.ECDSA=3]="ECDSA"})(r_||(r_={}));(function(e){e.codec=()=>cZ(r_)})(Fe||(Fe={}));var So;(function(e){let r;e.codec=()=>(r==null&&(r=hE((t,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),t.Type!=null&&(n.uint32(8),Fe.codec().encode(t.Type,n)),t.Data!=null&&(n.uint32(18),n.bytes(t.Data)),o.lengthDelimited!==!1&&n.ldelim()},(t,n,o={})=>{const i={},a=n==null?t.len:t.pos+n;for(;t.pos<a;){const s=t.uint32();switch(s>>>3){case 1:{i.Type=Fe.codec().decode(t);break}case 2:{i.Data=t.bytes();break}default:{t.skipType(s&7);break}}}return i})),r),e.encode=t=>fE(t,e.codec()),e.decode=(t,n)=>lE(t,e.codec(),n)})(So||(So={}));var Ym;(function(e){let r;e.codec=()=>(r==null&&(r=hE((t,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),t.Type!=null&&(n.uint32(8),Fe.codec().encode(t.Type,n)),t.Data!=null&&(n.uint32(18),n.bytes(t.Data)),o.lengthDelimited!==!1&&n.ldelim()},(t,n,o={})=>{const i={},a=n==null?t.len:t.pos+n;for(;t.pos<a;){const s=t.uint32();switch(s>>>3){case 1:{i.Type=Fe.codec().decode(t);break}case 2:{i.Data=t.bytes();break}default:{t.skipType(s&7);break}}}return i})),r),e.encode=t=>fE(t,e.codec()),e.decode=(t,n)=>lE(t,e.codec(),n)})(Ym||(Ym={}));class lZ{constructor(r,t){O(this,"type","RSA");O(this,"jwk");O(this,"_raw");O(this,"_multihash");this.jwk=r,this._multihash=t}get raw(){return this._raw==null&&(this._raw=_Z(this.jwk)),this._raw}toMultihash(){return this._multihash}toCID(){return G.createV1(114,this._multihash)}toString(){return Dr.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:kr(this.raw,r.raw)}verify(r,t,n){return bZ(this.jwk,t,r,n)}}const fZ=18,dZ=1062,hZ=Uint8Array.from([48,13,6,9,42,134,72,134,247,13,1,1,1,5,0]);function vZ(e){const r=Vf(e[1],{offset:0});return{kty:"RSA",n:ge(r[0],"base64url"),e:ge(r[1],"base64url")}}function _Z(e){if(e.n==null||e.e==null)throw new yt("JWK was missing components");return qi([hZ,nE(qi([e_(ft(e.n,"base64url")),e_(ft(e.e,"base64url"))]))]).subarray()}function pZ(e,r){if(e.byteLength>=dZ)throw new Sp("Key size is too large");const t=Vf(e,{offset:0});return yZ(t,e,r)}function yZ(e,r,t){const n=vZ(e);if(t==null){const o=pP(So.encode({Type:Fe.RSA,Data:r}));t=wg(fZ,o)}return new lZ(n,t)}async function bZ(e,r,t,n){var a,s;const o=await ta.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);(a=n==null?void 0:n.signal)==null||a.throwIfAborted();const i=await ta.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},o,r,t instanceof Uint8Array?t:t.subarray());return(s=n==null?void 0:n.signal)==null||s.throwIfAborted(),i}function mZ(e,r,t,n){var i;const o=Sg.digest(t instanceof Uint8Array?t:t.subarray());if(aE(o))return o.then(({digest:a})=>{var s;return(s=n==null?void 0:n.signal)==null||s.throwIfAborted(),tc.verify(r,a,e)}).catch(a=>{throw a.name==="AbortError"?a:new Gm(String(a))});try{return(i=n==null?void 0:n.signal)==null||i.throwIfAborted(),tc.verify(r,o.digest,e)}catch(a){throw new Gm(String(a))}}class gZ{constructor(r){O(this,"type","secp256k1");O(this,"raw");O(this,"_key");this._key=wZ(r),this.raw=OZ(this._key)}toMultihash(){return Nr.digest(Rp(this))}toCID(){return G.createV1(114,this.toMultihash())}toString(){return Dr.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:kr(this.raw,r.raw)}verify(r,t,n){return mZ(this._key,t,r,n)}}function vE(e){return new gZ(e)}function OZ(e){return tc.ProjectivePoint.fromHex(e).toRawBytes(!0)}function wZ(e){try{return tc.ProjectivePoint.fromHex(e),e}catch(r){throw new Sp(String(r))}}function EZ(e,r){const{Type:t,Data:n}=So.decode(e),o=n??new Uint8Array;switch(t){case Fe.RSA:return pZ(o,r);case Fe.Ed25519:return uE(o);case Fe.secp256k1:return vE(o);case Fe.ECDSA:return oE(o);default:throw new Pp}}function SZ(e){const{Type:r,Data:t}=So.decode(e.digest),n=t??new Uint8Array;switch(r){case Fe.Ed25519:return uE(n);case Fe.secp256k1:return vE(n);case Fe.ECDSA:return oE(n);default:throw new Pp}}function Rp(e){return So.encode({Type:Fe[e.type],Data:e.raw})}const _E=Symbol.for("nodejs.util.inspect.custom"),PZ=114;var yg;class jp{constructor(r){O(this,"type");O(this,"multihash");O(this,"publicKey");O(this,"string");O(this,yg,!0);this.type=r.type,this.multihash=r.multihash,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}toString(){return this.string==null&&(this.string=Dr.encode(this.multihash.bytes).slice(1)),this.string}toMultihash(){return this.multihash}toCID(){return G.createV1(PZ,this.multihash)}toJSON(){return this.toString()}equals(r){var t;if(r==null)return!1;if(r instanceof Uint8Array)return kr(this.multihash.bytes,r);if(typeof r=="string")return this.toString()===r;if(((t=r==null?void 0:r.toMultihash())==null?void 0:t.bytes)!=null)return kr(this.multihash.bytes,r.toMultihash().bytes);throw new Error("not valid Id")}[(yg=Z1,_E)](){return`PeerId(${this.toString()})`}}class TZ extends jp{constructor(t){super({...t,type:"RSA"});O(this,"type","RSA");O(this,"publicKey");this.publicKey=t.publicKey}}class CZ extends jp{constructor(t){super({...t,type:"Ed25519"});O(this,"type","Ed25519");O(this,"publicKey");this.publicKey=t.publicKey}}class AZ extends jp{constructor(t){super({...t,type:"secp256k1"});O(this,"type","secp256k1");O(this,"publicKey");this.publicKey=t.publicKey}}const IZ=2336;var bg,mg;class pE{constructor(r){O(this,"type","url");O(this,"multihash");O(this,"publicKey");O(this,"url");O(this,bg,!0);this.url=r.toString(),this.multihash=Nr.digest(ft(this.url))}[(mg=_E,bg=Z1,mg)](){return`PeerId(${this.url})`}toString(){return this.toCID().toString()}toMultihash(){return this.multihash}toCID(){return G.createV1(IZ,this.toMultihash())}toJSON(){return this.toString()}equals(r){return r==null?!1:(r instanceof Uint8Array&&(r=ge(r)),r.toString()===this.toString())}}const RZ=114,Zm=2336;function it(e,r){let t;if(e.charAt(0)==="1"||e.charAt(0)==="Q")t=cP(Dr.decode(`z${e}`));else{if(e.startsWith("k51qzi5uqu5")||e.startsWith("kzwfwjn5ji4")||e.startsWith("k2k4r8")||e.startsWith("bafz"))return jZ(G.parse(e));throw new yt('Please pass a multibase decoder for strings that do not start with "1" or "Q"')}return yE(t)}function yE(e){if(NZ(e))return new TZ({multihash:e});if($Z(e))try{const r=SZ(e);if(r.type==="Ed25519")return new CZ({multihash:e,publicKey:r});if(r.type==="secp256k1")return new AZ({multihash:e,publicKey:r})}catch{const t=ge(e.digest);return new pE(new URL(t))}throw new X1("Supplied PeerID Multihash is invalid")}function jZ(e){if((e==null?void 0:e.multihash)==null||e.version==null||e.version===1&&e.code!==RZ&&e.code!==Zm)throw new Q1("Supplied PeerID CID is invalid");if(e.code===Zm){const r=ge(e.multihash.digest);return new pE(new URL(r))}return yE(e.multihash)}function $Z(e){return e.code===Nr.code}function NZ(e){return e.code===Sg.code}function bE(e){return async function(t={}){const n=await e.post("bitswap/stat",{searchParams:A(t),signal:t.signal,headers:t.headers});return kZ(await n.json())}}function kZ(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist??[]).map(r=>G.parse(r["/"])),peers:(e.Peers??[]).map(r=>it(r)),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}function MZ(e){return async function(t,n={}){return((await(await e.post("bitswap/wantlist",{signal:n.signal,searchParams:A({...n,peer:t.toString()}),headers:n.headers})).json()).Keys??[]).map(i=>G.parse(i["/"]))}}function DZ(e){return async function(t={}){return((await(await e.post("bitswap/wantlist",{signal:t.signal,searchParams:A(t),headers:t.headers})).json()).Keys??[]).map(o=>G.parse(o["/"]))}}function LZ(e){return{wantlist:DZ(e),wantlistForPeer:MZ(e),stat:bE(e)}}function mE(e){return async function(t,n={}){const o=await e.post("block/get",{signal:n.signal,searchParams:A({arg:t.toString(),...n}),headers:n.headers});return new Uint8Array(await o.arrayBuffer())}}function UZ(e){return async function r(t,n={}){const o=new AbortController,i=hr([o.signal,n.signal]);let a;try{a=await(await e.post("block/put",{signal:i,searchParams:A(n),...await Zr([t],o,n.headers)})).json()}catch(s){if(n.format==="dag-pb")return await r(t,{...n,format:"protobuf"});if(n.format==="dag-cbor")return await r(t,{...n,format:"cbor"});throw s}finally{i.clear()}return G.parse(a.Key)}}function FZ(e){return async function*(t,n={}){Array.isArray(t)||(t=[t]);const o=await e.post("block/rm",{signal:n.signal,searchParams:A({arg:t.map(i=>i.toString()),"stream-channels":!0,...n}),headers:n.headers});for await(const i of o.ndjson())yield BZ(i)}}function BZ(e){const r={cid:G.parse(e.Hash)};return e.Error!=null&&(r.error=new Error(e.Error)),r}function xZ(e){return async function(t,n={}){const i=await(await e.post("block/stat",{signal:n.signal,searchParams:A({arg:t.toString(),...n}),headers:n.headers})).json();return{cid:G.parse(i.Key),size:i.Size}}}function WZ(e){return{get:mE(e),put:UZ(e),rm:FZ(e),stat:xZ(e)}}function VZ(e){return async function(t,n={}){const o=await e.post("bootstrap/add",{signal:n.signal,searchParams:A({arg:t,...n}),headers:n.headers}),{Peers:i}=await o.json();return{Peers:i.map(a=>rt(a))}}}function zZ(e){return async function(t={}){const n=await e.post("bootstrap/list",{signal:t.signal,searchParams:A(t),headers:t.headers}),{Peers:o}=await n.json();return{Peers:o.map(i=>rt(i))}}}function qZ(e){return async function(t,n={}){const o=await e.post("bootstrap/rm",{signal:n.signal,searchParams:A({arg:t,...n}),headers:n.headers}),{Peers:i}=await o.json();return{Peers:i.map(a=>rt(a))}}}function HZ(e){return{add:VZ(e),list:zZ(e),rm:qZ(e)}}function GZ(e){return async function*(t,n={}){yield*(await e.post("cat",{signal:n.signal,searchParams:A({arg:t.toString(),...n}),headers:n.headers})).iterator()}}function KZ(e){return async function(t={}){return(await e.post("commands",{signal:t.signal,searchParams:A(t),headers:t.headers})).json()}}function YZ(e){return async function(t={}){return await(await e.post("config/show",{signal:t.signal,searchParams:A({...t}),headers:t.headers})).json()}}function ZZ(e){return async function(t,n={}){if(t==null)throw new Error("key argument is required");return(await(await e.post("config",{signal:n.signal,searchParams:A({arg:t,...n}),headers:n.headers})).json()).Value}}function QZ(e){return async function(t,n={}){const i=await(await e.post("config/profile/apply",{signal:n.signal,searchParams:A({arg:t,...n}),headers:n.headers})).json();return{original:i.OldCfg,updated:i.NewCfg}}}function XZ(e){return{apply:QZ(e)}}function JZ(e){return async function(t,n={}){const o=new AbortController,i=hr([o.signal,n.signal]);try{await(await e.post("config/replace",{signal:i,searchParams:A(n),...await Zr([ft(JSON.stringify(t))],o,n.headers)})).text()}finally{i.clear()}}}function eQ(e){return async function(t,n,o={}){if(typeof t!="string")throw new Error("Invalid key type");const i={...o,...tQ(t,n)};await(await e.post("config",{signal:o.signal,searchParams:A(i),headers:o.headers})).text()}}function tQ(e,r){switch(typeof r){case"boolean":return{arg:[e,r.toString()],bool:!0};case"string":return{arg:[e,r]};default:return{arg:[e,JSON.stringify(r)],json:!0}}}function rQ(e){return{getAll:YZ(e),get:ZZ(e),set:eQ(e),replace:JZ(e),profiles:XZ(e)}}function nQ(e){return async function*(t,n={}){yield*(await e.post("dag/export",{signal:n.signal,searchParams:A({arg:t.toString()}),headers:n.headers})).iterator()}}function oQ(e){return e[Symbol.asyncIterator]!=null}function iQ(e){if(oQ(e))return(async()=>{for await(const r of e)return r})();for(const r of e)return r}async function*Qm(e,r,t,n,o){const i=async u=>{const l=await t.getCodec(u.code),d=await n(u,o);return l.decode(d)},a=r.split("/").filter(Boolean);let s=await i(e),c=e;for(;a.length>0;){const u=a.shift();if(u==null)throw Wt(new Error(`Could not resolve path "${r}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(s,u))s=s[u],yield{value:s,remainderPath:a.join("/")};else throw Wt(new Error(`no link named "${u}" under ${c}`),"ERR_NO_LINK");const l=G.asCID(s);l!=null&&(c=l,s=await i(s))}yield{value:s,remainderPath:""}}function aQ(e,r){const t=mE(e);return async function(o,i={}){if(i.path!=null){const l=i.localResolve===!0?await iQ(Qm(o,i.path,r,t,i)):await Wf(Qm(o,i.path,r,t,i));if(l==null)throw Wt(new Error("Not found"),"ERR_NOT_FOUND");return l}const a=await r.getCodec(o.code),s=await t(o,i);return{value:a.decode(s),remainderPath:""}}}function uQ(e){return async function*(t,n={}){const o=new AbortController,i=hr([o.signal,n.signal]);try{const{headers:a,body:s}=await Zr(t,o,n.headers),c=await e.post("dag/import",{signal:i,headers:a,body:s,searchParams:A({"pin-roots":n.pinRoots})});for await(const{Root:u}of c.ndjson())if(u!==void 0){const{Cid:{"/":l},PinErrorMsg:d}=u;yield{root:{cid:G.parse(l),pinErrorMsg:d}}}}finally{i.clear()}}}function sQ(e,r){return async function(n,o={}){const i={storeCodec:"dag-cbor",hashAlg:"sha2-256",...o};let a;if(i.inputCodec!=null){if(!(n instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");a=n}else a=(await r.getCodec(i.storeCodec??"dag-cbor")).encode(n),i.inputCodec=i.storeCodec;const s=new AbortController,c=hr([s.signal,i.signal]);try{const l=await(await e.post("dag/put",{timeout:i.timeout,signal:c,searchParams:A(i),...await Zr([a],s,i.headers)})).json();return G.parse(l.Cid["/"])}finally{c.clear()}}}function cQ(e){return async function(t,n={}){const i=await(await e.post("dag/resolve",{signal:n.signal,searchParams:A({arg:`${t}${n.path!=null?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers})).json();return{cid:G.parse(i.Cid["/"]),remainderPath:i.RemPath}}}function lQ(e,r){return{export:nQ(e),get:aQ(e,r),import:uQ(e),put:sQ(e,r),resolve:cQ(e)}}const fQ=0,dQ=1,hQ=2,vQ=3,_Q=4,pQ=5,yQ=6,bQ=7;function li(e){var r;if(e.Type===fQ)return{name:"SENDING_QUERY",type:e.Type};if(e.Type===dQ)return{from:it(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses??[]).map(({ID:t,Addrs:n})=>({id:it(t),multiaddrs:n.map(o=>rt(o)),protocols:[]})),providers:(e.Responses??[]).map(({ID:t,Addrs:n})=>({id:it(t),multiaddrs:n.map(o=>rt(o)),protocols:[]}))};if(e.Type===hQ){let t={id:e.ID??it(e.ID),multiaddrs:[],protocols:[]};return((r=e.Responses)==null?void 0:r.length)>0&&(t={id:it(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map(n=>rt(n)),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:t}}if(e.Type===vQ)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(e.Type===_Q)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map(({ID:t,Addrs:n})=>({id:it(t),multiaddrs:n.map(o=>rt(o)),protocols:[]}))};if(e.Type===pQ)return{name:"VALUE",type:e.Type,value:ft(e.Extra,"base64pad")};if(e.Type===yQ){const t=e.Responses.map(({ID:n})=>it(n));if(t.length===0)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:t[0]}}if(e.Type===bQ)return{name:"DIALING_PEER",type:e.Type,peer:it(e.ID)};throw new Error("Unknown DHT event type")}function mQ(e){return async function*(t,n={}){const o=await e.post("dht/query",{signal:n.signal,searchParams:A({arg:t.toString(),...n}),headers:n.headers});for await(const i of o.ndjson())yield li(i)}}var Xm;(function(e){e[e.SENDING_QUERY=0]="SENDING_QUERY",e[e.PEER_RESPONSE=1]="PEER_RESPONSE",e[e.FINAL_PEER=2]="FINAL_PEER",e[e.QUERY_ERROR=3]="QUERY_ERROR",e[e.PROVIDER=4]="PROVIDER",e[e.VALUE=5]="VALUE",e[e.ADDING_PEER=6]="ADDING_PEER",e[e.DIALING_PEER=7]="DIALING_PEER"})(Xm||(Xm={}));var Jm;(function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"})(Jm||(Jm={}));function gQ(e){return{query:mQ(e)}}function OQ(e){return async function(t={}){return(await e.post("diag/cmds",{signal:t.signal,searchParams:A(t),headers:t.headers})).json()}}function wQ(e){return async function(t={}){return(await e.post("diag/net",{signal:t.signal,searchParams:A(t),headers:t.headers})).json()}}function EQ(e){return async function(t={}){return(await e.post("diag/sys",{signal:t.signal,searchParams:A(t),headers:t.headers})).json()}}function SQ(e){return{cmds:OQ(e),net:wQ(e),sys:EQ(e)}}function PQ(e){return async function(t,n,o={}){const i=Array.isArray(t)?t:[t];await(await e.post("files/cp",{signal:o.signal,searchParams:A({arg:i.concat(n).map(s=>G.asCID(s)!=null?`/ipfs/${s}`:s),...o}),headers:o.headers})).text()}}function TQ(e){return async function(t,n={}){if(typeof t!="string")throw new Error("ipfs.files.flush requires a path");const i=await(await e.post("files/flush",{signal:n.signal,searchParams:A({arg:t,...n}),headers:n.headers})).json();return G.parse(i.Cid)}}function n_(e){const r=xe(e);return Object.prototype.hasOwnProperty.call(r,"mode")&&(r.mode=parseInt(r.mode,8)),Object.prototype.hasOwnProperty.call(r,"mtime")&&(r.mtime={secs:r.mtime,nsecs:r.mtimeNsecs??0},delete r.mtimeNsecs),r}function CQ(e){return async function*(t,n={}){if(t==null)throw new Error("ipfs.files.ls requires a path");const o=await e.post("files/ls",{signal:n.signal,searchParams:A({arg:G.asCID(t)!=null?`/ipfs/${t}`:t,long:!0,...n,stream:!0}),headers:n.headers});for await(const i of o.ndjson())if("Entries"in i)for(const a of i.Entries??[])yield eg(n_(a));else yield eg(n_(i))}}function eg(e){return e.hash!=null&&(e.cid=G.parse(e.hash)),delete e.hash,e.type=e.type===1?"directory":"file",e}function AQ(e){return async function(t,n={}){await(await e.post("files/mkdir",{signal:n.signal,searchParams:A({arg:t,...n}),headers:n.headers})).text()}}function IQ(e){return async function(t,n,o={}){Array.isArray(t)||(t=[t]),await(await e.post("files/mv",{signal:o.signal,searchParams:A({arg:t.concat(n),...o}),headers:o.headers})).text()}}function RQ(e){if($Q(e))return async function*(){const r=e.getReader();try{for(;;){const{done:t,value:n}=await r.read();if(t)return;yield n}}finally{r.releaseLock()}}();if(jQ(e))return e;throw new Error("unknown stream")}function jQ(e){return e[Symbol.asyncIterator]!=null}function $Q(e){return typeof(e==null?void 0:e.getReader)=="function"}function NQ(e){return async function*(t,n={}){const o=await e.post("files/read",{signal:n.signal,searchParams:A({arg:t,count:n.length,...n}),headers:n.headers});if(o.body==null)throw new Error("Invalid response body");yield*RQ(o.body)}}function kQ(e){return async function(t,n={}){const o=await e.post("files/rm",{signal:n.signal,searchParams:A({arg:t,...n}),headers:n.headers}),i=await o.text();if(i!==""){const a=new xK(o);throw a.message=i,a}}}function gE(e){return async function(t,n={}){const i=await(await e.post("files/stat",{signal:n.signal,searchParams:A({arg:t,...n}),headers:n.headers})).json();return i.WithLocality=i.WithLocality??!1,MQ(n_(i))}}function MQ(e){return e.cid=G.parse(e.hash),delete e.hash,e}function DQ(e){return async function(t,n,o={}){const i=new AbortController,a=hr([i.signal,o.signal]);try{await(await e.post("files/write",{signal:a,searchParams:A({arg:t,streamChannels:!0,count:o.length,...o}),...await Zr([{content:n,path:"arg",mode:Tp(o.mode),mtime:xf(o.mtime)}],i,o.headers)})).text()}finally{a.clear()}}}function LQ(e){return{cp:PQ(e),flush:TQ(e),ls:CQ(e),mkdir:AQ(e),mv:IQ(e),read:NQ(e),rm:kQ(e),stat:gE(e),write:DQ(e)}}function UQ(e){return function(){const t=new URL(e.opts.base??"");return{host:t.hostname,port:t.port,protocol:t.protocol,pathname:t.pathname,"api-path":t.pathname}}}function FQ(e){return async function*(t,n={}){const o={arg:`${t instanceof Uint8Array?G.decode(t):t}`,...n};yield*(await e.post("get",{signal:n.signal,searchParams:A(o),headers:n.headers})).iterator()}}function OE(e){return async function(t={}){const o=await(await e.post("id",{signal:t.signal,searchParams:A({arg:t.peerId!=null?t.peerId.toString():void 0,...t}),headers:t.headers})).json(),i={...xe(o)};return i.id=it(i.id),i.addresses!=null&&(i.addresses=i.addresses.map(a=>rt(a))),i}}function BQ(e){const r=OE(e);return async function(n={}){var o;try{const i=await r(n);return!!((o=i==null?void 0:i.addresses)!=null&&o.length)}catch{return!1}}}const xQ={type:"ed25519"};function WQ(e){return async function(t,n=xQ){const i=await(await e.post("key/gen",{signal:n.signal,searchParams:A({arg:t,...n}),headers:n.headers})).json();return xe(i)}}function VQ(e){return async function(t,n,o,i={}){const s=await(await e.post("key/import",{signal:i.signal,searchParams:A({arg:t,pem:n,password:o,...i}),headers:i.headers})).json();return xe(s)}}function zQ(e){return async function(t={}){return((await(await e.post("key/list",{signal:t.signal,searchParams:A(t),headers:t.headers})).json()).Keys??[]).map(i=>xe(i))}}function qQ(e){return async function(t,n,o={}){const i=await e.post("key/rename",{signal:o.signal,searchParams:A({arg:[t,n],...o}),headers:o.headers});return xe(await i.json())}}function HQ(e){return async function(t,n={}){const i=await(await e.post("key/rm",{signal:n.signal,searchParams:A({arg:t,...n}),headers:n.headers})).json();return xe(i.Keys[0])}}function GQ(e){return{gen:WQ(e),import:VQ(e),list:zQ(e),rename:qQ(e),rm:HQ(e)}}const Po=1e3,To=Po*60,Co=To*60,Nn=Co*24,KQ=Nn*7,YQ=Nn*365.25;function wE(e,r){try{if(typeof e=="string"&&e.length>0)return ZQ(e);if(typeof e=="number"&&isFinite(e))return r!=null&&r.long?XQ(e):QQ(e);throw new Error("Value is not a string or number.")}catch(t){const n=JQ(t)?`${t.message}. value=${JSON.stringify(e)}`:"An unknown error has occured.";throw new Error(n)}}function ZQ(e){if(e=String(e),e.length>100)throw new Error("Value exceeds the maximum length of 100 characters.");const r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!r)return NaN;const t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*YQ;case"weeks":case"week":case"w":return t*KQ;case"days":case"day":case"d":return t*Nn;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Co;case"minutes":case"minute":case"mins":case"min":case"m":return t*To;case"seconds":case"second":case"secs":case"sec":case"s":return t*Po;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:throw new Error(`The unit ${n} was matched, but no matching case exists.`)}}function QQ(e){const r=Math.abs(e);return r>=Nn?`${Math.round(e/Nn)}d`:r>=Co?`${Math.round(e/Co)}h`:r>=To?`${Math.round(e/To)}m`:r>=Po?`${Math.round(e/Po)}s`:`${e}ms`}function XQ(e){const r=Math.abs(e);return r>=Nn?qs(e,r,Nn,"day"):r>=Co?qs(e,r,Co,"hour"):r>=To?qs(e,r,To,"minute"):r>=Po?qs(e,r,Po,"second"):`${e} ms`}function qs(e,r,t,n){const o=r>=t*1.5;return`${Math.round(e/t)} ${n}${o?"s":""}`}function JQ(e){return typeof e=="object"&&e!==null&&"message"in e}function eX(e){t.debug=t,t.default=t,t.coerce=c,t.disable=i,t.enable=o,t.enabled=a,t.humanize=wE,t.destroy=u,Object.keys(e).forEach(l=>{t[l]=e[l]}),t.names=[],t.skips=[],t.formatters={};function r(l){let d=0;for(let h=0;h<l.length;h++)d=(d<<5)-d+l.charCodeAt(h),d|=0;return t.colors[Math.abs(d)%t.colors.length]}t.selectColor=r;function t(l){let d,h=null,v,_;function y(...p){if(!y.enabled)return;const b=y,g=Number(new Date),w=g-(d||g);b.diff=w,b.prev=d,b.curr=g,d=g,p[0]=t.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");let E=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,(T,P)=>{if(T==="%%")return"%";E++;const I=t.formatters[P];if(typeof I=="function"){const k=p[E];T=I.call(b,k),p.splice(E,1),E--}return T}),t.formatArgs.call(b,p),(b.log||t.log).apply(b,p)}return y.namespace=l,y.useColors=t.useColors(),y.color=t.selectColor(l),y.extend=n,y.destroy=t.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(v!==t.namespaces&&(v=t.namespaces,_=t.enabled(l)),_),set:p=>{h=p}}),typeof t.init=="function"&&t.init(y),y}function n(l,d){const h=t(this.namespace+(typeof d>"u"?":":d)+l);return h.log=this.log,h}function o(l){t.save(l),t.namespaces=l,t.names=[],t.skips=[];let d;const h=(typeof l=="string"?l:"").split(/[\s,]+/),v=h.length;for(d=0;d<v;d++)h[d]&&(l=h[d].replace(/\*/g,".*?"),l[0]==="-"?t.skips.push(new RegExp("^"+l.substr(1)+"$")):t.names.push(new RegExp("^"+l+"$")))}function i(){const l=[...t.names.map(s),...t.skips.map(s).map(d=>"-"+d)].join(",");return t.enable(""),l}function a(l){if(l[l.length-1]==="*")return!0;let d,h;for(d=0,h=t.skips.length;d<h;d++)if(t.skips[d].test(l))return!1;for(d=0,h=t.names.length;d<h;d++)if(t.names[d].test(l))return!0;return!1}function s(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack??l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.setupFormatters(t.formatters),t.enable(t.load()),t}var tX={};const Ft=sX(),rX=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function nX(){var e,r,t,n,o;return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&((e=navigator.userAgent)==null?void 0:e.toLowerCase().match(/(edge|trident)\/(\d+)/))!=null?!1:typeof document<"u"&&((t=(r=document.documentElement)==null?void 0:r.style)==null?void 0:t.WebkitAppearance)||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&((n=navigator.userAgent)==null?void 0:n.toLowerCase().match(/firefox\/(\d+)/))!=null&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&((o=navigator.userAgent)==null?void 0:o.toLowerCase().match(/applewebkit\/(\d+)/))}function oX(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+wE(this.diff),!this.useColors)return;const r="color: "+this.color;e.splice(1,0,r,"color: inherit");let t=0,n=0;e[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(t++,o==="%c"&&(n=t))}),e.splice(n,0,r)}const iX=console.debug??console.log??(()=>{});function aX(e){try{e?Ft==null||Ft.setItem("debug",e):Ft==null||Ft.removeItem("debug")}catch{}}function uX(){let e;try{e=Ft==null?void 0:Ft.getItem("debug")}catch{}return!e&&typeof globalThis.process<"u"&&"env"in globalThis.process&&(e=tX.DEBUG),e}function sX(){try{return localStorage}catch{}}function cX(e){e.j=function(r){try{return JSON.stringify(r)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}const ut=eX({formatArgs:oX,save:aX,load:uX,useColors:nX,setupFormatters:cX,colors:rX,storage:Ft,log:iX});ut.formatters.b=e=>e==null?"undefined":Dr.baseEncode(e);ut.formatters.t=e=>e==null?"undefined":Eg.baseEncode(e);ut.formatters.m=e=>e==null?"undefined":Mf.baseEncode(e);ut.formatters.p=e=>e==null?"undefined":e.toString();ut.formatters.c=e=>e==null?"undefined":e.toString();ut.formatters.k=e=>e==null?"undefined":e.toString();ut.formatters.a=e=>e==null?"undefined":e.toString();ut.formatters.e=e=>e==null?"undefined":tg(e.stack)??tg(e.message)??e.toString();function lX(e){const r=()=>{};return r.enabled=!1,r.color="",r.diff=0,r.log=()=>{},r.namespace=e,r.destroy=()=>!0,r.extend=()=>r,r}function $p(e){let r=lX(`${e}:trace`);return ut.enabled(`${e}:trace`)&&ut.names.map(t=>t.toString()).find(t=>t.includes(":trace"))!=null&&(r=ut(`${e}:trace`)),Object.assign(ut(e),{error:ut(`${e}:error`),trace:r})}function tg(e){if(e!=null&&(e=e.trim(),e.length!==0))return e}var fX=e=>{if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const r=Object.getPrototypeOf(e);return r===null||r===Object.prototype};const jc=fX,{hasOwnProperty:EE}=Object.prototype,{propertyIsEnumerable:dX}=Object,Ao=(e,r,t)=>Object.defineProperty(e,r,{value:t,writable:!0,enumerable:!0,configurable:!0}),hX=f,rg={concatArrays:!1,ignoreUndefined:!1},qf=e=>{const r=[];for(const t in e)EE.call(e,t)&&r.push(t);if(Object.getOwnPropertySymbols){const t=Object.getOwnPropertySymbols(e);for(const n of t)dX.call(e,n)&&r.push(n)}return r};function fi(e){return Array.isArray(e)?vX(e):jc(e)?_X(e):e}function vX(e){const r=e.slice(0,0);return qf(e).forEach(t=>{Ao(r,t,fi(e[t]))}),r}function _X(e){const r=Object.getPrototypeOf(e)===null?Object.create(null):{};return qf(e).forEach(t=>{Ao(r,t,fi(e[t]))}),r}const SE=(e,r,t,n)=>(t.forEach(o=>{typeof r[o]>"u"&&n.ignoreUndefined||(o in e&&e[o]!==Object.getPrototypeOf(e)?Ao(e,o,o_(e[o],r[o],n)):Ao(e,o,fi(r[o])))}),e),pX=(e,r,t)=>{let n=e.slice(0,0),o=0;return[e,r].forEach(i=>{const a=[];for(let s=0;s<i.length;s++)EE.call(i,s)&&(a.push(String(s)),i===e?Ao(n,o++,i[s]):Ao(n,o++,fi(i[s])));n=SE(n,i,qf(i).filter(s=>!a.includes(s)),t)}),n};function o_(e,r,t){return t.concatArrays&&Array.isArray(e)&&Array.isArray(r)?pX(e,r,t):!jc(r)||!jc(e)?fi(r):SE(e,r,qf(r),t)}var yX=function(...e){const r=o_(fi(rg),this!==hX&&this||{},rg);let t={_:{}};for(const n of e)if(n!==void 0){if(!jc(n))throw new TypeError("`"+n+"` is not an Option Object");t=o_(t,{_:n},r)}return t._};const PE=$c(yX),ne=Object.create(null),TE=6e4,CE=TE*60,Np=CE*24,AE=Np*365.25;ne.year=ne.yr=ne.y=AE;ne.month=ne.mo=ne.mth=AE/12;ne.week=ne.wk=ne.w=Np*7;ne.day=ne.d=Np;ne.hour=ne.hr=ne.h=CE;ne.minute=ne.min=ne.m=TE;ne.second=ne.sec=ne.s=1e3;ne.millisecond=ne.millisec=ne.ms=1;ne.microsecond=ne.microsec=ne.us=ne.µs=.001;ne.nanosecond=ne.nanosec=ne.ns=1e-6;ne.group=",";ne.decimal=".";ne.placeholder=" _";const bX=/((?:\d{1,16}(?:\.\d{1,16})?|\.\d{1,16})(?:[eE][-+]?\d{1,4})?)\s?([\p{L}]{0,14})/gu;Ut.unit=ne;function Ut(e="",r="ms"){let t=null,n;return String(e).replace(new RegExp(`(\\d)[${Ut.unit.placeholder}${Ut.unit.group}](\\d)`,"g"),"$1$2").replace(Ut.unit.decimal,".").replace(bX,(o,i,a)=>{if(a)a=a.toLowerCase();else if(n){for(const s in Ut.unit)if(Ut.unit[s]<n){a=s;break}}else a=r;n=a=Ut.unit[a]||Ut.unit[a.replace(/s$/,"")],a&&(t=(t||0)+i*a)}),t&&t/(Ut.unit[r]||1)*(e[0]==="-"?-1:1)}const mX=()=>{},gX=typeof navigator<"u"&&navigator.product==="ReactNative";function OX(){return gX?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const Hi=self.URL,IE=OX();let wX=class{constructor(r="",t=IE){this.super=new Hi(r,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(r){this.super.hash=r}set host(r){this.super.host=r}set hostname(r){this.super.hostname=r}set href(r){this.super.href=r}set password(r){this.super.password=r}set pathname(r){this.super.pathname=r}set port(r){this.super.port=r}set protocol(r){this.super.protocol=r}set search(r){this.super.search=r}set username(r){this.super.username=r}static createObjectURL(r){return Hi.createObjectURL(r)}static revokeObjectURL(r){Hi.revokeObjectURL(r)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function EX(e){if(typeof e=="string")return new Hi(e).toString();if(!(e instanceof Hi)){const r=e.username&&e.password?`${e.username}:${e.password}@`:"",t=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",o=e.protocol?e.protocol+"//":"",i=e.host||"",a=e.hostname||"",s=e.search||(e.query?"?"+e.query:""),c=e.hash||"",u=e.pathname||"",l=e.path||u+s;return`${o}${r||t}${i||a+n}${l}${c}`}}var RE={URLWithLegacySupport:wX,URLSearchParams:self.URLSearchParams,defaultBase:IE,format:EX};const{URLWithLegacySupport:ng,format:SX}=RE;var PX=(e,r={},t={},n)=>{let o=r.protocol?r.protocol.replace(":",""):"http";o=(t[o]||n||o)+":";let i;try{i=new ng(e)}catch{i={}}const a=Object.assign({},r,{protocol:o||i.protocol,host:r.host||i.host});return new ng(e,SX(a)).toString()};const{URLWithLegacySupport:TX,format:CX,URLSearchParams:AX,defaultBase:IX}=RE,RX=PX;var Hs={URL:TX,URLSearchParams:AX,format:CX,relative:RX,defaultBase:IX};class jE extends Error{constructor(r="Request timed out"){super(r),this.name="TimeoutError"}}class jX extends Error{constructor(r="The operation was aborted."){super(r),this.name="AbortError"}}class og extends Error{constructor(t){super(t.statusText);O(this,"response");this.name="HTTPError",this.response=t}}const $X=globalThis.fetch,kp=globalThis.Headers,NX=globalThis.Request,$E=globalThis.Response,kX=async(e,r={})=>{const t=new XMLHttpRequest;t.open(r.method??"GET",e.toString(),!0);const{timeout:n,headers:o}=r,i=Number(n);if(!isNaN(i)&&i>0&&i<1/0&&(t.timeout=i),r.overrideMimeType!=null&&t.overrideMimeType(r.overrideMimeType),o!=null)for(const[a,s]of new kp(o))t.setRequestHeader(a,s);return r.signal!=null&&(r.signal.onabort=()=>{t.abort()}),r.onUploadProgress!=null&&(t.upload.onprogress=r.onUploadProgress),t.responseType="arraybuffer",new Promise((a,s)=>{const c=u=>{switch(u.type){case"error":{a($E.error());break}case"load":{a(new UX(t.responseURL,t.response,{status:t.status,statusText:t.statusText,headers:LX(t.getAllResponseHeaders())}));break}case"timeout":{s(new jE);break}case"abort":{s(new jX);break}}};t.onerror=c,t.onload=c,t.ontimeout=c,t.onabort=c,t.send(r.body)})},MX=$X,DX=(e,r={})=>r.onUploadProgress!=null?kX(e,r):MX(e,r),LX=e=>{const r=new kp;for(const t of e.trim().split(/[\r\n]+/)){const n=t.indexOf(": ");n>0&&r.set(t.slice(0,n),t.slice(n+1))}return r};class UX extends $E{constructor(r,t,n){super(t,n),Object.defineProperty(this,"url",{value:r})}}const ig=PE.bind({ignoreUndefined:!0}),Gs=$p("kubo-rpc-client:fetch"),FX={throwHttpErrors:!0,credentials:"same-origin"},tt=class tt{constructor(r={}){O(this,"opts");this.opts=ig({},FX,r)}async fetch(r,t={}){const n=ig({},this.opts,t),o=new kp(n.headers);if(typeof r!="string"&&!(r instanceof Hs.URL||r instanceof NX))throw new TypeError("`resource` must be a string, URL, or Request");const i=new Hs.URL(r.toString(),n.base),{searchParams:a,transformSearchParams:s,json:c}=n;a!=null&&(typeof s=="function"?i.search=s(new Hs.URLSearchParams(n.searchParams)):i.search=new Hs.URLSearchParams(n.searchParams).toString()),c!=null&&(n.body=JSON.stringify(n.json),o.set("content-type","application/json"));const u=[n.signal];n.timeout!=null&&isNaN(n.timeout)&&n.timeout>0&&u.push(AbortSignal.timeout(n.timeout));const l=hr(u);try{globalThis.ReadableStream!=null&&n.body instanceof globalThis.ReadableStream&&(Lf||Uf)&&(n.body=new Blob(await J1(Ff(n.body)))),Gs.trace("outgoing headers",n.headers),Gs.trace("%s %s",n.method,i);const d=await DX(i.toString(),{...n,signal:n.signal,timeout:void 0,headers:o,duplex:"half"});if(Gs("%s %s %d",n.method,i,d.status),Gs.trace("incoming headers",d.headers),!d.ok&&n.throwHttpErrors===!0)throw n.handleError!=null&&await n.handleError(d),new og(d);return d.iterator=async function*(){yield*xX(d.body)},d.ndjson=async function*(){for await(const h of BX(d.iterator()))t.transform!=null?yield t.transform(h):yield h},d}finally{l.clear()}}async post(r,t={}){return this.fetch(r,{...t,method:"POST"})}async get(r,t={}){return this.fetch(r,{...t,method:"GET"})}async put(r,t={}){return this.fetch(r,{...t,method:"PUT"})}async delete(r,t={}){return this.fetch(r,{...t,method:"DELETE"})}async options(r,t={}){return this.fetch(r,{...t,method:"OPTIONS"})}};O(tt,"HTTPError",og),O(tt,"TimeoutError",jE),O(tt,"post",async(r,t)=>new tt(t).post(r,t)),O(tt,"get",async(r,t)=>new tt(t).get(r,t)),O(tt,"put",async(r,t)=>new tt(t).put(r,t)),O(tt,"delete",async(r,t)=>new tt(t).delete(r,t)),O(tt,"options",async(r,t)=>new tt(t).options(r,t));let yn=tt;const BX=async function*(e){const r=new TextDecoder;let t="";for await(const n of e){t+=r.decode(n,{stream:!0});const o=t.split(/\r?\n/);for(let i=0;i<o.length-1;i++){const a=o[i].trim();a.length>0&&(yield JSON.parse(a))}t=o[o.length-1]}t+=r.decode(),t=t.trim(),t.length!==0&&(yield JSON.parse(t))},xX=e=>{if(WX(e))return e;if(zX(e)){const r=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:r.next.bind(r),return(t){return e.destroy(),typeof r.return=="function"?r.return():Promise.resolve({done:!0,value:t})}}}}}if(VX(e)){const r=e.getReader();return async function*(){try{for(;;){const{done:t,value:n}=await r.read();if(t)return;n!=null&&(yield n)}}finally{r.releaseLock()}}()}throw new TypeError("Body can't be converted to AsyncIterable")},WX=e=>e!==null&&typeof e[Symbol.asyncIterator]=="function",VX=e=>e!=null&&typeof e.getReader=="function",zX=e=>Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable"),qX=[wc,bp,gp,mp,Df];function ag(e){var r;return(r=NE("sni",e))==null?void 0:r.value}function ug(e){var t;const r=(t=NE("tcp",e))==null?void 0:t.value;return r==null?"":`:${r}`}function NE(e,r){return r.find(t=>t.name===e)}function sg(e){return e.some(({code:r})=>r===N1)}function wt(e,r){const t=kE[e.name];if(t==null)throw new Error(`Can't interpret protocol ${e.name}`);const n=t(e,r);return e.code===zi?`[${n}]`:n}const kE={ip4:(e,r)=>e.value,ip6:(e,r)=>r.length===0?e.value:`[${e.value}]`,tcp:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`tcp://${wt(t,r)}:${e.value}`},udp:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`udp://${wt(t,r)}:${e.value}`},dnsaddr:(e,r)=>e.value,dns4:(e,r)=>e.value,dns6:(e,r)=>e.value,dns:(e,r)=>e.value,ipfs:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`${wt(t,r)}`},p2p:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`${wt(t,r)}`},http:(e,r)=>{const t=sg(r),n=ag(r),o=ug(r);if(t&&n!=null)return`https://${n}${o}`;const i=t?"https://":"http://",a=r.pop();if(a==null)throw new Error("Unexpected end of multiaddr");let s=wt(a,r);return s=s==null?void 0:s.replace("tcp://",""),`${i}${s}`},"http-path":(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");const n=wt(t,r),o=decodeURIComponent(e.value??"");return`${n}${o}`},tls:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return wt(t,r)},sni:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return wt(t,r)},https:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");let n=wt(t,r);return n=n==null?void 0:n.replace("tcp://",""),`https://${n}`},ws:(e,r)=>{const t=sg(r),n=ag(r),o=ug(r);if(t&&n!=null)return`wss://${n}${o}`;const i=t?"wss://":"ws://",a=r.pop();if(a==null)throw new Error("Unexpected end of multiaddr");let s=wt(a,r);return s=s==null?void 0:s.replace("tcp://",""),`${i}${s}`},wss:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");let n=wt(t,r);return n=n==null?void 0:n.replace("tcp://",""),`wss://${n}`}};function HX(e,r){const n=rt(e).getComponents(),o=n.pop();if(o==null)throw new Error("Unexpected end of multiaddr");const i=kE[o.name];if(i==null)throw new Error(`No interpreter found for ${o.name}`);let a=i(o,n)??"";return qX.includes(o.code)&&(a=a.replace(/^.*:\/\//,""),o.value==="443"?a=`https://${a}`:a=`http://${a}`),(a.startsWith("http://")||a.startsWith("https://")||a.startsWith("ws://")||a.startsWith("wss://"))&&(a=new URL(a).toString(),a.endsWith("/")&&(a=a.substring(0,a.length-1))),a}function cg(e){try{e=HX(rt(e))}catch{}return e=e.toString(),e}const lg=$p("js-kubo-rpc-client:lib:error-handler"),GX=PE.bind({ignoreUndefined:!0}),KX=Lf||Uf?location.protocol:"http",YX=Lf||Uf?location.hostname:"localhost",ZX=Lf||Uf?location.port:"5001",QX=(e={})=>{let r,t={},n;if(typeof e=="string"||Ec(e))r=new URL(cg(e));else if(e instanceof URL)r=e;else if(typeof e.url=="string"||Ec(e.url))r=new URL(cg(e.url)),t=e;else if(e.url instanceof URL)r=e.url,t=e;else{t=e??{};const o=(t.protocol??KX).replace(":",""),i=(t.host??YX).split(":")[0],a=t.port??ZX;r=new URL(`${o}://${i}:${a}`)}if(t.apiPath!=null?r.pathname=t.apiPath:(r.pathname==="/"||r.pathname===void 0)&&(r.pathname="api/v0"),LK){const o=mX();n=t.agent??new o({keepAlive:!0,maxSockets:6})}return{...t,host:r.host,protocol:r.protocol.replace(":",""),port:Number(r.port),apiPath:r.pathname,url:r,agent:n}},XX=async e=>{let r;try{if((e.headers.get("Content-Type")??"").startsWith("application/json")){const n=await e.json();lg(n),r=n.Message??n.message}else r=await e.text()}catch(n){lg("Failed to parse error response",n),r=n.message}let t=new yn.HTTPError(e);throw r!=null&&(r.includes("deadline has elapsed")&&(t=new yn.TimeoutError),r.includes("context deadline exceeded")&&(t=new yn.TimeoutError),r.includes("request timed out")&&(t=new yn.TimeoutError),t.message=r),t},JX=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,fg=e=>e.replace(JX,function(r){return"-"+r.toLowerCase()}),eJ=e=>typeof e=="string"?Ut(e)??0:e;class tJ extends yn{constructor(r={}){const t=QX(r);super({timeout:t.timeout!=null?eJ(t.timeout):void 0,headers:t.headers,base:`${t.url}`,handleError:XX,transformSearchParams:o=>{const i=new URLSearchParams;for(const[a,s]of o)s!=="undefined"&&s!=="null"&&a!=="signal"&&a!=="timeout"&&i.append(fg(a),s),a==="timeout"&&!isNaN(parseInt(s))&&i.append(fg(a),s);return i},agent:t.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;const n=this.fetch;this.fetch=async(o,i={})=>(typeof o=="string"&&!o.startsWith("/")&&(o=`${t.url}/${o}`),n.call(this,o,GX(i,{method:"POST"})))}}const rJ=async e=>Promise.reject(new Error(`No base found for "${e}"`));class nJ{constructor(r){O(this,"_basesByName");O(this,"_basesByPrefix");O(this,"_loadBase");this._basesByName={},this._basesByPrefix={},this._loadBase=r.loadBase??rJ;for(const t of r.bases)this.addBase(t)}addBase(r){if(this._basesByName[r.name]!=null&&this._basesByPrefix[r.prefix]!=null)throw new Error(`Codec already exists for codec "${r.name}"`);this._basesByName[r.name]=r,this._basesByPrefix[r.prefix]=r}removeBase(r){delete this._basesByName[r.name],delete this._basesByPrefix[r.prefix]}async getBase(r){if(this._basesByName[r]!=null)return this._basesByName[r];if(this._basesByPrefix[r]!=null)return this._basesByPrefix[r];const t=await this._loadBase(r);return this._basesByName[t.name]==null&&this._basesByPrefix[t.prefix]==null&&this.addBase(t),t}listBases(){return Object.values(this._basesByName)}}const oJ=async e=>Promise.reject(new Error(`No codec found for "${e}"`));class iJ{constructor(r){O(this,"_codecsByName");O(this,"_codecsByCode");O(this,"_loadCodec");this._codecsByName={},this._codecsByCode={},this._loadCodec=r.loadCodec??oJ;for(const t of r.codecs)this.addCodec(t)}addCodec(r){if(this._codecsByName[r.name]!=null||this._codecsByCode[r.code]!=null)throw new Error(`Resolver already exists for codec "${r.name}"`);this._codecsByName[r.name]=r,this._codecsByCode[r.code]=r}removeCodec(r){delete this._codecsByName[r.name],delete this._codecsByCode[r.code]}async getCodec(r){const t=typeof r=="string"?this._codecsByName:this._codecsByCode;if(t[r]!=null)return t[r];const n=await this._loadCodec(r);return t[r]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}}const aJ=async e=>Promise.reject(new Error(`No hasher found for "${e}"`));class uJ{constructor(r){O(this,"_hashersByName");O(this,"_hashersByCode");O(this,"_loadHasher");this._hashersByName={},this._hashersByCode={},this._loadHasher=r.loadHasher??aJ;for(const t of r.hashers)this.addHasher(t)}addHasher(r){if(this._hashersByName[r.name]!=null||this._hashersByCode[r.code]!=null)throw new Error(`Resolver already exists for codec "${r.name}"`);this._hashersByName[r.name]=r,this._hashersByCode[r.code]=r}removeHasher(r){delete this._hashersByName[r.name],delete this._hashersByCode[r.code]}async getHasher(r){const t=typeof r=="string"?this._hashersByName:this._hashersByCode;if(t[r]!=null)return t[r];const n=await this._loadHasher(r);return t[r]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}}function sJ(e){return async function(r,t,n={}){const o=await e.post("log/level",{signal:n.signal,searchParams:A({arg:[r,t],...n}),headers:n.headers});return xe(await o.json())}}function cJ(e){return async function(t={}){return(await(await e.post("log/ls",{signal:t.signal,searchParams:A(t),headers:t.headers})).json()).Strings}}function lJ(e){return async function*(t={}){yield*(await e.post("log/tail",{signal:t.signal,searchParams:A(t),headers:t.headers})).ndjson()}}function fJ(e){return{level:sJ(e),ls:cJ(e),tail:lJ(e)}}function dJ(e){return async function*(t,n={}){const o=`${t instanceof Uint8Array?G.decode(t):t}`;async function i(s){let c=s.Hash;if(c.includes("/")===!0){const l=c.startsWith("/ipfs/")===!0?c:`/ipfs/${c}`;c=(await gE(e)(l)).cid}else c=G.parse(c);return{name:s.Name,path:o+(s.Name!=null?`/${s.Name}`:""),size:s.Size,cid:c,type:hJ(s)}}const a=await e.post("ls",{signal:n.signal,searchParams:A({arg:o,...n}),headers:n.headers});for await(let s of a.ndjson()){if(s=s.Objects,s==null)throw new Error("expected .Objects in results");if(s=s[0],s==null)throw new Error("expected one array in results.Objects");const c=s.Links;if(!Array.isArray(c))throw new Error("expected one array in results.Objects[0].Links");if(c.length===0){yield i(s);return}yield*c.map(i)}}}function hJ(e){switch(e.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}function vJ(e){return async function(t={}){const n=await e.post("dns",{signal:t.signal,searchParams:A(t),headers:t.headers});return xe(await n.json())}}function _J(e){return async function(t,n={}){const o=await e.post("name/publish",{signal:n.signal,searchParams:A({arg:`${t}`,...n}),headers:n.headers});return xe(await o.json())}}function pJ(e){return async function(t,n={}){const o=await e.post("name/pubsub/cancel",{signal:n.signal,searchParams:A({arg:t,...n}),headers:n.headers});return xe(await o.json())}}function yJ(e){return async function(t={}){const n=await e.post("name/pubsub/state",{signal:t.signal,searchParams:A(t),headers:t.headers});return xe(await n.json())}}function bJ(e){return async function(t={}){return(await(await e.post("name/pubsub/subs",{signal:t.signal,searchParams:A(t),headers:t.headers})).json()).Strings??[]}}function mJ(e){return{cancel:pJ(e),state:yJ(e),subs:bJ(e)}}function gJ(e){return async function*(t,n={}){const o=await e.post("name/resolve",{signal:n.signal,searchParams:A({arg:t,stream:!0,...n}),headers:n.headers});for await(const i of o.ndjson())yield i.Path}}function OJ(e){return{publish:_J(e),resolve:gJ(e),pubsub:mJ(e)}}function wJ(e){return async function(t,n,o={}){const i=await e.post("object/patch/add-link",{signal:o.signal,searchParams:A({arg:[`${t}`,n.Name??n.name??"",(n.Hash??n.cid??"").toString()??null],...o}),headers:o.headers}),{Hash:a}=await i.json();return G.parse(a)}}function EJ(e){return async function(t,n,o={}){const i=await e.post("object/patch/rm-link",{signal:o.signal,searchParams:A({arg:[`${t}`,n.Name??n.name??null],...o}),headers:o.headers}),{Hash:a}=await i.json();return G.parse(a)}}function SJ(e){return{addLink:wJ(e),rmLink:EJ(e)}}function PJ(e,r){return{patch:SJ(e)}}function TJ(e){return Symbol.iterator in e}function CJ(e){return Symbol.asyncIterator in e}function dg(e){return G.asCID(e)!=null}async function*ME(e){if(e==null)throw new yt(`Unexpected input: ${e}`);const r=G.asCID(e);if(r!=null){yield Xe({cid:r});return}if(typeof e=="string"){yield Xe({path:e});return}if(e.cid!=null||e.path!=null)return yield Xe(e);if(TJ(e)){const t=e[Symbol.iterator](),n=t.next();if(n.done===!0)return t;if(dg(n.value)){yield Xe({cid:n.value});for(const o of t)yield Xe({cid:o});return}if(typeof n.value=="string"){yield Xe({path:n.value});for(const o of t)yield Xe({path:o});return}if(n.value.cid!=null||n.value.path!=null){yield Xe(n.value);for(const o of t)yield Xe(o);return}throw new yt(`Unexpected input: ${typeof e}`)}if(CJ(e)){const t=e[Symbol.asyncIterator](),n=await t.next();if(n.done===!0)return t;if(dg(n.value)){yield Xe({cid:n.value});for await(const o of t)yield Xe({cid:o});return}if(typeof n.value=="string"){yield Xe({path:n.value});for await(const o of t)yield Xe({path:o});return}if(n.value.cid!=null||n.value.path!=null){yield Xe(n.value);for await(const o of t)yield Xe(o);return}throw new yt(`Unexpected input: ${typeof e}`)}throw new yt(`Unexpected input: ${typeof e}`)}function Xe(e){const r=e.cid??`${e.path}`;if(r==null)throw new yt("Unexpected input: Please path either a CID or an IPFS path");const t={path:r,recursive:e.recursive!==!1};return e.metadata!=null&&(t.metadata=e.metadata),t}function DE(e){return async function*(t,n={}){for await(const{path:o,recursive:i,metadata:a}of ME(t)){const s=await e.post("pin/add",{signal:n.signal,searchParams:A({...n,arg:o,recursive:i,metadata:a!=null?JSON.stringify(a):void 0,stream:!0}),headers:n.headers});for await(const c of s.ndjson()){if(c.Pins!=null){for(const u of c.Pins)yield G.parse(u);continue}yield G.parse(c)}}}}function AJ(e){const r=DE(e);return async function(n,o={}){const i=await Wf(r([{path:n.toString(),...o}],o));if(i==null)throw new Error("No response received");return i}}function hg(e,r,t,n){const o={type:e,cid:G.parse(r)};return t!=null&&(o.metadata=t),n!=null&&(o.name=n),o}function IJ(e){return async function*(t={}){let n=[];t.paths!=null&&(n=Array.isArray(t.paths)?t.paths:[t.paths]);const o=await e.post("pin/ls",{signal:t.signal,searchParams:A({...t,arg:n.map(i=>`${i}`),stream:!0}),headers:t.headers});for await(const i of o.ndjson()){if(i.Keys!=null){for(const a of Object.keys(i.Keys))yield hg(i.Keys[a].Type,a,i.Keys[a].Metadata,i.Keys[a].Name);return}yield hg(i.Type,i.Cid,i.Metadata,i.Name)}}}const LE=({Name:e,Status:r,Cid:t})=>({cid:G.parse(t),name:e,status:r}),UE=e=>{if(typeof e=="string"&&e!=="")return e;throw new TypeError("service name must be passed")},FE=e=>{if(G.asCID(e)!=null)return e.toString();throw new TypeError(`CID instance expected instead of ${typeof e}`)},Mp=({service:e,cid:r,name:t,status:n,all:o})=>{const i=A({service:UE(e),name:t,force:o===!0?!0:void 0});if(r!=null)for(const a of r)i.append("cid",FE(a));if(n!=null)for(const a of n)i.append("status",a);return i},RJ=(e,{service:r,background:t,name:n,origins:o})=>{const i=A({arg:FE(e),service:UE(r),name:n,background:t===!0?!0:void 0});if(o!=null)for(const a of o)i.append("origin",a.toString());return i};function jJ(e){return async function(t,{timeout:n,signal:o,headers:i,...a}){const s=await e.post("pin/remote/add",{timeout:n,signal:o,headers:i,searchParams:RJ(t,a)});return LE(await s.json())}}function $J(e){return async function*({timeout:t,signal:n,headers:o,...i}){const a=await e.post("pin/remote/ls",{timeout:t,signal:n,headers:o,searchParams:Mp(i)});for await(const s of a.ndjson())yield LE(s)}}function NJ(e){return async function({timeout:t,signal:n,headers:o,...i}){await e.post("pin/remote/rm",{timeout:t,signal:n,headers:o,searchParams:Mp({...i,all:!0})})}}function kJ(e){return async function({timeout:t,signal:n,headers:o,...i}){await e.post("pin/remote/rm",{timeout:t,signal:n,headers:o,searchParams:Mp({...i,all:!1})})}}function MJ(e){const r=String(e);if(r==="undefined")throw Error("endpoint is required");return r[r.length-1]==="/"?r.slice(0,-1):r}function DJ(e){const r={service:e.Service,endpoint:new URL(e.ApiEndpoint)};return e.Stat!=null&&(r.stat=LJ(e.Stat)),r}function LJ(e){switch(e.Status){case"valid":{const{Pinning:r,Pinned:t,Queued:n,Failed:o}=e.PinCount;return{status:"valid",pinCount:{queued:n,pinning:r,pinned:t,failed:o}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function UJ(e){return async function(t,n){const{endpoint:o,key:i,headers:a,timeout:s,signal:c}=n;await e.post("pin/remote/service/add",{timeout:s,signal:c,searchParams:A({arg:[t,MJ(o),i]}),headers:a})}}function FJ(e){return async function(t={}){const{stat:n,headers:o,timeout:i,signal:a}=t;return(await(await e.post("pin/remote/service/ls",{timeout:i,signal:a,headers:o,searchParams:n===!0?A({stat:n}):void 0})).json()).RemoteServices.map(DJ)}}function BJ(e){return async function(t,n={}){await e.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:A({arg:t})})}}function xJ(e){return{add:UJ(e),ls:FJ(e),rm:BJ(e)}}function WJ(e){return{add:jJ(e),ls:$J(e),rm:kJ(e),rmAll:NJ(e),service:xJ(e)}}function BE(e){return async function*(t,n={}){for await(const{path:o,recursive:i}of ME(t)){const a=new URLSearchParams(n.searchParams);a.append("arg",`${o}`),i!=null&&a.set("recursive",String(i));const s=await e.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:A({...n,arg:`${o}`,recursive:i})});for await(const c of s.ndjson()){if(c.Pins!=null){yield*c.Pins.map(u=>G.parse(u));continue}yield G.parse(c)}}}}function VJ(e){const r=BE(e);return async function(n,o={}){const i=await Wf(r([{path:n.toString(),...o}],o));if(i==null)throw new Error("No response received");return i}}function zJ(e){return async function(t,n,o={}){const i=await e.post("pin/update",{signal:o.signal,searchParams:A({...o,arg:[t.toString(),n.toString()]}),headers:o.headers}),{Pins:a}=await i.json();return a.map(s=>G.parse(s))}}function qJ(e){return{addAll:DE(e),add:AJ(e),ls:IJ(e),rmAll:BE(e),rm:VJ(e),update:zJ(e),remote:WJ(e)}}function HJ(e){return async function*(t,n={}){yield*(await e.post("ping",{signal:n.signal,searchParams:A({arg:`${t}`,...n}),headers:n.headers,transform:xe})).ndjson()}}const GJ=e=>Array.isArray(e)?e.map(i_):e,i_=e=>ge(Mi(e)),Mi=e=>ps.decode(e),KJ=e=>BigInt(`0x${ge(ps.decode(e),"base16")}`),Dp=e=>ps.encode(ft(e));function YJ(e){return async function(t={}){const{Strings:n}=await(await e.post("pubsub/ls",{signal:t.signal,searchParams:A(t),headers:t.headers})).json();return GJ(n)??[]}}function ZJ(e){return async function(t,n={}){const o=await e.post("pubsub/peers",{signal:n.signal,searchParams:A({arg:Dp(t),...n}),headers:n.headers}),{Strings:i}=await o.json();return i??[]}}function QJ(e){return async function(t,n,o={}){const i=A({arg:Dp(t),...o}),a=new AbortController,s=hr([a.signal,o.signal]);try{await(await e.post("pubsub/pub",{signal:s,searchParams:i,...await Zr([n],a,o.headers)})).text()}finally{s.clear()}}}const XJ=$p("js-kubo-rpc-client:pubsub:subscribe");function JJ(e,r){return async function(n,o,i={}){i.signal=r.subscribe(n,o,i.signal);let a,s;const c=new Promise((l,d)=>{a=l,s=d}),u=setTimeout(()=>{a()},1e3);return e.post("pubsub/sub",{signal:i.signal,searchParams:A({arg:Dp(n),...i}),headers:i.headers}).catch(l=>{r.unsubscribe(n,o),s(l)}).then(l=>{clearTimeout(u),l!=null&&(eee(l,{onMessage:d=>{if(o!=null){if(typeof o=="function"){o(d);return}typeof o.handleEvent=="function"&&o.handleEvent(d)}},onEnd:()=>{r.unsubscribe(n,o)},onError:i.onError}),a())}),c}}async function eee(e,{onMessage:r,onEnd:t,onError:n}){n=n??XJ;try{for await(const o of e.ndjson())try{if(o.from==null)continue;o.from!=null&&o.seqno!=null?r({type:"signed",from:it(o.from),data:Mi(o.data),sequenceNumber:KJ(o.seqno),topic:i_(o.topicIDs[0]),key:o.key!=null?EZ(Mi(o.key??"u")):void 0,signature:Mi(o.signature??"u")}):r({type:"unsigned",data:Mi(o.data),topic:i_(o.topicIDs[0])})}catch(i){i.message=`Failed to parse pubsub message: ${i.message}`,n(i,!1,o)}}catch(o){tee(o)||n(o,!0)}finally{t()}}const tee=e=>{switch(e.type){case"aborted":return!0;case"abort":return!0;default:return e.name==="AbortError"}};class ree{constructor(){O(this,"_subs");this._subs=new Map}subscribe(r,t,n){const o=this._subs.get(r)??[];if(o.find(a=>a.handler===t)!=null)throw new Error(`Already subscribed to ${r} with this handler`);const i=new AbortController;return this._subs.set(r,[{handler:t,controller:i}].concat(o)),n!=null&&n.addEventListener("abort",()=>{this.unsubscribe(r,t)}),i.signal}unsubscribe(r,t){const n=this._subs.get(r)??[];let o;t!=null?(this._subs.set(r,n.filter(i=>i.handler!==t)),o=n.filter(i=>i.handler===t)):(this._subs.set(r,[]),o=n),(this._subs.get(r)??[]).length===0&&this._subs.delete(r),o.forEach(i=>{i.controller.abort()})}}function nee(e,r){return async function(n,o){r.unsubscribe(n,o)}}function oee(e){const r=new ree;return{ls:YJ(e),peers:ZJ(e),publish:QJ(e),subscribe:JJ(e,r),unsubscribe:nee(e,r)}}function iee(e){return async function*(t={}){yield*(await e.post("refs/local",{signal:t.signal,transform:xe,searchParams:A(t),headers:t.headers})).ndjson()}}function aee(e){async function*r(t,n={}){const o=Array.isArray(t)?t:[t];yield*(await e.post("refs",{signal:n.signal,searchParams:A({arg:o.map(a=>`${a instanceof Uint8Array?G.decode(a):a}`),...n}),headers:n.headers,transform:xe})).ndjson()}return Object.assign(r,{local:iee(e)})}function uee(e){return async function*(t={}){yield*(await e.post("repo/gc",{signal:t.signal,searchParams:A(t),headers:t.headers,transform:o=>{var i;return{err:o.Error!=null?new Error(o.Error):null,cid:((i=o.Key)==null?void 0:i["/"])!=null?G.parse(o.Key["/"]):null}}})).ndjson()}}function xE(e){return async function(t={}){const o=await(await e.post("repo/stat",{signal:t.signal,searchParams:A(t),headers:t.headers})).json();return{numObjects:BigInt(o.NumObjects),repoSize:BigInt(o.RepoSize),repoPath:o.RepoPath,version:o.Version,storageMax:BigInt(o.StorageMax)}}}function see(e){return async function(t={}){return(await(await e.post("repo/version",{signal:t.signal,searchParams:A(t),headers:t.headers})).json()).Version}}function cee(e){return{gc:uee(e),stat:xE(e),version:see(e)}}function lee(e){return async function(t,n={}){const o=await e.post("resolve",{signal:n.signal,searchParams:A({arg:t,...n}),headers:n.headers}),{Path:i}=await o.json();return i}}function fee(e){return async function*(t,n={}){const o=await e.post("routing/findpeer",{signal:n.signal,searchParams:A({arg:t.toString(),stream:!0,...n}),headers:n.headers});for await(const i of o.ndjson())yield li(i)}}function dee(e){return async function*(t,n={}){const o=await e.post("routing/findprovs",{signal:n.signal,searchParams:A({arg:t.toString(),...n}),headers:n.headers});for await(const i of o.ndjson())yield li(i)}}function hee(e){return async function*(t,n={}){const o=await e.post("routing/get",{signal:n.signal,searchParams:A({arg:t instanceof Uint8Array?ge(t):t.toString(),...n}),headers:n.headers});for await(const i of o.ndjson())yield li(i)}}function vee(e){return async function*(t,n={recursive:!1}){const o=Array.isArray(t)?t:[t],i=await e.post("routing/provide",{signal:n.signal,searchParams:A({arg:o.map(a=>a.toString()),...n}),headers:n.headers});for await(const a of i.ndjson())yield li(a)}}function _ee(e){return async function*(t,n,o={}){const i=new AbortController,a=hr([i.signal,o.signal]);try{const s=await e.post("routing/put",{signal:a,searchParams:A({arg:t instanceof Uint8Array?ge(t):t.toString(),stream:!0,...o}),...await Zr([n],i,o.headers)});for await(const c of s.ndjson())yield li(c)}finally{a.clear()}}}function pee(e){return{findPeer:fee(e),findProvs:dee(e),get:hee(e),provide:vee(e),put:_ee(e)}}function yee(e){return async function*(t={}){yield*(await e.post("stats/bw",{signal:t.signal,searchParams:A(t),headers:t.headers,transform:o=>({totalIn:BigInt(o.TotalIn),totalOut:BigInt(o.TotalOut),rateIn:parseFloat(o.RateIn),rateOut:parseFloat(o.RateOut)})})).ndjson()}}function bee(e){return{bitswap:bE(e),repo:xE(e),bw:yee(e)}}function mee(e){return async function(t={}){await(await e.post("shutdown",{signal:t.signal,searchParams:A(t),headers:t.headers})).text()}}function gee(e){return async function(t={}){const n=await e.post("swarm/addrs",{signal:t.signal,searchParams:A(t),headers:t.headers}),{Addrs:o}=await n.json();return Object.keys(o).map(i=>({id:it(i),addrs:(o[i]??[]).map(a=>rt(a))}))}}function Oee(e){return async function(t,n={}){const o=await e.post("swarm/connect",{signal:n.signal,searchParams:A({arg:t,...n}),headers:n.headers}),{Strings:i}=await o.json();return i??[]}}function wee(e){return async function(t,n={}){const o=await e.post("swarm/disconnect",{signal:n.signal,searchParams:A({arg:t,...n}),headers:n.headers}),{Strings:i}=await o.json();return i??[]}}function Eee(e){return async function(t={}){const n=await e.post("swarm/addrs/local",{signal:t.signal,searchParams:A(t),headers:t.headers}),{Strings:o}=await n.json();return(o??[]).map(i=>rt(i))}}function See(e){return async function(t={}){return((await(await e.post("swarm/peers",{signal:t.signal,searchParams:A(t),headers:t.headers})).json()).Peers??[]).map(i=>({addr:rt(i.Addr),peer:it(i.Peer),muxer:i.Muxer,latency:i.Latency,streams:i.Streams,direction:i.Direction==null?void 0:i.Direction===0?"inbound":"outbound"}))}}function Pee(e){return{addrs:gee(e),connect:Oee(e),disconnect:wee(e),localAddrs:Eee(e),peers:See(e)}}function Tee(e){return async function(t={}){const n=await e.post("version",{signal:t.signal,searchParams:A(t),headers:t.headers});return{...xe(await n.json()),"ipfs-http-client":"1.0.0"}}}class Cee{constructor(r){O(this,"bases");O(this,"codecs");O(this,"hashers");O(this,"bitswap");O(this,"block");O(this,"bootstrap");O(this,"config");O(this,"dag");O(this,"dht");O(this,"diag");O(this,"files");O(this,"key");O(this,"log");O(this,"name");O(this,"object");O(this,"pin");O(this,"pubsub");O(this,"refs");O(this,"repo");O(this,"routing");O(this,"stats");O(this,"swarm");O(this,"add");O(this,"addAll");O(this,"cat");O(this,"get");O(this,"ls");O(this,"id");O(this,"version");O(this,"stop");O(this,"ping");O(this,"resolve");O(this,"commands");O(this,"mount");O(this,"isOnline");O(this,"getEndpointConfig");var s,c,u,l,d,h;const t=new tJ(r),n={name:Nr.name,code:Nr.code,encode:v=>v,decode:v=>v},o=Object.values(gc);(((s=r.ipld)==null?void 0:s.bases)??[]).forEach(v=>o.push(v)),this.bases=new nJ({bases:o,loadBase:(c=r.ipld)==null?void 0:c.loadBase});const i=Object.values(r7);[lP,fP,j9,RK,n].concat(((u=r.ipld)==null?void 0:u.codecs)??[]).forEach(v=>{i.push(v)}),this.codecs=new iJ({codecs:i,loadCodec:(l=r.ipld)==null?void 0:l.loadCodec});const a=Object.values(t7);(((d=r.ipld)==null?void 0:d.hashers)??[]).forEach(v=>a.push(v)),this.hashers=new uJ({hashers:a,loadHasher:(h=r.ipld)==null?void 0:h.loadHasher}),this.bitswap=LZ(t),this.block=WZ(t),this.bootstrap=HZ(t),this.config=rQ(t),this.dag=lQ(t,this.codecs),this.dht=gQ(t),this.diag=SQ(t),this.files=LQ(t),this.key=GQ(t),this.log=fJ(t),this.name=OJ(t),this.object=PJ(t,this.codecs),this.pin=qJ(t),this.pubsub=oee(t),this.refs=aee(t),this.repo=cee(t),this.routing=pee(t),this.stats=bee(t),this.swarm=Pee(t),this.add=tY(t),this.addAll=tE(t),this.cat=GZ(t),this.get=FQ(t),this.ls=dJ(t),this.id=OE(t),this.version=Tee(t),this.stop=mee(t),this.ping=HJ(t),this.resolve=lee(t),this.commands=KZ(t),this.mount=vJ(t),this.isOnline=BQ(t),this.getEndpointConfig=UQ(t)}}function Aee(e){return new Cee(e)}function Iee(e={}){return(typeof e=="string"||Ec(e)||e instanceof URL)&&(e={url:e}),Aee(e)}let Qh=null;const xee=()=>(Qh||(Qh=rv.driver(Ks.neo4jURL,rv.auth.basic(Ks.neo4jUser,Ks.neo4jPass))),Qh);let Xh=null;const Wee=()=>(Xh||(Xh=Iee(Ks.ipfsAPI.replace(/\/+$/,""))),Xh);export{Lee as T,lt as U,Wee as a,Mf as b,ps as c,F1 as d,U1 as e,kr as f,xee as g,Nr as i};

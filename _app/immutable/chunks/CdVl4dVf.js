import{aP as Ve,aQ as en,aR as tn,aS as nn,B as F,a9 as it,aT as Ze,a6 as rn,aU as sn,aj as oe,aV as ct,v as ut,aW as Be,n as C,aF as D,aX as N,aY as ft,aZ as _,a_ as Se,a$ as U,b0 as dt,b1 as an,b2 as W,b3 as R,t as $e,b4 as fe,o as Y,b5 as ee,b6 as de,b7 as Re,b8 as le,b9 as lt,ba as Pe,bb as pt,bc as mt,bd as bt,u as ie,be as on,bf as cn,bg as un,bh as j,bi as fn,bj as ce,bk as dn,bl as gt,bm as Ae,bn as ln,bo as Je,bp as pn,y as ht,as as ue,bq as X,br as pe,bs as Ke,ak as me,bt as yt,bu as q,bv as Qe,bw as mn,bx as wt,by as vt,bz as bn,bA as gn,bB as hn,ac as ze,am as At,an as yn,bC as we,ar as wn,bD as vn,al as An,ao as xn,aq as En,bE as Nn,bF as kn,bG as xt,bH as Cn,bI as Fe,bJ as Et,bK as In,bL as Tn,bM as Bn,bN as Sn,bO as $n,bP as Rn,bQ as Pn,bR as zn,bS as Fn,bT as Ln,bU as Le,bV as Oe,bW as xe,bX as V,bY as Z,bZ as O,b_ as te,b$ as Nt,c0 as On,c1 as Mn,c2 as Xe,c3 as _n,c4 as qn,c5 as Dn,q as Me,g as Un,c6 as jn,c7 as Hn,c8 as Q,c9 as Gn,ca as Wn,cb as Vn,cc as Zn,cd as Jn,ce as Kn,cf as Qn,cg as Xn,ch as Yn,ci as er,cj as kt,ck as tr,cl as nr,cm as rr,cn as sr}from"./BsreV6Dk.js";import{l as Ct}from"./sAVvtme2.js";import{h as It,a as ar}from"./BL3uJTqu.js";import{s as Tt}from"./BewbSyHt.js";function Ye(e){let t;if(typeof e=="string")t=Ve(e);else{const n=en(e),r=e.length;for(let s=0;s<r;s++){const a=e[s];if(!tn(a)){t=Ve(a,n);break}}}if(!t)throw new nn({signature:e});return t}class or extends F{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const et="/docs/contract/encodeEventTopics";function ne(e){var u;const{abi:t,eventName:n,args:r}=e;let s=t[0];if(n){const c=it({abi:t,name:n});if(!c)throw new Ze(n,{docsPath:et});s=c}if(s.type!=="event")throw new Ze(void 0,{docsPath:et});const a=rn(s),o=sn(a);let i=[];if(r&&"inputs"in s){const c=(u=s.inputs)==null?void 0:u.filter(d=>"indexed"in d&&d.indexed),f=Array.isArray(r)?r:Object.values(r).length>0?(c==null?void 0:c.map(d=>r[d.name]))??[]:[];f.length>0&&(i=(c==null?void 0:c.map((d,l)=>Array.isArray(f[l])?f[l].map((p,b)=>tt({param:d,value:f[l][b]})):typeof f[l]<"u"&&f[l]!==null?tt({param:d,value:f[l]}):null))??[])}return[o,...i]}function tt({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return oe(ct(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new or(e.type);return ut([e],[t])}async function Bt(e,t){const{address:n,abi:r,args:s,eventName:a,fromBlock:o,strict:i,toBlock:u}=t,c=Be(e,{method:"eth_newFilter"}),f=a?ne({abi:r,args:s,eventName:a}):void 0,d=await e.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?C(o):o,toBlock:typeof u=="bigint"?C(u):u,topics:f}]});return{abi:r,args:s,eventName:a,id:d,request:c(d),strict:!!i,type:"event"}}async function ir(e,t){const{abi:n,address:r,args:s,functionName:a,dataSuffix:o,...i}=t,u=D({abi:n,args:s,functionName:a});try{return await N(e,ft,"estimateGas")({data:`${u}${o?o.replace("0x",""):""}`,to:r,...i})}catch(c){const f=i.account?_(i.account):void 0;throw Se(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:a,sender:f==null?void 0:f.address})}}async function _e(e,{address:t,blockHash:n,fromBlock:r,toBlock:s,event:a,events:o,args:i,strict:u}={}){const c=u??!1,f=o??(a?[a]:void 0);let d=[];f&&(d=[f.flatMap(g=>ne({abi:[g],eventName:g.name,args:o?void 0:i}))],a&&(d=d[0]));let l;n?l=await e.request({method:"eth_getLogs",params:[{address:t,topics:d,blockHash:n}]}):l=await e.request({method:"eth_getLogs",params:[{address:t,topics:d,fromBlock:typeof r=="bigint"?C(r):r,toBlock:typeof s=="bigint"?C(s):s}]});const p=l.map(b=>U(b));return f?dt({abi:f,args:i,logs:p,strict:c}):p}async function St(e,t){const{abi:n,address:r,args:s,blockHash:a,eventName:o,fromBlock:i,toBlock:u,strict:c}=t,f=o?it({abi:n,name:o}):void 0,d=f?void 0:n.filter(l=>l.type==="event");return N(e,_e,"getLogs")({address:r,args:s,blockHash:a,event:f,events:d,fromBlock:i,toBlock:u,strict:c})}function cr(e,t){if(rt(e)>t)throw new gr({givenSize:rt(e),maxSize:t})}const M={zero:48,nine:57,A:65,F:70,a:97,f:102};function nt(e){if(e>=M.zero&&e<=M.nine)return e-M.zero;if(e>=M.A&&e<=M.F)return e-(M.A-10);if(e>=M.a&&e<=M.f)return e-(M.a-10)}function ur(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new hr({size:e.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let a=0;a<r;a++){const o=n==="right";s[o?a:r-a-1]=e[o?a:e.length-a-1]}return s}const fr=new TextEncoder;function dr(e){return e instanceof Uint8Array?e:typeof e=="string"?pr(e):lr(e)}function lr(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function pr(e,t={}){const{size:n}=t;let r=e;n&&(an(e,n),r=W(e,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const a=s.length/2,o=new Uint8Array(a);for(let i=0,u=0;i<a;i++){const c=nt(s.charCodeAt(u++)),f=nt(s.charCodeAt(u++));if(c===void 0||f===void 0)throw new R(`Invalid byte sequence ("${s[u-2]}${s[u-1]}" in "${s}").`);o[i]=c*16+f}return o}function mr(e,t={}){const{size:n}=t,r=fr.encode(e);return typeof n=="number"?(cr(r,n),br(r,n)):r}function br(e,t){return ur(e,{dir:"right",size:t})}function rt(e){return e.length}class gr extends R{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class hr extends R{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}async function yr(e,t){const{abi:n,address:r,args:s,dataSuffix:a,functionName:o,...i}=t,u=i.account?_(i.account):e.account,c=D({abi:n,args:s,functionName:o});try{const{data:f}=await N(e,$e,"call")({batch:!1,data:`${c}${a?a.replace("0x",""):""}`,to:r,...i,account:u}),d=fe({abi:n,args:s,functionName:o,data:f||"0x"}),l=n.filter(p=>"name"in p&&p.name===t.functionName);return{result:d,request:{abi:l,address:r,args:s,dataSuffix:a,functionName:o,...i,account:u}}}catch(f){throw Se(f,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:u==null?void 0:u.address})}}function wr(e,t){const{abi:n,address:r,args:s,batch:a=!0,eventName:o,fromBlock:i,onError:u,onLogs:c,poll:f,pollingInterval:d=e.pollingInterval,strict:l}=t;return(typeof f<"u"?f:typeof i=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")))?(()=>{const h=l??!1,m=Y(["watchContractEvent",r,s,a,e.uid,o,d,h,i]);return ee(m,{onLogs:c,onError:u},y=>{let w;i!==void 0&&(w=i-1n);let A,I=!1;const T=de(async()=>{var x;if(!I){try{A=await N(e,Bt,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:h,fromBlock:i})}catch{}I=!0;return}try{let E;if(A)E=await N(e,Re,"getFilterChanges")({filter:A});else{const k=await N(e,le,"getBlockNumber")({});w&&w<k?E=await N(e,St,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:w+1n,toBlock:k,strict:h}):E=[],w=k}if(E.length===0)return;if(a)y.onLogs(E);else for(const k of E)y.onLogs([k])}catch(E){A&&E instanceof lt&&(I=!1),(x=y.onError)==null||x.call(y,E)}},{emitOnBegin:!0,interval:d});return async()=>{A&&await N(e,Pe,"uninstallFilter")({filter:A}),T()}})})():(()=>{const h=l??!1,m=Y(["watchContractEvent",r,s,a,e.uid,o,d,h]);let y=!0,w=()=>y=!1;return ee(m,{onLogs:c,onError:u},A=>((async()=>{try{const I=(()=>{if(e.transport.type==="fallback"){const E=e.transport.transports.find(k=>k.config.type==="webSocket"||k.config.type==="ipc");return E?E.value:e.transport}return e.transport})(),T=o?ne({abi:n,eventName:o,args:s}):[],{unsubscribe:x}=await I.subscribe({params:["logs",{address:r,topics:T}],onData(E){var P;if(!y)return;const k=E.result;try{const{eventName:B,args:S}=pt({abi:n,data:k.data,topics:k.topics,strict:l}),z=U(k,{args:S,eventName:B});A.onLogs([z])}catch(B){let S,z;if(B instanceof mt||B instanceof bt){if(l)return;S=B.abiItem.name,z=(P=B.abiItem.inputs)==null?void 0:P.some(re=>!("name"in re&&re.name))}const he=U(k,{args:z?[]:{},eventName:S});A.onLogs([he])}},onError(E){var k;(k=A.onError)==null||k.call(A,E)}});w=x,y||w()}catch(I){u==null||u(I)}})(),()=>w()))})()}const $t="0x5792579257925792579257925792579257925792579257925792579257925792",Rt=C(0,{size:32});async function Js(e,t){const{account:n=e.account,capabilities:r,chain:s=e.chain,experimental_fallback:a,experimental_fallbackDelay:o=32,forceAtomic:i=!1,id:u,version:c="2.0.0"}=t,f=n?_(n):null,d=t.calls.map(l=>{const p=l,b=p.abi?D({abi:p.abi,functionName:p.functionName,args:p.args}):p.data;return{data:p.dataSuffix&&b?ie([b,p.dataSuffix]):b,to:p.to,value:p.value?C(p.value):void 0}});try{const l=await e.request({method:"wallet_sendCalls",params:[{atomicRequired:i,calls:d,capabilities:r,chainId:C(s.id),from:f==null?void 0:f.address,id:u,version:c}]},{retryCount:0});return typeof l=="string"?{id:l}:l}catch(l){const p=l;if(a&&(p.name==="MethodNotFoundRpcError"||p.name==="MethodNotSupportedRpcError"||p.name==="UnknownRpcError"||p.details.toLowerCase().includes("does not exist / is not available")||p.details.toLowerCase().includes("missing or invalid. request()")||p.details.toLowerCase().includes("did not match any variant of untagged enum")||p.details.toLowerCase().includes("account upgraded to unsupported contract")||p.details.toLowerCase().includes("eip-7702 not supported")||p.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(y=>!y.optional)){const y="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new on(new F(y,{details:y}))}if(i&&d.length>1){const m="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new cn(new F(m,{details:m}))}const b=[];for(const m of d){const y=un(e,{account:f,chain:s,data:m.data,to:m.to,value:m.value?j(m.value):void 0});b.push(y),o>0&&await new Promise(w=>setTimeout(w,o))}const g=await Promise.allSettled(b);if(g.every(m=>m.status==="rejected"))throw g[0].reason;const h=g.map(m=>m.status==="fulfilled"?m.value:Rt);return{id:ie([...h,C(s.id,{size:32}),$t])}}throw fn(l,{...t,account:f,chain:t.chain})}}async function vr(e,t){async function n(f){if(f.endsWith($t.slice(2))){const l=gt(Ae(f,-64,-32)),p=Ae(f,0,-64).slice(2).match(/.{1,64}/g),b=await Promise.all(p.map(h=>Rt.slice(2)!==h?e.request({method:"eth_getTransactionReceipt",params:[`0x${h}`]},{dedupe:!0}):void 0)),g=b.some(h=>h===null)?100:b.every(h=>(h==null?void 0:h.status)==="0x1")?200:b.every(h=>(h==null?void 0:h.status)==="0x0")?500:600;return{atomic:!1,chainId:ce(l),receipts:b.filter(Boolean),status:g,version:"2.0.0"}}return e.request({method:"wallet_getCallsStatus",params:[f]})}const{atomic:r=!1,chainId:s,receipts:a,version:o="2.0.0",...i}=await n(t.id),[u,c]=(()=>{const f=i.status;return f>=100&&f<200?["pending",f]:f>=200&&f<300?["success",f]:f>=300&&f<700?["failure",f]:f==="CONFIRMED"?["success",200]:f==="PENDING"?["pending",100]:[void 0,f]})();return{...i,atomic:r,chainId:s?ce(s):void 0,receipts:(a==null?void 0:a.map(f=>({...f,blockNumber:j(f.blockNumber),gasUsed:j(f.gasUsed),status:dn[f.status]})))??[],statusCode:c,status:u,version:o}}async function Ks(e,t){const{id:n,pollingInterval:r=e.pollingInterval,status:s=({statusCode:l})=>l>=200,timeout:a=6e4}=t,o=Y(["waitForCallsStatus",e.uid,n]),{promise:i,resolve:u,reject:c}=ln();let f;const d=ee(o,{resolve:u,reject:c},l=>{const p=de(async()=>{const b=g=>{clearTimeout(f),p(),g(),d()};try{const g=await vr(e,{id:n});if(!s(g))return;b(()=>l.resolve(g))}catch(g){b(()=>l.reject(g))}},{interval:r,emitOnBegin:!0});return p});return f=a?setTimeout(()=>{d(),clearTimeout(f),c(new Ar({id:n}))},a):void 0,await i}class Ar extends F{constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function qe(e,t){var r,s,a,o,i,u;if(!(e instanceof F))return!1;const n=e.walk(c=>c instanceof Je);return n instanceof Je?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((a=n.data)==null?void 0:a.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((i=n.data)==null?void 0:i.errorName)==="HttpError"||(u=n.reason)!=null&&u.includes("Wildcard on non-extended resolvers is not supported")||t==="reverse"&&n.reason===pn[50]):!1}function Pt(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;const t=`0x${e.slice(1,65)}`;return ht(t)?t:null}function ae(e){let t=new Uint8Array(32).fill(0);if(!e)return ue(t);const n=e.split(".");for(let r=n.length-1;r>=0;r-=1){const s=Pt(n[r]),a=s?ct(s):oe(X(n[r]),"bytes");t=oe(ie([t,a]),"bytes")}return ue(t)}function xr(e){return`[${e.slice(2)}]`}function Er(e){const t=new Uint8Array(32).fill(0);return e?Pt(e)||oe(X(e)):ue(t)}function be(e){const t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);const n=new Uint8Array(X(t).byteLength+2);let r=0;const s=t.split(".");for(let a=0;a<s.length;a++){let o=X(s[a]);o.byteLength>255&&(o=X(xr(Er(s[a])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function Nr(e,t){const{blockNumber:n,blockTag:r,coinType:s,name:a,gatewayUrls:o,strict:i}=t,{chain:u}=e,c=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!u)throw new Error("client chain not configured. universalResolverAddress is required.");return pe({blockNumber:n,chain:u,contract:"ensUniversalResolver"})})(),f=u==null?void 0:u.ensTlds;if(f&&!f.some(d=>a.endsWith(d)))return null;try{const d=D({abi:Ke,functionName:"addr",...s!=null?{args:[ae(a),BigInt(s)]}:{args:[ae(a)]}}),l={address:c,abi:yt,functionName:"resolve",args:[me(be(a)),d,o??[Ct]],blockNumber:n,blockTag:r},b=await N(e,q,"readContract")(l);if(b[0]==="0x")return null;const g=fe({abi:Ke,args:s!=null?[ae(a),BigInt(s)]:void 0,functionName:"addr",data:b[0]});return g==="0x"||gt(g)==="0x00"?null:g}catch(d){if(i)throw d;if(qe(d,"resolve"))return null;throw d}}class kr extends F{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}}class K extends F{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}}class De extends F{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class Cr extends F{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const Ir=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Tr=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Br=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,Sr=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function $r(e){try{const t=await fetch(e,{method:"HEAD"});if(t.status===200){const n=t.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=e})}}function st(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function zt({uri:e,gatewayUrls:t}){const n=Br.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const r=st(t==null?void 0:t.ipfs,"https://ipfs.io"),s=st(t==null?void 0:t.arweave,"https://arweave.net"),a=e.match(Ir),{protocol:o,subpath:i,target:u,subtarget:c=""}=(a==null?void 0:a.groups)||{},f=o==="ipns:/"||i==="ipns/",d=o==="ipfs:/"||i==="ipfs/"||Tr.test(e);if(e.startsWith("http")&&!f&&!d){let p=e;return t!=null&&t.arweave&&(p=e.replace(/https:\/\/arweave.net/g,t==null?void 0:t.arweave)),{uri:p,isOnChain:!1,isEncoded:!1}}if((f||d)&&u)return{uri:`${r}/${f?"ipns":"ipfs"}/${u}${c}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&u)return{uri:`${s}/${u}${c||""}`,isOnChain:!1,isEncoded:!1};let l=e.replace(Sr,"");if(l.startsWith("<svg")&&(l=`data:image/svg+xml;base64,${btoa(l)}`),l.startsWith("data:")||l.startsWith("{"))return{uri:l,isOnChain:!0,isEncoded:!1};throw new De({uri:e})}function Ft(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new kr({data:e});return e.image||e.image_url||e.image_data}async function Rr({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then(s=>s.json());return await Ue({gatewayUrls:e,uri:Ft(n)})}catch{throw new De({uri:t})}}async function Ue({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:r}=zt({uri:t,gatewayUrls:e});if(r||await $r(n))return n;throw new De({uri:t})}function Pr(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=t.split("/"),[a,o]=n.split(":"),[i,u]=r.split(":");if(!a||a.toLowerCase()!=="eip155")throw new K({reason:"Only EIP-155 supported"});if(!o)throw new K({reason:"Chain ID not found"});if(!u)throw new K({reason:"Contract address not found"});if(!s)throw new K({reason:"Token ID not found"});if(!i)throw new K({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:i.toLowerCase(),contractAddress:u,tokenID:s}}async function zr(e,{nft:t}){if(t.namespace==="erc721")return q(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return q(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new Cr({namespace:t.namespace})}async function Fr(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?Lr(e,{gatewayUrls:t,record:n}):Ue({uri:n,gatewayUrls:t})}async function Lr(e,{gatewayUrls:t,record:n}){const r=Pr(n),s=await zr(e,{nft:r}),{uri:a,isOnChain:o,isEncoded:i}=zt({uri:s,gatewayUrls:t});if(o&&(a.includes("data:application/json;base64,")||a.startsWith("{"))){const c=i?atob(a.replace("data:application/json;base64,","")):a,f=JSON.parse(c);return Ue({uri:Ft(f),gatewayUrls:t})}let u=r.tokenID;return r.namespace==="erc1155"&&(u=u.replace("0x","").padStart(64,"0")),Rr({gatewayUrls:t,uri:a.replace(/(?:0x)?{id}/,u)})}async function Lt(e,t){const{blockNumber:n,blockTag:r,key:s,name:a,gatewayUrls:o,strict:i}=t,{chain:u}=e,c=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!u)throw new Error("client chain not configured. universalResolverAddress is required.");return pe({blockNumber:n,chain:u,contract:"ensUniversalResolver"})})(),f=u==null?void 0:u.ensTlds;if(f&&!f.some(d=>a.endsWith(d)))return null;try{const d={address:c,abi:yt,functionName:"resolve",args:[me(be(a)),D({abi:Qe,functionName:"text",args:[ae(a),s]}),o??[Ct]],blockNumber:n,blockTag:r},p=await N(e,q,"readContract")(d);if(p[0]==="0x")return null;const b=fe({abi:Qe,functionName:"text",data:p[0]});return b===""?null:b}catch(d){if(i)throw d;if(qe(d,"resolve"))return null;throw d}}async function Or(e,{blockNumber:t,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:a,strict:o,universalResolverAddress:i}){const u=await N(e,Lt,"getEnsText")({blockNumber:t,blockTag:n,key:"avatar",name:s,universalResolverAddress:i,gatewayUrls:a,strict:o});if(!u)return null;try{return await Fr(e,{record:u,gatewayUrls:r})}catch{return null}}async function Mr(e,{address:t,blockNumber:n,blockTag:r,gatewayUrls:s,strict:a,universalResolverAddress:o}){let i=o;if(!i){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");i=pe({blockNumber:n,chain:e.chain,contract:"ensUniversalResolver"})}const u=`${t.toLowerCase().substring(2)}.addr.reverse`;try{const c={address:i,abi:mn,functionName:"reverse",args:[me(be(u))],blockNumber:n,blockTag:r},f=N(e,q,"readContract"),[d,l]=s?await f({...c,args:[...c.args,s]}):await f(c);return t.toLowerCase()!==l.toLowerCase()?null:d}catch(c){if(a)throw c;if(qe(c,"reverse"))return null;throw c}}async function _r(e,t){const{blockNumber:n,blockTag:r,name:s}=t,{chain:a}=e,o=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!a)throw new Error("client chain not configured. universalResolverAddress is required.");return pe({blockNumber:n,chain:a,contract:"ensUniversalResolver"})})(),i=a==null?void 0:a.ensTlds;if(i&&!i.some(c=>s.endsWith(c)))throw new Error(`${s} is not a valid ENS TLD (${i==null?void 0:i.join(", ")}) for chain "${a.name}" (id: ${a.id}).`);const[u]=await N(e,q,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[me(be(s))],blockNumber:n,blockTag:r});return u}async function Ot(e,t){var h,m,y;const{account:n=e.account,blockNumber:r,blockTag:s="latest",blobs:a,data:o,gas:i,gasPrice:u,maxFeePerBlobGas:c,maxFeePerGas:f,maxPriorityFeePerGas:d,to:l,value:p,...b}=t,g=n?_(n):void 0;try{wt(t);const A=(typeof r=="bigint"?C(r):void 0)||s,I=(y=(m=(h=e.chain)==null?void 0:h.formatters)==null?void 0:m.transactionRequest)==null?void 0:y.format,x=(I||vt)({...bn(b,{format:I}),from:g==null?void 0:g.address,blobs:a,data:o,gas:i,gasPrice:u,maxFeePerBlobGas:c,maxFeePerGas:f,maxPriorityFeePerGas:d,to:l,value:p}),E=await e.request({method:"eth_createAccessList",params:[x,A]});return{accessList:E.accessList,gasUsed:BigInt(E.gasUsed)}}catch(w){throw gn(w,{...t,account:g,chain:e.chain})}}async function qr(e){const t=Be(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}async function Mt(e,{address:t,args:n,event:r,events:s,fromBlock:a,strict:o,toBlock:i}={}){const u=s??(r?[r]:void 0),c=Be(e,{method:"eth_newFilter"});let f=[];u&&(f=[u.flatMap(p=>ne({abi:[p],eventName:p.name,args:n}))],r&&(f=f[0]));const d=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof a=="bigint"?C(a):a,toBlock:typeof i=="bigint"?C(i):i,...f.length?{topics:f}:{}}]});return{abi:u,args:n,eventName:r?r.name:void 0,fromBlock:a,id:d,request:c(d),strict:!!o,toBlock:i,type:"event"}}async function Dr(e){const t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}async function Ur(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?C(n):void 0;let a;return t?a=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):a=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),ce(a)}async function at(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?C(n):void 0,a=await e.request({method:"eth_getCode",params:[t,s||r]},{dedupe:!!s});if(a!=="0x")return a}class jr extends F{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function Hr(e,t){const{address:n,factory:r,factoryData:s}=t;try{const[a,o,i,u,c,f,d]=await N(e,q,"readContract")({abi:Gr,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:i,chainId:Number(u),verifyingContract:c,salt:f},extensions:d,fields:a}}catch(a){const o=a;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new jr({address:n}):o}}const Gr=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function Wr(e){var t;return{baseFeePerGas:e.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:(t=e.reward)==null?void 0:t.map(n=>n.map(r=>BigInt(r)))}}async function Vr(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const a=typeof n=="bigint"?C(n):void 0,o=await e.request({method:"eth_feeHistory",params:[C(t),a||r,s]},{dedupe:!!a});return Wr(o)}async function Zr(e,{filter:t}){const n=t.strict??!1,s=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(a=>U(a));return t.abi?dt({abi:t.abi,logs:s,strict:n}):s}function Qs(e,t){if(e.length!==t.length)throw new hn({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const s=e[r],a=t[r];n.push(_t(s,a))}return ze(n)}function _t(e,t,n=!1){if(e==="address"){const o=t;if(!At(o))throw new yn({address:o});return we(o.toLowerCase(),{size:n?32:null})}if(e==="string")return wn(t);if(e==="bytes")return t;if(e==="bool")return we(vn(t),{size:n?32:1});const r=e.match(An);if(r){const[o,i,u="256"]=r,c=Number.parseInt(u)/8;return C(t,{size:n?32:c,signed:i==="int"})}const s=e.match(xn);if(s){const[o,i]=s;if(Number.parseInt(i)!==(t.length-2)/2)throw new En({expectedSize:Number.parseInt(i),givenSize:(t.length-2)/2});return we(t,{dir:"right",size:n?32:null})}const a=e.match(Nn);if(a&&Array.isArray(t)){const[o,i]=a,u=[];for(let c=0;c<t.length;c++)u.push(_t(i,t[c],!0));return u.length===0?"0x":ze(u)}throw new kn(e)}const qt="0x6492649264926492649264926492649264926492649264926492649264926492",Xs="0x0000000000000000000000000000000000000000000000000000000000000000";function Jr(e){return Ae(e,-32)===qt}function Kr(e){const{address:t,data:n,signature:r,to:s="hex"}=e,a=ze([ut([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,n,r]),qt]);return s==="hex"?a:xt(a)}function Qr(e){const{source:t}=e,n=new Map,r=new Cn(8192),s=new Map,a=({address:o,chainId:i})=>`${o}.${i}`;return{async consume({address:o,chainId:i,client:u}){const c=a({address:o,chainId:i}),f=this.get({address:o,chainId:i,client:u});this.increment({address:o,chainId:i});const d=await f;return await t.set({address:o,chainId:i},d),r.set(c,d),d},async increment({address:o,chainId:i}){const u=a({address:o,chainId:i}),c=n.get(u)??0;n.set(u,c+1)},async get({address:o,chainId:i,client:u}){const c=a({address:o,chainId:i});let f=s.get(c);return f||(f=(async()=>{try{const l=await t.get({address:o,chainId:i,client:u}),p=r.get(c)??0;return p>0&&l<=p?p+1:(r.delete(c),l)}finally{this.reset({address:o,chainId:i})}})(),s.set(c,f)),(n.get(c)??0)+await f},reset({address:o,chainId:i}){const u=a({address:o,chainId:i});n.delete(u),s.delete(u)}}}function Xr(){return{async get(e){const{address:t,client:n}=e;return Fe(n,{address:t,blockTag:"pending"})},set(){}}}const Ys=Qr({source:Xr()});function Yr(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function es(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?ce(e.nonce):void 0,storageProof:e.storageProof?Yr(e.storageProof):void 0}}async function ts(e,{address:t,blockNumber:n,blockTag:r,storageKeys:s}){const a=r??"latest",o=n!==void 0?C(n):void 0,i=await e.request({method:"eth_getProof",params:[t,s,o||a]});return es(i)}async function ns(e,{address:t,blockNumber:n,blockTag:r="latest",slot:s}){const a=n!==void 0?C(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,s,a||r]})}async function rs(e,{hash:t,transactionReceipt:n}){const[r,s]=await Promise.all([N(e,le,"getBlockNumber")({}),t?N(e,Et,"getTransaction")({hash:t}):void 0]),a=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return a?r-a+1n:0n}async function Ee(e,t){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:a,traceTransfers:o,validation:i}=t;try{const u=[];for(const l of s){const p=l.blockOverrides?In(l.blockOverrides):void 0,b=l.calls.map(h=>{const m=h,y=m.account?_(m.account):void 0,w=m.abi?D(m):m.data,A={...m,data:m.dataSuffix?ie([w||"0x",m.dataSuffix]):w,from:m.from??(y==null?void 0:y.address)};return wt(A),vt(A)}),g=l.stateOverrides?Tn(l.stateOverrides):void 0;u.push({blockOverrides:p,calls:b,stateOverrides:g})}const f=(typeof n=="bigint"?C(n):void 0)||r;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:u,returnFullTransactions:a,traceTransfers:o,validation:i},f]})).map((l,p)=>({...Bn(l),calls:l.calls.map((b,g)=>{var P,B;const{abi:h,args:m,functionName:y,to:w}=s[p].calls[g],A=((P=b.error)==null?void 0:P.data)??b.returnData,I=BigInt(b.gasUsed),T=(B=b.logs)==null?void 0:B.map(S=>U(S)),x=b.status==="0x1"?"success":"failure",E=h&&x==="success"&&A!=="0x"?fe({abi:h,data:A,functionName:y}):null,k=(()=>{var z;if(x==="success")return;let S;if(((z=b.error)==null?void 0:z.data)==="0x"?S=new Sn:b.error&&(S=new $n(b.error)),!!S)return Se(S,{abi:h??[],address:w??"0x",args:m,functionName:y??"<unknown>"})})();return{data:A,gasUsed:I,logs:T,status:x,...x==="success"?{result:E}:{error:k}}})}))}catch(u){const c=u,f=Rn(c,{});throw f instanceof Pn?c:f}}function Dt(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=zn(dr(e));return n==="Bytes"?r:Fn(r)}class ss extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const as={checksum:new ss(8192)},ve=as.checksum,os=/^0x[a-fA-F0-9]{40}$/;function ge(e,t={}){const{strict:n=!0}=t;if(!os.test(e))throw new ot({address:e,cause:new cs});if(n){if(e.toLowerCase()===e)return;if(is(e)!==e)throw new ot({address:e,cause:new us})}}function is(e){if(ve.has(e))return ve.get(e);ge(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=Dt(mr(t),{as:"Bytes"}),r=t.split("");for(let a=0;a<40;a+=2)n[a>>1]>>4>=8&&r[a]&&(r[a]=r[a].toUpperCase()),(n[a>>1]&15)>=8&&r[a+1]&&(r[a+1]=r[a+1].toUpperCase());const s=`0x${r.join("")}`;return ve.set(e,s),s}function Ne(e,t={}){const{strict:n=!0}=t??{};try{return ge(e,{strict:n}),!0}catch{return!1}}class ot extends R{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class cs extends R{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class us extends R{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function ke(e){let t=!0,n="",r=0,s="",a=!1;for(let o=0;o<e.length;o++){const i=e[o];if(["(",")",","].includes(i)&&(t=!0),i==="("&&r++,i===")"&&r--,!!t){if(r===0){if(i===" "&&["event","function","error",""].includes(s))s="";else if(s+=i,i===")"){a=!0;break}continue}if(i===" "){e[o-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=i,n+=i}}if(!a)throw new R("Unable to normalize signature.");return s}function Ce(e,t){const n=typeof e,r=t.type;switch(r){case"address":return Ne(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,a)=>Ce(Object.values(e)[a],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>Ce(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Ut(e,t,n){for(const r in e){const s=e[r],a=t[r];if(s.type==="tuple"&&a.type==="tuple"&&"components"in s&&"components"in a)return Ut(s.components,a.components,n[r]);const o=[s.type,a.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Ne(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Ne(n[r],{strict:!1}):!1)return o}}function jt(e,t={}){const{prepare:n=!0}=t,r=Array.isArray(e)||typeof e=="string"?Ye(e):e;return{...r,...n?{hash:G(r)}:{}}}function fs(e,t,n){const{args:r=[],prepare:s=!0}=n??{},a=Ln(t,{strict:!1}),o=e.filter(c=>a?c.type==="function"||c.type==="error"?Ht(c)===Le(t,0,4):c.type==="event"?G(c)===t:!1:"name"in c&&c.name===t);if(o.length===0)throw new Ie({name:t});if(o.length===1)return{...o[0],...s?{hash:G(o[0])}:{}};let i;for(const c of o){if(!("inputs"in c))continue;if(!r||r.length===0){if(!c.inputs||c.inputs.length===0)return{...c,...s?{hash:G(c)}:{}};continue}if(!c.inputs||c.inputs.length===0||c.inputs.length!==r.length)continue;if(r.every((d,l)=>{const p="inputs"in c&&c.inputs[l];return p?Ce(d,p):!1})){if(i&&"inputs"in i&&i.inputs){const d=Ut(c.inputs,i.inputs,r);if(d)throw new ls({abiItem:c,type:d[0]},{abiItem:i,type:d[1]})}i=c}}const u=(()=>{if(i)return i;const[c,...f]=o;return{...c,overloads:f}})();if(!u)throw new Ie({name:t});return{...u,...s?{hash:G(u)}:{}}}function Ht(e){return Le(G(e),0,4)}function ds(e){const t=typeof e=="string"?e:xe(e);return ke(t)}function G(e){return typeof e!="string"&&"hash"in e&&e.hash?e.hash:Dt(Oe(ds(e)))}class ls extends R{constructor(t,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${t.type}\` in \`${ke(xe(t.abiItem))}\`, and`,`\`${n.type}\` in \`${ke(xe(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class Ie extends R{constructor({name:t,data:n,type:r="item"}){const s=t?` with name "${t}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const ps=/^(.*)\[([0-9]*)\]$/,ms=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Gt=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function bs({checksumAddress:e,parameters:t,values:n}){const r=[];for(let s=0;s<t.length;s++)r.push(je({checksumAddress:e,parameter:t[s],value:n[s]}));return r}function je({checksumAddress:e=!1,parameter:t,value:n}){const r=t,s=Es(r.type);if(s){const[a,o]=s;return hs(n,{checksumAddress:e,length:a,parameter:{...r,type:o}})}if(r.type==="tuple")return xs(n,{checksumAddress:e,parameter:r});if(r.type==="address")return gs(n,{checksum:e});if(r.type==="bool")return ws(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const a=r.type.startsWith("int"),[,,o="256"]=Gt.exec(r.type)??[];return vs(n,{signed:a,size:Number(o)})}if(r.type.startsWith("bytes"))return ys(n,{type:r.type});if(r.type==="string")return As(n);throw new Jt(r.type)}function He(e){let t=0;for(let a=0;a<e.length;a++){const{dynamic:o,encoded:i}=e[a];o?t+=32:t+=V(i)}const n=[],r=[];let s=0;for(let a=0;a<e.length;a++){const{dynamic:o,encoded:i}=e[a];o?(n.push(Z(t+s,{size:32})),r.push(i),s+=V(i)):n.push(i)}return O(...n,...r)}function gs(e,t){const{checksum:n=!1}=t;return ge(e,{strict:n}),{dynamic:!1,encoded:te(e.toLowerCase())}}function hs(e,t){const{checksumAddress:n,length:r,parameter:s}=t,a=r===null;if(!Array.isArray(e))throw new ks(e);if(!a&&e.length!==r)throw new Ns({expectedLength:r,givenLength:e.length,type:`${s.type}[${r}]`});let o=!1;const i=[];for(let u=0;u<e.length;u++){const c=je({checksumAddress:n,parameter:s,value:e[u]});c.dynamic&&(o=!0),i.push(c)}if(a||o){const u=He(i);if(a){const c=Z(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?O(c,u):c}}if(o)return{dynamic:!0,encoded:u}}return{dynamic:!1,encoded:O(...i.map(({encoded:u})=>u))}}function ys(e,{type:t}){const[,n]=t.split("bytes"),r=V(e);if(!n){let s=e;return r%32!==0&&(s=W(s,Math.ceil((e.length-2)/2/32)*32)),{dynamic:!0,encoded:O(te(Z(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new Vt({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:W(e)}}function ws(e){if(typeof e!="boolean")throw new R(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:te(Nt(e))}}function vs(e,{signed:t,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new On({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:Z(e,{size:32,signed:t})}}function As(e){const t=Oe(e),n=Math.ceil(V(t)/32),r=[];for(let s=0;s<n;s++)r.push(W(Le(t,s*32,(s+1)*32)));return{dynamic:!0,encoded:O(W(Z(V(t),{size:32})),...r)}}function xs(e,t){const{checksumAddress:n,parameter:r}=t;let s=!1;const a=[];for(let o=0;o<r.components.length;o++){const i=r.components[o],u=Array.isArray(e)?o:i.name,c=je({checksumAddress:n,parameter:i,value:e[u]});a.push(c),c.dynamic&&(s=!0)}return{dynamic:s,encoded:s?He(a):O(...a.map(({encoded:o})=>o))}}function Es(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function Wt(e,t,n){const{checksumAddress:r=!1}={};if(e.length!==t.length)throw new Zt({expectedLength:e.length,givenLength:t.length});const s=bs({checksumAddress:r,parameters:e,values:t}),a=He(s);return a.length===0?"0x":a}function Te(e,t){if(e.length!==t.length)throw new Zt({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const s=e[r],a=t[r];n.push(Te.encode(s,a))}return O(...n)}(function(e){function t(n,r,s=!1){if(n==="address"){const u=r;return ge(u),te(u.toLowerCase(),s?32:0)}if(n==="string")return Oe(r);if(n==="bytes")return r;if(n==="bool")return te(Nt(r),s?32:1);const a=n.match(Gt);if(a){const[u,c,f="256"]=a,d=Number.parseInt(f)/8;return Z(r,{size:s?32:d,signed:c==="int"})}const o=n.match(ms);if(o){const[u,c]=o;if(Number.parseInt(c)!==(r.length-2)/2)throw new Vt({expectedSize:Number.parseInt(c),value:r});return W(r,s?32:0)}const i=n.match(ps);if(i&&Array.isArray(r)){const[u,c]=i,f=[];for(let d=0;d<r.length;d++)f.push(t(c,r[d],!0));return f.length===0?"0x":O(...f)}throw new Jt(n)}e.encode=t})(Te||(Te={}));class Ns extends R{constructor({expectedLength:t,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${t}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class Vt extends R{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${V(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class Zt extends R{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class ks extends R{constructor(t){super(`Value \`${t}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class Jt extends R{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function Cs(e,t){var s;const{bytecode:n,args:r}=t;return O(n,(s=e.inputs)!=null&&s.length&&(r!=null&&r.length)?Wt(e.inputs,r):"0x")}function Is(e){return jt(e)}function Ts(e,...t){const{overloads:n}=e,r=n?Bs([e,...n],e.name,{args:t[0]}):e,s=Ss(r),a=t.length>0?Wt(r.inputs,t[0]):void 0;return a?O(s,a):s}function H(e,t={}){return jt(e,t)}function Bs(e,t,n){const r=fs(e,t,n);if(r.type!=="function")throw new Ie({name:t,type:"function"});return r}function Ss(e){return Ht(e)}const $s="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",L="0x0000000000000000000000000000000000000000",Rs="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function Ps(e,t){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:a,traceAssetChanges:o,traceTransfers:i,validation:u}=t,c=t.account?_(t.account):void 0;if(o&&!c)throw new F("`account` is required when `traceAssetChanges` is true");const f=c?Cs(Is("constructor(bytes, bytes)"),{bytecode:Mn,args:[Rs,Ts(H("function getBalance(address)"),[c.address])]}):void 0,d=o?await Promise.all(t.calls.map(async v=>{if(!v.data&&!v.abi)return;const{accessList:$}=await Ot(e,{account:c.address,...v,data:v.abi?D(v):v.data});return $.map(({address:J,storageKeys:se})=>se.length>0?J:null)})).then(v=>v.flat().filter(Boolean)):[],l=await Ee(e,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:f}],stateOverrides:a},{calls:d.map((v,$)=>({abi:[H("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[c.address],to:v,from:L,nonce:$})),stateOverrides:[{address:L,nonce:0}]}]:[],{calls:[...s,{}].map(v=>({...v,from:c==null?void 0:c.address})),stateOverrides:a},...o?[{calls:[{data:f}]},{calls:d.map((v,$)=>({abi:[H("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[c.address],to:v,from:L,nonce:$})),stateOverrides:[{address:L,nonce:0}]},{calls:d.map((v,$)=>({to:v,abi:[H("function decimals() returns (uint256)")],functionName:"decimals",from:L,nonce:$})),stateOverrides:[{address:L,nonce:0}]},{calls:d.map((v,$)=>({to:v,abi:[H("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:L,nonce:$})),stateOverrides:[{address:L,nonce:0}]},{calls:d.map((v,$)=>({to:v,abi:[H("function symbol() returns (string)")],functionName:"symbol",from:L,nonce:$})),stateOverrides:[{address:L,nonce:0}]}]:[]],traceTransfers:i,validation:u}),p=o?l[2]:l[0],[b,g,,h,m,y,w,A]=o?l:[],{calls:I,...T}=p,x=I.slice(0,-1)??[],E=(b==null?void 0:b.calls)??[],k=(g==null?void 0:g.calls)??[],P=[...E,...k].map(v=>v.status==="success"?j(v.data):null),B=(h==null?void 0:h.calls)??[],S=(m==null?void 0:m.calls)??[],z=[...B,...S].map(v=>v.status==="success"?j(v.data):null),he=((y==null?void 0:y.calls)??[]).map(v=>v.status==="success"?v.result:null),re=((A==null?void 0:A.calls)??[]).map(v=>v.status==="success"?v.result:null),Kt=((w==null?void 0:w.calls)??[]).map(v=>v.status==="success"?v.result:null),ye=[];for(const[v,$]of z.entries()){const J=P[v];if(typeof $!="bigint"||typeof J!="bigint")continue;const se=he[v-1],Qt=re[v-1],Xt=Kt[v-1],We=v===0?{address:$s,decimals:18,symbol:"ETH"}:{address:d[v-1],decimals:Xt||se?Number(se??1):void 0,symbol:Qt??void 0};ye.some(Yt=>Yt.token.address===We.address)||ye.push({token:We,value:{pre:J,post:$,diff:$-J}})}return{assetChanges:ye,block:T,results:x}}function zs({r:e,s:t,to:n="hex",v:r,yParity:s}){const a=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new Tt.Signature(j(e),j(t)).toCompactHex()}${a===0?"1b":"1c"}`;return n==="hex"?o:xt(o)}async function Ge(e,t){var d,l,p;const{address:n,factory:r,factoryData:s,hash:a,signature:o,universalSignatureVerifierAddress:i=(p=(l=(d=e.chain)==null?void 0:d.contracts)==null?void 0:l.universalSignatureVerifier)==null?void 0:p.address,...u}=t,c=ht(o)?o:typeof o=="object"&&"r"in o&&"s"in o?zs(o):ue(o),f=await(async()=>!r&&!s||Jr(c)?c:Kr({address:r,data:s,signature:c}))();try{const b=i?{to:i,data:D({abi:Xe,functionName:"isValidSig",args:[n,a,f]}),...u}:{data:_n({abi:Xe,args:[n,a,f],bytecode:qn}),...u},{data:g}=await N(e,$e,"call")(b);return Dn(g??"0x0")}catch(b){try{if(Me(Un(n),await jn({hash:a,signature:o})))return!0}catch{}if(b instanceof Hn)return!1;throw b}}async function Fs(e,{address:t,message:n,factory:r,factoryData:s,signature:a,...o}){const i=It(n);return Ge(e,{address:t,factory:r,factoryData:s,hash:i,signature:a,...o})}async function Ls(e,t){const{address:n,factory:r,factoryData:s,signature:a,message:o,primaryType:i,types:u,domain:c,...f}=t,d=ar({message:o,primaryType:i,types:u,domain:c});return Ge(e,{address:n,factory:r,factoryData:s,hash:d,signature:a,...f})}function Os(e,{blockTag:t="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:a,includeTransactions:o,poll:i,pollingInterval:u=e.pollingInterval}){const c=typeof i<"u"?i:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),f=o??!1;let d;return c?(()=>{const b=Y(["watchBlocks",e.uid,t,n,r,f,u]);return ee(b,{onBlock:s,onError:a},g=>de(async()=>{var h;try{const m=await N(e,Q,"getBlock")({blockTag:t,includeTransactions:f});if(m.number!==null&&(d==null?void 0:d.number)!=null){if(m.number===d.number)return;if(m.number-d.number>1&&n)for(let y=(d==null?void 0:d.number)+1n;y<m.number;y++){const w=await N(e,Q,"getBlock")({blockNumber:y,includeTransactions:f});g.onBlock(w,d),d=w}}((d==null?void 0:d.number)==null||t==="pending"&&(m==null?void 0:m.number)==null||m.number!==null&&m.number>d.number)&&(g.onBlock(m,d),d=m)}catch(m){(h=g.onError)==null||h.call(g,m)}},{emitOnBegin:r,interval:u}))})():(()=>{let b=!0,g=!0,h=()=>b=!1;return(async()=>{try{r&&N(e,Q,"getBlock")({blockTag:t,includeTransactions:f}).then(w=>{b&&g&&(s(w,void 0),g=!1)}).catch(a);const m=(()=>{if(e.transport.type==="fallback"){const w=e.transport.transports.find(A=>A.config.type==="webSocket"||A.config.type==="ipc");return w?w.value:e.transport}return e.transport})(),{unsubscribe:y}=await m.subscribe({params:["newHeads"],async onData(w){var I;if(!b)return;const A=await N(e,Q,"getBlock")({blockNumber:(I=w.result)==null?void 0:I.number,includeTransactions:f}).catch(()=>{});b&&(s(A,d),g=!1,d=A)},onError(w){a==null||a(w)}});h=y,b||h()}catch(m){a==null||a(m)}})(),()=>h()})()}function Ms(e,{address:t,args:n,batch:r=!0,event:s,events:a,fromBlock:o,onError:i,onLogs:u,poll:c,pollingInterval:f=e.pollingInterval,strict:d}){const l=typeof c<"u"?c:typeof o=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),p=d??!1;return l?(()=>{const h=Y(["watchEvent",t,n,r,e.uid,s,f,o]);return ee(h,{onLogs:u,onError:i},m=>{let y;o!==void 0&&(y=o-1n);let w,A=!1;const I=de(async()=>{var T;if(!A){try{w=await N(e,Mt,"createEventFilter")({address:t,args:n,event:s,events:a,strict:p,fromBlock:o})}catch{}A=!0;return}try{let x;if(w)x=await N(e,Re,"getFilterChanges")({filter:w});else{const E=await N(e,le,"getBlockNumber")({});y&&y!==E?x=await N(e,_e,"getLogs")({address:t,args:n,event:s,events:a,fromBlock:y+1n,toBlock:E}):x=[],y=E}if(x.length===0)return;if(r)m.onLogs(x);else for(const E of x)m.onLogs([E])}catch(x){w&&x instanceof lt&&(A=!1),(T=m.onError)==null||T.call(m,x)}},{emitOnBegin:!0,interval:f});return async()=>{w&&await N(e,Pe,"uninstallFilter")({filter:w}),I()}})})():(()=>{let h=!0,m=()=>h=!1;return(async()=>{try{const y=(()=>{if(e.transport.type==="fallback"){const T=e.transport.transports.find(x=>x.config.type==="webSocket"||x.config.type==="ipc");return T?T.value:e.transport}return e.transport})(),w=a??(s?[s]:void 0);let A=[];w&&(A=[w.flatMap(x=>ne({abi:[x],eventName:x.name,args:n}))],s&&(A=A[0]));const{unsubscribe:I}=await y.subscribe({params:["logs",{address:t,topics:A}],onData(T){var E;if(!h)return;const x=T.result;try{const{eventName:k,args:P}=pt({abi:w??[],data:x.data,topics:x.topics,strict:p}),B=U(x,{args:P,eventName:k});u([B])}catch(k){let P,B;if(k instanceof mt||k instanceof bt){if(d)return;P=k.abiItem.name,B=(E=k.abiItem.inputs)==null?void 0:E.some(z=>!("name"in z&&z.name))}const S=U(x,{args:B?[]:{},eventName:P});u([S])}},onError(T){i==null||i(T)}});m=I,h||m()}catch(y){i==null||i(y)}})(),()=>m()})()}function _s(e){var d,l,p;const{scheme:t,statement:n,...r}=((d=e.match(qs))==null?void 0:d.groups)??{},{chainId:s,expirationTime:a,issuedAt:o,notBefore:i,requestId:u,...c}=((l=e.match(Ds))==null?void 0:l.groups)??{},f=(p=e.split("Resources:")[1])==null?void 0:p.split(`
- `).slice(1);return{...r,...c,...s?{chainId:Number(s)}:{},...a?{expirationTime:new Date(a)}:{},...o?{issuedAt:new Date(o)}:{},...i?{notBefore:new Date(i)}:{},...u?{requestId:u}:{},...f?{resources:f}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}const qs=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Ds=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function Us(e){const{address:t,domain:n,message:r,nonce:s,scheme:a,time:o=new Date}=e;if(n&&r.domain!==n||s&&r.nonce!==s||a&&r.scheme!==a||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!At(r.address,{strict:!1})||t&&!Me(r.address,t))return!1}catch{return!1}return!0}async function js(e,t){const{address:n,domain:r,message:s,nonce:a,scheme:o,signature:i,time:u=new Date,...c}=t,f=_s(s);if(!f.address||!Us({address:n,domain:r,message:f,nonce:a,scheme:o,time:u}))return!1;const l=It(s);return Ge(e,{address:f.address,hash:l,signature:i,...c})}function Hs(e){return{call:t=>$e(e,t),createAccessList:t=>Ot(e,t),createBlockFilter:()=>qr(e),createContractEventFilter:t=>Bt(e,t),createEventFilter:t=>Mt(e,t),createPendingTransactionFilter:()=>nr(e),estimateContractGas:t=>ir(e,t),estimateGas:t=>ft(e,t),getBalance:t=>tr(e,t),getBlobBaseFee:()=>Dr(e),getBlock:t=>Q(e,t),getBlockNumber:t=>le(e,t),getBlockTransactionCount:t=>Ur(e,t),getBytecode:t=>at(e,t),getChainId:()=>kt(e),getCode:t=>at(e,t),getContractEvents:t=>St(e,t),getEip712Domain:t=>Hr(e,t),getEnsAddress:t=>Nr(e,t),getEnsAvatar:t=>Or(e,t),getEnsName:t=>Mr(e,t),getEnsResolver:t=>_r(e,t),getEnsText:t=>Lt(e,t),getFeeHistory:t=>Vr(e,t),estimateFeesPerGas:t=>er(e,t),getFilterChanges:t=>Re(e,t),getFilterLogs:t=>Zr(e,t),getGasPrice:()=>Yn(e),getLogs:t=>_e(e,t),getProof:t=>ts(e,t),estimateMaxPriorityFeePerGas:t=>Xn(e,t),getStorageAt:t=>ns(e,t),getTransaction:t=>Et(e,t),getTransactionConfirmations:t=>rs(e,t),getTransactionCount:t=>Fe(e,t),getTransactionReceipt:t=>Qn(e,t),multicall:t=>Kn(e,t),prepareTransactionRequest:t=>Jn(e,t),readContract:t=>q(e,t),sendRawTransaction:t=>Zn(e,t),simulate:t=>Ee(e,t),simulateBlocks:t=>Ee(e,t),simulateCalls:t=>Ps(e,t),simulateContract:t=>yr(e,t),verifyMessage:t=>Fs(e,t),verifySiweMessage:t=>js(e,t),verifyTypedData:t=>Ls(e,t),uninstallFilter:t=>Pe(e,t),waitForTransactionReceipt:t=>Vn(e,t),watchBlocks:t=>Os(e,t),watchBlockNumber:t=>Wn(e,t),watchContractEvent:t=>wr(e,t),watchEvent:t=>Ms(e,t),watchPendingTransactions:t=>Gn(e,t)}}function ea(e){const{key:t="public",name:n="Public Client"}=e;return rr({...e,key:t,name:n,type:"publicClient"}).extend(Hs)}async function ta(e,t){var u;const{account:n=e.account,chainId:r,nonce:s}=t;if(!n)throw new sr({docsPath:"/docs/eip7702/prepareAuthorization"});const a=_(n),o=(()=>{if(t.executor)return t.executor==="self"?t.executor:_(t.executor)})(),i={address:t.contractAddress??t.address,chainId:r,nonce:s};return typeof i.chainId>"u"&&(i.chainId=((u=e.chain)==null?void 0:u.id)??await N(e,kt,"getChainId")({})),typeof i.nonce>"u"&&(i.nonce=await N(e,Fe,"getTransactionCount")({address:a.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&Me(o.address,a.address))&&(i.nonce+=1)),i}function na(e){const{r:t,s:n}=Tt.Signature.fromCompact(e.slice(2,130)),r=+`0x${e.slice(130)}`,[s,a]=(()=>{if(r===0||r===1)return[void 0,r];if(r===27)return[BigInt(r),0];if(r===28)return[BigInt(r),1];throw new Error("Invalid yParityOrV value")})();return typeof s<"u"?{r:C(t,{size:32}),s:C(n,{size:32}),v:s,yParity:a}:{r:C(t,{size:32}),s:C(n,{size:32}),yParity:a}}export{L as A,Xs as B,K as E,or as F,Ar as W,ea as a,na as b,Qr as c,yr as d,Qs as e,Bt as f,at as g,St as h,wr as i,ir as j,Jr as k,Js as l,vr as m,Cr as n,De as o,ta as p,ne as q,$s as r,Kr as s,Er as t,ae as u,Ys as v,Ks as w,Ye as x,Hs as y,zs as z};

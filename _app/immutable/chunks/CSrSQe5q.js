var UP=Object.defineProperty;var Xy=e=>{throw TypeError(e)};var FP=(e,r,t)=>r in e?UP(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var g=(e,r,t)=>FP(e,typeof r!="symbol"?r+"":r,t),Jy=(e,r,t)=>r.has(e)||Xy("Cannot "+t);var _e=(e,r,t)=>(Jy(e,r,"read from private field"),t?t.call(e):r.get(e)),Ys=(e,r,t)=>r.has(e)?Xy("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,t),Zs=(e,r,t,n)=>(Jy(e,r,"write to private field"),n?n.call(e,t):r.set(e,t),t);import{c as f,g as i_,A as BP,d as xP,E as VP,B as eb}from"./CWr8aQdV.js";import{b as G0,r as WP}from"./B5yx_Guq.js";import{d as zP,s as qP}from"./LhiRt8EW.js";import{F as a_,_ as HP,a as K0,w as GP,n as KP,p as YP,m as tb,b as Ji,e as ur,d as Hp,f as Gp,g as Y0,h as Gt,i as we,j as ZP,s as QP,c as XP}from"./q46ZyBw3.js";import{s as Tc}from"./Bixp2k0Q.js";var Kp={},dr={},q={},ue={},Ft={},hr={};Object.defineProperty(hr,"__esModule",{value:!0});hr.getBrokenObjectReason=hr.isBrokenObject=hr.createBrokenObject=void 0;var Z0="__isBrokenObject__",Q0="__reason__";function JP(e,r){r===void 0&&(r={});var t=function(){throw e};return new Proxy(r,{get:function(n,o){if(o===Z0)return!0;if(o===Q0)return e;if(o==="toJSON")return;t()},set:t,apply:t,construct:t,defineProperty:t,deleteProperty:t,getOwnPropertyDescriptor:t,getPrototypeOf:t,has:t,isExtensible:t,ownKeys:t,preventExtensions:t,setPrototypeOf:t})}hr.createBrokenObject=JP;function eC(e){return e!==null&&typeof e=="object"&&e[Z0]===!0}hr.isBrokenObject=eC;function tC(e){return e[Q0]}hr.getBrokenObjectReason=tC;Object.defineProperty(Ft,"__esModule",{value:!0});Ft.stringify=void 0;var rb=hr;function rC(e,r){return JSON.stringify(e,function(t,n){return(0,rb.isBrokenObject)(n)?{__isBrokenObject__:!0,__reason__:(0,rb.getBrokenObjectReason)(n)}:typeof n=="bigint"?"".concat(n,"n"):(r==null?void 0:r.sortedElements)===!0&&typeof n=="object"&&!Array.isArray(n)?Object.keys(n).sort().reduce(function(o,i){return o[i]=n[i],o},{}):(r==null?void 0:r.useCustomToString)===!0&&typeof n=="object"&&!Array.isArray(n)&&typeof n.toString=="function"&&n.toString!==Object.prototype.toString?n==null?void 0:n.toString():n})}Ft.stringify=rC;var u_={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.rawPolyfilledDiagnosticRecord=void 0,e.rawPolyfilledDiagnosticRecord={OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"},Object.freeze(e.rawPolyfilledDiagnosticRecord)})(u_);var X0=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),nC=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),oC=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),iC=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&nC(r,e,t);return oC(r,e),r};Object.defineProperty(ue,"__esModule",{value:!0});ue.PROTOCOL_ERROR=ue.SESSION_EXPIRED=ue.SERVICE_UNAVAILABLE=ue.GQLError=ue.Neo4jError=ue.isRetriableError=ue.newGQLError=ue.newError=void 0;var aC=iC(Ft),J0=u_,ew={DATABASE_ERROR:"DATABASE_ERROR",CLIENT_ERROR:"CLIENT_ERROR",TRANSIENT_ERROR:"TRANSIENT_ERROR",UNKNOWN:"UNKNOWN"};Object.freeze(ew);var uC=Object.values(ew),tw="ServiceUnavailable";ue.SERVICE_UNAVAILABLE=tw;var rw="SessionExpired";ue.SESSION_EXPIRED=rw;var sC="ProtocolError";ue.PROTOCOL_ERROR=sC;var cC="N/A",s_=function(e){X0(r,e);function r(t,n,o,i,a){var s=this,c;return s=e.call(this,t,a!=null?{cause:a}:void 0)||this,s.constructor=r,s.__proto__=r.prototype,s.cause=a??void 0,s.gqlStatus=n,s.gqlStatusDescription=o,s.diagnosticRecord=i,s.classification=_C(s.diagnosticRecord),s.rawClassification=(c=i==null?void 0:i._classification)!==null&&c!==void 0?c:void 0,s.name="GQLError",s}return Object.defineProperty(r.prototype,"diagnosticRecordAsJsonString",{get:function(){return aC.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),r}(Error);ue.GQLError=s_;var c_=function(e){X0(r,e);function r(t,n,o,i,a,s){var c=e.call(this,t,o,i,a,s)||this;return c.constructor=r,c.__proto__=r.prototype,c.code=n,c.name="Neo4jError",c.retriable=hC(n),c}return r.isRetriable=function(t){return t!=null&&t instanceof r&&t.retriable},r}(s_);ue.Neo4jError=c_;function lC(e,r,t,n,o,i){return new c_(e,r??cC,n??"50N42",o??"error: general processing exception - unexpected error. "+e,i??J0.rawPolyfilledDiagnosticRecord,t)}ue.newError=lC;function fC(e,r,t,n,o){return new s_(e,t??"50N42",n??"error: general processing exception - unexpected error. "+e,o??J0.rawPolyfilledDiagnosticRecord,r)}ue.newGQLError=fC;var dC=c_.isRetriable;ue.isRetriableError=dC;function hC(e){return e===tw||e===rw||vC(e)||pC(e)}function pC(e){return(e==null?void 0:e.includes("TransientError"))===!0}function vC(e){return e==="Neo.ClientError.Security.AuthorizationExpired"}function _C(e){return e===void 0||e._classification===void 0?"UNKNOWN":uC.includes(e._classification)?e==null?void 0:e._classification:"UNKNOWN"}var xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.toString=xe.toNumber=xe.inSafeRange=xe.isInt=xe.int=void 0;var Li=ue,nb=new Map,Kr=function(){function e(r,t){this.low=r??0,this.high=t??0}return e.prototype.inSafeRange=function(){return this.greaterThanOrEqual(e.MIN_SAFE_VALUE)&&this.lessThanOrEqual(e.MAX_SAFE_VALUE)},e.prototype.toInt=function(){return this.low},e.prototype.toNumber=function(){return this.high*Tn+(this.low>>>0)},e.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(Tn)+BigInt(this.low>>>0);var r=this.negate();return BigInt(-1)*(BigInt(r.high>>>0)*BigInt(Tn)+BigInt(r.low>>>0))},e.prototype.toNumberOrInfinity=function(){return this.lessThan(e.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(e.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},e.prototype.toString=function(r){if(r=r??10,r<2||r>36)throw RangeError("radix out of range: "+r.toString());if(this.isZero())return"0";var t;if(this.isNegative())if(this.equals(e.MIN_VALUE)){var n=e.fromNumber(r),o=this.div(n);return t=o.multiply(n).subtract(this),o.toString(r)+t.toInt().toString(r)}else return"-"+this.negate().toString(r);var i=e.fromNumber(Math.pow(r,6));t=this;for(var a="";;){var s=t.div(i),c=t.subtract(s.multiply(i)).toInt()>>>0,u=c.toString(r);if(t=s,t.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},e.prototype.valueOf=function(){return this.toBigInt()},e.prototype.getHighBits=function(){return this.high},e.prototype.getLowBits=function(){return this.low},e.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(e.MIN_VALUE)?64:this.negate().getNumBitsAbs();var r=this.high!==0?this.high:this.low,t=0;for(t=31;t>0&&!(r&1<<t);t--);return this.high!==0?t+33:t+1},e.prototype.isZero=function(){return this.high===0&&this.low===0},e.prototype.isNegative=function(){return this.high<0},e.prototype.isPositive=function(){return this.high>=0},e.prototype.isOdd=function(){return(this.low&1)===1},e.prototype.isEven=function(){return(this.low&1)===0},e.prototype.equals=function(r){var t=e.fromValue(r);return this.high===t.high&&this.low===t.low},e.prototype.notEquals=function(r){return!this.equals(r)},e.prototype.lessThan=function(r){return this.compare(r)<0},e.prototype.lessThanOrEqual=function(r){return this.compare(r)<=0},e.prototype.greaterThan=function(r){return this.compare(r)>0},e.prototype.greaterThanOrEqual=function(r){return this.compare(r)>=0},e.prototype.compare=function(r){var t=e.fromValue(r);if(this.equals(t))return 0;var n=this.isNegative(),o=t.isNegative();return n&&!o?-1:!n&&o?1:this.subtract(t).isNegative()?-1:1},e.prototype.negate=function(){return this.equals(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.add=function(r){var t=e.fromValue(r),n=this.high>>>16,o=this.high&65535,i=this.low>>>16,a=this.low&65535,s=t.high>>>16,c=t.high&65535,u=t.low>>>16,l=t.low&65535,d=0,h=0,p=0,v=0;return v+=a+l,p+=v>>>16,v&=65535,p+=i+u,h+=p>>>16,p&=65535,h+=o+c,d+=h>>>16,h&=65535,d+=n+s,d&=65535,e.fromBits(p<<16|v,d<<16|h)},e.prototype.subtract=function(r){var t=e.fromValue(r);return this.add(t.negate())},e.prototype.multiply=function(r){if(this.isZero())return e.ZERO;var t=e.fromValue(r);if(t.isZero())return e.ZERO;if(this.equals(e.MIN_VALUE))return t.isOdd()?e.MIN_VALUE:e.ZERO;if(t.equals(e.MIN_VALUE))return this.isOdd()?e.MIN_VALUE:e.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(ab)&&t.lessThan(ab))return e.fromNumber(this.toNumber()*t.toNumber());var n=this.high>>>16,o=this.high&65535,i=this.low>>>16,a=this.low&65535,s=t.high>>>16,c=t.high&65535,u=t.low>>>16,l=t.low&65535,d=0,h=0,p=0,v=0;return v+=a*l,p+=v>>>16,v&=65535,p+=i*l,h+=p>>>16,p&=65535,p+=a*u,h+=p>>>16,p&=65535,h+=o*l,d+=h>>>16,h&=65535,h+=i*u,d+=h>>>16,h&=65535,h+=a*c,d+=h>>>16,h&=65535,d+=n*l+o*u+i*c+a*s,d&=65535,e.fromBits(p<<16|v,d<<16|h)},e.prototype.div=function(r){var t=e.fromValue(r);if(t.isZero())throw(0,Li.newError)("division by zero");if(this.isZero())return e.ZERO;var n,o,i;if(this.equals(e.MIN_VALUE)){if(t.equals(e.ONE)||t.equals(e.NEG_ONE))return e.MIN_VALUE;if(t.equals(e.MIN_VALUE))return e.ONE;var a=this.shiftRight(1);return n=a.div(t).shiftLeft(1),n.equals(e.ZERO)?t.isNegative()?e.ONE:e.NEG_ONE:(o=this.subtract(t.multiply(n)),i=n.add(o.div(t)),i)}else if(t.equals(e.MIN_VALUE))return e.ZERO;if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();for(i=e.ZERO,o=this;o.greaterThanOrEqual(t);){n=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),c=s<=48?1:Math.pow(2,s-48),u=e.fromNumber(n),l=u.multiply(t);l.isNegative()||l.greaterThan(o);)n-=c,u=e.fromNumber(n),l=u.multiply(t);u.isZero()&&(u=e.ONE),i=i.add(u),o=o.subtract(l)}return i},e.prototype.modulo=function(r){var t=e.fromValue(r);return this.subtract(this.div(t).multiply(t))},e.prototype.not=function(){return e.fromBits(~this.low,~this.high)},e.prototype.and=function(r){var t=e.fromValue(r);return e.fromBits(this.low&t.low,this.high&t.high)},e.prototype.or=function(r){var t=e.fromValue(r);return e.fromBits(this.low|t.low,this.high|t.high)},e.prototype.xor=function(r){var t=e.fromValue(r);return e.fromBits(this.low^t.low,this.high^t.high)},e.prototype.shiftLeft=function(r){var t=e.toNumber(r);return(t&=63)===0?e.ZERO:t<32?e.fromBits(this.low<<t,this.high<<t|this.low>>>32-t):e.fromBits(0,this.low<<t-32)},e.prototype.shiftRight=function(r){var t=e.toNumber(r),n=e.toNumber(r);return(t&=63)===0?e.ZERO:n<32?e.fromBits(this.low>>>t|this.high<<32-t,this.high>>t):e.fromBits(this.high>>t-32,this.high>=0?0:-1)},e.isInteger=function(r){return(r==null?void 0:r.__isInteger__)===!0},e.fromInt=function(r){var t;if(r=r|0,r>=-128&&r<128&&(t=nb.get(r),t!=null))return t;var n=new e(r,r<0?-1:0);return r>=-128&&r<128&&nb.set(r,n),n},e.fromBits=function(r,t){return new e(r,t)},e.fromNumber=function(r){return isNaN(r)||!isFinite(r)?e.ZERO:r<=-ib?e.MIN_VALUE:r+1>=ib?e.MAX_VALUE:r<0?e.fromNumber(-r).negate():new e(r%Tn|0,r/Tn|0)},e.fromString=function(r,t,n){var o=n===void 0?{}:n,i=o.strictStringValidation;if(r.length===0)throw(0,Li.newError)("number format error: empty string");if(r==="NaN"||r==="Infinity"||r==="+Infinity"||r==="-Infinity")return e.ZERO;if(t=t??10,t<2||t>36)throw(0,Li.newError)("radix out of range: "+t.toString());var a;if((a=r.indexOf("-"))>0)throw(0,Li.newError)('number format error: interior "-" character: '+r);if(a===0)return e.fromString(r.substring(1),t).negate();for(var s=e.fromNumber(Math.pow(t,8)),c=e.ZERO,u=0;u<r.length;u+=8){var l=Math.min(8,r.length-u),d=r.substring(u,u+l),h=parseInt(d,t);if(i===!0&&!bC(d,h,t))throw(0,Li.newError)('number format error: "'.concat(d,'" is NaN in radix ').concat(t,": ").concat(r));if(l<8){var p=e.fromNumber(Math.pow(t,l));c=c.multiply(p).add(e.fromNumber(h))}else c=c.multiply(s),c=c.add(e.fromNumber(h))}return c},e.fromValue=function(r,t){return t===void 0&&(t={}),r instanceof e?r:typeof r=="number"?(t.ceilFloat===!0&&(r=Math.ceil(r)),e.fromNumber(r)):typeof r=="string"?e.fromString(r,void 0,t):typeof r=="bigint"?e.fromString(r.toString()):new e(r.low,r.high)},e.toNumber=function(r){switch(typeof r){case"number":return r;case"bigint":return Number(r);default:return e.fromValue(r).toNumber()}},e.toString=function(r,t){return e.fromValue(r).toString(t)},e.inSafeRange=function(r){return e.fromValue(r).inSafeRange()},e.ZERO=e.fromInt(0),e.ONE=e.fromInt(1),e.NEG_ONE=e.fromInt(-1),e.MAX_VALUE=e.fromBits(-1,2147483647),e.MIN_VALUE=e.fromBits(0,-2147483648),e.MIN_SAFE_VALUE=e.fromBits(1,-2097152),e.MAX_SAFE_VALUE=e.fromBits(-1,2097151),e.__isInteger__=!0,e}();function yC(e,r,t){var n=e.toString(r),o=Math.max(t-n.length,0),i="0".repeat(o);return"".concat(i).concat(n)}function bC(e,r,t){return!Number.isNaN(e)&&!Number.isNaN(r)&&yC(r,t,e.length)===e.toLowerCase()}Object.defineProperty(Kr.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var ob=65536,mC=1<<24,Tn=ob*ob,gC=Tn*Tn,ib=gC/2,ab=Kr.fromInt(mC),wC=Kr.fromValue;xe.int=wC;var OC=Kr.isInteger;xe.isInt=OC;var EC=Kr.inSafeRange;xe.inSafeRange=EC;var SC=Kr.toNumber;xe.toNumber=SC;var TC=Kr.toString;xe.toString=TC;xe.default=Kr;var he={},l_={},ee={},PC=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),CC=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),AC=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&PC(r,e,t);return CC(r,e),r},IC=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ee,"__esModule",{value:!0});ee.ENCRYPTION_OFF=ee.ENCRYPTION_ON=ee.equals=ee.validateQueryAndParameters=ee.toNumber=ee.assertValidDate=ee.assertNumberOrInteger=ee.assertNumber=ee.assertString=ee.assertObject=ee.isString=ee.isObject=ee.isEmptyObjectOrNull=void 0;var Yp=AC(xe),kn=Ft,RC="ENCRYPTION_ON";ee.ENCRYPTION_ON=RC;var jC="ENCRYPTION_OFF";ee.ENCRYPTION_OFF=jC;function $C(e){if(e===null)return!0;if(!gl(e))return!1;for(var r in e)if(e[r]!==void 0)return!1;return!0}ee.isEmptyObjectOrNull=$C;function gl(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}ee.isObject=gl;function NC(e,r,t){var n,o,i="",a=r??{},s=(n=t==null?void 0:t.skipAsserts)!==null&&n!==void 0?n:!1;return typeof e=="string"?i=e:e instanceof String?i=e.toString():typeof e=="object"&&e.text!=null&&(i=e.text,a=(o=e.parameters)!==null&&o!==void 0?o:{}),s||(UC(i),FC(a)),{validatedQuery:i,params:a}}ee.validateQueryAndParameters=NC;function kC(e,r){if(!gl(e))throw new TypeError(r+" expected to be an object but was: "+(0,kn.stringify)(e));return e}ee.assertObject=kC;function nw(e,r){if(!ow(e))throw new TypeError((0,kn.stringify)(r)+" expected to be string but was: "+(0,kn.stringify)(e));return e}ee.assertString=nw;function MC(e,r){if(typeof e!="number")throw new TypeError(r+" expected to be a number but was: "+(0,kn.stringify)(e));return e}ee.assertNumber=MC;function DC(e,r){if(typeof e!="number"&&typeof e!="bigint"&&!(0,Yp.isInt)(e))throw new TypeError(r+" expected to be either a number or an Integer object but was: "+(0,kn.stringify)(e));return e}ee.assertNumberOrInteger=DC;function LC(e,r){if(Object.prototype.toString.call(e)!=="[object Date]")throw new TypeError(r+" expected to be a standard JavaScript Date but was: "+(0,kn.stringify)(e));if(Number.isNaN(e.getTime()))throw new TypeError(r+" expected to be valid JavaScript Date but its time was NaN: "+(0,kn.stringify)(e));return e}ee.assertValidDate=LC;function UC(e){if(nw(e,"Cypher query"),e.trim().length===0)throw new TypeError("Cypher query is expected to be a non-empty string.")}function FC(e){if(!gl(e)){var r=e.constructor!=null?" "+e.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(r," ").concat(JSON.stringify(e)))}}function ow(e){return Object.prototype.toString.call(e)==="[object String]"}ee.isString=ow;function iw(e,r){var t,n;if(e===r)return!0;if(e===null||r===null)return!1;if(typeof e=="object"&&typeof r=="object"){var o=Object.keys(e),i=Object.keys(r);if(o.length!==i.length)return!1;try{for(var a=IC(o),s=a.next();!s.done;s=a.next()){var c=s.value;if(!iw(e[c],r[c]))return!1}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0}return!1}ee.equals=iw;function BC(e){return e instanceof Yp.default?e.toNumber():typeof e=="bigint"?(0,Yp.int)(e).toNumber():e}ee.toNumber=BC;(function(e){var r=f&&f.__createBinding||(Object.create?function(m,A,k,B){B===void 0&&(B=k);var J=Object.getOwnPropertyDescriptor(A,k);(!J||("get"in J?!A.__esModule:J.writable||J.configurable))&&(J={enumerable:!0,get:function(){return A[k]}}),Object.defineProperty(m,B,J)}:function(m,A,k,B){B===void 0&&(B=k),m[B]=A[k]}),t=f&&f.__setModuleDefault||(Object.create?function(m,A){Object.defineProperty(m,"default",{enumerable:!0,value:A})}:function(m,A){m.default=A}),n=f&&f.__importStar||function(m){if(m&&m.__esModule)return m;var A={};if(m!=null)for(var k in m)k!=="default"&&Object.prototype.hasOwnProperty.call(m,k)&&r(A,m,k);return t(A,m),A};Object.defineProperty(e,"__esModule",{value:!0}),e.floorMod=e.floorDiv=e.assertValidZoneId=e.assertValidNanosecond=e.assertValidSecond=e.assertValidMinute=e.assertValidHour=e.assertValidDay=e.assertValidMonth=e.assertValidYear=e.timeZoneOffsetInSeconds=e.totalNanoseconds=e.newDate=e.toStandardDate=e.isoStringToStandardDate=e.dateToIsoString=e.timeZoneOffsetToIsoString=e.timeToIsoString=e.durationToIsoString=e.dateToEpochDay=e.localDateTimeToEpochSecond=e.localTimeToNanoOfDay=e.normalizeNanosecondsForDuration=e.normalizeSecondsForDuration=e.SECONDS_PER_DAY=e.DAYS_PER_400_YEAR_CYCLE=e.DAYS_0000_TO_1970=e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE=e.NANOS_PER_MILLISECOND=e.NANOS_PER_SECOND=e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE=e.MINUTES_PER_HOUR=e.NANOSECOND_OF_SECOND_RANGE=e.SECOND_OF_MINUTE_RANGE=e.MINUTE_OF_HOUR_RANGE=e.HOUR_OF_DAY_RANGE=e.DAY_OF_MONTH_RANGE=e.MONTH_OF_YEAR_RANGE=e.YEAR_RANGE=void 0;var o=n(xe),i=ue,a=ee,s=function(){function m(A,k){this._minNumber=A,this._maxNumber=k,this._minInteger=(0,o.int)(A),this._maxInteger=(0,o.int)(k)}return m.prototype.contains=function(A){if((0,o.isInt)(A)&&A instanceof o.default)return A.greaterThanOrEqual(this._minInteger)&&A.lessThanOrEqual(this._maxInteger);if(typeof A=="bigint"){var k=(0,o.int)(A);return k.greaterThanOrEqual(this._minInteger)&&k.lessThanOrEqual(this._maxInteger)}else return A>=this._minNumber&&A<=this._maxNumber},m.prototype.toString=function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")},m}();e.YEAR_RANGE=new s(-999999999,999999999),e.MONTH_OF_YEAR_RANGE=new s(1,12),e.DAY_OF_MONTH_RANGE=new s(1,31),e.HOUR_OF_DAY_RANGE=new s(0,23),e.MINUTE_OF_HOUR_RANGE=new s(0,59),e.SECOND_OF_MINUTE_RANGE=new s(0,59),e.NANOSECOND_OF_SECOND_RANGE=new s(0,999999999),e.MINUTES_PER_HOUR=60,e.SECONDS_PER_MINUTE=60,e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE*e.MINUTES_PER_HOUR,e.NANOS_PER_SECOND=1e9,e.NANOS_PER_MILLISECOND=1e6,e.NANOS_PER_MINUTE=e.NANOS_PER_SECOND*e.SECONDS_PER_MINUTE,e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE*e.MINUTES_PER_HOUR,e.DAYS_0000_TO_1970=719528,e.DAYS_PER_400_YEAR_CYCLE=146097,e.SECONDS_PER_DAY=86400;function c(m,A){return(0,o.int)(m).add(re(A,e.NANOS_PER_SECOND))}e.normalizeSecondsForDuration=c;function u(m){return pe(m,e.NANOS_PER_SECOND)}e.normalizeNanosecondsForDuration=u;function l(m,A,k,B){m=(0,o.int)(m),A=(0,o.int)(A),k=(0,o.int)(k),B=(0,o.int)(B);var J=m.multiply(e.NANOS_PER_HOUR);return J=J.add(A.multiply(e.NANOS_PER_MINUTE)),J=J.add(k.multiply(e.NANOS_PER_SECOND)),J.add(B)}e.localTimeToNanoOfDay=l;function d(m,A,k,B,J,Ue,At){var cn=h(m,A,k),Di=K(B,J,Ue);return cn.multiply(e.SECONDS_PER_DAY).add(Di)}e.localDateTimeToEpochSecond=d;function h(m,A,k){m=(0,o.int)(m),A=(0,o.int)(A),k=(0,o.int)(k);var B=m.multiply(365);return m.greaterThanOrEqual(0)?B=B.add(m.add(3).div(4).subtract(m.add(99).div(100)).add(m.add(399).div(400))):B=B.subtract(m.div(-4).subtract(m.div(-100)).add(m.div(-400))),B=B.add(A.multiply(367).subtract(362).div(12)),B=B.add(k.subtract(1)),A.greaterThan(2)&&(B=B.subtract(1),L(m)||(B=B.subtract(1))),B.subtract(e.DAYS_0000_TO_1970)}e.dateToEpochDay=h;function p(m,A,k,B){var J=ve(m),Ue=ve(A),At=Ae(k,B);return"P".concat(J,"M").concat(Ue,"DT").concat(At,"S")}e.durationToIsoString=p;function v(m,A,k,B){var J=ve(m,2),Ue=ve(A,2),At=ve(k,2),cn=X(B);return"".concat(J,":").concat(Ue,":").concat(At).concat(cn)}e.timeToIsoString=v;function y(m){if(m=(0,o.int)(m),m.equals(0))return"Z";var A=m.isNegative();A&&(m=m.multiply(-1));var k=A?"-":"+",B=ve(m.div(e.SECONDS_PER_HOUR),2),J=ve(m.div(e.SECONDS_PER_MINUTE).modulo(e.MINUTES_PER_HOUR),2),Ue=m.modulo(e.SECONDS_PER_MINUTE),At=Ue.equals(0)?null:ve(Ue,2);return At!=null?"".concat(k).concat(B,":").concat(J,":").concat(At):"".concat(k).concat(B,":").concat(J)}e.timeZoneOffsetToIsoString=y;function _(m,A,k){var B=je(m),J=ve(A,2),Ue=ve(k,2);return"".concat(B,"-").concat(J,"-").concat(Ue)}e.dateToIsoString=_;function b(m){return new Date(m)}e.isoStringToStandardDate=b;function w(m){return new Date(m)}e.toStandardDate=w;function S(m){return new Date(m)}e.newDate=S;function E(m,A){A=A??0;var k=m.getMilliseconds()*e.NANOS_PER_MILLISECOND;return ft(A,k)}e.totalNanoseconds=E;function T(m){var A=m.getSeconds()-m.getUTCSeconds(),k=m.getMinutes()-m.getUTCMinutes(),B=m.getHours()-m.getUTCHours(),J=C(m);return B*e.SECONDS_PER_HOUR+k*e.SECONDS_PER_MINUTE+A+J*e.SECONDS_PER_DAY}e.timeZoneOffsetInSeconds=T;function C(m){return m.getMonth()===m.getUTCMonth()?m.getDate()-m.getUTCDate():m.getFullYear()>m.getUTCFullYear()||m.getMonth()>m.getUTCMonth()&&m.getFullYear()===m.getUTCFullYear()?m.getDate()+P(m.getUTCMonth(),m.getUTCFullYear())-m.getUTCDate():m.getDate()-(m.getUTCDate()+P(m.getMonth(),m.getFullYear()))}function P(m,A){return m===1?A%400===0||A%4===0&&A%100!==0?29:28:[0,2,4,6,7,9,11].includes(m)?31:30}function I(m){return te(m,e.YEAR_RANGE,"Year")}e.assertValidYear=I;function M(m){return te(m,e.MONTH_OF_YEAR_RANGE,"Month")}e.assertValidMonth=M;function F(m){return te(m,e.DAY_OF_MONTH_RANGE,"Day")}e.assertValidDay=F;function Q(m){return te(m,e.HOUR_OF_DAY_RANGE,"Hour")}e.assertValidHour=Q;function H(m){return te(m,e.MINUTE_OF_HOUR_RANGE,"Minute")}e.assertValidMinute=H;function Z(m){return te(m,e.SECOND_OF_MINUTE_RANGE,"Second")}e.assertValidSecond=Z;function fe(m){return te(m,e.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")}e.assertValidNanosecond=fe;var V=new Map,ie=function(m,A){return(0,i.newError)("".concat(A,' is expected to be a valid ZoneId but was: "').concat(m,'"'))};function W(m,A){var k=V.get(A);if(k!==!0){if(k===!1)throw ie(A,m);try{Intl.DateTimeFormat(void 0,{timeZone:A}),V.set(A,!0)}catch{throw V.set(A,!1),ie(A,m)}}}e.assertValidZoneId=W;function te(m,A,k){if((0,a.assertNumberOrInteger)(m,k),!A.contains(m))throw(0,i.newError)("".concat(k," is expected to be in range ").concat(A.toString()," but was: ").concat(m.toString()));return m}function K(m,A,k){m=(0,o.int)(m),A=(0,o.int)(A),k=(0,o.int)(k);var B=m.multiply(e.SECONDS_PER_HOUR);return B=B.add(A.multiply(e.SECONDS_PER_MINUTE)),B.add(k)}function L(m){return m=(0,o.int)(m),m.modulo(4).equals(0)?m.modulo(100).equals(0)?!!m.modulo(400).equals(0):!0:!1}function re(m,A){m=(0,o.int)(m),A=(0,o.int)(A);var k=m.div(A);return m.isPositive()!==A.isPositive()&&k.multiply(A).notEquals(m)&&(k=k.subtract(1)),k}e.floorDiv=re;function pe(m,A){return m=(0,o.int)(m),A=(0,o.int)(A),m.subtract(re(m,A).multiply(A))}e.floorMod=pe;function Ae(m,A){m=(0,o.int)(m),A=(0,o.int)(A);var k,B,J=m.isNegative(),Ue=A.greaterThan(0);return J&&Ue?m.equals(-1)?k="-0":k=m.add(1).toString():k=m.toString(),Ue&&(J?B=X(A.negate().add(2*e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND)):B=X(A.add(e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND))),B!=null?k+B:k}function X(m){return m=(0,o.int)(m),m.equals(0)?"":"."+ve(m,9)}function je(m){var A=(0,o.int)(m);return A.isNegative()||A.greaterThan(9999)?ve(A,6,{usePositiveSign:!0}):ve(A,4)}function ve(m,A,k){m=(0,o.int)(m);var B=m.isNegative();B&&(m=m.negate());var J=m.toString();if(A!=null)for(;J.length<A;)J="0"+J;return B?"-"+J:(k==null?void 0:k.usePositiveSign)===!0?"+"+J:J}function ft(m,A){return m instanceof o.default?m.add(A):typeof m=="bigint"?m+BigInt(A):m+A}})(l_);var xC=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),VC=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),aw=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&xC(r,e,t);return VC(r,e),r},WC=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(he,"__esModule",{value:!0});he.isDateTime=he.DateTime=he.isLocalDateTime=he.LocalDateTime=he.isDate=he.Date=he.isTime=he.Time=he.isLocalTime=he.LocalTime=he.isDuration=he.Duration=void 0;var Y=aw(l_),fr=ee,zC=ue,In=aw(xe),Ko={value:!0,enumerable:!1,configurable:!1,writable:!1},uw="__isDuration__",sw="__isLocalTime__",cw="__isTime__",lw="__isDate__",fw="__isLocalDateTime__",dw="__isDateTime__",hw=function(){function e(r,t,n,o){this.months=(0,fr.assertNumberOrInteger)(r,"Months"),this.days=(0,fr.assertNumberOrInteger)(t,"Days"),(0,fr.assertNumberOrInteger)(n,"Seconds"),(0,fr.assertNumberOrInteger)(o,"Nanoseconds"),this.seconds=Y.normalizeSecondsForDuration(n,o),this.nanoseconds=Y.normalizeNanosecondsForDuration(o),Object.freeze(this)}return e.prototype.toString=function(){return Y.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},e}();he.Duration=hw;Object.defineProperty(hw.prototype,uw,Ko);function qC(e){return Yo(e,uw)}he.isDuration=qC;var pw=function(){function e(r,t,n,o){this.hour=Y.assertValidHour(r),this.minute=Y.assertValidMinute(t),this.second=Y.assertValidSecond(n),this.nanosecond=Y.assertValidNanosecond(o),Object.freeze(this)}return e.fromStandardDate=function(r,t){Ra(r,t);var n=Y.totalNanoseconds(r,t);return new e(r.getHours(),r.getMinutes(),r.getSeconds(),n instanceof In.default?n.toInt():typeof n=="bigint"?(0,In.int)(n).toInt():n)},e.prototype.toString=function(){return Y.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},e}();he.LocalTime=pw;Object.defineProperty(pw.prototype,sw,Ko);function HC(e){return Yo(e,sw)}he.isLocalTime=HC;var vw=function(){function e(r,t,n,o,i){this.hour=Y.assertValidHour(r),this.minute=Y.assertValidMinute(t),this.second=Y.assertValidSecond(n),this.nanosecond=Y.assertValidNanosecond(o),this.timeZoneOffsetSeconds=(0,fr.assertNumberOrInteger)(i,"Time zone offset in seconds"),Object.freeze(this)}return e.fromStandardDate=function(r,t){return Ra(r,t),new e(r.getHours(),r.getMinutes(),r.getSeconds(),(0,In.toNumber)(Y.totalNanoseconds(r,t)),Y.timeZoneOffsetInSeconds(r))},e.prototype.toString=function(){return Y.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+Y.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},e}();he.Time=vw;Object.defineProperty(vw.prototype,cw,Ko);function GC(e){return Yo(e,cw)}he.isTime=GC;var _w=function(){function e(r,t,n){this.year=Y.assertValidYear(r),this.month=Y.assertValidMonth(t),this.day=Y.assertValidDay(n),Object.freeze(this)}return e.fromStandardDate=function(r){return Ra(r),new e(r.getFullYear(),r.getMonth()+1,r.getDate())},e.prototype.toStandardDate=function(){return Y.isoStringToStandardDate(this.toString())},e.prototype.toString=function(){return Y.dateToIsoString(this.year,this.month,this.day)},e}();he.Date=_w;Object.defineProperty(_w.prototype,lw,Ko);function KC(e){return Yo(e,lw)}he.isDate=KC;var yw=function(){function e(r,t,n,o,i,a,s){this.year=Y.assertValidYear(r),this.month=Y.assertValidMonth(t),this.day=Y.assertValidDay(n),this.hour=Y.assertValidHour(o),this.minute=Y.assertValidMinute(i),this.second=Y.assertValidSecond(a),this.nanosecond=Y.assertValidNanosecond(s),Object.freeze(this)}return e.fromStandardDate=function(r,t){return Ra(r,t),new e(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),(0,In.toNumber)(Y.totalNanoseconds(r,t)))},e.prototype.toStandardDate=function(){return Y.isoStringToStandardDate(this.toString())},e.prototype.toString=function(){return mw(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},e}();he.LocalDateTime=yw;Object.defineProperty(yw.prototype,fw,Ko);function YC(e){return Yo(e,fw)}he.isLocalDateTime=YC;var bw=function(){function e(r,t,n,o,i,a,s,c,u){this.year=Y.assertValidYear(r),this.month=Y.assertValidMonth(t),this.day=Y.assertValidDay(n),this.hour=Y.assertValidHour(o),this.minute=Y.assertValidMinute(i),this.second=Y.assertValidSecond(a),this.nanosecond=Y.assertValidNanosecond(s);var l=WC(QC(c,u),2),d=l[0],h=l[1];this.timeZoneOffsetSeconds=d,this.timeZoneId=h??void 0,Object.freeze(this)}return e.fromStandardDate=function(r,t){return Ra(r,t),new e(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),(0,In.toNumber)(Y.totalNanoseconds(r,t)),Y.timeZoneOffsetInSeconds(r),null)},e.prototype.toStandardDate=function(){return Y.toStandardDate(this._toUTC())},e.prototype.toString=function(){var r,t=mw(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),n=this.timeZoneOffsetSeconds!=null?Y.timeZoneOffsetToIsoString((r=this.timeZoneOffsetSeconds)!==null&&r!==void 0?r:0):"",o=this.timeZoneId!=null?"[".concat(this.timeZoneId,"]"):"";return t+n+o},e.prototype._toUTC=function(){var r;if(this.timeZoneOffsetSeconds===void 0)throw new Error("Requires DateTime created with time zone offset");var t=Y.localDateTimeToEpochSecond(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),n=t.subtract((r=this.timeZoneOffsetSeconds)!==null&&r!==void 0?r:0);return(0,In.int)(n).multiply(1e3).add((0,In.int)(this.nanosecond).div(1e6)).toNumber()},e}();he.DateTime=bw;Object.defineProperty(bw.prototype,dw,Ko);function ZC(e){return Yo(e,dw)}he.isDateTime=ZC;function Yo(e,r){return e!=null&&e[r]===!0}function mw(e,r,t,n,o,i,a){return Y.dateToIsoString(e,r,t)+"T"+Y.timeToIsoString(n,o,i,a)}function QC(e,r){var t=e!=null,n=r!=null&&r!=="";if(!t&&!n)throw(0,zC.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(e," and id: ").concat(r));var o=[void 0,void 0];return t&&((0,fr.assertNumberOrInteger)(e,"Time zone offset in seconds"),o[0]=e),n&&((0,fr.assertString)(r,"Time zone ID"),Y.assertValidZoneId("Time zone ID",r),o[1]=r),o}function Ra(e,r){(0,fr.assertValidDate)(e,"Standard date"),r!=null&&(0,fr.assertNumberOrInteger)(r,"Nanosecond")}var Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.isPathSegment=Oe.PathSegment=Oe.isPath=Oe.Path=Oe.isUnboundRelationship=Oe.UnboundRelationship=Oe.isRelationship=Oe.Relationship=Oe.isNode=Oe.Node=void 0;var f_=Ft,ja={value:!0,enumerable:!1,configurable:!1,writable:!1},gw="__isNode__",ww="__isRelationship__",Ow="__isUnboundRelationship__",Ew="__isPath__",Sw="__isPathSegment__";function $a(e,r){return e!=null&&e[r]===!0}var Tw=function(){function e(r,t,n,o){this.identity=r,this.labels=t,this.properties=n,this.elementId=ua(o,function(){return r.toString()})}return e.prototype.toString=function(){for(var r="("+this.elementId,t=0;t<this.labels.length;t++)r+=":"+this.labels[t];var n=Object.keys(this.properties);if(n.length>0){r+=" {";for(var t=0;t<n.length;t++)t>0&&(r+=","),r+=n[t]+":"+(0,f_.stringify)(this.properties[n[t]]);r+="}"}return r+=")",r},e}();Oe.Node=Tw;Object.defineProperty(Tw.prototype,gw,ja);function XC(e){return $a(e,gw)}Oe.isNode=XC;var kc=function(){function e(r,t,n,o,i,a,s,c){this.identity=r,this.start=t,this.end=n,this.type=o,this.properties=i,this.elementId=ua(a,function(){return r.toString()}),this.startNodeElementId=ua(s,function(){return t.toString()}),this.endNodeElementId=ua(c,function(){return n.toString()})}return e.prototype.toString=function(){var r="("+this.startNodeElementId+")-[:"+this.type,t=Object.keys(this.properties);if(t.length>0){r+=" {";for(var n=0;n<t.length;n++)n>0&&(r+=","),r+=t[n]+":"+(0,f_.stringify)(this.properties[t[n]]);r+="}"}return r+="]->("+this.endNodeElementId+")",r},e}();Oe.Relationship=kc;Object.defineProperty(kc.prototype,ww,ja);function JC(e){return $a(e,ww)}Oe.isRelationship=JC;var Pw=function(){function e(r,t,n,o){this.identity=r,this.type=t,this.properties=n,this.elementId=ua(o,function(){return r.toString()})}return e.prototype.bind=function(r,t){return new kc(this.identity,r,t,this.type,this.properties,this.elementId)},e.prototype.bindTo=function(r,t){return new kc(this.identity,r.identity,t.identity,this.type,this.properties,this.elementId,r.elementId,t.elementId)},e.prototype.toString=function(){var r="-[:"+this.type,t=Object.keys(this.properties);if(t.length>0){r+=" {";for(var n=0;n<t.length;n++)n>0&&(r+=","),r+=t[n]+":"+(0,f_.stringify)(this.properties[t[n]]);r+="}"}return r+="]->",r},e}();Oe.UnboundRelationship=Pw;Object.defineProperty(Pw.prototype,Ow,ja);function eA(e){return $a(e,Ow)}Oe.isUnboundRelationship=eA;var Cw=function(){function e(r,t,n){this.start=r,this.relationship=t,this.end=n}return e}();Oe.PathSegment=Cw;Object.defineProperty(Cw.prototype,Sw,ja);function tA(e){return $a(e,Sw)}Oe.isPathSegment=tA;var Aw=function(){function e(r,t,n){this.start=r,this.end=t,this.segments=n,this.length=n.length}return e}();Oe.Path=Aw;Object.defineProperty(Aw.prototype,Ew,ja);function rA(e){return $a(e,Ew)}Oe.isPath=rA;function ua(e,r){return e??r()}var d_={},zh=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},qh=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},Hh=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(d_,"__esModule",{value:!0});var ub=ue;function nA(e){var r={};return e.forEach(function(t,n){r[t]=n}),r}var oA=function(){function e(r,t,n){this.keys=r,this.length=r.length,this._fields=t,this._fieldLookup=n??nA(r)}return e.prototype.forEach=function(r){var t,n;try{for(var o=qh(this.entries()),i=o.next();!i.done;i=o.next()){var a=Hh(i.value,2),s=a[0],c=a[1];r(c,s,this)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},e.prototype.map=function(r){var t,n,o=[];try{for(var i=qh(this.entries()),a=i.next();!a.done;a=i.next()){var s=Hh(a.value,2),c=s[0],u=s[1];o.push(r(u,c,this))}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return o},e.prototype.entries=function(){var r;return zh(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,[this.keys[r],this._fields[r]]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype.values=function(){var r;return zh(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,this._fields[r]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype[Symbol.iterator]=function(){var r;return zh(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,this._fields[r]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype.toObject=function(){var r,t,n={};try{for(var o=qh(this.entries()),i=o.next();!i.done;i=o.next()){var a=Hh(i.value,2),s=a[0],c=a[1];n[s]=c}}catch(u){r={error:u}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(r)throw r.error}}return n},e.prototype.get=function(r){var t;if(typeof r!="number"){if(t=this._fieldLookup[r],t===void 0)throw(0,ub.newError)("This record has no field with key '".concat(r.toString(),"', available keys are: [")+this.keys.toString()+"].")}else t=r;if(t>this._fields.length-1||t<0)throw(0,ub.newError)("This record has no field with index '"+t.toString()+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[t]},e.prototype.has=function(r){return typeof r=="number"?r>=0&&r<this._fields.length:this._fieldLookup[r]!==void 0},e}();d_.default=oA;var No={};Object.defineProperty(No,"__esModule",{value:!0});No.isPoint=No.Point=void 0;var Qs=ee,Iw="__isPoint__",Rw=function(){function e(r,t,n,o){this.srid=(0,Qs.assertNumberOrInteger)(r,"SRID"),this.x=(0,Qs.assertNumber)(t,"X coordinate"),this.y=(0,Qs.assertNumber)(n,"Y coordinate"),this.z=o==null?o:(0,Qs.assertNumber)(o,"Z coordinate"),Object.freeze(this)}return e.prototype.toString=function(){return this.z!=null&&!isNaN(this.z)?"Point{srid=".concat(fn(this.srid),", x=").concat(fn(this.x),", y=").concat(fn(this.y),", z=").concat(fn(this.z),"}"):"Point{srid=".concat(fn(this.srid),", x=").concat(fn(this.x),", y=").concat(fn(this.y),"}")},e}();No.Point=Rw;function fn(e){return Number.isInteger(e)?e.toString()+".0":e.toString()}Object.defineProperty(Rw.prototype,Iw,{value:!0,enumerable:!1,configurable:!1,writable:!1});function iA(e){var r=e;return e!=null&&r[Iw]===!0}No.isPoint=iA;var Je={},ne={},Dr={};Object.defineProperty(Dr,"__esModule",{value:!0});Dr.FailedObserver=Dr.CompletedObserver=void 0;var aA=function(){function e(){}return e.prototype.subscribe=function(r){sa(r,r.onKeys,[]),sa(r,r.onCompleted,{})},e.prototype.cancel=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.prepareToHandleSingleResponse=function(){},e.prototype.markCompleted=function(){},e.prototype.onError=function(r){throw new Error("CompletedObserver not supposed to call onError",{cause:r})},e}();Dr.CompletedObserver=aA;var uA=function(){function e(r){var t=r.error,n=r.onError;this._error=t,this._beforeError=n,this._observers=[],this.onError(t)}return e.prototype.subscribe=function(r){sa(r,r.onError,this._error),this._observers.push(r)},e.prototype.onError=function(r){sa(this,this._beforeError,r),this._observers.forEach(function(t){return sa(t,t.onError,r)})},e.prototype.cancel=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.markCompleted=function(){},e.prototype.prepareToHandleSingleResponse=function(){},e}();Dr.FailedObserver=uA;function sa(e,r,t){r!=null&&r.bind(e)(t)}var Yr={},sA=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),cA=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),lA=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&sA(r,e,t);return cA(r,e),r},fA=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},dA=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.Bookmarks=void 0;var sb=lA(ee),hA="bookmarks",jw=function(){function e(r){this._values=vA(r)}return e.empty=function(){return pA},e.prototype.isEmpty=function(){return this._values.length===0},e.prototype.values=function(){return this._values},e.prototype[Symbol.iterator]=function(){return this._values[Symbol.iterator]()},e.prototype.asBeginTransactionParameters=function(){var r;return this.isEmpty()?{}:(r={},r[hA]=this._values,r)},e}();Yr.Bookmarks=jw;var pA=new jw(null);function vA(e){if(e==null||e==="")return[];if(sb.isString(e))return[e];if(Array.isArray(e)){for(var r=new Set,t=$w(e),n=0;n<t.length;n++){var o=t[n];if(o!=null){if(!sb.isString(o))throw new TypeError("Bookmark value should be a string, given: '".concat(o,"'"));r.add(o)}}return dA([],fA(r),!1)}throw new TypeError("Bookmarks should either be a string or a string array, given: '".concat(e,"'"))}function $w(e){return e.reduce(function(r,t){return Array.isArray(t)?r.concat($w(t)):r.concat(t)},[])}var x={};Object.defineProperty(x,"__esModule",{value:!0});x.TELEMETRY_APIS=x.BOLT_PROTOCOL_V5_8=x.BOLT_PROTOCOL_V5_7=x.BOLT_PROTOCOL_V5_6=x.BOLT_PROTOCOL_V5_5=x.BOLT_PROTOCOL_V5_4=x.BOLT_PROTOCOL_V5_3=x.BOLT_PROTOCOL_V5_2=x.BOLT_PROTOCOL_V5_1=x.BOLT_PROTOCOL_V5_0=x.BOLT_PROTOCOL_V4_4=x.BOLT_PROTOCOL_V4_3=x.BOLT_PROTOCOL_V4_2=x.BOLT_PROTOCOL_V4_1=x.BOLT_PROTOCOL_V4_0=x.BOLT_PROTOCOL_V3=x.BOLT_PROTOCOL_V2=x.BOLT_PROTOCOL_V1=x.DEFAULT_POOL_MAX_SIZE=x.DEFAULT_POOL_ACQUISITION_TIMEOUT=x.DEFAULT_CONNECTION_TIMEOUT_MILLIS=x.ACCESS_MODE_WRITE=x.ACCESS_MODE_READ=x.FETCH_ALL=void 0;var _A=-1;x.FETCH_ALL=_A;var yA=60*1e3;x.DEFAULT_POOL_ACQUISITION_TIMEOUT=yA;var bA=100;x.DEFAULT_POOL_MAX_SIZE=bA;var mA=3e4;x.DEFAULT_CONNECTION_TIMEOUT_MILLIS=mA;var gA="READ";x.ACCESS_MODE_READ=gA;var wA="WRITE";x.ACCESS_MODE_WRITE=wA;var OA=1;x.BOLT_PROTOCOL_V1=OA;var EA=2;x.BOLT_PROTOCOL_V2=EA;var SA=3;x.BOLT_PROTOCOL_V3=SA;var TA=4;x.BOLT_PROTOCOL_V4_0=TA;var PA=4.1;x.BOLT_PROTOCOL_V4_1=PA;var CA=4.2;x.BOLT_PROTOCOL_V4_2=CA;var AA=4.3;x.BOLT_PROTOCOL_V4_3=AA;var IA=4.4;x.BOLT_PROTOCOL_V4_4=IA;var RA=5;x.BOLT_PROTOCOL_V5_0=RA;var jA=5.1;x.BOLT_PROTOCOL_V5_1=jA;var $A=5.2;x.BOLT_PROTOCOL_V5_2=$A;var NA=5.3;x.BOLT_PROTOCOL_V5_3=NA;var kA=5.4;x.BOLT_PROTOCOL_V5_4=kA;var MA=5.5;x.BOLT_PROTOCOL_V5_5=MA;var DA=5.6;x.BOLT_PROTOCOL_V5_6=DA;var LA=5.7;x.BOLT_PROTOCOL_V5_7=LA;var UA=5.8;x.BOLT_PROTOCOL_V5_8=UA;var FA={MANAGED_TRANSACTION:0,UNMANAGED_TRANSACTION:1,AUTO_COMMIT_TRANSACTION:2,EXECUTE_QUERY:3};x.TELEMETRY_APIS=FA;var Lt={},Gn={},BA=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ho;Object.defineProperty(Gn,"__esModule",{value:!0});Gn.Logger=void 0;var Nw=ue,Zp="error",Qp="warn",ba="info",Xp="debug",xA=ba,Mc=(ho={},ho[Zp]=0,ho[Qp]=1,ho[ba]=2,ho[Xp]=3,ho),kw=function(){function e(r,t){this._level=r,this._loggerFunction=t}return e.create=function(r){if((r==null?void 0:r.logging)!=null){var t=r.logging,n=zA(t),o=qA(t);return new e(n,o)}return this.noOp()},e.noOp=function(){return WA},e.prototype.isErrorEnabled=function(){return Xs(this._level,Zp)},e.prototype.error=function(r){this.isErrorEnabled()&&this._loggerFunction(Zp,r)},e.prototype.isWarnEnabled=function(){return Xs(this._level,Qp)},e.prototype.warn=function(r){this.isWarnEnabled()&&this._loggerFunction(Qp,r)},e.prototype.isInfoEnabled=function(){return Xs(this._level,ba)},e.prototype.info=function(r){this.isInfoEnabled()&&this._loggerFunction(ba,r)},e.prototype.isDebugEnabled=function(){return Xs(this._level,Xp)},e.prototype.debug=function(r){this.isDebugEnabled()&&this._loggerFunction(Xp,r)},e}();Gn.Logger=kw;var VA=function(e){BA(r,e);function r(){return e.call(this,ba,function(t,n){})||this}return r.prototype.isErrorEnabled=function(){return!1},r.prototype.error=function(t){},r.prototype.isWarnEnabled=function(){return!1},r.prototype.warn=function(t){},r.prototype.isInfoEnabled=function(){return!1},r.prototype.info=function(t){},r.prototype.isDebugEnabled=function(){return!1},r.prototype.debug=function(t){},r}(kw),WA=new VA;function Xs(e,r){return Mc[e]>=Mc[r]}function zA(e){if((e==null?void 0:e.level)!=null){var r=e.level,t=Mc[r];if(t==null&&t!==0)throw(0,Nw.newError)("Illegal logging level: ".concat(r,". Supported levels are: ").concat(Object.keys(Mc).toString()));return r}return xA}function qA(e){var r,t;if((e==null?void 0:e.logger)!=null){var n=e.logger;if(n!=null&&typeof n=="function")return n}throw(0,Nw.newError)("Illegal logger function: ".concat((t=(r=e==null?void 0:e.logger)===null||r===void 0?void 0:r.toString())!==null&&t!==void 0?t:"undefined"))}var Mw=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ca=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},la=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.EMPTY_CONNECTION_HOLDER=Lt.ReadOnlyConnectionHolder=Lt.ConnectionHolder=void 0;var HA=ue,GA=ee,KA=x,cb=Yr,YA=Gn,h_=function(){function e(r){var t=r.mode,n=r.database,o=n===void 0?"":n,i=r.bookmarks,a=r.connectionProvider,s=r.impersonatedUser,c=r.onDatabaseNameResolved,u=r.getConnectionAcquistionBookmarks,l=r.auth,d=r.log;this._mode=t??KA.ACCESS_MODE_WRITE,this._closed=!1,this._database=o!=null?(0,GA.assertString)(o,"database"):"",this._bookmarks=i??cb.Bookmarks.empty(),this._connectionProvider=a,this._impersonatedUser=s,this._referenceCount=0,this._connectionPromise=Promise.resolve(null),this._onDatabaseNameResolved=c,this._auth=l,this._log=d,this._logError=this._logError.bind(this),this._getConnectionAcquistionBookmarks=u??function(){return Promise.resolve(cb.Bookmarks.empty())}}return e.prototype.mode=function(){return this._mode},e.prototype.database=function(){return this._database},e.prototype.setDatabase=function(r){this._database=r},e.prototype.bookmarks=function(){return this._bookmarks},e.prototype.connectionProvider=function(){return this._connectionProvider},e.prototype.referenceCount=function(){return this._referenceCount},e.prototype.initializeConnection=function(r){if(this._referenceCount===0&&this._connectionProvider!=null)this._connectionPromise=this._createConnectionPromise(this._connectionProvider,r);else return this._referenceCount++,!1;return this._referenceCount++,!0},e.prototype._createConnectionPromise=function(r,t){return ca(this,void 0,void 0,function(){var n,o,i;return la(this,function(a){switch(a.label){case 0:return o=(n=r).acquireConnection,i={accessMode:this._mode,database:this._database},[4,this._getBookmarks()];case 1:return[4,o.apply(n,[(i.bookmarks=a.sent(),i.impersonatedUser=this._impersonatedUser,i.onDatabaseNameResolved=this._onDatabaseNameResolved,i.auth=this._auth,i.homeDb=t,i)])];case 2:return[2,a.sent()]}})})},e.prototype._getBookmarks=function(){return ca(this,void 0,void 0,function(){return la(this,function(r){switch(r.label){case 0:return[4,this._getConnectionAcquistionBookmarks()];case 1:return[2,r.sent()]}})})},e.prototype.getConnection=function(){return this._connectionPromise},e.prototype.releaseConnection=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount--,this._referenceCount===0?this._releaseConnection():this._connectionPromise)},e.prototype.close=function(r){return this._closed=!0,this._referenceCount===0?this._connectionPromise:(this._referenceCount=0,this._releaseConnection(r))},e.prototype.log=function(){return this._log},e.prototype._releaseConnection=function(r){return this._connectionPromise=this._connectionPromise.then(function(t){return t!=null?t.isOpen()&&(t.hasOngoingObservableRequests()||r===!0)?t.resetAndFlush().catch(XA).then(function(){return t.release().then(function(){return null})}):t.release().then(function(){return null}):Promise.resolve(null)}).catch(this._logError),this._connectionPromise},e.prototype._logError=function(r){return this._log.isWarnEnabled()&&this._log.warn("ConnectionHolder got an error while releasing the connection. Error ".concat(r,". Stacktrace: ").concat(r.stack)),null},e}();Lt.ConnectionHolder=h_;var Dw=function(e){Mw(r,e);function r(t){var n=e.call(this,{mode:t.mode(),database:t.database(),bookmarks:t.bookmarks(),getConnectionAcquistionBookmarks:t._getConnectionAcquistionBookmarks,connectionProvider:t.connectionProvider(),log:t.log()})||this;return n._connectionHolder=t,n}return r.prototype.initializeConnection=function(){return this._connectionHolder.referenceCount()!==0},r.prototype.getConnection=function(){return this._connectionHolder.getConnection()},r.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},r.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},r}(h_);Lt.ReadOnlyConnectionHolder=Dw;Lt.default=Dw;var ZA=function(e){Mw(r,e);function r(){return e.call(this,{log:YA.Logger.create({})})||this}return r.prototype.mode=function(){},r.prototype.database=function(){},r.prototype.initializeConnection=function(){return!0},r.prototype.getConnection=function(){return ca(this,void 0,void 0,function(){return la(this,function(t){switch(t.label){case 0:return[4,Promise.reject((0,HA.newError)("This connection holder does not serve connections"))];case 1:return[2,t.sent()]}})})},r.prototype.releaseConnection=function(){return ca(this,void 0,void 0,function(){return la(this,function(t){switch(t.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,t.sent()]}})})},r.prototype.close=function(){return ca(this,void 0,void 0,function(){return la(this,function(t){switch(t.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,t.sent()]}})})},r}(h_),QA=new ZA;Lt.EMPTY_CONNECTION_HOLDER=QA;function XA(e){return null}var Zo={},JA=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),eI=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),tI=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&JA(r,e,t);return eI(r,e),r};Object.defineProperty(Zo,"__esModule",{value:!0});Zo.TxConfig=void 0;var ma=tI(ee),rI=ue,nI=xe,Lw=function(){function e(r,t){sI(r),this.timeout=iI(r,t),this.metadata=uI(r)}return e.empty=function(){return oI},e.prototype.isEmpty=function(){return Object.values(this).every(function(r){return r==null})},e}();Zo.TxConfig=Lw;var oI=new Lw({});function iI(e,r){if(ma.isObject(e)&&e.timeout!=null){ma.assertNumberOrInteger(e.timeout,"Transaction timeout"),aI(e)&&(r==null?void 0:r.isInfoEnabled())===!0&&(r==null||r.info("Transaction timeout expected to be an integer, got: ".concat(e.timeout,". The value will be rounded up.")));var t=(0,nI.int)(e.timeout,{ceilFloat:!0});if(t.isNegative())throw(0,rI.newError)("Transaction timeout should not be negative");return t}return null}function aI(e){return typeof e.timeout=="number"&&!Number.isInteger(e.timeout)}function uI(e){if(ma.isObject(e)&&e.metadata!=null){var r=e.metadata;if(ma.assertObject(r,"config.metadata"),Object.keys(r).length!==0)return r}return null}function sI(e){e!=null&&ma.assertObject(e,"Transaction config")}var Na={},Jp=f&&f.__assign||function(){return Jp=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Jp.apply(this,arguments)},cI=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},lI=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},fI=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},dI=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(Na,"__esModule",{value:!0});Na.TransactionExecutor=void 0;var Ui=ue,hI=x,pI=30*1e3,vI=1e3,_I=2,yI=.2;function bI(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return setTimeout.apply(void 0,dI([e,r],fI(t),!1))}function mI(e){return clearTimeout(e)}var gI=function(){function e(r,t,n,o,i){i===void 0&&(i={setTimeout:bI,clearTimeout:mI}),this._maxRetryTimeMs=Js(r,pI),this._initialRetryDelayMs=Js(t,vI),this._multiplier=Js(n,_I),this._jitterFactor=Js(o,yI),this._setTimeout=i.setTimeout,this._clearTimeout=i.clearTimeout,this._inFlightTimeoutIds=[],this.pipelineBegin=!1,this.telemetryApi=hI.TELEMETRY_APIS.MANAGED_TRANSACTION,this._verifyAfterConstruction()}return e.prototype.execute=function(r,t,n){var o=this,i={apiTransactionConfig:{api:this.telemetryApi,onTelemetrySuccess:function(){i.apiTransactionConfig=void 0}}};return new Promise(function(a,s){o._executeTransactionInsidePromise(r,t,a,s,n,i).catch(s)}).catch(function(a){var s=Date.now(),c=o._initialRetryDelayMs;return o._retryTransactionPromise(r,t,a,s,c,n,i)})},e.prototype.close=function(){var r=this;this._inFlightTimeoutIds.forEach(function(t){return r._clearTimeout(t)}),this._inFlightTimeoutIds=[]},e.prototype._retryTransactionPromise=function(r,t,n,o,i,a,s){var c=this,u=Date.now()-o;return u>this._maxRetryTimeMs||!(0,Ui.isRetriableError)(n)?Promise.reject(n):new Promise(function(l,d){var h=c._computeDelayWithJitter(i),p=c._setTimeout(function(){c._inFlightTimeoutIds=c._inFlightTimeoutIds.filter(function(v){return v!==p}),c._executeTransactionInsidePromise(r,t,l,d,a,s).catch(d)},h);c._inFlightTimeoutIds.push(p)}).catch(function(l){var d=i*c._multiplier;return c._retryTransactionPromise(r,t,l,o,d,a,s)})},e.prototype._executeTransactionInsidePromise=function(r,t,n,o,i,a){return cI(this,void 0,void 0,function(){var s,c,u,l,d,h,p,v=this;return lI(this,function(y){switch(y.label){case 0:return y.trys.push([0,4,,5]),c=r((a==null?void 0:a.apiTransactionConfig)!=null?Jp({},a==null?void 0:a.apiTransactionConfig):void 0),this.pipelineBegin?(u=c,[3,3]):[3,1];case 1:return[4,c];case 2:u=y.sent(),y.label=3;case 3:return s=u,[3,5];case 4:return l=y.sent(),o(l),[2];case 5:return d=i??function(_){return _},h=d(s),p=this._safeExecuteTransactionWork(h,t),p.then(function(_){return v._handleTransactionWorkSuccess(_,s,n,o)}).catch(function(_){return v._handleTransactionWorkFailure(_,s,o)}),[2]}})})},e.prototype._safeExecuteTransactionWork=function(r,t){try{var n=t(r);return Promise.resolve(n)}catch(o){return Promise.reject(o)}},e.prototype._handleTransactionWorkSuccess=function(r,t,n,o){t.isOpen()?t.commit().then(function(){n(r)}).catch(function(i){o(i)}):n(r)},e.prototype._handleTransactionWorkFailure=function(r,t,n){t.isOpen()?t.rollback().catch(function(o){}).then(function(){return n(r)}).catch(n):n(r)},e.prototype._computeDelayWithJitter=function(r){var t=r*this._jitterFactor,n=r-t,o=r+t;return Math.random()*(o-n)+n},e.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,Ui.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs.toString());if(this._initialRetryDelayMs<0)throw(0,Ui.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs.toString());if(this._multiplier<1)throw(0,Ui.newError)("Multiplier should be >= 1.0: "+this._multiplier.toString());if(this._jitterFactor<0||this._jitterFactor>1)throw(0,Ui.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor.toFixed())},e}();Na.TransactionExecutor=gI;function Js(e,r){return e??r}var ht={},Dc=f&&f.__assign||function(){return Dc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Dc.apply(this,arguments)},Uw=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(ht,"__esModule",{value:!0});ht.Url=ht.formatIPv6Address=ht.formatIPv4Address=ht.defaultPortForScheme=ht.parseDatabaseUrl=void 0;var wI=ee,OI=7687,EI=7474,SI=7473,Fw=function(){function e(r,t,n,o,i){this.scheme=r,this.host=t,this.port=n,this.hostAndPort=o,this.query=i}return e}();ht.Url=Fw;function TI(e){var r;(0,wI.assertString)(e,"URL");var t=CI(e),n=DI(t.url),o=t.schemeMissing?null:AI(n.scheme),i=II(n.host),a=NI(i),s=RI(n.port,o),c="".concat(a,":").concat(s),u=jI((r=n.query)!==null&&r!==void 0?r:PI(n.resourceName),e);return new Fw(o,i,s,c,u)}ht.parseDatabaseUrl=TI;function PI(e){if(typeof e!="string")return null;var r=Uw(e.split("?"),2),t=r[1];return t}function CI(e){return e=e.trim(),e.includes("://")?{schemeMissing:!1,url:e}:{schemeMissing:!0,url:"none://".concat(e)}}function AI(e){return e!=null?(e=e.trim(),e.charAt(e.length-1)===":"&&(e=e.substring(0,e.length-1)),e):null}function II(e,r){if(e==null)throw new Error("Unable to extract host from null or undefined URL");return e.trim()}function RI(e,r){var t=typeof e=="string"?parseInt(e,10):e;return t!=null&&!isNaN(t)?t:xw(r)}function jI(e,r){var t=e!=null?$I(e):null,n={};return t!=null&&t.split("&").forEach(function(o){var i=o.split("=");if(i.length!==2)throw new Error("Invalid parameters: '".concat(i.toString(),"' in URL '").concat(r,"'."));var a=lb(i[0],"key",r),s=lb(i[1],"value",r);if(n[a]!==void 0)throw new Error("Duplicated query parameters with key '".concat(a,"' in URL '").concat(r,"'"));n[a]=s}),n}function $I(e){return e=(e??"").trim(),(e==null?void 0:e.charAt(0))==="?"&&(e=e.substring(1,e.length)),e}function lb(e,r,t){if(e=(e??"").trim(),e==="")throw new Error("Illegal empty ".concat(r," in URL query '").concat(t,"'"));return e}function Bw(e){var r=e.charAt(0)==="[",t=e.charAt(e.length-1)==="]";if(!r&&!t)return"[".concat(e,"]");if(r&&t)return e;throw new Error("Illegal IPv6 address ".concat(e))}function NI(e){if(e===""||e==null)throw new Error("Illegal host ".concat(e));var r=e.includes(":");return r?Bw(e):e}function kI(e,r){return"".concat(e,":").concat(r)}ht.formatIPv4Address=kI;function MI(e,r){var t=Bw(e);return"".concat(t,":").concat(r)}ht.formatIPv6Address=MI;function xw(e){return e==="http"?EI:e==="https"?SI:OI}ht.defaultPortForScheme=xw;function DI(e){function r(s,c){var u=s.indexOf(c);return u>=0?[s.substring(0,u),s[u],s.substring(u+1)]:[s,"",""]}function t(s,c){var u=s.lastIndexOf(c);return u>=0?[s.substring(0,u),s[u],s.substring(u+1)]:["","",s]}function n(s,c,u){var l=r(s,c),d=r(l[2],u);return[d[0],d[2]]}function o(s){var c={},u;u=t(s,"@"),u[1]==="@"&&(c.userInfo=decodeURIComponent(u[0]),s=u[2]);var l=Uw(n(s,"[","]"),2),d=l[0],h=l[1];return d!==""?(c.host=d,u=r(h,":")):(u=r(s,":"),c.host=u[0]),u[1]===":"&&(c.port=u[2]),c}var i={},a;return a=r(e,":"),a[1]===":"&&(i.scheme=decodeURIComponent(a[0]),e=a[2]),a=r(e,"#"),a[1]==="#"&&(i.fragment=decodeURIComponent(a[2]),e=a[0]),a=r(e,"?"),a[1]==="?"&&(i.query=a[2],e=a[0]),e.startsWith("//")?(a=r(e.substr(2),"/"),i=Dc(Dc({},i),o(a[0])),i.path=a[1]+a[2]):i.path=e,i}var ka={},LI=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),UI=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),FI=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&LI(r,e,t);return UI(r,e),r};Object.defineProperty(ka,"__esModule",{value:!0});ka.ServerAddress=void 0;var Gh=ee,BI=FI(ht),xI=function(){function e(r,t,n,o){this._host=(0,Gh.assertString)(r,"host"),this._resolved=t!=null?(0,Gh.assertString)(t,"resolved"):null,this._port=(0,Gh.assertNumber)(n,"port"),this._hostPort=o,this._stringValue=t!=null?"".concat(o,"(").concat(t,")"):"".concat(o)}return e.prototype.host=function(){return this._host},e.prototype.resolvedHost=function(){return this._resolved!=null?this._resolved:this._host},e.prototype.port=function(){return this._port},e.prototype.resolveWith=function(r){return new e(this._host,r,this._port,this._hostPort)},e.prototype.asHostPort=function(){return this._hostPort},e.prototype.asKey=function(){return this._hostPort},e.prototype.toString=function(){return this._stringValue},e.fromUrl=function(r){var t=BI.parseDatabaseUrl(r);return new e(t.host,null,t.port,t.hostAndPort)},e}();ka.ServerAddress=xI;var ko={},p_={};Object.defineProperty(p_,"__esModule",{value:!0});var VI=function(){function e(){}return e.prototype.resolve=function(){throw new Error("Abstract function")},e.prototype._resolveToItself=function(r){return Promise.resolve([r])},e}();p_.default=VI;var wl={};Object.defineProperty(wl,"__esModule",{value:!0});var WI=ka;function zI(e){return Promise.resolve([e])}var qI=function(){function e(r){this._resolverFunction=r??zI}return e.prototype.resolve=function(r){var t=this;return new Promise(function(n){return n(t._resolverFunction(r.asHostPort()))}).then(function(n){if(!Array.isArray(n))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(n));return n.map(function(o){return WI.ServerAddress.fromUrl(o)})})},e}();wl.default=qI;var Vw=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ko,"__esModule",{value:!0});ko.ConfiguredCustomResolver=ko.BaseHostNameResolver=void 0;var HI=Vw(p_);ko.BaseHostNameResolver=HI.default;var GI=Vw(wl);ko.ConfiguredCustomResolver=GI.default;var Ww={},Ol={};Object.defineProperty(Ol,"__esModule",{value:!0});Ol.fromVersion=void 0;function KI(e,r){r===void 0&&(r=function(){return{get userAgent(){var i;return i==null?void 0:i.userAgent}}});var t=r(),n=t.userAgent!=null?t.userAgent.split("(")[1].split(")")[0]:void 0,o=t.userAgent||void 0;return{product:"neo4j-javascript/".concat(e),platform:n,languageDetails:o}}Ol.fromVersion=KI;(function(e){var r=f&&f.__createBinding||(Object.create?function(n,o,i,a){a===void 0&&(a=i);var s=Object.getOwnPropertyDescriptor(o,i);(!s||("get"in s?!o.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(n,a,s)}:function(n,o,i,a){a===void 0&&(a=i),n[a]=o[i]}),t=f&&f.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&r(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),t(Ol,e)})(Ww);var zw={},Lr={};Object.defineProperty(Lr,"__esModule",{value:!0});Lr.DEFAULT_ACQUISITION_TIMEOUT=Lr.DEFAULT_MAX_SIZE=void 0;var Pc=100;Lr.DEFAULT_MAX_SIZE=Pc;var Cc=60*1e3;Lr.DEFAULT_ACQUISITION_TIMEOUT=Cc;var YI=function(){function e(r,t){this.maxSize=fb(r,Pc),this.acquisitionTimeout=fb(t,Cc)}return e.defaultConfig=function(){return new e(Pc,Cc)},e.fromDriverConfig=function(r){var t=ev(r.maxConnectionPoolSize)?r.maxConnectionPoolSize:Pc,n=ev(r.connectionAcquisitionTimeout)?r.connectionAcquisitionTimeout:Cc;return new e(t,n)},e}();Lr.default=YI;function fb(e,r){return ev(e)?e:r}function ev(e){return e===0||e!=null}var v_={},gt=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},wt=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},ZI=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(v_,"__esModule",{value:!0});var QI=ZI(Lr),db=ue,XI=Gn,JI=function(){function e(r){var t=r.create,n=t===void 0?function(S,E,T){return gt(w,void 0,void 0,function(){return wt(this,function(C){switch(C.label){case 0:return[4,Promise.reject(new Error("Not implemented"))];case 1:return[2,C.sent()]}})})}:t,o=r.destroy,i=o===void 0?function(S){return gt(w,void 0,void 0,function(){return wt(this,function(E){switch(E.label){case 0:return[4,Promise.resolve()];case 1:return[2,E.sent()]}})})}:o,a=r.validateOnAcquire,s=a===void 0?function(S,E){return!0}:a,c=r.validateOnRelease,u=c===void 0?function(S){return!0}:c,l=r.installIdleObserver,d=l===void 0?function(S,E){}:l,h=r.removeIdleObserver,p=h===void 0?function(S){}:h,v=r.config,y=v===void 0?QI.default.defaultConfig():v,_=r.log,b=_===void 0?XI.Logger.noOp():_,w=this;this._create=n,this._destroy=i,this._validateOnAcquire=s,this._validateOnRelease=u,this._installIdleObserver=d,this._removeIdleObserver=p,this._maxSize=y.maxSize,this._acquisitionTimeout=y.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=b,this._closed=!1}return e.prototype.acquire=function(r,t,n){return gt(this,void 0,void 0,function(){var o,i,a,s=this;return wt(this,function(c){switch(c.label){case 0:return o=t.asKey(),i=this._acquireRequests,a=i[o],a==null&&(i[o]=[]),[4,new Promise(function(u,l){var d=setTimeout(function(){var p=i[o];if(p!=null&&(i[o]=p.filter(function(_){return _!==h})),!h.isCompleted()){var v=s.activeResourceCount(t),y=s.has(t)?s._pools[o].length:0;h.reject((0,db.newError)("Connection acquisition timed out in ".concat(s._acquisitionTimeout," ms. Pool status: Active conn count = ").concat(v,", Idle conn count = ").concat(y,".")))}},s._acquisitionTimeout);typeof d=="object"&&d.unref();var h=new eR(o,r,n,u,l,d,s._log);i[o].push(h),s._processPendingAcquireRequests(t)})];case 1:return[2,c.sent()]}})})},e.prototype.purge=function(r){return gt(this,void 0,void 0,function(){return wt(this,function(t){switch(t.label){case 0:return[4,this._purgeKey(r.asKey())];case 1:return[2,t.sent()]}})})},e.prototype.apply=function(r,t){var n=r.asKey();n in this._pools&&this._pools[n].apply(t)},e.prototype.close=function(){return gt(this,void 0,void 0,function(){var r=this;return wt(this,function(t){switch(t.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(n){return gt(r,void 0,void 0,function(){return wt(this,function(o){switch(o.label){case 0:return[4,this._purgeKey(n)];case 1:return[2,o.sent()]}})})})).then()];case 1:return[2,t.sent()]}})})},e.prototype.keepAll=function(r){return gt(this,void 0,void 0,function(){var t,n,o,i=this;return wt(this,function(a){switch(a.label){case 0:return t=r.map(function(s){return s.asKey()}),n=Object.keys(this._pools),o=n.filter(function(s){return!t.includes(s)}),[4,Promise.all(o.map(function(s){return gt(i,void 0,void 0,function(){return wt(this,function(c){switch(c.label){case 0:return[4,this._purgeKey(s)];case 1:return[2,c.sent()]}})})})).then()];case 1:return[2,a.sent()]}})})},e.prototype.has=function(r){return r.asKey()in this._pools},e.prototype.activeResourceCount=function(r){var t;return(t=this._activeResourceCounts[r.asKey()])!==null&&t!==void 0?t:0},e.prototype._getOrInitializePoolFor=function(r){var t=this._pools[r];return t==null&&(t=new tR,this._pools[r]=t,this._pendingCreates[r]=0),t},e.prototype._acquire=function(r,t,n){return gt(this,void 0,void 0,function(){var o,i,a,s,c,l,u,l,d,h=this;return wt(this,function(p){switch(p.label){case 0:if(this._closed)throw(0,db.newError)("Pool is closed, it is no more able to serve requests.");if(o=t.asKey(),i=this._getOrInitializePoolFor(o),n)return[3,10];p.label=1;case 1:if(!(i.length>0))return[3,10];if(a=i.pop(),a==null)return[3,1];hb(o,this._activeResourceCounts),this._removeIdleObserver!=null&&this._removeIdleObserver(a),s=!1,p.label=2;case 2:return p.trys.push([2,4,,6]),[4,this._validateOnAcquire(r,a)];case 3:return s=p.sent(),[3,6];case 4:return c=p.sent(),Kh(o,this._activeResourceCounts),i.removeInUse(a),[4,this._destroy(a)];case 5:throw p.sent(),c;case 6:return s?(this._log.isDebugEnabled()&&this._log.debug("".concat(a," acquired from the pool ").concat(o)),[2,{resource:a,pool:i}]):[3,7];case 7:return Kh(o,this._activeResourceCounts),i.removeInUse(a),[4,this._destroy(a)];case 8:p.sent(),p.label=9;case 9:return[3,1];case 10:if(this._maxSize>0&&(l=this.activeResourceCount(t)+this._pendingCreates[o],l>=this._maxSize))return[2,{resource:null,pool:i}];this._pendingCreates[o]=this._pendingCreates[o]+1,p.label=11;case 11:return p.trys.push([11,,15,16]),l=this.activeResourceCount(t)+i.length,l>=this._maxSize&&n?(d=i.pop(),d==null?[3,13]:(this._removeIdleObserver!=null&&this._removeIdleObserver(d),i.removeInUse(d),[4,this._destroy(d)])):[3,13];case 12:p.sent(),p.label=13;case 13:return[4,this._create(r,t,function(v,y){return gt(h,void 0,void 0,function(){return wt(this,function(_){switch(_.label){case 0:return[4,this._release(v,y,i)];case 1:return[2,_.sent()]}})})})];case 14:return u=p.sent(),i.pushInUse(u),hb(o,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(u," created for the pool ").concat(o)),[3,16];case 15:return this._pendingCreates[o]=this._pendingCreates[o]-1,[7];case 16:return[2,{resource:u,pool:i}]}})})},e.prototype._release=function(r,t,n){return gt(this,void 0,void 0,function(){var o,i=this;return wt(this,function(a){switch(a.label){case 0:o=r.asKey(),a.label=1;case 1:return a.trys.push([1,,9,10]),n.isActive()?[4,this._validateOnRelease(t)]:[3,6];case 2:return a.sent()?[3,4]:(this._log.isDebugEnabled()&&this._log.debug("".concat(t," destroyed and can't be released to the pool ").concat(o," because it is not functional")),n.removeInUse(t),[4,this._destroy(t)]);case 3:return a.sent(),[3,5];case 4:this._installIdleObserver!=null&&this._installIdleObserver(t,{onError:function(s){i._log.debug("Idle connection ".concat(t," destroyed because of error: ").concat(s));var c=i._pools[o];c!=null&&(i._pools[o]=c.filter(function(u){return u!==t}),c.removeInUse(t)),i._destroy(t).catch(function(){})}}),n.push(t),this._log.isDebugEnabled()&&this._log.debug("".concat(t," released to the pool ").concat(o)),a.label=5;case 5:return[3,8];case 6:return this._log.isDebugEnabled()&&this._log.debug("".concat(t," destroyed and can't be released to the pool ").concat(o," because pool has been purged")),n.removeInUse(t),[4,this._destroy(t)];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:return Kh(o,this._activeResourceCounts),this._processPendingAcquireRequests(r),[7];case 10:return[2]}})})},e.prototype._purgeKey=function(r){return gt(this,void 0,void 0,function(){var t,n,o;return wt(this,function(i){switch(i.label){case 0:if(t=this._pools[r],n=[],t==null)return[3,2];for(;t.length>0;)o=t.pop(),o!=null&&(this._removeIdleObserver!=null&&this._removeIdleObserver(o),n.push(this._destroy(o)));return t.close(),delete this._pools[r],[4,Promise.all(n)];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype._processPendingAcquireRequests=function(r){var t=this,n=r.asKey(),o=this._acquireRequests[n];if(o!=null){var i=o.shift();i!=null?this._acquire(i.context,r,i.requireNew).catch(function(a){return i.reject(a),{resource:null,pool:null}}).then(function(a){var s=a.resource,c=a.pool;s!=null&&c!=null?i.isCompleted()?t._release(r,s,c).catch(function(u){t._log.isDebugEnabled()&&t._log.debug("".concat(s," could not be release back to the pool. Cause: ").concat(u))}):i.resolve(s):i.isCompleted()||(t._acquireRequests[n]==null&&(t._acquireRequests[n]=[]),t._acquireRequests[n].unshift(i))}).catch(function(a){return i.reject(a)}):delete this._acquireRequests[n]}},e}();function hb(e,r){var t,n=(t=r[e])!==null&&t!==void 0?t:0;r[e]=n+1}function Kh(e,r){var t,n=(t=r[e])!==null&&t!==void 0?t:0,o=n-1;o>0?r[e]=o:delete r[e]}var eR=function(){function e(r,t,n,o,i,a,s){this._key=r,this._context=t,this._resolve=o,this._reject=i,this._timeoutId=a,this._log=s,this._completed=!1,this._config=n??{}}return Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requireNew",{get:function(){var r;return(r=this._config.requireNew)!==null&&r!==void 0?r:!1},enumerable:!1,configurable:!0}),e.prototype.isCompleted=function(){return this._completed},e.prototype.resolve=function(r){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(r," acquired from the pool ").concat(this._key)),this._resolve(r))},e.prototype.reject=function(r){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(r))},e}(),tR=function(){function e(){this._active=!0,this._elements=[],this._elementsInUse=new Set}return e.prototype.isActive=function(){return this._active},e.prototype.close=function(){this._active=!1,this._elements=[],this._elementsInUse=new Set},e.prototype.filter=function(r){return this._elements=this._elements.filter(r),this},e.prototype.apply=function(r){this._elements.forEach(r),this._elementsInUse.forEach(r)},Object.defineProperty(e.prototype,"length",{get:function(){return this._elements.length},enumerable:!1,configurable:!0}),e.prototype.pop=function(){var r=this._elements.pop();return r!=null&&this._elementsInUse.add(r),r},e.prototype.push=function(r){return this._elementsInUse.delete(r),this._elements.push(r)},e.prototype.pushInUse=function(r){this._elementsInUse.add(r)},e.prototype.removeInUse=function(r){this._elementsInUse.delete(r)},e}();v_.default=JI;(function(e){var r=f&&f.__createBinding||(Object.create?function(s,c,u,l){l===void 0&&(l=u);var d=Object.getOwnPropertyDescriptor(c,u);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(s,l,d)}:function(s,c,u,l){l===void 0&&(l=u),s[l]=c[u]}),t=f&&f.__setModuleDefault||(Object.create?function(s,c){Object.defineProperty(s,"default",{enumerable:!0,value:c})}:function(s,c){s.default=c}),n=f&&f.__importStar||function(s){if(s&&s.__esModule)return s;var c={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&r(c,s,u);return t(c,s),c},o=f&&f.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_MAX_SIZE=e.DEFAULT_ACQUISITION_TIMEOUT=e.PoolConfig=e.Pool=void 0;var i=n(Lr);e.PoolConfig=i.default,Object.defineProperty(e,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return i.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(e,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return i.DEFAULT_MAX_SIZE}});var a=o(v_);e.Pool=a.default,e.default=a.default})(zw);var rR=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),nR=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),at=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&rR(r,e,t);return nR(r,e),r};Object.defineProperty(ne,"__esModule",{value:!0});ne.pool=ne.boltAgent=ne.objectUtil=ne.resolver=ne.serverAddress=ne.urlUtil=ne.logger=ne.transactionExecutor=ne.txConfig=ne.connectionHolder=ne.constants=ne.bookmarks=ne.observer=ne.temporalUtil=ne.util=void 0;var oR=at(ee);ne.util=oR;var iR=at(l_);ne.temporalUtil=iR;var aR=at(Dr);ne.observer=aR;var uR=at(Yr);ne.bookmarks=uR;var sR=at(x);ne.constants=sR;var cR=at(Lt);ne.connectionHolder=cR;var lR=at(Zo);ne.txConfig=lR;var fR=at(Na);ne.transactionExecutor=fR;var dR=at(Gn);ne.logger=dR;var hR=at(ht);ne.urlUtil=hR;var pR=at(ka);ne.serverAddress=pR;var vR=at(ko);ne.resolver=vR;var _R=at(hr);ne.objectUtil=_R;var yR=at(Ww);ne.boltAgent=yR;var bR=at(zw);ne.pool=bR;var Ee={},ga=f&&f.__assign||function(){return ga=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ga.apply(this,arguments)},mR=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),gR=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),wR=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&mR(r,e,t);return gR(r,e),r},OR=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},ER=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.buildNotificationsFromMetadata=Ee.buildGqlStatusObjectFromMetadata=Ee.polyfillNotification=Ee.polyfillGqlStatusObject=Ee.GqlStatusObject=Ee.Notification=Ee.notificationClassification=Ee.notificationCategory=Ee.notificationSeverityLevel=void 0;var SR=wR(Ft),Yh=ne,ea=u_,tv={WARNING:{gql_status:"01N42",status_description:"warn: unknown warning"},NO_DATA:{gql_status:"02N42",status_description:"note: no data - unknown subcondition"},INFORMATION:{gql_status:"03N42",status_description:"info: unknown notification"}},Ma={WARNING:"WARNING",INFORMATION:"INFORMATION",UNKNOWN:"UNKNOWN"};Ee.notificationSeverityLevel=Ma;Object.freeze(Ma);var TR=Object.values(Ma),El={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",DEPRECATION:"DEPRECATION",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",GENERIC:"GENERIC",SCHEMA:"SCHEMA",UNKNOWN:"UNKNOWN"};Ee.notificationCategory=El;Object.freeze(El);var PR=Object.values(El),qw=El;Ee.notificationClassification=qw;var Sl=function(){function e(r){this.code=r.code,this.title=r.title,this.description=r.description,this.severity=r.severity,this.position=Kw(r.position),this.severityLevel=Yw(r.severity),this.rawSeverityLevel=r.severity,this.category=Zw(r.category),this.rawCategory=r.category}return e}();Ee.Notification=Sl;var Pn=function(){function e(r){var t;this.gqlStatus=r.gql_status,this.statusDescription=r.status_description,this.diagnosticRecord=(t=r.diagnostic_record)!==null&&t!==void 0?t:{},this.position=this.diagnosticRecord._position!=null?Kw(this.diagnosticRecord._position):void 0,this.severity=Yw(this.diagnosticRecord._severity),this.rawSeverity=this.diagnosticRecord._severity,this.classification=Zw(this.diagnosticRecord._classification),this.rawClassification=this.diagnosticRecord._classification,this.isNotification=r.neo4j_code!=null,Object.freeze(this)}return Object.defineProperty(e.prototype,"diagnosticRecordAsJsonString",{get:function(){return SR.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),e}();Ee.GqlStatusObject=Pn;function Hw(e){var r,t,n;if(e.neo4j_code!=null)return new Sl({code:e.neo4j_code,title:e.title,description:e.description,severity:(r=e.diagnostic_record)===null||r===void 0?void 0:r._severity,category:(t=e.diagnostic_record)===null||t===void 0?void 0:t._classification,position:(n=e.diagnostic_record)===null||n===void 0?void 0:n._position})}Ee.polyfillNotification=Hw;function Gw(e){var r,t=e.severity===Ma.WARNING?tv.WARNING:tv.INFORMATION,n={gql_status:t.gql_status,status_description:(r=e.description)!==null&&r!==void 0?r:t.status_description,neo4j_code:e.code,title:e.title,diagnostic_record:ga({},ea.rawPolyfilledDiagnosticRecord)};return e.severity!=null&&(n.diagnostic_record._severity=e.severity),e.category!=null&&(n.diagnostic_record._classification=e.category),e.position!=null&&(n.diagnostic_record._position=e.position),new Pn(n)}Ee.polyfillGqlStatusObject=Gw;var ta={SUCCESS:new Pn({gql_status:"00000",status_description:"note: successful completion",diagnostic_record:ea.rawPolyfilledDiagnosticRecord}),NO_DATA:new Pn({gql_status:"02000",status_description:"note: no data",diagnostic_record:ea.rawPolyfilledDiagnosticRecord}),NO_DATA_UNKNOWN_SUBCONDITION:new Pn(ga(ga({},tv.NO_DATA),{diagnostic_record:ea.rawPolyfilledDiagnosticRecord})),OMITTED_RESULT:new Pn({gql_status:"00001",status_description:"note: successful completion - omitted result",diagnostic_record:ea.rawPolyfilledDiagnosticRecord})};Object.freeze(ta);function CR(e){var r,t;function n(a){return(a==null?void 0:a.have_records_streamed)===!0?ta.SUCCESS:(a==null?void 0:a.has_keys)===!1?ta.OMITTED_RESULT:(a==null?void 0:a.pulled)===!0?ta.NO_DATA:ta.NO_DATA_UNKNOWN_SUBCONDITION}if(e.statuses!=null)return e.statuses.map(function(a){return new Pn(a)});var o=n(e.stream_summary),i=ER([o],OR((t=(r=e.notifications)===null||r===void 0?void 0:r.map(Gw))!==null&&t!==void 0?t:[]),!1);return i.sort(function(a,s){return pb(a)-pb(s)})}Ee.buildGqlStatusObjectFromMetadata=CR;var AR=Object.freeze({"02":0,"01":1,"00":2});function pb(e){var r,t,n=(r=e.gqlStatus)===null||r===void 0?void 0:r.slice(0,2);return(t=AR[n])!==null&&t!==void 0?t:9999}function IR(e){return e.notifications!=null?e.notifications.map(function(r){return new Sl(r)}):e.statuses!=null?e.statuses.map(Hw).filter(function(r){return r!=null}):[]}Ee.buildNotificationsFromMetadata=IR;function Kw(e){return e==null?{}:{offset:Yh.util.toNumber(e.offset),line:Yh.util.toNumber(e.line),column:Yh.util.toNumber(e.column)}}function Yw(e){return TR.includes(e)?e:Ma.UNKNOWN}function Zw(e){return PR.includes(e)?e:qw.UNKNOWN}Ee.default=Sl;Object.defineProperty(Je,"__esModule",{value:!0});Je.Stats=Je.QueryStatistics=Je.ProfiledPlan=Je.Plan=Je.ServerInfo=Je.queryType=void 0;var rv=ne,vb=Ee,RR=function(){function e(r,t,n,o){var i,a,s;this.query={text:r,parameters:t},this.queryType=n.type,this.counters=new Qw((i=n.stats)!==null&&i!==void 0?i:{}),this.updateStatistics=this.counters,this.plan=n.plan!=null||n.profile!=null?new nv((a=n.plan)!==null&&a!==void 0?a:n.profile):!1,this.profile=n.profile!=null?new ov(n.profile):!1,this.notifications=(0,vb.buildNotificationsFromMetadata)(n),this.gqlStatusObjects=(0,vb.buildGqlStatusObjectFromMetadata)(n),this.server=new Xw(n.server,o),this.resultConsumedAfter=n.result_consumed_after,this.resultAvailableAfter=n.result_available_after,this.database={name:(s=n.db)!==null&&s!==void 0?s:null}}return e.prototype.hasPlan=function(){return this.plan instanceof nv},e.prototype.hasProfile=function(){return this.profile instanceof ov},e}(),nv=function(){function e(r){this.operatorType=r.operatorType,this.identifiers=r.identifiers,this.arguments=r.args,this.children=r.children!=null?r.children.map(function(t){return new e(t)}):[]}return e}();Je.Plan=nv;var ov=function(){function e(r){this.operatorType=r.operatorType,this.identifiers=r.identifiers,this.arguments=r.args,this.dbHits=po("dbHits",r),this.rows=po("rows",r),this.pageCacheMisses=po("pageCacheMisses",r),this.pageCacheHits=po("pageCacheHits",r),this.pageCacheHitRatio=po("pageCacheHitRatio",r),this.time=po("time",r),this.children=r.children!=null?r.children.map(function(t){return new e(t)}):[]}return e.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},e}();Je.ProfiledPlan=ov;var jR=function(){function e(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0}return e}();Je.Stats=jR;var Qw=function(){function e(r){var t=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(r).forEach(function(n){var o=n.replace(/(-\w)/g,function(i){return i[1].toUpperCase()});o in t._stats?t._stats[o]=rv.util.toNumber(r[n]):o==="systemUpdates"?t._systemUpdates=rv.util.toNumber(r[n]):o==="containsSystemUpdates"?t._containsSystemUpdates=r[n]:o==="containsUpdates"&&(t._containsUpdates=r[n])}),this._stats=Object.freeze(this._stats)}return e.prototype.containsUpdates=function(){var r=this;return this._containsUpdates!==void 0?this._containsUpdates:Object.keys(this._stats).reduce(function(t,n){return t+r._stats[n]},0)>0},e.prototype.updates=function(){return this._stats},e.prototype.containsSystemUpdates=function(){return this._containsSystemUpdates!==void 0?this._containsSystemUpdates:this._systemUpdates>0},e.prototype.systemUpdates=function(){return this._systemUpdates},e}();Je.QueryStatistics=Qw;var Xw=function(){function e(r,t){r!=null&&(this.address=r.address,this.agent=r.version),this.protocolVersion=t}return e}();Je.ServerInfo=Xw;function po(e,r,t){if(t===void 0&&(t=0),r!==!1&&e in r){var n=r[e];return rv.util.toNumber(n)}else return t}var $R={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"};Je.queryType=$R;Je.default=RR;var pr={};Object.defineProperty(pr,"__esModule",{value:!0});pr.notificationFilterDisabledClassification=pr.notificationFilterDisabledCategory=pr.notificationFilterMinimumSeverityLevel=void 0;var Jw={OFF:"OFF",WARNING:"WARNING",INFORMATION:"INFORMATION"};pr.notificationFilterMinimumSeverityLevel=Jw;Object.freeze(Jw);var __={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",DEPRECATION:"DEPRECATION",GENERIC:"GENERIC",SCHEMA:"SCHEMA"};pr.notificationFilterDisabledCategory=__;Object.freeze(__);var NR=__;pr.notificationFilterDisabledClassification=NR;var kR=function(){function e(){throw this.minimumSeverityLevel=void 0,this.disabledCategories=void 0,this.disabledClassifications=void 0,new Error("Not implemented")}return e}();pr.default=kR;var Da={},dn=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},hn=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},MR=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},eO;Object.defineProperty(Da,"__esModule",{value:!0});var DR=MR(Je),tO=ne,Fi=ue,LR=tO.connectionHolder.EMPTY_CONNECTION_HOLDER,UR=function(e){console.log("Uncaught error when processing result: "+e)},FR=function(e){},BR=function(e){},xR=function(){function e(r,t,n,o,i){i===void 0&&(i={high:Number.MAX_VALUE,low:Number.MAX_VALUE}),this[eO]="Result",this._stack=VR(),this._streamObserverPromise=r,this._p=null,this._query=t,this._parameters=n??{},this._connectionHolder=o??LR,this._keys=null,this._summary=null,this._error=null,this._watermarks=i}return e.prototype.keys=function(){var r=this;return this._keys!==null?Promise.resolve(this._keys):this._error!==null?Promise.reject(this._error):new Promise(function(t,n){r._streamObserverPromise.then(function(o){return o.subscribe(r._decorateObserver({onKeys:function(i){return t(i)},onError:function(i){return n(i)}}))}).catch(n)})},e.prototype.summary=function(){var r=this;return this._summary!==null?Promise.resolve(this._summary):this._error!==null?Promise.reject(this._error):new Promise(function(t,n){r._streamObserverPromise.then(function(o){o.cancel(),o.subscribe(r._decorateObserver({onCompleted:function(i){return t(i)},onError:function(i){return n(i)}}))}).catch(n)})},e.prototype._getOrCreatePromise=function(){var r=this;return this._p==null&&(this._p=new Promise(function(t,n){var o=[],i={onNext:function(a){o.push(a)},onCompleted:function(a){t({records:o,summary:a})},onError:function(a){n(a)}};r.subscribe(i)})),this._p},e.prototype[Symbol.asyncIterator]=function(){var r=this;if(!this.isOpen()){var t=(0,Fi.newError)("Result is already consumed");return{next:function(){return Promise.reject(t)},peek:function(){return Promise.reject(t)}}}var n={paused:!0,firstRun:!0,finished:!1},o=function(){var s,c;if(n.streaming!=null){var u=(c=(s=n.queuedObserver)===null||s===void 0?void 0:s.size)!==null&&c!==void 0?c:0,l=u>=r._watermarks.high,d=u<=r._watermarks.low;l&&!n.paused?(n.paused=!0,n.streaming.pause()):(d&&n.paused||n.firstRun&&!l)&&(n.firstRun=!1,n.paused=!1,n.streaming.resume())}},i=function(){return dn(r,void 0,void 0,function(){var s;return hn(this,function(c){switch(c.label){case 0:return n.queuedObserver!==void 0?[3,2]:(n.queuedObserver=this._createQueuedResultObserver(o),s=n,[4,this._subscribe(n.queuedObserver,!0).catch(function(){})]);case 1:s.streaming=c.sent(),o(),c.label=2;case 2:return[2,n.queuedObserver]}})})},a=function(s){if(s===void 0)throw(0,Fi.newError)("InvalidState: Result stream finished without Summary",Fi.PROTOCOL_ERROR);return!0};return{next:function(){return dn(r,void 0,void 0,function(){var s,c;return hn(this,function(u){switch(u.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:n.summary}]:[4,i()];case 1:return s=u.sent(),[4,s.dequeue()];case 2:return c=u.sent(),c.done===!0&&(n.finished=c.done,n.summary=c.value),[2,c]}})})},return:function(s){return dn(r,void 0,void 0,function(){var c,u,l;return hn(this,function(d){switch(d.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:s??n.summary}]:((l=n.streaming)===null||l===void 0||l.cancel(),[4,i()]);case 1:return c=d.sent(),[4,c.dequeueUntilDone()];case 2:return u=d.sent(),n.finished=!0,u.value=s??u.value,n.summary=u.value,[2,u]}})})},peek:function(){return dn(r,void 0,void 0,function(){var s;return hn(this,function(c){switch(c.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:n.summary}]:[4,i()];case 1:return s=c.sent(),[4,s.head()];case 2:return[2,c.sent()]}})})}}},e.prototype.then=function(r,t){return this._getOrCreatePromise().then(r,t)},e.prototype.catch=function(r){return this._getOrCreatePromise().catch(r)},e.prototype.finally=function(r){return this._getOrCreatePromise().finally(r)},e.prototype.subscribe=function(r){this._subscribe(r).catch(function(){})},e.prototype.isOpen=function(){return this._summary===null&&this._error===null},e.prototype._subscribe=function(r,t){t===void 0&&(t=!1);var n=this._decorateObserver(r);return this._streamObserverPromise.then(function(o){return t&&o.pause(),o.subscribe(n),o}).catch(function(o){return n.onError!=null&&n.onError(o),Promise.reject(o)})},e.prototype._decorateObserver=function(r){var t=this,n,o,i,a=(n=r.onCompleted)!==null&&n!==void 0?n:FR,s=(o=r.onError)!==null&&o!==void 0?o:UR,c=(i=r.onKeys)!==null&&i!==void 0?i:BR,u=function(h){t._releaseConnectionAndGetSummary(h).then(function(p){return t._summary!==null?a.call(r,t._summary):(t._summary=p,a.call(r,p))}).catch(s)},l=function(h){t._connectionHolder.releaseConnection().then(function(){WR(h,t._stack),t._error=h,s.call(r,h)}).catch(s)},d=function(h){return t._keys=h,c.call(r,h)};return{onNext:r.onNext!=null?r.onNext.bind(r):void 0,onKeys:d,onCompleted:u,onError:l}},e.prototype._cancel=function(){this._summary===null&&this._error===null&&this._streamObserverPromise.then(function(r){return r.cancel()}).catch(function(){})},e.prototype._releaseConnectionAndGetSummary=function(r){var t=tO.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),n=t.validatedQuery,o=t.params,i=this._connectionHolder;return i.getConnection().then(function(a){return i.releaseConnection().then(function(){return a==null?void 0:a.getProtocolVersion()})},function(a){}).then(function(a){return new DR.default(n,o,r,a)})},e.prototype._createQueuedResultObserver=function(r){var t=this;function n(){var u={};return u.promise=new Promise(function(l,d){u.resolve=l,u.reject=d}),u}function o(u){return u instanceof Error}function i(){var u;return dn(this,void 0,void 0,function(){var l;return hn(this,function(d){switch(d.label){case 0:if(a.length>0){if(l=(u=a.shift())!==null&&u!==void 0?u:(0,Fi.newError)("Unexpected empty buffer",Fi.PROTOCOL_ERROR),r(),o(l))throw l;return[2,l]}return s.resolvable=n(),[4,s.resolvable.promise];case 1:return[2,d.sent()]}})})}var a=[],s={resolvable:null},c={onNext:function(u){c._push({done:!1,value:u})},onCompleted:function(u){c._push({done:!0,value:u})},onError:function(u){c._push(u)},_push:function(u){if(s.resolvable!==null){var l=s.resolvable;s.resolvable=null,o(u)?l.reject(u):l.resolve(u)}else a.push(u),r()},dequeue:i,dequeueUntilDone:function(){return dn(t,void 0,void 0,function(){var u;return hn(this,function(l){switch(l.label){case 0:return[4,i()];case 1:return u=l.sent(),u.done===!0?[2,u]:[3,0];case 2:return[2]}})})},head:function(){return dn(t,void 0,void 0,function(){var u,u,l;return hn(this,function(d){switch(d.label){case 0:if(a.length>0){if(u=a[0],o(u))throw u;return[2,u]}s.resolvable=n(),d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,s.resolvable.promise];case 2:return u=d.sent(),a.unshift(u),[2,u];case 3:throw l=d.sent(),a.unshift(l),l;case 4:return r(),[7];case 5:return[2]}})})},get size(){return a.length}};return c},e}();eO=Symbol.toStringTag;function VR(){var e=new Error("");return e.stack!=null?e.stack.replace(/^Error(\n\r)*/,""):null}function WR(e,r){r!=null&&(e.stack=e.toString()+`
`+r)}Da.default=xR;var Tl={};Object.defineProperty(Tl,"__esModule",{value:!0});var zR=function(){function e(r,t,n){this.keys=r,this.records=t,this.summary=n}return e}();Tl.default=zR;var La={};Object.defineProperty(La,"__esModule",{value:!0});La.Releasable=void 0;var qR=function(){function e(){}return e.prototype.release=function(){throw new Error("Not implemented")},e}();La.Releasable=qR;var HR=function(){function e(){}return e.prototype.acquireConnection=function(r){throw Error("Not implemented")},e.prototype.supportsMultiDb=function(){throw Error("Not implemented")},e.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},e.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},e.prototype.supportsSessionAuth=function(){throw Error("Not implemented")},e.prototype.SSREnabled=function(){return!1},e.prototype.verifyConnectivityAndGetServerInfo=function(r){throw Error("Not implemented")},e.prototype.verifyAuthentication=function(r){throw Error("Not implemented")},e.prototype.getNegotiatedProtocolVersion=function(){throw Error("Not Implemented")},e.prototype.close=function(){throw Error("Not implemented")},e}();La.default=HR;var y_={};Object.defineProperty(y_,"__esModule",{value:!0});var GR=function(){function e(){}return e.prototype.beginTransaction=function(r){throw new Error("Not implemented")},e.prototype.run=function(r,t,n){throw new Error("Not implemented")},e.prototype.commitTransaction=function(r){throw new Error("Not implemented")},e.prototype.rollbackTransaction=function(r){throw new Error("Not implemented")},e.prototype.resetAndFlush=function(){throw new Error("Not implemented")},e.prototype.isOpen=function(){throw new Error("Not implemented")},e.prototype.getProtocolVersion=function(){throw new Error("Not implemented")},e.prototype.hasOngoingObservableRequests=function(){throw new Error("Not implemented")},e}();y_.default=GR;var Pl={},_b=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},yb=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},KR=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pl,"__esModule",{value:!0});var YR=ee,fa=Lt,Ac=Yr,ZR=Zo,$t=Dr,kt=ue,rO=KR(Da),QR=function(){function e(r){var t=r.connectionHolder,n=r.onClose,o=r.onBookmarks,i=r.onConnection,a=r.reactive,s=r.fetchSize,c=r.impersonatedUser,u=r.highRecordWatermark,l=r.lowRecordWatermark,d=r.notificationFilter,h=r.apiTelemetryConfig,p=this;this._connectionHolder=t,this._reactive=a,this._state=Et.ACTIVE,this._onClose=n,this._onBookmarks=o,this._onConnection=i,this._onError=this._onErrorCallback.bind(this),this._fetchSize=s,this._onComplete=this._onCompleteCallback.bind(this),this._results=[],this._impersonatedUser=c,this._lowRecordWatermak=l,this._highRecordWatermark=u,this._bookmarks=Ac.Bookmarks.empty(),this._notificationFilter=d,this._apiTelemetryConfig=h,this._acceptActive=function(){},this._activePromise=new Promise(function(v,y){p._acceptActive=v})}return e.prototype._begin=function(r,t,n){var o=this;this._connectionHolder.getConnection().then(function(i){return _b(o,void 0,void 0,function(){var a,s=this;return yb(this,function(c){switch(c.label){case 0:return this._onConnection(),i==null?[3,2]:(a=this,[4,r()]);case 1:return a._bookmarks=c.sent(),[2,i.beginTransaction({bookmarks:this._bookmarks,txConfig:t,mode:this._connectionHolder.mode(),database:this._connectionHolder.database(),impersonatedUser:this._impersonatedUser,notificationFilter:this._notificationFilter,apiTelemetryConfig:this._apiTelemetryConfig,beforeError:function(u){n!=null&&n.onError(u),s._onError(u).catch(function(){})},afterComplete:function(u){n!=null&&n.onComplete(u),u.db!==void 0&&(n==null?void 0:n.onDB)!=null&&n.onDB(u.db),s._onComplete(u)}})];case 2:throw(0,kt.newError)("No connection available")}})})}).catch(function(i){n!=null&&n.onError(i),o._onError(i).catch(function(){})}).finally(function(){return o._acceptActive()})},e.prototype.run=function(r,t){var n=(0,YR.validateQueryAndParameters)(r,t),o=n.validatedQuery,i=n.params,a=this._state.run(o,i,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize,highRecordWatermark:this._highRecordWatermark,lowRecordWatermark:this._lowRecordWatermak,preparationJob:this._activePromise});return this._results.push(a),a},e.prototype.commit=function(){var r=this,t=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:function(n){return r._onCompleteCallback(n,r._bookmarks)},onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=t.state,this._onClose(),new Promise(function(n,o){t.result.subscribe({onCompleted:function(){return n()},onError:function(i){return o(i)}})})},e.prototype.rollback=function(){var r=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=r.state,this._onClose(),new Promise(function(t,n){r.result.subscribe({onCompleted:function(){return t()},onError:function(o){return n(o)}})})},e.prototype.isOpen=function(){return this._state===Et.ACTIVE},e.prototype.close=function(){return _b(this,void 0,void 0,function(){return yb(this,function(r){switch(r.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._onErrorCallback=function(r){return this._state===Et.FAILED?Promise.resolve(null):(this._state=Et.FAILED,this._onClose(),this._results.forEach(function(t){t.isOpen()&&t._streamObserverPromise.then(function(n){return n.onError(r)}).catch(function(n){})}),this._connectionHolder.releaseConnection())},e.prototype._onCompleteCallback=function(r,t){this._onBookmarks(new Ac.Bookmarks(r==null?void 0:r.bookmark),t??Ac.Bookmarks.empty(),r==null?void 0:r.db)},e}(),Et={ACTIVE:{commit:function(e){var r=e.connectionHolder,t=e.onError,n=e.onComplete,o=e.onConnection,i=e.pendingResults,a=e.preparationJob;return{result:bb(!0,r,t,n,o,i,a),state:Et.SUCCEEDED}},rollback:function(e){var r=e.connectionHolder,t=e.onError,n=e.onComplete,o=e.onConnection,i=e.pendingResults,a=e.preparationJob;return{result:bb(!1,r,t,n,o,i,a),state:Et.ROLLED_BACK}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError,i=t.onComplete,a=t.onConnection,s=t.reactive,c=t.fetchSize,u=t.highRecordWatermark,l=t.lowRecordWatermark,d=t.preparationJob,h=d??Promise.resolve(),p=n.getConnection().then(function(v){return h.then(function(){return v})}).then(function(v){if(a(),v!=null)return v.run(e,r,{bookmarks:Ac.Bookmarks.empty(),txConfig:ZR.TxConfig.empty(),beforeError:o,afterComplete:i,reactive:s,fetchSize:c,highRecordWatermark:u,lowRecordWatermark:l});throw(0,kt.newError)("No connection available")}).catch(function(v){return new $t.FailedObserver({error:v,onError:o})});return qt(p,e,r,n,u,l)}},FAILED:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:qt(new $t.FailedObserver({error:(0,kt.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:t}),"COMMIT",{},r,0,0),state:Et.FAILED}},rollback:function(e){var r=e.connectionHolder;return e.onError,e.onComplete,{result:qt(new $t.CompletedObserver,"ROLLBACK",{},r,0,0),state:Et.FAILED}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError;return t.onComplete,qt(new $t.FailedObserver({error:(0,kt.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:o}),e,r,n,0,0)}},SUCCEEDED:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:qt(new $t.FailedObserver({error:(0,kt.newError)("Cannot commit this transaction, because it has already been committed."),onError:t}),"COMMIT",{},fa.EMPTY_CONNECTION_HOLDER,0,0),state:Et.SUCCEEDED,connectionHolder:r}},rollback:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:qt(new $t.FailedObserver({error:(0,kt.newError)("Cannot rollback this transaction, because it has already been committed."),onError:t}),"ROLLBACK",{},fa.EMPTY_CONNECTION_HOLDER,0,0),state:Et.SUCCEEDED,connectionHolder:r}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError;return t.onComplete,qt(new $t.FailedObserver({error:(0,kt.newError)("Cannot run query in this transaction, because it has already been committed."),onError:o}),e,r,n,0,0)}},ROLLED_BACK:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:qt(new $t.FailedObserver({error:(0,kt.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:t}),"COMMIT",{},r,0,0),state:Et.ROLLED_BACK}},rollback:function(e){var r=e.connectionHolder;return e.onError,e.onComplete,{result:qt(new $t.FailedObserver({error:(0,kt.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},r,0,0),state:Et.ROLLED_BACK}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError;return t.onComplete,qt(new $t.FailedObserver({error:(0,kt.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:o}),e,r,n,0,0)}}};function bb(e,r,t,n,o,i,a){var s=a??Promise.resolve(),c=r.getConnection().then(function(u){return s.then(function(){return u})}).then(function(u){return o(),i.forEach(function(l){return l._cancel()}),Promise.all(i.map(function(l){return l.summary()})).then(function(l){if(u!=null)return e?u.commitTransaction({beforeError:t,afterComplete:n}):u.rollbackTransaction({beforeError:t,afterComplete:n});throw(0,kt.newError)("No connection available")})}).catch(function(u){return new $t.FailedObserver({error:u,onError:t})});return new rO.default(c,e?"COMMIT":"ROLLBACK",{},r,{high:Number.MAX_VALUE,low:Number.MAX_VALUE})}function qt(e,r,t,n,o,i){return n===void 0&&(n=fa.EMPTY_CONNECTION_HOLDER),new rO.default(Promise.resolve(e),r,t,new fa.ReadOnlyConnectionHolder(n??fa.EMPTY_CONNECTION_HOLDER),{low:i,high:o})}Pl.default=QR;var Cl={};Object.defineProperty(Cl,"__esModule",{value:!0});var XR=function(){function e(r){var t=r.run;this._run=t}return e.fromTransaction=function(r){return new e({run:r.run.bind(r)})},e.prototype.run=function(r,t){return this._run(r,t)},e}();Cl.default=XR;var Al={},JR=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Lc=f&&f.__assign||function(){return Lc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Lc.apply(this,arguments)},ej=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},nO;Object.defineProperty(Al,"__esModule",{value:!0});var tj=ej(Pl),rj=function(e){JR(r,e);function r(t){var n=t.connectionHolder,o=t.onClose,i=t.onBookmarks,a=t.onConnection,s=t.reactive,c=t.fetchSize,u=t.impersonatedUser,l=t.highRecordWatermark,d=t.lowRecordWatermark,h=t.notificationFilter,p=t.apiTelemetryConfig,v=t.onDbCallback,y=e.call(this,{connectionHolder:n,onClose:o,onBookmarks:i,onConnection:a,reactive:s,fetchSize:c,impersonatedUser:u,highRecordWatermark:l,lowRecordWatermark:d,notificationFilter:h,apiTelemetryConfig:p})||this;return y[nO]="TransactionPromise",y._onDbCallback=v,y}return r.prototype.then=function(t,n){return this._getOrCreateBeginPromise().then(t,n)},r.prototype.catch=function(t){return this._getOrCreateBeginPromise().catch(t)},r.prototype.finally=function(t){return this._getOrCreateBeginPromise().finally(t)},r.prototype._getOrCreateBeginPromise=function(){var t=this;return this._beginPromise==null&&(this._beginPromise=new Promise(function(n,o){t._resolve=n,t._reject=o,t._beginError!=null&&o(t._beginError),t._beginMetadata!=null&&n(t._toTransaction())})),this._beginPromise},r.prototype._toTransaction=function(){return Lc(Lc({},this),{run:e.prototype.run.bind(this),commit:e.prototype.commit.bind(this),rollback:e.prototype.rollback.bind(this),close:e.prototype.close.bind(this),isOpen:e.prototype.isOpen.bind(this),_begin:this._begin.bind(this)})},r.prototype._begin=function(t,n){return e.prototype._begin.call(this,t,n,{onError:this._onBeginError.bind(this),onComplete:this._onBeginMetadata.bind(this),onDB:this._onDbCallback})},r.prototype._onBeginError=function(t){this._beginError=t,this._reject!=null&&this._reject(t)},r.prototype._onBeginMetadata=function(t){this._beginMetadata=t??{},this._resolve!=null&&this._resolve(this._toTransaction())},r}(tj.default);nO=Symbol.toStringTag;Al.default=rj;var Il={},Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.cacheKey=void 0;var nj=Ft;function oj(e,r){var t;return r!=null?"basic:"+r:e===void 0?"DEFAULT":e.scheme==="basic"?"basic:"+((t=e.principal)!==null&&t!==void 0?t:""):e.scheme==="kerberos"?"kerberos:"+e.credentials:e.scheme==="bearer"?"bearer:"+e.credentials:e.scheme==="none"?"none":(0,nj.stringify)(e,{sortedElements:!0})}Ua.cacheKey=oj;var Bi=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},xi=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},ec=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},tc=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))},b_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Il,"__esModule",{value:!0});var ij=Dr,aj=ee,ut=x,pn=ue,uj=b_(Da),mb=Lt,sj=Na,Vi=Yr,Pr=Zo,cj=b_(Al),lj=b_(Cl),fj=Ua,dj=function(){function e(r){var t=r.mode,n=r.connectionProvider,o=r.bookmarks,i=r.database,a=r.config,s=r.reactive,c=r.fetchSize,u=r.impersonatedUser,l=r.bookmarkManager,d=r.notificationFilter,h=r.auth,p=r.log,v=r.homeDatabaseCallback,y;this._mode=t,this._database=i,this._reactive=s,this._fetchSize=c,this._homeDatabaseCallback=v,this._auth=h,this._getConnectionAcquistionBookmarks=this._getConnectionAcquistionBookmarks.bind(this),this._readConnectionHolder=new mb.ConnectionHolder({mode:ut.ACCESS_MODE_READ,auth:h,database:i,bookmarks:o,connectionProvider:n,impersonatedUser:u,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:p}),this._writeConnectionHolder=new mb.ConnectionHolder({mode:ut.ACCESS_MODE_WRITE,auth:h,database:i,bookmarks:o,connectionProvider:n,impersonatedUser:u,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:p}),this._open=!0,this._hasTx=!1,this._impersonatedUser=u,this._lastBookmarks=o??Vi.Bookmarks.empty(),this._configuredBookmarks=this._lastBookmarks,this._transactionExecutor=hj(a),this._databaseNameResolved=this._database!=="";var _=this._calculateWatermaks();this._lowRecordWatermark=_.low,this._highRecordWatermark=_.high,this._results=[],this._bookmarkManager=l,this._notificationFilter=d,this._log=p,this._databaseGuess=a==null?void 0:a.cachedHomeDatabase,this._isRoutingSession=(y=a==null?void 0:a.routingDriver)!==null&&y!==void 0?y:!1}return e.prototype.run=function(r,t,n){var o=this,i=(0,aj.validateQueryAndParameters)(r,t),a=i.validatedQuery,s=i.params,c=n!=null?new Pr.TxConfig(n,this._log):Pr.TxConfig.empty(),u=this._run(a,s,function(l){return Bi(o,void 0,void 0,function(){var d,h=this;return xi(this,function(p){switch(p.label){case 0:return[4,this._bookmarks()];case 1:return d=p.sent(),this._assertSessionIsOpen(),[2,l.run(a,s,{bookmarks:d,txConfig:c,mode:this._mode,database:this._database,apiTelemetryConfig:{api:ut.TELEMETRY_APIS.AUTO_COMMIT_TRANSACTION},impersonatedUser:this._impersonatedUser,afterComplete:function(v){return h._onCompleteCallback(v,d)},reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,onDb:this._onDatabaseNameResolved.bind(this)})]}})})});return this._results.push(u),u},e.prototype._run=function(r,t,n){var o=this._acquireAndConsumeConnection(n),i=o.connectionHolder,a=o.resultPromise,s=a.catch(function(u){return Promise.resolve(new ij.FailedObserver({error:u}))}),c={high:this._highRecordWatermark,low:this._lowRecordWatermark};return new uj.default(s,r,t,i,c)},e.prototype._acquireConnection=function(r){var t=this,n=this._acquireAndConsumeConnection(r),o=n.connectionHolder,i=n.resultPromise;return i.then(function(a){return Bi(t,void 0,void 0,function(){return xi(this,function(s){switch(s.label){case 0:return[4,o.releaseConnection()];case 1:return s.sent(),[2,a]}})})})},e.prototype._acquireAndConsumeConnection=function(r){var t,n=this._connectionHolderWithMode(this._mode);return this._open?!this._hasTx&&n.initializeConnection(this._databaseGuess)?t=n.getConnection().then(function(o){return r(o)}):t=Promise.reject((0,pn.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):t=Promise.reject((0,pn.newError)("Cannot run query in a closed session.")),{connectionHolder:n,resultPromise:t}},e.prototype.beginTransaction=function(r){var t=r,n=Pr.TxConfig.empty();return t!=null&&(n=new Pr.TxConfig(t,this._log)),this._beginTransaction(this._mode,n,{api:ut.TELEMETRY_APIS.UNMANAGED_TRANSACTION})},e.prototype._beginTransaction=function(r,t,n){var o=this;if(!this._open)throw(0,pn.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,pn.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var i=e._validateSessionMode(r),a=this._connectionHolderWithMode(i);a.initializeConnection(this._databaseGuess),this._hasTx=!0;var s=new cj.default({connectionHolder:a,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmarks:function(c,u,l){return o._updateBookmarks(c,u,l)},onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,apiTelemetryConfig:n,onDbCallback:this._onDatabaseNameResolved.bind(this)});return s._begin(function(){return o._bookmarks()},t),s},e.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,pn.newError)("You cannot run more transactions on a closed session.")},e.prototype._transactionClosed=function(){this._hasTx=!1},e.prototype.lastBookmark=function(){return this.lastBookmarks()},e.prototype.lastBookmarks=function(){return this._lastBookmarks.values()},e.prototype._bookmarks=function(){var r;return Bi(this,void 0,void 0,function(){var t;return xi(this,function(n){switch(n.label){case 0:return[4,(r=this._bookmarkManager)===null||r===void 0?void 0:r.getBookmarks()];case 1:return t=n.sent(),t===void 0?[2,this._lastBookmarks]:[2,new Vi.Bookmarks(tc(tc([],ec(t),!1),ec(this._configuredBookmarks),!1))]}})})},e.prototype.readTransaction=function(r,t){var n=new Pr.TxConfig(t,this._log);return this._runTransaction(ut.ACCESS_MODE_READ,n,r)},e.prototype.writeTransaction=function(r,t){var n=new Pr.TxConfig(t,this._log);return this._runTransaction(ut.ACCESS_MODE_WRITE,n,r)},e.prototype._runTransaction=function(r,t,n){var o=this;return this._transactionExecutor.execute(function(i){return o._beginTransaction(r,t,i)},n)},e.prototype.executeRead=function(r,t){var n=new Pr.TxConfig(t,this._log);return this._executeInTransaction(ut.ACCESS_MODE_READ,n,r)},e.prototype.executeWrite=function(r,t){var n=new Pr.TxConfig(t,this._log);return this._executeInTransaction(ut.ACCESS_MODE_WRITE,n,r)},e.prototype._executeInTransaction=function(r,t,n){var o=this;return this._transactionExecutor.execute(function(i){return o._beginTransaction(r,t,i)},n,lj.default.fromTransaction)},e.prototype._onDatabaseNameResolved=function(r){if(this._isRoutingSession&&(this._databaseGuess=r,!this._databaseNameResolved)){var t=r??"";this._database=t,this._readConnectionHolder.setDatabase(t),this._writeConnectionHolder.setDatabase(t),this._databaseNameResolved=!0,this._homeDatabaseCallback!=null&&this._homeDatabaseCallback((0,fj.cacheKey)(this._auth,this._impersonatedUser),r)}},e.prototype._getConnectionAcquistionBookmarks=function(){var r;return Bi(this,void 0,void 0,function(){var t;return xi(this,function(n){switch(n.label){case 0:return[4,(r=this._bookmarkManager)===null||r===void 0?void 0:r.getBookmarks()];case 1:return t=n.sent(),t===void 0?[2,this._lastBookmarks]:[2,new Vi.Bookmarks(tc(tc([],ec(this._configuredBookmarks),!1),ec(t),!1))]}})})},e.prototype._updateBookmarks=function(r,t,n){var o,i,a;r!=null&&!r.isEmpty()&&((o=this._bookmarkManager)===null||o===void 0||o.updateBookmarks((i=t==null?void 0:t.values())!==null&&i!==void 0?i:[],(a=r==null?void 0:r.values())!==null&&a!==void 0?a:[]).catch(function(){}),this._lastBookmarks=r,this._configuredBookmarks=Vi.Bookmarks.empty())},e.prototype.close=function(){return Bi(this,void 0,void 0,function(){return xi(this,function(r){switch(r.label){case 0:return this._open?(this._open=!1,this._results.forEach(function(t){return t._cancel()}),this._transactionExecutor.close(),[4,this._readConnectionHolder.close(this._hasTx)]):[3,3];case 1:return r.sent(),[4,this._writeConnectionHolder.close(this._hasTx)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._connectionHolderWithMode=function(r){if(r===ut.ACCESS_MODE_READ)return this._readConnectionHolder;if(r===ut.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,pn.newError)("Unknown access mode: "+r)},e.prototype._onCompleteCallback=function(r,t){this._updateBookmarks(new Vi.Bookmarks(r.bookmark),t,r.db)},e.prototype._calculateWatermaks=function(){return this._fetchSize===ut.FETCH_ALL?{low:Number.MAX_VALUE,high:Number.MAX_VALUE}:{low:.3*this._fetchSize,high:.7*this._fetchSize}},e.prototype._configureTransactionExecutor=function(r,t){this._transactionExecutor.pipelineBegin=r,this._transactionExecutor.telemetryApi=t},e._validateSessionMode=function(r){var t=r??ut.ACCESS_MODE_WRITE;if(t!==ut.ACCESS_MODE_READ&&t!==ut.ACCESS_MODE_WRITE)throw(0,pn.newError)("Illegal session mode "+t);return t},e}();function hj(e){var r,t=(r=e==null?void 0:e.maxTransactionRetryTime)!==null&&r!==void 0?r:null;return new sj.TransactionExecutor(t)}Il.default=dj;var et={},Qo={},Uc=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Fc=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Zh=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},gb=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},wb=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(Qo,"__esModule",{value:!0});Qo.bookmarkManager=void 0;var pj=function(){function e(){throw new Error("Not implemented")}return e.prototype.updateBookmarks=function(r,t){return Uc(this,void 0,void 0,function(){return Fc(this,function(n){throw new Error("Not implemented")})})},e.prototype.getBookmarks=function(){return Uc(this,void 0,void 0,function(){return Fc(this,function(r){throw new Error("Not implemented")})})},e}();Qo.default=pj;function vj(e){e===void 0&&(e={});var r=new Set(e.initialBookmarks);return new _j(r,e.bookmarksSupplier,e.bookmarksConsumer)}Qo.bookmarkManager=vj;var _j=function(){function e(r,t,n){this._bookmarks=r,this._bookmarksSupplier=t,this._bookmarksConsumer=n}return e.prototype.updateBookmarks=function(r,t){return Uc(this,void 0,void 0,function(){var n,o,i,c,a,s,c,u,l,d,h;return Fc(this,function(p){switch(p.label){case 0:n=this._bookmarks;try{for(o=Zh(r),i=o.next();!i.done;i=o.next())c=i.value,n.delete(c)}catch(v){u={error:v}}finally{try{i&&!i.done&&(l=o.return)&&l.call(o)}finally{if(u)throw u.error}}try{for(a=Zh(t),s=a.next();!s.done;s=a.next())c=s.value,n.add(c)}catch(v){d={error:v}}finally{try{s&&!s.done&&(h=a.return)&&h.call(a)}finally{if(d)throw d.error}}return typeof this._bookmarksConsumer!="function"?[3,2]:[4,this._bookmarksConsumer(wb([],gb(n),!1))];case 1:p.sent(),p.label=2;case 2:return[2]}})})},e.prototype.getBookmarks=function(){var r;return Uc(this,void 0,void 0,function(){var t,n,o,i,a,s,c;return Fc(this,function(u){switch(u.label){case 0:return t=new Set(this._bookmarks),typeof this._bookmarksSupplier!="function"?[3,2]:[4,this._bookmarksSupplier()];case 1:n=(r=u.sent())!==null&&r!==void 0?r:[];try{for(o=Zh(n),i=o.next();!i.done;i=o.next())a=i.value,t.add(a)}catch(l){s={error:l}}finally{try{i&&!i.done&&(c=o.return)&&c.call(o)}finally{if(s)throw s.error}}u.label=2;case 2:return[2,wb([],gb(t),!1)]}})})},e}(),Rl={},jl=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},$l=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},yj=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rl,"__esModule",{value:!0});var bj=yj(Tl),mj=ue,gj=function(){function e(){}return e.prototype.eagerResultTransformer=function(){return Ob},e.prototype.eager=function(){return Ob},e.prototype.mappedResultTransformer=function(r){return Eb(r)},e.prototype.mapped=function(r){return Eb(r)},e.prototype.first=function(){return wj},e.prototype.summary=function(){return Oj},e}(),oO=new gj;Object.freeze(oO);Rl.default=oO;function Ob(e){return jl(this,void 0,void 0,function(){var r,t,n,o;return $l(this,function(i){switch(i.label){case 0:return[4,e];case 1:return r=i.sent(),t=r.summary,n=r.records,[4,e.keys()];case 2:return o=i.sent(),[2,new bj.default(o,n,t)]}})})}function Eb(e){var r=this;if(e==null||e.collect==null&&e.map==null)throw(0,mj.newError)("Requires a map or/and a collect functions.");return function(t){return jl(r,void 0,void 0,function(){return $l(this,function(n){switch(n.label){case 0:return[4,new Promise(function(o,i){var a={records:[],keys:[]};t.subscribe({onKeys:function(s){a.keys=s},onNext:function(s){if(e.map!=null){var c=e.map(s);c!==void 0&&a.records.push(c)}else a.records.push(s)},onCompleted:function(s){if(e.collect!=null)o(e.collect(a.records,s,a.keys));else{var c={records:a.records,summary:s,keys:a.keys};o(c)}},onError:function(s){i(s)}})})];case 1:return[2,n.sent()]}})})}}function wj(e){return jl(this,void 0,void 0,function(){var r,t,n,o;return $l(this,function(i){switch(i.label){case 0:return r=e[Symbol.asyncIterator](),[4,r.next()];case 1:t=i.sent(),n=t.value,o=t.done,i.label=2;case 2:return i.trys.push([2,,3,6]),o===!0?[2,void 0]:[2,n];case 3:return r.return==null?[3,5]:[4,r.return()];case 4:i.sent(),i.label=5;case 5:return[7];case 6:return[2]}})})}function Oj(e){return jl(this,void 0,void 0,function(){return $l(this,function(r){switch(r.label){case 0:return[4,e.summary()];case 1:return[2,r.sent()]}})})}var m_={},Qh=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Xh=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(m_,"__esModule",{value:!0});var Ej=x,Sj=function(){function e(r){this._createSession=r}return e.prototype.execute=function(r,t,n){return Qh(this,void 0,void 0,function(){var o,i,a,s=this;return Xh(this,function(c){switch(c.label){case 0:o=this._createSession({database:r.database,bookmarkManager:r.bookmarkManager,impersonatedUser:r.impersonatedUser,auth:r.auth}),i=Tj(r.signal,"abort",function(){return Qh(s,void 0,void 0,function(){return Xh(this,function(u){switch(u.label){case 0:return[4,o.close()];case 1:return[2,u.sent()]}})})}),o._configureTransactionExecutor(!0,Ej.TELEMETRY_APIS.EXECUTE_QUERY),c.label=1;case 1:return c.trys.push([1,,3,5]),a=r.routing==="READ"?o.executeRead.bind(o):o.executeWrite.bind(o),[4,a(function(u){return Qh(s,void 0,void 0,function(){var l;return Xh(this,function(d){switch(d.label){case 0:return l=u.run(t,n),[4,r.resultTransformer(l)];case 1:return[2,d.sent()]}})})},r.transactionConfig)];case 2:return[2,c.sent()];case 3:return i.uninstall(),[4,o.close()];case 4:return c.sent(),[7];case 5:return[2]}})})},e}();m_.default=Sj;function Tj(e,r,t){return typeof(e==null?void 0:e.addEventListener)=="function"&&e.addEventListener(r,t),{uninstall:function(){typeof(e==null?void 0:e.removeEventListener)=="function"&&e.removeEventListener(r,t)}}}var g_={};Object.defineProperty(g_,"__esModule",{value:!0});var Pj=function(){function e(r){this.maxSize=r,this.pruneCount=Math.max(Math.round(.01*r*Math.log(r)),1),this.map=new Map}return e.prototype.set=function(r,t){this.map.set(r,{database:t,lastUsed:Date.now()}),this._pruneCache()},e.prototype.get=function(r){var t=this.map.get(r);if(t!==void 0)return t.lastUsed=Date.now(),t.database},e.prototype.delete=function(r){this.map.delete(r)},e.prototype._pruneCache=function(){if(this.map.size>this.maxSize)for(var r=Array.from(this.map.entries()).sort(function(n,o){return n[1].lastUsed-o[1].lastUsed}),t=0;t<this.pruneCount;t++)this.map.delete(r[t][0])},e}();g_.default=Pj;var iv=f&&f.__assign||function(){return iv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},iv.apply(this,arguments)},Sb=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Tb=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Fa=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(et,"__esModule",{value:!0});et.QueryConfig=et.SessionConfig=et.routing=et.WRITE=et.READ=et.Driver=void 0;var Pb=Yr,Cj=Fa(wl),Mn=x,Aj=Gn,Cb=Fa(Il),Ij=ee,Rj=Qo,jj=Fa(Rl),$j=Fa(m_),Nj=ue,kj=Fa(g_),Mj=Ua,Dj=60*60*1e3,Lj=1e3,Uj=1e4,Ic=Mn.ACCESS_MODE_READ;et.READ=Ic;var w_=Mn.ACCESS_MODE_WRITE;et.WRITE=w_;var Fj=0,Bj=function(){function e(){this.defaultAccessMode=w_,this.bookmarks=[],this.database="",this.impersonatedUser=void 0,this.auth=void 0,this.fetchSize=void 0,this.bookmarkManager=void 0,this.notificationFilter=void 0}return e}();et.SessionConfig=Bj;var xj="WRITE",Vj="READ",Po={WRITE:xj,READ:Vj};et.routing=Po;Object.freeze(Po);var Wj=function(){function e(){this.routing=Po.WRITE,this.resultTransformer=void 0,this.database="",this.impersonatedUser=void 0,this.bookmarkManager=void 0,this.transactionConfig=void 0,this.auth=void 0,this.signal=void 0}return e}();et.QueryConfig=Wj;var iO=function(){function e(r,t,n,o,i){t===void 0&&(t={}),o===void 0&&(o=function(s){return new Cb.default(s)}),i===void 0&&(i=function(s){return new $j.default(s)}),qj(t);var a=Aj.Logger.create(t);zj(t,a),this._id=Fj++,this._meta=r,this._config=t,this._log=a,this._createConnectionProvider=n,this._createSession=o,this._defaultExecuteQueryBookmarkManager=(0,Rj.bookmarkManager)(),this._queryExecutor=i(this.session.bind(this)),this._connectionProvider=null,this.homeDatabaseCache=new kj.default(Uj),this._afterConstruction()}return Object.defineProperty(e.prototype,"executeQueryBookmarkManager",{get:function(){return this._defaultExecuteQueryBookmarkManager},enumerable:!1,configurable:!0}),e.prototype.executeQuery=function(r,t,n){var o,i,a;return n===void 0&&(n={}),Sb(this,void 0,void 0,function(){var s,c,u;return Tb(this,function(l){switch(l.label){case 0:if(s=n.bookmarkManager===null?void 0:(o=n.bookmarkManager)!==null&&o!==void 0?o:this.executeQueryBookmarkManager,c=(i=n.resultTransformer)!==null&&i!==void 0?i:jj.default.eagerResultTransformer(),u=(a=n.routing)!==null&&a!==void 0?a:Po.WRITE,u!==Po.READ&&u!==Po.WRITE)throw(0,Nj.newError)('Illegal query routing config: "'.concat(u,'"'));return[4,this._queryExecutor.execute({resultTransformer:c,bookmarkManager:s,routing:u,database:n.database,impersonatedUser:n.impersonatedUser,transactionConfig:n.transactionConfig,auth:n.auth,signal:n.signal},r,t)];case 1:return[2,l.sent()]}})})},e.prototype.verifyConnectivity=function(r){var t=r===void 0?{}:r,n=t.database,o=n===void 0?"":n,i=this._getOrCreateConnectionProvider();return i.verifyConnectivityAndGetServerInfo({database:o,accessMode:Ic})},e.prototype.verifyAuthentication=function(r){var t=r===void 0?{}:r,n=t.database,o=t.auth;return Sb(this,void 0,void 0,function(){var i;return Tb(this,function(a){switch(a.label){case 0:return i=this._getOrCreateConnectionProvider(),[4,i.verifyAuthentication({database:n??"system",auth:o,accessMode:Ic})];case 1:return[2,a.sent()]}})})},e.prototype.getServerInfo=function(r){var t=r===void 0?{}:r,n=t.database,o=n===void 0?"":n,i=this._getOrCreateConnectionProvider();return i.verifyConnectivityAndGetServerInfo({database:o,accessMode:Ic})},e.prototype.supportsMultiDb=function(){var r=this._getOrCreateConnectionProvider();return r.supportsMultiDb()},e.prototype.supportsTransactionConfig=function(){var r=this._getOrCreateConnectionProvider();return r.supportsTransactionConfig()},e.prototype.supportsUserImpersonation=function(){var r=this._getOrCreateConnectionProvider();return r.supportsUserImpersonation()},e.prototype.supportsSessionAuth=function(){var r=this._getOrCreateConnectionProvider();return r.supportsSessionAuth()},e.prototype.getNegotiatedProtocolVersion=function(){var r=this._getOrCreateConnectionProvider();return r.getNegotiatedProtocolVersion()},e.prototype.isEncrypted=function(){return this._isEncrypted()},e.prototype._supportsRouting=function(){return this._meta.routing},e.prototype._isEncrypted=function(){return this._config.encrypted===Ij.ENCRYPTION_ON||this._config.encrypted===!0},e.prototype._getTrust=function(){return this._config.trust},e.prototype.session=function(r){var t=r===void 0?{}:r,n=t.defaultAccessMode,o=n===void 0?w_:n,i=t.bookmarks,a=t.database,s=a===void 0?"":a,c=t.impersonatedUser,u=t.fetchSize,l=t.bookmarkManager,d=t.notificationFilter,h=t.auth;return this._newSession({defaultAccessMode:o,bookmarkOrBookmarks:i,database:s,reactive:!1,impersonatedUser:c,fetchSize:aO(u,this._config.fetchSize),bookmarkManager:l,notificationFilter:d,auth:h})},e.prototype.close=function(){return this._log.info("Driver ".concat(this._id," closing")),this._connectionProvider!=null?this._connectionProvider.close():Promise.resolve()},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._afterConstruction=function(){this._log.info("".concat(this._meta.typename," driver ").concat(this._id," created for server address ").concat(this._meta.address.toString()))},e.prototype._homeDatabaseCallback=function(r,t){this.homeDatabaseCache.set(r,t)},e.prototype._newSession=function(r){var t=r.defaultAccessMode,n=r.bookmarkOrBookmarks,o=r.database,i=r.reactive,a=r.impersonatedUser,s=r.fetchSize,c=r.bookmarkManager,u=r.notificationFilter,l=r.auth,d=Cb.default._validateSessionMode(t),h=this._getOrCreateConnectionProvider(),p=this.homeDatabaseCache.get((0,Mj.cacheKey)(l,a)),v=this._homeDatabaseCallback.bind(this),y=n!=null?new Pb.Bookmarks(n):Pb.Bookmarks.empty();return this._createSession({mode:d,database:o??"",connectionProvider:h,bookmarks:y,config:iv({cachedHomeDatabase:p,routingDriver:this._supportsRouting()},this._config),reactive:i,impersonatedUser:a,fetchSize:s,bookmarkManager:c,notificationFilter:u,auth:l,log:this._log,homeDatabaseCallback:v})},e.prototype._getOrCreateConnectionProvider=function(){return this._connectionProvider==null&&(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,Kj(this._config))),this._connectionProvider},e}();et.Driver=iO;function zj(e,r){var t,n,o=e.resolver;if(o!=null&&typeof o!="function")throw new TypeError("Configured resolver should be a function. Got: ".concat(typeof o));if(e.connectionAcquisitionTimeout<e.connectionTimeout&&r.warn('Configuration for "connectionAcquisitionTimeout" should be greater than or equal to "connectionTimeout". Otherwise, the connection acquisition timeout will take precedence for over the connection timeout in scenarios where a new connection is created while it is acquired'),((t=e.notificationFilter)===null||t===void 0?void 0:t.disabledCategories)!=null&&((n=e.notificationFilter)===null||n===void 0?void 0:n.disabledClassifications)!=null)throw new Error(`The notificationFilter can't have both "disabledCategories" and  "disabledClassifications" configured at the same time.`);return e}function qj(e){e.maxConnectionLifetime=Jh(e.maxConnectionLifetime,Dj),e.maxConnectionPoolSize=Jh(e.maxConnectionPoolSize,Mn.DEFAULT_POOL_MAX_SIZE),e.connectionAcquisitionTimeout=Jh(e.connectionAcquisitionTimeout,Mn.DEFAULT_POOL_ACQUISITION_TIMEOUT),e.fetchSize=aO(e.fetchSize,Lj),e.connectionTimeout=Hj(e),e.connectionLivenessCheckTimeout=Gj(e.connectionLivenessCheckTimeout)}function Jh(e,r){var t=parseInt(e,10);return t>0||t===0?t:t<0?Number.MAX_SAFE_INTEGER:r}function aO(e,r){var t=parseInt(e,10);if(t>0||t===Mn.FETCH_ALL)return t;if(t===0||t<0)throw new Error("The fetch size can only be a positive value or ".concat(Mn.FETCH_ALL," for ALL. However fetchSize = ").concat(t));return r}function Hj(e){var r=parseInt(e.connectionTimeout,10);return r===0||!isNaN(r)&&r<0?null:isNaN(r)?Mn.DEFAULT_CONNECTION_TIMEOUT_MILLIS:r}function Gj(e){if(e!=null){var r=parseInt(e,10);if(r<0||Number.isNaN(r))throw new Error("The connectionLivenessCheckTimeout can only be a positive value or 0 for always. However connectionLivenessCheckTimeout = ".concat(r));return r}}function Kj(e){return new Cj.default(e.resolver)}et.default=iO;var Nl={};Object.defineProperty(Nl,"__esModule",{value:!0});var Yj=ue,Zj=Ft,Qj={basic:function(e,r,t){return t!=null?{scheme:"basic",principal:e,credentials:r,realm:t}:{scheme:"basic",principal:e,credentials:r}},kerberos:function(e){return{scheme:"kerberos",principal:"",credentials:e}},bearer:function(e){return{scheme:"bearer",credentials:e}},none:function(){return{scheme:"none"}},custom:function(e,r,t,n,o){var i={scheme:n,principal:e};if(ep(r)&&(i.credentials=r),ep(t)&&(i.realm=t),ep(o)){try{(0,Zj.stringify)(o)}catch(a){throw(0,Yj.newError)("Circular references in custom auth token parameters",void 0,a)}i.parameters=o}return i}};function ep(e){return!(e==null||e===""||Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length===0)}Nl.default=Qj;var vr={},av=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},uv=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Xj=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vr,"__esModule",{value:!0});vr.staticAuthTokenManager=vr.authTokenManagers=vr.AuthTokenAndExpiration=void 0;var Jj=Xj(Nl),e$=ne,t$=function(){function e(){}return e.prototype.getToken=function(){throw new Error("Not Implemented")},e.prototype.handleSecurityException=function(r,t){throw new Error("Not implemented")},e}();vr.default=t$;var r$=function(){function e(){this.token=Jj.default.none(),this.expiration=void 0}return e}();vr.AuthTokenAndExpiration=r$;var n$=function(){function e(){}return e.prototype.bearer=function(r){var t=r.tokenProvider;if(typeof t!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof t));return new Ab(t,["Neo.ClientError.Security.Unauthorized","Neo.ClientError.Security.TokenExpired"])},e.prototype.basic=function(r){var t=this,n=r.tokenProvider;if(typeof n!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof n));return new Ab(function(){return av(t,void 0,void 0,function(){var o;return uv(this,function(i){switch(i.label){case 0:return o={},[4,n()];case 1:return[2,(o.token=i.sent(),o)]}})})},["Neo.ClientError.Security.Unauthorized"])},e}(),uO=new n$;vr.authTokenManagers=uO;Object.freeze(uO);function o$(e){var r=e.authToken;return new a$(r)}vr.staticAuthTokenManager=o$;var i$=function(){function e(r){r===void 0&&(r=[]),this._subscribers=r}return e.prototype.subscribe=function(r){this._subscribers.push(r)},e.prototype.onCompleted=function(r){this._subscribers.forEach(function(t){return t.onCompleted(r)})},e.prototype.onError=function(r){this._subscribers.forEach(function(t){return t.onError(r)})},e}(),Ab=function(){function e(r,t,n,o){this._tokenProvider=r,this._handledSecurityCodes=t,this._currentAuthData=n,this._refreshObservable=o}return e.prototype.getToken=function(){var r;return av(this,void 0,void 0,function(){return uv(this,function(t){switch(t.label){case 0:return this._currentAuthData===void 0||this._currentAuthData.expiration!==void 0&&this._currentAuthData.expiration<new Date?[4,this._refreshAuthToken()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2,(r=this._currentAuthData)===null||r===void 0?void 0:r.token]}})})},e.prototype.handleSecurityException=function(r,t){var n;return this._handledSecurityCodes.includes(t)?(e$.util.equals(r,(n=this._currentAuthData)===null||n===void 0?void 0:n.token)&&this._scheduleRefreshAuthToken(),!0):!1},e.prototype._scheduleRefreshAuthToken=function(r){var t=this;this._refreshObservable===void 0&&(this._currentAuthData=void 0,this._refreshObservable=new i$,Promise.resolve(this._tokenProvider()).then(function(n){var o;t._currentAuthData=n,(o=t._refreshObservable)===null||o===void 0||o.onCompleted(n)}).catch(function(n){var o;(o=t._refreshObservable)===null||o===void 0||o.onError(n)}).finally(function(){t._refreshObservable=void 0})),r!==void 0&&this._refreshObservable.subscribe(r)},e.prototype._refreshAuthToken=function(){return av(this,void 0,void 0,function(){var r=this;return uv(this,function(t){switch(t.label){case 0:return[4,new Promise(function(n,o){r._scheduleRefreshAuthToken({onCompleted:n,onError:o})})];case 1:return[2,t.sent()]}})})},e}(),a$=function(){function e(r){this._authToken=r}return e.prototype.getToken=function(){return this._authToken},e.prototype.handleSecurityException=function(r,t){return!1},e}(),Mo={},u$=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Mo,"__esModule",{value:!0});Mo.InternalConfig=Mo.Config=void 0;var sO=function(){function e(){this.encrypted=void 0,this.trust=void 0,this.trustedCertificates=[],this.maxConnectionPoolSize=100,this.maxConnectionLifetime=60*60*1e3,this.connectionAcquisitionTimeout=6e4,this.maxTransactionRetryTime=3e4,this.connectionLivenessCheckTimeout=void 0,this.connectionTimeout=3e4,this.disableLosslessIntegers=!1,this.useBigInt=!1,this.logging=void 0,this.resolver=void 0,this.notificationFilter=void 0,this.userAgent=void 0,this.telemetryDisabled=!1,this.clientCertificate=void 0}return e}();Mo.Config=sO;var s$=function(e){u$(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(sO);Mo.InternalConfig=s$;var Dt={},c$=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),wa=f&&f.__assign||function(){return wa=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},wa.apply(this,arguments)},l$=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),f$=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),d$=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&l$(r,e,t);return f$(r,e),r};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.resolveCertificateProvider=Dt.clientCertificateProviders=Dt.RotatingClientCertificateProvider=Dt.ClientCertificateProvider=void 0;var O_=d$(Ft),h$=function(){function e(){this.certfile="",this.keyfile="",this.password=void 0}return e}();Dt.default=h$;var cO=function(){function e(){}return e.prototype.hasUpdate=function(){throw new Error("Not Implemented")},e.prototype.getClientCertificate=function(){throw new Error("Not Implemented")},e}();Dt.ClientCertificateProvider=cO;var p$=function(e){c$(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.updateCertificate=function(t){throw new Error("Not implemented")},r}(cO);Dt.RotatingClientCertificateProvider=p$;var v$=function(){function e(){}return e.prototype.rotating=function(r){var t=r.initialCertificate;if(t==null||!E_(t))throw new TypeError("initialCertificate should be ClientCertificate, but got ".concat(O_.stringify(t)));var n=wa({},t);return new m$(n)},e}(),lO=new v$;Dt.clientCertificateProviders=lO;Object.freeze(lO);function _$(e){if(e!=null){if(typeof e=="object"&&"hasUpdate"in e&&"getClientCertificate"in e&&typeof e.getClientCertificate=="function"&&typeof e.hasUpdate=="function")return e;if(E_(e)){var r=wa({},e);return{getClientCertificate:function(){return r},hasUpdate:function(){return!1}}}throw new TypeError("clientCertificate should be configured with ClientCertificate or ClientCertificateProvider, but got ".concat(O_.stringify(e)))}}Dt.resolveCertificateProvider=_$;function E_(e){return e!=null&&typeof e=="object"&&"certfile"in e&&y$(e.certfile)&&"keyfile"in e&&b$(e.keyfile)&&dO("password",e)}function y$(e){return Ib(e)||fO(e,Ib)}function b$(e){function r(t){return typeof t=="string"||t!=null&&typeof t=="object"&&"path"in t&&typeof t.path=="string"&&dO("password",t)}return r(e)||fO(e,r)}function Ib(e){return typeof e=="string"}function fO(e,r,t){return t===void 0&&(t=!1),Array.isArray(e)&&(t||e.length>0)&&e.filter(r).length===e.length}function dO(e,r){return!(e in r)||r[e]==null||typeof r[e]=="string"}var m$=function(){function e(r,t){t===void 0&&(t=!1),this._certificate=r,this._updated=t}return e.prototype.hasUpdate=function(){try{return this._updated}finally{this._updated=!1}},e.prototype.getClientCertificate=function(){return this._certificate},e.prototype.updateCertificate=function(r){if(!E_(r))throw new TypeError("certificate should be ClientCertificate, but got ".concat(O_.stringify(r)));this._certificate=wa({},r),this._updated=!0},e}();(function(e){var r=f&&f.__createBinding||(Object.create?function(K,L,re,pe){pe===void 0&&(pe=re);var Ae=Object.getOwnPropertyDescriptor(L,re);(!Ae||("get"in Ae?!L.__esModule:Ae.writable||Ae.configurable))&&(Ae={enumerable:!0,get:function(){return L[re]}}),Object.defineProperty(K,pe,Ae)}:function(K,L,re,pe){pe===void 0&&(pe=re),K[pe]=L[re]}),t=f&&f.__setModuleDefault||(Object.create?function(K,L){Object.defineProperty(K,"default",{enumerable:!0,value:L})}:function(K,L){K.default=L}),n=f&&f.__importStar||function(K){if(K&&K.__esModule)return K;var L={};if(K!=null)for(var re in K)re!=="default"&&Object.prototype.hasOwnProperty.call(K,re)&&r(L,K,re);return t(L,K),L},o=f&&f.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(e,"__esModule",{value:!0}),e.EagerResult=e.Result=e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.GqlStatusObject=e.Notification=e.ServerInfo=e.queryType=e.ResultSummary=e.Record=e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=e.Time=e.LocalTime=e.LocalDateTime=e.isTime=e.isLocalTime=e.isLocalDateTime=e.isDuration=e.isDateTime=e.isDate=e.Duration=e.DateTime=e.Date=e.Point=e.isPoint=e.internal=e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=e.Integer=e.error=e.isRetriableError=e.GQLError=e.newGQLError=e.Neo4jError=e.newError=e.authTokenManagers=void 0,e.resolveCertificateProvider=e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.routing=e.staticAuthTokenManager=e.bookmarkManager=e.auth=e.json=e.driver=e.types=e.Driver=e.Session=e.TransactionPromise=e.ManagedTransaction=e.Transaction=e.Connection=e.Releasable=e.ConnectionProvider=void 0;var i=ue;Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return i.newError}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return i.Neo4jError}}),Object.defineProperty(e,"newGQLError",{enumerable:!0,get:function(){return i.newGQLError}}),Object.defineProperty(e,"GQLError",{enumerable:!0,get:function(){return i.GQLError}}),Object.defineProperty(e,"isRetriableError",{enumerable:!0,get:function(){return i.isRetriableError}});var a=n(xe);e.Integer=a.default,Object.defineProperty(e,"int",{enumerable:!0,get:function(){return a.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return a.isInt}}),Object.defineProperty(e,"inSafeRange",{enumerable:!0,get:function(){return a.inSafeRange}}),Object.defineProperty(e,"toNumber",{enumerable:!0,get:function(){return a.toNumber}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return a.toString}});var s=he;Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return s.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return s.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return s.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return s.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return s.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return s.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return s.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return s.isLocalTime}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return s.isTime}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return s.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return s.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return s.Time}});var c=Oe;Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return c.Node}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return c.isNode}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return c.Relationship}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return c.isRelationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return c.UnboundRelationship}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return c.isUnboundRelationship}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return c.Path}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return c.isPath}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return c.PathSegment}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return c.isPathSegment}});var u=o(d_);e.Record=u.default;var l=No;Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return l.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return l.Point}});var d=n(Je);e.ResultSummary=d.default,Object.defineProperty(e,"queryType",{enumerable:!0,get:function(){return d.queryType}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return d.ServerInfo}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return d.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return d.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return d.QueryStatistics}}),Object.defineProperty(e,"Stats",{enumerable:!0,get:function(){return d.Stats}});var h=n(Ee);e.Notification=h.default,Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return h.GqlStatusObject}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return h.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return h.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return h.notificationSeverityLevel}});var p=pr;Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return p.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return p.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return p.notificationFilterMinimumSeverityLevel}});var v=o(Da);e.Result=v.default;var y=o(Tl);e.EagerResult=y.default;var _=n(La);e.ConnectionProvider=_.default,Object.defineProperty(e,"Releasable",{enumerable:!0,get:function(){return _.Releasable}});var b=o(y_);e.Connection=b.default;var w=o(Pl);e.Transaction=w.default;var S=o(Cl);e.ManagedTransaction=S.default;var E=o(Al);e.TransactionPromise=E.default;var T=o(Il);e.Session=T.default;var C=n(et),P=C;e.Driver=C.default,e.driver=P;var I=o(Nl);e.auth=I.default;var M=Qo;Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return M.bookmarkManager}});var F=vr;Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return F.authTokenManagers}}),Object.defineProperty(e,"staticAuthTokenManager",{enumerable:!0,get:function(){return F.staticAuthTokenManager}});var Q=et;Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return Q.routing}});var H=n(Mo);e.types=H;var Z=n(Ft);e.json=Z;var fe=o(Rl);e.resultTransformers=fe.default;var V=Dt;Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return V.clientCertificateProviders}}),Object.defineProperty(e,"resolveCertificateProvider",{enumerable:!0,get:function(){return V.resolveCertificateProvider}});var ie=n(ne);e.internal=ie;var W={SERVICE_UNAVAILABLE:i.SERVICE_UNAVAILABLE,SESSION_EXPIRED:i.SESSION_EXPIRED,PROTOCOL_ERROR:i.PROTOCOL_ERROR};e.error=W;var te={authTokenManagers:F.authTokenManagers,newError:i.newError,Neo4jError:i.Neo4jError,newGQLError:i.newGQLError,GQLError:i.GQLError,isRetriableError:i.isRetriableError,error:W,Integer:a.default,int:a.int,isInt:a.isInt,inSafeRange:a.inSafeRange,toNumber:a.toNumber,toString:a.toString,internal:ie,isPoint:l.isPoint,Point:l.Point,Date:s.Date,DateTime:s.DateTime,Duration:s.Duration,isDate:s.isDate,isDateTime:s.isDateTime,isDuration:s.isDuration,isLocalDateTime:s.isLocalDateTime,isLocalTime:s.isLocalTime,isTime:s.isTime,LocalDateTime:s.LocalDateTime,LocalTime:s.LocalTime,Time:s.Time,Node:c.Node,isNode:c.isNode,Relationship:c.Relationship,isRelationship:c.isRelationship,UnboundRelationship:c.UnboundRelationship,isUnboundRelationship:c.isUnboundRelationship,Path:c.Path,isPath:c.isPath,PathSegment:c.PathSegment,isPathSegment:c.isPathSegment,Record:u.default,ResultSummary:d.default,queryType:d.queryType,ServerInfo:d.ServerInfo,Notification:h.default,GqlStatusObject:h.GqlStatusObject,Plan:d.Plan,ProfiledPlan:d.ProfiledPlan,QueryStatistics:d.QueryStatistics,Stats:d.Stats,Result:v.default,EagerResult:y.default,Transaction:w.default,ManagedTransaction:S.default,TransactionPromise:E.default,Session:T.default,Driver:C.default,Connection:b.default,Releasable:_.Releasable,types:H,driver:P,json:Z,auth:I.default,bookmarkManager:M.bookmarkManager,routing:Q.routing,resultTransformers:fe.default,notificationCategory:h.notificationCategory,notificationClassification:h.notificationClassification,notificationSeverityLevel:h.notificationSeverityLevel,notificationFilterDisabledCategory:p.notificationFilterDisabledCategory,notificationFilterDisabledClassification:p.notificationFilterDisabledClassification,notificationFilterMinimumSeverityLevel:p.notificationFilterMinimumSeverityLevel,clientCertificateProviders:V.clientCertificateProviders,resolveCertificateProvider:V.resolveCertificateProvider};e.default=te})(q);var kl={},Ba={},le={},Xo={},ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.isFunction=void 0;function g$(e){return typeof e=="function"}ce.isFunction=g$;var Ne={},xa={},er={};Object.defineProperty(er,"__esModule",{value:!0});er.createErrorClass=void 0;function w$(e){var r=function(n){Error.call(n),n.stack=new Error().stack},t=e(r);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}er.createErrorClass=w$;Object.defineProperty(xa,"__esModule",{value:!0});xa.UnsubscriptionError=void 0;var O$=er;xa.UnsubscriptionError=O$.createErrorClass(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,o){return o+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});var Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.arrRemove=void 0;function E$(e,r){if(e){var t=e.indexOf(r);0<=t&&e.splice(t,1)}}Bt.arrRemove=E$;var Rb=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},jb=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},$b=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.isSubscription=Ne.EMPTY_SUBSCRIPTION=Ne.Subscription=void 0;var da=ce,tp=xa,Nb=Bt,S_=function(){function e(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var r,t,n,o,i;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var s=Rb(a),c=s.next();!c.done;c=s.next()){var u=c.value;u.remove(this)}}catch(y){r={error:y}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(r)throw r.error}}else a.remove(this);var l=this.initialTeardown;if(da.isFunction(l))try{l()}catch(y){i=y instanceof tp.UnsubscriptionError?y.errors:[y]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var h=Rb(d),p=h.next();!p.done;p=h.next()){var v=p.value;try{kb(v)}catch(y){i=i??[],y instanceof tp.UnsubscriptionError?i=$b($b([],jb(i)),jb(y.errors)):i.push(y)}}}catch(y){n={error:y}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}}if(i)throw new tp.UnsubscriptionError(i)}},e.prototype.add=function(r){var t;if(r&&r!==this)if(this.closed)kb(r);else{if(r instanceof e){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(r)}},e.prototype._hasParent=function(r){var t=this._parentage;return t===r||Array.isArray(t)&&t.includes(r)},e.prototype._addParent=function(r){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(r),t):t?[t,r]:r},e.prototype._removeParent=function(r){var t=this._parentage;t===r?this._parentage=null:Array.isArray(t)&&Nb.arrRemove(t,r)},e.prototype.remove=function(r){var t=this._finalizers;t&&Nb.arrRemove(t,r),r instanceof e&&r._removeParent(this)},e.EMPTY=function(){var r=new e;return r.closed=!0,r}(),e}();Ne.Subscription=S_;Ne.EMPTY_SUBSCRIPTION=S_.EMPTY;function S$(e){return e instanceof S_||e&&"closed"in e&&da.isFunction(e.remove)&&da.isFunction(e.add)&&da.isFunction(e.unsubscribe)}Ne.isSubscription=S$;function kb(e){da.isFunction(e)?e():e.unsubscribe()}var Zr={};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.config=void 0;Zr.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Va={},T_={};(function(e){var r=f&&f.__read||function(n,o){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var a=i.call(n),s,c=[],u;try{for(;(o===void 0||o-- >0)&&!(s=a.next()).done;)c.push(s.value)}catch(l){u={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(u)throw u.error}}return c},t=f&&f.__spreadArray||function(n,o){for(var i=0,a=o.length,s=n.length;i<a;i++,s++)n[s]=o[i];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutProvider=void 0,e.timeoutProvider={setTimeout:function(n,o){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=e.timeoutProvider.delegate;return s!=null&&s.setTimeout?s.setTimeout.apply(s,t([n,o],r(i))):setTimeout.apply(void 0,t([n,o],r(i)))},clearTimeout:function(n){var o=e.timeoutProvider.delegate;return((o==null?void 0:o.clearTimeout)||clearTimeout)(n)},delegate:void 0}})(T_);Object.defineProperty(Va,"__esModule",{value:!0});Va.reportUnhandledError=void 0;var T$=Zr,P$=T_;function C$(e){P$.timeoutProvider.setTimeout(function(){var r=T$.config.onUnhandledError;if(r)r(e);else throw e})}Va.reportUnhandledError=C$;var ke={};Object.defineProperty(ke,"__esModule",{value:!0});ke.noop=void 0;function A$(){}ke.noop=A$;var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.createNotification=Qt.nextNotification=Qt.errorNotification=Qt.COMPLETE_NOTIFICATION=void 0;Qt.COMPLETE_NOTIFICATION=function(){return Ml("C",void 0,void 0)}();function I$(e){return Ml("E",void 0,e)}Qt.errorNotification=I$;function R$(e){return Ml("N",e,void 0)}Qt.nextNotification=R$;function Ml(e,r,t){return{kind:e,value:r,error:t}}Qt.createNotification=Ml;var Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.captureError=Ur.errorContext=void 0;var hO=Zr,Cn=null;function j$(e){if(hO.config.useDeprecatedSynchronousErrorHandling){var r=!Cn;if(r&&(Cn={errorThrown:!1,error:null}),e(),r){var t=Cn,n=t.errorThrown,o=t.error;if(Cn=null,n)throw o}}else e()}Ur.errorContext=j$;function $$(e){hO.config.useDeprecatedSynchronousErrorHandling&&Cn&&(Cn.errorThrown=!0,Cn.error=e)}Ur.captureError=$$;(function(e){var r=f&&f.__extends||function(){var w=function(S,E){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,C){T.__proto__=C}||function(T,C){for(var P in C)Object.prototype.hasOwnProperty.call(C,P)&&(T[P]=C[P])},w(S,E)};return function(S,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");w(S,E);function T(){this.constructor=S}S.prototype=E===null?Object.create(E):(T.prototype=E.prototype,new T)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_OBSERVER=e.SafeSubscriber=e.Subscriber=void 0;var t=ce,n=Ne,o=Zr,i=Va,a=ke,s=Qt,c=T_,u=Ur,l=function(w){r(S,w);function S(E){var T=w.call(this)||this;return T.isStopped=!1,E?(T.destination=E,n.isSubscription(E)&&E.add(T)):T.destination=e.EMPTY_OBSERVER,T}return S.create=function(E,T,C){return new v(E,T,C)},S.prototype.next=function(E){this.isStopped?b(s.nextNotification(E),this):this._next(E)},S.prototype.error=function(E){this.isStopped?b(s.errorNotification(E),this):(this.isStopped=!0,this._error(E))},S.prototype.complete=function(){this.isStopped?b(s.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},S.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,w.prototype.unsubscribe.call(this),this.destination=null)},S.prototype._next=function(E){this.destination.next(E)},S.prototype._error=function(E){try{this.destination.error(E)}finally{this.unsubscribe()}},S.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},S}(n.Subscription);e.Subscriber=l;var d=Function.prototype.bind;function h(w,S){return d.call(w,S)}var p=function(){function w(S){this.partialObserver=S}return w.prototype.next=function(S){var E=this.partialObserver;if(E.next)try{E.next(S)}catch(T){y(T)}},w.prototype.error=function(S){var E=this.partialObserver;if(E.error)try{E.error(S)}catch(T){y(T)}else y(S)},w.prototype.complete=function(){var S=this.partialObserver;if(S.complete)try{S.complete()}catch(E){y(E)}},w}(),v=function(w){r(S,w);function S(E,T,C){var P=w.call(this)||this,I;if(t.isFunction(E)||!E)I={next:E??void 0,error:T??void 0,complete:C??void 0};else{var M;P&&o.config.useDeprecatedNextContext?(M=Object.create(E),M.unsubscribe=function(){return P.unsubscribe()},I={next:E.next&&h(E.next,M),error:E.error&&h(E.error,M),complete:E.complete&&h(E.complete,M)}):I=E}return P.destination=new p(I),P}return S}(l);e.SafeSubscriber=v;function y(w){o.config.useDeprecatedSynchronousErrorHandling?u.captureError(w):i.reportUnhandledError(w)}function _(w){throw w}function b(w,S){var E=o.config.onStoppedNotification;E&&c.timeoutProvider.setTimeout(function(){return E(w,S)})}e.EMPTY_OBSERVER={closed:!0,next:a.noop,error:_,complete:a.noop}})(Xo);var Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.observable=void 0;Kn.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();var br={},Me={};Object.defineProperty(Me,"__esModule",{value:!0});Me.identity=void 0;function N$(e){return e}Me.identity=N$;Object.defineProperty(br,"__esModule",{value:!0});br.pipeFromArray=br.pipe=void 0;var k$=Me;function M$(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return pO(e)}br.pipe=M$;function pO(e){return e.length===0?k$.identity:e.length===1?e[0]:function(t){return e.reduce(function(n,o){return o(n)},t)}}br.pipeFromArray=pO;Object.defineProperty(le,"__esModule",{value:!0});le.Observable=void 0;var sv=Xo,D$=Ne,L$=Kn,U$=br,F$=Zr,rp=ce,B$=Ur,x$=function(){function e(r){r&&(this._subscribe=r)}return e.prototype.lift=function(r){var t=new e;return t.source=this,t.operator=r,t},e.prototype.subscribe=function(r,t,n){var o=this,i=W$(r)?r:new sv.SafeSubscriber(r,t,n);return B$.errorContext(function(){var a=o,s=a.operator,c=a.source;i.add(s?s.call(i,c):c?o._subscribe(i):o._trySubscribe(i))}),i},e.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(t){r.error(t)}},e.prototype.forEach=function(r,t){var n=this;return t=Mb(t),new t(function(o,i){var a=new sv.SafeSubscriber({next:function(s){try{r(s)}catch(c){i(c),a.unsubscribe()}},error:i,complete:o});n.subscribe(a)})},e.prototype._subscribe=function(r){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(r)},e.prototype[L$.observable]=function(){return this},e.prototype.pipe=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return U$.pipeFromArray(r)(this)},e.prototype.toPromise=function(r){var t=this;return r=Mb(r),new r(function(n,o){var i;t.subscribe(function(a){return i=a},function(a){return o(a)},function(){return n(i)})})},e.create=function(r){return new e(r)},e}();le.Observable=x$;function Mb(e){var r;return(r=e??F$.config.Promise)!==null&&r!==void 0?r:Promise}function V$(e){return e&&rp.isFunction(e.next)&&rp.isFunction(e.error)&&rp.isFunction(e.complete)}function W$(e){return e&&e instanceof sv.Subscriber||V$(e)&&D$.isSubscription(e)}var Yn={},Jo={},N={};Object.defineProperty(N,"__esModule",{value:!0});N.operate=N.hasLift=void 0;var z$=ce;function vO(e){return z$.isFunction(e==null?void 0:e.lift)}N.hasLift=vO;function q$(e){return function(r){if(vO(r))return r.lift(function(t){try{return e(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}N.operate=q$;var D={},H$=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(D,"__esModule",{value:!0});D.OperatorSubscriber=D.createOperatorSubscriber=void 0;var G$=Xo;function K$(e,r,t,n,o){return new _O(e,r,t,n,o)}D.createOperatorSubscriber=K$;var _O=function(e){H$(r,e);function r(t,n,o,i,a,s){var c=e.call(this,t)||this;return c.onFinalize=a,c.shouldUnsubscribe=s,c._next=n?function(u){try{n(u)}catch(l){t.error(l)}}:e.prototype._next,c._error=i?function(u){try{i(u)}catch(l){t.error(l)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=o?function(){try{o()}catch(u){t.error(u)}finally{this.unsubscribe()}}:e.prototype._complete,c}return r.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},r}(G$.Subscriber);D.OperatorSubscriber=_O;Object.defineProperty(Jo,"__esModule",{value:!0});Jo.refCount=void 0;var Y$=N,Z$=D;function Q$(){return Y$.operate(function(e,r){var t=null;e._refCount++;var n=Z$.createOperatorSubscriber(r,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount){t=null;return}var o=e._connection,i=t;t=null,o&&(!i||o===i)&&o.unsubscribe(),r.unsubscribe()});e.subscribe(n),n.closed||(t=e.connect())})}Jo.refCount=Q$;var X$=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Yn,"__esModule",{value:!0});Yn.ConnectableObservable=void 0;var J$=le,Db=Ne,eN=Jo,tN=D,rN=N,nN=function(e){X$(r,e);function r(t,n){var o=e.call(this)||this;return o.source=t,o.subjectFactory=n,o._subject=null,o._refCount=0,o._connection=null,rN.hasLift(t)&&(o.lift=t.lift),o}return r.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},r.prototype.getSubject=function(){var t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject},r.prototype._teardown=function(){this._refCount=0;var t=this._connection;this._subject=this._connection=null,t==null||t.unsubscribe()},r.prototype.connect=function(){var t=this,n=this._connection;if(!n){n=this._connection=new Db.Subscription;var o=this.getSubject();n.add(this.source.subscribe(tN.createOperatorSubscriber(o,void 0,function(){t._teardown(),o.complete()},function(i){t._teardown(),o.error(i)},function(){return t._teardown()}))),n.closed&&(this._connection=null,n=Db.Subscription.EMPTY)}return n},r.prototype.refCount=function(){return eN.refCount()(this)},r}(J$.Observable);Yn.ConnectableObservable=nN;var Dl={},yO={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.performanceTimestampProvider=void 0,e.performanceTimestampProvider={now:function(){return(e.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}})(yO);var P_={};(function(e){var r=f&&f.__read||function(o,i){var a=typeof Symbol=="function"&&o[Symbol.iterator];if(!a)return o;var s=a.call(o),c,u=[],l;try{for(;(i===void 0||i-- >0)&&!(c=s.next()).done;)u.push(c.value)}catch(d){l={error:d}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(l)throw l.error}}return u},t=f&&f.__spreadArray||function(o,i){for(var a=0,s=i.length,c=o.length;a<s;a++,c++)o[c]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrameProvider=void 0;var n=Ne;e.animationFrameProvider={schedule:function(o){var i=requestAnimationFrame,a=cancelAnimationFrame,s=e.animationFrameProvider.delegate;s&&(i=s.requestAnimationFrame,a=s.cancelAnimationFrame);var c=i(function(u){a=void 0,o(u)});return new n.Subscription(function(){return a==null?void 0:a(c)})},requestAnimationFrame:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=e.animationFrameProvider.delegate;return((a==null?void 0:a.requestAnimationFrame)||requestAnimationFrame).apply(void 0,t([],r(o)))},cancelAnimationFrame:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=e.animationFrameProvider.delegate;return((a==null?void 0:a.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,t([],r(o)))},delegate:void 0}})(P_);Object.defineProperty(Dl,"__esModule",{value:!0});Dl.animationFrames=void 0;var oN=le,iN=yO,Lb=P_;function aN(e){return e?bO(e):uN}Dl.animationFrames=aN;function bO(e){return new oN.Observable(function(r){var t=e||iN.performanceTimestampProvider,n=t.now(),o=0,i=function(){r.closed||(o=Lb.animationFrameProvider.requestAnimationFrame(function(a){o=0;var s=t.now();r.next({timestamp:e?s:a,elapsed:s-n}),i()}))};return i(),function(){o&&Lb.animationFrameProvider.cancelAnimationFrame(o)}})}var uN=bO(),Ce={},Wa={};Object.defineProperty(Wa,"__esModule",{value:!0});Wa.ObjectUnsubscribedError=void 0;var sN=er;Wa.ObjectUnsubscribedError=sN.createErrorClass(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var mO=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),cN=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.AnonymousSubject=Ce.Subject=void 0;var Ub=le,cv=Ne,lN=Wa,fN=Bt,np=Ur,gO=function(e){mO(r,e);function r(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r.prototype.lift=function(t){var n=new lv(this,this);return n.operator=t,n},r.prototype._throwIfClosed=function(){if(this.closed)throw new lN.ObjectUnsubscribedError},r.prototype.next=function(t){var n=this;np.errorContext(function(){var o,i;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var a=cN(n.currentObservers),s=a.next();!s.done;s=a.next()){var c=s.value;c.next(t)}}catch(u){o={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}}})},r.prototype.error=function(t){var n=this;np.errorContext(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=t;for(var o=n.observers;o.length;)o.shift().error(t)}})},r.prototype.complete=function(){var t=this;np.errorContext(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var n=t.observers;n.length;)n.shift().complete()}})},r.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(r.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),r.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},r.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},r.prototype._innerSubscribe=function(t){var n=this,o=this,i=o.hasError,a=o.isStopped,s=o.observers;return i||a?cv.EMPTY_SUBSCRIPTION:(this.currentObservers=null,s.push(t),new cv.Subscription(function(){n.currentObservers=null,fN.arrRemove(s,t)}))},r.prototype._checkFinalizedStatuses=function(t){var n=this,o=n.hasError,i=n.thrownError,a=n.isStopped;o?t.error(i):a&&t.complete()},r.prototype.asObservable=function(){var t=new Ub.Observable;return t.source=this,t},r.create=function(t,n){return new lv(t,n)},r}(Ub.Observable);Ce.Subject=gO;var lv=function(e){mO(r,e);function r(t,n){var o=e.call(this)||this;return o.destination=t,o.source=n,o}return r.prototype.next=function(t){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.next)===null||o===void 0||o.call(n,t)},r.prototype.error=function(t){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.error)===null||o===void 0||o.call(n,t)},r.prototype.complete=function(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)},r.prototype._subscribe=function(t){var n,o;return(o=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&o!==void 0?o:cv.EMPTY_SUBSCRIPTION},r}(gO);Ce.AnonymousSubject=lv;var za={},dN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(za,"__esModule",{value:!0});za.BehaviorSubject=void 0;var hN=Ce,pN=function(e){dN(r,e);function r(t){var n=e.call(this)||this;return n._value=t,n}return Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),r.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},r.prototype.getValue=function(){var t=this,n=t.hasError,o=t.thrownError,i=t._value;if(n)throw o;return this._throwIfClosed(),i},r.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},r}(hN.Subject);za.BehaviorSubject=pN;var ei={},Ll={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.dateTimestampProvider=void 0,e.dateTimestampProvider={now:function(){return(e.dateTimestampProvider.delegate||Date).now()},delegate:void 0}})(Ll);var vN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ei,"__esModule",{value:!0});ei.ReplaySubject=void 0;var _N=Ce,yN=Ll,bN=function(e){vN(r,e);function r(t,n,o){t===void 0&&(t=1/0),n===void 0&&(n=1/0),o===void 0&&(o=yN.dateTimestampProvider);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=n,i._timestampProvider=o,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,n),i}return r.prototype.next=function(t){var n=this,o=n.isStopped,i=n._buffer,a=n._infiniteTimeWindow,s=n._timestampProvider,c=n._windowTime;o||(i.push(t),!a&&i.push(s.now()+c)),this._trimBuffer(),e.prototype.next.call(this,t)},r.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(t),o=this,i=o._infiniteTimeWindow,a=o._buffer,s=a.slice(),c=0;c<s.length&&!t.closed;c+=i?1:2)t.next(s[c]);return this._checkFinalizedStatuses(t),n},r.prototype._trimBuffer=function(){var t=this,n=t._bufferSize,o=t._timestampProvider,i=t._buffer,a=t._infiniteTimeWindow,s=(a?1:2)*n;if(n<1/0&&s<i.length&&i.splice(0,i.length-s),!a){for(var c=o.now(),u=0,l=1;l<i.length&&i[l]<=c;l+=2)u=l;u&&i.splice(0,u+1)}},r}(_N.Subject);ei.ReplaySubject=bN;var ti={},mN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ti,"__esModule",{value:!0});ti.AsyncSubject=void 0;var gN=Ce,wN=function(e){mN(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t._value=null,t._hasValue=!1,t._isComplete=!1,t}return r.prototype._checkFinalizedStatuses=function(t){var n=this,o=n.hasError,i=n._hasValue,a=n._value,s=n.thrownError,c=n.isStopped,u=n._isComplete;o?t.error(s):(c||u)&&(i&&t.next(a),t.complete())},r.prototype.next=function(t){this.isStopped||(this._value=t,this._hasValue=!0)},r.prototype.complete=function(){var t=this,n=t._hasValue,o=t._value,i=t._isComplete;i||(this._isComplete=!0,n&&e.prototype.next.call(this,o),e.prototype.complete.call(this))},r}(gN.Subject);ti.AsyncSubject=wN;var wO={},Ul={},Qr={},Fl={},ON=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Fl,"__esModule",{value:!0});Fl.Action=void 0;var EN=Ne,SN=function(e){ON(r,e);function r(t,n){return e.call(this)||this}return r.prototype.schedule=function(t,n){return this},r}(EN.Subscription);Fl.Action=SN;var OO={};(function(e){var r=f&&f.__read||function(n,o){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var a=i.call(n),s,c=[],u;try{for(;(o===void 0||o-- >0)&&!(s=a.next()).done;)c.push(s.value)}catch(l){u={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(u)throw u.error}}return c},t=f&&f.__spreadArray||function(n,o){for(var i=0,a=o.length,s=n.length;i<a;i++,s++)n[s]=o[i];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.intervalProvider=void 0,e.intervalProvider={setInterval:function(n,o){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=e.intervalProvider.delegate;return s!=null&&s.setInterval?s.setInterval.apply(s,t([n,o],r(i))):setInterval.apply(void 0,t([n,o],r(i)))},clearInterval:function(n){var o=e.intervalProvider.delegate;return((o==null?void 0:o.clearInterval)||clearInterval)(n)},delegate:void 0}})(OO);var TN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Qr,"__esModule",{value:!0});Qr.AsyncAction=void 0;var PN=Fl,Fb=OO,CN=Bt,AN=function(e){TN(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o.pending=!1,o}return r.prototype.schedule=function(t,n){var o;if(n===void 0&&(n=0),this.closed)return this;this.state=t;var i=this.id,a=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(a,i,n)),this.pending=!0,this.delay=n,this.id=(o=this.id)!==null&&o!==void 0?o:this.requestAsyncId(a,this.id,n),this},r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),Fb.intervalProvider.setInterval(t.flush.bind(t,this),o)},r.prototype.recycleAsyncId=function(t,n,o){if(o===void 0&&(o=0),o!=null&&this.delay===o&&this.pending===!1)return n;n!=null&&Fb.intervalProvider.clearInterval(n)},r.prototype.execute=function(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var o=this._execute(t,n);if(o)return o;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(t,n){var o=!1,i;try{this.work(t)}catch(a){o=!0,i=a||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),i},r.prototype.unsubscribe=function(){if(!this.closed){var t=this,n=t.id,o=t.scheduler,i=o.actions;this.work=this.state=this.scheduler=null,this.pending=!1,CN.arrRemove(i,this),n!=null&&(this.id=this.recycleAsyncId(o,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},r}(PN.Action);Qr.AsyncAction=AN;var EO={},Do={};Object.defineProperty(Do,"__esModule",{value:!0});Do.TestTools=Do.Immediate=void 0;var IN=1,op,Bc={};function Bb(e){return e in Bc?(delete Bc[e],!0):!1}Do.Immediate={setImmediate:function(e){var r=IN++;return Bc[r]=!0,op||(op=Promise.resolve()),op.then(function(){return Bb(r)&&e()}),r},clearImmediate:function(e){Bb(e)}};Do.TestTools={pending:function(){return Object.keys(Bc).length}};(function(e){var r=f&&f.__read||function(a,s){var c=typeof Symbol=="function"&&a[Symbol.iterator];if(!c)return a;var u=c.call(a),l,d=[],h;try{for(;(s===void 0||s-- >0)&&!(l=u.next()).done;)d.push(l.value)}catch(p){h={error:p}}finally{try{l&&!l.done&&(c=u.return)&&c.call(u)}finally{if(h)throw h.error}}return d},t=f&&f.__spreadArray||function(a,s){for(var c=0,u=s.length,l=a.length;c<u;c++,l++)a[l]=s[c];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.immediateProvider=void 0;var n=Do,o=n.Immediate.setImmediate,i=n.Immediate.clearImmediate;e.immediateProvider={setImmediate:function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var c=e.immediateProvider.delegate;return((c==null?void 0:c.setImmediate)||o).apply(void 0,t([],r(a)))},clearImmediate:function(a){var s=e.immediateProvider.delegate;return((s==null?void 0:s.clearImmediate)||i)(a)},delegate:void 0}})(EO);var RN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ul,"__esModule",{value:!0});Ul.AsapAction=void 0;var jN=Qr,xb=EO,$N=function(e){RN(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o}return r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),o!==null&&o>0?e.prototype.requestAsyncId.call(this,t,n,o):(t.actions.push(this),t._scheduled||(t._scheduled=xb.immediateProvider.setImmediate(t.flush.bind(t,void 0))))},r.prototype.recycleAsyncId=function(t,n,o){var i;if(o===void 0&&(o=0),o!=null?o>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,o);var a=t.actions;n!=null&&((i=a[a.length-1])===null||i===void 0?void 0:i.id)!==n&&(xb.immediateProvider.clearImmediate(n),t._scheduled===n&&(t._scheduled=void 0))},r}(jN.AsyncAction);Ul.AsapAction=$N;var Bl={},Xr={},qa={};Object.defineProperty(qa,"__esModule",{value:!0});qa.Scheduler=void 0;var NN=Ll,kN=function(){function e(r,t){t===void 0&&(t=e.now),this.schedulerActionCtor=r,this.now=t}return e.prototype.schedule=function(r,t,n){return t===void 0&&(t=0),new this.schedulerActionCtor(this,r).schedule(n,t)},e.now=NN.dateTimestampProvider.now,e}();qa.Scheduler=kN;var MN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Xr,"__esModule",{value:!0});Xr.AsyncScheduler=void 0;var Vb=qa,DN=function(e){MN(r,e);function r(t,n){n===void 0&&(n=Vb.Scheduler.now);var o=e.call(this,t,n)||this;return o.actions=[],o._active=!1,o}return r.prototype.flush=function(t){var n=this.actions;if(this._active){n.push(t);return}var o;this._active=!0;do if(o=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,o){for(;t=n.shift();)t.unsubscribe();throw o}},r}(Vb.Scheduler);Xr.AsyncScheduler=DN;var LN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Bl,"__esModule",{value:!0});Bl.AsapScheduler=void 0;var UN=Xr,FN=function(e){LN(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.flush=function(t){this._active=!0;var n=this._scheduled;this._scheduled=void 0;var o=this.actions,i;t=t||o.shift();do if(i=t.execute(t.state,t.delay))break;while((t=o[0])&&t.id===n&&o.shift());if(this._active=!1,i){for(;(t=o[0])&&t.id===n&&o.shift();)t.unsubscribe();throw i}},r}(UN.AsyncScheduler);Bl.AsapScheduler=FN;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.asap=e.asapScheduler=void 0;var r=Ul,t=Bl;e.asapScheduler=new t.AsapScheduler(r.AsapAction),e.asap=e.asapScheduler})(wO);var lt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.async=e.asyncScheduler=void 0;var r=Qr,t=Xr;e.asyncScheduler=new t.AsyncScheduler(r.AsyncAction),e.async=e.asyncScheduler})(lt);var SO={},xl={},BN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(xl,"__esModule",{value:!0});xl.QueueAction=void 0;var xN=Qr,VN=function(e){BN(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o}return r.prototype.schedule=function(t,n){return n===void 0&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},r.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),o!=null&&o>0||o==null&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,o):(t.flush(this),0)},r}(xN.AsyncAction);xl.QueueAction=VN;var Vl={},WN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Vl,"__esModule",{value:!0});Vl.QueueScheduler=void 0;var zN=Xr,qN=function(e){WN(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(zN.AsyncScheduler);Vl.QueueScheduler=qN;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.queue=e.queueScheduler=void 0;var r=xl,t=Vl;e.queueScheduler=new t.QueueScheduler(r.QueueAction),e.queue=e.queueScheduler})(SO);var TO={},Wl={},HN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Wl,"__esModule",{value:!0});Wl.AnimationFrameAction=void 0;var GN=Qr,Wb=P_,KN=function(e){HN(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o}return r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),o!==null&&o>0?e.prototype.requestAsyncId.call(this,t,n,o):(t.actions.push(this),t._scheduled||(t._scheduled=Wb.animationFrameProvider.requestAnimationFrame(function(){return t.flush(void 0)})))},r.prototype.recycleAsyncId=function(t,n,o){var i;if(o===void 0&&(o=0),o!=null?o>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,o);var a=t.actions;n!=null&&n===t._scheduled&&((i=a[a.length-1])===null||i===void 0?void 0:i.id)!==n&&(Wb.animationFrameProvider.cancelAnimationFrame(n),t._scheduled=void 0)},r}(GN.AsyncAction);Wl.AnimationFrameAction=KN;var zl={},YN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(zl,"__esModule",{value:!0});zl.AnimationFrameScheduler=void 0;var ZN=Xr,QN=function(e){YN(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.flush=function(t){this._active=!0;var n;t?n=t.id:(n=this._scheduled,this._scheduled=void 0);var o=this.actions,i;t=t||o.shift();do if(i=t.execute(t.state,t.delay))break;while((t=o[0])&&t.id===n&&o.shift());if(this._active=!1,i){for(;(t=o[0])&&t.id===n&&o.shift();)t.unsubscribe();throw i}},r}(ZN.AsyncScheduler);zl.AnimationFrameScheduler=QN;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrame=e.animationFrameScheduler=void 0;var r=Wl,t=zl;e.animationFrameScheduler=new t.AnimationFrameScheduler(r.AnimationFrameAction),e.animationFrame=e.animationFrameScheduler})(TO);var Lo={},PO=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Lo,"__esModule",{value:!0});Lo.VirtualAction=Lo.VirtualTimeScheduler=void 0;var XN=Qr,JN=Ne,ek=Xr,tk=function(e){PO(r,e);function r(t,n){t===void 0&&(t=CO),n===void 0&&(n=1/0);var o=e.call(this,t,function(){return o.frame})||this;return o.maxFrames=n,o.frame=0,o.index=-1,o}return r.prototype.flush=function(){for(var t=this,n=t.actions,o=t.maxFrames,i,a;(a=n[0])&&a.delay<=o&&(n.shift(),this.frame=a.delay,!(i=a.execute(a.state,a.delay))););if(i){for(;a=n.shift();)a.unsubscribe();throw i}},r.frameTimeFactor=10,r}(ek.AsyncScheduler);Lo.VirtualTimeScheduler=tk;var CO=function(e){PO(r,e);function r(t,n,o){o===void 0&&(o=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=o,i.active=!0,i.index=t.index=o,i}return r.prototype.schedule=function(t,n){if(n===void 0&&(n=0),Number.isFinite(n)){if(!this.id)return e.prototype.schedule.call(this,t,n);this.active=!1;var o=new r(this.scheduler,this.work);return this.add(o),o.schedule(t,n)}else return JN.Subscription.EMPTY},r.prototype.requestAsyncId=function(t,n,o){o===void 0&&(o=0),this.delay=t.frame+o;var i=t.actions;return i.push(this),i.sort(r.sortActions),1},r.prototype.recycleAsyncId=function(t,n,o){},r.prototype._execute=function(t,n){if(this.active===!0)return e.prototype._execute.call(this,t,n)},r.sortActions=function(t,n){return t.delay===n.delay?t.index===n.index?0:t.index>n.index?1:-1:t.delay>n.delay?1:-1},r}(XN.AsyncAction);Lo.VirtualAction=CO;var ql={},Ut={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=void 0;var r=le;e.EMPTY=new r.Observable(function(o){return o.complete()});function t(o){return o?n(o):e.EMPTY}e.empty=t;function n(o){return new r.Observable(function(i){return o.schedule(function(){return i.complete()})})}})(Ut);var ri={},Re={},Zn={};Object.defineProperty(Zn,"__esModule",{value:!0});Zn.isScheduler=void 0;var rk=ce;function nk(e){return e&&rk.isFunction(e.schedule)}Zn.isScheduler=nk;Object.defineProperty(Re,"__esModule",{value:!0});Re.popNumber=Re.popScheduler=Re.popResultSelector=void 0;var ok=ce,ik=Zn;function C_(e){return e[e.length-1]}function ak(e){return ok.isFunction(C_(e))?e.pop():void 0}Re.popResultSelector=ak;function uk(e){return ik.isScheduler(C_(e))?e.pop():void 0}Re.popScheduler=uk;function sk(e,r){return typeof C_(e)=="number"?e.pop():r}Re.popNumber=sk;var xt={},Ha={},Hl={},U={},ni={};Object.defineProperty(ni,"__esModule",{value:!0});ni.isArrayLike=void 0;ni.isArrayLike=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};var Ga={};Object.defineProperty(Ga,"__esModule",{value:!0});Ga.isPromise=void 0;var ck=ce;function lk(e){return ck.isFunction(e==null?void 0:e.then)}Ga.isPromise=lk;var Ka={};Object.defineProperty(Ka,"__esModule",{value:!0});Ka.isInteropObservable=void 0;var fk=Kn,dk=ce;function hk(e){return dk.isFunction(e[fk.observable])}Ka.isInteropObservable=hk;var Ya={};Object.defineProperty(Ya,"__esModule",{value:!0});Ya.isAsyncIterable=void 0;var pk=ce;function vk(e){return Symbol.asyncIterator&&pk.isFunction(e==null?void 0:e[Symbol.asyncIterator])}Ya.isAsyncIterable=vk;var Za={};Object.defineProperty(Za,"__esModule",{value:!0});Za.createInvalidObservableTypeError=void 0;function _k(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}Za.createInvalidObservableTypeError=_k;var Qa={},Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.iterator=Dn.getSymbolIterator=void 0;function AO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}Dn.getSymbolIterator=AO;Dn.iterator=AO();Object.defineProperty(Qa,"__esModule",{value:!0});Qa.isIterable=void 0;var yk=Dn,bk=ce;function mk(e){return bk.isFunction(e==null?void 0:e[yk.iterator])}Qa.isIterable=mk;var Fr={},gk=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Co=f&&f.__await||function(e){return this instanceof Co?(this.v=e,this):new Co(e)},wk=f&&f.__asyncGenerator||function(e,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(e,r||[]),o,i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(h){n[h]&&(o[h]=function(p){return new Promise(function(v,y){i.push([h,p,v,y])>1||s(h,p)})})}function s(h,p){try{c(n[h](p))}catch(v){d(i[0][3],v)}}function c(h){h.value instanceof Co?Promise.resolve(h.value.v).then(u,l):d(i[0][2],h)}function u(h){s("next",h)}function l(h){s("throw",h)}function d(h,p){h(p),i.shift(),i.length&&s(i[0][0],i[0][1])}};Object.defineProperty(Fr,"__esModule",{value:!0});Fr.isReadableStreamLike=Fr.readableStreamLikeToAsyncGenerator=void 0;var Ok=ce;function Ek(e){return wk(this,arguments,function(){var t,n,o,i;return gk(this,function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Co(t.read())];case 3:return n=a.sent(),o=n.value,i=n.done,i?[4,Co(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Co(o)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}Fr.readableStreamLikeToAsyncGenerator=Ek;function Sk(e){return Ok.isFunction(e==null?void 0:e.getReader)}Fr.isReadableStreamLike=Sk;var Tk=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Pk=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Ck=f&&f.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e[Symbol.asyncIterator],t;return r?r.call(e):(e=typeof fv=="function"?fv(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(a){return new Promise(function(s,c){a=e[i](a),o(s,c,a.done,a.value)})}}function o(i,a,s,c){Promise.resolve(c).then(function(u){i({value:u,done:s})},a)}},fv=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(U,"__esModule",{value:!0});U.fromReadableStreamLike=U.fromAsyncIterable=U.fromIterable=U.fromPromise=U.fromArrayLike=U.fromInteropObservable=U.innerFrom=void 0;var Ak=ni,Ik=Ga,oi=le,Rk=Ka,jk=Ya,$k=Za,Nk=Qa,IO=Fr,kk=ce,Mk=Va,Dk=Kn;function Lk(e){if(e instanceof oi.Observable)return e;if(e!=null){if(Rk.isInteropObservable(e))return RO(e);if(Ak.isArrayLike(e))return jO(e);if(Ik.isPromise(e))return $O(e);if(jk.isAsyncIterable(e))return A_(e);if(Nk.isIterable(e))return NO(e);if(IO.isReadableStreamLike(e))return kO(e)}throw $k.createInvalidObservableTypeError(e)}U.innerFrom=Lk;function RO(e){return new oi.Observable(function(r){var t=e[Dk.observable]();if(kk.isFunction(t.subscribe))return t.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}U.fromInteropObservable=RO;function jO(e){return new oi.Observable(function(r){for(var t=0;t<e.length&&!r.closed;t++)r.next(e[t]);r.complete()})}U.fromArrayLike=jO;function $O(e){return new oi.Observable(function(r){e.then(function(t){r.closed||(r.next(t),r.complete())},function(t){return r.error(t)}).then(null,Mk.reportUnhandledError)})}U.fromPromise=$O;function NO(e){return new oi.Observable(function(r){var t,n;try{for(var o=fv(e),i=o.next();!i.done;i=o.next()){var a=i.value;if(r.next(a),r.closed)return}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}r.complete()})}U.fromIterable=NO;function A_(e){return new oi.Observable(function(r){Uk(e,r).catch(function(t){return r.error(t)})})}U.fromAsyncIterable=A_;function kO(e){return A_(IO.readableStreamLikeToAsyncGenerator(e))}U.fromReadableStreamLike=kO;function Uk(e,r){var t,n,o,i;return Tk(this,void 0,void 0,function(){var a,s;return Pk(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),t=Ck(e),c.label=1;case 1:return[4,t.next()];case 2:if(n=c.sent(),!!n.done)return[3,4];if(a=n.value,r.next(a),r.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=c.sent(),o={error:s},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(i=t.return)?[4,i.call(t)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return r.complete(),[2]}})})}var Jr={},Vt={};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.executeSchedule=void 0;function Fk(e,r,t,n,o){n===void 0&&(n=0),o===void 0&&(o=!1);var i=r.schedule(function(){t(),o?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(i),!o)return i}Vt.executeSchedule=Fk;Object.defineProperty(Jr,"__esModule",{value:!0});Jr.observeOn=void 0;var ip=Vt,Bk=N,xk=D;function Vk(e,r){return r===void 0&&(r=0),Bk.operate(function(t,n){t.subscribe(xk.createOperatorSubscriber(n,function(o){return ip.executeSchedule(n,e,function(){return n.next(o)},r)},function(){return ip.executeSchedule(n,e,function(){return n.complete()},r)},function(o){return ip.executeSchedule(n,e,function(){return n.error(o)},r)}))})}Jr.observeOn=Vk;var en={};Object.defineProperty(en,"__esModule",{value:!0});en.subscribeOn=void 0;var Wk=N;function zk(e,r){return r===void 0&&(r=0),Wk.operate(function(t,n){n.add(e.schedule(function(){return t.subscribe(n)},r))})}en.subscribeOn=zk;Object.defineProperty(Hl,"__esModule",{value:!0});Hl.scheduleObservable=void 0;var qk=U,Hk=Jr,Gk=en;function Kk(e,r){return qk.innerFrom(e).pipe(Gk.subscribeOn(r),Hk.observeOn(r))}Hl.scheduleObservable=Kk;var Gl={};Object.defineProperty(Gl,"__esModule",{value:!0});Gl.schedulePromise=void 0;var Yk=U,Zk=Jr,Qk=en;function Xk(e,r){return Yk.innerFrom(e).pipe(Qk.subscribeOn(r),Zk.observeOn(r))}Gl.schedulePromise=Xk;var Kl={};Object.defineProperty(Kl,"__esModule",{value:!0});Kl.scheduleArray=void 0;var Jk=le;function eM(e,r){return new Jk.Observable(function(t){var n=0;return r.schedule(function(){n===e.length?t.complete():(t.next(e[n++]),t.closed||this.schedule())})})}Kl.scheduleArray=eM;var Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});Xa.scheduleIterable=void 0;var tM=le,rM=Dn,nM=ce,zb=Vt;function oM(e,r){return new tM.Observable(function(t){var n;return zb.executeSchedule(t,r,function(){n=e[rM.iterator](),zb.executeSchedule(t,r,function(){var o,i,a;try{o=n.next(),i=o.value,a=o.done}catch(s){t.error(s);return}a?t.complete():t.next(i)},0,!0)}),function(){return nM.isFunction(n==null?void 0:n.return)&&n.return()}})}Xa.scheduleIterable=oM;var Ja={};Object.defineProperty(Ja,"__esModule",{value:!0});Ja.scheduleAsyncIterable=void 0;var iM=le,qb=Vt;function aM(e,r){if(!e)throw new Error("Iterable cannot be null");return new iM.Observable(function(t){qb.executeSchedule(t,r,function(){var n=e[Symbol.asyncIterator]();qb.executeSchedule(t,r,function(){n.next().then(function(o){o.done?t.complete():t.next(o.value)})},0,!0)})})}Ja.scheduleAsyncIterable=aM;var Yl={};Object.defineProperty(Yl,"__esModule",{value:!0});Yl.scheduleReadableStreamLike=void 0;var uM=Ja,sM=Fr;function cM(e,r){return uM.scheduleAsyncIterable(sM.readableStreamLikeToAsyncGenerator(e),r)}Yl.scheduleReadableStreamLike=cM;Object.defineProperty(Ha,"__esModule",{value:!0});Ha.scheduled=void 0;var lM=Hl,fM=Gl,dM=Kl,hM=Xa,pM=Ja,vM=Ka,_M=Ga,yM=ni,bM=Qa,mM=Ya,gM=Za,wM=Fr,OM=Yl;function EM(e,r){if(e!=null){if(vM.isInteropObservable(e))return lM.scheduleObservable(e,r);if(yM.isArrayLike(e))return dM.scheduleArray(e,r);if(_M.isPromise(e))return fM.schedulePromise(e,r);if(mM.isAsyncIterable(e))return pM.scheduleAsyncIterable(e,r);if(bM.isIterable(e))return hM.scheduleIterable(e,r);if(wM.isReadableStreamLike(e))return OM.scheduleReadableStreamLike(e,r)}throw gM.createInvalidObservableTypeError(e)}Ha.scheduled=EM;Object.defineProperty(xt,"__esModule",{value:!0});xt.from=void 0;var SM=Ha,TM=U;function PM(e,r){return r?SM.scheduled(e,r):TM.innerFrom(e)}xt.from=PM;Object.defineProperty(ri,"__esModule",{value:!0});ri.of=void 0;var CM=Re,AM=xt;function IM(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=CM.popScheduler(e);return AM.from(e,t)}ri.of=IM;var eu={};Object.defineProperty(eu,"__esModule",{value:!0});eu.throwError=void 0;var RM=le,jM=ce;function $M(e,r){var t=jM.isFunction(e)?e:function(){return e},n=function(o){return o.error(t())};return new RM.Observable(r?function(o){return r.schedule(n,0,o)}:n)}eu.throwError=$M;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.observeNotification=e.Notification=e.NotificationKind=void 0;var r=Ut,t=ri,n=eu,o=ce;(function(s){s.NEXT="N",s.ERROR="E",s.COMPLETE="C"})(e.NotificationKind||(e.NotificationKind={}));var i=function(){function s(c,u,l){this.kind=c,this.value=u,this.error=l,this.hasValue=c==="N"}return s.prototype.observe=function(c){return a(this,c)},s.prototype.do=function(c,u,l){var d=this,h=d.kind,p=d.value,v=d.error;return h==="N"?c==null?void 0:c(p):h==="E"?u==null?void 0:u(v):l==null?void 0:l()},s.prototype.accept=function(c,u,l){var d;return o.isFunction((d=c)===null||d===void 0?void 0:d.next)?this.observe(c):this.do(c,u,l)},s.prototype.toObservable=function(){var c=this,u=c.kind,l=c.value,d=c.error,h=u==="N"?t.of(l):u==="E"?n.throwError(function(){return d}):u==="C"?r.EMPTY:0;if(!h)throw new TypeError("Unexpected notification kind "+u);return h},s.createNext=function(c){return new s("N",c)},s.createError=function(c){return new s("E",void 0,c)},s.createComplete=function(){return s.completeNotification},s.completeNotification=new s("C"),s}();e.Notification=i;function a(s,c){var u,l,d,h=s,p=h.kind,v=h.value,y=h.error;if(typeof p!="string")throw new TypeError('Invalid notification, missing "kind"');p==="N"?(u=c.next)===null||u===void 0||u.call(c,v):p==="E"?(l=c.error)===null||l===void 0||l.call(c,y):(d=c.complete)===null||d===void 0||d.call(c)}e.observeNotification=a})(ql);var Zl={};Object.defineProperty(Zl,"__esModule",{value:!0});Zl.isObservable=void 0;var NM=le,Hb=ce;function kM(e){return!!e&&(e instanceof NM.Observable||Hb.isFunction(e.lift)&&Hb.isFunction(e.subscribe))}Zl.isObservable=kM;var Ql={},tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.EmptyError=void 0;var MM=er;tr.EmptyError=MM.createErrorClass(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});Object.defineProperty(Ql,"__esModule",{value:!0});Ql.lastValueFrom=void 0;var DM=tr;function LM(e,r){var t=typeof r=="object";return new Promise(function(n,o){var i=!1,a;e.subscribe({next:function(s){a=s,i=!0},error:o,complete:function(){i?n(a):t?n(r.defaultValue):o(new DM.EmptyError)}})})}Ql.lastValueFrom=LM;var Xl={};Object.defineProperty(Xl,"__esModule",{value:!0});Xl.firstValueFrom=void 0;var UM=tr,FM=Xo;function BM(e,r){var t=typeof r=="object";return new Promise(function(n,o){var i=new FM.SafeSubscriber({next:function(a){n(a),i.unsubscribe()},error:o,complete:function(){t?n(r.defaultValue):o(new UM.EmptyError)}});e.subscribe(i)})}Xl.firstValueFrom=BM;var tu={};Object.defineProperty(tu,"__esModule",{value:!0});tu.ArgumentOutOfRangeError=void 0;var xM=er;tu.ArgumentOutOfRangeError=xM.createErrorClass(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}});var ru={};Object.defineProperty(ru,"__esModule",{value:!0});ru.NotFoundError=void 0;var VM=er;ru.NotFoundError=VM.createErrorClass(function(e){return function(t){e(this),this.name="NotFoundError",this.message=t}});var nu={};Object.defineProperty(nu,"__esModule",{value:!0});nu.SequenceError=void 0;var WM=er;nu.SequenceError=WM.createErrorClass(function(e){return function(t){e(this),this.name="SequenceError",this.message=t}});var Oa={},ii={};Object.defineProperty(ii,"__esModule",{value:!0});ii.isValidDate=void 0;function zM(e){return e instanceof Date&&!isNaN(e)}ii.isValidDate=zM;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.timeout=e.TimeoutError=void 0;var r=lt,t=ii,n=N,o=U,i=er,a=D,s=Vt;e.TimeoutError=i.createErrorClass(function(l){return function(h){h===void 0&&(h=null),l(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=h}});function c(l,d){var h=t.isValidDate(l)?{first:l}:typeof l=="number"?{each:l}:l,p=h.first,v=h.each,y=h.with,_=y===void 0?u:y,b=h.scheduler,w=b===void 0?d??r.asyncScheduler:b,S=h.meta,E=S===void 0?null:S;if(p==null&&v==null)throw new TypeError("No timeout provided.");return n.operate(function(T,C){var P,I,M=null,F=0,Q=function(H){I=s.executeSchedule(C,w,function(){try{P.unsubscribe(),o.innerFrom(_({meta:E,lastValue:M,seen:F})).subscribe(C)}catch(Z){C.error(Z)}},H)};P=T.subscribe(a.createOperatorSubscriber(C,function(H){I==null||I.unsubscribe(),F++,C.next(M=H),v>0&&Q(v)},void 0,void 0,function(){I!=null&&I.closed||I==null||I.unsubscribe(),M=null})),!F&&Q(p!=null?typeof p=="number"?p:+p-w.now():v)})}e.timeout=c;function u(l){throw new e.TimeoutError(l)}})(Oa);var Jl={},ou={},rr={},Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.map=void 0;var qM=N,HM=D;function GM(e,r){return qM.operate(function(t,n){var o=0;t.subscribe(HM.createOperatorSubscriber(n,function(i){n.next(e.call(r,i,o++))}))})}Wt.map=GM;var KM=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},YM=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(rr,"__esModule",{value:!0});rr.mapOneOrManyArgs=void 0;var ZM=Wt,QM=Array.isArray;function XM(e,r){return QM(r)?e.apply(void 0,YM([],KM(r))):e(r)}function JM(e){return ZM.map(function(r){return XM(e,r)})}rr.mapOneOrManyArgs=JM;var eD=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Gb=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(ou,"__esModule",{value:!0});ou.bindCallbackInternals=void 0;var tD=Zn,rD=le,nD=en,oD=rr,iD=Jr,aD=ti;function dv(e,r,t,n){if(t)if(tD.isScheduler(t))n=t;else return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return dv(e,r,n).apply(this,o).pipe(oD.mapOneOrManyArgs(t))};return n?function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return dv(e,r).apply(this,o).pipe(nD.subscribeOn(n),iD.observeOn(n))}:function(){for(var o=this,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=new aD.AsyncSubject,c=!0;return new rD.Observable(function(u){var l=s.subscribe(u);if(c){c=!1;var d=!1,h=!1;r.apply(o,Gb(Gb([],eD(i)),[function(){for(var p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];if(e){var y=p.shift();if(y!=null){s.error(y);return}}s.next(1<p.length?p:p[0]),h=!0,d&&s.complete()}])),h&&s.complete(),d=!0}return l})}}ou.bindCallbackInternals=dv;Object.defineProperty(Jl,"__esModule",{value:!0});Jl.bindCallback=void 0;var uD=ou;function sD(e,r,t){return uD.bindCallbackInternals(!1,e,r,t)}Jl.bindCallback=sD;var ef={};Object.defineProperty(ef,"__esModule",{value:!0});ef.bindNodeCallback=void 0;var cD=ou;function lD(e,r,t){return cD.bindCallbackInternals(!0,e,r,t)}ef.bindNodeCallback=lD;var Br={},iu={};Object.defineProperty(iu,"__esModule",{value:!0});iu.argsArgArrayOrObject=void 0;var fD=Array.isArray,dD=Object.getPrototypeOf,hD=Object.prototype,pD=Object.keys;function vD(e){if(e.length===1){var r=e[0];if(fD(r))return{args:r,keys:null};if(_D(r)){var t=pD(r);return{args:t.map(function(n){return r[n]}),keys:t}}}return{args:e,keys:null}}iu.argsArgArrayOrObject=vD;function _D(e){return e&&typeof e=="object"&&dD(e)===hD}var au={};Object.defineProperty(au,"__esModule",{value:!0});au.createObject=void 0;function yD(e,r){return e.reduce(function(t,n,o){return t[n]=r[o],t},{})}au.createObject=yD;Object.defineProperty(Br,"__esModule",{value:!0});Br.combineLatestInit=Br.combineLatest=void 0;var bD=le,mD=iu,MO=xt,DO=Me,gD=rr,Kb=Re,wD=au,OD=D,ED=Vt;function SD(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Kb.popScheduler(e),n=Kb.popResultSelector(e),o=mD.argsArgArrayOrObject(e),i=o.args,a=o.keys;if(i.length===0)return MO.from([],t);var s=new bD.Observable(LO(i,t,a?function(c){return wD.createObject(a,c)}:DO.identity));return n?s.pipe(gD.mapOneOrManyArgs(n)):s}Br.combineLatest=SD;function LO(e,r,t){return t===void 0&&(t=DO.identity),function(n){Yb(r,function(){for(var o=e.length,i=new Array(o),a=o,s=o,c=function(l){Yb(r,function(){var d=MO.from(e[l],r),h=!1;d.subscribe(OD.createOperatorSubscriber(n,function(p){i[l]=p,h||(h=!0,s--),s||n.next(t(i.slice()))},function(){--a||n.complete()}))},n)},u=0;u<o;u++)c(u)},n)}}Br.combineLatestInit=LO;function Yb(e,r,t){e?ED.executeSchedule(t,e,r):r()}var Qn={},Xn={},tn={},Pt={},ai={};Object.defineProperty(ai,"__esModule",{value:!0});ai.mergeInternals=void 0;var TD=U,PD=Vt,Zb=D;function CD(e,r,t,n,o,i,a,s){var c=[],u=0,l=0,d=!1,h=function(){d&&!c.length&&!u&&r.complete()},p=function(y){return u<n?v(y):c.push(y)},v=function(y){i&&r.next(y),u++;var _=!1;TD.innerFrom(t(y,l++)).subscribe(Zb.createOperatorSubscriber(r,function(b){o==null||o(b),i?p(b):r.next(b)},function(){_=!0},void 0,function(){if(_)try{u--;for(var b=function(){var w=c.shift();a?PD.executeSchedule(r,a,function(){return v(w)}):v(w)};c.length&&u<n;)b();h()}catch(w){r.error(w)}}))};return e.subscribe(Zb.createOperatorSubscriber(r,p,function(){d=!0,h()})),function(){s==null||s()}}ai.mergeInternals=CD;Object.defineProperty(Pt,"__esModule",{value:!0});Pt.mergeMap=void 0;var AD=Wt,ID=U,RD=N,jD=ai,$D=ce;function UO(e,r,t){return t===void 0&&(t=1/0),$D.isFunction(r)?UO(function(n,o){return AD.map(function(i,a){return r(n,i,o,a)})(ID.innerFrom(e(n,o)))},t):(typeof r=="number"&&(t=r),RD.operate(function(n,o){return jD.mergeInternals(n,o,e,t)}))}Pt.mergeMap=UO;Object.defineProperty(tn,"__esModule",{value:!0});tn.mergeAll=void 0;var ND=Pt,kD=Me;function MD(e){return e===void 0&&(e=1/0),ND.mergeMap(kD.identity,e)}tn.mergeAll=MD;Object.defineProperty(Xn,"__esModule",{value:!0});Xn.concatAll=void 0;var DD=tn;function LD(){return DD.mergeAll(1)}Xn.concatAll=LD;Object.defineProperty(Qn,"__esModule",{value:!0});Qn.concat=void 0;var UD=Xn,FD=Re,BD=xt;function xD(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return UD.concatAll()(BD.from(e,FD.popScheduler(e)))}Qn.concat=xD;var tf={},Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.defer=void 0;var VD=le,WD=U;function zD(e){return new VD.Observable(function(r){WD.innerFrom(e()).subscribe(r)})}Jn.defer=zD;Object.defineProperty(tf,"__esModule",{value:!0});tf.connectable=void 0;var qD=Ce,HD=le,GD=Jn,KD={connector:function(){return new qD.Subject},resetOnDisconnect:!0};function YD(e,r){r===void 0&&(r=KD);var t=null,n=r.connector,o=r.resetOnDisconnect,i=o===void 0?!0:o,a=n(),s=new HD.Observable(function(c){return a.subscribe(c)});return s.connect=function(){return(!t||t.closed)&&(t=GD.defer(function(){return e}).subscribe(a),i&&t.add(function(){return a=n()})),t},s}tf.connectable=YD;var rf={};Object.defineProperty(rf,"__esModule",{value:!0});rf.forkJoin=void 0;var ZD=le,QD=iu,XD=U,JD=Re,e2=D,t2=rr,r2=au;function n2(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=JD.popResultSelector(e),n=QD.argsArgArrayOrObject(e),o=n.args,i=n.keys,a=new ZD.Observable(function(s){var c=o.length;if(!c){s.complete();return}for(var u=new Array(c),l=c,d=c,h=function(v){var y=!1;XD.innerFrom(o[v]).subscribe(e2.createOperatorSubscriber(s,function(_){y||(y=!0,d--),u[v]=_},function(){return l--},void 0,function(){(!l||!y)&&(d||s.next(i?r2.createObject(i,u):u),s.complete())}))},p=0;p<c;p++)h(p)});return t?a.pipe(t2.mapOneOrManyArgs(t)):a}rf.forkJoin=n2;var nf={},o2=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(nf,"__esModule",{value:!0});nf.fromEvent=void 0;var i2=U,a2=le,u2=Pt,s2=ni,Ln=ce,c2=rr,l2=["addListener","removeListener"],f2=["addEventListener","removeEventListener"],d2=["on","off"];function hv(e,r,t,n){if(Ln.isFunction(t)&&(n=t,t=void 0),n)return hv(e,r,t).pipe(c2.mapOneOrManyArgs(n));var o=o2(v2(e)?f2.map(function(s){return function(c){return e[s](r,c,t)}}):h2(e)?l2.map(Qb(e,r)):p2(e)?d2.map(Qb(e,r)):[],2),i=o[0],a=o[1];if(!i&&s2.isArrayLike(e))return u2.mergeMap(function(s){return hv(s,r,t)})(i2.innerFrom(e));if(!i)throw new TypeError("Invalid event target");return new a2.Observable(function(s){var c=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return s.next(1<u.length?u:u[0])};return i(c),function(){return a(c)}})}nf.fromEvent=hv;function Qb(e,r){return function(t){return function(n){return e[t](r,n)}}}function h2(e){return Ln.isFunction(e.addListener)&&Ln.isFunction(e.removeListener)}function p2(e){return Ln.isFunction(e.on)&&Ln.isFunction(e.off)}function v2(e){return Ln.isFunction(e.addEventListener)&&Ln.isFunction(e.removeEventListener)}var of={};Object.defineProperty(of,"__esModule",{value:!0});of.fromEventPattern=void 0;var _2=le,y2=ce,b2=rr;function FO(e,r,t){return t?FO(e,r).pipe(b2.mapOneOrManyArgs(t)):new _2.Observable(function(n){var o=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return n.next(a.length===1?a[0]:a)},i=e(o);return y2.isFunction(r)?function(){return r(o,i)}:void 0})}of.fromEventPattern=FO;var af={},m2=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(af,"__esModule",{value:!0});af.generate=void 0;var Xb=Me,g2=Zn,w2=Jn,O2=Xa;function E2(e,r,t,n,o){var i,a,s,c;arguments.length===1?(i=e,c=i.initialState,r=i.condition,t=i.iterate,a=i.resultSelector,s=a===void 0?Xb.identity:a,o=i.scheduler):(c=e,!n||g2.isScheduler(n)?(s=Xb.identity,o=n):s=n);function u(){var l;return m2(this,function(d){switch(d.label){case 0:l=c,d.label=1;case 1:return!r||r(l)?[4,s(l)]:[3,4];case 2:d.sent(),d.label=3;case 3:return l=t(l),[3,1];case 4:return[2]}})}return w2.defer(o?function(){return O2.scheduleIterable(u(),o)}:u)}af.generate=E2;var uf={};Object.defineProperty(uf,"__esModule",{value:!0});uf.iif=void 0;var S2=Jn;function T2(e,r,t){return S2.defer(function(){return e()?r:t})}uf.iif=T2;var uu={},nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.timer=void 0;var P2=le,C2=lt,A2=Zn,I2=ii;function R2(e,r,t){e===void 0&&(e=0),t===void 0&&(t=C2.async);var n=-1;return r!=null&&(A2.isScheduler(r)?t=r:n=r),new P2.Observable(function(o){var i=I2.isValidDate(e)?+e-t.now():e;i<0&&(i=0);var a=0;return t.schedule(function(){o.closed||(o.next(a++),0<=n?this.schedule(void 0,n):o.complete())},i)})}nr.timer=R2;Object.defineProperty(uu,"__esModule",{value:!0});uu.interval=void 0;var j2=lt,$2=nr;function N2(e,r){return e===void 0&&(e=0),r===void 0&&(r=j2.asyncScheduler),e<0&&(e=0),$2.timer(e,e,r)}uu.interval=N2;var sf={};Object.defineProperty(sf,"__esModule",{value:!0});sf.merge=void 0;var k2=tn,M2=U,D2=Ut,Jb=Re,L2=xt;function U2(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Jb.popScheduler(e),n=Jb.popNumber(e,1/0),o=e;return o.length?o.length===1?M2.innerFrom(o[0]):k2.mergeAll(n)(L2.from(o,t)):D2.EMPTY}sf.merge=U2;var pv={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.never=e.NEVER=void 0;var r=le,t=ke;e.NEVER=new r.Observable(t.noop);function n(){return e.NEVER}e.never=n})(pv);var su={},mr={};Object.defineProperty(mr,"__esModule",{value:!0});mr.argsOrArgArray=void 0;var F2=Array.isArray;function B2(e){return e.length===1&&F2(e[0])?e[0]:e}mr.argsOrArgArray=B2;Object.defineProperty(su,"__esModule",{value:!0});su.onErrorResumeNext=void 0;var x2=le,V2=mr,W2=D,em=ke,z2=U;function q2(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=V2.argsOrArgArray(e);return new x2.Observable(function(n){var o=0,i=function(){if(o<t.length){var a=void 0;try{a=z2.innerFrom(t[o++])}catch{i();return}var s=new W2.OperatorSubscriber(n,void 0,em.noop,em.noop);a.subscribe(s),s.add(i)}else n.complete()};i()})}su.onErrorResumeNext=q2;var cf={};Object.defineProperty(cf,"__esModule",{value:!0});cf.pairs=void 0;var H2=xt;function G2(e,r){return H2.from(Object.entries(e),r)}cf.pairs=G2;var lf={},cu={};Object.defineProperty(cu,"__esModule",{value:!0});cu.not=void 0;function K2(e,r){return function(t,n){return!e.call(r,t,n)}}cu.not=K2;var zt={};Object.defineProperty(zt,"__esModule",{value:!0});zt.filter=void 0;var Y2=N,Z2=D;function Q2(e,r){return Y2.operate(function(t,n){var o=0;t.subscribe(Z2.createOperatorSubscriber(n,function(i){return e.call(r,i,o++)&&n.next(i)}))})}zt.filter=Q2;Object.defineProperty(lf,"__esModule",{value:!0});lf.partition=void 0;var X2=cu,tm=zt,rm=U;function J2(e,r,t){return[tm.filter(r,t)(rm.innerFrom(e)),tm.filter(X2.not(r,t))(rm.innerFrom(e))]}lf.partition=J2;var Un={};Object.defineProperty(Un,"__esModule",{value:!0});Un.raceInit=Un.race=void 0;var eL=le,BO=U,tL=mr,rL=D;function nL(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e=tL.argsOrArgArray(e),e.length===1?BO.innerFrom(e[0]):new eL.Observable(xO(e))}Un.race=nL;function xO(e){return function(r){for(var t=[],n=function(i){t.push(BO.innerFrom(e[i]).subscribe(rL.createOperatorSubscriber(r,function(a){if(t){for(var s=0;s<t.length;s++)s!==i&&t[s].unsubscribe();t=null}r.next(a)})))},o=0;t&&!r.closed&&o<e.length;o++)n(o)}}Un.raceInit=xO;var ff={};Object.defineProperty(ff,"__esModule",{value:!0});ff.range=void 0;var oL=le,iL=Ut;function aL(e,r,t){if(r==null&&(r=e,e=0),r<=0)return iL.EMPTY;var n=r+e;return new oL.Observable(t?function(o){var i=e;return t.schedule(function(){i<n?(o.next(i++),this.schedule()):o.complete()})}:function(o){for(var i=e;i<n&&!o.closed;)o.next(i++);o.complete()})}ff.range=aL;var df={};Object.defineProperty(df,"__esModule",{value:!0});df.using=void 0;var uL=le,sL=U,cL=Ut;function lL(e,r){return new uL.Observable(function(t){var n=e(),o=r(n),i=o?sL.innerFrom(o):cL.EMPTY;return i.subscribe(t),function(){n&&n.unsubscribe()}})}df.using=lL;var ui={},fL=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},dL=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(ui,"__esModule",{value:!0});ui.zip=void 0;var hL=le,pL=U,vL=mr,_L=Ut,yL=D,bL=Re;function mL(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=bL.popResultSelector(e),n=vL.argsOrArgArray(e);return n.length?new hL.Observable(function(o){var i=n.map(function(){return[]}),a=n.map(function(){return!1});o.add(function(){i=a=null});for(var s=function(u){pL.innerFrom(n[u]).subscribe(yL.createOperatorSubscriber(o,function(l){if(i[u].push(l),i.every(function(h){return h.length})){var d=i.map(function(h){return h.shift()});o.next(t?t.apply(void 0,dL([],fL(d))):d),i.some(function(h,p){return!h.length&&a[p]})&&o.complete()}},function(){a[u]=!0,!i[u].length&&o.complete()}))},c=0;!o.closed&&c<n.length;c++)s(c);return function(){i=a=null}}):_L.EMPTY}ui.zip=mL;var VO={};Object.defineProperty(VO,"__esModule",{value:!0});var si={};Object.defineProperty(si,"__esModule",{value:!0});si.audit=void 0;var gL=N,wL=U,nm=D;function OL(e){return gL.operate(function(r,t){var n=!1,o=null,i=null,a=!1,s=function(){if(i==null||i.unsubscribe(),i=null,n){n=!1;var u=o;o=null,t.next(u)}a&&t.complete()},c=function(){i=null,a&&t.complete()};r.subscribe(nm.createOperatorSubscriber(t,function(u){n=!0,o=u,i||wL.innerFrom(e(u)).subscribe(i=nm.createOperatorSubscriber(t,s,c))},function(){a=!0,(!n||!i||i.closed)&&t.complete()}))})}si.audit=OL;var lu={};Object.defineProperty(lu,"__esModule",{value:!0});lu.auditTime=void 0;var EL=lt,SL=si,TL=nr;function PL(e,r){return r===void 0&&(r=EL.asyncScheduler),SL.audit(function(){return TL.timer(e,r)})}lu.auditTime=PL;var fu={};Object.defineProperty(fu,"__esModule",{value:!0});fu.buffer=void 0;var CL=N,AL=ke,om=D,IL=U;function RL(e){return CL.operate(function(r,t){var n=[];return r.subscribe(om.createOperatorSubscriber(t,function(o){return n.push(o)},function(){t.next(n),t.complete()})),IL.innerFrom(e).subscribe(om.createOperatorSubscriber(t,function(){var o=n;n=[],t.next(o)},AL.noop)),function(){n=null}})}fu.buffer=RL;var du={},ap=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(du,"__esModule",{value:!0});du.bufferCount=void 0;var jL=N,$L=D,NL=Bt;function kL(e,r){return r===void 0&&(r=null),r=r??e,jL.operate(function(t,n){var o=[],i=0;t.subscribe($L.createOperatorSubscriber(n,function(a){var s,c,u,l,d=null;i++%r===0&&o.push([]);try{for(var h=ap(o),p=h.next();!p.done;p=h.next()){var v=p.value;v.push(a),e<=v.length&&(d=d??[],d.push(v))}}catch(b){s={error:b}}finally{try{p&&!p.done&&(c=h.return)&&c.call(h)}finally{if(s)throw s.error}}if(d)try{for(var y=ap(d),_=y.next();!_.done;_=y.next()){var v=_.value;NL.arrRemove(o,v),n.next(v)}}catch(b){u={error:b}}finally{try{_&&!_.done&&(l=y.return)&&l.call(y)}finally{if(u)throw u.error}}},function(){var a,s;try{for(var c=ap(o),u=c.next();!u.done;u=c.next()){var l=u.value;n.next(l)}}catch(d){a={error:d}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}n.complete()},void 0,function(){o=null}))})}du.bufferCount=kL;var hu={},ML=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(hu,"__esModule",{value:!0});hu.bufferTime=void 0;var DL=Ne,LL=N,UL=D,FL=Bt,BL=lt,xL=Re,im=Vt;function VL(e){for(var r,t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=(r=xL.popScheduler(n))!==null&&r!==void 0?r:BL.asyncScheduler,a=(t=n[0])!==null&&t!==void 0?t:null,s=n[1]||1/0;return LL.operate(function(c,u){var l=[],d=!1,h=function(y){var _=y.buffer,b=y.subs;b.unsubscribe(),FL.arrRemove(l,y),u.next(_),d&&p()},p=function(){if(l){var y=new DL.Subscription;u.add(y);var _=[],b={buffer:_,subs:y};l.push(b),im.executeSchedule(y,i,function(){return h(b)},e)}};a!==null&&a>=0?im.executeSchedule(u,i,p,a,!0):d=!0,p();var v=UL.createOperatorSubscriber(u,function(y){var _,b,w=l.slice();try{for(var S=ML(w),E=S.next();!E.done;E=S.next()){var T=E.value,C=T.buffer;C.push(y),s<=C.length&&h(T)}}catch(P){_={error:P}}finally{try{E&&!E.done&&(b=S.return)&&b.call(S)}finally{if(_)throw _.error}}},function(){for(;l!=null&&l.length;)u.next(l.shift().buffer);v==null||v.unsubscribe(),u.complete(),u.unsubscribe()},void 0,function(){return l=null});c.subscribe(v)})}hu.bufferTime=VL;var pu={},WL=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(pu,"__esModule",{value:!0});pu.bufferToggle=void 0;var zL=Ne,qL=N,am=U,up=D,um=ke,HL=Bt;function GL(e,r){return qL.operate(function(t,n){var o=[];am.innerFrom(e).subscribe(up.createOperatorSubscriber(n,function(i){var a=[];o.push(a);var s=new zL.Subscription,c=function(){HL.arrRemove(o,a),n.next(a),s.unsubscribe()};s.add(am.innerFrom(r(i)).subscribe(up.createOperatorSubscriber(n,c,um.noop)))},um.noop)),t.subscribe(up.createOperatorSubscriber(n,function(i){var a,s;try{for(var c=WL(o),u=c.next();!u.done;u=c.next()){var l=u.value;l.push(i)}}catch(d){a={error:d}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}},function(){for(;o.length>0;)n.next(o.shift());n.complete()}))})}pu.bufferToggle=GL;var vu={};Object.defineProperty(vu,"__esModule",{value:!0});vu.bufferWhen=void 0;var KL=N,YL=ke,sm=D,ZL=U;function QL(e){return KL.operate(function(r,t){var n=null,o=null,i=function(){o==null||o.unsubscribe();var a=n;n=[],a&&t.next(a),ZL.innerFrom(e()).subscribe(o=sm.createOperatorSubscriber(t,i,YL.noop))};i(),r.subscribe(sm.createOperatorSubscriber(t,function(a){return n==null?void 0:n.push(a)},function(){n&&t.next(n),t.complete()},void 0,function(){return n=o=null}))})}vu.bufferWhen=QL;var _u={};Object.defineProperty(_u,"__esModule",{value:!0});_u.catchError=void 0;var XL=U,JL=D,eU=N;function WO(e){return eU.operate(function(r,t){var n=null,o=!1,i;n=r.subscribe(JL.createOperatorSubscriber(t,void 0,void 0,function(a){i=XL.innerFrom(e(a,WO(e)(r))),n?(n.unsubscribe(),n=null,i.subscribe(t)):o=!0})),o&&(n.unsubscribe(),n=null,i.subscribe(t))})}_u.catchError=WO;var yu={},ci={},bu={},li={},gr={},mu={};Object.defineProperty(mu,"__esModule",{value:!0});mu.scanInternals=void 0;var tU=D;function rU(e,r,t,n,o){return function(i,a){var s=t,c=r,u=0;i.subscribe(tU.createOperatorSubscriber(a,function(l){var d=u++;c=s?e(c,l,d):(s=!0,l),n&&a.next(c)},o&&function(){s&&a.next(c),a.complete()}))}}mu.scanInternals=rU;Object.defineProperty(gr,"__esModule",{value:!0});gr.reduce=void 0;var nU=mu,oU=N;function iU(e,r){return oU.operate(nU.scanInternals(e,r,arguments.length>=2,!1,!0))}gr.reduce=iU;Object.defineProperty(li,"__esModule",{value:!0});li.toArray=void 0;var aU=gr,uU=N,sU=function(e,r){return e.push(r),e};function cU(){return uU.operate(function(e,r){aU.reduce(sU,[])(e).subscribe(r)})}li.toArray=cU;Object.defineProperty(bu,"__esModule",{value:!0});bu.joinAllInternals=void 0;var lU=Me,fU=rr,dU=br,hU=Pt,pU=li;function vU(e,r){return dU.pipe(pU.toArray(),hU.mergeMap(function(t){return e(t)}),r?fU.mapOneOrManyArgs(r):lU.identity)}bu.joinAllInternals=vU;Object.defineProperty(ci,"__esModule",{value:!0});ci.combineLatestAll=void 0;var _U=Br,yU=bu;function bU(e){return yU.joinAllInternals(_U.combineLatest,e)}ci.combineLatestAll=bU;Object.defineProperty(yu,"__esModule",{value:!0});yu.combineAll=void 0;var mU=ci;yu.combineAll=mU.combineLatestAll;var gu={},wu={},cm=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},lm=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(wu,"__esModule",{value:!0});wu.combineLatest=void 0;var gU=Br,wU=N,OU=mr,EU=rr,SU=br,TU=Re;function zO(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=TU.popResultSelector(e);return t?SU.pipe(zO.apply(void 0,lm([],cm(e))),EU.mapOneOrManyArgs(t)):wU.operate(function(n,o){gU.combineLatestInit(lm([n],cm(OU.argsOrArgArray(e))))(o)})}wu.combineLatest=zO;var PU=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},CU=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(gu,"__esModule",{value:!0});gu.combineLatestWith=void 0;var AU=wu;function IU(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return AU.combineLatest.apply(void 0,CU([],PU(e)))}gu.combineLatestWith=IU;var fi={};Object.defineProperty(fi,"__esModule",{value:!0});fi.concatMap=void 0;var fm=Pt,RU=ce;function jU(e,r){return RU.isFunction(r)?fm.mergeMap(e,r,1):fm.mergeMap(e,1)}fi.concatMap=jU;var Ou={};Object.defineProperty(Ou,"__esModule",{value:!0});Ou.concatMapTo=void 0;var dm=fi,$U=ce;function NU(e,r){return $U.isFunction(r)?dm.concatMap(function(){return e},r):dm.concatMap(function(){return e})}Ou.concatMapTo=NU;var Eu={},Su={},kU=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},MU=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Su,"__esModule",{value:!0});Su.concat=void 0;var DU=N,LU=Xn,UU=Re,FU=xt;function BU(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=UU.popScheduler(e);return DU.operate(function(n,o){LU.concatAll()(FU.from(MU([n],kU(e)),t)).subscribe(o)})}Su.concat=BU;var xU=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},VU=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Eu,"__esModule",{value:!0});Eu.concatWith=void 0;var WU=Su;function zU(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return WU.concat.apply(void 0,VU([],xU(e)))}Eu.concatWith=zU;var eo={},hf={};Object.defineProperty(hf,"__esModule",{value:!0});hf.fromSubscribable=void 0;var qU=le;function HU(e){return new qU.Observable(function(r){return e.subscribe(r)})}hf.fromSubscribable=HU;Object.defineProperty(eo,"__esModule",{value:!0});eo.connect=void 0;var GU=Ce,KU=U,YU=N,ZU=hf,QU={connector:function(){return new GU.Subject}};function XU(e,r){r===void 0&&(r=QU);var t=r.connector;return YU.operate(function(n,o){var i=t();KU.innerFrom(e(ZU.fromSubscribable(i))).subscribe(o),o.add(n.subscribe(i))})}eo.connect=XU;var Tu={};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.count=void 0;var JU=gr;function e4(e){return JU.reduce(function(r,t,n){return!e||e(t,n)?r+1:r},0)}Tu.count=e4;var Pu={};Object.defineProperty(Pu,"__esModule",{value:!0});Pu.debounce=void 0;var t4=N,r4=ke,hm=D,n4=U;function o4(e){return t4.operate(function(r,t){var n=!1,o=null,i=null,a=function(){if(i==null||i.unsubscribe(),i=null,n){n=!1;var s=o;o=null,t.next(s)}};r.subscribe(hm.createOperatorSubscriber(t,function(s){i==null||i.unsubscribe(),n=!0,o=s,i=hm.createOperatorSubscriber(t,a,r4.noop),n4.innerFrom(e(s)).subscribe(i)},function(){a(),t.complete()},void 0,function(){o=i=null}))})}Pu.debounce=o4;var Cu={};Object.defineProperty(Cu,"__esModule",{value:!0});Cu.debounceTime=void 0;var i4=lt,a4=N,u4=D;function s4(e,r){return r===void 0&&(r=i4.asyncScheduler),a4.operate(function(t,n){var o=null,i=null,a=null,s=function(){if(o){o.unsubscribe(),o=null;var u=i;i=null,n.next(u)}};function c(){var u=a+e,l=r.now();if(l<u){o=this.schedule(void 0,u-l),n.add(o);return}s()}t.subscribe(u4.createOperatorSubscriber(n,function(u){i=u,a=r.now(),o||(o=r.schedule(c,e),n.add(o))},function(){s(),n.complete()},void 0,function(){i=o=null}))})}Cu.debounceTime=s4;var rn={};Object.defineProperty(rn,"__esModule",{value:!0});rn.defaultIfEmpty=void 0;var c4=N,l4=D;function f4(e){return c4.operate(function(r,t){var n=!1;r.subscribe(l4.createOperatorSubscriber(t,function(o){n=!0,t.next(o)},function(){n||t.next(e),t.complete()}))})}rn.defaultIfEmpty=f4;var Au={},di={},nn={};Object.defineProperty(nn,"__esModule",{value:!0});nn.take=void 0;var d4=Ut,h4=N,p4=D;function v4(e){return e<=0?function(){return d4.EMPTY}:h4.operate(function(r,t){var n=0;r.subscribe(p4.createOperatorSubscriber(t,function(o){++n<=e&&(t.next(o),e<=n&&t.complete())}))})}nn.take=v4;var hi={};Object.defineProperty(hi,"__esModule",{value:!0});hi.ignoreElements=void 0;var _4=N,y4=D,b4=ke;function m4(){return _4.operate(function(e,r){e.subscribe(y4.createOperatorSubscriber(r,b4.noop))})}hi.ignoreElements=m4;var pi={};Object.defineProperty(pi,"__esModule",{value:!0});pi.mapTo=void 0;var g4=Wt;function w4(e){return g4.map(function(){return e})}pi.mapTo=w4;Object.defineProperty(di,"__esModule",{value:!0});di.delayWhen=void 0;var O4=Qn,pm=nn,E4=hi,S4=pi,T4=Pt,P4=U;function qO(e,r){return r?function(t){return O4.concat(r.pipe(pm.take(1),E4.ignoreElements()),t.pipe(qO(e)))}:T4.mergeMap(function(t,n){return P4.innerFrom(e(t,n)).pipe(pm.take(1),S4.mapTo(t))})}di.delayWhen=qO;Object.defineProperty(Au,"__esModule",{value:!0});Au.delay=void 0;var C4=lt,A4=di,I4=nr;function R4(e,r){r===void 0&&(r=C4.asyncScheduler);var t=I4.timer(e,r);return A4.delayWhen(function(){return t})}Au.delay=R4;var Iu={};Object.defineProperty(Iu,"__esModule",{value:!0});Iu.dematerialize=void 0;var j4=ql,$4=N,N4=D;function k4(){return $4.operate(function(e,r){e.subscribe(N4.createOperatorSubscriber(r,function(t){return j4.observeNotification(t,r)}))})}Iu.dematerialize=k4;var Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});Ru.distinct=void 0;var M4=N,vm=D,D4=ke,L4=U;function U4(e,r){return M4.operate(function(t,n){var o=new Set;t.subscribe(vm.createOperatorSubscriber(n,function(i){var a=e?e(i):i;o.has(a)||(o.add(a),n.next(i))})),r&&L4.innerFrom(r).subscribe(vm.createOperatorSubscriber(n,function(){return o.clear()},D4.noop))})}Ru.distinct=U4;var vi={};Object.defineProperty(vi,"__esModule",{value:!0});vi.distinctUntilChanged=void 0;var F4=Me,B4=N,x4=D;function V4(e,r){return r===void 0&&(r=F4.identity),e=e??W4,B4.operate(function(t,n){var o,i=!0;t.subscribe(x4.createOperatorSubscriber(n,function(a){var s=r(a);(i||!e(o,s))&&(i=!1,o=s,n.next(a))}))})}vi.distinctUntilChanged=V4;function W4(e,r){return e===r}var ju={};Object.defineProperty(ju,"__esModule",{value:!0});ju.distinctUntilKeyChanged=void 0;var z4=vi;function q4(e,r){return z4.distinctUntilChanged(function(t,n){return r?r(t[e],n[e]):t[e]===n[e]})}ju.distinctUntilKeyChanged=q4;var $u={},on={};Object.defineProperty(on,"__esModule",{value:!0});on.throwIfEmpty=void 0;var H4=tr,G4=N,K4=D;function Y4(e){return e===void 0&&(e=Z4),G4.operate(function(r,t){var n=!1;r.subscribe(K4.createOperatorSubscriber(t,function(o){n=!0,t.next(o)},function(){return n?t.complete():t.error(e())}))})}on.throwIfEmpty=Y4;function Z4(){return new H4.EmptyError}Object.defineProperty($u,"__esModule",{value:!0});$u.elementAt=void 0;var _m=tu,Q4=zt,X4=on,J4=rn,eF=nn;function tF(e,r){if(e<0)throw new _m.ArgumentOutOfRangeError;var t=arguments.length>=2;return function(n){return n.pipe(Q4.filter(function(o,i){return i===e}),eF.take(1),t?J4.defaultIfEmpty(r):X4.throwIfEmpty(function(){return new _m.ArgumentOutOfRangeError}))}}$u.elementAt=tF;var Nu={},rF=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},nF=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Nu,"__esModule",{value:!0});Nu.endWith=void 0;var oF=Qn,iF=ri;function aF(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(t){return oF.concat(t,iF.of.apply(void 0,nF([],rF(e))))}}Nu.endWith=aF;var ku={};Object.defineProperty(ku,"__esModule",{value:!0});ku.every=void 0;var uF=N,sF=D;function cF(e,r){return uF.operate(function(t,n){var o=0;t.subscribe(sF.createOperatorSubscriber(n,function(i){e.call(r,i,o++,t)||(n.next(!1),n.complete())},function(){n.next(!0),n.complete()}))})}ku.every=cF;var Mu={},_i={},yi={};Object.defineProperty(yi,"__esModule",{value:!0});yi.exhaustMap=void 0;var lF=Wt,ym=U,fF=N,bm=D;function HO(e,r){return r?function(t){return t.pipe(HO(function(n,o){return ym.innerFrom(e(n,o)).pipe(lF.map(function(i,a){return r(n,i,o,a)}))}))}:fF.operate(function(t,n){var o=0,i=null,a=!1;t.subscribe(bm.createOperatorSubscriber(n,function(s){i||(i=bm.createOperatorSubscriber(n,void 0,function(){i=null,a&&n.complete()}),ym.innerFrom(e(s,o++)).subscribe(i))},function(){a=!0,!i&&n.complete()}))})}yi.exhaustMap=HO;Object.defineProperty(_i,"__esModule",{value:!0});_i.exhaustAll=void 0;var dF=yi,hF=Me;function pF(){return dF.exhaustMap(hF.identity)}_i.exhaustAll=pF;Object.defineProperty(Mu,"__esModule",{value:!0});Mu.exhaust=void 0;var vF=_i;Mu.exhaust=vF.exhaustAll;var Du={};Object.defineProperty(Du,"__esModule",{value:!0});Du.expand=void 0;var _F=N,yF=ai;function bF(e,r,t){return r===void 0&&(r=1/0),r=(r||0)<1?1/0:r,_F.operate(function(n,o){return yF.mergeInternals(n,o,e,r,void 0,!0,t)})}Du.expand=bF;var Lu={};Object.defineProperty(Lu,"__esModule",{value:!0});Lu.finalize=void 0;var mF=N;function gF(e){return mF.operate(function(r,t){try{r.subscribe(t)}finally{t.add(e)}})}Lu.finalize=gF;var xr={};Object.defineProperty(xr,"__esModule",{value:!0});xr.createFind=xr.find=void 0;var wF=N,OF=D;function EF(e,r){return wF.operate(GO(e,r,"value"))}xr.find=EF;function GO(e,r,t){var n=t==="index";return function(o,i){var a=0;o.subscribe(OF.createOperatorSubscriber(i,function(s){var c=a++;e.call(r,s,c,o)&&(i.next(n?c:s),i.complete())},function(){i.next(n?-1:void 0),i.complete()}))}}xr.createFind=GO;var Uu={};Object.defineProperty(Uu,"__esModule",{value:!0});Uu.findIndex=void 0;var SF=N,TF=xr;function PF(e,r){return SF.operate(TF.createFind(e,r,"index"))}Uu.findIndex=PF;var Fu={};Object.defineProperty(Fu,"__esModule",{value:!0});Fu.first=void 0;var CF=tr,AF=zt,IF=nn,RF=rn,jF=on,$F=Me;function NF(e,r){var t=arguments.length>=2;return function(n){return n.pipe(e?AF.filter(function(o,i){return e(o,i,n)}):$F.identity,IF.take(1),t?RF.defaultIfEmpty(r):jF.throwIfEmpty(function(){return new CF.EmptyError}))}}Fu.first=NF;var Bu={};Object.defineProperty(Bu,"__esModule",{value:!0});Bu.groupBy=void 0;var kF=le,MF=U,DF=Ce,LF=N,mm=D;function UF(e,r,t,n){return LF.operate(function(o,i){var a;!r||typeof r=="function"?a=r:(t=r.duration,a=r.element,n=r.connector);var s=new Map,c=function(v){s.forEach(v),v(i)},u=function(v){return c(function(y){return y.error(v)})},l=0,d=!1,h=new mm.OperatorSubscriber(i,function(v){try{var y=e(v),_=s.get(y);if(!_){s.set(y,_=n?n():new DF.Subject);var b=p(y,_);if(i.next(b),t){var w=mm.createOperatorSubscriber(_,function(){_.complete(),w==null||w.unsubscribe()},void 0,void 0,function(){return s.delete(y)});h.add(MF.innerFrom(t(b)).subscribe(w))}}_.next(a?a(v):v)}catch(S){u(S)}},function(){return c(function(v){return v.complete()})},u,function(){return s.clear()},function(){return d=!0,l===0});o.subscribe(h);function p(v,y){var _=new kF.Observable(function(b){l++;var w=y.subscribe(b);return function(){w.unsubscribe(),--l===0&&d&&h.unsubscribe()}});return _.key=v,_}})}Bu.groupBy=UF;var xu={};Object.defineProperty(xu,"__esModule",{value:!0});xu.isEmpty=void 0;var FF=N,BF=D;function xF(){return FF.operate(function(e,r){e.subscribe(BF.createOperatorSubscriber(r,function(){r.next(!1),r.complete()},function(){r.next(!0),r.complete()}))})}xu.isEmpty=xF;var Vu={},bi={},VF=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(bi,"__esModule",{value:!0});bi.takeLast=void 0;var WF=Ut,zF=N,qF=D;function HF(e){return e<=0?function(){return WF.EMPTY}:zF.operate(function(r,t){var n=[];r.subscribe(qF.createOperatorSubscriber(t,function(o){n.push(o),e<n.length&&n.shift()},function(){var o,i;try{for(var a=VF(n),s=a.next();!s.done;s=a.next()){var c=s.value;t.next(c)}}catch(u){o={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}t.complete()},void 0,function(){n=null}))})}bi.takeLast=HF;Object.defineProperty(Vu,"__esModule",{value:!0});Vu.last=void 0;var GF=tr,KF=zt,YF=bi,ZF=on,QF=rn,XF=Me;function JF(e,r){var t=arguments.length>=2;return function(n){return n.pipe(e?KF.filter(function(o,i){return e(o,i,n)}):XF.identity,YF.takeLast(1),t?QF.defaultIfEmpty(r):ZF.throwIfEmpty(function(){return new GF.EmptyError}))}}Vu.last=JF;var Wu={};Object.defineProperty(Wu,"__esModule",{value:!0});Wu.materialize=void 0;var sp=ql,eB=N,tB=D;function rB(){return eB.operate(function(e,r){e.subscribe(tB.createOperatorSubscriber(r,function(t){r.next(sp.Notification.createNext(t))},function(){r.next(sp.Notification.createComplete()),r.complete()},function(t){r.next(sp.Notification.createError(t)),r.complete()}))})}Wu.materialize=rB;var zu={};Object.defineProperty(zu,"__esModule",{value:!0});zu.max=void 0;var nB=gr,oB=ce;function iB(e){return nB.reduce(oB.isFunction(e)?function(r,t){return e(r,t)>0?r:t}:function(r,t){return r>t?r:t})}zu.max=iB;var qu={};Object.defineProperty(qu,"__esModule",{value:!0});qu.flatMap=void 0;var aB=Pt;qu.flatMap=aB.mergeMap;var Hu={};Object.defineProperty(Hu,"__esModule",{value:!0});Hu.mergeMapTo=void 0;var gm=Pt,uB=ce;function sB(e,r,t){return t===void 0&&(t=1/0),uB.isFunction(r)?gm.mergeMap(function(){return e},r,t):(typeof r=="number"&&(t=r),gm.mergeMap(function(){return e},t))}Hu.mergeMapTo=sB;var Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});Gu.mergeScan=void 0;var cB=N,lB=ai;function fB(e,r,t){return t===void 0&&(t=1/0),cB.operate(function(n,o){var i=r;return lB.mergeInternals(n,o,function(a,s){return e(i,a,s)},t,function(a){i=a},!1,void 0,function(){return i=null})})}Gu.mergeScan=fB;var Ku={},Yu={},dB=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},hB=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.merge=void 0;var pB=N,vB=tn,wm=Re,_B=xt;function yB(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=wm.popScheduler(e),n=wm.popNumber(e,1/0);return pB.operate(function(o,i){vB.mergeAll(n)(_B.from(hB([o],dB(e)),t)).subscribe(i)})}Yu.merge=yB;var bB=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},mB=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ku,"__esModule",{value:!0});Ku.mergeWith=void 0;var gB=Yu;function wB(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return gB.merge.apply(void 0,mB([],bB(e)))}Ku.mergeWith=wB;var Zu={};Object.defineProperty(Zu,"__esModule",{value:!0});Zu.min=void 0;var OB=gr,EB=ce;function SB(e){return OB.reduce(EB.isFunction(e)?function(r,t){return e(r,t)<0?r:t}:function(r,t){return r<t?r:t})}Zu.min=SB;var to={};Object.defineProperty(to,"__esModule",{value:!0});to.multicast=void 0;var TB=Yn,Om=ce,PB=eo;function CB(e,r){var t=Om.isFunction(e)?e:function(){return e};return Om.isFunction(r)?PB.connect(r,{connector:t}):function(n){return new TB.ConnectableObservable(n,t)}}to.multicast=CB;var Fn={},AB=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},IB=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.onErrorResumeNext=Fn.onErrorResumeNextWith=void 0;var RB=mr,jB=su;function KO(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=RB.argsOrArgArray(e);return function(n){return jB.onErrorResumeNext.apply(void 0,IB([n],AB(t)))}}Fn.onErrorResumeNextWith=KO;Fn.onErrorResumeNext=KO;var Qu={};Object.defineProperty(Qu,"__esModule",{value:!0});Qu.pairwise=void 0;var $B=N,NB=D;function kB(){return $B.operate(function(e,r){var t,n=!1;e.subscribe(NB.createOperatorSubscriber(r,function(o){var i=t;t=o,n&&r.next([i,o]),n=!0}))})}Qu.pairwise=kB;var Xu={};Object.defineProperty(Xu,"__esModule",{value:!0});Xu.pluck=void 0;var MB=Wt;function DB(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=e.length;if(t===0)throw new Error("list of properties cannot be empty.");return MB.map(function(n){for(var o=n,i=0;i<t;i++){var a=o==null?void 0:o[e[i]];if(typeof a<"u")o=a;else return}return o})}Xu.pluck=DB;var Ju={};Object.defineProperty(Ju,"__esModule",{value:!0});Ju.publish=void 0;var LB=Ce,UB=to,FB=eo;function BB(e){return e?function(r){return FB.connect(e)(r)}:function(r){return UB.multicast(new LB.Subject)(r)}}Ju.publish=BB;var es={};Object.defineProperty(es,"__esModule",{value:!0});es.publishBehavior=void 0;var xB=za,VB=Yn;function WB(e){return function(r){var t=new xB.BehaviorSubject(e);return new VB.ConnectableObservable(r,function(){return t})}}es.publishBehavior=WB;var ts={};Object.defineProperty(ts,"__esModule",{value:!0});ts.publishLast=void 0;var zB=ti,qB=Yn;function HB(){return function(e){var r=new zB.AsyncSubject;return new qB.ConnectableObservable(e,function(){return r})}}ts.publishLast=HB;var rs={};Object.defineProperty(rs,"__esModule",{value:!0});rs.publishReplay=void 0;var GB=ei,KB=to,Em=ce;function YB(e,r,t,n){t&&!Em.isFunction(t)&&(n=t);var o=Em.isFunction(t)?t:void 0;return function(i){return KB.multicast(new GB.ReplaySubject(e,r,n),o)(i)}}rs.publishReplay=YB;var mi={},ZB=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},QB=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(mi,"__esModule",{value:!0});mi.raceWith=void 0;var XB=Un,JB=N,ex=Me;function tx(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length?JB.operate(function(t,n){XB.raceInit(QB([t],ZB(e)))(n)}):ex.identity}mi.raceWith=tx;var ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.repeat=void 0;var rx=Ut,nx=N,Sm=D,ox=U,ix=nr;function ax(e){var r,t=1/0,n;return e!=null&&(typeof e=="object"?(r=e.count,t=r===void 0?1/0:r,n=e.delay):t=e),t<=0?function(){return rx.EMPTY}:nx.operate(function(o,i){var a=0,s,c=function(){if(s==null||s.unsubscribe(),s=null,n!=null){var l=typeof n=="number"?ix.timer(n):ox.innerFrom(n(a)),d=Sm.createOperatorSubscriber(i,function(){d.unsubscribe(),u()});l.subscribe(d)}else u()},u=function(){var l=!1;s=o.subscribe(Sm.createOperatorSubscriber(i,void 0,function(){++a<t?s?c():l=!0:i.complete()})),l&&c()};u()})}ns.repeat=ax;var os={};Object.defineProperty(os,"__esModule",{value:!0});os.repeatWhen=void 0;var ux=U,sx=Ce,cx=N,Tm=D;function lx(e){return cx.operate(function(r,t){var n,o=!1,i,a=!1,s=!1,c=function(){return s&&a&&(t.complete(),!0)},u=function(){return i||(i=new sx.Subject,ux.innerFrom(e(i)).subscribe(Tm.createOperatorSubscriber(t,function(){n?l():o=!0},function(){a=!0,c()}))),i},l=function(){s=!1,n=r.subscribe(Tm.createOperatorSubscriber(t,void 0,function(){s=!0,!c()&&u().next()})),o&&(n.unsubscribe(),n=null,o=!1,l())};l()})}os.repeatWhen=lx;var is={};Object.defineProperty(is,"__esModule",{value:!0});is.retry=void 0;var fx=N,Pm=D,dx=Me,hx=nr,px=U;function vx(e){e===void 0&&(e=1/0);var r;e&&typeof e=="object"?r=e:r={count:e};var t=r.count,n=t===void 0?1/0:t,o=r.delay,i=r.resetOnSuccess,a=i===void 0?!1:i;return n<=0?dx.identity:fx.operate(function(s,c){var u=0,l,d=function(){var h=!1;l=s.subscribe(Pm.createOperatorSubscriber(c,function(p){a&&(u=0),c.next(p)},void 0,function(p){if(u++<n){var v=function(){l?(l.unsubscribe(),l=null,d()):h=!0};if(o!=null){var y=typeof o=="number"?hx.timer(o):px.innerFrom(o(p,u)),_=Pm.createOperatorSubscriber(c,function(){_.unsubscribe(),v()},function(){c.complete()});y.subscribe(_)}else v()}else c.error(p)})),h&&(l.unsubscribe(),l=null,d())};d()})}is.retry=vx;var as={};Object.defineProperty(as,"__esModule",{value:!0});as.retryWhen=void 0;var _x=U,yx=Ce,bx=N,Cm=D;function mx(e){return bx.operate(function(r,t){var n,o=!1,i,a=function(){n=r.subscribe(Cm.createOperatorSubscriber(t,void 0,void 0,function(s){i||(i=new yx.Subject,_x.innerFrom(e(i)).subscribe(Cm.createOperatorSubscriber(t,function(){return n?a():o=!0}))),i&&i.next(s)})),o&&(n.unsubscribe(),n=null,o=!1,a())};a()})}as.retryWhen=mx;var gi={};Object.defineProperty(gi,"__esModule",{value:!0});gi.sample=void 0;var gx=U,wx=N,Ox=ke,Am=D;function Ex(e){return wx.operate(function(r,t){var n=!1,o=null;r.subscribe(Am.createOperatorSubscriber(t,function(i){n=!0,o=i})),gx.innerFrom(e).subscribe(Am.createOperatorSubscriber(t,function(){if(n){n=!1;var i=o;o=null,t.next(i)}},Ox.noop))})}gi.sample=Ex;var us={};Object.defineProperty(us,"__esModule",{value:!0});us.sampleTime=void 0;var Sx=lt,Tx=gi,Px=uu;function Cx(e,r){return r===void 0&&(r=Sx.asyncScheduler),Tx.sample(Px.interval(e,r))}us.sampleTime=Cx;var ss={};Object.defineProperty(ss,"__esModule",{value:!0});ss.scan=void 0;var Ax=N,Ix=mu;function Rx(e,r){return Ax.operate(Ix.scanInternals(e,r,arguments.length>=2,!0))}ss.scan=Rx;var cs={};Object.defineProperty(cs,"__esModule",{value:!0});cs.sequenceEqual=void 0;var jx=N,$x=D,Nx=U;function kx(e,r){return r===void 0&&(r=function(t,n){return t===n}),jx.operate(function(t,n){var o=Im(),i=Im(),a=function(c){n.next(c),n.complete()},s=function(c,u){var l=$x.createOperatorSubscriber(n,function(d){var h=u.buffer,p=u.complete;h.length===0?p?a(!1):c.buffer.push(d):!r(d,h.shift())&&a(!1)},function(){c.complete=!0;var d=u.complete,h=u.buffer;d&&a(h.length===0),l==null||l.unsubscribe()});return l};t.subscribe(s(o,i)),Nx.innerFrom(e).subscribe(s(i,o))})}cs.sequenceEqual=kx;function Im(){return{buffer:[],complete:!1}}var wi={},Mx=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Dx=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(wi,"__esModule",{value:!0});wi.share=void 0;var YO=U,Lx=Ce,ZO=Xo,Ux=N;function Fx(e){e===void 0&&(e={});var r=e.connector,t=r===void 0?function(){return new Lx.Subject}:r,n=e.resetOnError,o=n===void 0?!0:n,i=e.resetOnComplete,a=i===void 0?!0:i,s=e.resetOnRefCountZero,c=s===void 0?!0:s;return function(u){var l,d,h,p=0,v=!1,y=!1,_=function(){d==null||d.unsubscribe(),d=void 0},b=function(){_(),l=h=void 0,v=y=!1},w=function(){var S=l;b(),S==null||S.unsubscribe()};return Ux.operate(function(S,E){p++,!y&&!v&&_();var T=h=h??t();E.add(function(){p--,p===0&&!y&&!v&&(d=cp(w,c))}),T.subscribe(E),!l&&p>0&&(l=new ZO.SafeSubscriber({next:function(C){return T.next(C)},error:function(C){y=!0,_(),d=cp(b,o,C),T.error(C)},complete:function(){v=!0,_(),d=cp(b,a),T.complete()}}),YO.innerFrom(S).subscribe(l))})(u)}}wi.share=Fx;function cp(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];if(r===!0){e();return}if(r!==!1){var o=new ZO.SafeSubscriber({next:function(){o.unsubscribe(),e()}});return YO.innerFrom(r.apply(void 0,Dx([],Mx(t)))).subscribe(o)}}var ls={};Object.defineProperty(ls,"__esModule",{value:!0});ls.shareReplay=void 0;var Bx=ei,xx=wi;function Vx(e,r,t){var n,o,i,a,s=!1;return e&&typeof e=="object"?(n=e.bufferSize,a=n===void 0?1/0:n,o=e.windowTime,r=o===void 0?1/0:o,i=e.refCount,s=i===void 0?!1:i,t=e.scheduler):a=e??1/0,xx.share({connector:function(){return new Bx.ReplaySubject(a,r,t)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}ls.shareReplay=Vx;var fs={};Object.defineProperty(fs,"__esModule",{value:!0});fs.single=void 0;var Wx=tr,zx=nu,qx=ru,Hx=N,Gx=D;function Kx(e){return Hx.operate(function(r,t){var n=!1,o,i=!1,a=0;r.subscribe(Gx.createOperatorSubscriber(t,function(s){i=!0,(!e||e(s,a++,r))&&(n&&t.error(new zx.SequenceError("Too many matching values")),n=!0,o=s)},function(){n?(t.next(o),t.complete()):t.error(i?new qx.NotFoundError("No matching values"):new Wx.EmptyError)}))})}fs.single=Kx;var ds={};Object.defineProperty(ds,"__esModule",{value:!0});ds.skip=void 0;var Yx=zt;function Zx(e){return Yx.filter(function(r,t){return e<=t})}ds.skip=Zx;var hs={};Object.defineProperty(hs,"__esModule",{value:!0});hs.skipLast=void 0;var Qx=Me,Xx=N,Jx=D;function e6(e){return e<=0?Qx.identity:Xx.operate(function(r,t){var n=new Array(e),o=0;return r.subscribe(Jx.createOperatorSubscriber(t,function(i){var a=o++;if(a<e)n[a]=i;else{var s=a%e,c=n[s];n[s]=i,t.next(c)}})),function(){n=null}})}hs.skipLast=e6;var ps={};Object.defineProperty(ps,"__esModule",{value:!0});ps.skipUntil=void 0;var t6=N,Rm=D,r6=U,n6=ke;function o6(e){return t6.operate(function(r,t){var n=!1,o=Rm.createOperatorSubscriber(t,function(){o==null||o.unsubscribe(),n=!0},n6.noop);r6.innerFrom(e).subscribe(o),r.subscribe(Rm.createOperatorSubscriber(t,function(i){return n&&t.next(i)}))})}ps.skipUntil=o6;var vs={};Object.defineProperty(vs,"__esModule",{value:!0});vs.skipWhile=void 0;var i6=N,a6=D;function u6(e){return i6.operate(function(r,t){var n=!1,o=0;r.subscribe(a6.createOperatorSubscriber(t,function(i){return(n||(n=!e(i,o++)))&&t.next(i)}))})}vs.skipWhile=u6;var _s={};Object.defineProperty(_s,"__esModule",{value:!0});_s.startWith=void 0;var jm=Qn,s6=Re,c6=N;function l6(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=s6.popScheduler(e);return c6.operate(function(n,o){(t?jm.concat(e,n,t):jm.concat(e,n)).subscribe(o)})}_s.startWith=l6;var ys={},an={};Object.defineProperty(an,"__esModule",{value:!0});an.switchMap=void 0;var f6=U,d6=N,$m=D;function h6(e,r){return d6.operate(function(t,n){var o=null,i=0,a=!1,s=function(){return a&&!o&&n.complete()};t.subscribe($m.createOperatorSubscriber(n,function(c){o==null||o.unsubscribe();var u=0,l=i++;f6.innerFrom(e(c,l)).subscribe(o=$m.createOperatorSubscriber(n,function(d){return n.next(r?r(c,d,l,u++):d)},function(){o=null,s()}))},function(){a=!0,s()}))})}an.switchMap=h6;Object.defineProperty(ys,"__esModule",{value:!0});ys.switchAll=void 0;var p6=an,v6=Me;function _6(){return p6.switchMap(v6.identity)}ys.switchAll=_6;var bs={};Object.defineProperty(bs,"__esModule",{value:!0});bs.switchMapTo=void 0;var Nm=an,y6=ce;function b6(e,r){return y6.isFunction(r)?Nm.switchMap(function(){return e},r):Nm.switchMap(function(){return e})}bs.switchMapTo=b6;var ms={};Object.defineProperty(ms,"__esModule",{value:!0});ms.switchScan=void 0;var m6=an,g6=N;function w6(e,r){return g6.operate(function(t,n){var o=r;return m6.switchMap(function(i,a){return e(o,i,a)},function(i,a){return o=a,a})(t).subscribe(n),function(){o=null}})}ms.switchScan=w6;var gs={};Object.defineProperty(gs,"__esModule",{value:!0});gs.takeUntil=void 0;var O6=N,E6=D,S6=U,T6=ke;function P6(e){return O6.operate(function(r,t){S6.innerFrom(e).subscribe(E6.createOperatorSubscriber(t,function(){return t.complete()},T6.noop)),!t.closed&&r.subscribe(t)})}gs.takeUntil=P6;var ws={};Object.defineProperty(ws,"__esModule",{value:!0});ws.takeWhile=void 0;var C6=N,A6=D;function I6(e,r){return r===void 0&&(r=!1),C6.operate(function(t,n){var o=0;t.subscribe(A6.createOperatorSubscriber(n,function(i){var a=e(i,o++);(a||r)&&n.next(i),!a&&n.complete()}))})}ws.takeWhile=I6;var Os={};Object.defineProperty(Os,"__esModule",{value:!0});Os.tap=void 0;var R6=ce,j6=N,$6=D,N6=Me;function k6(e,r,t){var n=R6.isFunction(e)||r||t?{next:e,error:r,complete:t}:e;return n?j6.operate(function(o,i){var a;(a=n.subscribe)===null||a===void 0||a.call(n);var s=!0;o.subscribe($6.createOperatorSubscriber(i,function(c){var u;(u=n.next)===null||u===void 0||u.call(n,c),i.next(c)},function(){var c;s=!1,(c=n.complete)===null||c===void 0||c.call(n),i.complete()},function(c){var u;s=!1,(u=n.error)===null||u===void 0||u.call(n,c),i.error(c)},function(){var c,u;s&&((c=n.unsubscribe)===null||c===void 0||c.call(n)),(u=n.finalize)===null||u===void 0||u.call(n)}))}):N6.identity}Os.tap=k6;var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.throttle=void 0;var M6=N,km=D,D6=U;function L6(e,r){return M6.operate(function(t,n){var o=r??{},i=o.leading,a=i===void 0?!0:i,s=o.trailing,c=s===void 0?!1:s,u=!1,l=null,d=null,h=!1,p=function(){d==null||d.unsubscribe(),d=null,c&&(_(),h&&n.complete())},v=function(){d=null,h&&n.complete()},y=function(b){return d=D6.innerFrom(e(b)).subscribe(km.createOperatorSubscriber(n,p,v))},_=function(){if(u){u=!1;var b=l;l=null,n.next(b),!h&&y(b)}};t.subscribe(km.createOperatorSubscriber(n,function(b){u=!0,l=b,!(d&&!d.closed)&&(a?_():y(b))},function(){h=!0,!(c&&u&&d&&!d.closed)&&n.complete()}))})}Oi.throttle=L6;var Es={};Object.defineProperty(Es,"__esModule",{value:!0});Es.throttleTime=void 0;var U6=lt,F6=Oi,B6=nr;function x6(e,r,t){r===void 0&&(r=U6.asyncScheduler);var n=B6.timer(e,r);return F6.throttle(function(){return n},t)}Es.throttleTime=x6;var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.TimeInterval=Bn.timeInterval=void 0;var V6=lt,W6=N,z6=D;function q6(e){return e===void 0&&(e=V6.asyncScheduler),W6.operate(function(r,t){var n=e.now();r.subscribe(z6.createOperatorSubscriber(t,function(o){var i=e.now(),a=i-n;n=i,t.next(new QO(o,a))}))})}Bn.timeInterval=q6;var QO=function(){function e(r,t){this.value=r,this.interval=t}return e}();Bn.TimeInterval=QO;var Ss={};Object.defineProperty(Ss,"__esModule",{value:!0});Ss.timeoutWith=void 0;var H6=lt,G6=ii,K6=Oa;function Y6(e,r,t){var n,o,i;if(t=t??H6.async,G6.isValidDate(e)?n=e:typeof e=="number"&&(o=e),r)i=function(){return r};else throw new TypeError("No observable provided to switch to");if(n==null&&o==null)throw new TypeError("No timeout provided.");return K6.timeout({first:n,each:o,scheduler:t,with:i})}Ss.timeoutWith=Y6;var Ts={};Object.defineProperty(Ts,"__esModule",{value:!0});Ts.timestamp=void 0;var Z6=Ll,Q6=Wt;function X6(e){return e===void 0&&(e=Z6.dateTimestampProvider),Q6.map(function(r){return{value:r,timestamp:e.now()}})}Ts.timestamp=X6;var Ps={};Object.defineProperty(Ps,"__esModule",{value:!0});Ps.window=void 0;var Mm=Ce,J6=N,Dm=D,e3=ke,t3=U;function r3(e){return J6.operate(function(r,t){var n=new Mm.Subject;t.next(n.asObservable());var o=function(i){n.error(i),t.error(i)};return r.subscribe(Dm.createOperatorSubscriber(t,function(i){return n==null?void 0:n.next(i)},function(){n.complete(),t.complete()},o)),t3.innerFrom(e).subscribe(Dm.createOperatorSubscriber(t,function(){n.complete(),t.next(n=new Mm.Subject)},e3.noop,o)),function(){n==null||n.unsubscribe(),n=null}})}Ps.window=r3;var Cs={},n3=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Cs,"__esModule",{value:!0});Cs.windowCount=void 0;var Lm=Ce,o3=N,i3=D;function a3(e,r){r===void 0&&(r=0);var t=r>0?r:e;return o3.operate(function(n,o){var i=[new Lm.Subject],a=0;o.next(i[0].asObservable()),n.subscribe(i3.createOperatorSubscriber(o,function(s){var c,u;try{for(var l=n3(i),d=l.next();!d.done;d=l.next()){var h=d.value;h.next(s)}}catch(y){c={error:y}}finally{try{d&&!d.done&&(u=l.return)&&u.call(l)}finally{if(c)throw c.error}}var p=a-e+1;if(p>=0&&p%t===0&&i.shift().complete(),++a%t===0){var v=new Lm.Subject;i.push(v),o.next(v.asObservable())}},function(){for(;i.length>0;)i.shift().complete();o.complete()},function(s){for(;i.length>0;)i.shift().error(s);o.error(s)},function(){i=null}))})}Cs.windowCount=a3;var As={};Object.defineProperty(As,"__esModule",{value:!0});As.windowTime=void 0;var u3=Ce,s3=lt,c3=Ne,l3=N,f3=D,d3=Bt,h3=Re,Um=Vt;function p3(e){for(var r,t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=(r=h3.popScheduler(n))!==null&&r!==void 0?r:s3.asyncScheduler,a=(t=n[0])!==null&&t!==void 0?t:null,s=n[1]||1/0;return l3.operate(function(c,u){var l=[],d=!1,h=function(_){var b=_.window,w=_.subs;b.complete(),w.unsubscribe(),d3.arrRemove(l,_),d&&p()},p=function(){if(l){var _=new c3.Subscription;u.add(_);var b=new u3.Subject,w={window:b,subs:_,seen:0};l.push(w),u.next(b.asObservable()),Um.executeSchedule(_,i,function(){return h(w)},e)}};a!==null&&a>=0?Um.executeSchedule(u,i,p,a,!0):d=!0,p();var v=function(_){return l.slice().forEach(_)},y=function(_){v(function(b){var w=b.window;return _(w)}),_(u),u.unsubscribe()};return c.subscribe(f3.createOperatorSubscriber(u,function(_){v(function(b){b.window.next(_),s<=++b.seen&&h(b)})},function(){return y(function(_){return _.complete()})},function(_){return y(function(b){return b.error(_)})})),function(){l=null}})}As.windowTime=p3;var Is={},v3=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Is,"__esModule",{value:!0});Is.windowToggle=void 0;var _3=Ce,y3=Ne,b3=N,Fm=U,lp=D,Bm=ke,m3=Bt;function g3(e,r){return b3.operate(function(t,n){var o=[],i=function(a){for(;0<o.length;)o.shift().error(a);n.error(a)};Fm.innerFrom(e).subscribe(lp.createOperatorSubscriber(n,function(a){var s=new _3.Subject;o.push(s);var c=new y3.Subscription,u=function(){m3.arrRemove(o,s),s.complete(),c.unsubscribe()},l;try{l=Fm.innerFrom(r(a))}catch(d){i(d);return}n.next(s.asObservable()),c.add(l.subscribe(lp.createOperatorSubscriber(n,u,Bm.noop,i)))},Bm.noop)),t.subscribe(lp.createOperatorSubscriber(n,function(a){var s,c,u=o.slice();try{for(var l=v3(u),d=l.next();!d.done;d=l.next()){var h=d.value;h.next(a)}}catch(p){s={error:p}}finally{try{d&&!d.done&&(c=l.return)&&c.call(l)}finally{if(s)throw s.error}}},function(){for(;0<o.length;)o.shift().complete();n.complete()},i,function(){for(;0<o.length;)o.shift().unsubscribe()}))})}Is.windowToggle=g3;var Rs={};Object.defineProperty(Rs,"__esModule",{value:!0});Rs.windowWhen=void 0;var w3=Ce,O3=N,xm=D,E3=U;function S3(e){return O3.operate(function(r,t){var n,o,i=function(s){n.error(s),t.error(s)},a=function(){o==null||o.unsubscribe(),n==null||n.complete(),n=new w3.Subject,t.next(n.asObservable());var s;try{s=E3.innerFrom(e())}catch(c){i(c);return}s.subscribe(o=xm.createOperatorSubscriber(t,a,a,i))};a(),r.subscribe(xm.createOperatorSubscriber(t,function(s){return n.next(s)},function(){n.complete(),t.complete()},i,function(){o==null||o.unsubscribe(),n=null}))})}Rs.windowWhen=S3;var js={},Vm=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Wm=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(js,"__esModule",{value:!0});js.withLatestFrom=void 0;var T3=N,zm=D,P3=U,C3=Me,A3=ke,I3=Re;function R3(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=I3.popResultSelector(e);return T3.operate(function(n,o){for(var i=e.length,a=new Array(i),s=e.map(function(){return!1}),c=!1,u=function(d){P3.innerFrom(e[d]).subscribe(zm.createOperatorSubscriber(o,function(h){a[d]=h,!c&&!s[d]&&(s[d]=!0,(c=s.every(C3.identity))&&(s=null))},A3.noop))},l=0;l<i;l++)u(l);n.subscribe(zm.createOperatorSubscriber(o,function(d){if(c){var h=Wm([d],Vm(a));o.next(t?t.apply(void 0,Wm([],Vm(h))):h)}}))})}js.withLatestFrom=R3;var $s={};Object.defineProperty($s,"__esModule",{value:!0});$s.zipAll=void 0;var j3=ui,$3=bu;function N3(e){return $3.joinAllInternals(j3.zip,e)}$s.zipAll=N3;var Ns={},ks={},k3=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},M3=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(ks,"__esModule",{value:!0});ks.zip=void 0;var D3=ui,L3=N;function U3(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return L3.operate(function(t,n){D3.zip.apply(void 0,M3([t],k3(e))).subscribe(n)})}ks.zip=U3;var F3=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},B3=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ns,"__esModule",{value:!0});Ns.zipWith=void 0;var x3=ks;function V3(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return x3.zip.apply(void 0,B3([],F3(e)))}Ns.zipWith=V3;(function(e){var r=f&&f.__createBinding||(Object.create?function(lo,fo,ir,ln){ln===void 0&&(ln=ir),Object.defineProperty(lo,ln,{enumerable:!0,get:function(){return fo[ir]}})}:function(lo,fo,ir,ln){ln===void 0&&(ln=ir),lo[ln]=fo[ir]}),t=f&&f.__exportStar||function(lo,fo){for(var ir in lo)ir!=="default"&&!Object.prototype.hasOwnProperty.call(fo,ir)&&r(fo,lo,ir)};Object.defineProperty(e,"__esModule",{value:!0}),e.interval=e.iif=e.generate=e.fromEventPattern=e.fromEvent=e.from=e.forkJoin=e.empty=e.defer=e.connectable=e.concat=e.combineLatest=e.bindNodeCallback=e.bindCallback=e.UnsubscriptionError=e.TimeoutError=e.SequenceError=e.ObjectUnsubscribedError=e.NotFoundError=e.EmptyError=e.ArgumentOutOfRangeError=e.firstValueFrom=e.lastValueFrom=e.isObservable=e.identity=e.noop=e.pipe=e.NotificationKind=e.Notification=e.Subscriber=e.Subscription=e.Scheduler=e.VirtualAction=e.VirtualTimeScheduler=e.animationFrameScheduler=e.animationFrame=e.queueScheduler=e.queue=e.asyncScheduler=e.async=e.asapScheduler=e.asap=e.AsyncSubject=e.ReplaySubject=e.BehaviorSubject=e.Subject=e.animationFrames=e.observable=e.ConnectableObservable=e.Observable=void 0,e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.combineLatestWith=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=e.config=e.NEVER=e.EMPTY=e.scheduled=e.zip=e.using=e.timer=e.throwError=e.range=e.race=e.partition=e.pairs=e.onErrorResumeNext=e.of=e.never=e.merge=void 0,e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.pairwise=e.onErrorResumeNextWith=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=e.mergeAll=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=void 0,e.zipWith=e.zipAll=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=void 0;var n=le;Object.defineProperty(e,"Observable",{enumerable:!0,get:function(){return n.Observable}});var o=Yn;Object.defineProperty(e,"ConnectableObservable",{enumerable:!0,get:function(){return o.ConnectableObservable}});var i=Kn;Object.defineProperty(e,"observable",{enumerable:!0,get:function(){return i.observable}});var a=Dl;Object.defineProperty(e,"animationFrames",{enumerable:!0,get:function(){return a.animationFrames}});var s=Ce;Object.defineProperty(e,"Subject",{enumerable:!0,get:function(){return s.Subject}});var c=za;Object.defineProperty(e,"BehaviorSubject",{enumerable:!0,get:function(){return c.BehaviorSubject}});var u=ei;Object.defineProperty(e,"ReplaySubject",{enumerable:!0,get:function(){return u.ReplaySubject}});var l=ti;Object.defineProperty(e,"AsyncSubject",{enumerable:!0,get:function(){return l.AsyncSubject}});var d=wO;Object.defineProperty(e,"asap",{enumerable:!0,get:function(){return d.asap}}),Object.defineProperty(e,"asapScheduler",{enumerable:!0,get:function(){return d.asapScheduler}});var h=lt;Object.defineProperty(e,"async",{enumerable:!0,get:function(){return h.async}}),Object.defineProperty(e,"asyncScheduler",{enumerable:!0,get:function(){return h.asyncScheduler}});var p=SO;Object.defineProperty(e,"queue",{enumerable:!0,get:function(){return p.queue}}),Object.defineProperty(e,"queueScheduler",{enumerable:!0,get:function(){return p.queueScheduler}});var v=TO;Object.defineProperty(e,"animationFrame",{enumerable:!0,get:function(){return v.animationFrame}}),Object.defineProperty(e,"animationFrameScheduler",{enumerable:!0,get:function(){return v.animationFrameScheduler}});var y=Lo;Object.defineProperty(e,"VirtualTimeScheduler",{enumerable:!0,get:function(){return y.VirtualTimeScheduler}}),Object.defineProperty(e,"VirtualAction",{enumerable:!0,get:function(){return y.VirtualAction}});var _=qa;Object.defineProperty(e,"Scheduler",{enumerable:!0,get:function(){return _.Scheduler}});var b=Ne;Object.defineProperty(e,"Subscription",{enumerable:!0,get:function(){return b.Subscription}});var w=Xo;Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return w.Subscriber}});var S=ql;Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return S.Notification}}),Object.defineProperty(e,"NotificationKind",{enumerable:!0,get:function(){return S.NotificationKind}});var E=br;Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return E.pipe}});var T=ke;Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return T.noop}});var C=Me;Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return C.identity}});var P=Zl;Object.defineProperty(e,"isObservable",{enumerable:!0,get:function(){return P.isObservable}});var I=Ql;Object.defineProperty(e,"lastValueFrom",{enumerable:!0,get:function(){return I.lastValueFrom}});var M=Xl;Object.defineProperty(e,"firstValueFrom",{enumerable:!0,get:function(){return M.firstValueFrom}});var F=tu;Object.defineProperty(e,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return F.ArgumentOutOfRangeError}});var Q=tr;Object.defineProperty(e,"EmptyError",{enumerable:!0,get:function(){return Q.EmptyError}});var H=ru;Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return H.NotFoundError}});var Z=Wa;Object.defineProperty(e,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return Z.ObjectUnsubscribedError}});var fe=nu;Object.defineProperty(e,"SequenceError",{enumerable:!0,get:function(){return fe.SequenceError}});var V=Oa;Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return V.TimeoutError}});var ie=xa;Object.defineProperty(e,"UnsubscriptionError",{enumerable:!0,get:function(){return ie.UnsubscriptionError}});var W=Jl;Object.defineProperty(e,"bindCallback",{enumerable:!0,get:function(){return W.bindCallback}});var te=ef;Object.defineProperty(e,"bindNodeCallback",{enumerable:!0,get:function(){return te.bindNodeCallback}});var K=Br;Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return K.combineLatest}});var L=Qn;Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return L.concat}});var re=tf;Object.defineProperty(e,"connectable",{enumerable:!0,get:function(){return re.connectable}});var pe=Jn;Object.defineProperty(e,"defer",{enumerable:!0,get:function(){return pe.defer}});var Ae=Ut;Object.defineProperty(e,"empty",{enumerable:!0,get:function(){return Ae.empty}});var X=rf;Object.defineProperty(e,"forkJoin",{enumerable:!0,get:function(){return X.forkJoin}});var je=xt;Object.defineProperty(e,"from",{enumerable:!0,get:function(){return je.from}});var ve=nf;Object.defineProperty(e,"fromEvent",{enumerable:!0,get:function(){return ve.fromEvent}});var ft=of;Object.defineProperty(e,"fromEventPattern",{enumerable:!0,get:function(){return ft.fromEventPattern}});var m=af;Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return m.generate}});var A=uf;Object.defineProperty(e,"iif",{enumerable:!0,get:function(){return A.iif}});var k=uu;Object.defineProperty(e,"interval",{enumerable:!0,get:function(){return k.interval}});var B=sf;Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return B.merge}});var J=pv;Object.defineProperty(e,"never",{enumerable:!0,get:function(){return J.never}});var Ue=ri;Object.defineProperty(e,"of",{enumerable:!0,get:function(){return Ue.of}});var At=su;Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return At.onErrorResumeNext}});var cn=cf;Object.defineProperty(e,"pairs",{enumerable:!0,get:function(){return cn.pairs}});var Di=lf;Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return Di.partition}});var Ld=Un;Object.defineProperty(e,"race",{enumerable:!0,get:function(){return Ld.race}});var Ud=ff;Object.defineProperty(e,"range",{enumerable:!0,get:function(){return Ud.range}});var Fd=eu;Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return Fd.throwError}});var Bd=nr;Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return Bd.timer}});var xd=df;Object.defineProperty(e,"using",{enumerable:!0,get:function(){return xd.using}});var Vd=ui;Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return Vd.zip}});var Wd=Ha;Object.defineProperty(e,"scheduled",{enumerable:!0,get:function(){return Wd.scheduled}});var zd=Ut;Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return zd.EMPTY}});var qd=pv;Object.defineProperty(e,"NEVER",{enumerable:!0,get:function(){return qd.NEVER}}),t(VO,e);var Hd=Zr;Object.defineProperty(e,"config",{enumerable:!0,get:function(){return Hd.config}});var Gd=si;Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return Gd.audit}});var Kd=lu;Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return Kd.auditTime}});var Yd=fu;Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return Yd.buffer}});var Zd=du;Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return Zd.bufferCount}});var Qd=hu;Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return Qd.bufferTime}});var Xd=pu;Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return Xd.bufferToggle}});var Jd=vu;Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return Jd.bufferWhen}});var eh=_u;Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return eh.catchError}});var th=yu;Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return th.combineAll}});var rh=ci;Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return rh.combineLatestAll}});var nh=gu;Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return nh.combineLatestWith}});var oh=Xn;Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return oh.concatAll}});var ih=fi;Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return ih.concatMap}});var ah=Ou;Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return ah.concatMapTo}});var uh=Eu;Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return uh.concatWith}});var sh=eo;Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return sh.connect}});var ch=Tu;Object.defineProperty(e,"count",{enumerable:!0,get:function(){return ch.count}});var lh=Pu;Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return lh.debounce}});var fh=Cu;Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return fh.debounceTime}});var dh=rn;Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return dh.defaultIfEmpty}});var hh=Au;Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return hh.delay}});var ph=di;Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return ph.delayWhen}});var vh=Iu;Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return vh.dematerialize}});var _h=Ru;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return _h.distinct}});var yh=vi;Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return yh.distinctUntilChanged}});var bh=ju;Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return bh.distinctUntilKeyChanged}});var mh=$u;Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return mh.elementAt}});var gh=Nu;Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return gh.endWith}});var wh=ku;Object.defineProperty(e,"every",{enumerable:!0,get:function(){return wh.every}});var Oh=Mu;Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return Oh.exhaust}});var Eh=_i;Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return Eh.exhaustAll}});var Sh=yi;Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return Sh.exhaustMap}});var Th=Du;Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return Th.expand}});var Ph=zt;Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return Ph.filter}});var Ch=Lu;Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return Ch.finalize}});var Ah=xr;Object.defineProperty(e,"find",{enumerable:!0,get:function(){return Ah.find}});var Ih=Uu;Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return Ih.findIndex}});var Rh=Fu;Object.defineProperty(e,"first",{enumerable:!0,get:function(){return Rh.first}});var jh=Bu;Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return jh.groupBy}});var $h=hi;Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return $h.ignoreElements}});var Nh=xu;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return Nh.isEmpty}});var kh=Vu;Object.defineProperty(e,"last",{enumerable:!0,get:function(){return kh.last}});var Mh=Wt;Object.defineProperty(e,"map",{enumerable:!0,get:function(){return Mh.map}});var Dh=pi;Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return Dh.mapTo}});var Lh=Wu;Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return Lh.materialize}});var Uh=zu;Object.defineProperty(e,"max",{enumerable:!0,get:function(){return Uh.max}});var Fh=tn;Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return Fh.mergeAll}});var Bh=qu;Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return Bh.flatMap}});var xh=Pt;Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return xh.mergeMap}});var Vh=Hu;Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return Vh.mergeMapTo}});var Wh=Gu;Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return Wh.mergeScan}});var DT=Ku;Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return DT.mergeWith}});var LT=Zu;Object.defineProperty(e,"min",{enumerable:!0,get:function(){return LT.min}});var UT=to;Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return UT.multicast}});var FT=Jr;Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return FT.observeOn}});var BT=Fn;Object.defineProperty(e,"onErrorResumeNextWith",{enumerable:!0,get:function(){return BT.onErrorResumeNextWith}});var xT=Qu;Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return xT.pairwise}});var VT=Xu;Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return VT.pluck}});var WT=Ju;Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return WT.publish}});var zT=es;Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return zT.publishBehavior}});var qT=ts;Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return qT.publishLast}});var HT=rs;Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return HT.publishReplay}});var GT=mi;Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return GT.raceWith}});var KT=gr;Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return KT.reduce}});var YT=ns;Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return YT.repeat}});var ZT=os;Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return ZT.repeatWhen}});var QT=is;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return QT.retry}});var XT=as;Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return XT.retryWhen}});var JT=Jo;Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return JT.refCount}});var eP=gi;Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return eP.sample}});var tP=us;Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return tP.sampleTime}});var rP=ss;Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return rP.scan}});var nP=cs;Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return nP.sequenceEqual}});var oP=wi;Object.defineProperty(e,"share",{enumerable:!0,get:function(){return oP.share}});var iP=ls;Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return iP.shareReplay}});var aP=fs;Object.defineProperty(e,"single",{enumerable:!0,get:function(){return aP.single}});var uP=ds;Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return uP.skip}});var sP=hs;Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return sP.skipLast}});var cP=ps;Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return cP.skipUntil}});var lP=vs;Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return lP.skipWhile}});var fP=_s;Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return fP.startWith}});var dP=en;Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return dP.subscribeOn}});var hP=ys;Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return hP.switchAll}});var pP=an;Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return pP.switchMap}});var vP=bs;Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return vP.switchMapTo}});var _P=ms;Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return _P.switchScan}});var yP=nn;Object.defineProperty(e,"take",{enumerable:!0,get:function(){return yP.take}});var bP=bi;Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return bP.takeLast}});var mP=gs;Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return mP.takeUntil}});var gP=ws;Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return gP.takeWhile}});var wP=Os;Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return wP.tap}});var OP=Oi;Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return OP.throttle}});var EP=Es;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return EP.throttleTime}});var SP=on;Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return SP.throwIfEmpty}});var TP=Bn;Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return TP.timeInterval}});var PP=Oa;Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return PP.timeout}});var CP=Ss;Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return CP.timeoutWith}});var AP=Ts;Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return AP.timestamp}});var IP=li;Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return IP.toArray}});var RP=Ps;Object.defineProperty(e,"window",{enumerable:!0,get:function(){return RP.window}});var jP=Cs;Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return jP.windowCount}});var $P=As;Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return $P.windowTime}});var NP=Is;Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return NP.windowToggle}});var kP=Rs;Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return kP.windowWhen}});var MP=js;Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return MP.withLatestFrom}});var DP=$s;Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return DP.zipAll}});var LP=Ns;Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return LP.zipWith}})})(Ba);var pf={},vf={};Object.defineProperty(vf,"__esModule",{value:!0});vf.partition=void 0;var W3=cu,qm=zt;function z3(e,r){return function(t){return[qm.filter(e,r)(t),qm.filter(W3.not(e,r))(t)]}}vf.partition=z3;var _f={},q3=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},H3=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(_f,"__esModule",{value:!0});_f.race=void 0;var G3=mr,K3=mi;function Y3(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return K3.raceWith.apply(void 0,H3([],q3(G3.argsOrArgArray(e))))}_f.race=Y3;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=e.merge=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.concat=e.combineLatestWith=e.combineLatest=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=void 0,e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.race=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.partition=e.pairwise=e.onErrorResumeNext=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=void 0,e.zipWith=e.zipAll=e.zip=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=void 0;var r=si;Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return r.audit}});var t=lu;Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return t.auditTime}});var n=fu;Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return n.buffer}});var o=du;Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return o.bufferCount}});var i=hu;Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return i.bufferTime}});var a=pu;Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return a.bufferToggle}});var s=vu;Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return s.bufferWhen}});var c=_u;Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return c.catchError}});var u=yu;Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return u.combineAll}});var l=ci;Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return l.combineLatestAll}});var d=wu;Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return d.combineLatest}});var h=gu;Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return h.combineLatestWith}});var p=Su;Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return p.concat}});var v=Xn;Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return v.concatAll}});var y=fi;Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return y.concatMap}});var _=Ou;Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return _.concatMapTo}});var b=Eu;Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return b.concatWith}});var w=eo;Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return w.connect}});var S=Tu;Object.defineProperty(e,"count",{enumerable:!0,get:function(){return S.count}});var E=Pu;Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return E.debounce}});var T=Cu;Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return T.debounceTime}});var C=rn;Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return C.defaultIfEmpty}});var P=Au;Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return P.delay}});var I=di;Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return I.delayWhen}});var M=Iu;Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return M.dematerialize}});var F=Ru;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return F.distinct}});var Q=vi;Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return Q.distinctUntilChanged}});var H=ju;Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return H.distinctUntilKeyChanged}});var Z=$u;Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return Z.elementAt}});var fe=Nu;Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return fe.endWith}});var V=ku;Object.defineProperty(e,"every",{enumerable:!0,get:function(){return V.every}});var ie=Mu;Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return ie.exhaust}});var W=_i;Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return W.exhaustAll}});var te=yi;Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return te.exhaustMap}});var K=Du;Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return K.expand}});var L=zt;Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return L.filter}});var re=Lu;Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return re.finalize}});var pe=xr;Object.defineProperty(e,"find",{enumerable:!0,get:function(){return pe.find}});var Ae=Uu;Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return Ae.findIndex}});var X=Fu;Object.defineProperty(e,"first",{enumerable:!0,get:function(){return X.first}});var je=Bu;Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return je.groupBy}});var ve=hi;Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return ve.ignoreElements}});var ft=xu;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return ft.isEmpty}});var m=Vu;Object.defineProperty(e,"last",{enumerable:!0,get:function(){return m.last}});var A=Wt;Object.defineProperty(e,"map",{enumerable:!0,get:function(){return A.map}});var k=pi;Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return k.mapTo}});var B=Wu;Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return B.materialize}});var J=zu;Object.defineProperty(e,"max",{enumerable:!0,get:function(){return J.max}});var Ue=Yu;Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return Ue.merge}});var At=tn;Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return At.mergeAll}});var cn=qu;Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return cn.flatMap}});var Di=Pt;Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return Di.mergeMap}});var Ld=Hu;Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return Ld.mergeMapTo}});var Ud=Gu;Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return Ud.mergeScan}});var Fd=Ku;Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return Fd.mergeWith}});var Bd=Zu;Object.defineProperty(e,"min",{enumerable:!0,get:function(){return Bd.min}});var xd=to;Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return xd.multicast}});var Vd=Jr;Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return Vd.observeOn}});var Wd=Fn;Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return Wd.onErrorResumeNext}});var zd=Qu;Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return zd.pairwise}});var qd=vf;Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return qd.partition}});var Hd=Xu;Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return Hd.pluck}});var Gd=Ju;Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return Gd.publish}});var Kd=es;Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return Kd.publishBehavior}});var Yd=ts;Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return Yd.publishLast}});var Zd=rs;Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return Zd.publishReplay}});var Qd=_f;Object.defineProperty(e,"race",{enumerable:!0,get:function(){return Qd.race}});var Xd=mi;Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return Xd.raceWith}});var Jd=gr;Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return Jd.reduce}});var eh=ns;Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return eh.repeat}});var th=os;Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return th.repeatWhen}});var rh=is;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return rh.retry}});var nh=as;Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return nh.retryWhen}});var oh=Jo;Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return oh.refCount}});var ih=gi;Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return ih.sample}});var ah=us;Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return ah.sampleTime}});var uh=ss;Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return uh.scan}});var sh=cs;Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return sh.sequenceEqual}});var ch=wi;Object.defineProperty(e,"share",{enumerable:!0,get:function(){return ch.share}});var lh=ls;Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return lh.shareReplay}});var fh=fs;Object.defineProperty(e,"single",{enumerable:!0,get:function(){return fh.single}});var dh=ds;Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return dh.skip}});var hh=hs;Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return hh.skipLast}});var ph=ps;Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return ph.skipUntil}});var vh=vs;Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return vh.skipWhile}});var _h=_s;Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return _h.startWith}});var yh=en;Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return yh.subscribeOn}});var bh=ys;Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return bh.switchAll}});var mh=an;Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return mh.switchMap}});var gh=bs;Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return gh.switchMapTo}});var wh=ms;Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return wh.switchScan}});var Oh=nn;Object.defineProperty(e,"take",{enumerable:!0,get:function(){return Oh.take}});var Eh=bi;Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return Eh.takeLast}});var Sh=gs;Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return Sh.takeUntil}});var Th=ws;Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return Th.takeWhile}});var Ph=Os;Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return Ph.tap}});var Ch=Oi;Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return Ch.throttle}});var Ah=Es;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return Ah.throttleTime}});var Ih=on;Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return Ih.throwIfEmpty}});var Rh=Bn;Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return Rh.timeInterval}});var jh=Oa;Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return jh.timeout}});var $h=Ss;Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return $h.timeoutWith}});var Nh=Ts;Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return Nh.timestamp}});var kh=li;Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return kh.toArray}});var Mh=Ps;Object.defineProperty(e,"window",{enumerable:!0,get:function(){return Mh.window}});var Dh=Cs;Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return Dh.windowCount}});var Lh=As;Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return Lh.windowTime}});var Uh=Is;Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return Uh.windowToggle}});var Fh=Rs;Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return Fh.windowWhen}});var Bh=js;Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return Bh.withLatestFrom}});var xh=ks;Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return xh.zip}});var Vh=$s;Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return Vh.zipAll}});var Wh=Ns;Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return Wh.zipWith}})})(pf);var Ei={},Ao=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Io=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Ei,"__esModule",{value:!0});var Z3=q,En=Ba,vn=pf,Wi={READY:0,STREAMING:1,COMPLETED:2},Q3=function(){function e(r,t){var n=r.pipe((0,vn.publishReplay)(1),(0,vn.refCount)());this._result=n,this._keys=n.pipe((0,vn.mergeMap)(function(o){return(0,En.from)(o.keys())}),(0,vn.publishReplay)(1),(0,vn.refCount)()),this._records=void 0,this._controls=new XO,this._summary=new En.ReplaySubject,this._state=t||Wi.READY}return e.prototype.keys=function(){return this._keys},e.prototype.records=function(){var r=this,t=this._result.pipe((0,vn.mergeMap)(function(n){return new En.Observable(function(o){return r._startStreaming({result:n,recordsObserver:o})})}));return t.push=function(){return r._push()},t},e.prototype.consume=function(){var r=this;return this._result.pipe((0,vn.mergeMap)(function(t){return new En.Observable(function(n){return r._startStreaming({result:t,summaryObserver:n})})}))},e.prototype.pause=function(){this._controls.pause()},e.prototype.resume=function(){return this._controls.resume()},e.prototype.push=function(){return this._controls.push()},e.prototype._startStreaming=function(r){var t=r===void 0?{}:r,n=t.result,o=t.recordsObserver,i=o===void 0?null:o,a=t.summaryObserver,s=a===void 0?null:a,c=[];return s&&c.push(this._summary.subscribe(s)),this._state<Wi.STREAMING?(this._state=Wi.STREAMING,this._setupRecordsStream(n),i?c.push(this._records.subscribe(i)):n._cancel(),c.push({unsubscribe:function(){n._cancel&&n._cancel()}})):i&&i.error((0,Z3.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){c.forEach(function(u){return u.unsubscribe()})}},e.prototype._toObservable=function(){var r=this;function t(n){return new En.Observable(function(o){o.next(n),o.complete()})}return new En.Observable(function(n){r._result.subscribe({complete:function(){return n.complete()},next:function(o){return n.next(new e(t(o)),r._state)},error:function(o){return n.error(o)}})})},e.prototype._setupRecordsStream=function(r){var t=this;return this._records?this._records:(this._records=X3(r[Symbol.asyncIterator](),{complete:function(){return Ao(t,void 0,void 0,function(){var n,o;return Io(this,function(i){switch(i.label){case 0:return this._state=Wi.COMPLETED,o=(n=this._summary).next,[4,r.summary()];case 1:return o.apply(n,[i.sent()]),this._summary.complete(),[2]}})})},error:function(n){t._state=Wi.COMPLETED,t._summary.error(n)}},this._controls),this._records)},e}();Ei.default=Q3;function X3(e,r,t){var n=this;t===void 0&&(t=new XO);var o=new En.Subject,i=function(s){return Ao(n,void 0,void 0,function(){var c,u,l,d;return Io(this,function(h){switch(h.label){case 0:return h.trys.push([0,2,3,4]),t.pushing=!0,[4,s];case 1:return c=h.sent(),u=c.done,l=c.value,u?(o.complete(),r.complete()):(o.next(l),t.paused||i(e.next()).catch(function(){})),[3,4];case 2:return d=h.sent(),o.error(d),r.error(d),[3,4];case 3:return t.pushing=!1,[7];case 4:return[2]}})})};function a(s){return Ao(this,void 0,void 0,function(){return Io(this,function(c){switch(c.label){case 0:return[4,i(e.next(s))];case 1:return c.sent(),[2]}})})}return t.pusher=a,a(),o}var XO=function(){function e(r){r===void 0&&(r=function(){return Ao(t,void 0,void 0,function(){return Io(this,function(n){return[2]})})});var t=this;this._paused=!1,this._pushing=!1,this._push=r}return e.prototype.pause=function(){this._paused=!0},Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushing",{get:function(){return this._pushing},set:function(r){this._pushing=r},enumerable:!1,configurable:!0}),e.prototype.resume=function(){return Ao(this,void 0,void 0,function(){var r;return Io(this,function(t){switch(t.label){case 0:return r=this._paused,this._paused=!1,r&&!this._pushing?[4,this._push()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.push=function(){return Ao(this,void 0,void 0,function(){return Io(this,function(r){switch(r.label){case 0:return this.pause(),[4,this._push()];case 1:return[2,r.sent()]}})})},Object.defineProperty(e.prototype,"pusher",{get:function(){return this._push},set:function(r){this._push=r},enumerable:!1,configurable:!0}),e}(),Ms={},JO=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ms,"__esModule",{value:!0});var rc=Ba,J3=JO(Ei);JO(q);var e8=function(){function e(r){this._txc=r}return e.prototype.run=function(r,t){var n=this;return new J3.default(new rc.Observable(function(o){try{o.next(n._txc.run(r,t)),o.complete()}catch(i){o.error(i)}return function(){}}))},e.prototype.commit=function(){var r=this;return new rc.Observable(function(t){r._txc.commit().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype.rollback=function(){var r=this;return new rc.Observable(function(t){r._txc.rollback().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype.isOpen=function(){return this._txc.isOpen()},e.prototype.close=function(){var r=this;return new rc.Observable(function(t){r._txc.close().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e}();Ms.default=e8;var yf={},e1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yf,"__esModule",{value:!0});e1(Ei);e1(Ms);var t8=function(){function e(r){var t=r.run;this._run=t}return e.fromTransaction=function(r){return new e({run:r.run.bind(r)})},e.prototype.run=function(r,t){return this._run(r,t)},e}();yf.default=t8;var I_={};Object.defineProperty(I_,"__esModule",{value:!0});var xc=q,fp=Ba,dp=pf;xc.internal.logger.Logger;var r8=xc.error.SERVICE_UNAVAILABLE,Hm=30*1e3,Gm=1e3,Km=2,Ym=.2,n8=function(){function e(r){var t=r===void 0?{}:r,n=t.maxRetryTimeout,o=n===void 0?Hm:n,i=t.initialDelay,a=i===void 0?Gm:i,s=t.delayMultiplier,c=s===void 0?Km:s,u=t.delayJitter,l=u===void 0?Ym:u,d=t.logger,h=d===void 0?null:d;this._maxRetryTimeout=nc(o,Hm),this._initialDelay=nc(a,Gm),this._delayMultiplier=nc(c,Km),this._delayJitter=nc(l,Ym),this._logger=h}return e.prototype.retry=function(r){var t=this;return r.pipe((0,dp.retryWhen)(function(n){var o=[],i=Date.now(),a=1,s=t._initialDelay;return n.pipe((0,dp.mergeMap)(function(c){if(!(0,xc.isRetriableError)(c))return(0,fp.throwError)(function(){return c});if(o.push(c),a>=2&&Date.now()-i>=t._maxRetryTimeout){var u=(0,xc.newError)("Failed after retried for ".concat(a," times in ").concat(t._maxRetryTimeout," ms. Make sure that your database is online and retry again."),r8);return u.seenErrors=o,(0,fp.throwError)(function(){return u})}var l=t._computeNextDelay(s);return s=s*t._delayMultiplier,a++,t._logger&&t._logger.warn("Transaction failed and will be retried in ".concat(l)),(0,fp.of)(1).pipe((0,dp.delay)(l))}))}))},e.prototype._computeNextDelay=function(r){var t=r*this._delayJitter;return r-t+2*t*Math.random()},e}();I_.default=n8;function nc(e,r){return e||e===0?e:r}var bf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(kl,"__esModule",{value:!0});var _n=Ba,zi=pf,o8=bf(Ei),t1=q,i8=bf(Ms),a8=bf(yf),u8=bf(I_),R_=t1.internal.constants,Zm=R_.ACCESS_MODE_READ,Qm=R_.ACCESS_MODE_WRITE,Xm=R_.TELEMETRY_APIS,oc=t1.internal.txConfig.TxConfig,s8=function(){function e(r){var t=r===void 0?{}:r,n=t.session,o=t.config,i=t.log;this._session=n,this._retryLogic=c8(o),this._log=i}return e.prototype.run=function(r,t,n){var o=this;return new o8.default(new _n.Observable(function(i){try{i.next(o._session.run(r,t,n)),i.complete()}catch(a){i.error(a)}return function(){}}))},e.prototype.beginTransaction=function(r){return this._beginTransaction(this._session._mode,r,{api:Xm.UNMANAGED_TRANSACTION})},e.prototype.readTransaction=function(r,t){return this._runTransaction(Zm,r,t)},e.prototype.writeTransaction=function(r,t){return this._runTransaction(Qm,r,t)},e.prototype.executeRead=function(r,t){return this._executeInTransaction(Zm,r,t)},e.prototype.executeWrite=function(r,t){return this._executeInTransaction(Qm,r,t)},e.prototype._executeInTransaction=function(r,t,n){var o=function(i){return new a8.default({run:i.run.bind(i)})};return this._runTransaction(r,t,n,o)},e.prototype.close=function(){var r=this;return new _n.Observable(function(t){r._session.close().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype.lastBookmark=function(){return this.lastBookmarks()},e.prototype.lastBookmarks=function(){return this._session.lastBookmarks()},e.prototype._beginTransaction=function(r,t,n){var o=this,i=oc.empty();return t&&(i=new oc(t,this._log)),new _n.Observable(function(a){try{o._session._beginTransaction(r,i,n).then(function(s){a.next(new i8.default(s)),a.complete()}).catch(function(s){return a.error(s)})}catch(s){a.error(s)}return function(){}})},e.prototype._runTransaction=function(r,t,n,o){var i=this;o===void 0&&(o=function(c){return c});var a=oc.empty();n&&(a=new oc(n));var s={apiTelemetryConfig:{api:Xm.MANAGED_TRANSACTION,onTelemetrySuccess:function(){s.apiTelemetryConfig=void 0}}};return this._retryLogic.retry((0,_n.of)(1).pipe((0,zi.mergeMap)(function(){return i._beginTransaction(r,a,s.apiTelemetryConfig)}),(0,zi.mergeMap)(function(c){return(0,_n.defer)(function(){try{return t(o(c))}catch(u){return(0,_n.throwError)(function(){return u})}}).pipe((0,zi.catchError)(function(u){return c.rollback().pipe((0,zi.concatWith)((0,_n.throwError)(function(){return u})))}),(0,zi.concatWith)(c.commit()))})))},e}();kl.default=s8;function c8(e){var r=e&&e.maxTransactionRetryTime?e.maxTransactionRetryTime:null;return new u8.default({maxRetryTimeout:r})}var l8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),f8=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dr,"__esModule",{value:!0});dr.WRITE=dr.READ=dr.Driver=void 0;var mf=q,d8=f8(kl),Jm=mf.internal.constants.FETCH_ALL,h8=mf.driver.READ,r1=mf.driver.WRITE;dr.READ=h8;dr.WRITE=r1;var n1=function(e){l8(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.rxSession=function(t){var n=t===void 0?{}:t,o=n.defaultAccessMode,i=o===void 0?r1:o,a=n.bookmarks,s=n.database,c=s===void 0?"":s,u=n.fetchSize,l=n.impersonatedUser,d=n.bookmarkManager,h=n.notificationFilter,p=n.auth;return new d8.default({session:this._newSession({defaultAccessMode:i,bookmarkOrBookmarks:a,database:c,impersonatedUser:l,auth:p,reactive:!1,fetchSize:p8(u,this._config.fetchSize),bookmarkManager:d,notificationFilter:h,log:this._log}),config:this._config,log:this._log})},r}(mf.Driver);dr.Driver=n1;function p8(e,r){var t=parseInt(e,10);if(t>0||t===Jm)return t;if(t===0||t<0)throw new Error("The fetch size can only be a positive value or ".concat(Jm," for ALL. However fetchSize = ").concat(t));return r}dr.default=n1;var j_={};Object.defineProperty(j_,"__esModule",{value:!0});j_.default="5.28.1";var o1={},Vr={},gf={};Object.defineProperty(gf,"__esModule",{value:!0});var v8=function(){function e(){}return e.prototype.selectReader=function(r){throw new Error("Abstract function")},e.prototype.selectWriter=function(r){throw new Error("Abstract function")},e}();gf.default=v8;var $_={},N_={};Object.defineProperty(N_,"__esModule",{value:!0});var _8=function(){function e(r){this._offset=r||0}return e.prototype.next=function(r){if(r===0)return-1;var t=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),t%r},e}();N_.default=_8;var y8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),i1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($_,"__esModule",{value:!0});var eg=i1(N_),b8=i1(gf),m8=function(e){y8(r,e);function r(t){var n=e.call(this)||this;return n._readersIndex=new eg.default,n._writersIndex=new eg.default,n._connectionPool=t,n}return r.prototype.selectReader=function(t){return this._select(t,this._readersIndex)},r.prototype.selectWriter=function(t){return this._select(t,this._writersIndex)},r.prototype._select=function(t,n){var o=t.length;if(o===0)return null;var i=n.next(o),a=i,s=null,c=Number.MAX_SAFE_INTEGER;do{var u=t[a],l=this._connectionPool.activeResourceCount(u);l<c&&(s=u,c=l),a===o-1?a=0:a++}while(a!==i);return s},r}(b8.default);$_.default=m8;var a1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vr,"__esModule",{value:!0});Vr.LeastConnectedLoadBalancingStrategy=Vr.LoadBalancingStrategy=void 0;var g8=a1(gf);Vr.LoadBalancingStrategy=g8.default;var u1=a1($_);Vr.LeastConnectedLoadBalancingStrategy=u1.default;Vr.default=u1.default;var k_={},M_={},ro={},Mr={},D_={},wr={},no={},wf={},w8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(wf,"__esModule",{value:!0});var s1=function(){function e(r){this.position=0,this.length=r}return e.prototype.getUInt8=function(r){throw new Error("Not implemented")},e.prototype.getInt8=function(r){throw new Error("Not implemented")},e.prototype.getFloat64=function(r){throw new Error("Not implemented")},e.prototype.getVarInt=function(r){throw new Error("Not implemented")},e.prototype.putUInt8=function(r,t){throw new Error("Not implemented")},e.prototype.putInt8=function(r,t){throw new Error("Not implemented")},e.prototype.putFloat64=function(r,t){throw new Error("Not implemented")},e.prototype.getInt16=function(r){return this.getInt8(r)<<8|this.getUInt8(r+1)},e.prototype.getUInt16=function(r){return this.getUInt8(r)<<8|this.getUInt8(r+1)},e.prototype.getInt32=function(r){return this.getInt8(r)<<24|this.getUInt8(r+1)<<16|this.getUInt8(r+2)<<8|this.getUInt8(r+3)},e.prototype.getUInt32=function(r){return this.getUInt8(r)<<24|this.getUInt8(r+1)<<16|this.getUInt8(r+2)<<8|this.getUInt8(r+3)},e.prototype.getInt64=function(r){return this.getInt8(r)<<56|this.getUInt8(r+1)<<48|this.getUInt8(r+2)<<40|this.getUInt8(r+3)<<32|this.getUInt8(r+4)<<24|this.getUInt8(r+5)<<16|this.getUInt8(r+6)<<8|this.getUInt8(r+7)},e.prototype.getSlice=function(r,t){return new O8(r,t,this)},e.prototype.putInt16=function(r,t){this.putInt8(r,t>>8),this.putUInt8(r+1,t&255)},e.prototype.putUInt16=function(r,t){this.putUInt8(r,t>>8&255),this.putUInt8(r+1,t&255)},e.prototype.putInt32=function(r,t){this.putInt8(r,t>>24),this.putUInt8(r+1,t>>16&255),this.putUInt8(r+2,t>>8&255),this.putUInt8(r+3,t&255)},e.prototype.putUInt32=function(r,t){this.putUInt8(r,t>>24&255),this.putUInt8(r+1,t>>16&255),this.putUInt8(r+2,t>>8&255),this.putUInt8(r+3,t&255)},e.prototype.putInt64=function(r,t){this.putInt8(r,t>>48),this.putUInt8(r+1,t>>42&255),this.putUInt8(r+2,t>>36&255),this.putUInt8(r+3,t>>30&255),this.putUInt8(r+4,t>>24&255),this.putUInt8(r+5,t>>16&255),this.putUInt8(r+6,t>>8&255),this.putUInt8(r+7,t&255)},e.prototype.putVarInt=function(r,t){for(var n=0;t>1;){var o=t%128;t>=128&&(o+=128),t=t/128,this.putUInt8(r+n,o),n+=1}return n},e.prototype.putBytes=function(r,t){for(var n=0,o=t.remaining();n<o;n++)this.putUInt8(r+n,t.readUInt8())},e.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},e.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},e.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},e.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},e.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},e.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},e.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},e.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},e.prototype.readVarInt=function(){var r=this.getVarInt(this.position);return this._updatePos(r.length),r.value},e.prototype.writeUInt8=function(r){this.putUInt8(this._updatePos(1),r)},e.prototype.writeInt8=function(r){this.putInt8(this._updatePos(1),r)},e.prototype.writeInt16=function(r){this.putInt16(this._updatePos(2),r)},e.prototype.writeInt32=function(r){this.putInt32(this._updatePos(4),r)},e.prototype.writeUInt32=function(r){this.putUInt32(this._updatePos(4),r)},e.prototype.writeInt64=function(r){this.putInt64(this._updatePos(8),r)},e.prototype.writeFloat64=function(r){this.putFloat64(this._updatePos(8),r)},e.prototype.writeVarInt=function(r){var t=this.putVarInt(this.position,r);this._updatePos(t)},e.prototype.writeBytes=function(r){this.putBytes(this._updatePos(r.remaining()),r)},e.prototype.readSlice=function(r){return this.getSlice(this._updatePos(r),r)},e.prototype._updatePos=function(r){var t=this.position;return this.position+=r,t},e.prototype.remaining=function(){return this.length-this.position},e.prototype.hasRemaining=function(){return this.remaining()>0},e.prototype.reset=function(){this.position=0},e.prototype.toString=function(){return this.constructor.name+"( position="+this.position+` )
  `+this.toHex()},e.prototype.toHex=function(){for(var r="",t=0;t<this.length;t++){var n=this.getUInt8(t).toString(16);n.length===1&&(n="0"+n),r+=n,t!==this.length-1&&(r+=" ")}return r},e}();wf.default=s1;var O8=function(e){w8(r,e);function r(t,n,o){var i=e.call(this,n)||this;return i._start=t,i._inner=o,i}return r.prototype.putUInt8=function(t,n){this._inner.putUInt8(this._start+t,n)},r.prototype.getUInt8=function(t){return this._inner.getUInt8(this._start+t)},r.prototype.putInt8=function(t,n){this._inner.putInt8(this._start+t,n)},r.prototype.putFloat64=function(t,n){this._inner.putFloat64(this._start+t,n)},r.prototype.getInt8=function(t){return this._inner.getInt8(this._start+t)},r.prototype.getFloat64=function(t){return this._inner.getFloat64(this._start+t)},r}(s1),E8=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(no,"__esModule",{value:!0});no.BaseBuffer=void 0;var c1=E8(wf);no.BaseBuffer=c1.default;no.default=c1.default;var S8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),l1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wr,"__esModule",{value:!0});wr.alloc=void 0;var ic=l1(G0),T8=l1(no),f1=function(e){S8(r,e);function r(t){var n=this,o=C8(t);return n=e.call(this,o.length)||this,n._buffer=o,n}return r.prototype.getUInt8=function(t){return this._buffer.readUInt8(t)},r.prototype.getInt8=function(t){return this._buffer.readInt8(t)},r.prototype.getFloat64=function(t){return this._buffer.readDoubleBE(t)},r.prototype.getVarInt=function(t){for(var n=0,o=this._buffer.readInt8(t+n),i=o%128;o/128>=1;)n+=1,o=this._buffer.readInt8(t+n),i+=o%128;return{length:n+1,value:i}},r.prototype.putUInt8=function(t,n){this._buffer.writeUInt8(n,t)},r.prototype.putInt8=function(t,n){this._buffer.writeInt8(n,t)},r.prototype.putFloat64=function(t,n){this._buffer.writeDoubleBE(n,t)},r.prototype.putBytes=function(t,n){if(n instanceof r){var o=Math.min(n.length-n.position,this.length-t);n._buffer.copy(this._buffer,t,n.position,n.position+o),n.position+=o}else e.prototype.putBytes.call(this,t,n)},r.prototype.getSlice=function(t,n){return new r(this._buffer.slice(t,t+n))},r}(T8.default);wr.default=f1;function P8(e){return new f1(e)}wr.alloc=P8;function C8(e){return e instanceof ic.default.Buffer?e:typeof e=="number"&&typeof ic.default.Buffer.alloc=="function"?ic.default.Buffer.alloc(e):new ic.default.Buffer(e)}var A8=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(D_,"__esModule",{value:!0});var tg=A8(wr),bo=q,d1=bo.internal.util,h1=d1.ENCRYPTION_OFF,I8=d1.ENCRYPTION_ON,rg=1,R8=3,j8=function(){function e(r,t,n){t===void 0&&(t=x8),n===void 0&&(n=function(u){return new WebSocket(u)});var o=this;this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=r,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._receiveTimeoutId=null,this._closingPromise=null;var i=D8(r,t),a=i.scheme,s=i.error;if(s){this._error=s;return}this._ws=$8(a,r.address,n),this._ws.binaryType="arraybuffer";var c=this;this._ws.onclose=function(u){u&&!u.wasClean&&c._handleConnectionError(),c._open=!1},this._ws.onopen=function(){c._clearConnectionTimeout();var u=c._pending;c._pending=null;for(var l=0;l<u.length;l++)c.write(u[l])},this._ws.onmessage=function(u){if(o._resetTimeout(),c.onmessage){var l=new tg.default(u.data);c.onmessage(l)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}return e.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired){this._error=(0,bo.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),this.onerror&&this.onerror(this._error);return}this._open&&!this._timedout&&(this._error=(0,bo.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},e.prototype.write=function(r){if(this._pending!==null)this._pending.push(r);else if(r instanceof tg.default)try{this._ws.send(r._buffer)}catch(t){if(this._ws.readyState!==rg)this._handleConnectionError();else throw t}else throw(0,bo.newError)("Don't know how to send buffer: "+r)},e.prototype.close=function(){var r=this;return this._closingPromise===null&&(this._closingPromise=new Promise(function(t,n){r._clearConnectionTimeout(),r._ws&&r._ws.readyState!==R8?(r._open=!1,r.stopReceiveTimeout(),r._ws.onclose=function(){t()},r._ws.close()):t()})),this._closingPromise},e.prototype.setupReceiveTimeout=function(r){this._receiveTimeout=r},e.prototype.stopReceiveTimeout=function(){this._receiveTimeout!==null&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,this._receiveTimeoutId!=null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=null)},e.prototype.startReceiveTimeout=function(){this._open&&this._receiveTimeout!==null&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._resetTimeout())},e.prototype._resetTimeout=function(){var r=this;this._receiveTimeoutStarted&&(this._receiveTimeoutId!==null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=setTimeout(function(){r._receiveTimeoutId=null,r._timedout=!0,r.stopReceiveTimeout(),r._error=(0,bo.newError)("Connection lost. Server didn't respond in ".concat(r._receiveTimeout,"ms"),r._config.connectionErrorCode),r.close(),r.onerror&&r.onerror(r._error)},this._receiveTimeout))},e.prototype._setupConnectionTimeout=function(){var r=this,t=this._config.connectionTimeout;if(t){var n=this._ws;return setTimeout(function(){n.readyState!==rg&&(r._connectionTimeoutFired=!0,n.close())},t)}return null},e.prototype._clearConnectionTimeout=function(){var r=this._connectionTimeoutId;(r||r===0)&&(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(r))},e}();D_.default=j8;function $8(e,r,t){var n=e+"://"+r.asHostPort();try{return t(n)}catch(i){if(N8(i,r)){var o=M8(e,r);return t(o)}else throw i}}function N8(e,r){return e.name==="SyntaxError"&&k8(r.asHostPort())}function k8(e){return e.charAt(0)==="["&&e.indexOf("]")!==-1}function M8(e,r){var t=r.host().replace(/:/g,"-"),n=t.replace("%","s"),o=n+".ipv6-literal.net";return"".concat(e,"://").concat(o,":").concat(r.port())}function D8(e,r){var t=L8(e),n=U8(e),o=e.trust,i=F8(r);if(B8(t,n,i),n)return{scheme:"ws",error:null};if(i)return{scheme:"wss",error:null};if(t){if(!o||o==="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES")return{scheme:"wss",error:null};var a=(0,bo.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+o+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+h1+'"` in the driver configuration.');return{scheme:null,error:a}}return{scheme:"ws",error:null}}function L8(e){return e.encrypted===!0||e.encrypted===I8}function U8(e){return e.encrypted===!1||e.encrypted===h1}function F8(e){var r=typeof e=="function"?e():"";return r&&r.toLowerCase().indexOf("https")>=0}function B8(e,r,t){t===null||(e&&!t?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):r&&t&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}function x8(){return typeof window<"u"&&window.location?window.location.protocol:null}var L_={},V8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(L_,"__esModule",{value:!0});var W8=q,z8=W8.internal.resolver.BaseHostNameResolver,q8=function(e){V8(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.resolve=function(t){return this._resolveToItself(t)},r}(z8);L_.default=q8;var U_={},H8=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},G8=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(U_,"__esModule",{value:!0});U_.default={load:function(e){return H8(this,void 0,void 0,function(){return G8(this,function(r){return[2,e]})})}};var F_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.ClientCertificatesLoader=Mr.HostNameResolver=Mr.Channel=void 0;var K8=F_(D_),Y8=F_(L_),Z8=F_(U_);Mr.Channel=K8.default;Mr.HostNameResolver=Y8.default;Mr.ClientCertificatesLoader=Z8.default;var Uo={},B_={},Q8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(B_,"__esModule",{value:!0});var X8=no,J8=wr,e5=function(e){Q8(r,e);function r(t){for(var n=this,o=0,i=0;i<t.length;i++)o+=t[i].length;return n=e.call(this,o)||this,n._buffers=t,n}return r.prototype.getUInt8=function(t){for(var n=0;n<this._buffers.length;n++){var o=this._buffers[n];if(t>=o.length)t-=o.length;else return o.getUInt8(t)}},r.prototype.getInt8=function(t){for(var n=0;n<this._buffers.length;n++){var o=this._buffers[n];if(t>=o.length)t-=o.length;else return o.getInt8(t)}},r.prototype.getFloat64=function(t){for(var n=(0,J8.alloc)(8),o=0;o<8;o++)n.putUInt8(o,this.getUInt8(t+o));return n.getFloat64(0)},r}(X8.BaseBuffer);B_.default=e5;var t5=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),p1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Uo,"__esModule",{value:!0});Uo.Dechunker=Uo.Chunker=void 0;var r5=p1(wf),ng=wr,n5=p1(B_),ac=2,o5=0,i5=1400,a5=function(e){t5(r,e);function r(t,n){var o=e.call(this,0)||this;return o._bufferSize=n||i5,o._ch=t,o._buffer=(0,ng.alloc)(o._bufferSize),o._currentChunkStart=0,o._chunkOpen=!1,o}return r.prototype.putUInt8=function(t,n){this._ensure(1),this._buffer.writeUInt8(n)},r.prototype.putInt8=function(t,n){this._ensure(1),this._buffer.writeInt8(n)},r.prototype.putFloat64=function(t,n){this._ensure(8),this._buffer.writeFloat64(n)},r.prototype.putBytes=function(t,n){for(;n.remaining()>0;)this._ensure(1),this._buffer.remaining()>n.remaining()?this._buffer.writeBytes(n):this._buffer.writeBytes(n.readSlice(this._buffer.remaining()));return this},r.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var t=this._buffer;this._buffer=null,this._ch.write(t.getSlice(0,t.position)),this._buffer=(0,ng.alloc)(this._bufferSize),this._chunkOpen=!1}return this},r.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<ac&&this.flush(),this._buffer.writeInt16(o5)},r.prototype._ensure=function(t){var n=this._chunkOpen?t:t+ac;this._buffer.remaining()<n&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+ac,this._chunkOpen=!0)},r.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var t=this._buffer.position-(this._currentChunkStart+ac);this._buffer.putUInt16(this._currentChunkStart,t),this._chunkOpen=!1}},r}(r5.default);Uo.Chunker=a5;var u5=function(){function e(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return e.prototype.AWAITING_CHUNK=function(r){return r.remaining()>=2?this._onHeader(r.readUInt16()):(this._partialChunkHeader=r.readUInt8()<<8,this.IN_HEADER)},e.prototype.IN_HEADER=function(r){return this._onHeader((this._partialChunkHeader|r.readUInt8())&65535)},e.prototype.IN_CHUNK=function(r){return this._chunkSize<=r.remaining()?(this._currentMessage.push(r.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=r.remaining(),this._currentMessage.push(r.readSlice(r.remaining())),this.IN_CHUNK)},e.prototype.CLOSED=function(r){},e.prototype._onHeader=function(r){if(r===0){var t=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:t=this._currentMessage[0];break;default:t=new n5.default(this._currentMessage);break}return this._currentMessage=[],this.onmessage(t),this.AWAITING_CHUNK}else return this._chunkSize=r,this.IN_CHUNK},e.prototype.write=function(r){for(;r.hasRemaining();)this._state=this._state(r)},e}();Uo.Dechunker=u5;var x_={};Object.defineProperty(x_,"__esModule",{value:!0});var Of=q,v1=Of.internal.util,s5=v1.ENCRYPTION_OFF,c5=v1.ENCRYPTION_ON,l5=Of.error.SERVICE_UNAVAILABLE,og=[null,void 0,!0,!1,c5,s5],ig=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"],f5=function(){function e(r,t,n,o){this.address=r,this.encrypted=d5(t),this.trust=h5(t),this.trustedCertificates=p5(t),this.knownHostsPath=v5(t),this.connectionErrorCode=n||l5,this.connectionTimeout=t.connectionTimeout,this.clientCertificate=o}return e}();x_.default=f5;function d5(e){var r=e.encrypted;if(og.indexOf(r)===-1)throw(0,Of.newError)("Illegal value of the encrypted setting ".concat(r,". Expected one of ").concat(og));return r}function h5(e){var r=e.trust;if(ig.indexOf(r)===-1)throw(0,Of.newError)("Illegal value of the trust setting ".concat(r,". Expected one of ").concat(ig));return r}function p5(e){return e.trustedCertificates||[]}function v5(e){return e.knownHosts||null}var V_={},_1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(V_,"__esModule",{value:!0});var _5=_1(wr),y5=q,hp=_1(G0),b5=WP(),ag=new b5.StringDecoder("utf8");function m5(e){return new _5.default(S5(e))}function g5(e,r){if(Object.prototype.hasOwnProperty.call(e,"_buffer"))return w5(e,r);if(Object.prototype.hasOwnProperty.call(e,"_buffers"))return O5(e,r);throw(0,y5.newError)("Don't know how to decode strings from '".concat(e,"'"))}function w5(e,r){var t=e.position,n=t+r;return e.position=Math.min(n,e.length),e._buffer.toString("utf8",t,n)}function O5(e,r){return E5(e,r,function(t){return ag.write(t._buffer)},function(){return ag.end()})}function E5(e,r,t,n){var o=r,i=e.position;e._updatePos(Math.min(r,e.length-i));var a=e._buffers.reduce(function(s,c){if(o<=0)return s;if(i>=c.length)return i-=c.length,"";c._updatePos(i-c.position);var u=Math.min(c.length-i,o),l=c.readSlice(u);return c._updatePos(u),o=Math.max(o-l.length,0),i=0,s+t(l)},"");return a+n()}function S5(e){return typeof hp.default.Buffer.from=="function"?hp.default.Buffer.from(e,"utf8"):new hp.default.Buffer(e,"utf8")}V_.default={encode:m5,decode:g5};(function(e){var r=f&&f.__createBinding||(Object.create?function(s,c,u,l){l===void 0&&(l=u);var d=Object.getOwnPropertyDescriptor(c,u);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(s,l,d)}:function(s,c,u,l){l===void 0&&(l=u),s[l]=c[u]}),t=f&&f.__exportStar||function(s,c){for(var u in s)u!=="default"&&!Object.prototype.hasOwnProperty.call(c,u)&&r(c,s,u)},n=f&&f.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.utf8=e.alloc=e.ChannelConfig=void 0,t(Mr,e),t(Uo,e);var o=x_;Object.defineProperty(e,"ChannelConfig",{enumerable:!0,get:function(){return n(o).default}});var i=wr;Object.defineProperty(e,"alloc",{enumerable:!0,get:function(){return i.alloc}});var a=V_;Object.defineProperty(e,"utf8",{enumerable:!0,get:function(){return n(a).default}})})(ro);Object.defineProperty(M_,"__esModule",{value:!0});var y1=ro,b1=q,T5=1616949271,P5=["5.8","5.7","5.6","5.4","5.3","5.2","5.1","5.0","4.4","4.3","4.2","3.0"],C5=0;function vo(e,r){return{major:e,minor:r}}function A5(e){if(e.length>4)throw(0,b1.newError)("It should not have more than 4 versions of the protocol");var r=(0,y1.alloc)(5*4);return r.writeInt32(T5),e.forEach(function(t){if(t instanceof Array){var n=t[0],o=n.major,i=n.minor,a=t[1].minor,s=i-a;r.writeInt32(s<<16|i<<8|o)}else{var o=t.major,i=t.minor;r.writeInt32(i<<8|o)}}),r.reset(),r}function I5(e,r){var t=[e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readUInt8()];if(t[0]===72&&t[1]===84&&t[2]===84&&t[3]===80)throw r.error("Handshake failed since server responded with HTTP."),(0,b1.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return+(t[3]+"."+t[2])}function R5(e,r,t){for(var n=r.readVarInt(),o=[],i=0;i<n;i++){var a=[r.readUInt8(),r.readUInt8(),r.readUInt8(),r.readUInt8()];o=o.concat(k5(a))}r.readVarInt();var s=M5(),c=0,u=0;o.sort(function(d,h){return Number(d.major)!==Number(h.major)?Number(h.major)-Number(d.major):Number(h.minor)-Number(d.minor)});for(var i=0;i<o.length;i++){var l=o[i];if(P5.includes(l.major+"."+l.minor)){c=l.major,u=l.minor;break}}return new Promise(function(d,h){try{var p=(0,y1.alloc)(5);p.writeInt32(u<<8|c),p.writeVarInt(s),e.write(p),d({protocolVersion:+(c+"."+u),capabilites:s,consumeRemainingBuffer:function(v){r.hasRemaining()&&v(r.readSlice(r.remaining()))}})}catch(v){h(v)}})}function j5(){return A5([vo(255,1),[vo(5,8),vo(5,0)],[vo(4,4),vo(4,2)],vo(3,0)])}function $5(e,r){return N5(e,r).then(function(t){return t.protocolVersion===255.1?R5(e,t.buffer):t})}M_.default=$5;function N5(e,r){var t=this;return new Promise(function(n,o){var i=function(a){o(a)};e.onerror=i.bind(t),e._error&&i(e._error),e.onmessage=function(a){try{var s=I5(a,r);n({protocolVersion:s,capabilites:0,buffer:a,consumeRemainingBuffer:function(c){a.hasRemaining()&&c(a.readSlice(a.remaining()))}})}catch(c){o(c)}},e.write(j5())})}function k5(e){for(var r=[],t=e[3],n=e[2],o=0;o<=e[1];o++)r.push({major:t,minor:n-o});return r}function M5(e){return C5}var W_={},Ef={},We={},oe={},Sf={},z_=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),D5=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sf,"__esModule",{value:!0});D5(q);var Tf=function(){function e(){}return e.ofRecord=function(r){return r===null?e.ofNull():new F5(r)},e.ofMessageResponse=function(r){return r===null?e.ofNull():new L5(r)},e.ofNull=function(){return new U5},Object.defineProperty(e.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),e}();Sf.default=Tf;var L5=function(e){z_(r,e);function r(t){var n=e.call(this)||this;return n._response=t,n}return Object.defineProperty(r.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNull",{get:function(){return this._response===null},enumerable:!1,configurable:!0}),r}(Tf),U5=function(e){z_(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),r}(Tf),F5=function(e){z_(r,e);function r(t){var n=e.call(this)||this;return n._record=t,n}return Object.defineProperty(r.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNull",{get:function(){return this._record===null},enumerable:!1,configurable:!0}),r}(Tf),Jt={},xn={};Object.defineProperty(xn,"__esModule",{value:!0});xn.reuseOngoingRequest=xn.identity=void 0;var B5=q;function x5(e){return e}xn.identity=x5;function V5(e,r){r===void 0&&(r=null);var t=new Map;return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=B5.json.stringify(n);if(t.has(i))return t.get(i);var a=e.apply(r,n);return t.set(i,a),a.finally(function(){t.delete(i)})}}xn.reuseOngoingRequest=V5;var Pf={},W5=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Pf,"__esModule",{value:!0});Pf.equals=void 0;function z5(e,r){var t,n;if(e===r)return!0;if(e===null||r===null)return!1;if(typeof e=="object"&&typeof r=="object"){var o=Object.keys(e),i=Object.keys(r);if(o.length!==i.length)return!1;try{for(var a=W5(o),s=a.next();!s.done;s=a.next()){var c=s.value;if(e[c]!==r[c])return!1}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0}return!1}Pf.equals=z5;var q5=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),H5=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),m1=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&q5(r,e,t);return H5(r,e),r};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.object=Jt.functional=void 0;Jt.functional=m1(xn);Jt.object=m1(Pf);var Or=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),G5=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oe,"__esModule",{value:!0});oe.TelemetryObserver=oe.ProcedureRouteObserver=oe.RouteObserver=oe.CompletedObserver=oe.FailedObserver=oe.ResetObserver=oe.LogoffObserver=oe.LoginObserver=oe.ResultStreamObserver=oe.StreamObserver=void 0;var nt=q,g1=G5(Sf),K5=Jt,Y5=nt.internal.constants.FETCH_ALL,Wr=nt.error.PROTOCOL_ERROR,oo=function(){function e(){}return e.prototype.onNext=function(r){},e.prototype.onError=function(r){},e.prototype.onCompleted=function(r){},e}();oe.StreamObserver=oo;var Cf=function(e){Or(r,e);function r(t){var n=t===void 0?{}:t,o=n.reactive,i=o===void 0?!1:o,a=n.moreFunction,s=n.discardFunction,c=n.fetchSize,u=c===void 0?Y5:c,l=n.beforeError,d=n.afterError,h=n.beforeKeys,p=n.afterKeys,v=n.beforeComplete,y=n.afterComplete,_=n.server,b=n.highRecordWatermark,w=b===void 0?Number.MAX_VALUE:b,S=n.lowRecordWatermark,E=S===void 0?Number.MAX_VALUE:S,T=n.enrichMetadata,C=n.onDb,P=e.call(this)||this;return P._fieldKeys=null,P._fieldLookup=null,P._head=null,P._queuedRecords=[],P._tail=null,P._error=null,P._observers=[],P._meta={},P._server=_,P._beforeError=l,P._afterError=d,P._beforeKeys=h,P._afterKeys=p,P._beforeComplete=v,P._afterComplete=y,P._enrichMetadata=T||K5.functional.identity,P._queryId=null,P._moreFunction=a,P._discardFunction=s,P._discard=!1,P._fetchSize=u,P._lowRecordWatermark=E,P._highRecordWatermark=w,P._setState(i?Nt.READY:Nt.READY_STREAMING),P._setupAutoPull(),P._paused=!1,P._pulled=!i,P._haveRecordStreamed=!1,P._onDb=C,P}return r.prototype.pause=function(){this._paused=!0},r.prototype.resume=function(){this._paused=!1,this._setupAutoPull(!0),this._state.pull(this)},r.prototype.onNext=function(t){this._haveRecordStreamed=!0;var n=new nt.Record(this._fieldKeys,t,this._fieldLookup);this._observers.some(function(o){return o.onNext})?this._observers.forEach(function(o){o.onNext&&o.onNext(n)}):(this._queuedRecords.push(n),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},r.prototype.onCompleted=function(t){this._state.onSuccess(this,t)},r.prototype.onError=function(t){this._state.onError(this,t)},r.prototype.cancel=function(){this._discard=!0},r.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(Nt.STREAMING)},r.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(Nt.SUCCEEDED)},r.prototype.subscribe=function(t){if(this._head&&t.onKeys&&t.onKeys(this._head),this._queuedRecords.length>0&&t.onNext)for(var n=0;n<this._queuedRecords.length;n++)t.onNext(this._queuedRecords[n]),this._queuedRecords.length-n-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===Nt.READY&&this._handleStreaming());this._tail&&t.onCompleted&&t.onCompleted(this._tail),this._error&&t.onError(this._error),this._observers.push(t),this._state===Nt.READY&&this._handleStreaming()},r.prototype._handleHasMore=function(t){this._setState(Nt.READY),this._handleStreaming(),delete t.has_more},r.prototype._handlePullSuccess=function(t){var n=this,o=this._enrichMetadata(Object.assign(this._server?{server:this._server}:{},this._meta,{stream_summary:{have_records_streamed:this._haveRecordStreamed,pulled:this._pulled,has_keys:this._fieldKeys.length>0}},t));if(![void 0,null,"r","w","rw","s"].includes(o.type)){this.onError((0,nt.newError)(`Server returned invalid query type. Expected one of [undefined, null, "r", "w", "rw", "s"] but got '`.concat(o.type,"'"),Wr));return}this._setState(Nt.SUCCEEDED);var i=null;this._beforeComplete&&(i=this._beforeComplete(o));var a=function(){n._tail=o,n._observers.some(function(s){return s.onCompleted})&&n._observers.forEach(function(s){s.onCompleted&&s.onCompleted(o)}),n._afterComplete&&n._afterComplete(o)};i?Promise.resolve(i).then(function(){return a()}):a()},r.prototype._handleRunSuccess=function(t,n){var o=this;if(this._fieldKeys===null){if(this._fieldKeys=[],this._fieldLookup={},t.fields&&t.fields.length>0){this._fieldKeys=t.fields;for(var i=0;i<t.fields.length;i++)this._fieldLookup[t.fields[i]]=i}t.db!==null&&this._onDb!==void 0&&this._onDb(t.db),t.fields!=null&&delete t.fields,t.qid!==null&&t.qid!==void 0&&(this._queryId=t.qid,delete t.qid),this._storeMetadataForCompletion(t);var a=null;this._beforeKeys&&(a=this._beforeKeys(this._fieldKeys));var s=function(){o._head=o._fieldKeys,o._observers.some(function(c){return c.onKeys})&&o._observers.forEach(function(c){c.onKeys&&c.onKeys(o._fieldKeys)}),o._afterKeys&&o._afterKeys(o._fieldKeys),n()};a?Promise.resolve(a).then(function(){return s()}):s()}},r.prototype._handleError=function(t){var n=this;this._setState(Nt.FAILED),this._error=t;var o=null;this._beforeError&&(o=this._beforeError(t));var i=function(){n._observers.some(function(a){return a.onError})&&n._observers.forEach(function(a){a.onError&&a.onError(t)}),n._afterError&&n._afterError(t)};o?Promise.resolve(o).then(function(){return i()}):i()},r.prototype._handleStreaming=function(){this._head&&this._observers.some(function(t){return t.onNext||t.onCompleted})&&!this._paused&&(this._discard||this._autoPull)&&this._more()},r.prototype._more=function(){this._discard?this._discardFunction(this._queryId,this):(this._pulled=!0,this._moreFunction(this._queryId,this._fetchSize,this)),this._setState(Nt.STREAMING)},r.prototype._storeMetadataForCompletion=function(t){for(var n=Object.keys(t),o=n.length,i="";o--;)i=n[o],this._meta[i]=t[i]},r.prototype._setState=function(t){this._state=t},r.prototype._setupAutoPull=function(){this._autoPull=!0},r}(oo);oe.ResultStreamObserver=Cf;var Z5=function(e){Or(r,e);function r(t){var n=t===void 0?{}:t,o=n.onError,i=n.onCompleted,a=e.call(this)||this;return a._onError=o,a._onCompleted=i,a}return r.prototype.onNext=function(t){this.onError((0,nt.newError)("Received RECORD when initializing "+nt.json.stringify(t)))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(oo);oe.LoginObserver=Z5;var Q5=function(e){Or(r,e);function r(t){var n=t===void 0?{}:t,o=n.onError,i=n.onCompleted,a=e.call(this)||this;return a._onError=o,a._onCompleted=i,a}return r.prototype.onNext=function(t){this.onError((0,nt.newError)("Received RECORD when logging off "+nt.json.stringify(t)))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(oo);oe.LogoffObserver=Q5;var X5=function(e){Or(r,e);function r(t){var n=t===void 0?{}:t,o=n.onProtocolError,i=n.onError,a=n.onComplete,s=e.call(this)||this;return s._onProtocolError=o,s._onError=i,s._onComplete=a,s}return r.prototype.onNext=function(t){this.onError((0,nt.newError)("Received RECORD when resetting: received record is: "+nt.json.stringify(t),Wr))},r.prototype.onError=function(t){t.code===Wr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onComplete&&this._onComplete(t)},r}(oo);oe.ResetObserver=X5;var J5=function(e){Or(r,e);function r(t){var n=t===void 0?{}:t,o=n.onError,i=n.onCompleted,a=e.call(this)||this;return a._onError=o,a._onCompleted=i,a}return r.prototype.onNext=function(t){this.onError((0,nt.newError)("Received RECORD when sending telemetry "+nt.json.stringify(t),Wr))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(Cf);oe.TelemetryObserver=J5;var eV=function(e){Or(r,e);function r(t){var n=t.error,o=t.onError,i=e.call(this,{beforeError:o})||this;return i.onError(n),i}return r}(Cf);oe.FailedObserver=eV;var tV=function(e){Or(r,e);function r(){var t=e.call(this)||this;return e.prototype.markCompleted.call(t),t}return r}(Cf);oe.CompletedObserver=tV;var rV=function(e){Or(r,e);function r(t){var n=t.resultObserver,o=t.onProtocolError,i=t.onError,a=t.onCompleted,s=e.call(this)||this;return s._resultObserver=n,s._onError=i,s._onCompleted=a,s._records=[],s._onProtocolError=o,n.subscribe(s),s}return r.prototype.onNext=function(t){this._records.push(t)},r.prototype.onError=function(t){t.code===Wr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(){if(this._records!==null&&this._records.length!==1){this.onError((0,nt.newError)("Illegal response from router. Received "+this._records.length+` records but expected only one.
`+nt.json.stringify(this._records),Wr));return}this._onCompleted&&this._onCompleted(g1.default.ofRecord(this._records[0]))},r}(oo);oe.ProcedureRouteObserver=rV;var nV=function(e){Or(r,e);function r(t){var n=t===void 0?{}:t,o=n.onProtocolError,i=n.onError,a=n.onCompleted,s=e.call(this)||this;return s._onProtocolError=o,s._onError=i,s._onCompleted=a,s}return r.prototype.onNext=function(t){this.onError((0,nt.newError)("Received RECORD when resetting: received record is: "+nt.json.stringify(t),Wr))},r.prototype.onError=function(t){t.code===Wr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(g1.default.ofMessageResponse(t))},r}(oo);oe.RouteObserver=nV;var Nt={READY_STREAMING:{onSuccess:function(e,r){e._handleRunSuccess(r,function(){e._setState(Nt.STREAMING)})},onError:function(e,r){e._handleError(r)},name:function(){return"READY_STREAMING"},pull:function(){}},READY:{onSuccess:function(e,r){e._handleRunSuccess(r,function(){return e._handleStreaming()})},onError:function(e,r){e._handleError(r)},name:function(){return"READY"},pull:function(e){return e._more()}},STREAMING:{onSuccess:function(e,r){r.has_more?e._handleHasMore(r):e._handlePullSuccess(r)},onError:function(e,r){e._handleError(r)},name:function(){return"STREAMING"},pull:function(){}},FAILED:{onError:function(e){},name:function(){return"FAILED"},pull:function(){}},SUCCEEDED:{name:function(){return"SUCCEEDED"},pull:function(){}}};Object.defineProperty(We,"__esModule",{value:!0});We.assertNotificationFilterIsEmpty=We.assertImpersonatedUserIsEmpty=We.assertTxConfigIsEmpty=We.assertDatabaseIsEmpty=void 0;var Ea=q;function oV(e,r,t){if(r===void 0&&(r=function(){}),e&&!e.isEmpty()){var n=(0,Ea.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw r(n.message),t.onError(n),n}}We.assertTxConfigIsEmpty=oV;function iV(e,r,t){if(r===void 0&&(r=function(){}),e){var n=(0,Ea.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw r(n.message),t.onError(n),n}}We.assertDatabaseIsEmpty=iV;function aV(e,r,t){if(r===void 0&&(r=function(){}),e){var n=(0,Ea.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+"Trying to impersonate ".concat(e,"."));throw r(n.message),t.onError(n),n}}We.assertImpersonatedUserIsEmpty=aV;function uV(e,r,t){if(r===void 0&&(r=function(){}),e!==void 0){var n=(0,Ea.newError)("Driver is connected to a database that does not support user notification filters. Please upgrade to Neo4j 5.7.0 or later in order to use this functionality. "+"Trying to set notifications to ".concat(Ea.json.stringify(e),"."));throw r(n.message),t.onError(n),n}}We.assertNotificationFilterIsEmpty=uV;var rt={},Vn={},zr={};Object.defineProperty(zr,"__esModule",{value:!0});zr.verifyStructSize=zr.Structure=void 0;var w1=q,sV=w1.error.PROTOCOL_ERROR,O1=function(){function e(r,t){this.signature=r,this.fields=t}return Object.defineProperty(e.prototype,"size",{get:function(){return this.fields.length},enumerable:!1,configurable:!0}),e.prototype.toString=function(){for(var r="",t=0;t<this.fields.length;t++)t>0&&(r+=", "),r+=this.fields[t];return"Structure("+this.signature+", ["+r+"])"},e}();zr.Structure=O1;function cV(e,r,t){if(r!==t)throw(0,w1.newError)("Wrong struct size for ".concat(e,", expected ").concat(r," but was ").concat(t),sV)}zr.verifyStructSize=cV;zr.default=O1;Object.defineProperty(Vn,"__esModule",{value:!0});Vn.Unpacker=Vn.Packer=void 0;var ra=ro,E1=Jt,S1=zr,Ie=q,lV=Ie.error.PROTOCOL_ERROR,T1=128,P1=144,C1=160,A1=176,I1=192,R1=193,j1=194,$1=195,N1=200,k1=201,M1=202,D1=203,L1=208,U1=209,F1=210,B1=212,x1=213,V1=214,W1=204,z1=205,q1=206,H1=216,G1=217,K1=218,Y1=220,Z1=221,fV=function(){function e(r){this._ch=r,this._byteArraysSupported=!0}return e.prototype.packable=function(r,t){var n=this;t===void 0&&(t=E1.functional.identity);try{r=t(r)}catch(a){return function(){throw a}}if(r===null)return function(){return n._ch.writeUInt8(I1)};if(r===!0)return function(){return n._ch.writeUInt8($1)};if(r===!1)return function(){return n._ch.writeUInt8(j1)};if(typeof r=="number")return function(){return n.packFloat(r)};if(typeof r=="string")return function(){return n.packString(r)};if(typeof r=="bigint")return function(){return n.packInteger((0,Ie.int)(r))};if((0,Ie.isInt)(r))return function(){return n.packInteger(r)};if(r instanceof Int8Array)return function(){return n.packBytes(r)};if(r instanceof Array)return function(){n.packListHeader(r.length);for(var a=0;a<r.length;a++)n.packable(r[a]===void 0?null:r[a],t)()};if(hV(r))return this.packableIterable(r,t);if(r instanceof S1.Structure){for(var o=[],i=0;i<r.fields.length;i++)o[i]=this.packable(r.fields[i],t);return function(){return n.packStruct(r.signature,o)}}else return typeof r=="object"?function(){for(var a=Object.keys(r),s=0,c=0;c<a.length;c++)r[a[c]]!==void 0&&s++;n.packMapHeader(s);for(var c=0;c<a.length;c++){var u=a[c];r[u]!==void 0&&(n.packString(u),n.packable(r[u],t)())}}:this._nonPackableValue("Unable to pack the given value: ".concat(r))},e.prototype.packableIterable=function(r,t){try{var n=Array.from(r);return this.packable(n,t)}catch(o){throw(0,Ie.newError)("Cannot pack given iterable, ".concat(o.message,": ").concat(r))}},e.prototype.packStruct=function(r,t){t=t||[],this.packStructHeader(t.length,r);for(var n=0;n<t.length;n++)t[n]()},e.prototype.packInteger=function(r){var t=r.high,n=r.low;r.greaterThanOrEqual(-16)&&r.lessThan(128)?this._ch.writeInt8(n):r.greaterThanOrEqual(-128)&&r.lessThan(-16)?(this._ch.writeUInt8(N1),this._ch.writeInt8(n)):r.greaterThanOrEqual(-32768)&&r.lessThan(32768)?(this._ch.writeUInt8(k1),this._ch.writeInt16(n)):r.greaterThanOrEqual(-2147483648)&&r.lessThan(2147483648)?(this._ch.writeUInt8(M1),this._ch.writeInt32(n)):(this._ch.writeUInt8(D1),this._ch.writeInt32(t),this._ch.writeInt32(n))},e.prototype.packFloat=function(r){this._ch.writeUInt8(R1),this._ch.writeFloat64(r)},e.prototype.packString=function(r){var t=ra.utf8.encode(r),n=t.length;if(n<16)this._ch.writeUInt8(T1|n),this._ch.writeBytes(t);else if(n<256)this._ch.writeUInt8(L1),this._ch.writeUInt8(n),this._ch.writeBytes(t);else if(n<65536)this._ch.writeUInt8(U1),this._ch.writeUInt8(n/256>>0),this._ch.writeUInt8(n%256),this._ch.writeBytes(t);else if(n<4294967296)this._ch.writeUInt8(F1),this._ch.writeUInt8((n/16777216>>0)%256),this._ch.writeUInt8((n/65536>>0)%256),this._ch.writeUInt8((n/256>>0)%256),this._ch.writeUInt8(n%256),this._ch.writeBytes(t);else throw(0,Ie.newError)("UTF-8 strings of size "+n+" are not supported")},e.prototype.packListHeader=function(r){if(r<16)this._ch.writeUInt8(P1|r);else if(r<256)this._ch.writeUInt8(B1),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(x1),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(V1),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Ie.newError)("Lists of size "+r+" are not supported")},e.prototype.packBytes=function(r){if(this._byteArraysSupported){this.packBytesHeader(r.length);for(var t=0;t<r.length;t++)this._ch.writeInt8(r[t])}else throw(0,Ie.newError)("Byte arrays are not supported by the database this driver is connected to")},e.prototype.packBytesHeader=function(r){if(r<256)this._ch.writeUInt8(W1),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(z1),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(q1),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Ie.newError)("Byte arrays of size "+r+" are not supported")},e.prototype.packMapHeader=function(r){if(r<16)this._ch.writeUInt8(C1|r);else if(r<256)this._ch.writeUInt8(H1),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(G1),this._ch.writeUInt8(r/256>>0),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(K1),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Ie.newError)("Maps of size "+r+" are not supported")},e.prototype.packStructHeader=function(r,t){if(r<16)this._ch.writeUInt8(A1|r),this._ch.writeUInt8(t);else if(r<256)this._ch.writeUInt8(Y1),this._ch.writeUInt8(r),this._ch.writeUInt8(t);else if(r<65536)this._ch.writeUInt8(Z1),this._ch.writeUInt8(r/256>>0),this._ch.writeUInt8(r%256);else throw(0,Ie.newError)("Structures of size "+r+" are not supported")},e.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},e.prototype._nonPackableValue=function(r){return function(){throw(0,Ie.newError)(r,lV)}},e}();Vn.Packer=fV;var dV=function(){function e(r,t){r===void 0&&(r=!1),t===void 0&&(t=!1),this._disableLosslessIntegers=r,this._useBigInt=t}return e.prototype.unpack=function(r,t){t===void 0&&(t=E1.functional.identity);var n=r.readUInt8(),o=n&240,i=n&15;if(n===I1)return null;var a=this._unpackBoolean(n);if(a!==null)return a;var s=this._unpackNumberOrInteger(n,r);if(s!==null){if((0,Ie.isInt)(s)){if(this._useBigInt)return s.toBigInt();if(this._disableLosslessIntegers)return s.toNumberOrInfinity()}return s}var c=this._unpackString(n,o,i,r);if(c!==null)return c;var u=this._unpackList(n,o,i,r,t);if(u!==null)return u;var l=this._unpackByteArray(n,r);if(l!==null)return l;var d=this._unpackMap(n,o,i,r,t);if(d!==null)return d;var h=this._unpackStruct(n,o,i,r,t);if(h!==null)return h;throw(0,Ie.newError)("Unknown packed value with marker "+n.toString(16))},e.prototype.unpackInteger=function(r){var t=r.readUInt8(),n=this._unpackInteger(t,r);if(n==null)throw(0,Ie.newError)("Unable to unpack integer value with marker "+t.toString(16));return n},e.prototype._unpackBoolean=function(r){return r===$1?!0:r===j1?!1:null},e.prototype._unpackNumberOrInteger=function(r,t){return r===R1?t.readFloat64():this._unpackInteger(r,t)},e.prototype._unpackInteger=function(r,t){if(r>=0&&r<128)return(0,Ie.int)(r);if(r>=240&&r<256)return(0,Ie.int)(r-256);if(r===N1)return(0,Ie.int)(t.readInt8());if(r===k1)return(0,Ie.int)(t.readInt16());if(r===M1){var n=t.readInt32();return(0,Ie.int)(n)}else if(r===D1){var o=t.readInt32(),i=t.readInt32();return new Ie.Integer(i,o)}else return null},e.prototype._unpackString=function(r,t,n,o){return t===T1?ra.utf8.decode(o,n):r===L1?ra.utf8.decode(o,o.readUInt8()):r===U1?ra.utf8.decode(o,o.readUInt16()):r===F1?ra.utf8.decode(o,o.readUInt32()):null},e.prototype._unpackList=function(r,t,n,o,i){return t===P1?this._unpackListWithSize(n,o,i):r===B1?this._unpackListWithSize(o.readUInt8(),o,i):r===x1?this._unpackListWithSize(o.readUInt16(),o,i):r===V1?this._unpackListWithSize(o.readUInt32(),o,i):null},e.prototype._unpackListWithSize=function(r,t,n){for(var o=[],i=0;i<r;i++)o.push(this.unpack(t,n));return o},e.prototype._unpackByteArray=function(r,t){return r===W1?this._unpackByteArrayWithSize(t.readUInt8(),t):r===z1?this._unpackByteArrayWithSize(t.readUInt16(),t):r===q1?this._unpackByteArrayWithSize(t.readUInt32(),t):null},e.prototype._unpackByteArrayWithSize=function(r,t){for(var n=new Int8Array(r),o=0;o<r;o++)n[o]=t.readInt8();return n},e.prototype._unpackMap=function(r,t,n,o,i){return t===C1?this._unpackMapWithSize(n,o,i):r===H1?this._unpackMapWithSize(o.readUInt8(),o,i):r===G1?this._unpackMapWithSize(o.readUInt16(),o,i):r===K1?this._unpackMapWithSize(o.readUInt32(),o,i):null},e.prototype._unpackMapWithSize=function(r,t,n){for(var o={},i=0;i<r;i++){var a=this.unpack(t,n);o[a]=this.unpack(t,n)}return o},e.prototype._unpackStruct=function(r,t,n,o,i){return t===A1?this._unpackStructWithSize(n,o,i):r===Y1?this._unpackStructWithSize(o.readUInt8(),o,i):r===Z1?this._unpackStructWithSize(o.readUInt16(),o,i):null},e.prototype._unpackStructWithSize=function(r,t,n){for(var o=t.readUInt8(),i=new S1.Structure(o,[]),a=0;a<r;a++)i.fields.push(this.unpack(t,n));return n(i)},e}();Vn.Unpacker=dV;function hV(e){return e==null?!1:typeof e[Symbol.iterator]=="function"}var Fo={},Q1=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),pV=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),vV=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),_V=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&pV(r,e,t);return vV(r,e),r};Object.defineProperty(Fo,"__esModule",{value:!0});Fo.Unpacker=Fo.Packer=void 0;var X1=_V(Vn),yV=function(e){Q1(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},r}(X1.Packer);Fo.Packer=yV;var bV=function(e){Q1(r,e);function r(t,n){return t===void 0&&(t=!1),n===void 0&&(n=!1),e.call(this,t,n)||this}return r}(X1.Unpacker);Fo.Unpacker=bV;var mV=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),gV=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),q_=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&mV(r,e,t);return gV(r,e),r};Object.defineProperty(rt,"__esModule",{value:!0});rt.structure=rt.v2=rt.v1=void 0;var wV=q_(Vn);rt.v1=wV;var J1=q_(Fo);rt.v2=J1;var OV=q_(zr);rt.structure=OV;rt.default=J1;var qe={};Object.defineProperty(qe,"__esModule",{value:!0});qe.SIGNATURES=void 0;var ge=q,eE=ge.internal.constants,EV=eE.ACCESS_MODE_READ,uc=eE.FETCH_ALL,ug=ge.internal.util.assertString,tE=1,rE=15,Rc=16,nE=63,yo=1,oE=2,vv=17,iE=18,aE=19,uE=84,_v=102,sE=106,cE=107,lE=47,fE=63,SV="r",na=-1,TV=Object.freeze({INIT:tE,RESET:rE,RUN:Rc,PULL_ALL:nE,HELLO:yo,GOODBYE:oE,BEGIN:vv,COMMIT:iE,ROLLBACK:aE,TELEMETRY:uE,ROUTE:_v,LOGON:sE,LOGOFF:cE,DISCARD:lE,PULL:fE});qe.SIGNATURES=TV;var Si=function(){function e(r,t,n){this.signature=r,this.fields=t,this.toString=n}return e.init=function(r,t){return new e(tE,[r,t],function(){return"INIT ".concat(r," {...}")})},e.run=function(r,t){return new e(Rc,[r,t],function(){return"RUN ".concat(r," ").concat(ge.json.stringify(t))})},e.pullAll=function(){return PV},e.reset=function(){return CV},e.hello=function(r,t,n,o){n===void 0&&(n=null),o===void 0&&(o=null);var i=Object.assign({user_agent:r},t);return n&&(i.routing=n),o&&(i.patch_bolt=o),new e(yo,[i],function(){return"HELLO {user_agent: '".concat(r,"', ...}")})},e.hello5x1=function(r,t){t===void 0&&(t=null);var n={user_agent:r};return t&&(n.routing=t),new e(yo,[n],function(){return"HELLO {user_agent: '".concat(r,"', ...}")})},e.hello5x2=function(r,t,n){t===void 0&&(t=null),n===void 0&&(n=null);var o={user_agent:r};return yv(o,t),n&&(o.routing=n),new e(yo,[o],function(){return"HELLO ".concat(ge.json.stringify(o))})},e.hello5x3=function(r,t,n,o){n===void 0&&(n=null),o===void 0&&(o=null);var i={};return r&&(i.user_agent=r),t&&(i.bolt_agent={product:t.product,platform:t.platform,language:t.language,language_details:t.languageDetails}),yv(i,n),o&&(i.routing=o),new e(yo,[i],function(){return"HELLO ".concat(ge.json.stringify(i))})},e.hello5x5=function(r,t,n,o){n===void 0&&(n=null),o===void 0&&(o=null);var i={};return r&&(i.user_agent=r),t&&(i.bolt_agent={product:t.product,platform:t.platform,language:t.language,language_details:t.languageDetails}),pp(i,n),o&&(i.routing=o),new e(yo,[i],function(){return"HELLO ".concat(ge.json.stringify(i))})},e.logon=function(r){return new e(sE,[r],function(){return"LOGON { ... }"})},e.logoff=function(){return new e(cE,[],function(){return"LOGOFF"})},e.begin=function(r){var t=r===void 0?{}:r,n=t.bookmarks,o=t.txConfig,i=t.database,a=t.mode,s=t.impersonatedUser,c=t.notificationFilter,u=sc(n,o,i,a,s,c);return new e(vv,[u],function(){return"BEGIN ".concat(ge.json.stringify(u))})},e.begin5x5=function(r){var t=r===void 0?{}:r,n=t.bookmarks,o=t.txConfig,i=t.database,a=t.mode,s=t.impersonatedUser,c=t.notificationFilter,u=sc(n,o,i,a,s,c,{appendNotificationFilter:pp});return new e(vv,[u],function(){return"BEGIN ".concat(ge.json.stringify(u))})},e.commit=function(){return AV},e.rollback=function(){return IV},e.runWithMetadata=function(r,t,n){var o=n===void 0?{}:n,i=o.bookmarks,a=o.txConfig,s=o.database,c=o.mode,u=o.impersonatedUser,l=o.notificationFilter,d=sc(i,a,s,c,u,l);return new e(Rc,[r,t,d],function(){return"RUN ".concat(r," ").concat(ge.json.stringify(t)," ").concat(ge.json.stringify(d))})},e.runWithMetadata5x5=function(r,t,n){var o=n===void 0?{}:n,i=o.bookmarks,a=o.txConfig,s=o.database,c=o.mode,u=o.impersonatedUser,l=o.notificationFilter,d=sc(i,a,s,c,u,l,{appendNotificationFilter:pp});return new e(Rc,[r,t,d],function(){return"RUN ".concat(r," ").concat(ge.json.stringify(t)," ").concat(ge.json.stringify(d))})},e.goodbye=function(){return RV},e.pull=function(r){var t=r===void 0?{}:r,n=t.stmtId,o=n===void 0?na:n,i=t.n,a=i===void 0?uc:i,s=sg(o??na,a||uc);return new e(fE,[s],function(){return"PULL ".concat(ge.json.stringify(s))})},e.discard=function(r){var t=r===void 0?{}:r,n=t.stmtId,o=n===void 0?na:n,i=t.n,a=i===void 0?uc:i,s=sg(o??na,a||uc);return new e(lE,[s],function(){return"DISCARD ".concat(ge.json.stringify(s))})},e.telemetry=function(r){var t=r.api,n=(0,ge.int)(t);return new e(uE,[n],function(){return"TELEMETRY ".concat(n.toString())})},e.route=function(r,t,n){return r===void 0&&(r={}),t===void 0&&(t=[]),n===void 0&&(n=null),new e(_v,[r,t,n],function(){return"ROUTE ".concat(ge.json.stringify(r)," ").concat(ge.json.stringify(t)," ").concat(n)})},e.routeV4x4=function(r,t,n){r===void 0&&(r={}),t===void 0&&(t=[]),n===void 0&&(n={});var o={};return n.databaseName&&(o.db=n.databaseName),n.impersonatedUser&&(o.imp_user=n.impersonatedUser),new e(_v,[r,t,o],function(){return"ROUTE ".concat(ge.json.stringify(r)," ").concat(ge.json.stringify(t)," ").concat(ge.json.stringify(o))})},e}();qe.default=Si;function sc(e,r,t,n,o,i,a){var s;a===void 0&&(a={});var c={};e.isEmpty()||(c.bookmarks=e.values()),r.timeout!==null&&(c.tx_timeout=r.timeout),r.metadata&&(c.tx_metadata=r.metadata),t&&(c.db=ug(t,"database")),o&&(c.imp_user=ug(o,"impersonatedUser")),n===EV&&(c.mode=SV);var u=(s=a.appendNotificationFilter)!==null&&s!==void 0?s:yv;return u(c,i),c}function sg(e,r){var t={n:(0,ge.int)(r)};return e!==na&&(t.qid=(0,ge.int)(e)),t}function yv(e,r){r&&(r.minimumSeverityLevel&&(e.notifications_minimum_severity=r.minimumSeverityLevel),r.disabledCategories&&(e.notifications_disabled_categories=r.disabledCategories),r.disabledClassifications&&(e.notifications_disabled_categories=r.disabledClassifications))}function pp(e,r){r&&(r.minimumSeverityLevel&&(e.notifications_minimum_severity=r.minimumSeverityLevel),r.disabledCategories&&(e.notifications_disabled_classifications=r.disabledCategories),r.disabledClassifications&&(e.notifications_disabled_classifications=r.disabledClassifications))}var PV=new Si(nE,[],function(){return"PULL_ALL"}),CV=new Si(rE,[],function(){return"RESET"}),AV=new Si(iE,[],function(){return"COMMIT"}),IV=new Si(aE,[],function(){return"ROLLBACK"}),RV=new Si(oE,[],function(){return"GOODBYE"}),Af={},me={};Object.defineProperty(me,"__esModule",{value:!0});me.TypeTransformer=void 0;var jV=rt,$V=q,NV=$V.internal.objectUtil,kV=function(){function e(r){this._transformers=r,this._transformersPerSignature=new Map(r.map(function(t){return[t.signature,t]})),this.fromStructure=this.fromStructure.bind(this),this.toStructure=this.toStructure.bind(this),Object.freeze(this)}return e.prototype.fromStructure=function(r){try{if(r instanceof jV.structure.Structure&&this._transformersPerSignature.has(r.signature)){var t=this._transformersPerSignature.get(r.signature).fromStructure;return t(r)}return r}catch(n){return NV.createBrokenObject(n)}},e.prototype.toStructure=function(r){var t=this._transformers.find(function(n){var o=n.isTypeInstance;return o(r)});return t!==void 0?t.toStructure(r):r},e}();me.default=kV;var MV=function(){function e(r){var t=r.signature,n=r.fromStructure,o=r.toStructure,i=r.isTypeInstance;this.signature=t,this.isTypeInstance=i,this.fromStructure=n,this.toStructure=o,Object.freeze(this)}return e.prototype.extendsWith=function(r){var t=r.signature,n=r.fromStructure,o=r.toStructure,i=r.isTypeInstance;return new e({signature:t||this.signature,fromStructure:n||this.fromStructure,toStructure:o||this.toStructure,isTypeInstance:i||this.isTypeInstance})},e}();me.TypeTransformer=MV;var If=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(Af,"__esModule",{value:!0});var Fe=q,Rf=rt,jf=me,$f=Fe.error.PROTOCOL_ERROR,DV=78,LV=3,UV=82,FV=5,BV=114,xV=3,VV=80,WV=3;function zV(){return new jf.TypeTransformer({signature:DV,isTypeInstance:function(e){return e instanceof Fe.Node},toStructure:function(e){throw(0,Fe.newError)("It is not allowed to pass nodes in query parameters, given: ".concat(e),$f)},fromStructure:function(e){Rf.structure.verifyStructSize("Node",LV,e.size);var r=If(e.fields,3),t=r[0],n=r[1],o=r[2];return new Fe.Node(t,n,o)}})}function qV(){return new jf.TypeTransformer({signature:UV,isTypeInstance:function(e){return e instanceof Fe.Relationship},toStructure:function(e){throw(0,Fe.newError)("It is not allowed to pass relationships in query parameters, given: ".concat(e),$f)},fromStructure:function(e){Rf.structure.verifyStructSize("Relationship",FV,e.size);var r=If(e.fields,5),t=r[0],n=r[1],o=r[2],i=r[3],a=r[4];return new Fe.Relationship(t,n,o,i,a)}})}function HV(){return new jf.TypeTransformer({signature:BV,isTypeInstance:function(e){return e instanceof Fe.UnboundRelationship},toStructure:function(e){throw(0,Fe.newError)("It is not allowed to pass unbound relationships in query parameters, given: ".concat(e),$f)},fromStructure:function(e){Rf.structure.verifyStructSize("UnboundRelationship",xV,e.size);var r=If(e.fields,3),t=r[0],n=r[1],o=r[2];return new Fe.UnboundRelationship(t,n,o)}})}function GV(){return new jf.TypeTransformer({signature:VV,isTypeInstance:function(e){return e instanceof Fe.Path},toStructure:function(e){throw(0,Fe.newError)("It is not allowed to pass paths in query parameters, given: ".concat(e),$f)},fromStructure:function(e){Rf.structure.verifyStructSize("Path",WV,e.size);for(var r=If(e.fields,3),t=r[0],n=r[1],o=r[2],i=[],a=t[0],s=0;s<o.length;s+=2){var c=t[o[s+1]],u=(0,Fe.toNumber)(o[s]),l=void 0;u>0?(l=n[u-1],l instanceof Fe.UnboundRelationship&&(n[u-1]=l=l.bindTo(a,c))):(l=n[-u-1],l instanceof Fe.UnboundRelationship&&(n[-u-1]=l=l.bindTo(c,a))),i.push(new Fe.PathSegment(a,l,c)),a=c}return new Fe.Path(t[0],t[t.length-1],i)}})}Af.default={createNodeTransformer:zV,createRelationshipTransformer:qV,createUnboundRelationshipTransformer:HV,createPathTransformer:GV};var mo=f&&f.__assign||function(){return mo=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},mo.apply(this,arguments)},KV=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),YV=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),ZV=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&KV(r,e,t);return YV(r,e),r},dE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ef,"__esModule",{value:!0});var qi=We,vp=rt,yn=ZV(qe),_o=oe,Bo=q,QV=dE(Af),XV=dE(me),cg=Bo.internal.bookmarks.Bookmarks,hE=Bo.internal.constants,lg=hE.ACCESS_MODE_WRITE,JV=hE.BOLT_PROTOCOL_V1;Bo.internal.logger.Logger;var fg=Bo.internal.txConfig.TxConfig,eW=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),tW=function(){function e(r,t,n,o,i,a){var s=n===void 0?{}:n,c=s.disableLosslessIntegers,u=s.useBigInt;o===void 0&&(o=function(){return null}),this._server=r||{},this._chunker=t,this._packer=this._createPacker(t),this._unpacker=this._createUnpacker(c,u),this._responseHandler=o(this),this._log=i,this._onProtocolError=a,this._fatalError=null,this._lastMessageSignature=null,this._config={disableLosslessIntegers:c,useBigInt:u}}return Object.defineProperty(e.prototype,"transformer",{get:function(){var r=this;return this._transformer===void 0&&(this._transformer=new XV.default(Object.values(QV.default).map(function(t){return t(r._config,r._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return JV},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportsReAuth",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initialized",{get:function(){return!!this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authToken",{get:function(){return this._authToken},enumerable:!1,configurable:!0}),e.prototype.packer=function(){return this._packer},e.prototype.packable=function(r){return this._packer.packable(r,this.transformer.toStructure)},e.prototype.unpacker=function(){return this._unpacker},e.prototype.unpack=function(r){return this._unpacker.unpack(r,this.transformer.fromStructure)},e.prototype.transformMetadata=function(r){return r},e.prototype.enrichErrorMetadata=function(r){return mo(mo({},r),{diagnostic_record:r.diagnostic_record!==null?mo(mo({},eW),r.diagnostic_record):null})},e.prototype.initialize=function(r){var t=this,n=r===void 0?{}:r,o=n.userAgent;n.boltAgent;var i=n.authToken,a=n.notificationFilter,s=n.onError,c=n.onComplete,u=new _o.LoginObserver({onError:function(l){return t._onLoginError(l,s)},onCompleted:function(l){return t._onLoginCompleted(l,c)}});return(0,qi.assertNotificationFilterIsEmpty)(a,this._onProtocolError,u),this.write(yn.default.init(o,i),u,!0),u},e.prototype.logoff=function(r){var t=r===void 0?{}:r,n=t.onComplete,o=t.onError;t.flush;var i=new _o.LogoffObserver({onCompleted:n,onError:o}),a=(0,Bo.newError)("Driver is connected to a database that does not support logoff. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(a.message),i.onError(a),a},e.prototype.logon=function(r){var t=this,n=r===void 0?{}:r,o=n.authToken,i=n.onComplete,a=n.onError;n.flush;var s=new _o.LoginObserver({onCompleted:function(){return t._onLoginCompleted({},o,i)},onError:function(u){return t._onLoginError(u,a)}}),c=(0,Bo.newError)("Driver is connected to a database that does not support logon. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(c.message),s.onError(c),c},e.prototype.prepareToClose=function(){},e.prototype.beginTransaction=function(r){var t=r===void 0?{}:r,n=t.bookmarks,o=t.txConfig,i=t.database,a=t.mode,s=t.impersonatedUser,c=t.notificationFilter,u=t.beforeError,l=t.afterError,d=t.beforeComplete,h=t.afterComplete;return this.run("BEGIN",n?n.asBeginTransactionParameters():{},{bookmarks:n,txConfig:o,database:i,mode:a,impersonatedUser:s,notificationFilter:c,beforeError:u,afterError:l,beforeComplete:d,afterComplete:h,flush:!1})},e.prototype.commitTransaction=function(r){var t=r===void 0?{}:r,n=t.beforeError,o=t.afterError,i=t.beforeComplete,a=t.afterComplete;return this.run("COMMIT",{},{bookmarks:cg.empty(),txConfig:fg.empty(),mode:lg,beforeError:n,afterError:o,beforeComplete:i,afterComplete:a})},e.prototype.rollbackTransaction=function(r){var t=r===void 0?{}:r,n=t.beforeError,o=t.afterError,i=t.beforeComplete,a=t.afterComplete;return this.run("ROLLBACK",{},{bookmarks:cg.empty(),txConfig:fg.empty(),mode:lg,beforeError:n,afterError:o,beforeComplete:i,afterComplete:a})},e.prototype.run=function(r,t,n){var o=n===void 0?{}:n;o.bookmarks;var i=o.txConfig,a=o.database;o.mode;var s=o.impersonatedUser,c=o.notificationFilter,u=o.beforeKeys,l=o.afterKeys,d=o.beforeError,h=o.afterError,p=o.beforeComplete,v=o.afterComplete,y=o.flush,_=y===void 0?!0:y,b=o.highRecordWatermark,w=b===void 0?Number.MAX_VALUE:b,S=o.lowRecordWatermark,E=S===void 0?Number.MAX_VALUE:S,T=new _o.ResultStreamObserver({server:this._server,beforeKeys:u,afterKeys:l,beforeError:d,afterError:h,beforeComplete:p,afterComplete:v,highRecordWatermark:w,lowRecordWatermark:E});return(0,qi.assertTxConfigIsEmpty)(i,this._onProtocolError,T),(0,qi.assertDatabaseIsEmpty)(a,this._onProtocolError,T),(0,qi.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,T),(0,qi.assertNotificationFilterIsEmpty)(c,this._onProtocolError,T),this.write(yn.default.run(r,t),T,!1),this.write(yn.default.pullAll(),T,_),T},Object.defineProperty(e.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),e.prototype.reset=function(r){var t=r===void 0?{}:r,n=t.onError,o=t.onComplete,i=new _o.ResetObserver({onProtocolError:this._onProtocolError,onError:n,onComplete:o});return this.write(yn.default.reset(),i,!0),i},e.prototype.telemetry=function(r,t){r.api;var n=t===void 0?{}:t;n.onError;var o=n.onCompleted,i=new _o.CompletedObserver;return o&&o(),i},e.prototype._createPacker=function(r){return new vp.v1.Packer(r)},e.prototype._createUnpacker=function(r,t){return new vp.v1.Unpacker(r,t)},e.prototype.write=function(r,t,n){var o=this.queueObserverIfProtocolIsNotBroken(t);if(o){this._log.isDebugEnabled()&&this._log.debug("C: ".concat(r)),this._lastMessageSignature=r.signature;var i=new vp.structure.Structure(r.signature,r.fields);this.packable(i)(),this._chunker.messageBoundary(),n&&this._chunker.flush()}},e.prototype.isLastMessageLogon=function(){return this._lastMessageSignature===yn.SIGNATURES.HELLO||this._lastMessageSignature===yn.SIGNATURES.LOGON},e.prototype.isLastMessageReset=function(){return this._lastMessageSignature===yn.SIGNATURES.RESET},e.prototype.notifyFatalError=function(r){return this._fatalError=r,this._responseHandler._notifyErrorToObservers(r)},e.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},e.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},e.prototype.queueObserverIfProtocolIsNotBroken=function(r){return this.isBroken()?(this.notifyFatalErrorToObserver(r),!1):this._responseHandler._queueObserver(r)},e.prototype.isBroken=function(){return!!this._fatalError},e.prototype.notifyFatalErrorToObserver=function(r){r&&r.onError&&r.onError(this._fatalError)},e.prototype.resetFailure=function(){this._responseHandler._resetFailure()},e.prototype._onLoginCompleted=function(r,t,n){if(this._initialized=!0,this._authToken=t,r){var o=r.server;this._server.version||(this._server.version=o)}n&&n(r)},e.prototype._onLoginError=function(r,t){this._onProtocolError(r.message),t&&t(r)},e}();Ef.default=tW;var Nf={},kf={},_r={};Object.defineProperty(_r,"__esModule",{value:!0});_r.epochSecondAndNanoToLocalDateTime=_r.nanoOfDayToLocalTime=_r.epochDayToDate=void 0;var Rn=q,un=Rn.internal.temporalUtil,rW=un.DAYS_0000_TO_1970,_p=un.DAYS_PER_400_YEAR_CYCLE,dg=un.NANOS_PER_HOUR,hg=un.NANOS_PER_MINUTE,bv=un.NANOS_PER_SECOND,pg=un.SECONDS_PER_DAY,nW=un.floorDiv,oW=un.floorMod;function pE(e){e=(0,Rn.int)(e);var r=e.add(rW).subtract(60),t=(0,Rn.int)(0);if(r.lessThan(0)){var n=r.add(1).div(_p).subtract(1);t=n.multiply(400),r=r.add(n.multiply(-_p))}var o=r.multiply(400).add(591).div(_p),i=r.subtract(o.multiply(365).add(o.div(4)).subtract(o.div(100)).add(o.div(400)));i.lessThan(0)&&(o=o.subtract(1),i=r.subtract(o.multiply(365).add(o.div(4)).subtract(o.div(100)).add(o.div(400)))),o=o.add(t);var a=i,s=a.multiply(5).add(2).div(153),c=s.add(2).modulo(12).add(1),u=a.subtract(s.multiply(306).add(5).div(10)).add(1);return o=o.add(s.div(10)),new Rn.Date(o,c,u)}_r.epochDayToDate=pE;function vE(e){e=(0,Rn.int)(e);var r=e.div(dg);e=e.subtract(r.multiply(dg));var t=e.div(hg);e=e.subtract(t.multiply(hg));var n=e.div(bv),o=e.subtract(n.multiply(bv));return new Rn.LocalTime(r,t,n,o)}_r.nanoOfDayToLocalTime=vE;function iW(e,r){var t=nW(e,pg),n=oW(e,pg),o=n.multiply(bv).add(r),i=pE(t),a=vE(o);return new Rn.LocalDateTime(i.year,i.month,i.day,a.hour,a.minute,a.second,a.nanosecond)}_r.epochSecondAndNanoToLocalDateTime=iW;var Vc=f&&f.__assign||function(){return Vc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Vc.apply(this,arguments)},Er=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},aW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(kf,"__esModule",{value:!0});var de=q,De=rt,Sr=me,Ti=_r,uW=aW(Af),H_=de.internal.temporalUtil,sW=H_.dateToEpochDay,G_=H_.localDateTimeToEpochSecond,_E=H_.localTimeToNanoOfDay,vg=88,cW=3,_g=89,lW=4,yg=69,fW=4,bg=116,dW=1,mg=84,hW=2,gg=68,pW=1,wg=100,vW=2,Og=70,_W=3,Eg=102,yW=3;function bW(){return new Sr.TypeTransformer({signature:vg,isTypeInstance:function(e){return(0,de.isPoint)(e)&&(e.z===null||e.z===void 0)},toStructure:function(e){return new De.structure.Structure(vg,[(0,de.int)(e.srid),e.x,e.y])},fromStructure:function(e){De.structure.verifyStructSize("Point2D",cW,e.size);var r=Er(e.fields,3),t=r[0],n=r[1],o=r[2];return new de.Point(t,n,o,void 0)}})}function mW(){return new Sr.TypeTransformer({signature:_g,isTypeInstance:function(e){return(0,de.isPoint)(e)&&e.z!==null&&e.z!==void 0},toStructure:function(e){return new De.structure.Structure(_g,[(0,de.int)(e.srid),e.x,e.y,e.z])},fromStructure:function(e){De.structure.verifyStructSize("Point3D",lW,e.size);var r=Er(e.fields,4),t=r[0],n=r[1],o=r[2],i=r[3];return new de.Point(t,n,o,i)}})}function gW(){return new Sr.TypeTransformer({signature:yg,isTypeInstance:de.isDuration,toStructure:function(e){var r=(0,de.int)(e.months),t=(0,de.int)(e.days),n=(0,de.int)(e.seconds),o=(0,de.int)(e.nanoseconds);return new De.structure.Structure(yg,[r,t,n,o])},fromStructure:function(e){De.structure.verifyStructSize("Duration",fW,e.size);var r=Er(e.fields,4),t=r[0],n=r[1],o=r[2],i=r[3];return new de.Duration(t,n,o,i)}})}function wW(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Sr.TypeTransformer({signature:bg,isTypeInstance:de.isLocalTime,toStructure:function(n){var o=_E(n.hour,n.minute,n.second,n.nanosecond);return new De.structure.Structure(bg,[o])},fromStructure:function(n){De.structure.verifyStructSize("LocalTime",dW,n.size);var o=Er(n.fields,1),i=o[0],a=(0,Ti.nanoOfDayToLocalTime)(i);return Pi(a,r,t)}})}function OW(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Sr.TypeTransformer({signature:mg,isTypeInstance:de.isTime,toStructure:function(n){var o=_E(n.hour,n.minute,n.second,n.nanosecond),i=(0,de.int)(n.timeZoneOffsetSeconds);return new De.structure.Structure(mg,[o,i])},fromStructure:function(n){De.structure.verifyStructSize("Time",hW,n.size);var o=Er(n.fields,2),i=o[0],a=o[1],s=(0,Ti.nanoOfDayToLocalTime)(i),c=new de.Time(s.hour,s.minute,s.second,s.nanosecond,a);return Pi(c,r,t)}})}function EW(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Sr.TypeTransformer({signature:gg,isTypeInstance:de.isDate,toStructure:function(n){var o=sW(n.year,n.month,n.day);return new De.structure.Structure(gg,[o])},fromStructure:function(n){De.structure.verifyStructSize("Date",pW,n.size);var o=Er(n.fields,1),i=o[0],a=(0,Ti.epochDayToDate)(i);return Pi(a,r,t)}})}function SW(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Sr.TypeTransformer({signature:wg,isTypeInstance:de.isLocalDateTime,toStructure:function(n){var o=G_(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),i=(0,de.int)(n.nanosecond);return new De.structure.Structure(wg,[o,i])},fromStructure:function(n){De.structure.verifyStructSize("LocalDateTime",vW,n.size);var o=Er(n.fields,2),i=o[0],a=o[1],s=(0,Ti.epochSecondAndNanoToLocalDateTime)(i,a);return Pi(s,r,t)}})}function TW(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Sr.TypeTransformer({signature:Eg,isTypeInstance:function(n){return(0,de.isDateTime)(n)&&n.timeZoneId!=null},toStructure:function(n){var o=G_(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),i=(0,de.int)(n.nanosecond),a=n.timeZoneId;return new De.structure.Structure(Eg,[o,i,a])},fromStructure:function(n){De.structure.verifyStructSize("DateTimeWithZoneId",yW,n.size);var o=Er(n.fields,3),i=o[0],a=o[1],s=o[2],c=(0,Ti.epochSecondAndNanoToLocalDateTime)(i,a),u=new de.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,c.nanosecond,null,s);return Pi(u,r,t)}})}function PW(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Sr.TypeTransformer({signature:Og,isTypeInstance:function(n){return(0,de.isDateTime)(n)&&n.timeZoneId==null},toStructure:function(n){var o=G_(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),i=(0,de.int)(n.nanosecond),a=(0,de.int)(n.timeZoneOffsetSeconds);return new De.structure.Structure(Og,[o,i,a])},fromStructure:function(n){De.structure.verifyStructSize("DateTimeWithZoneOffset",_W,n.size);var o=Er(n.fields,3),i=o[0],a=o[1],s=o[2],c=(0,Ti.epochSecondAndNanoToLocalDateTime)(i,a),u=new de.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,c.nanosecond,s,null);return Pi(u,r,t)}})}function Pi(e,r,t){if(!r&&!t)return e;var n=function(s){return t?s.toBigInt():s.toNumberOrInfinity()},o=Object.create(Object.getPrototypeOf(e));for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)===!0){var a=e[i];o[i]=(0,de.isInt)(a)?n(a):a}return Object.freeze(o),o}kf.default=Vc(Vc({},uW.default),{createPoint2DTransformer:bW,createPoint3DTransformer:mW,createDurationTransformer:gW,createLocalTimeTransformer:wW,createTimeTransformer:OW,createDateTransformer:EW,createLocalDateTimeTransformer:SW,createDateTimeWithZoneIdTransformer:TW,createDateTimeWithOffsetTransformer:PW});var CW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Mf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nf,"__esModule",{value:!0});var AW=Mf(Ef),Sg=Mf(rt),IW=q,RW=Mf(kf),jW=Mf(me),$W=IW.internal.constants.BOLT_PROTOCOL_V2,NW=function(e){CW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype._createPacker=function(t){return new Sg.default.Packer(t)},r.prototype._createUnpacker=function(t,n){return new Sg.default.Unpacker(t,n)},Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new jW.default(Object.values(RW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return $W},enumerable:!1,configurable:!0}),r}(AW.default);Nf.default=NW;var Df={},Lf={},mv=f&&f.__assign||function(){return mv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},mv.apply(this,arguments)},kW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lf,"__esModule",{value:!0});var MW=kW(kf);Lf.default=mv({},MW.default);var DW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wc=f&&f.__assign||function(){return Wc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Wc.apply(this,arguments)},Uf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Df,"__esModule",{value:!0});var LW=Uf(Nf),bn=Uf(qe),mn=We,Sn=oe,UW=Uf(Lf),FW=Uf(me),K_=q;K_.internal.bookmarks.Bookmarks;var BW=K_.internal.constants.BOLT_PROTOCOL_V3,xW=K_.internal.txConfig.TxConfig,yE="context",VW="CALL dbms.cluster.routing.getRoutingTable($".concat(yE,")"),WW=new Sn.StreamObserver,zW=function(e){DW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return BW},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new FW.default(Object.values(UW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.transformMetadata=function(t){return"t_first"in t&&(t.result_available_after=t.t_first,delete t.t_first),"t_last"in t&&(t.result_consumed_after=t.t_last,delete t.t_last),t},r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new Sn.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return n._onLoginCompleted(d,a,u)}});return(0,mn.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(bn.default.hello(i,a),l,!0),l},r.prototype.prepareToClose=function(){this.write(bn.default.goodbye(),WW,!0)},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.impersonatedUser,c=n.notificationFilter,u=n.mode,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new Sn.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),(0,mn.assertDatabaseIsEmpty)(a,this._onProtocolError,v),(0,mn.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,v),(0,mn.assertNotificationFilterIsEmpty)(c,this._onProtocolError,v),this.write(bn.default.begin({bookmarks:o,txConfig:i,mode:u}),v,!0),v},r.prototype.commitTransaction=function(t){var n=t===void 0?{}:t,o=n.beforeError,i=n.afterError,a=n.beforeComplete,s=n.afterComplete,c=new Sn.ResultStreamObserver({server:this._server,beforeError:o,afterError:i,beforeComplete:a,afterComplete:s});return c.prepareToHandleSingleResponse(),this.write(bn.default.commit(),c,!0),c},r.prototype.rollbackTransaction=function(t){var n=t===void 0?{}:t,o=n.beforeError,i=n.afterError,a=n.beforeComplete,s=n.afterComplete,c=new Sn.ResultStreamObserver({server:this._server,beforeError:o,afterError:i,beforeComplete:a,afterComplete:s});return c.prepareToHandleSingleResponse(),this.write(bn.default.rollback(),c,!0),c},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.impersonatedUser,l=i.notificationFilter,d=i.mode,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,y=i.afterError,_=i.beforeComplete,b=i.afterComplete,w=i.flush,S=w===void 0?!0:w,E=i.highRecordWatermark,T=E===void 0?Number.MAX_VALUE:E,C=i.lowRecordWatermark,P=C===void 0?Number.MAX_VALUE:C,I=new Sn.ResultStreamObserver({server:this._server,beforeKeys:h,afterKeys:p,beforeError:v,afterError:y,beforeComplete:_,afterComplete:b,highRecordWatermark:T,lowRecordWatermark:P});return(0,mn.assertDatabaseIsEmpty)(c,this._onProtocolError,I),(0,mn.assertImpersonatedUserIsEmpty)(u,this._onProtocolError,I),(0,mn.assertNotificationFilterIsEmpty)(l,this._onProtocolError,I),this.write(bn.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,mode:d}),I,!1),this.write(bn.default.pullAll(),I,S),I},r.prototype.requestRoutingInformation=function(t){var n,o=t.routingContext,i=o===void 0?{}:o,a=t.sessionContext,s=a===void 0?{}:a,c=t.onError,u=t.onCompleted,l=this.run(VW,(n={},n[yE]=i,n),Wc(Wc({},s),{txConfig:xW.empty()}));return new Sn.ProcedureRouteObserver({resultObserver:l,onProtocolError:this._onProtocolError,onError:c,onCompleted:u})},r}(LW.default);Df.default=zW;var Ff={},Bf={},gv=f&&f.__assign||function(){return gv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},gv.apply(this,arguments)},qW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bf,"__esModule",{value:!0});var HW=qW(Lf);Bf.default=gv({},HW.default);var GW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zc=f&&f.__assign||function(){return zc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},zc.apply(this,arguments)},xf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ff,"__esModule",{value:!0});var KW=xf(Df),Hi=xf(qe),cc=We,yp=oe,YW=xf(Bf),ZW=xf(me),Y_=q;Y_.internal.bookmarks.Bookmarks;var bE=Y_.internal.constants,QW=bE.BOLT_PROTOCOL_V4_0,XW=bE.FETCH_ALL,JW=Y_.internal.txConfig.TxConfig,mE="context",gE="database",ez="CALL dbms.routing.getRoutingTable($".concat(mE,", $").concat(gE,")"),tz=function(e){GW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return QW},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new ZW.default(Object.values(YW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.impersonatedUser,c=n.notificationFilter,u=n.mode,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new yp.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),(0,cc.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,v),(0,cc.assertNotificationFilterIsEmpty)(c,this._onProtocolError,v),this.write(Hi.default.begin({bookmarks:o,txConfig:i,database:a,mode:u}),v,!0),v},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.impersonatedUser,l=i.notificationFilter,d=i.mode,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,y=i.afterError,_=i.beforeComplete,b=i.afterComplete,w=i.flush,S=w===void 0?!0:w,E=i.reactive,T=E===void 0?!1:E,C=i.fetchSize,P=C===void 0?XW:C,I=i.highRecordWatermark,M=I===void 0?Number.MAX_VALUE:I,F=i.lowRecordWatermark,Q=F===void 0?Number.MAX_VALUE:F,H=new yp.ResultStreamObserver({server:this._server,reactive:T,fetchSize:P,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:y,beforeComplete:_,afterComplete:b,highRecordWatermark:M,lowRecordWatermark:Q});(0,cc.assertImpersonatedUserIsEmpty)(u,this._onProtocolError,H),(0,cc.assertNotificationFilterIsEmpty)(l,this._onProtocolError,H);var Z=T;return this.write(Hi.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,database:c,mode:d}),H,Z&&S),T||this.write(Hi.default.pull({n:P}),H,S),H},r.prototype._requestMore=function(t,n,o){this.write(Hi.default.pull({stmtId:t,n}),o,!0)},r.prototype._requestDiscard=function(t,n){this.write(Hi.default.discard({stmtId:t}),n,!0)},r.prototype._noOp=function(){},r.prototype.requestRoutingInformation=function(t){var n,o=t.routingContext,i=o===void 0?{}:o,a=t.databaseName,s=a===void 0?null:a,c=t.sessionContext,u=c===void 0?{}:c,l=t.onError,d=t.onCompleted,h=this.run(ez,(n={},n[mE]=i,n[gE]=s,n),zc(zc({},u),{txConfig:JW.empty()}));return new yp.ProcedureRouteObserver({resultObserver:h,onProtocolError:this._onProtocolError,onError:l,onCompleted:d})},r}(KW.default);Ff.default=tz;var Vf={},Wf={},wv=f&&f.__assign||function(){return wv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},wv.apply(this,arguments)},rz=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wf,"__esModule",{value:!0});var nz=rz(Bf);Wf.default=wv({},nz.default);var oz=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vf,"__esModule",{value:!0});var iz=zf(Ff),az=zf(qe),uz=oe,sz=q,cz=We,lz=zf(Wf),fz=zf(me),dz=sz.internal.constants.BOLT_PROTOCOL_V4_1,hz=function(e){oz(r,e);function r(t,n,o,i,a,s,c){i===void 0&&(i=function(){return null});var u=e.call(this,t,n,o,i,a,s)||this;return u._serversideRouting=c,u}return Object.defineProperty(r.prototype,"version",{get:function(){return dz},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new fz.default(Object.values(lz.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new uz.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return n._onLoginCompleted(d,a,u)}});return(0,cz.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(az.default.hello(i,a,this._serversideRouting),l,!0),l},r}(iz.default);Vf.default=hz;var qf={},Hf={},Ov=f&&f.__assign||function(){return Ov=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ov.apply(this,arguments)},pz=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hf,"__esModule",{value:!0});var vz=pz(Wf);Hf.default=Ov({},vz.default);var _z=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Z_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qf,"__esModule",{value:!0});var yz=Z_(Vf),bz=q,mz=Z_(Hf),gz=Z_(me),wz=bz.internal.constants.BOLT_PROTOCOL_V4_2,Oz=function(e){_z(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return wz},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new gz.default(Object.values(mz.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r}(yz.default);qf.default=Oz;var Ds={},Gf={},Ev=f&&f.__assign||function(){return Ev=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ev.apply(this,arguments)},Ez=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gf,"__esModule",{value:!0});var Sz=Ez(Hf);Gf.default=Ev({},Sz.default);var Ls={},Us={},Sv=f&&f.__assign||function(){return Sv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Sv.apply(this,arguments)},Tz=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Us,"__esModule",{value:!0});var Pz=Tz(Gf);Us.default=Sv({},Pz.default);var wE=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Cz=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ls,"__esModule",{value:!0});var qc=rt,vt=q,OE=Cz(Us),Az=_r,Iz=xn,Sa=vt.internal.temporalUtil.localDateTimeToEpochSecond,Tg=73,Rz=3,Pg=105,jz=3;function $z(e,r){var t=e.disableLosslessIntegers,n=e.useBigInt,o=OE.default.createDateTimeWithZoneIdTransformer(e);return o.extendsWith({signature:Pg,fromStructure:function(i){qc.structure.verifyStructSize("DateTimeWithZoneId",jz,i.size);var a=wE(i.fields,3),s=a[0],c=a[1],u=a[2],l=Tv(u,s,c),d=new vt.DateTime(l.year,l.month,l.day,l.hour,l.minute,l.second,(0,vt.int)(c),l.timeZoneOffsetSeconds,u);return EE(d,t,n)},toStructure:function(i){var a=Sa(i.year,i.month,i.day,i.hour,i.minute,i.second,i.nanosecond),s=i.timeZoneOffsetSeconds!=null?i.timeZoneOffsetSeconds:Nz(i.timeZoneId,a,i.nanosecond);i.timeZoneOffsetSeconds==null&&r.warn('DateTime objects without "timeZoneOffsetSeconds" property are prune to bugs related to ambiguous times. For instance, 2022-10-30T2:30:00[Europe/Berlin] could be GMT+1 or GMT+2.');var c=a.subtract(s),u=(0,vt.int)(i.nanosecond),l=i.timeZoneId;return new qc.structure.Structure(Pg,[c,u,l])}})}function Nz(e,r,t){var n=Tv(e,r,t),o=Sa(n.year,n.month,n.day,n.hour,n.minute,n.second,t),i=o.subtract(r),a=r.subtract(i),s=Tv(e,a,t),c=Sa(s.year,s.month,s.day,s.hour,s.minute,s.second,t),u=c.subtract(a);return u}var bp=new Map;function kz(e){if(!bp.has(e)){var r=new Intl.DateTimeFormat("en-US",{timeZone:e,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"});bp.set(e,r)}return bp.get(e)}function Tv(e,r,t){var n=kz(e),o=(0,vt.int)(r).multiply(1e3).add((0,vt.int)(t).div(1e6)).toNumber(),i=n.formatToParts(o),a=i.reduce(function(c,u){return u.type==="era"?c.adjustEra=u.value.toUpperCase()==="B"?function(l){return l.subtract(1).negate()}:Iz.identity:u.type==="hour"?c.hour=(0,vt.int)(u.value).modulo(24):u.type!=="literal"&&(c[u.type]=(0,vt.int)(u.value)),c},{});a.year=a.adjustEra(a.year);var s=Sa(a.year,a.month,a.day,a.hour,a.minute,a.second,a.nanosecond);return a.timeZoneOffsetSeconds=s.subtract(r),a.hour=a.hour.modulo(24),a}function Mz(e){var r=e.disableLosslessIntegers,t=e.useBigInt,n=OE.default.createDateTimeWithOffsetTransformer(e);return n.extendsWith({signature:Tg,toStructure:function(o){var i=Sa(o.year,o.month,o.day,o.hour,o.minute,o.second,o.nanosecond),a=(0,vt.int)(o.nanosecond),s=(0,vt.int)(o.timeZoneOffsetSeconds),c=i.subtract(s);return new qc.structure.Structure(Tg,[c,a,s])},fromStructure:function(o){qc.structure.verifyStructSize("DateTimeWithZoneOffset",Rz,o.size);var i=wE(o.fields,3),a=i[0],s=i[1],c=i[2],u=(0,vt.int)(a).add(c),l=(0,Az.epochSecondAndNanoToLocalDateTime)(u,s),d=new vt.DateTime(l.year,l.month,l.day,l.hour,l.minute,l.second,l.nanosecond,c,null);return EE(d,r,t)}})}function EE(e,r,t){if(!r&&!t)return e;var n=function(s){return t?s.toBigInt():s.toNumberOrInfinity()},o=Object.create(Object.getPrototypeOf(e));for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)===!0){var a=e[i];o[i]=(0,vt.isInt)(a)?n(a):a}return Object.freeze(o),o}Ls.default={createDateTimeWithZoneIdTransformer:$z,createDateTimeWithOffsetTransformer:Mz};var Dz=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Hc=f&&f.__assign||function(){return Hc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Hc.apply(this,arguments)},Fs=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ds,"__esModule",{value:!0});var Lz=Fs(qf),Cg=Fs(qe),Ag=oe,Uz=We,Ig=Fs(Gf),Fz=Fs(Ls),Rg=Fs(me),SE=q,Bz=SE.internal.bookmarks.Bookmarks,xz=SE.internal.constants.BOLT_PROTOCOL_V4_3,Vz=function(e){Dz(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return xz},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Rg.default(Object.values(Ig.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.requestRoutingInformation=function(t){var n=t.routingContext,o=n===void 0?{}:n,i=t.databaseName,a=i===void 0?null:i,s=t.sessionContext,c=s===void 0?{}:s,u=t.onError,l=t.onCompleted,d=new Ag.RouteObserver({onProtocolError:this._onProtocolError,onError:u,onCompleted:l}),h=c.bookmarks||Bz.empty();return this.write(Cg.default.route(o,h.values(),a),d,!0),d},r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new Ag.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return d.patch_bolt!==void 0&&n._applyPatches(d.patch_bolt),n._onLoginCompleted(d,a,u)}});return(0,Uz.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(Cg.default.hello(i,a,this._serversideRouting,["utc"]),l,!0),l},r.prototype._applyPatches=function(t){t.includes("utc")&&this._applyUtcPatch()},r.prototype._applyUtcPatch=function(){var t=this;this._transformer=new Rg.default(Object.values(Hc(Hc({},Ig.default),Fz.default)).map(function(n){return n(t._config,t._log)}))},r}(Lz.default);Ds.default=Vz;var Kf={},Wz=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gc=f&&f.__assign||function(){return Gc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Gc.apply(this,arguments)},Bs=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kf,"__esModule",{value:!0});var zz=Bs(Ds),TE=q,lc=Bs(qe),mp=oe,jg=We,$g=Bs(Us),qz=Bs(Ls),Ng=Bs(me),PE=TE.internal.constants,Hz=PE.BOLT_PROTOCOL_V4_4,Gz=PE.FETCH_ALL,Kz=TE.internal.bookmarks.Bookmarks,Yz=function(e){Wz(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return Hz},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Ng.default(Object.values($g.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.requestRoutingInformation=function(t){var n=t.routingContext,o=n===void 0?{}:n,i=t.databaseName,a=i===void 0?null:i,s=t.impersonatedUser,c=s===void 0?null:s,u=t.sessionContext,l=u===void 0?{}:u,d=t.onError,h=t.onCompleted,p=new mp.RouteObserver({onProtocolError:this._onProtocolError,onError:d,onCompleted:h}),v=l.bookmarks||Kz.empty();return this.write(lc.default.routeV4x4(o,v.values(),{databaseName:a,impersonatedUser:c}),p,!0),p},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,y=i.afterError,_=i.beforeComplete,b=i.afterComplete,w=i.flush,S=w===void 0?!0:w,E=i.reactive,T=E===void 0?!1:E,C=i.fetchSize,P=C===void 0?Gz:C,I=i.highRecordWatermark,M=I===void 0?Number.MAX_VALUE:I,F=i.lowRecordWatermark,Q=F===void 0?Number.MAX_VALUE:F,H=new mp.ResultStreamObserver({server:this._server,reactive:T,fetchSize:P,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:y,beforeComplete:_,afterComplete:b,highRecordWatermark:M,lowRecordWatermark:Q});(0,jg.assertNotificationFilterIsEmpty)(d,this._onProtocolError,H);var Z=T;return this.write(lc.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l}),H,Z&&S),T||this.write(lc.default.pull({n:P}),H,S),H},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.mode,c=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new mp.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),(0,jg.assertNotificationFilterIsEmpty)(u,this._onProtocolError,v),this.write(lc.default.begin({bookmarks:o,txConfig:i,database:a,mode:s,impersonatedUser:c}),v,!0),v},r.prototype._applyUtcPatch=function(){var t=this;this._transformer=new Ng.default(Object.values(Gc(Gc({},$g.default),qz.default)).map(function(n){return n(t._config,t._log)}))},r}(zz.default);Kf.default=Yz;var Yf={},Zf={},ha=f&&f.__assign||function(){return ha=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ha.apply(this,arguments)},Q_=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},CE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zf,"__esModule",{value:!0});var X_=rt,J_=q,Qf=CE(Us),Zz=CE(Ls),Qz=4,Xz=8,Jz=4;function e7(e){var r=Qf.default.createNodeTransformer(e);return r.extendsWith({fromStructure:function(t){X_.structure.verifyStructSize("Node",Qz,t.size);var n=Q_(t.fields,4),o=n[0],i=n[1],a=n[2],s=n[3];return new J_.Node(o,i,a,s)}})}function t7(e){var r=Qf.default.createRelationshipTransformer(e);return r.extendsWith({fromStructure:function(t){X_.structure.verifyStructSize("Relationship",Xz,t.size);var n=Q_(t.fields,8),o=n[0],i=n[1],a=n[2],s=n[3],c=n[4],u=n[5],l=n[6],d=n[7];return new J_.Relationship(o,i,a,s,c,u,l,d)}})}function r7(e){var r=Qf.default.createUnboundRelationshipTransformer(e);return r.extendsWith({fromStructure:function(t){X_.structure.verifyStructSize("UnboundRelationship",Jz,t.size);var n=Q_(t.fields,4),o=n[0],i=n[1],a=n[2],s=n[3];return new J_.UnboundRelationship(o,i,a,s)}})}Zf.default=ha(ha(ha({},Qf.default),Zz.default),{createNodeTransformer:e7,createRelationshipTransformer:t7,createUnboundRelationshipTransformer:r7});var n7=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yf,"__esModule",{value:!0});var o7=Xf(Kf),i7=We,a7=Xf(Zf),u7=Xf(me),s7=Xf(qe),c7=oe,l7=q,f7=l7.internal.constants.BOLT_PROTOCOL_V5_0,d7=function(e){n7(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return f7},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new u7.default(Object.values(a7.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new c7.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return n._onLoginCompleted(d,a,u)}});return(0,i7.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(s7.default.hello(i,a,this._serversideRouting),l,!0),l},r}(o7.default);Yf.default=d7;var Jf={},ed={},Pv=f&&f.__assign||function(){return Pv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Pv.apply(this,arguments)},h7=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ed,"__esModule",{value:!0});var p7=h7(Zf);ed.default=Pv({},p7.default);var v7=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Kc=f&&f.__assign||function(){return Kc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Kc.apply(this,arguments)},td=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jf,"__esModule",{value:!0});var _7=td(Yf),y7=We,b7=td(ed),m7=td(me),gp=td(qe),wp=oe,g7=q,w7=g7.internal.constants.BOLT_PROTOCOL_V5_1,O7=function(e){v7(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return w7},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new m7.default(Object.values(b7.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l={},d=new wp.LoginObserver({onError:function(h){return n._onLoginError(h,c)},onCompleted:function(h){return l.metadata=h,n._onLoginCompleted(h)}});return(0,y7.assertNotificationFilterIsEmpty)(s,this._onProtocolError,d),this.write(gp.default.hello5x1(i,this._serversideRouting),d,!1),this.logon({authToken:a,onComplete:function(h){return u(Kc(Kc({},h),l.metadata))},onError:c,flush:!0})},r.prototype.logon=function(t){var n=this,o=t===void 0?{}:t,i=o.authToken,a=o.onComplete,s=o.onError,c=o.flush,u=new wp.LoginObserver({onCompleted:function(){return n._onLoginCompleted(null,i,a)},onError:function(l){return n._onLoginError(l,s)}});return this.write(gp.default.logon(i),u,c),u},r.prototype.logoff=function(t){var n=t===void 0?{}:t,o=n.onComplete,i=n.onError,a=n.flush,s=new wp.LogoffObserver({onCompleted:o,onError:i});return this.write(gp.default.logoff(),s,a),s},r}(_7.default);Jf.default=O7;var rd={},nd={},Cv=f&&f.__assign||function(){return Cv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Cv.apply(this,arguments)},E7=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nd,"__esModule",{value:!0});var S7=E7(ed);nd.default=Cv({},S7.default);var T7=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yc=f&&f.__assign||function(){return Yc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Yc.apply(this,arguments)},od=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rd,"__esModule",{value:!0});var P7=od(Jf),C7=od(nd),A7=od(me),fc=od(qe),Op=oe,I7=q,AE=I7.internal.constants,R7=AE.BOLT_PROTOCOL_V5_2,j7=AE.FETCH_ALL,$7=function(e){T7(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return R7},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new A7.default(Object.values(C7.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l={},d=new Op.LoginObserver({onError:function(h){return n._onLoginError(h,c)},onCompleted:function(h){return l.metadata=h,n._onLoginCompleted(h)}});return this.write(fc.default.hello5x2(i,s,this._serversideRouting),d,!1),this.logon({authToken:a,onComplete:function(h){return u(Yc(Yc({},h),l.metadata))},onError:c,flush:!0})},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.mode,c=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new Op.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),this.write(fc.default.begin({bookmarks:o,txConfig:i,database:a,mode:s,impersonatedUser:c,notificationFilter:u}),v,!0),v},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,y=i.afterError,_=i.beforeComplete,b=i.afterComplete,w=i.flush,S=w===void 0?!0:w,E=i.reactive,T=E===void 0?!1:E,C=i.fetchSize,P=C===void 0?j7:C,I=i.highRecordWatermark,M=I===void 0?Number.MAX_VALUE:I,F=i.lowRecordWatermark,Q=F===void 0?Number.MAX_VALUE:F,H=new Op.ResultStreamObserver({server:this._server,reactive:T,fetchSize:P,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:y,beforeComplete:_,afterComplete:b,highRecordWatermark:M,lowRecordWatermark:Q}),Z=T;return this.write(fc.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l,notificationFilter:d}),H,Z&&S),T||this.write(fc.default.pull({n:P}),H,S),H},r}(P7.default);rd.default=$7;var id={},ad={},Av=f&&f.__assign||function(){return Av=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Av.apply(this,arguments)},N7=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ad,"__esModule",{value:!0});var k7=N7(nd);ad.default=Av({},k7.default);var M7=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Zc=f&&f.__assign||function(){return Zc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Zc.apply(this,arguments)},ud=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(id,"__esModule",{value:!0});var D7=ud(rd),L7=ud(ad),U7=ud(me),F7=ud(qe),B7=oe,x7=q,V7=x7.internal.constants.BOLT_PROTOCOL_V5_3,W7=function(e){M7(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return V7},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new U7.default(Object.values(L7.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent,a=o.boltAgent,s=o.authToken,c=o.notificationFilter,u=o.onError,l=o.onComplete,d={},h=new B7.LoginObserver({onError:function(p){return n._onLoginError(p,u)},onCompleted:function(p){return d.metadata=p,n._onLoginCompleted(p)}});return this.write(F7.default.hello5x3(i,a,c,this._serversideRouting),h,!1),this.logon({authToken:s,onComplete:function(p){return l(Zc(Zc({},p),d.metadata))},onError:u,flush:!0})},r}(D7.default);id.default=W7;var sd={},cd={},Iv=f&&f.__assign||function(){return Iv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Iv.apply(this,arguments)},z7=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cd,"__esModule",{value:!0});var q7=z7(ad);cd.default=Iv({},q7.default);var H7=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ld=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sd,"__esModule",{value:!0});var G7=ld(id),K7=ld(cd),Y7=ld(qe),Z7=oe,Q7=ld(me),X7=q,J7=X7.internal.constants.BOLT_PROTOCOL_V5_4,eq=function(e){H7(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return J7},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Q7.default(Object.values(K7.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.telemetry=function(t,n){var o=t.api,i=n===void 0?{}:n,a=i.onError,s=i.onCompleted,c=new Z7.TelemetryObserver({onCompleted:s,onError:a});return this.write(Y7.default.telemetry({api:o}),c,!1),c},r}(G7.default);sd.default=eq;var fd={},dd={},Rv=f&&f.__assign||function(){return Rv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Rv.apply(this,arguments)},tq=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dd,"__esModule",{value:!0});var rq=tq(cd);dd.default=Rv({},rq.default);var nq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),$r=f&&f.__assign||function(){return $r=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},$r.apply(this,arguments)},hd=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fd,"__esModule",{value:!0});var oq=hd(sd),iq=hd(dd),aq=hd(me),dc=hd(qe),Ep=oe,uq=q,IE=uq.internal.constants,sq=IE.BOLT_PROTOCOL_V5_5,cq=IE.FETCH_ALL,lq=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),fq=function(e){nq(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return sq},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new aq.default(Object.values(iq.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent,a=o.boltAgent,s=o.authToken,c=o.notificationFilter,u=o.onError,l=o.onComplete,d={},h=new Ep.LoginObserver({onError:function(p){return n._onLoginError(p,u)},onCompleted:function(p){return d.metadata=p,n._onLoginCompleted(p)}});return this.write(dc.default.hello5x5(i,a,c,this._serversideRouting),h,!1),this.logon({authToken:s,onComplete:function(p){return l($r($r({},p),d.metadata))},onError:u,flush:!0})},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.mode,c=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new Ep.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),this.write(dc.default.begin5x5({bookmarks:o,txConfig:i,database:a,mode:s,impersonatedUser:c,notificationFilter:u}),v,!0),v},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,y=i.afterError,_=i.beforeComplete,b=i.afterComplete,w=i.flush,S=w===void 0?!0:w,E=i.reactive,T=E===void 0?!1:E,C=i.fetchSize,P=C===void 0?cq:C,I=i.highRecordWatermark,M=I===void 0?Number.MAX_VALUE:I,F=i.lowRecordWatermark,Q=F===void 0?Number.MAX_VALUE:F,H=new Ep.ResultStreamObserver({server:this._server,reactive:T,fetchSize:P,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:y,beforeComplete:_,afterComplete:b,highRecordWatermark:M,lowRecordWatermark:Q,enrichMetadata:this._enrichMetadata}),Z=T;return this.write(dc.default.runWithMetadata5x5(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l,notificationFilter:d}),H,Z&&S),T||this.write(dc.default.pull({n:P}),H,S),H},r.prototype._enrichMetadata=function(t){return Array.isArray(t.statuses)&&(t.statuses=t.statuses.map(function(n){return $r($r({},n),{description:n.neo4j_code!=null?n.status_description:n.description,diagnostic_record:n.diagnostic_record!==null?$r($r({},lq),n.diagnostic_record):null})})),t},r}(oq.default);fd.default=fq;var pd={},vd={},jv=f&&f.__assign||function(){return jv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},jv.apply(this,arguments)},dq=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vd,"__esModule",{value:!0});var hq=dq(dd);vd.default=jv({},hq.default);var pq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),go=f&&f.__assign||function(){return go=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},go.apply(this,arguments)},ey=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pd,"__esModule",{value:!0});var vq=ey(fd),_q=ey(vd),yq=ey(me),bq=q,mq=bq.internal.constants.BOLT_PROTOCOL_V5_6,gq=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),wq=function(e){pq(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return mq},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new yq.default(Object.values(_q.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype._enrichMetadata=function(t){return Array.isArray(t.statuses)&&(t.statuses=t.statuses.map(function(n){return go(go({},n),{diagnostic_record:n.diagnostic_record!==null?go(go({},gq),n.diagnostic_record):null})})),t},r}(vq.default);pd.default=wq;var _d={},yd={},$v=f&&f.__assign||function(){return $v=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},$v.apply(this,arguments)},Oq=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yd,"__esModule",{value:!0});var Eq=Oq(vd);yd.default=$v({},Eq.default);var Sq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),wo=f&&f.__assign||function(){return wo=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},wo.apply(this,arguments)},ty=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_d,"__esModule",{value:!0});var Tq=ty(pd),Pq=ty(yd),Cq=ty(me),Aq=q,Iq=Aq.internal.constants.BOLT_PROTOCOL_V5_7,Rq=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),jq=function(e){Sq(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return Iq},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Cq.default(Object.values(Pq.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.enrichErrorMetadata=function(t){return wo(wo({},t),{cause:t.cause!==null&&t.cause!==void 0?this.enrichErrorMetadata(t.cause):null,code:t.neo4j_code,diagnostic_record:t.diagnostic_record!==null?wo(wo({},Rq),t.diagnostic_record):null})},r}(Tq.default);_d.default=jq;var ry={},ny={},Nv=f&&f.__assign||function(){return Nv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Nv.apply(this,arguments)},$q=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ny,"__esModule",{value:!0});var Nq=$q(yd);ny.default=Nv({},Nq.default);var kq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bd=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ry,"__esModule",{value:!0});var Mq=bd(_d),Dq=bd(ny),Lq=bd(me),kg=bd(qe),Uq=oe,Fq=q,RE=Fq.internal.constants,Bq=RE.BOLT_PROTOCOL_V5_8,xq=RE.FETCH_ALL,Vq=function(e){kq(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return Bq},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Lq.default(Object.values(Dq.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,y=i.afterError,_=i.beforeComplete,b=i.afterComplete,w=i.flush,S=w===void 0?!0:w,E=i.reactive,T=E===void 0?!1:E,C=i.fetchSize,P=C===void 0?xq:C,I=i.highRecordWatermark,M=I===void 0?Number.MAX_VALUE:I,F=i.lowRecordWatermark,Q=F===void 0?Number.MAX_VALUE:F,H=i.onDb,Z=new Uq.ResultStreamObserver({server:this._server,reactive:T,fetchSize:P,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:y,beforeComplete:_,afterComplete:b,highRecordWatermark:M,lowRecordWatermark:Q,enrichMetadata:this._enrichMetadata,onDb:H}),fe=T;return this.write(kg.default.runWithMetadata5x5(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l,notificationFilter:d}),Z,fe&&S),T||this.write(kg.default.pull({n:P}),Z,S),Z},r}(Mq.default);ry.default=Vq;var oy={};Object.defineProperty(oy,"__esModule",{value:!0});var Cr=q,Wq=112,zq=113,qq=126,Hq=127;function cr(){}function Sp(e){return e}var Gq={onNext:cr,onCompleted:cr,onError:cr},Kq=function(){function e(r){var t=r===void 0?{}:r,n=t.transformMetadata,o=t.enrichErrorMetadata,i=t.log,a=t.observer;this._pendingObservers=[],this._log=i,this._transformMetadata=n||Sp,this._enrichErrorMetadata=o||Sp,this._observer=Object.assign({onObserversCountChange:cr,onError:cr,onFailure:cr,onErrorApplyTransformation:Sp},a)}return Object.defineProperty(e.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),e.prototype.handleResponse=function(r){var t=r.fields[0];switch(r.signature){case zq:this._log.isDebugEnabled()&&this._log.debug("S: RECORD ".concat(Cr.json.stringify(r))),this._currentObserver.onNext(t);break;case Wq:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS ".concat(Cr.json.stringify(r)));try{var n=this._transformMetadata(t);this._currentObserver.onCompleted(n)}finally{this._updateCurrentObserver()}break;case Hq:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE ".concat(Cr.json.stringify(r)));try{this._currentFailure=this._handleErrorPayload(this._enrichErrorMetadata(t)),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case qq:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED ".concat(Cr.json.stringify(r)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,Cr.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,Cr.newError)("Unknown Bolt protocol message: "+r))}},e.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onObserversCountChange(this._observersCount)},Object.defineProperty(e.prototype,"_observersCount",{get:function(){return this._currentObserver==null?this._pendingObservers.length:this._pendingObservers.length+1},enumerable:!1,configurable:!0}),e.prototype._queueObserver=function(r){return r=r||Gq,r.onCompleted=r.onCompleted||cr,r.onError=r.onError||cr,r.onNext=r.onNext||cr,this._currentObserver===void 0?this._currentObserver=r:this._pendingObservers.push(r),this._observer.onObserversCountChange(this._observersCount),!0},e.prototype._notifyErrorToObservers=function(r){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(r);this._pendingObservers.length>0;){var t=this._pendingObservers.shift();t&&t.onError&&t.onError(r)}},e.prototype.hasOngoingObservableRequests=function(){return this._currentObserver!=null||this._pendingObservers.length>0},e.prototype._resetFailure=function(){this._currentFailure=null},e.prototype._handleErrorPayload=function(r){var t=Yq(r.code),n=r.cause!=null?this._handleErrorCause(r.cause):void 0,o=(0,Cr.newError)(r.message,t,n,r.gql_status,r.description,r.diagnostic_record);return this._observer.onErrorApplyTransformation(o)},e.prototype._handleErrorCause=function(r){var t=r.cause!=null?this._handleErrorCause(r.cause):void 0,n=(0,Cr.newGQLError)(r.message,t,r.gql_status,r.description,r.diagnostic_record);return this._observer.onErrorApplyTransformation(n)},e}();oy.default=Kq;function Yq(e){return e==="Neo.TransientError.Transaction.Terminated"?"Neo.ClientError.Transaction.Terminated":e==="Neo.TransientError.Transaction.LockClientStopped"?"Neo.ClientError.Transaction.LockClientStopped":e}var Le=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(W_,"__esModule",{value:!0});var Zq=q,Qq=Le(Ef),Xq=Le(Nf),Jq=Le(Df),eH=Le(Ff),tH=Le(Vf),rH=Le(qf),nH=Le(Ds),oH=Le(Kf),iH=Le(Yf),aH=Le(Jf),uH=Le(rd),sH=Le(id),cH=Le(sd),lH=Le(fd),fH=Le(pd),dH=Le(_d),hH=Le(ry),pH=Le(oy);function vH(e){var r=e===void 0?{}:e,t=r.version,n=r.chunker,o=r.dechunker,i=r.channel,a=r.disableLosslessIntegers,s=r.useBigInt,c=r.serversideRouting,u=r.server,l=r.log,d=r.observer,h=function(p){var v=new pH.default({transformMetadata:p.transformMetadata.bind(p),enrichErrorMetadata:p.enrichErrorMetadata.bind(p),log:l,observer:d});return i.onerror=d.onError.bind(d),i.onmessage=function(y){return o.write(y)},o.onmessage=function(y){try{v.handleResponse(p.unpack(y))}catch(_){return d.onError(_)}},v};return _H(t,u,n,{disableLosslessIntegers:a,useBigInt:s},c,h,d.onProtocolError.bind(d),l)}W_.default=vH;function _H(e,r,t,n,o,i,a,s){switch(e){case 1:return new Qq.default(r,t,n,i,s,a);case 2:return new Xq.default(r,t,n,i,s,a);case 3:return new Jq.default(r,t,n,i,s,a);case 4:return new eH.default(r,t,n,i,s,a);case 4.1:return new tH.default(r,t,n,i,s,a,o);case 4.2:return new rH.default(r,t,n,i,s,a,o);case 4.3:return new nH.default(r,t,n,i,s,a,o);case 4.4:return new oH.default(r,t,n,i,s,a,o);case 5:return new iH.default(r,t,n,i,s,a,o);case 5.1:return new aH.default(r,t,n,i,s,a,o);case 5.2:return new uH.default(r,t,n,i,s,a,o);case 5.3:return new sH.default(r,t,n,i,s,a,o);case 5.4:return new cH.default(r,t,n,i,s,a,o);case 5.5:return new lH.default(r,t,n,i,s,a,o);case 5.6:return new fH.default(r,t,n,i,s,a,o);case 5.7:return new dH.default(r,t,n,i,s,a,o);case 5.8:return new hH.default(r,t,n,i,s,a,o);default:throw(0,Zq.newError)("Unknown Bolt protocol version: "+e)}}(function(e){var r=f&&f.__createBinding||(Object.create?function(c,u,l,d){d===void 0&&(d=l);var h=Object.getOwnPropertyDescriptor(u,l);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(c,d,h)}:function(c,u,l,d){d===void 0&&(d=l),c[d]=u[l]}),t=f&&f.__exportStar||function(c,u){for(var l in c)l!=="default"&&!Object.prototype.hasOwnProperty.call(u,l)&&r(u,c,l)},n=f&&f.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.RawRoutingTable=e.BoltProtocol=void 0;var o=n(M_),i=n(W_),a=n(Ds),s=n(Sf);t(oe,e),e.BoltProtocol=a.default,e.RawRoutingTable=s.default,e.default={handshake:o.default,create:i.default}})(k_);var jE={},md={},yH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(md,"__esModule",{value:!0});var bH=q,mH=function(e){yH(r,e);function r(t){var n=e.call(this)||this;return n._connection=t,n}return r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t;n.accessMode,n.database,n.bookmarks;var o=this._connection;return this._connection=null,Promise.resolve(o)},r}(bH.ConnectionProvider);md.default=mH;var xs={},gd={},Vs={},gH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Vs,"__esModule",{value:!0});var wH=q,OH=function(e){gH(r,e);function r(t){var n=e.call(this)||this;return n._errorHandler=t,n}return Object.defineProperty(r.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"authToken",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(r.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.connect=function(t,n,o,i){throw new Error("not implemented")},r.prototype.write=function(t,n,o){throw new Error("not implemented")},r.prototype.close=function(){throw new Error("not implemented")},r.prototype.handleAndTransformError=function(t,n){return this._errorHandler?this._errorHandler.handleAndTransformError(t,n,this):t},r}(wH.Connection);Vs.default=OH;var Ws={},EH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Mg=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Dg=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},$E=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.createChannelConnection=void 0;var hc=ro,Oo=q,SH=$E(Vs),Lg=$E(k_),TH=Oo.error.PROTOCOL_ERROR,PH=Oo.internal.logger.Logger,CH=0;function AH(e,r,t,n,o,i,a,s){i===void 0&&(i=null),s===void 0&&(s=function(l){return new hc.Channel(l)});var c=new hc.ChannelConfig(e,r,t.errorCode(),o),u=s(c);return Lg.default.handshake(u,n).then(function(l){var d=l.protocolVersion,h=l.consumeRemainingBuffer,p=new hc.Chunker(u),v=new hc.Dechunker,y=function(b){return Lg.default.create({version:d,channel:u,chunker:p,dechunker:v,disableLosslessIntegers:r.disableLosslessIntegers,useBigInt:r.useBigInt,serversideRouting:i,server:b.server,log:b.logger,observer:{onObserversCountChange:b._handleOngoingRequestsNumberChange.bind(b),onError:b._handleFatalError.bind(b),onFailure:b._resetOnFailure.bind(b),onProtocolError:b._handleProtocolError.bind(b),onErrorApplyTransformation:function(w){return b.handleAndTransformError(w,b._address)}}})},_=new NE(u,t,e,n,r.disableLosslessIntegers,i,p,r.notificationFilter,y,r.telemetryDisabled,a);return h(function(b){return v.write(b)}),_}).catch(function(l){return u.close().then(function(){throw l})})}Ws.createChannelConnection=AH;var NE=function(e){EH(r,e);function r(t,n,o,i,a,s,c,u,l,d,h){a===void 0&&(a=!1),s===void 0&&(s=null),h===void 0&&(h=function(v){});var p=e.call(this,n)||this;return p._authToken=null,p._idle=!1,p._reseting=!1,p._resetObservers=[],p._id=CH++,p._address=o,p._server={address:o.asHostPort()},p._creationTimestamp=Date.now(),p._disableLosslessIntegers=a,p._ch=t,p._chunker=c,p._log=IH(p,i),p._serversideRouting=s,p._notificationFilter=u,p._telemetryDisabledDriverConfig=d===!0,p._telemetryDisabledConnection=!0,p._ssrCallback=h,p._dbConnectionId=null,p._protocol=l(p),p._isBroken=!1,p._log.isDebugEnabled()&&p._log.debug("created towards ".concat(o)),p}return r.prototype.beginTransaction=function(t){return this._sendTelemetryIfEnabled(t),this._protocol.beginTransaction(t)},r.prototype.run=function(t,n,o){return this._sendTelemetryIfEnabled(o),this._protocol.run(t,n,o)},r.prototype._sendTelemetryIfEnabled=function(t){this._telemetryDisabledConnection||this._telemetryDisabledDriverConfig||t==null||t.apiTelemetryConfig==null||this._protocol.telemetry({api:t.apiTelemetryConfig.api},{onCompleted:t.apiTelemetryConfig.onTelemetrySuccess,onError:t.beforeError})},r.prototype.commitTransaction=function(t){return this._protocol.commitTransaction(t)},r.prototype.rollbackTransaction=function(t){return this._protocol.rollbackTransaction(t)},r.prototype.getProtocolVersion=function(){return this._protocol.version},Object.defineProperty(r.prototype,"authToken",{get:function(){return this._authToken},set:function(t){this._authToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return this._protocol.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(t){this._dbConnectionId=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){return this._idleTimestamp},set:function(t){this._idleTimestamp=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){return this._creationTimestamp},enumerable:!1,configurable:!0}),r.prototype.connect=function(t,n,o,i){return Mg(this,void 0,void 0,function(){var a=this;return Dg(this,function(s){switch(s.label){case 0:if(this._protocol.initialized&&!this._protocol.supportsReAuth)throw(0,Oo.newError)("Connection does not support re-auth");return this._authToken=o,this._protocol.initialized?[3,2]:[4,this._initialize(t,n,o)];case 1:return[2,s.sent()];case 2:return i?[4,new Promise(function(c,u){a._protocol.logoff({onError:u}),a._protocol.logon({authToken:o,onError:u,onComplete:function(){return c(a)},flush:!0})})]:[3,4];case 3:return[2,s.sent()];case 4:return this._protocol.logoff(),this._protocol.logon({authToken:o,flush:!0}),[2,this]}})})},r.prototype._initialize=function(t,n,o){var i=this,a=this;return new Promise(function(s,c){i._protocol.initialize({userAgent:t,boltAgent:n,authToken:o,notificationFilter:i._notificationFilter,onError:function(u){return c(u)},onComplete:function(u){var l;if(u){var d=u.server;(!i.version||d)&&(i.version=d);var h=u.connection_id;if(i.databaseId||(i.databaseId=h),u.hints){var p=u.hints["connection.recv_timeout_seconds"];if(p!=null){var v=(0,Oo.toNumber)(p);Number.isInteger(v)&&v>0?i._ch.setupReceiveTimeout(v*1e3):i._log.info("Server located at ".concat(i._address," supplied an invalid connection receive timeout value (").concat(v,"). ")+"Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}var y=u.hints["telemetry.enabled"];y===!0&&(i._telemetryDisabledConnection=!1),i.SSREnabledHint=u.hints["ssr.enabled"]}i._ssrCallback((l=i.SSREnabledHint)!==null&&l!==void 0?l:!1,"OPEN")}s(a)}})})},r.prototype.protocol=function(){return this._protocol},Object.defineProperty(r.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return this._server.version},set:function(t){this._server.version=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),r.prototype._handleFatalError=function(t){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||t,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by ".concat(this._error," (").concat(Oo.json.stringify(this._error),")")),this._protocol.notifyFatalError(this._error)},r.prototype._setIdle=function(t){this._idle=!0,this._ch.stopReceiveTimeout(),this._protocol.queueObserverIfProtocolIsNotBroken(t)},r.prototype._unsetIdle=function(){this._idle=!1,this._updateCurrentObserver()},r.prototype._queueObserver=function(t){return this._protocol.queueObserverIfProtocolIsNotBroken(t)},r.prototype.hasOngoingObservableRequests=function(){return!this._idle&&this._protocol.hasOngoingObservableRequests()},r.prototype.resetAndFlush=function(){var t=this;return new Promise(function(n,o){t._reset({onError:function(i){if(t._isBroken)o(i);else{var a=t._handleProtocolError("Received FAILURE as a response for RESET: ".concat(i));o(a)}},onComplete:function(){n()}})})},r.prototype._resetOnFailure=function(){var t=this;this.isOpen()&&this._reset({onError:function(){t._protocol.resetFailure()},onComplete:function(){t._protocol.resetFailure()}})},r.prototype._reset=function(t){var n=this;if(this._reseting){this._protocol.isLastMessageReset()?this._resetObservers.push(t):this._protocol.reset({onError:function(i){t.onError(i)},onComplete:function(){t.onComplete()}});return}this._resetObservers.push(t),this._reseting=!0;var o=function(i){n._reseting=!1;var a=n._resetObservers;n._resetObservers=[],a.forEach(i)};this._protocol.reset({onError:function(i){o(function(a){return a.onError(i)})},onComplete:function(){o(function(i){return i.onComplete()})}})},r.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},r.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},r.prototype._handleOngoingRequestsNumberChange=function(t){this._idle||(t===0?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout())},r.prototype.close=function(){var t;return Mg(this,void 0,void 0,function(){return Dg(this,function(n){switch(n.label){case 0:return this._ssrCallback((t=this.SSREnabledHint)!==null&&t!==void 0?t:!1,"CLOSE"),this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return n.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},r.prototype.toString=function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")},r.prototype._handleProtocolError=function(t){this._protocol.resetFailure(),this._updateCurrentObserver();var n=(0,Oo.newError)(t,TH);return this._handleFatalError(n),n},r}(SH.default);Ws.default=NE;function IH(e,r){return new PH(r._level,function(t,n){return r._loggerFunction(t,"".concat(e," ").concat(n))})}var iy={},RH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),jH=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(iy,"__esModule",{value:!0});var $H=jH(Vs),NH=function(e){RH(r,e);function r(t,n){var o=e.call(this,n)||this;return n&&(o._originalErrorHandler=t._errorHandler,t._errorHandler=o._errorHandler),o._delegate=t,o}return r.prototype.beginTransaction=function(t){return this._delegate.beginTransaction(t)},r.prototype.run=function(t,n,o){return this._delegate.run(t,n,o)},r.prototype.commitTransaction=function(t){return this._delegate.commitTransaction(t)},r.prototype.rollbackTransaction=function(t){return this._delegate.rollbackTransaction(t)},r.prototype.getProtocolVersion=function(){return this._delegate.getProtocolVersion()},Object.defineProperty(r.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(t){this._delegate.databaseId=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"authToken",{get:function(){return this._delegate.authToken},set:function(t){this._delegate.authToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return this._delegate.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return this._delegate.version},set:function(t){this._delegate.version=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){return this._delegate.creationTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){return this._delegate.idleTimestamp},set:function(t){this._delegate.idleTimestamp=t},enumerable:!1,configurable:!0}),r.prototype.isOpen=function(){return this._delegate.isOpen()},r.prototype.protocol=function(){return this._delegate.protocol()},r.prototype.connect=function(t,n,o,i){return this._delegate.connect(t,n,o,i)},r.prototype.write=function(t,n,o){return this._delegate.write(t,n,o)},r.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},r.prototype.hasOngoingObservableRequests=function(){return this._delegate.hasOngoingObservableRequests()},r.prototype.close=function(){return this._delegate.close()},r.prototype.release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate.release()},r}($H.default);iy.default=NH;var ay={};Object.defineProperty(ay,"__esModule",{value:!0});var kE=q,kH=kE.error.SERVICE_UNAVAILABLE,MH=kE.error.SESSION_EXPIRED,DH=function(){function e(r,t,n,o){this._errorCode=r,this._handleUnavailability=t||Tp,this._handleWriteFailure=n||Tp,this._handleSecurityError=o||Tp}return e.create=function(r){var t=r.errorCode,n=r.handleUnavailability,o=r.handleWriteFailure,i=r.handleSecurityError;return new e(t,n,o,i)},e.prototype.errorCode=function(){return this._errorCode},e.prototype.handleAndTransformError=function(r,t,n){return LH(r)?this._handleSecurityError(r,t,n):UH(r)?this._handleUnavailability(r,t,n):FH(r)?this._handleWriteFailure(r,t,n):r},e}();ay.default=DH;function LH(e){return e!=null&&e.code!=null&&e.code.startsWith("Neo.ClientError.Security.")}function UH(e){return e?e.code===MH||e.code===kH||e.code==="Neo.TransientError.General.DatabaseUnavailable":!1}function FH(e){return e?e.code==="Neo.ClientError.Cluster.NotALeader"||e.code==="Neo.ClientError.General.ForbiddenOnReadOnlyDatabase":!1}function Tp(e){return e}(function(e){var r=f&&f.__createBinding||(Object.create?function(u,l,d,h){h===void 0&&(h=d);var p=Object.getOwnPropertyDescriptor(l,d);(!p||("get"in p?!l.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return l[d]}}),Object.defineProperty(u,h,p)}:function(u,l,d,h){h===void 0&&(h=d),u[h]=l[d]}),t=f&&f.__setModuleDefault||(Object.create?function(u,l){Object.defineProperty(u,"default",{enumerable:!0,value:l})}:function(u,l){u.default=l}),n=f&&f.__importStar||function(u){if(u&&u.__esModule)return u;var l={};if(u!=null)for(var d in u)d!=="default"&&Object.prototype.hasOwnProperty.call(u,d)&&r(l,u,d);return t(l,u),l},o=f&&f.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=e.ConnectionErrorHandler=e.DelegateConnection=e.ChannelConnection=e.Connection=void 0;var i=o(Vs);e.Connection=i.default;var a=n(Ws);e.ChannelConnection=a.default,Object.defineProperty(e,"createChannelConnection",{enumerable:!0,get:function(){return a.createChannelConnection}});var s=o(iy);e.DelegateConnection=s.default;var c=o(ay);e.ConnectionErrorHandler=c.default,e.default=i.default})(gd);var uy={},BH=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},xH=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(uy,"__esModule",{value:!0});var VH=q,Ug=Jt,WH=function(){function e(r){var t=r.authTokenManager,n=r.userAgent,o=r.boltAgent;this._authTokenManager=t||(0,VH.staticAuthTokenManager)({}),this._userAgent=n,this._boltAgent=o}return e.prototype.authenticate=function(r){var t=r.connection,n=r.auth,o=r.skipReAuth,i=r.waitReAuth,a=r.forceReAuth;return BH(this,void 0,void 0,function(){var s,c;return xH(this,function(u){switch(u.label){case 0:return n==null?[3,3]:(s=t.supportsReAuth===!0&&(!Ug.object.equals(t.authToken,n)&&o!==!0||a===!0),t.authToken==null||s?[4,t.connect(this._userAgent,this._boltAgent,n,i||!1)]:[3,2]);case 1:return[2,u.sent()];case 2:return[2,t];case 3:return[4,this._authTokenManager.getToken()];case 4:return c=u.sent(),Ug.object.equals(c,t.authToken)?[3,6]:[4,t.connect(this._userAgent,this._boltAgent,c,!1)];case 5:return[2,u.sent()];case 6:return[2,t]}})})},e.prototype.handleError=function(r){var t=r.connection,n=r.code;return t&&n.startsWith("Neo.ClientError.Security.")?this._authTokenManager.handleSecurityException(t.authToken,n):!1},e}();uy.default=WH;var sy={},zH=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},qH=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(sy,"__esModule",{value:!0});var HH=function(){function e(r){var t=r.connectionLivenessCheckTimeout;this._connectionLivenessCheckTimeout=t}return e.prototype.check=function(r){return zH(this,void 0,void 0,function(){var t;return qH(this,function(n){switch(n.label){case 0:return this._isCheckDisabled||this._isNewlyCreatedConnection(r)?[2,!0]:(t=Date.now()-r.idleTimestamp,this._connectionLivenessCheckTimeout===0||t>this._connectionLivenessCheckTimeout?[4,r.resetAndFlush().then(function(){return!0})]:[3,2]);case 1:return[2,n.sent()];case 2:return[2,!0]}})})},Object.defineProperty(e.prototype,"_isCheckDisabled",{get:function(){return this._connectionLivenessCheckTimeout==null||this._connectionLivenessCheckTimeout<0},enumerable:!1,configurable:!0}),e.prototype._isNewlyCreatedConnection=function(r){return r.authToken==null},e}();sy.default=HH;var cy={},GH=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},KH=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(cy,"__esModule",{value:!0});var YH=ro,ZH=function(){function e(r){var t=r.clientCertificateProvider,n=r.loader;this._clientCertificateProvider=t,this._loader=n||YH.ClientCertificatesLoader,this._clientCertificate=null}return e.prototype.getClientCertificate=function(){return GH(this,void 0,void 0,function(){var r,t,n=this;return KH(this,function(o){switch(o.label){case 0:return r=this._clientCertificateProvider!=null,r?(t=this._clientCertificate==null,t?[3,2]:[4,this._clientCertificateProvider.hasUpdate()]):[3,3];case 1:t=o.sent(),o.label=2;case 2:r=t,o.label=3;case 3:return r&&(this._clientCertificate=Promise.resolve(this._clientCertificateProvider.getClientCertificate()).then(this._loader.load).then(function(i){return n._clientCertificate=i,n._clientCertificate}).catch(function(i){throw n._clientCertificate=null,i})),[2,this._clientCertificate]}})})},e}();cy.default=ZH;var QH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),gn=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},wn=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},XH=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},JH=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))},ly=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xs,"__esModule",{value:!0});var Fg=gd,Eo=q,eG=ly(uy),tG=Jt,rG=ly(sy),nG=ly(cy),oG=Eo.error.SERVICE_UNAVAILABLE,iG=["Neo.ClientError.Security.CredentialsExpired","Neo.ClientError.Security.Forbidden","Neo.ClientError.Security.TokenExpired","Neo.ClientError.Security.Unauthorized"],ME=Eo.internal.pool,Bg=ME.Pool,aG=ME.PoolConfig,uG=function(e){QH(r,e);function r(t,n){var o=t.id,i=t.config,a=t.log,s=t.userAgent,c=t.boltAgent,u=t.authTokenManager,l=t.newPool,d=l===void 0?function(){for(var p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];return new(Bg.bind.apply(Bg,JH([void 0],XH(p),!1)))}:l;n===void 0&&(n=null);var h=e.call(this)||this;return h._id=o,h._config=i,h._log=a,h._clientCertificateHolder=new nG.default({clientCertificateProvider:h._config.clientCertificate}),h._authenticationProvider=new eG.default({authTokenManager:u,userAgent:s,boltAgent:c}),h._livenessCheckProvider=new rG.default({connectionLivenessCheckTimeout:i.connectionLivenessCheckTimeout}),h._userAgent=s,h._boltAgent=c,h._createChannelConnection=n||function(p){return gn(h,void 0,void 0,function(){var v,y;return wn(this,function(_){switch(_.label){case 0:return v=Fg.createChannelConnection,y=[p,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,v.apply(void 0,y.concat([_.sent()]))]}})})},h._connectionPool=d({create:h._createConnection.bind(h),destroy:h._destroyConnection.bind(h),validateOnAcquire:h._validateConnectionOnAcquire.bind(h),validateOnRelease:h._validateConnectionOnRelease.bind(h),installIdleObserver:r._installIdleObserverOnConnection.bind(h),removeIdleObserver:r._removeIdleObserverOnConnection.bind(h),config:aG.fromDriverConfig(i),log:h._log}),h._openConnections={},h}return r.prototype._createConnectionErrorHandler=function(){return new Fg.ConnectionErrorHandler(oG)},r.prototype._getClientCertificate=function(){return gn(this,void 0,void 0,function(){return wn(this,function(t){return[2,this._config.clientCertificate.getClientCertificate()]})})},r.prototype._createConnection=function(t,n,o){var i=this,a=t.auth;return this._createChannelConnection(n).then(function(s){return s.release=function(){return s.idleTimestamp=Date.now(),o(n,s)},i._openConnections[s.id]=s,i._authenticationProvider.authenticate({connection:s,auth:a}).catch(function(c){throw i._destroyConnection(s),c})})},r.prototype._validateConnectionOnAcquire=function(t,n){var o=t.auth,i=t.skipReAuth;return gn(this,void 0,void 0,function(){var a,s;return wn(this,function(c){switch(c.label){case 0:if(!this._validateConnection(n))return[2,!1];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this._livenessCheckProvider.check(n)];case 2:return c.sent(),[3,4];case 3:return a=c.sent(),this._log.debug("The connection ".concat(n.id," is not alive because of an error ").concat(a.code," '").concat(a.message,"'")),[2,!1];case 4:return c.trys.push([4,6,,7]),[4,this._authenticationProvider.authenticate({connection:n,auth:o,skipReAuth:i})];case 5:return c.sent(),[2,!0];case 6:return s=c.sent(),this._log.debug("The connection ".concat(n.id," is not valid because of an error ").concat(s.code," '").concat(s.message,"'")),[2,!1];case 7:return[2]}})})},r.prototype._validateConnectionOnRelease=function(t){return t._sticky!==!0&&this._validateConnection(t)},r.prototype._validateConnection=function(t){if(!t.isOpen())return!1;var n=this._config.maxConnectionLifetime,o=Date.now()-t.creationTimestamp;return!(o>n)},r.prototype._destroyConnection=function(t){return delete this._openConnections[t.id],t.close()},r.prototype._verifyConnectivityAndGetServerVersion=function(t){var n=t.address;return gn(this,void 0,void 0,function(){var o,i;return wn(this,function(a){switch(a.label){case 0:return[4,this._connectionPool.acquire({},n)];case 1:o=a.sent(),i=new Eo.ServerInfo(o.server,o.protocol().version),a.label=2;case 2:return a.trys.push([2,,5,7]),o.protocol().isLastMessageLogon()?[3,4]:[4,o.resetAndFlush()];case 3:a.sent(),a.label=4;case 4:return[3,7];case 5:return[4,o.release()];case 6:return a.sent(),[7];case 7:return[2,i]}})})},r.prototype._verifyAuthentication=function(t){var n=t.getAddress,o=t.auth;return gn(this,void 0,void 0,function(){var i,a,s,c,u,l;return wn(this,function(d){switch(d.label){case 0:i=[],d.label=1;case 1:return d.trys.push([1,8,9,11]),[4,n()];case 2:return a=d.sent(),[4,this._connectionPool.acquire({auth:o,skipReAuth:!0},a)];case 3:if(s=d.sent(),i.push(s),c=!s.protocol().isLastMessageLogon(),!s.supportsReAuth)throw(0,Eo.newError)("Driver is connected to a database that does not support user switch.");return c&&s.supportsReAuth?[4,this._authenticationProvider.authenticate({connection:s,auth:o,waitReAuth:!0,forceReAuth:!0})]:[3,5];case 4:return d.sent(),[3,7];case 5:return c&&!s.supportsReAuth?[4,this._connectionPool.acquire({auth:o},a,{requireNew:!0})]:[3,7];case 6:u=d.sent(),u._sticky=!0,i.push(u),d.label=7;case 7:return[2,!0];case 8:if(l=d.sent(),iG.includes(l.code))return[2,!1];throw l;case 9:return[4,Promise.all(i.map(function(h){return h.release()}))];case 10:return d.sent(),[7];case 11:return[2]}})})},r.prototype._verifyStickyConnection=function(t){var n=t.auth,o=t.connection;return t.address,gn(this,void 0,void 0,function(){var i,a;return wn(this,function(s){switch(s.label){case 0:return i=tG.object.equals(n,o.authToken),a=!i,o._sticky=i&&!o.supportsReAuth,a||o._sticky?[4,o.release()]:[3,2];case 1:throw s.sent(),(0,Eo.newError)("Driver is connected to a database that does not support user switch.");case 2:return[2]}})})},r.prototype.close=function(){return gn(this,void 0,void 0,function(){return wn(this,function(t){switch(t.label){case 0:return[4,this._connectionPool.close()];case 1:return t.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(n){return n.close()}))];case 2:return t.sent(),[2]}})})},r._installIdleObserverOnConnection=function(t,n){t._setIdle(n)},r._removeIdleObserverOnConnection=function(t){t._unsetIdle()},r.prototype._handleSecurityError=function(t,n,o){var i=this._authenticationProvider.handleError({connection:o,code:t.code});return i&&(t.retriable=!0),t.code==="Neo.ClientError.Security.AuthorizationExpired"&&this._connectionPool.apply(n,function(a){a.authToken=null}),o&&o.close().catch(function(){}),t},r}(Eo.ConnectionProvider);xs.default=uG;var fy={},sG=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ar=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Ir=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},cG=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fy,"__esModule",{value:!0});var lG=cG(xs),xg=gd,DE=q,wd=DE.internal.constants,fG=wd.BOLT_PROTOCOL_V3,dG=wd.BOLT_PROTOCOL_V4_0,hG=wd.BOLT_PROTOCOL_V4_4,pG=wd.BOLT_PROTOCOL_V5_1,vG=DE.error.SERVICE_UNAVAILABLE,_G=function(e){sG(r,e);function r(t){var n=t.id,o=t.config,i=t.log,a=t.address,s=t.userAgent,c=t.boltAgent,u=t.authTokenManager,l=t.newPool,d=e.call(this,{id:n,config:o,log:i,userAgent:s,boltAgent:c,authTokenManager:u,newPool:l})||this;return d._address=a,d}return r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t;n.accessMode;var o=n.database;n.bookmarks;var i=n.auth,a=n.forceReAuth;return Ar(this,void 0,void 0,function(){var s,c,u=this;return Ir(this,function(l){switch(l.label){case 0:return s=xg.ConnectionErrorHandler.create({errorCode:vG,handleSecurityError:function(d,h,p){return u._handleSecurityError(d,h,p,o)}}),[4,this._connectionPool.acquire({auth:i,forceReAuth:a},this._address)];case 1:return c=l.sent(),i?[4,this._verifyStickyConnection({auth:i,connection:c,address:this._address})]:[3,3];case 2:return l.sent(),[2,c];case 3:return[2,new xg.DelegateConnection(c,s)]}})})},r.prototype._handleSecurityError=function(t,n,o,i){return this._log.warn("Direct driver ".concat(this._id," will close connection to ").concat(n," for database '").concat(i,"' because of an error ").concat(t.code," '").concat(t.message,"'")),e.prototype._handleSecurityError.call(this,t,n,o)},r.prototype._hasProtocolVersion=function(t){return Ar(this,void 0,void 0,function(){var n,o;return Ir(this,function(i){switch(i.label){case 0:return[4,this._createChannelConnection(this._address)];case 1:return n=i.sent(),o=n.protocol()?n.protocol().version:null,[4,n.close()];case 2:return i.sent(),o?[2,t(o)]:[2,!1]}})})},r.prototype.supportsMultiDb=function(){return Ar(this,void 0,void 0,function(){return Ir(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=dG})];case 1:return[2,t.sent()]}})})},r.prototype.getNegotiatedProtocolVersion=function(){var t=this;return new Promise(function(n,o){t._hasProtocolVersion(n).catch(o)})},r.prototype.supportsTransactionConfig=function(){return Ar(this,void 0,void 0,function(){return Ir(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=fG})];case 1:return[2,t.sent()]}})})},r.prototype.supportsUserImpersonation=function(){return Ar(this,void 0,void 0,function(){return Ir(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=hG})];case 1:return[2,t.sent()]}})})},r.prototype.supportsSessionAuth=function(){return Ar(this,void 0,void 0,function(){return Ir(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=pG})];case 1:return[2,t.sent()]}})})},r.prototype.verifyAuthentication=function(t){var n=t.auth;return Ar(this,void 0,void 0,function(){var o=this;return Ir(this,function(i){return[2,this._verifyAuthentication({auth:n,getAddress:function(){return o._address}})]})})},r.prototype.verifyConnectivityAndGetServerInfo=function(){return Ar(this,void 0,void 0,function(){return Ir(this,function(t){switch(t.label){case 0:return[4,this._verifyConnectivityAndGetServerVersion({address:this._address})];case 1:return[2,t.sent()]}})})},r}(lG.default);fy.default=_G;var dy={},Wn={},hy={},Ci={},Pp=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Cp=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.createValidRoutingTable=void 0;var St=q,LE=St.internal.constants,yG=LE.ACCESS_MODE_WRITE,bG=LE.ACCESS_MODE_READ,Ap=St.internal.serverAddress.ServerAddress,py=St.error.PROTOCOL_ERROR,mG=1,UE=function(){function e(r){var t=r===void 0?{}:r,n=t.database,o=t.routers,i=t.readers,a=t.writers,s=t.expirationTime,c=t.ttl;this.database=n||null,this.databaseName=n||"default database",this.routers=o||[],this.readers=i||[],this.writers=a||[],this.expirationTime=s||(0,St.int)(0),this.ttl=c}return e.fromRawRoutingTable=function(r,t,n){return FE(r,t,n)},e.prototype.forget=function(r){this.readers=pc(this.readers,r),this.writers=pc(this.writers,r)},e.prototype.forgetRouter=function(r){this.routers=pc(this.routers,r)},e.prototype.forgetWriter=function(r){this.writers=pc(this.writers,r)},e.prototype.isStaleFor=function(r){return this.expirationTime.lessThan(Date.now())||this.routers.length<mG||r===bG&&this.readers.length===0||r===yG&&this.writers.length===0},e.prototype.isExpiredFor=function(r){return this.expirationTime.add(r).lessThan(Date.now())},e.prototype.allServers=function(){return Cp(Cp(Cp([],Pp(this.routers),!1),Pp(this.readers),!1),Pp(this.writers),!1)},e.prototype.toString=function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")},e}();Ci.default=UE;function pc(e,r){return e.filter(function(t){return t.asKey()!==r.asKey()})}function FE(e,r,t){var n=t.ttl,o=wG(t,r),i=gG(t,r),a=i.routers,s=i.readers,c=i.writers;return Vg(a,"routers",r),Vg(s,"readers",r),new UE({database:e||t.db,routers:a,readers:s,writers:c,expirationTime:o,ttl:n})}Ci.createValidRoutingTable=FE;function gG(e,r){try{var t=[],n=[],o=[];return e.servers.forEach(function(i){var a=i.role,s=i.addresses;a==="ROUTE"?t=Ip(s).map(function(c){return Ap.fromUrl(c)}):a==="WRITE"?o=Ip(s).map(function(c){return Ap.fromUrl(c)}):a==="READ"&&(n=Ip(s).map(function(c){return Ap.fromUrl(c)}))}),{routers:t,readers:n,writers:o}}catch(i){throw(0,St.newError)("Unable to parse servers entry from router ".concat(r,` from addresses:
`).concat(St.json.stringify(e.servers),`
Error message: `).concat(i.message),py)}}function wG(e,r){try{var t=(0,St.int)(Date.now()),n=(0,St.int)(e.ttl).multiply(1e3).add(t);return n.lessThan(t)?St.Integer.MAX_VALUE:n}catch(o){throw(0,St.newError)("Unable to parse TTL entry from router ".concat(r,` from raw routing table:
`).concat(St.json.stringify(e),`
Error message: `).concat(o.message),py)}}function Vg(e,r,t){if(e.length===0)throw(0,St.newError)("Received no "+r+" from router "+t,py)}function Ip(e){if(!Array.isArray(e))throw new TypeError("Array expected but got: "+e);return Array.from(e)}var OG=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hy,"__esModule",{value:!0});var EG=OG(Ci),SG=function(){function e(r){this._routingContext=r}return e.prototype.lookupRoutingTableOnRouter=function(r,t,n,o){var i=this;return r._acquireConnection(function(a){return i._requestRawRoutingTable(a,r,t,n,o).then(function(s){return s.isNull?null:EG.default.fromRawRoutingTable(t,n,s)})})},e.prototype._requestRawRoutingTable=function(r,t,n,o,i){var a=this;return new Promise(function(s,c){r.protocol().requestRoutingInformation({routingContext:a._routingContext,databaseName:n,impersonatedUser:i,sessionContext:{bookmarks:t._lastBookmarks,mode:t._mode,database:t._database,afterComplete:t._onComplete},onCompleted:s,onError:c})})},e}();hy.default=SG;var BE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.RoutingTable=Wn.Rediscovery=void 0;var xE=BE(hy);Wn.Rediscovery=xE.default;var TG=BE(Ci);Wn.RoutingTable=TG.default;Wn.default=xE.default;var PG=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qc=f&&f.__assign||function(){return Qc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Qc.apply(this,arguments)},CG=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),AG=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),IG=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&CG(r,e,t);return AG(r,e),r},Te=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Pe=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},kv=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},sr=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},VE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dy,"__esModule",{value:!0});var Ze=q,Rp=IG(Wn),RG=ro,jG=VE(md),$G=VE(xs),NG=Vr,On=gd,kG=Jt,vc=Ze.error.SERVICE_UNAVAILABLE,Gi=Ze.error.SESSION_EXPIRED,MG=Ze.internal.bookmarks.Bookmarks,Ai=Ze.internal.constants,Wg=Ai.ACCESS_MODE_READ,_c=Ai.ACCESS_MODE_WRITE,DG=Ai.BOLT_PROTOCOL_V3,LG=Ai.BOLT_PROTOCOL_V4_0,UG=Ai.BOLT_PROTOCOL_V4_4,FG=Ai.BOLT_PROTOCOL_V5_1,BG="Neo.ClientError.Procedure.ProcedureNotFound",xG="Neo.ClientError.Database.DatabaseNotFound",VG="Neo.ClientError.Transaction.InvalidBookmark",WG="Neo.ClientError.Transaction.InvalidBookmarkMixture",zG="Neo.ClientError.Security.AuthorizationExpired",qG="Neo.ClientError.Statement.ArgumentError",HG="Neo.ClientError.Request.Invalid",GG="Neo.ClientError.Statement.TypeError",KG="N/A",YG="system",Ki=null,ZG=(0,Ze.int)(3e4),QG=function(e){PG(r,e);function r(t){var n=t.id,o=t.address,i=t.routingContext,a=t.hostNameResolver,s=t.config,c=t.log,u=t.userAgent,l=t.boltAgent,d=t.authTokenManager,h=t.routingTablePurgeDelay,p=t.newPool,v=e.call(this,{id:n,config:s,log:c,userAgent:u,boltAgent:l,authTokenManager:d,newPool:p},function(y){return Te(v,void 0,void 0,function(){var _,b;return Pe(this,function(w){switch(w.label){case 0:return _=On.createChannelConnection,b=[y,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,_.apply(void 0,b.concat([w.sent(),this._routingContext,this._channelSsrCallback.bind(this)]))]}})})})||this;return v._routingContext=Qc(Qc({},i),{address:o.toString()}),v._seedRouter=o,v._rediscovery=new Rp.default(v._routingContext),v._loadBalancingStrategy=new NG.LeastConnectedLoadBalancingStrategy(v._connectionPool),v._hostNameResolver=a,v._dnsResolver=new RG.HostNameResolver,v._log=c,v._useSeedRouter=!0,v._routingTableRegistry=new XG(h?(0,Ze.int)(h):ZG),v._refreshRoutingTable=kG.functional.reuseOngoingRequest(v._refreshRoutingTable,v),v._withSSR=0,v._withoutSSR=0,v}return r.prototype._createConnectionErrorHandler=function(){return new On.ConnectionErrorHandler(Gi)},r.prototype._handleUnavailability=function(t,n,o){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(n," for database '").concat(o,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forget(n,o||Ki),t},r.prototype._handleSecurityError=function(t,n,o,i){return this._log.warn("Routing driver ".concat(this._id," will close connections to ").concat(n," for database '").concat(i,"' because of an error ").concat(t.code," '").concat(t.message,"'")),e.prototype._handleSecurityError.call(this,t,n,o,i)},r.prototype._handleWriteFailure=function(t,n,o){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(n," for database '").concat(o,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forgetWriter(n,o||Ki),(0,Ze.newError)("No longer possible to write to server at "+n,Gi,t)},r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t,o=n.accessMode,i=n.database,a=n.bookmarks,s=n.impersonatedUser,c=n.onDatabaseNameResolved,u=n.auth,l=n.homeDb;return Te(this,void 0,void 0,function(){var d,h,p,v,y,_=this;return Pe(this,function(b){switch(b.label){case 0:return d={database:i||Ki},h=new On.ConnectionErrorHandler(Gi,function(w,S){return _._handleUnavailability(w,S,d.database)},function(w,S){return _._handleWriteFailure(w,S,l??d.database)},function(w,S,E){return _._handleSecurityError(w,S,E,d.database)}),this.SSREnabled()&&l!==void 0&&i===""?(v=this._routingTableRegistry.get(l,function(){return new Rp.RoutingTable({database:l})}),v&&!v.isStaleFor(o)?[4,this.getConnectionFromRoutingTable(v,u,o,h)]:[3,2]):[3,2];case 1:if(p=b.sent(),this.SSREnabled())return[2,p];p.release(),b.label=2;case 2:return[4,this._freshRoutingTable({accessMode:o,database:d.database,bookmarks:a,impersonatedUser:s,auth:u,onDatabaseNameResolved:function(w){d.database=d.database||w,c&&c(w)}})];case 3:return y=b.sent(),[2,this.getConnectionFromRoutingTable(y,u,o,h)]}})})},r.prototype.getConnectionFromRoutingTable=function(t,n,o,i){return Te(this,void 0,void 0,function(){var a,s,c,u,l;return Pe(this,function(d){switch(d.label){case 0:if(o===Wg)s=this._loadBalancingStrategy.selectReader(t.readers),a="read";else if(o===_c)s=this._loadBalancingStrategy.selectWriter(t.writers),a="write";else throw(0,Ze.newError)("Illegal mode "+o);if(!s)throw(0,Ze.newError)("Failed to obtain connection towards ".concat(a," server. Known routing table is: ").concat(t),Gi);d.label=1;case 1:return d.trys.push([1,5,,6]),[4,this._connectionPool.acquire({auth:n},s)];case 2:return c=d.sent(),n?[4,this._verifyStickyConnection({auth:n,connection:c,address:s})]:[3,4];case 3:return d.sent(),[2,c];case 4:return[2,new On.DelegateConnection(c,i)];case 5:throw u=d.sent(),l=i.handleAndTransformError(u,s),l;case 6:return[2]}})})},r.prototype._hasProtocolVersion=function(t){return Te(this,void 0,void 0,function(){var n,o,i,a,s,c;return Pe(this,function(u){switch(u.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:n=u.sent(),i=0,u.label=2;case 2:if(!(i<n.length))return[3,8];u.label=3;case 3:return u.trys.push([3,6,,7]),[4,this._createChannelConnection(n[i])];case 4:return a=u.sent(),s=a.protocol()?a.protocol().version:null,[4,a.close()];case 5:return u.sent(),s?[2,t(s)]:[2,!1];case 6:return c=u.sent(),o=c,[3,7];case 7:return i++,[3,2];case 8:if(o)throw o;return[2,!1]}})})},r.prototype.supportsMultiDb=function(){return Te(this,void 0,void 0,function(){return Pe(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=LG})];case 1:return[2,t.sent()]}})})},r.prototype.supportsTransactionConfig=function(){return Te(this,void 0,void 0,function(){return Pe(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=DG})];case 1:return[2,t.sent()]}})})},r.prototype.supportsUserImpersonation=function(){return Te(this,void 0,void 0,function(){return Pe(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=UG})];case 1:return[2,t.sent()]}})})},r.prototype.supportsSessionAuth=function(){return Te(this,void 0,void 0,function(){return Pe(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=FG})];case 1:return[2,t.sent()]}})})},r.prototype.getNegotiatedProtocolVersion=function(){var t=this;return new Promise(function(n,o){t._hasProtocolVersion(n).catch(o)})},r.prototype.verifyAuthentication=function(t){var n=t.database,o=t.accessMode,i=t.auth;return Te(this,void 0,void 0,function(){var a=this;return Pe(this,function(s){return[2,this._verifyAuthentication({auth:i,getAddress:function(){return Te(a,void 0,void 0,function(){var c,u,l;return Pe(this,function(d){switch(d.label){case 0:return c={database:n||Ki},[4,this._freshRoutingTable({accessMode:o,database:c.database,auth:i,onDatabaseNameResolved:function(h){c.database=c.database||h}})];case 1:if(u=d.sent(),l=o===_c?u.writers:u.readers,l.length===0)throw(0,Ze.newError)("No servers available for database '".concat(c.database,"' with access mode '").concat(o,"'"),vc);return[2,l[0]]}})})}})]})})},r.prototype.verifyConnectivityAndGetServerInfo=function(t){var n=t.database,o=t.accessMode;return Te(this,void 0,void 0,function(){var i,a,s,c,u,l,d,h,p,v,y,_;return Pe(this,function(b){switch(b.label){case 0:return i={database:n||Ki},[4,this._freshRoutingTable({accessMode:o,database:i.database,onDatabaseNameResolved:function(w){i.database=i.database||w}})];case 1:a=b.sent(),s=o===_c?a.writers:a.readers,c=(0,Ze.newError)("No servers available for database '".concat(i.database,"' with access mode '").concat(o,"'"),vc),b.label=2;case 2:b.trys.push([2,9,10,11]),u=kv(s),l=u.next(),b.label=3;case 3:if(l.done)return[3,8];d=l.value,b.label=4;case 4:return b.trys.push([4,6,,7]),[4,this._verifyConnectivityAndGetServerVersion({address:d})];case 5:return h=b.sent(),[2,h];case 6:return p=b.sent(),c=p,[3,7];case 7:return l=u.next(),[3,3];case 8:return[3,11];case 9:return v=b.sent(),y={error:v},[3,11];case 10:try{l&&!l.done&&(_=u.return)&&_.call(u)}finally{if(y)throw y.error}return[7];case 11:throw c}})})},r.prototype.forget=function(t,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(o){return o.forget(t)}}),this._connectionPool.purge(t).catch(function(){})},r.prototype.forgetWriter=function(t,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(o){return o.forgetWriter(t)}})},r.prototype._freshRoutingTable=function(t){var n=t===void 0?{}:t,o=n.accessMode,i=n.database,a=n.bookmarks,s=n.impersonatedUser,c=n.onDatabaseNameResolved,u=n.auth,l=this._routingTableRegistry.get(i,function(){return new Rp.RoutingTable({database:i})});return l.isStaleFor(o)?(this._log.info('Routing table is stale for database: "'.concat(i,'" and access mode: "').concat(o,'": ').concat(l)),this._refreshRoutingTable(l,a,s,u).then(function(d){return c(d.database),d})):l},r.prototype._refreshRoutingTable=function(t,n,o,i){var a=t.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(a,t,n,o,i):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(a,t,n,o,i)},r.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(t,n,o,i,a){return Te(this,void 0,void 0,function(){var s,c,u,l,d,h,p;return Pe(this,function(v){switch(v.label){case 0:return s=[],[4,this._fetchRoutingTableUsingSeedRouter(s,this._seedRouter,n,o,i,a)];case 1:return c=sr.apply(void 0,[v.sent(),2]),u=c[0],l=c[1],u?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(t,n,o,i,a)];case 3:d=sr.apply(void 0,[v.sent(),2]),h=d[0],p=d[1],u=h,l=p||l,v.label=4;case 4:return[4,this._applyRoutingTableIfPossible(n,u,l)];case 5:return[2,v.sent()]}})})},r.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(t,n,o,i,a){return Te(this,void 0,void 0,function(){var s,c,u,l;return Pe(this,function(d){switch(d.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(t,n,o,i,a)];case 1:return s=sr.apply(void 0,[d.sent(),2]),c=s[0],u=s[1],c?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(t,this._seedRouter,n,o,i,a)];case 2:l=sr.apply(void 0,[d.sent(),2]),c=l[0],u=l[1],d.label=3;case 3:return[4,this._applyRoutingTableIfPossible(n,c,u)];case 4:return[2,d.sent()]}})})},r.prototype._fetchRoutingTableUsingKnownRouters=function(t,n,o,i,a){return Te(this,void 0,void 0,function(){var s,c,u,l;return Pe(this,function(d){switch(d.label){case 0:return[4,this._fetchRoutingTable(t,n,o,i,a)];case 1:return s=sr.apply(void 0,[d.sent(),2]),c=s[0],u=s[1],c?[2,[c,null]]:(l=t.length-1,r._forgetRouter(n,t,l),[2,[null,u]])}})})},r.prototype._fetchRoutingTableUsingSeedRouter=function(t,n,o,i,a,s){return Te(this,void 0,void 0,function(){var c,u;return Pe(this,function(l){switch(l.label){case 0:return[4,this._resolveSeedRouter(n)];case 1:return c=l.sent(),u=c.filter(function(d){return t.indexOf(d)<0}),[4,this._fetchRoutingTable(u,o,i,a,s)];case 2:return[2,l.sent()]}})})},r.prototype._resolveSeedRouter=function(t){return Te(this,void 0,void 0,function(){var n,o,i=this;return Pe(this,function(a){switch(a.label){case 0:return[4,this._hostNameResolver.resolve(t)];case 1:return n=a.sent(),[4,Promise.all(n.map(function(s){return i._dnsResolver.resolve(s)}))];case 2:return o=a.sent(),[2,[].concat.apply([],o)]}})})},r.prototype._fetchRoutingTable=function(t,n,o,i,a){return Te(this,void 0,void 0,function(){var s=this;return Pe(this,function(c){return[2,t.reduce(function(u,l,d){return Te(s,void 0,void 0,function(){var h,p,v,y,_,b,w;return Pe(this,function(S){switch(S.label){case 0:return[4,u];case 1:return h=sr.apply(void 0,[S.sent(),1]),p=h[0],p?[2,[p,null]]:(v=d-1,r._forgetRouter(n,t,v),[4,this._createSessionForRediscovery(l,o,i,a)]);case 2:if(y=sr.apply(void 0,[S.sent(),2]),_=y[0],b=y[1],!_)return[3,8];S.label=3;case 3:return S.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(_,n.database,l,i)];case 4:return[2,[S.sent(),null]];case 5:return w=S.sent(),[2,this._handleRediscoveryError(w,l)];case 6:return _.close(),[7];case 7:return[3,9];case 8:return[2,[null,b]];case 9:return[2]}})})},Promise.resolve([null,null]))]})})},r.prototype._createSessionForRediscovery=function(t,n,o,i){return Te(this,void 0,void 0,function(){var a,s,c,u,l,d,h=this;return Pe(this,function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),[4,this._connectionPool.acquire({auth:i},t)];case 1:return a=p.sent(),i?[4,this._verifyStickyConnection({auth:i,connection:a,address:t})]:[3,3];case 2:p.sent(),p.label=3;case 3:return s=On.ConnectionErrorHandler.create({errorCode:Gi,handleSecurityError:function(v,y,_){return h._handleSecurityError(v,y,_)}}),c=a._sticky?new On.DelegateConnection(a):new On.DelegateConnection(a,s),u=new jG.default(c),l=a.protocol().version,l<4?[2,[new Ze.Session({mode:_c,bookmarks:MG.empty(),connectionProvider:u}),null]]:[2,[new Ze.Session({mode:Wg,database:YG,bookmarks:n,connectionProvider:u,impersonatedUser:o}),null]];case 4:return d=p.sent(),[2,this._handleRediscoveryError(d,t)];case 5:return[2]}})})},r.prototype._handleRediscoveryError=function(t,n){if(JG(t)||e9(t))throw t;if(t.code===BG)throw(0,Ze.newError)("Server at ".concat(n.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),vc,t);return this._log.warn("unable to fetch routing table because of an error ".concat(t)),[null,t]},r.prototype._applyRoutingTableIfPossible=function(t,n,o){return Te(this,void 0,void 0,function(){return Pe(this,function(i){switch(i.label){case 0:if(!n)throw(0,Ze.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(t),vc,o);return n.writers.length===0&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(n)];case 1:return i.sent(),[2,n]}})})},r.prototype._updateRoutingTable=function(t){return Te(this,void 0,void 0,function(){return Pe(this,function(n){switch(n.label){case 0:return[4,this._connectionPool.keepAll(t.allServers())];case 1:return n.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(t),this._log.info("Updated routing table ".concat(t)),[2]}})})},r._forgetRouter=function(t,n,o){var i=n[o];t&&i&&t.forgetRouter(i)},r.prototype._channelSsrCallback=function(t,n){if(n==="OPEN")t===!0?this._withSSR=this._withSSR+1:this._withoutSSR=this._withoutSSR+1;else if(n==="CLOSE")t===!0?this._withSSR=this._withSSR-1:this._withoutSSR=this._withoutSSR-1;else throw(0,Ze.newError)("Channel SSR Callback invoked with action other than 'OPEN' or 'CLOSE'")},r.prototype.SSREnabled=function(){return this._withSSR>0&&this._withoutSSR===0},r}($G.default);dy.default=QG;var XG=function(){function e(r){this._tables=new Map,this._routingTablePurgeDelay=r}return e.prototype.register=function(r){return this._tables.set(r.database,r),this},e.prototype.apply=function(r,t){var n=t===void 0?{}:t,o=n.applyWhenExists,i=n.applyWhenDontExists,a=i===void 0?function(){}:i;return this._tables.has(r)?o(this._tables.get(r)):typeof r=="string"||r===null?a():this._forEach(o),this},e.prototype.get=function(r,t){return this._tables.has(r)?this._tables.get(r):typeof t=="function"?t():t},e.prototype.removeExpired=function(){var r=this;return this._removeIf(function(t){return t.isExpiredFor(r._routingTablePurgeDelay)})},e.prototype._forEach=function(r){var t,n;try{for(var o=kv(this._tables),i=o.next();!i.done;i=o.next()){var a=sr(i.value,2),s=a[1];r(s)}}catch(c){t={error:c}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return this},e.prototype._remove=function(r){return this._tables.delete(r),this},e.prototype._removeIf=function(r){var t,n;try{for(var o=kv(this._tables),i=o.next();!i.done;i=o.next()){var a=sr(i.value,2),s=a[0],c=a[1];r(c)&&this._remove(s)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return this},e}();function JG(e){return[xG,VG,WG,qG,HG,GG,KG].includes(e.code)}function e9(e){return e.code.startsWith("Neo.ClientError.Security.")&&![zG].includes(e.code)}(function(e){var r=f&&f.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingConnectionProvider=e.DirectConnectionProvider=e.PooledConnectionProvider=e.SingleConnectionProvider=void 0;var t=md;Object.defineProperty(e,"SingleConnectionProvider",{enumerable:!0,get:function(){return r(t).default}});var n=xs;Object.defineProperty(e,"PooledConnectionProvider",{enumerable:!0,get:function(){return r(n).default}});var o=fy;Object.defineProperty(e,"DirectConnectionProvider",{enumerable:!0,get:function(){return r(o).default}});var i=dy;Object.defineProperty(e,"RoutingConnectionProvider",{enumerable:!0,get:function(){return r(i).default}})})(jE);(function(e){var r=f&&f.__createBinding||(Object.create?function(i,a,s,c){c===void 0&&(c=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(i,c,u)}:function(i,a,s,c){c===void 0&&(c=s),i[c]=a[s]}),t=f&&f.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),n=f&&f.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var s in i)s!=="default"&&Object.prototype.hasOwnProperty.call(i,s)&&r(a,i,s);return t(a,i),a},o=f&&f.__exportStar||function(i,a){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&r(a,i,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.packstream=e.channel=e.buf=e.bolt=e.loadBalancing=void 0,e.loadBalancing=n(Vr),e.bolt=n(k_),e.buf=n(no),e.channel=n(ro),e.packstream=n(rt),o(jE,e)})(o1);(function(e){var r=f&&f.__awaiter||function(V,ie,W,te){function K(L){return L instanceof W?L:new W(function(re){re(L)})}return new(W||(W=Promise))(function(L,re){function pe(je){try{X(te.next(je))}catch(ve){re(ve)}}function Ae(je){try{X(te.throw(je))}catch(ve){re(ve)}}function X(je){je.done?L(je.value):K(je.value).then(pe,Ae)}X((te=te.apply(V,ie||[])).next())})},t=f&&f.__generator||function(V,ie){var W={label:0,sent:function(){if(L[0]&1)throw L[1];return L[1]},trys:[],ops:[]},te,K,L,re;return re={next:pe(0),throw:pe(1),return:pe(2)},typeof Symbol=="function"&&(re[Symbol.iterator]=function(){return this}),re;function pe(X){return function(je){return Ae([X,je])}}function Ae(X){if(te)throw new TypeError("Generator is already executing.");for(;re&&(re=0,X[0]&&(W=0)),W;)try{if(te=1,K&&(L=X[0]&2?K.return:X[0]?K.throw||((L=K.return)&&L.call(K),0):K.next)&&!(L=L.call(K,X[1])).done)return L;switch(K=0,L&&(X=[X[0]&2,L.value]),X[0]){case 0:case 1:L=X;break;case 4:return W.label++,{value:X[1],done:!1};case 5:W.label++,K=X[1],X=[0];continue;case 7:X=W.ops.pop(),W.trys.pop();continue;default:if(L=W.trys,!(L=L.length>0&&L[L.length-1])&&(X[0]===6||X[0]===2)){W=0;continue}if(X[0]===3&&(!L||X[1]>L[0]&&X[1]<L[3])){W.label=X[1];break}if(X[0]===6&&W.label<L[1]){W.label=L[1],L=X;break}if(L&&W.label<L[2]){W.label=L[2],W.ops.push(X);break}L[2]&&W.ops.pop(),W.trys.pop();continue}X=ie.call(V,W)}catch(je){X=[6,je],K=0}finally{te=L=0}if(X[0]&5)throw X[1];return{value:X[0]?X[1]:void 0,done:!0}}},n=f&&f.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};Object.defineProperty(e,"__esModule",{value:!0}),e.UnboundRelationship=e.Relationship=e.Node=e.Record=e.ServerInfo=e.GqlStatusObject=e.Notification=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ResultSummary=e.RxResult=e.RxManagedTransaction=e.RxTransaction=e.RxSession=e.EagerResult=e.Result=e.ManagedTransaction=e.Transaction=e.Session=e.Driver=e.temporal=e.spatial=e.graph=e.error=e.routing=e.session=e.types=e.logging=e.auth=e.isRetryableError=e.Neo4jError=e.integer=e.isUnboundRelationship=e.isRelationship=e.isPathSegment=e.isPath=e.isNode=e.isDateTime=e.isLocalDateTime=e.isDate=e.isTime=e.isLocalTime=e.isDuration=e.isPoint=e.isInt=e.int=e.hasReachableServer=e.driver=e.authTokenManagers=void 0,e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.bookmarkManager=e.DateTime=e.LocalDateTime=e.Date=e.Time=e.LocalTime=e.Duration=e.Integer=e.Point=e.PathSegment=e.Path=void 0;var o=dr;Object.defineProperty(e,"Driver",{enumerable:!0,get:function(){return o.Driver}});var i=n(j_),a=q;Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return a.authTokenManagers}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return a.Neo4jError}}),Object.defineProperty(e,"isRetryableError",{enumerable:!0,get:function(){return a.isRetryableError}}),Object.defineProperty(e,"error",{enumerable:!0,get:function(){return a.error}}),Object.defineProperty(e,"Integer",{enumerable:!0,get:function(){return a.Integer}}),Object.defineProperty(e,"int",{enumerable:!0,get:function(){return a.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return a.isInt}}),Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return a.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return a.Point}}),Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return a.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return a.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return a.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return a.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return a.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return a.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return a.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return a.isLocalTime}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return a.isNode}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return a.isPath}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return a.isPathSegment}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return a.isRelationship}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return a.isTime}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return a.isUnboundRelationship}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return a.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return a.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return a.Time}}),Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return a.Node}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return a.Path}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return a.PathSegment}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return a.Relationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return a.UnboundRelationship}}),Object.defineProperty(e,"Record",{enumerable:!0,get:function(){return a.Record}}),Object.defineProperty(e,"ResultSummary",{enumerable:!0,get:function(){return a.ResultSummary}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return a.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return a.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return a.QueryStatistics}}),Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return a.Notification}}),Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return a.GqlStatusObject}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return a.ServerInfo}}),Object.defineProperty(e,"Result",{enumerable:!0,get:function(){return a.Result}}),Object.defineProperty(e,"EagerResult",{enumerable:!0,get:function(){return a.EagerResult}}),Object.defineProperty(e,"auth",{enumerable:!0,get:function(){return a.auth}}),Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return a.Session}}),Object.defineProperty(e,"Transaction",{enumerable:!0,get:function(){return a.Transaction}}),Object.defineProperty(e,"ManagedTransaction",{enumerable:!0,get:function(){return a.ManagedTransaction}}),Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return a.bookmarkManager}}),Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return a.routing}}),Object.defineProperty(e,"resultTransformers",{enumerable:!0,get:function(){return a.resultTransformers}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return a.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return a.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return a.notificationSeverityLevel}}),Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return a.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return a.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return a.notificationFilterMinimumSeverityLevel}}),Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return a.clientCertificateProviders}});var s=o1,c=n(kl);e.RxSession=c.default;var u=n(Ms);e.RxTransaction=u.default;var l=n(yf);e.RxManagedTransaction=l.default;var d=n(Ei);e.RxResult=d.default;var h=a.internal.util,p=h.ENCRYPTION_ON,v=h.assertString,y=h.isEmptyObjectOrNull,_=a.internal.serverAddress.ServerAddress,b=a.internal.urlUtil,w="neo4j-javascript/"+i.default;function S(V){return typeof V=="object"&&V!=null&&"getToken"in V&&"handleSecurityException"in V&&typeof V.getToken=="function"&&typeof V.handleSecurityException=="function"}function E(V){if(S(V))return V;var ie=V;return ie=ie||{},ie.scheme=ie.scheme||"none",(0,a.staticAuthTokenManager)({authToken:ie})}function T(V,ie,W){W===void 0&&(W={}),v(V,"Bolt URL");var te=b.parseDatabaseUrl(V),K=!1,L=!1,re;switch(te.scheme){case"bolt":break;case"bolt+s":L=!0,re="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":L=!0,re="TRUST_ALL_CERTIFICATES";break;case"neo4j":K=!0;break;case"neo4j+s":L=!0,re="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",K=!0;break;case"neo4j+ssc":L=!0,re="TRUST_ALL_CERTIFICATES",K=!0;break;default:throw new Error("Unknown scheme: ".concat(te.scheme))}if(L){if("encrypted"in W||"trust"in W)throw new Error("Encryption/trust can only be configured either through URL or config, not both");W.encrypted=p,W.trust=re,W.clientCertificate=(0,a.resolveCertificateProvider)(W.clientCertificate)}var pe=E(ie);W.userAgent=W.userAgent||w,W.boltAgent=a.internal.boltAgent.fromVersion(i.default);var Ae=_.fromUrl(te.hostAndPort),X={address:Ae,typename:K?"Routing":"Direct",routing:K};return new o.Driver(X,W,je());function je(){if(K)return function(ve,ft,m,A){return new s.RoutingConnectionProvider({id:ve,config:ft,log:m,hostNameResolver:A,authTokenManager:pe,address:Ae,userAgent:ft.userAgent,boltAgent:ft.boltAgent,routingContext:te.query})};if(!y(te.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(V,"'"));return function(ve,ft,m){return new s.DirectConnectionProvider({id:ve,config:ft,log:m,authTokenManager:pe,address:Ae,userAgent:ft.userAgent,boltAgent:ft.boltAgent})}}}e.driver=T;function C(V,ie){return r(this,void 0,void 0,function(){var W;return t(this,function(te){switch(te.label){case 0:W=T(V,{scheme:"none",principal:"",credentials:""},ie),te.label=1;case 1:return te.trys.push([1,,3,5]),[4,W.getNegotiatedProtocolVersion()];case 2:return te.sent(),[2,!0];case 3:return[4,W.close()];case 4:return te.sent(),[7];case 5:return[2]}})})}e.hasReachableServer=C;var P={console:function(V){return{level:V,logger:function(ie,W){return console.log("".concat(f.Date.now()," ").concat(ie.toUpperCase()," ").concat(W))}}}};e.logging=P;var I={Node:a.Node,Relationship:a.Relationship,UnboundRelationship:a.UnboundRelationship,PathSegment:a.PathSegment,Path:a.Path,Result:a.Result,EagerResult:a.EagerResult,ResultSummary:a.ResultSummary,Record:a.Record,Point:a.Point,Date:a.Date,DateTime:a.DateTime,Duration:a.Duration,LocalDateTime:a.LocalDateTime,LocalTime:a.LocalTime,Time:a.Time,Integer:a.Integer};e.types=I;var M={READ:o.READ,WRITE:o.WRITE};e.session=M;var F={toNumber:a.toNumber,toString:a.toString,inSafeRange:a.inSafeRange};e.integer=F;var Q={isPoint:a.isPoint};e.spatial=Q;var H={isDuration:a.isDuration,isLocalTime:a.isLocalTime,isTime:a.isTime,isDate:a.isDate,isLocalDateTime:a.isLocalDateTime,isDateTime:a.isDateTime};e.temporal=H;var Z={isNode:a.isNode,isPath:a.isPath,isPathSegment:a.isPathSegment,isRelationship:a.isRelationship,isUnboundRelationship:a.isUnboundRelationship};e.graph=Z;var fe={authTokenManagers:a.authTokenManagers,driver:T,hasReachableServer:C,int:a.int,isInt:a.isInt,isPoint:a.isPoint,isDuration:a.isDuration,isLocalTime:a.isLocalTime,isTime:a.isTime,isDate:a.isDate,isLocalDateTime:a.isLocalDateTime,isDateTime:a.isDateTime,isNode:a.isNode,isPath:a.isPath,isPathSegment:a.isPathSegment,isRelationship:a.isRelationship,isUnboundRelationship:a.isUnboundRelationship,integer:F,Neo4jError:a.Neo4jError,isRetryableError:a.isRetryableError,auth:a.auth,logging:P,types:I,session:M,routing:a.routing,error:a.error,graph:Z,spatial:Q,temporal:H,Driver:o.Driver,Session:a.Session,Transaction:a.Transaction,ManagedTransaction:a.ManagedTransaction,Result:a.Result,EagerResult:a.EagerResult,RxSession:c.default,RxTransaction:u.default,RxManagedTransaction:l.default,RxResult:d.default,ResultSummary:a.ResultSummary,Plan:a.Plan,ProfiledPlan:a.ProfiledPlan,QueryStatistics:a.QueryStatistics,Notification:a.Notification,GqlStatusObject:a.GqlStatusObject,ServerInfo:a.ServerInfo,Record:a.Record,Node:a.Node,Relationship:a.Relationship,UnboundRelationship:a.UnboundRelationship,Path:a.Path,PathSegment:a.PathSegment,Point:a.Point,Integer:a.Integer,Duration:a.Duration,LocalTime:a.LocalTime,Time:a.Time,Date:a.Date,LocalDateTime:a.LocalDateTime,DateTime:a.DateTime,bookmarkManager:a.bookmarkManager,resultTransformers:a.resultTransformers,notificationCategory:a.notificationCategory,notificationSeverityLevel:a.notificationSeverityLevel,notificationFilterDisabledCategory:a.notificationFilterDisabledCategory,notificationFilterMinimumSeverityLevel:a.notificationFilterMinimumSeverityLevel,clientCertificateProviders:a.clientCertificateProviders};e.default=fe})(Kp);const t9=new Uint8Array(0);function sie(e){const r=e.match(/../g);return r!=null?new Uint8Array(r.map(t=>parseInt(t,16))):t9}function r9(e,r){if(e===r)return!0;if(e.byteLength!==r.byteLength)return!1;for(let t=0;t<e.byteLength;t++)if(e[t]!==r[t])return!1;return!0}function Ii(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function n9(e){return new TextEncoder().encode(e)}function o9(e){return new TextDecoder().decode(e)}function i9(e,r){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),a=i.charCodeAt(0);if(t[a]!==255)throw new TypeError(i+" is ambiguous");t[a]=o}var s=e.length,c=e.charAt(0),u=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function d(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var y=0,_=0,b=0,w=v.length;b!==w&&v[b]===0;)b++,y++;for(var S=(w-b)*l+1>>>0,E=new Uint8Array(S);b!==w;){for(var T=v[b],C=0,P=S-1;(T!==0||C<_)&&P!==-1;P--,C++)T+=256*E[P]>>>0,E[P]=T%s>>>0,T=T/s>>>0;if(T!==0)throw new Error("Non-zero carry");_=C,b++}for(var I=S-_;I!==S&&E[I]===0;)I++;for(var M=c.repeat(y);I<S;++I)M+=e.charAt(E[I]);return M}function h(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var y=0;if(v[y]!==" "){for(var _=0,b=0;v[y]===c;)_++,y++;for(var w=(v.length-y)*u+1>>>0,S=new Uint8Array(w);v[y];){var E=t[v.charCodeAt(y)];if(E===255)return;for(var T=0,C=w-1;(E!==0||T<b)&&C!==-1;C--,T++)E+=s*S[C]>>>0,S[C]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");b=T,y++}if(v[y]!==" "){for(var P=w-b;P!==w&&S[P]===0;)P++;for(var I=new Uint8Array(_+(w-P)),M=_;P!==w;)I[M++]=S[P++];return I}}}function p(v){var y=h(v);if(y)return y;throw new Error(`Non-${r} character`)}return{encode:d,decodeUnsafe:h,decode:p}}var a9=i9,u9=a9;let s9=class{constructor(r,t,n){g(this,"name");g(this,"prefix");g(this,"baseEncode");this.name=r,this.prefix=t,this.baseEncode=n}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}},c9=class{constructor(r,t,n){g(this,"name");g(this,"prefix");g(this,"baseDecode");g(this,"prefixCodePoint");this.name=r,this.prefix=t;const o=t.codePointAt(0);if(o===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=o,this.baseDecode=n}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return WE(this,r)}},l9=class{constructor(r){g(this,"decoders");this.decoders=r}or(r){return WE(this,r)}decode(r){const t=r[0],n=this.decoders[t];if(n!=null)return n.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function WE(e,r){return new l9({...e.decoders??{[e.prefix]:e},...r.decoders??{[r.prefix]:r}})}let f9=class{constructor(r,t,n,o){g(this,"name");g(this,"prefix");g(this,"baseEncode");g(this,"baseDecode");g(this,"encoder");g(this,"decoder");this.name=r,this.prefix=t,this.baseEncode=n,this.baseDecode=o,this.encoder=new s9(r,t,n),this.decoder=new c9(r,t,o)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}};function Od({name:e,prefix:r,encode:t,decode:n}){return new f9(e,r,t,n)}function zs({name:e,prefix:r,alphabet:t}){const{encode:n,decode:o}=u9(t,e);return Od({prefix:r,name:e,encode:n,decode:i=>Ii(o(i))})}function d9(e,r,t,n){let o=e.length;for(;e[o-1]==="=";)--o;const i=new Uint8Array(o*t/8|0);let a=0,s=0,c=0;for(let u=0;u<o;++u){const l=r[e[u]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);s=s<<t|l,a+=t,a>=8&&(a-=8,i[c++]=255&s>>a)}if(a>=t||255&s<<8-a)throw new SyntaxError("Unexpected end of data");return i}function h9(e,r,t){const n=r[r.length-1]==="=",o=(1<<t)-1;let i="",a=0,s=0;for(let c=0;c<e.length;++c)for(s=s<<8|e[c],a+=8;a>t;)a-=t,i+=r[o&s>>a];if(a!==0&&(i+=r[o&s<<t-a]),n)for(;i.length*t&7;)i+="=";return i}function p9(e){const r={};for(let t=0;t<e.length;++t)r[e[t]]=t;return r}function He({name:e,prefix:r,bitsPerChar:t,alphabet:n}){const o=p9(n);return Od({prefix:r,name:e,encode(i){return h9(i,n,t)},decode(i){return d9(i,o,t,e)}})}const v9=zs({prefix:"9",name:"base10",alphabet:"0123456789"}),_9=Object.freeze(Object.defineProperty({__proto__:null,base10:v9},Symbol.toStringTag,{value:"Module"})),y9=He({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),b9=He({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),m9=Object.freeze(Object.defineProperty({__proto__:null,base16:y9,base16upper:b9},Symbol.toStringTag,{value:"Module"})),g9=He({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),w9=Object.freeze(Object.defineProperty({__proto__:null,base2:g9},Symbol.toStringTag,{value:"Module"})),zE=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),O9=zE.reduce((e,r,t)=>(e[t]=r,e),[]),E9=zE.reduce((e,r,t)=>{const n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);return e[n]=t,e},[]);function S9(e){return e.reduce((r,t)=>(r+=O9[t],r),"")}function T9(e){const r=[];for(const t of e){const n=t.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${t}`);const o=E9[n];if(o==null)throw new Error(`Non-base256emoji character: ${t}`);r.push(o)}return new Uint8Array(r)}const P9=Od({prefix:"🚀",name:"base256emoji",encode:S9,decode:T9}),C9=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:P9},Symbol.toStringTag,{value:"Module"})),jn=He({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),A9=He({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),I9=He({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),R9=He({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),j9=He({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),$9=He({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),N9=He({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),k9=He({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),M9=He({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),D9=Object.freeze(Object.defineProperty({__proto__:null,base32:jn,base32hex:j9,base32hexpad:N9,base32hexpadupper:k9,base32hexupper:$9,base32pad:I9,base32padupper:R9,base32upper:A9,base32z:M9},Symbol.toStringTag,{value:"Module"})),jc=zs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),L9=zs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),U9=Object.freeze(Object.defineProperty({__proto__:null,base36:jc,base36upper:L9},Symbol.toStringTag,{value:"Module"})),Be=zs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),F9=zs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),B9=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Be,base58flickr:F9},Symbol.toStringTag,{value:"Module"})),Ed=He({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),x9=He({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),qs=He({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),V9=He({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),W9=Object.freeze(Object.defineProperty({__proto__:null,base64:Ed,base64pad:x9,base64url:qs,base64urlpad:V9},Symbol.toStringTag,{value:"Module"})),z9=He({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),q9=Object.freeze(Object.defineProperty({__proto__:null,base8:z9},Symbol.toStringTag,{value:"Module"})),H9=Od({prefix:"\0",name:"identity",encode:e=>o9(e),decode:e=>n9(e)}),G9=Object.freeze(Object.defineProperty({__proto__:null,identity:H9},Symbol.toStringTag,{value:"Module"})),K9=new TextEncoder,Y9=new TextDecoder,Z9="json",Q9=512;function X9(e){return K9.encode(JSON.stringify(e))}function J9(e){return JSON.parse(Y9.decode(e))}const eK=Object.freeze(Object.defineProperty({__proto__:null,code:Q9,decode:J9,encode:X9,name:Z9},Symbol.toStringTag,{value:"Module"})),tK="raw",rK=85;function nK(e){return Ii(e)}function oK(e){return Ii(e)}const iK=Object.freeze(Object.defineProperty({__proto__:null,code:rK,decode:oK,encode:nK,name:tK},Symbol.toStringTag,{value:"Module"}));var aK=qE,zg=128,uK=-128,sK=Math.pow(2,31);function qE(e,r,t){r=r||[],t=t||0;for(var n=t;e>=sK;)r[t++]=e&255|zg,e/=128;for(;e&uK;)r[t++]=e&255|zg,e>>>=7;return r[t]=e|0,qE.bytes=t-n+1,r}var cK=Mv,lK=128,qg=127;function Mv(e,n){var t=0,n=n||0,o=0,i=n,a,s=e.length;do{if(i>=s)throw Mv.bytes=0,new RangeError("Could not decode varint");a=e[i++],t+=o<28?(a&qg)<<o:(a&qg)*Math.pow(2,o),o+=7}while(a>=lK);return Mv.bytes=i-n,t}var fK=Math.pow(2,7),dK=Math.pow(2,14),hK=Math.pow(2,21),pK=Math.pow(2,28),vK=Math.pow(2,35),_K=Math.pow(2,42),yK=Math.pow(2,49),bK=Math.pow(2,56),mK=Math.pow(2,63),gK=function(e){return e<fK?1:e<dK?2:e<hK?3:e<pK?4:e<vK?5:e<_K?6:e<yK?7:e<bK?8:e<mK?9:10},wK={encode:aK,decode:cK,encodingLength:gK},Xc=wK;function Dv(e,r=0){return[Xc.decode(e,r),Xc.decode.bytes]}function Jc(e,r,t=0){return Xc.encode(e,r,t),r}function el(e){return Xc.encodingLength(e)}function Ta(e,r){const t=r.byteLength,n=el(e),o=n+el(t),i=new Uint8Array(o+t);return Jc(e,i,0),Jc(t,i,n),i.set(r,o),new vy(e,t,r,i)}function HE(e){const r=Ii(e),[t,n]=Dv(r),[o,i]=Dv(r.subarray(n)),a=r.subarray(n+i);if(a.byteLength!==o)throw new Error("Incorrect length");return new vy(t,o,a,r)}function OK(e,r){if(e===r)return!0;{const t=r;return e.code===t.code&&e.size===t.size&&t.bytes instanceof Uint8Array&&r9(e.bytes,t.bytes)}}let vy=class{constructor(r,t,n,o){g(this,"code");g(this,"size");g(this,"digest");g(this,"bytes");this.code=r,this.size=t,this.digest=n,this.bytes=o}};const GE=0,EK="identity",KE=Ii;function SK(e){return Ta(GE,KE(e))}const qr={code:GE,name:EK,encode:KE,digest:SK},TK=Object.freeze(Object.defineProperty({__proto__:null,identity:qr},Symbol.toStringTag,{value:"Module"}));function YE({name:e,code:r,encode:t}){return new PK(e,r,t)}class PK{constructor(r,t,n){g(this,"name");g(this,"code");g(this,"encode");this.name=r,this.code=t,this.encode=n}digest(r){if(r instanceof Uint8Array){const t=this.encode(r);return t instanceof Uint8Array?Ta(this.code,t):t.then(n=>Ta(this.code,n))}else throw Error("Unknown type, must be binary type")}}function ZE(e){return async r=>new Uint8Array(await crypto.subtle.digest(e,r))}const _y=YE({name:"sha2-256",code:18,encode:ZE("SHA-256")}),CK=YE({name:"sha2-512",code:19,encode:ZE("SHA-512")}),AK=Object.freeze(Object.defineProperty({__proto__:null,sha256:_y,sha512:CK},Symbol.toStringTag,{value:"Module"}));function Hg(e,r){const{bytes:t,version:n}=e;switch(n){case 0:return RK(t,Lv(e),r??Be.encoder);default:return jK(t,Lv(e),r??jn.encoder)}}const Gg=new WeakMap;function Lv(e){const r=Gg.get(e);if(r==null){const t=new Map;return Gg.set(e,t),t}return r}var B0;let G=class Ke{constructor(r,t,n,o){g(this,"code");g(this,"version");g(this,"multihash");g(this,"bytes");g(this,"/");g(this,B0,"CID");this.code=t,this.version=r,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:r,multihash:t}=this;if(r!==Yi)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==$K)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ke.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:r,digest:t}=this.multihash,n=Ta(r,t);return Ke.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(r){return Ke.equals(this,r)}static equals(r,t){const n=t;return n!=null&&r.code===n.code&&r.version===n.version&&OK(r.multihash,n.multihash)}toString(r){return Hg(this,r)}toJSON(){return{"/":Hg(this)}}link(){return this}[(B0=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(r){if(r==null)return null;const t=r;if(t instanceof Ke)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){const{version:n,code:o,multihash:i,bytes:a}=t;return new Ke(n,o,i,a??Kg(n,o,i.bytes))}else if(t[NK]===!0){const{version:n,multihash:o,code:i}=t,a=HE(o);return Ke.create(n,i,a)}else return null}static create(r,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(r){case 0:{if(t!==Yi)throw new Error(`Version 0 CID must use dag-pb (code: ${Yi}) block encoding`);return new Ke(r,t,n,n.bytes)}case 1:{const o=Kg(r,t,n.bytes);return new Ke(r,t,n,o)}default:throw new Error("Invalid version")}}static createV0(r){return Ke.create(0,Yi,r)}static createV1(r,t){return Ke.create(1,r,t)}static decode(r){const[t,n]=Ke.decodeFirst(r);if(n.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(r){const t=Ke.inspectBytes(r),n=t.size-t.multihashSize,o=Ii(r.subarray(n,n+t.multihashSize));if(o.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=o.subarray(t.multihashSize-t.digestSize),a=new vy(t.multihashCode,t.digestSize,i,o);return[t.version===0?Ke.createV0(a):Ke.createV1(t.codec,a),r.subarray(t.size)]}static inspectBytes(r){let t=0;const n=()=>{const[d,h]=Dv(r.subarray(t));return t+=h,d};let o=n(),i=Yi;if(o===18?(o=0,t=0):i=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const a=t,s=n(),c=n(),u=t+c,l=u-a;return{version:o,codec:i,multihashCode:s,digestSize:c,multihashSize:l,size:u}}static parse(r,t){const[n,o]=IK(r,t),i=Ke.decode(o);if(i.version===0&&r[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Lv(i).set(n,r),i}};function IK(e,r){switch(e[0]){case"Q":{const t=r??Be;return[Be.prefix,t.decode(`${Be.prefix}${e}`)]}case Be.prefix:{const t=r??Be;return[Be.prefix,t.decode(e)]}case jn.prefix:{const t=r??jn;return[jn.prefix,t.decode(e)]}case jc.prefix:{const t=r??jc;return[jc.prefix,t.decode(e)]}default:{if(r==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[e[0],r.decode(e)]}}}function RK(e,r,t){const{prefix:n}=t;if(n!==Be.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const o=r.get(n);if(o==null){const i=t.encode(e).slice(1);return r.set(n,i),i}else return o}function jK(e,r,t){const{prefix:n}=t,o=r.get(n);if(o==null){const i=t.encode(e);return r.set(n,i),i}else return o}const Yi=112,$K=18;function Kg(e,r,t){const n=el(e),o=n+el(r),i=new Uint8Array(o+t.byteLength);return Jc(e,i,0),Jc(r,i,n),i.set(t,o),i}const NK=Symbol.for("@ipld/js-cid/CID"),tl={...G9,...w9,...q9,..._9,...m9,...D9,...U9,...B9,...W9,...C9},kK={...AK,...TK},MK={raw:iK,json:eK};function Rr(e=0){return new Uint8Array(e)}function zn(e=0){return new Uint8Array(e)}function QE(e,r,t,n){return{name:e,prefix:r,encoder:{name:e,prefix:r,encode:t},decoder:{decode:n}}}const Yg=QE("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),jp=QE("ascii","a",e=>{let r="a";for(let t=0;t<e.length;t++)r+=String.fromCharCode(e[t]);return r},e=>{e=e.substring(1);const r=zn(e.length);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return r}),XE={utf8:Yg,"utf-8":Yg,hex:tl.base16,latin1:jp,ascii:jp,binary:jp,...tl};function Se(e,r="utf8"){const t=XE[r];if(t==null)throw new Error(`Unsupported encoding "${r}"`);return t.encoder.encode(e).substring(1)}class _t extends Error{constructor(){super(...arguments);g(this,"name","InvalidMultiaddrError")}}g(_t,"name","InvalidMultiaddrError");class xo extends Error{constructor(){super(...arguments);g(this,"name","ValidationError")}}g(xo,"name","ValidationError");var qp;let DK=(qp=class extends Error{constructor(){super(...arguments);g(this,"name","InvalidParametersError")}},g(qp,"name","InvalidParametersError"),qp);class JE extends Error{constructor(){super(...arguments);g(this,"name","UnknownProtocolError")}}g(JE,"name","UnknownProtocolError");function Hr(e,r){if(e===r)return!0;if(e.byteLength!==r.byteLength)return!1;for(let t=0;t<e.byteLength;t++)if(e[t]!==r[t])return!1;return!0}function bt(e,r="utf8"){const t=XE[r];if(t==null)throw new Error(`Unsupported encoding "${r}"`);return t.decoder.decode(`${t.prefix}${e}`)}const LK=Math.pow(2,7),UK=Math.pow(2,14),FK=Math.pow(2,21),yy=Math.pow(2,28),by=Math.pow(2,35),my=Math.pow(2,42),gy=Math.pow(2,49),be=128,Qe=127;function qn(e){if(e<LK)return 1;if(e<UK)return 2;if(e<FK)return 3;if(e<yy)return 4;if(e<by)return 5;if(e<my)return 6;if(e<gy)return 7;if(Number.MAX_SAFE_INTEGER!=null&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function Uv(e,r,t=0){switch(qn(e)){case 8:r[t++]=e&255|be,e/=128;case 7:r[t++]=e&255|be,e/=128;case 6:r[t++]=e&255|be,e/=128;case 5:r[t++]=e&255|be,e/=128;case 4:r[t++]=e&255|be,e>>>=7;case 3:r[t++]=e&255|be,e>>>=7;case 2:r[t++]=e&255|be,e>>>=7;case 1:{r[t++]=e&255,e>>>=7;break}default:throw new Error("unreachable")}return r}function eS(e,r){let t=e[r],n=0;if(n+=t&Qe,t<be||(t=e[r+1],n+=(t&Qe)<<7,t<be)||(t=e[r+2],n+=(t&Qe)<<14,t<be)||(t=e[r+3],n+=(t&Qe)<<21,t<be)||(t=e[r+4],n+=(t&Qe)*yy,t<be)||(t=e[r+5],n+=(t&Qe)*by,t<be)||(t=e[r+6],n+=(t&Qe)*my,t<be)||(t=e[r+7],n+=(t&Qe)*gy,t<be))return n;throw new RangeError("Could not decode varint")}function BK(e,r){let t=e.get(r),n=0;if(n+=t&Qe,t<be||(t=e.get(r+1),n+=(t&Qe)<<7,t<be)||(t=e.get(r+2),n+=(t&Qe)<<14,t<be)||(t=e.get(r+3),n+=(t&Qe)<<21,t<be)||(t=e.get(r+4),n+=(t&Qe)*yy,t<be)||(t=e.get(r+5),n+=(t&Qe)*by,t<be)||(t=e.get(r+6),n+=(t&Qe)*my,t<be)||(t=e.get(r+7),n+=(t&Qe)*gy,t<be))return n;throw new RangeError("Could not decode varint")}function tS(e,r=0){return e instanceof Uint8Array?eS(e,r):BK(e,r)}function Pa(e,r){r==null&&(r=e.reduce((o,i)=>o+i.length,0));const t=zn(r);let n=0;for(const o of e)t.set(o,n),n+=o.length;return t}class xK{constructor(){g(this,"index",0);g(this,"input","")}new(r){return this.index=0,this.input=r,this}readAtomically(r){const t=this.index,n=r();return n===void 0&&(this.index=t),n}parseWith(r){const t=r();if(this.index===this.input.length)return t}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(r){return this.readAtomically(()=>{const t=this.readChar();if(t===r)return t})}readSeparator(r,t,n){return this.readAtomically(()=>{if(!(t>0&&this.readGivenChar(r)===void 0))return n()})}readNumber(r,t,n,o){return this.readAtomically(()=>{let i=0,a=0;const s=this.peekChar();if(s===void 0)return;const c=s==="0",u=2**(8*o)-1;for(;;){const l=this.readAtomically(()=>{const d=this.readChar();if(d===void 0)return;const h=Number.parseInt(d,r);if(!Number.isNaN(h))return h});if(l===void 0)break;if(i*=r,i+=l,i>u||(a+=1,t!==void 0&&a>t))return}if(a!==0)return!n&&c&&a>1?void 0:i})}readIPv4Addr(){return this.readAtomically(()=>{const r=new Uint8Array(4);for(let t=0;t<r.length;t++){const n=this.readSeparator(".",t,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;r[t]=n}return r})}readIPv6Addr(){const r=t=>{for(let n=0;n<t.length/2;n++){const o=n*2;if(n<t.length-3){const a=this.readSeparator(":",n,()=>this.readIPv4Addr());if(a!==void 0)return t[o]=a[0],t[o+1]=a[1],t[o+2]=a[2],t[o+3]=a[3],[o+4,!0]}const i=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(i===void 0)return[o,!1];t[o]=i>>8,t[o+1]=i&255}return[t.length,!1]};return this.readAtomically(()=>{const t=new Uint8Array(16),[n,o]=r(t);if(n===16)return t;if(o||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const i=new Uint8Array(14),a=16-(n+2),[s]=r(i.subarray(0,a));return t.set(i.subarray(0,s),16-s),t})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const VK=45,WK=15,rl=new xK;function zK(e){if(!(e.length>WK))return rl.new(e).parseWith(()=>rl.readIPv4Addr())}function qK(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>VK))return rl.new(e).parseWith(()=>rl.readIPv6Addr())}function rS(e){return!!zK(e)}function HK(e){return!!qK(e)}const Fv=4,nl=6,Bv=273,GK=33,pa=41,nS=42,KK=43,wy=53,Oy=54,Sd=55,Ey=56,YK=132,ZK=301,QK=302,XK=400,oS=421,JK=444,eY=445,tY=446,rY=447,iS=448,nY=449,oY=454,iY=460,aY=461,uY=465,sY=466,cY=480,lY=481,fY=443,dY=477,hY=478,pY=479,vY=277,_Y=275,yY=276,bY=280,mY=281,aS=290,gY=777;function Zg(e){return r=>Se(r,e)}function Qg(e){return r=>bt(r,e)}function oa(e){return new DataView(e.buffer).getUint16(e.byteOffset).toString()}function So(e){const r=new ArrayBuffer(2);return new DataView(r).setUint16(0,typeof e=="string"?parseInt(e):e),new Uint8Array(r)}function wY(e){const r=e.split(":");if(r.length!==2)throw new Error(`failed to parse onion addr: ["'${r.join('", "')}'"]' does not contain a port number`);if(r[0].length!==16)throw new Error(`failed to parse onion addr: ${r[0]} not a Tor onion address.`);const t=bt(r[0],"base32"),n=parseInt(r[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const o=So(n);return Pa([t,o],t.length+o.length)}function OY(e){const r=e.split(":");if(r.length!==2)throw new Error(`failed to parse onion addr: ["'${r.join('", "')}'"]' does not contain a port number`);if(r[0].length!==56)throw new Error(`failed to parse onion addr: ${r[0]} not a Tor onion3 address.`);const t=jn.decode(`b${r[0]}`),n=parseInt(r[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const o=So(n);return Pa([t,o],t.length+o.length)}function Xg(e){const r=e.subarray(0,e.length-2),t=e.subarray(e.length-2),n=Se(r,"base32"),o=oa(t);return`${n}:${o}`}const uS=function(e){e=e.toString().trim();const r=new Uint8Array(4);return e.split(/\./g).forEach((t,n)=>{const o=parseInt(t,10);if(isNaN(o)||o<0||o>255)throw new _t("Invalid byte value in IP address");r[n]=o}),r},EY=function(e){let r=0;e=e.toString().trim();const t=e.split(":",8);let n;for(n=0;n<t.length;n++){const i=rS(t[n]);let a;i&&(a=uS(t[n]),t[n]=Se(a.subarray(0,2),"base16")),a!=null&&++n<8&&t.splice(n,0,Se(a.subarray(2,4),"base16"))}if(t[0]==="")for(;t.length<8;)t.unshift("0");else if(t[t.length-1]==="")for(;t.length<8;)t.push("0");else if(t.length<8){for(n=0;n<t.length&&t[n]!=="";n++);const i=[n,1];for(n=9-t.length;n>0;n--)i.push("0");t.splice.apply(t,i)}const o=new Uint8Array(r+16);for(n=0;n<t.length;n++){t[n]===""&&(t[n]="0");const i=parseInt(t[n],16);if(isNaN(i)||i<0||i>65535)throw new _t("Invalid byte value in IP address");o[r++]=i>>8&255,o[r++]=i&255}return o},SY=function(e){if(e.byteLength!==4)throw new _t("IPv4 address was incorrect length");const r=[];for(let t=0;t<e.byteLength;t++)r.push(e[t]);return r.join(".")},TY=function(e){if(e.byteLength!==16)throw new _t("IPv6 address was incorrect length");const r=[];for(let n=0;n<e.byteLength;n+=2){const o=e[n],i=e[n+1],a=`${o.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}`;r.push(a)}const t=r.join(":");try{const n=new URL(`http://[${t}]`);return n.hostname.substring(1,n.hostname.length-1)}catch{throw new _t(`Invalid IPv6 address "${t}"`)}};function PY(e){try{const r=new URL(`http://[${e}]`);return r.hostname.substring(1,r.hostname.length-1)}catch{throw new _t(`Invalid IPv6 address "${e}"`)}}const $p=Object.values(tl).map(e=>e.decoder),CY=function(){let e=$p[0].or($p[1]);return $p.slice(2).forEach(r=>e=e.or(r)),e}();function AY(e){return CY.decode(e)}function IY(e){return r=>e.encoder.encode(r)}function RY(e){if(parseInt(e).toString()!==e)throw new xo("Value must be an integer")}function jY(e){if(e<0)throw new xo("Value must be a positive integer, or zero")}function $Y(e){return r=>{if(r>e)throw new xo(`Value must be smaller than or equal to ${e}`)}}function NY(...e){return r=>{for(const t of e)t(r)}}const yc=NY(RY,jY,$Y(65535)),Ye=-1;class kY{constructor(){g(this,"protocolsByCode",new Map);g(this,"protocolsByName",new Map)}getProtocol(r){let t;if(typeof r=="string"?t=this.protocolsByName.get(r):t=this.protocolsByCode.get(r),t==null)throw new JE(`Protocol ${r} was unknown`);return t}addProtocol(r){var t;this.protocolsByCode.set(r.code,r),this.protocolsByName.set(r.name,r),(t=r.aliases)==null||t.forEach(n=>{this.protocolsByName.set(n,r)})}removeProtocol(r){var n;const t=this.protocolsByCode.get(r);t!=null&&(this.protocolsByCode.delete(t.code),this.protocolsByName.delete(t.name),(n=t.aliases)==null||n.forEach(o=>{this.protocolsByName.delete(o)}))}}const yr=new kY,MY=[{code:Fv,name:"ip4",size:32,valueToBytes:uS,bytesToValue:SY,validate:e=>{if(!rS(e))throw new xo(`Invalid IPv4 address "${e}"`)}},{code:nl,name:"tcp",size:16,valueToBytes:So,bytesToValue:oa,validate:yc},{code:Bv,name:"udp",size:16,valueToBytes:So,bytesToValue:oa,validate:yc},{code:GK,name:"dccp",size:16,valueToBytes:So,bytesToValue:oa,validate:yc},{code:pa,name:"ip6",size:128,valueToBytes:EY,bytesToValue:TY,stringToValue:PY,validate:e=>{if(!HK(e))throw new xo(`Invalid IPv6 address "${e}"`)}},{code:nS,name:"ip6zone",size:Ye},{code:KK,name:"ipcidr",size:8,bytesToValue:Zg("base10"),valueToBytes:Qg("base10")},{code:wy,name:"dns",size:Ye,resolvable:!0},{code:Oy,name:"dns4",size:Ye,resolvable:!0},{code:Sd,name:"dns6",size:Ye,resolvable:!0},{code:Ey,name:"dnsaddr",size:Ye,resolvable:!0},{code:YK,name:"sctp",size:16,valueToBytes:So,bytesToValue:oa,validate:yc},{code:ZK,name:"udt"},{code:QK,name:"utp"},{code:XK,name:"unix",size:Ye,path:!0,stringToValue:e=>decodeURIComponent(e),valueToString:e=>encodeURIComponent(e)},{code:oS,name:"p2p",aliases:["ipfs"],size:Ye,bytesToValue:Zg("base58btc"),valueToBytes:e=>e.startsWith("Q")||e.startsWith("1")?Qg("base58btc")(e):G.parse(e).multihash.bytes},{code:JK,name:"onion",size:96,bytesToValue:Xg,valueToBytes:wY},{code:eY,name:"onion3",size:296,bytesToValue:Xg,valueToBytes:OY},{code:tY,name:"garlic64",size:Ye},{code:rY,name:"garlic32",size:Ye},{code:iS,name:"tls"},{code:nY,name:"sni",size:Ye},{code:oY,name:"noise"},{code:iY,name:"quic"},{code:aY,name:"quic-v1"},{code:uY,name:"webtransport"},{code:sY,name:"certhash",size:Ye,bytesToValue:IY(qs),valueToBytes:AY},{code:cY,name:"http"},{code:lY,name:"http-path",size:Ye,stringToValue:e=>`/${decodeURIComponent(e)}`,valueToString:e=>encodeURIComponent(e.substring(1))},{code:fY,name:"https"},{code:dY,name:"ws"},{code:hY,name:"wss"},{code:pY,name:"p2p-websocket-star"},{code:vY,name:"p2p-stardust"},{code:_Y,name:"p2p-webrtc-star"},{code:yY,name:"p2p-webrtc-direct"},{code:bY,name:"webrtc-direct"},{code:mY,name:"webrtc"},{code:aS,name:"p2p-circuit"},{code:gY,name:"memory",size:Ye}];MY.forEach(e=>{yr.addProtocol(e)});function DY(e){var n;const r=[];let t=0;for(;t<e.length;){const o=tS(e,t),i=yr.getProtocol(o),a=qn(o),s=BY(i,e,t+a);let c=0;s>0&&i.size===Ye&&(c=qn(s));const u=a+c+s,l={code:o,name:i.name,bytes:e.subarray(t,t+u)};if(s>0){const d=t+a+c,h=e.subarray(d,d+s);l.value=((n=i.bytesToValue)==null?void 0:n.call(i,h))??Se(h)}r.push(l),t+=u}return r}function LY(e){var n;let r=0;const t=[];for(const o of e){if(o.bytes==null){const i=yr.getProtocol(o.code),a=qn(o.code);let s,c=0,u=0;o.value!=null&&(s=((n=i.valueToBytes)==null?void 0:n.call(i,o.value))??bt(o.value),c=s.byteLength,i.size===Ye&&(u=qn(c)));const l=new Uint8Array(a+u+c);let d=0;Uv(o.code,l,d),d+=a,s!=null&&(i.size===Ye&&(Uv(c,l,d),d+=u),l.set(s,d)),o.bytes=l}t.push(o.bytes),r+=o.bytes.byteLength}return Pa(t,r)}function UY(e){var i;if(e.charAt(0)!=="/")throw new _t('String multiaddr must start with "/"');const r=[];let t="protocol",n="",o="";for(let a=1;a<e.length;a++){const s=e.charAt(a);s!=="/"&&(t==="protocol"?o+=e.charAt(a):n+=e.charAt(a));const c=a===e.length-1;if(s==="/"||c){const u=yr.getProtocol(o);if(t==="protocol"){if(u.size==null||u.size===0){r.push({code:u.code,name:u.name}),n="",o="",t="protocol";continue}else if(c)throw new _t(`Component ${o} was missing value`);t="value"}else if(t==="value"){const l={code:u.code,name:u.name};if(u.size!=null&&u.size!==0){if(n==="")throw new _t(`Component ${o} was missing value`);l.value=((i=u.stringToValue)==null?void 0:i.call(u,n))??n}r.push(l),n="",o="",t="protocol"}}}if(o!==""&&n!=="")throw new _t("Incomplete multiaddr");return r}function FY(e){return`/${e.flatMap(r=>{var n;if(r.value==null)return r.name;const t=yr.getProtocol(r.code);if(t==null)throw new _t(`Unknown protocol code ${r.code}`);return[r.name,((n=t.valueToString)==null?void 0:n.call(t,r.value))??r.value]}).join("/")}`}function BY(e,r,t){return e.size==null||e.size===0?0:e.size>0?e.size/8:tS(r,t)}const xY=Symbol.for("nodejs.util.inspect.custom"),sS=Symbol.for("@multiformats/multiaddr"),VY=[wy,Oy,Sd,Ey];class WY extends Error{constructor(r="No available resolver"){super(r),this.name="NoAvailableResolverError"}}function zY(e){if(e==null&&(e="/"),ol(e))return e.getComponents();if(e instanceof Uint8Array)return DY(e);if(typeof e=="string")return e=e.replace(/\/(\/)+/,"/").replace(/(\/)+$/,""),e===""&&(e="/"),UY(e);if(Array.isArray(e))return e;throw new _t("Must be a string, Uint8Array, Component[], or another Multiaddr")}var x0,ye,jo,$o;const To=class To{constructor(r="/",t={}){g(this,x0,!0);Ys(this,ye);Ys(this,jo);Ys(this,$o);Zs(this,ye,zY(r)),t.validate!==!1&&qY(this)}get bytes(){return _e(this,$o)==null&&Zs(this,$o,LY(_e(this,ye))),_e(this,$o)}toString(){return _e(this,jo)==null&&Zs(this,jo,FY(_e(this,ye))),_e(this,jo)}toJSON(){return this.toString()}toOptions(){let r,t,n,o,i="";for(const{code:s,name:c,value:u}of _e(this,ye))s===nS&&(i=`%${u??""}`),VY.includes(s)&&(t="tcp",o=443,n=`${u??""}${i}`,r=s===Sd?6:4),(s===nl||s===Bv)&&(t=c==="tcp"?"tcp":"udp",o=parseInt(u??"")),(s===Fv||s===pa)&&(t="tcp",n=`${u??""}${i}`,r=s===pa?6:4);if(r==null||t==null||n==null||o==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:r,host:n,transport:t,port:o}}getComponents(){return[..._e(this,ye)]}protos(){return _e(this,ye).map(({code:r,value:t})=>{const n=yr.getProtocol(r);return{code:r,size:n.size??0,name:n.name,resolvable:!!n.resolvable,path:!!n.path}})}protoCodes(){return _e(this,ye).map(({code:r})=>r)}protoNames(){return _e(this,ye).map(({name:r})=>r)}tuples(){return _e(this,ye).map(({code:r,value:t})=>{var i;if(t==null)return[r];const n=yr.getProtocol(r),o=[r];return t!=null&&o.push(((i=n.valueToBytes)==null?void 0:i.call(n,t))??bt(t)),o})}stringTuples(){return _e(this,ye).map(({code:r,value:t})=>t==null?[r]:[r,t])}encapsulate(r){const t=new To(r);return new To([..._e(this,ye),...t.getComponents()],{validate:!1})}decapsulate(r){const t=r.toString(),n=this.toString(),o=n.lastIndexOf(t);if(o<0)throw new DK(`Address ${this.toString()} does not contain subaddress: ${r.toString()}`);return new To(n.slice(0,o),{validate:!1})}decapsulateCode(r){let t;for(let n=_e(this,ye).length-1;n>-1;n--)if(_e(this,ye)[n].code===r){t=n;break}return new To(_e(this,ye).slice(0,t),{validate:!1})}getPeerId(){try{let r=[];_e(this,ye).forEach(({code:n,value:o})=>{n===oS&&r.push([n,o]),n===aS&&(r=[])});const t=r.pop();if((t==null?void 0:t[1])!=null){const n=t[1];return n[0]==="Q"||n[0]==="1"?Se(Be.decode(`z${n}`),"base58btc"):Se(G.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){for(const r of _e(this,ye))if(yr.getProtocol(r.code).path)return r.value??null;return null}equals(r){return Hr(this.bytes,r.bytes)}async resolve(r){const t=this.protos().find(i=>i.resolvable);if(t==null)return[this];const n=HY.get(t.name);if(n==null)throw new WY(`no available resolver for ${t.name}`);return(await n(this,r)).map(i=>ct(i))}nodeAddress(){const r=this.toOptions();if(r.transport!=="tcp"&&r.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${r.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:r.family,address:r.host,port:r.port}}isThinWaistAddress(){return!(_e(this,ye).length!==2||_e(this,ye)[0].code!==Fv&&_e(this,ye)[0].code!==pa||_e(this,ye)[1].code!==nl&&_e(this,ye)[1].code!==Bv)}[(x0=sS,xY)](){return`Multiaddr(${this.toString()})`}};ye=new WeakMap,jo=new WeakMap,$o=new WeakMap;let xv=To;function qY(e){e.getComponents().forEach(r=>{var n;const t=yr.getProtocol(r.code);r.value!=null&&((n=t.validate)==null||n.call(t,r.value))})}const HY=new Map;function ol(e){return!!(e!=null&&e[sS])}function ct(e){return new xv(e)}const GY=["string","number","bigint","symbol"],KY=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function YY(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";const r=typeof e;if(GY.includes(r))return r;if(r==="function")return"Function";if(Array.isArray(e))return"Array";if(ZY(e))return"Buffer";const t=QY(e);return t||"Object"}function ZY(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function QY(e){const r=Object.prototype.toString.call(e).slice(8,-1);if(KY.includes(r))return r}class O{constructor(r,t,n){this.major=r,this.majorEncoded=r<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(r){return this.major<r.major?-1:this.major>r.major?1:0}}O.uint=new O(0,"uint",!0);O.negint=new O(1,"negint",!0);O.bytes=new O(2,"bytes",!0);O.string=new O(3,"string",!0);O.array=new O(4,"array",!1);O.map=new O(5,"map",!1);O.tag=new O(6,"tag",!1);O.float=new O(7,"float",!0);O.false=new O(7,"false",!0);O.true=new O(7,"true",!0);O.null=new O(7,"null",!0);O.undefined=new O(7,"undefined",!0);O.break=new O(7,"break",!0);class j{constructor(r,t,n){this.type=r,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const Ri=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",XY=new TextDecoder,JY=new TextEncoder;function il(e){return Ri&&globalThis.Buffer.isBuffer(e)}function Sy(e){return e instanceof Uint8Array?il(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const eZ=Ri?(e,r,t)=>t-r>64?globalThis.Buffer.from(e.subarray(r,t)).toString("utf8"):e0(e,r,t):(e,r,t)=>t-r>64?XY.decode(e.subarray(r,t)):e0(e,r,t),cS=Ri?e=>e.length>64?globalThis.Buffer.from(e):Jg(e):e=>e.length>64?JY.encode(e):Jg(e),ar=e=>Uint8Array.from(e),Ty=Ri?(e,r,t)=>il(e)?new Uint8Array(e.subarray(r,t)):e.slice(r,t):(e,r,t)=>e.slice(r,t),tZ=Ri?(e,r)=>(e=e.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),Sy(globalThis.Buffer.concat(e,r))):(e,r)=>{const t=new Uint8Array(r);let n=0;for(let o of e)n+o.length>t.length&&(o=o.subarray(0,t.length-n)),t.set(o,n),n+=o.length;return t},rZ=Ri?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function nZ(e,r){if(il(e)&&il(r))return e.compare(r);for(let t=0;t<e.length;t++)if(e[t]!==r[t])return e[t]<r[t]?-1:1;return 0}function Jg(e){const r=[];let t=0;for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);o<128?r[t++]=o:o<2048?(r[t++]=o>>6|192,r[t++]=o&63|128):(o&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++n)&1023),r[t++]=o>>18|240,r[t++]=o>>12&63|128,r[t++]=o>>6&63|128,r[t++]=o&63|128):(r[t++]=o>>12|224,r[t++]=o>>6&63|128,r[t++]=o&63|128)}return r}function e0(e,r,t){const n=[];for(;r<t;){const o=e[r];let i=null,a=o>239?4:o>223?3:o>191?2:1;if(r+a<=t){let s,c,u,l;switch(a){case 1:o<128&&(i=o);break;case 2:s=e[r+1],(s&192)===128&&(l=(o&31)<<6|s&63,l>127&&(i=l));break;case 3:s=e[r+1],c=e[r+2],(s&192)===128&&(c&192)===128&&(l=(o&15)<<12|(s&63)<<6|c&63,l>2047&&(l<55296||l>57343)&&(i=l));break;case 4:s=e[r+1],c=e[r+2],u=e[r+3],(s&192)===128&&(c&192)===128&&(u&192)===128&&(l=(o&15)<<18|(s&63)<<12|(c&63)<<6|u&63,l>65535&&l<1114112&&(i=l))}}i===null?(i=65533,a=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|i&1023),n.push(i),r+=a}return lS(n)}const t0=4096;function lS(e){const r=e.length;if(r<=t0)return String.fromCharCode.apply(String,e);let t="",n=0;for(;n<r;)t+=String.fromCharCode.apply(String,e.slice(n,n+=t0));return t}const oZ=256;class fS{constructor(r=oZ){this.chunkSize=r,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(r){let t=this.chunks[this.chunks.length-1];if(this.cursor+r.length<=this.maxCursor+1){const o=t.length-(this.maxCursor-this.cursor)-1;t.set(r,o)}else{if(t){const o=t.length-(this.maxCursor-this.cursor)-1;o<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,o),this.maxCursor=this.cursor-1)}r.length<64&&r.length<this.chunkSize?(t=rZ(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(r,0)):(this.chunks.push(r),this.maxCursor+=r.length)}this.cursor+=r.length}toBytes(r=!1){let t;if(this.chunks.length===1){const n=this.chunks[0];r&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=Ty(n,0,this.cursor)}else t=tZ(this.chunks,this.cursor);return r&&this.reset(),t}}const z="CBOR decode error:",$n="CBOR encode error:";function ji(e,r,t){if(e.length-r<t)throw new Error(`${z} not enough data for type`)}const Ve=[24,256,65536,4294967296,BigInt("18446744073709551616")];function io(e,r,t){ji(e,r,1);const n=e[r];if(t.strict===!0&&n<Ve[0])throw new Error(`${z} integer encoded in more bytes than necessary (strict decode)`);return n}function ao(e,r,t){ji(e,r,2);const n=e[r]<<8|e[r+1];if(t.strict===!0&&n<Ve[1])throw new Error(`${z} integer encoded in more bytes than necessary (strict decode)`);return n}function uo(e,r,t){ji(e,r,4);const n=e[r]*16777216+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3];if(t.strict===!0&&n<Ve[2])throw new Error(`${z} integer encoded in more bytes than necessary (strict decode)`);return n}function so(e,r,t){ji(e,r,8);const n=e[r]*16777216+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3],o=e[r+4]*16777216+(e[r+5]<<16)+(e[r+6]<<8)+e[r+7],i=(BigInt(n)<<BigInt(32))+BigInt(o);if(t.strict===!0&&i<Ve[3])throw new Error(`${z} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(t.allowBigInt===!0)return i;throw new Error(`${z} integers outside of the safe integer range are not supported`)}function iZ(e,r,t,n){return new j(O.uint,io(e,r+1,n),2)}function aZ(e,r,t,n){return new j(O.uint,ao(e,r+1,n),3)}function uZ(e,r,t,n){return new j(O.uint,uo(e,r+1,n),5)}function sZ(e,r,t,n){return new j(O.uint,so(e,r+1,n),9)}function co(e,r){return Ct(e,0,r.value)}function Ct(e,r,t){if(t<Ve[0]){const n=Number(t);e.push([r|n])}else if(t<Ve[1]){const n=Number(t);e.push([r|24,n])}else if(t<Ve[2]){const n=Number(t);e.push([r|25,n>>>8,n&255])}else if(t<Ve[3]){const n=Number(t);e.push([r|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{const n=BigInt(t);if(n<Ve[4]){const o=[r|27,0,0,0,0,0,0,0];let i=Number(n&BigInt(4294967295)),a=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=i&255,i=i>>8,o[7]=i&255,i=i>>8,o[6]=i&255,i=i>>8,o[5]=i&255,o[4]=a&255,a=a>>8,o[3]=a&255,a=a>>8,o[2]=a&255,a=a>>8,o[1]=a&255,e.push(o)}else throw new Error(`${z} encountered BigInt larger than allowable range`)}}co.encodedSize=function(r){return Ct.encodedSize(r.value)};Ct.encodedSize=function(r){return r<Ve[0]?1:r<Ve[1]?2:r<Ve[2]?3:r<Ve[3]?5:9};co.compareTokens=function(r,t){return r.value<t.value?-1:r.value>t.value?1:0};function cZ(e,r,t,n){return new j(O.negint,-1-io(e,r+1,n),2)}function lZ(e,r,t,n){return new j(O.negint,-1-ao(e,r+1,n),3)}function fZ(e,r,t,n){return new j(O.negint,-1-uo(e,r+1,n),5)}const Py=BigInt(-1),dS=BigInt(1);function dZ(e,r,t,n){const o=so(e,r+1,n);if(typeof o!="bigint"){const i=-1-o;if(i>=Number.MIN_SAFE_INTEGER)return new j(O.negint,i,9)}if(n.allowBigInt!==!0)throw new Error(`${z} integers outside of the safe integer range are not supported`);return new j(O.negint,Py-BigInt(o),9)}function Cy(e,r){const t=r.value,n=typeof t=="bigint"?t*Py-dS:t*-1-1;Ct(e,r.type.majorEncoded,n)}Cy.encodedSize=function(r){const t=r.value,n=typeof t=="bigint"?t*Py-dS:t*-1-1;return n<Ve[0]?1:n<Ve[1]?2:n<Ve[2]?3:n<Ve[3]?5:9};Cy.compareTokens=function(r,t){return r.value<t.value?1:r.value>t.value?-1:0};function Hs(e,r,t,n){ji(e,r,t+n);const o=Ty(e,r+t,r+t+n);return new j(O.bytes,o,t+n)}function hZ(e,r,t,n){return Hs(e,r,1,t)}function pZ(e,r,t,n){return Hs(e,r,2,io(e,r+1,n))}function vZ(e,r,t,n){return Hs(e,r,3,ao(e,r+1,n))}function _Z(e,r,t,n){return Hs(e,r,5,uo(e,r+1,n))}function yZ(e,r,t,n){const o=so(e,r+1,n);if(typeof o=="bigint")throw new Error(`${z} 64-bit integer bytes lengths not supported`);return Hs(e,r,9,o)}function al(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===O.string?cS(e.value):e.value),e.encodedBytes}function Td(e,r){const t=al(r);Ct(e,r.type.majorEncoded,t.length),e.push(t)}Td.encodedSize=function(r){const t=al(r);return Ct.encodedSize(t.length)+t.length};Td.compareTokens=function(r,t){return bZ(al(r),al(t))};function bZ(e,r){return e.length<r.length?-1:e.length>r.length?1:nZ(e,r)}function Gs(e,r,t,n,o){const i=t+n;ji(e,r,i);const a=new j(O.string,eZ(e,r+t,r+i),i);return o.retainStringBytes===!0&&(a.byteValue=Ty(e,r+t,r+i)),a}function mZ(e,r,t,n){return Gs(e,r,1,t,n)}function gZ(e,r,t,n){return Gs(e,r,2,io(e,r+1,n),n)}function wZ(e,r,t,n){return Gs(e,r,3,ao(e,r+1,n),n)}function OZ(e,r,t,n){return Gs(e,r,5,uo(e,r+1,n),n)}function EZ(e,r,t,n){const o=so(e,r+1,n);if(typeof o=="bigint")throw new Error(`${z} 64-bit integer string lengths not supported`);return Gs(e,r,9,o,n)}const SZ=Td;function $i(e,r,t,n){return new j(O.array,n,t)}function TZ(e,r,t,n){return $i(e,r,1,t)}function PZ(e,r,t,n){return $i(e,r,2,io(e,r+1,n))}function CZ(e,r,t,n){return $i(e,r,3,ao(e,r+1,n))}function AZ(e,r,t,n){return $i(e,r,5,uo(e,r+1,n))}function IZ(e,r,t,n){const o=so(e,r+1,n);if(typeof o=="bigint")throw new Error(`${z} 64-bit integer array lengths not supported`);return $i(e,r,9,o)}function RZ(e,r,t,n){if(n.allowIndefinite===!1)throw new Error(`${z} indefinite length items not allowed`);return $i(e,r,1,1/0)}function Ay(e,r){Ct(e,O.array.majorEncoded,r.value)}Ay.compareTokens=co.compareTokens;Ay.encodedSize=function(r){return Ct.encodedSize(r.value)};function Ni(e,r,t,n){return new j(O.map,n,t)}function jZ(e,r,t,n){return Ni(e,r,1,t)}function $Z(e,r,t,n){return Ni(e,r,2,io(e,r+1,n))}function NZ(e,r,t,n){return Ni(e,r,3,ao(e,r+1,n))}function kZ(e,r,t,n){return Ni(e,r,5,uo(e,r+1,n))}function MZ(e,r,t,n){const o=so(e,r+1,n);if(typeof o=="bigint")throw new Error(`${z} 64-bit integer map lengths not supported`);return Ni(e,r,9,o)}function DZ(e,r,t,n){if(n.allowIndefinite===!1)throw new Error(`${z} indefinite length items not allowed`);return Ni(e,r,1,1/0)}function Iy(e,r){Ct(e,O.map.majorEncoded,r.value)}Iy.compareTokens=co.compareTokens;Iy.encodedSize=function(r){return Ct.encodedSize(r.value)};function LZ(e,r,t,n){return new j(O.tag,t,1)}function UZ(e,r,t,n){return new j(O.tag,io(e,r+1,n),2)}function FZ(e,r,t,n){return new j(O.tag,ao(e,r+1,n),3)}function BZ(e,r,t,n){return new j(O.tag,uo(e,r+1,n),5)}function xZ(e,r,t,n){return new j(O.tag,so(e,r+1,n),9)}function Ry(e,r){Ct(e,O.tag.majorEncoded,r.value)}Ry.compareTokens=co.compareTokens;Ry.encodedSize=function(r){return Ct.encodedSize(r.value)};const VZ=20,WZ=21,zZ=22,qZ=23;function HZ(e,r,t,n){if(n.allowUndefined===!1)throw new Error(`${z} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new j(O.null,null,1):new j(O.undefined,void 0,1)}function GZ(e,r,t,n){if(n.allowIndefinite===!1)throw new Error(`${z} indefinite length items not allowed`);return new j(O.break,void 0,1)}function jy(e,r,t){if(t){if(t.allowNaN===!1&&Number.isNaN(e))throw new Error(`${z} NaN values are not supported`);if(t.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${z} Infinity values are not supported`)}return new j(O.float,e,r)}function KZ(e,r,t,n){return jy(Ny(e,r+1),3,n)}function YZ(e,r,t,n){return jy(ky(e,r+1),5,n)}function ZZ(e,r,t,n){return jy(_S(e,r+1),9,n)}function $y(e,r,t){const n=r.value;if(n===!1)e.push([O.float.majorEncoded|VZ]);else if(n===!0)e.push([O.float.majorEncoded|WZ]);else if(n===null)e.push([O.float.majorEncoded|zZ]);else if(n===void 0)e.push([O.float.majorEncoded|qZ]);else{let o,i=!1;(!t||t.float64!==!0)&&(pS(n),o=Ny(Mt,1),n===o||Number.isNaN(n)?(Mt[0]=249,e.push(Mt.slice(0,3)),i=!0):(vS(n),o=ky(Mt,1),n===o&&(Mt[0]=250,e.push(Mt.slice(0,5)),i=!0))),i||(QZ(n),o=_S(Mt,1),Mt[0]=251,e.push(Mt.slice(0,9)))}}$y.encodedSize=function(r,t){const n=r.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){pS(n);let o=Ny(Mt,1);if(n===o||Number.isNaN(n))return 3;if(vS(n),o=ky(Mt,1),n===o)return 5}return 9};const hS=new ArrayBuffer(9),Ot=new DataView(hS,1),Mt=new Uint8Array(hS,0);function pS(e){if(e===1/0)Ot.setUint16(0,31744,!1);else if(e===-1/0)Ot.setUint16(0,64512,!1);else if(Number.isNaN(e))Ot.setUint16(0,32256,!1);else{Ot.setFloat32(0,e);const r=Ot.getUint32(0),t=(r&2139095040)>>23,n=r&8388607;if(t===255)Ot.setUint16(0,31744,!1);else if(t===0)Ot.setUint16(0,(e&2147483648)>>16|n>>13,!1);else{const o=t-127;o<-24?Ot.setUint16(0,0):o<-14?Ot.setUint16(0,(r&2147483648)>>16|1<<24+o,!1):Ot.setUint16(0,(r&2147483648)>>16|o+15<<10|n>>13,!1)}}}function Ny(e,r){if(e.length-r<2)throw new Error(`${z} not enough data for float16`);const t=(e[r]<<8)+e[r+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;const n=t>>10&31,o=t&1023;let i;return n===0?i=o*2**-24:n!==31?i=(o+1024)*2**(n-25):i=o===0?1/0:NaN,t&32768?-i:i}function vS(e){Ot.setFloat32(0,e,!1)}function ky(e,r){if(e.length-r<4)throw new Error(`${z} not enough data for float32`);const t=(e.byteOffset||0)+r;return new DataView(e.buffer,t,4).getFloat32(0,!1)}function QZ(e){Ot.setFloat64(0,e,!1)}function _S(e,r){if(e.length-r<8)throw new Error(`${z} not enough data for float64`);const t=(e.byteOffset||0)+r;return new DataView(e.buffer,t,8).getFloat64(0,!1)}$y.compareTokens=co.compareTokens;function se(e,r,t){throw new Error(`${z} encountered invalid minor (${t}) for major ${e[r]>>>5}`)}function Pd(e){return()=>{throw new Error(`${z} ${e}`)}}const $=[];for(let e=0;e<=23;e++)$[e]=se;$[24]=iZ;$[25]=aZ;$[26]=uZ;$[27]=sZ;$[28]=se;$[29]=se;$[30]=se;$[31]=se;for(let e=32;e<=55;e++)$[e]=se;$[56]=cZ;$[57]=lZ;$[58]=fZ;$[59]=dZ;$[60]=se;$[61]=se;$[62]=se;$[63]=se;for(let e=64;e<=87;e++)$[e]=hZ;$[88]=pZ;$[89]=vZ;$[90]=_Z;$[91]=yZ;$[92]=se;$[93]=se;$[94]=se;$[95]=Pd("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)$[e]=mZ;$[120]=gZ;$[121]=wZ;$[122]=OZ;$[123]=EZ;$[124]=se;$[125]=se;$[126]=se;$[127]=Pd("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)$[e]=TZ;$[152]=PZ;$[153]=CZ;$[154]=AZ;$[155]=IZ;$[156]=se;$[157]=se;$[158]=se;$[159]=RZ;for(let e=160;e<=183;e++)$[e]=jZ;$[184]=$Z;$[185]=NZ;$[186]=kZ;$[187]=MZ;$[188]=se;$[189]=se;$[190]=se;$[191]=DZ;for(let e=192;e<=215;e++)$[e]=LZ;$[216]=UZ;$[217]=FZ;$[218]=BZ;$[219]=xZ;$[220]=se;$[221]=se;$[222]=se;$[223]=se;for(let e=224;e<=243;e++)$[e]=Pd("simple values are not supported");$[244]=se;$[245]=se;$[246]=se;$[247]=HZ;$[248]=Pd("simple values are not supported");$[249]=KZ;$[250]=YZ;$[251]=ZZ;$[252]=se;$[253]=se;$[254]=se;$[255]=GZ;const or=[];for(let e=0;e<24;e++)or[e]=new j(O.uint,e,1);for(let e=-1;e>=-24;e--)or[31-e]=new j(O.negint,e,1);or[64]=new j(O.bytes,new Uint8Array(0),1);or[96]=new j(O.string,"",1);or[128]=new j(O.array,0,1);or[160]=new j(O.map,0,1);or[244]=new j(O.false,!1,1);or[245]=new j(O.true,!0,1);or[246]=new j(O.null,null,1);function XZ(e){switch(e.type){case O.false:return ar([244]);case O.true:return ar([245]);case O.null:return ar([246]);case O.bytes:return e.value.length?void 0:ar([64]);case O.string:return e.value===""?ar([96]):void 0;case O.array:return e.value===0?ar([128]):void 0;case O.map:return e.value===0?ar([160]):void 0;case O.uint:return e.value<24?ar([Number(e.value)]):void 0;case O.negint:if(e.value>=-24)return ar([31-Number(e.value)])}}const JZ={float64:!1,mapSorter:rQ,quickEncodeToken:XZ};function eQ(){const e=[];return e[O.uint.major]=co,e[O.negint.major]=Cy,e[O.bytes.major]=Td,e[O.string.major]=SZ,e[O.array.major]=Ay,e[O.map.major]=Iy,e[O.tag.major]=Ry,e[O.float.major]=$y,e}const yS=eQ(),Np=new fS;class ul{constructor(r,t){this.obj=r,this.parent=t}includes(r){let t=this;do if(t.obj===r)return!0;while(t=t.parent);return!1}static createCheck(r,t){if(r&&r.includes(t))throw new Error(`${$n} object contains circular references`);return new ul(t,r)}}const jr={null:new j(O.null,null),undefined:new j(O.undefined,void 0),true:new j(O.true,!0),false:new j(O.false,!1),emptyArray:new j(O.array,0),emptyMap:new j(O.map,0)},Gr={number(e,r,t,n){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new j(O.float,e):e>=0?new j(O.uint,e):new j(O.negint,e)},bigint(e,r,t,n){return e>=BigInt(0)?new j(O.uint,e):new j(O.negint,e)},Uint8Array(e,r,t,n){return new j(O.bytes,e)},string(e,r,t,n){return new j(O.string,e)},boolean(e,r,t,n){return e?jr.true:jr.false},null(e,r,t,n){return jr.null},undefined(e,r,t,n){return jr.undefined},ArrayBuffer(e,r,t,n){return new j(O.bytes,new Uint8Array(e))},DataView(e,r,t,n){return new j(O.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,r,t,n){if(!e.length)return t.addBreakTokens===!0?[jr.emptyArray,new j(O.break)]:jr.emptyArray;n=ul.createCheck(n,e);const o=[];let i=0;for(const a of e)o[i++]=$c(a,t,n);return t.addBreakTokens?[new j(O.array,e.length),o,new j(O.break)]:[new j(O.array,e.length),o]},Object(e,r,t,n){const o=r!=="Object",i=o?e.keys():Object.keys(e),a=o?e.size:i.length;if(!a)return t.addBreakTokens===!0?[jr.emptyMap,new j(O.break)]:jr.emptyMap;n=ul.createCheck(n,e);const s=[];let c=0;for(const u of i)s[c++]=[$c(u,t,n),$c(o?e.get(u):e[u],t,n)];return tQ(s,t),t.addBreakTokens?[new j(O.map,a),s,new j(O.break)]:[new j(O.map,a),s]}};Gr.Map=Gr.Object;Gr.Buffer=Gr.Uint8Array;for(const e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Gr[`${e}Array`]=Gr.DataView;function $c(e,r={},t){const n=YY(e),o=r&&r.typeEncoders&&r.typeEncoders[n]||Gr[n];if(typeof o=="function"){const a=o(e,n,r,t);if(a!=null)return a}const i=Gr[n];if(!i)throw new Error(`${$n} unsupported type: ${n}`);return i(e,n,r,t)}function tQ(e,r){r.mapSorter&&e.sort(r.mapSorter)}function rQ(e,r){const t=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(r[0])?r[0][0]:r[0];if(t.type!==n.type)return t.type.compare(n.type);const o=t.type.major,i=yS[o].compareTokens(t,n);return i===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),i}function bS(e,r,t,n){if(Array.isArray(r))for(const o of r)bS(e,o,t,n);else t[r.type.major](e,r,n)}function mS(e,r,t){const n=$c(e,t);if(!Array.isArray(n)&&t.quickEncodeToken){const o=t.quickEncodeToken(n);if(o)return o;const i=r[n.type.major];if(i.encodedSize){const a=i.encodedSize(n,t),s=new fS(a);if(i(s,n,t),s.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return Sy(s.chunks[0])}}return Np.reset(),bS(Np,n,r,t),Np.toBytes(!0)}function nQ(e,r){return r=Object.assign({},JZ,r),mS(e,yS,r)}const oQ={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class iQ{constructor(r,t={}){this._pos=0,this.data=r,this.options=t}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const r=this.data[this._pos];let t=or[r];if(t===void 0){const n=$[r];if(!n)throw new Error(`${z} no decoder for major type ${r>>>5} (byte 0x${r.toString(16).padStart(2,"0")})`);const o=r&31;t=n(this.data,this._pos,o,this.options)}return this._pos+=t.encodedLength,t}}const Ca=Symbol.for("DONE"),Cd=Symbol.for("BREAK");function aQ(e,r,t){const n=[];for(let o=0;o<e.value;o++){const i=Aa(r,t);if(i===Cd){if(e.value===1/0)break;throw new Error(`${z} got unexpected break to lengthed array`)}if(i===Ca)throw new Error(`${z} found array but not enough entries (got ${o}, expected ${e.value})`);n[o]=i}return n}function uQ(e,r,t){const n=t.useMaps===!0,o=n?void 0:{},i=n?new Map:void 0;for(let a=0;a<e.value;a++){const s=Aa(r,t);if(s===Cd){if(e.value===1/0)break;throw new Error(`${z} got unexpected break to lengthed map`)}if(s===Ca)throw new Error(`${z} found map but not enough entries (got ${a} [no key], expected ${e.value})`);if(n!==!0&&typeof s!="string")throw new Error(`${z} non-string keys not supported (got ${typeof s})`);if(t.rejectDuplicateMapKeys===!0&&(n&&i.has(s)||!n&&s in o))throw new Error(`${z} found repeat map key "${s}"`);const c=Aa(r,t);if(c===Ca)throw new Error(`${z} found map but not enough entries (got ${a} [no value], expected ${e.value})`);n?i.set(s,c):o[s]=c}return n?i:o}function Aa(e,r){if(e.done())return Ca;const t=e.next();if(t.type===O.break)return Cd;if(t.type.terminal)return t.value;if(t.type===O.array)return aQ(t,e,r);if(t.type===O.map)return uQ(t,e,r);if(t.type===O.tag){if(r.tags&&typeof r.tags[t.value]=="function"){const n=Aa(e,r);return r.tags[t.value](n)}throw new Error(`${z} tag not supported (${t.value})`)}throw new Error("unsupported")}function sQ(e,r){if(!(e instanceof Uint8Array))throw new Error(`${z} data to decode must be a Uint8Array`);r=Object.assign({},oQ,r);const t=r.tokenizer||new iQ(e,r),n=Aa(t,r);if(n===Ca)throw new Error(`${z} did not find any content to decode`);if(n===Cd)throw new Error(`${z} got unexpected break`);return[n,e.subarray(t.pos())]}function gS(e,r){const[t,n]=sQ(e,r);if(n.length>0)throw new Error(`${z} too many terminals, data makes no sense`);return t}const wS=42;function OS(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function cQ(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const r=G.asCID(e);if(!r)return null;const t=new Uint8Array(r.bytes.byteLength+1);return t.set(r.bytes,1),[new j(O.tag,wS),new j(O.bytes,t)]}function lQ(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function fQ(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const Vv={float64:!0,typeEncoders:{Object:cQ,undefined:lQ,number:fQ}},dQ={...Vv,typeEncoders:{...Vv.typeEncoders}};function hQ(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return G.decode(e.subarray(1))}const sl={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};sl.tags[wS]=hQ;const pQ={...sl,tags:sl.tags.slice()},vQ="dag-cbor",_Q=113,ES=e=>nQ(e,Vv),SS=e=>gS(OS(e),sl),yQ=Object.freeze(Object.defineProperty({__proto__:null,code:_Q,decode:SS,decodeOptions:pQ,encode:ES,encodeOptions:dQ,name:vQ,toByteView:OS},Symbol.toStringTag,{value:"Module"}));class bQ extends Array{constructor(){super(),this.inRecursive=[]}prefix(r){const t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===O.array&&(t.elements++,t.elements!==1&&r.push([44])),t.type===O.map&&(t.elements++,t.elements!==1&&(t.elements%2===1?r.push([44]):r.push([58]))))}[O.uint.major](r,t){this.prefix(r);const n=String(t.value),o=[];for(let i=0;i<n.length;i++)o[i]=n.charCodeAt(i);r.push(o)}[O.negint.major](r,t){this[O.uint.major](r,t)}[O.bytes.major](r,t){throw new Error(`${$n} unsupported type: Uint8Array`)}[O.string.major](r,t){this.prefix(r);const n=cS(JSON.stringify(t.value));r.push(n.length>32?Sy(n):n)}[O.array.major](r,t){this.prefix(r),this.inRecursive.push({type:O.array,elements:0}),r.push([91])}[O.map.major](r,t){this.prefix(r),this.inRecursive.push({type:O.map,elements:0}),r.push([123])}[O.tag.major](r,t){}[O.float.major](r,t){if(t.type.name==="break"){const a=this.inRecursive.pop();if(a){if(a.type===O.array)r.push([93]);else if(a.type===O.map)r.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(t.value===void 0)throw new Error(`${$n} unsupported type: undefined`);if(this.prefix(r),t.type.name==="true"){r.push([116,114,117,101]);return}else if(t.type.name==="false"){r.push([102,97,108,115,101]);return}else if(t.type.name==="null"){r.push([110,117,108,108]);return}const n=String(t.value),o=[];let i=!1;for(let a=0;a<n.length;a++)o[a]=n.charCodeAt(a),!i&&(o[a]===46||o[a]===101||o[a]===69)&&(i=!0);i||(o.push(46),o.push(48)),r.push(o)}}function mQ(e,r){if(Array.isArray(e[0])||Array.isArray(r[0]))throw new Error(`${$n} complex map keys are not supported`);const t=e[0],n=r[0];if(t.type!==O.string||n.type!==O.string)throw new Error(`${$n} non-string map keys are not supported`);if(t<n)return-1;if(t>n)return 1;throw new Error(`${$n} unexpected duplicate map keys, this is not supported`)}const gQ={addBreakTokens:!0,mapSorter:mQ};function wQ(e,r){return r=Object.assign({},gQ,r),mS(e,new bQ,r)}class TS{constructor(r,t={}){this._pos=0,this.data=r,this.options=t,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let r=this.ch();for(;r===32||r===9||r===13||r===10;)r=this.data[++this._pos]}expect(r){if(this.data.length-this._pos<r.length)throw new Error(`${z} unexpected end of input at position ${this._pos}`);for(let t=0;t<r.length;t++)if(this.data[this._pos++]!==r[t])throw new Error(`${z} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...r)}'`)}parseNumber(){const r=this._pos;let t=!1,n=!1;const o=s=>{for(;!this.done();){const c=this.ch();if(s.includes(c))this._pos++;else break}};if(this.ch()===45&&(t=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,n=!0;else return new j(O.uint,0,this._pos-r);if(o([48,49,50,51,52,53,54,55,56,57]),t&&this._pos===r+1)throw new Error(`${z} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${z} unexpected token at position ${this._pos}`);n=!0,this._pos++,o([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,o([48,49,50,51,52,53,54,55,56,57]));const i=String.fromCharCode.apply(null,this.data.subarray(r,this._pos)),a=parseFloat(i);return n?new j(O.float,a,this._pos-r):this.options.allowBigInt!==!0||Number.isSafeInteger(a)?new j(a>=0?O.uint:O.negint,a,this._pos-r):new j(a>=0?O.uint:O.negint,BigInt(i),this._pos-r)}parseString(){if(this.ch()!==34)throw new Error(`${z} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let i=this._pos,a=0;i<this.data.length&&a<65536;i++,a++){const s=this.data[i];if(s===92||s<32||s>=128)break;if(s===34){const c=String.fromCharCode.apply(null,this.data.subarray(this._pos,i));return this._pos=i+1,new j(O.string,c,a)}}const r=this._pos,t=[],n=()=>{if(this._pos+4>=this.data.length)throw new Error(`${z} unexpected end of unicode escape sequence at position ${this._pos}`);let i=0;for(let a=0;a<4;a++){let s=this.ch();if(s>=48&&s<=57)s-=48;else if(s>=97&&s<=102)s=s-97+10;else if(s>=65&&s<=70)s=s-65+10;else throw new Error(`${z} unexpected unicode escape character at position ${this._pos}`);i=i*16+s,this._pos++}return i},o=()=>{const i=this.ch();let a=null,s=i>239?4:i>223?3:i>191?2:1;if(this._pos+s>this.data.length)throw new Error(`${z} unexpected unicode sequence at position ${this._pos}`);let c,u,l,d;switch(s){case 1:i<128&&(a=i);break;case 2:c=this.data[this._pos+1],(c&192)===128&&(d=(i&31)<<6|c&63,d>127&&(a=d));break;case 3:c=this.data[this._pos+1],u=this.data[this._pos+2],(c&192)===128&&(u&192)===128&&(d=(i&15)<<12|(c&63)<<6|u&63,d>2047&&(d<55296||d>57343)&&(a=d));break;case 4:c=this.data[this._pos+1],u=this.data[this._pos+2],l=this.data[this._pos+3],(c&192)===128&&(u&192)===128&&(l&192)===128&&(d=(i&15)<<18|(c&63)<<12|(u&63)<<6|l&63,d>65535&&d<1114112&&(a=d))}a===null?(a=65533,s=1):a>65535&&(a-=65536,t.push(a>>>10&1023|55296),a=56320|a&1023),t.push(a),this._pos+=s};for(;!this.done();){const i=this.ch();let a;switch(i){case 92:if(this._pos++,this.done())throw new Error(`${z} unexpected string termination at position ${this._pos}`);switch(a=this.ch(),this._pos++,a){case 34:case 39:case 92:case 47:t.push(a);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(n());break;default:throw new Error(`${z} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new j(O.string,lS(t),this._pos-r);default:if(i<32)throw new Error(`${z} invalid control character at position ${this._pos}`);i<128?(t.push(i),this._pos++):o()}}throw new Error(`${z} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new j(O.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new j(O.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new j(O.null,null,4);case 102:return this.expect([102,97,108,115,101]),new j(O.false,!1,5);case 116:return this.expect([116,114,117,101]),new j(O.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${z} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new j(O.break,void 0,1);if(this.ch()!==44)throw new Error(`${z} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new j(O.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new j(O.break,void 0,1);if(this.ch()!==44)throw new Error(`${z} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new j(O.break,void 0,1);const r=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${z} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),r}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${z} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}}function OQ(e,r){return r=Object.assign({tokenizer:new TS(e,r)},r),gS(e,r)}function EQ(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function SQ(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const r=G.asCID(e);if(!r)return null;const t=r.toString();return[new j(O.map,1/0,1),new j(O.string,"/",1),new j(O.string,t,t.length),new j(O.break,void 0,1)]}function cl(e){const r=Ed.encode(e).slice(1);return[new j(O.map,1/0,1),new j(O.string,"/",1),new j(O.map,1/0,1),new j(O.string,"bytes",5),new j(O.string,r,r.length),new j(O.break,void 0,1),new j(O.break,void 0,1)]}function It(e){return cl(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function TQ(e){return cl(new Uint8Array(e))}function PQ(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function CQ(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const AQ={typeEncoders:{Object:SQ,Buffer:cl,Uint8Array:cl,Int8Array:It,Uint16Array:It,Int16Array:It,Uint32Array:It,Int32Array:It,Float32Array:It,Float64Array:It,Uint8ClampedArray:It,BigInt64Array:It,BigUint64Array:It,DataView:It,ArrayBuffer:TQ,undefined:PQ,number:CQ}};class IQ extends TS{constructor(r,t){super(r,t),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const r=this._next();if(r.type===O.map){const t=this._next();if(t.type===O.string&&t.value==="/"){const n=this._next();if(n.type===O.string){if(this._next().type!==O.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new j(O.tag,42,0)}if(n.type===O.map){const o=this._next();if(o.type===O.string&&o.value==="bytes"){const i=this._next();if(i.type===O.string){for(let s=0;s<2;s++)if(this._next().type!==O.break)throw new Error("Invalid encoded Bytes form");const a=Ed.decode(`m${i.value}`);return new j(O.bytes,a,i.value.length)}this.tokenBuffer.push(i)}this.tokenBuffer.push(o)}this.tokenBuffer.push(n)}this.tokenBuffer.push(t)}return r}}const Wv={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Wv.tags[42]=G.parse;const RQ="dag-json",jQ=297,PS=e=>wQ(e,AQ),CS=e=>{const r=EQ(e),t=Object.assign(Wv,{tokenizer:new IQ(r,Wv)});return OQ(r,t)},r0=e=>$Q.decode(PS(e)),$Q=new TextDecoder,NQ=e=>CS(kQ.encode(e)),kQ=new TextEncoder,MQ=Object.freeze(Object.defineProperty({__proto__:null,code:jQ,decode:CS,encode:PS,format:r0,name:RQ,parse:NQ,stringify:r0},Symbol.toStringTag,{value:"Module"})),DQ=new TextDecoder;function My(e,r){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(r>=e.length)throw new Error("protobuf: unexpected end of data");const o=e[r++];if(t+=n<28?(o&127)<<n:(o&127)*2**n,o<128)break}return[t,r]}function ll(e,r){let t;[t,r]=My(e,r);const n=r+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(r,n),n]}function AS(e,r){let t;return[t,r]=My(e,r),[t&7,t>>3,r]}function LQ(e){const r={},t=e.length;let n=0;for(;n<t;){let o,i;if([o,i,n]=AS(e,n),i===1){if(r.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(r.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(r.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[r.Hash,n]=ll(e,n)}else if(i===2){if(r.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(r.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let a;[a,n]=ll(e,n),r.Name=DQ.decode(a)}else if(i===3){if(r.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[r.Tsize,n]=My(e,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${i}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return r}function UQ(e){const r=e.length;let t=0,n,o=!1,i;for(;t<r;){let s,c;if([s,c,t]=AS(e,t),s!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${s}`);if(c===1){if(i)throw new Error("protobuf: (PBNode) duplicate Data section");[i,t]=ll(e,t),n&&(o=!0)}else if(c===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let u;[u,t]=ll(e,t),n.push(LQ(u))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(t>r)throw new Error("protobuf: (PBNode) unexpected end of data");const a={};return i&&(a.Data=i),a.Links=n||[],a}const IS=new TextEncoder,n0=2**32,FQ=2**31;function BQ(e,r){let t=r.length;if(typeof e.Tsize=="number"){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");t=va(r,t,e.Tsize)-1,r[t]=24}if(typeof e.Name=="string"){const n=IS.encode(e.Name);t-=n.length,r.set(n,t),t=va(r,t,n.length)-1,r[t]=18}return e.Hash&&(t-=e.Hash.length,r.set(e.Hash,t),t=va(r,t,e.Hash.length)-1,r[t]=10),r.length-t}function xQ(e){const r=WQ(e),t=new Uint8Array(r);let n=r;if(e.Data&&(n-=e.Data.length,t.set(e.Data,n),n=va(t,n,e.Data.length)-1,t[n]=10),e.Links)for(let o=e.Links.length-1;o>=0;o--){const i=BQ(e.Links[o],t.subarray(0,n));n-=i,n=va(t,n,i)-1,t[n]=18}return t}function VQ(e){let r=0;if(e.Hash){const t=e.Hash.length;r+=1+t+Ro(t)}if(typeof e.Name=="string"){const t=IS.encode(e.Name).length;r+=1+t+Ro(t)}return typeof e.Tsize=="number"&&(r+=1+Ro(e.Tsize)),r}function WQ(e){let r=0;if(e.Data){const t=e.Data.length;r+=1+t+Ro(t)}if(e.Links)for(const t of e.Links){const n=VQ(t);r+=1+n+Ro(n)}return r}function va(e,r,t){r-=Ro(t);const n=r;for(;t>=FQ;)e[r++]=t&127|128,t/=128;for(;t>=128;)e[r++]=t&127|128,t>>>=7;return e[r]=t,n}function Ro(e){return e%2===0&&e++,Math.floor((zQ(e)+6)/7)}function zQ(e){let r=0;return e>=n0&&(e=Math.floor(e/n0),r=32),e>=65536&&(e>>>=16,r+=16),e>=256&&(e>>>=8,r+=8),r+qQ[e]}const qQ=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],HQ=["Data","Links"],GQ=["Hash","Name","Tsize"],zv=new TextEncoder;function RS(e,r){if(e===r)return 0;const t=e.Name?zv.encode(e.Name):[],n=r.Name?zv.encode(r.Name):[];let o=t.length,i=n.length;for(let a=0,s=Math.min(o,i);a<s;++a)if(t[a]!==n[a]){o=t[a],i=n[a];break}return o<i?-1:i<o?1:0}function o0(e,r){return!Object.keys(e).some(t=>!r.includes(t))}function jS(e){if(typeof e.asCID=="object"){const t=G.asCID(e);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if(typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const r={};if(e.Hash){let t=G.asCID(e.Hash);try{t||(typeof e.Hash=="string"?t=G.parse(e.Hash):e.Hash instanceof Uint8Array&&(t=G.decode(e.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}t&&(r.Hash=t)}if(!r.Hash)throw new TypeError("Invalid DAG-PB form");return typeof e.Name=="string"&&(r.Name=e.Name),typeof e.Tsize=="number"&&(r.Tsize=e.Tsize),r}function $S(e){if((e instanceof Uint8Array||typeof e=="string")&&(e={Data:e}),typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const r={};if(e.Data!==void 0)if(typeof e.Data=="string")r.Data=zv.encode(e.Data);else if(e.Data instanceof Uint8Array)r.Data=e.Data;else throw new TypeError("Invalid DAG-PB form");if(e.Links!==void 0)if(Array.isArray(e.Links))r.Links=e.Links.map(jS),r.Links.sort(RS);else throw new TypeError("Invalid DAG-PB form");else r.Links=[];return r}function NS(e){if(!e||typeof e!="object"||Array.isArray(e)||e instanceof Uint8Array||e["/"]&&e["/"]===e.bytes)throw new TypeError("Invalid DAG-PB form");if(!o0(e,HQ))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(e.Data!==void 0&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let r=0;r<e.Links.length;r++){const t=e.Links[r];if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!o0(t,GQ))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(t.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash==null||!t.Hash["/"]||t.Hash["/"]!==t.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0){if(typeof t.Tsize!="number"||t.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(r>0&&RS(t,e.Links[r-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function KQ(e,r=[]){return $S({Data:e,Links:r})}function YQ(e,r,t){return jS({Hash:t,Name:e,Tsize:r})}function ZQ(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}const QQ="dag-pb",XQ=112;function JQ(e){NS(e);const r={};return e.Links&&(r.Links=e.Links.map(t=>{const n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),e.Data&&(r.Data=e.Data),xQ(r)}function eX(e){const r=ZQ(e),t=UQ(r),n={};return t.Data&&(n.Data=t.Data),t.Links&&(n.Links=t.Links.map(o=>{const i={};try{i.Hash=G.decode(o.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return o.Name!==void 0&&(i.Name=o.Name),o.Tsize!==void 0&&(i.Tsize=o.Tsize),i})),n}const tX=Object.freeze(Object.defineProperty({__proto__:null,code:XQ,createLink:YQ,createNode:KQ,decode:eX,encode:JQ,name:QQ,prepare:$S,validate:NS},Symbol.toStringTag,{value:"Module"}));function rX(e,r){if(e===r)return!0;if(e.byteLength!==r.byteLength)return!1;for(let t=0;t<e.byteLength;t++)if(e[t]!==r[t])return!1;return!0}function Dy(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function nX(e,r){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),a=i.charCodeAt(0);if(t[a]!==255)throw new TypeError(i+" is ambiguous");t[a]=o}var s=e.length,c=e.charAt(0),u=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function d(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var y=0,_=0,b=0,w=v.length;b!==w&&v[b]===0;)b++,y++;for(var S=(w-b)*l+1>>>0,E=new Uint8Array(S);b!==w;){for(var T=v[b],C=0,P=S-1;(T!==0||C<_)&&P!==-1;P--,C++)T+=256*E[P]>>>0,E[P]=T%s>>>0,T=T/s>>>0;if(T!==0)throw new Error("Non-zero carry");_=C,b++}for(var I=S-_;I!==S&&E[I]===0;)I++;for(var M=c.repeat(y);I<S;++I)M+=e.charAt(E[I]);return M}function h(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var y=0;if(v[y]!==" "){for(var _=0,b=0;v[y]===c;)_++,y++;for(var w=(v.length-y)*u+1>>>0,S=new Uint8Array(w);v[y];){var E=t[v.charCodeAt(y)];if(E===255)return;for(var T=0,C=w-1;(E!==0||T<b)&&C!==-1;C--,T++)E+=s*S[C]>>>0,S[C]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");b=T,y++}if(v[y]!==" "){for(var P=w-b;P!==w&&S[P]===0;)P++;for(var I=new Uint8Array(_+(w-P)),M=_;P!==w;)I[M++]=S[P++];return I}}}function p(v){var y=h(v);if(y)return y;throw new Error(`Non-${r} character`)}return{encode:d,decodeUnsafe:h,decode:p}}var oX=nX,iX=oX;class aX{constructor(r,t,n){g(this,"name");g(this,"prefix");g(this,"baseEncode");this.name=r,this.prefix=t,this.baseEncode=n}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}}class uX{constructor(r,t,n){g(this,"name");g(this,"prefix");g(this,"baseDecode");g(this,"prefixCodePoint");if(this.name=r,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return kS(this,r)}}class sX{constructor(r){g(this,"decoders");this.decoders=r}or(r){return kS(this,r)}decode(r){const t=r[0],n=this.decoders[t];if(n!=null)return n.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function kS(e,r){return new sX({...e.decoders??{[e.prefix]:e},...r.decoders??{[r.prefix]:r}})}class cX{constructor(r,t,n,o){g(this,"name");g(this,"prefix");g(this,"baseEncode");g(this,"baseDecode");g(this,"encoder");g(this,"decoder");this.name=r,this.prefix=t,this.baseEncode=n,this.baseDecode=o,this.encoder=new aX(r,t,n),this.decoder=new uX(r,t,o)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}}function MS({name:e,prefix:r,encode:t,decode:n}){return new cX(e,r,t,n)}function DS({name:e,prefix:r,alphabet:t}){const{encode:n,decode:o}=iX(t,e);return MS({prefix:r,name:e,encode:n,decode:i=>Dy(o(i))})}function lX(e,r,t,n){const o={};for(let l=0;l<r.length;++l)o[r[l]]=l;let i=e.length;for(;e[i-1]==="=";)--i;const a=new Uint8Array(i*t/8|0);let s=0,c=0,u=0;for(let l=0;l<i;++l){const d=o[e[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|d,s+=t,s>=8&&(s-=8,a[u++]=255&c>>s)}if(s>=t||255&c<<8-s)throw new SyntaxError("Unexpected end of data");return a}function fX(e,r,t){const n=r[r.length-1]==="=",o=(1<<t)-1;let i="",a=0,s=0;for(let c=0;c<e.length;++c)for(s=s<<8|e[c],a+=8;a>t;)a-=t,i+=r[o&s>>a];if(a!==0&&(i+=r[o&s<<t-a]),n)for(;i.length*t&7;)i+="=";return i}function mt({name:e,prefix:r,bitsPerChar:t,alphabet:n}){return MS({prefix:r,name:e,encode(o){return fX(o,n,t)},decode(o){return lX(o,n,t,e)}})}mt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});mt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const LS=mt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});mt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function lr(e){return LS.encode(e).slice(1)}function Zt(e){return LS.decode(`u${e}`)}const Nc=mt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});mt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});mt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});mt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});mt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});mt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});mt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});mt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});mt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const Nr=DS({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});DS({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var dX=US,i0=128,hX=-128,pX=Math.pow(2,31);function US(e,r,t){r=r||[],t=t||0;for(var n=t;e>=pX;)r[t++]=e&255|i0,e/=128;for(;e&hX;)r[t++]=e&255|i0,e>>>=7;return r[t]=e|0,US.bytes=t-n+1,r}var vX=qv,_X=128,a0=127;function qv(e,n){var t=0,n=n||0,o=0,i=n,a,s=e.length;do{if(i>=s)throw qv.bytes=0,new RangeError("Could not decode varint");a=e[i++],t+=o<28?(a&a0)<<o:(a&a0)*Math.pow(2,o),o+=7}while(a>=_X);return qv.bytes=i-n,t}var yX=Math.pow(2,7),bX=Math.pow(2,14),mX=Math.pow(2,21),gX=Math.pow(2,28),wX=Math.pow(2,35),OX=Math.pow(2,42),EX=Math.pow(2,49),SX=Math.pow(2,56),TX=Math.pow(2,63),PX=function(e){return e<yX?1:e<bX?2:e<mX?3:e<gX?4:e<wX?5:e<OX?6:e<EX?7:e<SX?8:e<TX?9:10},CX={encode:dX,decode:vX,encodingLength:PX},fl=CX;function Hv(e,r=0){return[fl.decode(e,r),fl.decode.bytes]}function dl(e,r,t=0){return fl.encode(e,r,t),r}function hl(e){return fl.encodingLength(e)}function AX(e,r){const t=r.byteLength,n=hl(e),o=n+hl(t),i=new Uint8Array(o+t);return dl(e,i,0),dl(t,i,n),i.set(r,o),new Ly(e,t,r,i)}function IX(e){const r=Dy(e),[t,n]=Hv(r),[o,i]=Hv(r.subarray(n)),a=r.subarray(n+i);if(a.byteLength!==o)throw new Error("Incorrect length");return new Ly(t,o,a,r)}function RX(e,r){if(e===r)return!0;{const t=r;return e.code===t.code&&e.size===t.size&&t.bytes instanceof Uint8Array&&rX(e.bytes,t.bytes)}}class Ly{constructor(r,t,n,o){g(this,"code");g(this,"size");g(this,"digest");g(this,"bytes");this.code=r,this.size=t,this.digest=n,this.bytes=o}}function u0(e,r){const{bytes:t,version:n}=e;switch(n){case 0:return $X(t,Gv(e),r??Nr.encoder);default:return NX(t,Gv(e),r??Nc.encoder)}}const s0=new WeakMap;function Gv(e){const r=s0.get(e);if(r==null){const t=new Map;return s0.set(e,t),t}return r}var V0;class $e{constructor(r,t,n,o){g(this,"code");g(this,"version");g(this,"multihash");g(this,"bytes");g(this,"/");g(this,V0,"CID");this.code=t,this.version=r,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:r,multihash:t}=this;if(r!==Zi)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==kX)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return $e.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:r,digest:t}=this.multihash,n=AX(r,t);return $e.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(r){return $e.equals(this,r)}static equals(r,t){const n=t;return n!=null&&r.code===n.code&&r.version===n.version&&RX(r.multihash,n.multihash)}toString(r){return u0(this,r)}toJSON(){return{"/":u0(this)}}link(){return this}[(V0=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(r){if(r==null)return null;const t=r;if(t instanceof $e)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){const{version:n,code:o,multihash:i,bytes:a}=t;return new $e(n,o,i,a??c0(n,o,i.bytes))}else if(t[MX]===!0){const{version:n,multihash:o,code:i}=t,a=IX(o);return $e.create(n,i,a)}else return null}static create(r,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(r){case 0:{if(t!==Zi)throw new Error(`Version 0 CID must use dag-pb (code: ${Zi}) block encoding`);return new $e(r,t,n,n.bytes)}case 1:{const o=c0(r,t,n.bytes);return new $e(r,t,n,o)}default:throw new Error("Invalid version")}}static createV0(r){return $e.create(0,Zi,r)}static createV1(r,t){return $e.create(1,r,t)}static decode(r){const[t,n]=$e.decodeFirst(r);if(n.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(r){const t=$e.inspectBytes(r),n=t.size-t.multihashSize,o=Dy(r.subarray(n,n+t.multihashSize));if(o.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=o.subarray(t.multihashSize-t.digestSize),a=new Ly(t.multihashCode,t.digestSize,i,o);return[t.version===0?$e.createV0(a):$e.createV1(t.codec,a),r.subarray(t.size)]}static inspectBytes(r){let t=0;const n=()=>{const[d,h]=Hv(r.subarray(t));return t+=h,d};let o=n(),i=Zi;if(o===18?(o=0,t=0):i=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const a=t,s=n(),c=n(),u=t+c,l=u-a;return{version:o,codec:i,multihashCode:s,digestSize:c,multihashSize:l,size:u}}static parse(r,t){const[n,o]=jX(r,t),i=$e.decode(o);if(i.version===0&&r[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Gv(i).set(n,r),i}}function jX(e,r){switch(e[0]){case"Q":{const t=r??Nr;return[Nr.prefix,t.decode(`${Nr.prefix}${e}`)]}case Nr.prefix:{const t=r??Nr;return[Nr.prefix,t.decode(e)]}case Nc.prefix:{const t=r??Nc;return[Nc.prefix,t.decode(e)]}default:{if(r==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],r.decode(e)]}}}function $X(e,r,t){const{prefix:n}=t;if(n!==Nr.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const o=r.get(n);if(o==null){const i=t.encode(e).slice(1);return r.set(n,i),i}else return o}function NX(e,r,t){const{prefix:n}=t,o=r.get(n);if(o==null){const i=t.encode(e);return r.set(n,i),i}else return o}const Zi=112,kX=18;function c0(e,r,t){const n=hl(e),o=n+hl(r),i=new Uint8Array(o+t.byteLength);return dl(e,i,0),dl(r,i,n),i.set(t,o),i}const MX=Symbol.for("@ipld/js-cid/CID");function DX(e){const[r,t,n]=e;return{payload:t,signatures:[{protected:r,signature:n}],link:$e.decode(Zt(t))}}function LX(e){const r={signature:Zt(e.signature)};return e.header&&(r.header=e.header),e.protected&&(r.protected=Zt(e.protected)),r}function UX(e){return{payload:Zt(e.payload),signatures:e.signatures.map(LX)}}function FX(e){const r={signature:lr(e.signature)};return e.header&&(r.header=e.header),e.protected&&(r.protected=lr(e.protected)),r}function BX(e){const r={payload:lr(e.payload),signatures:e.signatures.map(FX)};try{return r.pld=Kv(VX(e.payload)),r}catch{try{return r.link=$e.decode(new Uint8Array(e.payload)),r}catch{throw new Error("Invalid payload, must be either JSON or CID")}}}function Kv(e){if(typeof e=="string"){if(e.startsWith("ipfs://"))return $e.parse(e.slice(7))}else{if(Array.isArray(e))return e.map(Kv);if(xX(e)){const r={};for(const t in e)r[t]=Kv(e[t]);return r}}return e}function xX(e){return typeof e=="object"&&e!==null}function VX(e){return JSON.parse(new TextDecoder().decode(e))}function WX(e){const[r,t,n,o,i]=e,a={ciphertext:o,iv:n,protected:r,tag:i};return t&&(a.recipients=[{encrypted_key:t}]),a}function zX(e){const r={};return e.encrypted_key&&(r.encrypted_key=Zt(e.encrypted_key)),e.header&&(r.header=e.header),r}function qX(e){const r={ciphertext:Zt(e.ciphertext),protected:Zt(e.protected),iv:Zt(e.iv),tag:Zt(e.tag)};return e.aad&&(r.aad=Zt(e.aad)),e.recipients&&(r.recipients=e.recipients.map(zX)),e.unprotected&&(r.unprotected=e.unprotected),r}function HX(e){const r={};return e.encrypted_key&&(r.encrypted_key=lr(e.encrypted_key)),e.header&&(r.header=e.header),r}function GX(e){const r={ciphertext:lr(e.ciphertext),protected:lr(e.protected),iv:lr(e.iv),tag:lr(e.tag)};return e.aad&&(r.aad=lr(e.aad)),e.recipients&&(r.recipients=e.recipients.map(HX)),e.unprotected&&(r.unprotected=e.unprotected),r}const KX="dag-jose",YX=133;function FS(e){return"payload"in e&&typeof e.payload=="string"&&"signatures"in e&&Array.isArray(e.signatures)}function ZX(e){return"payload"in e&&e.payload instanceof Uint8Array&&"signatures"in e&&Array.isArray(e.signatures)}function QX(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}function BS(e){return"ciphertext"in e&&typeof e.ciphertext=="string"&&"iv"in e&&typeof e.iv=="string"&&"protected"in e&&typeof e.protected=="string"&&"tag"in e&&typeof e.tag=="string"}function xS(e){if(typeof e=="string"){const r=e.split(".");if(r.length===3)return DX(r);if(r.length===5)return WX(r);throw new Error("Not a valid JOSE string")}if(FS(e)||BS(e))return e;throw new Error("Not a valid unencoded JOSE object")}function XX(e){typeof e=="string"&&(e=xS(e));let r;if(FS(e))r=UX(e);else if(BS(e))r=qX(e);else throw new Error("Not a valid JOSE object");return new Uint8Array(ES(r))}function JX(e){let r;try{r=SS(e)}catch{throw new Error("Not a valid DAG-JOSE object")}if(ZX(r))return BX(r);if(QX(r))return GX(r);throw new Error("Not a valid DAG-JOSE object")}const eJ=Object.freeze(Object.defineProperty({__proto__:null,code:YX,decode:JX,encode:XX,name:KX,toGeneral:xS},Symbol.toStringTag,{value:"Module"}));function Tr(e){const r=new globalThis.AbortController;function t(){r.abort();for(const i of e)(i==null?void 0:i.removeEventListener)!=null&&i.removeEventListener("abort",t)}for(const i of e){if((i==null?void 0:i.aborted)===!0){t();break}(i==null?void 0:i.addEventListener)!=null&&i.addEventListener("abort",t)}function n(){for(const i of e)(i==null?void 0:i.removeEventListener)!=null&&i.removeEventListener("abort",t)}const o=r.signal;return o.clear=n,o}const tJ="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let rJ=(e=21)=>{let r="",t=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)r+=tJ[t[e]&63];return r};function nJ(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var oJ=nJ;const iJ=i_(oJ),VS=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,Uy=iJ(),Ad=VS&&!Uy,aJ=Uy&&VS,uJ=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!Uy,Id=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;async function*Rd(e,r={}){const t=e.getReader();try{for(;;){const n=await t.read();if(n.done)return;yield n.value}}finally{r.preventCancel!==!0&&await t.cancel(),t.releaseLock()}}function l0(e,r){for(const t in r)Object.defineProperty(e,t,{value:r[t],enumerable:!0,configurable:!0});return e}function sJ(e,r,t){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof r=="object"&&(t=r,r=""),r&&(t.code=r);try{return l0(e,t)}catch{t.message=e.message,t.stack=e.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(e)),l0(new o,t)}}var cJ=sJ;const Xt=i_(cJ);function jd(e){const[r,t]=e[Symbol.asyncIterator]!=null?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>r.next(),push:o=>{n.push(o)},next:()=>n.length>0?{done:!1,value:n.shift()}:r.next(),[t](){return this}}}function lJ(e){return e[Symbol.asyncIterator]!=null}function f0(e,r){let t=0;if(lJ(e))return async function*(){for await(const c of e)yield r(c,t++)}();const n=jd(e),{value:o,done:i}=n.next();if(i===!0)return function*(){}();const a=r(o,t++);if(typeof a.then=="function")return async function*(){yield await a;for(const c of n)yield r(c,t++)}();const s=r;return function*(){yield a;for(const c of n)yield s(c,t++)}()}let fJ=class extends Error{constructor(t){super(t.statusText);g(this,"response");this.name="HTTPError",this.response=t}};class dJ extends Error{constructor(r="Invalid mtime"){super(r),this.name="InvalidMtimeError"}}function Vo(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function pl(e){return e.constructor!=null&&(e.constructor.name==="Blob"||e.constructor.name==="File")&&typeof e.stream=="function"}function Yv(e){return typeof e=="object"&&(e.path!=null||e.content!=null)}function vl(e){return typeof(e==null?void 0:e.getReader)=="function"}function WS(e){if(e!=null)return typeof e=="string"&&(e=parseInt(e,8)),e&4095}function hJ(e){return Object.prototype.hasOwnProperty.call(e,"secs")}function pJ(e){return Object.prototype.hasOwnProperty.call(e,"Seconds")}function vJ(e){return Array.isArray(e)}function $d(e){if(e!=null){if(hJ(e)&&(e={secs:e.secs,nsecs:e.nsecs}),pJ(e)&&(e={secs:BigInt(e.Seconds),nsecs:e.FractionalNanoseconds}),vJ(e)&&(e={secs:BigInt(e[0]),nsecs:e[1]}),e instanceof Date){const r=e.getTime(),t=Math.floor(r/1e3);e={secs:BigInt(t),nsecs:(r-t*1e3)*1e3}}if(typeof e=="bigint"){const r=e/BigInt(1e9),t=e-r*BigInt(1e9);e={secs:r,nsecs:Number(t)}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw new dJ("mtime-nsecs must be within the range [0,999999999]");return e}}}async function*_J(e,r){if(typeof e=="string"||e instanceof String||Vo(e)||pl(e)||e._readableState!=null)throw Xt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(vl(e)&&(e=Rd(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=jd(e),{value:n,done:o}=await t.peek();if(o===!0){yield*[];return}if(t.push(n),Number.isInteger(n))throw Xt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState!=null){yield*f0(t,async i=>kp({content:i},r));return}if(Vo(n)){yield kp({content:t},r);return}if(Yv(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||vl(n)||pl(n)){yield*f0(t,async i=>kp(i,r));return}}throw Yv(e)?Xt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):Xt(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}async function kp(e,r){const{path:t,mode:n,mtime:o,content:i}=e,a={path:t??"",mode:WS(n),mtime:$d(o)};return i!=null?a.content=await r(i):t==null&&(a.content=await r(e)),a}const zS=Symbol.for("@libp2p/peer-id");class Tt extends Error{constructor(r="Invalid parameters"){super(r),this.name="InvalidParametersError"}}g(Tt,"name","InvalidParametersError");class Fy extends Error{constructor(r="Invalid public key"){super(r),this.name="InvalidPublicKeyError"}}g(Fy,"name","InvalidPublicKeyError");class qS extends Error{constructor(r="Invalid CID"){super(r),this.name="InvalidCIDError"}}g(qS,"name","InvalidCIDError");class HS extends Error{constructor(r="Invalid Multihash"){super(r),this.name="InvalidMultihashError"}}g(HS,"name","InvalidMultihashError");class By extends Error{constructor(r="Unsupported key type"){super(r),this.name="UnsupportedKeyTypeError"}}g(By,"name","UnsupportedKeyTypeError");function yJ(e){return e[Symbol.asyncIterator]!=null}function GS(e){if(yJ(e))return(async()=>{const t=[];for await(const n of e)t.push(n);return t})();const r=[];for(const t of e)r.push(t);return r}async function KS(e){if(Vo(e))return new Blob([e]);if(typeof e=="string"||e instanceof String)return new Blob([e.toString()]);if(pl(e))return e;if(vl(e)&&(e=Rd(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const r=jd(e),{value:t,done:n}=await r.peek();if(n===!0)return d0(r);if(r.push(t),Number.isInteger(t))return new Blob([Uint8Array.from(await GS(r))]);if(Vo(t)||typeof t=="string"||t instanceof String)return d0(r)}throw new Tt(`Unexpected input: ${e}`)}async function d0(e){const r=[];for await(const t of e)r.push(t);return new Blob(r)}function bJ(e){return _J(e,KS)}function xy(e){if(e!=null)return typeof e=="string"?e:e.toString(8).padStart(4,"0")}async function h0(e,r,t={},n){const o=[],i=new FormData;let a=0,s=0;for await(const{content:c,path:u,mode:l,mtime:d}of bJ(e)){let h="";const p=c!=null?"file":"dir";a>0&&(h=`-${a}`);let v=p+h;const y=[];if(l!=null&&y.push(`mode=${xy(l)}`),d!=null){const{secs:_,nsecs:b}=d;y.push(`mtime=${_}`),b!=null&&y.push(`mtime-nsecs=${b}`)}if(y.length>0&&(v=`${v}?${y.join("&")}`),c!=null){i.set(v,c,u!=null?encodeURIComponent(u):void 0);const _=s+c.size;o.push({name:u,start:s,end:_}),s=_}else if(u!=null)i.set(v,new File([""],encodeURIComponent(u),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");a++}return{total:s,parts:o,headers:t,body:i}}async function sn(e,r,t={},n=`-----------------------------${rJ()}`){let o=h0;return aJ&&(o=h0),o(e,r,t,n)}function Ge(e){if(e==null)return e;const r=/^[A-Z]+$/,t={};return Object.keys(e).reduce((n,o)=>(r.test(o)?n[o.toLowerCase()]=e[o]:r.test(o[0])?n[o[0].toLowerCase()+o.slice(1)]=e[o]:n[o]=e[o],n),t)}function R({arg:e,searchParams:r,hashAlg:t,mtime:n,mode:o,...i}={}){r!=null&&(i={...i,...r}),t!=null&&(i.hash=t),n!=null&&(n=$d(n),i.mtime=n.secs,i.mtimeNsecs=n.nsecs),o!=null&&(i.mode=xy(o)),isNaN(i.timeout)||(i.timeout=`${i.timeout}ms`),e==null?e=[]:Array.isArray(e)||(e=[e]);const a=new URLSearchParams(i);return e.forEach(s=>{a.append("arg",s)}),a}function YS(e){return async function*(t,n={}){const o=new AbortController,i=Tr([o.signal,n.signal]);try{const{headers:a,body:s,total:c,parts:u}=await sn(t,o,n.headers),[l,d]=typeof n.progress=="function"?mJ(c,n.progress,u):[void 0,void 0],h=await e.post("add",{searchParams:R({"stream-channels":!0,...n,progress:!!l}),onUploadProgress:d,signal:i,headers:a,body:s});for await(let p of h.ndjson())p=Ge(p),p.hash!==void 0?yield wJ(p):l!=null&&l(p.bytes??0,p.name)}finally{i.clear()}}}const mJ=(e,r,t)=>t!=null?[void 0,gJ(e,t,r)]:[r,void 0],gJ=(e,r,t)=>{let n=0;const o=r.length;return({loaded:i,total:a})=>{const s=Math.floor(i/a*e);for(;n<o;){const{start:c,end:u,name:l}=r[n];if(s<u){t(s-c,l);break}else t(u-c,l),n+=1}}};function wJ({name:e,hash:r,size:t,mode:n,mtime:o,mtimeNsecs:i}){const a={path:e,cid:G.parse(r),size:parseInt(t)};return n!=null&&(a.mode=parseInt(n,8)),o!=null&&(a.mtime={secs:o,nsecs:i??0}),a}function OJ(e){return e[Symbol.asyncIterator]!=null}function Nd(e){if(OJ(e))return(async()=>{let t;for await(const n of e)t=n;return t})();let r;for(const t of e)r=t;return r}async function*EJ(e,r){if(e==null)throw Xt(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if(typeof e=="string"||e instanceof String){yield bc(e.toString(),r);return}if(Vo(e)||pl(e)){yield bc(e,r);return}if(vl(e)&&(e=Rd(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=jd(e),{value:n,done:o}=await t.peek();if(o===!0){yield{content:[]};return}if(t.push(n),Number.isInteger(n)||Vo(n)||typeof n=="string"||n instanceof String){yield bc(t,r);return}throw Xt(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(Yv(e)){yield bc(e,r);return}throw Xt(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function bc(e,r){const{path:t,mode:n,mtime:o,content:i}=e,a={path:t??"",mode:WS(n),mtime:$d(o)};return i!=null?a.content=await r(i):t==null&&(a.content=await r(e)),a}function SJ(e){return EJ(e,KS)}function TJ(e){const r=YS(e);return async function(n,o={}){const i=SJ(n),a=r(i,o),s=await Nd(a);if(s==null)throw new Error("Invalid body");return s}}const ZS=Symbol.for("@achingbrain/uint8arraylist");function p0(e,r){if(r==null||r<0)throw new RangeError("index is out of bounds");let t=0;for(const n of e){const o=t+n.byteLength;if(r<o)return{buf:n,index:r-t};t=o}throw new RangeError("index is out of bounds")}function mc(e){return!!(e!=null&&e[ZS])}var W0;class yt{constructor(...r){g(this,"bufs");g(this,"length");g(this,W0,!0);this.bufs=[],this.length=0,r.length>0&&this.appendAll(r)}*[(W0=ZS,Symbol.iterator)](){yield*this.bufs}get byteLength(){return this.length}append(...r){this.appendAll(r)}appendAll(r){let t=0;for(const n of r)if(n instanceof Uint8Array)t+=n.byteLength,this.bufs.push(n);else if(mc(n))t+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=t}prepend(...r){this.prependAll(r)}prependAll(r){let t=0;for(const n of r.reverse())if(n instanceof Uint8Array)t+=n.byteLength,this.bufs.unshift(n);else if(mc(n))t+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=t}get(r){const t=p0(this.bufs,r);return t.buf[t.index]}set(r,t){const n=p0(this.bufs,r);n.buf[n.index]=t}write(r,t=0){if(r instanceof Uint8Array)for(let n=0;n<r.length;n++)this.set(t+n,r[n]);else if(mc(r))for(let n=0;n<r.length;n++)this.set(t+n,r.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(r){if(r=Math.trunc(r),!(Number.isNaN(r)||r<=0)){if(r===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(r>=this.bufs[0].byteLength)r-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(r),this.length-=r;break}}}slice(r,t){const{bufs:n,length:o}=this._subList(r,t);return Pa(n,o)}subarray(r,t){const{bufs:n,length:o}=this._subList(r,t);return n.length===1?n[0]:Pa(n,o)}sublist(r,t){const{bufs:n,length:o}=this._subList(r,t),i=new yt;return i.length=o,i.bufs=[...n],i}_subList(r,t){if(r=r??0,t=t??this.length,r<0&&(r=this.length+r),t<0&&(t=this.length+t),r<0||t>this.length)throw new RangeError("index is out of bounds");if(r===t)return{bufs:[],length:0};if(r===0&&t===this.length)return{bufs:this.bufs,length:this.length};const n=[];let o=0;for(let i=0;i<this.bufs.length;i++){const a=this.bufs[i],s=o,c=s+a.byteLength;if(o=c,r>=c)continue;const u=r>=s&&r<c,l=t>s&&t<=c;if(u&&l){if(r===s&&t===c){n.push(a);break}const d=r-s;n.push(a.subarray(d,d+(t-r)));break}if(u){if(r===0){n.push(a);continue}n.push(a.subarray(r-s));continue}if(l){if(t===c){n.push(a);break}n.push(a.subarray(0,t-s));break}n.push(a)}return{bufs:n,length:t-r}}indexOf(r,t=0){if(!mc(r)&&!(r instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const n=r instanceof Uint8Array?r:r.subarray();if(t=Number(t??0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),r.length===0)return t>this.length?this.length:t;const o=n.byteLength;if(o===0)throw new TypeError("search must be at least 1 byte long");const i=256,a=new Int32Array(i);for(let d=0;d<i;d++)a[d]=-1;for(let d=0;d<o;d++)a[n[d]]=d;const s=a,c=this.byteLength-n.byteLength,u=n.byteLength-1;let l;for(let d=t;d<=c;d+=l){l=0;for(let h=u;h>=0;h--){const p=this.get(d+h);if(n[h]!==p){l=Math.max(1,h-s[p]);break}}if(l===0)return d}return-1}getInt8(r){const t=this.subarray(r,r+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getInt8(0)}setInt8(r,t){const n=zn(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,t),this.write(n,r)}getInt16(r,t){const n=this.subarray(r,r+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,t)}setInt16(r,t,n){const o=Rr(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt16(0,t,n),this.write(o,r)}getInt32(r,t){const n=this.subarray(r,r+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,t)}setInt32(r,t,n){const o=Rr(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt32(0,t,n),this.write(o,r)}getBigInt64(r,t){const n=this.subarray(r,r+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,t)}setBigInt64(r,t,n){const o=Rr(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigInt64(0,t,n),this.write(o,r)}getUint8(r){const t=this.subarray(r,r+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0)}setUint8(r,t){const n=zn(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,t),this.write(n,r)}getUint16(r,t){const n=this.subarray(r,r+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,t)}setUint16(r,t,n){const o=Rr(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint16(0,t,n),this.write(o,r)}getUint32(r,t){const n=this.subarray(r,r+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,t)}setUint32(r,t,n){const o=Rr(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint32(0,t,n),this.write(o,r)}getBigUint64(r,t){const n=this.subarray(r,r+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,t)}setBigUint64(r,t,n){const o=Rr(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigUint64(0,t,n),this.write(o,r)}getFloat32(r,t){const n=this.subarray(r,r+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,t)}setFloat32(r,t,n){const o=Rr(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat32(0,t,n),this.write(o,r)}getFloat64(r,t){const n=this.subarray(r,r+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,t)}setFloat64(r,t,n){const o=Rr(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat64(0,t,n),this.write(o,r)}equals(r){if(r==null||!(r instanceof yt)||r.bufs.length!==this.bufs.length)return!1;for(let t=0;t<this.bufs.length;t++)if(!Hr(this.bufs[t],r.bufs[t]))return!1;return!0}static fromUint8Arrays(r,t){const n=new yt;return n.bufs=r,t==null&&(t=r.reduce((o,i)=>o+i.byteLength,0)),n.length=t,n}}const PJ=parseInt("11111",2),Zv=parseInt("10000000",2),CJ=parseInt("01111111",2),v0={0:Qi,1:Qi,2:AJ,3:jJ,4:$J,5:RJ,6:IJ,16:Qi,22:Qi,48:Qi};function kd(e,r={offset:0}){const t=e[r.offset]&PJ;if(r.offset++,v0[t]!=null)return v0[t](e,r);throw new Error("No decoder for tag "+t)}function Ks(e,r){let t=0;if((e[r.offset]&Zv)===Zv){const n=e[r.offset]&CJ;let o="0x";r.offset++;for(let i=0;i<n;i++,r.offset++)o+=e[r.offset].toString(16).padStart(2,"0");t=parseInt(o,16)}else t=e[r.offset],r.offset++;return t}function Qi(e,r){Ks(e,r);const t=[];for(;!(r.offset>=e.byteLength);){const n=kd(e,r);if(n===null)break;t.push(n)}return t}function AJ(e,r){const t=Ks(e,r),n=r.offset,o=r.offset+t,i=[];for(let a=n;a<o;a++)a===n&&e[a]===0||i.push(e[a]);return r.offset+=t,Uint8Array.from(i)}function IJ(e,r){const t=Ks(e,r),n=r.offset+t,o=e[r.offset];r.offset++;let i=0,a=0;o<40?(i=0,a=o):o<80?(i=1,a=o-40):(i=2,a=o-80);let s=`${i}.${a}`,c=[];for(;r.offset<n;){const u=e[r.offset];if(r.offset++,c.push(u&127),u<128){c.reverse();let l=0;for(let d=0;d<c.length;d++)l+=c[d]<<d*7;s+=`.${l}`,c=[]}}return s}function RJ(e,r){return r.offset++,null}function jJ(e,r){const t=Ks(e,r),n=e[r.offset];r.offset++;const o=e.subarray(r.offset,r.offset+t-1);if(r.offset+=t,n!==0)throw new Error("Unused bits in bit string is unimplemented");return o}function $J(e,r){const t=Ks(e,r),n=e.subarray(r.offset,r.offset+t);return r.offset+=t,n}function NJ(e){let r=e.toString(16);r.length%2===1&&(r="0"+r);const t=new yt;for(let n=0;n<r.length;n+=2)t.append(Uint8Array.from([parseInt(`${r[n]}${r[n+1]}`,16)]));return t}function Vy(e){if(e.byteLength<128)return Uint8Array.from([e.byteLength]);const r=NJ(e.byteLength);return new yt(Uint8Array.from([r.byteLength|Zv]),r)}function Qv(e){const r=new yt,t=128;return(e.subarray()[0]&t)===t&&r.append(Uint8Array.from([0])),r.append(e),new yt(Uint8Array.from([2]),Vy(r),r)}function QS(e){const r=Uint8Array.from([0]),t=new yt(r,e);return new yt(Uint8Array.from([3]),Vy(t),t)}function _a(e,r=48){const t=new yt;for(const n of e)t.append(n);return new yt(Uint8Array.from([r]),Vy(t),t)}async function kJ(e,r,t,n){var a,s;const o=await crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:e.crv??"P-256"},!1,["verify"]);(a=n==null?void 0:n.signal)==null||a.throwIfAborted();const i=await crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},o,r,t.subarray());return(s=n==null?void 0:n.signal)==null||s.throwIfAborted(),i}const MJ=Uint8Array.from([6,8,42,134,72,206,61,3,1,7]),DJ=Uint8Array.from([6,5,43,129,4,0,34]),LJ=Uint8Array.from([6,5,43,129,4,0,35]),UJ={ext:!0,kty:"EC",crv:"P-256"},FJ={ext:!0,kty:"EC",crv:"P-384"},BJ={ext:!0,kty:"EC",crv:"P-521"},Mp=32,Dp=48,Lp=66;function XS(e){const r=kd(e);return xJ(r)}function xJ(e){const r=e[1][1][0],t=1;let n,o;if(r.byteLength===Mp*2+1)return n=Se(r.subarray(t,t+Mp),"base64url"),o=Se(r.subarray(t+Mp),"base64url"),new Up({...UJ,key_ops:["verify"],x:n,y:o});if(r.byteLength===Dp*2+1)return n=Se(r.subarray(t,t+Dp),"base64url"),o=Se(r.subarray(t+Dp),"base64url"),new Up({...FJ,key_ops:["verify"],x:n,y:o});if(r.byteLength===Lp*2+1)return n=Se(r.subarray(t,t+Lp),"base64url"),o=Se(r.subarray(t+Lp),"base64url"),new Up({...BJ,key_ops:["verify"],x:n,y:o});throw new Tt(`coordinates were wrong length, got ${r.byteLength}, expected 65, 97 or 133`)}function VJ(e){return _a([Qv(Uint8Array.from([1])),_a([WJ(e.crv)],160),_a([QS(new yt(Uint8Array.from([4]),bt(e.x??"","base64url"),bt(e.y??"","base64url")))],161)]).subarray()}function WJ(e){if(e==="P-256")return MJ;if(e==="P-384")return DJ;if(e==="P-521")return LJ;throw new Tt(`Invalid curve ${e}`)}class Up{constructor(r){g(this,"type","ECDSA");g(this,"jwk");g(this,"_raw");this.jwk=r}get raw(){return this._raw==null&&(this._raw=VJ(this.jwk)),this._raw}toMultihash(){return qr.digest(qy(this))}toCID(){return G.createV1(114,this.toMultihash())}toString(){return Be.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:Hr(this.raw,r.raw)}async verify(r,t,n){return kJ(this.jwk,t,r,n)}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ht=BigInt(0),ot=BigInt(1),Fp=BigInt(2),zJ=BigInt(8),qJ={zip215:!0};function HJ(e,r,t,n){const o=e.sqr(t),i=e.sqr(n),a=e.add(e.mul(r.a,o),i),s=e.add(e.ONE,e.mul(r.d,e.mul(o,i)));return e.eql(a,s)}function GJ(e,r={}){const{Fp:t,Fn:n}=HP("edwards",e,r),{h:o,n:i}=e;K0(r,{},{uvRatio:"function"});const a=Fp<<BigInt(n.BYTES*8)-ot,s=y=>t.create(y),c=r.uvRatio||((y,_)=>{try{return{isValid:!0,value:t.sqrt(t.div(y,_))}}catch{return{isValid:!1,value:Ht}}});if(!HJ(t,e,e.Gx,e.Gy))throw new Error("bad curve params: generator point");function u(y,_,b=!1){const w=b?ot:Ht;return Ji("coordinate "+y,_,w,a),_}function l(y){if(!(y instanceof p))throw new Error("ExtendedPoint expected")}const d=tb((y,_)=>{const{ex:b,ey:w,ez:S}=y,E=y.is0();_==null&&(_=E?zJ:t.inv(S));const T=s(b*_),C=s(w*_),P=s(S*_);if(E)return{x:Ht,y:ot};if(P!==ot)throw new Error("invZ was invalid");return{x:T,y:C}}),h=tb(y=>{const{a:_,d:b}=e;if(y.is0())throw new Error("bad point: ZERO");const{ex:w,ey:S,ez:E,et:T}=y,C=s(w*w),P=s(S*S),I=s(E*E),M=s(I*I),F=s(C*_),Q=s(I*s(F+P)),H=s(M+s(b*s(C*P)));if(Q!==H)throw new Error("bad point: equation left != right (1)");const Z=s(w*S),fe=s(E*T);if(Z!==fe)throw new Error("bad point: equation left != right (2)");return!0});class p{constructor(_,b,w,S){this.ex=u("x",_),this.ey=u("y",b),this.ez=u("z",w,!0),this.et=u("t",S),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(_){if(_ instanceof p)throw new Error("extended point not allowed");const{x:b,y:w}=_||{};return u("x",b),u("y",w),new p(b,w,ot,s(b*w))}static normalizeZ(_){return KP(p,"ez",_)}static msm(_,b){return YP(p,n,_,b)}_setWindowSize(_){this.precompute(_)}precompute(_=8,b=!0){return v.setWindowSize(this,_),b||this.multiply(Fp),this}assertValidity(){h(this)}equals(_){l(_);const{ex:b,ey:w,ez:S}=this,{ex:E,ey:T,ez:C}=_,P=s(b*C),I=s(E*S),M=s(w*C),F=s(T*S);return P===I&&M===F}is0(){return this.equals(p.ZERO)}negate(){return new p(s(-this.ex),this.ey,this.ez,s(-this.et))}double(){const{a:_}=e,{ex:b,ey:w,ez:S}=this,E=s(b*b),T=s(w*w),C=s(Fp*s(S*S)),P=s(_*E),I=b+w,M=s(s(I*I)-E-T),F=P+T,Q=F-C,H=P-T,Z=s(M*Q),fe=s(F*H),V=s(M*H),ie=s(Q*F);return new p(Z,fe,ie,V)}add(_){l(_);const{a:b,d:w}=e,{ex:S,ey:E,ez:T,et:C}=this,{ex:P,ey:I,ez:M,et:F}=_,Q=s(S*P),H=s(E*I),Z=s(C*w*F),fe=s(T*M),V=s((S+E)*(P+I)-Q-H),ie=fe-Z,W=fe+Z,te=s(H-b*Q),K=s(V*ie),L=s(W*te),re=s(V*te),pe=s(ie*W);return new p(K,L,pe,re)}subtract(_){return this.add(_.negate())}multiply(_){const b=_;Ji("scalar",b,ot,i);const{p:w,f:S}=v.wNAFCached(this,b,p.normalizeZ);return p.normalizeZ([w,S])[0]}multiplyUnsafe(_,b=p.ZERO){const w=_;return Ji("scalar",w,Ht,i),w===Ht?p.ZERO:this.is0()||w===ot?this:v.wNAFCachedUnsafe(this,w,p.normalizeZ,b)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return v.wNAFCachedUnsafe(this,i).is0()}toAffine(_){return d(this,_)}clearCofactor(){return o===ot?this:this.multiplyUnsafe(o)}static fromBytes(_,b=!1){return xP(_),this.fromHex(_,b)}static fromHex(_,b=!1){const{d:w,a:S}=e,E=t.BYTES;_=ur("pointHex",_,E),Hp("zip215",b);const T=_.slice(),C=_[E-1];T[E-1]=C&-129;const P=Gp(T),I=b?a:t.ORDER;Ji("pointHex.y",P,Ht,I);const M=s(P*P),F=s(M-ot),Q=s(w*M-S);let{isValid:H,value:Z}=c(F,Q);if(!H)throw new Error("Point.fromHex: invalid y coordinate");const fe=(Z&ot)===ot,V=(C&128)!==0;if(!b&&Z===Ht&&V)throw new Error("Point.fromHex: x=0 and x_0=1");return V!==fe&&(Z=s(-Z)),p.fromAffine({x:Z,y:P})}static fromPrivateScalar(_){return p.BASE.multiply(_)}toBytes(){const{x:_,y:b}=this.toAffine(),w=Y0(b,t.BYTES);return w[w.length-1]|=_&ot?128:0,w}toRawBytes(){return this.toBytes()}toHex(){return VP(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}p.BASE=new p(e.Gx,e.Gy,ot,s(e.Gx*e.Gy)),p.ZERO=new p(Ht,ot,ot,Ht),p.Fp=t,p.Fn=n;const v=GP(p,n.BYTES*8);return p}function KJ(e,r){K0(r,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:t,hash:n}=r,{BASE:o,Fp:i,Fn:a}=e,s=a.ORDER,c=r.randomBytes||BP,u=r.adjustScalarBytes||(T=>T),l=r.domain||((T,C,P)=>{if(Hp("phflag",P),C.length||P)throw new Error("Contexts/pre-hash are not supported");return T});function d(T){return a.create(T)}function h(T){return d(Gp(T))}function p(T){const C=i.BYTES;T=ur("private key",T,C);const P=ur("hashed private key",n(T),2*C),I=u(P.slice(0,C)),M=P.slice(C,2*C),F=h(I);return{head:I,prefix:M,scalar:F}}function v(T){const{head:C,prefix:P,scalar:I}=p(T),M=o.multiply(I),F=M.toBytes();return{head:C,prefix:P,scalar:I,point:M,pointBytes:F}}function y(T){return v(T).pointBytes}function _(T=Uint8Array.of(),...C){const P=eb(...C);return h(n(l(P,ur("context",T),!!t)))}function b(T,C,P={}){T=ur("message",T),t&&(T=t(T));const{prefix:I,scalar:M,pointBytes:F}=v(C),Q=_(P.context,I,T),H=o.multiply(Q).toBytes(),Z=_(P.context,H,F,T),fe=d(Q+Z*M);Ji("signature.s",fe,Ht,s);const V=i.BYTES,ie=eb(H,Y0(fe,V));return ur("result",ie,V*2)}const w=qJ;function S(T,C,P,I=w){const{context:M,zip215:F}=I,Q=i.BYTES;T=ur("signature",T,2*Q),C=ur("message",C),P=ur("publicKey",P,Q),F!==void 0&&Hp("zip215",F),t&&(C=t(C));const H=Gp(T.slice(Q,2*Q));let Z,fe,V;try{Z=e.fromHex(P,F),fe=e.fromHex(T.slice(0,Q),F),V=o.multiplyUnsafe(H)}catch{return!1}if(!F&&Z.isSmallOrder())return!1;const ie=_(M,fe.toBytes(),Z.toBytes(),C);return fe.add(Z.multiplyUnsafe(ie)).subtract(V).clearCofactor().is0()}return o.precompute(8),{getPublicKey:y,sign:b,verify:S,utils:{getExtendedPublicKey:v,randomPrivateKey:()=>c(i.BYTES),precompute(T=8,C=e.BASE){return C.precompute(T,!1)}},Point:e}}function YJ(e){const r={a:e.a,d:e.d,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},t=e.Fp,n=a_(r.n,e.nBitLength,!0),o={Fp:t,Fn:n,uvRatio:e.uvRatio},i={hash:e.hash,randomBytes:e.randomBytes,adjustScalarBytes:e.adjustScalarBytes,domain:e.domain,prehash:e.prehash,mapToCurve:e.mapToCurve};return{CURVE:r,curveOpts:o,eddsaOpts:i}}function ZJ(e,r){return Object.assign({},r,{ExtendedPoint:r.Point,CURVE:e})}function QJ(e){const{CURVE:r,curveOpts:t,eddsaOpts:n}=YJ(e),o=GJ(r,t),i=KJ(o,n);return ZJ(e,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const XJ=BigInt(1),_0=BigInt(2);BigInt(3);const JJ=BigInt(5),eee=BigInt(8),Md={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:eee,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function tee(e){const r=BigInt(10),t=BigInt(20),n=BigInt(40),o=BigInt(80),i=Md.p,s=e*e%i*e%i,c=we(s,_0,i)*s%i,u=we(c,XJ,i)*e%i,l=we(u,JJ,i)*u%i,d=we(l,r,i)*l%i,h=we(d,t,i)*d%i,p=we(h,n,i)*h%i,v=we(p,o,i)*p%i,y=we(v,o,i)*p%i,_=we(y,r,i)*l%i;return{pow_p_5_8:we(_,_0,i)*e%i,b2:s}}function ree(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const y0=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function nee(e,r){const t=Md.p,n=Gt(r*r*r,t),o=Gt(n*n*r,t),i=tee(e*o).pow_p_5_8;let a=Gt(e*n*i,t);const s=Gt(r*a*a,t),c=a,u=Gt(a*y0,t),l=s===e,d=s===Gt(-e,t),h=s===Gt(-e*y0,t);return l&&(a=c),(d||h)&&(a=u),ZP(a,t)&&(a=Gt(-a,t)),{isValid:l||d,value:a}}const oee=a_(Md.p,void 0,!0),iee={...Md,Fp:oee,hash:zP,adjustScalarBytes:ree,uvRatio:nee},aee=QJ(iee);class b0 extends Error{constructor(r="An error occurred while verifying a message"){super(r),this.name="VerificationError"}}class uee extends Error{constructor(r="Missing Web Crypto API"){super(r),this.name="WebCryptoMissingError"}}const Ia={get(e=globalThis){const r=e.crypto;if((r==null?void 0:r.subtle)==null)throw new uee("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return r}},JS=32;let Bp;const see=(async()=>{try{return await Ia.get().subtle.generateKey({name:"Ed25519"},!0,["sign","verify"]),!0}catch{return!1}})();async function cee(e,r,t){if(e.buffer instanceof ArrayBuffer){const n=await Ia.get().subtle.importKey("raw",e.buffer,{name:"Ed25519"},!1,["verify"]);return await Ia.get().subtle.verify({name:"Ed25519"},n,r,t instanceof Uint8Array?t:t.subarray())}throw new TypeError("WebCrypto does not support SharedArrayBuffer for Ed25519 keys")}function lee(e,r,t){return aee.verify(r,t instanceof Uint8Array?t:t.subarray(),e)}async function fee(e,r,t){return Bp==null&&(Bp=await see),Bp?cee(e,r,t):lee(e,r,t)}function eT(e){return e==null?!1:typeof e.then=="function"&&typeof e.catch=="function"&&typeof e.finally=="function"}class dee{constructor(r){g(this,"type","Ed25519");g(this,"raw");this.raw=rT(r,JS)}toMultihash(){return qr.digest(qy(this))}toCID(){return G.createV1(114,this.toMultihash())}toString(){return Be.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:Hr(this.raw,r.raw)}verify(r,t,n){var i;(i=n==null?void 0:n.signal)==null||i.throwIfAborted();const o=fee(this.raw,t,r);return eT(o)?o.then(a=>{var s;return(s=n==null?void 0:n.signal)==null||s.throwIfAborted(),a}):o}}function tT(e){return e=rT(e,JS),new dee(e)}function rT(e,r){if(e=Uint8Array.from(e??[]),e.length!==r)throw new Tt(`Key must be a Uint8Array of length ${r}, got ${e.length}`);return e}const Wy=new Float32Array([-0]),kr=new Uint8Array(Wy.buffer);function hee(e,r,t){Wy[0]=e,r[t]=kr[0],r[t+1]=kr[1],r[t+2]=kr[2],r[t+3]=kr[3]}function pee(e,r){return kr[0]=e[r],kr[1]=e[r+1],kr[2]=e[r+2],kr[3]=e[r+3],Wy[0]}const zy=new Float64Array([-0]),Xe=new Uint8Array(zy.buffer);function vee(e,r,t){zy[0]=e,r[t]=Xe[0],r[t+1]=Xe[1],r[t+2]=Xe[2],r[t+3]=Xe[3],r[t+4]=Xe[4],r[t+5]=Xe[5],r[t+6]=Xe[6],r[t+7]=Xe[7]}function _ee(e,r){return Xe[0]=e[r],Xe[1]=e[r+1],Xe[2]=e[r+2],Xe[3]=e[r+3],Xe[4]=e[r+4],Xe[5]=e[r+5],Xe[6]=e[r+6],Xe[7]=e[r+7],zy[0]}const yee=BigInt(Number.MAX_SAFE_INTEGER),bee=BigInt(Number.MIN_SAFE_INTEGER);class tt{constructor(r,t){g(this,"lo");g(this,"hi");this.lo=r|0,this.hi=t|0}toNumber(r=!1){if(!r&&this.hi>>>31>0){const t=~this.lo+1>>>0;let n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(r=!1){if(r)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const t=~this.lo+1>>>0;let n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(BigInt(t)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(r=!1){return this.toBigInt(r).toString()}zzEncode(){const r=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^r)>>>0,this.lo=(this.lo<<1^r)>>>0,this}zzDecode(){const r=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^r)>>>0,this.hi=(this.hi>>>1^r)>>>0,this}length(){const r=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?r<16384?r<128?1:2:r<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}static fromBigInt(r){if(r===0n)return Nn;if(r<yee&&r>bee)return this.fromNumber(Number(r));const t=r<0n;t&&(r=-r);let n=r>>32n,o=r-(n<<32n);return t&&(n=~n|0n,o=~o|0n,++o>m0&&(o=0n,++n>m0&&(n=0n))),new tt(Number(o),Number(n))}static fromNumber(r){if(r===0)return Nn;const t=r<0;t&&(r=-r);let n=r>>>0,o=(r-n)/4294967296>>>0;return t&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new tt(n,o)}static from(r){return typeof r=="number"?tt.fromNumber(r):typeof r=="bigint"?tt.fromBigInt(r):typeof r=="string"?tt.fromBigInt(BigInt(r)):r.low!=null||r.high!=null?new tt(r.low>>>0,r.high>>>0):Nn}}const Nn=new tt(0,0);Nn.toBigInt=function(){return 0n};Nn.zzEncode=Nn.zzDecode=function(){return this};Nn.length=function(){return 1};const m0=4294967296n;function mee(e){let r=0,t=0;for(let n=0;n<e.length;++n)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:(t&64512)===55296&&(e.charCodeAt(n+1)&64512)===56320?(++n,r+=4):r+=3;return r}function gee(e,r,t){if(t-r<1)return"";let o;const i=[];let a=0,s;for(;r<t;)s=e[r++],s<128?i[a++]=s:s>191&&s<224?i[a++]=(s&31)<<6|e[r++]&63:s>239&&s<365?(s=((s&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,i[a++]=55296+(s>>10),i[a++]=56320+(s&1023)):i[a++]=(s&15)<<12|(e[r++]&63)<<6|e[r++]&63,a>8191&&((o??(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o!=null?(a>0&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))}function nT(e,r,t){const n=t;let o,i;for(let a=0;a<e.length;++a)o=e.charCodeAt(a),o<128?r[t++]=o:o<2048?(r[t++]=o>>6|192,r[t++]=o&63|128):(o&64512)===55296&&((i=e.charCodeAt(a+1))&64512)===56320?(o=65536+((o&1023)<<10)+(i&1023),++a,r[t++]=o>>18|240,r[t++]=o>>12&63|128,r[t++]=o>>6&63|128,r[t++]=o&63|128):(r[t++]=o>>12|224,r[t++]=o>>6&63|128,r[t++]=o&63|128);return t-n}function Rt(e,r){return RangeError(`index out of range: ${e.pos} + ${r??1} > ${e.len}`)}function gc(e,r){return(e[r-4]|e[r-3]<<8|e[r-2]<<16|e[r-1]<<24)>>>0}class wee{constructor(r){g(this,"buf");g(this,"pos");g(this,"len");g(this,"_slice",Uint8Array.prototype.subarray);this.buf=r,this.pos=0,this.len=r.length}uint32(){let r=4294967295;if(r=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(r=(r|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return r;if((this.pos+=5)>this.len)throw this.pos=this.len,Rt(this,10);return r}int32(){return this.uint32()|0}sint32(){const r=this.uint32();return r>>>1^-(r&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw Rt(this,4);return gc(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw Rt(this,4);return gc(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw Rt(this,4);const r=pee(this.buf,this.pos);return this.pos+=4,r}double(){if(this.pos+8>this.len)throw Rt(this,4);const r=_ee(this.buf,this.pos);return this.pos+=8,r}bytes(){const r=this.uint32(),t=this.pos,n=this.pos+r;if(n>this.len)throw Rt(this,r);return this.pos+=r,t===n?new Uint8Array(0):this.buf.subarray(t,n)}string(){const r=this.bytes();return gee(r,0,r.length)}skip(r){if(typeof r=="number"){if(this.pos+r>this.len)throw Rt(this,r);this.pos+=r}else do if(this.pos>=this.len)throw Rt(this);while(this.buf[this.pos++]&128);return this}skipType(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${r} at offset ${this.pos}`)}return this}readLongVarint(){const r=new tt(0,0);let t=0;if(this.len-this.pos>4){for(;t<4;++t)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw Rt(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,r}if(this.len-this.pos>4){for(;t<5;++t)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;t<5;++t){if(this.pos>=this.len)throw Rt(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw Rt(this,8);const r=gc(this.buf,this.pos+=4),t=gc(this.buf,this.pos+=4);return new tt(r,t)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const r=eS(this.buf,this.pos);return this.pos+=qn(r),r}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function Oee(e){return new wee(e instanceof Uint8Array?e:e.subarray())}function oT(e,r,t){const n=Oee(e);return r.decode(n,void 0,t)}function Eee(e){let n,o=8192;return function(a){if(a<1||a>4096)return zn(a);o+a>8192&&(n=zn(8192),o=0);const s=n.subarray(o,o+=a);return o&7&&(o=(o|7)+1),s}}class ia{constructor(r,t,n){g(this,"fn");g(this,"len");g(this,"next");g(this,"val");this.fn=r,this.len=t,this.next=void 0,this.val=n}}function xp(){}class See{constructor(r){g(this,"head");g(this,"tail");g(this,"len");g(this,"next");this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}}const Tee=Eee();function Pee(e){return globalThis.Buffer!=null?zn(e):Tee(e)}class Xv{constructor(){g(this,"len");g(this,"head");g(this,"tail");g(this,"states");this.len=0,this.head=new ia(xp,0,0),this.tail=this.head,this.states=null}_push(r,t,n){return this.tail=this.tail.next=new ia(r,t,n),this.len+=t,this}uint32(r){return this.len+=(this.tail=this.tail.next=new Aee((r=r>>>0)<128?1:r<16384?2:r<2097152?3:r<268435456?4:5,r)).len,this}int32(r){return r<0?this._push(wc,10,tt.fromNumber(r)):this.uint32(r)}sint32(r){return this.uint32((r<<1^r>>31)>>>0)}uint64(r){const t=tt.fromBigInt(r);return this._push(wc,t.length(),t)}uint64Number(r){return this._push(Uv,qn(r),r)}uint64String(r){return this.uint64(BigInt(r))}int64(r){return this.uint64(r)}int64Number(r){return this.uint64Number(r)}int64String(r){return this.uint64String(r)}sint64(r){const t=tt.fromBigInt(r).zzEncode();return this._push(wc,t.length(),t)}sint64Number(r){const t=tt.fromNumber(r).zzEncode();return this._push(wc,t.length(),t)}sint64String(r){return this.sint64(BigInt(r))}bool(r){return this._push(Vp,1,r?1:0)}fixed32(r){return this._push(Xi,4,r>>>0)}sfixed32(r){return this.fixed32(r)}fixed64(r){const t=tt.fromBigInt(r);return this._push(Xi,4,t.lo)._push(Xi,4,t.hi)}fixed64Number(r){const t=tt.fromNumber(r);return this._push(Xi,4,t.lo)._push(Xi,4,t.hi)}fixed64String(r){return this.fixed64(BigInt(r))}sfixed64(r){return this.fixed64(r)}sfixed64Number(r){return this.fixed64Number(r)}sfixed64String(r){return this.fixed64String(r)}float(r){return this._push(hee,4,r)}double(r){return this._push(vee,8,r)}bytes(r){const t=r.length>>>0;return t===0?this._push(Vp,1,0):this.uint32(t)._push(Iee,t,r)}string(r){const t=mee(r);return t!==0?this.uint32(t)._push(nT,t,r):this._push(Vp,1,0)}fork(){return this.states=new See(this),this.head=this.tail=new ia(xp,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ia(xp,0,0),this.len=0),this}ldelim(){const r=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=r.next,this.tail=t,this.len+=n),this}finish(){let r=this.head.next;const t=Pee(this.len);let n=0;for(;r!=null;)r.fn(r.val,t,n),n+=r.len,r=r.next;return t}}function Vp(e,r,t){r[t]=e&255}function Cee(e,r,t){for(;e>127;)r[t++]=e&127|128,e>>>=7;r[t]=e}class Aee extends ia{constructor(t,n){super(Cee,t,n);g(this,"next");this.next=void 0}}function wc(e,r,t){for(;e.hi!==0;)r[t++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)r[t++]=e.lo&127|128,e.lo=e.lo>>>7;r[t++]=e.lo}function Xi(e,r,t){r[t]=e&255,r[t+1]=e>>>8&255,r[t+2]=e>>>16&255,r[t+3]=e>>>24}function Iee(e,r,t){r.set(e,t)}globalThis.Buffer!=null&&(Xv.prototype.bytes=function(e){const r=e.length>>>0;return this.uint32(r),r>0&&this._push(Ree,r,e),this},Xv.prototype.string=function(e){const r=globalThis.Buffer.byteLength(e);return this.uint32(r),r>0&&this._push(jee,r,e),this});function Ree(e,r,t){r.set(e,t)}function jee(e,r,t){e.length<40?nT(e,r,t):r.utf8Write!=null?r.utf8Write(e,t):r.set(bt(e),t)}function $ee(){return new Xv}function iT(e,r){const t=$ee();return r.encode(e,t,{lengthDelimited:!1}),t.finish()}var _l;(function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"})(_l||(_l={}));function aT(e,r,t,n){return{name:e,type:r,encode:t,decode:n}}function Nee(e){function r(o){if(e[o.toString()]==null)throw new Error("Invalid enum value");return e[o]}const t=function(i,a){const s=r(i);a.int32(s)},n=function(i){const a=i.int32();return r(a)};return aT("enum",_l.VARINT,t,n)}function uT(e,r){return aT("message",_l.LENGTH_DELIMITED,e,r)}var ze;(function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.secp256k1="secp256k1",e.ECDSA="ECDSA"})(ze||(ze={}));var Jv;(function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.secp256k1=2]="secp256k1",e[e.ECDSA=3]="ECDSA"})(Jv||(Jv={}));(function(e){e.codec=()=>Nee(Jv)})(ze||(ze={}));var Wo;(function(e){let r;e.codec=()=>(r==null&&(r=uT((t,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),t.Type!=null&&(n.uint32(8),ze.codec().encode(t.Type,n)),t.Data!=null&&(n.uint32(18),n.bytes(t.Data)),o.lengthDelimited!==!1&&n.ldelim()},(t,n,o={})=>{const i={},a=n==null?t.len:t.pos+n;for(;t.pos<a;){const s=t.uint32();switch(s>>>3){case 1:{i.Type=ze.codec().decode(t);break}case 2:{i.Data=t.bytes();break}default:{t.skipType(s&7);break}}}return i})),r),e.encode=t=>iT(t,e.codec()),e.decode=(t,n)=>oT(t,e.codec(),n)})(Wo||(Wo={}));var g0;(function(e){let r;e.codec=()=>(r==null&&(r=uT((t,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),t.Type!=null&&(n.uint32(8),ze.codec().encode(t.Type,n)),t.Data!=null&&(n.uint32(18),n.bytes(t.Data)),o.lengthDelimited!==!1&&n.ldelim()},(t,n,o={})=>{const i={},a=n==null?t.len:t.pos+n;for(;t.pos<a;){const s=t.uint32();switch(s>>>3){case 1:{i.Type=ze.codec().decode(t);break}case 2:{i.Data=t.bytes();break}default:{t.skipType(s&7);break}}}return i})),r),e.encode=t=>iT(t,e.codec()),e.decode=(t,n)=>oT(t,e.codec(),n)})(g0||(g0={}));class kee{constructor(r,t){g(this,"type","RSA");g(this,"jwk");g(this,"_raw");g(this,"_multihash");this.jwk=r,this._multihash=t}get raw(){return this._raw==null&&(this._raw=Fee(this.jwk)),this._raw}toMultihash(){return this._multihash}toCID(){return G.createV1(114,this._multihash)}toString(){return Be.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:Hr(this.raw,r.raw)}verify(r,t,n){return Vee(this.jwk,t,r,n)}}const Mee=18,Dee=1062,Lee=Uint8Array.from([48,13,6,9,42,134,72,134,247,13,1,1,1,5,0]);function Uee(e){const r=kd(e[1],{offset:0});return{kty:"RSA",n:Se(r[0],"base64url"),e:Se(r[1],"base64url")}}function Fee(e){if(e.n==null||e.e==null)throw new Tt("JWK was missing components");return _a([Lee,QS(_a([Qv(bt(e.n,"base64url")),Qv(bt(e.e,"base64url"))]))]).subarray()}function Bee(e,r){if(e.byteLength>=Dee)throw new Fy("Key size is too large");const t=kd(e,{offset:0});return xee(t,e,r)}function xee(e,r,t){const n=Uee(e);if(t==null){const o=QP(Wo.encode({Type:ze.RSA,Data:r}));t=Ta(Mee,o)}return new kee(n,t)}async function Vee(e,r,t,n){var a,s;const o=await Ia.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);(a=n==null?void 0:n.signal)==null||a.throwIfAborted();const i=await Ia.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},o,r,t instanceof Uint8Array?t:t.subarray());return(s=n==null?void 0:n.signal)==null||s.throwIfAborted(),i}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yl={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const Wee=BigInt(1),e_=BigInt(2),w0=(e,r)=>(e+r/e_)/r;function zee(e){const r=yl.p,t=BigInt(3),n=BigInt(6),o=BigInt(11),i=BigInt(22),a=BigInt(23),s=BigInt(44),c=BigInt(88),u=e*e*e%r,l=u*u*e%r,d=we(l,t,r)*l%r,h=we(d,t,r)*l%r,p=we(h,e_,r)*u%r,v=we(p,o,r)*p%r,y=we(v,i,r)*v%r,_=we(y,s,r)*y%r,b=we(_,c,r)*_%r,w=we(b,s,r)*y%r,S=we(w,t,r)*l%r,E=we(S,a,r)*v%r,T=we(E,n,r)*u%r,C=we(T,e_,r);if(!t_.eql(t_.sqr(C),e))throw new Error("Cannot find square root");return C}const t_=a_(yl.p,void 0,void 0,{sqrt:zee}),bl=XP({...yl,Fp:t_,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const r=yl.n,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Wee*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,a=BigInt("0x100000000000000000000000000000000"),s=w0(i*e,r),c=w0(-n*e,r);let u=Gt(e-s*t-c*o,r),l=Gt(-s*n-c*i,r);const d=u>a,h=l>a;if(d&&(u=r-u),h&&(l=r-l),u>a||l>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:h,k2:l}}}},qP);function qee(e,r,t,n){var i;const o=_y.digest(t instanceof Uint8Array?t:t.subarray());if(eT(o))return o.then(({digest:a})=>{var s;return(s=n==null?void 0:n.signal)==null||s.throwIfAborted(),bl.verify(r,a,e)}).catch(a=>{throw a.name==="AbortError"?a:new b0(String(a))});try{return(i=n==null?void 0:n.signal)==null||i.throwIfAborted(),bl.verify(r,o.digest,e)}catch(a){throw new b0(String(a))}}class Hee{constructor(r){g(this,"type","secp256k1");g(this,"raw");g(this,"_key");this._key=Kee(r),this.raw=Gee(this._key)}toMultihash(){return qr.digest(qy(this))}toCID(){return G.createV1(114,this.toMultihash())}toString(){return Be.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:Hr(this.raw,r.raw)}verify(r,t,n){return qee(this._key,t,r,n)}}function sT(e){return new Hee(e)}function Gee(e){return bl.ProjectivePoint.fromHex(e).toRawBytes(!0)}function Kee(e){try{return bl.ProjectivePoint.fromHex(e),e}catch(r){throw new Fy(String(r))}}function Yee(e,r){const{Type:t,Data:n}=Wo.decode(e),o=n??new Uint8Array;switch(t){case ze.RSA:return Bee(o,r);case ze.Ed25519:return tT(o);case ze.secp256k1:return sT(o);case ze.ECDSA:return XS(o);default:throw new By}}function Zee(e){const{Type:r,Data:t}=Wo.decode(e.digest),n=t??new Uint8Array;switch(r){case ze.Ed25519:return tT(n);case ze.secp256k1:return sT(n);case ze.ECDSA:return XS(n);default:throw new By}}function qy(e){return Wo.encode({Type:ze[e.type],Data:e.raw})}const cT=Symbol.for("nodejs.util.inspect.custom"),Qee=114;var z0;class Hy{constructor(r){g(this,"type");g(this,"multihash");g(this,"publicKey");g(this,"string");g(this,z0,!0);this.type=r.type,this.multihash=r.multihash,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}toString(){return this.string==null&&(this.string=Be.encode(this.multihash.bytes).slice(1)),this.string}toMultihash(){return this.multihash}toCID(){return G.createV1(Qee,this.multihash)}toJSON(){return this.toString()}equals(r){var t;if(r==null)return!1;if(r instanceof Uint8Array)return Hr(this.multihash.bytes,r);if(typeof r=="string")return this.toString()===r;if(((t=r==null?void 0:r.toMultihash())==null?void 0:t.bytes)!=null)return Hr(this.multihash.bytes,r.toMultihash().bytes);throw new Error("not valid Id")}[(z0=zS,cT)](){return`PeerId(${this.toString()})`}}class Xee extends Hy{constructor(t){super({...t,type:"RSA"});g(this,"type","RSA");g(this,"publicKey");this.publicKey=t.publicKey}}class Jee extends Hy{constructor(t){super({...t,type:"Ed25519"});g(this,"type","Ed25519");g(this,"publicKey");this.publicKey=t.publicKey}}class ete extends Hy{constructor(t){super({...t,type:"secp256k1"});g(this,"type","secp256k1");g(this,"publicKey");this.publicKey=t.publicKey}}const tte=2336;var q0,H0;class lT{constructor(r){g(this,"type","url");g(this,"multihash");g(this,"publicKey");g(this,"url");g(this,q0,!0);this.url=r.toString(),this.multihash=qr.digest(bt(this.url))}[(H0=cT,q0=zS,H0)](){return`PeerId(${this.url})`}toString(){return this.toCID().toString()}toMultihash(){return this.multihash}toCID(){return G.createV1(tte,this.toMultihash())}toJSON(){return this.toString()}equals(r){return r==null?!1:(r instanceof Uint8Array&&(r=Se(r)),r.toString()===this.toString())}}const rte=114,O0=2336;function dt(e,r){let t;if(e.charAt(0)==="1"||e.charAt(0)==="Q")t=HE(Be.decode(`z${e}`));else{if(e.startsWith("k51qzi5uqu5")||e.startsWith("kzwfwjn5ji4")||e.startsWith("k2k4r8")||e.startsWith("bafz"))return nte(G.parse(e));throw new Tt('Please pass a multibase decoder for strings that do not start with "1" or "Q"')}return fT(t)}function fT(e){if(ite(e))return new Xee({multihash:e});if(ote(e))try{const r=Zee(e);if(r.type==="Ed25519")return new Jee({multihash:e,publicKey:r});if(r.type==="secp256k1")return new ete({multihash:e,publicKey:r})}catch{const t=Se(e.digest);return new lT(new URL(t))}throw new HS("Supplied PeerID Multihash is invalid")}function nte(e){if((e==null?void 0:e.multihash)==null||e.version==null||e.version===1&&e.code!==rte&&e.code!==O0)throw new qS("Supplied PeerID CID is invalid");if(e.code===O0){const r=Se(e.multihash.digest);return new lT(new URL(r))}return fT(e.multihash)}function ote(e){return e.code===qr.code}function ite(e){return e.code===_y.code}function dT(e){return async function(t={}){const n=await e.post("bitswap/stat",{searchParams:R(t),signal:t.signal,headers:t.headers});return ate(await n.json())}}function ate(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist??[]).map(r=>G.parse(r["/"])),peers:(e.Peers??[]).map(r=>dt(r)),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}function ute(e){return async function(t,n={}){return((await(await e.post("bitswap/wantlist",{signal:n.signal,searchParams:R({...n,peer:t.toString()}),headers:n.headers})).json()).Keys??[]).map(i=>G.parse(i["/"]))}}function ste(e){return async function(t={}){return((await(await e.post("bitswap/wantlist",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()).Keys??[]).map(o=>G.parse(o["/"]))}}function cte(e){return{wantlist:ste(e),wantlistForPeer:ute(e),stat:dT(e)}}function hT(e){return async function(t,n={}){const o=await e.post("block/get",{signal:n.signal,searchParams:R({arg:t.toString(),...n}),headers:n.headers});return new Uint8Array(await o.arrayBuffer())}}function lte(e){return async function r(t,n={}){const o=new AbortController,i=Tr([o.signal,n.signal]);let a;try{a=await(await e.post("block/put",{signal:i,searchParams:R(n),...await sn([t],o,n.headers)})).json()}catch(s){if(n.format==="dag-pb")return await r(t,{...n,format:"protobuf"});if(n.format==="dag-cbor")return await r(t,{...n,format:"cbor"});throw s}finally{i.clear()}return G.parse(a.Key)}}function fte(e){return async function*(t,n={}){Array.isArray(t)||(t=[t]);const o=await e.post("block/rm",{signal:n.signal,searchParams:R({arg:t.map(i=>i.toString()),"stream-channels":!0,...n}),headers:n.headers});for await(const i of o.ndjson())yield dte(i)}}function dte(e){const r={cid:G.parse(e.Hash)};return e.Error!=null&&(r.error=new Error(e.Error)),r}function hte(e){return async function(t,n={}){const i=await(await e.post("block/stat",{signal:n.signal,searchParams:R({arg:t.toString(),...n}),headers:n.headers})).json();return{cid:G.parse(i.Key),size:i.Size}}}function pte(e){return{get:hT(e),put:lte(e),rm:fte(e),stat:hte(e)}}function vte(e){return async function(t,n={}){const o=await e.post("bootstrap/add",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers}),{Peers:i}=await o.json();return{Peers:i.map(a=>ct(a))}}}function _te(e){return async function(t={}){const n=await e.post("bootstrap/list",{signal:t.signal,searchParams:R(t),headers:t.headers}),{Peers:o}=await n.json();return{Peers:o.map(i=>ct(i))}}}function yte(e){return async function(t,n={}){const o=await e.post("bootstrap/rm",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers}),{Peers:i}=await o.json();return{Peers:i.map(a=>ct(a))}}}function bte(e){return{add:vte(e),list:_te(e),rm:yte(e)}}function mte(e){return async function*(t,n={}){yield*(await e.post("cat",{signal:n.signal,searchParams:R({arg:t.toString(),...n}),headers:n.headers})).iterator()}}function gte(e){return async function(t={}){return(await e.post("commands",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()}}function wte(e){return async function(t={}){return await(await e.post("config/show",{signal:t.signal,searchParams:R({...t}),headers:t.headers})).json()}}function Ote(e){return async function(t,n={}){if(t==null)throw new Error("key argument is required");return(await(await e.post("config",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers})).json()).Value}}function Ete(e){return async function(t,n={}){const i=await(await e.post("config/profile/apply",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers})).json();return{original:i.OldCfg,updated:i.NewCfg}}}function Ste(e){return{apply:Ete(e)}}function Tte(e){return async function(t,n={}){const o=new AbortController,i=Tr([o.signal,n.signal]);try{await(await e.post("config/replace",{signal:i,searchParams:R(n),...await sn([bt(JSON.stringify(t))],o,n.headers)})).text()}finally{i.clear()}}}function Pte(e){return async function(t,n,o={}){if(typeof t!="string")throw new Error("Invalid key type");const i={...o,...Cte(t,n)};await(await e.post("config",{signal:o.signal,searchParams:R(i),headers:o.headers})).text()}}function Cte(e,r){switch(typeof r){case"boolean":return{arg:[e,r.toString()],bool:!0};case"string":return{arg:[e,r]};default:return{arg:[e,JSON.stringify(r)],json:!0}}}function Ate(e){return{getAll:wte(e),get:Ote(e),set:Pte(e),replace:Tte(e),profiles:Ste(e)}}function Ite(e){return async function*(t,n={}){yield*(await e.post("dag/export",{signal:n.signal,searchParams:R({arg:t.toString()}),headers:n.headers})).iterator()}}function Rte(e){return e[Symbol.asyncIterator]!=null}function jte(e){if(Rte(e))return(async()=>{for await(const r of e)return r})();for(const r of e)return r}async function*E0(e,r,t,n,o){const i=async u=>{const l=await t.getCodec(u.code),d=await n(u,o);return l.decode(d)},a=r.split("/").filter(Boolean);let s=await i(e),c=e;for(;a.length>0;){const u=a.shift();if(u==null)throw Xt(new Error(`Could not resolve path "${r}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(s,u))s=s[u],yield{value:s,remainderPath:a.join("/")};else throw Xt(new Error(`no link named "${u}" under ${c}`),"ERR_NO_LINK");const l=G.asCID(s);l!=null&&(c=l,s=await i(s))}yield{value:s,remainderPath:""}}function $te(e,r){const t=hT(e);return async function(o,i={}){if(i.path!=null){const l=i.localResolve===!0?await jte(E0(o,i.path,r,t,i)):await Nd(E0(o,i.path,r,t,i));if(l==null)throw Xt(new Error("Not found"),"ERR_NOT_FOUND");return l}const a=await r.getCodec(o.code),s=await t(o,i);return{value:a.decode(s),remainderPath:""}}}function Nte(e){return async function*(t,n={}){const o=new AbortController,i=Tr([o.signal,n.signal]);try{const{headers:a,body:s}=await sn(t,o,n.headers),c=await e.post("dag/import",{signal:i,headers:a,body:s,searchParams:R({"pin-roots":n.pinRoots})});for await(const{Root:u}of c.ndjson())if(u!==void 0){const{Cid:{"/":l},PinErrorMsg:d}=u;yield{root:{cid:G.parse(l),pinErrorMsg:d}}}}finally{i.clear()}}}function kte(e,r){return async function(n,o={}){const i={storeCodec:"dag-cbor",hashAlg:"sha2-256",...o};let a;if(i.inputCodec!=null){if(!(n instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");a=n}else a=(await r.getCodec(i.storeCodec??"dag-cbor")).encode(n),i.inputCodec=i.storeCodec;const s=new AbortController,c=Tr([s.signal,i.signal]);try{const l=await(await e.post("dag/put",{timeout:i.timeout,signal:c,searchParams:R(i),...await sn([a],s,i.headers)})).json();return G.parse(l.Cid["/"])}finally{c.clear()}}}function Mte(e){return async function(t,n={}){const i=await(await e.post("dag/resolve",{signal:n.signal,searchParams:R({arg:`${t}${n.path!=null?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers})).json();return{cid:G.parse(i.Cid["/"]),remainderPath:i.RemPath}}}function Dte(e,r){return{export:Ite(e),get:$te(e,r),import:Nte(e),put:kte(e,r),resolve:Mte(e)}}const Lte=0,Ute=1,Fte=2,Bte=3,xte=4,Vte=5,Wte=6,zte=7;function ki(e){var r;if(e.Type===Lte)return{name:"SENDING_QUERY",type:e.Type};if(e.Type===Ute)return{from:dt(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses??[]).map(({ID:t,Addrs:n})=>({id:dt(t),multiaddrs:n.map(o=>ct(o)),protocols:[]})),providers:(e.Responses??[]).map(({ID:t,Addrs:n})=>({id:dt(t),multiaddrs:n.map(o=>ct(o)),protocols:[]}))};if(e.Type===Fte){let t={id:e.ID??dt(e.ID),multiaddrs:[],protocols:[]};return((r=e.Responses)==null?void 0:r.length)>0&&(t={id:dt(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map(n=>ct(n)),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:t}}if(e.Type===Bte)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(e.Type===xte)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map(({ID:t,Addrs:n})=>({id:dt(t),multiaddrs:n.map(o=>ct(o)),protocols:[]}))};if(e.Type===Vte)return{name:"VALUE",type:e.Type,value:bt(e.Extra,"base64pad")};if(e.Type===Wte){const t=e.Responses.map(({ID:n})=>dt(n));if(t.length===0)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:t[0]}}if(e.Type===zte)return{name:"DIALING_PEER",type:e.Type,peer:dt(e.ID)};throw new Error("Unknown DHT event type")}function qte(e){return async function*(t,n={}){const o=await e.post("dht/query",{signal:n.signal,searchParams:R({arg:t.toString(),...n}),headers:n.headers});for await(const i of o.ndjson())yield ki(i)}}var S0;(function(e){e[e.SENDING_QUERY=0]="SENDING_QUERY",e[e.PEER_RESPONSE=1]="PEER_RESPONSE",e[e.FINAL_PEER=2]="FINAL_PEER",e[e.QUERY_ERROR=3]="QUERY_ERROR",e[e.PROVIDER=4]="PROVIDER",e[e.VALUE=5]="VALUE",e[e.ADDING_PEER=6]="ADDING_PEER",e[e.DIALING_PEER=7]="DIALING_PEER"})(S0||(S0={}));var T0;(function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"})(T0||(T0={}));function Hte(e){return{query:qte(e)}}function Gte(e){return async function(t={}){return(await e.post("diag/cmds",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()}}function Kte(e){return async function(t={}){return(await e.post("diag/net",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()}}function Yte(e){return async function(t={}){return(await e.post("diag/sys",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()}}function Zte(e){return{cmds:Gte(e),net:Kte(e),sys:Yte(e)}}function Qte(e){return async function(t,n,o={}){const i=Array.isArray(t)?t:[t];await(await e.post("files/cp",{signal:o.signal,searchParams:R({arg:i.concat(n).map(s=>G.asCID(s)!=null?`/ipfs/${s}`:s),...o}),headers:o.headers})).text()}}function Xte(e){return async function(t,n={}){if(typeof t!="string")throw new Error("ipfs.files.flush requires a path");const i=await(await e.post("files/flush",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers})).json();return G.parse(i.Cid)}}function r_(e){const r=Ge(e);return Object.prototype.hasOwnProperty.call(r,"mode")&&(r.mode=parseInt(r.mode,8)),Object.prototype.hasOwnProperty.call(r,"mtime")&&(r.mtime={secs:r.mtime,nsecs:r.mtimeNsecs??0},delete r.mtimeNsecs),r}function Jte(e){return async function*(t,n={}){if(t==null)throw new Error("ipfs.files.ls requires a path");const o=await e.post("files/ls",{signal:n.signal,searchParams:R({arg:G.asCID(t)!=null?`/ipfs/${t}`:t,long:!0,...n,stream:!0}),headers:n.headers});for await(const i of o.ndjson())if("Entries"in i)for(const a of i.Entries??[])yield P0(r_(a));else yield P0(r_(i))}}function P0(e){return e.hash!=null&&(e.cid=G.parse(e.hash)),delete e.hash,e.type=e.type===1?"directory":"file",e}function ere(e){return async function(t,n={}){await(await e.post("files/mkdir",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers})).text()}}function tre(e){return async function(t,n,o={}){Array.isArray(t)||(t=[t]),await(await e.post("files/mv",{signal:o.signal,searchParams:R({arg:t.concat(n),...o}),headers:o.headers})).text()}}function rre(e){if(ore(e))return async function*(){const r=e.getReader();try{for(;;){const{done:t,value:n}=await r.read();if(t)return;yield n}}finally{r.releaseLock()}}();if(nre(e))return e;throw new Error("unknown stream")}function nre(e){return e[Symbol.asyncIterator]!=null}function ore(e){return typeof(e==null?void 0:e.getReader)=="function"}function ire(e){return async function*(t,n={}){const o=await e.post("files/read",{signal:n.signal,searchParams:R({arg:t,count:n.length,...n}),headers:n.headers});if(o.body==null)throw new Error("Invalid response body");yield*rre(o.body)}}function are(e){return async function(t,n={}){const o=await e.post("files/rm",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers}),i=await o.text();if(i!==""){const a=new fJ(o);throw a.message=i,a}}}function pT(e){return async function(t,n={}){const i=await(await e.post("files/stat",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers})).json();return i.WithLocality=i.WithLocality??!1,ure(r_(i))}}function ure(e){return e.cid=G.parse(e.hash),delete e.hash,e}function sre(e){return async function(t,n,o={}){const i=new AbortController,a=Tr([i.signal,o.signal]);try{await(await e.post("files/write",{signal:a,searchParams:R({arg:t,streamChannels:!0,count:o.length,...o}),...await sn([{content:n,path:"arg",mode:xy(o.mode),mtime:$d(o.mtime)}],i,o.headers)})).text()}finally{a.clear()}}}function cre(e){return{cp:Qte(e),flush:Xte(e),ls:Jte(e),mkdir:ere(e),mv:tre(e),read:ire(e),rm:are(e),stat:pT(e),write:sre(e)}}function lre(e){return function(){const t=new URL(e.opts.base??"");return{host:t.hostname,port:t.port,protocol:t.protocol,pathname:t.pathname,"api-path":t.pathname}}}function fre(e){return async function*(t,n={}){const o={arg:`${t instanceof Uint8Array?G.decode(t):t}`,...n};yield*(await e.post("get",{signal:n.signal,searchParams:R(o),headers:n.headers})).iterator()}}function vT(e){return async function(t={}){const o=await(await e.post("id",{signal:t.signal,searchParams:R({arg:t.peerId!=null?t.peerId.toString():void 0,...t}),headers:t.headers})).json(),i={...Ge(o)};return i.id=dt(i.id),i.addresses!=null&&(i.addresses=i.addresses.map(a=>ct(a))),i}}function dre(e){const r=vT(e);return async function(n={}){var o;try{const i=await r(n);return!!((o=i==null?void 0:i.addresses)!=null&&o.length)}catch{return!1}}}const hre={type:"ed25519"};function pre(e){return async function(t,n=hre){const i=await(await e.post("key/gen",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers})).json();return Ge(i)}}function vre(e){return async function(t,n,o,i={}){const s=await(await e.post("key/import",{signal:i.signal,searchParams:R({arg:t,pem:n,password:o,...i}),headers:i.headers})).json();return Ge(s)}}function _re(e){return async function(t={}){return((await(await e.post("key/list",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()).Keys??[]).map(i=>Ge(i))}}function yre(e){return async function(t,n,o={}){const i=await e.post("key/rename",{signal:o.signal,searchParams:R({arg:[t,n],...o}),headers:o.headers});return Ge(await i.json())}}function bre(e){return async function(t,n={}){const i=await(await e.post("key/rm",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers})).json();return Ge(i.Keys[0])}}function mre(e){return{gen:pre(e),import:vre(e),list:_re(e),rename:yre(e),rm:bre(e)}}const zo=1e3,qo=zo*60,Ho=qo*60,Hn=Ho*24,gre=Hn*7,wre=Hn*365.25;function _T(e,r){try{if(typeof e=="string"&&e.length>0)return Ore(e);if(typeof e=="number"&&isFinite(e))return r!=null&&r.long?Sre(e):Ere(e);throw new Error("Value is not a string or number.")}catch(t){const n=Tre(t)?`${t.message}. value=${JSON.stringify(e)}`:"An unknown error has occured.";throw new Error(n)}}function Ore(e){if(e=String(e),e.length>100)throw new Error("Value exceeds the maximum length of 100 characters.");const r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!r)return NaN;const t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*wre;case"weeks":case"week":case"w":return t*gre;case"days":case"day":case"d":return t*Hn;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Ho;case"minutes":case"minute":case"mins":case"min":case"m":return t*qo;case"seconds":case"second":case"secs":case"sec":case"s":return t*zo;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:throw new Error(`The unit ${n} was matched, but no matching case exists.`)}}function Ere(e){const r=Math.abs(e);return r>=Hn?`${Math.round(e/Hn)}d`:r>=Ho?`${Math.round(e/Ho)}h`:r>=qo?`${Math.round(e/qo)}m`:r>=zo?`${Math.round(e/zo)}s`:`${e}ms`}function Sre(e){const r=Math.abs(e);return r>=Hn?Oc(e,r,Hn,"day"):r>=Ho?Oc(e,r,Ho,"hour"):r>=qo?Oc(e,r,qo,"minute"):r>=zo?Oc(e,r,zo,"second"):`${e} ms`}function Oc(e,r,t,n){const o=r>=t*1.5;return`${Math.round(e/t)} ${n}${o?"s":""}`}function Tre(e){return typeof e=="object"&&e!==null&&"message"in e}function Pre(e){t.debug=t,t.default=t,t.coerce=c,t.disable=i,t.enable=o,t.enabled=a,t.humanize=_T,t.destroy=u,Object.keys(e).forEach(l=>{t[l]=e[l]}),t.names=[],t.skips=[],t.formatters={};function r(l){let d=0;for(let h=0;h<l.length;h++)d=(d<<5)-d+l.charCodeAt(h),d|=0;return t.colors[Math.abs(d)%t.colors.length]}t.selectColor=r;function t(l){let d,h=null,p,v;function y(..._){if(!y.enabled)return;const b=y,w=Number(new Date),S=w-(d||w);b.diff=S,b.prev=d,b.curr=w,d=w,_[0]=t.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let E=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(C,P)=>{if(C==="%%")return"%";E++;const I=t.formatters[P];if(typeof I=="function"){const M=_[E];C=I.call(b,M),_.splice(E,1),E--}return C}),t.formatArgs.call(b,_),(b.log||t.log).apply(b,_)}return y.namespace=l,y.useColors=t.useColors(),y.color=t.selectColor(l),y.extend=n,y.destroy=t.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==t.namespaces&&(p=t.namespaces,v=t.enabled(l)),v),set:_=>{h=_}}),typeof t.init=="function"&&t.init(y),y}function n(l,d){const h=t(this.namespace+(typeof d>"u"?":":d)+l);return h.log=this.log,h}function o(l){t.save(l),t.namespaces=l,t.names=[],t.skips=[];let d;const h=(typeof l=="string"?l:"").split(/[\s,]+/),p=h.length;for(d=0;d<p;d++)h[d]&&(l=h[d].replace(/\*/g,".*?"),l[0]==="-"?t.skips.push(new RegExp("^"+l.substr(1)+"$")):t.names.push(new RegExp("^"+l+"$")))}function i(){const l=[...t.names.map(s),...t.skips.map(s).map(d=>"-"+d)].join(",");return t.enable(""),l}function a(l){if(l[l.length-1]==="*")return!0;let d,h;for(d=0,h=t.skips.length;d<h;d++)if(t.skips[d].test(l))return!1;for(d=0,h=t.names.length;d<h;d++)if(t.names[d].test(l))return!0;return!1}function s(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack??l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.setupFormatters(t.formatters),t.enable(t.load()),t}var Cre={};const Yt=kre(),Are=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Ire(){var e,r,t,n,o;return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&((e=navigator.userAgent)==null?void 0:e.toLowerCase().match(/(edge|trident)\/(\d+)/))!=null?!1:typeof document<"u"&&((t=(r=document.documentElement)==null?void 0:r.style)==null?void 0:t.WebkitAppearance)||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&((n=navigator.userAgent)==null?void 0:n.toLowerCase().match(/firefox\/(\d+)/))!=null&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&((o=navigator.userAgent)==null?void 0:o.toLowerCase().match(/applewebkit\/(\d+)/))}function Rre(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+_T(this.diff),!this.useColors)return;const r="color: "+this.color;e.splice(1,0,r,"color: inherit");let t=0,n=0;e[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(t++,o==="%c"&&(n=t))}),e.splice(n,0,r)}const jre=console.debug??console.log??(()=>{});function $re(e){try{e?Yt==null||Yt.setItem("debug",e):Yt==null||Yt.removeItem("debug")}catch{}}function Nre(){let e;try{e=Yt==null?void 0:Yt.getItem("debug")}catch{}return!e&&typeof globalThis.process<"u"&&"env"in globalThis.process&&(e=Cre.DEBUG),e}function kre(){try{return localStorage}catch{}}function Mre(e){e.j=function(r){try{return JSON.stringify(r)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}const pt=Pre({formatArgs:Rre,save:$re,load:Nre,useColors:Ire,setupFormatters:Mre,colors:Are,storage:Yt,log:jre});pt.formatters.b=e=>e==null?"undefined":Be.baseEncode(e);pt.formatters.t=e=>e==null?"undefined":jn.baseEncode(e);pt.formatters.m=e=>e==null?"undefined":Ed.baseEncode(e);pt.formatters.p=e=>e==null?"undefined":e.toString();pt.formatters.c=e=>e==null?"undefined":e.toString();pt.formatters.k=e=>e==null?"undefined":e.toString();pt.formatters.a=e=>e==null?"undefined":e.toString();pt.formatters.e=e=>e==null?"undefined":C0(e.stack)??C0(e.message)??e.toString();function Dre(e){const r=()=>{};return r.enabled=!1,r.color="",r.diff=0,r.log=()=>{},r.namespace=e,r.destroy=()=>!0,r.extend=()=>r,r}function Gy(e){let r=Dre(`${e}:trace`);return pt.enabled(`${e}:trace`)&&pt.names.map(t=>t.toString()).find(t=>t.includes(":trace"))!=null&&(r=pt(`${e}:trace`)),Object.assign(pt(e),{error:pt(`${e}:error`),trace:r})}function C0(e){if(e!=null&&(e=e.trim(),e.length!==0))return e}var Lre=e=>{if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const r=Object.getPrototypeOf(e);return r===null||r===Object.prototype};const ml=Lre,{hasOwnProperty:yT}=Object.prototype,{propertyIsEnumerable:Ure}=Object,Go=(e,r,t)=>Object.defineProperty(e,r,{value:t,writable:!0,enumerable:!0,configurable:!0}),Fre=f,A0={concatArrays:!1,ignoreUndefined:!1},Dd=e=>{const r=[];for(const t in e)yT.call(e,t)&&r.push(t);if(Object.getOwnPropertySymbols){const t=Object.getOwnPropertySymbols(e);for(const n of t)Ure.call(e,n)&&r.push(n)}return r};function Mi(e){return Array.isArray(e)?Bre(e):ml(e)?xre(e):e}function Bre(e){const r=e.slice(0,0);return Dd(e).forEach(t=>{Go(r,t,Mi(e[t]))}),r}function xre(e){const r=Object.getPrototypeOf(e)===null?Object.create(null):{};return Dd(e).forEach(t=>{Go(r,t,Mi(e[t]))}),r}const bT=(e,r,t,n)=>(t.forEach(o=>{typeof r[o]>"u"&&n.ignoreUndefined||(o in e&&e[o]!==Object.getPrototypeOf(e)?Go(e,o,n_(e[o],r[o],n)):Go(e,o,Mi(r[o])))}),e),Vre=(e,r,t)=>{let n=e.slice(0,0),o=0;return[e,r].forEach(i=>{const a=[];for(let s=0;s<i.length;s++)yT.call(i,s)&&(a.push(String(s)),i===e?Go(n,o++,i[s]):Go(n,o++,Mi(i[s])));n=bT(n,i,Dd(i).filter(s=>!a.includes(s)),t)}),n};function n_(e,r,t){return t.concatArrays&&Array.isArray(e)&&Array.isArray(r)?Vre(e,r,t):!ml(r)||!ml(e)?Mi(r):bT(e,r,Dd(r),t)}var Wre=function(...e){const r=n_(Mi(A0),this!==Fre&&this||{},A0);let t={_:{}};for(const n of e)if(n!==void 0){if(!ml(n))throw new TypeError("`"+n+"` is not an Option Object");t=n_(t,{_:n},r)}return t._};const mT=i_(Wre),ae=Object.create(null),gT=6e4,wT=gT*60,Ky=wT*24,OT=Ky*365.25;ae.year=ae.yr=ae.y=OT;ae.month=ae.mo=ae.mth=OT/12;ae.week=ae.wk=ae.w=Ky*7;ae.day=ae.d=Ky;ae.hour=ae.hr=ae.h=wT;ae.minute=ae.min=ae.m=gT;ae.second=ae.sec=ae.s=1e3;ae.millisecond=ae.millisec=ae.ms=1;ae.microsecond=ae.microsec=ae.us=ae.µs=.001;ae.nanosecond=ae.nanosec=ae.ns=1e-6;ae.group=",";ae.decimal=".";ae.placeholder=" _";const zre=/((?:\d{1,16}(?:\.\d{1,16})?|\.\d{1,16})(?:[eE][-+]?\d{1,4})?)\s?([\p{L}]{0,14})/gu;Kt.unit=ae;function Kt(e="",r="ms"){let t=null,n;return String(e).replace(new RegExp(`(\\d)[${Kt.unit.placeholder}${Kt.unit.group}](\\d)`,"g"),"$1$2").replace(Kt.unit.decimal,".").replace(zre,(o,i,a)=>{if(a)a=a.toLowerCase();else if(n){for(const s in Kt.unit)if(Kt.unit[s]<n){a=s;break}}else a=r;n=a=Kt.unit[a]||Kt.unit[a.replace(/s$/,"")],a&&(t=(t||0)+i*a)}),t&&t/(Kt.unit[r]||1)*(e[0]==="-"?-1:1)}const qre=()=>{},Hre=typeof navigator<"u"&&navigator.product==="ReactNative";function Gre(){return Hre?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const ya=self.URL,ET=Gre();let Kre=class{constructor(r="",t=ET){this.super=new ya(r,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(r){this.super.hash=r}set host(r){this.super.host=r}set hostname(r){this.super.hostname=r}set href(r){this.super.href=r}set password(r){this.super.password=r}set pathname(r){this.super.pathname=r}set port(r){this.super.port=r}set protocol(r){this.super.protocol=r}set search(r){this.super.search=r}set username(r){this.super.username=r}static createObjectURL(r){return ya.createObjectURL(r)}static revokeObjectURL(r){ya.revokeObjectURL(r)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function Yre(e){if(typeof e=="string")return new ya(e).toString();if(!(e instanceof ya)){const r=e.username&&e.password?`${e.username}:${e.password}@`:"",t=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",o=e.protocol?e.protocol+"//":"",i=e.host||"",a=e.hostname||"",s=e.search||(e.query?"?"+e.query:""),c=e.hash||"",u=e.pathname||"",l=e.path||u+s;return`${o}${r||t}${i||a+n}${l}${c}`}}var ST={URLWithLegacySupport:Kre,URLSearchParams:self.URLSearchParams,defaultBase:ET,format:Yre};const{URLWithLegacySupport:I0,format:Zre}=ST;var Qre=(e,r={},t={},n)=>{let o=r.protocol?r.protocol.replace(":",""):"http";o=(t[o]||n||o)+":";let i;try{i=new I0(e)}catch{i={}}const a=Object.assign({},r,{protocol:o||i.protocol,host:r.host||i.host});return new I0(e,Zre(a)).toString()};const{URLWithLegacySupport:Xre,format:Jre,URLSearchParams:ene,defaultBase:tne}=ST,rne=Qre;var Ec={URL:Xre,URLSearchParams:ene,format:Jre,relative:rne,defaultBase:tne};class TT extends Error{constructor(r="Request timed out"){super(r),this.name="TimeoutError"}}class nne extends Error{constructor(r="The operation was aborted."){super(r),this.name="AbortError"}}class R0 extends Error{constructor(t){super(t.statusText);g(this,"response");this.name="HTTPError",this.response=t}}const one=globalThis.fetch,Yy=globalThis.Headers,ine=globalThis.Request,PT=globalThis.Response,ane=async(e,r={})=>{const t=new XMLHttpRequest;t.open(r.method??"GET",e.toString(),!0);const{timeout:n,headers:o}=r,i=Number(n);if(!isNaN(i)&&i>0&&i<1/0&&(t.timeout=i),r.overrideMimeType!=null&&t.overrideMimeType(r.overrideMimeType),o!=null)for(const[a,s]of new Yy(o))t.setRequestHeader(a,s);return r.signal!=null&&(r.signal.onabort=()=>{t.abort()}),r.onUploadProgress!=null&&(t.upload.onprogress=r.onUploadProgress),t.responseType="arraybuffer",new Promise((a,s)=>{const c=u=>{switch(u.type){case"error":{a(PT.error());break}case"load":{a(new lne(t.responseURL,t.response,{status:t.status,statusText:t.statusText,headers:cne(t.getAllResponseHeaders())}));break}case"timeout":{s(new TT);break}case"abort":{s(new nne);break}}};t.onerror=c,t.onload=c,t.ontimeout=c,t.onabort=c,t.send(r.body)})},une=one,sne=(e,r={})=>r.onUploadProgress!=null?ane(e,r):une(e,r),cne=e=>{const r=new Yy;for(const t of e.trim().split(/[\r\n]+/)){const n=t.indexOf(": ");n>0&&r.set(t.slice(0,n),t.slice(n+1))}return r};class lne extends PT{constructor(r,t,n){super(t,n),Object.defineProperty(this,"url",{value:r})}}const j0=mT.bind({ignoreUndefined:!0}),Sc=Gy("kubo-rpc-client:fetch"),fne={throwHttpErrors:!0,credentials:"same-origin"},st=class st{constructor(r={}){g(this,"opts");this.opts=j0({},fne,r)}async fetch(r,t={}){const n=j0({},this.opts,t),o=new Yy(n.headers);if(typeof r!="string"&&!(r instanceof Ec.URL||r instanceof ine))throw new TypeError("`resource` must be a string, URL, or Request");const i=new Ec.URL(r.toString(),n.base),{searchParams:a,transformSearchParams:s,json:c}=n;a!=null&&(typeof s=="function"?i.search=s(new Ec.URLSearchParams(n.searchParams)):i.search=new Ec.URLSearchParams(n.searchParams).toString()),c!=null&&(n.body=JSON.stringify(n.json),o.set("content-type","application/json"));const u=[n.signal];n.timeout!=null&&isNaN(n.timeout)&&n.timeout>0&&u.push(AbortSignal.timeout(n.timeout));const l=Tr(u);try{globalThis.ReadableStream!=null&&n.body instanceof globalThis.ReadableStream&&(Ad||Id)&&(n.body=new Blob(await GS(Rd(n.body)))),Sc.trace("outgoing headers",n.headers),Sc.trace("%s %s",n.method,i);const d=await sne(i.toString(),{...n,signal:n.signal,timeout:void 0,headers:o,duplex:"half"});if(Sc("%s %s %d",n.method,i,d.status),Sc.trace("incoming headers",d.headers),!d.ok&&n.throwHttpErrors===!0)throw n.handleError!=null&&await n.handleError(d),new R0(d);return d.iterator=async function*(){yield*hne(d.body)},d.ndjson=async function*(){for await(const h of dne(d.iterator()))t.transform!=null?yield t.transform(h):yield h},d}finally{l.clear()}}async post(r,t={}){return this.fetch(r,{...t,method:"POST"})}async get(r,t={}){return this.fetch(r,{...t,method:"GET"})}async put(r,t={}){return this.fetch(r,{...t,method:"PUT"})}async delete(r,t={}){return this.fetch(r,{...t,method:"DELETE"})}async options(r,t={}){return this.fetch(r,{...t,method:"OPTIONS"})}};g(st,"HTTPError",R0),g(st,"TimeoutError",TT),g(st,"post",async(r,t)=>new st(t).post(r,t)),g(st,"get",async(r,t)=>new st(t).get(r,t)),g(st,"put",async(r,t)=>new st(t).put(r,t)),g(st,"delete",async(r,t)=>new st(t).delete(r,t)),g(st,"options",async(r,t)=>new st(t).options(r,t));let An=st;const dne=async function*(e){const r=new TextDecoder;let t="";for await(const n of e){t+=r.decode(n,{stream:!0});const o=t.split(/\r?\n/);for(let i=0;i<o.length-1;i++){const a=o[i].trim();a.length>0&&(yield JSON.parse(a))}t=o[o.length-1]}t+=r.decode(),t=t.trim(),t.length!==0&&(yield JSON.parse(t))},hne=e=>{if(pne(e))return e;if(_ne(e)){const r=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:r.next.bind(r),return(t){return e.destroy(),typeof r.return=="function"?r.return():Promise.resolve({done:!0,value:t})}}}}}if(vne(e)){const r=e.getReader();return async function*(){try{for(;;){const{done:t,value:n}=await r.read();if(t)return;n!=null&&(yield n)}}finally{r.releaseLock()}}()}throw new TypeError("Body can't be converted to AsyncIterable")},pne=e=>e!==null&&typeof e[Symbol.asyncIterator]=="function",vne=e=>e!=null&&typeof e.getReader=="function",_ne=e=>Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable"),yne=[nl,wy,Ey,Oy,Sd];function $0(e){var r;return(r=CT("sni",e))==null?void 0:r.value}function N0(e){var t;const r=(t=CT("tcp",e))==null?void 0:t.value;return r==null?"":`:${r}`}function CT(e,r){return r.find(t=>t.name===e)}function k0(e){return e.some(({code:r})=>r===iS)}function jt(e,r){const t=AT[e.name];if(t==null)throw new Error(`Can't interpret protocol ${e.name}`);const n=t(e,r);return e.code===pa?`[${n}]`:n}const AT={ip4:(e,r)=>e.value,ip6:(e,r)=>r.length===0?e.value:`[${e.value}]`,tcp:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`tcp://${jt(t,r)}:${e.value}`},udp:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`udp://${jt(t,r)}:${e.value}`},dnsaddr:(e,r)=>e.value,dns4:(e,r)=>e.value,dns6:(e,r)=>e.value,dns:(e,r)=>e.value,ipfs:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`${jt(t,r)}`},p2p:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`${jt(t,r)}`},http:(e,r)=>{const t=k0(r),n=$0(r),o=N0(r);if(t&&n!=null)return`https://${n}${o}`;const i=t?"https://":"http://",a=r.pop();if(a==null)throw new Error("Unexpected end of multiaddr");let s=jt(a,r);return s=s==null?void 0:s.replace("tcp://",""),`${i}${s}`},"http-path":(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");const n=jt(t,r),o=decodeURIComponent(e.value??"");return`${n}${o}`},tls:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return jt(t,r)},sni:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return jt(t,r)},https:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");let n=jt(t,r);return n=n==null?void 0:n.replace("tcp://",""),`https://${n}`},ws:(e,r)=>{const t=k0(r),n=$0(r),o=N0(r);if(t&&n!=null)return`wss://${n}${o}`;const i=t?"wss://":"ws://",a=r.pop();if(a==null)throw new Error("Unexpected end of multiaddr");let s=jt(a,r);return s=s==null?void 0:s.replace("tcp://",""),`${i}${s}`},wss:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");let n=jt(t,r);return n=n==null?void 0:n.replace("tcp://",""),`wss://${n}`}};function bne(e,r){const n=ct(e).getComponents(),o=n.pop();if(o==null)throw new Error("Unexpected end of multiaddr");const i=AT[o.name];if(i==null)throw new Error(`No interpreter found for ${o.name}`);let a=i(o,n)??"";return yne.includes(o.code)&&(a=a.replace(/^.*:\/\//,""),o.value==="443"?a=`https://${a}`:a=`http://${a}`),(a.startsWith("http://")||a.startsWith("https://")||a.startsWith("ws://")||a.startsWith("wss://"))&&(a=new URL(a).toString(),a.endsWith("/")&&(a=a.substring(0,a.length-1))),a}function M0(e){try{e=bne(ct(e))}catch{}return e=e.toString(),e}const D0=Gy("js-kubo-rpc-client:lib:error-handler"),mne=mT.bind({ignoreUndefined:!0}),gne=Ad||Id?location.protocol:"http",wne=Ad||Id?location.hostname:"localhost",One=Ad||Id?location.port:"5001",Ene=(e={})=>{let r,t={},n;if(typeof e=="string"||ol(e))r=new URL(M0(e));else if(e instanceof URL)r=e;else if(typeof e.url=="string"||ol(e.url))r=new URL(M0(e.url)),t=e;else if(e.url instanceof URL)r=e.url,t=e;else{t=e??{};const o=(t.protocol??gne).replace(":",""),i=(t.host??wne).split(":")[0],a=t.port??One;r=new URL(`${o}://${i}:${a}`)}if(t.apiPath!=null?r.pathname=t.apiPath:(r.pathname==="/"||r.pathname===void 0)&&(r.pathname="api/v0"),uJ){const o=qre();n=t.agent??new o({keepAlive:!0,maxSockets:6})}return{...t,host:r.host,protocol:r.protocol.replace(":",""),port:Number(r.port),apiPath:r.pathname,url:r,agent:n}},Sne=async e=>{let r;try{if((e.headers.get("Content-Type")??"").startsWith("application/json")){const n=await e.json();D0(n),r=n.Message??n.message}else r=await e.text()}catch(n){D0("Failed to parse error response",n),r=n.message}let t=new An.HTTPError(e);throw r!=null&&(r.includes("deadline has elapsed")&&(t=new An.TimeoutError),r.includes("context deadline exceeded")&&(t=new An.TimeoutError),r.includes("request timed out")&&(t=new An.TimeoutError),t.message=r),t},Tne=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,L0=e=>e.replace(Tne,function(r){return"-"+r.toLowerCase()}),Pne=e=>typeof e=="string"?Kt(e)??0:e;class Cne extends An{constructor(r={}){const t=Ene(r);super({timeout:t.timeout!=null?Pne(t.timeout):void 0,headers:t.headers,base:`${t.url}`,handleError:Sne,transformSearchParams:o=>{const i=new URLSearchParams;for(const[a,s]of o)s!=="undefined"&&s!=="null"&&a!=="signal"&&a!=="timeout"&&i.append(L0(a),s),a==="timeout"&&!isNaN(parseInt(s))&&i.append(L0(a),s);return i},agent:t.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;const n=this.fetch;this.fetch=async(o,i={})=>(typeof o=="string"&&!o.startsWith("/")&&(o=`${t.url}/${o}`),n.call(this,o,mne(i,{method:"POST"})))}}const Ane=async e=>Promise.reject(new Error(`No base found for "${e}"`));class Ine{constructor(r){g(this,"_basesByName");g(this,"_basesByPrefix");g(this,"_loadBase");this._basesByName={},this._basesByPrefix={},this._loadBase=r.loadBase??Ane;for(const t of r.bases)this.addBase(t)}addBase(r){if(this._basesByName[r.name]!=null&&this._basesByPrefix[r.prefix]!=null)throw new Error(`Codec already exists for codec "${r.name}"`);this._basesByName[r.name]=r,this._basesByPrefix[r.prefix]=r}removeBase(r){delete this._basesByName[r.name],delete this._basesByPrefix[r.prefix]}async getBase(r){if(this._basesByName[r]!=null)return this._basesByName[r];if(this._basesByPrefix[r]!=null)return this._basesByPrefix[r];const t=await this._loadBase(r);return this._basesByName[t.name]==null&&this._basesByPrefix[t.prefix]==null&&this.addBase(t),t}listBases(){return Object.values(this._basesByName)}}const Rne=async e=>Promise.reject(new Error(`No codec found for "${e}"`));class jne{constructor(r){g(this,"_codecsByName");g(this,"_codecsByCode");g(this,"_loadCodec");this._codecsByName={},this._codecsByCode={},this._loadCodec=r.loadCodec??Rne;for(const t of r.codecs)this.addCodec(t)}addCodec(r){if(this._codecsByName[r.name]!=null||this._codecsByCode[r.code]!=null)throw new Error(`Resolver already exists for codec "${r.name}"`);this._codecsByName[r.name]=r,this._codecsByCode[r.code]=r}removeCodec(r){delete this._codecsByName[r.name],delete this._codecsByCode[r.code]}async getCodec(r){const t=typeof r=="string"?this._codecsByName:this._codecsByCode;if(t[r]!=null)return t[r];const n=await this._loadCodec(r);return t[r]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}}const $ne=async e=>Promise.reject(new Error(`No hasher found for "${e}"`));class Nne{constructor(r){g(this,"_hashersByName");g(this,"_hashersByCode");g(this,"_loadHasher");this._hashersByName={},this._hashersByCode={},this._loadHasher=r.loadHasher??$ne;for(const t of r.hashers)this.addHasher(t)}addHasher(r){if(this._hashersByName[r.name]!=null||this._hashersByCode[r.code]!=null)throw new Error(`Resolver already exists for codec "${r.name}"`);this._hashersByName[r.name]=r,this._hashersByCode[r.code]=r}removeHasher(r){delete this._hashersByName[r.name],delete this._hashersByCode[r.code]}async getHasher(r){const t=typeof r=="string"?this._hashersByName:this._hashersByCode;if(t[r]!=null)return t[r];const n=await this._loadHasher(r);return t[r]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}}function kne(e){return async function(r,t,n={}){const o=await e.post("log/level",{signal:n.signal,searchParams:R({arg:[r,t],...n}),headers:n.headers});return Ge(await o.json())}}function Mne(e){return async function(t={}){return(await(await e.post("log/ls",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()).Strings}}function Dne(e){return async function*(t={}){yield*(await e.post("log/tail",{signal:t.signal,searchParams:R(t),headers:t.headers})).ndjson()}}function Lne(e){return{level:kne(e),ls:Mne(e),tail:Dne(e)}}function Une(e){return async function*(t,n={}){const o=`${t instanceof Uint8Array?G.decode(t):t}`;async function i(s){let c=s.Hash;if(c.includes("/")===!0){const l=c.startsWith("/ipfs/")===!0?c:`/ipfs/${c}`;c=(await pT(e)(l)).cid}else c=G.parse(c);return{name:s.Name,path:o+(s.Name!=null?`/${s.Name}`:""),size:s.Size,cid:c,type:Fne(s)}}const a=await e.post("ls",{signal:n.signal,searchParams:R({arg:o,...n}),headers:n.headers});for await(let s of a.ndjson()){if(s=s.Objects,s==null)throw new Error("expected .Objects in results");if(s=s[0],s==null)throw new Error("expected one array in results.Objects");const c=s.Links;if(!Array.isArray(c))throw new Error("expected one array in results.Objects[0].Links");if(c.length===0){yield i(s);return}yield*c.map(i)}}}function Fne(e){switch(e.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}function Bne(e){return async function(t={}){const n=await e.post("dns",{signal:t.signal,searchParams:R(t),headers:t.headers});return Ge(await n.json())}}function xne(e){return async function(t,n={}){const o=await e.post("name/publish",{signal:n.signal,searchParams:R({arg:`${t}`,...n}),headers:n.headers});return Ge(await o.json())}}function Vne(e){return async function(t,n={}){const o=await e.post("name/pubsub/cancel",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers});return Ge(await o.json())}}function Wne(e){return async function(t={}){const n=await e.post("name/pubsub/state",{signal:t.signal,searchParams:R(t),headers:t.headers});return Ge(await n.json())}}function zne(e){return async function(t={}){return(await(await e.post("name/pubsub/subs",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()).Strings??[]}}function qne(e){return{cancel:Vne(e),state:Wne(e),subs:zne(e)}}function Hne(e){return async function*(t,n={}){const o=await e.post("name/resolve",{signal:n.signal,searchParams:R({arg:t,stream:!0,...n}),headers:n.headers});for await(const i of o.ndjson())yield i.Path}}function Gne(e){return{publish:xne(e),resolve:Hne(e),pubsub:qne(e)}}function Kne(e){return async function(t,n,o={}){const i=await e.post("object/patch/add-link",{signal:o.signal,searchParams:R({arg:[`${t}`,n.Name??n.name??"",(n.Hash??n.cid??"").toString()??null],...o}),headers:o.headers}),{Hash:a}=await i.json();return G.parse(a)}}function Yne(e){return async function(t,n,o={}){const i=await e.post("object/patch/rm-link",{signal:o.signal,searchParams:R({arg:[`${t}`,n.Name??n.name??null],...o}),headers:o.headers}),{Hash:a}=await i.json();return G.parse(a)}}function Zne(e){return{addLink:Kne(e),rmLink:Yne(e)}}function Qne(e,r){return{patch:Zne(e)}}function Xne(e){return Symbol.iterator in e}function Jne(e){return Symbol.asyncIterator in e}function U0(e){return G.asCID(e)!=null}async function*IT(e){if(e==null)throw new Tt(`Unexpected input: ${e}`);const r=G.asCID(e);if(r!=null){yield it({cid:r});return}if(typeof e=="string"){yield it({path:e});return}if(e.cid!=null||e.path!=null)return yield it(e);if(Xne(e)){const t=e[Symbol.iterator](),n=t.next();if(n.done===!0)return t;if(U0(n.value)){yield it({cid:n.value});for(const o of t)yield it({cid:o});return}if(typeof n.value=="string"){yield it({path:n.value});for(const o of t)yield it({path:o});return}if(n.value.cid!=null||n.value.path!=null){yield it(n.value);for(const o of t)yield it(o);return}throw new Tt(`Unexpected input: ${typeof e}`)}if(Jne(e)){const t=e[Symbol.asyncIterator](),n=await t.next();if(n.done===!0)return t;if(U0(n.value)){yield it({cid:n.value});for await(const o of t)yield it({cid:o});return}if(typeof n.value=="string"){yield it({path:n.value});for await(const o of t)yield it({path:o});return}if(n.value.cid!=null||n.value.path!=null){yield it(n.value);for await(const o of t)yield it(o);return}throw new Tt(`Unexpected input: ${typeof e}`)}throw new Tt(`Unexpected input: ${typeof e}`)}function it(e){const r=e.cid??`${e.path}`;if(r==null)throw new Tt("Unexpected input: Please path either a CID or an IPFS path");const t={path:r,recursive:e.recursive!==!1};return e.metadata!=null&&(t.metadata=e.metadata),t}function RT(e){return async function*(t,n={}){for await(const{path:o,recursive:i,metadata:a}of IT(t)){const s=await e.post("pin/add",{signal:n.signal,searchParams:R({...n,arg:o,recursive:i,metadata:a!=null?JSON.stringify(a):void 0,stream:!0}),headers:n.headers});for await(const c of s.ndjson()){if(c.Pins!=null){for(const u of c.Pins)yield G.parse(u);continue}yield G.parse(c)}}}}function eoe(e){const r=RT(e);return async function(n,o={}){const i=await Nd(r([{path:n.toString(),...o}],o));if(i==null)throw new Error("No response received");return i}}function F0(e,r,t,n){const o={type:e,cid:G.parse(r)};return t!=null&&(o.metadata=t),n!=null&&(o.name=n),o}function toe(e){return async function*(t={}){let n=[];t.paths!=null&&(n=Array.isArray(t.paths)?t.paths:[t.paths]);const o=await e.post("pin/ls",{signal:t.signal,searchParams:R({...t,arg:n.map(i=>`${i}`),stream:!0}),headers:t.headers});for await(const i of o.ndjson()){if(i.Keys!=null){for(const a of Object.keys(i.Keys))yield F0(i.Keys[a].Type,a,i.Keys[a].Metadata,i.Keys[a].Name);return}yield F0(i.Type,i.Cid,i.Metadata,i.Name)}}}const jT=({Name:e,Status:r,Cid:t})=>({cid:G.parse(t),name:e,status:r}),$T=e=>{if(typeof e=="string"&&e!=="")return e;throw new TypeError("service name must be passed")},NT=e=>{if(G.asCID(e)!=null)return e.toString();throw new TypeError(`CID instance expected instead of ${typeof e}`)},Zy=({service:e,cid:r,name:t,status:n,all:o})=>{const i=R({service:$T(e),name:t,force:o===!0?!0:void 0});if(r!=null)for(const a of r)i.append("cid",NT(a));if(n!=null)for(const a of n)i.append("status",a);return i},roe=(e,{service:r,background:t,name:n,origins:o})=>{const i=R({arg:NT(e),service:$T(r),name:n,background:t===!0?!0:void 0});if(o!=null)for(const a of o)i.append("origin",a.toString());return i};function noe(e){return async function(t,{timeout:n,signal:o,headers:i,...a}){const s=await e.post("pin/remote/add",{timeout:n,signal:o,headers:i,searchParams:roe(t,a)});return jT(await s.json())}}function ooe(e){return async function*({timeout:t,signal:n,headers:o,...i}){const a=await e.post("pin/remote/ls",{timeout:t,signal:n,headers:o,searchParams:Zy(i)});for await(const s of a.ndjson())yield jT(s)}}function ioe(e){return async function({timeout:t,signal:n,headers:o,...i}){await e.post("pin/remote/rm",{timeout:t,signal:n,headers:o,searchParams:Zy({...i,all:!0})})}}function aoe(e){return async function({timeout:t,signal:n,headers:o,...i}){await e.post("pin/remote/rm",{timeout:t,signal:n,headers:o,searchParams:Zy({...i,all:!1})})}}function uoe(e){const r=String(e);if(r==="undefined")throw Error("endpoint is required");return r[r.length-1]==="/"?r.slice(0,-1):r}function soe(e){const r={service:e.Service,endpoint:new URL(e.ApiEndpoint)};return e.Stat!=null&&(r.stat=coe(e.Stat)),r}function coe(e){switch(e.Status){case"valid":{const{Pinning:r,Pinned:t,Queued:n,Failed:o}=e.PinCount;return{status:"valid",pinCount:{queued:n,pinning:r,pinned:t,failed:o}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function loe(e){return async function(t,n){const{endpoint:o,key:i,headers:a,timeout:s,signal:c}=n;await e.post("pin/remote/service/add",{timeout:s,signal:c,searchParams:R({arg:[t,uoe(o),i]}),headers:a})}}function foe(e){return async function(t={}){const{stat:n,headers:o,timeout:i,signal:a}=t;return(await(await e.post("pin/remote/service/ls",{timeout:i,signal:a,headers:o,searchParams:n===!0?R({stat:n}):void 0})).json()).RemoteServices.map(soe)}}function doe(e){return async function(t,n={}){await e.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:R({arg:t})})}}function hoe(e){return{add:loe(e),ls:foe(e),rm:doe(e)}}function poe(e){return{add:noe(e),ls:ooe(e),rm:aoe(e),rmAll:ioe(e),service:hoe(e)}}function kT(e){return async function*(t,n={}){for await(const{path:o,recursive:i}of IT(t)){const a=new URLSearchParams(n.searchParams);a.append("arg",`${o}`),i!=null&&a.set("recursive",String(i));const s=await e.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:R({...n,arg:`${o}`,recursive:i})});for await(const c of s.ndjson()){if(c.Pins!=null){yield*c.Pins.map(u=>G.parse(u));continue}yield G.parse(c)}}}}function voe(e){const r=kT(e);return async function(n,o={}){const i=await Nd(r([{path:n.toString(),...o}],o));if(i==null)throw new Error("No response received");return i}}function _oe(e){return async function(t,n,o={}){const i=await e.post("pin/update",{signal:o.signal,searchParams:R({...o,arg:[t.toString(),n.toString()]}),headers:o.headers}),{Pins:a}=await i.json();return a.map(s=>G.parse(s))}}function yoe(e){return{addAll:RT(e),add:eoe(e),ls:toe(e),rmAll:kT(e),rm:voe(e),update:_oe(e),remote:poe(e)}}function boe(e){return async function*(t,n={}){yield*(await e.post("ping",{signal:n.signal,searchParams:R({arg:`${t}`,...n}),headers:n.headers,transform:Ge})).ndjson()}}const moe=e=>Array.isArray(e)?e.map(o_):e,o_=e=>Se(aa(e)),aa=e=>qs.decode(e),goe=e=>BigInt(`0x${Se(qs.decode(e),"base16")}`),Qy=e=>qs.encode(bt(e));function woe(e){return async function(t={}){const{Strings:n}=await(await e.post("pubsub/ls",{signal:t.signal,searchParams:R(t),headers:t.headers})).json();return moe(n)??[]}}function Ooe(e){return async function(t,n={}){const o=await e.post("pubsub/peers",{signal:n.signal,searchParams:R({arg:Qy(t),...n}),headers:n.headers}),{Strings:i}=await o.json();return i??[]}}function Eoe(e){return async function(t,n,o={}){const i=R({arg:Qy(t),...o}),a=new AbortController,s=Tr([a.signal,o.signal]);try{await(await e.post("pubsub/pub",{signal:s,searchParams:i,...await sn([n],a,o.headers)})).text()}finally{s.clear()}}}const Soe=Gy("js-kubo-rpc-client:pubsub:subscribe");function Toe(e,r){return async function(n,o,i={}){i.signal=r.subscribe(n,o,i.signal);let a,s;const c=new Promise((l,d)=>{a=l,s=d}),u=setTimeout(()=>{a()},1e3);return e.post("pubsub/sub",{signal:i.signal,searchParams:R({arg:Qy(n),...i}),headers:i.headers}).catch(l=>{r.unsubscribe(n,o),s(l)}).then(l=>{clearTimeout(u),l!=null&&(Poe(l,{onMessage:d=>{if(o!=null){if(typeof o=="function"){o(d);return}typeof o.handleEvent=="function"&&o.handleEvent(d)}},onEnd:()=>{r.unsubscribe(n,o)},onError:i.onError}),a())}),c}}async function Poe(e,{onMessage:r,onEnd:t,onError:n}){n=n??Soe;try{for await(const o of e.ndjson())try{if(o.from==null)continue;o.from!=null&&o.seqno!=null?r({type:"signed",from:dt(o.from),data:aa(o.data),sequenceNumber:goe(o.seqno),topic:o_(o.topicIDs[0]),key:o.key!=null?Yee(aa(o.key??"u")):void 0,signature:aa(o.signature??"u")}):r({type:"unsigned",data:aa(o.data),topic:o_(o.topicIDs[0])})}catch(i){i.message=`Failed to parse pubsub message: ${i.message}`,n(i,!1,o)}}catch(o){Coe(o)||n(o,!0)}finally{t()}}const Coe=e=>{switch(e.type){case"aborted":return!0;case"abort":return!0;default:return e.name==="AbortError"}};class Aoe{constructor(){g(this,"_subs");this._subs=new Map}subscribe(r,t,n){const o=this._subs.get(r)??[];if(o.find(a=>a.handler===t)!=null)throw new Error(`Already subscribed to ${r} with this handler`);const i=new AbortController;return this._subs.set(r,[{handler:t,controller:i}].concat(o)),n!=null&&n.addEventListener("abort",()=>{this.unsubscribe(r,t)}),i.signal}unsubscribe(r,t){const n=this._subs.get(r)??[];let o;t!=null?(this._subs.set(r,n.filter(i=>i.handler!==t)),o=n.filter(i=>i.handler===t)):(this._subs.set(r,[]),o=n),(this._subs.get(r)??[]).length===0&&this._subs.delete(r),o.forEach(i=>{i.controller.abort()})}}function Ioe(e,r){return async function(n,o){r.unsubscribe(n,o)}}function Roe(e){const r=new Aoe;return{ls:woe(e),peers:Ooe(e),publish:Eoe(e),subscribe:Toe(e,r),unsubscribe:Ioe(e,r)}}function joe(e){return async function*(t={}){yield*(await e.post("refs/local",{signal:t.signal,transform:Ge,searchParams:R(t),headers:t.headers})).ndjson()}}function $oe(e){async function*r(t,n={}){const o=Array.isArray(t)?t:[t];yield*(await e.post("refs",{signal:n.signal,searchParams:R({arg:o.map(a=>`${a instanceof Uint8Array?G.decode(a):a}`),...n}),headers:n.headers,transform:Ge})).ndjson()}return Object.assign(r,{local:joe(e)})}function Noe(e){return async function*(t={}){yield*(await e.post("repo/gc",{signal:t.signal,searchParams:R(t),headers:t.headers,transform:o=>{var i;return{err:o.Error!=null?new Error(o.Error):null,cid:((i=o.Key)==null?void 0:i["/"])!=null?G.parse(o.Key["/"]):null}}})).ndjson()}}function MT(e){return async function(t={}){const o=await(await e.post("repo/stat",{signal:t.signal,searchParams:R(t),headers:t.headers})).json();return{numObjects:BigInt(o.NumObjects),repoSize:BigInt(o.RepoSize),repoPath:o.RepoPath,version:o.Version,storageMax:BigInt(o.StorageMax)}}}function koe(e){return async function(t={}){return(await(await e.post("repo/version",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()).Version}}function Moe(e){return{gc:Noe(e),stat:MT(e),version:koe(e)}}function Doe(e){return async function(t,n={}){const o=await e.post("resolve",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers}),{Path:i}=await o.json();return i}}function Loe(e){return async function*(t,n={}){const o=await e.post("routing/findpeer",{signal:n.signal,searchParams:R({arg:t.toString(),stream:!0,...n}),headers:n.headers});for await(const i of o.ndjson())yield ki(i)}}function Uoe(e){return async function*(t,n={}){const o=await e.post("routing/findprovs",{signal:n.signal,searchParams:R({arg:t.toString(),...n}),headers:n.headers});for await(const i of o.ndjson())yield ki(i)}}function Foe(e){return async function*(t,n={}){const o=await e.post("routing/get",{signal:n.signal,searchParams:R({arg:t instanceof Uint8Array?Se(t):t.toString(),...n}),headers:n.headers});for await(const i of o.ndjson())yield ki(i)}}function Boe(e){return async function*(t,n={recursive:!1}){const o=Array.isArray(t)?t:[t],i=await e.post("routing/provide",{signal:n.signal,searchParams:R({arg:o.map(a=>a.toString()),...n}),headers:n.headers});for await(const a of i.ndjson())yield ki(a)}}function xoe(e){return async function*(t,n,o={}){const i=new AbortController,a=Tr([i.signal,o.signal]);try{const s=await e.post("routing/put",{signal:a,searchParams:R({arg:t instanceof Uint8Array?Se(t):t.toString(),stream:!0,...o}),...await sn([n],i,o.headers)});for await(const c of s.ndjson())yield ki(c)}finally{a.clear()}}}function Voe(e){return{findPeer:Loe(e),findProvs:Uoe(e),get:Foe(e),provide:Boe(e),put:xoe(e)}}function Woe(e){return async function*(t={}){yield*(await e.post("stats/bw",{signal:t.signal,searchParams:R(t),headers:t.headers,transform:o=>({totalIn:BigInt(o.TotalIn),totalOut:BigInt(o.TotalOut),rateIn:parseFloat(o.RateIn),rateOut:parseFloat(o.RateOut)})})).ndjson()}}function zoe(e){return{bitswap:dT(e),repo:MT(e),bw:Woe(e)}}function qoe(e){return async function(t={}){await(await e.post("shutdown",{signal:t.signal,searchParams:R(t),headers:t.headers})).text()}}function Hoe(e){return async function(t={}){const n=await e.post("swarm/addrs",{signal:t.signal,searchParams:R(t),headers:t.headers}),{Addrs:o}=await n.json();return Object.keys(o).map(i=>({id:dt(i),addrs:(o[i]??[]).map(a=>ct(a))}))}}function Goe(e){return async function(t,n={}){const o=await e.post("swarm/connect",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers}),{Strings:i}=await o.json();return i??[]}}function Koe(e){return async function(t,n={}){const o=await e.post("swarm/disconnect",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers}),{Strings:i}=await o.json();return i??[]}}function Yoe(e){return async function(t={}){const n=await e.post("swarm/addrs/local",{signal:t.signal,searchParams:R(t),headers:t.headers}),{Strings:o}=await n.json();return(o??[]).map(i=>ct(i))}}function Zoe(e){return async function(t={}){return((await(await e.post("swarm/peers",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()).Peers??[]).map(i=>({addr:ct(i.Addr),peer:dt(i.Peer),muxer:i.Muxer,latency:i.Latency,streams:i.Streams,direction:i.Direction==null?void 0:i.Direction===0?"inbound":"outbound"}))}}function Qoe(e){return{addrs:Hoe(e),connect:Goe(e),disconnect:Koe(e),localAddrs:Yoe(e),peers:Zoe(e)}}function Xoe(e){return async function(t={}){const n=await e.post("version",{signal:t.signal,searchParams:R(t),headers:t.headers});return{...Ge(await n.json()),"ipfs-http-client":"1.0.0"}}}class Joe{constructor(r){g(this,"bases");g(this,"codecs");g(this,"hashers");g(this,"bitswap");g(this,"block");g(this,"bootstrap");g(this,"config");g(this,"dag");g(this,"dht");g(this,"diag");g(this,"files");g(this,"key");g(this,"log");g(this,"name");g(this,"object");g(this,"pin");g(this,"pubsub");g(this,"refs");g(this,"repo");g(this,"routing");g(this,"stats");g(this,"swarm");g(this,"add");g(this,"addAll");g(this,"cat");g(this,"get");g(this,"ls");g(this,"id");g(this,"version");g(this,"stop");g(this,"ping");g(this,"resolve");g(this,"commands");g(this,"mount");g(this,"isOnline");g(this,"getEndpointConfig");var s,c,u,l,d,h;const t=new Cne(r),n={name:qr.name,code:qr.code,encode:p=>p,decode:p=>p},o=Object.values(tl);(((s=r.ipld)==null?void 0:s.bases)??[]).forEach(p=>o.push(p)),this.bases=new Ine({bases:o,loadBase:(c=r.ipld)==null?void 0:c.loadBase});const i=Object.values(MK);[tX,yQ,MQ,eJ,n].concat(((u=r.ipld)==null?void 0:u.codecs)??[]).forEach(p=>{i.push(p)}),this.codecs=new jne({codecs:i,loadCodec:(l=r.ipld)==null?void 0:l.loadCodec});const a=Object.values(kK);(((d=r.ipld)==null?void 0:d.hashers)??[]).forEach(p=>a.push(p)),this.hashers=new Nne({hashers:a,loadHasher:(h=r.ipld)==null?void 0:h.loadHasher}),this.bitswap=cte(t),this.block=pte(t),this.bootstrap=bte(t),this.config=Ate(t),this.dag=Dte(t,this.codecs),this.dht=Hte(t),this.diag=Zte(t),this.files=cre(t),this.key=mre(t),this.log=Lne(t),this.name=Gne(t),this.object=Qne(t,this.codecs),this.pin=yoe(t),this.pubsub=Roe(t),this.refs=$oe(t),this.repo=Moe(t),this.routing=Voe(t),this.stats=zoe(t),this.swarm=Qoe(t),this.add=TJ(t),this.addAll=YS(t),this.cat=mte(t),this.get=fre(t),this.ls=Une(t),this.id=vT(t),this.version=Xoe(t),this.stop=qoe(t),this.ping=boe(t),this.resolve=Doe(t),this.commands=gte(t),this.mount=Bne(t),this.isOnline=dre(t),this.getEndpointConfig=lre(t)}}function eie(e){return new Joe(e)}function tie(e={}){return(typeof e=="string"||ol(e)||e instanceof URL)&&(e={url:e}),eie(e)}let Wp=null;const yie=()=>(Wp||(Wp=Kp.driver(Tc.neo4jURL,Kp.auth.basic(Tc.neo4jUser,Tc.neo4jPass))),Wp);let zp=null;const bie=()=>(zp||(zp=tie(Tc.ipfsAPI.replace(/\/+$/,""))),zp);export{XZ as A,O as B,G as C,jn as D,r9 as E,iK as R,j as T,yt as U,PS as a,XQ as b,jQ as c,eX as d,ES as e,JQ as f,yie as g,YE as h,sie as i,bie as j,Be as k,Jc as l,el as m,Dv as n,Ed as o,$S as p,qr as q,rK as r,_y as s,qs as t,_Q as u,SS as v,CS as w,vQ as x,HE as y,eQ as z};

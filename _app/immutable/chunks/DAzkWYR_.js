import{o as Os,p as Fs,q as de,c as ct,e as I,u as js,g as Hs}from"./D8L-8Ang.js";import{d as Ns}from"./gKD-OtZU.js";import{cz as be,cA as we,aQ as St,aR as It,cB as Ct,cC as ut,cD as At,aX as j,bu as Us,cE as Rt,cF as Ds,w as Bt,cG as Lt,cH as Gs,cI as Q,cJ as Ue,cK as Z,an as G,ao as z,cL as ve,cM as Ee,cN as kt,B as Pe,cO as zs,aq as $e,bj as R,a5 as We,cP as Vs,cQ as $s,cR as Ws,cS as qt,cT as Mt,n as p,ad as ee,cU as N,at as U,cV as Ot,cW as Ft,cX as jt,cY as Ke,cZ as Je,bl as $,al as _e,aV as H,g as O,bC as Ht,ak as X,u as Nt,c_ as Ut,bG as te,c$ as De,y as _,c6 as se,q as Te,a9 as Ye,bm as Dt,d0 as Gt,d1 as J,bh as T,d2 as Ge,d3 as Qe,d4 as zt,d5 as Vt,by as Xe,bz as Ks,cm as Ze,c3 as $t,bg as Wt,d6 as Kt,aZ as Se,cn as et,d7 as Js,bx as Jt,cj as Yt,d8 as Qt,d9 as Ys,cc as Qs,cd as Xs,da as Xt,db as Zt,dc as es,dd as ts,de as ze,df as ss,dg as Zs,dh as ea,bN as ta,di as sa,dj as aa,bB as na,ac as ra,ab as oa,dk as ia,aT as ca,dl as ua,dm as da,ae as la,af as fa,a8 as ha,dn as ma,dp as ga,bf as pa,dq as ya,dr as ba,ds as wa,ar as _a,c7 as xa,dt as va,du as Ea,dv as Pa,dw as Ta,dx as Sa,dy as Ia,ct as Ca,bo as Aa,cs as Ra,dz as Ba,bc as La,bd as ka,dA as qa,dB as Ma,dC as Oa,dD as Fa,dE as ja,dF as Ha,H as Na,dG as Ua,dH as Da,dI as Ga,dJ as za,dK as Va,dL as $a,dM as Wa,aS as Ka,dN as Ja,ag as Ya,dO as Qa,dP as Xa,dQ as Za,dR as en,dS as tn,b9 as sn,dT as an,dU as nn,dV as rn,dW as on,dX as cn,dY as un,dZ as dn,d_ as ln,d$ as fn,e0 as hn,e1 as mn,e2 as gn,e3 as pn,e4 as yn,e5 as bn,e6 as wn,e7 as _n,e8 as xn,e9 as vn,bO as En,ea as Pn,eb as Tn,ec as Sn,ed as In,ee as Cn,ef as An,eg as Rn,eh as Bn,S as Ln,ei as kn,ej as qn,ek as Mn,el as On,em as Fn,en as jn,eo as Hn,bQ as Nn,ep as Un,eq as Dn,er as Gn,es as zn,be as Vn,bF as $n,et as Wn,U as Kn,eu as Jn,ev as Yn,bD as Qn,ew as Xn,ex as Zn,ey as er,ez as tr,eA as sr,eB as ar,eC as nr,p as rr,bb as or,b4 as ir,eD as cr,cv as ur,eE as dr,eF as lr,eG as fr,c1 as hr,eH as mr,v as gr,aG as pr,eI as yr,cy as br,eJ as wr,eK as _r,eL as xr,eM as vr,bM as Er,eN as Pr,cr as Tr,a$ as Sr,eO as Ir,cu as Cr,eP as Ar,eQ as Rr,eR as Br,aa as Lr,br as kr,a_ as qr,aU as dt,eS as le,a6 as lt,c5 as Mr,eT as Or,cx as Fr,cw as jr,eU as Hr,eV as Nr,eW as Ur,eX as Dr,eY as Gr,eZ as zr,e_ as Vr,e$ as $r,f0 as Wr,f1 as Kr,f2 as Jr,f3 as Yr,f4 as Qr,f5 as Xr,f6 as Zr,f7 as eo,f8 as to,f9 as so,fa as ao,fb as no,fc as ro,fd as oo,fe as io,ff as co,fg as uo,fh as lo,fi as fo,fj as ho,fk as mo,fl as go,fm as po,fn as yo,fo as bo,fp as wo,fq as _o,fr as xo,fs as vo,ft as Eo,fu as Po,fv as To,fw as So,fx as Io,fy as Co,fz as Ao,fA as Ro,fB as Bo,fC as Lo,fD as ko,fE as qo,fF as Mo,fG as Oo,fH as Fo,fI as jo,fJ as Ho,fK as No,fL as Uo,fM as Do,fN as Go,fO as zo,fP as Vo,fQ as $o,fR as Wo,fS as Ko,fT as Jo,fU as Yo,fV as Qo,fW as Xo,fX as Zo,fY as ei,fZ as ti,f_ as si,f$ as ai,g0 as ni,g1 as ri,g2 as oi,g3 as ii,g4 as ci,g5 as ui,g6 as di,g7 as li,g8 as fi,g9 as hi,ga as mi,gb as gi,gc as pi,gd as yi,ge as bi,gf as wi,gg as _i,gh as xi,gi as vi,gj as Ei,gk as Pi,gl as Ti,gm as Si,gn as Ii,go as Ci,gp as Ai,cp as Ri,b0 as Bi,gq as Li,gr as ki,gs as qi,gt as Mi,gu as Oi,gv as Fi,gw as ji,gx as Hi,bq as Ni,as as Ui,o as Di,gy as Gi,gz as ft,gA as zi,c2 as Vi,c4 as $i,gB as Wi,gC as Ki,gD as Ji,gE as Yi}from"./BJKK_szU.js";import{d as Qi,f as Xi,h as Zi,i as ec,j as tc,k as as,p as ns,w as sc,l as ac,m as nc,E as rc,n as oc,o as ic,F as cc,W as uc,c as dc,a as lc,q as fc,e as hc,r as mc,b as ht,t as gc,u as pc,v as yc,x as bc,y as wc,s as _c,z as mt,A as xc,B as vc}from"./QLKzJ-Qh.js";import{h as rs,a as os,g as is,v as cs,s as us,I as Ec,b as Pc,c as Tc,d as Sc,e as Ic,f as Cc,p as Ac,t as Rc}from"./Cf7ozrl3.js";import{_ as Bc}from"./C1FmrZbK.js";import{d as Lc,e as kc,b as qc}from"./9y6LLMQI.js";import{s as ds}from"./6tPWN6ZZ.js";import{ccipRequest as gt,offchainLookup as Mc,offchainLookupAbiItem as Oc,offchainLookupSignature as Fc}from"./CMHkZu7w.js";function jc(e,t){for(var s=0;s<t.length;s++){const a=t[s];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in e)){const r=Object.getOwnPropertyDescriptor(a,n);r&&Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function Hc(e){let t;if(typeof e=="string")t=be(e,{modifiers:we});else{const s=St(e),a=e.length;for(let n=0;n<a;n++){const r=e[n];if(!It(r)){t=be(r,{modifiers:we,structs:s});break}}}if(!t)throw new Ct({param:e});return t}function Nc(e){const t=[];if(typeof e=="string"){const s=ut(e),a=s.length;for(let n=0;n<a;n++)t.push(be(s[n],{modifiers:we}))}else{const s=St(e),a=e.length;for(let n=0;n<a;n++){const r=e[n];if(It(r))continue;const i=ut(r),c=i.length;for(let o=0;o<c;o++)t.push(be(i[o],{modifiers:we,structs:s}))}}if(t.length===0)throw new At({params:e});return t}function Uc({abi:e,address:t,client:s}){const a=s,[n,r]=a?"public"in a&&"wallet"in a?[a.public,a.wallet]:"public"in a?[a.public,void 0]:"wallet"in a?[void 0,a.wallet]:[a,a]:[void 0,void 0],i=n!=null,c=r!=null,o={};let u=!1,l=!1,f=!1;for(const h of e)if(h.type==="function"?h.stateMutability==="view"||h.stateMutability==="pure"?u=!0:l=!0:h.type==="event"&&(f=!0),u&&l&&f)break;return i&&(u&&(o.read=new Proxy({},{get(h,d){return(...m)=>{const{args:g,options:y}=fe(m);return j(n,Us,"readContract")({abi:e,address:t,functionName:d,args:g,...y})}}})),l&&(o.simulate=new Proxy({},{get(h,d){return(...m)=>{const{args:g,options:y}=fe(m);return j(n,Qi,"simulateContract")({abi:e,address:t,functionName:d,args:g,...y})}}})),f&&(o.createEventFilter=new Proxy({},{get(h,d){return(...m)=>{const g=e.find(w=>w.type==="event"&&w.name===d),{args:y,options:v}=Fe(m,g);return j(n,Xi,"createContractEventFilter")({abi:e,address:t,eventName:d,args:y,...v})}}}),o.getEvents=new Proxy({},{get(h,d){return(...m)=>{const g=e.find(w=>w.type==="event"&&w.name===d),{args:y,options:v}=Fe(m,g);return j(n,Zi,"getContractEvents")({abi:e,address:t,eventName:d,args:y,...v})}}}),o.watchEvent=new Proxy({},{get(h,d){return(...m)=>{const g=e.find(w=>w.type==="event"&&w.name===d),{args:y,options:v}=Fe(m,g);return j(n,ec,"watchContractEvent")({abi:e,address:t,eventName:d,args:y,...v})}}}))),c&&l&&(o.write=new Proxy({},{get(h,d){return(...m)=>{const{args:g,options:y}=fe(m);return j(r,Rt,"writeContract")({abi:e,address:t,functionName:d,args:g,...y})}}})),(i||c)&&l&&(o.estimateGas=new Proxy({},{get(h,d){return(...m)=>{const{args:g,options:y}=fe(m);return j(n??r,tc,"estimateContractGas")({abi:e,address:t,functionName:d,args:g,...y,account:y.account??r.account})}}})),o.address=t,o.abi=e,o}function fe(e){const t=e.length&&Array.isArray(e[0]),s=t?e[0]:[],a=(t?e[1]:e[0])??{};return{args:s,options:a}}function Fe(e,t){let s=!1;Array.isArray(e[0])?s=!0:e.length===1?s=t.inputs.some(r=>r.indexed):e.length===2&&(s=!0);const a=s?e[0]:void 0,n=(s?e[1]:e[0])??{};return{args:a,options:n}}function Dc({chains:e,id:t}){return e.find(s=>s.id===t)}const je=new Map;async function Gc(e){const{getSocket:t,keepAlive:s=!0,key:a="socket",reconnect:n=!0,url:r}=e,{interval:i=3e4}=typeof s=="object"?s:{},{attempts:c=5,delay:o=2e3}=typeof n=="object"?n:{},u=JSON.stringify({keepAlive:s,key:a,url:r,reconnect:n});let l=je.get(u);if(l)return l;let f=0;const{schedule:h}=Ds({id:u,fn:async()=>{const g=new Map,y=new Map;let v,w,E;async function C(){const x=await t({onClose(){var b,P;for(const S of g.values())(b=S.onError)==null||b.call(S,new Q({url:r}));for(const S of y.values())(P=S.onError)==null||P.call(S,new Q({url:r}));n&&f<c?setTimeout(async()=>{f++,await C().catch(console.error)},o):(g.clear(),y.clear())},onError(b){var P,S;v=b;for(const A of g.values())(P=A.onError)==null||P.call(A,v);for(const A of y.values())(S=A.onError)==null||S.call(A,v);l==null||l.close(),n&&f<c?setTimeout(async()=>{f++,await C().catch(console.error)},o):(g.clear(),y.clear())},onOpen(){v=void 0,f=0},onResponse(b){const P=b.method==="eth_subscription",S=P?b.params.subscription:b.id,A=P?y:g,L=A.get(S);L&&L.onResponse(b),P||A.delete(S)}});if(w=x,s&&(E&&clearInterval(E),E=setInterval(()=>{var b;return(b=w.ping)==null?void 0:b.call(w)},i)),n&&y.size>0){const b=y.entries();for(const[P,{onResponse:S,body:A,onError:L}]of b)A&&(y.delete(P),l==null||l.request({body:A,onResponse:S,onError:L}))}return x}return await C(),v=void 0,l={close(){E&&clearInterval(E),w.close(),je.delete(u)},get socket(){return w},request({body:x,onError:b,onResponse:P}){v&&b&&b(v);const S=x.id??Gs.take(),A=L=>{var it;typeof L.id=="number"&&S!==L.id||(x.method==="eth_subscribe"&&typeof L.result=="string"&&y.set(L.result,{onResponse:A,onError:b,body:x}),x.method==="eth_unsubscribe"&&y.delete((it=x.params)==null?void 0:it[0]),P(L))};g.set(S,{onResponse:A,onError:b});try{w.request({body:{jsonrpc:"2.0",id:S,...x}})}catch(L){b==null||b(L)}},requestAsync({body:x,timeout:b=1e4}){return Bt(()=>new Promise((P,S)=>this.request({body:x,onError:S,onResponse:P})),{errorInstance:new Lt({body:x,url:r}),timeout:b})},requests:g,subscriptions:y,url:r},je.set(u,l),[l]}}),[d,[m]]=await h();return m}async function ye(e,t={}){const{keepAlive:s,reconnect:a}=t;return Gc({async getSocket({onClose:n,onError:r,onOpen:i,onResponse:c}){const o=await Bc(()=>import("./CJ5et6AR.js"),[],import.meta.url).then(d=>d.WebSocket),u=new o(e);function l(){u.removeEventListener("close",l),u.removeEventListener("message",f),u.removeEventListener("error",r),u.removeEventListener("open",i),n()}function f({data:d}){try{const m=JSON.parse(d);c(m)}catch(m){r(m)}}u.addEventListener("close",l),u.addEventListener("message",f),u.addEventListener("error",r),u.addEventListener("open",i),u.readyState===o.CONNECTING&&await new Promise((d,m)=>{u&&(u.onopen=d,u.onerror=m)});const{close:h}=u;return Object.assign(u,{close(){h.bind(u)(),l()},ping(){try{if(u.readyState===u.CLOSED||u.readyState===u.CLOSING)throw new Ue({url:u.url,cause:new Q({url:u.url})});const d={jsonrpc:"2.0",method:"net_version",params:[]};u.send(JSON.stringify(d))}catch(d){r(d)}},request({body:d}){if(u.readyState===u.CLOSED||u.readyState===u.CLOSING)throw new Ue({body:d,url:u.url,cause:new Q({url:u.url})});return u.send(JSON.stringify(d))}})},keepAlive:s,reconnect:a,url:e})}async function zc(e){const t=await ye(e);return Object.assign(t.socket,{requests:t.requests,subscriptions:t.subscriptions})}function ls(e){const{authorizationList:t}=e;if(t)for(const s of t){const{chainId:a}=s,n=s.address;if(!G(n))throw new z({address:n});if(a<0)throw new Z({chainId:a})}ae(e)}function fs(e){const{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new zs;for(const s of t){const a=$e(s),n=R(We(s,0,1));if(a!==32)throw new Vs({hash:s,size:a});if(n!==$s)throw new Ws({hash:s,version:n})}}ae(e)}function ae(e){const{chainId:t,maxPriorityFeePerGas:s,maxFeePerGas:a,to:n}=e;if(t<=0)throw new Z({chainId:t});if(n&&!G(n))throw new z({address:n});if(a&&a>ve)throw new Ee({maxFeePerGas:a});if(s&&a&&s>a)throw new kt({maxFeePerGas:a,maxPriorityFeePerGas:s})}function tt(e){const{chainId:t,maxPriorityFeePerGas:s,gasPrice:a,maxFeePerGas:n,to:r}=e;if(t<=0)throw new Z({chainId:t});if(r&&!G(r))throw new z({address:r});if(s||n)throw new Pe("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(a&&a>ve)throw new Ee({maxFeePerGas:a})}function st(e){const{chainId:t,maxPriorityFeePerGas:s,gasPrice:a,maxFeePerGas:n,to:r}=e;if(r&&!G(r))throw new z({address:r});if(typeof t<"u"&&t<=0)throw new Z({chainId:t});if(s||n)throw new Pe("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(a&&a>ve)throw new Ee({maxFeePerGas:a})}function ne(e){if(!e||e.length===0)return[];const t=[];for(let s=0;s<e.length;s++){const{address:a,storageKeys:n}=e[s];for(let r=0;r<n.length;r++)if(n[r].length-2!==64)throw new qt({storageKey:n[r]});if(!G(a,{strict:!1}))throw new z({address:a});t.push([a,n])}return t}function hs(e,t){const s=Mt(e);return s==="eip1559"?Wc(e,t):s==="eip2930"?Kc(e,t):s==="eip4844"?$c(e,t):s==="eip7702"?Vc(e,t):Jc(e,t)}function Vc(e,t){const{authorizationList:s,chainId:a,gas:n,nonce:r,to:i,value:c,maxFeePerGas:o,maxPriorityFeePerGas:u,accessList:l,data:f}=e;ls(e);const h=ne(l),d=Yc(s);return ee(["0x04",N([p(a),r?p(r):"0x",u?p(u):"0x",o?p(o):"0x",n?p(n):"0x",i??"0x",c?p(c):"0x",f??"0x",h,d,...re(e,t)])])}function $c(e,t){const{chainId:s,gas:a,nonce:n,to:r,value:i,maxFeePerBlobGas:c,maxFeePerGas:o,maxPriorityFeePerGas:u,accessList:l,data:f}=e;fs(e);let h=e.blobVersionedHashes,d=e.sidecars;if(e.blobs&&(typeof h>"u"||typeof d>"u")){const E=typeof e.blobs[0]=="string"?e.blobs:e.blobs.map(b=>U(b)),C=e.kzg,x=Ot({blobs:E,kzg:C});if(typeof h>"u"&&(h=Ft({commitments:x})),typeof d>"u"){const b=jt({blobs:E,commitments:x,kzg:C});d=Ke({blobs:E,commitments:x,proofs:b})}}const m=ne(l),g=[p(s),n?p(n):"0x",u?p(u):"0x",o?p(o):"0x",a?p(a):"0x",r??"0x",i?p(i):"0x",f??"0x",m,c?p(c):"0x",h??[],...re(e,t)],y=[],v=[],w=[];if(d)for(let E=0;E<d.length;E++){const{blob:C,commitment:x,proof:b}=d[E];y.push(C),v.push(x),w.push(b)}return ee(["0x03",d?N([g,y,v,w]):N(g)])}function Wc(e,t){const{chainId:s,gas:a,nonce:n,to:r,value:i,maxFeePerGas:c,maxPriorityFeePerGas:o,accessList:u,data:l}=e;ae(e);const f=ne(u),h=[p(s),n?p(n):"0x",o?p(o):"0x",c?p(c):"0x",a?p(a):"0x",r??"0x",i?p(i):"0x",l??"0x",f,...re(e,t)];return ee(["0x02",N(h)])}function Kc(e,t){const{chainId:s,gas:a,data:n,nonce:r,to:i,value:c,accessList:o,gasPrice:u}=e;tt(e);const l=ne(o),f=[p(s),r?p(r):"0x",u?p(u):"0x",a?p(a):"0x",i??"0x",c?p(c):"0x",n??"0x",l,...re(e,t)];return ee(["0x01",N(f)])}function Jc(e,t){const{chainId:s=0,gas:a,data:n,nonce:r,to:i,value:c,gasPrice:o}=e;st(e);let u=[r?p(r):"0x",o?p(o):"0x",a?p(a):"0x",i??"0x",c?p(c):"0x",n??"0x"];if(t){const l=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(s>0)return BigInt(s*2)+BigInt(35n+t.v-27n);const d=27n+(t.v===27n?0n:1n);if(t.v!==d)throw new Je({v:t.v});return d})(),f=$(t.r),h=$(t.s);u=[...u,p(l),f==="0x00"?"0x":f,h==="0x00"?"0x":h]}else s>0&&(u=[...u,p(s),"0x","0x"]);return N(u)}function re(e,t){const s=t??e,{v:a,yParity:n}=s;if(typeof s.r>"u")return[];if(typeof s.s>"u")return[];if(typeof a>"u"&&typeof n>"u")return[];const r=$(s.r),i=$(s.s);return[typeof n=="number"?n?p(1):"0x":a===0n?"0x":a===1n?p(1):a===27n?"0x":p(1),r==="0x00"?"0x":r,i==="0x00"?"0x":i]}function Yc(e){if(!e||e.length===0)return[];const t=[];for(const s of e){const{chainId:a,nonce:n,...r}=s,i=s.address;t.push([a?_e(a):"0x",i,n?_e(n):"0x",...re({},r)])}return t}function Ve(e){return!e||typeof e!="object"||!("BYTES_PER_ELEMENT"in e)?!1:e.BYTES_PER_ELEMENT===1&&e.constructor.name==="Uint8Array"}function Qc(e){return e.opcode==="CREATE2"?gs(e):ms(e)}function ms(e){const t=H(O(e.from));let s=H(e.nonce);return s[0]===0&&(s=new Uint8Array([])),O(`0x${X(N([t,s],"bytes")).slice(26)}`)}function gs(e){const t=H(O(e.from)),s=Ht(Ve(e.salt)?e.salt:H(e.salt),{size:32}),a="bytecodeHash"in e?Ve(e.bytecodeHash)?e.bytecodeHash:H(e.bytecodeHash):X(e.bytecode,"bytes");return O(We(X(Nt([H("0xff"),t,s,a])),12))}function at(e,t="hex"){const s=(()=>{if(typeof e=="string"){if(e.length>3&&e.length%2!==0)throw new Ut(e);return te(e)}return e})(),a=De(s,{recursiveReadLimit:Number.POSITIVE_INFINITY});return ps(a,t)}function ps(e,t="hex"){if(e.bytes.length===0)return t==="hex"?U(e.bytes):e.bytes;const s=e.readByte();if(s<128&&e.decrementPosition(1),s<192){const n=pt(e,s,128),r=e.readBytes(n);return t==="hex"?U(r):r}const a=pt(e,s,192);return Xc(e,a,t)}function pt(e,t,s){if(s===128&&t<128)return 1;if(t<=s+55)return t-s;if(t===s+55+1)return e.readUint8();if(t===s+55+2)return e.readUint16();if(t===s+55+3)return e.readUint24();if(t===s+55+4)return e.readUint32();throw new Pe("Invalid RLP prefix")}function Xc(e,t,s){const a=e.position,n=[];for(;e.position-a<t;)n.push(ps(e,s));return n}function ys(e){return _(e)&&$e(e)===32}const Zc=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),bs=Uint8Array.from(new Array(16).fill(0).map((e,t)=>t)),eu=bs.map(e=>(9*e+5)%16),ws=(()=>{const s=[[bs],[eu]];for(let a=0;a<4;a++)for(let n of s)n.push(n[a].map(r=>Zc[r]));return s})(),_s=ws[0],xs=ws[1],vs=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>Uint8Array.from(e)),tu=_s.map((e,t)=>e.map(s=>vs[t][s])),su=xs.map((e,t)=>e.map(s=>vs[t][s])),au=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),nu=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function yt(e,t,s,a){return e===0?t^s^a:e===1?t&s|~t&a:e===2?(t|~s)^a:e===3?t&a|s&~a:t^(s|~a)}const he=new Uint32Array(16);class ru extends Fs{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:s,h2:a,h3:n,h4:r}=this;return[t,s,a,n,r]}set(t,s,a,n,r){this.h0=t|0,this.h1=s|0,this.h2=a|0,this.h3=n|0,this.h4=r|0}process(t,s){for(let d=0;d<16;d++,s+=4)he[d]=t.getUint32(s,!0);let a=this.h0|0,n=a,r=this.h1|0,i=r,c=this.h2|0,o=c,u=this.h3|0,l=u,f=this.h4|0,h=f;for(let d=0;d<5;d++){const m=4-d,g=au[d],y=nu[d],v=_s[d],w=xs[d],E=tu[d],C=su[d];for(let x=0;x<16;x++){const b=de(a+yt(d,r,c,u)+he[v[x]]+g,E[x])+f|0;a=f,f=u,u=de(c,10)|0,c=r,r=b}for(let x=0;x<16;x++){const b=de(n+yt(m,i,o,l)+he[w[x]]+y,C[x])+h|0;n=h,h=l,l=de(o,10)|0,o=i,i=b}}this.set(this.h1+c+l|0,this.h2+u+h|0,this.h3+f+n|0,this.h4+a+i|0,this.h0+r+o|0)}roundClean(){ct(he)}destroy(){this.destroyed=!0,ct(this.buffer),this.set(0,0,0,0,0)}}const ou=Os(()=>new ru),iu=ou;function cu(e,t){const s=t||"hex",a=iu(_(e,{strict:!1})?H(e):e);return s==="bytes"?a:_e(a)}async function Es({message:e,signature:t}){return se({hash:rs(e),signature:t})}async function Ps(e){const{domain:t,message:s,primaryType:a,signature:n,types:r}=e;return se({hash:os({domain:t,message:s,primaryType:a,types:r}),signature:n})}async function uu({address:e,hash:t,signature:s}){return Te(O(e),await se({hash:t,signature:s}))}async function du({address:e,message:t,signature:s}){return Te(O(e),await Es({message:t,signature:s}))}async function lu(e){const{address:t,domain:s,message:a,primaryType:n,signature:r,types:i}=e;return Te(O(t),await Ps({domain:s,message:a,primaryType:n,signature:r,types:i}))}function fu(e){if(!as(e))return{signature:e};const[t,s,a]=Ye([{type:"address"},{type:"bytes"},{type:"bytes"}],e);return{address:t,data:s,signature:a}}function Ts(e){const t=Dt(e,0,1);if(t==="0x04")return"eip7702";if(t==="0x03")return"eip4844";if(t==="0x02")return"eip1559";if(t==="0x01")return"eip2930";if(t!=="0x"&&R(t)>=192)return"legacy";throw new Gt({serializedType:t})}function Ss(e){const t=Ts(e);return t==="eip1559"?gu(e):t==="eip2930"?pu(e):t==="eip4844"?mu(e):t==="eip7702"?hu(e):yu(e)}function hu(e){const t=Ie(e),[s,a,n,r,i,c,o,u,l,f,h,d,m]=t;if(t.length!==10&&t.length!==13)throw new J({attributes:{chainId:s,nonce:a,maxPriorityFeePerGas:n,maxFeePerGas:r,gas:i,to:c,value:o,data:u,accessList:l,authorizationList:f,...t.length>9?{v:h,r:d,s:m}:{}},serializedTransaction:e,type:"eip7702"});const g={chainId:R(s),type:"eip7702"};return _(c)&&c!=="0x"&&(g.to=c),_(i)&&i!=="0x"&&(g.gas=T(i)),_(u)&&u!=="0x"&&(g.data=u),_(a)&&(g.nonce=a==="0x"?0:R(a)),_(o)&&o!=="0x"&&(g.value=T(o)),_(r)&&r!=="0x"&&(g.maxFeePerGas=T(r)),_(n)&&n!=="0x"&&(g.maxPriorityFeePerGas=T(n)),l.length!==0&&l!=="0x"&&(g.accessList=Ce(l)),f.length!==0&&f!=="0x"&&(g.authorizationList=bu(f)),ls(g),{...t.length===13?oe(t):void 0,...g}}function mu(e){const t=Ie(e),s=t.length===4,a=s?t[0]:t,n=s?t.slice(1):[],[r,i,c,o,u,l,f,h,d,m,g,y,v,w]=a,[E,C,x]=n;if(!(a.length===11||a.length===14))throw new J({attributes:{chainId:r,nonce:i,maxPriorityFeePerGas:c,maxFeePerGas:o,gas:u,to:l,value:f,data:h,accessList:d,...a.length>9?{v:y,r:v,s:w}:{}},serializedTransaction:e,type:"eip4844"});const b={blobVersionedHashes:g,chainId:R(r),type:"eip4844"};return _(l)&&l!=="0x"&&(b.to=l),_(u)&&u!=="0x"&&(b.gas=T(u)),_(h)&&h!=="0x"&&(b.data=h),_(i)&&(b.nonce=i==="0x"?0:R(i)),_(f)&&f!=="0x"&&(b.value=T(f)),_(m)&&m!=="0x"&&(b.maxFeePerBlobGas=T(m)),_(o)&&o!=="0x"&&(b.maxFeePerGas=T(o)),_(c)&&c!=="0x"&&(b.maxPriorityFeePerGas=T(c)),d.length!==0&&d!=="0x"&&(b.accessList=Ce(d)),E&&C&&x&&(b.sidecars=Ke({blobs:E,commitments:C,proofs:x})),fs(b),{...a.length===14?oe(a):void 0,...b}}function gu(e){const t=Ie(e),[s,a,n,r,i,c,o,u,l,f,h,d]=t;if(!(t.length===9||t.length===12))throw new J({attributes:{chainId:s,nonce:a,maxPriorityFeePerGas:n,maxFeePerGas:r,gas:i,to:c,value:o,data:u,accessList:l,...t.length>9?{v:f,r:h,s:d}:{}},serializedTransaction:e,type:"eip1559"});const m={chainId:R(s),type:"eip1559"};return _(c)&&c!=="0x"&&(m.to=c),_(i)&&i!=="0x"&&(m.gas=T(i)),_(u)&&u!=="0x"&&(m.data=u),_(a)&&(m.nonce=a==="0x"?0:R(a)),_(o)&&o!=="0x"&&(m.value=T(o)),_(r)&&r!=="0x"&&(m.maxFeePerGas=T(r)),_(n)&&n!=="0x"&&(m.maxPriorityFeePerGas=T(n)),l.length!==0&&l!=="0x"&&(m.accessList=Ce(l)),ae(m),{...t.length===12?oe(t):void 0,...m}}function pu(e){const t=Ie(e),[s,a,n,r,i,c,o,u,l,f,h]=t;if(!(t.length===8||t.length===11))throw new J({attributes:{chainId:s,nonce:a,gasPrice:n,gas:r,to:i,value:c,data:o,accessList:u,...t.length>8?{v:l,r:f,s:h}:{}},serializedTransaction:e,type:"eip2930"});const d={chainId:R(s),type:"eip2930"};return _(i)&&i!=="0x"&&(d.to=i),_(r)&&r!=="0x"&&(d.gas=T(r)),_(o)&&o!=="0x"&&(d.data=o),_(a)&&(d.nonce=a==="0x"?0:R(a)),_(c)&&c!=="0x"&&(d.value=T(c)),_(n)&&n!=="0x"&&(d.gasPrice=T(n)),u.length!==0&&u!=="0x"&&(d.accessList=Ce(u)),tt(d),{...t.length===11?oe(t):void 0,...d}}function yu(e){const t=at(e,"hex"),[s,a,n,r,i,c,o,u,l]=t;if(!(t.length===6||t.length===9))throw new J({attributes:{nonce:s,gasPrice:a,gas:n,to:r,value:i,data:c,...t.length>6?{v:o,r:u,s:l}:{}},serializedTransaction:e,type:"legacy"});const f={type:"legacy"};if(_(r)&&r!=="0x"&&(f.to=r),_(n)&&n!=="0x"&&(f.gas=T(n)),_(c)&&c!=="0x"&&(f.data=c),_(s)&&(f.nonce=s==="0x"?0:R(s)),_(i)&&i!=="0x"&&(f.value=T(i)),_(a)&&a!=="0x"&&(f.gasPrice=T(a)),st(f),t.length===6)return f;const h=_(o)&&o!=="0x"?T(o):0n;if(l==="0x"&&u==="0x")return h>0&&(f.chainId=Number(h)),f;const d=h,m=Number((d-35n)/2n);if(m>0)f.chainId=m;else if(d!==27n&&d!==28n)throw new Je({v:d});return f.v=d,f.s=l,f.r=u,f.yParity=d%2n===0n?1:0,f}function Ie(e){return at(`0x${e.slice(4)}`,"hex")}function Ce(e){const t=[];for(let s=0;s<e.length;s++){const[a,n]=e[s];if(!G(a,{strict:!1}))throw new z({address:a});t.push({address:a,storageKeys:n.map(r=>ys(r)?r:$(r))})}return t}function bu(e){const t=[];for(let s=0;s<e.length;s++){const[a,n,r,i,c,o]=e[s];t.push({address:n,chainId:R(a),nonce:R(r),...oe([i,c,o])})}return t}function oe(e){const t=e.slice(-3),s=t[0]==="0x"||T(t[0])===0n?27n:28n;return{r:Ge(t[1],{size:32}),s:Ge(t[2],{size:32}),v:s,yParity:s===27n?0:1}}function wu(e,t="wei"){return Qe(e,zt[t])}function _u(e,t="wei"){return Qe(e,Vt[t])}async function xu(e,{hash:t}){await e.request({method:`${e.mode}_dropTransaction`,params:[t]})}async function vu(e){return e.request({method:`${e.mode}_dumpState`})}async function Eu(e){return e.mode==="ganache"?await e.request({method:"eth_mining"}):await e.request({method:`${e.mode}_getAutomine`})}async function Pu(e){return await e.request({method:"txpool_content"})}async function Tu(e){const{pending:t,queued:s}=await e.request({method:"txpool_status"});return{pending:R(t),queued:R(s)}}async function Su(e,{address:t}){await e.request({method:`${e.mode}_impersonateAccount`,params:[t]})}async function Iu(e,{seconds:t}){return await e.request({method:"evm_increaseTime",params:[p(t)]})}async function Cu(e){return await e.request({method:"txpool_inspect"})}async function Au(e,{state:t}){await e.request({method:`${e.mode}_loadState`,params:[t]})}async function Ru(e,{blocks:t,interval:s}){e.mode==="ganache"?await e.request({method:"evm_mine",params:[{blocks:p(t)}]}):await e.request({method:`${e.mode}_mine`,params:[p(t),p(s||0)]})}async function Bu(e){await e.request({method:`${e.mode}_removeBlockTimestampInterval`})}async function Lu(e,{blockNumber:t,jsonRpcUrl:s}={}){await e.request({method:`${e.mode}_reset`,params:[{forking:{blockNumber:Number(t),jsonRpcUrl:s}}]})}async function ku(e,{id:t}){await e.request({method:"evm_revert",params:[t]})}async function qu(e,t){var v,w,E;const{accessList:s,data:a,from:n,gas:r,gasPrice:i,maxFeePerGas:c,maxPriorityFeePerGas:o,nonce:u,to:l,value:f,...h}=t,d=(E=(w=(v=e.chain)==null?void 0:v.formatters)==null?void 0:w.transactionRequest)==null?void 0:E.format,g=(d||Xe)({...Ks(h,{format:d}),accessList:s,data:a,from:n,gas:r,gasPrice:i,maxFeePerGas:c,maxPriorityFeePerGas:o,nonce:u,to:l,value:f});return await e.request({method:"eth_sendUnsignedTransaction",params:[g]})}async function Mu(e,t){e.mode==="ganache"?t?await e.request({method:"miner_start"}):await e.request({method:"miner_stop"}):await e.request({method:"evm_setAutomine",params:[t]})}async function Ou(e,{address:t,value:s}){e.mode==="ganache"?await e.request({method:"evm_setAccountBalance",params:[t,p(s)]}):await e.request({method:`${e.mode}_setBalance`,params:[t,p(s)]})}async function Fu(e,{gasLimit:t}){await e.request({method:"evm_setBlockGasLimit",params:[p(t)]})}async function ju(e,{interval:t}){const s=e.mode==="hardhat"?t*1e3:t;await e.request({method:`${e.mode}_setBlockTimestampInterval`,params:[s]})}async function Hu(e,{address:t,bytecode:s}){e.mode==="ganache"?await e.request({method:"evm_setAccountCode",params:[t,s]}):await e.request({method:`${e.mode}_setCode`,params:[t,s]})}async function Nu(e,{address:t}){await e.request({method:`${e.mode}_setCoinbase`,params:[t]})}async function Uu(e,{interval:t}){const s=e.mode==="hardhat"?t*1e3:t;await e.request({method:"evm_setIntervalMining",params:[s]})}async function Du(e,t){await e.request({method:`${e.mode}_setLoggingEnabled`,params:[t]})}async function Gu(e,{gasPrice:t}){await e.request({method:`${e.mode}_setMinGasPrice`,params:[p(t)]})}async function zu(e,{baseFeePerGas:t}){await e.request({method:`${e.mode}_setNextBlockBaseFeePerGas`,params:[p(t)]})}async function Vu(e,{timestamp:t}){await e.request({method:"evm_setNextBlockTimestamp",params:[p(t)]})}async function $u(e,{address:t,nonce:s}){await e.request({method:`${e.mode}_setNonce`,params:[t,p(s)]})}async function Wu(e,t){await e.request({method:`${e.mode}_setRpcUrl`,params:[t]})}async function Ku(e,{address:t,index:s,value:a}){await e.request({method:`${e.mode}_setStorageAt`,params:[t,typeof s=="number"?p(s):s,a]})}async function Ju(e){return await e.request({method:"evm_snapshot"})}async function Yu(e,{address:t}){await e.request({method:`${e.mode}_stopImpersonatingAccount`,params:[t]})}function Is({mode:e}){return t=>{const s=t.extend(()=>({mode:e}));return{dropTransaction:a=>xu(s,a),dumpState:()=>vu(s),getAutomine:()=>Eu(s),getTxpoolContent:()=>Pu(s),getTxpoolStatus:()=>Tu(s),impersonateAccount:a=>Su(s,a),increaseTime:a=>Iu(s,a),inspectTxpool:()=>Cu(s),loadState:a=>Au(s,a),mine:a=>Ru(s,a),removeBlockTimestampInterval:()=>Bu(s),reset:a=>Lu(s,a),revert:a=>ku(s,a),sendUnsignedTransaction:a=>qu(s,a),setAutomine:a=>Mu(s,a),setBalance:a=>Ou(s,a),setBlockGasLimit:a=>Fu(s,a),setBlockTimestampInterval:a=>ju(s,a),setCode:a=>Hu(s,a),setCoinbase:a=>Nu(s,a),setIntervalMining:a=>Uu(s,a),setLoggingEnabled:a=>Du(s,a),setMinGasPrice:a=>Gu(s,a),setNextBlockBaseFeePerGas:a=>zu(s,a),setNextBlockTimestamp:a=>Vu(s,a),setNonce:a=>$u(s,a),setRpcUrl:a=>Wu(s,a),setStorageAt:a=>Ku(s,a),snapshot:()=>Ju(s),stopImpersonatingAccount:a=>Yu(s,a)}}}function Qu(e){const{key:t="test",name:s="Test Client",mode:a}=e;return Ze({...e,key:t,name:s,type:"testClient"}).extend(r=>({mode:a,...Is({mode:a})(r)}))}async function Xu(e,{chain:t}){const{id:s,name:a,nativeCurrency:n,rpcUrls:r,blockExplorers:i}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:p(s),chainName:a,nativeCurrency:n,rpcUrls:r.default.http,blockExplorerUrls:i?Object.values(i).map(({url:c})=>c):void 0}]},{dedupe:!0,retryCount:0})}function Zu(e,t){const{abi:s,args:a,bytecode:n,...r}=t,i=$t({abi:s,args:a,bytecode:n});return Wt(e,{...r,...r.authorizationList?{to:null}:{},data:i})}async function ed(e){var s;return((s=e.account)==null?void 0:s.type)==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(a=>Kt(a))}async function td(e,t={}){const{account:s=e.account,chainId:a}=t,n=s?Se(s):void 0,r=a?[n==null?void 0:n.address,[p(a)]]:[n==null?void 0:n.address],i=await e.request({method:"wallet_getCapabilities",params:r}),c={};for(const[o,u]of Object.entries(i)){c[Number(o)]={};for(let[l,f]of Object.entries(u))l==="addSubAccount"&&(l="unstable_addSubAccount"),c[Number(o)][l]=f}return typeof a=="number"?c[a]:c}async function sd(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}async function ad(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(s=>O(s))}async function nd(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}async function rd(e,t){const{id:s}=t;await e.request({method:"wallet_showCallsStatus",params:[s]})}async function od(e,t){const{account:s=e.account}=t;if(!s)throw new et({docsPath:"/docs/eip7702/signAuthorization"});const a=Se(s);if(!a.signAuthorization)throw new Js({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:a.type});const n=await ns(e,t);return a.signAuthorization(n)}async function id(e,t){var u,l,f,h;const{account:s=e.account,chain:a=e.chain,...n}=t;if(!s)throw new et({docsPath:"/docs/actions/wallet/signTransaction"});const r=Se(s);Jt({account:r,...t});const i=await j(e,Yt,"getChainId")({});a!==null&&Qt({currentChainId:i,chain:a});const c=(a==null?void 0:a.formatters)||((u=e.chain)==null?void 0:u.formatters),o=((l=c==null?void 0:c.transactionRequest)==null?void 0:l.format)||Xe;return r.signTransaction?r.signTransaction({...n,chainId:i},{serializer:(h=(f=e.chain)==null?void 0:f.serializers)==null?void 0:h.transaction}):await e.request({method:"eth_signTransaction",params:[{...o(n),chainId:p(i),from:r.address}]},{retryCount:0})}async function cd(e,t){const{account:s=e.account,domain:a,message:n,primaryType:r}=t;if(!s)throw new et({docsPath:"/docs/actions/wallet/signTypedData"});const i=Se(s),c={EIP712Domain:is({domain:a}),...t.types};if(cs({domain:a,message:n,primaryType:r,types:c}),i.signTypedData)return i.signTypedData({domain:a,message:n,primaryType:r,types:c});const o=us({domain:a,message:n,primaryType:r,types:c});return e.request({method:"eth_signTypedData_v4",params:[i.address,o]},{retryCount:0})}async function ud(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:p(t)}]},{retryCount:0})}async function dd(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}function Cs(e){return{addChain:t=>Xu(e,t),deployContract:t=>Zu(e,t),getAddresses:()=>ed(e),getCallsStatus:t=>nc(e,t),getCapabilities:t=>td(e,t),getChainId:()=>Yt(e),getPermissions:()=>sd(e),prepareAuthorization:t=>ns(e,t),prepareTransactionRequest:t=>Xs(e,t),requestAddresses:()=>ad(e),requestPermissions:t=>nd(e,t),sendCalls:t=>ac(e,t),sendRawTransaction:t=>Qs(e,t),sendTransaction:t=>Wt(e,t),showCallsStatus:t=>rd(e,t),signAuthorization:t=>od(e,t),signMessage:t=>Ys(e,t),signTransaction:t=>id(e,t),signTypedData:t=>cd(e,t),switchChain:t=>ud(e,t),waitForCallsStatus:t=>sc(e,t),watchAsset:t=>dd(e,t),writeContract:t=>Rt(e,t)}}function ld(e){const{key:t="wallet",name:s="Wallet Client",transport:a}=e;return Ze({...e,key:t,name:s,transport:a,type:"walletClient"}).extend(Cs)}function fd(e,t={}){const{keepAlive:s,key:a="webSocket",methods:n,name:r="WebSocket JSON-RPC",reconnect:i,retryDelay:c}=t;return({chain:o,retryCount:u,timeout:l})=>{var g;const f=t.retryCount??u,h=l??t.timeout??1e4,d=e||((g=o==null?void 0:o.rpcUrls.default.webSocket)==null?void 0:g[0]),m={keepAlive:s,reconnect:i};if(!d)throw new Xt;return Zt({key:a,methods:n,name:r,async request({method:y,params:v}){const w={method:y,params:v},E=await ye(d,m),{error:C,result:x}=await E.requestAsync({body:w,timeout:h});if(C)throw new es({body:w,error:C,url:d});return x},retryCount:f,retryDelay:c,timeout:h,type:"webSocket"},{getSocket(){return zc(d)},getRpcClient(){return ye(d,m)},async subscribe({params:y,onData:v,onError:w}){const E=await ye(d,m),{result:C}=await new Promise((x,b)=>E.request({body:{method:"eth_subscribe",params:y},onError(P){b(P),w==null||w(P)},onResponse(P){if(P.error){b(P.error),w==null||w(P.error);return}if(typeof P.id=="number"){x(P);return}P.method==="eth_subscription"&&v(P.params)}}));return{subscriptionId:C,async unsubscribe(){return new Promise(x=>E.request({body:{method:"eth_unsubscribe",params:[C]},onResponse:x}))}}}})}}class hd extends Error{constructor(t,s){super(s),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t,this.details=s}}const He="/docs/contract/decodeDeployData";function md(e){const{abi:t,bytecode:s,data:a}=e;if(a===s)return{bytecode:s};const n=t.find(i=>"type"in i&&i.type==="constructor");if(!n)throw new ts({docsPath:He});if(!("inputs"in n))throw new ze({docsPath:He});if(!n.inputs||n.inputs.length===0)throw new ze({docsPath:He});return{args:Ye(n.inputs,`0x${a.replace(s,"")}`),bytecode:s}}function gd({r:e,yParityAndS:t}){const s=te(t),a=s[0]&128?1:0,n=s;return a===1&&(n[0]&=127),{r:e,s:U(n),yParity:a}}function bt(e){const{r:t,s}=ds.Signature.fromCompact(e.slice(2,130));return{r:p(t,{size:32}),yParityAndS:p(s,{size:32})}}async function pd(e){const{serializedTransaction:t,signature:s}=e,a=Ss(t),n=s??{r:a.r,s:a.s,v:a.v,yParity:a.yParity},r=hs({...a,r:void 0,s:void 0,v:void 0,yParity:void 0,sidecars:void 0});return await se({hash:X(r),signature:n})}function yd(e){const{r:t,s,v:a,yParity:n}=e,r=Number(n??a-27n);let i=s;if(r===1){const c=te(s);c[0]|=128,i=U(c)}return{r:t,yParityAndS:i}}function wt({r:e,yParityAndS:t}){return`0x${new ds.Signature(T(e),T(t)).toCompactHex()}`}function bd(e){const{sidecars:t,version:s}=e,a=e.to??(typeof t[0].blob=="string"?"hex":"bytes"),n=[];for(const{commitment:r}of t)n.push(ss({commitment:r,to:a,version:s}));return n}function wd(e){const t=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),s=typeof e.blobs[0]=="string"?e.blobs.map(c=>te(c)):e.blobs,a=s.reduce((c,o)=>c+o.length,0),n=De(new Uint8Array(a));let r=!0;for(const c of s){const o=De(c);for(;r&&o.position<c.length;){o.incrementPosition(1);let u=31;c.length-o.position<31&&(u=c.length-o.position);for(const l in Array.from({length:u})){const f=o.readByte();if(f===128&&!o.inspectBytes(o.remaining).includes(128)){r=!1;break}n.pushByte(f)}}}const i=n.bytes.slice(0,n.position);return t==="hex"?U(i):i}function As({blobToKzgCommitment:e,computeBlobKzgProof:t}){return{blobToKzgCommitment:e,computeBlobKzgProof:t}}function _d(e,t){try{e.loadTrustedSetup(t)}catch(s){const a=s;if(!a.message.includes("trusted setup is already loaded"))throw a}return As(e)}const xd=Object.freeze(Object.defineProperty({__proto__:null,AbiConstructorNotFoundError:ts,AbiConstructorParamsNotFoundError:ze,AbiDecodingDataSizeInvalidError:Zs,AbiDecodingDataSizeTooSmallError:ea,AbiDecodingZeroDataError:ta,AbiEncodingArrayLengthMismatchError:sa,AbiEncodingBytesSizeMismatchError:aa,AbiEncodingLengthMismatchError:na,AbiErrorInputsNotFoundError:ra,AbiErrorNotFoundError:oa,AbiErrorSignatureNotFoundError:ia,AbiEventNotFoundError:ca,AbiEventSignatureEmptyTopicsError:ua,AbiEventSignatureNotFoundError:da,AbiFunctionNotFoundError:la,AbiFunctionOutputsNotFoundError:fa,AbiFunctionSignatureNotFoundError:ha,AccountStateConflictError:ma,AtomicReadyWalletRejectedUpgradeError:ga,AtomicityNotSupportedError:pa,BaseError:Pe,BaseFeeScalarError:ya,BlockNotFoundError:ba,BundleTooLargeError:wa,BytesSizeMismatchError:_a,CallExecutionError:xa,ChainDisconnectedError:va,ChainDoesNotSupportContract:Ea,ChainMismatchError:Pa,ChainNotFoundError:Ta,CircularReferenceError:Sa,ClientChainNotConfiguredError:Ia,ContractFunctionExecutionError:Ca,ContractFunctionRevertedError:Aa,ContractFunctionZeroDataError:Ra,CounterfactualDeploymentFailedError:Ba,DecodeLogDataMismatch:La,DecodeLogTopicsMismatch:ka,DuplicateIdError:qa,EIP1193ProviderRpcError:hd,Eip1559FeesNotSupportedError:Ma,EnsAvatarInvalidNftUriError:rc,EnsAvatarUnsupportedNamespaceError:oc,EnsAvatarUriResolutionError:ic,EstimateGasExecutionError:Oa,ExecutionRevertedError:Fa,FeeCapTooHighError:Ee,FeeCapTooLowError:ja,FeeConflictError:Ha,FilterTypeNotSupportedError:cc,HttpRequestError:Na,InsufficientFundsError:Ua,IntegerOutOfRangeError:Da,InternalRpcError:Ga,IntrinsicGasTooHighError:za,IntrinsicGasTooLowError:Va,InvalidAbiDecodingTypeError:$a,InvalidAbiEncodingTypeError:Wa,InvalidAbiItemError:Ka,InvalidAbiParameterError:Ct,InvalidAbiParametersError:At,InvalidAbiTypeParameterError:Ja,InvalidAddressError:z,InvalidArrayError:Ya,InvalidBytesBooleanError:Qa,InvalidChainIdError:Z,InvalidDecimalNumberError:Xa,InvalidDefinitionTypeError:Za,InvalidDomainError:Ec,InvalidFunctionModifierError:en,InvalidHexBooleanError:tn,InvalidHexValueError:Ut,InvalidInputRpcError:sn,InvalidLegacyVError:Je,InvalidModifierError:an,InvalidParameterError:nn,InvalidParamsRpcError:rn,InvalidParenthesisError:on,InvalidPrimaryTypeError:Pc,InvalidRequestRpcError:cn,InvalidSerializableTransactionError:un,InvalidSerializedTransactionError:J,InvalidSerializedTransactionTypeError:Gt,InvalidSignatureError:dn,InvalidStorageKeySizeError:qt,InvalidStructSignatureError:ln,InvalidStructTypeError:Tc,JsonRpcVersionUnsupportedError:fn,LimitExceededRpcError:hn,MaxFeePerGasTooLowError:mn,MethodNotFoundRpcError:gn,MethodNotSupportedRpcError:pn,NonceMaxValueError:yn,NonceTooHighError:bn,NonceTooLowError:wn,ParseRpcError:_n,ProviderDisconnectedError:xn,ProviderRpcError:vn,RawContractError:En,ResourceNotFoundRpcError:Pn,ResourceUnavailableRpcError:Tn,RpcError:Sn,RpcRequestError:es,SizeExceedsPaddingSizeError:In,SizeOverflowError:Cn,SliceOffsetOutOfBoundsError:An,SocketClosedError:Q,SolidityProtectedKeywordError:Rn,StateAssignmentConflictError:Bn,SwitchChainError:Ln,TimeoutError:Lt,TipAboveFeeCapError:kt,TransactionExecutionError:kn,TransactionNotFoundError:qn,TransactionReceiptNotFoundError:Mn,TransactionRejectedRpcError:On,TransactionTypeNotSupportedError:Fn,UnauthorizedProviderError:jn,UnknownBundleIdError:Hn,UnknownNodeError:Nn,UnknownRpcError:Un,UnknownSignatureError:Dn,UnknownTypeError:Gn,UnsupportedChainIdError:zn,UnsupportedNonOptionalCapabilityError:Vn,UnsupportedPackedAbiType:$n,UnsupportedProviderMethodError:Wn,UrlRequiredError:Xt,UserRejectedRequestError:Kn,WaitForCallsStatusTimeoutError:uc,WaitForTransactionReceiptTimeoutError:Jn,WebSocketRequestError:Ue,assertCurrentChain:Qt,assertRequest:Jt,assertTransactionEIP1559:ae,assertTransactionEIP2930:tt,assertTransactionLegacy:st,blobsToCommitments:Ot,blobsToProofs:jt,boolToBytes:Yn,boolToHex:Qn,bytesToBigInt:Xn,bytesToBool:Zn,bytesToHex:U,bytesToNumber:er,bytesToRlp:tr,bytesToString:sr,ccipFetch:gt,ccipRequest:gt,checksumAddress:Kt,commitmentToVersionedHash:ss,commitmentsToVersionedHashes:Ft,compactSignatureToHex:wt,compactSignatureToSignature:gd,concat:Nt,concatBytes:ar,concatHex:ee,createClient:Ze,createNonceManager:dc,createPublicClient:lc,createTestClient:Qu,createTransport:Zt,createWalletClient:ld,custom:nr,decodeAbiParameters:Ye,decodeDeployData:md,decodeErrorResult:rr,decodeEventLog:or,decodeFunctionData:Lc,decodeFunctionResult:ir,defineBlock:cr,defineChain:ur,defineKzg:As,defineTransaction:dr,defineTransactionReceipt:lr,defineTransactionRequest:fr,deploylessCallViaBytecodeBytecode:hr,deploylessCallViaFactoryBytecode:mr,domainSeparator:Sc,encodeAbiParameters:gr,encodeDeployData:$t,encodeErrorResult:kc,encodeEventTopics:fc,encodeFunctionData:pr,encodeFunctionResult:qc,encodePacked:hc,erc1155Abi:yr,erc20Abi:br,erc20Abi_bytes32:wr,erc4626Abi:_r,erc721Abi:xr,ethAddress:mc,etherUnits:zt,extractChain:Dc,fallback:vr,formatBlock:Er,formatEther:Pr,formatGwei:Tr,formatLog:Sr,formatTransaction:Ir,formatTransactionReceipt:Cr,formatTransactionRequest:Xe,formatUnits:Ar,fromBlobs:wd,fromBytes:Rr,fromHex:Br,fromRlp:at,getAbiItem:Lr,getAddress:O,getChainContractAddress:kr,getContract:Uc,getContractAddress:Qc,getContractError:qr,getCreate2Address:gs,getCreateAddress:ms,getEventSelector:dt,getEventSignature:le,getFunctionSelector:lt,getFunctionSignature:le,getSerializedTransactionType:Ts,getTransactionType:Mt,getTypesForEIP712Domain:is,gweiUnits:Vt,hashDomain:Ic,hashMessage:rs,hashStruct:Cc,hashTypedData:os,hexToBigInt:T,hexToBool:Mr,hexToBytes:te,hexToCompactSignature:bt,hexToNumber:R,hexToRlp:Or,hexToSignature:ht,hexToString:Fr,http:jr,isAddress:G,isAddressEqual:Te,isBytes:Ve,isErc6492Signature:as,isHash:ys,isHex:_,keccak256:X,labelhash:gc,maxInt104:Hr,maxInt112:Nr,maxInt120:Ur,maxInt128:Dr,maxInt136:Gr,maxInt144:zr,maxInt152:Vr,maxInt16:$r,maxInt160:Wr,maxInt168:Kr,maxInt176:Jr,maxInt184:Yr,maxInt192:Qr,maxInt200:Xr,maxInt208:Zr,maxInt216:eo,maxInt224:to,maxInt232:so,maxInt24:ao,maxInt240:no,maxInt248:ro,maxInt256:oo,maxInt32:io,maxInt40:co,maxInt48:uo,maxInt56:lo,maxInt64:fo,maxInt72:ho,maxInt8:mo,maxInt80:go,maxInt88:po,maxInt96:yo,maxUint104:bo,maxUint112:wo,maxUint120:_o,maxUint128:xo,maxUint136:vo,maxUint144:Eo,maxUint152:Po,maxUint16:To,maxUint160:So,maxUint168:Io,maxUint176:Co,maxUint184:Ao,maxUint192:Ro,maxUint200:Bo,maxUint208:Lo,maxUint216:ko,maxUint224:qo,maxUint232:Mo,maxUint24:Oo,maxUint240:Fo,maxUint248:jo,maxUint256:ve,maxUint32:Ho,maxUint40:No,maxUint48:Uo,maxUint56:Do,maxUint64:Go,maxUint72:zo,maxUint8:Vo,maxUint80:$o,maxUint88:Wo,maxUint96:Ko,minInt104:Jo,minInt112:Yo,minInt120:Qo,minInt128:Xo,minInt136:Zo,minInt144:ei,minInt152:ti,minInt16:si,minInt160:ai,minInt168:ni,minInt176:ri,minInt184:oi,minInt192:ii,minInt200:ci,minInt208:ui,minInt216:di,minInt224:li,minInt232:fi,minInt24:hi,minInt240:mi,minInt248:gi,minInt256:pi,minInt32:yi,minInt40:bi,minInt48:wi,minInt56:_i,minInt64:xi,minInt72:vi,minInt8:Ei,minInt80:Pi,minInt88:Ti,minInt96:Si,multicall3Abi:Ii,namehash:pc,nonceManager:yc,numberToBytes:Ci,numberToHex:p,offchainLookup:Mc,offchainLookupAbiItem:Oc,offchainLookupSignature:Fc,pad:Ht,padBytes:Ai,padHex:Ge,parseAbi:Ri,parseAbiItem:bc,parseAbiParameter:Hc,parseAbiParameters:Nc,parseCompactSignature:bt,parseErc6492Signature:fu,parseEther:wu,parseEventLogs:Bi,parseGwei:_u,parseSignature:ht,parseTransaction:Ss,parseUnits:Qe,prepareEncodeFunctionData:Li,presignMessagePrefix:Ac,publicActions:wc,recoverAddress:se,recoverMessageAddress:Es,recoverPublicKey:ki,recoverTransactionAddress:pd,recoverTypedDataAddress:Ps,ripemd160:cu,rpcSchema:qi,rpcTransactionType:Mi,serializeAccessList:ne,serializeCompactSignature:wt,serializeErc6492Signature:_c,serializeSignature:mt,serializeTransaction:hs,serializeTypedData:us,setErrorConfig:Oi,setupKzg:_d,sha256:Fi,shouldThrow:ji,sidecarsToVersionedHashes:bd,signatureToCompactSignature:yd,signatureToHex:mt,size:$e,slice:We,sliceBytes:Hi,sliceHex:Dt,stringToBytes:Ni,stringToHex:Ui,stringify:Di,testActions:Is,toBlobSidecars:Ke,toBlobs:Gi,toBytes:H,toEventHash:ft,toEventSelector:dt,toEventSignature:le,toFunctionHash:ft,toFunctionSelector:lt,toFunctionSignature:le,toHex:_e,toPrefixedMessage:Rc,toRlp:N,transactionType:zi,trim:$,universalSignatureValidatorAbi:Vi,universalSignatureValidatorByteCode:$i,validateTypedData:cs,verifyHash:uu,verifyMessage:du,verifyTypedData:lu,walletActions:Cs,webSocket:fd,weiUnits:Wi,withCache:Ki,withRetry:Ji,withTimeout:Bt,zeroAddress:xc,zeroHash:vc},Symbol.toStringTag,{value:"Module"}));var nt={},Ae={},Rs={},xe={},Bs={},ie={},ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.getSDKVersion=void 0;const vd=()=>"9.1.0";ce.getSDKVersion=vd;var Re={};Object.defineProperty(Re,"__esModule",{value:!0});Re.generateRequestId=void 0;const Ed=e=>e.toString(16).padStart(2,"0"),Pd=e=>{const t=new Uint8Array(e/2);return window.crypto.getRandomValues(t),Array.from(t,Ed).join("")},Td=()=>typeof window<"u"?Pd(10):new Date().getTime().toString(36);Re.generateRequestId=Td;Object.defineProperty(ie,"__esModule",{value:!0});ie.MessageFormatter=void 0;const Sd=ce,Id=Re;class Be{}ie.MessageFormatter=Be;Be.makeRequest=(e,t)=>({id:(0,Id.generateRequestId)(),method:e,params:t,env:{sdkVersion:(0,Sd.getSDKVersion)()}});Be.makeResponse=(e,t,s)=>({id:e,success:!0,version:s,data:t});Be.makeErrorResponse=(e,t,s)=>({id:e,success:!1,error:t,version:s});var q={};Object.defineProperty(q,"__esModule",{value:!0});q.RestrictedMethods=q.Methods=void 0;var _t;(function(e){e.sendTransactions="sendTransactions",e.rpcCall="rpcCall",e.getChainInfo="getChainInfo",e.getSafeInfo="getSafeInfo",e.getTxBySafeTxHash="getTxBySafeTxHash",e.getSafeBalances="getSafeBalances",e.signMessage="signMessage",e.signTypedMessage="signTypedMessage",e.getEnvironmentInfo="getEnvironmentInfo",e.getOffChainSignature="getOffChainSignature",e.requestAddressBook="requestAddressBook",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions"})(_t||(q.Methods=_t={}));var xt;(function(e){e.requestAddressBook="requestAddressBook"})(xt||(q.RestrictedMethods=xt={}));(function(e){var t=I&&I.__createBinding||(Object.create?function(r,i,c,o){o===void 0&&(o=c);var u=Object.getOwnPropertyDescriptor(i,c);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[c]}}),Object.defineProperty(r,o,u)}:function(r,i,c,o){o===void 0&&(o=c),r[o]=i[c]}),s=I&&I.__exportStar||function(r,i){for(var c in r)c!=="default"&&!Object.prototype.hasOwnProperty.call(i,c)&&t(i,r,c)};Object.defineProperty(e,"__esModule",{value:!0});const a=ie;class n{constructor(i=null,c=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:o,data:u,source:l})=>{const f=!u,h=!this.isServer&&l===window.parent,d=typeof u.version<"u"&&parseInt(u.version.split(".")[0]),m=typeof d=="number"&&d>=1;let g=!0;return Array.isArray(this.allowedOrigins)&&(g=this.allowedOrigins.find(y=>y.test(o))!==void 0),!f&&h&&m&&g},this.logIncomingMessage=o=>{console.info(`Safe Apps SDK v1: A message was received from origin ${o.origin}. `,o.data)},this.onParentMessage=o=>{this.isValidMessage(o)&&(this.debugMode&&this.logIncomingMessage(o),this.handleIncomingMessage(o.data))},this.handleIncomingMessage=o=>{const{id:u}=o,l=this.callbacks.get(u);l&&(l(o),this.callbacks.delete(u))},this.send=(o,u)=>{const l=a.MessageFormatter.makeRequest(o,u);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(l,"*"),new Promise((f,h)=>{this.callbacks.set(l.id,d=>{if(!d.success){h(new Error(d.error));return}f(d)})})},this.allowedOrigins=i,this.debugMode=c,this.isServer||window.addEventListener("message",this.onParentMessage)}}e.default=n,s(q,e)})(Bs);var Le={},ke={},qe={};Object.defineProperty(qe,"__esModule",{value:!0});qe.isObjectEIP712TypedData=void 0;const Cd=e=>typeof e=="object"&&e!=null&&"domain"in e&&"types"in e&&"message"in e;qe.isObjectEIP712TypedData=Cd;var Ls={};Object.defineProperty(Ls,"__esModule",{value:!0});var ks={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TransferDirection=e.TransactionStatus=e.TokenType=e.Operation=void 0;var t=Ns;Object.defineProperty(e,"Operation",{enumerable:!0,get:function(){return t.Operation}}),Object.defineProperty(e,"TokenType",{enumerable:!0,get:function(){return t.TokenType}}),Object.defineProperty(e,"TransactionStatus",{enumerable:!0,get:function(){return t.TransactionStatus}}),Object.defineProperty(e,"TransferDirection",{enumerable:!0,get:function(){return t.TransferDirection}})})(ks);var qs={};Object.defineProperty(qs,"__esModule",{value:!0});(function(e){var t=I&&I.__createBinding||(Object.create?function(a,n,r,i){i===void 0&&(i=r);var c=Object.getOwnPropertyDescriptor(n,r);(!c||("get"in c?!n.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(a,i,c)}:function(a,n,r,i){i===void 0&&(i=r),a[i]=n[r]}),s=I&&I.__exportStar||function(a,n){for(var r in a)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,a,r)};Object.defineProperty(e,"__esModule",{value:!0}),s(qe,e),s(Ls,e),s(ks,e),s(qs,e)})(ke);Object.defineProperty(Le,"__esModule",{value:!0});Le.TXs=void 0;const me=q,Ad=ke;class Rd{constructor(t){this.communicator=t}async getBySafeTxHash(t){if(!t)throw new Error("Invalid safeTxHash");return(await this.communicator.send(me.Methods.getTxBySafeTxHash,{safeTxHash:t})).data}async signMessage(t){const s={message:t};return(await this.communicator.send(me.Methods.signMessage,s)).data}async signTypedMessage(t){if(!(0,Ad.isObjectEIP712TypedData)(t))throw new Error("Invalid typed data");return(await this.communicator.send(me.Methods.signTypedMessage,{typedData:t})).data}async send({txs:t,params:s}){if(!t||!t.length)throw new Error("No transactions were passed");const a={txs:t,params:s};return(await this.communicator.send(me.Methods.sendTransactions,a)).data}}Le.TXs=Rd;var Me={},Y={};Object.defineProperty(Y,"__esModule",{value:!0});Y.RPC_CALLS=void 0;Y.RPC_CALLS={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"};Object.defineProperty(Me,"__esModule",{value:!0});Me.Eth=void 0;const B=Y,Bd=q,M={defaultBlockParam:(e="latest")=>e,returnFullTxObjectParam:(e=!1)=>e,blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class Ld{constructor(t){this.communicator=t,this.call=this.buildRequest({call:B.RPC_CALLS.eth_call,formatters:[null,M.defaultBlockParam]}),this.getBalance=this.buildRequest({call:B.RPC_CALLS.eth_getBalance,formatters:[null,M.defaultBlockParam]}),this.getCode=this.buildRequest({call:B.RPC_CALLS.eth_getCode,formatters:[null,M.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:B.RPC_CALLS.eth_getStorageAt,formatters:[null,M.blockNumberToHex,M.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:B.RPC_CALLS.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:B.RPC_CALLS.eth_getBlockByHash,formatters:[null,M.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:B.RPC_CALLS.eth_getBlockByNumber,formatters:[M.blockNumberToHex,M.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:B.RPC_CALLS.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:B.RPC_CALLS.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:B.RPC_CALLS.eth_getTransactionCount,formatters:[null,M.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:B.RPC_CALLS.eth_gasPrice}),this.getEstimateGas=s=>this.buildRequest({call:B.RPC_CALLS.eth_estimateGas})([s]),this.setSafeSettings=this.buildRequest({call:B.RPC_CALLS.safe_setSettings})}buildRequest(t){const{call:s,formatters:a}=t;return async n=>{a&&Array.isArray(n)&&a.forEach((c,o)=>{c&&(n[o]=c(n[o]))});const r={call:s,params:n||[]};return(await this.communicator.send(Bd.Methods.rpcCall,r)).data}}}Me.Eth=Ld;var Oe={};const kd=js(xd);var W={};Object.defineProperty(W,"__esModule",{value:!0});W.MAGIC_VALUE_BYTES=W.MAGIC_VALUE=void 0;const qd="0x1626ba7e";W.MAGIC_VALUE=qd;const Md="0x20c13b0b";W.MAGIC_VALUE_BYTES=Md;var rt={},ue={},D={};Object.defineProperty(D,"__esModule",{value:!0});D.PermissionsError=D.PERMISSIONS_REQUEST_REJECTED=void 0;D.PERMISSIONS_REQUEST_REJECTED=4001;class ot extends Error{constructor(t,s,a){super(t),this.code=s,this.data=a,Object.setPrototypeOf(this,ot.prototype)}}D.PermissionsError=ot;Object.defineProperty(ue,"__esModule",{value:!0});ue.Wallet=void 0;const Ne=q,ge=D;class Od{constructor(t){this.communicator=t}async getPermissions(){return(await this.communicator.send(Ne.Methods.wallet_getPermissions,void 0)).data}async requestPermissions(t){if(!this.isPermissionRequestValid(t))throw new ge.PermissionsError("Permissions request is invalid",ge.PERMISSIONS_REQUEST_REJECTED);try{return(await this.communicator.send(Ne.Methods.wallet_requestPermissions,t)).data}catch{throw new ge.PermissionsError("Permissions rejected",ge.PERMISSIONS_REQUEST_REJECTED)}}isPermissionRequestValid(t){return t.every(s=>typeof s=="object"?Object.keys(s).every(a=>!!Object.values(Ne.RestrictedMethods).includes(a)):!1)}}ue.Wallet=Od;Object.defineProperty(rt,"__esModule",{value:!0});const Fd=ue,vt=D,Et=(e,t)=>t.some(s=>s.parentCapability===e),jd=()=>(e,t,s)=>{const a=s.value;return s.value=async function(){const n=new Fd.Wallet(this.communicator);let r=await n.getPermissions();if(Et(t,r)||(r=await n.requestPermissions([{[t]:{}}])),!Et(t,r))throw new vt.PermissionsError("Permissions rejected",vt.PERMISSIONS_REQUEST_REJECTED);return a.apply(this)},s};rt.default=jd;var Hd=I&&I.__decorate||function(e,t,s,a){var n=arguments.length,r=n<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,s):a,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,s,a);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r},Nd=I&&I.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.Safe=void 0;const pe=kd,Pt=W,F=q,Tt=Y,Ud=ke,Dd=Nd(rt);class Ms{constructor(t){this.communicator=t}async getChainInfo(){return(await this.communicator.send(F.Methods.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(F.Methods.getSafeInfo,void 0)).data}async experimental_getBalances({currency:t="usd"}={}){return(await this.communicator.send(F.Methods.getSafeBalances,{currency:t})).data}async check1271Signature(t,s="0x"){const a=await this.getInfo(),n=(0,pe.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,s]}),r={call:Tt.RPC_CALLS.eth_call,params:[{to:a.safeAddress,data:n},"latest"]};try{return(await this.communicator.send(F.Methods.rpcCall,r)).data.slice(0,10).toLowerCase()===Pt.MAGIC_VALUE}catch{return!1}}async check1271SignatureBytes(t,s="0x"){const a=await this.getInfo(),n=(0,pe.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,s]}),r={call:Tt.RPC_CALLS.eth_call,params:[{to:a.safeAddress,data:n},"latest"]};try{return(await this.communicator.send(F.Methods.rpcCall,r)).data.slice(0,10).toLowerCase()===Pt.MAGIC_VALUE_BYTES}catch{return!1}}calculateMessageHash(t){return(0,pe.hashMessage)(t)}calculateTypedMessageHash(t){const s=typeof t.domain.chainId=="object"?t.domain.chainId.toNumber():Number(t.domain.chainId);let a=t.primaryType;if(!a){const n=Object.values(t.types),r=Object.keys(t.types).filter(i=>n.every(c=>c.every(({type:o})=>o.replace("[","").replace("]","")!==i)));if(r.length===0||r.length>1)throw new Error("Please specify primaryType");a=r[0]}return(0,pe.hashTypedData)({message:t.message,domain:{...t.domain,chainId:s,verifyingContract:t.domain.verifyingContract,salt:t.domain.salt},types:t.types,primaryType:a})}async getOffChainSignature(t){return(await this.communicator.send(F.Methods.getOffChainSignature,t)).data}async isMessageSigned(t,s="0x"){let a;if(typeof t=="string"&&(a=async()=>{const n=this.calculateMessageHash(t);return await this.isMessageHashSigned(n,s)}),(0,Ud.isObjectEIP712TypedData)(t)&&(a=async()=>{const n=this.calculateTypedMessageHash(t);return await this.isMessageHashSigned(n,s)}),a)return await a();throw new Error("Invalid message type")}async isMessageHashSigned(t,s="0x"){const a=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const n of a)if(await n(t,s))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(F.Methods.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(F.Methods.requestAddressBook,void 0)).data}}Oe.Safe=Ms;Hd([(0,Dd.default)()],Ms.prototype,"requestAddressBook",null);var Gd=I&&I.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xe,"__esModule",{value:!0});const zd=Gd(Bs),Vd=Le,$d=Me,Wd=Oe,Kd=ue;class Jd{constructor(t={}){const{allowedDomains:s=null,debug:a=!1}=t;this.communicator=new zd.default(s,a),this.eth=new $d.Eth(this.communicator),this.txs=new Vd.TXs(this.communicator),this.safe=new Wd.Safe(this.communicator),this.wallet=new Kd.Wallet(this.communicator)}}xe.default=Jd;(function(e){var t=I&&I.__createBinding||(Object.create?function(i,c,o,u){u===void 0&&(u=o);var l=Object.getOwnPropertyDescriptor(c,o);(!l||("get"in l?!c.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return c[o]}}),Object.defineProperty(i,u,l)}:function(i,c,o,u){u===void 0&&(u=o),i[u]=c[o]}),s=I&&I.__exportStar||function(i,c){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(c,o)&&t(c,i,o)},a=I&&I.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e,"__esModule",{value:!0}),e.getSDKVersion=void 0;const n=a(xe);e.default=n.default,s(xe,e),s(ke,e),s(q,e),s(ie,e);var r=ce;Object.defineProperty(e,"getSDKVersion",{enumerable:!0,get:function(){return r.getSDKVersion}}),s(Y,e)})(Rs);var K={};Object.defineProperty(K,"__esModule",{value:!0});K.numberToHex=K.getLowerCase=void 0;function Yd(e){return e&&e.toLowerCase()}K.getLowerCase=Yd;function Qd(e){return`0x${e.toString(16)}`}K.numberToHex=Qd;Object.defineProperty(Ae,"__esModule",{value:!0});Ae.SafeAppProvider=void 0;const V=Rs,Xd=Yi,k=K;class Zd extends Xd.EventEmitter{constructor(t,s){super(),this.submittedTxs=new Map,this.safe=t,this.sdk=s}async connect(){this.emit("connect",{chainId:this.chainId})}async disconnect(){}get chainId(){return this.safe.chainId}async request(t){var n,r,i,c;const{method:s,params:a=[]}=t;switch(s){case"eth_accounts":return[this.safe.safeAddress];case"net_version":case"eth_chainId":return(0,k.numberToHex)(this.chainId);case"personal_sign":{const[h,d]=a;if(this.safe.safeAddress.toLowerCase()!==d.toLowerCase())throw new Error("The address or message hash is invalid");const m=await this.sdk.txs.signMessage(h);return("signature"in m?m.signature:void 0)||"0x"}case"eth_sign":{const[h,d]=a;if(this.safe.safeAddress.toLowerCase()!==h.toLowerCase()||!d.startsWith("0x"))throw new Error("The address or message hash is invalid");const m=await this.sdk.txs.signMessage(d);return("signature"in m?m.signature:void 0)||"0x"}case"eth_signTypedData":case"eth_signTypedData_v4":{const[h,d]=a,m=typeof d=="string"?JSON.parse(d):d;if(this.safe.safeAddress.toLowerCase()!==h.toLowerCase())throw new Error("The address is invalid");const g=await this.sdk.txs.signTypedMessage(m);return("signature"in g?g.signature:void 0)||"0x"}case"eth_sendTransaction":const o={...a[0],value:a[0].value||"0",data:a[0].data||"0x"};typeof o.gas=="string"&&o.gas.startsWith("0x")&&(o.gas=parseInt(o.gas,16));const u=await this.sdk.txs.send({txs:[o],params:{safeTxGas:o.gas}});return this.submittedTxs.set(u.safeTxHash,{from:this.safe.safeAddress,hash:u.safeTxHash,gas:0,gasPrice:"0x00",nonce:0,input:o.data,value:o.value,to:o.to,blockHash:null,blockNumber:null,transactionIndex:null}),u.safeTxHash;case"eth_blockNumber":return(await this.sdk.eth.getBlockByNumber(["latest"])).number;case"eth_getBalance":return this.sdk.eth.getBalance([(0,k.getLowerCase)(a[0]),a[1]]);case"eth_getCode":return this.sdk.eth.getCode([(0,k.getLowerCase)(a[0]),a[1]]);case"eth_getTransactionCount":return this.sdk.eth.getTransactionCount([(0,k.getLowerCase)(a[0]),a[1]]);case"eth_getStorageAt":return this.sdk.eth.getStorageAt([(0,k.getLowerCase)(a[0]),a[1],a[2]]);case"eth_getBlockByNumber":return this.sdk.eth.getBlockByNumber([a[0],a[1]]);case"eth_getBlockByHash":return this.sdk.eth.getBlockByHash([a[0],a[1]]);case"eth_getTransactionByHash":let f=a[0];try{f=(await this.sdk.txs.getBySafeTxHash(f)).txHash||f}catch{}return this.submittedTxs.has(f)?this.submittedTxs.get(f):this.sdk.eth.getTransactionByHash([f]).then(h=>(h&&(h.hash=a[0]),h));case"eth_getTransactionReceipt":{let h=a[0];try{h=(await this.sdk.txs.getBySafeTxHash(h)).txHash||h}catch{}return this.sdk.eth.getTransactionReceipt([h]).then(d=>(d&&(d.transactionHash=a[0]),d))}case"eth_estimateGas":return this.sdk.eth.getEstimateGas(a[0]);case"eth_call":return this.sdk.eth.call([a[0],a[1]]);case"eth_getLogs":return this.sdk.eth.getPastLogs([a[0]]);case"eth_gasPrice":return this.sdk.eth.getGasPrice();case"wallet_getPermissions":return this.sdk.wallet.getPermissions();case"wallet_requestPermissions":return this.sdk.wallet.requestPermissions(a[0]);case"safe_setSettings":return this.sdk.eth.setSafeSettings([a[0]]);case"wallet_sendCalls":{const{from:h,calls:d,chainId:m}=a[0];if(m!==(0,k.numberToHex)(this.chainId))throw new Error(`Safe is not on chain ${m}`);if(h!==this.safe.safeAddress)throw Error("Invalid from address");const g=d.map((w,E)=>{if(!w.to)throw new Error(`Invalid call #${E}: missing "to" field`);return{to:w.to,data:w.data??"0x",value:w.value??(0,k.numberToHex)(0)}}),{safeTxHash:y}=await this.sdk.txs.send({txs:g});return{id:y}}case"wallet_getCallsStatus":{const h=a[0],d={[V.TransactionStatus.AWAITING_CONFIRMATIONS]:100,[V.TransactionStatus.AWAITING_EXECUTION]:100,[V.TransactionStatus.SUCCESS]:200,[V.TransactionStatus.CANCELLED]:400,[V.TransactionStatus.FAILED]:500},m=await this.sdk.txs.getBySafeTxHash(h),g={version:"1.0",id:h,chainId:(0,k.numberToHex)(this.chainId),status:d[m.txStatus]};if(!m.txHash)return g;const y=await this.sdk.eth.getTransactionReceipt([m.txHash]);if(!y)return g;const v=((r=(n=m.txData)==null?void 0:n.dataDecoded)==null?void 0:r.method)!=="multiSend"?1:((c=(i=m.txData.dataDecoded.parameters)==null?void 0:i[0].valueDecoded)==null?void 0:c.length)??1,w=Number(y.blockNumber),E=Number(y.gasUsed);return g.receipts=Array(v).fill({logs:y.logs,status:(0,k.numberToHex)(m.txStatus===V.TransactionStatus.SUCCESS?1:0),blockHash:y.blockHash,blockNumber:(0,k.numberToHex)(w),gasUsed:(0,k.numberToHex)(E),transactionHash:m.txHash}),g}case"wallet_showCallsStatus":throw new Error(`"${t.method}" not supported`);case"wallet_getCapabilities":return{[(0,k.numberToHex)(this.chainId)]:{atomicBatch:{supported:!0}}};default:throw Error(`"${t.method}" not implemented`)}}send(t,s){t||s("Undefined request"),this.request(t).then(a=>s(null,{jsonrpc:"2.0",id:t.id,result:a})).catch(a=>s(a,null))}}Ae.SafeAppProvider=Zd;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeAppProvider=void 0;var t=Ae;Object.defineProperty(e,"SafeAppProvider",{enumerable:!0,get:function(){return t.SafeAppProvider}})})(nt);const el=Hs(nt),dl=jc({__proto__:null,default:el},[nt]);export{dl as i};

import{o as B,q as C,L as F,i as l,m as y,e as O,B as N,R as x,v as g,w as U,P as z,x as M,k as D,y as Y,z as $,A as G,C as L,D as H,E as V,F as Z}from"./runtime.CRsO_40P.js";import{p as j}from"./proxy.C9vbjBtw.js";import{c as J}from"./store.CnUvYsYX.js";function T(a){for(var r=L,t=L;r!==null&&!(r.f&(N|x));)r=r.parent;try{return g(r),a()}finally{g(t)}}function X(a,r,t,v){var A;var I=(t&H)!==0,d=!U||(t&z)!==0,R=(t&M)!==0,q=(t&V)!==0,S=!1,u;R?[u,S]=J(()=>a[r]):u=a[r];var s=(A=B(a,r))==null?void 0:A.set,n=v,c=!0,o=!1,p=()=>(o=!0,c&&(c=!1,q?n=O(v):n=v),n);u===void 0&&v!==void 0&&(s&&d&&C(),u=p(),s&&s(u));var f;if(d)f=()=>{var e=a[r];return e===void 0?p():(c=!0,o=!1,e)};else{var b=T(()=>(I?D:Y)(()=>a[r]));b.f|=F,f=()=>{var e=l(b);return e!==void 0&&(n=void 0),e===void 0?n:e}}if(!(t&$))return f;if(s){var w=a.$$legacy;return function(e,i){return arguments.length>0?((!d||!i||w||S)&&s(i?f():e),e):f()}}var m=!1,h=!1,P=Z(u),_=T(()=>D(()=>{var e=f(),i=l(P);return m?(m=!1,h=!0,i):(h=!1,P.v=e)}));return I||(_.equals=G),function(e,i){if(arguments.length>0){const E=i?l(_):d&&R?j(e):e;return _.equals(E)||(m=!0,y(P,E),o&&n!==void 0&&(n=E),O(()=>l(_))),e}return l(_)}}export{X as p};

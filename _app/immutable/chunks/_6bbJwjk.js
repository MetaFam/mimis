var RT=Object.defineProperty;var xy=e=>{throw TypeError(e)};var jT=(e,r,t)=>r in e?RT(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var m=(e,r,t)=>jT(e,typeof r!="symbol"?r+"":r,t),By=(e,r,t)=>r.has(e)||xy("Cannot "+t);var ir=(e,r,t)=>(By(e,r,"read from private field"),t?t.call(e):r.get(e)),xi=(e,r,t)=>r.has(e)?xy("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,t),Bi=(e,r,t,n)=>(By(e,r,"write to private field"),n?n.call(e,t):r.set(e,t),t);import{c as f,g as bl}from"./BosuxZz1.js";import{b as B0,r as $T}from"./B5yx_Guq.js";import{r as NT,y as kT,j as MT}from"./DquymGsT.js";import{F as V0,a as Uh,v as DT,b as LT,c as UT,p as FT,w as xT,m as Vy,d as Vi,e as ar,f as Fh,n as Wy,g as BT,h as zy,i as sr,j as Wt,k as VT,s as Mc}from"./D2jI5Alk.js";import{s as Tc}from"./BS9QdChZ.js";var W0={},hr={},G={},le={},Lt={},pr={};Object.defineProperty(pr,"__esModule",{value:!0});pr.getBrokenObjectReason=pr.isBrokenObject=pr.createBrokenObject=void 0;var z0="__isBrokenObject__",q0="__reason__";function WT(e,r){r===void 0&&(r={});var t=function(){throw e};return new Proxy(r,{get:function(n,o){if(o===z0)return!0;if(o===q0)return e;if(o==="toJSON")return;t()},set:t,apply:t,construct:t,defineProperty:t,deleteProperty:t,getOwnPropertyDescriptor:t,getPrototypeOf:t,has:t,isExtensible:t,ownKeys:t,preventExtensions:t,setPrototypeOf:t})}pr.createBrokenObject=WT;function zT(e){return e!==null&&typeof e=="object"&&e[z0]===!0}pr.isBrokenObject=zT;function qT(e){return e[q0]}pr.getBrokenObjectReason=qT;Object.defineProperty(Lt,"__esModule",{value:!0});Lt.stringify=void 0;var qy=pr;function HT(e,r){return JSON.stringify(e,function(t,n){return(0,qy.isBrokenObject)(n)?{__isBrokenObject__:!0,__reason__:(0,qy.getBrokenObjectReason)(n)}:typeof n=="bigint"?"".concat(n,"n"):(r==null?void 0:r.sortedElements)===!0&&typeof n=="object"&&!Array.isArray(n)?Object.keys(n).sort().reduce(function(o,i){return o[i]=n[i],o},{}):(r==null?void 0:r.useCustomToString)===!0&&typeof n=="object"&&!Array.isArray(n)&&typeof n.toString=="function"&&n.toString!==Object.prototype.toString?n==null?void 0:n.toString():n})}Lt.stringify=HT;var Kv={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.rawPolyfilledDiagnosticRecord=void 0,e.rawPolyfilledDiagnosticRecord={OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"},Object.freeze(e.rawPolyfilledDiagnosticRecord)})(Kv);var H0=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),GT=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),KT=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),YT=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&GT(r,e,t);return KT(r,e),r};Object.defineProperty(le,"__esModule",{value:!0});le.PROTOCOL_ERROR=le.SESSION_EXPIRED=le.SERVICE_UNAVAILABLE=le.GQLError=le.Neo4jError=le.isRetriableError=le.newGQLError=le.newError=void 0;var ZT=YT(Lt),G0=Kv,K0={DATABASE_ERROR:"DATABASE_ERROR",CLIENT_ERROR:"CLIENT_ERROR",TRANSIENT_ERROR:"TRANSIENT_ERROR",UNKNOWN:"UNKNOWN"};Object.freeze(K0);var QT=Object.values(K0),Y0="ServiceUnavailable";le.SERVICE_UNAVAILABLE=Y0;var Z0="SessionExpired";le.SESSION_EXPIRED=Z0;var XT="ProtocolError";le.PROTOCOL_ERROR=XT;var JT="N/A",Yv=function(e){H0(r,e);function r(t,n,o,i,a){var s=this,c;return s=e.call(this,t,a!=null?{cause:a}:void 0)||this,s.constructor=r,s.__proto__=r.prototype,s.cause=a??void 0,s.gqlStatus=n,s.gqlStatusDescription=o,s.diagnosticRecord=i,s.classification=aC(s.diagnosticRecord),s.rawClassification=(c=i==null?void 0:i._classification)!==null&&c!==void 0?c:void 0,s.name="GQLError",s}return Object.defineProperty(r.prototype,"diagnosticRecordAsJsonString",{get:function(){return ZT.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),r}(Error);le.GQLError=Yv;var Zv=function(e){H0(r,e);function r(t,n,o,i,a,s){var c=e.call(this,t,o,i,a,s)||this;return c.constructor=r,c.__proto__=r.prototype,c.code=n,c.name="Neo4jError",c.retriable=nC(n),c}return r.isRetriable=function(t){return t!=null&&t instanceof r&&t.retriable},r}(Yv);le.Neo4jError=Zv;function eC(e,r,t,n,o,i){return new Zv(e,r??JT,n??"50N42",o??"error: general processing exception - unexpected error. "+e,i??G0.rawPolyfilledDiagnosticRecord,t)}le.newError=eC;function tC(e,r,t,n,o){return new Yv(e,t??"50N42",n??"error: general processing exception - unexpected error. "+e,o??G0.rawPolyfilledDiagnosticRecord,r)}le.newGQLError=tC;var rC=Zv.isRetriable;le.isRetriableError=rC;function nC(e){return e===Y0||e===Z0||iC(e)||oC(e)}function oC(e){return(e==null?void 0:e.includes("TransientError"))===!0}function iC(e){return e==="Neo.ClientError.Security.AuthorizationExpired"}function aC(e){return e===void 0||e._classification===void 0?"UNKNOWN":QT.includes(e._classification)?e==null?void 0:e._classification:"UNKNOWN"}var xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.toString=xe.toNumber=xe.inSafeRange=xe.isInt=xe.int=void 0;var Wi=le,Hy=new Map,Jr=function(){function e(r,t){this.low=r??0,this.high=t??0}return e.prototype.inSafeRange=function(){return this.greaterThanOrEqual(e.MIN_SAFE_VALUE)&&this.lessThanOrEqual(e.MAX_SAFE_VALUE)},e.prototype.toInt=function(){return this.low},e.prototype.toNumber=function(){return this.high*In+(this.low>>>0)},e.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(In)+BigInt(this.low>>>0);var r=this.negate();return BigInt(-1)*(BigInt(r.high>>>0)*BigInt(In)+BigInt(r.low>>>0))},e.prototype.toNumberOrInfinity=function(){return this.lessThan(e.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(e.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},e.prototype.toString=function(r){if(r=r??10,r<2||r>36)throw RangeError("radix out of range: "+r.toString());if(this.isZero())return"0";var t;if(this.isNegative())if(this.equals(e.MIN_VALUE)){var n=e.fromNumber(r),o=this.div(n);return t=o.multiply(n).subtract(this),o.toString(r)+t.toInt().toString(r)}else return"-"+this.negate().toString(r);var i=e.fromNumber(Math.pow(r,6));t=this;for(var a="";;){var s=t.div(i),c=t.subtract(s.multiply(i)).toInt()>>>0,u=c.toString(r);if(t=s,t.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},e.prototype.valueOf=function(){return this.toBigInt()},e.prototype.getHighBits=function(){return this.high},e.prototype.getLowBits=function(){return this.low},e.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(e.MIN_VALUE)?64:this.negate().getNumBitsAbs();var r=this.high!==0?this.high:this.low,t=0;for(t=31;t>0&&!(r&1<<t);t--);return this.high!==0?t+33:t+1},e.prototype.isZero=function(){return this.high===0&&this.low===0},e.prototype.isNegative=function(){return this.high<0},e.prototype.isPositive=function(){return this.high>=0},e.prototype.isOdd=function(){return(this.low&1)===1},e.prototype.isEven=function(){return(this.low&1)===0},e.prototype.equals=function(r){var t=e.fromValue(r);return this.high===t.high&&this.low===t.low},e.prototype.notEquals=function(r){return!this.equals(r)},e.prototype.lessThan=function(r){return this.compare(r)<0},e.prototype.lessThanOrEqual=function(r){return this.compare(r)<=0},e.prototype.greaterThan=function(r){return this.compare(r)>0},e.prototype.greaterThanOrEqual=function(r){return this.compare(r)>=0},e.prototype.compare=function(r){var t=e.fromValue(r);if(this.equals(t))return 0;var n=this.isNegative(),o=t.isNegative();return n&&!o?-1:!n&&o?1:this.subtract(t).isNegative()?-1:1},e.prototype.negate=function(){return this.equals(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.add=function(r){var t=e.fromValue(r),n=this.high>>>16,o=this.high&65535,i=this.low>>>16,a=this.low&65535,s=t.high>>>16,c=t.high&65535,u=t.low>>>16,l=t.low&65535,d=0,h=0,p=0,v=0;return v+=a+l,p+=v>>>16,v&=65535,p+=i+u,h+=p>>>16,p&=65535,h+=o+c,d+=h>>>16,h&=65535,d+=n+s,d&=65535,e.fromBits(p<<16|v,d<<16|h)},e.prototype.subtract=function(r){var t=e.fromValue(r);return this.add(t.negate())},e.prototype.multiply=function(r){if(this.isZero())return e.ZERO;var t=e.fromValue(r);if(t.isZero())return e.ZERO;if(this.equals(e.MIN_VALUE))return t.isOdd()?e.MIN_VALUE:e.ZERO;if(t.equals(e.MIN_VALUE))return this.isOdd()?e.MIN_VALUE:e.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(Yy)&&t.lessThan(Yy))return e.fromNumber(this.toNumber()*t.toNumber());var n=this.high>>>16,o=this.high&65535,i=this.low>>>16,a=this.low&65535,s=t.high>>>16,c=t.high&65535,u=t.low>>>16,l=t.low&65535,d=0,h=0,p=0,v=0;return v+=a*l,p+=v>>>16,v&=65535,p+=i*l,h+=p>>>16,p&=65535,p+=a*u,h+=p>>>16,p&=65535,h+=o*l,d+=h>>>16,h&=65535,h+=i*u,d+=h>>>16,h&=65535,h+=a*c,d+=h>>>16,h&=65535,d+=n*l+o*u+i*c+a*s,d&=65535,e.fromBits(p<<16|v,d<<16|h)},e.prototype.div=function(r){var t=e.fromValue(r);if(t.isZero())throw(0,Wi.newError)("division by zero");if(this.isZero())return e.ZERO;var n,o,i;if(this.equals(e.MIN_VALUE)){if(t.equals(e.ONE)||t.equals(e.NEG_ONE))return e.MIN_VALUE;if(t.equals(e.MIN_VALUE))return e.ONE;var a=this.shiftRight(1);return n=a.div(t).shiftLeft(1),n.equals(e.ZERO)?t.isNegative()?e.ONE:e.NEG_ONE:(o=this.subtract(t.multiply(n)),i=n.add(o.div(t)),i)}else if(t.equals(e.MIN_VALUE))return e.ZERO;if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();for(i=e.ZERO,o=this;o.greaterThanOrEqual(t);){n=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),c=s<=48?1:Math.pow(2,s-48),u=e.fromNumber(n),l=u.multiply(t);l.isNegative()||l.greaterThan(o);)n-=c,u=e.fromNumber(n),l=u.multiply(t);u.isZero()&&(u=e.ONE),i=i.add(u),o=o.subtract(l)}return i},e.prototype.modulo=function(r){var t=e.fromValue(r);return this.subtract(this.div(t).multiply(t))},e.prototype.not=function(){return e.fromBits(~this.low,~this.high)},e.prototype.and=function(r){var t=e.fromValue(r);return e.fromBits(this.low&t.low,this.high&t.high)},e.prototype.or=function(r){var t=e.fromValue(r);return e.fromBits(this.low|t.low,this.high|t.high)},e.prototype.xor=function(r){var t=e.fromValue(r);return e.fromBits(this.low^t.low,this.high^t.high)},e.prototype.shiftLeft=function(r){var t=e.toNumber(r);return(t&=63)===0?e.ZERO:t<32?e.fromBits(this.low<<t,this.high<<t|this.low>>>32-t):e.fromBits(0,this.low<<t-32)},e.prototype.shiftRight=function(r){var t=e.toNumber(r),n=e.toNumber(r);return(t&=63)===0?e.ZERO:n<32?e.fromBits(this.low>>>t|this.high<<32-t,this.high>>t):e.fromBits(this.high>>t-32,this.high>=0?0:-1)},e.isInteger=function(r){return(r==null?void 0:r.__isInteger__)===!0},e.fromInt=function(r){var t;if(r=r|0,r>=-128&&r<128&&(t=Hy.get(r),t!=null))return t;var n=new e(r,r<0?-1:0);return r>=-128&&r<128&&Hy.set(r,n),n},e.fromBits=function(r,t){return new e(r,t)},e.fromNumber=function(r){return isNaN(r)||!isFinite(r)?e.ZERO:r<=-Ky?e.MIN_VALUE:r+1>=Ky?e.MAX_VALUE:r<0?e.fromNumber(-r).negate():new e(r%In|0,r/In|0)},e.fromString=function(r,t,n){var o=n===void 0?{}:n,i=o.strictStringValidation;if(r.length===0)throw(0,Wi.newError)("number format error: empty string");if(r==="NaN"||r==="Infinity"||r==="+Infinity"||r==="-Infinity")return e.ZERO;if(t=t??10,t<2||t>36)throw(0,Wi.newError)("radix out of range: "+t.toString());var a;if((a=r.indexOf("-"))>0)throw(0,Wi.newError)('number format error: interior "-" character: '+r);if(a===0)return e.fromString(r.substring(1),t).negate();for(var s=e.fromNumber(Math.pow(t,8)),c=e.ZERO,u=0;u<r.length;u+=8){var l=Math.min(8,r.length-u),d=r.substring(u,u+l),h=parseInt(d,t);if(i===!0&&!sC(d,h,t))throw(0,Wi.newError)('number format error: "'.concat(d,'" is NaN in radix ').concat(t,": ").concat(r));if(l<8){var p=e.fromNumber(Math.pow(t,l));c=c.multiply(p).add(e.fromNumber(h))}else c=c.multiply(s),c=c.add(e.fromNumber(h))}return c},e.fromValue=function(r,t){return t===void 0&&(t={}),r instanceof e?r:typeof r=="number"?(t.ceilFloat===!0&&(r=Math.ceil(r)),e.fromNumber(r)):typeof r=="string"?e.fromString(r,void 0,t):typeof r=="bigint"?e.fromString(r.toString()):new e(r.low,r.high)},e.toNumber=function(r){switch(typeof r){case"number":return r;case"bigint":return Number(r);default:return e.fromValue(r).toNumber()}},e.toString=function(r,t){return e.fromValue(r).toString(t)},e.inSafeRange=function(r){return e.fromValue(r).inSafeRange()},e.ZERO=e.fromInt(0),e.ONE=e.fromInt(1),e.NEG_ONE=e.fromInt(-1),e.MAX_VALUE=e.fromBits(-1,2147483647),e.MIN_VALUE=e.fromBits(0,-2147483648),e.MIN_SAFE_VALUE=e.fromBits(1,-2097152),e.MAX_SAFE_VALUE=e.fromBits(-1,2097151),e.__isInteger__=!0,e}();function uC(e,r,t){var n=e.toString(r),o=Math.max(t-n.length,0),i="0".repeat(o);return"".concat(i).concat(n)}function sC(e,r,t){return!Number.isNaN(e)&&!Number.isNaN(r)&&uC(r,t,e.length)===e.toLowerCase()}Object.defineProperty(Jr.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var Gy=65536,cC=1<<24,In=Gy*Gy,lC=In*In,Ky=lC/2,Yy=Jr.fromInt(cC),fC=Jr.fromValue;xe.int=fC;var dC=Jr.isInteger;xe.isInt=dC;var hC=Jr.inSafeRange;xe.inSafeRange=hC;var pC=Jr.toNumber;xe.toNumber=pC;var vC=Jr.toString;xe.toString=vC;xe.default=Jr;var ge={},Qv={},re={},_C=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),yC=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),bC=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&_C(r,e,t);return yC(r,e),r},mC=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(re,"__esModule",{value:!0});re.ENCRYPTION_OFF=re.ENCRYPTION_ON=re.equals=re.validateQueryAndParameters=re.toNumber=re.assertValidDate=re.assertNumberOrInteger=re.assertNumber=re.assertString=re.assertObject=re.isString=re.isObject=re.isEmptyObjectOrNull=void 0;var Bp=bC(xe),Ln=Lt,gC="ENCRYPTION_ON";re.ENCRYPTION_ON=gC;var wC="ENCRYPTION_OFF";re.ENCRYPTION_OFF=wC;function OC(e){if(e===null)return!0;if(!ml(e))return!1;for(var r in e)if(e[r]!==void 0)return!1;return!0}re.isEmptyObjectOrNull=OC;function ml(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}re.isObject=ml;function EC(e,r,t){var n,o,i="",a=r??{},s=(n=t==null?void 0:t.skipAsserts)!==null&&n!==void 0?n:!1;return typeof e=="string"?i=e:e instanceof String?i=e.toString():typeof e=="object"&&e.text!=null&&(i=e.text,a=(o=e.parameters)!==null&&o!==void 0?o:{}),s||(AC(i),IC(a)),{validatedQuery:i,params:a}}re.validateQueryAndParameters=EC;function SC(e,r){if(!ml(e))throw new TypeError(r+" expected to be an object but was: "+(0,Ln.stringify)(e));return e}re.assertObject=SC;function Q0(e,r){if(!X0(e))throw new TypeError((0,Ln.stringify)(r)+" expected to be string but was: "+(0,Ln.stringify)(e));return e}re.assertString=Q0;function PC(e,r){if(typeof e!="number")throw new TypeError(r+" expected to be a number but was: "+(0,Ln.stringify)(e));return e}re.assertNumber=PC;function TC(e,r){if(typeof e!="number"&&typeof e!="bigint"&&!(0,Bp.isInt)(e))throw new TypeError(r+" expected to be either a number or an Integer object but was: "+(0,Ln.stringify)(e));return e}re.assertNumberOrInteger=TC;function CC(e,r){if(Object.prototype.toString.call(e)!=="[object Date]")throw new TypeError(r+" expected to be a standard JavaScript Date but was: "+(0,Ln.stringify)(e));if(Number.isNaN(e.getTime()))throw new TypeError(r+" expected to be valid JavaScript Date but its time was NaN: "+(0,Ln.stringify)(e));return e}re.assertValidDate=CC;function AC(e){if(Q0(e,"Cypher query"),e.trim().length===0)throw new TypeError("Cypher query is expected to be a non-empty string.")}function IC(e){if(!ml(e)){var r=e.constructor!=null?" "+e.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(r," ").concat(JSON.stringify(e)))}}function X0(e){return Object.prototype.toString.call(e)==="[object String]"}re.isString=X0;function J0(e,r){var t,n;if(e===r)return!0;if(e===null||r===null)return!1;if(typeof e=="object"&&typeof r=="object"){var o=Object.keys(e),i=Object.keys(r);if(o.length!==i.length)return!1;try{for(var a=mC(o),s=a.next();!s.done;s=a.next()){var c=s.value;if(!J0(e[c],r[c]))return!1}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0}return!1}re.equals=J0;function RC(e){return e instanceof Bp.default?e.toNumber():typeof e=="bigint"?(0,Bp.int)(e).toNumber():e}re.toNumber=RC;(function(e){var r=f&&f.__createBinding||(Object.create?function(y,T,M,x){x===void 0&&(x=M);var K=Object.getOwnPropertyDescriptor(T,M);(!K||("get"in K?!T.__esModule:K.writable||K.configurable))&&(K={enumerable:!0,get:function(){return T[M]}}),Object.defineProperty(y,x,K)}:function(y,T,M,x){x===void 0&&(x=M),y[x]=T[M]}),t=f&&f.__setModuleDefault||(Object.create?function(y,T){Object.defineProperty(y,"default",{enumerable:!0,value:T})}:function(y,T){y.default=T}),n=f&&f.__importStar||function(y){if(y&&y.__esModule)return y;var T={};if(y!=null)for(var M in y)M!=="default"&&Object.prototype.hasOwnProperty.call(y,M)&&r(T,y,M);return t(T,y),T};Object.defineProperty(e,"__esModule",{value:!0}),e.floorMod=e.floorDiv=e.assertValidZoneId=e.assertValidNanosecond=e.assertValidSecond=e.assertValidMinute=e.assertValidHour=e.assertValidDay=e.assertValidMonth=e.assertValidYear=e.timeZoneOffsetInSeconds=e.totalNanoseconds=e.newDate=e.toStandardDate=e.isoStringToStandardDate=e.dateToIsoString=e.timeZoneOffsetToIsoString=e.timeToIsoString=e.durationToIsoString=e.dateToEpochDay=e.localDateTimeToEpochSecond=e.localTimeToNanoOfDay=e.normalizeNanosecondsForDuration=e.normalizeSecondsForDuration=e.SECONDS_PER_DAY=e.DAYS_PER_400_YEAR_CYCLE=e.DAYS_0000_TO_1970=e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE=e.NANOS_PER_MILLISECOND=e.NANOS_PER_SECOND=e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE=e.MINUTES_PER_HOUR=e.NANOSECOND_OF_SECOND_RANGE=e.SECOND_OF_MINUTE_RANGE=e.MINUTE_OF_HOUR_RANGE=e.HOUR_OF_DAY_RANGE=e.DAY_OF_MONTH_RANGE=e.MONTH_OF_YEAR_RANGE=e.YEAR_RANGE=void 0;var o=n(xe),i=le,a=re,s=function(){function y(T,M){this._minNumber=T,this._maxNumber=M,this._minInteger=(0,o.int)(T),this._maxInteger=(0,o.int)(M)}return y.prototype.contains=function(T){if((0,o.isInt)(T)&&T instanceof o.default)return T.greaterThanOrEqual(this._minInteger)&&T.lessThanOrEqual(this._maxInteger);if(typeof T=="bigint"){var M=(0,o.int)(T);return M.greaterThanOrEqual(this._minInteger)&&M.lessThanOrEqual(this._maxInteger)}else return T>=this._minNumber&&T<=this._maxNumber},y.prototype.toString=function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")},y}();e.YEAR_RANGE=new s(-999999999,999999999),e.MONTH_OF_YEAR_RANGE=new s(1,12),e.DAY_OF_MONTH_RANGE=new s(1,31),e.HOUR_OF_DAY_RANGE=new s(0,23),e.MINUTE_OF_HOUR_RANGE=new s(0,59),e.SECOND_OF_MINUTE_RANGE=new s(0,59),e.NANOSECOND_OF_SECOND_RANGE=new s(0,999999999),e.MINUTES_PER_HOUR=60,e.SECONDS_PER_MINUTE=60,e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE*e.MINUTES_PER_HOUR,e.NANOS_PER_SECOND=1e9,e.NANOS_PER_MILLISECOND=1e6,e.NANOS_PER_MINUTE=e.NANOS_PER_SECOND*e.SECONDS_PER_MINUTE,e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE*e.MINUTES_PER_HOUR,e.DAYS_0000_TO_1970=719528,e.DAYS_PER_400_YEAR_CYCLE=146097,e.SECONDS_PER_DAY=86400;function c(y,T){return(0,o.int)(y).add(R(T,e.NANOS_PER_SECOND))}e.normalizeSecondsForDuration=c;function u(y){return V(y,e.NANOS_PER_SECOND)}e.normalizeNanosecondsForDuration=u;function l(y,T,M,x){y=(0,o.int)(y),T=(0,o.int)(T),M=(0,o.int)(M),x=(0,o.int)(x);var K=y.multiply(e.NANOS_PER_HOUR);return K=K.add(T.multiply(e.NANOS_PER_MINUTE)),K=K.add(M.multiply(e.NANOS_PER_SECOND)),K.add(x)}e.localTimeToNanoOfDay=l;function d(y,T,M,x,K,me,je){var yt=h(y,T,M),Cr=P(x,K,me);return yt.multiply(e.SECONDS_PER_DAY).add(Cr)}e.localDateTimeToEpochSecond=d;function h(y,T,M){y=(0,o.int)(y),T=(0,o.int)(T),M=(0,o.int)(M);var x=y.multiply(365);return y.greaterThanOrEqual(0)?x=x.add(y.add(3).div(4).subtract(y.add(99).div(100)).add(y.add(399).div(400))):x=x.subtract(y.div(-4).subtract(y.div(-100)).add(y.div(-400))),x=x.add(T.multiply(367).subtract(362).div(12)),x=x.add(M.subtract(1)),T.greaterThan(2)&&(x=x.subtract(1),C(y)||(x=x.subtract(1))),x.subtract(e.DAYS_0000_TO_1970)}e.dateToEpochDay=h;function p(y,T,M,x){var K=Z(y),me=Z(T),je=q(M,x);return"P".concat(K,"M").concat(me,"DT").concat(je,"S")}e.durationToIsoString=p;function v(y,T,M,x){var K=Z(y,2),me=Z(T,2),je=Z(M,2),yt=F(x);return"".concat(K,":").concat(me,":").concat(je).concat(yt)}e.timeToIsoString=v;function _(y){if(y=(0,o.int)(y),y.equals(0))return"Z";var T=y.isNegative();T&&(y=y.multiply(-1));var M=T?"-":"+",x=Z(y.div(e.SECONDS_PER_HOUR),2),K=Z(y.div(e.SECONDS_PER_MINUTE).modulo(e.MINUTES_PER_HOUR),2),me=y.modulo(e.SECONDS_PER_MINUTE),je=me.equals(0)?null:Z(me,2);return je!=null?"".concat(M).concat(x,":").concat(K,":").concat(je):"".concat(M).concat(x,":").concat(K)}e.timeZoneOffsetToIsoString=_;function b(y,T,M){var x=te(y),K=Z(T,2),me=Z(M,2);return"".concat(x,"-").concat(K,"-").concat(me)}e.dateToIsoString=b;function w(y){return new Date(y)}e.isoStringToStandardDate=w;function E(y){return new Date(y)}e.toStandardDate=E;function S(y){return new Date(y)}e.newDate=S;function O(y,T){T=T??0;var M=y.getMilliseconds()*e.NANOS_PER_MILLISECOND;return ue(T,M)}e.totalNanoseconds=O;function A(y){var T=y.getSeconds()-y.getUTCSeconds(),M=y.getMinutes()-y.getUTCMinutes(),x=y.getHours()-y.getUTCHours(),K=$(y);return x*e.SECONDS_PER_HOUR+M*e.SECONDS_PER_MINUTE+T+K*e.SECONDS_PER_DAY}e.timeZoneOffsetInSeconds=A;function $(y){return y.getMonth()===y.getUTCMonth()?y.getDate()-y.getUTCDate():y.getFullYear()>y.getUTCFullYear()||y.getMonth()>y.getUTCMonth()&&y.getFullYear()===y.getUTCFullYear()?y.getDate()+I(y.getUTCMonth(),y.getUTCFullYear())-y.getUTCDate():y.getDate()-(y.getUTCDate()+I(y.getMonth(),y.getFullYear()))}function I(y,T){return y===1?T%400===0||T%4===0&&T%100!==0?29:28:[0,2,4,6,7,9,11].includes(y)?31:30}function L(y){return k(y,e.YEAR_RANGE,"Year")}e.assertValidYear=L;function X(y){return k(y,e.MONTH_OF_YEAR_RANGE,"Month")}e.assertValidMonth=X;function ae(y){return k(y,e.DAY_OF_MONTH_RANGE,"Day")}e.assertValidDay=ae;function _e(y){return k(y,e.HOUR_OF_DAY_RANGE,"Hour")}e.assertValidHour=_e;function ne(y){return k(y,e.MINUTE_OF_HOUR_RANGE,"Minute")}e.assertValidMinute=ne;function ve(y){return k(y,e.SECOND_OF_MINUTE_RANGE,"Second")}e.assertValidSecond=ve;function it(y){return k(y,e.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")}e.assertValidNanosecond=it;var ee=new Map,be=function(y,T){return(0,i.newError)("".concat(T,' is expected to be a valid ZoneId but was: "').concat(y,'"'))};function Y(y,T){var M=ee.get(T);if(M!==!0){if(M===!1)throw be(T,y);try{Intl.DateTimeFormat(void 0,{timeZone:T}),ee.set(T,!0)}catch{throw ee.set(T,!1),be(T,y)}}}e.assertValidZoneId=Y;function k(y,T,M){if((0,a.assertNumberOrInteger)(y,M),!T.contains(y))throw(0,i.newError)("".concat(M," is expected to be in range ").concat(T.toString()," but was: ").concat(y.toString()));return y}function P(y,T,M){y=(0,o.int)(y),T=(0,o.int)(T),M=(0,o.int)(M);var x=y.multiply(e.SECONDS_PER_HOUR);return x=x.add(T.multiply(e.SECONDS_PER_MINUTE)),x.add(M)}function C(y){return y=(0,o.int)(y),y.modulo(4).equals(0)?y.modulo(100).equals(0)?!!y.modulo(400).equals(0):!0:!1}function R(y,T){y=(0,o.int)(y),T=(0,o.int)(T);var M=y.div(T);return y.isPositive()!==T.isPositive()&&M.multiply(T).notEquals(y)&&(M=M.subtract(1)),M}e.floorDiv=R;function V(y,T){return y=(0,o.int)(y),T=(0,o.int)(T),y.subtract(R(y,T).multiply(T))}e.floorMod=V;function q(y,T){y=(0,o.int)(y),T=(0,o.int)(T);var M,x,K=y.isNegative(),me=T.greaterThan(0);return K&&me?y.equals(-1)?M="-0":M=y.add(1).toString():M=y.toString(),me&&(K?x=F(T.negate().add(2*e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND)):x=F(T.add(e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND))),x!=null?M+x:M}function F(y){return y=(0,o.int)(y),y.equals(0)?"":"."+Z(y,9)}function te(y){var T=(0,o.int)(y);return T.isNegative()||T.greaterThan(9999)?Z(T,6,{usePositiveSign:!0}):Z(T,4)}function Z(y,T,M){y=(0,o.int)(y);var x=y.isNegative();x&&(y=y.negate());var K=y.toString();if(T!=null)for(;K.length<T;)K="0"+K;return x?"-"+K:(M==null?void 0:M.usePositiveSign)===!0?"+"+K:K}function ue(y,T){return y instanceof o.default?y.add(T):typeof y=="bigint"?y+BigInt(T):y+T}})(Qv);var jC=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),$C=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),ew=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&jC(r,e,t);return $C(r,e),r},NC=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(ge,"__esModule",{value:!0});ge.isDateTime=ge.DateTime=ge.isLocalDateTime=ge.LocalDateTime=ge.isDate=ge.Date=ge.isTime=ge.Time=ge.isLocalTime=ge.LocalTime=ge.isDuration=ge.Duration=void 0;var J=ew(Qv),dr=re,kC=le,Nn=ew(xe),Ko={value:!0,enumerable:!1,configurable:!1,writable:!1},tw="__isDuration__",rw="__isLocalTime__",nw="__isTime__",ow="__isDate__",iw="__isLocalDateTime__",aw="__isDateTime__",uw=function(){function e(r,t,n,o){this.months=(0,dr.assertNumberOrInteger)(r,"Months"),this.days=(0,dr.assertNumberOrInteger)(t,"Days"),(0,dr.assertNumberOrInteger)(n,"Seconds"),(0,dr.assertNumberOrInteger)(o,"Nanoseconds"),this.seconds=J.normalizeSecondsForDuration(n,o),this.nanoseconds=J.normalizeNanosecondsForDuration(o),Object.freeze(this)}return e.prototype.toString=function(){return J.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},e}();ge.Duration=uw;Object.defineProperty(uw.prototype,tw,Ko);function MC(e){return Yo(e,tw)}ge.isDuration=MC;var sw=function(){function e(r,t,n,o){this.hour=J.assertValidHour(r),this.minute=J.assertValidMinute(t),this.second=J.assertValidSecond(n),this.nanosecond=J.assertValidNanosecond(o),Object.freeze(this)}return e.fromStandardDate=function(r,t){ka(r,t);var n=J.totalNanoseconds(r,t);return new e(r.getHours(),r.getMinutes(),r.getSeconds(),n instanceof Nn.default?n.toInt():typeof n=="bigint"?(0,Nn.int)(n).toInt():n)},e.prototype.toString=function(){return J.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},e}();ge.LocalTime=sw;Object.defineProperty(sw.prototype,rw,Ko);function DC(e){return Yo(e,rw)}ge.isLocalTime=DC;var cw=function(){function e(r,t,n,o,i){this.hour=J.assertValidHour(r),this.minute=J.assertValidMinute(t),this.second=J.assertValidSecond(n),this.nanosecond=J.assertValidNanosecond(o),this.timeZoneOffsetSeconds=(0,dr.assertNumberOrInteger)(i,"Time zone offset in seconds"),Object.freeze(this)}return e.fromStandardDate=function(r,t){return ka(r,t),new e(r.getHours(),r.getMinutes(),r.getSeconds(),(0,Nn.toNumber)(J.totalNanoseconds(r,t)),J.timeZoneOffsetInSeconds(r))},e.prototype.toString=function(){return J.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+J.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},e}();ge.Time=cw;Object.defineProperty(cw.prototype,nw,Ko);function LC(e){return Yo(e,nw)}ge.isTime=LC;var lw=function(){function e(r,t,n){this.year=J.assertValidYear(r),this.month=J.assertValidMonth(t),this.day=J.assertValidDay(n),Object.freeze(this)}return e.fromStandardDate=function(r){return ka(r),new e(r.getFullYear(),r.getMonth()+1,r.getDate())},e.prototype.toStandardDate=function(){return J.isoStringToStandardDate(this.toString())},e.prototype.toString=function(){return J.dateToIsoString(this.year,this.month,this.day)},e}();ge.Date=lw;Object.defineProperty(lw.prototype,ow,Ko);function UC(e){return Yo(e,ow)}ge.isDate=UC;var fw=function(){function e(r,t,n,o,i,a,s){this.year=J.assertValidYear(r),this.month=J.assertValidMonth(t),this.day=J.assertValidDay(n),this.hour=J.assertValidHour(o),this.minute=J.assertValidMinute(i),this.second=J.assertValidSecond(a),this.nanosecond=J.assertValidNanosecond(s),Object.freeze(this)}return e.fromStandardDate=function(r,t){return ka(r,t),new e(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),(0,Nn.toNumber)(J.totalNanoseconds(r,t)))},e.prototype.toStandardDate=function(){return J.isoStringToStandardDate(this.toString())},e.prototype.toString=function(){return hw(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},e}();ge.LocalDateTime=fw;Object.defineProperty(fw.prototype,iw,Ko);function FC(e){return Yo(e,iw)}ge.isLocalDateTime=FC;var dw=function(){function e(r,t,n,o,i,a,s,c,u){this.year=J.assertValidYear(r),this.month=J.assertValidMonth(t),this.day=J.assertValidDay(n),this.hour=J.assertValidHour(o),this.minute=J.assertValidMinute(i),this.second=J.assertValidSecond(a),this.nanosecond=J.assertValidNanosecond(s);var l=NC(BC(c,u),2),d=l[0],h=l[1];this.timeZoneOffsetSeconds=d,this.timeZoneId=h??void 0,Object.freeze(this)}return e.fromStandardDate=function(r,t){return ka(r,t),new e(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),(0,Nn.toNumber)(J.totalNanoseconds(r,t)),J.timeZoneOffsetInSeconds(r),null)},e.prototype.toStandardDate=function(){return J.toStandardDate(this._toUTC())},e.prototype.toString=function(){var r,t=hw(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),n=this.timeZoneOffsetSeconds!=null?J.timeZoneOffsetToIsoString((r=this.timeZoneOffsetSeconds)!==null&&r!==void 0?r:0):"",o=this.timeZoneId!=null?"[".concat(this.timeZoneId,"]"):"";return t+n+o},e.prototype._toUTC=function(){var r;if(this.timeZoneOffsetSeconds===void 0)throw new Error("Requires DateTime created with time zone offset");var t=J.localDateTimeToEpochSecond(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),n=t.subtract((r=this.timeZoneOffsetSeconds)!==null&&r!==void 0?r:0);return(0,Nn.int)(n).multiply(1e3).add((0,Nn.int)(this.nanosecond).div(1e6)).toNumber()},e}();ge.DateTime=dw;Object.defineProperty(dw.prototype,aw,Ko);function xC(e){return Yo(e,aw)}ge.isDateTime=xC;function Yo(e,r){return e!=null&&e[r]===!0}function hw(e,r,t,n,o,i,a){return J.dateToIsoString(e,r,t)+"T"+J.timeToIsoString(n,o,i,a)}function BC(e,r){var t=e!=null,n=r!=null&&r!=="";if(!t&&!n)throw(0,kC.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(e," and id: ").concat(r));var o=[void 0,void 0];return t&&((0,dr.assertNumberOrInteger)(e,"Time zone offset in seconds"),o[0]=e),n&&((0,dr.assertString)(r,"Time zone ID"),J.assertValidZoneId("Time zone ID",r),o[1]=r),o}function ka(e,r){(0,dr.assertValidDate)(e,"Standard date"),r!=null&&(0,dr.assertNumberOrInteger)(r,"Nanosecond")}var Se={};Object.defineProperty(Se,"__esModule",{value:!0});Se.isPathSegment=Se.PathSegment=Se.isPath=Se.Path=Se.isUnboundRelationship=Se.UnboundRelationship=Se.isRelationship=Se.Relationship=Se.isNode=Se.Node=void 0;var Xv=Lt,Ma={value:!0,enumerable:!1,configurable:!1,writable:!1},pw="__isNode__",vw="__isRelationship__",_w="__isUnboundRelationship__",yw="__isPath__",bw="__isPathSegment__";function Da(e,r){return e!=null&&e[r]===!0}var mw=function(){function e(r,t,n,o){this.identity=r,this.labels=t,this.properties=n,this.elementId=fa(o,function(){return r.toString()})}return e.prototype.toString=function(){for(var r="("+this.elementId,t=0;t<this.labels.length;t++)r+=":"+this.labels[t];var n=Object.keys(this.properties);if(n.length>0){r+=" {";for(var t=0;t<n.length;t++)t>0&&(r+=","),r+=n[t]+":"+(0,Xv.stringify)(this.properties[n[t]]);r+="}"}return r+=")",r},e}();Se.Node=mw;Object.defineProperty(mw.prototype,pw,Ma);function VC(e){return Da(e,pw)}Se.isNode=VC;var Dc=function(){function e(r,t,n,o,i,a,s,c){this.identity=r,this.start=t,this.end=n,this.type=o,this.properties=i,this.elementId=fa(a,function(){return r.toString()}),this.startNodeElementId=fa(s,function(){return t.toString()}),this.endNodeElementId=fa(c,function(){return n.toString()})}return e.prototype.toString=function(){var r="("+this.startNodeElementId+")-[:"+this.type,t=Object.keys(this.properties);if(t.length>0){r+=" {";for(var n=0;n<t.length;n++)n>0&&(r+=","),r+=t[n]+":"+(0,Xv.stringify)(this.properties[t[n]]);r+="}"}return r+="]->("+this.endNodeElementId+")",r},e}();Se.Relationship=Dc;Object.defineProperty(Dc.prototype,vw,Ma);function WC(e){return Da(e,vw)}Se.isRelationship=WC;var gw=function(){function e(r,t,n,o){this.identity=r,this.type=t,this.properties=n,this.elementId=fa(o,function(){return r.toString()})}return e.prototype.bind=function(r,t){return new Dc(this.identity,r,t,this.type,this.properties,this.elementId)},e.prototype.bindTo=function(r,t){return new Dc(this.identity,r.identity,t.identity,this.type,this.properties,this.elementId,r.elementId,t.elementId)},e.prototype.toString=function(){var r="-[:"+this.type,t=Object.keys(this.properties);if(t.length>0){r+=" {";for(var n=0;n<t.length;n++)n>0&&(r+=","),r+=t[n]+":"+(0,Xv.stringify)(this.properties[t[n]]);r+="}"}return r+="]->",r},e}();Se.UnboundRelationship=gw;Object.defineProperty(gw.prototype,_w,Ma);function zC(e){return Da(e,_w)}Se.isUnboundRelationship=zC;var ww=function(){function e(r,t,n){this.start=r,this.relationship=t,this.end=n}return e}();Se.PathSegment=ww;Object.defineProperty(ww.prototype,bw,Ma);function qC(e){return Da(e,bw)}Se.isPathSegment=qC;var Ow=function(){function e(r,t,n){this.start=r,this.end=t,this.segments=n,this.length=n.length}return e}();Se.Path=Ow;Object.defineProperty(Ow.prototype,yw,Ma);function HC(e){return Da(e,yw)}Se.isPath=HC;function fa(e,r){return e??r()}var Jv={},xh=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Bh=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},Vh=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(Jv,"__esModule",{value:!0});var Zy=le;function GC(e){var r={};return e.forEach(function(t,n){r[t]=n}),r}var KC=function(){function e(r,t,n){this.keys=r,this.length=r.length,this._fields=t,this._fieldLookup=n??GC(r)}return e.prototype.forEach=function(r){var t,n;try{for(var o=Bh(this.entries()),i=o.next();!i.done;i=o.next()){var a=Vh(i.value,2),s=a[0],c=a[1];r(c,s,this)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},e.prototype.map=function(r){var t,n,o=[];try{for(var i=Bh(this.entries()),a=i.next();!a.done;a=i.next()){var s=Vh(a.value,2),c=s[0],u=s[1];o.push(r(u,c,this))}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return o},e.prototype.entries=function(){var r;return xh(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,[this.keys[r],this._fields[r]]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype.values=function(){var r;return xh(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,this._fields[r]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype[Symbol.iterator]=function(){var r;return xh(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,this._fields[r]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype.toObject=function(){var r,t,n={};try{for(var o=Bh(this.entries()),i=o.next();!i.done;i=o.next()){var a=Vh(i.value,2),s=a[0],c=a[1];n[s]=c}}catch(u){r={error:u}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(r)throw r.error}}return n},e.prototype.get=function(r){var t;if(typeof r!="number"){if(t=this._fieldLookup[r],t===void 0)throw(0,Zy.newError)("This record has no field with key '".concat(r.toString(),"', available keys are: [")+this.keys.toString()+"].")}else t=r;if(t>this._fields.length-1||t<0)throw(0,Zy.newError)("This record has no field with index '"+t.toString()+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[t]},e.prototype.has=function(r){return typeof r=="number"?r>=0&&r<this._fields.length:this._fieldLookup[r]!==void 0},e}();Jv.default=KC;var No={};Object.defineProperty(No,"__esModule",{value:!0});No.isPoint=No.Point=void 0;var Js=re,Ew="__isPoint__",Sw=function(){function e(r,t,n,o){this.srid=(0,Js.assertNumberOrInteger)(r,"SRID"),this.x=(0,Js.assertNumber)(t,"X coordinate"),this.y=(0,Js.assertNumber)(n,"Y coordinate"),this.z=o==null?o:(0,Js.assertNumber)(o,"Z coordinate"),Object.freeze(this)}return e.prototype.toString=function(){return this.z!=null&&!isNaN(this.z)?"Point{srid=".concat(vn(this.srid),", x=").concat(vn(this.x),", y=").concat(vn(this.y),", z=").concat(vn(this.z),"}"):"Point{srid=".concat(vn(this.srid),", x=").concat(vn(this.x),", y=").concat(vn(this.y),"}")},e}();No.Point=Sw;function vn(e){return Number.isInteger(e)?e.toString()+".0":e.toString()}Object.defineProperty(Sw.prototype,Ew,{value:!0,enumerable:!1,configurable:!1,writable:!1});function YC(e){var r=e;return e!=null&&r[Ew]===!0}No.isPoint=YC;var Qe={},oe={},xr={};Object.defineProperty(xr,"__esModule",{value:!0});xr.FailedObserver=xr.CompletedObserver=void 0;var ZC=function(){function e(){}return e.prototype.subscribe=function(r){da(r,r.onKeys,[]),da(r,r.onCompleted,{})},e.prototype.cancel=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.prepareToHandleSingleResponse=function(){},e.prototype.markCompleted=function(){},e.prototype.onError=function(r){throw new Error("CompletedObserver not supposed to call onError",{cause:r})},e}();xr.CompletedObserver=ZC;var QC=function(){function e(r){var t=r.error,n=r.onError;this._error=t,this._beforeError=n,this._observers=[],this.onError(t)}return e.prototype.subscribe=function(r){da(r,r.onError,this._error),this._observers.push(r)},e.prototype.onError=function(r){da(this,this._beforeError,r),this._observers.forEach(function(t){return da(t,t.onError,r)})},e.prototype.cancel=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.markCompleted=function(){},e.prototype.prepareToHandleSingleResponse=function(){},e}();xr.FailedObserver=QC;function da(e,r,t){r!=null&&r.bind(e)(t)}var en={},XC=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),JC=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),eA=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&XC(r,e,t);return JC(r,e),r},tA=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},rA=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(en,"__esModule",{value:!0});en.Bookmarks=void 0;var Qy=eA(re),nA="bookmarks",Pw=function(){function e(r){this._values=iA(r)}return e.empty=function(){return oA},e.prototype.isEmpty=function(){return this._values.length===0},e.prototype.values=function(){return this._values},e.prototype[Symbol.iterator]=function(){return this._values[Symbol.iterator]()},e.prototype.asBeginTransactionParameters=function(){var r;return this.isEmpty()?{}:(r={},r[nA]=this._values,r)},e}();en.Bookmarks=Pw;var oA=new Pw(null);function iA(e){if(e==null||e==="")return[];if(Qy.isString(e))return[e];if(Array.isArray(e)){for(var r=new Set,t=Tw(e),n=0;n<t.length;n++){var o=t[n];if(o!=null){if(!Qy.isString(o))throw new TypeError("Bookmark value should be a string, given: '".concat(o,"'"));r.add(o)}}return rA([],tA(r),!1)}throw new TypeError("Bookmarks should either be a string or a string array, given: '".concat(e,"'"))}function Tw(e){return e.reduce(function(r,t){return Array.isArray(t)?r.concat(Tw(t)):r.concat(t)},[])}var z={};Object.defineProperty(z,"__esModule",{value:!0});z.TELEMETRY_APIS=z.BOLT_PROTOCOL_V5_8=z.BOLT_PROTOCOL_V5_7=z.BOLT_PROTOCOL_V5_6=z.BOLT_PROTOCOL_V5_5=z.BOLT_PROTOCOL_V5_4=z.BOLT_PROTOCOL_V5_3=z.BOLT_PROTOCOL_V5_2=z.BOLT_PROTOCOL_V5_1=z.BOLT_PROTOCOL_V5_0=z.BOLT_PROTOCOL_V4_4=z.BOLT_PROTOCOL_V4_3=z.BOLT_PROTOCOL_V4_2=z.BOLT_PROTOCOL_V4_1=z.BOLT_PROTOCOL_V4_0=z.BOLT_PROTOCOL_V3=z.BOLT_PROTOCOL_V2=z.BOLT_PROTOCOL_V1=z.DEFAULT_POOL_MAX_SIZE=z.DEFAULT_POOL_ACQUISITION_TIMEOUT=z.DEFAULT_CONNECTION_TIMEOUT_MILLIS=z.ACCESS_MODE_WRITE=z.ACCESS_MODE_READ=z.FETCH_ALL=void 0;var aA=-1;z.FETCH_ALL=aA;var uA=60*1e3;z.DEFAULT_POOL_ACQUISITION_TIMEOUT=uA;var sA=100;z.DEFAULT_POOL_MAX_SIZE=sA;var cA=3e4;z.DEFAULT_CONNECTION_TIMEOUT_MILLIS=cA;var lA="READ";z.ACCESS_MODE_READ=lA;var fA="WRITE";z.ACCESS_MODE_WRITE=fA;var dA=1;z.BOLT_PROTOCOL_V1=dA;var hA=2;z.BOLT_PROTOCOL_V2=hA;var pA=3;z.BOLT_PROTOCOL_V3=pA;var vA=4;z.BOLT_PROTOCOL_V4_0=vA;var _A=4.1;z.BOLT_PROTOCOL_V4_1=_A;var yA=4.2;z.BOLT_PROTOCOL_V4_2=yA;var bA=4.3;z.BOLT_PROTOCOL_V4_3=bA;var mA=4.4;z.BOLT_PROTOCOL_V4_4=mA;var gA=5;z.BOLT_PROTOCOL_V5_0=gA;var wA=5.1;z.BOLT_PROTOCOL_V5_1=wA;var OA=5.2;z.BOLT_PROTOCOL_V5_2=OA;var EA=5.3;z.BOLT_PROTOCOL_V5_3=EA;var SA=5.4;z.BOLT_PROTOCOL_V5_4=SA;var PA=5.5;z.BOLT_PROTOCOL_V5_5=PA;var TA=5.6;z.BOLT_PROTOCOL_V5_6=TA;var CA=5.7;z.BOLT_PROTOCOL_V5_7=CA;var AA=5.8;z.BOLT_PROTOCOL_V5_8=AA;var IA={MANAGED_TRANSACTION:0,UNMANAGED_TRANSACTION:1,AUTO_COMMIT_TRANSACTION:2,EXECUTE_QUERY:3};z.TELEMETRY_APIS=IA;var Mt={},Kn={},RA=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),vo;Object.defineProperty(Kn,"__esModule",{value:!0});Kn.Logger=void 0;var Cw=le,Vp="error",Wp="warn",wa="info",zp="debug",jA=wa,Lc=(vo={},vo[Vp]=0,vo[Wp]=1,vo[wa]=2,vo[zp]=3,vo),Aw=function(){function e(r,t){this._level=r,this._loggerFunction=t}return e.create=function(r){if((r==null?void 0:r.logging)!=null){var t=r.logging,n=kA(t),o=MA(t);return new e(n,o)}return this.noOp()},e.noOp=function(){return NA},e.prototype.isErrorEnabled=function(){return ec(this._level,Vp)},e.prototype.error=function(r){this.isErrorEnabled()&&this._loggerFunction(Vp,r)},e.prototype.isWarnEnabled=function(){return ec(this._level,Wp)},e.prototype.warn=function(r){this.isWarnEnabled()&&this._loggerFunction(Wp,r)},e.prototype.isInfoEnabled=function(){return ec(this._level,wa)},e.prototype.info=function(r){this.isInfoEnabled()&&this._loggerFunction(wa,r)},e.prototype.isDebugEnabled=function(){return ec(this._level,zp)},e.prototype.debug=function(r){this.isDebugEnabled()&&this._loggerFunction(zp,r)},e}();Kn.Logger=Aw;var $A=function(e){RA(r,e);function r(){return e.call(this,wa,function(t,n){})||this}return r.prototype.isErrorEnabled=function(){return!1},r.prototype.error=function(t){},r.prototype.isWarnEnabled=function(){return!1},r.prototype.warn=function(t){},r.prototype.isInfoEnabled=function(){return!1},r.prototype.info=function(t){},r.prototype.isDebugEnabled=function(){return!1},r.prototype.debug=function(t){},r}(Aw),NA=new $A;function ec(e,r){return Lc[e]>=Lc[r]}function kA(e){if((e==null?void 0:e.level)!=null){var r=e.level,t=Lc[r];if(t==null&&t!==0)throw(0,Cw.newError)("Illegal logging level: ".concat(r,". Supported levels are: ").concat(Object.keys(Lc).toString()));return r}return jA}function MA(e){var r,t;if((e==null?void 0:e.logger)!=null){var n=e.logger;if(n!=null&&typeof n=="function")return n}throw(0,Cw.newError)("Illegal logger function: ".concat((t=(r=e==null?void 0:e.logger)===null||r===void 0?void 0:r.toString())!==null&&t!==void 0?t:"undefined"))}var Iw=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ha=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},pa=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.EMPTY_CONNECTION_HOLDER=Mt.ReadOnlyConnectionHolder=Mt.ConnectionHolder=void 0;var DA=le,LA=re,UA=z,Xy=en,FA=Kn,e_=function(){function e(r){var t=r.mode,n=r.database,o=n===void 0?"":n,i=r.bookmarks,a=r.connectionProvider,s=r.impersonatedUser,c=r.onDatabaseNameResolved,u=r.getConnectionAcquistionBookmarks,l=r.auth,d=r.log;this._mode=t??UA.ACCESS_MODE_WRITE,this._closed=!1,this._database=o!=null?(0,LA.assertString)(o,"database"):"",this._bookmarks=i??Xy.Bookmarks.empty(),this._connectionProvider=a,this._impersonatedUser=s,this._referenceCount=0,this._connectionPromise=Promise.resolve(null),this._onDatabaseNameResolved=c,this._auth=l,this._log=d,this._logError=this._logError.bind(this),this._getConnectionAcquistionBookmarks=u??function(){return Promise.resolve(Xy.Bookmarks.empty())}}return e.prototype.mode=function(){return this._mode},e.prototype.database=function(){return this._database},e.prototype.setDatabase=function(r){this._database=r},e.prototype.bookmarks=function(){return this._bookmarks},e.prototype.connectionProvider=function(){return this._connectionProvider},e.prototype.referenceCount=function(){return this._referenceCount},e.prototype.initializeConnection=function(r){if(this._referenceCount===0&&this._connectionProvider!=null)this._connectionPromise=this._createConnectionPromise(this._connectionProvider,r);else return this._referenceCount++,!1;return this._referenceCount++,!0},e.prototype._createConnectionPromise=function(r,t){return ha(this,void 0,void 0,function(){var n,o,i;return pa(this,function(a){switch(a.label){case 0:return o=(n=r).acquireConnection,i={accessMode:this._mode,database:this._database},[4,this._getBookmarks()];case 1:return[4,o.apply(n,[(i.bookmarks=a.sent(),i.impersonatedUser=this._impersonatedUser,i.onDatabaseNameResolved=this._onDatabaseNameResolved,i.auth=this._auth,i.homeDb=t,i)])];case 2:return[2,a.sent()]}})})},e.prototype._getBookmarks=function(){return ha(this,void 0,void 0,function(){return pa(this,function(r){switch(r.label){case 0:return[4,this._getConnectionAcquistionBookmarks()];case 1:return[2,r.sent()]}})})},e.prototype.getConnection=function(){return this._connectionPromise},e.prototype.releaseConnection=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount--,this._referenceCount===0?this._releaseConnection():this._connectionPromise)},e.prototype.close=function(r){return this._closed=!0,this._referenceCount===0?this._connectionPromise:(this._referenceCount=0,this._releaseConnection(r))},e.prototype.log=function(){return this._log},e.prototype._releaseConnection=function(r){return this._connectionPromise=this._connectionPromise.then(function(t){return t!=null?t.isOpen()&&(t.hasOngoingObservableRequests()||r===!0)?t.resetAndFlush().catch(VA).then(function(){return t.release().then(function(){return null})}):t.release().then(function(){return null}):Promise.resolve(null)}).catch(this._logError),this._connectionPromise},e.prototype._logError=function(r){return this._log.isWarnEnabled()&&this._log.warn("ConnectionHolder got an error while releasing the connection. Error ".concat(r,". Stacktrace: ").concat(r.stack)),null},e}();Mt.ConnectionHolder=e_;var Rw=function(e){Iw(r,e);function r(t){var n=e.call(this,{mode:t.mode(),database:t.database(),bookmarks:t.bookmarks(),getConnectionAcquistionBookmarks:t._getConnectionAcquistionBookmarks,connectionProvider:t.connectionProvider(),log:t.log()})||this;return n._connectionHolder=t,n}return r.prototype.initializeConnection=function(){return this._connectionHolder.referenceCount()!==0},r.prototype.getConnection=function(){return this._connectionHolder.getConnection()},r.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},r.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},r}(e_);Mt.ReadOnlyConnectionHolder=Rw;Mt.default=Rw;var xA=function(e){Iw(r,e);function r(){return e.call(this,{log:FA.Logger.create({})})||this}return r.prototype.mode=function(){},r.prototype.database=function(){},r.prototype.initializeConnection=function(){return!0},r.prototype.getConnection=function(){return ha(this,void 0,void 0,function(){return pa(this,function(t){switch(t.label){case 0:return[4,Promise.reject((0,DA.newError)("This connection holder does not serve connections"))];case 1:return[2,t.sent()]}})})},r.prototype.releaseConnection=function(){return ha(this,void 0,void 0,function(){return pa(this,function(t){switch(t.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,t.sent()]}})})},r.prototype.close=function(){return ha(this,void 0,void 0,function(){return pa(this,function(t){switch(t.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,t.sent()]}})})},r}(e_),BA=new xA;Mt.EMPTY_CONNECTION_HOLDER=BA;function VA(e){return null}var Zo={},WA=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),zA=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),qA=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&WA(r,e,t);return zA(r,e),r};Object.defineProperty(Zo,"__esModule",{value:!0});Zo.TxConfig=void 0;var Oa=qA(re),HA=le,GA=xe,jw=function(){function e(r,t){XA(r),this.timeout=YA(r,t),this.metadata=QA(r)}return e.empty=function(){return KA},e.prototype.isEmpty=function(){return Object.values(this).every(function(r){return r==null})},e}();Zo.TxConfig=jw;var KA=new jw({});function YA(e,r){if(Oa.isObject(e)&&e.timeout!=null){Oa.assertNumberOrInteger(e.timeout,"Transaction timeout"),ZA(e)&&(r==null?void 0:r.isInfoEnabled())===!0&&(r==null||r.info("Transaction timeout expected to be an integer, got: ".concat(e.timeout,". The value will be rounded up.")));var t=(0,GA.int)(e.timeout,{ceilFloat:!0});if(t.isNegative())throw(0,HA.newError)("Transaction timeout should not be negative");return t}return null}function ZA(e){return typeof e.timeout=="number"&&!Number.isInteger(e.timeout)}function QA(e){if(Oa.isObject(e)&&e.metadata!=null){var r=e.metadata;if(Oa.assertObject(r,"config.metadata"),Object.keys(r).length!==0)return r}return null}function XA(e){e!=null&&Oa.assertObject(e,"Transaction config")}var La={},qp=f&&f.__assign||function(){return qp=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},qp.apply(this,arguments)},JA=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},eI=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},tI=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},rI=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(La,"__esModule",{value:!0});La.TransactionExecutor=void 0;var zi=le,nI=z,oI=30*1e3,iI=1e3,aI=2,uI=.2;function sI(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return setTimeout.apply(void 0,rI([e,r],tI(t),!1))}function cI(e){return clearTimeout(e)}var lI=function(){function e(r,t,n,o,i){i===void 0&&(i={setTimeout:sI,clearTimeout:cI}),this._maxRetryTimeMs=tc(r,oI),this._initialRetryDelayMs=tc(t,iI),this._multiplier=tc(n,aI),this._jitterFactor=tc(o,uI),this._setTimeout=i.setTimeout,this._clearTimeout=i.clearTimeout,this._inFlightTimeoutIds=[],this.pipelineBegin=!1,this.telemetryApi=nI.TELEMETRY_APIS.MANAGED_TRANSACTION,this._verifyAfterConstruction()}return e.prototype.execute=function(r,t,n){var o=this,i={apiTransactionConfig:{api:this.telemetryApi,onTelemetrySuccess:function(){i.apiTransactionConfig=void 0}}};return new Promise(function(a,s){o._executeTransactionInsidePromise(r,t,a,s,n,i).catch(s)}).catch(function(a){var s=Date.now(),c=o._initialRetryDelayMs;return o._retryTransactionPromise(r,t,a,s,c,n,i)})},e.prototype.close=function(){var r=this;this._inFlightTimeoutIds.forEach(function(t){return r._clearTimeout(t)}),this._inFlightTimeoutIds=[]},e.prototype._retryTransactionPromise=function(r,t,n,o,i,a,s){var c=this,u=Date.now()-o;return u>this._maxRetryTimeMs||!(0,zi.isRetriableError)(n)?Promise.reject(n):new Promise(function(l,d){var h=c._computeDelayWithJitter(i),p=c._setTimeout(function(){c._inFlightTimeoutIds=c._inFlightTimeoutIds.filter(function(v){return v!==p}),c._executeTransactionInsidePromise(r,t,l,d,a,s).catch(d)},h);c._inFlightTimeoutIds.push(p)}).catch(function(l){var d=i*c._multiplier;return c._retryTransactionPromise(r,t,l,o,d,a,s)})},e.prototype._executeTransactionInsidePromise=function(r,t,n,o,i,a){return JA(this,void 0,void 0,function(){var s,c,u,l,d,h,p,v=this;return eI(this,function(_){switch(_.label){case 0:return _.trys.push([0,4,,5]),c=r((a==null?void 0:a.apiTransactionConfig)!=null?qp({},a==null?void 0:a.apiTransactionConfig):void 0),this.pipelineBegin?(u=c,[3,3]):[3,1];case 1:return[4,c];case 2:u=_.sent(),_.label=3;case 3:return s=u,[3,5];case 4:return l=_.sent(),o(l),[2];case 5:return d=i??function(b){return b},h=d(s),p=this._safeExecuteTransactionWork(h,t),p.then(function(b){return v._handleTransactionWorkSuccess(b,s,n,o)}).catch(function(b){return v._handleTransactionWorkFailure(b,s,o)}),[2]}})})},e.prototype._safeExecuteTransactionWork=function(r,t){try{var n=t(r);return Promise.resolve(n)}catch(o){return Promise.reject(o)}},e.prototype._handleTransactionWorkSuccess=function(r,t,n,o){t.isOpen()?t.commit().then(function(){n(r)}).catch(function(i){o(i)}):n(r)},e.prototype._handleTransactionWorkFailure=function(r,t,n){t.isOpen()?t.rollback().catch(function(o){}).then(function(){return n(r)}).catch(n):n(r)},e.prototype._computeDelayWithJitter=function(r){var t=r*this._jitterFactor,n=r-t,o=r+t;return Math.random()*(o-n)+n},e.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,zi.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs.toString());if(this._initialRetryDelayMs<0)throw(0,zi.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs.toString());if(this._multiplier<1)throw(0,zi.newError)("Multiplier should be >= 1.0: "+this._multiplier.toString());if(this._jitterFactor<0||this._jitterFactor>1)throw(0,zi.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor.toFixed())},e}();La.TransactionExecutor=lI;function tc(e,r){return e??r}var dt={},Uc=f&&f.__assign||function(){return Uc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Uc.apply(this,arguments)},$w=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(dt,"__esModule",{value:!0});dt.Url=dt.formatIPv6Address=dt.formatIPv4Address=dt.defaultPortForScheme=dt.parseDatabaseUrl=void 0;var fI=re,dI=7687,hI=7474,pI=7473,Nw=function(){function e(r,t,n,o,i){this.scheme=r,this.host=t,this.port=n,this.hostAndPort=o,this.query=i}return e}();dt.Url=Nw;function vI(e){var r;(0,fI.assertString)(e,"URL");var t=yI(e),n=TI(t.url),o=t.schemeMissing?null:bI(n.scheme),i=mI(n.host),a=EI(i),s=gI(n.port,o),c="".concat(a,":").concat(s),u=wI((r=n.query)!==null&&r!==void 0?r:_I(n.resourceName),e);return new Nw(o,i,s,c,u)}dt.parseDatabaseUrl=vI;function _I(e){if(typeof e!="string")return null;var r=$w(e.split("?"),2),t=r[1];return t}function yI(e){return e=e.trim(),e.includes("://")?{schemeMissing:!1,url:e}:{schemeMissing:!0,url:"none://".concat(e)}}function bI(e){return e!=null?(e=e.trim(),e.charAt(e.length-1)===":"&&(e=e.substring(0,e.length-1)),e):null}function mI(e,r){if(e==null)throw new Error("Unable to extract host from null or undefined URL");return e.trim()}function gI(e,r){var t=typeof e=="string"?parseInt(e,10):e;return t!=null&&!isNaN(t)?t:Mw(r)}function wI(e,r){var t=e!=null?OI(e):null,n={};return t!=null&&t.split("&").forEach(function(o){var i=o.split("=");if(i.length!==2)throw new Error("Invalid parameters: '".concat(i.toString(),"' in URL '").concat(r,"'."));var a=Jy(i[0],"key",r),s=Jy(i[1],"value",r);if(n[a]!==void 0)throw new Error("Duplicated query parameters with key '".concat(a,"' in URL '").concat(r,"'"));n[a]=s}),n}function OI(e){return e=(e??"").trim(),(e==null?void 0:e.charAt(0))==="?"&&(e=e.substring(1,e.length)),e}function Jy(e,r,t){if(e=(e??"").trim(),e==="")throw new Error("Illegal empty ".concat(r," in URL query '").concat(t,"'"));return e}function kw(e){var r=e.charAt(0)==="[",t=e.charAt(e.length-1)==="]";if(!r&&!t)return"[".concat(e,"]");if(r&&t)return e;throw new Error("Illegal IPv6 address ".concat(e))}function EI(e){if(e===""||e==null)throw new Error("Illegal host ".concat(e));var r=e.includes(":");return r?kw(e):e}function SI(e,r){return"".concat(e,":").concat(r)}dt.formatIPv4Address=SI;function PI(e,r){var t=kw(e);return"".concat(t,":").concat(r)}dt.formatIPv6Address=PI;function Mw(e){return e==="http"?hI:e==="https"?pI:dI}dt.defaultPortForScheme=Mw;function TI(e){function r(s,c){var u=s.indexOf(c);return u>=0?[s.substring(0,u),s[u],s.substring(u+1)]:[s,"",""]}function t(s,c){var u=s.lastIndexOf(c);return u>=0?[s.substring(0,u),s[u],s.substring(u+1)]:["","",s]}function n(s,c,u){var l=r(s,c),d=r(l[2],u);return[d[0],d[2]]}function o(s){var c={},u;u=t(s,"@"),u[1]==="@"&&(c.userInfo=decodeURIComponent(u[0]),s=u[2]);var l=$w(n(s,"[","]"),2),d=l[0],h=l[1];return d!==""?(c.host=d,u=r(h,":")):(u=r(s,":"),c.host=u[0]),u[1]===":"&&(c.port=u[2]),c}var i={},a;return a=r(e,":"),a[1]===":"&&(i.scheme=decodeURIComponent(a[0]),e=a[2]),a=r(e,"#"),a[1]==="#"&&(i.fragment=decodeURIComponent(a[2]),e=a[0]),a=r(e,"?"),a[1]==="?"&&(i.query=a[2],e=a[0]),e.startsWith("//")?(a=r(e.substr(2),"/"),i=Uc(Uc({},i),o(a[0])),i.path=a[1]+a[2]):i.path=e,i}var Ua={},CI=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),AI=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),II=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&CI(r,e,t);return AI(r,e),r};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.ServerAddress=void 0;var Wh=re,RI=II(dt),jI=function(){function e(r,t,n,o){this._host=(0,Wh.assertString)(r,"host"),this._resolved=t!=null?(0,Wh.assertString)(t,"resolved"):null,this._port=(0,Wh.assertNumber)(n,"port"),this._hostPort=o,this._stringValue=t!=null?"".concat(o,"(").concat(t,")"):"".concat(o)}return e.prototype.host=function(){return this._host},e.prototype.resolvedHost=function(){return this._resolved!=null?this._resolved:this._host},e.prototype.port=function(){return this._port},e.prototype.resolveWith=function(r){return new e(this._host,r,this._port,this._hostPort)},e.prototype.asHostPort=function(){return this._hostPort},e.prototype.asKey=function(){return this._hostPort},e.prototype.toString=function(){return this._stringValue},e.fromUrl=function(r){var t=RI.parseDatabaseUrl(r);return new e(t.host,null,t.port,t.hostAndPort)},e}();Ua.ServerAddress=jI;var ko={},t_={};Object.defineProperty(t_,"__esModule",{value:!0});var $I=function(){function e(){}return e.prototype.resolve=function(){throw new Error("Abstract function")},e.prototype._resolveToItself=function(r){return Promise.resolve([r])},e}();t_.default=$I;var gl={};Object.defineProperty(gl,"__esModule",{value:!0});var NI=Ua;function kI(e){return Promise.resolve([e])}var MI=function(){function e(r){this._resolverFunction=r??kI}return e.prototype.resolve=function(r){var t=this;return new Promise(function(n){return n(t._resolverFunction(r.asHostPort()))}).then(function(n){if(!Array.isArray(n))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(n));return n.map(function(o){return NI.ServerAddress.fromUrl(o)})})},e}();gl.default=MI;var Dw=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ko,"__esModule",{value:!0});ko.ConfiguredCustomResolver=ko.BaseHostNameResolver=void 0;var DI=Dw(t_);ko.BaseHostNameResolver=DI.default;var LI=Dw(gl);ko.ConfiguredCustomResolver=LI.default;var Lw={},wl={};Object.defineProperty(wl,"__esModule",{value:!0});wl.fromVersion=void 0;function UI(e,r){r===void 0&&(r=function(){return{get userAgent(){var i;return i==null?void 0:i.userAgent}}});var t=r(),n=t.userAgent!=null?t.userAgent.split("(")[1].split(")")[0]:void 0,o=t.userAgent||void 0;return{product:"neo4j-javascript/".concat(e),platform:n,languageDetails:o}}wl.fromVersion=UI;(function(e){var r=f&&f.__createBinding||(Object.create?function(n,o,i,a){a===void 0&&(a=i);var s=Object.getOwnPropertyDescriptor(o,i);(!s||("get"in s?!o.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(n,a,s)}:function(n,o,i,a){a===void 0&&(a=i),n[a]=o[i]}),t=f&&f.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&r(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),t(wl,e)})(Lw);var Uw={},Br={};Object.defineProperty(Br,"__esModule",{value:!0});Br.DEFAULT_ACQUISITION_TIMEOUT=Br.DEFAULT_MAX_SIZE=void 0;var Cc=100;Br.DEFAULT_MAX_SIZE=Cc;var Ac=60*1e3;Br.DEFAULT_ACQUISITION_TIMEOUT=Ac;var FI=function(){function e(r,t){this.maxSize=eb(r,Cc),this.acquisitionTimeout=eb(t,Ac)}return e.defaultConfig=function(){return new e(Cc,Ac)},e.fromDriverConfig=function(r){var t=Hp(r.maxConnectionPoolSize)?r.maxConnectionPoolSize:Cc,n=Hp(r.connectionAcquisitionTimeout)?r.connectionAcquisitionTimeout:Ac;return new e(t,n)},e}();Br.default=FI;function eb(e,r){return Hp(e)?e:r}function Hp(e){return e===0||e!=null}var r_={},bt=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},mt=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},xI=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r_,"__esModule",{value:!0});var BI=xI(Br),tb=le,VI=Kn,WI=function(){function e(r){var t=r.create,n=t===void 0?function(S,O,A){return bt(E,void 0,void 0,function(){return mt(this,function($){switch($.label){case 0:return[4,Promise.reject(new Error("Not implemented"))];case 1:return[2,$.sent()]}})})}:t,o=r.destroy,i=o===void 0?function(S){return bt(E,void 0,void 0,function(){return mt(this,function(O){switch(O.label){case 0:return[4,Promise.resolve()];case 1:return[2,O.sent()]}})})}:o,a=r.validateOnAcquire,s=a===void 0?function(S,O){return!0}:a,c=r.validateOnRelease,u=c===void 0?function(S){return!0}:c,l=r.installIdleObserver,d=l===void 0?function(S,O){}:l,h=r.removeIdleObserver,p=h===void 0?function(S){}:h,v=r.config,_=v===void 0?BI.default.defaultConfig():v,b=r.log,w=b===void 0?VI.Logger.noOp():b,E=this;this._create=n,this._destroy=i,this._validateOnAcquire=s,this._validateOnRelease=u,this._installIdleObserver=d,this._removeIdleObserver=p,this._maxSize=_.maxSize,this._acquisitionTimeout=_.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=w,this._closed=!1}return e.prototype.acquire=function(r,t,n){return bt(this,void 0,void 0,function(){var o,i,a,s=this;return mt(this,function(c){switch(c.label){case 0:return o=t.asKey(),i=this._acquireRequests,a=i[o],a==null&&(i[o]=[]),[4,new Promise(function(u,l){var d=setTimeout(function(){var p=i[o];if(p!=null&&(i[o]=p.filter(function(b){return b!==h})),!h.isCompleted()){var v=s.activeResourceCount(t),_=s.has(t)?s._pools[o].length:0;h.reject((0,tb.newError)("Connection acquisition timed out in ".concat(s._acquisitionTimeout," ms. Pool status: Active conn count = ").concat(v,", Idle conn count = ").concat(_,".")))}},s._acquisitionTimeout);typeof d=="object"&&d.unref();var h=new zI(o,r,n,u,l,d,s._log);i[o].push(h),s._processPendingAcquireRequests(t)})];case 1:return[2,c.sent()]}})})},e.prototype.purge=function(r){return bt(this,void 0,void 0,function(){return mt(this,function(t){switch(t.label){case 0:return[4,this._purgeKey(r.asKey())];case 1:return[2,t.sent()]}})})},e.prototype.apply=function(r,t){var n=r.asKey();n in this._pools&&this._pools[n].apply(t)},e.prototype.close=function(){return bt(this,void 0,void 0,function(){var r=this;return mt(this,function(t){switch(t.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(n){return bt(r,void 0,void 0,function(){return mt(this,function(o){switch(o.label){case 0:return[4,this._purgeKey(n)];case 1:return[2,o.sent()]}})})})).then()];case 1:return[2,t.sent()]}})})},e.prototype.keepAll=function(r){return bt(this,void 0,void 0,function(){var t,n,o,i=this;return mt(this,function(a){switch(a.label){case 0:return t=r.map(function(s){return s.asKey()}),n=Object.keys(this._pools),o=n.filter(function(s){return!t.includes(s)}),[4,Promise.all(o.map(function(s){return bt(i,void 0,void 0,function(){return mt(this,function(c){switch(c.label){case 0:return[4,this._purgeKey(s)];case 1:return[2,c.sent()]}})})})).then()];case 1:return[2,a.sent()]}})})},e.prototype.has=function(r){return r.asKey()in this._pools},e.prototype.activeResourceCount=function(r){var t;return(t=this._activeResourceCounts[r.asKey()])!==null&&t!==void 0?t:0},e.prototype._getOrInitializePoolFor=function(r){var t=this._pools[r];return t==null&&(t=new qI,this._pools[r]=t,this._pendingCreates[r]=0),t},e.prototype._acquire=function(r,t,n){return bt(this,void 0,void 0,function(){var o,i,a,s,c,l,u,l,d,h=this;return mt(this,function(p){switch(p.label){case 0:if(this._closed)throw(0,tb.newError)("Pool is closed, it is no more able to serve requests.");if(o=t.asKey(),i=this._getOrInitializePoolFor(o),n)return[3,10];p.label=1;case 1:if(!(i.length>0))return[3,10];if(a=i.pop(),a==null)return[3,1];rb(o,this._activeResourceCounts),this._removeIdleObserver!=null&&this._removeIdleObserver(a),s=!1,p.label=2;case 2:return p.trys.push([2,4,,6]),[4,this._validateOnAcquire(r,a)];case 3:return s=p.sent(),[3,6];case 4:return c=p.sent(),zh(o,this._activeResourceCounts),i.removeInUse(a),[4,this._destroy(a)];case 5:throw p.sent(),c;case 6:return s?(this._log.isDebugEnabled()&&this._log.debug("".concat(a," acquired from the pool ").concat(o)),[2,{resource:a,pool:i}]):[3,7];case 7:return zh(o,this._activeResourceCounts),i.removeInUse(a),[4,this._destroy(a)];case 8:p.sent(),p.label=9;case 9:return[3,1];case 10:if(this._maxSize>0&&(l=this.activeResourceCount(t)+this._pendingCreates[o],l>=this._maxSize))return[2,{resource:null,pool:i}];this._pendingCreates[o]=this._pendingCreates[o]+1,p.label=11;case 11:return p.trys.push([11,,15,16]),l=this.activeResourceCount(t)+i.length,l>=this._maxSize&&n?(d=i.pop(),d==null?[3,13]:(this._removeIdleObserver!=null&&this._removeIdleObserver(d),i.removeInUse(d),[4,this._destroy(d)])):[3,13];case 12:p.sent(),p.label=13;case 13:return[4,this._create(r,t,function(v,_){return bt(h,void 0,void 0,function(){return mt(this,function(b){switch(b.label){case 0:return[4,this._release(v,_,i)];case 1:return[2,b.sent()]}})})})];case 14:return u=p.sent(),i.pushInUse(u),rb(o,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(u," created for the pool ").concat(o)),[3,16];case 15:return this._pendingCreates[o]=this._pendingCreates[o]-1,[7];case 16:return[2,{resource:u,pool:i}]}})})},e.prototype._release=function(r,t,n){return bt(this,void 0,void 0,function(){var o,i=this;return mt(this,function(a){switch(a.label){case 0:o=r.asKey(),a.label=1;case 1:return a.trys.push([1,,9,10]),n.isActive()?[4,this._validateOnRelease(t)]:[3,6];case 2:return a.sent()?[3,4]:(this._log.isDebugEnabled()&&this._log.debug("".concat(t," destroyed and can't be released to the pool ").concat(o," because it is not functional")),n.removeInUse(t),[4,this._destroy(t)]);case 3:return a.sent(),[3,5];case 4:this._installIdleObserver!=null&&this._installIdleObserver(t,{onError:function(s){i._log.debug("Idle connection ".concat(t," destroyed because of error: ").concat(s));var c=i._pools[o];c!=null&&(i._pools[o]=c.filter(function(u){return u!==t}),c.removeInUse(t)),i._destroy(t).catch(function(){})}}),n.push(t),this._log.isDebugEnabled()&&this._log.debug("".concat(t," released to the pool ").concat(o)),a.label=5;case 5:return[3,8];case 6:return this._log.isDebugEnabled()&&this._log.debug("".concat(t," destroyed and can't be released to the pool ").concat(o," because pool has been purged")),n.removeInUse(t),[4,this._destroy(t)];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:return zh(o,this._activeResourceCounts),this._processPendingAcquireRequests(r),[7];case 10:return[2]}})})},e.prototype._purgeKey=function(r){return bt(this,void 0,void 0,function(){var t,n,o;return mt(this,function(i){switch(i.label){case 0:if(t=this._pools[r],n=[],t==null)return[3,2];for(;t.length>0;)o=t.pop(),o!=null&&(this._removeIdleObserver!=null&&this._removeIdleObserver(o),n.push(this._destroy(o)));return t.close(),delete this._pools[r],[4,Promise.all(n)];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype._processPendingAcquireRequests=function(r){var t=this,n=r.asKey(),o=this._acquireRequests[n];if(o!=null){var i=o.shift();i!=null?this._acquire(i.context,r,i.requireNew).catch(function(a){return i.reject(a),{resource:null,pool:null}}).then(function(a){var s=a.resource,c=a.pool;s!=null&&c!=null?i.isCompleted()?t._release(r,s,c).catch(function(u){t._log.isDebugEnabled()&&t._log.debug("".concat(s," could not be release back to the pool. Cause: ").concat(u))}):i.resolve(s):i.isCompleted()||(t._acquireRequests[n]==null&&(t._acquireRequests[n]=[]),t._acquireRequests[n].unshift(i))}).catch(function(a){return i.reject(a)}):delete this._acquireRequests[n]}},e}();function rb(e,r){var t,n=(t=r[e])!==null&&t!==void 0?t:0;r[e]=n+1}function zh(e,r){var t,n=(t=r[e])!==null&&t!==void 0?t:0,o=n-1;o>0?r[e]=o:delete r[e]}var zI=function(){function e(r,t,n,o,i,a,s){this._key=r,this._context=t,this._resolve=o,this._reject=i,this._timeoutId=a,this._log=s,this._completed=!1,this._config=n??{}}return Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requireNew",{get:function(){var r;return(r=this._config.requireNew)!==null&&r!==void 0?r:!1},enumerable:!1,configurable:!0}),e.prototype.isCompleted=function(){return this._completed},e.prototype.resolve=function(r){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(r," acquired from the pool ").concat(this._key)),this._resolve(r))},e.prototype.reject=function(r){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(r))},e}(),qI=function(){function e(){this._active=!0,this._elements=[],this._elementsInUse=new Set}return e.prototype.isActive=function(){return this._active},e.prototype.close=function(){this._active=!1,this._elements=[],this._elementsInUse=new Set},e.prototype.filter=function(r){return this._elements=this._elements.filter(r),this},e.prototype.apply=function(r){this._elements.forEach(r),this._elementsInUse.forEach(r)},Object.defineProperty(e.prototype,"length",{get:function(){return this._elements.length},enumerable:!1,configurable:!0}),e.prototype.pop=function(){var r=this._elements.pop();return r!=null&&this._elementsInUse.add(r),r},e.prototype.push=function(r){return this._elementsInUse.delete(r),this._elements.push(r)},e.prototype.pushInUse=function(r){this._elementsInUse.add(r)},e.prototype.removeInUse=function(r){this._elementsInUse.delete(r)},e}();r_.default=WI;(function(e){var r=f&&f.__createBinding||(Object.create?function(s,c,u,l){l===void 0&&(l=u);var d=Object.getOwnPropertyDescriptor(c,u);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(s,l,d)}:function(s,c,u,l){l===void 0&&(l=u),s[l]=c[u]}),t=f&&f.__setModuleDefault||(Object.create?function(s,c){Object.defineProperty(s,"default",{enumerable:!0,value:c})}:function(s,c){s.default=c}),n=f&&f.__importStar||function(s){if(s&&s.__esModule)return s;var c={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&r(c,s,u);return t(c,s),c},o=f&&f.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_MAX_SIZE=e.DEFAULT_ACQUISITION_TIMEOUT=e.PoolConfig=e.Pool=void 0;var i=n(Br);e.PoolConfig=i.default,Object.defineProperty(e,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return i.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(e,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return i.DEFAULT_MAX_SIZE}});var a=o(r_);e.Pool=a.default,e.default=a.default})(Uw);var HI=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),GI=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),ot=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&HI(r,e,t);return GI(r,e),r};Object.defineProperty(oe,"__esModule",{value:!0});oe.pool=oe.boltAgent=oe.objectUtil=oe.resolver=oe.serverAddress=oe.urlUtil=oe.logger=oe.transactionExecutor=oe.txConfig=oe.connectionHolder=oe.constants=oe.bookmarks=oe.observer=oe.temporalUtil=oe.util=void 0;var KI=ot(re);oe.util=KI;var YI=ot(Qv);oe.temporalUtil=YI;var ZI=ot(xr);oe.observer=ZI;var QI=ot(en);oe.bookmarks=QI;var XI=ot(z);oe.constants=XI;var JI=ot(Mt);oe.connectionHolder=JI;var eR=ot(Zo);oe.txConfig=eR;var tR=ot(La);oe.transactionExecutor=tR;var rR=ot(Kn);oe.logger=rR;var nR=ot(dt);oe.urlUtil=nR;var oR=ot(Ua);oe.serverAddress=oR;var iR=ot(ko);oe.resolver=iR;var aR=ot(pr);oe.objectUtil=aR;var uR=ot(Lw);oe.boltAgent=uR;var sR=ot(Uw);oe.pool=sR;var Pe={},Ea=f&&f.__assign||function(){return Ea=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ea.apply(this,arguments)},cR=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),lR=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),fR=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&cR(r,e,t);return lR(r,e),r},dR=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},hR=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.buildNotificationsFromMetadata=Pe.buildGqlStatusObjectFromMetadata=Pe.polyfillNotification=Pe.polyfillGqlStatusObject=Pe.GqlStatusObject=Pe.Notification=Pe.notificationClassification=Pe.notificationCategory=Pe.notificationSeverityLevel=void 0;var pR=fR(Lt),qh=oe,ia=Kv,Gp={WARNING:{gql_status:"01N42",status_description:"warn: unknown warning"},NO_DATA:{gql_status:"02N42",status_description:"note: no data - unknown subcondition"},INFORMATION:{gql_status:"03N42",status_description:"info: unknown notification"}},Fa={WARNING:"WARNING",INFORMATION:"INFORMATION",UNKNOWN:"UNKNOWN"};Pe.notificationSeverityLevel=Fa;Object.freeze(Fa);var vR=Object.values(Fa),Ol={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",DEPRECATION:"DEPRECATION",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",GENERIC:"GENERIC",SCHEMA:"SCHEMA",UNKNOWN:"UNKNOWN"};Pe.notificationCategory=Ol;Object.freeze(Ol);var _R=Object.values(Ol),Fw=Ol;Pe.notificationClassification=Fw;var El=function(){function e(r){this.code=r.code,this.title=r.title,this.description=r.description,this.severity=r.severity,this.position=Vw(r.position),this.severityLevel=Ww(r.severity),this.rawSeverityLevel=r.severity,this.category=zw(r.category),this.rawCategory=r.category}return e}();Pe.Notification=El;var Rn=function(){function e(r){var t;this.gqlStatus=r.gql_status,this.statusDescription=r.status_description,this.diagnosticRecord=(t=r.diagnostic_record)!==null&&t!==void 0?t:{},this.position=this.diagnosticRecord._position!=null?Vw(this.diagnosticRecord._position):void 0,this.severity=Ww(this.diagnosticRecord._severity),this.rawSeverity=this.diagnosticRecord._severity,this.classification=zw(this.diagnosticRecord._classification),this.rawClassification=this.diagnosticRecord._classification,this.isNotification=r.neo4j_code!=null,Object.freeze(this)}return Object.defineProperty(e.prototype,"diagnosticRecordAsJsonString",{get:function(){return pR.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),e}();Pe.GqlStatusObject=Rn;function xw(e){var r,t,n;if(e.neo4j_code!=null)return new El({code:e.neo4j_code,title:e.title,description:e.description,severity:(r=e.diagnostic_record)===null||r===void 0?void 0:r._severity,category:(t=e.diagnostic_record)===null||t===void 0?void 0:t._classification,position:(n=e.diagnostic_record)===null||n===void 0?void 0:n._position})}Pe.polyfillNotification=xw;function Bw(e){var r,t=e.severity===Fa.WARNING?Gp.WARNING:Gp.INFORMATION,n={gql_status:t.gql_status,status_description:(r=e.description)!==null&&r!==void 0?r:t.status_description,neo4j_code:e.code,title:e.title,diagnostic_record:Ea({},ia.rawPolyfilledDiagnosticRecord)};return e.severity!=null&&(n.diagnostic_record._severity=e.severity),e.category!=null&&(n.diagnostic_record._classification=e.category),e.position!=null&&(n.diagnostic_record._position=e.position),new Rn(n)}Pe.polyfillGqlStatusObject=Bw;var aa={SUCCESS:new Rn({gql_status:"00000",status_description:"note: successful completion",diagnostic_record:ia.rawPolyfilledDiagnosticRecord}),NO_DATA:new Rn({gql_status:"02000",status_description:"note: no data",diagnostic_record:ia.rawPolyfilledDiagnosticRecord}),NO_DATA_UNKNOWN_SUBCONDITION:new Rn(Ea(Ea({},Gp.NO_DATA),{diagnostic_record:ia.rawPolyfilledDiagnosticRecord})),OMITTED_RESULT:new Rn({gql_status:"00001",status_description:"note: successful completion - omitted result",diagnostic_record:ia.rawPolyfilledDiagnosticRecord})};Object.freeze(aa);function yR(e){var r,t;function n(a){return(a==null?void 0:a.have_records_streamed)===!0?aa.SUCCESS:(a==null?void 0:a.has_keys)===!1?aa.OMITTED_RESULT:(a==null?void 0:a.pulled)===!0?aa.NO_DATA:aa.NO_DATA_UNKNOWN_SUBCONDITION}if(e.statuses!=null)return e.statuses.map(function(a){return new Rn(a)});var o=n(e.stream_summary),i=hR([o],dR((t=(r=e.notifications)===null||r===void 0?void 0:r.map(Bw))!==null&&t!==void 0?t:[]),!1);return i.sort(function(a,s){return nb(a)-nb(s)})}Pe.buildGqlStatusObjectFromMetadata=yR;var bR=Object.freeze({"02":0,"01":1,"00":2});function nb(e){var r,t,n=(r=e.gqlStatus)===null||r===void 0?void 0:r.slice(0,2);return(t=bR[n])!==null&&t!==void 0?t:9999}function mR(e){return e.notifications!=null?e.notifications.map(function(r){return new El(r)}):e.statuses!=null?e.statuses.map(xw).filter(function(r){return r!=null}):[]}Pe.buildNotificationsFromMetadata=mR;function Vw(e){return e==null?{}:{offset:qh.util.toNumber(e.offset),line:qh.util.toNumber(e.line),column:qh.util.toNumber(e.column)}}function Ww(e){return vR.includes(e)?e:Fa.UNKNOWN}function zw(e){return _R.includes(e)?e:Fw.UNKNOWN}Pe.default=El;Object.defineProperty(Qe,"__esModule",{value:!0});Qe.Stats=Qe.QueryStatistics=Qe.ProfiledPlan=Qe.Plan=Qe.ServerInfo=Qe.queryType=void 0;var Kp=oe,ob=Pe,gR=function(){function e(r,t,n,o){var i,a,s;this.query={text:r,parameters:t},this.queryType=n.type,this.counters=new qw((i=n.stats)!==null&&i!==void 0?i:{}),this.updateStatistics=this.counters,this.plan=n.plan!=null||n.profile!=null?new Yp((a=n.plan)!==null&&a!==void 0?a:n.profile):!1,this.profile=n.profile!=null?new Zp(n.profile):!1,this.notifications=(0,ob.buildNotificationsFromMetadata)(n),this.gqlStatusObjects=(0,ob.buildGqlStatusObjectFromMetadata)(n),this.server=new Hw(n.server,o),this.resultConsumedAfter=n.result_consumed_after,this.resultAvailableAfter=n.result_available_after,this.database={name:(s=n.db)!==null&&s!==void 0?s:null}}return e.prototype.hasPlan=function(){return this.plan instanceof Yp},e.prototype.hasProfile=function(){return this.profile instanceof Zp},e}(),Yp=function(){function e(r){this.operatorType=r.operatorType,this.identifiers=r.identifiers,this.arguments=r.args,this.children=r.children!=null?r.children.map(function(t){return new e(t)}):[]}return e}();Qe.Plan=Yp;var Zp=function(){function e(r){this.operatorType=r.operatorType,this.identifiers=r.identifiers,this.arguments=r.args,this.dbHits=_o("dbHits",r),this.rows=_o("rows",r),this.pageCacheMisses=_o("pageCacheMisses",r),this.pageCacheHits=_o("pageCacheHits",r),this.pageCacheHitRatio=_o("pageCacheHitRatio",r),this.time=_o("time",r),this.children=r.children!=null?r.children.map(function(t){return new e(t)}):[]}return e.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},e}();Qe.ProfiledPlan=Zp;var wR=function(){function e(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0}return e}();Qe.Stats=wR;var qw=function(){function e(r){var t=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(r).forEach(function(n){var o=n.replace(/(-\w)/g,function(i){return i[1].toUpperCase()});o in t._stats?t._stats[o]=Kp.util.toNumber(r[n]):o==="systemUpdates"?t._systemUpdates=Kp.util.toNumber(r[n]):o==="containsSystemUpdates"?t._containsSystemUpdates=r[n]:o==="containsUpdates"&&(t._containsUpdates=r[n])}),this._stats=Object.freeze(this._stats)}return e.prototype.containsUpdates=function(){var r=this;return this._containsUpdates!==void 0?this._containsUpdates:Object.keys(this._stats).reduce(function(t,n){return t+r._stats[n]},0)>0},e.prototype.updates=function(){return this._stats},e.prototype.containsSystemUpdates=function(){return this._containsSystemUpdates!==void 0?this._containsSystemUpdates:this._systemUpdates>0},e.prototype.systemUpdates=function(){return this._systemUpdates},e}();Qe.QueryStatistics=qw;var Hw=function(){function e(r,t){r!=null&&(this.address=r.address,this.agent=r.version),this.protocolVersion=t}return e}();Qe.ServerInfo=Hw;function _o(e,r,t){if(t===void 0&&(t=0),r!==!1&&e in r){var n=r[e];return Kp.util.toNumber(n)}else return t}var OR={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"};Qe.queryType=OR;Qe.default=gR;var vr={};Object.defineProperty(vr,"__esModule",{value:!0});vr.notificationFilterDisabledClassification=vr.notificationFilterDisabledCategory=vr.notificationFilterMinimumSeverityLevel=void 0;var Gw={OFF:"OFF",WARNING:"WARNING",INFORMATION:"INFORMATION"};vr.notificationFilterMinimumSeverityLevel=Gw;Object.freeze(Gw);var n_={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",DEPRECATION:"DEPRECATION",GENERIC:"GENERIC",SCHEMA:"SCHEMA"};vr.notificationFilterDisabledCategory=n_;Object.freeze(n_);var ER=n_;vr.notificationFilterDisabledClassification=ER;var SR=function(){function e(){throw this.minimumSeverityLevel=void 0,this.disabledCategories=void 0,this.disabledClassifications=void 0,new Error("Not implemented")}return e}();vr.default=SR;var xa={},_n=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},yn=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},PR=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Kw;Object.defineProperty(xa,"__esModule",{value:!0});var TR=PR(Qe),Yw=oe,qi=le,CR=Yw.connectionHolder.EMPTY_CONNECTION_HOLDER,AR=function(e){console.log("Uncaught error when processing result: "+e)},IR=function(e){},RR=function(e){},jR=function(){function e(r,t,n,o,i){i===void 0&&(i={high:Number.MAX_VALUE,low:Number.MAX_VALUE}),this[Kw]="Result",this._stack=$R(),this._streamObserverPromise=r,this._p=null,this._query=t,this._parameters=n??{},this._connectionHolder=o??CR,this._keys=null,this._summary=null,this._error=null,this._watermarks=i}return e.prototype.keys=function(){var r=this;return this._keys!==null?Promise.resolve(this._keys):this._error!==null?Promise.reject(this._error):new Promise(function(t,n){r._streamObserverPromise.then(function(o){return o.subscribe(r._decorateObserver({onKeys:function(i){return t(i)},onError:function(i){return n(i)}}))}).catch(n)})},e.prototype.summary=function(){var r=this;return this._summary!==null?Promise.resolve(this._summary):this._error!==null?Promise.reject(this._error):new Promise(function(t,n){r._streamObserverPromise.then(function(o){o.cancel(),o.subscribe(r._decorateObserver({onCompleted:function(i){return t(i)},onError:function(i){return n(i)}}))}).catch(n)})},e.prototype._getOrCreatePromise=function(){var r=this;return this._p==null&&(this._p=new Promise(function(t,n){var o=[],i={onNext:function(a){o.push(a)},onCompleted:function(a){t({records:o,summary:a})},onError:function(a){n(a)}};r.subscribe(i)})),this._p},e.prototype[Symbol.asyncIterator]=function(){var r=this;if(!this.isOpen()){var t=(0,qi.newError)("Result is already consumed");return{next:function(){return Promise.reject(t)},peek:function(){return Promise.reject(t)}}}var n={paused:!0,firstRun:!0,finished:!1},o=function(){var s,c;if(n.streaming!=null){var u=(c=(s=n.queuedObserver)===null||s===void 0?void 0:s.size)!==null&&c!==void 0?c:0,l=u>=r._watermarks.high,d=u<=r._watermarks.low;l&&!n.paused?(n.paused=!0,n.streaming.pause()):(d&&n.paused||n.firstRun&&!l)&&(n.firstRun=!1,n.paused=!1,n.streaming.resume())}},i=function(){return _n(r,void 0,void 0,function(){var s;return yn(this,function(c){switch(c.label){case 0:return n.queuedObserver!==void 0?[3,2]:(n.queuedObserver=this._createQueuedResultObserver(o),s=n,[4,this._subscribe(n.queuedObserver,!0).catch(function(){})]);case 1:s.streaming=c.sent(),o(),c.label=2;case 2:return[2,n.queuedObserver]}})})},a=function(s){if(s===void 0)throw(0,qi.newError)("InvalidState: Result stream finished without Summary",qi.PROTOCOL_ERROR);return!0};return{next:function(){return _n(r,void 0,void 0,function(){var s,c;return yn(this,function(u){switch(u.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:n.summary}]:[4,i()];case 1:return s=u.sent(),[4,s.dequeue()];case 2:return c=u.sent(),c.done===!0&&(n.finished=c.done,n.summary=c.value),[2,c]}})})},return:function(s){return _n(r,void 0,void 0,function(){var c,u,l;return yn(this,function(d){switch(d.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:s??n.summary}]:((l=n.streaming)===null||l===void 0||l.cancel(),[4,i()]);case 1:return c=d.sent(),[4,c.dequeueUntilDone()];case 2:return u=d.sent(),n.finished=!0,u.value=s??u.value,n.summary=u.value,[2,u]}})})},peek:function(){return _n(r,void 0,void 0,function(){var s;return yn(this,function(c){switch(c.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:n.summary}]:[4,i()];case 1:return s=c.sent(),[4,s.head()];case 2:return[2,c.sent()]}})})}}},e.prototype.then=function(r,t){return this._getOrCreatePromise().then(r,t)},e.prototype.catch=function(r){return this._getOrCreatePromise().catch(r)},e.prototype.finally=function(r){return this._getOrCreatePromise().finally(r)},e.prototype.subscribe=function(r){this._subscribe(r).catch(function(){})},e.prototype.isOpen=function(){return this._summary===null&&this._error===null},e.prototype._subscribe=function(r,t){t===void 0&&(t=!1);var n=this._decorateObserver(r);return this._streamObserverPromise.then(function(o){return t&&o.pause(),o.subscribe(n),o}).catch(function(o){return n.onError!=null&&n.onError(o),Promise.reject(o)})},e.prototype._decorateObserver=function(r){var t=this,n,o,i,a=(n=r.onCompleted)!==null&&n!==void 0?n:IR,s=(o=r.onError)!==null&&o!==void 0?o:AR,c=(i=r.onKeys)!==null&&i!==void 0?i:RR,u=function(h){t._releaseConnectionAndGetSummary(h).then(function(p){return t._summary!==null?a.call(r,t._summary):(t._summary=p,a.call(r,p))}).catch(s)},l=function(h){t._connectionHolder.releaseConnection().then(function(){NR(h,t._stack),t._error=h,s.call(r,h)}).catch(s)},d=function(h){return t._keys=h,c.call(r,h)};return{onNext:r.onNext!=null?r.onNext.bind(r):void 0,onKeys:d,onCompleted:u,onError:l}},e.prototype._cancel=function(){this._summary===null&&this._error===null&&this._streamObserverPromise.then(function(r){return r.cancel()}).catch(function(){})},e.prototype._releaseConnectionAndGetSummary=function(r){var t=Yw.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),n=t.validatedQuery,o=t.params,i=this._connectionHolder;return i.getConnection().then(function(a){return i.releaseConnection().then(function(){return a==null?void 0:a.getProtocolVersion()})},function(a){}).then(function(a){return new TR.default(n,o,r,a)})},e.prototype._createQueuedResultObserver=function(r){var t=this;function n(){var u={};return u.promise=new Promise(function(l,d){u.resolve=l,u.reject=d}),u}function o(u){return u instanceof Error}function i(){var u;return _n(this,void 0,void 0,function(){var l;return yn(this,function(d){switch(d.label){case 0:if(a.length>0){if(l=(u=a.shift())!==null&&u!==void 0?u:(0,qi.newError)("Unexpected empty buffer",qi.PROTOCOL_ERROR),r(),o(l))throw l;return[2,l]}return s.resolvable=n(),[4,s.resolvable.promise];case 1:return[2,d.sent()]}})})}var a=[],s={resolvable:null},c={onNext:function(u){c._push({done:!1,value:u})},onCompleted:function(u){c._push({done:!0,value:u})},onError:function(u){c._push(u)},_push:function(u){if(s.resolvable!==null){var l=s.resolvable;s.resolvable=null,o(u)?l.reject(u):l.resolve(u)}else a.push(u),r()},dequeue:i,dequeueUntilDone:function(){return _n(t,void 0,void 0,function(){var u;return yn(this,function(l){switch(l.label){case 0:return[4,i()];case 1:return u=l.sent(),u.done===!0?[2,u]:[3,0];case 2:return[2]}})})},head:function(){return _n(t,void 0,void 0,function(){var u,u,l;return yn(this,function(d){switch(d.label){case 0:if(a.length>0){if(u=a[0],o(u))throw u;return[2,u]}s.resolvable=n(),d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,s.resolvable.promise];case 2:return u=d.sent(),a.unshift(u),[2,u];case 3:throw l=d.sent(),a.unshift(l),l;case 4:return r(),[7];case 5:return[2]}})})},get size(){return a.length}};return c},e}();Kw=Symbol.toStringTag;function $R(){var e=new Error("");return e.stack!=null?e.stack.replace(/^Error(\n\r)*/,""):null}function NR(e,r){r!=null&&(e.stack=e.toString()+`
`+r)}xa.default=jR;var Sl={};Object.defineProperty(Sl,"__esModule",{value:!0});var kR=function(){function e(r,t,n){this.keys=r,this.records=t,this.summary=n}return e}();Sl.default=kR;var Ba={};Object.defineProperty(Ba,"__esModule",{value:!0});Ba.Releasable=void 0;var MR=function(){function e(){}return e.prototype.release=function(){throw new Error("Not implemented")},e}();Ba.Releasable=MR;var DR=function(){function e(){}return e.prototype.acquireConnection=function(r){throw Error("Not implemented")},e.prototype.supportsMultiDb=function(){throw Error("Not implemented")},e.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},e.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},e.prototype.supportsSessionAuth=function(){throw Error("Not implemented")},e.prototype.SSREnabled=function(){return!1},e.prototype.verifyConnectivityAndGetServerInfo=function(r){throw Error("Not implemented")},e.prototype.verifyAuthentication=function(r){throw Error("Not implemented")},e.prototype.getNegotiatedProtocolVersion=function(){throw Error("Not Implemented")},e.prototype.close=function(){throw Error("Not implemented")},e}();Ba.default=DR;var o_={};Object.defineProperty(o_,"__esModule",{value:!0});var LR=function(){function e(){}return e.prototype.beginTransaction=function(r){throw new Error("Not implemented")},e.prototype.run=function(r,t,n){throw new Error("Not implemented")},e.prototype.commitTransaction=function(r){throw new Error("Not implemented")},e.prototype.rollbackTransaction=function(r){throw new Error("Not implemented")},e.prototype.resetAndFlush=function(){throw new Error("Not implemented")},e.prototype.isOpen=function(){throw new Error("Not implemented")},e.prototype.getProtocolVersion=function(){throw new Error("Not implemented")},e.prototype.hasOngoingObservableRequests=function(){throw new Error("Not implemented")},e}();o_.default=LR;var Pl={},ib=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},ab=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},UR=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pl,"__esModule",{value:!0});var FR=re,va=Mt,Ic=en,xR=Zo,Rt=xr,$t=le,Zw=UR(xa),BR=function(){function e(r){var t=r.connectionHolder,n=r.onClose,o=r.onBookmarks,i=r.onConnection,a=r.reactive,s=r.fetchSize,c=r.impersonatedUser,u=r.highRecordWatermark,l=r.lowRecordWatermark,d=r.notificationFilter,h=r.apiTelemetryConfig,p=this;this._connectionHolder=t,this._reactive=a,this._state=wt.ACTIVE,this._onClose=n,this._onBookmarks=o,this._onConnection=i,this._onError=this._onErrorCallback.bind(this),this._fetchSize=s,this._onComplete=this._onCompleteCallback.bind(this),this._results=[],this._impersonatedUser=c,this._lowRecordWatermak=l,this._highRecordWatermark=u,this._bookmarks=Ic.Bookmarks.empty(),this._notificationFilter=d,this._apiTelemetryConfig=h,this._acceptActive=function(){},this._activePromise=new Promise(function(v,_){p._acceptActive=v})}return e.prototype._begin=function(r,t,n){var o=this;this._connectionHolder.getConnection().then(function(i){return ib(o,void 0,void 0,function(){var a,s=this;return ab(this,function(c){switch(c.label){case 0:return this._onConnection(),i==null?[3,2]:(a=this,[4,r()]);case 1:return a._bookmarks=c.sent(),[2,i.beginTransaction({bookmarks:this._bookmarks,txConfig:t,mode:this._connectionHolder.mode(),database:this._connectionHolder.database(),impersonatedUser:this._impersonatedUser,notificationFilter:this._notificationFilter,apiTelemetryConfig:this._apiTelemetryConfig,beforeError:function(u){n!=null&&n.onError(u),s._onError(u).catch(function(){})},afterComplete:function(u){n!=null&&n.onComplete(u),u.db!==void 0&&(n==null?void 0:n.onDB)!=null&&n.onDB(u.db),s._onComplete(u)}})];case 2:throw(0,$t.newError)("No connection available")}})})}).catch(function(i){n!=null&&n.onError(i),o._onError(i).catch(function(){})}).finally(function(){return o._acceptActive()})},e.prototype.run=function(r,t){var n=(0,FR.validateQueryAndParameters)(r,t),o=n.validatedQuery,i=n.params,a=this._state.run(o,i,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize,highRecordWatermark:this._highRecordWatermark,lowRecordWatermark:this._lowRecordWatermak,preparationJob:this._activePromise});return this._results.push(a),a},e.prototype.commit=function(){var r=this,t=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:function(n){return r._onCompleteCallback(n,r._bookmarks)},onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=t.state,this._onClose(),new Promise(function(n,o){t.result.subscribe({onCompleted:function(){return n()},onError:function(i){return o(i)}})})},e.prototype.rollback=function(){var r=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=r.state,this._onClose(),new Promise(function(t,n){r.result.subscribe({onCompleted:function(){return t()},onError:function(o){return n(o)}})})},e.prototype.isOpen=function(){return this._state===wt.ACTIVE},e.prototype.close=function(){return ib(this,void 0,void 0,function(){return ab(this,function(r){switch(r.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._onErrorCallback=function(r){return this._state===wt.FAILED?Promise.resolve(null):(this._state=wt.FAILED,this._onClose(),this._results.forEach(function(t){t.isOpen()&&t._streamObserverPromise.then(function(n){return n.onError(r)}).catch(function(n){})}),this._connectionHolder.releaseConnection())},e.prototype._onCompleteCallback=function(r,t){this._onBookmarks(new Ic.Bookmarks(r==null?void 0:r.bookmark),t??Ic.Bookmarks.empty(),r==null?void 0:r.db)},e}(),wt={ACTIVE:{commit:function(e){var r=e.connectionHolder,t=e.onError,n=e.onComplete,o=e.onConnection,i=e.pendingResults,a=e.preparationJob;return{result:ub(!0,r,t,n,o,i,a),state:wt.SUCCEEDED}},rollback:function(e){var r=e.connectionHolder,t=e.onError,n=e.onComplete,o=e.onConnection,i=e.pendingResults,a=e.preparationJob;return{result:ub(!1,r,t,n,o,i,a),state:wt.ROLLED_BACK}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError,i=t.onComplete,a=t.onConnection,s=t.reactive,c=t.fetchSize,u=t.highRecordWatermark,l=t.lowRecordWatermark,d=t.preparationJob,h=d??Promise.resolve(),p=n.getConnection().then(function(v){return h.then(function(){return v})}).then(function(v){if(a(),v!=null)return v.run(e,r,{bookmarks:Ic.Bookmarks.empty(),txConfig:xR.TxConfig.empty(),beforeError:o,afterComplete:i,reactive:s,fetchSize:c,highRecordWatermark:u,lowRecordWatermark:l});throw(0,$t.newError)("No connection available")}).catch(function(v){return new Rt.FailedObserver({error:v,onError:o})});return zt(p,e,r,n,u,l)}},FAILED:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:zt(new Rt.FailedObserver({error:(0,$t.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:t}),"COMMIT",{},r,0,0),state:wt.FAILED}},rollback:function(e){var r=e.connectionHolder;return e.onError,e.onComplete,{result:zt(new Rt.CompletedObserver,"ROLLBACK",{},r,0,0),state:wt.FAILED}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError;return t.onComplete,zt(new Rt.FailedObserver({error:(0,$t.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:o}),e,r,n,0,0)}},SUCCEEDED:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:zt(new Rt.FailedObserver({error:(0,$t.newError)("Cannot commit this transaction, because it has already been committed."),onError:t}),"COMMIT",{},va.EMPTY_CONNECTION_HOLDER,0,0),state:wt.SUCCEEDED,connectionHolder:r}},rollback:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:zt(new Rt.FailedObserver({error:(0,$t.newError)("Cannot rollback this transaction, because it has already been committed."),onError:t}),"ROLLBACK",{},va.EMPTY_CONNECTION_HOLDER,0,0),state:wt.SUCCEEDED,connectionHolder:r}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError;return t.onComplete,zt(new Rt.FailedObserver({error:(0,$t.newError)("Cannot run query in this transaction, because it has already been committed."),onError:o}),e,r,n,0,0)}},ROLLED_BACK:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:zt(new Rt.FailedObserver({error:(0,$t.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:t}),"COMMIT",{},r,0,0),state:wt.ROLLED_BACK}},rollback:function(e){var r=e.connectionHolder;return e.onError,e.onComplete,{result:zt(new Rt.FailedObserver({error:(0,$t.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},r,0,0),state:wt.ROLLED_BACK}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError;return t.onComplete,zt(new Rt.FailedObserver({error:(0,$t.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:o}),e,r,n,0,0)}}};function ub(e,r,t,n,o,i,a){var s=a??Promise.resolve(),c=r.getConnection().then(function(u){return s.then(function(){return u})}).then(function(u){return o(),i.forEach(function(l){return l._cancel()}),Promise.all(i.map(function(l){return l.summary()})).then(function(l){if(u!=null)return e?u.commitTransaction({beforeError:t,afterComplete:n}):u.rollbackTransaction({beforeError:t,afterComplete:n});throw(0,$t.newError)("No connection available")})}).catch(function(u){return new Rt.FailedObserver({error:u,onError:t})});return new Zw.default(c,e?"COMMIT":"ROLLBACK",{},r,{high:Number.MAX_VALUE,low:Number.MAX_VALUE})}function zt(e,r,t,n,o,i){return n===void 0&&(n=va.EMPTY_CONNECTION_HOLDER),new Zw.default(Promise.resolve(e),r,t,new va.ReadOnlyConnectionHolder(n??va.EMPTY_CONNECTION_HOLDER),{low:i,high:o})}Pl.default=BR;var Tl={};Object.defineProperty(Tl,"__esModule",{value:!0});var VR=function(){function e(r){var t=r.run;this._run=t}return e.fromTransaction=function(r){return new e({run:r.run.bind(r)})},e.prototype.run=function(r,t){return this._run(r,t)},e}();Tl.default=VR;var Cl={},WR=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fc=f&&f.__assign||function(){return Fc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Fc.apply(this,arguments)},zR=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Qw;Object.defineProperty(Cl,"__esModule",{value:!0});var qR=zR(Pl),HR=function(e){WR(r,e);function r(t){var n=t.connectionHolder,o=t.onClose,i=t.onBookmarks,a=t.onConnection,s=t.reactive,c=t.fetchSize,u=t.impersonatedUser,l=t.highRecordWatermark,d=t.lowRecordWatermark,h=t.notificationFilter,p=t.apiTelemetryConfig,v=t.onDbCallback,_=e.call(this,{connectionHolder:n,onClose:o,onBookmarks:i,onConnection:a,reactive:s,fetchSize:c,impersonatedUser:u,highRecordWatermark:l,lowRecordWatermark:d,notificationFilter:h,apiTelemetryConfig:p})||this;return _[Qw]="TransactionPromise",_._onDbCallback=v,_}return r.prototype.then=function(t,n){return this._getOrCreateBeginPromise().then(t,n)},r.prototype.catch=function(t){return this._getOrCreateBeginPromise().catch(t)},r.prototype.finally=function(t){return this._getOrCreateBeginPromise().finally(t)},r.prototype._getOrCreateBeginPromise=function(){var t=this;return this._beginPromise==null&&(this._beginPromise=new Promise(function(n,o){t._resolve=n,t._reject=o,t._beginError!=null&&o(t._beginError),t._beginMetadata!=null&&n(t._toTransaction())})),this._beginPromise},r.prototype._toTransaction=function(){return Fc(Fc({},this),{run:e.prototype.run.bind(this),commit:e.prototype.commit.bind(this),rollback:e.prototype.rollback.bind(this),close:e.prototype.close.bind(this),isOpen:e.prototype.isOpen.bind(this),_begin:this._begin.bind(this)})},r.prototype._begin=function(t,n){return e.prototype._begin.call(this,t,n,{onError:this._onBeginError.bind(this),onComplete:this._onBeginMetadata.bind(this),onDB:this._onDbCallback})},r.prototype._onBeginError=function(t){this._beginError=t,this._reject!=null&&this._reject(t)},r.prototype._onBeginMetadata=function(t){this._beginMetadata=t??{},this._resolve!=null&&this._resolve(this._toTransaction())},r}(qR.default);Qw=Symbol.toStringTag;Cl.default=HR;var Al={},Va={};Object.defineProperty(Va,"__esModule",{value:!0});Va.cacheKey=void 0;var GR=Lt;function KR(e,r){var t;return r!=null?"basic:"+r:e===void 0?"DEFAULT":e.scheme==="basic"?"basic:"+((t=e.principal)!==null&&t!==void 0?t:""):e.scheme==="kerberos"?"kerberos:"+e.credentials:e.scheme==="bearer"?"bearer:"+e.credentials:e.scheme==="none"?"none":(0,GR.stringify)(e,{sortedElements:!0})}Va.cacheKey=KR;var Hi=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Gi=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},rc=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},nc=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))},i_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Al,"__esModule",{value:!0});var YR=xr,ZR=re,at=z,bn=le,QR=i_(xa),sb=Mt,XR=La,Ki=en,Ar=Zo,JR=i_(Cl),ej=i_(Tl),tj=Va,rj=function(){function e(r){var t=r.mode,n=r.connectionProvider,o=r.bookmarks,i=r.database,a=r.config,s=r.reactive,c=r.fetchSize,u=r.impersonatedUser,l=r.bookmarkManager,d=r.notificationFilter,h=r.auth,p=r.log,v=r.homeDatabaseCallback,_;this._mode=t,this._database=i,this._reactive=s,this._fetchSize=c,this._homeDatabaseCallback=v,this._auth=h,this._getConnectionAcquistionBookmarks=this._getConnectionAcquistionBookmarks.bind(this),this._readConnectionHolder=new sb.ConnectionHolder({mode:at.ACCESS_MODE_READ,auth:h,database:i,bookmarks:o,connectionProvider:n,impersonatedUser:u,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:p}),this._writeConnectionHolder=new sb.ConnectionHolder({mode:at.ACCESS_MODE_WRITE,auth:h,database:i,bookmarks:o,connectionProvider:n,impersonatedUser:u,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:p}),this._open=!0,this._hasTx=!1,this._impersonatedUser=u,this._lastBookmarks=o??Ki.Bookmarks.empty(),this._configuredBookmarks=this._lastBookmarks,this._transactionExecutor=nj(a),this._databaseNameResolved=this._database!=="";var b=this._calculateWatermaks();this._lowRecordWatermark=b.low,this._highRecordWatermark=b.high,this._results=[],this._bookmarkManager=l,this._notificationFilter=d,this._log=p,this._databaseGuess=a==null?void 0:a.cachedHomeDatabase,this._isRoutingSession=(_=a==null?void 0:a.routingDriver)!==null&&_!==void 0?_:!1}return e.prototype.run=function(r,t,n){var o=this,i=(0,ZR.validateQueryAndParameters)(r,t),a=i.validatedQuery,s=i.params,c=n!=null?new Ar.TxConfig(n,this._log):Ar.TxConfig.empty(),u=this._run(a,s,function(l){return Hi(o,void 0,void 0,function(){var d,h=this;return Gi(this,function(p){switch(p.label){case 0:return[4,this._bookmarks()];case 1:return d=p.sent(),this._assertSessionIsOpen(),[2,l.run(a,s,{bookmarks:d,txConfig:c,mode:this._mode,database:this._database,apiTelemetryConfig:{api:at.TELEMETRY_APIS.AUTO_COMMIT_TRANSACTION},impersonatedUser:this._impersonatedUser,afterComplete:function(v){return h._onCompleteCallback(v,d)},reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,onDb:this._onDatabaseNameResolved.bind(this)})]}})})});return this._results.push(u),u},e.prototype._run=function(r,t,n){var o=this._acquireAndConsumeConnection(n),i=o.connectionHolder,a=o.resultPromise,s=a.catch(function(u){return Promise.resolve(new YR.FailedObserver({error:u}))}),c={high:this._highRecordWatermark,low:this._lowRecordWatermark};return new QR.default(s,r,t,i,c)},e.prototype._acquireConnection=function(r){var t=this,n=this._acquireAndConsumeConnection(r),o=n.connectionHolder,i=n.resultPromise;return i.then(function(a){return Hi(t,void 0,void 0,function(){return Gi(this,function(s){switch(s.label){case 0:return[4,o.releaseConnection()];case 1:return s.sent(),[2,a]}})})})},e.prototype._acquireAndConsumeConnection=function(r){var t,n=this._connectionHolderWithMode(this._mode);return this._open?!this._hasTx&&n.initializeConnection(this._databaseGuess)?t=n.getConnection().then(function(o){return r(o)}):t=Promise.reject((0,bn.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):t=Promise.reject((0,bn.newError)("Cannot run query in a closed session.")),{connectionHolder:n,resultPromise:t}},e.prototype.beginTransaction=function(r){var t=r,n=Ar.TxConfig.empty();return t!=null&&(n=new Ar.TxConfig(t,this._log)),this._beginTransaction(this._mode,n,{api:at.TELEMETRY_APIS.UNMANAGED_TRANSACTION})},e.prototype._beginTransaction=function(r,t,n){var o=this;if(!this._open)throw(0,bn.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,bn.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var i=e._validateSessionMode(r),a=this._connectionHolderWithMode(i);a.initializeConnection(this._databaseGuess),this._hasTx=!0;var s=new JR.default({connectionHolder:a,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmarks:function(c,u,l){return o._updateBookmarks(c,u,l)},onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,apiTelemetryConfig:n,onDbCallback:this._onDatabaseNameResolved.bind(this)});return s._begin(function(){return o._bookmarks()},t),s},e.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,bn.newError)("You cannot run more transactions on a closed session.")},e.prototype._transactionClosed=function(){this._hasTx=!1},e.prototype.lastBookmark=function(){return this.lastBookmarks()},e.prototype.lastBookmarks=function(){return this._lastBookmarks.values()},e.prototype._bookmarks=function(){var r;return Hi(this,void 0,void 0,function(){var t;return Gi(this,function(n){switch(n.label){case 0:return[4,(r=this._bookmarkManager)===null||r===void 0?void 0:r.getBookmarks()];case 1:return t=n.sent(),t===void 0?[2,this._lastBookmarks]:[2,new Ki.Bookmarks(nc(nc([],rc(t),!1),rc(this._configuredBookmarks),!1))]}})})},e.prototype.readTransaction=function(r,t){var n=new Ar.TxConfig(t,this._log);return this._runTransaction(at.ACCESS_MODE_READ,n,r)},e.prototype.writeTransaction=function(r,t){var n=new Ar.TxConfig(t,this._log);return this._runTransaction(at.ACCESS_MODE_WRITE,n,r)},e.prototype._runTransaction=function(r,t,n){var o=this;return this._transactionExecutor.execute(function(i){return o._beginTransaction(r,t,i)},n)},e.prototype.executeRead=function(r,t){var n=new Ar.TxConfig(t,this._log);return this._executeInTransaction(at.ACCESS_MODE_READ,n,r)},e.prototype.executeWrite=function(r,t){var n=new Ar.TxConfig(t,this._log);return this._executeInTransaction(at.ACCESS_MODE_WRITE,n,r)},e.prototype._executeInTransaction=function(r,t,n){var o=this;return this._transactionExecutor.execute(function(i){return o._beginTransaction(r,t,i)},n,ej.default.fromTransaction)},e.prototype._onDatabaseNameResolved=function(r){if(this._isRoutingSession&&(this._databaseGuess=r,!this._databaseNameResolved)){var t=r??"";this._database=t,this._readConnectionHolder.setDatabase(t),this._writeConnectionHolder.setDatabase(t),this._databaseNameResolved=!0,this._homeDatabaseCallback!=null&&this._homeDatabaseCallback((0,tj.cacheKey)(this._auth,this._impersonatedUser),r)}},e.prototype._getConnectionAcquistionBookmarks=function(){var r;return Hi(this,void 0,void 0,function(){var t;return Gi(this,function(n){switch(n.label){case 0:return[4,(r=this._bookmarkManager)===null||r===void 0?void 0:r.getBookmarks()];case 1:return t=n.sent(),t===void 0?[2,this._lastBookmarks]:[2,new Ki.Bookmarks(nc(nc([],rc(this._configuredBookmarks),!1),rc(t),!1))]}})})},e.prototype._updateBookmarks=function(r,t,n){var o,i,a;r!=null&&!r.isEmpty()&&((o=this._bookmarkManager)===null||o===void 0||o.updateBookmarks((i=t==null?void 0:t.values())!==null&&i!==void 0?i:[],(a=r==null?void 0:r.values())!==null&&a!==void 0?a:[]).catch(function(){}),this._lastBookmarks=r,this._configuredBookmarks=Ki.Bookmarks.empty())},e.prototype.close=function(){return Hi(this,void 0,void 0,function(){return Gi(this,function(r){switch(r.label){case 0:return this._open?(this._open=!1,this._results.forEach(function(t){return t._cancel()}),this._transactionExecutor.close(),[4,this._readConnectionHolder.close(this._hasTx)]):[3,3];case 1:return r.sent(),[4,this._writeConnectionHolder.close(this._hasTx)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._connectionHolderWithMode=function(r){if(r===at.ACCESS_MODE_READ)return this._readConnectionHolder;if(r===at.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,bn.newError)("Unknown access mode: "+r)},e.prototype._onCompleteCallback=function(r,t){this._updateBookmarks(new Ki.Bookmarks(r.bookmark),t,r.db)},e.prototype._calculateWatermaks=function(){return this._fetchSize===at.FETCH_ALL?{low:Number.MAX_VALUE,high:Number.MAX_VALUE}:{low:.3*this._fetchSize,high:.7*this._fetchSize}},e.prototype._configureTransactionExecutor=function(r,t){this._transactionExecutor.pipelineBegin=r,this._transactionExecutor.telemetryApi=t},e._validateSessionMode=function(r){var t=r??at.ACCESS_MODE_WRITE;if(t!==at.ACCESS_MODE_READ&&t!==at.ACCESS_MODE_WRITE)throw(0,bn.newError)("Illegal session mode "+t);return t},e}();function nj(e){var r,t=(r=e==null?void 0:e.maxTransactionRetryTime)!==null&&r!==void 0?r:null;return new XR.TransactionExecutor(t)}Al.default=rj;var Xe={},Qo={},xc=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Bc=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Hh=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},cb=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},lb=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(Qo,"__esModule",{value:!0});Qo.bookmarkManager=void 0;var oj=function(){function e(){throw new Error("Not implemented")}return e.prototype.updateBookmarks=function(r,t){return xc(this,void 0,void 0,function(){return Bc(this,function(n){throw new Error("Not implemented")})})},e.prototype.getBookmarks=function(){return xc(this,void 0,void 0,function(){return Bc(this,function(r){throw new Error("Not implemented")})})},e}();Qo.default=oj;function ij(e){e===void 0&&(e={});var r=new Set(e.initialBookmarks);return new aj(r,e.bookmarksSupplier,e.bookmarksConsumer)}Qo.bookmarkManager=ij;var aj=function(){function e(r,t,n){this._bookmarks=r,this._bookmarksSupplier=t,this._bookmarksConsumer=n}return e.prototype.updateBookmarks=function(r,t){return xc(this,void 0,void 0,function(){var n,o,i,c,a,s,c,u,l,d,h;return Bc(this,function(p){switch(p.label){case 0:n=this._bookmarks;try{for(o=Hh(r),i=o.next();!i.done;i=o.next())c=i.value,n.delete(c)}catch(v){u={error:v}}finally{try{i&&!i.done&&(l=o.return)&&l.call(o)}finally{if(u)throw u.error}}try{for(a=Hh(t),s=a.next();!s.done;s=a.next())c=s.value,n.add(c)}catch(v){d={error:v}}finally{try{s&&!s.done&&(h=a.return)&&h.call(a)}finally{if(d)throw d.error}}return typeof this._bookmarksConsumer!="function"?[3,2]:[4,this._bookmarksConsumer(lb([],cb(n),!1))];case 1:p.sent(),p.label=2;case 2:return[2]}})})},e.prototype.getBookmarks=function(){var r;return xc(this,void 0,void 0,function(){var t,n,o,i,a,s,c;return Bc(this,function(u){switch(u.label){case 0:return t=new Set(this._bookmarks),typeof this._bookmarksSupplier!="function"?[3,2]:[4,this._bookmarksSupplier()];case 1:n=(r=u.sent())!==null&&r!==void 0?r:[];try{for(o=Hh(n),i=o.next();!i.done;i=o.next())a=i.value,t.add(a)}catch(l){s={error:l}}finally{try{i&&!i.done&&(c=o.return)&&c.call(o)}finally{if(s)throw s.error}}u.label=2;case 2:return[2,lb([],cb(t),!1)]}})})},e}(),Il={},Rl=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},jl=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},uj=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Il,"__esModule",{value:!0});var sj=uj(Sl),cj=le,lj=function(){function e(){}return e.prototype.eagerResultTransformer=function(){return fb},e.prototype.eager=function(){return fb},e.prototype.mappedResultTransformer=function(r){return db(r)},e.prototype.mapped=function(r){return db(r)},e.prototype.first=function(){return fj},e.prototype.summary=function(){return dj},e}(),Xw=new lj;Object.freeze(Xw);Il.default=Xw;function fb(e){return Rl(this,void 0,void 0,function(){var r,t,n,o;return jl(this,function(i){switch(i.label){case 0:return[4,e];case 1:return r=i.sent(),t=r.summary,n=r.records,[4,e.keys()];case 2:return o=i.sent(),[2,new sj.default(o,n,t)]}})})}function db(e){var r=this;if(e==null||e.collect==null&&e.map==null)throw(0,cj.newError)("Requires a map or/and a collect functions.");return function(t){return Rl(r,void 0,void 0,function(){return jl(this,function(n){switch(n.label){case 0:return[4,new Promise(function(o,i){var a={records:[],keys:[]};t.subscribe({onKeys:function(s){a.keys=s},onNext:function(s){if(e.map!=null){var c=e.map(s);c!==void 0&&a.records.push(c)}else a.records.push(s)},onCompleted:function(s){if(e.collect!=null)o(e.collect(a.records,s,a.keys));else{var c={records:a.records,summary:s,keys:a.keys};o(c)}},onError:function(s){i(s)}})})];case 1:return[2,n.sent()]}})})}}function fj(e){return Rl(this,void 0,void 0,function(){var r,t,n,o;return jl(this,function(i){switch(i.label){case 0:return r=e[Symbol.asyncIterator](),[4,r.next()];case 1:t=i.sent(),n=t.value,o=t.done,i.label=2;case 2:return i.trys.push([2,,3,6]),o===!0?[2,void 0]:[2,n];case 3:return r.return==null?[3,5]:[4,r.return()];case 4:i.sent(),i.label=5;case 5:return[7];case 6:return[2]}})})}function dj(e){return Rl(this,void 0,void 0,function(){return jl(this,function(r){switch(r.label){case 0:return[4,e.summary()];case 1:return[2,r.sent()]}})})}var a_={},Gh=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Kh=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(a_,"__esModule",{value:!0});var hj=z,pj=function(){function e(r){this._createSession=r}return e.prototype.execute=function(r,t,n){return Gh(this,void 0,void 0,function(){var o,i,a,s=this;return Kh(this,function(c){switch(c.label){case 0:o=this._createSession({database:r.database,bookmarkManager:r.bookmarkManager,impersonatedUser:r.impersonatedUser,auth:r.auth}),i=vj(r.signal,"abort",function(){return Gh(s,void 0,void 0,function(){return Kh(this,function(u){switch(u.label){case 0:return[4,o.close()];case 1:return[2,u.sent()]}})})}),o._configureTransactionExecutor(!0,hj.TELEMETRY_APIS.EXECUTE_QUERY),c.label=1;case 1:return c.trys.push([1,,3,5]),a=r.routing==="READ"?o.executeRead.bind(o):o.executeWrite.bind(o),[4,a(function(u){return Gh(s,void 0,void 0,function(){var l;return Kh(this,function(d){switch(d.label){case 0:return l=u.run(t,n),[4,r.resultTransformer(l)];case 1:return[2,d.sent()]}})})},r.transactionConfig)];case 2:return[2,c.sent()];case 3:return i.uninstall(),[4,o.close()];case 4:return c.sent(),[7];case 5:return[2]}})})},e}();a_.default=pj;function vj(e,r,t){return typeof(e==null?void 0:e.addEventListener)=="function"&&e.addEventListener(r,t),{uninstall:function(){typeof(e==null?void 0:e.removeEventListener)=="function"&&e.removeEventListener(r,t)}}}var u_={};Object.defineProperty(u_,"__esModule",{value:!0});var _j=function(){function e(r){this.maxSize=r,this.pruneCount=Math.max(Math.round(.01*r*Math.log(r)),1),this.map=new Map}return e.prototype.set=function(r,t){this.map.set(r,{database:t,lastUsed:Date.now()}),this._pruneCache()},e.prototype.get=function(r){var t=this.map.get(r);if(t!==void 0)return t.lastUsed=Date.now(),t.database},e.prototype.delete=function(r){this.map.delete(r)},e.prototype._pruneCache=function(){if(this.map.size>this.maxSize)for(var r=Array.from(this.map.entries()).sort(function(n,o){return n[1].lastUsed-o[1].lastUsed}),t=0;t<this.pruneCount;t++)this.map.delete(r[t][0])},e}();u_.default=_j;var Qp=f&&f.__assign||function(){return Qp=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Qp.apply(this,arguments)},hb=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},pb=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Wa=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.QueryConfig=Xe.SessionConfig=Xe.routing=Xe.WRITE=Xe.READ=Xe.Driver=void 0;var vb=en,yj=Wa(gl),Un=z,bj=Kn,_b=Wa(Al),mj=re,gj=Qo,wj=Wa(Il),Oj=Wa(a_),Ej=le,Sj=Wa(u_),Pj=Va,Tj=60*60*1e3,Cj=1e3,Aj=1e4,Rc=Un.ACCESS_MODE_READ;Xe.READ=Rc;var s_=Un.ACCESS_MODE_WRITE;Xe.WRITE=s_;var Ij=0,Rj=function(){function e(){this.defaultAccessMode=s_,this.bookmarks=[],this.database="",this.impersonatedUser=void 0,this.auth=void 0,this.fetchSize=void 0,this.bookmarkManager=void 0,this.notificationFilter=void 0}return e}();Xe.SessionConfig=Rj;var jj="WRITE",$j="READ",Co={WRITE:jj,READ:$j};Xe.routing=Co;Object.freeze(Co);var Nj=function(){function e(){this.routing=Co.WRITE,this.resultTransformer=void 0,this.database="",this.impersonatedUser=void 0,this.bookmarkManager=void 0,this.transactionConfig=void 0,this.auth=void 0,this.signal=void 0}return e}();Xe.QueryConfig=Nj;var Jw=function(){function e(r,t,n,o,i){t===void 0&&(t={}),o===void 0&&(o=function(s){return new _b.default(s)}),i===void 0&&(i=function(s){return new Oj.default(s)}),Mj(t);var a=bj.Logger.create(t);kj(t,a),this._id=Ij++,this._meta=r,this._config=t,this._log=a,this._createConnectionProvider=n,this._createSession=o,this._defaultExecuteQueryBookmarkManager=(0,gj.bookmarkManager)(),this._queryExecutor=i(this.session.bind(this)),this._connectionProvider=null,this.homeDatabaseCache=new Sj.default(Aj),this._afterConstruction()}return Object.defineProperty(e.prototype,"executeQueryBookmarkManager",{get:function(){return this._defaultExecuteQueryBookmarkManager},enumerable:!1,configurable:!0}),e.prototype.executeQuery=function(r,t,n){var o,i,a;return n===void 0&&(n={}),hb(this,void 0,void 0,function(){var s,c,u;return pb(this,function(l){switch(l.label){case 0:if(s=n.bookmarkManager===null?void 0:(o=n.bookmarkManager)!==null&&o!==void 0?o:this.executeQueryBookmarkManager,c=(i=n.resultTransformer)!==null&&i!==void 0?i:wj.default.eagerResultTransformer(),u=(a=n.routing)!==null&&a!==void 0?a:Co.WRITE,u!==Co.READ&&u!==Co.WRITE)throw(0,Ej.newError)('Illegal query routing config: "'.concat(u,'"'));return[4,this._queryExecutor.execute({resultTransformer:c,bookmarkManager:s,routing:u,database:n.database,impersonatedUser:n.impersonatedUser,transactionConfig:n.transactionConfig,auth:n.auth,signal:n.signal},r,t)];case 1:return[2,l.sent()]}})})},e.prototype.verifyConnectivity=function(r){var t=r===void 0?{}:r,n=t.database,o=n===void 0?"":n,i=this._getOrCreateConnectionProvider();return i.verifyConnectivityAndGetServerInfo({database:o,accessMode:Rc})},e.prototype.verifyAuthentication=function(r){var t=r===void 0?{}:r,n=t.database,o=t.auth;return hb(this,void 0,void 0,function(){var i;return pb(this,function(a){switch(a.label){case 0:return i=this._getOrCreateConnectionProvider(),[4,i.verifyAuthentication({database:n??"system",auth:o,accessMode:Rc})];case 1:return[2,a.sent()]}})})},e.prototype.getServerInfo=function(r){var t=r===void 0?{}:r,n=t.database,o=n===void 0?"":n,i=this._getOrCreateConnectionProvider();return i.verifyConnectivityAndGetServerInfo({database:o,accessMode:Rc})},e.prototype.supportsMultiDb=function(){var r=this._getOrCreateConnectionProvider();return r.supportsMultiDb()},e.prototype.supportsTransactionConfig=function(){var r=this._getOrCreateConnectionProvider();return r.supportsTransactionConfig()},e.prototype.supportsUserImpersonation=function(){var r=this._getOrCreateConnectionProvider();return r.supportsUserImpersonation()},e.prototype.supportsSessionAuth=function(){var r=this._getOrCreateConnectionProvider();return r.supportsSessionAuth()},e.prototype.getNegotiatedProtocolVersion=function(){var r=this._getOrCreateConnectionProvider();return r.getNegotiatedProtocolVersion()},e.prototype.isEncrypted=function(){return this._isEncrypted()},e.prototype._supportsRouting=function(){return this._meta.routing},e.prototype._isEncrypted=function(){return this._config.encrypted===mj.ENCRYPTION_ON||this._config.encrypted===!0},e.prototype._getTrust=function(){return this._config.trust},e.prototype.session=function(r){var t=r===void 0?{}:r,n=t.defaultAccessMode,o=n===void 0?s_:n,i=t.bookmarks,a=t.database,s=a===void 0?"":a,c=t.impersonatedUser,u=t.fetchSize,l=t.bookmarkManager,d=t.notificationFilter,h=t.auth;return this._newSession({defaultAccessMode:o,bookmarkOrBookmarks:i,database:s,reactive:!1,impersonatedUser:c,fetchSize:eO(u,this._config.fetchSize),bookmarkManager:l,notificationFilter:d,auth:h})},e.prototype.close=function(){return this._log.info("Driver ".concat(this._id," closing")),this._connectionProvider!=null?this._connectionProvider.close():Promise.resolve()},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._afterConstruction=function(){this._log.info("".concat(this._meta.typename," driver ").concat(this._id," created for server address ").concat(this._meta.address.toString()))},e.prototype._homeDatabaseCallback=function(r,t){this.homeDatabaseCache.set(r,t)},e.prototype._newSession=function(r){var t=r.defaultAccessMode,n=r.bookmarkOrBookmarks,o=r.database,i=r.reactive,a=r.impersonatedUser,s=r.fetchSize,c=r.bookmarkManager,u=r.notificationFilter,l=r.auth,d=_b.default._validateSessionMode(t),h=this._getOrCreateConnectionProvider(),p=this.homeDatabaseCache.get((0,Pj.cacheKey)(l,a)),v=this._homeDatabaseCallback.bind(this),_=n!=null?new vb.Bookmarks(n):vb.Bookmarks.empty();return this._createSession({mode:d,database:o??"",connectionProvider:h,bookmarks:_,config:Qp({cachedHomeDatabase:p,routingDriver:this._supportsRouting()},this._config),reactive:i,impersonatedUser:a,fetchSize:s,bookmarkManager:c,notificationFilter:u,auth:l,log:this._log,homeDatabaseCallback:v})},e.prototype._getOrCreateConnectionProvider=function(){return this._connectionProvider==null&&(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,Uj(this._config))),this._connectionProvider},e}();Xe.Driver=Jw;function kj(e,r){var t,n,o=e.resolver;if(o!=null&&typeof o!="function")throw new TypeError("Configured resolver should be a function. Got: ".concat(typeof o));if(e.connectionAcquisitionTimeout<e.connectionTimeout&&r.warn('Configuration for "connectionAcquisitionTimeout" should be greater than or equal to "connectionTimeout". Otherwise, the connection acquisition timeout will take precedence for over the connection timeout in scenarios where a new connection is created while it is acquired'),((t=e.notificationFilter)===null||t===void 0?void 0:t.disabledCategories)!=null&&((n=e.notificationFilter)===null||n===void 0?void 0:n.disabledClassifications)!=null)throw new Error(`The notificationFilter can't have both "disabledCategories" and  "disabledClassifications" configured at the same time.`);return e}function Mj(e){e.maxConnectionLifetime=Yh(e.maxConnectionLifetime,Tj),e.maxConnectionPoolSize=Yh(e.maxConnectionPoolSize,Un.DEFAULT_POOL_MAX_SIZE),e.connectionAcquisitionTimeout=Yh(e.connectionAcquisitionTimeout,Un.DEFAULT_POOL_ACQUISITION_TIMEOUT),e.fetchSize=eO(e.fetchSize,Cj),e.connectionTimeout=Dj(e),e.connectionLivenessCheckTimeout=Lj(e.connectionLivenessCheckTimeout)}function Yh(e,r){var t=parseInt(e,10);return t>0||t===0?t:t<0?Number.MAX_SAFE_INTEGER:r}function eO(e,r){var t=parseInt(e,10);if(t>0||t===Un.FETCH_ALL)return t;if(t===0||t<0)throw new Error("The fetch size can only be a positive value or ".concat(Un.FETCH_ALL," for ALL. However fetchSize = ").concat(t));return r}function Dj(e){var r=parseInt(e.connectionTimeout,10);return r===0||!isNaN(r)&&r<0?null:isNaN(r)?Un.DEFAULT_CONNECTION_TIMEOUT_MILLIS:r}function Lj(e){if(e!=null){var r=parseInt(e,10);if(r<0||Number.isNaN(r))throw new Error("The connectionLivenessCheckTimeout can only be a positive value or 0 for always. However connectionLivenessCheckTimeout = ".concat(r));return r}}function Uj(e){return new yj.default(e.resolver)}Xe.default=Jw;var $l={};Object.defineProperty($l,"__esModule",{value:!0});var Fj=le,xj=Lt,Bj={basic:function(e,r,t){return t!=null?{scheme:"basic",principal:e,credentials:r,realm:t}:{scheme:"basic",principal:e,credentials:r}},kerberos:function(e){return{scheme:"kerberos",principal:"",credentials:e}},bearer:function(e){return{scheme:"bearer",credentials:e}},none:function(){return{scheme:"none"}},custom:function(e,r,t,n,o){var i={scheme:n,principal:e};if(Zh(r)&&(i.credentials=r),Zh(t)&&(i.realm=t),Zh(o)){try{(0,xj.stringify)(o)}catch(a){throw(0,Fj.newError)("Circular references in custom auth token parameters",void 0,a)}i.parameters=o}return i}};function Zh(e){return!(e==null||e===""||Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length===0)}$l.default=Bj;var _r={},Xp=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Jp=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Vj=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_r,"__esModule",{value:!0});_r.staticAuthTokenManager=_r.authTokenManagers=_r.AuthTokenAndExpiration=void 0;var Wj=Vj($l),zj=oe,qj=function(){function e(){}return e.prototype.getToken=function(){throw new Error("Not Implemented")},e.prototype.handleSecurityException=function(r,t){throw new Error("Not implemented")},e}();_r.default=qj;var Hj=function(){function e(){this.token=Wj.default.none(),this.expiration=void 0}return e}();_r.AuthTokenAndExpiration=Hj;var Gj=function(){function e(){}return e.prototype.bearer=function(r){var t=r.tokenProvider;if(typeof t!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof t));return new yb(t,["Neo.ClientError.Security.Unauthorized","Neo.ClientError.Security.TokenExpired"])},e.prototype.basic=function(r){var t=this,n=r.tokenProvider;if(typeof n!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof n));return new yb(function(){return Xp(t,void 0,void 0,function(){var o;return Jp(this,function(i){switch(i.label){case 0:return o={},[4,n()];case 1:return[2,(o.token=i.sent(),o)]}})})},["Neo.ClientError.Security.Unauthorized"])},e}(),tO=new Gj;_r.authTokenManagers=tO;Object.freeze(tO);function Kj(e){var r=e.authToken;return new Zj(r)}_r.staticAuthTokenManager=Kj;var Yj=function(){function e(r){r===void 0&&(r=[]),this._subscribers=r}return e.prototype.subscribe=function(r){this._subscribers.push(r)},e.prototype.onCompleted=function(r){this._subscribers.forEach(function(t){return t.onCompleted(r)})},e.prototype.onError=function(r){this._subscribers.forEach(function(t){return t.onError(r)})},e}(),yb=function(){function e(r,t,n,o){this._tokenProvider=r,this._handledSecurityCodes=t,this._currentAuthData=n,this._refreshObservable=o}return e.prototype.getToken=function(){var r;return Xp(this,void 0,void 0,function(){return Jp(this,function(t){switch(t.label){case 0:return this._currentAuthData===void 0||this._currentAuthData.expiration!==void 0&&this._currentAuthData.expiration<new Date?[4,this._refreshAuthToken()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2,(r=this._currentAuthData)===null||r===void 0?void 0:r.token]}})})},e.prototype.handleSecurityException=function(r,t){var n;return this._handledSecurityCodes.includes(t)?(zj.util.equals(r,(n=this._currentAuthData)===null||n===void 0?void 0:n.token)&&this._scheduleRefreshAuthToken(),!0):!1},e.prototype._scheduleRefreshAuthToken=function(r){var t=this;this._refreshObservable===void 0&&(this._currentAuthData=void 0,this._refreshObservable=new Yj,Promise.resolve(this._tokenProvider()).then(function(n){var o;t._currentAuthData=n,(o=t._refreshObservable)===null||o===void 0||o.onCompleted(n)}).catch(function(n){var o;(o=t._refreshObservable)===null||o===void 0||o.onError(n)}).finally(function(){t._refreshObservable=void 0})),r!==void 0&&this._refreshObservable.subscribe(r)},e.prototype._refreshAuthToken=function(){return Xp(this,void 0,void 0,function(){var r=this;return Jp(this,function(t){switch(t.label){case 0:return[4,new Promise(function(n,o){r._scheduleRefreshAuthToken({onCompleted:n,onError:o})})];case 1:return[2,t.sent()]}})})},e}(),Zj=function(){function e(r){this._authToken=r}return e.prototype.getToken=function(){return this._authToken},e.prototype.handleSecurityException=function(r,t){return!1},e}(),Mo={},Qj=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Mo,"__esModule",{value:!0});Mo.InternalConfig=Mo.Config=void 0;var rO=function(){function e(){this.encrypted=void 0,this.trust=void 0,this.trustedCertificates=[],this.maxConnectionPoolSize=100,this.maxConnectionLifetime=60*60*1e3,this.connectionAcquisitionTimeout=6e4,this.maxTransactionRetryTime=3e4,this.connectionLivenessCheckTimeout=void 0,this.connectionTimeout=3e4,this.disableLosslessIntegers=!1,this.useBigInt=!1,this.logging=void 0,this.resolver=void 0,this.notificationFilter=void 0,this.userAgent=void 0,this.telemetryDisabled=!1,this.clientCertificate=void 0}return e}();Mo.Config=rO;var Xj=function(e){Qj(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(rO);Mo.InternalConfig=Xj;var kt={},Jj=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Sa=f&&f.__assign||function(){return Sa=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Sa.apply(this,arguments)},e$=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),t$=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),r$=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&e$(r,e,t);return t$(r,e),r};Object.defineProperty(kt,"__esModule",{value:!0});kt.resolveCertificateProvider=kt.clientCertificateProviders=kt.RotatingClientCertificateProvider=kt.ClientCertificateProvider=void 0;var c_=r$(Lt),n$=function(){function e(){this.certfile="",this.keyfile="",this.password=void 0}return e}();kt.default=n$;var nO=function(){function e(){}return e.prototype.hasUpdate=function(){throw new Error("Not Implemented")},e.prototype.getClientCertificate=function(){throw new Error("Not Implemented")},e}();kt.ClientCertificateProvider=nO;var o$=function(e){Jj(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.updateCertificate=function(t){throw new Error("Not implemented")},r}(nO);kt.RotatingClientCertificateProvider=o$;var i$=function(){function e(){}return e.prototype.rotating=function(r){var t=r.initialCertificate;if(t==null||!l_(t))throw new TypeError("initialCertificate should be ClientCertificate, but got ".concat(c_.stringify(t)));var n=Sa({},t);return new c$(n)},e}(),oO=new i$;kt.clientCertificateProviders=oO;Object.freeze(oO);function a$(e){if(e!=null){if(typeof e=="object"&&"hasUpdate"in e&&"getClientCertificate"in e&&typeof e.getClientCertificate=="function"&&typeof e.hasUpdate=="function")return e;if(l_(e)){var r=Sa({},e);return{getClientCertificate:function(){return r},hasUpdate:function(){return!1}}}throw new TypeError("clientCertificate should be configured with ClientCertificate or ClientCertificateProvider, but got ".concat(c_.stringify(e)))}}kt.resolveCertificateProvider=a$;function l_(e){return e!=null&&typeof e=="object"&&"certfile"in e&&u$(e.certfile)&&"keyfile"in e&&s$(e.keyfile)&&aO("password",e)}function u$(e){return bb(e)||iO(e,bb)}function s$(e){function r(t){return typeof t=="string"||t!=null&&typeof t=="object"&&"path"in t&&typeof t.path=="string"&&aO("password",t)}return r(e)||iO(e,r)}function bb(e){return typeof e=="string"}function iO(e,r,t){return t===void 0&&(t=!1),Array.isArray(e)&&(t||e.length>0)&&e.filter(r).length===e.length}function aO(e,r){return!(e in r)||r[e]==null||typeof r[e]=="string"}var c$=function(){function e(r,t){t===void 0&&(t=!1),this._certificate=r,this._updated=t}return e.prototype.hasUpdate=function(){try{return this._updated}finally{this._updated=!1}},e.prototype.getClientCertificate=function(){return this._certificate},e.prototype.updateCertificate=function(r){if(!l_(r))throw new TypeError("certificate should be ClientCertificate, but got ".concat(c_.stringify(r)));this._certificate=Sa({},r),this._updated=!0},e}();(function(e){var r=f&&f.__createBinding||(Object.create?function(P,C,R,V){V===void 0&&(V=R);var q=Object.getOwnPropertyDescriptor(C,R);(!q||("get"in q?!C.__esModule:q.writable||q.configurable))&&(q={enumerable:!0,get:function(){return C[R]}}),Object.defineProperty(P,V,q)}:function(P,C,R,V){V===void 0&&(V=R),P[V]=C[R]}),t=f&&f.__setModuleDefault||(Object.create?function(P,C){Object.defineProperty(P,"default",{enumerable:!0,value:C})}:function(P,C){P.default=C}),n=f&&f.__importStar||function(P){if(P&&P.__esModule)return P;var C={};if(P!=null)for(var R in P)R!=="default"&&Object.prototype.hasOwnProperty.call(P,R)&&r(C,P,R);return t(C,P),C},o=f&&f.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(e,"__esModule",{value:!0}),e.EagerResult=e.Result=e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.GqlStatusObject=e.Notification=e.ServerInfo=e.queryType=e.ResultSummary=e.Record=e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=e.Time=e.LocalTime=e.LocalDateTime=e.isTime=e.isLocalTime=e.isLocalDateTime=e.isDuration=e.isDateTime=e.isDate=e.Duration=e.DateTime=e.Date=e.Point=e.isPoint=e.internal=e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=e.Integer=e.error=e.isRetriableError=e.GQLError=e.newGQLError=e.Neo4jError=e.newError=e.authTokenManagers=void 0,e.resolveCertificateProvider=e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.routing=e.staticAuthTokenManager=e.bookmarkManager=e.auth=e.json=e.driver=e.types=e.Driver=e.Session=e.TransactionPromise=e.ManagedTransaction=e.Transaction=e.Connection=e.Releasable=e.ConnectionProvider=void 0;var i=le;Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return i.newError}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return i.Neo4jError}}),Object.defineProperty(e,"newGQLError",{enumerable:!0,get:function(){return i.newGQLError}}),Object.defineProperty(e,"GQLError",{enumerable:!0,get:function(){return i.GQLError}}),Object.defineProperty(e,"isRetriableError",{enumerable:!0,get:function(){return i.isRetriableError}});var a=n(xe);e.Integer=a.default,Object.defineProperty(e,"int",{enumerable:!0,get:function(){return a.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return a.isInt}}),Object.defineProperty(e,"inSafeRange",{enumerable:!0,get:function(){return a.inSafeRange}}),Object.defineProperty(e,"toNumber",{enumerable:!0,get:function(){return a.toNumber}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return a.toString}});var s=ge;Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return s.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return s.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return s.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return s.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return s.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return s.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return s.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return s.isLocalTime}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return s.isTime}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return s.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return s.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return s.Time}});var c=Se;Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return c.Node}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return c.isNode}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return c.Relationship}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return c.isRelationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return c.UnboundRelationship}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return c.isUnboundRelationship}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return c.Path}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return c.isPath}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return c.PathSegment}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return c.isPathSegment}});var u=o(Jv);e.Record=u.default;var l=No;Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return l.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return l.Point}});var d=n(Qe);e.ResultSummary=d.default,Object.defineProperty(e,"queryType",{enumerable:!0,get:function(){return d.queryType}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return d.ServerInfo}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return d.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return d.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return d.QueryStatistics}}),Object.defineProperty(e,"Stats",{enumerable:!0,get:function(){return d.Stats}});var h=n(Pe);e.Notification=h.default,Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return h.GqlStatusObject}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return h.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return h.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return h.notificationSeverityLevel}});var p=vr;Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return p.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return p.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return p.notificationFilterMinimumSeverityLevel}});var v=o(xa);e.Result=v.default;var _=o(Sl);e.EagerResult=_.default;var b=n(Ba);e.ConnectionProvider=b.default,Object.defineProperty(e,"Releasable",{enumerable:!0,get:function(){return b.Releasable}});var w=o(o_);e.Connection=w.default;var E=o(Pl);e.Transaction=E.default;var S=o(Tl);e.ManagedTransaction=S.default;var O=o(Cl);e.TransactionPromise=O.default;var A=o(Al);e.Session=A.default;var $=n(Xe),I=$;e.Driver=$.default,e.driver=I;var L=o($l);e.auth=L.default;var X=Qo;Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return X.bookmarkManager}});var ae=_r;Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return ae.authTokenManagers}}),Object.defineProperty(e,"staticAuthTokenManager",{enumerable:!0,get:function(){return ae.staticAuthTokenManager}});var _e=Xe;Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return _e.routing}});var ne=n(Mo);e.types=ne;var ve=n(Lt);e.json=ve;var it=o(Il);e.resultTransformers=it.default;var ee=kt;Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return ee.clientCertificateProviders}}),Object.defineProperty(e,"resolveCertificateProvider",{enumerable:!0,get:function(){return ee.resolveCertificateProvider}});var be=n(oe);e.internal=be;var Y={SERVICE_UNAVAILABLE:i.SERVICE_UNAVAILABLE,SESSION_EXPIRED:i.SESSION_EXPIRED,PROTOCOL_ERROR:i.PROTOCOL_ERROR};e.error=Y;var k={authTokenManagers:ae.authTokenManagers,newError:i.newError,Neo4jError:i.Neo4jError,newGQLError:i.newGQLError,GQLError:i.GQLError,isRetriableError:i.isRetriableError,error:Y,Integer:a.default,int:a.int,isInt:a.isInt,inSafeRange:a.inSafeRange,toNumber:a.toNumber,toString:a.toString,internal:be,isPoint:l.isPoint,Point:l.Point,Date:s.Date,DateTime:s.DateTime,Duration:s.Duration,isDate:s.isDate,isDateTime:s.isDateTime,isDuration:s.isDuration,isLocalDateTime:s.isLocalDateTime,isLocalTime:s.isLocalTime,isTime:s.isTime,LocalDateTime:s.LocalDateTime,LocalTime:s.LocalTime,Time:s.Time,Node:c.Node,isNode:c.isNode,Relationship:c.Relationship,isRelationship:c.isRelationship,UnboundRelationship:c.UnboundRelationship,isUnboundRelationship:c.isUnboundRelationship,Path:c.Path,isPath:c.isPath,PathSegment:c.PathSegment,isPathSegment:c.isPathSegment,Record:u.default,ResultSummary:d.default,queryType:d.queryType,ServerInfo:d.ServerInfo,Notification:h.default,GqlStatusObject:h.GqlStatusObject,Plan:d.Plan,ProfiledPlan:d.ProfiledPlan,QueryStatistics:d.QueryStatistics,Stats:d.Stats,Result:v.default,EagerResult:_.default,Transaction:E.default,ManagedTransaction:S.default,TransactionPromise:O.default,Session:A.default,Driver:$.default,Connection:w.default,Releasable:b.Releasable,types:ne,driver:I,json:ve,auth:L.default,bookmarkManager:X.bookmarkManager,routing:_e.routing,resultTransformers:it.default,notificationCategory:h.notificationCategory,notificationClassification:h.notificationClassification,notificationSeverityLevel:h.notificationSeverityLevel,notificationFilterDisabledCategory:p.notificationFilterDisabledCategory,notificationFilterDisabledClassification:p.notificationFilterDisabledClassification,notificationFilterMinimumSeverityLevel:p.notificationFilterMinimumSeverityLevel,clientCertificateProviders:ee.clientCertificateProviders,resolveCertificateProvider:ee.resolveCertificateProvider};e.default=k})(G);var Nl={},za={},pe={},Xo={},de={};Object.defineProperty(de,"__esModule",{value:!0});de.isFunction=void 0;function l$(e){return typeof e=="function"}de.isFunction=l$;var Ne={},qa={},Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.createErrorClass=void 0;function f$(e){var r=function(n){Error.call(n),n.stack=new Error().stack},t=e(r);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Xt.createErrorClass=f$;Object.defineProperty(qa,"__esModule",{value:!0});qa.UnsubscriptionError=void 0;var d$=Xt;qa.UnsubscriptionError=d$.createErrorClass(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,o){return o+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});var Ut={};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.arrRemove=void 0;function h$(e,r){if(e){var t=e.indexOf(r);0<=t&&e.splice(t,1)}}Ut.arrRemove=h$;var mb=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},gb=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},wb=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.isSubscription=Ne.EMPTY_SUBSCRIPTION=Ne.Subscription=void 0;var _a=de,Qh=qa,Ob=Ut,f_=function(){function e(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var r,t,n,o,i;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var s=mb(a),c=s.next();!c.done;c=s.next()){var u=c.value;u.remove(this)}}catch(_){r={error:_}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(r)throw r.error}}else a.remove(this);var l=this.initialTeardown;if(_a.isFunction(l))try{l()}catch(_){i=_ instanceof Qh.UnsubscriptionError?_.errors:[_]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var h=mb(d),p=h.next();!p.done;p=h.next()){var v=p.value;try{Eb(v)}catch(_){i=i??[],_ instanceof Qh.UnsubscriptionError?i=wb(wb([],gb(i)),gb(_.errors)):i.push(_)}}}catch(_){n={error:_}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}}if(i)throw new Qh.UnsubscriptionError(i)}},e.prototype.add=function(r){var t;if(r&&r!==this)if(this.closed)Eb(r);else{if(r instanceof e){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(r)}},e.prototype._hasParent=function(r){var t=this._parentage;return t===r||Array.isArray(t)&&t.includes(r)},e.prototype._addParent=function(r){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(r),t):t?[t,r]:r},e.prototype._removeParent=function(r){var t=this._parentage;t===r?this._parentage=null:Array.isArray(t)&&Ob.arrRemove(t,r)},e.prototype.remove=function(r){var t=this._finalizers;t&&Ob.arrRemove(t,r),r instanceof e&&r._removeParent(this)},e.EMPTY=function(){var r=new e;return r.closed=!0,r}(),e}();Ne.Subscription=f_;Ne.EMPTY_SUBSCRIPTION=f_.EMPTY;function p$(e){return e instanceof f_||e&&"closed"in e&&_a.isFunction(e.remove)&&_a.isFunction(e.add)&&_a.isFunction(e.unsubscribe)}Ne.isSubscription=p$;function Eb(e){_a.isFunction(e)?e():e.unsubscribe()}var tn={};Object.defineProperty(tn,"__esModule",{value:!0});tn.config=void 0;tn.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ha={},d_={};(function(e){var r=f&&f.__read||function(n,o){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var a=i.call(n),s,c=[],u;try{for(;(o===void 0||o-- >0)&&!(s=a.next()).done;)c.push(s.value)}catch(l){u={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(u)throw u.error}}return c},t=f&&f.__spreadArray||function(n,o){for(var i=0,a=o.length,s=n.length;i<a;i++,s++)n[s]=o[i];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutProvider=void 0,e.timeoutProvider={setTimeout:function(n,o){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=e.timeoutProvider.delegate;return s!=null&&s.setTimeout?s.setTimeout.apply(s,t([n,o],r(i))):setTimeout.apply(void 0,t([n,o],r(i)))},clearTimeout:function(n){var o=e.timeoutProvider.delegate;return((o==null?void 0:o.clearTimeout)||clearTimeout)(n)},delegate:void 0}})(d_);Object.defineProperty(Ha,"__esModule",{value:!0});Ha.reportUnhandledError=void 0;var v$=tn,_$=d_;function y$(e){_$.timeoutProvider.setTimeout(function(){var r=v$.config.onUnhandledError;if(r)r(e);else throw e})}Ha.reportUnhandledError=y$;var ke={};Object.defineProperty(ke,"__esModule",{value:!0});ke.noop=void 0;function b$(){}ke.noop=b$;var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.createNotification=Yt.nextNotification=Yt.errorNotification=Yt.COMPLETE_NOTIFICATION=void 0;Yt.COMPLETE_NOTIFICATION=function(){return kl("C",void 0,void 0)}();function m$(e){return kl("E",void 0,e)}Yt.errorNotification=m$;function g$(e){return kl("N",e,void 0)}Yt.nextNotification=g$;function kl(e,r,t){return{kind:e,value:r,error:t}}Yt.createNotification=kl;var Vr={};Object.defineProperty(Vr,"__esModule",{value:!0});Vr.captureError=Vr.errorContext=void 0;var uO=tn,jn=null;function w$(e){if(uO.config.useDeprecatedSynchronousErrorHandling){var r=!jn;if(r&&(jn={errorThrown:!1,error:null}),e(),r){var t=jn,n=t.errorThrown,o=t.error;if(jn=null,n)throw o}}else e()}Vr.errorContext=w$;function O$(e){uO.config.useDeprecatedSynchronousErrorHandling&&jn&&(jn.errorThrown=!0,jn.error=e)}Vr.captureError=O$;(function(e){var r=f&&f.__extends||function(){var E=function(S,O){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,$){A.__proto__=$}||function(A,$){for(var I in $)Object.prototype.hasOwnProperty.call($,I)&&(A[I]=$[I])},E(S,O)};return function(S,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");E(S,O);function A(){this.constructor=S}S.prototype=O===null?Object.create(O):(A.prototype=O.prototype,new A)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_OBSERVER=e.SafeSubscriber=e.Subscriber=void 0;var t=de,n=Ne,o=tn,i=Ha,a=ke,s=Yt,c=d_,u=Vr,l=function(E){r(S,E);function S(O){var A=E.call(this)||this;return A.isStopped=!1,O?(A.destination=O,n.isSubscription(O)&&O.add(A)):A.destination=e.EMPTY_OBSERVER,A}return S.create=function(O,A,$){return new v(O,A,$)},S.prototype.next=function(O){this.isStopped?w(s.nextNotification(O),this):this._next(O)},S.prototype.error=function(O){this.isStopped?w(s.errorNotification(O),this):(this.isStopped=!0,this._error(O))},S.prototype.complete=function(){this.isStopped?w(s.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},S.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,E.prototype.unsubscribe.call(this),this.destination=null)},S.prototype._next=function(O){this.destination.next(O)},S.prototype._error=function(O){try{this.destination.error(O)}finally{this.unsubscribe()}},S.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},S}(n.Subscription);e.Subscriber=l;var d=Function.prototype.bind;function h(E,S){return d.call(E,S)}var p=function(){function E(S){this.partialObserver=S}return E.prototype.next=function(S){var O=this.partialObserver;if(O.next)try{O.next(S)}catch(A){_(A)}},E.prototype.error=function(S){var O=this.partialObserver;if(O.error)try{O.error(S)}catch(A){_(A)}else _(S)},E.prototype.complete=function(){var S=this.partialObserver;if(S.complete)try{S.complete()}catch(O){_(O)}},E}(),v=function(E){r(S,E);function S(O,A,$){var I=E.call(this)||this,L;if(t.isFunction(O)||!O)L={next:O??void 0,error:A??void 0,complete:$??void 0};else{var X;I&&o.config.useDeprecatedNextContext?(X=Object.create(O),X.unsubscribe=function(){return I.unsubscribe()},L={next:O.next&&h(O.next,X),error:O.error&&h(O.error,X),complete:O.complete&&h(O.complete,X)}):L=O}return I.destination=new p(L),I}return S}(l);e.SafeSubscriber=v;function _(E){o.config.useDeprecatedSynchronousErrorHandling?u.captureError(E):i.reportUnhandledError(E)}function b(E){throw E}function w(E,S){var O=o.config.onStoppedNotification;O&&c.timeoutProvider.setTimeout(function(){return O(E,S)})}e.EMPTY_OBSERVER={closed:!0,next:a.noop,error:b,complete:a.noop}})(Xo);var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});Yn.observable=void 0;Yn.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();var br={},Me={};Object.defineProperty(Me,"__esModule",{value:!0});Me.identity=void 0;function E$(e){return e}Me.identity=E$;Object.defineProperty(br,"__esModule",{value:!0});br.pipeFromArray=br.pipe=void 0;var S$=Me;function P$(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return sO(e)}br.pipe=P$;function sO(e){return e.length===0?S$.identity:e.length===1?e[0]:function(t){return e.reduce(function(n,o){return o(n)},t)}}br.pipeFromArray=sO;Object.defineProperty(pe,"__esModule",{value:!0});pe.Observable=void 0;var ev=Xo,T$=Ne,C$=Yn,A$=br,I$=tn,Xh=de,R$=Vr,j$=function(){function e(r){r&&(this._subscribe=r)}return e.prototype.lift=function(r){var t=new e;return t.source=this,t.operator=r,t},e.prototype.subscribe=function(r,t,n){var o=this,i=N$(r)?r:new ev.SafeSubscriber(r,t,n);return R$.errorContext(function(){var a=o,s=a.operator,c=a.source;i.add(s?s.call(i,c):c?o._subscribe(i):o._trySubscribe(i))}),i},e.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(t){r.error(t)}},e.prototype.forEach=function(r,t){var n=this;return t=Sb(t),new t(function(o,i){var a=new ev.SafeSubscriber({next:function(s){try{r(s)}catch(c){i(c),a.unsubscribe()}},error:i,complete:o});n.subscribe(a)})},e.prototype._subscribe=function(r){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(r)},e.prototype[C$.observable]=function(){return this},e.prototype.pipe=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return A$.pipeFromArray(r)(this)},e.prototype.toPromise=function(r){var t=this;return r=Sb(r),new r(function(n,o){var i;t.subscribe(function(a){return i=a},function(a){return o(a)},function(){return n(i)})})},e.create=function(r){return new e(r)},e}();pe.Observable=j$;function Sb(e){var r;return(r=e??I$.config.Promise)!==null&&r!==void 0?r:Promise}function $$(e){return e&&Xh.isFunction(e.next)&&Xh.isFunction(e.error)&&Xh.isFunction(e.complete)}function N$(e){return e&&e instanceof ev.Subscriber||$$(e)&&T$.isSubscription(e)}var Zn={},Jo={},U={};Object.defineProperty(U,"__esModule",{value:!0});U.operate=U.hasLift=void 0;var k$=de;function cO(e){return k$.isFunction(e==null?void 0:e.lift)}U.hasLift=cO;function M$(e){return function(r){if(cO(r))return r.lift(function(t){try{return e(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}U.operate=M$;var B={},D$=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(B,"__esModule",{value:!0});B.OperatorSubscriber=B.createOperatorSubscriber=void 0;var L$=Xo;function U$(e,r,t,n,o){return new lO(e,r,t,n,o)}B.createOperatorSubscriber=U$;var lO=function(e){D$(r,e);function r(t,n,o,i,a,s){var c=e.call(this,t)||this;return c.onFinalize=a,c.shouldUnsubscribe=s,c._next=n?function(u){try{n(u)}catch(l){t.error(l)}}:e.prototype._next,c._error=i?function(u){try{i(u)}catch(l){t.error(l)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=o?function(){try{o()}catch(u){t.error(u)}finally{this.unsubscribe()}}:e.prototype._complete,c}return r.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},r}(L$.Subscriber);B.OperatorSubscriber=lO;Object.defineProperty(Jo,"__esModule",{value:!0});Jo.refCount=void 0;var F$=U,x$=B;function B$(){return F$.operate(function(e,r){var t=null;e._refCount++;var n=x$.createOperatorSubscriber(r,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount){t=null;return}var o=e._connection,i=t;t=null,o&&(!i||o===i)&&o.unsubscribe(),r.unsubscribe()});e.subscribe(n),n.closed||(t=e.connect())})}Jo.refCount=B$;var V$=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Zn,"__esModule",{value:!0});Zn.ConnectableObservable=void 0;var W$=pe,Pb=Ne,z$=Jo,q$=B,H$=U,G$=function(e){V$(r,e);function r(t,n){var o=e.call(this)||this;return o.source=t,o.subjectFactory=n,o._subject=null,o._refCount=0,o._connection=null,H$.hasLift(t)&&(o.lift=t.lift),o}return r.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},r.prototype.getSubject=function(){var t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject},r.prototype._teardown=function(){this._refCount=0;var t=this._connection;this._subject=this._connection=null,t==null||t.unsubscribe()},r.prototype.connect=function(){var t=this,n=this._connection;if(!n){n=this._connection=new Pb.Subscription;var o=this.getSubject();n.add(this.source.subscribe(q$.createOperatorSubscriber(o,void 0,function(){t._teardown(),o.complete()},function(i){t._teardown(),o.error(i)},function(){return t._teardown()}))),n.closed&&(this._connection=null,n=Pb.Subscription.EMPTY)}return n},r.prototype.refCount=function(){return z$.refCount()(this)},r}(W$.Observable);Zn.ConnectableObservable=G$;var Ml={},fO={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.performanceTimestampProvider=void 0,e.performanceTimestampProvider={now:function(){return(e.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}})(fO);var h_={};(function(e){var r=f&&f.__read||function(o,i){var a=typeof Symbol=="function"&&o[Symbol.iterator];if(!a)return o;var s=a.call(o),c,u=[],l;try{for(;(i===void 0||i-- >0)&&!(c=s.next()).done;)u.push(c.value)}catch(d){l={error:d}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(l)throw l.error}}return u},t=f&&f.__spreadArray||function(o,i){for(var a=0,s=i.length,c=o.length;a<s;a++,c++)o[c]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrameProvider=void 0;var n=Ne;e.animationFrameProvider={schedule:function(o){var i=requestAnimationFrame,a=cancelAnimationFrame,s=e.animationFrameProvider.delegate;s&&(i=s.requestAnimationFrame,a=s.cancelAnimationFrame);var c=i(function(u){a=void 0,o(u)});return new n.Subscription(function(){return a==null?void 0:a(c)})},requestAnimationFrame:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=e.animationFrameProvider.delegate;return((a==null?void 0:a.requestAnimationFrame)||requestAnimationFrame).apply(void 0,t([],r(o)))},cancelAnimationFrame:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=e.animationFrameProvider.delegate;return((a==null?void 0:a.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,t([],r(o)))},delegate:void 0}})(h_);Object.defineProperty(Ml,"__esModule",{value:!0});Ml.animationFrames=void 0;var K$=pe,Y$=fO,Tb=h_;function Z$(e){return e?dO(e):Q$}Ml.animationFrames=Z$;function dO(e){return new K$.Observable(function(r){var t=e||Y$.performanceTimestampProvider,n=t.now(),o=0,i=function(){r.closed||(o=Tb.animationFrameProvider.requestAnimationFrame(function(a){o=0;var s=t.now();r.next({timestamp:e?s:a,elapsed:s-n}),i()}))};return i(),function(){o&&Tb.animationFrameProvider.cancelAnimationFrame(o)}})}var Q$=dO(),Ae={},Ga={};Object.defineProperty(Ga,"__esModule",{value:!0});Ga.ObjectUnsubscribedError=void 0;var X$=Xt;Ga.ObjectUnsubscribedError=X$.createErrorClass(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var hO=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),J$=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.AnonymousSubject=Ae.Subject=void 0;var Cb=pe,tv=Ne,eN=Ga,tN=Ut,Jh=Vr,pO=function(e){hO(r,e);function r(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r.prototype.lift=function(t){var n=new rv(this,this);return n.operator=t,n},r.prototype._throwIfClosed=function(){if(this.closed)throw new eN.ObjectUnsubscribedError},r.prototype.next=function(t){var n=this;Jh.errorContext(function(){var o,i;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var a=J$(n.currentObservers),s=a.next();!s.done;s=a.next()){var c=s.value;c.next(t)}}catch(u){o={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}}})},r.prototype.error=function(t){var n=this;Jh.errorContext(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=t;for(var o=n.observers;o.length;)o.shift().error(t)}})},r.prototype.complete=function(){var t=this;Jh.errorContext(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var n=t.observers;n.length;)n.shift().complete()}})},r.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(r.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),r.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},r.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},r.prototype._innerSubscribe=function(t){var n=this,o=this,i=o.hasError,a=o.isStopped,s=o.observers;return i||a?tv.EMPTY_SUBSCRIPTION:(this.currentObservers=null,s.push(t),new tv.Subscription(function(){n.currentObservers=null,tN.arrRemove(s,t)}))},r.prototype._checkFinalizedStatuses=function(t){var n=this,o=n.hasError,i=n.thrownError,a=n.isStopped;o?t.error(i):a&&t.complete()},r.prototype.asObservable=function(){var t=new Cb.Observable;return t.source=this,t},r.create=function(t,n){return new rv(t,n)},r}(Cb.Observable);Ae.Subject=pO;var rv=function(e){hO(r,e);function r(t,n){var o=e.call(this)||this;return o.destination=t,o.source=n,o}return r.prototype.next=function(t){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.next)===null||o===void 0||o.call(n,t)},r.prototype.error=function(t){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.error)===null||o===void 0||o.call(n,t)},r.prototype.complete=function(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)},r.prototype._subscribe=function(t){var n,o;return(o=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&o!==void 0?o:tv.EMPTY_SUBSCRIPTION},r}(pO);Ae.AnonymousSubject=rv;var Ka={},rN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ka,"__esModule",{value:!0});Ka.BehaviorSubject=void 0;var nN=Ae,oN=function(e){rN(r,e);function r(t){var n=e.call(this)||this;return n._value=t,n}return Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),r.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},r.prototype.getValue=function(){var t=this,n=t.hasError,o=t.thrownError,i=t._value;if(n)throw o;return this._throwIfClosed(),i},r.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},r}(nN.Subject);Ka.BehaviorSubject=oN;var ei={},Dl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.dateTimestampProvider=void 0,e.dateTimestampProvider={now:function(){return(e.dateTimestampProvider.delegate||Date).now()},delegate:void 0}})(Dl);var iN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ei,"__esModule",{value:!0});ei.ReplaySubject=void 0;var aN=Ae,uN=Dl,sN=function(e){iN(r,e);function r(t,n,o){t===void 0&&(t=1/0),n===void 0&&(n=1/0),o===void 0&&(o=uN.dateTimestampProvider);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=n,i._timestampProvider=o,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,n),i}return r.prototype.next=function(t){var n=this,o=n.isStopped,i=n._buffer,a=n._infiniteTimeWindow,s=n._timestampProvider,c=n._windowTime;o||(i.push(t),!a&&i.push(s.now()+c)),this._trimBuffer(),e.prototype.next.call(this,t)},r.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(t),o=this,i=o._infiniteTimeWindow,a=o._buffer,s=a.slice(),c=0;c<s.length&&!t.closed;c+=i?1:2)t.next(s[c]);return this._checkFinalizedStatuses(t),n},r.prototype._trimBuffer=function(){var t=this,n=t._bufferSize,o=t._timestampProvider,i=t._buffer,a=t._infiniteTimeWindow,s=(a?1:2)*n;if(n<1/0&&s<i.length&&i.splice(0,i.length-s),!a){for(var c=o.now(),u=0,l=1;l<i.length&&i[l]<=c;l+=2)u=l;u&&i.splice(0,u+1)}},r}(aN.Subject);ei.ReplaySubject=sN;var ti={},cN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ti,"__esModule",{value:!0});ti.AsyncSubject=void 0;var lN=Ae,fN=function(e){cN(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t._value=null,t._hasValue=!1,t._isComplete=!1,t}return r.prototype._checkFinalizedStatuses=function(t){var n=this,o=n.hasError,i=n._hasValue,a=n._value,s=n.thrownError,c=n.isStopped,u=n._isComplete;o?t.error(s):(c||u)&&(i&&t.next(a),t.complete())},r.prototype.next=function(t){this.isStopped||(this._value=t,this._hasValue=!0)},r.prototype.complete=function(){var t=this,n=t._hasValue,o=t._value,i=t._isComplete;i||(this._isComplete=!0,n&&e.prototype.next.call(this,o),e.prototype.complete.call(this))},r}(lN.Subject);ti.AsyncSubject=fN;var vO={},Ll={},rn={},Ul={},dN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ul,"__esModule",{value:!0});Ul.Action=void 0;var hN=Ne,pN=function(e){dN(r,e);function r(t,n){return e.call(this)||this}return r.prototype.schedule=function(t,n){return this},r}(hN.Subscription);Ul.Action=pN;var _O={};(function(e){var r=f&&f.__read||function(n,o){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var a=i.call(n),s,c=[],u;try{for(;(o===void 0||o-- >0)&&!(s=a.next()).done;)c.push(s.value)}catch(l){u={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(u)throw u.error}}return c},t=f&&f.__spreadArray||function(n,o){for(var i=0,a=o.length,s=n.length;i<a;i++,s++)n[s]=o[i];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.intervalProvider=void 0,e.intervalProvider={setInterval:function(n,o){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=e.intervalProvider.delegate;return s!=null&&s.setInterval?s.setInterval.apply(s,t([n,o],r(i))):setInterval.apply(void 0,t([n,o],r(i)))},clearInterval:function(n){var o=e.intervalProvider.delegate;return((o==null?void 0:o.clearInterval)||clearInterval)(n)},delegate:void 0}})(_O);var vN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(rn,"__esModule",{value:!0});rn.AsyncAction=void 0;var _N=Ul,Ab=_O,yN=Ut,bN=function(e){vN(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o.pending=!1,o}return r.prototype.schedule=function(t,n){var o;if(n===void 0&&(n=0),this.closed)return this;this.state=t;var i=this.id,a=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(a,i,n)),this.pending=!0,this.delay=n,this.id=(o=this.id)!==null&&o!==void 0?o:this.requestAsyncId(a,this.id,n),this},r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),Ab.intervalProvider.setInterval(t.flush.bind(t,this),o)},r.prototype.recycleAsyncId=function(t,n,o){if(o===void 0&&(o=0),o!=null&&this.delay===o&&this.pending===!1)return n;n!=null&&Ab.intervalProvider.clearInterval(n)},r.prototype.execute=function(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var o=this._execute(t,n);if(o)return o;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(t,n){var o=!1,i;try{this.work(t)}catch(a){o=!0,i=a||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),i},r.prototype.unsubscribe=function(){if(!this.closed){var t=this,n=t.id,o=t.scheduler,i=o.actions;this.work=this.state=this.scheduler=null,this.pending=!1,yN.arrRemove(i,this),n!=null&&(this.id=this.recycleAsyncId(o,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},r}(_N.Action);rn.AsyncAction=bN;var yO={},Do={};Object.defineProperty(Do,"__esModule",{value:!0});Do.TestTools=Do.Immediate=void 0;var mN=1,ep,Vc={};function Ib(e){return e in Vc?(delete Vc[e],!0):!1}Do.Immediate={setImmediate:function(e){var r=mN++;return Vc[r]=!0,ep||(ep=Promise.resolve()),ep.then(function(){return Ib(r)&&e()}),r},clearImmediate:function(e){Ib(e)}};Do.TestTools={pending:function(){return Object.keys(Vc).length}};(function(e){var r=f&&f.__read||function(a,s){var c=typeof Symbol=="function"&&a[Symbol.iterator];if(!c)return a;var u=c.call(a),l,d=[],h;try{for(;(s===void 0||s-- >0)&&!(l=u.next()).done;)d.push(l.value)}catch(p){h={error:p}}finally{try{l&&!l.done&&(c=u.return)&&c.call(u)}finally{if(h)throw h.error}}return d},t=f&&f.__spreadArray||function(a,s){for(var c=0,u=s.length,l=a.length;c<u;c++,l++)a[l]=s[c];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.immediateProvider=void 0;var n=Do,o=n.Immediate.setImmediate,i=n.Immediate.clearImmediate;e.immediateProvider={setImmediate:function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var c=e.immediateProvider.delegate;return((c==null?void 0:c.setImmediate)||o).apply(void 0,t([],r(a)))},clearImmediate:function(a){var s=e.immediateProvider.delegate;return((s==null?void 0:s.clearImmediate)||i)(a)},delegate:void 0}})(yO);var gN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ll,"__esModule",{value:!0});Ll.AsapAction=void 0;var wN=rn,Rb=yO,ON=function(e){gN(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o}return r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),o!==null&&o>0?e.prototype.requestAsyncId.call(this,t,n,o):(t.actions.push(this),t._scheduled||(t._scheduled=Rb.immediateProvider.setImmediate(t.flush.bind(t,void 0))))},r.prototype.recycleAsyncId=function(t,n,o){var i;if(o===void 0&&(o=0),o!=null?o>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,o);var a=t.actions;n!=null&&((i=a[a.length-1])===null||i===void 0?void 0:i.id)!==n&&(Rb.immediateProvider.clearImmediate(n),t._scheduled===n&&(t._scheduled=void 0))},r}(wN.AsyncAction);Ll.AsapAction=ON;var Fl={},nn={},Ya={};Object.defineProperty(Ya,"__esModule",{value:!0});Ya.Scheduler=void 0;var EN=Dl,SN=function(){function e(r,t){t===void 0&&(t=e.now),this.schedulerActionCtor=r,this.now=t}return e.prototype.schedule=function(r,t,n){return t===void 0&&(t=0),new this.schedulerActionCtor(this,r).schedule(n,t)},e.now=EN.dateTimestampProvider.now,e}();Ya.Scheduler=SN;var PN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(nn,"__esModule",{value:!0});nn.AsyncScheduler=void 0;var jb=Ya,TN=function(e){PN(r,e);function r(t,n){n===void 0&&(n=jb.Scheduler.now);var o=e.call(this,t,n)||this;return o.actions=[],o._active=!1,o}return r.prototype.flush=function(t){var n=this.actions;if(this._active){n.push(t);return}var o;this._active=!0;do if(o=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,o){for(;t=n.shift();)t.unsubscribe();throw o}},r}(jb.Scheduler);nn.AsyncScheduler=TN;var CN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Fl,"__esModule",{value:!0});Fl.AsapScheduler=void 0;var AN=nn,IN=function(e){CN(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.flush=function(t){this._active=!0;var n=this._scheduled;this._scheduled=void 0;var o=this.actions,i;t=t||o.shift();do if(i=t.execute(t.state,t.delay))break;while((t=o[0])&&t.id===n&&o.shift());if(this._active=!1,i){for(;(t=o[0])&&t.id===n&&o.shift();)t.unsubscribe();throw i}},r}(AN.AsyncScheduler);Fl.AsapScheduler=IN;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.asap=e.asapScheduler=void 0;var r=Ll,t=Fl;e.asapScheduler=new t.AsapScheduler(r.AsapAction),e.asap=e.asapScheduler})(vO);var ct={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.async=e.asyncScheduler=void 0;var r=rn,t=nn;e.asyncScheduler=new t.AsyncScheduler(r.AsyncAction),e.async=e.asyncScheduler})(ct);var bO={},xl={},RN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(xl,"__esModule",{value:!0});xl.QueueAction=void 0;var jN=rn,$N=function(e){RN(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o}return r.prototype.schedule=function(t,n){return n===void 0&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},r.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),o!=null&&o>0||o==null&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,o):(t.flush(this),0)},r}(jN.AsyncAction);xl.QueueAction=$N;var Bl={},NN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Bl,"__esModule",{value:!0});Bl.QueueScheduler=void 0;var kN=nn,MN=function(e){NN(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(kN.AsyncScheduler);Bl.QueueScheduler=MN;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.queue=e.queueScheduler=void 0;var r=xl,t=Bl;e.queueScheduler=new t.QueueScheduler(r.QueueAction),e.queue=e.queueScheduler})(bO);var mO={},Vl={},DN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Vl,"__esModule",{value:!0});Vl.AnimationFrameAction=void 0;var LN=rn,$b=h_,UN=function(e){DN(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o}return r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),o!==null&&o>0?e.prototype.requestAsyncId.call(this,t,n,o):(t.actions.push(this),t._scheduled||(t._scheduled=$b.animationFrameProvider.requestAnimationFrame(function(){return t.flush(void 0)})))},r.prototype.recycleAsyncId=function(t,n,o){var i;if(o===void 0&&(o=0),o!=null?o>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,o);var a=t.actions;n!=null&&n===t._scheduled&&((i=a[a.length-1])===null||i===void 0?void 0:i.id)!==n&&($b.animationFrameProvider.cancelAnimationFrame(n),t._scheduled=void 0)},r}(LN.AsyncAction);Vl.AnimationFrameAction=UN;var Wl={},FN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Wl,"__esModule",{value:!0});Wl.AnimationFrameScheduler=void 0;var xN=nn,BN=function(e){FN(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.flush=function(t){this._active=!0;var n;t?n=t.id:(n=this._scheduled,this._scheduled=void 0);var o=this.actions,i;t=t||o.shift();do if(i=t.execute(t.state,t.delay))break;while((t=o[0])&&t.id===n&&o.shift());if(this._active=!1,i){for(;(t=o[0])&&t.id===n&&o.shift();)t.unsubscribe();throw i}},r}(xN.AsyncScheduler);Wl.AnimationFrameScheduler=BN;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrame=e.animationFrameScheduler=void 0;var r=Vl,t=Wl;e.animationFrameScheduler=new t.AnimationFrameScheduler(r.AnimationFrameAction),e.animationFrame=e.animationFrameScheduler})(mO);var Lo={},gO=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Lo,"__esModule",{value:!0});Lo.VirtualAction=Lo.VirtualTimeScheduler=void 0;var VN=rn,WN=Ne,zN=nn,qN=function(e){gO(r,e);function r(t,n){t===void 0&&(t=wO),n===void 0&&(n=1/0);var o=e.call(this,t,function(){return o.frame})||this;return o.maxFrames=n,o.frame=0,o.index=-1,o}return r.prototype.flush=function(){for(var t=this,n=t.actions,o=t.maxFrames,i,a;(a=n[0])&&a.delay<=o&&(n.shift(),this.frame=a.delay,!(i=a.execute(a.state,a.delay))););if(i){for(;a=n.shift();)a.unsubscribe();throw i}},r.frameTimeFactor=10,r}(zN.AsyncScheduler);Lo.VirtualTimeScheduler=qN;var wO=function(e){gO(r,e);function r(t,n,o){o===void 0&&(o=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=o,i.active=!0,i.index=t.index=o,i}return r.prototype.schedule=function(t,n){if(n===void 0&&(n=0),Number.isFinite(n)){if(!this.id)return e.prototype.schedule.call(this,t,n);this.active=!1;var o=new r(this.scheduler,this.work);return this.add(o),o.schedule(t,n)}else return WN.Subscription.EMPTY},r.prototype.requestAsyncId=function(t,n,o){o===void 0&&(o=0),this.delay=t.frame+o;var i=t.actions;return i.push(this),i.sort(r.sortActions),1},r.prototype.recycleAsyncId=function(t,n,o){},r.prototype._execute=function(t,n){if(this.active===!0)return e.prototype._execute.call(this,t,n)},r.sortActions=function(t,n){return t.delay===n.delay?t.index===n.index?0:t.index>n.index?1:-1:t.delay>n.delay?1:-1},r}(VN.AsyncAction);Lo.VirtualAction=wO;var zl={},Dt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=void 0;var r=pe;e.EMPTY=new r.Observable(function(o){return o.complete()});function t(o){return o?n(o):e.EMPTY}e.empty=t;function n(o){return new r.Observable(function(i){return o.schedule(function(){return i.complete()})})}})(Dt);var ri={},Re={},Qn={};Object.defineProperty(Qn,"__esModule",{value:!0});Qn.isScheduler=void 0;var HN=de;function GN(e){return e&&HN.isFunction(e.schedule)}Qn.isScheduler=GN;Object.defineProperty(Re,"__esModule",{value:!0});Re.popNumber=Re.popScheduler=Re.popResultSelector=void 0;var KN=de,YN=Qn;function p_(e){return e[e.length-1]}function ZN(e){return KN.isFunction(p_(e))?e.pop():void 0}Re.popResultSelector=ZN;function QN(e){return YN.isScheduler(p_(e))?e.pop():void 0}Re.popScheduler=QN;function XN(e,r){return typeof p_(e)=="number"?e.pop():r}Re.popNumber=XN;var Ft={},Za={},ql={},W={},ni={};Object.defineProperty(ni,"__esModule",{value:!0});ni.isArrayLike=void 0;ni.isArrayLike=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};var Qa={};Object.defineProperty(Qa,"__esModule",{value:!0});Qa.isPromise=void 0;var JN=de;function ek(e){return JN.isFunction(e==null?void 0:e.then)}Qa.isPromise=ek;var Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});Xa.isInteropObservable=void 0;var tk=Yn,rk=de;function nk(e){return rk.isFunction(e[tk.observable])}Xa.isInteropObservable=nk;var Ja={};Object.defineProperty(Ja,"__esModule",{value:!0});Ja.isAsyncIterable=void 0;var ok=de;function ik(e){return Symbol.asyncIterator&&ok.isFunction(e==null?void 0:e[Symbol.asyncIterator])}Ja.isAsyncIterable=ik;var eu={};Object.defineProperty(eu,"__esModule",{value:!0});eu.createInvalidObservableTypeError=void 0;function ak(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}eu.createInvalidObservableTypeError=ak;var tu={},Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.iterator=Fn.getSymbolIterator=void 0;function OO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}Fn.getSymbolIterator=OO;Fn.iterator=OO();Object.defineProperty(tu,"__esModule",{value:!0});tu.isIterable=void 0;var uk=Fn,sk=de;function ck(e){return sk.isFunction(e==null?void 0:e[uk.iterator])}tu.isIterable=ck;var Wr={},lk=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Ao=f&&f.__await||function(e){return this instanceof Ao?(this.v=e,this):new Ao(e)},fk=f&&f.__asyncGenerator||function(e,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(e,r||[]),o,i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(h){n[h]&&(o[h]=function(p){return new Promise(function(v,_){i.push([h,p,v,_])>1||s(h,p)})})}function s(h,p){try{c(n[h](p))}catch(v){d(i[0][3],v)}}function c(h){h.value instanceof Ao?Promise.resolve(h.value.v).then(u,l):d(i[0][2],h)}function u(h){s("next",h)}function l(h){s("throw",h)}function d(h,p){h(p),i.shift(),i.length&&s(i[0][0],i[0][1])}};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.isReadableStreamLike=Wr.readableStreamLikeToAsyncGenerator=void 0;var dk=de;function hk(e){return fk(this,arguments,function(){var t,n,o,i;return lk(this,function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Ao(t.read())];case 3:return n=a.sent(),o=n.value,i=n.done,i?[4,Ao(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Ao(o)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}Wr.readableStreamLikeToAsyncGenerator=hk;function pk(e){return dk.isFunction(e==null?void 0:e.getReader)}Wr.isReadableStreamLike=pk;var vk=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},_k=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},yk=f&&f.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e[Symbol.asyncIterator],t;return r?r.call(e):(e=typeof nv=="function"?nv(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(a){return new Promise(function(s,c){a=e[i](a),o(s,c,a.done,a.value)})}}function o(i,a,s,c){Promise.resolve(c).then(function(u){i({value:u,done:s})},a)}},nv=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(W,"__esModule",{value:!0});W.fromReadableStreamLike=W.fromAsyncIterable=W.fromIterable=W.fromPromise=W.fromArrayLike=W.fromInteropObservable=W.innerFrom=void 0;var bk=ni,mk=Qa,oi=pe,gk=Xa,wk=Ja,Ok=eu,Ek=tu,EO=Wr,Sk=de,Pk=Ha,Tk=Yn;function Ck(e){if(e instanceof oi.Observable)return e;if(e!=null){if(gk.isInteropObservable(e))return SO(e);if(bk.isArrayLike(e))return PO(e);if(mk.isPromise(e))return TO(e);if(wk.isAsyncIterable(e))return v_(e);if(Ek.isIterable(e))return CO(e);if(EO.isReadableStreamLike(e))return AO(e)}throw Ok.createInvalidObservableTypeError(e)}W.innerFrom=Ck;function SO(e){return new oi.Observable(function(r){var t=e[Tk.observable]();if(Sk.isFunction(t.subscribe))return t.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}W.fromInteropObservable=SO;function PO(e){return new oi.Observable(function(r){for(var t=0;t<e.length&&!r.closed;t++)r.next(e[t]);r.complete()})}W.fromArrayLike=PO;function TO(e){return new oi.Observable(function(r){e.then(function(t){r.closed||(r.next(t),r.complete())},function(t){return r.error(t)}).then(null,Pk.reportUnhandledError)})}W.fromPromise=TO;function CO(e){return new oi.Observable(function(r){var t,n;try{for(var o=nv(e),i=o.next();!i.done;i=o.next()){var a=i.value;if(r.next(a),r.closed)return}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}r.complete()})}W.fromIterable=CO;function v_(e){return new oi.Observable(function(r){Ak(e,r).catch(function(t){return r.error(t)})})}W.fromAsyncIterable=v_;function AO(e){return v_(EO.readableStreamLikeToAsyncGenerator(e))}W.fromReadableStreamLike=AO;function Ak(e,r){var t,n,o,i;return vk(this,void 0,void 0,function(){var a,s;return _k(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),t=yk(e),c.label=1;case 1:return[4,t.next()];case 2:if(n=c.sent(),!!n.done)return[3,4];if(a=n.value,r.next(a),r.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=c.sent(),o={error:s},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(i=t.return)?[4,i.call(t)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return r.complete(),[2]}})})}var on={},xt={};Object.defineProperty(xt,"__esModule",{value:!0});xt.executeSchedule=void 0;function Ik(e,r,t,n,o){n===void 0&&(n=0),o===void 0&&(o=!1);var i=r.schedule(function(){t(),o?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(i),!o)return i}xt.executeSchedule=Ik;Object.defineProperty(on,"__esModule",{value:!0});on.observeOn=void 0;var tp=xt,Rk=U,jk=B;function $k(e,r){return r===void 0&&(r=0),Rk.operate(function(t,n){t.subscribe(jk.createOperatorSubscriber(n,function(o){return tp.executeSchedule(n,e,function(){return n.next(o)},r)},function(){return tp.executeSchedule(n,e,function(){return n.complete()},r)},function(o){return tp.executeSchedule(n,e,function(){return n.error(o)},r)}))})}on.observeOn=$k;var an={};Object.defineProperty(an,"__esModule",{value:!0});an.subscribeOn=void 0;var Nk=U;function kk(e,r){return r===void 0&&(r=0),Nk.operate(function(t,n){n.add(e.schedule(function(){return t.subscribe(n)},r))})}an.subscribeOn=kk;Object.defineProperty(ql,"__esModule",{value:!0});ql.scheduleObservable=void 0;var Mk=W,Dk=on,Lk=an;function Uk(e,r){return Mk.innerFrom(e).pipe(Lk.subscribeOn(r),Dk.observeOn(r))}ql.scheduleObservable=Uk;var Hl={};Object.defineProperty(Hl,"__esModule",{value:!0});Hl.schedulePromise=void 0;var Fk=W,xk=on,Bk=an;function Vk(e,r){return Fk.innerFrom(e).pipe(Bk.subscribeOn(r),xk.observeOn(r))}Hl.schedulePromise=Vk;var Gl={};Object.defineProperty(Gl,"__esModule",{value:!0});Gl.scheduleArray=void 0;var Wk=pe;function zk(e,r){return new Wk.Observable(function(t){var n=0;return r.schedule(function(){n===e.length?t.complete():(t.next(e[n++]),t.closed||this.schedule())})})}Gl.scheduleArray=zk;var ru={};Object.defineProperty(ru,"__esModule",{value:!0});ru.scheduleIterable=void 0;var qk=pe,Hk=Fn,Gk=de,Nb=xt;function Kk(e,r){return new qk.Observable(function(t){var n;return Nb.executeSchedule(t,r,function(){n=e[Hk.iterator](),Nb.executeSchedule(t,r,function(){var o,i,a;try{o=n.next(),i=o.value,a=o.done}catch(s){t.error(s);return}a?t.complete():t.next(i)},0,!0)}),function(){return Gk.isFunction(n==null?void 0:n.return)&&n.return()}})}ru.scheduleIterable=Kk;var nu={};Object.defineProperty(nu,"__esModule",{value:!0});nu.scheduleAsyncIterable=void 0;var Yk=pe,kb=xt;function Zk(e,r){if(!e)throw new Error("Iterable cannot be null");return new Yk.Observable(function(t){kb.executeSchedule(t,r,function(){var n=e[Symbol.asyncIterator]();kb.executeSchedule(t,r,function(){n.next().then(function(o){o.done?t.complete():t.next(o.value)})},0,!0)})})}nu.scheduleAsyncIterable=Zk;var Kl={};Object.defineProperty(Kl,"__esModule",{value:!0});Kl.scheduleReadableStreamLike=void 0;var Qk=nu,Xk=Wr;function Jk(e,r){return Qk.scheduleAsyncIterable(Xk.readableStreamLikeToAsyncGenerator(e),r)}Kl.scheduleReadableStreamLike=Jk;Object.defineProperty(Za,"__esModule",{value:!0});Za.scheduled=void 0;var eM=ql,tM=Hl,rM=Gl,nM=ru,oM=nu,iM=Xa,aM=Qa,uM=ni,sM=tu,cM=Ja,lM=eu,fM=Wr,dM=Kl;function hM(e,r){if(e!=null){if(iM.isInteropObservable(e))return eM.scheduleObservable(e,r);if(uM.isArrayLike(e))return rM.scheduleArray(e,r);if(aM.isPromise(e))return tM.schedulePromise(e,r);if(cM.isAsyncIterable(e))return oM.scheduleAsyncIterable(e,r);if(sM.isIterable(e))return nM.scheduleIterable(e,r);if(fM.isReadableStreamLike(e))return dM.scheduleReadableStreamLike(e,r)}throw lM.createInvalidObservableTypeError(e)}Za.scheduled=hM;Object.defineProperty(Ft,"__esModule",{value:!0});Ft.from=void 0;var pM=Za,vM=W;function _M(e,r){return r?pM.scheduled(e,r):vM.innerFrom(e)}Ft.from=_M;Object.defineProperty(ri,"__esModule",{value:!0});ri.of=void 0;var yM=Re,bM=Ft;function mM(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=yM.popScheduler(e);return bM.from(e,t)}ri.of=mM;var ou={};Object.defineProperty(ou,"__esModule",{value:!0});ou.throwError=void 0;var gM=pe,wM=de;function OM(e,r){var t=wM.isFunction(e)?e:function(){return e},n=function(o){return o.error(t())};return new gM.Observable(r?function(o){return r.schedule(n,0,o)}:n)}ou.throwError=OM;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.observeNotification=e.Notification=e.NotificationKind=void 0;var r=Dt,t=ri,n=ou,o=de;(function(s){s.NEXT="N",s.ERROR="E",s.COMPLETE="C"})(e.NotificationKind||(e.NotificationKind={}));var i=function(){function s(c,u,l){this.kind=c,this.value=u,this.error=l,this.hasValue=c==="N"}return s.prototype.observe=function(c){return a(this,c)},s.prototype.do=function(c,u,l){var d=this,h=d.kind,p=d.value,v=d.error;return h==="N"?c==null?void 0:c(p):h==="E"?u==null?void 0:u(v):l==null?void 0:l()},s.prototype.accept=function(c,u,l){var d;return o.isFunction((d=c)===null||d===void 0?void 0:d.next)?this.observe(c):this.do(c,u,l)},s.prototype.toObservable=function(){var c=this,u=c.kind,l=c.value,d=c.error,h=u==="N"?t.of(l):u==="E"?n.throwError(function(){return d}):u==="C"?r.EMPTY:0;if(!h)throw new TypeError("Unexpected notification kind "+u);return h},s.createNext=function(c){return new s("N",c)},s.createError=function(c){return new s("E",void 0,c)},s.createComplete=function(){return s.completeNotification},s.completeNotification=new s("C"),s}();e.Notification=i;function a(s,c){var u,l,d,h=s,p=h.kind,v=h.value,_=h.error;if(typeof p!="string")throw new TypeError('Invalid notification, missing "kind"');p==="N"?(u=c.next)===null||u===void 0||u.call(c,v):p==="E"?(l=c.error)===null||l===void 0||l.call(c,_):(d=c.complete)===null||d===void 0||d.call(c)}e.observeNotification=a})(zl);var Yl={};Object.defineProperty(Yl,"__esModule",{value:!0});Yl.isObservable=void 0;var EM=pe,Mb=de;function SM(e){return!!e&&(e instanceof EM.Observable||Mb.isFunction(e.lift)&&Mb.isFunction(e.subscribe))}Yl.isObservable=SM;var Zl={},Jt={};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.EmptyError=void 0;var PM=Xt;Jt.EmptyError=PM.createErrorClass(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});Object.defineProperty(Zl,"__esModule",{value:!0});Zl.lastValueFrom=void 0;var TM=Jt;function CM(e,r){var t=typeof r=="object";return new Promise(function(n,o){var i=!1,a;e.subscribe({next:function(s){a=s,i=!0},error:o,complete:function(){i?n(a):t?n(r.defaultValue):o(new TM.EmptyError)}})})}Zl.lastValueFrom=CM;var Ql={};Object.defineProperty(Ql,"__esModule",{value:!0});Ql.firstValueFrom=void 0;var AM=Jt,IM=Xo;function RM(e,r){var t=typeof r=="object";return new Promise(function(n,o){var i=new IM.SafeSubscriber({next:function(a){n(a),i.unsubscribe()},error:o,complete:function(){t?n(r.defaultValue):o(new AM.EmptyError)}});e.subscribe(i)})}Ql.firstValueFrom=RM;var iu={};Object.defineProperty(iu,"__esModule",{value:!0});iu.ArgumentOutOfRangeError=void 0;var jM=Xt;iu.ArgumentOutOfRangeError=jM.createErrorClass(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}});var au={};Object.defineProperty(au,"__esModule",{value:!0});au.NotFoundError=void 0;var $M=Xt;au.NotFoundError=$M.createErrorClass(function(e){return function(t){e(this),this.name="NotFoundError",this.message=t}});var uu={};Object.defineProperty(uu,"__esModule",{value:!0});uu.SequenceError=void 0;var NM=Xt;uu.SequenceError=NM.createErrorClass(function(e){return function(t){e(this),this.name="SequenceError",this.message=t}});var Pa={},ii={};Object.defineProperty(ii,"__esModule",{value:!0});ii.isValidDate=void 0;function kM(e){return e instanceof Date&&!isNaN(e)}ii.isValidDate=kM;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.timeout=e.TimeoutError=void 0;var r=ct,t=ii,n=U,o=W,i=Xt,a=B,s=xt;e.TimeoutError=i.createErrorClass(function(l){return function(h){h===void 0&&(h=null),l(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=h}});function c(l,d){var h=t.isValidDate(l)?{first:l}:typeof l=="number"?{each:l}:l,p=h.first,v=h.each,_=h.with,b=_===void 0?u:_,w=h.scheduler,E=w===void 0?d??r.asyncScheduler:w,S=h.meta,O=S===void 0?null:S;if(p==null&&v==null)throw new TypeError("No timeout provided.");return n.operate(function(A,$){var I,L,X=null,ae=0,_e=function(ne){L=s.executeSchedule($,E,function(){try{I.unsubscribe(),o.innerFrom(b({meta:O,lastValue:X,seen:ae})).subscribe($)}catch(ve){$.error(ve)}},ne)};I=A.subscribe(a.createOperatorSubscriber($,function(ne){L==null||L.unsubscribe(),ae++,$.next(X=ne),v>0&&_e(v)},void 0,void 0,function(){L!=null&&L.closed||L==null||L.unsubscribe(),X=null})),!ae&&_e(p!=null?typeof p=="number"?p:+p-E.now():v)})}e.timeout=c;function u(l){throw new e.TimeoutError(l)}})(Pa);var Xl={},su={},er={},Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.map=void 0;var MM=U,DM=B;function LM(e,r){return MM.operate(function(t,n){var o=0;t.subscribe(DM.createOperatorSubscriber(n,function(i){n.next(e.call(r,i,o++))}))})}Bt.map=LM;var UM=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},FM=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(er,"__esModule",{value:!0});er.mapOneOrManyArgs=void 0;var xM=Bt,BM=Array.isArray;function VM(e,r){return BM(r)?e.apply(void 0,FM([],UM(r))):e(r)}function WM(e){return xM.map(function(r){return VM(e,r)})}er.mapOneOrManyArgs=WM;var zM=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Db=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(su,"__esModule",{value:!0});su.bindCallbackInternals=void 0;var qM=Qn,HM=pe,GM=an,KM=er,YM=on,ZM=ti;function ov(e,r,t,n){if(t)if(qM.isScheduler(t))n=t;else return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return ov(e,r,n).apply(this,o).pipe(KM.mapOneOrManyArgs(t))};return n?function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return ov(e,r).apply(this,o).pipe(GM.subscribeOn(n),YM.observeOn(n))}:function(){for(var o=this,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=new ZM.AsyncSubject,c=!0;return new HM.Observable(function(u){var l=s.subscribe(u);if(c){c=!1;var d=!1,h=!1;r.apply(o,Db(Db([],zM(i)),[function(){for(var p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];if(e){var _=p.shift();if(_!=null){s.error(_);return}}s.next(1<p.length?p:p[0]),h=!0,d&&s.complete()}])),h&&s.complete(),d=!0}return l})}}su.bindCallbackInternals=ov;Object.defineProperty(Xl,"__esModule",{value:!0});Xl.bindCallback=void 0;var QM=su;function XM(e,r,t){return QM.bindCallbackInternals(!1,e,r,t)}Xl.bindCallback=XM;var Jl={};Object.defineProperty(Jl,"__esModule",{value:!0});Jl.bindNodeCallback=void 0;var JM=su;function e2(e,r,t){return JM.bindCallbackInternals(!0,e,r,t)}Jl.bindNodeCallback=e2;var zr={},cu={};Object.defineProperty(cu,"__esModule",{value:!0});cu.argsArgArrayOrObject=void 0;var t2=Array.isArray,r2=Object.getPrototypeOf,n2=Object.prototype,o2=Object.keys;function i2(e){if(e.length===1){var r=e[0];if(t2(r))return{args:r,keys:null};if(a2(r)){var t=o2(r);return{args:t.map(function(n){return r[n]}),keys:t}}}return{args:e,keys:null}}cu.argsArgArrayOrObject=i2;function a2(e){return e&&typeof e=="object"&&r2(e)===n2}var lu={};Object.defineProperty(lu,"__esModule",{value:!0});lu.createObject=void 0;function u2(e,r){return e.reduce(function(t,n,o){return t[n]=r[o],t},{})}lu.createObject=u2;Object.defineProperty(zr,"__esModule",{value:!0});zr.combineLatestInit=zr.combineLatest=void 0;var s2=pe,c2=cu,IO=Ft,RO=Me,l2=er,Lb=Re,f2=lu,d2=B,h2=xt;function p2(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Lb.popScheduler(e),n=Lb.popResultSelector(e),o=c2.argsArgArrayOrObject(e),i=o.args,a=o.keys;if(i.length===0)return IO.from([],t);var s=new s2.Observable(jO(i,t,a?function(c){return f2.createObject(a,c)}:RO.identity));return n?s.pipe(l2.mapOneOrManyArgs(n)):s}zr.combineLatest=p2;function jO(e,r,t){return t===void 0&&(t=RO.identity),function(n){Ub(r,function(){for(var o=e.length,i=new Array(o),a=o,s=o,c=function(l){Ub(r,function(){var d=IO.from(e[l],r),h=!1;d.subscribe(d2.createOperatorSubscriber(n,function(p){i[l]=p,h||(h=!0,s--),s||n.next(t(i.slice()))},function(){--a||n.complete()}))},n)},u=0;u<o;u++)c(u)},n)}}zr.combineLatestInit=jO;function Ub(e,r,t){e?h2.executeSchedule(t,e,r):r()}var Xn={},Jn={},un={},Pt={},ai={};Object.defineProperty(ai,"__esModule",{value:!0});ai.mergeInternals=void 0;var v2=W,_2=xt,Fb=B;function y2(e,r,t,n,o,i,a,s){var c=[],u=0,l=0,d=!1,h=function(){d&&!c.length&&!u&&r.complete()},p=function(_){return u<n?v(_):c.push(_)},v=function(_){i&&r.next(_),u++;var b=!1;v2.innerFrom(t(_,l++)).subscribe(Fb.createOperatorSubscriber(r,function(w){o==null||o(w),i?p(w):r.next(w)},function(){b=!0},void 0,function(){if(b)try{u--;for(var w=function(){var E=c.shift();a?_2.executeSchedule(r,a,function(){return v(E)}):v(E)};c.length&&u<n;)w();h()}catch(E){r.error(E)}}))};return e.subscribe(Fb.createOperatorSubscriber(r,p,function(){d=!0,h()})),function(){s==null||s()}}ai.mergeInternals=y2;Object.defineProperty(Pt,"__esModule",{value:!0});Pt.mergeMap=void 0;var b2=Bt,m2=W,g2=U,w2=ai,O2=de;function $O(e,r,t){return t===void 0&&(t=1/0),O2.isFunction(r)?$O(function(n,o){return b2.map(function(i,a){return r(n,i,o,a)})(m2.innerFrom(e(n,o)))},t):(typeof r=="number"&&(t=r),g2.operate(function(n,o){return w2.mergeInternals(n,o,e,t)}))}Pt.mergeMap=$O;Object.defineProperty(un,"__esModule",{value:!0});un.mergeAll=void 0;var E2=Pt,S2=Me;function P2(e){return e===void 0&&(e=1/0),E2.mergeMap(S2.identity,e)}un.mergeAll=P2;Object.defineProperty(Jn,"__esModule",{value:!0});Jn.concatAll=void 0;var T2=un;function C2(){return T2.mergeAll(1)}Jn.concatAll=C2;Object.defineProperty(Xn,"__esModule",{value:!0});Xn.concat=void 0;var A2=Jn,I2=Re,R2=Ft;function j2(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return A2.concatAll()(R2.from(e,I2.popScheduler(e)))}Xn.concat=j2;var ef={},eo={};Object.defineProperty(eo,"__esModule",{value:!0});eo.defer=void 0;var $2=pe,N2=W;function k2(e){return new $2.Observable(function(r){N2.innerFrom(e()).subscribe(r)})}eo.defer=k2;Object.defineProperty(ef,"__esModule",{value:!0});ef.connectable=void 0;var M2=Ae,D2=pe,L2=eo,U2={connector:function(){return new M2.Subject},resetOnDisconnect:!0};function F2(e,r){r===void 0&&(r=U2);var t=null,n=r.connector,o=r.resetOnDisconnect,i=o===void 0?!0:o,a=n(),s=new D2.Observable(function(c){return a.subscribe(c)});return s.connect=function(){return(!t||t.closed)&&(t=L2.defer(function(){return e}).subscribe(a),i&&t.add(function(){return a=n()})),t},s}ef.connectable=F2;var tf={};Object.defineProperty(tf,"__esModule",{value:!0});tf.forkJoin=void 0;var x2=pe,B2=cu,V2=W,W2=Re,z2=B,q2=er,H2=lu;function G2(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=W2.popResultSelector(e),n=B2.argsArgArrayOrObject(e),o=n.args,i=n.keys,a=new x2.Observable(function(s){var c=o.length;if(!c){s.complete();return}for(var u=new Array(c),l=c,d=c,h=function(v){var _=!1;V2.innerFrom(o[v]).subscribe(z2.createOperatorSubscriber(s,function(b){_||(_=!0,d--),u[v]=b},function(){return l--},void 0,function(){(!l||!_)&&(d||s.next(i?H2.createObject(i,u):u),s.complete())}))},p=0;p<c;p++)h(p)});return t?a.pipe(q2.mapOneOrManyArgs(t)):a}tf.forkJoin=G2;var rf={},K2=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(rf,"__esModule",{value:!0});rf.fromEvent=void 0;var Y2=W,Z2=pe,Q2=Pt,X2=ni,xn=de,J2=er,eD=["addListener","removeListener"],tD=["addEventListener","removeEventListener"],rD=["on","off"];function iv(e,r,t,n){if(xn.isFunction(t)&&(n=t,t=void 0),n)return iv(e,r,t).pipe(J2.mapOneOrManyArgs(n));var o=K2(iD(e)?tD.map(function(s){return function(c){return e[s](r,c,t)}}):nD(e)?eD.map(xb(e,r)):oD(e)?rD.map(xb(e,r)):[],2),i=o[0],a=o[1];if(!i&&X2.isArrayLike(e))return Q2.mergeMap(function(s){return iv(s,r,t)})(Y2.innerFrom(e));if(!i)throw new TypeError("Invalid event target");return new Z2.Observable(function(s){var c=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return s.next(1<u.length?u:u[0])};return i(c),function(){return a(c)}})}rf.fromEvent=iv;function xb(e,r){return function(t){return function(n){return e[t](r,n)}}}function nD(e){return xn.isFunction(e.addListener)&&xn.isFunction(e.removeListener)}function oD(e){return xn.isFunction(e.on)&&xn.isFunction(e.off)}function iD(e){return xn.isFunction(e.addEventListener)&&xn.isFunction(e.removeEventListener)}var nf={};Object.defineProperty(nf,"__esModule",{value:!0});nf.fromEventPattern=void 0;var aD=pe,uD=de,sD=er;function NO(e,r,t){return t?NO(e,r).pipe(sD.mapOneOrManyArgs(t)):new aD.Observable(function(n){var o=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return n.next(a.length===1?a[0]:a)},i=e(o);return uD.isFunction(r)?function(){return r(o,i)}:void 0})}nf.fromEventPattern=NO;var of={},cD=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(of,"__esModule",{value:!0});of.generate=void 0;var Bb=Me,lD=Qn,fD=eo,dD=ru;function hD(e,r,t,n,o){var i,a,s,c;arguments.length===1?(i=e,c=i.initialState,r=i.condition,t=i.iterate,a=i.resultSelector,s=a===void 0?Bb.identity:a,o=i.scheduler):(c=e,!n||lD.isScheduler(n)?(s=Bb.identity,o=n):s=n);function u(){var l;return cD(this,function(d){switch(d.label){case 0:l=c,d.label=1;case 1:return!r||r(l)?[4,s(l)]:[3,4];case 2:d.sent(),d.label=3;case 3:return l=t(l),[3,1];case 4:return[2]}})}return fD.defer(o?function(){return dD.scheduleIterable(u(),o)}:u)}of.generate=hD;var af={};Object.defineProperty(af,"__esModule",{value:!0});af.iif=void 0;var pD=eo;function vD(e,r,t){return pD.defer(function(){return e()?r:t})}af.iif=vD;var fu={},tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.timer=void 0;var _D=pe,yD=ct,bD=Qn,mD=ii;function gD(e,r,t){e===void 0&&(e=0),t===void 0&&(t=yD.async);var n=-1;return r!=null&&(bD.isScheduler(r)?t=r:n=r),new _D.Observable(function(o){var i=mD.isValidDate(e)?+e-t.now():e;i<0&&(i=0);var a=0;return t.schedule(function(){o.closed||(o.next(a++),0<=n?this.schedule(void 0,n):o.complete())},i)})}tr.timer=gD;Object.defineProperty(fu,"__esModule",{value:!0});fu.interval=void 0;var wD=ct,OD=tr;function ED(e,r){return e===void 0&&(e=0),r===void 0&&(r=wD.asyncScheduler),e<0&&(e=0),OD.timer(e,e,r)}fu.interval=ED;var uf={};Object.defineProperty(uf,"__esModule",{value:!0});uf.merge=void 0;var SD=un,PD=W,TD=Dt,Vb=Re,CD=Ft;function AD(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Vb.popScheduler(e),n=Vb.popNumber(e,1/0),o=e;return o.length?o.length===1?PD.innerFrom(o[0]):SD.mergeAll(n)(CD.from(o,t)):TD.EMPTY}uf.merge=AD;var av={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.never=e.NEVER=void 0;var r=pe,t=ke;e.NEVER=new r.Observable(t.noop);function n(){return e.NEVER}e.never=n})(av);var du={},gr={};Object.defineProperty(gr,"__esModule",{value:!0});gr.argsOrArgArray=void 0;var ID=Array.isArray;function RD(e){return e.length===1&&ID(e[0])?e[0]:e}gr.argsOrArgArray=RD;Object.defineProperty(du,"__esModule",{value:!0});du.onErrorResumeNext=void 0;var jD=pe,$D=gr,ND=B,Wb=ke,kD=W;function MD(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=$D.argsOrArgArray(e);return new jD.Observable(function(n){var o=0,i=function(){if(o<t.length){var a=void 0;try{a=kD.innerFrom(t[o++])}catch{i();return}var s=new ND.OperatorSubscriber(n,void 0,Wb.noop,Wb.noop);a.subscribe(s),s.add(i)}else n.complete()};i()})}du.onErrorResumeNext=MD;var sf={};Object.defineProperty(sf,"__esModule",{value:!0});sf.pairs=void 0;var DD=Ft;function LD(e,r){return DD.from(Object.entries(e),r)}sf.pairs=LD;var cf={},hu={};Object.defineProperty(hu,"__esModule",{value:!0});hu.not=void 0;function UD(e,r){return function(t,n){return!e.call(r,t,n)}}hu.not=UD;var Vt={};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.filter=void 0;var FD=U,xD=B;function BD(e,r){return FD.operate(function(t,n){var o=0;t.subscribe(xD.createOperatorSubscriber(n,function(i){return e.call(r,i,o++)&&n.next(i)}))})}Vt.filter=BD;Object.defineProperty(cf,"__esModule",{value:!0});cf.partition=void 0;var VD=hu,zb=Vt,qb=W;function WD(e,r,t){return[zb.filter(r,t)(qb.innerFrom(e)),zb.filter(VD.not(r,t))(qb.innerFrom(e))]}cf.partition=WD;var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.raceInit=Bn.race=void 0;var zD=pe,kO=W,qD=gr,HD=B;function GD(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e=qD.argsOrArgArray(e),e.length===1?kO.innerFrom(e[0]):new zD.Observable(MO(e))}Bn.race=GD;function MO(e){return function(r){for(var t=[],n=function(i){t.push(kO.innerFrom(e[i]).subscribe(HD.createOperatorSubscriber(r,function(a){if(t){for(var s=0;s<t.length;s++)s!==i&&t[s].unsubscribe();t=null}r.next(a)})))},o=0;t&&!r.closed&&o<e.length;o++)n(o)}}Bn.raceInit=MO;var lf={};Object.defineProperty(lf,"__esModule",{value:!0});lf.range=void 0;var KD=pe,YD=Dt;function ZD(e,r,t){if(r==null&&(r=e,e=0),r<=0)return YD.EMPTY;var n=r+e;return new KD.Observable(t?function(o){var i=e;return t.schedule(function(){i<n?(o.next(i++),this.schedule()):o.complete()})}:function(o){for(var i=e;i<n&&!o.closed;)o.next(i++);o.complete()})}lf.range=ZD;var ff={};Object.defineProperty(ff,"__esModule",{value:!0});ff.using=void 0;var QD=pe,XD=W,JD=Dt;function eL(e,r){return new QD.Observable(function(t){var n=e(),o=r(n),i=o?XD.innerFrom(o):JD.EMPTY;return i.subscribe(t),function(){n&&n.unsubscribe()}})}ff.using=eL;var ui={},tL=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},rL=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(ui,"__esModule",{value:!0});ui.zip=void 0;var nL=pe,oL=W,iL=gr,aL=Dt,uL=B,sL=Re;function cL(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=sL.popResultSelector(e),n=iL.argsOrArgArray(e);return n.length?new nL.Observable(function(o){var i=n.map(function(){return[]}),a=n.map(function(){return!1});o.add(function(){i=a=null});for(var s=function(u){oL.innerFrom(n[u]).subscribe(uL.createOperatorSubscriber(o,function(l){if(i[u].push(l),i.every(function(h){return h.length})){var d=i.map(function(h){return h.shift()});o.next(t?t.apply(void 0,rL([],tL(d))):d),i.some(function(h,p){return!h.length&&a[p]})&&o.complete()}},function(){a[u]=!0,!i[u].length&&o.complete()}))},c=0;!o.closed&&c<n.length;c++)s(c);return function(){i=a=null}}):aL.EMPTY}ui.zip=cL;var DO={};Object.defineProperty(DO,"__esModule",{value:!0});var si={};Object.defineProperty(si,"__esModule",{value:!0});si.audit=void 0;var lL=U,fL=W,Hb=B;function dL(e){return lL.operate(function(r,t){var n=!1,o=null,i=null,a=!1,s=function(){if(i==null||i.unsubscribe(),i=null,n){n=!1;var u=o;o=null,t.next(u)}a&&t.complete()},c=function(){i=null,a&&t.complete()};r.subscribe(Hb.createOperatorSubscriber(t,function(u){n=!0,o=u,i||fL.innerFrom(e(u)).subscribe(i=Hb.createOperatorSubscriber(t,s,c))},function(){a=!0,(!n||!i||i.closed)&&t.complete()}))})}si.audit=dL;var pu={};Object.defineProperty(pu,"__esModule",{value:!0});pu.auditTime=void 0;var hL=ct,pL=si,vL=tr;function _L(e,r){return r===void 0&&(r=hL.asyncScheduler),pL.audit(function(){return vL.timer(e,r)})}pu.auditTime=_L;var vu={};Object.defineProperty(vu,"__esModule",{value:!0});vu.buffer=void 0;var yL=U,bL=ke,Gb=B,mL=W;function gL(e){return yL.operate(function(r,t){var n=[];return r.subscribe(Gb.createOperatorSubscriber(t,function(o){return n.push(o)},function(){t.next(n),t.complete()})),mL.innerFrom(e).subscribe(Gb.createOperatorSubscriber(t,function(){var o=n;n=[],t.next(o)},bL.noop)),function(){n=null}})}vu.buffer=gL;var _u={},rp=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(_u,"__esModule",{value:!0});_u.bufferCount=void 0;var wL=U,OL=B,EL=Ut;function SL(e,r){return r===void 0&&(r=null),r=r??e,wL.operate(function(t,n){var o=[],i=0;t.subscribe(OL.createOperatorSubscriber(n,function(a){var s,c,u,l,d=null;i++%r===0&&o.push([]);try{for(var h=rp(o),p=h.next();!p.done;p=h.next()){var v=p.value;v.push(a),e<=v.length&&(d=d??[],d.push(v))}}catch(w){s={error:w}}finally{try{p&&!p.done&&(c=h.return)&&c.call(h)}finally{if(s)throw s.error}}if(d)try{for(var _=rp(d),b=_.next();!b.done;b=_.next()){var v=b.value;EL.arrRemove(o,v),n.next(v)}}catch(w){u={error:w}}finally{try{b&&!b.done&&(l=_.return)&&l.call(_)}finally{if(u)throw u.error}}},function(){var a,s;try{for(var c=rp(o),u=c.next();!u.done;u=c.next()){var l=u.value;n.next(l)}}catch(d){a={error:d}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}n.complete()},void 0,function(){o=null}))})}_u.bufferCount=SL;var yu={},PL=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(yu,"__esModule",{value:!0});yu.bufferTime=void 0;var TL=Ne,CL=U,AL=B,IL=Ut,RL=ct,jL=Re,Kb=xt;function $L(e){for(var r,t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=(r=jL.popScheduler(n))!==null&&r!==void 0?r:RL.asyncScheduler,a=(t=n[0])!==null&&t!==void 0?t:null,s=n[1]||1/0;return CL.operate(function(c,u){var l=[],d=!1,h=function(_){var b=_.buffer,w=_.subs;w.unsubscribe(),IL.arrRemove(l,_),u.next(b),d&&p()},p=function(){if(l){var _=new TL.Subscription;u.add(_);var b=[],w={buffer:b,subs:_};l.push(w),Kb.executeSchedule(_,i,function(){return h(w)},e)}};a!==null&&a>=0?Kb.executeSchedule(u,i,p,a,!0):d=!0,p();var v=AL.createOperatorSubscriber(u,function(_){var b,w,E=l.slice();try{for(var S=PL(E),O=S.next();!O.done;O=S.next()){var A=O.value,$=A.buffer;$.push(_),s<=$.length&&h(A)}}catch(I){b={error:I}}finally{try{O&&!O.done&&(w=S.return)&&w.call(S)}finally{if(b)throw b.error}}},function(){for(;l!=null&&l.length;)u.next(l.shift().buffer);v==null||v.unsubscribe(),u.complete(),u.unsubscribe()},void 0,function(){return l=null});c.subscribe(v)})}yu.bufferTime=$L;var bu={},NL=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(bu,"__esModule",{value:!0});bu.bufferToggle=void 0;var kL=Ne,ML=U,Yb=W,np=B,Zb=ke,DL=Ut;function LL(e,r){return ML.operate(function(t,n){var o=[];Yb.innerFrom(e).subscribe(np.createOperatorSubscriber(n,function(i){var a=[];o.push(a);var s=new kL.Subscription,c=function(){DL.arrRemove(o,a),n.next(a),s.unsubscribe()};s.add(Yb.innerFrom(r(i)).subscribe(np.createOperatorSubscriber(n,c,Zb.noop)))},Zb.noop)),t.subscribe(np.createOperatorSubscriber(n,function(i){var a,s;try{for(var c=NL(o),u=c.next();!u.done;u=c.next()){var l=u.value;l.push(i)}}catch(d){a={error:d}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}},function(){for(;o.length>0;)n.next(o.shift());n.complete()}))})}bu.bufferToggle=LL;var mu={};Object.defineProperty(mu,"__esModule",{value:!0});mu.bufferWhen=void 0;var UL=U,FL=ke,Qb=B,xL=W;function BL(e){return UL.operate(function(r,t){var n=null,o=null,i=function(){o==null||o.unsubscribe();var a=n;n=[],a&&t.next(a),xL.innerFrom(e()).subscribe(o=Qb.createOperatorSubscriber(t,i,FL.noop))};i(),r.subscribe(Qb.createOperatorSubscriber(t,function(a){return n==null?void 0:n.push(a)},function(){n&&t.next(n),t.complete()},void 0,function(){return n=o=null}))})}mu.bufferWhen=BL;var gu={};Object.defineProperty(gu,"__esModule",{value:!0});gu.catchError=void 0;var VL=W,WL=B,zL=U;function LO(e){return zL.operate(function(r,t){var n=null,o=!1,i;n=r.subscribe(WL.createOperatorSubscriber(t,void 0,void 0,function(a){i=VL.innerFrom(e(a,LO(e)(r))),n?(n.unsubscribe(),n=null,i.subscribe(t)):o=!0})),o&&(n.unsubscribe(),n=null,i.subscribe(t))})}gu.catchError=LO;var wu={},ci={},Ou={},li={},wr={},Eu={};Object.defineProperty(Eu,"__esModule",{value:!0});Eu.scanInternals=void 0;var qL=B;function HL(e,r,t,n,o){return function(i,a){var s=t,c=r,u=0;i.subscribe(qL.createOperatorSubscriber(a,function(l){var d=u++;c=s?e(c,l,d):(s=!0,l),n&&a.next(c)},o&&function(){s&&a.next(c),a.complete()}))}}Eu.scanInternals=HL;Object.defineProperty(wr,"__esModule",{value:!0});wr.reduce=void 0;var GL=Eu,KL=U;function YL(e,r){return KL.operate(GL.scanInternals(e,r,arguments.length>=2,!1,!0))}wr.reduce=YL;Object.defineProperty(li,"__esModule",{value:!0});li.toArray=void 0;var ZL=wr,QL=U,XL=function(e,r){return e.push(r),e};function JL(){return QL.operate(function(e,r){ZL.reduce(XL,[])(e).subscribe(r)})}li.toArray=JL;Object.defineProperty(Ou,"__esModule",{value:!0});Ou.joinAllInternals=void 0;var eU=Me,tU=er,rU=br,nU=Pt,oU=li;function iU(e,r){return rU.pipe(oU.toArray(),nU.mergeMap(function(t){return e(t)}),r?tU.mapOneOrManyArgs(r):eU.identity)}Ou.joinAllInternals=iU;Object.defineProperty(ci,"__esModule",{value:!0});ci.combineLatestAll=void 0;var aU=zr,uU=Ou;function sU(e){return uU.joinAllInternals(aU.combineLatest,e)}ci.combineLatestAll=sU;Object.defineProperty(wu,"__esModule",{value:!0});wu.combineAll=void 0;var cU=ci;wu.combineAll=cU.combineLatestAll;var Su={},Pu={},Xb=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Jb=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Pu,"__esModule",{value:!0});Pu.combineLatest=void 0;var lU=zr,fU=U,dU=gr,hU=er,pU=br,vU=Re;function UO(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=vU.popResultSelector(e);return t?pU.pipe(UO.apply(void 0,Jb([],Xb(e))),hU.mapOneOrManyArgs(t)):fU.operate(function(n,o){lU.combineLatestInit(Jb([n],Xb(dU.argsOrArgArray(e))))(o)})}Pu.combineLatest=UO;var _U=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},yU=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Su,"__esModule",{value:!0});Su.combineLatestWith=void 0;var bU=Pu;function mU(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return bU.combineLatest.apply(void 0,yU([],_U(e)))}Su.combineLatestWith=mU;var fi={};Object.defineProperty(fi,"__esModule",{value:!0});fi.concatMap=void 0;var em=Pt,gU=de;function wU(e,r){return gU.isFunction(r)?em.mergeMap(e,r,1):em.mergeMap(e,1)}fi.concatMap=wU;var Tu={};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.concatMapTo=void 0;var tm=fi,OU=de;function EU(e,r){return OU.isFunction(r)?tm.concatMap(function(){return e},r):tm.concatMap(function(){return e})}Tu.concatMapTo=EU;var Cu={},Au={},SU=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},PU=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Au,"__esModule",{value:!0});Au.concat=void 0;var TU=U,CU=Jn,AU=Re,IU=Ft;function RU(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=AU.popScheduler(e);return TU.operate(function(n,o){CU.concatAll()(IU.from(PU([n],SU(e)),t)).subscribe(o)})}Au.concat=RU;var jU=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},$U=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Cu,"__esModule",{value:!0});Cu.concatWith=void 0;var NU=Au;function kU(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return NU.concat.apply(void 0,$U([],jU(e)))}Cu.concatWith=kU;var to={},df={};Object.defineProperty(df,"__esModule",{value:!0});df.fromSubscribable=void 0;var MU=pe;function DU(e){return new MU.Observable(function(r){return e.subscribe(r)})}df.fromSubscribable=DU;Object.defineProperty(to,"__esModule",{value:!0});to.connect=void 0;var LU=Ae,UU=W,FU=U,xU=df,BU={connector:function(){return new LU.Subject}};function VU(e,r){r===void 0&&(r=BU);var t=r.connector;return FU.operate(function(n,o){var i=t();UU.innerFrom(e(xU.fromSubscribable(i))).subscribe(o),o.add(n.subscribe(i))})}to.connect=VU;var Iu={};Object.defineProperty(Iu,"__esModule",{value:!0});Iu.count=void 0;var WU=wr;function zU(e){return WU.reduce(function(r,t,n){return!e||e(t,n)?r+1:r},0)}Iu.count=zU;var Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});Ru.debounce=void 0;var qU=U,HU=ke,rm=B,GU=W;function KU(e){return qU.operate(function(r,t){var n=!1,o=null,i=null,a=function(){if(i==null||i.unsubscribe(),i=null,n){n=!1;var s=o;o=null,t.next(s)}};r.subscribe(rm.createOperatorSubscriber(t,function(s){i==null||i.unsubscribe(),n=!0,o=s,i=rm.createOperatorSubscriber(t,a,HU.noop),GU.innerFrom(e(s)).subscribe(i)},function(){a(),t.complete()},void 0,function(){o=i=null}))})}Ru.debounce=KU;var ju={};Object.defineProperty(ju,"__esModule",{value:!0});ju.debounceTime=void 0;var YU=ct,ZU=U,QU=B;function XU(e,r){return r===void 0&&(r=YU.asyncScheduler),ZU.operate(function(t,n){var o=null,i=null,a=null,s=function(){if(o){o.unsubscribe(),o=null;var u=i;i=null,n.next(u)}};function c(){var u=a+e,l=r.now();if(l<u){o=this.schedule(void 0,u-l),n.add(o);return}s()}t.subscribe(QU.createOperatorSubscriber(n,function(u){i=u,a=r.now(),o||(o=r.schedule(c,e),n.add(o))},function(){s(),n.complete()},void 0,function(){i=o=null}))})}ju.debounceTime=XU;var sn={};Object.defineProperty(sn,"__esModule",{value:!0});sn.defaultIfEmpty=void 0;var JU=U,e4=B;function t4(e){return JU.operate(function(r,t){var n=!1;r.subscribe(e4.createOperatorSubscriber(t,function(o){n=!0,t.next(o)},function(){n||t.next(e),t.complete()}))})}sn.defaultIfEmpty=t4;var $u={},di={},cn={};Object.defineProperty(cn,"__esModule",{value:!0});cn.take=void 0;var r4=Dt,n4=U,o4=B;function i4(e){return e<=0?function(){return r4.EMPTY}:n4.operate(function(r,t){var n=0;r.subscribe(o4.createOperatorSubscriber(t,function(o){++n<=e&&(t.next(o),e<=n&&t.complete())}))})}cn.take=i4;var hi={};Object.defineProperty(hi,"__esModule",{value:!0});hi.ignoreElements=void 0;var a4=U,u4=B,s4=ke;function c4(){return a4.operate(function(e,r){e.subscribe(u4.createOperatorSubscriber(r,s4.noop))})}hi.ignoreElements=c4;var pi={};Object.defineProperty(pi,"__esModule",{value:!0});pi.mapTo=void 0;var l4=Bt;function f4(e){return l4.map(function(){return e})}pi.mapTo=f4;Object.defineProperty(di,"__esModule",{value:!0});di.delayWhen=void 0;var d4=Xn,nm=cn,h4=hi,p4=pi,v4=Pt,_4=W;function FO(e,r){return r?function(t){return d4.concat(r.pipe(nm.take(1),h4.ignoreElements()),t.pipe(FO(e)))}:v4.mergeMap(function(t,n){return _4.innerFrom(e(t,n)).pipe(nm.take(1),p4.mapTo(t))})}di.delayWhen=FO;Object.defineProperty($u,"__esModule",{value:!0});$u.delay=void 0;var y4=ct,b4=di,m4=tr;function g4(e,r){r===void 0&&(r=y4.asyncScheduler);var t=m4.timer(e,r);return b4.delayWhen(function(){return t})}$u.delay=g4;var Nu={};Object.defineProperty(Nu,"__esModule",{value:!0});Nu.dematerialize=void 0;var w4=zl,O4=U,E4=B;function S4(){return O4.operate(function(e,r){e.subscribe(E4.createOperatorSubscriber(r,function(t){return w4.observeNotification(t,r)}))})}Nu.dematerialize=S4;var ku={};Object.defineProperty(ku,"__esModule",{value:!0});ku.distinct=void 0;var P4=U,om=B,T4=ke,C4=W;function A4(e,r){return P4.operate(function(t,n){var o=new Set;t.subscribe(om.createOperatorSubscriber(n,function(i){var a=e?e(i):i;o.has(a)||(o.add(a),n.next(i))})),r&&C4.innerFrom(r).subscribe(om.createOperatorSubscriber(n,function(){return o.clear()},T4.noop))})}ku.distinct=A4;var vi={};Object.defineProperty(vi,"__esModule",{value:!0});vi.distinctUntilChanged=void 0;var I4=Me,R4=U,j4=B;function $4(e,r){return r===void 0&&(r=I4.identity),e=e??N4,R4.operate(function(t,n){var o,i=!0;t.subscribe(j4.createOperatorSubscriber(n,function(a){var s=r(a);(i||!e(o,s))&&(i=!1,o=s,n.next(a))}))})}vi.distinctUntilChanged=$4;function N4(e,r){return e===r}var Mu={};Object.defineProperty(Mu,"__esModule",{value:!0});Mu.distinctUntilKeyChanged=void 0;var k4=vi;function M4(e,r){return k4.distinctUntilChanged(function(t,n){return r?r(t[e],n[e]):t[e]===n[e]})}Mu.distinctUntilKeyChanged=M4;var Du={},ln={};Object.defineProperty(ln,"__esModule",{value:!0});ln.throwIfEmpty=void 0;var D4=Jt,L4=U,U4=B;function F4(e){return e===void 0&&(e=x4),L4.operate(function(r,t){var n=!1;r.subscribe(U4.createOperatorSubscriber(t,function(o){n=!0,t.next(o)},function(){return n?t.complete():t.error(e())}))})}ln.throwIfEmpty=F4;function x4(){return new D4.EmptyError}Object.defineProperty(Du,"__esModule",{value:!0});Du.elementAt=void 0;var im=iu,B4=Vt,V4=ln,W4=sn,z4=cn;function q4(e,r){if(e<0)throw new im.ArgumentOutOfRangeError;var t=arguments.length>=2;return function(n){return n.pipe(B4.filter(function(o,i){return i===e}),z4.take(1),t?W4.defaultIfEmpty(r):V4.throwIfEmpty(function(){return new im.ArgumentOutOfRangeError}))}}Du.elementAt=q4;var Lu={},H4=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},G4=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Lu,"__esModule",{value:!0});Lu.endWith=void 0;var K4=Xn,Y4=ri;function Z4(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(t){return K4.concat(t,Y4.of.apply(void 0,G4([],H4(e))))}}Lu.endWith=Z4;var Uu={};Object.defineProperty(Uu,"__esModule",{value:!0});Uu.every=void 0;var Q4=U,X4=B;function J4(e,r){return Q4.operate(function(t,n){var o=0;t.subscribe(X4.createOperatorSubscriber(n,function(i){e.call(r,i,o++,t)||(n.next(!1),n.complete())},function(){n.next(!0),n.complete()}))})}Uu.every=J4;var Fu={},_i={},yi={};Object.defineProperty(yi,"__esModule",{value:!0});yi.exhaustMap=void 0;var eF=Bt,am=W,tF=U,um=B;function xO(e,r){return r?function(t){return t.pipe(xO(function(n,o){return am.innerFrom(e(n,o)).pipe(eF.map(function(i,a){return r(n,i,o,a)}))}))}:tF.operate(function(t,n){var o=0,i=null,a=!1;t.subscribe(um.createOperatorSubscriber(n,function(s){i||(i=um.createOperatorSubscriber(n,void 0,function(){i=null,a&&n.complete()}),am.innerFrom(e(s,o++)).subscribe(i))},function(){a=!0,!i&&n.complete()}))})}yi.exhaustMap=xO;Object.defineProperty(_i,"__esModule",{value:!0});_i.exhaustAll=void 0;var rF=yi,nF=Me;function oF(){return rF.exhaustMap(nF.identity)}_i.exhaustAll=oF;Object.defineProperty(Fu,"__esModule",{value:!0});Fu.exhaust=void 0;var iF=_i;Fu.exhaust=iF.exhaustAll;var xu={};Object.defineProperty(xu,"__esModule",{value:!0});xu.expand=void 0;var aF=U,uF=ai;function sF(e,r,t){return r===void 0&&(r=1/0),r=(r||0)<1?1/0:r,aF.operate(function(n,o){return uF.mergeInternals(n,o,e,r,void 0,!0,t)})}xu.expand=sF;var Bu={};Object.defineProperty(Bu,"__esModule",{value:!0});Bu.finalize=void 0;var cF=U;function lF(e){return cF.operate(function(r,t){try{r.subscribe(t)}finally{t.add(e)}})}Bu.finalize=lF;var qr={};Object.defineProperty(qr,"__esModule",{value:!0});qr.createFind=qr.find=void 0;var fF=U,dF=B;function hF(e,r){return fF.operate(BO(e,r,"value"))}qr.find=hF;function BO(e,r,t){var n=t==="index";return function(o,i){var a=0;o.subscribe(dF.createOperatorSubscriber(i,function(s){var c=a++;e.call(r,s,c,o)&&(i.next(n?c:s),i.complete())},function(){i.next(n?-1:void 0),i.complete()}))}}qr.createFind=BO;var Vu={};Object.defineProperty(Vu,"__esModule",{value:!0});Vu.findIndex=void 0;var pF=U,vF=qr;function _F(e,r){return pF.operate(vF.createFind(e,r,"index"))}Vu.findIndex=_F;var Wu={};Object.defineProperty(Wu,"__esModule",{value:!0});Wu.first=void 0;var yF=Jt,bF=Vt,mF=cn,gF=sn,wF=ln,OF=Me;function EF(e,r){var t=arguments.length>=2;return function(n){return n.pipe(e?bF.filter(function(o,i){return e(o,i,n)}):OF.identity,mF.take(1),t?gF.defaultIfEmpty(r):wF.throwIfEmpty(function(){return new yF.EmptyError}))}}Wu.first=EF;var zu={};Object.defineProperty(zu,"__esModule",{value:!0});zu.groupBy=void 0;var SF=pe,PF=W,TF=Ae,CF=U,sm=B;function AF(e,r,t,n){return CF.operate(function(o,i){var a;!r||typeof r=="function"?a=r:(t=r.duration,a=r.element,n=r.connector);var s=new Map,c=function(v){s.forEach(v),v(i)},u=function(v){return c(function(_){return _.error(v)})},l=0,d=!1,h=new sm.OperatorSubscriber(i,function(v){try{var _=e(v),b=s.get(_);if(!b){s.set(_,b=n?n():new TF.Subject);var w=p(_,b);if(i.next(w),t){var E=sm.createOperatorSubscriber(b,function(){b.complete(),E==null||E.unsubscribe()},void 0,void 0,function(){return s.delete(_)});h.add(PF.innerFrom(t(w)).subscribe(E))}}b.next(a?a(v):v)}catch(S){u(S)}},function(){return c(function(v){return v.complete()})},u,function(){return s.clear()},function(){return d=!0,l===0});o.subscribe(h);function p(v,_){var b=new SF.Observable(function(w){l++;var E=_.subscribe(w);return function(){E.unsubscribe(),--l===0&&d&&h.unsubscribe()}});return b.key=v,b}})}zu.groupBy=AF;var qu={};Object.defineProperty(qu,"__esModule",{value:!0});qu.isEmpty=void 0;var IF=U,RF=B;function jF(){return IF.operate(function(e,r){e.subscribe(RF.createOperatorSubscriber(r,function(){r.next(!1),r.complete()},function(){r.next(!0),r.complete()}))})}qu.isEmpty=jF;var Hu={},bi={},$F=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(bi,"__esModule",{value:!0});bi.takeLast=void 0;var NF=Dt,kF=U,MF=B;function DF(e){return e<=0?function(){return NF.EMPTY}:kF.operate(function(r,t){var n=[];r.subscribe(MF.createOperatorSubscriber(t,function(o){n.push(o),e<n.length&&n.shift()},function(){var o,i;try{for(var a=$F(n),s=a.next();!s.done;s=a.next()){var c=s.value;t.next(c)}}catch(u){o={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}t.complete()},void 0,function(){n=null}))})}bi.takeLast=DF;Object.defineProperty(Hu,"__esModule",{value:!0});Hu.last=void 0;var LF=Jt,UF=Vt,FF=bi,xF=ln,BF=sn,VF=Me;function WF(e,r){var t=arguments.length>=2;return function(n){return n.pipe(e?UF.filter(function(o,i){return e(o,i,n)}):VF.identity,FF.takeLast(1),t?BF.defaultIfEmpty(r):xF.throwIfEmpty(function(){return new LF.EmptyError}))}}Hu.last=WF;var Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});Gu.materialize=void 0;var op=zl,zF=U,qF=B;function HF(){return zF.operate(function(e,r){e.subscribe(qF.createOperatorSubscriber(r,function(t){r.next(op.Notification.createNext(t))},function(){r.next(op.Notification.createComplete()),r.complete()},function(t){r.next(op.Notification.createError(t)),r.complete()}))})}Gu.materialize=HF;var Ku={};Object.defineProperty(Ku,"__esModule",{value:!0});Ku.max=void 0;var GF=wr,KF=de;function YF(e){return GF.reduce(KF.isFunction(e)?function(r,t){return e(r,t)>0?r:t}:function(r,t){return r>t?r:t})}Ku.max=YF;var Yu={};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.flatMap=void 0;var ZF=Pt;Yu.flatMap=ZF.mergeMap;var Zu={};Object.defineProperty(Zu,"__esModule",{value:!0});Zu.mergeMapTo=void 0;var cm=Pt,QF=de;function XF(e,r,t){return t===void 0&&(t=1/0),QF.isFunction(r)?cm.mergeMap(function(){return e},r,t):(typeof r=="number"&&(t=r),cm.mergeMap(function(){return e},t))}Zu.mergeMapTo=XF;var Qu={};Object.defineProperty(Qu,"__esModule",{value:!0});Qu.mergeScan=void 0;var JF=U,ex=ai;function tx(e,r,t){return t===void 0&&(t=1/0),JF.operate(function(n,o){var i=r;return ex.mergeInternals(n,o,function(a,s){return e(i,a,s)},t,function(a){i=a},!1,void 0,function(){return i=null})})}Qu.mergeScan=tx;var Xu={},Ju={},rx=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},nx=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ju,"__esModule",{value:!0});Ju.merge=void 0;var ox=U,ix=un,lm=Re,ax=Ft;function ux(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=lm.popScheduler(e),n=lm.popNumber(e,1/0);return ox.operate(function(o,i){ix.mergeAll(n)(ax.from(nx([o],rx(e)),t)).subscribe(i)})}Ju.merge=ux;var sx=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},cx=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Xu,"__esModule",{value:!0});Xu.mergeWith=void 0;var lx=Ju;function fx(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return lx.merge.apply(void 0,cx([],sx(e)))}Xu.mergeWith=fx;var es={};Object.defineProperty(es,"__esModule",{value:!0});es.min=void 0;var dx=wr,hx=de;function px(e){return dx.reduce(hx.isFunction(e)?function(r,t){return e(r,t)<0?r:t}:function(r,t){return r<t?r:t})}es.min=px;var ro={};Object.defineProperty(ro,"__esModule",{value:!0});ro.multicast=void 0;var vx=Zn,fm=de,_x=to;function yx(e,r){var t=fm.isFunction(e)?e:function(){return e};return fm.isFunction(r)?_x.connect(r,{connector:t}):function(n){return new vx.ConnectableObservable(n,t)}}ro.multicast=yx;var Vn={},bx=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},mx=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.onErrorResumeNext=Vn.onErrorResumeNextWith=void 0;var gx=gr,wx=du;function VO(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=gx.argsOrArgArray(e);return function(n){return wx.onErrorResumeNext.apply(void 0,mx([n],bx(t)))}}Vn.onErrorResumeNextWith=VO;Vn.onErrorResumeNext=VO;var ts={};Object.defineProperty(ts,"__esModule",{value:!0});ts.pairwise=void 0;var Ox=U,Ex=B;function Sx(){return Ox.operate(function(e,r){var t,n=!1;e.subscribe(Ex.createOperatorSubscriber(r,function(o){var i=t;t=o,n&&r.next([i,o]),n=!0}))})}ts.pairwise=Sx;var rs={};Object.defineProperty(rs,"__esModule",{value:!0});rs.pluck=void 0;var Px=Bt;function Tx(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=e.length;if(t===0)throw new Error("list of properties cannot be empty.");return Px.map(function(n){for(var o=n,i=0;i<t;i++){var a=o==null?void 0:o[e[i]];if(typeof a<"u")o=a;else return}return o})}rs.pluck=Tx;var ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.publish=void 0;var Cx=Ae,Ax=ro,Ix=to;function Rx(e){return e?function(r){return Ix.connect(e)(r)}:function(r){return Ax.multicast(new Cx.Subject)(r)}}ns.publish=Rx;var os={};Object.defineProperty(os,"__esModule",{value:!0});os.publishBehavior=void 0;var jx=Ka,$x=Zn;function Nx(e){return function(r){var t=new jx.BehaviorSubject(e);return new $x.ConnectableObservable(r,function(){return t})}}os.publishBehavior=Nx;var is={};Object.defineProperty(is,"__esModule",{value:!0});is.publishLast=void 0;var kx=ti,Mx=Zn;function Dx(){return function(e){var r=new kx.AsyncSubject;return new Mx.ConnectableObservable(e,function(){return r})}}is.publishLast=Dx;var as={};Object.defineProperty(as,"__esModule",{value:!0});as.publishReplay=void 0;var Lx=ei,Ux=ro,dm=de;function Fx(e,r,t,n){t&&!dm.isFunction(t)&&(n=t);var o=dm.isFunction(t)?t:void 0;return function(i){return Ux.multicast(new Lx.ReplaySubject(e,r,n),o)(i)}}as.publishReplay=Fx;var mi={},xx=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Bx=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(mi,"__esModule",{value:!0});mi.raceWith=void 0;var Vx=Bn,Wx=U,zx=Me;function qx(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length?Wx.operate(function(t,n){Vx.raceInit(Bx([t],xx(e)))(n)}):zx.identity}mi.raceWith=qx;var us={};Object.defineProperty(us,"__esModule",{value:!0});us.repeat=void 0;var Hx=Dt,Gx=U,hm=B,Kx=W,Yx=tr;function Zx(e){var r,t=1/0,n;return e!=null&&(typeof e=="object"?(r=e.count,t=r===void 0?1/0:r,n=e.delay):t=e),t<=0?function(){return Hx.EMPTY}:Gx.operate(function(o,i){var a=0,s,c=function(){if(s==null||s.unsubscribe(),s=null,n!=null){var l=typeof n=="number"?Yx.timer(n):Kx.innerFrom(n(a)),d=hm.createOperatorSubscriber(i,function(){d.unsubscribe(),u()});l.subscribe(d)}else u()},u=function(){var l=!1;s=o.subscribe(hm.createOperatorSubscriber(i,void 0,function(){++a<t?s?c():l=!0:i.complete()})),l&&c()};u()})}us.repeat=Zx;var ss={};Object.defineProperty(ss,"__esModule",{value:!0});ss.repeatWhen=void 0;var Qx=W,Xx=Ae,Jx=U,pm=B;function e3(e){return Jx.operate(function(r,t){var n,o=!1,i,a=!1,s=!1,c=function(){return s&&a&&(t.complete(),!0)},u=function(){return i||(i=new Xx.Subject,Qx.innerFrom(e(i)).subscribe(pm.createOperatorSubscriber(t,function(){n?l():o=!0},function(){a=!0,c()}))),i},l=function(){s=!1,n=r.subscribe(pm.createOperatorSubscriber(t,void 0,function(){s=!0,!c()&&u().next()})),o&&(n.unsubscribe(),n=null,o=!1,l())};l()})}ss.repeatWhen=e3;var cs={};Object.defineProperty(cs,"__esModule",{value:!0});cs.retry=void 0;var t3=U,vm=B,r3=Me,n3=tr,o3=W;function i3(e){e===void 0&&(e=1/0);var r;e&&typeof e=="object"?r=e:r={count:e};var t=r.count,n=t===void 0?1/0:t,o=r.delay,i=r.resetOnSuccess,a=i===void 0?!1:i;return n<=0?r3.identity:t3.operate(function(s,c){var u=0,l,d=function(){var h=!1;l=s.subscribe(vm.createOperatorSubscriber(c,function(p){a&&(u=0),c.next(p)},void 0,function(p){if(u++<n){var v=function(){l?(l.unsubscribe(),l=null,d()):h=!0};if(o!=null){var _=typeof o=="number"?n3.timer(o):o3.innerFrom(o(p,u)),b=vm.createOperatorSubscriber(c,function(){b.unsubscribe(),v()},function(){c.complete()});_.subscribe(b)}else v()}else c.error(p)})),h&&(l.unsubscribe(),l=null,d())};d()})}cs.retry=i3;var ls={};Object.defineProperty(ls,"__esModule",{value:!0});ls.retryWhen=void 0;var a3=W,u3=Ae,s3=U,_m=B;function c3(e){return s3.operate(function(r,t){var n,o=!1,i,a=function(){n=r.subscribe(_m.createOperatorSubscriber(t,void 0,void 0,function(s){i||(i=new u3.Subject,a3.innerFrom(e(i)).subscribe(_m.createOperatorSubscriber(t,function(){return n?a():o=!0}))),i&&i.next(s)})),o&&(n.unsubscribe(),n=null,o=!1,a())};a()})}ls.retryWhen=c3;var gi={};Object.defineProperty(gi,"__esModule",{value:!0});gi.sample=void 0;var l3=W,f3=U,d3=ke,ym=B;function h3(e){return f3.operate(function(r,t){var n=!1,o=null;r.subscribe(ym.createOperatorSubscriber(t,function(i){n=!0,o=i})),l3.innerFrom(e).subscribe(ym.createOperatorSubscriber(t,function(){if(n){n=!1;var i=o;o=null,t.next(i)}},d3.noop))})}gi.sample=h3;var fs={};Object.defineProperty(fs,"__esModule",{value:!0});fs.sampleTime=void 0;var p3=ct,v3=gi,_3=fu;function y3(e,r){return r===void 0&&(r=p3.asyncScheduler),v3.sample(_3.interval(e,r))}fs.sampleTime=y3;var ds={};Object.defineProperty(ds,"__esModule",{value:!0});ds.scan=void 0;var b3=U,m3=Eu;function g3(e,r){return b3.operate(m3.scanInternals(e,r,arguments.length>=2,!0))}ds.scan=g3;var hs={};Object.defineProperty(hs,"__esModule",{value:!0});hs.sequenceEqual=void 0;var w3=U,O3=B,E3=W;function S3(e,r){return r===void 0&&(r=function(t,n){return t===n}),w3.operate(function(t,n){var o=bm(),i=bm(),a=function(c){n.next(c),n.complete()},s=function(c,u){var l=O3.createOperatorSubscriber(n,function(d){var h=u.buffer,p=u.complete;h.length===0?p?a(!1):c.buffer.push(d):!r(d,h.shift())&&a(!1)},function(){c.complete=!0;var d=u.complete,h=u.buffer;d&&a(h.length===0),l==null||l.unsubscribe()});return l};t.subscribe(s(o,i)),E3.innerFrom(e).subscribe(s(i,o))})}hs.sequenceEqual=S3;function bm(){return{buffer:[],complete:!1}}var wi={},P3=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},T3=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(wi,"__esModule",{value:!0});wi.share=void 0;var WO=W,C3=Ae,zO=Xo,A3=U;function I3(e){e===void 0&&(e={});var r=e.connector,t=r===void 0?function(){return new C3.Subject}:r,n=e.resetOnError,o=n===void 0?!0:n,i=e.resetOnComplete,a=i===void 0?!0:i,s=e.resetOnRefCountZero,c=s===void 0?!0:s;return function(u){var l,d,h,p=0,v=!1,_=!1,b=function(){d==null||d.unsubscribe(),d=void 0},w=function(){b(),l=h=void 0,v=_=!1},E=function(){var S=l;w(),S==null||S.unsubscribe()};return A3.operate(function(S,O){p++,!_&&!v&&b();var A=h=h??t();O.add(function(){p--,p===0&&!_&&!v&&(d=ip(E,c))}),A.subscribe(O),!l&&p>0&&(l=new zO.SafeSubscriber({next:function($){return A.next($)},error:function($){_=!0,b(),d=ip(w,o,$),A.error($)},complete:function(){v=!0,b(),d=ip(w,a),A.complete()}}),WO.innerFrom(S).subscribe(l))})(u)}}wi.share=I3;function ip(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];if(r===!0){e();return}if(r!==!1){var o=new zO.SafeSubscriber({next:function(){o.unsubscribe(),e()}});return WO.innerFrom(r.apply(void 0,T3([],P3(t)))).subscribe(o)}}var ps={};Object.defineProperty(ps,"__esModule",{value:!0});ps.shareReplay=void 0;var R3=ei,j3=wi;function $3(e,r,t){var n,o,i,a,s=!1;return e&&typeof e=="object"?(n=e.bufferSize,a=n===void 0?1/0:n,o=e.windowTime,r=o===void 0?1/0:o,i=e.refCount,s=i===void 0?!1:i,t=e.scheduler):a=e??1/0,j3.share({connector:function(){return new R3.ReplaySubject(a,r,t)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}ps.shareReplay=$3;var vs={};Object.defineProperty(vs,"__esModule",{value:!0});vs.single=void 0;var N3=Jt,k3=uu,M3=au,D3=U,L3=B;function U3(e){return D3.operate(function(r,t){var n=!1,o,i=!1,a=0;r.subscribe(L3.createOperatorSubscriber(t,function(s){i=!0,(!e||e(s,a++,r))&&(n&&t.error(new k3.SequenceError("Too many matching values")),n=!0,o=s)},function(){n?(t.next(o),t.complete()):t.error(i?new M3.NotFoundError("No matching values"):new N3.EmptyError)}))})}vs.single=U3;var _s={};Object.defineProperty(_s,"__esModule",{value:!0});_s.skip=void 0;var F3=Vt;function x3(e){return F3.filter(function(r,t){return e<=t})}_s.skip=x3;var ys={};Object.defineProperty(ys,"__esModule",{value:!0});ys.skipLast=void 0;var B3=Me,V3=U,W3=B;function z3(e){return e<=0?B3.identity:V3.operate(function(r,t){var n=new Array(e),o=0;return r.subscribe(W3.createOperatorSubscriber(t,function(i){var a=o++;if(a<e)n[a]=i;else{var s=a%e,c=n[s];n[s]=i,t.next(c)}})),function(){n=null}})}ys.skipLast=z3;var bs={};Object.defineProperty(bs,"__esModule",{value:!0});bs.skipUntil=void 0;var q3=U,mm=B,H3=W,G3=ke;function K3(e){return q3.operate(function(r,t){var n=!1,o=mm.createOperatorSubscriber(t,function(){o==null||o.unsubscribe(),n=!0},G3.noop);H3.innerFrom(e).subscribe(o),r.subscribe(mm.createOperatorSubscriber(t,function(i){return n&&t.next(i)}))})}bs.skipUntil=K3;var ms={};Object.defineProperty(ms,"__esModule",{value:!0});ms.skipWhile=void 0;var Y3=U,Z3=B;function Q3(e){return Y3.operate(function(r,t){var n=!1,o=0;r.subscribe(Z3.createOperatorSubscriber(t,function(i){return(n||(n=!e(i,o++)))&&t.next(i)}))})}ms.skipWhile=Q3;var gs={};Object.defineProperty(gs,"__esModule",{value:!0});gs.startWith=void 0;var gm=Xn,X3=Re,J3=U;function eB(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=X3.popScheduler(e);return J3.operate(function(n,o){(t?gm.concat(e,n,t):gm.concat(e,n)).subscribe(o)})}gs.startWith=eB;var ws={},fn={};Object.defineProperty(fn,"__esModule",{value:!0});fn.switchMap=void 0;var tB=W,rB=U,wm=B;function nB(e,r){return rB.operate(function(t,n){var o=null,i=0,a=!1,s=function(){return a&&!o&&n.complete()};t.subscribe(wm.createOperatorSubscriber(n,function(c){o==null||o.unsubscribe();var u=0,l=i++;tB.innerFrom(e(c,l)).subscribe(o=wm.createOperatorSubscriber(n,function(d){return n.next(r?r(c,d,l,u++):d)},function(){o=null,s()}))},function(){a=!0,s()}))})}fn.switchMap=nB;Object.defineProperty(ws,"__esModule",{value:!0});ws.switchAll=void 0;var oB=fn,iB=Me;function aB(){return oB.switchMap(iB.identity)}ws.switchAll=aB;var Os={};Object.defineProperty(Os,"__esModule",{value:!0});Os.switchMapTo=void 0;var Om=fn,uB=de;function sB(e,r){return uB.isFunction(r)?Om.switchMap(function(){return e},r):Om.switchMap(function(){return e})}Os.switchMapTo=sB;var Es={};Object.defineProperty(Es,"__esModule",{value:!0});Es.switchScan=void 0;var cB=fn,lB=U;function fB(e,r){return lB.operate(function(t,n){var o=r;return cB.switchMap(function(i,a){return e(o,i,a)},function(i,a){return o=a,a})(t).subscribe(n),function(){o=null}})}Es.switchScan=fB;var Ss={};Object.defineProperty(Ss,"__esModule",{value:!0});Ss.takeUntil=void 0;var dB=U,hB=B,pB=W,vB=ke;function _B(e){return dB.operate(function(r,t){pB.innerFrom(e).subscribe(hB.createOperatorSubscriber(t,function(){return t.complete()},vB.noop)),!t.closed&&r.subscribe(t)})}Ss.takeUntil=_B;var Ps={};Object.defineProperty(Ps,"__esModule",{value:!0});Ps.takeWhile=void 0;var yB=U,bB=B;function mB(e,r){return r===void 0&&(r=!1),yB.operate(function(t,n){var o=0;t.subscribe(bB.createOperatorSubscriber(n,function(i){var a=e(i,o++);(a||r)&&n.next(i),!a&&n.complete()}))})}Ps.takeWhile=mB;var Ts={};Object.defineProperty(Ts,"__esModule",{value:!0});Ts.tap=void 0;var gB=de,wB=U,OB=B,EB=Me;function SB(e,r,t){var n=gB.isFunction(e)||r||t?{next:e,error:r,complete:t}:e;return n?wB.operate(function(o,i){var a;(a=n.subscribe)===null||a===void 0||a.call(n);var s=!0;o.subscribe(OB.createOperatorSubscriber(i,function(c){var u;(u=n.next)===null||u===void 0||u.call(n,c),i.next(c)},function(){var c;s=!1,(c=n.complete)===null||c===void 0||c.call(n),i.complete()},function(c){var u;s=!1,(u=n.error)===null||u===void 0||u.call(n,c),i.error(c)},function(){var c,u;s&&((c=n.unsubscribe)===null||c===void 0||c.call(n)),(u=n.finalize)===null||u===void 0||u.call(n)}))}):EB.identity}Ts.tap=SB;var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.throttle=void 0;var PB=U,Em=B,TB=W;function CB(e,r){return PB.operate(function(t,n){var o=r??{},i=o.leading,a=i===void 0?!0:i,s=o.trailing,c=s===void 0?!1:s,u=!1,l=null,d=null,h=!1,p=function(){d==null||d.unsubscribe(),d=null,c&&(b(),h&&n.complete())},v=function(){d=null,h&&n.complete()},_=function(w){return d=TB.innerFrom(e(w)).subscribe(Em.createOperatorSubscriber(n,p,v))},b=function(){if(u){u=!1;var w=l;l=null,n.next(w),!h&&_(w)}};t.subscribe(Em.createOperatorSubscriber(n,function(w){u=!0,l=w,!(d&&!d.closed)&&(a?b():_(w))},function(){h=!0,!(c&&u&&d&&!d.closed)&&n.complete()}))})}Oi.throttle=CB;var Cs={};Object.defineProperty(Cs,"__esModule",{value:!0});Cs.throttleTime=void 0;var AB=ct,IB=Oi,RB=tr;function jB(e,r,t){r===void 0&&(r=AB.asyncScheduler);var n=RB.timer(e,r);return IB.throttle(function(){return n},t)}Cs.throttleTime=jB;var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.TimeInterval=Wn.timeInterval=void 0;var $B=ct,NB=U,kB=B;function MB(e){return e===void 0&&(e=$B.asyncScheduler),NB.operate(function(r,t){var n=e.now();r.subscribe(kB.createOperatorSubscriber(t,function(o){var i=e.now(),a=i-n;n=i,t.next(new qO(o,a))}))})}Wn.timeInterval=MB;var qO=function(){function e(r,t){this.value=r,this.interval=t}return e}();Wn.TimeInterval=qO;var As={};Object.defineProperty(As,"__esModule",{value:!0});As.timeoutWith=void 0;var DB=ct,LB=ii,UB=Pa;function FB(e,r,t){var n,o,i;if(t=t??DB.async,LB.isValidDate(e)?n=e:typeof e=="number"&&(o=e),r)i=function(){return r};else throw new TypeError("No observable provided to switch to");if(n==null&&o==null)throw new TypeError("No timeout provided.");return UB.timeout({first:n,each:o,scheduler:t,with:i})}As.timeoutWith=FB;var Is={};Object.defineProperty(Is,"__esModule",{value:!0});Is.timestamp=void 0;var xB=Dl,BB=Bt;function VB(e){return e===void 0&&(e=xB.dateTimestampProvider),BB.map(function(r){return{value:r,timestamp:e.now()}})}Is.timestamp=VB;var Rs={};Object.defineProperty(Rs,"__esModule",{value:!0});Rs.window=void 0;var Sm=Ae,WB=U,Pm=B,zB=ke,qB=W;function HB(e){return WB.operate(function(r,t){var n=new Sm.Subject;t.next(n.asObservable());var o=function(i){n.error(i),t.error(i)};return r.subscribe(Pm.createOperatorSubscriber(t,function(i){return n==null?void 0:n.next(i)},function(){n.complete(),t.complete()},o)),qB.innerFrom(e).subscribe(Pm.createOperatorSubscriber(t,function(){n.complete(),t.next(n=new Sm.Subject)},zB.noop,o)),function(){n==null||n.unsubscribe(),n=null}})}Rs.window=HB;var js={},GB=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(js,"__esModule",{value:!0});js.windowCount=void 0;var Tm=Ae,KB=U,YB=B;function ZB(e,r){r===void 0&&(r=0);var t=r>0?r:e;return KB.operate(function(n,o){var i=[new Tm.Subject],a=0;o.next(i[0].asObservable()),n.subscribe(YB.createOperatorSubscriber(o,function(s){var c,u;try{for(var l=GB(i),d=l.next();!d.done;d=l.next()){var h=d.value;h.next(s)}}catch(_){c={error:_}}finally{try{d&&!d.done&&(u=l.return)&&u.call(l)}finally{if(c)throw c.error}}var p=a-e+1;if(p>=0&&p%t===0&&i.shift().complete(),++a%t===0){var v=new Tm.Subject;i.push(v),o.next(v.asObservable())}},function(){for(;i.length>0;)i.shift().complete();o.complete()},function(s){for(;i.length>0;)i.shift().error(s);o.error(s)},function(){i=null}))})}js.windowCount=ZB;var $s={};Object.defineProperty($s,"__esModule",{value:!0});$s.windowTime=void 0;var QB=Ae,XB=ct,JB=Ne,e6=U,t6=B,r6=Ut,n6=Re,Cm=xt;function o6(e){for(var r,t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=(r=n6.popScheduler(n))!==null&&r!==void 0?r:XB.asyncScheduler,a=(t=n[0])!==null&&t!==void 0?t:null,s=n[1]||1/0;return e6.operate(function(c,u){var l=[],d=!1,h=function(b){var w=b.window,E=b.subs;w.complete(),E.unsubscribe(),r6.arrRemove(l,b),d&&p()},p=function(){if(l){var b=new JB.Subscription;u.add(b);var w=new QB.Subject,E={window:w,subs:b,seen:0};l.push(E),u.next(w.asObservable()),Cm.executeSchedule(b,i,function(){return h(E)},e)}};a!==null&&a>=0?Cm.executeSchedule(u,i,p,a,!0):d=!0,p();var v=function(b){return l.slice().forEach(b)},_=function(b){v(function(w){var E=w.window;return b(E)}),b(u),u.unsubscribe()};return c.subscribe(t6.createOperatorSubscriber(u,function(b){v(function(w){w.window.next(b),s<=++w.seen&&h(w)})},function(){return _(function(b){return b.complete()})},function(b){return _(function(w){return w.error(b)})})),function(){l=null}})}$s.windowTime=o6;var Ns={},i6=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ns,"__esModule",{value:!0});Ns.windowToggle=void 0;var a6=Ae,u6=Ne,s6=U,Am=W,ap=B,Im=ke,c6=Ut;function l6(e,r){return s6.operate(function(t,n){var o=[],i=function(a){for(;0<o.length;)o.shift().error(a);n.error(a)};Am.innerFrom(e).subscribe(ap.createOperatorSubscriber(n,function(a){var s=new a6.Subject;o.push(s);var c=new u6.Subscription,u=function(){c6.arrRemove(o,s),s.complete(),c.unsubscribe()},l;try{l=Am.innerFrom(r(a))}catch(d){i(d);return}n.next(s.asObservable()),c.add(l.subscribe(ap.createOperatorSubscriber(n,u,Im.noop,i)))},Im.noop)),t.subscribe(ap.createOperatorSubscriber(n,function(a){var s,c,u=o.slice();try{for(var l=i6(u),d=l.next();!d.done;d=l.next()){var h=d.value;h.next(a)}}catch(p){s={error:p}}finally{try{d&&!d.done&&(c=l.return)&&c.call(l)}finally{if(s)throw s.error}}},function(){for(;0<o.length;)o.shift().complete();n.complete()},i,function(){for(;0<o.length;)o.shift().unsubscribe()}))})}Ns.windowToggle=l6;var ks={};Object.defineProperty(ks,"__esModule",{value:!0});ks.windowWhen=void 0;var f6=Ae,d6=U,Rm=B,h6=W;function p6(e){return d6.operate(function(r,t){var n,o,i=function(s){n.error(s),t.error(s)},a=function(){o==null||o.unsubscribe(),n==null||n.complete(),n=new f6.Subject,t.next(n.asObservable());var s;try{s=h6.innerFrom(e())}catch(c){i(c);return}s.subscribe(o=Rm.createOperatorSubscriber(t,a,a,i))};a(),r.subscribe(Rm.createOperatorSubscriber(t,function(s){return n.next(s)},function(){n.complete(),t.complete()},i,function(){o==null||o.unsubscribe(),n=null}))})}ks.windowWhen=p6;var Ms={},jm=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},$m=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ms,"__esModule",{value:!0});Ms.withLatestFrom=void 0;var v6=U,Nm=B,_6=W,y6=Me,b6=ke,m6=Re;function g6(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=m6.popResultSelector(e);return v6.operate(function(n,o){for(var i=e.length,a=new Array(i),s=e.map(function(){return!1}),c=!1,u=function(d){_6.innerFrom(e[d]).subscribe(Nm.createOperatorSubscriber(o,function(h){a[d]=h,!c&&!s[d]&&(s[d]=!0,(c=s.every(y6.identity))&&(s=null))},b6.noop))},l=0;l<i;l++)u(l);n.subscribe(Nm.createOperatorSubscriber(o,function(d){if(c){var h=$m([d],jm(a));o.next(t?t.apply(void 0,$m([],jm(h))):h)}}))})}Ms.withLatestFrom=g6;var Ds={};Object.defineProperty(Ds,"__esModule",{value:!0});Ds.zipAll=void 0;var w6=ui,O6=Ou;function E6(e){return O6.joinAllInternals(w6.zip,e)}Ds.zipAll=E6;var Ls={},Us={},S6=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},P6=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Us,"__esModule",{value:!0});Us.zip=void 0;var T6=ui,C6=U;function A6(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return C6.operate(function(t,n){T6.zip.apply(void 0,P6([t],S6(e))).subscribe(n)})}Us.zip=A6;var I6=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},R6=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ls,"__esModule",{value:!0});Ls.zipWith=void 0;var j6=Us;function $6(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return j6.zip.apply(void 0,R6([],I6(e)))}Ls.zipWith=$6;(function(e){var r=f&&f.__createBinding||(Object.create?function(ho,po,or,pn){pn===void 0&&(pn=or),Object.defineProperty(ho,pn,{enumerable:!0,get:function(){return po[or]}})}:function(ho,po,or,pn){pn===void 0&&(pn=or),ho[pn]=po[or]}),t=f&&f.__exportStar||function(ho,po){for(var or in ho)or!=="default"&&!Object.prototype.hasOwnProperty.call(po,or)&&r(po,ho,or)};Object.defineProperty(e,"__esModule",{value:!0}),e.interval=e.iif=e.generate=e.fromEventPattern=e.fromEvent=e.from=e.forkJoin=e.empty=e.defer=e.connectable=e.concat=e.combineLatest=e.bindNodeCallback=e.bindCallback=e.UnsubscriptionError=e.TimeoutError=e.SequenceError=e.ObjectUnsubscribedError=e.NotFoundError=e.EmptyError=e.ArgumentOutOfRangeError=e.firstValueFrom=e.lastValueFrom=e.isObservable=e.identity=e.noop=e.pipe=e.NotificationKind=e.Notification=e.Subscriber=e.Subscription=e.Scheduler=e.VirtualAction=e.VirtualTimeScheduler=e.animationFrameScheduler=e.animationFrame=e.queueScheduler=e.queue=e.asyncScheduler=e.async=e.asapScheduler=e.asap=e.AsyncSubject=e.ReplaySubject=e.BehaviorSubject=e.Subject=e.animationFrames=e.observable=e.ConnectableObservable=e.Observable=void 0,e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.combineLatestWith=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=e.config=e.NEVER=e.EMPTY=e.scheduled=e.zip=e.using=e.timer=e.throwError=e.range=e.race=e.partition=e.pairs=e.onErrorResumeNext=e.of=e.never=e.merge=void 0,e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.pairwise=e.onErrorResumeNextWith=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=e.mergeAll=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=void 0,e.zipWith=e.zipAll=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=void 0;var n=pe;Object.defineProperty(e,"Observable",{enumerable:!0,get:function(){return n.Observable}});var o=Zn;Object.defineProperty(e,"ConnectableObservable",{enumerable:!0,get:function(){return o.ConnectableObservable}});var i=Yn;Object.defineProperty(e,"observable",{enumerable:!0,get:function(){return i.observable}});var a=Ml;Object.defineProperty(e,"animationFrames",{enumerable:!0,get:function(){return a.animationFrames}});var s=Ae;Object.defineProperty(e,"Subject",{enumerable:!0,get:function(){return s.Subject}});var c=Ka;Object.defineProperty(e,"BehaviorSubject",{enumerable:!0,get:function(){return c.BehaviorSubject}});var u=ei;Object.defineProperty(e,"ReplaySubject",{enumerable:!0,get:function(){return u.ReplaySubject}});var l=ti;Object.defineProperty(e,"AsyncSubject",{enumerable:!0,get:function(){return l.AsyncSubject}});var d=vO;Object.defineProperty(e,"asap",{enumerable:!0,get:function(){return d.asap}}),Object.defineProperty(e,"asapScheduler",{enumerable:!0,get:function(){return d.asapScheduler}});var h=ct;Object.defineProperty(e,"async",{enumerable:!0,get:function(){return h.async}}),Object.defineProperty(e,"asyncScheduler",{enumerable:!0,get:function(){return h.asyncScheduler}});var p=bO;Object.defineProperty(e,"queue",{enumerable:!0,get:function(){return p.queue}}),Object.defineProperty(e,"queueScheduler",{enumerable:!0,get:function(){return p.queueScheduler}});var v=mO;Object.defineProperty(e,"animationFrame",{enumerable:!0,get:function(){return v.animationFrame}}),Object.defineProperty(e,"animationFrameScheduler",{enumerable:!0,get:function(){return v.animationFrameScheduler}});var _=Lo;Object.defineProperty(e,"VirtualTimeScheduler",{enumerable:!0,get:function(){return _.VirtualTimeScheduler}}),Object.defineProperty(e,"VirtualAction",{enumerable:!0,get:function(){return _.VirtualAction}});var b=Ya;Object.defineProperty(e,"Scheduler",{enumerable:!0,get:function(){return b.Scheduler}});var w=Ne;Object.defineProperty(e,"Subscription",{enumerable:!0,get:function(){return w.Subscription}});var E=Xo;Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return E.Subscriber}});var S=zl;Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return S.Notification}}),Object.defineProperty(e,"NotificationKind",{enumerable:!0,get:function(){return S.NotificationKind}});var O=br;Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return O.pipe}});var A=ke;Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return A.noop}});var $=Me;Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return $.identity}});var I=Yl;Object.defineProperty(e,"isObservable",{enumerable:!0,get:function(){return I.isObservable}});var L=Zl;Object.defineProperty(e,"lastValueFrom",{enumerable:!0,get:function(){return L.lastValueFrom}});var X=Ql;Object.defineProperty(e,"firstValueFrom",{enumerable:!0,get:function(){return X.firstValueFrom}});var ae=iu;Object.defineProperty(e,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return ae.ArgumentOutOfRangeError}});var _e=Jt;Object.defineProperty(e,"EmptyError",{enumerable:!0,get:function(){return _e.EmptyError}});var ne=au;Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return ne.NotFoundError}});var ve=Ga;Object.defineProperty(e,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return ve.ObjectUnsubscribedError}});var it=uu;Object.defineProperty(e,"SequenceError",{enumerable:!0,get:function(){return it.SequenceError}});var ee=Pa;Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return ee.TimeoutError}});var be=qa;Object.defineProperty(e,"UnsubscriptionError",{enumerable:!0,get:function(){return be.UnsubscriptionError}});var Y=Xl;Object.defineProperty(e,"bindCallback",{enumerable:!0,get:function(){return Y.bindCallback}});var k=Jl;Object.defineProperty(e,"bindNodeCallback",{enumerable:!0,get:function(){return k.bindNodeCallback}});var P=zr;Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return P.combineLatest}});var C=Xn;Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return C.concat}});var R=ef;Object.defineProperty(e,"connectable",{enumerable:!0,get:function(){return R.connectable}});var V=eo;Object.defineProperty(e,"defer",{enumerable:!0,get:function(){return V.defer}});var q=Dt;Object.defineProperty(e,"empty",{enumerable:!0,get:function(){return q.empty}});var F=tf;Object.defineProperty(e,"forkJoin",{enumerable:!0,get:function(){return F.forkJoin}});var te=Ft;Object.defineProperty(e,"from",{enumerable:!0,get:function(){return te.from}});var Z=rf;Object.defineProperty(e,"fromEvent",{enumerable:!0,get:function(){return Z.fromEvent}});var ue=nf;Object.defineProperty(e,"fromEventPattern",{enumerable:!0,get:function(){return ue.fromEventPattern}});var y=of;Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return y.generate}});var T=af;Object.defineProperty(e,"iif",{enumerable:!0,get:function(){return T.iif}});var M=fu;Object.defineProperty(e,"interval",{enumerable:!0,get:function(){return M.interval}});var x=uf;Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return x.merge}});var K=av;Object.defineProperty(e,"never",{enumerable:!0,get:function(){return K.never}});var me=ri;Object.defineProperty(e,"of",{enumerable:!0,get:function(){return me.of}});var je=du;Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return je.onErrorResumeNext}});var yt=sf;Object.defineProperty(e,"pairs",{enumerable:!0,get:function(){return yt.pairs}});var Cr=cf;Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return Cr.partition}});var fo=Bn;Object.defineProperty(e,"race",{enumerable:!0,get:function(){return fo.race}});var Di=lf;Object.defineProperty(e,"range",{enumerable:!0,get:function(){return Di.range}});var Li=ou;Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return Li.throwError}});var Ui=tr;Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return Ui.timer}});var Fi=ff;Object.defineProperty(e,"using",{enumerable:!0,get:function(){return Fi.using}});var Dd=ui;Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return Dd.zip}});var Ld=Za;Object.defineProperty(e,"scheduled",{enumerable:!0,get:function(){return Ld.scheduled}});var Ud=Dt;Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return Ud.EMPTY}});var Fd=av;Object.defineProperty(e,"NEVER",{enumerable:!0,get:function(){return Fd.NEVER}}),t(DO,e);var xd=tn;Object.defineProperty(e,"config",{enumerable:!0,get:function(){return xd.config}});var Bd=si;Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return Bd.audit}});var Vd=pu;Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return Vd.auditTime}});var Wd=vu;Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return Wd.buffer}});var zd=_u;Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return zd.bufferCount}});var qd=yu;Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return qd.bufferTime}});var Hd=bu;Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return Hd.bufferToggle}});var Gd=mu;Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return Gd.bufferWhen}});var Kd=gu;Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return Kd.catchError}});var Yd=wu;Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return Yd.combineAll}});var Zd=ci;Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return Zd.combineLatestAll}});var Qd=Su;Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return Qd.combineLatestWith}});var Xd=Jn;Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return Xd.concatAll}});var Jd=fi;Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return Jd.concatMap}});var eh=Tu;Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return eh.concatMapTo}});var th=Cu;Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return th.concatWith}});var rh=to;Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return rh.connect}});var nh=Iu;Object.defineProperty(e,"count",{enumerable:!0,get:function(){return nh.count}});var oh=Ru;Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return oh.debounce}});var ih=ju;Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return ih.debounceTime}});var ah=sn;Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return ah.defaultIfEmpty}});var uh=$u;Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return uh.delay}});var sh=di;Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return sh.delayWhen}});var ch=Nu;Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return ch.dematerialize}});var lh=ku;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return lh.distinct}});var fh=vi;Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return fh.distinctUntilChanged}});var dh=Mu;Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return dh.distinctUntilKeyChanged}});var hh=Du;Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return hh.elementAt}});var ph=Lu;Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return ph.endWith}});var vh=Uu;Object.defineProperty(e,"every",{enumerable:!0,get:function(){return vh.every}});var _h=Fu;Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return _h.exhaust}});var yh=_i;Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return yh.exhaustAll}});var bh=yi;Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return bh.exhaustMap}});var mh=xu;Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return mh.expand}});var gh=Vt;Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return gh.filter}});var wh=Bu;Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return wh.finalize}});var Oh=qr;Object.defineProperty(e,"find",{enumerable:!0,get:function(){return Oh.find}});var Eh=Vu;Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return Eh.findIndex}});var Sh=Wu;Object.defineProperty(e,"first",{enumerable:!0,get:function(){return Sh.first}});var Ph=zu;Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return Ph.groupBy}});var Th=hi;Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return Th.ignoreElements}});var Ch=qu;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return Ch.isEmpty}});var Ah=Hu;Object.defineProperty(e,"last",{enumerable:!0,get:function(){return Ah.last}});var Ih=Bt;Object.defineProperty(e,"map",{enumerable:!0,get:function(){return Ih.map}});var Rh=pi;Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return Rh.mapTo}});var jh=Gu;Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return jh.materialize}});var $h=Ku;Object.defineProperty(e,"max",{enumerable:!0,get:function(){return $h.max}});var Nh=un;Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return Nh.mergeAll}});var kh=Yu;Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return kh.flatMap}});var Mh=Pt;Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return Mh.mergeMap}});var Dh=Zu;Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return Dh.mergeMapTo}});var Lh=Qu;Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return Lh.mergeScan}});var AP=Xu;Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return AP.mergeWith}});var IP=es;Object.defineProperty(e,"min",{enumerable:!0,get:function(){return IP.min}});var RP=ro;Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return RP.multicast}});var jP=on;Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return jP.observeOn}});var $P=Vn;Object.defineProperty(e,"onErrorResumeNextWith",{enumerable:!0,get:function(){return $P.onErrorResumeNextWith}});var NP=ts;Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return NP.pairwise}});var kP=rs;Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return kP.pluck}});var MP=ns;Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return MP.publish}});var DP=os;Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return DP.publishBehavior}});var LP=is;Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return LP.publishLast}});var UP=as;Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return UP.publishReplay}});var FP=mi;Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return FP.raceWith}});var xP=wr;Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return xP.reduce}});var BP=us;Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return BP.repeat}});var VP=ss;Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return VP.repeatWhen}});var WP=cs;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return WP.retry}});var zP=ls;Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return zP.retryWhen}});var qP=Jo;Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return qP.refCount}});var HP=gi;Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return HP.sample}});var GP=fs;Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return GP.sampleTime}});var KP=ds;Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return KP.scan}});var YP=hs;Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return YP.sequenceEqual}});var ZP=wi;Object.defineProperty(e,"share",{enumerable:!0,get:function(){return ZP.share}});var QP=ps;Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return QP.shareReplay}});var XP=vs;Object.defineProperty(e,"single",{enumerable:!0,get:function(){return XP.single}});var JP=_s;Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return JP.skip}});var eT=ys;Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return eT.skipLast}});var tT=bs;Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return tT.skipUntil}});var rT=ms;Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return rT.skipWhile}});var nT=gs;Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return nT.startWith}});var oT=an;Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return oT.subscribeOn}});var iT=ws;Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return iT.switchAll}});var aT=fn;Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return aT.switchMap}});var uT=Os;Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return uT.switchMapTo}});var sT=Es;Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return sT.switchScan}});var cT=cn;Object.defineProperty(e,"take",{enumerable:!0,get:function(){return cT.take}});var lT=bi;Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return lT.takeLast}});var fT=Ss;Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return fT.takeUntil}});var dT=Ps;Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return dT.takeWhile}});var hT=Ts;Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return hT.tap}});var pT=Oi;Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return pT.throttle}});var vT=Cs;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return vT.throttleTime}});var _T=ln;Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return _T.throwIfEmpty}});var yT=Wn;Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return yT.timeInterval}});var bT=Pa;Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return bT.timeout}});var mT=As;Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return mT.timeoutWith}});var gT=Is;Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return gT.timestamp}});var wT=li;Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return wT.toArray}});var OT=Rs;Object.defineProperty(e,"window",{enumerable:!0,get:function(){return OT.window}});var ET=js;Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return ET.windowCount}});var ST=$s;Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return ST.windowTime}});var PT=Ns;Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return PT.windowToggle}});var TT=ks;Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return TT.windowWhen}});var CT=Ms;Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return CT.withLatestFrom}});var AT=Ds;Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return AT.zipAll}});var IT=Ls;Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return IT.zipWith}})})(za);var hf={},pf={};Object.defineProperty(pf,"__esModule",{value:!0});pf.partition=void 0;var N6=hu,km=Vt;function k6(e,r){return function(t){return[km.filter(e,r)(t),km.filter(N6.not(e,r))(t)]}}pf.partition=k6;var vf={},M6=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},D6=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(vf,"__esModule",{value:!0});vf.race=void 0;var L6=gr,U6=mi;function F6(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return U6.raceWith.apply(void 0,D6([],M6(L6.argsOrArgArray(e))))}vf.race=F6;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=e.merge=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.concat=e.combineLatestWith=e.combineLatest=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=void 0,e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.race=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.partition=e.pairwise=e.onErrorResumeNext=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=void 0,e.zipWith=e.zipAll=e.zip=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=void 0;var r=si;Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return r.audit}});var t=pu;Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return t.auditTime}});var n=vu;Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return n.buffer}});var o=_u;Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return o.bufferCount}});var i=yu;Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return i.bufferTime}});var a=bu;Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return a.bufferToggle}});var s=mu;Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return s.bufferWhen}});var c=gu;Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return c.catchError}});var u=wu;Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return u.combineAll}});var l=ci;Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return l.combineLatestAll}});var d=Pu;Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return d.combineLatest}});var h=Su;Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return h.combineLatestWith}});var p=Au;Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return p.concat}});var v=Jn;Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return v.concatAll}});var _=fi;Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return _.concatMap}});var b=Tu;Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return b.concatMapTo}});var w=Cu;Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return w.concatWith}});var E=to;Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return E.connect}});var S=Iu;Object.defineProperty(e,"count",{enumerable:!0,get:function(){return S.count}});var O=Ru;Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return O.debounce}});var A=ju;Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return A.debounceTime}});var $=sn;Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return $.defaultIfEmpty}});var I=$u;Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return I.delay}});var L=di;Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return L.delayWhen}});var X=Nu;Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return X.dematerialize}});var ae=ku;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return ae.distinct}});var _e=vi;Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return _e.distinctUntilChanged}});var ne=Mu;Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return ne.distinctUntilKeyChanged}});var ve=Du;Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return ve.elementAt}});var it=Lu;Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return it.endWith}});var ee=Uu;Object.defineProperty(e,"every",{enumerable:!0,get:function(){return ee.every}});var be=Fu;Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return be.exhaust}});var Y=_i;Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return Y.exhaustAll}});var k=yi;Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return k.exhaustMap}});var P=xu;Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return P.expand}});var C=Vt;Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return C.filter}});var R=Bu;Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return R.finalize}});var V=qr;Object.defineProperty(e,"find",{enumerable:!0,get:function(){return V.find}});var q=Vu;Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return q.findIndex}});var F=Wu;Object.defineProperty(e,"first",{enumerable:!0,get:function(){return F.first}});var te=zu;Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return te.groupBy}});var Z=hi;Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return Z.ignoreElements}});var ue=qu;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return ue.isEmpty}});var y=Hu;Object.defineProperty(e,"last",{enumerable:!0,get:function(){return y.last}});var T=Bt;Object.defineProperty(e,"map",{enumerable:!0,get:function(){return T.map}});var M=pi;Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return M.mapTo}});var x=Gu;Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return x.materialize}});var K=Ku;Object.defineProperty(e,"max",{enumerable:!0,get:function(){return K.max}});var me=Ju;Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return me.merge}});var je=un;Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return je.mergeAll}});var yt=Yu;Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return yt.flatMap}});var Cr=Pt;Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return Cr.mergeMap}});var fo=Zu;Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return fo.mergeMapTo}});var Di=Qu;Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return Di.mergeScan}});var Li=Xu;Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return Li.mergeWith}});var Ui=es;Object.defineProperty(e,"min",{enumerable:!0,get:function(){return Ui.min}});var Fi=ro;Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return Fi.multicast}});var Dd=on;Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return Dd.observeOn}});var Ld=Vn;Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return Ld.onErrorResumeNext}});var Ud=ts;Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return Ud.pairwise}});var Fd=pf;Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return Fd.partition}});var xd=rs;Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return xd.pluck}});var Bd=ns;Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return Bd.publish}});var Vd=os;Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return Vd.publishBehavior}});var Wd=is;Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return Wd.publishLast}});var zd=as;Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return zd.publishReplay}});var qd=vf;Object.defineProperty(e,"race",{enumerable:!0,get:function(){return qd.race}});var Hd=mi;Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return Hd.raceWith}});var Gd=wr;Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return Gd.reduce}});var Kd=us;Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return Kd.repeat}});var Yd=ss;Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return Yd.repeatWhen}});var Zd=cs;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return Zd.retry}});var Qd=ls;Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return Qd.retryWhen}});var Xd=Jo;Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return Xd.refCount}});var Jd=gi;Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return Jd.sample}});var eh=fs;Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return eh.sampleTime}});var th=ds;Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return th.scan}});var rh=hs;Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return rh.sequenceEqual}});var nh=wi;Object.defineProperty(e,"share",{enumerable:!0,get:function(){return nh.share}});var oh=ps;Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return oh.shareReplay}});var ih=vs;Object.defineProperty(e,"single",{enumerable:!0,get:function(){return ih.single}});var ah=_s;Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return ah.skip}});var uh=ys;Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return uh.skipLast}});var sh=bs;Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return sh.skipUntil}});var ch=ms;Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return ch.skipWhile}});var lh=gs;Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return lh.startWith}});var fh=an;Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return fh.subscribeOn}});var dh=ws;Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return dh.switchAll}});var hh=fn;Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return hh.switchMap}});var ph=Os;Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return ph.switchMapTo}});var vh=Es;Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return vh.switchScan}});var _h=cn;Object.defineProperty(e,"take",{enumerable:!0,get:function(){return _h.take}});var yh=bi;Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return yh.takeLast}});var bh=Ss;Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return bh.takeUntil}});var mh=Ps;Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return mh.takeWhile}});var gh=Ts;Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return gh.tap}});var wh=Oi;Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return wh.throttle}});var Oh=Cs;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return Oh.throttleTime}});var Eh=ln;Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return Eh.throwIfEmpty}});var Sh=Wn;Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return Sh.timeInterval}});var Ph=Pa;Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return Ph.timeout}});var Th=As;Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return Th.timeoutWith}});var Ch=Is;Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return Ch.timestamp}});var Ah=li;Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return Ah.toArray}});var Ih=Rs;Object.defineProperty(e,"window",{enumerable:!0,get:function(){return Ih.window}});var Rh=js;Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return Rh.windowCount}});var jh=$s;Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return jh.windowTime}});var $h=Ns;Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return $h.windowToggle}});var Nh=ks;Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return Nh.windowWhen}});var kh=Ms;Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return kh.withLatestFrom}});var Mh=Us;Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return Mh.zip}});var Dh=Ds;Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return Dh.zipAll}});var Lh=Ls;Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return Lh.zipWith}})})(hf);var Ei={},Io=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Ro=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Ei,"__esModule",{value:!0});var x6=G,Cn=za,mn=hf,Yi={READY:0,STREAMING:1,COMPLETED:2},B6=function(){function e(r,t){var n=r.pipe((0,mn.publishReplay)(1),(0,mn.refCount)());this._result=n,this._keys=n.pipe((0,mn.mergeMap)(function(o){return(0,Cn.from)(o.keys())}),(0,mn.publishReplay)(1),(0,mn.refCount)()),this._records=void 0,this._controls=new HO,this._summary=new Cn.ReplaySubject,this._state=t||Yi.READY}return e.prototype.keys=function(){return this._keys},e.prototype.records=function(){var r=this,t=this._result.pipe((0,mn.mergeMap)(function(n){return new Cn.Observable(function(o){return r._startStreaming({result:n,recordsObserver:o})})}));return t.push=function(){return r._push()},t},e.prototype.consume=function(){var r=this;return this._result.pipe((0,mn.mergeMap)(function(t){return new Cn.Observable(function(n){return r._startStreaming({result:t,summaryObserver:n})})}))},e.prototype.pause=function(){this._controls.pause()},e.prototype.resume=function(){return this._controls.resume()},e.prototype.push=function(){return this._controls.push()},e.prototype._startStreaming=function(r){var t=r===void 0?{}:r,n=t.result,o=t.recordsObserver,i=o===void 0?null:o,a=t.summaryObserver,s=a===void 0?null:a,c=[];return s&&c.push(this._summary.subscribe(s)),this._state<Yi.STREAMING?(this._state=Yi.STREAMING,this._setupRecordsStream(n),i?c.push(this._records.subscribe(i)):n._cancel(),c.push({unsubscribe:function(){n._cancel&&n._cancel()}})):i&&i.error((0,x6.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){c.forEach(function(u){return u.unsubscribe()})}},e.prototype._toObservable=function(){var r=this;function t(n){return new Cn.Observable(function(o){o.next(n),o.complete()})}return new Cn.Observable(function(n){r._result.subscribe({complete:function(){return n.complete()},next:function(o){return n.next(new e(t(o)),r._state)},error:function(o){return n.error(o)}})})},e.prototype._setupRecordsStream=function(r){var t=this;return this._records?this._records:(this._records=V6(r[Symbol.asyncIterator](),{complete:function(){return Io(t,void 0,void 0,function(){var n,o;return Ro(this,function(i){switch(i.label){case 0:return this._state=Yi.COMPLETED,o=(n=this._summary).next,[4,r.summary()];case 1:return o.apply(n,[i.sent()]),this._summary.complete(),[2]}})})},error:function(n){t._state=Yi.COMPLETED,t._summary.error(n)}},this._controls),this._records)},e}();Ei.default=B6;function V6(e,r,t){var n=this;t===void 0&&(t=new HO);var o=new Cn.Subject,i=function(s){return Io(n,void 0,void 0,function(){var c,u,l,d;return Ro(this,function(h){switch(h.label){case 0:return h.trys.push([0,2,3,4]),t.pushing=!0,[4,s];case 1:return c=h.sent(),u=c.done,l=c.value,u?(o.complete(),r.complete()):(o.next(l),t.paused||i(e.next()).catch(function(){})),[3,4];case 2:return d=h.sent(),o.error(d),r.error(d),[3,4];case 3:return t.pushing=!1,[7];case 4:return[2]}})})};function a(s){return Io(this,void 0,void 0,function(){return Ro(this,function(c){switch(c.label){case 0:return[4,i(e.next(s))];case 1:return c.sent(),[2]}})})}return t.pusher=a,a(),o}var HO=function(){function e(r){r===void 0&&(r=function(){return Io(t,void 0,void 0,function(){return Ro(this,function(n){return[2]})})});var t=this;this._paused=!1,this._pushing=!1,this._push=r}return e.prototype.pause=function(){this._paused=!0},Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushing",{get:function(){return this._pushing},set:function(r){this._pushing=r},enumerable:!1,configurable:!0}),e.prototype.resume=function(){return Io(this,void 0,void 0,function(){var r;return Ro(this,function(t){switch(t.label){case 0:return r=this._paused,this._paused=!1,r&&!this._pushing?[4,this._push()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.push=function(){return Io(this,void 0,void 0,function(){return Ro(this,function(r){switch(r.label){case 0:return this.pause(),[4,this._push()];case 1:return[2,r.sent()]}})})},Object.defineProperty(e.prototype,"pusher",{get:function(){return this._push},set:function(r){this._push=r},enumerable:!1,configurable:!0}),e}(),Fs={},GO=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fs,"__esModule",{value:!0});var oc=za,W6=GO(Ei);GO(G);var z6=function(){function e(r){this._txc=r}return e.prototype.run=function(r,t){var n=this;return new W6.default(new oc.Observable(function(o){try{o.next(n._txc.run(r,t)),o.complete()}catch(i){o.error(i)}return function(){}}))},e.prototype.commit=function(){var r=this;return new oc.Observable(function(t){r._txc.commit().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype.rollback=function(){var r=this;return new oc.Observable(function(t){r._txc.rollback().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype.isOpen=function(){return this._txc.isOpen()},e.prototype.close=function(){var r=this;return new oc.Observable(function(t){r._txc.close().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e}();Fs.default=z6;var _f={},KO=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_f,"__esModule",{value:!0});KO(Ei);KO(Fs);var q6=function(){function e(r){var t=r.run;this._run=t}return e.fromTransaction=function(r){return new e({run:r.run.bind(r)})},e.prototype.run=function(r,t){return this._run(r,t)},e}();_f.default=q6;var __={};Object.defineProperty(__,"__esModule",{value:!0});var Wc=G,up=za,sp=hf;Wc.internal.logger.Logger;var H6=Wc.error.SERVICE_UNAVAILABLE,Mm=30*1e3,Dm=1e3,Lm=2,Um=.2,G6=function(){function e(r){var t=r===void 0?{}:r,n=t.maxRetryTimeout,o=n===void 0?Mm:n,i=t.initialDelay,a=i===void 0?Dm:i,s=t.delayMultiplier,c=s===void 0?Lm:s,u=t.delayJitter,l=u===void 0?Um:u,d=t.logger,h=d===void 0?null:d;this._maxRetryTimeout=ic(o,Mm),this._initialDelay=ic(a,Dm),this._delayMultiplier=ic(c,Lm),this._delayJitter=ic(l,Um),this._logger=h}return e.prototype.retry=function(r){var t=this;return r.pipe((0,sp.retryWhen)(function(n){var o=[],i=Date.now(),a=1,s=t._initialDelay;return n.pipe((0,sp.mergeMap)(function(c){if(!(0,Wc.isRetriableError)(c))return(0,up.throwError)(function(){return c});if(o.push(c),a>=2&&Date.now()-i>=t._maxRetryTimeout){var u=(0,Wc.newError)("Failed after retried for ".concat(a," times in ").concat(t._maxRetryTimeout," ms. Make sure that your database is online and retry again."),H6);return u.seenErrors=o,(0,up.throwError)(function(){return u})}var l=t._computeNextDelay(s);return s=s*t._delayMultiplier,a++,t._logger&&t._logger.warn("Transaction failed and will be retried in ".concat(l)),(0,up.of)(1).pipe((0,sp.delay)(l))}))}))},e.prototype._computeNextDelay=function(r){var t=r*this._delayJitter;return r-t+2*t*Math.random()},e}();__.default=G6;function ic(e,r){return e||e===0?e:r}var yf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nl,"__esModule",{value:!0});var gn=za,Zi=hf,K6=yf(Ei),YO=G,Y6=yf(Fs),Z6=yf(_f),Q6=yf(__),y_=YO.internal.constants,Fm=y_.ACCESS_MODE_READ,xm=y_.ACCESS_MODE_WRITE,Bm=y_.TELEMETRY_APIS,ac=YO.internal.txConfig.TxConfig,X6=function(){function e(r){var t=r===void 0?{}:r,n=t.session,o=t.config,i=t.log;this._session=n,this._retryLogic=J6(o),this._log=i}return e.prototype.run=function(r,t,n){var o=this;return new K6.default(new gn.Observable(function(i){try{i.next(o._session.run(r,t,n)),i.complete()}catch(a){i.error(a)}return function(){}}))},e.prototype.beginTransaction=function(r){return this._beginTransaction(this._session._mode,r,{api:Bm.UNMANAGED_TRANSACTION})},e.prototype.readTransaction=function(r,t){return this._runTransaction(Fm,r,t)},e.prototype.writeTransaction=function(r,t){return this._runTransaction(xm,r,t)},e.prototype.executeRead=function(r,t){return this._executeInTransaction(Fm,r,t)},e.prototype.executeWrite=function(r,t){return this._executeInTransaction(xm,r,t)},e.prototype._executeInTransaction=function(r,t,n){var o=function(i){return new Z6.default({run:i.run.bind(i)})};return this._runTransaction(r,t,n,o)},e.prototype.close=function(){var r=this;return new gn.Observable(function(t){r._session.close().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype.lastBookmark=function(){return this.lastBookmarks()},e.prototype.lastBookmarks=function(){return this._session.lastBookmarks()},e.prototype._beginTransaction=function(r,t,n){var o=this,i=ac.empty();return t&&(i=new ac(t,this._log)),new gn.Observable(function(a){try{o._session._beginTransaction(r,i,n).then(function(s){a.next(new Y6.default(s)),a.complete()}).catch(function(s){return a.error(s)})}catch(s){a.error(s)}return function(){}})},e.prototype._runTransaction=function(r,t,n,o){var i=this;o===void 0&&(o=function(c){return c});var a=ac.empty();n&&(a=new ac(n));var s={apiTelemetryConfig:{api:Bm.MANAGED_TRANSACTION,onTelemetrySuccess:function(){s.apiTelemetryConfig=void 0}}};return this._retryLogic.retry((0,gn.of)(1).pipe((0,Zi.mergeMap)(function(){return i._beginTransaction(r,a,s.apiTelemetryConfig)}),(0,Zi.mergeMap)(function(c){return(0,gn.defer)(function(){try{return t(o(c))}catch(u){return(0,gn.throwError)(function(){return u})}}).pipe((0,Zi.catchError)(function(u){return c.rollback().pipe((0,Zi.concatWith)((0,gn.throwError)(function(){return u})))}),(0,Zi.concatWith)(c.commit()))})))},e}();Nl.default=X6;function J6(e){var r=e&&e.maxTransactionRetryTime?e.maxTransactionRetryTime:null;return new Q6.default({maxRetryTimeout:r})}var e8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),t8=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hr,"__esModule",{value:!0});hr.WRITE=hr.READ=hr.Driver=void 0;var bf=G,r8=t8(Nl),Vm=bf.internal.constants.FETCH_ALL,n8=bf.driver.READ,ZO=bf.driver.WRITE;hr.READ=n8;hr.WRITE=ZO;var QO=function(e){e8(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.rxSession=function(t){var n=t===void 0?{}:t,o=n.defaultAccessMode,i=o===void 0?ZO:o,a=n.bookmarks,s=n.database,c=s===void 0?"":s,u=n.fetchSize,l=n.impersonatedUser,d=n.bookmarkManager,h=n.notificationFilter,p=n.auth;return new r8.default({session:this._newSession({defaultAccessMode:i,bookmarkOrBookmarks:a,database:c,impersonatedUser:l,auth:p,reactive:!1,fetchSize:o8(u,this._config.fetchSize),bookmarkManager:d,notificationFilter:h,log:this._log}),config:this._config,log:this._log})},r}(bf.Driver);hr.Driver=QO;function o8(e,r){var t=parseInt(e,10);if(t>0||t===Vm)return t;if(t===0||t<0)throw new Error("The fetch size can only be a positive value or ".concat(Vm," for ALL. However fetchSize = ").concat(t));return r}hr.default=QO;var b_={};Object.defineProperty(b_,"__esModule",{value:!0});b_.default="5.28.1";var XO={},Hr={},mf={};Object.defineProperty(mf,"__esModule",{value:!0});var i8=function(){function e(){}return e.prototype.selectReader=function(r){throw new Error("Abstract function")},e.prototype.selectWriter=function(r){throw new Error("Abstract function")},e}();mf.default=i8;var m_={},g_={};Object.defineProperty(g_,"__esModule",{value:!0});var a8=function(){function e(r){this._offset=r||0}return e.prototype.next=function(r){if(r===0)return-1;var t=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),t%r},e}();g_.default=a8;var u8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),JO=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(m_,"__esModule",{value:!0});var Wm=JO(g_),s8=JO(mf),c8=function(e){u8(r,e);function r(t){var n=e.call(this)||this;return n._readersIndex=new Wm.default,n._writersIndex=new Wm.default,n._connectionPool=t,n}return r.prototype.selectReader=function(t){return this._select(t,this._readersIndex)},r.prototype.selectWriter=function(t){return this._select(t,this._writersIndex)},r.prototype._select=function(t,n){var o=t.length;if(o===0)return null;var i=n.next(o),a=i,s=null,c=Number.MAX_SAFE_INTEGER;do{var u=t[a],l=this._connectionPool.activeResourceCount(u);l<c&&(s=u,c=l),a===o-1?a=0:a++}while(a!==i);return s},r}(s8.default);m_.default=c8;var e1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hr,"__esModule",{value:!0});Hr.LeastConnectedLoadBalancingStrategy=Hr.LoadBalancingStrategy=void 0;var l8=e1(mf);Hr.LoadBalancingStrategy=l8.default;var t1=e1(m_);Hr.LeastConnectedLoadBalancingStrategy=t1.default;Hr.default=t1.default;var w_={},O_={},no={},Ur={},E_={},Or={},oo={},gf={},f8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(gf,"__esModule",{value:!0});var r1=function(){function e(r){this.position=0,this.length=r}return e.prototype.getUInt8=function(r){throw new Error("Not implemented")},e.prototype.getInt8=function(r){throw new Error("Not implemented")},e.prototype.getFloat64=function(r){throw new Error("Not implemented")},e.prototype.getVarInt=function(r){throw new Error("Not implemented")},e.prototype.putUInt8=function(r,t){throw new Error("Not implemented")},e.prototype.putInt8=function(r,t){throw new Error("Not implemented")},e.prototype.putFloat64=function(r,t){throw new Error("Not implemented")},e.prototype.getInt16=function(r){return this.getInt8(r)<<8|this.getUInt8(r+1)},e.prototype.getUInt16=function(r){return this.getUInt8(r)<<8|this.getUInt8(r+1)},e.prototype.getInt32=function(r){return this.getInt8(r)<<24|this.getUInt8(r+1)<<16|this.getUInt8(r+2)<<8|this.getUInt8(r+3)},e.prototype.getUInt32=function(r){return this.getUInt8(r)<<24|this.getUInt8(r+1)<<16|this.getUInt8(r+2)<<8|this.getUInt8(r+3)},e.prototype.getInt64=function(r){return this.getInt8(r)<<56|this.getUInt8(r+1)<<48|this.getUInt8(r+2)<<40|this.getUInt8(r+3)<<32|this.getUInt8(r+4)<<24|this.getUInt8(r+5)<<16|this.getUInt8(r+6)<<8|this.getUInt8(r+7)},e.prototype.getSlice=function(r,t){return new d8(r,t,this)},e.prototype.putInt16=function(r,t){this.putInt8(r,t>>8),this.putUInt8(r+1,t&255)},e.prototype.putUInt16=function(r,t){this.putUInt8(r,t>>8&255),this.putUInt8(r+1,t&255)},e.prototype.putInt32=function(r,t){this.putInt8(r,t>>24),this.putUInt8(r+1,t>>16&255),this.putUInt8(r+2,t>>8&255),this.putUInt8(r+3,t&255)},e.prototype.putUInt32=function(r,t){this.putUInt8(r,t>>24&255),this.putUInt8(r+1,t>>16&255),this.putUInt8(r+2,t>>8&255),this.putUInt8(r+3,t&255)},e.prototype.putInt64=function(r,t){this.putInt8(r,t>>48),this.putUInt8(r+1,t>>42&255),this.putUInt8(r+2,t>>36&255),this.putUInt8(r+3,t>>30&255),this.putUInt8(r+4,t>>24&255),this.putUInt8(r+5,t>>16&255),this.putUInt8(r+6,t>>8&255),this.putUInt8(r+7,t&255)},e.prototype.putVarInt=function(r,t){for(var n=0;t>1;){var o=t%128;t>=128&&(o+=128),t=t/128,this.putUInt8(r+n,o),n+=1}return n},e.prototype.putBytes=function(r,t){for(var n=0,o=t.remaining();n<o;n++)this.putUInt8(r+n,t.readUInt8())},e.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},e.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},e.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},e.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},e.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},e.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},e.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},e.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},e.prototype.readVarInt=function(){var r=this.getVarInt(this.position);return this._updatePos(r.length),r.value},e.prototype.writeUInt8=function(r){this.putUInt8(this._updatePos(1),r)},e.prototype.writeInt8=function(r){this.putInt8(this._updatePos(1),r)},e.prototype.writeInt16=function(r){this.putInt16(this._updatePos(2),r)},e.prototype.writeInt32=function(r){this.putInt32(this._updatePos(4),r)},e.prototype.writeUInt32=function(r){this.putUInt32(this._updatePos(4),r)},e.prototype.writeInt64=function(r){this.putInt64(this._updatePos(8),r)},e.prototype.writeFloat64=function(r){this.putFloat64(this._updatePos(8),r)},e.prototype.writeVarInt=function(r){var t=this.putVarInt(this.position,r);this._updatePos(t)},e.prototype.writeBytes=function(r){this.putBytes(this._updatePos(r.remaining()),r)},e.prototype.readSlice=function(r){return this.getSlice(this._updatePos(r),r)},e.prototype._updatePos=function(r){var t=this.position;return this.position+=r,t},e.prototype.remaining=function(){return this.length-this.position},e.prototype.hasRemaining=function(){return this.remaining()>0},e.prototype.reset=function(){this.position=0},e.prototype.toString=function(){return this.constructor.name+"( position="+this.position+` )
  `+this.toHex()},e.prototype.toHex=function(){for(var r="",t=0;t<this.length;t++){var n=this.getUInt8(t).toString(16);n.length===1&&(n="0"+n),r+=n,t!==this.length-1&&(r+=" ")}return r},e}();gf.default=r1;var d8=function(e){f8(r,e);function r(t,n,o){var i=e.call(this,n)||this;return i._start=t,i._inner=o,i}return r.prototype.putUInt8=function(t,n){this._inner.putUInt8(this._start+t,n)},r.prototype.getUInt8=function(t){return this._inner.getUInt8(this._start+t)},r.prototype.putInt8=function(t,n){this._inner.putInt8(this._start+t,n)},r.prototype.putFloat64=function(t,n){this._inner.putFloat64(this._start+t,n)},r.prototype.getInt8=function(t){return this._inner.getInt8(this._start+t)},r.prototype.getFloat64=function(t){return this._inner.getFloat64(this._start+t)},r}(r1),h8=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oo,"__esModule",{value:!0});oo.BaseBuffer=void 0;var n1=h8(gf);oo.BaseBuffer=n1.default;oo.default=n1.default;var p8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),o1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Or,"__esModule",{value:!0});Or.alloc=void 0;var uc=o1(B0),v8=o1(oo),i1=function(e){p8(r,e);function r(t){var n=this,o=y8(t);return n=e.call(this,o.length)||this,n._buffer=o,n}return r.prototype.getUInt8=function(t){return this._buffer.readUInt8(t)},r.prototype.getInt8=function(t){return this._buffer.readInt8(t)},r.prototype.getFloat64=function(t){return this._buffer.readDoubleBE(t)},r.prototype.getVarInt=function(t){for(var n=0,o=this._buffer.readInt8(t+n),i=o%128;o/128>=1;)n+=1,o=this._buffer.readInt8(t+n),i+=o%128;return{length:n+1,value:i}},r.prototype.putUInt8=function(t,n){this._buffer.writeUInt8(n,t)},r.prototype.putInt8=function(t,n){this._buffer.writeInt8(n,t)},r.prototype.putFloat64=function(t,n){this._buffer.writeDoubleBE(n,t)},r.prototype.putBytes=function(t,n){if(n instanceof r){var o=Math.min(n.length-n.position,this.length-t);n._buffer.copy(this._buffer,t,n.position,n.position+o),n.position+=o}else e.prototype.putBytes.call(this,t,n)},r.prototype.getSlice=function(t,n){return new r(this._buffer.slice(t,t+n))},r}(v8.default);Or.default=i1;function _8(e){return new i1(e)}Or.alloc=_8;function y8(e){return e instanceof uc.default.Buffer?e:typeof e=="number"&&typeof uc.default.Buffer.alloc=="function"?uc.default.Buffer.alloc(e):new uc.default.Buffer(e)}var b8=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(E_,"__esModule",{value:!0});var zm=b8(Or),go=G,a1=go.internal.util,u1=a1.ENCRYPTION_OFF,m8=a1.ENCRYPTION_ON,qm=1,g8=3,w8=function(){function e(r,t,n){t===void 0&&(t=j8),n===void 0&&(n=function(u){return new WebSocket(u)});var o=this;this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=r,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._receiveTimeoutId=null,this._closingPromise=null;var i=T8(r,t),a=i.scheme,s=i.error;if(s){this._error=s;return}this._ws=O8(a,r.address,n),this._ws.binaryType="arraybuffer";var c=this;this._ws.onclose=function(u){u&&!u.wasClean&&c._handleConnectionError(),c._open=!1},this._ws.onopen=function(){c._clearConnectionTimeout();var u=c._pending;c._pending=null;for(var l=0;l<u.length;l++)c.write(u[l])},this._ws.onmessage=function(u){if(o._resetTimeout(),c.onmessage){var l=new zm.default(u.data);c.onmessage(l)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}return e.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired){this._error=(0,go.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),this.onerror&&this.onerror(this._error);return}this._open&&!this._timedout&&(this._error=(0,go.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},e.prototype.write=function(r){if(this._pending!==null)this._pending.push(r);else if(r instanceof zm.default)try{this._ws.send(r._buffer)}catch(t){if(this._ws.readyState!==qm)this._handleConnectionError();else throw t}else throw(0,go.newError)("Don't know how to send buffer: "+r)},e.prototype.close=function(){var r=this;return this._closingPromise===null&&(this._closingPromise=new Promise(function(t,n){r._clearConnectionTimeout(),r._ws&&r._ws.readyState!==g8?(r._open=!1,r.stopReceiveTimeout(),r._ws.onclose=function(){t()},r._ws.close()):t()})),this._closingPromise},e.prototype.setupReceiveTimeout=function(r){this._receiveTimeout=r},e.prototype.stopReceiveTimeout=function(){this._receiveTimeout!==null&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,this._receiveTimeoutId!=null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=null)},e.prototype.startReceiveTimeout=function(){this._open&&this._receiveTimeout!==null&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._resetTimeout())},e.prototype._resetTimeout=function(){var r=this;this._receiveTimeoutStarted&&(this._receiveTimeoutId!==null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=setTimeout(function(){r._receiveTimeoutId=null,r._timedout=!0,r.stopReceiveTimeout(),r._error=(0,go.newError)("Connection lost. Server didn't respond in ".concat(r._receiveTimeout,"ms"),r._config.connectionErrorCode),r.close(),r.onerror&&r.onerror(r._error)},this._receiveTimeout))},e.prototype._setupConnectionTimeout=function(){var r=this,t=this._config.connectionTimeout;if(t){var n=this._ws;return setTimeout(function(){n.readyState!==qm&&(r._connectionTimeoutFired=!0,n.close())},t)}return null},e.prototype._clearConnectionTimeout=function(){var r=this._connectionTimeoutId;(r||r===0)&&(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(r))},e}();E_.default=w8;function O8(e,r,t){var n=e+"://"+r.asHostPort();try{return t(n)}catch(i){if(E8(i,r)){var o=P8(e,r);return t(o)}else throw i}}function E8(e,r){return e.name==="SyntaxError"&&S8(r.asHostPort())}function S8(e){return e.charAt(0)==="["&&e.indexOf("]")!==-1}function P8(e,r){var t=r.host().replace(/:/g,"-"),n=t.replace("%","s"),o=n+".ipv6-literal.net";return"".concat(e,"://").concat(o,":").concat(r.port())}function T8(e,r){var t=C8(e),n=A8(e),o=e.trust,i=I8(r);if(R8(t,n,i),n)return{scheme:"ws",error:null};if(i)return{scheme:"wss",error:null};if(t){if(!o||o==="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES")return{scheme:"wss",error:null};var a=(0,go.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+o+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+u1+'"` in the driver configuration.');return{scheme:null,error:a}}return{scheme:"ws",error:null}}function C8(e){return e.encrypted===!0||e.encrypted===m8}function A8(e){return e.encrypted===!1||e.encrypted===u1}function I8(e){var r=typeof e=="function"?e():"";return r&&r.toLowerCase().indexOf("https")>=0}function R8(e,r,t){t===null||(e&&!t?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):r&&t&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}function j8(){return typeof window<"u"&&window.location?window.location.protocol:null}var S_={},$8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(S_,"__esModule",{value:!0});var N8=G,k8=N8.internal.resolver.BaseHostNameResolver,M8=function(e){$8(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.resolve=function(t){return this._resolveToItself(t)},r}(k8);S_.default=M8;var P_={},D8=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},L8=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(P_,"__esModule",{value:!0});P_.default={load:function(e){return D8(this,void 0,void 0,function(){return L8(this,function(r){return[2,e]})})}};var T_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.ClientCertificatesLoader=Ur.HostNameResolver=Ur.Channel=void 0;var U8=T_(E_),F8=T_(S_),x8=T_(P_);Ur.Channel=U8.default;Ur.HostNameResolver=F8.default;Ur.ClientCertificatesLoader=x8.default;var Uo={},C_={},B8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(C_,"__esModule",{value:!0});var V8=oo,W8=Or,z8=function(e){B8(r,e);function r(t){for(var n=this,o=0,i=0;i<t.length;i++)o+=t[i].length;return n=e.call(this,o)||this,n._buffers=t,n}return r.prototype.getUInt8=function(t){for(var n=0;n<this._buffers.length;n++){var o=this._buffers[n];if(t>=o.length)t-=o.length;else return o.getUInt8(t)}},r.prototype.getInt8=function(t){for(var n=0;n<this._buffers.length;n++){var o=this._buffers[n];if(t>=o.length)t-=o.length;else return o.getInt8(t)}},r.prototype.getFloat64=function(t){for(var n=(0,W8.alloc)(8),o=0;o<8;o++)n.putUInt8(o,this.getUInt8(t+o));return n.getFloat64(0)},r}(V8.BaseBuffer);C_.default=z8;var q8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),s1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Uo,"__esModule",{value:!0});Uo.Dechunker=Uo.Chunker=void 0;var H8=s1(gf),Hm=Or,G8=s1(C_),sc=2,K8=0,Y8=1400,Z8=function(e){q8(r,e);function r(t,n){var o=e.call(this,0)||this;return o._bufferSize=n||Y8,o._ch=t,o._buffer=(0,Hm.alloc)(o._bufferSize),o._currentChunkStart=0,o._chunkOpen=!1,o}return r.prototype.putUInt8=function(t,n){this._ensure(1),this._buffer.writeUInt8(n)},r.prototype.putInt8=function(t,n){this._ensure(1),this._buffer.writeInt8(n)},r.prototype.putFloat64=function(t,n){this._ensure(8),this._buffer.writeFloat64(n)},r.prototype.putBytes=function(t,n){for(;n.remaining()>0;)this._ensure(1),this._buffer.remaining()>n.remaining()?this._buffer.writeBytes(n):this._buffer.writeBytes(n.readSlice(this._buffer.remaining()));return this},r.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var t=this._buffer;this._buffer=null,this._ch.write(t.getSlice(0,t.position)),this._buffer=(0,Hm.alloc)(this._bufferSize),this._chunkOpen=!1}return this},r.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<sc&&this.flush(),this._buffer.writeInt16(K8)},r.prototype._ensure=function(t){var n=this._chunkOpen?t:t+sc;this._buffer.remaining()<n&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+sc,this._chunkOpen=!0)},r.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var t=this._buffer.position-(this._currentChunkStart+sc);this._buffer.putUInt16(this._currentChunkStart,t),this._chunkOpen=!1}},r}(H8.default);Uo.Chunker=Z8;var Q8=function(){function e(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return e.prototype.AWAITING_CHUNK=function(r){return r.remaining()>=2?this._onHeader(r.readUInt16()):(this._partialChunkHeader=r.readUInt8()<<8,this.IN_HEADER)},e.prototype.IN_HEADER=function(r){return this._onHeader((this._partialChunkHeader|r.readUInt8())&65535)},e.prototype.IN_CHUNK=function(r){return this._chunkSize<=r.remaining()?(this._currentMessage.push(r.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=r.remaining(),this._currentMessage.push(r.readSlice(r.remaining())),this.IN_CHUNK)},e.prototype.CLOSED=function(r){},e.prototype._onHeader=function(r){if(r===0){var t=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:t=this._currentMessage[0];break;default:t=new G8.default(this._currentMessage);break}return this._currentMessage=[],this.onmessage(t),this.AWAITING_CHUNK}else return this._chunkSize=r,this.IN_CHUNK},e.prototype.write=function(r){for(;r.hasRemaining();)this._state=this._state(r)},e}();Uo.Dechunker=Q8;var A_={};Object.defineProperty(A_,"__esModule",{value:!0});var wf=G,c1=wf.internal.util,X8=c1.ENCRYPTION_OFF,J8=c1.ENCRYPTION_ON,e5=wf.error.SERVICE_UNAVAILABLE,Gm=[null,void 0,!0,!1,J8,X8],Km=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"],t5=function(){function e(r,t,n,o){this.address=r,this.encrypted=r5(t),this.trust=n5(t),this.trustedCertificates=o5(t),this.knownHostsPath=i5(t),this.connectionErrorCode=n||e5,this.connectionTimeout=t.connectionTimeout,this.clientCertificate=o}return e}();A_.default=t5;function r5(e){var r=e.encrypted;if(Gm.indexOf(r)===-1)throw(0,wf.newError)("Illegal value of the encrypted setting ".concat(r,". Expected one of ").concat(Gm));return r}function n5(e){var r=e.trust;if(Km.indexOf(r)===-1)throw(0,wf.newError)("Illegal value of the trust setting ".concat(r,". Expected one of ").concat(Km));return r}function o5(e){return e.trustedCertificates||[]}function i5(e){return e.knownHosts||null}var I_={},l1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(I_,"__esModule",{value:!0});var a5=l1(Or),u5=G,cp=l1(B0),s5=$T(),Ym=new s5.StringDecoder("utf8");function c5(e){return new a5.default(p5(e))}function l5(e,r){if(Object.prototype.hasOwnProperty.call(e,"_buffer"))return f5(e,r);if(Object.prototype.hasOwnProperty.call(e,"_buffers"))return d5(e,r);throw(0,u5.newError)("Don't know how to decode strings from '".concat(e,"'"))}function f5(e,r){var t=e.position,n=t+r;return e.position=Math.min(n,e.length),e._buffer.toString("utf8",t,n)}function d5(e,r){return h5(e,r,function(t){return Ym.write(t._buffer)},function(){return Ym.end()})}function h5(e,r,t,n){var o=r,i=e.position;e._updatePos(Math.min(r,e.length-i));var a=e._buffers.reduce(function(s,c){if(o<=0)return s;if(i>=c.length)return i-=c.length,"";c._updatePos(i-c.position);var u=Math.min(c.length-i,o),l=c.readSlice(u);return c._updatePos(u),o=Math.max(o-l.length,0),i=0,s+t(l)},"");return a+n()}function p5(e){return typeof cp.default.Buffer.from=="function"?cp.default.Buffer.from(e,"utf8"):new cp.default.Buffer(e,"utf8")}I_.default={encode:c5,decode:l5};(function(e){var r=f&&f.__createBinding||(Object.create?function(s,c,u,l){l===void 0&&(l=u);var d=Object.getOwnPropertyDescriptor(c,u);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(s,l,d)}:function(s,c,u,l){l===void 0&&(l=u),s[l]=c[u]}),t=f&&f.__exportStar||function(s,c){for(var u in s)u!=="default"&&!Object.prototype.hasOwnProperty.call(c,u)&&r(c,s,u)},n=f&&f.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.utf8=e.alloc=e.ChannelConfig=void 0,t(Ur,e),t(Uo,e);var o=A_;Object.defineProperty(e,"ChannelConfig",{enumerable:!0,get:function(){return n(o).default}});var i=Or;Object.defineProperty(e,"alloc",{enumerable:!0,get:function(){return i.alloc}});var a=I_;Object.defineProperty(e,"utf8",{enumerable:!0,get:function(){return n(a).default}})})(no);Object.defineProperty(O_,"__esModule",{value:!0});var f1=no,d1=G,v5=1616949271,_5=["5.8","5.7","5.6","5.4","5.3","5.2","5.1","5.0","4.4","4.3","4.2","3.0"],y5=0;function yo(e,r){return{major:e,minor:r}}function b5(e){if(e.length>4)throw(0,d1.newError)("It should not have more than 4 versions of the protocol");var r=(0,f1.alloc)(5*4);return r.writeInt32(v5),e.forEach(function(t){if(t instanceof Array){var n=t[0],o=n.major,i=n.minor,a=t[1].minor,s=i-a;r.writeInt32(s<<16|i<<8|o)}else{var o=t.major,i=t.minor;r.writeInt32(i<<8|o)}}),r.reset(),r}function m5(e,r){var t=[e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readUInt8()];if(t[0]===72&&t[1]===84&&t[2]===84&&t[3]===80)throw r.error("Handshake failed since server responded with HTTP."),(0,d1.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return+(t[3]+"."+t[2])}function g5(e,r,t){for(var n=r.readVarInt(),o=[],i=0;i<n;i++){var a=[r.readUInt8(),r.readUInt8(),r.readUInt8(),r.readUInt8()];o=o.concat(S5(a))}r.readVarInt();var s=P5(),c=0,u=0;o.sort(function(d,h){return Number(d.major)!==Number(h.major)?Number(h.major)-Number(d.major):Number(h.minor)-Number(d.minor)});for(var i=0;i<o.length;i++){var l=o[i];if(_5.includes(l.major+"."+l.minor)){c=l.major,u=l.minor;break}}return new Promise(function(d,h){try{var p=(0,f1.alloc)(5);p.writeInt32(u<<8|c),p.writeVarInt(s),e.write(p),d({protocolVersion:+(c+"."+u),capabilites:s,consumeRemainingBuffer:function(v){r.hasRemaining()&&v(r.readSlice(r.remaining()))}})}catch(v){h(v)}})}function w5(){return b5([yo(255,1),[yo(5,8),yo(5,0)],[yo(4,4),yo(4,2)],yo(3,0)])}function O5(e,r){return E5(e,r).then(function(t){return t.protocolVersion===255.1?g5(e,t.buffer):t})}O_.default=O5;function E5(e,r){var t=this;return new Promise(function(n,o){var i=function(a){o(a)};e.onerror=i.bind(t),e._error&&i(e._error),e.onmessage=function(a){try{var s=m5(a,r);n({protocolVersion:s,capabilites:0,buffer:a,consumeRemainingBuffer:function(c){a.hasRemaining()&&c(a.readSlice(a.remaining()))}})}catch(c){o(c)}},e.write(w5())})}function S5(e){for(var r=[],t=e[3],n=e[2],o=0;o<=e[1];o++)r.push({major:t,minor:n-o});return r}function P5(e){return y5}var R_={},Of={},Ve={},ie={},Ef={},j_=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),T5=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ef,"__esModule",{value:!0});T5(G);var Sf=function(){function e(){}return e.ofRecord=function(r){return r===null?e.ofNull():new I5(r)},e.ofMessageResponse=function(r){return r===null?e.ofNull():new C5(r)},e.ofNull=function(){return new A5},Object.defineProperty(e.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),e}();Ef.default=Sf;var C5=function(e){j_(r,e);function r(t){var n=e.call(this)||this;return n._response=t,n}return Object.defineProperty(r.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNull",{get:function(){return this._response===null},enumerable:!1,configurable:!0}),r}(Sf),A5=function(e){j_(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),r}(Sf),I5=function(e){j_(r,e);function r(t){var n=e.call(this)||this;return n._record=t,n}return Object.defineProperty(r.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNull",{get:function(){return this._record===null},enumerable:!1,configurable:!0}),r}(Sf),Qt={},zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.reuseOngoingRequest=zn.identity=void 0;var R5=G;function j5(e){return e}zn.identity=j5;function $5(e,r){r===void 0&&(r=null);var t=new Map;return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=R5.json.stringify(n);if(t.has(i))return t.get(i);var a=e.apply(r,n);return t.set(i,a),a.finally(function(){t.delete(i)})}}zn.reuseOngoingRequest=$5;var Pf={},N5=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Pf,"__esModule",{value:!0});Pf.equals=void 0;function k5(e,r){var t,n;if(e===r)return!0;if(e===null||r===null)return!1;if(typeof e=="object"&&typeof r=="object"){var o=Object.keys(e),i=Object.keys(r);if(o.length!==i.length)return!1;try{for(var a=N5(o),s=a.next();!s.done;s=a.next()){var c=s.value;if(e[c]!==r[c])return!1}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0}return!1}Pf.equals=k5;var M5=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),D5=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),h1=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&M5(r,e,t);return D5(r,e),r};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.object=Qt.functional=void 0;Qt.functional=h1(zn);Qt.object=h1(Pf);var Er=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),L5=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ie,"__esModule",{value:!0});ie.TelemetryObserver=ie.ProcedureRouteObserver=ie.RouteObserver=ie.CompletedObserver=ie.FailedObserver=ie.ResetObserver=ie.LogoffObserver=ie.LoginObserver=ie.ResultStreamObserver=ie.StreamObserver=void 0;var tt=G,p1=L5(Ef),U5=Qt,F5=tt.internal.constants.FETCH_ALL,Gr=tt.error.PROTOCOL_ERROR,io=function(){function e(){}return e.prototype.onNext=function(r){},e.prototype.onError=function(r){},e.prototype.onCompleted=function(r){},e}();ie.StreamObserver=io;var Tf=function(e){Er(r,e);function r(t){var n=t===void 0?{}:t,o=n.reactive,i=o===void 0?!1:o,a=n.moreFunction,s=n.discardFunction,c=n.fetchSize,u=c===void 0?F5:c,l=n.beforeError,d=n.afterError,h=n.beforeKeys,p=n.afterKeys,v=n.beforeComplete,_=n.afterComplete,b=n.server,w=n.highRecordWatermark,E=w===void 0?Number.MAX_VALUE:w,S=n.lowRecordWatermark,O=S===void 0?Number.MAX_VALUE:S,A=n.enrichMetadata,$=n.onDb,I=e.call(this)||this;return I._fieldKeys=null,I._fieldLookup=null,I._head=null,I._queuedRecords=[],I._tail=null,I._error=null,I._observers=[],I._meta={},I._server=b,I._beforeError=l,I._afterError=d,I._beforeKeys=h,I._afterKeys=p,I._beforeComplete=v,I._afterComplete=_,I._enrichMetadata=A||U5.functional.identity,I._queryId=null,I._moreFunction=a,I._discardFunction=s,I._discard=!1,I._fetchSize=u,I._lowRecordWatermark=O,I._highRecordWatermark=E,I._setState(i?jt.READY:jt.READY_STREAMING),I._setupAutoPull(),I._paused=!1,I._pulled=!i,I._haveRecordStreamed=!1,I._onDb=$,I}return r.prototype.pause=function(){this._paused=!0},r.prototype.resume=function(){this._paused=!1,this._setupAutoPull(!0),this._state.pull(this)},r.prototype.onNext=function(t){this._haveRecordStreamed=!0;var n=new tt.Record(this._fieldKeys,t,this._fieldLookup);this._observers.some(function(o){return o.onNext})?this._observers.forEach(function(o){o.onNext&&o.onNext(n)}):(this._queuedRecords.push(n),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},r.prototype.onCompleted=function(t){this._state.onSuccess(this,t)},r.prototype.onError=function(t){this._state.onError(this,t)},r.prototype.cancel=function(){this._discard=!0},r.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(jt.STREAMING)},r.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(jt.SUCCEEDED)},r.prototype.subscribe=function(t){if(this._head&&t.onKeys&&t.onKeys(this._head),this._queuedRecords.length>0&&t.onNext)for(var n=0;n<this._queuedRecords.length;n++)t.onNext(this._queuedRecords[n]),this._queuedRecords.length-n-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===jt.READY&&this._handleStreaming());this._tail&&t.onCompleted&&t.onCompleted(this._tail),this._error&&t.onError(this._error),this._observers.push(t),this._state===jt.READY&&this._handleStreaming()},r.prototype._handleHasMore=function(t){this._setState(jt.READY),this._handleStreaming(),delete t.has_more},r.prototype._handlePullSuccess=function(t){var n=this,o=this._enrichMetadata(Object.assign(this._server?{server:this._server}:{},this._meta,{stream_summary:{have_records_streamed:this._haveRecordStreamed,pulled:this._pulled,has_keys:this._fieldKeys.length>0}},t));if(![void 0,null,"r","w","rw","s"].includes(o.type)){this.onError((0,tt.newError)(`Server returned invalid query type. Expected one of [undefined, null, "r", "w", "rw", "s"] but got '`.concat(o.type,"'"),Gr));return}this._setState(jt.SUCCEEDED);var i=null;this._beforeComplete&&(i=this._beforeComplete(o));var a=function(){n._tail=o,n._observers.some(function(s){return s.onCompleted})&&n._observers.forEach(function(s){s.onCompleted&&s.onCompleted(o)}),n._afterComplete&&n._afterComplete(o)};i?Promise.resolve(i).then(function(){return a()}):a()},r.prototype._handleRunSuccess=function(t,n){var o=this;if(this._fieldKeys===null){if(this._fieldKeys=[],this._fieldLookup={},t.fields&&t.fields.length>0){this._fieldKeys=t.fields;for(var i=0;i<t.fields.length;i++)this._fieldLookup[t.fields[i]]=i}t.db!==null&&this._onDb!==void 0&&this._onDb(t.db),t.fields!=null&&delete t.fields,t.qid!==null&&t.qid!==void 0&&(this._queryId=t.qid,delete t.qid),this._storeMetadataForCompletion(t);var a=null;this._beforeKeys&&(a=this._beforeKeys(this._fieldKeys));var s=function(){o._head=o._fieldKeys,o._observers.some(function(c){return c.onKeys})&&o._observers.forEach(function(c){c.onKeys&&c.onKeys(o._fieldKeys)}),o._afterKeys&&o._afterKeys(o._fieldKeys),n()};a?Promise.resolve(a).then(function(){return s()}):s()}},r.prototype._handleError=function(t){var n=this;this._setState(jt.FAILED),this._error=t;var o=null;this._beforeError&&(o=this._beforeError(t));var i=function(){n._observers.some(function(a){return a.onError})&&n._observers.forEach(function(a){a.onError&&a.onError(t)}),n._afterError&&n._afterError(t)};o?Promise.resolve(o).then(function(){return i()}):i()},r.prototype._handleStreaming=function(){this._head&&this._observers.some(function(t){return t.onNext||t.onCompleted})&&!this._paused&&(this._discard||this._autoPull)&&this._more()},r.prototype._more=function(){this._discard?this._discardFunction(this._queryId,this):(this._pulled=!0,this._moreFunction(this._queryId,this._fetchSize,this)),this._setState(jt.STREAMING)},r.prototype._storeMetadataForCompletion=function(t){for(var n=Object.keys(t),o=n.length,i="";o--;)i=n[o],this._meta[i]=t[i]},r.prototype._setState=function(t){this._state=t},r.prototype._setupAutoPull=function(){this._autoPull=!0},r}(io);ie.ResultStreamObserver=Tf;var x5=function(e){Er(r,e);function r(t){var n=t===void 0?{}:t,o=n.onError,i=n.onCompleted,a=e.call(this)||this;return a._onError=o,a._onCompleted=i,a}return r.prototype.onNext=function(t){this.onError((0,tt.newError)("Received RECORD when initializing "+tt.json.stringify(t)))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(io);ie.LoginObserver=x5;var B5=function(e){Er(r,e);function r(t){var n=t===void 0?{}:t,o=n.onError,i=n.onCompleted,a=e.call(this)||this;return a._onError=o,a._onCompleted=i,a}return r.prototype.onNext=function(t){this.onError((0,tt.newError)("Received RECORD when logging off "+tt.json.stringify(t)))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(io);ie.LogoffObserver=B5;var V5=function(e){Er(r,e);function r(t){var n=t===void 0?{}:t,o=n.onProtocolError,i=n.onError,a=n.onComplete,s=e.call(this)||this;return s._onProtocolError=o,s._onError=i,s._onComplete=a,s}return r.prototype.onNext=function(t){this.onError((0,tt.newError)("Received RECORD when resetting: received record is: "+tt.json.stringify(t),Gr))},r.prototype.onError=function(t){t.code===Gr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onComplete&&this._onComplete(t)},r}(io);ie.ResetObserver=V5;var W5=function(e){Er(r,e);function r(t){var n=t===void 0?{}:t,o=n.onError,i=n.onCompleted,a=e.call(this)||this;return a._onError=o,a._onCompleted=i,a}return r.prototype.onNext=function(t){this.onError((0,tt.newError)("Received RECORD when sending telemetry "+tt.json.stringify(t),Gr))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(Tf);ie.TelemetryObserver=W5;var z5=function(e){Er(r,e);function r(t){var n=t.error,o=t.onError,i=e.call(this,{beforeError:o})||this;return i.onError(n),i}return r}(Tf);ie.FailedObserver=z5;var q5=function(e){Er(r,e);function r(){var t=e.call(this)||this;return e.prototype.markCompleted.call(t),t}return r}(Tf);ie.CompletedObserver=q5;var H5=function(e){Er(r,e);function r(t){var n=t.resultObserver,o=t.onProtocolError,i=t.onError,a=t.onCompleted,s=e.call(this)||this;return s._resultObserver=n,s._onError=i,s._onCompleted=a,s._records=[],s._onProtocolError=o,n.subscribe(s),s}return r.prototype.onNext=function(t){this._records.push(t)},r.prototype.onError=function(t){t.code===Gr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(){if(this._records!==null&&this._records.length!==1){this.onError((0,tt.newError)("Illegal response from router. Received "+this._records.length+` records but expected only one.
`+tt.json.stringify(this._records),Gr));return}this._onCompleted&&this._onCompleted(p1.default.ofRecord(this._records[0]))},r}(io);ie.ProcedureRouteObserver=H5;var G5=function(e){Er(r,e);function r(t){var n=t===void 0?{}:t,o=n.onProtocolError,i=n.onError,a=n.onCompleted,s=e.call(this)||this;return s._onProtocolError=o,s._onError=i,s._onCompleted=a,s}return r.prototype.onNext=function(t){this.onError((0,tt.newError)("Received RECORD when resetting: received record is: "+tt.json.stringify(t),Gr))},r.prototype.onError=function(t){t.code===Gr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(p1.default.ofMessageResponse(t))},r}(io);ie.RouteObserver=G5;var jt={READY_STREAMING:{onSuccess:function(e,r){e._handleRunSuccess(r,function(){e._setState(jt.STREAMING)})},onError:function(e,r){e._handleError(r)},name:function(){return"READY_STREAMING"},pull:function(){}},READY:{onSuccess:function(e,r){e._handleRunSuccess(r,function(){return e._handleStreaming()})},onError:function(e,r){e._handleError(r)},name:function(){return"READY"},pull:function(e){return e._more()}},STREAMING:{onSuccess:function(e,r){r.has_more?e._handleHasMore(r):e._handlePullSuccess(r)},onError:function(e,r){e._handleError(r)},name:function(){return"STREAMING"},pull:function(){}},FAILED:{onError:function(e){},name:function(){return"FAILED"},pull:function(){}},SUCCEEDED:{name:function(){return"SUCCEEDED"},pull:function(){}}};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.assertNotificationFilterIsEmpty=Ve.assertImpersonatedUserIsEmpty=Ve.assertTxConfigIsEmpty=Ve.assertDatabaseIsEmpty=void 0;var Ta=G;function K5(e,r,t){if(r===void 0&&(r=function(){}),e&&!e.isEmpty()){var n=(0,Ta.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw r(n.message),t.onError(n),n}}Ve.assertTxConfigIsEmpty=K5;function Y5(e,r,t){if(r===void 0&&(r=function(){}),e){var n=(0,Ta.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw r(n.message),t.onError(n),n}}Ve.assertDatabaseIsEmpty=Y5;function Z5(e,r,t){if(r===void 0&&(r=function(){}),e){var n=(0,Ta.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+"Trying to impersonate ".concat(e,"."));throw r(n.message),t.onError(n),n}}Ve.assertImpersonatedUserIsEmpty=Z5;function Q5(e,r,t){if(r===void 0&&(r=function(){}),e!==void 0){var n=(0,Ta.newError)("Driver is connected to a database that does not support user notification filters. Please upgrade to Neo4j 5.7.0 or later in order to use this functionality. "+"Trying to set notifications to ".concat(Ta.json.stringify(e),"."));throw r(n.message),t.onError(n),n}}Ve.assertNotificationFilterIsEmpty=Q5;var et={},qn={},Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.verifyStructSize=Kr.Structure=void 0;var v1=G,X5=v1.error.PROTOCOL_ERROR,_1=function(){function e(r,t){this.signature=r,this.fields=t}return Object.defineProperty(e.prototype,"size",{get:function(){return this.fields.length},enumerable:!1,configurable:!0}),e.prototype.toString=function(){for(var r="",t=0;t<this.fields.length;t++)t>0&&(r+=", "),r+=this.fields[t];return"Structure("+this.signature+", ["+r+"])"},e}();Kr.Structure=_1;function J5(e,r,t){if(r!==t)throw(0,v1.newError)("Wrong struct size for ".concat(e,", expected ").concat(r," but was ").concat(t),X5)}Kr.verifyStructSize=J5;Kr.default=_1;Object.defineProperty(qn,"__esModule",{value:!0});qn.Unpacker=qn.Packer=void 0;var ua=no,y1=Qt,b1=Kr,Ie=G,eV=Ie.error.PROTOCOL_ERROR,m1=128,g1=144,w1=160,O1=176,E1=192,S1=193,P1=194,T1=195,C1=200,A1=201,I1=202,R1=203,j1=208,$1=209,N1=210,k1=212,M1=213,D1=214,L1=204,U1=205,F1=206,x1=216,B1=217,V1=218,W1=220,z1=221,tV=function(){function e(r){this._ch=r,this._byteArraysSupported=!0}return e.prototype.packable=function(r,t){var n=this;t===void 0&&(t=y1.functional.identity);try{r=t(r)}catch(a){return function(){throw a}}if(r===null)return function(){return n._ch.writeUInt8(E1)};if(r===!0)return function(){return n._ch.writeUInt8(T1)};if(r===!1)return function(){return n._ch.writeUInt8(P1)};if(typeof r=="number")return function(){return n.packFloat(r)};if(typeof r=="string")return function(){return n.packString(r)};if(typeof r=="bigint")return function(){return n.packInteger((0,Ie.int)(r))};if((0,Ie.isInt)(r))return function(){return n.packInteger(r)};if(r instanceof Int8Array)return function(){return n.packBytes(r)};if(r instanceof Array)return function(){n.packListHeader(r.length);for(var a=0;a<r.length;a++)n.packable(r[a]===void 0?null:r[a],t)()};if(nV(r))return this.packableIterable(r,t);if(r instanceof b1.Structure){for(var o=[],i=0;i<r.fields.length;i++)o[i]=this.packable(r.fields[i],t);return function(){return n.packStruct(r.signature,o)}}else return typeof r=="object"?function(){for(var a=Object.keys(r),s=0,c=0;c<a.length;c++)r[a[c]]!==void 0&&s++;n.packMapHeader(s);for(var c=0;c<a.length;c++){var u=a[c];r[u]!==void 0&&(n.packString(u),n.packable(r[u],t)())}}:this._nonPackableValue("Unable to pack the given value: ".concat(r))},e.prototype.packableIterable=function(r,t){try{var n=Array.from(r);return this.packable(n,t)}catch(o){throw(0,Ie.newError)("Cannot pack given iterable, ".concat(o.message,": ").concat(r))}},e.prototype.packStruct=function(r,t){t=t||[],this.packStructHeader(t.length,r);for(var n=0;n<t.length;n++)t[n]()},e.prototype.packInteger=function(r){var t=r.high,n=r.low;r.greaterThanOrEqual(-16)&&r.lessThan(128)?this._ch.writeInt8(n):r.greaterThanOrEqual(-128)&&r.lessThan(-16)?(this._ch.writeUInt8(C1),this._ch.writeInt8(n)):r.greaterThanOrEqual(-32768)&&r.lessThan(32768)?(this._ch.writeUInt8(A1),this._ch.writeInt16(n)):r.greaterThanOrEqual(-2147483648)&&r.lessThan(2147483648)?(this._ch.writeUInt8(I1),this._ch.writeInt32(n)):(this._ch.writeUInt8(R1),this._ch.writeInt32(t),this._ch.writeInt32(n))},e.prototype.packFloat=function(r){this._ch.writeUInt8(S1),this._ch.writeFloat64(r)},e.prototype.packString=function(r){var t=ua.utf8.encode(r),n=t.length;if(n<16)this._ch.writeUInt8(m1|n),this._ch.writeBytes(t);else if(n<256)this._ch.writeUInt8(j1),this._ch.writeUInt8(n),this._ch.writeBytes(t);else if(n<65536)this._ch.writeUInt8($1),this._ch.writeUInt8(n/256>>0),this._ch.writeUInt8(n%256),this._ch.writeBytes(t);else if(n<4294967296)this._ch.writeUInt8(N1),this._ch.writeUInt8((n/16777216>>0)%256),this._ch.writeUInt8((n/65536>>0)%256),this._ch.writeUInt8((n/256>>0)%256),this._ch.writeUInt8(n%256),this._ch.writeBytes(t);else throw(0,Ie.newError)("UTF-8 strings of size "+n+" are not supported")},e.prototype.packListHeader=function(r){if(r<16)this._ch.writeUInt8(g1|r);else if(r<256)this._ch.writeUInt8(k1),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(M1),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(D1),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Ie.newError)("Lists of size "+r+" are not supported")},e.prototype.packBytes=function(r){if(this._byteArraysSupported){this.packBytesHeader(r.length);for(var t=0;t<r.length;t++)this._ch.writeInt8(r[t])}else throw(0,Ie.newError)("Byte arrays are not supported by the database this driver is connected to")},e.prototype.packBytesHeader=function(r){if(r<256)this._ch.writeUInt8(L1),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(U1),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(F1),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Ie.newError)("Byte arrays of size "+r+" are not supported")},e.prototype.packMapHeader=function(r){if(r<16)this._ch.writeUInt8(w1|r);else if(r<256)this._ch.writeUInt8(x1),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(B1),this._ch.writeUInt8(r/256>>0),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(V1),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Ie.newError)("Maps of size "+r+" are not supported")},e.prototype.packStructHeader=function(r,t){if(r<16)this._ch.writeUInt8(O1|r),this._ch.writeUInt8(t);else if(r<256)this._ch.writeUInt8(W1),this._ch.writeUInt8(r),this._ch.writeUInt8(t);else if(r<65536)this._ch.writeUInt8(z1),this._ch.writeUInt8(r/256>>0),this._ch.writeUInt8(r%256);else throw(0,Ie.newError)("Structures of size "+r+" are not supported")},e.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},e.prototype._nonPackableValue=function(r){return function(){throw(0,Ie.newError)(r,eV)}},e}();qn.Packer=tV;var rV=function(){function e(r,t){r===void 0&&(r=!1),t===void 0&&(t=!1),this._disableLosslessIntegers=r,this._useBigInt=t}return e.prototype.unpack=function(r,t){t===void 0&&(t=y1.functional.identity);var n=r.readUInt8(),o=n&240,i=n&15;if(n===E1)return null;var a=this._unpackBoolean(n);if(a!==null)return a;var s=this._unpackNumberOrInteger(n,r);if(s!==null){if((0,Ie.isInt)(s)){if(this._useBigInt)return s.toBigInt();if(this._disableLosslessIntegers)return s.toNumberOrInfinity()}return s}var c=this._unpackString(n,o,i,r);if(c!==null)return c;var u=this._unpackList(n,o,i,r,t);if(u!==null)return u;var l=this._unpackByteArray(n,r);if(l!==null)return l;var d=this._unpackMap(n,o,i,r,t);if(d!==null)return d;var h=this._unpackStruct(n,o,i,r,t);if(h!==null)return h;throw(0,Ie.newError)("Unknown packed value with marker "+n.toString(16))},e.prototype.unpackInteger=function(r){var t=r.readUInt8(),n=this._unpackInteger(t,r);if(n==null)throw(0,Ie.newError)("Unable to unpack integer value with marker "+t.toString(16));return n},e.prototype._unpackBoolean=function(r){return r===T1?!0:r===P1?!1:null},e.prototype._unpackNumberOrInteger=function(r,t){return r===S1?t.readFloat64():this._unpackInteger(r,t)},e.prototype._unpackInteger=function(r,t){if(r>=0&&r<128)return(0,Ie.int)(r);if(r>=240&&r<256)return(0,Ie.int)(r-256);if(r===C1)return(0,Ie.int)(t.readInt8());if(r===A1)return(0,Ie.int)(t.readInt16());if(r===I1){var n=t.readInt32();return(0,Ie.int)(n)}else if(r===R1){var o=t.readInt32(),i=t.readInt32();return new Ie.Integer(i,o)}else return null},e.prototype._unpackString=function(r,t,n,o){return t===m1?ua.utf8.decode(o,n):r===j1?ua.utf8.decode(o,o.readUInt8()):r===$1?ua.utf8.decode(o,o.readUInt16()):r===N1?ua.utf8.decode(o,o.readUInt32()):null},e.prototype._unpackList=function(r,t,n,o,i){return t===g1?this._unpackListWithSize(n,o,i):r===k1?this._unpackListWithSize(o.readUInt8(),o,i):r===M1?this._unpackListWithSize(o.readUInt16(),o,i):r===D1?this._unpackListWithSize(o.readUInt32(),o,i):null},e.prototype._unpackListWithSize=function(r,t,n){for(var o=[],i=0;i<r;i++)o.push(this.unpack(t,n));return o},e.prototype._unpackByteArray=function(r,t){return r===L1?this._unpackByteArrayWithSize(t.readUInt8(),t):r===U1?this._unpackByteArrayWithSize(t.readUInt16(),t):r===F1?this._unpackByteArrayWithSize(t.readUInt32(),t):null},e.prototype._unpackByteArrayWithSize=function(r,t){for(var n=new Int8Array(r),o=0;o<r;o++)n[o]=t.readInt8();return n},e.prototype._unpackMap=function(r,t,n,o,i){return t===w1?this._unpackMapWithSize(n,o,i):r===x1?this._unpackMapWithSize(o.readUInt8(),o,i):r===B1?this._unpackMapWithSize(o.readUInt16(),o,i):r===V1?this._unpackMapWithSize(o.readUInt32(),o,i):null},e.prototype._unpackMapWithSize=function(r,t,n){for(var o={},i=0;i<r;i++){var a=this.unpack(t,n);o[a]=this.unpack(t,n)}return o},e.prototype._unpackStruct=function(r,t,n,o,i){return t===O1?this._unpackStructWithSize(n,o,i):r===W1?this._unpackStructWithSize(o.readUInt8(),o,i):r===z1?this._unpackStructWithSize(o.readUInt16(),o,i):null},e.prototype._unpackStructWithSize=function(r,t,n){for(var o=t.readUInt8(),i=new b1.Structure(o,[]),a=0;a<r;a++)i.fields.push(this.unpack(t,n));return n(i)},e}();qn.Unpacker=rV;function nV(e){return e==null?!1:typeof e[Symbol.iterator]=="function"}var Fo={},q1=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),oV=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),iV=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),aV=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&oV(r,e,t);return iV(r,e),r};Object.defineProperty(Fo,"__esModule",{value:!0});Fo.Unpacker=Fo.Packer=void 0;var H1=aV(qn),uV=function(e){q1(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},r}(H1.Packer);Fo.Packer=uV;var sV=function(e){q1(r,e);function r(t,n){return t===void 0&&(t=!1),n===void 0&&(n=!1),e.call(this,t,n)||this}return r}(H1.Unpacker);Fo.Unpacker=sV;var cV=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),lV=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),$_=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&cV(r,e,t);return lV(r,e),r};Object.defineProperty(et,"__esModule",{value:!0});et.structure=et.v2=et.v1=void 0;var fV=$_(qn);et.v1=fV;var G1=$_(Fo);et.v2=G1;var dV=$_(Kr);et.structure=dV;et.default=G1;var ze={};Object.defineProperty(ze,"__esModule",{value:!0});ze.SIGNATURES=void 0;var Ee=G,K1=Ee.internal.constants,hV=K1.ACCESS_MODE_READ,cc=K1.FETCH_ALL,Zm=Ee.internal.util.assertString,Y1=1,Z1=15,jc=16,Q1=63,mo=1,X1=2,uv=17,J1=18,eE=19,tE=84,sv=102,rE=106,nE=107,oE=47,iE=63,pV="r",sa=-1,vV=Object.freeze({INIT:Y1,RESET:Z1,RUN:jc,PULL_ALL:Q1,HELLO:mo,GOODBYE:X1,BEGIN:uv,COMMIT:J1,ROLLBACK:eE,TELEMETRY:tE,ROUTE:sv,LOGON:rE,LOGOFF:nE,DISCARD:oE,PULL:iE});ze.SIGNATURES=vV;var Si=function(){function e(r,t,n){this.signature=r,this.fields=t,this.toString=n}return e.init=function(r,t){return new e(Y1,[r,t],function(){return"INIT ".concat(r," {...}")})},e.run=function(r,t){return new e(jc,[r,t],function(){return"RUN ".concat(r," ").concat(Ee.json.stringify(t))})},e.pullAll=function(){return _V},e.reset=function(){return yV},e.hello=function(r,t,n,o){n===void 0&&(n=null),o===void 0&&(o=null);var i=Object.assign({user_agent:r},t);return n&&(i.routing=n),o&&(i.patch_bolt=o),new e(mo,[i],function(){return"HELLO {user_agent: '".concat(r,"', ...}")})},e.hello5x1=function(r,t){t===void 0&&(t=null);var n={user_agent:r};return t&&(n.routing=t),new e(mo,[n],function(){return"HELLO {user_agent: '".concat(r,"', ...}")})},e.hello5x2=function(r,t,n){t===void 0&&(t=null),n===void 0&&(n=null);var o={user_agent:r};return cv(o,t),n&&(o.routing=n),new e(mo,[o],function(){return"HELLO ".concat(Ee.json.stringify(o))})},e.hello5x3=function(r,t,n,o){n===void 0&&(n=null),o===void 0&&(o=null);var i={};return r&&(i.user_agent=r),t&&(i.bolt_agent={product:t.product,platform:t.platform,language:t.language,language_details:t.languageDetails}),cv(i,n),o&&(i.routing=o),new e(mo,[i],function(){return"HELLO ".concat(Ee.json.stringify(i))})},e.hello5x5=function(r,t,n,o){n===void 0&&(n=null),o===void 0&&(o=null);var i={};return r&&(i.user_agent=r),t&&(i.bolt_agent={product:t.product,platform:t.platform,language:t.language,language_details:t.languageDetails}),lp(i,n),o&&(i.routing=o),new e(mo,[i],function(){return"HELLO ".concat(Ee.json.stringify(i))})},e.logon=function(r){return new e(rE,[r],function(){return"LOGON { ... }"})},e.logoff=function(){return new e(nE,[],function(){return"LOGOFF"})},e.begin=function(r){var t=r===void 0?{}:r,n=t.bookmarks,o=t.txConfig,i=t.database,a=t.mode,s=t.impersonatedUser,c=t.notificationFilter,u=lc(n,o,i,a,s,c);return new e(uv,[u],function(){return"BEGIN ".concat(Ee.json.stringify(u))})},e.begin5x5=function(r){var t=r===void 0?{}:r,n=t.bookmarks,o=t.txConfig,i=t.database,a=t.mode,s=t.impersonatedUser,c=t.notificationFilter,u=lc(n,o,i,a,s,c,{appendNotificationFilter:lp});return new e(uv,[u],function(){return"BEGIN ".concat(Ee.json.stringify(u))})},e.commit=function(){return bV},e.rollback=function(){return mV},e.runWithMetadata=function(r,t,n){var o=n===void 0?{}:n,i=o.bookmarks,a=o.txConfig,s=o.database,c=o.mode,u=o.impersonatedUser,l=o.notificationFilter,d=lc(i,a,s,c,u,l);return new e(jc,[r,t,d],function(){return"RUN ".concat(r," ").concat(Ee.json.stringify(t)," ").concat(Ee.json.stringify(d))})},e.runWithMetadata5x5=function(r,t,n){var o=n===void 0?{}:n,i=o.bookmarks,a=o.txConfig,s=o.database,c=o.mode,u=o.impersonatedUser,l=o.notificationFilter,d=lc(i,a,s,c,u,l,{appendNotificationFilter:lp});return new e(jc,[r,t,d],function(){return"RUN ".concat(r," ").concat(Ee.json.stringify(t)," ").concat(Ee.json.stringify(d))})},e.goodbye=function(){return gV},e.pull=function(r){var t=r===void 0?{}:r,n=t.stmtId,o=n===void 0?sa:n,i=t.n,a=i===void 0?cc:i,s=Qm(o??sa,a||cc);return new e(iE,[s],function(){return"PULL ".concat(Ee.json.stringify(s))})},e.discard=function(r){var t=r===void 0?{}:r,n=t.stmtId,o=n===void 0?sa:n,i=t.n,a=i===void 0?cc:i,s=Qm(o??sa,a||cc);return new e(oE,[s],function(){return"DISCARD ".concat(Ee.json.stringify(s))})},e.telemetry=function(r){var t=r.api,n=(0,Ee.int)(t);return new e(tE,[n],function(){return"TELEMETRY ".concat(n.toString())})},e.route=function(r,t,n){return r===void 0&&(r={}),t===void 0&&(t=[]),n===void 0&&(n=null),new e(sv,[r,t,n],function(){return"ROUTE ".concat(Ee.json.stringify(r)," ").concat(Ee.json.stringify(t)," ").concat(n)})},e.routeV4x4=function(r,t,n){r===void 0&&(r={}),t===void 0&&(t=[]),n===void 0&&(n={});var o={};return n.databaseName&&(o.db=n.databaseName),n.impersonatedUser&&(o.imp_user=n.impersonatedUser),new e(sv,[r,t,o],function(){return"ROUTE ".concat(Ee.json.stringify(r)," ").concat(Ee.json.stringify(t)," ").concat(Ee.json.stringify(o))})},e}();ze.default=Si;function lc(e,r,t,n,o,i,a){var s;a===void 0&&(a={});var c={};e.isEmpty()||(c.bookmarks=e.values()),r.timeout!==null&&(c.tx_timeout=r.timeout),r.metadata&&(c.tx_metadata=r.metadata),t&&(c.db=Zm(t,"database")),o&&(c.imp_user=Zm(o,"impersonatedUser")),n===hV&&(c.mode=pV);var u=(s=a.appendNotificationFilter)!==null&&s!==void 0?s:cv;return u(c,i),c}function Qm(e,r){var t={n:(0,Ee.int)(r)};return e!==sa&&(t.qid=(0,Ee.int)(e)),t}function cv(e,r){r&&(r.minimumSeverityLevel&&(e.notifications_minimum_severity=r.minimumSeverityLevel),r.disabledCategories&&(e.notifications_disabled_categories=r.disabledCategories),r.disabledClassifications&&(e.notifications_disabled_categories=r.disabledClassifications))}function lp(e,r){r&&(r.minimumSeverityLevel&&(e.notifications_minimum_severity=r.minimumSeverityLevel),r.disabledCategories&&(e.notifications_disabled_classifications=r.disabledCategories),r.disabledClassifications&&(e.notifications_disabled_classifications=r.disabledClassifications))}var _V=new Si(Q1,[],function(){return"PULL_ALL"}),yV=new Si(Z1,[],function(){return"RESET"}),bV=new Si(J1,[],function(){return"COMMIT"}),mV=new Si(eE,[],function(){return"ROLLBACK"}),gV=new Si(X1,[],function(){return"GOODBYE"}),Cf={},Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.TypeTransformer=void 0;var wV=et,OV=G,EV=OV.internal.objectUtil,SV=function(){function e(r){this._transformers=r,this._transformersPerSignature=new Map(r.map(function(t){return[t.signature,t]})),this.fromStructure=this.fromStructure.bind(this),this.toStructure=this.toStructure.bind(this),Object.freeze(this)}return e.prototype.fromStructure=function(r){try{if(r instanceof wV.structure.Structure&&this._transformersPerSignature.has(r.signature)){var t=this._transformersPerSignature.get(r.signature).fromStructure;return t(r)}return r}catch(n){return EV.createBrokenObject(n)}},e.prototype.toStructure=function(r){var t=this._transformers.find(function(n){var o=n.isTypeInstance;return o(r)});return t!==void 0?t.toStructure(r):r},e}();Oe.default=SV;var PV=function(){function e(r){var t=r.signature,n=r.fromStructure,o=r.toStructure,i=r.isTypeInstance;this.signature=t,this.isTypeInstance=i,this.fromStructure=n,this.toStructure=o,Object.freeze(this)}return e.prototype.extendsWith=function(r){var t=r.signature,n=r.fromStructure,o=r.toStructure,i=r.isTypeInstance;return new e({signature:t||this.signature,fromStructure:n||this.fromStructure,toStructure:o||this.toStructure,isTypeInstance:i||this.isTypeInstance})},e}();Oe.TypeTransformer=PV;var Af=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(Cf,"__esModule",{value:!0});var Fe=G,If=et,Rf=Oe,jf=Fe.error.PROTOCOL_ERROR,TV=78,CV=3,AV=82,IV=5,RV=114,jV=3,$V=80,NV=3;function kV(){return new Rf.TypeTransformer({signature:TV,isTypeInstance:function(e){return e instanceof Fe.Node},toStructure:function(e){throw(0,Fe.newError)("It is not allowed to pass nodes in query parameters, given: ".concat(e),jf)},fromStructure:function(e){If.structure.verifyStructSize("Node",CV,e.size);var r=Af(e.fields,3),t=r[0],n=r[1],o=r[2];return new Fe.Node(t,n,o)}})}function MV(){return new Rf.TypeTransformer({signature:AV,isTypeInstance:function(e){return e instanceof Fe.Relationship},toStructure:function(e){throw(0,Fe.newError)("It is not allowed to pass relationships in query parameters, given: ".concat(e),jf)},fromStructure:function(e){If.structure.verifyStructSize("Relationship",IV,e.size);var r=Af(e.fields,5),t=r[0],n=r[1],o=r[2],i=r[3],a=r[4];return new Fe.Relationship(t,n,o,i,a)}})}function DV(){return new Rf.TypeTransformer({signature:RV,isTypeInstance:function(e){return e instanceof Fe.UnboundRelationship},toStructure:function(e){throw(0,Fe.newError)("It is not allowed to pass unbound relationships in query parameters, given: ".concat(e),jf)},fromStructure:function(e){If.structure.verifyStructSize("UnboundRelationship",jV,e.size);var r=Af(e.fields,3),t=r[0],n=r[1],o=r[2];return new Fe.UnboundRelationship(t,n,o)}})}function LV(){return new Rf.TypeTransformer({signature:$V,isTypeInstance:function(e){return e instanceof Fe.Path},toStructure:function(e){throw(0,Fe.newError)("It is not allowed to pass paths in query parameters, given: ".concat(e),jf)},fromStructure:function(e){If.structure.verifyStructSize("Path",NV,e.size);for(var r=Af(e.fields,3),t=r[0],n=r[1],o=r[2],i=[],a=t[0],s=0;s<o.length;s+=2){var c=t[o[s+1]],u=(0,Fe.toNumber)(o[s]),l=void 0;u>0?(l=n[u-1],l instanceof Fe.UnboundRelationship&&(n[u-1]=l=l.bindTo(a,c))):(l=n[-u-1],l instanceof Fe.UnboundRelationship&&(n[-u-1]=l=l.bindTo(c,a))),i.push(new Fe.PathSegment(a,l,c)),a=c}return new Fe.Path(t[0],t[t.length-1],i)}})}Cf.default={createNodeTransformer:kV,createRelationshipTransformer:MV,createUnboundRelationshipTransformer:DV,createPathTransformer:LV};var wo=f&&f.__assign||function(){return wo=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},wo.apply(this,arguments)},UV=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),FV=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),xV=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&UV(r,e,t);return FV(r,e),r},aE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Of,"__esModule",{value:!0});var Qi=Ve,fp=et,wn=xV(ze),bo=ie,xo=G,BV=aE(Cf),VV=aE(Oe),Xm=xo.internal.bookmarks.Bookmarks,uE=xo.internal.constants,Jm=uE.ACCESS_MODE_WRITE,WV=uE.BOLT_PROTOCOL_V1;xo.internal.logger.Logger;var eg=xo.internal.txConfig.TxConfig,zV=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),qV=function(){function e(r,t,n,o,i,a){var s=n===void 0?{}:n,c=s.disableLosslessIntegers,u=s.useBigInt;o===void 0&&(o=function(){return null}),this._server=r||{},this._chunker=t,this._packer=this._createPacker(t),this._unpacker=this._createUnpacker(c,u),this._responseHandler=o(this),this._log=i,this._onProtocolError=a,this._fatalError=null,this._lastMessageSignature=null,this._config={disableLosslessIntegers:c,useBigInt:u}}return Object.defineProperty(e.prototype,"transformer",{get:function(){var r=this;return this._transformer===void 0&&(this._transformer=new VV.default(Object.values(BV.default).map(function(t){return t(r._config,r._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return WV},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportsReAuth",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initialized",{get:function(){return!!this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authToken",{get:function(){return this._authToken},enumerable:!1,configurable:!0}),e.prototype.packer=function(){return this._packer},e.prototype.packable=function(r){return this._packer.packable(r,this.transformer.toStructure)},e.prototype.unpacker=function(){return this._unpacker},e.prototype.unpack=function(r){return this._unpacker.unpack(r,this.transformer.fromStructure)},e.prototype.transformMetadata=function(r){return r},e.prototype.enrichErrorMetadata=function(r){return wo(wo({},r),{diagnostic_record:r.diagnostic_record!==null?wo(wo({},zV),r.diagnostic_record):null})},e.prototype.initialize=function(r){var t=this,n=r===void 0?{}:r,o=n.userAgent;n.boltAgent;var i=n.authToken,a=n.notificationFilter,s=n.onError,c=n.onComplete,u=new bo.LoginObserver({onError:function(l){return t._onLoginError(l,s)},onCompleted:function(l){return t._onLoginCompleted(l,c)}});return(0,Qi.assertNotificationFilterIsEmpty)(a,this._onProtocolError,u),this.write(wn.default.init(o,i),u,!0),u},e.prototype.logoff=function(r){var t=r===void 0?{}:r,n=t.onComplete,o=t.onError;t.flush;var i=new bo.LogoffObserver({onCompleted:n,onError:o}),a=(0,xo.newError)("Driver is connected to a database that does not support logoff. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(a.message),i.onError(a),a},e.prototype.logon=function(r){var t=this,n=r===void 0?{}:r,o=n.authToken,i=n.onComplete,a=n.onError;n.flush;var s=new bo.LoginObserver({onCompleted:function(){return t._onLoginCompleted({},o,i)},onError:function(u){return t._onLoginError(u,a)}}),c=(0,xo.newError)("Driver is connected to a database that does not support logon. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(c.message),s.onError(c),c},e.prototype.prepareToClose=function(){},e.prototype.beginTransaction=function(r){var t=r===void 0?{}:r,n=t.bookmarks,o=t.txConfig,i=t.database,a=t.mode,s=t.impersonatedUser,c=t.notificationFilter,u=t.beforeError,l=t.afterError,d=t.beforeComplete,h=t.afterComplete;return this.run("BEGIN",n?n.asBeginTransactionParameters():{},{bookmarks:n,txConfig:o,database:i,mode:a,impersonatedUser:s,notificationFilter:c,beforeError:u,afterError:l,beforeComplete:d,afterComplete:h,flush:!1})},e.prototype.commitTransaction=function(r){var t=r===void 0?{}:r,n=t.beforeError,o=t.afterError,i=t.beforeComplete,a=t.afterComplete;return this.run("COMMIT",{},{bookmarks:Xm.empty(),txConfig:eg.empty(),mode:Jm,beforeError:n,afterError:o,beforeComplete:i,afterComplete:a})},e.prototype.rollbackTransaction=function(r){var t=r===void 0?{}:r,n=t.beforeError,o=t.afterError,i=t.beforeComplete,a=t.afterComplete;return this.run("ROLLBACK",{},{bookmarks:Xm.empty(),txConfig:eg.empty(),mode:Jm,beforeError:n,afterError:o,beforeComplete:i,afterComplete:a})},e.prototype.run=function(r,t,n){var o=n===void 0?{}:n;o.bookmarks;var i=o.txConfig,a=o.database;o.mode;var s=o.impersonatedUser,c=o.notificationFilter,u=o.beforeKeys,l=o.afterKeys,d=o.beforeError,h=o.afterError,p=o.beforeComplete,v=o.afterComplete,_=o.flush,b=_===void 0?!0:_,w=o.highRecordWatermark,E=w===void 0?Number.MAX_VALUE:w,S=o.lowRecordWatermark,O=S===void 0?Number.MAX_VALUE:S,A=new bo.ResultStreamObserver({server:this._server,beforeKeys:u,afterKeys:l,beforeError:d,afterError:h,beforeComplete:p,afterComplete:v,highRecordWatermark:E,lowRecordWatermark:O});return(0,Qi.assertTxConfigIsEmpty)(i,this._onProtocolError,A),(0,Qi.assertDatabaseIsEmpty)(a,this._onProtocolError,A),(0,Qi.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,A),(0,Qi.assertNotificationFilterIsEmpty)(c,this._onProtocolError,A),this.write(wn.default.run(r,t),A,!1),this.write(wn.default.pullAll(),A,b),A},Object.defineProperty(e.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),e.prototype.reset=function(r){var t=r===void 0?{}:r,n=t.onError,o=t.onComplete,i=new bo.ResetObserver({onProtocolError:this._onProtocolError,onError:n,onComplete:o});return this.write(wn.default.reset(),i,!0),i},e.prototype.telemetry=function(r,t){r.api;var n=t===void 0?{}:t;n.onError;var o=n.onCompleted,i=new bo.CompletedObserver;return o&&o(),i},e.prototype._createPacker=function(r){return new fp.v1.Packer(r)},e.prototype._createUnpacker=function(r,t){return new fp.v1.Unpacker(r,t)},e.prototype.write=function(r,t,n){var o=this.queueObserverIfProtocolIsNotBroken(t);if(o){this._log.isDebugEnabled()&&this._log.debug("C: ".concat(r)),this._lastMessageSignature=r.signature;var i=new fp.structure.Structure(r.signature,r.fields);this.packable(i)(),this._chunker.messageBoundary(),n&&this._chunker.flush()}},e.prototype.isLastMessageLogon=function(){return this._lastMessageSignature===wn.SIGNATURES.HELLO||this._lastMessageSignature===wn.SIGNATURES.LOGON},e.prototype.isLastMessageReset=function(){return this._lastMessageSignature===wn.SIGNATURES.RESET},e.prototype.notifyFatalError=function(r){return this._fatalError=r,this._responseHandler._notifyErrorToObservers(r)},e.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},e.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},e.prototype.queueObserverIfProtocolIsNotBroken=function(r){return this.isBroken()?(this.notifyFatalErrorToObserver(r),!1):this._responseHandler._queueObserver(r)},e.prototype.isBroken=function(){return!!this._fatalError},e.prototype.notifyFatalErrorToObserver=function(r){r&&r.onError&&r.onError(this._fatalError)},e.prototype.resetFailure=function(){this._responseHandler._resetFailure()},e.prototype._onLoginCompleted=function(r,t,n){if(this._initialized=!0,this._authToken=t,r){var o=r.server;this._server.version||(this._server.version=o)}n&&n(r)},e.prototype._onLoginError=function(r,t){this._onProtocolError(r.message),t&&t(r)},e}();Of.default=qV;var $f={},Nf={},yr={};Object.defineProperty(yr,"__esModule",{value:!0});yr.epochSecondAndNanoToLocalDateTime=yr.nanoOfDayToLocalTime=yr.epochDayToDate=void 0;var kn=G,dn=kn.internal.temporalUtil,HV=dn.DAYS_0000_TO_1970,dp=dn.DAYS_PER_400_YEAR_CYCLE,tg=dn.NANOS_PER_HOUR,rg=dn.NANOS_PER_MINUTE,lv=dn.NANOS_PER_SECOND,ng=dn.SECONDS_PER_DAY,GV=dn.floorDiv,KV=dn.floorMod;function sE(e){e=(0,kn.int)(e);var r=e.add(HV).subtract(60),t=(0,kn.int)(0);if(r.lessThan(0)){var n=r.add(1).div(dp).subtract(1);t=n.multiply(400),r=r.add(n.multiply(-dp))}var o=r.multiply(400).add(591).div(dp),i=r.subtract(o.multiply(365).add(o.div(4)).subtract(o.div(100)).add(o.div(400)));i.lessThan(0)&&(o=o.subtract(1),i=r.subtract(o.multiply(365).add(o.div(4)).subtract(o.div(100)).add(o.div(400)))),o=o.add(t);var a=i,s=a.multiply(5).add(2).div(153),c=s.add(2).modulo(12).add(1),u=a.subtract(s.multiply(306).add(5).div(10)).add(1);return o=o.add(s.div(10)),new kn.Date(o,c,u)}yr.epochDayToDate=sE;function cE(e){e=(0,kn.int)(e);var r=e.div(tg);e=e.subtract(r.multiply(tg));var t=e.div(rg);e=e.subtract(t.multiply(rg));var n=e.div(lv),o=e.subtract(n.multiply(lv));return new kn.LocalTime(r,t,n,o)}yr.nanoOfDayToLocalTime=cE;function YV(e,r){var t=GV(e,ng),n=KV(e,ng),o=n.multiply(lv).add(r),i=sE(t),a=cE(o);return new kn.LocalDateTime(i.year,i.month,i.day,a.hour,a.minute,a.second,a.nanosecond)}yr.epochSecondAndNanoToLocalDateTime=YV;var zc=f&&f.__assign||function(){return zc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},zc.apply(this,arguments)},Sr=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},ZV=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nf,"__esModule",{value:!0});var ye=G,Le=et,Pr=Oe,Pi=yr,QV=ZV(Cf),N_=ye.internal.temporalUtil,XV=N_.dateToEpochDay,k_=N_.localDateTimeToEpochSecond,lE=N_.localTimeToNanoOfDay,og=88,JV=3,ig=89,eW=4,ag=69,tW=4,ug=116,rW=1,sg=84,nW=2,cg=68,oW=1,lg=100,iW=2,fg=70,aW=3,dg=102,uW=3;function sW(){return new Pr.TypeTransformer({signature:og,isTypeInstance:function(e){return(0,ye.isPoint)(e)&&(e.z===null||e.z===void 0)},toStructure:function(e){return new Le.structure.Structure(og,[(0,ye.int)(e.srid),e.x,e.y])},fromStructure:function(e){Le.structure.verifyStructSize("Point2D",JV,e.size);var r=Sr(e.fields,3),t=r[0],n=r[1],o=r[2];return new ye.Point(t,n,o,void 0)}})}function cW(){return new Pr.TypeTransformer({signature:ig,isTypeInstance:function(e){return(0,ye.isPoint)(e)&&e.z!==null&&e.z!==void 0},toStructure:function(e){return new Le.structure.Structure(ig,[(0,ye.int)(e.srid),e.x,e.y,e.z])},fromStructure:function(e){Le.structure.verifyStructSize("Point3D",eW,e.size);var r=Sr(e.fields,4),t=r[0],n=r[1],o=r[2],i=r[3];return new ye.Point(t,n,o,i)}})}function lW(){return new Pr.TypeTransformer({signature:ag,isTypeInstance:ye.isDuration,toStructure:function(e){var r=(0,ye.int)(e.months),t=(0,ye.int)(e.days),n=(0,ye.int)(e.seconds),o=(0,ye.int)(e.nanoseconds);return new Le.structure.Structure(ag,[r,t,n,o])},fromStructure:function(e){Le.structure.verifyStructSize("Duration",tW,e.size);var r=Sr(e.fields,4),t=r[0],n=r[1],o=r[2],i=r[3];return new ye.Duration(t,n,o,i)}})}function fW(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Pr.TypeTransformer({signature:ug,isTypeInstance:ye.isLocalTime,toStructure:function(n){var o=lE(n.hour,n.minute,n.second,n.nanosecond);return new Le.structure.Structure(ug,[o])},fromStructure:function(n){Le.structure.verifyStructSize("LocalTime",rW,n.size);var o=Sr(n.fields,1),i=o[0],a=(0,Pi.nanoOfDayToLocalTime)(i);return Ti(a,r,t)}})}function dW(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Pr.TypeTransformer({signature:sg,isTypeInstance:ye.isTime,toStructure:function(n){var o=lE(n.hour,n.minute,n.second,n.nanosecond),i=(0,ye.int)(n.timeZoneOffsetSeconds);return new Le.structure.Structure(sg,[o,i])},fromStructure:function(n){Le.structure.verifyStructSize("Time",nW,n.size);var o=Sr(n.fields,2),i=o[0],a=o[1],s=(0,Pi.nanoOfDayToLocalTime)(i),c=new ye.Time(s.hour,s.minute,s.second,s.nanosecond,a);return Ti(c,r,t)}})}function hW(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Pr.TypeTransformer({signature:cg,isTypeInstance:ye.isDate,toStructure:function(n){var o=XV(n.year,n.month,n.day);return new Le.structure.Structure(cg,[o])},fromStructure:function(n){Le.structure.verifyStructSize("Date",oW,n.size);var o=Sr(n.fields,1),i=o[0],a=(0,Pi.epochDayToDate)(i);return Ti(a,r,t)}})}function pW(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Pr.TypeTransformer({signature:lg,isTypeInstance:ye.isLocalDateTime,toStructure:function(n){var o=k_(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),i=(0,ye.int)(n.nanosecond);return new Le.structure.Structure(lg,[o,i])},fromStructure:function(n){Le.structure.verifyStructSize("LocalDateTime",iW,n.size);var o=Sr(n.fields,2),i=o[0],a=o[1],s=(0,Pi.epochSecondAndNanoToLocalDateTime)(i,a);return Ti(s,r,t)}})}function vW(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Pr.TypeTransformer({signature:dg,isTypeInstance:function(n){return(0,ye.isDateTime)(n)&&n.timeZoneId!=null},toStructure:function(n){var o=k_(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),i=(0,ye.int)(n.nanosecond),a=n.timeZoneId;return new Le.structure.Structure(dg,[o,i,a])},fromStructure:function(n){Le.structure.verifyStructSize("DateTimeWithZoneId",uW,n.size);var o=Sr(n.fields,3),i=o[0],a=o[1],s=o[2],c=(0,Pi.epochSecondAndNanoToLocalDateTime)(i,a),u=new ye.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,c.nanosecond,null,s);return Ti(u,r,t)}})}function _W(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Pr.TypeTransformer({signature:fg,isTypeInstance:function(n){return(0,ye.isDateTime)(n)&&n.timeZoneId==null},toStructure:function(n){var o=k_(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),i=(0,ye.int)(n.nanosecond),a=(0,ye.int)(n.timeZoneOffsetSeconds);return new Le.structure.Structure(fg,[o,i,a])},fromStructure:function(n){Le.structure.verifyStructSize("DateTimeWithZoneOffset",aW,n.size);var o=Sr(n.fields,3),i=o[0],a=o[1],s=o[2],c=(0,Pi.epochSecondAndNanoToLocalDateTime)(i,a),u=new ye.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,c.nanosecond,s,null);return Ti(u,r,t)}})}function Ti(e,r,t){if(!r&&!t)return e;var n=function(s){return t?s.toBigInt():s.toNumberOrInfinity()},o=Object.create(Object.getPrototypeOf(e));for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)===!0){var a=e[i];o[i]=(0,ye.isInt)(a)?n(a):a}return Object.freeze(o),o}Nf.default=zc(zc({},QV.default),{createPoint2DTransformer:sW,createPoint3DTransformer:cW,createDurationTransformer:lW,createLocalTimeTransformer:fW,createTimeTransformer:dW,createDateTransformer:hW,createLocalDateTimeTransformer:pW,createDateTimeWithZoneIdTransformer:vW,createDateTimeWithOffsetTransformer:_W});var yW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),kf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($f,"__esModule",{value:!0});var bW=kf(Of),hg=kf(et),mW=G,gW=kf(Nf),wW=kf(Oe),OW=mW.internal.constants.BOLT_PROTOCOL_V2,EW=function(e){yW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype._createPacker=function(t){return new hg.default.Packer(t)},r.prototype._createUnpacker=function(t,n){return new hg.default.Unpacker(t,n)},Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new wW.default(Object.values(gW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return OW},enumerable:!1,configurable:!0}),r}(bW.default);$f.default=EW;var Mf={},Df={},fv=f&&f.__assign||function(){return fv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},fv.apply(this,arguments)},SW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Df,"__esModule",{value:!0});var PW=SW(Nf);Df.default=fv({},PW.default);var TW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),qc=f&&f.__assign||function(){return qc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},qc.apply(this,arguments)},Lf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mf,"__esModule",{value:!0});var CW=Lf($f),On=Lf(ze),En=Ve,An=ie,AW=Lf(Df),IW=Lf(Oe),M_=G;M_.internal.bookmarks.Bookmarks;var RW=M_.internal.constants.BOLT_PROTOCOL_V3,jW=M_.internal.txConfig.TxConfig,fE="context",$W="CALL dbms.cluster.routing.getRoutingTable($".concat(fE,")"),NW=new An.StreamObserver,kW=function(e){TW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return RW},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new IW.default(Object.values(AW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.transformMetadata=function(t){return"t_first"in t&&(t.result_available_after=t.t_first,delete t.t_first),"t_last"in t&&(t.result_consumed_after=t.t_last,delete t.t_last),t},r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new An.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return n._onLoginCompleted(d,a,u)}});return(0,En.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(On.default.hello(i,a),l,!0),l},r.prototype.prepareToClose=function(){this.write(On.default.goodbye(),NW,!0)},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.impersonatedUser,c=n.notificationFilter,u=n.mode,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new An.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),(0,En.assertDatabaseIsEmpty)(a,this._onProtocolError,v),(0,En.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,v),(0,En.assertNotificationFilterIsEmpty)(c,this._onProtocolError,v),this.write(On.default.begin({bookmarks:o,txConfig:i,mode:u}),v,!0),v},r.prototype.commitTransaction=function(t){var n=t===void 0?{}:t,o=n.beforeError,i=n.afterError,a=n.beforeComplete,s=n.afterComplete,c=new An.ResultStreamObserver({server:this._server,beforeError:o,afterError:i,beforeComplete:a,afterComplete:s});return c.prepareToHandleSingleResponse(),this.write(On.default.commit(),c,!0),c},r.prototype.rollbackTransaction=function(t){var n=t===void 0?{}:t,o=n.beforeError,i=n.afterError,a=n.beforeComplete,s=n.afterComplete,c=new An.ResultStreamObserver({server:this._server,beforeError:o,afterError:i,beforeComplete:a,afterComplete:s});return c.prepareToHandleSingleResponse(),this.write(On.default.rollback(),c,!0),c},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.impersonatedUser,l=i.notificationFilter,d=i.mode,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,_=i.afterError,b=i.beforeComplete,w=i.afterComplete,E=i.flush,S=E===void 0?!0:E,O=i.highRecordWatermark,A=O===void 0?Number.MAX_VALUE:O,$=i.lowRecordWatermark,I=$===void 0?Number.MAX_VALUE:$,L=new An.ResultStreamObserver({server:this._server,beforeKeys:h,afterKeys:p,beforeError:v,afterError:_,beforeComplete:b,afterComplete:w,highRecordWatermark:A,lowRecordWatermark:I});return(0,En.assertDatabaseIsEmpty)(c,this._onProtocolError,L),(0,En.assertImpersonatedUserIsEmpty)(u,this._onProtocolError,L),(0,En.assertNotificationFilterIsEmpty)(l,this._onProtocolError,L),this.write(On.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,mode:d}),L,!1),this.write(On.default.pullAll(),L,S),L},r.prototype.requestRoutingInformation=function(t){var n,o=t.routingContext,i=o===void 0?{}:o,a=t.sessionContext,s=a===void 0?{}:a,c=t.onError,u=t.onCompleted,l=this.run($W,(n={},n[fE]=i,n),qc(qc({},s),{txConfig:jW.empty()}));return new An.ProcedureRouteObserver({resultObserver:l,onProtocolError:this._onProtocolError,onError:c,onCompleted:u})},r}(CW.default);Mf.default=kW;var Uf={},Ff={},dv=f&&f.__assign||function(){return dv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},dv.apply(this,arguments)},MW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ff,"__esModule",{value:!0});var DW=MW(Df);Ff.default=dv({},DW.default);var LW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Hc=f&&f.__assign||function(){return Hc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Hc.apply(this,arguments)},xf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Uf,"__esModule",{value:!0});var UW=xf(Mf),Xi=xf(ze),fc=Ve,hp=ie,FW=xf(Ff),xW=xf(Oe),D_=G;D_.internal.bookmarks.Bookmarks;var dE=D_.internal.constants,BW=dE.BOLT_PROTOCOL_V4_0,VW=dE.FETCH_ALL,WW=D_.internal.txConfig.TxConfig,hE="context",pE="database",zW="CALL dbms.routing.getRoutingTable($".concat(hE,", $").concat(pE,")"),qW=function(e){LW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return BW},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new xW.default(Object.values(FW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.impersonatedUser,c=n.notificationFilter,u=n.mode,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new hp.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),(0,fc.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,v),(0,fc.assertNotificationFilterIsEmpty)(c,this._onProtocolError,v),this.write(Xi.default.begin({bookmarks:o,txConfig:i,database:a,mode:u}),v,!0),v},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.impersonatedUser,l=i.notificationFilter,d=i.mode,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,_=i.afterError,b=i.beforeComplete,w=i.afterComplete,E=i.flush,S=E===void 0?!0:E,O=i.reactive,A=O===void 0?!1:O,$=i.fetchSize,I=$===void 0?VW:$,L=i.highRecordWatermark,X=L===void 0?Number.MAX_VALUE:L,ae=i.lowRecordWatermark,_e=ae===void 0?Number.MAX_VALUE:ae,ne=new hp.ResultStreamObserver({server:this._server,reactive:A,fetchSize:I,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:_,beforeComplete:b,afterComplete:w,highRecordWatermark:X,lowRecordWatermark:_e});(0,fc.assertImpersonatedUserIsEmpty)(u,this._onProtocolError,ne),(0,fc.assertNotificationFilterIsEmpty)(l,this._onProtocolError,ne);var ve=A;return this.write(Xi.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,database:c,mode:d}),ne,ve&&S),A||this.write(Xi.default.pull({n:I}),ne,S),ne},r.prototype._requestMore=function(t,n,o){this.write(Xi.default.pull({stmtId:t,n}),o,!0)},r.prototype._requestDiscard=function(t,n){this.write(Xi.default.discard({stmtId:t}),n,!0)},r.prototype._noOp=function(){},r.prototype.requestRoutingInformation=function(t){var n,o=t.routingContext,i=o===void 0?{}:o,a=t.databaseName,s=a===void 0?null:a,c=t.sessionContext,u=c===void 0?{}:c,l=t.onError,d=t.onCompleted,h=this.run(zW,(n={},n[hE]=i,n[pE]=s,n),Hc(Hc({},u),{txConfig:WW.empty()}));return new hp.ProcedureRouteObserver({resultObserver:h,onProtocolError:this._onProtocolError,onError:l,onCompleted:d})},r}(UW.default);Uf.default=qW;var Bf={},Vf={},hv=f&&f.__assign||function(){return hv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},hv.apply(this,arguments)},HW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vf,"__esModule",{value:!0});var GW=HW(Ff);Vf.default=hv({},GW.default);var KW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bf,"__esModule",{value:!0});var YW=Wf(Uf),ZW=Wf(ze),QW=ie,XW=G,JW=Ve,ez=Wf(Vf),tz=Wf(Oe),rz=XW.internal.constants.BOLT_PROTOCOL_V4_1,nz=function(e){KW(r,e);function r(t,n,o,i,a,s,c){i===void 0&&(i=function(){return null});var u=e.call(this,t,n,o,i,a,s)||this;return u._serversideRouting=c,u}return Object.defineProperty(r.prototype,"version",{get:function(){return rz},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new tz.default(Object.values(ez.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new QW.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return n._onLoginCompleted(d,a,u)}});return(0,JW.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(ZW.default.hello(i,a,this._serversideRouting),l,!0),l},r}(YW.default);Bf.default=nz;var zf={},qf={},pv=f&&f.__assign||function(){return pv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},pv.apply(this,arguments)},oz=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qf,"__esModule",{value:!0});var iz=oz(Vf);qf.default=pv({},iz.default);var az=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),L_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zf,"__esModule",{value:!0});var uz=L_(Bf),sz=G,cz=L_(qf),lz=L_(Oe),fz=sz.internal.constants.BOLT_PROTOCOL_V4_2,dz=function(e){az(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return fz},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new lz.default(Object.values(cz.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r}(uz.default);zf.default=dz;var xs={},Hf={},vv=f&&f.__assign||function(){return vv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},vv.apply(this,arguments)},hz=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hf,"__esModule",{value:!0});var pz=hz(qf);Hf.default=vv({},pz.default);var Bs={},Vs={},_v=f&&f.__assign||function(){return _v=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_v.apply(this,arguments)},vz=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vs,"__esModule",{value:!0});var _z=vz(Hf);Vs.default=_v({},_z.default);var vE=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},yz=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bs,"__esModule",{value:!0});var Gc=et,pt=G,_E=yz(Vs),bz=yr,mz=zn,Ca=pt.internal.temporalUtil.localDateTimeToEpochSecond,pg=73,gz=3,vg=105,wz=3;function Oz(e,r){var t=e.disableLosslessIntegers,n=e.useBigInt,o=_E.default.createDateTimeWithZoneIdTransformer(e);return o.extendsWith({signature:vg,fromStructure:function(i){Gc.structure.verifyStructSize("DateTimeWithZoneId",wz,i.size);var a=vE(i.fields,3),s=a[0],c=a[1],u=a[2],l=yv(u,s,c),d=new pt.DateTime(l.year,l.month,l.day,l.hour,l.minute,l.second,(0,pt.int)(c),l.timeZoneOffsetSeconds,u);return yE(d,t,n)},toStructure:function(i){var a=Ca(i.year,i.month,i.day,i.hour,i.minute,i.second,i.nanosecond),s=i.timeZoneOffsetSeconds!=null?i.timeZoneOffsetSeconds:Ez(i.timeZoneId,a,i.nanosecond);i.timeZoneOffsetSeconds==null&&r.warn('DateTime objects without "timeZoneOffsetSeconds" property are prune to bugs related to ambiguous times. For instance, 2022-10-30T2:30:00[Europe/Berlin] could be GMT+1 or GMT+2.');var c=a.subtract(s),u=(0,pt.int)(i.nanosecond),l=i.timeZoneId;return new Gc.structure.Structure(vg,[c,u,l])}})}function Ez(e,r,t){var n=yv(e,r,t),o=Ca(n.year,n.month,n.day,n.hour,n.minute,n.second,t),i=o.subtract(r),a=r.subtract(i),s=yv(e,a,t),c=Ca(s.year,s.month,s.day,s.hour,s.minute,s.second,t),u=c.subtract(a);return u}var pp=new Map;function Sz(e){if(!pp.has(e)){var r=new Intl.DateTimeFormat("en-US",{timeZone:e,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"});pp.set(e,r)}return pp.get(e)}function yv(e,r,t){var n=Sz(e),o=(0,pt.int)(r).multiply(1e3).add((0,pt.int)(t).div(1e6)).toNumber(),i=n.formatToParts(o),a=i.reduce(function(c,u){return u.type==="era"?c.adjustEra=u.value.toUpperCase()==="B"?function(l){return l.subtract(1).negate()}:mz.identity:u.type==="hour"?c.hour=(0,pt.int)(u.value).modulo(24):u.type!=="literal"&&(c[u.type]=(0,pt.int)(u.value)),c},{});a.year=a.adjustEra(a.year);var s=Ca(a.year,a.month,a.day,a.hour,a.minute,a.second,a.nanosecond);return a.timeZoneOffsetSeconds=s.subtract(r),a.hour=a.hour.modulo(24),a}function Pz(e){var r=e.disableLosslessIntegers,t=e.useBigInt,n=_E.default.createDateTimeWithOffsetTransformer(e);return n.extendsWith({signature:pg,toStructure:function(o){var i=Ca(o.year,o.month,o.day,o.hour,o.minute,o.second,o.nanosecond),a=(0,pt.int)(o.nanosecond),s=(0,pt.int)(o.timeZoneOffsetSeconds),c=i.subtract(s);return new Gc.structure.Structure(pg,[c,a,s])},fromStructure:function(o){Gc.structure.verifyStructSize("DateTimeWithZoneOffset",gz,o.size);var i=vE(o.fields,3),a=i[0],s=i[1],c=i[2],u=(0,pt.int)(a).add(c),l=(0,bz.epochSecondAndNanoToLocalDateTime)(u,s),d=new pt.DateTime(l.year,l.month,l.day,l.hour,l.minute,l.second,l.nanosecond,c,null);return yE(d,r,t)}})}function yE(e,r,t){if(!r&&!t)return e;var n=function(s){return t?s.toBigInt():s.toNumberOrInfinity()},o=Object.create(Object.getPrototypeOf(e));for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)===!0){var a=e[i];o[i]=(0,pt.isInt)(a)?n(a):a}return Object.freeze(o),o}Bs.default={createDateTimeWithZoneIdTransformer:Oz,createDateTimeWithOffsetTransformer:Pz};var Tz=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Kc=f&&f.__assign||function(){return Kc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Kc.apply(this,arguments)},Ws=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xs,"__esModule",{value:!0});var Cz=Ws(zf),_g=Ws(ze),yg=ie,Az=Ve,bg=Ws(Hf),Iz=Ws(Bs),mg=Ws(Oe),bE=G,Rz=bE.internal.bookmarks.Bookmarks,jz=bE.internal.constants.BOLT_PROTOCOL_V4_3,$z=function(e){Tz(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return jz},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new mg.default(Object.values(bg.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.requestRoutingInformation=function(t){var n=t.routingContext,o=n===void 0?{}:n,i=t.databaseName,a=i===void 0?null:i,s=t.sessionContext,c=s===void 0?{}:s,u=t.onError,l=t.onCompleted,d=new yg.RouteObserver({onProtocolError:this._onProtocolError,onError:u,onCompleted:l}),h=c.bookmarks||Rz.empty();return this.write(_g.default.route(o,h.values(),a),d,!0),d},r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new yg.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return d.patch_bolt!==void 0&&n._applyPatches(d.patch_bolt),n._onLoginCompleted(d,a,u)}});return(0,Az.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(_g.default.hello(i,a,this._serversideRouting,["utc"]),l,!0),l},r.prototype._applyPatches=function(t){t.includes("utc")&&this._applyUtcPatch()},r.prototype._applyUtcPatch=function(){var t=this;this._transformer=new mg.default(Object.values(Kc(Kc({},bg.default),Iz.default)).map(function(n){return n(t._config,t._log)}))},r}(Cz.default);xs.default=$z;var Gf={},Nz=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yc=f&&f.__assign||function(){return Yc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Yc.apply(this,arguments)},zs=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gf,"__esModule",{value:!0});var kz=zs(xs),mE=G,dc=zs(ze),vp=ie,gg=Ve,wg=zs(Vs),Mz=zs(Bs),Og=zs(Oe),gE=mE.internal.constants,Dz=gE.BOLT_PROTOCOL_V4_4,Lz=gE.FETCH_ALL,Uz=mE.internal.bookmarks.Bookmarks,Fz=function(e){Nz(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return Dz},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Og.default(Object.values(wg.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.requestRoutingInformation=function(t){var n=t.routingContext,o=n===void 0?{}:n,i=t.databaseName,a=i===void 0?null:i,s=t.impersonatedUser,c=s===void 0?null:s,u=t.sessionContext,l=u===void 0?{}:u,d=t.onError,h=t.onCompleted,p=new vp.RouteObserver({onProtocolError:this._onProtocolError,onError:d,onCompleted:h}),v=l.bookmarks||Uz.empty();return this.write(dc.default.routeV4x4(o,v.values(),{databaseName:a,impersonatedUser:c}),p,!0),p},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,_=i.afterError,b=i.beforeComplete,w=i.afterComplete,E=i.flush,S=E===void 0?!0:E,O=i.reactive,A=O===void 0?!1:O,$=i.fetchSize,I=$===void 0?Lz:$,L=i.highRecordWatermark,X=L===void 0?Number.MAX_VALUE:L,ae=i.lowRecordWatermark,_e=ae===void 0?Number.MAX_VALUE:ae,ne=new vp.ResultStreamObserver({server:this._server,reactive:A,fetchSize:I,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:_,beforeComplete:b,afterComplete:w,highRecordWatermark:X,lowRecordWatermark:_e});(0,gg.assertNotificationFilterIsEmpty)(d,this._onProtocolError,ne);var ve=A;return this.write(dc.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l}),ne,ve&&S),A||this.write(dc.default.pull({n:I}),ne,S),ne},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.mode,c=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new vp.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),(0,gg.assertNotificationFilterIsEmpty)(u,this._onProtocolError,v),this.write(dc.default.begin({bookmarks:o,txConfig:i,database:a,mode:s,impersonatedUser:c}),v,!0),v},r.prototype._applyUtcPatch=function(){var t=this;this._transformer=new Og.default(Object.values(Yc(Yc({},wg.default),Mz.default)).map(function(n){return n(t._config,t._log)}))},r}(kz.default);Gf.default=Fz;var Kf={},Yf={},ya=f&&f.__assign||function(){return ya=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ya.apply(this,arguments)},U_=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},wE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yf,"__esModule",{value:!0});var F_=et,x_=G,Zf=wE(Vs),xz=wE(Bs),Bz=4,Vz=8,Wz=4;function zz(e){var r=Zf.default.createNodeTransformer(e);return r.extendsWith({fromStructure:function(t){F_.structure.verifyStructSize("Node",Bz,t.size);var n=U_(t.fields,4),o=n[0],i=n[1],a=n[2],s=n[3];return new x_.Node(o,i,a,s)}})}function qz(e){var r=Zf.default.createRelationshipTransformer(e);return r.extendsWith({fromStructure:function(t){F_.structure.verifyStructSize("Relationship",Vz,t.size);var n=U_(t.fields,8),o=n[0],i=n[1],a=n[2],s=n[3],c=n[4],u=n[5],l=n[6],d=n[7];return new x_.Relationship(o,i,a,s,c,u,l,d)}})}function Hz(e){var r=Zf.default.createUnboundRelationshipTransformer(e);return r.extendsWith({fromStructure:function(t){F_.structure.verifyStructSize("UnboundRelationship",Wz,t.size);var n=U_(t.fields,4),o=n[0],i=n[1],a=n[2],s=n[3];return new x_.UnboundRelationship(o,i,a,s)}})}Yf.default=ya(ya(ya({},Zf.default),xz.default),{createNodeTransformer:zz,createRelationshipTransformer:qz,createUnboundRelationshipTransformer:Hz});var Gz=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kf,"__esModule",{value:!0});var Kz=Qf(Gf),Yz=Ve,Zz=Qf(Yf),Qz=Qf(Oe),Xz=Qf(ze),Jz=ie,e7=G,t7=e7.internal.constants.BOLT_PROTOCOL_V5_0,r7=function(e){Gz(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return t7},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Qz.default(Object.values(Zz.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new Jz.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return n._onLoginCompleted(d,a,u)}});return(0,Yz.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(Xz.default.hello(i,a,this._serversideRouting),l,!0),l},r}(Kz.default);Kf.default=r7;var Xf={},Jf={},bv=f&&f.__assign||function(){return bv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},bv.apply(this,arguments)},n7=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jf,"__esModule",{value:!0});var o7=n7(Yf);Jf.default=bv({},o7.default);var i7=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Zc=f&&f.__assign||function(){return Zc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Zc.apply(this,arguments)},ed=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xf,"__esModule",{value:!0});var a7=ed(Kf),u7=Ve,s7=ed(Jf),c7=ed(Oe),_p=ed(ze),yp=ie,l7=G,f7=l7.internal.constants.BOLT_PROTOCOL_V5_1,d7=function(e){i7(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return f7},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new c7.default(Object.values(s7.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l={},d=new yp.LoginObserver({onError:function(h){return n._onLoginError(h,c)},onCompleted:function(h){return l.metadata=h,n._onLoginCompleted(h)}});return(0,u7.assertNotificationFilterIsEmpty)(s,this._onProtocolError,d),this.write(_p.default.hello5x1(i,this._serversideRouting),d,!1),this.logon({authToken:a,onComplete:function(h){return u(Zc(Zc({},h),l.metadata))},onError:c,flush:!0})},r.prototype.logon=function(t){var n=this,o=t===void 0?{}:t,i=o.authToken,a=o.onComplete,s=o.onError,c=o.flush,u=new yp.LoginObserver({onCompleted:function(){return n._onLoginCompleted(null,i,a)},onError:function(l){return n._onLoginError(l,s)}});return this.write(_p.default.logon(i),u,c),u},r.prototype.logoff=function(t){var n=t===void 0?{}:t,o=n.onComplete,i=n.onError,a=n.flush,s=new yp.LogoffObserver({onCompleted:o,onError:i});return this.write(_p.default.logoff(),s,a),s},r}(a7.default);Xf.default=d7;var td={},rd={},mv=f&&f.__assign||function(){return mv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},mv.apply(this,arguments)},h7=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rd,"__esModule",{value:!0});var p7=h7(Jf);rd.default=mv({},p7.default);var v7=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qc=f&&f.__assign||function(){return Qc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Qc.apply(this,arguments)},nd=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(td,"__esModule",{value:!0});var _7=nd(Xf),y7=nd(rd),b7=nd(Oe),hc=nd(ze),bp=ie,m7=G,OE=m7.internal.constants,g7=OE.BOLT_PROTOCOL_V5_2,w7=OE.FETCH_ALL,O7=function(e){v7(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return g7},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new b7.default(Object.values(y7.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l={},d=new bp.LoginObserver({onError:function(h){return n._onLoginError(h,c)},onCompleted:function(h){return l.metadata=h,n._onLoginCompleted(h)}});return this.write(hc.default.hello5x2(i,s,this._serversideRouting),d,!1),this.logon({authToken:a,onComplete:function(h){return u(Qc(Qc({},h),l.metadata))},onError:c,flush:!0})},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.mode,c=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new bp.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),this.write(hc.default.begin({bookmarks:o,txConfig:i,database:a,mode:s,impersonatedUser:c,notificationFilter:u}),v,!0),v},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,_=i.afterError,b=i.beforeComplete,w=i.afterComplete,E=i.flush,S=E===void 0?!0:E,O=i.reactive,A=O===void 0?!1:O,$=i.fetchSize,I=$===void 0?w7:$,L=i.highRecordWatermark,X=L===void 0?Number.MAX_VALUE:L,ae=i.lowRecordWatermark,_e=ae===void 0?Number.MAX_VALUE:ae,ne=new bp.ResultStreamObserver({server:this._server,reactive:A,fetchSize:I,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:_,beforeComplete:b,afterComplete:w,highRecordWatermark:X,lowRecordWatermark:_e}),ve=A;return this.write(hc.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l,notificationFilter:d}),ne,ve&&S),A||this.write(hc.default.pull({n:I}),ne,S),ne},r}(_7.default);td.default=O7;var od={},id={},gv=f&&f.__assign||function(){return gv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},gv.apply(this,arguments)},E7=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(id,"__esModule",{value:!0});var S7=E7(rd);id.default=gv({},S7.default);var P7=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xc=f&&f.__assign||function(){return Xc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Xc.apply(this,arguments)},ad=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(od,"__esModule",{value:!0});var T7=ad(td),C7=ad(id),A7=ad(Oe),I7=ad(ze),R7=ie,j7=G,$7=j7.internal.constants.BOLT_PROTOCOL_V5_3,N7=function(e){P7(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return $7},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new A7.default(Object.values(C7.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent,a=o.boltAgent,s=o.authToken,c=o.notificationFilter,u=o.onError,l=o.onComplete,d={},h=new R7.LoginObserver({onError:function(p){return n._onLoginError(p,u)},onCompleted:function(p){return d.metadata=p,n._onLoginCompleted(p)}});return this.write(I7.default.hello5x3(i,a,c,this._serversideRouting),h,!1),this.logon({authToken:s,onComplete:function(p){return l(Xc(Xc({},p),d.metadata))},onError:u,flush:!0})},r}(T7.default);od.default=N7;var ud={},sd={},wv=f&&f.__assign||function(){return wv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},wv.apply(this,arguments)},k7=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sd,"__esModule",{value:!0});var M7=k7(id);sd.default=wv({},M7.default);var D7=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),cd=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ud,"__esModule",{value:!0});var L7=cd(od),U7=cd(sd),F7=cd(ze),x7=ie,B7=cd(Oe),V7=G,W7=V7.internal.constants.BOLT_PROTOCOL_V5_4,z7=function(e){D7(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return W7},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new B7.default(Object.values(U7.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.telemetry=function(t,n){var o=t.api,i=n===void 0?{}:n,a=i.onError,s=i.onCompleted,c=new x7.TelemetryObserver({onCompleted:s,onError:a});return this.write(F7.default.telemetry({api:o}),c,!1),c},r}(L7.default);ud.default=z7;var ld={},fd={},Ov=f&&f.__assign||function(){return Ov=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ov.apply(this,arguments)},q7=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fd,"__esModule",{value:!0});var H7=q7(sd);fd.default=Ov({},H7.default);var G7=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),kr=f&&f.__assign||function(){return kr=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},kr.apply(this,arguments)},dd=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ld,"__esModule",{value:!0});var K7=dd(ud),Y7=dd(fd),Z7=dd(Oe),pc=dd(ze),mp=ie,Q7=G,EE=Q7.internal.constants,X7=EE.BOLT_PROTOCOL_V5_5,J7=EE.FETCH_ALL,eq=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),tq=function(e){G7(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return X7},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Z7.default(Object.values(Y7.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent,a=o.boltAgent,s=o.authToken,c=o.notificationFilter,u=o.onError,l=o.onComplete,d={},h=new mp.LoginObserver({onError:function(p){return n._onLoginError(p,u)},onCompleted:function(p){return d.metadata=p,n._onLoginCompleted(p)}});return this.write(pc.default.hello5x5(i,a,c,this._serversideRouting),h,!1),this.logon({authToken:s,onComplete:function(p){return l(kr(kr({},p),d.metadata))},onError:u,flush:!0})},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.mode,c=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new mp.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),this.write(pc.default.begin5x5({bookmarks:o,txConfig:i,database:a,mode:s,impersonatedUser:c,notificationFilter:u}),v,!0),v},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,_=i.afterError,b=i.beforeComplete,w=i.afterComplete,E=i.flush,S=E===void 0?!0:E,O=i.reactive,A=O===void 0?!1:O,$=i.fetchSize,I=$===void 0?J7:$,L=i.highRecordWatermark,X=L===void 0?Number.MAX_VALUE:L,ae=i.lowRecordWatermark,_e=ae===void 0?Number.MAX_VALUE:ae,ne=new mp.ResultStreamObserver({server:this._server,reactive:A,fetchSize:I,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:_,beforeComplete:b,afterComplete:w,highRecordWatermark:X,lowRecordWatermark:_e,enrichMetadata:this._enrichMetadata}),ve=A;return this.write(pc.default.runWithMetadata5x5(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l,notificationFilter:d}),ne,ve&&S),A||this.write(pc.default.pull({n:I}),ne,S),ne},r.prototype._enrichMetadata=function(t){return Array.isArray(t.statuses)&&(t.statuses=t.statuses.map(function(n){return kr(kr({},n),{description:n.neo4j_code!=null?n.status_description:n.description,diagnostic_record:n.diagnostic_record!==null?kr(kr({},eq),n.diagnostic_record):null})})),t},r}(K7.default);ld.default=tq;var hd={},pd={},Ev=f&&f.__assign||function(){return Ev=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ev.apply(this,arguments)},rq=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pd,"__esModule",{value:!0});var nq=rq(fd);pd.default=Ev({},nq.default);var oq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Oo=f&&f.__assign||function(){return Oo=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Oo.apply(this,arguments)},B_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hd,"__esModule",{value:!0});var iq=B_(ld),aq=B_(pd),uq=B_(Oe),sq=G,cq=sq.internal.constants.BOLT_PROTOCOL_V5_6,lq=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),fq=function(e){oq(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return cq},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new uq.default(Object.values(aq.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype._enrichMetadata=function(t){return Array.isArray(t.statuses)&&(t.statuses=t.statuses.map(function(n){return Oo(Oo({},n),{diagnostic_record:n.diagnostic_record!==null?Oo(Oo({},lq),n.diagnostic_record):null})})),t},r}(iq.default);hd.default=fq;var vd={},_d={},Sv=f&&f.__assign||function(){return Sv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Sv.apply(this,arguments)},dq=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_d,"__esModule",{value:!0});var hq=dq(pd);_d.default=Sv({},hq.default);var pq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Eo=f&&f.__assign||function(){return Eo=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Eo.apply(this,arguments)},V_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vd,"__esModule",{value:!0});var vq=V_(hd),_q=V_(_d),yq=V_(Oe),bq=G,mq=bq.internal.constants.BOLT_PROTOCOL_V5_7,gq=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),wq=function(e){pq(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return mq},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new yq.default(Object.values(_q.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.enrichErrorMetadata=function(t){return Eo(Eo({},t),{cause:t.cause!==null&&t.cause!==void 0?this.enrichErrorMetadata(t.cause):null,code:t.neo4j_code,diagnostic_record:t.diagnostic_record!==null?Eo(Eo({},gq),t.diagnostic_record):null})},r}(vq.default);vd.default=wq;var W_={},z_={},Pv=f&&f.__assign||function(){return Pv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Pv.apply(this,arguments)},Oq=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(z_,"__esModule",{value:!0});var Eq=Oq(_d);z_.default=Pv({},Eq.default);var Sq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),yd=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(W_,"__esModule",{value:!0});var Pq=yd(vd),Tq=yd(z_),Cq=yd(Oe),Eg=yd(ze),Aq=ie,Iq=G,SE=Iq.internal.constants,Rq=SE.BOLT_PROTOCOL_V5_8,jq=SE.FETCH_ALL,$q=function(e){Sq(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return Rq},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Cq.default(Object.values(Tq.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,_=i.afterError,b=i.beforeComplete,w=i.afterComplete,E=i.flush,S=E===void 0?!0:E,O=i.reactive,A=O===void 0?!1:O,$=i.fetchSize,I=$===void 0?jq:$,L=i.highRecordWatermark,X=L===void 0?Number.MAX_VALUE:L,ae=i.lowRecordWatermark,_e=ae===void 0?Number.MAX_VALUE:ae,ne=i.onDb,ve=new Aq.ResultStreamObserver({server:this._server,reactive:A,fetchSize:I,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:_,beforeComplete:b,afterComplete:w,highRecordWatermark:X,lowRecordWatermark:_e,enrichMetadata:this._enrichMetadata,onDb:ne}),it=A;return this.write(Eg.default.runWithMetadata5x5(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l,notificationFilter:d}),ve,it&&S),A||this.write(Eg.default.pull({n:I}),ve,S),ve},r}(Pq.default);W_.default=$q;var q_={};Object.defineProperty(q_,"__esModule",{value:!0});var Ir=G,Nq=112,kq=113,Mq=126,Dq=127;function lr(){}function gp(e){return e}var Lq={onNext:lr,onCompleted:lr,onError:lr},Uq=function(){function e(r){var t=r===void 0?{}:r,n=t.transformMetadata,o=t.enrichErrorMetadata,i=t.log,a=t.observer;this._pendingObservers=[],this._log=i,this._transformMetadata=n||gp,this._enrichErrorMetadata=o||gp,this._observer=Object.assign({onObserversCountChange:lr,onError:lr,onFailure:lr,onErrorApplyTransformation:gp},a)}return Object.defineProperty(e.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),e.prototype.handleResponse=function(r){var t=r.fields[0];switch(r.signature){case kq:this._log.isDebugEnabled()&&this._log.debug("S: RECORD ".concat(Ir.json.stringify(r))),this._currentObserver.onNext(t);break;case Nq:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS ".concat(Ir.json.stringify(r)));try{var n=this._transformMetadata(t);this._currentObserver.onCompleted(n)}finally{this._updateCurrentObserver()}break;case Dq:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE ".concat(Ir.json.stringify(r)));try{this._currentFailure=this._handleErrorPayload(this._enrichErrorMetadata(t)),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case Mq:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED ".concat(Ir.json.stringify(r)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,Ir.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,Ir.newError)("Unknown Bolt protocol message: "+r))}},e.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onObserversCountChange(this._observersCount)},Object.defineProperty(e.prototype,"_observersCount",{get:function(){return this._currentObserver==null?this._pendingObservers.length:this._pendingObservers.length+1},enumerable:!1,configurable:!0}),e.prototype._queueObserver=function(r){return r=r||Lq,r.onCompleted=r.onCompleted||lr,r.onError=r.onError||lr,r.onNext=r.onNext||lr,this._currentObserver===void 0?this._currentObserver=r:this._pendingObservers.push(r),this._observer.onObserversCountChange(this._observersCount),!0},e.prototype._notifyErrorToObservers=function(r){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(r);this._pendingObservers.length>0;){var t=this._pendingObservers.shift();t&&t.onError&&t.onError(r)}},e.prototype.hasOngoingObservableRequests=function(){return this._currentObserver!=null||this._pendingObservers.length>0},e.prototype._resetFailure=function(){this._currentFailure=null},e.prototype._handleErrorPayload=function(r){var t=Fq(r.code),n=r.cause!=null?this._handleErrorCause(r.cause):void 0,o=(0,Ir.newError)(r.message,t,n,r.gql_status,r.description,r.diagnostic_record);return this._observer.onErrorApplyTransformation(o)},e.prototype._handleErrorCause=function(r){var t=r.cause!=null?this._handleErrorCause(r.cause):void 0,n=(0,Ir.newGQLError)(r.message,t,r.gql_status,r.description,r.diagnostic_record);return this._observer.onErrorApplyTransformation(n)},e}();q_.default=Uq;function Fq(e){return e==="Neo.TransientError.Transaction.Terminated"?"Neo.ClientError.Transaction.Terminated":e==="Neo.TransientError.Transaction.LockClientStopped"?"Neo.ClientError.Transaction.LockClientStopped":e}var Ue=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(R_,"__esModule",{value:!0});var xq=G,Bq=Ue(Of),Vq=Ue($f),Wq=Ue(Mf),zq=Ue(Uf),qq=Ue(Bf),Hq=Ue(zf),Gq=Ue(xs),Kq=Ue(Gf),Yq=Ue(Kf),Zq=Ue(Xf),Qq=Ue(td),Xq=Ue(od),Jq=Ue(ud),eH=Ue(ld),tH=Ue(hd),rH=Ue(vd),nH=Ue(W_),oH=Ue(q_);function iH(e){var r=e===void 0?{}:e,t=r.version,n=r.chunker,o=r.dechunker,i=r.channel,a=r.disableLosslessIntegers,s=r.useBigInt,c=r.serversideRouting,u=r.server,l=r.log,d=r.observer,h=function(p){var v=new oH.default({transformMetadata:p.transformMetadata.bind(p),enrichErrorMetadata:p.enrichErrorMetadata.bind(p),log:l,observer:d});return i.onerror=d.onError.bind(d),i.onmessage=function(_){return o.write(_)},o.onmessage=function(_){try{v.handleResponse(p.unpack(_))}catch(b){return d.onError(b)}},v};return aH(t,u,n,{disableLosslessIntegers:a,useBigInt:s},c,h,d.onProtocolError.bind(d),l)}R_.default=iH;function aH(e,r,t,n,o,i,a,s){switch(e){case 1:return new Bq.default(r,t,n,i,s,a);case 2:return new Vq.default(r,t,n,i,s,a);case 3:return new Wq.default(r,t,n,i,s,a);case 4:return new zq.default(r,t,n,i,s,a);case 4.1:return new qq.default(r,t,n,i,s,a,o);case 4.2:return new Hq.default(r,t,n,i,s,a,o);case 4.3:return new Gq.default(r,t,n,i,s,a,o);case 4.4:return new Kq.default(r,t,n,i,s,a,o);case 5:return new Yq.default(r,t,n,i,s,a,o);case 5.1:return new Zq.default(r,t,n,i,s,a,o);case 5.2:return new Qq.default(r,t,n,i,s,a,o);case 5.3:return new Xq.default(r,t,n,i,s,a,o);case 5.4:return new Jq.default(r,t,n,i,s,a,o);case 5.5:return new eH.default(r,t,n,i,s,a,o);case 5.6:return new tH.default(r,t,n,i,s,a,o);case 5.7:return new rH.default(r,t,n,i,s,a,o);case 5.8:return new nH.default(r,t,n,i,s,a,o);default:throw(0,xq.newError)("Unknown Bolt protocol version: "+e)}}(function(e){var r=f&&f.__createBinding||(Object.create?function(c,u,l,d){d===void 0&&(d=l);var h=Object.getOwnPropertyDescriptor(u,l);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(c,d,h)}:function(c,u,l,d){d===void 0&&(d=l),c[d]=u[l]}),t=f&&f.__exportStar||function(c,u){for(var l in c)l!=="default"&&!Object.prototype.hasOwnProperty.call(u,l)&&r(u,c,l)},n=f&&f.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.RawRoutingTable=e.BoltProtocol=void 0;var o=n(O_),i=n(R_),a=n(xs),s=n(Ef);t(ie,e),e.BoltProtocol=a.default,e.RawRoutingTable=s.default,e.default={handshake:o.default,create:i.default}})(w_);var PE={},bd={},uH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(bd,"__esModule",{value:!0});var sH=G,cH=function(e){uH(r,e);function r(t){var n=e.call(this)||this;return n._connection=t,n}return r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t;n.accessMode,n.database,n.bookmarks;var o=this._connection;return this._connection=null,Promise.resolve(o)},r}(sH.ConnectionProvider);bd.default=cH;var qs={},md={},Hs={},lH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Hs,"__esModule",{value:!0});var fH=G,dH=function(e){lH(r,e);function r(t){var n=e.call(this)||this;return n._errorHandler=t,n}return Object.defineProperty(r.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"authToken",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(r.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.connect=function(t,n,o,i){throw new Error("not implemented")},r.prototype.write=function(t,n,o){throw new Error("not implemented")},r.prototype.close=function(){throw new Error("not implemented")},r.prototype.handleAndTransformError=function(t,n){return this._errorHandler?this._errorHandler.handleAndTransformError(t,n,this):t},r}(fH.Connection);Hs.default=dH;var Gs={},hH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Sg=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Pg=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},TE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.createChannelConnection=void 0;var vc=no,So=G,pH=TE(Hs),Tg=TE(w_),vH=So.error.PROTOCOL_ERROR,_H=So.internal.logger.Logger,yH=0;function bH(e,r,t,n,o,i,a,s){i===void 0&&(i=null),s===void 0&&(s=function(l){return new vc.Channel(l)});var c=new vc.ChannelConfig(e,r,t.errorCode(),o),u=s(c);return Tg.default.handshake(u,n).then(function(l){var d=l.protocolVersion,h=l.consumeRemainingBuffer,p=new vc.Chunker(u),v=new vc.Dechunker,_=function(w){return Tg.default.create({version:d,channel:u,chunker:p,dechunker:v,disableLosslessIntegers:r.disableLosslessIntegers,useBigInt:r.useBigInt,serversideRouting:i,server:w.server,log:w.logger,observer:{onObserversCountChange:w._handleOngoingRequestsNumberChange.bind(w),onError:w._handleFatalError.bind(w),onFailure:w._resetOnFailure.bind(w),onProtocolError:w._handleProtocolError.bind(w),onErrorApplyTransformation:function(E){return w.handleAndTransformError(E,w._address)}}})},b=new CE(u,t,e,n,r.disableLosslessIntegers,i,p,r.notificationFilter,_,r.telemetryDisabled,a);return h(function(w){return v.write(w)}),b}).catch(function(l){return u.close().then(function(){throw l})})}Gs.createChannelConnection=bH;var CE=function(e){hH(r,e);function r(t,n,o,i,a,s,c,u,l,d,h){a===void 0&&(a=!1),s===void 0&&(s=null),h===void 0&&(h=function(v){});var p=e.call(this,n)||this;return p._authToken=null,p._idle=!1,p._reseting=!1,p._resetObservers=[],p._id=yH++,p._address=o,p._server={address:o.asHostPort()},p._creationTimestamp=Date.now(),p._disableLosslessIntegers=a,p._ch=t,p._chunker=c,p._log=mH(p,i),p._serversideRouting=s,p._notificationFilter=u,p._telemetryDisabledDriverConfig=d===!0,p._telemetryDisabledConnection=!0,p._ssrCallback=h,p._dbConnectionId=null,p._protocol=l(p),p._isBroken=!1,p._log.isDebugEnabled()&&p._log.debug("created towards ".concat(o)),p}return r.prototype.beginTransaction=function(t){return this._sendTelemetryIfEnabled(t),this._protocol.beginTransaction(t)},r.prototype.run=function(t,n,o){return this._sendTelemetryIfEnabled(o),this._protocol.run(t,n,o)},r.prototype._sendTelemetryIfEnabled=function(t){this._telemetryDisabledConnection||this._telemetryDisabledDriverConfig||t==null||t.apiTelemetryConfig==null||this._protocol.telemetry({api:t.apiTelemetryConfig.api},{onCompleted:t.apiTelemetryConfig.onTelemetrySuccess,onError:t.beforeError})},r.prototype.commitTransaction=function(t){return this._protocol.commitTransaction(t)},r.prototype.rollbackTransaction=function(t){return this._protocol.rollbackTransaction(t)},r.prototype.getProtocolVersion=function(){return this._protocol.version},Object.defineProperty(r.prototype,"authToken",{get:function(){return this._authToken},set:function(t){this._authToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return this._protocol.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(t){this._dbConnectionId=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){return this._idleTimestamp},set:function(t){this._idleTimestamp=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){return this._creationTimestamp},enumerable:!1,configurable:!0}),r.prototype.connect=function(t,n,o,i){return Sg(this,void 0,void 0,function(){var a=this;return Pg(this,function(s){switch(s.label){case 0:if(this._protocol.initialized&&!this._protocol.supportsReAuth)throw(0,So.newError)("Connection does not support re-auth");return this._authToken=o,this._protocol.initialized?[3,2]:[4,this._initialize(t,n,o)];case 1:return[2,s.sent()];case 2:return i?[4,new Promise(function(c,u){a._protocol.logoff({onError:u}),a._protocol.logon({authToken:o,onError:u,onComplete:function(){return c(a)},flush:!0})})]:[3,4];case 3:return[2,s.sent()];case 4:return this._protocol.logoff(),this._protocol.logon({authToken:o,flush:!0}),[2,this]}})})},r.prototype._initialize=function(t,n,o){var i=this,a=this;return new Promise(function(s,c){i._protocol.initialize({userAgent:t,boltAgent:n,authToken:o,notificationFilter:i._notificationFilter,onError:function(u){return c(u)},onComplete:function(u){var l;if(u){var d=u.server;(!i.version||d)&&(i.version=d);var h=u.connection_id;if(i.databaseId||(i.databaseId=h),u.hints){var p=u.hints["connection.recv_timeout_seconds"];if(p!=null){var v=(0,So.toNumber)(p);Number.isInteger(v)&&v>0?i._ch.setupReceiveTimeout(v*1e3):i._log.info("Server located at ".concat(i._address," supplied an invalid connection receive timeout value (").concat(v,"). ")+"Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}var _=u.hints["telemetry.enabled"];_===!0&&(i._telemetryDisabledConnection=!1),i.SSREnabledHint=u.hints["ssr.enabled"]}i._ssrCallback((l=i.SSREnabledHint)!==null&&l!==void 0?l:!1,"OPEN")}s(a)}})})},r.prototype.protocol=function(){return this._protocol},Object.defineProperty(r.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return this._server.version},set:function(t){this._server.version=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),r.prototype._handleFatalError=function(t){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||t,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by ".concat(this._error," (").concat(So.json.stringify(this._error),")")),this._protocol.notifyFatalError(this._error)},r.prototype._setIdle=function(t){this._idle=!0,this._ch.stopReceiveTimeout(),this._protocol.queueObserverIfProtocolIsNotBroken(t)},r.prototype._unsetIdle=function(){this._idle=!1,this._updateCurrentObserver()},r.prototype._queueObserver=function(t){return this._protocol.queueObserverIfProtocolIsNotBroken(t)},r.prototype.hasOngoingObservableRequests=function(){return!this._idle&&this._protocol.hasOngoingObservableRequests()},r.prototype.resetAndFlush=function(){var t=this;return new Promise(function(n,o){t._reset({onError:function(i){if(t._isBroken)o(i);else{var a=t._handleProtocolError("Received FAILURE as a response for RESET: ".concat(i));o(a)}},onComplete:function(){n()}})})},r.prototype._resetOnFailure=function(){var t=this;this.isOpen()&&this._reset({onError:function(){t._protocol.resetFailure()},onComplete:function(){t._protocol.resetFailure()}})},r.prototype._reset=function(t){var n=this;if(this._reseting){this._protocol.isLastMessageReset()?this._resetObservers.push(t):this._protocol.reset({onError:function(i){t.onError(i)},onComplete:function(){t.onComplete()}});return}this._resetObservers.push(t),this._reseting=!0;var o=function(i){n._reseting=!1;var a=n._resetObservers;n._resetObservers=[],a.forEach(i)};this._protocol.reset({onError:function(i){o(function(a){return a.onError(i)})},onComplete:function(){o(function(i){return i.onComplete()})}})},r.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},r.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},r.prototype._handleOngoingRequestsNumberChange=function(t){this._idle||(t===0?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout())},r.prototype.close=function(){var t;return Sg(this,void 0,void 0,function(){return Pg(this,function(n){switch(n.label){case 0:return this._ssrCallback((t=this.SSREnabledHint)!==null&&t!==void 0?t:!1,"CLOSE"),this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return n.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},r.prototype.toString=function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")},r.prototype._handleProtocolError=function(t){this._protocol.resetFailure(),this._updateCurrentObserver();var n=(0,So.newError)(t,vH);return this._handleFatalError(n),n},r}(pH.default);Gs.default=CE;function mH(e,r){return new _H(r._level,function(t,n){return r._loggerFunction(t,"".concat(e," ").concat(n))})}var H_={},gH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),wH=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(H_,"__esModule",{value:!0});var OH=wH(Hs),EH=function(e){gH(r,e);function r(t,n){var o=e.call(this,n)||this;return n&&(o._originalErrorHandler=t._errorHandler,t._errorHandler=o._errorHandler),o._delegate=t,o}return r.prototype.beginTransaction=function(t){return this._delegate.beginTransaction(t)},r.prototype.run=function(t,n,o){return this._delegate.run(t,n,o)},r.prototype.commitTransaction=function(t){return this._delegate.commitTransaction(t)},r.prototype.rollbackTransaction=function(t){return this._delegate.rollbackTransaction(t)},r.prototype.getProtocolVersion=function(){return this._delegate.getProtocolVersion()},Object.defineProperty(r.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(t){this._delegate.databaseId=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"authToken",{get:function(){return this._delegate.authToken},set:function(t){this._delegate.authToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return this._delegate.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return this._delegate.version},set:function(t){this._delegate.version=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){return this._delegate.creationTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){return this._delegate.idleTimestamp},set:function(t){this._delegate.idleTimestamp=t},enumerable:!1,configurable:!0}),r.prototype.isOpen=function(){return this._delegate.isOpen()},r.prototype.protocol=function(){return this._delegate.protocol()},r.prototype.connect=function(t,n,o,i){return this._delegate.connect(t,n,o,i)},r.prototype.write=function(t,n,o){return this._delegate.write(t,n,o)},r.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},r.prototype.hasOngoingObservableRequests=function(){return this._delegate.hasOngoingObservableRequests()},r.prototype.close=function(){return this._delegate.close()},r.prototype.release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate.release()},r}(OH.default);H_.default=EH;var G_={};Object.defineProperty(G_,"__esModule",{value:!0});var AE=G,SH=AE.error.SERVICE_UNAVAILABLE,PH=AE.error.SESSION_EXPIRED,TH=function(){function e(r,t,n,o){this._errorCode=r,this._handleUnavailability=t||wp,this._handleWriteFailure=n||wp,this._handleSecurityError=o||wp}return e.create=function(r){var t=r.errorCode,n=r.handleUnavailability,o=r.handleWriteFailure,i=r.handleSecurityError;return new e(t,n,o,i)},e.prototype.errorCode=function(){return this._errorCode},e.prototype.handleAndTransformError=function(r,t,n){return CH(r)?this._handleSecurityError(r,t,n):AH(r)?this._handleUnavailability(r,t,n):IH(r)?this._handleWriteFailure(r,t,n):r},e}();G_.default=TH;function CH(e){return e!=null&&e.code!=null&&e.code.startsWith("Neo.ClientError.Security.")}function AH(e){return e?e.code===PH||e.code===SH||e.code==="Neo.TransientError.General.DatabaseUnavailable":!1}function IH(e){return e?e.code==="Neo.ClientError.Cluster.NotALeader"||e.code==="Neo.ClientError.General.ForbiddenOnReadOnlyDatabase":!1}function wp(e){return e}(function(e){var r=f&&f.__createBinding||(Object.create?function(u,l,d,h){h===void 0&&(h=d);var p=Object.getOwnPropertyDescriptor(l,d);(!p||("get"in p?!l.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return l[d]}}),Object.defineProperty(u,h,p)}:function(u,l,d,h){h===void 0&&(h=d),u[h]=l[d]}),t=f&&f.__setModuleDefault||(Object.create?function(u,l){Object.defineProperty(u,"default",{enumerable:!0,value:l})}:function(u,l){u.default=l}),n=f&&f.__importStar||function(u){if(u&&u.__esModule)return u;var l={};if(u!=null)for(var d in u)d!=="default"&&Object.prototype.hasOwnProperty.call(u,d)&&r(l,u,d);return t(l,u),l},o=f&&f.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=e.ConnectionErrorHandler=e.DelegateConnection=e.ChannelConnection=e.Connection=void 0;var i=o(Hs);e.Connection=i.default;var a=n(Gs);e.ChannelConnection=a.default,Object.defineProperty(e,"createChannelConnection",{enumerable:!0,get:function(){return a.createChannelConnection}});var s=o(H_);e.DelegateConnection=s.default;var c=o(G_);e.ConnectionErrorHandler=c.default,e.default=i.default})(md);var K_={},RH=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},jH=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(K_,"__esModule",{value:!0});var $H=G,Cg=Qt,NH=function(){function e(r){var t=r.authTokenManager,n=r.userAgent,o=r.boltAgent;this._authTokenManager=t||(0,$H.staticAuthTokenManager)({}),this._userAgent=n,this._boltAgent=o}return e.prototype.authenticate=function(r){var t=r.connection,n=r.auth,o=r.skipReAuth,i=r.waitReAuth,a=r.forceReAuth;return RH(this,void 0,void 0,function(){var s,c;return jH(this,function(u){switch(u.label){case 0:return n==null?[3,3]:(s=t.supportsReAuth===!0&&(!Cg.object.equals(t.authToken,n)&&o!==!0||a===!0),t.authToken==null||s?[4,t.connect(this._userAgent,this._boltAgent,n,i||!1)]:[3,2]);case 1:return[2,u.sent()];case 2:return[2,t];case 3:return[4,this._authTokenManager.getToken()];case 4:return c=u.sent(),Cg.object.equals(c,t.authToken)?[3,6]:[4,t.connect(this._userAgent,this._boltAgent,c,!1)];case 5:return[2,u.sent()];case 6:return[2,t]}})})},e.prototype.handleError=function(r){var t=r.connection,n=r.code;return t&&n.startsWith("Neo.ClientError.Security.")?this._authTokenManager.handleSecurityException(t.authToken,n):!1},e}();K_.default=NH;var Y_={},kH=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},MH=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Y_,"__esModule",{value:!0});var DH=function(){function e(r){var t=r.connectionLivenessCheckTimeout;this._connectionLivenessCheckTimeout=t}return e.prototype.check=function(r){return kH(this,void 0,void 0,function(){var t;return MH(this,function(n){switch(n.label){case 0:return this._isCheckDisabled||this._isNewlyCreatedConnection(r)?[2,!0]:(t=Date.now()-r.idleTimestamp,this._connectionLivenessCheckTimeout===0||t>this._connectionLivenessCheckTimeout?[4,r.resetAndFlush().then(function(){return!0})]:[3,2]);case 1:return[2,n.sent()];case 2:return[2,!0]}})})},Object.defineProperty(e.prototype,"_isCheckDisabled",{get:function(){return this._connectionLivenessCheckTimeout==null||this._connectionLivenessCheckTimeout<0},enumerable:!1,configurable:!0}),e.prototype._isNewlyCreatedConnection=function(r){return r.authToken==null},e}();Y_.default=DH;var Z_={},LH=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},UH=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Z_,"__esModule",{value:!0});var FH=no,xH=function(){function e(r){var t=r.clientCertificateProvider,n=r.loader;this._clientCertificateProvider=t,this._loader=n||FH.ClientCertificatesLoader,this._clientCertificate=null}return e.prototype.getClientCertificate=function(){return LH(this,void 0,void 0,function(){var r,t,n=this;return UH(this,function(o){switch(o.label){case 0:return r=this._clientCertificateProvider!=null,r?(t=this._clientCertificate==null,t?[3,2]:[4,this._clientCertificateProvider.hasUpdate()]):[3,3];case 1:t=o.sent(),o.label=2;case 2:r=t,o.label=3;case 3:return r&&(this._clientCertificate=Promise.resolve(this._clientCertificateProvider.getClientCertificate()).then(this._loader.load).then(function(i){return n._clientCertificate=i,n._clientCertificate}).catch(function(i){throw n._clientCertificate=null,i})),[2,this._clientCertificate]}})})},e}();Z_.default=xH;var BH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Sn=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Pn=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},VH=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},WH=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))},Q_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qs,"__esModule",{value:!0});var Ag=md,Po=G,zH=Q_(K_),qH=Qt,HH=Q_(Y_),GH=Q_(Z_),KH=Po.error.SERVICE_UNAVAILABLE,YH=["Neo.ClientError.Security.CredentialsExpired","Neo.ClientError.Security.Forbidden","Neo.ClientError.Security.TokenExpired","Neo.ClientError.Security.Unauthorized"],IE=Po.internal.pool,Ig=IE.Pool,ZH=IE.PoolConfig,QH=function(e){BH(r,e);function r(t,n){var o=t.id,i=t.config,a=t.log,s=t.userAgent,c=t.boltAgent,u=t.authTokenManager,l=t.newPool,d=l===void 0?function(){for(var p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];return new(Ig.bind.apply(Ig,WH([void 0],VH(p),!1)))}:l;n===void 0&&(n=null);var h=e.call(this)||this;return h._id=o,h._config=i,h._log=a,h._clientCertificateHolder=new GH.default({clientCertificateProvider:h._config.clientCertificate}),h._authenticationProvider=new zH.default({authTokenManager:u,userAgent:s,boltAgent:c}),h._livenessCheckProvider=new HH.default({connectionLivenessCheckTimeout:i.connectionLivenessCheckTimeout}),h._userAgent=s,h._boltAgent=c,h._createChannelConnection=n||function(p){return Sn(h,void 0,void 0,function(){var v,_;return Pn(this,function(b){switch(b.label){case 0:return v=Ag.createChannelConnection,_=[p,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,v.apply(void 0,_.concat([b.sent()]))]}})})},h._connectionPool=d({create:h._createConnection.bind(h),destroy:h._destroyConnection.bind(h),validateOnAcquire:h._validateConnectionOnAcquire.bind(h),validateOnRelease:h._validateConnectionOnRelease.bind(h),installIdleObserver:r._installIdleObserverOnConnection.bind(h),removeIdleObserver:r._removeIdleObserverOnConnection.bind(h),config:ZH.fromDriverConfig(i),log:h._log}),h._openConnections={},h}return r.prototype._createConnectionErrorHandler=function(){return new Ag.ConnectionErrorHandler(KH)},r.prototype._getClientCertificate=function(){return Sn(this,void 0,void 0,function(){return Pn(this,function(t){return[2,this._config.clientCertificate.getClientCertificate()]})})},r.prototype._createConnection=function(t,n,o){var i=this,a=t.auth;return this._createChannelConnection(n).then(function(s){return s.release=function(){return s.idleTimestamp=Date.now(),o(n,s)},i._openConnections[s.id]=s,i._authenticationProvider.authenticate({connection:s,auth:a}).catch(function(c){throw i._destroyConnection(s),c})})},r.prototype._validateConnectionOnAcquire=function(t,n){var o=t.auth,i=t.skipReAuth;return Sn(this,void 0,void 0,function(){var a,s;return Pn(this,function(c){switch(c.label){case 0:if(!this._validateConnection(n))return[2,!1];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this._livenessCheckProvider.check(n)];case 2:return c.sent(),[3,4];case 3:return a=c.sent(),this._log.debug("The connection ".concat(n.id," is not alive because of an error ").concat(a.code," '").concat(a.message,"'")),[2,!1];case 4:return c.trys.push([4,6,,7]),[4,this._authenticationProvider.authenticate({connection:n,auth:o,skipReAuth:i})];case 5:return c.sent(),[2,!0];case 6:return s=c.sent(),this._log.debug("The connection ".concat(n.id," is not valid because of an error ").concat(s.code," '").concat(s.message,"'")),[2,!1];case 7:return[2]}})})},r.prototype._validateConnectionOnRelease=function(t){return t._sticky!==!0&&this._validateConnection(t)},r.prototype._validateConnection=function(t){if(!t.isOpen())return!1;var n=this._config.maxConnectionLifetime,o=Date.now()-t.creationTimestamp;return!(o>n)},r.prototype._destroyConnection=function(t){return delete this._openConnections[t.id],t.close()},r.prototype._verifyConnectivityAndGetServerVersion=function(t){var n=t.address;return Sn(this,void 0,void 0,function(){var o,i;return Pn(this,function(a){switch(a.label){case 0:return[4,this._connectionPool.acquire({},n)];case 1:o=a.sent(),i=new Po.ServerInfo(o.server,o.protocol().version),a.label=2;case 2:return a.trys.push([2,,5,7]),o.protocol().isLastMessageLogon()?[3,4]:[4,o.resetAndFlush()];case 3:a.sent(),a.label=4;case 4:return[3,7];case 5:return[4,o.release()];case 6:return a.sent(),[7];case 7:return[2,i]}})})},r.prototype._verifyAuthentication=function(t){var n=t.getAddress,o=t.auth;return Sn(this,void 0,void 0,function(){var i,a,s,c,u,l;return Pn(this,function(d){switch(d.label){case 0:i=[],d.label=1;case 1:return d.trys.push([1,8,9,11]),[4,n()];case 2:return a=d.sent(),[4,this._connectionPool.acquire({auth:o,skipReAuth:!0},a)];case 3:if(s=d.sent(),i.push(s),c=!s.protocol().isLastMessageLogon(),!s.supportsReAuth)throw(0,Po.newError)("Driver is connected to a database that does not support user switch.");return c&&s.supportsReAuth?[4,this._authenticationProvider.authenticate({connection:s,auth:o,waitReAuth:!0,forceReAuth:!0})]:[3,5];case 4:return d.sent(),[3,7];case 5:return c&&!s.supportsReAuth?[4,this._connectionPool.acquire({auth:o},a,{requireNew:!0})]:[3,7];case 6:u=d.sent(),u._sticky=!0,i.push(u),d.label=7;case 7:return[2,!0];case 8:if(l=d.sent(),YH.includes(l.code))return[2,!1];throw l;case 9:return[4,Promise.all(i.map(function(h){return h.release()}))];case 10:return d.sent(),[7];case 11:return[2]}})})},r.prototype._verifyStickyConnection=function(t){var n=t.auth,o=t.connection;return t.address,Sn(this,void 0,void 0,function(){var i,a;return Pn(this,function(s){switch(s.label){case 0:return i=qH.object.equals(n,o.authToken),a=!i,o._sticky=i&&!o.supportsReAuth,a||o._sticky?[4,o.release()]:[3,2];case 1:throw s.sent(),(0,Po.newError)("Driver is connected to a database that does not support user switch.");case 2:return[2]}})})},r.prototype.close=function(){return Sn(this,void 0,void 0,function(){return Pn(this,function(t){switch(t.label){case 0:return[4,this._connectionPool.close()];case 1:return t.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(n){return n.close()}))];case 2:return t.sent(),[2]}})})},r._installIdleObserverOnConnection=function(t,n){t._setIdle(n)},r._removeIdleObserverOnConnection=function(t){t._unsetIdle()},r.prototype._handleSecurityError=function(t,n,o){var i=this._authenticationProvider.handleError({connection:o,code:t.code});return i&&(t.retriable=!0),t.code==="Neo.ClientError.Security.AuthorizationExpired"&&this._connectionPool.apply(n,function(a){a.authToken=null}),o&&o.close().catch(function(){}),t},r}(Po.ConnectionProvider);qs.default=QH;var X_={},XH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rr=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},jr=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},JH=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(X_,"__esModule",{value:!0});var e9=JH(qs),Rg=md,RE=G,gd=RE.internal.constants,t9=gd.BOLT_PROTOCOL_V3,r9=gd.BOLT_PROTOCOL_V4_0,n9=gd.BOLT_PROTOCOL_V4_4,o9=gd.BOLT_PROTOCOL_V5_1,i9=RE.error.SERVICE_UNAVAILABLE,a9=function(e){XH(r,e);function r(t){var n=t.id,o=t.config,i=t.log,a=t.address,s=t.userAgent,c=t.boltAgent,u=t.authTokenManager,l=t.newPool,d=e.call(this,{id:n,config:o,log:i,userAgent:s,boltAgent:c,authTokenManager:u,newPool:l})||this;return d._address=a,d}return r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t;n.accessMode;var o=n.database;n.bookmarks;var i=n.auth,a=n.forceReAuth;return Rr(this,void 0,void 0,function(){var s,c,u=this;return jr(this,function(l){switch(l.label){case 0:return s=Rg.ConnectionErrorHandler.create({errorCode:i9,handleSecurityError:function(d,h,p){return u._handleSecurityError(d,h,p,o)}}),[4,this._connectionPool.acquire({auth:i,forceReAuth:a},this._address)];case 1:return c=l.sent(),i?[4,this._verifyStickyConnection({auth:i,connection:c,address:this._address})]:[3,3];case 2:return l.sent(),[2,c];case 3:return[2,new Rg.DelegateConnection(c,s)]}})})},r.prototype._handleSecurityError=function(t,n,o,i){return this._log.warn("Direct driver ".concat(this._id," will close connection to ").concat(n," for database '").concat(i,"' because of an error ").concat(t.code," '").concat(t.message,"'")),e.prototype._handleSecurityError.call(this,t,n,o)},r.prototype._hasProtocolVersion=function(t){return Rr(this,void 0,void 0,function(){var n,o;return jr(this,function(i){switch(i.label){case 0:return[4,this._createChannelConnection(this._address)];case 1:return n=i.sent(),o=n.protocol()?n.protocol().version:null,[4,n.close()];case 2:return i.sent(),o?[2,t(o)]:[2,!1]}})})},r.prototype.supportsMultiDb=function(){return Rr(this,void 0,void 0,function(){return jr(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=r9})];case 1:return[2,t.sent()]}})})},r.prototype.getNegotiatedProtocolVersion=function(){var t=this;return new Promise(function(n,o){t._hasProtocolVersion(n).catch(o)})},r.prototype.supportsTransactionConfig=function(){return Rr(this,void 0,void 0,function(){return jr(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=t9})];case 1:return[2,t.sent()]}})})},r.prototype.supportsUserImpersonation=function(){return Rr(this,void 0,void 0,function(){return jr(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=n9})];case 1:return[2,t.sent()]}})})},r.prototype.supportsSessionAuth=function(){return Rr(this,void 0,void 0,function(){return jr(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=o9})];case 1:return[2,t.sent()]}})})},r.prototype.verifyAuthentication=function(t){var n=t.auth;return Rr(this,void 0,void 0,function(){var o=this;return jr(this,function(i){return[2,this._verifyAuthentication({auth:n,getAddress:function(){return o._address}})]})})},r.prototype.verifyConnectivityAndGetServerInfo=function(){return Rr(this,void 0,void 0,function(){return jr(this,function(t){switch(t.label){case 0:return[4,this._verifyConnectivityAndGetServerVersion({address:this._address})];case 1:return[2,t.sent()]}})})},r}(e9.default);X_.default=a9;var J_={},Hn={},ey={},Ci={},Op=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Ep=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.createValidRoutingTable=void 0;var Ot=G,jE=Ot.internal.constants,u9=jE.ACCESS_MODE_WRITE,s9=jE.ACCESS_MODE_READ,Sp=Ot.internal.serverAddress.ServerAddress,ty=Ot.error.PROTOCOL_ERROR,c9=1,$E=function(){function e(r){var t=r===void 0?{}:r,n=t.database,o=t.routers,i=t.readers,a=t.writers,s=t.expirationTime,c=t.ttl;this.database=n||null,this.databaseName=n||"default database",this.routers=o||[],this.readers=i||[],this.writers=a||[],this.expirationTime=s||(0,Ot.int)(0),this.ttl=c}return e.fromRawRoutingTable=function(r,t,n){return NE(r,t,n)},e.prototype.forget=function(r){this.readers=_c(this.readers,r),this.writers=_c(this.writers,r)},e.prototype.forgetRouter=function(r){this.routers=_c(this.routers,r)},e.prototype.forgetWriter=function(r){this.writers=_c(this.writers,r)},e.prototype.isStaleFor=function(r){return this.expirationTime.lessThan(Date.now())||this.routers.length<c9||r===s9&&this.readers.length===0||r===u9&&this.writers.length===0},e.prototype.isExpiredFor=function(r){return this.expirationTime.add(r).lessThan(Date.now())},e.prototype.allServers=function(){return Ep(Ep(Ep([],Op(this.routers),!1),Op(this.readers),!1),Op(this.writers),!1)},e.prototype.toString=function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")},e}();Ci.default=$E;function _c(e,r){return e.filter(function(t){return t.asKey()!==r.asKey()})}function NE(e,r,t){var n=t.ttl,o=f9(t,r),i=l9(t,r),a=i.routers,s=i.readers,c=i.writers;return jg(a,"routers",r),jg(s,"readers",r),new $E({database:e||t.db,routers:a,readers:s,writers:c,expirationTime:o,ttl:n})}Ci.createValidRoutingTable=NE;function l9(e,r){try{var t=[],n=[],o=[];return e.servers.forEach(function(i){var a=i.role,s=i.addresses;a==="ROUTE"?t=Pp(s).map(function(c){return Sp.fromUrl(c)}):a==="WRITE"?o=Pp(s).map(function(c){return Sp.fromUrl(c)}):a==="READ"&&(n=Pp(s).map(function(c){return Sp.fromUrl(c)}))}),{routers:t,readers:n,writers:o}}catch(i){throw(0,Ot.newError)("Unable to parse servers entry from router ".concat(r,` from addresses:
`).concat(Ot.json.stringify(e.servers),`
Error message: `).concat(i.message),ty)}}function f9(e,r){try{var t=(0,Ot.int)(Date.now()),n=(0,Ot.int)(e.ttl).multiply(1e3).add(t);return n.lessThan(t)?Ot.Integer.MAX_VALUE:n}catch(o){throw(0,Ot.newError)("Unable to parse TTL entry from router ".concat(r,` from raw routing table:
`).concat(Ot.json.stringify(e),`
Error message: `).concat(o.message),ty)}}function jg(e,r,t){if(e.length===0)throw(0,Ot.newError)("Received no "+r+" from router "+t,ty)}function Pp(e){if(!Array.isArray(e))throw new TypeError("Array expected but got: "+e);return Array.from(e)}var d9=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ey,"__esModule",{value:!0});var h9=d9(Ci),p9=function(){function e(r){this._routingContext=r}return e.prototype.lookupRoutingTableOnRouter=function(r,t,n,o){var i=this;return r._acquireConnection(function(a){return i._requestRawRoutingTable(a,r,t,n,o).then(function(s){return s.isNull?null:h9.default.fromRawRoutingTable(t,n,s)})})},e.prototype._requestRawRoutingTable=function(r,t,n,o,i){var a=this;return new Promise(function(s,c){r.protocol().requestRoutingInformation({routingContext:a._routingContext,databaseName:n,impersonatedUser:i,sessionContext:{bookmarks:t._lastBookmarks,mode:t._mode,database:t._database,afterComplete:t._onComplete},onCompleted:s,onError:c})})},e}();ey.default=p9;var kE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.RoutingTable=Hn.Rediscovery=void 0;var ME=kE(ey);Hn.Rediscovery=ME.default;var v9=kE(Ci);Hn.RoutingTable=v9.default;Hn.default=ME.default;var _9=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Jc=f&&f.__assign||function(){return Jc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Jc.apply(this,arguments)},y9=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),b9=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),m9=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&y9(r,e,t);return b9(r,e),r},Te=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Ce=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Tv=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},cr=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},DE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(J_,"__esModule",{value:!0});var Ke=G,Tp=m9(Hn),g9=no,w9=DE(bd),O9=DE(qs),E9=Hr,Tn=md,S9=Qt,yc=Ke.error.SERVICE_UNAVAILABLE,Ji=Ke.error.SESSION_EXPIRED,P9=Ke.internal.bookmarks.Bookmarks,Ai=Ke.internal.constants,$g=Ai.ACCESS_MODE_READ,bc=Ai.ACCESS_MODE_WRITE,T9=Ai.BOLT_PROTOCOL_V3,C9=Ai.BOLT_PROTOCOL_V4_0,A9=Ai.BOLT_PROTOCOL_V4_4,I9=Ai.BOLT_PROTOCOL_V5_1,R9="Neo.ClientError.Procedure.ProcedureNotFound",j9="Neo.ClientError.Database.DatabaseNotFound",$9="Neo.ClientError.Transaction.InvalidBookmark",N9="Neo.ClientError.Transaction.InvalidBookmarkMixture",k9="Neo.ClientError.Security.AuthorizationExpired",M9="Neo.ClientError.Statement.ArgumentError",D9="Neo.ClientError.Request.Invalid",L9="Neo.ClientError.Statement.TypeError",U9="N/A",F9="system",ea=null,x9=(0,Ke.int)(3e4),B9=function(e){_9(r,e);function r(t){var n=t.id,o=t.address,i=t.routingContext,a=t.hostNameResolver,s=t.config,c=t.log,u=t.userAgent,l=t.boltAgent,d=t.authTokenManager,h=t.routingTablePurgeDelay,p=t.newPool,v=e.call(this,{id:n,config:s,log:c,userAgent:u,boltAgent:l,authTokenManager:d,newPool:p},function(_){return Te(v,void 0,void 0,function(){var b,w;return Ce(this,function(E){switch(E.label){case 0:return b=Tn.createChannelConnection,w=[_,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,b.apply(void 0,w.concat([E.sent(),this._routingContext,this._channelSsrCallback.bind(this)]))]}})})})||this;return v._routingContext=Jc(Jc({},i),{address:o.toString()}),v._seedRouter=o,v._rediscovery=new Tp.default(v._routingContext),v._loadBalancingStrategy=new E9.LeastConnectedLoadBalancingStrategy(v._connectionPool),v._hostNameResolver=a,v._dnsResolver=new g9.HostNameResolver,v._log=c,v._useSeedRouter=!0,v._routingTableRegistry=new V9(h?(0,Ke.int)(h):x9),v._refreshRoutingTable=S9.functional.reuseOngoingRequest(v._refreshRoutingTable,v),v._withSSR=0,v._withoutSSR=0,v}return r.prototype._createConnectionErrorHandler=function(){return new Tn.ConnectionErrorHandler(Ji)},r.prototype._handleUnavailability=function(t,n,o){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(n," for database '").concat(o,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forget(n,o||ea),t},r.prototype._handleSecurityError=function(t,n,o,i){return this._log.warn("Routing driver ".concat(this._id," will close connections to ").concat(n," for database '").concat(i,"' because of an error ").concat(t.code," '").concat(t.message,"'")),e.prototype._handleSecurityError.call(this,t,n,o,i)},r.prototype._handleWriteFailure=function(t,n,o){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(n," for database '").concat(o,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forgetWriter(n,o||ea),(0,Ke.newError)("No longer possible to write to server at "+n,Ji,t)},r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t,o=n.accessMode,i=n.database,a=n.bookmarks,s=n.impersonatedUser,c=n.onDatabaseNameResolved,u=n.auth,l=n.homeDb;return Te(this,void 0,void 0,function(){var d,h,p,v,_,b=this;return Ce(this,function(w){switch(w.label){case 0:return d={database:i||ea},h=new Tn.ConnectionErrorHandler(Ji,function(E,S){return b._handleUnavailability(E,S,d.database)},function(E,S){return b._handleWriteFailure(E,S,l??d.database)},function(E,S,O){return b._handleSecurityError(E,S,O,d.database)}),this.SSREnabled()&&l!==void 0&&i===""?(v=this._routingTableRegistry.get(l,function(){return new Tp.RoutingTable({database:l})}),v&&!v.isStaleFor(o)?[4,this.getConnectionFromRoutingTable(v,u,o,h)]:[3,2]):[3,2];case 1:if(p=w.sent(),this.SSREnabled())return[2,p];p.release(),w.label=2;case 2:return[4,this._freshRoutingTable({accessMode:o,database:d.database,bookmarks:a,impersonatedUser:s,auth:u,onDatabaseNameResolved:function(E){d.database=d.database||E,c&&c(E)}})];case 3:return _=w.sent(),[2,this.getConnectionFromRoutingTable(_,u,o,h)]}})})},r.prototype.getConnectionFromRoutingTable=function(t,n,o,i){return Te(this,void 0,void 0,function(){var a,s,c,u,l;return Ce(this,function(d){switch(d.label){case 0:if(o===$g)s=this._loadBalancingStrategy.selectReader(t.readers),a="read";else if(o===bc)s=this._loadBalancingStrategy.selectWriter(t.writers),a="write";else throw(0,Ke.newError)("Illegal mode "+o);if(!s)throw(0,Ke.newError)("Failed to obtain connection towards ".concat(a," server. Known routing table is: ").concat(t),Ji);d.label=1;case 1:return d.trys.push([1,5,,6]),[4,this._connectionPool.acquire({auth:n},s)];case 2:return c=d.sent(),n?[4,this._verifyStickyConnection({auth:n,connection:c,address:s})]:[3,4];case 3:return d.sent(),[2,c];case 4:return[2,new Tn.DelegateConnection(c,i)];case 5:throw u=d.sent(),l=i.handleAndTransformError(u,s),l;case 6:return[2]}})})},r.prototype._hasProtocolVersion=function(t){return Te(this,void 0,void 0,function(){var n,o,i,a,s,c;return Ce(this,function(u){switch(u.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:n=u.sent(),i=0,u.label=2;case 2:if(!(i<n.length))return[3,8];u.label=3;case 3:return u.trys.push([3,6,,7]),[4,this._createChannelConnection(n[i])];case 4:return a=u.sent(),s=a.protocol()?a.protocol().version:null,[4,a.close()];case 5:return u.sent(),s?[2,t(s)]:[2,!1];case 6:return c=u.sent(),o=c,[3,7];case 7:return i++,[3,2];case 8:if(o)throw o;return[2,!1]}})})},r.prototype.supportsMultiDb=function(){return Te(this,void 0,void 0,function(){return Ce(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=C9})];case 1:return[2,t.sent()]}})})},r.prototype.supportsTransactionConfig=function(){return Te(this,void 0,void 0,function(){return Ce(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=T9})];case 1:return[2,t.sent()]}})})},r.prototype.supportsUserImpersonation=function(){return Te(this,void 0,void 0,function(){return Ce(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=A9})];case 1:return[2,t.sent()]}})})},r.prototype.supportsSessionAuth=function(){return Te(this,void 0,void 0,function(){return Ce(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=I9})];case 1:return[2,t.sent()]}})})},r.prototype.getNegotiatedProtocolVersion=function(){var t=this;return new Promise(function(n,o){t._hasProtocolVersion(n).catch(o)})},r.prototype.verifyAuthentication=function(t){var n=t.database,o=t.accessMode,i=t.auth;return Te(this,void 0,void 0,function(){var a=this;return Ce(this,function(s){return[2,this._verifyAuthentication({auth:i,getAddress:function(){return Te(a,void 0,void 0,function(){var c,u,l;return Ce(this,function(d){switch(d.label){case 0:return c={database:n||ea},[4,this._freshRoutingTable({accessMode:o,database:c.database,auth:i,onDatabaseNameResolved:function(h){c.database=c.database||h}})];case 1:if(u=d.sent(),l=o===bc?u.writers:u.readers,l.length===0)throw(0,Ke.newError)("No servers available for database '".concat(c.database,"' with access mode '").concat(o,"'"),yc);return[2,l[0]]}})})}})]})})},r.prototype.verifyConnectivityAndGetServerInfo=function(t){var n=t.database,o=t.accessMode;return Te(this,void 0,void 0,function(){var i,a,s,c,u,l,d,h,p,v,_,b;return Ce(this,function(w){switch(w.label){case 0:return i={database:n||ea},[4,this._freshRoutingTable({accessMode:o,database:i.database,onDatabaseNameResolved:function(E){i.database=i.database||E}})];case 1:a=w.sent(),s=o===bc?a.writers:a.readers,c=(0,Ke.newError)("No servers available for database '".concat(i.database,"' with access mode '").concat(o,"'"),yc),w.label=2;case 2:w.trys.push([2,9,10,11]),u=Tv(s),l=u.next(),w.label=3;case 3:if(l.done)return[3,8];d=l.value,w.label=4;case 4:return w.trys.push([4,6,,7]),[4,this._verifyConnectivityAndGetServerVersion({address:d})];case 5:return h=w.sent(),[2,h];case 6:return p=w.sent(),c=p,[3,7];case 7:return l=u.next(),[3,3];case 8:return[3,11];case 9:return v=w.sent(),_={error:v},[3,11];case 10:try{l&&!l.done&&(b=u.return)&&b.call(u)}finally{if(_)throw _.error}return[7];case 11:throw c}})})},r.prototype.forget=function(t,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(o){return o.forget(t)}}),this._connectionPool.purge(t).catch(function(){})},r.prototype.forgetWriter=function(t,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(o){return o.forgetWriter(t)}})},r.prototype._freshRoutingTable=function(t){var n=t===void 0?{}:t,o=n.accessMode,i=n.database,a=n.bookmarks,s=n.impersonatedUser,c=n.onDatabaseNameResolved,u=n.auth,l=this._routingTableRegistry.get(i,function(){return new Tp.RoutingTable({database:i})});return l.isStaleFor(o)?(this._log.info('Routing table is stale for database: "'.concat(i,'" and access mode: "').concat(o,'": ').concat(l)),this._refreshRoutingTable(l,a,s,u).then(function(d){return c(d.database),d})):l},r.prototype._refreshRoutingTable=function(t,n,o,i){var a=t.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(a,t,n,o,i):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(a,t,n,o,i)},r.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(t,n,o,i,a){return Te(this,void 0,void 0,function(){var s,c,u,l,d,h,p;return Ce(this,function(v){switch(v.label){case 0:return s=[],[4,this._fetchRoutingTableUsingSeedRouter(s,this._seedRouter,n,o,i,a)];case 1:return c=cr.apply(void 0,[v.sent(),2]),u=c[0],l=c[1],u?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(t,n,o,i,a)];case 3:d=cr.apply(void 0,[v.sent(),2]),h=d[0],p=d[1],u=h,l=p||l,v.label=4;case 4:return[4,this._applyRoutingTableIfPossible(n,u,l)];case 5:return[2,v.sent()]}})})},r.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(t,n,o,i,a){return Te(this,void 0,void 0,function(){var s,c,u,l;return Ce(this,function(d){switch(d.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(t,n,o,i,a)];case 1:return s=cr.apply(void 0,[d.sent(),2]),c=s[0],u=s[1],c?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(t,this._seedRouter,n,o,i,a)];case 2:l=cr.apply(void 0,[d.sent(),2]),c=l[0],u=l[1],d.label=3;case 3:return[4,this._applyRoutingTableIfPossible(n,c,u)];case 4:return[2,d.sent()]}})})},r.prototype._fetchRoutingTableUsingKnownRouters=function(t,n,o,i,a){return Te(this,void 0,void 0,function(){var s,c,u,l;return Ce(this,function(d){switch(d.label){case 0:return[4,this._fetchRoutingTable(t,n,o,i,a)];case 1:return s=cr.apply(void 0,[d.sent(),2]),c=s[0],u=s[1],c?[2,[c,null]]:(l=t.length-1,r._forgetRouter(n,t,l),[2,[null,u]])}})})},r.prototype._fetchRoutingTableUsingSeedRouter=function(t,n,o,i,a,s){return Te(this,void 0,void 0,function(){var c,u;return Ce(this,function(l){switch(l.label){case 0:return[4,this._resolveSeedRouter(n)];case 1:return c=l.sent(),u=c.filter(function(d){return t.indexOf(d)<0}),[4,this._fetchRoutingTable(u,o,i,a,s)];case 2:return[2,l.sent()]}})})},r.prototype._resolveSeedRouter=function(t){return Te(this,void 0,void 0,function(){var n,o,i=this;return Ce(this,function(a){switch(a.label){case 0:return[4,this._hostNameResolver.resolve(t)];case 1:return n=a.sent(),[4,Promise.all(n.map(function(s){return i._dnsResolver.resolve(s)}))];case 2:return o=a.sent(),[2,[].concat.apply([],o)]}})})},r.prototype._fetchRoutingTable=function(t,n,o,i,a){return Te(this,void 0,void 0,function(){var s=this;return Ce(this,function(c){return[2,t.reduce(function(u,l,d){return Te(s,void 0,void 0,function(){var h,p,v,_,b,w,E;return Ce(this,function(S){switch(S.label){case 0:return[4,u];case 1:return h=cr.apply(void 0,[S.sent(),1]),p=h[0],p?[2,[p,null]]:(v=d-1,r._forgetRouter(n,t,v),[4,this._createSessionForRediscovery(l,o,i,a)]);case 2:if(_=cr.apply(void 0,[S.sent(),2]),b=_[0],w=_[1],!b)return[3,8];S.label=3;case 3:return S.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(b,n.database,l,i)];case 4:return[2,[S.sent(),null]];case 5:return E=S.sent(),[2,this._handleRediscoveryError(E,l)];case 6:return b.close(),[7];case 7:return[3,9];case 8:return[2,[null,w]];case 9:return[2]}})})},Promise.resolve([null,null]))]})})},r.prototype._createSessionForRediscovery=function(t,n,o,i){return Te(this,void 0,void 0,function(){var a,s,c,u,l,d,h=this;return Ce(this,function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),[4,this._connectionPool.acquire({auth:i},t)];case 1:return a=p.sent(),i?[4,this._verifyStickyConnection({auth:i,connection:a,address:t})]:[3,3];case 2:p.sent(),p.label=3;case 3:return s=Tn.ConnectionErrorHandler.create({errorCode:Ji,handleSecurityError:function(v,_,b){return h._handleSecurityError(v,_,b)}}),c=a._sticky?new Tn.DelegateConnection(a):new Tn.DelegateConnection(a,s),u=new w9.default(c),l=a.protocol().version,l<4?[2,[new Ke.Session({mode:bc,bookmarks:P9.empty(),connectionProvider:u}),null]]:[2,[new Ke.Session({mode:$g,database:F9,bookmarks:n,connectionProvider:u,impersonatedUser:o}),null]];case 4:return d=p.sent(),[2,this._handleRediscoveryError(d,t)];case 5:return[2]}})})},r.prototype._handleRediscoveryError=function(t,n){if(W9(t)||z9(t))throw t;if(t.code===R9)throw(0,Ke.newError)("Server at ".concat(n.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),yc,t);return this._log.warn("unable to fetch routing table because of an error ".concat(t)),[null,t]},r.prototype._applyRoutingTableIfPossible=function(t,n,o){return Te(this,void 0,void 0,function(){return Ce(this,function(i){switch(i.label){case 0:if(!n)throw(0,Ke.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(t),yc,o);return n.writers.length===0&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(n)];case 1:return i.sent(),[2,n]}})})},r.prototype._updateRoutingTable=function(t){return Te(this,void 0,void 0,function(){return Ce(this,function(n){switch(n.label){case 0:return[4,this._connectionPool.keepAll(t.allServers())];case 1:return n.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(t),this._log.info("Updated routing table ".concat(t)),[2]}})})},r._forgetRouter=function(t,n,o){var i=n[o];t&&i&&t.forgetRouter(i)},r.prototype._channelSsrCallback=function(t,n){if(n==="OPEN")t===!0?this._withSSR=this._withSSR+1:this._withoutSSR=this._withoutSSR+1;else if(n==="CLOSE")t===!0?this._withSSR=this._withSSR-1:this._withoutSSR=this._withoutSSR-1;else throw(0,Ke.newError)("Channel SSR Callback invoked with action other than 'OPEN' or 'CLOSE'")},r.prototype.SSREnabled=function(){return this._withSSR>0&&this._withoutSSR===0},r}(O9.default);J_.default=B9;var V9=function(){function e(r){this._tables=new Map,this._routingTablePurgeDelay=r}return e.prototype.register=function(r){return this._tables.set(r.database,r),this},e.prototype.apply=function(r,t){var n=t===void 0?{}:t,o=n.applyWhenExists,i=n.applyWhenDontExists,a=i===void 0?function(){}:i;return this._tables.has(r)?o(this._tables.get(r)):typeof r=="string"||r===null?a():this._forEach(o),this},e.prototype.get=function(r,t){return this._tables.has(r)?this._tables.get(r):typeof t=="function"?t():t},e.prototype.removeExpired=function(){var r=this;return this._removeIf(function(t){return t.isExpiredFor(r._routingTablePurgeDelay)})},e.prototype._forEach=function(r){var t,n;try{for(var o=Tv(this._tables),i=o.next();!i.done;i=o.next()){var a=cr(i.value,2),s=a[1];r(s)}}catch(c){t={error:c}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return this},e.prototype._remove=function(r){return this._tables.delete(r),this},e.prototype._removeIf=function(r){var t,n;try{for(var o=Tv(this._tables),i=o.next();!i.done;i=o.next()){var a=cr(i.value,2),s=a[0],c=a[1];r(c)&&this._remove(s)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return this},e}();function W9(e){return[j9,$9,N9,M9,D9,L9,U9].includes(e.code)}function z9(e){return e.code.startsWith("Neo.ClientError.Security.")&&![k9].includes(e.code)}(function(e){var r=f&&f.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingConnectionProvider=e.DirectConnectionProvider=e.PooledConnectionProvider=e.SingleConnectionProvider=void 0;var t=bd;Object.defineProperty(e,"SingleConnectionProvider",{enumerable:!0,get:function(){return r(t).default}});var n=qs;Object.defineProperty(e,"PooledConnectionProvider",{enumerable:!0,get:function(){return r(n).default}});var o=X_;Object.defineProperty(e,"DirectConnectionProvider",{enumerable:!0,get:function(){return r(o).default}});var i=J_;Object.defineProperty(e,"RoutingConnectionProvider",{enumerable:!0,get:function(){return r(i).default}})})(PE);(function(e){var r=f&&f.__createBinding||(Object.create?function(i,a,s,c){c===void 0&&(c=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(i,c,u)}:function(i,a,s,c){c===void 0&&(c=s),i[c]=a[s]}),t=f&&f.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),n=f&&f.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var s in i)s!=="default"&&Object.prototype.hasOwnProperty.call(i,s)&&r(a,i,s);return t(a,i),a},o=f&&f.__exportStar||function(i,a){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&r(a,i,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.packstream=e.channel=e.buf=e.bolt=e.loadBalancing=void 0,e.loadBalancing=n(Hr),e.bolt=n(w_),e.buf=n(oo),e.channel=n(no),e.packstream=n(et),o(PE,e)})(XO);(function(e){var r=f&&f.__awaiter||function(ee,be,Y,k){function P(C){return C instanceof Y?C:new Y(function(R){R(C)})}return new(Y||(Y=Promise))(function(C,R){function V(te){try{F(k.next(te))}catch(Z){R(Z)}}function q(te){try{F(k.throw(te))}catch(Z){R(Z)}}function F(te){te.done?C(te.value):P(te.value).then(V,q)}F((k=k.apply(ee,be||[])).next())})},t=f&&f.__generator||function(ee,be){var Y={label:0,sent:function(){if(C[0]&1)throw C[1];return C[1]},trys:[],ops:[]},k,P,C,R;return R={next:V(0),throw:V(1),return:V(2)},typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function V(F){return function(te){return q([F,te])}}function q(F){if(k)throw new TypeError("Generator is already executing.");for(;R&&(R=0,F[0]&&(Y=0)),Y;)try{if(k=1,P&&(C=F[0]&2?P.return:F[0]?P.throw||((C=P.return)&&C.call(P),0):P.next)&&!(C=C.call(P,F[1])).done)return C;switch(P=0,C&&(F=[F[0]&2,C.value]),F[0]){case 0:case 1:C=F;break;case 4:return Y.label++,{value:F[1],done:!1};case 5:Y.label++,P=F[1],F=[0];continue;case 7:F=Y.ops.pop(),Y.trys.pop();continue;default:if(C=Y.trys,!(C=C.length>0&&C[C.length-1])&&(F[0]===6||F[0]===2)){Y=0;continue}if(F[0]===3&&(!C||F[1]>C[0]&&F[1]<C[3])){Y.label=F[1];break}if(F[0]===6&&Y.label<C[1]){Y.label=C[1],C=F;break}if(C&&Y.label<C[2]){Y.label=C[2],Y.ops.push(F);break}C[2]&&Y.ops.pop(),Y.trys.pop();continue}F=be.call(ee,Y)}catch(te){F=[6,te],P=0}finally{k=C=0}if(F[0]&5)throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}},n=f&&f.__importDefault||function(ee){return ee&&ee.__esModule?ee:{default:ee}};Object.defineProperty(e,"__esModule",{value:!0}),e.UnboundRelationship=e.Relationship=e.Node=e.Record=e.ServerInfo=e.GqlStatusObject=e.Notification=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ResultSummary=e.RxResult=e.RxManagedTransaction=e.RxTransaction=e.RxSession=e.EagerResult=e.Result=e.ManagedTransaction=e.Transaction=e.Session=e.Driver=e.temporal=e.spatial=e.graph=e.error=e.routing=e.session=e.types=e.logging=e.auth=e.isRetryableError=e.Neo4jError=e.integer=e.isUnboundRelationship=e.isRelationship=e.isPathSegment=e.isPath=e.isNode=e.isDateTime=e.isLocalDateTime=e.isDate=e.isTime=e.isLocalTime=e.isDuration=e.isPoint=e.isInt=e.int=e.hasReachableServer=e.driver=e.authTokenManagers=void 0,e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.bookmarkManager=e.DateTime=e.LocalDateTime=e.Date=e.Time=e.LocalTime=e.Duration=e.Integer=e.Point=e.PathSegment=e.Path=void 0;var o=hr;Object.defineProperty(e,"Driver",{enumerable:!0,get:function(){return o.Driver}});var i=n(b_),a=G;Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return a.authTokenManagers}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return a.Neo4jError}}),Object.defineProperty(e,"isRetryableError",{enumerable:!0,get:function(){return a.isRetryableError}}),Object.defineProperty(e,"error",{enumerable:!0,get:function(){return a.error}}),Object.defineProperty(e,"Integer",{enumerable:!0,get:function(){return a.Integer}}),Object.defineProperty(e,"int",{enumerable:!0,get:function(){return a.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return a.isInt}}),Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return a.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return a.Point}}),Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return a.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return a.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return a.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return a.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return a.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return a.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return a.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return a.isLocalTime}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return a.isNode}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return a.isPath}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return a.isPathSegment}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return a.isRelationship}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return a.isTime}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return a.isUnboundRelationship}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return a.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return a.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return a.Time}}),Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return a.Node}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return a.Path}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return a.PathSegment}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return a.Relationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return a.UnboundRelationship}}),Object.defineProperty(e,"Record",{enumerable:!0,get:function(){return a.Record}}),Object.defineProperty(e,"ResultSummary",{enumerable:!0,get:function(){return a.ResultSummary}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return a.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return a.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return a.QueryStatistics}}),Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return a.Notification}}),Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return a.GqlStatusObject}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return a.ServerInfo}}),Object.defineProperty(e,"Result",{enumerable:!0,get:function(){return a.Result}}),Object.defineProperty(e,"EagerResult",{enumerable:!0,get:function(){return a.EagerResult}}),Object.defineProperty(e,"auth",{enumerable:!0,get:function(){return a.auth}}),Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return a.Session}}),Object.defineProperty(e,"Transaction",{enumerable:!0,get:function(){return a.Transaction}}),Object.defineProperty(e,"ManagedTransaction",{enumerable:!0,get:function(){return a.ManagedTransaction}}),Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return a.bookmarkManager}}),Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return a.routing}}),Object.defineProperty(e,"resultTransformers",{enumerable:!0,get:function(){return a.resultTransformers}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return a.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return a.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return a.notificationSeverityLevel}}),Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return a.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return a.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return a.notificationFilterMinimumSeverityLevel}}),Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return a.clientCertificateProviders}});var s=XO,c=n(Nl);e.RxSession=c.default;var u=n(Fs);e.RxTransaction=u.default;var l=n(_f);e.RxManagedTransaction=l.default;var d=n(Ei);e.RxResult=d.default;var h=a.internal.util,p=h.ENCRYPTION_ON,v=h.assertString,_=h.isEmptyObjectOrNull,b=a.internal.serverAddress.ServerAddress,w=a.internal.urlUtil,E="neo4j-javascript/"+i.default;function S(ee){return typeof ee=="object"&&ee!=null&&"getToken"in ee&&"handleSecurityException"in ee&&typeof ee.getToken=="function"&&typeof ee.handleSecurityException=="function"}function O(ee){if(S(ee))return ee;var be=ee;return be=be||{},be.scheme=be.scheme||"none",(0,a.staticAuthTokenManager)({authToken:be})}function A(ee,be,Y){Y===void 0&&(Y={}),v(ee,"Bolt URL");var k=w.parseDatabaseUrl(ee),P=!1,C=!1,R;switch(k.scheme){case"bolt":break;case"bolt+s":C=!0,R="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":C=!0,R="TRUST_ALL_CERTIFICATES";break;case"neo4j":P=!0;break;case"neo4j+s":C=!0,R="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",P=!0;break;case"neo4j+ssc":C=!0,R="TRUST_ALL_CERTIFICATES",P=!0;break;default:throw new Error("Unknown scheme: ".concat(k.scheme))}if(C){if("encrypted"in Y||"trust"in Y)throw new Error("Encryption/trust can only be configured either through URL or config, not both");Y.encrypted=p,Y.trust=R,Y.clientCertificate=(0,a.resolveCertificateProvider)(Y.clientCertificate)}var V=O(be);Y.userAgent=Y.userAgent||E,Y.boltAgent=a.internal.boltAgent.fromVersion(i.default);var q=b.fromUrl(k.hostAndPort),F={address:q,typename:P?"Routing":"Direct",routing:P};return new o.Driver(F,Y,te());function te(){if(P)return function(Z,ue,y,T){return new s.RoutingConnectionProvider({id:Z,config:ue,log:y,hostNameResolver:T,authTokenManager:V,address:q,userAgent:ue.userAgent,boltAgent:ue.boltAgent,routingContext:k.query})};if(!_(k.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(ee,"'"));return function(Z,ue,y){return new s.DirectConnectionProvider({id:Z,config:ue,log:y,authTokenManager:V,address:q,userAgent:ue.userAgent,boltAgent:ue.boltAgent})}}}e.driver=A;function $(ee,be){return r(this,void 0,void 0,function(){var Y;return t(this,function(k){switch(k.label){case 0:Y=A(ee,{scheme:"none",principal:"",credentials:""},be),k.label=1;case 1:return k.trys.push([1,,3,5]),[4,Y.getNegotiatedProtocolVersion()];case 2:return k.sent(),[2,!0];case 3:return[4,Y.close()];case 4:return k.sent(),[7];case 5:return[2]}})})}e.hasReachableServer=$;var I={console:function(ee){return{level:ee,logger:function(be,Y){return console.log("".concat(f.Date.now()," ").concat(be.toUpperCase()," ").concat(Y))}}}};e.logging=I;var L={Node:a.Node,Relationship:a.Relationship,UnboundRelationship:a.UnboundRelationship,PathSegment:a.PathSegment,Path:a.Path,Result:a.Result,EagerResult:a.EagerResult,ResultSummary:a.ResultSummary,Record:a.Record,Point:a.Point,Date:a.Date,DateTime:a.DateTime,Duration:a.Duration,LocalDateTime:a.LocalDateTime,LocalTime:a.LocalTime,Time:a.Time,Integer:a.Integer};e.types=L;var X={READ:o.READ,WRITE:o.WRITE};e.session=X;var ae={toNumber:a.toNumber,toString:a.toString,inSafeRange:a.inSafeRange};e.integer=ae;var _e={isPoint:a.isPoint};e.spatial=_e;var ne={isDuration:a.isDuration,isLocalTime:a.isLocalTime,isTime:a.isTime,isDate:a.isDate,isLocalDateTime:a.isLocalDateTime,isDateTime:a.isDateTime};e.temporal=ne;var ve={isNode:a.isNode,isPath:a.isPath,isPathSegment:a.isPathSegment,isRelationship:a.isRelationship,isUnboundRelationship:a.isUnboundRelationship};e.graph=ve;var it={authTokenManagers:a.authTokenManagers,driver:A,hasReachableServer:$,int:a.int,isInt:a.isInt,isPoint:a.isPoint,isDuration:a.isDuration,isLocalTime:a.isLocalTime,isTime:a.isTime,isDate:a.isDate,isLocalDateTime:a.isLocalDateTime,isDateTime:a.isDateTime,isNode:a.isNode,isPath:a.isPath,isPathSegment:a.isPathSegment,isRelationship:a.isRelationship,isUnboundRelationship:a.isUnboundRelationship,integer:ae,Neo4jError:a.Neo4jError,isRetryableError:a.isRetryableError,auth:a.auth,logging:I,types:L,session:X,routing:a.routing,error:a.error,graph:ve,spatial:_e,temporal:ne,Driver:o.Driver,Session:a.Session,Transaction:a.Transaction,ManagedTransaction:a.ManagedTransaction,Result:a.Result,EagerResult:a.EagerResult,RxSession:c.default,RxTransaction:u.default,RxManagedTransaction:l.default,RxResult:d.default,ResultSummary:a.ResultSummary,Plan:a.Plan,ProfiledPlan:a.ProfiledPlan,QueryStatistics:a.QueryStatistics,Notification:a.Notification,GqlStatusObject:a.GqlStatusObject,ServerInfo:a.ServerInfo,Record:a.Record,Node:a.Node,Relationship:a.Relationship,UnboundRelationship:a.UnboundRelationship,Path:a.Path,PathSegment:a.PathSegment,Point:a.Point,Integer:a.Integer,Duration:a.Duration,LocalTime:a.LocalTime,Time:a.Time,Date:a.Date,LocalDateTime:a.LocalDateTime,DateTime:a.DateTime,bookmarkManager:a.bookmarkManager,resultTransformers:a.resultTransformers,notificationCategory:a.notificationCategory,notificationSeverityLevel:a.notificationSeverityLevel,notificationFilterDisabledCategory:a.notificationFilterDisabledCategory,notificationFilterMinimumSeverityLevel:a.notificationFilterMinimumSeverityLevel,clientCertificateProviders:a.clientCertificateProviders};e.default=it})(W0);const Ng=bl(W0);function $r(e=0){return new Uint8Array(e)}function Yr(e=0){return new Uint8Array(e)}const q9=Math.pow(2,7),H9=Math.pow(2,14),G9=Math.pow(2,21),ry=Math.pow(2,28),ny=Math.pow(2,35),oy=Math.pow(2,42),iy=Math.pow(2,49),he=128,Ye=127;function rr(e){if(e<q9)return 1;if(e<H9)return 2;if(e<G9)return 3;if(e<ry)return 4;if(e<ny)return 5;if(e<oy)return 6;if(e<iy)return 7;if(Number.MAX_SAFE_INTEGER!=null&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function LE(e,r,t=0){switch(rr(e)){case 8:r[t++]=e&255|he,e/=128;case 7:r[t++]=e&255|he,e/=128;case 6:r[t++]=e&255|he,e/=128;case 5:r[t++]=e&255|he,e/=128;case 4:r[t++]=e&255|he,e>>>=7;case 3:r[t++]=e&255|he,e>>>=7;case 2:r[t++]=e&255|he,e>>>=7;case 1:{r[t++]=e&255,e>>>=7;break}default:throw new Error("unreachable")}return r}function K9(e,r,t=0){switch(rr(e)){case 8:r.set(t++,e&255|he),e/=128;case 7:r.set(t++,e&255|he),e/=128;case 6:r.set(t++,e&255|he),e/=128;case 5:r.set(t++,e&255|he),e/=128;case 4:r.set(t++,e&255|he),e>>>=7;case 3:r.set(t++,e&255|he),e>>>=7;case 2:r.set(t++,e&255|he),e>>>=7;case 1:{r.set(t++,e&255),e>>>=7;break}default:throw new Error("unreachable")}return r}function UE(e,r){let t=e[r],n=0;if(n+=t&Ye,t<he||(t=e[r+1],n+=(t&Ye)<<7,t<he)||(t=e[r+2],n+=(t&Ye)<<14,t<he)||(t=e[r+3],n+=(t&Ye)<<21,t<he)||(t=e[r+4],n+=(t&Ye)*ry,t<he)||(t=e[r+5],n+=(t&Ye)*ny,t<he)||(t=e[r+6],n+=(t&Ye)*oy,t<he)||(t=e[r+7],n+=(t&Ye)*iy,t<he))return n;throw new RangeError("Could not decode varint")}function Y9(e,r){let t=e.get(r),n=0;if(n+=t&Ye,t<he||(t=e.get(r+1),n+=(t&Ye)<<7,t<he)||(t=e.get(r+2),n+=(t&Ye)<<14,t<he)||(t=e.get(r+3),n+=(t&Ye)<<21,t<he)||(t=e.get(r+4),n+=(t&Ye)*ry,t<he)||(t=e.get(r+5),n+=(t&Ye)*ny,t<he)||(t=e.get(r+6),n+=(t&Ye)*oy,t<he)||(t=e.get(r+7),n+=(t&Ye)*iy,t<he))return n;throw new RangeError("Could not decode varint")}function wd(e,r,t=0){return r==null&&(r=Yr(rr(e))),r instanceof Uint8Array?LE(e,r,t):K9(e,r,t)}function Ks(e,r=0){return e instanceof Uint8Array?UE(e,r):Y9(e,r)}function mr(e,r){r==null&&(r=e.reduce((o,i)=>o+i.length,0));const t=Yr(r);let n=0;for(const o of e)t.set(o,n),n+=o.length;return t}const Z9=new Uint8Array(0);function uoe(e){const r=e.match(/../g);return r!=null?new Uint8Array(r.map(t=>parseInt(t,16))):Z9}function Q9(e,r){if(e===r)return!0;if(e.byteLength!==r.byteLength)return!1;for(let t=0;t<e.byteLength;t++)if(e[t]!==r[t])return!1;return!0}function Ii(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function X9(e){return new TextEncoder().encode(e)}function J9(e){return new TextDecoder().decode(e)}function eG(e,r){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),a=i.charCodeAt(0);if(t[a]!==255)throw new TypeError(i+" is ambiguous");t[a]=o}var s=e.length,c=e.charAt(0),u=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function d(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var _=0,b=0,w=0,E=v.length;w!==E&&v[w]===0;)w++,_++;for(var S=(E-w)*l+1>>>0,O=new Uint8Array(S);w!==E;){for(var A=v[w],$=0,I=S-1;(A!==0||$<b)&&I!==-1;I--,$++)A+=256*O[I]>>>0,O[I]=A%s>>>0,A=A/s>>>0;if(A!==0)throw new Error("Non-zero carry");b=$,w++}for(var L=S-b;L!==S&&O[L]===0;)L++;for(var X=c.repeat(_);L<S;++L)X+=e.charAt(O[L]);return X}function h(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var _=0;if(v[_]!==" "){for(var b=0,w=0;v[_]===c;)b++,_++;for(var E=(v.length-_)*u+1>>>0,S=new Uint8Array(E);v[_];){var O=t[v.charCodeAt(_)];if(O===255)return;for(var A=0,$=E-1;(O!==0||A<w)&&$!==-1;$--,A++)O+=s*S[$]>>>0,S[$]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");w=A,_++}if(v[_]!==" "){for(var I=E-w;I!==E&&S[I]===0;)I++;for(var L=new Uint8Array(b+(E-I)),X=b;I!==E;)L[X++]=S[I++];return L}}}function p(v){var _=h(v);if(_)return _;throw new Error(`Non-${r} character`)}return{encode:d,decodeUnsafe:h,decode:p}}var tG=eG,rG=tG;let nG=class{constructor(r,t,n){m(this,"name");m(this,"prefix");m(this,"baseEncode");this.name=r,this.prefix=t,this.baseEncode=n}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}},oG=class{constructor(r,t,n){m(this,"name");m(this,"prefix");m(this,"baseDecode");m(this,"prefixCodePoint");this.name=r,this.prefix=t;const o=t.codePointAt(0);if(o===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=o,this.baseDecode=n}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return FE(this,r)}},iG=class{constructor(r){m(this,"decoders");this.decoders=r}or(r){return FE(this,r)}decode(r){const t=r[0],n=this.decoders[t];if(n!=null)return n.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function FE(e,r){return new iG({...e.decoders??{[e.prefix]:e},...r.decoders??{[r.prefix]:r}})}let aG=class{constructor(r,t,n,o){m(this,"name");m(this,"prefix");m(this,"baseEncode");m(this,"baseDecode");m(this,"encoder");m(this,"decoder");this.name=r,this.prefix=t,this.baseEncode=n,this.baseDecode=o,this.encoder=new nG(r,t,n),this.decoder=new oG(r,t,o)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}};function Od({name:e,prefix:r,encode:t,decode:n}){return new aG(e,r,t,n)}function Ys({name:e,prefix:r,alphabet:t}){const{encode:n,decode:o}=rG(t,e);return Od({prefix:r,name:e,encode:n,decode:i=>Ii(o(i))})}function uG(e,r,t,n){let o=e.length;for(;e[o-1]==="=";)--o;const i=new Uint8Array(o*t/8|0);let a=0,s=0,c=0;for(let u=0;u<o;++u){const l=r[e[u]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);s=s<<t|l,a+=t,a>=8&&(a-=8,i[c++]=255&s>>a)}if(a>=t||255&s<<8-a)throw new SyntaxError("Unexpected end of data");return i}function sG(e,r,t){const n=r[r.length-1]==="=",o=(1<<t)-1;let i="",a=0,s=0;for(let c=0;c<e.length;++c)for(s=s<<8|e[c],a+=8;a>t;)a-=t,i+=r[o&s>>a];if(a!==0&&(i+=r[o&s<<t-a]),n)for(;i.length*t&7;)i+="=";return i}function cG(e){const r={};for(let t=0;t<e.length;++t)r[e[t]]=t;return r}function qe({name:e,prefix:r,bitsPerChar:t,alphabet:n}){const o=cG(n);return Od({prefix:r,name:e,encode(i){return sG(i,n,t)},decode(i){return uG(i,o,t,e)}})}const lG=Ys({prefix:"9",name:"base10",alphabet:"0123456789"}),fG=Object.freeze(Object.defineProperty({__proto__:null,base10:lG},Symbol.toStringTag,{value:"Module"})),dG=qe({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),hG=qe({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),pG=Object.freeze(Object.defineProperty({__proto__:null,base16:dG,base16upper:hG},Symbol.toStringTag,{value:"Module"})),vG=qe({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),_G=Object.freeze(Object.defineProperty({__proto__:null,base2:vG},Symbol.toStringTag,{value:"Module"})),xE=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),yG=xE.reduce((e,r,t)=>(e[t]=r,e),[]),bG=xE.reduce((e,r,t)=>{const n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);return e[n]=t,e},[]);function mG(e){return e.reduce((r,t)=>(r+=yG[t],r),"")}function gG(e){const r=[];for(const t of e){const n=t.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${t}`);const o=bG[n];if(o==null)throw new Error(`Non-base256emoji character: ${t}`);r.push(o)}return new Uint8Array(r)}const wG=Od({prefix:"🚀",name:"base256emoji",encode:mG,decode:gG}),OG=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:wG},Symbol.toStringTag,{value:"Module"})),Fr=qe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),EG=qe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),SG=qe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),PG=qe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),TG=qe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),CG=qe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),AG=qe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),IG=qe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),RG=qe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),jG=Object.freeze(Object.defineProperty({__proto__:null,base32:Fr,base32hex:TG,base32hexpad:AG,base32hexpadupper:IG,base32hexupper:CG,base32pad:SG,base32padupper:PG,base32upper:EG,base32z:RG},Symbol.toStringTag,{value:"Module"})),$c=Ys({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),$G=Ys({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),NG=Object.freeze(Object.defineProperty({__proto__:null,base36:$c,base36upper:$G},Symbol.toStringTag,{value:"Module"})),De=Ys({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),kG=Ys({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),MG=Object.freeze(Object.defineProperty({__proto__:null,base58btc:De,base58flickr:kG},Symbol.toStringTag,{value:"Module"})),Ed=qe({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),DG=qe({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Sd=qe({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),LG=qe({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),UG=Object.freeze(Object.defineProperty({__proto__:null,base64:Ed,base64pad:DG,base64url:Sd,base64urlpad:LG},Symbol.toStringTag,{value:"Module"})),FG=qe({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),xG=Object.freeze(Object.defineProperty({__proto__:null,base8:FG},Symbol.toStringTag,{value:"Module"})),BG=Od({prefix:"\0",name:"identity",encode:e=>J9(e),decode:e=>X9(e)}),VG=Object.freeze(Object.defineProperty({__proto__:null,identity:BG},Symbol.toStringTag,{value:"Module"})),WG=new TextEncoder,zG=new TextDecoder,qG="json",HG=512;function GG(e){return WG.encode(JSON.stringify(e))}function KG(e){return JSON.parse(zG.decode(e))}const YG=Object.freeze(Object.defineProperty({__proto__:null,code:HG,decode:KG,encode:GG,name:qG},Symbol.toStringTag,{value:"Module"})),ZG="raw",QG=85;function XG(e){return Ii(e)}function JG(e){return Ii(e)}const eK=Object.freeze(Object.defineProperty({__proto__:null,code:QG,decode:JG,encode:XG,name:ZG},Symbol.toStringTag,{value:"Module"}));var tK=BE,kg=128,rK=-128,nK=Math.pow(2,31);function BE(e,r,t){r=r||[],t=t||0;for(var n=t;e>=nK;)r[t++]=e&255|kg,e/=128;for(;e&rK;)r[t++]=e&255|kg,e>>>=7;return r[t]=e|0,BE.bytes=t-n+1,r}var oK=Cv,iK=128,Mg=127;function Cv(e,n){var t=0,n=n||0,o=0,i=n,a,s=e.length;do{if(i>=s)throw Cv.bytes=0,new RangeError("Could not decode varint");a=e[i++],t+=o<28?(a&Mg)<<o:(a&Mg)*Math.pow(2,o),o+=7}while(a>=iK);return Cv.bytes=i-n,t}var aK=Math.pow(2,7),uK=Math.pow(2,14),sK=Math.pow(2,21),cK=Math.pow(2,28),lK=Math.pow(2,35),fK=Math.pow(2,42),dK=Math.pow(2,49),hK=Math.pow(2,56),pK=Math.pow(2,63),vK=function(e){return e<aK?1:e<uK?2:e<sK?3:e<cK?4:e<lK?5:e<fK?6:e<dK?7:e<hK?8:e<pK?9:10},_K={encode:tK,decode:oK,encodingLength:vK},el=_K;function Av(e,r=0){return[el.decode(e,r),el.decode.bytes]}function tl(e,r,t=0){return el.encode(e,r,t),r}function rl(e){return el.encodingLength(e)}function Aa(e,r){const t=r.byteLength,n=rl(e),o=n+rl(t),i=new Uint8Array(o+t);return tl(e,i,0),tl(t,i,n),i.set(r,o),new uy(e,t,r,i)}function ay(e){const r=Ii(e),[t,n]=Av(r),[o,i]=Av(r.subarray(n)),a=r.subarray(n+i);if(a.byteLength!==o)throw new Error("Incorrect length");return new uy(t,o,a,r)}function yK(e,r){if(e===r)return!0;{const t=r;return e.code===t.code&&e.size===t.size&&t.bytes instanceof Uint8Array&&Q9(e.bytes,t.bytes)}}let uy=class{constructor(r,t,n,o){m(this,"code");m(this,"size");m(this,"digest");m(this,"bytes");this.code=r,this.size=t,this.digest=n,this.bytes=o}};const VE=0,bK="identity",WE=Ii;function mK(e){return Aa(VE,WE(e))}const Zr={code:VE,name:bK,encode:WE,digest:mK},gK=Object.freeze(Object.defineProperty({__proto__:null,identity:Zr},Symbol.toStringTag,{value:"Module"}));function zE({name:e,code:r,encode:t}){return new wK(e,r,t)}class wK{constructor(r,t,n){m(this,"name");m(this,"code");m(this,"encode");this.name=r,this.code=t,this.encode=n}digest(r){if(r instanceof Uint8Array){const t=this.encode(r);return t instanceof Uint8Array?Aa(this.code,t):t.then(n=>Aa(this.code,n))}else throw Error("Unknown type, must be binary type")}}function qE(e){return async r=>new Uint8Array(await crypto.subtle.digest(e,r))}const sy=zE({name:"sha2-256",code:18,encode:qE("SHA-256")}),OK=zE({name:"sha2-512",code:19,encode:qE("SHA-512")}),EK=Object.freeze(Object.defineProperty({__proto__:null,sha256:sy,sha512:OK},Symbol.toStringTag,{value:"Module"}));function Dg(e,r){const{bytes:t,version:n}=e;switch(n){case 0:return PK(t,Iv(e),r??De.encoder);default:return TK(t,Iv(e),r??Fr.encoder)}}const Lg=new WeakMap;function Iv(e){const r=Lg.get(e);if(r==null){const t=new Map;return Lg.set(e,t),t}return r}var k0;let Q=class Ge{constructor(r,t,n,o){m(this,"code");m(this,"version");m(this,"multihash");m(this,"bytes");m(this,"/");m(this,k0,"CID");this.code=t,this.version=r,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:r,multihash:t}=this;if(r!==ta)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==CK)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ge.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:r,digest:t}=this.multihash,n=Aa(r,t);return Ge.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(r){return Ge.equals(this,r)}static equals(r,t){const n=t;return n!=null&&r.code===n.code&&r.version===n.version&&yK(r.multihash,n.multihash)}toString(r){return Dg(this,r)}toJSON(){return{"/":Dg(this)}}link(){return this}[(k0=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(r){if(r==null)return null;const t=r;if(t instanceof Ge)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){const{version:n,code:o,multihash:i,bytes:a}=t;return new Ge(n,o,i,a??Ug(n,o,i.bytes))}else if(t[AK]===!0){const{version:n,multihash:o,code:i}=t,a=ay(o);return Ge.create(n,i,a)}else return null}static create(r,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(r){case 0:{if(t!==ta)throw new Error(`Version 0 CID must use dag-pb (code: ${ta}) block encoding`);return new Ge(r,t,n,n.bytes)}case 1:{const o=Ug(r,t,n.bytes);return new Ge(r,t,n,o)}default:throw new Error("Invalid version")}}static createV0(r){return Ge.create(0,ta,r)}static createV1(r,t){return Ge.create(1,r,t)}static decode(r){const[t,n]=Ge.decodeFirst(r);if(n.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(r){const t=Ge.inspectBytes(r),n=t.size-t.multihashSize,o=Ii(r.subarray(n,n+t.multihashSize));if(o.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=o.subarray(t.multihashSize-t.digestSize),a=new uy(t.multihashCode,t.digestSize,i,o);return[t.version===0?Ge.createV0(a):Ge.createV1(t.codec,a),r.subarray(t.size)]}static inspectBytes(r){let t=0;const n=()=>{const[d,h]=Av(r.subarray(t));return t+=h,d};let o=n(),i=ta;if(o===18?(o=0,t=0):i=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const a=t,s=n(),c=n(),u=t+c,l=u-a;return{version:o,codec:i,multihashCode:s,digestSize:c,multihashSize:l,size:u}}static parse(r,t){const[n,o]=SK(r,t),i=Ge.decode(o);if(i.version===0&&r[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Iv(i).set(n,r),i}};function SK(e,r){switch(e[0]){case"Q":{const t=r??De;return[De.prefix,t.decode(`${De.prefix}${e}`)]}case De.prefix:{const t=r??De;return[De.prefix,t.decode(e)]}case Fr.prefix:{const t=r??Fr;return[Fr.prefix,t.decode(e)]}case $c.prefix:{const t=r??$c;return[$c.prefix,t.decode(e)]}default:{if(r==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[e[0],r.decode(e)]}}}function PK(e,r,t){const{prefix:n}=t;if(n!==De.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const o=r.get(n);if(o==null){const i=t.encode(e).slice(1);return r.set(n,i),i}else return o}function TK(e,r,t){const{prefix:n}=t,o=r.get(n);if(o==null){const i=t.encode(e);return r.set(n,i),i}else return o}const ta=112,CK=18;function Ug(e,r,t){const n=rl(e),o=n+rl(r),i=new Uint8Array(o+t.byteLength);return tl(e,i,0),tl(r,i,n),i.set(t,o),i}const AK=Symbol.for("@ipld/js-cid/CID"),nl={...VG,..._G,...xG,...fG,...pG,...jG,...NG,...MG,...UG,...OG},IK={...EK,...gK},RK={raw:eK,json:YG};function HE(e,r,t,n){return{name:e,prefix:r,encoder:{name:e,prefix:r,encode:t},decoder:{decode:n}}}const Fg=HE("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Cp=HE("ascii","a",e=>{let r="a";for(let t=0;t<e.length;t++)r+=String.fromCharCode(e[t]);return r},e=>{e=e.substring(1);const r=Yr(e.length);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return r}),GE={utf8:Fg,"utf-8":Fg,hex:nl.base16,latin1:Cp,ascii:Cp,binary:Cp,...nl};function we(e,r="utf8"){const t=GE[r];if(t==null)throw new Error(`Unsupported encoding "${r}"`);return t.encoder.encode(e).substring(1)}class jK{constructor(){m(this,"index",0);m(this,"input","")}new(r){return this.index=0,this.input=r,this}readAtomically(r){const t=this.index,n=r();return n===void 0&&(this.index=t),n}parseWith(r){const t=r();if(this.index===this.input.length)return t}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(r){return this.readAtomically(()=>{const t=this.readChar();if(t===r)return t})}readSeparator(r,t,n){return this.readAtomically(()=>{if(!(t>0&&this.readGivenChar(r)===void 0))return n()})}readNumber(r,t,n,o){return this.readAtomically(()=>{let i=0,a=0;const s=this.peekChar();if(s===void 0)return;const c=s==="0",u=2**(8*o)-1;for(;;){const l=this.readAtomically(()=>{const d=this.readChar();if(d===void 0)return;const h=Number.parseInt(d,r);if(!Number.isNaN(h))return h});if(l===void 0)break;if(i*=r,i+=l,i>u||(a+=1,t!==void 0&&a>t))return}if(a!==0)return!n&&c&&a>1?void 0:i})}readIPv4Addr(){return this.readAtomically(()=>{const r=new Uint8Array(4);for(let t=0;t<r.length;t++){const n=this.readSeparator(".",t,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;r[t]=n}return r})}readIPv6Addr(){const r=t=>{for(let n=0;n<t.length/2;n++){const o=n*2;if(n<t.length-3){const a=this.readSeparator(":",n,()=>this.readIPv4Addr());if(a!==void 0)return t[o]=a[0],t[o+1]=a[1],t[o+2]=a[2],t[o+3]=a[3],[o+4,!0]}const i=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(i===void 0)return[o,!1];t[o]=i>>8,t[o+1]=i&255}return[t.length,!1]};return this.readAtomically(()=>{const t=new Uint8Array(16),[n,o]=r(t);if(n===16)return t;if(o||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const i=new Uint8Array(14),a=16-(n+2),[s]=r(i.subarray(0,a));return t.set(i.subarray(0,s),16-s),t})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const KE=45,$K=15,Bo=new jK;function NK(e){if(!(e.length>$K))return Bo.new(e).parseWith(()=>Bo.readIPv4Addr())}function kK(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>KE))return Bo.new(e).parseWith(()=>Bo.readIPv6Addr())}function MK(e,r=!1){if(e.includes("%")&&(e=e.split("%")[0]),e.length>KE)return;const t=Bo.new(e).parseWith(()=>Bo.readIPAddr());if(t)return r&&t.length===4?Uint8Array.from([0,0,0,0,0,0,0,0,0,0,255,255,t[0],t[1],t[2],t[3]]):t}function St(e,r="utf8"){const t=GE[r];if(t==null)throw new Error(`Unsupported encoding "${r}"`);return t.decoder.decode(`${t.prefix}${e}`)}function DK(e){return!!NK(e)}function LK(e){return!!kK(e)}function YE(e){return!!MK(e)}const xg=DK,UK=LK,ZE=function(e){let r=0;if(e=e.toString().trim(),xg(e)){const t=new Uint8Array(r+4);return e.split(/\./g).forEach(n=>{t[r++]=parseInt(n,10)&255}),t}if(UK(e)){const t=e.split(":",8);let n;for(n=0;n<t.length;n++){const i=xg(t[n]);let a;i&&(a=ZE(t[n]),t[n]=we(a.slice(0,2),"base16")),a!=null&&++n<8&&t.splice(n,0,we(a.slice(2,4),"base16"))}if(t[0]==="")for(;t.length<8;)t.unshift("0");else if(t[t.length-1]==="")for(;t.length<8;)t.push("0");else if(t.length<8){for(n=0;n<t.length&&t[n]!=="";n++);const i=[n,1];for(n=9-t.length;n>0;n--)i.push("0");t.splice.apply(t,i)}const o=new Uint8Array(r+16);for(n=0;n<t.length;n++){const i=parseInt(t[n],16);o[r++]=i>>8&255,o[r++]=i&255}return o}throw new Error("invalid ip address")},FK=function(e,r=0,t){r=~~r,t=t??e.length-r;const n=new DataView(e.buffer);if(t===4){const o=[];for(let i=0;i<t;i++)o.push(e[r+i]);return o.join(".")}if(t===16){const o=[];for(let i=0;i<t;i+=2)o.push(n.getUint16(r+i).toString(16));return o.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},lt=-1,Ia={},Rv={},xK=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,lt,"ip6zone"],[43,8,"ipcidr"],[53,lt,"dns",!0],[54,lt,"dns4",!0],[55,lt,"dns6",!0],[56,lt,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,lt,"unix",!1,!0],[421,lt,"ipfs"],[421,lt,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,lt,"garlic64"],[448,0,"tls"],[449,lt,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,lt,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[481,lt,"http-path"],[777,lt,"memory"]];xK.forEach(e=>{const r=BK(...e);Rv[r.code]=r,Ia[r.name]=r});function BK(e,r,t,n,o){return{code:e,size:r,name:t,resolvable:!!n,path:!!o}}function se(e){if(typeof e=="number"){if(Rv[e]!=null)return Rv[e];throw new Error(`no protocol with code: ${e}`)}else if(typeof e=="string"){if(Ia[e]!=null)return Ia[e];throw new Error(`no protocol with name: ${e}`)}throw new Error(`invalid protocol id type: ${typeof e}`)}se("ip4");se("ip6");se("ipcidr");function QE(e,r){switch(se(e).code){case 4:case 41:return WK(r);case 42:return Rp(r);case 43:return we(r,"base10");case 6:case 273:case 33:case 132:return XE(r).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Rp(r);case 421:return GK(r);case 444:return Wg(r);case 445:return Wg(r);case 466:return HK(r);case 481:return globalThis.encodeURIComponent(Rp(r));default:return we(r,"base16")}}function Bg(e,r){switch(se(e).code){case 4:return Vg(r);case 41:return Vg(r);case 42:return Ip(r);case 43:return St(r,"base10");case 6:case 273:case 33:case 132:return cy(parseInt(r,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Ip(r);case 421:return zK(r);case 444:return KK(r);case 445:return YK(r);case 466:return qK(r);case 481:return Ip(globalThis.decodeURIComponent(r));default:return St(r,"base16")}}const Ap=Object.values(nl).map(e=>e.decoder),VK=function(){let e=Ap[0].or(Ap[1]);return Ap.slice(2).forEach(r=>e=e.or(r)),e}();function Vg(e){if(!YE(e))throw new Error("invalid ip address");return ZE(e)}function WK(e){const r=FK(e,0,e.length);if(r==null)throw new Error("ipBuff is required");if(!YE(r))throw new Error("invalid ip address");return r}function cy(e){const r=new ArrayBuffer(2);return new DataView(r).setUint16(0,e),new Uint8Array(r)}function XE(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function Ip(e){const r=St(e),t=Uint8Array.from(wd(r.length));return mr([t,r],t.length+r.length)}function Rp(e){const r=Ks(e);if(e=e.slice(rr(r)),e.length!==r)throw new Error("inconsistent lengths");return we(e)}function zK(e){let r;e[0]==="Q"||e[0]==="1"?r=ay(De.decode(`z${e}`)).bytes:r=Q.parse(e).multihash.bytes;const t=Uint8Array.from(wd(r.length));return mr([t,r],t.length+r.length)}function qK(e){const r=VK.decode(e),t=Uint8Array.from(wd(r.length));return mr([t,r],t.length+r.length)}function HK(e){const r=Ks(e),t=e.slice(rr(r));if(t.length!==r)throw new Error("inconsistent lengths");return"u"+we(t,"base64url")}function GK(e){const r=Ks(e),t=e.slice(rr(r));if(t.length!==r)throw new Error("inconsistent lengths");return we(t,"base58btc")}function KK(e){const r=e.split(":");if(r.length!==2)throw new Error(`failed to parse onion addr: ["'${r.join('", "')}'"]' does not contain a port number`);if(r[0].length!==16)throw new Error(`failed to parse onion addr: ${r[0]} not a Tor onion address.`);const t=Fr.decode("b"+r[0]),n=parseInt(r[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const o=cy(n);return mr([t,o],t.length+o.length)}function YK(e){const r=e.split(":");if(r.length!==2)throw new Error(`failed to parse onion addr: ["'${r.join('", "')}'"]' does not contain a port number`);if(r[0].length!==56)throw new Error(`failed to parse onion addr: ${r[0]} not a Tor onion3 address.`);const t=Fr.decode(`b${r[0]}`),n=parseInt(r[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const o=cy(n);return mr([t,o],t.length+o.length)}function Wg(e){const r=e.slice(0,e.length-2),t=e.slice(e.length-2),n=we(r,"base32"),o=XE(t);return`${n}:${o}`}function ZK(e){e=jv(e);const r=[],t=[];let n=null;const o=e.split("/").slice(1);if(o.length===1&&o[0]==="")return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let i=0;i<o.length;i++){const a=o[i],s=se(a);if(s.size===0){r.push([s.code]),t.push([s.code]);continue}if(i++,i>=o.length)throw new ly("invalid address: "+e);if(s.path===!0){n=jv(o.slice(i).join("/")),r.push([s.code,Bg(s.code,n)]),t.push([s.code,n]);break}const c=Bg(s.code,o[i]);r.push([s.code,c]),t.push([s.code,QE(s.code,c)])}return{string:JE(t),bytes:eS(r),tuples:r,stringTuples:t,path:n}}function zg(e){const r=[],t=[];let n=null,o=0;for(;o<e.length;){const i=Ks(e,o),a=rr(i),s=se(i),c=QK(s,e.slice(o+a));if(c===0){r.push([i]),t.push([i]),o+=a;continue}const u=e.slice(o+a,o+a+c);if(o+=c+a,o>e.length)throw new ly("Invalid address Uint8Array: "+we(e,"base16"));r.push([i,u]);const l=QE(i,u);if(t.push([i,l]),s.path===!0){n=l;break}}return{bytes:Uint8Array.from(e),string:JE(t),tuples:r,stringTuples:t,path:n}}function JE(e){const r=[];return e.map(t=>{const n=se(t[0]);return r.push(n.name),t.length>1&&t[1]!=null&&r.push(t[1]),null}),jv(r.join("/"))}function eS(e){return mr(e.map(r=>{const t=se(r[0]);let n=Uint8Array.from(wd(t.code));return r.length>1&&r[1]!=null&&(n=mr([n,r[1]])),n}))}function QK(e,r){if(e.size>0)return e.size/8;if(e.size===0)return 0;{const t=Ks(r instanceof Uint8Array?r:Uint8Array.from(r));return t+rr(t)}}function jv(e){return"/"+e.trim().split("/").filter(r=>r).join("/")}class ly extends Error{constructor(t){super(`Error parsing address: ${t}`);m(this,"name","ParseError")}}m(ly,"name","ParseError");function Qr(e,r){if(e===r)return!0;if(e.byteLength!==r.byteLength)return!1;for(let t=0;t<e.byteLength;t++)if(e[t]!==r[t])return!1;return!0}const XK=Symbol.for("nodejs.util.inspect.custom"),tS=Symbol.for("@multiformats/js-multiaddr/multiaddr"),JK=[se("dns").code,se("dns4").code,se("dns6").code,se("dnsaddr").code];class eY extends Error{constructor(r="No available resolver"){super(r),this.name="NoAvailableResolverError"}}var M0,$o,Dr,$a,Na;const To=class To{constructor(r){m(this,"bytes");xi(this,$o);xi(this,Dr);xi(this,$a);xi(this,Na);m(this,M0,!0);r==null&&(r="");let t;if(r instanceof Uint8Array)t=zg(r);else if(typeof r=="string"){if(r.length>0&&r.charAt(0)!=="/")throw new Error(`multiaddr "${r}" must start with a "/"`);t=ZK(r)}else if(ol(r))t=zg(r.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=t.bytes,Bi(this,$o,t.string),Bi(this,Dr,t.tuples),Bi(this,$a,t.stringTuples),Bi(this,Na,t.path)}toString(){return ir(this,$o)}toJSON(){return this.toString()}toOptions(){let r,t,n,o,i="";const a=se("tcp"),s=se("udp"),c=se("ip4"),u=se("ip6"),l=se("dns6"),d=se("ip6zone");for(const[p,v]of this.stringTuples())p===d.code&&(i=`%${v??""}`),JK.includes(p)&&(t=a.name==="tcp"?"tcp":"udp",o=443,n=`${v??""}${i}`,r=p===l.code?6:4),(p===a.code||p===s.code)&&(t=se(p).name==="tcp"?"tcp":"udp",o=parseInt(v??"")),(p===c.code||p===u.code)&&(t=se(p).name==="tcp"?"tcp":"udp",n=`${v??""}${i}`,r=p===u.code?6:4);if(r==null||t==null||n==null||o==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:r,host:n,transport:t,port:o}}protos(){return ir(this,Dr).map(([r])=>Object.assign({},se(r)))}protoCodes(){return ir(this,Dr).map(([r])=>r)}protoNames(){return ir(this,Dr).map(([r])=>se(r).name)}tuples(){return ir(this,Dr).map(([r,t])=>t==null?[r]:[r,t])}stringTuples(){return ir(this,$a).map(([r,t])=>t==null?[r]:[r,t])}encapsulate(r){return r=new To(r),new To(this.toString()+r.toString())}decapsulate(r){const t=r.toString(),n=this.toString(),o=n.lastIndexOf(t);if(o<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${r.toString()}`);return new To(n.slice(0,o))}decapsulateCode(r){const t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===r)return new To(eS(t.slice(0,n)));return this}getPeerId(){try{let r=[];this.stringTuples().forEach(([n,o])=>{n===Ia.p2p.code&&r.push([n,o]),n===Ia["p2p-circuit"].code&&(r=[])});const t=r.pop();if((t==null?void 0:t[1])!=null){const n=t[1];return n[0]==="Q"||n[0]==="1"?we(De.decode(`z${n}`),"base58btc"):we(Q.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){return ir(this,Na)}equals(r){return Qr(this.bytes,r.bytes)}async resolve(r){const t=this.protos().find(i=>i.resolvable);if(t==null)return[this];const n=tY.get(t.name);if(n==null)throw new eY(`no available resolver for ${t.name}`);return(await n(this,r)).map(i=>st(i))}nodeAddress(){const r=this.toOptions();if(r.transport!=="tcp"&&r.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${r.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:r.family,address:r.host,port:r.port}}isThinWaistAddress(r){const t=(r??this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}[(M0=tS,XK)](){return`Multiaddr(${ir(this,$o)})`}};$o=new WeakMap,Dr=new WeakMap,$a=new WeakMap,Na=new WeakMap;let $v=To;const tY=new Map;function ol(e){return!!(e!=null&&e[tS])}function st(e){return new $v(e)}const rY=["string","number","bigint","symbol"],nY=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function oY(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";const r=typeof e;if(rY.includes(r))return r;if(r==="function")return"Function";if(Array.isArray(e))return"Array";if(iY(e))return"Buffer";const t=aY(e);return t||"Object"}function iY(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function aY(e){const r=Object.prototype.toString.call(e).slice(8,-1);if(nY.includes(r))return r}class g{constructor(r,t,n){this.major=r,this.majorEncoded=r<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(r){return this.major<r.major?-1:this.major>r.major?1:0}}g.uint=new g(0,"uint",!0);g.negint=new g(1,"negint",!0);g.bytes=new g(2,"bytes",!0);g.string=new g(3,"string",!0);g.array=new g(4,"array",!1);g.map=new g(5,"map",!1);g.tag=new g(6,"tag",!1);g.float=new g(7,"float",!0);g.false=new g(7,"false",!0);g.true=new g(7,"true",!0);g.null=new g(7,"null",!0);g.undefined=new g(7,"undefined",!0);g.break=new g(7,"break",!0);class N{constructor(r,t,n){this.type=r,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const Ri=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",uY=new TextDecoder,sY=new TextEncoder;function il(e){return Ri&&globalThis.Buffer.isBuffer(e)}function fy(e){return e instanceof Uint8Array?il(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const cY=Ri?(e,r,t)=>t-r>64?globalThis.Buffer.from(e.subarray(r,t)).toString("utf8"):Hg(e,r,t):(e,r,t)=>t-r>64?uY.decode(e.subarray(r,t)):Hg(e,r,t),rS=Ri?e=>e.length>64?globalThis.Buffer.from(e):qg(e):e=>e.length>64?sY.encode(e):qg(e),ur=e=>Uint8Array.from(e),dy=Ri?(e,r,t)=>il(e)?new Uint8Array(e.subarray(r,t)):e.slice(r,t):(e,r,t)=>e.slice(r,t),lY=Ri?(e,r)=>(e=e.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),fy(globalThis.Buffer.concat(e,r))):(e,r)=>{const t=new Uint8Array(r);let n=0;for(let o of e)n+o.length>t.length&&(o=o.subarray(0,t.length-n)),t.set(o,n),n+=o.length;return t},fY=Ri?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function dY(e,r){if(il(e)&&il(r))return e.compare(r);for(let t=0;t<e.length;t++)if(e[t]!==r[t])return e[t]<r[t]?-1:1;return 0}function qg(e){const r=[];let t=0;for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);o<128?r[t++]=o:o<2048?(r[t++]=o>>6|192,r[t++]=o&63|128):(o&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++n)&1023),r[t++]=o>>18|240,r[t++]=o>>12&63|128,r[t++]=o>>6&63|128,r[t++]=o&63|128):(r[t++]=o>>12|224,r[t++]=o>>6&63|128,r[t++]=o&63|128)}return r}function Hg(e,r,t){const n=[];for(;r<t;){const o=e[r];let i=null,a=o>239?4:o>223?3:o>191?2:1;if(r+a<=t){let s,c,u,l;switch(a){case 1:o<128&&(i=o);break;case 2:s=e[r+1],(s&192)===128&&(l=(o&31)<<6|s&63,l>127&&(i=l));break;case 3:s=e[r+1],c=e[r+2],(s&192)===128&&(c&192)===128&&(l=(o&15)<<12|(s&63)<<6|c&63,l>2047&&(l<55296||l>57343)&&(i=l));break;case 4:s=e[r+1],c=e[r+2],u=e[r+3],(s&192)===128&&(c&192)===128&&(u&192)===128&&(l=(o&15)<<18|(s&63)<<12|(c&63)<<6|u&63,l>65535&&l<1114112&&(i=l))}}i===null?(i=65533,a=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|i&1023),n.push(i),r+=a}return nS(n)}const Gg=4096;function nS(e){const r=e.length;if(r<=Gg)return String.fromCharCode.apply(String,e);let t="",n=0;for(;n<r;)t+=String.fromCharCode.apply(String,e.slice(n,n+=Gg));return t}const hY=256;class oS{constructor(r=hY){this.chunkSize=r,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(r){let t=this.chunks[this.chunks.length-1];if(this.cursor+r.length<=this.maxCursor+1){const o=t.length-(this.maxCursor-this.cursor)-1;t.set(r,o)}else{if(t){const o=t.length-(this.maxCursor-this.cursor)-1;o<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,o),this.maxCursor=this.cursor-1)}r.length<64&&r.length<this.chunkSize?(t=fY(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(r,0)):(this.chunks.push(r),this.maxCursor+=r.length)}this.cursor+=r.length}toBytes(r=!1){let t;if(this.chunks.length===1){const n=this.chunks[0];r&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=dy(n,0,this.cursor)}else t=lY(this.chunks,this.cursor);return r&&this.reset(),t}}const H="CBOR decode error:",Mn="CBOR encode error:";function ji(e,r,t){if(e.length-r<t)throw new Error(`${H} not enough data for type`)}const Be=[24,256,65536,4294967296,BigInt("18446744073709551616")];function ao(e,r,t){ji(e,r,1);const n=e[r];if(t.strict===!0&&n<Be[0])throw new Error(`${H} integer encoded in more bytes than necessary (strict decode)`);return n}function uo(e,r,t){ji(e,r,2);const n=e[r]<<8|e[r+1];if(t.strict===!0&&n<Be[1])throw new Error(`${H} integer encoded in more bytes than necessary (strict decode)`);return n}function so(e,r,t){ji(e,r,4);const n=e[r]*16777216+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3];if(t.strict===!0&&n<Be[2])throw new Error(`${H} integer encoded in more bytes than necessary (strict decode)`);return n}function co(e,r,t){ji(e,r,8);const n=e[r]*16777216+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3],o=e[r+4]*16777216+(e[r+5]<<16)+(e[r+6]<<8)+e[r+7],i=(BigInt(n)<<BigInt(32))+BigInt(o);if(t.strict===!0&&i<Be[3])throw new Error(`${H} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(t.allowBigInt===!0)return i;throw new Error(`${H} integers outside of the safe integer range are not supported`)}function pY(e,r,t,n){return new N(g.uint,ao(e,r+1,n),2)}function vY(e,r,t,n){return new N(g.uint,uo(e,r+1,n),3)}function _Y(e,r,t,n){return new N(g.uint,so(e,r+1,n),5)}function yY(e,r,t,n){return new N(g.uint,co(e,r+1,n),9)}function lo(e,r){return Tt(e,0,r.value)}function Tt(e,r,t){if(t<Be[0]){const n=Number(t);e.push([r|n])}else if(t<Be[1]){const n=Number(t);e.push([r|24,n])}else if(t<Be[2]){const n=Number(t);e.push([r|25,n>>>8,n&255])}else if(t<Be[3]){const n=Number(t);e.push([r|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{const n=BigInt(t);if(n<Be[4]){const o=[r|27,0,0,0,0,0,0,0];let i=Number(n&BigInt(4294967295)),a=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=i&255,i=i>>8,o[7]=i&255,i=i>>8,o[6]=i&255,i=i>>8,o[5]=i&255,o[4]=a&255,a=a>>8,o[3]=a&255,a=a>>8,o[2]=a&255,a=a>>8,o[1]=a&255,e.push(o)}else throw new Error(`${H} encountered BigInt larger than allowable range`)}}lo.encodedSize=function(r){return Tt.encodedSize(r.value)};Tt.encodedSize=function(r){return r<Be[0]?1:r<Be[1]?2:r<Be[2]?3:r<Be[3]?5:9};lo.compareTokens=function(r,t){return r.value<t.value?-1:r.value>t.value?1:0};function bY(e,r,t,n){return new N(g.negint,-1-ao(e,r+1,n),2)}function mY(e,r,t,n){return new N(g.negint,-1-uo(e,r+1,n),3)}function gY(e,r,t,n){return new N(g.negint,-1-so(e,r+1,n),5)}const hy=BigInt(-1),iS=BigInt(1);function wY(e,r,t,n){const o=co(e,r+1,n);if(typeof o!="bigint"){const i=-1-o;if(i>=Number.MIN_SAFE_INTEGER)return new N(g.negint,i,9)}if(n.allowBigInt!==!0)throw new Error(`${H} integers outside of the safe integer range are not supported`);return new N(g.negint,hy-BigInt(o),9)}function py(e,r){const t=r.value,n=typeof t=="bigint"?t*hy-iS:t*-1-1;Tt(e,r.type.majorEncoded,n)}py.encodedSize=function(r){const t=r.value,n=typeof t=="bigint"?t*hy-iS:t*-1-1;return n<Be[0]?1:n<Be[1]?2:n<Be[2]?3:n<Be[3]?5:9};py.compareTokens=function(r,t){return r.value<t.value?1:r.value>t.value?-1:0};function Zs(e,r,t,n){ji(e,r,t+n);const o=dy(e,r+t,r+t+n);return new N(g.bytes,o,t+n)}function OY(e,r,t,n){return Zs(e,r,1,t)}function EY(e,r,t,n){return Zs(e,r,2,ao(e,r+1,n))}function SY(e,r,t,n){return Zs(e,r,3,uo(e,r+1,n))}function PY(e,r,t,n){return Zs(e,r,5,so(e,r+1,n))}function TY(e,r,t,n){const o=co(e,r+1,n);if(typeof o=="bigint")throw new Error(`${H} 64-bit integer bytes lengths not supported`);return Zs(e,r,9,o)}function al(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===g.string?rS(e.value):e.value),e.encodedBytes}function Pd(e,r){const t=al(r);Tt(e,r.type.majorEncoded,t.length),e.push(t)}Pd.encodedSize=function(r){const t=al(r);return Tt.encodedSize(t.length)+t.length};Pd.compareTokens=function(r,t){return CY(al(r),al(t))};function CY(e,r){return e.length<r.length?-1:e.length>r.length?1:dY(e,r)}function Qs(e,r,t,n,o){const i=t+n;ji(e,r,i);const a=new N(g.string,cY(e,r+t,r+i),i);return o.retainStringBytes===!0&&(a.byteValue=dy(e,r+t,r+i)),a}function AY(e,r,t,n){return Qs(e,r,1,t,n)}function IY(e,r,t,n){return Qs(e,r,2,ao(e,r+1,n),n)}function RY(e,r,t,n){return Qs(e,r,3,uo(e,r+1,n),n)}function jY(e,r,t,n){return Qs(e,r,5,so(e,r+1,n),n)}function $Y(e,r,t,n){const o=co(e,r+1,n);if(typeof o=="bigint")throw new Error(`${H} 64-bit integer string lengths not supported`);return Qs(e,r,9,o,n)}const NY=Pd;function $i(e,r,t,n){return new N(g.array,n,t)}function kY(e,r,t,n){return $i(e,r,1,t)}function MY(e,r,t,n){return $i(e,r,2,ao(e,r+1,n))}function DY(e,r,t,n){return $i(e,r,3,uo(e,r+1,n))}function LY(e,r,t,n){return $i(e,r,5,so(e,r+1,n))}function UY(e,r,t,n){const o=co(e,r+1,n);if(typeof o=="bigint")throw new Error(`${H} 64-bit integer array lengths not supported`);return $i(e,r,9,o)}function FY(e,r,t,n){if(n.allowIndefinite===!1)throw new Error(`${H} indefinite length items not allowed`);return $i(e,r,1,1/0)}function vy(e,r){Tt(e,g.array.majorEncoded,r.value)}vy.compareTokens=lo.compareTokens;vy.encodedSize=function(r){return Tt.encodedSize(r.value)};function Ni(e,r,t,n){return new N(g.map,n,t)}function xY(e,r,t,n){return Ni(e,r,1,t)}function BY(e,r,t,n){return Ni(e,r,2,ao(e,r+1,n))}function VY(e,r,t,n){return Ni(e,r,3,uo(e,r+1,n))}function WY(e,r,t,n){return Ni(e,r,5,so(e,r+1,n))}function zY(e,r,t,n){const o=co(e,r+1,n);if(typeof o=="bigint")throw new Error(`${H} 64-bit integer map lengths not supported`);return Ni(e,r,9,o)}function qY(e,r,t,n){if(n.allowIndefinite===!1)throw new Error(`${H} indefinite length items not allowed`);return Ni(e,r,1,1/0)}function _y(e,r){Tt(e,g.map.majorEncoded,r.value)}_y.compareTokens=lo.compareTokens;_y.encodedSize=function(r){return Tt.encodedSize(r.value)};function HY(e,r,t,n){return new N(g.tag,t,1)}function GY(e,r,t,n){return new N(g.tag,ao(e,r+1,n),2)}function KY(e,r,t,n){return new N(g.tag,uo(e,r+1,n),3)}function YY(e,r,t,n){return new N(g.tag,so(e,r+1,n),5)}function ZY(e,r,t,n){return new N(g.tag,co(e,r+1,n),9)}function yy(e,r){Tt(e,g.tag.majorEncoded,r.value)}yy.compareTokens=lo.compareTokens;yy.encodedSize=function(r){return Tt.encodedSize(r.value)};const QY=20,XY=21,JY=22,eZ=23;function tZ(e,r,t,n){if(n.allowUndefined===!1)throw new Error(`${H} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new N(g.null,null,1):new N(g.undefined,void 0,1)}function rZ(e,r,t,n){if(n.allowIndefinite===!1)throw new Error(`${H} indefinite length items not allowed`);return new N(g.break,void 0,1)}function by(e,r,t){if(t){if(t.allowNaN===!1&&Number.isNaN(e))throw new Error(`${H} NaN values are not supported`);if(t.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${H} Infinity values are not supported`)}return new N(g.float,e,r)}function nZ(e,r,t,n){return by(gy(e,r+1),3,n)}function oZ(e,r,t,n){return by(wy(e,r+1),5,n)}function iZ(e,r,t,n){return by(cS(e,r+1),9,n)}function my(e,r,t){const n=r.value;if(n===!1)e.push([g.float.majorEncoded|QY]);else if(n===!0)e.push([g.float.majorEncoded|XY]);else if(n===null)e.push([g.float.majorEncoded|JY]);else if(n===void 0)e.push([g.float.majorEncoded|eZ]);else{let o,i=!1;(!t||t.float64!==!0)&&(uS(n),o=gy(Nt,1),n===o||Number.isNaN(n)?(Nt[0]=249,e.push(Nt.slice(0,3)),i=!0):(sS(n),o=wy(Nt,1),n===o&&(Nt[0]=250,e.push(Nt.slice(0,5)),i=!0))),i||(aZ(n),o=cS(Nt,1),Nt[0]=251,e.push(Nt.slice(0,9)))}}my.encodedSize=function(r,t){const n=r.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){uS(n);let o=gy(Nt,1);if(n===o||Number.isNaN(n))return 3;if(sS(n),o=wy(Nt,1),n===o)return 5}return 9};const aS=new ArrayBuffer(9),gt=new DataView(aS,1),Nt=new Uint8Array(aS,0);function uS(e){if(e===1/0)gt.setUint16(0,31744,!1);else if(e===-1/0)gt.setUint16(0,64512,!1);else if(Number.isNaN(e))gt.setUint16(0,32256,!1);else{gt.setFloat32(0,e);const r=gt.getUint32(0),t=(r&2139095040)>>23,n=r&8388607;if(t===255)gt.setUint16(0,31744,!1);else if(t===0)gt.setUint16(0,(e&2147483648)>>16|n>>13,!1);else{const o=t-127;o<-24?gt.setUint16(0,0):o<-14?gt.setUint16(0,(r&2147483648)>>16|1<<24+o,!1):gt.setUint16(0,(r&2147483648)>>16|o+15<<10|n>>13,!1)}}}function gy(e,r){if(e.length-r<2)throw new Error(`${H} not enough data for float16`);const t=(e[r]<<8)+e[r+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;const n=t>>10&31,o=t&1023;let i;return n===0?i=o*2**-24:n!==31?i=(o+1024)*2**(n-25):i=o===0?1/0:NaN,t&32768?-i:i}function sS(e){gt.setFloat32(0,e,!1)}function wy(e,r){if(e.length-r<4)throw new Error(`${H} not enough data for float32`);const t=(e.byteOffset||0)+r;return new DataView(e.buffer,t,4).getFloat32(0,!1)}function aZ(e){gt.setFloat64(0,e,!1)}function cS(e,r){if(e.length-r<8)throw new Error(`${H} not enough data for float64`);const t=(e.byteOffset||0)+r;return new DataView(e.buffer,t,8).getFloat64(0,!1)}my.compareTokens=lo.compareTokens;function fe(e,r,t){throw new Error(`${H} encountered invalid minor (${t}) for major ${e[r]>>>5}`)}function Td(e){return()=>{throw new Error(`${H} ${e}`)}}const D=[];for(let e=0;e<=23;e++)D[e]=fe;D[24]=pY;D[25]=vY;D[26]=_Y;D[27]=yY;D[28]=fe;D[29]=fe;D[30]=fe;D[31]=fe;for(let e=32;e<=55;e++)D[e]=fe;D[56]=bY;D[57]=mY;D[58]=gY;D[59]=wY;D[60]=fe;D[61]=fe;D[62]=fe;D[63]=fe;for(let e=64;e<=87;e++)D[e]=OY;D[88]=EY;D[89]=SY;D[90]=PY;D[91]=TY;D[92]=fe;D[93]=fe;D[94]=fe;D[95]=Td("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)D[e]=AY;D[120]=IY;D[121]=RY;D[122]=jY;D[123]=$Y;D[124]=fe;D[125]=fe;D[126]=fe;D[127]=Td("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)D[e]=kY;D[152]=MY;D[153]=DY;D[154]=LY;D[155]=UY;D[156]=fe;D[157]=fe;D[158]=fe;D[159]=FY;for(let e=160;e<=183;e++)D[e]=xY;D[184]=BY;D[185]=VY;D[186]=WY;D[187]=zY;D[188]=fe;D[189]=fe;D[190]=fe;D[191]=qY;for(let e=192;e<=215;e++)D[e]=HY;D[216]=GY;D[217]=KY;D[218]=YY;D[219]=ZY;D[220]=fe;D[221]=fe;D[222]=fe;D[223]=fe;for(let e=224;e<=243;e++)D[e]=Td("simple values are not supported");D[244]=fe;D[245]=fe;D[246]=fe;D[247]=tZ;D[248]=Td("simple values are not supported");D[249]=nZ;D[250]=oZ;D[251]=iZ;D[252]=fe;D[253]=fe;D[254]=fe;D[255]=rZ;const nr=[];for(let e=0;e<24;e++)nr[e]=new N(g.uint,e,1);for(let e=-1;e>=-24;e--)nr[31-e]=new N(g.negint,e,1);nr[64]=new N(g.bytes,new Uint8Array(0),1);nr[96]=new N(g.string,"",1);nr[128]=new N(g.array,0,1);nr[160]=new N(g.map,0,1);nr[244]=new N(g.false,!1,1);nr[245]=new N(g.true,!0,1);nr[246]=new N(g.null,null,1);function uZ(e){switch(e.type){case g.false:return ur([244]);case g.true:return ur([245]);case g.null:return ur([246]);case g.bytes:return e.value.length?void 0:ur([64]);case g.string:return e.value===""?ur([96]):void 0;case g.array:return e.value===0?ur([128]):void 0;case g.map:return e.value===0?ur([160]):void 0;case g.uint:return e.value<24?ur([Number(e.value)]):void 0;case g.negint:if(e.value>=-24)return ur([31-Number(e.value)])}}const sZ={float64:!1,mapSorter:fZ,quickEncodeToken:uZ};function cZ(){const e=[];return e[g.uint.major]=lo,e[g.negint.major]=py,e[g.bytes.major]=Pd,e[g.string.major]=NY,e[g.array.major]=vy,e[g.map.major]=_y,e[g.tag.major]=yy,e[g.float.major]=my,e}const lS=cZ(),jp=new oS;class ul{constructor(r,t){this.obj=r,this.parent=t}includes(r){let t=this;do if(t.obj===r)return!0;while(t=t.parent);return!1}static createCheck(r,t){if(r&&r.includes(t))throw new Error(`${Mn} object contains circular references`);return new ul(t,r)}}const Nr={null:new N(g.null,null),undefined:new N(g.undefined,void 0),true:new N(g.true,!0),false:new N(g.false,!1),emptyArray:new N(g.array,0),emptyMap:new N(g.map,0)},Xr={number(e,r,t,n){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new N(g.float,e):e>=0?new N(g.uint,e):new N(g.negint,e)},bigint(e,r,t,n){return e>=BigInt(0)?new N(g.uint,e):new N(g.negint,e)},Uint8Array(e,r,t,n){return new N(g.bytes,e)},string(e,r,t,n){return new N(g.string,e)},boolean(e,r,t,n){return e?Nr.true:Nr.false},null(e,r,t,n){return Nr.null},undefined(e,r,t,n){return Nr.undefined},ArrayBuffer(e,r,t,n){return new N(g.bytes,new Uint8Array(e))},DataView(e,r,t,n){return new N(g.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,r,t,n){if(!e.length)return t.addBreakTokens===!0?[Nr.emptyArray,new N(g.break)]:Nr.emptyArray;n=ul.createCheck(n,e);const o=[];let i=0;for(const a of e)o[i++]=Nc(a,t,n);return t.addBreakTokens?[new N(g.array,e.length),o,new N(g.break)]:[new N(g.array,e.length),o]},Object(e,r,t,n){const o=r!=="Object",i=o?e.keys():Object.keys(e),a=o?e.size:i.length;if(!a)return t.addBreakTokens===!0?[Nr.emptyMap,new N(g.break)]:Nr.emptyMap;n=ul.createCheck(n,e);const s=[];let c=0;for(const u of i)s[c++]=[Nc(u,t,n),Nc(o?e.get(u):e[u],t,n)];return lZ(s,t),t.addBreakTokens?[new N(g.map,a),s,new N(g.break)]:[new N(g.map,a),s]}};Xr.Map=Xr.Object;Xr.Buffer=Xr.Uint8Array;for(const e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Xr[`${e}Array`]=Xr.DataView;function Nc(e,r={},t){const n=oY(e),o=r&&r.typeEncoders&&r.typeEncoders[n]||Xr[n];if(typeof o=="function"){const a=o(e,n,r,t);if(a!=null)return a}const i=Xr[n];if(!i)throw new Error(`${Mn} unsupported type: ${n}`);return i(e,n,r,t)}function lZ(e,r){r.mapSorter&&e.sort(r.mapSorter)}function fZ(e,r){const t=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(r[0])?r[0][0]:r[0];if(t.type!==n.type)return t.type.compare(n.type);const o=t.type.major,i=lS[o].compareTokens(t,n);return i===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),i}function fS(e,r,t,n){if(Array.isArray(r))for(const o of r)fS(e,o,t,n);else t[r.type.major](e,r,n)}function dS(e,r,t){const n=Nc(e,t);if(!Array.isArray(n)&&t.quickEncodeToken){const o=t.quickEncodeToken(n);if(o)return o;const i=r[n.type.major];if(i.encodedSize){const a=i.encodedSize(n,t),s=new oS(a);if(i(s,n,t),s.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return fy(s.chunks[0])}}return jp.reset(),fS(jp,n,r,t),jp.toBytes(!0)}function dZ(e,r){return r=Object.assign({},sZ,r),dS(e,lS,r)}const hZ={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class pZ{constructor(r,t={}){this._pos=0,this.data=r,this.options=t}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const r=this.data[this._pos];let t=nr[r];if(t===void 0){const n=D[r];if(!n)throw new Error(`${H} no decoder for major type ${r>>>5} (byte 0x${r.toString(16).padStart(2,"0")})`);const o=r&31;t=n(this.data,this._pos,o,this.options)}return this._pos+=t.encodedLength,t}}const Ra=Symbol.for("DONE"),Cd=Symbol.for("BREAK");function vZ(e,r,t){const n=[];for(let o=0;o<e.value;o++){const i=ja(r,t);if(i===Cd){if(e.value===1/0)break;throw new Error(`${H} got unexpected break to lengthed array`)}if(i===Ra)throw new Error(`${H} found array but not enough entries (got ${o}, expected ${e.value})`);n[o]=i}return n}function _Z(e,r,t){const n=t.useMaps===!0,o=n?void 0:{},i=n?new Map:void 0;for(let a=0;a<e.value;a++){const s=ja(r,t);if(s===Cd){if(e.value===1/0)break;throw new Error(`${H} got unexpected break to lengthed map`)}if(s===Ra)throw new Error(`${H} found map but not enough entries (got ${a} [no key], expected ${e.value})`);if(n!==!0&&typeof s!="string")throw new Error(`${H} non-string keys not supported (got ${typeof s})`);if(t.rejectDuplicateMapKeys===!0&&(n&&i.has(s)||!n&&s in o))throw new Error(`${H} found repeat map key "${s}"`);const c=ja(r,t);if(c===Ra)throw new Error(`${H} found map but not enough entries (got ${a} [no value], expected ${e.value})`);n?i.set(s,c):o[s]=c}return n?i:o}function ja(e,r){if(e.done())return Ra;const t=e.next();if(t.type===g.break)return Cd;if(t.type.terminal)return t.value;if(t.type===g.array)return vZ(t,e,r);if(t.type===g.map)return _Z(t,e,r);if(t.type===g.tag){if(r.tags&&typeof r.tags[t.value]=="function"){const n=ja(e,r);return r.tags[t.value](n)}throw new Error(`${H} tag not supported (${t.value})`)}throw new Error("unsupported")}function yZ(e,r){if(!(e instanceof Uint8Array))throw new Error(`${H} data to decode must be a Uint8Array`);r=Object.assign({},hZ,r);const t=r.tokenizer||new pZ(e,r),n=ja(t,r);if(n===Ra)throw new Error(`${H} did not find any content to decode`);if(n===Cd)throw new Error(`${H} got unexpected break`);return[n,e.subarray(t.pos())]}function hS(e,r){const[t,n]=yZ(e,r);if(n.length>0)throw new Error(`${H} too many terminals, data makes no sense`);return t}const pS=42;function vS(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function bZ(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const r=Q.asCID(e);if(!r)return null;const t=new Uint8Array(r.bytes.byteLength+1);return t.set(r.bytes,1),[new N(g.tag,pS),new N(g.bytes,t)]}function mZ(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function gZ(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const Nv={float64:!0,typeEncoders:{Object:bZ,undefined:mZ,number:gZ}},wZ={...Nv,typeEncoders:{...Nv.typeEncoders}};function OZ(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Q.decode(e.subarray(1))}const sl={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};sl.tags[pS]=OZ;const EZ={...sl,tags:sl.tags.slice()},SZ="dag-cbor",PZ=113,_S=e=>dZ(e,Nv),yS=e=>hS(vS(e),sl),TZ=Object.freeze(Object.defineProperty({__proto__:null,code:PZ,decode:yS,decodeOptions:EZ,encode:_S,encodeOptions:wZ,name:SZ,toByteView:vS},Symbol.toStringTag,{value:"Module"}));class CZ extends Array{constructor(){super(),this.inRecursive=[]}prefix(r){const t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===g.array&&(t.elements++,t.elements!==1&&r.push([44])),t.type===g.map&&(t.elements++,t.elements!==1&&(t.elements%2===1?r.push([44]):r.push([58]))))}[g.uint.major](r,t){this.prefix(r);const n=String(t.value),o=[];for(let i=0;i<n.length;i++)o[i]=n.charCodeAt(i);r.push(o)}[g.negint.major](r,t){this[g.uint.major](r,t)}[g.bytes.major](r,t){throw new Error(`${Mn} unsupported type: Uint8Array`)}[g.string.major](r,t){this.prefix(r);const n=rS(JSON.stringify(t.value));r.push(n.length>32?fy(n):n)}[g.array.major](r,t){this.prefix(r),this.inRecursive.push({type:g.array,elements:0}),r.push([91])}[g.map.major](r,t){this.prefix(r),this.inRecursive.push({type:g.map,elements:0}),r.push([123])}[g.tag.major](r,t){}[g.float.major](r,t){if(t.type.name==="break"){const a=this.inRecursive.pop();if(a){if(a.type===g.array)r.push([93]);else if(a.type===g.map)r.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(t.value===void 0)throw new Error(`${Mn} unsupported type: undefined`);if(this.prefix(r),t.type.name==="true"){r.push([116,114,117,101]);return}else if(t.type.name==="false"){r.push([102,97,108,115,101]);return}else if(t.type.name==="null"){r.push([110,117,108,108]);return}const n=String(t.value),o=[];let i=!1;for(let a=0;a<n.length;a++)o[a]=n.charCodeAt(a),!i&&(o[a]===46||o[a]===101||o[a]===69)&&(i=!0);i||(o.push(46),o.push(48)),r.push(o)}}function AZ(e,r){if(Array.isArray(e[0])||Array.isArray(r[0]))throw new Error(`${Mn} complex map keys are not supported`);const t=e[0],n=r[0];if(t.type!==g.string||n.type!==g.string)throw new Error(`${Mn} non-string map keys are not supported`);if(t<n)return-1;if(t>n)return 1;throw new Error(`${Mn} unexpected duplicate map keys, this is not supported`)}const IZ={addBreakTokens:!0,mapSorter:AZ};function RZ(e,r){return r=Object.assign({},IZ,r),dS(e,new CZ,r)}class bS{constructor(r,t={}){this._pos=0,this.data=r,this.options=t,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let r=this.ch();for(;r===32||r===9||r===13||r===10;)r=this.data[++this._pos]}expect(r){if(this.data.length-this._pos<r.length)throw new Error(`${H} unexpected end of input at position ${this._pos}`);for(let t=0;t<r.length;t++)if(this.data[this._pos++]!==r[t])throw new Error(`${H} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...r)}'`)}parseNumber(){const r=this._pos;let t=!1,n=!1;const o=s=>{for(;!this.done();){const c=this.ch();if(s.includes(c))this._pos++;else break}};if(this.ch()===45&&(t=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,n=!0;else return new N(g.uint,0,this._pos-r);if(o([48,49,50,51,52,53,54,55,56,57]),t&&this._pos===r+1)throw new Error(`${H} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${H} unexpected token at position ${this._pos}`);n=!0,this._pos++,o([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,o([48,49,50,51,52,53,54,55,56,57]));const i=String.fromCharCode.apply(null,this.data.subarray(r,this._pos)),a=parseFloat(i);return n?new N(g.float,a,this._pos-r):this.options.allowBigInt!==!0||Number.isSafeInteger(a)?new N(a>=0?g.uint:g.negint,a,this._pos-r):new N(a>=0?g.uint:g.negint,BigInt(i),this._pos-r)}parseString(){if(this.ch()!==34)throw new Error(`${H} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let i=this._pos,a=0;i<this.data.length&&a<65536;i++,a++){const s=this.data[i];if(s===92||s<32||s>=128)break;if(s===34){const c=String.fromCharCode.apply(null,this.data.subarray(this._pos,i));return this._pos=i+1,new N(g.string,c,a)}}const r=this._pos,t=[],n=()=>{if(this._pos+4>=this.data.length)throw new Error(`${H} unexpected end of unicode escape sequence at position ${this._pos}`);let i=0;for(let a=0;a<4;a++){let s=this.ch();if(s>=48&&s<=57)s-=48;else if(s>=97&&s<=102)s=s-97+10;else if(s>=65&&s<=70)s=s-65+10;else throw new Error(`${H} unexpected unicode escape character at position ${this._pos}`);i=i*16+s,this._pos++}return i},o=()=>{const i=this.ch();let a=null,s=i>239?4:i>223?3:i>191?2:1;if(this._pos+s>this.data.length)throw new Error(`${H} unexpected unicode sequence at position ${this._pos}`);let c,u,l,d;switch(s){case 1:i<128&&(a=i);break;case 2:c=this.data[this._pos+1],(c&192)===128&&(d=(i&31)<<6|c&63,d>127&&(a=d));break;case 3:c=this.data[this._pos+1],u=this.data[this._pos+2],(c&192)===128&&(u&192)===128&&(d=(i&15)<<12|(c&63)<<6|u&63,d>2047&&(d<55296||d>57343)&&(a=d));break;case 4:c=this.data[this._pos+1],u=this.data[this._pos+2],l=this.data[this._pos+3],(c&192)===128&&(u&192)===128&&(l&192)===128&&(d=(i&15)<<18|(c&63)<<12|(u&63)<<6|l&63,d>65535&&d<1114112&&(a=d))}a===null?(a=65533,s=1):a>65535&&(a-=65536,t.push(a>>>10&1023|55296),a=56320|a&1023),t.push(a),this._pos+=s};for(;!this.done();){const i=this.ch();let a;switch(i){case 92:if(this._pos++,this.done())throw new Error(`${H} unexpected string termination at position ${this._pos}`);switch(a=this.ch(),this._pos++,a){case 34:case 39:case 92:case 47:t.push(a);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(n());break;default:throw new Error(`${H} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new N(g.string,nS(t),this._pos-r);default:if(i<32)throw new Error(`${H} invalid control character at position ${this._pos}`);i<128?(t.push(i),this._pos++):o()}}throw new Error(`${H} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new N(g.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new N(g.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new N(g.null,null,4);case 102:return this.expect([102,97,108,115,101]),new N(g.false,!1,5);case 116:return this.expect([116,114,117,101]),new N(g.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${H} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new N(g.break,void 0,1);if(this.ch()!==44)throw new Error(`${H} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new N(g.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new N(g.break,void 0,1);if(this.ch()!==44)throw new Error(`${H} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new N(g.break,void 0,1);const r=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${H} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),r}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${H} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}}function jZ(e,r){return r=Object.assign({tokenizer:new bS(e,r)},r),hS(e,r)}function $Z(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function NZ(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const r=Q.asCID(e);if(!r)return null;const t=r.toString();return[new N(g.map,1/0,1),new N(g.string,"/",1),new N(g.string,t,t.length),new N(g.break,void 0,1)]}function cl(e){const r=Ed.encode(e).slice(1);return[new N(g.map,1/0,1),new N(g.string,"/",1),new N(g.map,1/0,1),new N(g.string,"bytes",5),new N(g.string,r,r.length),new N(g.break,void 0,1),new N(g.break,void 0,1)]}function Ct(e){return cl(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function kZ(e){return cl(new Uint8Array(e))}function MZ(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function DZ(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const LZ={typeEncoders:{Object:NZ,Buffer:cl,Uint8Array:cl,Int8Array:Ct,Uint16Array:Ct,Int16Array:Ct,Uint32Array:Ct,Int32Array:Ct,Float32Array:Ct,Float64Array:Ct,Uint8ClampedArray:Ct,BigInt64Array:Ct,BigUint64Array:Ct,DataView:Ct,ArrayBuffer:kZ,undefined:MZ,number:DZ}};class UZ extends bS{constructor(r,t){super(r,t),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const r=this._next();if(r.type===g.map){const t=this._next();if(t.type===g.string&&t.value==="/"){const n=this._next();if(n.type===g.string){if(this._next().type!==g.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new N(g.tag,42,0)}if(n.type===g.map){const o=this._next();if(o.type===g.string&&o.value==="bytes"){const i=this._next();if(i.type===g.string){for(let s=0;s<2;s++)if(this._next().type!==g.break)throw new Error("Invalid encoded Bytes form");const a=Ed.decode(`m${i.value}`);return new N(g.bytes,a,i.value.length)}this.tokenBuffer.push(i)}this.tokenBuffer.push(o)}this.tokenBuffer.push(n)}this.tokenBuffer.push(t)}return r}}const kv={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};kv.tags[42]=Q.parse;const FZ="dag-json",xZ=297,mS=e=>RZ(e,LZ),gS=e=>{const r=$Z(e),t=Object.assign(kv,{tokenizer:new UZ(r,kv)});return jZ(r,t)},Kg=e=>BZ.decode(mS(e)),BZ=new TextDecoder,VZ=e=>gS(WZ.encode(e)),WZ=new TextEncoder,zZ=Object.freeze(Object.defineProperty({__proto__:null,code:xZ,decode:gS,encode:mS,format:Kg,name:FZ,parse:VZ,stringify:Kg},Symbol.toStringTag,{value:"Module"})),qZ=new TextDecoder;function Oy(e,r){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(r>=e.length)throw new Error("protobuf: unexpected end of data");const o=e[r++];if(t+=n<28?(o&127)<<n:(o&127)*2**n,o<128)break}return[t,r]}function ll(e,r){let t;[t,r]=Oy(e,r);const n=r+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(r,n),n]}function wS(e,r){let t;return[t,r]=Oy(e,r),[t&7,t>>3,r]}function HZ(e){const r={},t=e.length;let n=0;for(;n<t;){let o,i;if([o,i,n]=wS(e,n),i===1){if(r.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(r.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(r.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[r.Hash,n]=ll(e,n)}else if(i===2){if(r.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(r.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let a;[a,n]=ll(e,n),r.Name=qZ.decode(a)}else if(i===3){if(r.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[r.Tsize,n]=Oy(e,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${i}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return r}function GZ(e){const r=e.length;let t=0,n,o=!1,i;for(;t<r;){let s,c;if([s,c,t]=wS(e,t),s!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${s}`);if(c===1){if(i)throw new Error("protobuf: (PBNode) duplicate Data section");[i,t]=ll(e,t),n&&(o=!0)}else if(c===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let u;[u,t]=ll(e,t),n.push(HZ(u))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(t>r)throw new Error("protobuf: (PBNode) unexpected end of data");const a={};return i&&(a.Data=i),a.Links=n||[],a}const OS=new TextEncoder,Yg=2**32,KZ=2**31;function YZ(e,r){let t=r.length;if(typeof e.Tsize=="number"){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");t=ba(r,t,e.Tsize)-1,r[t]=24}if(typeof e.Name=="string"){const n=OS.encode(e.Name);t-=n.length,r.set(n,t),t=ba(r,t,n.length)-1,r[t]=18}return e.Hash&&(t-=e.Hash.length,r.set(e.Hash,t),t=ba(r,t,e.Hash.length)-1,r[t]=10),r.length-t}function ZZ(e){const r=XZ(e),t=new Uint8Array(r);let n=r;if(e.Data&&(n-=e.Data.length,t.set(e.Data,n),n=ba(t,n,e.Data.length)-1,t[n]=10),e.Links)for(let o=e.Links.length-1;o>=0;o--){const i=YZ(e.Links[o],t.subarray(0,n));n-=i,n=ba(t,n,i)-1,t[n]=18}return t}function QZ(e){let r=0;if(e.Hash){const t=e.Hash.length;r+=1+t+jo(t)}if(typeof e.Name=="string"){const t=OS.encode(e.Name).length;r+=1+t+jo(t)}return typeof e.Tsize=="number"&&(r+=1+jo(e.Tsize)),r}function XZ(e){let r=0;if(e.Data){const t=e.Data.length;r+=1+t+jo(t)}if(e.Links)for(const t of e.Links){const n=QZ(t);r+=1+n+jo(n)}return r}function ba(e,r,t){r-=jo(t);const n=r;for(;t>=KZ;)e[r++]=t&127|128,t/=128;for(;t>=128;)e[r++]=t&127|128,t>>>=7;return e[r]=t,n}function jo(e){return e%2===0&&e++,Math.floor((JZ(e)+6)/7)}function JZ(e){let r=0;return e>=Yg&&(e=Math.floor(e/Yg),r=32),e>=65536&&(e>>>=16,r+=16),e>=256&&(e>>>=8,r+=8),r+eQ[e]}const eQ=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],tQ=["Data","Links"],rQ=["Hash","Name","Tsize"],Mv=new TextEncoder;function ES(e,r){if(e===r)return 0;const t=e.Name?Mv.encode(e.Name):[],n=r.Name?Mv.encode(r.Name):[];let o=t.length,i=n.length;for(let a=0,s=Math.min(o,i);a<s;++a)if(t[a]!==n[a]){o=t[a],i=n[a];break}return o<i?-1:i<o?1:0}function Zg(e,r){return!Object.keys(e).some(t=>!r.includes(t))}function SS(e){if(typeof e.asCID=="object"){const t=Q.asCID(e);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if(typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const r={};if(e.Hash){let t=Q.asCID(e.Hash);try{t||(typeof e.Hash=="string"?t=Q.parse(e.Hash):e.Hash instanceof Uint8Array&&(t=Q.decode(e.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}t&&(r.Hash=t)}if(!r.Hash)throw new TypeError("Invalid DAG-PB form");return typeof e.Name=="string"&&(r.Name=e.Name),typeof e.Tsize=="number"&&(r.Tsize=e.Tsize),r}function PS(e){if((e instanceof Uint8Array||typeof e=="string")&&(e={Data:e}),typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const r={};if(e.Data!==void 0)if(typeof e.Data=="string")r.Data=Mv.encode(e.Data);else if(e.Data instanceof Uint8Array)r.Data=e.Data;else throw new TypeError("Invalid DAG-PB form");if(e.Links!==void 0)if(Array.isArray(e.Links))r.Links=e.Links.map(SS),r.Links.sort(ES);else throw new TypeError("Invalid DAG-PB form");else r.Links=[];return r}function TS(e){if(!e||typeof e!="object"||Array.isArray(e)||e instanceof Uint8Array||e["/"]&&e["/"]===e.bytes)throw new TypeError("Invalid DAG-PB form");if(!Zg(e,tQ))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(e.Data!==void 0&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let r=0;r<e.Links.length;r++){const t=e.Links[r];if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!Zg(t,rQ))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(t.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash==null||!t.Hash["/"]||t.Hash["/"]!==t.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0){if(typeof t.Tsize!="number"||t.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(r>0&&ES(t,e.Links[r-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function nQ(e,r=[]){return PS({Data:e,Links:r})}function oQ(e,r,t){return SS({Hash:t,Name:e,Tsize:r})}function iQ(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}const aQ="dag-pb",uQ=112;function sQ(e){TS(e);const r={};return e.Links&&(r.Links=e.Links.map(t=>{const n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),e.Data&&(r.Data=e.Data),ZZ(r)}function cQ(e){const r=iQ(e),t=GZ(r),n={};return t.Data&&(n.Data=t.Data),t.Links&&(n.Links=t.Links.map(o=>{const i={};try{i.Hash=Q.decode(o.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return o.Name!==void 0&&(i.Name=o.Name),o.Tsize!==void 0&&(i.Tsize=o.Tsize),i})),n}const lQ=Object.freeze(Object.defineProperty({__proto__:null,code:uQ,createLink:oQ,createNode:nQ,decode:cQ,encode:sQ,name:aQ,prepare:PS,validate:TS},Symbol.toStringTag,{value:"Module"}));function fQ(e,r){if(e===r)return!0;if(e.byteLength!==r.byteLength)return!1;for(let t=0;t<e.byteLength;t++)if(e[t]!==r[t])return!1;return!0}function Ey(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function dQ(e,r){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),a=i.charCodeAt(0);if(t[a]!==255)throw new TypeError(i+" is ambiguous");t[a]=o}var s=e.length,c=e.charAt(0),u=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function d(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var _=0,b=0,w=0,E=v.length;w!==E&&v[w]===0;)w++,_++;for(var S=(E-w)*l+1>>>0,O=new Uint8Array(S);w!==E;){for(var A=v[w],$=0,I=S-1;(A!==0||$<b)&&I!==-1;I--,$++)A+=256*O[I]>>>0,O[I]=A%s>>>0,A=A/s>>>0;if(A!==0)throw new Error("Non-zero carry");b=$,w++}for(var L=S-b;L!==S&&O[L]===0;)L++;for(var X=c.repeat(_);L<S;++L)X+=e.charAt(O[L]);return X}function h(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var _=0;if(v[_]!==" "){for(var b=0,w=0;v[_]===c;)b++,_++;for(var E=(v.length-_)*u+1>>>0,S=new Uint8Array(E);v[_];){var O=t[v.charCodeAt(_)];if(O===255)return;for(var A=0,$=E-1;(O!==0||A<w)&&$!==-1;$--,A++)O+=s*S[$]>>>0,S[$]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");w=A,_++}if(v[_]!==" "){for(var I=E-w;I!==E&&S[I]===0;)I++;for(var L=new Uint8Array(b+(E-I)),X=b;I!==E;)L[X++]=S[I++];return L}}}function p(v){var _=h(v);if(_)return _;throw new Error(`Non-${r} character`)}return{encode:d,decodeUnsafe:h,decode:p}}var hQ=dQ,pQ=hQ;class vQ{constructor(r,t,n){m(this,"name");m(this,"prefix");m(this,"baseEncode");this.name=r,this.prefix=t,this.baseEncode=n}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}}class _Q{constructor(r,t,n){m(this,"name");m(this,"prefix");m(this,"baseDecode");m(this,"prefixCodePoint");if(this.name=r,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return CS(this,r)}}class yQ{constructor(r){m(this,"decoders");this.decoders=r}or(r){return CS(this,r)}decode(r){const t=r[0],n=this.decoders[t];if(n!=null)return n.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function CS(e,r){return new yQ({...e.decoders??{[e.prefix]:e},...r.decoders??{[r.prefix]:r}})}class bQ{constructor(r,t,n,o){m(this,"name");m(this,"prefix");m(this,"baseEncode");m(this,"baseDecode");m(this,"encoder");m(this,"decoder");this.name=r,this.prefix=t,this.baseEncode=n,this.baseDecode=o,this.encoder=new vQ(r,t,n),this.decoder=new _Q(r,t,o)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}}function AS({name:e,prefix:r,encode:t,decode:n}){return new bQ(e,r,t,n)}function IS({name:e,prefix:r,alphabet:t}){const{encode:n,decode:o}=pQ(t,e);return AS({prefix:r,name:e,encode:n,decode:i=>Ey(o(i))})}function mQ(e,r,t,n){const o={};for(let l=0;l<r.length;++l)o[r[l]]=l;let i=e.length;for(;e[i-1]==="=";)--i;const a=new Uint8Array(i*t/8|0);let s=0,c=0,u=0;for(let l=0;l<i;++l){const d=o[e[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|d,s+=t,s>=8&&(s-=8,a[u++]=255&c>>s)}if(s>=t||255&c<<8-s)throw new SyntaxError("Unexpected end of data");return a}function gQ(e,r,t){const n=r[r.length-1]==="=",o=(1<<t)-1;let i="",a=0,s=0;for(let c=0;c<e.length;++c)for(s=s<<8|e[c],a+=8;a>t;)a-=t,i+=r[o&s>>a];if(a!==0&&(i+=r[o&s<<t-a]),n)for(;i.length*t&7;)i+="=";return i}function _t({name:e,prefix:r,bitsPerChar:t,alphabet:n}){return AS({prefix:r,name:e,encode(o){return gQ(o,n,t)},decode(o){return mQ(o,n,t,e)}})}_t({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});_t({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const RS=_t({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});_t({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function fr(e){return RS.encode(e).slice(1)}function Kt(e){return RS.decode(`u${e}`)}const kc=_t({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});_t({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});_t({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});_t({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});_t({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});_t({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});_t({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});_t({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});_t({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const Mr=IS({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});IS({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var wQ=jS,Qg=128,OQ=-128,EQ=Math.pow(2,31);function jS(e,r,t){r=r||[],t=t||0;for(var n=t;e>=EQ;)r[t++]=e&255|Qg,e/=128;for(;e&OQ;)r[t++]=e&255|Qg,e>>>=7;return r[t]=e|0,jS.bytes=t-n+1,r}var SQ=Dv,PQ=128,Xg=127;function Dv(e,n){var t=0,n=n||0,o=0,i=n,a,s=e.length;do{if(i>=s)throw Dv.bytes=0,new RangeError("Could not decode varint");a=e[i++],t+=o<28?(a&Xg)<<o:(a&Xg)*Math.pow(2,o),o+=7}while(a>=PQ);return Dv.bytes=i-n,t}var TQ=Math.pow(2,7),CQ=Math.pow(2,14),AQ=Math.pow(2,21),IQ=Math.pow(2,28),RQ=Math.pow(2,35),jQ=Math.pow(2,42),$Q=Math.pow(2,49),NQ=Math.pow(2,56),kQ=Math.pow(2,63),MQ=function(e){return e<TQ?1:e<CQ?2:e<AQ?3:e<IQ?4:e<RQ?5:e<jQ?6:e<$Q?7:e<NQ?8:e<kQ?9:10},DQ={encode:wQ,decode:SQ,encodingLength:MQ},fl=DQ;function Lv(e,r=0){return[fl.decode(e,r),fl.decode.bytes]}function dl(e,r,t=0){return fl.encode(e,r,t),r}function hl(e){return fl.encodingLength(e)}function LQ(e,r){const t=r.byteLength,n=hl(e),o=n+hl(t),i=new Uint8Array(o+t);return dl(e,i,0),dl(t,i,n),i.set(r,o),new Sy(e,t,r,i)}function UQ(e){const r=Ey(e),[t,n]=Lv(r),[o,i]=Lv(r.subarray(n)),a=r.subarray(n+i);if(a.byteLength!==o)throw new Error("Incorrect length");return new Sy(t,o,a,r)}function FQ(e,r){if(e===r)return!0;{const t=r;return e.code===t.code&&e.size===t.size&&t.bytes instanceof Uint8Array&&fQ(e.bytes,t.bytes)}}class Sy{constructor(r,t,n,o){m(this,"code");m(this,"size");m(this,"digest");m(this,"bytes");this.code=r,this.size=t,this.digest=n,this.bytes=o}}function Jg(e,r){const{bytes:t,version:n}=e;switch(n){case 0:return BQ(t,Uv(e),r??Mr.encoder);default:return VQ(t,Uv(e),r??kc.encoder)}}const e0=new WeakMap;function Uv(e){const r=e0.get(e);if(r==null){const t=new Map;return e0.set(e,t),t}return r}var D0;class $e{constructor(r,t,n,o){m(this,"code");m(this,"version");m(this,"multihash");m(this,"bytes");m(this,"/");m(this,D0,"CID");this.code=t,this.version=r,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:r,multihash:t}=this;if(r!==ra)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==WQ)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return $e.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:r,digest:t}=this.multihash,n=LQ(r,t);return $e.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(r){return $e.equals(this,r)}static equals(r,t){const n=t;return n!=null&&r.code===n.code&&r.version===n.version&&FQ(r.multihash,n.multihash)}toString(r){return Jg(this,r)}toJSON(){return{"/":Jg(this)}}link(){return this}[(D0=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(r){if(r==null)return null;const t=r;if(t instanceof $e)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){const{version:n,code:o,multihash:i,bytes:a}=t;return new $e(n,o,i,a??t0(n,o,i.bytes))}else if(t[zQ]===!0){const{version:n,multihash:o,code:i}=t,a=UQ(o);return $e.create(n,i,a)}else return null}static create(r,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(r){case 0:{if(t!==ra)throw new Error(`Version 0 CID must use dag-pb (code: ${ra}) block encoding`);return new $e(r,t,n,n.bytes)}case 1:{const o=t0(r,t,n.bytes);return new $e(r,t,n,o)}default:throw new Error("Invalid version")}}static createV0(r){return $e.create(0,ra,r)}static createV1(r,t){return $e.create(1,r,t)}static decode(r){const[t,n]=$e.decodeFirst(r);if(n.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(r){const t=$e.inspectBytes(r),n=t.size-t.multihashSize,o=Ey(r.subarray(n,n+t.multihashSize));if(o.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=o.subarray(t.multihashSize-t.digestSize),a=new Sy(t.multihashCode,t.digestSize,i,o);return[t.version===0?$e.createV0(a):$e.createV1(t.codec,a),r.subarray(t.size)]}static inspectBytes(r){let t=0;const n=()=>{const[d,h]=Lv(r.subarray(t));return t+=h,d};let o=n(),i=ra;if(o===18?(o=0,t=0):i=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const a=t,s=n(),c=n(),u=t+c,l=u-a;return{version:o,codec:i,multihashCode:s,digestSize:c,multihashSize:l,size:u}}static parse(r,t){const[n,o]=xQ(r,t),i=$e.decode(o);if(i.version===0&&r[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Uv(i).set(n,r),i}}function xQ(e,r){switch(e[0]){case"Q":{const t=r??Mr;return[Mr.prefix,t.decode(`${Mr.prefix}${e}`)]}case Mr.prefix:{const t=r??Mr;return[Mr.prefix,t.decode(e)]}case kc.prefix:{const t=r??kc;return[kc.prefix,t.decode(e)]}default:{if(r==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],r.decode(e)]}}}function BQ(e,r,t){const{prefix:n}=t;if(n!==Mr.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const o=r.get(n);if(o==null){const i=t.encode(e).slice(1);return r.set(n,i),i}else return o}function VQ(e,r,t){const{prefix:n}=t,o=r.get(n);if(o==null){const i=t.encode(e);return r.set(n,i),i}else return o}const ra=112,WQ=18;function t0(e,r,t){const n=hl(e),o=n+hl(r),i=new Uint8Array(o+t.byteLength);return dl(e,i,0),dl(r,i,n),i.set(t,o),i}const zQ=Symbol.for("@ipld/js-cid/CID");function qQ(e){const[r,t,n]=e;return{payload:t,signatures:[{protected:r,signature:n}],link:$e.decode(Kt(t))}}function HQ(e){const r={signature:Kt(e.signature)};return e.header&&(r.header=e.header),e.protected&&(r.protected=Kt(e.protected)),r}function GQ(e){return{payload:Kt(e.payload),signatures:e.signatures.map(HQ)}}function KQ(e){const r={signature:fr(e.signature)};return e.header&&(r.header=e.header),e.protected&&(r.protected=fr(e.protected)),r}function YQ(e){const r={payload:fr(e.payload),signatures:e.signatures.map(KQ)};try{return r.pld=Fv(QQ(e.payload)),r}catch{try{return r.link=$e.decode(new Uint8Array(e.payload)),r}catch{throw new Error("Invalid payload, must be either JSON or CID")}}}function Fv(e){if(typeof e=="string"){if(e.startsWith("ipfs://"))return $e.parse(e.slice(7))}else{if(Array.isArray(e))return e.map(Fv);if(ZQ(e)){const r={};for(const t in e)r[t]=Fv(e[t]);return r}}return e}function ZQ(e){return typeof e=="object"&&e!==null}function QQ(e){return JSON.parse(new TextDecoder().decode(e))}function XQ(e){const[r,t,n,o,i]=e,a={ciphertext:o,iv:n,protected:r,tag:i};return t&&(a.recipients=[{encrypted_key:t}]),a}function JQ(e){const r={};return e.encrypted_key&&(r.encrypted_key=Kt(e.encrypted_key)),e.header&&(r.header=e.header),r}function eX(e){const r={ciphertext:Kt(e.ciphertext),protected:Kt(e.protected),iv:Kt(e.iv),tag:Kt(e.tag)};return e.aad&&(r.aad=Kt(e.aad)),e.recipients&&(r.recipients=e.recipients.map(JQ)),e.unprotected&&(r.unprotected=e.unprotected),r}function tX(e){const r={};return e.encrypted_key&&(r.encrypted_key=fr(e.encrypted_key)),e.header&&(r.header=e.header),r}function rX(e){const r={ciphertext:fr(e.ciphertext),protected:fr(e.protected),iv:fr(e.iv),tag:fr(e.tag)};return e.aad&&(r.aad=fr(e.aad)),e.recipients&&(r.recipients=e.recipients.map(tX)),e.unprotected&&(r.unprotected=e.unprotected),r}const nX="dag-jose",oX=133;function $S(e){return"payload"in e&&typeof e.payload=="string"&&"signatures"in e&&Array.isArray(e.signatures)}function iX(e){return"payload"in e&&e.payload instanceof Uint8Array&&"signatures"in e&&Array.isArray(e.signatures)}function aX(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}function NS(e){return"ciphertext"in e&&typeof e.ciphertext=="string"&&"iv"in e&&typeof e.iv=="string"&&"protected"in e&&typeof e.protected=="string"&&"tag"in e&&typeof e.tag=="string"}function kS(e){if(typeof e=="string"){const r=e.split(".");if(r.length===3)return qQ(r);if(r.length===5)return XQ(r);throw new Error("Not a valid JOSE string")}if($S(e)||NS(e))return e;throw new Error("Not a valid unencoded JOSE object")}function uX(e){typeof e=="string"&&(e=kS(e));let r;if($S(e))r=GQ(e);else if(NS(e))r=eX(e);else throw new Error("Not a valid JOSE object");return new Uint8Array(_S(r))}function sX(e){let r;try{r=yS(e)}catch{throw new Error("Not a valid DAG-JOSE object")}if(iX(r))return YQ(r);if(aX(r))return rX(r);throw new Error("Not a valid DAG-JOSE object")}const cX=Object.freeze(Object.defineProperty({__proto__:null,code:oX,decode:sX,encode:uX,name:nX,toGeneral:kS},Symbol.toStringTag,{value:"Module"}));function Tr(e){const r=new globalThis.AbortController;function t(){r.abort();for(const i of e)(i==null?void 0:i.removeEventListener)!=null&&i.removeEventListener("abort",t)}for(const i of e){if((i==null?void 0:i.aborted)===!0){t();break}(i==null?void 0:i.addEventListener)!=null&&i.addEventListener("abort",t)}function n(){for(const i of e)(i==null?void 0:i.removeEventListener)!=null&&i.removeEventListener("abort",t)}const o=r.signal;return o.clear=n,o}const lX="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let fX=(e=21)=>{let r="",t=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)r+=lX[t[e]&63];return r};function dX(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var hX=dX;const pX=bl(hX),MS=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,Py=pX(),Ad=MS&&!Py,vX=Py&&MS,_X=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!Py,Id=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;async function*Rd(e,r={}){const t=e.getReader();try{for(;;){const n=await t.read();if(n.done)return;yield n.value}}finally{r.preventCancel!==!0&&await t.cancel(),t.releaseLock()}}function r0(e,r){for(const t in r)Object.defineProperty(e,t,{value:r[t],enumerable:!0,configurable:!0});return e}function yX(e,r,t){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof r=="object"&&(t=r,r=""),r&&(t.code=r);try{return r0(e,t)}catch{t.message=e.message,t.stack=e.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(e)),r0(new o,t)}}var bX=yX;const Zt=bl(bX);function jd(e){const[r,t]=e[Symbol.asyncIterator]!=null?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>r.next(),push:o=>{n.push(o)},next:()=>n.length>0?{done:!1,value:n.shift()}:r.next(),[t](){return this}}}function mX(e){return e[Symbol.asyncIterator]!=null}function n0(e,r){let t=0;if(mX(e))return async function*(){for await(const c of e)yield r(c,t++)}();const n=jd(e),{value:o,done:i}=n.next();if(i===!0)return function*(){}();const a=r(o,t++);if(typeof a.then=="function")return async function*(){yield await a;for await(const c of n)yield r(c,t++)}();const s=r;return function*(){yield a;for(const c of n)yield s(c,t++)}()}let gX=class extends Error{constructor(t){super(t.statusText);m(this,"response");this.name="HTTPError",this.response=t}};class wX extends Error{constructor(r="Invalid mtime"){super(r),this.name="InvalidMtimeError"}}function Vo(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function pl(e){return e.constructor!=null&&(e.constructor.name==="Blob"||e.constructor.name==="File")&&typeof e.stream=="function"}function xv(e){return typeof e=="object"&&(e.path!=null||e.content!=null)}function vl(e){return typeof(e==null?void 0:e.getReader)=="function"}function DS(e){if(e!=null)return typeof e=="string"&&(e=parseInt(e,8)),e&4095}function OX(e){return Object.prototype.hasOwnProperty.call(e,"secs")}function EX(e){return Object.prototype.hasOwnProperty.call(e,"Seconds")}function SX(e){return Array.isArray(e)}function $d(e){if(e!=null){if(OX(e)&&(e={secs:e.secs,nsecs:e.nsecs}),EX(e)&&(e={secs:BigInt(e.Seconds),nsecs:e.FractionalNanoseconds}),SX(e)&&(e={secs:BigInt(e[0]),nsecs:e[1]}),e instanceof Date){const r=e.getTime(),t=Math.floor(r/1e3);e={secs:BigInt(t),nsecs:(r-t*1e3)*1e3}}if(typeof e=="bigint"){const r=e/BigInt(1e9),t=e-r*BigInt(1e9);e={secs:r,nsecs:Number(t)}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw new wX("mtime-nsecs must be within the range [0,999999999]");return e}}}async function*PX(e,r){if(typeof e=="string"||e instanceof String||Vo(e)||pl(e)||e._readableState!=null)throw Zt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(vl(e)&&(e=Rd(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=jd(e),{value:n,done:o}=await t.peek();if(o===!0){yield*[];return}if(t.push(n),Number.isInteger(n))throw Zt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState!=null){yield*n0(t,async i=>$p({content:i},r));return}if(Vo(n)){yield $p({content:t},r);return}if(xv(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||vl(n)||pl(n)){yield*n0(t,async i=>$p(i,r));return}}throw xv(e)?Zt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):Zt(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}async function $p(e,r){const{path:t,mode:n,mtime:o,content:i}=e,a={path:t??"",mode:DS(n),mtime:$d(o)};return i!=null?a.content=await r(i):t==null&&(a.content=await r(e)),a}const LS=Symbol.for("@libp2p/peer-id");class Et extends Error{constructor(r="Invalid parameters"){super(r),this.name="InvalidParametersError"}}m(Et,"name","InvalidParametersError");class Ty extends Error{constructor(r="Invalid public key"){super(r),this.name="InvalidPublicKeyError"}}m(Ty,"name","InvalidPublicKeyError");class US extends Error{constructor(r="Invalid CID"){super(r),this.name="InvalidCIDError"}}m(US,"name","InvalidCIDError");class FS extends Error{constructor(r="Invalid Multihash"){super(r),this.name="InvalidMultihashError"}}m(FS,"name","InvalidMultihashError");class Cy extends Error{constructor(r="Unsupported key type"){super(r),this.name="UnsupportedKeyTypeError"}}m(Cy,"name","UnsupportedKeyTypeError");function TX(e){return e[Symbol.asyncIterator]!=null}function xS(e){if(TX(e))return(async()=>{const t=[];for await(const n of e)t.push(n);return t})();const r=[];for(const t of e)r.push(t);return r}async function BS(e){if(Vo(e))return new Blob([e]);if(typeof e=="string"||e instanceof String)return new Blob([e.toString()]);if(pl(e))return e;if(vl(e)&&(e=Rd(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const r=jd(e),{value:t,done:n}=await r.peek();if(n===!0)return o0(r);if(r.push(t),Number.isInteger(t))return new Blob([Uint8Array.from(await xS(r))]);if(Vo(t)||typeof t=="string"||t instanceof String)return o0(r)}throw new Et(`Unexpected input: ${e}`)}async function o0(e){const r=[];for await(const t of e)r.push(t);return new Blob(r)}function CX(e){return PX(e,BS)}function Ay(e){if(e!=null)return typeof e=="string"?e:e.toString(8).padStart(4,"0")}async function i0(e,r,t={},n){const o=[],i=new FormData;let a=0,s=0;for await(const{content:c,path:u,mode:l,mtime:d}of CX(e)){let h="";const p=c!=null?"file":"dir";a>0&&(h=`-${a}`);let v=p+h;const _=[];if(l!=null&&_.push(`mode=${Ay(l)}`),d!=null){const{secs:b,nsecs:w}=d;_.push(`mtime=${b}`),w!=null&&_.push(`mtime-nsecs=${w}`)}if(_.length>0&&(v=`${v}?${_.join("&")}`),c!=null){i.set(v,c,u!=null?encodeURIComponent(u):void 0);const b=s+c.size;o.push({name:u,start:s,end:b}),s=b}else if(u!=null)i.set(v,new File([""],encodeURIComponent(u),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");a++}return{total:s,parts:o,headers:t,body:i}}async function hn(e,r,t={},n=`-----------------------------${fX()}`){let o=i0;return vX&&(o=i0),o(e,r,t,n)}function He(e){if(e==null)return e;const r=/^[A-Z]+$/,t={};return Object.keys(e).reduce((n,o)=>(r.test(o)?n[o.toLowerCase()]=e[o]:r.test(o[0])?n[o[0].toLowerCase()+o.slice(1)]=e[o]:n[o]=e[o],n),t)}function j({arg:e,searchParams:r,hashAlg:t,mtime:n,mode:o,...i}={}){r!=null&&(i={...i,...r}),t!=null&&(i.hash=t),n!=null&&(n=$d(n),i.mtime=n.secs,i.mtimeNsecs=n.nsecs),o!=null&&(i.mode=Ay(o)),isNaN(i.timeout)||(i.timeout=`${i.timeout}ms`),e==null?e=[]:Array.isArray(e)||(e=[e]);const a=new URLSearchParams(i);return e.forEach(s=>{a.append("arg",s)}),a}function VS(e){return async function*(t,n={}){const o=new AbortController,i=Tr([o.signal,n.signal]);try{const{headers:a,body:s,total:c,parts:u}=await hn(t,o,n.headers),[l,d]=typeof n.progress=="function"?AX(c,n.progress,u):[void 0,void 0],h=await e.post("add",{searchParams:j({"stream-channels":!0,...n,progress:!!l}),onUploadProgress:d,signal:i,headers:a,body:s});for await(let p of h.ndjson())p=He(p),p.hash!==void 0?yield RX(p):l!=null&&l(p.bytes??0,p.name)}finally{i.clear()}}}const AX=(e,r,t)=>t!=null?[void 0,IX(e,t,r)]:[r,void 0],IX=(e,r,t)=>{let n=0;const o=r.length;return({loaded:i,total:a})=>{const s=Math.floor(i/a*e);for(;n<o;){const{start:c,end:u,name:l}=r[n];if(s<u){t(s-c,l);break}else t(u-c,l),n+=1}}};function RX({name:e,hash:r,size:t,mode:n,mtime:o,mtimeNsecs:i}){const a={path:e,cid:Q.parse(r),size:parseInt(t)};return n!=null&&(a.mode=parseInt(n,8)),o!=null&&(a.mtime={secs:o,nsecs:i??0}),a}function jX(e){return e[Symbol.asyncIterator]!=null}function Nd(e){if(jX(e))return(async()=>{let t;for await(const n of e)t=n;return t})();let r;for(const t of e)r=t;return r}async function*$X(e,r){if(e==null)throw Zt(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if(typeof e=="string"||e instanceof String){yield mc(e.toString(),r);return}if(Vo(e)||pl(e)){yield mc(e,r);return}if(vl(e)&&(e=Rd(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=jd(e),{value:n,done:o}=await t.peek();if(o===!0){yield{content:[]};return}if(t.push(n),Number.isInteger(n)||Vo(n)||typeof n=="string"||n instanceof String){yield mc(t,r);return}throw Zt(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(xv(e)){yield mc(e,r);return}throw Zt(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function mc(e,r){const{path:t,mode:n,mtime:o,content:i}=e,a={path:t??"",mode:DS(n),mtime:$d(o)};return i!=null?a.content=await r(i):t==null&&(a.content=await r(e)),a}function NX(e){return $X(e,BS)}function kX(e){const r=VS(e);return async function(n,o={}){const i=NX(n),a=r(i,o),s=await Nd(a);if(s==null)throw new Error("Invalid body");return s}}const WS=Symbol.for("@achingbrain/uint8arraylist");function a0(e,r){if(r==null||r<0)throw new RangeError("index is out of bounds");let t=0;for(const n of e){const o=t+n.byteLength;if(r<o)return{buf:n,index:r-t};t=o}throw new RangeError("index is out of bounds")}function gc(e){return!!(e!=null&&e[WS])}var L0;class vt{constructor(...r){m(this,"bufs");m(this,"length");m(this,L0,!0);this.bufs=[],this.length=0,r.length>0&&this.appendAll(r)}*[(L0=WS,Symbol.iterator)](){yield*this.bufs}get byteLength(){return this.length}append(...r){this.appendAll(r)}appendAll(r){let t=0;for(const n of r)if(n instanceof Uint8Array)t+=n.byteLength,this.bufs.push(n);else if(gc(n))t+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=t}prepend(...r){this.prependAll(r)}prependAll(r){let t=0;for(const n of r.reverse())if(n instanceof Uint8Array)t+=n.byteLength,this.bufs.unshift(n);else if(gc(n))t+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=t}get(r){const t=a0(this.bufs,r);return t.buf[t.index]}set(r,t){const n=a0(this.bufs,r);n.buf[n.index]=t}write(r,t=0){if(r instanceof Uint8Array)for(let n=0;n<r.length;n++)this.set(t+n,r[n]);else if(gc(r))for(let n=0;n<r.length;n++)this.set(t+n,r.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(r){if(r=Math.trunc(r),!(Number.isNaN(r)||r<=0)){if(r===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(r>=this.bufs[0].byteLength)r-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(r),this.length-=r;break}}}slice(r,t){const{bufs:n,length:o}=this._subList(r,t);return mr(n,o)}subarray(r,t){const{bufs:n,length:o}=this._subList(r,t);return n.length===1?n[0]:mr(n,o)}sublist(r,t){const{bufs:n,length:o}=this._subList(r,t),i=new vt;return i.length=o,i.bufs=[...n],i}_subList(r,t){if(r=r??0,t=t??this.length,r<0&&(r=this.length+r),t<0&&(t=this.length+t),r<0||t>this.length)throw new RangeError("index is out of bounds");if(r===t)return{bufs:[],length:0};if(r===0&&t===this.length)return{bufs:this.bufs,length:this.length};const n=[];let o=0;for(let i=0;i<this.bufs.length;i++){const a=this.bufs[i],s=o,c=s+a.byteLength;if(o=c,r>=c)continue;const u=r>=s&&r<c,l=t>s&&t<=c;if(u&&l){if(r===s&&t===c){n.push(a);break}const d=r-s;n.push(a.subarray(d,d+(t-r)));break}if(u){if(r===0){n.push(a);continue}n.push(a.subarray(r-s));continue}if(l){if(t===c){n.push(a);break}n.push(a.subarray(0,t-s));break}n.push(a)}return{bufs:n,length:t-r}}indexOf(r,t=0){if(!gc(r)&&!(r instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const n=r instanceof Uint8Array?r:r.subarray();if(t=Number(t??0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),r.length===0)return t>this.length?this.length:t;const o=n.byteLength;if(o===0)throw new TypeError("search must be at least 1 byte long");const i=256,a=new Int32Array(i);for(let d=0;d<i;d++)a[d]=-1;for(let d=0;d<o;d++)a[n[d]]=d;const s=a,c=this.byteLength-n.byteLength,u=n.byteLength-1;let l;for(let d=t;d<=c;d+=l){l=0;for(let h=u;h>=0;h--){const p=this.get(d+h);if(n[h]!==p){l=Math.max(1,h-s[p]);break}}if(l===0)return d}return-1}getInt8(r){const t=this.subarray(r,r+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getInt8(0)}setInt8(r,t){const n=Yr(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,t),this.write(n,r)}getInt16(r,t){const n=this.subarray(r,r+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,t)}setInt16(r,t,n){const o=$r(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt16(0,t,n),this.write(o,r)}getInt32(r,t){const n=this.subarray(r,r+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,t)}setInt32(r,t,n){const o=$r(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt32(0,t,n),this.write(o,r)}getBigInt64(r,t){const n=this.subarray(r,r+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,t)}setBigInt64(r,t,n){const o=$r(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigInt64(0,t,n),this.write(o,r)}getUint8(r){const t=this.subarray(r,r+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0)}setUint8(r,t){const n=Yr(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,t),this.write(n,r)}getUint16(r,t){const n=this.subarray(r,r+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,t)}setUint16(r,t,n){const o=$r(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint16(0,t,n),this.write(o,r)}getUint32(r,t){const n=this.subarray(r,r+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,t)}setUint32(r,t,n){const o=$r(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint32(0,t,n),this.write(o,r)}getBigUint64(r,t){const n=this.subarray(r,r+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,t)}setBigUint64(r,t,n){const o=$r(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigUint64(0,t,n),this.write(o,r)}getFloat32(r,t){const n=this.subarray(r,r+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,t)}setFloat32(r,t,n){const o=$r(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat32(0,t,n),this.write(o,r)}getFloat64(r,t){const n=this.subarray(r,r+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,t)}setFloat64(r,t,n){const o=$r(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat64(0,t,n),this.write(o,r)}equals(r){if(r==null||!(r instanceof vt)||r.bufs.length!==this.bufs.length)return!1;for(let t=0;t<this.bufs.length;t++)if(!Qr(this.bufs[t],r.bufs[t]))return!1;return!0}static fromUint8Arrays(r,t){const n=new vt;return n.bufs=r,t==null&&(t=r.reduce((o,i)=>o+i.byteLength,0)),n.length=t,n}}const MX=parseInt("11111",2),Bv=parseInt("10000000",2),DX=parseInt("01111111",2),u0={0:na,1:na,2:LX,3:xX,4:BX,5:FX,6:UX,16:na,22:na,48:na};function kd(e,r={offset:0}){const t=e[r.offset]&MX;if(r.offset++,u0[t]!=null)return u0[t](e,r);throw new Error("No decoder for tag "+t)}function Xs(e,r){let t=0;if((e[r.offset]&Bv)===Bv){const n=e[r.offset]&DX;let o="0x";r.offset++;for(let i=0;i<n;i++,r.offset++)o+=e[r.offset].toString(16).padStart(2,"0");t=parseInt(o,16)}else t=e[r.offset],r.offset++;return t}function na(e,r){Xs(e,r);const t=[];for(;!(r.offset>=e.byteLength);){const n=kd(e,r);if(n===null)break;t.push(n)}return t}function LX(e,r){const t=Xs(e,r),n=r.offset,o=r.offset+t,i=[];for(let a=n;a<o;a++)a===n&&e[a]===0||i.push(e[a]);return r.offset+=t,Uint8Array.from(i)}function UX(e,r){const t=Xs(e,r),n=r.offset+t,o=e[r.offset];r.offset++;let i=0,a=0;o<40?(i=0,a=o):o<80?(i=1,a=o-40):(i=2,a=o-80);let s=`${i}.${a}`,c=[];for(;r.offset<n;){const u=e[r.offset];if(r.offset++,c.push(u&127),u<128){c.reverse();let l=0;for(let d=0;d<c.length;d++)l+=c[d]<<d*7;s+=`.${l}`,c=[]}}return s}function FX(e,r){return r.offset++,null}function xX(e,r){const t=Xs(e,r),n=e[r.offset];r.offset++;const o=e.subarray(r.offset,r.offset+t-1);if(r.offset+=t,n!==0)throw new Error("Unused bits in bit string is unimplemented");return o}function BX(e,r){const t=Xs(e,r),n=e.subarray(r.offset,r.offset+t);return r.offset+=t,n}function VX(e){let r=e.toString(16);r.length%2===1&&(r="0"+r);const t=new vt;for(let n=0;n<r.length;n+=2)t.append(Uint8Array.from([parseInt(`${r[n]}${r[n+1]}`,16)]));return t}function Iy(e){if(e.byteLength<128)return Uint8Array.from([e.byteLength]);const r=VX(e.byteLength);return new vt(Uint8Array.from([r.byteLength|Bv]),r)}function Vv(e){const r=new vt,t=128;return(e.subarray()[0]&t)===t&&r.append(Uint8Array.from([0])),r.append(e),new vt(Uint8Array.from([2]),Iy(r),r)}function zS(e){const r=Uint8Array.from([0]),t=new vt(r,e);return new vt(Uint8Array.from([3]),Iy(t),t)}function ma(e,r=48){const t=new vt;for(const n of e)t.append(n);return new vt(Uint8Array.from([r]),Iy(t),t)}async function WX(e,r,t){const n=await crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:e.crv??"P-256"},!1,["verify"]);return crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},n,r,t.subarray())}const zX=Uint8Array.from([6,8,42,134,72,206,61,3,1,7]),qX=Uint8Array.from([6,5,43,129,4,0,34]),HX=Uint8Array.from([6,5,43,129,4,0,35]),GX={ext:!0,kty:"EC",crv:"P-256"},KX={ext:!0,kty:"EC",crv:"P-384"},YX={ext:!0,kty:"EC",crv:"P-521"},Np=32,kp=48,Mp=66;function qS(e){const r=kd(e);return ZX(r)}function ZX(e){const r=e[1][1][0],t=1;let n,o;if(r.byteLength===Np*2+1)return n=we(r.subarray(t,t+Np),"base64url"),o=we(r.subarray(t+Np),"base64url"),new Dp({...GX,key_ops:["verify"],x:n,y:o});if(r.byteLength===kp*2+1)return n=we(r.subarray(t,t+kp),"base64url"),o=we(r.subarray(t+kp),"base64url"),new Dp({...KX,key_ops:["verify"],x:n,y:o});if(r.byteLength===Mp*2+1)return n=we(r.subarray(t,t+Mp),"base64url"),o=we(r.subarray(t+Mp),"base64url"),new Dp({...YX,key_ops:["verify"],x:n,y:o});throw new Et(`coordinates were wrong length, got ${r.byteLength}, expected 65, 97 or 133`)}function QX(e){return ma([Vv(Uint8Array.from([1])),ma([XX(e.crv)],160),ma([zS(new vt(Uint8Array.from([4]),St(e.x??"","base64url"),St(e.y??"","base64url")))],161)]).subarray()}function XX(e){if(e==="P-256")return zX;if(e==="P-384")return qX;if(e==="P-521")return HX;throw new Et(`Invalid curve ${e}`)}class Dp{constructor(r){m(this,"type","ECDSA");m(this,"jwk");m(this,"_raw");this.jwk=r}get raw(){return this._raw==null&&(this._raw=QX(this.jwk)),this._raw}toMultihash(){return Zr.digest(Ny(this))}toCID(){return Q.createV1(114,this.toMultihash())}toString(){return De.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:Qr(this.raw,r.raw)}async verify(r,t){return WX(this.jwk,t,r)}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qt=BigInt(0),rt=BigInt(1),s0=BigInt(2),JX=BigInt(8),eJ={zip215:!0};function tJ(e){const r=DT(e);return LT(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...r})}function rJ(e){const r=tJ(e),{Fp:t,n,prehash:o,hash:i,randomBytes:a,nByteLength:s,h:c}=r,u=s0<<BigInt(s*8)-rt,l=t.create,d=V0(r.n,r.nBitLength);function h(k,P){const C=t.sqr(k),R=t.sqr(P),V=t.add(t.mul(r.a,C),R),q=t.add(t.ONE,t.mul(r.d,t.mul(C,R)));return t.eql(V,q)}if(!h(r.Gx,r.Gy))throw new Error("bad curve params: generator point");const p=r.uvRatio||((k,P)=>{try{return{isValid:!0,value:t.sqrt(k*t.inv(P))}}catch{return{isValid:!1,value:qt}}}),v=r.adjustScalarBytes||(k=>k),_=r.domain||((k,P,C)=>{if(Uh("phflag",C),P.length||C)throw new Error("Contexts/pre-hash are not supported");return k});function b(k,P,C=!1){const R=C?rt:qt;Vi("coordinate "+k,P,R,u)}function w(k){if(!(k instanceof O))throw new Error("ExtendedPoint expected")}const E=Vy((k,P)=>{const{ex:C,ey:R,ez:V}=k,q=k.is0();P==null&&(P=q?JX:t.inv(V));const F=l(C*P),te=l(R*P),Z=l(V*P);if(q)return{x:qt,y:rt};if(Z!==rt)throw new Error("invZ was invalid");return{x:F,y:te}}),S=Vy(k=>{const{a:P,d:C}=r;if(k.is0())throw new Error("bad point: ZERO");const{ex:R,ey:V,ez:q,et:F}=k,te=l(R*R),Z=l(V*V),ue=l(q*q),y=l(ue*ue),T=l(te*P),M=l(ue*l(T+Z)),x=l(y+l(C*l(te*Z)));if(M!==x)throw new Error("bad point: equation left != right (1)");const K=l(R*V),me=l(q*F);if(K!==me)throw new Error("bad point: equation left != right (2)");return!0});class O{constructor(P,C,R,V){b("x",P),b("y",C),b("z",R,!0),b("t",V),this.ex=P,this.ey=C,this.ez=R,this.et=V,Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(P){if(P instanceof O)throw new Error("extended point not allowed");const{x:C,y:R}=P||{};return b("x",C),b("y",R),new O(C,R,rt,l(C*R))}static normalizeZ(P){const C=UT(t,P.map(R=>R.ez));return P.map((R,V)=>R.toAffine(C[V])).map(O.fromAffine)}static msm(P,C){return FT(O,d,P,C)}_setWindowSize(P){I.setWindowSize(this,P)}assertValidity(){S(this)}equals(P){w(P);const{ex:C,ey:R,ez:V}=this,{ex:q,ey:F,ez:te}=P,Z=l(C*te),ue=l(q*V),y=l(R*te),T=l(F*V);return Z===ue&&y===T}is0(){return this.equals(O.ZERO)}negate(){return new O(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:P}=r,{ex:C,ey:R,ez:V}=this,q=l(C*C),F=l(R*R),te=l(s0*l(V*V)),Z=l(P*q),ue=C+R,y=l(l(ue*ue)-q-F),T=Z+F,M=T-te,x=Z-F,K=l(y*M),me=l(T*x),je=l(y*x),yt=l(M*T);return new O(K,me,yt,je)}add(P){w(P);const{a:C,d:R}=r,{ex:V,ey:q,ez:F,et:te}=this,{ex:Z,ey:ue,ez:y,et:T}=P,M=l(V*Z),x=l(q*ue),K=l(te*R*T),me=l(F*y),je=l((V+q)*(Z+ue)-M-x),yt=me-K,Cr=me+K,fo=l(x-C*M),Di=l(je*yt),Li=l(Cr*fo),Ui=l(je*fo),Fi=l(yt*Cr);return new O(Di,Li,Fi,Ui)}subtract(P){return this.add(P.negate())}wNAF(P){return I.wNAFCached(this,P,O.normalizeZ)}multiply(P){const C=P;Vi("scalar",C,rt,n);const{p:R,f:V}=this.wNAF(C);return O.normalizeZ([R,V])[0]}multiplyUnsafe(P,C=O.ZERO){const R=P;return Vi("scalar",R,qt,n),R===qt?$:this.is0()||R===rt?this:I.wNAFCachedUnsafe(this,R,O.normalizeZ,C)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return I.unsafeLadder(this,n).is0()}toAffine(P){return E(this,P)}clearCofactor(){const{h:P}=r;return P===rt?this:this.multiplyUnsafe(P)}static fromHex(P,C=!1){const{d:R,a:V}=r,q=t.BYTES;P=ar("pointHex",P,q),Uh("zip215",C);const F=P.slice(),te=P[q-1];F[q-1]=te&-129;const Z=Fh(F),ue=C?u:t.ORDER;Vi("pointHex.y",Z,qt,ue);const y=l(Z*Z),T=l(y-rt),M=l(R*y-V);let{isValid:x,value:K}=p(T,M);if(!x)throw new Error("Point.fromHex: invalid y coordinate");const me=(K&rt)===rt,je=(te&128)!==0;if(!C&&K===qt&&je)throw new Error("Point.fromHex: x=0 and x_0=1");return je!==me&&(K=l(-K)),O.fromAffine({x:K,y:Z})}static fromPrivateKey(P){const{scalar:C}=ae(P);return A.multiply(C)}toRawBytes(){const{x:P,y:C}=this.toAffine(),R=Wy(C,t.BYTES);return R[R.length-1]|=P&rt?128:0,R}toHex(){return BT(this.toRawBytes())}}O.BASE=new O(r.Gx,r.Gy,rt,l(r.Gx*r.Gy)),O.ZERO=new O(qt,rt,rt,qt);const{BASE:A,ZERO:$}=O,I=xT(O,s*8);function L(k){return sr(k,n)}function X(k){return L(Fh(k))}function ae(k){const P=t.BYTES;k=ar("private key",k,P);const C=ar("hashed private key",i(k),2*P),R=v(C.slice(0,P)),V=C.slice(P,2*P),q=X(R);return{head:R,prefix:V,scalar:q}}function _e(k){const{head:P,prefix:C,scalar:R}=ae(k),V=A.multiply(R),q=V.toRawBytes();return{head:P,prefix:C,scalar:R,point:V,pointBytes:q}}function ne(k){return _e(k).pointBytes}function ve(k=Uint8Array.of(),...P){const C=zy(...P);return X(i(_(C,ar("context",k),!!o)))}function it(k,P,C={}){k=ar("message",k),o&&(k=o(k));const{prefix:R,scalar:V,pointBytes:q}=_e(P),F=ve(C.context,R,k),te=A.multiply(F).toRawBytes(),Z=ve(C.context,te,q,k),ue=L(F+Z*V);Vi("signature.s",ue,qt,n);const y=zy(te,Wy(ue,t.BYTES));return ar("result",y,t.BYTES*2)}const ee=eJ;function be(k,P,C,R=ee){const{context:V,zip215:q}=R,F=t.BYTES;k=ar("signature",k,2*F),P=ar("message",P),C=ar("publicKey",C,F),q!==void 0&&Uh("zip215",q),o&&(P=o(P));const te=Fh(k.slice(F,2*F));let Z,ue,y;try{Z=O.fromHex(C,q),ue=O.fromHex(k.slice(0,F),q),y=A.multiplyUnsafe(te)}catch{return!1}if(!q&&Z.isSmallOrder())return!1;const T=ve(V,ue.toRawBytes(),Z.toRawBytes(),P);return ue.add(Z.multiplyUnsafe(T)).subtract(y).clearCofactor().equals(O.ZERO)}return A._setWindowSize(8),{CURVE:r,getPublicKey:ne,sign:it,verify:be,ExtendedPoint:O,utils:{getExtendedPublicKey:_e,randomPrivateKey:()=>a(t.BYTES),precompute(k=8,P=O.BASE){return P._setWindowSize(k),P.multiply(BigInt(3)),P}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ry=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),c0=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const nJ=BigInt(1),l0=BigInt(2);BigInt(3);const oJ=BigInt(5),iJ=BigInt(8);function aJ(e){const r=BigInt(10),t=BigInt(20),n=BigInt(40),o=BigInt(80),i=Ry,s=e*e%i*e%i,c=Wt(s,l0,i)*s%i,u=Wt(c,nJ,i)*e%i,l=Wt(u,oJ,i)*u%i,d=Wt(l,r,i)*l%i,h=Wt(d,t,i)*d%i,p=Wt(h,n,i)*h%i,v=Wt(p,o,i)*p%i,_=Wt(v,o,i)*p%i,b=Wt(_,r,i)*l%i;return{pow_p_5_8:Wt(b,l0,i)*e%i,b2:s}}function uJ(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function sJ(e,r){const t=Ry,n=sr(r*r*r,t),o=sr(n*n*r,t),i=aJ(e*o).pow_p_5_8;let a=sr(e*n*i,t);const s=sr(r*a*a,t),c=a,u=sr(a*c0,t),l=s===e,d=s===sr(-e,t),h=s===sr(-e*c0,t);return l&&(a=c),(d||h)&&(a=u),VT(a,t)&&(a=sr(-a,t)),{isValid:l||d,value:a}}const f0=V0(Ry,void 0,!0),cJ={a:f0.create(BigInt(-1)),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:f0,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:iJ,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:kT,randomBytes:NT,adjustScalarBytes:uJ,uvRatio:sJ},lJ=rJ(cJ),HS=32;function fJ(e,r,t){return lJ.verify(r,t instanceof Uint8Array?t:t.subarray(),e)}class dJ{constructor(r){m(this,"type","Ed25519");m(this,"raw");this.raw=KS(r,HS)}toMultihash(){return Zr.digest(Ny(this))}toCID(){return Q.createV1(114,this.toMultihash())}toString(){return De.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:Qr(this.raw,r.raw)}verify(r,t){return fJ(this.raw,t,r)}}function GS(e){return e=KS(e,HS),new dJ(e)}function KS(e,r){if(e=Uint8Array.from(e??[]),e.length!==r)throw new Et(`Key must be a Uint8Array of length ${r}, got ${e.length}`);return e}const jy=new Float32Array([-0]),Lr=new Uint8Array(jy.buffer);function hJ(e,r,t){jy[0]=e,r[t]=Lr[0],r[t+1]=Lr[1],r[t+2]=Lr[2],r[t+3]=Lr[3]}function pJ(e,r){return Lr[0]=e[r],Lr[1]=e[r+1],Lr[2]=e[r+2],Lr[3]=e[r+3],jy[0]}const $y=new Float64Array([-0]),Ze=new Uint8Array($y.buffer);function vJ(e,r,t){$y[0]=e,r[t]=Ze[0],r[t+1]=Ze[1],r[t+2]=Ze[2],r[t+3]=Ze[3],r[t+4]=Ze[4],r[t+5]=Ze[5],r[t+6]=Ze[6],r[t+7]=Ze[7]}function _J(e,r){return Ze[0]=e[r],Ze[1]=e[r+1],Ze[2]=e[r+2],Ze[3]=e[r+3],Ze[4]=e[r+4],Ze[5]=e[r+5],Ze[6]=e[r+6],Ze[7]=e[r+7],$y[0]}const yJ=BigInt(Number.MAX_SAFE_INTEGER),bJ=BigInt(Number.MIN_SAFE_INTEGER);class Je{constructor(r,t){m(this,"lo");m(this,"hi");this.lo=r|0,this.hi=t|0}toNumber(r=!1){if(!r&&this.hi>>>31>0){const t=~this.lo+1>>>0;let n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(r=!1){if(r)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const t=~this.lo+1>>>0;let n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(BigInt(t)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(r=!1){return this.toBigInt(r).toString()}zzEncode(){const r=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^r)>>>0,this.lo=(this.lo<<1^r)>>>0,this}zzDecode(){const r=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^r)>>>0,this.hi=(this.hi>>>1^r)>>>0,this}length(){const r=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?r<16384?r<128?1:2:r<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}static fromBigInt(r){if(r===0n)return Dn;if(r<yJ&&r>bJ)return this.fromNumber(Number(r));const t=r<0n;t&&(r=-r);let n=r>>32n,o=r-(n<<32n);return t&&(n=~n|0n,o=~o|0n,++o>d0&&(o=0n,++n>d0&&(n=0n))),new Je(Number(o),Number(n))}static fromNumber(r){if(r===0)return Dn;const t=r<0;t&&(r=-r);let n=r>>>0,o=(r-n)/4294967296>>>0;return t&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new Je(n,o)}static from(r){return typeof r=="number"?Je.fromNumber(r):typeof r=="bigint"?Je.fromBigInt(r):typeof r=="string"?Je.fromBigInt(BigInt(r)):r.low!=null||r.high!=null?new Je(r.low>>>0,r.high>>>0):Dn}}const Dn=new Je(0,0);Dn.toBigInt=function(){return 0n};Dn.zzEncode=Dn.zzDecode=function(){return this};Dn.length=function(){return 1};const d0=4294967296n;function mJ(e){let r=0,t=0;for(let n=0;n<e.length;++n)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:(t&64512)===55296&&(e.charCodeAt(n+1)&64512)===56320?(++n,r+=4):r+=3;return r}function gJ(e,r,t){if(t-r<1)return"";let o;const i=[];let a=0,s;for(;r<t;)s=e[r++],s<128?i[a++]=s:s>191&&s<224?i[a++]=(s&31)<<6|e[r++]&63:s>239&&s<365?(s=((s&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,i[a++]=55296+(s>>10),i[a++]=56320+(s&1023)):i[a++]=(s&15)<<12|(e[r++]&63)<<6|e[r++]&63,a>8191&&((o??(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o!=null?(a>0&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))}function YS(e,r,t){const n=t;let o,i;for(let a=0;a<e.length;++a)o=e.charCodeAt(a),o<128?r[t++]=o:o<2048?(r[t++]=o>>6|192,r[t++]=o&63|128):(o&64512)===55296&&((i=e.charCodeAt(a+1))&64512)===56320?(o=65536+((o&1023)<<10)+(i&1023),++a,r[t++]=o>>18|240,r[t++]=o>>12&63|128,r[t++]=o>>6&63|128,r[t++]=o&63|128):(r[t++]=o>>12|224,r[t++]=o>>6&63|128,r[t++]=o&63|128);return t-n}function At(e,r){return RangeError(`index out of range: ${e.pos} + ${r??1} > ${e.len}`)}function wc(e,r){return(e[r-4]|e[r-3]<<8|e[r-2]<<16|e[r-1]<<24)>>>0}class wJ{constructor(r){m(this,"buf");m(this,"pos");m(this,"len");m(this,"_slice",Uint8Array.prototype.subarray);this.buf=r,this.pos=0,this.len=r.length}uint32(){let r=4294967295;if(r=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(r=(r|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return r;if((this.pos+=5)>this.len)throw this.pos=this.len,At(this,10);return r}int32(){return this.uint32()|0}sint32(){const r=this.uint32();return r>>>1^-(r&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw At(this,4);return wc(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw At(this,4);return wc(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw At(this,4);const r=pJ(this.buf,this.pos);return this.pos+=4,r}double(){if(this.pos+8>this.len)throw At(this,4);const r=_J(this.buf,this.pos);return this.pos+=8,r}bytes(){const r=this.uint32(),t=this.pos,n=this.pos+r;if(n>this.len)throw At(this,r);return this.pos+=r,t===n?new Uint8Array(0):this.buf.subarray(t,n)}string(){const r=this.bytes();return gJ(r,0,r.length)}skip(r){if(typeof r=="number"){if(this.pos+r>this.len)throw At(this,r);this.pos+=r}else do if(this.pos>=this.len)throw At(this);while(this.buf[this.pos++]&128);return this}skipType(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${r} at offset ${this.pos}`)}return this}readLongVarint(){const r=new Je(0,0);let t=0;if(this.len-this.pos>4){for(;t<4;++t)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw At(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,r}if(this.len-this.pos>4){for(;t<5;++t)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;t<5;++t){if(this.pos>=this.len)throw At(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw At(this,8);const r=wc(this.buf,this.pos+=4),t=wc(this.buf,this.pos+=4);return new Je(r,t)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const r=UE(this.buf,this.pos);return this.pos+=rr(r),r}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function OJ(e){return new wJ(e instanceof Uint8Array?e:e.subarray())}function ZS(e,r,t){const n=OJ(e);return r.decode(n,void 0,t)}function EJ(e){let n,o=8192;return function(a){if(a<1||a>4096)return Yr(a);o+a>8192&&(n=Yr(8192),o=0);const s=n.subarray(o,o+=a);return o&7&&(o=(o|7)+1),s}}class ca{constructor(r,t,n){m(this,"fn");m(this,"len");m(this,"next");m(this,"val");this.fn=r,this.len=t,this.next=void 0,this.val=n}}function Lp(){}class SJ{constructor(r){m(this,"head");m(this,"tail");m(this,"len");m(this,"next");this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}}const PJ=EJ();function TJ(e){return globalThis.Buffer!=null?Yr(e):PJ(e)}class Wv{constructor(){m(this,"len");m(this,"head");m(this,"tail");m(this,"states");this.len=0,this.head=new ca(Lp,0,0),this.tail=this.head,this.states=null}_push(r,t,n){return this.tail=this.tail.next=new ca(r,t,n),this.len+=t,this}uint32(r){return this.len+=(this.tail=this.tail.next=new AJ((r=r>>>0)<128?1:r<16384?2:r<2097152?3:r<268435456?4:5,r)).len,this}int32(r){return r<0?this._push(Oc,10,Je.fromNumber(r)):this.uint32(r)}sint32(r){return this.uint32((r<<1^r>>31)>>>0)}uint64(r){const t=Je.fromBigInt(r);return this._push(Oc,t.length(),t)}uint64Number(r){return this._push(LE,rr(r),r)}uint64String(r){return this.uint64(BigInt(r))}int64(r){return this.uint64(r)}int64Number(r){return this.uint64Number(r)}int64String(r){return this.uint64String(r)}sint64(r){const t=Je.fromBigInt(r).zzEncode();return this._push(Oc,t.length(),t)}sint64Number(r){const t=Je.fromNumber(r).zzEncode();return this._push(Oc,t.length(),t)}sint64String(r){return this.sint64(BigInt(r))}bool(r){return this._push(Up,1,r?1:0)}fixed32(r){return this._push(oa,4,r>>>0)}sfixed32(r){return this.fixed32(r)}fixed64(r){const t=Je.fromBigInt(r);return this._push(oa,4,t.lo)._push(oa,4,t.hi)}fixed64Number(r){const t=Je.fromNumber(r);return this._push(oa,4,t.lo)._push(oa,4,t.hi)}fixed64String(r){return this.fixed64(BigInt(r))}sfixed64(r){return this.fixed64(r)}sfixed64Number(r){return this.fixed64Number(r)}sfixed64String(r){return this.fixed64String(r)}float(r){return this._push(hJ,4,r)}double(r){return this._push(vJ,8,r)}bytes(r){const t=r.length>>>0;return t===0?this._push(Up,1,0):this.uint32(t)._push(IJ,t,r)}string(r){const t=mJ(r);return t!==0?this.uint32(t)._push(YS,t,r):this._push(Up,1,0)}fork(){return this.states=new SJ(this),this.head=this.tail=new ca(Lp,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ca(Lp,0,0),this.len=0),this}ldelim(){const r=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=r.next,this.tail=t,this.len+=n),this}finish(){let r=this.head.next;const t=TJ(this.len);let n=0;for(;r!=null;)r.fn(r.val,t,n),n+=r.len,r=r.next;return t}}function Up(e,r,t){r[t]=e&255}function CJ(e,r,t){for(;e>127;)r[t++]=e&127|128,e>>>=7;r[t]=e}class AJ extends ca{constructor(t,n){super(CJ,t,n);m(this,"next");this.next=void 0}}function Oc(e,r,t){for(;e.hi!==0;)r[t++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)r[t++]=e.lo&127|128,e.lo=e.lo>>>7;r[t++]=e.lo}function oa(e,r,t){r[t]=e&255,r[t+1]=e>>>8&255,r[t+2]=e>>>16&255,r[t+3]=e>>>24}function IJ(e,r,t){r.set(e,t)}globalThis.Buffer!=null&&(Wv.prototype.bytes=function(e){const r=e.length>>>0;return this.uint32(r),r>0&&this._push(RJ,r,e),this},Wv.prototype.string=function(e){const r=globalThis.Buffer.byteLength(e);return this.uint32(r),r>0&&this._push(jJ,r,e),this});function RJ(e,r,t){r.set(e,t)}function jJ(e,r,t){e.length<40?YS(e,r,t):r.utf8Write!=null?r.utf8Write(e,t):r.set(St(e),t)}function $J(){return new Wv}function QS(e,r){const t=$J();return r.encode(e,t,{lengthDelimited:!1}),t.finish()}var _l;(function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"})(_l||(_l={}));function XS(e,r,t,n){return{name:e,type:r,encode:t,decode:n}}function NJ(e){function r(o){if(e[o.toString()]==null)throw new Error("Invalid enum value");return e[o]}const t=function(i,a){const s=r(i);a.int32(s)},n=function(i){const a=i.int32();return r(a)};return XS("enum",_l.VARINT,t,n)}function JS(e,r){return XS("message",_l.LENGTH_DELIMITED,e,r)}var We;(function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.secp256k1="secp256k1",e.ECDSA="ECDSA"})(We||(We={}));var zv;(function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.secp256k1=2]="secp256k1",e[e.ECDSA=3]="ECDSA"})(zv||(zv={}));(function(e){e.codec=()=>NJ(zv)})(We||(We={}));var Wo;(function(e){let r;e.codec=()=>(r==null&&(r=JS((t,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),t.Type!=null&&(n.uint32(8),We.codec().encode(t.Type,n)),t.Data!=null&&(n.uint32(18),n.bytes(t.Data)),o.lengthDelimited!==!1&&n.ldelim()},(t,n,o={})=>{const i={},a=n==null?t.len:t.pos+n;for(;t.pos<a;){const s=t.uint32();switch(s>>>3){case 1:{i.Type=We.codec().decode(t);break}case 2:{i.Data=t.bytes();break}default:{t.skipType(s&7);break}}}return i})),r),e.encode=t=>QS(t,e.codec()),e.decode=(t,n)=>ZS(t,e.codec(),n)})(Wo||(Wo={}));var h0;(function(e){let r;e.codec=()=>(r==null&&(r=JS((t,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),t.Type!=null&&(n.uint32(8),We.codec().encode(t.Type,n)),t.Data!=null&&(n.uint32(18),n.bytes(t.Data)),o.lengthDelimited!==!1&&n.ldelim()},(t,n,o={})=>{const i={},a=n==null?t.len:t.pos+n;for(;t.pos<a;){const s=t.uint32();switch(s>>>3){case 1:{i.Type=We.codec().decode(t);break}case 2:{i.Data=t.bytes();break}default:{t.skipType(s&7);break}}}return i})),r),e.encode=t=>QS(t,e.codec()),e.decode=(t,n)=>ZS(t,e.codec(),n)})(h0||(h0={}));class p0 extends Error{constructor(r="An error occurred while verifying a message"){super(r),this.name="VerificationError"}}class kJ extends Error{constructor(r="Missing Web Crypto API"){super(r),this.name="WebCryptoMissingError"}}const v0={get(e=globalThis){const r=e.crypto;if((r==null?void 0:r.subtle)==null)throw new kJ("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return r}};class MJ{constructor(r,t){m(this,"type","RSA");m(this,"jwk");m(this,"_raw");m(this,"_multihash");this.jwk=r,this._multihash=t}get raw(){return this._raw==null&&(this._raw=xJ(this.jwk)),this._raw}toMultihash(){return this._multihash}toCID(){return Q.createV1(114,this._multihash)}toString(){return De.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:Qr(this.raw,r.raw)}verify(r,t){return WJ(this.jwk,t,r)}}const DJ=18,LJ=1062,UJ=Uint8Array.from([48,13,6,9,42,134,72,134,247,13,1,1,1,5,0]);function FJ(e){const r=kd(e[1],{offset:0});return{kty:"RSA",n:we(r[0],"base64url"),e:we(r[1],"base64url")}}function xJ(e){if(e.n==null||e.e==null)throw new Et("JWK was missing components");return ma([UJ,zS(ma([Vv(St(e.n,"base64url")),Vv(St(e.e,"base64url"))]))]).subarray()}function BJ(e,r){if(e.byteLength>=LJ)throw new Ty("Key size is too large");const t=kd(e,{offset:0});return VJ(t,e,r)}function VJ(e,r,t){const n=FJ(e);if(t==null){const o=MT(Wo.encode({Type:We.RSA,Data:r}));t=Aa(DJ,o)}return new MJ(n,t)}async function WJ(e,r,t){const n=await v0.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return v0.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,r,t instanceof Uint8Array?t:t.subarray())}function zJ(e){return e==null?!1:typeof e.then=="function"&&typeof e.catch=="function"&&typeof e.finally=="function"}function qJ(e,r,t){const n=sy.digest(t instanceof Uint8Array?t:t.subarray());if(zJ(n))return n.then(({digest:o})=>Mc.verify(r,o,e)).catch(o=>{throw new p0(String(o))});try{return Mc.verify(r,n.digest,e)}catch(o){throw new p0(String(o))}}class HJ{constructor(r){m(this,"type","secp256k1");m(this,"raw");m(this,"_key");this._key=KJ(r),this.raw=GJ(this._key)}toMultihash(){return Zr.digest(Ny(this))}toCID(){return Q.createV1(114,this.toMultihash())}toString(){return De.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:Qr(this.raw,r.raw)}verify(r,t){return qJ(this._key,t,r)}}function eP(e){return new HJ(e)}function GJ(e){return Mc.ProjectivePoint.fromHex(e).toRawBytes(!0)}function KJ(e){try{return Mc.ProjectivePoint.fromHex(e),e}catch(r){throw new Ty(String(r))}}function YJ(e,r){const{Type:t,Data:n}=Wo.decode(e),o=n??new Uint8Array;switch(t){case We.RSA:return BJ(o,r);case We.Ed25519:return GS(o);case We.secp256k1:return eP(o);case We.ECDSA:return qS(o);default:throw new Cy}}function ZJ(e){const{Type:r,Data:t}=Wo.decode(e.digest),n=t??new Uint8Array;switch(r){case We.Ed25519:return GS(n);case We.secp256k1:return eP(n);case We.ECDSA:return qS(n);default:throw new Cy}}function Ny(e){return Wo.encode({Type:We[e.type],Data:e.raw})}const tP=Symbol.for("nodejs.util.inspect.custom"),QJ=114;var U0;class ky{constructor(r){m(this,"type");m(this,"multihash");m(this,"publicKey");m(this,"string");m(this,U0,!0);this.type=r.type,this.multihash=r.multihash,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}toString(){return this.string==null&&(this.string=De.encode(this.multihash.bytes).slice(1)),this.string}toMultihash(){return this.multihash}toCID(){return Q.createV1(QJ,this.multihash)}toJSON(){return this.toString()}equals(r){var t;if(r==null)return!1;if(r instanceof Uint8Array)return Qr(this.multihash.bytes,r);if(typeof r=="string")return this.toString()===r;if(((t=r==null?void 0:r.toMultihash())==null?void 0:t.bytes)!=null)return Qr(this.multihash.bytes,r.toMultihash().bytes);throw new Error("not valid Id")}[(U0=LS,tP)](){return`PeerId(${this.toString()})`}}class XJ extends ky{constructor(t){super({...t,type:"RSA"});m(this,"type","RSA");m(this,"publicKey");this.publicKey=t.publicKey}}class JJ extends ky{constructor(t){super({...t,type:"Ed25519"});m(this,"type","Ed25519");m(this,"publicKey");this.publicKey=t.publicKey}}class eee extends ky{constructor(t){super({...t,type:"secp256k1"});m(this,"type","secp256k1");m(this,"publicKey");this.publicKey=t.publicKey}}const tee=2336;var F0,x0;class rP{constructor(r){m(this,"type","url");m(this,"multihash");m(this,"publicKey");m(this,"url");m(this,F0,!0);this.url=r.toString(),this.multihash=Zr.digest(St(this.url))}[(x0=tP,F0=LS,x0)](){return`PeerId(${this.url})`}toString(){return this.toCID().toString()}toMultihash(){return this.multihash}toCID(){return Q.createV1(tee,this.toMultihash())}toJSON(){return this.toString()}equals(r){return r==null?!1:(r instanceof Uint8Array&&(r=we(r)),r.toString()===this.toString())}}const ree=114,_0=2336;function ft(e,r){let t;if(e.charAt(0)==="1"||e.charAt(0)==="Q")t=ay(De.decode(`z${e}`));else{if(e.startsWith("k51qzi5uqu5")||e.startsWith("kzwfwjn5ji4")||e.startsWith("k2k4r8")||e.startsWith("bafz"))return nee(Q.parse(e));throw new Et('Please pass a multibase decoder for strings that do not start with "1" or "Q"')}return nP(t)}function nP(e){if(iee(e))return new XJ({multihash:e});if(oee(e))try{const r=ZJ(e);if(r.type==="Ed25519")return new JJ({multihash:e,publicKey:r});if(r.type==="secp256k1")return new eee({multihash:e,publicKey:r})}catch{const t=we(e.digest);return new rP(new URL(t))}throw new FS("Supplied PeerID Multihash is invalid")}function nee(e){if((e==null?void 0:e.multihash)==null||e.version==null||e.version===1&&e.code!==ree&&e.code!==_0)throw new US("Supplied PeerID CID is invalid");if(e.code===_0){const r=we(e.multihash.digest);return new rP(new URL(r))}return nP(e.multihash)}function oee(e){return e.code===Zr.code}function iee(e){return e.code===sy.code}function oP(e){return async function(t={}){const n=await e.post("bitswap/stat",{searchParams:j(t),signal:t.signal,headers:t.headers});return aee(await n.json())}}function aee(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist??[]).map(r=>Q.parse(r["/"])),peers:(e.Peers??[]).map(r=>ft(r)),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}function uee(e){return async function(t,n={}){return((await(await e.post("bitswap/wantlist",{signal:n.signal,searchParams:j({...n,peer:t.toString()}),headers:n.headers})).json()).Keys??[]).map(i=>Q.parse(i["/"]))}}function see(e){return async function(t={}){return((await(await e.post("bitswap/wantlist",{signal:t.signal,searchParams:j(t),headers:t.headers})).json()).Keys??[]).map(o=>Q.parse(o["/"]))}}function cee(e){return{wantlist:see(e),wantlistForPeer:uee(e),stat:oP(e)}}function iP(e){return async function(t,n={}){const o=await e.post("block/get",{signal:n.signal,searchParams:j({arg:t.toString(),...n}),headers:n.headers});return new Uint8Array(await o.arrayBuffer())}}function lee(e){return async function r(t,n={}){const o=new AbortController,i=Tr([o.signal,n.signal]);let a;try{a=await(await e.post("block/put",{signal:i,searchParams:j(n),...await hn([t],o,n.headers)})).json()}catch(s){if(n.format==="dag-pb")return await r(t,{...n,format:"protobuf"});if(n.format==="dag-cbor")return await r(t,{...n,format:"cbor"});throw s}finally{i.clear()}return Q.parse(a.Key)}}function fee(e){return async function*(t,n={}){Array.isArray(t)||(t=[t]);const o=await e.post("block/rm",{signal:n.signal,searchParams:j({arg:t.map(i=>i.toString()),"stream-channels":!0,...n}),headers:n.headers});for await(const i of o.ndjson())yield dee(i)}}function dee(e){const r={cid:Q.parse(e.Hash)};return e.Error!=null&&(r.error=new Error(e.Error)),r}function hee(e){return async function(t,n={}){const i=await(await e.post("block/stat",{signal:n.signal,searchParams:j({arg:t.toString(),...n}),headers:n.headers})).json();return{cid:Q.parse(i.Key),size:i.Size}}}function pee(e){return{get:iP(e),put:lee(e),rm:fee(e),stat:hee(e)}}function vee(e){return async function(t,n={}){const o=await e.post("bootstrap/add",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers}),{Peers:i}=await o.json();return{Peers:i.map(a=>st(a))}}}function _ee(e){return async function(t={}){const n=await e.post("bootstrap/list",{signal:t.signal,searchParams:j(t),headers:t.headers}),{Peers:o}=await n.json();return{Peers:o.map(i=>st(i))}}}function yee(e){return async function(t,n={}){const o=await e.post("bootstrap/rm",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers}),{Peers:i}=await o.json();return{Peers:i.map(a=>st(a))}}}function bee(e){return{add:vee(e),list:_ee(e),rm:yee(e)}}function mee(e){return async function*(t,n={}){yield*(await e.post("cat",{signal:n.signal,searchParams:j({arg:t.toString(),...n}),headers:n.headers})).iterator()}}function gee(e){return async function(t={}){return(await e.post("commands",{signal:t.signal,searchParams:j(t),headers:t.headers})).json()}}function wee(e){return async function(t={}){return await(await e.post("config/show",{signal:t.signal,searchParams:j({...t}),headers:t.headers})).json()}}function Oee(e){return async function(t,n={}){if(t==null)throw new Error("key argument is required");return(await(await e.post("config",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers})).json()).Value}}function Eee(e){return async function(t,n={}){const i=await(await e.post("config/profile/apply",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers})).json();return{original:i.OldCfg,updated:i.NewCfg}}}function See(e){return{apply:Eee(e)}}function Pee(e){return async function(t,n={}){const o=new AbortController,i=Tr([o.signal,n.signal]);try{await(await e.post("config/replace",{signal:i,searchParams:j(n),...await hn([St(JSON.stringify(t))],o,n.headers)})).text()}finally{i.clear()}}}function Tee(e){return async function(t,n,o={}){if(typeof t!="string")throw new Error("Invalid key type");const i={...o,...Cee(t,n)};await(await e.post("config",{signal:o.signal,searchParams:j(i),headers:o.headers})).text()}}function Cee(e,r){switch(typeof r){case"boolean":return{arg:[e,r.toString()],bool:!0};case"string":return{arg:[e,r]};default:return{arg:[e,JSON.stringify(r)],json:!0}}}function Aee(e){return{getAll:wee(e),get:Oee(e),set:Tee(e),replace:Pee(e),profiles:See(e)}}function Iee(e){return async function*(t,n={}){yield*(await e.post("dag/export",{signal:n.signal,searchParams:j({arg:t.toString()}),headers:n.headers})).iterator()}}function Ree(e){return e[Symbol.asyncIterator]!=null}function jee(e){if(Ree(e))return(async()=>{for await(const r of e)return r})();for(const r of e)return r}async function*y0(e,r,t,n,o){const i=async u=>{const l=await t.getCodec(u.code),d=await n(u,o);return l.decode(d)},a=r.split("/").filter(Boolean);let s=await i(e),c=e;for(;a.length>0;){const u=a.shift();if(u==null)throw Zt(new Error(`Could not resolve path "${r}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(s,u))s=s[u],yield{value:s,remainderPath:a.join("/")};else throw Zt(new Error(`no link named "${u}" under ${c}`),"ERR_NO_LINK");const l=Q.asCID(s);l!=null&&(c=l,s=await i(s))}yield{value:s,remainderPath:""}}function $ee(e,r){const t=iP(e);return async function(o,i={}){if(i.path!=null){const l=i.localResolve===!0?await jee(y0(o,i.path,r,t,i)):await Nd(y0(o,i.path,r,t,i));if(l==null)throw Zt(new Error("Not found"),"ERR_NOT_FOUND");return l}const a=await r.getCodec(o.code),s=await t(o,i);return{value:a.decode(s),remainderPath:""}}}function Nee(e){return async function*(t,n={}){const o=new AbortController,i=Tr([o.signal,n.signal]);try{const{headers:a,body:s}=await hn(t,o,n.headers),c=await e.post("dag/import",{signal:i,headers:a,body:s,searchParams:j({"pin-roots":n.pinRoots})});for await(const{Root:u}of c.ndjson())if(u!==void 0){const{Cid:{"/":l},PinErrorMsg:d}=u;yield{root:{cid:Q.parse(l),pinErrorMsg:d}}}}finally{i.clear()}}}function kee(e,r){return async function(n,o={}){const i={storeCodec:"dag-cbor",hashAlg:"sha2-256",...o};let a;if(i.inputCodec!=null){if(!(n instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");a=n}else a=(await r.getCodec(i.storeCodec??"dag-cbor")).encode(n),i.inputCodec=i.storeCodec;const s=new AbortController,c=Tr([s.signal,i.signal]);try{const l=await(await e.post("dag/put",{timeout:i.timeout,signal:c,searchParams:j(i),...await hn([a],s,i.headers)})).json();return Q.parse(l.Cid["/"])}finally{c.clear()}}}function Mee(e){return async function(t,n={}){const i=await(await e.post("dag/resolve",{signal:n.signal,searchParams:j({arg:`${t}${n.path!=null?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers})).json();return{cid:Q.parse(i.Cid["/"]),remainderPath:i.RemPath}}}function Dee(e,r){return{export:Iee(e),get:$ee(e,r),import:Nee(e),put:kee(e,r),resolve:Mee(e)}}const Lee=0,Uee=1,Fee=2,xee=3,Bee=4,Vee=5,Wee=6,zee=7;function ki(e){var r;if(e.Type===Lee)return{name:"SENDING_QUERY",type:e.Type};if(e.Type===Uee)return{from:ft(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses??[]).map(({ID:t,Addrs:n})=>({id:ft(t),multiaddrs:n.map(o=>st(o)),protocols:[]})),providers:(e.Responses??[]).map(({ID:t,Addrs:n})=>({id:ft(t),multiaddrs:n.map(o=>st(o)),protocols:[]}))};if(e.Type===Fee){let t={id:e.ID??ft(e.ID),multiaddrs:[],protocols:[]};return((r=e.Responses)==null?void 0:r.length)>0&&(t={id:ft(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map(n=>st(n)),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:t}}if(e.Type===xee)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(e.Type===Bee)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map(({ID:t,Addrs:n})=>({id:ft(t),multiaddrs:n.map(o=>st(o)),protocols:[]}))};if(e.Type===Vee)return{name:"VALUE",type:e.Type,value:St(e.Extra,"base64pad")};if(e.Type===Wee){const t=e.Responses.map(({ID:n})=>ft(n));if(t.length===0)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:t[0]}}if(e.Type===zee)return{name:"DIALING_PEER",type:e.Type,peer:ft(e.ID)};throw new Error("Unknown DHT event type")}function qee(e){return async function*(t,n={}){const o=await e.post("dht/query",{signal:n.signal,searchParams:j({arg:t.toString(),...n}),headers:n.headers});for await(const i of o.ndjson())yield ki(i)}}var b0;(function(e){e[e.SENDING_QUERY=0]="SENDING_QUERY",e[e.PEER_RESPONSE=1]="PEER_RESPONSE",e[e.FINAL_PEER=2]="FINAL_PEER",e[e.QUERY_ERROR=3]="QUERY_ERROR",e[e.PROVIDER=4]="PROVIDER",e[e.VALUE=5]="VALUE",e[e.ADDING_PEER=6]="ADDING_PEER",e[e.DIALING_PEER=7]="DIALING_PEER"})(b0||(b0={}));var m0;(function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"})(m0||(m0={}));function Hee(e){return{query:qee(e)}}function Gee(e){return async function(t={}){return(await e.post("diag/cmds",{signal:t.signal,searchParams:j(t),headers:t.headers})).json()}}function Kee(e){return async function(t={}){return(await e.post("diag/net",{signal:t.signal,searchParams:j(t),headers:t.headers})).json()}}function Yee(e){return async function(t={}){return(await e.post("diag/sys",{signal:t.signal,searchParams:j(t),headers:t.headers})).json()}}function Zee(e){return{cmds:Gee(e),net:Kee(e),sys:Yee(e)}}function Qee(e){return async function(t,n,o={}){const i=Array.isArray(t)?t:[t];await(await e.post("files/cp",{signal:o.signal,searchParams:j({arg:i.concat(n).map(s=>Q.asCID(s)!=null?`/ipfs/${s}`:s),...o}),headers:o.headers})).text()}}function Xee(e){return async function(t,n={}){if(typeof t!="string")throw new Error("ipfs.files.flush requires a path");const i=await(await e.post("files/flush",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers})).json();return Q.parse(i.Cid)}}function qv(e){const r=He(e);return Object.prototype.hasOwnProperty.call(r,"mode")&&(r.mode=parseInt(r.mode,8)),Object.prototype.hasOwnProperty.call(r,"mtime")&&(r.mtime={secs:r.mtime,nsecs:r.mtimeNsecs??0},delete r.mtimeNsecs),r}function Jee(e){return async function*(t,n={}){if(t==null)throw new Error("ipfs.files.ls requires a path");const o=await e.post("files/ls",{signal:n.signal,searchParams:j({arg:Q.asCID(t)!=null?`/ipfs/${t}`:t,long:!0,...n,stream:!0}),headers:n.headers});for await(const i of o.ndjson())if("Entries"in i)for(const a of i.Entries??[])yield g0(qv(a));else yield g0(qv(i))}}function g0(e){return e.hash!=null&&(e.cid=Q.parse(e.hash)),delete e.hash,e.type=e.type===1?"directory":"file",e}function ete(e){return async function(t,n={}){await(await e.post("files/mkdir",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers})).text()}}function tte(e){return async function(t,n,o={}){Array.isArray(t)||(t=[t]),await(await e.post("files/mv",{signal:o.signal,searchParams:j({arg:t.concat(n),...o}),headers:o.headers})).text()}}function rte(e){if(ote(e))return async function*(){const r=e.getReader();try{for(;;){const{done:t,value:n}=await r.read();if(t)return;yield n}}finally{r.releaseLock()}}();if(nte(e))return e;throw new Error("unknown stream")}function nte(e){return e[Symbol.asyncIterator]!=null}function ote(e){return typeof(e==null?void 0:e.getReader)=="function"}function ite(e){return async function*(t,n={}){const o=await e.post("files/read",{signal:n.signal,searchParams:j({arg:t,count:n.length,...n}),headers:n.headers});if(o.body==null)throw new Error("Invalid response body");yield*rte(o.body)}}function ate(e){return async function(t,n={}){const o=await e.post("files/rm",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers}),i=await o.text();if(i!==""){const a=new gX(o);throw a.message=i,a}}}function aP(e){return async function(t,n={}){const i=await(await e.post("files/stat",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers})).json();return i.WithLocality=i.WithLocality??!1,ute(qv(i))}}function ute(e){return e.cid=Q.parse(e.hash),delete e.hash,e}function ste(e){return async function(t,n,o={}){const i=new AbortController,a=Tr([i.signal,o.signal]);try{await(await e.post("files/write",{signal:a,searchParams:j({arg:t,streamChannels:!0,count:o.length,...o}),...await hn([{content:n,path:"arg",mode:Ay(o.mode),mtime:$d(o.mtime)}],i,o.headers)})).text()}finally{a.clear()}}}function cte(e){return{cp:Qee(e),flush:Xee(e),ls:Jee(e),mkdir:ete(e),mv:tte(e),read:ite(e),rm:ate(e),stat:aP(e),write:ste(e)}}function lte(e){return function(){const t=new URL(e.opts.base??"");return{host:t.hostname,port:t.port,protocol:t.protocol,pathname:t.pathname,"api-path":t.pathname}}}function fte(e){return async function*(t,n={}){const o={arg:`${t instanceof Uint8Array?Q.decode(t):t}`,...n};yield*(await e.post("get",{signal:n.signal,searchParams:j(o),headers:n.headers})).iterator()}}function uP(e){return async function(t={}){const o=await(await e.post("id",{signal:t.signal,searchParams:j({arg:t.peerId!=null?t.peerId.toString():void 0,...t}),headers:t.headers})).json(),i={...He(o)};return i.id=ft(i.id),i.addresses!=null&&(i.addresses=i.addresses.map(a=>st(a))),i}}function dte(e){const r=uP(e);return async function(n={}){var o;try{const i=await r(n);return!!((o=i==null?void 0:i.addresses)!=null&&o.length)}catch{return!1}}}const hte={type:"ed25519"};function pte(e){return async function(t,n=hte){const i=await(await e.post("key/gen",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers})).json();return He(i)}}function vte(e){return async function(t,n,o,i={}){const s=await(await e.post("key/import",{signal:i.signal,searchParams:j({arg:t,pem:n,password:o,...i}),headers:i.headers})).json();return He(s)}}function _te(e){return async function(t={}){return((await(await e.post("key/list",{signal:t.signal,searchParams:j(t),headers:t.headers})).json()).Keys??[]).map(i=>He(i))}}function yte(e){return async function(t,n,o={}){const i=await e.post("key/rename",{signal:o.signal,searchParams:j({arg:[t,n],...o}),headers:o.headers});return He(await i.json())}}function bte(e){return async function(t,n={}){const i=await(await e.post("key/rm",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers})).json();return He(i.Keys[0])}}function mte(e){return{gen:pte(e),import:vte(e),list:_te(e),rename:yte(e),rm:bte(e)}}const zo=1e3,qo=zo*60,Ho=qo*60,Gn=Ho*24,gte=Gn*7,wte=Gn*365.25;function sP(e,r){try{if(typeof e=="string"&&e.length>0)return Ote(e);if(typeof e=="number"&&isFinite(e))return r!=null&&r.long?Ste(e):Ete(e);throw new Error("Value is not a string or number.")}catch(t){const n=Pte(t)?`${t.message}. value=${JSON.stringify(e)}`:"An unknown error has occured.";throw new Error(n)}}function Ote(e){if(e=String(e),e.length>100)throw new Error("Value exceeds the maximum length of 100 characters.");const r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!r)return NaN;const t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*wte;case"weeks":case"week":case"w":return t*gte;case"days":case"day":case"d":return t*Gn;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Ho;case"minutes":case"minute":case"mins":case"min":case"m":return t*qo;case"seconds":case"second":case"secs":case"sec":case"s":return t*zo;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:throw new Error(`The unit ${n} was matched, but no matching case exists.`)}}function Ete(e){const r=Math.abs(e);return r>=Gn?`${Math.round(e/Gn)}d`:r>=Ho?`${Math.round(e/Ho)}h`:r>=qo?`${Math.round(e/qo)}m`:r>=zo?`${Math.round(e/zo)}s`:`${e}ms`}function Ste(e){const r=Math.abs(e);return r>=Gn?Ec(e,r,Gn,"day"):r>=Ho?Ec(e,r,Ho,"hour"):r>=qo?Ec(e,r,qo,"minute"):r>=zo?Ec(e,r,zo,"second"):`${e} ms`}function Ec(e,r,t,n){const o=r>=t*1.5;return`${Math.round(e/t)} ${n}${o?"s":""}`}function Pte(e){return typeof e=="object"&&e!==null&&"message"in e}function Tte(e){t.debug=t,t.default=t,t.coerce=c,t.disable=i,t.enable=o,t.enabled=a,t.humanize=sP,t.destroy=u,Object.keys(e).forEach(l=>{t[l]=e[l]}),t.names=[],t.skips=[],t.formatters={};function r(l){let d=0;for(let h=0;h<l.length;h++)d=(d<<5)-d+l.charCodeAt(h),d|=0;return t.colors[Math.abs(d)%t.colors.length]}t.selectColor=r;function t(l){let d,h=null,p,v;function _(...b){if(!_.enabled)return;const w=_,E=Number(new Date),S=E-(d||E);w.diff=S,w.prev=d,w.curr=E,d=E,b[0]=t.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let O=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,($,I)=>{if($==="%%")return"%";O++;const L=t.formatters[I];if(typeof L=="function"){const X=b[O];$=L.call(w,X),b.splice(O,1),O--}return $}),t.formatArgs.call(w,b),(w.log||t.log).apply(w,b)}return _.namespace=l,_.useColors=t.useColors(),_.color=t.selectColor(l),_.extend=n,_.destroy=t.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==t.namespaces&&(p=t.namespaces,v=t.enabled(l)),v),set:b=>{h=b}}),typeof t.init=="function"&&t.init(_),_}function n(l,d){const h=t(this.namespace+(typeof d>"u"?":":d)+l);return h.log=this.log,h}function o(l){t.save(l),t.namespaces=l,t.names=[],t.skips=[];let d;const h=(typeof l=="string"?l:"").split(/[\s,]+/),p=h.length;for(d=0;d<p;d++)h[d]&&(l=h[d].replace(/\*/g,".*?"),l[0]==="-"?t.skips.push(new RegExp("^"+l.substr(1)+"$")):t.names.push(new RegExp("^"+l+"$")))}function i(){const l=[...t.names.map(s),...t.skips.map(s).map(d=>"-"+d)].join(",");return t.enable(""),l}function a(l){if(l[l.length-1]==="*")return!0;let d,h;for(d=0,h=t.skips.length;d<h;d++)if(t.skips[d].test(l))return!1;for(d=0,h=t.names.length;d<h;d++)if(t.names[d].test(l))return!0;return!1}function s(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack??l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.setupFormatters(t.formatters),t.enable(t.load()),t}var Cte={};const Gt=kte(),Ate=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Ite(){var e,r,t,n,o;return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&((e=navigator.userAgent)==null?void 0:e.toLowerCase().match(/(edge|trident)\/(\d+)/))!=null?!1:typeof document<"u"&&((t=(r=document.documentElement)==null?void 0:r.style)==null?void 0:t.WebkitAppearance)||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&((n=navigator.userAgent)==null?void 0:n.toLowerCase().match(/firefox\/(\d+)/))!=null&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&((o=navigator.userAgent)==null?void 0:o.toLowerCase().match(/applewebkit\/(\d+)/))}function Rte(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+sP(this.diff),!this.useColors)return;const r="color: "+this.color;e.splice(1,0,r,"color: inherit");let t=0,n=0;e[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(t++,o==="%c"&&(n=t))}),e.splice(n,0,r)}const jte=console.debug??console.log??(()=>{});function $te(e){try{e?Gt==null||Gt.setItem("debug",e):Gt==null||Gt.removeItem("debug")}catch{}}function Nte(){let e;try{e=Gt==null?void 0:Gt.getItem("debug")}catch{}return!e&&typeof globalThis.process<"u"&&"env"in globalThis.process&&(e=Cte.DEBUG),e}function kte(){try{return localStorage}catch{}}function Mte(e){e.j=function(r){try{return JSON.stringify(r)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}const ht=Tte({formatArgs:Rte,save:$te,load:Nte,useColors:Ite,setupFormatters:Mte,colors:Ate,storage:Gt,log:jte});ht.formatters.b=e=>e==null?"undefined":De.baseEncode(e);ht.formatters.t=e=>e==null?"undefined":Fr.baseEncode(e);ht.formatters.m=e=>e==null?"undefined":Ed.baseEncode(e);ht.formatters.p=e=>e==null?"undefined":e.toString();ht.formatters.c=e=>e==null?"undefined":e.toString();ht.formatters.k=e=>e==null?"undefined":e.toString();ht.formatters.a=e=>e==null?"undefined":e.toString();ht.formatters.e=e=>e==null?"undefined":w0(e.stack)??w0(e.message)??e.toString();function Dte(e){const r=()=>{};return r.enabled=!1,r.color="",r.diff=0,r.log=()=>{},r.namespace=e,r.destroy=()=>!0,r.extend=()=>r,r}function My(e){let r=Dte(`${e}:trace`);return ht.enabled(`${e}:trace`)&&ht.names.map(t=>t.toString()).find(t=>t.includes(":trace"))!=null&&(r=ht(`${e}:trace`)),Object.assign(ht(e),{error:ht(`${e}:error`),trace:r})}function w0(e){if(e!=null&&(e=e.trim(),e.length!==0))return e}var Lte=e=>{if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const r=Object.getPrototypeOf(e);return r===null||r===Object.prototype};const yl=Lte,{hasOwnProperty:cP}=Object.prototype,{propertyIsEnumerable:Ute}=Object,Go=(e,r,t)=>Object.defineProperty(e,r,{value:t,writable:!0,enumerable:!0,configurable:!0}),Fte=f,O0={concatArrays:!1,ignoreUndefined:!1},Md=e=>{const r=[];for(const t in e)cP.call(e,t)&&r.push(t);if(Object.getOwnPropertySymbols){const t=Object.getOwnPropertySymbols(e);for(const n of t)Ute.call(e,n)&&r.push(n)}return r};function Mi(e){return Array.isArray(e)?xte(e):yl(e)?Bte(e):e}function xte(e){const r=e.slice(0,0);return Md(e).forEach(t=>{Go(r,t,Mi(e[t]))}),r}function Bte(e){const r=Object.getPrototypeOf(e)===null?Object.create(null):{};return Md(e).forEach(t=>{Go(r,t,Mi(e[t]))}),r}const lP=(e,r,t,n)=>(t.forEach(o=>{typeof r[o]>"u"&&n.ignoreUndefined||(o in e&&e[o]!==Object.getPrototypeOf(e)?Go(e,o,Hv(e[o],r[o],n)):Go(e,o,Mi(r[o])))}),e),Vte=(e,r,t)=>{let n=e.slice(0,0),o=0;return[e,r].forEach(i=>{const a=[];for(let s=0;s<i.length;s++)cP.call(i,s)&&(a.push(String(s)),i===e?Go(n,o++,i[s]):Go(n,o++,Mi(i[s])));n=lP(n,i,Md(i).filter(s=>!a.includes(s)),t)}),n};function Hv(e,r,t){return t.concatArrays&&Array.isArray(e)&&Array.isArray(r)?Vte(e,r,t):!yl(r)||!yl(e)?Mi(r):lP(e,r,Md(r),t)}var Wte=function(...e){const r=Hv(Mi(O0),this!==Fte&&this||{},O0);let t={_:{}};for(const n of e)if(n!==void 0){if(!yl(n))throw new TypeError("`"+n+"` is not an Option Object");t=Hv(t,{_:n},r)}return t._};const fP=bl(Wte),ce=Object.create(null),dP=6e4,hP=dP*60,Dy=hP*24,pP=Dy*365.25;ce.year=ce.yr=ce.y=pP;ce.month=ce.mo=ce.mth=pP/12;ce.week=ce.wk=ce.w=Dy*7;ce.day=ce.d=Dy;ce.hour=ce.hr=ce.h=hP;ce.minute=ce.min=ce.m=dP;ce.second=ce.sec=ce.s=1e3;ce.millisecond=ce.millisec=ce.ms=1;ce.microsecond=ce.microsec=ce.us=ce.µs=.001;ce.nanosecond=ce.nanosec=ce.ns=1e-6;ce.group=",";ce.decimal=".";ce.placeholder=" _";const zte=/((?:\d{1,16}(?:\.\d{1,16})?|\.\d{1,16})(?:[eE][-+]?\d{1,4})?)\s?([\p{L}]{0,14})/gu;Ht.unit=ce;function Ht(e="",r="ms"){let t=null,n;return String(e).replace(new RegExp(`(\\d)[${Ht.unit.placeholder}${Ht.unit.group}](\\d)`,"g"),"$1$2").replace(Ht.unit.decimal,".").replace(zte,(o,i,a)=>{if(a)a=a.toLowerCase();else if(n){for(const s in Ht.unit)if(Ht.unit[s]<n){a=s;break}}else a=r;n=a=Ht.unit[a]||Ht.unit[a.replace(/s$/,"")],a&&(t=(t||0)+i*a)}),t&&t/(Ht.unit[r]||1)*(e[0]==="-"?-1:1)}const qte=()=>{},Hte=typeof navigator<"u"&&navigator.product==="ReactNative";function Gte(){return Hte?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const ga=self.URL,vP=Gte();let Kte=class{constructor(r="",t=vP){this.super=new ga(r,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(r){this.super.hash=r}set host(r){this.super.host=r}set hostname(r){this.super.hostname=r}set href(r){this.super.href=r}set password(r){this.super.password=r}set pathname(r){this.super.pathname=r}set port(r){this.super.port=r}set protocol(r){this.super.protocol=r}set search(r){this.super.search=r}set username(r){this.super.username=r}static createObjectURL(r){return ga.createObjectURL(r)}static revokeObjectURL(r){ga.revokeObjectURL(r)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function Yte(e){if(typeof e=="string")return new ga(e).toString();if(!(e instanceof ga)){const r=e.username&&e.password?`${e.username}:${e.password}@`:"",t=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",o=e.protocol?e.protocol+"//":"",i=e.host||"",a=e.hostname||"",s=e.search||(e.query?"?"+e.query:""),c=e.hash||"",u=e.pathname||"",l=e.path||u+s;return`${o}${r||t}${i||a+n}${l}${c}`}}var _P={URLWithLegacySupport:Kte,URLSearchParams:self.URLSearchParams,defaultBase:vP,format:Yte};const{URLWithLegacySupport:E0,format:Zte}=_P;var Qte=(e,r={},t={},n)=>{let o=r.protocol?r.protocol.replace(":",""):"http";o=(t[o]||n||o)+":";let i;try{i=new E0(e)}catch{i={}}const a=Object.assign({},r,{protocol:o||i.protocol,host:r.host||i.host});return new E0(e,Zte(a)).toString()};const{URLWithLegacySupport:Xte,format:Jte,URLSearchParams:ere,defaultBase:tre}=_P,rre=Qte;var Sc={URL:Xte,URLSearchParams:ere,format:Jte,relative:rre,defaultBase:tre};class yP extends Error{constructor(r="Request timed out"){super(r),this.name="TimeoutError"}}class nre extends Error{constructor(r="The operation was aborted."){super(r),this.name="AbortError"}}class S0 extends Error{constructor(t){super(t.statusText);m(this,"response");this.name="HTTPError",this.response=t}}const ore=globalThis.fetch,Ly=globalThis.Headers,ire=globalThis.Request,bP=globalThis.Response,are=async(e,r={})=>{const t=new XMLHttpRequest;t.open(r.method??"GET",e.toString(),!0);const{timeout:n,headers:o}=r,i=Number(n);if(!isNaN(i)&&i>0&&i<1/0&&(t.timeout=i),r.overrideMimeType!=null&&t.overrideMimeType(r.overrideMimeType),o!=null)for(const[a,s]of new Ly(o))t.setRequestHeader(a,s);return r.signal!=null&&(r.signal.onabort=()=>{t.abort()}),r.onUploadProgress!=null&&(t.upload.onprogress=r.onUploadProgress),t.responseType="arraybuffer",new Promise((a,s)=>{const c=u=>{switch(u.type){case"error":{a(bP.error());break}case"load":{a(new lre(t.responseURL,t.response,{status:t.status,statusText:t.statusText,headers:cre(t.getAllResponseHeaders())}));break}case"timeout":{s(new yP);break}case"abort":{s(new nre);break}}};t.onerror=c,t.onload=c,t.ontimeout=c,t.onabort=c,t.send(r.body)})},ure=ore,sre=(e,r={})=>r.onUploadProgress!=null?are(e,r):ure(e,r),cre=e=>{const r=new Ly;for(const t of e.trim().split(/[\r\n]+/)){const n=t.indexOf(": ");n>0&&r.set(t.slice(0,n),t.slice(n+1))}return r};class lre extends bP{constructor(r,t,n){super(t,n),Object.defineProperty(this,"url",{value:r})}}const P0=fP.bind({ignoreUndefined:!0}),Pc=My("kubo-rpc-client:fetch"),fre={throwHttpErrors:!0,credentials:"same-origin"},ut=class ut{constructor(r={}){m(this,"opts");this.opts=P0({},fre,r)}async fetch(r,t={}){const n=P0({},this.opts,t),o=new Ly(n.headers);if(typeof r!="string"&&!(r instanceof Sc.URL||r instanceof ire))throw new TypeError("`resource` must be a string, URL, or Request");const i=new Sc.URL(r.toString(),n.base),{searchParams:a,transformSearchParams:s,json:c}=n;a!=null&&(typeof s=="function"?i.search=s(new Sc.URLSearchParams(n.searchParams)):i.search=new Sc.URLSearchParams(n.searchParams).toString()),c!=null&&(n.body=JSON.stringify(n.json),o.set("content-type","application/json"));const u=[n.signal];n.timeout!=null&&isNaN(n.timeout)&&n.timeout>0&&u.push(AbortSignal.timeout(n.timeout));const l=Tr(u);try{globalThis.ReadableStream!=null&&n.body instanceof globalThis.ReadableStream&&(Ad||Id)&&(n.body=new Blob(await xS(Rd(n.body)))),Pc.trace("outgoing headers",n.headers),Pc.trace("%s %s",n.method,i);const d=await sre(i.toString(),{...n,signal:n.signal,timeout:void 0,headers:o,duplex:"half"});if(Pc("%s %s %d",n.method,i,d.status),Pc.trace("incoming headers",d.headers),!d.ok&&n.throwHttpErrors===!0)throw n.handleError!=null&&await n.handleError(d),new S0(d);return d.iterator=async function*(){yield*hre(d.body)},d.ndjson=async function*(){for await(const h of dre(d.iterator()))t.transform!=null?yield t.transform(h):yield h},d}finally{l.clear()}}async post(r,t={}){return this.fetch(r,{...t,method:"POST"})}async get(r,t={}){return this.fetch(r,{...t,method:"GET"})}async put(r,t={}){return this.fetch(r,{...t,method:"PUT"})}async delete(r,t={}){return this.fetch(r,{...t,method:"DELETE"})}async options(r,t={}){return this.fetch(r,{...t,method:"OPTIONS"})}};m(ut,"HTTPError",S0),m(ut,"TimeoutError",yP),m(ut,"post",async(r,t)=>new ut(t).post(r,t)),m(ut,"get",async(r,t)=>new ut(t).get(r,t)),m(ut,"put",async(r,t)=>new ut(t).put(r,t)),m(ut,"delete",async(r,t)=>new ut(t).delete(r,t)),m(ut,"options",async(r,t)=>new ut(t).options(r,t));let $n=ut;const dre=async function*(e){const r=new TextDecoder;let t="";for await(const n of e){t+=r.decode(n,{stream:!0});const o=t.split(/\r?\n/);for(let i=0;i<o.length-1;i++){const a=o[i].trim();a.length>0&&(yield JSON.parse(a))}t=o[o.length-1]}t+=r.decode(),t=t.trim(),t.length!==0&&(yield JSON.parse(t))},hre=e=>{if(pre(e))return e;if(_re(e)){const r=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:r.next.bind(r),return(t){return e.destroy(),typeof r.return=="function"?r.return():Promise.resolve({done:!0,value:t})}}}}}if(vre(e)){const r=e.getReader();return async function*(){try{for(;;){const{done:t,value:n}=await r.read();if(t)return;n!=null&&(yield n)}}finally{r.releaseLock()}}()}throw new TypeError("Body can't be converted to AsyncIterable")},pre=e=>e!==null&&typeof e[Symbol.asyncIterator]=="function",vre=e=>e!=null&&typeof e.getReader=="function",_re=e=>Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable"),yre=[se("tcp").code,se("dns").code,se("dnsaddr").code,se("dns4").code,se("dns6").code];function T0(e){var r;return(r=mP("sni",e))==null?void 0:r[1]}function C0(e){var t;const r=(t=mP("tcp",e))==null?void 0:t[1];return r==null?"":`:${r}`}function mP(e,r){let t;try{t=se(e).code}catch{return}for(const[n,o]of r)if(n===t&&o!=null)return[n,o]}function A0(e){return e.some(([r,t])=>r===se("tls").code)}function It(e,r,t){const n=gP[se(e).name];if(n==null)throw new Error(`Can't interpret protocol ${se(e).name}`);const o=n(r,t);return e===se("ip6").code?`[${o}]`:o}const gP={ip4:(e,r)=>e,ip6:(e,r)=>r.length===0?e:`[${e}]`,tcp:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`tcp://${It(t[0],t[1]??"",r)}:${e}`},udp:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`udp://${It(t[0],t[1]??"",r)}:${e}`},dnsaddr:(e,r)=>e,dns4:(e,r)=>e,dns6:(e,r)=>e,dns:(e,r)=>e,ipfs:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`${It(t[0],t[1]??"",r)}`},p2p:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`${It(t[0],t[1]??"",r)}`},http:(e,r)=>{const t=A0(r),n=T0(r),o=C0(r);if(t&&n!=null)return`https://${n}${o}`;const i=t?"https://":"http://",a=r.pop();if(a==null)throw new Error("Unexpected end of multiaddr");let s=It(a[0],a[1]??"",r);return s=s.replace("tcp://",""),`${i}${s}`},"http-path":(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");const n=It(t[0],t[1]??"",r),o=decodeURIComponent(e);return`${n}/${o}`},tls:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return It(t[0],t[1]??"",r)},sni:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return It(t[0],t[1]??"",r)},https:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");let n=It(t[0],t[1]??"",r);return n=n.replace("tcp://",""),`https://${n}`},ws:(e,r)=>{const t=A0(r),n=T0(r),o=C0(r);if(t&&n!=null)return`wss://${n}${o}`;const i=t?"wss://":"ws://",a=r.pop();if(a==null)throw new Error("Unexpected end of multiaddr");let s=It(a[0],a[1]??"",r);return s=s.replace("tcp://",""),`${i}${s}`},wss:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");let n=It(t[0],t[1]??"",r);return n=n.replace("tcp://",""),`wss://${n}`}};function bre(e,r){const n=st(e).stringTuples(),o=n.pop();if(o==null)throw new Error("Unexpected end of multiaddr");const i=se(o[0]),a=gP[i.name];if(a==null)throw new Error(`No interpreter found for ${i.name}`);let s=a(o[1]??"",n);return yre.includes(o[0])&&(s=s.replace(/^.*:\/\//,""),o[1]==="443"?s=`https://${s}`:s=`http://${s}`),(s.startsWith("http://")||s.startsWith("https://")||s.startsWith("ws://")||s.startsWith("wss://"))&&(s=new URL(s).toString(),s.endsWith("/")&&(s=s.substring(0,s.length-1))),s}function I0(e){try{e=bre(st(e))}catch{}return e=e.toString(),e}const R0=My("js-kubo-rpc-client:lib:error-handler"),mre=fP.bind({ignoreUndefined:!0}),gre=Ad||Id?location.protocol:"http",wre=Ad||Id?location.hostname:"localhost",Ore=Ad||Id?location.port:"5001",Ere=(e={})=>{let r,t={},n;if(typeof e=="string"||ol(e))r=new URL(I0(e));else if(e instanceof URL)r=e;else if(typeof e.url=="string"||ol(e.url))r=new URL(I0(e.url)),t=e;else if(e.url instanceof URL)r=e.url,t=e;else{t=e??{};const o=(t.protocol??gre).replace(":",""),i=(t.host??wre).split(":")[0],a=t.port??Ore;r=new URL(`${o}://${i}:${a}`)}if(t.apiPath!=null?r.pathname=t.apiPath:(r.pathname==="/"||r.pathname===void 0)&&(r.pathname="api/v0"),_X){const o=qte();n=t.agent??new o({keepAlive:!0,maxSockets:6})}return{...t,host:r.host,protocol:r.protocol.replace(":",""),port:Number(r.port),apiPath:r.pathname,url:r,agent:n}},Sre=async e=>{let r;try{if((e.headers.get("Content-Type")??"").startsWith("application/json")){const n=await e.json();R0(n),r=n.Message??n.message}else r=await e.text()}catch(n){R0("Failed to parse error response",n),r=n.message}let t=new $n.HTTPError(e);throw r!=null&&(r.includes("deadline has elapsed")&&(t=new $n.TimeoutError),r.includes("context deadline exceeded")&&(t=new $n.TimeoutError),r.includes("request timed out")&&(t=new $n.TimeoutError),t.message=r),t},Pre=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,j0=e=>e.replace(Pre,function(r){return"-"+r.toLowerCase()}),Tre=e=>typeof e=="string"?Ht(e)??0:e;class Cre extends $n{constructor(r={}){const t=Ere(r);super({timeout:t.timeout!=null?Tre(t.timeout):void 0,headers:t.headers,base:`${t.url}`,handleError:Sre,transformSearchParams:o=>{const i=new URLSearchParams;for(const[a,s]of o)s!=="undefined"&&s!=="null"&&a!=="signal"&&a!=="timeout"&&i.append(j0(a),s),a==="timeout"&&!isNaN(parseInt(s))&&i.append(j0(a),s);return i},agent:t.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;const n=this.fetch;this.fetch=async(o,i={})=>(typeof o=="string"&&!o.startsWith("/")&&(o=`${t.url}/${o}`),n.call(this,o,mre(i,{method:"POST"})))}}const Are=async e=>Promise.reject(new Error(`No base found for "${e}"`));class Ire{constructor(r){m(this,"_basesByName");m(this,"_basesByPrefix");m(this,"_loadBase");this._basesByName={},this._basesByPrefix={},this._loadBase=r.loadBase??Are;for(const t of r.bases)this.addBase(t)}addBase(r){if(this._basesByName[r.name]!=null&&this._basesByPrefix[r.prefix]!=null)throw new Error(`Codec already exists for codec "${r.name}"`);this._basesByName[r.name]=r,this._basesByPrefix[r.prefix]=r}removeBase(r){delete this._basesByName[r.name],delete this._basesByPrefix[r.prefix]}async getBase(r){if(this._basesByName[r]!=null)return this._basesByName[r];if(this._basesByPrefix[r]!=null)return this._basesByPrefix[r];const t=await this._loadBase(r);return this._basesByName[t.name]==null&&this._basesByPrefix[t.prefix]==null&&this.addBase(t),t}listBases(){return Object.values(this._basesByName)}}const Rre=async e=>Promise.reject(new Error(`No codec found for "${e}"`));class jre{constructor(r){m(this,"_codecsByName");m(this,"_codecsByCode");m(this,"_loadCodec");this._codecsByName={},this._codecsByCode={},this._loadCodec=r.loadCodec??Rre;for(const t of r.codecs)this.addCodec(t)}addCodec(r){if(this._codecsByName[r.name]!=null||this._codecsByCode[r.code]!=null)throw new Error(`Resolver already exists for codec "${r.name}"`);this._codecsByName[r.name]=r,this._codecsByCode[r.code]=r}removeCodec(r){delete this._codecsByName[r.name],delete this._codecsByCode[r.code]}async getCodec(r){const t=typeof r=="string"?this._codecsByName:this._codecsByCode;if(t[r]!=null)return t[r];const n=await this._loadCodec(r);return t[r]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}}const $re=async e=>Promise.reject(new Error(`No hasher found for "${e}"`));class Nre{constructor(r){m(this,"_hashersByName");m(this,"_hashersByCode");m(this,"_loadHasher");this._hashersByName={},this._hashersByCode={},this._loadHasher=r.loadHasher??$re;for(const t of r.hashers)this.addHasher(t)}addHasher(r){if(this._hashersByName[r.name]!=null||this._hashersByCode[r.code]!=null)throw new Error(`Resolver already exists for codec "${r.name}"`);this._hashersByName[r.name]=r,this._hashersByCode[r.code]=r}removeHasher(r){delete this._hashersByName[r.name],delete this._hashersByCode[r.code]}async getHasher(r){const t=typeof r=="string"?this._hashersByName:this._hashersByCode;if(t[r]!=null)return t[r];const n=await this._loadHasher(r);return t[r]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}}function kre(e){return async function(r,t,n={}){const o=await e.post("log/level",{signal:n.signal,searchParams:j({arg:[r,t],...n}),headers:n.headers});return He(await o.json())}}function Mre(e){return async function(t={}){return(await(await e.post("log/ls",{signal:t.signal,searchParams:j(t),headers:t.headers})).json()).Strings}}function Dre(e){return async function*(t={}){yield*(await e.post("log/tail",{signal:t.signal,searchParams:j(t),headers:t.headers})).ndjson()}}function Lre(e){return{level:kre(e),ls:Mre(e),tail:Dre(e)}}function Ure(e){return async function*(t,n={}){const o=`${t instanceof Uint8Array?Q.decode(t):t}`;async function i(s){let c=s.Hash;if(c.includes("/")===!0){const l=c.startsWith("/ipfs/")===!0?c:`/ipfs/${c}`;c=(await aP(e)(l)).cid}else c=Q.parse(c);return{name:s.Name,path:o+(s.Name!=null?`/${s.Name}`:""),size:s.Size,cid:c,type:Fre(s)}}const a=await e.post("ls",{signal:n.signal,searchParams:j({arg:o,...n}),headers:n.headers});for await(let s of a.ndjson()){if(s=s.Objects,s==null)throw new Error("expected .Objects in results");if(s=s[0],s==null)throw new Error("expected one array in results.Objects");const c=s.Links;if(!Array.isArray(c))throw new Error("expected one array in results.Objects[0].Links");if(c.length===0){yield i(s);return}yield*c.map(i)}}}function Fre(e){switch(e.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}function xre(e){return async function(t={}){const n=await e.post("dns",{signal:t.signal,searchParams:j(t),headers:t.headers});return He(await n.json())}}function Bre(e){return async function(t,n={}){const o=await e.post("name/publish",{signal:n.signal,searchParams:j({arg:`${t}`,...n}),headers:n.headers});return He(await o.json())}}function Vre(e){return async function(t,n={}){const o=await e.post("name/pubsub/cancel",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers});return He(await o.json())}}function Wre(e){return async function(t={}){const n=await e.post("name/pubsub/state",{signal:t.signal,searchParams:j(t),headers:t.headers});return He(await n.json())}}function zre(e){return async function(t={}){return(await(await e.post("name/pubsub/subs",{signal:t.signal,searchParams:j(t),headers:t.headers})).json()).Strings??[]}}function qre(e){return{cancel:Vre(e),state:Wre(e),subs:zre(e)}}function Hre(e){return async function*(t,n={}){const o=await e.post("name/resolve",{signal:n.signal,searchParams:j({arg:t,stream:!0,...n}),headers:n.headers});for await(const i of o.ndjson())yield i.Path}}function Gre(e){return{publish:Bre(e),resolve:Hre(e),pubsub:qre(e)}}function Kre(e){return async function(t,n,o={}){const i=await e.post("object/patch/add-link",{signal:o.signal,searchParams:j({arg:[`${t}`,n.Name??n.name??"",(n.Hash??n.cid??"").toString()??null],...o}),headers:o.headers}),{Hash:a}=await i.json();return Q.parse(a)}}function Yre(e){return async function(t,n,o={}){const i=await e.post("object/patch/rm-link",{signal:o.signal,searchParams:j({arg:[`${t}`,n.Name??n.name??null],...o}),headers:o.headers}),{Hash:a}=await i.json();return Q.parse(a)}}function Zre(e){return{addLink:Kre(e),rmLink:Yre(e)}}function Qre(e,r){return{patch:Zre(e)}}function Xre(e){return Symbol.iterator in e}function Jre(e){return Symbol.asyncIterator in e}function $0(e){return Q.asCID(e)!=null}async function*wP(e){if(e==null)throw new Et(`Unexpected input: ${e}`);const r=Q.asCID(e);if(r!=null){yield nt({cid:r});return}if(typeof e=="string"){yield nt({path:e});return}if(e.cid!=null||e.path!=null)return yield nt(e);if(Xre(e)){const t=e[Symbol.iterator](),n=t.next();if(n.done===!0)return t;if($0(n.value)){yield nt({cid:n.value});for(const o of t)yield nt({cid:o});return}if(typeof n.value=="string"){yield nt({path:n.value});for(const o of t)yield nt({path:o});return}if(n.value.cid!=null||n.value.path!=null){yield nt(n.value);for(const o of t)yield nt(o);return}throw new Et(`Unexpected input: ${typeof e}`)}if(Jre(e)){const t=e[Symbol.asyncIterator](),n=await t.next();if(n.done===!0)return t;if($0(n.value)){yield nt({cid:n.value});for await(const o of t)yield nt({cid:o});return}if(typeof n.value=="string"){yield nt({path:n.value});for await(const o of t)yield nt({path:o});return}if(n.value.cid!=null||n.value.path!=null){yield nt(n.value);for await(const o of t)yield nt(o);return}throw new Et(`Unexpected input: ${typeof e}`)}throw new Et(`Unexpected input: ${typeof e}`)}function nt(e){const r=e.cid??`${e.path}`;if(r==null)throw new Et("Unexpected input: Please path either a CID or an IPFS path");const t={path:r,recursive:e.recursive!==!1};return e.metadata!=null&&(t.metadata=e.metadata),t}function OP(e){return async function*(t,n={}){for await(const{path:o,recursive:i,metadata:a}of wP(t)){const s=await e.post("pin/add",{signal:n.signal,searchParams:j({...n,arg:o,recursive:i,metadata:a!=null?JSON.stringify(a):void 0,stream:!0}),headers:n.headers});for await(const c of s.ndjson()){if(c.Pins!=null){for(const u of c.Pins)yield Q.parse(u);continue}yield Q.parse(c)}}}}function ene(e){const r=OP(e);return async function(n,o={}){const i=await Nd(r([{path:n.toString(),...o}],o));if(i==null)throw new Error("No response received");return i}}function N0(e,r,t,n){const o={type:e,cid:Q.parse(r)};return t!=null&&(o.metadata=t),n!=null&&(o.name=n),o}function tne(e){return async function*(t={}){let n=[];t.paths!=null&&(n=Array.isArray(t.paths)?t.paths:[t.paths]);const o=await e.post("pin/ls",{signal:t.signal,searchParams:j({...t,arg:n.map(i=>`${i}`),stream:!0}),headers:t.headers});for await(const i of o.ndjson()){if(i.Keys!=null){for(const a of Object.keys(i.Keys))yield N0(i.Keys[a].Type,a,i.Keys[a].Metadata,i.Keys[a].Name);return}yield N0(i.Type,i.Cid,i.Metadata,i.Name)}}}const EP=({Name:e,Status:r,Cid:t})=>({cid:Q.parse(t),name:e,status:r}),SP=e=>{if(typeof e=="string"&&e!=="")return e;throw new TypeError("service name must be passed")},PP=e=>{if(Q.asCID(e)!=null)return e.toString();throw new TypeError(`CID instance expected instead of ${typeof e}`)},Uy=({service:e,cid:r,name:t,status:n,all:o})=>{const i=j({service:SP(e),name:t,force:o===!0?!0:void 0});if(r!=null)for(const a of r)i.append("cid",PP(a));if(n!=null)for(const a of n)i.append("status",a);return i},rne=(e,{service:r,background:t,name:n,origins:o})=>{const i=j({arg:PP(e),service:SP(r),name:n,background:t===!0?!0:void 0});if(o!=null)for(const a of o)i.append("origin",a.toString());return i};function nne(e){return async function(t,{timeout:n,signal:o,headers:i,...a}){const s=await e.post("pin/remote/add",{timeout:n,signal:o,headers:i,searchParams:rne(t,a)});return EP(await s.json())}}function one(e){return async function*({timeout:t,signal:n,headers:o,...i}){const a=await e.post("pin/remote/ls",{timeout:t,signal:n,headers:o,searchParams:Uy(i)});for await(const s of a.ndjson())yield EP(s)}}function ine(e){return async function({timeout:t,signal:n,headers:o,...i}){await e.post("pin/remote/rm",{timeout:t,signal:n,headers:o,searchParams:Uy({...i,all:!0})})}}function ane(e){return async function({timeout:t,signal:n,headers:o,...i}){await e.post("pin/remote/rm",{timeout:t,signal:n,headers:o,searchParams:Uy({...i,all:!1})})}}function une(e){const r=String(e);if(r==="undefined")throw Error("endpoint is required");return r[r.length-1]==="/"?r.slice(0,-1):r}function sne(e){const r={service:e.Service,endpoint:new URL(e.ApiEndpoint)};return e.Stat!=null&&(r.stat=cne(e.Stat)),r}function cne(e){switch(e.Status){case"valid":{const{Pinning:r,Pinned:t,Queued:n,Failed:o}=e.PinCount;return{status:"valid",pinCount:{queued:n,pinning:r,pinned:t,failed:o}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function lne(e){return async function(t,n){const{endpoint:o,key:i,headers:a,timeout:s,signal:c}=n;await e.post("pin/remote/service/add",{timeout:s,signal:c,searchParams:j({arg:[t,une(o),i]}),headers:a})}}function fne(e){return async function(t={}){const{stat:n,headers:o,timeout:i,signal:a}=t;return(await(await e.post("pin/remote/service/ls",{timeout:i,signal:a,headers:o,searchParams:n===!0?j({stat:n}):void 0})).json()).RemoteServices.map(sne)}}function dne(e){return async function(t,n={}){await e.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:j({arg:t})})}}function hne(e){return{add:lne(e),ls:fne(e),rm:dne(e)}}function pne(e){return{add:nne(e),ls:one(e),rm:ane(e),rmAll:ine(e),service:hne(e)}}function TP(e){return async function*(t,n={}){for await(const{path:o,recursive:i}of wP(t)){const a=new URLSearchParams(n.searchParams);a.append("arg",`${o}`),i!=null&&a.set("recursive",String(i));const s=await e.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:j({...n,arg:`${o}`,recursive:i})});for await(const c of s.ndjson()){if(c.Pins!=null){yield*c.Pins.map(u=>Q.parse(u));continue}yield Q.parse(c)}}}}function vne(e){const r=TP(e);return async function(n,o={}){const i=await Nd(r([{path:n.toString(),...o}],o));if(i==null)throw new Error("No response received");return i}}function _ne(e){return{addAll:OP(e),add:ene(e),ls:tne(e),rmAll:TP(e),rm:vne(e),remote:pne(e)}}function yne(e){return async function*(t,n={}){yield*(await e.post("ping",{signal:n.signal,searchParams:j({arg:`${t}`,...n}),headers:n.headers,transform:He})).ndjson()}}const bne=e=>Array.isArray(e)?e.map(Gv):e,Gv=e=>we(la(e)),la=e=>Sd.decode(e),mne=e=>BigInt(`0x${we(Sd.decode(e),"base16")}`),Fy=e=>Sd.encode(St(e));function gne(e){return async function(t={}){const{Strings:n}=await(await e.post("pubsub/ls",{signal:t.signal,searchParams:j(t),headers:t.headers})).json();return bne(n)??[]}}function wne(e){return async function(t,n={}){const o=await e.post("pubsub/peers",{signal:n.signal,searchParams:j({arg:Fy(t),...n}),headers:n.headers}),{Strings:i}=await o.json();return i??[]}}function One(e){return async function(t,n,o={}){const i=j({arg:Fy(t),...o}),a=new AbortController,s=Tr([a.signal,o.signal]);try{await(await e.post("pubsub/pub",{signal:s,searchParams:i,...await hn([n],a,o.headers)})).text()}finally{s.clear()}}}const Ene=My("js-kubo-rpc-client:pubsub:subscribe");function Sne(e,r){return async function(n,o,i={}){i.signal=r.subscribe(n,o,i.signal);let a,s;const c=new Promise((l,d)=>{a=l,s=d}),u=setTimeout(()=>{a()},1e3);return e.post("pubsub/sub",{signal:i.signal,searchParams:j({arg:Fy(n),...i}),headers:i.headers}).catch(l=>{r.unsubscribe(n,o),s(l)}).then(l=>{clearTimeout(u),l!=null&&(Pne(l,{onMessage:d=>{if(o!=null){if(typeof o=="function"){o(d);return}typeof o.handleEvent=="function"&&o.handleEvent(d)}},onEnd:()=>{r.unsubscribe(n,o)},onError:i.onError}),a())}),c}}async function Pne(e,{onMessage:r,onEnd:t,onError:n}){n=n??Ene;try{for await(const o of e.ndjson())try{if(o.from==null)continue;o.from!=null&&o.seqno!=null?r({type:"signed",from:ft(o.from),data:la(o.data),sequenceNumber:mne(o.seqno),topic:Gv(o.topicIDs[0]),key:o.key!=null?YJ(la(o.key??"u")):void 0,signature:la(o.signature??"u")}):r({type:"unsigned",data:la(o.data),topic:Gv(o.topicIDs[0])})}catch(i){i.message=`Failed to parse pubsub message: ${i.message}`,n(i,!1,o)}}catch(o){Tne(o)||n(o,!0)}finally{t()}}const Tne=e=>{switch(e.type){case"aborted":return!0;case"abort":return!0;default:return e.name==="AbortError"}};class Cne{constructor(){m(this,"_subs");this._subs=new Map}subscribe(r,t,n){const o=this._subs.get(r)??[];if(o.find(a=>a.handler===t)!=null)throw new Error(`Already subscribed to ${r} with this handler`);const i=new AbortController;return this._subs.set(r,[{handler:t,controller:i}].concat(o)),n!=null&&n.addEventListener("abort",()=>{this.unsubscribe(r,t)}),i.signal}unsubscribe(r,t){const n=this._subs.get(r)??[];let o;t!=null?(this._subs.set(r,n.filter(i=>i.handler!==t)),o=n.filter(i=>i.handler===t)):(this._subs.set(r,[]),o=n),(this._subs.get(r)??[]).length===0&&this._subs.delete(r),o.forEach(i=>{i.controller.abort()})}}function Ane(e,r){return async function(n,o){r.unsubscribe(n,o)}}function Ine(e){const r=new Cne;return{ls:gne(e),peers:wne(e),publish:One(e),subscribe:Sne(e,r),unsubscribe:Ane(e,r)}}function Rne(e){return async function*(t={}){yield*(await e.post("refs/local",{signal:t.signal,transform:He,searchParams:j(t),headers:t.headers})).ndjson()}}function jne(e){async function*r(t,n={}){const o=Array.isArray(t)?t:[t];yield*(await e.post("refs",{signal:n.signal,searchParams:j({arg:o.map(a=>`${a instanceof Uint8Array?Q.decode(a):a}`),...n}),headers:n.headers,transform:He})).ndjson()}return Object.assign(r,{local:Rne(e)})}function $ne(e){return async function*(t={}){yield*(await e.post("repo/gc",{signal:t.signal,searchParams:j(t),headers:t.headers,transform:o=>{var i;return{err:o.Error!=null?new Error(o.Error):null,cid:((i=o.Key)==null?void 0:i["/"])!=null?Q.parse(o.Key["/"]):null}}})).ndjson()}}function CP(e){return async function(t={}){const o=await(await e.post("repo/stat",{signal:t.signal,searchParams:j(t),headers:t.headers})).json();return{numObjects:BigInt(o.NumObjects),repoSize:BigInt(o.RepoSize),repoPath:o.RepoPath,version:o.Version,storageMax:BigInt(o.StorageMax)}}}function Nne(e){return async function(t={}){return(await(await e.post("repo/version",{signal:t.signal,searchParams:j(t),headers:t.headers})).json()).Version}}function kne(e){return{gc:$ne(e),stat:CP(e),version:Nne(e)}}function Mne(e){return async function(t,n={}){const o=await e.post("resolve",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers}),{Path:i}=await o.json();return i}}function Dne(e){return async function*(t,n={}){const o=await e.post("routing/findpeer",{signal:n.signal,searchParams:j({arg:t.toString(),stream:!0,...n}),headers:n.headers});for await(const i of o.ndjson())yield ki(i)}}function Lne(e){return async function*(t,n={}){const o=await e.post("routing/findprovs",{signal:n.signal,searchParams:j({arg:t.toString(),...n}),headers:n.headers});for await(const i of o.ndjson())yield ki(i)}}function Une(e){return async function*(t,n={}){const o=await e.post("routing/get",{signal:n.signal,searchParams:j({arg:t instanceof Uint8Array?we(t):t.toString(),...n}),headers:n.headers});for await(const i of o.ndjson())yield ki(i)}}function Fne(e){return async function*(t,n={recursive:!1}){const o=Array.isArray(t)?t:[t],i=await e.post("routing/provide",{signal:n.signal,searchParams:j({arg:o.map(a=>a.toString()),...n}),headers:n.headers});for await(const a of i.ndjson())yield ki(a)}}function xne(e){return async function*(t,n,o={}){const i=new AbortController,a=Tr([i.signal,o.signal]);try{const s=await e.post("routing/put",{signal:a,searchParams:j({arg:t instanceof Uint8Array?we(t):t.toString(),stream:!0,...o}),...await hn([n],i,o.headers)});for await(const c of s.ndjson())yield ki(c)}finally{a.clear()}}}function Bne(e){return{findPeer:Dne(e),findProvs:Lne(e),get:Une(e),provide:Fne(e),put:xne(e)}}function Vne(e){return async function*(t={}){yield*(await e.post("stats/bw",{signal:t.signal,searchParams:j(t),headers:t.headers,transform:o=>({totalIn:BigInt(o.TotalIn),totalOut:BigInt(o.TotalOut),rateIn:parseFloat(o.RateIn),rateOut:parseFloat(o.RateOut)})})).ndjson()}}function Wne(e){return{bitswap:oP(e),repo:CP(e),bw:Vne(e)}}function zne(e){return async function(t={}){await(await e.post("shutdown",{signal:t.signal,searchParams:j(t),headers:t.headers})).text()}}function qne(e){return async function(t={}){const n=await e.post("swarm/addrs",{signal:t.signal,searchParams:j(t),headers:t.headers}),{Addrs:o}=await n.json();return Object.keys(o).map(i=>({id:ft(i),addrs:(o[i]??[]).map(a=>st(a))}))}}function Hne(e){return async function(t,n={}){const o=await e.post("swarm/connect",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers}),{Strings:i}=await o.json();return i??[]}}function Gne(e){return async function(t,n={}){const o=await e.post("swarm/disconnect",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers}),{Strings:i}=await o.json();return i??[]}}function Kne(e){return async function(t={}){const n=await e.post("swarm/addrs/local",{signal:t.signal,searchParams:j(t),headers:t.headers}),{Strings:o}=await n.json();return(o??[]).map(i=>st(i))}}function Yne(e){return async function(t={}){return((await(await e.post("swarm/peers",{signal:t.signal,searchParams:j(t),headers:t.headers})).json()).Peers??[]).map(i=>({addr:st(i.Addr),peer:ft(i.Peer),muxer:i.Muxer,latency:i.Latency,streams:i.Streams,direction:i.Direction==null?void 0:i.Direction===0?"inbound":"outbound"}))}}function Zne(e){return{addrs:qne(e),connect:Hne(e),disconnect:Gne(e),localAddrs:Kne(e),peers:Yne(e)}}function Qne(e){return async function(t={}){const n=await e.post("version",{signal:t.signal,searchParams:j(t),headers:t.headers});return{...He(await n.json()),"ipfs-http-client":"1.0.0"}}}class Xne{constructor(r){m(this,"bases");m(this,"codecs");m(this,"hashers");m(this,"bitswap");m(this,"block");m(this,"bootstrap");m(this,"config");m(this,"dag");m(this,"dht");m(this,"diag");m(this,"files");m(this,"key");m(this,"log");m(this,"name");m(this,"object");m(this,"pin");m(this,"pubsub");m(this,"refs");m(this,"repo");m(this,"routing");m(this,"stats");m(this,"swarm");m(this,"add");m(this,"addAll");m(this,"cat");m(this,"get");m(this,"ls");m(this,"id");m(this,"version");m(this,"stop");m(this,"ping");m(this,"resolve");m(this,"commands");m(this,"mount");m(this,"isOnline");m(this,"getEndpointConfig");var s,c,u,l,d,h;const t=new Cre(r),n={name:Zr.name,code:Zr.code,encode:p=>p,decode:p=>p},o=Object.values(nl);(((s=r.ipld)==null?void 0:s.bases)??[]).forEach(p=>o.push(p)),this.bases=new Ire({bases:o,loadBase:(c=r.ipld)==null?void 0:c.loadBase});const i=Object.values(RK);[lQ,TZ,zZ,cX,n].concat(((u=r.ipld)==null?void 0:u.codecs)??[]).forEach(p=>{i.push(p)}),this.codecs=new jre({codecs:i,loadCodec:(l=r.ipld)==null?void 0:l.loadCodec});const a=Object.values(IK);(((d=r.ipld)==null?void 0:d.hashers)??[]).forEach(p=>a.push(p)),this.hashers=new Nre({hashers:a,loadHasher:(h=r.ipld)==null?void 0:h.loadHasher}),this.bitswap=cee(t),this.block=pee(t),this.bootstrap=bee(t),this.config=Aee(t),this.dag=Dee(t,this.codecs),this.dht=Hee(t),this.diag=Zee(t),this.files=cte(t),this.key=mte(t),this.log=Lre(t),this.name=Gre(t),this.object=Qre(t,this.codecs),this.pin=_ne(t),this.pubsub=Ine(t),this.refs=jne(t),this.repo=kne(t),this.routing=Bne(t),this.stats=Wne(t),this.swarm=Zne(t),this.add=kX(t),this.addAll=VS(t),this.cat=mee(t),this.get=fte(t),this.ls=Ure(t),this.id=uP(t),this.version=Qne(t),this.stop=zne(t),this.ping=yne(t),this.resolve=Mne(t),this.commands=gee(t),this.mount=xre(t),this.isOnline=dte(t),this.getEndpointConfig=lte(t)}}function Jne(e){return new Xne(e)}function eoe(e={}){return(typeof e=="string"||ol(e)||e instanceof URL)&&(e={url:e}),Jne(e)}let Fp=null;const voe=()=>(Fp||(Fp=Ng.driver(Tc.neo4jURL,Ng.auth.basic(Tc.neo4jUser,Tc.neo4jPass))),Fp);let xp=null;const _oe=()=>(xp||(xp=eoe(Tc.ipfsAPI.replace(/\/+$/,""))),xp);export{cQ as A,zE as B,Q as C,uoe as D,eK as E,N as T,vt as U,_oe as a,De as b,tl as c,rl as d,mS as e,Av as f,voe as g,Ed as h,Zr as i,QG as j,Sd as k,PZ as l,_S as m,yS as n,gS as o,SZ as p,ay as q,cZ as r,sy as s,uZ as t,g as u,Fr as v,Qr as w,uQ as x,sQ as y,PS as z};

import"./CWj6FrbW.js";import{p as G,aj as N,g as J,k as v,al as S,ak as E,f as d,b as _,c as K,s as R,d as y,r as x,a as M,t as O}from"./DT345vJT.js";import{d as Q,e as D}from"./CQsOHSfA.js";import{i as A}from"./BI-RejmI.js";import{e as X,i as Y}from"./wtRIEkiG.js";import{r as Z,s as I}from"./DFqy6DhR.js";import{s as ee}from"./Dyeyz8Pg.js";import{c as te}from"./BI8kS9Zk.js";import{b as ne}from"./Coc-yxVr.js";import{p as le}from"./CfsFpiUc.js";import{s as oe}from"./DB-vKSJn.js";const r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));function ie(e,n=0){return(r[e[n+0]]+r[e[n+1]]+r[e[n+2]]+r[e[n+3]]+"-"+r[e[n+4]]+r[e[n+5]]+"-"+r[e[n+6]]+r[e[n+7]]+"-"+r[e[n+8]]+r[e[n+9]]+"-"+r[e[n+10]]+r[e[n+11]]+r[e[n+12]]+r[e[n+13]]+r[e[n+14]]+r[e[n+15]]).toLowerCase()}let U;const se=new Uint8Array(16);function re(){if(!U){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");U=crypto.getRandomValues.bind(crypto)}return U(se)}const V={};function De(e,n,t){let l;{const o=Date.now(),c=re();ae(V,o,c),l=ue(c,V.msecs,V.seq,n,t)}return n??ie(l)}function ae(e,n,t){return e.msecs??(e.msecs=-1/0),e.seq??(e.seq=0),n>e.msecs?(e.seq=t[6]<<23|t[7]<<16|t[8]<<8|t[9],e.msecs=n):(e.seq=e.seq+1|0,e.seq===0&&e.msecs++),e}function ue(e,n,t,l,o=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(!l)l=new Uint8Array(16),o=0;else if(o<0||o+16>l.length)throw new RangeError(`UUID byte range ${o}:${o+15} is out of buffer bounds`);return n??(n=Date.now()),t??(t=e[6]*127<<24|e[7]<<16|e[8]<<8|e[9]),l[o++]=n/1099511627776&255,l[o++]=n/4294967296&255,l[o++]=n/16777216&255,l[o++]=n/65536&255,l[o++]=n/256&255,l[o++]=n&255,l[o++]=112|t>>>28&15,l[o++]=t>>>20&255,l[o++]=128|t>>>14&63,l[o++]=t>>>6&255,l[o++]=t<<2&255|e[10]&3,l[o++]=e[11],l[o++]=e[12],l[o++]=e[13],l[o++]=e[14],l[o++]=e[15],l}function ce(e,n,t,l){n&&console.debug({"Replacing From":[...t]}),t.length>0&&l(t.pop()??[""])}var pe=d('<li class="svelte-1fu48zf"><button id="clear" class="svelte-1fu48zf"><span>∅</span></button></li>'),me=function(e,n,t){var l;if(e.key==="Enter"){e.preventDefault();const o=new Event("submit",{bubbles:!0,cancelable:!0});o.submitter=this,(l=v(n))==null||l.dispatchEvent(o),t&&console.debug({Fired:o})}},ve=d('<button type="button" class="minus svelte-1fu48zf"><span class="svelte-1fu48zf">⨯</span></button>'),ge=d('<li class="svelte-1fu48zf"><button type="button" class="slash svelte-1fu48zf"><span>/</span></button></li>'),be=d('<li><input class="svelte-1fu48zf"/> <!></li> <!>',1),fe=d('<li class="svelte-1fu48zf"><button type="button" class="svelte-1fu48zf"><span>↺</span></button></li>'),_e=d('<form><ol class="svelte-1fu48zf"><!> <li class="svelte-1fu48zf"><button id="before" class="svelte-1fu48zf"><span>+</span></button></li> <!> <li class="svelte-1fu48zf"><button id="more" class="svelte-1fu48zf"><span>+</span></button></li> <!></ol></form>');function Ie(e,n){G(n,!0);let t=le(n,"elements",31,()=>N([""])),l=N([]),o=S(null),{debugging:c}=oe,w=S(null),z=S(null);function k(i,{clear:s=!1}={}){const a=s?[]:t().slice(0,i),g=s?[]:t().slice(i),p=[...a,"",...g];l.push([...t()]),c&&console.debug({Replacing:l.at(-1),With:[...p]}),t(p),E(o,i,!0)}J(()=>{var i,s;v(o)!=null&&((s=(i=v(w))==null?void 0:i.querySelectorAll("input")[v(o)])==null||s.focus(),E(o,null))});var h=_e(),$=y(h),j=y($);{var P=i=>{var s=pe();_(i,s)};A(j,i=>{(t().length>1||t()[0]!=="")&&i(P)})}var q=R(j,4);X(q,17,t,Y,(i,s,a)=>{var g=be(),p=M(g);let m;var b=y(p);Z(b),I(b,"id",`text-${a}`),b.__keydown=[me,w,c];var H=R(b,2);{var L=u=>{var f=ve();f.__click=()=>{l.push([...t()]),t().splice(a,1)},I(f,"tabindex",-1),_(u,f)};A(H,u=>{t().length>1&&u(L)})}x(p);var T=R(p,2);{var W=u=>{var f=ge(),F=y(f);F.__click=()=>k(a+1),I(F,"tabindex",-1),x(f),_(u,f)};A(T,u=>{a<t().length-1&&u(W)})}O(u=>m=ee(p,1,"svelte-1fu48zf",null,m,u),[()=>({single:t().length<=1})]),D("focus",b,()=>{E(z,t()[a],!0)}),D("blur",b,()=>{v(z)&&v(z)!==t()[a]&&(c&&console.debug({from:v(z),to:t()[a]}),l.push([...t()]))}),te(b,()=>t()[a],u=>t(t()[a]=u,!0)),_(i,g)});var B=R(q,4);{var C=i=>{var s=fe(),a=y(s);a.__click=[ce,c,l,t],x(s),_(i,s)};A(B,i=>{l.length>0&&i(C)})}x($),x(h),ne(h,i=>E(w,i),()=>v(w)),D("submit",h,i=>{var p;i.preventDefault();const s=(p=i.submitter)==null?void 0:p.id;if(!s)throw new Error("No submitter.");c&&console.debug({submitter:s});const[a,g]=Array.from(s.match(/^text-(\d+)$/)??[]);if(g){const m=Number(g)+1;c&&console.debug({"Inserting At":m}),k(m)}else if(["before","more"].includes(s)){const m=s==="before"?0:t().length;c&&console.debug({idx:m}),k(m)}else if(s==="clear")k(0,{clear:!0});else throw new Error(`Unrecognized Submitter Id: "${s}"`)}),_(e,h),K()}Q(["keydown","click"]);export{Ie as P,De as v};

import{a1 as l,cl as I,cU as E,b_ as D,bo as w,a0 as P,cV as T,bG as b,T as z}from"./DgjbO070.js";class S extends l{constructor({domain:t}){super(`Invalid domain "${I(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class x extends l{constructor({primaryType:t,types:o}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(o))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class M extends l{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function N(e){const{domain:t,message:o,primaryType:n,types:s}=e,i=(f,u)=>{const r={...u};for(const a of f){const{name:c,type:y}=a;y==="address"&&(r[c]=r[c].toLowerCase())}return r},d=s.EIP712Domain?t?i(s.EIP712Domain,t):{}:{},p=(()=>{if(n!=="EIP712Domain")return i(s[n],o)})();return I({domain:d,message:p,primaryType:n,types:s})}function $(e){const{domain:t,message:o,primaryType:n,types:s}=e,i=(d,p)=>{for(const f of d){const{name:u,type:r}=f,a=p[u],c=r.match(E);if(c&&(typeof a=="number"||typeof a=="bigint")){const[h,m,v]=c;D(a,{signed:m==="int",size:Number.parseInt(v,10)/8})}if(r==="address"&&typeof a=="string"&&!w(a))throw new P({address:a});const y=r.match(T);if(y){const[h,m]=y;if(m&&b(a)!==Number.parseInt(m,10))throw new z({expectedSize:Number.parseInt(m,10),givenSize:b(a)})}const g=s[r];g&&(_(r),i(g,a))}};if(s.EIP712Domain&&t){if(typeof t!="object")throw new S({domain:t});i(s.EIP712Domain,t)}if(n!=="EIP712Domain")if(s[n])i(s[n],o);else throw new x({primaryType:n,types:s})}function k({domain:e}){return[typeof e?.name=="string"&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},(typeof e?.chainId=="number"||typeof e?.chainId=="bigint")&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function _(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new M({type:e})}export{S as I,x as a,M as b,k as g,N as s,$ as v};

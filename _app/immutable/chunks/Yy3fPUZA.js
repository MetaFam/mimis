const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./TErYwWV_.js","./C_jHh3BX.js","./usnz5x8K.js","./DEo6VAvv.js","./D89ygL4Z.js","./DIXxOT1e.js","./CsYNm5Ag.js","./CTcpOXFM.js","./DTib3JKS.js","./C1FmrZbK.js","./gnwNGTm5.js","./BAvNtj9W.js","./ChznqZw0.js","./dng_XcU5.js","./DZ4pG2zt.js","./Dr43NpU3.js","./DAFowV24.js","./CDXh-Vh2.js","./DvfuYRBz.js","./ahvB1zje.js","./BEeSodf0.js","./ClzrMkz9.js","./DjkQL7yM.js","./BZ0YmUs2.js","./Dmg8YACJ.js","./f8nGEtd7.js","./DbzmEfdT.js","./DH9Jl3x9.js","./CE4FvqYX.js","./BFUSTlzF.js","./Deq1yDFK.js","./DYNmJ23A.js","./C9qMwrnQ.js","./Cz-3e7Or.js","./BQhdejVO.js","./CA42pcXq.js","./CYb4SLa5.js","./CGyjqlMQ.js","./Cf7XZ3JC.js","./DJDR6KOq.js","./BrZvFJXj.js","./samDicpJ.js","./CkthxIKP.js","./Cg4eAw7R.js","./DxZREbSz.js","./05KRxa-J.js","./D8VdscR8.js","./Bx5NuHDh.js","./DVg2Ap1B.js"])))=>i.map(i=>d[i]);
import{_ as Kt}from"./C1FmrZbK.js";import{b as i_}from"./Lj-dUBm2.js";import{u as Uh,q as o_,s as a_,g as pn,h as kl,p as c_,f as u_,H as l_,j as Pg,v as d_,w as Og,a as Rg,t as h_,b as $g,d as f_,e as B0}from"./C_jHh3BX.js";const ou=BigInt(2**32-1),Dg=BigInt(32);function p_(t,e=!1){return e?{h:Number(t&ou),l:Number(t>>Dg&ou)}:{h:Number(t>>Dg&ou)|0,l:Number(t&ou)|0}}function g_(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=p_(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const m_=(t,e,n)=>t<<n|e>>>32-n,y_=(t,e,n)=>e<<n|t>>>32-n,w_=(t,e,n)=>e<<n-32|t>>>64-n,b_=(t,e,n)=>t<<n-32|e>>>64-n,E_=Symbol(),kg=Object.getPrototypeOf,Bh=new WeakMap,v_=t=>t&&(Bh.has(t)?Bh.get(t):kg(t)===Object.prototype||kg(t)===Array.prototype),C_=t=>v_(t)&&t[E_]||null,Ug=(t,e=!0)=>{Bh.set(t,e)},nl={},lp=t=>typeof t=="object"&&t!==null,__=t=>lp(t)&&!Bc.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),M0=(t,e)=>{const n=Mh.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return Ug(r,!0),Mh.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(Bc.has(i))Ug(i,!1);else if(Bs.has(i)){const[c,u]=Bs.get(i);a.value=M0(c,u())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},A_=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),u=Reflect.get(s,i,a);if(c&&(Bg(u,o)||za.has(o)&&Bg(u,za.get(o))))return!0;n(i),lp(o)&&(o=C_(o)||o);const l=!Bs.has(o)&&S_(o)?Je(o):o;return e(i,l),Reflect.set(s,i,l,a),r(["set",[i],o,u]),!0}}),Bs=new WeakMap,Bc=new WeakSet,Mh=new WeakMap,wa=[1,1],za=new WeakMap;let Bg=Object.is,I_=(t,e)=>new Proxy(t,e),S_=__,N_=M0,T_=A_;function Je(t={}){if(!lp(t))throw new Error("object required");const e=za.get(t);if(e)return e;let n=wa[0];const r=new Set,s=(m,b=++wa[0])=>{n!==b&&(n=b,r.forEach(w=>w(m,b)))};let i=wa[1];const o=(m=++wa[1])=>(i!==m&&!r.size&&(i=m,c.forEach(([b])=>{const w=b[1](m);w>n&&(n=w)})),n),a=m=>(b,w)=>{const E=[...b];E[1]=[m,...E[1]],s(E,w)},c=new Map,u=(m,b)=>{const w=!Bc.has(b)&&Bs.get(b);if(w){if((nl?"production":void 0)!=="production"&&c.has(m))throw new Error("prop listener already exists");if(r.size){const E=w[2](a(m));c.set(m,[w,E])}else c.set(m,[w])}},l=m=>{var b;const w=c.get(m);w&&(c.delete(m),(b=w[1])==null||b.call(w))},d=m=>(r.add(m),r.size===1&&c.forEach(([w,E],N)=>{if((nl?"production":void 0)!=="production"&&E)throw new Error("remove already exists");const A=w[2](a(N));c.set(N,[w,A])}),()=>{r.delete(m),r.size===0&&c.forEach(([w,E],N)=>{E&&(E(),c.set(N,[w]))})});let h=!0;const f=T_(()=>h,u,l,s),p=I_(t,f);za.set(t,p);const g=[t,o,d];return Bs.set(p,g),Reflect.ownKeys(t).forEach(m=>{const b=Object.getOwnPropertyDescriptor(t,m);"value"in b&&b.writable&&(p[m]=t[m])}),h=!1,p}function Ut(t,e,n){const r=Bs.get(t);(nl?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const u=o(l=>{i.push(l),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,u()}}function Ha(t){const e=Bs.get(t);(nl?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return N_(n,r())}function yi(t){return Bc.add(t),t}function x_(){return{proxyStateMap:Bs,refSet:Bc,snapCache:Mh,versionHolder:wa,proxyCache:za}}function Bt(t,e,n,r){let s=t[e];return Ut(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:P_,snapCache:O_}=x_(),au=t=>P_.has(t);function R_(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const u=O_.get(a),l=u==null?void 0:u[1];if(l&&!s.has(l)){const d=new Map(r);s.set(l,d)}},o=u=>s.get(u)||r,a={data:e,index:n,epoch:0,get size(){return au(this)||i(),o(this).size},get(u){const d=o(this).get(u);if(d===void 0){this.epoch;return}return this.data[d]},has(u){const l=o(this);return this.epoch,l.has(u)},set(u,l){if(!au(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(u);return d===void 0?(r.set(u,this.index),this.data[this.index++]=l):this.data[d]=l,this.epoch++,this},delete(u){if(!au(this))throw new Error("Cannot perform mutations on a snapshot");const l=r.get(u);return l===void 0?!1:(delete this.data[l],r.delete(u),this.epoch++,!0)},clear(){if(!au(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(u){this.epoch,o(this).forEach((d,h)=>{u(this.data[d],h,this)})},*entries(){this.epoch;const u=o(this);for(const[l,d]of u)yield[l,this.data[d]]},*keys(){this.epoch;const u=o(this);for(const l of u.keys())yield l},*values(){this.epoch;const u=o(this);for(const l of u.values())yield this.data[l]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=Je(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var Mg={};const F={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof Mg<"u"?Mg.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},qa={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=F.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var $_=20,D_=1,wi=1e6,Lg=1e6,k_=-7,U_=21,B_=!1,Mc="[big.js] ",Oi=Mc+"Invalid ",Ul=Oi+"decimal places",M_=Oi+"rounding mode",L0=Mc+"Division by zero",Ve={},Ar=void 0,L_=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function F0(){function t(e){var n=this;if(!(n instanceof t))return e===Ar?F0():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Oi+"value");e=e===0&&1/e<0?"-0":String(e)}F_(n,e)}n.constructor=t}return t.prototype=Ve,t.DP=$_,t.RM=D_,t.NE=k_,t.PE=U_,t.strict=B_,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function F_(t,e){var n,r,s;if(!L_.test(e))throw Error(Oi+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function Ri(t,e,n,r){var s=t.c;if(n===Ar&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(M_);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Ar))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Ar||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function $i(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}Ve.abs=function(){var t=new this.constructor(this);return t.s=1,t};Ve.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};Ve.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>wi)throw Error(Ul);if(!s[0])throw Error(L0);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,u,l,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),m=g.length,b=t,w=b.c=[],E=0,N=o+(b.e=e.e-t.e)+1;for(b.s=i,i=N<0?0:N,h.unshift(0);m++<a;)g.push(0);do{for(u=0;u<10;u++){if(a!=(m=g.length))l=a>m?1:-1;else for(d=-1,l=0;++d<a;)if(s[d]!=g[d]){l=s[d]>g[d]?1:-1;break}if(l<0){for(c=m==a?s:h;m;){if(g[--m]<c[m]){for(d=m;d&&!g[--d];)g[d]=9;--g[d],g[m]+=10}g[m]-=c[m]}for(;!g[0];)g.shift()}else break}w[E++]=l?u:++u,g[0]&&l?g[m]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==Ar)&&i--);return!w[0]&&E!=1&&(w.shift(),b.e--,N--),E>N&&Ri(b,N,n.RM,g[0]!==Ar),b};Ve.eq=function(t){return this.cmp(t)===0};Ve.gt=function(t){return this.cmp(t)>0};Ve.gte=function(t){return this.cmp(t)>-1};Ve.lt=function(t){return this.cmp(t)<0};Ve.lte=function(t){return this.cmp(t)<1};Ve.minus=Ve.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var u=i.c.slice(),l=i.e,d=t.c,h=t.e;if(!u[0]||!d[0])return d[0]?t.s=-c:u[0]?t=new o(i):t.s=1,t;if(a=l-h){for((s=a<0)?(a=-a,r=u):(h=l,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=u.length<d.length)?u:d).length,a=c=0;c<n;c++)if(u[c]!=d[c]){s=u[c]<d[c];break}if(s&&(r=u,u=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=u.length))>0)for(;c--;)u[e++]=0;for(c=e;n>a;){if(u[--n]<d[n]){for(e=n;e&&!u[--e];)u[e]=9;--u[e],u[n]+=10}u[n]-=d[n]}for(;u[--c]===0;)u.pop();for(;u[0]===0;)u.shift(),--h;return u[0]||(t.s=1,u=[h=0]),t.c=u,t.e=h,t};Ve.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(L0);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};Ve.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};Ve.plus=Ve.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,u=t.c;if(!a[0]||!u[0])return u[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=u):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-u.length<0&&(r=u,u=a,a=r),e=u.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+u[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};Ve.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-Lg||t>Lg)throw Error(Oi+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};Ve.prec=function(t,e){if(t!==~~t||t<1||t>wi)throw Error(Oi+"precision");return Ri(new this.constructor(this),t,e)};Ve.round=function(t,e){if(t===Ar)t=0;else if(t!==~~t||t<-wi||t>wi)throw Error(Ul);return Ri(new this.constructor(this),t+this.e+1,e)};Ve.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(Mc+"No square root");i=Math.sqrt(+$i(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return Ri(t,(s.DP-=4)+t.e+1,s.RM)};Ve.times=Ve.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,u=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+u,o<a&&(e=s,s=i,i=e,u=o,o=a,a=u),e=new Array(u=o+a);u--;)e[u]=0;for(c=a;c--;){for(a=0,u=o+c;u>c;)a=e[u]+i[c]*s[u-c-1]+a,e[u--]=a%10,a=a/10|0;e[u]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};Ve.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Ar){if(t!==~~t||t<0||t>wi)throw Error(Ul);for(n=Ri(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return $i(n,!0,!!r)};Ve.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Ar){if(t!==~~t||t<0||t>wi)throw Error(Ul);for(n=Ri(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return $i(n,!1,!!r)};Ve[Symbol.for("nodejs.util.inspect.custom")]=Ve.toJSON=Ve.toString=function(){var t=this,e=t.constructor;return $i(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};Ve.toNumber=function(){var t=+$i(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(Mc+"Imprecise conversion");return t};Ve.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Ar){if(t!==~~t||t<1||t>wi)throw Error(Oi+"precision");for(n=Ri(new r(n),t,e);n.c.length<t;)n.c.push(0)}return $i(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};Ve.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(Mc+"valueOf disallowed");return $i(t,t.e<=e.NE||t.e>=e.PE,!0)};var Ko=F0();const j_={bigNumber(t){return t?new Ko(t):new Ko(0)},multiply(t,e){if(t===void 0||e===void 0)return new Ko(0);const n=new Ko(t),r=new Ko(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},z_=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],H_=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],q_=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],W_={getERC20Abi:t=>F.USDT_CONTRACT_ADDRESSES.includes(t)?q_:z_,getSwapAbi:()=>H_},Sn={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},ye={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function Id(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const pe={setItem(t,e){ba()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(ba())return localStorage.getItem(t)||void 0},removeItem(t){ba()&&localStorage.removeItem(t)},clear(){ba()&&localStorage.clear()}};function ba(){return typeof window<"u"&&typeof localStorage<"u"}function Yr(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var Fg={};const Sd=(typeof process<"u"&&typeof Fg<"u"?Fg.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",j0=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],V_="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",ze={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:Sd,SECURE_SITE_DASHBOARD:`${Sd}/dashboard`,SECURE_SITE_FAVICON:`${Sd}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:[F.CHAIN.EVM,F.CHAIN.SOLANA],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[F.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[F.CHAIN.EVM,F.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[F.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[F.CHAIN.EVM,F.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},G={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=G.getActiveNamespace(),e=G.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{pe.setItem(ye.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=pe.getItem(ye.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{pe.removeItem(ye.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{pe.setItem(ye.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{pe.setItem(ye.ACTIVE_CAIP_NETWORK_ID,t),G.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return pe.getItem(ye.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{pe.removeItem(ye.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=Id(t);pe.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=G.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),pe.setItem(ye.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=pe.getItem(ye.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=Id(t);pe.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return pe.getItem(ye.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=Id(t);return pe.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{pe.setItem(ye.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return pe.getItem(ye.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{pe.removeItem(ye.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return pe.getItem(ye.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=pe.getItem(ye.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{pe.setItem(ye.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return pe.getItem(ye.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=pe.getItem(ye.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));pe.setItem(ye.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=G.getConnectedNamespaces();e.includes(t)||(e.push(t),G.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=G.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),G.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return pe.getItem(ye.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{pe.setItem(ye.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{pe.removeItem(ye.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=pe.getItem(ye.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=G.getBalanceCache();pe.setItem(ye.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=G.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;G.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=G.getBalanceCache();e[t.caipAddress]=t,pe.setItem(ye.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=pe.getItem(ye.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=G.getBalanceCache();pe.setItem(ye.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=G.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),G.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=G.getNativeBalanceCache();e[t.caipAddress]=t,pe.setItem(ye.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=pe.getItem(ye.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=G.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;G.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=G.getEnsCache();e[t.address]=t,pe.setItem(ye.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=G.getEnsCache();pe.setItem(ye.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=pe.getItem(ye.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=G.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;G.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=G.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},pe.setItem(ye.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=G.getIdentityCache();pe.setItem(ye.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{pe.removeItem(ye.PORTFOLIO_CACHE),pe.removeItem(ye.NATIVE_BALANCE_CACHE),pe.removeItem(ye.ENS_CACHE),pe.removeItem(ye.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{pe.setItem(ye.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=pe.getItem(ye.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=G.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===F.CONNECTOR_ID.AUTH;if(a&&!c){const u=new Set(a.accounts.map(d=>d.address.toLowerCase())),l=o.accounts.filter(d=>!u.has(d.address.toLowerCase()));a.accounts.push(...l)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};pe.setItem(ye.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=pe.getItem(ye.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=G.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),pe.setItem(ye.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=pe.getItem(ye.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=G.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),pe.setItem(ye.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=G.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),pe.setItem(ye.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(G.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},ae={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return ae.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=ze.TEN_SEC_MS:!0},isAllowedRetry(t,e=ze.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(ae.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+ze.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ae.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ae.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?G.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ae.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return F.W3M_API_URL},getBlockchainApiUrl(){return F.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return F.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?ze.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in F.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),u=t.substring(s),l=c+n;return a+l+u}};async function Yo(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class Lc{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Yo(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Yo(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Yo(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Yo(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Yo(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const G_={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?ze.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ae.isTelegram()){if(ae.isIos())return t.filter(e=>e!=="google");if(ae.isMac())return t.filter(e=>e!=="x");if(ae.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},le=Je({features:ze.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:ze.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),q={state:le,subscribeKey(t,e){return Bt(le,t,e)},setOptions(t){Object.assign(le,t)},setRemoteFeatures(t){var n,r;if(!t)return;const e={...le.remoteFeatures,...t};le.remoteFeatures=e,(n=le.remoteFeatures)!=null&&n.socials&&(le.remoteFeatures.socials=G_.filterSocialsByPlatform(le.remoteFeatures.socials)),(r=le.features)!=null&&r.pay&&(le.remoteFeatures.email=!1,le.remoteFeatures.socials=!1)},setFeatures(t){var n;if(!t)return;le.features||(le.features=ze.DEFAULT_FEATURES);const e={...le.features,...t};le.features=e,(n=le.features)!=null&&n.pay&&le.remoteFeatures&&(le.remoteFeatures.email=!1,le.remoteFeatures.socials=!1)},setProjectId(t){le.projectId=t},setCustomRpcUrls(t){le.customRpcUrls=t},setAllWallets(t){le.allWallets=t},setIncludeWalletIds(t){le.includeWalletIds=t},setExcludeWalletIds(t){le.excludeWalletIds=t},setFeaturedWalletIds(t){le.featuredWalletIds=t},setTokens(t){le.tokens=t},setTermsConditionsUrl(t){le.termsConditionsUrl=t},setPrivacyPolicyUrl(t){le.privacyPolicyUrl=t},setCustomWallets(t){le.customWallets=t},setIsSiweEnabled(t){le.isSiweEnabled=t},setIsUniversalProvider(t){le.isUniversalProvider=t},setSdkVersion(t){le.sdkVersion=t},setMetadata(t){le.metadata=t},setDisableAppend(t){le.disableAppend=t},setEIP6963Enabled(t){le.enableEIP6963=t},setDebug(t){le.debug=t},setEnableWalletConnect(t){le.enableWalletConnect=t},setEnableWalletGuide(t){le.enableWalletGuide=t},setEnableAuthLogger(t){le.enableAuthLogger=t},setEnableWallets(t){le.enableWallets=t},setPreferUniversalLinks(t){le.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(ze.SIWX_DEFAULTS))t[e]??(t[e]=n);le.siwx=t},setConnectMethodsOrder(t){le.features={...le.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){le.features={...le.features,walletFeaturesOrder:t}},setSocialsOrder(t){le.remoteFeatures={...le.remoteFeatures,socials:t}},setCollapseWallets(t){le.features={...le.features,collapseWallets:t}},setEnableEmbedded(t){le.enableEmbedded=t},setAllowUnsupportedChain(t){le.allowUnsupportedChain=t},setManualWCControl(t){le.manualWCControl=t},setEnableNetworkSwitch(t){le.enableNetworkSwitch=t},setEnableReconnect(t){le.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(le.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){le.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return le.universalProviderConfigOverride},getSnapshot(){return Ha(le)}},K_=Object.freeze({enabled:!0,events:[]}),Y_=new Lc({baseUrl:ae.getAnalyticsUrl(),clientId:null}),Z_=5,J_=60*1e3,is=Je({...K_}),X_={state:is,subscribeKey(t,e){return Bt(is,t,e)},async sendError(t,e){if(!is.enabled)return;const n=Date.now();if(is.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<J_}).length>=Z_)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};is.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=q.state;await Y_.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ae.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){is.enabled=!0},disable(){is.enabled=!1},clearEvents(){is.events=[]}};class Co extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,Co.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Co):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function jg(t,e){const n=t instanceof Co?t:new Co(t instanceof Error?t.message:String(t),e,t);throw X_.sendError(n,n.category),n}function On(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return jg(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return jg(a,e)}},n[r]=i}else n[r]=s}),n}var _o={};const Q_="https://secure.walletconnect.org/sdk",eA=(typeof process<"u"&&typeof _o<"u"?_o.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||Q_,tA=(typeof process<"u"&&typeof _o<"u"?_o.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",nA=(typeof process<"u"&&typeof _o<"u"?_o.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",ce={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},vt={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Er={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},rA={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Er.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Er.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Er.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Er.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===F.CHAIN.SOLANA&&t===Er.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Er.COINBASE.url}/dapp?cb_url=${r}`)}},vn=Je({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),sA={state:vn,subscribeNetworkImages(t){return Ut(vn.networkImages,()=>t(vn.networkImages))},subscribeKey(t,e){return Bt(vn,t,e)},subscribe(t){return Ut(vn,()=>t(vn))},setWalletImage(t,e){vn.walletImages[t]=e},setNetworkImage(t,e){vn.networkImages[t]=e},setChainImage(t,e){vn.chainImages[t]=e},setConnectorImage(t,e){vn.connectorImages={...vn.connectorImages,[t]:e}},setTokenImage(t,e){vn.tokenImages[t]=e},setCurrencyImage(t,e){vn.currencyImages[t]=e}},nr=On(sA),iA={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},Nd=Je({networkImagePromises:{}}),z0={async fetchWalletImage(t){if(t)return await de._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(Nd.networkImagePromises[t]||(Nd.networkImagePromises[t]=de._fetchNetworkImage(t)),await Nd.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return nr.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return nr.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return nr.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return nr.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return nr.state.connectorImages[t.imageId]},getChainImage(t){return nr.state.networkImages[iA[t]]}},os=Je({message:"",variant:"info",open:!1}),oA={state:os,subscribeKey(t,e){return Bt(os,t,e)},open(t,e){const{debug:n}=q.state,{shortMessage:r,longMessage:s}=t;n&&(os.message=r,os.variant=e,os.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){os.open=!1,os.message="",os.variant="info"}},rt=On(oA),aA=ae.getAnalyticsUrl(),cA=new Lc({baseUrl:aA,clientId:null}),uA=["MODAL_CREATED"],Ur=Je({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),We={state:Ur,subscribe(t){return Ut(Ur,()=>t(Ur))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=q.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=ue.state.address;if(uA.includes(t.data.event)||typeof window>"u")return;await cA.post({path:"/e",params:We.getSdkProperties(),body:{eventId:ae.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),Ur.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===F.HTTP_STATUS_CODES.FORBIDDEN&&!Ur.reportedErrors.FORBIDDEN&&(rt.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${ba()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Ur.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;Ur.timestamp=Date.now(),Ur.data=t,((e=q.state.features)!=null&&e.analytics||t.event==="INITIALIZE")&&We._sendAnalyticsEvent(Ur)}},lA=ae.getApiUrl(),tn=new Lc({baseUrl:lA,clientId:null}),dA=40,zg=4,hA=20,ve=Je({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),de={state:ve,subscribeKey(t,e){return Bt(ve,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=q.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return q.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${tn.baseUrl}/getWalletImage/${t}`,n=await tn.getBlob({path:e,params:de._getSdkProperties()});nr.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${tn.baseUrl}/public/getAssetImage/${t}`,n=await tn.getBlob({path:e,params:de._getSdkProperties()});nr.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${tn.baseUrl}/public/getAssetImage/${t}`,n=await tn.getBlob({path:e,params:de._getSdkProperties()});nr.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${tn.baseUrl}/public/getCurrencyImage/${t}`,n=await tn.getBlob({path:e,params:de._getSdkProperties()});nr.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${tn.baseUrl}/public/getTokenImage/${t}`,n=await tn.getBlob({path:e,params:de._getSdkProperties()});nr.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return ae.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Er.COINBASE.id?!0:_.state.activeChain==="solana"&&(n.id===Er.SOLFLARE.id||n.id===Er.PHANTOM.id)):t},async fetchProjectConfig(){return(await tn.get({path:"/appkit/v1/config",params:de._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await tn.get({path:"/projects/v1/origins",params:de._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===F.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=F.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=_.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!z0.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>de._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Q.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>de._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>de._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>de._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];de._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Er).map(o=>o.id));const r=await tn.get({path:"/getWallets",params:{...de._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:de._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=q.state;if(t!=null&&t.length){const e={...de._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??zg,include:t},{data:n}=await de.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>de._fetchWalletImage(i))),ve.featured=r,ve.allFeatured=r}},async fetchRecommendedWallets(){try{ve.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=q.state,r=[...e??[],...n??[]].filter(Boolean),s=_.getRequestedCaipNetworkIds().join(","),i={page:1,entries:zg,include:t,exclude:r,chains:s},{data:o,count:a}=await de.fetchWallets(i),c=G.getRecentWallets(),u=o.map(d=>d.image_id).filter(Boolean),l=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...u,...l].map(d=>de._fetchWalletImage(d))),ve.recommended=o,ve.allRecommended=o,ve.count=a??0}catch{}finally{ve.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=q.state,s=_.getRequestedCaipNetworkIds().join(","),i=[...ve.recommended.map(({id:l})=>l),...n??[],...r??[]].filter(Boolean),o={page:t,entries:dA,include:e,exclude:i,chains:s},{data:a,count:c}=await de.fetchWallets(o),u=a.slice(0,hA).map(l=>l.image_id).filter(Boolean);await Promise.allSettled(u.map(l=>de._fetchWalletImage(l))),ve.wallets=ae.uniqueBy([...ve.wallets,...de._filterOutExtensions(a)],"id").filter(l=>{var d;return(d=l.chains)==null?void 0:d.some(h=>s.includes(h))}),ve.count=c>ve.count?c:ve.count,ve.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await de.fetchWallets(e);n&&n.forEach(r=>{ve.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=q.state,s=_.getRequestedCaipNetworkIds().join(",");ve.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await de.fetchWallets(i);We.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>de._fetchWalletImage(c)),ae.wait(300)]),ve.search=de._filterOutExtensions(o)},initPromise(t,e){const n=ve.promises[t];return n||(ve.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&de.initPromise("connectorImages",de.fetchConnectorImages),e&&de.initPromise("featuredWallets",de.fetchFeaturedWallets),n&&de.initPromise("recommendedWallets",de.fetchRecommendedWallets),r&&de.initPromise("networkImages",de.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=q.state.features)!=null&&t.analytics&&de.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await tn.get({path:"/getAnalyticsConfig",params:de._getSdkProperties()});q.setFeatures({analytics:t})}catch{q.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){ve.featured=ve.allFeatured,ve.recommended=ve.allRecommended;return}const e=_.getRequestedCaipNetworkIds().join(",");ve.featured=ve.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),ve.recommended=ve.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),ve.filteredWallets=ve.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){ve.filteredWallets=[]},setFilterByNamespace(t){if(!t){ve.featured=ve.allFeatured,ve.recommended=ve.allRecommended;return}const e=_.getRequestedCaipNetworkIds().join(",");ve.featured=ve.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),ve.recommended=ve.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),ve.filteredWallets=ve.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Ge=Je({view:"Connect",history:["Connect"],transactionStack:[]}),fA={state:Ge,subscribeKey(t,e){return Bt(Ge,t,e)},pushTransactionStack(t){Ge.transactionStack.push(t)},popTransactionStack(t){const e=Ge.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),ge.goBack();break;case"cancel":s==null||s(),ge.goBack();break}},push(t,e){t!==Ge.view&&(Ge.view=t,Ge.history.push(t),Ge.data=e)},reset(t,e){Ge.view=t,Ge.history=[t],Ge.data=e},replace(t,e){Ge.history.at(-1)===t||(Ge.view=t,Ge.history[Ge.history.length-1]=t,Ge.data=e)},goBack(){var r;const t=_.state.activeCaipAddress,e=ge.state.view==="ConnectingFarcaster",n=!t&&e;if(Ge.history.length>1){Ge.history.pop();const[s]=Ge.history.slice(-1);s&&(t&&s==="Connect"?Ge.view="Account":Ge.view=s)}else Me.close();(r=Ge.data)!=null&&r.wallet&&(Ge.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){ue.setFarcasterUrl(void 0,_.state.activeChain);const a=Q.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=Ha(q.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Ge.history.length>1){Ge.history=Ge.history.slice(0,t+1);const[e]=Ge.history.slice(-1);e&&(Ge.view=e)}},goBackOrCloseModal(){ge.state.history.length>1?ge.goBack():Me.close()}},ge=On(fA),Br=Je({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Lh={state:Br,subscribe(t){return Ut(Br,()=>t(Br))},setThemeMode(t){Br.themeMode=t;try{const e=Q.getAuthConnector();if(e){const n=Lh.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Yr(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Br.themeVariables={...Br.themeVariables,...t};try{const e=Q.getAuthConnector();if(e){const n=Lh.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Yr(Br.themeVariables,Br.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Ha(Br)}},dn=On(Lh),H0={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},De=Je({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...H0},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),pA={state:De,subscribe(t){return Ut(De,()=>{t(De)})},subscribeKey(t,e){return Bt(De,t,e)},initialize(t){t.forEach(e=>{const n=G.getConnectedConnectorId(e);n&&Q.setConnectorId(n,e)})},setActiveConnector(t){t&&(De.activeConnector=yi(t))},setConnectors(t){t.filter(s=>!De.allConnectors.some(i=>i.id===s.id&&Q.getConnectorName(i.name)===Q.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&De.allConnectors.push(yi(s))});const n=Q.getEnabledNamespaces(),r=Q.getEnabledConnectors(n);De.connectors=Q.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(De.filterByNamespaceMap).forEach(e=>{De.filterByNamespaceMap[e]=!1}),t.forEach(e=>{De.filterByNamespaceMap[e]=!0}),Q.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){De.filterByNamespaceMap[t]=e,Q.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Q.getEnabledNamespaces(),e=Q.getEnabledConnectors(t),n=Q.areAllNamespacesEnabled();De.connectors=Q.mergeMultiChainConnectors(e),n?de.clearFilterByNamespaces():de.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(De.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return De.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(De.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Q.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===F.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Q.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===F.CONNECTOR_ID.AUTH){const s=t,i=Ha(q.state),o=dn.getSnapshot().themeMode,a=dn.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Yr(a,o)}),Q.setConnectors([t])}else Q.setConnectors([t])},getAuthConnector(t){var r;const e=t||_.state.activeChain,n=De.connectors.find(s=>s.id===F.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return De.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return De.allConnectors.find(e=>e.id===t)},getConnector(t,e){return De.allConnectors.filter(r=>r.chain===_.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=Ha(q.state),r=dn.getSnapshot().themeMode,s=dn.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Yr(s,r)})},getConnectorsByNamespace(t){const e=De.allConnectors.filter(n=>n.chain===t);return Q.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return _.checkIfSmartAccountEnabled()&&xn(t)===vt.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=Q.getConnector(t.id,t.rdns);rA.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,_.state.activeChain),e?ge.push("ConnectingExternal",{connector:e}):ge.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Q.getConnectorsByNamespace(t):Q.mergeMultiChainConnectors(De.allConnectors)},setFilterByNamespace(t){De.filterByNamespace=t,De.connectors=Q.getConnectors(t),de.setFilterByNamespace(t)},setConnectorId(t,e){t&&(De.activeConnectorIds={...De.activeConnectorIds,[e]:t},G.setConnectedConnectorId(e,t))},removeConnectorId(t){De.activeConnectorIds={...De.activeConnectorIds,[t]:void 0},G.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return De.activeConnectorIds[t]},isConnected(t){return t?!!De.activeConnectorIds[t]:Object.values(De.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){De.activeConnectorIds={...H0}}},Q=On(pA),gA=1e3,Zo={checkNamespaceConnectorId(t,e){return Q.getConnectorId(t)===e},isSocialProvider(t){return ze.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&Q.setActiveConnector(e),s==null||s(ae.isMobile()&&t),r){const u=Me.subscribeKey("open",l=>{l||(ge.state.view!==r&&ge.replace(r),u(),a(new Error("Modal closed")))})}const c=_.subscribeKey("activeCaipAddress",u=>{u&&(i==null||i(),n&&Me.close(),c(),o(Sn.parseCaipAddress(u)))})})},connectExternal(t){return new Promise((e,n)=>{const r=_.subscribeKey("activeCaipAddress",s=>{s&&(Me.close(),r(),e(Sn.parseCaipAddress(s)))});ee.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=ue.state.socialWindow,i=ue.state.socialProvider,o=!1,a=null;const c=_.subscribeKey("activeCaipAddress",u=>{u&&(e&&Me.close(),c())});return new Promise((u,l)=>{async function d(f){var p,g;if((p=f.data)!=null&&p.resultUri)if(f.origin===F.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const m=Q.getAuthConnector();if(m&&!o){s&&(s.close(),ue.setSocialWindow(void 0,_.state.activeChain),s=ue.state.socialWindow),o=!0;const b=f.data.resultUri;if(i&&We.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}}),i){G.setConnectedSocialProvider(i),await ee.connectExternal({id:m.id,type:m.type,socialUri:b},m.chain);const w=_.state.activeCaipAddress;if(!w){l(new Error("Failed to connect"));return}u(Sn.parseCaipAddress(w)),We.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i,caipNetworkId:(g=_.getActiveCaipNetwork())==null?void 0:g.caipNetworkId}})}}}catch{i&&We.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),l(new Error("Failed to connect"))}}else i&&We.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(ue.setSocialProvider(t,_.state.activeChain),i=ue.state.socialProvider,We.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=Me.subscribeKey("open",g=>{!g&&t==="farcaster"&&(l(new Error("Popup closed")),r==null||r(),f())}),p=Q.getAuthConnector();if(p&&!ue.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();ue.setFarcasterUrl(g,_.state.activeChain)}catch{l(new Error("Failed to connect to farcaster"))}}else{const f=Q.getAuthConnector();a=ae.returnOpenHref(`${F.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){ue.setSocialWindow(a,_.state.activeChain),s=ue.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(l(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),l(new Error("Failed to initiate social connection"))}}catch{l(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=Me.subscribeKey("open",c=>{c||(ge.state.view!==e&&ge.replace(e),a(),i(new Error("Modal closed")))})}const o=_.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&Me.close(),o(),s(Sn.parseCaipAddress(a)))})})},async updateEmail(){const t=G.getConnectedConnectorId(_.state.activeChain),e=Q.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==F.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return ge.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(Me.close(),clearInterval(i),o(),r({email:a}))},gA),o=Me.subscribeKey("open",a=>{a||(ge.state.view!=="Connect"&&ge.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return _.checkIfSmartAccountEnabled()&&xn(t)===vt.ACCOUNT_TYPES.EOA}};function q0(){var r,s;const t=((r=_.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=_.state.activeCaipNetwork)==null?void 0:s.id)||1,n=ze.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function xn(t){var n;return(n=_.getAccountData(t))==null?void 0:n.preferredAccountType}const rl={getConnectionStatus(t,e){const n=Q.state.activeConnectorIds[e],r=ee.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=q.state.remoteFeatures)!=null&&a.multiWallet),n=Q.state.activeConnectorIds[t],r=ee.getConnections(t),i=(ee.state.recentConnections.get(t)??[]).filter(c=>Q.getConnectorById(c.connectorId)),o=rl.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},ei=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),gt=Je({...ei}),mA={state:gt,subscribeKey(t,e){return Bt(gt,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ae.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){gt.message=ei.message,gt.variant=ei.variant,gt.svg=ei.svg,gt.open=ei.open,gt.autoClose=ei.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=ei.autoClose}){gt.open?(gt.open=!1,setTimeout(()=>{gt.message=t,gt.variant=n,gt.svg=e,gt.open=!0,gt.autoClose=r},150)):(gt.message=t,gt.variant=n,gt.svg=e,gt.open=!0,gt.autoClose=r)}},_r=mA,it=Je({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),yA={state:it,subscribe(t){return Ut(it,()=>t(it))},setLastNetworkInView(t){it.lastNetworkInView=t},async fetchTransactions(t){var e;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");it.loading=!0;try{const n=await fe.fetchTransactions({account:t,cursor:it.next,chainId:(e=_.state.activeCaipNetwork)==null?void 0:e.caipNetworkId}),r=Lu.filterSpamTransactions(n.data),s=Lu.filterByConnectedChain(r),i=[...it.transactions,...s];it.loading=!1,it.transactions=i,it.transactionsByYear=Lu.groupTransactionsByYearAndMonth(it.transactionsByYear,s),it.empty=i.length===0,it.next=n.next?n.next:void 0}catch{const r=_.state.activeChain;We.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:q.state.projectId,cursor:it.next,isSmartAccount:xn(r)===vt.ACCOUNT_TYPES.SMART_ACCOUNT}}),_r.showError("Failed to fetch transactions"),it.loading=!1,it.empty=!0,it.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(u=>u.id!==r.id);n[s]={...o,[i]:[...c,r].sort((u,l)=>new Date(l.metadata.minedAt).getTime()-new Date(u.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=_.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){it.next=void 0},resetTransactions(){it.transactions=[],it.transactionsByYear={},it.lastNetworkInView=void 0,it.loading=!1,it.empty=!1,it.next=void 0}},Lu=On(yA,"API_ERROR"),Re=Je({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Gs;const wA={state:Re,subscribe(t){return Ut(Re,()=>t(Re))},subscribeKey(t,e){return Bt(Re,t,e)},_getClient(){return Re._client},setClient(t){Re._client=yi(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);ee.syncStorageConnections(e)},syncStorageConnections(t){const e=G.getConnections(),n=t??Array.from(_.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(Re.recentConnections);i.set(r,s),Re.recentConnections=i}},getConnections(t){return t?Re.connections.get(t)??[]:[]},hasAnyConnection(t){const e=ee.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(ae.isTelegram()||ae.isSafari()&&ae.isIos()){if(Gs){await Gs,Gs=void 0;return}if(!ae.isPairingExpired(Re==null?void 0:Re.wcPairingExpiry)){const s=Re.wcUri;Re.wcUri=s;return}Gs=(e=(t=ee._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),ee.state.status="connecting",await Gs,Gs=void 0,Re.wcPairingExpiry=void 0,ee.state.status="connected"}else await((r=(n=ee._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=ee._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&_.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=ee._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||_.state.activeChain;e&&Q.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;Me.setLoading(!0,_.state.activeChain);const n=Q.getAuthConnector();n&&(ue.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),G.setPreferredAccountTypes(Object.entries(_.state.chains).reduce((s,[i,o])=>{const a=i,c=xn(a);return c!==void 0&&(s[a]=c),s},{})),await ee.reconnectExternal(n),Me.setLoading(!1,_.state.activeChain),We.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=_.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=ee._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=ee._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=ee._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=ee._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=ee._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=ee._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=ee._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=ee._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=ee._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=ee._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=ee._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=ee._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Re.wcUri=void 0,Re.wcPairingExpiry=void 0,Re.wcLinking=void 0,Re.recentWallet=void 0,Re.status="disconnected",Lu.resetTransactions(),G.deleteWalletConnectDeepLink()},resetUri(){Re.wcUri=void 0,Re.wcPairingExpiry=void 0,Gs=void 0},finalizeWcConnection(){var n,r,s;const{wcLinking:t,recentWallet:e}=ee.state;t&&G.setWalletConnectDeepLink(t),e&&G.setAppKitRecent(e),We.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=ge.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown",caipNetworkId:(s=_.getActiveCaipNetwork())==null?void 0:s.caipNetworkId}})},setWcBasic(t){Re.wcBasic=t},setUri(t){Re.wcUri=t,Re.wcPairingExpiry=ae.getPairingExpiry()},setWcLinking(t){Re.wcLinking=t},setWcError(t){Re.wcError=t,Re.buffering=!1},setRecentWallet(t){Re.recentWallet=t},setBuffering(t){Re.buffering=t},setStatus(t){Re.status=t},setIsSwitchingConnection(t){Re.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=ee._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new Co("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(Re.connections);n.set(e,t),Re.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=ue.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&Zo.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await ee.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=Q.getConnectorById(t.connectorId),s=t.connectorId===F.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await ee.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await ee.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var u,l;const s=Q.getConnectorById(t.connectorId),i=(l=(u=t.auth)==null?void 0:u.name)==null?void 0:l.toLowerCase(),o=t.connectorId===F.CONNECTOR_ID.AUTH,a=t.connectorId===F.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&Zo.isSocialProvider(i)){const{address:d}=await Zo.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){Me.open({view:"ConnectingFarcaster"})},onConnect(){ge.replace("ProfileWallets")}});c=d}else{const{address:d}=await Zo.connectEmail({closeModalOnConnect:r,onOpen(){Me.open({view:"EmailLogin"})},onConnect(){ge.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await Zo.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){Me.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){ge.replace("ProfileWallets")}});c=d}else{const d=await ee.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await ee.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=ue.getCaipAddress(n);if(o){const{address:c}=Sn.parseCaipAddress(o);i=c}const a=rl.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await ee.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const u=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:u,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await ee.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},ee=On(wA),ji=Je({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Ir={state:ji,subscribe(t){return Ut(ji,()=>t(ji))},subscribeOpen(t){return Bt(ji,"open",t)},set(t){Object.assign(ji,{...ji,...t})}},bA={async getTokenList(){var r;const t=_.state.activeCaipNetwork,e=await fe.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=_.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(ee==null?void 0:ee.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await fe.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await fe.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=ee.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await Dp.getMyTokensWithBalance(t);return ue.setTokenBalance(e,_.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:q0(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},qe=Je({tokenBalances:[],loading:!1}),EA={state:qe,subscribe(t){return Ut(qe,()=>t(qe))},subscribeKey(t,e){return Bt(qe,t,e)},setToken(t){t&&(qe.token=yi(t))},setTokenAmount(t){qe.sendTokenAmount=t},setReceiverAddress(t){qe.receiverAddress=t},setReceiverProfileImageUrl(t){qe.receiverProfileImageUrl=t},setReceiverProfileName(t){qe.receiverProfileName=t},setNetworkBalanceInUsd(t){qe.networkBalanceInUSD=t},setLoading(t){qe.loading=t},async sendToken(){var t;try{switch(je.setLoading(!0),(t=_.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await je.sendEvmToken();return;case"solana":await je.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{je.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=_.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=xn(t);if(!je.state.sendTokenAmount||!je.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!je.state.token)throw new Error("A token is required");(n=je.state.token)!=null&&n.address?(We.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===vt.ACCOUNT_TYPES.SMART_ACCOUNT,token:je.state.token.address,amount:je.state.sendTokenAmount,network:((r=_.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await je.sendERC20Token({receiverAddress:je.state.receiverAddress,tokenAddress:je.state.token.address,sendTokenAmount:je.state.sendTokenAmount,decimals:je.state.token.quantity.decimals})):(We.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===vt.ACCOUNT_TYPES.SMART_ACCOUNT,token:je.state.token.symbol||"",amount:je.state.sendTokenAmount,network:((s=_.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await je.sendNativeToken({receiverAddress:je.state.receiverAddress,sendTokenAmount:je.state.sendTokenAmount,decimals:je.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;qe.loading=!0;const e=(i=_.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=_.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=_.state.activeCaipAddress,s=r?ae.getPlainAddress(r):void 0;if(qe.lastRetry&&!ae.isAllowedRetry(qe.lastRetry,30*ze.ONE_SEC_MS))return qe.loading=!1,[];try{if(s&&e&&n){const a=await Dp.getMyTokensWithBalance();return qe.tokenBalances=a,qe.lastRetry=void 0,a}}catch(a){qe.lastRetry=Date.now(),t==null||t(a),_r.showError("Token Balance Unavailable")}finally{qe.loading=!1}return[]},fetchNetworkBalance(){if(qe.tokenBalances.length===0)return;const t=bA.mapBalancesToSwapTokens(qe.tokenBalances);if(!t)return;const e=t.find(n=>n.address===q0());e&&(qe.networkBalanceInUSD=e?j_.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;ge.pushTransactionStack({});const e=t.receiverAddress,n=ue.state.address,r=ee.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await ee.sendTransaction({chainNamespace:F.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),We.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:xn("eip155")===vt.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=je.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=_.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=ee._getClient())==null||a.updateBalance("eip155"),je.resetSend()},async sendERC20Token(t){ge.pushTransactionStack({onSuccess(){ge.replace("Account")}});const e=ee.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(ue.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=ae.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await ee.writeContract({fromAddress:ue.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:W_.getERC20Abi(n),chainNamespace:F.CHAIN.EVM}),je.resetSend()}},async sendSolanaToken(){var t;if(!je.state.sendTokenAmount||!je.state.receiverAddress)throw new Error("An amount and receiver address are required");ge.pushTransactionStack({onSuccess(){ge.replace("Account")}}),await ee.sendTransaction({chainNamespace:"solana",to:je.state.receiverAddress,value:je.state.sendTokenAmount}),(t=ee._getClient())==null||t.updateBalance("solana"),je.resetSend()},resetSend(){qe.token=void 0,qe.sendTokenAmount=void 0,qe.receiverAddress=void 0,qe.receiverProfileImageUrl=void 0,qe.receiverProfileName=void 0,qe.loading=!1,qe.tokenBalances=[]}},je=On(EA),Td={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},cu={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},te=Je({chains:R_(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),vA={state:te,subscribe(t){return Ut(te,()=>{t(te)})},subscribeKey(t,e){return Bt(te,t,e)},subscribeChainProp(t,e,n){let r;return Ut(te.chains,()=>{var i;const s=n||te.activeChain;if(s){const o=(i=te.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=G.getActiveNetworkProps(),i=e==null?void 0:e.find(l=>l.id.toString()===(r==null?void 0:r.toString())),a=t.find(l=>(l==null?void 0:l.namespace)===s)||(t==null?void 0:t[0]),c=t.map(l=>l.namespace).filter(l=>l!==void 0),u=q.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(l=>l.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(te.noAdapters=!0),te.noAdapters||(te.activeChain=a==null?void 0:a.namespace,te.activeCaipNetwork=i,_.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),te.activeChain&&Ir.set({activeChain:a==null?void 0:a.namespace})),u.forEach(l=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===l),h=G.getPreferredAccountTypes()||{},f={...q.state.defaultAccountTypes,...h};_.state.chains.set(l,{namespace:l,networkState:Je({...cu,caipNetwork:d==null?void 0:d[0]}),accountState:Je({...Td,preferredAccountType:f[l]}),caipNetworks:d??[],...n}),_.setRequestedCaipNetworks(d??[],l)})},removeAdapter(t){var e,n;if(te.activeChain===t){const r=Array.from(te.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&_.setActiveCaipNetwork(s)}}te.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");te.chains.set(t.namespace,{namespace:t.namespace,networkState:{...cu,caipNetwork:r[0]},accountState:Td,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),_.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=te.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),te.chains.set(t.chainNamespace,{...e,caipNetworks:r}),_.setRequestedCaipNetworks(r,t.chainNamespace),Q.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=te.chains.get(t);if(n){const o=((r=te.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&_.setActiveCaipNetwork(n.caipNetworks[0]),te.chains.set(t,{...n,caipNetworks:a}),_.setRequestedCaipNetworks(a||[],t),a.length===0&&Q.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=te.chains.get(t);n&&(n.networkState={...n.networkState||cu,...e},te.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=te.chains.get(t);if(r){const s={...r.accountState||Td,...e};te.chains.set(t,{...r,accountState:s}),(te.chains.size===1||te.activeChain===t)&&(e.caipAddress&&(te.activeCaipAddress=e.caipAddress),ue.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=te.chains.get(t);if(n){const r={...n.networkState||cu,...e};te.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){_.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;te.activeChain=t;const e=t?te.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(te.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,te.activeCaipNetwork=n,_.setChainNetworkData(t,{caipNetwork:n}),G.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Ir.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;te.activeChain!==t.chainNamespace&&_.setIsSwitchingNamespace(!0);const e=te.chains.get(t.chainNamespace);te.activeChain=t.chainNamespace,te.activeCaipNetwork=t,_.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?te.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:te.activeCaipAddress=void 0,_.setAccountProp("caipAddress",te.activeCaipAddress,t.chainNamespace),e&&ue.replaceState(e.accountState),je.resetSend(),Ir.set({activeChain:te.activeChain,selectedNetworkId:(i=te.activeCaipNetwork)==null?void 0:i.caipNetworkId}),G.setActiveCaipNetworkId(t.caipNetworkId),!_.checkIfSupportedNetwork(t.chainNamespace)&&q.state.enableNetworkSwitch&&!q.state.allowUnsupportedChain&&!ee.state.wcBasic&&_.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=te.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==_.state.activeChain,n=(s=_.getNetworkData(t))==null?void 0:s.caipNetwork,r=_.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await _.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=_.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=_.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=te.activeCaipNetwork)==null?void 0:a.id)})),s=_.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&Me.close()}catch{ge.goBack()}We.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||te.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=te.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||te.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=te.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=te.activeChain;if(e&&(n=e),!n)return;const r=(s=te.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=te.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=te.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return ae.sortRequestedNetworks(n,r).filter(o=>o==null?void 0:o.id)},getAllRequestedCaipNetworks(){const t=[];return te.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=_.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){_.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=_.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Q.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return te.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=_.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=te.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:te.activeCaipNetwork},getActiveCaipAddress(){return te.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=te.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=_.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());_.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||te.activeCaipNetwork,r=_.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!te.activeChain)return!0;const e=_.getRequestedCaipNetworks(te.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){_.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=qa.caipNetworkIdToNumber((r=te.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=te.activeChain;if(!e||!t)return!1;const n=_.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){Me.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=te.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&ze.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){_.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=q.state.defaultAccountTypes[e],r=_.getAccountProp("preferredAccountType",e);te.activeCaipAddress=void 0,_.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n||r,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),Q.removeConnectorId(e)},setIsSwitchingNamespace(t){te.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(te.chains.forEach(s=>{F.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=te.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=_.state.chains.get(t))==null?void 0:e.accountState:ue.state},getNetworkData(t){var n;const e=t||te.activeChain;if(e)return(n=_.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=_.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Q.state.filterByNamespace;return(t?[te.chains.get(t)]:Array.from(te.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?_.getRequestedCaipNetworks(t):_.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){te.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return te.lastConnectedSIWECaipNetwork}},_=On(vA),CA={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},W0=ae.getBlockchainApiUrl(),nn=Je({clientId:null,api:new Lc({baseUrl:W0,clientId:null}),supportedChains:{http:[],ws:[]}}),fe={state:nn,async get(t){const{st:e,sv:n}=fe.getSdkProperties(),r=q.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return nn.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=q.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{nn.supportedChains.http.length||await fe.getSupportedNetworks()}catch{return!1}return nn.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await fe.get({path:"v1/supported-chains"});return nn.supportedChains=t,t}catch{return nn.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await fe.isNetworkSupported(e))return{avatar:"",name:""};const r=G.getIdentityFromCacheForAddress(t);if(r)return r;const s=await fe.get({path:`/v1/identity/${t}`,params:{sender:_.state.activeCaipAddress?ae.getPlainAddress(_.state.activeCaipAddress):void 0}});return G.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,signal:n,cache:r,chainId:s}){var o;return await fe.isNetworkSupported((o=_.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?fe.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:s},signal:n,cache:r}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await fe.isNetworkSupported((o=_.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?fe.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await fe.isNetworkSupported((n=_.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?fe.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await fe.isNetworkSupported((n=_.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?nn.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:q.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await fe.isNetworkSupported((r=_.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?fe.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=fe.getSdkProperties();if(!await fe.isNetworkSupported((s=_.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return fe.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await fe.isNetworkSupported((o=_.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return nn.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:ze.CONVERT_SLIPPAGE_TOLERANCE},projectId:q.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=fe.getSdkProperties();if(!await fe.isNetworkSupported((o=_.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return fe.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var u;const{st:r,sv:s}=fe.getSdkProperties();if(!await fe.isNetworkSupported((u=_.state.activeCaipNetwork)==null?void 0:u.caipNetworkId))return _r.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=G.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await fe.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return G.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await fe.isNetworkSupported((n=_.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?fe.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await fe.isNetworkSupported((n=_.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?fe.get({path:`/v1/profile/reverse/${t}`,params:{sender:ue.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await fe.isNetworkSupported((n=_.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?fe.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await fe.isNetworkSupported((i=_.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?nn.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await fe.isNetworkSupported((a=_.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await nn.api.post({path:"/v1/generators/onrampurl",params:{projectId:q.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await fe.isNetworkSupported((e=_.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await fe.get({path:"/v1/onramp/options"})}catch{return CA}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await fe.isNetworkSupported((s=_.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await nn.api.post({path:"/v1/onramp/quote",params:{projectId:q.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await fe.isNetworkSupported((n=_.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?fe.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await fe.isNetworkSupported((s=_.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?nn.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:q.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){nn.clientId=t,nn.api=new Lc({baseUrl:W0,clientId:t})}},_A="1.0.8";let en=class Fh extends Error{constructor(e,n={}){var o;const r=n.cause instanceof Fh?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof Fh&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${_A}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function ss(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const V0=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,G0=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,K0=/^\(.+?\).*?$/,Hg=/^tuple(?<array>(\[(\d*)\])*)$/;function jh(t){let e=t.type;if(Hg.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=jh(i),s<n-1&&(e+=", ")}const r=ss(Hg,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,jh({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Jo(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=jh(s),r!==n-1&&(e+=", ")}return e}function AA(t){var e;return t.type==="function"?`function ${t.name}(${Jo(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Jo(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Jo(t.inputs)})`:t.type==="error"?`error ${t.name}(${Jo(t.inputs)})`:t.type==="constructor"?`constructor(${Jo(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const Y0=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function IA(t){return Y0.test(t)}function SA(t){return ss(Y0,t)}const Z0=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function NA(t){return Z0.test(t)}function TA(t){return ss(Z0,t)}const J0=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function xA(t){return J0.test(t)}function PA(t){return ss(J0,t)}const X0=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function Q0(t){return X0.test(t)}function OA(t){return ss(X0,t)}const eb=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function RA(t){return eb.test(t)}function $A(t){return ss(eb,t)}const tb=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function DA(t){return tb.test(t)}function kA(t){return ss(tb,t)}const UA=/^receive\(\) external payable$/;function BA(t){return UA.test(t)}const Lz=new Set(["memory","indexed","storage","calldata"]),MA=new Set(["indexed"]),zh=new Set(["calldata","memory","storage"]);class Fz extends en{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class LA extends en{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class FA extends en{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class jz extends en{constructor({param:e}){super("Failed to parse ABI parameter.",{details:`parseAbiParameter(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiparameter-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParameterError"})}}class zz extends en{constructor({params:e}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}class jA extends en{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class zA extends en{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class HA extends en{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class qA extends en{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class WA extends en{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class ko extends en{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class VA extends en{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class GA extends en{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class KA extends en{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class YA extends en{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function ZA(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const xd=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function JA(t,e={}){if(xA(t))return XA(t,e);if(NA(t))return QA(t,e);if(IA(t))return eI(t,e);if(RA(t))return tI(t,e);if(DA(t))return nI(t);if(BA(t))return{type:"receive",stateMutability:"payable"};throw new VA({signature:t})}function XA(t,e={}){const n=PA(t);if(!n)throw new ko({signature:t,type:"function"});const r=rr(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(bi(r[a],{modifiers:zh,structs:e,type:"function"}));const o=[];if(n.returns){const a=rr(n.returns),c=a.length;for(let u=0;u<c;u++)o.push(bi(a[u],{modifiers:zh,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function QA(t,e={}){const n=TA(t);if(!n)throw new ko({signature:t,type:"event"});const r=rr(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(bi(r[o],{modifiers:MA,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function eI(t,e={}){const n=SA(t);if(!n)throw new ko({signature:t,type:"error"});const r=rr(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(bi(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function tI(t,e={}){const n=$A(t);if(!n)throw new ko({signature:t,type:"constructor"});const r=rr(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(bi(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function nI(t){const e=kA(t);if(!e)throw new ko({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const rI=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,sI=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,iI=/^u?int$/;function bi(t,e){var d,h;const n=ZA(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(xd.has(n))return xd.get(n);const r=K0.test(t),s=ss(r?sI:rI,t);if(!s)throw new jA({param:t});if(s.name&&aI(s.name))throw new zA({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,u={};if(r){c="tuple";const f=rr(s.type),p=[],g=f.length;for(let m=0;m<g;m++)p.push(bi(f[m],{structs:a}));u={components:p}}else if(s.type in a)c="tuple",u={components:a[s.type]};else if(iI.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!nb(c))throw new FA({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new HA({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(zh.has(s.modifier)&&!cI(c,!!s.array))throw new qA({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const l={type:`${c}${s.array??""}`,...i,...o,...u};return xd.set(n,l),l}function rr(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?rr(a,[...e,n.trim()]):rr(a,e,`${n}${o}`,r);case"(":return rr(a,e,`${n}${o}`,r+1);case")":return rr(a,e,`${n}${o}`,r-1);default:return rr(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new YA({current:n,depth:r});return e.push(n.trim()),e}function nb(t){return t==="address"||t==="bool"||t==="function"||t==="string"||V0.test(t)||G0.test(t)}const oI=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function aI(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||V0.test(t)||G0.test(t)||oI.test(t)}function cI(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function uI(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!Q0(a))continue;const c=OA(a);if(!c)throw new ko({signature:a,type:"struct"});const u=c.properties.split(";"),l=[],d=u.length;for(let h=0;h<d;h++){const p=u[h].trim();if(!p)continue;const g=bi(p,{type:"struct"});l.push(g)}if(!l.length)throw new GA({signature:a});e[c.name]=l}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=rb(c,e)}return r}const lI=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function rb(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(K0.test(o.type))r.push(o);else{const c=ss(lI,o.type);if(!(c!=null&&c.type))throw new WA({abiParameter:o});const{array:u,type:l}=c;if(l in e){if(n.has(l))throw new KA({type:l});r.push({...o,type:`tuple${u??""}`,components:rb(e[l]??[],e,new Set([...n,l]))})}else if(nb(l))r.push(o);else throw new LA({type:l})}}return r}function sb(t){const e=uI(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];Q0(i)||n.push(JA(i,e))}return n}function ct(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}function Ms(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new CI(t.type);return`${t.name}(${Bl(t.inputs,{includeName:e})})`}function Bl(t,{includeName:e=!1}={}){return t?t.map(n=>dI(n,{includeName:e})).join(e?", ":","):""}function dI(t,{includeName:e}){return t.type.startsWith("tuple")?`(${Bl(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function Ls(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Et(t){return Ls(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const ib="2.32.0";let Xo={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${ib}`},V=class Hh extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Hh?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Hh&&n.cause.docsPath||n.docsPath,i=(a=Xo.getDocsUrl)==null?void 0:a.call(Xo,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Xo.version?[`Version: ${Xo.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=ib}walk(e){return ob(this,e)}};function ob(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?ob(t.cause,e):e?null:t}class hI extends V{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class qg extends V{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class ab extends V{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Bl(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class Ml extends V{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class fI extends V{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class pI extends V{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Et(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class gI extends V{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Hz extends V{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class qz extends V{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class cb extends V{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class mI extends V{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class ub extends V{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class Wz extends V{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class sl extends V{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class yI extends V{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class Vz extends V{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class wI extends V{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Ms(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Ms(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class Gz extends V{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class qh extends V{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Bl(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class lb extends V{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Ms(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class bI extends V{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class EI extends V{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class vI extends V{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class CI extends V{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class Kz extends V{constructor(e){super(`Type "${e}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}class db extends V{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}let hb=class extends V{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class Wg extends V{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function Uo(t,{dir:e,size:n=32}={}){return typeof t=="string"?xs(t,{dir:e,size:n}):_I(t,{dir:e,size:n})}function xs(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new hb({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function _I(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new hb({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let fb=class extends V{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class AI extends V{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class II extends V{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let SI=class extends V{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function Ps(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function Vn(t,{size:e}){if(Et(t)>e)throw new SI({givenSize:Et(t),maxSize:e})}function Ao(t,e={}){const{signed:n}=e;e.size&&Vn(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Xz(t,e={}){let n=t;if(e.size&&(Vn(n,{size:e.size}),n=Ps(n)),Ps(n)==="0x00")return!1;if(Ps(n)==="0x01")return!0;throw new II(n)}function Ei(t,e={}){return Number(Ao(t,e))}function pb(t,e={}){let n=xr(t);return e.size&&(Vn(n,{size:e.size}),n=Ps(n,{dir:"right"})),new TextDecoder().decode(n)}const NI=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Io(t,e={}){return typeof t=="number"||typeof t=="bigint"?Te(t,e):typeof t=="string"?Ll(t,e):typeof t=="boolean"?gb(t,e):wn(t,e)}function gb(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Vn(n,{size:e.size}),Uo(n,{size:e.size})):n}function wn(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=NI[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Vn(r,{size:e.size}),Uo(r,{dir:"right",size:e.size})):r}function Te(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new fb({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Uo(a,{size:r}):a}const TI=new TextEncoder;function Ll(t,e={}){const n=TI.encode(t);return wn(n,e)}const xI=new TextEncoder;function Fl(t,e={}){return typeof t=="number"||typeof t=="bigint"?OI(t,e):typeof t=="boolean"?PI(t,e):Ls(t)?xr(t,e):mb(t,e)}function PI(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Vn(n,{size:e.size}),Uo(n,{size:e.size})):n}const Mr={zero:48,nine:57,A:65,F:70,a:97,f:102};function Vg(t){if(t>=Mr.zero&&t<=Mr.nine)return t-Mr.zero;if(t>=Mr.A&&t<=Mr.F)return t-(Mr.A-10);if(t>=Mr.a&&t<=Mr.f)return t-(Mr.a-10)}function xr(t,e={}){let n=t;e.size&&(Vn(n,{size:e.size}),n=Uo(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=Vg(r.charCodeAt(a++)),u=Vg(r.charCodeAt(a++));if(c===void 0||u===void 0)throw new V(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+u}return i}function OI(t,e){const n=Te(t,e);return xr(n)}function mb(t,e={}){const n=xI.encode(t);return typeof e.size=="number"?(Vn(n,{size:e.size}),Uo(n,{dir:"right",size:e.size})):n}var ot={};Object.defineProperty(ot,"__esModule",{value:!0});ot.shake256=ot.shake128=ot.keccak_512=ot.keccak_384=_b=ot.keccak_256=ot.keccak_224=ot.sha3_512=ot.sha3_384=ot.sha3_256=ot.sha3_224=ot.Keccak=void 0;ot.keccakP=vb;const Wa=o_,Gt=Uh,RI=BigInt(0),Qo=BigInt(1),$I=BigInt(2),DI=BigInt(7),kI=BigInt(256),UI=BigInt(113),yb=[],wb=[],bb=[];for(let t=0,e=Qo,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],yb.push(2*(5*r+n)),wb.push((t+1)*(t+2)/2%64);let s=RI;for(let i=0;i<7;i++)e=(e<<Qo^(e>>DI)*UI)%kI,e&$I&&(s^=Qo<<(Qo<<BigInt(i))-Qo);bb.push(s)}const Eb=(0,Wa.split)(bb,!0),BI=Eb[0],MI=Eb[1],Gg=(t,e,n)=>n>32?(0,Wa.rotlBH)(t,e,n):(0,Wa.rotlSH)(t,e,n),Kg=(t,e,n)=>n>32?(0,Wa.rotlBL)(t,e,n):(0,Wa.rotlSL)(t,e,n);function vb(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],l=n[c+1],d=Gg(u,l,1)^n[a],h=Kg(u,l,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=wb[o],c=Gg(s,i,a),u=Kg(s,i,a),l=yb[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=BI[r],t[1]^=MI[r]}(0,Gt.clean)(n)}let dp=class Cb extends Gt.Hash{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,(0,Gt.anumber)(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,Gt.u32)(this.state)}clone(){return this._cloneInto()}keccak(){(0,Gt.swap32IfBE)(this.state32),vb(this.state32,this.rounds),(0,Gt.swap32IfBE)(this.state32),this.posOut=0,this.pos=0}update(e){(0,Gt.aexists)(this),e=(0,Gt.toBytes)(e),(0,Gt.abytes)(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){(0,Gt.aexists)(this,!1),(0,Gt.abytes)(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,Gt.anumber)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,Gt.aoutput)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,Gt.clean)(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Cb(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};ot.Keccak=dp;const qs=(t,e,n)=>(0,Gt.createHasher)(()=>new dp(e,t,n));ot.sha3_224=qs(6,144,224/8);ot.sha3_256=qs(6,136,256/8);ot.sha3_384=qs(6,104,384/8);ot.sha3_512=qs(6,72,512/8);ot.keccak_224=qs(1,144,224/8);var _b=ot.keccak_256=qs(1,136,256/8);ot.keccak_384=qs(1,104,384/8);ot.keccak_512=qs(1,72,512/8);const Ab=(t,e,n)=>(0,Gt.createXOFer)((r={})=>new dp(e,t,r.dkLen===void 0?n:r.dkLen,!0));ot.shake128=Ab(31,168,128/8);ot.shake256=Ab(31,136,256/8);function Fc(t,e){const n=e||"hex",r=_b(Ls(t,{strict:!1})?Fl(t):t);return n==="bytes"?r:Io(r)}const LI=t=>Fc(Fl(t));function FI(t){return LI(t)}function jI(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new V("Unable to normalize signature.");return s}const zI=t=>{const e=typeof t=="string"?t:AA(t);return jI(e)};function Ib(t){return FI(zI(t))}const hp=Ib;class vi extends V{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}let jl=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const Pd=new jl(8192);function zl(t,e){if(Pd.has(`${t}.${e}`))return Pd.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=Fc(mb(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return Pd.set(`${t}.${e}`,i),i}function ii(t,e){if(!Pr(t,{strict:!1}))throw new vi({address:t});return zl(t,e)}const HI=/^0x[a-fA-F0-9]{40}$/,Od=new jl(8192);function Pr(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(Od.has(r))return Od.get(r);const s=HI.test(t)?t.toLowerCase()===t?!0:n?zl(t)===t:!0:!1;return Od.set(r,s),s}function So(t){return typeof t[0]=="string"?Hl(t):qI(t)}function qI(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function Hl(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function il(t,e,n,{strict:r}={}){return Ls(t,{strict:!1})?WI(t,e,n,{strict:r}):Tb(t,e,n,{strict:r})}function Sb(t,e){if(typeof e=="number"&&e>0&&e>Et(t)-1)throw new db({offset:e,position:"start",size:Et(t)})}function Nb(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Et(t)!==n-e)throw new db({offset:n,position:"end",size:Et(t)})}function Tb(t,e,n,{strict:r}={}){Sb(t,e);const s=t.slice(e,n);return r&&Nb(s,e,n),s}function WI(t,e,n,{strict:r}={}){Sb(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&Nb(s,e,n),s}const eH=/^(.*)\[([0-9]*)\]$/,tH=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,VI=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function xb(t,e){if(t.length!==e.length)throw new gI({expectedLength:t.length,givenLength:e.length});const n=GI({params:t,values:e}),r=pp(n);return r.length===0?"0x":r}function GI({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(fp({param:t[r],value:e[r]}));return n}function fp({param:t,value:e}){const n=gp(t.type);if(n){const[r,s]=n;return YI(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return eS(e,{param:t});if(t.type==="address")return KI(e);if(t.type==="bool")return JI(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=VI.exec(t.type)??[];return XI(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return ZI(e,{param:t});if(t.type==="string")return QI(e);throw new bI(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function pp(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Et(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(Te(e+s,{size:32})),r.push(a),s+=Et(a)):n.push(a)}return So([...n,...r])}function KI(t){if(!Pr(t))throw new vi({address:t});return{dynamic:!1,encoded:xs(t.toLowerCase())}}function YI(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new vI(t);if(!r&&t.length!==e)throw new fI({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=fp({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=pp(i);if(r){const a=Te(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?So([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:So(i.map(({encoded:o})=>o))}}function ZI(t,{param:e}){const[,n]=e.type.split("bytes"),r=Et(t);if(!n){let s=t;return r%32!==0&&(s=xs(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:So([xs(Te(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new pI({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:xs(t,{dir:"right"})}}function JI(t){if(typeof t!="boolean")throw new V(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:xs(gb(t))}}function XI(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new fb({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Te(t,{size:32,signed:e})}}function QI(t){const e=Ll(t),n=Math.ceil(Et(e)/32),r=[];for(let s=0;s<n;s++)r.push(xs(il(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:So([xs(Te(Et(e),{size:32})),...r])}}function eS(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=fp({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?pp(r):So(r.map(({encoded:s})=>s))}}function gp(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const mp=t=>il(Ib(t),0,4);function yp(t){const{abi:e,args:n=[],name:r}=t,s=Ls(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?mp(a)===r:a.type==="event"?hp(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((u,l)=>{const d="inputs"in a&&a.inputs[l];return d?Wh(u,d):!1})){if(o&&"inputs"in o&&o.inputs){const u=Pb(a.inputs,o.inputs,n);if(u)throw new wI({abiItem:a,type:u[0]},{abiItem:o,type:u[1]})}o=a}}return o||i[0]}function Wh(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Pr(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>Wh(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>Wh(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Pb(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return Pb(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Pr(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Pr(n[r],{strict:!1}):!1)return o}}function tS(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}function kr(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const Yg="/docs/contract/encodeFunctionData";function nS(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=yp({abi:e,args:n,name:r});if(!i)throw new sl(r,{docsPath:Yg});s=i}if(s.type!=="function")throw new sl(void 0,{docsPath:Yg});return{abi:[s],functionName:mp(Ms(s))}}function ql(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:nS(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?xb(s.inputs,e??[]):void 0;return Hl([i,o??"0x"])}const rS={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},sS={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},iS={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class Zg extends V{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Ob extends V{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class oS extends V{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const aS={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new oS({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new Ob({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new Zg({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new Zg({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function wp(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(aS);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function cS(t,e={}){typeof e.size<"u"&&Vn(t,{size:e.size});const n=wn(t,e);return Ao(n,e)}function uS(t,e={}){let n=t;if(typeof e.size<"u"&&(Vn(n,{size:e.size}),n=Ps(n)),n.length>1||n[0]>1)throw new AI(n);return!!n[0]}function Jr(t,e={}){typeof e.size<"u"&&Vn(t,{size:e.size});const n=wn(t,e);return Ei(n,e)}function lS(t,e={}){let n=t;return typeof e.size<"u"&&(Vn(n,{size:e.size}),n=Ps(n,{dir:"right"})),new TextDecoder().decode(n)}function Wl(t,e){const n=typeof e=="string"?xr(e):e,r=wp(n);if(Et(n)===0&&t.length>0)throw new Ml;if(Et(e)&&Et(e)<32)throw new ab({data:typeof e=="string"?e:wn(e),params:t,size:Et(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,u]=mo(r,a,{staticPosition:0});s+=u,i.push(c)}return i}function mo(t,e,{staticPosition:n}){const r=gp(e.type);if(r){const[s,i]=r;return hS(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return mS(t,e,{staticPosition:n});if(e.type==="address")return dS(t);if(e.type==="bool")return fS(t);if(e.type.startsWith("bytes"))return pS(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return gS(t,e);if(e.type==="string")return yS(t,{staticPosition:n});throw new EI(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const Jg=32,Vh=32;function dS(t){const e=t.readBytes(32);return[zl(wn(Tb(e,-20))),32]}function hS(t,e,{length:n,staticPosition:r}){if(!n){const o=Jr(t.readBytes(Vh)),a=r+o,c=a+Jg;t.setPosition(a);const u=Jr(t.readBytes(Jg)),l=Va(e);let d=0;const h=[];for(let f=0;f<u;++f){t.setPosition(c+(l?f*32:d));const[p,g]=mo(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(Va(e)){const o=Jr(t.readBytes(Vh)),a=r+o,c=[];for(let u=0;u<n;++u){t.setPosition(a+u*32);const[l]=mo(t,e,{staticPosition:a});c.push(l)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=mo(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function fS(t){return[uS(t.readBytes(32),{size:32}),32]}function pS(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Jr(t.readBytes(32));t.setPosition(n+o);const a=Jr(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[wn(c),32]}return[wn(t.readBytes(Number.parseInt(s),32)),32]}function gS(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?cS(s,{signed:n}):Jr(s,{signed:n}),32]}function mS(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(Va(e)){const o=Jr(t.readBytes(Vh)),a=n+o;for(let c=0;c<e.components.length;++c){const u=e.components[c];t.setPosition(a+i);const[l,d]=mo(t,u,{staticPosition:a});i+=d,s[r?c:u==null?void 0:u.name]=l}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,u]=mo(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=u}return[s,i]}function yS(t,{staticPosition:e}){const n=Jr(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Jr(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=lS(Ps(i));return t.setPosition(e+32),[o,32]}function Va(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(Va);const n=gp(t.type);return!!(n&&Va({...t,type:n[1]}))}function wS(t){const{abi:e,data:n}=t,r=il(n,0,4);if(r==="0x")throw new Ml;const i=[...e||[],sS,iS].find(o=>o.type==="error"&&r===mp(Ms(o)));if(!i)throw new cb(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?Wl(i.inputs,il(n,4)):void 0,errorName:i.name}}const zn=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n);function Rb({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?zn(e[i]):e[i]}`).join(", ")})`}const bS={gwei:9,wei:18},ES={ether:-9,wei:9},vS={ether:-18,gwei:-9};function Bo(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function bp(t,e="wei"){return Bo(t,bS[e])}function mn(t,e="wei"){return Bo(t,ES[e])}class CS extends V{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class _S extends V{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function Xg(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function AS(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=Xg(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=Xg(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function jc(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class IS extends V{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class SS extends V{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",jc(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class NS extends V{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:h}){var p;const f=jc({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${bp(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${mn(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${mn(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${mn(u)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class $b extends V{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class Db extends V{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class TS extends V{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const xS=t=>t,Ep=t=>t;class PS extends V{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:h,stateOverride:f}){var m;const p=n?kr(n):void 0;let g=jc({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${bp(h)} ${((m=s==null?void 0:s.nativeCurrency)==null?void 0:m.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${mn(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${mn(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${mn(u)} gwei`,nonce:l});f&&(g+=`
${AS(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class kb extends V{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=yp({abi:n,args:r,name:o}),u=c?Rb({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,l=c?Ms(c,{includeName:!0}):void 0,d=jc({address:s&&xS(s),function:l,args:u&&u!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${u}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class OS extends V{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=wS({abi:e,data:n});const{abiItem:l,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=rS[f]}else{const f=l?Ms(l,{includeName:!0}):void 0,p=l&&h?Rb({abiItem:l,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(l){i=l}else s&&(c=s);let u;i instanceof cb&&(u=i.signature,a=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(c&&c!=="execution reverted"||u?[`The contract function "${r}" reverted with the following ${u?"signature":"reason"}:`,c||u].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=u}}class RS extends V{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class $S extends V{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class vp extends V{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class Sa extends V{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${Ep(o)}`,e&&`Request body: ${zn(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class Cp extends V{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${Ep(r)}`,`Request body: ${zn(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class Qg extends V{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Ep(n)}`,`Request body: ${zn(e)}`],name:"TimeoutError"})}}const DS=-1;class bn extends V{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof Cp?e.code:n??DS}}class Rn extends bn{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Ga extends bn{constructor(e){super(e,{code:Ga.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Ga,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Ka extends bn{constructor(e){super(e,{code:Ka.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Ka,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Ya extends bn{constructor(e,{method:n}={}){super(e,{code:Ya.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(Ya,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Za extends bn{constructor(e){super(e,{code:Za.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Za,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Ci extends bn{constructor(e){super(e,{code:Ci.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Ci,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Ja extends bn{constructor(e){super(e,{code:Ja.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Ja,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Xa extends bn{constructor(e){super(e,{code:Xa.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Xa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Os extends bn{constructor(e){super(e,{code:Os.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Os,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class No extends bn{constructor(e){super(e,{code:No.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(No,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class oi extends bn{constructor(e,{method:n}={}){super(e,{code:oi.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(oi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class To extends bn{constructor(e){super(e,{code:To.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(To,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Qa extends bn{constructor(e){super(e,{code:Qa.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Qa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class wt extends Rn{constructor(e){super(e,{code:wt.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(wt,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class ec extends Rn{constructor(e){super(e,{code:ec.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(ec,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class tc extends Rn{constructor(e,{method:n}={}){super(e,{code:tc.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(tc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class nc extends Rn{constructor(e){super(e,{code:nc.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(nc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class rc extends Rn{constructor(e){super(e,{code:rc.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(rc,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Or extends Rn{constructor(e){super(e,{code:Or.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Or,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class sc extends Rn{constructor(e){super(e,{code:sc.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(sc,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class ic extends Rn{constructor(e){super(e,{code:ic.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(ic,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class oc extends Rn{constructor(e){super(e,{code:oc.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(oc,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class ac extends Rn{constructor(e){super(e,{code:ac.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(ac,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class cc extends Rn{constructor(e){super(e,{code:cc.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(cc,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class uc extends Rn{constructor(e){super(e,{code:uc.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(uc,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class lc extends Rn{constructor(e){super(e,{code:lc.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(lc,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class kS extends bn{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const US=3;function ol(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof vp?t:t instanceof V?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:u,details:l,message:d,shortMessage:h}=a,f=t instanceof Ml?new RS({functionName:i}):[US,Ci.code].includes(c)&&(u||l||d||h)?new OS({abi:e,data:typeof u=="object"?u.data:u,functionName:i,message:a instanceof Cp?l:h??d}):t;return new kb(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}function BS(t){const e=Fc(`0x${t.substring(4)}`).substring(26);return zl(`0x${e}`)}async function MS({hash:t,signature:e}){const n=Ls(t)?t:Io(t),{secp256k1:r}=await Kt(async()=>{const{secp256k1:o}=await import("./TErYwWV_.js").then(a=>a.s);return{secp256k1:o}},__vite__mapDeps([0,1,2]),import.meta.url);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:u,s:l,v:d,yParity:h}=e,f=Number(h??d),p=em(f);return new r.Signature(Ao(u),Ao(l)).addRecoveryBit(p)}const o=Ls(e)?e:Io(e);if(Et(o)!==65)throw new Error("invalid signature length");const a=Ei(`0x${o.slice(130)}`),c=em(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function em(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function LS({hash:t,signature:e}){return BS(await MS({hash:t,signature:e}))}function FS(t,e="hex"){const n=Ub(t),r=wp(new Uint8Array(n.length));return n.encode(r),e==="hex"?wn(r.bytes):r.bytes}function Ub(t){return Array.isArray(t)?jS(t.map(e=>Ub(e))):zS(t)}function jS(t){const e=t.reduce((s,i)=>s+i.length,0),n=Bb(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function zS(t){const e=typeof t=="string"?xr(t):t,n=Bb(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function Bb(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new V("Length is too large.")}function HS(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Fc(Hl(["0x05",FS([e?Te(e):"0x",s,n?Te(n):"0x"])]));return r==="bytes"?xr(i):i}async function Mb(t){const{authorization:e,signature:n}=t;return LS({hash:HS(e),signature:n??e})}class qS extends V{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:d,value:h}){var p;const f=jc({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${bp(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${mn(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${mn(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${mn(u)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class ai extends V{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(ai,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(ai,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class al extends V{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${mn(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(al,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class Gh extends V{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${mn(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(Gh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class Kh extends V{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(Kh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class Yh extends V{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(Yh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Zh extends V{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(Zh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class Jh extends V{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(Jh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class Xh extends V{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(Xh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class Qh extends V{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(Qh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class ef extends V{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(ef,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class cl extends V{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${mn(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${mn(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(cl,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Vl extends V{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function _p(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof V?t.walk(s=>(s==null?void 0:s.code)===ai.code):t;return r instanceof V?new ai({cause:t,message:r.details}):ai.nodeMessage.test(n)?new ai({cause:t,message:t.details}):al.nodeMessage.test(n)?new al({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):Gh.nodeMessage.test(n)?new Gh({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):Kh.nodeMessage.test(n)?new Kh({cause:t,nonce:e==null?void 0:e.nonce}):Yh.nodeMessage.test(n)?new Yh({cause:t,nonce:e==null?void 0:e.nonce}):Zh.nodeMessage.test(n)?new Zh({cause:t,nonce:e==null?void 0:e.nonce}):Jh.nodeMessage.test(n)?new Jh({cause:t}):Xh.nodeMessage.test(n)?new Xh({cause:t,gas:e==null?void 0:e.gas}):Qh.nodeMessage.test(n)?new Qh({cause:t,gas:e==null?void 0:e.gas}):ef.nodeMessage.test(n)?new ef({cause:t}):cl.nodeMessage.test(n)?new cl({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new Vl({cause:t})}function WS(t,{docsPath:e,...n}){const r=(()=>{const s=_p(t,n);return s instanceof Vl?t:s})();return new qS(r,{docsPath:e,...n})}function Ap(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const VS={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Ip(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=GS(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>wn(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=Te(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=Te(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=Te(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=Te(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Te(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=Te(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=VS[t.type]),typeof t.value<"u"&&(e.value=Te(t.value)),e}function GS(t){return t.map(e=>({address:e.address,r:e.r?Te(BigInt(e.r)):e.r,s:e.s?Te(BigInt(e.s)):e.s,chainId:Te(e.chainId),nonce:Te(e.nonce),...typeof e.yParity<"u"?{yParity:Te(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Te(e.v)}:{}}))}function tm(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new Wg({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new Wg({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function KS(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=Te(e)),n!==void 0&&(o.nonce=Te(n)),r!==void 0&&(o.state=tm(r)),s!==void 0){if(o.state)throw new _S;o.stateDiff=tm(s)}return o}function Lb(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Pr(n,{strict:!1}))throw new vi({address:n});if(e[n])throw new CS({address:n});e[n]=KS(r)}return e}const YS=2n**256n-1n;function Gl(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?kr(e):void 0;if(o&&!Pr(o.address))throw new vi({address:o.address});if(i&&!Pr(i))throw new vi({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new IS;if(r&&r>YS)throw new al({maxFeePerGas:r});if(s&&r&&s>r)throw new cl({maxFeePerGas:r,maxPriorityFeePerGas:s})}class ZS extends V{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class Sp extends V{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class JS extends V{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${mn(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class Fb extends V{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const jb={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function zb(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Ei(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Ei(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?jb[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=XS(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function XS(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function QS(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:zb(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function dc(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var l,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?Te(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new Fb({blockHash:e,blockNumber:n});return(((h=(d=(l=t.chain)==null?void 0:l.formatters)==null?void 0:d.block)==null?void 0:h.format)||QS)(c)}async function Hb(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function nH(t,e){return qb(t,e)}async function qb(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const u=n||await ct(t,dc,"getBlock")({}),l=await a({block:u,client:t,request:s});if(l===null)throw new Error;return l}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Ao(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):ct(t,dc,"getBlock")({}),ct(t,Hb,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new Sp;const u=c-a.baseFeePerGas;return u<0n?0n:u}}async function rH(t,e){return tf(t,e)}async function tf(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new ZS;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),u=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),l=n||await ct(t,dc,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:u,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof l.baseFeePerGas!="bigint")throw new Sp;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await qb(t,{block:l,chain:r,request:s}),g=u(l.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??u(await ct(t,Hb,"getGasPrice")({}))}}async function e2(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?Te(r):n]},{dedupe:!!r});return Ei(s)}function Wb(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>xr(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>wn(i))}function Vb(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>xr(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>xr(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>wn(o))}var Zr={};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.sha224=Zr.SHA224=Gb=Zr.sha256=Zr.SHA256=void 0;const Kl=a_;Zr.SHA256=Kl.SHA256;var Gb=Zr.sha256=Kl.sha256;Zr.SHA224=Kl.SHA224;Zr.sha224=Kl.sha224;function t2(t,e){return Gb(Ls(t,{strict:!1})?Fl(t):t)}function n2(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=t2(e);return s.set([n],0),r==="bytes"?s:wn(s)}function r2(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(n2({commitment:i,to:r,version:n}));return s}const nm=6,Kb=32,Np=4096,Yb=Kb*Np,rm=Yb*nm-1-1*Np*nm;class s2 extends V{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class i2 extends V{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function o2(t){const e=typeof t.data=="string"?xr(t.data):t.data,n=Et(e);if(!n)throw new i2;if(n>rm)throw new s2({maxSize:rm,size:n});const r=[];let s=!0,i=0;for(;s;){const o=wp(new Uint8Array(Yb));let a=0;for(;a<Np;){const c=e.slice(i,i+(Kb-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>wn(o.bytes))}function a2(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??o2({data:e}),i=t.commitments??Wb({blobs:s,kzg:n,to:r}),o=t.proofs??Vb({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function c2(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new SS({transaction:t})}async function Zb(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Ei(e)}const Jb=["blobVersionedHashes","chainId","fees","gas","nonce","type"],sm=new Map;async function Tp(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:u=Jb,type:l}=e,d=n&&kr(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await ct(t,dc,"getBlock")({blockTag:"latest"}),f)}let g;async function m(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await ct(t,Zb,"getChainId")({}),g))}if(u.includes("nonce")&&typeof a>"u"&&d)if(c){const b=await m();h.nonce=await c.consume({address:d.address,chainId:b,client:t})}else h.nonce=await ct(t,e2,"getTransactionCount")({address:d.address,blockTag:"pending"});if((u.includes("blobVersionedHashes")||u.includes("sidecars"))&&r&&o){const b=Wb({blobs:r,kzg:o});if(u.includes("blobVersionedHashes")){const w=r2({commitments:b,to:"hex"});h.blobVersionedHashes=w}if(u.includes("sidecars")){const w=Vb({blobs:r,commitments:b,kzg:o}),E=a2({blobs:r,commitments:b,proofs:w,to:"hex"});h.sidecars=E}}if(u.includes("chainId")&&(h.chainId=await m()),(u.includes("fees")||u.includes("type"))&&typeof l>"u")try{h.type=c2(h)}catch{let b=sm.get(t.uid);if(typeof b>"u"){const w=await p();b=typeof(w==null?void 0:w.baseFeePerGas)=="bigint",sm.set(t.uid,b)}h.type=b?"eip1559":"legacy"}if(u.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const b=await p(),{maxFeePerGas:w,maxPriorityFeePerGas:E}=await tf(t,{block:b,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<E)throw new JS({maxPriorityFeePerGas:E});h.maxPriorityFeePerGas=E,h.maxFeePerGas=w}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new Sp;if(typeof e.gasPrice>"u"){const b=await p(),{gasPrice:w}=await tf(t,{block:b,chain:s,request:h,type:"legacy"});h.gasPrice=w}}return u.includes("gas")&&typeof i>"u"&&(h.gas=await ct(t,Qb,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),Gl(h),delete h.parameters,h}async function Xb(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?Te(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function Qb(t,e){var s,i,o;const{account:n=t.account}=e,r=n?kr(n):void 0;try{let B=function(C){const{block:P,request:D,rpcStateOverride:S}=C;return t.request({method:"eth_estimateGas",params:S?[D,P??"latest",S]:P?[D,P]:[D]})};const{accessList:a,authorizationList:c,blobs:u,blobVersionedHashes:l,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:b,maxPriorityFeePerGas:w,nonce:E,value:N,stateOverride:A,...R}=await Tp(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),M=(typeof d=="bigint"?Te(d):void 0)||h,I=Lb(A),j=await(async()=>{if(R.to)return R.to;if(c&&c.length>0)return await Mb({authorization:c[0]}).catch(()=>{throw new V("`to` is required. Could not infer from `authorizationList`")})})();Gl(e);const U=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,x=(U||Ip)({...Ap(R,{format:U}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:u,blobVersionedHashes:l,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:b,maxPriorityFeePerGas:w,nonce:E,to:j,value:N});let v=BigInt(await B({block:M,request:x,rpcStateOverride:I}));if(c){const C=await Xb(t,{address:x.from}),P=await Promise.all(c.map(async D=>{const{address:S}=D,$=await B({block:M,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:S,value:Te(C)},rpcStateOverride:I}).catch(()=>100000n);return 2n*BigInt($)}));v+=P.reduce((D,S)=>D+S,0n)}return v}catch(a){throw WS(a,{...e,account:r,chain:t.chain})}}function u2(t,e){if(!Pr(t,{strict:!1}))throw new vi({address:t});if(!Pr(e,{strict:!1}))throw new vi({address:e});return t.toLowerCase()===e.toLowerCase()}const im="/docs/contract/decodeEventLog";function l2(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new mI({docsPath:im});const c=e.find(g=>g.type==="event"&&o===hp(Ms(g)));if(!(c&&"name"in c)||c.type!=="event")throw new ub(o,{docsPath:im});const{name:u,inputs:l}=c,d=l==null?void 0:l.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=l.map((g,m)=>[g,m]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[m,b]=f[g],w=a[g];if(!w)throw new lb({abiItem:c,param:m});h[d?b:m.name||b]=d2({param:m,value:w})}const p=l.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=Wl(p,n);if(g)if(d)for(let m=0;m<l.length;m++)h[m]=h[m]??g.shift();else for(let m=0;m<p.length;m++)h[p[m].name]=g[m]}catch(g){if(i)throw g instanceof ab||g instanceof Ob?new qh({abiItem:c,data:n,params:p,size:Et(n)}):g}else if(i)throw new qh({abiItem:c,data:"0x",params:p,size:0})}return{eventName:u,args:Object.values(h).length>0?h:void 0}}function d2({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(Wl([t],e)||[])[0]}function h2(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(l=>l.type==="event"&&o.topics[0]===hp(l));if(!c)return null;const u=l2({...o,abi:[c],strict:s});return i&&!i.includes(u.eventName)||!f2({args:u.args,inputs:c.inputs,matchArgs:n})?null:{...u,...o}}catch(c){let u,l;if(c instanceof ub)return null;if(c instanceof qh||c instanceof lb){if(s)return null;u=c.abiItem.name,l=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:l?[]:{},eventName:u}}}).filter(Boolean)}function f2(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?u2(o,a):i.type==="string"||i.type==="bytes"?Fc(Fl(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(u=>s(a,u,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(u=>u.name===i);return a?(Array.isArray(o)?o:[o]).some(u=>s(a,u,e[i])):!1}):!1}function eE(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}const Rd="/docs/contract/decodeFunctionResult";function xp(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=yp({abi:e,args:n,name:r});if(!a)throw new sl(r,{docsPath:Rd});i=a}if(i.type!=="function")throw new sl(void 0,{docsPath:Rd});if(!i.outputs)throw new yI(i.name,{docsPath:Rd});const o=Wl(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}var Pp={},Ie={},Op={},tE={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.notImplemented=t.bitMask=t.utf8ToBytes=t.randomBytes=t.isBytes=t.hexToBytes=t.concatBytes=t.bytesToUtf8=t.bytesToHex=t.anumber=t.abytes=void 0,t.abool=i,t.numberToHexUnpadded=o,t.hexToNumber=a,t.bytesToNumberBE=c,t.bytesToNumberLE=u,t.numberToBytesBE=l,t.numberToBytesLE=d,t.numberToVarBytesBE=h,t.ensureBytes=f,t.equalBytes=p,t.inRange=m,t.aInRange=b,t.bitLen=w,t.bitGet=E,t.bitSet=N,t.createHmacDrbg=R,t.validateObject=M,t.isHash=I,t._validateObject=j,t.memoized=L;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e=Uh;var n=Uh;Object.defineProperty(t,"abytes",{enumerable:!0,get:function(){return n.abytes}}),Object.defineProperty(t,"anumber",{enumerable:!0,get:function(){return n.anumber}}),Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return n.bytesToHex}}),Object.defineProperty(t,"bytesToUtf8",{enumerable:!0,get:function(){return n.bytesToUtf8}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return n.concatBytes}}),Object.defineProperty(t,"hexToBytes",{enumerable:!0,get:function(){return n.hexToBytes}}),Object.defineProperty(t,"isBytes",{enumerable:!0,get:function(){return n.isBytes}}),Object.defineProperty(t,"randomBytes",{enumerable:!0,get:function(){return n.randomBytes}}),Object.defineProperty(t,"utf8ToBytes",{enumerable:!0,get:function(){return n.utf8ToBytes}});const r=BigInt(0),s=BigInt(1);function i(x,B){if(typeof B!="boolean")throw new Error(x+" boolean expected, got "+B)}function o(x){const B=x.toString(16);return B.length&1?"0"+B:B}function a(x){if(typeof x!="string")throw new Error("hex string expected, got "+typeof x);return x===""?r:BigInt("0x"+x)}function c(x){return a((0,e.bytesToHex)(x))}function u(x){return(0,e.abytes)(x),a((0,e.bytesToHex)(Uint8Array.from(x).reverse()))}function l(x,B){return(0,e.hexToBytes)(x.toString(16).padStart(B*2,"0"))}function d(x,B){return l(x,B).reverse()}function h(x){return(0,e.hexToBytes)(o(x))}function f(x,B,v){let C;if(typeof B=="string")try{C=(0,e.hexToBytes)(B)}catch(D){throw new Error(x+" must be hex string or Uint8Array, cause: "+D)}else if((0,e.isBytes)(B))C=Uint8Array.from(B);else throw new Error(x+" must be hex string or Uint8Array");const P=C.length;if(typeof v=="number"&&P!==v)throw new Error(x+" of length "+v+" expected, got "+P);return C}function p(x,B){if(x.length!==B.length)return!1;let v=0;for(let C=0;C<x.length;C++)v|=x[C]^B[C];return v===0}const g=x=>typeof x=="bigint"&&r<=x;function m(x,B,v){return g(x)&&g(B)&&g(v)&&B<=x&&x<v}function b(x,B,v,C){if(!m(B,v,C))throw new Error("expected valid "+x+": "+v+" <= n < "+C+", got "+B)}function w(x){let B;for(B=0;x>r;x>>=s,B+=1);return B}function E(x,B){return x>>BigInt(B)&s}function N(x,B,v){return x|(v?s:r)<<BigInt(B)}const A=x=>(s<<BigInt(x))-s;t.bitMask=A;function R(x,B,v){if(typeof x!="number"||x<2)throw new Error("hashLen must be a number");if(typeof B!="number"||B<2)throw new Error("qByteLen must be a number");if(typeof v!="function")throw new Error("hmacFn must be a function");const C=K=>new Uint8Array(K),P=K=>Uint8Array.of(K);let D=C(x),S=C(x),$=0;const T=()=>{D.fill(1),S.fill(0),$=0},k=(...K)=>v(S,D,...K),z=(K=C(0))=>{S=k(P(0),K),D=k(),K.length!==0&&(S=k(P(1),K),D=k())},H=()=>{if($++>=1e3)throw new Error("drbg: tried 1000 values");let K=0;const we=[];for(;K<B;){D=k();const Ae=D.slice();we.push(Ae),K+=D.length}return(0,e.concatBytes)(...we)};return(K,we)=>{T(),z(K);let Ae;for(;!(Ae=we(H()));)z();return T(),Ae}}const O={bigint:x=>typeof x=="bigint",function:x=>typeof x=="function",boolean:x=>typeof x=="boolean",string:x=>typeof x=="string",stringOrUint8Array:x=>typeof x=="string"||(0,e.isBytes)(x),isSafeInteger:x=>Number.isSafeInteger(x),array:x=>Array.isArray(x),field:(x,B)=>B.Fp.isValid(x),hash:x=>typeof x=="function"&&Number.isSafeInteger(x.outputLen)};function M(x,B,v={}){const C=(P,D,S)=>{const $=O[D];if(typeof $!="function")throw new Error("invalid validator function");const T=x[P];if(!(S&&T===void 0)&&!$(T,x))throw new Error("param "+String(P)+" is invalid. Expected "+D+", got "+T)};for(const[P,D]of Object.entries(B))C(P,D,!1);for(const[P,D]of Object.entries(v))C(P,D,!0);return x}function I(x){return typeof x=="function"&&Number.isSafeInteger(x.outputLen)}function j(x,B,v={}){if(!x||typeof x!="object")throw new Error("expected valid options object");function C(P,D,S){const $=x[P];if(S&&$===void 0)return;const T=typeof $;if(T!==D||$===null)throw new Error(`param "${P}" is invalid: expected ${D}, got ${T}`)}Object.entries(B).forEach(([P,D])=>C(P,D,!1)),Object.entries(v).forEach(([P,D])=>C(P,D,!0))}const U=()=>{throw new Error("not implemented")};t.notImplemented=U;function L(x){const B=new WeakMap;return(v,...C)=>{const P=B.get(v);if(P!==void 0)return P;const D=x(v,...C);return B.set(v,D),D}}})(tE);(function(t){var e=pn&&pn.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=pn&&pn.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,r,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(tE,t)})(Op);var xe={},zc={},Hc={},Yl={};Object.defineProperty(Yl,"__esModule",{value:!0});Yl.version=void 0;Yl.version="0.1.1";Object.defineProperty(Hc,"__esModule",{value:!0});Hc.getUrl=g2;Hc.getVersion=m2;Hc.prettyPrint=y2;const p2=Yl;function g2(t){return t}function m2(){return p2.version}function y2(t){if(!t)return"";const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}Object.defineProperty(zc,"__esModule",{value:!0});zc.BaseError=void 0;const w2=Hc;let b2=class nf extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof nf){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof nf&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${(0,w2.getVersion)()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return nE(this,e)}};zc.BaseError=b2;function nE(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?nE(t.cause,e):e?null:t}var qc={};Object.defineProperty(qc,"__esModule",{value:!0});qc.parse=E2;qc.stringify=v2;const rf="#__bigint";function E2(t,e){return JSON.parse(t,(n,r)=>{const s=r;return typeof s=="string"&&s.endsWith(rf)?BigInt(s.slice(0,-rf.length)):typeof e=="function"?e(n,s):s})}function v2(t,e,n){return JSON.stringify(t,(r,s)=>typeof e=="function"?e(r,s):typeof s=="bigint"?s.toString()+rf:s,n)}var $d={},om;function rE(){return om||(om=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.charCodeMap=void 0,t.assertSize=n,t.assertStartOffset=r,t.assertEndOffset=s,t.charCodeToBase16=i,t.pad=o,t.trim=a;const e=iE();function n(c,u){if(e.size(c)>u)throw new e.SizeOverflowError({givenSize:e.size(c),maxSize:u})}function r(c,u){if(typeof u=="number"&&u>0&&u>e.size(c)-1)throw new e.SliceOffsetOutOfBoundsError({offset:u,position:"start",size:e.size(c)})}function s(c,u,l){if(typeof u=="number"&&typeof l=="number"&&e.size(c)!==l-u)throw new e.SliceOffsetOutOfBoundsError({offset:l,position:"end",size:e.size(c)})}t.charCodeMap={zero:48,nine:57,A:65,F:70,a:97,f:102};function i(c){if(c>=t.charCodeMap.zero&&c<=t.charCodeMap.nine)return c-t.charCodeMap.zero;if(c>=t.charCodeMap.A&&c<=t.charCodeMap.F)return c-(t.charCodeMap.A-10);if(c>=t.charCodeMap.a&&c<=t.charCodeMap.f)return c-(t.charCodeMap.a-10)}function o(c,u={}){const{dir:l,size:d=32}=u;if(d===0)return c;if(c.length>d)throw new e.SizeExceedsPaddingSizeError({size:c.length,targetSize:d,type:"Bytes"});const h=new Uint8Array(d);for(let f=0;f<d;f++){const p=l==="right";h[p?f:d-f-1]=c[p?f:c.length-f-1]}return h}function a(c,u={}){const{dir:l="left"}=u;let d=c,h=0;for(let f=0;f<d.length-1&&d[l==="left"?f:d.length-f-1].toString()==="0";f++)h++;return d=l==="left"?d.slice(h):d.slice(0,d.length-h),d}}($d)),$d}var as={},am;function sE(){if(am)return as;am=1,Object.defineProperty(as,"__esModule",{value:!0}),as.assertSize=e,as.assertStartOffset=n,as.assertEndOffset=r,as.pad=s,as.trim=i;const t=Zl();function e(o,a){if(t.size(o)>a)throw new t.SizeOverflowError({givenSize:t.size(o),maxSize:a})}function n(o,a){if(typeof a=="number"&&a>0&&a>t.size(o)-1)throw new t.SliceOffsetOutOfBoundsError({offset:a,position:"start",size:t.size(o)})}function r(o,a,c){if(typeof a=="number"&&typeof c=="number"&&t.size(o)!==c-a)throw new t.SliceOffsetOutOfBoundsError({offset:c,position:"end",size:t.size(o)})}function s(o,a={}){const{dir:c,size:u=32}=a;if(u===0)return o;const l=o.replace("0x","");if(l.length>u*2)throw new t.SizeExceedsPaddingSizeError({size:Math.ceil(l.length/2),targetSize:u,type:"Hex"});return`0x${l[c==="right"?"padEnd":"padStart"](u*2,"0")}`}function i(o,a={}){const{dir:c="left"}=a;let u=o.replace("0x",""),l=0;for(let d=0;d<u.length-1&&u[c==="left"?d:u.length-d-1].toString()==="0";d++)l++;return u=c==="left"?u.slice(l):u.slice(0,u.length-l),u==="0"?"0x":c==="right"&&u.length%2===1?`0x${u}0`:`0x${u}`}return as}var cm;function iE(){if(cm)return xe;cm=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.SizeExceedsPaddingSizeError=xe.SliceOffsetOutOfBoundsError=xe.SizeOverflowError=xe.InvalidBytesTypeError=xe.InvalidBytesBooleanError=void 0,xe.assert=c,xe.concat=u,xe.from=l,xe.fromArray=d,xe.fromBoolean=h,xe.fromHex=f,xe.fromNumber=p,xe.fromString=g,xe.isEqual=m,xe.padLeft=b,xe.padRight=w,xe.random=E,xe.size=N,xe.slice=A,xe.toBigInt=R,xe.toBoolean=O,xe.toHex=M,xe.toNumber=I,xe.toString=j,xe.trimLeft=U,xe.trimRight=L,xe.validate=x;const t=Op,e=zc,n=Zl(),r=qc,s=rE(),i=sE(),o=new TextDecoder,a=new TextEncoder;function c(S){if(!(S instanceof Uint8Array)){if(!S)throw new v(S);if(typeof S!="object")throw new v(S);if(!("BYTES_PER_ELEMENT"in S))throw new v(S);if(S.BYTES_PER_ELEMENT!==1||S.constructor.name!=="Uint8Array")throw new v(S)}}function u(...S){let $=0;for(const k of S)$+=k.length;const T=new Uint8Array($);for(let k=0,z=0;k<S.length;k++){const H=S[k];T.set(H,z),z+=H.length}return T}function l(S){return S instanceof Uint8Array?S:typeof S=="string"?f(S):d(S)}function d(S){return S instanceof Uint8Array?S:new Uint8Array(S)}function h(S,$={}){const{size:T}=$,k=new Uint8Array(1);return k[0]=Number(S),typeof T=="number"?(s.assertSize(k,T),b(k,T)):k}function f(S,$={}){const{size:T}=$;let k=S;T&&(i.assertSize(S,T),k=n.padRight(S,T));let z=k.slice(2);z.length%2&&(z=`0${z}`);const H=z.length/2,Z=new Uint8Array(H);for(let K=0,we=0;K<H;K++){const Ae=s.charCodeToBase16(z.charCodeAt(we++)),Ee=s.charCodeToBase16(z.charCodeAt(we++));if(Ae===void 0||Ee===void 0)throw new e.BaseError(`Invalid byte sequence ("${z[we-2]}${z[we-1]}" in "${z}").`);Z[K]=Ae*16+Ee}return Z}function p(S,$){const T=n.fromNumber(S,$);return f(T)}function g(S,$={}){const{size:T}=$,k=a.encode(S);return typeof T=="number"?(s.assertSize(k,T),w(k,T)):k}function m(S,$){return(0,t.equalBytes)(S,$)}function b(S,$){return s.pad(S,{dir:"left",size:$})}function w(S,$){return s.pad(S,{dir:"right",size:$})}function E(S){return crypto.getRandomValues(new Uint8Array(S))}function N(S){return S.length}function A(S,$,T,k={}){const{strict:z}=k;s.assertStartOffset(S,$);const H=S.slice($,T);return z&&s.assertEndOffset(H,$,T),H}function R(S,$={}){const{size:T}=$;typeof T<"u"&&s.assertSize(S,T);const k=n.fromBytes(S,$);return n.toBigInt(k,$)}function O(S,$={}){const{size:T}=$;let k=S;if(typeof T<"u"&&(s.assertSize(k,T),k=U(k)),k.length>1||k[0]>1)throw new B(k);return!!k[0]}function M(S,$={}){return n.fromBytes(S,$)}function I(S,$={}){const{size:T}=$;typeof T<"u"&&s.assertSize(S,T);const k=n.fromBytes(S,$);return n.toNumber(k,$)}function j(S,$={}){const{size:T}=$;let k=S;return typeof T<"u"&&(s.assertSize(k,T),k=L(k)),o.decode(k)}function U(S){return s.trim(S,{dir:"left"})}function L(S){return s.trim(S,{dir:"right"})}function x(S){try{return c(S),!0}catch{return!1}}class B extends e.BaseError{constructor($){super(`Bytes value \`${$}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}xe.InvalidBytesBooleanError=B;class v extends e.BaseError{constructor($){super(`Value \`${typeof $=="object"?r.stringify($):$}\` of type \`${typeof $}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}xe.InvalidBytesTypeError=v;class C extends e.BaseError{constructor({givenSize:$,maxSize:T}){super(`Size cannot exceed \`${T}\` bytes. Given size: \`${$}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}xe.SizeOverflowError=C;class P extends e.BaseError{constructor({offset:$,position:T,size:k}){super(`Slice ${T==="start"?"starting":"ending"} at offset \`${$}\` is out-of-bounds (size: \`${k}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"})}}xe.SliceOffsetOutOfBoundsError=P;class D extends e.BaseError{constructor({size:$,targetSize:T,type:k}){super(`${k.charAt(0).toUpperCase()}${k.slice(1).toLowerCase()} size (\`${$}\`) exceeds padding size (\`${T}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}return xe.SizeExceedsPaddingSizeError=D,xe}var um;function Zl(){if(um)return Ie;um=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.SizeExceedsPaddingSizeError=Ie.SliceOffsetOutOfBoundsError=Ie.SizeOverflowError=Ie.InvalidLengthError=Ie.InvalidHexValueError=Ie.InvalidHexTypeError=Ie.InvalidHexBooleanError=Ie.IntegerOutOfRangeError=void 0,Ie.assert=c,Ie.concat=u,Ie.from=l,Ie.fromBoolean=d,Ie.fromBytes=h,Ie.fromNumber=f,Ie.fromString=p,Ie.isEqual=g,Ie.padLeft=m,Ie.padRight=b,Ie.random=w,Ie.slice=E,Ie.size=N,Ie.trimLeft=A,Ie.trimRight=R,Ie.toBigInt=O,Ie.toBoolean=M,Ie.toBytes=I,Ie.toNumber=j,Ie.toString=U,Ie.validate=L;const t=Op,e=iE(),n=zc,r=qc,s=rE(),i=sE(),o=new TextEncoder,a=Array.from({length:256},(T,k)=>k.toString(16).padStart(2,"0"));function c(T,k={}){const{strict:z=!1}=k;if(!T)throw new v(T);if(typeof T!="string")throw new v(T);if(z&&!/^0x[0-9a-fA-F]*$/.test(T))throw new C(T);if(!T.startsWith("0x"))throw new C(T)}function u(...T){return`0x${T.reduce((k,z)=>k+z.replace("0x",""),"")}`}function l(T){return T instanceof Uint8Array?h(T):Array.isArray(T)?h(new Uint8Array(T)):T}function d(T,k={}){const z=`0x${Number(T)}`;return typeof k.size=="number"?(i.assertSize(z,k.size),m(z,k.size)):z}function h(T,k={}){let z="";for(let Z=0;Z<T.length;Z++)z+=a[T[Z]];const H=`0x${z}`;return typeof k.size=="number"?(i.assertSize(H,k.size),b(H,k.size)):H}function f(T,k={}){const{signed:z,size:H}=k,Z=BigInt(T);let K;H?z?K=(1n<<BigInt(H)*8n-1n)-1n:K=2n**(BigInt(H)*8n)-1n:typeof T=="number"&&(K=BigInt(Number.MAX_SAFE_INTEGER));const we=typeof K=="bigint"&&z?-K-1n:0;if(K&&Z>K||Z<we){const et=typeof T=="bigint"?"n":"";throw new x({max:K?`${K}${et}`:void 0,min:`${we}${et}`,signed:z,size:H,value:`${T}${et}`})}const Ee=`0x${(z&&Z<0?(1n<<BigInt(H*8))+BigInt(Z):Z).toString(16)}`;return H?m(Ee,H):Ee}function p(T,k={}){return h(o.encode(T),k)}function g(T,k){return(0,t.equalBytes)(e.fromHex(T),e.fromHex(k))}function m(T,k){return i.pad(T,{dir:"left",size:k})}function b(T,k){return i.pad(T,{dir:"right",size:k})}function w(T){return h(e.random(T))}function E(T,k,z,H={}){const{strict:Z}=H;i.assertStartOffset(T,k);const K=`0x${T.replace("0x","").slice((k??0)*2,(z??T.length)*2)}`;return Z&&i.assertEndOffset(K,k,z),K}function N(T){return Math.ceil((T.length-2)/2)}function A(T){return i.trim(T,{dir:"left"})}function R(T){return i.trim(T,{dir:"right"})}function O(T,k={}){const{signed:z}=k;k.size&&i.assertSize(T,k.size);const H=BigInt(T);if(!z)return H;const Z=(T.length-2)/2,K=(1n<<BigInt(Z)*8n)-1n,we=K>>1n;return H<=we?H:H-K-1n}function M(T,k={}){k.size&&i.assertSize(T,k.size);const z=A(T);if(z==="0x")return!1;if(z==="0x1")return!0;throw new B(T)}function I(T,k={}){return e.fromHex(T,k)}function j(T,k={}){const{signed:z,size:H}=k;return Number(!z&&!H?T:O(T,k))}function U(T,k={}){const{size:z}=k;let H=e.fromHex(T);return z&&(s.assertSize(H,z),H=e.trimRight(H)),new TextDecoder().decode(H)}function L(T,k={}){const{strict:z=!1}=k;try{return c(T,{strict:z}),!0}catch{return!1}}class x extends n.BaseError{constructor({max:k,min:z,signed:H,size:Z,value:K}){super(`Number \`${K}\` is not in safe${Z?` ${Z*8}-bit`:""}${H?" signed":" unsigned"} integer range ${k?`(\`${z}\` to \`${k}\`)`:`(above \`${z}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}Ie.IntegerOutOfRangeError=x;class B extends n.BaseError{constructor(k){super(`Hex value \`"${k}"\` is not a valid boolean.`,{metaMessages:['The hex value must be `"0x0"` (false) or `"0x1"` (true).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexBooleanError"})}}Ie.InvalidHexBooleanError=B;class v extends n.BaseError{constructor(k){super(`Value \`${typeof k=="object"?r.stringify(k):k}\` of type \`${typeof k}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}Ie.InvalidHexTypeError=v;class C extends n.BaseError{constructor(k){super(`Value \`${k}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}Ie.InvalidHexValueError=C;class P extends n.BaseError{constructor(k){super(`Hex value \`"${k}"\` is an odd length (${k.length-2} nibbles).`,{metaMessages:["It must be an even length."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidLengthError"})}}Ie.InvalidLengthError=P;class D extends n.BaseError{constructor({givenSize:k,maxSize:z}){super(`Size cannot exceed \`${z}\` bytes. Given size: \`${k}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}Ie.SizeOverflowError=D;class S extends n.BaseError{constructor({offset:k,position:z,size:H}){super(`Slice ${z==="start"?"starting":"ending"} at offset \`${k}\` is out-of-bounds (size: \`${H}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}Ie.SliceOffsetOutOfBoundsError=S;class $ extends n.BaseError{constructor({size:k,targetSize:z,type:H}){super(`${H.charAt(0).toUpperCase()}${H.slice(1).toLowerCase()} size (\`${k}\`) exceeds padding size (\`${z}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}return Ie.SizeExceedsPaddingSizeError=$,Ie}var Jl={};Object.defineProperty(Jl,"__esModule",{value:!0});Jl.fromRpc=C2;Jl.toRpc=_2;const Dd=Zl();function C2(t){return{...t,amount:BigInt(t.amount),index:Number(t.index),validatorIndex:Number(t.validatorIndex)}}function _2(t){return{address:t.address,amount:Dd.fromNumber(t.amount),index:Dd.fromNumber(t.index),validatorIndex:Dd.fromNumber(t.validatorIndex)}}Object.defineProperty(Pp,"__esModule",{value:!0});Pp.fromRpc=I2;var A2=Pp.toRpc=S2;const zi=Zl(),oE=Jl;function I2(t){return{...t.baseFeePerGas&&{baseFeePerGas:BigInt(t.baseFeePerGas)},...t.blobBaseFee&&{blobBaseFee:BigInt(t.blobBaseFee)},...t.feeRecipient&&{feeRecipient:t.feeRecipient},...t.gasLimit&&{gasLimit:BigInt(t.gasLimit)},...t.number&&{number:BigInt(t.number)},...t.prevRandao&&{prevRandao:BigInt(t.prevRandao)},...t.time&&{time:BigInt(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(oE.fromRpc)}}}function S2(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:zi.fromNumber(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:zi.fromNumber(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:zi.fromNumber(t.gasLimit)},...typeof t.number=="bigint"&&{number:zi.fromNumber(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:zi.fromNumber(t.prevRandao)},...typeof t.time=="bigint"&&{time:zi.fromNumber(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(oE.toRpc)}}}const sf=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],sH=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],aE=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],iH=[...aE,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],oH=[...aE,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],aH=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],cH=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],uH=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],lH=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],N2="0x82ad56cb",T2="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",x2="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",dH="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";class of extends V{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class P2 extends V{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class O2 extends V{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class cE extends V{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const kd="/docs/contract/encodeDeployData";function uE(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new hI({docsPath:kd});if(!("inputs"in s))throw new qg({docsPath:kd});if(!s.inputs||s.inputs.length===0)throw new qg({docsPath:kd});const i=xb(s.inputs,n);return Hl([r,i])}function lE({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new of({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new of({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function R2(t,{docsPath:e,...n}){const r=(()=>{const s=_p(t,n);return s instanceof Vl?t:s})();return new PS(r,{docsPath:e,...n})}function dE(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const Ud=new Map;function hE({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const l=c();o();const d=l.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<l.length;f++){const{resolve:p}=l[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<l.length;f++){const{reject:p}=l[f];p==null||p(h)}})},o=()=>Ud.delete(e),a=()=>c().map(({args:l})=>l),c=()=>Ud.get(e)||[],u=l=>Ud.set(e,[...c(),l]);return{flush:o,async schedule(l){const{promise:d,resolve:h,reject:f}=dE();return(n==null?void 0:n([...a(),l]))&&i(),c().length>0?(u({args:l,resolve:h,reject:f}),d):(u({args:l,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function fE(t,e){var x,B,v,C;const{account:n=t.account,authorizationList:r,batch:s=!!((x=t.batch)!=null&&x.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:u,code:l,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:b,maxPriorityFeePerGas:w,nonce:E,to:N,value:A,stateOverride:R,...O}=e,M=n?kr(n):void 0;if(l&&(h||f))throw new V("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(l&&N)throw new V("Cannot provide both `code` & `to` as parameters.");const I=l&&d,j=h&&f&&N&&d,U=I||j,L=I?k2({code:l,data:d}):j?U2({data:d,factory:h,factoryData:f,to:N}):d;try{Gl(e);const D=(typeof i=="bigint"?Te(i):void 0)||o,S=u?A2(u):void 0,$=Lb(R),T=(C=(v=(B=t.chain)==null?void 0:B.formatters)==null?void 0:v.transactionRequest)==null?void 0:C.format,z=(T||Ip)({...Ap(O,{format:T}),from:M==null?void 0:M.address,accessList:a,authorizationList:r,blobs:c,data:L,gas:p,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:b,maxPriorityFeePerGas:w,nonce:E,to:U?void 0:N,value:A});if(s&&$2({request:z})&&!$&&!S)try{return await D2(t,{...z,blockNumber:i,blockTag:o})}catch(K){if(!(K instanceof cE)&&!(K instanceof of))throw K}const H=(()=>{const K=[z,D];return $&&S?[...K,$,S]:$?[...K,$]:S?[...K,{},S]:K})(),Z=await t.request({method:"eth_call",params:H});return Z==="0x"?{data:void 0}:{data:Z}}catch(P){const D=B2(P),{offchainLookup:S,offchainLookupSignature:$}=await Kt(async()=>{const{offchainLookup:T,offchainLookupSignature:k}=await import("./DEo6VAvv.js");return{offchainLookup:T,offchainLookupSignature:k}},__vite__mapDeps([3,4]),import.meta.url);if(t.ccipRead!==!1&&(D==null?void 0:D.slice(0,10))===$&&N)return{data:await S(t,{data:D,to:N})};throw U&&(D==null?void 0:D.slice(0,10))==="0x101bb98d"?new $S({factory:h}):R2(P,{...e,account:M,chain:t.chain})}}function $2({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(N2)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function D2(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let u=a;if(!u){if(!t.chain)throw new cE;u=lE({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?Te(s):void 0)||i,{schedule:h}=hE({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(m){return m.reduce((w,{data:E})=>w+(E.length-2),0)>n*2},fn:async m=>{const b=m.map(N=>({allowFailure:!0,callData:N.data,target:N.to})),w=ql({abi:sf,args:[b],functionName:"aggregate3"}),E=await t.request({method:"eth_call",params:[{data:w,to:u},d]});return xp({abi:sf,args:[b],functionName:"aggregate3",data:E||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new vp({data:f});return f==="0x"?{data:void 0}:{data:f}}function k2(t){const{code:e,data:n}=t;return uE({abi:sb(["constructor(bytes, bytes)"]),bytecode:T2,args:[e,n]})}function U2(t){const{data:e,factory:n,factoryData:r,to:s}=t;return uE({abi:sb(["constructor(address, bytes, address, bytes)"]),bytecode:x2,args:[s,e,n,r]})}function B2(t){var n;if(!(t instanceof V))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function pE(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=ql({abi:n,args:s,functionName:i});try{const{data:c}=await ct(t,fE,"call")({...o,data:a,to:r});return xp({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw ol(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}const Bd=new Map,lm=new Map;let M2=0;function ul(t,e,n){const r=++M2,s=()=>Bd.get(t)||[],i=()=>{const l=s();Bd.set(t,l.filter(d=>d.id!==r))},o=()=>{const l=s();if(!l.some(h=>h.id===r))return;const d=lm.get(t);if(l.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(Bd.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const l in e)c[l]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[l])==null||p.call(f,...d)};const u=n(c);return typeof u=="function"&&lm.set(t,u),o}async function ll(t){return new Promise(e=>setTimeout(e,t))}function gE(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await ll(c);const u=async()=>{s&&(await t({unpoll:i}),await ll(r),u())};u()})(),i}const L2=new Map,F2=new Map;function j2(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,L2),r=e(t,F2);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function z2(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=j2(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const H2=t=>`blockNumber.${t}`;async function q2(t,{cacheTime:e=t.cacheTime}={}){const n=await z2(()=>t.request({method:"eth_blockNumber"}),{cacheKey:H2(t.uid),cacheTime:e});return BigInt(n)}async function W2(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>eE(i));return!("abi"in e)||!e.abi?s:h2({abi:e.abi,logs:s,strict:n})}async function V2(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}class Rp extends V{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class Md extends V{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function G2({chain:t,currentChainId:e}){if(!t)throw new O2;if(e!==t.id)throw new P2({chain:t,currentChainId:e})}function K2(t,{docsPath:e,...n}){const r=(()=>{const s=_p(t,n);return s instanceof Vl?t:s})();return new NS(r,{docsPath:e,...n})}async function Y2(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const Ld=new jl(128);async function mE(t,e){var w,E,N,A;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...m}=e;if(typeof n>"u")throw new Rp({docsPath:"/docs/actions/wallet/sendTransaction"});const b=n?kr(n):null;try{Gl(e);const R=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await Mb({authorization:i[0]}).catch(()=>{throw new V("`to` is required. Could not infer from `authorizationList`.")})})();if((b==null?void 0:b.type)==="json-rpc"||b===null){let O;r!==null&&(O=await ct(t,Zb,"getChainId")({}),G2({currentChainId:O,chain:r}));const M=(N=(E=(w=t.chain)==null?void 0:w.formatters)==null?void 0:E.transactionRequest)==null?void 0:N.format,j=(M||Ip)({...Ap(m,{format:M}),accessList:s,authorizationList:i,blobs:o,chainId:O,data:a,from:b==null?void 0:b.address,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:R,type:p,value:g}),U=Ld.get(t.uid),L=U?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:L,params:[j]},{retryCount:0})}catch(x){if(U===!1)throw x;const B=x;if(B.name==="InvalidInputRpcError"||B.name==="InvalidParamsRpcError"||B.name==="MethodNotFoundRpcError"||B.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[j]},{retryCount:0}).then(v=>(Ld.set(t.uid,!0),v)).catch(v=>{const C=v;throw C.name==="MethodNotFoundRpcError"||C.name==="MethodNotSupportedRpcError"?(Ld.set(t.uid,!1),B):C});throw B}}if((b==null?void 0:b.type)==="local"){const O=await ct(t,Tp,"prepareTransactionRequest")({account:b,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:b.nonceManager,parameters:[...Jb,"sidecars"],type:p,value:g,...m,to:R}),M=(A=r==null?void 0:r.serializers)==null?void 0:A.transaction,I=await b.signTransaction(O,{serializer:M});return await ct(t,Y2,"sendRawTransaction")({serializedTransaction:I})}throw(b==null?void 0:b.type)==="smart"?new Md({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Md({docsPath:"/docs/actions/wallet/sendTransaction",type:b==null?void 0:b.type})}catch(R){throw R instanceof Md?R:K2(R,{...e,account:b,chain:e.chain||void 0})}}async function Z2(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new Rp({docsPath:"/docs/contract/writeContract"});const u=r?kr(r):null,l=ql({abi:n,args:i,functionName:a});try{return await ct(t,mE,"sendTransaction")({data:`${l}${o?o.replace("0x",""):""}`,to:s,account:u,...c})}catch(d){throw ol(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:u==null?void 0:u.address})}}const J2={"0x0":"reverted","0x1":"success"};function X2(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>eE(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Ei(t.transactionIndex):null,status:t.status?J2[t.status]:null,type:t.type?jb[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}const af=256;let uu=af,lu;function yE(t=11){if(!lu||uu+t>af*2){lu="",uu=0;for(let e=0;e<af;e++)lu+=(256+Math.random()*256|0).toString(16).substring(1)}return lu.substring(uu,uu+++t)}function wE(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),u=t.pollingInterval??c,l=t.cacheTime??u,d=t.account?kr(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:u}),g={...h,...p},m={account:d,batch:e,cacheTime:l,ccipRead:r,chain:n,key:s,name:i,pollingInterval:u,request:f,transport:g,type:o,uid:yE()};function b(w){return E=>{const N=E(w);for(const R in m)delete N[R];const A={...w,...N};return Object.assign(A,{extend:b(A)})}}return Object.assign(m,{extend:b(m)})}const du=new jl(8192);function Q2(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(du.get(n))return du.get(n);const r=t().finally(()=>du.delete(n));return du.set(n,r),r}function dl(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:u})=>{const l=typeof e=="function"?e({count:a,error:u}):e;l&&await ll(l),o({count:a+1})};try{const u=await t();s(u)}catch(u){if(a<n&&await r({count:a,error:u}))return c({error:u});i(u)}};o()})}function eN(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:u}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(u))throw new oi(new Error("method not supported"),{method:u});if(i!=null&&i.include&&!i.include.includes(u))throw new oi(new Error("method not supported"),{method:u});const l=s?Ll(`${c}.${zn(n)}`):void 0;return Q2(()=>dl(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case Ga.code:throw new Ga(f);case Ka.code:throw new Ka(f);case Ya.code:throw new Ya(f,{method:n.method});case Za.code:throw new Za(f);case Ci.code:throw new Ci(f);case Ja.code:throw new Ja(f);case Xa.code:throw new Xa(f);case Os.code:throw new Os(f);case No.code:throw new No(f);case oi.code:throw new oi(f,{method:n.method});case To.code:throw new To(f);case Qa.code:throw new Qa(f);case wt.code:throw new wt(f);case ec.code:throw new ec(f);case tc.code:throw new tc(f);case nc.code:throw new nc(f);case rc.code:throw new rc(f);case Or.code:throw new Or(f);case sc.code:throw new sc(f);case ic.code:throw new ic(f);case oc.code:throw new oc(f);case ac.code:throw new ac(f);case cc.code:throw new cc(f);case uc.code:throw new uc(f);case lc.code:throw new lc(f);case 5e3:throw new wt(f);default:throw h instanceof V?h:new kS(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof Sa){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>tN(h)}),{enabled:s,id:l})}}function tN(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===To.code||t.code===Ci.code:t instanceof Sa&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function $p({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const u=yE();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:eN(r,{methods:e,retryCount:s,retryDelay:i,uid:u}),value:c}}function nN(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>$p({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function dm(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=rN,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:u=4e3,timeout:l,...d})=>{let h=t,f=()=>{};const p=$p({key:n,name:r,async request({method:g,params:m}){let b;const w=async(E=0)=>{const N=h[E]({...d,chain:c,retryCount:0,timeout:l});try{const A=await N.request({method:g,params:m});return f({method:g,params:m,response:A,transport:N,status:"success"}),A}catch(A){if(f({error:A,method:g,params:m,transport:N,status:"error"}),i(A)||E===h.length-1||(b??(b=h.slice(E+1).some(R=>{const{include:O,exclude:M}=R({chain:c}).config.methods||{};return O?O.includes(g):M?!M.includes(g):!0})),!b))throw A;return w(E+1)}};return w()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};sN({chain:c,interval:g.interval??u,onTransports:m=>h=m,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function rN(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===No.code||t.code===wt.code||ai.nodeMessage.test(t.message)||t.code===5e3))}function sN({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:u=.3}=a,l=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const m=g({chain:t,retryCount:0,timeout:i}),b=Date.now();let w,E;try{await(r?r({transport:m}):m.request({method:"net_listening"})),E=1}catch{E=0}finally{w=Date.now()}return{latency:w-b,success:E}}));l.push(h),l.length>s&&l.shift();const f=Math.max(...l.map(g=>Math.max(...g.map(({latency:m})=>m)))),p=o.map((g,m)=>{const b=l.map(R=>R[m].latency),E=1-b.reduce((R,O)=>R+O,0)/b.length/f,N=l.map(R=>R[m].success),A=N.reduce((R,O)=>R+O,0)/N.length;return A===0?[0,m]:[u*E+c*A,m]}).sort((g,m)=>m[0]-g[0]);n(p.map(([,g])=>o[g])),await ll(e),d()};d()}class iN extends V{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function bE(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function oN(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const hm=oN();function aN(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:u,signal:l}=a;try{const h=await bE(async({signal:p})=>{const g={...a,body:Array.isArray(r)?zn(r.map(E=>({jsonrpc:"2.0",id:E.id??hm.take(),...E}))):zn({jsonrpc:"2.0",id:r.id??hm.take(),...r}),headers:{"Content-Type":"application/json",...c},method:u||"POST",signal:l||(o>0?p:null)},m=new Request(t,g),b=await(s==null?void 0:s(m,g))??{...g,url:t};return await fetch(b.url??t,b)},{errorInstance:new Qg({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new Sa({body:r,details:zn(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof Sa||h instanceof Qg?h:new Sa({body:r,cause:h,url:t})}}}}function hu(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:u,raw:l}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},m=e.retryCount??h,b=f??e.timeout??1e4,w=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!w)throw new iN;const E=aN(w,{fetchOptions:r,onRequest:a,onResponse:c,timeout:b});return $p({key:s,methods:i,name:o,async request({method:N,params:A}){const R={method:N,params:A},{schedule:O}=hE({id:w,wait:g,shouldSplitBatch(U){return U.length>p},fn:U=>E.request({body:U}),sort:(U,L)=>U.id-L.id}),M=async U=>n?O(U):[await E.request({body:U})],[{error:I,result:j}]=await M(R);if(l)return{error:I,result:j};if(I)throw new Cp({body:R,error:I,url:w});return j},retryCount:m,retryDelay:u,timeout:b,type:"http"},{fetchOptions:r,url:w})}}async function cN(t){const e=tS(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}function uN(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}class lN extends V{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function dN(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new lN({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}async function EE(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var l,d,h;const o=r||"latest",a=n!==void 0?Te(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,Te(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,Te(i)]},{dedupe:!!a}),!c)throw new $b({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(l=t.chain)==null?void 0:l.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||zb)(c)}async function fm(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new Db({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||X2)(n)}async function hN(t,e){var b;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,u=e.contracts,l=s??(typeof((b=t.batch)==null?void 0:b.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=lE({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let w=0;w<u.length;w++){const{abi:E,address:N,args:A,functionName:R}=u[w];try{const O=ql({abi:E,args:A,functionName:R});p+=(O.length-2)/2,l>0&&p>l&&h[f].length>0&&(f++,p=(O.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:O,target:N}]}catch(O){const M=ol(O,{abi:E,address:N,args:A,docsPath:"/docs/contract/multicall",functionName:R,sender:n});if(!r)throw M;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:N}]}}const g=await Promise.allSettled(h.map(w=>ct(t,pE,"readContract")({abi:sf,account:n,address:d,args:[w],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),m=[];for(let w=0;w<g.length;w++){const E=g[w];if(E.status==="rejected"){if(!r)throw E.reason;for(let A=0;A<h[w].length;A++)m.push({status:"failure",error:E.reason,result:void 0});continue}const N=E.value;for(let A=0;A<N.length;A++){const{returnData:R,success:O}=N[A],{callData:M}=h[w][A],{abi:I,address:j,functionName:U,args:L}=u[m.length];try{if(M==="0x")throw new Ml;if(!O)throw new vp({data:R});const x=xp({abi:I,args:L,data:R,functionName:U});m.push(r?{result:x,status:"success"}:x)}catch(x){const B=ol(x,{abi:I,address:j,args:L,docsPath:"/docs/contract/multicall",functionName:U});if(!r)throw B;m.push({error:B,result:void 0,status:"failure"})}}}if(m.length!==u.length)throw new V("multicall results mismatch");return m}function fN(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=zn(["watchBlockNumber",t.uid,e,n,o]);return ul(d,{onBlockNumber:r,onError:s},h=>gE(async()=>{var f;try{const p=await ct(t,q2,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=zn(["watchBlockNumber",t.uid,e,n]);return ul(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const b=t.transport.transports.find(w=>w.config.type==="webSocket"||w.config.type==="ipc");return b?b.value:t.transport}return t.transport})(),{unsubscribe:m}=await g.subscribe({params:["newHeads"],onData(b){var E;if(!f)return;const w=Ao((E=b.result)==null?void 0:E.number);h.onBlockNumber(w,c),c=w},onError(b){var w;(w=h.onError)==null||w.call(h,b)}});p=m,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function pN(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=zn(["waitForTransactionReceipt",t.uid,n]);let u,l,d,h=!1,f,p;const{promise:g,resolve:m,reject:b}=dE(),w=a?setTimeout(()=>{p(),f(),b(new TS({hash:n}))},a):void 0;return f=ul(c,{onReplaced:r,resolve:m,reject:b},E=>{p=ct(t,fN,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(N){const A=O=>{clearTimeout(w),p(),O(),f()};let R=N;if(!h)try{if(d){if(e>1&&(!d.blockNumber||R-d.blockNumber+1n<e))return;A(()=>E.resolve(d));return}if(u||(h=!0,await dl(async()=>{u=await ct(t,EE,"getTransaction")({hash:n}),u.blockNumber&&(R=u.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await ct(t,fm,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||R-d.blockNumber+1n<e))return;A(()=>E.resolve(d))}catch(O){if(O instanceof $b||O instanceof Db){if(!u){h=!1;return}try{l=u,h=!0;const M=await dl(()=>ct(t,dc,"getBlock")({blockNumber:R,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:U})=>U instanceof Fb});h=!1;const I=M.transactions.find(({from:U,nonce:L})=>U===l.from&&L===l.nonce);if(!I||(d=await ct(t,fm,"getTransactionReceipt")({hash:I.hash}),e>1&&(!d.blockNumber||R-d.blockNumber+1n<e)))return;let j="replaced";I.to===l.to&&I.value===l.value&&I.input===l.input?j="repriced":I.from===I.to&&I.value===0n&&(j="cancelled"),A(()=>{var U;(U=E.onReplaced)==null||U.call(E,{reason:j,replacedTransaction:l,transaction:I,transactionReceipt:d}),E.resolve(d)})}catch(M){A(()=>E.reject(M))}}else A(()=>E.reject(O))}}})}),g}function gN(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const u=zn(["watchPendingTransactions",t.uid,e,i]);return ul(u,{onTransactions:r,onError:n},l=>{let d;const h=gE(async()=>{var f;try{if(!d)try{d=await ct(t,cN,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await ct(t,W2,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)l.onTransactions(p);else for(const g of p)l.onTransactions([g])}catch(p){(f=l.onError)==null||f.call(l,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await ct(t,V2,"uninstallFilter")({filter:d}),h()}})})():(()=>{let u=!0,l=()=>u=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!u)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});l=d,u||l()}catch(d){n==null||n(d)}})(),()=>l()})()}async function mN(t,{account:e=t.account,message:n}){if(!e)throw new Rp({docsPath:"/docs/actions/wallet/signMessage"});const r=kr(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?Ll(n):n.raw instanceof Uint8Array?Io(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}const Fd={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Bo(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},Dp={async getMyTokensWithBalance(t){const e=ue.state.address,n=_.state.activeCaipNetwork,r=Q.getConnectorId("eip155")===F.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=G.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===F.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await fe.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=Fd.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await ee.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await ee.walletGetAssets({account:t,chainFilter:[s]});if(!Fd.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(u=>Fd.createBalance(u,e.caipNetworkId));return G.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},hr=Je({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),yN={state:hr,replaceState(t){t&&Object.assign(hr,yi(t))},subscribe(t){return _.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return _.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){_.setAccountProp("status",t,e)},getCaipAddress(t){return _.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?ae.getPlainAddress(t):void 0;e===_.state.activeChain&&(_.state.activeCaipAddress=t),_.setAccountProp("caipAddress",t,e),_.setAccountProp("address",n,e)},setBalance(t,e,n){_.setAccountProp("balance",t,n),_.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){_.setAccountProp("profileName",t,e)},setProfileImage(t,e){_.setAccountProp("profileImage",t,e)},setUser(t,e){_.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){_.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){_.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){_.setAccountProp("currentTab",t,_.state.activeChain)},setTokenBalance(t,e){t&&_.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){_.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=_.getAccountProp("addressLabels",n)||new Map;r.set(t,e),_.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=_.getAccountProp("addressLabels",e)||new Map;n.delete(t),_.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){_.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){_.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&_.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){_.setAccountProp("socialWindow",t?yi(t):void 0,e)},setFarcasterUrl(t,e){_.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;hr.balanceLoading=!0;const e=(i=_.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=_.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=_.state.activeCaipAddress,s=r?ae.getPlainAddress(r):void 0;if(hr.lastRetry&&!ae.isAllowedRetry(hr.lastRetry,30*ze.ONE_SEC_MS))return hr.balanceLoading=!1,[];try{if(s&&e&&n){const a=await Dp.getMyTokensWithBalance();return ue.setTokenBalance(a,n),hr.lastRetry=void 0,hr.balanceLoading=!1,a}}catch(a){hr.lastRetry=Date.now(),t==null||t(a),_r.showError("Token Balance Unavailable")}finally{hr.balanceLoading=!1}return[]},resetAccount(t){_.resetAccount(t)}},ue=On(yN),wN={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=_.state.activeCaipNetwork,r=ge.state.data;if(t.id===(n==null?void 0:n.id))return;const i=ue.getCaipAddress(_.state.activeChain),o=t.chainNamespace!==_.state.activeChain,a=ue.getCaipAddress(t.chainNamespace),u=Q.getConnectorId(_.state.activeChain)===F.CONNECTOR_ID.AUTH,l=F.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||u&&l?ge.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?ge.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):ge.push("SwitchNetwork",{...r,network:t})}},rn=Je({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),bN={state:rn,subscribe(t){return Ut(rn,()=>t(rn))},subscribeKey(t,e){return Bt(rn,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=_.state.activeChain,r=e&&e!==n,s=(i=_.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(ee.state.wcBasic?de.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await de.prefetch(),Q.setFilterByNamespace(t==null?void 0:t.namespace),Me.setLoading(!0,e),e&&r){const a=((o=_.getNetworkData(e))==null?void 0:o.caipNetwork)||_.getRequestedCaipNetworks(e)[0];a&&wN.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=_.state.noAdapters;q.state.manualWCControl||a&&!s?ae.isMobile()?ge.reset("AllWallets"):ge.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?ge.reset(t.view,t.data):s?ge.reset("Account"):ge.reset("Connect")}rn.open=!0,Ir.set({open:!0}),We.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=q.state.enableEmbedded,e=!!_.state.activeCaipAddress;rn.open&&We.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),rn.open=!1,ge.reset("Connect"),Me.clearLoading(),t?e?ge.replace("Account"):ge.push("Connect"):Ir.set({open:!1}),ee.resetUri()},setLoading(t,e){e&&rn.loadingNamespaceMap.set(e,t),rn.loading=t,Ir.set({loading:t})},clearLoading(){rn.loadingNamespaceMap.clear(),rn.loading=!1},shake(){rn.shake||(rn.shake=!0,setTimeout(()=>{rn.shake=!1},500))}},Me=On(bN),Na={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},cf={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},EN={providers:j0,selectedProvider:null,error:null,purchaseCurrency:Na,paymentCurrency:cf,purchaseCurrencies:[Na],paymentCurrencies:[],quotesLoading:!1},$e=Je(EN),vN={state:$e,subscribe(t){return Ut($e,()=>t($e))},subscribeKey(t,e){return Bt($e,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=_.state.activeChain,n=e===F.CHAIN.SOLANA?"SOL":"USDC",r=_.getAccountProp("address",e)??"",s=new URL(t.url);s.searchParams.append("publicKey",V_),s.searchParams.append("destinationCurrencyCode",n),s.searchParams.append("walletAddress",r),s.searchParams.append("externalCustomerId",q.state.projectId),$e.selectedProvider={...t,url:s.toString()}}else $e.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=j0.filter(r=>e.includes(r.name));$e.providers=n}else $e.providers=[]},setPurchaseCurrency(t){$e.purchaseCurrency=t},setPaymentCurrency(t){$e.paymentCurrency=t},setPurchaseAmount(t){uf.state.purchaseAmount=t},setPaymentAmount(t){uf.state.paymentAmount=t},async getAvailableCurrencies(){const t=await fe.getOnrampOptions();$e.purchaseCurrencies=t.purchaseCurrencies,$e.paymentCurrencies=t.paymentCurrencies,$e.paymentCurrency=t.paymentCurrencies[0]||cf,$e.purchaseCurrency=t.purchaseCurrencies[0]||Na,await de.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await de.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;$e.quotesLoading=!0;try{const n=await fe.getOnrampQuote({purchaseCurrency:$e.purchaseCurrency,paymentCurrency:$e.paymentCurrency,amount:((t=$e.paymentAmount)==null?void 0:t.toString())||"0",network:(e=$e.purchaseCurrency)==null?void 0:e.symbol});return $e.quotesLoading=!1,$e.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return $e.error=n.message,$e.quotesLoading=!1,null}finally{$e.quotesLoading=!1}},resetState(){$e.selectedProvider=null,$e.error=null,$e.purchaseCurrency=Na,$e.paymentCurrency=cf,$e.purchaseCurrencies=[Na],$e.paymentCurrencies=[],$e.paymentAmount=void 0,$e.purchaseAmount=void 0,$e.quotesLoading=!1}},uf=On(vN),pm=2147483648,CN={convertEVMChainIdToCoinType(t){if(t>=pm)throw new Error("Invalid chainId");return(pm|t)>>>0}},$n=Je({suggestions:[],loading:!1}),_N={state:$n,subscribe(t){return Ut($n,()=>t($n))},subscribeKey(t,e){return Bt($n,t,e)},async resolveName(t){var e,n;try{return await fe.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await fe.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{$n.loading=!0,$n.suggestions=[];const e=await fe.getEnsNameSuggestions(t);return $n.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],$n.suggestions}catch(e){const n=Ta.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{$n.loading=!1}},async getNamesForAddress(t){try{if(!_.state.activeCaipNetwork)return[];const n=G.getEnsFromCacheForAddress(t);if(n)return n;const r=await fe.reverseLookupEnsName({address:t});return G.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=Ta.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=_.state.activeCaipNetwork,n=ue.state.address,r=Q.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");$n.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});ge.pushTransactionStack({onCancel(){ge.replace("RegisterAccountName")}});const i=await ee.signMessage(s);$n.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=CN.convertEVMChainIdToCoinType(Number(o));await fe.registerEnsName({coinType:a,address:n,signature:i,message:s}),ue.setProfileName(t,e.chainNamespace),ge.replace("RegisterAccountNameSuccess")}catch(s){const i=Ta.parseEnsApiError(s,`Error registering name ${t}`);throw ge.replace("RegisterAccountName"),new Error(i)}finally{$n.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},Ta=On(_N);var kp={exports:{}},yo=typeof Reflect=="object"?Reflect:null,gm=yo&&typeof yo.apply=="function"?yo.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},Fu;yo&&typeof yo.ownKeys=="function"?Fu=yo.ownKeys:Object.getOwnPropertySymbols?Fu=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Fu=function(e){return Object.getOwnPropertyNames(e)};function AN(t){console&&console.warn&&console.warn(t)}var vE=Number.isNaN||function(e){return e!==e};function Ye(){Ye.init.call(this)}kp.exports=Ye;kp.exports.once=TN;Ye.EventEmitter=Ye;Ye.prototype._events=void 0;Ye.prototype._eventsCount=0;Ye.prototype._maxListeners=void 0;var mm=10;function Xl(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Ye,"defaultMaxListeners",{enumerable:!0,get:function(){return mm},set:function(t){if(typeof t!="number"||t<0||vE(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");mm=t}});Ye.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ye.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||vE(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function CE(t){return t._maxListeners===void 0?Ye.defaultMaxListeners:t._maxListeners}Ye.prototype.getMaxListeners=function(){return CE(this)};Ye.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")gm(c,this,n);else for(var u=c.length,l=NE(c,u),r=0;r<u;++r)gm(l[r],this,n);return!0};function _E(t,e,n,r){var s,i,o;if(Xl(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=CE(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,AN(a)}return t}Ye.prototype.addListener=function(e,n){return _E(this,e,n,!1)};Ye.prototype.on=Ye.prototype.addListener;Ye.prototype.prependListener=function(e,n){return _E(this,e,n,!0)};function IN(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function AE(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=IN.bind(r);return s.listener=n,r.wrapFn=s,s}Ye.prototype.once=function(e,n){return Xl(n),this.on(e,AE(this,e,n)),this};Ye.prototype.prependOnceListener=function(e,n){return Xl(n),this.prependListener(e,AE(this,e,n)),this};Ye.prototype.removeListener=function(e,n){var r,s,i,o,a;if(Xl(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():SN(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Ye.prototype.off=Ye.prototype.removeListener;Ye.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function IE(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?NN(s):NE(s,s.length)}Ye.prototype.listeners=function(e){return IE(this,e,!0)};Ye.prototype.rawListeners=function(e){return IE(this,e,!1)};Ye.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):SE.call(t,e)};Ye.prototype.listenerCount=SE;function SE(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Ye.prototype.eventNames=function(){return this._eventsCount>0?Fu(this._events):[]};function NE(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function SN(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function NN(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function TN(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}TE(t,e,i,{once:!0}),e!=="error"&&xN(t,s,{once:!0})})}function xN(t,e,n){typeof t.on=="function"&&TE(t,"error",e,n)}function TE(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Gn=kp.exports;const Up=kl(Gn);var J={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lf=function(t,e){return lf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},lf(t,e)};function PN(t,e){lf(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var df=function(){return df=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},df.apply(this,arguments)};function ON(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function RN(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function $N(t,e){return function(n,r){e(n,r,t)}}function DN(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function kN(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function UN(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(l){u=[6,l],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function BN(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function MN(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function hf(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xE(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function LN(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(xE(arguments[e]));return t}function FN(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function hc(t){return this instanceof hc?(this.v=t,this):new hc(t)}function jN(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof hc?Promise.resolve(h.value.v).then(u,l):d(i[0][2],h)}function u(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function zN(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:hc(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function HN(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof hf=="function"?hf(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function qN(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function WN(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function VN(t){return t&&t.__esModule?t:{default:t}}function GN(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function KN(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const YN=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return df},__asyncDelegator:zN,__asyncGenerator:jN,__asyncValues:HN,__await:hc,__awaiter:kN,__classPrivateFieldGet:GN,__classPrivateFieldSet:KN,__createBinding:BN,__decorate:RN,__exportStar:MN,__extends:PN,__generator:UN,__importDefault:VN,__importStar:WN,__makeTemplateObject:qN,__metadata:DN,__param:$N,__read:xE,__rest:ON,__spread:LN,__spreadArrays:FN,__values:hf},Symbol.toStringTag,{value:"Module"})),Wc=c_(YN);var jd={},ea={},ym;function ZN(){if(ym)return ea;ym=1,Object.defineProperty(ea,"__esModule",{value:!0}),ea.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return ea.delay=t,ea}var Ks={},zd={},Ys={},wm;function JN(){return wm||(wm=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.ONE_THOUSAND=Ys.ONE_HUNDRED=void 0,Ys.ONE_HUNDRED=100,Ys.ONE_THOUSAND=1e3),Ys}var Hd={},bm;function XN(){return bm||(bm=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Hd)),Hd}var Em;function PE(){return Em||(Em=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wc;e.__exportStar(JN(),t),e.__exportStar(XN(),t)}(zd)),zd}var vm;function QN(){if(vm)return Ks;vm=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.fromMiliseconds=Ks.toMiliseconds=void 0;const t=PE();function e(r){return r*t.ONE_THOUSAND}Ks.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Ks.fromMiliseconds=n,Ks}var Cm;function eT(){return Cm||(Cm=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wc;e.__exportStar(ZN(),t),e.__exportStar(QN(),t)}(jd)),jd}var Hi={},_m;function tT(){if(_m)return Hi;_m=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Hi.Watch=t,Hi.default=t,Hi}var qd={},ta={},Am;function nT(){if(Am)return ta;Am=1,Object.defineProperty(ta,"__esModule",{value:!0}),ta.IWatch=void 0;class t{}return ta.IWatch=t,ta}var Im;function rT(){return Im||(Im=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Wc.__exportStar(nT(),t)}(qd)),qd}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wc;e.__exportStar(eT(),t),e.__exportStar(tT(),t),e.__exportStar(rT(),t),e.__exportStar(PE(),t)})(J);class Di{}let sT=class extends Di{constructor(e){super()}};const Sm=J.FIVE_SECONDS,ki={pulse:"heartbeat_pulse"};let iT=class OE extends sT{constructor(e){super(e),this.events=new Gn.EventEmitter,this.interval=Sm,this.interval=(e==null?void 0:e.interval)||Sm}static async init(e){const n=new OE(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),J.toMiliseconds(this.interval))}pulse(){this.events.emit(ki.pulse)}};const oT=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,aT=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,cT=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function uT(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){lT(t);return}return e}function lT(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function fu(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!cT.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(oT.test(t)||aT.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,uT)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function dT(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function At(t,...e){try{return dT(t(...e))}catch(n){return Promise.reject(n)}}function hT(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function fT(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function ju(t){if(hT(t))return String(t);if(fT(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return ju(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const ff="base64:";function pT(t){return typeof t=="string"?t:ff+yT(t)}function gT(t){return typeof t!="string"||!t.startsWith(ff)?t:mT(t.slice(ff.length))}function mT(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function yT(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function un(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function wT(...t){return un(t.join(":"))}function pu(t){return t=un(t),t?t+":":""}function bT(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function ET(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const vT="memory",CT=()=>{const t=new Map;return{name:vT,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function _T(t={}){const e={mounts:{"":t.driver||CT()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=u=>{for(const l of e.mountpoints)if(u.startsWith(l))return{base:l,relativeKey:u.slice(l.length),driver:e.mounts[l]};return{base:"",relativeKey:u,driver:e.mounts[""]}},r=(u,l)=>e.mountpoints.filter(d=>d.startsWith(u)||l&&u.startsWith(d)).map(d=>({relativeBase:u.length>d.length?u.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(u,l)=>{if(e.watching){l=un(l);for(const d of e.watchListeners)d(u,l)}},i=async()=>{if(!e.watching){e.watching=!0;for(const u in e.mounts)e.unwatch[u]=await Nm(e.mounts[u],s,u)}},o=async()=>{if(e.watching){for(const u in e.unwatch)await e.unwatch[u]();e.unwatch={},e.watching=!1}},a=(u,l,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of u){const g=typeof p=="string",m=un(g?p:p.key),b=g?void 0:p.value,w=g||!p.options?l:{...l,...p.options},E=n(m);f(E).items.push({key:m,value:b,relativeKey:E.relativeKey,options:w})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(u,l={}){u=un(u);const{relativeKey:d,driver:h}=n(u);return At(h.hasItem,d,l)},getItem(u,l={}){u=un(u);const{relativeKey:d,driver:h}=n(u);return At(h.getItem,d,l).then(f=>fu(f))},getItems(u,l={}){return a(u,l,d=>d.driver.getItems?At(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),l).then(h=>h.map(f=>({key:wT(d.base,f.key),value:fu(f.value)}))):Promise.all(d.items.map(h=>At(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:fu(f)})))))},getItemRaw(u,l={}){u=un(u);const{relativeKey:d,driver:h}=n(u);return h.getItemRaw?At(h.getItemRaw,d,l):At(h.getItem,d,l).then(f=>gT(f))},async setItem(u,l,d={}){if(l===void 0)return c.removeItem(u);u=un(u);const{relativeKey:h,driver:f}=n(u);f.setItem&&(await At(f.setItem,h,ju(l),d),f.watch||s("update",u))},async setItems(u,l){await a(u,l,async d=>{if(d.driver.setItems)return At(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:ju(h.value),options:h.options})),l);d.driver.setItem&&await Promise.all(d.items.map(h=>At(d.driver.setItem,h.relativeKey,ju(h.value),h.options)))})},async setItemRaw(u,l,d={}){if(l===void 0)return c.removeItem(u,d);u=un(u);const{relativeKey:h,driver:f}=n(u);if(f.setItemRaw)await At(f.setItemRaw,h,l,d);else if(f.setItem)await At(f.setItem,h,pT(l),d);else return;f.watch||s("update",u)},async removeItem(u,l={}){typeof l=="boolean"&&(l={removeMeta:l}),u=un(u);const{relativeKey:d,driver:h}=n(u);h.removeItem&&(await At(h.removeItem,d,l),(l.removeMeta||l.removeMata)&&await At(h.removeItem,d+"$",l),h.watch||s("remove",u))},async getMeta(u,l={}){typeof l=="boolean"&&(l={nativeOnly:l}),u=un(u);const{relativeKey:d,driver:h}=n(u),f=Object.create(null);if(h.getMeta&&Object.assign(f,await At(h.getMeta,d,l)),!l.nativeOnly){const p=await At(h.getItem,d+"$",l).then(g=>fu(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(u,l,d={}){return this.setItem(u+"$",l,d)},removeMeta(u,l={}){return this.removeItem(u+"$",l)},async getKeys(u,l={}){var m;u=pu(u);const d=r(u,!0);let h=[];const f=[];let p=!0;for(const b of d){(m=b.driver.flags)!=null&&m.maxDepth||(p=!1);const w=await At(b.driver.getKeys,b.relativeBase,l);for(const E of w){const N=b.mountpoint+un(E);h.some(A=>N.startsWith(A))||f.push(N)}h=[b.mountpoint,...h.filter(E=>!E.startsWith(b.mountpoint))]}const g=l.maxDepth!==void 0&&!p;return f.filter(b=>(!g||bT(b,l.maxDepth))&&ET(b,u))},async clear(u,l={}){u=pu(u),await Promise.all(r(u,!1).map(async d=>{if(d.driver.clear)return At(d.driver.clear,d.relativeBase,l);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",l);return Promise.all(h.map(f=>d.driver.removeItem(f,l)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(u=>Tm(u)))},async watch(u){return await i(),e.watchListeners.push(u),async()=>{e.watchListeners=e.watchListeners.filter(l=>l!==u),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(u,l){if(u=pu(u),u&&e.mounts[u])throw new Error(`already mounted at ${u}`);return u&&(e.mountpoints.push(u),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[u]=l,e.watching&&Promise.resolve(Nm(l,s,u)).then(d=>{e.unwatch[u]=d}).catch(console.error),c},async unmount(u,l=!0){var d,h;u=pu(u),!(!u||!e.mounts[u])&&(e.watching&&u in e.unwatch&&((h=(d=e.unwatch)[u])==null||h.call(d),delete e.unwatch[u]),l&&await Tm(e.mounts[u]),e.mountpoints=e.mountpoints.filter(f=>f!==u),delete e.mounts[u])},getMount(u=""){u=un(u)+":";const l=n(u);return{driver:l.driver,base:l.base}},getMounts(u="",l={}){return u=un(u),r(u,l.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(u,l={})=>c.getKeys(u,l),get:(u,l={})=>c.getItem(u,l),set:(u,l,d={})=>c.setItem(u,l,d),has:(u,l={})=>c.hasItem(u,l),del:(u,l={})=>c.removeItem(u,l),remove:(u,l={})=>c.removeItem(u,l)};return c}function Nm(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function Tm(t){typeof t.dispose=="function"&&await At(t.dispose)}function Ui(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function RE(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=Ui(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let Wd;function Vc(){return Wd||(Wd=RE("keyval-store","keyval")),Wd}function xm(t,e=Vc()){return e("readonly",n=>Ui(n.get(t)))}function AT(t,e,n=Vc()){return n("readwrite",r=>(r.put(e,t),Ui(r.transaction)))}function IT(t,e=Vc()){return e("readwrite",n=>(n.delete(t),Ui(n.transaction)))}function ST(t=Vc()){return t("readwrite",e=>(e.clear(),Ui(e.transaction)))}function NT(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Ui(t.transaction)}function TT(t=Vc()){return t("readonly",e=>{if(e.getAllKeys)return Ui(e.getAllKeys());const n=[];return NT(e,r=>n.push(r.key)).then(()=>n)})}const xT=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),PT=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function _i(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return PT(t)}catch{return t}}function ts(t){return typeof t=="string"?t:xT(t)||""}const OT="idb-keyval";var RT=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=RE(t.dbName,t.storeName)),{name:OT,options:t,async hasItem(s){return!(typeof await xm(n(s),r)>"u")},async getItem(s){return await xm(n(s),r)??null},setItem(s,i){return AT(n(s),i,r)},removeItem(s){return IT(n(s),r)},getKeys(){return TT(r)},clear(){return ST(r)}}};const $T="WALLET_CONNECT_V2_INDEXED_DB",DT="keyvaluestorage";let kT=class{constructor(){this.indexedDb=_T({driver:RT({dbName:$T,storeName:DT})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,ts(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zu={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Vd<"u"&&Vd.localStorage?zu.exports=Vd.localStorage:typeof window<"u"&&window.localStorage?zu.exports=window.localStorage:zu.exports=new e})();function UT(t){var e;return[t[0],_i((e=t[1])!=null?e:"")]}let BT=class{constructor(){this.localStorage=zu.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(UT)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return _i(n)}async setItem(e,n){this.localStorage.setItem(e,ts(n))}async removeItem(e){this.localStorage.removeItem(e)}};const MT="wc_storage_version",Pm=1,LT=async(t,e,n)=>{const r=MT,s=await e.getItem(r);if(s&&s>=Pm){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const u=await t.getItem(a);await e.setItem(a,u),o.push(a)}}await e.setItem(r,Pm),n(e),FT(t,o)},FT=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let jT=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new BT;this.storage=e;try{const n=new kT;LT(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};function zT(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var HT=qT;function qT(t,e,n){var r=n&&n.stringify||zT,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var u="",l=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(l>=c||e[l]==null)break;d<f&&(u+=t.slice(d,f)),u+=Number(e[l]),d=f+2,f++;break;case 105:if(l>=c||e[l]==null)break;d<f&&(u+=t.slice(d,f)),u+=Math.floor(Number(e[l])),d=f+2,f++;break;case 79:case 111:case 106:if(l>=c||e[l]===void 0)break;d<f&&(u+=t.slice(d,f));var p=typeof e[l];if(p==="string"){u+="'"+e[l]+"'",d=f+2,f++;break}if(p==="function"){u+=e[l].name||"<anonymous>",d=f+2,f++;break}u+=r(e[l]),d=f+2,f++;break;case 115:if(l>=c)break;d<f&&(u+=t.slice(d,f)),u+=String(e[l]),d=f+2,f++;break;case 37:d<f&&(u+=t.slice(d,f)),u+="%",d=f+2,f++,l--;break}++l}++f}return d===-1?t:(d<h&&(u+=t.slice(d)),u)}const Om=HT;var uo=Sr;const fc=ex().console||{},WT={mapHttpRequest:gu,mapHttpResponse:gu,wrapRequestSerializer:Gd,wrapResponseSerializer:Gd,wrapErrorSerializer:Gd,req:gu,res:gu,err:ZT};function VT(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Sr(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||fc;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=VT(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=pc),Object.defineProperty(c,"levelVal",{get:l}),Object.defineProperty(c,"level",{get:d,set:h});const u={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:JT(t)};c.levels=Sr.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=pc,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=pf());function l(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,qi(u,c,"error","log"),qi(u,c,"fatal","error"),qi(u,c,"warn","error"),qi(u,c,"info","log"),qi(u,c,"debug","log"),qi(u,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const m=g.serializers;if(s&&m){var b=Object.assign({},r,m),w=t.browser.serialize===!0?Object.keys(b):s;delete p.serializers,Ql([p],w,b,this._stdErrSerialize)}function E(N){this._childLevel=(N._childLevel|0)+1,this.error=Wi(N,p,"error"),this.fatal=Wi(N,p,"fatal"),this.warn=Wi(N,p,"warn"),this.info=Wi(N,p,"info"),this.debug=Wi(N,p,"debug"),this.trace=Wi(N,p,"trace"),b&&(this.serializers=b,this._serialize=w),e&&(this._logEvent=pf([].concat(N._logEvent.bindings,p)))}return E.prototype=this,new E(this)}return c}Sr.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Sr.stdSerializers=WT;Sr.stdTimeFunctions=Object.assign({},{nullTime:$E,epochTime:DE,unixTime:XT,isoTime:QT});function qi(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?pc:s[n]?s[n]:fc[n]||fc[r]||pc,GT(t,e,n)}function GT(t,e,n){!t.transmit&&e[n]===pc||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===fc?fc:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&Ql(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,KT(this,n,o,i)):r.apply(a,o),t.transmit){const u=t.transmit.level||e.level,l=Sr.levels.values[u],d=Sr.levels.values[n];if(d<l)return;YT(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:Sr.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function KT(t,e,n,r){t._serialize&&Ql(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Sr.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?Om(s.shift(),s):void 0}else typeof i=="string"&&(i=Om(s.shift(),s));return i!==void 0&&(o.msg=i),o}function Ql(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Sr.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Wi(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function YT(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;Ql(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(u){return c.indexOf(u)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=pf(c)}function pf(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function ZT(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function JT(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?$E:DE}function gu(){return{}}function Gd(t){return t}function pc(){}function $E(){return!1}function DE(){return Date.now()}function XT(){return Math.round(Date.now()/1e3)}function QT(){return new Date(Date.now()).toISOString()}function ex(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const Gc=kl(uo),tx={level:"info"},Kc="custom_context",Bp=1e3*1024;let nx=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Rm=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new nx(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},kE=class{constructor(e,n=Bp){this.level=e??"error",this.levelValue=uo.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new Rm(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===uo.levels.values.error?console.error(e):n===uo.levels.values.warn?console.warn(e):n===uo.levels.values.debug?console.debug(e):n===uo.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(ts({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new Rm(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(ts({extraMetadata:e})),new Blob(n,{type:"application/json"})}},rx=class{constructor(e,n=Bp){this.baseChunkLogger=new kE(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},sx=class{constructor(e,n=Bp){this.baseChunkLogger=new kE(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var ix=Object.defineProperty,ox=Object.defineProperties,ax=Object.getOwnPropertyDescriptors,$m=Object.getOwnPropertySymbols,cx=Object.prototype.hasOwnProperty,ux=Object.prototype.propertyIsEnumerable,Dm=(t,e,n)=>e in t?ix(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hl=(t,e)=>{for(var n in e||(e={}))cx.call(e,n)&&Dm(t,n,e[n]);if($m)for(var n of $m(e))ux.call(e,n)&&Dm(t,n,e[n]);return t},fl=(t,e)=>ox(t,ax(e));function Mo(t){return fl(hl({},t),{level:(t==null?void 0:t.level)||tx.level})}function lx(t,e=Kc){return t[e]||""}function dx(t,e,n=Kc){return t[n]=e,t}function En(t,e=Kc){let n="";return typeof t.bindings>"u"?n=lx(t,e):n=t.bindings().context||"",n}function hx(t,e,n=Kc){const r=En(t,n);return r.trim()?`${r}/${e}`:e}function Zt(t,e,n=Kc){const r=hx(t,e,n),s=t.child({context:r});return dx(s,r,n)}function fx(t){var e,n;const r=new rx((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Gc(fl(hl({},t.opts),{level:"trace",browser:fl(hl({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function px(t){var e;const n=new sx((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Gc(fl(hl({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function Mp(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?fx(t):px(t)}var gx=Object.defineProperty,mx=(t,e,n)=>e in t?gx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,km=(t,e,n)=>mx(t,typeof e!="symbol"?e+"":e,n);let yx=class extends Di{constructor(e){super(),this.opts=e,km(this,"protocol","wc"),km(this,"version",2)}};var wx=Object.defineProperty,bx=(t,e,n)=>e in t?wx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ex=(t,e,n)=>bx(t,e+"",n);let vx=class extends Di{constructor(e,n){super(),this.core=e,this.logger=n,Ex(this,"records",new Map)}},Cx=class{constructor(e,n){this.logger=e,this.core=n}},_x=class extends Di{constructor(e,n){super(),this.relayer=e,this.logger=n}},Ax=class extends Di{constructor(e){super()}},Ix=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},Sx=class extends Di{constructor(e,n){super(),this.relayer=e,this.logger=n}},Nx=class extends Di{constructor(e,n){super(),this.core=e,this.logger=n}},Tx=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},xx=class{constructor(e,n){this.projectId=e,this.logger=n}},Px=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var Ox=Object.defineProperty,Rx=(t,e,n)=>e in t?Ox(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Um=(t,e,n)=>Rx(t,typeof e!="symbol"?e+"":e,n);let $x=class{constructor(e){this.opts=e,Um(this,"protocol","wc"),Um(this,"version",2)}},Dx=class{constructor(e){this.client=e}};function kx(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function UE(t,...e){if(!kx(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Bm(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ux(t,e){UE(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Vi=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Kd=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function Bx(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function BE(t){return typeof t=="string"&&(t=Bx(t)),UE(t),t}let Mx=class{clone(){return this._cloneInto()}};function Lx(t){const e=r=>t().update(BE(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function ME(t=32){if(Vi&&typeof Vi.getRandomValues=="function")return Vi.getRandomValues(new Uint8Array(t));if(Vi&&typeof Vi.randomBytes=="function")return Vi.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Fx(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}let jx=class extends Mx{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Kd(this.buffer)}update(e){Bm(this);const{view:n,buffer:r,blockLen:s}=this;e=BE(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Kd(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Bm(this),Ux(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Fx(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Kd(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const mu=BigInt(2**32-1),gf=BigInt(32);function LE(t,e=!1){return e?{h:Number(t&mu),l:Number(t>>gf&mu)}:{h:Number(t>>gf&mu)|0,l:Number(t&mu)|0}}function zx(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=LE(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Hx=(t,e)=>BigInt(t>>>0)<<gf|BigInt(e>>>0),qx=(t,e,n)=>t>>>n,Wx=(t,e,n)=>t<<32-n|e>>>n,Vx=(t,e,n)=>t>>>n|e<<32-n,Gx=(t,e,n)=>t<<32-n|e>>>n,Kx=(t,e,n)=>t<<64-n|e>>>n-32,Yx=(t,e,n)=>t>>>n-32|e<<64-n,Zx=(t,e)=>e,Jx=(t,e)=>t,Xx=(t,e,n)=>t<<n|e>>>32-n,Qx=(t,e,n)=>e<<n|t>>>32-n,eP=(t,e,n)=>e<<n-32|t>>>64-n,tP=(t,e,n)=>t<<n-32|e>>>64-n;function nP(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const rP=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),sP=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,iP=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),oP=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,aP=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),cP=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Se={fromBig:LE,split:zx,toBig:Hx,shrSH:qx,shrSL:Wx,rotrSH:Vx,rotrSL:Gx,rotrBH:Kx,rotrBL:Yx,rotr32H:Zx,rotr32L:Jx,rotlSH:Xx,rotlSL:Qx,rotlBH:eP,rotlBL:tP,add:nP,add3L:rP,add3H:sP,add4L:iP,add4H:oP,add5H:cP,add5L:aP},[uP,lP]=Se.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),cs=new Uint32Array(80),us=new Uint32Array(80);let dP=class extends jx{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:m}=this;return[e,n,r,s,i,o,a,c,u,l,d,h,f,p,g,m]}set(e,n,r,s,i,o,a,c,u,l,d,h,f,p,g,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=m|0}process(e,n){for(let E=0;E<16;E++,n+=4)cs[E]=e.getUint32(n),us[E]=e.getUint32(n+=4);for(let E=16;E<80;E++){const N=cs[E-15]|0,A=us[E-15]|0,R=Se.rotrSH(N,A,1)^Se.rotrSH(N,A,8)^Se.shrSH(N,A,7),O=Se.rotrSL(N,A,1)^Se.rotrSL(N,A,8)^Se.shrSL(N,A,7),M=cs[E-2]|0,I=us[E-2]|0,j=Se.rotrSH(M,I,19)^Se.rotrBH(M,I,61)^Se.shrSH(M,I,6),U=Se.rotrSL(M,I,19)^Se.rotrBL(M,I,61)^Se.shrSL(M,I,6),L=Se.add4L(O,U,us[E-7],us[E-16]),x=Se.add4H(L,R,j,cs[E-7],cs[E-16]);cs[E]=x|0,us[E]=L|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:m,Hh:b,Hl:w}=this;for(let E=0;E<80;E++){const N=Se.rotrSH(d,h,14)^Se.rotrSH(d,h,18)^Se.rotrBH(d,h,41),A=Se.rotrSL(d,h,14)^Se.rotrSL(d,h,18)^Se.rotrBL(d,h,41),R=d&f^~d&g,O=h&p^~h&m,M=Se.add5L(w,A,O,lP[E],us[E]),I=Se.add5H(M,b,N,R,uP[E],cs[E]),j=M|0,U=Se.rotrSH(r,s,28)^Se.rotrBH(r,s,34)^Se.rotrBH(r,s,39),L=Se.rotrSL(r,s,28)^Se.rotrBL(r,s,34)^Se.rotrBL(r,s,39),x=r&i^r&a^i&a,B=s&o^s&c^o&c;b=g|0,w=m|0,g=f|0,m=p|0,f=d|0,p=h|0,{h:d,l:h}=Se.add(u|0,l|0,I|0,j|0),u=a|0,l=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const v=Se.add3L(j,L,B);r=Se.add3H(v,I,U,x),s=v|0}({h:r,l:s}=Se.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Se.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Se.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=Se.add(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:h}=Se.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Se.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:m}=Se.add(this.Gh|0,this.Gl|0,g|0,m|0),{h:b,l:w}=Se.add(this.Hh|0,this.Hl|0,b|0,w|0),this.set(r,s,i,o,a,c,u,l,d,h,f,p,g,m,b,w)}roundClean(){cs.fill(0),us.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const hP=Lx(()=>new dP);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Lp=BigInt(0),FE=BigInt(1),fP=BigInt(2);function Fp(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function jp(t){if(!Fp(t))throw new Error("Uint8Array expected")}function Yd(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const pP=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function zp(t){jp(t);let e="";for(let n=0;n<t.length;n++)e+=pP[t[n]];return e}function jE(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Lp:BigInt("0x"+t)}const Lr={_0:48,_9:57,A:65,F:70,a:97,f:102};function Mm(t){if(t>=Lr._0&&t<=Lr._9)return t-Lr._0;if(t>=Lr.A&&t<=Lr.F)return t-(Lr.A-10);if(t>=Lr.a&&t<=Lr.f)return t-(Lr.a-10)}function zE(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Mm(t.charCodeAt(i)),a=Mm(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function gP(t){return jE(zp(t))}function Hu(t){return jp(t),jE(zp(Uint8Array.from(t).reverse()))}function HE(t,e){return zE(t.toString(16).padStart(e*2,"0"))}function mf(t,e){return HE(t,e).reverse()}function Fr(t,e,n){let r;if(typeof e=="string")try{r=zE(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Fp(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function Lm(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];jp(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const Zd=t=>typeof t=="bigint"&&Lp<=t;function mP(t,e,n){return Zd(t)&&Zd(e)&&Zd(n)&&e<=t&&t<n}function na(t,e,n,r){if(!mP(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function yP(t){let e;for(e=0;t>Lp;t>>=FE,e+=1);return e}const wP=t=>(fP<<BigInt(t-1))-FE,bP={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Fp(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Hp(t,e,n={}){const r=(s,i,o)=>{const a=bP[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function Fm(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Tt=BigInt(0),ht=BigInt(1),ni=BigInt(2),EP=BigInt(3),yf=BigInt(4),jm=BigInt(5),zm=BigInt(8);function bt(t,e){const n=t%e;return n>=Tt?n:e+n}function vP(t,e,n){if(e<Tt)throw new Error("invalid exponent, negatives unsupported");if(n<=Tt)throw new Error("invalid modulus");if(n===ht)return Tt;let r=ht;for(;e>Tt;)e&ht&&(r=r*t%n),t=t*t%n,e>>=ht;return r}function fr(t,e,n){let r=t;for(;e-- >Tt;)r*=r,r%=n;return r}function Hm(t,e){if(t===Tt)throw new Error("invert: expected non-zero number");if(e<=Tt)throw new Error("invert: expected positive modulus, got "+e);let n=bt(t,e),r=e,s=Tt,i=ht;for(;n!==Tt;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==ht)throw new Error("invert: does not exist");return bt(s,e)}function CP(t){const e=(t-ht)/ni;let n,r,s;for(n=t-ht,r=0;n%ni===Tt;n/=ni,r++);for(s=ni;s<t&&vP(s,e,t)!==t-ht;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+ht)/yf;return function(a,c){const u=a.pow(c,o);if(!a.eql(a.sqr(u),c))throw new Error("Cannot find square root");return u}}const i=(n+ht)/ni;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,u=o.pow(o.mul(o.ONE,s),n),l=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(u,ht<<BigInt(c-h-1));u=o.sqr(f),l=o.mul(l,f),d=o.mul(d,u),c=h}return l}}function _P(t){if(t%yf===EP){const e=(t+ht)/yf;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%zm===jm){const e=(t-jm)/zm;return function(n,r){const s=n.mul(r,ni),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,ni),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return CP(t)}const AP=(t,e)=>(bt(t,e)&ht)===ht,IP=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function SP(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=IP.reduce((r,s)=>(r[s]="function",r),e);return Hp(t,n)}function NP(t,e,n){if(n<Tt)throw new Error("invalid exponent, negatives unsupported");if(n===Tt)return t.ONE;if(n===ht)return e;let r=t.ONE,s=e;for(;n>Tt;)n&ht&&(r=t.mul(r,s)),s=t.sqr(s),n>>=ht;return r}function TP(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function qE(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function WE(t,e,n=!1,r={}){if(t<=Tt)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=qE(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:wP(s),ZERO:Tt,ONE:ht,create:c=>bt(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Tt<=c&&c<t},is0:c=>c===Tt,isOdd:c=>(c&ht)===ht,neg:c=>bt(-c,t),eql:(c,u)=>c===u,sqr:c=>bt(c*c,t),add:(c,u)=>bt(c+u,t),sub:(c,u)=>bt(c-u,t),mul:(c,u)=>bt(c*u,t),pow:(c,u)=>NP(a,c,u),div:(c,u)=>bt(c*Hm(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Hm(c,t),sqrt:r.sqrt||(c=>(o||(o=_P(t)),o(a,c))),invertBatch:c=>TP(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>n?mf(c,i):HE(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?Hu(c):gP(c)}});return Object.freeze(a)}const qm=BigInt(0),yu=BigInt(1);function Jd(t,e){const n=e.negate();return t?n:e}function VE(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Xd(t,e){VE(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function xP(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function PP(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Qd=new WeakMap,GE=new WeakMap;function eh(t){return GE.get(t)||1}function OP(t,e){return{constTimeNegate:Jd,hasPrecomputes(n){return eh(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>qm;)r&yu&&(s=s.add(i)),i=i.double(),r>>=yu;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Xd(r,e),o=[];let a=n,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=Xd(n,e);let a=t.ZERO,c=t.BASE;const u=BigInt(2**n-1),l=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&u);s>>=d,p>o&&(p-=l,s+=yu);const g=f,m=f+Math.abs(p)-1,b=h%2!==0,w=p<0;p===0?c=c.add(Jd(b,r[g])):a=a.add(Jd(w,r[m]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=Xd(n,e),c=BigInt(2**n-1),u=2**n,l=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===qm)break;let f=Number(s&c);if(s>>=l,f>a&&(f-=u,s+=yu),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=Qd.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&Qd.set(r,s(i))),i},wNAFCached(n,r,s){const i=eh(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=eh(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){VE(r,e),GE.set(n,r),Qd.delete(n)}}}function RP(t,e,n,r){if(xP(n,t),PP(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=yP(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),u=Math.floor((e.BITS-1)/o)*o;let l=s;for(let d=u;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(l=l.add(h),d!==0)for(let f=0;f<o;f++)l=l.double()}return l}function $P(t){return SP(t.Fp),Hp(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...qE(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Zn=BigInt(0),sn=BigInt(1),wu=BigInt(2),DP=BigInt(8),kP={zip215:!0};function UP(t){const e=$P(t);return Hp(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function BP(t){const e=UP(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,u=wu<<BigInt(a*8)-sn,l=n.create,d=WE(e.n,e.nBitLength),h=e.uvRatio||((v,C)=>{try{return{isValid:!0,value:n.sqrt(v*n.inv(C))}}catch{return{isValid:!1,value:Zn}}}),f=e.adjustScalarBytes||(v=>v),p=e.domain||((v,C,P)=>{if(Yd("phflag",P),C.length||P)throw new Error("Contexts/pre-hash are not supported");return v});function g(v,C){na("coordinate "+v,C,Zn,u)}function m(v){if(!(v instanceof E))throw new Error("ExtendedPoint expected")}const b=Fm((v,C)=>{const{ex:P,ey:D,ez:S}=v,$=v.is0();C==null&&(C=$?DP:n.inv(S));const T=l(P*C),k=l(D*C),z=l(S*C);if($)return{x:Zn,y:sn};if(z!==sn)throw new Error("invZ was invalid");return{x:T,y:k}}),w=Fm(v=>{const{a:C,d:P}=e;if(v.is0())throw new Error("bad point: ZERO");const{ex:D,ey:S,ez:$,et:T}=v,k=l(D*D),z=l(S*S),H=l($*$),Z=l(H*H),K=l(k*C),we=l(H*l(K+z)),Ae=l(Z+l(P*l(k*z)));if(we!==Ae)throw new Error("bad point: equation left != right (1)");const Ee=l(D*S),et=l($*T);if(Ee!==et)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(C,P,D,S){this.ex=C,this.ey=P,this.ez=D,this.et=S,g("x",C),g("y",P),g("z",D),g("t",S),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(C){if(C instanceof E)throw new Error("extended point not allowed");const{x:P,y:D}=C||{};return g("x",P),g("y",D),new E(P,D,sn,l(P*D))}static normalizeZ(C){const P=n.invertBatch(C.map(D=>D.ez));return C.map((D,S)=>D.toAffine(P[S])).map(E.fromAffine)}static msm(C,P){return RP(E,d,C,P)}_setWindowSize(C){R.setWindowSize(this,C)}assertValidity(){w(this)}equals(C){m(C);const{ex:P,ey:D,ez:S}=this,{ex:$,ey:T,ez:k}=C,z=l(P*k),H=l($*S),Z=l(D*k),K=l(T*S);return z===H&&Z===K}is0(){return this.equals(E.ZERO)}negate(){return new E(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:C}=e,{ex:P,ey:D,ez:S}=this,$=l(P*P),T=l(D*D),k=l(wu*l(S*S)),z=l(C*$),H=P+D,Z=l(l(H*H)-$-T),K=z+T,we=K-k,Ae=z-T,Ee=l(Z*we),et=l(K*Ae),xt=l(Z*Ae),Vs=l(we*K);return new E(Ee,et,Vs,xt)}add(C){m(C);const{a:P,d:D}=e,{ex:S,ey:$,ez:T,et:k}=this,{ex:z,ey:H,ez:Z,et:K}=C;if(P===BigInt(-1)){const _g=l(($-S)*(H+z)),Ag=l(($+S)*(H-z)),Ad=l(Ag-_g);if(Ad===Zn)return this.double();const Ig=l(T*wu*K),Sg=l(k*wu*Z),Ng=Sg+Ig,Tg=Ag+_g,xg=Sg-Ig,t_=l(Ng*Ad),n_=l(Tg*xg),r_=l(Ng*xg),s_=l(Ad*Tg);return new E(t_,n_,s_,r_)}const we=l(S*z),Ae=l($*H),Ee=l(k*D*K),et=l(T*Z),xt=l((S+$)*(z+H)-we-Ae),Vs=et-Ee,iu=et+Ee,Fi=l(Ae-P*we),_d=l(xt*Vs),XC=l(iu*Fi),QC=l(xt*Fi),e_=l(Vs*iu);return new E(_d,XC,e_,QC)}subtract(C){return this.add(C.negate())}wNAF(C){return R.wNAFCached(this,C,E.normalizeZ)}multiply(C){const P=C;na("scalar",P,sn,r);const{p:D,f:S}=this.wNAF(P);return E.normalizeZ([D,S])[0]}multiplyUnsafe(C,P=E.ZERO){const D=C;return na("scalar",D,Zn,r),D===Zn?A:this.is0()||D===sn?this:R.wNAFCachedUnsafe(this,D,E.normalizeZ,P)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return R.unsafeLadder(this,r).is0()}toAffine(C){return b(this,C)}clearCofactor(){const{h:C}=e;return C===sn?this:this.multiplyUnsafe(C)}static fromHex(C,P=!1){const{d:D,a:S}=e,$=n.BYTES;C=Fr("pointHex",C,$),Yd("zip215",P);const T=C.slice(),k=C[$-1];T[$-1]=k&-129;const z=Hu(T),H=P?u:n.ORDER;na("pointHex.y",z,Zn,H);const Z=l(z*z),K=l(Z-sn),we=l(D*Z-S);let{isValid:Ae,value:Ee}=h(K,we);if(!Ae)throw new Error("Point.fromHex: invalid y coordinate");const et=(Ee&sn)===sn,xt=(k&128)!==0;if(!P&&Ee===Zn&&xt)throw new Error("Point.fromHex: x=0 and x_0=1");return xt!==et&&(Ee=l(-Ee)),E.fromAffine({x:Ee,y:z})}static fromPrivateKey(C){return I(C).point}toRawBytes(){const{x:C,y:P}=this.toAffine(),D=mf(P,n.BYTES);return D[D.length-1]|=C&sn?128:0,D}toHex(){return zp(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,sn,l(e.Gx*e.Gy)),E.ZERO=new E(Zn,sn,sn,Zn);const{BASE:N,ZERO:A}=E,R=OP(E,a*8);function O(v){return bt(v,r)}function M(v){return O(Hu(v))}function I(v){const C=n.BYTES;v=Fr("private key",v,C);const P=Fr("hashed private key",i(v),2*C),D=f(P.slice(0,C)),S=P.slice(C,2*C),$=M(D),T=N.multiply($),k=T.toRawBytes();return{head:D,prefix:S,scalar:$,point:T,pointBytes:k}}function j(v){return I(v).pointBytes}function U(v=new Uint8Array,...C){const P=Lm(...C);return M(i(p(P,Fr("context",v),!!s)))}function L(v,C,P={}){v=Fr("message",v),s&&(v=s(v));const{prefix:D,scalar:S,pointBytes:$}=I(C),T=U(P.context,D,v),k=N.multiply(T).toRawBytes(),z=U(P.context,k,$,v),H=O(T+z*S);na("signature.s",H,Zn,r);const Z=Lm(k,mf(H,n.BYTES));return Fr("result",Z,n.BYTES*2)}const x=kP;function B(v,C,P,D=x){const{context:S,zip215:$}=D,T=n.BYTES;v=Fr("signature",v,2*T),C=Fr("message",C),P=Fr("publicKey",P,T),$!==void 0&&Yd("zip215",$),s&&(C=s(C));const k=Hu(v.slice(T,2*T));let z,H,Z;try{z=E.fromHex(P,$),H=E.fromHex(v.slice(0,T),$),Z=N.multiplyUnsafe(k)}catch{return!1}if(!$&&z.isSmallOrder())return!1;const K=U(S,H.toRawBytes(),z.toRawBytes(),C);return H.add(z.multiplyUnsafe(K)).subtract(Z).clearCofactor().equals(E.ZERO)}return N._setWindowSize(8),{CURVE:e,getPublicKey:j,sign:L,verify:B,ExtendedPoint:E,utils:{getExtendedPublicKey:I,randomPrivateKey:()=>o(n.BYTES),precompute(v=8,C=E.BASE){return C._setWindowSize(v),C.multiply(BigInt(3)),C}}}}BigInt(0),BigInt(1);const qp=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Wm=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const MP=BigInt(1),Vm=BigInt(2);BigInt(3);const LP=BigInt(5),FP=BigInt(8);function jP(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=qp,o=t*t%i*t%i,a=fr(o,Vm,i)*o%i,c=fr(a,MP,i)*t%i,u=fr(c,LP,i)*c%i,l=fr(u,e,i)*u%i,d=fr(l,n,i)*l%i,h=fr(d,r,i)*d%i,f=fr(h,s,i)*h%i,p=fr(f,s,i)*h%i,g=fr(p,e,i)*u%i;return{pow_p_5_8:fr(g,Vm,i)*t%i,b2:o}}function zP(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function HP(t,e){const n=qp,r=bt(e*e*e,n),s=bt(r*r*e,n),i=jP(t*s).pow_p_5_8;let o=bt(t*r*i,n);const a=bt(e*o*o,n),c=o,u=bt(o*Wm,n),l=a===t,d=a===bt(-t,n),h=a===bt(-t*Wm,n);return l&&(o=c),(d||h)&&(o=u),AP(o,n)&&(o=bt(-o,n)),{isValid:l||d,value:o}}const qP=WE(qp,void 0,!0),WP={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:qP,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:FP,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:hP,randomBytes:ME,adjustScalarBytes:zP,uvRatio:HP},KE=BP(WP),VP="EdDSA",GP="JWT",pl=".",ed="base64url",YE="utf8",ZE="utf8",KP=":",YP="did",ZP="key",Gm="base58btc",JP="z",XP="K36",QP=32;function Wp(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function JE(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Wp(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function XE(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=JE(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return Wp(n)}function eO(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,b=0,w=p.length;b!==w&&p[b]===0;)b++,g++;for(var E=(w-b)*l+1>>>0,N=new Uint8Array(E);b!==w;){for(var A=p[b],R=0,O=E-1;(A!==0||R<m)&&O!==-1;O--,R++)A+=256*N[O]>>>0,N[O]=A%a>>>0,A=A/a>>>0;if(A!==0)throw new Error("Non-zero carry");m=R,b++}for(var M=E-m;M!==E&&N[M]===0;)M++;for(var I=c.repeat(g);M<E;++M)I+=t.charAt(N[M]);return I}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,b=0;p[g]===c;)m++,g++;for(var w=(p.length-g)*u+1>>>0,E=new Uint8Array(w);p[g];){var N=n[p.charCodeAt(g)];if(N===255)return;for(var A=0,R=w-1;(N!==0||A<b)&&R!==-1;R--,A++)N+=a*E[R]>>>0,E[R]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");b=A,g++}if(p[g]!==" "){for(var O=w-b;O!==w&&E[O]===0;)O++;for(var M=new Uint8Array(m+(w-O)),I=m;O!==w;)M[I++]=E[O++];return M}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var tO=eO,nO=tO;const QE=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},rO=t=>new TextEncoder().encode(t),sO=t=>new TextDecoder().decode(t);let iO=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},oO=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ev(this,e)}},aO=class{constructor(e){this.decoders=e}or(e){return ev(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const ev=(t,e)=>new aO({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let cO=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new iO(e,n,r),this.decoder=new oO(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const td=({name:t,prefix:e,encode:n,decode:r})=>new cO(t,e,n,r),Yc=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=nO(n,e);return td({prefix:t,name:e,encode:r,decode:i=>QE(s(i))})},uO=(t,e,n,r)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},lO=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Mt=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>td({prefix:e,name:t,encode(s){return lO(s,r,n)},decode(s){return uO(s,r,n,t)}}),dO=td({prefix:"\0",name:"identity",encode:t=>sO(t),decode:t=>rO(t)});var hO=Object.freeze({__proto__:null,identity:dO});const fO=Mt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var pO=Object.freeze({__proto__:null,base2:fO});const gO=Mt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var mO=Object.freeze({__proto__:null,base8:gO});const yO=Yc({prefix:"9",name:"base10",alphabet:"0123456789"});var wO=Object.freeze({__proto__:null,base10:yO});const bO=Mt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),EO=Mt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var vO=Object.freeze({__proto__:null,base16:bO,base16upper:EO});const CO=Mt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),_O=Mt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),AO=Mt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),IO=Mt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),SO=Mt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),NO=Mt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),TO=Mt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),xO=Mt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),PO=Mt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var OO=Object.freeze({__proto__:null,base32:CO,base32upper:_O,base32pad:AO,base32padupper:IO,base32hex:SO,base32hexupper:NO,base32hexpad:TO,base32hexpadupper:xO,base32z:PO});const RO=Yc({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),$O=Yc({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var DO=Object.freeze({__proto__:null,base36:RO,base36upper:$O});const kO=Yc({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),UO=Yc({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var BO=Object.freeze({__proto__:null,base58btc:kO,base58flickr:UO});const MO=Mt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),LO=Mt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),FO=Mt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),jO=Mt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var zO=Object.freeze({__proto__:null,base64:MO,base64pad:LO,base64url:FO,base64urlpad:jO});const tv=Array.from(""),HO=tv.reduce((t,e,n)=>(t[n]=e,t),[]),qO=tv.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function WO(t){return t.reduce((e,n)=>(e+=HO[n],e),"")}function VO(t){const e=[];for(const n of t){const r=qO[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const GO=td({prefix:"",name:"base256emoji",encode:WO,decode:VO});var KO=Object.freeze({__proto__:null,base256emoji:GO}),YO=nv,Km=128,ZO=-128,JO=Math.pow(2,31);function nv(t,e,n){e=e||[],n=n||0;for(var r=n;t>=JO;)e[n++]=t&255|Km,t/=128;for(;t&ZO;)e[n++]=t&255|Km,t>>>=7;return e[n]=t|0,nv.bytes=n-r+1,e}var XO=wf,QO=128,Ym=127;function wf(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw wf.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&Ym)<<s:(o&Ym)*Math.pow(2,s),s+=7}while(o>=QO);return wf.bytes=i-r,n}var eR=Math.pow(2,7),tR=Math.pow(2,14),nR=Math.pow(2,21),rR=Math.pow(2,28),sR=Math.pow(2,35),iR=Math.pow(2,42),oR=Math.pow(2,49),aR=Math.pow(2,56),cR=Math.pow(2,63),uR=function(t){return t<eR?1:t<tR?2:t<nR?3:t<rR?4:t<sR?5:t<iR?6:t<oR?7:t<aR?8:t<cR?9:10},lR={encode:YO,decode:XO,encodingLength:uR},rv=lR;const Zm=(t,e,n=0)=>(rv.encode(t,e,n),e),Jm=t=>rv.encodingLength(t),bf=(t,e)=>{const n=e.byteLength,r=Jm(t),s=r+Jm(n),i=new Uint8Array(s+n);return Zm(t,i,0),Zm(n,i,r),i.set(e,s),new dR(t,n,e,i)};let dR=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const sv=({name:t,code:e,encode:n})=>new hR(t,e,n);let hR=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?bf(this.code,n):n.then(r=>bf(this.code,r))}else throw Error("Unknown type, must be binary type")}};const iv=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),fR=sv({name:"sha2-256",code:18,encode:iv("SHA-256")}),pR=sv({name:"sha2-512",code:19,encode:iv("SHA-512")});var gR=Object.freeze({__proto__:null,sha256:fR,sha512:pR});const ov=0,mR="identity",av=QE,yR=t=>bf(ov,av(t)),wR={code:ov,name:mR,encode:av,digest:yR};var bR=Object.freeze({__proto__:null,identity:wR});new TextEncoder,new TextDecoder;const Xm={...hO,...pO,...mO,...wO,...vO,...OO,...DO,...BO,...zO,...KO};({...gR,...bR});function cv(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Qm=cv("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),th=cv("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=JE(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),uv={utf8:Qm,"utf-8":Qm,hex:Xm.base16,latin1:th,ascii:th,binary:th,...Xm};function nd(t,e="utf8"){const n=uv[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function Lo(t,e="utf8"){const n=uv[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Wp(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function ey(t){return _i(nd(Lo(t,ed),YE))}function gl(t){return nd(Lo(ts(t),YE),ed)}function lv(t){const e=Lo(XP,Gm),n=JP+nd(XE([e,t]),Gm);return[YP,ZP,n].join(KP)}function ER(t){return nd(t,ed)}function vR(t){return Lo(t,ed)}function CR(t){return Lo([gl(t.header),gl(t.payload)].join(pl),ZE)}function _R(t){return[gl(t.header),gl(t.payload),ER(t.signature)].join(pl)}function Ef(t){const e=t.split(pl),n=ey(e[0]),r=ey(e[1]),s=vR(e[2]),i=Lo(e.slice(0,2).join(pl),ZE);return{header:n,payload:r,signature:s,data:i}}function ty(t=ME(QP)){const e=KE.getPublicKey(t);return{secretKey:XE([t,e]),publicKey:e}}async function AR(t,e,n,r,s=J.fromMiliseconds(Date.now())){const i={alg:VP,typ:GP},o=lv(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},u=CR({header:i,payload:c}),l=KE.sign(u,r.secretKey.slice(0,32));return _R({header:i,payload:c,signature:l})}var ny=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},IR=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),SR=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),NR=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),TR=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),xR=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),PR=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,OR=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ry=3,RR=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",PR]],sy=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function $R(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new xR:typeof navigator<"u"?kR(navigator.userAgent):BR()}function DR(t){return t!==""&&RR.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function kR(t){var e=DR(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new TR;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<ry&&(s=ny(ny([],s,!0),MR(ry-s.length),!0)):s=[];var i=s.join("."),o=UR(t),a=OR.exec(t);return a&&a[1]?new NR(n,i,o,a[1]):new IR(n,i,o)}function UR(t){for(var e=0,n=sy.length;e<n;e++){var r=sy[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function BR(){var t=typeof process<"u"&&process.version;return t?new SR(process.version.slice(1)):null}function MR(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Qe={};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.getLocalStorage=Qe.getLocalStorageOrThrow=Qe.getCrypto=Qe.getCryptoOrThrow=dv=Qe.getLocation=Qe.getLocationOrThrow=Vp=Qe.getNavigator=Qe.getNavigatorOrThrow=Ai=Qe.getDocument=Qe.getDocumentOrThrow=Qe.getFromWindowOrThrow=Qe.getFromWindow=void 0;function Bi(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Qe.getFromWindow=Bi;function Fo(t){const e=Bi(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Qe.getFromWindowOrThrow=Fo;function LR(){return Fo("document")}Qe.getDocumentOrThrow=LR;function FR(){return Bi("document")}var Ai=Qe.getDocument=FR;function jR(){return Fo("navigator")}Qe.getNavigatorOrThrow=jR;function zR(){return Bi("navigator")}var Vp=Qe.getNavigator=zR;function HR(){return Fo("location")}Qe.getLocationOrThrow=HR;function qR(){return Bi("location")}var dv=Qe.getLocation=qR;function WR(){return Fo("crypto")}Qe.getCryptoOrThrow=WR;function VR(){return Bi("crypto")}Qe.getCrypto=VR;function GR(){return Fo("localStorage")}Qe.getLocalStorageOrThrow=GR;function KR(){return Bi("localStorage")}Qe.getLocalStorage=KR;var Gp={};Object.defineProperty(Gp,"__esModule",{value:!0});var hv=Gp.getWindowMetadata=void 0;const iy=Qe;function YR(){let t,e;try{t=iy.getDocumentOrThrow(),e=iy.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const m=p.getAttribute("href");if(m)if(m.toLowerCase().indexOf("https:")===-1&&m.toLowerCase().indexOf("http:")===-1&&m.indexOf("//")!==0){let b=e.protocol+"//"+e.host;if(m.indexOf("/")===0)b+=m;else{const w=e.pathname.split("/");w.pop();const E=w.join("/");b+=E+"/"+m}h.push(b)}else if(m.indexOf("//")===0){const b=e.protocol+m;h.push(b)}else h.push(m)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(m=>p.getAttribute(m)).filter(m=>m?d.includes(m):!1);if(g.length&&g){const m=p.getAttribute("content");if(m)return m}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,u=n();return{description:a,url:c,icons:u,name:o}}hv=Gp.getWindowMetadata=YR;function gc(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function vf(t){return gc(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const fv="2.31.0";let ra={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${fv}`},rd=class Cf extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Cf?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Cf&&n.cause.docsPath||n.docsPath,i=(a=ra.getDocsUrl)==null?void 0:a.call(ra,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...ra.version?[`Version: ${ra.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=fv}walk(e){return pv(this,e)}};function pv(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?pv(t.cause,e):e?null:t}class gv extends rd{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function jo(t,{dir:e,size:n=32}={}){return typeof t=="string"?ZR(t,{dir:e,size:n}):JR(t,{dir:e,size:n})}function ZR(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new gv({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function JR(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new gv({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class XR extends rd{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class QR extends rd{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function zo(t,{size:e}){if(vf(t)>e)throw new QR({givenSize:vf(t),maxSize:e})}function _f(t,e={}){const{signed:n}=e;e.size&&zo(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function e3(t,e={}){return Number(_f(t,e))}const t3=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Af(t,e={}){return typeof t=="number"||typeof t=="bigint"?yv(t,e):typeof t=="string"?s3(t,e):typeof t=="boolean"?n3(t,e):mv(t,e)}function n3(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(zo(n,{size:e.size}),jo(n,{size:e.size})):n}function mv(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=t3[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(zo(r,{size:e.size}),jo(r,{dir:"right",size:e.size})):r}function yv(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new XR({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?jo(a,{size:r}):a}const r3=new TextEncoder;function s3(t,e={}){const n=r3.encode(t);return mv(n,e)}const i3=new TextEncoder;function o3(t,e={}){return typeof t=="number"||typeof t=="bigint"?c3(t,e):typeof t=="boolean"?a3(t,e):gc(t)?wv(t,e):bv(t,e)}function a3(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(zo(n,{size:e.size}),jo(n,{size:e.size})):n}const jr={zero:48,nine:57,A:65,F:70,a:97,f:102};function oy(t){if(t>=jr.zero&&t<=jr.nine)return t-jr.zero;if(t>=jr.A&&t<=jr.F)return t-(jr.A-10);if(t>=jr.a&&t<=jr.f)return t-(jr.a-10)}function wv(t,e={}){let n=t;e.size&&(zo(n,{size:e.size}),n=jo(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=oy(r.charCodeAt(a++)),u=oy(r.charCodeAt(a++));if(c===void 0||u===void 0)throw new rd(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+u}return i}function c3(t,e){const n=yv(t,e);return wv(n)}function bv(t,e={}){const n=i3.encode(t);return typeof e.size=="number"?(zo(n,{size:e.size}),jo(n,{dir:"right",size:e.size})):n}const u3=BigInt(0),sa=BigInt(1),l3=BigInt(2),d3=BigInt(7),h3=BigInt(256),f3=BigInt(113),Ev=[],vv=[],Cv=[];for(let t=0,e=sa,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Ev.push(2*(5*r+n)),vv.push((t+1)*(t+2)/2%64);let s=u3;for(let i=0;i<7;i++)e=(e<<sa^(e>>d3)*f3)%h3,e&l3&&(s^=sa<<(sa<<BigInt(i))-sa);Cv.push(s)}const _v=g_(Cv,!0),p3=_v[0],g3=_v[1],ay=(t,e,n)=>n>32?w_(t,e,n):m_(t,e,n),cy=(t,e,n)=>n>32?b_(t,e,n):y_(t,e,n);function m3(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],l=n[c+1],d=ay(u,l,1)^n[a],h=cy(u,l,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=vv[o],c=ay(s,i,a),u=cy(s,i,a),l=Ev[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=p3[r],t[1]^=g3[r]}B0(n)}class Kp extends l_{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Pg(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=d_(this.state)}clone(){return this._cloneInto()}keccak(){Og(this.state32),m3(this.state32,this.rounds),Og(this.state32),this.posOut=0,this.pos=0}update(e){Rg(this),e=h_(e),$g(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Rg(this,!1),$g(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Pg(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(f_(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,B0(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Kp(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const y3=(t,e,n)=>u_(()=>new Kp(e,t,n)),w3=y3(1,136,256/8);function Av(t,e){const n=e||"hex",r=w3(gc(t,{strict:!1})?o3(t):t);return n==="bytes"?r:Af(r)}class b3 extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const nh=new b3(8192);function E3(t,e){if(nh.has(`${t}.${e}`))return nh.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=Av(bv(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return nh.set(`${t}.${e}`,i),i}function v3(t){const e=Av(`0x${t.substring(4)}`).substring(26);return E3(`0x${e}`)}async function C3({hash:t,signature:e}){const n=gc(t)?t:Af(t),{secp256k1:r}=await Kt(async()=>{const{secp256k1:o}=await import("./DIXxOT1e.js");return{secp256k1:o}},__vite__mapDeps([5,6,1]),import.meta.url);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:u,s:l,v:d,yParity:h}=e,f=Number(h??d),p=uy(f);return new r.Signature(_f(u),_f(l)).addRecoveryBit(p)}const o=gc(e)?e:Af(e);if(vf(o)!==65)throw new Error("invalid signature length");const a=e3(`0x${o.slice(130)}`),c=uy(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function uy(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function _3({hash:t,signature:e}){return v3(await C3({hash:t,signature:e}))}function A3(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let u=0;u<e.length;u++)e[u]=255;for(let u=0;u<t.length;u++){const l=t.charAt(u),d=l.charCodeAt(0);if(e[d]!==255)throw new TypeError(l+" is ambiguous");e[d]=u}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let l=0,d=0,h=0;const f=u.length;for(;h!==f&&u[h]===0;)h++,l++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let w=u[h],E=0;for(let N=p-1;(w!==0||E<d)&&N!==-1;N--,E++)w+=256*g[N]>>>0,g[N]=w%n>>>0,w=w/n>>>0;if(w!==0)throw new Error("Non-zero carry");d=E,h++}let m=p-d;for(;m!==p&&g[m]===0;)m++;let b=r.repeat(l);for(;m<p;++m)b+=t.charAt(g[m]);return b}function a(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let l=0,d=0,h=0;for(;u[l]===r;)d++,l++;const f=(u.length-l)*s+1>>>0,p=new Uint8Array(f);for(;l<u.length;){const w=u.charCodeAt(l);if(w>255)return;let E=e[w];if(E===255)return;let N=0;for(let A=f-1;(E!==0||N<h)&&A!==-1;A--,N++)E+=n*p[A]>>>0,p[A]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");h=N,l++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const m=new Uint8Array(d+(f-g));let b=d;for(;g!==f;)m[b++]=p[g++];return m}function c(u){const l=a(u);if(l)return l;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var I3="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Ho=A3(I3);function S3(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if(s&4294967168)if(!(s&4294965248))n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}s&4294901760?n+=4:n+=3}else{n++;continue}}return n}function N3(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let o=t.charCodeAt(i++);if(o&4294967168)if(!(o&4294965248))e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128):(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128)}else{e[s++]=o;continue}e[s++]=o&63|128}}const T3=new TextEncoder,x3=50;function P3(t,e,n){T3.encodeInto(t,e.subarray(n))}function O3(t,e,n){t.length>x3?P3(t,e,n):N3(t,e,n)}const R3=4096;function Iv(t,e,n){let r=e;const s=r+n,i=[];let o="";for(;r<s;){const a=t[r++];if(!(a&128))i.push(a);else if((a&224)===192){const c=t[r++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[r++]&63,u=t[r++]&63;i.push((a&31)<<12|c<<6|u)}else if((a&248)===240){const c=t[r++]&63,u=t[r++]&63,l=t[r++]&63;let d=(a&7)<<18|c<<12|u<<6|l;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=R3&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const $3=new TextDecoder,D3=200;function k3(t,e,n){const r=t.subarray(e,e+n);return $3.decode(r)}function U3(t,e,n){return n>D3?k3(t,e,n):Iv(t,e,n)}class bu{constructor(e,n){this.type=e,this.data=n}}class An extends Error{constructor(e){super(e);const n=Object.create(An.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:An.name})}}const ia=4294967295;function B3(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function Sv(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function Nv(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function M3(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const L3=-1,F3=4294967296-1,j3=17179869184-1;function z3({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=j3)if(e===0&&t<=F3){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),Sv(r,4,t),n}}function H3(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function q3(t){if(t instanceof Date){const e=H3(t);return z3(e)}else return null}function W3(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=Nv(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new An(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function V3(t){const e=W3(t);return new Date(e.sec*1e3+e.nsec/1e6)}const G3={type:L3,encode:q3,decode:V3};class ml{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(G3)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=-1-r;return new bu(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=r;return new bu(o,i)}}}return e instanceof bu?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new bu(n,e)}}ml.defaultCodec=new ml;function K3(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function If(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):K3(t)?new Uint8Array(t):Uint8Array.from(t)}const Y3=100,Z3=2048;let J3=class Tv{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??ml.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??Y3,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??Z3,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new Tv({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=S3(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),O3(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=If(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),B3(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),Sv(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function X3(t,e){return new J3(e).encodeSharedRef(t)}function rh(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const Q3=16,e5=16;class t5{constructor(e=Q3,n=e5){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=Iv(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,i),i}}const Sf="array",xa="map_key",xv="map_value",n5=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new An("The type of key must be string or number but "+typeof t)};class r5{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=Sf,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=xa,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===Sf){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===xa||e.type===xv){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const oa=-1,Yp=new DataView(new ArrayBuffer(0)),s5=new Uint8Array(Yp.buffer);try{Yp.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const ly=new RangeError("Insufficient data"),i5=new t5;let o5=class Pv{constructor(e){this.totalPos=0,this.pos=0,this.view=Yp,this.bytes=s5,this.headByte=oa,this.stack=new r5,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??ml.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??ia,this.maxBinLength=(e==null?void 0:e.maxBinLength)??ia,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??ia,this.maxMapLength=(e==null?void 0:e.maxMapLength)??ia,this.maxExtLength=(e==null?void 0:e.maxExtLength)??ia,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:i5,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??n5}clone(){return new Pv({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=oa,this.stack.reset()}setBuffer(e){const n=If(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===oa&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=If(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${rh(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new An(`Unrecognized type byte: ${rh(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===Sf)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===xa){if(n==="__proto__")throw new An("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=xv;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=xa;continue e}}return n}}readHeadByte(){return this.headByte===oa&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=oa}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new An(`Unrecognized array type byte: ${rh(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new An(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new An(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){var i;if(e>this.maxStrLength)throw new An(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw ly;const r=this.pos+n;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=U3(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===xa:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new An(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw ly;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new An(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=M3(this.view,this.pos);return this.pos+=8,e}readI64(){const e=Nv(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function a5(t,e){return new o5(e).decode(t)}function Zp(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Ov(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Zp(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Pa(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=Ov(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return Zp(n)}function c5(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,b=0,w=p.length;b!==w&&p[b]===0;)b++,g++;for(var E=(w-b)*l+1>>>0,N=new Uint8Array(E);b!==w;){for(var A=p[b],R=0,O=E-1;(A!==0||R<m)&&O!==-1;O--,R++)A+=256*N[O]>>>0,N[O]=A%a>>>0,A=A/a>>>0;if(A!==0)throw new Error("Non-zero carry");m=R,b++}for(var M=E-m;M!==E&&N[M]===0;)M++;for(var I=c.repeat(g);M<E;++M)I+=t.charAt(N[M]);return I}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,b=0;p[g]===c;)m++,g++;for(var w=(p.length-g)*u+1>>>0,E=new Uint8Array(w);p[g];){var N=n[p.charCodeAt(g)];if(N===255)return;for(var A=0,R=w-1;(N!==0||A<b)&&R!==-1;R--,A++)N+=a*E[R]>>>0,E[R]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");b=A,g++}if(p[g]!==" "){for(var O=w-b;O!==w&&E[O]===0;)O++;for(var M=new Uint8Array(m+(w-O)),I=m;O!==w;)M[I++]=E[O++];return M}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var u5=c5,l5=u5;const d5=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},h5=t=>new TextEncoder().encode(t),f5=t=>new TextDecoder().decode(t);class p5{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class g5{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Rv(this,e)}}class m5{constructor(e){this.decoders=e}or(e){return Rv(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Rv=(t,e)=>new m5({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class y5{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new p5(e,n,r),this.decoder=new g5(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const sd=({name:t,prefix:e,encode:n,decode:r})=>new y5(t,e,n,r),Zc=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=l5(n,e);return sd({prefix:t,name:e,encode:r,decode:i=>d5(s(i))})},w5=(t,e,n,r)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},b5=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Lt=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>sd({prefix:e,name:t,encode(s){return b5(s,r,n)},decode(s){return w5(s,r,n,t)}}),E5=sd({prefix:"\0",name:"identity",encode:t=>f5(t),decode:t=>h5(t)}),v5=Object.freeze(Object.defineProperty({__proto__:null,identity:E5},Symbol.toStringTag,{value:"Module"})),C5=Lt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),_5=Object.freeze(Object.defineProperty({__proto__:null,base2:C5},Symbol.toStringTag,{value:"Module"})),A5=Lt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),I5=Object.freeze(Object.defineProperty({__proto__:null,base8:A5},Symbol.toStringTag,{value:"Module"})),S5=Zc({prefix:"9",name:"base10",alphabet:"0123456789"}),N5=Object.freeze(Object.defineProperty({__proto__:null,base10:S5},Symbol.toStringTag,{value:"Module"})),T5=Lt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),x5=Lt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),P5=Object.freeze(Object.defineProperty({__proto__:null,base16:T5,base16upper:x5},Symbol.toStringTag,{value:"Module"})),O5=Lt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),R5=Lt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),$5=Lt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),D5=Lt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),k5=Lt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),U5=Lt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),B5=Lt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),M5=Lt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),L5=Lt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),F5=Object.freeze(Object.defineProperty({__proto__:null,base32:O5,base32hex:k5,base32hexpad:B5,base32hexpadupper:M5,base32hexupper:U5,base32pad:$5,base32padupper:D5,base32upper:R5,base32z:L5},Symbol.toStringTag,{value:"Module"})),j5=Zc({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),z5=Zc({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),H5=Object.freeze(Object.defineProperty({__proto__:null,base36:j5,base36upper:z5},Symbol.toStringTag,{value:"Module"})),q5=Zc({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),W5=Zc({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),V5=Object.freeze(Object.defineProperty({__proto__:null,base58btc:q5,base58flickr:W5},Symbol.toStringTag,{value:"Module"})),G5=Lt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),K5=Lt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Y5=Lt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Z5=Lt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),J5=Object.freeze(Object.defineProperty({__proto__:null,base64:G5,base64pad:K5,base64url:Y5,base64urlpad:Z5},Symbol.toStringTag,{value:"Module"})),$v=Array.from(""),X5=$v.reduce((t,e,n)=>(t[n]=e,t),[]),Q5=$v.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function e6(t){return t.reduce((e,n)=>(e+=X5[n],e),"")}function t6(t){const e=[];for(const n of t){const r=Q5[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const n6=sd({prefix:"",name:"base256emoji",encode:e6,decode:t6}),r6=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:n6},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const dy={...v5,..._5,...I5,...N5,...P5,...F5,...H5,...V5,...J5,...r6};function Dv(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const hy=Dv("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),sh=Dv("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Ov(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),kv={utf8:hy,"utf-8":hy,hex:dy.base16,latin1:sh,ascii:sh,binary:sh,...dy};function jn(t,e="utf8"){const n=kv[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Zp(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function yn(t,e="utf8"){const n=kv[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const s6={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},i6="Input must be an string, Buffer or Uint8Array";function o6(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(i6);return e}function a6(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function Eu(t){return(4294967296+t).toString(16).substring(1)}function c6(t,e,n){let r=`
`+t+" = ";for(let s=0;s<e.length;s+=2){if(n===32)r+=Eu(e[s]).toUpperCase(),r+=" ",r+=Eu(e[s+1]).toUpperCase();else if(n===64)r+=Eu(e[s+1]).toUpperCase(),r+=Eu(e[s]).toUpperCase();else throw new Error("Invalid size "+n);s%6===4?r+=`
`+new Array(t.length+4).join(" "):s<e.length-2&&(r+=" ")}console.log(r)}function u6(t,e,n){let r=new Date().getTime();const s=new Uint8Array(e);for(let o=0;o<e;o++)s[o]=o%256;const i=new Date().getTime();console.log("Generated random input in "+(i-r)+"ms"),r=i;for(let o=0;o<n;o++){const a=t(s),c=new Date().getTime(),u=c-r;r=c,console.log("Hashed in "+u+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(u/1e3)*100)/100+" MB PER SECOND")}}var Uv={normalizeInput:o6,toHex:a6,debugPrint:c6,testSpeed:u6};const qu=Uv;function vu(t,e,n){const r=t[e]+t[n];let s=t[e+1]+t[n+1];r>=4294967296&&s++,t[e]=r,t[e+1]=s}function fy(t,e,n,r){let s=t[e]+n;n<0&&(s+=4294967296);let i=t[e+1]+r;s>=4294967296&&i++,t[e]=s,t[e+1]=i}function Bv(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function ls(t,e,n,r,s,i){const o=Ea[s],a=Ea[s+1],c=Ea[i],u=Ea[i+1];vu(Ce,t,e),fy(Ce,t,o,a);let l=Ce[r]^Ce[t],d=Ce[r+1]^Ce[t+1];Ce[r]=d,Ce[r+1]=l,vu(Ce,n,r),l=Ce[e]^Ce[n],d=Ce[e+1]^Ce[n+1],Ce[e]=l>>>24^d<<8,Ce[e+1]=d>>>24^l<<8,vu(Ce,t,e),fy(Ce,t,c,u),l=Ce[r]^Ce[t],d=Ce[r+1]^Ce[t+1],Ce[r]=l>>>16^d<<16,Ce[r+1]=d>>>16^l<<16,vu(Ce,n,r),l=Ce[e]^Ce[n],d=Ce[e+1]^Ce[n+1],Ce[e]=d>>>31^l<<1,Ce[e+1]=l>>>31^d<<1}const Mv=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),l6=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],jt=new Uint8Array(l6.map(function(t){return t*2})),Ce=new Uint32Array(32),Ea=new Uint32Array(32);function Lv(t,e){let n=0;for(n=0;n<16;n++)Ce[n]=t.h[n],Ce[n+16]=Mv[n];for(Ce[24]=Ce[24]^t.t,Ce[25]=Ce[25]^t.t/4294967296,e&&(Ce[28]=~Ce[28],Ce[29]=~Ce[29]),n=0;n<32;n++)Ea[n]=Bv(t.b,4*n);for(n=0;n<12;n++)ls(0,8,16,24,jt[n*16+0],jt[n*16+1]),ls(2,10,18,26,jt[n*16+2],jt[n*16+3]),ls(4,12,20,28,jt[n*16+4],jt[n*16+5]),ls(6,14,22,30,jt[n*16+6],jt[n*16+7]),ls(0,10,20,30,jt[n*16+8],jt[n*16+9]),ls(2,12,22,24,jt[n*16+10],jt[n*16+11]),ls(4,14,16,26,jt[n*16+12],jt[n*16+13]),ls(6,8,18,28,jt[n*16+14],jt[n*16+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^Ce[n]^Ce[n+16]}const ds=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function Fv(t,e,n,r){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const s={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};ds.fill(0),ds[0]=t,e&&(ds[1]=e.length),ds[2]=1,ds[3]=1,n&&ds.set(n,32),r&&ds.set(r,48);for(let i=0;i<16;i++)s.h[i]=Mv[i]^Bv(ds,i*4);return e&&(Jp(s,e),s.c=128),s}function Jp(t,e){for(let n=0;n<e.length;n++)t.c===128&&(t.t+=t.c,Lv(t,!1),t.c=0),t.b[t.c++]=e[n]}function jv(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;Lv(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3);return e}function zv(t,e,n,r,s){n=n||64,t=qu.normalizeInput(t),r&&(r=qu.normalizeInput(r)),s&&(s=qu.normalizeInput(s));const i=Fv(n,e,r,s);return Jp(i,t),jv(i)}function d6(t,e,n,r,s){const i=zv(t,e,n,r,s);return qu.toHex(i)}var h6={blake2b:zv,blake2bHex:d6,blake2bInit:Fv,blake2bUpdate:Jp,blake2bFinal:jv};const Hv=Uv;function f6(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function hs(t,e,n,r,s,i){Be[t]=Be[t]+Be[e]+s,Be[r]=Cu(Be[r]^Be[t],16),Be[n]=Be[n]+Be[r],Be[e]=Cu(Be[e]^Be[n],12),Be[t]=Be[t]+Be[e]+i,Be[r]=Cu(Be[r]^Be[t],8),Be[n]=Be[n]+Be[r],Be[e]=Cu(Be[e]^Be[n],7)}function Cu(t,e){return t>>>e^t<<32-e}const qv=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),zt=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Be=new Uint32Array(16),Pt=new Uint32Array(16);function Wv(t,e){let n=0;for(n=0;n<8;n++)Be[n]=t.h[n],Be[n+8]=qv[n];for(Be[12]^=t.t,Be[13]^=t.t/4294967296,e&&(Be[14]=~Be[14]),n=0;n<16;n++)Pt[n]=f6(t.b,4*n);for(n=0;n<10;n++)hs(0,4,8,12,Pt[zt[n*16+0]],Pt[zt[n*16+1]]),hs(1,5,9,13,Pt[zt[n*16+2]],Pt[zt[n*16+3]]),hs(2,6,10,14,Pt[zt[n*16+4]],Pt[zt[n*16+5]]),hs(3,7,11,15,Pt[zt[n*16+6]],Pt[zt[n*16+7]]),hs(0,5,10,15,Pt[zt[n*16+8]],Pt[zt[n*16+9]]),hs(1,6,11,12,Pt[zt[n*16+10]],Pt[zt[n*16+11]]),hs(2,7,8,13,Pt[zt[n*16+12]],Pt[zt[n*16+13]]),hs(3,4,9,14,Pt[zt[n*16+14]],Pt[zt[n*16+15]]);for(n=0;n<8;n++)t.h[n]^=Be[n]^Be[n+8]}function Vv(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=e?e.length:0;if(e&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(qv),b:new Uint8Array(64),c:0,t:0,outlen:t};return r.h[0]^=16842752^n<<8^t,n>0&&(Xp(r,e),r.c=64),r}function Xp(t,e){for(let n=0;n<e.length;n++)t.c===64&&(t.t+=t.c,Wv(t,!1),t.c=0),t.b[t.c++]=e[n]}function Gv(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;Wv(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3)&255;return e}function Kv(t,e,n){n=n||32,t=Hv.normalizeInput(t);const r=Vv(n,e);return Xp(r,t),Gv(r)}function p6(t,e,n){const r=Kv(t,e,n);return Hv.toHex(r)}var g6={blake2s:Kv,blake2sHex:p6,blake2sInit:Vv,blake2sUpdate:Xp,blake2sFinal:Gv};const aa=h6,ca=g6;var m6={blake2b:aa.blake2b,blake2bHex:aa.blake2bHex,blake2bInit:aa.blake2bInit,blake2bUpdate:aa.blake2bUpdate,blake2bFinal:aa.blake2bFinal,blake2s:ca.blake2s,blake2sHex:ca.blake2sHex,blake2sInit:ca.blake2sInit,blake2sUpdate:ca.blake2sUpdate,blake2sFinal:ca.blake2sFinal},y6={};const w6=":";function wo(t){const[e,n]=t.split(w6);return{namespace:e,reference:n}}function Yv(t,e){return t.includes(":")?[t]:e.chains||[]}var b6=Object.defineProperty,E6=Object.defineProperties,v6=Object.getOwnPropertyDescriptors,py=Object.getOwnPropertySymbols,C6=Object.prototype.hasOwnProperty,_6=Object.prototype.propertyIsEnumerable,gy=(t,e,n)=>e in t?b6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,my=(t,e)=>{for(var n in e||(e={}))C6.call(e,n)&&gy(t,n,e[n]);if(py)for(var n of py(e))_6.call(e,n)&&gy(t,n,e[n]);return t},A6=(t,e)=>E6(t,v6(e));const I6="ReactNative",Tn={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},S6="js";function yl(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ws(){return!Ai()&&!!Vp()&&navigator.product===I6}function N6(){return Ws()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function T6(){return Ws()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function qo(){return!yl()&&!!Vp()&&!!Ai()}function Jc(){return Ws()?Tn.reactNative:yl()?Tn.node:qo()?Tn.browser:Tn.unknown}function yy(){var t;try{return Ws()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function x6(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function P6(t){var e,n;const r=Zv();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),A6(my(my({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function Zv(){return hv()||{name:"",description:"",url:"",icons:[""]}}function O6(){if(Jc()===Tn.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=$R();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function R6(){var t;const e=Jc();return e===Tn.browser?[e,((t=dv())==null?void 0:t.host)||"unknown"].join(":"):e}function Jv(t,e,n){const r=O6(),s=R6();return[[t,e].join("-"),[S6,n].join("-"),r,s].join("/")}function $6({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const u=n.split("?"),l=Jv(t,e,r),d={auth:s,ua:l,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=x6(u[1]||"",d);return u[0]+"?"+h}function ci(t,e){return t.filter(n=>e.includes(n)).length===t.length}function Nf(t){return Object.fromEntries(t.entries())}function Tf(t){return new Map(Object.entries(t))}function ti(t=J.FIVE_MINUTES,e){const n=J.toMiliseconds(t||J.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const u=new Error(e);o=Promise.reject(u),c(u)},n),r=a,s=c})}}function Ns(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function Xv(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function D6(t){return Xv("topic",t)}function k6(t){return Xv("id",t)}function Qv(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function yt(t,e){return J.fromMiliseconds(Date.now()+J.toMiliseconds(t))}function bs(t){return Date.now()>=J.toMiliseconds(t)}function He(t,e){return`${t}${e?`:${e}`:""}`}function Nr(t=[],e=[]){return[...new Set([...t,...e])]}async function U6({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=B6(i,t,e),a=Jc();if(a===Tn.browser){if(!((r=Ai())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}M6(o)}else a===Tn.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function B6(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${z6(r,!0)}`}else s=`${s}/wc?${r}`;return s}function M6(t){let e="_self";j6()?e="_top":(F6()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function L6(t,e){let n="";try{if(qo()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function wy(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function by(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function Qp(){return typeof process<"u"&&y6.IS_VITEST==="true"}function F6(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function j6(){try{return window.self!==window.top}catch{return!1}}function z6(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function e1(t){return Buffer.from(t,"base64").toString("utf-8")}function H6(t){return new Promise(e=>setTimeout(e,t))}const _u=BigInt(2**32-1),Ey=BigInt(32);function t1(t,e=!1){return e?{h:Number(t&_u),l:Number(t>>Ey&_u)}:{h:Number(t>>Ey&_u)|0,l:Number(t&_u)|0}}function n1(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=t1(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const vy=(t,e,n)=>t>>>n,Cy=(t,e,n)=>t<<32-n|e>>>n,Es=(t,e,n)=>t>>>n|e<<32-n,vs=(t,e,n)=>t<<32-n|e>>>n,va=(t,e,n)=>t<<64-n|e>>>n-32,Ca=(t,e,n)=>t>>>n-32|e<<64-n,q6=(t,e)=>e,W6=(t,e)=>t,V6=(t,e,n)=>t<<n|e>>>32-n,G6=(t,e,n)=>e<<n|t>>>32-n,K6=(t,e,n)=>e<<n-32|t>>>64-n,Y6=(t,e,n)=>t<<n-32|e>>>64-n;function tr(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const eg=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),tg=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Z6=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),J6=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,X6=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Q6=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Gi=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function ng(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ns(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function qn(t,...e){if(!ng(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function rg(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ns(t.outputLen),ns(t.blockLen)}function Fs(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function sg(t,e){qn(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function mc(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Wn(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function ih(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function pr(t,e){return t<<32-e|t>>>e}const r1=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function s1(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const Wr=r1?t=>t:t=>s1(t);function e$(t){for(let e=0;e<t.length;e++)t[e]=s1(t[e]);return t}const Cs=r1?t=>t:e$,i1=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",t$=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function yc(t){if(qn(t),i1)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=t$[t[n]];return e}const zr={_0:48,_9:57,A:65,F:70,a:97,f:102};function _y(t){if(t>=zr._0&&t<=zr._9)return t-zr._0;if(t>=zr.A&&t<=zr.F)return t-(zr.A-10);if(t>=zr.a&&t<=zr.f)return t-(zr.a-10)}function ig(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(i1)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=_y(t.charCodeAt(i)),a=_y(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function n$(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function or(t){return typeof t=="string"&&(t=n$(t)),qn(t),t}function ui(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];qn(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let id=class{};function Xc(t){const e=r=>t().update(or(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function r$(t){const e=(r,s)=>t(s).update(or(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function Wo(t=32){if(Gi&&typeof Gi.getRandomValues=="function")return Gi.getRandomValues(new Uint8Array(t));if(Gi&&typeof Gi.randomBytes=="function")return Uint8Array.from(Gi.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const s$=BigInt(0),ua=BigInt(1),i$=BigInt(2),o$=BigInt(7),a$=BigInt(256),c$=BigInt(113),o1=[],a1=[],c1=[];for(let t=0,e=ua,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],o1.push(2*(5*r+n)),a1.push((t+1)*(t+2)/2%64);let s=s$;for(let i=0;i<7;i++)e=(e<<ua^(e>>o$)*c$)%a$,e&i$&&(s^=ua<<(ua<<BigInt(i))-ua);c1.push(s)}const u1=n1(c1,!0),u$=u1[0],l$=u1[1],Ay=(t,e,n)=>n>32?K6(t,e,n):V6(t,e,n),Iy=(t,e,n)=>n>32?Y6(t,e,n):G6(t,e,n);function d$(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=n[c],l=n[c+1],d=Ay(u,l,1)^n[a],h=Iy(u,l,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=a1[o],c=Ay(s,i,a),u=Iy(s,i,a),l=o1[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=u$[r],t[1]^=l$[r]}Wn(n)}let h$=class l1 extends id{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,ns(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=mc(this.state)}clone(){return this._cloneInto()}keccak(){Cs(this.state32),d$(this.state32,this.rounds),Cs(this.state32),this.posOut=0,this.pos=0}update(e){Fs(this),e=or(e),qn(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Fs(this,!1),qn(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ns(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(sg(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Wn(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new l1(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const f$=(t,e,n)=>Xc(()=>new h$(e,t,n)),p$=f$(1,136,256/8);function g$(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+u,a,r)}function m$(t,e,n){return t&e^~t&n}function y$(t,e,n){return t&e^t&n^e&n}let d1=class extends id{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=ih(this.buffer)}update(e){Fs(this),e=or(e),qn(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=ih(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Fs(this),sg(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Wn(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;g$(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=ih(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const fs=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ht=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),qt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),w$=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ps=new Uint32Array(64);let b$=class extends d1{constructor(e=32){super(64,e,8,!1),this.A=fs[0]|0,this.B=fs[1]|0,this.C=fs[2]|0,this.D=fs[3]|0,this.E=fs[4]|0,this.F=fs[5]|0,this.G=fs[6]|0,this.H=fs[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)ps[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=ps[d-15],f=ps[d-2],p=pr(h,7)^pr(h,18)^h>>>3,g=pr(f,17)^pr(f,19)^f>>>10;ps[d]=g+ps[d-7]+p+ps[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const h=pr(a,6)^pr(a,11)^pr(a,25),f=l+h+m$(a,c,u)+w$[d]+ps[d]|0,p=(pr(r,2)^pr(r,13)^pr(r,22))+y$(r,s,i)|0;l=u,u=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(r,s,i,o,a,c,u,l)}roundClean(){Wn(ps)}destroy(){this.set(0,0,0,0,0,0,0,0),Wn(this.buffer)}};const h1=n1(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),E$=h1[0],v$=h1[1],gs=new Uint32Array(80),ms=new Uint32Array(80);let og=class extends d1{constructor(e=64){super(128,e,16,!1),this.Ah=qt[0]|0,this.Al=qt[1]|0,this.Bh=qt[2]|0,this.Bl=qt[3]|0,this.Ch=qt[4]|0,this.Cl=qt[5]|0,this.Dh=qt[6]|0,this.Dl=qt[7]|0,this.Eh=qt[8]|0,this.El=qt[9]|0,this.Fh=qt[10]|0,this.Fl=qt[11]|0,this.Gh=qt[12]|0,this.Gl=qt[13]|0,this.Hh=qt[14]|0,this.Hl=qt[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:m}=this;return[e,n,r,s,i,o,a,c,u,l,d,h,f,p,g,m]}set(e,n,r,s,i,o,a,c,u,l,d,h,f,p,g,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=m|0}process(e,n){for(let E=0;E<16;E++,n+=4)gs[E]=e.getUint32(n),ms[E]=e.getUint32(n+=4);for(let E=16;E<80;E++){const N=gs[E-15]|0,A=ms[E-15]|0,R=Es(N,A,1)^Es(N,A,8)^vy(N,A,7),O=vs(N,A,1)^vs(N,A,8)^Cy(N,A,7),M=gs[E-2]|0,I=ms[E-2]|0,j=Es(M,I,19)^va(M,I,61)^vy(M,I,6),U=vs(M,I,19)^Ca(M,I,61)^Cy(M,I,6),L=Z6(O,U,ms[E-7],ms[E-16]),x=J6(L,R,j,gs[E-7],gs[E-16]);gs[E]=x|0,ms[E]=L|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:m,Hh:b,Hl:w}=this;for(let E=0;E<80;E++){const N=Es(d,h,14)^Es(d,h,18)^va(d,h,41),A=vs(d,h,14)^vs(d,h,18)^Ca(d,h,41),R=d&f^~d&g,O=h&p^~h&m,M=X6(w,A,O,v$[E],ms[E]),I=Q6(M,b,N,R,E$[E],gs[E]),j=M|0,U=Es(r,s,28)^va(r,s,34)^va(r,s,39),L=vs(r,s,28)^Ca(r,s,34)^Ca(r,s,39),x=r&i^r&a^i&a,B=s&o^s&c^o&c;b=g|0,w=m|0,g=f|0,m=p|0,f=d|0,p=h|0,{h:d,l:h}=tr(u|0,l|0,I|0,j|0),u=a|0,l=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const v=eg(j,L,B);r=tg(v,I,U,x),s=v|0}({h:r,l:s}=tr(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=tr(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=tr(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=tr(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:h}=tr(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=tr(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:m}=tr(this.Gh|0,this.Gl|0,g|0,m|0),{h:b,l:w}=tr(this.Hh|0,this.Hl|0,b|0,w|0),this.set(r,s,i,o,a,c,u,l,d,h,f,p,g,m,b,w)}roundClean(){Wn(gs,ms)}destroy(){Wn(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},C$=class extends og{constructor(){super(48),this.Ah=Ht[0]|0,this.Al=Ht[1]|0,this.Bh=Ht[2]|0,this.Bl=Ht[3]|0,this.Ch=Ht[4]|0,this.Cl=Ht[5]|0,this.Dh=Ht[6]|0,this.Dl=Ht[7]|0,this.Eh=Ht[8]|0,this.El=Ht[9]|0,this.Fh=Ht[10]|0,this.Fl=Ht[11]|0,this.Gh=Ht[12]|0,this.Gl=Ht[13]|0,this.Hh=Ht[14]|0,this.Hl=Ht[15]|0}};const Wt=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let _$=class extends og{constructor(){super(32),this.Ah=Wt[0]|0,this.Al=Wt[1]|0,this.Bh=Wt[2]|0,this.Bl=Wt[3]|0,this.Ch=Wt[4]|0,this.Cl=Wt[5]|0,this.Dh=Wt[6]|0,this.Dl=Wt[7]|0,this.Eh=Wt[8]|0,this.El=Wt[9]|0,this.Fh=Wt[10]|0,this.Fl=Wt[11]|0,this.Gh=Wt[12]|0,this.Gl=Wt[13]|0,this.Hh=Wt[14]|0,this.Hl=Wt[15]|0}};const od=Xc(()=>new b$),A$=Xc(()=>new og),I$=Xc(()=>new C$),S$=Xc(()=>new _$),N$=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),mt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ne=new Uint32Array(32);function ys(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=ne[2*t],u=ne[2*t+1],l=ne[2*e],d=ne[2*e+1],h=ne[2*n],f=ne[2*n+1],p=ne[2*r],g=ne[2*r+1],m=eg(c,l,o);u=tg(m,u,d,a),c=m|0,{Dh:g,Dl:p}={Dh:g^u,Dl:p^c},{Dh:g,Dl:p}={Dh:q6(g,p),Dl:W6(g)},{h:f,l:h}=tr(f,h,g,p),{Bh:d,Bl:l}={Bh:d^f,Bl:l^h},{Bh:d,Bl:l}={Bh:Es(d,l,24),Bl:vs(d,l,24)},ne[2*t]=c,ne[2*t+1]=u,ne[2*e]=l,ne[2*e+1]=d,ne[2*n]=h,ne[2*n+1]=f,ne[2*r]=p,ne[2*r+1]=g}function ws(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=ne[2*t],u=ne[2*t+1],l=ne[2*e],d=ne[2*e+1],h=ne[2*n],f=ne[2*n+1],p=ne[2*r],g=ne[2*r+1],m=eg(c,l,o);u=tg(m,u,d,a),c=m|0,{Dh:g,Dl:p}={Dh:g^u,Dl:p^c},{Dh:g,Dl:p}={Dh:Es(g,p,16),Dl:vs(g,p,16)},{h:f,l:h}=tr(f,h,g,p),{Bh:d,Bl:l}={Bh:d^f,Bl:l^h},{Bh:d,Bl:l}={Bh:va(d,l,63),Bl:Ca(d,l,63)},ne[2*t]=c,ne[2*t+1]=u,ne[2*e]=l,ne[2*e+1]=d,ne[2*n]=h,ne[2*n+1]=f,ne[2*r]=p,ne[2*r+1]=g}function T$(t,e={},n,r,s){if(ns(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class x$ extends id{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,ns(e),ns(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=mc(this.buffer)}update(e){Fs(this),e=or(e),qn(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(Cs(s),this.compress(s,0,!1),Cs(s),this.pos=0);const u=Math.min(n-this.pos,i-c),l=o+c;if(u===n&&!(l%4)&&c+u<i){const d=new Uint32Array(a,l,Math.floor((i-c)/4));Cs(d);for(let h=0;c+n<i;h+=s.length,c+=n)this.length+=n,this.compress(d,h,!1);Cs(d);continue}r.set(e.subarray(c,c+u),this.pos),this.pos+=u,this.length+=u,c+=u}return this}digestInto(e){Fs(this),sg(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,Wn(this.buffer.subarray(n)),Cs(r),this.compress(r,0,!0),Cs(r);const s=mc(e);this.get().forEach((i,o)=>s[o]=Wr(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class P$ extends x${constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=mt[0]|0,this.v0h=mt[1]|0,this.v1l=mt[2]|0,this.v1h=mt[3]|0,this.v2l=mt[4]|0,this.v2h=mt[5]|0,this.v3l=mt[6]|0,this.v3h=mt[7]|0,this.v4l=mt[8]|0,this.v4h=mt[9]|0,this.v5l=mt[10]|0,this.v5h=mt[11]|0,this.v6l=mt[12]|0,this.v6h=mt[13]|0,this.v7l=mt[14]|0,this.v7h=mt[15]|0,T$(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=or(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=or(i);const a=mc(i);this.v4l^=Wr(a[0]),this.v4h^=Wr(a[1]),this.v5l^=Wr(a[2]),this.v5h^=Wr(a[3])}if(s!==void 0){s=or(s);const a=mc(s);this.v6l^=Wr(a[0]),this.v6h^=Wr(a[1]),this.v7l^=Wr(a[2]),this.v7h^=Wr(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:u,v4h:l,v5l:d,v5h:h,v6l:f,v6h:p,v7l:g,v7h:m}=this;return[e,n,r,s,i,o,a,c,u,l,d,h,f,p,g,m]}set(e,n,r,s,i,o,a,c,u,l,d,h,f,p,g,m){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=u|0,this.v4h=l|0,this.v5l=d|0,this.v5h=h|0,this.v6l=f|0,this.v6h=p|0,this.v7l=g|0,this.v7h=m|0}compress(e,n,r){this.get().forEach((c,u)=>ne[u]=c),ne.set(mt,16);let{h:s,l:i}=t1(BigInt(this.length));ne[24]=mt[8]^i,ne[25]=mt[9]^s,r&&(ne[28]=~ne[28],ne[29]=~ne[29]);let o=0;const a=N$;for(let c=0;c<12;c++)ys(0,4,8,12,e,n+2*a[o++]),ws(0,4,8,12,e,n+2*a[o++]),ys(1,5,9,13,e,n+2*a[o++]),ws(1,5,9,13,e,n+2*a[o++]),ys(2,6,10,14,e,n+2*a[o++]),ws(2,6,10,14,e,n+2*a[o++]),ys(3,7,11,15,e,n+2*a[o++]),ws(3,7,11,15,e,n+2*a[o++]),ys(0,5,10,15,e,n+2*a[o++]),ws(0,5,10,15,e,n+2*a[o++]),ys(1,6,11,12,e,n+2*a[o++]),ws(1,6,11,12,e,n+2*a[o++]),ys(2,7,8,13,e,n+2*a[o++]),ws(2,7,8,13,e,n+2*a[o++]),ys(3,4,9,14,e,n+2*a[o++]),ws(3,4,9,14,e,n+2*a[o++]);this.v0l^=ne[0]^ne[16],this.v0h^=ne[1]^ne[17],this.v1l^=ne[2]^ne[18],this.v1h^=ne[3]^ne[19],this.v2l^=ne[4]^ne[20],this.v2h^=ne[5]^ne[21],this.v3l^=ne[6]^ne[22],this.v3h^=ne[7]^ne[23],this.v4l^=ne[8]^ne[24],this.v4h^=ne[9]^ne[25],this.v5l^=ne[10]^ne[26],this.v5h^=ne[11]^ne[27],this.v6l^=ne[12]^ne[28],this.v6h^=ne[13]^ne[29],this.v7l^=ne[14]^ne[30],this.v7h^=ne[15]^ne[31],Wn(ne)}destroy(){this.destroyed=!0,Wn(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const O$=r$(t=>new P$(t)),R$="https://rpc.walletconnect.org/v1";function f1(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(p$(n)).toString("hex")}async function $$(t,e,n,r,s,i){switch(n.t){case"eip191":return await D$(t,e,n.s);case"eip1271":return await k$(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function D$(t,e,n){return(await _3({hash:f1(e),signature:n})).toLowerCase()===t.toLowerCase()}async function k$(t,e,n,r,s,i){const o=wo(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",u=n.substring(2),l=(u.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:f1(e)).substring(2),h=a+d+c+l+u,f=await fetch(`${i||R$}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:U$(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function U$(){return Date.now()+Math.floor(Math.random()*1e3)}function B$(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Ho.encode(i)}function M$(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=O$(r,{dkLen:32});return Ho.encode(s)}function Sy(t){const e=new Uint8Array(od(L$(t)));return Ho.encode(e)}function L$(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function Ny(t){const e=Buffer.from(t,"base64"),n=a5(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=X3(n),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=S$(i);return i_.encode(o).replace(/=+$/,"")}function oh(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function F$(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(oh(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(oh(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(oh(r.length)),s.push(r);const i=Buffer.concat(s),o=od(i);return Buffer.from(o).toString("hex").toUpperCase()}var j$=Object.defineProperty,z$=Object.defineProperties,H$=Object.getOwnPropertyDescriptors,Ty=Object.getOwnPropertySymbols,q$=Object.prototype.hasOwnProperty,W$=Object.prototype.propertyIsEnumerable,xy=(t,e,n)=>e in t?j$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V$=(t,e)=>{for(var n in e||(e={}))q$.call(e,n)&&xy(t,n,e[n]);if(Ty)for(var n of Ty(e))W$.call(e,n)&&xy(t,n,e[n]);return t},G$=(t,e)=>z$(t,H$(e));const K$="did:pkh:",ag=t=>t==null?void 0:t.split(":"),Y$=t=>{const e=t&&ag(t);if(e)return t.includes(K$)?e[3]:e[1]},xf=t=>{const e=t&&ag(t);if(e)return e[2]+":"+e[3]},wl=t=>{const e=t&&ag(t);if(e)return e.pop()};async function Py(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=p1(s,s.iss),o=wl(s.iss);return await $$(o,i,r,xf(s.iss),n)}const p1=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=wl(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${Y$(e)}`,c=`Nonce: ${t.nonce}`,u=`Issued At: ${t.iat}`,l=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=Wu(t.resources);if(p){const g=wc(p);s=sD(s,g)}return[n,r,"",s,"",i,o,a,c,u,l,d,h,f].filter(g=>g!=null).join(`
`)};function Z$(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function J$(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Ii(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function X$(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:Q$(e,n,r)}}}function Q$(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function g1(t){return Ii(t),`urn:recap:${Z$(t).replace(/=/g,"")}`}function wc(t){const e=J$(t.replace("urn:recap:",""));return Ii(e),e}function eD(t,e,n){const r=X$(t,e,n);return g1(r)}function tD(t){return t&&t.includes("urn:recap:")}function nD(t,e){const n=wc(t),r=wc(e),s=rD(n,r);return g1(s)}function rD(t,e){Ii(t),Ii(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,u;r.att[s]=G$(V$({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((u=e.att[s])==null?void 0:u[a])})})}),r}function sD(t="",e){Ii(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const u={};c.forEach(d=>{u[d.ability]||(u[d.ability]=[]),u[d.ability].push(d.action)});const l=Object.keys(u).map(d=>(s++,`(${s}) '${d}': '${u[d].join("', '")}' for '${a}'.`));r.push(l.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function Oy(t){var e;const n=wc(t);Ii(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function Ry(t){const e=wc(t);Ii(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function Wu(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return tD(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function m1(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Pf(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function ah(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function fn(t,...e){if(!m1(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function $y(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function iD(t,e){fn(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Rs(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function xo(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function oD(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const aD=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function cD(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Of(t){if(typeof t=="string")t=cD(t);else if(m1(t))t=Rf(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function uD(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function lD(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const dD=(t,e)=>{function n(r,...s){if(fn(r),!aD)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const u=s[0];if(!u)throw new Error("nonce / iv required");t.varSizeNonce?fn(u):fn(u,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&fn(s[1]);const o=e(r,...s),a=(u,l)=>{if(l!==void 0){if(u!==2)throw new Error("cipher output not supported");fn(l)}};let c=!1;return{encrypt(u,l){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,fn(u),a(o.encrypt.length,l),o.encrypt(u,l)},decrypt(u,l){if(fn(u),i&&u.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,l),o.decrypt(u,l)}}}return Object.assign(n,t),n};function Dy(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!fD(e))throw new Error("invalid output, must be aligned");return e}function ky(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function hD(t,e,n){Pf(n);const r=new Uint8Array(16),s=oD(r);return ky(s,0,BigInt(e),n),ky(s,8,BigInt(t),n),r}function fD(t){return t.byteOffset%4===0}function Rf(t){return Uint8Array.from(t)}const y1=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),pD=y1("expand 16-byte k"),gD=y1("expand 32-byte k"),mD=Rs(pD),yD=Rs(gD);function ke(t,e){return t<<e|t>>>32-e}function $f(t){return t.byteOffset%4===0}const Au=64,wD=16,w1=2**32-1,Uy=new Uint32Array;function bD(t,e,n,r,s,i,o,a){const c=s.length,u=new Uint8Array(Au),l=Rs(u),d=$f(s)&&$f(i),h=d?Rs(s):Uy,f=d?Rs(i):Uy;for(let p=0;p<c;o++){if(t(e,n,r,l,o,a),o>=w1)throw new Error("arx: counter overflow");const g=Math.min(Au,c-p);if(d&&g===Au){const m=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let b=0,w;b<wD;b++)w=m+b,f[w]=h[w]^l[b];p+=Au;continue}for(let m=0,b;m<g;m++)b=p+m,i[b]=s[b]^u[m];p+=g}}function ED(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=uD({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return ah(s),ah(o),Pf(i),Pf(n),(a,c,u,l,d=0)=>{fn(a),fn(c),fn(u);const h=u.length;if(l===void 0&&(l=new Uint8Array(h)),fn(l),ah(d),d<0||d>=w1)throw new Error("arx: counter overflow");if(l.length<h)throw new Error(`arx: output (${l.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,m;if(p===32)f.push(g=Rf(a)),m=yD;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),m=mD,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);$f(c)||f.push(c=Rf(c));const b=Rs(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(m,b,Rs(c.subarray(0,16)),b),c=c.subarray(16)}const w=16-s;if(w!==c.length)throw new Error(`arx: nonce must be ${w} or 16 bytes`);if(w!==12){const N=new Uint8Array(12);N.set(c,i?0:12-c.length),c=N,f.push(c)}const E=Rs(c);return bD(t,m,b,E,u,l,d,o),xo(...f),l}}const Ot=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class vD{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Of(e),fn(e,32);const n=Ot(e,0),r=Ot(e,2),s=Ot(e,4),i=Ot(e,6),o=Ot(e,8),a=Ot(e,10),c=Ot(e,12),u=Ot(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let l=0;l<8;l++)this.pad[l]=Ot(e,16+2*l)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],u=o[2],l=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],m=o[9],b=Ot(e,n+0),w=Ot(e,n+2),E=Ot(e,n+4),N=Ot(e,n+6),A=Ot(e,n+8),R=Ot(e,n+10),O=Ot(e,n+12),M=Ot(e,n+14);let I=i[0]+(b&8191),j=i[1]+((b>>>13|w<<3)&8191),U=i[2]+((w>>>10|E<<6)&8191),L=i[3]+((E>>>7|N<<9)&8191),x=i[4]+((N>>>4|A<<12)&8191),B=i[5]+(A>>>1&8191),v=i[6]+((A>>>14|R<<2)&8191),C=i[7]+((R>>>11|O<<5)&8191),P=i[8]+((O>>>8|M<<8)&8191),D=i[9]+(M>>>5|s),S=0,$=S+I*a+j*(5*m)+U*(5*g)+L*(5*p)+x*(5*f);S=$>>>13,$&=8191,$+=B*(5*h)+v*(5*d)+C*(5*l)+P*(5*u)+D*(5*c),S+=$>>>13,$&=8191;let T=S+I*c+j*a+U*(5*m)+L*(5*g)+x*(5*p);S=T>>>13,T&=8191,T+=B*(5*f)+v*(5*h)+C*(5*d)+P*(5*l)+D*(5*u),S+=T>>>13,T&=8191;let k=S+I*u+j*c+U*a+L*(5*m)+x*(5*g);S=k>>>13,k&=8191,k+=B*(5*p)+v*(5*f)+C*(5*h)+P*(5*d)+D*(5*l),S+=k>>>13,k&=8191;let z=S+I*l+j*u+U*c+L*a+x*(5*m);S=z>>>13,z&=8191,z+=B*(5*g)+v*(5*p)+C*(5*f)+P*(5*h)+D*(5*d),S+=z>>>13,z&=8191;let H=S+I*d+j*l+U*u+L*c+x*a;S=H>>>13,H&=8191,H+=B*(5*m)+v*(5*g)+C*(5*p)+P*(5*f)+D*(5*h),S+=H>>>13,H&=8191;let Z=S+I*h+j*d+U*l+L*u+x*c;S=Z>>>13,Z&=8191,Z+=B*a+v*(5*m)+C*(5*g)+P*(5*p)+D*(5*f),S+=Z>>>13,Z&=8191;let K=S+I*f+j*h+U*d+L*l+x*u;S=K>>>13,K&=8191,K+=B*c+v*a+C*(5*m)+P*(5*g)+D*(5*p),S+=K>>>13,K&=8191;let we=S+I*p+j*f+U*h+L*d+x*l;S=we>>>13,we&=8191,we+=B*u+v*c+C*a+P*(5*m)+D*(5*g),S+=we>>>13,we&=8191;let Ae=S+I*g+j*p+U*f+L*h+x*d;S=Ae>>>13,Ae&=8191,Ae+=B*l+v*u+C*c+P*a+D*(5*m),S+=Ae>>>13,Ae&=8191;let Ee=S+I*m+j*g+U*p+L*f+x*h;S=Ee>>>13,Ee&=8191,Ee+=B*d+v*l+C*u+P*c+D*a,S+=Ee>>>13,Ee&=8191,S=(S<<2)+S|0,S=S+$|0,$=S&8191,S=S>>>13,T+=S,i[0]=$,i[1]=T,i[2]=k,i[3]=z,i[4]=H,i[5]=Z,i[6]=K,i[7]=we,i[8]=Ae,i[9]=Ee}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;xo(r)}update(e){$y(this),e=Of(e),fn(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){xo(this.h,this.r,this.buffer,this.pad)}digestInto(e){$y(this),iD(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function CD(t){const e=(r,s)=>t(s).update(Of(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const _D=CD(t=>new vD(t));function AD(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],u=t[3],l=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],m=e[6],b=e[7],w=s,E=n[0],N=n[1],A=n[2],R=o,O=a,M=c,I=u,j=l,U=d,L=h,x=f,B=p,v=g,C=m,P=b,D=w,S=E,$=N,T=A;for(let z=0;z<i;z+=2)R=R+j|0,D=ke(D^R,16),B=B+D|0,j=ke(j^B,12),R=R+j|0,D=ke(D^R,8),B=B+D|0,j=ke(j^B,7),O=O+U|0,S=ke(S^O,16),v=v+S|0,U=ke(U^v,12),O=O+U|0,S=ke(S^O,8),v=v+S|0,U=ke(U^v,7),M=M+L|0,$=ke($^M,16),C=C+$|0,L=ke(L^C,12),M=M+L|0,$=ke($^M,8),C=C+$|0,L=ke(L^C,7),I=I+x|0,T=ke(T^I,16),P=P+T|0,x=ke(x^P,12),I=I+x|0,T=ke(T^I,8),P=P+T|0,x=ke(x^P,7),R=R+U|0,T=ke(T^R,16),C=C+T|0,U=ke(U^C,12),R=R+U|0,T=ke(T^R,8),C=C+T|0,U=ke(U^C,7),O=O+L|0,D=ke(D^O,16),P=P+D|0,L=ke(L^P,12),O=O+L|0,D=ke(D^O,8),P=P+D|0,L=ke(L^P,7),M=M+x|0,S=ke(S^M,16),B=B+S|0,x=ke(x^B,12),M=M+x|0,S=ke(S^M,8),B=B+S|0,x=ke(x^B,7),I=I+j|0,$=ke($^I,16),v=v+$|0,j=ke(j^v,12),I=I+j|0,$=ke($^I,8),v=v+$|0,j=ke(j^v,7);let k=0;r[k++]=o+R|0,r[k++]=a+O|0,r[k++]=c+M|0,r[k++]=u+I|0,r[k++]=l+j|0,r[k++]=d+U|0,r[k++]=h+L|0,r[k++]=f+x|0,r[k++]=p+B|0,r[k++]=g+v|0,r[k++]=m+C|0,r[k++]=b+P|0,r[k++]=w+D|0,r[k++]=E+S|0,r[k++]=N+$|0,r[k++]=A+T|0}const ID=ED(AD,{counterRight:!1,counterLength:4,allowShortKeys:!1}),SD=new Uint8Array(16),By=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(SD.subarray(n))},ND=new Uint8Array(32);function My(t,e,n,r,s){const i=t(e,n,ND),o=_D.create(i);s&&By(o,s),By(o,r);const a=hD(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return xo(i,a),c}const TD=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=Dy(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=My(t,e,n,a,r);return i.set(c,o),xo(c),i},decrypt(s,i){i=Dy(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=My(t,e,n,o,r);if(!lD(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),xo(c),i}}),b1=dD({blockSize:64,nonceLength:12,tagLength:16},TD(ID));let E1=class extends id{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,rg(e);const r=or(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Wn(i)}update(e){return Fs(this),this.iHash.update(e),this}digestInto(e){Fs(this),qn(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const ad=(t,e,n)=>new E1(t,e).update(n).digest();ad.create=(t,e)=>new E1(t,e);function xD(t,e,n){return rg(t),n===void 0&&(n=new Uint8Array(t.outputLen)),ad(t,or(n),or(e))}const ch=Uint8Array.from([0]),Ly=Uint8Array.of();function PD(t,e,n,r=32){rg(t),ns(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=Ly);const o=new Uint8Array(i*s),a=ad.create(t,e),c=a._cloneInto(),u=new Uint8Array(a.outputLen);for(let l=0;l<i;l++)ch[0]=l+1,c.update(l===0?Ly:u).update(n).update(ch).digestInto(u),o.set(u,s*l),a._cloneInto(c);return a.destroy(),c.destroy(),Wn(u,ch),o.slice(0,r)}const OD=(t,e,n,r,s)=>PD(t,xD(t,e,n),r,s),cd=od,cg=BigInt(0),Df=BigInt(1);function bl(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Iu(t){const e=t.toString(16);return e.length&1?"0"+e:e}function v1(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?cg:BigInt("0x"+t)}function ud(t){return v1(yc(t))}function El(t){return qn(t),v1(yc(Uint8Array.from(t).reverse()))}function ug(t,e){return ig(t.toString(16).padStart(e*2,"0"))}function lg(t,e){return ug(t,e).reverse()}function hn(t,e,n){let r;if(typeof e=="string")try{r=ig(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(ng(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const uh=t=>typeof t=="bigint"&&cg<=t;function RD(t,e,n){return uh(t)&&uh(e)&&uh(n)&&e<=t&&t<n}function kf(t,e,n,r){if(!RD(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function $D(t){let e;for(e=0;t>cg;t>>=Df,e+=1);return e}const ld=t=>(Df<<BigInt(t))-Df;function DD(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),s=h=>Uint8Array.of(h);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},u=(...h)=>n(o,i,...h),l=(h=r(0))=>{o=u(s(0),h),i=u(),h.length!==0&&(o=u(s(1),h),i=u())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const f=[];for(;h<e;){i=u();const p=i.slice();f.push(p),h+=i.length}return ui(...f)};return(h,f)=>{c(),l(h);let p;for(;!(p=f(d()));)l();return c(),p}}function dd(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function Fy(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const gn=BigInt(0),Jt=BigInt(1),li=BigInt(2),kD=BigInt(3),C1=BigInt(4),_1=BigInt(5),A1=BigInt(8);function Ln(t,e){const n=t%e;return n>=gn?n:e+n}function er(t,e,n){let r=t;for(;e-- >gn;)r*=r,r%=n;return r}function jy(t,e){if(t===gn)throw new Error("invert: expected non-zero number");if(e<=gn)throw new Error("invert: expected positive modulus, got "+e);let n=Ln(t,e),r=e,s=gn,i=Jt;for(;n!==gn;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Jt)throw new Error("invert: does not exist");return Ln(s,e)}function I1(t,e){const n=(t.ORDER+Jt)/C1,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function UD(t,e){const n=(t.ORDER-_1)/A1,r=t.mul(e,li),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,li),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function BD(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Jt,n=0;for(;e%li===gn;)e/=li,n++;let r=li;const s=Vo(t);for(;zy(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return I1;let i=s.pow(r,e);const o=(e+Jt)/li;return function(a,c){if(a.is0(c))return c;if(zy(a,c)!==1)throw new Error("Cannot find square root");let u=n,l=a.mul(a.ONE,i),d=a.pow(c,e),h=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let f=1,p=a.sqr(d);for(;!a.eql(p,a.ONE);)if(f++,p=a.sqr(p),f===u)throw new Error("Cannot find square root");const g=Jt<<BigInt(u-f-1),m=a.pow(l,g);u=f,l=a.sqr(m),d=a.mul(d,l),h=a.mul(h,m)}return h}}function MD(t){return t%C1===kD?I1:t%A1===_1?UD:BD(t)}const LD=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function FD(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=LD.reduce((r,s)=>(r[s]="function",r),e);return dd(t,n),t}function jD(t,e,n){if(n<gn)throw new Error("invalid exponent, negatives unsupported");if(n===gn)return t.ONE;if(n===Jt)return e;let r=t.ONE,s=e;for(;n>gn;)n&Jt&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Jt;return r}function S1(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function zy(t,e){const n=(t.ORDER-Jt)/li,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function zD(t,e){e!==void 0&&ns(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Vo(t,e,n=!1,r={}){if(t<=gn)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const l=e;l.BITS&&(s=l.BITS),l.sqrt&&(i=l.sqrt),typeof l.isLE=="boolean"&&(n=l.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=zD(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const u=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:ld(o),ZERO:gn,ONE:Jt,create:l=>Ln(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return gn<=l&&l<t},is0:l=>l===gn,isValidNot0:l=>!u.is0(l)&&u.isValid(l),isOdd:l=>(l&Jt)===Jt,neg:l=>Ln(-l,t),eql:(l,d)=>l===d,sqr:l=>Ln(l*l,t),add:(l,d)=>Ln(l+d,t),sub:(l,d)=>Ln(l-d,t),mul:(l,d)=>Ln(l*d,t),pow:(l,d)=>jD(u,l,d),div:(l,d)=>Ln(l*jy(d,t),t),sqrN:l=>l*l,addN:(l,d)=>l+d,subN:(l,d)=>l-d,mulN:(l,d)=>l*d,inv:l=>jy(l,t),sqrt:i||(l=>(c||(c=MD(t)),c(u,l))),toBytes:l=>n?lg(l,a):ug(l,a),fromBytes:l=>{if(l.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+l.length);return n?El(l):ud(l)},invertBatch:l=>S1(u,l),cmov:(l,d,h)=>h?d:l});return Object.freeze(u)}function N1(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function T1(t){const e=N1(t);return e+Math.ceil(e/2)}function HD(t,e,n=!1){const r=t.length,s=N1(e),i=T1(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?El(t):ud(t),a=Ln(o,e-Jt)+Jt;return n?lg(a,s):ug(a,s)}const Po=BigInt(0),di=BigInt(1);function Oa(t,e){const n=e.negate();return t?n:e}function qD(t,e,n){const r=i=>i.pz,s=S1(t.Fp,n.map(r));return n.map((i,o)=>i.toAffine(s[o])).map(t.fromAffine)}function x1(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function lh(t,e){x1(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=ld(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function Hy(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=di);const u=e*r,l=u+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:h,isNegF:f,offsetF:u}}function WD(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function VD(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const dh=new WeakMap,P1=new WeakMap;function hh(t){return P1.get(t)||1}function qy(t){if(t!==Po)throw new Error("invalid wNAF")}function GD(t,e){return{constTimeNegate:Oa,hasPrecomputes(n){return hh(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Po;)r&di&&(s=s.add(i)),i=i.double(),r>>=di;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=lh(r,e),o=[];let a=n,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=lh(n,e);for(let c=0;c<a.windows;c++){const{nextN:u,offset:l,isZero:d,isNeg:h,isNegF:f,offsetF:p}=Hy(s,c,a);s=u,d?o=o.add(Oa(f,r[p])):i=i.add(Oa(h,r[l]))}return qy(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=lh(n,e);for(let a=0;a<o.windows&&s!==Po;a++){const{nextN:c,offset:u,isZero:l,isNeg:d}=Hy(s,a,o);if(s=c,!l){const h=r[u];i=i.add(d?h.negate():h)}}return qy(s),i},getPrecomputes(n,r,s){let i=dh.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),dh.set(r,i))),i},wNAFCached(n,r,s){const i=hh(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=hh(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){x1(r,e),P1.set(n,r),dh.delete(n)}}}function KD(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>Po||r>Po;)n&di&&(i=i.add(s)),r&di&&(o=o.add(s)),s=s.double(),n>>=di,r>>=di;return{p1:i,p2:o}}function YD(t,e,n,r){WD(n,t),VD(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=$D(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=ld(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){l.fill(o);for(let g=0;g<i;g++){const m=r[g],b=Number(m>>BigInt(f)&u);l[b]=l[b].add(n[g])}let p=o;for(let g=l.length-1,m=o;g>0;g--)m=m.add(l[g]),p=p.add(m);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function Wy(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return FD(e),e}else return Vo(t)}function ZD(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>Po))throw new Error(`CURVE.${o} must be positive bigint`)}const r=Wy(e.p,n.Fp),s=Wy(e.n,n.Fn),i=["Gx","Gy","a","b"];for(const o of i)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const la=BigInt(0),Ki=BigInt(1),Su=BigInt(2);function JD(t){return dd(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function XD(t){const e=JD(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||Wo,u=a?255:448,l=a?32:56,d=BigInt(a?9:5),h=BigInt(a?121665:39081),f=a?Su**BigInt(254):Su**BigInt(447),p=a?BigInt(8)*Su**BigInt(251)-Ki:BigInt(4)*Su**BigInt(445)-Ki,g=f+p+Ki,m=I=>Ln(I,n),b=w(d);function w(I){return lg(m(I),l)}function E(I){const j=hn("u coordinate",I,l);return a&&(j[31]&=127),m(El(j))}function N(I){return El(s(hn("scalar",I,l)))}function A(I,j){const U=M(E(j),N(I));if(U===la)throw new Error("invalid private or public key received");return w(U)}function R(I){return A(I,b)}function O(I,j,U){const L=m(I*(j-U));return j=m(j-L),U=m(U+L),{x_2:j,x_3:U}}function M(I,j){kf("u",I,la,n),kf("scalar",j,f,g);const U=j,L=I;let x=Ki,B=la,v=I,C=Ki,P=la;for(let S=BigInt(u-1);S>=la;S--){const $=U>>S&Ki;P^=$,{x_2:x,x_3:v}=O(P,x,v),{x_2:B,x_3:C}=O(P,B,C),P=$;const T=x+B,k=m(T*T),z=x-B,H=m(z*z),Z=k-H,K=v+C,we=v-C,Ae=m(we*T),Ee=m(K*z),et=Ae+Ee,xt=Ae-Ee;v=m(et*et),C=m(L*m(xt*xt)),x=m(k*H),B=m(Z*(k+m(h*Z)))}({x_2:x,x_3:v}=O(P,x,v)),{x_2:B,x_3:C}=O(P,B,C);const D=i(B);return m(x*D)}return{scalarMult:A,scalarMultBase:R,getSharedSecret:(I,j)=>A(I,j),getPublicKey:I=>R(I),utils:{randomPrivateKey:()=>c(l)},GuBytes:b.slice()}}BigInt(0);const QD=BigInt(1),Vy=BigInt(2),e8=BigInt(3),t8=BigInt(5);BigInt(8);const O1={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function n8(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=O1.p,o=t*t%i*t%i,a=er(o,Vy,i)*o%i,c=er(a,QD,i)*t%i,u=er(c,t8,i)*c%i,l=er(u,e,i)*u%i,d=er(l,n,i)*l%i,h=er(d,r,i)*d%i,f=er(h,s,i)*h%i,p=er(f,s,i)*h%i,g=er(p,e,i)*u%i;return{pow_p_5_8:er(g,Vy,i)*t%i,b2:o}}function r8(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Uf=(()=>{const t=O1.p;return XD({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=n8(e);return Ln(er(n,e8,t)*r,t)},adjustScalarBytes:r8})})();function Gy(t){t.lowS!==void 0&&bl("lowS",t.lowS),t.prehash!==void 0&&bl("prehash",t.prehash)}class s8 extends Error{constructor(e=""){super(e)}}const Kr={Err:s8,_tlv:{encode:(t,e)=>{const{Err:n}=Kr;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Iu(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Iu(s.length/2|128):"";return Iu(t)+i+s+e},decode(t,e){const{Err:n}=Kr;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Kr;if(t<Ra)throw new e("integer: negative integers are not allowed");let n=Iu(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Kr;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return ud(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Kr,s=hn("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:u,l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=Kr,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Ra=BigInt(0),$a=BigInt(1),i8=BigInt(2),Nu=BigInt(3),o8=BigInt(4);function a8(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function R1(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=hn("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function c8(t,e={}){const{Fp:n,Fn:r}=ZD("weierstrass",t,e),{h:s,n:i}=t;dd(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(M,I,j){const{x:U,y:L}=I.toAffine(),x=n.toBytes(U);if(bl("isCompressed",j),j){a();const B=!n.isOdd(L);return ui($1(B),x)}else return ui(Uint8Array.of(4),x,n.toBytes(L))}function u(M){qn(M);const I=n.BYTES,j=I+1,U=2*I+1,L=M.length,x=M[0],B=M.subarray(1);if(L===j&&(x===2||x===3)){const v=n.fromBytes(B);if(!n.isValid(v))throw new Error("bad point: is not on curve, wrong x");const C=h(v);let P;try{P=n.sqrt(C)}catch(S){const $=S instanceof Error?": "+S.message:"";throw new Error("bad point: is not on curve, sqrt error"+$)}a();const D=n.isOdd(P);return(x&1)===1!==D&&(P=n.neg(P)),{x:v,y:P}}else if(L===U&&x===4){const v=n.fromBytes(B.subarray(I*0,I*1)),C=n.fromBytes(B.subarray(I*1,I*2));if(!f(v,C))throw new Error("bad point: is not on curve");return{x:v,y:C}}else throw new Error(`bad point: got length ${L}, expected compressed=${j} or uncompressed=${U}`)}const l=e.toBytes||c,d=e.fromBytes||u,h=a8(n,t.a,t.b);function f(M,I){const j=n.sqr(I),U=h(M);return n.eql(j,U)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,Nu),o8),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function m(M,I,j=!1){if(!n.isValid(I)||j&&n.is0(I))throw new Error(`bad point coordinate ${M}`);return I}function b(M){if(!(M instanceof A))throw new Error("ProjectivePoint expected")}const w=Fy((M,I)=>{const{px:j,py:U,pz:L}=M;if(n.eql(L,n.ONE))return{x:j,y:U};const x=M.is0();I==null&&(I=x?n.ONE:n.inv(L));const B=n.mul(j,I),v=n.mul(U,I),C=n.mul(L,I);if(x)return{x:n.ZERO,y:n.ZERO};if(!n.eql(C,n.ONE))throw new Error("invZ was invalid");return{x:B,y:v}}),E=Fy(M=>{if(M.is0()){if(e.allowInfinityPoint&&!n.is0(M.py))return;throw new Error("bad point: ZERO")}const{x:I,y:j}=M.toAffine();if(!n.isValid(I)||!n.isValid(j))throw new Error("bad point: x or y not field elements");if(!f(I,j))throw new Error("bad point: equation left != right");if(!M.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function N(M,I,j,U,L){return j=new A(n.mul(j.px,M),j.py,j.pz),I=Oa(U,I),j=Oa(L,j),I.add(j)}class A{constructor(I,j,U){this.px=m("x",I),this.py=m("y",j,!0),this.pz=m("z",U),Object.freeze(this)}static fromAffine(I){const{x:j,y:U}=I||{};if(!I||!n.isValid(j)||!n.isValid(U))throw new Error("invalid affine point");if(I instanceof A)throw new Error("projective point not allowed");return n.is0(j)&&n.is0(U)?A.ZERO:new A(j,U,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){return qD(A,"pz",I)}static fromBytes(I){return qn(I),A.fromHex(I)}static fromHex(I){const j=A.fromAffine(d(hn("pointHex",I)));return j.assertValidity(),j}static fromPrivateKey(I){const j=R1(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return A.BASE.multiply(j(I))}static msm(I,j){return YD(A,r,I,j)}precompute(I=8,j=!0){return O.setWindowSize(this,I),j||this.multiply(Nu),this}_setWindowSize(I){this.precompute(I)}assertValidity(){E(this)}hasEvenY(){const{y:I}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(I)}equals(I){b(I);const{px:j,py:U,pz:L}=this,{px:x,py:B,pz:v}=I,C=n.eql(n.mul(j,v),n.mul(x,L)),P=n.eql(n.mul(U,v),n.mul(B,L));return C&&P}negate(){return new A(this.px,n.neg(this.py),this.pz)}double(){const{a:I,b:j}=t,U=n.mul(j,Nu),{px:L,py:x,pz:B}=this;let v=n.ZERO,C=n.ZERO,P=n.ZERO,D=n.mul(L,L),S=n.mul(x,x),$=n.mul(B,B),T=n.mul(L,x);return T=n.add(T,T),P=n.mul(L,B),P=n.add(P,P),v=n.mul(I,P),C=n.mul(U,$),C=n.add(v,C),v=n.sub(S,C),C=n.add(S,C),C=n.mul(v,C),v=n.mul(T,v),P=n.mul(U,P),$=n.mul(I,$),T=n.sub(D,$),T=n.mul(I,T),T=n.add(T,P),P=n.add(D,D),D=n.add(P,D),D=n.add(D,$),D=n.mul(D,T),C=n.add(C,D),$=n.mul(x,B),$=n.add($,$),D=n.mul($,T),v=n.sub(v,D),P=n.mul($,S),P=n.add(P,P),P=n.add(P,P),new A(v,C,P)}add(I){b(I);const{px:j,py:U,pz:L}=this,{px:x,py:B,pz:v}=I;let C=n.ZERO,P=n.ZERO,D=n.ZERO;const S=t.a,$=n.mul(t.b,Nu);let T=n.mul(j,x),k=n.mul(U,B),z=n.mul(L,v),H=n.add(j,U),Z=n.add(x,B);H=n.mul(H,Z),Z=n.add(T,k),H=n.sub(H,Z),Z=n.add(j,L);let K=n.add(x,v);return Z=n.mul(Z,K),K=n.add(T,z),Z=n.sub(Z,K),K=n.add(U,L),C=n.add(B,v),K=n.mul(K,C),C=n.add(k,z),K=n.sub(K,C),D=n.mul(S,Z),C=n.mul($,z),D=n.add(C,D),C=n.sub(k,D),D=n.add(k,D),P=n.mul(C,D),k=n.add(T,T),k=n.add(k,T),z=n.mul(S,z),Z=n.mul($,Z),k=n.add(k,z),z=n.sub(T,z),z=n.mul(S,z),Z=n.add(Z,z),T=n.mul(k,Z),P=n.add(P,T),T=n.mul(K,Z),C=n.mul(H,C),C=n.sub(C,T),T=n.mul(H,k),D=n.mul(K,D),D=n.add(D,T),new A(C,P,D)}subtract(I){return this.add(I.negate())}is0(){return this.equals(A.ZERO)}multiply(I){const{endo:j}=e;if(!r.isValidNot0(I))throw new Error("invalid scalar: out of range");let U,L;const x=B=>O.wNAFCached(this,B,A.normalizeZ);if(j){const{k1neg:B,k1:v,k2neg:C,k2:P}=j.splitScalar(I),{p:D,f:S}=x(v),{p:$,f:T}=x(P);L=S.add(T),U=N(j.beta,D,$,B,C)}else{const{p:B,f:v}=x(I);U=B,L=v}return A.normalizeZ([U,L])[0]}multiplyUnsafe(I){const{endo:j}=e,U=this;if(!r.isValid(I))throw new Error("invalid scalar: out of range");if(I===Ra||U.is0())return A.ZERO;if(I===$a)return U;if(O.hasPrecomputes(this))return this.multiply(I);if(j){const{k1neg:L,k1:x,k2neg:B,k2:v}=j.splitScalar(I),{p1:C,p2:P}=KD(A,U,x,v);return N(j.beta,C,P,L,B)}else return O.wNAFCachedUnsafe(U,I)}multiplyAndAddUnsafe(I,j,U){const L=this.multiplyUnsafe(j).add(I.multiplyUnsafe(U));return L.is0()?void 0:L}toAffine(I){return w(this,I)}isTorsionFree(){const{isTorsionFree:I}=e;return s===$a?!0:I?I(A,this):O.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:I}=e;return s===$a?this:I?I(A,this):this.multiplyUnsafe(s)}toBytes(I=!0){return bl("isCompressed",I),this.assertValidity(),l(A,this,I)}toRawBytes(I=!0){return this.toBytes(I)}toHex(I=!0){return yc(this.toBytes(I))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}A.BASE=new A(t.Gx,t.Gy,n.ONE),A.ZERO=new A(n.ZERO,n.ONE,n.ZERO),A.Fp=n,A.Fn=r;const R=r.BITS,O=GD(A,e.endo?Math.ceil(R/2):R);return A}function $1(t){return Uint8Array.of(t?2:3)}function u8(t,e,n={}){dd(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||Wo,s=e.hmac||((U,...L)=>ad(e.hash,U,ui(...L))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function u(U){const L=a>>$a;return U>L}function l(U){return u(U)?o.neg(U):U}function d(U,L){if(!o.isValidNot0(L))throw new Error(`invalid signature ${U}: out of range 1..CURVE.n`)}class h{constructor(L,x,B){d("r",L),d("s",x),this.r=L,this.s=x,B!=null&&(this.recovery=B),Object.freeze(this)}static fromCompact(L){const x=o.BYTES,B=hn("compactSignature",L,x*2);return new h(o.fromBytes(B.subarray(0,x)),o.fromBytes(B.subarray(x,x*2)))}static fromDER(L){const{r:x,s:B}=Kr.toSig(hn("DER",L));return new h(x,B)}assertValidity(){}addRecoveryBit(L){return new h(this.r,this.s,L)}recoverPublicKey(L){const x=i.ORDER,{r:B,s:v,recovery:C}=this;if(C==null||![0,1,2,3].includes(C))throw new Error("recovery id invalid");if(a*i8<x&&C>1)throw new Error("recovery id is ambiguous for h>1 curve");const P=C===2||C===3?B+a:B;if(!i.isValid(P))throw new Error("recovery id 2 or 3 invalid");const D=i.toBytes(P),S=t.fromHex(ui($1((C&1)===0),D)),$=o.inv(P),T=E(hn("msgHash",L)),k=o.create(-T*$),z=o.create(v*$),H=t.BASE.multiplyUnsafe(k).add(S.multiplyUnsafe(z));if(H.is0())throw new Error("point at infinify");return H.assertValidity(),H}hasHighS(){return u(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(L){if(L==="compact")return ui(o.toBytes(this.r),o.toBytes(this.s));if(L==="der")return ig(Kr.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return yc(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return yc(this.toBytes("compact"))}}const f=R1(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(U){try{return f(U),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const U=a;return HD(r(T1(U)),U)},precompute(U=8,L=t.BASE){return L.precompute(U,!1)}};function g(U,L=!0){return t.fromPrivateKey(U).toBytes(L)}function m(U){if(typeof U=="bigint")return!1;if(U instanceof t)return!0;const L=hn("key",U).length,x=i.BYTES,B=x+1,v=2*x+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===B))return L===B||L===v}function b(U,L,x=!0){if(m(U)===!0)throw new Error("first arg must be private key");if(m(L)===!1)throw new Error("second arg must be public key");return t.fromHex(L).multiply(f(U)).toBytes(x)}const w=e.bits2int||function(U){if(U.length>8192)throw new Error("input is too large");const L=ud(U),x=U.length*8-c;return x>0?L>>BigInt(x):L},E=e.bits2int_modN||function(U){return o.create(w(U))},N=ld(c);function A(U){return kf("num < 2^"+c,U,Ra,N),o.toBytes(U)}function R(U,L,x=O){if(["recovered","canonical"].some(H=>H in x))throw new Error("sign() legacy options not supported");const{hash:B}=e;let{lowS:v,prehash:C,extraEntropy:P}=x;v==null&&(v=!0),U=hn("msgHash",U),Gy(x),C&&(U=hn("prehashed msgHash",B(U)));const D=E(U),S=f(L),$=[A(S),A(D)];if(P!=null&&P!==!1){const H=P===!0?r(i.BYTES):P;$.push(hn("extraEntropy",H))}const T=ui(...$),k=D;function z(H){const Z=w(H);if(!o.isValidNot0(Z))return;const K=o.inv(Z),we=t.BASE.multiply(Z).toAffine(),Ae=o.create(we.x);if(Ae===Ra)return;const Ee=o.create(K*o.create(k+Ae*S));if(Ee===Ra)return;let et=(we.x===Ae?0:2)|Number(we.y&$a),xt=Ee;return v&&u(Ee)&&(xt=l(Ee),et^=1),new h(Ae,xt,et)}return{seed:T,k2sig:z}}const O={lowS:e.lowS,prehash:!1},M={lowS:e.lowS,prehash:!1};function I(U,L,x=O){const{seed:B,k2sig:v}=R(U,L,x);return DD(e.hash.outputLen,o.BYTES,s)(B,v)}t.BASE.precompute(8);function j(U,L,x,B=M){const v=U;L=hn("msgHash",L),x=hn("publicKey",x),Gy(B);const{lowS:C,prehash:P,format:D}=B;if("strict"in B)throw new Error("options.strict was renamed to lowS");if(D!==void 0&&!["compact","der","js"].includes(D))throw new Error('format must be "compact", "der" or "js"');const S=typeof v=="string"||ng(v),$=!S&&!D&&typeof v=="object"&&v!==null&&typeof v.r=="bigint"&&typeof v.s=="bigint";if(!S&&!$)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let T,k;try{if($)if(D===void 0||D==="js")T=new h(v.r,v.s);else throw new Error("invalid format");if(S){try{D!=="compact"&&(T=h.fromDER(v))}catch(et){if(!(et instanceof Kr.Err))throw et}!T&&D!=="der"&&(T=h.fromCompact(v))}k=t.fromHex(x)}catch{return!1}if(!T||C&&T.hasHighS())return!1;P&&(L=e.hash(L));const{r:z,s:H}=T,Z=E(L),K=o.inv(H),we=o.create(Z*K),Ae=o.create(z*K),Ee=t.BASE.multiplyUnsafe(we).add(k.multiplyUnsafe(Ae));return Ee.is0()?!1:o.create(Ee.x)===z}return Object.freeze({getPublicKey:g,getSharedSecret:b,sign:I,verify:j,utils:p,Point:t,Signature:h})}function l8(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=Vo(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function d8(t){const{CURVE:e,curveOpts:n}=l8(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function h8(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function f8(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=d8(t),s=c8(e,n),i=u8(s,r,n);return h8(t,i)}function Bf(t,e){const n=r=>f8({...t,hash:r});return{...n(e),create:n}}const D1={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},k1={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},U1={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},p8=Vo(D1.p),g8=Vo(k1.p),m8=Vo(U1.p),y8=Bf({...D1,Fp:p8,lowS:!1},od);Bf({...k1,Fp:g8,lowS:!1},I$),Bf({...U1,Fp:m8,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},A$);const w8=y8,B1="base10",Xt="base16",sr="base64pad",As="base64url",Qc="utf8",M1=0,Xr=1,eu=2,b8=0,Ky=1,Da=12,dg=32;function E8(){const t=Uf.utils.randomPrivateKey(),e=Uf.getPublicKey(t);return{privateKey:yn(t,Xt),publicKey:yn(e,Xt)}}function Mf(){const t=Wo(dg);return yn(t,Xt)}function v8(t,e){const n=Uf.getSharedSecret(jn(t,Xt),jn(e,Xt)),r=OD(cd,n,void 0,void 0,dg);return yn(r,Xt)}function Vu(t){const e=cd(jn(t,Xt));return yn(e,Xt)}function vr(t){const e=cd(jn(t,Qc));return yn(e,Xt)}function L1(t){return jn(`${t}`,B1)}function Si(t){return Number(yn(t,B1))}function F1(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function j1(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function C8(t){const e=L1(typeof t.type<"u"?t.type:M1);if(Si(e)===Xr&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?jn(t.senderPublicKey,Xt):void 0,r=typeof t.iv<"u"?jn(t.iv,Xt):Wo(Da),s=jn(t.symKey,Xt),i=b1(s,r).encrypt(jn(t.message,Qc)),o=z1({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===As?F1(o):o}function _8(t){const e=jn(t.symKey,Xt),{sealed:n,iv:r}=bc({encoded:t.encoded,encoding:t.encoding}),s=b1(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return yn(s,Qc)}function A8(t,e){const n=L1(eu),r=Wo(Da),s=jn(t,Qc),i=z1({type:n,sealed:s,iv:r});return e===As?F1(i):i}function I8(t,e){const{sealed:n}=bc({encoded:t,encoding:e});return yn(n,Qc)}function z1(t){if(Si(t.type)===eu)return yn(Pa([t.type,t.sealed]),sr);if(Si(t.type)===Xr){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return yn(Pa([t.type,t.senderPublicKey,t.iv,t.sealed]),sr)}return yn(Pa([t.type,t.iv,t.sealed]),sr)}function bc(t){const e=(t.encoding||sr)===As?j1(t.encoded):t.encoded,n=jn(e,sr),r=n.slice(b8,Ky),s=Ky;if(Si(r)===Xr){const c=s+dg,u=c+Da,l=n.slice(s,c),d=n.slice(c,u),h=n.slice(u);return{type:r,sealed:h,iv:d,senderPublicKey:l}}if(Si(r)===eu){const c=n.slice(s),u=Wo(Da);return{type:r,sealed:c,iv:u}}const i=s+Da,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function S8(t,e){const n=bc({encoded:t,encoding:e==null?void 0:e.encoding});return H1({type:Si(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?yn(n.senderPublicKey,Xt):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function H1(t){const e=(t==null?void 0:t.type)||M1;if(e===Xr){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function Yy(t){return t.type===Xr&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function Zy(t){return t.type===eu}function N8(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return Pa([new Uint8Array([4]),e,n])}function T8(t,e){const[n,r,s]=t.split("."),i=Buffer.from(j1(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,u=cd(c),l=N8(e);if(!w8.verify(Pa([o,a]),u,l))throw new Error("Invalid signature");return Ef(t).payload}const x8="irn";function vl(t){return(t==null?void 0:t.relay)||{protocol:x8}}function _a(t){const e=s6[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function P8(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function Jy(t){if(!t.includes("wc:")){const u=e1(t);u!=null&&u.includes("wc:")&&(t=u)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((u,l)=>{a[l]=u});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:O8(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:P8(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function O8(t){return t.startsWith("//")?t.substring(2):t}function R8(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function Xy(t){const e=new URLSearchParams,n=R8(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function Tu(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var $8=Object.defineProperty,D8=Object.defineProperties,k8=Object.getOwnPropertyDescriptors,Qy=Object.getOwnPropertySymbols,U8=Object.prototype.hasOwnProperty,B8=Object.prototype.propertyIsEnumerable,ew=(t,e,n)=>e in t?$8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,M8=(t,e)=>{for(var n in e||(e={}))U8.call(e,n)&&ew(t,n,e[n]);if(Qy)for(var n of Qy(e))B8.call(e,n)&&ew(t,n,e[n]);return t},L8=(t,e)=>D8(t,k8(e));function Go(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function F8(t){const e=[];return Object.values(t).forEach(n=>{e.push(...Go(n.accounts))}),e}function j8(t,e){const n=[];return Object.values(t).forEach(r=>{Go(r.accounts).includes(e)&&n.push(...r.methods)}),n}function z8(t,e){const n=[];return Object.values(t).forEach(r=>{Go(r.accounts).includes(e)&&n.push(...r.events)}),n}function hd(t){return t.includes(":")}function po(t){return hd(t)?t.split(":")[0]:t}function tw(t){var e,n,r;const s={};if(!$s(t))return s;for(const[i,o]of Object.entries(t)){const a=hd(i)?[i]:o.chains,c=o.methods||[],u=o.events||[],l=po(i);s[l]=L8(M8({},s[l]),{chains:Nr(a,(e=s[l])==null?void 0:e.chains),methods:Nr(c,(n=s[l])==null?void 0:n.methods),events:Nr(u,(r=s[l])==null?void 0:r.events)})}return s}function H8(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function nw(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=H8(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Nr(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function q8(t,e){var n,r,s,i,o,a;const c=tw(t),u=tw(e),l={},d=Object.keys(c).concat(Object.keys(u));for(const h of d)l[h]={chains:Nr((n=c[h])==null?void 0:n.chains,(r=u[h])==null?void 0:r.chains),methods:Nr((s=c[h])==null?void 0:s.methods,(i=u[h])==null?void 0:i.methods),events:Nr((o=c[h])==null?void 0:o.events,(a=u[h])==null?void 0:a.events)};return l}const W8={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},V8={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function X(t,e){const{message:n,code:r}=V8[t];return{message:e?`${n} ${e}`:n,code:r}}function at(t,e){const{message:n,code:r}=W8[t];return{message:e?`${n} ${e}`:n,code:r}}function Qr(t,e){return!!Array.isArray(t)}function $s(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function kt(t){return typeof t>"u"}function pt(t,e){return e&&kt(t)?!0:typeof t=="string"&&!!t.trim().length}function hg(t,e){return e&&kt(t)?!0:typeof t=="number"&&!isNaN(t)}function G8(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return ci(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:u}=t.namespaces[o],l=Go(a),d=n[o];(!ci(Yv(o,d),l)||!ci(d.methods,c)||!ci(d.events,u))&&(i=!1)}),i):!1}function Cl(t){return pt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function K8(t){if(pt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&Cl(n)}}return!1}function Y8(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(pt(t,!1)){if(e(t))return!0;const n=e1(t);return e(n)}}catch{}return!1}function Z8(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function J8(t){return t==null?void 0:t.topic}function X8(t,e){let n=null;return pt(t==null?void 0:t.publicKey,!1)||(n=X("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function rw(t){let e=!0;return Qr(t)?t.length&&(e=t.every(n=>pt(n,!1))):e=!1,e}function Q8(t,e,n){let r=null;return Qr(e)&&e.length?e.forEach(s=>{r||Cl(s)||(r=at("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):Cl(t)||(r=at("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function ek(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=Q8(s,Yv(s,i),`${e} ${n}`);o&&(r=o)}),r}function tk(t,e){let n=null;return Qr(t)?t.forEach(r=>{n||K8(r)||(n=at("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=at("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function nk(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=tk(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function rk(t,e){let n=null;return rw(t==null?void 0:t.methods)?rw(t==null?void 0:t.events)||(n=at("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=at("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function q1(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=rk(r,`${e}, namespace`);s&&(n=s)}),n}function sk(t,e,n){let r=null;if(t&&$s(t)){const s=q1(t,e);s&&(r=s);const i=ek(t,e,n);i&&(r=i)}else r=X("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function fh(t,e){let n=null;if(t&&$s(t)){const r=q1(t,e);r&&(n=r);const s=nk(t,e);s&&(n=s)}else n=X("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function W1(t){return pt(t.protocol,!0)}function ik(t,e){let n=!1;return t?t&&Qr(t)&&t.length&&t.forEach(r=>{n=W1(r)}):n=!0,n}function ok(t){return typeof t=="number"}function ln(t){return typeof t<"u"&&typeof t!==null}function ak(t){return!(!t||typeof t!="object"||!t.code||!hg(t.code,!1)||!t.message||!pt(t.message,!1))}function ck(t){return!(kt(t)||!pt(t.method,!1))}function uk(t){return!(kt(t)||kt(t.result)&&kt(t.error)||!hg(t.id,!1)||!pt(t.jsonrpc,!1))}function lk(t){return!(kt(t)||!pt(t.name,!1))}function sw(t,e){return!(!Cl(e)||!F8(t).includes(e))}function dk(t,e,n){return pt(n,!1)?j8(t,e).includes(n):!1}function hk(t,e,n){return pt(n,!1)?z8(t,e).includes(n):!1}function iw(t,e,n){let r=null;const s=fk(t),i=pk(e),o=Object.keys(s),a=Object.keys(i),c=ow(Object.keys(t)),u=ow(Object.keys(e)),l=c.filter(d=>!u.includes(d));return l.length&&(r=X("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${l.toString()}
      Received: ${Object.keys(e).toString()}`)),ci(o,a)||(r=X("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=Go(e[d].accounts);h.includes(d)||(r=X("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(ci(s[d].methods,i[d].methods)?ci(s[d].events,i[d].events)||(r=X("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=X("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function fk(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function ow(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function pk(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=Go(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function gk(t,e){return hg(t,!1)&&t<=e.max&&t>=e.min}function aw(){const t=Jc();return new Promise(e=>{switch(t){case Tn.browser:e(mk());break;case Tn.reactNative:e(yk());break;case Tn.node:e(wk());break;default:e(!0)}})}function mk(){return qo()&&(navigator==null?void 0:navigator.onLine)}async function yk(){if(Ws()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function wk(){return!0}function bk(t){switch(Jc()){case Tn.browser:Ek(t);break;case Tn.reactNative:vk(t);break}}function Ek(t){!Ws()&&qo()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function vk(t){Ws()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function Ck(){var t;return qo()&&Ai()?((t=Ai())==null?void 0:t.visibilityState)==="visible":!0}const ph={};class da{static get(e){return ph[e]}static set(e,n){ph[e]=n}static delete(e){delete ph[e]}}function _k(t){const e=Ho.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function Ak({publicKey:t,signature:e,payload:n}){var r;const s=Lf(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=Nk(n.address),a=n.era==="00"?new Uint8Array([0]):Lf(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),u=new Uint8Array([c&255,c>>8&255]),l=BigInt(`0x${Sk(n.tip)}`),d=xk(l),h=new Uint8Array([0,...t,o,...e,...a,...u,...d,...s]),f=Tk(h.length+1);return new Uint8Array([...f,i,...h])}function Ik(t){const e=Lf(t),n=m6.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function Lf(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Sk(t){return t.startsWith("0x")?t.slice(2):t}function Nk(t){const e=Ho.decode(t)[0];return e===42?0:e===60?2:1}function Tk(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function xk(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function Pk(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=_k(t.transaction.address),r=Ak({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return Ik(s)}const Ok="PARSE_ERROR",Rk="INVALID_REQUEST",$k="METHOD_NOT_FOUND",Dk="INVALID_PARAMS",V1="INTERNAL_ERROR",fg="SERVER_ERROR",kk=[-32700,-32600,-32601,-32602,-32603],ka={[Ok]:{code:-32700,message:"Parse error"},[Rk]:{code:-32600,message:"Invalid Request"},[$k]:{code:-32601,message:"Method not found"},[Dk]:{code:-32602,message:"Invalid params"},[V1]:{code:-32603,message:"Internal error"},[fg]:{code:-32e3,message:"Server error"}},G1=fg;function Uk(t){return kk.includes(t)}function cw(t){return Object.keys(ka).includes(t)?ka[t]:ka[G1]}function Bk(t){const e=Object.values(ka).find(n=>n.code===t);return e||ka[G1]}function K1(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var Y1={},Hr={},uw;function Mk(){if(uw)return Hr;uw=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.isBrowserCryptoAvailable=Hr.getSubtleCrypto=Hr.getBrowerCrypto=void 0;function t(){return(pn===null||pn===void 0?void 0:pn.crypto)||(pn===null||pn===void 0?void 0:pn.msCrypto)||{}}Hr.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}Hr.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return Hr.isBrowserCryptoAvailable=n,Hr}var qr={},lw;function Lk(){if(lw)return qr;lw=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.isBrowser=qr.isNode=qr.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}qr.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}qr.isNode=e;function n(){return!t()&&!e()}return qr.isBrowser=n,qr}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wc;e.__exportStar(Mk(),t),e.__exportStar(Lk(),t)})(Y1);function wr(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function hi(t=6){return BigInt(wr(t))}function Ts(t,e,n){return{id:n||wr(),jsonrpc:"2.0",method:t,params:e}}function fd(t,e){return{id:t,jsonrpc:"2.0",result:e}}function pd(t,e,n){return{id:t,jsonrpc:"2.0",error:Fk(e)}}function Fk(t,e){return typeof t>"u"?cw(V1):(typeof t=="string"&&(t=Object.assign(Object.assign({},cw(fg)),{message:t})),Uk(t.code)&&(t=Bk(t.code)),t)}let jk=class{},zk=class extends jk{constructor(){super()}},Hk=class extends zk{constructor(e){super()}};const qk="^https?:",Wk="^wss?:";function Vk(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Z1(t,e){const n=Vk(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function dw(t){return Z1(t,qk)}function hw(t){return Z1(t,Wk)}function Gk(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function J1(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function pg(t){return J1(t)&&"method"in t}function gd(t){return J1(t)&&(br(t)||Mn(t))}function br(t){return"result"in t}function Mn(t){return"error"in t}let Kn=class extends Hk{constructor(e){super(e),this.events=new Gn.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Ts(e.method,e.params||[],e.id||hi().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Mn(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),gd(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const Kk=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Yk=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",fw=t=>t.split("?")[0],pw=10,Zk=Kk();let Jk=class{constructor(e){if(this.url=e,this.events=new Gn.EventEmitter,this.registering=!1,!hw(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ts(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!hw(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=Y1.isReactNative()?void 0:{rejectUnauthorized:!Gk(e)},i=new Zk(e,[],s);Yk()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?_i(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=pd(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return K1(e,fw(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>pw&&this.events.setMaxListeners(pw)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${fw(this.url)}`));return this.events.emit("register_error",n),n}};var Xk={};const X1="wc",Q1=2,Ff="core",Rr=`${X1}@2:${Ff}:`,Qk={logger:"error"},eU={database:":memory:"},tU="crypto",gw="client_ed25519_seed",nU=J.ONE_DAY,rU="keychain",sU="0.3",iU="messages",oU="0.3",mw=J.SIX_HOURS,aU="publisher",eC="irn",cU="error",tC="wss://relay.walletconnect.org",uU="relayer",It={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},lU="_subscription",Dn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},dU=.1,jf="2.21.3",nt={link_mode:"link_mode",relay:"relay"},Gu={inbound:"inbound",outbound:"outbound"},hU="0.3",fU="WALLETCONNECT_CLIENT_ID",yw="WALLETCONNECT_LINK_MODE_APPS",_n={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},pU="subscription",gU="0.3",mU="pairing",yU="0.3",ha={wc_pairingDelete:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:J.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:J.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:J.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:J.ONE_DAY,prompt:!1,tag:0},res:{ttl:J.ONE_DAY,prompt:!1,tag:0}}},ri={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Jn={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},wU="history",bU="0.3",EU="expirer",Bn={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},vU="0.3",CU="verify-api",_U="https://verify.walletconnect.com",nC="https://verify.walletconnect.org",Ua=nC,AU=`${Ua}/v3`,IU=[_U,nC],SU="echo",NU="https://echo.walletconnect.com",yr={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Vr={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Xn={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Zs={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Js={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},fa={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},TU=.1,xU="event-client",PU=86400,OU="https://pulse.walletconnect.org/batch";function RU(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,b=0,w=p.length;b!==w&&p[b]===0;)b++,g++;for(var E=(w-b)*l+1>>>0,N=new Uint8Array(E);b!==w;){for(var A=p[b],R=0,O=E-1;(A!==0||R<m)&&O!==-1;O--,R++)A+=256*N[O]>>>0,N[O]=A%a>>>0,A=A/a>>>0;if(A!==0)throw new Error("Non-zero carry");m=R,b++}for(var M=E-m;M!==E&&N[M]===0;)M++;for(var I=c.repeat(g);M<E;++M)I+=t.charAt(N[M]);return I}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,b=0;p[g]===c;)m++,g++;for(var w=(p.length-g)*u+1>>>0,E=new Uint8Array(w);p[g];){var N=n[p.charCodeAt(g)];if(N===255)return;for(var A=0,R=w-1;(N!==0||A<b)&&R!==-1;R--,A++)N+=a*E[R]>>>0,E[R]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");b=A,g++}if(p[g]!==" "){for(var O=w-b;O!==w&&E[O]===0;)O++;for(var M=new Uint8Array(m+(w-O)),I=m;O!==w;)M[I++]=E[O++];return M}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var $U=RU,DU=$U;const rC=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},kU=t=>new TextEncoder().encode(t),UU=t=>new TextDecoder().decode(t);class BU{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class MU{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return sC(this,e)}}class LU{constructor(e){this.decoders=e}or(e){return sC(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const sC=(t,e)=>new LU({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class FU{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new BU(e,n,r),this.decoder=new MU(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const md=({name:t,prefix:e,encode:n,decode:r})=>new FU(t,e,n,r),tu=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=DU(n,e);return md({prefix:t,name:e,encode:r,decode:i=>rC(s(i))})},jU=(t,e,n,r)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},zU=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Ft=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>md({prefix:e,name:t,encode(s){return zU(s,r,n)},decode(s){return jU(s,r,n,t)}}),HU=md({prefix:"\0",name:"identity",encode:t=>UU(t),decode:t=>kU(t)});var qU=Object.freeze({__proto__:null,identity:HU});const WU=Ft({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var VU=Object.freeze({__proto__:null,base2:WU});const GU=Ft({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var KU=Object.freeze({__proto__:null,base8:GU});const YU=tu({prefix:"9",name:"base10",alphabet:"0123456789"});var ZU=Object.freeze({__proto__:null,base10:YU});const JU=Ft({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),XU=Ft({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var QU=Object.freeze({__proto__:null,base16:JU,base16upper:XU});const e4=Ft({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),t4=Ft({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),n4=Ft({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),r4=Ft({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),s4=Ft({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),i4=Ft({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),o4=Ft({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),a4=Ft({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),c4=Ft({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var u4=Object.freeze({__proto__:null,base32:e4,base32upper:t4,base32pad:n4,base32padupper:r4,base32hex:s4,base32hexupper:i4,base32hexpad:o4,base32hexpadupper:a4,base32z:c4});const l4=tu({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),d4=tu({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var h4=Object.freeze({__proto__:null,base36:l4,base36upper:d4});const f4=tu({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),p4=tu({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var g4=Object.freeze({__proto__:null,base58btc:f4,base58flickr:p4});const m4=Ft({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),y4=Ft({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),w4=Ft({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),b4=Ft({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var E4=Object.freeze({__proto__:null,base64:m4,base64pad:y4,base64url:w4,base64urlpad:b4});const iC=Array.from(""),v4=iC.reduce((t,e,n)=>(t[n]=e,t),[]),C4=iC.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function _4(t){return t.reduce((e,n)=>(e+=v4[n],e),"")}function A4(t){const e=[];for(const n of t){const r=C4[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const I4=md({prefix:"",name:"base256emoji",encode:_4,decode:A4});var S4=Object.freeze({__proto__:null,base256emoji:I4}),N4=oC,ww=128,T4=-128,x4=Math.pow(2,31);function oC(t,e,n){e=e||[],n=n||0;for(var r=n;t>=x4;)e[n++]=t&255|ww,t/=128;for(;t&T4;)e[n++]=t&255|ww,t>>>=7;return e[n]=t|0,oC.bytes=n-r+1,e}var P4=zf,O4=128,bw=127;function zf(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw zf.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&bw)<<s:(o&bw)*Math.pow(2,s),s+=7}while(o>=O4);return zf.bytes=i-r,n}var R4=Math.pow(2,7),$4=Math.pow(2,14),D4=Math.pow(2,21),k4=Math.pow(2,28),U4=Math.pow(2,35),B4=Math.pow(2,42),M4=Math.pow(2,49),L4=Math.pow(2,56),F4=Math.pow(2,63),j4=function(t){return t<R4?1:t<$4?2:t<D4?3:t<k4?4:t<U4?5:t<B4?6:t<M4?7:t<L4?8:t<F4?9:10},z4={encode:N4,decode:P4,encodingLength:j4},aC=z4;const Ew=(t,e,n=0)=>(aC.encode(t,e,n),e),vw=t=>aC.encodingLength(t),Hf=(t,e)=>{const n=e.byteLength,r=vw(t),s=r+vw(n),i=new Uint8Array(s+n);return Ew(t,i,0),Ew(n,i,r),i.set(e,s),new H4(t,n,e,i)};class H4{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const cC=({name:t,code:e,encode:n})=>new q4(t,e,n);class q4{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?Hf(this.code,n):n.then(r=>Hf(this.code,r))}else throw Error("Unknown type, must be binary type")}}const uC=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),W4=cC({name:"sha2-256",code:18,encode:uC("SHA-256")}),V4=cC({name:"sha2-512",code:19,encode:uC("SHA-512")});var G4=Object.freeze({__proto__:null,sha256:W4,sha512:V4});const lC=0,K4="identity",dC=rC,Y4=t=>Hf(lC,dC(t)),Z4={code:lC,name:K4,encode:dC,digest:Y4};var J4=Object.freeze({__proto__:null,identity:Z4});new TextEncoder,new TextDecoder;const Cw={...qU,...VU,...KU,...ZU,...QU,...u4,...h4,...g4,...E4,...S4};({...G4,...J4});function hC(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function X4(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?hC(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function fC(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const _w=fC("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),gh=fC("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=X4(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),Q4={utf8:_w,"utf-8":_w,hex:Cw.base16,latin1:gh,ascii:gh,binary:gh,...Cw};function eB(t,e="utf8"){const n=Q4[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?hC(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var tB=Object.defineProperty,nB=(t,e,n)=>e in t?tB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gr=(t,e,n)=>nB(t,typeof e!="symbol"?e+"":e,n);class rB{constructor(e,n){this.core=e,this.logger=n,gr(this,"keychain",new Map),gr(this,"name",rU),gr(this,"version",sU),gr(this,"initialized",!1),gr(this,"storagePrefix",Rr),gr(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),gr(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),gr(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),gr(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=X("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),gr(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Zt(n,this.name)}get context(){return En(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Nf(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Tf(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}}var sB=Object.defineProperty,iB=(t,e,n)=>e in t?sB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rt=(t,e,n)=>iB(t,typeof e!="symbol"?e+"":e,n);class oB{constructor(e,n,r){this.core=e,this.logger=n,Rt(this,"name",tU),Rt(this,"keychain"),Rt(this,"randomSessionIdentifier",Mf()),Rt(this,"initialized",!1),Rt(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Rt(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Rt(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=ty(s);return lv(i.publicKey)}),Rt(this,"generateKeyPair",()=>{this.isInitialized();const s=E8();return this.setPrivateKey(s.publicKey,s.privateKey)}),Rt(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=ty(i),a=this.randomSessionIdentifier;return await AR(a,s,nU,o)}),Rt(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=v8(a,i);return this.setSymKey(c,o)}),Rt(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||Vu(s);return await this.keychain.set(o,s),o}),Rt(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Rt(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Rt(this,"encode",async(s,i,o)=>{this.isInitialized();const a=H1(o),c=ts(i);if(Zy(a))return A8(c,o==null?void 0:o.encoding);if(Yy(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const u=this.getSymKey(s),{type:l,senderPublicKey:d}=a;return C8({type:l,symKey:u,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Rt(this,"decode",async(s,i,o)=>{this.isInitialized();const a=S8(i,o);if(Zy(a)){const c=I8(i,o==null?void 0:o.encoding);return _i(c)}if(Yy(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;s=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(s),u=_8({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return _i(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Rt(this,"getPayloadType",(s,i=sr)=>{const o=bc({encoded:s,encoding:i});return Si(o.type)}),Rt(this,"getPayloadSenderPublicKey",(s,i=sr)=>{const o=bc({encoded:s,encoding:i});return o.senderPublicKey?yn(o.senderPublicKey,Xt):void 0}),this.core=e,this.logger=Zt(n,this.name),this.keychain=r||new rB(this.core,this.logger)}get context(){return En(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(gw)}catch{e=Mf(),await this.keychain.set(gw,e)}return eB(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}}var aB=Object.defineProperty,cB=Object.defineProperties,uB=Object.getOwnPropertyDescriptors,Aw=Object.getOwnPropertySymbols,lB=Object.prototype.hasOwnProperty,dB=Object.prototype.propertyIsEnumerable,qf=(t,e,n)=>e in t?aB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hB=(t,e)=>{for(var n in e||(e={}))lB.call(e,n)&&qf(t,n,e[n]);if(Aw)for(var n of Aw(e))dB.call(e,n)&&qf(t,n,e[n]);return t},fB=(t,e)=>cB(t,uB(e)),Cn=(t,e,n)=>qf(t,typeof e!="symbol"?e+"":e,n);class pB extends Cx{constructor(e,n){super(e,n),this.logger=e,this.core=n,Cn(this,"messages",new Map),Cn(this,"messagesWithoutClientAck",new Map),Cn(this,"name",iU),Cn(this,"version",oU),Cn(this,"initialized",!1),Cn(this,"storagePrefix",Rr),Cn(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Cn(this,"set",async(r,s,i)=>{this.isInitialized();const o=vr(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===Gu.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,fB(hB({},c),{[o]:s}))}return await this.persist(),o}),Cn(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),Cn(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),Cn(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=vr(s);return typeof i[o]<"u"}),Cn(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=vr(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),Cn(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Zt(e,this.name),this.core=n}get context(){return En(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Nf(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Nf(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Tf(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?Tf(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}}var gB=Object.defineProperty,mB=Object.defineProperties,yB=Object.getOwnPropertyDescriptors,Iw=Object.getOwnPropertySymbols,wB=Object.prototype.hasOwnProperty,bB=Object.prototype.propertyIsEnumerable,Wf=(t,e,n)=>e in t?gB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xu=(t,e)=>{for(var n in e||(e={}))wB.call(e,n)&&Wf(t,n,e[n]);if(Iw)for(var n of Iw(e))bB.call(e,n)&&Wf(t,n,e[n]);return t},mh=(t,e)=>mB(t,yB(e)),Qn=(t,e,n)=>Wf(t,typeof e!="symbol"?e+"":e,n);class EB extends _x{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Qn(this,"events",new Gn.EventEmitter),Qn(this,"name",aU),Qn(this,"queue",new Map),Qn(this,"publishTimeout",J.toMiliseconds(J.ONE_MINUTE)),Qn(this,"initialPublishTimeout",J.toMiliseconds(J.ONE_SECOND*15)),Qn(this,"needsTransportRestart",!1),Qn(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||mw,c=vl(i),u=(i==null?void 0:i.prompt)||!1,l=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||hi().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:u,tag:l,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${l}`;try{const p=new Promise(async g=>{const m=({id:w})=>{h.opts.id===w&&(this.removeRequestFromQueue(w),this.relayer.events.removeListener(It.publish,m),g(h))};this.relayer.events.on(It.publish,m);const b=Ns(new Promise((w,E)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:u,tag:l,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(w).catch(N=>{this.logger.warn(N,N==null?void 0:N.message),E(N)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${l}`);try{await b,this.events.removeListener(It.publish,m)}catch(w){this.queue.set(d,mh(xu({},h),{attempt:1})),this.logger.warn(w,w==null?void 0:w.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await Ns(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),Qn(this,"on",(r,s)=>{this.events.on(r,s)}),Qn(this,"once",(r,s)=>{this.events.once(r,s)}),Qn(this,"off",(r,s)=>{this.events.off(r,s)}),Qn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Zt(n,this.name),this.registerEventListeners()}get context(){return En(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=mw,prompt:u,tag:l,id:d,attestation:h,tvf:f}=e,p={method:_a(vl().protocol).publish,params:xu({topic:o,message:a,ttl:c,prompt:u,tag:l,attestation:h},f),id:d};kt((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),kt((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(It.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,mh(xu({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(mh(xu({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(ki.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(It.connection_stalled);return}this.checkQueue()}),this.relayer.on(It.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var vB=Object.defineProperty,CB=(t,e,n)=>e in t?vB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yi=(t,e,n)=>CB(t,typeof e!="symbol"?e+"":e,n);class _B{constructor(){Yi(this,"map",new Map),Yi(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Yi(this,"get",e=>this.map.get(e)||[]),Yi(this,"exists",(e,n)=>this.get(e).includes(n)),Yi(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Yi(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var AB=Object.defineProperty,IB=Object.defineProperties,SB=Object.getOwnPropertyDescriptors,Sw=Object.getOwnPropertySymbols,NB=Object.prototype.hasOwnProperty,TB=Object.prototype.propertyIsEnumerable,Vf=(t,e,n)=>e in t?AB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pa=(t,e)=>{for(var n in e||(e={}))NB.call(e,n)&&Vf(t,n,e[n]);if(Sw)for(var n of Sw(e))TB.call(e,n)&&Vf(t,n,e[n]);return t},yh=(t,e)=>IB(t,SB(e)),Ze=(t,e,n)=>Vf(t,typeof e!="symbol"?e+"":e,n);class xB extends Sx{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Ze(this,"subscriptions",new Map),Ze(this,"topicMap",new _B),Ze(this,"events",new Gn.EventEmitter),Ze(this,"name",pU),Ze(this,"version",gU),Ze(this,"pending",new Map),Ze(this,"cached",[]),Ze(this,"initialized",!1),Ze(this,"storagePrefix",Rr),Ze(this,"subscribeTimeout",J.toMiliseconds(J.ONE_MINUTE)),Ze(this,"initialSubscribeTimeout",J.toMiliseconds(J.ONE_SECOND*15)),Ze(this,"clientId"),Ze(this,"batchSubscribeTopicsLimit",500),Ze(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Ze(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=vl(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),Ze(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Ze(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Ze(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Ze(this,"on",(r,s)=>{this.events.on(r,s)}),Ze(this,"once",(r,s)=>{this.events.once(r,s)}),Ze(this,"off",(r,s)=>{this.events.off(r,s)}),Ze(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Ze(this,"start",async()=>{await this.onConnect()}),Ze(this,"stop",async()=>{await this.onDisconnect()}),Ze(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Ze(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Ze(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(ki.pulse,async()=>{await this.checkPending()}),this.events.on(_n.created,async r=>{const s=_n.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(_n.deleted,async r=>{const s=_n.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Zt(n,this.name),this.clientId=""}get context(){return En(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=vl(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=at("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===nt.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:_a(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===nt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(l=>this.logger.warn(l))},J.toMiliseconds(J.ONE_SECOND)),a;const c=new Promise(async l=>{const d=h=>{h.topic===e&&(this.events.removeListener(_n.created,d),l(h.id))};this.events.on(_n.created,d);try{const h=await Ns(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(_n.created,d),l(h)}catch{}}),u=await Ns(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!u&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return u?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(It.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:_a(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Ns(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(It.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:_a(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Ns(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(It.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:_a(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,yh(pa({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,pa({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,pa({},n)),this.topicMap.set(n.topic,e),this.events.emit(_n.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(_n.deleted,yh(pa({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(_n.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(_n.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>yh(pa({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await H6(J.toMiliseconds(J.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return vr(e+await this.getClientId())}}var PB=Object.defineProperty,Nw=Object.getOwnPropertySymbols,OB=Object.prototype.hasOwnProperty,RB=Object.prototype.propertyIsEnumerable,Gf=(t,e,n)=>e in t?PB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tw=(t,e)=>{for(var n in e||(e={}))OB.call(e,n)&&Gf(t,n,e[n]);if(Nw)for(var n of Nw(e))RB.call(e,n)&&Gf(t,n,e[n]);return t},Ue=(t,e,n)=>Gf(t,typeof e!="symbol"?e+"":e,n);class $B extends Ax{constructor(e){super(e),Ue(this,"protocol","wc"),Ue(this,"version",2),Ue(this,"core"),Ue(this,"logger"),Ue(this,"events",new Gn.EventEmitter),Ue(this,"provider"),Ue(this,"messages"),Ue(this,"subscriber"),Ue(this,"publisher"),Ue(this,"name",uU),Ue(this,"transportExplicitlyClosed",!1),Ue(this,"initialized",!1),Ue(this,"connectionAttemptInProgress",!1),Ue(this,"relayUrl"),Ue(this,"projectId"),Ue(this,"packageName"),Ue(this,"bundleId"),Ue(this,"hasExperiencedNetworkDisruption",!1),Ue(this,"pingTimeout"),Ue(this,"heartBeatTimeout",J.toMiliseconds(J.THIRTY_SECONDS+J.FIVE_SECONDS)),Ue(this,"reconnectTimeout"),Ue(this,"connectPromise"),Ue(this,"reconnectInProgress",!1),Ue(this,"requestsInFlight",[]),Ue(this,"connectTimeout",J.toMiliseconds(J.ONE_SECOND*15)),Ue(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||hi().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),Ue(this,"resetPingTimeout",()=>{yl()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),Ue(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),Ue(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(It.connect)}),Ue(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Ue(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(It.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Ue(this,"registerProviderListeners",()=>{this.provider.on(Dn.payload,this.onPayloadHandler),this.provider.on(Dn.connect,this.onConnectHandler),this.provider.on(Dn.disconnect,this.onDisconnectHandler),this.provider.on(Dn.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Zt(e.logger,this.name):Gc(Mo({level:e.logger||cU})),this.messages=new pB(this.logger,e.core),this.subscriber=new xB(this,this.logger),this.publisher=new EB(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||tC,this.projectId=e.projectId,N6()?this.packageName=yy():T6()&&(this.bundleId=yy()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return En(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:nt.relay},Gu.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const u=l=>{l.topic===e&&(this.subscriber.off(_n.created,u),c())};return await Promise.all([new Promise(l=>{c=l,this.subscriber.on(_n.created,u)}),new Promise(async(l,d)=>{a=await this.subscriber.subscribe(e,Tw({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,l()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Ns(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await aw())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=yt(J.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(It.message,e),await this.recordMessageEvent(e,Gu.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Dn.disconnect,i),await Ns(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Dn.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Dn.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Dn.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,J.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(yl())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Kn(new Jk($6({sdkVersion:jf,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),pg(e)){if(!e.method.endsWith(lU))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:nt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Tw({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else gd(e)&&this.events.emit(It.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Gu.inbound),this.events.emit(It.message,e))}async acknowledgePayload(e){const n=fd(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Dn.payload,this.onPayloadHandler),this.provider.off(Dn.connect,this.onConnectHandler),this.provider.off(Dn.disconnect,this.onDisconnectHandler),this.provider.off(Dn.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await aw();bk(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(ki.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&Ck())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(It.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},J.toMiliseconds(dU)))))}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function DB(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function xw(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Pw(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const kB="[object RegExp]",UB="[object String]",BB="[object Number]",MB="[object Boolean]",Ow="[object Arguments]",LB="[object Symbol]",FB="[object Date]",jB="[object Map]",zB="[object Set]",HB="[object Array]",qB="[object Function]",WB="[object ArrayBuffer]",wh="[object Object]",VB="[object Error]",GB="[object DataView]",KB="[object Uint8Array]",YB="[object Uint8ClampedArray]",ZB="[object Uint16Array]",JB="[object Uint32Array]",XB="[object BigUint64Array]",QB="[object Int8Array]",eM="[object Int16Array]",tM="[object Int32Array]",nM="[object BigInt64Array]",rM="[object Float32Array]",sM="[object Float64Array]";function iM(){}function Rw(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function oM(t,e,n){return Aa(t,e,void 0,void 0,void 0,void 0,n)}function Aa(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Ba(t,e,i,o)}return Ba(t,e,i,o)}function Ba(t,e,n,r){if(Object.is(t,e))return!0;let s=Pw(t),i=Pw(e);if(s===Ow&&(s=wh),i===Ow&&(i=wh),s!==i)return!1;switch(s){case UB:return t.toString()===e.toString();case BB:{const c=t.valueOf(),u=e.valueOf();return DB(c,u)}case MB:case FB:case LB:return Object.is(t.valueOf(),e.valueOf());case kB:return t.source===e.source&&t.flags===e.flags;case qB:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case jB:{if(t.size!==e.size)return!1;for(const[c,u]of t.entries())if(!e.has(c)||!Aa(u,e.get(c),c,t,e,n,r))return!1;return!0}case zB:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),u=Array.from(e.values());for(let l=0;l<c.length;l++){const d=c[l],h=u.findIndex(f=>Aa(d,f,void 0,t,e,n,r));if(h===-1)return!1;u.splice(h,1)}return!0}case HB:case KB:case YB:case ZB:case JB:case XB:case QB:case eM:case tM:case nM:case rM:case sM:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Aa(t[c],e[c],c,t,e,n,r))return!1;return!0}case WB:return t.byteLength!==e.byteLength?!1:Ba(new Uint8Array(t),new Uint8Array(e),n,r);case GB:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Ba(new Uint8Array(t),new Uint8Array(e),n,r);case VB:return t.name===e.name&&t.message===e.message;case wh:{if(!(Ba(t.constructor,e.constructor,n,r)||Rw(t)&&Rw(e)))return!1;const c=[...Object.keys(t),...xw(t)],u=[...Object.keys(e),...xw(e)];if(c.length!==u.length)return!1;for(let l=0;l<c.length;l++){const d=c[l],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!Aa(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function aM(t,e){return oM(t,e,iM)}var cM=Object.defineProperty,$w=Object.getOwnPropertySymbols,uM=Object.prototype.hasOwnProperty,lM=Object.prototype.propertyIsEnumerable,Kf=(t,e,n)=>e in t?cM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dw=(t,e)=>{for(var n in e||(e={}))uM.call(e,n)&&Kf(t,n,e[n]);if($w)for(var n of $w(e))lM.call(e,n)&&Kf(t,n,e[n]);return t},on=(t,e,n)=>Kf(t,typeof e!="symbol"?e+"":e,n);class Mi extends Ix{constructor(e,n,r,s=Rr,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,on(this,"map",new Map),on(this,"version",hU),on(this,"cached",[]),on(this,"initialized",!1),on(this,"getKey"),on(this,"storagePrefix",Rr),on(this,"recentlyDeleted",[]),on(this,"recentlyDeletedLimit",200),on(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!kt(o)?this.map.set(this.getKey(o),o):Z8(o)?this.map.set(o.id,o):J8(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),on(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),on(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),on(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>aM(a[c],o[c]))):this.values)),on(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=Dw(Dw({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),on(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Zt(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return En(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=X("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}}var dM=Object.defineProperty,hM=(t,e,n)=>e in t?dM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pe=(t,e,n)=>hM(t,typeof e!="symbol"?e+"":e,n);class fM{constructor(e,n){this.core=e,this.logger=n,Pe(this,"name",mU),Pe(this,"version",yU),Pe(this,"events",new Up),Pe(this,"pairings"),Pe(this,"initialized",!1),Pe(this,"storagePrefix",Rr),Pe(this,"ignoredPayloadTypes",[Xr]),Pe(this,"registeredMethods",[]),Pe(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Pe(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Pe(this,"create",async r=>{this.isInitialized();const s=Mf(),i=await this.core.crypto.setSymKey(s),o=yt(J.FIVE_MINUTES),a={protocol:eC},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},u=Xy({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(ri.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:u}}),Pe(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[yr.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:u}=Jy(r.uri);s.props.properties.topic=i,s.addTrace(yr.pairing_uri_validation_success),s.addTrace(yr.pairing_uri_not_expired);let l;if(this.pairings.keys.includes(i)){if(l=this.pairings.get(i),s.addTrace(yr.existing_pairing),l.active)throw s.setError(Vr.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(yr.pairing_not_expired)}const d=c||yt(J.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:u};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(yr.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(ri.create,h),s.addTrace(yr.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(yr.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Vr.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(Vr.subscribe_pairing_topic_failure),f}return s.addTrace(yr.subscribe_pairing_topic_success),h}),Pe(this,"activate",async({topic:r})=>{this.isInitialized();const s=yt(J.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Pe(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=ti();this.events.once(He("pairing_ping",i),({error:u})=>{u?c(u):a()}),await o()}}),Pe(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Pe(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Pe(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Pe(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",at("USER_DISCONNECTED")),await this.deletePairing(s))}),Pe(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return Xy({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Pe(this,"sendRequest",async(r,s,i)=>{const o=Ts(s,i),a=await this.core.crypto.encode(r,o),c=ha[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Pe(this,"sendResult",async(r,s,i)=>{const o=fd(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,u=ha[c].res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),Pe(this,"sendError",async(r,s,i)=>{const o=pd(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,u=ha[c]?ha[c].res:ha.unregistered_method.res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),Pe(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,at("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Pe(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>bs(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Pe(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Pe(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Pe(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(ri.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Pe(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{br(s)?this.events.emit(He("pairing_ping",i),{}):Mn(s)&&this.events.emit(He("pairing_ping",i),{error:s.error})},500)}),Pe(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(ri.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Pe(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=at("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Pe(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(at("WC_METHOD_UNSUPPORTED",r))}),Pe(this,"isValidPair",(r,s)=>{var i;if(!ln(r)){const{message:a}=X("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Vr.malformed_pairing_uri),new Error(a)}if(!Y8(r.uri)){const{message:a}=X("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Vr.malformed_pairing_uri),new Error(a)}const o=Jy(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=X("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Vr.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=X("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Vr.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&J.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Vr.pairing_expired);const{message:a}=X("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Pe(this,"isValidPing",async r=>{if(!ln(r)){const{message:i}=X("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Pe(this,"isValidDisconnect",async r=>{if(!ln(r)){const{message:i}=X("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Pe(this,"isValidPairingTopic",async r=>{if(!pt(r,!1)){const{message:s}=X("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=X("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(bs(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=X("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Zt(n,this.name),this.pairings=new Mi(this.core,this.logger,this.name,this.storagePrefix)}get context(){return En(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(It.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==nt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);pg(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):gd(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Bn.expired,async e=>{const{topic:n}=Qv(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(ri.expire,{topic:n}))})}}var pM=Object.defineProperty,gM=(t,e,n)=>e in t?pM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$t=(t,e,n)=>gM(t,typeof e!="symbol"?e+"":e,n);class mM extends vx{constructor(e,n){super(e,n),this.core=e,this.logger=n,$t(this,"records",new Map),$t(this,"events",new Gn.EventEmitter),$t(this,"name",wU),$t(this,"version",bU),$t(this,"cached",[]),$t(this,"initialized",!1),$t(this,"storagePrefix",Rr),$t(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),$t(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:yt(J.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Jn.created,o)}),$t(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Mn(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(Jn.updated,s))}),$t(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),$t(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Jn.deleted,i)}}),this.persist()}),$t(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),$t(this,"on",(r,s)=>{this.events.on(r,s)}),$t(this,"once",(r,s)=>{this.events.once(r,s)}),$t(this,"off",(r,s)=>{this.events.off(r,s)}),$t(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Zt(n,this.name)}get context(){return En(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Ts(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Jn.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Jn.created,e=>{const n=Jn.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Jn.updated,e=>{const n=Jn.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Jn.deleted,e=>{const n=Jn.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(ki.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{J.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Jn.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}}var yM=Object.defineProperty,wM=(t,e,n)=>e in t?yM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vt=(t,e,n)=>wM(t,typeof e!="symbol"?e+"":e,n);class bM extends Nx{constructor(e,n){super(e,n),this.core=e,this.logger=n,Vt(this,"expirations",new Map),Vt(this,"events",new Gn.EventEmitter),Vt(this,"name",EU),Vt(this,"version",vU),Vt(this,"cached",[]),Vt(this,"initialized",!1),Vt(this,"storagePrefix",Rr),Vt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Vt(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Vt(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Bn.created,{target:i,expiration:o})}),Vt(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),Vt(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Bn.deleted,{target:s,expiration:i})}}),Vt(this,"on",(r,s)=>{this.events.on(r,s)}),Vt(this,"once",(r,s)=>{this.events.once(r,s)}),Vt(this,"off",(r,s)=>{this.events.off(r,s)}),Vt(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Zt(n,this.name)}get context(){return En(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return D6(e);if(typeof e=="number")return k6(e);const{message:n}=X("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Bn.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=X("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=X("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;J.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Bn.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(ki.pulse,()=>this.checkExpirations()),this.events.on(Bn.created,e=>{const n=Bn.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Bn.expired,e=>{const n=Bn.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Bn.deleted,e=>{const n=Bn.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}}var EM=Object.defineProperty,vM=(t,e,n)=>e in t?EM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ft=(t,e,n)=>vM(t,typeof e!="symbol"?e+"":e,n);class CM extends Tx{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,ft(this,"name",CU),ft(this,"abortController"),ft(this,"isDevEnv"),ft(this,"verifyUrlV3",AU),ft(this,"storagePrefix",Rr),ft(this,"version",Q1),ft(this,"publicKey"),ft(this,"fetchPromise"),ft(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&J.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),ft(this,"register",async s=>{if(!qo()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const u=Ai(),l=this.startAbortTimer(J.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",m),u.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=u.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const m=b=>{if(b.data&&typeof b.data=="string")try{const w=JSON.parse(b.data);if(w.type==="verify_attestation"){if(Ef(w.attestation).payload.id!==o)return;clearInterval(l),u.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",m),h(w.attestation===null?"":w.attestation)}}catch(w){this.logger.warn(w)}};u.body.appendChild(g),window.addEventListener("message",m,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(u){this.logger.warn(u)}return""}),ft(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(Ef(i).payload.id!==a)return;const u=await this.isValidJwtAttestation(i);if(u){if(!u.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return u}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),ft(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(J.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),ft(this,"getVerifyUrl",s=>{let i=s||Ua;return IU.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${Ua}`),i=Ua),i}),ft(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(J.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),ft(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),ft(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),ft(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),ft(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),ft(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),ft(this,"validateAttestation",(s,i)=>{const o=T8(s,i.publicKey),a={hasExpired:J.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Zt(n,this.name),this.abortController=new AbortController,this.isDevEnv=Qp(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return En(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),J.toMiliseconds(e))}}var _M=Object.defineProperty,AM=(t,e,n)=>e in t?_M(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kw=(t,e,n)=>AM(t,typeof e!="symbol"?e+"":e,n);class IM extends xx{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,kw(this,"context",SU),kw(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${NU}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Zt(n,this.context)}}var SM=Object.defineProperty,Uw=Object.getOwnPropertySymbols,NM=Object.prototype.hasOwnProperty,TM=Object.prototype.propertyIsEnumerable,Yf=(t,e,n)=>e in t?SM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ga=(t,e)=>{for(var n in e||(e={}))NM.call(e,n)&&Yf(t,n,e[n]);if(Uw)for(var n of Uw(e))TM.call(e,n)&&Yf(t,n,e[n]);return t},Ct=(t,e,n)=>Yf(t,typeof e!="symbol"?e+"":e,n);class xM extends Px{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Ct(this,"context",xU),Ct(this,"storagePrefix",Rr),Ct(this,"storageVersion",TU),Ct(this,"events",new Map),Ct(this,"shouldPersist",!1),Ct(this,"init",async()=>{if(!Qp())try{const s={eventId:by(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:Jv(this.core.relayer.protocol,this.core.relayer.version,jf)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Ct(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,u=by(),l=this.core.projectId||"",d=Date.now(),h=ga({eventId:u,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:l,domain:this.getAppDomain()},this.setMethods(u));return this.telemetryEnabled&&(this.events.set(u,h),this.shouldPersist=!0),h}),Ct(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return ga(ga({},a),this.setMethods(a.eventId))}),Ct(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Ct(this,"setEventListeners",()=>{this.core.heartbeat.on(ki.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{J.fromMiliseconds(Date.now())-J.fromMiliseconds(s.timestamp)>PU&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Ct(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Ct(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Ct(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Ct(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Ct(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,ga(ga({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Ct(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Ct(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${OU}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${jf}${i}`,{method:"POST",body:JSON.stringify(s)})}),Ct(this,"getAppDomain",()=>Zv().url),this.logger=Zt(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var PM=Object.defineProperty,Bw=Object.getOwnPropertySymbols,OM=Object.prototype.hasOwnProperty,RM=Object.prototype.propertyIsEnumerable,Zf=(t,e,n)=>e in t?PM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mw=(t,e)=>{for(var n in e||(e={}))OM.call(e,n)&&Zf(t,n,e[n]);if(Bw)for(var n of Bw(e))RM.call(e,n)&&Zf(t,n,e[n]);return t},Xe=(t,e,n)=>Zf(t,typeof e!="symbol"?e+"":e,n);let $M=class pC extends yx{constructor(e){var n;super(e),Xe(this,"protocol",X1),Xe(this,"version",Q1),Xe(this,"name",Ff),Xe(this,"relayUrl"),Xe(this,"projectId"),Xe(this,"customStoragePrefix"),Xe(this,"events",new Gn.EventEmitter),Xe(this,"logger"),Xe(this,"heartbeat"),Xe(this,"relayer"),Xe(this,"crypto"),Xe(this,"storage"),Xe(this,"history"),Xe(this,"expirer"),Xe(this,"pairing"),Xe(this,"verify"),Xe(this,"echoClient"),Xe(this,"linkModeSupportedApps"),Xe(this,"eventClient"),Xe(this,"initialized",!1),Xe(this,"logChunkController"),Xe(this,"on",(a,c)=>this.events.on(a,c)),Xe(this,"once",(a,c)=>this.events.once(a,c)),Xe(this,"off",(a,c)=>this.events.off(a,c)),Xe(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Xe(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:u})=>{if(!a||!c)return;const l={topic:a,message:c,publishedAt:Date.now(),transportType:nt.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:u})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||tC,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=Mo({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:Qk.logger,name:Ff}),{logger:i,chunkLoggerController:o}=Mp({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Zt(i,this.name),this.heartbeat=new iT,this.crypto=new oB(this,this.logger,e==null?void 0:e.keychain),this.history=new mM(this,this.logger),this.expirer=new bM(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new jT(Mw(Mw({},eU),e==null?void 0:e.storageOptions)),this.relayer=new $B({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new fM(this,this.logger),this.verify=new CM(this,this.logger,this.storage),this.echoClient=new IM(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new xM(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new pC(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(fU,r),n}get context(){return En(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(yw,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(yw)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&Xk.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const DM=$M,gC="wc",mC=2,yC="client",gg=`${gC}@${mC}:${yC}:`,bh={name:yC,logger:"error"},Lw="WALLETCONNECT_DEEPLINK_CHOICE",kM="proposal",Fw="Proposal expired",UM="session",Zi=J.SEVEN_DAYS,BM="engine",_t={wc_sessionPropose:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1104},res:{ttl:J.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1106},res:{ttl:J.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:J.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1112},res:{ttl:J.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:J.ONE_DAY,prompt:!1,tag:1114},res:{ttl:J.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:J.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:J.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:J.FIVE_MINUTES,prompt:!1,tag:1119}}},Eh={min:J.FIVE_MINUTES,max:J.SEVEN_DAYS},mr={idle:"IDLE",active:"ACTIVE"},MM={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},LM="request",FM=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],jM="wc",zM="auth",HM="authKeys",qM="pairingTopics",WM="requests",yd=`${jM}@${1.5}:${zM}:`,Ku=`${yd}:PUB_KEY`;var VM=Object.defineProperty,GM=Object.defineProperties,KM=Object.getOwnPropertyDescriptors,jw=Object.getOwnPropertySymbols,YM=Object.prototype.hasOwnProperty,ZM=Object.prototype.propertyIsEnumerable,Jf=(t,e,n)=>e in t?VM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tt=(t,e)=>{for(var n in e||(e={}))YM.call(e,n)&&Jf(t,n,e[n]);if(jw)for(var n of jw(e))ZM.call(e,n)&&Jf(t,n,e[n]);return t},an=(t,e)=>GM(t,KM(e)),W=(t,e,n)=>Jf(t,typeof e!="symbol"?e+"":e,n);class JM extends Dx{constructor(e){super(e),W(this,"name",BM),W(this,"events",new Up),W(this,"initialized",!1),W(this,"requestQueue",{state:mr.idle,queue:[]}),W(this,"sessionRequestQueue",{state:mr.idle,queue:[]}),W(this,"requestQueueDelay",J.ONE_SECOND),W(this,"expectedPairingMethodMap",new Map),W(this,"recentlyDeletedMap",new Map),W(this,"recentlyDeletedLimit",200),W(this,"relayMessageCache",[]),W(this,"pendingSessions",new Map),W(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(_t)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},J.toMiliseconds(this.requestQueueDelay)))}),W(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=an(tt({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=q8(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:u}=r;let l=s,d,h=!1;try{if(l){const R=this.client.core.pairing.pairings.get(l);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=R.active}}catch(R){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),R}if(!l||!h){const{topic:R,uri:O}=await this.client.core.pairing.create();l=R,d=O}if(!l){const{message:R}=X("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(R)}const f=await this.client.core.crypto.generateKeyPair(),p=_t.wc_sessionPropose.req.ttl||J.FIVE_MINUTES,g=yt(p),m=an(tt(tt({requiredNamespaces:i,optionalNamespaces:o,relays:u??[{protocol:eC}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:l},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:wr()}),b=He("session_connect",m.id),{reject:w,resolve:E,done:N}=ti(p,Fw),A=({id:R})=>{R===m.id&&(this.client.events.off("proposal_expire",A),this.pendingSessions.delete(m.id),this.events.emit(b,{error:{message:Fw,code:0}}))};return this.client.events.on("proposal_expire",A),this.events.once(b,({error:R,session:O})=>{this.client.events.off("proposal_expire",A),R?w(R):O&&E(O)}),await this.sendRequest({topic:l,method:"wc_sessionPropose",params:m,throwOnFailedPublish:!0,clientRpcId:m.id}),await this.setProposal(m.id,m),{uri:d,approval:N}}),W(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),W(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[Xn.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(I){throw o.setError(Zs.no_internet_connection),I}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(I){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Zs.proposal_not_found),I}try{await this.isValidApprove(n)}catch(I){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Zs.session_approve_namespace_validation_failure),I}const{id:a,relayProtocol:c,namespaces:u,sessionProperties:l,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:m,optionalNamespaces:b}=f;let w=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});w||(w=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Xn.session_approve_started,properties:{topic:p,trace:[Xn.session_approve_started,Xn.session_namespaces_validation_success]}}));const E=await this.client.core.crypto.generateKeyPair(),N=g.publicKey,A=await this.client.core.crypto.generateSharedKey(E,N),R=tt(tt(tt({relay:{protocol:c??"irn"},namespaces:u,controller:{publicKey:E,metadata:this.client.metadata},expiry:yt(Zi)},l&&{sessionProperties:l}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),O=nt.relay;w.addTrace(Xn.subscribing_session_topic);try{await this.client.core.relayer.subscribe(A,{transportType:O})}catch(I){throw w.setError(Zs.subscribe_session_topic_failure),I}w.addTrace(Xn.subscribe_session_topic_success);const M=an(tt({},R),{topic:A,requiredNamespaces:m,optionalNamespaces:b,pairingTopic:p,acknowledged:!1,self:R.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:E,transportType:nt.relay});await this.client.session.set(A,M),w.addTrace(Xn.store_session);try{w.addTrace(Xn.publishing_session_settle),await this.sendRequest({topic:A,method:"wc_sessionSettle",params:R,throwOnFailedPublish:!0}).catch(I=>{throw w==null||w.setError(Zs.session_settle_publish_failure),I}),w.addTrace(Xn.session_settle_publish_success),w.addTrace(Xn.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:E},throwOnFailedPublish:!0}).catch(I=>{throw w==null||w.setError(Zs.session_approve_publish_failure),I}),w.addTrace(Xn.session_approve_publish_success)}catch(I){throw this.client.logger.error(I),this.client.session.delete(A,at("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(A),I}return this.client.core.eventClient.deleteEvent({eventId:w.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(A,yt(Zi)),{topic:A,acknowledged:()=>Promise.resolve(this.client.session.get(A))}}),W(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:_t.wc_sessionPropose.reject}),await this.deleteProposal(r)}),W(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=ti(),c=wr(),u=hi().toString(),l=this.client.session.get(r).namespaces;return this.events.once(He("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:u}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:l}),a(d)}),{acknowledged:i}}),W(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=wr(),{done:i,resolve:o,reject:a}=ti();return this.events.once(He("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,yt(Zi)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),W(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(m){throw this.client.logger.error("request() -> isValidRequest() failed"),m}const{chainId:r,request:s,topic:i,expiry:o=_t.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===nt.relay&&await this.confirmOnlineStateOrThrow();const c=wr(),u=hi().toString(),{done:l,resolve:d,reject:h}=ti(o,"Request expired. Please try again.");this.events.once(He("session_request",c),({error:m,result:b})=>{m?h(m):d(b)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:i,method:f,params:{request:an(tt({},s),{expiryTimestamp:yt(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(m=>h(m)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await l();const g={request:an(tt({},s),{expiryTimestamp:yt(o)}),chainId:r};return await Promise.all([new Promise(async m=>{await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,g)}).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),m()}),new Promise(async m=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const w=await L6(this.client.core.storage,Lw);await U6({id:c,topic:i,wcDeepLink:w})}m()}),l()]).then(m=>m[2])}),W(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===nt.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);br(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Mn(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),W(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=wr(),i=hi().toString(),{done:o,resolve:a,reject:c}=ti();this.events.once(He("session_ping",s),({error:u})=>{u?c(u):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),W(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=hi().toString(),a=wr();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),W(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:at("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=X("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),W(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>G8(r,n)))),W(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),W(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?nt.link_mode:nt.relay;o===nt.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:u,domain:l,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:m}=n,b=[...n.resources||[]],{topic:w,uri:E}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:w,uri:E}});const N=await this.client.core.crypto.generateKeyPair(),A=Vu(N);if(await Promise.all([this.client.auth.authKeys.set(Ku,{responseTopic:A,publicKey:N}),this.client.auth.pairingTopics.set(A,{topic:A,pairingTopic:w})]),await this.client.core.relayer.subscribe(A,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${w}`),g.length>0){const{namespace:S}=wo(a[0]);let $=eD(S,"request",g);Wu(b)&&($=nD($,b.pop())),b.push($)}const R=m&&m>_t.wc_sessionAuthenticate.req.ttl?m:_t.wc_sessionAuthenticate.req.ttl,O={authPayload:{type:h??"caip122",chains:a,statement:c,aud:u,domain:l,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:b},requester:{publicKey:N,metadata:this.client.metadata},expiryTimestamp:yt(R)},M={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},I={requiredNamespaces:{},optionalNamespaces:M,relays:[{protocol:"irn"}],pairingTopic:w,proposer:{publicKey:N,metadata:this.client.metadata},expiryTimestamp:yt(_t.wc_sessionPropose.req.ttl),id:wr()},{done:j,resolve:U,reject:L}=ti(R,"Request expired"),x=wr(),B=He("session_connect",I.id),v=He("session_request",x),C=async({error:S,session:$})=>{this.events.off(v,P),S?L(S):$&&U({session:$})},P=async S=>{var $,T,k;if(await this.deletePendingAuthRequest(x,{message:"fulfilled",code:0}),S.error){const Ee=at("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return S.error.code===Ee.code?void 0:(this.events.off(B,C),L(S.error.message))}await this.deleteProposal(I.id),this.events.off(B,C);const{cacaos:z,responder:H}=S.result,Z=[],K=[];for(const Ee of z){await Py({cacao:Ee,projectId:this.client.core.projectId})||(this.client.logger.error(Ee,"Signature verification failed"),L(at("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:et}=Ee,xt=Wu(et.resources),Vs=[xf(et.iss)],iu=wl(et.iss);if(xt){const Fi=Oy(xt),_d=Ry(xt);Z.push(...Fi),Vs.push(..._d)}for(const Fi of Vs)K.push(`${Fi}:${iu}`)}const we=await this.client.core.crypto.generateSharedKey(N,H.publicKey);let Ae;Z.length>0&&(Ae={topic:we,acknowledged:!0,self:{publicKey:N,metadata:this.client.metadata},peer:H,controller:H.publicKey,expiry:yt(Zi),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:w,namespaces:nw([...new Set(Z)],[...new Set(K)]),transportType:o},await this.client.core.relayer.subscribe(we,{transportType:o}),await this.client.session.set(we,Ae),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:H.metadata}),Ae=this.client.session.get(we)),($=this.client.metadata.redirect)!=null&&$.linkMode&&(T=H.metadata.redirect)!=null&&T.linkMode&&(k=H.metadata.redirect)!=null&&k.universal&&r&&(this.client.core.addLinkModeSupportedApp(H.metadata.redirect.universal),this.client.session.update(we,{transportType:nt.link_mode})),U({auths:z,session:Ae})};this.events.once(B,C),this.events.once(v,P);let D;try{if(i){const S=Ts("wc_sessionAuthenticate",O,x);this.client.core.history.set(w,S);const $=await this.client.core.crypto.encode("",S,{type:eu,encoding:As});D=Tu(r,w,$)}else await Promise.all([this.sendRequest({topic:w,method:"wc_sessionAuthenticate",params:O,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:x}),this.sendRequest({topic:w,method:"wc_sessionPropose",params:I,expiry:_t.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:I.id})])}catch(S){throw this.events.off(B,C),this.events.off(v,P),S}return await this.setProposal(I.id,I),await this.setAuthRequest(x,{request:an(tt({},O),{verifyContext:{}}),pairingTopic:w,transportType:o}),{uri:D??E,response:j}}),W(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Js.authenticated_session_approve_started]}});try{this.isInitialized()}catch(m){throw i.setError(fa.no_internet_connection),m}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(fa.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||nt.relay;a===nt.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),l=Vu(c),d={type:Xr,receiverPublicKey:c,senderPublicKey:u},h=[],f=[];for(const m of s){if(!await Py({cacao:m,projectId:this.client.core.projectId})){i.setError(fa.invalid_cacao);const A=at("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:l,error:A,encodeOpts:d}),new Error(A.message)}i.addTrace(Js.cacaos_verified);const{p:b}=m,w=Wu(b.resources),E=[xf(b.iss)],N=wl(b.iss);if(w){const A=Oy(w),R=Ry(w);h.push(...A),E.push(...R)}for(const A of E)f.push(`${A}:${N}`)}const p=await this.client.core.crypto.generateSharedKey(u,c);i.addTrace(Js.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:u,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:yt(Zi),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:nw([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(Js.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(m){throw i.setError(fa.subscribe_authenticated_session_topic_failure),m}i.addTrace(Js.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Js.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Js.publishing_authenticated_session_approve);try{await this.sendResult({topic:l,id:r,result:{cacaos:s,responder:{publicKey:u,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(m){throw i.setError(fa.authenticated_session_approve_publish_failure),m}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),W(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===nt.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Vu(o),u={type:Xr,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:u,rpcOpts:_t.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),W(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return p1(r,s)}),W(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),W(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),W(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,at("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(Lw).catch(u=>this.client.logger.warn(u)),this.getPendingSessionRequests().forEach(u=>{u.topic===s&&this.deletePendingSessionRequest(u.id,at("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=mr.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),W(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Zs.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,at("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),W(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=mr.idle,this.client.events.emit("session_request_expire",{id:n}))}),W(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),W(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),W(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,yt(_t.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),W(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=nt.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),W(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||yt(_t.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),W(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:u,appLink:l,tvf:d}=n,h=Ts(s,i,c);let f;const p=!!l;try{const b=p?As:sr;f=await this.client.core.crypto.encode(r,h,{encoding:b})}catch(b){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),b}let g;if(FM.includes(s)){const b=vr(JSON.stringify(h)),w=vr(f);g=await this.client.core.verify.register({id:w,decryptedId:b})}const m=_t[s].req;if(m.attestation=g,o&&(m.ttl=o),a&&(m.id=a),this.client.core.history.set(r,h),p){const b=Tu(l,r,f);await global.Linking.openURL(b,this.client.name)}else{const b=_t[s].req;o&&(b.ttl=o),a&&(b.id=a),b.tvf=an(tt({},d),{correlationId:h.id}),u?(b.internal=an(tt({},b.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,b)):this.client.core.relayer.publish(r,f,b).catch(w=>this.client.logger.error(w))}return h.id}),W(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,u=fd(r,i);let l;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?As:sr;l=await this.client.core.crypto.encode(s,u,an(tt({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{f=this.getTVFParams(r,p.params,i)}catch(g){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${g==null?void 0:g.message}`)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=Tu(c,s,l);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=_t[p].res;g.tvf=an(tt({},f),{correlationId:r}),o?(g.internal=an(tt({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,l,g)):this.client.core.relayer.publish(s,l,g).catch(m=>this.client.logger.error(m))}await this.client.core.history.resolve(u)}),W(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,u=pd(r,i);let l;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?As:sr;l=await this.client.core.crypto.encode(s,u,an(tt({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=Tu(c,s,l);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||_t[f].res;this.client.core.relayer.publish(s,l,p)}await this.client.core.history.resolve(u)}),W(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;bs(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{bs(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),W(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),W(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),W(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===mr.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=mr.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=mr.idle}),W(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),W(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),W(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=X("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),W(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),W(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const u=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),u==null||u.setError(Vr.proposal_listener_not_found)),this.isValidConnect(tt({},s.params));const l=a.expiryTimestamp||yt(_t.wc_sessionPropose.req.ttl),d=tt({id:c,pairingTopic:r,expiryTimestamp:l,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:vr(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});u==null||u.addTrace(yr.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(u){await this.sendError({id:c,topic:r,error:u,rpcOpts:_t.wc_sessionPropose.autoReject}),this.client.logger.error(u)}}),W(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(br(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const u=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u});const l=await this.client.core.crypto.generateSharedKey(c,u);this.pendingSessions.set(i,{sessionTopic:l,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(l,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Mn(r)){await this.deleteProposal(i);const o=He("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),W(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:u,sessionProperties:l,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(m=>m.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=an(tt(tt(tt({topic:n,relay:o,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},l&&{sessionProperties:l}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:nt.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(He("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),W(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;br(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(He("session_approve",s),{})):Mn(r)&&(await this.client.session.delete(n,at("USER_DISCONNECTED")),this.events.emit(He("session_approve",s),{error:r.error}))}),W(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=da.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:at("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(tt({topic:n},s));try{da.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(c){throw da.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),W(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),W(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=He("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);br(r)?this.events.emit(He("session_update",s),{}):Mn(r)&&this.events.emit(He("session_update",s),{error:r.error})}),W(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,yt(Zi)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),W(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=He("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);br(r)?this.events.emit(He("session_extend",s),{}):Mn(r)&&this.events.emit(He("session_extend",s),{error:r.error})}),W(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),W(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=He("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);br(r)?this.events.emit(He("session_ping",s),{}):Mn(r)&&this.events.emit(He("session_ping",s),{error:r.error})},500)}),W(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(It.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:at("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),W(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:u,transportType:l}=n,{id:d,params:h}=a;try{await this.isValidRequest(tt({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:vr(JSON.stringify(Ts("wc_sessionRequest",h,d))),encryptedId:u,metadata:f.peer.metadata,transportType:l}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),l===nt.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),W(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=He("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);br(r)?this.events.emit(He("session_request",s),{result:r.result}):Mn(r)&&this.events.emit(He("session_request",s),{error:r.error})}),W(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=da.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(tt({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),da.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),W(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),br(r)?this.events.emit(He("session_request",s),{result:r.result}):Mn(r)&&this.events.emit(He("session_request",s),{error:r.error})}),W(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:u,authPayload:l,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:vr(JSON.stringify(i)),encryptedId:a,metadata:u.metadata,transportType:c}),f={requester:u,pairingTopic:s,id:i.id,authPayload:l,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===nt.link_mode&&(r=u.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(u.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(u){this.client.logger.error(u);const l=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Xr,receiverPublicKey:l,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:u,encodeOpts:f,rpcOpts:_t.wc_sessionAuthenticate.autoReject,appLink:h})}}),W(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),W(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=mr.idle,this.processSessionRequestQueue()},J.toMiliseconds(this.requestQueueDelay))}),W(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=He("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(He("session_request",i.request.id),{error:r})})}),W(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===mr.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=mr.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),W(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),W(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Ts("wc_sessionPropose",an(tt({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),W(this,"isValidConnect",async n=>{if(!ln(n)){const{message:u}=X("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(u)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(kt(r)||await this.isValidPairingTopic(r),!ik(c)){const{message:u}=X("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(u)}if(!kt(s)&&$s(s)!==0){const u="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(u):this.client.logger.warn(u),this.validateNamespaces(s,"requiredNamespaces")}if(!kt(i)&&$s(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),kt(o)||this.validateSessionProps(o,"sessionProperties"),!kt(a)){this.validateSessionProps(a,"scopedProperties");const u=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(l=>u.includes(l)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(u)}`)}}),W(this,"validateNamespaces",(n,r)=>{const s=sk(n,"connect()",r);if(s)throw new Error(s.message)}),W(this,"isValidApprove",async n=>{if(!ln(n))throw new Error(X("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),u=fh(s,"approve()");if(u)throw new Error(u.message);const l=iw(c.requiredNamespaces,s,"approve()");if(l)throw new Error(l.message);if(!pt(i,!0)){const{message:d}=X("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(kt(o)||this.validateSessionProps(o,"sessionProperties"),!kt(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),W(this,"isValidReject",async n=>{if(!ln(n)){const{message:i}=X("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!ak(s)){const{message:i}=X("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),W(this,"isValidSessionSettleRequest",n=>{if(!ln(n)){const{message:u}=X("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(u)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!W1(r)){const{message:u}=X("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=X8(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=fh(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(bs(o)){const{message:u}=X("EXPIRED","onSessionSettleRequest()");throw new Error(u)}}),W(this,"isValidUpdate",async n=>{if(!ln(n)){const{message:c}=X("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=fh(s,"update()");if(o)throw new Error(o.message);const a=iw(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),W(this,"isValidExtend",async n=>{if(!ln(n)){const{message:s}=X("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),W(this,"isValidRequest",async n=>{if(!ln(n)){const{message:c}=X("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!sw(a,i)){const{message:c}=X("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!ck(s)){const{message:c}=X("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!dk(a,i,s.method)){const{message:c}=X("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!gk(o,Eh)){const{message:c}=X("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${Eh.min} and ${Eh.max}`);throw new Error(c)}}),W(this,"isValidRespond",async n=>{var r;if(!ln(n)){const{message:o}=X("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!uk(i)){const{message:o}=X("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),W(this,"isValidPing",async n=>{if(!ln(n)){const{message:s}=X("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),W(this,"isValidEmit",async n=>{if(!ln(n)){const{message:a}=X("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!sw(o,i)){const{message:a}=X("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!lk(s)){const{message:a}=X("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!hk(o,i,s.name)){const{message:a}=X("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),W(this,"isValidDisconnect",async n=>{if(!ln(n)){const{message:s}=X("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),W(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!pt(s,!1))throw new Error("uri is required parameter");if(!pt(i,!1))throw new Error("domain is required parameter");if(!pt(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>wo(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=wo(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),W(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||Ua,validation:"UNKNOWN",origin:o.url||""}};try{if(a===nt.link_mode){const l=this.getAppLinkIfEnabled(o,a);return c.verified.validation=l&&new URL(l).origin===new URL(o.url).origin?"VALID":"INVALID",c}const u=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});u&&(c.verified.origin=u.origin,c.verified.isScam=u.isScam,c.verified.validation=u.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(u){this.client.logger.warn(u)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),W(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=X("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),W(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),W(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),W(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=X("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),W(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,u,l,d,h;return!n||r!==nt.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((u=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:u.universal)!==""&&((l=n==null?void 0:n.redirect)==null?void 0:l.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),W(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),W(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=wy(n,"topic")||"",s=decodeURIComponent(wy(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:nt.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),W(this,"registerLinkModeListeners",async()=>{var n;if(Qp()||Ws()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),W(this,"getTVFParams",(n,r,s)=>{var i,o,a;if(!((i=r.request)!=null&&i.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const u=this.extractTxHashesFromResult(r.request,s);c.txHashes=u,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(u){this.client.logger.warn("Error getting TVF params",u)}return c}),W(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),W(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=MM[i];if(i==="sui_signTransaction")return[M$(r.transactionBytes)];if(i==="near_signTransaction")return[Sy(r)];if(i==="near_signTransactions")return r.map(c=>Sy(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[Pk({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return Qr(r)?r.map(c=>Ny(c)):[Ny(r)];if(i==="cosmos_signDirect")return[F$(r)];if(typeof r=="string")return[r];const a=r[o.key];if(Qr(a))return i==="solana_signAllTransactions"?a.map(c=>B$(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=X("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(It.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Ku)?this.client.auth.authKeys.get(Ku):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===nt.link_mode?As:sr});pg(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:vr(r)})):gd(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Bn.expired,async e=>{const{topic:n,id:r}=Qv(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,X("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,X("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(ri.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(ri.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!pt(e,!1)){const{message:n}=X("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=X("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(bs(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=X("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!pt(e,!1)){const{message:n}=X("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=X("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(bs(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=X("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=X("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(pt(e,!1)){const{message:n}=X("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=X("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!ok(e)){const{message:n}=X("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=X("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(bs(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=X("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class XM extends Mi{constructor(e,n){super(e,n,kM,gg),this.core=e,this.logger=n}}let QM=class extends Mi{constructor(e,n){super(e,n,UM,gg),this.core=e,this.logger=n}};class eL extends Mi{constructor(e,n){super(e,n,LM,gg,r=>r.id),this.core=e,this.logger=n}}class tL extends Mi{constructor(e,n){super(e,n,HM,yd,()=>Ku),this.core=e,this.logger=n}}class nL extends Mi{constructor(e,n){super(e,n,qM,yd),this.core=e,this.logger=n}}class rL extends Mi{constructor(e,n){super(e,n,WM,yd,r=>r.id),this.core=e,this.logger=n}}var sL=Object.defineProperty,iL=(t,e,n)=>e in t?sL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vh=(t,e,n)=>iL(t,typeof e!="symbol"?e+"":e,n);class oL{constructor(e,n){this.core=e,this.logger=n,vh(this,"authKeys"),vh(this,"pairingTopics"),vh(this,"requests"),this.authKeys=new tL(this.core,this.logger),this.pairingTopics=new nL(this.core,this.logger),this.requests=new rL(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var aL=Object.defineProperty,cL=(t,e,n)=>e in t?aL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Oe=(t,e,n)=>cL(t,typeof e!="symbol"?e+"":e,n);let uL=class wC extends $x{constructor(e){super(e),Oe(this,"protocol",gC),Oe(this,"version",mC),Oe(this,"name",bh.name),Oe(this,"metadata"),Oe(this,"core"),Oe(this,"logger"),Oe(this,"events",new Gn.EventEmitter),Oe(this,"engine"),Oe(this,"session"),Oe(this,"proposal"),Oe(this,"pendingRequest"),Oe(this,"auth"),Oe(this,"signConfig"),Oe(this,"on",(r,s)=>this.events.on(r,s)),Oe(this,"once",(r,s)=>this.events.once(r,s)),Oe(this,"off",(r,s)=>this.events.off(r,s)),Oe(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),Oe(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Oe(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),Oe(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),Oe(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),Oe(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),Oe(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),Oe(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),Oe(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),Oe(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),Oe(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),Oe(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),Oe(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),Oe(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),Oe(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Oe(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),Oe(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),Oe(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),Oe(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||bh.name,this.metadata=P6(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Gc(Mo({level:(e==null?void 0:e.logger)||bh.logger}));this.core=(e==null?void 0:e.core)||new DM(e),this.logger=Zt(n,this.name),this.session=new QM(this.core,this.logger),this.proposal=new XM(this.core,this.logger),this.pendingRequest=new eL(this.core,this.logger),this.engine=new JM(this),this.auth=new oL(this.core,this.logger)}static async init(e){const n=new wC(e);return await n.initialize(),n}get context(){return En(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},J.toMiliseconds(J.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Xf={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof pn<"u"&&pn,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof pn<"u"&&pn||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(v){return v&&DataView.prototype.isPrototypeOf(v)}if(c.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(v){return v&&l.indexOf(Object.prototype.toString.call(v))>-1};function h(v){if(typeof v!="string"&&(v=String(v)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(v)||v==="")throw new TypeError('Invalid character in header field name: "'+v+'"');return v.toLowerCase()}function f(v){return typeof v!="string"&&(v=String(v)),v}function p(v){var C={next:function(){var P=v.shift();return{done:P===void 0,value:P}}};return c.iterable&&(C[Symbol.iterator]=function(){return C}),C}function g(v){this.map={},v instanceof g?v.forEach(function(C,P){this.append(P,C)},this):Array.isArray(v)?v.forEach(function(C){if(C.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+C.length);this.append(C[0],C[1])},this):v&&Object.getOwnPropertyNames(v).forEach(function(C){this.append(C,v[C])},this)}g.prototype.append=function(v,C){v=h(v),C=f(C);var P=this.map[v];this.map[v]=P?P+", "+C:C},g.prototype.delete=function(v){delete this.map[h(v)]},g.prototype.get=function(v){return v=h(v),this.has(v)?this.map[v]:null},g.prototype.has=function(v){return this.map.hasOwnProperty(h(v))},g.prototype.set=function(v,C){this.map[h(v)]=f(C)},g.prototype.forEach=function(v,C){for(var P in this.map)this.map.hasOwnProperty(P)&&v.call(C,this.map[P],P,this)},g.prototype.keys=function(){var v=[];return this.forEach(function(C,P){v.push(P)}),p(v)},g.prototype.values=function(){var v=[];return this.forEach(function(C){v.push(C)}),p(v)},g.prototype.entries=function(){var v=[];return this.forEach(function(C,P){v.push([P,C])}),p(v)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function m(v){if(!v._noBody){if(v.bodyUsed)return Promise.reject(new TypeError("Already read"));v.bodyUsed=!0}}function b(v){return new Promise(function(C,P){v.onload=function(){C(v.result)},v.onerror=function(){P(v.error)}})}function w(v){var C=new FileReader,P=b(C);return C.readAsArrayBuffer(v),P}function E(v){var C=new FileReader,P=b(C),D=/charset=([A-Za-z0-9_-]+)/.exec(v.type),S=D?D[1]:"utf-8";return C.readAsText(v,S),P}function N(v){for(var C=new Uint8Array(v),P=new Array(C.length),D=0;D<C.length;D++)P[D]=String.fromCharCode(C[D]);return P.join("")}function A(v){if(v.slice)return v.slice(0);var C=new Uint8Array(v.byteLength);return C.set(new Uint8Array(v)),C.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(v){this.bodyUsed=this.bodyUsed,this._bodyInit=v,v?typeof v=="string"?this._bodyText=v:c.blob&&Blob.prototype.isPrototypeOf(v)?this._bodyBlob=v:c.formData&&FormData.prototype.isPrototypeOf(v)?this._bodyFormData=v:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)?this._bodyText=v.toString():c.arrayBuffer&&c.blob&&u(v)?(this._bodyArrayBuffer=A(v.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(v)||d(v))?this._bodyArrayBuffer=A(v):this._bodyText=v=Object.prototype.toString.call(v):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof v=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var v=m(this);if(v)return v;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var v=m(this);return v||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(w);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var v=m(this);if(v)return v;if(this._bodyBlob)return E(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(N(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(j)}),this.json=function(){return this.text().then(JSON.parse)},this}var O=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function M(v){var C=v.toUpperCase();return O.indexOf(C)>-1?C:v}function I(v,C){if(!(this instanceof I))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');C=C||{};var P=C.body;if(v instanceof I){if(v.bodyUsed)throw new TypeError("Already read");this.url=v.url,this.credentials=v.credentials,C.headers||(this.headers=new g(v.headers)),this.method=v.method,this.mode=v.mode,this.signal=v.signal,!P&&v._bodyInit!=null&&(P=v._bodyInit,v.bodyUsed=!0)}else this.url=String(v);if(this.credentials=C.credentials||this.credentials||"same-origin",(C.headers||!this.headers)&&(this.headers=new g(C.headers)),this.method=M(C.method||this.method||"GET"),this.mode=C.mode||this.mode||null,this.signal=C.signal||this.signal||function(){if("AbortController"in a){var $=new AbortController;return $.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&P)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(P),(this.method==="GET"||this.method==="HEAD")&&(C.cache==="no-store"||C.cache==="no-cache")){var D=/([?&])_=[^&]*/;if(D.test(this.url))this.url=this.url.replace(D,"$1_="+new Date().getTime());else{var S=/\?/;this.url+=(S.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}I.prototype.clone=function(){return new I(this,{body:this._bodyInit})};function j(v){var C=new FormData;return v.trim().split("&").forEach(function(P){if(P){var D=P.split("="),S=D.shift().replace(/\+/g," "),$=D.join("=").replace(/\+/g," ");C.append(decodeURIComponent(S),decodeURIComponent($))}}),C}function U(v){var C=new g,P=v.replace(/\r?\n[\t ]+/g," ");return P.split("\r").map(function(D){return D.indexOf(`
`)===0?D.substr(1,D.length):D}).forEach(function(D){var S=D.split(":"),$=S.shift().trim();if($){var T=S.join(":").trim();try{C.append($,T)}catch(k){console.warn("Response "+k.message)}}}),C}R.call(I.prototype);function L(v,C){if(!(this instanceof L))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(C||(C={}),this.type="default",this.status=C.status===void 0?200:C.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=C.statusText===void 0?"":""+C.statusText,this.headers=new g(C.headers),this.url=C.url||"",this._initBody(v)}R.call(L.prototype),L.prototype.clone=function(){return new L(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},L.error=function(){var v=new L(null,{status:200,statusText:""});return v.ok=!1,v.status=0,v.type="error",v};var x=[301,302,303,307,308];L.redirect=function(v,C){if(x.indexOf(C)===-1)throw new RangeError("Invalid status code");return new L(null,{status:C,headers:{location:v}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(C,P){this.message=C,this.name=P;var D=Error(C);this.stack=D.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function B(v,C){return new Promise(function(P,D){var S=new I(v,C);if(S.signal&&S.signal.aborted)return D(new o.DOMException("Aborted","AbortError"));var $=new XMLHttpRequest;function T(){$.abort()}$.onload=function(){var H={statusText:$.statusText,headers:U($.getAllResponseHeaders()||"")};S.url.indexOf("file://")===0&&($.status<200||$.status>599)?H.status=200:H.status=$.status,H.url="responseURL"in $?$.responseURL:H.headers.get("X-Request-URL");var Z="response"in $?$.response:$.responseText;setTimeout(function(){P(new L(Z,H))},0)},$.onerror=function(){setTimeout(function(){D(new TypeError("Network request failed"))},0)},$.ontimeout=function(){setTimeout(function(){D(new TypeError("Network request timed out"))},0)},$.onabort=function(){setTimeout(function(){D(new o.DOMException("Aborted","AbortError"))},0)};function k(H){try{return H===""&&a.location.href?a.location.href:H}catch{return H}}if($.open(S.method,k(S.url),!0),S.credentials==="include"?$.withCredentials=!0:S.credentials==="omit"&&($.withCredentials=!1),"responseType"in $&&(c.blob?$.responseType="blob":c.arrayBuffer&&($.responseType="arraybuffer")),C&&typeof C.headers=="object"&&!(C.headers instanceof g||a.Headers&&C.headers instanceof a.Headers)){var z=[];Object.getOwnPropertyNames(C.headers).forEach(function(H){z.push(h(H)),$.setRequestHeader(H,f(C.headers[H]))}),S.headers.forEach(function(H,Z){z.indexOf(Z)===-1&&$.setRequestHeader(Z,H)})}else S.headers.forEach(function(H,Z){$.setRequestHeader(Z,H)});S.signal&&(S.signal.addEventListener("abort",T),$.onreadystatechange=function(){$.readyState===4&&S.signal.removeEventListener("abort",T)}),$.send(typeof S._bodyInit>"u"?null:S._bodyInit)})}return B.polyfill=!0,a.fetch||(a.fetch=B,a.Headers=g,a.Request=I,a.Response=L),o.Headers=g,o.Request=I,o.Response=L,o.fetch=B,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(Xf,Xf.exports);var lL=Xf.exports;const zw=kl(lL);var dL=Object.defineProperty,hL=Object.defineProperties,fL=Object.getOwnPropertyDescriptors,Hw=Object.getOwnPropertySymbols,pL=Object.prototype.hasOwnProperty,gL=Object.prototype.propertyIsEnumerable,qw=(t,e,n)=>e in t?dL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ww=(t,e)=>{for(var n in e||(e={}))pL.call(e,n)&&qw(t,n,e[n]);if(Hw)for(var n of Hw(e))gL.call(e,n)&&qw(t,n,e[n]);return t},Vw=(t,e)=>hL(t,fL(e));const mL={Accept:"application/json","Content-Type":"application/json"},yL="POST",Gw={headers:mL,method:yL},Kw=10;let dr=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Gn.EventEmitter,this.isAvailable=!1,this.registering=!1,!dw(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=ts(e),r=await(await zw(this.url,Vw(Ww({},Gw),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!dw(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=ts({id:1,jsonrpc:"2.0",method:"test",params:[]});await zw(e,Vw(Ww({},Gw),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?_i(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=pd(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return K1(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Kw&&this.events.setMaxListeners(Kw)}};const Yw="error",wL="wss://relay.walletconnect.org",bL="wc",EL="universal_provider",Pu=`${bL}@2:${EL}:`,bC="https://rpc.walletconnect.org/v1/",lo="generic",vL=`${bC}bundler`,Yn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function mg(t){return t==null||typeof t!="object"&&typeof t!="function"}function EC(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function vC(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const CL="[object RegExp]",CC="[object String]",_C="[object Number]",AC="[object Boolean]",IC="[object Arguments]",_L="[object Symbol]",AL="[object Date]",IL="[object Map]",SL="[object Set]",NL="[object Array]",TL="[object ArrayBuffer]",xL="[object Object]",PL="[object DataView]",OL="[object Uint8Array]",RL="[object Uint8ClampedArray]",$L="[object Uint16Array]",DL="[object Uint32Array]",kL="[object Int8Array]",UL="[object Int16Array]",BL="[object Int32Array]",ML="[object Float32Array]",LL="[object Float64Array]";function yg(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function FL(t,e){return go(t,void 0,t,new Map,e)}function go(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(mg(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=go(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,go(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(go(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(yg(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=go(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),si(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),si(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),si(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,si(o,t,n,r,s),o}if(typeof t=="object"&&jL(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),si(o,t,n,r,s),o}return t}function si(t,e,n=t,r,s){const i=[...Object.keys(e),...EC(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=go(e[a],a,n,r,s))}}function jL(t){switch(vC(t)){case IC:case NL:case TL:case PL:case AC:case AL:case ML:case LL:case kL:case UL:case BL:case IL:case _C:case xL:case CL:case SL:case CC:case _L:case OL:case RL:case $L:case DL:return!0;default:return!1}}function zL(t,e){return FL(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case _C:case CC:case AC:{const o=new t.constructor(t==null?void 0:t.valueOf());return si(o,t),o}case IC:{const o={};return si(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function Zw(t){return zL(t)}function Jw(t){return t!==null&&typeof t=="object"&&vC(t)==="[object Arguments]"}function Xw(t){return typeof t=="object"&&t!==null}function HL(){}function qL(t){return yg(t)}function WL(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function VL(t){if(mg(t))return t;if(Array.isArray(t)||yg(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function GL(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=Qf(s,o,r,new Map)}return s}function Qf(t,e,n,r){if(mg(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return VL(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...EC(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(Jw(a)&&(a={...a}),Jw(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=Zw(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const l=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];l[f]=c[f]}c=l}else c=[];const u=n(c,a,o,t,e,r);u!=null?t[o]=u:Array.isArray(a)||Xw(c)&&Xw(a)?t[o]=Qf(c,a,n,r):c==null&&WL(a)?t[o]=Qf({},a,n,r):c==null&&qL(a)?t[o]=Zw(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function KL(t,...e){return GL(t,...e,HL)}var YL=Object.defineProperty,ZL=Object.defineProperties,JL=Object.getOwnPropertyDescriptors,Qw=Object.getOwnPropertySymbols,XL=Object.prototype.hasOwnProperty,QL=Object.prototype.propertyIsEnumerable,e0=(t,e,n)=>e in t?YL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ou=(t,e)=>{for(var n in e||(e={}))XL.call(e,n)&&e0(t,n,e[n]);if(Qw)for(var n of Qw(e))QL.call(e,n)&&e0(t,n,e[n]);return t},e9=(t,e)=>ZL(t,JL(e));function Pn(t,e,n){var r;const s=wo(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${bC}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function Li(t){return t.includes(":")?t.split(":")[1]:t}function SC(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function t9(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function Ru(t={},e={}){const n=t0(t),r=t0(e);return KL(n,r)}function t0(t){var e,n,r,s,i;const o={};if(!$s(t))return o;for(const[a,c]of Object.entries(t)){const u=hd(a)?[a]:c.chains,l=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=po(a);o[f]=e9(Ou(Ou({},o[f]),c),{chains:Nr(u,(e=o[f])==null?void 0:e.chains),methods:Nr(l,(n=o[f])==null?void 0:n.methods),events:Nr(d,(r=o[f])==null?void 0:r.events)}),($s(h)||$s(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=Ou(Ou({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function n0(t){return t.includes(":")?t.split(":")[2]:t}function r0(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=hd(n)?[n]:r.chains?r.chains:SC(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function Ch(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const NC={},Fe=t=>NC[t],_h=(t,e)=>{NC[t]=e};var n9=Object.defineProperty,r9=(t,e,n)=>e in t?n9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ji=(t,e,n)=>r9(t,typeof e!="symbol"?e+"":e,n);class s9{constructor(e){Ji(this,"name","polkadot"),Ji(this,"client"),Ji(this,"httpProviders"),Ji(this,"events"),Ji(this,"namespace"),Ji(this,"chainId"),this.namespace=e.namespace,this.events=Fe("events"),this.client=Fe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Yn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Li(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Pn(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Kn(new dr(r,Fe("disableProviderPing")))}}var i9=Object.defineProperty,o9=Object.defineProperties,a9=Object.getOwnPropertyDescriptors,s0=Object.getOwnPropertySymbols,c9=Object.prototype.hasOwnProperty,u9=Object.prototype.propertyIsEnumerable,ep=(t,e,n)=>e in t?i9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,i0=(t,e)=>{for(var n in e||(e={}))c9.call(e,n)&&ep(t,n,e[n]);if(s0)for(var n of s0(e))u9.call(e,n)&&ep(t,n,e[n]);return t},o0=(t,e)=>o9(t,a9(e)),Xi=(t,e,n)=>ep(t,typeof e!="symbol"?e+"":e,n);class l9{constructor(e){Xi(this,"name","eip155"),Xi(this,"client"),Xi(this,"chainId"),Xi(this,"namespace"),Xi(this,"httpProviders"),Xi(this,"events"),this.namespace=e.namespace,this.events=Fe("events"),this.client=Fe("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Yn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Pn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Kn(new dr(r,Fe("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(Li(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],u=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const l=this.client.session.get(e.topic),d=((o=l==null?void 0:l.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[u])return d==null?void 0:d[u];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:o0(i0({},l.sessionProperties||{}),{capabilities:o0(i0({},d||{}),{[u]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ts("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${vL}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var d9=Object.defineProperty,h9=(t,e,n)=>e in t?d9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qi=(t,e,n)=>h9(t,typeof e!="symbol"?e+"":e,n);class f9{constructor(e){Qi(this,"name","solana"),Qi(this,"client"),Qi(this,"httpProviders"),Qi(this,"events"),Qi(this,"namespace"),Qi(this,"chainId"),this.namespace=e.namespace,this.events=Fe("events"),this.client=Fe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Yn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Li(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Pn(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Kn(new dr(r,Fe("disableProviderPing")))}}var p9=Object.defineProperty,g9=(t,e,n)=>e in t?p9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,eo=(t,e,n)=>g9(t,typeof e!="symbol"?e+"":e,n);class m9{constructor(e){eo(this,"name","cosmos"),eo(this,"client"),eo(this,"httpProviders"),eo(this,"events"),eo(this,"namespace"),eo(this,"chainId"),this.namespace=e.namespace,this.events=Fe("events"),this.client=Fe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Yn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Li(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Pn(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Kn(new dr(r,Fe("disableProviderPing")))}}var y9=Object.defineProperty,w9=(t,e,n)=>e in t?y9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,to=(t,e,n)=>w9(t,typeof e!="symbol"?e+"":e,n);class b9{constructor(e){to(this,"name","algorand"),to(this,"client"),to(this,"httpProviders"),to(this,"events"),to(this,"namespace"),to(this,"chainId"),this.namespace=e.namespace,this.events=Fe("events"),this.client=Fe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Pn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Yn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Pn(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Kn(new dr(r,Fe("disableProviderPing")))}}var E9=Object.defineProperty,v9=(t,e,n)=>e in t?E9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,no=(t,e,n)=>v9(t,typeof e!="symbol"?e+"":e,n);class C9{constructor(e){no(this,"name","cip34"),no(this,"client"),no(this,"httpProviders"),no(this,"events"),no(this,"namespace"),no(this,"chainId"),this.namespace=e.namespace,this.events=Fe("events"),this.client=Fe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Yn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=Li(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Kn(new dr(r,Fe("disableProviderPing")))}}var _9=Object.defineProperty,A9=(t,e,n)=>e in t?_9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ro=(t,e,n)=>A9(t,typeof e!="symbol"?e+"":e,n);class I9{constructor(e){ro(this,"name","elrond"),ro(this,"client"),ro(this,"httpProviders"),ro(this,"events"),ro(this,"namespace"),ro(this,"chainId"),this.namespace=e.namespace,this.events=Fe("events"),this.client=Fe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Yn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Li(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Pn(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Kn(new dr(r,Fe("disableProviderPing")))}}var S9=Object.defineProperty,N9=(t,e,n)=>e in t?S9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,so=(t,e,n)=>N9(t,typeof e!="symbol"?e+"":e,n);class T9{constructor(e){so(this,"name","multiversx"),so(this,"client"),so(this,"httpProviders"),so(this,"events"),so(this,"namespace"),so(this,"chainId"),this.namespace=e.namespace,this.events=Fe("events"),this.client=Fe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Yn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Li(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Pn(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Kn(new dr(r,Fe("disableProviderPing")))}}var x9=Object.defineProperty,P9=(t,e,n)=>e in t?x9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,io=(t,e,n)=>P9(t,typeof e!="symbol"?e+"":e,n);class O9{constructor(e){io(this,"name","near"),io(this,"client"),io(this,"httpProviders"),io(this,"events"),io(this,"namespace"),io(this,"chainId"),this.namespace=e.namespace,this.events=Fe("events"),this.client=Fe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Pn(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Yn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Pn(e,this.namespace);return typeof r>"u"?void 0:new Kn(new dr(r,Fe("disableProviderPing")))}}var R9=Object.defineProperty,$9=(t,e,n)=>e in t?R9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oo=(t,e,n)=>$9(t,typeof e!="symbol"?e+"":e,n);class D9{constructor(e){oo(this,"name","tezos"),oo(this,"client"),oo(this,"httpProviders"),oo(this,"events"),oo(this,"namespace"),oo(this,"chainId"),this.namespace=e.namespace,this.events=Fe("events"),this.client=Fe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Pn(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Yn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Pn(e,this.namespace);return typeof r>"u"?void 0:new Kn(new dr(r))}}var k9=Object.defineProperty,U9=(t,e,n)=>e in t?k9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ao=(t,e,n)=>U9(t,typeof e!="symbol"?e+"":e,n);class B9{constructor(e){ao(this,"name",lo),ao(this,"client"),ao(this,"httpProviders"),ao(this,"events"),ao(this,"namespace"),ao(this,"chainId"),this.namespace=e.namespace,this.events=Fe("events"),this.client=Fe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Yn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=wo(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Pn(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Kn(new dr(r,Fe("disableProviderPing")))}}var M9=Object.defineProperty,L9=Object.defineProperties,F9=Object.getOwnPropertyDescriptors,a0=Object.getOwnPropertySymbols,j9=Object.prototype.hasOwnProperty,z9=Object.prototype.propertyIsEnumerable,tp=(t,e,n)=>e in t?M9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$u=(t,e)=>{for(var n in e||(e={}))j9.call(e,n)&&tp(t,n,e[n]);if(a0)for(var n of a0(e))z9.call(e,n)&&tp(t,n,e[n]);return t},Ah=(t,e)=>L9(t,F9(e)),kn=(t,e,n)=>tp(t,typeof e!="symbol"?e+"":e,n);let H9=class TC{constructor(e){kn(this,"client"),kn(this,"namespaces"),kn(this,"optionalNamespaces"),kn(this,"sessionProperties"),kn(this,"scopedProperties"),kn(this,"events",new Up),kn(this,"rpcProviders",{}),kn(this,"session"),kn(this,"providerOpts"),kn(this,"logger"),kn(this,"uri"),kn(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Gc(Mo({level:(e==null?void 0:e.logger)||Yw})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new TC(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:$u({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,fd(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:at("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=r0(this.session.namespaces);this.namespaces=Ru(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=r0(s.namespaces);return this.namespaces=Ru(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===lo?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Qr(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await uL.init({core:this.providerOpts.core,logger:this.providerOpts.logger||Yw,relayUrl:this.providerOpts.relayUrl||wL,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>po(n)))];_h("client",this.client),_h("events",this.events),_h("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=t9(n,this.session),s=SC(r),i=Ru(this.namespaces,this.optionalNamespaces),o=Ah($u({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new l9({namespace:o});break;case"algorand":this.rpcProviders[n]=new b9({namespace:o});break;case"solana":this.rpcProviders[n]=new f9({namespace:o});break;case"cosmos":this.rpcProviders[n]=new m9({namespace:o});break;case"polkadot":this.rpcProviders[n]=new s9({namespace:o});break;case"cip34":this.rpcProviders[n]=new C9({namespace:o});break;case"elrond":this.rpcProviders[n]=new I9({namespace:o});break;case"multiversx":this.rpcProviders[n]=new T9({namespace:o});break;case"near":this.rpcProviders[n]=new O9({namespace:o});break;case"tezos":this.rpcProviders[n]=new D9({namespace:o});break;default:this.rpcProviders[lo]?this.rpcProviders[lo].updateNamespace(o):this.rpcProviders[lo]=new B9({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Qr(o)&&this.events.emit("accountsChanged",o.map(n0))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=po(o),u=Ch(o)!==Ch(a)?`${c}:${Ch(a)}`:o;this.onChainChanged(u)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=Ah($u({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Ah($u({},at("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Yn.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[lo]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=Ru(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>po(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=po(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(n0);if(!Qr(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${Pu}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${Pu}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${Pu}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(Pu)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}},Xs=null;const Fn={getSIWX(){return q.state.siwx},async initializeIfEnabled(){var i;const t=q.state.siwx,e=_.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(_.checkIfSupportedNetwork(n))try{if(Xs&&await Xs,(await t.getSessions(`${n}:${r}`,s)).length)return;await Me.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),We.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=ee._getClient())==null?void 0:i.disconnect().catch(console.error)),ge.reset("Connect"),_r.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=q.state.siwx,e=ae.getPlainAddress(_.getActiveCaipAddress()),n=_.getActiveCaipNetwork(),r=ee._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Q.getConnectorId(n.chainNamespace)===F.CONNECTOR_ID.AUTH&&ge.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),_.setLastConnectedSIWECaipNetwork(n),Me.close(),We.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Me.state.open||ge.state.view==="ApproveTransaction")&&await Me.open({view:"SIWXSignMessage"}),_r.showError("Error signing message"),We.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=_.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,ae.getPlainAddress(_.getActiveCaipAddress())||""));s&&s.length>0?await _.switchActiveNetwork(r):await ee.disconnect()}else await ee.disconnect()}else Me.close();Me.close(),We.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=_.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,ae.getPlainAddress(_.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(t){const e=q.state.siwx;let n=t==null?void 0:t.address;if(!n){const s=_.getActiveCaipAddress();n=ae.getPlainAddress(s)}let r=t==null?void 0:t.caipNetworkId;if(!r){const s=_.getActiveCaipNetwork();r=s==null?void 0:s.caipNetworkId}return e&&n&&r?e.getSessions(r,n):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=ge.state.view==="ApproveTransaction",r=ge.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var u;const i=Fn.getSIWX();if(!i||!s.includes(F.CHAIN.EVM)){const l=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:l.address,chainId:l.chainId,accounts:l.accounts}}const o=await i.createMessage({chainId:((u=_.getActiveCaipNetwork())==null?void 0:u.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await Fn.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(Xs)return Xs;const r=Fn.getSIWX();return r?(Xs=r.addSession({data:t,message:e,signature:n}).finally(()=>{Xs=null}),Xs):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,u;const r=Fn.getSIWX(),s=new Set(e.map(l=>l.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=_.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(l=>l!==i.chainId)]});if(_r.showLoading("Authenticating...",{autoClose:!1}),ue.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(u=o==null?void 0:o.auths)!=null&&u.length){const l=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(l),We.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Fn.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),We.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Fn.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{_r.hide()}}return!0},getSIWXEventProperties(){var e;const t=_.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=_.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:xn(t)===vt.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},st={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:F.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},In={ConnectorExplorerIds:{[F.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[F.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[F.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[F.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[F.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[st.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[st.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[st.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[st.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[st.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[st.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[st.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[st.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[st.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[st.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[st.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[F.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[F.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[F.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[F.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[F.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[F.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[F.CONNECTOR_ID.INJECTED]:"Browser Wallet",[F.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[F.CONNECTOR_ID.COINBASE]:"Coinbase",[F.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[F.CONNECTOR_ID.LEDGER]:"Ledger",[F.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[F.CONNECTOR_ID.INJECTED]:"INJECTED",[F.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[F.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[F.CONNECTOR_ID.AUTH]:"AUTH",[st.CONNECTOR_TYPE_AUTH]:"AUTH"}},Nt={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${st.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=_.state.activeChain;return F.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>Q.getConnectorId(e)===F.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},q9=new AbortController,ut={EmbeddedWalletAbortController:q9,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found. Please make sure it is included in 'networks' array in createAppKit function."},ORIGIN_NOT_ALLOWED:{shortMessage:"Origin Not Allowed",longMessage:()=>` Origin ${W9()?window.origin:"unknown"} not found on allow list. Please update your project configurations on dashboard.reown.com.`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Unverified Domain",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider. Please check your time settings and connect again."},INVALID_PROJECT_ID:{shortMessage:"Invalid Project ID",longMessage:"The project ID is invalid. Visit dashboard.reown.com to get a new one."},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured. Please update your project configurations on dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{shortMessage:"Server Error",longMessage:t=>`Failed to get App Configuration ${t||""}`},RATE_LIMITED_APP_CONFIGURATION:{shortMessage:"Rate Limited",longMessage:"Rate limited when trying to get the App Configuration"}}};function W9(){return typeof window<"u"}const V9={createLogger(t,e="error"){const n=Mo({level:e}),{logger:r}=Mp({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},G9="rpc.walletconnect.org";function c0(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const Ih=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Cr={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===G9}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:F.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${F.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return Ih.includes(e)?c0(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,m,b,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(p=(f=(h=t.rpcUrls)==null?void 0:h.default)==null?void 0:f.http)==null?void 0:p[0],a=this.getDefaultRpcUrl(t,i,n),c=((b=(m=(g=t==null?void 0:t.rpcUrls)==null?void 0:g.chainDefault)==null?void 0:m.http)==null?void 0:b[0])||o,u=((w=r==null?void 0:r[i])==null?void 0:w.map(E=>E.url))||[],l=[...u,...a?[a]:[]],d=[...u];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:In.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:l},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Cr.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(hu(a.url,a.config))}),Ih.includes(t.caipNetworkId)&&r.push(hu(c0(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(hu(a))}),dm(r)},extendWagmiTransports(t,e,n){if(Ih.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return dm([n,hu(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:F.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=G.getActiveCaipNetworkId(),n=_.getAllRequestedCaipNetworks(),r=Array.from(((c=_.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(u=>u.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},_l={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},cn=Je({providers:{..._l},providerIds:{..._l}}),Ke={state:cn,subscribeKey(t,e){return Bt(cn,t,e)},subscribe(t){return Ut(cn,()=>{t(cn)})},subscribeProviders(t){return Ut(cn.providers,()=>t(cn.providers))},setProvider(t,e){t&&e&&(cn.providers[t]=yi(e))},getProvider(t){if(t)return cn.providers[t]},setProviderId(t,e){e&&(cn.providerIds[t]=e)},getProviderId(t){if(t)return cn.providerIds[t]},reset(){cn.providers={..._l},cn.providerIds={..._l}},resetChain(t){cn.providers[t]=void 0,cn.providerIds[t]=void 0}},xC={BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org"},K9={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},u0={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Dt={set(t,e){Nn.isClient&&localStorage.setItem(`${ce.STORAGE_KEY}${t}`,e)},get(t){return Nn.isClient?localStorage.getItem(`${ce.STORAGE_KEY}${t}`):null},delete(t,e){Nn.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${ce.STORAGE_KEY}${t}`))}},Du=30*1e3,Nn={checkIfAllowedToTriggerEmail(){const t=Dt.get(ce.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Du){const n=Math.ceil((Du-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Dt.get(ce.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Du)return Math.ceil((Du-e)/1e3)}return 0},checkIfRequestExists(t){return vt.NOT_SAFE_RPC_METHODS.includes(t.method)||vt.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(u0.transactionHash))||(t==null?void 0:t.match(u0.signedMessage)))?ce.RPC_RESPONSE_TYPE_TX:ce.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return vt.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var Le;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Le||(Le={}));var np;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(np||(np={}));const re=Le.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Is=t=>{switch(typeof t){case"undefined":return re.undefined;case"string":return re.string;case"number":return isNaN(t)?re.nan:re.number;case"boolean":return re.boolean;case"function":return re.function;case"bigint":return re.bigint;case"symbol":return re.symbol;case"object":return Array.isArray(t)?re.array:t===null?re.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?re.promise:typeof Map<"u"&&t instanceof Map?re.map:typeof Set<"u"&&t instanceof Set?re.set:typeof Date<"u"&&t instanceof Date?re.date:re.object;default:return re.unknown}},Y=Le.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Y9=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ar extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Le.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ar.create=t=>new ar(t);const Ec=(t,e)=>{let n;switch(t.code){case Y.invalid_type:t.received===re.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Y.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Le.jsonStringifyReplacer)}`;break;case Y.unrecognized_keys:n=`Unrecognized key(s) in object: ${Le.joinValues(t.keys,", ")}`;break;case Y.invalid_union:n="Invalid input";break;case Y.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Le.joinValues(t.options)}`;break;case Y.invalid_enum_value:n=`Invalid enum value. Expected ${Le.joinValues(t.options)}, received '${t.received}'`;break;case Y.invalid_arguments:n="Invalid function arguments";break;case Y.invalid_return_type:n="Invalid function return type";break;case Y.invalid_date:n="Invalid date";break;case Y.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Le.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Y.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Y.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Y.custom:n="Invalid input";break;case Y.invalid_intersection_types:n="Intersection results could not be merged";break;case Y.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Y.not_finite:n="Number must be finite";break;default:n=e.defaultError,Le.assertNever(t)}return{message:n}};let PC=Ec;function Z9(t){PC=t}function Al(){return PC}const Il=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},J9=[];function oe(t,e){const n=Il({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Al(),Ec].filter(r=>!!r)});t.common.issues.push(n)}class Yt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return be;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return Yt.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return be;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const be=Object.freeze({status:"aborted"}),OC=t=>({status:"dirty",value:t}),Qt=t=>({status:"valid",value:t}),rp=t=>t.status==="aborted",sp=t=>t.status==="dirty",vc=t=>t.status==="valid",Sl=t=>typeof Promise<"u"&&t instanceof Promise;var he;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(he||(he={}));class $r{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const l0=(t,e)=>{if(vc(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ar(t.common.issues);return this._error=n,this._error}}};function _e(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class Ne{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Is(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Is(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Yt,ctx:{common:e.parent.common,data:e.data,parsedType:Is(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Sl(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Is(e)},i=this._parseSync({data:e,path:s.path,parent:s});return l0(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Is(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(Sl(s)?s:Promise.resolve(s));return l0(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Y.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new ur({schema:this,typeName:me.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return es.create(this,this._def)}nullable(){return xi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return cr.create(this,this._def)}promise(){return Ro.create(this,this._def)}or(e){return Ic.create([this,e],this._def)}and(e){return Sc.create(this,e,this._def)}transform(e){return new ur({..._e(this._def),schema:this,typeName:me.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Oc({..._e(this._def),innerType:this,defaultValue:n,typeName:me.ZodDefault})}brand(){return new $C({typeName:me.ZodBranded,type:this,..._e(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Pl({..._e(this._def),innerType:this,catchValue:n,typeName:me.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return nu.create(this,e)}readonly(){return Rl.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const X9=/^c[^\s-]{8,}$/i,Q9=/^[a-z][a-z0-9]*$/,eF=/^[0-9A-HJKMNP-TV-Z]{26}$/,tF=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nF=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,rF="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Sh;const sF=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,iF=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,oF=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function aF(t,e){return!!((e==="v4"||!e)&&sF.test(t)||(e==="v6"||!e)&&iF.test(t))}class ir extends Ne{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==re.string){const i=this._getOrReturnCtx(e);return oe(i,{code:Y.invalid_type,expected:re.string,received:i.parsedType}),be}const r=new Yt;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),oe(s,{code:Y.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),oe(s,{code:Y.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?oe(s,{code:Y.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&oe(s,{code:Y.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")nF.test(e.data)||(s=this._getOrReturnCtx(e,s),oe(s,{validation:"email",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Sh||(Sh=new RegExp(rF,"u")),Sh.test(e.data)||(s=this._getOrReturnCtx(e,s),oe(s,{validation:"emoji",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")tF.test(e.data)||(s=this._getOrReturnCtx(e,s),oe(s,{validation:"uuid",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")X9.test(e.data)||(s=this._getOrReturnCtx(e,s),oe(s,{validation:"cuid",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Q9.test(e.data)||(s=this._getOrReturnCtx(e,s),oe(s,{validation:"cuid2",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")eF.test(e.data)||(s=this._getOrReturnCtx(e,s),oe(s,{validation:"ulid",code:Y.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),oe(s,{validation:"url",code:Y.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),oe(s,{validation:"regex",code:Y.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),oe(s,{code:Y.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),oe(s,{code:Y.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),oe(s,{code:Y.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?oF(i).test(e.data)||(s=this._getOrReturnCtx(e,s),oe(s,{code:Y.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?aF(e.data,i.version)||(s=this._getOrReturnCtx(e,s),oe(s,{validation:"ip",code:Y.invalid_string,message:i.message}),r.dirty()):Le.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Y.invalid_string,...he.errToObj(r)})}_addCheck(e){return new ir({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...he.errToObj(e)})}url(e){return this._addCheck({kind:"url",...he.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...he.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...he.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...he.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...he.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...he.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...he.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...he.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...he.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...he.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...he.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...he.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...he.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...he.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...he.errToObj(n)})}nonempty(e){return this.min(1,he.errToObj(e))}trim(){return new ir({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ir({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ir({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ir.create=t=>{var e;return new ir({checks:[],typeName:me.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,..._e(t)})};function cF(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class js extends Ne{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==re.number){const i=this._getOrReturnCtx(e);return oe(i,{code:Y.invalid_type,expected:re.number,received:i.parsedType}),be}let r;const s=new Yt;for(const i of this._def.checks)i.kind==="int"?Le.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),oe(r,{code:Y.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),oe(r,{code:Y.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),oe(r,{code:Y.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?cF(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),oe(r,{code:Y.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),oe(r,{code:Y.not_finite,message:i.message}),s.dirty()):Le.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,he.toString(n))}gt(e,n){return this.setLimit("min",e,!1,he.toString(n))}lte(e,n){return this.setLimit("max",e,!0,he.toString(n))}lt(e,n){return this.setLimit("max",e,!1,he.toString(n))}setLimit(e,n,r,s){return new js({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:he.toString(s)}]})}_addCheck(e){return new js({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:he.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:he.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:he.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:he.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:he.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:he.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:he.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:he.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:he.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Le.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}js.create=t=>new js({checks:[],typeName:me.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,..._e(t)});class zs extends Ne{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==re.bigint){const i=this._getOrReturnCtx(e);return oe(i,{code:Y.invalid_type,expected:re.bigint,received:i.parsedType}),be}let r;const s=new Yt;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),oe(r,{code:Y.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),oe(r,{code:Y.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),oe(r,{code:Y.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Le.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,he.toString(n))}gt(e,n){return this.setLimit("min",e,!1,he.toString(n))}lte(e,n){return this.setLimit("max",e,!0,he.toString(n))}lt(e,n){return this.setLimit("max",e,!1,he.toString(n))}setLimit(e,n,r,s){return new zs({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:he.toString(s)}]})}_addCheck(e){return new zs({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:he.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:he.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:he.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:he.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:he.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}zs.create=t=>{var e;return new zs({checks:[],typeName:me.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,..._e(t)})};class Cc extends Ne{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==re.boolean){const r=this._getOrReturnCtx(e);return oe(r,{code:Y.invalid_type,expected:re.boolean,received:r.parsedType}),be}return Qt(e.data)}}Cc.create=t=>new Cc({typeName:me.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,..._e(t)});class Ni extends Ne{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==re.date){const i=this._getOrReturnCtx(e);return oe(i,{code:Y.invalid_type,expected:re.date,received:i.parsedType}),be}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return oe(i,{code:Y.invalid_date}),be}const r=new Yt;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),oe(s,{code:Y.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),oe(s,{code:Y.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Le.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ni({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:he.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:he.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Ni.create=t=>new Ni({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:me.ZodDate,..._e(t)});class Nl extends Ne{_parse(e){if(this._getType(e)!==re.symbol){const r=this._getOrReturnCtx(e);return oe(r,{code:Y.invalid_type,expected:re.symbol,received:r.parsedType}),be}return Qt(e.data)}}Nl.create=t=>new Nl({typeName:me.ZodSymbol,..._e(t)});class _c extends Ne{_parse(e){if(this._getType(e)!==re.undefined){const r=this._getOrReturnCtx(e);return oe(r,{code:Y.invalid_type,expected:re.undefined,received:r.parsedType}),be}return Qt(e.data)}}_c.create=t=>new _c({typeName:me.ZodUndefined,..._e(t)});class Ac extends Ne{_parse(e){if(this._getType(e)!==re.null){const r=this._getOrReturnCtx(e);return oe(r,{code:Y.invalid_type,expected:re.null,received:r.parsedType}),be}return Qt(e.data)}}Ac.create=t=>new Ac({typeName:me.ZodNull,..._e(t)});class Oo extends Ne{constructor(){super(...arguments),this._any=!0}_parse(e){return Qt(e.data)}}Oo.create=t=>new Oo({typeName:me.ZodAny,..._e(t)});class pi extends Ne{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Qt(e.data)}}pi.create=t=>new pi({typeName:me.ZodUnknown,..._e(t)});class rs extends Ne{_parse(e){const n=this._getOrReturnCtx(e);return oe(n,{code:Y.invalid_type,expected:re.never,received:n.parsedType}),be}}rs.create=t=>new rs({typeName:me.ZodNever,..._e(t)});class Tl extends Ne{_parse(e){if(this._getType(e)!==re.undefined){const r=this._getOrReturnCtx(e);return oe(r,{code:Y.invalid_type,expected:re.void,received:r.parsedType}),be}return Qt(e.data)}}Tl.create=t=>new Tl({typeName:me.ZodVoid,..._e(t)});class cr extends Ne{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==re.array)return oe(n,{code:Y.invalid_type,expected:re.array,received:n.parsedType}),be;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(oe(n,{code:o?Y.too_big:Y.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(oe(n,{code:Y.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(oe(n,{code:Y.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new $r(n,o,n.path,a)))).then(o=>Yt.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new $r(n,o,n.path,a)));return Yt.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new cr({...this._def,minLength:{value:e,message:he.toString(n)}})}max(e,n){return new cr({...this._def,maxLength:{value:e,message:he.toString(n)}})}length(e,n){return new cr({...this._def,exactLength:{value:e,message:he.toString(n)}})}nonempty(e){return this.min(1,e)}}cr.create=(t,e)=>new cr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:me.ZodArray,..._e(e)});function ho(t){if(t instanceof lt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=es.create(ho(r))}return new lt({...t._def,shape:()=>e})}else return t instanceof cr?new cr({...t._def,type:ho(t.element)}):t instanceof es?es.create(ho(t.unwrap())):t instanceof xi?xi.create(ho(t.unwrap())):t instanceof Dr?Dr.create(t.items.map(e=>ho(e))):t}class lt extends Ne{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Le.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==re.object){const u=this._getOrReturnCtx(e);return oe(u,{code:Y.invalid_type,expected:re.object,received:u.parsedType}),be}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof rs&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const l=i[u],d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new $r(s,d,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof rs){const u=this._def.unknownKeys;if(u==="passthrough")for(const l of a)c.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(u==="strict")a.length>0&&(oe(s,{code:Y.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const l of a){const d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new $r(s,d,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const l of c){const d=await l.key;u.push({key:d,value:await l.value,alwaysSet:l.alwaysSet})}return u}).then(u=>Yt.mergeObjectSync(r,u)):Yt.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return he.errToObj,new lt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=he.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new lt({...this._def,unknownKeys:"strip"})}passthrough(){return new lt({...this._def,unknownKeys:"passthrough"})}extend(e){return new lt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new lt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:me.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new lt({...this._def,catchall:e})}pick(e){const n={};return Le.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new lt({...this._def,shape:()=>n})}omit(e){const n={};return Le.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new lt({...this._def,shape:()=>n})}deepPartial(){return ho(this)}partial(e){const n={};return Le.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new lt({...this._def,shape:()=>n})}required(e){const n={};return Le.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof es;)i=i._def.innerType;n[r]=i}}),new lt({...this._def,shape:()=>n})}keyof(){return RC(Le.objectKeys(this.shape))}}lt.create=(t,e)=>new lt({shape:()=>t,unknownKeys:"strip",catchall:rs.create(),typeName:me.ZodObject,..._e(e)});lt.strictCreate=(t,e)=>new lt({shape:()=>t,unknownKeys:"strict",catchall:rs.create(),typeName:me.ZodObject,..._e(e)});lt.lazycreate=(t,e)=>new lt({shape:t,unknownKeys:"strip",catchall:rs.create(),typeName:me.ZodObject,..._e(e)});class Ic extends Ne{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new ar(a.ctx.common.issues));return oe(n,{code:Y.invalid_union,unionErrors:o}),be}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},l=c._parseSync({data:n.data,path:n.path,parent:u});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new ar(c));return oe(n,{code:Y.invalid_union,unionErrors:a}),be}}get options(){return this._def.options}}Ic.create=(t,e)=>new Ic({options:t,typeName:me.ZodUnion,..._e(e)});const Yu=t=>t instanceof Tc?Yu(t.schema):t instanceof ur?Yu(t.innerType()):t instanceof xc?[t.value]:t instanceof Hs?t.options:t instanceof Pc?Object.keys(t.enum):t instanceof Oc?Yu(t._def.innerType):t instanceof _c?[void 0]:t instanceof Ac?[null]:null;class wd extends Ne{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==re.object)return oe(n,{code:Y.invalid_type,expected:re.object,received:n.parsedType}),be;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(oe(n,{code:Y.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),be)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=Yu(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new wd({typeName:me.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,..._e(r)})}}function ip(t,e){const n=Is(t),r=Is(e);if(t===e)return{valid:!0,data:t};if(n===re.object&&r===re.object){const s=Le.objectKeys(e),i=Le.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=ip(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===re.array&&r===re.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=ip(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===re.date&&r===re.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Sc extends Ne{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(rp(i)||rp(o))return be;const a=ip(i.value,o.value);return a.valid?((sp(i)||sp(o))&&n.dirty(),{status:n.value,value:a.data}):(oe(r,{code:Y.invalid_intersection_types}),be)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Sc.create=(t,e,n)=>new Sc({left:t,right:e,typeName:me.ZodIntersection,..._e(n)});class Dr extends Ne{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==re.array)return oe(r,{code:Y.invalid_type,expected:re.array,received:r.parsedType}),be;if(r.data.length<this._def.items.length)return oe(r,{code:Y.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),be;!this._def.rest&&r.data.length>this._def.items.length&&(oe(r,{code:Y.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new $r(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Yt.mergeArray(n,o)):Yt.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Dr({...this._def,rest:e})}}Dr.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Dr({items:t,typeName:me.ZodTuple,rest:null,..._e(e)})};class Nc extends Ne{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==re.object)return oe(r,{code:Y.invalid_type,expected:re.object,received:r.parsedType}),be;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new $r(r,a,r.path,a)),value:o._parse(new $r(r,r.data[a],r.path,a))});return r.common.async?Yt.mergeObjectAsync(n,s):Yt.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Ne?new Nc({keyType:e,valueType:n,typeName:me.ZodRecord,..._e(r)}):new Nc({keyType:ir.create(),valueType:e,typeName:me.ZodRecord,..._e(n)})}}class xl extends Ne{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==re.map)return oe(r,{code:Y.invalid_type,expected:re.map,received:r.parsedType}),be;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],u)=>({key:s._parse(new $r(r,a,r.path,[u,"key"])),value:i._parse(new $r(r,c,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,l=await c.value;if(u.status==="aborted"||l.status==="aborted")return be;(u.status==="dirty"||l.status==="dirty")&&n.dirty(),a.set(u.value,l.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,l=c.value;if(u.status==="aborted"||l.status==="aborted")return be;(u.status==="dirty"||l.status==="dirty")&&n.dirty(),a.set(u.value,l.value)}return{status:n.value,value:a}}}}xl.create=(t,e,n)=>new xl({valueType:e,keyType:t,typeName:me.ZodMap,..._e(n)});class Ti extends Ne{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==re.set)return oe(r,{code:Y.invalid_type,expected:re.set,received:r.parsedType}),be;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(oe(r,{code:Y.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(oe(r,{code:Y.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const l of c){if(l.status==="aborted")return be;l.status==="dirty"&&n.dirty(),u.add(l.value)}return{status:n.value,value:u}}const a=[...r.data.values()].map((c,u)=>i._parse(new $r(r,c,r.path,u)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new Ti({...this._def,minSize:{value:e,message:he.toString(n)}})}max(e,n){return new Ti({...this._def,maxSize:{value:e,message:he.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Ti.create=(t,e)=>new Ti({valueType:t,minSize:null,maxSize:null,typeName:me.ZodSet,..._e(e)});class bo extends Ne{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==re.function)return oe(n,{code:Y.invalid_type,expected:re.function,received:n.parsedType}),be;function r(a,c){return Il({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Al(),Ec].filter(u=>!!u),issueData:{code:Y.invalid_arguments,argumentsError:c}})}function s(a,c){return Il({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Al(),Ec].filter(u=>!!u),issueData:{code:Y.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Ro){const a=this;return Qt(async function(...c){const u=new ar([]),l=await a._def.args.parseAsync(c,i).catch(f=>{throw u.addIssue(r(c,f)),u}),d=await Reflect.apply(o,this,l);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw u.addIssue(s(d,f)),u})})}else{const a=this;return Qt(function(...c){const u=a._def.args.safeParse(c,i);if(!u.success)throw new ar([r(c,u.error)]);const l=Reflect.apply(o,this,u.data),d=a._def.returns.safeParse(l,i);if(!d.success)throw new ar([s(l,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new bo({...this._def,args:Dr.create(e).rest(pi.create())})}returns(e){return new bo({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new bo({args:e||Dr.create([]).rest(pi.create()),returns:n||pi.create(),typeName:me.ZodFunction,..._e(r)})}}class Tc extends Ne{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Tc.create=(t,e)=>new Tc({getter:t,typeName:me.ZodLazy,..._e(e)});class xc extends Ne{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return oe(n,{received:n.data,code:Y.invalid_literal,expected:this._def.value}),be}return{status:"valid",value:e.data}}get value(){return this._def.value}}xc.create=(t,e)=>new xc({value:t,typeName:me.ZodLiteral,..._e(e)});function RC(t,e){return new Hs({values:t,typeName:me.ZodEnum,..._e(e)})}class Hs extends Ne{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return oe(n,{expected:Le.joinValues(r),received:n.parsedType,code:Y.invalid_type}),be}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return oe(n,{received:n.data,code:Y.invalid_enum_value,options:r}),be}return Qt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return Hs.create(e)}exclude(e){return Hs.create(this.options.filter(n=>!e.includes(n)))}}Hs.create=RC;class Pc extends Ne{_parse(e){const n=Le.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==re.string&&r.parsedType!==re.number){const s=Le.objectValues(n);return oe(r,{expected:Le.joinValues(s),received:r.parsedType,code:Y.invalid_type}),be}if(n.indexOf(e.data)===-1){const s=Le.objectValues(n);return oe(r,{received:r.data,code:Y.invalid_enum_value,options:s}),be}return Qt(e.data)}get enum(){return this._def.values}}Pc.create=(t,e)=>new Pc({values:t,typeName:me.ZodNativeEnum,..._e(e)});class Ro extends Ne{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==re.promise&&n.common.async===!1)return oe(n,{code:Y.invalid_type,expected:re.promise,received:n.parsedType}),be;const r=n.parsedType===re.promise?n.data:Promise.resolve(n.data);return Qt(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Ro.create=(t,e)=>new Ro({type:t,typeName:me.ZodPromise,..._e(e)});class ur extends Ne{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===me.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{oe(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?be:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?be:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!vc(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>vc(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);Le.assertNever(s)}}ur.create=(t,e,n)=>new ur({schema:t,typeName:me.ZodEffects,effect:e,..._e(n)});ur.createWithPreprocess=(t,e,n)=>new ur({schema:e,effect:{type:"preprocess",transform:t},typeName:me.ZodEffects,..._e(n)});class es extends Ne{_parse(e){return this._getType(e)===re.undefined?Qt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}es.create=(t,e)=>new es({innerType:t,typeName:me.ZodOptional,..._e(e)});class xi extends Ne{_parse(e){return this._getType(e)===re.null?Qt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}xi.create=(t,e)=>new xi({innerType:t,typeName:me.ZodNullable,..._e(e)});class Oc extends Ne{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===re.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Oc.create=(t,e)=>new Oc({innerType:t,typeName:me.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,..._e(e)});class Pl extends Ne{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Sl(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ar(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ar(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Pl.create=(t,e)=>new Pl({innerType:t,typeName:me.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,..._e(e)});class Ol extends Ne{_parse(e){if(this._getType(e)!==re.nan){const r=this._getOrReturnCtx(e);return oe(r,{code:Y.invalid_type,expected:re.nan,received:r.parsedType}),be}return{status:"valid",value:e.data}}}Ol.create=t=>new Ol({typeName:me.ZodNaN,..._e(t)});const uF=Symbol("zod_brand");class $C extends Ne{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class nu extends Ne{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?be:i.status==="dirty"?(n.dirty(),OC(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?be:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new nu({in:e,out:n,typeName:me.ZodPipeline})}}class Rl extends Ne{_parse(e){const n=this._def.innerType._parse(e);return vc(n)&&(n.value=Object.freeze(n.value)),n}}Rl.create=(t,e)=>new Rl({innerType:t,typeName:me.ZodReadonly,..._e(e)});const DC=(t,e={},n)=>t?Oo.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...u,fatal:c})}}):Oo.create(),lF={object:lt.lazycreate};var me;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(me||(me={}));const dF=(t,e={message:`Input not instance of ${t.name}`})=>DC(n=>n instanceof t,e),kC=ir.create,UC=js.create,hF=Ol.create,fF=zs.create,BC=Cc.create,pF=Ni.create,gF=Nl.create,mF=_c.create,yF=Ac.create,wF=Oo.create,bF=pi.create,EF=rs.create,vF=Tl.create,CF=cr.create,_F=lt.create,AF=lt.strictCreate,IF=Ic.create,SF=wd.create,NF=Sc.create,TF=Dr.create,xF=Nc.create,PF=xl.create,OF=Ti.create,RF=bo.create,$F=Tc.create,DF=xc.create,kF=Hs.create,UF=Pc.create,BF=Ro.create,d0=ur.create,MF=es.create,LF=xi.create,FF=ur.createWithPreprocess,jF=nu.create,zF=()=>kC().optional(),HF=()=>UC().optional(),qF=()=>BC().optional(),WF={string:t=>ir.create({...t,coerce:!0}),number:t=>js.create({...t,coerce:!0}),boolean:t=>Cc.create({...t,coerce:!0}),bigint:t=>zs.create({...t,coerce:!0}),date:t=>Ni.create({...t,coerce:!0})},VF=be;var y=Object.freeze({__proto__:null,defaultErrorMap:Ec,setErrorMap:Z9,getErrorMap:Al,makeIssue:Il,EMPTY_PATH:J9,addIssueToContext:oe,ParseStatus:Yt,INVALID:be,DIRTY:OC,OK:Qt,isAborted:rp,isDirty:sp,isValid:vc,isAsync:Sl,get util(){return Le},get objectUtil(){return np},ZodParsedType:re,getParsedType:Is,ZodType:Ne,ZodString:ir,ZodNumber:js,ZodBigInt:zs,ZodBoolean:Cc,ZodDate:Ni,ZodSymbol:Nl,ZodUndefined:_c,ZodNull:Ac,ZodAny:Oo,ZodUnknown:pi,ZodNever:rs,ZodVoid:Tl,ZodArray:cr,ZodObject:lt,ZodUnion:Ic,ZodDiscriminatedUnion:wd,ZodIntersection:Sc,ZodTuple:Dr,ZodRecord:Nc,ZodMap:xl,ZodSet:Ti,ZodFunction:bo,ZodLazy:Tc,ZodLiteral:xc,ZodEnum:Hs,ZodNativeEnum:Pc,ZodPromise:Ro,ZodEffects:ur,ZodTransformer:ur,ZodOptional:es,ZodNullable:xi,ZodDefault:Oc,ZodCatch:Pl,ZodNaN:Ol,BRAND:uF,ZodBranded:$C,ZodPipeline:nu,ZodReadonly:Rl,custom:DC,Schema:Ne,ZodSchema:Ne,late:lF,get ZodFirstPartyTypeKind(){return me},coerce:WF,any:wF,array:CF,bigint:fF,boolean:BC,date:pF,discriminatedUnion:SF,effect:d0,enum:kF,function:RF,instanceof:dF,intersection:NF,lazy:$F,literal:DF,map:PF,nan:hF,nativeEnum:UF,never:EF,null:yF,nullable:LF,number:UC,object:_F,oboolean:qF,onumber:HF,optional:MF,ostring:zF,pipeline:jF,preprocess:FF,promise:BF,record:xF,set:OF,strictObject:AF,string:kC,symbol:gF,transformer:d0,tuple:TF,undefined:mF,union:IF,unknown:bF,void:vF,NEVER:VF,ZodIssueCode:Y,quotelessJson:Y9,ZodError:ar});const dt=y.object({message:y.string()});function se(t){return y.literal(ce[t])}const bd=y.object({serializedMessage:y.string().optional(),accountAddress:y.string(),chainId:y.string(),notBefore:y.string().optional(),domain:y.string(),uri:y.string(),version:y.string(),nonce:y.string(),statement:y.string().optional(),resources:y.array(y.string()).optional(),requestId:y.string().optional(),issuedAt:y.string().optional(),expirationTime:y.string().optional()});y.object({accessList:y.array(y.string()),blockHash:y.string().nullable(),blockNumber:y.string().nullable(),chainId:y.string().or(y.number()),from:y.string(),gas:y.string(),hash:y.string(),input:y.string().nullable(),maxFeePerGas:y.string(),maxPriorityFeePerGas:y.string(),nonce:y.string(),r:y.string(),s:y.string(),to:y.string(),transactionIndex:y.string().nullable(),type:y.string(),v:y.string(),value:y.string()});const GF=y.object({chainId:y.string().or(y.number()),rpcUrl:y.optional(y.string())}),KF=y.object({email:y.string().email()}),YF=y.object({otp:y.string()}),ZF=y.object({uri:y.string(),preferredAccountType:y.optional(y.string()),chainId:y.optional(y.string().or(y.number())),siwxMessage:y.optional(bd),rpcUrl:y.optional(y.string())}),JF=y.object({chainId:y.optional(y.string().or(y.number())),preferredAccountType:y.optional(y.string()),socialUri:y.optional(y.string()),siwxMessage:y.optional(bd),rpcUrl:y.optional(y.string())}),XF=y.object({provider:y.enum(["google","github","apple","facebook","x","discord"])}),QF=y.object({email:y.string().email()}),ej=y.object({otp:y.string()}),tj=y.object({otp:y.string()}),nj=y.object({themeMode:y.optional(y.enum(["light","dark"])),themeVariables:y.optional(y.record(y.string(),y.string().or(y.number()))),w3mThemeVariables:y.optional(y.record(y.string(),y.string()))}),rj=y.object({metadata:y.object({name:y.string(),description:y.string(),url:y.string(),icons:y.array(y.string())}).optional(),sdkVersion:y.string().optional(),sdkType:y.string().optional(),projectId:y.string()}),sj=y.object({type:y.string()}),ij=y.object({action:y.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),oj=y.object({url:y.string()}),aj=y.object({userName:y.string()}),cj=y.object({email:y.string().optional().nullable(),address:y.string(),chainId:y.string().or(y.number()),accounts:y.array(y.object({address:y.string(),type:y.enum([vt.ACCOUNT_TYPES.EOA,vt.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:y.string().optional().nullable(),preferredAccountType:y.optional(y.string()),signature:y.string().optional(),message:y.string().optional(),siwxMessage:y.optional(bd)}),uj=y.object({action:y.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),lj=y.object({email:y.string().email().optional().nullable(),address:y.string(),chainId:y.string().or(y.number()),smartAccountDeployed:y.optional(y.boolean()),accounts:y.array(y.object({address:y.string(),type:y.enum([vt.ACCOUNT_TYPES.EOA,vt.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:y.optional(y.string()),signature:y.string().optional(),message:y.string().optional(),siwxMessage:y.optional(bd)}),dj=y.object({uri:y.string()}),hj=y.object({isConnected:y.boolean()}),fj=y.object({chainId:y.string().or(y.number())}),pj=y.object({chainId:y.string().or(y.number())}),gj=y.object({newEmail:y.string().email()}),mj=y.object({smartAccountEnabledNetworks:y.array(y.number())});y.object({address:y.string(),isDeployed:y.boolean()});const yj=y.object({version:y.string().optional()}),wj=y.object({type:y.string(),address:y.string()}),bj=y.any(),Ej=y.object({method:y.literal("eth_accounts")}),vj=y.object({method:y.literal("eth_blockNumber")}),Cj=y.object({method:y.literal("eth_call"),params:y.array(y.any())}),_j=y.object({method:y.literal("eth_chainId")}),Aj=y.object({method:y.literal("eth_estimateGas"),params:y.array(y.any())}),Ij=y.object({method:y.literal("eth_feeHistory"),params:y.array(y.any())}),Sj=y.object({method:y.literal("eth_gasPrice")}),Nj=y.object({method:y.literal("eth_getAccount"),params:y.array(y.any())}),Tj=y.object({method:y.literal("eth_getBalance"),params:y.array(y.any())}),xj=y.object({method:y.literal("eth_getBlockByHash"),params:y.array(y.any())}),Pj=y.object({method:y.literal("eth_getBlockByNumber"),params:y.array(y.any())}),Oj=y.object({method:y.literal("eth_getBlockReceipts"),params:y.array(y.any())}),Rj=y.object({method:y.literal("eth_getBlockTransactionCountByHash"),params:y.array(y.any())}),$j=y.object({method:y.literal("eth_getBlockTransactionCountByNumber"),params:y.array(y.any())}),Dj=y.object({method:y.literal("eth_getCode"),params:y.array(y.any())}),kj=y.object({method:y.literal("eth_getFilterChanges"),params:y.array(y.any())}),Uj=y.object({method:y.literal("eth_getFilterLogs"),params:y.array(y.any())}),Bj=y.object({method:y.literal("eth_getLogs"),params:y.array(y.any())}),Mj=y.object({method:y.literal("eth_getProof"),params:y.array(y.any())}),Lj=y.object({method:y.literal("eth_getStorageAt"),params:y.array(y.any())}),Fj=y.object({method:y.literal("eth_getTransactionByBlockHashAndIndex"),params:y.array(y.any())}),jj=y.object({method:y.literal("eth_getTransactionByBlockNumberAndIndex"),params:y.array(y.any())}),zj=y.object({method:y.literal("eth_getTransactionByHash"),params:y.array(y.any())}),Hj=y.object({method:y.literal("eth_getTransactionCount"),params:y.array(y.any())}),qj=y.object({method:y.literal("eth_getTransactionReceipt"),params:y.array(y.any())}),Wj=y.object({method:y.literal("eth_getUncleCountByBlockHash"),params:y.array(y.any())}),Vj=y.object({method:y.literal("eth_getUncleCountByBlockNumber"),params:y.array(y.any())}),Gj=y.object({method:y.literal("eth_maxPriorityFeePerGas")}),Kj=y.object({method:y.literal("eth_newBlockFilter")}),Yj=y.object({method:y.literal("eth_newFilter"),params:y.array(y.any())}),Zj=y.object({method:y.literal("eth_newPendingTransactionFilter")}),Jj=y.object({method:y.literal("eth_sendRawTransaction"),params:y.array(y.any())}),Xj=y.object({method:y.literal("eth_syncing"),params:y.array(y.any())}),Qj=y.object({method:y.literal("eth_uninstallFilter"),params:y.array(y.any())}),h0=y.object({method:y.literal("personal_sign"),params:y.array(y.any())}),e7=y.object({method:y.literal("eth_signTypedData_v4"),params:y.array(y.any())}),t7=y.object({method:y.literal("eth_sendTransaction"),params:y.array(y.any())}),n7=y.object({method:y.literal("solana_signMessage"),params:y.object({message:y.string(),pubkey:y.string()})}),r7=y.object({method:y.literal("solana_signTransaction"),params:y.object({transaction:y.string()})}),s7=y.object({method:y.literal("solana_signAllTransactions"),params:y.object({transactions:y.array(y.string())})}),i7=y.object({method:y.literal("solana_signAndSendTransaction"),params:y.object({transaction:y.string(),options:y.object({skipPreflight:y.boolean().optional(),preflightCommitment:y.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:y.number().optional(),minContextSlot:y.number().optional()}).optional()})}),o7=y.object({method:y.literal("wallet_sendCalls"),params:y.array(y.object({chainId:y.string().or(y.number()).optional(),from:y.string().optional(),version:y.string().optional(),capabilities:y.any().optional(),calls:y.array(y.object({to:y.string().startsWith("0x"),data:y.string().startsWith("0x").optional(),value:y.string().optional()}))}))}),a7=y.object({method:y.literal("wallet_getCallsStatus"),params:y.array(y.string())}),c7=y.object({method:y.literal("wallet_getCapabilities"),params:y.array(y.string().or(y.number()).optional()).optional()}),u7=y.object({method:y.literal("wallet_grantPermissions"),params:y.array(y.any())}),l7=y.object({method:y.literal("wallet_revokePermissions"),params:y.any()}),d7=y.object({method:y.literal("wallet_getAssets"),params:y.any()}),f0=y.object({token:y.string()}),ie=y.object({id:y.string().optional()}),Nh={appEvent:ie.extend({type:se("APP_SWITCH_NETWORK"),payload:GF}).or(ie.extend({type:se("APP_CONNECT_EMAIL"),payload:KF})).or(ie.extend({type:se("APP_CONNECT_DEVICE")})).or(ie.extend({type:se("APP_CONNECT_OTP"),payload:YF})).or(ie.extend({type:se("APP_CONNECT_SOCIAL"),payload:ZF})).or(ie.extend({type:se("APP_GET_FARCASTER_URI")})).or(ie.extend({type:se("APP_CONNECT_FARCASTER")})).or(ie.extend({type:se("APP_GET_USER"),payload:y.optional(JF)})).or(ie.extend({type:se("APP_GET_SOCIAL_REDIRECT_URI"),payload:XF})).or(ie.extend({type:se("APP_SIGN_OUT")})).or(ie.extend({type:se("APP_IS_CONNECTED"),payload:y.optional(f0)})).or(ie.extend({type:se("APP_GET_CHAIN_ID")})).or(ie.extend({type:se("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(ie.extend({type:se("APP_INIT_SMART_ACCOUNT")})).or(ie.extend({type:se("APP_SET_PREFERRED_ACCOUNT"),payload:sj})).or(ie.extend({type:se("APP_RPC_REQUEST"),payload:h0.or(d7).or(Ej).or(vj).or(Cj).or(_j).or(Aj).or(Ij).or(Sj).or(Nj).or(Tj).or(xj).or(Pj).or(Oj).or(Rj).or($j).or(Dj).or(kj).or(Uj).or(Bj).or(Mj).or(Lj).or(Fj).or(jj).or(zj).or(Hj).or(qj).or(Wj).or(Vj).or(Gj).or(Kj).or(Yj).or(Zj).or(Jj).or(Xj).or(Qj).or(h0).or(e7).or(t7).or(n7).or(r7).or(s7).or(i7).or(a7).or(o7).or(c7).or(u7).or(l7).and(y.object({chainId:y.string().or(y.number()).optional(),chainNamespace:y.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:y.string().optional()}))})).or(ie.extend({type:se("APP_UPDATE_EMAIL"),payload:QF})).or(ie.extend({type:se("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:ej})).or(ie.extend({type:se("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:tj})).or(ie.extend({type:se("APP_SYNC_THEME"),payload:nj})).or(ie.extend({type:se("APP_SYNC_DAPP_DATA"),payload:rj})).or(ie.extend({type:se("APP_RELOAD")})).or(ie.extend({type:se("APP_RPC_ABORT")})),frameEvent:ie.extend({type:se("FRAME_SWITCH_NETWORK_ERROR"),payload:dt}).or(ie.extend({type:se("FRAME_SWITCH_NETWORK_SUCCESS"),payload:pj})).or(ie.extend({type:se("FRAME_CONNECT_EMAIL_SUCCESS"),payload:ij})).or(ie.extend({type:se("FRAME_CONNECT_EMAIL_ERROR"),payload:dt})).or(ie.extend({type:se("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:oj})).or(ie.extend({type:se("FRAME_GET_FARCASTER_URI_ERROR"),payload:dt})).or(ie.extend({type:se("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:aj})).or(ie.extend({type:se("FRAME_CONNECT_FARCASTER_ERROR"),payload:dt})).or(ie.extend({type:se("FRAME_CONNECT_OTP_ERROR"),payload:dt})).or(ie.extend({type:se("FRAME_CONNECT_OTP_SUCCESS")})).or(ie.extend({type:se("FRAME_CONNECT_DEVICE_ERROR"),payload:dt})).or(ie.extend({type:se("FRAME_CONNECT_DEVICE_SUCCESS")})).or(ie.extend({type:se("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:cj})).or(ie.extend({type:se("FRAME_CONNECT_SOCIAL_ERROR"),payload:dt})).or(ie.extend({type:se("FRAME_GET_USER_ERROR"),payload:dt})).or(ie.extend({type:se("FRAME_GET_USER_SUCCESS"),payload:lj})).or(ie.extend({type:se("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:dt})).or(ie.extend({type:se("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:dj})).or(ie.extend({type:se("FRAME_SIGN_OUT_ERROR"),payload:dt})).or(ie.extend({type:se("FRAME_SIGN_OUT_SUCCESS")})).or(ie.extend({type:se("FRAME_IS_CONNECTED_ERROR"),payload:dt})).or(ie.extend({type:se("FRAME_IS_CONNECTED_SUCCESS"),payload:hj})).or(ie.extend({type:se("FRAME_GET_CHAIN_ID_ERROR"),payload:dt})).or(ie.extend({type:se("FRAME_GET_CHAIN_ID_SUCCESS"),payload:fj})).or(ie.extend({type:se("FRAME_RPC_REQUEST_ERROR"),payload:dt})).or(ie.extend({type:se("FRAME_RPC_REQUEST_SUCCESS"),payload:bj})).or(ie.extend({type:se("FRAME_SESSION_UPDATE"),payload:f0})).or(ie.extend({type:se("FRAME_UPDATE_EMAIL_ERROR"),payload:dt})).or(ie.extend({type:se("FRAME_UPDATE_EMAIL_SUCCESS"),payload:uj})).or(ie.extend({type:se("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:dt})).or(ie.extend({type:se("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(ie.extend({type:se("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:dt})).or(ie.extend({type:se("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:gj})).or(ie.extend({type:se("FRAME_SYNC_THEME_ERROR"),payload:dt})).or(ie.extend({type:se("FRAME_SYNC_THEME_SUCCESS")})).or(ie.extend({type:se("FRAME_SYNC_DAPP_DATA_ERROR"),payload:dt})).or(ie.extend({type:se("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(ie.extend({type:se("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:mj})).or(ie.extend({type:se("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:dt})).or(ie.extend({type:se("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:dt})).or(ie.extend({type:se("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:wj})).or(ie.extend({type:se("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:dt})).or(ie.extend({type:se("FRAME_READY"),payload:yj})).or(ie.extend({type:se("FRAME_RELOAD_ERROR"),payload:dt})).or(ie.extend({type:se("FRAME_RELOAD_SUCCESS")}))};function Th(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function h7({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=xC.BLOCKCHAIN_API_RPC_URL}){const i=new URL(eA);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class f7{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=xC.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function u({data:l}){var h;if(!Th(ce.FRAME_EVENT_KEY,l))return;const d=Nh.frameEvent.safeParse(l);if(!d.success){console.warn("W3mFrame: invalid frame event",d.error.message);return}((h=d.data)==null?void 0:h.id)===o&&(a(d.data),window.removeEventListener("message",u))}Nn.isClient&&(window.addEventListener("message",u),c.addEventListener("abort",()=>{window.removeEventListener("message",u)}))},onFrameEvent:o=>{Nn.isClient&&window.addEventListener("message",({data:a})=>{if(!Th(ce.FRAME_EVENT_KEY,a))return;const c=Nh.frameEvent.safeParse(a);c.success?o(c.data):console.warn("W3mFrame: invalid frame event",c.error.message)})},onAppEvent:o=>{Nn.isClient&&window.addEventListener("message",({data:a})=>{if(!Th(ce.APP_EVENT_KEY,a))return;const c=Nh.appEvent.safeParse(a);c.success||console.warn("W3mFrame: invalid app event",c.error.message),o(a)})},postAppEvent:o=>{var a;if(Nn.isClient){if(!((a=this.iframe)!=null&&a.contentWindow))throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(Nn.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),Nn.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=h7({projectId:e,chainId:r,version:nA,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var a;(a=this.frameLoadPromiseResolver)==null||a.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{var c;a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(c=this.frameLoadPromiseResolver)==null||c.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class p7{constructor(e){var i;const n=Mo({level:tA}),{logger:r,chunkLoggerController:s}=Mp({opts:n});this.logger=Zt(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class g7{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new p7(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new f7({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===ce.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Dt.get(ce.EMAIL_LOGIN_USED_KEY)}getEmail(){return Dt.get(ce.EMAIL)}getUsername(){return Dt.get(ce.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:ce.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Nn.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:ce.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:ce.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:ce.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:ce.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:ce.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:ce.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:ce.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:ce.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:ce.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:ce.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:ce.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:ce.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:ce.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:ce.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:ce.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:ce.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:ce.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:ce.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:ce.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:ce.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(vt.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",u=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=u,n.rpcUrl=this.getRpcUrl(u),(s=this.rpcRequestHandler)==null||s.call(this,e);const l=await this.appEvent({type:ce.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,l,n),l}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===ce.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===ce.FRAME_IS_CONNECTED_ERROR&&e(),n.type===ce.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===ce.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===ce.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===ce.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===ce.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:vt.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{vt.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:ce.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[ce.APP_SYNC_DAPP_DATA,ce.APP_SYNC_THEME,ce.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[ce.APP_CONNECT_EMAIL,ce.APP_CONNECT_DEVICE,ce.APP_CONNECT_OTP,ce.APP_CONNECT_SOCIAL,ce.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,u)=>{var f,p,g;const l=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:l},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:l});const d=new AbortController;if(o==="RPC_REQUEST"){const m=e;this.openRpcRequests=[...this.openRpcRequests,{...m.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?u(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&u(new Error("Something went wrong"))});function h(m,b){var w,E,N;m.id===l&&((E=b==null?void 0:(w=b.logger).info)==null||E.call(w,{framEvent:m,id:l},"Received frame response"),m.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in m&&c(m.payload),c(void 0)):m.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in m&&u(new Error(((N=m.payload)==null?void 0:N.message)||"An error occurred")),u(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(l,m=>h(m,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Dt.set(ce.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Dt.set(ce.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Dt.set(ce.EMAIL,e),Dt.set(ce.EMAIL_LOGIN_USED_KEY,"true"),Dt.delete(ce.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Dt.delete(ce.EMAIL_LOGIN_USED_KEY),Dt.delete(ce.EMAIL),Dt.delete(ce.LAST_USED_CHAIN_KEY),Dt.delete(ce.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Dt.set(ce.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Dt.get(ce.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Dt.set(ce.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=K9.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class gi{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return gi.instance||(gi.instance=new g7({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),gi.instance}}var p0={};const m7={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof p0<"u"?p0.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},op={filterOutDuplicatesByRDNS(t){const e=q.state.enableEIP6963?Q.state.connectors:[],n=G.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&ae.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(u=>u.name===a.name)))},filterOutDuplicatesByIds(t){const e=Q.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=G.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Q.state,{featuredWalletIds:n}=q.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const u=n.indexOf(o.id),l=n.indexOf(a.id);if(u!==-1&&l!==-1)return u-l;if(u!==-1)return-1;if(l!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=q.state.features)==null?void 0:c.connectMethodsOrder),r=e||Q.state.connectors;if(n)return n;const{injected:s,announced:i}=Zu.getConnectorsByType(r,de.state.recommended,de.state.featured),o=s.filter(Zu.showConnector),a=i.filter(Zu.showConnector);return o.length||a.length?["wallet","email","social"]:m7.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&de.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&de.state.excludedWallets.some(r=>Nt.isLowerCaseMatch(r.name,t.name));return e||n}},Zu={getConnectorsByType(t,e,n){const{customWallets:r}=q.state,s=G.getRecentWallets(),i=op.filterOutDuplicateWallets(e),o=op.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),u=t.filter(d=>d.type==="INJECTED"),l=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:l,multiChain:a,announced:c,injected:u,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&de.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&de.state.excludedWallets.some(i=>Nt.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ae.isMobile()||ae.isMobile()&&!e&&!ee.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(_.state.chains.values()).some(n=>Q.getConnectorId(n.namespace)===F.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(u=>(u=q.state.features)==null?void 0:u.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:q.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(m=>m.isEnabled),f=new Set(h.map(m=>m.type)),p=c.filter(m=>f.has(m)).map(m=>({type:m,isEnabled:!0})),g=h.filter(({type:m})=>!p.some(({type:w})=>w===m));return Array.from(new Set([...p,...g].map(({type:m})=>m)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!ae.isMobile())return{accounts:[],chainId:void 0};if(t.id===F.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ju=globalThis,wg=Ju.ShadowRoot&&(Ju.ShadyCSS===void 0||Ju.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,bg=Symbol(),g0=new WeakMap;let MC=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==bg)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(wg&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=g0.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&g0.set(n,e))}return e}toString(){return this.cssText}};const Un=t=>new MC(typeof t=="string"?t:t+"",void 0,bg),Eo=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new MC(n,t,bg)},y7=(t,e)=>{if(wg)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=Ju.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},m0=wg?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return Un(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:w7,defineProperty:b7,getOwnPropertyDescriptor:E7,getOwnPropertyNames:v7,getOwnPropertySymbols:C7,getPrototypeOf:_7}=Object,Ds=globalThis,y0=Ds.trustedTypes,A7=y0?y0.emptyScript:"",xh=Ds.reactiveElementPolyfillSupport,Ma=(t,e)=>t,ap={toAttribute(t,e){switch(e){case Boolean:t=t?A7:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},LC=(t,e)=>!w7(t,e),w0={attribute:!0,type:String,converter:ap,reflect:!1,useDefault:!1,hasChanged:LC};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Ds.litPropertyMetadata??(Ds.litPropertyMetadata=new WeakMap);let fo=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=w0){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&b7(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=E7(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??w0}static _$Ei(){if(this.hasOwnProperty(Ma("elementProperties")))return;const e=_7(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Ma("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Ma("properties"))){const n=this.properties,r=[...v7(n),...C7(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(m0(s))}else e!==void 0&&n.push(m0(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return y7(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:ap).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:ap;this._$Em=s;const u=c.fromAttribute(n,a.type);this[s]=u??((o=this._$Ej)==null?void 0:o.get(s))??u,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??LC)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};fo.elementStyles=[],fo.shadowRootOptions={mode:"open"},fo[Ma("elementProperties")]=new Map,fo[Ma("finalized")]=new Map,xh==null||xh({ReactiveElement:fo}),(Ds.reactiveElementVersions??(Ds.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const La=globalThis,$l=La.trustedTypes,b0=$l?$l.createPolicy("lit-html",{createHTML:t=>t}):void 0,FC="$lit$",Ss=`lit$${Math.random().toFixed(9).slice(2)}$`,jC="?"+Ss,I7=`<${jC}>`,Pi=document,Rc=()=>Pi.createComment(""),$c=t=>t===null||typeof t!="object"&&typeof t!="function",Eg=Array.isArray,S7=t=>Eg(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Ph=`[ 	
\f\r]`,ma=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,E0=/-->/g,v0=/>/g,Qs=RegExp(`>|${Ph}(?:([^\\s"'>=/]+)(${Ph}*=${Ph}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),C0=/'/g,_0=/"/g,zC=/^(?:script|style|textarea|title)$/i,HC=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),iq=HC(1),oq=HC(2),$o=Symbol.for("lit-noChange"),St=Symbol.for("lit-nothing"),A0=new WeakMap,fi=Pi.createTreeWalker(Pi,129);function qC(t,e){if(!Eg(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return b0!==void 0?b0.createHTML(e):e}const N7=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=ma;for(let a=0;a<n;a++){const c=t[a];let u,l,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,l=o.exec(c),l!==null);)h=o.lastIndex,o===ma?l[1]==="!--"?o=E0:l[1]!==void 0?o=v0:l[2]!==void 0?(zC.test(l[2])&&(s=RegExp("</"+l[2],"g")),o=Qs):l[3]!==void 0&&(o=Qs):o===Qs?l[0]===">"?(o=s??ma,d=-1):l[1]===void 0?d=-2:(d=o.lastIndex-l[2].length,u=l[1],o=l[3]===void 0?Qs:l[3]==='"'?_0:C0):o===_0||o===C0?o=Qs:o===E0||o===v0?o=ma:(o=Qs,s=void 0);const f=o===Qs&&t[a+1].startsWith("/>")?" ":"";i+=o===ma?c+I7:d>=0?(r.push(u),c.slice(0,d)+FC+c.slice(d)+Ss+f):c+Ss+(d===-2?a:f)}return[qC(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class Dc{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[u,l]=N7(e,n);if(this.el=Dc.createElement(u,r),fi.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=fi.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(FC)){const h=l[o++],f=s.getAttribute(d).split(Ss),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?x7:p[1]==="?"?P7:p[1]==="@"?O7:Ed}),s.removeAttribute(d)}else d.startsWith(Ss)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(zC.test(s.tagName)){const d=s.textContent.split(Ss),h=d.length-1;if(h>0){s.textContent=$l?$l.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],Rc()),fi.nextNode(),c.push({type:2,index:++i});s.append(d[h],Rc())}}}else if(s.nodeType===8)if(s.data===jC)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Ss,d+1))!==-1;)c.push({type:7,index:i}),d+=Ss.length-1}i++}}static createElement(e,n){const r=Pi.createElement("template");return r.innerHTML=e,r}}function Do(t,e,n=t,r){var o,a;if(e===$o)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=$c(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=Do(t,s._$AS(t,e.values),s,r)),e}class T7{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??Pi).importNode(n,!0);fi.currentNode=s;let i=fi.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let u;c.type===2?u=new ru(i,i.nextSibling,this,e):c.type===1?u=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(u=new R7(i,this,e)),this._$AV.push(u),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=fi.nextNode(),o++)}return fi.currentNode=Pi,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class ru{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=St,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Do(this,e,n),$c(e)?e===St||e==null||e===""?(this._$AH!==St&&this._$AR(),this._$AH=St):e!==this._$AH&&e!==$o&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):S7(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==St&&$c(this._$AH)?this._$AA.nextSibling.data=e:this.T(Pi.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=Dc.createElement(qC(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new T7(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=A0.get(e.strings);return n===void 0&&A0.set(e.strings,n=new Dc(e)),n}k(e){Eg(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new ru(this.O(Rc()),this.O(Rc()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class Ed{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=St,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=St}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=Do(this,e,n,0),o=!$c(e)||e!==this._$AH&&e!==$o,o&&(this._$AH=e);else{const a=e;let c,u;for(e=i[0],c=0;c<i.length-1;c++)u=Do(this,a[r+c],n,c),u===$o&&(u=this._$AH[c]),o||(o=!$c(u)||u!==this._$AH[c]),u===St?e=St:e!==St&&(e+=(u??"")+i[c+1]),this._$AH[c]=u}o&&!s&&this.j(e)}j(e){e===St?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class x7 extends Ed{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===St?void 0:e}}class P7 extends Ed{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==St)}}class O7 extends Ed{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=Do(this,e,n,0)??St)===$o)return;const r=this._$AH,s=e===St&&r!==St||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==St&&(r===St||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class R7{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Do(this,e)}}const Oh=La.litHtmlPolyfillSupport;Oh==null||Oh(Dc,ru),(La.litHtmlVersions??(La.litHtmlVersions=[])).push("3.3.1");const $7=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new ru(e.insertBefore(Rc(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const mi=globalThis;class Xu extends fo{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=$7(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return $o}}var U0;Xu._$litElement$=!0,Xu.finalized=!0,(U0=mi.litElementHydrateSupport)==null||U0.call(mi,{LitElement:Xu});const Rh=mi.litElementPolyfillSupport;Rh==null||Rh({LitElement:Xu});(mi.litElementVersions??(mi.litElementVersions=[])).push("4.2.1");let Fa,ks,Us;function aq(t,e){Fa=document.createElement("style"),ks=document.createElement("style"),Us=document.createElement("style"),Fa.textContent=vo(t).core.cssText,ks.textContent=vo(t).dark.cssText,Us.textContent=vo(t).light.cssText,document.head.appendChild(Fa),document.head.appendChild(ks),document.head.appendChild(Us),WC(e)}function WC(t){ks&&Us&&(t==="light"?(ks.removeAttribute("media"),Us.media="enabled"):(Us.removeAttribute("media"),ks.media="enabled"))}function D7(t){Fa&&ks&&Us&&(Fa.textContent=vo(t).core.cssText,ks.textContent=vo(t).dark.cssText,Us.textContent=vo(t).light.cssText)}function vo(t){return{core:Eo`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${Un(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${Un((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${Un((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${Un((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${Un((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Eo`
      :root {
        --w3m-color-mix: ${Un((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${Un(Yr(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${Un(Yr(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Eo`
      :root {
        --w3m-color-mix: ${Un((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${Un(Yr(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${Un(Yr(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const cq=Eo`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,uq=Eo`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,lq=Eo`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Qu={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([Qu.getAddresses(t),Qu.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:Qu.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[In.NetworkImageIds[e.id]]}]})}},co={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}},dq=uN({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function su(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const I0=su({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),S0=su({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});su({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});su({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});su({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const k7={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Tr={getMethodsByChainNamespace(t){return k7[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const u=`${o}:${i}`,l=r[o];switch(l.chains.push(u),u){case I0.caipNetworkId:l.chains.push(I0.deprecatedCaipNetworkId);break;case S0.caipNetworkId:l.chains.push(S0.deprecatedCaipNetworkId);break}return l!=null&&l.rpcMap&&c&&(l.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await Ta.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=Tr.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(Tr.isSessionEventData(a)){const{name:c,data:u}=a.params.event;if(c==="accountsChanged"&&Array.isArray(u)){const l=u.filter(d=>ae.isCaipAddress(d)).map(d=>Sn.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(l)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>Sn.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class U7{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case F.CHAIN.EVM:await this.syncEVMConnections(e);break;case F.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case F.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:u}=s(a.id);return!c&&u}).map(async a=>{if(a.id===F.CONNECTOR_ID.WALLET_CONNECT){const c=Tr.getWalletConnectAccounts(r,this.namespace),u=n.find(l=>{var d,h;return l.chainNamespace===this.namespace&&l.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:u})}else{const{accounts:c,chainId:u}=await Zu.fetchProviderData(a);if(c.length>0&&u){const l=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===u.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:l}),a.provider&&a.id!==F.CONNECTOR_ID.AUTH&&a.id!==F.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:u}=s(a.id);return!c&&u}).map(async a=>{if(a.id===F.CONNECTOR_ID.WALLET_CONNECT){const c=Tr.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:u}=s(a.id);return!c&&u}).map(async a=>{var h,f,p,g,m,b;if(a.id===F.CONNECTOR_ID.WALLET_CONNECT){const w=Tr.getWalletConnectAccounts(r,this.namespace);w.length>0&&i({connectorId:a.id,accounts:w.map(E=>({address:E.address})),caipNetwork:n});return}const c=await a.connect(),u=await a.getAccountAddresses();let l=u==null?void 0:u.map(w=>ae.createAccount(F.CHAIN.BITCOIN,w.address,w.purpose||"payment",w.publicKey,w.path));if(l&&l.length>1&&(l=[{namespace:F.CHAIN.BITCOIN,publicKey:((h=l[co.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=l[co.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=l[co.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:F.CHAIN.BITCOIN,publicKey:((g=l[co.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((m=l[co.ACCOUNT_INDEXES.ORDINAL])==null?void 0:m.path)??"",address:((b=l[co.ACCOUNT_INDEXES.ORDINAL])==null?void 0:b.address)??"",type:"ordinal"}]),!(a.chains.find(w=>w.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:l.map(w=>({address:w.address,type:w.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(u=>Nt.isLowerCaseMatch(u.connectorId,n));if(!o)return null;const a=s.find(u=>Nt.isLowerCaseMatch(u.id,o.connectorId)),c=e?o.accounts.find(u=>Nt.isLowerCaseMatch(u.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>Nt.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>Nt.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}const Ia={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};class vg{constructor({provider:e,namespace:n}){this.id=F.CONNECTOR_ID.WALLET_CONNECT,this.name=In.ConnectorNamesMap[F.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=In.ConnectorImageIds[F.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=_.getCaipNetworks.bind(_),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=q.state.universalProviderConfigOverride,s=Tr.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Fn.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:B7})}}const B7=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],M7=[F.CONNECTOR_ID.AUTH,F.CONNECTOR_ID.WALLET_CONNECT];class VC{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>_.getCaipNetworks(n),this.getConnectorId=n=>Q.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new U7({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:F.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:F.CONNECTOR_ID.AUTH,type:"AUTH",name:F.CONNECTOR_NAMES.AUTH,provider:e,imageId:In.ConnectorImageIds[F.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!Nt.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){ue.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=xn(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof vg);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=ae.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=ae.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=ae.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&Nt.isLowerCaseMatch(this.getConnectorId(F.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:u}=ae.getAccount(c);return{address:u}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),Nt.isLowerCaseMatch(this.getConnectorId(F.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?Qu.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),Nt.isLowerCaseMatch(this.getConnectorId(F.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(M7.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}class L7 extends VC{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new vg({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,u]=c.split(":");return u}).filter((c,u,l)=>l.indexOf(c)===u))||[];return Promise.resolve({accounts:r.map(c=>ae.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,u;if(!(e.caipNetwork&&ze.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(ue.state.balanceLoading&&e.chainId===((c=_.state.activeCaipNetwork)==null?void 0:c.id))return{balance:ue.state.balance||"0.00",symbol:ue.state.balanceSymbol||""};const s=(await ue.fetchTokenBalance()).find(l=>{var d,h;return l.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&l.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((u=e.caipNetwork)==null?void 0:u.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=_.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===F.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:Ho.encode(new TextEncoder().encode(r)),pubkey:s}},(a=_.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=_.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,u;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===F.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Io(n.id)}]}))}catch(l){if(l.code===Ia.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||l.code===Ia.ERROR_INVALID_CHAIN_ID||l.code===Ia.ERROR_CODE_DEFAULT||((o=(i=l==null?void 0:l.data)==null?void 0:i.originalError)==null?void 0:o.code)===Ia.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((u=r.provider)==null?void 0:u.request({method:"wallet_addEthereumChain",params:[{chainId:Io(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const F7=["email","socials","swaps","onramp","activity","reownBranding","multiWallet"],ku={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?ze.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?ze.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?ze.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?ze.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?ze.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?ze.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?ze.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?ze.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?ze.DEFAULT_REMOTE_FEATURES.reownBranding:!!t},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>ze.DEFAULT_REMOTE_FEATURES.multiWallet}},j7={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=ku[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=ku[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return ku[t].processApi(e)},processFallbackFeature(t,e){return ku[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await de.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?ze.DEFAULT_REMOTE_FEATURES:ze.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of F7){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),ze.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;rt.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class z7{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o;if(n){const a=(s=_.getCaipNetworks(n))==null?void 0:s.find(l=>l.id===r);if(a)return a;const c=(i=_.getNetworkData(n))==null?void 0:i.caipNetwork;return c||((o=_.getRequestedCaipNetworks(n).filter(l=>l.chainNamespace===n))==null?void 0:o[0])}return _.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>_.getCaipNetworks(n),this.getActiveChainNamespace=()=>_.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{_.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>_.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>_.state.activeChain===n||!n?_.state.activeCaipAddress:_.getAccountProp("caipAddress",n),this.setClientId=n=>{fe.setClientId(n)},this.getProvider=n=>Ke.getProvider(n),this.getProviderType=n=>Ke.getProviderId(n),this.getPreferredAccountType=n=>xn(n),this.setCaipAddress=(n,r)=>{ue.setCaipAddress(n,r)},this.setBalance=(n,r,s)=>{ue.setBalance(n,r,s)},this.setProfileName=(n,r)=>{ue.setProfileName(n,r)},this.setProfileImage=(n,r)=>{ue.setProfileImage(n,r)},this.setUser=(n,r)=>{ue.setUser(n,r)},this.resetAccount=n=>{ue.resetAccount(n)},this.setCaipNetwork=n=>{_.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{_.setChainNetworkData(r,{caipNetwork:n})},this.setStatus=(n,r)=>{ue.setStatus(n,r),Q.isConnected()?G.setConnectionStatus("connected"):G.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>_.getAccountProp("address",n),this.setConnectors=n=>{const r=[...Q.state.allConnectors,...n];Q.setConnectors(r)},this.setConnections=(n,r)=>{G.setConnections(n,r),ee.setConnections(n,r)},this.fetchIdentity=n=>fe.fetchIdentity(n),this.getReownName=n=>Ta.getNamesForAddress(n),this.getConnectors=()=>Q.getConnectors(),this.getConnectorImage=n=>z0.getConnectorImage(n),this.getConnections=n=>this.remoteFeatures.multiWallet?rl.getConnectionsData(n).connections:(rt.open(F.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=n=>this.remoteFeatures.multiWallet?rl.getConnectionsData(n).recentConnections:(rt.open(F.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async n=>{if(!this.remoteFeatures.multiWallet){rt.open(F.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await ee.switchConnection(n)},this.deleteConnection=n=>{if(!this.remoteFeatures.multiWallet){rt.open(F.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}G.deleteAddressFromConnection(n),ee.syncStorageConnections()},this.setConnectedWalletInfo=(n,r)=>{const s=Ke.getProviderId(r),i=n?{...n,type:s}:void 0;ue.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!_.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{ue.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{ue.removeAddressLabel(n,r)},this.getAddress=n=>_.state.activeChain===n||!n?ue.state.address:_.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>_.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{_.resetNetwork(n)},this.addConnector=n=>{Q.addConnector(n)},this.resetWcConnection=()=>{ee.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{ue.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{ue.setSmartAccountDeployed(n,r)},this.setPreferredAccountType=(n,r)=>{_.setAccountProp("preferredAccountType",n,r)},this.setEIP6963Enabled=n=>{q.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),q.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),this.remoteFeatures=await j7.fetchRemoteFeatures(e),q.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&uf.setOnrampProviders(this.remoteFeatures.onramp),((n=q.state.remoteFeatures)!=null&&n.email||Array.isArray((r=q.state.remoteFeatures)==null?void 0:r.socials)&&((s=q.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await de.fetchAllowedOrigins();if(!e||!ae.isClient()){rt.open(ut.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const n=window.location.origin;Tr.isOriginAllowed(n,e,Ia.DEFAULT_ALLOWED_ANCESTORS)||rt.open(ut.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error)){rt.open(ut.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":rt.open(ut.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;rt.open({shortMessage:ut.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.shortMessage,longMessage:ut.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.longMessage(n.message)},"error");break}default:rt.open(ut.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,We.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&dn.setThemeMode(e.themeMode),e.themeVariables&&dn.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");_.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&_.setActiveCaipNetwork(n)}initializeConnectionController(e){ee.initialize(e.adapters??[]),ee.setWcBasic(e.basic??!1)}initializeConnectorController(){Q.initialize(this.chainNamespaces)}initializeProjectSettings(e){q.setProjectId(e.projectId),q.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var s;q.setDebug(e.debug!==!1),q.setEnableWalletConnect(e.enableWalletConnect!==!1),q.setEnableWalletGuide(e.enableWalletGuide!==!1),q.setEnableWallets(e.enableWallets!==!1),q.setEIP6963Enabled(e.enableEIP6963!==!1),q.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),q.setEnableReconnect(e.enableReconnect!==!1),q.setEnableAuthLogger(e.enableAuthLogger!==!1),q.setCustomRpcUrls(e.customRpcUrls),q.setEnableEmbedded(e.enableEmbedded),q.setAllWallets(e.allWallets),q.setIncludeWalletIds(e.includeWalletIds),q.setExcludeWalletIds(e.excludeWalletIds),q.setFeaturedWalletIds(e.featuredWalletIds),q.setTokens(e.tokens),q.setTermsConditionsUrl(e.termsConditionsUrl),q.setPrivacyPolicyUrl(e.privacyPolicyUrl),q.setCustomWallets(e.customWallets),q.setFeatures(e.features),q.setAllowUnsupportedChain(e.allowUnsupportedChain),q.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),q.setPreferUniversalLinks(e.experimental_preferUniversalLinks),q.setDefaultAccountTypes(e.defaultAccountTypes);const n=this.getDefaultMetaData();if(!e.metadata&&n&&(e.metadata=n),q.setMetadata(e.metadata),q.setDisableAppend(e.disableAppend),q.setEnableEmbedded(e.enableEmbedded),q.setSIWX(e.siwx),!e.projectId){rt.open(ut.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((s=e.adapters)==null?void 0:s.find(i=>i.namespace===F.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");q.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return ae.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Cr.getUnsupportedNetwork(`${n}:${e}`);_.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Cr.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Cr.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Cr.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?Cr.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e,n){try{this.setLoading(!0,e);let r={connections:[]};const s=this.getAdapter(e),{caipAddress:i}=_.getAccountData(e)||{};return(i||!q.state.enableReconnect)&&(s!=null&&s.disconnect)&&(r=await s.disconnect({id:n})),this.setLoading(!1,e),r}catch(r){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${r.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var u;const e=_.state.activeChain,n=this.getAdapter(e),r=(u=this.getCaipNetwork(e))==null?void 0:u.id,s=ee.getConnections(e),i=this.remoteFeatures.multiWallet,o=s.length>0;if(!n)throw new Error("Adapter not found");const a=await n.connectWalletConnect(r);(!o||!i)&&this.close(),this.setClientId((a==null?void 0:a.clientId)||null),G.setConnectedNamespaces([..._.state.chains.keys()]),await this.syncWalletConnectAccount(),await Fn.initializeIfEnabled()},connectExternal:async({id:e,address:n,info:r,type:s,provider:i,chain:o,caipNetwork:a,socialUri:c})=>{var p,g,m,b,w,E;const u=_.state.activeChain,l=o||u,d=this.getAdapter(l);if(o&&o!==u&&!a){const N=this.getCaipNetworks().find(A=>A.chainNamespace===o);N&&this.setCaipNetwork(N)}if(!l)throw new Error("connectExternal: namespace not found");if(!d)throw new Error("connectExternal: adapter not found");const h=this.getCaipNetwork(l),f=await d.connect({id:e,address:n,info:r,type:s,provider:i,socialUri:c,chainId:(a==null?void 0:a.id)||(h==null?void 0:h.id),rpcUrl:((m=(g=(p=a==null?void 0:a.rpcUrls)==null?void 0:p.default)==null?void 0:g.http)==null?void 0:m[0])||((E=(w=(b=h==null?void 0:h.rpcUrls)==null?void 0:b.default)==null?void 0:w.http)==null?void 0:E[0])});if(f)return G.addConnectedNamespace(l),this.syncProvider({...f,chainNamespace:l}),this.setStatus("connected",l),this.syncConnectedWalletInfo(l),G.removeDisconnectedConnectorId(e,l),{address:f.address}},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=_.state.activeChain,o=this.getAdapter(i);if(!i)throw new Error("reconnectExternal: namespace not found");if(!o)throw new Error("reconnectExternal: adapter not found");o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),G.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{var u;const{id:n,chainNamespace:r,initialDisconnect:s}=e||{},i=r||_.state.activeChain,o=Q.getConnectorId(i),a=n===F.CONNECTOR_ID.AUTH||o===F.CONNECTOR_ID.AUTH,c=n===F.CONNECTOR_ID.WALLET_CONNECT||o===F.CONNECTOR_ID.WALLET_CONNECT;try{const l=Array.from(_.state.chains.keys());let d=r?[r]:l;(c||a)&&(d=l);const h=d.map(async g=>{const m=Q.getConnectorId(g),b=await this.disconnectNamespace(g,n||m);b&&(a&&G.deleteConnectedSocialProvider(),b.connections.forEach(w=>{G.addDisconnectedConnectorId(w.connectorId,g)})),s&&this.onDisconnectNamespace({chainNamespace:g,closeModal:!1})}),f=await Promise.allSettled(h);je.resetSend(),ee.resetWcConnection(),(u=Fn.getSIWX())!=null&&u.signOutOnDisconnect&&await Fn.clearSessions(),Q.setFilterByNamespace(void 0),ee.syncStorageConnections();const p=f.filter(g=>g.status==="rejected");if(p.length>0)throw new Error(p.map(g=>g.reason.message).join(", "));We.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:r||"all"}})}catch(l){throw new Error(`Failed to disconnect chains: ${l.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=_.state.activeChain,r=this.getAdapter(_.state.activeChain);if(!n)throw new Error("signMessage: namespace not found");if(!r)throw new Error("signMessage: adapter not found");const s=await(r==null?void 0:r.signMessage({message:e,address:ue.state.address,provider:Ke.getProvider(n)}));return(s==null?void 0:s.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(!n)throw new Error("sendTransaction: namespace not found");if(ze.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(n);if(!r)throw new Error("sendTransaction: adapter not found");const s=Ke.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{const n=e.chainNamespace;if(n===F.CHAIN.EVM){const r=this.getAdapter(n);if(!r)throw new Error("estimateGas: adapter is required but got undefined");const s=Ke.getProvider(n),i=this.getCaipNetwork();if(!i)throw new Error("estimateGas: caipNetwork is required but got undefined");const o=await(r==null?void 0:r.estimateGas({...e,provider:s,caipNetwork:i}));return(o==null?void 0:o.gas)||0n}return 0n},getEnsAvatar:async()=>{var n;const e=_.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");return await this.syncIdentity({address:ue.state.address,chainId:Number((n=this.getCaipNetwork())==null?void 0:n.id),chainNamespace:e}),ue.state.profileImage||!1},getEnsAddress:async e=>await Tr.resolveReownName(e),writeContract:async e=>{const n=_.state.activeChain,r=this.getAdapter(n);if(!n)throw new Error("writeContract: namespace is required but got undefined");if(!r)throw new Error("writeContract: adapter is required but got undefined");const s=this.getCaipNetwork(),i=this.getCaipAddress(),o=Ke.getProvider(n);if(!s||!i)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");const a=await(r==null?void 0:r.writeContract({...e,caipNetwork:s,provider:o,caipAddress:i}));return a==null?void 0:a.hash},parseUnits:(e,n)=>{const r=this.getAdapter(_.state.activeChain);if(!r)throw new Error("parseUnits: adapter is required but got undefined");return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(_.state.activeChain);if(!r)throw new Error("formatUnits: adapter is required but got undefined");return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(_.state.activeChain);if(!n)throw new Error("getCapabilities: adapter is required but got undefined");return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(_.state.activeChain);if(!n)throw new Error("grantPermissions: adapter is required but got undefined");return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(_.state.activeChain);if(!n)throw new Error("revokePermissions: adapter is required but got undefined");return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(_.state.activeChain);if(!n)throw new Error("walletGetAssets: adapter is required but got undefined");return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!ue.state.address||this.updateNativeBalance(ue.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},ee.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(Ke.getProviderId(_.state.activeChain)===st.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Ke.getProvider(n),i=Ke.getProviderId(n);if(e.chainNamespace===_.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===st.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=Sn.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new L7({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=G.getConnectionStatus();q.state.enableReconnect===!1?this.setStatus("disconnected",e):r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(G.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(u=>u.id.toString()===i.toString()||u.caipNetworkId.toString()===i.toString()),a=_.state.activeChain===e,c=_.getAccountProp("address",e);if(o){const u=a&&s?s:c;u&&this.syncAccount({address:u,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",()=>{this.onDisconnectNamespace({chainNamespace:e})}),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=ue.state.address,i=_.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i,connector:o})=>{var c,u;const a=_.state.activeChain===e;o!=null&&o.provider&&(this.syncProvider({id:o.id,type:o.type,provider:o.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e)),a&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):a&&((c=_.state.activeCaipNetwork)!=null&&c.id)?this.syncAccount({address:s,chainId:(u=_.state.activeCaipNetwork)==null?void 0:u.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),G.addConnectedNamespace(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&await((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null?void 0:s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>ee.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async syncNamespaceConnection(e){try{e===F.CHAIN.EVM&&ae.isSafeApp()&&Q.setConnectorId(F.CONNECTOR_ID.SAFE,e);const n=Q.getConnectorId(e);switch(this.setStatus("connecting",e),n){case F.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case F.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:n,closeModal:r}=e||{};_.resetAccount(n),_.resetNetwork(n),G.removeConnectedNamespace(n);const s=Array.from(_.state.chains.keys());(n?[n]:s).forEach(o=>G.addDisconnectedConnectorId(Q.getConnectorId(o)||"",o)),Q.removeConnectorId(n),Ke.resetChain(n),this.setUser(void 0,n),this.setStatus("disconnected",n),this.setConnectedWalletInfo(void 0,n),r!==!1&&Me.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{var s;const n=this.getCaipAddress(e),r=this.getCaipNetwork(e);return(s=this.chainAdapters)==null?void 0:s[e].syncConnections({connectToFirstConnector:!n,caipNetwork:r,getConnectorStorageInfo(i){const a=G.getConnections()[e]??[];return{hasDisconnected:G.isConnectorDisconnected(i,e),hasConnected:a.some(c=>Nt.isLowerCaseMatch(c.connectorId,i))}}})}))}async syncAdapterConnection(e){var a,c,u;const n=this.getAdapter(e),r=Q.getConnectorId(e),s=this.getCaipNetwork(e),o=Q.getConnectors(e).find(l=>l.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const l=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(u=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:u[0]}));l?(this.syncProvider({...l,chainNamespace:e}),await this.syncAccount({...l,chainNamespace:e}),this.setStatus("connected",e)):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),n=this.chainNamespaces.map(async i=>{var l,d,h,f,p;const o=this.getAdapter(i);if(!o)return;const a=((f=(h=(d=(l=this.universalProvider)==null?void 0:l.session)==null?void 0:d.namespaces)==null?void 0:h[i])==null?void 0:f.accounts)||[],c=(p=_.state.activeCaipNetwork)==null?void 0:p.id,u=a.find(g=>{const{chainId:m}=Sn.parseCaipAddress(g);return m===(c==null?void 0:c.toString())})||a[0];if(u){const g=Sn.validateCaipAddress(u),{chainId:m,address:b}=Sn.parseCaipAddress(g);if(Ke.setProviderId(i,st.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&_.state.activeCaipNetwork&&o.namespace!==F.CHAIN.EVM){const w=o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:_.state.activeCaipNetwork});Ke.setProvider(i,w)}else Ke.setProvider(i,this.universalProvider);Q.setConnectorId(F.CONNECTOR_ID.WALLET_CONNECT,i),G.addConnectedNamespace(i),await this.syncAccount({address:b,chainId:m,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);this.syncConnectedWalletInfo(i),await _.setApprovedCaipNetworksData(i)});await Promise.all(n)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Ke.setProviderId(s,e),Ke.setProvider(s,n),Q.setConnectorId(r,s)}async syncAccount(e){var d,h;const n=e.chainNamespace===_.state.activeChain,r=_.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=G.getActiveNetworkProps(),c=i||a,u=((d=_.state.activeCaipNetwork)==null?void 0:d.name)===F.UNSUPPORTED_NETWORK_NAME,l=_.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(u&&!l)&&c){let f=this.getCaipNetworks().find(m=>m.id.toString()===c.toString()),p=this.getCaipNetworks().find(m=>m.chainNamespace===o);if(!l&&!f&&!p){const m=this.getApprovedCaipNetworkIds()||[],b=m.find(E=>{var N;return((N=Sn.parseCaipNetworkId(E))==null?void 0:N.chainId)===c.toString()}),w=m.find(E=>{var N;return((N=Sn.parseCaipNetworkId(E))==null?void 0:N.chainNamespace)===o});f=this.getCaipNetworks().find(E=>E.caipNetworkId===b),p=this.getCaipNetworks().find(E=>E.caipNetworkId===w||"deprecatedCaipNetworkId"in E&&E.deprecatedCaipNetworkId===w)}const g=f||p;(g==null?void 0:g.chainNamespace)===_.state.activeChain?q.state.enableNetworkSwitch&&!q.state.allowUnsupportedChain&&((h=_.state.activeCaipNetwork)==null?void 0:h.name)===F.UNSUPPORTED_NETWORK_NAME?_.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),Nt.isLowerCaseMatch(s,ue.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=Q.getConnectorId(e),r=Ke.getProviderId(e);if(r===st.CONNECTOR_TYPE_ANNOUNCED||r===st.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>{var l,d;const a=o.id===n,c=((l=o.info)==null?void 0:l.rdns)===n,u=(d=o.connectors)==null?void 0:d.some(h=>{var f;return h.id===n||((f=h.info)==null?void 0:f.rdns)===n});return a||c||!!u});if(i){const{info:o,name:a,imageUrl:c}=i,u=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:u,...o},e)}}}else if(r===st.CONNECTOR_TYPE_WALLET_CONNECT){const i=Ke.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===F.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===F.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!qa.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=_.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,u,l,d,h;const e=V9.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(u=this.options)==null?void 0:u.metadata.url:"",icons:(l=this.options)!=null&&l.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};q.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await H9.init(n),q.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{Tr.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:n=>{ee.setUri(n)},onConnect:()=>{ee.finalizeWcConnection()},onDisconnect:()=>{_.state.noAdapters&&this.resetAccount(e),ee.resetWcConnection()},onChainChanged:n=>{const r=_.state.activeChain,s=r&&Q.state.activeConnectorIds[r]===F.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(_.state.noAdapters||s)){const i=this.getCaipNetworks().find(a=>a.id.toString()===n.toString()||a.caipNetworkId.toString()===n.toString()),o=this.getCaipNetwork();if(!i){this.setUnsupportedNetwork(n);return}(o==null?void 0:o.id.toString())!==(i==null?void 0:i.id.toString())&&(o==null?void 0:o.chainNamespace)===(i==null?void 0:i.chainNamespace)&&this.setCaipNetwork(i)}},onAccountsChanged:n=>{const r=_.state.activeChain,s=r&&Q.state.activeConnectorIds[r]===F.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(_.state.noAdapters||s)&&n.length>0){const i=n[0];this.syncAccount({address:i.address,chainId:i.chainId,chainNamespace:i.chainNamespace})}}})})}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&ae.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){We.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(ut.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=ut.ALERT_ERRORS[o];a&&(rt.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&ee.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return Me.open({...e,data:{swap:e.arguments}})}return Me.open(e)}async close(){await this.injectModalUi(),Me.close()}setLoading(e,n){Me.setLoading(e,n)}async disconnect(e){await ee.disconnect({namespace:e})}getSIWX(){return q.state.siwx}getError(){return""}getChainId(){var e;return(e=_.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){rt.open(ut.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await _.switchActiveNetwork(n)}getWalletProvider(){return _.state.activeChain?Ke.state.providers[_.state.activeChain]:null}getWalletProviderType(){return Ke.getProviderId(_.state.activeChain)}subscribeProviders(e){return Ke.subscribeProviders(e)}getThemeMode(){return dn.state.themeMode}getThemeVariables(){return dn.state.themeVariables}setThemeMode(e){dn.setThemeMode(e),WC(dn.state.themeMode)}setTermsConditionsUrl(e){q.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){q.setPrivacyPolicyUrl(e)}setThemeVariables(e){dn.setThemeVariables(e),D7(dn.state.themeVariables)}subscribeTheme(e){return dn.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?ee.subscribe(e):(rt.open(F.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){return e?_.getAccountProp("connectedWalletInfo",e):ue.state.connectedWalletInfo}getAccount(e){const n=e||_.state.activeChain,r=Q.getAuthConnector(n),s=_.getAccountData(n),i=G.getConnectedConnectorId(_.state.activeChain),o=ee.getConnections(n);if(!n)throw new Error("AppKit:getAccount - namespace is required");const a=o.flatMap(c=>c.accounts.map(({address:u,type:l})=>ae.createAccount(n,u,l||"eoa")));if(s)return{allAccounts:a,caipAddress:s.caipAddress,address:ae.getPlainAddress(s.caipAddress),isConnected:!!s.caipAddress,status:s.status,embeddedWalletInfo:r&&i===F.CONNECTOR_ID.AUTH?{user:s.user?{...s.user,username:G.getConnectedSocialUsername()}:void 0,authProvider:s.socialProvider||"email",accountType:xn(n),isSmartAccountDeployed:!!s.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?_.subscribeChainProp("accountState",r,n):_.subscribe(r),Q.subscribe(r)}subscribeNetwork(e){return _.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e,n){return n?ue.subscribeKey("connectedWalletInfo",e,n):ue.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){ue.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){_.subscribeKey("activeCaipNetwork",e)}getState(){return Ir.state}getRemoteFeatures(){return q.state.remoteFeatures}subscribeState(e){return Ir.subscribe(e)}subscribeRemoteFeatures(e){return q.subscribeKey("remoteFeatures",e)}showErrorMessage(e){_r.showError(e)}showSuccessMessage(e){_r.showSuccess(e)}getEvent(){return{...We.state}}subscribeEvents(e){return We.subscribe(e)}replace(e){ge.replace(e)}redirect(e){ge.push(e)}popTransactionStack(e){ge.popTransactionStack(e)}isOpen(){return Me.state.open}isTransactionStackEmpty(){return ge.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){q.setFeatures(e)}updateRemoteFeatures(e){q.setRemoteFeatures(e)}updateOptions(e){const r={...q.state||{},...e};q.setOptions(r)}setConnectMethodsOrder(e){q.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){q.setWalletFeaturesOrder(e)}setCollapseWallets(e){q.setCollapseWallets(e)}setSocialsOrder(e){q.setSocialsOrder(e)}getConnectMethodsOrder(){return op.getConnectOrderMethod(q.state.features,Q.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||_.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&_.removeNetwork(e,n)}}let N0=!1;class H7 extends z7{async onAuthProviderConnected(e){e.message&&e.signature&&e.siwxMessage&&await Fn.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature);const n=_.state.activeChain;if(!n)throw new Error("AppKit:onAuthProviderConnected - namespace is required");const r=n===F.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,s=q.state.defaultAccountTypes[n],i=xn(n),o=e.preferredAccountType||i||s;Nt.isLowerCaseMatch(e.address,ue.state.address)||this.syncIdentity({address:e.address,chainId:e.chainId,chainNamespace:n}),this.setCaipAddress(r,n);const{signature:a,siwxMessage:c,message:u,...l}=e;this.setUser({...ue.state.user||{},...l},n),this.setSmartAccountDeployed(!!e.smartAccountDeployed,n),this.setPreferredAccountType(o,n),this.setLoading(!1,n)}setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Nn.checkIfRequestExists(n)?Nn.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(vt.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(vt.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Nn.checkIfRequestIsSafe(r),i=ue.state.address,o=_.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=_.state.activeChain;if(!n)throw new Error("AppKit:onNotConnected - namespace is required");Q.getConnectorId(n)===F.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:n,type:r})=>{const s=_.state.activeChain;if(!s)throw new Error("AppKit:onSetPreferredAccount - namespace is required");n&&this.setPreferredAccountType(r,s)})}async syncAuthConnectorTheme(e){if(!e)return;const n=dn.getSnapshot(),r=q.getSnapshot();await Promise.all([e.syncDappData({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType}),e.syncTheme({themeMode:n.themeMode,themeVariables:n.themeVariables,w3mThemeVariables:Yr(n.themeVariables,n.themeMode)})])}async syncAuthConnector(e,n){var u,l,d,h;const r=F.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===_.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const o=e.getEmail(),a=e.getUsername();this.setUser({...((u=ue.state)==null?void 0:u.user)||{},username:a,email:o},n),this.setupAuthConnectorListeners(e);const{isConnected:c}=await e.isConnected();if(await this.syncAuthConnectorTheme(e),n&&r&&s){const f=await e.getSmartAccountEnabledNetworks();_.setSmartAccountEnabledNetworks((f==null?void 0:f.smartAccountEnabledNetworks)||[],n),c&&((l=this.connectionControllerClient)!=null&&l.connectExternal)?(await((h=this.connectionControllerClient)==null?void 0:h.connectExternal({id:F.CONNECTOR_ID.AUTH,info:{name:F.CONNECTOR_ID.AUTH},type:st.CONNECTOR_TYPE_AUTH,provider:e,chainId:(d=_.state.activeCaipNetwork)==null?void 0:d.id,chain:n})),this.setStatus("connected",n)):Q.getConnectorId(n)===F.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),G.removeConnectedNamespace(n))}this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n,r;try{if(!ae.isTelegram())return;const s=G.getTelegramSocialProvider();if(!s||!ae.isClient())return;const o=new URL(window.location.href).searchParams.get("result_uri");if(!o)return;ue.setSocialProvider(s,e),await((n=this.authProvider)==null?void 0:n.init());const a=Q.getAuthConnector();s&&a&&(this.setLoading(!0,e),await ee.connectExternal({id:a.id,type:a.type,socialUri:o},a.chain),G.setConnectedSocialProvider(s),G.removeTelegramSocialProvider(),We.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:s,caipNetworkId:(r=_.getActiveCaipNetwork())==null?void 0:r.caipNetworkId}}))}catch(s){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",s)}try{const s=new URL(window.location.href);s.searchParams.delete("result_uri"),window.history.replaceState({},document.title,s.toString())}catch(s){console.error("tma social login failed",s)}}createAuthProvider(e){var u,l,d,h;if(!F.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(u=this.remoteFeatures)==null?void 0:u.email,s=Array.isArray((l=this.remoteFeatures)==null?void 0:l.socials)&&this.remoteFeatures.socials.length>0,i=r||s,a=Nt.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((d=this.options)!=null&&d.projectId)&&i&&(this.authProvider=gi.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(h=this.getCaipNetwork(a))==null?void 0:h.caipNetworkId,abortController:ut.EmbeddedWalletAbortController,onTimeout:f=>{f==="iframe_load_failed"?rt.open(ut.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):f==="iframe_request_timeout"?rt.open(ut.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):f==="unverified_domain"&&rt.open(ut.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:f=>_.getActiveCaipNetwork(f)}),Ir.subscribeOpen(f=>{var p;!f&&this.isTransactionStackEmpty()&&((p=this.authProvider)==null||p.rejectRpcRequests())}));const c=e===_.state.activeChain&&q.state.enableReconnect;q.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&de.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=_.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),u=Ke.getProvider(r),l=Ke.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:u,providerType:l})),this.setCaipNetwork(e)}else{const u=Ke.getProviderId(n)===st.CONNECTOR_TYPE_AUTH,l=Ke.getProviderId(r),d=l===st.CONNECTOR_TYPE_AUTH,h=F.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if(!r)throw new Error("AppKit:switchCaipNetwork - networkNamespace is required");if((u&&l===void 0||d)&&h)try{if(_.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:l}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:F.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:st.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:l}))}else if(l===st.CONNECTOR_TYPE_WALLET_CONNECT){if(!_.state.noAdapters){const f=this.getAdapter(r),p=Ke.getProvider(r),g=Ke.getProviderId(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:p,providerType:g}))}this.setCaipNetwork(e),this.syncWalletConnectAccount()}else this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r})}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Ir.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==F.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Ke.getProviderId(e);if(n===st.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=G.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(ae.isClient()&&!N0)try{const e={...ze.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),ae.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!q.state.disableAppend&&!q.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}N0=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!ae.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(Kt(()=>import("./CTcpOXFM.js"),__vite__mapDeps([7,8,9,10,11,12,13,14,15,16,17,18,19]),import.meta.url)),n.email&&r.push(Kt(()=>import("./BEeSodf0.js"),__vite__mapDeps([20,8,9,19,13,18,12,17,21,14]),import.meta.url)),n.socials&&r.push(Kt(()=>import("./DjkQL7yM.js"),__vite__mapDeps([22,8,9,23,12,24,25,18,26,17,13,19,27,11,28]),import.meta.url)),n.swaps&&n.swaps.length>0&&r.push(Kt(()=>import("./BFUSTlzF.js"),__vite__mapDeps([29,8,9,17,13,30,31,32,11,18,28,14,12]),import.meta.url)),e.send&&r.push(Kt(()=>import("./Cz-3e7Or.js"),__vite__mapDeps([33,8,9,17,13,18,12,24,19,32,11,14,34,35]),import.meta.url)),e.receive&&r.push(Kt(()=>import("./CYb4SLa5.js"),__vite__mapDeps([36,8,9,37,11,27]),import.meta.url)),n.onramp&&n.onramp.length>0&&r.push(Kt(()=>import("./Cf7XZ3JC.js"),__vite__mapDeps([38,8,9,39,11,13,18,23,12,24,40,19,17,26,14]),import.meta.url)),n.activity&&r.push(Kt(()=>import("./samDicpJ.js"),__vite__mapDeps([41,8,9,42,1,18,19,11,28]),import.meta.url)),e.pay&&r.push(Kt(()=>import("./Cg4eAw7R.js"),__vite__mapDeps([43,8,9,17,13,44,11,18,15,39,35,26]),import.meta.url)),await Promise.all([...r,Kt(()=>import("./05KRxa-J.js"),__vite__mapDeps([45,8,9,11,13,34,18,46,31,15,39,17,16,44,42,1,19,28,30,35,12,14,21,23,24,25,10,26,37,27,40]),import.meta.url),Kt(()=>import("./Bx5NuHDh.js"),__vite__mapDeps([47,8,9,15,11,18,16,13,31,46]),import.meta.url)])}}const q7="1.7.15";function hq(t){return new H7({...t,sdkVersion:ae.generateSdkVersion(t.adapters??[],"html",q7)})}function Hn(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const el="2.17.3",W7=()=>`@wagmi/core@${el}`;var GC=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Dl,KC;class lr extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return W7()}constructor(e,n={}){var i;super(),Dl.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof lr?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof lr&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return GC(this,Dl,"m",KC).call(this,this,e)}}Dl=new WeakSet,KC=function t(e,n){return n!=null&&n(e)?e:e.cause?GC(this,Dl,"m",t).call(this,e.cause,n):e};class kc extends lr{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class V7 extends lr{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class G7 extends lr{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class K7 extends lr{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class Y7 extends lr{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class Z7 extends lr{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function $h(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new V7;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}async function vd(t,e={}){let n;if(e.connector){const{connector:u}=e;if(t.state.status==="reconnecting"&&!u.getAccounts&&!u.getChainId)throw new Z7({connector:u});const[l,d]=await Promise.all([u.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),u.getChainId()]);n={accounts:l,chainId:d,connector:u}}else n=t.state.connections.get(t.state.current);if(!n)throw new G7;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new Y7({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=kr(e.account??n.accounts[0]);if(o&&(o.address=ii(o.address)),e.account&&!n.accounts.some(u=>u.toLowerCase()===o.address.toLowerCase()))throw new K7({address:o.address,connector:i});const a=t.chains.find(u=>u.id===r),c=await n.connector.getProvider({chainId:r});return wE({account:o,chain:a,name:"Connector Client",transport:u=>nN(c)({...u,retryCount:0})})}async function T0(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function J7(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await vd(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return Hn(o,Qb,"estimateGas")({...s,account:i})}function YC(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(vS[t])}function ja(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function X7(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return Hn(o,hN,"multicall")({allowFailure:n,contracts:s,...i})}function Q7(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Hn(s,pE,"readContract")(r)}async function ez(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const u=()=>Object.entries(c).map(([h,f])=>X7(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),l=(await Promise.all(u())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return l.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof kb)throw c;const u=()=>o.map(l=>Q7(t,{...l,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(u())).map(l=>l.status==="fulfilled"?{result:l.value,status:"success"}:{error:l.reason,result:void 0,status:"failure"}):await Promise.all(u())}}async function tz(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await x0(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await x0(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=pb(Ps(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),l=await Hn(c,Xb,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:Bo(l,YC(a)),symbol:d.nativeCurrency.symbol,value:l}}async function x0(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,u,l]=await ez(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=Bo(c??"0",YC(o??u));return{decimals:u,formatted:d,symbol:l,value:c}}function Uc(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Uc(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!Uc(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let Uu=[];function Gr(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Uc(Uu,e)?Uu:(Uu=e,e)}async function nz(t,e){const{account:n,chainId:r,...s}=e,i=n??ja(t).address,o=t.getClient({chainId:r});return Hn(o,Tp,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let Dh=!1;async function P0(t,e={}){var u,l;if(Dh)return[];Dh=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((u=e.connectors)!=null&&u.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((l=t.storage)==null?void 0:l.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const m=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:m}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),Dh=!1,a}async function rz(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await vd(t,{account:n??void 0,chainId:r,connector:s}),await Hn(o,mE,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function sz(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await vd(t,{account:n,connector:r}),Hn(i,mN,"signMessage")({...s,...n?{account:n}:{}})}class _s extends lr{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class iz extends lr{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function O0(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new iz({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new kc;return t.setState(a=>({...a,chainId:r})),i}function oz(t,e){const{onChange:n}=e;return t.subscribe(()=>ja(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return Uc(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function az(t,e){const{onChange:n}=e;return t.subscribe(()=>Gr(t),n,{equalityFn:Uc})}function cz(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function uz(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const u=t.getClient({chainId:c});return s=Hn(u,gN,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}async function lz(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await Hn(i,pN,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const u=await Hn(i,EE,"getTransaction")({hash:a.transactionHash}),d=await Hn(i,fE,"call")({...u,data:u.input,gasPrice:u.type!=="eip1559"?u.gasPrice:void 0,maxFeePerGas:u.type==="eip1559"?u.maxFeePerGas:void 0,maxPriorityFeePerGas:u.type==="eip1559"?u.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?pb(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function dz(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await vd(t,{account:n??void 0,chainId:r,connector:s}),await Hn(o,Z2,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function fq(t){return t}Cd.type="injected";function Cd(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const u=c();if(u)return u}return typeof c=="object"?c:typeof c=="string"?{...hz[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(u){return u==null?void 0:u.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:Cd.type,async setup(){const u=await this.getProvider();u!=null&&u.on&&t.target&&(o||(o=this.onConnect.bind(this),u.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),u.on("accountsChanged",s)))},async connect({chainId:u,isReconnecting:l}={}){var f,p,g,m,b,w;const d=await this.getProvider();if(!d)throw new _s;let h=[];if(l)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(m=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:m.map(N=>ii(N)),h.length>0&&(h=await this.getAccounts())}catch(E){const N=E;if(N.code===wt.code)throw new wt(N);if(N.code===Os.code)throw N}try{!(h!=null&&h.length)&&!l&&(h=(await d.request({method:"eth_requestAccounts"})).map(A=>ii(A))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let E=await this.getChainId();if(u&&E!==u){const N=await this.switchChain({chainId:u}).catch(A=>{if(A.code===wt.code)throw A;return{id:E}});E=(N==null?void 0:N.id)??E}return e&&await((b=c.storage)==null?void 0:b.removeItem(`${this.id}.disconnected`)),t.target||await((w=c.storage)==null?void 0:w.setItem("injected.connected",!0)),{accounts:h,chainId:E}}catch(E){const N=E;throw N.code===wt.code?new wt(N):N.code===Os.code?new Os(N):N}},async disconnect(){var l,d;const u=await this.getProvider();if(!u)throw new _s;i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o));try{await bE(()=>u.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((l=c.storage)==null?void 0:l.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const u=await this.getProvider();if(!u)throw new _s;return(await u.request({method:"eth_accounts"})).map(d=>ii(d))},async getChainId(){const u=await this.getProvider();if(!u)throw new _s;const l=await u.request({method:"eth_chainId"});return Number(l)},async getProvider(){if(typeof window>"u")return;let u;const l=r();return typeof l.provider=="function"?u=l.provider(window):typeof l.provider=="string"?u=tl(window,l.provider):u=l.provider,u&&!u.removeListener&&("off"in u&&typeof u.off=="function"?u.removeListener=u.off:u.removeListener=()=>{}),u},async isAuthorized(){var u,l;try{if(e&&await((u=c.storage)==null?void 0:u.getItem(`${this.id}.disconnected`))||!t.target&&!await((l=c.storage)==null?void 0:l.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(b=>window.addEventListener("ethereum#initialized",()=>b(p()),{once:!0}))]:[],new Promise(b=>setTimeout(()=>b(p()),g))]))return!0}throw new _s}return!!(await dl(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:u,chainId:l}){var p,g,m,b;const d=await this.getProvider();if(!d)throw new _s;const h=c.chains.find(w=>w.id===l);if(!h)throw new Or(new kc);const f=new Promise(w=>{const E=N=>{"chainId"in N&&N.chainId===l&&(c.emitter.off("change",E),w())};c.emitter.on("change",E)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:Te(l)}]}).then(async()=>{await this.getChainId()===l&&c.emitter.emit("change",{chainId:l})}),f]),h}catch(w){const E=w;if(E.code===4902||((g=(p=E==null?void 0:E.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:N,...A}=h.blockExplorers??{};let R;u!=null&&u.blockExplorerUrls?R=u.blockExplorerUrls:N&&(R=[N.url,...Object.values(A).map(I=>I.url)]);let O;(m=u==null?void 0:u.rpcUrls)!=null&&m.length?O=u.rpcUrls:O=[((b=h.rpcUrls.default)==null?void 0:b.http[0])??""];const M={blockExplorerUrls:R,chainId:Te(l),chainName:(u==null?void 0:u.chainName)??h.name,iconUrls:u==null?void 0:u.iconUrls,nativeCurrency:(u==null?void 0:u.nativeCurrency)??h.nativeCurrency,rpcUrls:O};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[M]}).then(async()=>{if(await this.getChainId()===l)c.emitter.emit("change",{chainId:l});else throw new wt(new Error("User rejected switch after adding network."))}),f]),h}catch(N){throw new wt(N)}throw E.code===wt.code?new wt(E):new Or(E)}},async onAccountsChanged(u){var l;if(u.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((l=c.storage)==null?void 0:l.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:u.map(d=>ii(d))})},onChainChanged(u){const l=Number(u);c.emitter.emit("change",{chainId:l})},async onConnect(u){const l=await this.getAccounts();if(l.length===0)return;const d=Number(u.chainId);c.emitter.emit("connect",{accounts:l,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(u){const l=await this.getProvider();u&&u.code===1013&&l&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),l&&(i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o))))}})}const hz={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:tl(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return tl(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:tl(t,"isPhantom")}}};function tl(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function fz(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function pz(){const t=new Set;let e=[];const n=()=>fz(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const gz=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let u=o;if(a){const l=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());u=h=>{const f=o(h);if(!l(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(u)},t(e,n,r)},mz=gz;function yz(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const cp=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return cp(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return cp(r)(n)}}}},wz=(t,e)=>(n,r,s)=>{let i={storage:yz(()=>localStorage),partialize:g=>g,version:0,merge:(g,m)=>({...m,...g}),...e},o=!1;const a=new Set,c=new Set;let u=i.storage;if(!u)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const l=()=>{const g=i.partialize({...r()});return u.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,m)=>{d(g,m),l()};const h=t((...g)=>{n(...g),l()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,m;if(!u)return;o=!1,a.forEach(w=>{var E;return w((E=r())!=null?E:h)});const b=((m=i.onRehydrateStorage)==null?void 0:m.call(i,(g=r())!=null?g:h))||void 0;return cp(u.getItem.bind(u))(i.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==i.version){if(i.migrate)return[!0,i.migrate(w.state,w.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var E;const[N,A]=w;if(f=i.merge(A,(E=r())!=null?E:h),n(f,!0),N)return l()}).then(()=>{b==null||b(f,void 0),f=r(),o=!0,c.forEach(w=>w(f))}).catch(w=>{b==null||b(void 0,w)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(u=g.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},bz=wz,R0=t=>{let e;const n=new Set,r=(u,l)=>{const d=typeof u=="function"?u(e):u;if(!Object.is(d,e)){const h=e;e=l??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=e=t(r,s,a);return a},kh=t=>t?R0(t):R0;var ZC={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,u,l){this.fn=c,this.context=u,this.once=l||!1}function i(c,u,l,d,h){if(typeof l!="function")throw new TypeError("The listener must be a function");var f=new s(l,d||c,h),p=n?n+u:u;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],l,d;if(this._eventsCount===0)return u;for(d in l=this._events)e.call(l,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(l)):u},a.prototype.listeners=function(u){var l=n?n+u:u,d=this._events[l];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(u){var l=n?n+u:u,d=this._events[l];return d?d.fn?1:d.length:0},a.prototype.emit=function(u,l,d,h,f,p){var g=n?n+u:u;if(!this._events[g])return!1;var m=this._events[g],b=arguments.length,w,E;if(m.fn){switch(m.once&&this.removeListener(u,m.fn,void 0,!0),b){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,l),!0;case 3:return m.fn.call(m.context,l,d),!0;case 4:return m.fn.call(m.context,l,d,h),!0;case 5:return m.fn.call(m.context,l,d,h,f),!0;case 6:return m.fn.call(m.context,l,d,h,f,p),!0}for(E=1,w=new Array(b-1);E<b;E++)w[E-1]=arguments[E];m.fn.apply(m.context,w)}else{var N=m.length,A;for(E=0;E<N;E++)switch(m[E].once&&this.removeListener(u,m[E].fn,void 0,!0),b){case 1:m[E].fn.call(m[E].context);break;case 2:m[E].fn.call(m[E].context,l);break;case 3:m[E].fn.call(m[E].context,l,d);break;case 4:m[E].fn.call(m[E].context,l,d,h);break;default:if(!w)for(A=1,w=new Array(b-1);A<b;A++)w[A-1]=arguments[A];m[E].fn.apply(m[E].context,w)}}return!0},a.prototype.on=function(u,l,d){return i(this,u,l,d,!1)},a.prototype.once=function(u,l,d){return i(this,u,l,d,!0)},a.prototype.removeListener=function(u,l,d,h){var f=n?n+u:u;if(!this._events[f])return this;if(!l)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===l&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,m=[],b=p.length;g<b;g++)(p[g].fn!==l||h&&!p[g].once||d&&p[g].context!==d)&&m.push(p[g]);m.length?this._events[f]=m.length===1?m[0]:m:o(this,f)}return this},a.prototype.removeAllListeners=function(u){var l;return u?(l=n?n+u:u,this._events[l]&&o(this,l)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(ZC);var Ez=ZC.exports;const vz=kl(Ez);class Cz{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new vz})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function _z(t){return new Cz(t)}function Az(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function $0(t,e){return t.slice(0,e).join(".")||"."}function D0(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function Iz(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const u=D0(s,this);u===0?s[s.length]=this:(s.splice(u),i.splice(u)),i[i.length]=a;const l=D0(s,c);if(l!==0)return r?e.call(this,a,c,$0(i,l)):`[ref=${$0(i,l)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function Sz(t,e,n,r){return JSON.stringify(t,Iz((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function Nz(t){const{deserialize:e=Az,key:n="wagmi",serialize:r=Sz,storage:s=JC}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),u=await i(c);return u?e(u)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const JC={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function Tz(){const t=typeof window<"u"&&window.localStorage?window.localStorage:JC;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const up=256;let Bu=up,Mu;function xz(t=11){if(!Mu||Bu+t>up*2){Mu="",Bu=0;for(let e=0;e<up;e++)Mu+=(256+Math.random()*256|0).toString(16).substring(1)}return Mu.substring(Bu,Bu+++t)}function Pz(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=Nz({storage:Tz()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?pz():void 0,a=kh(()=>i.chains),c=kh(()=>{const A=[],R=new Set;for(const O of i.connectors??[]){const M=u(O);if(A.push(M),!s&&M.rdns){const I=typeof M.rdns=="string"?[M.rdns]:M.rdns;for(const j of I)R.add(j)}}if(!s&&o){const O=o.getProviders();for(const M of O)R.has(M.info.rdns)||A.push(u(l(M)))}return A});function u(A){var M;const R=_z(xz()),O={...A({emitter:R,chains:a.getState(),storage:n,transports:i.transports}),emitter:R,uid:R.uid};return R.on("connect",E),(M=O.setup)==null||M.call(O),O}function l(A){const{info:R}=A,O=A.provider;return Cd({target:{...R,id:R.rdns,provider:O}})}const d=new Map;function h(A={}){const R=A.chainId??m.getState().chainId,O=a.getState().find(I=>I.id===R);if(A.chainId&&!O)throw new kc;{const I=d.get(m.getState().chainId);if(I&&!O)return I;if(!O)throw new kc}{const I=d.get(R);if(I)return I}let M;if(i.client)M=i.client({chain:O});else{const I=O.id,j=a.getState().map(x=>x.id),U={},L=Object.entries(i);for(const[x,B]of L)if(!(x==="chains"||x==="client"||x==="connectors"||x==="transports"))if(typeof B=="object")if(I in B)U[x]=B[I];else{if(j.some(C=>C in B))continue;U[x]=B}else U[x]=B;M=wE({...U,chain:O,batch:U.batch??{multicall:!0},transport:x=>i.transports[I]({...x,connectors:c})})}return d.set(R,M),M}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";el.startsWith(g)?p=Number.parseInt(el.replace(g,"")):p=Number.parseInt(el.split(".")[0]??"0");const m=kh(mz(n?bz(f,{migrate(A,R){if(R===p)return A;const O=f(),M=b(A,O.chainId);return{...O,chainId:M}},name:"store",partialize(A){return{connections:{__type:"Map",value:Array.from(A.connections.entries()).map(([R,O])=>{const{id:M,name:I,type:j,uid:U}=O.connector;return[R,{...O,connector:{id:M,name:I,type:j,uid:U}}]})},chainId:A.chainId,current:A.current}},merge(A,R){typeof A=="object"&&A&&"status"in A&&delete A.status;const O=b(A,R.chainId);return{...R,...A,chainId:O}},skipHydration:s,storage:n,version:p}):f));m.setState(f());function b(A,R){return A&&typeof A=="object"&&"chainId"in A&&typeof A.chainId=="number"&&a.getState().some(O=>O.id===A.chainId)?A.chainId:R}r&&m.subscribe(({connections:A,current:R})=>{var O;return R?(O=A.get(R))==null?void 0:O.chainId:void 0},A=>{if(a.getState().some(O=>O.id===A))return m.setState(O=>({...O,chainId:A??O.chainId}))}),o==null||o.subscribe(A=>{const R=new Set,O=new Set;for(const I of c.getState())if(R.add(I.id),I.rdns){const j=typeof I.rdns=="string"?[I.rdns]:I.rdns;for(const U of j)O.add(U)}const M=[];for(const I of A){if(O.has(I.info.rdns))continue;const j=u(l(I));R.has(j.id)||M.push(j)}n&&!m.persist.hasHydrated()||c.setState(I=>[...I,...M],!0)});function w(A){m.setState(R=>{const O=R.connections.get(A.uid);return O?{...R,connections:new Map(R.connections).set(A.uid,{accounts:A.accounts??O.accounts,chainId:A.chainId??O.chainId,connector:O.connector})}:R})}function E(A){m.getState().status==="connecting"||m.getState().status==="reconnecting"||m.setState(R=>{const O=c.getState().find(M=>M.uid===A.uid);return O?(O.emitter.listenerCount("connect")&&O.emitter.off("connect",w),O.emitter.listenerCount("change")||O.emitter.on("change",w),O.emitter.listenerCount("disconnect")||O.emitter.on("disconnect",N),{...R,connections:new Map(R.connections).set(A.uid,{accounts:A.accounts,chainId:A.chainId,connector:O}),current:A.uid,status:"connected"}):R})}function N(A){m.setState(R=>{const O=R.connections.get(A.uid);if(O){const I=O.connector;I.emitter.listenerCount("change")&&O.connector.emitter.off("change",w),I.emitter.listenerCount("disconnect")&&O.connector.emitter.off("disconnect",N),I.emitter.listenerCount("connect")||O.connector.emitter.on("connect",E)}if(R.connections.delete(A.uid),R.connections.size===0)return{...R,connections:new Map,current:null,status:"disconnected"};const M=R.connections.values().next().value;return{...R,connections:new Map(R.connections),current:M.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return m.getState()},setState(A){let R;typeof A=="function"?R=A(m.getState()):R=A;const O=f();typeof R!="object"&&(R=O),Object.keys(O).some(I=>!(I in R))&&(R=O),m.setState(R,!0)},subscribe(A,R,O){return m.subscribe(A,R,O?{...O,fireImmediately:O.emitImmediately}:void 0)},_internal:{mipd:o,store:m,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(A){const R=typeof A=="function"?A(a.getState()):A;if(R.length!==0)return a.setState(R,!0)},subscribe(A){return a.subscribe(A)}},connectors:{providerDetailToConnector:l,setup:u,setState(A){return c.setState(typeof A=="function"?A(c.getState()):A,!0)},subscribe(A){return c.subscribe(A)}},events:{change:w,connect:E,disconnect:N}}}}function Oz(t){let e=[],n,r;function s(a){return qa.parseEvmChainId(a)||1}function i(){var a;return n||(n=gi.getInstance({projectId:t.options.projectId,chainId:(a=_.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?rt.open(ut.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?rt.open(ut.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&rt.open(ut.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:ut.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>_.getActiveCaipNetwork(c)})),n}async function o(a={}){var g;const c=i();let u=a.chainId;if(a.isReconnecting){const m=qa.parseEvmChainId(c.getLastUsedChainId()||""),b=(g=t.chains)==null?void 0:g[0].id;if(u=m||b,!u)throw new Error("ChainId not found in provider")}const l=xn("eip155"),{address:d,chainId:h,accounts:f}=await Fn.authConnectorAuthenticate({authConnector:c,chainId:u,preferredAccountType:l,socialUri:a.socialUri,chainNamespace:F.CHAIN.EVM});e=(f==null?void 0:f.map(m=>m.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:F.CONNECTOR_ID.AUTH,name:F.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:F.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(l=>{l(o(c))}));const u=await r;return r=void 0,u},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=gi.getInstance({projectId:t.options.projectId,chainId:(c=_.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:ut.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?rt.open(ut.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?rt.open(ut.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&rt.open(ut.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:u=>_.getActiveCaipNetwork(u)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:u}=await c.getChainId();return s(u)},async isAuthorized(){const u=_.state.activeChain===F.CHAIN.EVM;if(F.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>Q.getConnectorId(h)===F.CONNECTOR_ID.AUTH)&&!u)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var u;try{const l=a.chains.find(p=>p.id===c);if(!l)throw new Or(new Error("chain not found on connector."));const d=await this.getProvider(),h=xn("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((u=f==null?void 0:f.accounts)==null?void 0:u.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),l}catch(l){throw l instanceof Error?new Or(l):l}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(ii)})},onChainChanged(c){const u=Number(c);a.emitter.emit("change",{chainId:u})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}Cg.type="walletConnect";function Cg(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,u;return l=>({id:"walletConnect",name:"WalletConnect",type:Cg.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=_.getCaipNetworks(),m=await this.getProvider();if(!m)throw new _s;a||(a=this.onDisplayUri,m.on("display_uri",a));const b=await this.isChainsStale();m.session&&b&&await m.disconnect();const w=q.state.universalProviderConfigOverride;if(!m.session||b){const I=Tr.createNamespaces(g,w);await m.connect({optionalNamespaces:I,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(j=>Number(j.id)))}const E=await this.getAccounts(),N=await this.getChainId(),A=(p=(f=(h=m.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,R=A==null?void 0:A.some(I=>Number(I.split(":")[1])===N);let O=1;R?O=N:A!=null&&A[0]&&(O=Number(A[0].split(":")[1])),a&&(m.removeListener("display_uri",a),a=void 0),o&&(m.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),m.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),m.on("chainChanged",i)),u||(u=this.onDisconnect.bind(this),m.on("disconnect",u)),c||(c=this.onSessionDelete.bind(this),m.on("session_delete",c));const M=w==null?void 0:w.defaultChain;return m.setDefaultChain(M??`eip155:${O}`),{accounts:E,chainId:O}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new wt(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),u&&(d==null||d.removeListener("disconnect",u),u=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var m,b,w;const d=await this.getProvider();if(!((m=d==null?void 0:d.session)!=null&&m.namespaces))return[];const h=(w=(b=d==null?void 0:d.session)==null?void 0:b.namespaces[F.CHAIN.EVM])==null?void 0:w.accounts,f=(h==null?void 0:h.map(E=>E.split(":")[2]))??[],p=new Set;return f.filter(E=>{const N=E==null?void 0:E.toLowerCase();return p.has(N)?!1:(p.add(N),!0)})},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=G.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const m=G.getStoredActiveCaipNetworkId(),b=h?e.getCaipNetworks(h):[],w=b==null?void 0:b.find(E=>E.id===m);w&&w.chainNamespace===F.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(w.id)}))}return r},async getChainId(){var g,m,b,w;const d=(g=e.getCaipNetwork(F.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(w=(b=(m=(await this.getProvider()).session)==null?void 0:m.namespaces[F.CHAIN.EVM])==null?void 0:b.chains)==null?void 0:w[0],p=_.getCaipNetworks().find(E=>E.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,m,b,w;const f=await this.getProvider();if(!f)throw new _s;const p=_.getCaipNetworks().find(E=>E.id===h);if(!p)throw new Or(new kc);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:Te(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),l.emitter.emit("change",{chainId:Number(h)});const E=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...E,h]),{...p,id:p.id}}catch(E){const N=E;if(/(?:user rejected)/iu.test(N.message))throw new wt(N);try{let A;d!=null&&d.blockExplorerUrls?A=d.blockExplorerUrls:A=(g=p.blockExplorers)!=null&&g.default.url?[(m=p.blockExplorers)==null?void 0:m.default.url]:[];const R=((w=(b=p.rpcUrls)==null?void 0:b.chainDefault)==null?void 0:w.http)||[],O={blockExplorerUrls:A,chainId:Te(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:R};await f.request({method:"wallet_addEthereumChain",params:[O]});const M=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...M,h]),{...p,id:p.id}}catch(A){throw new wt(A)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():l.emitter.emit("change",{accounts:d.map(h=>ii(h))})},onChainChanged(d){const h=Number(d);l.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(_.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),l.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),u&&(h.removeListener("disconnect",u),u=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){l.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[F.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(m=>Number.parseInt(m.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=l.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=l.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=l.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const ya=Je({pendingTransactions:0}),k0={state:ya,subscribeKey(t,e){return Bt(ya,t,e)},increase(t){ya[t]+=1},decrease(t){ya[t]-=1},reset(t){ya[t]=0}};function Rz(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function $z(t){if(ae.isSafeApp()){const{safe:e}=await Kt(async()=>{const{safe:n}=await import("./DVg2Ap1B.js");return{safe:n}},__vite__mapDeps([48,9]),import.meta.url);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function Dz(t){try{const{coinbaseWallet:e}=await Kt(async()=>{const{coinbaseWallet:n}=await import("./DVg2Ap1B.js");return{coinbaseWallet:n}},__vite__mapDeps([48,9]),import.meta.url);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const kz={enable:!1,pollingInterval:3e4};class pq extends VC{constructor(e){const n=Cr.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=F.CHAIN.EVM,this.adapterType=F.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...kz,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===F.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>ae.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=ja(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>ae.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=ja(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===F.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=Cr.getCaipNetworkId(s);i?n[s.id]=Cr.extendWagmiTransports(s,e.projectId,i):n[s.id]=Cr.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=Pz({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=uz(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),k0.increase("pendingTransactions")}});const e=k0.subscribeKey("pendingTransactions",n=>{var r;n>=F.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){oz(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),az(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===F.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:G.getConnectedSocialProvider(),username:G.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await Dz(this.wagmiConfig.connectors);s&&n.push(s)}const r=await $z(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,u;const r=[];e.enableWalletConnect!==!1&&r.push(Cg(e,n)),e.enableEIP6963!==!1&&r.push(Cd({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((u=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:u.length)>0;(s||i)&&r.push(Oz({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(l=>{const d=this.wagmiConfig._internal.connectors.setup(l);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:In.ConnectorNamesMap[r.id]??r.name,imageId:In.ConnectorImageIds[r.id],type:In.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===F.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await sz(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=ja(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await nz(this.wagmiConfig,s);const i=await rz(this.wagmiConfig,s);return await lz(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(qa.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await dz(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await J7(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return dN(e.value,e.decimals)}formatUnits(e){return Bo(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===F.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===F.CONNECTOR_ID.AUTH||e.id===F.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:In.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:In.ConnectorNamesMap[e.id]??e.name,imageId:In.ConnectorImageIds[e.id],type:In.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===F.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){cz(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var u,l;const{id:n,chainId:r}=e,i=Gr(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(ae.isSafeApp()&&n===F.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await $h(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await $h(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await O0(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var h,f,p,g,m;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,u=this.getWagmiConnector(n);if(!u)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&u.id===F.CONNECTOR_ID.EIP6963&&((h=u.setEip6963Wallet)==null||h.call(u,{provider:s,info:o}));const l=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(u.uid);if(l){await((g=this.wagmiConfig.storage)==null?void 0:g.setItem("recentConnectorId",u.id));const b=[...l.accounts].sort((w,E)=>Nt.isLowerCaseMatch(w,r)?-1:Nt.isLowerCaseMatch(E,r)?1:0);return(m=this.wagmiConfig)==null||m.setState(w=>({...w,connections:new Map(w.connections).set(u.uid,{accounts:b,chainId:l.chainId,connector:l.connector}),current:u.uid,status:"connected"})),{address:b[0],chainId:l.chainId,provider:s,type:i,id:n}}const d=await $h(this.wagmiConfig,{connector:u,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await P0(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=G.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,u;try{const l=Number(e.chainId),d=await tz(this.wagmiConfig,{address:e.address,chainId:l,token:(u=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:u.address});G.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(l){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",l),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=Gr(this.wagmiConfig).find(i=>Nt.isLowerCaseMatch(i.connector.id,e.id));return await T0(this.wagmiConfig,{connector:n}),q.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=Gr(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await T0(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,u,l,d,h,f;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await O0(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((u=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:u[0])??""],blockExplorerUrls:[((d=(l=r==null?void 0:r.blockExplorers)==null?void 0:l.default)==null?void 0:d.url)??((f=(h=n.blockExplorers)==null?void 0:h.default)==null?void 0:f.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=Gr(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const l=Rz(o)[e];if(l)return l}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=Gr(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=Gr(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=Gr(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:F.CONNECTOR_ID.AUTH,type:"AUTH",name:F.CONNECTOR_NAMES.AUTH,provider:e,imageId:In.ConnectorImageIds[F.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=Gr(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(_.state.activeChain==="eip155")return;P0(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new vg({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const gq="0884ac76a4fd711a06280ccd6ed32db7";export{Dp as $,Je as A,V as B,m7 as C,Bt as D,St as E,Ut as F,ja as G,Sa as H,_r as I,ee as J,F as K,We as L,Me as M,j_ as N,xn as O,gq as P,vt as Q,ge as R,Or as S,_ as T,wt as U,fe as V,pq as W,ae as X,bA as Y,ue as Z,rt as _,Xu as a,ol as a$,ze as a0,q0 as a1,Q as a2,z0 as a3,dn as a4,il as a5,mp as a6,Ms as a7,Vz as a8,Wl as a9,je as aA,LC as aB,ap as aC,$o as aD,Lu as aE,Gn as aF,iE as aG,Zl as aH,ot as aI,Zr as aJ,zc as aK,qc as aL,Zu as aM,rl as aN,Nt as aO,op as aP,Cr as aQ,wN as aR,Wz as aS,hp as aT,Fc as aU,Fl as aV,tS as aW,ql as aX,ct as aY,Qb as aZ,kr as a_,yp as aa,qz as ab,Hz as ac,Hl as ad,sl as ae,yI as af,vI as ag,sH as ah,sS as ai,G as aj,q as ak,g7 as al,ut as am,Yr as an,Ta as ao,Sn as ap,Ke as aq,W_ as ar,tE as as,Nn as at,st as au,uf as av,nr as aw,Fn as ax,de as ay,aq as az,oq as b,gN as b$,eE as b0,h2 as b1,xp as b2,ul as b3,gE as b4,W2 as b5,q2 as b6,Ja as b7,V2 as b8,l2 as b9,tH as bA,Et as bB,Gz as bC,gI as bD,Uo as bE,Ll as bF,gb as bG,eH as bH,Kz as bI,xr as bJ,jl as bK,EE as bL,A2 as bM,Lb as bN,QS as bO,Ml as bP,vp as bQ,_p as bR,Vl as bS,T2 as bT,uH as bU,uE as bV,dH as bW,Xz as bX,LS as bY,PS as bZ,dc as b_,qh as ba,lb as bb,Ei as bc,J2 as bd,Ao as be,Ps as bf,WI as bg,dE as bh,OS as bi,rS as bj,wn as bk,mb as bl,lE as bm,cH as bn,Io as bo,iH as bp,pE as bq,aH as br,oH as bs,Gl as bt,Ip as bu,Ap as bv,R2 as bw,VI as bx,Pr as by,vi as bz,hq as c,fN as c0,pN as c1,Y2 as c2,Tp as c3,hN as c4,fm as c5,e2 as c6,nH as c7,Hb as c8,rH as c9,zz as cA,en as cB,KA as cC,WA as cD,qA as cE,HA as cF,jA as cG,YA as cH,ko as cI,GA as cJ,zA as cK,VA as cL,FA as cM,LA as cN,jh as cO,Jo as cP,Pp as cQ,Zb as ca,Xb as cb,cN as cc,wE as cd,Rp as ce,vz as cf,sb as cg,jc as ch,mn as ci,RS as cj,kb as ck,X2 as cl,uN as cm,hu as cn,pb as co,lH as cp,Ez as cq,AA as cr,JA as cs,uI as ct,Q0 as cu,Fz as cv,bi as cw,Lz as cx,jz as cy,rr as cz,lq as d,uq as e,fq as f,ii as g,kc as h,Eo as i,_s as j,Cd as k,Ep as l,dq as m,Te as n,zn as o,wS as p,u2 as q,cq as r,sz as s,fE as t,So as u,xb as v,bE as w,iq as x,Ls as y,On as z};

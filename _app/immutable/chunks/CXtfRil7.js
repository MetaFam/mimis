var WT=Object.defineProperty;var tb=e=>{throw TypeError(e)};var zT=(e,r,t)=>r in e?WT(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var g=(e,r,t)=>zT(e,typeof r!="symbol"?r+"":r,t),rb=(e,r,t)=>r.has(e)||tb("Cannot "+t);var ye=(e,r,t)=>(rb(e,r,"read from private field"),t?t.call(e):r.get(e)),ec=(e,r,t)=>r.has(e)?tb("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,t),tc=(e,r,t,n)=>(rb(e,r,"write to private field"),n?n.call(e,t):r.set(e,t),t);import{g as f,n as Y0,d as HT,k as qT,l as nb,p as GT,q as KT,h as u_}from"./CKxxabAx.js";import{b as Z0,a as YT}from"./DErBbmgI.js";import{F as Q0,_ as ZT,a as s_,w as QT,b as Xp,n as XT,p as JT,m as ob,d as An,e as Mt,f as wa,g as c_,h as Kt,i as Rt,j as eC,s as Bc}from"./DJp8xxOB.js";import{s as $c}from"./DLUp0E8X.js";const tC=["string","number","bigint","symbol"],rC=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function nC(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";const r=typeof e;if(tC.includes(r))return r;if(r==="function")return"Function";if(Array.isArray(e))return"Array";if(oC(e))return"Buffer";const t=iC(e);return t||"Object"}function oC(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function iC(e){const r=Object.prototype.toString.call(e).slice(8,-1);if(rC.includes(r))return r}class O{constructor(r,t,n){this.major=r,this.majorEncoded=r<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(r){return this.major<r.major?-1:this.major>r.major?1:0}}O.uint=new O(0,"uint",!0);O.negint=new O(1,"negint",!0);O.bytes=new O(2,"bytes",!0);O.string=new O(3,"string",!0);O.array=new O(4,"array",!1);O.map=new O(5,"map",!1);O.tag=new O(6,"tag",!1);O.float=new O(7,"float",!0);O.false=new O(7,"false",!0);O.true=new O(7,"true",!0);O.null=new O(7,"null",!0);O.undefined=new O(7,"undefined",!0);O.break=new O(7,"break",!0);class j{constructor(r,t,n){this.type=r,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const Qo=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",aC=new TextDecoder,uC=new TextEncoder;function xc(e){return Qo&&globalThis.Buffer.isBuffer(e)}function l_(e){return e instanceof Uint8Array?xc(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const sC=Qo?(e,r,t)=>t-r>64?globalThis.Buffer.from(e.subarray(r,t)).toString("utf8"):ab(e,r,t):(e,r,t)=>t-r>64?aC.decode(e.subarray(r,t)):ab(e,r,t),X0=Qo?e=>e.length>64?globalThis.Buffer.from(e):ib(e):e=>e.length>64?uC.encode(e):ib(e),sr=e=>Uint8Array.from(e),f_=Qo?(e,r,t)=>xc(e)?new Uint8Array(e.subarray(r,t)):e.slice(r,t):(e,r,t)=>e.slice(r,t),cC=Qo?(e,r)=>(e=e.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),l_(globalThis.Buffer.concat(e,r))):(e,r)=>{const t=new Uint8Array(r);let n=0;for(let o of e)n+o.length>t.length&&(o=o.subarray(0,t.length-n)),t.set(o,n),n+=o.length;return t},lC=Qo?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function fC(e,r){if(xc(e)&&xc(r))return e.compare(r);for(let t=0;t<e.length;t++)if(e[t]!==r[t])return e[t]<r[t]?-1:1;return 0}function ib(e){const r=[];let t=0;for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);o<128?r[t++]=o:o<2048?(r[t++]=o>>6|192,r[t++]=o&63|128):(o&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++n)&1023),r[t++]=o>>18|240,r[t++]=o>>12&63|128,r[t++]=o>>6&63|128,r[t++]=o&63|128):(r[t++]=o>>12|224,r[t++]=o>>6&63|128,r[t++]=o&63|128)}return r}function ab(e,r,t){const n=[];for(;r<t;){const o=e[r];let i=null,a=o>239?4:o>223?3:o>191?2:1;if(r+a<=t){let s,c,u,l;switch(a){case 1:o<128&&(i=o);break;case 2:s=e[r+1],(s&192)===128&&(l=(o&31)<<6|s&63,l>127&&(i=l));break;case 3:s=e[r+1],c=e[r+2],(s&192)===128&&(c&192)===128&&(l=(o&15)<<12|(s&63)<<6|c&63,l>2047&&(l<55296||l>57343)&&(i=l));break;case 4:s=e[r+1],c=e[r+2],u=e[r+3],(s&192)===128&&(c&192)===128&&(u&192)===128&&(l=(o&15)<<18|(s&63)<<12|(c&63)<<6|u&63,l>65535&&l<1114112&&(i=l))}}i===null?(i=65533,a=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|i&1023),n.push(i),r+=a}return J0(n)}const ub=4096;function J0(e){const r=e.length;if(r<=ub)return String.fromCharCode.apply(String,e);let t="",n=0;for(;n<r;)t+=String.fromCharCode.apply(String,e.slice(n,n+=ub));return t}const dC=256;class ew{constructor(r=dC){this.chunkSize=r,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(r){let t=this.chunks[this.chunks.length-1];if(this.cursor+r.length<=this.maxCursor+1){const o=t.length-(this.maxCursor-this.cursor)-1;t.set(r,o)}else{if(t){const o=t.length-(this.maxCursor-this.cursor)-1;o<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,o),this.maxCursor=this.cursor-1)}r.length<64&&r.length<this.chunkSize?(t=lC(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(r,0)):(this.chunks.push(r),this.maxCursor+=r.length)}this.cursor+=r.length}toBytes(r=!1){let t;if(this.chunks.length===1){const n=this.chunks[0];r&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=f_(n,0,this.cursor)}else t=cC(this.chunks,this.cursor);return r&&this.reset(),t}}const K="CBOR decode error:",jn="CBOR encode error:";function Xo(e,r,t){if(e.length-r<t)throw new Error(`${K} not enough data for type`)}const Be=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Kn(e,r,t){Xo(e,r,1);const n=e[r];if(t.strict===!0&&n<Be[0])throw new Error(`${K} integer encoded in more bytes than necessary (strict decode)`);return n}function Yn(e,r,t){Xo(e,r,2);const n=e[r]<<8|e[r+1];if(t.strict===!0&&n<Be[1])throw new Error(`${K} integer encoded in more bytes than necessary (strict decode)`);return n}function Zn(e,r,t){Xo(e,r,4);const n=e[r]*16777216+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3];if(t.strict===!0&&n<Be[2])throw new Error(`${K} integer encoded in more bytes than necessary (strict decode)`);return n}function Qn(e,r,t){Xo(e,r,8);const n=e[r]*16777216+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3],o=e[r+4]*16777216+(e[r+5]<<16)+(e[r+6]<<8)+e[r+7],i=(BigInt(n)<<BigInt(32))+BigInt(o);if(t.strict===!0&&i<Be[3])throw new Error(`${K} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(t.allowBigInt===!0)return i;throw new Error(`${K} integers outside of the safe integer range are not supported`)}function hC(e,r,t,n){return new j(O.uint,Kn(e,r+1,n),2)}function pC(e,r,t,n){return new j(O.uint,Yn(e,r+1,n),3)}function vC(e,r,t,n){return new j(O.uint,Zn(e,r+1,n),5)}function _C(e,r,t,n){return new j(O.uint,Qn(e,r+1,n),9)}function Xn(e,r){return St(e,0,r.value)}function St(e,r,t){if(t<Be[0]){const n=Number(t);e.push([r|n])}else if(t<Be[1]){const n=Number(t);e.push([r|24,n])}else if(t<Be[2]){const n=Number(t);e.push([r|25,n>>>8,n&255])}else if(t<Be[3]){const n=Number(t);e.push([r|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{const n=BigInt(t);if(n<Be[4]){const o=[r|27,0,0,0,0,0,0,0];let i=Number(n&BigInt(4294967295)),a=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=i&255,i=i>>8,o[7]=i&255,i=i>>8,o[6]=i&255,i=i>>8,o[5]=i&255,o[4]=a&255,a=a>>8,o[3]=a&255,a=a>>8,o[2]=a&255,a=a>>8,o[1]=a&255,e.push(o)}else throw new Error(`${K} encountered BigInt larger than allowable range`)}}Xn.encodedSize=function(r){return St.encodedSize(r.value)};St.encodedSize=function(r){return r<Be[0]?1:r<Be[1]?2:r<Be[2]?3:r<Be[3]?5:9};Xn.compareTokens=function(r,t){return r.value<t.value?-1:r.value>t.value?1:0};function yC(e,r,t,n){return new j(O.negint,-1-Kn(e,r+1,n),2)}function bC(e,r,t,n){return new j(O.negint,-1-Yn(e,r+1,n),3)}function mC(e,r,t,n){return new j(O.negint,-1-Zn(e,r+1,n),5)}const d_=BigInt(-1),tw=BigInt(1);function gC(e,r,t,n){const o=Qn(e,r+1,n);if(typeof o!="bigint"){const i=-1-o;if(i>=Number.MIN_SAFE_INTEGER)return new j(O.negint,i,9)}if(n.allowBigInt!==!0)throw new Error(`${K} integers outside of the safe integer range are not supported`);return new j(O.negint,d_-BigInt(o),9)}function h_(e,r){const t=r.value,n=typeof t=="bigint"?t*d_-tw:t*-1-1;St(e,r.type.majorEncoded,n)}h_.encodedSize=function(r){const t=r.value,n=typeof t=="bigint"?t*d_-tw:t*-1-1;return n<Be[0]?1:n<Be[1]?2:n<Be[2]?3:n<Be[3]?5:9};h_.compareTokens=function(r,t){return r.value<t.value?1:r.value>t.value?-1:0};function ka(e,r,t,n){Xo(e,r,t+n);const o=f_(e,r+t,r+t+n);return new j(O.bytes,o,t+n)}function wC(e,r,t,n){return ka(e,r,1,t)}function OC(e,r,t,n){return ka(e,r,2,Kn(e,r+1,n))}function EC(e,r,t,n){return ka(e,r,3,Yn(e,r+1,n))}function SC(e,r,t,n){return ka(e,r,5,Zn(e,r+1,n))}function PC(e,r,t,n){const o=Qn(e,r+1,n);if(typeof o=="bigint")throw new Error(`${K} 64-bit integer bytes lengths not supported`);return ka(e,r,9,o)}function Vc(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===O.string?X0(e.value):e.value),e.encodedBytes}function Pl(e,r){const t=Vc(r);St(e,r.type.majorEncoded,t.length),e.push(t)}Pl.encodedSize=function(r){const t=Vc(r);return St.encodedSize(t.length)+t.length};Pl.compareTokens=function(r,t){return TC(Vc(r),Vc(t))};function TC(e,r){return e.length<r.length?-1:e.length>r.length?1:fC(e,r)}function Ma(e,r,t,n,o){const i=t+n;Xo(e,r,i);const a=new j(O.string,sC(e,r+t,r+i),i);return o.retainStringBytes===!0&&(a.byteValue=f_(e,r+t,r+i)),a}function CC(e,r,t,n){return Ma(e,r,1,t,n)}function AC(e,r,t,n){return Ma(e,r,2,Kn(e,r+1,n),n)}function IC(e,r,t,n){return Ma(e,r,3,Yn(e,r+1,n),n)}function RC(e,r,t,n){return Ma(e,r,5,Zn(e,r+1,n),n)}function $C(e,r,t,n){const o=Qn(e,r+1,n);if(typeof o=="bigint")throw new Error(`${K} 64-bit integer string lengths not supported`);return Ma(e,r,9,o,n)}const jC=Pl;function Jo(e,r,t,n){return new j(O.array,n,t)}function NC(e,r,t,n){return Jo(e,r,1,t)}function kC(e,r,t,n){return Jo(e,r,2,Kn(e,r+1,n))}function MC(e,r,t,n){return Jo(e,r,3,Yn(e,r+1,n))}function DC(e,r,t,n){return Jo(e,r,5,Zn(e,r+1,n))}function LC(e,r,t,n){const o=Qn(e,r+1,n);if(typeof o=="bigint")throw new Error(`${K} 64-bit integer array lengths not supported`);return Jo(e,r,9,o)}function UC(e,r,t,n){if(n.allowIndefinite===!1)throw new Error(`${K} indefinite length items not allowed`);return Jo(e,r,1,1/0)}function p_(e,r){St(e,O.array.majorEncoded,r.value)}p_.compareTokens=Xn.compareTokens;p_.encodedSize=function(r){return St.encodedSize(r.value)};function ei(e,r,t,n){return new j(O.map,n,t)}function FC(e,r,t,n){return ei(e,r,1,t)}function BC(e,r,t,n){return ei(e,r,2,Kn(e,r+1,n))}function xC(e,r,t,n){return ei(e,r,3,Yn(e,r+1,n))}function VC(e,r,t,n){return ei(e,r,5,Zn(e,r+1,n))}function WC(e,r,t,n){const o=Qn(e,r+1,n);if(typeof o=="bigint")throw new Error(`${K} 64-bit integer map lengths not supported`);return ei(e,r,9,o)}function zC(e,r,t,n){if(n.allowIndefinite===!1)throw new Error(`${K} indefinite length items not allowed`);return ei(e,r,1,1/0)}function v_(e,r){St(e,O.map.majorEncoded,r.value)}v_.compareTokens=Xn.compareTokens;v_.encodedSize=function(r){return St.encodedSize(r.value)};function HC(e,r,t,n){return new j(O.tag,t,1)}function qC(e,r,t,n){return new j(O.tag,Kn(e,r+1,n),2)}function GC(e,r,t,n){return new j(O.tag,Yn(e,r+1,n),3)}function KC(e,r,t,n){return new j(O.tag,Zn(e,r+1,n),5)}function YC(e,r,t,n){return new j(O.tag,Qn(e,r+1,n),9)}function __(e,r){St(e,O.tag.majorEncoded,r.value)}__.compareTokens=Xn.compareTokens;__.encodedSize=function(r){return St.encodedSize(r.value)};const ZC=20,QC=21,XC=22,JC=23;function eA(e,r,t,n){if(n.allowUndefined===!1)throw new Error(`${K} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new j(O.null,null,1):new j(O.undefined,void 0,1)}function tA(e,r,t,n){if(n.allowIndefinite===!1)throw new Error(`${K} indefinite length items not allowed`);return new j(O.break,void 0,1)}function y_(e,r,t){if(t){if(t.allowNaN===!1&&Number.isNaN(e))throw new Error(`${K} NaN values are not supported`);if(t.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${K} Infinity values are not supported`)}return new j(O.float,e,r)}function rA(e,r,t,n){return y_(m_(e,r+1),3,n)}function nA(e,r,t,n){return y_(g_(e,r+1),5,n)}function oA(e,r,t,n){return y_(iw(e,r+1),9,n)}function b_(e,r,t){const n=r.value;if(n===!1)e.push([O.float.majorEncoded|ZC]);else if(n===!0)e.push([O.float.majorEncoded|QC]);else if(n===null)e.push([O.float.majorEncoded|XC]);else if(n===void 0)e.push([O.float.majorEncoded|JC]);else{let o,i=!1;(!t||t.float64!==!0)&&(nw(n),o=m_(Nt,1),n===o||Number.isNaN(n)?(Nt[0]=249,e.push(Nt.slice(0,3)),i=!0):(ow(n),o=g_(Nt,1),n===o&&(Nt[0]=250,e.push(Nt.slice(0,5)),i=!0))),i||(iA(n),o=iw(Nt,1),Nt[0]=251,e.push(Nt.slice(0,9)))}}b_.encodedSize=function(r,t){const n=r.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){nw(n);let o=m_(Nt,1);if(n===o||Number.isNaN(n))return 3;if(ow(n),o=g_(Nt,1),n===o)return 5}return 9};const rw=new ArrayBuffer(9),wt=new DataView(rw,1),Nt=new Uint8Array(rw,0);function nw(e){if(e===1/0)wt.setUint16(0,31744,!1);else if(e===-1/0)wt.setUint16(0,64512,!1);else if(Number.isNaN(e))wt.setUint16(0,32256,!1);else{wt.setFloat32(0,e);const r=wt.getUint32(0),t=(r&2139095040)>>23,n=r&8388607;if(t===255)wt.setUint16(0,31744,!1);else if(t===0)wt.setUint16(0,(e&2147483648)>>16|n>>13,!1);else{const o=t-127;o<-24?wt.setUint16(0,0):o<-14?wt.setUint16(0,(r&2147483648)>>16|1<<24+o,!1):wt.setUint16(0,(r&2147483648)>>16|o+15<<10|n>>13,!1)}}}function m_(e,r){if(e.length-r<2)throw new Error(`${K} not enough data for float16`);const t=(e[r]<<8)+e[r+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;const n=t>>10&31,o=t&1023;let i;return n===0?i=o*2**-24:n!==31?i=(o+1024)*2**(n-25):i=o===0?1/0:NaN,t&32768?-i:i}function ow(e){wt.setFloat32(0,e,!1)}function g_(e,r){if(e.length-r<4)throw new Error(`${K} not enough data for float32`);const t=(e.byteOffset||0)+r;return new DataView(e.buffer,t,4).getFloat32(0,!1)}function iA(e){wt.setFloat64(0,e,!1)}function iw(e,r){if(e.length-r<8)throw new Error(`${K} not enough data for float64`);const t=(e.byteOffset||0)+r;return new DataView(e.buffer,t,8).getFloat64(0,!1)}b_.compareTokens=Xn.compareTokens;function ce(e,r,t){throw new Error(`${K} encountered invalid minor (${t}) for major ${e[r]>>>5}`)}function Tl(e){return()=>{throw new Error(`${K} ${e}`)}}const N=[];for(let e=0;e<=23;e++)N[e]=ce;N[24]=hC;N[25]=pC;N[26]=vC;N[27]=_C;N[28]=ce;N[29]=ce;N[30]=ce;N[31]=ce;for(let e=32;e<=55;e++)N[e]=ce;N[56]=yC;N[57]=bC;N[58]=mC;N[59]=gC;N[60]=ce;N[61]=ce;N[62]=ce;N[63]=ce;for(let e=64;e<=87;e++)N[e]=wC;N[88]=OC;N[89]=EC;N[90]=SC;N[91]=PC;N[92]=ce;N[93]=ce;N[94]=ce;N[95]=Tl("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)N[e]=CC;N[120]=AC;N[121]=IC;N[122]=RC;N[123]=$C;N[124]=ce;N[125]=ce;N[126]=ce;N[127]=Tl("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)N[e]=NC;N[152]=kC;N[153]=MC;N[154]=DC;N[155]=LC;N[156]=ce;N[157]=ce;N[158]=ce;N[159]=UC;for(let e=160;e<=183;e++)N[e]=FC;N[184]=BC;N[185]=xC;N[186]=VC;N[187]=WC;N[188]=ce;N[189]=ce;N[190]=ce;N[191]=zC;for(let e=192;e<=215;e++)N[e]=HC;N[216]=qC;N[217]=GC;N[218]=KC;N[219]=YC;N[220]=ce;N[221]=ce;N[222]=ce;N[223]=ce;for(let e=224;e<=243;e++)N[e]=Tl("simple values are not supported");N[244]=ce;N[245]=ce;N[246]=ce;N[247]=eA;N[248]=Tl("simple values are not supported");N[249]=rA;N[250]=nA;N[251]=oA;N[252]=ce;N[253]=ce;N[254]=ce;N[255]=tA;const rr=[];for(let e=0;e<24;e++)rr[e]=new j(O.uint,e,1);for(let e=-1;e>=-24;e--)rr[31-e]=new j(O.negint,e,1);rr[64]=new j(O.bytes,new Uint8Array(0),1);rr[96]=new j(O.string,"",1);rr[128]=new j(O.array,0,1);rr[160]=new j(O.map,0,1);rr[244]=new j(O.false,!1,1);rr[245]=new j(O.true,!0,1);rr[246]=new j(O.null,null,1);function aA(e){switch(e.type){case O.false:return sr([244]);case O.true:return sr([245]);case O.null:return sr([246]);case O.bytes:return e.value.length?void 0:sr([64]);case O.string:return e.value===""?sr([96]):void 0;case O.array:return e.value===0?sr([128]):void 0;case O.map:return e.value===0?sr([160]):void 0;case O.uint:return e.value<24?sr([Number(e.value)]):void 0;case O.negint:if(e.value>=-24)return sr([31-Number(e.value)])}}const uA={float64:!1,mapSorter:lA,quickEncodeToken:aA};function sA(){const e=[];return e[O.uint.major]=Xn,e[O.negint.major]=h_,e[O.bytes.major]=Pl,e[O.string.major]=jC,e[O.array.major]=p_,e[O.map.major]=v_,e[O.tag.major]=__,e[O.float.major]=b_,e}const aw=sA(),Yh=new ew;class Wc{constructor(r,t){this.obj=r,this.parent=t}includes(r){let t=this;do if(t.obj===r)return!0;while(t=t.parent);return!1}static createCheck(r,t){if(r&&r.includes(t))throw new Error(`${jn} object contains circular references`);return new Wc(t,r)}}const Cr={null:new j(O.null,null),undefined:new j(O.undefined,void 0),true:new j(O.true,!0),false:new j(O.false,!1),emptyArray:new j(O.array,0),emptyMap:new j(O.map,0)},Lr={number(e,r,t,n){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new j(O.float,e):e>=0?new j(O.uint,e):new j(O.negint,e)},bigint(e,r,t,n){return e>=BigInt(0)?new j(O.uint,e):new j(O.negint,e)},Uint8Array(e,r,t,n){return new j(O.bytes,e)},string(e,r,t,n){return new j(O.string,e)},boolean(e,r,t,n){return e?Cr.true:Cr.false},null(e,r,t,n){return Cr.null},undefined(e,r,t,n){return Cr.undefined},ArrayBuffer(e,r,t,n){return new j(O.bytes,new Uint8Array(e))},DataView(e,r,t,n){return new j(O.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,r,t,n){if(!e.length)return t.addBreakTokens===!0?[Cr.emptyArray,new j(O.break)]:Cr.emptyArray;n=Wc.createCheck(n,e);const o=[];let i=0;for(const a of e)o[i++]=jc(a,t,n);return t.addBreakTokens?[new j(O.array,e.length),o,new j(O.break)]:[new j(O.array,e.length),o]},Object(e,r,t,n){const o=r!=="Object",i=o?e.keys():Object.keys(e),a=o?e.size:i.length;if(!a)return t.addBreakTokens===!0?[Cr.emptyMap,new j(O.break)]:Cr.emptyMap;n=Wc.createCheck(n,e);const s=[];let c=0;for(const u of i)s[c++]=[jc(u,t,n),jc(o?e.get(u):e[u],t,n)];return cA(s,t),t.addBreakTokens?[new j(O.map,a),s,new j(O.break)]:[new j(O.map,a),s]}};Lr.Map=Lr.Object;Lr.Buffer=Lr.Uint8Array;for(const e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Lr[`${e}Array`]=Lr.DataView;function jc(e,r={},t){const n=nC(e),o=r&&r.typeEncoders&&r.typeEncoders[n]||Lr[n];if(typeof o=="function"){const a=o(e,n,r,t);if(a!=null)return a}const i=Lr[n];if(!i)throw new Error(`${jn} unsupported type: ${n}`);return i(e,n,r,t)}function cA(e,r){r.mapSorter&&e.sort(r.mapSorter)}function lA(e,r){const t=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(r[0])?r[0][0]:r[0];if(t.type!==n.type)return t.type.compare(n.type);const o=t.type.major,i=aw[o].compareTokens(t,n);return i===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),i}function uw(e,r,t,n){if(Array.isArray(r))for(const o of r)uw(e,o,t,n);else t[r.type.major](e,r,n)}function sw(e,r,t){const n=jc(e,t);if(!Array.isArray(n)&&t.quickEncodeToken){const o=t.quickEncodeToken(n);if(o)return o;const i=r[n.type.major];if(i.encodedSize){const a=i.encodedSize(n,t),s=new ew(a);if(i(s,n,t),s.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return l_(s.chunks[0])}}return Yh.reset(),uw(Yh,n,r,t),Yh.toBytes(!0)}function fA(e,r){return r=Object.assign({},uA,r),sw(e,aw,r)}const dA={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class hA{constructor(r,t={}){this._pos=0,this.data=r,this.options=t}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const r=this.data[this._pos];let t=rr[r];if(t===void 0){const n=N[r];if(!n)throw new Error(`${K} no decoder for major type ${r>>>5} (byte 0x${r.toString(16).padStart(2,"0")})`);const o=r&31;t=n(this.data,this._pos,o,this.options)}return this._pos+=t.encodedLength,t}}const Oa=Symbol.for("DONE"),Cl=Symbol.for("BREAK");function pA(e,r,t){const n=[];for(let o=0;o<e.value;o++){const i=Ea(r,t);if(i===Cl){if(e.value===1/0)break;throw new Error(`${K} got unexpected break to lengthed array`)}if(i===Oa)throw new Error(`${K} found array but not enough entries (got ${o}, expected ${e.value})`);n[o]=i}return n}function vA(e,r,t){const n=t.useMaps===!0,o=n?void 0:{},i=n?new Map:void 0;for(let a=0;a<e.value;a++){const s=Ea(r,t);if(s===Cl){if(e.value===1/0)break;throw new Error(`${K} got unexpected break to lengthed map`)}if(s===Oa)throw new Error(`${K} found map but not enough entries (got ${a} [no key], expected ${e.value})`);if(n!==!0&&typeof s!="string")throw new Error(`${K} non-string keys not supported (got ${typeof s})`);if(t.rejectDuplicateMapKeys===!0&&(n&&i.has(s)||!n&&s in o))throw new Error(`${K} found repeat map key "${s}"`);const c=Ea(r,t);if(c===Oa)throw new Error(`${K} found map but not enough entries (got ${a} [no value], expected ${e.value})`);n?i.set(s,c):o[s]=c}return n?i:o}function Ea(e,r){if(e.done())return Oa;const t=e.next();if(t.type===O.break)return Cl;if(t.type.terminal)return t.value;if(t.type===O.array)return pA(t,e,r);if(t.type===O.map)return vA(t,e,r);if(t.type===O.tag){if(r.tags&&typeof r.tags[t.value]=="function"){const n=Ea(e,r);return r.tags[t.value](n)}throw new Error(`${K} tag not supported (${t.value})`)}throw new Error("unsupported")}function _A(e,r){if(!(e instanceof Uint8Array))throw new Error(`${K} data to decode must be a Uint8Array`);r=Object.assign({},dA,r);const t=r.tokenizer||new hA(e,r),n=Ea(t,r);if(n===Oa)throw new Error(`${K} did not find any content to decode`);if(n===Cl)throw new Error(`${K} got unexpected break`);return[n,e.subarray(t.pos())]}function cw(e,r){const[t,n]=_A(e,r);if(n.length>0)throw new Error(`${K} too many terminals, data makes no sense`);return t}const yA=new Uint8Array(0);function sie(e){const r=e.match(/../g);return r!=null?new Uint8Array(r.map(t=>parseInt(t,16))):yA}function bA(e,r){if(e===r)return!0;if(e.byteLength!==r.byteLength)return!1;for(let t=0;t<e.byteLength;t++)if(e[t]!==r[t])return!1;return!0}function ti(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function mA(e){return new TextEncoder().encode(e)}function gA(e){return new TextDecoder().decode(e)}function wA(e,r){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),a=i.charCodeAt(0);if(t[a]!==255)throw new TypeError(i+" is ambiguous");t[a]=o}var s=e.length,c=e.charAt(0),u=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function d(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var y=0,_=0,b=0,w=v.length;b!==w&&v[b]===0;)b++,y++;for(var S=(w-b)*l+1>>>0,E=new Uint8Array(S);b!==w;){for(var P=v[b],C=0,T=S-1;(P!==0||C<_)&&T!==-1;T--,C++)P+=256*E[T]>>>0,E[T]=P%s>>>0,P=P/s>>>0;if(P!==0)throw new Error("Non-zero carry");_=C,b++}for(var I=S-_;I!==S&&E[I]===0;)I++;for(var $=c.repeat(y);I<S;++I)$+=e.charAt(E[I]);return $}function h(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var y=0;if(v[y]!==" "){for(var _=0,b=0;v[y]===c;)_++,y++;for(var w=(v.length-y)*u+1>>>0,S=new Uint8Array(w);v[y];){var E=t[v.charCodeAt(y)];if(E===255)return;for(var P=0,C=w-1;(E!==0||P<b)&&C!==-1;C--,P++)E+=s*S[C]>>>0,S[C]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");b=P,y++}if(v[y]!==" "){for(var T=w-b;T!==w&&S[T]===0;)T++;for(var I=new Uint8Array(_+(w-T)),$=_;T!==w;)I[$++]=S[T++];return I}}}function p(v){var y=h(v);if(y)return y;throw new Error(`Non-${r} character`)}return{encode:d,decodeUnsafe:h,decode:p}}var OA=wA,EA=OA;let SA=class{constructor(r,t,n){g(this,"name");g(this,"prefix");g(this,"baseEncode");this.name=r,this.prefix=t,this.baseEncode=n}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}},PA=class{constructor(r,t,n){g(this,"name");g(this,"prefix");g(this,"baseDecode");g(this,"prefixCodePoint");this.name=r,this.prefix=t;const o=t.codePointAt(0);if(o===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=o,this.baseDecode=n}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return lw(this,r)}},TA=class{constructor(r){g(this,"decoders");this.decoders=r}or(r){return lw(this,r)}decode(r){const t=r[0],n=this.decoders[t];if(n!=null)return n.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function lw(e,r){return new TA({...e.decoders??{[e.prefix]:e},...r.decoders??{[r.prefix]:r}})}let CA=class{constructor(r,t,n,o){g(this,"name");g(this,"prefix");g(this,"baseEncode");g(this,"baseDecode");g(this,"encoder");g(this,"decoder");this.name=r,this.prefix=t,this.baseEncode=n,this.baseDecode=o,this.encoder=new SA(r,t,n),this.decoder=new PA(r,t,o)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}};function Al({name:e,prefix:r,encode:t,decode:n}){return new CA(e,r,t,n)}function Da({name:e,prefix:r,alphabet:t}){const{encode:n,decode:o}=EA(t,e);return Al({prefix:r,name:e,encode:n,decode:i=>ti(o(i))})}function AA(e,r,t,n){let o=e.length;for(;e[o-1]==="=";)--o;const i=new Uint8Array(o*t/8|0);let a=0,s=0,c=0;for(let u=0;u<o;++u){const l=r[e[u]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);s=s<<t|l,a+=t,a>=8&&(a-=8,i[c++]=255&s>>a)}if(a>=t||255&s<<8-a)throw new SyntaxError("Unexpected end of data");return i}function IA(e,r,t){const n=r[r.length-1]==="=",o=(1<<t)-1;let i="",a=0,s=0;for(let c=0;c<e.length;++c)for(s=s<<8|e[c],a+=8;a>t;)a-=t,i+=r[o&s>>a];if(a!==0&&(i+=r[o&s<<t-a]),n)for(;i.length*t&7;)i+="=";return i}function RA(e){const r={};for(let t=0;t<e.length;++t)r[e[t]]=t;return r}function ze({name:e,prefix:r,bitsPerChar:t,alphabet:n}){const o=RA(n);return Al({prefix:r,name:e,encode(i){return IA(i,n,t)},decode(i){return AA(i,o,t,e)}})}const Nn=ze({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),$A=ze({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),jA=ze({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),NA=ze({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),kA=ze({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),MA=ze({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),DA=ze({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),LA=ze({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),UA=ze({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),FA=Object.freeze(Object.defineProperty({__proto__:null,base32:Nn,base32hex:kA,base32hexpad:DA,base32hexpadupper:LA,base32hexupper:MA,base32pad:jA,base32padupper:NA,base32upper:$A,base32z:UA},Symbol.toStringTag,{value:"Module"})),Nc=Da({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),BA=Da({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),xA=Object.freeze(Object.defineProperty({__proto__:null,base36:Nc,base36upper:BA},Symbol.toStringTag,{value:"Module"})),Fe=Da({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),VA=Da({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),WA=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Fe,base58flickr:VA},Symbol.toStringTag,{value:"Module"}));var zA=fw,sb=128,HA=-128,qA=Math.pow(2,31);function fw(e,r,t){r=r||[],t=t||0;for(var n=t;e>=qA;)r[t++]=e&255|sb,e/=128;for(;e&HA;)r[t++]=e&255|sb,e>>>=7;return r[t]=e|0,fw.bytes=t-n+1,r}var GA=Jp,KA=128,cb=127;function Jp(e,n){var t=0,n=n||0,o=0,i=n,a,s=e.length;do{if(i>=s)throw Jp.bytes=0,new RangeError("Could not decode varint");a=e[i++],t+=o<28?(a&cb)<<o:(a&cb)*Math.pow(2,o),o+=7}while(a>=KA);return Jp.bytes=i-n,t}var YA=Math.pow(2,7),ZA=Math.pow(2,14),QA=Math.pow(2,21),XA=Math.pow(2,28),JA=Math.pow(2,35),eI=Math.pow(2,42),tI=Math.pow(2,49),rI=Math.pow(2,56),nI=Math.pow(2,63),oI=function(e){return e<YA?1:e<ZA?2:e<QA?3:e<XA?4:e<JA?5:e<eI?6:e<tI?7:e<rI?8:e<nI?9:10},iI={encode:zA,decode:GA,encodingLength:oI},zc=iI;function ev(e,r=0){return[zc.decode(e,r),zc.decode.bytes]}function Hc(e,r,t=0){return zc.encode(e,r,t),r}function qc(e){return zc.encodingLength(e)}function Sa(e,r){const t=r.byteLength,n=qc(e),o=n+qc(t),i=new Uint8Array(o+t);return Hc(e,i,0),Hc(t,i,n),i.set(r,o),new w_(e,t,r,i)}function dw(e){const r=ti(e),[t,n]=ev(r),[o,i]=ev(r.subarray(n)),a=r.subarray(n+i);if(a.byteLength!==o)throw new Error("Incorrect length");return new w_(t,o,a,r)}function aI(e,r){if(e===r)return!0;{const t=r;return e.code===t.code&&e.size===t.size&&t.bytes instanceof Uint8Array&&bA(e.bytes,t.bytes)}}let w_=class{constructor(r,t,n,o){g(this,"code");g(this,"size");g(this,"digest");g(this,"bytes");this.code=r,this.size=t,this.digest=n,this.bytes=o}};function lb(e,r){const{bytes:t,version:n}=e;switch(n){case 0:return sI(t,tv(e),r??Fe.encoder);default:return cI(t,tv(e),r??Nn.encoder)}}const fb=new WeakMap;function tv(e){const r=fb.get(e);if(r==null){const t=new Map;return fb.set(e,t),t}return r}var V0;let Z=class Ge{constructor(r,t,n,o){g(this,"code");g(this,"version");g(this,"multihash");g(this,"bytes");g(this,"/");g(this,V0,"CID");this.code=t,this.version=r,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:r,multihash:t}=this;if(r!==Bi)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==lI)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ge.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:r,digest:t}=this.multihash,n=Sa(r,t);return Ge.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(r){return Ge.equals(this,r)}static equals(r,t){const n=t;return n!=null&&r.code===n.code&&r.version===n.version&&aI(r.multihash,n.multihash)}toString(r){return lb(this,r)}toJSON(){return{"/":lb(this)}}link(){return this}[(V0=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(r){if(r==null)return null;const t=r;if(t instanceof Ge)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){const{version:n,code:o,multihash:i,bytes:a}=t;return new Ge(n,o,i,a??db(n,o,i.bytes))}else if(t[fI]===!0){const{version:n,multihash:o,code:i}=t,a=dw(o);return Ge.create(n,i,a)}else return null}static create(r,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(r){case 0:{if(t!==Bi)throw new Error(`Version 0 CID must use dag-pb (code: ${Bi}) block encoding`);return new Ge(r,t,n,n.bytes)}case 1:{const o=db(r,t,n.bytes);return new Ge(r,t,n,o)}default:throw new Error("Invalid version")}}static createV0(r){return Ge.create(0,Bi,r)}static createV1(r,t){return Ge.create(1,r,t)}static decode(r){const[t,n]=Ge.decodeFirst(r);if(n.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(r){const t=Ge.inspectBytes(r),n=t.size-t.multihashSize,o=ti(r.subarray(n,n+t.multihashSize));if(o.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=o.subarray(t.multihashSize-t.digestSize),a=new w_(t.multihashCode,t.digestSize,i,o);return[t.version===0?Ge.createV0(a):Ge.createV1(t.codec,a),r.subarray(t.size)]}static inspectBytes(r){let t=0;const n=()=>{const[d,h]=ev(r.subarray(t));return t+=h,d};let o=n(),i=Bi;if(o===18?(o=0,t=0):i=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const a=t,s=n(),c=n(),u=t+c,l=u-a;return{version:o,codec:i,multihashCode:s,digestSize:c,multihashSize:l,size:u}}static parse(r,t){const[n,o]=uI(r,t),i=Ge.decode(o);if(i.version===0&&r[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return tv(i).set(n,r),i}};function uI(e,r){switch(e[0]){case"Q":{const t=r??Fe;return[Fe.prefix,t.decode(`${Fe.prefix}${e}`)]}case Fe.prefix:{const t=r??Fe;return[Fe.prefix,t.decode(e)]}case Nn.prefix:{const t=r??Nn;return[Nn.prefix,t.decode(e)]}case Nc.prefix:{const t=r??Nc;return[Nc.prefix,t.decode(e)]}default:{if(r==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[e[0],r.decode(e)]}}}function sI(e,r,t){const{prefix:n}=t;if(n!==Fe.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const o=r.get(n);if(o==null){const i=t.encode(e).slice(1);return r.set(n,i),i}else return o}function cI(e,r,t){const{prefix:n}=t,o=r.get(n);if(o==null){const i=t.encode(e);return r.set(n,i),i}else return o}const Bi=112,lI=18;function db(e,r,t){const n=qc(e),o=n+qc(r),i=new Uint8Array(o+t.byteLength);return Hc(e,i,0),Hc(r,i,n),i.set(t,o),i}const fI=Symbol.for("@ipld/js-cid/CID"),hw=42;function pw(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function dI(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const r=Z.asCID(e);if(!r)return null;const t=new Uint8Array(r.bytes.byteLength+1);return t.set(r.bytes,1),[new j(O.tag,hw),new j(O.bytes,t)]}function hI(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function pI(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const rv={float64:!0,typeEncoders:{Object:dI,undefined:hI,number:pI}},vI={...rv,typeEncoders:{...rv.typeEncoders}};function _I(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Z.decode(e.subarray(1))}const Gc={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Gc.tags[hw]=_I;const yI={...Gc,tags:Gc.tags.slice()},bI="dag-cbor",mI=113,vw=e=>fA(e,rv),_w=e=>cw(pw(e),Gc),gI=Object.freeze(Object.defineProperty({__proto__:null,code:mI,decode:_w,decodeOptions:yI,encode:vw,encodeOptions:vI,name:bI,toByteView:pw},Symbol.toStringTag,{value:"Module"}));var nv={},hr={},Y={},se={},Bt={},pr={};Object.defineProperty(pr,"__esModule",{value:!0});pr.getBrokenObjectReason=pr.isBrokenObject=pr.createBrokenObject=void 0;var yw="__isBrokenObject__",bw="__reason__";function wI(e,r){r===void 0&&(r={});var t=function(){throw e};return new Proxy(r,{get:function(n,o){if(o===yw)return!0;if(o===bw)return e;if(o==="toJSON")return;t()},set:t,apply:t,construct:t,defineProperty:t,deleteProperty:t,getOwnPropertyDescriptor:t,getPrototypeOf:t,has:t,isExtensible:t,ownKeys:t,preventExtensions:t,setPrototypeOf:t})}pr.createBrokenObject=wI;function OI(e){return e!==null&&typeof e=="object"&&e[yw]===!0}pr.isBrokenObject=OI;function EI(e){return e[bw]}pr.getBrokenObjectReason=EI;Object.defineProperty(Bt,"__esModule",{value:!0});Bt.stringify=void 0;var hb=pr;function SI(e,r){return JSON.stringify(e,function(t,n){return(0,hb.isBrokenObject)(n)?{__isBrokenObject__:!0,__reason__:(0,hb.getBrokenObjectReason)(n)}:typeof n=="bigint"?"".concat(n,"n"):(r==null?void 0:r.sortedElements)===!0&&typeof n=="object"&&!Array.isArray(n)?Object.keys(n).sort().reduce(function(o,i){return o[i]=n[i],o},{}):(r==null?void 0:r.useCustomToString)===!0&&typeof n=="object"&&!Array.isArray(n)&&typeof n.toString=="function"&&n.toString!==Object.prototype.toString?n==null?void 0:n.toString():n})}Bt.stringify=SI;var O_={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.rawPolyfilledDiagnosticRecord=void 0,e.rawPolyfilledDiagnosticRecord={OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"},Object.freeze(e.rawPolyfilledDiagnosticRecord)})(O_);var mw=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),PI=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),TI=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),CI=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&PI(r,e,t);return TI(r,e),r};Object.defineProperty(se,"__esModule",{value:!0});se.PROTOCOL_ERROR=se.SESSION_EXPIRED=se.SERVICE_UNAVAILABLE=se.GQLError=se.Neo4jError=se.isRetriableError=se.newGQLError=se.newError=void 0;var AI=CI(Bt),gw=O_,ww={DATABASE_ERROR:"DATABASE_ERROR",CLIENT_ERROR:"CLIENT_ERROR",TRANSIENT_ERROR:"TRANSIENT_ERROR",UNKNOWN:"UNKNOWN"};Object.freeze(ww);var II=Object.values(ww),Ow="ServiceUnavailable";se.SERVICE_UNAVAILABLE=Ow;var Ew="SessionExpired";se.SESSION_EXPIRED=Ew;var RI="ProtocolError";se.PROTOCOL_ERROR=RI;var $I="N/A",E_=function(e){mw(r,e);function r(t,n,o,i,a){var s=this,c;return s=e.call(this,t,a!=null?{cause:a}:void 0)||this,s.constructor=r,s.__proto__=r.prototype,s.cause=a??void 0,s.gqlStatus=n,s.gqlStatusDescription=o,s.diagnosticRecord=i,s.classification=UI(s.diagnosticRecord),s.rawClassification=(c=i==null?void 0:i._classification)!==null&&c!==void 0?c:void 0,s.name="GQLError",s}return Object.defineProperty(r.prototype,"diagnosticRecordAsJsonString",{get:function(){return AI.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),r}(Error);se.GQLError=E_;var S_=function(e){mw(r,e);function r(t,n,o,i,a,s){var c=e.call(this,t,o,i,a,s)||this;return c.constructor=r,c.__proto__=r.prototype,c.code=n,c.name="Neo4jError",c.retriable=MI(n),c}return r.isRetriable=function(t){return t!=null&&t instanceof r&&t.retriable},r}(E_);se.Neo4jError=S_;function jI(e,r,t,n,o,i){return new S_(e,r??$I,n??"50N42",o??"error: general processing exception - unexpected error. "+e,i??gw.rawPolyfilledDiagnosticRecord,t)}se.newError=jI;function NI(e,r,t,n,o){return new E_(e,t??"50N42",n??"error: general processing exception - unexpected error. "+e,o??gw.rawPolyfilledDiagnosticRecord,r)}se.newGQLError=NI;var kI=S_.isRetriable;se.isRetriableError=kI;function MI(e){return e===Ow||e===Ew||LI(e)||DI(e)}function DI(e){return(e==null?void 0:e.includes("TransientError"))===!0}function LI(e){return e==="Neo.ClientError.Security.AuthorizationExpired"}function UI(e){return e===void 0||e._classification===void 0?"UNKNOWN":II.includes(e._classification)?e==null?void 0:e._classification:"UNKNOWN"}var xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.toString=xe.toNumber=xe.inSafeRange=xe.isInt=xe.int=void 0;var xi=se,pb=new Map,Zr=function(){function e(r,t){this.low=r??0,this.high=t??0}return e.prototype.inSafeRange=function(){return this.greaterThanOrEqual(e.MIN_SAFE_VALUE)&&this.lessThanOrEqual(e.MAX_SAFE_VALUE)},e.prototype.toInt=function(){return this.low},e.prototype.toNumber=function(){return this.high*Cn+(this.low>>>0)},e.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(Cn)+BigInt(this.low>>>0);var r=this.negate();return BigInt(-1)*(BigInt(r.high>>>0)*BigInt(Cn)+BigInt(r.low>>>0))},e.prototype.toNumberOrInfinity=function(){return this.lessThan(e.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(e.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},e.prototype.toString=function(r){if(r=r??10,r<2||r>36)throw RangeError("radix out of range: "+r.toString());if(this.isZero())return"0";var t;if(this.isNegative())if(this.equals(e.MIN_VALUE)){var n=e.fromNumber(r),o=this.div(n);return t=o.multiply(n).subtract(this),o.toString(r)+t.toInt().toString(r)}else return"-"+this.negate().toString(r);var i=e.fromNumber(Math.pow(r,6));t=this;for(var a="";;){var s=t.div(i),c=t.subtract(s.multiply(i)).toInt()>>>0,u=c.toString(r);if(t=s,t.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},e.prototype.valueOf=function(){return this.toBigInt()},e.prototype.getHighBits=function(){return this.high},e.prototype.getLowBits=function(){return this.low},e.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(e.MIN_VALUE)?64:this.negate().getNumBitsAbs();var r=this.high!==0?this.high:this.low,t=0;for(t=31;t>0&&!(r&1<<t);t--);return this.high!==0?t+33:t+1},e.prototype.isZero=function(){return this.high===0&&this.low===0},e.prototype.isNegative=function(){return this.high<0},e.prototype.isPositive=function(){return this.high>=0},e.prototype.isOdd=function(){return(this.low&1)===1},e.prototype.isEven=function(){return(this.low&1)===0},e.prototype.equals=function(r){var t=e.fromValue(r);return this.high===t.high&&this.low===t.low},e.prototype.notEquals=function(r){return!this.equals(r)},e.prototype.lessThan=function(r){return this.compare(r)<0},e.prototype.lessThanOrEqual=function(r){return this.compare(r)<=0},e.prototype.greaterThan=function(r){return this.compare(r)>0},e.prototype.greaterThanOrEqual=function(r){return this.compare(r)>=0},e.prototype.compare=function(r){var t=e.fromValue(r);if(this.equals(t))return 0;var n=this.isNegative(),o=t.isNegative();return n&&!o?-1:!n&&o?1:this.subtract(t).isNegative()?-1:1},e.prototype.negate=function(){return this.equals(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.add=function(r){var t=e.fromValue(r),n=this.high>>>16,o=this.high&65535,i=this.low>>>16,a=this.low&65535,s=t.high>>>16,c=t.high&65535,u=t.low>>>16,l=t.low&65535,d=0,h=0,p=0,v=0;return v+=a+l,p+=v>>>16,v&=65535,p+=i+u,h+=p>>>16,p&=65535,h+=o+c,d+=h>>>16,h&=65535,d+=n+s,d&=65535,e.fromBits(p<<16|v,d<<16|h)},e.prototype.subtract=function(r){var t=e.fromValue(r);return this.add(t.negate())},e.prototype.multiply=function(r){if(this.isZero())return e.ZERO;var t=e.fromValue(r);if(t.isZero())return e.ZERO;if(this.equals(e.MIN_VALUE))return t.isOdd()?e.MIN_VALUE:e.ZERO;if(t.equals(e.MIN_VALUE))return this.isOdd()?e.MIN_VALUE:e.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(yb)&&t.lessThan(yb))return e.fromNumber(this.toNumber()*t.toNumber());var n=this.high>>>16,o=this.high&65535,i=this.low>>>16,a=this.low&65535,s=t.high>>>16,c=t.high&65535,u=t.low>>>16,l=t.low&65535,d=0,h=0,p=0,v=0;return v+=a*l,p+=v>>>16,v&=65535,p+=i*l,h+=p>>>16,p&=65535,p+=a*u,h+=p>>>16,p&=65535,h+=o*l,d+=h>>>16,h&=65535,h+=i*u,d+=h>>>16,h&=65535,h+=a*c,d+=h>>>16,h&=65535,d+=n*l+o*u+i*c+a*s,d&=65535,e.fromBits(p<<16|v,d<<16|h)},e.prototype.div=function(r){var t=e.fromValue(r);if(t.isZero())throw(0,xi.newError)("division by zero");if(this.isZero())return e.ZERO;var n,o,i;if(this.equals(e.MIN_VALUE)){if(t.equals(e.ONE)||t.equals(e.NEG_ONE))return e.MIN_VALUE;if(t.equals(e.MIN_VALUE))return e.ONE;var a=this.shiftRight(1);return n=a.div(t).shiftLeft(1),n.equals(e.ZERO)?t.isNegative()?e.ONE:e.NEG_ONE:(o=this.subtract(t.multiply(n)),i=n.add(o.div(t)),i)}else if(t.equals(e.MIN_VALUE))return e.ZERO;if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();for(i=e.ZERO,o=this;o.greaterThanOrEqual(t);){n=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),c=s<=48?1:Math.pow(2,s-48),u=e.fromNumber(n),l=u.multiply(t);l.isNegative()||l.greaterThan(o);)n-=c,u=e.fromNumber(n),l=u.multiply(t);u.isZero()&&(u=e.ONE),i=i.add(u),o=o.subtract(l)}return i},e.prototype.modulo=function(r){var t=e.fromValue(r);return this.subtract(this.div(t).multiply(t))},e.prototype.not=function(){return e.fromBits(~this.low,~this.high)},e.prototype.and=function(r){var t=e.fromValue(r);return e.fromBits(this.low&t.low,this.high&t.high)},e.prototype.or=function(r){var t=e.fromValue(r);return e.fromBits(this.low|t.low,this.high|t.high)},e.prototype.xor=function(r){var t=e.fromValue(r);return e.fromBits(this.low^t.low,this.high^t.high)},e.prototype.shiftLeft=function(r){var t=e.toNumber(r);return(t&=63)===0?e.ZERO:t<32?e.fromBits(this.low<<t,this.high<<t|this.low>>>32-t):e.fromBits(0,this.low<<t-32)},e.prototype.shiftRight=function(r){var t=e.toNumber(r),n=e.toNumber(r);return(t&=63)===0?e.ZERO:n<32?e.fromBits(this.low>>>t|this.high<<32-t,this.high>>t):e.fromBits(this.high>>t-32,this.high>=0?0:-1)},e.isInteger=function(r){return(r==null?void 0:r.__isInteger__)===!0},e.fromInt=function(r){var t;if(r=r|0,r>=-128&&r<128&&(t=pb.get(r),t!=null))return t;var n=new e(r,r<0?-1:0);return r>=-128&&r<128&&pb.set(r,n),n},e.fromBits=function(r,t){return new e(r,t)},e.fromNumber=function(r){return isNaN(r)||!isFinite(r)?e.ZERO:r<=-_b?e.MIN_VALUE:r+1>=_b?e.MAX_VALUE:r<0?e.fromNumber(-r).negate():new e(r%Cn|0,r/Cn|0)},e.fromString=function(r,t,n){var o=n===void 0?{}:n,i=o.strictStringValidation;if(r.length===0)throw(0,xi.newError)("number format error: empty string");if(r==="NaN"||r==="Infinity"||r==="+Infinity"||r==="-Infinity")return e.ZERO;if(t=t??10,t<2||t>36)throw(0,xi.newError)("radix out of range: "+t.toString());var a;if((a=r.indexOf("-"))>0)throw(0,xi.newError)('number format error: interior "-" character: '+r);if(a===0)return e.fromString(r.substring(1),t).negate();for(var s=e.fromNumber(Math.pow(t,8)),c=e.ZERO,u=0;u<r.length;u+=8){var l=Math.min(8,r.length-u),d=r.substring(u,u+l),h=parseInt(d,t);if(i===!0&&!BI(d,h,t))throw(0,xi.newError)('number format error: "'.concat(d,'" is NaN in radix ').concat(t,": ").concat(r));if(l<8){var p=e.fromNumber(Math.pow(t,l));c=c.multiply(p).add(e.fromNumber(h))}else c=c.multiply(s),c=c.add(e.fromNumber(h))}return c},e.fromValue=function(r,t){return t===void 0&&(t={}),r instanceof e?r:typeof r=="number"?(t.ceilFloat===!0&&(r=Math.ceil(r)),e.fromNumber(r)):typeof r=="string"?e.fromString(r,void 0,t):typeof r=="bigint"?e.fromString(r.toString()):new e(r.low,r.high)},e.toNumber=function(r){switch(typeof r){case"number":return r;case"bigint":return Number(r);default:return e.fromValue(r).toNumber()}},e.toString=function(r,t){return e.fromValue(r).toString(t)},e.inSafeRange=function(r){return e.fromValue(r).inSafeRange()},e.ZERO=e.fromInt(0),e.ONE=e.fromInt(1),e.NEG_ONE=e.fromInt(-1),e.MAX_VALUE=e.fromBits(-1,2147483647),e.MIN_VALUE=e.fromBits(0,-2147483648),e.MIN_SAFE_VALUE=e.fromBits(1,-2097152),e.MAX_SAFE_VALUE=e.fromBits(-1,2097151),e.__isInteger__=!0,e}();function FI(e,r,t){var n=e.toString(r),o=Math.max(t-n.length,0),i="0".repeat(o);return"".concat(i).concat(n)}function BI(e,r,t){return!Number.isNaN(e)&&!Number.isNaN(r)&&FI(r,t,e.length)===e.toLowerCase()}Object.defineProperty(Zr.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var vb=65536,xI=1<<24,Cn=vb*vb,VI=Cn*Cn,_b=VI/2,yb=Zr.fromInt(xI),WI=Zr.fromValue;xe.int=WI;var zI=Zr.isInteger;xe.isInt=zI;var HI=Zr.inSafeRange;xe.inSafeRange=HI;var qI=Zr.toNumber;xe.toNumber=qI;var GI=Zr.toString;xe.toString=GI;xe.default=Zr;var _e={},P_={},ne={},KI=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),YI=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),ZI=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&KI(r,e,t);return YI(r,e),r},QI=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ne,"__esModule",{value:!0});ne.ENCRYPTION_OFF=ne.ENCRYPTION_ON=ne.equals=ne.validateQueryAndParameters=ne.toNumber=ne.assertValidDate=ne.assertNumberOrInteger=ne.assertNumber=ne.assertString=ne.assertObject=ne.isString=ne.isObject=ne.isEmptyObjectOrNull=void 0;var ov=ZI(xe),Ln=Bt,XI="ENCRYPTION_ON";ne.ENCRYPTION_ON=XI;var JI="ENCRYPTION_OFF";ne.ENCRYPTION_OFF=JI;function eR(e){if(e===null)return!0;if(!Il(e))return!1;for(var r in e)if(e[r]!==void 0)return!1;return!0}ne.isEmptyObjectOrNull=eR;function Il(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}ne.isObject=Il;function tR(e,r,t){var n,o,i="",a=r??{},s=(n=t==null?void 0:t.skipAsserts)!==null&&n!==void 0?n:!1;return typeof e=="string"?i=e:e instanceof String?i=e.toString():typeof e=="object"&&e.text!=null&&(i=e.text,a=(o=e.parameters)!==null&&o!==void 0?o:{}),s||(aR(i),uR(a)),{validatedQuery:i,params:a}}ne.validateQueryAndParameters=tR;function rR(e,r){if(!Il(e))throw new TypeError(r+" expected to be an object but was: "+(0,Ln.stringify)(e));return e}ne.assertObject=rR;function Sw(e,r){if(!Pw(e))throw new TypeError((0,Ln.stringify)(r)+" expected to be string but was: "+(0,Ln.stringify)(e));return e}ne.assertString=Sw;function nR(e,r){if(typeof e!="number")throw new TypeError(r+" expected to be a number but was: "+(0,Ln.stringify)(e));return e}ne.assertNumber=nR;function oR(e,r){if(typeof e!="number"&&typeof e!="bigint"&&!(0,ov.isInt)(e))throw new TypeError(r+" expected to be either a number or an Integer object but was: "+(0,Ln.stringify)(e));return e}ne.assertNumberOrInteger=oR;function iR(e,r){if(Object.prototype.toString.call(e)!=="[object Date]")throw new TypeError(r+" expected to be a standard JavaScript Date but was: "+(0,Ln.stringify)(e));if(Number.isNaN(e.getTime()))throw new TypeError(r+" expected to be valid JavaScript Date but its time was NaN: "+(0,Ln.stringify)(e));return e}ne.assertValidDate=iR;function aR(e){if(Sw(e,"Cypher query"),e.trim().length===0)throw new TypeError("Cypher query is expected to be a non-empty string.")}function uR(e){if(!Il(e)){var r=e.constructor!=null?" "+e.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(r," ").concat(JSON.stringify(e)))}}function Pw(e){return Object.prototype.toString.call(e)==="[object String]"}ne.isString=Pw;function Tw(e,r){var t,n;if(e===r)return!0;if(e===null||r===null)return!1;if(typeof e=="object"&&typeof r=="object"){var o=Object.keys(e),i=Object.keys(r);if(o.length!==i.length)return!1;try{for(var a=QI(o),s=a.next();!s.done;s=a.next()){var c=s.value;if(!Tw(e[c],r[c]))return!1}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0}return!1}ne.equals=Tw;function sR(e){return e instanceof ov.default?e.toNumber():typeof e=="bigint"?(0,ov.int)(e).toNumber():e}ne.toNumber=sR;(function(e){var r=f&&f.__createBinding||(Object.create?function(m,A,M,x){x===void 0&&(x=M);var re=Object.getOwnPropertyDescriptor(A,M);(!re||("get"in re?!A.__esModule:re.writable||re.configurable))&&(re={enumerable:!0,get:function(){return A[M]}}),Object.defineProperty(m,x,re)}:function(m,A,M,x){x===void 0&&(x=M),m[x]=A[M]}),t=f&&f.__setModuleDefault||(Object.create?function(m,A){Object.defineProperty(m,"default",{enumerable:!0,value:A})}:function(m,A){m.default=A}),n=f&&f.__importStar||function(m){if(m&&m.__esModule)return m;var A={};if(m!=null)for(var M in m)M!=="default"&&Object.prototype.hasOwnProperty.call(m,M)&&r(A,m,M);return t(A,m),A};Object.defineProperty(e,"__esModule",{value:!0}),e.floorMod=e.floorDiv=e.assertValidZoneId=e.assertValidNanosecond=e.assertValidSecond=e.assertValidMinute=e.assertValidHour=e.assertValidDay=e.assertValidMonth=e.assertValidYear=e.timeZoneOffsetInSeconds=e.totalNanoseconds=e.newDate=e.toStandardDate=e.isoStringToStandardDate=e.dateToIsoString=e.timeZoneOffsetToIsoString=e.timeToIsoString=e.durationToIsoString=e.dateToEpochDay=e.localDateTimeToEpochSecond=e.localTimeToNanoOfDay=e.normalizeNanosecondsForDuration=e.normalizeSecondsForDuration=e.SECONDS_PER_DAY=e.DAYS_PER_400_YEAR_CYCLE=e.DAYS_0000_TO_1970=e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE=e.NANOS_PER_MILLISECOND=e.NANOS_PER_SECOND=e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE=e.MINUTES_PER_HOUR=e.NANOSECOND_OF_SECOND_RANGE=e.SECOND_OF_MINUTE_RANGE=e.MINUTE_OF_HOUR_RANGE=e.HOUR_OF_DAY_RANGE=e.DAY_OF_MONTH_RANGE=e.MONTH_OF_YEAR_RANGE=e.YEAR_RANGE=void 0;var o=n(xe),i=se,a=ne,s=function(){function m(A,M){this._minNumber=A,this._maxNumber=M,this._minInteger=(0,o.int)(A),this._maxInteger=(0,o.int)(M)}return m.prototype.contains=function(A){if((0,o.isInt)(A)&&A instanceof o.default)return A.greaterThanOrEqual(this._minInteger)&&A.lessThanOrEqual(this._maxInteger);if(typeof A=="bigint"){var M=(0,o.int)(A);return M.greaterThanOrEqual(this._minInteger)&&M.lessThanOrEqual(this._maxInteger)}else return A>=this._minNumber&&A<=this._maxNumber},m.prototype.toString=function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")},m}();e.YEAR_RANGE=new s(-999999999,999999999),e.MONTH_OF_YEAR_RANGE=new s(1,12),e.DAY_OF_MONTH_RANGE=new s(1,31),e.HOUR_OF_DAY_RANGE=new s(0,23),e.MINUTE_OF_HOUR_RANGE=new s(0,59),e.SECOND_OF_MINUTE_RANGE=new s(0,59),e.NANOSECOND_OF_SECOND_RANGE=new s(0,999999999),e.MINUTES_PER_HOUR=60,e.SECONDS_PER_MINUTE=60,e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE*e.MINUTES_PER_HOUR,e.NANOS_PER_SECOND=1e9,e.NANOS_PER_MILLISECOND=1e6,e.NANOS_PER_MINUTE=e.NANOS_PER_SECOND*e.SECONDS_PER_MINUTE,e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE*e.MINUTES_PER_HOUR,e.DAYS_0000_TO_1970=719528,e.DAYS_PER_400_YEAR_CYCLE=146097,e.SECONDS_PER_DAY=86400;function c(m,A){return(0,o.int)(m).add(ee(A,e.NANOS_PER_SECOND))}e.normalizeSecondsForDuration=c;function u(m){return he(m,e.NANOS_PER_SECOND)}e.normalizeNanosecondsForDuration=u;function l(m,A,M,x){m=(0,o.int)(m),A=(0,o.int)(A),M=(0,o.int)(M),x=(0,o.int)(x);var re=m.multiply(e.NANOS_PER_HOUR);return re=re.add(A.multiply(e.NANOS_PER_MINUTE)),re=re.add(M.multiply(e.NANOS_PER_SECOND)),re.add(x)}e.localTimeToNanoOfDay=l;function d(m,A,M,x,re,Le,Tt){var fn=h(m,A,M),Fi=G(x,re,Le);return fn.multiply(e.SECONDS_PER_DAY).add(Fi)}e.localDateTimeToEpochSecond=d;function h(m,A,M){m=(0,o.int)(m),A=(0,o.int)(A),M=(0,o.int)(M);var x=m.multiply(365);return m.greaterThanOrEqual(0)?x=x.add(m.add(3).div(4).subtract(m.add(99).div(100)).add(m.add(399).div(400))):x=x.subtract(m.div(-4).subtract(m.div(-100)).add(m.div(-400))),x=x.add(A.multiply(367).subtract(362).div(12)),x=x.add(M.subtract(1)),A.greaterThan(2)&&(x=x.subtract(1),L(m)||(x=x.subtract(1))),x.subtract(e.DAYS_0000_TO_1970)}e.dateToEpochDay=h;function p(m,A,M,x){var re=ve(m),Le=ve(A),Tt=be(M,x);return"P".concat(re,"M").concat(Le,"DT").concat(Tt,"S")}e.durationToIsoString=p;function v(m,A,M,x){var re=ve(m,2),Le=ve(A,2),Tt=ve(M,2),fn=Q(x);return"".concat(re,":").concat(Le,":").concat(Tt).concat(fn)}e.timeToIsoString=v;function y(m){if(m=(0,o.int)(m),m.equals(0))return"Z";var A=m.isNegative();A&&(m=m.multiply(-1));var M=A?"-":"+",x=ve(m.div(e.SECONDS_PER_HOUR),2),re=ve(m.div(e.SECONDS_PER_MINUTE).modulo(e.MINUTES_PER_HOUR),2),Le=m.modulo(e.SECONDS_PER_MINUTE),Tt=Le.equals(0)?null:ve(Le,2);return Tt!=null?"".concat(M).concat(x,":").concat(re,":").concat(Tt):"".concat(M).concat(x,":").concat(re)}e.timeZoneOffsetToIsoString=y;function _(m,A,M){var x=we(m),re=ve(A,2),Le=ve(M,2);return"".concat(x,"-").concat(re,"-").concat(Le)}e.dateToIsoString=_;function b(m){return new Date(m)}e.isoStringToStandardDate=b;function w(m){return new Date(m)}e.toStandardDate=w;function S(m){return new Date(m)}e.newDate=S;function E(m,A){A=A??0;var M=m.getMilliseconds()*e.NANOS_PER_MILLISECOND;return nt(A,M)}e.totalNanoseconds=E;function P(m){var A=m.getSeconds()-m.getUTCSeconds(),M=m.getMinutes()-m.getUTCMinutes(),x=m.getHours()-m.getUTCHours(),re=C(m);return x*e.SECONDS_PER_HOUR+M*e.SECONDS_PER_MINUTE+A+re*e.SECONDS_PER_DAY}e.timeZoneOffsetInSeconds=P;function C(m){return m.getMonth()===m.getUTCMonth()?m.getDate()-m.getUTCDate():m.getFullYear()>m.getUTCFullYear()||m.getMonth()>m.getUTCMonth()&&m.getFullYear()===m.getUTCFullYear()?m.getDate()+T(m.getUTCMonth(),m.getUTCFullYear())-m.getUTCDate():m.getDate()-(m.getUTCDate()+T(m.getMonth(),m.getFullYear()))}function T(m,A){return m===1?A%400===0||A%4===0&&A%100!==0?29:28:[0,2,4,6,7,9,11].includes(m)?31:30}function I(m){return te(m,e.YEAR_RANGE,"Year")}e.assertValidYear=I;function $(m){return te(m,e.MONTH_OF_YEAR_RANGE,"Month")}e.assertValidMonth=$;function D(m){return te(m,e.DAY_OF_MONTH_RANGE,"Day")}e.assertValidDay=D;function q(m){return te(m,e.HOUR_OF_DAY_RANGE,"Hour")}e.assertValidHour=q;function V(m){return te(m,e.MINUTE_OF_HOUR_RANGE,"Minute")}e.assertValidMinute=V;function H(m){return te(m,e.SECOND_OF_MINUTE_RANGE,"Second")}e.assertValidSecond=H;function oe(m){return te(m,e.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")}e.assertValidNanosecond=oe;var F=new Map,J=function(m,A){return(0,i.newError)("".concat(A,' is expected to be a valid ZoneId but was: "').concat(m,'"'))};function B(m,A){var M=F.get(A);if(M!==!0){if(M===!1)throw J(A,m);try{Intl.DateTimeFormat(void 0,{timeZone:A}),F.set(A,!0)}catch{throw F.set(A,!1),J(A,m)}}}e.assertValidZoneId=B;function te(m,A,M){if((0,a.assertNumberOrInteger)(m,M),!A.contains(m))throw(0,i.newError)("".concat(M," is expected to be in range ").concat(A.toString()," but was: ").concat(m.toString()));return m}function G(m,A,M){m=(0,o.int)(m),A=(0,o.int)(A),M=(0,o.int)(M);var x=m.multiply(e.SECONDS_PER_HOUR);return x=x.add(A.multiply(e.SECONDS_PER_MINUTE)),x.add(M)}function L(m){return m=(0,o.int)(m),m.modulo(4).equals(0)?m.modulo(100).equals(0)?!!m.modulo(400).equals(0):!0:!1}function ee(m,A){m=(0,o.int)(m),A=(0,o.int)(A);var M=m.div(A);return m.isPositive()!==A.isPositive()&&M.multiply(A).notEquals(m)&&(M=M.subtract(1)),M}e.floorDiv=ee;function he(m,A){return m=(0,o.int)(m),A=(0,o.int)(A),m.subtract(ee(m,A).multiply(A))}e.floorMod=he;function be(m,A){m=(0,o.int)(m),A=(0,o.int)(A);var M,x,re=m.isNegative(),Le=A.greaterThan(0);return re&&Le?m.equals(-1)?M="-0":M=m.add(1).toString():M=m.toString(),Le&&(re?x=Q(A.negate().add(2*e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND)):x=Q(A.add(e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND))),x!=null?M+x:M}function Q(m){return m=(0,o.int)(m),m.equals(0)?"":"."+ve(m,9)}function we(m){var A=(0,o.int)(m);return A.isNegative()||A.greaterThan(9999)?ve(A,6,{usePositiveSign:!0}):ve(A,4)}function ve(m,A,M){m=(0,o.int)(m);var x=m.isNegative();x&&(m=m.negate());var re=m.toString();if(A!=null)for(;re.length<A;)re="0"+re;return x?"-"+re:(M==null?void 0:M.usePositiveSign)===!0?"+"+re:re}function nt(m,A){return m instanceof o.default?m.add(A):typeof m=="bigint"?m+BigInt(A):m+A}})(P_);var cR=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),lR=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Cw=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&cR(r,e,t);return lR(r,e),r},fR=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(_e,"__esModule",{value:!0});_e.isDateTime=_e.DateTime=_e.isLocalDateTime=_e.LocalDateTime=_e.isDate=_e.Date=_e.isTime=_e.Time=_e.isLocalTime=_e.LocalTime=_e.isDuration=_e.Duration=void 0;var X=Cw(P_),dr=ne,dR=se,kn=Cw(xe),ri={value:!0,enumerable:!1,configurable:!1,writable:!1},Aw="__isDuration__",Iw="__isLocalTime__",Rw="__isTime__",$w="__isDate__",jw="__isLocalDateTime__",Nw="__isDateTime__",kw=function(){function e(r,t,n,o){this.months=(0,dr.assertNumberOrInteger)(r,"Months"),this.days=(0,dr.assertNumberOrInteger)(t,"Days"),(0,dr.assertNumberOrInteger)(n,"Seconds"),(0,dr.assertNumberOrInteger)(o,"Nanoseconds"),this.seconds=X.normalizeSecondsForDuration(n,o),this.nanoseconds=X.normalizeNanosecondsForDuration(o),Object.freeze(this)}return e.prototype.toString=function(){return X.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},e}();_e.Duration=kw;Object.defineProperty(kw.prototype,Aw,ri);function hR(e){return ni(e,Aw)}_e.isDuration=hR;var Mw=function(){function e(r,t,n,o){this.hour=X.assertValidHour(r),this.minute=X.assertValidMinute(t),this.second=X.assertValidSecond(n),this.nanosecond=X.assertValidNanosecond(o),Object.freeze(this)}return e.fromStandardDate=function(r,t){La(r,t);var n=X.totalNanoseconds(r,t);return new e(r.getHours(),r.getMinutes(),r.getSeconds(),n instanceof kn.default?n.toInt():typeof n=="bigint"?(0,kn.int)(n).toInt():n)},e.prototype.toString=function(){return X.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},e}();_e.LocalTime=Mw;Object.defineProperty(Mw.prototype,Iw,ri);function pR(e){return ni(e,Iw)}_e.isLocalTime=pR;var Dw=function(){function e(r,t,n,o,i){this.hour=X.assertValidHour(r),this.minute=X.assertValidMinute(t),this.second=X.assertValidSecond(n),this.nanosecond=X.assertValidNanosecond(o),this.timeZoneOffsetSeconds=(0,dr.assertNumberOrInteger)(i,"Time zone offset in seconds"),Object.freeze(this)}return e.fromStandardDate=function(r,t){return La(r,t),new e(r.getHours(),r.getMinutes(),r.getSeconds(),(0,kn.toNumber)(X.totalNanoseconds(r,t)),X.timeZoneOffsetInSeconds(r))},e.prototype.toString=function(){return X.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+X.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},e}();_e.Time=Dw;Object.defineProperty(Dw.prototype,Rw,ri);function vR(e){return ni(e,Rw)}_e.isTime=vR;var Lw=function(){function e(r,t,n){this.year=X.assertValidYear(r),this.month=X.assertValidMonth(t),this.day=X.assertValidDay(n),Object.freeze(this)}return e.fromStandardDate=function(r){return La(r),new e(r.getFullYear(),r.getMonth()+1,r.getDate())},e.prototype.toStandardDate=function(){return X.isoStringToStandardDate(this.toString())},e.prototype.toString=function(){return X.dateToIsoString(this.year,this.month,this.day)},e}();_e.Date=Lw;Object.defineProperty(Lw.prototype,$w,ri);function _R(e){return ni(e,$w)}_e.isDate=_R;var Uw=function(){function e(r,t,n,o,i,a,s){this.year=X.assertValidYear(r),this.month=X.assertValidMonth(t),this.day=X.assertValidDay(n),this.hour=X.assertValidHour(o),this.minute=X.assertValidMinute(i),this.second=X.assertValidSecond(a),this.nanosecond=X.assertValidNanosecond(s),Object.freeze(this)}return e.fromStandardDate=function(r,t){return La(r,t),new e(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),(0,kn.toNumber)(X.totalNanoseconds(r,t)))},e.prototype.toStandardDate=function(){return X.isoStringToStandardDate(this.toString())},e.prototype.toString=function(){return Bw(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},e}();_e.LocalDateTime=Uw;Object.defineProperty(Uw.prototype,jw,ri);function yR(e){return ni(e,jw)}_e.isLocalDateTime=yR;var Fw=function(){function e(r,t,n,o,i,a,s,c,u){this.year=X.assertValidYear(r),this.month=X.assertValidMonth(t),this.day=X.assertValidDay(n),this.hour=X.assertValidHour(o),this.minute=X.assertValidMinute(i),this.second=X.assertValidSecond(a),this.nanosecond=X.assertValidNanosecond(s);var l=fR(mR(c,u),2),d=l[0],h=l[1];this.timeZoneOffsetSeconds=d,this.timeZoneId=h??void 0,Object.freeze(this)}return e.fromStandardDate=function(r,t){return La(r,t),new e(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),(0,kn.toNumber)(X.totalNanoseconds(r,t)),X.timeZoneOffsetInSeconds(r),null)},e.prototype.toStandardDate=function(){return X.toStandardDate(this._toUTC())},e.prototype.toString=function(){var r,t=Bw(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),n=this.timeZoneOffsetSeconds!=null?X.timeZoneOffsetToIsoString((r=this.timeZoneOffsetSeconds)!==null&&r!==void 0?r:0):"",o=this.timeZoneId!=null?"[".concat(this.timeZoneId,"]"):"";return t+n+o},e.prototype._toUTC=function(){var r;if(this.timeZoneOffsetSeconds===void 0)throw new Error("Requires DateTime created with time zone offset");var t=X.localDateTimeToEpochSecond(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),n=t.subtract((r=this.timeZoneOffsetSeconds)!==null&&r!==void 0?r:0);return(0,kn.int)(n).multiply(1e3).add((0,kn.int)(this.nanosecond).div(1e6)).toNumber()},e}();_e.DateTime=Fw;Object.defineProperty(Fw.prototype,Nw,ri);function bR(e){return ni(e,Nw)}_e.isDateTime=bR;function ni(e,r){return e!=null&&e[r]===!0}function Bw(e,r,t,n,o,i,a){return X.dateToIsoString(e,r,t)+"T"+X.timeToIsoString(n,o,i,a)}function mR(e,r){var t=e!=null,n=r!=null&&r!=="";if(!t&&!n)throw(0,dR.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(e," and id: ").concat(r));var o=[void 0,void 0];return t&&((0,dr.assertNumberOrInteger)(e,"Time zone offset in seconds"),o[0]=e),n&&((0,dr.assertString)(r,"Time zone ID"),X.assertValidZoneId("Time zone ID",r),o[1]=r),o}function La(e,r){(0,dr.assertValidDate)(e,"Standard date"),r!=null&&(0,dr.assertNumberOrInteger)(r,"Nanosecond")}var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.isPathSegment=Ee.PathSegment=Ee.isPath=Ee.Path=Ee.isUnboundRelationship=Ee.UnboundRelationship=Ee.isRelationship=Ee.Relationship=Ee.isNode=Ee.Node=void 0;var T_=Bt,Ua={value:!0,enumerable:!1,configurable:!1,writable:!1},xw="__isNode__",Vw="__isRelationship__",Ww="__isUnboundRelationship__",zw="__isPath__",Hw="__isPathSegment__";function Fa(e,r){return e!=null&&e[r]===!0}var qw=function(){function e(r,t,n,o){this.identity=r,this.labels=t,this.properties=n,this.elementId=la(o,function(){return r.toString()})}return e.prototype.toString=function(){for(var r="("+this.elementId,t=0;t<this.labels.length;t++)r+=":"+this.labels[t];var n=Object.keys(this.properties);if(n.length>0){r+=" {";for(var t=0;t<n.length;t++)t>0&&(r+=","),r+=n[t]+":"+(0,T_.stringify)(this.properties[n[t]]);r+="}"}return r+=")",r},e}();Ee.Node=qw;Object.defineProperty(qw.prototype,xw,Ua);function gR(e){return Fa(e,xw)}Ee.isNode=gR;var Kc=function(){function e(r,t,n,o,i,a,s,c){this.identity=r,this.start=t,this.end=n,this.type=o,this.properties=i,this.elementId=la(a,function(){return r.toString()}),this.startNodeElementId=la(s,function(){return t.toString()}),this.endNodeElementId=la(c,function(){return n.toString()})}return e.prototype.toString=function(){var r="("+this.startNodeElementId+")-[:"+this.type,t=Object.keys(this.properties);if(t.length>0){r+=" {";for(var n=0;n<t.length;n++)n>0&&(r+=","),r+=t[n]+":"+(0,T_.stringify)(this.properties[t[n]]);r+="}"}return r+="]->("+this.endNodeElementId+")",r},e}();Ee.Relationship=Kc;Object.defineProperty(Kc.prototype,Vw,Ua);function wR(e){return Fa(e,Vw)}Ee.isRelationship=wR;var Gw=function(){function e(r,t,n,o){this.identity=r,this.type=t,this.properties=n,this.elementId=la(o,function(){return r.toString()})}return e.prototype.bind=function(r,t){return new Kc(this.identity,r,t,this.type,this.properties,this.elementId)},e.prototype.bindTo=function(r,t){return new Kc(this.identity,r.identity,t.identity,this.type,this.properties,this.elementId,r.elementId,t.elementId)},e.prototype.toString=function(){var r="-[:"+this.type,t=Object.keys(this.properties);if(t.length>0){r+=" {";for(var n=0;n<t.length;n++)n>0&&(r+=","),r+=t[n]+":"+(0,T_.stringify)(this.properties[t[n]]);r+="}"}return r+="]->",r},e}();Ee.UnboundRelationship=Gw;Object.defineProperty(Gw.prototype,Ww,Ua);function OR(e){return Fa(e,Ww)}Ee.isUnboundRelationship=OR;var Kw=function(){function e(r,t,n){this.start=r,this.relationship=t,this.end=n}return e}();Ee.PathSegment=Kw;Object.defineProperty(Kw.prototype,Hw,Ua);function ER(e){return Fa(e,Hw)}Ee.isPathSegment=ER;var Yw=function(){function e(r,t,n){this.start=r,this.end=t,this.segments=n,this.length=n.length}return e}();Ee.Path=Yw;Object.defineProperty(Yw.prototype,zw,Ua);function SR(e){return Fa(e,zw)}Ee.isPath=SR;function la(e,r){return e??r()}var C_={},Zh=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Qh=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},Xh=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(C_,"__esModule",{value:!0});var bb=se;function PR(e){var r={};return e.forEach(function(t,n){r[t]=n}),r}var TR=function(){function e(r,t,n){this.keys=r,this.length=r.length,this._fields=t,this._fieldLookup=n??PR(r)}return e.prototype.forEach=function(r){var t,n;try{for(var o=Qh(this.entries()),i=o.next();!i.done;i=o.next()){var a=Xh(i.value,2),s=a[0],c=a[1];r(c,s,this)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},e.prototype.map=function(r){var t,n,o=[];try{for(var i=Qh(this.entries()),a=i.next();!a.done;a=i.next()){var s=Xh(a.value,2),c=s[0],u=s[1];o.push(r(u,c,this))}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return o},e.prototype.entries=function(){var r;return Zh(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,[this.keys[r],this._fields[r]]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype.values=function(){var r;return Zh(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,this._fields[r]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype[Symbol.iterator]=function(){var r;return Zh(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,this._fields[r]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype.toObject=function(){var r,t,n={};try{for(var o=Qh(this.entries()),i=o.next();!i.done;i=o.next()){var a=Xh(i.value,2),s=a[0],c=a[1];n[s]=c}}catch(u){r={error:u}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(r)throw r.error}}return n},e.prototype.get=function(r){var t;if(typeof r!="number"){if(t=this._fieldLookup[r],t===void 0)throw(0,bb.newError)("This record has no field with key '".concat(r.toString(),"', available keys are: [")+this.keys.toString()+"].")}else t=r;if(t>this._fields.length-1||t<0)throw(0,bb.newError)("This record has no field with index '"+t.toString()+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[t]},e.prototype.has=function(r){return typeof r=="number"?r>=0&&r<this._fields.length:this._fieldLookup[r]!==void 0},e}();C_.default=TR;var Mo={};Object.defineProperty(Mo,"__esModule",{value:!0});Mo.isPoint=Mo.Point=void 0;var rc=ne,Zw="__isPoint__",Qw=function(){function e(r,t,n,o){this.srid=(0,rc.assertNumberOrInteger)(r,"SRID"),this.x=(0,rc.assertNumber)(t,"X coordinate"),this.y=(0,rc.assertNumber)(n,"Y coordinate"),this.z=o==null?o:(0,rc.assertNumber)(o,"Z coordinate"),Object.freeze(this)}return e.prototype.toString=function(){return this.z!=null&&!isNaN(this.z)?"Point{srid=".concat(hn(this.srid),", x=").concat(hn(this.x),", y=").concat(hn(this.y),", z=").concat(hn(this.z),"}"):"Point{srid=".concat(hn(this.srid),", x=").concat(hn(this.x),", y=").concat(hn(this.y),"}")},e}();Mo.Point=Qw;function hn(e){return Number.isInteger(e)?e.toString()+".0":e.toString()}Object.defineProperty(Qw.prototype,Zw,{value:!0,enumerable:!1,configurable:!1,writable:!1});function CR(e){var r=e;return e!=null&&r[Zw]===!0}Mo.isPoint=CR;var Xe={},ie={},Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.FailedObserver=Ur.CompletedObserver=void 0;var AR=function(){function e(){}return e.prototype.subscribe=function(r){fa(r,r.onKeys,[]),fa(r,r.onCompleted,{})},e.prototype.cancel=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.prepareToHandleSingleResponse=function(){},e.prototype.markCompleted=function(){},e.prototype.onError=function(r){throw new Error("CompletedObserver not supposed to call onError",{cause:r})},e}();Ur.CompletedObserver=AR;var IR=function(){function e(r){var t=r.error,n=r.onError;this._error=t,this._beforeError=n,this._observers=[],this.onError(t)}return e.prototype.subscribe=function(r){fa(r,r.onError,this._error),this._observers.push(r)},e.prototype.onError=function(r){fa(this,this._beforeError,r),this._observers.forEach(function(t){return fa(t,t.onError,r)})},e.prototype.cancel=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.markCompleted=function(){},e.prototype.prepareToHandleSingleResponse=function(){},e}();Ur.FailedObserver=IR;function fa(e,r,t){r!=null&&r.bind(e)(t)}var Qr={},RR=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),$R=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),jR=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&RR(r,e,t);return $R(r,e),r},NR=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},kR=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.Bookmarks=void 0;var mb=jR(ne),MR="bookmarks",Xw=function(){function e(r){this._values=LR(r)}return e.empty=function(){return DR},e.prototype.isEmpty=function(){return this._values.length===0},e.prototype.values=function(){return this._values},e.prototype[Symbol.iterator]=function(){return this._values[Symbol.iterator]()},e.prototype.asBeginTransactionParameters=function(){var r;return this.isEmpty()?{}:(r={},r[MR]=this._values,r)},e}();Qr.Bookmarks=Xw;var DR=new Xw(null);function LR(e){if(e==null||e==="")return[];if(mb.isString(e))return[e];if(Array.isArray(e)){for(var r=new Set,t=Jw(e),n=0;n<t.length;n++){var o=t[n];if(o!=null){if(!mb.isString(o))throw new TypeError("Bookmark value should be a string, given: '".concat(o,"'"));r.add(o)}}return kR([],NR(r),!1)}throw new TypeError("Bookmarks should either be a string or a string array, given: '".concat(e,"'"))}function Jw(e){return e.reduce(function(r,t){return Array.isArray(t)?r.concat(Jw(t)):r.concat(t)},[])}var z={};Object.defineProperty(z,"__esModule",{value:!0});z.TELEMETRY_APIS=z.BOLT_PROTOCOL_V5_8=z.BOLT_PROTOCOL_V5_7=z.BOLT_PROTOCOL_V5_6=z.BOLT_PROTOCOL_V5_5=z.BOLT_PROTOCOL_V5_4=z.BOLT_PROTOCOL_V5_3=z.BOLT_PROTOCOL_V5_2=z.BOLT_PROTOCOL_V5_1=z.BOLT_PROTOCOL_V5_0=z.BOLT_PROTOCOL_V4_4=z.BOLT_PROTOCOL_V4_3=z.BOLT_PROTOCOL_V4_2=z.BOLT_PROTOCOL_V4_1=z.BOLT_PROTOCOL_V4_0=z.BOLT_PROTOCOL_V3=z.BOLT_PROTOCOL_V2=z.BOLT_PROTOCOL_V1=z.DEFAULT_POOL_MAX_SIZE=z.DEFAULT_POOL_ACQUISITION_TIMEOUT=z.DEFAULT_CONNECTION_TIMEOUT_MILLIS=z.ACCESS_MODE_WRITE=z.ACCESS_MODE_READ=z.FETCH_ALL=void 0;var UR=-1;z.FETCH_ALL=UR;var FR=60*1e3;z.DEFAULT_POOL_ACQUISITION_TIMEOUT=FR;var BR=100;z.DEFAULT_POOL_MAX_SIZE=BR;var xR=3e4;z.DEFAULT_CONNECTION_TIMEOUT_MILLIS=xR;var VR="READ";z.ACCESS_MODE_READ=VR;var WR="WRITE";z.ACCESS_MODE_WRITE=WR;var zR=1;z.BOLT_PROTOCOL_V1=zR;var HR=2;z.BOLT_PROTOCOL_V2=HR;var qR=3;z.BOLT_PROTOCOL_V3=qR;var GR=4;z.BOLT_PROTOCOL_V4_0=GR;var KR=4.1;z.BOLT_PROTOCOL_V4_1=KR;var YR=4.2;z.BOLT_PROTOCOL_V4_2=YR;var ZR=4.3;z.BOLT_PROTOCOL_V4_3=ZR;var QR=4.4;z.BOLT_PROTOCOL_V4_4=QR;var XR=5;z.BOLT_PROTOCOL_V5_0=XR;var JR=5.1;z.BOLT_PROTOCOL_V5_1=JR;var e$=5.2;z.BOLT_PROTOCOL_V5_2=e$;var t$=5.3;z.BOLT_PROTOCOL_V5_3=t$;var r$=5.4;z.BOLT_PROTOCOL_V5_4=r$;var n$=5.5;z.BOLT_PROTOCOL_V5_5=n$;var o$=5.6;z.BOLT_PROTOCOL_V5_6=o$;var i$=5.7;z.BOLT_PROTOCOL_V5_7=i$;var a$=5.8;z.BOLT_PROTOCOL_V5_8=a$;var u$={MANAGED_TRANSACTION:0,UNMANAGED_TRANSACTION:1,AUTO_COMMIT_TRANSACTION:2,EXECUTE_QUERY:3};z.TELEMETRY_APIS=u$;var Ut={},Jn={},s$=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),po;Object.defineProperty(Jn,"__esModule",{value:!0});Jn.Logger=void 0;var eO=se,iv="error",av="warn",Pa="info",uv="debug",c$=Pa,Yc=(po={},po[iv]=0,po[av]=1,po[Pa]=2,po[uv]=3,po),tO=function(){function e(r,t){this._level=r,this._loggerFunction=t}return e.create=function(r){if((r==null?void 0:r.logging)!=null){var t=r.logging,n=d$(t),o=h$(t);return new e(n,o)}return this.noOp()},e.noOp=function(){return f$},e.prototype.isErrorEnabled=function(){return nc(this._level,iv)},e.prototype.error=function(r){this.isErrorEnabled()&&this._loggerFunction(iv,r)},e.prototype.isWarnEnabled=function(){return nc(this._level,av)},e.prototype.warn=function(r){this.isWarnEnabled()&&this._loggerFunction(av,r)},e.prototype.isInfoEnabled=function(){return nc(this._level,Pa)},e.prototype.info=function(r){this.isInfoEnabled()&&this._loggerFunction(Pa,r)},e.prototype.isDebugEnabled=function(){return nc(this._level,uv)},e.prototype.debug=function(r){this.isDebugEnabled()&&this._loggerFunction(uv,r)},e}();Jn.Logger=tO;var l$=function(e){s$(r,e);function r(){return e.call(this,Pa,function(t,n){})||this}return r.prototype.isErrorEnabled=function(){return!1},r.prototype.error=function(t){},r.prototype.isWarnEnabled=function(){return!1},r.prototype.warn=function(t){},r.prototype.isInfoEnabled=function(){return!1},r.prototype.info=function(t){},r.prototype.isDebugEnabled=function(){return!1},r.prototype.debug=function(t){},r}(tO),f$=new l$;function nc(e,r){return Yc[e]>=Yc[r]}function d$(e){if((e==null?void 0:e.level)!=null){var r=e.level,t=Yc[r];if(t==null&&t!==0)throw(0,eO.newError)("Illegal logging level: ".concat(r,". Supported levels are: ").concat(Object.keys(Yc).toString()));return r}return c$}function h$(e){var r,t;if((e==null?void 0:e.logger)!=null){var n=e.logger;if(n!=null&&typeof n=="function")return n}throw(0,eO.newError)("Illegal logger function: ".concat((t=(r=e==null?void 0:e.logger)===null||r===void 0?void 0:r.toString())!==null&&t!==void 0?t:"undefined"))}var rO=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),da=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},ha=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.EMPTY_CONNECTION_HOLDER=Ut.ReadOnlyConnectionHolder=Ut.ConnectionHolder=void 0;var p$=se,v$=ne,_$=z,gb=Qr,y$=Jn,A_=function(){function e(r){var t=r.mode,n=r.database,o=n===void 0?"":n,i=r.bookmarks,a=r.connectionProvider,s=r.impersonatedUser,c=r.onDatabaseNameResolved,u=r.getConnectionAcquistionBookmarks,l=r.auth,d=r.log;this._mode=t??_$.ACCESS_MODE_WRITE,this._closed=!1,this._database=o!=null?(0,v$.assertString)(o,"database"):"",this._bookmarks=i??gb.Bookmarks.empty(),this._connectionProvider=a,this._impersonatedUser=s,this._referenceCount=0,this._connectionPromise=Promise.resolve(null),this._onDatabaseNameResolved=c,this._auth=l,this._log=d,this._logError=this._logError.bind(this),this._getConnectionAcquistionBookmarks=u??function(){return Promise.resolve(gb.Bookmarks.empty())}}return e.prototype.mode=function(){return this._mode},e.prototype.database=function(){return this._database},e.prototype.setDatabase=function(r){this._database=r},e.prototype.bookmarks=function(){return this._bookmarks},e.prototype.connectionProvider=function(){return this._connectionProvider},e.prototype.referenceCount=function(){return this._referenceCount},e.prototype.initializeConnection=function(r){if(this._referenceCount===0&&this._connectionProvider!=null)this._connectionPromise=this._createConnectionPromise(this._connectionProvider,r);else return this._referenceCount++,!1;return this._referenceCount++,!0},e.prototype._createConnectionPromise=function(r,t){return da(this,void 0,void 0,function(){var n,o,i;return ha(this,function(a){switch(a.label){case 0:return o=(n=r).acquireConnection,i={accessMode:this._mode,database:this._database},[4,this._getBookmarks()];case 1:return[4,o.apply(n,[(i.bookmarks=a.sent(),i.impersonatedUser=this._impersonatedUser,i.onDatabaseNameResolved=this._onDatabaseNameResolved,i.auth=this._auth,i.homeDb=t,i)])];case 2:return[2,a.sent()]}})})},e.prototype._getBookmarks=function(){return da(this,void 0,void 0,function(){return ha(this,function(r){switch(r.label){case 0:return[4,this._getConnectionAcquistionBookmarks()];case 1:return[2,r.sent()]}})})},e.prototype.getConnection=function(){return this._connectionPromise},e.prototype.releaseConnection=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount--,this._referenceCount===0?this._releaseConnection():this._connectionPromise)},e.prototype.close=function(r){return this._closed=!0,this._referenceCount===0?this._connectionPromise:(this._referenceCount=0,this._releaseConnection(r))},e.prototype.log=function(){return this._log},e.prototype._releaseConnection=function(r){return this._connectionPromise=this._connectionPromise.then(function(t){return t!=null?t.isOpen()&&(t.hasOngoingObservableRequests()||r===!0)?t.resetAndFlush().catch(g$).then(function(){return t.release().then(function(){return null})}):t.release().then(function(){return null}):Promise.resolve(null)}).catch(this._logError),this._connectionPromise},e.prototype._logError=function(r){return this._log.isWarnEnabled()&&this._log.warn("ConnectionHolder got an error while releasing the connection. Error ".concat(r,". Stacktrace: ").concat(r.stack)),null},e}();Ut.ConnectionHolder=A_;var nO=function(e){rO(r,e);function r(t){var n=e.call(this,{mode:t.mode(),database:t.database(),bookmarks:t.bookmarks(),getConnectionAcquistionBookmarks:t._getConnectionAcquistionBookmarks,connectionProvider:t.connectionProvider(),log:t.log()})||this;return n._connectionHolder=t,n}return r.prototype.initializeConnection=function(){return this._connectionHolder.referenceCount()!==0},r.prototype.getConnection=function(){return this._connectionHolder.getConnection()},r.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},r.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},r}(A_);Ut.ReadOnlyConnectionHolder=nO;Ut.default=nO;var b$=function(e){rO(r,e);function r(){return e.call(this,{log:y$.Logger.create({})})||this}return r.prototype.mode=function(){},r.prototype.database=function(){},r.prototype.initializeConnection=function(){return!0},r.prototype.getConnection=function(){return da(this,void 0,void 0,function(){return ha(this,function(t){switch(t.label){case 0:return[4,Promise.reject((0,p$.newError)("This connection holder does not serve connections"))];case 1:return[2,t.sent()]}})})},r.prototype.releaseConnection=function(){return da(this,void 0,void 0,function(){return ha(this,function(t){switch(t.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,t.sent()]}})})},r.prototype.close=function(){return da(this,void 0,void 0,function(){return ha(this,function(t){switch(t.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,t.sent()]}})})},r}(A_),m$=new b$;Ut.EMPTY_CONNECTION_HOLDER=m$;function g$(e){return null}var oi={},w$=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),O$=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),E$=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&w$(r,e,t);return O$(r,e),r};Object.defineProperty(oi,"__esModule",{value:!0});oi.TxConfig=void 0;var Ta=E$(ne),S$=se,P$=xe,oO=function(){function e(r,t){R$(r),this.timeout=C$(r,t),this.metadata=I$(r)}return e.empty=function(){return T$},e.prototype.isEmpty=function(){return Object.values(this).every(function(r){return r==null})},e}();oi.TxConfig=oO;var T$=new oO({});function C$(e,r){if(Ta.isObject(e)&&e.timeout!=null){Ta.assertNumberOrInteger(e.timeout,"Transaction timeout"),A$(e)&&(r==null?void 0:r.isInfoEnabled())===!0&&(r==null||r.info("Transaction timeout expected to be an integer, got: ".concat(e.timeout,". The value will be rounded up.")));var t=(0,P$.int)(e.timeout,{ceilFloat:!0});if(t.isNegative())throw(0,S$.newError)("Transaction timeout should not be negative");return t}return null}function A$(e){return typeof e.timeout=="number"&&!Number.isInteger(e.timeout)}function I$(e){if(Ta.isObject(e)&&e.metadata!=null){var r=e.metadata;if(Ta.assertObject(r,"config.metadata"),Object.keys(r).length!==0)return r}return null}function R$(e){e!=null&&Ta.assertObject(e,"Transaction config")}var Ba={},sv=f&&f.__assign||function(){return sv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},sv.apply(this,arguments)},$$=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},j$=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},N$=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},k$=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(Ba,"__esModule",{value:!0});Ba.TransactionExecutor=void 0;var Vi=se,M$=z,D$=30*1e3,L$=1e3,U$=2,F$=.2;function B$(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return setTimeout.apply(void 0,k$([e,r],N$(t),!1))}function x$(e){return clearTimeout(e)}var V$=function(){function e(r,t,n,o,i){i===void 0&&(i={setTimeout:B$,clearTimeout:x$}),this._maxRetryTimeMs=oc(r,D$),this._initialRetryDelayMs=oc(t,L$),this._multiplier=oc(n,U$),this._jitterFactor=oc(o,F$),this._setTimeout=i.setTimeout,this._clearTimeout=i.clearTimeout,this._inFlightTimeoutIds=[],this.pipelineBegin=!1,this.telemetryApi=M$.TELEMETRY_APIS.MANAGED_TRANSACTION,this._verifyAfterConstruction()}return e.prototype.execute=function(r,t,n){var o=this,i={apiTransactionConfig:{api:this.telemetryApi,onTelemetrySuccess:function(){i.apiTransactionConfig=void 0}}};return new Promise(function(a,s){o._executeTransactionInsidePromise(r,t,a,s,n,i).catch(s)}).catch(function(a){var s=Date.now(),c=o._initialRetryDelayMs;return o._retryTransactionPromise(r,t,a,s,c,n,i)})},e.prototype.close=function(){var r=this;this._inFlightTimeoutIds.forEach(function(t){return r._clearTimeout(t)}),this._inFlightTimeoutIds=[]},e.prototype._retryTransactionPromise=function(r,t,n,o,i,a,s){var c=this,u=Date.now()-o;return u>this._maxRetryTimeMs||!(0,Vi.isRetriableError)(n)?Promise.reject(n):new Promise(function(l,d){var h=c._computeDelayWithJitter(i),p=c._setTimeout(function(){c._inFlightTimeoutIds=c._inFlightTimeoutIds.filter(function(v){return v!==p}),c._executeTransactionInsidePromise(r,t,l,d,a,s).catch(d)},h);c._inFlightTimeoutIds.push(p)}).catch(function(l){var d=i*c._multiplier;return c._retryTransactionPromise(r,t,l,o,d,a,s)})},e.prototype._executeTransactionInsidePromise=function(r,t,n,o,i,a){return $$(this,void 0,void 0,function(){var s,c,u,l,d,h,p,v=this;return j$(this,function(y){switch(y.label){case 0:return y.trys.push([0,4,,5]),c=r((a==null?void 0:a.apiTransactionConfig)!=null?sv({},a==null?void 0:a.apiTransactionConfig):void 0),this.pipelineBegin?(u=c,[3,3]):[3,1];case 1:return[4,c];case 2:u=y.sent(),y.label=3;case 3:return s=u,[3,5];case 4:return l=y.sent(),o(l),[2];case 5:return d=i??function(_){return _},h=d(s),p=this._safeExecuteTransactionWork(h,t),p.then(function(_){return v._handleTransactionWorkSuccess(_,s,n,o)}).catch(function(_){return v._handleTransactionWorkFailure(_,s,o)}),[2]}})})},e.prototype._safeExecuteTransactionWork=function(r,t){try{var n=t(r);return Promise.resolve(n)}catch(o){return Promise.reject(o)}},e.prototype._handleTransactionWorkSuccess=function(r,t,n,o){t.isOpen()?t.commit().then(function(){n(r)}).catch(function(i){o(i)}):n(r)},e.prototype._handleTransactionWorkFailure=function(r,t,n){t.isOpen()?t.rollback().catch(function(o){}).then(function(){return n(r)}).catch(n):n(r)},e.prototype._computeDelayWithJitter=function(r){var t=r*this._jitterFactor,n=r-t,o=r+t;return Math.random()*(o-n)+n},e.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,Vi.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs.toString());if(this._initialRetryDelayMs<0)throw(0,Vi.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs.toString());if(this._multiplier<1)throw(0,Vi.newError)("Multiplier should be >= 1.0: "+this._multiplier.toString());if(this._jitterFactor<0||this._jitterFactor>1)throw(0,Vi.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor.toFixed())},e}();Ba.TransactionExecutor=V$;function oc(e,r){return e??r}var dt={},Zc=f&&f.__assign||function(){return Zc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Zc.apply(this,arguments)},iO=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(dt,"__esModule",{value:!0});dt.Url=dt.formatIPv6Address=dt.formatIPv4Address=dt.defaultPortForScheme=dt.parseDatabaseUrl=void 0;var W$=ne,z$=7687,H$=7474,q$=7473,aO=function(){function e(r,t,n,o,i){this.scheme=r,this.host=t,this.port=n,this.hostAndPort=o,this.query=i}return e}();dt.Url=aO;function G$(e){var r;(0,W$.assertString)(e,"URL");var t=Y$(e),n=oj(t.url),o=t.schemeMissing?null:Z$(n.scheme),i=Q$(n.host),a=tj(i),s=X$(n.port,o),c="".concat(a,":").concat(s),u=J$((r=n.query)!==null&&r!==void 0?r:K$(n.resourceName),e);return new aO(o,i,s,c,u)}dt.parseDatabaseUrl=G$;function K$(e){if(typeof e!="string")return null;var r=iO(e.split("?"),2),t=r[1];return t}function Y$(e){return e=e.trim(),e.includes("://")?{schemeMissing:!1,url:e}:{schemeMissing:!0,url:"none://".concat(e)}}function Z$(e){return e!=null?(e=e.trim(),e.charAt(e.length-1)===":"&&(e=e.substring(0,e.length-1)),e):null}function Q$(e,r){if(e==null)throw new Error("Unable to extract host from null or undefined URL");return e.trim()}function X$(e,r){var t=typeof e=="string"?parseInt(e,10):e;return t!=null&&!isNaN(t)?t:sO(r)}function J$(e,r){var t=e!=null?ej(e):null,n={};return t!=null&&t.split("&").forEach(function(o){var i=o.split("=");if(i.length!==2)throw new Error("Invalid parameters: '".concat(i.toString(),"' in URL '").concat(r,"'."));var a=wb(i[0],"key",r),s=wb(i[1],"value",r);if(n[a]!==void 0)throw new Error("Duplicated query parameters with key '".concat(a,"' in URL '").concat(r,"'"));n[a]=s}),n}function ej(e){return e=(e??"").trim(),(e==null?void 0:e.charAt(0))==="?"&&(e=e.substring(1,e.length)),e}function wb(e,r,t){if(e=(e??"").trim(),e==="")throw new Error("Illegal empty ".concat(r," in URL query '").concat(t,"'"));return e}function uO(e){var r=e.charAt(0)==="[",t=e.charAt(e.length-1)==="]";if(!r&&!t)return"[".concat(e,"]");if(r&&t)return e;throw new Error("Illegal IPv6 address ".concat(e))}function tj(e){if(e===""||e==null)throw new Error("Illegal host ".concat(e));var r=e.includes(":");return r?uO(e):e}function rj(e,r){return"".concat(e,":").concat(r)}dt.formatIPv4Address=rj;function nj(e,r){var t=uO(e);return"".concat(t,":").concat(r)}dt.formatIPv6Address=nj;function sO(e){return e==="http"?H$:e==="https"?q$:z$}dt.defaultPortForScheme=sO;function oj(e){function r(s,c){var u=s.indexOf(c);return u>=0?[s.substring(0,u),s[u],s.substring(u+1)]:[s,"",""]}function t(s,c){var u=s.lastIndexOf(c);return u>=0?[s.substring(0,u),s[u],s.substring(u+1)]:["","",s]}function n(s,c,u){var l=r(s,c),d=r(l[2],u);return[d[0],d[2]]}function o(s){var c={},u;u=t(s,"@"),u[1]==="@"&&(c.userInfo=decodeURIComponent(u[0]),s=u[2]);var l=iO(n(s,"[","]"),2),d=l[0],h=l[1];return d!==""?(c.host=d,u=r(h,":")):(u=r(s,":"),c.host=u[0]),u[1]===":"&&(c.port=u[2]),c}var i={},a;return a=r(e,":"),a[1]===":"&&(i.scheme=decodeURIComponent(a[0]),e=a[2]),a=r(e,"#"),a[1]==="#"&&(i.fragment=decodeURIComponent(a[2]),e=a[0]),a=r(e,"?"),a[1]==="?"&&(i.query=a[2],e=a[0]),e.startsWith("//")?(a=r(e.substr(2),"/"),i=Zc(Zc({},i),o(a[0])),i.path=a[1]+a[2]):i.path=e,i}var xa={},ij=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),aj=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),uj=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&ij(r,e,t);return aj(r,e),r};Object.defineProperty(xa,"__esModule",{value:!0});xa.ServerAddress=void 0;var Jh=ne,sj=uj(dt),cj=function(){function e(r,t,n,o){this._host=(0,Jh.assertString)(r,"host"),this._resolved=t!=null?(0,Jh.assertString)(t,"resolved"):null,this._port=(0,Jh.assertNumber)(n,"port"),this._hostPort=o,this._stringValue=t!=null?"".concat(o,"(").concat(t,")"):"".concat(o)}return e.prototype.host=function(){return this._host},e.prototype.resolvedHost=function(){return this._resolved!=null?this._resolved:this._host},e.prototype.port=function(){return this._port},e.prototype.resolveWith=function(r){return new e(this._host,r,this._port,this._hostPort)},e.prototype.asHostPort=function(){return this._hostPort},e.prototype.asKey=function(){return this._hostPort},e.prototype.toString=function(){return this._stringValue},e.fromUrl=function(r){var t=sj.parseDatabaseUrl(r);return new e(t.host,null,t.port,t.hostAndPort)},e}();xa.ServerAddress=cj;var Do={},I_={};Object.defineProperty(I_,"__esModule",{value:!0});var lj=function(){function e(){}return e.prototype.resolve=function(){throw new Error("Abstract function")},e.prototype._resolveToItself=function(r){return Promise.resolve([r])},e}();I_.default=lj;var Rl={};Object.defineProperty(Rl,"__esModule",{value:!0});var fj=xa;function dj(e){return Promise.resolve([e])}var hj=function(){function e(r){this._resolverFunction=r??dj}return e.prototype.resolve=function(r){var t=this;return new Promise(function(n){return n(t._resolverFunction(r.asHostPort()))}).then(function(n){if(!Array.isArray(n))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(n));return n.map(function(o){return fj.ServerAddress.fromUrl(o)})})},e}();Rl.default=hj;var cO=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Do,"__esModule",{value:!0});Do.ConfiguredCustomResolver=Do.BaseHostNameResolver=void 0;var pj=cO(I_);Do.BaseHostNameResolver=pj.default;var vj=cO(Rl);Do.ConfiguredCustomResolver=vj.default;var lO={},$l={};Object.defineProperty($l,"__esModule",{value:!0});$l.fromVersion=void 0;function _j(e,r){r===void 0&&(r=function(){return{get userAgent(){var i;return i==null?void 0:i.userAgent}}});var t=r(),n=t.userAgent!=null?t.userAgent.split("(")[1].split(")")[0]:void 0,o=t.userAgent||void 0;return{product:"neo4j-javascript/".concat(e),platform:n,languageDetails:o}}$l.fromVersion=_j;(function(e){var r=f&&f.__createBinding||(Object.create?function(n,o,i,a){a===void 0&&(a=i);var s=Object.getOwnPropertyDescriptor(o,i);(!s||("get"in s?!o.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(n,a,s)}:function(n,o,i,a){a===void 0&&(a=i),n[a]=o[i]}),t=f&&f.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&r(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),t($l,e)})(lO);var fO={},Fr={};Object.defineProperty(Fr,"__esModule",{value:!0});Fr.DEFAULT_ACQUISITION_TIMEOUT=Fr.DEFAULT_MAX_SIZE=void 0;var kc=100;Fr.DEFAULT_MAX_SIZE=kc;var Mc=60*1e3;Fr.DEFAULT_ACQUISITION_TIMEOUT=Mc;var yj=function(){function e(r,t){this.maxSize=Ob(r,kc),this.acquisitionTimeout=Ob(t,Mc)}return e.defaultConfig=function(){return new e(kc,Mc)},e.fromDriverConfig=function(r){var t=cv(r.maxConnectionPoolSize)?r.maxConnectionPoolSize:kc,n=cv(r.connectionAcquisitionTimeout)?r.connectionAcquisitionTimeout:Mc;return new e(t,n)},e}();Fr.default=yj;function Ob(e,r){return cv(e)?e:r}function cv(e){return e===0||e!=null}var R_={},mt=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},gt=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},bj=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(R_,"__esModule",{value:!0});var mj=bj(Fr),Eb=se,gj=Jn,wj=function(){function e(r){var t=r.create,n=t===void 0?function(S,E,P){return mt(w,void 0,void 0,function(){return gt(this,function(C){switch(C.label){case 0:return[4,Promise.reject(new Error("Not implemented"))];case 1:return[2,C.sent()]}})})}:t,o=r.destroy,i=o===void 0?function(S){return mt(w,void 0,void 0,function(){return gt(this,function(E){switch(E.label){case 0:return[4,Promise.resolve()];case 1:return[2,E.sent()]}})})}:o,a=r.validateOnAcquire,s=a===void 0?function(S,E){return!0}:a,c=r.validateOnRelease,u=c===void 0?function(S){return!0}:c,l=r.installIdleObserver,d=l===void 0?function(S,E){}:l,h=r.removeIdleObserver,p=h===void 0?function(S){}:h,v=r.config,y=v===void 0?mj.default.defaultConfig():v,_=r.log,b=_===void 0?gj.Logger.noOp():_,w=this;this._create=n,this._destroy=i,this._validateOnAcquire=s,this._validateOnRelease=u,this._installIdleObserver=d,this._removeIdleObserver=p,this._maxSize=y.maxSize,this._acquisitionTimeout=y.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=b,this._closed=!1}return e.prototype.acquire=function(r,t,n){return mt(this,void 0,void 0,function(){var o,i,a,s=this;return gt(this,function(c){switch(c.label){case 0:return o=t.asKey(),i=this._acquireRequests,a=i[o],a==null&&(i[o]=[]),[4,new Promise(function(u,l){var d=setTimeout(function(){var p=i[o];if(p!=null&&(i[o]=p.filter(function(_){return _!==h})),!h.isCompleted()){var v=s.activeResourceCount(t),y=s.has(t)?s._pools[o].length:0;h.reject((0,Eb.newError)("Connection acquisition timed out in ".concat(s._acquisitionTimeout," ms. Pool status: Active conn count = ").concat(v,", Idle conn count = ").concat(y,".")))}},s._acquisitionTimeout);typeof d=="object"&&d.unref();var h=new Oj(o,r,n,u,l,d,s._log);i[o].push(h),s._processPendingAcquireRequests(t)})];case 1:return[2,c.sent()]}})})},e.prototype.purge=function(r){return mt(this,void 0,void 0,function(){return gt(this,function(t){switch(t.label){case 0:return[4,this._purgeKey(r.asKey())];case 1:return[2,t.sent()]}})})},e.prototype.apply=function(r,t){var n=r.asKey();n in this._pools&&this._pools[n].apply(t)},e.prototype.close=function(){return mt(this,void 0,void 0,function(){var r=this;return gt(this,function(t){switch(t.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(n){return mt(r,void 0,void 0,function(){return gt(this,function(o){switch(o.label){case 0:return[4,this._purgeKey(n)];case 1:return[2,o.sent()]}})})})).then()];case 1:return[2,t.sent()]}})})},e.prototype.keepAll=function(r){return mt(this,void 0,void 0,function(){var t,n,o,i=this;return gt(this,function(a){switch(a.label){case 0:return t=r.map(function(s){return s.asKey()}),n=Object.keys(this._pools),o=n.filter(function(s){return!t.includes(s)}),[4,Promise.all(o.map(function(s){return mt(i,void 0,void 0,function(){return gt(this,function(c){switch(c.label){case 0:return[4,this._purgeKey(s)];case 1:return[2,c.sent()]}})})})).then()];case 1:return[2,a.sent()]}})})},e.prototype.has=function(r){return r.asKey()in this._pools},e.prototype.activeResourceCount=function(r){var t;return(t=this._activeResourceCounts[r.asKey()])!==null&&t!==void 0?t:0},e.prototype._getOrInitializePoolFor=function(r){var t=this._pools[r];return t==null&&(t=new Ej,this._pools[r]=t,this._pendingCreates[r]=0),t},e.prototype._acquire=function(r,t,n){return mt(this,void 0,void 0,function(){var o,i,a,s,c,l,u,l,d,h=this;return gt(this,function(p){switch(p.label){case 0:if(this._closed)throw(0,Eb.newError)("Pool is closed, it is no more able to serve requests.");if(o=t.asKey(),i=this._getOrInitializePoolFor(o),n)return[3,10];p.label=1;case 1:if(!(i.length>0))return[3,10];if(a=i.pop(),a==null)return[3,1];Sb(o,this._activeResourceCounts),this._removeIdleObserver!=null&&this._removeIdleObserver(a),s=!1,p.label=2;case 2:return p.trys.push([2,4,,6]),[4,this._validateOnAcquire(r,a)];case 3:return s=p.sent(),[3,6];case 4:return c=p.sent(),ep(o,this._activeResourceCounts),i.removeInUse(a),[4,this._destroy(a)];case 5:throw p.sent(),c;case 6:return s?(this._log.isDebugEnabled()&&this._log.debug("".concat(a," acquired from the pool ").concat(o)),[2,{resource:a,pool:i}]):[3,7];case 7:return ep(o,this._activeResourceCounts),i.removeInUse(a),[4,this._destroy(a)];case 8:p.sent(),p.label=9;case 9:return[3,1];case 10:if(this._maxSize>0&&(l=this.activeResourceCount(t)+this._pendingCreates[o],l>=this._maxSize))return[2,{resource:null,pool:i}];this._pendingCreates[o]=this._pendingCreates[o]+1,p.label=11;case 11:return p.trys.push([11,,15,16]),l=this.activeResourceCount(t)+i.length,l>=this._maxSize&&n?(d=i.pop(),d==null?[3,13]:(this._removeIdleObserver!=null&&this._removeIdleObserver(d),i.removeInUse(d),[4,this._destroy(d)])):[3,13];case 12:p.sent(),p.label=13;case 13:return[4,this._create(r,t,function(v,y){return mt(h,void 0,void 0,function(){return gt(this,function(_){switch(_.label){case 0:return[4,this._release(v,y,i)];case 1:return[2,_.sent()]}})})})];case 14:return u=p.sent(),i.pushInUse(u),Sb(o,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(u," created for the pool ").concat(o)),[3,16];case 15:return this._pendingCreates[o]=this._pendingCreates[o]-1,[7];case 16:return[2,{resource:u,pool:i}]}})})},e.prototype._release=function(r,t,n){return mt(this,void 0,void 0,function(){var o,i=this;return gt(this,function(a){switch(a.label){case 0:o=r.asKey(),a.label=1;case 1:return a.trys.push([1,,9,10]),n.isActive()?[4,this._validateOnRelease(t)]:[3,6];case 2:return a.sent()?[3,4]:(this._log.isDebugEnabled()&&this._log.debug("".concat(t," destroyed and can't be released to the pool ").concat(o," because it is not functional")),n.removeInUse(t),[4,this._destroy(t)]);case 3:return a.sent(),[3,5];case 4:this._installIdleObserver!=null&&this._installIdleObserver(t,{onError:function(s){i._log.debug("Idle connection ".concat(t," destroyed because of error: ").concat(s));var c=i._pools[o];c!=null&&(i._pools[o]=c.filter(function(u){return u!==t}),c.removeInUse(t)),i._destroy(t).catch(function(){})}}),n.push(t),this._log.isDebugEnabled()&&this._log.debug("".concat(t," released to the pool ").concat(o)),a.label=5;case 5:return[3,8];case 6:return this._log.isDebugEnabled()&&this._log.debug("".concat(t," destroyed and can't be released to the pool ").concat(o," because pool has been purged")),n.removeInUse(t),[4,this._destroy(t)];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:return ep(o,this._activeResourceCounts),this._processPendingAcquireRequests(r),[7];case 10:return[2]}})})},e.prototype._purgeKey=function(r){return mt(this,void 0,void 0,function(){var t,n,o;return gt(this,function(i){switch(i.label){case 0:if(t=this._pools[r],n=[],t==null)return[3,2];for(;t.length>0;)o=t.pop(),o!=null&&(this._removeIdleObserver!=null&&this._removeIdleObserver(o),n.push(this._destroy(o)));return t.close(),delete this._pools[r],[4,Promise.all(n)];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype._processPendingAcquireRequests=function(r){var t=this,n=r.asKey(),o=this._acquireRequests[n];if(o!=null){var i=o.shift();i!=null?this._acquire(i.context,r,i.requireNew).catch(function(a){return i.reject(a),{resource:null,pool:null}}).then(function(a){var s=a.resource,c=a.pool;s!=null&&c!=null?i.isCompleted()?t._release(r,s,c).catch(function(u){t._log.isDebugEnabled()&&t._log.debug("".concat(s," could not be release back to the pool. Cause: ").concat(u))}):i.resolve(s):i.isCompleted()||(t._acquireRequests[n]==null&&(t._acquireRequests[n]=[]),t._acquireRequests[n].unshift(i))}).catch(function(a){return i.reject(a)}):delete this._acquireRequests[n]}},e}();function Sb(e,r){var t,n=(t=r[e])!==null&&t!==void 0?t:0;r[e]=n+1}function ep(e,r){var t,n=(t=r[e])!==null&&t!==void 0?t:0,o=n-1;o>0?r[e]=o:delete r[e]}var Oj=function(){function e(r,t,n,o,i,a,s){this._key=r,this._context=t,this._resolve=o,this._reject=i,this._timeoutId=a,this._log=s,this._completed=!1,this._config=n??{}}return Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requireNew",{get:function(){var r;return(r=this._config.requireNew)!==null&&r!==void 0?r:!1},enumerable:!1,configurable:!0}),e.prototype.isCompleted=function(){return this._completed},e.prototype.resolve=function(r){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(r," acquired from the pool ").concat(this._key)),this._resolve(r))},e.prototype.reject=function(r){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(r))},e}(),Ej=function(){function e(){this._active=!0,this._elements=[],this._elementsInUse=new Set}return e.prototype.isActive=function(){return this._active},e.prototype.close=function(){this._active=!1,this._elements=[],this._elementsInUse=new Set},e.prototype.filter=function(r){return this._elements=this._elements.filter(r),this},e.prototype.apply=function(r){this._elements.forEach(r),this._elementsInUse.forEach(r)},Object.defineProperty(e.prototype,"length",{get:function(){return this._elements.length},enumerable:!1,configurable:!0}),e.prototype.pop=function(){var r=this._elements.pop();return r!=null&&this._elementsInUse.add(r),r},e.prototype.push=function(r){return this._elementsInUse.delete(r),this._elements.push(r)},e.prototype.pushInUse=function(r){this._elementsInUse.add(r)},e.prototype.removeInUse=function(r){this._elementsInUse.delete(r)},e}();R_.default=wj;(function(e){var r=f&&f.__createBinding||(Object.create?function(s,c,u,l){l===void 0&&(l=u);var d=Object.getOwnPropertyDescriptor(c,u);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(s,l,d)}:function(s,c,u,l){l===void 0&&(l=u),s[l]=c[u]}),t=f&&f.__setModuleDefault||(Object.create?function(s,c){Object.defineProperty(s,"default",{enumerable:!0,value:c})}:function(s,c){s.default=c}),n=f&&f.__importStar||function(s){if(s&&s.__esModule)return s;var c={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&r(c,s,u);return t(c,s),c},o=f&&f.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_MAX_SIZE=e.DEFAULT_ACQUISITION_TIMEOUT=e.PoolConfig=e.Pool=void 0;var i=n(Fr);e.PoolConfig=i.default,Object.defineProperty(e,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return i.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(e,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return i.DEFAULT_MAX_SIZE}});var a=o(R_);e.Pool=a.default,e.default=a.default})(fO);var Sj=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Pj=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),at=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Sj(r,e,t);return Pj(r,e),r};Object.defineProperty(ie,"__esModule",{value:!0});ie.pool=ie.boltAgent=ie.objectUtil=ie.resolver=ie.serverAddress=ie.urlUtil=ie.logger=ie.transactionExecutor=ie.txConfig=ie.connectionHolder=ie.constants=ie.bookmarks=ie.observer=ie.temporalUtil=ie.util=void 0;var Tj=at(ne);ie.util=Tj;var Cj=at(P_);ie.temporalUtil=Cj;var Aj=at(Ur);ie.observer=Aj;var Ij=at(Qr);ie.bookmarks=Ij;var Rj=at(z);ie.constants=Rj;var $j=at(Ut);ie.connectionHolder=$j;var jj=at(oi);ie.txConfig=jj;var Nj=at(Ba);ie.transactionExecutor=Nj;var kj=at(Jn);ie.logger=kj;var Mj=at(dt);ie.urlUtil=Mj;var Dj=at(xa);ie.serverAddress=Dj;var Lj=at(Do);ie.resolver=Lj;var Uj=at(pr);ie.objectUtil=Uj;var Fj=at(lO);ie.boltAgent=Fj;var Bj=at(fO);ie.pool=Bj;var Se={},Ca=f&&f.__assign||function(){return Ca=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ca.apply(this,arguments)},xj=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Vj=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Wj=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&xj(r,e,t);return Vj(r,e),r},zj=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Hj=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(Se,"__esModule",{value:!0});Se.buildNotificationsFromMetadata=Se.buildGqlStatusObjectFromMetadata=Se.polyfillNotification=Se.polyfillGqlStatusObject=Se.GqlStatusObject=Se.Notification=Se.notificationClassification=Se.notificationCategory=Se.notificationSeverityLevel=void 0;var qj=Wj(Bt),tp=ie,na=O_,lv={WARNING:{gql_status:"01N42",status_description:"warn: unknown warning"},NO_DATA:{gql_status:"02N42",status_description:"note: no data - unknown subcondition"},INFORMATION:{gql_status:"03N42",status_description:"info: unknown notification"}},Va={WARNING:"WARNING",INFORMATION:"INFORMATION",UNKNOWN:"UNKNOWN"};Se.notificationSeverityLevel=Va;Object.freeze(Va);var Gj=Object.values(Va),jl={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",DEPRECATION:"DEPRECATION",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",GENERIC:"GENERIC",SCHEMA:"SCHEMA",UNKNOWN:"UNKNOWN"};Se.notificationCategory=jl;Object.freeze(jl);var Kj=Object.values(jl),dO=jl;Se.notificationClassification=dO;var Nl=function(){function e(r){this.code=r.code,this.title=r.title,this.description=r.description,this.severity=r.severity,this.position=vO(r.position),this.severityLevel=_O(r.severity),this.rawSeverityLevel=r.severity,this.category=yO(r.category),this.rawCategory=r.category}return e}();Se.Notification=Nl;var In=function(){function e(r){var t;this.gqlStatus=r.gql_status,this.statusDescription=r.status_description,this.diagnosticRecord=(t=r.diagnostic_record)!==null&&t!==void 0?t:{},this.position=this.diagnosticRecord._position!=null?vO(this.diagnosticRecord._position):void 0,this.severity=_O(this.diagnosticRecord._severity),this.rawSeverity=this.diagnosticRecord._severity,this.classification=yO(this.diagnosticRecord._classification),this.rawClassification=this.diagnosticRecord._classification,this.isNotification=r.neo4j_code!=null,Object.freeze(this)}return Object.defineProperty(e.prototype,"diagnosticRecordAsJsonString",{get:function(){return qj.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),e}();Se.GqlStatusObject=In;function hO(e){var r,t,n;if(e.neo4j_code!=null)return new Nl({code:e.neo4j_code,title:e.title,description:e.description,severity:(r=e.diagnostic_record)===null||r===void 0?void 0:r._severity,category:(t=e.diagnostic_record)===null||t===void 0?void 0:t._classification,position:(n=e.diagnostic_record)===null||n===void 0?void 0:n._position})}Se.polyfillNotification=hO;function pO(e){var r,t=e.severity===Va.WARNING?lv.WARNING:lv.INFORMATION,n={gql_status:t.gql_status,status_description:(r=e.description)!==null&&r!==void 0?r:t.status_description,neo4j_code:e.code,title:e.title,diagnostic_record:Ca({},na.rawPolyfilledDiagnosticRecord)};return e.severity!=null&&(n.diagnostic_record._severity=e.severity),e.category!=null&&(n.diagnostic_record._classification=e.category),e.position!=null&&(n.diagnostic_record._position=e.position),new In(n)}Se.polyfillGqlStatusObject=pO;var oa={SUCCESS:new In({gql_status:"00000",status_description:"note: successful completion",diagnostic_record:na.rawPolyfilledDiagnosticRecord}),NO_DATA:new In({gql_status:"02000",status_description:"note: no data",diagnostic_record:na.rawPolyfilledDiagnosticRecord}),NO_DATA_UNKNOWN_SUBCONDITION:new In(Ca(Ca({},lv.NO_DATA),{diagnostic_record:na.rawPolyfilledDiagnosticRecord})),OMITTED_RESULT:new In({gql_status:"00001",status_description:"note: successful completion - omitted result",diagnostic_record:na.rawPolyfilledDiagnosticRecord})};Object.freeze(oa);function Yj(e){var r,t;function n(a){return(a==null?void 0:a.have_records_streamed)===!0?oa.SUCCESS:(a==null?void 0:a.has_keys)===!1?oa.OMITTED_RESULT:(a==null?void 0:a.pulled)===!0?oa.NO_DATA:oa.NO_DATA_UNKNOWN_SUBCONDITION}if(e.statuses!=null)return e.statuses.map(function(a){return new In(a)});var o=n(e.stream_summary),i=Hj([o],zj((t=(r=e.notifications)===null||r===void 0?void 0:r.map(pO))!==null&&t!==void 0?t:[]),!1);return i.sort(function(a,s){return Pb(a)-Pb(s)})}Se.buildGqlStatusObjectFromMetadata=Yj;var Zj=Object.freeze({"02":0,"01":1,"00":2});function Pb(e){var r,t,n=(r=e.gqlStatus)===null||r===void 0?void 0:r.slice(0,2);return(t=Zj[n])!==null&&t!==void 0?t:9999}function Qj(e){return e.notifications!=null?e.notifications.map(function(r){return new Nl(r)}):e.statuses!=null?e.statuses.map(hO).filter(function(r){return r!=null}):[]}Se.buildNotificationsFromMetadata=Qj;function vO(e){return e==null?{}:{offset:tp.util.toNumber(e.offset),line:tp.util.toNumber(e.line),column:tp.util.toNumber(e.column)}}function _O(e){return Gj.includes(e)?e:Va.UNKNOWN}function yO(e){return Kj.includes(e)?e:dO.UNKNOWN}Se.default=Nl;Object.defineProperty(Xe,"__esModule",{value:!0});Xe.Stats=Xe.QueryStatistics=Xe.ProfiledPlan=Xe.Plan=Xe.ServerInfo=Xe.queryType=void 0;var fv=ie,Tb=Se,Xj=function(){function e(r,t,n,o){var i,a,s;this.query={text:r,parameters:t},this.queryType=n.type,this.counters=new bO((i=n.stats)!==null&&i!==void 0?i:{}),this.updateStatistics=this.counters,this.plan=n.plan!=null||n.profile!=null?new dv((a=n.plan)!==null&&a!==void 0?a:n.profile):!1,this.profile=n.profile!=null?new hv(n.profile):!1,this.notifications=(0,Tb.buildNotificationsFromMetadata)(n),this.gqlStatusObjects=(0,Tb.buildGqlStatusObjectFromMetadata)(n),this.server=new mO(n.server,o),this.resultConsumedAfter=n.result_consumed_after,this.resultAvailableAfter=n.result_available_after,this.database={name:(s=n.db)!==null&&s!==void 0?s:null}}return e.prototype.hasPlan=function(){return this.plan instanceof dv},e.prototype.hasProfile=function(){return this.profile instanceof hv},e}(),dv=function(){function e(r){this.operatorType=r.operatorType,this.identifiers=r.identifiers,this.arguments=r.args,this.children=r.children!=null?r.children.map(function(t){return new e(t)}):[]}return e}();Xe.Plan=dv;var hv=function(){function e(r){this.operatorType=r.operatorType,this.identifiers=r.identifiers,this.arguments=r.args,this.dbHits=vo("dbHits",r),this.rows=vo("rows",r),this.pageCacheMisses=vo("pageCacheMisses",r),this.pageCacheHits=vo("pageCacheHits",r),this.pageCacheHitRatio=vo("pageCacheHitRatio",r),this.time=vo("time",r),this.children=r.children!=null?r.children.map(function(t){return new e(t)}):[]}return e.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},e}();Xe.ProfiledPlan=hv;var Jj=function(){function e(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0}return e}();Xe.Stats=Jj;var bO=function(){function e(r){var t=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(r).forEach(function(n){var o=n.replace(/(-\w)/g,function(i){return i[1].toUpperCase()});o in t._stats?t._stats[o]=fv.util.toNumber(r[n]):o==="systemUpdates"?t._systemUpdates=fv.util.toNumber(r[n]):o==="containsSystemUpdates"?t._containsSystemUpdates=r[n]:o==="containsUpdates"&&(t._containsUpdates=r[n])}),this._stats=Object.freeze(this._stats)}return e.prototype.containsUpdates=function(){var r=this;return this._containsUpdates!==void 0?this._containsUpdates:Object.keys(this._stats).reduce(function(t,n){return t+r._stats[n]},0)>0},e.prototype.updates=function(){return this._stats},e.prototype.containsSystemUpdates=function(){return this._containsSystemUpdates!==void 0?this._containsSystemUpdates:this._systemUpdates>0},e.prototype.systemUpdates=function(){return this._systemUpdates},e}();Xe.QueryStatistics=bO;var mO=function(){function e(r,t){r!=null&&(this.address=r.address,this.agent=r.version),this.protocolVersion=t}return e}();Xe.ServerInfo=mO;function vo(e,r,t){if(t===void 0&&(t=0),r!==!1&&e in r){var n=r[e];return fv.util.toNumber(n)}else return t}var eN={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"};Xe.queryType=eN;Xe.default=Xj;var vr={};Object.defineProperty(vr,"__esModule",{value:!0});vr.notificationFilterDisabledClassification=vr.notificationFilterDisabledCategory=vr.notificationFilterMinimumSeverityLevel=void 0;var gO={OFF:"OFF",WARNING:"WARNING",INFORMATION:"INFORMATION"};vr.notificationFilterMinimumSeverityLevel=gO;Object.freeze(gO);var $_={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",DEPRECATION:"DEPRECATION",GENERIC:"GENERIC",SCHEMA:"SCHEMA"};vr.notificationFilterDisabledCategory=$_;Object.freeze($_);var tN=$_;vr.notificationFilterDisabledClassification=tN;var rN=function(){function e(){throw this.minimumSeverityLevel=void 0,this.disabledCategories=void 0,this.disabledClassifications=void 0,new Error("Not implemented")}return e}();vr.default=rN;var Wa={},pn=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},vn=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},nN=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},wO;Object.defineProperty(Wa,"__esModule",{value:!0});var oN=nN(Xe),OO=ie,Wi=se,iN=OO.connectionHolder.EMPTY_CONNECTION_HOLDER,aN=function(e){console.log("Uncaught error when processing result: "+e)},uN=function(e){},sN=function(e){},cN=function(){function e(r,t,n,o,i){i===void 0&&(i={high:Number.MAX_VALUE,low:Number.MAX_VALUE}),this[wO]="Result",this._stack=lN(),this._streamObserverPromise=r,this._p=null,this._query=t,this._parameters=n??{},this._connectionHolder=o??iN,this._keys=null,this._summary=null,this._error=null,this._watermarks=i}return e.prototype.keys=function(){var r=this;return this._keys!==null?Promise.resolve(this._keys):this._error!==null?Promise.reject(this._error):new Promise(function(t,n){r._streamObserverPromise.then(function(o){return o.subscribe(r._decorateObserver({onKeys:function(i){return t(i)},onError:function(i){return n(i)}}))}).catch(n)})},e.prototype.summary=function(){var r=this;return this._summary!==null?Promise.resolve(this._summary):this._error!==null?Promise.reject(this._error):new Promise(function(t,n){r._streamObserverPromise.then(function(o){o.cancel(),o.subscribe(r._decorateObserver({onCompleted:function(i){return t(i)},onError:function(i){return n(i)}}))}).catch(n)})},e.prototype._getOrCreatePromise=function(){var r=this;return this._p==null&&(this._p=new Promise(function(t,n){var o=[],i={onNext:function(a){o.push(a)},onCompleted:function(a){t({records:o,summary:a})},onError:function(a){n(a)}};r.subscribe(i)})),this._p},e.prototype[Symbol.asyncIterator]=function(){var r=this;if(!this.isOpen()){var t=(0,Wi.newError)("Result is already consumed");return{next:function(){return Promise.reject(t)},peek:function(){return Promise.reject(t)}}}var n={paused:!0,firstRun:!0,finished:!1},o=function(){var s,c;if(n.streaming!=null){var u=(c=(s=n.queuedObserver)===null||s===void 0?void 0:s.size)!==null&&c!==void 0?c:0,l=u>=r._watermarks.high,d=u<=r._watermarks.low;l&&!n.paused?(n.paused=!0,n.streaming.pause()):(d&&n.paused||n.firstRun&&!l)&&(n.firstRun=!1,n.paused=!1,n.streaming.resume())}},i=function(){return pn(r,void 0,void 0,function(){var s;return vn(this,function(c){switch(c.label){case 0:return n.queuedObserver!==void 0?[3,2]:(n.queuedObserver=this._createQueuedResultObserver(o),s=n,[4,this._subscribe(n.queuedObserver,!0).catch(function(){})]);case 1:s.streaming=c.sent(),o(),c.label=2;case 2:return[2,n.queuedObserver]}})})},a=function(s){if(s===void 0)throw(0,Wi.newError)("InvalidState: Result stream finished without Summary",Wi.PROTOCOL_ERROR);return!0};return{next:function(){return pn(r,void 0,void 0,function(){var s,c;return vn(this,function(u){switch(u.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:n.summary}]:[4,i()];case 1:return s=u.sent(),[4,s.dequeue()];case 2:return c=u.sent(),c.done===!0&&(n.finished=c.done,n.summary=c.value),[2,c]}})})},return:function(s){return pn(r,void 0,void 0,function(){var c,u,l;return vn(this,function(d){switch(d.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:s??n.summary}]:((l=n.streaming)===null||l===void 0||l.cancel(),[4,i()]);case 1:return c=d.sent(),[4,c.dequeueUntilDone()];case 2:return u=d.sent(),n.finished=!0,u.value=s??u.value,n.summary=u.value,[2,u]}})})},peek:function(){return pn(r,void 0,void 0,function(){var s;return vn(this,function(c){switch(c.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:n.summary}]:[4,i()];case 1:return s=c.sent(),[4,s.head()];case 2:return[2,c.sent()]}})})}}},e.prototype.then=function(r,t){return this._getOrCreatePromise().then(r,t)},e.prototype.catch=function(r){return this._getOrCreatePromise().catch(r)},e.prototype.finally=function(r){return this._getOrCreatePromise().finally(r)},e.prototype.subscribe=function(r){this._subscribe(r).catch(function(){})},e.prototype.isOpen=function(){return this._summary===null&&this._error===null},e.prototype._subscribe=function(r,t){t===void 0&&(t=!1);var n=this._decorateObserver(r);return this._streamObserverPromise.then(function(o){return t&&o.pause(),o.subscribe(n),o}).catch(function(o){return n.onError!=null&&n.onError(o),Promise.reject(o)})},e.prototype._decorateObserver=function(r){var t=this,n,o,i,a=(n=r.onCompleted)!==null&&n!==void 0?n:uN,s=(o=r.onError)!==null&&o!==void 0?o:aN,c=(i=r.onKeys)!==null&&i!==void 0?i:sN,u=function(h){t._releaseConnectionAndGetSummary(h).then(function(p){return t._summary!==null?a.call(r,t._summary):(t._summary=p,a.call(r,p))}).catch(s)},l=function(h){t._connectionHolder.releaseConnection().then(function(){fN(h,t._stack),t._error=h,s.call(r,h)}).catch(s)},d=function(h){return t._keys=h,c.call(r,h)};return{onNext:r.onNext!=null?r.onNext.bind(r):void 0,onKeys:d,onCompleted:u,onError:l}},e.prototype._cancel=function(){this._summary===null&&this._error===null&&this._streamObserverPromise.then(function(r){return r.cancel()}).catch(function(){})},e.prototype._releaseConnectionAndGetSummary=function(r){var t=OO.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),n=t.validatedQuery,o=t.params,i=this._connectionHolder;return i.getConnection().then(function(a){return i.releaseConnection().then(function(){return a==null?void 0:a.getProtocolVersion()})},function(a){}).then(function(a){return new oN.default(n,o,r,a)})},e.prototype._createQueuedResultObserver=function(r){var t=this;function n(){var u={};return u.promise=new Promise(function(l,d){u.resolve=l,u.reject=d}),u}function o(u){return u instanceof Error}function i(){var u;return pn(this,void 0,void 0,function(){var l;return vn(this,function(d){switch(d.label){case 0:if(a.length>0){if(l=(u=a.shift())!==null&&u!==void 0?u:(0,Wi.newError)("Unexpected empty buffer",Wi.PROTOCOL_ERROR),r(),o(l))throw l;return[2,l]}return s.resolvable=n(),[4,s.resolvable.promise];case 1:return[2,d.sent()]}})})}var a=[],s={resolvable:null},c={onNext:function(u){c._push({done:!1,value:u})},onCompleted:function(u){c._push({done:!0,value:u})},onError:function(u){c._push(u)},_push:function(u){if(s.resolvable!==null){var l=s.resolvable;s.resolvable=null,o(u)?l.reject(u):l.resolve(u)}else a.push(u),r()},dequeue:i,dequeueUntilDone:function(){return pn(t,void 0,void 0,function(){var u;return vn(this,function(l){switch(l.label){case 0:return[4,i()];case 1:return u=l.sent(),u.done===!0?[2,u]:[3,0];case 2:return[2]}})})},head:function(){return pn(t,void 0,void 0,function(){var u,u,l;return vn(this,function(d){switch(d.label){case 0:if(a.length>0){if(u=a[0],o(u))throw u;return[2,u]}s.resolvable=n(),d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,s.resolvable.promise];case 2:return u=d.sent(),a.unshift(u),[2,u];case 3:throw l=d.sent(),a.unshift(l),l;case 4:return r(),[7];case 5:return[2]}})})},get size(){return a.length}};return c},e}();wO=Symbol.toStringTag;function lN(){var e=new Error("");return e.stack!=null?e.stack.replace(/^Error(\n\r)*/,""):null}function fN(e,r){r!=null&&(e.stack=e.toString()+`
`+r)}Wa.default=cN;var kl={};Object.defineProperty(kl,"__esModule",{value:!0});var dN=function(){function e(r,t,n){this.keys=r,this.records=t,this.summary=n}return e}();kl.default=dN;var za={};Object.defineProperty(za,"__esModule",{value:!0});za.Releasable=void 0;var hN=function(){function e(){}return e.prototype.release=function(){throw new Error("Not implemented")},e}();za.Releasable=hN;var pN=function(){function e(){}return e.prototype.acquireConnection=function(r){throw Error("Not implemented")},e.prototype.supportsMultiDb=function(){throw Error("Not implemented")},e.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},e.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},e.prototype.supportsSessionAuth=function(){throw Error("Not implemented")},e.prototype.SSREnabled=function(){return!1},e.prototype.verifyConnectivityAndGetServerInfo=function(r){throw Error("Not implemented")},e.prototype.verifyAuthentication=function(r){throw Error("Not implemented")},e.prototype.getNegotiatedProtocolVersion=function(){throw Error("Not Implemented")},e.prototype.close=function(){throw Error("Not implemented")},e}();za.default=pN;var j_={};Object.defineProperty(j_,"__esModule",{value:!0});var vN=function(){function e(){}return e.prototype.beginTransaction=function(r){throw new Error("Not implemented")},e.prototype.run=function(r,t,n){throw new Error("Not implemented")},e.prototype.commitTransaction=function(r){throw new Error("Not implemented")},e.prototype.rollbackTransaction=function(r){throw new Error("Not implemented")},e.prototype.resetAndFlush=function(){throw new Error("Not implemented")},e.prototype.isOpen=function(){throw new Error("Not implemented")},e.prototype.getProtocolVersion=function(){throw new Error("Not implemented")},e.prototype.hasOngoingObservableRequests=function(){throw new Error("Not implemented")},e}();j_.default=vN;var Ml={},Cb=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Ab=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},_N=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ml,"__esModule",{value:!0});var yN=ne,pa=Ut,Dc=Qr,bN=oi,$t=Ur,kt=se,EO=_N(Wa),mN=function(){function e(r){var t=r.connectionHolder,n=r.onClose,o=r.onBookmarks,i=r.onConnection,a=r.reactive,s=r.fetchSize,c=r.impersonatedUser,u=r.highRecordWatermark,l=r.lowRecordWatermark,d=r.notificationFilter,h=r.apiTelemetryConfig,p=this;this._connectionHolder=t,this._reactive=a,this._state=Ot.ACTIVE,this._onClose=n,this._onBookmarks=o,this._onConnection=i,this._onError=this._onErrorCallback.bind(this),this._fetchSize=s,this._onComplete=this._onCompleteCallback.bind(this),this._results=[],this._impersonatedUser=c,this._lowRecordWatermak=l,this._highRecordWatermark=u,this._bookmarks=Dc.Bookmarks.empty(),this._notificationFilter=d,this._apiTelemetryConfig=h,this._acceptActive=function(){},this._activePromise=new Promise(function(v,y){p._acceptActive=v})}return e.prototype._begin=function(r,t,n){var o=this;this._connectionHolder.getConnection().then(function(i){return Cb(o,void 0,void 0,function(){var a,s=this;return Ab(this,function(c){switch(c.label){case 0:return this._onConnection(),i==null?[3,2]:(a=this,[4,r()]);case 1:return a._bookmarks=c.sent(),[2,i.beginTransaction({bookmarks:this._bookmarks,txConfig:t,mode:this._connectionHolder.mode(),database:this._connectionHolder.database(),impersonatedUser:this._impersonatedUser,notificationFilter:this._notificationFilter,apiTelemetryConfig:this._apiTelemetryConfig,beforeError:function(u){n!=null&&n.onError(u),s._onError(u).catch(function(){})},afterComplete:function(u){n!=null&&n.onComplete(u),u.db!==void 0&&(n==null?void 0:n.onDB)!=null&&n.onDB(u.db),s._onComplete(u)}})];case 2:throw(0,kt.newError)("No connection available")}})})}).catch(function(i){n!=null&&n.onError(i),o._onError(i).catch(function(){})}).finally(function(){return o._acceptActive()})},e.prototype.run=function(r,t){var n=(0,yN.validateQueryAndParameters)(r,t),o=n.validatedQuery,i=n.params,a=this._state.run(o,i,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize,highRecordWatermark:this._highRecordWatermark,lowRecordWatermark:this._lowRecordWatermak,preparationJob:this._activePromise});return this._results.push(a),a},e.prototype.commit=function(){var r=this,t=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:function(n){return r._onCompleteCallback(n,r._bookmarks)},onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=t.state,this._onClose(),new Promise(function(n,o){t.result.subscribe({onCompleted:function(){return n()},onError:function(i){return o(i)}})})},e.prototype.rollback=function(){var r=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=r.state,this._onClose(),new Promise(function(t,n){r.result.subscribe({onCompleted:function(){return t()},onError:function(o){return n(o)}})})},e.prototype.isOpen=function(){return this._state===Ot.ACTIVE},e.prototype.close=function(){return Cb(this,void 0,void 0,function(){return Ab(this,function(r){switch(r.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._onErrorCallback=function(r){return this._state===Ot.FAILED?Promise.resolve(null):(this._state=Ot.FAILED,this._onClose(),this._results.forEach(function(t){t.isOpen()&&t._streamObserverPromise.then(function(n){return n.onError(r)}).catch(function(n){})}),this._connectionHolder.releaseConnection())},e.prototype._onCompleteCallback=function(r,t){this._onBookmarks(new Dc.Bookmarks(r==null?void 0:r.bookmark),t??Dc.Bookmarks.empty(),r==null?void 0:r.db)},e}(),Ot={ACTIVE:{commit:function(e){var r=e.connectionHolder,t=e.onError,n=e.onComplete,o=e.onConnection,i=e.pendingResults,a=e.preparationJob;return{result:Ib(!0,r,t,n,o,i,a),state:Ot.SUCCEEDED}},rollback:function(e){var r=e.connectionHolder,t=e.onError,n=e.onComplete,o=e.onConnection,i=e.pendingResults,a=e.preparationJob;return{result:Ib(!1,r,t,n,o,i,a),state:Ot.ROLLED_BACK}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError,i=t.onComplete,a=t.onConnection,s=t.reactive,c=t.fetchSize,u=t.highRecordWatermark,l=t.lowRecordWatermark,d=t.preparationJob,h=d??Promise.resolve(),p=n.getConnection().then(function(v){return h.then(function(){return v})}).then(function(v){if(a(),v!=null)return v.run(e,r,{bookmarks:Dc.Bookmarks.empty(),txConfig:bN.TxConfig.empty(),beforeError:o,afterComplete:i,reactive:s,fetchSize:c,highRecordWatermark:u,lowRecordWatermark:l});throw(0,kt.newError)("No connection available")}).catch(function(v){return new $t.FailedObserver({error:v,onError:o})});return qt(p,e,r,n,u,l)}},FAILED:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:qt(new $t.FailedObserver({error:(0,kt.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:t}),"COMMIT",{},r,0,0),state:Ot.FAILED}},rollback:function(e){var r=e.connectionHolder;return e.onError,e.onComplete,{result:qt(new $t.CompletedObserver,"ROLLBACK",{},r,0,0),state:Ot.FAILED}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError;return t.onComplete,qt(new $t.FailedObserver({error:(0,kt.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:o}),e,r,n,0,0)}},SUCCEEDED:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:qt(new $t.FailedObserver({error:(0,kt.newError)("Cannot commit this transaction, because it has already been committed."),onError:t}),"COMMIT",{},pa.EMPTY_CONNECTION_HOLDER,0,0),state:Ot.SUCCEEDED,connectionHolder:r}},rollback:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:qt(new $t.FailedObserver({error:(0,kt.newError)("Cannot rollback this transaction, because it has already been committed."),onError:t}),"ROLLBACK",{},pa.EMPTY_CONNECTION_HOLDER,0,0),state:Ot.SUCCEEDED,connectionHolder:r}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError;return t.onComplete,qt(new $t.FailedObserver({error:(0,kt.newError)("Cannot run query in this transaction, because it has already been committed."),onError:o}),e,r,n,0,0)}},ROLLED_BACK:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:qt(new $t.FailedObserver({error:(0,kt.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:t}),"COMMIT",{},r,0,0),state:Ot.ROLLED_BACK}},rollback:function(e){var r=e.connectionHolder;return e.onError,e.onComplete,{result:qt(new $t.FailedObserver({error:(0,kt.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},r,0,0),state:Ot.ROLLED_BACK}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError;return t.onComplete,qt(new $t.FailedObserver({error:(0,kt.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:o}),e,r,n,0,0)}}};function Ib(e,r,t,n,o,i,a){var s=a??Promise.resolve(),c=r.getConnection().then(function(u){return s.then(function(){return u})}).then(function(u){return o(),i.forEach(function(l){return l._cancel()}),Promise.all(i.map(function(l){return l.summary()})).then(function(l){if(u!=null)return e?u.commitTransaction({beforeError:t,afterComplete:n}):u.rollbackTransaction({beforeError:t,afterComplete:n});throw(0,kt.newError)("No connection available")})}).catch(function(u){return new $t.FailedObserver({error:u,onError:t})});return new EO.default(c,e?"COMMIT":"ROLLBACK",{},r,{high:Number.MAX_VALUE,low:Number.MAX_VALUE})}function qt(e,r,t,n,o,i){return n===void 0&&(n=pa.EMPTY_CONNECTION_HOLDER),new EO.default(Promise.resolve(e),r,t,new pa.ReadOnlyConnectionHolder(n??pa.EMPTY_CONNECTION_HOLDER),{low:i,high:o})}Ml.default=mN;var Dl={};Object.defineProperty(Dl,"__esModule",{value:!0});var gN=function(){function e(r){var t=r.run;this._run=t}return e.fromTransaction=function(r){return new e({run:r.run.bind(r)})},e.prototype.run=function(r,t){return this._run(r,t)},e}();Dl.default=gN;var Ll={},wN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qc=f&&f.__assign||function(){return Qc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Qc.apply(this,arguments)},ON=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},SO;Object.defineProperty(Ll,"__esModule",{value:!0});var EN=ON(Ml),SN=function(e){wN(r,e);function r(t){var n=t.connectionHolder,o=t.onClose,i=t.onBookmarks,a=t.onConnection,s=t.reactive,c=t.fetchSize,u=t.impersonatedUser,l=t.highRecordWatermark,d=t.lowRecordWatermark,h=t.notificationFilter,p=t.apiTelemetryConfig,v=t.onDbCallback,y=e.call(this,{connectionHolder:n,onClose:o,onBookmarks:i,onConnection:a,reactive:s,fetchSize:c,impersonatedUser:u,highRecordWatermark:l,lowRecordWatermark:d,notificationFilter:h,apiTelemetryConfig:p})||this;return y[SO]="TransactionPromise",y._onDbCallback=v,y}return r.prototype.then=function(t,n){return this._getOrCreateBeginPromise().then(t,n)},r.prototype.catch=function(t){return this._getOrCreateBeginPromise().catch(t)},r.prototype.finally=function(t){return this._getOrCreateBeginPromise().finally(t)},r.prototype._getOrCreateBeginPromise=function(){var t=this;return this._beginPromise==null&&(this._beginPromise=new Promise(function(n,o){t._resolve=n,t._reject=o,t._beginError!=null&&o(t._beginError),t._beginMetadata!=null&&n(t._toTransaction())})),this._beginPromise},r.prototype._toTransaction=function(){return Qc(Qc({},this),{run:e.prototype.run.bind(this),commit:e.prototype.commit.bind(this),rollback:e.prototype.rollback.bind(this),close:e.prototype.close.bind(this),isOpen:e.prototype.isOpen.bind(this),_begin:this._begin.bind(this)})},r.prototype._begin=function(t,n){return e.prototype._begin.call(this,t,n,{onError:this._onBeginError.bind(this),onComplete:this._onBeginMetadata.bind(this),onDB:this._onDbCallback})},r.prototype._onBeginError=function(t){this._beginError=t,this._reject!=null&&this._reject(t)},r.prototype._onBeginMetadata=function(t){this._beginMetadata=t??{},this._resolve!=null&&this._resolve(this._toTransaction())},r}(EN.default);SO=Symbol.toStringTag;Ll.default=SN;var Ul={},Ha={};Object.defineProperty(Ha,"__esModule",{value:!0});Ha.cacheKey=void 0;var PN=Bt;function TN(e,r){var t;return r!=null?"basic:"+r:e===void 0?"DEFAULT":e.scheme==="basic"?"basic:"+((t=e.principal)!==null&&t!==void 0?t:""):e.scheme==="kerberos"?"kerberos:"+e.credentials:e.scheme==="bearer"?"bearer:"+e.credentials:e.scheme==="none"?"none":(0,PN.stringify)(e,{sortedElements:!0})}Ha.cacheKey=TN;var zi=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Hi=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},ic=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},ac=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))},N_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ul,"__esModule",{value:!0});var CN=Ur,AN=ne,ut=z,_n=se,IN=N_(Wa),Rb=Ut,RN=Ba,qi=Qr,Ar=oi,$N=N_(Ll),jN=N_(Dl),NN=Ha,kN=function(){function e(r){var t=r.mode,n=r.connectionProvider,o=r.bookmarks,i=r.database,a=r.config,s=r.reactive,c=r.fetchSize,u=r.impersonatedUser,l=r.bookmarkManager,d=r.notificationFilter,h=r.auth,p=r.log,v=r.homeDatabaseCallback,y;this._mode=t,this._database=i,this._reactive=s,this._fetchSize=c,this._homeDatabaseCallback=v,this._auth=h,this._getConnectionAcquistionBookmarks=this._getConnectionAcquistionBookmarks.bind(this),this._readConnectionHolder=new Rb.ConnectionHolder({mode:ut.ACCESS_MODE_READ,auth:h,database:i,bookmarks:o,connectionProvider:n,impersonatedUser:u,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:p}),this._writeConnectionHolder=new Rb.ConnectionHolder({mode:ut.ACCESS_MODE_WRITE,auth:h,database:i,bookmarks:o,connectionProvider:n,impersonatedUser:u,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:p}),this._open=!0,this._hasTx=!1,this._impersonatedUser=u,this._lastBookmarks=o??qi.Bookmarks.empty(),this._configuredBookmarks=this._lastBookmarks,this._transactionExecutor=MN(a),this._databaseNameResolved=this._database!=="";var _=this._calculateWatermaks();this._lowRecordWatermark=_.low,this._highRecordWatermark=_.high,this._results=[],this._bookmarkManager=l,this._notificationFilter=d,this._log=p,this._databaseGuess=a==null?void 0:a.cachedHomeDatabase,this._isRoutingSession=(y=a==null?void 0:a.routingDriver)!==null&&y!==void 0?y:!1}return e.prototype.run=function(r,t,n){var o=this,i=(0,AN.validateQueryAndParameters)(r,t),a=i.validatedQuery,s=i.params,c=n!=null?new Ar.TxConfig(n,this._log):Ar.TxConfig.empty(),u=this._run(a,s,function(l){return zi(o,void 0,void 0,function(){var d,h=this;return Hi(this,function(p){switch(p.label){case 0:return[4,this._bookmarks()];case 1:return d=p.sent(),this._assertSessionIsOpen(),[2,l.run(a,s,{bookmarks:d,txConfig:c,mode:this._mode,database:this._database,apiTelemetryConfig:{api:ut.TELEMETRY_APIS.AUTO_COMMIT_TRANSACTION},impersonatedUser:this._impersonatedUser,afterComplete:function(v){return h._onCompleteCallback(v,d)},reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,onDb:this._onDatabaseNameResolved.bind(this)})]}})})});return this._results.push(u),u},e.prototype._run=function(r,t,n){var o=this._acquireAndConsumeConnection(n),i=o.connectionHolder,a=o.resultPromise,s=a.catch(function(u){return Promise.resolve(new CN.FailedObserver({error:u}))}),c={high:this._highRecordWatermark,low:this._lowRecordWatermark};return new IN.default(s,r,t,i,c)},e.prototype._acquireConnection=function(r){var t=this,n=this._acquireAndConsumeConnection(r),o=n.connectionHolder,i=n.resultPromise;return i.then(function(a){return zi(t,void 0,void 0,function(){return Hi(this,function(s){switch(s.label){case 0:return[4,o.releaseConnection()];case 1:return s.sent(),[2,a]}})})})},e.prototype._acquireAndConsumeConnection=function(r){var t,n=this._connectionHolderWithMode(this._mode);return this._open?!this._hasTx&&n.initializeConnection(this._databaseGuess)?t=n.getConnection().then(function(o){return r(o)}):t=Promise.reject((0,_n.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):t=Promise.reject((0,_n.newError)("Cannot run query in a closed session.")),{connectionHolder:n,resultPromise:t}},e.prototype.beginTransaction=function(r){var t=r,n=Ar.TxConfig.empty();return t!=null&&(n=new Ar.TxConfig(t,this._log)),this._beginTransaction(this._mode,n,{api:ut.TELEMETRY_APIS.UNMANAGED_TRANSACTION})},e.prototype._beginTransaction=function(r,t,n){var o=this;if(!this._open)throw(0,_n.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,_n.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var i=e._validateSessionMode(r),a=this._connectionHolderWithMode(i);a.initializeConnection(this._databaseGuess),this._hasTx=!0;var s=new $N.default({connectionHolder:a,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmarks:function(c,u,l){return o._updateBookmarks(c,u,l)},onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,apiTelemetryConfig:n,onDbCallback:this._onDatabaseNameResolved.bind(this)});return s._begin(function(){return o._bookmarks()},t),s},e.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,_n.newError)("You cannot run more transactions on a closed session.")},e.prototype._transactionClosed=function(){this._hasTx=!1},e.prototype.lastBookmark=function(){return this.lastBookmarks()},e.prototype.lastBookmarks=function(){return this._lastBookmarks.values()},e.prototype._bookmarks=function(){var r;return zi(this,void 0,void 0,function(){var t;return Hi(this,function(n){switch(n.label){case 0:return[4,(r=this._bookmarkManager)===null||r===void 0?void 0:r.getBookmarks()];case 1:return t=n.sent(),t===void 0?[2,this._lastBookmarks]:[2,new qi.Bookmarks(ac(ac([],ic(t),!1),ic(this._configuredBookmarks),!1))]}})})},e.prototype.readTransaction=function(r,t){var n=new Ar.TxConfig(t,this._log);return this._runTransaction(ut.ACCESS_MODE_READ,n,r)},e.prototype.writeTransaction=function(r,t){var n=new Ar.TxConfig(t,this._log);return this._runTransaction(ut.ACCESS_MODE_WRITE,n,r)},e.prototype._runTransaction=function(r,t,n){var o=this;return this._transactionExecutor.execute(function(i){return o._beginTransaction(r,t,i)},n)},e.prototype.executeRead=function(r,t){var n=new Ar.TxConfig(t,this._log);return this._executeInTransaction(ut.ACCESS_MODE_READ,n,r)},e.prototype.executeWrite=function(r,t){var n=new Ar.TxConfig(t,this._log);return this._executeInTransaction(ut.ACCESS_MODE_WRITE,n,r)},e.prototype._executeInTransaction=function(r,t,n){var o=this;return this._transactionExecutor.execute(function(i){return o._beginTransaction(r,t,i)},n,jN.default.fromTransaction)},e.prototype._onDatabaseNameResolved=function(r){if(this._isRoutingSession&&(this._databaseGuess=r,!this._databaseNameResolved)){var t=r??"";this._database=t,this._readConnectionHolder.setDatabase(t),this._writeConnectionHolder.setDatabase(t),this._databaseNameResolved=!0,this._homeDatabaseCallback!=null&&this._homeDatabaseCallback((0,NN.cacheKey)(this._auth,this._impersonatedUser),r)}},e.prototype._getConnectionAcquistionBookmarks=function(){var r;return zi(this,void 0,void 0,function(){var t;return Hi(this,function(n){switch(n.label){case 0:return[4,(r=this._bookmarkManager)===null||r===void 0?void 0:r.getBookmarks()];case 1:return t=n.sent(),t===void 0?[2,this._lastBookmarks]:[2,new qi.Bookmarks(ac(ac([],ic(this._configuredBookmarks),!1),ic(t),!1))]}})})},e.prototype._updateBookmarks=function(r,t,n){var o,i,a;r!=null&&!r.isEmpty()&&((o=this._bookmarkManager)===null||o===void 0||o.updateBookmarks((i=t==null?void 0:t.values())!==null&&i!==void 0?i:[],(a=r==null?void 0:r.values())!==null&&a!==void 0?a:[]).catch(function(){}),this._lastBookmarks=r,this._configuredBookmarks=qi.Bookmarks.empty())},e.prototype.close=function(){return zi(this,void 0,void 0,function(){return Hi(this,function(r){switch(r.label){case 0:return this._open?(this._open=!1,this._results.forEach(function(t){return t._cancel()}),this._transactionExecutor.close(),[4,this._readConnectionHolder.close(this._hasTx)]):[3,3];case 1:return r.sent(),[4,this._writeConnectionHolder.close(this._hasTx)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._connectionHolderWithMode=function(r){if(r===ut.ACCESS_MODE_READ)return this._readConnectionHolder;if(r===ut.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,_n.newError)("Unknown access mode: "+r)},e.prototype._onCompleteCallback=function(r,t){this._updateBookmarks(new qi.Bookmarks(r.bookmark),t,r.db)},e.prototype._calculateWatermaks=function(){return this._fetchSize===ut.FETCH_ALL?{low:Number.MAX_VALUE,high:Number.MAX_VALUE}:{low:.3*this._fetchSize,high:.7*this._fetchSize}},e.prototype._configureTransactionExecutor=function(r,t){this._transactionExecutor.pipelineBegin=r,this._transactionExecutor.telemetryApi=t},e._validateSessionMode=function(r){var t=r??ut.ACCESS_MODE_WRITE;if(t!==ut.ACCESS_MODE_READ&&t!==ut.ACCESS_MODE_WRITE)throw(0,_n.newError)("Illegal session mode "+t);return t},e}();function MN(e){var r,t=(r=e==null?void 0:e.maxTransactionRetryTime)!==null&&r!==void 0?r:null;return new RN.TransactionExecutor(t)}Ul.default=kN;var Je={},ii={},Xc=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Jc=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},rp=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},$b=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},jb=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(ii,"__esModule",{value:!0});ii.bookmarkManager=void 0;var DN=function(){function e(){throw new Error("Not implemented")}return e.prototype.updateBookmarks=function(r,t){return Xc(this,void 0,void 0,function(){return Jc(this,function(n){throw new Error("Not implemented")})})},e.prototype.getBookmarks=function(){return Xc(this,void 0,void 0,function(){return Jc(this,function(r){throw new Error("Not implemented")})})},e}();ii.default=DN;function LN(e){e===void 0&&(e={});var r=new Set(e.initialBookmarks);return new UN(r,e.bookmarksSupplier,e.bookmarksConsumer)}ii.bookmarkManager=LN;var UN=function(){function e(r,t,n){this._bookmarks=r,this._bookmarksSupplier=t,this._bookmarksConsumer=n}return e.prototype.updateBookmarks=function(r,t){return Xc(this,void 0,void 0,function(){var n,o,i,c,a,s,c,u,l,d,h;return Jc(this,function(p){switch(p.label){case 0:n=this._bookmarks;try{for(o=rp(r),i=o.next();!i.done;i=o.next())c=i.value,n.delete(c)}catch(v){u={error:v}}finally{try{i&&!i.done&&(l=o.return)&&l.call(o)}finally{if(u)throw u.error}}try{for(a=rp(t),s=a.next();!s.done;s=a.next())c=s.value,n.add(c)}catch(v){d={error:v}}finally{try{s&&!s.done&&(h=a.return)&&h.call(a)}finally{if(d)throw d.error}}return typeof this._bookmarksConsumer!="function"?[3,2]:[4,this._bookmarksConsumer(jb([],$b(n),!1))];case 1:p.sent(),p.label=2;case 2:return[2]}})})},e.prototype.getBookmarks=function(){var r;return Xc(this,void 0,void 0,function(){var t,n,o,i,a,s,c;return Jc(this,function(u){switch(u.label){case 0:return t=new Set(this._bookmarks),typeof this._bookmarksSupplier!="function"?[3,2]:[4,this._bookmarksSupplier()];case 1:n=(r=u.sent())!==null&&r!==void 0?r:[];try{for(o=rp(n),i=o.next();!i.done;i=o.next())a=i.value,t.add(a)}catch(l){s={error:l}}finally{try{i&&!i.done&&(c=o.return)&&c.call(o)}finally{if(s)throw s.error}}u.label=2;case 2:return[2,jb([],$b(t),!1)]}})})},e}(),Fl={},Bl=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},xl=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},FN=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fl,"__esModule",{value:!0});var BN=FN(kl),xN=se,VN=function(){function e(){}return e.prototype.eagerResultTransformer=function(){return Nb},e.prototype.eager=function(){return Nb},e.prototype.mappedResultTransformer=function(r){return kb(r)},e.prototype.mapped=function(r){return kb(r)},e.prototype.first=function(){return WN},e.prototype.summary=function(){return zN},e}(),PO=new VN;Object.freeze(PO);Fl.default=PO;function Nb(e){return Bl(this,void 0,void 0,function(){var r,t,n,o;return xl(this,function(i){switch(i.label){case 0:return[4,e];case 1:return r=i.sent(),t=r.summary,n=r.records,[4,e.keys()];case 2:return o=i.sent(),[2,new BN.default(o,n,t)]}})})}function kb(e){var r=this;if(e==null||e.collect==null&&e.map==null)throw(0,xN.newError)("Requires a map or/and a collect functions.");return function(t){return Bl(r,void 0,void 0,function(){return xl(this,function(n){switch(n.label){case 0:return[4,new Promise(function(o,i){var a={records:[],keys:[]};t.subscribe({onKeys:function(s){a.keys=s},onNext:function(s){if(e.map!=null){var c=e.map(s);c!==void 0&&a.records.push(c)}else a.records.push(s)},onCompleted:function(s){if(e.collect!=null)o(e.collect(a.records,s,a.keys));else{var c={records:a.records,summary:s,keys:a.keys};o(c)}},onError:function(s){i(s)}})})];case 1:return[2,n.sent()]}})})}}function WN(e){return Bl(this,void 0,void 0,function(){var r,t,n,o;return xl(this,function(i){switch(i.label){case 0:return r=e[Symbol.asyncIterator](),[4,r.next()];case 1:t=i.sent(),n=t.value,o=t.done,i.label=2;case 2:return i.trys.push([2,,3,6]),o===!0?[2,void 0]:[2,n];case 3:return r.return==null?[3,5]:[4,r.return()];case 4:i.sent(),i.label=5;case 5:return[7];case 6:return[2]}})})}function zN(e){return Bl(this,void 0,void 0,function(){return xl(this,function(r){switch(r.label){case 0:return[4,e.summary()];case 1:return[2,r.sent()]}})})}var k_={},np=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},op=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(k_,"__esModule",{value:!0});var HN=z,qN=function(){function e(r){this._createSession=r}return e.prototype.execute=function(r,t,n){return np(this,void 0,void 0,function(){var o,i,a,s=this;return op(this,function(c){switch(c.label){case 0:o=this._createSession({database:r.database,bookmarkManager:r.bookmarkManager,impersonatedUser:r.impersonatedUser,auth:r.auth}),i=GN(r.signal,"abort",function(){return np(s,void 0,void 0,function(){return op(this,function(u){switch(u.label){case 0:return[4,o.close()];case 1:return[2,u.sent()]}})})}),o._configureTransactionExecutor(!0,HN.TELEMETRY_APIS.EXECUTE_QUERY),c.label=1;case 1:return c.trys.push([1,,3,5]),a=r.routing==="READ"?o.executeRead.bind(o):o.executeWrite.bind(o),[4,a(function(u){return np(s,void 0,void 0,function(){var l;return op(this,function(d){switch(d.label){case 0:return l=u.run(t,n),[4,r.resultTransformer(l)];case 1:return[2,d.sent()]}})})},r.transactionConfig)];case 2:return[2,c.sent()];case 3:return i.uninstall(),[4,o.close()];case 4:return c.sent(),[7];case 5:return[2]}})})},e}();k_.default=qN;function GN(e,r,t){return typeof(e==null?void 0:e.addEventListener)=="function"&&e.addEventListener(r,t),{uninstall:function(){typeof(e==null?void 0:e.removeEventListener)=="function"&&e.removeEventListener(r,t)}}}var M_={};Object.defineProperty(M_,"__esModule",{value:!0});var KN=function(){function e(r){this.maxSize=r,this.pruneCount=Math.max(Math.round(.01*r*Math.log(r)),1),this.map=new Map}return e.prototype.set=function(r,t){this.map.set(r,{database:t,lastUsed:Date.now()}),this._pruneCache()},e.prototype.get=function(r){var t=this.map.get(r);if(t!==void 0)return t.lastUsed=Date.now(),t.database},e.prototype.delete=function(r){this.map.delete(r)},e.prototype._pruneCache=function(){if(this.map.size>this.maxSize)for(var r=Array.from(this.map.entries()).sort(function(n,o){return n[1].lastUsed-o[1].lastUsed}),t=0;t<this.pruneCount;t++)this.map.delete(r[t][0])},e}();M_.default=KN;var pv=f&&f.__assign||function(){return pv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},pv.apply(this,arguments)},Mb=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Db=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},qa=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Je,"__esModule",{value:!0});Je.QueryConfig=Je.SessionConfig=Je.routing=Je.WRITE=Je.READ=Je.Driver=void 0;var Lb=Qr,YN=qa(Rl),Un=z,ZN=Jn,Ub=qa(Ul),QN=ne,XN=ii,JN=qa(Fl),ek=qa(k_),tk=se,rk=qa(M_),nk=Ha,ok=60*60*1e3,ik=1e3,ak=1e4,Lc=Un.ACCESS_MODE_READ;Je.READ=Lc;var D_=Un.ACCESS_MODE_WRITE;Je.WRITE=D_;var uk=0,sk=function(){function e(){this.defaultAccessMode=D_,this.bookmarks=[],this.database="",this.impersonatedUser=void 0,this.auth=void 0,this.fetchSize=void 0,this.bookmarkManager=void 0,this.notificationFilter=void 0}return e}();Je.SessionConfig=sk;var ck="WRITE",lk="READ",Ao={WRITE:ck,READ:lk};Je.routing=Ao;Object.freeze(Ao);var fk=function(){function e(){this.routing=Ao.WRITE,this.resultTransformer=void 0,this.database="",this.impersonatedUser=void 0,this.bookmarkManager=void 0,this.transactionConfig=void 0,this.auth=void 0,this.signal=void 0}return e}();Je.QueryConfig=fk;var TO=function(){function e(r,t,n,o,i){t===void 0&&(t={}),o===void 0&&(o=function(s){return new Ub.default(s)}),i===void 0&&(i=function(s){return new ek.default(s)}),hk(t);var a=ZN.Logger.create(t);dk(t,a),this._id=uk++,this._meta=r,this._config=t,this._log=a,this._createConnectionProvider=n,this._createSession=o,this._defaultExecuteQueryBookmarkManager=(0,XN.bookmarkManager)(),this._queryExecutor=i(this.session.bind(this)),this._connectionProvider=null,this.homeDatabaseCache=new rk.default(ak),this._afterConstruction()}return Object.defineProperty(e.prototype,"executeQueryBookmarkManager",{get:function(){return this._defaultExecuteQueryBookmarkManager},enumerable:!1,configurable:!0}),e.prototype.executeQuery=function(r,t,n){var o,i,a;return n===void 0&&(n={}),Mb(this,void 0,void 0,function(){var s,c,u;return Db(this,function(l){switch(l.label){case 0:if(s=n.bookmarkManager===null?void 0:(o=n.bookmarkManager)!==null&&o!==void 0?o:this.executeQueryBookmarkManager,c=(i=n.resultTransformer)!==null&&i!==void 0?i:JN.default.eagerResultTransformer(),u=(a=n.routing)!==null&&a!==void 0?a:Ao.WRITE,u!==Ao.READ&&u!==Ao.WRITE)throw(0,tk.newError)('Illegal query routing config: "'.concat(u,'"'));return[4,this._queryExecutor.execute({resultTransformer:c,bookmarkManager:s,routing:u,database:n.database,impersonatedUser:n.impersonatedUser,transactionConfig:n.transactionConfig,auth:n.auth,signal:n.signal},r,t)];case 1:return[2,l.sent()]}})})},e.prototype.verifyConnectivity=function(r){var t=r===void 0?{}:r,n=t.database,o=n===void 0?"":n,i=this._getOrCreateConnectionProvider();return i.verifyConnectivityAndGetServerInfo({database:o,accessMode:Lc})},e.prototype.verifyAuthentication=function(r){var t=r===void 0?{}:r,n=t.database,o=t.auth;return Mb(this,void 0,void 0,function(){var i;return Db(this,function(a){switch(a.label){case 0:return i=this._getOrCreateConnectionProvider(),[4,i.verifyAuthentication({database:n??"system",auth:o,accessMode:Lc})];case 1:return[2,a.sent()]}})})},e.prototype.getServerInfo=function(r){var t=r===void 0?{}:r,n=t.database,o=n===void 0?"":n,i=this._getOrCreateConnectionProvider();return i.verifyConnectivityAndGetServerInfo({database:o,accessMode:Lc})},e.prototype.supportsMultiDb=function(){var r=this._getOrCreateConnectionProvider();return r.supportsMultiDb()},e.prototype.supportsTransactionConfig=function(){var r=this._getOrCreateConnectionProvider();return r.supportsTransactionConfig()},e.prototype.supportsUserImpersonation=function(){var r=this._getOrCreateConnectionProvider();return r.supportsUserImpersonation()},e.prototype.supportsSessionAuth=function(){var r=this._getOrCreateConnectionProvider();return r.supportsSessionAuth()},e.prototype.getNegotiatedProtocolVersion=function(){var r=this._getOrCreateConnectionProvider();return r.getNegotiatedProtocolVersion()},e.prototype.isEncrypted=function(){return this._isEncrypted()},e.prototype._supportsRouting=function(){return this._meta.routing},e.prototype._isEncrypted=function(){return this._config.encrypted===QN.ENCRYPTION_ON||this._config.encrypted===!0},e.prototype._getTrust=function(){return this._config.trust},e.prototype.session=function(r){var t=r===void 0?{}:r,n=t.defaultAccessMode,o=n===void 0?D_:n,i=t.bookmarks,a=t.database,s=a===void 0?"":a,c=t.impersonatedUser,u=t.fetchSize,l=t.bookmarkManager,d=t.notificationFilter,h=t.auth;return this._newSession({defaultAccessMode:o,bookmarkOrBookmarks:i,database:s,reactive:!1,impersonatedUser:c,fetchSize:CO(u,this._config.fetchSize),bookmarkManager:l,notificationFilter:d,auth:h})},e.prototype.close=function(){return this._log.info("Driver ".concat(this._id," closing")),this._connectionProvider!=null?this._connectionProvider.close():Promise.resolve()},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._afterConstruction=function(){this._log.info("".concat(this._meta.typename," driver ").concat(this._id," created for server address ").concat(this._meta.address.toString()))},e.prototype._homeDatabaseCallback=function(r,t){this.homeDatabaseCache.set(r,t)},e.prototype._newSession=function(r){var t=r.defaultAccessMode,n=r.bookmarkOrBookmarks,o=r.database,i=r.reactive,a=r.impersonatedUser,s=r.fetchSize,c=r.bookmarkManager,u=r.notificationFilter,l=r.auth,d=Ub.default._validateSessionMode(t),h=this._getOrCreateConnectionProvider(),p=this.homeDatabaseCache.get((0,nk.cacheKey)(l,a)),v=this._homeDatabaseCallback.bind(this),y=n!=null?new Lb.Bookmarks(n):Lb.Bookmarks.empty();return this._createSession({mode:d,database:o??"",connectionProvider:h,bookmarks:y,config:pv({cachedHomeDatabase:p,routingDriver:this._supportsRouting()},this._config),reactive:i,impersonatedUser:a,fetchSize:s,bookmarkManager:c,notificationFilter:u,auth:l,log:this._log,homeDatabaseCallback:v})},e.prototype._getOrCreateConnectionProvider=function(){return this._connectionProvider==null&&(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,_k(this._config))),this._connectionProvider},e}();Je.Driver=TO;function dk(e,r){var t,n,o=e.resolver;if(o!=null&&typeof o!="function")throw new TypeError("Configured resolver should be a function. Got: ".concat(typeof o));if(e.connectionAcquisitionTimeout<e.connectionTimeout&&r.warn('Configuration for "connectionAcquisitionTimeout" should be greater than or equal to "connectionTimeout". Otherwise, the connection acquisition timeout will take precedence for over the connection timeout in scenarios where a new connection is created while it is acquired'),((t=e.notificationFilter)===null||t===void 0?void 0:t.disabledCategories)!=null&&((n=e.notificationFilter)===null||n===void 0?void 0:n.disabledClassifications)!=null)throw new Error(`The notificationFilter can't have both "disabledCategories" and  "disabledClassifications" configured at the same time.`);return e}function hk(e){e.maxConnectionLifetime=ip(e.maxConnectionLifetime,ok),e.maxConnectionPoolSize=ip(e.maxConnectionPoolSize,Un.DEFAULT_POOL_MAX_SIZE),e.connectionAcquisitionTimeout=ip(e.connectionAcquisitionTimeout,Un.DEFAULT_POOL_ACQUISITION_TIMEOUT),e.fetchSize=CO(e.fetchSize,ik),e.connectionTimeout=pk(e),e.connectionLivenessCheckTimeout=vk(e.connectionLivenessCheckTimeout)}function ip(e,r){var t=parseInt(e,10);return t>0||t===0?t:t<0?Number.MAX_SAFE_INTEGER:r}function CO(e,r){var t=parseInt(e,10);if(t>0||t===Un.FETCH_ALL)return t;if(t===0||t<0)throw new Error("The fetch size can only be a positive value or ".concat(Un.FETCH_ALL," for ALL. However fetchSize = ").concat(t));return r}function pk(e){var r=parseInt(e.connectionTimeout,10);return r===0||!isNaN(r)&&r<0?null:isNaN(r)?Un.DEFAULT_CONNECTION_TIMEOUT_MILLIS:r}function vk(e){if(e!=null){var r=parseInt(e,10);if(r<0||Number.isNaN(r))throw new Error("The connectionLivenessCheckTimeout can only be a positive value or 0 for always. However connectionLivenessCheckTimeout = ".concat(r));return r}}function _k(e){return new YN.default(e.resolver)}Je.default=TO;var Vl={};Object.defineProperty(Vl,"__esModule",{value:!0});var yk=se,bk=Bt,mk={basic:function(e,r,t){return t!=null?{scheme:"basic",principal:e,credentials:r,realm:t}:{scheme:"basic",principal:e,credentials:r}},kerberos:function(e){return{scheme:"kerberos",principal:"",credentials:e}},bearer:function(e){return{scheme:"bearer",credentials:e}},none:function(){return{scheme:"none"}},custom:function(e,r,t,n,o){var i={scheme:n,principal:e};if(ap(r)&&(i.credentials=r),ap(t)&&(i.realm=t),ap(o)){try{(0,bk.stringify)(o)}catch(a){throw(0,yk.newError)("Circular references in custom auth token parameters",void 0,a)}i.parameters=o}return i}};function ap(e){return!(e==null||e===""||Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length===0)}Vl.default=mk;var _r={},vv=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},_v=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},gk=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_r,"__esModule",{value:!0});_r.staticAuthTokenManager=_r.authTokenManagers=_r.AuthTokenAndExpiration=void 0;var wk=gk(Vl),Ok=ie,Ek=function(){function e(){}return e.prototype.getToken=function(){throw new Error("Not Implemented")},e.prototype.handleSecurityException=function(r,t){throw new Error("Not implemented")},e}();_r.default=Ek;var Sk=function(){function e(){this.token=wk.default.none(),this.expiration=void 0}return e}();_r.AuthTokenAndExpiration=Sk;var Pk=function(){function e(){}return e.prototype.bearer=function(r){var t=r.tokenProvider;if(typeof t!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof t));return new Fb(t,["Neo.ClientError.Security.Unauthorized","Neo.ClientError.Security.TokenExpired"])},e.prototype.basic=function(r){var t=this,n=r.tokenProvider;if(typeof n!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof n));return new Fb(function(){return vv(t,void 0,void 0,function(){var o;return _v(this,function(i){switch(i.label){case 0:return o={},[4,n()];case 1:return[2,(o.token=i.sent(),o)]}})})},["Neo.ClientError.Security.Unauthorized"])},e}(),AO=new Pk;_r.authTokenManagers=AO;Object.freeze(AO);function Tk(e){var r=e.authToken;return new Ak(r)}_r.staticAuthTokenManager=Tk;var Ck=function(){function e(r){r===void 0&&(r=[]),this._subscribers=r}return e.prototype.subscribe=function(r){this._subscribers.push(r)},e.prototype.onCompleted=function(r){this._subscribers.forEach(function(t){return t.onCompleted(r)})},e.prototype.onError=function(r){this._subscribers.forEach(function(t){return t.onError(r)})},e}(),Fb=function(){function e(r,t,n,o){this._tokenProvider=r,this._handledSecurityCodes=t,this._currentAuthData=n,this._refreshObservable=o}return e.prototype.getToken=function(){var r;return vv(this,void 0,void 0,function(){return _v(this,function(t){switch(t.label){case 0:return this._currentAuthData===void 0||this._currentAuthData.expiration!==void 0&&this._currentAuthData.expiration<new Date?[4,this._refreshAuthToken()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2,(r=this._currentAuthData)===null||r===void 0?void 0:r.token]}})})},e.prototype.handleSecurityException=function(r,t){var n;return this._handledSecurityCodes.includes(t)?(Ok.util.equals(r,(n=this._currentAuthData)===null||n===void 0?void 0:n.token)&&this._scheduleRefreshAuthToken(),!0):!1},e.prototype._scheduleRefreshAuthToken=function(r){var t=this;this._refreshObservable===void 0&&(this._currentAuthData=void 0,this._refreshObservable=new Ck,Promise.resolve(this._tokenProvider()).then(function(n){var o;t._currentAuthData=n,(o=t._refreshObservable)===null||o===void 0||o.onCompleted(n)}).catch(function(n){var o;(o=t._refreshObservable)===null||o===void 0||o.onError(n)}).finally(function(){t._refreshObservable=void 0})),r!==void 0&&this._refreshObservable.subscribe(r)},e.prototype._refreshAuthToken=function(){return vv(this,void 0,void 0,function(){var r=this;return _v(this,function(t){switch(t.label){case 0:return[4,new Promise(function(n,o){r._scheduleRefreshAuthToken({onCompleted:n,onError:o})})];case 1:return[2,t.sent()]}})})},e}(),Ak=function(){function e(r){this._authToken=r}return e.prototype.getToken=function(){return this._authToken},e.prototype.handleSecurityException=function(r,t){return!1},e}(),Lo={},Ik=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Lo,"__esModule",{value:!0});Lo.InternalConfig=Lo.Config=void 0;var IO=function(){function e(){this.encrypted=void 0,this.trust=void 0,this.trustedCertificates=[],this.maxConnectionPoolSize=100,this.maxConnectionLifetime=60*60*1e3,this.connectionAcquisitionTimeout=6e4,this.maxTransactionRetryTime=3e4,this.connectionLivenessCheckTimeout=void 0,this.connectionTimeout=3e4,this.disableLosslessIntegers=!1,this.useBigInt=!1,this.logging=void 0,this.resolver=void 0,this.notificationFilter=void 0,this.userAgent=void 0,this.telemetryDisabled=!1,this.clientCertificate=void 0}return e}();Lo.Config=IO;var Rk=function(e){Ik(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(IO);Lo.InternalConfig=Rk;var Dt={},$k=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Aa=f&&f.__assign||function(){return Aa=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Aa.apply(this,arguments)},jk=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Nk=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),kk=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&jk(r,e,t);return Nk(r,e),r};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.resolveCertificateProvider=Dt.clientCertificateProviders=Dt.RotatingClientCertificateProvider=Dt.ClientCertificateProvider=void 0;var L_=kk(Bt),Mk=function(){function e(){this.certfile="",this.keyfile="",this.password=void 0}return e}();Dt.default=Mk;var RO=function(){function e(){}return e.prototype.hasUpdate=function(){throw new Error("Not Implemented")},e.prototype.getClientCertificate=function(){throw new Error("Not Implemented")},e}();Dt.ClientCertificateProvider=RO;var Dk=function(e){$k(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.updateCertificate=function(t){throw new Error("Not implemented")},r}(RO);Dt.RotatingClientCertificateProvider=Dk;var Lk=function(){function e(){}return e.prototype.rotating=function(r){var t=r.initialCertificate;if(t==null||!U_(t))throw new TypeError("initialCertificate should be ClientCertificate, but got ".concat(L_.stringify(t)));var n=Aa({},t);return new xk(n)},e}(),$O=new Lk;Dt.clientCertificateProviders=$O;Object.freeze($O);function Uk(e){if(e!=null){if(typeof e=="object"&&"hasUpdate"in e&&"getClientCertificate"in e&&typeof e.getClientCertificate=="function"&&typeof e.hasUpdate=="function")return e;if(U_(e)){var r=Aa({},e);return{getClientCertificate:function(){return r},hasUpdate:function(){return!1}}}throw new TypeError("clientCertificate should be configured with ClientCertificate or ClientCertificateProvider, but got ".concat(L_.stringify(e)))}}Dt.resolveCertificateProvider=Uk;function U_(e){return e!=null&&typeof e=="object"&&"certfile"in e&&Fk(e.certfile)&&"keyfile"in e&&Bk(e.keyfile)&&NO("password",e)}function Fk(e){return Bb(e)||jO(e,Bb)}function Bk(e){function r(t){return typeof t=="string"||t!=null&&typeof t=="object"&&"path"in t&&typeof t.path=="string"&&NO("password",t)}return r(e)||jO(e,r)}function Bb(e){return typeof e=="string"}function jO(e,r,t){return t===void 0&&(t=!1),Array.isArray(e)&&(t||e.length>0)&&e.filter(r).length===e.length}function NO(e,r){return!(e in r)||r[e]==null||typeof r[e]=="string"}var xk=function(){function e(r,t){t===void 0&&(t=!1),this._certificate=r,this._updated=t}return e.prototype.hasUpdate=function(){try{return this._updated}finally{this._updated=!1}},e.prototype.getClientCertificate=function(){return this._certificate},e.prototype.updateCertificate=function(r){if(!U_(r))throw new TypeError("certificate should be ClientCertificate, but got ".concat(L_.stringify(r)));this._certificate=Aa({},r),this._updated=!0},e}();(function(e){var r=f&&f.__createBinding||(Object.create?function(G,L,ee,he){he===void 0&&(he=ee);var be=Object.getOwnPropertyDescriptor(L,ee);(!be||("get"in be?!L.__esModule:be.writable||be.configurable))&&(be={enumerable:!0,get:function(){return L[ee]}}),Object.defineProperty(G,he,be)}:function(G,L,ee,he){he===void 0&&(he=ee),G[he]=L[ee]}),t=f&&f.__setModuleDefault||(Object.create?function(G,L){Object.defineProperty(G,"default",{enumerable:!0,value:L})}:function(G,L){G.default=L}),n=f&&f.__importStar||function(G){if(G&&G.__esModule)return G;var L={};if(G!=null)for(var ee in G)ee!=="default"&&Object.prototype.hasOwnProperty.call(G,ee)&&r(L,G,ee);return t(L,G),L},o=f&&f.__importDefault||function(G){return G&&G.__esModule?G:{default:G}};Object.defineProperty(e,"__esModule",{value:!0}),e.EagerResult=e.Result=e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.GqlStatusObject=e.Notification=e.ServerInfo=e.queryType=e.ResultSummary=e.Record=e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=e.Time=e.LocalTime=e.LocalDateTime=e.isTime=e.isLocalTime=e.isLocalDateTime=e.isDuration=e.isDateTime=e.isDate=e.Duration=e.DateTime=e.Date=e.Point=e.isPoint=e.internal=e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=e.Integer=e.error=e.isRetriableError=e.GQLError=e.newGQLError=e.Neo4jError=e.newError=e.authTokenManagers=void 0,e.resolveCertificateProvider=e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.routing=e.staticAuthTokenManager=e.bookmarkManager=e.auth=e.json=e.driver=e.types=e.Driver=e.Session=e.TransactionPromise=e.ManagedTransaction=e.Transaction=e.Connection=e.Releasable=e.ConnectionProvider=void 0;var i=se;Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return i.newError}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return i.Neo4jError}}),Object.defineProperty(e,"newGQLError",{enumerable:!0,get:function(){return i.newGQLError}}),Object.defineProperty(e,"GQLError",{enumerable:!0,get:function(){return i.GQLError}}),Object.defineProperty(e,"isRetriableError",{enumerable:!0,get:function(){return i.isRetriableError}});var a=n(xe);e.Integer=a.default,Object.defineProperty(e,"int",{enumerable:!0,get:function(){return a.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return a.isInt}}),Object.defineProperty(e,"inSafeRange",{enumerable:!0,get:function(){return a.inSafeRange}}),Object.defineProperty(e,"toNumber",{enumerable:!0,get:function(){return a.toNumber}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return a.toString}});var s=_e;Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return s.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return s.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return s.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return s.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return s.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return s.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return s.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return s.isLocalTime}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return s.isTime}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return s.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return s.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return s.Time}});var c=Ee;Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return c.Node}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return c.isNode}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return c.Relationship}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return c.isRelationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return c.UnboundRelationship}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return c.isUnboundRelationship}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return c.Path}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return c.isPath}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return c.PathSegment}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return c.isPathSegment}});var u=o(C_);e.Record=u.default;var l=Mo;Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return l.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return l.Point}});var d=n(Xe);e.ResultSummary=d.default,Object.defineProperty(e,"queryType",{enumerable:!0,get:function(){return d.queryType}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return d.ServerInfo}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return d.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return d.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return d.QueryStatistics}}),Object.defineProperty(e,"Stats",{enumerable:!0,get:function(){return d.Stats}});var h=n(Se);e.Notification=h.default,Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return h.GqlStatusObject}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return h.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return h.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return h.notificationSeverityLevel}});var p=vr;Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return p.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return p.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return p.notificationFilterMinimumSeverityLevel}});var v=o(Wa);e.Result=v.default;var y=o(kl);e.EagerResult=y.default;var _=n(za);e.ConnectionProvider=_.default,Object.defineProperty(e,"Releasable",{enumerable:!0,get:function(){return _.Releasable}});var b=o(j_);e.Connection=b.default;var w=o(Ml);e.Transaction=w.default;var S=o(Dl);e.ManagedTransaction=S.default;var E=o(Ll);e.TransactionPromise=E.default;var P=o(Ul);e.Session=P.default;var C=n(Je),T=C;e.Driver=C.default,e.driver=T;var I=o(Vl);e.auth=I.default;var $=ii;Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return $.bookmarkManager}});var D=_r;Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return D.authTokenManagers}}),Object.defineProperty(e,"staticAuthTokenManager",{enumerable:!0,get:function(){return D.staticAuthTokenManager}});var q=Je;Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return q.routing}});var V=n(Lo);e.types=V;var H=n(Bt);e.json=H;var oe=o(Fl);e.resultTransformers=oe.default;var F=Dt;Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return F.clientCertificateProviders}}),Object.defineProperty(e,"resolveCertificateProvider",{enumerable:!0,get:function(){return F.resolveCertificateProvider}});var J=n(ie);e.internal=J;var B={SERVICE_UNAVAILABLE:i.SERVICE_UNAVAILABLE,SESSION_EXPIRED:i.SESSION_EXPIRED,PROTOCOL_ERROR:i.PROTOCOL_ERROR};e.error=B;var te={authTokenManagers:D.authTokenManagers,newError:i.newError,Neo4jError:i.Neo4jError,newGQLError:i.newGQLError,GQLError:i.GQLError,isRetriableError:i.isRetriableError,error:B,Integer:a.default,int:a.int,isInt:a.isInt,inSafeRange:a.inSafeRange,toNumber:a.toNumber,toString:a.toString,internal:J,isPoint:l.isPoint,Point:l.Point,Date:s.Date,DateTime:s.DateTime,Duration:s.Duration,isDate:s.isDate,isDateTime:s.isDateTime,isDuration:s.isDuration,isLocalDateTime:s.isLocalDateTime,isLocalTime:s.isLocalTime,isTime:s.isTime,LocalDateTime:s.LocalDateTime,LocalTime:s.LocalTime,Time:s.Time,Node:c.Node,isNode:c.isNode,Relationship:c.Relationship,isRelationship:c.isRelationship,UnboundRelationship:c.UnboundRelationship,isUnboundRelationship:c.isUnboundRelationship,Path:c.Path,isPath:c.isPath,PathSegment:c.PathSegment,isPathSegment:c.isPathSegment,Record:u.default,ResultSummary:d.default,queryType:d.queryType,ServerInfo:d.ServerInfo,Notification:h.default,GqlStatusObject:h.GqlStatusObject,Plan:d.Plan,ProfiledPlan:d.ProfiledPlan,QueryStatistics:d.QueryStatistics,Stats:d.Stats,Result:v.default,EagerResult:y.default,Transaction:w.default,ManagedTransaction:S.default,TransactionPromise:E.default,Session:P.default,Driver:C.default,Connection:b.default,Releasable:_.Releasable,types:V,driver:T,json:H,auth:I.default,bookmarkManager:$.bookmarkManager,routing:q.routing,resultTransformers:oe.default,notificationCategory:h.notificationCategory,notificationClassification:h.notificationClassification,notificationSeverityLevel:h.notificationSeverityLevel,notificationFilterDisabledCategory:p.notificationFilterDisabledCategory,notificationFilterDisabledClassification:p.notificationFilterDisabledClassification,notificationFilterMinimumSeverityLevel:p.notificationFilterMinimumSeverityLevel,clientCertificateProviders:F.clientCertificateProviders,resolveCertificateProvider:F.resolveCertificateProvider};e.default=te})(Y);var Wl={},Ga={},de={},ai={},le={};Object.defineProperty(le,"__esModule",{value:!0});le.isFunction=void 0;function Vk(e){return typeof e=="function"}le.isFunction=Vk;var je={},Ka={},nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.createErrorClass=void 0;function Wk(e){var r=function(n){Error.call(n),n.stack=new Error().stack},t=e(r);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}nr.createErrorClass=Wk;Object.defineProperty(Ka,"__esModule",{value:!0});Ka.UnsubscriptionError=void 0;var zk=nr;Ka.UnsubscriptionError=zk.createErrorClass(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,o){return o+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});var xt={};Object.defineProperty(xt,"__esModule",{value:!0});xt.arrRemove=void 0;function Hk(e,r){if(e){var t=e.indexOf(r);0<=t&&e.splice(t,1)}}xt.arrRemove=Hk;var xb=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},Vb=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Wb=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(je,"__esModule",{value:!0});je.isSubscription=je.EMPTY_SUBSCRIPTION=je.Subscription=void 0;var va=le,up=Ka,zb=xt,F_=function(){function e(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var r,t,n,o,i;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var s=xb(a),c=s.next();!c.done;c=s.next()){var u=c.value;u.remove(this)}}catch(y){r={error:y}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(r)throw r.error}}else a.remove(this);var l=this.initialTeardown;if(va.isFunction(l))try{l()}catch(y){i=y instanceof up.UnsubscriptionError?y.errors:[y]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var h=xb(d),p=h.next();!p.done;p=h.next()){var v=p.value;try{Hb(v)}catch(y){i=i??[],y instanceof up.UnsubscriptionError?i=Wb(Wb([],Vb(i)),Vb(y.errors)):i.push(y)}}}catch(y){n={error:y}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}}if(i)throw new up.UnsubscriptionError(i)}},e.prototype.add=function(r){var t;if(r&&r!==this)if(this.closed)Hb(r);else{if(r instanceof e){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(r)}},e.prototype._hasParent=function(r){var t=this._parentage;return t===r||Array.isArray(t)&&t.includes(r)},e.prototype._addParent=function(r){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(r),t):t?[t,r]:r},e.prototype._removeParent=function(r){var t=this._parentage;t===r?this._parentage=null:Array.isArray(t)&&zb.arrRemove(t,r)},e.prototype.remove=function(r){var t=this._finalizers;t&&zb.arrRemove(t,r),r instanceof e&&r._removeParent(this)},e.EMPTY=function(){var r=new e;return r.closed=!0,r}(),e}();je.Subscription=F_;je.EMPTY_SUBSCRIPTION=F_.EMPTY;function qk(e){return e instanceof F_||e&&"closed"in e&&va.isFunction(e.remove)&&va.isFunction(e.add)&&va.isFunction(e.unsubscribe)}je.isSubscription=qk;function Hb(e){va.isFunction(e)?e():e.unsubscribe()}var Xr={};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.config=void 0;Xr.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ya={},B_={};(function(e){var r=f&&f.__read||function(n,o){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var a=i.call(n),s,c=[],u;try{for(;(o===void 0||o-- >0)&&!(s=a.next()).done;)c.push(s.value)}catch(l){u={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(u)throw u.error}}return c},t=f&&f.__spreadArray||function(n,o){for(var i=0,a=o.length,s=n.length;i<a;i++,s++)n[s]=o[i];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutProvider=void 0,e.timeoutProvider={setTimeout:function(n,o){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=e.timeoutProvider.delegate;return s!=null&&s.setTimeout?s.setTimeout.apply(s,t([n,o],r(i))):setTimeout.apply(void 0,t([n,o],r(i)))},clearTimeout:function(n){var o=e.timeoutProvider.delegate;return((o==null?void 0:o.clearTimeout)||clearTimeout)(n)},delegate:void 0}})(B_);Object.defineProperty(Ya,"__esModule",{value:!0});Ya.reportUnhandledError=void 0;var Gk=Xr,Kk=B_;function Yk(e){Kk.timeoutProvider.setTimeout(function(){var r=Gk.config.onUnhandledError;if(r)r(e);else throw e})}Ya.reportUnhandledError=Yk;var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.noop=void 0;function Zk(){}Ne.noop=Zk;var Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.createNotification=Xt.nextNotification=Xt.errorNotification=Xt.COMPLETE_NOTIFICATION=void 0;Xt.COMPLETE_NOTIFICATION=function(){return zl("C",void 0,void 0)}();function Qk(e){return zl("E",void 0,e)}Xt.errorNotification=Qk;function Xk(e){return zl("N",e,void 0)}Xt.nextNotification=Xk;function zl(e,r,t){return{kind:e,value:r,error:t}}Xt.createNotification=zl;var Br={};Object.defineProperty(Br,"__esModule",{value:!0});Br.captureError=Br.errorContext=void 0;var kO=Xr,Rn=null;function Jk(e){if(kO.config.useDeprecatedSynchronousErrorHandling){var r=!Rn;if(r&&(Rn={errorThrown:!1,error:null}),e(),r){var t=Rn,n=t.errorThrown,o=t.error;if(Rn=null,n)throw o}}else e()}Br.errorContext=Jk;function eM(e){kO.config.useDeprecatedSynchronousErrorHandling&&Rn&&(Rn.errorThrown=!0,Rn.error=e)}Br.captureError=eM;(function(e){var r=f&&f.__extends||function(){var w=function(S,E){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,C){P.__proto__=C}||function(P,C){for(var T in C)Object.prototype.hasOwnProperty.call(C,T)&&(P[T]=C[T])},w(S,E)};return function(S,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");w(S,E);function P(){this.constructor=S}S.prototype=E===null?Object.create(E):(P.prototype=E.prototype,new P)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_OBSERVER=e.SafeSubscriber=e.Subscriber=void 0;var t=le,n=je,o=Xr,i=Ya,a=Ne,s=Xt,c=B_,u=Br,l=function(w){r(S,w);function S(E){var P=w.call(this)||this;return P.isStopped=!1,E?(P.destination=E,n.isSubscription(E)&&E.add(P)):P.destination=e.EMPTY_OBSERVER,P}return S.create=function(E,P,C){return new v(E,P,C)},S.prototype.next=function(E){this.isStopped?b(s.nextNotification(E),this):this._next(E)},S.prototype.error=function(E){this.isStopped?b(s.errorNotification(E),this):(this.isStopped=!0,this._error(E))},S.prototype.complete=function(){this.isStopped?b(s.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},S.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,w.prototype.unsubscribe.call(this),this.destination=null)},S.prototype._next=function(E){this.destination.next(E)},S.prototype._error=function(E){try{this.destination.error(E)}finally{this.unsubscribe()}},S.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},S}(n.Subscription);e.Subscriber=l;var d=Function.prototype.bind;function h(w,S){return d.call(w,S)}var p=function(){function w(S){this.partialObserver=S}return w.prototype.next=function(S){var E=this.partialObserver;if(E.next)try{E.next(S)}catch(P){y(P)}},w.prototype.error=function(S){var E=this.partialObserver;if(E.error)try{E.error(S)}catch(P){y(P)}else y(S)},w.prototype.complete=function(){var S=this.partialObserver;if(S.complete)try{S.complete()}catch(E){y(E)}},w}(),v=function(w){r(S,w);function S(E,P,C){var T=w.call(this)||this,I;if(t.isFunction(E)||!E)I={next:E??void 0,error:P??void 0,complete:C??void 0};else{var $;T&&o.config.useDeprecatedNextContext?($=Object.create(E),$.unsubscribe=function(){return T.unsubscribe()},I={next:E.next&&h(E.next,$),error:E.error&&h(E.error,$),complete:E.complete&&h(E.complete,$)}):I=E}return T.destination=new p(I),T}return S}(l);e.SafeSubscriber=v;function y(w){o.config.useDeprecatedSynchronousErrorHandling?u.captureError(w):i.reportUnhandledError(w)}function _(w){throw w}function b(w,S){var E=o.config.onStoppedNotification;E&&c.timeoutProvider.setTimeout(function(){return E(w,S)})}e.EMPTY_OBSERVER={closed:!0,next:a.noop,error:_,complete:a.noop}})(ai);var eo={};Object.defineProperty(eo,"__esModule",{value:!0});eo.observable=void 0;eo.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();var br={},ke={};Object.defineProperty(ke,"__esModule",{value:!0});ke.identity=void 0;function tM(e){return e}ke.identity=tM;Object.defineProperty(br,"__esModule",{value:!0});br.pipeFromArray=br.pipe=void 0;var rM=ke;function nM(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return MO(e)}br.pipe=nM;function MO(e){return e.length===0?rM.identity:e.length===1?e[0]:function(t){return e.reduce(function(n,o){return o(n)},t)}}br.pipeFromArray=MO;Object.defineProperty(de,"__esModule",{value:!0});de.Observable=void 0;var yv=ai,oM=je,iM=eo,aM=br,uM=Xr,sp=le,sM=Br,cM=function(){function e(r){r&&(this._subscribe=r)}return e.prototype.lift=function(r){var t=new e;return t.source=this,t.operator=r,t},e.prototype.subscribe=function(r,t,n){var o=this,i=fM(r)?r:new yv.SafeSubscriber(r,t,n);return sM.errorContext(function(){var a=o,s=a.operator,c=a.source;i.add(s?s.call(i,c):c?o._subscribe(i):o._trySubscribe(i))}),i},e.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(t){r.error(t)}},e.prototype.forEach=function(r,t){var n=this;return t=qb(t),new t(function(o,i){var a=new yv.SafeSubscriber({next:function(s){try{r(s)}catch(c){i(c),a.unsubscribe()}},error:i,complete:o});n.subscribe(a)})},e.prototype._subscribe=function(r){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(r)},e.prototype[iM.observable]=function(){return this},e.prototype.pipe=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return aM.pipeFromArray(r)(this)},e.prototype.toPromise=function(r){var t=this;return r=qb(r),new r(function(n,o){var i;t.subscribe(function(a){return i=a},function(a){return o(a)},function(){return n(i)})})},e.create=function(r){return new e(r)},e}();de.Observable=cM;function qb(e){var r;return(r=e??uM.config.Promise)!==null&&r!==void 0?r:Promise}function lM(e){return e&&sp.isFunction(e.next)&&sp.isFunction(e.error)&&sp.isFunction(e.complete)}function fM(e){return e&&e instanceof yv.Subscriber||lM(e)&&oM.isSubscription(e)}var to={},ui={},k={};Object.defineProperty(k,"__esModule",{value:!0});k.operate=k.hasLift=void 0;var dM=le;function DO(e){return dM.isFunction(e==null?void 0:e.lift)}k.hasLift=DO;function hM(e){return function(r){if(DO(r))return r.lift(function(t){try{return e(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}k.operate=hM;var U={},pM=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(U,"__esModule",{value:!0});U.OperatorSubscriber=U.createOperatorSubscriber=void 0;var vM=ai;function _M(e,r,t,n,o){return new LO(e,r,t,n,o)}U.createOperatorSubscriber=_M;var LO=function(e){pM(r,e);function r(t,n,o,i,a,s){var c=e.call(this,t)||this;return c.onFinalize=a,c.shouldUnsubscribe=s,c._next=n?function(u){try{n(u)}catch(l){t.error(l)}}:e.prototype._next,c._error=i?function(u){try{i(u)}catch(l){t.error(l)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=o?function(){try{o()}catch(u){t.error(u)}finally{this.unsubscribe()}}:e.prototype._complete,c}return r.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},r}(vM.Subscriber);U.OperatorSubscriber=LO;Object.defineProperty(ui,"__esModule",{value:!0});ui.refCount=void 0;var yM=k,bM=U;function mM(){return yM.operate(function(e,r){var t=null;e._refCount++;var n=bM.createOperatorSubscriber(r,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount){t=null;return}var o=e._connection,i=t;t=null,o&&(!i||o===i)&&o.unsubscribe(),r.unsubscribe()});e.subscribe(n),n.closed||(t=e.connect())})}ui.refCount=mM;var gM=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(to,"__esModule",{value:!0});to.ConnectableObservable=void 0;var wM=de,Gb=je,OM=ui,EM=U,SM=k,PM=function(e){gM(r,e);function r(t,n){var o=e.call(this)||this;return o.source=t,o.subjectFactory=n,o._subject=null,o._refCount=0,o._connection=null,SM.hasLift(t)&&(o.lift=t.lift),o}return r.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},r.prototype.getSubject=function(){var t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject},r.prototype._teardown=function(){this._refCount=0;var t=this._connection;this._subject=this._connection=null,t==null||t.unsubscribe()},r.prototype.connect=function(){var t=this,n=this._connection;if(!n){n=this._connection=new Gb.Subscription;var o=this.getSubject();n.add(this.source.subscribe(EM.createOperatorSubscriber(o,void 0,function(){t._teardown(),o.complete()},function(i){t._teardown(),o.error(i)},function(){return t._teardown()}))),n.closed&&(this._connection=null,n=Gb.Subscription.EMPTY)}return n},r.prototype.refCount=function(){return OM.refCount()(this)},r}(wM.Observable);to.ConnectableObservable=PM;var Hl={},UO={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.performanceTimestampProvider=void 0,e.performanceTimestampProvider={now:function(){return(e.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}})(UO);var x_={};(function(e){var r=f&&f.__read||function(o,i){var a=typeof Symbol=="function"&&o[Symbol.iterator];if(!a)return o;var s=a.call(o),c,u=[],l;try{for(;(i===void 0||i-- >0)&&!(c=s.next()).done;)u.push(c.value)}catch(d){l={error:d}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(l)throw l.error}}return u},t=f&&f.__spreadArray||function(o,i){for(var a=0,s=i.length,c=o.length;a<s;a++,c++)o[c]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrameProvider=void 0;var n=je;e.animationFrameProvider={schedule:function(o){var i=requestAnimationFrame,a=cancelAnimationFrame,s=e.animationFrameProvider.delegate;s&&(i=s.requestAnimationFrame,a=s.cancelAnimationFrame);var c=i(function(u){a=void 0,o(u)});return new n.Subscription(function(){return a==null?void 0:a(c)})},requestAnimationFrame:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=e.animationFrameProvider.delegate;return((a==null?void 0:a.requestAnimationFrame)||requestAnimationFrame).apply(void 0,t([],r(o)))},cancelAnimationFrame:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=e.animationFrameProvider.delegate;return((a==null?void 0:a.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,t([],r(o)))},delegate:void 0}})(x_);Object.defineProperty(Hl,"__esModule",{value:!0});Hl.animationFrames=void 0;var TM=de,CM=UO,Kb=x_;function AM(e){return e?FO(e):IM}Hl.animationFrames=AM;function FO(e){return new TM.Observable(function(r){var t=e||CM.performanceTimestampProvider,n=t.now(),o=0,i=function(){r.closed||(o=Kb.animationFrameProvider.requestAnimationFrame(function(a){o=0;var s=t.now();r.next({timestamp:e?s:a,elapsed:s-n}),i()}))};return i(),function(){o&&Kb.animationFrameProvider.cancelAnimationFrame(o)}})}var IM=FO(),Ae={},Za={};Object.defineProperty(Za,"__esModule",{value:!0});Za.ObjectUnsubscribedError=void 0;var RM=nr;Za.ObjectUnsubscribedError=RM.createErrorClass(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var BO=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),$M=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.AnonymousSubject=Ae.Subject=void 0;var Yb=de,bv=je,jM=Za,NM=xt,cp=Br,xO=function(e){BO(r,e);function r(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r.prototype.lift=function(t){var n=new mv(this,this);return n.operator=t,n},r.prototype._throwIfClosed=function(){if(this.closed)throw new jM.ObjectUnsubscribedError},r.prototype.next=function(t){var n=this;cp.errorContext(function(){var o,i;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var a=$M(n.currentObservers),s=a.next();!s.done;s=a.next()){var c=s.value;c.next(t)}}catch(u){o={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}}})},r.prototype.error=function(t){var n=this;cp.errorContext(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=t;for(var o=n.observers;o.length;)o.shift().error(t)}})},r.prototype.complete=function(){var t=this;cp.errorContext(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var n=t.observers;n.length;)n.shift().complete()}})},r.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(r.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),r.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},r.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},r.prototype._innerSubscribe=function(t){var n=this,o=this,i=o.hasError,a=o.isStopped,s=o.observers;return i||a?bv.EMPTY_SUBSCRIPTION:(this.currentObservers=null,s.push(t),new bv.Subscription(function(){n.currentObservers=null,NM.arrRemove(s,t)}))},r.prototype._checkFinalizedStatuses=function(t){var n=this,o=n.hasError,i=n.thrownError,a=n.isStopped;o?t.error(i):a&&t.complete()},r.prototype.asObservable=function(){var t=new Yb.Observable;return t.source=this,t},r.create=function(t,n){return new mv(t,n)},r}(Yb.Observable);Ae.Subject=xO;var mv=function(e){BO(r,e);function r(t,n){var o=e.call(this)||this;return o.destination=t,o.source=n,o}return r.prototype.next=function(t){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.next)===null||o===void 0||o.call(n,t)},r.prototype.error=function(t){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.error)===null||o===void 0||o.call(n,t)},r.prototype.complete=function(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)},r.prototype._subscribe=function(t){var n,o;return(o=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&o!==void 0?o:bv.EMPTY_SUBSCRIPTION},r}(xO);Ae.AnonymousSubject=mv;var Qa={},kM=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Qa,"__esModule",{value:!0});Qa.BehaviorSubject=void 0;var MM=Ae,DM=function(e){kM(r,e);function r(t){var n=e.call(this)||this;return n._value=t,n}return Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),r.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},r.prototype.getValue=function(){var t=this,n=t.hasError,o=t.thrownError,i=t._value;if(n)throw o;return this._throwIfClosed(),i},r.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},r}(MM.Subject);Qa.BehaviorSubject=DM;var si={},ql={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.dateTimestampProvider=void 0,e.dateTimestampProvider={now:function(){return(e.dateTimestampProvider.delegate||Date).now()},delegate:void 0}})(ql);var LM=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(si,"__esModule",{value:!0});si.ReplaySubject=void 0;var UM=Ae,FM=ql,BM=function(e){LM(r,e);function r(t,n,o){t===void 0&&(t=1/0),n===void 0&&(n=1/0),o===void 0&&(o=FM.dateTimestampProvider);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=n,i._timestampProvider=o,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,n),i}return r.prototype.next=function(t){var n=this,o=n.isStopped,i=n._buffer,a=n._infiniteTimeWindow,s=n._timestampProvider,c=n._windowTime;o||(i.push(t),!a&&i.push(s.now()+c)),this._trimBuffer(),e.prototype.next.call(this,t)},r.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(t),o=this,i=o._infiniteTimeWindow,a=o._buffer,s=a.slice(),c=0;c<s.length&&!t.closed;c+=i?1:2)t.next(s[c]);return this._checkFinalizedStatuses(t),n},r.prototype._trimBuffer=function(){var t=this,n=t._bufferSize,o=t._timestampProvider,i=t._buffer,a=t._infiniteTimeWindow,s=(a?1:2)*n;if(n<1/0&&s<i.length&&i.splice(0,i.length-s),!a){for(var c=o.now(),u=0,l=1;l<i.length&&i[l]<=c;l+=2)u=l;u&&i.splice(0,u+1)}},r}(UM.Subject);si.ReplaySubject=BM;var ci={},xM=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ci,"__esModule",{value:!0});ci.AsyncSubject=void 0;var VM=Ae,WM=function(e){xM(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t._value=null,t._hasValue=!1,t._isComplete=!1,t}return r.prototype._checkFinalizedStatuses=function(t){var n=this,o=n.hasError,i=n._hasValue,a=n._value,s=n.thrownError,c=n.isStopped,u=n._isComplete;o?t.error(s):(c||u)&&(i&&t.next(a),t.complete())},r.prototype.next=function(t){this.isStopped||(this._value=t,this._hasValue=!0)},r.prototype.complete=function(){var t=this,n=t._hasValue,o=t._value,i=t._isComplete;i||(this._isComplete=!0,n&&e.prototype.next.call(this,o),e.prototype.complete.call(this))},r}(VM.Subject);ci.AsyncSubject=WM;var VO={},Gl={},Jr={},Kl={},zM=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Kl,"__esModule",{value:!0});Kl.Action=void 0;var HM=je,qM=function(e){zM(r,e);function r(t,n){return e.call(this)||this}return r.prototype.schedule=function(t,n){return this},r}(HM.Subscription);Kl.Action=qM;var WO={};(function(e){var r=f&&f.__read||function(n,o){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var a=i.call(n),s,c=[],u;try{for(;(o===void 0||o-- >0)&&!(s=a.next()).done;)c.push(s.value)}catch(l){u={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(u)throw u.error}}return c},t=f&&f.__spreadArray||function(n,o){for(var i=0,a=o.length,s=n.length;i<a;i++,s++)n[s]=o[i];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.intervalProvider=void 0,e.intervalProvider={setInterval:function(n,o){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=e.intervalProvider.delegate;return s!=null&&s.setInterval?s.setInterval.apply(s,t([n,o],r(i))):setInterval.apply(void 0,t([n,o],r(i)))},clearInterval:function(n){var o=e.intervalProvider.delegate;return((o==null?void 0:o.clearInterval)||clearInterval)(n)},delegate:void 0}})(WO);var GM=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Jr,"__esModule",{value:!0});Jr.AsyncAction=void 0;var KM=Kl,Zb=WO,YM=xt,ZM=function(e){GM(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o.pending=!1,o}return r.prototype.schedule=function(t,n){var o;if(n===void 0&&(n=0),this.closed)return this;this.state=t;var i=this.id,a=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(a,i,n)),this.pending=!0,this.delay=n,this.id=(o=this.id)!==null&&o!==void 0?o:this.requestAsyncId(a,this.id,n),this},r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),Zb.intervalProvider.setInterval(t.flush.bind(t,this),o)},r.prototype.recycleAsyncId=function(t,n,o){if(o===void 0&&(o=0),o!=null&&this.delay===o&&this.pending===!1)return n;n!=null&&Zb.intervalProvider.clearInterval(n)},r.prototype.execute=function(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var o=this._execute(t,n);if(o)return o;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(t,n){var o=!1,i;try{this.work(t)}catch(a){o=!0,i=a||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),i},r.prototype.unsubscribe=function(){if(!this.closed){var t=this,n=t.id,o=t.scheduler,i=o.actions;this.work=this.state=this.scheduler=null,this.pending=!1,YM.arrRemove(i,this),n!=null&&(this.id=this.recycleAsyncId(o,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},r}(KM.Action);Jr.AsyncAction=ZM;var zO={},Uo={};Object.defineProperty(Uo,"__esModule",{value:!0});Uo.TestTools=Uo.Immediate=void 0;var QM=1,lp,el={};function Qb(e){return e in el?(delete el[e],!0):!1}Uo.Immediate={setImmediate:function(e){var r=QM++;return el[r]=!0,lp||(lp=Promise.resolve()),lp.then(function(){return Qb(r)&&e()}),r},clearImmediate:function(e){Qb(e)}};Uo.TestTools={pending:function(){return Object.keys(el).length}};(function(e){var r=f&&f.__read||function(a,s){var c=typeof Symbol=="function"&&a[Symbol.iterator];if(!c)return a;var u=c.call(a),l,d=[],h;try{for(;(s===void 0||s-- >0)&&!(l=u.next()).done;)d.push(l.value)}catch(p){h={error:p}}finally{try{l&&!l.done&&(c=u.return)&&c.call(u)}finally{if(h)throw h.error}}return d},t=f&&f.__spreadArray||function(a,s){for(var c=0,u=s.length,l=a.length;c<u;c++,l++)a[l]=s[c];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.immediateProvider=void 0;var n=Uo,o=n.Immediate.setImmediate,i=n.Immediate.clearImmediate;e.immediateProvider={setImmediate:function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var c=e.immediateProvider.delegate;return((c==null?void 0:c.setImmediate)||o).apply(void 0,t([],r(a)))},clearImmediate:function(a){var s=e.immediateProvider.delegate;return((s==null?void 0:s.clearImmediate)||i)(a)},delegate:void 0}})(zO);var XM=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Gl,"__esModule",{value:!0});Gl.AsapAction=void 0;var JM=Jr,Xb=zO,eD=function(e){XM(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o}return r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),o!==null&&o>0?e.prototype.requestAsyncId.call(this,t,n,o):(t.actions.push(this),t._scheduled||(t._scheduled=Xb.immediateProvider.setImmediate(t.flush.bind(t,void 0))))},r.prototype.recycleAsyncId=function(t,n,o){var i;if(o===void 0&&(o=0),o!=null?o>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,o);var a=t.actions;n!=null&&((i=a[a.length-1])===null||i===void 0?void 0:i.id)!==n&&(Xb.immediateProvider.clearImmediate(n),t._scheduled===n&&(t._scheduled=void 0))},r}(JM.AsyncAction);Gl.AsapAction=eD;var Yl={},en={},Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});Xa.Scheduler=void 0;var tD=ql,rD=function(){function e(r,t){t===void 0&&(t=e.now),this.schedulerActionCtor=r,this.now=t}return e.prototype.schedule=function(r,t,n){return t===void 0&&(t=0),new this.schedulerActionCtor(this,r).schedule(n,t)},e.now=tD.dateTimestampProvider.now,e}();Xa.Scheduler=rD;var nD=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(en,"__esModule",{value:!0});en.AsyncScheduler=void 0;var Jb=Xa,oD=function(e){nD(r,e);function r(t,n){n===void 0&&(n=Jb.Scheduler.now);var o=e.call(this,t,n)||this;return o.actions=[],o._active=!1,o}return r.prototype.flush=function(t){var n=this.actions;if(this._active){n.push(t);return}var o;this._active=!0;do if(o=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,o){for(;t=n.shift();)t.unsubscribe();throw o}},r}(Jb.Scheduler);en.AsyncScheduler=oD;var iD=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Yl,"__esModule",{value:!0});Yl.AsapScheduler=void 0;var aD=en,uD=function(e){iD(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.flush=function(t){this._active=!0;var n=this._scheduled;this._scheduled=void 0;var o=this.actions,i;t=t||o.shift();do if(i=t.execute(t.state,t.delay))break;while((t=o[0])&&t.id===n&&o.shift());if(this._active=!1,i){for(;(t=o[0])&&t.id===n&&o.shift();)t.unsubscribe();throw i}},r}(aD.AsyncScheduler);Yl.AsapScheduler=uD;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.asap=e.asapScheduler=void 0;var r=Gl,t=Yl;e.asapScheduler=new t.AsapScheduler(r.AsapAction),e.asap=e.asapScheduler})(VO);var lt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.async=e.asyncScheduler=void 0;var r=Jr,t=en;e.asyncScheduler=new t.AsyncScheduler(r.AsyncAction),e.async=e.asyncScheduler})(lt);var HO={},Zl={},sD=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Zl,"__esModule",{value:!0});Zl.QueueAction=void 0;var cD=Jr,lD=function(e){sD(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o}return r.prototype.schedule=function(t,n){return n===void 0&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},r.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),o!=null&&o>0||o==null&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,o):(t.flush(this),0)},r}(cD.AsyncAction);Zl.QueueAction=lD;var Ql={},fD=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ql,"__esModule",{value:!0});Ql.QueueScheduler=void 0;var dD=en,hD=function(e){fD(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(dD.AsyncScheduler);Ql.QueueScheduler=hD;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.queue=e.queueScheduler=void 0;var r=Zl,t=Ql;e.queueScheduler=new t.QueueScheduler(r.QueueAction),e.queue=e.queueScheduler})(HO);var qO={},Xl={},pD=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Xl,"__esModule",{value:!0});Xl.AnimationFrameAction=void 0;var vD=Jr,em=x_,_D=function(e){pD(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o}return r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),o!==null&&o>0?e.prototype.requestAsyncId.call(this,t,n,o):(t.actions.push(this),t._scheduled||(t._scheduled=em.animationFrameProvider.requestAnimationFrame(function(){return t.flush(void 0)})))},r.prototype.recycleAsyncId=function(t,n,o){var i;if(o===void 0&&(o=0),o!=null?o>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,o);var a=t.actions;n!=null&&n===t._scheduled&&((i=a[a.length-1])===null||i===void 0?void 0:i.id)!==n&&(em.animationFrameProvider.cancelAnimationFrame(n),t._scheduled=void 0)},r}(vD.AsyncAction);Xl.AnimationFrameAction=_D;var Jl={},yD=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Jl,"__esModule",{value:!0});Jl.AnimationFrameScheduler=void 0;var bD=en,mD=function(e){yD(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.flush=function(t){this._active=!0;var n;t?n=t.id:(n=this._scheduled,this._scheduled=void 0);var o=this.actions,i;t=t||o.shift();do if(i=t.execute(t.state,t.delay))break;while((t=o[0])&&t.id===n&&o.shift());if(this._active=!1,i){for(;(t=o[0])&&t.id===n&&o.shift();)t.unsubscribe();throw i}},r}(bD.AsyncScheduler);Jl.AnimationFrameScheduler=mD;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrame=e.animationFrameScheduler=void 0;var r=Xl,t=Jl;e.animationFrameScheduler=new t.AnimationFrameScheduler(r.AnimationFrameAction),e.animationFrame=e.animationFrameScheduler})(qO);var Fo={},GO=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Fo,"__esModule",{value:!0});Fo.VirtualAction=Fo.VirtualTimeScheduler=void 0;var gD=Jr,wD=je,OD=en,ED=function(e){GO(r,e);function r(t,n){t===void 0&&(t=KO),n===void 0&&(n=1/0);var o=e.call(this,t,function(){return o.frame})||this;return o.maxFrames=n,o.frame=0,o.index=-1,o}return r.prototype.flush=function(){for(var t=this,n=t.actions,o=t.maxFrames,i,a;(a=n[0])&&a.delay<=o&&(n.shift(),this.frame=a.delay,!(i=a.execute(a.state,a.delay))););if(i){for(;a=n.shift();)a.unsubscribe();throw i}},r.frameTimeFactor=10,r}(OD.AsyncScheduler);Fo.VirtualTimeScheduler=ED;var KO=function(e){GO(r,e);function r(t,n,o){o===void 0&&(o=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=o,i.active=!0,i.index=t.index=o,i}return r.prototype.schedule=function(t,n){if(n===void 0&&(n=0),Number.isFinite(n)){if(!this.id)return e.prototype.schedule.call(this,t,n);this.active=!1;var o=new r(this.scheduler,this.work);return this.add(o),o.schedule(t,n)}else return wD.Subscription.EMPTY},r.prototype.requestAsyncId=function(t,n,o){o===void 0&&(o=0),this.delay=t.frame+o;var i=t.actions;return i.push(this),i.sort(r.sortActions),1},r.prototype.recycleAsyncId=function(t,n,o){},r.prototype._execute=function(t,n){if(this.active===!0)return e.prototype._execute.call(this,t,n)},r.sortActions=function(t,n){return t.delay===n.delay?t.index===n.index?0:t.index>n.index?1:-1:t.delay>n.delay?1:-1},r}(gD.AsyncAction);Fo.VirtualAction=KO;var ef={},Ft={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=void 0;var r=de;e.EMPTY=new r.Observable(function(o){return o.complete()});function t(o){return o?n(o):e.EMPTY}e.empty=t;function n(o){return new r.Observable(function(i){return o.schedule(function(){return i.complete()})})}})(Ft);var li={},Re={},ro={};Object.defineProperty(ro,"__esModule",{value:!0});ro.isScheduler=void 0;var SD=le;function PD(e){return e&&SD.isFunction(e.schedule)}ro.isScheduler=PD;Object.defineProperty(Re,"__esModule",{value:!0});Re.popNumber=Re.popScheduler=Re.popResultSelector=void 0;var TD=le,CD=ro;function V_(e){return e[e.length-1]}function AD(e){return TD.isFunction(V_(e))?e.pop():void 0}Re.popResultSelector=AD;function ID(e){return CD.isScheduler(V_(e))?e.pop():void 0}Re.popScheduler=ID;function RD(e,r){return typeof V_(e)=="number"?e.pop():r}Re.popNumber=RD;var Vt={},Ja={},tf={},W={},fi={};Object.defineProperty(fi,"__esModule",{value:!0});fi.isArrayLike=void 0;fi.isArrayLike=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};var eu={};Object.defineProperty(eu,"__esModule",{value:!0});eu.isPromise=void 0;var $D=le;function jD(e){return $D.isFunction(e==null?void 0:e.then)}eu.isPromise=jD;var tu={};Object.defineProperty(tu,"__esModule",{value:!0});tu.isInteropObservable=void 0;var ND=eo,kD=le;function MD(e){return kD.isFunction(e[ND.observable])}tu.isInteropObservable=MD;var ru={};Object.defineProperty(ru,"__esModule",{value:!0});ru.isAsyncIterable=void 0;var DD=le;function LD(e){return Symbol.asyncIterator&&DD.isFunction(e==null?void 0:e[Symbol.asyncIterator])}ru.isAsyncIterable=LD;var nu={};Object.defineProperty(nu,"__esModule",{value:!0});nu.createInvalidObservableTypeError=void 0;function UD(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}nu.createInvalidObservableTypeError=UD;var ou={},Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.iterator=Fn.getSymbolIterator=void 0;function YO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}Fn.getSymbolIterator=YO;Fn.iterator=YO();Object.defineProperty(ou,"__esModule",{value:!0});ou.isIterable=void 0;var FD=Fn,BD=le;function xD(e){return BD.isFunction(e==null?void 0:e[FD.iterator])}ou.isIterable=xD;var xr={},VD=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Io=f&&f.__await||function(e){return this instanceof Io?(this.v=e,this):new Io(e)},WD=f&&f.__asyncGenerator||function(e,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(e,r||[]),o,i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(h){n[h]&&(o[h]=function(p){return new Promise(function(v,y){i.push([h,p,v,y])>1||s(h,p)})})}function s(h,p){try{c(n[h](p))}catch(v){d(i[0][3],v)}}function c(h){h.value instanceof Io?Promise.resolve(h.value.v).then(u,l):d(i[0][2],h)}function u(h){s("next",h)}function l(h){s("throw",h)}function d(h,p){h(p),i.shift(),i.length&&s(i[0][0],i[0][1])}};Object.defineProperty(xr,"__esModule",{value:!0});xr.isReadableStreamLike=xr.readableStreamLikeToAsyncGenerator=void 0;var zD=le;function HD(e){return WD(this,arguments,function(){var t,n,o,i;return VD(this,function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Io(t.read())];case 3:return n=a.sent(),o=n.value,i=n.done,i?[4,Io(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Io(o)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}xr.readableStreamLikeToAsyncGenerator=HD;function qD(e){return zD.isFunction(e==null?void 0:e.getReader)}xr.isReadableStreamLike=qD;var GD=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},KD=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},YD=f&&f.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e[Symbol.asyncIterator],t;return r?r.call(e):(e=typeof gv=="function"?gv(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(a){return new Promise(function(s,c){a=e[i](a),o(s,c,a.done,a.value)})}}function o(i,a,s,c){Promise.resolve(c).then(function(u){i({value:u,done:s})},a)}},gv=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(W,"__esModule",{value:!0});W.fromReadableStreamLike=W.fromAsyncIterable=W.fromIterable=W.fromPromise=W.fromArrayLike=W.fromInteropObservable=W.innerFrom=void 0;var ZD=fi,QD=eu,di=de,XD=tu,JD=ru,e2=nu,t2=ou,ZO=xr,r2=le,n2=Ya,o2=eo;function i2(e){if(e instanceof di.Observable)return e;if(e!=null){if(XD.isInteropObservable(e))return QO(e);if(ZD.isArrayLike(e))return XO(e);if(QD.isPromise(e))return JO(e);if(JD.isAsyncIterable(e))return W_(e);if(t2.isIterable(e))return e1(e);if(ZO.isReadableStreamLike(e))return t1(e)}throw e2.createInvalidObservableTypeError(e)}W.innerFrom=i2;function QO(e){return new di.Observable(function(r){var t=e[o2.observable]();if(r2.isFunction(t.subscribe))return t.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}W.fromInteropObservable=QO;function XO(e){return new di.Observable(function(r){for(var t=0;t<e.length&&!r.closed;t++)r.next(e[t]);r.complete()})}W.fromArrayLike=XO;function JO(e){return new di.Observable(function(r){e.then(function(t){r.closed||(r.next(t),r.complete())},function(t){return r.error(t)}).then(null,n2.reportUnhandledError)})}W.fromPromise=JO;function e1(e){return new di.Observable(function(r){var t,n;try{for(var o=gv(e),i=o.next();!i.done;i=o.next()){var a=i.value;if(r.next(a),r.closed)return}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}r.complete()})}W.fromIterable=e1;function W_(e){return new di.Observable(function(r){a2(e,r).catch(function(t){return r.error(t)})})}W.fromAsyncIterable=W_;function t1(e){return W_(ZO.readableStreamLikeToAsyncGenerator(e))}W.fromReadableStreamLike=t1;function a2(e,r){var t,n,o,i;return GD(this,void 0,void 0,function(){var a,s;return KD(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),t=YD(e),c.label=1;case 1:return[4,t.next()];case 2:if(n=c.sent(),!!n.done)return[3,4];if(a=n.value,r.next(a),r.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=c.sent(),o={error:s},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(i=t.return)?[4,i.call(t)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return r.complete(),[2]}})})}var tn={},Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.executeSchedule=void 0;function u2(e,r,t,n,o){n===void 0&&(n=0),o===void 0&&(o=!1);var i=r.schedule(function(){t(),o?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(i),!o)return i}Wt.executeSchedule=u2;Object.defineProperty(tn,"__esModule",{value:!0});tn.observeOn=void 0;var fp=Wt,s2=k,c2=U;function l2(e,r){return r===void 0&&(r=0),s2.operate(function(t,n){t.subscribe(c2.createOperatorSubscriber(n,function(o){return fp.executeSchedule(n,e,function(){return n.next(o)},r)},function(){return fp.executeSchedule(n,e,function(){return n.complete()},r)},function(o){return fp.executeSchedule(n,e,function(){return n.error(o)},r)}))})}tn.observeOn=l2;var rn={};Object.defineProperty(rn,"__esModule",{value:!0});rn.subscribeOn=void 0;var f2=k;function d2(e,r){return r===void 0&&(r=0),f2.operate(function(t,n){n.add(e.schedule(function(){return t.subscribe(n)},r))})}rn.subscribeOn=d2;Object.defineProperty(tf,"__esModule",{value:!0});tf.scheduleObservable=void 0;var h2=W,p2=tn,v2=rn;function _2(e,r){return h2.innerFrom(e).pipe(v2.subscribeOn(r),p2.observeOn(r))}tf.scheduleObservable=_2;var rf={};Object.defineProperty(rf,"__esModule",{value:!0});rf.schedulePromise=void 0;var y2=W,b2=tn,m2=rn;function g2(e,r){return y2.innerFrom(e).pipe(m2.subscribeOn(r),b2.observeOn(r))}rf.schedulePromise=g2;var nf={};Object.defineProperty(nf,"__esModule",{value:!0});nf.scheduleArray=void 0;var w2=de;function O2(e,r){return new w2.Observable(function(t){var n=0;return r.schedule(function(){n===e.length?t.complete():(t.next(e[n++]),t.closed||this.schedule())})})}nf.scheduleArray=O2;var iu={};Object.defineProperty(iu,"__esModule",{value:!0});iu.scheduleIterable=void 0;var E2=de,S2=Fn,P2=le,tm=Wt;function T2(e,r){return new E2.Observable(function(t){var n;return tm.executeSchedule(t,r,function(){n=e[S2.iterator](),tm.executeSchedule(t,r,function(){var o,i,a;try{o=n.next(),i=o.value,a=o.done}catch(s){t.error(s);return}a?t.complete():t.next(i)},0,!0)}),function(){return P2.isFunction(n==null?void 0:n.return)&&n.return()}})}iu.scheduleIterable=T2;var au={};Object.defineProperty(au,"__esModule",{value:!0});au.scheduleAsyncIterable=void 0;var C2=de,rm=Wt;function A2(e,r){if(!e)throw new Error("Iterable cannot be null");return new C2.Observable(function(t){rm.executeSchedule(t,r,function(){var n=e[Symbol.asyncIterator]();rm.executeSchedule(t,r,function(){n.next().then(function(o){o.done?t.complete():t.next(o.value)})},0,!0)})})}au.scheduleAsyncIterable=A2;var of={};Object.defineProperty(of,"__esModule",{value:!0});of.scheduleReadableStreamLike=void 0;var I2=au,R2=xr;function $2(e,r){return I2.scheduleAsyncIterable(R2.readableStreamLikeToAsyncGenerator(e),r)}of.scheduleReadableStreamLike=$2;Object.defineProperty(Ja,"__esModule",{value:!0});Ja.scheduled=void 0;var j2=tf,N2=rf,k2=nf,M2=iu,D2=au,L2=tu,U2=eu,F2=fi,B2=ou,x2=ru,V2=nu,W2=xr,z2=of;function H2(e,r){if(e!=null){if(L2.isInteropObservable(e))return j2.scheduleObservable(e,r);if(F2.isArrayLike(e))return k2.scheduleArray(e,r);if(U2.isPromise(e))return N2.schedulePromise(e,r);if(x2.isAsyncIterable(e))return D2.scheduleAsyncIterable(e,r);if(B2.isIterable(e))return M2.scheduleIterable(e,r);if(W2.isReadableStreamLike(e))return z2.scheduleReadableStreamLike(e,r)}throw V2.createInvalidObservableTypeError(e)}Ja.scheduled=H2;Object.defineProperty(Vt,"__esModule",{value:!0});Vt.from=void 0;var q2=Ja,G2=W;function K2(e,r){return r?q2.scheduled(e,r):G2.innerFrom(e)}Vt.from=K2;Object.defineProperty(li,"__esModule",{value:!0});li.of=void 0;var Y2=Re,Z2=Vt;function Q2(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Y2.popScheduler(e);return Z2.from(e,t)}li.of=Q2;var uu={};Object.defineProperty(uu,"__esModule",{value:!0});uu.throwError=void 0;var X2=de,J2=le;function eL(e,r){var t=J2.isFunction(e)?e:function(){return e},n=function(o){return o.error(t())};return new X2.Observable(r?function(o){return r.schedule(n,0,o)}:n)}uu.throwError=eL;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.observeNotification=e.Notification=e.NotificationKind=void 0;var r=Ft,t=li,n=uu,o=le;(function(s){s.NEXT="N",s.ERROR="E",s.COMPLETE="C"})(e.NotificationKind||(e.NotificationKind={}));var i=function(){function s(c,u,l){this.kind=c,this.value=u,this.error=l,this.hasValue=c==="N"}return s.prototype.observe=function(c){return a(this,c)},s.prototype.do=function(c,u,l){var d=this,h=d.kind,p=d.value,v=d.error;return h==="N"?c==null?void 0:c(p):h==="E"?u==null?void 0:u(v):l==null?void 0:l()},s.prototype.accept=function(c,u,l){var d;return o.isFunction((d=c)===null||d===void 0?void 0:d.next)?this.observe(c):this.do(c,u,l)},s.prototype.toObservable=function(){var c=this,u=c.kind,l=c.value,d=c.error,h=u==="N"?t.of(l):u==="E"?n.throwError(function(){return d}):u==="C"?r.EMPTY:0;if(!h)throw new TypeError("Unexpected notification kind "+u);return h},s.createNext=function(c){return new s("N",c)},s.createError=function(c){return new s("E",void 0,c)},s.createComplete=function(){return s.completeNotification},s.completeNotification=new s("C"),s}();e.Notification=i;function a(s,c){var u,l,d,h=s,p=h.kind,v=h.value,y=h.error;if(typeof p!="string")throw new TypeError('Invalid notification, missing "kind"');p==="N"?(u=c.next)===null||u===void 0||u.call(c,v):p==="E"?(l=c.error)===null||l===void 0||l.call(c,y):(d=c.complete)===null||d===void 0||d.call(c)}e.observeNotification=a})(ef);var af={};Object.defineProperty(af,"__esModule",{value:!0});af.isObservable=void 0;var tL=de,nm=le;function rL(e){return!!e&&(e instanceof tL.Observable||nm.isFunction(e.lift)&&nm.isFunction(e.subscribe))}af.isObservable=rL;var uf={},or={};Object.defineProperty(or,"__esModule",{value:!0});or.EmptyError=void 0;var nL=nr;or.EmptyError=nL.createErrorClass(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});Object.defineProperty(uf,"__esModule",{value:!0});uf.lastValueFrom=void 0;var oL=or;function iL(e,r){var t=typeof r=="object";return new Promise(function(n,o){var i=!1,a;e.subscribe({next:function(s){a=s,i=!0},error:o,complete:function(){i?n(a):t?n(r.defaultValue):o(new oL.EmptyError)}})})}uf.lastValueFrom=iL;var sf={};Object.defineProperty(sf,"__esModule",{value:!0});sf.firstValueFrom=void 0;var aL=or,uL=ai;function sL(e,r){var t=typeof r=="object";return new Promise(function(n,o){var i=new uL.SafeSubscriber({next:function(a){n(a),i.unsubscribe()},error:o,complete:function(){t?n(r.defaultValue):o(new aL.EmptyError)}});e.subscribe(i)})}sf.firstValueFrom=sL;var su={};Object.defineProperty(su,"__esModule",{value:!0});su.ArgumentOutOfRangeError=void 0;var cL=nr;su.ArgumentOutOfRangeError=cL.createErrorClass(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}});var cu={};Object.defineProperty(cu,"__esModule",{value:!0});cu.NotFoundError=void 0;var lL=nr;cu.NotFoundError=lL.createErrorClass(function(e){return function(t){e(this),this.name="NotFoundError",this.message=t}});var lu={};Object.defineProperty(lu,"__esModule",{value:!0});lu.SequenceError=void 0;var fL=nr;lu.SequenceError=fL.createErrorClass(function(e){return function(t){e(this),this.name="SequenceError",this.message=t}});var Ia={},hi={};Object.defineProperty(hi,"__esModule",{value:!0});hi.isValidDate=void 0;function dL(e){return e instanceof Date&&!isNaN(e)}hi.isValidDate=dL;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.timeout=e.TimeoutError=void 0;var r=lt,t=hi,n=k,o=W,i=nr,a=U,s=Wt;e.TimeoutError=i.createErrorClass(function(l){return function(h){h===void 0&&(h=null),l(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=h}});function c(l,d){var h=t.isValidDate(l)?{first:l}:typeof l=="number"?{each:l}:l,p=h.first,v=h.each,y=h.with,_=y===void 0?u:y,b=h.scheduler,w=b===void 0?d??r.asyncScheduler:b,S=h.meta,E=S===void 0?null:S;if(p==null&&v==null)throw new TypeError("No timeout provided.");return n.operate(function(P,C){var T,I,$=null,D=0,q=function(V){I=s.executeSchedule(C,w,function(){try{T.unsubscribe(),o.innerFrom(_({meta:E,lastValue:$,seen:D})).subscribe(C)}catch(H){C.error(H)}},V)};T=P.subscribe(a.createOperatorSubscriber(C,function(V){I==null||I.unsubscribe(),D++,C.next($=V),v>0&&q(v)},void 0,void 0,function(){I!=null&&I.closed||I==null||I.unsubscribe(),$=null})),!D&&q(p!=null?typeof p=="number"?p:+p-w.now():v)})}e.timeout=c;function u(l){throw new e.TimeoutError(l)}})(Ia);var cf={},fu={},ir={},zt={};Object.defineProperty(zt,"__esModule",{value:!0});zt.map=void 0;var hL=k,pL=U;function vL(e,r){return hL.operate(function(t,n){var o=0;t.subscribe(pL.createOperatorSubscriber(n,function(i){n.next(e.call(r,i,o++))}))})}zt.map=vL;var _L=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},yL=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(ir,"__esModule",{value:!0});ir.mapOneOrManyArgs=void 0;var bL=zt,mL=Array.isArray;function gL(e,r){return mL(r)?e.apply(void 0,yL([],_L(r))):e(r)}function wL(e){return bL.map(function(r){return gL(e,r)})}ir.mapOneOrManyArgs=wL;var OL=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},om=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(fu,"__esModule",{value:!0});fu.bindCallbackInternals=void 0;var EL=ro,SL=de,PL=rn,TL=ir,CL=tn,AL=ci;function wv(e,r,t,n){if(t)if(EL.isScheduler(t))n=t;else return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return wv(e,r,n).apply(this,o).pipe(TL.mapOneOrManyArgs(t))};return n?function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return wv(e,r).apply(this,o).pipe(PL.subscribeOn(n),CL.observeOn(n))}:function(){for(var o=this,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=new AL.AsyncSubject,c=!0;return new SL.Observable(function(u){var l=s.subscribe(u);if(c){c=!1;var d=!1,h=!1;r.apply(o,om(om([],OL(i)),[function(){for(var p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];if(e){var y=p.shift();if(y!=null){s.error(y);return}}s.next(1<p.length?p:p[0]),h=!0,d&&s.complete()}])),h&&s.complete(),d=!0}return l})}}fu.bindCallbackInternals=wv;Object.defineProperty(cf,"__esModule",{value:!0});cf.bindCallback=void 0;var IL=fu;function RL(e,r,t){return IL.bindCallbackInternals(!1,e,r,t)}cf.bindCallback=RL;var lf={};Object.defineProperty(lf,"__esModule",{value:!0});lf.bindNodeCallback=void 0;var $L=fu;function jL(e,r,t){return $L.bindCallbackInternals(!0,e,r,t)}lf.bindNodeCallback=jL;var Vr={},du={};Object.defineProperty(du,"__esModule",{value:!0});du.argsArgArrayOrObject=void 0;var NL=Array.isArray,kL=Object.getPrototypeOf,ML=Object.prototype,DL=Object.keys;function LL(e){if(e.length===1){var r=e[0];if(NL(r))return{args:r,keys:null};if(UL(r)){var t=DL(r);return{args:t.map(function(n){return r[n]}),keys:t}}}return{args:e,keys:null}}du.argsArgArrayOrObject=LL;function UL(e){return e&&typeof e=="object"&&kL(e)===ML}var hu={};Object.defineProperty(hu,"__esModule",{value:!0});hu.createObject=void 0;function FL(e,r){return e.reduce(function(t,n,o){return t[n]=r[o],t},{})}hu.createObject=FL;Object.defineProperty(Vr,"__esModule",{value:!0});Vr.combineLatestInit=Vr.combineLatest=void 0;var BL=de,xL=du,r1=Vt,n1=ke,VL=ir,im=Re,WL=hu,zL=U,HL=Wt;function qL(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=im.popScheduler(e),n=im.popResultSelector(e),o=xL.argsArgArrayOrObject(e),i=o.args,a=o.keys;if(i.length===0)return r1.from([],t);var s=new BL.Observable(o1(i,t,a?function(c){return WL.createObject(a,c)}:n1.identity));return n?s.pipe(VL.mapOneOrManyArgs(n)):s}Vr.combineLatest=qL;function o1(e,r,t){return t===void 0&&(t=n1.identity),function(n){am(r,function(){for(var o=e.length,i=new Array(o),a=o,s=o,c=function(l){am(r,function(){var d=r1.from(e[l],r),h=!1;d.subscribe(zL.createOperatorSubscriber(n,function(p){i[l]=p,h||(h=!0,s--),s||n.next(t(i.slice()))},function(){--a||n.complete()}))},n)},u=0;u<o;u++)c(u)},n)}}Vr.combineLatestInit=o1;function am(e,r,t){e?HL.executeSchedule(t,e,r):r()}var no={},oo={},nn={},Pt={},pi={};Object.defineProperty(pi,"__esModule",{value:!0});pi.mergeInternals=void 0;var GL=W,KL=Wt,um=U;function YL(e,r,t,n,o,i,a,s){var c=[],u=0,l=0,d=!1,h=function(){d&&!c.length&&!u&&r.complete()},p=function(y){return u<n?v(y):c.push(y)},v=function(y){i&&r.next(y),u++;var _=!1;GL.innerFrom(t(y,l++)).subscribe(um.createOperatorSubscriber(r,function(b){o==null||o(b),i?p(b):r.next(b)},function(){_=!0},void 0,function(){if(_)try{u--;for(var b=function(){var w=c.shift();a?KL.executeSchedule(r,a,function(){return v(w)}):v(w)};c.length&&u<n;)b();h()}catch(w){r.error(w)}}))};return e.subscribe(um.createOperatorSubscriber(r,p,function(){d=!0,h()})),function(){s==null||s()}}pi.mergeInternals=YL;Object.defineProperty(Pt,"__esModule",{value:!0});Pt.mergeMap=void 0;var ZL=zt,QL=W,XL=k,JL=pi,eU=le;function i1(e,r,t){return t===void 0&&(t=1/0),eU.isFunction(r)?i1(function(n,o){return ZL.map(function(i,a){return r(n,i,o,a)})(QL.innerFrom(e(n,o)))},t):(typeof r=="number"&&(t=r),XL.operate(function(n,o){return JL.mergeInternals(n,o,e,t)}))}Pt.mergeMap=i1;Object.defineProperty(nn,"__esModule",{value:!0});nn.mergeAll=void 0;var tU=Pt,rU=ke;function nU(e){return e===void 0&&(e=1/0),tU.mergeMap(rU.identity,e)}nn.mergeAll=nU;Object.defineProperty(oo,"__esModule",{value:!0});oo.concatAll=void 0;var oU=nn;function iU(){return oU.mergeAll(1)}oo.concatAll=iU;Object.defineProperty(no,"__esModule",{value:!0});no.concat=void 0;var aU=oo,uU=Re,sU=Vt;function cU(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return aU.concatAll()(sU.from(e,uU.popScheduler(e)))}no.concat=cU;var ff={},io={};Object.defineProperty(io,"__esModule",{value:!0});io.defer=void 0;var lU=de,fU=W;function dU(e){return new lU.Observable(function(r){fU.innerFrom(e()).subscribe(r)})}io.defer=dU;Object.defineProperty(ff,"__esModule",{value:!0});ff.connectable=void 0;var hU=Ae,pU=de,vU=io,_U={connector:function(){return new hU.Subject},resetOnDisconnect:!0};function yU(e,r){r===void 0&&(r=_U);var t=null,n=r.connector,o=r.resetOnDisconnect,i=o===void 0?!0:o,a=n(),s=new pU.Observable(function(c){return a.subscribe(c)});return s.connect=function(){return(!t||t.closed)&&(t=vU.defer(function(){return e}).subscribe(a),i&&t.add(function(){return a=n()})),t},s}ff.connectable=yU;var df={};Object.defineProperty(df,"__esModule",{value:!0});df.forkJoin=void 0;var bU=de,mU=du,gU=W,wU=Re,OU=U,EU=ir,SU=hu;function PU(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=wU.popResultSelector(e),n=mU.argsArgArrayOrObject(e),o=n.args,i=n.keys,a=new bU.Observable(function(s){var c=o.length;if(!c){s.complete();return}for(var u=new Array(c),l=c,d=c,h=function(v){var y=!1;gU.innerFrom(o[v]).subscribe(OU.createOperatorSubscriber(s,function(_){y||(y=!0,d--),u[v]=_},function(){return l--},void 0,function(){(!l||!y)&&(d||s.next(i?SU.createObject(i,u):u),s.complete())}))},p=0;p<c;p++)h(p)});return t?a.pipe(EU.mapOneOrManyArgs(t)):a}df.forkJoin=PU;var hf={},TU=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(hf,"__esModule",{value:!0});hf.fromEvent=void 0;var CU=W,AU=de,IU=Pt,RU=fi,Bn=le,$U=ir,jU=["addListener","removeListener"],NU=["addEventListener","removeEventListener"],kU=["on","off"];function Ov(e,r,t,n){if(Bn.isFunction(t)&&(n=t,t=void 0),n)return Ov(e,r,t).pipe($U.mapOneOrManyArgs(n));var o=TU(LU(e)?NU.map(function(s){return function(c){return e[s](r,c,t)}}):MU(e)?jU.map(sm(e,r)):DU(e)?kU.map(sm(e,r)):[],2),i=o[0],a=o[1];if(!i&&RU.isArrayLike(e))return IU.mergeMap(function(s){return Ov(s,r,t)})(CU.innerFrom(e));if(!i)throw new TypeError("Invalid event target");return new AU.Observable(function(s){var c=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return s.next(1<u.length?u:u[0])};return i(c),function(){return a(c)}})}hf.fromEvent=Ov;function sm(e,r){return function(t){return function(n){return e[t](r,n)}}}function MU(e){return Bn.isFunction(e.addListener)&&Bn.isFunction(e.removeListener)}function DU(e){return Bn.isFunction(e.on)&&Bn.isFunction(e.off)}function LU(e){return Bn.isFunction(e.addEventListener)&&Bn.isFunction(e.removeEventListener)}var pf={};Object.defineProperty(pf,"__esModule",{value:!0});pf.fromEventPattern=void 0;var UU=de,FU=le,BU=ir;function a1(e,r,t){return t?a1(e,r).pipe(BU.mapOneOrManyArgs(t)):new UU.Observable(function(n){var o=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return n.next(a.length===1?a[0]:a)},i=e(o);return FU.isFunction(r)?function(){return r(o,i)}:void 0})}pf.fromEventPattern=a1;var vf={},xU=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(vf,"__esModule",{value:!0});vf.generate=void 0;var cm=ke,VU=ro,WU=io,zU=iu;function HU(e,r,t,n,o){var i,a,s,c;arguments.length===1?(i=e,c=i.initialState,r=i.condition,t=i.iterate,a=i.resultSelector,s=a===void 0?cm.identity:a,o=i.scheduler):(c=e,!n||VU.isScheduler(n)?(s=cm.identity,o=n):s=n);function u(){var l;return xU(this,function(d){switch(d.label){case 0:l=c,d.label=1;case 1:return!r||r(l)?[4,s(l)]:[3,4];case 2:d.sent(),d.label=3;case 3:return l=t(l),[3,1];case 4:return[2]}})}return WU.defer(o?function(){return zU.scheduleIterable(u(),o)}:u)}vf.generate=HU;var _f={};Object.defineProperty(_f,"__esModule",{value:!0});_f.iif=void 0;var qU=io;function GU(e,r,t){return qU.defer(function(){return e()?r:t})}_f.iif=GU;var pu={},ar={};Object.defineProperty(ar,"__esModule",{value:!0});ar.timer=void 0;var KU=de,YU=lt,ZU=ro,QU=hi;function XU(e,r,t){e===void 0&&(e=0),t===void 0&&(t=YU.async);var n=-1;return r!=null&&(ZU.isScheduler(r)?t=r:n=r),new KU.Observable(function(o){var i=QU.isValidDate(e)?+e-t.now():e;i<0&&(i=0);var a=0;return t.schedule(function(){o.closed||(o.next(a++),0<=n?this.schedule(void 0,n):o.complete())},i)})}ar.timer=XU;Object.defineProperty(pu,"__esModule",{value:!0});pu.interval=void 0;var JU=lt,eF=ar;function tF(e,r){return e===void 0&&(e=0),r===void 0&&(r=JU.asyncScheduler),e<0&&(e=0),eF.timer(e,e,r)}pu.interval=tF;var yf={};Object.defineProperty(yf,"__esModule",{value:!0});yf.merge=void 0;var rF=nn,nF=W,oF=Ft,lm=Re,iF=Vt;function aF(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=lm.popScheduler(e),n=lm.popNumber(e,1/0),o=e;return o.length?o.length===1?nF.innerFrom(o[0]):rF.mergeAll(n)(iF.from(o,t)):oF.EMPTY}yf.merge=aF;var Ev={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.never=e.NEVER=void 0;var r=de,t=Ne;e.NEVER=new r.Observable(t.noop);function n(){return e.NEVER}e.never=n})(Ev);var vu={},gr={};Object.defineProperty(gr,"__esModule",{value:!0});gr.argsOrArgArray=void 0;var uF=Array.isArray;function sF(e){return e.length===1&&uF(e[0])?e[0]:e}gr.argsOrArgArray=sF;Object.defineProperty(vu,"__esModule",{value:!0});vu.onErrorResumeNext=void 0;var cF=de,lF=gr,fF=U,fm=Ne,dF=W;function hF(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=lF.argsOrArgArray(e);return new cF.Observable(function(n){var o=0,i=function(){if(o<t.length){var a=void 0;try{a=dF.innerFrom(t[o++])}catch{i();return}var s=new fF.OperatorSubscriber(n,void 0,fm.noop,fm.noop);a.subscribe(s),s.add(i)}else n.complete()};i()})}vu.onErrorResumeNext=hF;var bf={};Object.defineProperty(bf,"__esModule",{value:!0});bf.pairs=void 0;var pF=Vt;function vF(e,r){return pF.from(Object.entries(e),r)}bf.pairs=vF;var mf={},_u={};Object.defineProperty(_u,"__esModule",{value:!0});_u.not=void 0;function _F(e,r){return function(t,n){return!e.call(r,t,n)}}_u.not=_F;var Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.filter=void 0;var yF=k,bF=U;function mF(e,r){return yF.operate(function(t,n){var o=0;t.subscribe(bF.createOperatorSubscriber(n,function(i){return e.call(r,i,o++)&&n.next(i)}))})}Ht.filter=mF;Object.defineProperty(mf,"__esModule",{value:!0});mf.partition=void 0;var gF=_u,dm=Ht,hm=W;function wF(e,r,t){return[dm.filter(r,t)(hm.innerFrom(e)),dm.filter(gF.not(r,t))(hm.innerFrom(e))]}mf.partition=wF;var xn={};Object.defineProperty(xn,"__esModule",{value:!0});xn.raceInit=xn.race=void 0;var OF=de,u1=W,EF=gr,SF=U;function PF(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e=EF.argsOrArgArray(e),e.length===1?u1.innerFrom(e[0]):new OF.Observable(s1(e))}xn.race=PF;function s1(e){return function(r){for(var t=[],n=function(i){t.push(u1.innerFrom(e[i]).subscribe(SF.createOperatorSubscriber(r,function(a){if(t){for(var s=0;s<t.length;s++)s!==i&&t[s].unsubscribe();t=null}r.next(a)})))},o=0;t&&!r.closed&&o<e.length;o++)n(o)}}xn.raceInit=s1;var gf={};Object.defineProperty(gf,"__esModule",{value:!0});gf.range=void 0;var TF=de,CF=Ft;function AF(e,r,t){if(r==null&&(r=e,e=0),r<=0)return CF.EMPTY;var n=r+e;return new TF.Observable(t?function(o){var i=e;return t.schedule(function(){i<n?(o.next(i++),this.schedule()):o.complete()})}:function(o){for(var i=e;i<n&&!o.closed;)o.next(i++);o.complete()})}gf.range=AF;var wf={};Object.defineProperty(wf,"__esModule",{value:!0});wf.using=void 0;var IF=de,RF=W,$F=Ft;function jF(e,r){return new IF.Observable(function(t){var n=e(),o=r(n),i=o?RF.innerFrom(o):$F.EMPTY;return i.subscribe(t),function(){n&&n.unsubscribe()}})}wf.using=jF;var vi={},NF=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},kF=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(vi,"__esModule",{value:!0});vi.zip=void 0;var MF=de,DF=W,LF=gr,UF=Ft,FF=U,BF=Re;function xF(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=BF.popResultSelector(e),n=LF.argsOrArgArray(e);return n.length?new MF.Observable(function(o){var i=n.map(function(){return[]}),a=n.map(function(){return!1});o.add(function(){i=a=null});for(var s=function(u){DF.innerFrom(n[u]).subscribe(FF.createOperatorSubscriber(o,function(l){if(i[u].push(l),i.every(function(h){return h.length})){var d=i.map(function(h){return h.shift()});o.next(t?t.apply(void 0,kF([],NF(d))):d),i.some(function(h,p){return!h.length&&a[p]})&&o.complete()}},function(){a[u]=!0,!i[u].length&&o.complete()}))},c=0;!o.closed&&c<n.length;c++)s(c);return function(){i=a=null}}):UF.EMPTY}vi.zip=xF;var c1={};Object.defineProperty(c1,"__esModule",{value:!0});var _i={};Object.defineProperty(_i,"__esModule",{value:!0});_i.audit=void 0;var VF=k,WF=W,pm=U;function zF(e){return VF.operate(function(r,t){var n=!1,o=null,i=null,a=!1,s=function(){if(i==null||i.unsubscribe(),i=null,n){n=!1;var u=o;o=null,t.next(u)}a&&t.complete()},c=function(){i=null,a&&t.complete()};r.subscribe(pm.createOperatorSubscriber(t,function(u){n=!0,o=u,i||WF.innerFrom(e(u)).subscribe(i=pm.createOperatorSubscriber(t,s,c))},function(){a=!0,(!n||!i||i.closed)&&t.complete()}))})}_i.audit=zF;var yu={};Object.defineProperty(yu,"__esModule",{value:!0});yu.auditTime=void 0;var HF=lt,qF=_i,GF=ar;function KF(e,r){return r===void 0&&(r=HF.asyncScheduler),qF.audit(function(){return GF.timer(e,r)})}yu.auditTime=KF;var bu={};Object.defineProperty(bu,"__esModule",{value:!0});bu.buffer=void 0;var YF=k,ZF=Ne,vm=U,QF=W;function XF(e){return YF.operate(function(r,t){var n=[];return r.subscribe(vm.createOperatorSubscriber(t,function(o){return n.push(o)},function(){t.next(n),t.complete()})),QF.innerFrom(e).subscribe(vm.createOperatorSubscriber(t,function(){var o=n;n=[],t.next(o)},ZF.noop)),function(){n=null}})}bu.buffer=XF;var mu={},dp=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(mu,"__esModule",{value:!0});mu.bufferCount=void 0;var JF=k,e4=U,t4=xt;function r4(e,r){return r===void 0&&(r=null),r=r??e,JF.operate(function(t,n){var o=[],i=0;t.subscribe(e4.createOperatorSubscriber(n,function(a){var s,c,u,l,d=null;i++%r===0&&o.push([]);try{for(var h=dp(o),p=h.next();!p.done;p=h.next()){var v=p.value;v.push(a),e<=v.length&&(d=d??[],d.push(v))}}catch(b){s={error:b}}finally{try{p&&!p.done&&(c=h.return)&&c.call(h)}finally{if(s)throw s.error}}if(d)try{for(var y=dp(d),_=y.next();!_.done;_=y.next()){var v=_.value;t4.arrRemove(o,v),n.next(v)}}catch(b){u={error:b}}finally{try{_&&!_.done&&(l=y.return)&&l.call(y)}finally{if(u)throw u.error}}},function(){var a,s;try{for(var c=dp(o),u=c.next();!u.done;u=c.next()){var l=u.value;n.next(l)}}catch(d){a={error:d}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}n.complete()},void 0,function(){o=null}))})}mu.bufferCount=r4;var gu={},n4=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(gu,"__esModule",{value:!0});gu.bufferTime=void 0;var o4=je,i4=k,a4=U,u4=xt,s4=lt,c4=Re,_m=Wt;function l4(e){for(var r,t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=(r=c4.popScheduler(n))!==null&&r!==void 0?r:s4.asyncScheduler,a=(t=n[0])!==null&&t!==void 0?t:null,s=n[1]||1/0;return i4.operate(function(c,u){var l=[],d=!1,h=function(y){var _=y.buffer,b=y.subs;b.unsubscribe(),u4.arrRemove(l,y),u.next(_),d&&p()},p=function(){if(l){var y=new o4.Subscription;u.add(y);var _=[],b={buffer:_,subs:y};l.push(b),_m.executeSchedule(y,i,function(){return h(b)},e)}};a!==null&&a>=0?_m.executeSchedule(u,i,p,a,!0):d=!0,p();var v=a4.createOperatorSubscriber(u,function(y){var _,b,w=l.slice();try{for(var S=n4(w),E=S.next();!E.done;E=S.next()){var P=E.value,C=P.buffer;C.push(y),s<=C.length&&h(P)}}catch(T){_={error:T}}finally{try{E&&!E.done&&(b=S.return)&&b.call(S)}finally{if(_)throw _.error}}},function(){for(;l!=null&&l.length;)u.next(l.shift().buffer);v==null||v.unsubscribe(),u.complete(),u.unsubscribe()},void 0,function(){return l=null});c.subscribe(v)})}gu.bufferTime=l4;var wu={},f4=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(wu,"__esModule",{value:!0});wu.bufferToggle=void 0;var d4=je,h4=k,ym=W,hp=U,bm=Ne,p4=xt;function v4(e,r){return h4.operate(function(t,n){var o=[];ym.innerFrom(e).subscribe(hp.createOperatorSubscriber(n,function(i){var a=[];o.push(a);var s=new d4.Subscription,c=function(){p4.arrRemove(o,a),n.next(a),s.unsubscribe()};s.add(ym.innerFrom(r(i)).subscribe(hp.createOperatorSubscriber(n,c,bm.noop)))},bm.noop)),t.subscribe(hp.createOperatorSubscriber(n,function(i){var a,s;try{for(var c=f4(o),u=c.next();!u.done;u=c.next()){var l=u.value;l.push(i)}}catch(d){a={error:d}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}},function(){for(;o.length>0;)n.next(o.shift());n.complete()}))})}wu.bufferToggle=v4;var Ou={};Object.defineProperty(Ou,"__esModule",{value:!0});Ou.bufferWhen=void 0;var _4=k,y4=Ne,mm=U,b4=W;function m4(e){return _4.operate(function(r,t){var n=null,o=null,i=function(){o==null||o.unsubscribe();var a=n;n=[],a&&t.next(a),b4.innerFrom(e()).subscribe(o=mm.createOperatorSubscriber(t,i,y4.noop))};i(),r.subscribe(mm.createOperatorSubscriber(t,function(a){return n==null?void 0:n.push(a)},function(){n&&t.next(n),t.complete()},void 0,function(){return n=o=null}))})}Ou.bufferWhen=m4;var Eu={};Object.defineProperty(Eu,"__esModule",{value:!0});Eu.catchError=void 0;var g4=W,w4=U,O4=k;function l1(e){return O4.operate(function(r,t){var n=null,o=!1,i;n=r.subscribe(w4.createOperatorSubscriber(t,void 0,void 0,function(a){i=g4.innerFrom(e(a,l1(e)(r))),n?(n.unsubscribe(),n=null,i.subscribe(t)):o=!0})),o&&(n.unsubscribe(),n=null,i.subscribe(t))})}Eu.catchError=l1;var Su={},yi={},Pu={},bi={},wr={},Tu={};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.scanInternals=void 0;var E4=U;function S4(e,r,t,n,o){return function(i,a){var s=t,c=r,u=0;i.subscribe(E4.createOperatorSubscriber(a,function(l){var d=u++;c=s?e(c,l,d):(s=!0,l),n&&a.next(c)},o&&function(){s&&a.next(c),a.complete()}))}}Tu.scanInternals=S4;Object.defineProperty(wr,"__esModule",{value:!0});wr.reduce=void 0;var P4=Tu,T4=k;function C4(e,r){return T4.operate(P4.scanInternals(e,r,arguments.length>=2,!1,!0))}wr.reduce=C4;Object.defineProperty(bi,"__esModule",{value:!0});bi.toArray=void 0;var A4=wr,I4=k,R4=function(e,r){return e.push(r),e};function $4(){return I4.operate(function(e,r){A4.reduce(R4,[])(e).subscribe(r)})}bi.toArray=$4;Object.defineProperty(Pu,"__esModule",{value:!0});Pu.joinAllInternals=void 0;var j4=ke,N4=ir,k4=br,M4=Pt,D4=bi;function L4(e,r){return k4.pipe(D4.toArray(),M4.mergeMap(function(t){return e(t)}),r?N4.mapOneOrManyArgs(r):j4.identity)}Pu.joinAllInternals=L4;Object.defineProperty(yi,"__esModule",{value:!0});yi.combineLatestAll=void 0;var U4=Vr,F4=Pu;function B4(e){return F4.joinAllInternals(U4.combineLatest,e)}yi.combineLatestAll=B4;Object.defineProperty(Su,"__esModule",{value:!0});Su.combineAll=void 0;var x4=yi;Su.combineAll=x4.combineLatestAll;var Cu={},Au={},gm=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},wm=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Au,"__esModule",{value:!0});Au.combineLatest=void 0;var V4=Vr,W4=k,z4=gr,H4=ir,q4=br,G4=Re;function f1(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=G4.popResultSelector(e);return t?q4.pipe(f1.apply(void 0,wm([],gm(e))),H4.mapOneOrManyArgs(t)):W4.operate(function(n,o){V4.combineLatestInit(wm([n],gm(z4.argsOrArgArray(e))))(o)})}Au.combineLatest=f1;var K4=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Y4=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Cu,"__esModule",{value:!0});Cu.combineLatestWith=void 0;var Z4=Au;function Q4(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Z4.combineLatest.apply(void 0,Y4([],K4(e)))}Cu.combineLatestWith=Q4;var mi={};Object.defineProperty(mi,"__esModule",{value:!0});mi.concatMap=void 0;var Om=Pt,X4=le;function J4(e,r){return X4.isFunction(r)?Om.mergeMap(e,r,1):Om.mergeMap(e,1)}mi.concatMap=J4;var Iu={};Object.defineProperty(Iu,"__esModule",{value:!0});Iu.concatMapTo=void 0;var Em=mi,eB=le;function tB(e,r){return eB.isFunction(r)?Em.concatMap(function(){return e},r):Em.concatMap(function(){return e})}Iu.concatMapTo=tB;var Ru={},$u={},rB=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},nB=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty($u,"__esModule",{value:!0});$u.concat=void 0;var oB=k,iB=oo,aB=Re,uB=Vt;function sB(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=aB.popScheduler(e);return oB.operate(function(n,o){iB.concatAll()(uB.from(nB([n],rB(e)),t)).subscribe(o)})}$u.concat=sB;var cB=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},lB=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ru,"__esModule",{value:!0});Ru.concatWith=void 0;var fB=$u;function dB(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return fB.concat.apply(void 0,lB([],cB(e)))}Ru.concatWith=dB;var ao={},Of={};Object.defineProperty(Of,"__esModule",{value:!0});Of.fromSubscribable=void 0;var hB=de;function pB(e){return new hB.Observable(function(r){return e.subscribe(r)})}Of.fromSubscribable=pB;Object.defineProperty(ao,"__esModule",{value:!0});ao.connect=void 0;var vB=Ae,_B=W,yB=k,bB=Of,mB={connector:function(){return new vB.Subject}};function gB(e,r){r===void 0&&(r=mB);var t=r.connector;return yB.operate(function(n,o){var i=t();_B.innerFrom(e(bB.fromSubscribable(i))).subscribe(o),o.add(n.subscribe(i))})}ao.connect=gB;var ju={};Object.defineProperty(ju,"__esModule",{value:!0});ju.count=void 0;var wB=wr;function OB(e){return wB.reduce(function(r,t,n){return!e||e(t,n)?r+1:r},0)}ju.count=OB;var Nu={};Object.defineProperty(Nu,"__esModule",{value:!0});Nu.debounce=void 0;var EB=k,SB=Ne,Sm=U,PB=W;function TB(e){return EB.operate(function(r,t){var n=!1,o=null,i=null,a=function(){if(i==null||i.unsubscribe(),i=null,n){n=!1;var s=o;o=null,t.next(s)}};r.subscribe(Sm.createOperatorSubscriber(t,function(s){i==null||i.unsubscribe(),n=!0,o=s,i=Sm.createOperatorSubscriber(t,a,SB.noop),PB.innerFrom(e(s)).subscribe(i)},function(){a(),t.complete()},void 0,function(){o=i=null}))})}Nu.debounce=TB;var ku={};Object.defineProperty(ku,"__esModule",{value:!0});ku.debounceTime=void 0;var CB=lt,AB=k,IB=U;function RB(e,r){return r===void 0&&(r=CB.asyncScheduler),AB.operate(function(t,n){var o=null,i=null,a=null,s=function(){if(o){o.unsubscribe(),o=null;var u=i;i=null,n.next(u)}};function c(){var u=a+e,l=r.now();if(l<u){o=this.schedule(void 0,u-l),n.add(o);return}s()}t.subscribe(IB.createOperatorSubscriber(n,function(u){i=u,a=r.now(),o||(o=r.schedule(c,e),n.add(o))},function(){s(),n.complete()},void 0,function(){i=o=null}))})}ku.debounceTime=RB;var on={};Object.defineProperty(on,"__esModule",{value:!0});on.defaultIfEmpty=void 0;var $B=k,jB=U;function NB(e){return $B.operate(function(r,t){var n=!1;r.subscribe(jB.createOperatorSubscriber(t,function(o){n=!0,t.next(o)},function(){n||t.next(e),t.complete()}))})}on.defaultIfEmpty=NB;var Mu={},gi={},an={};Object.defineProperty(an,"__esModule",{value:!0});an.take=void 0;var kB=Ft,MB=k,DB=U;function LB(e){return e<=0?function(){return kB.EMPTY}:MB.operate(function(r,t){var n=0;r.subscribe(DB.createOperatorSubscriber(t,function(o){++n<=e&&(t.next(o),e<=n&&t.complete())}))})}an.take=LB;var wi={};Object.defineProperty(wi,"__esModule",{value:!0});wi.ignoreElements=void 0;var UB=k,FB=U,BB=Ne;function xB(){return UB.operate(function(e,r){e.subscribe(FB.createOperatorSubscriber(r,BB.noop))})}wi.ignoreElements=xB;var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.mapTo=void 0;var VB=zt;function WB(e){return VB.map(function(){return e})}Oi.mapTo=WB;Object.defineProperty(gi,"__esModule",{value:!0});gi.delayWhen=void 0;var zB=no,Pm=an,HB=wi,qB=Oi,GB=Pt,KB=W;function d1(e,r){return r?function(t){return zB.concat(r.pipe(Pm.take(1),HB.ignoreElements()),t.pipe(d1(e)))}:GB.mergeMap(function(t,n){return KB.innerFrom(e(t,n)).pipe(Pm.take(1),qB.mapTo(t))})}gi.delayWhen=d1;Object.defineProperty(Mu,"__esModule",{value:!0});Mu.delay=void 0;var YB=lt,ZB=gi,QB=ar;function XB(e,r){r===void 0&&(r=YB.asyncScheduler);var t=QB.timer(e,r);return ZB.delayWhen(function(){return t})}Mu.delay=XB;var Du={};Object.defineProperty(Du,"__esModule",{value:!0});Du.dematerialize=void 0;var JB=ef,ex=k,tx=U;function rx(){return ex.operate(function(e,r){e.subscribe(tx.createOperatorSubscriber(r,function(t){return JB.observeNotification(t,r)}))})}Du.dematerialize=rx;var Lu={};Object.defineProperty(Lu,"__esModule",{value:!0});Lu.distinct=void 0;var nx=k,Tm=U,ox=Ne,ix=W;function ax(e,r){return nx.operate(function(t,n){var o=new Set;t.subscribe(Tm.createOperatorSubscriber(n,function(i){var a=e?e(i):i;o.has(a)||(o.add(a),n.next(i))})),r&&ix.innerFrom(r).subscribe(Tm.createOperatorSubscriber(n,function(){return o.clear()},ox.noop))})}Lu.distinct=ax;var Ei={};Object.defineProperty(Ei,"__esModule",{value:!0});Ei.distinctUntilChanged=void 0;var ux=ke,sx=k,cx=U;function lx(e,r){return r===void 0&&(r=ux.identity),e=e??fx,sx.operate(function(t,n){var o,i=!0;t.subscribe(cx.createOperatorSubscriber(n,function(a){var s=r(a);(i||!e(o,s))&&(i=!1,o=s,n.next(a))}))})}Ei.distinctUntilChanged=lx;function fx(e,r){return e===r}var Uu={};Object.defineProperty(Uu,"__esModule",{value:!0});Uu.distinctUntilKeyChanged=void 0;var dx=Ei;function hx(e,r){return dx.distinctUntilChanged(function(t,n){return r?r(t[e],n[e]):t[e]===n[e]})}Uu.distinctUntilKeyChanged=hx;var Fu={},un={};Object.defineProperty(un,"__esModule",{value:!0});un.throwIfEmpty=void 0;var px=or,vx=k,_x=U;function yx(e){return e===void 0&&(e=bx),vx.operate(function(r,t){var n=!1;r.subscribe(_x.createOperatorSubscriber(t,function(o){n=!0,t.next(o)},function(){return n?t.complete():t.error(e())}))})}un.throwIfEmpty=yx;function bx(){return new px.EmptyError}Object.defineProperty(Fu,"__esModule",{value:!0});Fu.elementAt=void 0;var Cm=su,mx=Ht,gx=un,wx=on,Ox=an;function Ex(e,r){if(e<0)throw new Cm.ArgumentOutOfRangeError;var t=arguments.length>=2;return function(n){return n.pipe(mx.filter(function(o,i){return i===e}),Ox.take(1),t?wx.defaultIfEmpty(r):gx.throwIfEmpty(function(){return new Cm.ArgumentOutOfRangeError}))}}Fu.elementAt=Ex;var Bu={},Sx=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Px=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Bu,"__esModule",{value:!0});Bu.endWith=void 0;var Tx=no,Cx=li;function Ax(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(t){return Tx.concat(t,Cx.of.apply(void 0,Px([],Sx(e))))}}Bu.endWith=Ax;var xu={};Object.defineProperty(xu,"__esModule",{value:!0});xu.every=void 0;var Ix=k,Rx=U;function $x(e,r){return Ix.operate(function(t,n){var o=0;t.subscribe(Rx.createOperatorSubscriber(n,function(i){e.call(r,i,o++,t)||(n.next(!1),n.complete())},function(){n.next(!0),n.complete()}))})}xu.every=$x;var Vu={},Si={},Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});Pi.exhaustMap=void 0;var jx=zt,Am=W,Nx=k,Im=U;function h1(e,r){return r?function(t){return t.pipe(h1(function(n,o){return Am.innerFrom(e(n,o)).pipe(jx.map(function(i,a){return r(n,i,o,a)}))}))}:Nx.operate(function(t,n){var o=0,i=null,a=!1;t.subscribe(Im.createOperatorSubscriber(n,function(s){i||(i=Im.createOperatorSubscriber(n,void 0,function(){i=null,a&&n.complete()}),Am.innerFrom(e(s,o++)).subscribe(i))},function(){a=!0,!i&&n.complete()}))})}Pi.exhaustMap=h1;Object.defineProperty(Si,"__esModule",{value:!0});Si.exhaustAll=void 0;var kx=Pi,Mx=ke;function Dx(){return kx.exhaustMap(Mx.identity)}Si.exhaustAll=Dx;Object.defineProperty(Vu,"__esModule",{value:!0});Vu.exhaust=void 0;var Lx=Si;Vu.exhaust=Lx.exhaustAll;var Wu={};Object.defineProperty(Wu,"__esModule",{value:!0});Wu.expand=void 0;var Ux=k,Fx=pi;function Bx(e,r,t){return r===void 0&&(r=1/0),r=(r||0)<1?1/0:r,Ux.operate(function(n,o){return Fx.mergeInternals(n,o,e,r,void 0,!0,t)})}Wu.expand=Bx;var zu={};Object.defineProperty(zu,"__esModule",{value:!0});zu.finalize=void 0;var xx=k;function Vx(e){return xx.operate(function(r,t){try{r.subscribe(t)}finally{t.add(e)}})}zu.finalize=Vx;var Wr={};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.createFind=Wr.find=void 0;var Wx=k,zx=U;function Hx(e,r){return Wx.operate(p1(e,r,"value"))}Wr.find=Hx;function p1(e,r,t){var n=t==="index";return function(o,i){var a=0;o.subscribe(zx.createOperatorSubscriber(i,function(s){var c=a++;e.call(r,s,c,o)&&(i.next(n?c:s),i.complete())},function(){i.next(n?-1:void 0),i.complete()}))}}Wr.createFind=p1;var Hu={};Object.defineProperty(Hu,"__esModule",{value:!0});Hu.findIndex=void 0;var qx=k,Gx=Wr;function Kx(e,r){return qx.operate(Gx.createFind(e,r,"index"))}Hu.findIndex=Kx;var qu={};Object.defineProperty(qu,"__esModule",{value:!0});qu.first=void 0;var Yx=or,Zx=Ht,Qx=an,Xx=on,Jx=un,e6=ke;function t6(e,r){var t=arguments.length>=2;return function(n){return n.pipe(e?Zx.filter(function(o,i){return e(o,i,n)}):e6.identity,Qx.take(1),t?Xx.defaultIfEmpty(r):Jx.throwIfEmpty(function(){return new Yx.EmptyError}))}}qu.first=t6;var Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});Gu.groupBy=void 0;var r6=de,n6=W,o6=Ae,i6=k,Rm=U;function a6(e,r,t,n){return i6.operate(function(o,i){var a;!r||typeof r=="function"?a=r:(t=r.duration,a=r.element,n=r.connector);var s=new Map,c=function(v){s.forEach(v),v(i)},u=function(v){return c(function(y){return y.error(v)})},l=0,d=!1,h=new Rm.OperatorSubscriber(i,function(v){try{var y=e(v),_=s.get(y);if(!_){s.set(y,_=n?n():new o6.Subject);var b=p(y,_);if(i.next(b),t){var w=Rm.createOperatorSubscriber(_,function(){_.complete(),w==null||w.unsubscribe()},void 0,void 0,function(){return s.delete(y)});h.add(n6.innerFrom(t(b)).subscribe(w))}}_.next(a?a(v):v)}catch(S){u(S)}},function(){return c(function(v){return v.complete()})},u,function(){return s.clear()},function(){return d=!0,l===0});o.subscribe(h);function p(v,y){var _=new r6.Observable(function(b){l++;var w=y.subscribe(b);return function(){w.unsubscribe(),--l===0&&d&&h.unsubscribe()}});return _.key=v,_}})}Gu.groupBy=a6;var Ku={};Object.defineProperty(Ku,"__esModule",{value:!0});Ku.isEmpty=void 0;var u6=k,s6=U;function c6(){return u6.operate(function(e,r){e.subscribe(s6.createOperatorSubscriber(r,function(){r.next(!1),r.complete()},function(){r.next(!0),r.complete()}))})}Ku.isEmpty=c6;var Yu={},Ti={},l6=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ti,"__esModule",{value:!0});Ti.takeLast=void 0;var f6=Ft,d6=k,h6=U;function p6(e){return e<=0?function(){return f6.EMPTY}:d6.operate(function(r,t){var n=[];r.subscribe(h6.createOperatorSubscriber(t,function(o){n.push(o),e<n.length&&n.shift()},function(){var o,i;try{for(var a=l6(n),s=a.next();!s.done;s=a.next()){var c=s.value;t.next(c)}}catch(u){o={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}t.complete()},void 0,function(){n=null}))})}Ti.takeLast=p6;Object.defineProperty(Yu,"__esModule",{value:!0});Yu.last=void 0;var v6=or,_6=Ht,y6=Ti,b6=un,m6=on,g6=ke;function w6(e,r){var t=arguments.length>=2;return function(n){return n.pipe(e?_6.filter(function(o,i){return e(o,i,n)}):g6.identity,y6.takeLast(1),t?m6.defaultIfEmpty(r):b6.throwIfEmpty(function(){return new v6.EmptyError}))}}Yu.last=w6;var Zu={};Object.defineProperty(Zu,"__esModule",{value:!0});Zu.materialize=void 0;var pp=ef,O6=k,E6=U;function S6(){return O6.operate(function(e,r){e.subscribe(E6.createOperatorSubscriber(r,function(t){r.next(pp.Notification.createNext(t))},function(){r.next(pp.Notification.createComplete()),r.complete()},function(t){r.next(pp.Notification.createError(t)),r.complete()}))})}Zu.materialize=S6;var Qu={};Object.defineProperty(Qu,"__esModule",{value:!0});Qu.max=void 0;var P6=wr,T6=le;function C6(e){return P6.reduce(T6.isFunction(e)?function(r,t){return e(r,t)>0?r:t}:function(r,t){return r>t?r:t})}Qu.max=C6;var Xu={};Object.defineProperty(Xu,"__esModule",{value:!0});Xu.flatMap=void 0;var A6=Pt;Xu.flatMap=A6.mergeMap;var Ju={};Object.defineProperty(Ju,"__esModule",{value:!0});Ju.mergeMapTo=void 0;var $m=Pt,I6=le;function R6(e,r,t){return t===void 0&&(t=1/0),I6.isFunction(r)?$m.mergeMap(function(){return e},r,t):(typeof r=="number"&&(t=r),$m.mergeMap(function(){return e},t))}Ju.mergeMapTo=R6;var es={};Object.defineProperty(es,"__esModule",{value:!0});es.mergeScan=void 0;var $6=k,j6=pi;function N6(e,r,t){return t===void 0&&(t=1/0),$6.operate(function(n,o){var i=r;return j6.mergeInternals(n,o,function(a,s){return e(i,a,s)},t,function(a){i=a},!1,void 0,function(){return i=null})})}es.mergeScan=N6;var ts={},rs={},k6=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},M6=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(rs,"__esModule",{value:!0});rs.merge=void 0;var D6=k,L6=nn,jm=Re,U6=Vt;function F6(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=jm.popScheduler(e),n=jm.popNumber(e,1/0);return D6.operate(function(o,i){L6.mergeAll(n)(U6.from(M6([o],k6(e)),t)).subscribe(i)})}rs.merge=F6;var B6=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},x6=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(ts,"__esModule",{value:!0});ts.mergeWith=void 0;var V6=rs;function W6(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return V6.merge.apply(void 0,x6([],B6(e)))}ts.mergeWith=W6;var ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.min=void 0;var z6=wr,H6=le;function q6(e){return z6.reduce(H6.isFunction(e)?function(r,t){return e(r,t)<0?r:t}:function(r,t){return r<t?r:t})}ns.min=q6;var uo={};Object.defineProperty(uo,"__esModule",{value:!0});uo.multicast=void 0;var G6=to,Nm=le,K6=ao;function Y6(e,r){var t=Nm.isFunction(e)?e:function(){return e};return Nm.isFunction(r)?K6.connect(r,{connector:t}):function(n){return new G6.ConnectableObservable(n,t)}}uo.multicast=Y6;var Vn={},Z6=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Q6=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.onErrorResumeNext=Vn.onErrorResumeNextWith=void 0;var X6=gr,J6=vu;function v1(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=X6.argsOrArgArray(e);return function(n){return J6.onErrorResumeNext.apply(void 0,Q6([n],Z6(t)))}}Vn.onErrorResumeNextWith=v1;Vn.onErrorResumeNext=v1;var os={};Object.defineProperty(os,"__esModule",{value:!0});os.pairwise=void 0;var e3=k,t3=U;function r3(){return e3.operate(function(e,r){var t,n=!1;e.subscribe(t3.createOperatorSubscriber(r,function(o){var i=t;t=o,n&&r.next([i,o]),n=!0}))})}os.pairwise=r3;var is={};Object.defineProperty(is,"__esModule",{value:!0});is.pluck=void 0;var n3=zt;function o3(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=e.length;if(t===0)throw new Error("list of properties cannot be empty.");return n3.map(function(n){for(var o=n,i=0;i<t;i++){var a=o==null?void 0:o[e[i]];if(typeof a<"u")o=a;else return}return o})}is.pluck=o3;var as={};Object.defineProperty(as,"__esModule",{value:!0});as.publish=void 0;var i3=Ae,a3=uo,u3=ao;function s3(e){return e?function(r){return u3.connect(e)(r)}:function(r){return a3.multicast(new i3.Subject)(r)}}as.publish=s3;var us={};Object.defineProperty(us,"__esModule",{value:!0});us.publishBehavior=void 0;var c3=Qa,l3=to;function f3(e){return function(r){var t=new c3.BehaviorSubject(e);return new l3.ConnectableObservable(r,function(){return t})}}us.publishBehavior=f3;var ss={};Object.defineProperty(ss,"__esModule",{value:!0});ss.publishLast=void 0;var d3=ci,h3=to;function p3(){return function(e){var r=new d3.AsyncSubject;return new h3.ConnectableObservable(e,function(){return r})}}ss.publishLast=p3;var cs={};Object.defineProperty(cs,"__esModule",{value:!0});cs.publishReplay=void 0;var v3=si,_3=uo,km=le;function y3(e,r,t,n){t&&!km.isFunction(t)&&(n=t);var o=km.isFunction(t)?t:void 0;return function(i){return _3.multicast(new v3.ReplaySubject(e,r,n),o)(i)}}cs.publishReplay=y3;var Ci={},b3=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},m3=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.raceWith=void 0;var g3=xn,w3=k,O3=ke;function E3(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length?w3.operate(function(t,n){g3.raceInit(m3([t],b3(e)))(n)}):O3.identity}Ci.raceWith=E3;var ls={};Object.defineProperty(ls,"__esModule",{value:!0});ls.repeat=void 0;var S3=Ft,P3=k,Mm=U,T3=W,C3=ar;function A3(e){var r,t=1/0,n;return e!=null&&(typeof e=="object"?(r=e.count,t=r===void 0?1/0:r,n=e.delay):t=e),t<=0?function(){return S3.EMPTY}:P3.operate(function(o,i){var a=0,s,c=function(){if(s==null||s.unsubscribe(),s=null,n!=null){var l=typeof n=="number"?C3.timer(n):T3.innerFrom(n(a)),d=Mm.createOperatorSubscriber(i,function(){d.unsubscribe(),u()});l.subscribe(d)}else u()},u=function(){var l=!1;s=o.subscribe(Mm.createOperatorSubscriber(i,void 0,function(){++a<t?s?c():l=!0:i.complete()})),l&&c()};u()})}ls.repeat=A3;var fs={};Object.defineProperty(fs,"__esModule",{value:!0});fs.repeatWhen=void 0;var I3=W,R3=Ae,$3=k,Dm=U;function j3(e){return $3.operate(function(r,t){var n,o=!1,i,a=!1,s=!1,c=function(){return s&&a&&(t.complete(),!0)},u=function(){return i||(i=new R3.Subject,I3.innerFrom(e(i)).subscribe(Dm.createOperatorSubscriber(t,function(){n?l():o=!0},function(){a=!0,c()}))),i},l=function(){s=!1,n=r.subscribe(Dm.createOperatorSubscriber(t,void 0,function(){s=!0,!c()&&u().next()})),o&&(n.unsubscribe(),n=null,o=!1,l())};l()})}fs.repeatWhen=j3;var ds={};Object.defineProperty(ds,"__esModule",{value:!0});ds.retry=void 0;var N3=k,Lm=U,k3=ke,M3=ar,D3=W;function L3(e){e===void 0&&(e=1/0);var r;e&&typeof e=="object"?r=e:r={count:e};var t=r.count,n=t===void 0?1/0:t,o=r.delay,i=r.resetOnSuccess,a=i===void 0?!1:i;return n<=0?k3.identity:N3.operate(function(s,c){var u=0,l,d=function(){var h=!1;l=s.subscribe(Lm.createOperatorSubscriber(c,function(p){a&&(u=0),c.next(p)},void 0,function(p){if(u++<n){var v=function(){l?(l.unsubscribe(),l=null,d()):h=!0};if(o!=null){var y=typeof o=="number"?M3.timer(o):D3.innerFrom(o(p,u)),_=Lm.createOperatorSubscriber(c,function(){_.unsubscribe(),v()},function(){c.complete()});y.subscribe(_)}else v()}else c.error(p)})),h&&(l.unsubscribe(),l=null,d())};d()})}ds.retry=L3;var hs={};Object.defineProperty(hs,"__esModule",{value:!0});hs.retryWhen=void 0;var U3=W,F3=Ae,B3=k,Um=U;function x3(e){return B3.operate(function(r,t){var n,o=!1,i,a=function(){n=r.subscribe(Um.createOperatorSubscriber(t,void 0,void 0,function(s){i||(i=new F3.Subject,U3.innerFrom(e(i)).subscribe(Um.createOperatorSubscriber(t,function(){return n?a():o=!0}))),i&&i.next(s)})),o&&(n.unsubscribe(),n=null,o=!1,a())};a()})}hs.retryWhen=x3;var Ai={};Object.defineProperty(Ai,"__esModule",{value:!0});Ai.sample=void 0;var V3=W,W3=k,z3=Ne,Fm=U;function H3(e){return W3.operate(function(r,t){var n=!1,o=null;r.subscribe(Fm.createOperatorSubscriber(t,function(i){n=!0,o=i})),V3.innerFrom(e).subscribe(Fm.createOperatorSubscriber(t,function(){if(n){n=!1;var i=o;o=null,t.next(i)}},z3.noop))})}Ai.sample=H3;var ps={};Object.defineProperty(ps,"__esModule",{value:!0});ps.sampleTime=void 0;var q3=lt,G3=Ai,K3=pu;function Y3(e,r){return r===void 0&&(r=q3.asyncScheduler),G3.sample(K3.interval(e,r))}ps.sampleTime=Y3;var vs={};Object.defineProperty(vs,"__esModule",{value:!0});vs.scan=void 0;var Z3=k,Q3=Tu;function X3(e,r){return Z3.operate(Q3.scanInternals(e,r,arguments.length>=2,!0))}vs.scan=X3;var _s={};Object.defineProperty(_s,"__esModule",{value:!0});_s.sequenceEqual=void 0;var J3=k,e8=U,t8=W;function r8(e,r){return r===void 0&&(r=function(t,n){return t===n}),J3.operate(function(t,n){var o=Bm(),i=Bm(),a=function(c){n.next(c),n.complete()},s=function(c,u){var l=e8.createOperatorSubscriber(n,function(d){var h=u.buffer,p=u.complete;h.length===0?p?a(!1):c.buffer.push(d):!r(d,h.shift())&&a(!1)},function(){c.complete=!0;var d=u.complete,h=u.buffer;d&&a(h.length===0),l==null||l.unsubscribe()});return l};t.subscribe(s(o,i)),t8.innerFrom(e).subscribe(s(i,o))})}_s.sequenceEqual=r8;function Bm(){return{buffer:[],complete:!1}}var Ii={},n8=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},o8=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.share=void 0;var _1=W,i8=Ae,y1=ai,a8=k;function u8(e){e===void 0&&(e={});var r=e.connector,t=r===void 0?function(){return new i8.Subject}:r,n=e.resetOnError,o=n===void 0?!0:n,i=e.resetOnComplete,a=i===void 0?!0:i,s=e.resetOnRefCountZero,c=s===void 0?!0:s;return function(u){var l,d,h,p=0,v=!1,y=!1,_=function(){d==null||d.unsubscribe(),d=void 0},b=function(){_(),l=h=void 0,v=y=!1},w=function(){var S=l;b(),S==null||S.unsubscribe()};return a8.operate(function(S,E){p++,!y&&!v&&_();var P=h=h??t();E.add(function(){p--,p===0&&!y&&!v&&(d=vp(w,c))}),P.subscribe(E),!l&&p>0&&(l=new y1.SafeSubscriber({next:function(C){return P.next(C)},error:function(C){y=!0,_(),d=vp(b,o,C),P.error(C)},complete:function(){v=!0,_(),d=vp(b,a),P.complete()}}),_1.innerFrom(S).subscribe(l))})(u)}}Ii.share=u8;function vp(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];if(r===!0){e();return}if(r!==!1){var o=new y1.SafeSubscriber({next:function(){o.unsubscribe(),e()}});return _1.innerFrom(r.apply(void 0,o8([],n8(t)))).subscribe(o)}}var ys={};Object.defineProperty(ys,"__esModule",{value:!0});ys.shareReplay=void 0;var s8=si,c8=Ii;function l8(e,r,t){var n,o,i,a,s=!1;return e&&typeof e=="object"?(n=e.bufferSize,a=n===void 0?1/0:n,o=e.windowTime,r=o===void 0?1/0:o,i=e.refCount,s=i===void 0?!1:i,t=e.scheduler):a=e??1/0,c8.share({connector:function(){return new s8.ReplaySubject(a,r,t)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}ys.shareReplay=l8;var bs={};Object.defineProperty(bs,"__esModule",{value:!0});bs.single=void 0;var f8=or,d8=lu,h8=cu,p8=k,v8=U;function _8(e){return p8.operate(function(r,t){var n=!1,o,i=!1,a=0;r.subscribe(v8.createOperatorSubscriber(t,function(s){i=!0,(!e||e(s,a++,r))&&(n&&t.error(new d8.SequenceError("Too many matching values")),n=!0,o=s)},function(){n?(t.next(o),t.complete()):t.error(i?new h8.NotFoundError("No matching values"):new f8.EmptyError)}))})}bs.single=_8;var ms={};Object.defineProperty(ms,"__esModule",{value:!0});ms.skip=void 0;var y8=Ht;function b8(e){return y8.filter(function(r,t){return e<=t})}ms.skip=b8;var gs={};Object.defineProperty(gs,"__esModule",{value:!0});gs.skipLast=void 0;var m8=ke,g8=k,w8=U;function O8(e){return e<=0?m8.identity:g8.operate(function(r,t){var n=new Array(e),o=0;return r.subscribe(w8.createOperatorSubscriber(t,function(i){var a=o++;if(a<e)n[a]=i;else{var s=a%e,c=n[s];n[s]=i,t.next(c)}})),function(){n=null}})}gs.skipLast=O8;var ws={};Object.defineProperty(ws,"__esModule",{value:!0});ws.skipUntil=void 0;var E8=k,xm=U,S8=W,P8=Ne;function T8(e){return E8.operate(function(r,t){var n=!1,o=xm.createOperatorSubscriber(t,function(){o==null||o.unsubscribe(),n=!0},P8.noop);S8.innerFrom(e).subscribe(o),r.subscribe(xm.createOperatorSubscriber(t,function(i){return n&&t.next(i)}))})}ws.skipUntil=T8;var Os={};Object.defineProperty(Os,"__esModule",{value:!0});Os.skipWhile=void 0;var C8=k,A8=U;function I8(e){return C8.operate(function(r,t){var n=!1,o=0;r.subscribe(A8.createOperatorSubscriber(t,function(i){return(n||(n=!e(i,o++)))&&t.next(i)}))})}Os.skipWhile=I8;var Es={};Object.defineProperty(Es,"__esModule",{value:!0});Es.startWith=void 0;var Vm=no,R8=Re,$8=k;function j8(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=R8.popScheduler(e);return $8.operate(function(n,o){(t?Vm.concat(e,n,t):Vm.concat(e,n)).subscribe(o)})}Es.startWith=j8;var Ss={},sn={};Object.defineProperty(sn,"__esModule",{value:!0});sn.switchMap=void 0;var N8=W,k8=k,Wm=U;function M8(e,r){return k8.operate(function(t,n){var o=null,i=0,a=!1,s=function(){return a&&!o&&n.complete()};t.subscribe(Wm.createOperatorSubscriber(n,function(c){o==null||o.unsubscribe();var u=0,l=i++;N8.innerFrom(e(c,l)).subscribe(o=Wm.createOperatorSubscriber(n,function(d){return n.next(r?r(c,d,l,u++):d)},function(){o=null,s()}))},function(){a=!0,s()}))})}sn.switchMap=M8;Object.defineProperty(Ss,"__esModule",{value:!0});Ss.switchAll=void 0;var D8=sn,L8=ke;function U8(){return D8.switchMap(L8.identity)}Ss.switchAll=U8;var Ps={};Object.defineProperty(Ps,"__esModule",{value:!0});Ps.switchMapTo=void 0;var zm=sn,F8=le;function B8(e,r){return F8.isFunction(r)?zm.switchMap(function(){return e},r):zm.switchMap(function(){return e})}Ps.switchMapTo=B8;var Ts={};Object.defineProperty(Ts,"__esModule",{value:!0});Ts.switchScan=void 0;var x8=sn,V8=k;function W8(e,r){return V8.operate(function(t,n){var o=r;return x8.switchMap(function(i,a){return e(o,i,a)},function(i,a){return o=a,a})(t).subscribe(n),function(){o=null}})}Ts.switchScan=W8;var Cs={};Object.defineProperty(Cs,"__esModule",{value:!0});Cs.takeUntil=void 0;var z8=k,H8=U,q8=W,G8=Ne;function K8(e){return z8.operate(function(r,t){q8.innerFrom(e).subscribe(H8.createOperatorSubscriber(t,function(){return t.complete()},G8.noop)),!t.closed&&r.subscribe(t)})}Cs.takeUntil=K8;var As={};Object.defineProperty(As,"__esModule",{value:!0});As.takeWhile=void 0;var Y8=k,Z8=U;function Q8(e,r){return r===void 0&&(r=!1),Y8.operate(function(t,n){var o=0;t.subscribe(Z8.createOperatorSubscriber(n,function(i){var a=e(i,o++);(a||r)&&n.next(i),!a&&n.complete()}))})}As.takeWhile=Q8;var Is={};Object.defineProperty(Is,"__esModule",{value:!0});Is.tap=void 0;var X8=le,J8=k,e5=U,t5=ke;function r5(e,r,t){var n=X8.isFunction(e)||r||t?{next:e,error:r,complete:t}:e;return n?J8.operate(function(o,i){var a;(a=n.subscribe)===null||a===void 0||a.call(n);var s=!0;o.subscribe(e5.createOperatorSubscriber(i,function(c){var u;(u=n.next)===null||u===void 0||u.call(n,c),i.next(c)},function(){var c;s=!1,(c=n.complete)===null||c===void 0||c.call(n),i.complete()},function(c){var u;s=!1,(u=n.error)===null||u===void 0||u.call(n,c),i.error(c)},function(){var c,u;s&&((c=n.unsubscribe)===null||c===void 0||c.call(n)),(u=n.finalize)===null||u===void 0||u.call(n)}))}):t5.identity}Is.tap=r5;var Ri={};Object.defineProperty(Ri,"__esModule",{value:!0});Ri.throttle=void 0;var n5=k,Hm=U,o5=W;function i5(e,r){return n5.operate(function(t,n){var o=r??{},i=o.leading,a=i===void 0?!0:i,s=o.trailing,c=s===void 0?!1:s,u=!1,l=null,d=null,h=!1,p=function(){d==null||d.unsubscribe(),d=null,c&&(_(),h&&n.complete())},v=function(){d=null,h&&n.complete()},y=function(b){return d=o5.innerFrom(e(b)).subscribe(Hm.createOperatorSubscriber(n,p,v))},_=function(){if(u){u=!1;var b=l;l=null,n.next(b),!h&&y(b)}};t.subscribe(Hm.createOperatorSubscriber(n,function(b){u=!0,l=b,!(d&&!d.closed)&&(a?_():y(b))},function(){h=!0,!(c&&u&&d&&!d.closed)&&n.complete()}))})}Ri.throttle=i5;var Rs={};Object.defineProperty(Rs,"__esModule",{value:!0});Rs.throttleTime=void 0;var a5=lt,u5=Ri,s5=ar;function c5(e,r,t){r===void 0&&(r=a5.asyncScheduler);var n=s5.timer(e,r);return u5.throttle(function(){return n},t)}Rs.throttleTime=c5;var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.TimeInterval=Wn.timeInterval=void 0;var l5=lt,f5=k,d5=U;function h5(e){return e===void 0&&(e=l5.asyncScheduler),f5.operate(function(r,t){var n=e.now();r.subscribe(d5.createOperatorSubscriber(t,function(o){var i=e.now(),a=i-n;n=i,t.next(new b1(o,a))}))})}Wn.timeInterval=h5;var b1=function(){function e(r,t){this.value=r,this.interval=t}return e}();Wn.TimeInterval=b1;var $s={};Object.defineProperty($s,"__esModule",{value:!0});$s.timeoutWith=void 0;var p5=lt,v5=hi,_5=Ia;function y5(e,r,t){var n,o,i;if(t=t??p5.async,v5.isValidDate(e)?n=e:typeof e=="number"&&(o=e),r)i=function(){return r};else throw new TypeError("No observable provided to switch to");if(n==null&&o==null)throw new TypeError("No timeout provided.");return _5.timeout({first:n,each:o,scheduler:t,with:i})}$s.timeoutWith=y5;var js={};Object.defineProperty(js,"__esModule",{value:!0});js.timestamp=void 0;var b5=ql,m5=zt;function g5(e){return e===void 0&&(e=b5.dateTimestampProvider),m5.map(function(r){return{value:r,timestamp:e.now()}})}js.timestamp=g5;var Ns={};Object.defineProperty(Ns,"__esModule",{value:!0});Ns.window=void 0;var qm=Ae,w5=k,Gm=U,O5=Ne,E5=W;function S5(e){return w5.operate(function(r,t){var n=new qm.Subject;t.next(n.asObservable());var o=function(i){n.error(i),t.error(i)};return r.subscribe(Gm.createOperatorSubscriber(t,function(i){return n==null?void 0:n.next(i)},function(){n.complete(),t.complete()},o)),E5.innerFrom(e).subscribe(Gm.createOperatorSubscriber(t,function(){n.complete(),t.next(n=new qm.Subject)},O5.noop,o)),function(){n==null||n.unsubscribe(),n=null}})}Ns.window=S5;var ks={},P5=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ks,"__esModule",{value:!0});ks.windowCount=void 0;var Km=Ae,T5=k,C5=U;function A5(e,r){r===void 0&&(r=0);var t=r>0?r:e;return T5.operate(function(n,o){var i=[new Km.Subject],a=0;o.next(i[0].asObservable()),n.subscribe(C5.createOperatorSubscriber(o,function(s){var c,u;try{for(var l=P5(i),d=l.next();!d.done;d=l.next()){var h=d.value;h.next(s)}}catch(y){c={error:y}}finally{try{d&&!d.done&&(u=l.return)&&u.call(l)}finally{if(c)throw c.error}}var p=a-e+1;if(p>=0&&p%t===0&&i.shift().complete(),++a%t===0){var v=new Km.Subject;i.push(v),o.next(v.asObservable())}},function(){for(;i.length>0;)i.shift().complete();o.complete()},function(s){for(;i.length>0;)i.shift().error(s);o.error(s)},function(){i=null}))})}ks.windowCount=A5;var Ms={};Object.defineProperty(Ms,"__esModule",{value:!0});Ms.windowTime=void 0;var I5=Ae,R5=lt,$5=je,j5=k,N5=U,k5=xt,M5=Re,Ym=Wt;function D5(e){for(var r,t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=(r=M5.popScheduler(n))!==null&&r!==void 0?r:R5.asyncScheduler,a=(t=n[0])!==null&&t!==void 0?t:null,s=n[1]||1/0;return j5.operate(function(c,u){var l=[],d=!1,h=function(_){var b=_.window,w=_.subs;b.complete(),w.unsubscribe(),k5.arrRemove(l,_),d&&p()},p=function(){if(l){var _=new $5.Subscription;u.add(_);var b=new I5.Subject,w={window:b,subs:_,seen:0};l.push(w),u.next(b.asObservable()),Ym.executeSchedule(_,i,function(){return h(w)},e)}};a!==null&&a>=0?Ym.executeSchedule(u,i,p,a,!0):d=!0,p();var v=function(_){return l.slice().forEach(_)},y=function(_){v(function(b){var w=b.window;return _(w)}),_(u),u.unsubscribe()};return c.subscribe(N5.createOperatorSubscriber(u,function(_){v(function(b){b.window.next(_),s<=++b.seen&&h(b)})},function(){return y(function(_){return _.complete()})},function(_){return y(function(b){return b.error(_)})})),function(){l=null}})}Ms.windowTime=D5;var Ds={},L5=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ds,"__esModule",{value:!0});Ds.windowToggle=void 0;var U5=Ae,F5=je,B5=k,Zm=W,_p=U,Qm=Ne,x5=xt;function V5(e,r){return B5.operate(function(t,n){var o=[],i=function(a){for(;0<o.length;)o.shift().error(a);n.error(a)};Zm.innerFrom(e).subscribe(_p.createOperatorSubscriber(n,function(a){var s=new U5.Subject;o.push(s);var c=new F5.Subscription,u=function(){x5.arrRemove(o,s),s.complete(),c.unsubscribe()},l;try{l=Zm.innerFrom(r(a))}catch(d){i(d);return}n.next(s.asObservable()),c.add(l.subscribe(_p.createOperatorSubscriber(n,u,Qm.noop,i)))},Qm.noop)),t.subscribe(_p.createOperatorSubscriber(n,function(a){var s,c,u=o.slice();try{for(var l=L5(u),d=l.next();!d.done;d=l.next()){var h=d.value;h.next(a)}}catch(p){s={error:p}}finally{try{d&&!d.done&&(c=l.return)&&c.call(l)}finally{if(s)throw s.error}}},function(){for(;0<o.length;)o.shift().complete();n.complete()},i,function(){for(;0<o.length;)o.shift().unsubscribe()}))})}Ds.windowToggle=V5;var Ls={};Object.defineProperty(Ls,"__esModule",{value:!0});Ls.windowWhen=void 0;var W5=Ae,z5=k,Xm=U,H5=W;function q5(e){return z5.operate(function(r,t){var n,o,i=function(s){n.error(s),t.error(s)},a=function(){o==null||o.unsubscribe(),n==null||n.complete(),n=new W5.Subject,t.next(n.asObservable());var s;try{s=H5.innerFrom(e())}catch(c){i(c);return}s.subscribe(o=Xm.createOperatorSubscriber(t,a,a,i))};a(),r.subscribe(Xm.createOperatorSubscriber(t,function(s){return n.next(s)},function(){n.complete(),t.complete()},i,function(){o==null||o.unsubscribe(),n=null}))})}Ls.windowWhen=q5;var Us={},Jm=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},eg=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Us,"__esModule",{value:!0});Us.withLatestFrom=void 0;var G5=k,tg=U,K5=W,Y5=ke,Z5=Ne,Q5=Re;function X5(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Q5.popResultSelector(e);return G5.operate(function(n,o){for(var i=e.length,a=new Array(i),s=e.map(function(){return!1}),c=!1,u=function(d){K5.innerFrom(e[d]).subscribe(tg.createOperatorSubscriber(o,function(h){a[d]=h,!c&&!s[d]&&(s[d]=!0,(c=s.every(Y5.identity))&&(s=null))},Z5.noop))},l=0;l<i;l++)u(l);n.subscribe(tg.createOperatorSubscriber(o,function(d){if(c){var h=eg([d],Jm(a));o.next(t?t.apply(void 0,eg([],Jm(h))):h)}}))})}Us.withLatestFrom=X5;var Fs={};Object.defineProperty(Fs,"__esModule",{value:!0});Fs.zipAll=void 0;var J5=vi,eV=Pu;function tV(e){return eV.joinAllInternals(J5.zip,e)}Fs.zipAll=tV;var Bs={},xs={},rV=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},nV=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(xs,"__esModule",{value:!0});xs.zip=void 0;var oV=vi,iV=k;function aV(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return iV.operate(function(t,n){oV.zip.apply(void 0,nV([t],rV(e))).subscribe(n)})}xs.zip=aV;var uV=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},sV=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Bs,"__esModule",{value:!0});Bs.zipWith=void 0;var cV=xs;function lV(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return cV.zip.apply(void 0,sV([],uV(e)))}Bs.zipWith=lV;(function(e){var r=f&&f.__createBinding||(Object.create?function(fo,ho,ur,dn){dn===void 0&&(dn=ur),Object.defineProperty(fo,dn,{enumerable:!0,get:function(){return ho[ur]}})}:function(fo,ho,ur,dn){dn===void 0&&(dn=ur),fo[dn]=ho[ur]}),t=f&&f.__exportStar||function(fo,ho){for(var ur in fo)ur!=="default"&&!Object.prototype.hasOwnProperty.call(ho,ur)&&r(ho,fo,ur)};Object.defineProperty(e,"__esModule",{value:!0}),e.interval=e.iif=e.generate=e.fromEventPattern=e.fromEvent=e.from=e.forkJoin=e.empty=e.defer=e.connectable=e.concat=e.combineLatest=e.bindNodeCallback=e.bindCallback=e.UnsubscriptionError=e.TimeoutError=e.SequenceError=e.ObjectUnsubscribedError=e.NotFoundError=e.EmptyError=e.ArgumentOutOfRangeError=e.firstValueFrom=e.lastValueFrom=e.isObservable=e.identity=e.noop=e.pipe=e.NotificationKind=e.Notification=e.Subscriber=e.Subscription=e.Scheduler=e.VirtualAction=e.VirtualTimeScheduler=e.animationFrameScheduler=e.animationFrame=e.queueScheduler=e.queue=e.asyncScheduler=e.async=e.asapScheduler=e.asap=e.AsyncSubject=e.ReplaySubject=e.BehaviorSubject=e.Subject=e.animationFrames=e.observable=e.ConnectableObservable=e.Observable=void 0,e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.combineLatestWith=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=e.config=e.NEVER=e.EMPTY=e.scheduled=e.zip=e.using=e.timer=e.throwError=e.range=e.race=e.partition=e.pairs=e.onErrorResumeNext=e.of=e.never=e.merge=void 0,e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.pairwise=e.onErrorResumeNextWith=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=e.mergeAll=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=void 0,e.zipWith=e.zipAll=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=void 0;var n=de;Object.defineProperty(e,"Observable",{enumerable:!0,get:function(){return n.Observable}});var o=to;Object.defineProperty(e,"ConnectableObservable",{enumerable:!0,get:function(){return o.ConnectableObservable}});var i=eo;Object.defineProperty(e,"observable",{enumerable:!0,get:function(){return i.observable}});var a=Hl;Object.defineProperty(e,"animationFrames",{enumerable:!0,get:function(){return a.animationFrames}});var s=Ae;Object.defineProperty(e,"Subject",{enumerable:!0,get:function(){return s.Subject}});var c=Qa;Object.defineProperty(e,"BehaviorSubject",{enumerable:!0,get:function(){return c.BehaviorSubject}});var u=si;Object.defineProperty(e,"ReplaySubject",{enumerable:!0,get:function(){return u.ReplaySubject}});var l=ci;Object.defineProperty(e,"AsyncSubject",{enumerable:!0,get:function(){return l.AsyncSubject}});var d=VO;Object.defineProperty(e,"asap",{enumerable:!0,get:function(){return d.asap}}),Object.defineProperty(e,"asapScheduler",{enumerable:!0,get:function(){return d.asapScheduler}});var h=lt;Object.defineProperty(e,"async",{enumerable:!0,get:function(){return h.async}}),Object.defineProperty(e,"asyncScheduler",{enumerable:!0,get:function(){return h.asyncScheduler}});var p=HO;Object.defineProperty(e,"queue",{enumerable:!0,get:function(){return p.queue}}),Object.defineProperty(e,"queueScheduler",{enumerable:!0,get:function(){return p.queueScheduler}});var v=qO;Object.defineProperty(e,"animationFrame",{enumerable:!0,get:function(){return v.animationFrame}}),Object.defineProperty(e,"animationFrameScheduler",{enumerable:!0,get:function(){return v.animationFrameScheduler}});var y=Fo;Object.defineProperty(e,"VirtualTimeScheduler",{enumerable:!0,get:function(){return y.VirtualTimeScheduler}}),Object.defineProperty(e,"VirtualAction",{enumerable:!0,get:function(){return y.VirtualAction}});var _=Xa;Object.defineProperty(e,"Scheduler",{enumerable:!0,get:function(){return _.Scheduler}});var b=je;Object.defineProperty(e,"Subscription",{enumerable:!0,get:function(){return b.Subscription}});var w=ai;Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return w.Subscriber}});var S=ef;Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return S.Notification}}),Object.defineProperty(e,"NotificationKind",{enumerable:!0,get:function(){return S.NotificationKind}});var E=br;Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return E.pipe}});var P=Ne;Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return P.noop}});var C=ke;Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return C.identity}});var T=af;Object.defineProperty(e,"isObservable",{enumerable:!0,get:function(){return T.isObservable}});var I=uf;Object.defineProperty(e,"lastValueFrom",{enumerable:!0,get:function(){return I.lastValueFrom}});var $=sf;Object.defineProperty(e,"firstValueFrom",{enumerable:!0,get:function(){return $.firstValueFrom}});var D=su;Object.defineProperty(e,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return D.ArgumentOutOfRangeError}});var q=or;Object.defineProperty(e,"EmptyError",{enumerable:!0,get:function(){return q.EmptyError}});var V=cu;Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return V.NotFoundError}});var H=Za;Object.defineProperty(e,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return H.ObjectUnsubscribedError}});var oe=lu;Object.defineProperty(e,"SequenceError",{enumerable:!0,get:function(){return oe.SequenceError}});var F=Ia;Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return F.TimeoutError}});var J=Ka;Object.defineProperty(e,"UnsubscriptionError",{enumerable:!0,get:function(){return J.UnsubscriptionError}});var B=cf;Object.defineProperty(e,"bindCallback",{enumerable:!0,get:function(){return B.bindCallback}});var te=lf;Object.defineProperty(e,"bindNodeCallback",{enumerable:!0,get:function(){return te.bindNodeCallback}});var G=Vr;Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return G.combineLatest}});var L=no;Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return L.concat}});var ee=ff;Object.defineProperty(e,"connectable",{enumerable:!0,get:function(){return ee.connectable}});var he=io;Object.defineProperty(e,"defer",{enumerable:!0,get:function(){return he.defer}});var be=Ft;Object.defineProperty(e,"empty",{enumerable:!0,get:function(){return be.empty}});var Q=df;Object.defineProperty(e,"forkJoin",{enumerable:!0,get:function(){return Q.forkJoin}});var we=Vt;Object.defineProperty(e,"from",{enumerable:!0,get:function(){return we.from}});var ve=hf;Object.defineProperty(e,"fromEvent",{enumerable:!0,get:function(){return ve.fromEvent}});var nt=pf;Object.defineProperty(e,"fromEventPattern",{enumerable:!0,get:function(){return nt.fromEventPattern}});var m=vf;Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return m.generate}});var A=_f;Object.defineProperty(e,"iif",{enumerable:!0,get:function(){return A.iif}});var M=pu;Object.defineProperty(e,"interval",{enumerable:!0,get:function(){return M.interval}});var x=yf;Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return x.merge}});var re=Ev;Object.defineProperty(e,"never",{enumerable:!0,get:function(){return re.never}});var Le=li;Object.defineProperty(e,"of",{enumerable:!0,get:function(){return Le.of}});var Tt=vu;Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return Tt.onErrorResumeNext}});var fn=bf;Object.defineProperty(e,"pairs",{enumerable:!0,get:function(){return fn.pairs}});var Fi=mf;Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return Fi.partition}});var Vd=xn;Object.defineProperty(e,"race",{enumerable:!0,get:function(){return Vd.race}});var Wd=gf;Object.defineProperty(e,"range",{enumerable:!0,get:function(){return Wd.range}});var zd=uu;Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return zd.throwError}});var Hd=ar;Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return Hd.timer}});var qd=wf;Object.defineProperty(e,"using",{enumerable:!0,get:function(){return qd.using}});var Gd=vi;Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return Gd.zip}});var Kd=Ja;Object.defineProperty(e,"scheduled",{enumerable:!0,get:function(){return Kd.scheduled}});var Yd=Ft;Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return Yd.EMPTY}});var Zd=Ev;Object.defineProperty(e,"NEVER",{enumerable:!0,get:function(){return Zd.NEVER}}),t(c1,e);var Qd=Xr;Object.defineProperty(e,"config",{enumerable:!0,get:function(){return Qd.config}});var Xd=_i;Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return Xd.audit}});var Jd=yu;Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return Jd.auditTime}});var eh=bu;Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return eh.buffer}});var th=mu;Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return th.bufferCount}});var rh=gu;Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return rh.bufferTime}});var nh=wu;Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return nh.bufferToggle}});var oh=Ou;Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return oh.bufferWhen}});var ih=Eu;Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return ih.catchError}});var ah=Su;Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return ah.combineAll}});var uh=yi;Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return uh.combineLatestAll}});var sh=Cu;Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return sh.combineLatestWith}});var ch=oo;Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return ch.concatAll}});var lh=mi;Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return lh.concatMap}});var fh=Iu;Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return fh.concatMapTo}});var dh=Ru;Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return dh.concatWith}});var hh=ao;Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return hh.connect}});var ph=ju;Object.defineProperty(e,"count",{enumerable:!0,get:function(){return ph.count}});var vh=Nu;Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return vh.debounce}});var _h=ku;Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return _h.debounceTime}});var yh=on;Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return yh.defaultIfEmpty}});var bh=Mu;Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return bh.delay}});var mh=gi;Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return mh.delayWhen}});var gh=Du;Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return gh.dematerialize}});var wh=Lu;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return wh.distinct}});var Oh=Ei;Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return Oh.distinctUntilChanged}});var Eh=Uu;Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return Eh.distinctUntilKeyChanged}});var Sh=Fu;Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return Sh.elementAt}});var Ph=Bu;Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return Ph.endWith}});var Th=xu;Object.defineProperty(e,"every",{enumerable:!0,get:function(){return Th.every}});var Ch=Vu;Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return Ch.exhaust}});var Ah=Si;Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return Ah.exhaustAll}});var Ih=Pi;Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return Ih.exhaustMap}});var Rh=Wu;Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return Rh.expand}});var $h=Ht;Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return $h.filter}});var jh=zu;Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return jh.finalize}});var Nh=Wr;Object.defineProperty(e,"find",{enumerable:!0,get:function(){return Nh.find}});var kh=Hu;Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return kh.findIndex}});var Mh=qu;Object.defineProperty(e,"first",{enumerable:!0,get:function(){return Mh.first}});var Dh=Gu;Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return Dh.groupBy}});var Lh=wi;Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return Lh.ignoreElements}});var Uh=Ku;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return Uh.isEmpty}});var Fh=Yu;Object.defineProperty(e,"last",{enumerable:!0,get:function(){return Fh.last}});var Bh=zt;Object.defineProperty(e,"map",{enumerable:!0,get:function(){return Bh.map}});var xh=Oi;Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return xh.mapTo}});var Vh=Zu;Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return Vh.materialize}});var Wh=Qu;Object.defineProperty(e,"max",{enumerable:!0,get:function(){return Wh.max}});var zh=nn;Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return zh.mergeAll}});var Hh=Xu;Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return Hh.flatMap}});var qh=Pt;Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return qh.mergeMap}});var Gh=Ju;Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return Gh.mergeMapTo}});var Kh=es;Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return Kh.mergeScan}});var xP=ts;Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return xP.mergeWith}});var VP=ns;Object.defineProperty(e,"min",{enumerable:!0,get:function(){return VP.min}});var WP=uo;Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return WP.multicast}});var zP=tn;Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return zP.observeOn}});var HP=Vn;Object.defineProperty(e,"onErrorResumeNextWith",{enumerable:!0,get:function(){return HP.onErrorResumeNextWith}});var qP=os;Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return qP.pairwise}});var GP=is;Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return GP.pluck}});var KP=as;Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return KP.publish}});var YP=us;Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return YP.publishBehavior}});var ZP=ss;Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return ZP.publishLast}});var QP=cs;Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return QP.publishReplay}});var XP=Ci;Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return XP.raceWith}});var JP=wr;Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return JP.reduce}});var eT=ls;Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return eT.repeat}});var tT=fs;Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return tT.repeatWhen}});var rT=ds;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return rT.retry}});var nT=hs;Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return nT.retryWhen}});var oT=ui;Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return oT.refCount}});var iT=Ai;Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return iT.sample}});var aT=ps;Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return aT.sampleTime}});var uT=vs;Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return uT.scan}});var sT=_s;Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return sT.sequenceEqual}});var cT=Ii;Object.defineProperty(e,"share",{enumerable:!0,get:function(){return cT.share}});var lT=ys;Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return lT.shareReplay}});var fT=bs;Object.defineProperty(e,"single",{enumerable:!0,get:function(){return fT.single}});var dT=ms;Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return dT.skip}});var hT=gs;Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return hT.skipLast}});var pT=ws;Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return pT.skipUntil}});var vT=Os;Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return vT.skipWhile}});var _T=Es;Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return _T.startWith}});var yT=rn;Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return yT.subscribeOn}});var bT=Ss;Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return bT.switchAll}});var mT=sn;Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return mT.switchMap}});var gT=Ps;Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return gT.switchMapTo}});var wT=Ts;Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return wT.switchScan}});var OT=an;Object.defineProperty(e,"take",{enumerable:!0,get:function(){return OT.take}});var ET=Ti;Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return ET.takeLast}});var ST=Cs;Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return ST.takeUntil}});var PT=As;Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return PT.takeWhile}});var TT=Is;Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return TT.tap}});var CT=Ri;Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return CT.throttle}});var AT=Rs;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return AT.throttleTime}});var IT=un;Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return IT.throwIfEmpty}});var RT=Wn;Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return RT.timeInterval}});var $T=Ia;Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return $T.timeout}});var jT=$s;Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return jT.timeoutWith}});var NT=js;Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return NT.timestamp}});var kT=bi;Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return kT.toArray}});var MT=Ns;Object.defineProperty(e,"window",{enumerable:!0,get:function(){return MT.window}});var DT=ks;Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return DT.windowCount}});var LT=Ms;Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return LT.windowTime}});var UT=Ds;Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return UT.windowToggle}});var FT=Ls;Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return FT.windowWhen}});var BT=Us;Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return BT.withLatestFrom}});var xT=Fs;Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return xT.zipAll}});var VT=Bs;Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return VT.zipWith}})})(Ga);var Ef={},Sf={};Object.defineProperty(Sf,"__esModule",{value:!0});Sf.partition=void 0;var fV=_u,rg=Ht;function dV(e,r){return function(t){return[rg.filter(e,r)(t),rg.filter(fV.not(e,r))(t)]}}Sf.partition=dV;var Pf={},hV=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},pV=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Pf,"__esModule",{value:!0});Pf.race=void 0;var vV=gr,_V=Ci;function yV(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return _V.raceWith.apply(void 0,pV([],hV(vV.argsOrArgArray(e))))}Pf.race=yV;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=e.merge=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.concat=e.combineLatestWith=e.combineLatest=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=void 0,e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.race=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.partition=e.pairwise=e.onErrorResumeNext=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=void 0,e.zipWith=e.zipAll=e.zip=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=void 0;var r=_i;Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return r.audit}});var t=yu;Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return t.auditTime}});var n=bu;Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return n.buffer}});var o=mu;Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return o.bufferCount}});var i=gu;Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return i.bufferTime}});var a=wu;Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return a.bufferToggle}});var s=Ou;Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return s.bufferWhen}});var c=Eu;Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return c.catchError}});var u=Su;Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return u.combineAll}});var l=yi;Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return l.combineLatestAll}});var d=Au;Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return d.combineLatest}});var h=Cu;Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return h.combineLatestWith}});var p=$u;Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return p.concat}});var v=oo;Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return v.concatAll}});var y=mi;Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return y.concatMap}});var _=Iu;Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return _.concatMapTo}});var b=Ru;Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return b.concatWith}});var w=ao;Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return w.connect}});var S=ju;Object.defineProperty(e,"count",{enumerable:!0,get:function(){return S.count}});var E=Nu;Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return E.debounce}});var P=ku;Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return P.debounceTime}});var C=on;Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return C.defaultIfEmpty}});var T=Mu;Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return T.delay}});var I=gi;Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return I.delayWhen}});var $=Du;Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return $.dematerialize}});var D=Lu;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return D.distinct}});var q=Ei;Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return q.distinctUntilChanged}});var V=Uu;Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return V.distinctUntilKeyChanged}});var H=Fu;Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return H.elementAt}});var oe=Bu;Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return oe.endWith}});var F=xu;Object.defineProperty(e,"every",{enumerable:!0,get:function(){return F.every}});var J=Vu;Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return J.exhaust}});var B=Si;Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return B.exhaustAll}});var te=Pi;Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return te.exhaustMap}});var G=Wu;Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return G.expand}});var L=Ht;Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return L.filter}});var ee=zu;Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return ee.finalize}});var he=Wr;Object.defineProperty(e,"find",{enumerable:!0,get:function(){return he.find}});var be=Hu;Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return be.findIndex}});var Q=qu;Object.defineProperty(e,"first",{enumerable:!0,get:function(){return Q.first}});var we=Gu;Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return we.groupBy}});var ve=wi;Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return ve.ignoreElements}});var nt=Ku;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return nt.isEmpty}});var m=Yu;Object.defineProperty(e,"last",{enumerable:!0,get:function(){return m.last}});var A=zt;Object.defineProperty(e,"map",{enumerable:!0,get:function(){return A.map}});var M=Oi;Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return M.mapTo}});var x=Zu;Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return x.materialize}});var re=Qu;Object.defineProperty(e,"max",{enumerable:!0,get:function(){return re.max}});var Le=rs;Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return Le.merge}});var Tt=nn;Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return Tt.mergeAll}});var fn=Xu;Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return fn.flatMap}});var Fi=Pt;Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return Fi.mergeMap}});var Vd=Ju;Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return Vd.mergeMapTo}});var Wd=es;Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return Wd.mergeScan}});var zd=ts;Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return zd.mergeWith}});var Hd=ns;Object.defineProperty(e,"min",{enumerable:!0,get:function(){return Hd.min}});var qd=uo;Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return qd.multicast}});var Gd=tn;Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return Gd.observeOn}});var Kd=Vn;Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return Kd.onErrorResumeNext}});var Yd=os;Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return Yd.pairwise}});var Zd=Sf;Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return Zd.partition}});var Qd=is;Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return Qd.pluck}});var Xd=as;Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return Xd.publish}});var Jd=us;Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return Jd.publishBehavior}});var eh=ss;Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return eh.publishLast}});var th=cs;Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return th.publishReplay}});var rh=Pf;Object.defineProperty(e,"race",{enumerable:!0,get:function(){return rh.race}});var nh=Ci;Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return nh.raceWith}});var oh=wr;Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return oh.reduce}});var ih=ls;Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return ih.repeat}});var ah=fs;Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return ah.repeatWhen}});var uh=ds;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return uh.retry}});var sh=hs;Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return sh.retryWhen}});var ch=ui;Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return ch.refCount}});var lh=Ai;Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return lh.sample}});var fh=ps;Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return fh.sampleTime}});var dh=vs;Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return dh.scan}});var hh=_s;Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return hh.sequenceEqual}});var ph=Ii;Object.defineProperty(e,"share",{enumerable:!0,get:function(){return ph.share}});var vh=ys;Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return vh.shareReplay}});var _h=bs;Object.defineProperty(e,"single",{enumerable:!0,get:function(){return _h.single}});var yh=ms;Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return yh.skip}});var bh=gs;Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return bh.skipLast}});var mh=ws;Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return mh.skipUntil}});var gh=Os;Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return gh.skipWhile}});var wh=Es;Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return wh.startWith}});var Oh=rn;Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return Oh.subscribeOn}});var Eh=Ss;Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return Eh.switchAll}});var Sh=sn;Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return Sh.switchMap}});var Ph=Ps;Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return Ph.switchMapTo}});var Th=Ts;Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return Th.switchScan}});var Ch=an;Object.defineProperty(e,"take",{enumerable:!0,get:function(){return Ch.take}});var Ah=Ti;Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return Ah.takeLast}});var Ih=Cs;Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return Ih.takeUntil}});var Rh=As;Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return Rh.takeWhile}});var $h=Is;Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return $h.tap}});var jh=Ri;Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return jh.throttle}});var Nh=Rs;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return Nh.throttleTime}});var kh=un;Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return kh.throwIfEmpty}});var Mh=Wn;Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return Mh.timeInterval}});var Dh=Ia;Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return Dh.timeout}});var Lh=$s;Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return Lh.timeoutWith}});var Uh=js;Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return Uh.timestamp}});var Fh=bi;Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return Fh.toArray}});var Bh=Ns;Object.defineProperty(e,"window",{enumerable:!0,get:function(){return Bh.window}});var xh=ks;Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return xh.windowCount}});var Vh=Ms;Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return Vh.windowTime}});var Wh=Ds;Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return Wh.windowToggle}});var zh=Ls;Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return zh.windowWhen}});var Hh=Us;Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return Hh.withLatestFrom}});var qh=xs;Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return qh.zip}});var Gh=Fs;Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return Gh.zipAll}});var Kh=Bs;Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return Kh.zipWith}})})(Ef);var $i={},Ro=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},$o=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty($i,"__esModule",{value:!0});var bV=Y,Pn=Ga,yn=Ef,Gi={READY:0,STREAMING:1,COMPLETED:2},mV=function(){function e(r,t){var n=r.pipe((0,yn.publishReplay)(1),(0,yn.refCount)());this._result=n,this._keys=n.pipe((0,yn.mergeMap)(function(o){return(0,Pn.from)(o.keys())}),(0,yn.publishReplay)(1),(0,yn.refCount)()),this._records=void 0,this._controls=new m1,this._summary=new Pn.ReplaySubject,this._state=t||Gi.READY}return e.prototype.keys=function(){return this._keys},e.prototype.records=function(){var r=this,t=this._result.pipe((0,yn.mergeMap)(function(n){return new Pn.Observable(function(o){return r._startStreaming({result:n,recordsObserver:o})})}));return t.push=function(){return r._push()},t},e.prototype.consume=function(){var r=this;return this._result.pipe((0,yn.mergeMap)(function(t){return new Pn.Observable(function(n){return r._startStreaming({result:t,summaryObserver:n})})}))},e.prototype.pause=function(){this._controls.pause()},e.prototype.resume=function(){return this._controls.resume()},e.prototype.push=function(){return this._controls.push()},e.prototype._startStreaming=function(r){var t=r===void 0?{}:r,n=t.result,o=t.recordsObserver,i=o===void 0?null:o,a=t.summaryObserver,s=a===void 0?null:a,c=[];return s&&c.push(this._summary.subscribe(s)),this._state<Gi.STREAMING?(this._state=Gi.STREAMING,this._setupRecordsStream(n),i?c.push(this._records.subscribe(i)):n._cancel(),c.push({unsubscribe:function(){n._cancel&&n._cancel()}})):i&&i.error((0,bV.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){c.forEach(function(u){return u.unsubscribe()})}},e.prototype._toObservable=function(){var r=this;function t(n){return new Pn.Observable(function(o){o.next(n),o.complete()})}return new Pn.Observable(function(n){r._result.subscribe({complete:function(){return n.complete()},next:function(o){return n.next(new e(t(o)),r._state)},error:function(o){return n.error(o)}})})},e.prototype._setupRecordsStream=function(r){var t=this;return this._records?this._records:(this._records=gV(r[Symbol.asyncIterator](),{complete:function(){return Ro(t,void 0,void 0,function(){var n,o;return $o(this,function(i){switch(i.label){case 0:return this._state=Gi.COMPLETED,o=(n=this._summary).next,[4,r.summary()];case 1:return o.apply(n,[i.sent()]),this._summary.complete(),[2]}})})},error:function(n){t._state=Gi.COMPLETED,t._summary.error(n)}},this._controls),this._records)},e}();$i.default=mV;function gV(e,r,t){var n=this;t===void 0&&(t=new m1);var o=new Pn.Subject,i=function(s){return Ro(n,void 0,void 0,function(){var c,u,l,d;return $o(this,function(h){switch(h.label){case 0:return h.trys.push([0,2,3,4]),t.pushing=!0,[4,s];case 1:return c=h.sent(),u=c.done,l=c.value,u?(o.complete(),r.complete()):(o.next(l),t.paused||i(e.next()).catch(function(){})),[3,4];case 2:return d=h.sent(),o.error(d),r.error(d),[3,4];case 3:return t.pushing=!1,[7];case 4:return[2]}})})};function a(s){return Ro(this,void 0,void 0,function(){return $o(this,function(c){switch(c.label){case 0:return[4,i(e.next(s))];case 1:return c.sent(),[2]}})})}return t.pusher=a,a(),o}var m1=function(){function e(r){r===void 0&&(r=function(){return Ro(t,void 0,void 0,function(){return $o(this,function(n){return[2]})})});var t=this;this._paused=!1,this._pushing=!1,this._push=r}return e.prototype.pause=function(){this._paused=!0},Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushing",{get:function(){return this._pushing},set:function(r){this._pushing=r},enumerable:!1,configurable:!0}),e.prototype.resume=function(){return Ro(this,void 0,void 0,function(){var r;return $o(this,function(t){switch(t.label){case 0:return r=this._paused,this._paused=!1,r&&!this._pushing?[4,this._push()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.push=function(){return Ro(this,void 0,void 0,function(){return $o(this,function(r){switch(r.label){case 0:return this.pause(),[4,this._push()];case 1:return[2,r.sent()]}})})},Object.defineProperty(e.prototype,"pusher",{get:function(){return this._push},set:function(r){this._push=r},enumerable:!1,configurable:!0}),e}(),Vs={},g1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vs,"__esModule",{value:!0});var uc=Ga,wV=g1($i);g1(Y);var OV=function(){function e(r){this._txc=r}return e.prototype.run=function(r,t){var n=this;return new wV.default(new uc.Observable(function(o){try{o.next(n._txc.run(r,t)),o.complete()}catch(i){o.error(i)}return function(){}}))},e.prototype.commit=function(){var r=this;return new uc.Observable(function(t){r._txc.commit().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype.rollback=function(){var r=this;return new uc.Observable(function(t){r._txc.rollback().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype.isOpen=function(){return this._txc.isOpen()},e.prototype.close=function(){var r=this;return new uc.Observable(function(t){r._txc.close().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e}();Vs.default=OV;var Tf={},w1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tf,"__esModule",{value:!0});w1($i);w1(Vs);var EV=function(){function e(r){var t=r.run;this._run=t}return e.fromTransaction=function(r){return new e({run:r.run.bind(r)})},e.prototype.run=function(r,t){return this._run(r,t)},e}();Tf.default=EV;var z_={};Object.defineProperty(z_,"__esModule",{value:!0});var tl=Y,yp=Ga,bp=Ef;tl.internal.logger.Logger;var SV=tl.error.SERVICE_UNAVAILABLE,ng=30*1e3,og=1e3,ig=2,ag=.2,PV=function(){function e(r){var t=r===void 0?{}:r,n=t.maxRetryTimeout,o=n===void 0?ng:n,i=t.initialDelay,a=i===void 0?og:i,s=t.delayMultiplier,c=s===void 0?ig:s,u=t.delayJitter,l=u===void 0?ag:u,d=t.logger,h=d===void 0?null:d;this._maxRetryTimeout=sc(o,ng),this._initialDelay=sc(a,og),this._delayMultiplier=sc(c,ig),this._delayJitter=sc(l,ag),this._logger=h}return e.prototype.retry=function(r){var t=this;return r.pipe((0,bp.retryWhen)(function(n){var o=[],i=Date.now(),a=1,s=t._initialDelay;return n.pipe((0,bp.mergeMap)(function(c){if(!(0,tl.isRetriableError)(c))return(0,yp.throwError)(function(){return c});if(o.push(c),a>=2&&Date.now()-i>=t._maxRetryTimeout){var u=(0,tl.newError)("Failed after retried for ".concat(a," times in ").concat(t._maxRetryTimeout," ms. Make sure that your database is online and retry again."),SV);return u.seenErrors=o,(0,yp.throwError)(function(){return u})}var l=t._computeNextDelay(s);return s=s*t._delayMultiplier,a++,t._logger&&t._logger.warn("Transaction failed and will be retried in ".concat(l)),(0,yp.of)(1).pipe((0,bp.delay)(l))}))}))},e.prototype._computeNextDelay=function(r){var t=r*this._delayJitter;return r-t+2*t*Math.random()},e}();z_.default=PV;function sc(e,r){return e||e===0?e:r}var Cf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wl,"__esModule",{value:!0});var bn=Ga,Ki=Ef,TV=Cf($i),O1=Y,CV=Cf(Vs),AV=Cf(Tf),IV=Cf(z_),H_=O1.internal.constants,ug=H_.ACCESS_MODE_READ,sg=H_.ACCESS_MODE_WRITE,cg=H_.TELEMETRY_APIS,cc=O1.internal.txConfig.TxConfig,RV=function(){function e(r){var t=r===void 0?{}:r,n=t.session,o=t.config,i=t.log;this._session=n,this._retryLogic=$V(o),this._log=i}return e.prototype.run=function(r,t,n){var o=this;return new TV.default(new bn.Observable(function(i){try{i.next(o._session.run(r,t,n)),i.complete()}catch(a){i.error(a)}return function(){}}))},e.prototype.beginTransaction=function(r){return this._beginTransaction(this._session._mode,r,{api:cg.UNMANAGED_TRANSACTION})},e.prototype.readTransaction=function(r,t){return this._runTransaction(ug,r,t)},e.prototype.writeTransaction=function(r,t){return this._runTransaction(sg,r,t)},e.prototype.executeRead=function(r,t){return this._executeInTransaction(ug,r,t)},e.prototype.executeWrite=function(r,t){return this._executeInTransaction(sg,r,t)},e.prototype._executeInTransaction=function(r,t,n){var o=function(i){return new AV.default({run:i.run.bind(i)})};return this._runTransaction(r,t,n,o)},e.prototype.close=function(){var r=this;return new bn.Observable(function(t){r._session.close().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype.lastBookmark=function(){return this.lastBookmarks()},e.prototype.lastBookmarks=function(){return this._session.lastBookmarks()},e.prototype._beginTransaction=function(r,t,n){var o=this,i=cc.empty();return t&&(i=new cc(t,this._log)),new bn.Observable(function(a){try{o._session._beginTransaction(r,i,n).then(function(s){a.next(new CV.default(s)),a.complete()}).catch(function(s){return a.error(s)})}catch(s){a.error(s)}return function(){}})},e.prototype._runTransaction=function(r,t,n,o){var i=this;o===void 0&&(o=function(c){return c});var a=cc.empty();n&&(a=new cc(n));var s={apiTelemetryConfig:{api:cg.MANAGED_TRANSACTION,onTelemetrySuccess:function(){s.apiTelemetryConfig=void 0}}};return this._retryLogic.retry((0,bn.of)(1).pipe((0,Ki.mergeMap)(function(){return i._beginTransaction(r,a,s.apiTelemetryConfig)}),(0,Ki.mergeMap)(function(c){return(0,bn.defer)(function(){try{return t(o(c))}catch(u){return(0,bn.throwError)(function(){return u})}}).pipe((0,Ki.catchError)(function(u){return c.rollback().pipe((0,Ki.concatWith)((0,bn.throwError)(function(){return u})))}),(0,Ki.concatWith)(c.commit()))})))},e}();Wl.default=RV;function $V(e){var r=e&&e.maxTransactionRetryTime?e.maxTransactionRetryTime:null;return new IV.default({maxRetryTimeout:r})}var jV=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),NV=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hr,"__esModule",{value:!0});hr.WRITE=hr.READ=hr.Driver=void 0;var Af=Y,kV=NV(Wl),lg=Af.internal.constants.FETCH_ALL,MV=Af.driver.READ,E1=Af.driver.WRITE;hr.READ=MV;hr.WRITE=E1;var S1=function(e){jV(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.rxSession=function(t){var n=t===void 0?{}:t,o=n.defaultAccessMode,i=o===void 0?E1:o,a=n.bookmarks,s=n.database,c=s===void 0?"":s,u=n.fetchSize,l=n.impersonatedUser,d=n.bookmarkManager,h=n.notificationFilter,p=n.auth;return new kV.default({session:this._newSession({defaultAccessMode:i,bookmarkOrBookmarks:a,database:c,impersonatedUser:l,auth:p,reactive:!1,fetchSize:DV(u,this._config.fetchSize),bookmarkManager:d,notificationFilter:h,log:this._log}),config:this._config,log:this._log})},r}(Af.Driver);hr.Driver=S1;function DV(e,r){var t=parseInt(e,10);if(t>0||t===lg)return t;if(t===0||t<0)throw new Error("The fetch size can only be a positive value or ".concat(lg," for ALL. However fetchSize = ").concat(t));return r}hr.default=S1;var q_={};Object.defineProperty(q_,"__esModule",{value:!0});q_.default="5.28.1";var P1={},zr={},If={};Object.defineProperty(If,"__esModule",{value:!0});var LV=function(){function e(){}return e.prototype.selectReader=function(r){throw new Error("Abstract function")},e.prototype.selectWriter=function(r){throw new Error("Abstract function")},e}();If.default=LV;var G_={},K_={};Object.defineProperty(K_,"__esModule",{value:!0});var UV=function(){function e(r){this._offset=r||0}return e.prototype.next=function(r){if(r===0)return-1;var t=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),t%r},e}();K_.default=UV;var FV=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),T1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(G_,"__esModule",{value:!0});var fg=T1(K_),BV=T1(If),xV=function(e){FV(r,e);function r(t){var n=e.call(this)||this;return n._readersIndex=new fg.default,n._writersIndex=new fg.default,n._connectionPool=t,n}return r.prototype.selectReader=function(t){return this._select(t,this._readersIndex)},r.prototype.selectWriter=function(t){return this._select(t,this._writersIndex)},r.prototype._select=function(t,n){var o=t.length;if(o===0)return null;var i=n.next(o),a=i,s=null,c=Number.MAX_SAFE_INTEGER;do{var u=t[a],l=this._connectionPool.activeResourceCount(u);l<c&&(s=u,c=l),a===o-1?a=0:a++}while(a!==i);return s},r}(BV.default);G_.default=xV;var C1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zr,"__esModule",{value:!0});zr.LeastConnectedLoadBalancingStrategy=zr.LoadBalancingStrategy=void 0;var VV=C1(If);zr.LoadBalancingStrategy=VV.default;var A1=C1(G_);zr.LeastConnectedLoadBalancingStrategy=A1.default;zr.default=A1.default;var Y_={},Z_={},so={},Dr={},Q_={},Or={},co={},Rf={},WV=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Rf,"__esModule",{value:!0});var I1=function(){function e(r){this.position=0,this.length=r}return e.prototype.getUInt8=function(r){throw new Error("Not implemented")},e.prototype.getInt8=function(r){throw new Error("Not implemented")},e.prototype.getFloat64=function(r){throw new Error("Not implemented")},e.prototype.getVarInt=function(r){throw new Error("Not implemented")},e.prototype.putUInt8=function(r,t){throw new Error("Not implemented")},e.prototype.putInt8=function(r,t){throw new Error("Not implemented")},e.prototype.putFloat64=function(r,t){throw new Error("Not implemented")},e.prototype.getInt16=function(r){return this.getInt8(r)<<8|this.getUInt8(r+1)},e.prototype.getUInt16=function(r){return this.getUInt8(r)<<8|this.getUInt8(r+1)},e.prototype.getInt32=function(r){return this.getInt8(r)<<24|this.getUInt8(r+1)<<16|this.getUInt8(r+2)<<8|this.getUInt8(r+3)},e.prototype.getUInt32=function(r){return this.getUInt8(r)<<24|this.getUInt8(r+1)<<16|this.getUInt8(r+2)<<8|this.getUInt8(r+3)},e.prototype.getInt64=function(r){return this.getInt8(r)<<56|this.getUInt8(r+1)<<48|this.getUInt8(r+2)<<40|this.getUInt8(r+3)<<32|this.getUInt8(r+4)<<24|this.getUInt8(r+5)<<16|this.getUInt8(r+6)<<8|this.getUInt8(r+7)},e.prototype.getSlice=function(r,t){return new zV(r,t,this)},e.prototype.putInt16=function(r,t){this.putInt8(r,t>>8),this.putUInt8(r+1,t&255)},e.prototype.putUInt16=function(r,t){this.putUInt8(r,t>>8&255),this.putUInt8(r+1,t&255)},e.prototype.putInt32=function(r,t){this.putInt8(r,t>>24),this.putUInt8(r+1,t>>16&255),this.putUInt8(r+2,t>>8&255),this.putUInt8(r+3,t&255)},e.prototype.putUInt32=function(r,t){this.putUInt8(r,t>>24&255),this.putUInt8(r+1,t>>16&255),this.putUInt8(r+2,t>>8&255),this.putUInt8(r+3,t&255)},e.prototype.putInt64=function(r,t){this.putInt8(r,t>>48),this.putUInt8(r+1,t>>42&255),this.putUInt8(r+2,t>>36&255),this.putUInt8(r+3,t>>30&255),this.putUInt8(r+4,t>>24&255),this.putUInt8(r+5,t>>16&255),this.putUInt8(r+6,t>>8&255),this.putUInt8(r+7,t&255)},e.prototype.putVarInt=function(r,t){for(var n=0;t>1;){var o=t%128;t>=128&&(o+=128),t=t/128,this.putUInt8(r+n,o),n+=1}return n},e.prototype.putBytes=function(r,t){for(var n=0,o=t.remaining();n<o;n++)this.putUInt8(r+n,t.readUInt8())},e.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},e.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},e.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},e.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},e.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},e.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},e.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},e.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},e.prototype.readVarInt=function(){var r=this.getVarInt(this.position);return this._updatePos(r.length),r.value},e.prototype.writeUInt8=function(r){this.putUInt8(this._updatePos(1),r)},e.prototype.writeInt8=function(r){this.putInt8(this._updatePos(1),r)},e.prototype.writeInt16=function(r){this.putInt16(this._updatePos(2),r)},e.prototype.writeInt32=function(r){this.putInt32(this._updatePos(4),r)},e.prototype.writeUInt32=function(r){this.putUInt32(this._updatePos(4),r)},e.prototype.writeInt64=function(r){this.putInt64(this._updatePos(8),r)},e.prototype.writeFloat64=function(r){this.putFloat64(this._updatePos(8),r)},e.prototype.writeVarInt=function(r){var t=this.putVarInt(this.position,r);this._updatePos(t)},e.prototype.writeBytes=function(r){this.putBytes(this._updatePos(r.remaining()),r)},e.prototype.readSlice=function(r){return this.getSlice(this._updatePos(r),r)},e.prototype._updatePos=function(r){var t=this.position;return this.position+=r,t},e.prototype.remaining=function(){return this.length-this.position},e.prototype.hasRemaining=function(){return this.remaining()>0},e.prototype.reset=function(){this.position=0},e.prototype.toString=function(){return this.constructor.name+"( position="+this.position+` )
  `+this.toHex()},e.prototype.toHex=function(){for(var r="",t=0;t<this.length;t++){var n=this.getUInt8(t).toString(16);n.length===1&&(n="0"+n),r+=n,t!==this.length-1&&(r+=" ")}return r},e}();Rf.default=I1;var zV=function(e){WV(r,e);function r(t,n,o){var i=e.call(this,n)||this;return i._start=t,i._inner=o,i}return r.prototype.putUInt8=function(t,n){this._inner.putUInt8(this._start+t,n)},r.prototype.getUInt8=function(t){return this._inner.getUInt8(this._start+t)},r.prototype.putInt8=function(t,n){this._inner.putInt8(this._start+t,n)},r.prototype.putFloat64=function(t,n){this._inner.putFloat64(this._start+t,n)},r.prototype.getInt8=function(t){return this._inner.getInt8(this._start+t)},r.prototype.getFloat64=function(t){return this._inner.getFloat64(this._start+t)},r}(I1),HV=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(co,"__esModule",{value:!0});co.BaseBuffer=void 0;var R1=HV(Rf);co.BaseBuffer=R1.default;co.default=R1.default;var qV=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),$1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Or,"__esModule",{value:!0});Or.alloc=void 0;var lc=$1(Z0),GV=$1(co),j1=function(e){qV(r,e);function r(t){var n=this,o=YV(t);return n=e.call(this,o.length)||this,n._buffer=o,n}return r.prototype.getUInt8=function(t){return this._buffer.readUInt8(t)},r.prototype.getInt8=function(t){return this._buffer.readInt8(t)},r.prototype.getFloat64=function(t){return this._buffer.readDoubleBE(t)},r.prototype.getVarInt=function(t){for(var n=0,o=this._buffer.readInt8(t+n),i=o%128;o/128>=1;)n+=1,o=this._buffer.readInt8(t+n),i+=o%128;return{length:n+1,value:i}},r.prototype.putUInt8=function(t,n){this._buffer.writeUInt8(n,t)},r.prototype.putInt8=function(t,n){this._buffer.writeInt8(n,t)},r.prototype.putFloat64=function(t,n){this._buffer.writeDoubleBE(n,t)},r.prototype.putBytes=function(t,n){if(n instanceof r){var o=Math.min(n.length-n.position,this.length-t);n._buffer.copy(this._buffer,t,n.position,n.position+o),n.position+=o}else e.prototype.putBytes.call(this,t,n)},r.prototype.getSlice=function(t,n){return new r(this._buffer.slice(t,t+n))},r}(GV.default);Or.default=j1;function KV(e){return new j1(e)}Or.alloc=KV;function YV(e){return e instanceof lc.default.Buffer?e:typeof e=="number"&&typeof lc.default.Buffer.alloc=="function"?lc.default.Buffer.alloc(e):new lc.default.Buffer(e)}var ZV=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Q_,"__esModule",{value:!0});var dg=ZV(Or),go=Y,N1=go.internal.util,k1=N1.ENCRYPTION_OFF,QV=N1.ENCRYPTION_ON,hg=1,XV=3,JV=function(){function e(r,t,n){t===void 0&&(t=cW),n===void 0&&(n=function(u){return new WebSocket(u)});var o=this;this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=r,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._receiveTimeoutId=null,this._closingPromise=null;var i=oW(r,t),a=i.scheme,s=i.error;if(s){this._error=s;return}this._ws=eW(a,r.address,n),this._ws.binaryType="arraybuffer";var c=this;this._ws.onclose=function(u){u&&!u.wasClean&&c._handleConnectionError(),c._open=!1},this._ws.onopen=function(){c._clearConnectionTimeout();var u=c._pending;c._pending=null;for(var l=0;l<u.length;l++)c.write(u[l])},this._ws.onmessage=function(u){if(o._resetTimeout(),c.onmessage){var l=new dg.default(u.data);c.onmessage(l)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}return e.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired){this._error=(0,go.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),this.onerror&&this.onerror(this._error);return}this._open&&!this._timedout&&(this._error=(0,go.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},e.prototype.write=function(r){if(this._pending!==null)this._pending.push(r);else if(r instanceof dg.default)try{this._ws.send(r._buffer)}catch(t){if(this._ws.readyState!==hg)this._handleConnectionError();else throw t}else throw(0,go.newError)("Don't know how to send buffer: "+r)},e.prototype.close=function(){var r=this;return this._closingPromise===null&&(this._closingPromise=new Promise(function(t,n){r._clearConnectionTimeout(),r._ws&&r._ws.readyState!==XV?(r._open=!1,r.stopReceiveTimeout(),r._ws.onclose=function(){t()},r._ws.close()):t()})),this._closingPromise},e.prototype.setupReceiveTimeout=function(r){this._receiveTimeout=r},e.prototype.stopReceiveTimeout=function(){this._receiveTimeout!==null&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,this._receiveTimeoutId!=null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=null)},e.prototype.startReceiveTimeout=function(){this._open&&this._receiveTimeout!==null&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._resetTimeout())},e.prototype._resetTimeout=function(){var r=this;this._receiveTimeoutStarted&&(this._receiveTimeoutId!==null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=setTimeout(function(){r._receiveTimeoutId=null,r._timedout=!0,r.stopReceiveTimeout(),r._error=(0,go.newError)("Connection lost. Server didn't respond in ".concat(r._receiveTimeout,"ms"),r._config.connectionErrorCode),r.close(),r.onerror&&r.onerror(r._error)},this._receiveTimeout))},e.prototype._setupConnectionTimeout=function(){var r=this,t=this._config.connectionTimeout;if(t){var n=this._ws;return setTimeout(function(){n.readyState!==hg&&(r._connectionTimeoutFired=!0,n.close())},t)}return null},e.prototype._clearConnectionTimeout=function(){var r=this._connectionTimeoutId;(r||r===0)&&(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(r))},e}();Q_.default=JV;function eW(e,r,t){var n=e+"://"+r.asHostPort();try{return t(n)}catch(i){if(tW(i,r)){var o=nW(e,r);return t(o)}else throw i}}function tW(e,r){return e.name==="SyntaxError"&&rW(r.asHostPort())}function rW(e){return e.charAt(0)==="["&&e.indexOf("]")!==-1}function nW(e,r){var t=r.host().replace(/:/g,"-"),n=t.replace("%","s"),o=n+".ipv6-literal.net";return"".concat(e,"://").concat(o,":").concat(r.port())}function oW(e,r){var t=iW(e),n=aW(e),o=e.trust,i=uW(r);if(sW(t,n,i),n)return{scheme:"ws",error:null};if(i)return{scheme:"wss",error:null};if(t){if(!o||o==="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES")return{scheme:"wss",error:null};var a=(0,go.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+o+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+k1+'"` in the driver configuration.');return{scheme:null,error:a}}return{scheme:"ws",error:null}}function iW(e){return e.encrypted===!0||e.encrypted===QV}function aW(e){return e.encrypted===!1||e.encrypted===k1}function uW(e){var r=typeof e=="function"?e():"";return r&&r.toLowerCase().indexOf("https")>=0}function sW(e,r,t){t===null||(e&&!t?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):r&&t&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}function cW(){return typeof window<"u"&&window.location?window.location.protocol:null}var X_={},lW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(X_,"__esModule",{value:!0});var fW=Y,dW=fW.internal.resolver.BaseHostNameResolver,hW=function(e){lW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.resolve=function(t){return this._resolveToItself(t)},r}(dW);X_.default=hW;var J_={},pW=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},vW=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(J_,"__esModule",{value:!0});J_.default={load:function(e){return pW(this,void 0,void 0,function(){return vW(this,function(r){return[2,e]})})}};var ey=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dr,"__esModule",{value:!0});Dr.ClientCertificatesLoader=Dr.HostNameResolver=Dr.Channel=void 0;var _W=ey(Q_),yW=ey(X_),bW=ey(J_);Dr.Channel=_W.default;Dr.HostNameResolver=yW.default;Dr.ClientCertificatesLoader=bW.default;var Bo={},ty={},mW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ty,"__esModule",{value:!0});var gW=co,wW=Or,OW=function(e){mW(r,e);function r(t){for(var n=this,o=0,i=0;i<t.length;i++)o+=t[i].length;return n=e.call(this,o)||this,n._buffers=t,n}return r.prototype.getUInt8=function(t){for(var n=0;n<this._buffers.length;n++){var o=this._buffers[n];if(t>=o.length)t-=o.length;else return o.getUInt8(t)}},r.prototype.getInt8=function(t){for(var n=0;n<this._buffers.length;n++){var o=this._buffers[n];if(t>=o.length)t-=o.length;else return o.getInt8(t)}},r.prototype.getFloat64=function(t){for(var n=(0,wW.alloc)(8),o=0;o<8;o++)n.putUInt8(o,this.getUInt8(t+o));return n.getFloat64(0)},r}(gW.BaseBuffer);ty.default=OW;var EW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),M1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bo,"__esModule",{value:!0});Bo.Dechunker=Bo.Chunker=void 0;var SW=M1(Rf),pg=Or,PW=M1(ty),fc=2,TW=0,CW=1400,AW=function(e){EW(r,e);function r(t,n){var o=e.call(this,0)||this;return o._bufferSize=n||CW,o._ch=t,o._buffer=(0,pg.alloc)(o._bufferSize),o._currentChunkStart=0,o._chunkOpen=!1,o}return r.prototype.putUInt8=function(t,n){this._ensure(1),this._buffer.writeUInt8(n)},r.prototype.putInt8=function(t,n){this._ensure(1),this._buffer.writeInt8(n)},r.prototype.putFloat64=function(t,n){this._ensure(8),this._buffer.writeFloat64(n)},r.prototype.putBytes=function(t,n){for(;n.remaining()>0;)this._ensure(1),this._buffer.remaining()>n.remaining()?this._buffer.writeBytes(n):this._buffer.writeBytes(n.readSlice(this._buffer.remaining()));return this},r.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var t=this._buffer;this._buffer=null,this._ch.write(t.getSlice(0,t.position)),this._buffer=(0,pg.alloc)(this._bufferSize),this._chunkOpen=!1}return this},r.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<fc&&this.flush(),this._buffer.writeInt16(TW)},r.prototype._ensure=function(t){var n=this._chunkOpen?t:t+fc;this._buffer.remaining()<n&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+fc,this._chunkOpen=!0)},r.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var t=this._buffer.position-(this._currentChunkStart+fc);this._buffer.putUInt16(this._currentChunkStart,t),this._chunkOpen=!1}},r}(SW.default);Bo.Chunker=AW;var IW=function(){function e(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return e.prototype.AWAITING_CHUNK=function(r){return r.remaining()>=2?this._onHeader(r.readUInt16()):(this._partialChunkHeader=r.readUInt8()<<8,this.IN_HEADER)},e.prototype.IN_HEADER=function(r){return this._onHeader((this._partialChunkHeader|r.readUInt8())&65535)},e.prototype.IN_CHUNK=function(r){return this._chunkSize<=r.remaining()?(this._currentMessage.push(r.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=r.remaining(),this._currentMessage.push(r.readSlice(r.remaining())),this.IN_CHUNK)},e.prototype.CLOSED=function(r){},e.prototype._onHeader=function(r){if(r===0){var t=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:t=this._currentMessage[0];break;default:t=new PW.default(this._currentMessage);break}return this._currentMessage=[],this.onmessage(t),this.AWAITING_CHUNK}else return this._chunkSize=r,this.IN_CHUNK},e.prototype.write=function(r){for(;r.hasRemaining();)this._state=this._state(r)},e}();Bo.Dechunker=IW;var ry={};Object.defineProperty(ry,"__esModule",{value:!0});var $f=Y,D1=$f.internal.util,RW=D1.ENCRYPTION_OFF,$W=D1.ENCRYPTION_ON,jW=$f.error.SERVICE_UNAVAILABLE,vg=[null,void 0,!0,!1,$W,RW],_g=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"],NW=function(){function e(r,t,n,o){this.address=r,this.encrypted=kW(t),this.trust=MW(t),this.trustedCertificates=DW(t),this.knownHostsPath=LW(t),this.connectionErrorCode=n||jW,this.connectionTimeout=t.connectionTimeout,this.clientCertificate=o}return e}();ry.default=NW;function kW(e){var r=e.encrypted;if(vg.indexOf(r)===-1)throw(0,$f.newError)("Illegal value of the encrypted setting ".concat(r,". Expected one of ").concat(vg));return r}function MW(e){var r=e.trust;if(_g.indexOf(r)===-1)throw(0,$f.newError)("Illegal value of the trust setting ".concat(r,". Expected one of ").concat(_g));return r}function DW(e){return e.trustedCertificates||[]}function LW(e){return e.knownHosts||null}var ny={},L1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ny,"__esModule",{value:!0});var UW=L1(Or),FW=Y,mp=L1(Z0),BW=YT,yg=new BW.StringDecoder("utf8");function xW(e){return new UW.default(qW(e))}function VW(e,r){if(Object.prototype.hasOwnProperty.call(e,"_buffer"))return WW(e,r);if(Object.prototype.hasOwnProperty.call(e,"_buffers"))return zW(e,r);throw(0,FW.newError)("Don't know how to decode strings from '".concat(e,"'"))}function WW(e,r){var t=e.position,n=t+r;return e.position=Math.min(n,e.length),e._buffer.toString("utf8",t,n)}function zW(e,r){return HW(e,r,function(t){return yg.write(t._buffer)},function(){return yg.end()})}function HW(e,r,t,n){var o=r,i=e.position;e._updatePos(Math.min(r,e.length-i));var a=e._buffers.reduce(function(s,c){if(o<=0)return s;if(i>=c.length)return i-=c.length,"";c._updatePos(i-c.position);var u=Math.min(c.length-i,o),l=c.readSlice(u);return c._updatePos(u),o=Math.max(o-l.length,0),i=0,s+t(l)},"");return a+n()}function qW(e){return typeof mp.default.Buffer.from=="function"?mp.default.Buffer.from(e,"utf8"):new mp.default.Buffer(e,"utf8")}ny.default={encode:xW,decode:VW};(function(e){var r=f&&f.__createBinding||(Object.create?function(s,c,u,l){l===void 0&&(l=u);var d=Object.getOwnPropertyDescriptor(c,u);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(s,l,d)}:function(s,c,u,l){l===void 0&&(l=u),s[l]=c[u]}),t=f&&f.__exportStar||function(s,c){for(var u in s)u!=="default"&&!Object.prototype.hasOwnProperty.call(c,u)&&r(c,s,u)},n=f&&f.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.utf8=e.alloc=e.ChannelConfig=void 0,t(Dr,e),t(Bo,e);var o=ry;Object.defineProperty(e,"ChannelConfig",{enumerable:!0,get:function(){return n(o).default}});var i=Or;Object.defineProperty(e,"alloc",{enumerable:!0,get:function(){return i.alloc}});var a=ny;Object.defineProperty(e,"utf8",{enumerable:!0,get:function(){return n(a).default}})})(so);Object.defineProperty(Z_,"__esModule",{value:!0});var U1=so,F1=Y,GW=1616949271,KW=["5.8","5.7","5.6","5.4","5.3","5.2","5.1","5.0","4.4","4.3","4.2","3.0"],YW=0;function _o(e,r){return{major:e,minor:r}}function ZW(e){if(e.length>4)throw(0,F1.newError)("It should not have more than 4 versions of the protocol");var r=(0,U1.alloc)(5*4);return r.writeInt32(GW),e.forEach(function(t){if(t instanceof Array){var n=t[0],o=n.major,i=n.minor,a=t[1].minor,s=i-a;r.writeInt32(s<<16|i<<8|o)}else{var o=t.major,i=t.minor;r.writeInt32(i<<8|o)}}),r.reset(),r}function QW(e,r){var t=[e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readUInt8()];if(t[0]===72&&t[1]===84&&t[2]===84&&t[3]===80)throw r.error("Handshake failed since server responded with HTTP."),(0,F1.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return+(t[3]+"."+t[2])}function XW(e,r,t){for(var n=r.readVarInt(),o=[],i=0;i<n;i++){var a=[r.readUInt8(),r.readUInt8(),r.readUInt8(),r.readUInt8()];o=o.concat(rz(a))}r.readVarInt();var s=nz(),c=0,u=0;o.sort(function(d,h){return Number(d.major)!==Number(h.major)?Number(h.major)-Number(d.major):Number(h.minor)-Number(d.minor)});for(var i=0;i<o.length;i++){var l=o[i];if(KW.includes(l.major+"."+l.minor)){c=l.major,u=l.minor;break}}return new Promise(function(d,h){try{var p=(0,U1.alloc)(5);p.writeInt32(u<<8|c),p.writeVarInt(s),e.write(p),d({protocolVersion:+(c+"."+u),capabilites:s,consumeRemainingBuffer:function(v){r.hasRemaining()&&v(r.readSlice(r.remaining()))}})}catch(v){h(v)}})}function JW(){return ZW([_o(255,1),[_o(5,8),_o(5,0)],[_o(4,4),_o(4,2)],_o(3,0)])}function ez(e,r){return tz(e,r).then(function(t){return t.protocolVersion===255.1?XW(e,t.buffer):t})}Z_.default=ez;function tz(e,r){var t=this;return new Promise(function(n,o){var i=function(a){o(a)};e.onerror=i.bind(t),e._error&&i(e._error),e.onmessage=function(a){try{var s=QW(a,r);n({protocolVersion:s,capabilites:0,buffer:a,consumeRemainingBuffer:function(c){a.hasRemaining()&&c(a.readSlice(a.remaining()))}})}catch(c){o(c)}},e.write(JW())})}function rz(e){for(var r=[],t=e[3],n=e[2],o=0;o<=e[1];o++)r.push({major:t,minor:n-o});return r}function nz(e){return YW}var oy={},jf={},Ve={},ae={},Nf={},iy=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),oz=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nf,"__esModule",{value:!0});oz(Y);var kf=function(){function e(){}return e.ofRecord=function(r){return r===null?e.ofNull():new uz(r)},e.ofMessageResponse=function(r){return r===null?e.ofNull():new iz(r)},e.ofNull=function(){return new az},Object.defineProperty(e.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),e}();Nf.default=kf;var iz=function(e){iy(r,e);function r(t){var n=e.call(this)||this;return n._response=t,n}return Object.defineProperty(r.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNull",{get:function(){return this._response===null},enumerable:!1,configurable:!0}),r}(kf),az=function(e){iy(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),r}(kf),uz=function(e){iy(r,e);function r(t){var n=e.call(this)||this;return n._record=t,n}return Object.defineProperty(r.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNull",{get:function(){return this._record===null},enumerable:!1,configurable:!0}),r}(kf),tr={},zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.reuseOngoingRequest=zn.identity=void 0;var sz=Y;function cz(e){return e}zn.identity=cz;function lz(e,r){r===void 0&&(r=null);var t=new Map;return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=sz.json.stringify(n);if(t.has(i))return t.get(i);var a=e.apply(r,n);return t.set(i,a),a.finally(function(){t.delete(i)})}}zn.reuseOngoingRequest=lz;var Mf={},fz=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Mf,"__esModule",{value:!0});Mf.equals=void 0;function dz(e,r){var t,n;if(e===r)return!0;if(e===null||r===null)return!1;if(typeof e=="object"&&typeof r=="object"){var o=Object.keys(e),i=Object.keys(r);if(o.length!==i.length)return!1;try{for(var a=fz(o),s=a.next();!s.done;s=a.next()){var c=s.value;if(e[c]!==r[c])return!1}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0}return!1}Mf.equals=dz;var hz=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),pz=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),B1=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&hz(r,e,t);return pz(r,e),r};Object.defineProperty(tr,"__esModule",{value:!0});tr.object=tr.functional=void 0;tr.functional=B1(zn);tr.object=B1(Mf);var Er=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),vz=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ae,"__esModule",{value:!0});ae.TelemetryObserver=ae.ProcedureRouteObserver=ae.RouteObserver=ae.CompletedObserver=ae.FailedObserver=ae.ResetObserver=ae.LogoffObserver=ae.LoginObserver=ae.ResultStreamObserver=ae.StreamObserver=void 0;var rt=Y,x1=vz(Nf),_z=tr,yz=rt.internal.constants.FETCH_ALL,Hr=rt.error.PROTOCOL_ERROR,lo=function(){function e(){}return e.prototype.onNext=function(r){},e.prototype.onError=function(r){},e.prototype.onCompleted=function(r){},e}();ae.StreamObserver=lo;var Df=function(e){Er(r,e);function r(t){var n=t===void 0?{}:t,o=n.reactive,i=o===void 0?!1:o,a=n.moreFunction,s=n.discardFunction,c=n.fetchSize,u=c===void 0?yz:c,l=n.beforeError,d=n.afterError,h=n.beforeKeys,p=n.afterKeys,v=n.beforeComplete,y=n.afterComplete,_=n.server,b=n.highRecordWatermark,w=b===void 0?Number.MAX_VALUE:b,S=n.lowRecordWatermark,E=S===void 0?Number.MAX_VALUE:S,P=n.enrichMetadata,C=n.onDb,T=e.call(this)||this;return T._fieldKeys=null,T._fieldLookup=null,T._head=null,T._queuedRecords=[],T._tail=null,T._error=null,T._observers=[],T._meta={},T._server=_,T._beforeError=l,T._afterError=d,T._beforeKeys=h,T._afterKeys=p,T._beforeComplete=v,T._afterComplete=y,T._enrichMetadata=P||_z.functional.identity,T._queryId=null,T._moreFunction=a,T._discardFunction=s,T._discard=!1,T._fetchSize=u,T._lowRecordWatermark=E,T._highRecordWatermark=w,T._setState(i?jt.READY:jt.READY_STREAMING),T._setupAutoPull(),T._paused=!1,T._pulled=!i,T._haveRecordStreamed=!1,T._onDb=C,T}return r.prototype.pause=function(){this._paused=!0},r.prototype.resume=function(){this._paused=!1,this._setupAutoPull(!0),this._state.pull(this)},r.prototype.onNext=function(t){this._haveRecordStreamed=!0;var n=new rt.Record(this._fieldKeys,t,this._fieldLookup);this._observers.some(function(o){return o.onNext})?this._observers.forEach(function(o){o.onNext&&o.onNext(n)}):(this._queuedRecords.push(n),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},r.prototype.onCompleted=function(t){this._state.onSuccess(this,t)},r.prototype.onError=function(t){this._state.onError(this,t)},r.prototype.cancel=function(){this._discard=!0},r.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(jt.STREAMING)},r.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(jt.SUCCEEDED)},r.prototype.subscribe=function(t){if(this._head&&t.onKeys&&t.onKeys(this._head),this._queuedRecords.length>0&&t.onNext)for(var n=0;n<this._queuedRecords.length;n++)t.onNext(this._queuedRecords[n]),this._queuedRecords.length-n-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===jt.READY&&this._handleStreaming());this._tail&&t.onCompleted&&t.onCompleted(this._tail),this._error&&t.onError(this._error),this._observers.push(t),this._state===jt.READY&&this._handleStreaming()},r.prototype._handleHasMore=function(t){this._setState(jt.READY),this._handleStreaming(),delete t.has_more},r.prototype._handlePullSuccess=function(t){var n=this,o=this._enrichMetadata(Object.assign(this._server?{server:this._server}:{},this._meta,{stream_summary:{have_records_streamed:this._haveRecordStreamed,pulled:this._pulled,has_keys:this._fieldKeys.length>0}},t));if(![void 0,null,"r","w","rw","s"].includes(o.type)){this.onError((0,rt.newError)(`Server returned invalid query type. Expected one of [undefined, null, "r", "w", "rw", "s"] but got '`.concat(o.type,"'"),Hr));return}this._setState(jt.SUCCEEDED);var i=null;this._beforeComplete&&(i=this._beforeComplete(o));var a=function(){n._tail=o,n._observers.some(function(s){return s.onCompleted})&&n._observers.forEach(function(s){s.onCompleted&&s.onCompleted(o)}),n._afterComplete&&n._afterComplete(o)};i?Promise.resolve(i).then(function(){return a()}):a()},r.prototype._handleRunSuccess=function(t,n){var o=this;if(this._fieldKeys===null){if(this._fieldKeys=[],this._fieldLookup={},t.fields&&t.fields.length>0){this._fieldKeys=t.fields;for(var i=0;i<t.fields.length;i++)this._fieldLookup[t.fields[i]]=i}t.db!==null&&this._onDb!==void 0&&this._onDb(t.db),t.fields!=null&&delete t.fields,t.qid!==null&&t.qid!==void 0&&(this._queryId=t.qid,delete t.qid),this._storeMetadataForCompletion(t);var a=null;this._beforeKeys&&(a=this._beforeKeys(this._fieldKeys));var s=function(){o._head=o._fieldKeys,o._observers.some(function(c){return c.onKeys})&&o._observers.forEach(function(c){c.onKeys&&c.onKeys(o._fieldKeys)}),o._afterKeys&&o._afterKeys(o._fieldKeys),n()};a?Promise.resolve(a).then(function(){return s()}):s()}},r.prototype._handleError=function(t){var n=this;this._setState(jt.FAILED),this._error=t;var o=null;this._beforeError&&(o=this._beforeError(t));var i=function(){n._observers.some(function(a){return a.onError})&&n._observers.forEach(function(a){a.onError&&a.onError(t)}),n._afterError&&n._afterError(t)};o?Promise.resolve(o).then(function(){return i()}):i()},r.prototype._handleStreaming=function(){this._head&&this._observers.some(function(t){return t.onNext||t.onCompleted})&&!this._paused&&(this._discard||this._autoPull)&&this._more()},r.prototype._more=function(){this._discard?this._discardFunction(this._queryId,this):(this._pulled=!0,this._moreFunction(this._queryId,this._fetchSize,this)),this._setState(jt.STREAMING)},r.prototype._storeMetadataForCompletion=function(t){for(var n=Object.keys(t),o=n.length,i="";o--;)i=n[o],this._meta[i]=t[i]},r.prototype._setState=function(t){this._state=t},r.prototype._setupAutoPull=function(){this._autoPull=!0},r}(lo);ae.ResultStreamObserver=Df;var bz=function(e){Er(r,e);function r(t){var n=t===void 0?{}:t,o=n.onError,i=n.onCompleted,a=e.call(this)||this;return a._onError=o,a._onCompleted=i,a}return r.prototype.onNext=function(t){this.onError((0,rt.newError)("Received RECORD when initializing "+rt.json.stringify(t)))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(lo);ae.LoginObserver=bz;var mz=function(e){Er(r,e);function r(t){var n=t===void 0?{}:t,o=n.onError,i=n.onCompleted,a=e.call(this)||this;return a._onError=o,a._onCompleted=i,a}return r.prototype.onNext=function(t){this.onError((0,rt.newError)("Received RECORD when logging off "+rt.json.stringify(t)))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(lo);ae.LogoffObserver=mz;var gz=function(e){Er(r,e);function r(t){var n=t===void 0?{}:t,o=n.onProtocolError,i=n.onError,a=n.onComplete,s=e.call(this)||this;return s._onProtocolError=o,s._onError=i,s._onComplete=a,s}return r.prototype.onNext=function(t){this.onError((0,rt.newError)("Received RECORD when resetting: received record is: "+rt.json.stringify(t),Hr))},r.prototype.onError=function(t){t.code===Hr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onComplete&&this._onComplete(t)},r}(lo);ae.ResetObserver=gz;var wz=function(e){Er(r,e);function r(t){var n=t===void 0?{}:t,o=n.onError,i=n.onCompleted,a=e.call(this)||this;return a._onError=o,a._onCompleted=i,a}return r.prototype.onNext=function(t){this.onError((0,rt.newError)("Received RECORD when sending telemetry "+rt.json.stringify(t),Hr))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(Df);ae.TelemetryObserver=wz;var Oz=function(e){Er(r,e);function r(t){var n=t.error,o=t.onError,i=e.call(this,{beforeError:o})||this;return i.onError(n),i}return r}(Df);ae.FailedObserver=Oz;var Ez=function(e){Er(r,e);function r(){var t=e.call(this)||this;return e.prototype.markCompleted.call(t),t}return r}(Df);ae.CompletedObserver=Ez;var Sz=function(e){Er(r,e);function r(t){var n=t.resultObserver,o=t.onProtocolError,i=t.onError,a=t.onCompleted,s=e.call(this)||this;return s._resultObserver=n,s._onError=i,s._onCompleted=a,s._records=[],s._onProtocolError=o,n.subscribe(s),s}return r.prototype.onNext=function(t){this._records.push(t)},r.prototype.onError=function(t){t.code===Hr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(){if(this._records!==null&&this._records.length!==1){this.onError((0,rt.newError)("Illegal response from router. Received "+this._records.length+` records but expected only one.
`+rt.json.stringify(this._records),Hr));return}this._onCompleted&&this._onCompleted(x1.default.ofRecord(this._records[0]))},r}(lo);ae.ProcedureRouteObserver=Sz;var Pz=function(e){Er(r,e);function r(t){var n=t===void 0?{}:t,o=n.onProtocolError,i=n.onError,a=n.onCompleted,s=e.call(this)||this;return s._onProtocolError=o,s._onError=i,s._onCompleted=a,s}return r.prototype.onNext=function(t){this.onError((0,rt.newError)("Received RECORD when resetting: received record is: "+rt.json.stringify(t),Hr))},r.prototype.onError=function(t){t.code===Hr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(x1.default.ofMessageResponse(t))},r}(lo);ae.RouteObserver=Pz;var jt={READY_STREAMING:{onSuccess:function(e,r){e._handleRunSuccess(r,function(){e._setState(jt.STREAMING)})},onError:function(e,r){e._handleError(r)},name:function(){return"READY_STREAMING"},pull:function(){}},READY:{onSuccess:function(e,r){e._handleRunSuccess(r,function(){return e._handleStreaming()})},onError:function(e,r){e._handleError(r)},name:function(){return"READY"},pull:function(e){return e._more()}},STREAMING:{onSuccess:function(e,r){r.has_more?e._handleHasMore(r):e._handlePullSuccess(r)},onError:function(e,r){e._handleError(r)},name:function(){return"STREAMING"},pull:function(){}},FAILED:{onError:function(e){},name:function(){return"FAILED"},pull:function(){}},SUCCEEDED:{name:function(){return"SUCCEEDED"},pull:function(){}}};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.assertNotificationFilterIsEmpty=Ve.assertImpersonatedUserIsEmpty=Ve.assertTxConfigIsEmpty=Ve.assertDatabaseIsEmpty=void 0;var Ra=Y;function Tz(e,r,t){if(r===void 0&&(r=function(){}),e&&!e.isEmpty()){var n=(0,Ra.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw r(n.message),t.onError(n),n}}Ve.assertTxConfigIsEmpty=Tz;function Cz(e,r,t){if(r===void 0&&(r=function(){}),e){var n=(0,Ra.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw r(n.message),t.onError(n),n}}Ve.assertDatabaseIsEmpty=Cz;function Az(e,r,t){if(r===void 0&&(r=function(){}),e){var n=(0,Ra.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+"Trying to impersonate ".concat(e,"."));throw r(n.message),t.onError(n),n}}Ve.assertImpersonatedUserIsEmpty=Az;function Iz(e,r,t){if(r===void 0&&(r=function(){}),e!==void 0){var n=(0,Ra.newError)("Driver is connected to a database that does not support user notification filters. Please upgrade to Neo4j 5.7.0 or later in order to use this functionality. "+"Trying to set notifications to ".concat(Ra.json.stringify(e),"."));throw r(n.message),t.onError(n),n}}Ve.assertNotificationFilterIsEmpty=Iz;var tt={},Hn={},qr={};Object.defineProperty(qr,"__esModule",{value:!0});qr.verifyStructSize=qr.Structure=void 0;var V1=Y,Rz=V1.error.PROTOCOL_ERROR,W1=function(){function e(r,t){this.signature=r,this.fields=t}return Object.defineProperty(e.prototype,"size",{get:function(){return this.fields.length},enumerable:!1,configurable:!0}),e.prototype.toString=function(){for(var r="",t=0;t<this.fields.length;t++)t>0&&(r+=", "),r+=this.fields[t];return"Structure("+this.signature+", ["+r+"])"},e}();qr.Structure=W1;function $z(e,r,t){if(r!==t)throw(0,V1.newError)("Wrong struct size for ".concat(e,", expected ").concat(r," but was ").concat(t),Rz)}qr.verifyStructSize=$z;qr.default=W1;Object.defineProperty(Hn,"__esModule",{value:!0});Hn.Unpacker=Hn.Packer=void 0;var ia=so,z1=tr,H1=qr,Ie=Y,jz=Ie.error.PROTOCOL_ERROR,q1=128,G1=144,K1=160,Y1=176,Z1=192,Q1=193,X1=194,J1=195,eE=200,tE=201,rE=202,nE=203,oE=208,iE=209,aE=210,uE=212,sE=213,cE=214,lE=204,fE=205,dE=206,hE=216,pE=217,vE=218,_E=220,yE=221,Nz=function(){function e(r){this._ch=r,this._byteArraysSupported=!0}return e.prototype.packable=function(r,t){var n=this;t===void 0&&(t=z1.functional.identity);try{r=t(r)}catch(a){return function(){throw a}}if(r===null)return function(){return n._ch.writeUInt8(Z1)};if(r===!0)return function(){return n._ch.writeUInt8(J1)};if(r===!1)return function(){return n._ch.writeUInt8(X1)};if(typeof r=="number")return function(){return n.packFloat(r)};if(typeof r=="string")return function(){return n.packString(r)};if(typeof r=="bigint")return function(){return n.packInteger((0,Ie.int)(r))};if((0,Ie.isInt)(r))return function(){return n.packInteger(r)};if(r instanceof Int8Array)return function(){return n.packBytes(r)};if(r instanceof Array)return function(){n.packListHeader(r.length);for(var a=0;a<r.length;a++)n.packable(r[a]===void 0?null:r[a],t)()};if(Mz(r))return this.packableIterable(r,t);if(r instanceof H1.Structure){for(var o=[],i=0;i<r.fields.length;i++)o[i]=this.packable(r.fields[i],t);return function(){return n.packStruct(r.signature,o)}}else return typeof r=="object"?function(){for(var a=Object.keys(r),s=0,c=0;c<a.length;c++)r[a[c]]!==void 0&&s++;n.packMapHeader(s);for(var c=0;c<a.length;c++){var u=a[c];r[u]!==void 0&&(n.packString(u),n.packable(r[u],t)())}}:this._nonPackableValue("Unable to pack the given value: ".concat(r))},e.prototype.packableIterable=function(r,t){try{var n=Array.from(r);return this.packable(n,t)}catch(o){throw(0,Ie.newError)("Cannot pack given iterable, ".concat(o.message,": ").concat(r))}},e.prototype.packStruct=function(r,t){t=t||[],this.packStructHeader(t.length,r);for(var n=0;n<t.length;n++)t[n]()},e.prototype.packInteger=function(r){var t=r.high,n=r.low;r.greaterThanOrEqual(-16)&&r.lessThan(128)?this._ch.writeInt8(n):r.greaterThanOrEqual(-128)&&r.lessThan(-16)?(this._ch.writeUInt8(eE),this._ch.writeInt8(n)):r.greaterThanOrEqual(-32768)&&r.lessThan(32768)?(this._ch.writeUInt8(tE),this._ch.writeInt16(n)):r.greaterThanOrEqual(-2147483648)&&r.lessThan(2147483648)?(this._ch.writeUInt8(rE),this._ch.writeInt32(n)):(this._ch.writeUInt8(nE),this._ch.writeInt32(t),this._ch.writeInt32(n))},e.prototype.packFloat=function(r){this._ch.writeUInt8(Q1),this._ch.writeFloat64(r)},e.prototype.packString=function(r){var t=ia.utf8.encode(r),n=t.length;if(n<16)this._ch.writeUInt8(q1|n),this._ch.writeBytes(t);else if(n<256)this._ch.writeUInt8(oE),this._ch.writeUInt8(n),this._ch.writeBytes(t);else if(n<65536)this._ch.writeUInt8(iE),this._ch.writeUInt8(n/256>>0),this._ch.writeUInt8(n%256),this._ch.writeBytes(t);else if(n<4294967296)this._ch.writeUInt8(aE),this._ch.writeUInt8((n/16777216>>0)%256),this._ch.writeUInt8((n/65536>>0)%256),this._ch.writeUInt8((n/256>>0)%256),this._ch.writeUInt8(n%256),this._ch.writeBytes(t);else throw(0,Ie.newError)("UTF-8 strings of size "+n+" are not supported")},e.prototype.packListHeader=function(r){if(r<16)this._ch.writeUInt8(G1|r);else if(r<256)this._ch.writeUInt8(uE),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(sE),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(cE),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Ie.newError)("Lists of size "+r+" are not supported")},e.prototype.packBytes=function(r){if(this._byteArraysSupported){this.packBytesHeader(r.length);for(var t=0;t<r.length;t++)this._ch.writeInt8(r[t])}else throw(0,Ie.newError)("Byte arrays are not supported by the database this driver is connected to")},e.prototype.packBytesHeader=function(r){if(r<256)this._ch.writeUInt8(lE),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(fE),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(dE),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Ie.newError)("Byte arrays of size "+r+" are not supported")},e.prototype.packMapHeader=function(r){if(r<16)this._ch.writeUInt8(K1|r);else if(r<256)this._ch.writeUInt8(hE),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(pE),this._ch.writeUInt8(r/256>>0),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(vE),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Ie.newError)("Maps of size "+r+" are not supported")},e.prototype.packStructHeader=function(r,t){if(r<16)this._ch.writeUInt8(Y1|r),this._ch.writeUInt8(t);else if(r<256)this._ch.writeUInt8(_E),this._ch.writeUInt8(r),this._ch.writeUInt8(t);else if(r<65536)this._ch.writeUInt8(yE),this._ch.writeUInt8(r/256>>0),this._ch.writeUInt8(r%256);else throw(0,Ie.newError)("Structures of size "+r+" are not supported")},e.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},e.prototype._nonPackableValue=function(r){return function(){throw(0,Ie.newError)(r,jz)}},e}();Hn.Packer=Nz;var kz=function(){function e(r,t){r===void 0&&(r=!1),t===void 0&&(t=!1),this._disableLosslessIntegers=r,this._useBigInt=t}return e.prototype.unpack=function(r,t){t===void 0&&(t=z1.functional.identity);var n=r.readUInt8(),o=n&240,i=n&15;if(n===Z1)return null;var a=this._unpackBoolean(n);if(a!==null)return a;var s=this._unpackNumberOrInteger(n,r);if(s!==null){if((0,Ie.isInt)(s)){if(this._useBigInt)return s.toBigInt();if(this._disableLosslessIntegers)return s.toNumberOrInfinity()}return s}var c=this._unpackString(n,o,i,r);if(c!==null)return c;var u=this._unpackList(n,o,i,r,t);if(u!==null)return u;var l=this._unpackByteArray(n,r);if(l!==null)return l;var d=this._unpackMap(n,o,i,r,t);if(d!==null)return d;var h=this._unpackStruct(n,o,i,r,t);if(h!==null)return h;throw(0,Ie.newError)("Unknown packed value with marker "+n.toString(16))},e.prototype.unpackInteger=function(r){var t=r.readUInt8(),n=this._unpackInteger(t,r);if(n==null)throw(0,Ie.newError)("Unable to unpack integer value with marker "+t.toString(16));return n},e.prototype._unpackBoolean=function(r){return r===J1?!0:r===X1?!1:null},e.prototype._unpackNumberOrInteger=function(r,t){return r===Q1?t.readFloat64():this._unpackInteger(r,t)},e.prototype._unpackInteger=function(r,t){if(r>=0&&r<128)return(0,Ie.int)(r);if(r>=240&&r<256)return(0,Ie.int)(r-256);if(r===eE)return(0,Ie.int)(t.readInt8());if(r===tE)return(0,Ie.int)(t.readInt16());if(r===rE){var n=t.readInt32();return(0,Ie.int)(n)}else if(r===nE){var o=t.readInt32(),i=t.readInt32();return new Ie.Integer(i,o)}else return null},e.prototype._unpackString=function(r,t,n,o){return t===q1?ia.utf8.decode(o,n):r===oE?ia.utf8.decode(o,o.readUInt8()):r===iE?ia.utf8.decode(o,o.readUInt16()):r===aE?ia.utf8.decode(o,o.readUInt32()):null},e.prototype._unpackList=function(r,t,n,o,i){return t===G1?this._unpackListWithSize(n,o,i):r===uE?this._unpackListWithSize(o.readUInt8(),o,i):r===sE?this._unpackListWithSize(o.readUInt16(),o,i):r===cE?this._unpackListWithSize(o.readUInt32(),o,i):null},e.prototype._unpackListWithSize=function(r,t,n){for(var o=[],i=0;i<r;i++)o.push(this.unpack(t,n));return o},e.prototype._unpackByteArray=function(r,t){return r===lE?this._unpackByteArrayWithSize(t.readUInt8(),t):r===fE?this._unpackByteArrayWithSize(t.readUInt16(),t):r===dE?this._unpackByteArrayWithSize(t.readUInt32(),t):null},e.prototype._unpackByteArrayWithSize=function(r,t){for(var n=new Int8Array(r),o=0;o<r;o++)n[o]=t.readInt8();return n},e.prototype._unpackMap=function(r,t,n,o,i){return t===K1?this._unpackMapWithSize(n,o,i):r===hE?this._unpackMapWithSize(o.readUInt8(),o,i):r===pE?this._unpackMapWithSize(o.readUInt16(),o,i):r===vE?this._unpackMapWithSize(o.readUInt32(),o,i):null},e.prototype._unpackMapWithSize=function(r,t,n){for(var o={},i=0;i<r;i++){var a=this.unpack(t,n);o[a]=this.unpack(t,n)}return o},e.prototype._unpackStruct=function(r,t,n,o,i){return t===Y1?this._unpackStructWithSize(n,o,i):r===_E?this._unpackStructWithSize(o.readUInt8(),o,i):r===yE?this._unpackStructWithSize(o.readUInt16(),o,i):null},e.prototype._unpackStructWithSize=function(r,t,n){for(var o=t.readUInt8(),i=new H1.Structure(o,[]),a=0;a<r;a++)i.fields.push(this.unpack(t,n));return n(i)},e}();Hn.Unpacker=kz;function Mz(e){return e==null?!1:typeof e[Symbol.iterator]=="function"}var xo={},bE=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Dz=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Lz=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Uz=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Dz(r,e,t);return Lz(r,e),r};Object.defineProperty(xo,"__esModule",{value:!0});xo.Unpacker=xo.Packer=void 0;var mE=Uz(Hn),Fz=function(e){bE(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},r}(mE.Packer);xo.Packer=Fz;var Bz=function(e){bE(r,e);function r(t,n){return t===void 0&&(t=!1),n===void 0&&(n=!1),e.call(this,t,n)||this}return r}(mE.Unpacker);xo.Unpacker=Bz;var xz=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Vz=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),ay=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&xz(r,e,t);return Vz(r,e),r};Object.defineProperty(tt,"__esModule",{value:!0});tt.structure=tt.v2=tt.v1=void 0;var Wz=ay(Hn);tt.v1=Wz;var gE=ay(xo);tt.v2=gE;var zz=ay(qr);tt.structure=zz;tt.default=gE;var He={};Object.defineProperty(He,"__esModule",{value:!0});He.SIGNATURES=void 0;var Oe=Y,wE=Oe.internal.constants,Hz=wE.ACCESS_MODE_READ,dc=wE.FETCH_ALL,bg=Oe.internal.util.assertString,OE=1,EE=15,Uc=16,SE=63,mo=1,PE=2,Sv=17,TE=18,CE=19,AE=84,Pv=102,IE=106,RE=107,$E=47,jE=63,qz="r",aa=-1,Gz=Object.freeze({INIT:OE,RESET:EE,RUN:Uc,PULL_ALL:SE,HELLO:mo,GOODBYE:PE,BEGIN:Sv,COMMIT:TE,ROLLBACK:CE,TELEMETRY:AE,ROUTE:Pv,LOGON:IE,LOGOFF:RE,DISCARD:$E,PULL:jE});He.SIGNATURES=Gz;var ji=function(){function e(r,t,n){this.signature=r,this.fields=t,this.toString=n}return e.init=function(r,t){return new e(OE,[r,t],function(){return"INIT ".concat(r," {...}")})},e.run=function(r,t){return new e(Uc,[r,t],function(){return"RUN ".concat(r," ").concat(Oe.json.stringify(t))})},e.pullAll=function(){return Kz},e.reset=function(){return Yz},e.hello=function(r,t,n,o){n===void 0&&(n=null),o===void 0&&(o=null);var i=Object.assign({user_agent:r},t);return n&&(i.routing=n),o&&(i.patch_bolt=o),new e(mo,[i],function(){return"HELLO {user_agent: '".concat(r,"', ...}")})},e.hello5x1=function(r,t){t===void 0&&(t=null);var n={user_agent:r};return t&&(n.routing=t),new e(mo,[n],function(){return"HELLO {user_agent: '".concat(r,"', ...}")})},e.hello5x2=function(r,t,n){t===void 0&&(t=null),n===void 0&&(n=null);var o={user_agent:r};return Tv(o,t),n&&(o.routing=n),new e(mo,[o],function(){return"HELLO ".concat(Oe.json.stringify(o))})},e.hello5x3=function(r,t,n,o){n===void 0&&(n=null),o===void 0&&(o=null);var i={};return r&&(i.user_agent=r),t&&(i.bolt_agent={product:t.product,platform:t.platform,language:t.language,language_details:t.languageDetails}),Tv(i,n),o&&(i.routing=o),new e(mo,[i],function(){return"HELLO ".concat(Oe.json.stringify(i))})},e.hello5x5=function(r,t,n,o){n===void 0&&(n=null),o===void 0&&(o=null);var i={};return r&&(i.user_agent=r),t&&(i.bolt_agent={product:t.product,platform:t.platform,language:t.language,language_details:t.languageDetails}),gp(i,n),o&&(i.routing=o),new e(mo,[i],function(){return"HELLO ".concat(Oe.json.stringify(i))})},e.logon=function(r){return new e(IE,[r],function(){return"LOGON { ... }"})},e.logoff=function(){return new e(RE,[],function(){return"LOGOFF"})},e.begin=function(r){var t=r===void 0?{}:r,n=t.bookmarks,o=t.txConfig,i=t.database,a=t.mode,s=t.impersonatedUser,c=t.notificationFilter,u=hc(n,o,i,a,s,c);return new e(Sv,[u],function(){return"BEGIN ".concat(Oe.json.stringify(u))})},e.begin5x5=function(r){var t=r===void 0?{}:r,n=t.bookmarks,o=t.txConfig,i=t.database,a=t.mode,s=t.impersonatedUser,c=t.notificationFilter,u=hc(n,o,i,a,s,c,{appendNotificationFilter:gp});return new e(Sv,[u],function(){return"BEGIN ".concat(Oe.json.stringify(u))})},e.commit=function(){return Zz},e.rollback=function(){return Qz},e.runWithMetadata=function(r,t,n){var o=n===void 0?{}:n,i=o.bookmarks,a=o.txConfig,s=o.database,c=o.mode,u=o.impersonatedUser,l=o.notificationFilter,d=hc(i,a,s,c,u,l);return new e(Uc,[r,t,d],function(){return"RUN ".concat(r," ").concat(Oe.json.stringify(t)," ").concat(Oe.json.stringify(d))})},e.runWithMetadata5x5=function(r,t,n){var o=n===void 0?{}:n,i=o.bookmarks,a=o.txConfig,s=o.database,c=o.mode,u=o.impersonatedUser,l=o.notificationFilter,d=hc(i,a,s,c,u,l,{appendNotificationFilter:gp});return new e(Uc,[r,t,d],function(){return"RUN ".concat(r," ").concat(Oe.json.stringify(t)," ").concat(Oe.json.stringify(d))})},e.goodbye=function(){return Xz},e.pull=function(r){var t=r===void 0?{}:r,n=t.stmtId,o=n===void 0?aa:n,i=t.n,a=i===void 0?dc:i,s=mg(o??aa,a||dc);return new e(jE,[s],function(){return"PULL ".concat(Oe.json.stringify(s))})},e.discard=function(r){var t=r===void 0?{}:r,n=t.stmtId,o=n===void 0?aa:n,i=t.n,a=i===void 0?dc:i,s=mg(o??aa,a||dc);return new e($E,[s],function(){return"DISCARD ".concat(Oe.json.stringify(s))})},e.telemetry=function(r){var t=r.api,n=(0,Oe.int)(t);return new e(AE,[n],function(){return"TELEMETRY ".concat(n.toString())})},e.route=function(r,t,n){return r===void 0&&(r={}),t===void 0&&(t=[]),n===void 0&&(n=null),new e(Pv,[r,t,n],function(){return"ROUTE ".concat(Oe.json.stringify(r)," ").concat(Oe.json.stringify(t)," ").concat(n)})},e.routeV4x4=function(r,t,n){r===void 0&&(r={}),t===void 0&&(t=[]),n===void 0&&(n={});var o={};return n.databaseName&&(o.db=n.databaseName),n.impersonatedUser&&(o.imp_user=n.impersonatedUser),new e(Pv,[r,t,o],function(){return"ROUTE ".concat(Oe.json.stringify(r)," ").concat(Oe.json.stringify(t)," ").concat(Oe.json.stringify(o))})},e}();He.default=ji;function hc(e,r,t,n,o,i,a){var s;a===void 0&&(a={});var c={};e.isEmpty()||(c.bookmarks=e.values()),r.timeout!==null&&(c.tx_timeout=r.timeout),r.metadata&&(c.tx_metadata=r.metadata),t&&(c.db=bg(t,"database")),o&&(c.imp_user=bg(o,"impersonatedUser")),n===Hz&&(c.mode=qz);var u=(s=a.appendNotificationFilter)!==null&&s!==void 0?s:Tv;return u(c,i),c}function mg(e,r){var t={n:(0,Oe.int)(r)};return e!==aa&&(t.qid=(0,Oe.int)(e)),t}function Tv(e,r){r&&(r.minimumSeverityLevel&&(e.notifications_minimum_severity=r.minimumSeverityLevel),r.disabledCategories&&(e.notifications_disabled_categories=r.disabledCategories),r.disabledClassifications&&(e.notifications_disabled_categories=r.disabledClassifications))}function gp(e,r){r&&(r.minimumSeverityLevel&&(e.notifications_minimum_severity=r.minimumSeverityLevel),r.disabledCategories&&(e.notifications_disabled_classifications=r.disabledCategories),r.disabledClassifications&&(e.notifications_disabled_classifications=r.disabledClassifications))}var Kz=new ji(SE,[],function(){return"PULL_ALL"}),Yz=new ji(EE,[],function(){return"RESET"}),Zz=new ji(TE,[],function(){return"COMMIT"}),Qz=new ji(CE,[],function(){return"ROLLBACK"}),Xz=new ji(PE,[],function(){return"GOODBYE"}),Lf={},ge={};Object.defineProperty(ge,"__esModule",{value:!0});ge.TypeTransformer=void 0;var Jz=tt,e7=Y,t7=e7.internal.objectUtil,r7=function(){function e(r){this._transformers=r,this._transformersPerSignature=new Map(r.map(function(t){return[t.signature,t]})),this.fromStructure=this.fromStructure.bind(this),this.toStructure=this.toStructure.bind(this),Object.freeze(this)}return e.prototype.fromStructure=function(r){try{if(r instanceof Jz.structure.Structure&&this._transformersPerSignature.has(r.signature)){var t=this._transformersPerSignature.get(r.signature).fromStructure;return t(r)}return r}catch(n){return t7.createBrokenObject(n)}},e.prototype.toStructure=function(r){var t=this._transformers.find(function(n){var o=n.isTypeInstance;return o(r)});return t!==void 0?t.toStructure(r):r},e}();ge.default=r7;var n7=function(){function e(r){var t=r.signature,n=r.fromStructure,o=r.toStructure,i=r.isTypeInstance;this.signature=t,this.isTypeInstance=i,this.fromStructure=n,this.toStructure=o,Object.freeze(this)}return e.prototype.extendsWith=function(r){var t=r.signature,n=r.fromStructure,o=r.toStructure,i=r.isTypeInstance;return new e({signature:t||this.signature,fromStructure:n||this.fromStructure,toStructure:o||this.toStructure,isTypeInstance:i||this.isTypeInstance})},e}();ge.TypeTransformer=n7;var Uf=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(Lf,"__esModule",{value:!0});var Ue=Y,Ff=tt,Bf=ge,xf=Ue.error.PROTOCOL_ERROR,o7=78,i7=3,a7=82,u7=5,s7=114,c7=3,l7=80,f7=3;function d7(){return new Bf.TypeTransformer({signature:o7,isTypeInstance:function(e){return e instanceof Ue.Node},toStructure:function(e){throw(0,Ue.newError)("It is not allowed to pass nodes in query parameters, given: ".concat(e),xf)},fromStructure:function(e){Ff.structure.verifyStructSize("Node",i7,e.size);var r=Uf(e.fields,3),t=r[0],n=r[1],o=r[2];return new Ue.Node(t,n,o)}})}function h7(){return new Bf.TypeTransformer({signature:a7,isTypeInstance:function(e){return e instanceof Ue.Relationship},toStructure:function(e){throw(0,Ue.newError)("It is not allowed to pass relationships in query parameters, given: ".concat(e),xf)},fromStructure:function(e){Ff.structure.verifyStructSize("Relationship",u7,e.size);var r=Uf(e.fields,5),t=r[0],n=r[1],o=r[2],i=r[3],a=r[4];return new Ue.Relationship(t,n,o,i,a)}})}function p7(){return new Bf.TypeTransformer({signature:s7,isTypeInstance:function(e){return e instanceof Ue.UnboundRelationship},toStructure:function(e){throw(0,Ue.newError)("It is not allowed to pass unbound relationships in query parameters, given: ".concat(e),xf)},fromStructure:function(e){Ff.structure.verifyStructSize("UnboundRelationship",c7,e.size);var r=Uf(e.fields,3),t=r[0],n=r[1],o=r[2];return new Ue.UnboundRelationship(t,n,o)}})}function v7(){return new Bf.TypeTransformer({signature:l7,isTypeInstance:function(e){return e instanceof Ue.Path},toStructure:function(e){throw(0,Ue.newError)("It is not allowed to pass paths in query parameters, given: ".concat(e),xf)},fromStructure:function(e){Ff.structure.verifyStructSize("Path",f7,e.size);for(var r=Uf(e.fields,3),t=r[0],n=r[1],o=r[2],i=[],a=t[0],s=0;s<o.length;s+=2){var c=t[o[s+1]],u=(0,Ue.toNumber)(o[s]),l=void 0;u>0?(l=n[u-1],l instanceof Ue.UnboundRelationship&&(n[u-1]=l=l.bindTo(a,c))):(l=n[-u-1],l instanceof Ue.UnboundRelationship&&(n[-u-1]=l=l.bindTo(c,a))),i.push(new Ue.PathSegment(a,l,c)),a=c}return new Ue.Path(t[0],t[t.length-1],i)}})}Lf.default={createNodeTransformer:d7,createRelationshipTransformer:h7,createUnboundRelationshipTransformer:p7,createPathTransformer:v7};var wo=f&&f.__assign||function(){return wo=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},wo.apply(this,arguments)},_7=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),y7=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),b7=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&_7(r,e,t);return y7(r,e),r},NE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jf,"__esModule",{value:!0});var Yi=Ve,wp=tt,mn=b7(He),yo=ae,Vo=Y,m7=NE(Lf),g7=NE(ge),gg=Vo.internal.bookmarks.Bookmarks,kE=Vo.internal.constants,wg=kE.ACCESS_MODE_WRITE,w7=kE.BOLT_PROTOCOL_V1;Vo.internal.logger.Logger;var Og=Vo.internal.txConfig.TxConfig,O7=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),E7=function(){function e(r,t,n,o,i,a){var s=n===void 0?{}:n,c=s.disableLosslessIntegers,u=s.useBigInt;o===void 0&&(o=function(){return null}),this._server=r||{},this._chunker=t,this._packer=this._createPacker(t),this._unpacker=this._createUnpacker(c,u),this._responseHandler=o(this),this._log=i,this._onProtocolError=a,this._fatalError=null,this._lastMessageSignature=null,this._config={disableLosslessIntegers:c,useBigInt:u}}return Object.defineProperty(e.prototype,"transformer",{get:function(){var r=this;return this._transformer===void 0&&(this._transformer=new g7.default(Object.values(m7.default).map(function(t){return t(r._config,r._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return w7},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportsReAuth",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initialized",{get:function(){return!!this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authToken",{get:function(){return this._authToken},enumerable:!1,configurable:!0}),e.prototype.packer=function(){return this._packer},e.prototype.packable=function(r){return this._packer.packable(r,this.transformer.toStructure)},e.prototype.unpacker=function(){return this._unpacker},e.prototype.unpack=function(r){return this._unpacker.unpack(r,this.transformer.fromStructure)},e.prototype.transformMetadata=function(r){return r},e.prototype.enrichErrorMetadata=function(r){return wo(wo({},r),{diagnostic_record:r.diagnostic_record!==null?wo(wo({},O7),r.diagnostic_record):null})},e.prototype.initialize=function(r){var t=this,n=r===void 0?{}:r,o=n.userAgent;n.boltAgent;var i=n.authToken,a=n.notificationFilter,s=n.onError,c=n.onComplete,u=new yo.LoginObserver({onError:function(l){return t._onLoginError(l,s)},onCompleted:function(l){return t._onLoginCompleted(l,c)}});return(0,Yi.assertNotificationFilterIsEmpty)(a,this._onProtocolError,u),this.write(mn.default.init(o,i),u,!0),u},e.prototype.logoff=function(r){var t=r===void 0?{}:r,n=t.onComplete,o=t.onError;t.flush;var i=new yo.LogoffObserver({onCompleted:n,onError:o}),a=(0,Vo.newError)("Driver is connected to a database that does not support logoff. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(a.message),i.onError(a),a},e.prototype.logon=function(r){var t=this,n=r===void 0?{}:r,o=n.authToken,i=n.onComplete,a=n.onError;n.flush;var s=new yo.LoginObserver({onCompleted:function(){return t._onLoginCompleted({},o,i)},onError:function(u){return t._onLoginError(u,a)}}),c=(0,Vo.newError)("Driver is connected to a database that does not support logon. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(c.message),s.onError(c),c},e.prototype.prepareToClose=function(){},e.prototype.beginTransaction=function(r){var t=r===void 0?{}:r,n=t.bookmarks,o=t.txConfig,i=t.database,a=t.mode,s=t.impersonatedUser,c=t.notificationFilter,u=t.beforeError,l=t.afterError,d=t.beforeComplete,h=t.afterComplete;return this.run("BEGIN",n?n.asBeginTransactionParameters():{},{bookmarks:n,txConfig:o,database:i,mode:a,impersonatedUser:s,notificationFilter:c,beforeError:u,afterError:l,beforeComplete:d,afterComplete:h,flush:!1})},e.prototype.commitTransaction=function(r){var t=r===void 0?{}:r,n=t.beforeError,o=t.afterError,i=t.beforeComplete,a=t.afterComplete;return this.run("COMMIT",{},{bookmarks:gg.empty(),txConfig:Og.empty(),mode:wg,beforeError:n,afterError:o,beforeComplete:i,afterComplete:a})},e.prototype.rollbackTransaction=function(r){var t=r===void 0?{}:r,n=t.beforeError,o=t.afterError,i=t.beforeComplete,a=t.afterComplete;return this.run("ROLLBACK",{},{bookmarks:gg.empty(),txConfig:Og.empty(),mode:wg,beforeError:n,afterError:o,beforeComplete:i,afterComplete:a})},e.prototype.run=function(r,t,n){var o=n===void 0?{}:n;o.bookmarks;var i=o.txConfig,a=o.database;o.mode;var s=o.impersonatedUser,c=o.notificationFilter,u=o.beforeKeys,l=o.afterKeys,d=o.beforeError,h=o.afterError,p=o.beforeComplete,v=o.afterComplete,y=o.flush,_=y===void 0?!0:y,b=o.highRecordWatermark,w=b===void 0?Number.MAX_VALUE:b,S=o.lowRecordWatermark,E=S===void 0?Number.MAX_VALUE:S,P=new yo.ResultStreamObserver({server:this._server,beforeKeys:u,afterKeys:l,beforeError:d,afterError:h,beforeComplete:p,afterComplete:v,highRecordWatermark:w,lowRecordWatermark:E});return(0,Yi.assertTxConfigIsEmpty)(i,this._onProtocolError,P),(0,Yi.assertDatabaseIsEmpty)(a,this._onProtocolError,P),(0,Yi.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,P),(0,Yi.assertNotificationFilterIsEmpty)(c,this._onProtocolError,P),this.write(mn.default.run(r,t),P,!1),this.write(mn.default.pullAll(),P,_),P},Object.defineProperty(e.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),e.prototype.reset=function(r){var t=r===void 0?{}:r,n=t.onError,o=t.onComplete,i=new yo.ResetObserver({onProtocolError:this._onProtocolError,onError:n,onComplete:o});return this.write(mn.default.reset(),i,!0),i},e.prototype.telemetry=function(r,t){r.api;var n=t===void 0?{}:t;n.onError;var o=n.onCompleted,i=new yo.CompletedObserver;return o&&o(),i},e.prototype._createPacker=function(r){return new wp.v1.Packer(r)},e.prototype._createUnpacker=function(r,t){return new wp.v1.Unpacker(r,t)},e.prototype.write=function(r,t,n){var o=this.queueObserverIfProtocolIsNotBroken(t);if(o){this._log.isDebugEnabled()&&this._log.debug("C: ".concat(r)),this._lastMessageSignature=r.signature;var i=new wp.structure.Structure(r.signature,r.fields);this.packable(i)(),this._chunker.messageBoundary(),n&&this._chunker.flush()}},e.prototype.isLastMessageLogon=function(){return this._lastMessageSignature===mn.SIGNATURES.HELLO||this._lastMessageSignature===mn.SIGNATURES.LOGON},e.prototype.isLastMessageReset=function(){return this._lastMessageSignature===mn.SIGNATURES.RESET},e.prototype.notifyFatalError=function(r){return this._fatalError=r,this._responseHandler._notifyErrorToObservers(r)},e.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},e.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},e.prototype.queueObserverIfProtocolIsNotBroken=function(r){return this.isBroken()?(this.notifyFatalErrorToObserver(r),!1):this._responseHandler._queueObserver(r)},e.prototype.isBroken=function(){return!!this._fatalError},e.prototype.notifyFatalErrorToObserver=function(r){r&&r.onError&&r.onError(this._fatalError)},e.prototype.resetFailure=function(){this._responseHandler._resetFailure()},e.prototype._onLoginCompleted=function(r,t,n){if(this._initialized=!0,this._authToken=t,r){var o=r.server;this._server.version||(this._server.version=o)}n&&n(r)},e.prototype._onLoginError=function(r,t){this._onProtocolError(r.message),t&&t(r)},e}();jf.default=E7;var Vf={},Wf={},yr={};Object.defineProperty(yr,"__esModule",{value:!0});yr.epochSecondAndNanoToLocalDateTime=yr.nanoOfDayToLocalTime=yr.epochDayToDate=void 0;var Mn=Y,cn=Mn.internal.temporalUtil,S7=cn.DAYS_0000_TO_1970,Op=cn.DAYS_PER_400_YEAR_CYCLE,Eg=cn.NANOS_PER_HOUR,Sg=cn.NANOS_PER_MINUTE,Cv=cn.NANOS_PER_SECOND,Pg=cn.SECONDS_PER_DAY,P7=cn.floorDiv,T7=cn.floorMod;function ME(e){e=(0,Mn.int)(e);var r=e.add(S7).subtract(60),t=(0,Mn.int)(0);if(r.lessThan(0)){var n=r.add(1).div(Op).subtract(1);t=n.multiply(400),r=r.add(n.multiply(-Op))}var o=r.multiply(400).add(591).div(Op),i=r.subtract(o.multiply(365).add(o.div(4)).subtract(o.div(100)).add(o.div(400)));i.lessThan(0)&&(o=o.subtract(1),i=r.subtract(o.multiply(365).add(o.div(4)).subtract(o.div(100)).add(o.div(400)))),o=o.add(t);var a=i,s=a.multiply(5).add(2).div(153),c=s.add(2).modulo(12).add(1),u=a.subtract(s.multiply(306).add(5).div(10)).add(1);return o=o.add(s.div(10)),new Mn.Date(o,c,u)}yr.epochDayToDate=ME;function DE(e){e=(0,Mn.int)(e);var r=e.div(Eg);e=e.subtract(r.multiply(Eg));var t=e.div(Sg);e=e.subtract(t.multiply(Sg));var n=e.div(Cv),o=e.subtract(n.multiply(Cv));return new Mn.LocalTime(r,t,n,o)}yr.nanoOfDayToLocalTime=DE;function C7(e,r){var t=P7(e,Pg),n=T7(e,Pg),o=n.multiply(Cv).add(r),i=ME(t),a=DE(o);return new Mn.LocalDateTime(i.year,i.month,i.day,a.hour,a.minute,a.second,a.nanosecond)}yr.epochSecondAndNanoToLocalDateTime=C7;var rl=f&&f.__assign||function(){return rl=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},rl.apply(this,arguments)},Sr=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},A7=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wf,"__esModule",{value:!0});var pe=Y,Me=tt,Pr=ge,Ni=yr,I7=A7(Lf),uy=pe.internal.temporalUtil,R7=uy.dateToEpochDay,sy=uy.localDateTimeToEpochSecond,LE=uy.localTimeToNanoOfDay,Tg=88,$7=3,Cg=89,j7=4,Ag=69,N7=4,Ig=116,k7=1,Rg=84,M7=2,$g=68,D7=1,jg=100,L7=2,Ng=70,U7=3,kg=102,F7=3;function B7(){return new Pr.TypeTransformer({signature:Tg,isTypeInstance:function(e){return(0,pe.isPoint)(e)&&(e.z===null||e.z===void 0)},toStructure:function(e){return new Me.structure.Structure(Tg,[(0,pe.int)(e.srid),e.x,e.y])},fromStructure:function(e){Me.structure.verifyStructSize("Point2D",$7,e.size);var r=Sr(e.fields,3),t=r[0],n=r[1],o=r[2];return new pe.Point(t,n,o,void 0)}})}function x7(){return new Pr.TypeTransformer({signature:Cg,isTypeInstance:function(e){return(0,pe.isPoint)(e)&&e.z!==null&&e.z!==void 0},toStructure:function(e){return new Me.structure.Structure(Cg,[(0,pe.int)(e.srid),e.x,e.y,e.z])},fromStructure:function(e){Me.structure.verifyStructSize("Point3D",j7,e.size);var r=Sr(e.fields,4),t=r[0],n=r[1],o=r[2],i=r[3];return new pe.Point(t,n,o,i)}})}function V7(){return new Pr.TypeTransformer({signature:Ag,isTypeInstance:pe.isDuration,toStructure:function(e){var r=(0,pe.int)(e.months),t=(0,pe.int)(e.days),n=(0,pe.int)(e.seconds),o=(0,pe.int)(e.nanoseconds);return new Me.structure.Structure(Ag,[r,t,n,o])},fromStructure:function(e){Me.structure.verifyStructSize("Duration",N7,e.size);var r=Sr(e.fields,4),t=r[0],n=r[1],o=r[2],i=r[3];return new pe.Duration(t,n,o,i)}})}function W7(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Pr.TypeTransformer({signature:Ig,isTypeInstance:pe.isLocalTime,toStructure:function(n){var o=LE(n.hour,n.minute,n.second,n.nanosecond);return new Me.structure.Structure(Ig,[o])},fromStructure:function(n){Me.structure.verifyStructSize("LocalTime",k7,n.size);var o=Sr(n.fields,1),i=o[0],a=(0,Ni.nanoOfDayToLocalTime)(i);return ki(a,r,t)}})}function z7(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Pr.TypeTransformer({signature:Rg,isTypeInstance:pe.isTime,toStructure:function(n){var o=LE(n.hour,n.minute,n.second,n.nanosecond),i=(0,pe.int)(n.timeZoneOffsetSeconds);return new Me.structure.Structure(Rg,[o,i])},fromStructure:function(n){Me.structure.verifyStructSize("Time",M7,n.size);var o=Sr(n.fields,2),i=o[0],a=o[1],s=(0,Ni.nanoOfDayToLocalTime)(i),c=new pe.Time(s.hour,s.minute,s.second,s.nanosecond,a);return ki(c,r,t)}})}function H7(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Pr.TypeTransformer({signature:$g,isTypeInstance:pe.isDate,toStructure:function(n){var o=R7(n.year,n.month,n.day);return new Me.structure.Structure($g,[o])},fromStructure:function(n){Me.structure.verifyStructSize("Date",D7,n.size);var o=Sr(n.fields,1),i=o[0],a=(0,Ni.epochDayToDate)(i);return ki(a,r,t)}})}function q7(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Pr.TypeTransformer({signature:jg,isTypeInstance:pe.isLocalDateTime,toStructure:function(n){var o=sy(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),i=(0,pe.int)(n.nanosecond);return new Me.structure.Structure(jg,[o,i])},fromStructure:function(n){Me.structure.verifyStructSize("LocalDateTime",L7,n.size);var o=Sr(n.fields,2),i=o[0],a=o[1],s=(0,Ni.epochSecondAndNanoToLocalDateTime)(i,a);return ki(s,r,t)}})}function G7(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Pr.TypeTransformer({signature:kg,isTypeInstance:function(n){return(0,pe.isDateTime)(n)&&n.timeZoneId!=null},toStructure:function(n){var o=sy(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),i=(0,pe.int)(n.nanosecond),a=n.timeZoneId;return new Me.structure.Structure(kg,[o,i,a])},fromStructure:function(n){Me.structure.verifyStructSize("DateTimeWithZoneId",F7,n.size);var o=Sr(n.fields,3),i=o[0],a=o[1],s=o[2],c=(0,Ni.epochSecondAndNanoToLocalDateTime)(i,a),u=new pe.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,c.nanosecond,null,s);return ki(u,r,t)}})}function K7(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Pr.TypeTransformer({signature:Ng,isTypeInstance:function(n){return(0,pe.isDateTime)(n)&&n.timeZoneId==null},toStructure:function(n){var o=sy(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),i=(0,pe.int)(n.nanosecond),a=(0,pe.int)(n.timeZoneOffsetSeconds);return new Me.structure.Structure(Ng,[o,i,a])},fromStructure:function(n){Me.structure.verifyStructSize("DateTimeWithZoneOffset",U7,n.size);var o=Sr(n.fields,3),i=o[0],a=o[1],s=o[2],c=(0,Ni.epochSecondAndNanoToLocalDateTime)(i,a),u=new pe.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,c.nanosecond,s,null);return ki(u,r,t)}})}function ki(e,r,t){if(!r&&!t)return e;var n=function(s){return t?s.toBigInt():s.toNumberOrInfinity()},o=Object.create(Object.getPrototypeOf(e));for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)===!0){var a=e[i];o[i]=(0,pe.isInt)(a)?n(a):a}return Object.freeze(o),o}Wf.default=rl(rl({},I7.default),{createPoint2DTransformer:B7,createPoint3DTransformer:x7,createDurationTransformer:V7,createLocalTimeTransformer:W7,createTimeTransformer:z7,createDateTransformer:H7,createLocalDateTimeTransformer:q7,createDateTimeWithZoneIdTransformer:G7,createDateTimeWithOffsetTransformer:K7});var Y7=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vf,"__esModule",{value:!0});var Z7=zf(jf),Mg=zf(tt),Q7=Y,X7=zf(Wf),J7=zf(ge),eH=Q7.internal.constants.BOLT_PROTOCOL_V2,tH=function(e){Y7(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype._createPacker=function(t){return new Mg.default.Packer(t)},r.prototype._createUnpacker=function(t,n){return new Mg.default.Unpacker(t,n)},Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new J7.default(Object.values(X7.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return eH},enumerable:!1,configurable:!0}),r}(Z7.default);Vf.default=tH;var Hf={},qf={},Av=f&&f.__assign||function(){return Av=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Av.apply(this,arguments)},rH=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qf,"__esModule",{value:!0});var nH=rH(Wf);qf.default=Av({},nH.default);var oH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),nl=f&&f.__assign||function(){return nl=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},nl.apply(this,arguments)},Gf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hf,"__esModule",{value:!0});var iH=Gf(Vf),gn=Gf(He),wn=Ve,Tn=ae,aH=Gf(qf),uH=Gf(ge),cy=Y;cy.internal.bookmarks.Bookmarks;var sH=cy.internal.constants.BOLT_PROTOCOL_V3,cH=cy.internal.txConfig.TxConfig,UE="context",lH="CALL dbms.cluster.routing.getRoutingTable($".concat(UE,")"),fH=new Tn.StreamObserver,dH=function(e){oH(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return sH},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new uH.default(Object.values(aH.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.transformMetadata=function(t){return"t_first"in t&&(t.result_available_after=t.t_first,delete t.t_first),"t_last"in t&&(t.result_consumed_after=t.t_last,delete t.t_last),t},r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new Tn.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return n._onLoginCompleted(d,a,u)}});return(0,wn.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(gn.default.hello(i,a),l,!0),l},r.prototype.prepareToClose=function(){this.write(gn.default.goodbye(),fH,!0)},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.impersonatedUser,c=n.notificationFilter,u=n.mode,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new Tn.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),(0,wn.assertDatabaseIsEmpty)(a,this._onProtocolError,v),(0,wn.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,v),(0,wn.assertNotificationFilterIsEmpty)(c,this._onProtocolError,v),this.write(gn.default.begin({bookmarks:o,txConfig:i,mode:u}),v,!0),v},r.prototype.commitTransaction=function(t){var n=t===void 0?{}:t,o=n.beforeError,i=n.afterError,a=n.beforeComplete,s=n.afterComplete,c=new Tn.ResultStreamObserver({server:this._server,beforeError:o,afterError:i,beforeComplete:a,afterComplete:s});return c.prepareToHandleSingleResponse(),this.write(gn.default.commit(),c,!0),c},r.prototype.rollbackTransaction=function(t){var n=t===void 0?{}:t,o=n.beforeError,i=n.afterError,a=n.beforeComplete,s=n.afterComplete,c=new Tn.ResultStreamObserver({server:this._server,beforeError:o,afterError:i,beforeComplete:a,afterComplete:s});return c.prepareToHandleSingleResponse(),this.write(gn.default.rollback(),c,!0),c},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.impersonatedUser,l=i.notificationFilter,d=i.mode,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,y=i.afterError,_=i.beforeComplete,b=i.afterComplete,w=i.flush,S=w===void 0?!0:w,E=i.highRecordWatermark,P=E===void 0?Number.MAX_VALUE:E,C=i.lowRecordWatermark,T=C===void 0?Number.MAX_VALUE:C,I=new Tn.ResultStreamObserver({server:this._server,beforeKeys:h,afterKeys:p,beforeError:v,afterError:y,beforeComplete:_,afterComplete:b,highRecordWatermark:P,lowRecordWatermark:T});return(0,wn.assertDatabaseIsEmpty)(c,this._onProtocolError,I),(0,wn.assertImpersonatedUserIsEmpty)(u,this._onProtocolError,I),(0,wn.assertNotificationFilterIsEmpty)(l,this._onProtocolError,I),this.write(gn.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,mode:d}),I,!1),this.write(gn.default.pullAll(),I,S),I},r.prototype.requestRoutingInformation=function(t){var n,o=t.routingContext,i=o===void 0?{}:o,a=t.sessionContext,s=a===void 0?{}:a,c=t.onError,u=t.onCompleted,l=this.run(lH,(n={},n[UE]=i,n),nl(nl({},s),{txConfig:cH.empty()}));return new Tn.ProcedureRouteObserver({resultObserver:l,onProtocolError:this._onProtocolError,onError:c,onCompleted:u})},r}(iH.default);Hf.default=dH;var Kf={},Yf={},Iv=f&&f.__assign||function(){return Iv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Iv.apply(this,arguments)},hH=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yf,"__esModule",{value:!0});var pH=hH(qf);Yf.default=Iv({},pH.default);var vH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ol=f&&f.__assign||function(){return ol=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ol.apply(this,arguments)},Zf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kf,"__esModule",{value:!0});var _H=Zf(Hf),Zi=Zf(He),pc=Ve,Ep=ae,yH=Zf(Yf),bH=Zf(ge),ly=Y;ly.internal.bookmarks.Bookmarks;var FE=ly.internal.constants,mH=FE.BOLT_PROTOCOL_V4_0,gH=FE.FETCH_ALL,wH=ly.internal.txConfig.TxConfig,BE="context",xE="database",OH="CALL dbms.routing.getRoutingTable($".concat(BE,", $").concat(xE,")"),EH=function(e){vH(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return mH},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new bH.default(Object.values(yH.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.impersonatedUser,c=n.notificationFilter,u=n.mode,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new Ep.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),(0,pc.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,v),(0,pc.assertNotificationFilterIsEmpty)(c,this._onProtocolError,v),this.write(Zi.default.begin({bookmarks:o,txConfig:i,database:a,mode:u}),v,!0),v},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.impersonatedUser,l=i.notificationFilter,d=i.mode,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,y=i.afterError,_=i.beforeComplete,b=i.afterComplete,w=i.flush,S=w===void 0?!0:w,E=i.reactive,P=E===void 0?!1:E,C=i.fetchSize,T=C===void 0?gH:C,I=i.highRecordWatermark,$=I===void 0?Number.MAX_VALUE:I,D=i.lowRecordWatermark,q=D===void 0?Number.MAX_VALUE:D,V=new Ep.ResultStreamObserver({server:this._server,reactive:P,fetchSize:T,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:y,beforeComplete:_,afterComplete:b,highRecordWatermark:$,lowRecordWatermark:q});(0,pc.assertImpersonatedUserIsEmpty)(u,this._onProtocolError,V),(0,pc.assertNotificationFilterIsEmpty)(l,this._onProtocolError,V);var H=P;return this.write(Zi.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,database:c,mode:d}),V,H&&S),P||this.write(Zi.default.pull({n:T}),V,S),V},r.prototype._requestMore=function(t,n,o){this.write(Zi.default.pull({stmtId:t,n}),o,!0)},r.prototype._requestDiscard=function(t,n){this.write(Zi.default.discard({stmtId:t}),n,!0)},r.prototype._noOp=function(){},r.prototype.requestRoutingInformation=function(t){var n,o=t.routingContext,i=o===void 0?{}:o,a=t.databaseName,s=a===void 0?null:a,c=t.sessionContext,u=c===void 0?{}:c,l=t.onError,d=t.onCompleted,h=this.run(OH,(n={},n[BE]=i,n[xE]=s,n),ol(ol({},u),{txConfig:wH.empty()}));return new Ep.ProcedureRouteObserver({resultObserver:h,onProtocolError:this._onProtocolError,onError:l,onCompleted:d})},r}(_H.default);Kf.default=EH;var Qf={},Xf={},Rv=f&&f.__assign||function(){return Rv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Rv.apply(this,arguments)},SH=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xf,"__esModule",{value:!0});var PH=SH(Yf);Xf.default=Rv({},PH.default);var TH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Jf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qf,"__esModule",{value:!0});var CH=Jf(Kf),AH=Jf(He),IH=ae,RH=Y,$H=Ve,jH=Jf(Xf),NH=Jf(ge),kH=RH.internal.constants.BOLT_PROTOCOL_V4_1,MH=function(e){TH(r,e);function r(t,n,o,i,a,s,c){i===void 0&&(i=function(){return null});var u=e.call(this,t,n,o,i,a,s)||this;return u._serversideRouting=c,u}return Object.defineProperty(r.prototype,"version",{get:function(){return kH},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new NH.default(Object.values(jH.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new IH.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return n._onLoginCompleted(d,a,u)}});return(0,$H.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(AH.default.hello(i,a,this._serversideRouting),l,!0),l},r}(CH.default);Qf.default=MH;var ed={},td={},$v=f&&f.__assign||function(){return $v=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},$v.apply(this,arguments)},DH=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(td,"__esModule",{value:!0});var LH=DH(Xf);td.default=$v({},LH.default);var UH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fy=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ed,"__esModule",{value:!0});var FH=fy(Qf),BH=Y,xH=fy(td),VH=fy(ge),WH=BH.internal.constants.BOLT_PROTOCOL_V4_2,zH=function(e){UH(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return WH},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new VH.default(Object.values(xH.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r}(FH.default);ed.default=zH;var Ws={},rd={},jv=f&&f.__assign||function(){return jv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},jv.apply(this,arguments)},HH=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rd,"__esModule",{value:!0});var qH=HH(td);rd.default=jv({},qH.default);var zs={},Hs={},Nv=f&&f.__assign||function(){return Nv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Nv.apply(this,arguments)},GH=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hs,"__esModule",{value:!0});var KH=GH(rd);Hs.default=Nv({},KH.default);var VE=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},YH=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zs,"__esModule",{value:!0});var il=tt,pt=Y,WE=YH(Hs),ZH=yr,QH=zn,$a=pt.internal.temporalUtil.localDateTimeToEpochSecond,Dg=73,XH=3,Lg=105,JH=3;function eq(e,r){var t=e.disableLosslessIntegers,n=e.useBigInt,o=WE.default.createDateTimeWithZoneIdTransformer(e);return o.extendsWith({signature:Lg,fromStructure:function(i){il.structure.verifyStructSize("DateTimeWithZoneId",JH,i.size);var a=VE(i.fields,3),s=a[0],c=a[1],u=a[2],l=kv(u,s,c),d=new pt.DateTime(l.year,l.month,l.day,l.hour,l.minute,l.second,(0,pt.int)(c),l.timeZoneOffsetSeconds,u);return zE(d,t,n)},toStructure:function(i){var a=$a(i.year,i.month,i.day,i.hour,i.minute,i.second,i.nanosecond),s=i.timeZoneOffsetSeconds!=null?i.timeZoneOffsetSeconds:tq(i.timeZoneId,a,i.nanosecond);i.timeZoneOffsetSeconds==null&&r.warn('DateTime objects without "timeZoneOffsetSeconds" property are prune to bugs related to ambiguous times. For instance, 2022-10-30T2:30:00[Europe/Berlin] could be GMT+1 or GMT+2.');var c=a.subtract(s),u=(0,pt.int)(i.nanosecond),l=i.timeZoneId;return new il.structure.Structure(Lg,[c,u,l])}})}function tq(e,r,t){var n=kv(e,r,t),o=$a(n.year,n.month,n.day,n.hour,n.minute,n.second,t),i=o.subtract(r),a=r.subtract(i),s=kv(e,a,t),c=$a(s.year,s.month,s.day,s.hour,s.minute,s.second,t),u=c.subtract(a);return u}var Sp=new Map;function rq(e){if(!Sp.has(e)){var r=new Intl.DateTimeFormat("en-US",{timeZone:e,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"});Sp.set(e,r)}return Sp.get(e)}function kv(e,r,t){var n=rq(e),o=(0,pt.int)(r).multiply(1e3).add((0,pt.int)(t).div(1e6)).toNumber(),i=n.formatToParts(o),a=i.reduce(function(c,u){return u.type==="era"?c.adjustEra=u.value.toUpperCase()==="B"?function(l){return l.subtract(1).negate()}:QH.identity:u.type==="hour"?c.hour=(0,pt.int)(u.value).modulo(24):u.type!=="literal"&&(c[u.type]=(0,pt.int)(u.value)),c},{});a.year=a.adjustEra(a.year);var s=$a(a.year,a.month,a.day,a.hour,a.minute,a.second,a.nanosecond);return a.timeZoneOffsetSeconds=s.subtract(r),a.hour=a.hour.modulo(24),a}function nq(e){var r=e.disableLosslessIntegers,t=e.useBigInt,n=WE.default.createDateTimeWithOffsetTransformer(e);return n.extendsWith({signature:Dg,toStructure:function(o){var i=$a(o.year,o.month,o.day,o.hour,o.minute,o.second,o.nanosecond),a=(0,pt.int)(o.nanosecond),s=(0,pt.int)(o.timeZoneOffsetSeconds),c=i.subtract(s);return new il.structure.Structure(Dg,[c,a,s])},fromStructure:function(o){il.structure.verifyStructSize("DateTimeWithZoneOffset",XH,o.size);var i=VE(o.fields,3),a=i[0],s=i[1],c=i[2],u=(0,pt.int)(a).add(c),l=(0,ZH.epochSecondAndNanoToLocalDateTime)(u,s),d=new pt.DateTime(l.year,l.month,l.day,l.hour,l.minute,l.second,l.nanosecond,c,null);return zE(d,r,t)}})}function zE(e,r,t){if(!r&&!t)return e;var n=function(s){return t?s.toBigInt():s.toNumberOrInfinity()},o=Object.create(Object.getPrototypeOf(e));for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)===!0){var a=e[i];o[i]=(0,pt.isInt)(a)?n(a):a}return Object.freeze(o),o}zs.default={createDateTimeWithZoneIdTransformer:eq,createDateTimeWithOffsetTransformer:nq};var oq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),al=f&&f.__assign||function(){return al=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},al.apply(this,arguments)},qs=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ws,"__esModule",{value:!0});var iq=qs(ed),Ug=qs(He),Fg=ae,aq=Ve,Bg=qs(rd),uq=qs(zs),xg=qs(ge),HE=Y,sq=HE.internal.bookmarks.Bookmarks,cq=HE.internal.constants.BOLT_PROTOCOL_V4_3,lq=function(e){oq(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return cq},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new xg.default(Object.values(Bg.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.requestRoutingInformation=function(t){var n=t.routingContext,o=n===void 0?{}:n,i=t.databaseName,a=i===void 0?null:i,s=t.sessionContext,c=s===void 0?{}:s,u=t.onError,l=t.onCompleted,d=new Fg.RouteObserver({onProtocolError:this._onProtocolError,onError:u,onCompleted:l}),h=c.bookmarks||sq.empty();return this.write(Ug.default.route(o,h.values(),a),d,!0),d},r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new Fg.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return d.patch_bolt!==void 0&&n._applyPatches(d.patch_bolt),n._onLoginCompleted(d,a,u)}});return(0,aq.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(Ug.default.hello(i,a,this._serversideRouting,["utc"]),l,!0),l},r.prototype._applyPatches=function(t){t.includes("utc")&&this._applyUtcPatch()},r.prototype._applyUtcPatch=function(){var t=this;this._transformer=new xg.default(Object.values(al(al({},Bg.default),uq.default)).map(function(n){return n(t._config,t._log)}))},r}(iq.default);Ws.default=lq;var nd={},fq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ul=f&&f.__assign||function(){return ul=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ul.apply(this,arguments)},Gs=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nd,"__esModule",{value:!0});var dq=Gs(Ws),qE=Y,vc=Gs(He),Pp=ae,Vg=Ve,Wg=Gs(Hs),hq=Gs(zs),zg=Gs(ge),GE=qE.internal.constants,pq=GE.BOLT_PROTOCOL_V4_4,vq=GE.FETCH_ALL,_q=qE.internal.bookmarks.Bookmarks,yq=function(e){fq(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return pq},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new zg.default(Object.values(Wg.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.requestRoutingInformation=function(t){var n=t.routingContext,o=n===void 0?{}:n,i=t.databaseName,a=i===void 0?null:i,s=t.impersonatedUser,c=s===void 0?null:s,u=t.sessionContext,l=u===void 0?{}:u,d=t.onError,h=t.onCompleted,p=new Pp.RouteObserver({onProtocolError:this._onProtocolError,onError:d,onCompleted:h}),v=l.bookmarks||_q.empty();return this.write(vc.default.routeV4x4(o,v.values(),{databaseName:a,impersonatedUser:c}),p,!0),p},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,y=i.afterError,_=i.beforeComplete,b=i.afterComplete,w=i.flush,S=w===void 0?!0:w,E=i.reactive,P=E===void 0?!1:E,C=i.fetchSize,T=C===void 0?vq:C,I=i.highRecordWatermark,$=I===void 0?Number.MAX_VALUE:I,D=i.lowRecordWatermark,q=D===void 0?Number.MAX_VALUE:D,V=new Pp.ResultStreamObserver({server:this._server,reactive:P,fetchSize:T,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:y,beforeComplete:_,afterComplete:b,highRecordWatermark:$,lowRecordWatermark:q});(0,Vg.assertNotificationFilterIsEmpty)(d,this._onProtocolError,V);var H=P;return this.write(vc.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l}),V,H&&S),P||this.write(vc.default.pull({n:T}),V,S),V},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.mode,c=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new Pp.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),(0,Vg.assertNotificationFilterIsEmpty)(u,this._onProtocolError,v),this.write(vc.default.begin({bookmarks:o,txConfig:i,database:a,mode:s,impersonatedUser:c}),v,!0),v},r.prototype._applyUtcPatch=function(){var t=this;this._transformer=new zg.default(Object.values(ul(ul({},Wg.default),hq.default)).map(function(n){return n(t._config,t._log)}))},r}(dq.default);nd.default=yq;var od={},id={},_a=f&&f.__assign||function(){return _a=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_a.apply(this,arguments)},dy=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},KE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(id,"__esModule",{value:!0});var hy=tt,py=Y,ad=KE(Hs),bq=KE(zs),mq=4,gq=8,wq=4;function Oq(e){var r=ad.default.createNodeTransformer(e);return r.extendsWith({fromStructure:function(t){hy.structure.verifyStructSize("Node",mq,t.size);var n=dy(t.fields,4),o=n[0],i=n[1],a=n[2],s=n[3];return new py.Node(o,i,a,s)}})}function Eq(e){var r=ad.default.createRelationshipTransformer(e);return r.extendsWith({fromStructure:function(t){hy.structure.verifyStructSize("Relationship",gq,t.size);var n=dy(t.fields,8),o=n[0],i=n[1],a=n[2],s=n[3],c=n[4],u=n[5],l=n[6],d=n[7];return new py.Relationship(o,i,a,s,c,u,l,d)}})}function Sq(e){var r=ad.default.createUnboundRelationshipTransformer(e);return r.extendsWith({fromStructure:function(t){hy.structure.verifyStructSize("UnboundRelationship",wq,t.size);var n=dy(t.fields,4),o=n[0],i=n[1],a=n[2],s=n[3];return new py.UnboundRelationship(o,i,a,s)}})}id.default=_a(_a(_a({},ad.default),bq.default),{createNodeTransformer:Oq,createRelationshipTransformer:Eq,createUnboundRelationshipTransformer:Sq});var Pq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ud=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(od,"__esModule",{value:!0});var Tq=ud(nd),Cq=Ve,Aq=ud(id),Iq=ud(ge),Rq=ud(He),$q=ae,jq=Y,Nq=jq.internal.constants.BOLT_PROTOCOL_V5_0,kq=function(e){Pq(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return Nq},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Iq.default(Object.values(Aq.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new $q.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return n._onLoginCompleted(d,a,u)}});return(0,Cq.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(Rq.default.hello(i,a,this._serversideRouting),l,!0),l},r}(Tq.default);od.default=kq;var sd={},cd={},Mv=f&&f.__assign||function(){return Mv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Mv.apply(this,arguments)},Mq=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cd,"__esModule",{value:!0});var Dq=Mq(id);cd.default=Mv({},Dq.default);var Lq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),sl=f&&f.__assign||function(){return sl=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},sl.apply(this,arguments)},ld=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sd,"__esModule",{value:!0});var Uq=ld(od),Fq=Ve,Bq=ld(cd),xq=ld(ge),Tp=ld(He),Cp=ae,Vq=Y,Wq=Vq.internal.constants.BOLT_PROTOCOL_V5_1,zq=function(e){Lq(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return Wq},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new xq.default(Object.values(Bq.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l={},d=new Cp.LoginObserver({onError:function(h){return n._onLoginError(h,c)},onCompleted:function(h){return l.metadata=h,n._onLoginCompleted(h)}});return(0,Fq.assertNotificationFilterIsEmpty)(s,this._onProtocolError,d),this.write(Tp.default.hello5x1(i,this._serversideRouting),d,!1),this.logon({authToken:a,onComplete:function(h){return u(sl(sl({},h),l.metadata))},onError:c,flush:!0})},r.prototype.logon=function(t){var n=this,o=t===void 0?{}:t,i=o.authToken,a=o.onComplete,s=o.onError,c=o.flush,u=new Cp.LoginObserver({onCompleted:function(){return n._onLoginCompleted(null,i,a)},onError:function(l){return n._onLoginError(l,s)}});return this.write(Tp.default.logon(i),u,c),u},r.prototype.logoff=function(t){var n=t===void 0?{}:t,o=n.onComplete,i=n.onError,a=n.flush,s=new Cp.LogoffObserver({onCompleted:o,onError:i});return this.write(Tp.default.logoff(),s,a),s},r}(Uq.default);sd.default=zq;var fd={},dd={},Dv=f&&f.__assign||function(){return Dv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Dv.apply(this,arguments)},Hq=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dd,"__esModule",{value:!0});var qq=Hq(cd);dd.default=Dv({},qq.default);var Gq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),cl=f&&f.__assign||function(){return cl=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},cl.apply(this,arguments)},hd=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fd,"__esModule",{value:!0});var Kq=hd(sd),Yq=hd(dd),Zq=hd(ge),_c=hd(He),Ap=ae,Qq=Y,YE=Qq.internal.constants,Xq=YE.BOLT_PROTOCOL_V5_2,Jq=YE.FETCH_ALL,eG=function(e){Gq(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return Xq},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Zq.default(Object.values(Yq.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l={},d=new Ap.LoginObserver({onError:function(h){return n._onLoginError(h,c)},onCompleted:function(h){return l.metadata=h,n._onLoginCompleted(h)}});return this.write(_c.default.hello5x2(i,s,this._serversideRouting),d,!1),this.logon({authToken:a,onComplete:function(h){return u(cl(cl({},h),l.metadata))},onError:c,flush:!0})},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.mode,c=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new Ap.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),this.write(_c.default.begin({bookmarks:o,txConfig:i,database:a,mode:s,impersonatedUser:c,notificationFilter:u}),v,!0),v},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,y=i.afterError,_=i.beforeComplete,b=i.afterComplete,w=i.flush,S=w===void 0?!0:w,E=i.reactive,P=E===void 0?!1:E,C=i.fetchSize,T=C===void 0?Jq:C,I=i.highRecordWatermark,$=I===void 0?Number.MAX_VALUE:I,D=i.lowRecordWatermark,q=D===void 0?Number.MAX_VALUE:D,V=new Ap.ResultStreamObserver({server:this._server,reactive:P,fetchSize:T,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:y,beforeComplete:_,afterComplete:b,highRecordWatermark:$,lowRecordWatermark:q}),H=P;return this.write(_c.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l,notificationFilter:d}),V,H&&S),P||this.write(_c.default.pull({n:T}),V,S),V},r}(Kq.default);fd.default=eG;var pd={},vd={},Lv=f&&f.__assign||function(){return Lv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Lv.apply(this,arguments)},tG=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vd,"__esModule",{value:!0});var rG=tG(dd);vd.default=Lv({},rG.default);var nG=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ll=f&&f.__assign||function(){return ll=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ll.apply(this,arguments)},_d=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pd,"__esModule",{value:!0});var oG=_d(fd),iG=_d(vd),aG=_d(ge),uG=_d(He),sG=ae,cG=Y,lG=cG.internal.constants.BOLT_PROTOCOL_V5_3,fG=function(e){nG(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return lG},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new aG.default(Object.values(iG.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent,a=o.boltAgent,s=o.authToken,c=o.notificationFilter,u=o.onError,l=o.onComplete,d={},h=new sG.LoginObserver({onError:function(p){return n._onLoginError(p,u)},onCompleted:function(p){return d.metadata=p,n._onLoginCompleted(p)}});return this.write(uG.default.hello5x3(i,a,c,this._serversideRouting),h,!1),this.logon({authToken:s,onComplete:function(p){return l(ll(ll({},p),d.metadata))},onError:u,flush:!0})},r}(oG.default);pd.default=fG;var yd={},bd={},Uv=f&&f.__assign||function(){return Uv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Uv.apply(this,arguments)},dG=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bd,"__esModule",{value:!0});var hG=dG(vd);bd.default=Uv({},hG.default);var pG=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),md=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yd,"__esModule",{value:!0});var vG=md(pd),_G=md(bd),yG=md(He),bG=ae,mG=md(ge),gG=Y,wG=gG.internal.constants.BOLT_PROTOCOL_V5_4,OG=function(e){pG(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return wG},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new mG.default(Object.values(_G.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.telemetry=function(t,n){var o=t.api,i=n===void 0?{}:n,a=i.onError,s=i.onCompleted,c=new bG.TelemetryObserver({onCompleted:s,onError:a});return this.write(yG.default.telemetry({api:o}),c,!1),c},r}(vG.default);yd.default=OG;var gd={},wd={},Fv=f&&f.__assign||function(){return Fv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Fv.apply(this,arguments)},EG=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wd,"__esModule",{value:!0});var SG=EG(bd);wd.default=Fv({},SG.default);var PG=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Nr=f&&f.__assign||function(){return Nr=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Nr.apply(this,arguments)},Od=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gd,"__esModule",{value:!0});var TG=Od(yd),CG=Od(wd),AG=Od(ge),yc=Od(He),Ip=ae,IG=Y,ZE=IG.internal.constants,RG=ZE.BOLT_PROTOCOL_V5_5,$G=ZE.FETCH_ALL,jG=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),NG=function(e){PG(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return RG},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new AG.default(Object.values(CG.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent,a=o.boltAgent,s=o.authToken,c=o.notificationFilter,u=o.onError,l=o.onComplete,d={},h=new Ip.LoginObserver({onError:function(p){return n._onLoginError(p,u)},onCompleted:function(p){return d.metadata=p,n._onLoginCompleted(p)}});return this.write(yc.default.hello5x5(i,a,c,this._serversideRouting),h,!1),this.logon({authToken:s,onComplete:function(p){return l(Nr(Nr({},p),d.metadata))},onError:u,flush:!0})},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.mode,c=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new Ip.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),this.write(yc.default.begin5x5({bookmarks:o,txConfig:i,database:a,mode:s,impersonatedUser:c,notificationFilter:u}),v,!0),v},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,y=i.afterError,_=i.beforeComplete,b=i.afterComplete,w=i.flush,S=w===void 0?!0:w,E=i.reactive,P=E===void 0?!1:E,C=i.fetchSize,T=C===void 0?$G:C,I=i.highRecordWatermark,$=I===void 0?Number.MAX_VALUE:I,D=i.lowRecordWatermark,q=D===void 0?Number.MAX_VALUE:D,V=new Ip.ResultStreamObserver({server:this._server,reactive:P,fetchSize:T,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:y,beforeComplete:_,afterComplete:b,highRecordWatermark:$,lowRecordWatermark:q,enrichMetadata:this._enrichMetadata}),H=P;return this.write(yc.default.runWithMetadata5x5(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l,notificationFilter:d}),V,H&&S),P||this.write(yc.default.pull({n:T}),V,S),V},r.prototype._enrichMetadata=function(t){return Array.isArray(t.statuses)&&(t.statuses=t.statuses.map(function(n){return Nr(Nr({},n),{description:n.neo4j_code!=null?n.status_description:n.description,diagnostic_record:n.diagnostic_record!==null?Nr(Nr({},jG),n.diagnostic_record):null})})),t},r}(TG.default);gd.default=NG;var Ed={},Sd={},Bv=f&&f.__assign||function(){return Bv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Bv.apply(this,arguments)},kG=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sd,"__esModule",{value:!0});var MG=kG(wd);Sd.default=Bv({},MG.default);var DG=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Oo=f&&f.__assign||function(){return Oo=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Oo.apply(this,arguments)},vy=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ed,"__esModule",{value:!0});var LG=vy(gd),UG=vy(Sd),FG=vy(ge),BG=Y,xG=BG.internal.constants.BOLT_PROTOCOL_V5_6,VG=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),WG=function(e){DG(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return xG},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new FG.default(Object.values(UG.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype._enrichMetadata=function(t){return Array.isArray(t.statuses)&&(t.statuses=t.statuses.map(function(n){return Oo(Oo({},n),{diagnostic_record:n.diagnostic_record!==null?Oo(Oo({},VG),n.diagnostic_record):null})})),t},r}(LG.default);Ed.default=WG;var Pd={},Td={},xv=f&&f.__assign||function(){return xv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},xv.apply(this,arguments)},zG=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Td,"__esModule",{value:!0});var HG=zG(Sd);Td.default=xv({},HG.default);var qG=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Eo=f&&f.__assign||function(){return Eo=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Eo.apply(this,arguments)},_y=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pd,"__esModule",{value:!0});var GG=_y(Ed),KG=_y(Td),YG=_y(ge),ZG=Y,QG=ZG.internal.constants.BOLT_PROTOCOL_V5_7,XG=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),JG=function(e){qG(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return QG},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new YG.default(Object.values(KG.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.enrichErrorMetadata=function(t){return Eo(Eo({},t),{cause:t.cause!==null&&t.cause!==void 0?this.enrichErrorMetadata(t.cause):null,code:t.neo4j_code,diagnostic_record:t.diagnostic_record!==null?Eo(Eo({},XG),t.diagnostic_record):null})},r}(GG.default);Pd.default=JG;var yy={},by={},Vv=f&&f.__assign||function(){return Vv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Vv.apply(this,arguments)},e9=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(by,"__esModule",{value:!0});var t9=e9(Td);by.default=Vv({},t9.default);var r9=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Cd=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yy,"__esModule",{value:!0});var n9=Cd(Pd),o9=Cd(by),i9=Cd(ge),Hg=Cd(He),a9=ae,u9=Y,QE=u9.internal.constants,s9=QE.BOLT_PROTOCOL_V5_8,c9=QE.FETCH_ALL,l9=function(e){r9(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return s9},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new i9.default(Object.values(o9.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,y=i.afterError,_=i.beforeComplete,b=i.afterComplete,w=i.flush,S=w===void 0?!0:w,E=i.reactive,P=E===void 0?!1:E,C=i.fetchSize,T=C===void 0?c9:C,I=i.highRecordWatermark,$=I===void 0?Number.MAX_VALUE:I,D=i.lowRecordWatermark,q=D===void 0?Number.MAX_VALUE:D,V=i.onDb,H=new a9.ResultStreamObserver({server:this._server,reactive:P,fetchSize:T,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:y,beforeComplete:_,afterComplete:b,highRecordWatermark:$,lowRecordWatermark:q,enrichMetadata:this._enrichMetadata,onDb:V}),oe=P;return this.write(Hg.default.runWithMetadata5x5(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l,notificationFilter:d}),H,oe&&S),P||this.write(Hg.default.pull({n:T}),H,S),H},r}(n9.default);yy.default=l9;var my={};Object.defineProperty(my,"__esModule",{value:!0});var Ir=Y,f9=112,d9=113,h9=126,p9=127;function lr(){}function Rp(e){return e}var v9={onNext:lr,onCompleted:lr,onError:lr},_9=function(){function e(r){var t=r===void 0?{}:r,n=t.transformMetadata,o=t.enrichErrorMetadata,i=t.log,a=t.observer;this._pendingObservers=[],this._log=i,this._transformMetadata=n||Rp,this._enrichErrorMetadata=o||Rp,this._observer=Object.assign({onObserversCountChange:lr,onError:lr,onFailure:lr,onErrorApplyTransformation:Rp},a)}return Object.defineProperty(e.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),e.prototype.handleResponse=function(r){var t=r.fields[0];switch(r.signature){case d9:this._log.isDebugEnabled()&&this._log.debug("S: RECORD ".concat(Ir.json.stringify(r))),this._currentObserver.onNext(t);break;case f9:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS ".concat(Ir.json.stringify(r)));try{var n=this._transformMetadata(t);this._currentObserver.onCompleted(n)}finally{this._updateCurrentObserver()}break;case p9:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE ".concat(Ir.json.stringify(r)));try{this._currentFailure=this._handleErrorPayload(this._enrichErrorMetadata(t)),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case h9:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED ".concat(Ir.json.stringify(r)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,Ir.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,Ir.newError)("Unknown Bolt protocol message: "+r))}},e.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onObserversCountChange(this._observersCount)},Object.defineProperty(e.prototype,"_observersCount",{get:function(){return this._currentObserver==null?this._pendingObservers.length:this._pendingObservers.length+1},enumerable:!1,configurable:!0}),e.prototype._queueObserver=function(r){return r=r||v9,r.onCompleted=r.onCompleted||lr,r.onError=r.onError||lr,r.onNext=r.onNext||lr,this._currentObserver===void 0?this._currentObserver=r:this._pendingObservers.push(r),this._observer.onObserversCountChange(this._observersCount),!0},e.prototype._notifyErrorToObservers=function(r){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(r);this._pendingObservers.length>0;){var t=this._pendingObservers.shift();t&&t.onError&&t.onError(r)}},e.prototype.hasOngoingObservableRequests=function(){return this._currentObserver!=null||this._pendingObservers.length>0},e.prototype._resetFailure=function(){this._currentFailure=null},e.prototype._handleErrorPayload=function(r){var t=y9(r.code),n=r.cause!=null?this._handleErrorCause(r.cause):void 0,o=(0,Ir.newError)(r.message,t,n,r.gql_status,r.description,r.diagnostic_record);return this._observer.onErrorApplyTransformation(o)},e.prototype._handleErrorCause=function(r){var t=r.cause!=null?this._handleErrorCause(r.cause):void 0,n=(0,Ir.newGQLError)(r.message,t,r.gql_status,r.description,r.diagnostic_record);return this._observer.onErrorApplyTransformation(n)},e}();my.default=_9;function y9(e){return e==="Neo.TransientError.Transaction.Terminated"?"Neo.ClientError.Transaction.Terminated":e==="Neo.TransientError.Transaction.LockClientStopped"?"Neo.ClientError.Transaction.LockClientStopped":e}var De=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oy,"__esModule",{value:!0});var b9=Y,m9=De(jf),g9=De(Vf),w9=De(Hf),O9=De(Kf),E9=De(Qf),S9=De(ed),P9=De(Ws),T9=De(nd),C9=De(od),A9=De(sd),I9=De(fd),R9=De(pd),$9=De(yd),j9=De(gd),N9=De(Ed),k9=De(Pd),M9=De(yy),D9=De(my);function L9(e){var r=e===void 0?{}:e,t=r.version,n=r.chunker,o=r.dechunker,i=r.channel,a=r.disableLosslessIntegers,s=r.useBigInt,c=r.serversideRouting,u=r.server,l=r.log,d=r.observer,h=function(p){var v=new D9.default({transformMetadata:p.transformMetadata.bind(p),enrichErrorMetadata:p.enrichErrorMetadata.bind(p),log:l,observer:d});return i.onerror=d.onError.bind(d),i.onmessage=function(y){return o.write(y)},o.onmessage=function(y){try{v.handleResponse(p.unpack(y))}catch(_){return d.onError(_)}},v};return U9(t,u,n,{disableLosslessIntegers:a,useBigInt:s},c,h,d.onProtocolError.bind(d),l)}oy.default=L9;function U9(e,r,t,n,o,i,a,s){switch(e){case 1:return new m9.default(r,t,n,i,s,a);case 2:return new g9.default(r,t,n,i,s,a);case 3:return new w9.default(r,t,n,i,s,a);case 4:return new O9.default(r,t,n,i,s,a);case 4.1:return new E9.default(r,t,n,i,s,a,o);case 4.2:return new S9.default(r,t,n,i,s,a,o);case 4.3:return new P9.default(r,t,n,i,s,a,o);case 4.4:return new T9.default(r,t,n,i,s,a,o);case 5:return new C9.default(r,t,n,i,s,a,o);case 5.1:return new A9.default(r,t,n,i,s,a,o);case 5.2:return new I9.default(r,t,n,i,s,a,o);case 5.3:return new R9.default(r,t,n,i,s,a,o);case 5.4:return new $9.default(r,t,n,i,s,a,o);case 5.5:return new j9.default(r,t,n,i,s,a,o);case 5.6:return new N9.default(r,t,n,i,s,a,o);case 5.7:return new k9.default(r,t,n,i,s,a,o);case 5.8:return new M9.default(r,t,n,i,s,a,o);default:throw(0,b9.newError)("Unknown Bolt protocol version: "+e)}}(function(e){var r=f&&f.__createBinding||(Object.create?function(c,u,l,d){d===void 0&&(d=l);var h=Object.getOwnPropertyDescriptor(u,l);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(c,d,h)}:function(c,u,l,d){d===void 0&&(d=l),c[d]=u[l]}),t=f&&f.__exportStar||function(c,u){for(var l in c)l!=="default"&&!Object.prototype.hasOwnProperty.call(u,l)&&r(u,c,l)},n=f&&f.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.RawRoutingTable=e.BoltProtocol=void 0;var o=n(Z_),i=n(oy),a=n(Ws),s=n(Nf);t(ae,e),e.BoltProtocol=a.default,e.RawRoutingTable=s.default,e.default={handshake:o.default,create:i.default}})(Y_);var XE={},Ad={},F9=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ad,"__esModule",{value:!0});var B9=Y,x9=function(e){F9(r,e);function r(t){var n=e.call(this)||this;return n._connection=t,n}return r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t;n.accessMode,n.database,n.bookmarks;var o=this._connection;return this._connection=null,Promise.resolve(o)},r}(B9.ConnectionProvider);Ad.default=x9;var Ks={},Id={},Ys={},V9=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ys,"__esModule",{value:!0});var W9=Y,z9=function(e){V9(r,e);function r(t){var n=e.call(this)||this;return n._errorHandler=t,n}return Object.defineProperty(r.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"authToken",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(r.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.connect=function(t,n,o,i){throw new Error("not implemented")},r.prototype.write=function(t,n,o){throw new Error("not implemented")},r.prototype.close=function(){throw new Error("not implemented")},r.prototype.handleAndTransformError=function(t,n){return this._errorHandler?this._errorHandler.handleAndTransformError(t,n,this):t},r}(W9.Connection);Ys.default=z9;var Zs={},H9=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),qg=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Gg=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},JE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zs,"__esModule",{value:!0});Zs.createChannelConnection=void 0;var bc=so,So=Y,q9=JE(Ys),Kg=JE(Y_),G9=So.error.PROTOCOL_ERROR,K9=So.internal.logger.Logger,Y9=0;function Z9(e,r,t,n,o,i,a,s){i===void 0&&(i=null),s===void 0&&(s=function(l){return new bc.Channel(l)});var c=new bc.ChannelConfig(e,r,t.errorCode(),o),u=s(c);return Kg.default.handshake(u,n).then(function(l){var d=l.protocolVersion,h=l.consumeRemainingBuffer,p=new bc.Chunker(u),v=new bc.Dechunker,y=function(b){return Kg.default.create({version:d,channel:u,chunker:p,dechunker:v,disableLosslessIntegers:r.disableLosslessIntegers,useBigInt:r.useBigInt,serversideRouting:i,server:b.server,log:b.logger,observer:{onObserversCountChange:b._handleOngoingRequestsNumberChange.bind(b),onError:b._handleFatalError.bind(b),onFailure:b._resetOnFailure.bind(b),onProtocolError:b._handleProtocolError.bind(b),onErrorApplyTransformation:function(w){return b.handleAndTransformError(w,b._address)}}})},_=new eS(u,t,e,n,r.disableLosslessIntegers,i,p,r.notificationFilter,y,r.telemetryDisabled,a);return h(function(b){return v.write(b)}),_}).catch(function(l){return u.close().then(function(){throw l})})}Zs.createChannelConnection=Z9;var eS=function(e){H9(r,e);function r(t,n,o,i,a,s,c,u,l,d,h){a===void 0&&(a=!1),s===void 0&&(s=null),h===void 0&&(h=function(v){});var p=e.call(this,n)||this;return p._authToken=null,p._idle=!1,p._reseting=!1,p._resetObservers=[],p._id=Y9++,p._address=o,p._server={address:o.asHostPort()},p._creationTimestamp=Date.now(),p._disableLosslessIntegers=a,p._ch=t,p._chunker=c,p._log=Q9(p,i),p._serversideRouting=s,p._notificationFilter=u,p._telemetryDisabledDriverConfig=d===!0,p._telemetryDisabledConnection=!0,p._ssrCallback=h,p._dbConnectionId=null,p._protocol=l(p),p._isBroken=!1,p._log.isDebugEnabled()&&p._log.debug("created towards ".concat(o)),p}return r.prototype.beginTransaction=function(t){return this._sendTelemetryIfEnabled(t),this._protocol.beginTransaction(t)},r.prototype.run=function(t,n,o){return this._sendTelemetryIfEnabled(o),this._protocol.run(t,n,o)},r.prototype._sendTelemetryIfEnabled=function(t){this._telemetryDisabledConnection||this._telemetryDisabledDriverConfig||t==null||t.apiTelemetryConfig==null||this._protocol.telemetry({api:t.apiTelemetryConfig.api},{onCompleted:t.apiTelemetryConfig.onTelemetrySuccess,onError:t.beforeError})},r.prototype.commitTransaction=function(t){return this._protocol.commitTransaction(t)},r.prototype.rollbackTransaction=function(t){return this._protocol.rollbackTransaction(t)},r.prototype.getProtocolVersion=function(){return this._protocol.version},Object.defineProperty(r.prototype,"authToken",{get:function(){return this._authToken},set:function(t){this._authToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return this._protocol.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(t){this._dbConnectionId=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){return this._idleTimestamp},set:function(t){this._idleTimestamp=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){return this._creationTimestamp},enumerable:!1,configurable:!0}),r.prototype.connect=function(t,n,o,i){return qg(this,void 0,void 0,function(){var a=this;return Gg(this,function(s){switch(s.label){case 0:if(this._protocol.initialized&&!this._protocol.supportsReAuth)throw(0,So.newError)("Connection does not support re-auth");return this._authToken=o,this._protocol.initialized?[3,2]:[4,this._initialize(t,n,o)];case 1:return[2,s.sent()];case 2:return i?[4,new Promise(function(c,u){a._protocol.logoff({onError:u}),a._protocol.logon({authToken:o,onError:u,onComplete:function(){return c(a)},flush:!0})})]:[3,4];case 3:return[2,s.sent()];case 4:return this._protocol.logoff(),this._protocol.logon({authToken:o,flush:!0}),[2,this]}})})},r.prototype._initialize=function(t,n,o){var i=this,a=this;return new Promise(function(s,c){i._protocol.initialize({userAgent:t,boltAgent:n,authToken:o,notificationFilter:i._notificationFilter,onError:function(u){return c(u)},onComplete:function(u){var l;if(u){var d=u.server;(!i.version||d)&&(i.version=d);var h=u.connection_id;if(i.databaseId||(i.databaseId=h),u.hints){var p=u.hints["connection.recv_timeout_seconds"];if(p!=null){var v=(0,So.toNumber)(p);Number.isInteger(v)&&v>0?i._ch.setupReceiveTimeout(v*1e3):i._log.info("Server located at ".concat(i._address," supplied an invalid connection receive timeout value (").concat(v,"). ")+"Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}var y=u.hints["telemetry.enabled"];y===!0&&(i._telemetryDisabledConnection=!1),i.SSREnabledHint=u.hints["ssr.enabled"]}i._ssrCallback((l=i.SSREnabledHint)!==null&&l!==void 0?l:!1,"OPEN")}s(a)}})})},r.prototype.protocol=function(){return this._protocol},Object.defineProperty(r.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return this._server.version},set:function(t){this._server.version=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),r.prototype._handleFatalError=function(t){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||t,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by ".concat(this._error," (").concat(So.json.stringify(this._error),")")),this._protocol.notifyFatalError(this._error)},r.prototype._setIdle=function(t){this._idle=!0,this._ch.stopReceiveTimeout(),this._protocol.queueObserverIfProtocolIsNotBroken(t)},r.prototype._unsetIdle=function(){this._idle=!1,this._updateCurrentObserver()},r.prototype._queueObserver=function(t){return this._protocol.queueObserverIfProtocolIsNotBroken(t)},r.prototype.hasOngoingObservableRequests=function(){return!this._idle&&this._protocol.hasOngoingObservableRequests()},r.prototype.resetAndFlush=function(){var t=this;return new Promise(function(n,o){t._reset({onError:function(i){if(t._isBroken)o(i);else{var a=t._handleProtocolError("Received FAILURE as a response for RESET: ".concat(i));o(a)}},onComplete:function(){n()}})})},r.prototype._resetOnFailure=function(){var t=this;this.isOpen()&&this._reset({onError:function(){t._protocol.resetFailure()},onComplete:function(){t._protocol.resetFailure()}})},r.prototype._reset=function(t){var n=this;if(this._reseting){this._protocol.isLastMessageReset()?this._resetObservers.push(t):this._protocol.reset({onError:function(i){t.onError(i)},onComplete:function(){t.onComplete()}});return}this._resetObservers.push(t),this._reseting=!0;var o=function(i){n._reseting=!1;var a=n._resetObservers;n._resetObservers=[],a.forEach(i)};this._protocol.reset({onError:function(i){o(function(a){return a.onError(i)})},onComplete:function(){o(function(i){return i.onComplete()})}})},r.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},r.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},r.prototype._handleOngoingRequestsNumberChange=function(t){this._idle||(t===0?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout())},r.prototype.close=function(){var t;return qg(this,void 0,void 0,function(){return Gg(this,function(n){switch(n.label){case 0:return this._ssrCallback((t=this.SSREnabledHint)!==null&&t!==void 0?t:!1,"CLOSE"),this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return n.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},r.prototype.toString=function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")},r.prototype._handleProtocolError=function(t){this._protocol.resetFailure(),this._updateCurrentObserver();var n=(0,So.newError)(t,G9);return this._handleFatalError(n),n},r}(q9.default);Zs.default=eS;function Q9(e,r){return new K9(r._level,function(t,n){return r._loggerFunction(t,"".concat(e," ").concat(n))})}var gy={},X9=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),J9=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gy,"__esModule",{value:!0});var eK=J9(Ys),tK=function(e){X9(r,e);function r(t,n){var o=e.call(this,n)||this;return n&&(o._originalErrorHandler=t._errorHandler,t._errorHandler=o._errorHandler),o._delegate=t,o}return r.prototype.beginTransaction=function(t){return this._delegate.beginTransaction(t)},r.prototype.run=function(t,n,o){return this._delegate.run(t,n,o)},r.prototype.commitTransaction=function(t){return this._delegate.commitTransaction(t)},r.prototype.rollbackTransaction=function(t){return this._delegate.rollbackTransaction(t)},r.prototype.getProtocolVersion=function(){return this._delegate.getProtocolVersion()},Object.defineProperty(r.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(t){this._delegate.databaseId=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"authToken",{get:function(){return this._delegate.authToken},set:function(t){this._delegate.authToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return this._delegate.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return this._delegate.version},set:function(t){this._delegate.version=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){return this._delegate.creationTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){return this._delegate.idleTimestamp},set:function(t){this._delegate.idleTimestamp=t},enumerable:!1,configurable:!0}),r.prototype.isOpen=function(){return this._delegate.isOpen()},r.prototype.protocol=function(){return this._delegate.protocol()},r.prototype.connect=function(t,n,o,i){return this._delegate.connect(t,n,o,i)},r.prototype.write=function(t,n,o){return this._delegate.write(t,n,o)},r.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},r.prototype.hasOngoingObservableRequests=function(){return this._delegate.hasOngoingObservableRequests()},r.prototype.close=function(){return this._delegate.close()},r.prototype.release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate.release()},r}(eK.default);gy.default=tK;var wy={};Object.defineProperty(wy,"__esModule",{value:!0});var tS=Y,rK=tS.error.SERVICE_UNAVAILABLE,nK=tS.error.SESSION_EXPIRED,oK=function(){function e(r,t,n,o){this._errorCode=r,this._handleUnavailability=t||$p,this._handleWriteFailure=n||$p,this._handleSecurityError=o||$p}return e.create=function(r){var t=r.errorCode,n=r.handleUnavailability,o=r.handleWriteFailure,i=r.handleSecurityError;return new e(t,n,o,i)},e.prototype.errorCode=function(){return this._errorCode},e.prototype.handleAndTransformError=function(r,t,n){return iK(r)?this._handleSecurityError(r,t,n):aK(r)?this._handleUnavailability(r,t,n):uK(r)?this._handleWriteFailure(r,t,n):r},e}();wy.default=oK;function iK(e){return e!=null&&e.code!=null&&e.code.startsWith("Neo.ClientError.Security.")}function aK(e){return e?e.code===nK||e.code===rK||e.code==="Neo.TransientError.General.DatabaseUnavailable":!1}function uK(e){return e?e.code==="Neo.ClientError.Cluster.NotALeader"||e.code==="Neo.ClientError.General.ForbiddenOnReadOnlyDatabase":!1}function $p(e){return e}(function(e){var r=f&&f.__createBinding||(Object.create?function(u,l,d,h){h===void 0&&(h=d);var p=Object.getOwnPropertyDescriptor(l,d);(!p||("get"in p?!l.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return l[d]}}),Object.defineProperty(u,h,p)}:function(u,l,d,h){h===void 0&&(h=d),u[h]=l[d]}),t=f&&f.__setModuleDefault||(Object.create?function(u,l){Object.defineProperty(u,"default",{enumerable:!0,value:l})}:function(u,l){u.default=l}),n=f&&f.__importStar||function(u){if(u&&u.__esModule)return u;var l={};if(u!=null)for(var d in u)d!=="default"&&Object.prototype.hasOwnProperty.call(u,d)&&r(l,u,d);return t(l,u),l},o=f&&f.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=e.ConnectionErrorHandler=e.DelegateConnection=e.ChannelConnection=e.Connection=void 0;var i=o(Ys);e.Connection=i.default;var a=n(Zs);e.ChannelConnection=a.default,Object.defineProperty(e,"createChannelConnection",{enumerable:!0,get:function(){return a.createChannelConnection}});var s=o(gy);e.DelegateConnection=s.default;var c=o(wy);e.ConnectionErrorHandler=c.default,e.default=i.default})(Id);var Oy={},sK=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},cK=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Oy,"__esModule",{value:!0});var lK=Y,Yg=tr,fK=function(){function e(r){var t=r.authTokenManager,n=r.userAgent,o=r.boltAgent;this._authTokenManager=t||(0,lK.staticAuthTokenManager)({}),this._userAgent=n,this._boltAgent=o}return e.prototype.authenticate=function(r){var t=r.connection,n=r.auth,o=r.skipReAuth,i=r.waitReAuth,a=r.forceReAuth;return sK(this,void 0,void 0,function(){var s,c;return cK(this,function(u){switch(u.label){case 0:return n==null?[3,3]:(s=t.supportsReAuth===!0&&(!Yg.object.equals(t.authToken,n)&&o!==!0||a===!0),t.authToken==null||s?[4,t.connect(this._userAgent,this._boltAgent,n,i||!1)]:[3,2]);case 1:return[2,u.sent()];case 2:return[2,t];case 3:return[4,this._authTokenManager.getToken()];case 4:return c=u.sent(),Yg.object.equals(c,t.authToken)?[3,6]:[4,t.connect(this._userAgent,this._boltAgent,c,!1)];case 5:return[2,u.sent()];case 6:return[2,t]}})})},e.prototype.handleError=function(r){var t=r.connection,n=r.code;return t&&n.startsWith("Neo.ClientError.Security.")?this._authTokenManager.handleSecurityException(t.authToken,n):!1},e}();Oy.default=fK;var Ey={},dK=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},hK=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Ey,"__esModule",{value:!0});var pK=function(){function e(r){var t=r.connectionLivenessCheckTimeout;this._connectionLivenessCheckTimeout=t}return e.prototype.check=function(r){return dK(this,void 0,void 0,function(){var t;return hK(this,function(n){switch(n.label){case 0:return this._isCheckDisabled||this._isNewlyCreatedConnection(r)?[2,!0]:(t=Date.now()-r.idleTimestamp,this._connectionLivenessCheckTimeout===0||t>this._connectionLivenessCheckTimeout?[4,r.resetAndFlush().then(function(){return!0})]:[3,2]);case 1:return[2,n.sent()];case 2:return[2,!0]}})})},Object.defineProperty(e.prototype,"_isCheckDisabled",{get:function(){return this._connectionLivenessCheckTimeout==null||this._connectionLivenessCheckTimeout<0},enumerable:!1,configurable:!0}),e.prototype._isNewlyCreatedConnection=function(r){return r.authToken==null},e}();Ey.default=pK;var Sy={},vK=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},_K=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Sy,"__esModule",{value:!0});var yK=so,bK=function(){function e(r){var t=r.clientCertificateProvider,n=r.loader;this._clientCertificateProvider=t,this._loader=n||yK.ClientCertificatesLoader,this._clientCertificate=null}return e.prototype.getClientCertificate=function(){return vK(this,void 0,void 0,function(){var r,t,n=this;return _K(this,function(o){switch(o.label){case 0:return r=this._clientCertificateProvider!=null,r?(t=this._clientCertificate==null,t?[3,2]:[4,this._clientCertificateProvider.hasUpdate()]):[3,3];case 1:t=o.sent(),o.label=2;case 2:r=t,o.label=3;case 3:return r&&(this._clientCertificate=Promise.resolve(this._clientCertificateProvider.getClientCertificate()).then(this._loader.load).then(function(i){return n._clientCertificate=i,n._clientCertificate}).catch(function(i){throw n._clientCertificate=null,i})),[2,this._clientCertificate]}})})},e}();Sy.default=bK;var mK=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),On=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},En=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},gK=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},wK=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))},Py=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ks,"__esModule",{value:!0});var Zg=Id,Po=Y,OK=Py(Oy),EK=tr,SK=Py(Ey),PK=Py(Sy),TK=Po.error.SERVICE_UNAVAILABLE,CK=["Neo.ClientError.Security.CredentialsExpired","Neo.ClientError.Security.Forbidden","Neo.ClientError.Security.TokenExpired","Neo.ClientError.Security.Unauthorized"],rS=Po.internal.pool,Qg=rS.Pool,AK=rS.PoolConfig,IK=function(e){mK(r,e);function r(t,n){var o=t.id,i=t.config,a=t.log,s=t.userAgent,c=t.boltAgent,u=t.authTokenManager,l=t.newPool,d=l===void 0?function(){for(var p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];return new(Qg.bind.apply(Qg,wK([void 0],gK(p),!1)))}:l;n===void 0&&(n=null);var h=e.call(this)||this;return h._id=o,h._config=i,h._log=a,h._clientCertificateHolder=new PK.default({clientCertificateProvider:h._config.clientCertificate}),h._authenticationProvider=new OK.default({authTokenManager:u,userAgent:s,boltAgent:c}),h._livenessCheckProvider=new SK.default({connectionLivenessCheckTimeout:i.connectionLivenessCheckTimeout}),h._userAgent=s,h._boltAgent=c,h._createChannelConnection=n||function(p){return On(h,void 0,void 0,function(){var v,y;return En(this,function(_){switch(_.label){case 0:return v=Zg.createChannelConnection,y=[p,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,v.apply(void 0,y.concat([_.sent()]))]}})})},h._connectionPool=d({create:h._createConnection.bind(h),destroy:h._destroyConnection.bind(h),validateOnAcquire:h._validateConnectionOnAcquire.bind(h),validateOnRelease:h._validateConnectionOnRelease.bind(h),installIdleObserver:r._installIdleObserverOnConnection.bind(h),removeIdleObserver:r._removeIdleObserverOnConnection.bind(h),config:AK.fromDriverConfig(i),log:h._log}),h._openConnections={},h}return r.prototype._createConnectionErrorHandler=function(){return new Zg.ConnectionErrorHandler(TK)},r.prototype._getClientCertificate=function(){return On(this,void 0,void 0,function(){return En(this,function(t){return[2,this._config.clientCertificate.getClientCertificate()]})})},r.prototype._createConnection=function(t,n,o){var i=this,a=t.auth;return this._createChannelConnection(n).then(function(s){return s.release=function(){return s.idleTimestamp=Date.now(),o(n,s)},i._openConnections[s.id]=s,i._authenticationProvider.authenticate({connection:s,auth:a}).catch(function(c){throw i._destroyConnection(s),c})})},r.prototype._validateConnectionOnAcquire=function(t,n){var o=t.auth,i=t.skipReAuth;return On(this,void 0,void 0,function(){var a,s;return En(this,function(c){switch(c.label){case 0:if(!this._validateConnection(n))return[2,!1];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this._livenessCheckProvider.check(n)];case 2:return c.sent(),[3,4];case 3:return a=c.sent(),this._log.debug("The connection ".concat(n.id," is not alive because of an error ").concat(a.code," '").concat(a.message,"'")),[2,!1];case 4:return c.trys.push([4,6,,7]),[4,this._authenticationProvider.authenticate({connection:n,auth:o,skipReAuth:i})];case 5:return c.sent(),[2,!0];case 6:return s=c.sent(),this._log.debug("The connection ".concat(n.id," is not valid because of an error ").concat(s.code," '").concat(s.message,"'")),[2,!1];case 7:return[2]}})})},r.prototype._validateConnectionOnRelease=function(t){return t._sticky!==!0&&this._validateConnection(t)},r.prototype._validateConnection=function(t){if(!t.isOpen())return!1;var n=this._config.maxConnectionLifetime,o=Date.now()-t.creationTimestamp;return!(o>n)},r.prototype._destroyConnection=function(t){return delete this._openConnections[t.id],t.close()},r.prototype._verifyConnectivityAndGetServerVersion=function(t){var n=t.address;return On(this,void 0,void 0,function(){var o,i;return En(this,function(a){switch(a.label){case 0:return[4,this._connectionPool.acquire({},n)];case 1:o=a.sent(),i=new Po.ServerInfo(o.server,o.protocol().version),a.label=2;case 2:return a.trys.push([2,,5,7]),o.protocol().isLastMessageLogon()?[3,4]:[4,o.resetAndFlush()];case 3:a.sent(),a.label=4;case 4:return[3,7];case 5:return[4,o.release()];case 6:return a.sent(),[7];case 7:return[2,i]}})})},r.prototype._verifyAuthentication=function(t){var n=t.getAddress,o=t.auth;return On(this,void 0,void 0,function(){var i,a,s,c,u,l;return En(this,function(d){switch(d.label){case 0:i=[],d.label=1;case 1:return d.trys.push([1,8,9,11]),[4,n()];case 2:return a=d.sent(),[4,this._connectionPool.acquire({auth:o,skipReAuth:!0},a)];case 3:if(s=d.sent(),i.push(s),c=!s.protocol().isLastMessageLogon(),!s.supportsReAuth)throw(0,Po.newError)("Driver is connected to a database that does not support user switch.");return c&&s.supportsReAuth?[4,this._authenticationProvider.authenticate({connection:s,auth:o,waitReAuth:!0,forceReAuth:!0})]:[3,5];case 4:return d.sent(),[3,7];case 5:return c&&!s.supportsReAuth?[4,this._connectionPool.acquire({auth:o},a,{requireNew:!0})]:[3,7];case 6:u=d.sent(),u._sticky=!0,i.push(u),d.label=7;case 7:return[2,!0];case 8:if(l=d.sent(),CK.includes(l.code))return[2,!1];throw l;case 9:return[4,Promise.all(i.map(function(h){return h.release()}))];case 10:return d.sent(),[7];case 11:return[2]}})})},r.prototype._verifyStickyConnection=function(t){var n=t.auth,o=t.connection;return t.address,On(this,void 0,void 0,function(){var i,a;return En(this,function(s){switch(s.label){case 0:return i=EK.object.equals(n,o.authToken),a=!i,o._sticky=i&&!o.supportsReAuth,a||o._sticky?[4,o.release()]:[3,2];case 1:throw s.sent(),(0,Po.newError)("Driver is connected to a database that does not support user switch.");case 2:return[2]}})})},r.prototype.close=function(){return On(this,void 0,void 0,function(){return En(this,function(t){switch(t.label){case 0:return[4,this._connectionPool.close()];case 1:return t.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(n){return n.close()}))];case 2:return t.sent(),[2]}})})},r._installIdleObserverOnConnection=function(t,n){t._setIdle(n)},r._removeIdleObserverOnConnection=function(t){t._unsetIdle()},r.prototype._handleSecurityError=function(t,n,o){var i=this._authenticationProvider.handleError({connection:o,code:t.code});return i&&(t.retriable=!0),t.code==="Neo.ClientError.Security.AuthorizationExpired"&&this._connectionPool.apply(n,function(a){a.authToken=null}),o&&o.close().catch(function(){}),t},r}(Po.ConnectionProvider);Ks.default=IK;var Ty={},RK=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rr=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},$r=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},$K=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ty,"__esModule",{value:!0});var jK=$K(Ks),Xg=Id,nS=Y,Rd=nS.internal.constants,NK=Rd.BOLT_PROTOCOL_V3,kK=Rd.BOLT_PROTOCOL_V4_0,MK=Rd.BOLT_PROTOCOL_V4_4,DK=Rd.BOLT_PROTOCOL_V5_1,LK=nS.error.SERVICE_UNAVAILABLE,UK=function(e){RK(r,e);function r(t){var n=t.id,o=t.config,i=t.log,a=t.address,s=t.userAgent,c=t.boltAgent,u=t.authTokenManager,l=t.newPool,d=e.call(this,{id:n,config:o,log:i,userAgent:s,boltAgent:c,authTokenManager:u,newPool:l})||this;return d._address=a,d}return r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t;n.accessMode;var o=n.database;n.bookmarks;var i=n.auth,a=n.forceReAuth;return Rr(this,void 0,void 0,function(){var s,c,u=this;return $r(this,function(l){switch(l.label){case 0:return s=Xg.ConnectionErrorHandler.create({errorCode:LK,handleSecurityError:function(d,h,p){return u._handleSecurityError(d,h,p,o)}}),[4,this._connectionPool.acquire({auth:i,forceReAuth:a},this._address)];case 1:return c=l.sent(),i?[4,this._verifyStickyConnection({auth:i,connection:c,address:this._address})]:[3,3];case 2:return l.sent(),[2,c];case 3:return[2,new Xg.DelegateConnection(c,s)]}})})},r.prototype._handleSecurityError=function(t,n,o,i){return this._log.warn("Direct driver ".concat(this._id," will close connection to ").concat(n," for database '").concat(i,"' because of an error ").concat(t.code," '").concat(t.message,"'")),e.prototype._handleSecurityError.call(this,t,n,o)},r.prototype._hasProtocolVersion=function(t){return Rr(this,void 0,void 0,function(){var n,o;return $r(this,function(i){switch(i.label){case 0:return[4,this._createChannelConnection(this._address)];case 1:return n=i.sent(),o=n.protocol()?n.protocol().version:null,[4,n.close()];case 2:return i.sent(),o?[2,t(o)]:[2,!1]}})})},r.prototype.supportsMultiDb=function(){return Rr(this,void 0,void 0,function(){return $r(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=kK})];case 1:return[2,t.sent()]}})})},r.prototype.getNegotiatedProtocolVersion=function(){var t=this;return new Promise(function(n,o){t._hasProtocolVersion(n).catch(o)})},r.prototype.supportsTransactionConfig=function(){return Rr(this,void 0,void 0,function(){return $r(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=NK})];case 1:return[2,t.sent()]}})})},r.prototype.supportsUserImpersonation=function(){return Rr(this,void 0,void 0,function(){return $r(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=MK})];case 1:return[2,t.sent()]}})})},r.prototype.supportsSessionAuth=function(){return Rr(this,void 0,void 0,function(){return $r(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=DK})];case 1:return[2,t.sent()]}})})},r.prototype.verifyAuthentication=function(t){var n=t.auth;return Rr(this,void 0,void 0,function(){var o=this;return $r(this,function(i){return[2,this._verifyAuthentication({auth:n,getAddress:function(){return o._address}})]})})},r.prototype.verifyConnectivityAndGetServerInfo=function(){return Rr(this,void 0,void 0,function(){return $r(this,function(t){switch(t.label){case 0:return[4,this._verifyConnectivityAndGetServerVersion({address:this._address})];case 1:return[2,t.sent()]}})})},r}(jK.default);Ty.default=UK;var Cy={},qn={},Ay={},Mi={},jp=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Np=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(Mi,"__esModule",{value:!0});Mi.createValidRoutingTable=void 0;var Et=Y,oS=Et.internal.constants,FK=oS.ACCESS_MODE_WRITE,BK=oS.ACCESS_MODE_READ,kp=Et.internal.serverAddress.ServerAddress,Iy=Et.error.PROTOCOL_ERROR,xK=1,iS=function(){function e(r){var t=r===void 0?{}:r,n=t.database,o=t.routers,i=t.readers,a=t.writers,s=t.expirationTime,c=t.ttl;this.database=n||null,this.databaseName=n||"default database",this.routers=o||[],this.readers=i||[],this.writers=a||[],this.expirationTime=s||(0,Et.int)(0),this.ttl=c}return e.fromRawRoutingTable=function(r,t,n){return aS(r,t,n)},e.prototype.forget=function(r){this.readers=mc(this.readers,r),this.writers=mc(this.writers,r)},e.prototype.forgetRouter=function(r){this.routers=mc(this.routers,r)},e.prototype.forgetWriter=function(r){this.writers=mc(this.writers,r)},e.prototype.isStaleFor=function(r){return this.expirationTime.lessThan(Date.now())||this.routers.length<xK||r===BK&&this.readers.length===0||r===FK&&this.writers.length===0},e.prototype.isExpiredFor=function(r){return this.expirationTime.add(r).lessThan(Date.now())},e.prototype.allServers=function(){return Np(Np(Np([],jp(this.routers),!1),jp(this.readers),!1),jp(this.writers),!1)},e.prototype.toString=function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")},e}();Mi.default=iS;function mc(e,r){return e.filter(function(t){return t.asKey()!==r.asKey()})}function aS(e,r,t){var n=t.ttl,o=WK(t,r),i=VK(t,r),a=i.routers,s=i.readers,c=i.writers;return Jg(a,"routers",r),Jg(s,"readers",r),new iS({database:e||t.db,routers:a,readers:s,writers:c,expirationTime:o,ttl:n})}Mi.createValidRoutingTable=aS;function VK(e,r){try{var t=[],n=[],o=[];return e.servers.forEach(function(i){var a=i.role,s=i.addresses;a==="ROUTE"?t=Mp(s).map(function(c){return kp.fromUrl(c)}):a==="WRITE"?o=Mp(s).map(function(c){return kp.fromUrl(c)}):a==="READ"&&(n=Mp(s).map(function(c){return kp.fromUrl(c)}))}),{routers:t,readers:n,writers:o}}catch(i){throw(0,Et.newError)("Unable to parse servers entry from router ".concat(r,` from addresses:
`).concat(Et.json.stringify(e.servers),`
Error message: `).concat(i.message),Iy)}}function WK(e,r){try{var t=(0,Et.int)(Date.now()),n=(0,Et.int)(e.ttl).multiply(1e3).add(t);return n.lessThan(t)?Et.Integer.MAX_VALUE:n}catch(o){throw(0,Et.newError)("Unable to parse TTL entry from router ".concat(r,` from raw routing table:
`).concat(Et.json.stringify(e),`
Error message: `).concat(o.message),Iy)}}function Jg(e,r,t){if(e.length===0)throw(0,Et.newError)("Received no "+r+" from router "+t,Iy)}function Mp(e){if(!Array.isArray(e))throw new TypeError("Array expected but got: "+e);return Array.from(e)}var zK=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ay,"__esModule",{value:!0});var HK=zK(Mi),qK=function(){function e(r){this._routingContext=r}return e.prototype.lookupRoutingTableOnRouter=function(r,t,n,o){var i=this;return r._acquireConnection(function(a){return i._requestRawRoutingTable(a,r,t,n,o).then(function(s){return s.isNull?null:HK.default.fromRawRoutingTable(t,n,s)})})},e.prototype._requestRawRoutingTable=function(r,t,n,o,i){var a=this;return new Promise(function(s,c){r.protocol().requestRoutingInformation({routingContext:a._routingContext,databaseName:n,impersonatedUser:i,sessionContext:{bookmarks:t._lastBookmarks,mode:t._mode,database:t._database,afterComplete:t._onComplete},onCompleted:s,onError:c})})},e}();Ay.default=qK;var uS=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qn,"__esModule",{value:!0});qn.RoutingTable=qn.Rediscovery=void 0;var sS=uS(Ay);qn.Rediscovery=sS.default;var GK=uS(Mi);qn.RoutingTable=GK.default;qn.default=sS.default;var KK=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fl=f&&f.__assign||function(){return fl=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},fl.apply(this,arguments)},YK=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),ZK=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),QK=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&YK(r,e,t);return ZK(r,e),r},Te=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Ce=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Wv=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},cr=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},cS=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cy,"__esModule",{value:!0});var Ye=Y,Dp=QK(qn),XK=so,JK=cS(Ad),eY=cS(Ks),tY=zr,Sn=Id,rY=tr,gc=Ye.error.SERVICE_UNAVAILABLE,Qi=Ye.error.SESSION_EXPIRED,nY=Ye.internal.bookmarks.Bookmarks,Di=Ye.internal.constants,e0=Di.ACCESS_MODE_READ,wc=Di.ACCESS_MODE_WRITE,oY=Di.BOLT_PROTOCOL_V3,iY=Di.BOLT_PROTOCOL_V4_0,aY=Di.BOLT_PROTOCOL_V4_4,uY=Di.BOLT_PROTOCOL_V5_1,sY="Neo.ClientError.Procedure.ProcedureNotFound",cY="Neo.ClientError.Database.DatabaseNotFound",lY="Neo.ClientError.Transaction.InvalidBookmark",fY="Neo.ClientError.Transaction.InvalidBookmarkMixture",dY="Neo.ClientError.Security.AuthorizationExpired",hY="Neo.ClientError.Statement.ArgumentError",pY="Neo.ClientError.Request.Invalid",vY="Neo.ClientError.Statement.TypeError",_Y="N/A",yY="system",Xi=null,bY=(0,Ye.int)(3e4),mY=function(e){KK(r,e);function r(t){var n=t.id,o=t.address,i=t.routingContext,a=t.hostNameResolver,s=t.config,c=t.log,u=t.userAgent,l=t.boltAgent,d=t.authTokenManager,h=t.routingTablePurgeDelay,p=t.newPool,v=e.call(this,{id:n,config:s,log:c,userAgent:u,boltAgent:l,authTokenManager:d,newPool:p},function(y){return Te(v,void 0,void 0,function(){var _,b;return Ce(this,function(w){switch(w.label){case 0:return _=Sn.createChannelConnection,b=[y,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,_.apply(void 0,b.concat([w.sent(),this._routingContext,this._channelSsrCallback.bind(this)]))]}})})})||this;return v._routingContext=fl(fl({},i),{address:o.toString()}),v._seedRouter=o,v._rediscovery=new Dp.default(v._routingContext),v._loadBalancingStrategy=new tY.LeastConnectedLoadBalancingStrategy(v._connectionPool),v._hostNameResolver=a,v._dnsResolver=new XK.HostNameResolver,v._log=c,v._useSeedRouter=!0,v._routingTableRegistry=new gY(h?(0,Ye.int)(h):bY),v._refreshRoutingTable=rY.functional.reuseOngoingRequest(v._refreshRoutingTable,v),v._withSSR=0,v._withoutSSR=0,v}return r.prototype._createConnectionErrorHandler=function(){return new Sn.ConnectionErrorHandler(Qi)},r.prototype._handleUnavailability=function(t,n,o){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(n," for database '").concat(o,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forget(n,o||Xi),t},r.prototype._handleSecurityError=function(t,n,o,i){return this._log.warn("Routing driver ".concat(this._id," will close connections to ").concat(n," for database '").concat(i,"' because of an error ").concat(t.code," '").concat(t.message,"'")),e.prototype._handleSecurityError.call(this,t,n,o,i)},r.prototype._handleWriteFailure=function(t,n,o){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(n," for database '").concat(o,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forgetWriter(n,o||Xi),(0,Ye.newError)("No longer possible to write to server at "+n,Qi,t)},r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t,o=n.accessMode,i=n.database,a=n.bookmarks,s=n.impersonatedUser,c=n.onDatabaseNameResolved,u=n.auth,l=n.homeDb;return Te(this,void 0,void 0,function(){var d,h,p,v,y,_=this;return Ce(this,function(b){switch(b.label){case 0:return d={database:i||Xi},h=new Sn.ConnectionErrorHandler(Qi,function(w,S){return _._handleUnavailability(w,S,d.database)},function(w,S){return _._handleWriteFailure(w,S,l??d.database)},function(w,S,E){return _._handleSecurityError(w,S,E,d.database)}),this.SSREnabled()&&l!==void 0&&i===""?(v=this._routingTableRegistry.get(l,function(){return new Dp.RoutingTable({database:l})}),v&&!v.isStaleFor(o)?[4,this.getConnectionFromRoutingTable(v,u,o,h)]:[3,2]):[3,2];case 1:if(p=b.sent(),this.SSREnabled())return[2,p];p.release(),b.label=2;case 2:return[4,this._freshRoutingTable({accessMode:o,database:d.database,bookmarks:a,impersonatedUser:s,auth:u,onDatabaseNameResolved:function(w){d.database=d.database||w,c&&c(w)}})];case 3:return y=b.sent(),[2,this.getConnectionFromRoutingTable(y,u,o,h)]}})})},r.prototype.getConnectionFromRoutingTable=function(t,n,o,i){return Te(this,void 0,void 0,function(){var a,s,c,u,l;return Ce(this,function(d){switch(d.label){case 0:if(o===e0)s=this._loadBalancingStrategy.selectReader(t.readers),a="read";else if(o===wc)s=this._loadBalancingStrategy.selectWriter(t.writers),a="write";else throw(0,Ye.newError)("Illegal mode "+o);if(!s)throw(0,Ye.newError)("Failed to obtain connection towards ".concat(a," server. Known routing table is: ").concat(t),Qi);d.label=1;case 1:return d.trys.push([1,5,,6]),[4,this._connectionPool.acquire({auth:n},s)];case 2:return c=d.sent(),n?[4,this._verifyStickyConnection({auth:n,connection:c,address:s})]:[3,4];case 3:return d.sent(),[2,c];case 4:return[2,new Sn.DelegateConnection(c,i)];case 5:throw u=d.sent(),l=i.handleAndTransformError(u,s),l;case 6:return[2]}})})},r.prototype._hasProtocolVersion=function(t){return Te(this,void 0,void 0,function(){var n,o,i,a,s,c;return Ce(this,function(u){switch(u.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:n=u.sent(),i=0,u.label=2;case 2:if(!(i<n.length))return[3,8];u.label=3;case 3:return u.trys.push([3,6,,7]),[4,this._createChannelConnection(n[i])];case 4:return a=u.sent(),s=a.protocol()?a.protocol().version:null,[4,a.close()];case 5:return u.sent(),s?[2,t(s)]:[2,!1];case 6:return c=u.sent(),o=c,[3,7];case 7:return i++,[3,2];case 8:if(o)throw o;return[2,!1]}})})},r.prototype.supportsMultiDb=function(){return Te(this,void 0,void 0,function(){return Ce(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=iY})];case 1:return[2,t.sent()]}})})},r.prototype.supportsTransactionConfig=function(){return Te(this,void 0,void 0,function(){return Ce(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=oY})];case 1:return[2,t.sent()]}})})},r.prototype.supportsUserImpersonation=function(){return Te(this,void 0,void 0,function(){return Ce(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=aY})];case 1:return[2,t.sent()]}})})},r.prototype.supportsSessionAuth=function(){return Te(this,void 0,void 0,function(){return Ce(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=uY})];case 1:return[2,t.sent()]}})})},r.prototype.getNegotiatedProtocolVersion=function(){var t=this;return new Promise(function(n,o){t._hasProtocolVersion(n).catch(o)})},r.prototype.verifyAuthentication=function(t){var n=t.database,o=t.accessMode,i=t.auth;return Te(this,void 0,void 0,function(){var a=this;return Ce(this,function(s){return[2,this._verifyAuthentication({auth:i,getAddress:function(){return Te(a,void 0,void 0,function(){var c,u,l;return Ce(this,function(d){switch(d.label){case 0:return c={database:n||Xi},[4,this._freshRoutingTable({accessMode:o,database:c.database,auth:i,onDatabaseNameResolved:function(h){c.database=c.database||h}})];case 1:if(u=d.sent(),l=o===wc?u.writers:u.readers,l.length===0)throw(0,Ye.newError)("No servers available for database '".concat(c.database,"' with access mode '").concat(o,"'"),gc);return[2,l[0]]}})})}})]})})},r.prototype.verifyConnectivityAndGetServerInfo=function(t){var n=t.database,o=t.accessMode;return Te(this,void 0,void 0,function(){var i,a,s,c,u,l,d,h,p,v,y,_;return Ce(this,function(b){switch(b.label){case 0:return i={database:n||Xi},[4,this._freshRoutingTable({accessMode:o,database:i.database,onDatabaseNameResolved:function(w){i.database=i.database||w}})];case 1:a=b.sent(),s=o===wc?a.writers:a.readers,c=(0,Ye.newError)("No servers available for database '".concat(i.database,"' with access mode '").concat(o,"'"),gc),b.label=2;case 2:b.trys.push([2,9,10,11]),u=Wv(s),l=u.next(),b.label=3;case 3:if(l.done)return[3,8];d=l.value,b.label=4;case 4:return b.trys.push([4,6,,7]),[4,this._verifyConnectivityAndGetServerVersion({address:d})];case 5:return h=b.sent(),[2,h];case 6:return p=b.sent(),c=p,[3,7];case 7:return l=u.next(),[3,3];case 8:return[3,11];case 9:return v=b.sent(),y={error:v},[3,11];case 10:try{l&&!l.done&&(_=u.return)&&_.call(u)}finally{if(y)throw y.error}return[7];case 11:throw c}})})},r.prototype.forget=function(t,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(o){return o.forget(t)}}),this._connectionPool.purge(t).catch(function(){})},r.prototype.forgetWriter=function(t,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(o){return o.forgetWriter(t)}})},r.prototype._freshRoutingTable=function(t){var n=t===void 0?{}:t,o=n.accessMode,i=n.database,a=n.bookmarks,s=n.impersonatedUser,c=n.onDatabaseNameResolved,u=n.auth,l=this._routingTableRegistry.get(i,function(){return new Dp.RoutingTable({database:i})});return l.isStaleFor(o)?(this._log.info('Routing table is stale for database: "'.concat(i,'" and access mode: "').concat(o,'": ').concat(l)),this._refreshRoutingTable(l,a,s,u).then(function(d){return c(d.database),d})):l},r.prototype._refreshRoutingTable=function(t,n,o,i){var a=t.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(a,t,n,o,i):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(a,t,n,o,i)},r.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(t,n,o,i,a){return Te(this,void 0,void 0,function(){var s,c,u,l,d,h,p;return Ce(this,function(v){switch(v.label){case 0:return s=[],[4,this._fetchRoutingTableUsingSeedRouter(s,this._seedRouter,n,o,i,a)];case 1:return c=cr.apply(void 0,[v.sent(),2]),u=c[0],l=c[1],u?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(t,n,o,i,a)];case 3:d=cr.apply(void 0,[v.sent(),2]),h=d[0],p=d[1],u=h,l=p||l,v.label=4;case 4:return[4,this._applyRoutingTableIfPossible(n,u,l)];case 5:return[2,v.sent()]}})})},r.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(t,n,o,i,a){return Te(this,void 0,void 0,function(){var s,c,u,l;return Ce(this,function(d){switch(d.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(t,n,o,i,a)];case 1:return s=cr.apply(void 0,[d.sent(),2]),c=s[0],u=s[1],c?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(t,this._seedRouter,n,o,i,a)];case 2:l=cr.apply(void 0,[d.sent(),2]),c=l[0],u=l[1],d.label=3;case 3:return[4,this._applyRoutingTableIfPossible(n,c,u)];case 4:return[2,d.sent()]}})})},r.prototype._fetchRoutingTableUsingKnownRouters=function(t,n,o,i,a){return Te(this,void 0,void 0,function(){var s,c,u,l;return Ce(this,function(d){switch(d.label){case 0:return[4,this._fetchRoutingTable(t,n,o,i,a)];case 1:return s=cr.apply(void 0,[d.sent(),2]),c=s[0],u=s[1],c?[2,[c,null]]:(l=t.length-1,r._forgetRouter(n,t,l),[2,[null,u]])}})})},r.prototype._fetchRoutingTableUsingSeedRouter=function(t,n,o,i,a,s){return Te(this,void 0,void 0,function(){var c,u;return Ce(this,function(l){switch(l.label){case 0:return[4,this._resolveSeedRouter(n)];case 1:return c=l.sent(),u=c.filter(function(d){return t.indexOf(d)<0}),[4,this._fetchRoutingTable(u,o,i,a,s)];case 2:return[2,l.sent()]}})})},r.prototype._resolveSeedRouter=function(t){return Te(this,void 0,void 0,function(){var n,o,i=this;return Ce(this,function(a){switch(a.label){case 0:return[4,this._hostNameResolver.resolve(t)];case 1:return n=a.sent(),[4,Promise.all(n.map(function(s){return i._dnsResolver.resolve(s)}))];case 2:return o=a.sent(),[2,[].concat.apply([],o)]}})})},r.prototype._fetchRoutingTable=function(t,n,o,i,a){return Te(this,void 0,void 0,function(){var s=this;return Ce(this,function(c){return[2,t.reduce(function(u,l,d){return Te(s,void 0,void 0,function(){var h,p,v,y,_,b,w;return Ce(this,function(S){switch(S.label){case 0:return[4,u];case 1:return h=cr.apply(void 0,[S.sent(),1]),p=h[0],p?[2,[p,null]]:(v=d-1,r._forgetRouter(n,t,v),[4,this._createSessionForRediscovery(l,o,i,a)]);case 2:if(y=cr.apply(void 0,[S.sent(),2]),_=y[0],b=y[1],!_)return[3,8];S.label=3;case 3:return S.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(_,n.database,l,i)];case 4:return[2,[S.sent(),null]];case 5:return w=S.sent(),[2,this._handleRediscoveryError(w,l)];case 6:return _.close(),[7];case 7:return[3,9];case 8:return[2,[null,b]];case 9:return[2]}})})},Promise.resolve([null,null]))]})})},r.prototype._createSessionForRediscovery=function(t,n,o,i){return Te(this,void 0,void 0,function(){var a,s,c,u,l,d,h=this;return Ce(this,function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),[4,this._connectionPool.acquire({auth:i},t)];case 1:return a=p.sent(),i?[4,this._verifyStickyConnection({auth:i,connection:a,address:t})]:[3,3];case 2:p.sent(),p.label=3;case 3:return s=Sn.ConnectionErrorHandler.create({errorCode:Qi,handleSecurityError:function(v,y,_){return h._handleSecurityError(v,y,_)}}),c=a._sticky?new Sn.DelegateConnection(a):new Sn.DelegateConnection(a,s),u=new JK.default(c),l=a.protocol().version,l<4?[2,[new Ye.Session({mode:wc,bookmarks:nY.empty(),connectionProvider:u}),null]]:[2,[new Ye.Session({mode:e0,database:yY,bookmarks:n,connectionProvider:u,impersonatedUser:o}),null]];case 4:return d=p.sent(),[2,this._handleRediscoveryError(d,t)];case 5:return[2]}})})},r.prototype._handleRediscoveryError=function(t,n){if(wY(t)||OY(t))throw t;if(t.code===sY)throw(0,Ye.newError)("Server at ".concat(n.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),gc,t);return this._log.warn("unable to fetch routing table because of an error ".concat(t)),[null,t]},r.prototype._applyRoutingTableIfPossible=function(t,n,o){return Te(this,void 0,void 0,function(){return Ce(this,function(i){switch(i.label){case 0:if(!n)throw(0,Ye.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(t),gc,o);return n.writers.length===0&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(n)];case 1:return i.sent(),[2,n]}})})},r.prototype._updateRoutingTable=function(t){return Te(this,void 0,void 0,function(){return Ce(this,function(n){switch(n.label){case 0:return[4,this._connectionPool.keepAll(t.allServers())];case 1:return n.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(t),this._log.info("Updated routing table ".concat(t)),[2]}})})},r._forgetRouter=function(t,n,o){var i=n[o];t&&i&&t.forgetRouter(i)},r.prototype._channelSsrCallback=function(t,n){if(n==="OPEN")t===!0?this._withSSR=this._withSSR+1:this._withoutSSR=this._withoutSSR+1;else if(n==="CLOSE")t===!0?this._withSSR=this._withSSR-1:this._withoutSSR=this._withoutSSR-1;else throw(0,Ye.newError)("Channel SSR Callback invoked with action other than 'OPEN' or 'CLOSE'")},r.prototype.SSREnabled=function(){return this._withSSR>0&&this._withoutSSR===0},r}(eY.default);Cy.default=mY;var gY=function(){function e(r){this._tables=new Map,this._routingTablePurgeDelay=r}return e.prototype.register=function(r){return this._tables.set(r.database,r),this},e.prototype.apply=function(r,t){var n=t===void 0?{}:t,o=n.applyWhenExists,i=n.applyWhenDontExists,a=i===void 0?function(){}:i;return this._tables.has(r)?o(this._tables.get(r)):typeof r=="string"||r===null?a():this._forEach(o),this},e.prototype.get=function(r,t){return this._tables.has(r)?this._tables.get(r):typeof t=="function"?t():t},e.prototype.removeExpired=function(){var r=this;return this._removeIf(function(t){return t.isExpiredFor(r._routingTablePurgeDelay)})},e.prototype._forEach=function(r){var t,n;try{for(var o=Wv(this._tables),i=o.next();!i.done;i=o.next()){var a=cr(i.value,2),s=a[1];r(s)}}catch(c){t={error:c}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return this},e.prototype._remove=function(r){return this._tables.delete(r),this},e.prototype._removeIf=function(r){var t,n;try{for(var o=Wv(this._tables),i=o.next();!i.done;i=o.next()){var a=cr(i.value,2),s=a[0],c=a[1];r(c)&&this._remove(s)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return this},e}();function wY(e){return[cY,lY,fY,hY,pY,vY,_Y].includes(e.code)}function OY(e){return e.code.startsWith("Neo.ClientError.Security.")&&![dY].includes(e.code)}(function(e){var r=f&&f.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingConnectionProvider=e.DirectConnectionProvider=e.PooledConnectionProvider=e.SingleConnectionProvider=void 0;var t=Ad;Object.defineProperty(e,"SingleConnectionProvider",{enumerable:!0,get:function(){return r(t).default}});var n=Ks;Object.defineProperty(e,"PooledConnectionProvider",{enumerable:!0,get:function(){return r(n).default}});var o=Ty;Object.defineProperty(e,"DirectConnectionProvider",{enumerable:!0,get:function(){return r(o).default}});var i=Cy;Object.defineProperty(e,"RoutingConnectionProvider",{enumerable:!0,get:function(){return r(i).default}})})(XE);(function(e){var r=f&&f.__createBinding||(Object.create?function(i,a,s,c){c===void 0&&(c=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(i,c,u)}:function(i,a,s,c){c===void 0&&(c=s),i[c]=a[s]}),t=f&&f.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),n=f&&f.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var s in i)s!=="default"&&Object.prototype.hasOwnProperty.call(i,s)&&r(a,i,s);return t(a,i),a},o=f&&f.__exportStar||function(i,a){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&r(a,i,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.packstream=e.channel=e.buf=e.bolt=e.loadBalancing=void 0,e.loadBalancing=n(zr),e.bolt=n(Y_),e.buf=n(co),e.channel=n(so),e.packstream=n(tt),o(XE,e)})(P1);(function(e){var r=f&&f.__awaiter||function(F,J,B,te){function G(L){return L instanceof B?L:new B(function(ee){ee(L)})}return new(B||(B=Promise))(function(L,ee){function he(we){try{Q(te.next(we))}catch(ve){ee(ve)}}function be(we){try{Q(te.throw(we))}catch(ve){ee(ve)}}function Q(we){we.done?L(we.value):G(we.value).then(he,be)}Q((te=te.apply(F,J||[])).next())})},t=f&&f.__generator||function(F,J){var B={label:0,sent:function(){if(L[0]&1)throw L[1];return L[1]},trys:[],ops:[]},te,G,L,ee;return ee={next:he(0),throw:he(1),return:he(2)},typeof Symbol=="function"&&(ee[Symbol.iterator]=function(){return this}),ee;function he(Q){return function(we){return be([Q,we])}}function be(Q){if(te)throw new TypeError("Generator is already executing.");for(;ee&&(ee=0,Q[0]&&(B=0)),B;)try{if(te=1,G&&(L=Q[0]&2?G.return:Q[0]?G.throw||((L=G.return)&&L.call(G),0):G.next)&&!(L=L.call(G,Q[1])).done)return L;switch(G=0,L&&(Q=[Q[0]&2,L.value]),Q[0]){case 0:case 1:L=Q;break;case 4:return B.label++,{value:Q[1],done:!1};case 5:B.label++,G=Q[1],Q=[0];continue;case 7:Q=B.ops.pop(),B.trys.pop();continue;default:if(L=B.trys,!(L=L.length>0&&L[L.length-1])&&(Q[0]===6||Q[0]===2)){B=0;continue}if(Q[0]===3&&(!L||Q[1]>L[0]&&Q[1]<L[3])){B.label=Q[1];break}if(Q[0]===6&&B.label<L[1]){B.label=L[1],L=Q;break}if(L&&B.label<L[2]){B.label=L[2],B.ops.push(Q);break}L[2]&&B.ops.pop(),B.trys.pop();continue}Q=J.call(F,B)}catch(we){Q=[6,we],G=0}finally{te=L=0}if(Q[0]&5)throw Q[1];return{value:Q[0]?Q[1]:void 0,done:!0}}},n=f&&f.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(e,"__esModule",{value:!0}),e.UnboundRelationship=e.Relationship=e.Node=e.Record=e.ServerInfo=e.GqlStatusObject=e.Notification=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ResultSummary=e.RxResult=e.RxManagedTransaction=e.RxTransaction=e.RxSession=e.EagerResult=e.Result=e.ManagedTransaction=e.Transaction=e.Session=e.Driver=e.temporal=e.spatial=e.graph=e.error=e.routing=e.session=e.types=e.logging=e.auth=e.isRetryableError=e.Neo4jError=e.integer=e.isUnboundRelationship=e.isRelationship=e.isPathSegment=e.isPath=e.isNode=e.isDateTime=e.isLocalDateTime=e.isDate=e.isTime=e.isLocalTime=e.isDuration=e.isPoint=e.isInt=e.int=e.hasReachableServer=e.driver=e.authTokenManagers=void 0,e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.bookmarkManager=e.DateTime=e.LocalDateTime=e.Date=e.Time=e.LocalTime=e.Duration=e.Integer=e.Point=e.PathSegment=e.Path=void 0;var o=hr;Object.defineProperty(e,"Driver",{enumerable:!0,get:function(){return o.Driver}});var i=n(q_),a=Y;Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return a.authTokenManagers}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return a.Neo4jError}}),Object.defineProperty(e,"isRetryableError",{enumerable:!0,get:function(){return a.isRetryableError}}),Object.defineProperty(e,"error",{enumerable:!0,get:function(){return a.error}}),Object.defineProperty(e,"Integer",{enumerable:!0,get:function(){return a.Integer}}),Object.defineProperty(e,"int",{enumerable:!0,get:function(){return a.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return a.isInt}}),Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return a.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return a.Point}}),Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return a.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return a.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return a.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return a.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return a.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return a.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return a.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return a.isLocalTime}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return a.isNode}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return a.isPath}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return a.isPathSegment}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return a.isRelationship}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return a.isTime}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return a.isUnboundRelationship}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return a.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return a.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return a.Time}}),Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return a.Node}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return a.Path}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return a.PathSegment}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return a.Relationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return a.UnboundRelationship}}),Object.defineProperty(e,"Record",{enumerable:!0,get:function(){return a.Record}}),Object.defineProperty(e,"ResultSummary",{enumerable:!0,get:function(){return a.ResultSummary}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return a.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return a.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return a.QueryStatistics}}),Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return a.Notification}}),Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return a.GqlStatusObject}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return a.ServerInfo}}),Object.defineProperty(e,"Result",{enumerable:!0,get:function(){return a.Result}}),Object.defineProperty(e,"EagerResult",{enumerable:!0,get:function(){return a.EagerResult}}),Object.defineProperty(e,"auth",{enumerable:!0,get:function(){return a.auth}}),Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return a.Session}}),Object.defineProperty(e,"Transaction",{enumerable:!0,get:function(){return a.Transaction}}),Object.defineProperty(e,"ManagedTransaction",{enumerable:!0,get:function(){return a.ManagedTransaction}}),Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return a.bookmarkManager}}),Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return a.routing}}),Object.defineProperty(e,"resultTransformers",{enumerable:!0,get:function(){return a.resultTransformers}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return a.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return a.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return a.notificationSeverityLevel}}),Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return a.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return a.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return a.notificationFilterMinimumSeverityLevel}}),Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return a.clientCertificateProviders}});var s=P1,c=n(Wl);e.RxSession=c.default;var u=n(Vs);e.RxTransaction=u.default;var l=n(Tf);e.RxManagedTransaction=l.default;var d=n($i);e.RxResult=d.default;var h=a.internal.util,p=h.ENCRYPTION_ON,v=h.assertString,y=h.isEmptyObjectOrNull,_=a.internal.serverAddress.ServerAddress,b=a.internal.urlUtil,w="neo4j-javascript/"+i.default;function S(F){return typeof F=="object"&&F!=null&&"getToken"in F&&"handleSecurityException"in F&&typeof F.getToken=="function"&&typeof F.handleSecurityException=="function"}function E(F){if(S(F))return F;var J=F;return J=J||{},J.scheme=J.scheme||"none",(0,a.staticAuthTokenManager)({authToken:J})}function P(F,J,B){B===void 0&&(B={}),v(F,"Bolt URL");var te=b.parseDatabaseUrl(F),G=!1,L=!1,ee;switch(te.scheme){case"bolt":break;case"bolt+s":L=!0,ee="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":L=!0,ee="TRUST_ALL_CERTIFICATES";break;case"neo4j":G=!0;break;case"neo4j+s":L=!0,ee="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",G=!0;break;case"neo4j+ssc":L=!0,ee="TRUST_ALL_CERTIFICATES",G=!0;break;default:throw new Error("Unknown scheme: ".concat(te.scheme))}if(L){if("encrypted"in B||"trust"in B)throw new Error("Encryption/trust can only be configured either through URL or config, not both");B.encrypted=p,B.trust=ee,B.clientCertificate=(0,a.resolveCertificateProvider)(B.clientCertificate)}var he=E(J);B.userAgent=B.userAgent||w,B.boltAgent=a.internal.boltAgent.fromVersion(i.default);var be=_.fromUrl(te.hostAndPort),Q={address:be,typename:G?"Routing":"Direct",routing:G};return new o.Driver(Q,B,we());function we(){if(G)return function(ve,nt,m,A){return new s.RoutingConnectionProvider({id:ve,config:nt,log:m,hostNameResolver:A,authTokenManager:he,address:be,userAgent:nt.userAgent,boltAgent:nt.boltAgent,routingContext:te.query})};if(!y(te.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(F,"'"));return function(ve,nt,m){return new s.DirectConnectionProvider({id:ve,config:nt,log:m,authTokenManager:he,address:be,userAgent:nt.userAgent,boltAgent:nt.boltAgent})}}}e.driver=P;function C(F,J){return r(this,void 0,void 0,function(){var B;return t(this,function(te){switch(te.label){case 0:B=P(F,{scheme:"none",principal:"",credentials:""},J),te.label=1;case 1:return te.trys.push([1,,3,5]),[4,B.getNegotiatedProtocolVersion()];case 2:return te.sent(),[2,!0];case 3:return[4,B.close()];case 4:return te.sent(),[7];case 5:return[2]}})})}e.hasReachableServer=C;var T={console:function(F){return{level:F,logger:function(J,B){return console.log("".concat(f.Date.now()," ").concat(J.toUpperCase()," ").concat(B))}}}};e.logging=T;var I={Node:a.Node,Relationship:a.Relationship,UnboundRelationship:a.UnboundRelationship,PathSegment:a.PathSegment,Path:a.Path,Result:a.Result,EagerResult:a.EagerResult,ResultSummary:a.ResultSummary,Record:a.Record,Point:a.Point,Date:a.Date,DateTime:a.DateTime,Duration:a.Duration,LocalDateTime:a.LocalDateTime,LocalTime:a.LocalTime,Time:a.Time,Integer:a.Integer};e.types=I;var $={READ:o.READ,WRITE:o.WRITE};e.session=$;var D={toNumber:a.toNumber,toString:a.toString,inSafeRange:a.inSafeRange};e.integer=D;var q={isPoint:a.isPoint};e.spatial=q;var V={isDuration:a.isDuration,isLocalTime:a.isLocalTime,isTime:a.isTime,isDate:a.isDate,isLocalDateTime:a.isLocalDateTime,isDateTime:a.isDateTime};e.temporal=V;var H={isNode:a.isNode,isPath:a.isPath,isPathSegment:a.isPathSegment,isRelationship:a.isRelationship,isUnboundRelationship:a.isUnboundRelationship};e.graph=H;var oe={authTokenManagers:a.authTokenManagers,driver:P,hasReachableServer:C,int:a.int,isInt:a.isInt,isPoint:a.isPoint,isDuration:a.isDuration,isLocalTime:a.isLocalTime,isTime:a.isTime,isDate:a.isDate,isLocalDateTime:a.isLocalDateTime,isDateTime:a.isDateTime,isNode:a.isNode,isPath:a.isPath,isPathSegment:a.isPathSegment,isRelationship:a.isRelationship,isUnboundRelationship:a.isUnboundRelationship,integer:D,Neo4jError:a.Neo4jError,isRetryableError:a.isRetryableError,auth:a.auth,logging:T,types:I,session:$,routing:a.routing,error:a.error,graph:H,spatial:q,temporal:V,Driver:o.Driver,Session:a.Session,Transaction:a.Transaction,ManagedTransaction:a.ManagedTransaction,Result:a.Result,EagerResult:a.EagerResult,RxSession:c.default,RxTransaction:u.default,RxManagedTransaction:l.default,RxResult:d.default,ResultSummary:a.ResultSummary,Plan:a.Plan,ProfiledPlan:a.ProfiledPlan,QueryStatistics:a.QueryStatistics,Notification:a.Notification,GqlStatusObject:a.GqlStatusObject,ServerInfo:a.ServerInfo,Record:a.Record,Node:a.Node,Relationship:a.Relationship,UnboundRelationship:a.UnboundRelationship,Path:a.Path,PathSegment:a.PathSegment,Point:a.Point,Integer:a.Integer,Duration:a.Duration,LocalTime:a.LocalTime,Time:a.Time,Date:a.Date,LocalDateTime:a.LocalDateTime,DateTime:a.DateTime,bookmarkManager:a.bookmarkManager,resultTransformers:a.resultTransformers,notificationCategory:a.notificationCategory,notificationSeverityLevel:a.notificationSeverityLevel,notificationFilterDisabledCategory:a.notificationFilterDisabledCategory,notificationFilterMinimumSeverityLevel:a.notificationFilterMinimumSeverityLevel,clientCertificateProviders:a.clientCertificateProviders};e.default=oe})(nv);function lS({name:e,code:r,encode:t}){return new EY(e,r,t)}class EY{constructor(r,t,n){g(this,"name");g(this,"code");g(this,"encode");this.name=r,this.code=t,this.encode=n}digest(r){if(r instanceof Uint8Array){const t=this.encode(r);return t instanceof Uint8Array?Sa(this.code,t):t.then(n=>Sa(this.code,n))}else throw Error("Unknown type, must be binary type")}}function fS(e){return async r=>new Uint8Array(await crypto.subtle.digest(e,r))}const Ry=lS({name:"sha2-256",code:18,encode:fS("SHA-256")}),SY=lS({name:"sha2-512",code:19,encode:fS("SHA-512")}),PY=Object.freeze(Object.defineProperty({__proto__:null,sha256:Ry,sha512:SY},Symbol.toStringTag,{value:"Module"})),TY=new TextDecoder;function $y(e,r){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(r>=e.length)throw new Error("protobuf: unexpected end of data");const o=e[r++];if(t+=n<28?(o&127)<<n:(o&127)*2**n,o<128)break}return[t,r]}function dl(e,r){let t;[t,r]=$y(e,r);const n=r+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(r,n),n]}function dS(e,r){let t;return[t,r]=$y(e,r),[t&7,t>>3,r]}function CY(e){const r={},t=e.length;let n=0;for(;n<t;){let o,i;if([o,i,n]=dS(e,n),i===1){if(r.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(r.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(r.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[r.Hash,n]=dl(e,n)}else if(i===2){if(r.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(r.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let a;[a,n]=dl(e,n),r.Name=TY.decode(a)}else if(i===3){if(r.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[r.Tsize,n]=$y(e,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${i}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return r}function AY(e){const r=e.length;let t=0,n,o=!1,i;for(;t<r;){let s,c;if([s,c,t]=dS(e,t),s!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${s}`);if(c===1){if(i)throw new Error("protobuf: (PBNode) duplicate Data section");[i,t]=dl(e,t),n&&(o=!0)}else if(c===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let u;[u,t]=dl(e,t),n.push(CY(u))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(t>r)throw new Error("protobuf: (PBNode) unexpected end of data");const a={};return i&&(a.Data=i),a.Links=n||[],a}const hS=new TextEncoder,t0=2**32,IY=2**31;function RY(e,r){let t=r.length;if(typeof e.Tsize=="number"){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");t=ya(r,t,e.Tsize)-1,r[t]=24}if(typeof e.Name=="string"){const n=hS.encode(e.Name);t-=n.length,r.set(n,t),t=ya(r,t,n.length)-1,r[t]=18}return e.Hash&&(t-=e.Hash.length,r.set(e.Hash,t),t=ya(r,t,e.Hash.length)-1,r[t]=10),r.length-t}function $Y(e){const r=NY(e),t=new Uint8Array(r);let n=r;if(e.Data&&(n-=e.Data.length,t.set(e.Data,n),n=ya(t,n,e.Data.length)-1,t[n]=10),e.Links)for(let o=e.Links.length-1;o>=0;o--){const i=RY(e.Links[o],t.subarray(0,n));n-=i,n=ya(t,n,i)-1,t[n]=18}return t}function jY(e){let r=0;if(e.Hash){const t=e.Hash.length;r+=1+t+jo(t)}if(typeof e.Name=="string"){const t=hS.encode(e.Name).length;r+=1+t+jo(t)}return typeof e.Tsize=="number"&&(r+=1+jo(e.Tsize)),r}function NY(e){let r=0;if(e.Data){const t=e.Data.length;r+=1+t+jo(t)}if(e.Links)for(const t of e.Links){const n=jY(t);r+=1+n+jo(n)}return r}function ya(e,r,t){r-=jo(t);const n=r;for(;t>=IY;)e[r++]=t&127|128,t/=128;for(;t>=128;)e[r++]=t&127|128,t>>>=7;return e[r]=t,n}function jo(e){return e%2===0&&e++,Math.floor((kY(e)+6)/7)}function kY(e){let r=0;return e>=t0&&(e=Math.floor(e/t0),r=32),e>=65536&&(e>>>=16,r+=16),e>=256&&(e>>>=8,r+=8),r+MY[e]}const MY=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],DY=["Data","Links"],LY=["Hash","Name","Tsize"],zv=new TextEncoder;function pS(e,r){if(e===r)return 0;const t=e.Name?zv.encode(e.Name):[],n=r.Name?zv.encode(r.Name):[];let o=t.length,i=n.length;for(let a=0,s=Math.min(o,i);a<s;++a)if(t[a]!==n[a]){o=t[a],i=n[a];break}return o<i?-1:i<o?1:0}function r0(e,r){return!Object.keys(e).some(t=>!r.includes(t))}function vS(e){if(typeof e.asCID=="object"){const t=Z.asCID(e);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if(typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const r={};if(e.Hash){let t=Z.asCID(e.Hash);try{t||(typeof e.Hash=="string"?t=Z.parse(e.Hash):e.Hash instanceof Uint8Array&&(t=Z.decode(e.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}t&&(r.Hash=t)}if(!r.Hash)throw new TypeError("Invalid DAG-PB form");return typeof e.Name=="string"&&(r.Name=e.Name),typeof e.Tsize=="number"&&(r.Tsize=e.Tsize),r}function _S(e){if((e instanceof Uint8Array||typeof e=="string")&&(e={Data:e}),typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const r={};if(e.Data!==void 0)if(typeof e.Data=="string")r.Data=zv.encode(e.Data);else if(e.Data instanceof Uint8Array)r.Data=e.Data;else throw new TypeError("Invalid DAG-PB form");if(e.Links!==void 0)if(Array.isArray(e.Links))r.Links=e.Links.map(vS),r.Links.sort(pS);else throw new TypeError("Invalid DAG-PB form");else r.Links=[];return r}function yS(e){if(!e||typeof e!="object"||Array.isArray(e)||e instanceof Uint8Array||e["/"]&&e["/"]===e.bytes)throw new TypeError("Invalid DAG-PB form");if(!r0(e,DY))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(e.Data!==void 0&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let r=0;r<e.Links.length;r++){const t=e.Links[r];if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!r0(t,LY))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(t.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash==null||!t.Hash["/"]||t.Hash["/"]!==t.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0){if(typeof t.Tsize!="number"||t.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(r>0&&pS(t,e.Links[r-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function UY(e,r=[]){return _S({Data:e,Links:r})}function FY(e,r,t){return vS({Hash:t,Name:e,Tsize:r})}function BY(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}const xY="dag-pb",VY=112;function WY(e){yS(e);const r={};return e.Links&&(r.Links=e.Links.map(t=>{const n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),e.Data&&(r.Data=e.Data),$Y(r)}function zY(e){const r=BY(e),t=AY(r),n={};return t.Data&&(n.Data=t.Data),t.Links&&(n.Links=t.Links.map(o=>{const i={};try{i.Hash=Z.decode(o.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return o.Name!==void 0&&(i.Name=o.Name),o.Tsize!==void 0&&(i.Tsize=o.Tsize),i})),n}const HY=Object.freeze(Object.defineProperty({__proto__:null,code:VY,createLink:FY,createNode:UY,decode:zY,encode:WY,name:xY,prepare:_S,validate:yS},Symbol.toStringTag,{value:"Module"})),qY="raw",GY=85;function KY(e){return ti(e)}function YY(e){return ti(e)}const ZY=Object.freeze(Object.defineProperty({__proto__:null,code:GY,decode:YY,encode:KY,name:qY},Symbol.toStringTag,{value:"Module"}));function Tr(e){const r=new globalThis.AbortController;function t(){r.abort();for(const i of e)(i==null?void 0:i.removeEventListener)!=null&&i.removeEventListener("abort",t)}for(const i of e){if((i==null?void 0:i.aborted)===!0){t();break}(i==null?void 0:i.addEventListener)!=null&&i.addEventListener("abort",t)}function n(){for(const i of e)(i==null?void 0:i.removeEventListener)!=null&&i.removeEventListener("abort",t)}const o=r.signal;return o.clear=n,o}function jr(e=0){return new Uint8Array(e)}function Gr(e=0){return new Uint8Array(e)}const QY=Math.pow(2,7),XY=Math.pow(2,14),JY=Math.pow(2,21),jy=Math.pow(2,28),Ny=Math.pow(2,35),ky=Math.pow(2,42),My=Math.pow(2,49),fe=128,Ze=127;function mr(e){if(e<QY)return 1;if(e<XY)return 2;if(e<JY)return 3;if(e<jy)return 4;if(e<Ny)return 5;if(e<ky)return 6;if(e<My)return 7;if(Number.MAX_SAFE_INTEGER!=null&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function hl(e,r,t=0){switch(mr(e)){case 8:r[t++]=e&255|fe,e/=128;case 7:r[t++]=e&255|fe,e/=128;case 6:r[t++]=e&255|fe,e/=128;case 5:r[t++]=e&255|fe,e/=128;case 4:r[t++]=e&255|fe,e>>>=7;case 3:r[t++]=e&255|fe,e>>>=7;case 2:r[t++]=e&255|fe,e>>>=7;case 1:{r[t++]=e&255,e>>>=7;break}default:throw new Error("unreachable")}return r}function eZ(e,r,t=0){switch(mr(e)){case 8:r.set(t++,e&255|fe),e/=128;case 7:r.set(t++,e&255|fe),e/=128;case 6:r.set(t++,e&255|fe),e/=128;case 5:r.set(t++,e&255|fe),e/=128;case 4:r.set(t++,e&255|fe),e>>>=7;case 3:r.set(t++,e&255|fe),e>>>=7;case 2:r.set(t++,e&255|fe),e>>>=7;case 1:{r.set(t++,e&255),e>>>=7;break}default:throw new Error("unreachable")}return r}function bS(e,r){let t=e[r],n=0;if(n+=t&Ze,t<fe||(t=e[r+1],n+=(t&Ze)<<7,t<fe)||(t=e[r+2],n+=(t&Ze)<<14,t<fe)||(t=e[r+3],n+=(t&Ze)<<21,t<fe)||(t=e[r+4],n+=(t&Ze)*jy,t<fe)||(t=e[r+5],n+=(t&Ze)*Ny,t<fe)||(t=e[r+6],n+=(t&Ze)*ky,t<fe)||(t=e[r+7],n+=(t&Ze)*My,t<fe))return n;throw new RangeError("Could not decode varint")}function tZ(e,r){let t=e.get(r),n=0;if(n+=t&Ze,t<fe||(t=e.get(r+1),n+=(t&Ze)<<7,t<fe)||(t=e.get(r+2),n+=(t&Ze)<<14,t<fe)||(t=e.get(r+3),n+=(t&Ze)<<21,t<fe)||(t=e.get(r+4),n+=(t&Ze)*jy,t<fe)||(t=e.get(r+5),n+=(t&Ze)*Ny,t<fe)||(t=e.get(r+6),n+=(t&Ze)*ky,t<fe)||(t=e.get(r+7),n+=(t&Ze)*My,t<fe))return n;throw new RangeError("Could not decode varint")}function pie(e,r,t=0){return r==null&&(r=Gr(mr(e))),r instanceof Uint8Array?hl(e,r,t):eZ(e,r,t)}function mS(e,r=0){return e instanceof Uint8Array?bS(e,r):tZ(e,r)}function vie(e){return e}function ja(e,r){r==null&&(r=e.reduce((o,i)=>o+i.length,0));const t=Gr(r);let n=0;for(const o of e)t.set(o,n),n+=o.length;return t}function Kr(e,r){if(e===r)return!0;if(e.byteLength!==r.byteLength)return!1;for(let t=0;t<e.byteLength;t++)if(e[t]!==r[t])return!1;return!0}const gS=Symbol.for("@achingbrain/uint8arraylist");function n0(e,r){if(r==null||r<0)throw new RangeError("index is out of bounds");let t=0;for(const n of e){const o=t+n.byteLength;if(r<o)return{buf:n,index:r-t};t=o}throw new RangeError("index is out of bounds")}function Oc(e){return!!(e!=null&&e[gS])}var W0;class _t{constructor(...r){g(this,"bufs");g(this,"length");g(this,W0,!0);this.bufs=[],this.length=0,r.length>0&&this.appendAll(r)}*[(W0=gS,Symbol.iterator)](){yield*this.bufs}get byteLength(){return this.length}append(...r){this.appendAll(r)}appendAll(r){let t=0;for(const n of r)if(n instanceof Uint8Array)t+=n.byteLength,this.bufs.push(n);else if(Oc(n))t+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=t}prepend(...r){this.prependAll(r)}prependAll(r){let t=0;for(const n of r.reverse())if(n instanceof Uint8Array)t+=n.byteLength,this.bufs.unshift(n);else if(Oc(n))t+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=t}get(r){const t=n0(this.bufs,r);return t.buf[t.index]}set(r,t){const n=n0(this.bufs,r);n.buf[n.index]=t}write(r,t=0){if(r instanceof Uint8Array)for(let n=0;n<r.length;n++)this.set(t+n,r[n]);else if(Oc(r))for(let n=0;n<r.length;n++)this.set(t+n,r.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(r){if(r=Math.trunc(r),!(Number.isNaN(r)||r<=0)){if(r===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(r>=this.bufs[0].byteLength)r-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(r),this.length-=r;break}}}slice(r,t){const{bufs:n,length:o}=this._subList(r,t);return ja(n,o)}subarray(r,t){const{bufs:n,length:o}=this._subList(r,t);return n.length===1?n[0]:ja(n,o)}sublist(r,t){const{bufs:n,length:o}=this._subList(r,t),i=new _t;return i.length=o,i.bufs=[...n],i}_subList(r,t){if(r=r??0,t=t??this.length,r<0&&(r=this.length+r),t<0&&(t=this.length+t),r<0||t>this.length)throw new RangeError("index is out of bounds");if(r===t)return{bufs:[],length:0};if(r===0&&t===this.length)return{bufs:this.bufs,length:this.length};const n=[];let o=0;for(let i=0;i<this.bufs.length;i++){const a=this.bufs[i],s=o,c=s+a.byteLength;if(o=c,r>=c)continue;const u=r>=s&&r<c,l=t>s&&t<=c;if(u&&l){if(r===s&&t===c){n.push(a);break}const d=r-s;n.push(a.subarray(d,d+(t-r)));break}if(u){if(r===0){n.push(a);continue}n.push(a.subarray(r-s));continue}if(l){if(t===c){n.push(a);break}n.push(a.subarray(0,t-s));break}n.push(a)}return{bufs:n,length:t-r}}indexOf(r,t=0){if(!Oc(r)&&!(r instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const n=r instanceof Uint8Array?r:r.subarray();if(t=Number(t??0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),r.length===0)return t>this.length?this.length:t;const o=n.byteLength;if(o===0)throw new TypeError("search must be at least 1 byte long");const i=256,a=new Int32Array(i);for(let d=0;d<i;d++)a[d]=-1;for(let d=0;d<o;d++)a[n[d]]=d;const s=a,c=this.byteLength-n.byteLength,u=n.byteLength-1;let l;for(let d=t;d<=c;d+=l){l=0;for(let h=u;h>=0;h--){const p=this.get(d+h);if(n[h]!==p){l=Math.max(1,h-s[p]);break}}if(l===0)return d}return-1}getInt8(r){const t=this.subarray(r,r+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getInt8(0)}setInt8(r,t){const n=Gr(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,t),this.write(n,r)}getInt16(r,t){const n=this.subarray(r,r+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,t)}setInt16(r,t,n){const o=jr(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt16(0,t,n),this.write(o,r)}getInt32(r,t){const n=this.subarray(r,r+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,t)}setInt32(r,t,n){const o=jr(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt32(0,t,n),this.write(o,r)}getBigInt64(r,t){const n=this.subarray(r,r+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,t)}setBigInt64(r,t,n){const o=jr(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigInt64(0,t,n),this.write(o,r)}getUint8(r){const t=this.subarray(r,r+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0)}setUint8(r,t){const n=Gr(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,t),this.write(n,r)}getUint16(r,t){const n=this.subarray(r,r+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,t)}setUint16(r,t,n){const o=jr(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint16(0,t,n),this.write(o,r)}getUint32(r,t){const n=this.subarray(r,r+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,t)}setUint32(r,t,n){const o=jr(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint32(0,t,n),this.write(o,r)}getBigUint64(r,t){const n=this.subarray(r,r+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,t)}setBigUint64(r,t,n){const o=jr(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigUint64(0,t,n),this.write(o,r)}getFloat32(r,t){const n=this.subarray(r,r+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,t)}setFloat32(r,t,n){const o=jr(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat32(0,t,n),this.write(o,r)}getFloat64(r,t){const n=this.subarray(r,r+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,t)}setFloat64(r,t,n){const o=jr(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat64(0,t,n),this.write(o,r)}equals(r){if(r==null||!(r instanceof _t)||r.bufs.length!==this.bufs.length)return!1;for(let t=0;t<this.bufs.length;t++)if(!Kr(this.bufs[t],r.bufs[t]))return!1;return!0}static fromUint8Arrays(r,t){const n=new _t;return n.bufs=r,t==null&&(t=r.reduce((o,i)=>o+i.byteLength,0)),n.length=t,n}}function $d(e){const[r,t]=e[Symbol.asyncIterator]!=null?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>r.next(),push:o=>{n.push(o)},next:()=>n.length>0?{done:!1,value:n.shift()}:r.next(),[t](){return this}}}function rZ(e){return e[Symbol.asyncIterator]!=null}function o0(e,r){let t=0;if(rZ(e))return async function*(){for await(const c of e)yield r(c,t++)}();const n=$d(e),{value:o,done:i}=n.next();if(i===!0)return function*(){}();const a=r(o,t++);if(typeof a.then=="function")return async function*(){yield await a;for(const c of n)yield r(c,t++)}();const s=r;return function*(){yield a;for(const c of n)yield s(c,t++)}()}const Dy=new Float32Array([-0]),Mr=new Uint8Array(Dy.buffer);function nZ(e,r,t){Dy[0]=e,r[t]=Mr[0],r[t+1]=Mr[1],r[t+2]=Mr[2],r[t+3]=Mr[3]}function oZ(e,r){return Mr[0]=e[r],Mr[1]=e[r+1],Mr[2]=e[r+2],Mr[3]=e[r+3],Dy[0]}const Ly=new Float64Array([-0]),Qe=new Uint8Array(Ly.buffer);function iZ(e,r,t){Ly[0]=e,r[t]=Qe[0],r[t+1]=Qe[1],r[t+2]=Qe[2],r[t+3]=Qe[3],r[t+4]=Qe[4],r[t+5]=Qe[5],r[t+6]=Qe[6],r[t+7]=Qe[7]}function aZ(e,r){return Qe[0]=e[r],Qe[1]=e[r+1],Qe[2]=e[r+2],Qe[3]=e[r+3],Qe[4]=e[r+4],Qe[5]=e[r+5],Qe[6]=e[r+6],Qe[7]=e[r+7],Ly[0]}const uZ=BigInt(Number.MAX_SAFE_INTEGER),sZ=BigInt(Number.MIN_SAFE_INTEGER);class et{constructor(r,t){g(this,"lo");g(this,"hi");this.lo=r|0,this.hi=t|0}toNumber(r=!1){if(!r&&this.hi>>>31>0){const t=~this.lo+1>>>0;let n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(r=!1){if(r)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const t=~this.lo+1>>>0;let n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(BigInt(t)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(r=!1){return this.toBigInt(r).toString()}zzEncode(){const r=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^r)>>>0,this.lo=(this.lo<<1^r)>>>0,this}zzDecode(){const r=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^r)>>>0,this.hi=(this.hi>>>1^r)>>>0,this}length(){const r=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?r<16384?r<128?1:2:r<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}static fromBigInt(r){if(r===0n)return Dn;if(r<uZ&&r>sZ)return this.fromNumber(Number(r));const t=r<0n;t&&(r=-r);let n=r>>32n,o=r-(n<<32n);return t&&(n=~n|0n,o=~o|0n,++o>i0&&(o=0n,++n>i0&&(n=0n))),new et(Number(o),Number(n))}static fromNumber(r){if(r===0)return Dn;const t=r<0;t&&(r=-r);let n=r>>>0,o=(r-n)/4294967296>>>0;return t&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new et(n,o)}static from(r){return typeof r=="number"?et.fromNumber(r):typeof r=="bigint"?et.fromBigInt(r):typeof r=="string"?et.fromBigInt(BigInt(r)):r.low!=null||r.high!=null?new et(r.low>>>0,r.high>>>0):Dn}}const Dn=new et(0,0);Dn.toBigInt=function(){return 0n};Dn.zzEncode=Dn.zzDecode=function(){return this};Dn.length=function(){return 1};const i0=4294967296n;function cZ(e){let r=0,t=0;for(let n=0;n<e.length;++n)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:(t&64512)===55296&&(e.charCodeAt(n+1)&64512)===56320?(++n,r+=4):r+=3;return r}function lZ(e,r,t){if(t-r<1)return"";let o;const i=[];let a=0,s;for(;r<t;)s=e[r++],s<128?i[a++]=s:s>191&&s<224?i[a++]=(s&31)<<6|e[r++]&63:s>239&&s<365?(s=((s&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,i[a++]=55296+(s>>10),i[a++]=56320+(s&1023)):i[a++]=(s&15)<<12|(e[r++]&63)<<6|e[r++]&63,a>8191&&((o??(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o!=null?(a>0&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))}function wS(e,r,t){const n=t;let o,i;for(let a=0;a<e.length;++a)o=e.charCodeAt(a),o<128?r[t++]=o:o<2048?(r[t++]=o>>6|192,r[t++]=o&63|128):(o&64512)===55296&&((i=e.charCodeAt(a+1))&64512)===56320?(o=65536+((o&1023)<<10)+(i&1023),++a,r[t++]=o>>18|240,r[t++]=o>>12&63|128,r[t++]=o>>6&63|128,r[t++]=o&63|128):(r[t++]=o>>12|224,r[t++]=o>>6&63|128,r[t++]=o&63|128);return t-n}function Ct(e,r){return RangeError(`index out of range: ${e.pos} + ${r??1} > ${e.len}`)}function Ec(e,r){return(e[r-4]|e[r-3]<<8|e[r-2]<<16|e[r-1]<<24)>>>0}class fZ{constructor(r){g(this,"buf");g(this,"pos");g(this,"len");g(this,"_slice",Uint8Array.prototype.subarray);this.buf=r,this.pos=0,this.len=r.length}uint32(){let r=4294967295;if(r=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(r=(r|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return r;if((this.pos+=5)>this.len)throw this.pos=this.len,Ct(this,10);return r}int32(){return this.uint32()|0}sint32(){const r=this.uint32();return r>>>1^-(r&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw Ct(this,4);return Ec(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw Ct(this,4);return Ec(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw Ct(this,4);const r=oZ(this.buf,this.pos);return this.pos+=4,r}double(){if(this.pos+8>this.len)throw Ct(this,4);const r=aZ(this.buf,this.pos);return this.pos+=8,r}bytes(){const r=this.uint32(),t=this.pos,n=this.pos+r;if(n>this.len)throw Ct(this,r);return this.pos+=r,t===n?new Uint8Array(0):this.buf.subarray(t,n)}string(){const r=this.bytes();return lZ(r,0,r.length)}skip(r){if(typeof r=="number"){if(this.pos+r>this.len)throw Ct(this,r);this.pos+=r}else do if(this.pos>=this.len)throw Ct(this);while(this.buf[this.pos++]&128);return this}skipType(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${r} at offset ${this.pos}`)}return this}readLongVarint(){const r=new et(0,0);let t=0;if(this.len-this.pos>4){for(;t<4;++t)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw Ct(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,r}if(this.len-this.pos>4){for(;t<5;++t)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;t<5;++t){if(this.pos>=this.len)throw Ct(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw Ct(this,8);const r=Ec(this.buf,this.pos+=4),t=Ec(this.buf,this.pos+=4);return new et(r,t)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const r=bS(this.buf,this.pos);return this.pos+=mr(r),r}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function dZ(e){return new fZ(e instanceof Uint8Array?e:e.subarray())}function OS(e,r,t){const n=dZ(e);return r.decode(n,void 0,t)}const hZ=Da({prefix:"9",name:"base10",alphabet:"0123456789"}),pZ=Object.freeze(Object.defineProperty({__proto__:null,base10:hZ},Symbol.toStringTag,{value:"Module"})),vZ=ze({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),_Z=ze({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),yZ=Object.freeze(Object.defineProperty({__proto__:null,base16:vZ,base16upper:_Z},Symbol.toStringTag,{value:"Module"})),bZ=ze({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),mZ=Object.freeze(Object.defineProperty({__proto__:null,base2:bZ},Symbol.toStringTag,{value:"Module"})),ES=Array.from(""),gZ=ES.reduce((e,r,t)=>(e[t]=r,e),[]),wZ=ES.reduce((e,r,t)=>{const n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);return e[n]=t,e},[]);function OZ(e){return e.reduce((r,t)=>(r+=gZ[t],r),"")}function EZ(e){const r=[];for(const t of e){const n=t.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${t}`);const o=wZ[n];if(o==null)throw new Error(`Non-base256emoji character: ${t}`);r.push(o)}return new Uint8Array(r)}const SZ=Al({prefix:"",name:"base256emoji",encode:OZ,decode:EZ}),PZ=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:SZ},Symbol.toStringTag,{value:"Module"})),jd=ze({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),TZ=ze({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Qs=ze({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),CZ=ze({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),AZ=Object.freeze(Object.defineProperty({__proto__:null,base64:jd,base64pad:TZ,base64url:Qs,base64urlpad:CZ},Symbol.toStringTag,{value:"Module"})),IZ=ze({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),RZ=Object.freeze(Object.defineProperty({__proto__:null,base8:IZ},Symbol.toStringTag,{value:"Module"})),$Z=Al({prefix:"\0",name:"identity",encode:e=>gA(e),decode:e=>mA(e)}),jZ=Object.freeze(Object.defineProperty({__proto__:null,identity:$Z},Symbol.toStringTag,{value:"Module"})),NZ=new TextEncoder,kZ=new TextDecoder,MZ="json",DZ=512;function LZ(e){return NZ.encode(JSON.stringify(e))}function UZ(e){return JSON.parse(kZ.decode(e))}const FZ=Object.freeze(Object.defineProperty({__proto__:null,code:DZ,decode:UZ,encode:LZ,name:MZ},Symbol.toStringTag,{value:"Module"})),SS=0,BZ="identity",PS=ti;function xZ(e){return Sa(SS,PS(e))}const Yr={code:SS,name:BZ,encode:PS,digest:xZ},VZ=Object.freeze(Object.defineProperty({__proto__:null,identity:Yr},Symbol.toStringTag,{value:"Module"})),pl={...jZ,...mZ,...RZ,...pZ,...yZ,...FA,...xA,...WA,...AZ,...PZ},WZ={...PY,...VZ},zZ={raw:ZY,json:FZ};function TS(e,r,t,n){return{name:e,prefix:r,encoder:{name:e,prefix:r,encode:t},decoder:{decode:n}}}const a0=TS("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Lp=TS("ascii","a",e=>{let r="a";for(let t=0;t<e.length;t++)r+=String.fromCharCode(e[t]);return r},e=>{e=e.substring(1);const r=Gr(e.length);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return r}),CS={utf8:a0,"utf-8":a0,hex:pl.base16,latin1:Lp,ascii:Lp,binary:Lp,...pl};function yt(e,r="utf8"){const t=CS[r];if(t==null)throw new Error(`Unsupported encoding "${r}"`);return t.decoder.decode(`${t.prefix}${e}`)}function HZ(e){let n,o=8192;return function(a){if(a<1||a>4096)return Gr(a);o+a>8192&&(n=Gr(8192),o=0);const s=n.subarray(o,o+=a);return o&7&&(o=(o|7)+1),s}}class ua{constructor(r,t,n){g(this,"fn");g(this,"len");g(this,"next");g(this,"val");this.fn=r,this.len=t,this.next=void 0,this.val=n}}function Up(){}class qZ{constructor(r){g(this,"head");g(this,"tail");g(this,"len");g(this,"next");this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}}const GZ=HZ();function KZ(e){return globalThis.Buffer!=null?Gr(e):GZ(e)}class Hv{constructor(){g(this,"len");g(this,"head");g(this,"tail");g(this,"states");this.len=0,this.head=new ua(Up,0,0),this.tail=this.head,this.states=null}_push(r,t,n){return this.tail=this.tail.next=new ua(r,t,n),this.len+=t,this}uint32(r){return this.len+=(this.tail=this.tail.next=new ZZ((r=r>>>0)<128?1:r<16384?2:r<2097152?3:r<268435456?4:5,r)).len,this}int32(r){return r<0?this._push(Sc,10,et.fromNumber(r)):this.uint32(r)}sint32(r){return this.uint32((r<<1^r>>31)>>>0)}uint64(r){const t=et.fromBigInt(r);return this._push(Sc,t.length(),t)}uint64Number(r){return this._push(hl,mr(r),r)}uint64String(r){return this.uint64(BigInt(r))}int64(r){return this.uint64(r)}int64Number(r){return this.uint64Number(r)}int64String(r){return this.uint64String(r)}sint64(r){const t=et.fromBigInt(r).zzEncode();return this._push(Sc,t.length(),t)}sint64Number(r){const t=et.fromNumber(r).zzEncode();return this._push(Sc,t.length(),t)}sint64String(r){return this.sint64(BigInt(r))}bool(r){return this._push(Fp,1,r?1:0)}fixed32(r){return this._push(Ji,4,r>>>0)}sfixed32(r){return this.fixed32(r)}fixed64(r){const t=et.fromBigInt(r);return this._push(Ji,4,t.lo)._push(Ji,4,t.hi)}fixed64Number(r){const t=et.fromNumber(r);return this._push(Ji,4,t.lo)._push(Ji,4,t.hi)}fixed64String(r){return this.fixed64(BigInt(r))}sfixed64(r){return this.fixed64(r)}sfixed64Number(r){return this.fixed64Number(r)}sfixed64String(r){return this.fixed64String(r)}float(r){return this._push(nZ,4,r)}double(r){return this._push(iZ,8,r)}bytes(r){const t=r.length>>>0;return t===0?this._push(Fp,1,0):this.uint32(t)._push(QZ,t,r)}string(r){const t=cZ(r);return t!==0?this.uint32(t)._push(wS,t,r):this._push(Fp,1,0)}fork(){return this.states=new qZ(this),this.head=this.tail=new ua(Up,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ua(Up,0,0),this.len=0),this}ldelim(){const r=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=r.next,this.tail=t,this.len+=n),this}finish(){let r=this.head.next;const t=KZ(this.len);let n=0;for(;r!=null;)r.fn(r.val,t,n),n+=r.len,r=r.next;return t}}function Fp(e,r,t){r[t]=e&255}function YZ(e,r,t){for(;e>127;)r[t++]=e&127|128,e>>>=7;r[t]=e}class ZZ extends ua{constructor(t,n){super(YZ,t,n);g(this,"next");this.next=void 0}}function Sc(e,r,t){for(;e.hi!==0;)r[t++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)r[t++]=e.lo&127|128,e.lo=e.lo>>>7;r[t++]=e.lo}function Ji(e,r,t){r[t]=e&255,r[t+1]=e>>>8&255,r[t+2]=e>>>16&255,r[t+3]=e>>>24}function QZ(e,r,t){r.set(e,t)}globalThis.Buffer!=null&&(Hv.prototype.bytes=function(e){const r=e.length>>>0;return this.uint32(r),r>0&&this._push(XZ,r,e),this},Hv.prototype.string=function(e){const r=globalThis.Buffer.byteLength(e);return this.uint32(r),r>0&&this._push(JZ,r,e),this});function XZ(e,r,t){r.set(e,t)}function JZ(e,r,t){e.length<40?wS(e,r,t):r.utf8Write!=null?r.utf8Write(e,t):r.set(yt(e),t)}function eQ(){return new Hv}function AS(e,r){const t=eQ();return r.encode(e,t,{lengthDelimited:!1}),t.finish()}var vl;(function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"})(vl||(vl={}));function IS(e,r,t,n){return{name:e,type:r,encode:t,decode:n}}function tQ(e){function r(o){if(e[o.toString()]==null)throw new Error("Invalid enum value");return e[o]}const t=function(i,a){const s=r(i);a.int32(s)},n=function(i){const a=i.int32();return r(a)};return IS("enum",vl.VARINT,t,n)}function RS(e,r){return IS("message",vl.LENGTH_DELIMITED,e,r)}function Pe(e,r="utf8"){const t=CS[r];if(t==null)throw new Error(`Unsupported encoding "${r}"`);return t.encoder.encode(e).substring(1)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gt=BigInt(0),ot=BigInt(1),Bp=BigInt(2),rQ=BigInt(8),nQ={zip215:!0};function oQ(e,r,t,n){const o=e.sqr(t),i=e.sqr(n),a=e.add(e.mul(r.a,o),i),s=e.add(e.ONE,e.mul(r.d,e.mul(o,i)));return e.eql(a,s)}function iQ(e,r={}){const{Fp:t,Fn:n}=ZT("edwards",e,r),{h:o,n:i}=e;s_(r,{},{uvRatio:"function"});const a=Bp<<BigInt(n.BYTES*8)-ot,s=y=>t.create(y),c=r.uvRatio||((y,_)=>{try{return{isValid:!0,value:t.sqrt(t.div(y,_))}}catch{return{isValid:!1,value:Gt}}});if(!oQ(t,e,e.Gx,e.Gy))throw new Error("bad curve params: generator point");function u(y,_,b=!1){const w=b?ot:Gt;return An("coordinate "+y,_,w,a),_}function l(y){if(!(y instanceof p))throw new Error("ExtendedPoint expected")}const d=ob((y,_)=>{const{ex:b,ey:w,ez:S}=y,E=y.is0();_==null&&(_=E?rQ:t.inv(S));const P=s(b*_),C=s(w*_),T=s(S*_);if(E)return{x:Gt,y:ot};if(T!==ot)throw new Error("invZ was invalid");return{x:P,y:C}}),h=ob(y=>{const{a:_,d:b}=e;if(y.is0())throw new Error("bad point: ZERO");const{ex:w,ey:S,ez:E,et:P}=y,C=s(w*w),T=s(S*S),I=s(E*E),$=s(I*I),D=s(C*_),q=s(I*s(D+T)),V=s($+s(b*s(C*T)));if(q!==V)throw new Error("bad point: equation left != right (1)");const H=s(w*S),oe=s(E*P);if(H!==oe)throw new Error("bad point: equation left != right (2)");return!0});class p{constructor(_,b,w,S){this.ex=u("x",_),this.ey=u("y",b),this.ez=u("z",w,!0),this.et=u("t",S),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(_){if(_ instanceof p)throw new Error("extended point not allowed");const{x:b,y:w}=_||{};return u("x",b),u("y",w),new p(b,w,ot,s(b*w))}static normalizeZ(_){return XT(p,"ez",_)}static msm(_,b){return JT(p,n,_,b)}_setWindowSize(_){this.precompute(_)}precompute(_=8,b=!0){return v.setWindowSize(this,_),b||this.multiply(Bp),this}assertValidity(){h(this)}equals(_){l(_);const{ex:b,ey:w,ez:S}=this,{ex:E,ey:P,ez:C}=_,T=s(b*C),I=s(E*S),$=s(w*C),D=s(P*S);return T===I&&$===D}is0(){return this.equals(p.ZERO)}negate(){return new p(s(-this.ex),this.ey,this.ez,s(-this.et))}double(){const{a:_}=e,{ex:b,ey:w,ez:S}=this,E=s(b*b),P=s(w*w),C=s(Bp*s(S*S)),T=s(_*E),I=b+w,$=s(s(I*I)-E-P),D=T+P,q=D-C,V=T-P,H=s($*q),oe=s(D*V),F=s($*V),J=s(q*D);return new p(H,oe,J,F)}add(_){l(_);const{a:b,d:w}=e,{ex:S,ey:E,ez:P,et:C}=this,{ex:T,ey:I,ez:$,et:D}=_,q=s(S*T),V=s(E*I),H=s(C*w*D),oe=s(P*$),F=s((S+E)*(T+I)-q-V),J=oe-H,B=oe+H,te=s(V-b*q),G=s(F*J),L=s(B*te),ee=s(F*te),he=s(J*B);return new p(G,L,he,ee)}subtract(_){return this.add(_.negate())}multiply(_){const b=_;An("scalar",b,ot,i);const{p:w,f:S}=v.wNAFCached(this,b,p.normalizeZ);return p.normalizeZ([w,S])[0]}multiplyUnsafe(_,b=p.ZERO){const w=_;return An("scalar",w,Gt,i),w===Gt?p.ZERO:this.is0()||w===ot?this:v.wNAFCachedUnsafe(this,w,p.normalizeZ,b)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return v.wNAFCachedUnsafe(this,i).is0()}toAffine(_){return d(this,_)}clearCofactor(){return o===ot?this:this.multiplyUnsafe(o)}static fromBytes(_,b=!1){return HT(_),this.fromHex(_,b)}static fromHex(_,b=!1){const{d:w,a:S}=e,E=t.BYTES;_=Mt("pointHex",_,E),Xp("zip215",b);const P=_.slice(),C=_[E-1];P[E-1]=C&-129;const T=wa(P),I=b?a:t.ORDER;An("pointHex.y",T,Gt,I);const $=s(T*T),D=s($-ot),q=s(w*$-S);let{isValid:V,value:H}=c(D,q);if(!V)throw new Error("Point.fromHex: invalid y coordinate");const oe=(H&ot)===ot,F=(C&128)!==0;if(!b&&H===Gt&&F)throw new Error("Point.fromHex: x=0 and x_0=1");return F!==oe&&(H=s(-H)),p.fromAffine({x:H,y:T})}static fromPrivateScalar(_){return p.BASE.multiply(_)}toBytes(){const{x:_,y:b}=this.toAffine(),w=c_(b,t.BYTES);return w[w.length-1]|=_&ot?128:0,w}toRawBytes(){return this.toBytes()}toHex(){return qT(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}p.BASE=new p(e.Gx,e.Gy,ot,s(e.Gx*e.Gy)),p.ZERO=new p(Gt,ot,ot,Gt),p.Fp=t,p.Fn=n;const v=QT(p,n.BYTES*8);return p}function aQ(e,r){s_(r,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:t,hash:n}=r,{BASE:o,Fp:i,Fn:a}=e,s=a.ORDER,c=r.randomBytes||Y0,u=r.adjustScalarBytes||(P=>P),l=r.domain||((P,C,T)=>{if(Xp("phflag",T),C.length||T)throw new Error("Contexts/pre-hash are not supported");return P});function d(P){return a.create(P)}function h(P){return d(wa(P))}function p(P){const C=i.BYTES;P=Mt("private key",P,C);const T=Mt("hashed private key",n(P),2*C),I=u(T.slice(0,C)),$=T.slice(C,2*C),D=h(I);return{head:I,prefix:$,scalar:D}}function v(P){const{head:C,prefix:T,scalar:I}=p(P),$=o.multiply(I),D=$.toBytes();return{head:C,prefix:T,scalar:I,point:$,pointBytes:D}}function y(P){return v(P).pointBytes}function _(P=Uint8Array.of(),...C){const T=nb(...C);return h(n(l(T,Mt("context",P),!!t)))}function b(P,C,T={}){P=Mt("message",P),t&&(P=t(P));const{prefix:I,scalar:$,pointBytes:D}=v(C),q=_(T.context,I,P),V=o.multiply(q).toBytes(),H=_(T.context,V,D,P),oe=d(q+H*$);An("signature.s",oe,Gt,s);const F=i.BYTES,J=nb(V,c_(oe,F));return Mt("result",J,F*2)}const w=nQ;function S(P,C,T,I=w){const{context:$,zip215:D}=I,q=i.BYTES;P=Mt("signature",P,2*q),C=Mt("message",C),T=Mt("publicKey",T,q),D!==void 0&&Xp("zip215",D),t&&(C=t(C));const V=wa(P.slice(q,2*q));let H,oe,F;try{H=e.fromHex(T,D),oe=e.fromHex(P.slice(0,q),D),F=o.multiplyUnsafe(V)}catch{return!1}if(!D&&H.isSmallOrder())return!1;const J=_($,oe.toBytes(),H.toBytes(),C);return oe.add(H.multiplyUnsafe(J)).subtract(F).clearCofactor().is0()}return o.precompute(8),{getPublicKey:y,sign:b,verify:S,utils:{getExtendedPublicKey:v,randomPrivateKey:()=>c(i.BYTES),precompute(P=8,C=e.BASE){return C.precompute(P,!1)}},Point:e}}function uQ(e){const r={a:e.a,d:e.d,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},t=e.Fp,n=Q0(r.n,e.nBitLength,!0),o={Fp:t,Fn:n,uvRatio:e.uvRatio},i={hash:e.hash,randomBytes:e.randomBytes,adjustScalarBytes:e.adjustScalarBytes,domain:e.domain,prehash:e.prehash,mapToCurve:e.mapToCurve};return{CURVE:r,curveOpts:o,eddsaOpts:i}}function sQ(e,r){return Object.assign({},r,{ExtendedPoint:r.Point,CURVE:e})}function cQ(e){const{CURVE:r,curveOpts:t,eddsaOpts:n}=uQ(e),o=iQ(r,t),i=aQ(o,n);return sQ(e,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ea=BigInt(0),bo=BigInt(1),Pc=BigInt(2);function lQ(e){return s_(e,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...e})}function fQ(e){const r=lQ(e),{P:t,type:n,adjustScalarBytes:o,powPminus2:i,randomBytes:a}=r,s=n==="x25519";if(!s&&n!=="x448")throw new Error("invalid type");const c=a||Y0,u=s?255:448,l=s?32:56,d=BigInt(s?9:5),h=BigInt(s?121665:39081),p=s?Pc**BigInt(254):Pc**BigInt(447),v=s?BigInt(8)*Pc**BigInt(251)-bo:BigInt(4)*Pc**BigInt(445)-bo,y=p+v+bo,_=$=>Kt($,t),b=w(d);function w($){return c_(_($),l)}function S($){const D=Mt("u coordinate",$,l);return s&&(D[31]&=127),_(wa(D))}function E($){return wa(o(Mt("scalar",$,l)))}function P($,D){const q=I(S(D),E($));if(q===ea)throw new Error("invalid private or public key received");return w(q)}function C($){return P($,b)}function T($,D,q){const V=_($*(D-q));return D=_(D-V),q=_(q+V),{x_2:D,x_3:q}}function I($,D){An("u",$,ea,t),An("scalar",D,p,y);const q=D,V=$;let H=bo,oe=ea,F=$,J=bo,B=ea;for(let G=BigInt(u-1);G>=ea;G--){const L=q>>G&bo;B^=L,{x_2:H,x_3:F}=T(B,H,F),{x_2:oe,x_3:J}=T(B,oe,J),B=L;const ee=H+oe,he=_(ee*ee),be=H-oe,Q=_(be*be),we=he-Q,ve=F+J,nt=F-J,m=_(nt*ee),A=_(ve*be),M=m+A,x=m-A;F=_(M*M),J=_(V*_(x*x)),H=_(he*Q),oe=_(we*(he+_(h*we)))}({x_2:H,x_3:F}=T(B,H,F)),{x_2:oe,x_3:J}=T(B,oe,J);const te=i(oe);return _(H*te)}return{scalarMult:P,scalarMultBase:C,getSharedSecret:($,D)=>P($,D),getPublicKey:$=>C($),utils:{randomPrivateKey:()=>c(l)},GuBytes:b.slice()}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const dQ=BigInt(1),u0=BigInt(2),hQ=BigInt(3),pQ=BigInt(5),vQ=BigInt(8),Xs={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:vQ,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function $S(e){const r=BigInt(10),t=BigInt(20),n=BigInt(40),o=BigInt(80),i=Xs.p,s=e*e%i*e%i,c=Rt(s,u0,i)*s%i,u=Rt(c,dQ,i)*e%i,l=Rt(u,pQ,i)*u%i,d=Rt(l,r,i)*l%i,h=Rt(d,t,i)*d%i,p=Rt(h,n,i)*h%i,v=Rt(p,o,i)*p%i,y=Rt(v,o,i)*p%i,_=Rt(y,r,i)*l%i;return{pow_p_5_8:Rt(_,u0,i)*e%i,b2:s}}function jS(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const s0=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function _Q(e,r){const t=Xs.p,n=Kt(r*r*r,t),o=Kt(n*n*r,t),i=$S(e*o).pow_p_5_8;let a=Kt(e*n*i,t);const s=Kt(r*a*a,t),c=a,u=Kt(a*s0,t),l=s===e,d=s===Kt(-e,t),h=s===Kt(-e*s0,t);return l&&(a=c),(d||h)&&(a=u),eC(a,t)&&(a=Kt(-a,t)),{isValid:l||d,value:a}}const yQ=Q0(Xs.p,void 0,!0),bQ={...Xs,Fp:yQ,hash:GT,adjustScalarBytes:jS,uvRatio:_Q},mQ=cQ(bQ),_ie=(()=>{const e=Xs.p;return fQ({P:e,type:"x25519",powPminus2:r=>{const{pow_p_5_8:t,b2:n}=$S(r);return Kt(Rt(t,hQ,e)*n,e)},adjustScalarBytes:jS})})(),Wo=1e3,zo=Wo*60,Ho=zo*60,Gn=Ho*24,gQ=Gn*7,wQ=Gn*365.25;function NS(e,r){try{if(typeof e=="string"&&e.length>0)return OQ(e);if(typeof e=="number"&&isFinite(e))return r!=null&&r.long?SQ(e):EQ(e);throw new Error("Value is not a string or number.")}catch(t){const n=PQ(t)?`${t.message}. value=${JSON.stringify(e)}`:"An unknown error has occured.";throw new Error(n)}}function OQ(e){if(e=String(e),e.length>100)throw new Error("Value exceeds the maximum length of 100 characters.");const r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!r)return NaN;const t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*wQ;case"weeks":case"week":case"w":return t*gQ;case"days":case"day":case"d":return t*Gn;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Ho;case"minutes":case"minute":case"mins":case"min":case"m":return t*zo;case"seconds":case"second":case"secs":case"sec":case"s":return t*Wo;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:throw new Error(`The unit ${n} was matched, but no matching case exists.`)}}function EQ(e){const r=Math.abs(e);return r>=Gn?`${Math.round(e/Gn)}d`:r>=Ho?`${Math.round(e/Ho)}h`:r>=zo?`${Math.round(e/zo)}m`:r>=Wo?`${Math.round(e/Wo)}s`:`${e}ms`}function SQ(e){const r=Math.abs(e);return r>=Gn?Tc(e,r,Gn,"day"):r>=Ho?Tc(e,r,Ho,"hour"):r>=zo?Tc(e,r,zo,"minute"):r>=Wo?Tc(e,r,Wo,"second"):`${e} ms`}function Tc(e,r,t,n){const o=r>=t*1.5;return`${Math.round(e/t)} ${n}${o?"s":""}`}function PQ(e){return typeof e=="object"&&e!==null&&"message"in e}function TQ(e){t.debug=t,t.default=t,t.coerce=c,t.disable=i,t.enable=o,t.enabled=a,t.humanize=NS,t.destroy=u,Object.keys(e).forEach(l=>{t[l]=e[l]}),t.names=[],t.skips=[],t.formatters={};function r(l){let d=0;for(let h=0;h<l.length;h++)d=(d<<5)-d+l.charCodeAt(h),d|=0;return t.colors[Math.abs(d)%t.colors.length]}t.selectColor=r;function t(l){let d,h=null,p,v;function y(..._){if(!y.enabled)return;const b=y,w=Number(new Date),S=w-(d||w);b.diff=S,b.prev=d,b.curr=w,d=w,_[0]=t.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let E=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(C,T)=>{if(C==="%%")return"%";E++;const I=t.formatters[T];if(typeof I=="function"){const $=_[E];C=I.call(b,$),_.splice(E,1),E--}return C}),t.formatArgs.call(b,_),(b.log||t.log).apply(b,_)}return y.namespace=l,y.useColors=t.useColors(),y.color=t.selectColor(l),y.extend=n,y.destroy=t.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==t.namespaces&&(p=t.namespaces,v=t.enabled(l)),v),set:_=>{h=_}}),typeof t.init=="function"&&t.init(y),y}function n(l,d){const h=t(this.namespace+(typeof d>"u"?":":d)+l);return h.log=this.log,h}function o(l){t.save(l),t.namespaces=l,t.names=[],t.skips=[];let d;const h=(typeof l=="string"?l:"").split(/[\s,]+/),p=h.length;for(d=0;d<p;d++)h[d]&&(l=h[d].replace(/\*/g,".*?"),l[0]==="-"?t.skips.push(new RegExp("^"+l.substr(1)+"$")):t.names.push(new RegExp("^"+l+"$")))}function i(){const l=[...t.names.map(s),...t.skips.map(s).map(d=>"-"+d)].join(",");return t.enable(""),l}function a(l){if(l[l.length-1]==="*")return!0;let d,h;for(d=0,h=t.skips.length;d<h;d++)if(t.skips[d].test(l))return!1;for(d=0,h=t.names.length;d<h;d++)if(t.names[d].test(l))return!0;return!1}function s(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack??l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.setupFormatters(t.formatters),t.enable(t.load()),t}var CQ={};const Zt=kQ(),AQ=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function IQ(){var e,r,t,n,o;return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&((e=navigator.userAgent)==null?void 0:e.toLowerCase().match(/(edge|trident)\/(\d+)/))!=null?!1:typeof document<"u"&&((t=(r=document.documentElement)==null?void 0:r.style)==null?void 0:t.WebkitAppearance)||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&((n=navigator.userAgent)==null?void 0:n.toLowerCase().match(/firefox\/(\d+)/))!=null&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&((o=navigator.userAgent)==null?void 0:o.toLowerCase().match(/applewebkit\/(\d+)/))}function RQ(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+NS(this.diff),!this.useColors)return;const r="color: "+this.color;e.splice(1,0,r,"color: inherit");let t=0,n=0;e[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(t++,o==="%c"&&(n=t))}),e.splice(n,0,r)}const $Q=console.debug??console.log??(()=>{});function jQ(e){try{e?Zt==null||Zt.setItem("debug",e):Zt==null||Zt.removeItem("debug")}catch{}}function NQ(){let e;try{e=Zt==null?void 0:Zt.getItem("debug")}catch{}return!e&&typeof globalThis.process<"u"&&"env"in globalThis.process&&(e=CQ.DEBUG),e}function kQ(){try{return localStorage}catch{}}function MQ(e){e.j=function(r){try{return JSON.stringify(r)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}const ht=TQ({formatArgs:RQ,save:jQ,load:NQ,useColors:IQ,setupFormatters:MQ,colors:AQ,storage:Zt,log:$Q});class DQ extends Array{constructor(){super(),this.inRecursive=[]}prefix(r){const t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===O.array&&(t.elements++,t.elements!==1&&r.push([44])),t.type===O.map&&(t.elements++,t.elements!==1&&(t.elements%2===1?r.push([44]):r.push([58]))))}[O.uint.major](r,t){this.prefix(r);const n=String(t.value),o=[];for(let i=0;i<n.length;i++)o[i]=n.charCodeAt(i);r.push(o)}[O.negint.major](r,t){this[O.uint.major](r,t)}[O.bytes.major](r,t){throw new Error(`${jn} unsupported type: Uint8Array`)}[O.string.major](r,t){this.prefix(r);const n=X0(JSON.stringify(t.value));r.push(n.length>32?l_(n):n)}[O.array.major](r,t){this.prefix(r),this.inRecursive.push({type:O.array,elements:0}),r.push([91])}[O.map.major](r,t){this.prefix(r),this.inRecursive.push({type:O.map,elements:0}),r.push([123])}[O.tag.major](r,t){}[O.float.major](r,t){if(t.type.name==="break"){const a=this.inRecursive.pop();if(a){if(a.type===O.array)r.push([93]);else if(a.type===O.map)r.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(t.value===void 0)throw new Error(`${jn} unsupported type: undefined`);if(this.prefix(r),t.type.name==="true"){r.push([116,114,117,101]);return}else if(t.type.name==="false"){r.push([102,97,108,115,101]);return}else if(t.type.name==="null"){r.push([110,117,108,108]);return}const n=String(t.value),o=[];let i=!1;for(let a=0;a<n.length;a++)o[a]=n.charCodeAt(a),!i&&(o[a]===46||o[a]===101||o[a]===69)&&(i=!0);i||(o.push(46),o.push(48)),r.push(o)}}function LQ(e,r){if(Array.isArray(e[0])||Array.isArray(r[0]))throw new Error(`${jn} complex map keys are not supported`);const t=e[0],n=r[0];if(t.type!==O.string||n.type!==O.string)throw new Error(`${jn} non-string map keys are not supported`);if(t<n)return-1;if(t>n)return 1;throw new Error(`${jn} unexpected duplicate map keys, this is not supported`)}const UQ={addBreakTokens:!0,mapSorter:LQ};function FQ(e,r){return r=Object.assign({},UQ,r),sw(e,new DQ,r)}class kS{constructor(r,t={}){this._pos=0,this.data=r,this.options=t,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let r=this.ch();for(;r===32||r===9||r===13||r===10;)r=this.data[++this._pos]}expect(r){if(this.data.length-this._pos<r.length)throw new Error(`${K} unexpected end of input at position ${this._pos}`);for(let t=0;t<r.length;t++)if(this.data[this._pos++]!==r[t])throw new Error(`${K} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...r)}'`)}parseNumber(){const r=this._pos;let t=!1,n=!1;const o=s=>{for(;!this.done();){const c=this.ch();if(s.includes(c))this._pos++;else break}};if(this.ch()===45&&(t=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,n=!0;else return new j(O.uint,0,this._pos-r);if(o([48,49,50,51,52,53,54,55,56,57]),t&&this._pos===r+1)throw new Error(`${K} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${K} unexpected token at position ${this._pos}`);n=!0,this._pos++,o([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,o([48,49,50,51,52,53,54,55,56,57]));const i=String.fromCharCode.apply(null,this.data.subarray(r,this._pos)),a=parseFloat(i);return n?new j(O.float,a,this._pos-r):this.options.allowBigInt!==!0||Number.isSafeInteger(a)?new j(a>=0?O.uint:O.negint,a,this._pos-r):new j(a>=0?O.uint:O.negint,BigInt(i),this._pos-r)}parseString(){if(this.ch()!==34)throw new Error(`${K} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let i=this._pos,a=0;i<this.data.length&&a<65536;i++,a++){const s=this.data[i];if(s===92||s<32||s>=128)break;if(s===34){const c=String.fromCharCode.apply(null,this.data.subarray(this._pos,i));return this._pos=i+1,new j(O.string,c,a)}}const r=this._pos,t=[],n=()=>{if(this._pos+4>=this.data.length)throw new Error(`${K} unexpected end of unicode escape sequence at position ${this._pos}`);let i=0;for(let a=0;a<4;a++){let s=this.ch();if(s>=48&&s<=57)s-=48;else if(s>=97&&s<=102)s=s-97+10;else if(s>=65&&s<=70)s=s-65+10;else throw new Error(`${K} unexpected unicode escape character at position ${this._pos}`);i=i*16+s,this._pos++}return i},o=()=>{const i=this.ch();let a=null,s=i>239?4:i>223?3:i>191?2:1;if(this._pos+s>this.data.length)throw new Error(`${K} unexpected unicode sequence at position ${this._pos}`);let c,u,l,d;switch(s){case 1:i<128&&(a=i);break;case 2:c=this.data[this._pos+1],(c&192)===128&&(d=(i&31)<<6|c&63,d>127&&(a=d));break;case 3:c=this.data[this._pos+1],u=this.data[this._pos+2],(c&192)===128&&(u&192)===128&&(d=(i&15)<<12|(c&63)<<6|u&63,d>2047&&(d<55296||d>57343)&&(a=d));break;case 4:c=this.data[this._pos+1],u=this.data[this._pos+2],l=this.data[this._pos+3],(c&192)===128&&(u&192)===128&&(l&192)===128&&(d=(i&15)<<18|(c&63)<<12|(u&63)<<6|l&63,d>65535&&d<1114112&&(a=d))}a===null?(a=65533,s=1):a>65535&&(a-=65536,t.push(a>>>10&1023|55296),a=56320|a&1023),t.push(a),this._pos+=s};for(;!this.done();){const i=this.ch();let a;switch(i){case 92:if(this._pos++,this.done())throw new Error(`${K} unexpected string termination at position ${this._pos}`);switch(a=this.ch(),this._pos++,a){case 34:case 39:case 92:case 47:t.push(a);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(n());break;default:throw new Error(`${K} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new j(O.string,J0(t),this._pos-r);default:if(i<32)throw new Error(`${K} invalid control character at position ${this._pos}`);i<128?(t.push(i),this._pos++):o()}}throw new Error(`${K} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new j(O.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new j(O.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new j(O.null,null,4);case 102:return this.expect([102,97,108,115,101]),new j(O.false,!1,5);case 116:return this.expect([116,114,117,101]),new j(O.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${K} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new j(O.break,void 0,1);if(this.ch()!==44)throw new Error(`${K} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new j(O.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new j(O.break,void 0,1);if(this.ch()!==44)throw new Error(`${K} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new j(O.break,void 0,1);const r=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${K} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),r}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${K} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}}function BQ(e,r){return r=Object.assign({tokenizer:new kS(e,r)},r),cw(e,r)}function xQ(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function VQ(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const r=Z.asCID(e);if(!r)return null;const t=r.toString();return[new j(O.map,1/0,1),new j(O.string,"/",1),new j(O.string,t,t.length),new j(O.break,void 0,1)]}function _l(e){const r=jd.encode(e).slice(1);return[new j(O.map,1/0,1),new j(O.string,"/",1),new j(O.map,1/0,1),new j(O.string,"bytes",5),new j(O.string,r,r.length),new j(O.break,void 0,1),new j(O.break,void 0,1)]}function At(e){return _l(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function WQ(e){return _l(new Uint8Array(e))}function zQ(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function HQ(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const qQ={typeEncoders:{Object:VQ,Buffer:_l,Uint8Array:_l,Int8Array:At,Uint16Array:At,Int16Array:At,Uint32Array:At,Int32Array:At,Float32Array:At,Float64Array:At,Uint8ClampedArray:At,BigInt64Array:At,BigUint64Array:At,DataView:At,ArrayBuffer:WQ,undefined:zQ,number:HQ}};class GQ extends kS{constructor(r,t){super(r,t),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const r=this._next();if(r.type===O.map){const t=this._next();if(t.type===O.string&&t.value==="/"){const n=this._next();if(n.type===O.string){if(this._next().type!==O.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new j(O.tag,42,0)}if(n.type===O.map){const o=this._next();if(o.type===O.string&&o.value==="bytes"){const i=this._next();if(i.type===O.string){for(let s=0;s<2;s++)if(this._next().type!==O.break)throw new Error("Invalid encoded Bytes form");const a=jd.decode(`m${i.value}`);return new j(O.bytes,a,i.value.length)}this.tokenBuffer.push(i)}this.tokenBuffer.push(o)}this.tokenBuffer.push(n)}this.tokenBuffer.push(t)}return r}}const qv={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};qv.tags[42]=Z.parse;const KQ="dag-json",YQ=297,MS=e=>FQ(e,qQ),DS=e=>{const r=xQ(e),t=Object.assign(qv,{tokenizer:new GQ(r,qv)});return BQ(r,t)},c0=e=>ZQ.decode(MS(e)),ZQ=new TextDecoder,QQ=e=>DS(XQ.encode(e)),XQ=new TextEncoder,JQ=Object.freeze(Object.defineProperty({__proto__:null,code:YQ,decode:DS,encode:MS,format:c0,name:KQ,parse:QQ,stringify:c0},Symbol.toStringTag,{value:"Module"})),Uy=Symbol.for("@libp2p/peer-id");function yie(e){return!!(e!=null&&e[Uy])}var Zp;let bie=(Zp=class extends Error{constructor(r="The operation was aborted"){super(r),this.name="AbortError"}},g(Zp,"name","AbortError"),Zp);var Qp;let Lt=(Qp=class extends Error{constructor(r="Invalid parameters"){super(r),this.name="InvalidParametersError"}},g(Qp,"name","InvalidParametersError"),Qp);class Fy extends Error{constructor(r="Invalid public key"){super(r),this.name="InvalidPublicKeyError"}}g(Fy,"name","InvalidPublicKeyError");class eX extends Error{constructor(r="Not found"){super(r),this.name="NotFoundError"}}g(eX,"name","NotFoundError");class LS extends Error{constructor(r="Invalid CID"){super(r),this.name="InvalidCIDError"}}g(LS,"name","InvalidCIDError");class US extends Error{constructor(r="Invalid Multihash"){super(r),this.name="InvalidMultihashError"}}g(US,"name","InvalidMultihashError");class By extends Error{constructor(r="Unsupported key type"){super(r),this.name="UnsupportedKeyTypeError"}}g(By,"name","UnsupportedKeyTypeError");class vt extends Error{constructor(){super(...arguments);g(this,"name","InvalidMultiaddrError")}}g(vt,"name","InvalidMultiaddrError");class qo extends Error{constructor(){super(...arguments);g(this,"name","ValidationError")}}g(qo,"name","ValidationError");class FS extends Error{constructor(){super(...arguments);g(this,"name","InvalidParametersError")}}g(FS,"name","InvalidParametersError");class BS extends Error{constructor(){super(...arguments);g(this,"name","UnknownProtocolError")}}g(BS,"name","UnknownProtocolError");class tX{constructor(){g(this,"index",0);g(this,"input","")}new(r){return this.index=0,this.input=r,this}readAtomically(r){const t=this.index,n=r();return n===void 0&&(this.index=t),n}parseWith(r){const t=r();if(this.index===this.input.length)return t}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(r){return this.readAtomically(()=>{const t=this.readChar();if(t===r)return t})}readSeparator(r,t,n){return this.readAtomically(()=>{if(!(t>0&&this.readGivenChar(r)===void 0))return n()})}readNumber(r,t,n,o){return this.readAtomically(()=>{let i=0,a=0;const s=this.peekChar();if(s===void 0)return;const c=s==="0",u=2**(8*o)-1;for(;;){const l=this.readAtomically(()=>{const d=this.readChar();if(d===void 0)return;const h=Number.parseInt(d,r);if(!Number.isNaN(h))return h});if(l===void 0)break;if(i*=r,i+=l,i>u||(a+=1,t!==void 0&&a>t))return}if(a!==0)return!n&&c&&a>1?void 0:i})}readIPv4Addr(){return this.readAtomically(()=>{const r=new Uint8Array(4);for(let t=0;t<r.length;t++){const n=this.readSeparator(".",t,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;r[t]=n}return r})}readIPv6Addr(){const r=t=>{for(let n=0;n<t.length/2;n++){const o=n*2;if(n<t.length-3){const a=this.readSeparator(":",n,()=>this.readIPv4Addr());if(a!==void 0)return t[o]=a[0],t[o+1]=a[1],t[o+2]=a[2],t[o+3]=a[3],[o+4,!0]}const i=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(i===void 0)return[o,!1];t[o]=i>>8,t[o+1]=i&255}return[t.length,!1]};return this.readAtomically(()=>{const t=new Uint8Array(16),[n,o]=r(t);if(n===16)return t;if(o||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const i=new Uint8Array(14),a=16-(n+2),[s]=r(i.subarray(0,a));return t.set(i.subarray(0,s),16-s),t})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const xS=45,rX=15,Go=new tX;function nX(e){if(!(e.length>rX))return Go.new(e).parseWith(()=>Go.readIPv4Addr())}function oX(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>xS))return Go.new(e).parseWith(()=>Go.readIPv6Addr())}function wie(e,r=!1){if(e.includes("%")&&(e=e.split("%")[0]),e.length>xS)return;const t=Go.new(e).parseWith(()=>Go.readIPAddr());if(t)return r&&t.length===4?Uint8Array.from([0,0,0,0,0,0,0,0,0,0,255,255,t[0],t[1],t[2],t[3]]):t}function VS(e){return!!nX(e)}function iX(e){return!!oX(e)}const Gv=4,yl=6,Kv=273,aX=33,ba=41,WS=42,uX=43,xy=53,Vy=54,Nd=55,Wy=56,sX=132,cX=301,lX=302,fX=400,zS=421,dX=444,hX=445,pX=446,vX=447,HS=448,_X=449,yX=454,bX=460,mX=461,gX=465,wX=466,OX=480,EX=481,SX=443,PX=477,TX=478,CX=479,AX=277,IX=275,RX=276,$X=280,jX=281,qS=290,NX=777;function l0(e){return r=>Pe(r,e)}function f0(e){return r=>yt(r,e)}function sa(e){return new DataView(e.buffer).getUint16(e.byteOffset).toString()}function To(e){const r=new ArrayBuffer(2);return new DataView(r).setUint16(0,typeof e=="string"?parseInt(e):e),new Uint8Array(r)}function kX(e){const r=e.split(":");if(r.length!==2)throw new Error(`failed to parse onion addr: ["'${r.join('", "')}'"]' does not contain a port number`);if(r[0].length!==16)throw new Error(`failed to parse onion addr: ${r[0]} not a Tor onion address.`);const t=yt(r[0],"base32"),n=parseInt(r[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const o=To(n);return ja([t,o],t.length+o.length)}function MX(e){const r=e.split(":");if(r.length!==2)throw new Error(`failed to parse onion addr: ["'${r.join('", "')}'"]' does not contain a port number`);if(r[0].length!==56)throw new Error(`failed to parse onion addr: ${r[0]} not a Tor onion3 address.`);const t=Nn.decode(`b${r[0]}`),n=parseInt(r[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const o=To(n);return ja([t,o],t.length+o.length)}function d0(e){const r=e.subarray(0,e.length-2),t=e.subarray(e.length-2),n=Pe(r,"base32"),o=sa(t);return`${n}:${o}`}const GS=function(e){e=e.toString().trim();const r=new Uint8Array(4);return e.split(/\./g).forEach((t,n)=>{const o=parseInt(t,10);if(isNaN(o)||o<0||o>255)throw new vt("Invalid byte value in IP address");r[n]=o}),r},DX=function(e){let r=0;e=e.toString().trim();const t=e.split(":",8);let n;for(n=0;n<t.length;n++){const i=VS(t[n]);let a;i&&(a=GS(t[n]),t[n]=Pe(a.subarray(0,2),"base16")),a!=null&&++n<8&&t.splice(n,0,Pe(a.subarray(2,4),"base16"))}if(t[0]==="")for(;t.length<8;)t.unshift("0");else if(t[t.length-1]==="")for(;t.length<8;)t.push("0");else if(t.length<8){for(n=0;n<t.length&&t[n]!=="";n++);const i=[n,1];for(n=9-t.length;n>0;n--)i.push("0");t.splice.apply(t,i)}const o=new Uint8Array(r+16);for(n=0;n<t.length;n++){t[n]===""&&(t[n]="0");const i=parseInt(t[n],16);if(isNaN(i)||i<0||i>65535)throw new vt("Invalid byte value in IP address");o[r++]=i>>8&255,o[r++]=i&255}return o},LX=function(e){if(e.byteLength!==4)throw new vt("IPv4 address was incorrect length");const r=[];for(let t=0;t<e.byteLength;t++)r.push(e[t]);return r.join(".")},UX=function(e){if(e.byteLength!==16)throw new vt("IPv6 address was incorrect length");const r=[];for(let n=0;n<e.byteLength;n+=2){const o=e[n],i=e[n+1],a=`${o.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}`;r.push(a)}const t=r.join(":");try{const n=new URL(`http://[${t}]`);return n.hostname.substring(1,n.hostname.length-1)}catch{throw new vt(`Invalid IPv6 address "${t}"`)}};function FX(e){try{const r=new URL(`http://[${e}]`);return r.hostname.substring(1,r.hostname.length-1)}catch{throw new vt(`Invalid IPv6 address "${e}"`)}}const xp=Object.values(pl).map(e=>e.decoder),BX=function(){let e=xp[0].or(xp[1]);return xp.slice(2).forEach(r=>e=e.or(r)),e}();function xX(e){return BX.decode(e)}function VX(e){return r=>e.encoder.encode(r)}function WX(e){if(parseInt(e).toString()!==e)throw new qo("Value must be an integer")}function zX(e){if(e<0)throw new qo("Value must be a positive integer, or zero")}function HX(e){return r=>{if(r>e)throw new qo(`Value must be smaller than or equal to ${e}`)}}function qX(...e){return r=>{for(const t of e)t(r)}}const Cc=qX(WX,zX,HX(65535)),Ke=-1;class GX{constructor(){g(this,"protocolsByCode",new Map);g(this,"protocolsByName",new Map)}getProtocol(r){let t;if(typeof r=="string"?t=this.protocolsByName.get(r):t=this.protocolsByCode.get(r),t==null)throw new BS(`Protocol ${r} was unknown`);return t}addProtocol(r){var t;this.protocolsByCode.set(r.code,r),this.protocolsByName.set(r.name,r),(t=r.aliases)==null||t.forEach(n=>{this.protocolsByName.set(n,r)})}removeProtocol(r){var n;const t=this.protocolsByCode.get(r);t!=null&&(this.protocolsByCode.delete(t.code),this.protocolsByName.delete(t.name),(n=t.aliases)==null||n.forEach(o=>{this.protocolsByName.delete(o)}))}}const er=new GX,KX=[{code:Gv,name:"ip4",size:32,valueToBytes:GS,bytesToValue:LX,validate:e=>{if(!VS(e))throw new qo(`Invalid IPv4 address "${e}"`)}},{code:yl,name:"tcp",size:16,valueToBytes:To,bytesToValue:sa,validate:Cc},{code:Kv,name:"udp",size:16,valueToBytes:To,bytesToValue:sa,validate:Cc},{code:aX,name:"dccp",size:16,valueToBytes:To,bytesToValue:sa,validate:Cc},{code:ba,name:"ip6",size:128,valueToBytes:DX,bytesToValue:UX,stringToValue:FX,validate:e=>{if(!iX(e))throw new qo(`Invalid IPv6 address "${e}"`)}},{code:WS,name:"ip6zone",size:Ke},{code:uX,name:"ipcidr",size:8,bytesToValue:l0("base10"),valueToBytes:f0("base10")},{code:xy,name:"dns",size:Ke,resolvable:!0},{code:Vy,name:"dns4",size:Ke,resolvable:!0},{code:Nd,name:"dns6",size:Ke,resolvable:!0},{code:Wy,name:"dnsaddr",size:Ke,resolvable:!0},{code:sX,name:"sctp",size:16,valueToBytes:To,bytesToValue:sa,validate:Cc},{code:cX,name:"udt"},{code:lX,name:"utp"},{code:fX,name:"unix",size:Ke,path:!0,stringToValue:e=>decodeURIComponent(e),valueToString:e=>encodeURIComponent(e)},{code:zS,name:"p2p",aliases:["ipfs"],size:Ke,bytesToValue:l0("base58btc"),valueToBytes:e=>e.startsWith("Q")||e.startsWith("1")?f0("base58btc")(e):Z.parse(e).multihash.bytes},{code:dX,name:"onion",size:96,bytesToValue:d0,valueToBytes:kX},{code:hX,name:"onion3",size:296,bytesToValue:d0,valueToBytes:MX},{code:pX,name:"garlic64",size:Ke},{code:vX,name:"garlic32",size:Ke},{code:HS,name:"tls"},{code:_X,name:"sni",size:Ke},{code:yX,name:"noise"},{code:bX,name:"quic"},{code:mX,name:"quic-v1"},{code:gX,name:"webtransport"},{code:wX,name:"certhash",size:Ke,bytesToValue:VX(Qs),valueToBytes:xX},{code:OX,name:"http"},{code:EX,name:"http-path",size:Ke,stringToValue:e=>`/${decodeURIComponent(e)}`,valueToString:e=>encodeURIComponent(e.substring(1))},{code:SX,name:"https"},{code:PX,name:"ws"},{code:TX,name:"wss"},{code:CX,name:"p2p-websocket-star"},{code:AX,name:"p2p-stardust"},{code:IX,name:"p2p-webrtc-star"},{code:RX,name:"p2p-webrtc-direct"},{code:$X,name:"webrtc-direct"},{code:jX,name:"webrtc"},{code:qS,name:"p2p-circuit"},{code:NX,name:"memory",size:Ke}];KX.forEach(e=>{er.addProtocol(e)});function YX(e){var n;const r=[];let t=0;for(;t<e.length;){const o=mS(e,t),i=er.getProtocol(o),a=mr(o),s=JX(i,e,t+a);let c=0;s>0&&i.size===Ke&&(c=mr(s));const u=a+c+s,l={code:o,name:i.name,bytes:e.subarray(t,t+u)};if(s>0){const d=t+a+c,h=e.subarray(d,d+s);l.value=((n=i.bytesToValue)==null?void 0:n.call(i,h))??Pe(h)}r.push(l),t+=u}return r}function ZX(e){var n;let r=0;const t=[];for(const o of e){if(o.bytes==null){const i=er.getProtocol(o.code),a=mr(o.code);let s,c=0,u=0;o.value!=null&&(s=((n=i.valueToBytes)==null?void 0:n.call(i,o.value))??yt(o.value),c=s.byteLength,i.size===Ke&&(u=mr(c)));const l=new Uint8Array(a+u+c);let d=0;hl(o.code,l,d),d+=a,s!=null&&(i.size===Ke&&(hl(c,l,d),d+=u),l.set(s,d)),o.bytes=l}t.push(o.bytes),r+=o.bytes.byteLength}return ja(t,r)}function QX(e){var i;if(e.charAt(0)!=="/")throw new vt('String multiaddr must start with "/"');const r=[];let t="protocol",n="",o="";for(let a=1;a<e.length;a++){const s=e.charAt(a);s!=="/"&&(t==="protocol"?o+=e.charAt(a):n+=e.charAt(a));const c=a===e.length-1;if(s==="/"||c){const u=er.getProtocol(o);if(t==="protocol"){if(u.size==null||u.size===0){r.push({code:u.code,name:u.name}),n="",o="",t="protocol";continue}else if(c)throw new vt(`Component ${o} was missing value`);t="value"}else if(t==="value"){const l={code:u.code,name:u.name};if(u.size!=null&&u.size!==0){if(n==="")throw new vt(`Component ${o} was missing value`);l.value=((i=u.stringToValue)==null?void 0:i.call(u,n))??n}r.push(l),n="",o="",t="protocol"}}}if(o!==""&&n!=="")throw new vt("Incomplete multiaddr");return r}function XX(e){return`/${e.flatMap(r=>{var n;if(r.value==null)return r.name;const t=er.getProtocol(r.code);if(t==null)throw new vt(`Unknown protocol code ${r.code}`);return[r.name,((n=t.valueToString)==null?void 0:n.call(t,r.value))??r.value]}).join("/")}`}function JX(e,r,t){return e.size==null||e.size===0?0:e.size>0?e.size/8:mS(r,t)}const eJ=Symbol.for("nodejs.util.inspect.custom"),KS=Symbol.for("@multiformats/multiaddr"),tJ=[xy,Vy,Nd,Wy];class rJ extends Error{constructor(r="No available resolver"){super(r),this.name="NoAvailableResolverError"}}function nJ(e){if(e==null&&(e="/"),bl(e))return e.getComponents();if(e instanceof Uint8Array)return YX(e);if(typeof e=="string")return e=e.replace(/\/(\/)+/,"/").replace(/(\/)+$/,""),e===""&&(e="/"),QX(e);if(Array.isArray(e))return e;throw new vt("Must be a string, Uint8Array, Component[], or another Multiaddr")}var z0,me,No,ko;const Co=class Co{constructor(r="/",t={}){g(this,z0,!0);ec(this,me);ec(this,No);ec(this,ko);tc(this,me,nJ(r)),t.validate!==!1&&oJ(this)}get bytes(){return ye(this,ko)==null&&tc(this,ko,ZX(ye(this,me))),ye(this,ko)}toString(){return ye(this,No)==null&&tc(this,No,XX(ye(this,me))),ye(this,No)}toJSON(){return this.toString()}toOptions(){let r,t,n,o,i="";for(const{code:s,name:c,value:u}of ye(this,me))s===WS&&(i=`%${u??""}`),tJ.includes(s)&&(t="tcp",o=443,n=`${u??""}${i}`,r=s===Nd?6:4),(s===yl||s===Kv)&&(t=c==="tcp"?"tcp":"udp",o=parseInt(u??"")),(s===Gv||s===ba)&&(t="tcp",n=`${u??""}${i}`,r=s===ba?6:4);if(r==null||t==null||n==null||o==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:r,host:n,transport:t,port:o}}getComponents(){return[...ye(this,me)]}protos(){return ye(this,me).map(({code:r,value:t})=>{const n=er.getProtocol(r);return{code:r,size:n.size??0,name:n.name,resolvable:!!n.resolvable,path:!!n.path}})}protoCodes(){return ye(this,me).map(({code:r})=>r)}protoNames(){return ye(this,me).map(({name:r})=>r)}tuples(){return ye(this,me).map(({code:r,value:t})=>{var i;if(t==null)return[r];const n=er.getProtocol(r),o=[r];return t!=null&&o.push(((i=n.valueToBytes)==null?void 0:i.call(n,t))??yt(t)),o})}stringTuples(){return ye(this,me).map(({code:r,value:t})=>t==null?[r]:[r,t])}encapsulate(r){const t=new Co(r);return new Co([...ye(this,me),...t.getComponents()],{validate:!1})}decapsulate(r){const t=r.toString(),n=this.toString(),o=n.lastIndexOf(t);if(o<0)throw new FS(`Address ${this.toString()} does not contain subaddress: ${r.toString()}`);return new Co(n.slice(0,o),{validate:!1})}decapsulateCode(r){let t;for(let n=ye(this,me).length-1;n>-1;n--)if(ye(this,me)[n].code===r){t=n;break}return new Co(ye(this,me).slice(0,t),{validate:!1})}getPeerId(){try{let r=[];ye(this,me).forEach(({code:n,value:o})=>{n===zS&&r.push([n,o]),n===qS&&(r=[])});const t=r.pop();if((t==null?void 0:t[1])!=null){const n=t[1];return n[0]==="Q"||n[0]==="1"?Pe(Fe.decode(`z${n}`),"base58btc"):Pe(Z.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){for(const r of ye(this,me))if(er.getProtocol(r.code).path)return r.value??null;return null}equals(r){return Kr(this.bytes,r.bytes)}async resolve(r){const t=this.protos().find(i=>i.resolvable);if(t==null)return[this];const n=iJ.get(t.name);if(n==null)throw new rJ(`no available resolver for ${t.name}`);return(await n(this,r)).map(i=>ct(i))}nodeAddress(){const r=this.toOptions();if(r.transport!=="tcp"&&r.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${r.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:r.family,address:r.host,port:r.port}}isThinWaistAddress(){return!(ye(this,me).length!==2||ye(this,me)[0].code!==Gv&&ye(this,me)[0].code!==ba||ye(this,me)[1].code!==yl&&ye(this,me)[1].code!==Kv)}[(z0=KS,eJ)](){return`Multiaddr(${this.toString()})`}};me=new WeakMap,No=new WeakMap,ko=new WeakMap;let Yv=Co;function oJ(e){e.getComponents().forEach(r=>{var n;const t=er.getProtocol(r.code);r.value!=null&&((n=t.validate)==null||n.call(t,r.value))})}const iJ=new Map;function bl(e){return!!(e!=null&&e[KS])}function ct(e){return new Yv(e)}function Oie(e){const r=er.getProtocol(e);return{code:r.code,size:r.size??0,name:r.name,resolvable:!!r.resolvable,path:!!r.path}}const aJ=[yl,xy,Wy,Vy,Nd];function h0(e){var r;return(r=YS("sni",e))==null?void 0:r.value}function p0(e){var t;const r=(t=YS("tcp",e))==null?void 0:t.value;return r==null?"":`:${r}`}function YS(e,r){return r.find(t=>t.name===e)}function v0(e){return e.some(({code:r})=>r===HS)}function It(e,r){const t=ZS[e.name];if(t==null)throw new Error(`Can't interpret protocol ${e.name}`);const n=t(e,r);return e.code===ba?`[${n}]`:n}const ZS={ip4:(e,r)=>e.value,ip6:(e,r)=>r.length===0?e.value:`[${e.value}]`,tcp:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`tcp://${It(t,r)}:${e.value}`},udp:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`udp://${It(t,r)}:${e.value}`},dnsaddr:(e,r)=>e.value,dns4:(e,r)=>e.value,dns6:(e,r)=>e.value,dns:(e,r)=>e.value,ipfs:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`${It(t,r)}`},p2p:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`${It(t,r)}`},http:(e,r)=>{const t=v0(r),n=h0(r),o=p0(r);if(t&&n!=null)return`https://${n}${o}`;const i=t?"https://":"http://",a=r.pop();if(a==null)throw new Error("Unexpected end of multiaddr");let s=It(a,r);return s=s==null?void 0:s.replace("tcp://",""),`${i}${s}`},"http-path":(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");const n=It(t,r),o=decodeURIComponent(e.value??"");return`${n}${o}`},tls:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return It(t,r)},sni:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return It(t,r)},https:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");let n=It(t,r);return n=n==null?void 0:n.replace("tcp://",""),`https://${n}`},ws:(e,r)=>{const t=v0(r),n=h0(r),o=p0(r);if(t&&n!=null)return`wss://${n}${o}`;const i=t?"wss://":"ws://",a=r.pop();if(a==null)throw new Error("Unexpected end of multiaddr");let s=It(a,r);return s=s==null?void 0:s.replace("tcp://",""),`${i}${s}`},wss:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");let n=It(t,r);return n=n==null?void 0:n.replace("tcp://",""),`wss://${n}`}};function uJ(e,r){const n=ct(e).getComponents(),o=n.pop();if(o==null)throw new Error("Unexpected end of multiaddr");const i=ZS[o.name];if(i==null)throw new Error(`No interpreter found for ${o.name}`);let a=i(o,n)??"";return aJ.includes(o.code)&&(a=a.replace(/^.*:\/\//,""),o.value==="443"?a=`https://${a}`:a=`http://${a}`),(a.startsWith("http://")||a.startsWith("https://")||a.startsWith("ws://")||a.startsWith("wss://"))&&(a=new URL(a).toString(),a.endsWith("/")&&(a=a.substring(0,a.length-1))),a}ht.formatters.b=e=>e==null?"undefined":Fe.baseEncode(e);ht.formatters.t=e=>e==null?"undefined":Nn.baseEncode(e);ht.formatters.m=e=>e==null?"undefined":jd.baseEncode(e);ht.formatters.p=e=>e==null?"undefined":e.toString();ht.formatters.c=e=>e==null?"undefined":e.toString();ht.formatters.k=e=>e==null?"undefined":e.toString();ht.formatters.a=e=>e==null?"undefined":e.toString();ht.formatters.e=e=>e==null?"undefined":_0(e.stack)??_0(e.message)??e.toString();function sJ(e){const r=()=>{};return r.enabled=!1,r.color="",r.diff=0,r.log=()=>{},r.namespace=e,r.destroy=()=>!0,r.extend=()=>r,r}function Eie(e){return{forComponent(r){return kd(`${e}:${r}`)}}}function kd(e){let r=sJ(`${e}:trace`);return ht.enabled(`${e}:trace`)&&ht.names.map(t=>t.toString()).find(t=>t.includes(":trace"))!=null&&(r=ht(`${e}:trace`)),Object.assign(ht(e),{error:ht(`${e}:error`),trace:r})}function _0(e){if(e!=null&&(e=e.trim(),e.length!==0))return e}const cJ=parseInt("11111",2),Zv=parseInt("10000000",2),lJ=parseInt("01111111",2),y0={0:ta,1:ta,2:fJ,3:pJ,4:vJ,5:hJ,6:dJ,16:ta,22:ta,48:ta};function Md(e,r={offset:0}){const t=e[r.offset]&cJ;if(r.offset++,y0[t]!=null)return y0[t](e,r);throw new Error("No decoder for tag "+t)}function Js(e,r){let t=0;if((e[r.offset]&Zv)===Zv){const n=e[r.offset]&lJ;let o="0x";r.offset++;for(let i=0;i<n;i++,r.offset++)o+=e[r.offset].toString(16).padStart(2,"0");t=parseInt(o,16)}else t=e[r.offset],r.offset++;return t}function ta(e,r){Js(e,r);const t=[];for(;!(r.offset>=e.byteLength);){const n=Md(e,r);if(n===null)break;t.push(n)}return t}function fJ(e,r){const t=Js(e,r),n=r.offset,o=r.offset+t,i=[];for(let a=n;a<o;a++)a===n&&e[a]===0||i.push(e[a]);return r.offset+=t,Uint8Array.from(i)}function dJ(e,r){const t=Js(e,r),n=r.offset+t,o=e[r.offset];r.offset++;let i=0,a=0;o<40?(i=0,a=o):o<80?(i=1,a=o-40):(i=2,a=o-80);let s=`${i}.${a}`,c=[];for(;r.offset<n;){const u=e[r.offset];if(r.offset++,c.push(u&127),u<128){c.reverse();let l=0;for(let d=0;d<c.length;d++)l+=c[d]<<d*7;s+=`.${l}`,c=[]}}return s}function hJ(e,r){return r.offset++,null}function pJ(e,r){const t=Js(e,r),n=e[r.offset];r.offset++;const o=e.subarray(r.offset,r.offset+t-1);if(r.offset+=t,n!==0)throw new Error("Unused bits in bit string is unimplemented");return o}function vJ(e,r){const t=Js(e,r),n=e.subarray(r.offset,r.offset+t);return r.offset+=t,n}function _J(e){let r=e.toString(16);r.length%2===1&&(r="0"+r);const t=new _t;for(let n=0;n<r.length;n+=2)t.append(Uint8Array.from([parseInt(`${r[n]}${r[n+1]}`,16)]));return t}function zy(e){if(e.byteLength<128)return Uint8Array.from([e.byteLength]);const r=_J(e.byteLength);return new _t(Uint8Array.from([r.byteLength|Zv]),r)}function Qv(e){const r=new _t,t=128;return(e.subarray()[0]&t)===t&&r.append(Uint8Array.from([0])),r.append(e),new _t(Uint8Array.from([2]),zy(r),r)}function QS(e){const r=Uint8Array.from([0]),t=new _t(r,e);return new _t(Uint8Array.from([3]),zy(t),t)}function ma(e,r=48){const t=new _t;for(const n of e)t.append(n);return new _t(Uint8Array.from([r]),zy(t),t)}async function yJ(e,r,t,n){var a,s;const o=await crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:e.crv??"P-256"},!1,["verify"]);(a=n==null?void 0:n.signal)==null||a.throwIfAborted();const i=await crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},o,r,t.subarray());return(s=n==null?void 0:n.signal)==null||s.throwIfAborted(),i}const bJ=Uint8Array.from([6,8,42,134,72,206,61,3,1,7]),mJ=Uint8Array.from([6,5,43,129,4,0,34]),gJ=Uint8Array.from([6,5,43,129,4,0,35]),wJ={ext:!0,kty:"EC",crv:"P-256"},OJ={ext:!0,kty:"EC",crv:"P-384"},EJ={ext:!0,kty:"EC",crv:"P-521"},Vp=32,Wp=48,zp=66;function XS(e){const r=Md(e);return SJ(r)}function SJ(e){const r=e[1][1][0],t=1;let n,o;if(r.byteLength===Vp*2+1)return n=Pe(r.subarray(t,t+Vp),"base64url"),o=Pe(r.subarray(t+Vp),"base64url"),new Hp({...wJ,key_ops:["verify"],x:n,y:o});if(r.byteLength===Wp*2+1)return n=Pe(r.subarray(t,t+Wp),"base64url"),o=Pe(r.subarray(t+Wp),"base64url"),new Hp({...OJ,key_ops:["verify"],x:n,y:o});if(r.byteLength===zp*2+1)return n=Pe(r.subarray(t,t+zp),"base64url"),o=Pe(r.subarray(t+zp),"base64url"),new Hp({...EJ,key_ops:["verify"],x:n,y:o});throw new Lt(`coordinates were wrong length, got ${r.byteLength}, expected 65, 97 or 133`)}function PJ(e){return ma([Qv(Uint8Array.from([1])),ma([TJ(e.crv)],160),ma([QS(new _t(Uint8Array.from([4]),yt(e.x??"","base64url"),yt(e.y??"","base64url")))],161)]).subarray()}function TJ(e){if(e==="P-256")return bJ;if(e==="P-384")return mJ;if(e==="P-521")return gJ;throw new Lt(`Invalid curve ${e}`)}class Hp{constructor(r){g(this,"type","ECDSA");g(this,"jwk");g(this,"_raw");this.jwk=r}get raw(){return this._raw==null&&(this._raw=PJ(this.jwk)),this._raw}toMultihash(){return Yr.digest(Hy(this))}toCID(){return Z.createV1(114,this.toMultihash())}toString(){return Fe.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:Kr(this.raw,r.raw)}async verify(r,t,n){return yJ(this.jwk,t,r,n)}}class b0 extends Error{constructor(r="An error occurred while verifying a message"){super(r),this.name="VerificationError"}}class CJ extends Error{constructor(r="Missing Web Crypto API"){super(r),this.name="WebCryptoMissingError"}}const Na={get(e=globalThis){const r=e.crypto;if((r==null?void 0:r.subtle)==null)throw new CJ("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return r}},JS=32;let qp;const AJ=(async()=>{try{return await Na.get().subtle.generateKey({name:"Ed25519"},!0,["sign","verify"]),!0}catch{return!1}})();async function IJ(e,r,t){if(e.buffer instanceof ArrayBuffer){const n=await Na.get().subtle.importKey("raw",e.buffer,{name:"Ed25519"},!1,["verify"]);return await Na.get().subtle.verify({name:"Ed25519"},n,r,t instanceof Uint8Array?t:t.subarray())}throw new TypeError("WebCrypto does not support SharedArrayBuffer for Ed25519 keys")}function RJ(e,r,t){return mQ.verify(r,t instanceof Uint8Array?t:t.subarray(),e)}async function $J(e,r,t){return qp==null&&(qp=await AJ),qp?IJ(e,r,t):RJ(e,r,t)}function eP(e){return e==null?!1:typeof e.then=="function"&&typeof e.catch=="function"&&typeof e.finally=="function"}class jJ{constructor(r){g(this,"type","Ed25519");g(this,"raw");this.raw=rP(r,JS)}toMultihash(){return Yr.digest(Hy(this))}toCID(){return Z.createV1(114,this.toMultihash())}toString(){return Fe.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:Kr(this.raw,r.raw)}verify(r,t,n){var i;(i=n==null?void 0:n.signal)==null||i.throwIfAborted();const o=$J(this.raw,t,r);return eP(o)?o.then(a=>{var s;return(s=n==null?void 0:n.signal)==null||s.throwIfAborted(),a}):o}}function tP(e){return e=rP(e,JS),new jJ(e)}function rP(e,r){if(e=Uint8Array.from(e??[]),e.length!==r)throw new Lt(`Key must be a Uint8Array of length ${r}, got ${e.length}`);return e}var We;(function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.secp256k1="secp256k1",e.ECDSA="ECDSA"})(We||(We={}));var Xv;(function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.secp256k1=2]="secp256k1",e[e.ECDSA=3]="ECDSA"})(Xv||(Xv={}));(function(e){e.codec=()=>tQ(Xv)})(We||(We={}));var Ko;(function(e){let r;e.codec=()=>(r==null&&(r=RS((t,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),t.Type!=null&&(n.uint32(8),We.codec().encode(t.Type,n)),t.Data!=null&&(n.uint32(18),n.bytes(t.Data)),o.lengthDelimited!==!1&&n.ldelim()},(t,n,o={})=>{const i={},a=n==null?t.len:t.pos+n;for(;t.pos<a;){const s=t.uint32();switch(s>>>3){case 1:{i.Type=We.codec().decode(t);break}case 2:{i.Data=t.bytes();break}default:{t.skipType(s&7);break}}}return i})),r),e.encode=t=>AS(t,e.codec()),e.decode=(t,n)=>OS(t,e.codec(),n)})(Ko||(Ko={}));var m0;(function(e){let r;e.codec=()=>(r==null&&(r=RS((t,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),t.Type!=null&&(n.uint32(8),We.codec().encode(t.Type,n)),t.Data!=null&&(n.uint32(18),n.bytes(t.Data)),o.lengthDelimited!==!1&&n.ldelim()},(t,n,o={})=>{const i={},a=n==null?t.len:t.pos+n;for(;t.pos<a;){const s=t.uint32();switch(s>>>3){case 1:{i.Type=We.codec().decode(t);break}case 2:{i.Data=t.bytes();break}default:{t.skipType(s&7);break}}}return i})),r),e.encode=t=>AS(t,e.codec()),e.decode=(t,n)=>OS(t,e.codec(),n)})(m0||(m0={}));class NJ{constructor(r,t){g(this,"type","RSA");g(this,"jwk");g(this,"_raw");g(this,"_multihash");this.jwk=r,this._multihash=t}get raw(){return this._raw==null&&(this._raw=UJ(this.jwk)),this._raw}toMultihash(){return this._multihash}toCID(){return Z.createV1(114,this._multihash)}toString(){return Fe.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:Kr(this.raw,r.raw)}verify(r,t,n){return xJ(this.jwk,t,r,n)}}const kJ=18,MJ=1062,DJ=Uint8Array.from([48,13,6,9,42,134,72,134,247,13,1,1,1,5,0]);function LJ(e){const r=Md(e[1],{offset:0});return{kty:"RSA",n:Pe(r[0],"base64url"),e:Pe(r[1],"base64url")}}function UJ(e){if(e.n==null||e.e==null)throw new Lt("JWK was missing components");return ma([DJ,QS(ma([Qv(yt(e.n,"base64url")),Qv(yt(e.e,"base64url"))]))]).subarray()}function FJ(e,r){if(e.byteLength>=MJ)throw new Fy("Key size is too large");const t=Md(e,{offset:0});return BJ(t,e,r)}function BJ(e,r,t){const n=LJ(e);if(t==null){const o=KT(Ko.encode({Type:We.RSA,Data:r}));t=Sa(kJ,o)}return new NJ(n,t)}async function xJ(e,r,t,n){var a,s;const o=await Na.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);(a=n==null?void 0:n.signal)==null||a.throwIfAborted();const i=await Na.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},o,r,t instanceof Uint8Array?t:t.subarray());return(s=n==null?void 0:n.signal)==null||s.throwIfAborted(),i}function VJ(e,r,t,n){var i;const o=Ry.digest(t instanceof Uint8Array?t:t.subarray());if(eP(o))return o.then(({digest:a})=>{var s;return(s=n==null?void 0:n.signal)==null||s.throwIfAborted(),Bc.verify(r,a,e)}).catch(a=>{throw a.name==="AbortError"?a:new b0(String(a))});try{return(i=n==null?void 0:n.signal)==null||i.throwIfAborted(),Bc.verify(r,o.digest,e)}catch(a){throw new b0(String(a))}}class WJ{constructor(r){g(this,"type","secp256k1");g(this,"raw");g(this,"_key");this._key=HJ(r),this.raw=zJ(this._key)}toMultihash(){return Yr.digest(Hy(this))}toCID(){return Z.createV1(114,this.toMultihash())}toString(){return Fe.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:Kr(this.raw,r.raw)}verify(r,t,n){return VJ(this._key,t,r,n)}}function nP(e){return new WJ(e)}function zJ(e){return Bc.ProjectivePoint.fromHex(e).toRawBytes(!0)}function HJ(e){try{return Bc.ProjectivePoint.fromHex(e),e}catch(r){throw new Fy(String(r))}}function qJ(e,r){const{Type:t,Data:n}=Ko.decode(e),o=n??new Uint8Array;switch(t){case We.RSA:return FJ(o,r);case We.Ed25519:return tP(o);case We.secp256k1:return nP(o);case We.ECDSA:return XS(o);default:throw new By}}function GJ(e){const{Type:r,Data:t}=Ko.decode(e.digest),n=t??new Uint8Array;switch(r){case We.Ed25519:return tP(n);case We.secp256k1:return nP(n);case We.ECDSA:return XS(n);default:throw new By}}function Hy(e){return Ko.encode({Type:We[e.type],Data:e.raw})}const oP=Symbol.for("nodejs.util.inspect.custom"),KJ=114;var H0;class qy{constructor(r){g(this,"type");g(this,"multihash");g(this,"publicKey");g(this,"string");g(this,H0,!0);this.type=r.type,this.multihash=r.multihash,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}toString(){return this.string==null&&(this.string=Fe.encode(this.multihash.bytes).slice(1)),this.string}toMultihash(){return this.multihash}toCID(){return Z.createV1(KJ,this.multihash)}toJSON(){return this.toString()}equals(r){var t;if(r==null)return!1;if(r instanceof Uint8Array)return Kr(this.multihash.bytes,r);if(typeof r=="string")return this.toString()===r;if(((t=r==null?void 0:r.toMultihash())==null?void 0:t.bytes)!=null)return Kr(this.multihash.bytes,r.toMultihash().bytes);throw new Error("not valid Id")}[(H0=Uy,oP)](){return`PeerId(${this.toString()})`}}class YJ extends qy{constructor(t){super({...t,type:"RSA"});g(this,"type","RSA");g(this,"publicKey");this.publicKey=t.publicKey}}class ZJ extends qy{constructor(t){super({...t,type:"Ed25519"});g(this,"type","Ed25519");g(this,"publicKey");this.publicKey=t.publicKey}}class QJ extends qy{constructor(t){super({...t,type:"secp256k1"});g(this,"type","secp256k1");g(this,"publicKey");this.publicKey=t.publicKey}}const XJ=2336;var q0,G0;class iP{constructor(r){g(this,"type","url");g(this,"multihash");g(this,"publicKey");g(this,"url");g(this,q0,!0);this.url=r.toString(),this.multihash=Yr.digest(yt(this.url))}[(G0=oP,q0=Uy,G0)](){return`PeerId(${this.url})`}toString(){return this.toCID().toString()}toMultihash(){return this.multihash}toCID(){return Z.createV1(XJ,this.toMultihash())}toJSON(){return this.toString()}equals(r){return r==null?!1:(r instanceof Uint8Array&&(r=Pe(r)),r.toString()===this.toString())}}const JJ=114,g0=2336;function ft(e,r){let t;if(e.charAt(0)==="1"||e.charAt(0)==="Q")t=dw(Fe.decode(`z${e}`));else{if(e.startsWith("k51qzi5uqu5")||e.startsWith("kzwfwjn5ji4")||e.startsWith("k2k4r8")||e.startsWith("bafz"))return eee(Z.parse(e));throw new Lt('Please pass a multibase decoder for strings that do not start with "1" or "Q"')}return aP(t)}function aP(e){if(ree(e))return new YJ({multihash:e});if(tee(e))try{const r=GJ(e);if(r.type==="Ed25519")return new ZJ({multihash:e,publicKey:r});if(r.type==="secp256k1")return new QJ({multihash:e,publicKey:r})}catch{const t=Pe(e.digest);return new iP(new URL(t))}throw new US("Supplied PeerID Multihash is invalid")}function eee(e){if((e==null?void 0:e.multihash)==null||e.version==null||e.version===1&&e.code!==JJ&&e.code!==g0)throw new LS("Supplied PeerID CID is invalid");if(e.code===g0){const r=Pe(e.multihash.digest);return new iP(new URL(r))}return aP(e.multihash)}function tee(e){return e.code===Yr.code}function ree(e){return e.code===Ry.code}async function*Dd(e,r={}){const t=e.getReader();try{for(;;){const n=await t.read();if(n.done)return;yield n.value}}finally{r.preventCancel!==!0&&await t.cancel(),t.releaseLock()}}function nee(e){return e[Symbol.asyncIterator]!=null}function oee(e){if(nee(e))return(async()=>{for await(const r of e)return r})();for(const r of e)return r}function iee(e){return e[Symbol.asyncIterator]!=null}function uP(e){if(iee(e))return(async()=>{const t=[];for await(const n of e)t.push(n);return t})();const r=[];for(const t of e)r.push(t);return r}const aee="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let uee=(e=21)=>{let r="",t=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)r+=aee[t[e]&63];return r};function see(e){return e[Symbol.asyncIterator]!=null}function Ld(e){if(see(e))return(async()=>{let t;for await(const n of e)t=n;return t})();let r;for(const t of e)r=t;return r}function cee(e,r){if(e===r)return!0;if(e.byteLength!==r.byteLength)return!1;for(let t=0;t<e.byteLength;t++)if(e[t]!==r[t])return!1;return!0}function Gy(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function lee(e,r){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),a=i.charCodeAt(0);if(t[a]!==255)throw new TypeError(i+" is ambiguous");t[a]=o}var s=e.length,c=e.charAt(0),u=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function d(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var y=0,_=0,b=0,w=v.length;b!==w&&v[b]===0;)b++,y++;for(var S=(w-b)*l+1>>>0,E=new Uint8Array(S);b!==w;){for(var P=v[b],C=0,T=S-1;(P!==0||C<_)&&T!==-1;T--,C++)P+=256*E[T]>>>0,E[T]=P%s>>>0,P=P/s>>>0;if(P!==0)throw new Error("Non-zero carry");_=C,b++}for(var I=S-_;I!==S&&E[I]===0;)I++;for(var $=c.repeat(y);I<S;++I)$+=e.charAt(E[I]);return $}function h(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var y=0;if(v[y]!==" "){for(var _=0,b=0;v[y]===c;)_++,y++;for(var w=(v.length-y)*u+1>>>0,S=new Uint8Array(w);v[y];){var E=t[v.charCodeAt(y)];if(E===255)return;for(var P=0,C=w-1;(E!==0||P<b)&&C!==-1;C--,P++)E+=s*S[C]>>>0,S[C]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");b=P,y++}if(v[y]!==" "){for(var T=w-b;T!==w&&S[T]===0;)T++;for(var I=new Uint8Array(_+(w-T)),$=_;T!==w;)I[$++]=S[T++];return I}}}function p(v){var y=h(v);if(y)return y;throw new Error(`Non-${r} character`)}return{encode:d,decodeUnsafe:h,decode:p}}var fee=lee,dee=fee;class hee{constructor(r,t,n){g(this,"name");g(this,"prefix");g(this,"baseEncode");this.name=r,this.prefix=t,this.baseEncode=n}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}}class pee{constructor(r,t,n){g(this,"name");g(this,"prefix");g(this,"baseDecode");g(this,"prefixCodePoint");if(this.name=r,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return sP(this,r)}}class vee{constructor(r){g(this,"decoders");this.decoders=r}or(r){return sP(this,r)}decode(r){const t=r[0],n=this.decoders[t];if(n!=null)return n.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function sP(e,r){return new vee({...e.decoders??{[e.prefix]:e},...r.decoders??{[r.prefix]:r}})}class _ee{constructor(r,t,n,o){g(this,"name");g(this,"prefix");g(this,"baseEncode");g(this,"baseDecode");g(this,"encoder");g(this,"decoder");this.name=r,this.prefix=t,this.baseEncode=n,this.baseDecode=o,this.encoder=new hee(r,t,n),this.decoder=new pee(r,t,o)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}}function cP({name:e,prefix:r,encode:t,decode:n}){return new _ee(e,r,t,n)}function lP({name:e,prefix:r,alphabet:t}){const{encode:n,decode:o}=dee(t,e);return cP({prefix:r,name:e,encode:n,decode:i=>Gy(o(i))})}function yee(e,r,t,n){const o={};for(let l=0;l<r.length;++l)o[r[l]]=l;let i=e.length;for(;e[i-1]==="=";)--i;const a=new Uint8Array(i*t/8|0);let s=0,c=0,u=0;for(let l=0;l<i;++l){const d=o[e[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|d,s+=t,s>=8&&(s-=8,a[u++]=255&c>>s)}if(s>=t||255&c<<8-s)throw new SyntaxError("Unexpected end of data");return a}function bee(e,r,t){const n=r[r.length-1]==="=",o=(1<<t)-1;let i="",a=0,s=0;for(let c=0;c<e.length;++c)for(s=s<<8|e[c],a+=8;a>t;)a-=t,i+=r[o&s>>a];if(a!==0&&(i+=r[o&s<<t-a]),n)for(;i.length*t&7;)i+="=";return i}function bt({name:e,prefix:r,bitsPerChar:t,alphabet:n}){return cP({prefix:r,name:e,encode(o){return bee(o,n,t)},decode(o){return yee(o,n,t,e)}})}bt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});bt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const fP=bt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});bt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function fr(e){return fP.encode(e).slice(1)}function Qt(e){return fP.decode(`u${e}`)}const Fc=bt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});bt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});bt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});bt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});bt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});bt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});bt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});bt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});bt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const kr=lP({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});lP({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var mee=dP,w0=128,gee=-128,wee=Math.pow(2,31);function dP(e,r,t){r=r||[],t=t||0;for(var n=t;e>=wee;)r[t++]=e&255|w0,e/=128;for(;e&gee;)r[t++]=e&255|w0,e>>>=7;return r[t]=e|0,dP.bytes=t-n+1,r}var Oee=Jv,Eee=128,O0=127;function Jv(e,n){var t=0,n=n||0,o=0,i=n,a,s=e.length;do{if(i>=s)throw Jv.bytes=0,new RangeError("Could not decode varint");a=e[i++],t+=o<28?(a&O0)<<o:(a&O0)*Math.pow(2,o),o+=7}while(a>=Eee);return Jv.bytes=i-n,t}var See=Math.pow(2,7),Pee=Math.pow(2,14),Tee=Math.pow(2,21),Cee=Math.pow(2,28),Aee=Math.pow(2,35),Iee=Math.pow(2,42),Ree=Math.pow(2,49),$ee=Math.pow(2,56),jee=Math.pow(2,63),Nee=function(e){return e<See?1:e<Pee?2:e<Tee?3:e<Cee?4:e<Aee?5:e<Iee?6:e<Ree?7:e<$ee?8:e<jee?9:10},kee={encode:mee,decode:Oee,encodingLength:Nee},ml=kee;function e_(e,r=0){return[ml.decode(e,r),ml.decode.bytes]}function gl(e,r,t=0){return ml.encode(e,r,t),r}function wl(e){return ml.encodingLength(e)}function Mee(e,r){const t=r.byteLength,n=wl(e),o=n+wl(t),i=new Uint8Array(o+t);return gl(e,i,0),gl(t,i,n),i.set(r,o),new Ky(e,t,r,i)}function Dee(e){const r=Gy(e),[t,n]=e_(r),[o,i]=e_(r.subarray(n)),a=r.subarray(n+i);if(a.byteLength!==o)throw new Error("Incorrect length");return new Ky(t,o,a,r)}function Lee(e,r){if(e===r)return!0;{const t=r;return e.code===t.code&&e.size===t.size&&t.bytes instanceof Uint8Array&&cee(e.bytes,t.bytes)}}class Ky{constructor(r,t,n,o){g(this,"code");g(this,"size");g(this,"digest");g(this,"bytes");this.code=r,this.size=t,this.digest=n,this.bytes=o}}function E0(e,r){const{bytes:t,version:n}=e;switch(n){case 0:return Fee(t,t_(e),r??kr.encoder);default:return Bee(t,t_(e),r??Fc.encoder)}}const S0=new WeakMap;function t_(e){const r=S0.get(e);if(r==null){const t=new Map;return S0.set(e,t),t}return r}var K0;class $e{constructor(r,t,n,o){g(this,"code");g(this,"version");g(this,"multihash");g(this,"bytes");g(this,"/");g(this,K0,"CID");this.code=t,this.version=r,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:r,multihash:t}=this;if(r!==ra)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==xee)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return $e.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:r,digest:t}=this.multihash,n=Mee(r,t);return $e.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(r){return $e.equals(this,r)}static equals(r,t){const n=t;return n!=null&&r.code===n.code&&r.version===n.version&&Lee(r.multihash,n.multihash)}toString(r){return E0(this,r)}toJSON(){return{"/":E0(this)}}link(){return this}[(K0=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(r){if(r==null)return null;const t=r;if(t instanceof $e)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){const{version:n,code:o,multihash:i,bytes:a}=t;return new $e(n,o,i,a??P0(n,o,i.bytes))}else if(t[Vee]===!0){const{version:n,multihash:o,code:i}=t,a=Dee(o);return $e.create(n,i,a)}else return null}static create(r,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(r){case 0:{if(t!==ra)throw new Error(`Version 0 CID must use dag-pb (code: ${ra}) block encoding`);return new $e(r,t,n,n.bytes)}case 1:{const o=P0(r,t,n.bytes);return new $e(r,t,n,o)}default:throw new Error("Invalid version")}}static createV0(r){return $e.create(0,ra,r)}static createV1(r,t){return $e.create(1,r,t)}static decode(r){const[t,n]=$e.decodeFirst(r);if(n.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(r){const t=$e.inspectBytes(r),n=t.size-t.multihashSize,o=Gy(r.subarray(n,n+t.multihashSize));if(o.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=o.subarray(t.multihashSize-t.digestSize),a=new Ky(t.multihashCode,t.digestSize,i,o);return[t.version===0?$e.createV0(a):$e.createV1(t.codec,a),r.subarray(t.size)]}static inspectBytes(r){let t=0;const n=()=>{const[d,h]=e_(r.subarray(t));return t+=h,d};let o=n(),i=ra;if(o===18?(o=0,t=0):i=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const a=t,s=n(),c=n(),u=t+c,l=u-a;return{version:o,codec:i,multihashCode:s,digestSize:c,multihashSize:l,size:u}}static parse(r,t){const[n,o]=Uee(r,t),i=$e.decode(o);if(i.version===0&&r[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return t_(i).set(n,r),i}}function Uee(e,r){switch(e[0]){case"Q":{const t=r??kr;return[kr.prefix,t.decode(`${kr.prefix}${e}`)]}case kr.prefix:{const t=r??kr;return[kr.prefix,t.decode(e)]}case Fc.prefix:{const t=r??Fc;return[Fc.prefix,t.decode(e)]}default:{if(r==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],r.decode(e)]}}}function Fee(e,r,t){const{prefix:n}=t;if(n!==kr.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const o=r.get(n);if(o==null){const i=t.encode(e).slice(1);return r.set(n,i),i}else return o}function Bee(e,r,t){const{prefix:n}=t,o=r.get(n);if(o==null){const i=t.encode(e);return r.set(n,i),i}else return o}const ra=112,xee=18;function P0(e,r,t){const n=wl(e),o=n+wl(r),i=new Uint8Array(o+t.byteLength);return gl(e,i,0),gl(r,i,n),i.set(t,o),i}const Vee=Symbol.for("@ipld/js-cid/CID");function Wee(e){const[r,t,n]=e;return{payload:t,signatures:[{protected:r,signature:n}],link:$e.decode(Qt(t))}}function zee(e){const r={signature:Qt(e.signature)};return e.header&&(r.header=e.header),e.protected&&(r.protected=Qt(e.protected)),r}function Hee(e){return{payload:Qt(e.payload),signatures:e.signatures.map(zee)}}function qee(e){const r={signature:fr(e.signature)};return e.header&&(r.header=e.header),e.protected&&(r.protected=fr(e.protected)),r}function Gee(e){const r={payload:fr(e.payload),signatures:e.signatures.map(qee)};try{return r.pld=r_(Yee(e.payload)),r}catch{try{return r.link=$e.decode(new Uint8Array(e.payload)),r}catch{throw new Error("Invalid payload, must be either JSON or CID")}}}function r_(e){if(typeof e=="string"){if(e.startsWith("ipfs://"))return $e.parse(e.slice(7))}else{if(Array.isArray(e))return e.map(r_);if(Kee(e)){const r={};for(const t in e)r[t]=r_(e[t]);return r}}return e}function Kee(e){return typeof e=="object"&&e!==null}function Yee(e){return JSON.parse(new TextDecoder().decode(e))}function Zee(e){const[r,t,n,o,i]=e,a={ciphertext:o,iv:n,protected:r,tag:i};return t&&(a.recipients=[{encrypted_key:t}]),a}function Qee(e){const r={};return e.encrypted_key&&(r.encrypted_key=Qt(e.encrypted_key)),e.header&&(r.header=e.header),r}function Xee(e){const r={ciphertext:Qt(e.ciphertext),protected:Qt(e.protected),iv:Qt(e.iv),tag:Qt(e.tag)};return e.aad&&(r.aad=Qt(e.aad)),e.recipients&&(r.recipients=e.recipients.map(Qee)),e.unprotected&&(r.unprotected=e.unprotected),r}function Jee(e){const r={};return e.encrypted_key&&(r.encrypted_key=fr(e.encrypted_key)),e.header&&(r.header=e.header),r}function ete(e){const r={ciphertext:fr(e.ciphertext),protected:fr(e.protected),iv:fr(e.iv),tag:fr(e.tag)};return e.aad&&(r.aad=fr(e.aad)),e.recipients&&(r.recipients=e.recipients.map(Jee)),e.unprotected&&(r.unprotected=e.unprotected),r}const tte="dag-jose",rte=133;function hP(e){return"payload"in e&&typeof e.payload=="string"&&"signatures"in e&&Array.isArray(e.signatures)}function nte(e){return"payload"in e&&e.payload instanceof Uint8Array&&"signatures"in e&&Array.isArray(e.signatures)}function ote(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}function pP(e){return"ciphertext"in e&&typeof e.ciphertext=="string"&&"iv"in e&&typeof e.iv=="string"&&"protected"in e&&typeof e.protected=="string"&&"tag"in e&&typeof e.tag=="string"}function vP(e){if(typeof e=="string"){const r=e.split(".");if(r.length===3)return Wee(r);if(r.length===5)return Zee(r);throw new Error("Not a valid JOSE string")}if(hP(e)||pP(e))return e;throw new Error("Not a valid unencoded JOSE object")}function ite(e){typeof e=="string"&&(e=vP(e));let r;if(hP(e))r=Hee(e);else if(pP(e))r=Xee(e);else throw new Error("Not a valid JOSE object");return new Uint8Array(vw(r))}function ate(e){let r;try{r=_w(e)}catch{throw new Error("Not a valid DAG-JOSE object")}if(nte(r))return Gee(r);if(ote(r))return ete(r);throw new Error("Not a valid DAG-JOSE object")}const ute=Object.freeze(Object.defineProperty({__proto__:null,code:rte,decode:ate,encode:ite,name:tte,toGeneral:vP},Symbol.toStringTag,{value:"Module"}));function ste(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var cte=ste;const lte=u_(cte),_P=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,Yy=lte(),Ud=_P&&!Yy,fte=Yy&&_P,dte=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!Yy,Fd=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;function T0(e,r){for(const t in r)Object.defineProperty(e,t,{value:r[t],enumerable:!0,configurable:!0});return e}function hte(e,r,t){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof r=="object"&&(t=r,r=""),r&&(t.code=r);try{return T0(e,t)}catch{t.message=e.message,t.stack=e.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(e)),T0(new o,t)}}var pte=hte;const Jt=u_(pte);let vte=class extends Error{constructor(t){super(t.statusText);g(this,"response");this.name="HTTPError",this.response=t}};class _te extends Error{constructor(r="Invalid mtime"){super(r),this.name="InvalidMtimeError"}}function Yo(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function Ol(e){return e.constructor!=null&&(e.constructor.name==="Blob"||e.constructor.name==="File")&&typeof e.stream=="function"}function n_(e){return typeof e=="object"&&(e.path!=null||e.content!=null)}function El(e){return typeof(e==null?void 0:e.getReader)=="function"}function yP(e){if(e!=null)return typeof e=="string"&&(e=parseInt(e,8)),e&4095}function yte(e){return Object.prototype.hasOwnProperty.call(e,"secs")}function bte(e){return Object.prototype.hasOwnProperty.call(e,"Seconds")}function mte(e){return Array.isArray(e)}function Bd(e){if(e!=null){if(yte(e)&&(e={secs:e.secs,nsecs:e.nsecs}),bte(e)&&(e={secs:BigInt(e.Seconds),nsecs:e.FractionalNanoseconds}),mte(e)&&(e={secs:BigInt(e[0]),nsecs:e[1]}),e instanceof Date){const r=e.getTime(),t=Math.floor(r/1e3);e={secs:BigInt(t),nsecs:(r-t*1e3)*1e3}}if(typeof e=="bigint"){const r=e/BigInt(1e9),t=e-r*BigInt(1e9);e={secs:r,nsecs:Number(t)}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw new _te("mtime-nsecs must be within the range [0,999999999]");return e}}}async function*gte(e,r){if(typeof e=="string"||e instanceof String||Yo(e)||Ol(e)||e._readableState!=null)throw Jt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(El(e)&&(e=Dd(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=$d(e),{value:n,done:o}=await t.peek();if(o===!0){yield*[];return}if(t.push(n),Number.isInteger(n))throw Jt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState!=null){yield*o0(t,async i=>Gp({content:i},r));return}if(Yo(n)){yield Gp({content:t},r);return}if(n_(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||El(n)||Ol(n)){yield*o0(t,async i=>Gp(i,r));return}}throw n_(e)?Jt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):Jt(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}async function Gp(e,r){const{path:t,mode:n,mtime:o,content:i}=e,a={path:t??"",mode:yP(n),mtime:Bd(o)};return i!=null?a.content=await r(i):t==null&&(a.content=await r(e)),a}async function bP(e){if(Yo(e))return new Blob([e]);if(typeof e=="string"||e instanceof String)return new Blob([e.toString()]);if(Ol(e))return e;if(El(e)&&(e=Dd(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const r=$d(e),{value:t,done:n}=await r.peek();if(n===!0)return C0(r);if(r.push(t),Number.isInteger(t))return new Blob([Uint8Array.from(await uP(r))]);if(Yo(t)||typeof t=="string"||t instanceof String)return C0(r)}throw new Lt(`Unexpected input: ${e}`)}async function C0(e){const r=[];for await(const t of e)r.push(t);return new Blob(r)}function wte(e){return gte(e,bP)}function Zy(e){if(e!=null)return typeof e=="string"?e:e.toString(8).padStart(4,"0")}async function A0(e,r,t={},n){const o=[],i=new FormData;let a=0,s=0;for await(const{content:c,path:u,mode:l,mtime:d}of wte(e)){let h="";const p=c!=null?"file":"dir";a>0&&(h=`-${a}`);let v=p+h;const y=[];if(l!=null&&y.push(`mode=${Zy(l)}`),d!=null){const{secs:_,nsecs:b}=d;y.push(`mtime=${_}`),b!=null&&y.push(`mtime-nsecs=${b}`)}if(y.length>0&&(v=`${v}?${y.join("&")}`),c!=null){i.set(v,c,u!=null?encodeURIComponent(u):void 0);const _=s+c.size;o.push({name:u,start:s,end:_}),s=_}else if(u!=null)i.set(v,new File([""],encodeURIComponent(u),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");a++}return{total:s,parts:o,headers:t,body:i}}async function ln(e,r,t={},n=`-----------------------------${uee()}`){let o=A0;return fte&&(o=A0),o(e,r,t,n)}function qe(e){if(e==null)return e;const r=/^[A-Z]+$/,t={};return Object.keys(e).reduce((n,o)=>(r.test(o)?n[o.toLowerCase()]=e[o]:r.test(o[0])?n[o[0].toLowerCase()+o.slice(1)]=e[o]:n[o]=e[o],n),t)}function R({arg:e,searchParams:r,hashAlg:t,mtime:n,mode:o,...i}={}){r!=null&&(i={...i,...r}),t!=null&&(i.hash=t),n!=null&&(n=Bd(n),i.mtime=n.secs,i.mtimeNsecs=n.nsecs),o!=null&&(i.mode=Zy(o)),isNaN(i.timeout)||(i.timeout=`${i.timeout}ms`),e==null?e=[]:Array.isArray(e)||(e=[e]);const a=new URLSearchParams(i);return e.forEach(s=>{a.append("arg",s)}),a}function mP(e){return async function*(t,n={}){const o=new AbortController,i=Tr([o.signal,n.signal]);try{const{headers:a,body:s,total:c,parts:u}=await ln(t,o,n.headers),[l,d]=typeof n.progress=="function"?Ote(c,n.progress,u):[void 0,void 0],h=await e.post("add",{searchParams:R({"stream-channels":!0,...n,progress:!!l}),onUploadProgress:d,signal:i,headers:a,body:s});for await(let p of h.ndjson())p=qe(p),p.hash!==void 0?yield Ste(p):l!=null&&l(p.bytes??0,p.name)}finally{i.clear()}}}const Ote=(e,r,t)=>t!=null?[void 0,Ete(e,t,r)]:[r,void 0],Ete=(e,r,t)=>{let n=0;const o=r.length;return({loaded:i,total:a})=>{const s=Math.floor(i/a*e);for(;n<o;){const{start:c,end:u,name:l}=r[n];if(s<u){t(s-c,l);break}else t(u-c,l),n+=1}}};function Ste({name:e,hash:r,size:t,mode:n,mtime:o,mtimeNsecs:i}){const a={path:e,cid:Z.parse(r),size:parseInt(t)};return n!=null&&(a.mode=parseInt(n,8)),o!=null&&(a.mtime={secs:o,nsecs:i??0}),a}async function*Pte(e,r){if(e==null)throw Jt(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if(typeof e=="string"||e instanceof String){yield Ac(e.toString(),r);return}if(Yo(e)||Ol(e)){yield Ac(e,r);return}if(El(e)&&(e=Dd(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=$d(e),{value:n,done:o}=await t.peek();if(o===!0){yield{content:[]};return}if(t.push(n),Number.isInteger(n)||Yo(n)||typeof n=="string"||n instanceof String){yield Ac(t,r);return}throw Jt(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(n_(e)){yield Ac(e,r);return}throw Jt(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function Ac(e,r){const{path:t,mode:n,mtime:o,content:i}=e,a={path:t??"",mode:yP(n),mtime:Bd(o)};return i!=null?a.content=await r(i):t==null&&(a.content=await r(e)),a}function Tte(e){return Pte(e,bP)}function Cte(e){const r=mP(e);return async function(n,o={}){const i=Tte(n),a=r(i,o),s=await Ld(a);if(s==null)throw new Error("Invalid body");return s}}function gP(e){return async function(t={}){const n=await e.post("bitswap/stat",{searchParams:R(t),signal:t.signal,headers:t.headers});return Ate(await n.json())}}function Ate(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist??[]).map(r=>Z.parse(r["/"])),peers:(e.Peers??[]).map(r=>ft(r)),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}function Ite(e){return async function(t,n={}){return((await(await e.post("bitswap/wantlist",{signal:n.signal,searchParams:R({...n,peer:t.toString()}),headers:n.headers})).json()).Keys??[]).map(i=>Z.parse(i["/"]))}}function Rte(e){return async function(t={}){return((await(await e.post("bitswap/wantlist",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()).Keys??[]).map(o=>Z.parse(o["/"]))}}function $te(e){return{wantlist:Rte(e),wantlistForPeer:Ite(e),stat:gP(e)}}function wP(e){return async function(t,n={}){const o=await e.post("block/get",{signal:n.signal,searchParams:R({arg:t.toString(),...n}),headers:n.headers});return new Uint8Array(await o.arrayBuffer())}}function jte(e){return async function r(t,n={}){const o=new AbortController,i=Tr([o.signal,n.signal]);let a;try{a=await(await e.post("block/put",{signal:i,searchParams:R(n),...await ln([t],o,n.headers)})).json()}catch(s){if(n.format==="dag-pb")return await r(t,{...n,format:"protobuf"});if(n.format==="dag-cbor")return await r(t,{...n,format:"cbor"});throw s}finally{i.clear()}return Z.parse(a.Key)}}function Nte(e){return async function*(t,n={}){Array.isArray(t)||(t=[t]);const o=await e.post("block/rm",{signal:n.signal,searchParams:R({arg:t.map(i=>i.toString()),"stream-channels":!0,...n}),headers:n.headers});for await(const i of o.ndjson())yield kte(i)}}function kte(e){const r={cid:Z.parse(e.Hash)};return e.Error!=null&&(r.error=new Error(e.Error)),r}function Mte(e){return async function(t,n={}){const i=await(await e.post("block/stat",{signal:n.signal,searchParams:R({arg:t.toString(),...n}),headers:n.headers})).json();return{cid:Z.parse(i.Key),size:i.Size}}}function Dte(e){return{get:wP(e),put:jte(e),rm:Nte(e),stat:Mte(e)}}function Lte(e){return async function(t,n={}){const o=await e.post("bootstrap/add",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers}),{Peers:i}=await o.json();return{Peers:i.map(a=>ct(a))}}}function Ute(e){return async function(t={}){const n=await e.post("bootstrap/list",{signal:t.signal,searchParams:R(t),headers:t.headers}),{Peers:o}=await n.json();return{Peers:o.map(i=>ct(i))}}}function Fte(e){return async function(t,n={}){const o=await e.post("bootstrap/rm",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers}),{Peers:i}=await o.json();return{Peers:i.map(a=>ct(a))}}}function Bte(e){return{add:Lte(e),list:Ute(e),rm:Fte(e)}}function xte(e){return async function*(t,n={}){yield*(await e.post("cat",{signal:n.signal,searchParams:R({arg:t.toString(),...n}),headers:n.headers})).iterator()}}function Vte(e){return async function(t={}){return(await e.post("commands",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()}}function Wte(e){return async function(t={}){return await(await e.post("config/show",{signal:t.signal,searchParams:R({...t}),headers:t.headers})).json()}}function zte(e){return async function(t,n={}){if(t==null)throw new Error("key argument is required");return(await(await e.post("config",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers})).json()).Value}}function Hte(e){return async function(t,n={}){const i=await(await e.post("config/profile/apply",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers})).json();return{original:i.OldCfg,updated:i.NewCfg}}}function qte(e){return{apply:Hte(e)}}function Gte(e){return async function(t,n={}){const o=new AbortController,i=Tr([o.signal,n.signal]);try{await(await e.post("config/replace",{signal:i,searchParams:R(n),...await ln([yt(JSON.stringify(t))],o,n.headers)})).text()}finally{i.clear()}}}function Kte(e){return async function(t,n,o={}){if(typeof t!="string")throw new Error("Invalid key type");const i={...o,...Yte(t,n)};await(await e.post("config",{signal:o.signal,searchParams:R(i),headers:o.headers})).text()}}function Yte(e,r){switch(typeof r){case"boolean":return{arg:[e,r.toString()],bool:!0};case"string":return{arg:[e,r]};default:return{arg:[e,JSON.stringify(r)],json:!0}}}function Zte(e){return{getAll:Wte(e),get:zte(e),set:Kte(e),replace:Gte(e),profiles:qte(e)}}function Qte(e){return async function*(t,n={}){yield*(await e.post("dag/export",{signal:n.signal,searchParams:R({arg:t.toString()}),headers:n.headers})).iterator()}}async function*I0(e,r,t,n,o){const i=async u=>{const l=await t.getCodec(u.code),d=await n(u,o);return l.decode(d)},a=r.split("/").filter(Boolean);let s=await i(e),c=e;for(;a.length>0;){const u=a.shift();if(u==null)throw Jt(new Error(`Could not resolve path "${r}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(s,u))s=s[u],yield{value:s,remainderPath:a.join("/")};else throw Jt(new Error(`no link named "${u}" under ${c}`),"ERR_NO_LINK");const l=Z.asCID(s);l!=null&&(c=l,s=await i(s))}yield{value:s,remainderPath:""}}function Xte(e,r){const t=wP(e);return async function(o,i={}){if(i.path!=null){const l=i.localResolve===!0?await oee(I0(o,i.path,r,t,i)):await Ld(I0(o,i.path,r,t,i));if(l==null)throw Jt(new Error("Not found"),"ERR_NOT_FOUND");return l}const a=await r.getCodec(o.code),s=await t(o,i);return{value:a.decode(s),remainderPath:""}}}function Jte(e){return async function*(t,n={}){const o=new AbortController,i=Tr([o.signal,n.signal]);try{const{headers:a,body:s}=await ln(t,o,n.headers),c=await e.post("dag/import",{signal:i,headers:a,body:s,searchParams:R({"pin-roots":n.pinRoots})});for await(const{Root:u}of c.ndjson())if(u!==void 0){const{Cid:{"/":l},PinErrorMsg:d}=u;yield{root:{cid:Z.parse(l),pinErrorMsg:d}}}}finally{i.clear()}}}function ere(e,r){return async function(n,o={}){const i={storeCodec:"dag-cbor",hashAlg:"sha2-256",...o};let a;if(i.inputCodec!=null){if(!(n instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");a=n}else a=(await r.getCodec(i.storeCodec??"dag-cbor")).encode(n),i.inputCodec=i.storeCodec;const s=new AbortController,c=Tr([s.signal,i.signal]);try{const l=await(await e.post("dag/put",{timeout:i.timeout,signal:c,searchParams:R(i),...await ln([a],s,i.headers)})).json();return Z.parse(l.Cid["/"])}finally{c.clear()}}}function tre(e){return async function(t,n={}){const i=await(await e.post("dag/resolve",{signal:n.signal,searchParams:R({arg:`${t}${n.path!=null?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers})).json();return{cid:Z.parse(i.Cid["/"]),remainderPath:i.RemPath}}}function rre(e,r){return{export:Qte(e),get:Xte(e,r),import:Jte(e),put:ere(e,r),resolve:tre(e)}}const nre=0,ore=1,ire=2,are=3,ure=4,sre=5,cre=6,lre=7;function Li(e){var r;if(e.Type===nre)return{name:"SENDING_QUERY",type:e.Type};if(e.Type===ore)return{from:ft(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses??[]).map(({ID:t,Addrs:n})=>({id:ft(t),multiaddrs:n.map(o=>ct(o)),protocols:[]})),providers:(e.Responses??[]).map(({ID:t,Addrs:n})=>({id:ft(t),multiaddrs:n.map(o=>ct(o)),protocols:[]}))};if(e.Type===ire){let t={id:e.ID??ft(e.ID),multiaddrs:[],protocols:[]};return((r=e.Responses)==null?void 0:r.length)>0&&(t={id:ft(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map(n=>ct(n)),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:t}}if(e.Type===are)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(e.Type===ure)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map(({ID:t,Addrs:n})=>({id:ft(t),multiaddrs:n.map(o=>ct(o)),protocols:[]}))};if(e.Type===sre)return{name:"VALUE",type:e.Type,value:yt(e.Extra,"base64pad")};if(e.Type===cre){const t=e.Responses.map(({ID:n})=>ft(n));if(t.length===0)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:t[0]}}if(e.Type===lre)return{name:"DIALING_PEER",type:e.Type,peer:ft(e.ID)};throw new Error("Unknown DHT event type")}function fre(e){return async function*(t,n={}){const o=await e.post("dht/query",{signal:n.signal,searchParams:R({arg:t.toString(),...n}),headers:n.headers});for await(const i of o.ndjson())yield Li(i)}}var R0;(function(e){e[e.SENDING_QUERY=0]="SENDING_QUERY",e[e.PEER_RESPONSE=1]="PEER_RESPONSE",e[e.FINAL_PEER=2]="FINAL_PEER",e[e.QUERY_ERROR=3]="QUERY_ERROR",e[e.PROVIDER=4]="PROVIDER",e[e.VALUE=5]="VALUE",e[e.ADDING_PEER=6]="ADDING_PEER",e[e.DIALING_PEER=7]="DIALING_PEER"})(R0||(R0={}));var $0;(function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"})($0||($0={}));function dre(e){return{query:fre(e)}}function hre(e){return async function(t={}){return(await e.post("diag/cmds",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()}}function pre(e){return async function(t={}){return(await e.post("diag/net",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()}}function vre(e){return async function(t={}){return(await e.post("diag/sys",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()}}function _re(e){return{cmds:hre(e),net:pre(e),sys:vre(e)}}function yre(e){return async function(t,n,o={}){const i=Array.isArray(t)?t:[t];await(await e.post("files/cp",{signal:o.signal,searchParams:R({arg:i.concat(n).map(s=>Z.asCID(s)!=null?`/ipfs/${s}`:s),...o}),headers:o.headers})).text()}}function bre(e){return async function(t,n={}){if(typeof t!="string")throw new Error("ipfs.files.flush requires a path");const i=await(await e.post("files/flush",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers})).json();return Z.parse(i.Cid)}}function o_(e){const r=qe(e);return Object.prototype.hasOwnProperty.call(r,"mode")&&(r.mode=parseInt(r.mode,8)),Object.prototype.hasOwnProperty.call(r,"mtime")&&(r.mtime={secs:r.mtime,nsecs:r.mtimeNsecs??0},delete r.mtimeNsecs),r}function mre(e){return async function*(t,n={}){if(t==null)throw new Error("ipfs.files.ls requires a path");const o=await e.post("files/ls",{signal:n.signal,searchParams:R({arg:Z.asCID(t)!=null?`/ipfs/${t}`:t,long:!0,...n,stream:!0}),headers:n.headers});for await(const i of o.ndjson())if("Entries"in i)for(const a of i.Entries??[])yield j0(o_(a));else yield j0(o_(i))}}function j0(e){return e.hash!=null&&(e.cid=Z.parse(e.hash)),delete e.hash,e.type=e.type===1?"directory":"file",e}function gre(e){return async function(t,n={}){await(await e.post("files/mkdir",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers})).text()}}function wre(e){return async function(t,n,o={}){Array.isArray(t)||(t=[t]),await(await e.post("files/mv",{signal:o.signal,searchParams:R({arg:t.concat(n),...o}),headers:o.headers})).text()}}function Ore(e){if(Sre(e))return async function*(){const r=e.getReader();try{for(;;){const{done:t,value:n}=await r.read();if(t)return;yield n}}finally{r.releaseLock()}}();if(Ere(e))return e;throw new Error("unknown stream")}function Ere(e){return e[Symbol.asyncIterator]!=null}function Sre(e){return typeof(e==null?void 0:e.getReader)=="function"}function Pre(e){return async function*(t,n={}){const o=await e.post("files/read",{signal:n.signal,searchParams:R({arg:t,count:n.length,...n}),headers:n.headers});if(o.body==null)throw new Error("Invalid response body");yield*Ore(o.body)}}function Tre(e){return async function(t,n={}){const o=await e.post("files/rm",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers}),i=await o.text();if(i!==""){const a=new vte(o);throw a.message=i,a}}}function OP(e){return async function(t,n={}){const i=await(await e.post("files/stat",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers})).json();return i.WithLocality=i.WithLocality??!1,Cre(o_(i))}}function Cre(e){return e.cid=Z.parse(e.hash),delete e.hash,e}function Are(e){return async function(t,n,o={}){const i=new AbortController,a=Tr([i.signal,o.signal]);try{await(await e.post("files/write",{signal:a,searchParams:R({arg:t,streamChannels:!0,count:o.length,...o}),...await ln([{content:n,path:"arg",mode:Zy(o.mode),mtime:Bd(o.mtime)}],i,o.headers)})).text()}finally{a.clear()}}}function Ire(e){return{cp:yre(e),flush:bre(e),ls:mre(e),mkdir:gre(e),mv:wre(e),read:Pre(e),rm:Tre(e),stat:OP(e),write:Are(e)}}function Rre(e){return function(){const t=new URL(e.opts.base??"");return{host:t.hostname,port:t.port,protocol:t.protocol,pathname:t.pathname,"api-path":t.pathname}}}function $re(e){return async function*(t,n={}){const o={arg:`${t instanceof Uint8Array?Z.decode(t):t}`,...n};yield*(await e.post("get",{signal:n.signal,searchParams:R(o),headers:n.headers})).iterator()}}function EP(e){return async function(t={}){const o=await(await e.post("id",{signal:t.signal,searchParams:R({arg:t.peerId!=null?t.peerId.toString():void 0,...t}),headers:t.headers})).json(),i={...qe(o)};return i.id=ft(i.id),i.addresses!=null&&(i.addresses=i.addresses.map(a=>ct(a))),i}}function jre(e){const r=EP(e);return async function(n={}){var o;try{const i=await r(n);return!!((o=i==null?void 0:i.addresses)!=null&&o.length)}catch{return!1}}}const Nre={type:"ed25519"};function kre(e){return async function(t,n=Nre){const i=await(await e.post("key/gen",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers})).json();return qe(i)}}function Mre(e){return async function(t,n,o,i={}){const s=await(await e.post("key/import",{signal:i.signal,searchParams:R({arg:t,pem:n,password:o,...i}),headers:i.headers})).json();return qe(s)}}function Dre(e){return async function(t={}){return((await(await e.post("key/list",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()).Keys??[]).map(i=>qe(i))}}function Lre(e){return async function(t,n,o={}){const i=await e.post("key/rename",{signal:o.signal,searchParams:R({arg:[t,n],...o}),headers:o.headers});return qe(await i.json())}}function Ure(e){return async function(t,n={}){const i=await(await e.post("key/rm",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers})).json();return qe(i.Keys[0])}}function Fre(e){return{gen:kre(e),import:Mre(e),list:Dre(e),rename:Lre(e),rm:Ure(e)}}var Bre=e=>{if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const r=Object.getPrototypeOf(e);return r===null||r===Object.prototype};const Sl=Bre,{hasOwnProperty:SP}=Object.prototype,{propertyIsEnumerable:xre}=Object,Zo=(e,r,t)=>Object.defineProperty(e,r,{value:t,writable:!0,enumerable:!0,configurable:!0}),Vre=f,N0={concatArrays:!1,ignoreUndefined:!1},xd=e=>{const r=[];for(const t in e)SP.call(e,t)&&r.push(t);if(Object.getOwnPropertySymbols){const t=Object.getOwnPropertySymbols(e);for(const n of t)xre.call(e,n)&&r.push(n)}return r};function Ui(e){return Array.isArray(e)?Wre(e):Sl(e)?zre(e):e}function Wre(e){const r=e.slice(0,0);return xd(e).forEach(t=>{Zo(r,t,Ui(e[t]))}),r}function zre(e){const r=Object.getPrototypeOf(e)===null?Object.create(null):{};return xd(e).forEach(t=>{Zo(r,t,Ui(e[t]))}),r}const PP=(e,r,t,n)=>(t.forEach(o=>{typeof r[o]>"u"&&n.ignoreUndefined||(o in e&&e[o]!==Object.getPrototypeOf(e)?Zo(e,o,i_(e[o],r[o],n)):Zo(e,o,Ui(r[o])))}),e),Hre=(e,r,t)=>{let n=e.slice(0,0),o=0;return[e,r].forEach(i=>{const a=[];for(let s=0;s<i.length;s++)SP.call(i,s)&&(a.push(String(s)),i===e?Zo(n,o++,i[s]):Zo(n,o++,Ui(i[s])));n=PP(n,i,xd(i).filter(s=>!a.includes(s)),t)}),n};function i_(e,r,t){return t.concatArrays&&Array.isArray(e)&&Array.isArray(r)?Hre(e,r,t):!Sl(r)||!Sl(e)?Ui(r):PP(e,r,xd(r),t)}var qre=function(...e){const r=i_(Ui(N0),this!==Vre&&this||{},N0);let t={_:{}};for(const n of e)if(n!==void 0){if(!Sl(n))throw new TypeError("`"+n+"` is not an Option Object");t=i_(t,{_:n},r)}return t._};const TP=u_(qre),ue=Object.create(null),CP=6e4,AP=CP*60,Qy=AP*24,IP=Qy*365.25;ue.year=ue.yr=ue.y=IP;ue.month=ue.mo=ue.mth=IP/12;ue.week=ue.wk=ue.w=Qy*7;ue.day=ue.d=Qy;ue.hour=ue.hr=ue.h=AP;ue.minute=ue.min=ue.m=CP;ue.second=ue.sec=ue.s=1e3;ue.millisecond=ue.millisec=ue.ms=1;ue.microsecond=ue.microsec=ue.us=ue.s=.001;ue.nanosecond=ue.nanosec=ue.ns=1e-6;ue.group=",";ue.decimal=".";ue.placeholder=" _";const Gre=/((?:\d{1,16}(?:\.\d{1,16})?|\.\d{1,16})(?:[eE][-+]?\d{1,4})?)\s?([\p{L}]{0,14})/gu;Yt.unit=ue;function Yt(e="",r="ms"){let t=null,n;return String(e).replace(new RegExp(`(\\d)[${Yt.unit.placeholder}${Yt.unit.group}](\\d)`,"g"),"$1$2").replace(Yt.unit.decimal,".").replace(Gre,(o,i,a)=>{if(a)a=a.toLowerCase();else if(n){for(const s in Yt.unit)if(Yt.unit[s]<n){a=s;break}}else a=r;n=a=Yt.unit[a]||Yt.unit[a.replace(/s$/,"")],a&&(t=(t||0)+i*a)}),t&&t/(Yt.unit[r]||1)*(e[0]==="-"?-1:1)}const Kre=()=>{},Yre=typeof navigator<"u"&&navigator.product==="ReactNative";function Zre(){return Yre?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const ga=self.URL,RP=Zre();let Qre=class{constructor(r="",t=RP){this.super=new ga(r,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(r){this.super.hash=r}set host(r){this.super.host=r}set hostname(r){this.super.hostname=r}set href(r){this.super.href=r}set password(r){this.super.password=r}set pathname(r){this.super.pathname=r}set port(r){this.super.port=r}set protocol(r){this.super.protocol=r}set search(r){this.super.search=r}set username(r){this.super.username=r}static createObjectURL(r){return ga.createObjectURL(r)}static revokeObjectURL(r){ga.revokeObjectURL(r)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function Xre(e){if(typeof e=="string")return new ga(e).toString();if(!(e instanceof ga)){const r=e.username&&e.password?`${e.username}:${e.password}@`:"",t=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",o=e.protocol?e.protocol+"//":"",i=e.host||"",a=e.hostname||"",s=e.search||(e.query?"?"+e.query:""),c=e.hash||"",u=e.pathname||"",l=e.path||u+s;return`${o}${r||t}${i||a+n}${l}${c}`}}var $P={URLWithLegacySupport:Qre,URLSearchParams:self.URLSearchParams,defaultBase:RP,format:Xre};const{URLWithLegacySupport:k0,format:Jre}=$P;var ene=(e,r={},t={},n)=>{let o=r.protocol?r.protocol.replace(":",""):"http";o=(t[o]||n||o)+":";let i;try{i=new k0(e)}catch{i={}}const a=Object.assign({},r,{protocol:o||i.protocol,host:r.host||i.host});return new k0(e,Jre(a)).toString()};const{URLWithLegacySupport:tne,format:rne,URLSearchParams:nne,defaultBase:one}=$P,ine=ene;var Ic={URL:tne,URLSearchParams:nne,format:rne,relative:ine,defaultBase:one};class jP extends Error{constructor(r="Request timed out"){super(r),this.name="TimeoutError"}}class ane extends Error{constructor(r="The operation was aborted."){super(r),this.name="AbortError"}}class M0 extends Error{constructor(t){super(t.statusText);g(this,"response");this.name="HTTPError",this.response=t}}const une=globalThis.fetch,Xy=globalThis.Headers,sne=globalThis.Request,NP=globalThis.Response,cne=async(e,r={})=>{const t=new XMLHttpRequest;t.open(r.method??"GET",e.toString(),!0);const{timeout:n,headers:o}=r,i=Number(n);if(!isNaN(i)&&i>0&&i<1/0&&(t.timeout=i),r.overrideMimeType!=null&&t.overrideMimeType(r.overrideMimeType),o!=null)for(const[a,s]of new Xy(o))t.setRequestHeader(a,s);return r.signal!=null&&(r.signal.onabort=()=>{t.abort()}),r.onUploadProgress!=null&&(t.upload.onprogress=r.onUploadProgress),t.responseType="arraybuffer",new Promise((a,s)=>{const c=u=>{switch(u.type){case"error":{a(NP.error());break}case"load":{a(new hne(t.responseURL,t.response,{status:t.status,statusText:t.statusText,headers:dne(t.getAllResponseHeaders())}));break}case"timeout":{s(new jP);break}case"abort":{s(new ane);break}}};t.onerror=c,t.onload=c,t.ontimeout=c,t.onabort=c,t.send(r.body)})},lne=une,fne=(e,r={})=>r.onUploadProgress!=null?cne(e,r):lne(e,r),dne=e=>{const r=new Xy;for(const t of e.trim().split(/[\r\n]+/)){const n=t.indexOf(": ");n>0&&r.set(t.slice(0,n),t.slice(n+1))}return r};class hne extends NP{constructor(r,t,n){super(t,n),Object.defineProperty(this,"url",{value:r})}}const D0=TP.bind({ignoreUndefined:!0}),Rc=kd("kubo-rpc-client:fetch"),pne={throwHttpErrors:!0,credentials:"same-origin"},st=class st{constructor(r={}){g(this,"opts");this.opts=D0({},pne,r)}async fetch(r,t={}){const n=D0({},this.opts,t),o=new Xy(n.headers);if(typeof r!="string"&&!(r instanceof Ic.URL||r instanceof sne))throw new TypeError("`resource` must be a string, URL, or Request");const i=new Ic.URL(r.toString(),n.base),{searchParams:a,transformSearchParams:s,json:c}=n;a!=null&&(typeof s=="function"?i.search=s(new Ic.URLSearchParams(n.searchParams)):i.search=new Ic.URLSearchParams(n.searchParams).toString()),c!=null&&(n.body=JSON.stringify(n.json),o.set("content-type","application/json"));const u=[n.signal];n.timeout!=null&&isNaN(n.timeout)&&n.timeout>0&&u.push(AbortSignal.timeout(n.timeout));const l=Tr(u);try{globalThis.ReadableStream!=null&&n.body instanceof globalThis.ReadableStream&&(Ud||Fd)&&(n.body=new Blob(await uP(Dd(n.body)))),Rc.trace("outgoing headers",n.headers),Rc.trace("%s %s",n.method,i);const d=await fne(i.toString(),{...n,signal:n.signal,timeout:void 0,headers:o,duplex:"half"});if(Rc("%s %s %d",n.method,i,d.status),Rc.trace("incoming headers",d.headers),!d.ok&&n.throwHttpErrors===!0)throw n.handleError!=null&&await n.handleError(d),new M0(d);return d.iterator=async function*(){yield*_ne(d.body)},d.ndjson=async function*(){for await(const h of vne(d.iterator()))t.transform!=null?yield t.transform(h):yield h},d}finally{l.clear()}}async post(r,t={}){return this.fetch(r,{...t,method:"POST"})}async get(r,t={}){return this.fetch(r,{...t,method:"GET"})}async put(r,t={}){return this.fetch(r,{...t,method:"PUT"})}async delete(r,t={}){return this.fetch(r,{...t,method:"DELETE"})}async options(r,t={}){return this.fetch(r,{...t,method:"OPTIONS"})}};g(st,"HTTPError",M0),g(st,"TimeoutError",jP),g(st,"post",async(r,t)=>new st(t).post(r,t)),g(st,"get",async(r,t)=>new st(t).get(r,t)),g(st,"put",async(r,t)=>new st(t).put(r,t)),g(st,"delete",async(r,t)=>new st(t).delete(r,t)),g(st,"options",async(r,t)=>new st(t).options(r,t));let $n=st;const vne=async function*(e){const r=new TextDecoder;let t="";for await(const n of e){t+=r.decode(n,{stream:!0});const o=t.split(/\r?\n/);for(let i=0;i<o.length-1;i++){const a=o[i].trim();a.length>0&&(yield JSON.parse(a))}t=o[o.length-1]}t+=r.decode(),t=t.trim(),t.length!==0&&(yield JSON.parse(t))},_ne=e=>{if(yne(e))return e;if(mne(e)){const r=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:r.next.bind(r),return(t){return e.destroy(),typeof r.return=="function"?r.return():Promise.resolve({done:!0,value:t})}}}}}if(bne(e)){const r=e.getReader();return async function*(){try{for(;;){const{done:t,value:n}=await r.read();if(t)return;n!=null&&(yield n)}}finally{r.releaseLock()}}()}throw new TypeError("Body can't be converted to AsyncIterable")},yne=e=>e!==null&&typeof e[Symbol.asyncIterator]=="function",bne=e=>e!=null&&typeof e.getReader=="function",mne=e=>Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable");function L0(e){try{e=uJ(ct(e))}catch{}return e=e.toString(),e}const U0=kd("js-kubo-rpc-client:lib:error-handler"),gne=TP.bind({ignoreUndefined:!0}),wne=Ud||Fd?location.protocol:"http",One=Ud||Fd?location.hostname:"localhost",Ene=Ud||Fd?location.port:"5001",Sne=(e={})=>{let r,t={},n;if(typeof e=="string"||bl(e))r=new URL(L0(e));else if(e instanceof URL)r=e;else if(typeof e.url=="string"||bl(e.url))r=new URL(L0(e.url)),t=e;else if(e.url instanceof URL)r=e.url,t=e;else{t=e??{};const o=(t.protocol??wne).replace(":",""),i=(t.host??One).split(":")[0],a=t.port??Ene;r=new URL(`${o}://${i}:${a}`)}if(t.apiPath!=null?r.pathname=t.apiPath:(r.pathname==="/"||r.pathname===void 0)&&(r.pathname="api/v0"),dte){const o=Kre();n=t.agent??new o({keepAlive:!0,maxSockets:6})}return{...t,host:r.host,protocol:r.protocol.replace(":",""),port:Number(r.port),apiPath:r.pathname,url:r,agent:n}},Pne=async e=>{let r;try{if((e.headers.get("Content-Type")??"").startsWith("application/json")){const n=await e.json();U0(n),r=n.Message??n.message}else r=await e.text()}catch(n){U0("Failed to parse error response",n),r=n.message}let t=new $n.HTTPError(e);throw r!=null&&(r.includes("deadline has elapsed")&&(t=new $n.TimeoutError),r.includes("context deadline exceeded")&&(t=new $n.TimeoutError),r.includes("request timed out")&&(t=new $n.TimeoutError),t.message=r),t},Tne=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,F0=e=>e.replace(Tne,function(r){return"-"+r.toLowerCase()}),Cne=e=>typeof e=="string"?Yt(e)??0:e;class Ane extends $n{constructor(r={}){const t=Sne(r);super({timeout:t.timeout!=null?Cne(t.timeout):void 0,headers:t.headers,base:`${t.url}`,handleError:Pne,transformSearchParams:o=>{const i=new URLSearchParams;for(const[a,s]of o)s!=="undefined"&&s!=="null"&&a!=="signal"&&a!=="timeout"&&i.append(F0(a),s),a==="timeout"&&!isNaN(parseInt(s))&&i.append(F0(a),s);return i},agent:t.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;const n=this.fetch;this.fetch=async(o,i={})=>(typeof o=="string"&&!o.startsWith("/")&&(o=`${t.url}/${o}`),n.call(this,o,gne(i,{method:"POST"})))}}const Ine=async e=>Promise.reject(new Error(`No base found for "${e}"`));class Rne{constructor(r){g(this,"_basesByName");g(this,"_basesByPrefix");g(this,"_loadBase");this._basesByName={},this._basesByPrefix={},this._loadBase=r.loadBase??Ine;for(const t of r.bases)this.addBase(t)}addBase(r){if(this._basesByName[r.name]!=null&&this._basesByPrefix[r.prefix]!=null)throw new Error(`Codec already exists for codec "${r.name}"`);this._basesByName[r.name]=r,this._basesByPrefix[r.prefix]=r}removeBase(r){delete this._basesByName[r.name],delete this._basesByPrefix[r.prefix]}async getBase(r){if(this._basesByName[r]!=null)return this._basesByName[r];if(this._basesByPrefix[r]!=null)return this._basesByPrefix[r];const t=await this._loadBase(r);return this._basesByName[t.name]==null&&this._basesByPrefix[t.prefix]==null&&this.addBase(t),t}listBases(){return Object.values(this._basesByName)}}const $ne=async e=>Promise.reject(new Error(`No codec found for "${e}"`));class jne{constructor(r){g(this,"_codecsByName");g(this,"_codecsByCode");g(this,"_loadCodec");this._codecsByName={},this._codecsByCode={},this._loadCodec=r.loadCodec??$ne;for(const t of r.codecs)this.addCodec(t)}addCodec(r){if(this._codecsByName[r.name]!=null||this._codecsByCode[r.code]!=null)throw new Error(`Resolver already exists for codec "${r.name}"`);this._codecsByName[r.name]=r,this._codecsByCode[r.code]=r}removeCodec(r){delete this._codecsByName[r.name],delete this._codecsByCode[r.code]}async getCodec(r){const t=typeof r=="string"?this._codecsByName:this._codecsByCode;if(t[r]!=null)return t[r];const n=await this._loadCodec(r);return t[r]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}}const Nne=async e=>Promise.reject(new Error(`No hasher found for "${e}"`));class kne{constructor(r){g(this,"_hashersByName");g(this,"_hashersByCode");g(this,"_loadHasher");this._hashersByName={},this._hashersByCode={},this._loadHasher=r.loadHasher??Nne;for(const t of r.hashers)this.addHasher(t)}addHasher(r){if(this._hashersByName[r.name]!=null||this._hashersByCode[r.code]!=null)throw new Error(`Resolver already exists for codec "${r.name}"`);this._hashersByName[r.name]=r,this._hashersByCode[r.code]=r}removeHasher(r){delete this._hashersByName[r.name],delete this._hashersByCode[r.code]}async getHasher(r){const t=typeof r=="string"?this._hashersByName:this._hashersByCode;if(t[r]!=null)return t[r];const n=await this._loadHasher(r);return t[r]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}}function Mne(e){return async function(r,t,n={}){const o=await e.post("log/level",{signal:n.signal,searchParams:R({arg:[r,t],...n}),headers:n.headers});return qe(await o.json())}}function Dne(e){return async function(t={}){return(await(await e.post("log/ls",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()).Strings}}function Lne(e){return async function*(t={}){yield*(await e.post("log/tail",{signal:t.signal,searchParams:R(t),headers:t.headers})).ndjson()}}function Une(e){return{level:Mne(e),ls:Dne(e),tail:Lne(e)}}function Fne(e){return async function*(t,n={}){const o=`${t instanceof Uint8Array?Z.decode(t):t}`;async function i(s){let c=s.Hash;if(c.includes("/")===!0){const l=c.startsWith("/ipfs/")===!0?c:`/ipfs/${c}`;c=(await OP(e)(l)).cid}else c=Z.parse(c);return{name:s.Name,path:o+(s.Name!=null?`/${s.Name}`:""),size:s.Size,cid:c,type:Bne(s)}}const a=await e.post("ls",{signal:n.signal,searchParams:R({arg:o,...n}),headers:n.headers});for await(let s of a.ndjson()){if(s=s.Objects,s==null)throw new Error("expected .Objects in results");if(s=s[0],s==null)throw new Error("expected one array in results.Objects");const c=s.Links;if(!Array.isArray(c))throw new Error("expected one array in results.Objects[0].Links");if(c.length===0){yield i(s);return}yield*c.map(i)}}}function Bne(e){switch(e.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}function xne(e){return async function(t={}){const n=await e.post("dns",{signal:t.signal,searchParams:R(t),headers:t.headers});return qe(await n.json())}}function Vne(e){return async function(t,n={}){const o=await e.post("name/publish",{signal:n.signal,searchParams:R({arg:`${t}`,...n}),headers:n.headers});return qe(await o.json())}}function Wne(e){return async function(t,n={}){const o=await e.post("name/pubsub/cancel",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers});return qe(await o.json())}}function zne(e){return async function(t={}){const n=await e.post("name/pubsub/state",{signal:t.signal,searchParams:R(t),headers:t.headers});return qe(await n.json())}}function Hne(e){return async function(t={}){return(await(await e.post("name/pubsub/subs",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()).Strings??[]}}function qne(e){return{cancel:Wne(e),state:zne(e),subs:Hne(e)}}function Gne(e){return async function*(t,n={}){const o=await e.post("name/resolve",{signal:n.signal,searchParams:R({arg:t,stream:!0,...n}),headers:n.headers});for await(const i of o.ndjson())yield i.Path}}function Kne(e){return{publish:Vne(e),resolve:Gne(e),pubsub:qne(e)}}function Yne(e){return async function(t,n,o={}){const i=await e.post("object/patch/add-link",{signal:o.signal,searchParams:R({arg:[`${t}`,n.Name??n.name??"",(n.Hash??n.cid??"").toString()??null],...o}),headers:o.headers}),{Hash:a}=await i.json();return Z.parse(a)}}function Zne(e){return async function(t,n,o={}){const i=await e.post("object/patch/rm-link",{signal:o.signal,searchParams:R({arg:[`${t}`,n.Name??n.name??null],...o}),headers:o.headers}),{Hash:a}=await i.json();return Z.parse(a)}}function Qne(e){return{addLink:Yne(e),rmLink:Zne(e)}}function Xne(e,r){return{patch:Qne(e)}}function Jne(e){return Symbol.iterator in e}function eoe(e){return Symbol.asyncIterator in e}function B0(e){return Z.asCID(e)!=null}async function*kP(e){if(e==null)throw new Lt(`Unexpected input: ${e}`);const r=Z.asCID(e);if(r!=null){yield it({cid:r});return}if(typeof e=="string"){yield it({path:e});return}if(e.cid!=null||e.path!=null)return yield it(e);if(Jne(e)){const t=e[Symbol.iterator](),n=t.next();if(n.done===!0)return t;if(B0(n.value)){yield it({cid:n.value});for(const o of t)yield it({cid:o});return}if(typeof n.value=="string"){yield it({path:n.value});for(const o of t)yield it({path:o});return}if(n.value.cid!=null||n.value.path!=null){yield it(n.value);for(const o of t)yield it(o);return}throw new Lt(`Unexpected input: ${typeof e}`)}if(eoe(e)){const t=e[Symbol.asyncIterator](),n=await t.next();if(n.done===!0)return t;if(B0(n.value)){yield it({cid:n.value});for await(const o of t)yield it({cid:o});return}if(typeof n.value=="string"){yield it({path:n.value});for await(const o of t)yield it({path:o});return}if(n.value.cid!=null||n.value.path!=null){yield it(n.value);for await(const o of t)yield it(o);return}throw new Lt(`Unexpected input: ${typeof e}`)}throw new Lt(`Unexpected input: ${typeof e}`)}function it(e){const r=e.cid??`${e.path}`;if(r==null)throw new Lt("Unexpected input: Please path either a CID or an IPFS path");const t={path:r,recursive:e.recursive!==!1};return e.metadata!=null&&(t.metadata=e.metadata),t}function MP(e){return async function*(t,n={}){for await(const{path:o,recursive:i,metadata:a}of kP(t)){const s=await e.post("pin/add",{signal:n.signal,searchParams:R({...n,arg:o,recursive:i,metadata:a!=null?JSON.stringify(a):void 0,stream:!0}),headers:n.headers});for await(const c of s.ndjson()){if(c.Pins!=null){for(const u of c.Pins)yield Z.parse(u);continue}yield Z.parse(c)}}}}function toe(e){const r=MP(e);return async function(n,o={}){const i=await Ld(r([{path:n.toString(),...o}],o));if(i==null)throw new Error("No response received");return i}}function x0(e,r,t,n){const o={type:e,cid:Z.parse(r)};return t!=null&&(o.metadata=t),n!=null&&(o.name=n),o}function roe(e){return async function*(t={}){let n=[];t.paths!=null&&(n=Array.isArray(t.paths)?t.paths:[t.paths]);const o=await e.post("pin/ls",{signal:t.signal,searchParams:R({...t,arg:n.map(i=>`${i}`),stream:!0}),headers:t.headers});for await(const i of o.ndjson()){if(i.Keys!=null){for(const a of Object.keys(i.Keys))yield x0(i.Keys[a].Type,a,i.Keys[a].Metadata,i.Keys[a].Name);return}yield x0(i.Type,i.Cid,i.Metadata,i.Name)}}}const DP=({Name:e,Status:r,Cid:t})=>({cid:Z.parse(t),name:e,status:r}),LP=e=>{if(typeof e=="string"&&e!=="")return e;throw new TypeError("service name must be passed")},UP=e=>{if(Z.asCID(e)!=null)return e.toString();throw new TypeError(`CID instance expected instead of ${typeof e}`)},Jy=({service:e,cid:r,name:t,status:n,all:o})=>{const i=R({service:LP(e),name:t,force:o===!0?!0:void 0});if(r!=null)for(const a of r)i.append("cid",UP(a));if(n!=null)for(const a of n)i.append("status",a);return i},noe=(e,{service:r,background:t,name:n,origins:o})=>{const i=R({arg:UP(e),service:LP(r),name:n,background:t===!0?!0:void 0});if(o!=null)for(const a of o)i.append("origin",a.toString());return i};function ooe(e){return async function(t,{timeout:n,signal:o,headers:i,...a}){const s=await e.post("pin/remote/add",{timeout:n,signal:o,headers:i,searchParams:noe(t,a)});return DP(await s.json())}}function ioe(e){return async function*({timeout:t,signal:n,headers:o,...i}){const a=await e.post("pin/remote/ls",{timeout:t,signal:n,headers:o,searchParams:Jy(i)});for await(const s of a.ndjson())yield DP(s)}}function aoe(e){return async function({timeout:t,signal:n,headers:o,...i}){await e.post("pin/remote/rm",{timeout:t,signal:n,headers:o,searchParams:Jy({...i,all:!0})})}}function uoe(e){return async function({timeout:t,signal:n,headers:o,...i}){await e.post("pin/remote/rm",{timeout:t,signal:n,headers:o,searchParams:Jy({...i,all:!1})})}}function soe(e){const r=String(e);if(r==="undefined")throw Error("endpoint is required");return r[r.length-1]==="/"?r.slice(0,-1):r}function coe(e){const r={service:e.Service,endpoint:new URL(e.ApiEndpoint)};return e.Stat!=null&&(r.stat=loe(e.Stat)),r}function loe(e){switch(e.Status){case"valid":{const{Pinning:r,Pinned:t,Queued:n,Failed:o}=e.PinCount;return{status:"valid",pinCount:{queued:n,pinning:r,pinned:t,failed:o}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function foe(e){return async function(t,n){const{endpoint:o,key:i,headers:a,timeout:s,signal:c}=n;await e.post("pin/remote/service/add",{timeout:s,signal:c,searchParams:R({arg:[t,soe(o),i]}),headers:a})}}function doe(e){return async function(t={}){const{stat:n,headers:o,timeout:i,signal:a}=t;return(await(await e.post("pin/remote/service/ls",{timeout:i,signal:a,headers:o,searchParams:n===!0?R({stat:n}):void 0})).json()).RemoteServices.map(coe)}}function hoe(e){return async function(t,n={}){await e.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:R({arg:t})})}}function poe(e){return{add:foe(e),ls:doe(e),rm:hoe(e)}}function voe(e){return{add:ooe(e),ls:ioe(e),rm:uoe(e),rmAll:aoe(e),service:poe(e)}}function FP(e){return async function*(t,n={}){for await(const{path:o,recursive:i}of kP(t)){const a=new URLSearchParams(n.searchParams);a.append("arg",`${o}`),i!=null&&a.set("recursive",String(i));const s=await e.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:R({...n,arg:`${o}`,recursive:i})});for await(const c of s.ndjson()){if(c.Pins!=null){yield*c.Pins.map(u=>Z.parse(u));continue}yield Z.parse(c)}}}}function _oe(e){const r=FP(e);return async function(n,o={}){const i=await Ld(r([{path:n.toString(),...o}],o));if(i==null)throw new Error("No response received");return i}}function yoe(e){return async function(t,n,o={}){const i=await e.post("pin/update",{signal:o.signal,searchParams:R({...o,arg:[t.toString(),n.toString()]}),headers:o.headers}),{Pins:a}=await i.json();return a.map(s=>Z.parse(s))}}function boe(e){return{addAll:MP(e),add:toe(e),ls:roe(e),rmAll:FP(e),rm:_oe(e),update:yoe(e),remote:voe(e)}}function moe(e){return async function*(t,n={}){yield*(await e.post("ping",{signal:n.signal,searchParams:R({arg:`${t}`,...n}),headers:n.headers,transform:qe})).ndjson()}}const goe=e=>Array.isArray(e)?e.map(a_):e,a_=e=>Pe(ca(e)),ca=e=>Qs.decode(e),woe=e=>BigInt(`0x${Pe(Qs.decode(e),"base16")}`),eb=e=>Qs.encode(yt(e));function Ooe(e){return async function(t={}){const{Strings:n}=await(await e.post("pubsub/ls",{signal:t.signal,searchParams:R(t),headers:t.headers})).json();return goe(n)??[]}}function Eoe(e){return async function(t,n={}){const o=await e.post("pubsub/peers",{signal:n.signal,searchParams:R({arg:eb(t),...n}),headers:n.headers}),{Strings:i}=await o.json();return i??[]}}function Soe(e){return async function(t,n,o={}){const i=R({arg:eb(t),...o}),a=new AbortController,s=Tr([a.signal,o.signal]);try{await(await e.post("pubsub/pub",{signal:s,searchParams:i,...await ln([n],a,o.headers)})).text()}finally{s.clear()}}}const Poe=kd("js-kubo-rpc-client:pubsub:subscribe");function Toe(e,r){return async function(n,o,i={}){i.signal=r.subscribe(n,o,i.signal);let a,s;const c=new Promise((l,d)=>{a=l,s=d}),u=setTimeout(()=>{a()},1e3);return e.post("pubsub/sub",{signal:i.signal,searchParams:R({arg:eb(n),...i}),headers:i.headers}).catch(l=>{r.unsubscribe(n,o),s(l)}).then(l=>{clearTimeout(u),l!=null&&(Coe(l,{onMessage:d=>{if(o!=null){if(typeof o=="function"){o(d);return}typeof o.handleEvent=="function"&&o.handleEvent(d)}},onEnd:()=>{r.unsubscribe(n,o)},onError:i.onError}),a())}),c}}async function Coe(e,{onMessage:r,onEnd:t,onError:n}){n=n??Poe;try{for await(const o of e.ndjson())try{if(o.from==null)continue;o.from!=null&&o.seqno!=null?r({type:"signed",from:ft(o.from),data:ca(o.data),sequenceNumber:woe(o.seqno),topic:a_(o.topicIDs[0]),key:o.key!=null?qJ(ca(o.key??"u")):void 0,signature:ca(o.signature??"u")}):r({type:"unsigned",data:ca(o.data),topic:a_(o.topicIDs[0])})}catch(i){i.message=`Failed to parse pubsub message: ${i.message}`,n(i,!1,o)}}catch(o){Aoe(o)||n(o,!0)}finally{t()}}const Aoe=e=>{switch(e.type){case"aborted":return!0;case"abort":return!0;default:return e.name==="AbortError"}};class Ioe{constructor(){g(this,"_subs");this._subs=new Map}subscribe(r,t,n){const o=this._subs.get(r)??[];if(o.find(a=>a.handler===t)!=null)throw new Error(`Already subscribed to ${r} with this handler`);const i=new AbortController;return this._subs.set(r,[{handler:t,controller:i}].concat(o)),n!=null&&n.addEventListener("abort",()=>{this.unsubscribe(r,t)}),i.signal}unsubscribe(r,t){const n=this._subs.get(r)??[];let o;t!=null?(this._subs.set(r,n.filter(i=>i.handler!==t)),o=n.filter(i=>i.handler===t)):(this._subs.set(r,[]),o=n),(this._subs.get(r)??[]).length===0&&this._subs.delete(r),o.forEach(i=>{i.controller.abort()})}}function Roe(e,r){return async function(n,o){r.unsubscribe(n,o)}}function $oe(e){const r=new Ioe;return{ls:Ooe(e),peers:Eoe(e),publish:Soe(e),subscribe:Toe(e,r),unsubscribe:Roe(e,r)}}function joe(e){return async function*(t={}){yield*(await e.post("refs/local",{signal:t.signal,transform:qe,searchParams:R(t),headers:t.headers})).ndjson()}}function Noe(e){async function*r(t,n={}){const o=Array.isArray(t)?t:[t];yield*(await e.post("refs",{signal:n.signal,searchParams:R({arg:o.map(a=>`${a instanceof Uint8Array?Z.decode(a):a}`),...n}),headers:n.headers,transform:qe})).ndjson()}return Object.assign(r,{local:joe(e)})}function koe(e){return async function*(t={}){yield*(await e.post("repo/gc",{signal:t.signal,searchParams:R(t),headers:t.headers,transform:o=>{var i;return{err:o.Error!=null?new Error(o.Error):null,cid:((i=o.Key)==null?void 0:i["/"])!=null?Z.parse(o.Key["/"]):null}}})).ndjson()}}function BP(e){return async function(t={}){const o=await(await e.post("repo/stat",{signal:t.signal,searchParams:R(t),headers:t.headers})).json();return{numObjects:BigInt(o.NumObjects),repoSize:BigInt(o.RepoSize),repoPath:o.RepoPath,version:o.Version,storageMax:BigInt(o.StorageMax)}}}function Moe(e){return async function(t={}){return(await(await e.post("repo/version",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()).Version}}function Doe(e){return{gc:koe(e),stat:BP(e),version:Moe(e)}}function Loe(e){return async function(t,n={}){const o=await e.post("resolve",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers}),{Path:i}=await o.json();return i}}function Uoe(e){return async function*(t,n={}){const o=await e.post("routing/findpeer",{signal:n.signal,searchParams:R({arg:t.toString(),stream:!0,...n}),headers:n.headers});for await(const i of o.ndjson())yield Li(i)}}function Foe(e){return async function*(t,n={}){const o=await e.post("routing/findprovs",{signal:n.signal,searchParams:R({arg:t.toString(),...n}),headers:n.headers});for await(const i of o.ndjson())yield Li(i)}}function Boe(e){return async function*(t,n={}){const o=await e.post("routing/get",{signal:n.signal,searchParams:R({arg:t instanceof Uint8Array?Pe(t):t.toString(),...n}),headers:n.headers});for await(const i of o.ndjson())yield Li(i)}}function xoe(e){return async function*(t,n={recursive:!1}){const o=Array.isArray(t)?t:[t],i=await e.post("routing/provide",{signal:n.signal,searchParams:R({arg:o.map(a=>a.toString()),...n}),headers:n.headers});for await(const a of i.ndjson())yield Li(a)}}function Voe(e){return async function*(t,n,o={}){const i=new AbortController,a=Tr([i.signal,o.signal]);try{const s=await e.post("routing/put",{signal:a,searchParams:R({arg:t instanceof Uint8Array?Pe(t):t.toString(),stream:!0,...o}),...await ln([n],i,o.headers)});for await(const c of s.ndjson())yield Li(c)}finally{a.clear()}}}function Woe(e){return{findPeer:Uoe(e),findProvs:Foe(e),get:Boe(e),provide:xoe(e),put:Voe(e)}}function zoe(e){return async function*(t={}){yield*(await e.post("stats/bw",{signal:t.signal,searchParams:R(t),headers:t.headers,transform:o=>({totalIn:BigInt(o.TotalIn),totalOut:BigInt(o.TotalOut),rateIn:parseFloat(o.RateIn),rateOut:parseFloat(o.RateOut)})})).ndjson()}}function Hoe(e){return{bitswap:gP(e),repo:BP(e),bw:zoe(e)}}function qoe(e){return async function(t={}){await(await e.post("shutdown",{signal:t.signal,searchParams:R(t),headers:t.headers})).text()}}function Goe(e){return async function(t={}){const n=await e.post("swarm/addrs",{signal:t.signal,searchParams:R(t),headers:t.headers}),{Addrs:o}=await n.json();return Object.keys(o).map(i=>({id:ft(i),addrs:(o[i]??[]).map(a=>ct(a))}))}}function Koe(e){return async function(t,n={}){const o=await e.post("swarm/connect",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers}),{Strings:i}=await o.json();return i??[]}}function Yoe(e){return async function(t,n={}){const o=await e.post("swarm/disconnect",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers}),{Strings:i}=await o.json();return i??[]}}function Zoe(e){return async function(t={}){const n=await e.post("swarm/addrs/local",{signal:t.signal,searchParams:R(t),headers:t.headers}),{Strings:o}=await n.json();return(o??[]).map(i=>ct(i))}}function Qoe(e){return async function(t={}){return((await(await e.post("swarm/peers",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()).Peers??[]).map(i=>({addr:ct(i.Addr),peer:ft(i.Peer),muxer:i.Muxer,latency:i.Latency,streams:i.Streams,direction:i.Direction==null?void 0:i.Direction===0?"inbound":"outbound"}))}}function Xoe(e){return{addrs:Goe(e),connect:Koe(e),disconnect:Yoe(e),localAddrs:Zoe(e),peers:Qoe(e)}}function Joe(e){return async function(t={}){const n=await e.post("version",{signal:t.signal,searchParams:R(t),headers:t.headers});return{...qe(await n.json()),"ipfs-http-client":"1.0.0"}}}class eie{constructor(r){g(this,"bases");g(this,"codecs");g(this,"hashers");g(this,"bitswap");g(this,"block");g(this,"bootstrap");g(this,"config");g(this,"dag");g(this,"dht");g(this,"diag");g(this,"files");g(this,"key");g(this,"log");g(this,"name");g(this,"object");g(this,"pin");g(this,"pubsub");g(this,"refs");g(this,"repo");g(this,"routing");g(this,"stats");g(this,"swarm");g(this,"add");g(this,"addAll");g(this,"cat");g(this,"get");g(this,"ls");g(this,"id");g(this,"version");g(this,"stop");g(this,"ping");g(this,"resolve");g(this,"commands");g(this,"mount");g(this,"isOnline");g(this,"getEndpointConfig");var s,c,u,l,d,h;const t=new Ane(r),n={name:Yr.name,code:Yr.code,encode:p=>p,decode:p=>p},o=Object.values(pl);(((s=r.ipld)==null?void 0:s.bases)??[]).forEach(p=>o.push(p)),this.bases=new Rne({bases:o,loadBase:(c=r.ipld)==null?void 0:c.loadBase});const i=Object.values(zZ);[HY,gI,JQ,ute,n].concat(((u=r.ipld)==null?void 0:u.codecs)??[]).forEach(p=>{i.push(p)}),this.codecs=new jne({codecs:i,loadCodec:(l=r.ipld)==null?void 0:l.loadCodec});const a=Object.values(WZ);(((d=r.ipld)==null?void 0:d.hashers)??[]).forEach(p=>a.push(p)),this.hashers=new kne({hashers:a,loadHasher:(h=r.ipld)==null?void 0:h.loadHasher}),this.bitswap=$te(t),this.block=Dte(t),this.bootstrap=Bte(t),this.config=Zte(t),this.dag=rre(t,this.codecs),this.dht=dre(t),this.diag=_re(t),this.files=Ire(t),this.key=Fre(t),this.log=Une(t),this.name=Kne(t),this.object=Xne(t,this.codecs),this.pin=boe(t),this.pubsub=$oe(t),this.refs=Noe(t),this.repo=Doe(t),this.routing=Woe(t),this.stats=Hoe(t),this.swarm=Xoe(t),this.add=Cte(t),this.addAll=mP(t),this.cat=xte(t),this.get=$re(t),this.ls=Fne(t),this.id=EP(t),this.version=Joe(t),this.stop=qoe(t),this.ping=moe(t),this.resolve=Loe(t),this.commands=Vte(t),this.mount=xne(t),this.isOnline=jre(t),this.getEndpointConfig=Rre(t)}}function tie(e){return new eie(e)}function rie(e={}){return(typeof e=="string"||bl(e)||e instanceof URL)&&(e={url:e}),tie(e)}let Kp=null;const Tie=()=>(Kp||(Kp=nv.driver($c.neo4jURL,nv.auth.basic($c.neo4jUser,$c.neo4jPass))),Kp);let Yp=null;const Cie=()=>(Yp||(Yp=rie($c.ipfsAPI.replace(/\/+$/,""))),Yp);export{cw as $,mI as A,DS as B,Z as C,bI as D,Nn as E,bA as F,mr as G,pie as H,Gr as I,mS as J,tQ as K,RS as L,jr as M,AS as N,OS as O,o0 as P,Pe as Q,ZY as R,yt as S,j as T,_t as U,Kr as V,mQ as W,Sa as X,ht as Y,fA as Z,Nc as _,Cie as a,FZ as a0,HY as a1,DZ as a2,YQ as a3,SY as a4,$d as a5,Tr as a6,wie as a7,nX as a8,oX as a9,NX as aA,fX as aB,uJ as aC,yie as aD,ja as aE,kd as aF,Oc as aG,eX as aH,oee as aI,Dd as aJ,ct as aK,ft as aL,eee as aM,uP as aN,bl as aO,Oie as aP,_ie as aQ,vie as aR,uee as aS,pl as aT,FQ as aU,UZ as aV,Ld as aW,bie as aX,Eie as aY,VS as aa,iX as ab,Wy as ac,Vy as ad,Nd as ae,zS as af,jX as ag,qS as ah,$X as ai,Kv as aj,bX as ak,yl as al,wX as am,gX as an,PX as ao,SX as ap,HS as aq,OX as ar,xy as as,uX as at,Gv as au,ba as av,WS as aw,mX as ax,_X as ay,TX as az,_w as b,gI as c,zY as d,vw as e,dw as f,Tie as g,VY as h,WY as i,JQ as j,lS as k,sie as l,sA as m,O as n,Fe as o,_S as p,aA as q,Hc as r,Ry as s,qc as t,ev as u,jd as v,Yr as w,GY as x,Qs as y,MS as z};

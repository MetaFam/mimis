import{c as B,a as ga,g as ya}from"./BosuxZz1.js";import{h as at,a as en,g as ms,v as ps,s as gs,I as ba,b as wa,c as va,d as xa,e as _a,f as Ea,p as Ia,t as Pa,i as Ta}from"./Cx9dQfzI.js";import{aV as jn,aW as tn,aX as nn,aY as ys,aZ as nt,a_ as st,a$ as bs,b0 as Un,b1 as ws,aa as M,a0 as sn,b2 as Ft,Z as Aa,b3 as Mt,aE as Y,b4 as V,a3 as rn,b5 as an,n as v,au as Q,b6 as C,b7 as vs,b8 as j,b9 as ot,ba as ne,bb as on,bc as Sa,bd as ge,be as q,af as cn,bf as Oe,ac as ye,bg as Re,bh as it,bi as un,bj as ct,bk as dn,bl as fn,bm as ln,bn as hn,bo as mn,bp as X,bq as xs,ag as be,br as _s,bs as Es,bt as pn,bu as k,bv as Ca,bw as N,bx as ka,by as se,bz as Be,bA as Ra,bB as qt,bC as Ba,ai as S,aN as H,bD as pe,bE as Fe,bF as Hn,aF as re,bG as Is,bH as Gn,bI as Na,bJ as ut,bK as Me,bL as Ps,bM as La,bN as Oa,w as Ts,bO as As,bP as Fa,bQ as Ne,bR as $t,bS as Ss,a4 as oe,aH as ee,aI as ie,bT as Ce,aM as Cs,bU as ks,aG as Ma,aJ as qa,aL as Rs,bV as $a,bW as Bs,bX as qe,bY as dt,bZ as ft,b_ as Ns,b$ as za,aK as gn,X as yn,c0 as Da,c1 as ja,c2 as Ua,c3 as Ls,c4 as Os,c5 as ae,c6 as Fs,c7 as Ms,c8 as qs,c9 as bn,ca as wn,g as W,cb as $s,cc as ue,cd as zt,ce as _e,ae as de,$ as vn,cf as zs,cg as Ee,ch as Dt,ci as xn,cj as Ds,ck as js,cl as Ha,cm as _n,cn as Us,co as Ga,cp as Va,cq as Hs,cr as Gs,cs as Vs,ct as Wa,cu as Ws,cv as Ka,cw as Ja,cx as Za,cy as En,cz as In,cA as jt,cB as we,cC as Ie,cD as K,cE as Le,cF as Ks,cG as Ya,cH as Js,cI as Ut,cJ as Pn,cK as Zs,cL as Ys,cM as Xs,cN as Se,cO as Xa,cP as Qa,cQ as eo,cR as Qs,cS as er,cT as to,cU as no,cV as so,cW as ro,cX as ao,cY as lt,cZ as oo,c_ as io,c$ as ht,d0 as tr,d1 as mt,d2 as co,d3 as nr,d4 as uo,d5 as sr,d6 as rr,d7 as ar,d8 as or,d9 as Ht,da as ir,db as fo,dc as lo,dd as ho,de as mo,a2 as po,a1 as go,df as yo,dg as bo,dh as wo,a5 as vo,a6 as xo,_ as _o,di as Eo,dj as Io,dk as Po,dl as To,dm as Ao,dn as So,dp as Co,dq as ko,dr as Ro,ds as Bo,dt as No,du as Lo,dv as Oo,dw as Fo,dx as Mo,dy as qo,dz as $o,dA as zo,dB as Do,dC as jo,ah as Uo,dD as Ho,dE as Go,dF as Vo,dG as Wo,dH as Ko,dI as Jo,dJ as Zo,dK as Yo,a7 as Xo,dL as Qo,dM as ei,dN as ti,dO as ni,dP as si,dQ as ri,dR as ai,dS as oi,dT as ii,dU as ci,dV as ui,dW as di,dX as fi,dY as li,dZ as hi,d_ as mi,d$ as pi,e0 as gi,e1 as yi,e2 as bi,e3 as wi,e4 as vi,e5 as xi,e6 as _i,e7 as Ei,e8 as Ii,e9 as Pi,ea as Ti,eb as Ai,ec as Si,ed as Ci,ee as ki,S as Ri,ef as Bi,eg as Ni,eh as Li,ei as Oi,ej as Fi,ek as Mi,el as qi,em as $i,en as zi,eo as Di,ep as ji,eq as Ui,U as Hi,er as Gi,es as Vi,et as Wi,eu as Ki,ev as Ji,ew as Zi,ex as Yi,ey as Xi,ez as Qi,ad as ec,eA as tc,eB as nc,eC as sc,eD as rc,eE as ac,eF as oc,eG as ic,eH as cc,eI as uc,eJ as dc,eK as fc,eL as lc,eM as hc,eN as mc,eO as pc,eP as gc,eQ as yc,eR as bc,eS as wc,eT as Ke,Y as Vn,eU as vc,eV as xc,eW as _c,eX as Ec,eY as Ic,eZ as Pc,e_ as Tc,e$ as Ac,f0 as Sc,f1 as Cc,f2 as kc,f3 as Rc,f4 as Bc,f5 as Nc,f6 as Lc,f7 as Oc,f8 as Fc,f9 as Mc,fa as qc,fb as $c,fc as zc,fd as Dc,fe as jc,ff as Uc,fg as Hc,fh as Gc,fi as Vc,fj as Wc,fk as Kc,fl as Jc,fm as Zc,fn as Yc,fo as Xc,fp as Qc,fq as eu,fr as tu,fs as nu,ft as su,fu as ru,fv as au,fw as ou,fx as iu,fy as cu,fz as uu,fA as du,fB as fu,fC as lu,fD as hu,fE as mu,fF as pu,fG as gu,fH as yu,fI as bu,fJ as wu,fK as vu,fL as xu,fM as _u,fN as Eu,fO as Iu,fP as Pu,fQ as Tu,fR as Au,fS as Su,fT as Cu,fU as ku,fV as Ru,fW as Bu,fX as Nu,fY as Lu,fZ as Ou,f_ as Fu,f$ as Mu,g0 as qu,g1 as $u,g2 as zu,g3 as Du,g4 as ju,g5 as Uu,g6 as Hu,g7 as Gu,g8 as Vu,g9 as Wu,ga as Ku,gb as Ju,gc as Zu,gd as Yu,ge as Xu,gf as Qu,gg as ed,gh as td,gi as nd,gj as sd,gk as rd,gl as ad,gm as od,gn as id,go as cd,gp as ud,gq as dd,gr as fd,gs as ld,gt as hd,gu as md,gv as pd,gw as gd,gx as yd,gy as bd,gz as wd,gA as vd,gB as xd,gC as _d,gD as Wn,gE as Ed,gF as Id,gG as Pd,gH as Td,gI as Ad}from"./WRHwwoH-.js";import{l as cr,c as Kn,d as Sd,e as Cd,a as kd,o as Rd,b as Bd,f as Nd}from"./Bih3Cu9X.js";import{secp256k1 as pt}from"./QpUiwyzR.js";import{_ as Ld}from"./C1FmrZbK.js";import{k as Od,l as Fd,m as Je,c as Jn}from"./DquymGsT.js";function Md(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const a=Object.getOwnPropertyDescriptor(s,r);a&&Object.defineProperty(e,r,a.get?a:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function Gt(e){let t;if(typeof e=="string")t=jn(e);else{const n=tn(e),s=e.length;for(let r=0;r<s;r++){const a=e[r];if(!nn(a)){t=jn(a,n);break}}}if(!t)throw new ys({signature:e});return t}function qd(e){let t;if(typeof e=="string")t=nt(e,{modifiers:st});else{const n=tn(e),s=e.length;for(let r=0;r<s;r++){const a=e[r];if(!nn(a)){t=nt(a,{modifiers:st,structs:n});break}}}if(!t)throw new bs({param:e});return t}function $d(e){const t=[];if(typeof e=="string"){const n=Un(e),s=n.length;for(let r=0;r<s;r++)t.push(nt(n[r],{modifiers:st}))}else{const n=tn(e),s=e.length;for(let r=0;r<s;r++){const a=e[r];if(nn(a))continue;const o=Un(a),i=o.length;for(let c=0;c<i;c++)t.push(nt(o[c],{modifiers:st,structs:n}))}}if(t.length===0)throw new ws({params:e});return t}class ur extends M{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const Zn="/docs/contract/encodeEventTopics";function Pe(e){var c;const{abi:t,eventName:n,args:s}=e;let r=t[0];if(n){const u=sn({abi:t,name:n});if(!u)throw new Ft(n,{docsPath:Zn});r=u}if(r.type!=="event")throw new Ft(void 0,{docsPath:Zn});const a=Aa(r),o=Mt(a);let i=[];if(s&&"inputs"in r){const u=(c=r.inputs)==null?void 0:c.filter(f=>"indexed"in f&&f.indexed),d=Array.isArray(s)?s:Object.values(s).length>0?(u==null?void 0:u.map(f=>s[f.name]))??[]:[];d.length>0&&(i=(u==null?void 0:u.map((f,h)=>Array.isArray(d[h])?d[h].map((l,m)=>Yn({param:f,value:d[h][m]})):typeof d[h]<"u"&&d[h]!==null?Yn({param:f,value:d[h]}):null))??[])}return[o,...i]}function Yn({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return Y(V(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new ur(e.type);return rn([e],[t])}async function Tn(e,t){const{address:n,abi:s,args:r,eventName:a,fromBlock:o,strict:i,toBlock:c}=t,u=an(e,{method:"eth_newFilter"}),d=a?Pe({abi:s,args:r,eventName:a}):void 0,f=await e.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?v(o):o,toBlock:typeof c=="bigint"?v(c):c,topics:d}]});return{abi:s,args:r,eventName:a,id:f,request:u(f),strict:!!i,type:"event"}}async function dr(e,t){const{abi:n,address:s,args:r,functionName:a,dataSuffix:o,...i}=t,c=Q({abi:n,args:r,functionName:a});try{return await C(e,vs,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:s,...i})}catch(u){const d=i.account?j(i.account):void 0;throw ot(u,{abi:n,address:s,args:r,docsPath:"/docs/contract/estimateContractGas",functionName:a,sender:d==null?void 0:d.address})}}async function An(e,{address:t,blockHash:n,fromBlock:s,toBlock:r,event:a,events:o,args:i,strict:c}={}){const u=c??!1,d=o??(a?[a]:void 0);let f=[];d&&(f=[d.flatMap(p=>Pe({abi:[p],eventName:p.name,args:o?void 0:i}))],a&&(f=f[0]));let h;n?h=await e.request({method:"eth_getLogs",params:[{address:t,topics:f,blockHash:n}]}):h=await e.request({method:"eth_getLogs",params:[{address:t,topics:f,fromBlock:typeof s=="bigint"?v(s):s,toBlock:typeof r=="bigint"?v(r):r}]});const l=h.map(m=>ne(m));return d?on({abi:d,args:i,logs:l,strict:u}):l}async function Sn(e,t){const{abi:n,address:s,args:r,blockHash:a,eventName:o,fromBlock:i,toBlock:c,strict:u}=t,d=o?sn({abi:n,name:o}):void 0,f=d?void 0:n.filter(h=>h.type==="event");return C(e,An,"getLogs")({address:s,args:r,blockHash:a,event:d,events:f,fromBlock:i,toBlock:c,strict:u})}function zd(e,t){if(Qn(e)>t)throw new Kd({givenSize:Qn(e),maxSize:t})}const J={zero:48,nine:57,A:65,F:70,a:97,f:102};function Xn(e){if(e>=J.zero&&e<=J.nine)return e-J.zero;if(e>=J.A&&e<=J.F)return e-(J.A-10);if(e>=J.a&&e<=J.f)return e-(J.a-10)}function Dd(e,t={}){const{dir:n,size:s=32}=t;if(s===0)return e;if(e.length>s)throw new Jd({size:e.length,targetSize:s,type:"Bytes"});const r=new Uint8Array(s);for(let a=0;a<s;a++){const o=n==="right";r[o?a:s-a-1]=e[o?a:e.length-a-1]}return r}const jd=new TextEncoder;function Ud(e){return e instanceof Uint8Array?e:typeof e=="string"?Gd(e):Hd(e)}function Hd(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function Gd(e,t={}){const{size:n}=t;let s=e;n&&(Sa(e,n),s=ge(e,n));let r=s.slice(2);r.length%2&&(r=`0${r}`);const a=r.length/2,o=new Uint8Array(a);for(let i=0,c=0;i<a;i++){const u=Xn(r.charCodeAt(c++)),d=Xn(r.charCodeAt(c++));if(u===void 0||d===void 0)throw new q(`Invalid byte sequence ("${r[c-2]}${r[c-1]}" in "${r}").`);o[i]=u*16+d}return o}function Vd(e,t={}){const{size:n}=t,s=jd.encode(e);return typeof n=="number"?(zd(s,n),Wd(s,n)):s}function Wd(e,t){return Dd(e,{dir:"right",size:t})}function Qn(e){return e.length}class Kd extends q{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class Jd extends q{constructor({size:t,targetSize:n,type:s}){super(`${s.charAt(0).toUpperCase()}${s.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}async function fr(e,t){const{abi:n,address:s,args:r,dataSuffix:a,functionName:o,...i}=t,c=i.account?j(i.account):e.account,u=Q({abi:n,args:r,functionName:o});try{const{data:d}=await C(e,cn,"call")({batch:!1,data:`${u}${a?a.replace("0x",""):""}`,to:s,...i,account:c}),f=Oe({abi:n,args:r,functionName:o,data:d||"0x"}),h=n.filter(l=>"name"in l&&l.name===t.functionName);return{result:f,request:{abi:h,address:s,args:r,dataSuffix:a,functionName:o,...i,account:c}}}catch(d){throw ot(d,{abi:n,address:s,args:r,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}function lr(e,t){const{abi:n,address:s,args:r,batch:a=!0,eventName:o,fromBlock:i,onError:c,onLogs:u,poll:d,pollingInterval:f=e.pollingInterval,strict:h}=t;return(typeof d<"u"?d:typeof i=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")))?(()=>{const g=h??!1,y=ye(["watchContractEvent",s,r,a,e.uid,o,f,g,i]);return Re(y,{onLogs:u,onError:c},b=>{let w;i!==void 0&&(w=i-1n);let E,I=!1;const x=it(async()=>{var _;if(!I){try{E=await C(e,Tn,"createContractEventFilter")({abi:n,address:s,args:r,eventName:o,strict:g,fromBlock:i})}catch{}I=!0;return}try{let P;if(E)P=await C(e,un,"getFilterChanges")({filter:E});else{const T=await C(e,ct,"getBlockNumber")({});w&&w<T?P=await C(e,Sn,"getContractEvents")({abi:n,address:s,args:r,eventName:o,fromBlock:w+1n,toBlock:T,strict:g}):P=[],w=T}if(P.length===0)return;if(a)b.onLogs(P);else for(const T of P)b.onLogs([T])}catch(P){E&&P instanceof dn&&(I=!1),(_=b.onError)==null||_.call(b,P)}},{emitOnBegin:!0,interval:f});return async()=>{E&&await C(e,fn,"uninstallFilter")({filter:E}),x()}})})():(()=>{const g=h??!1,y=ye(["watchContractEvent",s,r,a,e.uid,o,f,g]);let b=!0,w=()=>b=!1;return Re(y,{onLogs:u,onError:c},E=>((async()=>{try{const I=(()=>{if(e.transport.type==="fallback"){const P=e.transport.transports.find(T=>T.config.type==="webSocket"||T.config.type==="ipc");return P?P.value:e.transport}return e.transport})(),x=o?Pe({abi:n,eventName:o,args:r}):[],{unsubscribe:_}=await I.subscribe({params:["logs",{address:s,topics:x}],onData(P){var R;if(!b)return;const T=P.result;try{const{eventName:L,args:O}=ln({abi:n,data:T.data,topics:T.topics,strict:h}),z=ne(T,{args:O,eventName:L});E.onLogs([z])}catch(L){let O,z;if(L instanceof hn||L instanceof mn){if(h)return;O=L.abiItem.name,z=(R=L.abiItem.inputs)==null?void 0:R.some(Ve=>!("name"in Ve&&Ve.name))}const Ct=ne(T,{args:z?[]:{},eventName:O});E.onLogs([Ct])}},onError(P){var T;(T=E.onError)==null||T.call(E,P)}});w=_,b||w()}catch(I){c==null||c(I)}})(),()=>w()))})()}function Zd({abi:e,address:t,client:n}){const s=n,[r,a]=s?"public"in s&&"wallet"in s?[s.public,s.wallet]:"public"in s?[s.public,void 0]:"wallet"in s?[void 0,s.wallet]:[s,s]:[void 0,void 0],o=r!=null,i=a!=null,c={};let u=!1,d=!1,f=!1;for(const h of e)if(h.type==="function"?h.stateMutability==="view"||h.stateMutability==="pure"?u=!0:d=!0:h.type==="event"&&(f=!0),u&&d&&f)break;return o&&(u&&(c.read=new Proxy({},{get(h,l){return(...m)=>{const{args:p,options:g}=Ze(m);return C(r,X,"readContract")({abi:e,address:t,functionName:l,args:p,...g})}}})),d&&(c.simulate=new Proxy({},{get(h,l){return(...m)=>{const{args:p,options:g}=Ze(m);return C(r,fr,"simulateContract")({abi:e,address:t,functionName:l,args:p,...g})}}})),f&&(c.createEventFilter=new Proxy({},{get(h,l){return(...m)=>{const p=e.find(b=>b.type==="event"&&b.name===l),{args:g,options:y}=Rt(m,p);return C(r,Tn,"createContractEventFilter")({abi:e,address:t,eventName:l,args:g,...y})}}}),c.getEvents=new Proxy({},{get(h,l){return(...m)=>{const p=e.find(b=>b.type==="event"&&b.name===l),{args:g,options:y}=Rt(m,p);return C(r,Sn,"getContractEvents")({abi:e,address:t,eventName:l,args:g,...y})}}}),c.watchEvent=new Proxy({},{get(h,l){return(...m)=>{const p=e.find(b=>b.type==="event"&&b.name===l),{args:g,options:y}=Rt(m,p);return C(r,lr,"watchContractEvent")({abi:e,address:t,eventName:l,args:g,...y})}}}))),i&&d&&(c.write=new Proxy({},{get(h,l){return(...m)=>{const{args:p,options:g}=Ze(m);return C(a,xs,"writeContract")({abi:e,address:t,functionName:l,args:p,...g})}}})),(o||i)&&d&&(c.estimateGas=new Proxy({},{get(h,l){return(...m)=>{const{args:p,options:g}=Ze(m);return C(r??a,dr,"estimateContractGas")({abi:e,address:t,functionName:l,args:p,...g,account:g.account??a.account})}}})),c.address=t,c.abi=e,c}function Ze(e){const t=e.length&&Array.isArray(e[0]),n=t?e[0]:[],s=(t?e[1]:e[0])??{};return{args:n,options:s}}function Rt(e,t){let n=!1;Array.isArray(e[0])?n=!0:e.length===1?n=t.inputs.some(a=>a.indexed):e.length===2&&(n=!0);const s=n?e[0]:void 0,r=(n?e[1]:e[0])??{};return{args:s,options:r}}const hr="0x5792579257925792579257925792579257925792579257925792579257925792",mr=v(0,{size:32});async function Yd(e,t){const{account:n=e.account,capabilities:s,chain:r=e.chain,experimental_fallback:a,experimental_fallbackDelay:o=32,forceAtomic:i=!1,id:c,version:u="2.0.0"}=t,d=n?j(n):null,f=t.calls.map(h=>{const l=h,m=l.abi?Q({abi:l.abi,functionName:l.functionName,args:l.args}):l.data;return{data:l.dataSuffix&&m?be([m,l.dataSuffix]):m,to:l.to,value:l.value?v(l.value):void 0}});try{const h=await e.request({method:"wallet_sendCalls",params:[{atomicRequired:i,calls:f,capabilities:s,chainId:v(r.id),from:d==null?void 0:d.address,id:c,version:u}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const l=h;if(a&&(l.name==="MethodNotFoundRpcError"||l.name==="MethodNotSupportedRpcError"||l.name==="UnknownRpcError"||l.details.toLowerCase().includes("does not exist / is not available")||l.details.toLowerCase().includes("missing or invalid. request()")||l.details.toLowerCase().includes("did not match any variant of untagged enum")||l.details.toLowerCase().includes("account upgraded to unsupported contract")||l.details.toLowerCase().includes("eip-7702 not supported")||l.details.toLowerCase().includes("unsupported wc_ method"))){if(s&&Object.values(s).some(b=>!b.optional)){const b="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new _s(new M(b,{details:b}))}if(i&&f.length>1){const y="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new Es(new M(y,{details:y}))}const m=[];for(const y of f){const b=pn(e,{account:d,chain:r,data:y.data,to:y.to,value:y.value?k(y.value):void 0});m.push(b),o>0&&await new Promise(w=>setTimeout(w,o))}const p=await Promise.allSettled(m);if(p.every(y=>y.status==="rejected"))throw p[0].reason;const g=p.map(y=>y.status==="fulfilled"?y.value:mr);return{id:be([...g,v(r.id,{size:32}),hr])}}throw Ca(h,{...t,account:d,chain:t.chain})}}async function pr(e,t){async function n(d){if(d.endsWith(hr.slice(2))){const h=se(Be(d,-64,-32)),l=Be(d,0,-64).slice(2).match(/.{1,64}/g),m=await Promise.all(l.map(g=>mr.slice(2)!==g?e.request({method:"eth_getTransactionReceipt",params:[`0x${g}`]},{dedupe:!0}):void 0)),p=m.some(g=>g===null)?100:m.every(g=>(g==null?void 0:g.status)==="0x1")?200:m.every(g=>(g==null?void 0:g.status)==="0x0")?500:600;return{atomic:!1,chainId:N(h),receipts:m.filter(Boolean),status:p,version:"2.0.0"}}return e.request({method:"wallet_getCallsStatus",params:[d]})}const{atomic:s=!1,chainId:r,receipts:a,version:o="2.0.0",...i}=await n(t.id),[c,u]=(()=>{const d=i.status;return d>=100&&d<200?["pending",d]:d>=200&&d<300?["success",d]:d>=300&&d<700?["failure",d]:d==="CONFIRMED"?["success",200]:d==="PENDING"?["pending",100]:[void 0,d]})();return{...i,atomic:s,chainId:r?N(r):void 0,receipts:(a==null?void 0:a.map(d=>({...d,blockNumber:k(d.blockNumber),gasUsed:k(d.gasUsed),status:ka[d.status]})))??[],statusCode:u,status:c,version:o}}async function Xd(e,t){const{id:n,pollingInterval:s=e.pollingInterval,status:r=({statusCode:h})=>h>=200,timeout:a=6e4}=t,o=ye(["waitForCallsStatus",e.uid,n]),{promise:i,resolve:c,reject:u}=Ra();let d;const f=Re(o,{resolve:c,reject:u},h=>{const l=it(async()=>{const m=p=>{clearTimeout(d),l(),p(),f()};try{const p=await pr(e,{id:n});if(!r(p))return;m(()=>h.resolve(p))}catch(p){m(()=>h.reject(p))}},{interval:s,emitOnBegin:!0});return l});return d=a?setTimeout(()=>{f(),clearTimeout(d),u(new gr({id:n}))},a):void 0,await i}class gr extends M{constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function Cn(e,t){var s,r,a,o,i,c;if(!(e instanceof M))return!1;const n=e.walk(u=>u instanceof qt);return n instanceof qt?!!(((s=n.data)==null?void 0:s.errorName)==="ResolverNotFound"||((r=n.data)==null?void 0:r.errorName)==="ResolverWildcardNotSupported"||((a=n.data)==null?void 0:a.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((i=n.data)==null?void 0:i.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||t==="reverse"&&n.reason===Ba[50]):!1}function yr(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;const t=`0x${e.slice(1,65)}`;return S(t)?t:null}function ke(e){let t=new Uint8Array(32).fill(0);if(!e)return H(t);const n=e.split(".");for(let s=n.length-1;s>=0;s-=1){const r=yr(n[s]),a=r?V(r):Y(pe(n[s]),"bytes");t=Y(be([t,a]),"bytes")}return H(t)}function Qd(e){return`[${e.slice(2)}]`}function br(e){const t=new Uint8Array(32).fill(0);return e?yr(e)||Y(pe(e)):H(t)}function gt(e){const t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);const n=new Uint8Array(pe(t).byteLength+2);let s=0;const r=t.split(".");for(let a=0;a<r.length;a++){let o=pe(r[a]);o.byteLength>255&&(o=pe(Qd(br(r[a])))),n[s]=o.length,n.set(o,s+1),s+=o.length+1}return n.byteLength!==s+1?n.slice(0,s+1):n}async function ef(e,t){const{blockNumber:n,blockTag:s,coinType:r,name:a,gatewayUrls:o,strict:i}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Fe({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),d=c==null?void 0:c.ensTlds;if(d&&!d.some(f=>a.endsWith(f)))return null;try{const f=Q({abi:Hn,functionName:"addr",...r!=null?{args:[ke(a),BigInt(r)]}:{args:[ke(a)]}}),h={address:u,abi:Is,functionName:"resolve",args:[re(gt(a)),f,o??[cr]],blockNumber:n,blockTag:s},m=await C(e,X,"readContract")(h);if(m[0]==="0x")return null;const p=Oe({abi:Hn,args:r!=null?[ke(a),BigInt(r)]:void 0,functionName:"addr",data:m[0]});return p==="0x"||se(p)==="0x00"?null:p}catch(f){if(i)throw f;if(Cn(f,"resolve"))return null;throw f}}class tf extends M{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}}class he extends M{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}}class yt extends M{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class wr extends M{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const nf=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,sf=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,rf=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,af=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function of(e){try{const t=await fetch(e,{method:"HEAD"});if(t.status===200){const n=t.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const s=new Image;s.onload=()=>{n(!0)},s.onerror=()=>{n(!1)},s.src=e})}}function es(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function vr({uri:e,gatewayUrls:t}){const n=rf.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const s=es(t==null?void 0:t.ipfs,"https://ipfs.io"),r=es(t==null?void 0:t.arweave,"https://arweave.net"),a=e.match(nf),{protocol:o,subpath:i,target:c,subtarget:u=""}=(a==null?void 0:a.groups)||{},d=o==="ipns:/"||i==="ipns/",f=o==="ipfs:/"||i==="ipfs/"||sf.test(e);if(e.startsWith("http")&&!d&&!f){let l=e;return t!=null&&t.arweave&&(l=e.replace(/https:\/\/arweave.net/g,t==null?void 0:t.arweave)),{uri:l,isOnChain:!1,isEncoded:!1}}if((d||f)&&c)return{uri:`${s}/${d?"ipns":"ipfs"}/${c}${u}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${r}/${c}${u||""}`,isOnChain:!1,isEncoded:!1};let h=e.replace(af,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new yt({uri:e})}function xr(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new tf({data:e});return e.image||e.image_url||e.image_data}async function cf({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then(r=>r.json());return await kn({gatewayUrls:e,uri:xr(n)})}catch{throw new yt({uri:t})}}async function kn({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:s}=vr({uri:t,gatewayUrls:e});if(s||await of(n))return n;throw new yt({uri:t})}function uf(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,s,r]=t.split("/"),[a,o]=n.split(":"),[i,c]=s.split(":");if(!a||a.toLowerCase()!=="eip155")throw new he({reason:"Only EIP-155 supported"});if(!o)throw new he({reason:"Chain ID not found"});if(!c)throw new he({reason:"Contract address not found"});if(!r)throw new he({reason:"Token ID not found"});if(!i)throw new he({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:i.toLowerCase(),contractAddress:c,tokenID:r}}async function df(e,{nft:t}){if(t.namespace==="erc721")return X(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return X(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new wr({namespace:t.namespace})}async function ff(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?lf(e,{gatewayUrls:t,record:n}):kn({uri:n,gatewayUrls:t})}async function lf(e,{gatewayUrls:t,record:n}){const s=uf(n),r=await df(e,{nft:s}),{uri:a,isOnChain:o,isEncoded:i}=vr({uri:r,gatewayUrls:t});if(o&&(a.includes("data:application/json;base64,")||a.startsWith("{"))){const u=i?atob(a.replace("data:application/json;base64,","")):a,d=JSON.parse(u);return kn({uri:xr(d),gatewayUrls:t})}let c=s.tokenID;return s.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),cf({gatewayUrls:t,uri:a.replace(/(?:0x)?{id}/,c)})}async function _r(e,t){const{blockNumber:n,blockTag:s,key:r,name:a,gatewayUrls:o,strict:i}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Fe({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),d=c==null?void 0:c.ensTlds;if(d&&!d.some(f=>a.endsWith(f)))return null;try{const f={address:u,abi:Is,functionName:"resolve",args:[re(gt(a)),Q({abi:Gn,functionName:"text",args:[ke(a),r]}),o??[cr]],blockNumber:n,blockTag:s},l=await C(e,X,"readContract")(f);if(l[0]==="0x")return null;const m=Oe({abi:Gn,functionName:"text",data:l[0]});return m===""?null:m}catch(f){if(i)throw f;if(Cn(f,"resolve"))return null;throw f}}async function hf(e,{blockNumber:t,blockTag:n,assetGatewayUrls:s,name:r,gatewayUrls:a,strict:o,universalResolverAddress:i}){const c=await C(e,_r,"getEnsText")({blockNumber:t,blockTag:n,key:"avatar",name:r,universalResolverAddress:i,gatewayUrls:a,strict:o});if(!c)return null;try{return await ff(e,{record:c,gatewayUrls:s})}catch{return null}}async function mf(e,{address:t,blockNumber:n,blockTag:s,gatewayUrls:r,strict:a,universalResolverAddress:o}){let i=o;if(!i){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");i=Fe({blockNumber:n,chain:e.chain,contract:"ensUniversalResolver"})}const c=`${t.toLowerCase().substring(2)}.addr.reverse`;try{const u={address:i,abi:Na,functionName:"reverse",args:[re(gt(c))],blockNumber:n,blockTag:s},d=C(e,X,"readContract"),[f,h]=r?await d({...u,args:[...u.args,r]}):await d(u);return t.toLowerCase()!==h.toLowerCase()?null:f}catch(u){if(a)throw u;if(Cn(u,"reverse"))return null;throw u}}async function pf(e,t){const{blockNumber:n,blockTag:s,name:r}=t,{chain:a}=e,o=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!a)throw new Error("client chain not configured. universalResolverAddress is required.");return Fe({blockNumber:n,chain:a,contract:"ensUniversalResolver"})})(),i=a==null?void 0:a.ensTlds;if(i&&!i.some(u=>r.endsWith(u)))throw new Error(`${r} is not a valid ENS TLD (${i==null?void 0:i.join(", ")}) for chain "${a.name}" (id: ${a.id}).`);const[c]=await C(e,X,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[re(gt(r))],blockNumber:n,blockTag:s});return c}async function Er(e,t){var g,y,b;const{account:n=e.account,blockNumber:s,blockTag:r="latest",blobs:a,data:o,gas:i,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:f,to:h,value:l,...m}=t,p=n?j(n):void 0;try{ut(t);const E=(typeof s=="bigint"?v(s):void 0)||r,I=(b=(y=(g=e.chain)==null?void 0:g.formatters)==null?void 0:y.transactionRequest)==null?void 0:b.format,_=(I||Me)({...Ps(m,{format:I}),from:p==null?void 0:p.address,blobs:a,data:o,gas:i,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:f,to:h,value:l}),P=await e.request({method:"eth_createAccessList",params:[_,E]});return{accessList:P.accessList,gasUsed:BigInt(P.gasUsed)}}catch(w){throw La(w,{...t,account:p,chain:e.chain})}}async function gf(e){const t=an(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}async function Ir(e,{address:t,args:n,event:s,events:r,fromBlock:a,strict:o,toBlock:i}={}){const c=r??(s?[s]:void 0),u=an(e,{method:"eth_newFilter"});let d=[];c&&(d=[c.flatMap(l=>Pe({abi:[l],eventName:l.name,args:n}))],s&&(d=d[0]));const f=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof a=="bigint"?v(a):a,toBlock:typeof i=="bigint"?v(i):i,...d.length?{topics:d}:{}}]});return{abi:c,args:n,eventName:s?s.name:void 0,fromBlock:a,id:f,request:u(f),strict:!!o,toBlock:i,type:"event"}}async function yf(e){const t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}async function bf(e,{blockHash:t,blockNumber:n,blockTag:s="latest"}={}){const r=n!==void 0?v(n):void 0;let a;return t?a=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):a=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[r||s]},{dedupe:!!r}),N(a)}async function ts(e,{address:t,blockNumber:n,blockTag:s="latest"}){const r=n!==void 0?v(n):void 0,a=await e.request({method:"eth_getCode",params:[t,r||s]},{dedupe:!!r});if(a!=="0x")return a}class wf extends M{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function vf(e,t){const{address:n,factory:s,factoryData:r}=t;try{const[a,o,i,c,u,d,f]=await C(e,X,"readContract")({abi:xf,address:n,functionName:"eip712Domain",factory:s,factoryData:r});return{domain:{name:o,version:i,chainId:Number(c),verifyingContract:u,salt:d},extensions:f,fields:a}}catch(a){const o=a;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new wf({address:n}):o}}const xf=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function _f(e){var t;return{baseFeePerGas:e.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:(t=e.reward)==null?void 0:t.map(n=>n.map(s=>BigInt(s)))}}async function Ef(e,{blockCount:t,blockNumber:n,blockTag:s="latest",rewardPercentiles:r}){const a=typeof n=="bigint"?v(n):void 0,o=await e.request({method:"eth_feeHistory",params:[v(t),a||s,r]},{dedupe:!!a});return _f(o)}async function If(e,{filter:t}){const n=t.strict??!1,r=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(a=>ne(a));return t.abi?on({abi:t.abi,logs:r,strict:n}):r}function Pf({chains:e,id:t}){return e.find(n=>n.id===t)}const Bt=new Map;async function Tf(e){const{getSocket:t,keepAlive:n=!0,key:s="socket",reconnect:r=!0,url:a}=e,{interval:o=3e4}=typeof n=="object"?n:{},{attempts:i=5,delay:c=2e3}=typeof r=="object"?r:{},u=JSON.stringify({keepAlive:n,key:s,url:a,reconnect:r});let d=Bt.get(u);if(d)return d;let f=0;const{schedule:h}=Oa({id:u,fn:async()=>{const p=new Map,g=new Map;let y,b,w;async function E(){const I=await t({onClose(){var x,_;for(const P of p.values())(x=P.onError)==null||x.call(P,new Ne({url:a}));for(const P of g.values())(_=P.onError)==null||_.call(P,new Ne({url:a}));r&&f<i?setTimeout(async()=>{f++,await E().catch(console.error)},c):(p.clear(),g.clear())},onError(x){var _,P;y=x;for(const T of p.values())(_=T.onError)==null||_.call(T,y);for(const T of g.values())(P=T.onError)==null||P.call(T,y);d==null||d.close(),r&&f<i?setTimeout(async()=>{f++,await E().catch(console.error)},c):(p.clear(),g.clear())},onOpen(){y=void 0,f=0},onResponse(x){const _=x.method==="eth_subscription",P=_?x.params.subscription:x.id,T=_?g:p,R=T.get(P);R&&R.onResponse(x),_||T.delete(P)}});if(b=I,n&&(w&&clearInterval(w),w=setInterval(()=>{var x;return(x=b.ping)==null?void 0:x.call(b)},o)),r&&g.size>0){const x=g.entries();for(const[_,{onResponse:P,body:T,onError:R}]of x)T&&(g.delete(_),d==null||d.request({body:T,onResponse:P,onError:R}))}return I}return await E(),y=void 0,d={close(){w&&clearInterval(w),b.close(),Bt.delete(u)},get socket(){return b},request({body:I,onError:x,onResponse:_}){y&&x&&x(y);const P=I.id??Fa.take(),T=R=>{var L;typeof R.id=="number"&&P!==R.id||(I.method==="eth_subscribe"&&typeof R.result=="string"&&g.set(R.result,{onResponse:T,onError:x,body:I}),I.method==="eth_unsubscribe"&&g.delete((L=I.params)==null?void 0:L[0]),_(R))};p.set(P,{onResponse:T,onError:x});try{b.request({body:{jsonrpc:"2.0",id:P,...I}})}catch(R){x==null||x(R)}},requestAsync({body:I,timeout:x=1e4}){return Ts(()=>new Promise((_,P)=>this.request({body:I,onError:P,onResponse:_})),{errorInstance:new As({body:I,url:a}),timeout:x})},requests:p,subscriptions:g,url:a},Bt.set(u,d),[d]}}),[l,[m]]=await h();return m}async function tt(e,t={}){const{keepAlive:n,reconnect:s}=t;return Tf({async getSocket({onClose:r,onError:a,onOpen:o,onResponse:i}){const c=await Ld(()=>import("./CJ5et6AR.js"),[],import.meta.url).then(l=>l.WebSocket),u=new c(e);function d(){u.removeEventListener("close",d),u.removeEventListener("message",f),u.removeEventListener("error",a),u.removeEventListener("open",o),r()}function f({data:l}){try{const m=JSON.parse(l);i(m)}catch(m){a(m)}}u.addEventListener("close",d),u.addEventListener("message",f),u.addEventListener("error",a),u.addEventListener("open",o),u.readyState===c.CONNECTING&&await new Promise((l,m)=>{u&&(u.onopen=l,u.onerror=m)});const{close:h}=u;return Object.assign(u,{close(){h.bind(u)(),d()},ping(){try{if(u.readyState===u.CLOSED||u.readyState===u.CLOSING)throw new $t({url:u.url,cause:new Ne({url:u.url})});const l={jsonrpc:"2.0",method:"net_version",params:[]};u.send(JSON.stringify(l))}catch(l){a(l)}},request({body:l}){if(u.readyState===u.CLOSED||u.readyState===u.CLOSING)throw new $t({body:l,url:u.url,cause:new Ne({url:u.url})});return u.send(JSON.stringify(l))}})},keepAlive:n,reconnect:s,url:e})}async function Af(e){const t=await tt(e);return Object.assign(t.socket,{requests:t.requests,subscriptions:t.subscriptions})}function Sf(e,t){if(e.length!==t.length)throw new Ss({expectedLength:e.length,givenLength:t.length});const n=[];for(let s=0;s<e.length;s++){const r=e[s],a=t[s];n.push(Pr(r,a))}return oe(n)}function Pr(e,t,n=!1){if(e==="address"){const o=t;if(!ee(o))throw new ie({address:o});return Ce(o.toLowerCase(),{size:n?32:null})}if(e==="string")return Cs(t);if(e==="bytes")return t;if(e==="bool")return Ce(ks(t),{size:n?32:1});const s=e.match(Ma);if(s){const[o,i,c="256"]=s,u=Number.parseInt(c)/8;return v(t,{size:n?32:u,signed:i==="int"})}const r=e.match(qa);if(r){const[o,i]=r;if(Number.parseInt(i)!==(t.length-2)/2)throw new Rs({expectedSize:Number.parseInt(i),givenSize:(t.length-2)/2});return Ce(t,{dir:"right",size:n?32:null})}const a=e.match($a);if(a&&Array.isArray(t)){const[o,i]=a,c=[];for(let u=0;u<t.length;u++)c.push(Pr(i,t[u],!0));return c.length===0?"0x":oe(c)}throw new Bs(e)}function Tr(e){const{authorizationList:t}=e;if(t)for(const n of t){const{chainId:s}=n,r=n.address;if(!ee(r))throw new ie({address:r});if(s<0)throw new qe({chainId:s})}$e(e)}function Ar(e){const{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new za;for(const n of t){const s=gn(n),r=N(yn(n,0,1));if(s!==32)throw new Da({hash:n,size:s});if(r!==ja)throw new Ua({hash:n,version:r})}}$e(e)}function $e(e){const{chainId:t,maxPriorityFeePerGas:n,maxFeePerGas:s,to:r}=e;if(t<=0)throw new qe({chainId:t});if(r&&!ee(r))throw new ie({address:r});if(s&&s>dt)throw new ft({maxFeePerGas:s});if(n&&s&&n>s)throw new Ns({maxFeePerGas:s,maxPriorityFeePerGas:n})}function Rn(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:s,maxFeePerGas:r,to:a}=e;if(t<=0)throw new qe({chainId:t});if(a&&!ee(a))throw new ie({address:a});if(n||r)throw new M("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(s&&s>dt)throw new ft({maxFeePerGas:s})}function Bn(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:s,maxFeePerGas:r,to:a}=e;if(a&&!ee(a))throw new ie({address:a});if(typeof t<"u"&&t<=0)throw new qe({chainId:t});if(n||r)throw new M("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(s&&s>dt)throw new ft({maxFeePerGas:s})}function ze(e){if(!e||e.length===0)return[];const t=[];for(let n=0;n<e.length;n++){const{address:s,storageKeys:r}=e[n];for(let a=0;a<r.length;a++)if(r[a].length-2!==64)throw new Ls({storageKey:r[a]});if(!ee(s,{strict:!1}))throw new ie({address:s});t.push([s,r])}return t}function Sr(e,t){const n=Os(e);return n==="eip1559"?Rf(e,t):n==="eip2930"?Bf(e,t):n==="eip4844"?kf(e,t):n==="eip7702"?Cf(e,t):Nf(e,t)}function Cf(e,t){const{authorizationList:n,chainId:s,gas:r,nonce:a,to:o,value:i,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:d,data:f}=e;Tr(e);const h=ze(d),l=Lf(n);return oe(["0x04",ae([v(s),a?v(a):"0x",u?v(u):"0x",c?v(c):"0x",r?v(r):"0x",o??"0x",i?v(i):"0x",f??"0x",h,l,...De(e,t)])])}function kf(e,t){const{chainId:n,gas:s,nonce:r,to:a,value:o,maxFeePerBlobGas:i,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:d,data:f}=e;Ar(e);let h=e.blobVersionedHashes,l=e.sidecars;if(e.blobs&&(typeof h>"u"||typeof l>"u")){const w=typeof e.blobs[0]=="string"?e.blobs:e.blobs.map(x=>H(x)),E=e.kzg,I=Fs({blobs:w,kzg:E});if(typeof h>"u"&&(h=Ms({commitments:I})),typeof l>"u"){const x=qs({blobs:w,commitments:I,kzg:E});l=bn({blobs:w,commitments:I,proofs:x})}}const m=ze(d),p=[v(n),r?v(r):"0x",u?v(u):"0x",c?v(c):"0x",s?v(s):"0x",a??"0x",o?v(o):"0x",f??"0x",m,i?v(i):"0x",h??[],...De(e,t)],g=[],y=[],b=[];if(l)for(let w=0;w<l.length;w++){const{blob:E,commitment:I,proof:x}=l[w];g.push(E),y.push(I),b.push(x)}return oe(["0x03",l?ae([p,g,y,b]):ae(p)])}function Rf(e,t){const{chainId:n,gas:s,nonce:r,to:a,value:o,maxFeePerGas:i,maxPriorityFeePerGas:c,accessList:u,data:d}=e;$e(e);const f=ze(u),h=[v(n),r?v(r):"0x",c?v(c):"0x",i?v(i):"0x",s?v(s):"0x",a??"0x",o?v(o):"0x",d??"0x",f,...De(e,t)];return oe(["0x02",ae(h)])}function Bf(e,t){const{chainId:n,gas:s,data:r,nonce:a,to:o,value:i,accessList:c,gasPrice:u}=e;Rn(e);const d=ze(c),f=[v(n),a?v(a):"0x",u?v(u):"0x",s?v(s):"0x",o??"0x",i?v(i):"0x",r??"0x",d,...De(e,t)];return oe(["0x01",ae(f)])}function Nf(e,t){const{chainId:n=0,gas:s,data:r,nonce:a,to:o,value:i,gasPrice:c}=e;Bn(e);let u=[a?v(a):"0x",c?v(c):"0x",s?v(s):"0x",o??"0x",i?v(i):"0x",r??"0x"];if(t){const d=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+t.v-27n);const l=27n+(t.v===27n?0n:1n);if(t.v!==l)throw new wn({v:t.v});return l})(),f=se(t.r),h=se(t.s);u=[...u,v(d),f==="0x00"?"0x":f,h==="0x00"?"0x":h]}else n>0&&(u=[...u,v(n),"0x","0x"]);return ae(u)}function De(e,t){const n=t??e,{v:s,yParity:r}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof s>"u"&&typeof r>"u")return[];const a=se(n.r),o=se(n.s);return[typeof r=="number"?r?v(1):"0x":s===0n?"0x":s===1n?v(1):s===27n?"0x":v(1),a==="0x00"?"0x":a,o==="0x00"?"0x":o]}function Lf(e){if(!e||e.length===0)return[];const t=[];for(const n of e){const{chainId:s,nonce:r,...a}=n,o=n.address;t.push([s?re(s):"0x",o,r?re(r):"0x",...De({},a)])}return t}function Vt(e){return!e||typeof e!="object"||!("BYTES_PER_ELEMENT"in e)?!1:e.BYTES_PER_ELEMENT===1&&e.constructor.name==="Uint8Array"}function Of(e){return e.opcode==="CREATE2"?kr(e):Cr(e)}function Cr(e){const t=V(W(e.from));let n=V(e.nonce);return n[0]===0&&(n=new Uint8Array([])),W(`0x${Y(ae([t,n],"bytes")).slice(26)}`)}function kr(e){const t=V(W(e.from)),n=Ce(Vt(e.salt)?e.salt:V(e.salt),{size:32}),s="bytecodeHash"in e?Vt(e.bytecodeHash)?e.bytecodeHash:V(e.bytecodeHash):Y(e.bytecode,"bytes");return W(yn(Y(be([V("0xff"),t,n,s])),12))}function Nn(e,t="hex"){const n=(()=>{if(typeof e=="string"){if(e.length>3&&e.length%2!==0)throw new $s(e);return ue(e)}return e})(),s=zt(n,{recursiveReadLimit:Number.POSITIVE_INFINITY});return Rr(s,t)}function Rr(e,t="hex"){if(e.bytes.length===0)return t==="hex"?H(e.bytes):e.bytes;const n=e.readByte();if(n<128&&e.decrementPosition(1),n<192){const r=ns(e,n,128),a=e.readBytes(r);return t==="hex"?H(a):a}const s=ns(e,n,192);return Ff(e,s,t)}function ns(e,t,n){if(n===128&&t<128)return 1;if(t<=n+55)return t-n;if(t===n+55+1)return e.readUint8();if(t===n+55+2)return e.readUint16();if(t===n+55+3)return e.readUint24();if(t===n+55+4)return e.readUint32();throw new M("Invalid RLP prefix")}function Ff(e,t,n){const s=e.position,r=[];for(;e.position-s<t;)r.push(Rr(e,n));return r}function Br(e){return S(e)&&gn(e)===32}const Mf=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),Nr=Uint8Array.from(new Array(16).fill(0).map((e,t)=>t)),qf=Nr.map(e=>(9*e+5)%16),Lr=(()=>{const n=[[Nr],[qf]];for(let s=0;s<4;s++)for(let r of n)r.push(r[s].map(a=>Mf[a]));return n})(),Or=Lr[0],Fr=Lr[1],Mr=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>Uint8Array.from(e)),$f=Or.map((e,t)=>e.map(n=>Mr[t][n])),zf=Fr.map((e,t)=>e.map(n=>Mr[t][n])),Df=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),jf=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function ss(e,t,n,s){return e===0?t^n^s:e===1?t&n|~t&s:e===2?(t|~n)^s:e===3?t&s|n&~s:t^(n|~s)}const Ye=new Uint32Array(16);class Uf extends Fd{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:n,h2:s,h3:r,h4:a}=this;return[t,n,s,r,a]}set(t,n,s,r,a){this.h0=t|0,this.h1=n|0,this.h2=s|0,this.h3=r|0,this.h4=a|0}process(t,n){for(let l=0;l<16;l++,n+=4)Ye[l]=t.getUint32(n,!0);let s=this.h0|0,r=s,a=this.h1|0,o=a,i=this.h2|0,c=i,u=this.h3|0,d=u,f=this.h4|0,h=f;for(let l=0;l<5;l++){const m=4-l,p=Df[l],g=jf[l],y=Or[l],b=Fr[l],w=$f[l],E=zf[l];for(let I=0;I<16;I++){const x=Je(s+ss(l,a,i,u)+Ye[y[I]]+p,w[I])+f|0;s=f,f=u,u=Je(i,10)|0,i=a,a=x}for(let I=0;I<16;I++){const x=Je(r+ss(m,o,c,d)+Ye[b[I]]+g,E[I])+h|0;r=h,h=d,d=Je(c,10)|0,c=o,o=x}}this.set(this.h1+i+d|0,this.h2+u+h|0,this.h3+f+r|0,this.h4+s+o|0,this.h0+a+c|0)}roundClean(){Jn(Ye)}destroy(){this.destroyed=!0,Jn(this.buffer),this.set(0,0,0,0,0)}}const Hf=Od(()=>new Uf),Gf=Hf;function Vf(e,t){const n=t||"hex",s=Gf(S(e,{strict:!1})?V(e):e);return n==="bytes"?s:re(s)}async function qr({message:e,signature:t}){return _e({hash:at(e),signature:t})}async function $r(e){const{domain:t,message:n,primaryType:s,signature:r,types:a}=e;return _e({hash:en({domain:t,message:n,primaryType:s,types:a}),signature:r})}async function Wf({address:e,hash:t,signature:n}){return de(W(e),await _e({hash:t,signature:n}))}async function Kf({address:e,message:t,signature:n}){return de(W(e),await qr({message:t,signature:n}))}async function Jf(e){const{address:t,domain:n,message:s,primaryType:r,signature:a,types:o}=e;return de(W(t),await $r({domain:n,message:s,primaryType:r,signature:a,types:o}))}const zr="0x6492649264926492649264926492649264926492649264926492649264926492",Zf="0x0000000000000000000000000000000000000000000000000000000000000000";function Ln(e){return Be(e,-32)===zr}function Yf(e){if(!Ln(e))return{signature:e};const[t,n,s]=vn([{type:"address"},{type:"bytes"},{type:"bytes"}],e);return{address:t,data:n,signature:s}}function Dr(e){const{address:t,data:n,signature:s,to:r="hex"}=e,a=oe([rn([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,n,s]),zr]);return r==="hex"?a:ue(a)}function jr(e){const t=Be(e,0,1);if(t==="0x04")return"eip7702";if(t==="0x03")return"eip4844";if(t==="0x02")return"eip1559";if(t==="0x01")return"eip2930";if(t!=="0x"&&N(t)>=192)return"legacy";throw new zs({serializedType:t})}function Ur(e){const t=jr(e);return t==="eip1559"?el(e):t==="eip2930"?tl(e):t==="eip4844"?Qf(e):t==="eip7702"?Xf(e):nl(e)}function Xf(e){const t=bt(e),[n,s,r,a,o,i,c,u,d,f,h,l,m]=t;if(t.length!==10&&t.length!==13)throw new Ee({attributes:{chainId:n,nonce:s,maxPriorityFeePerGas:r,maxFeePerGas:a,gas:o,to:i,value:c,data:u,accessList:d,authorizationList:f,...t.length>9?{v:h,r:l,s:m}:{}},serializedTransaction:e,type:"eip7702"});const p={chainId:N(n),type:"eip7702"};return S(i)&&i!=="0x"&&(p.to=i),S(o)&&o!=="0x"&&(p.gas=k(o)),S(u)&&u!=="0x"&&(p.data=u),S(s)&&(p.nonce=s==="0x"?0:N(s)),S(c)&&c!=="0x"&&(p.value=k(c)),S(a)&&a!=="0x"&&(p.maxFeePerGas=k(a)),S(r)&&r!=="0x"&&(p.maxPriorityFeePerGas=k(r)),d.length!==0&&d!=="0x"&&(p.accessList=wt(d)),f.length!==0&&f!=="0x"&&(p.authorizationList=sl(f)),Tr(p),{...t.length===13?je(t):void 0,...p}}function Qf(e){const t=bt(e),n=t.length===4,s=n?t[0]:t,r=n?t.slice(1):[],[a,o,i,c,u,d,f,h,l,m,p,g,y,b]=s,[w,E,I]=r;if(!(s.length===11||s.length===14))throw new Ee({attributes:{chainId:a,nonce:o,maxPriorityFeePerGas:i,maxFeePerGas:c,gas:u,to:d,value:f,data:h,accessList:l,...s.length>9?{v:g,r:y,s:b}:{}},serializedTransaction:e,type:"eip4844"});const x={blobVersionedHashes:p,chainId:N(a),type:"eip4844"};return S(d)&&d!=="0x"&&(x.to=d),S(u)&&u!=="0x"&&(x.gas=k(u)),S(h)&&h!=="0x"&&(x.data=h),S(o)&&(x.nonce=o==="0x"?0:N(o)),S(f)&&f!=="0x"&&(x.value=k(f)),S(m)&&m!=="0x"&&(x.maxFeePerBlobGas=k(m)),S(c)&&c!=="0x"&&(x.maxFeePerGas=k(c)),S(i)&&i!=="0x"&&(x.maxPriorityFeePerGas=k(i)),l.length!==0&&l!=="0x"&&(x.accessList=wt(l)),w&&E&&I&&(x.sidecars=bn({blobs:w,commitments:E,proofs:I})),Ar(x),{...s.length===14?je(s):void 0,...x}}function el(e){const t=bt(e),[n,s,r,a,o,i,c,u,d,f,h,l]=t;if(!(t.length===9||t.length===12))throw new Ee({attributes:{chainId:n,nonce:s,maxPriorityFeePerGas:r,maxFeePerGas:a,gas:o,to:i,value:c,data:u,accessList:d,...t.length>9?{v:f,r:h,s:l}:{}},serializedTransaction:e,type:"eip1559"});const m={chainId:N(n),type:"eip1559"};return S(i)&&i!=="0x"&&(m.to=i),S(o)&&o!=="0x"&&(m.gas=k(o)),S(u)&&u!=="0x"&&(m.data=u),S(s)&&(m.nonce=s==="0x"?0:N(s)),S(c)&&c!=="0x"&&(m.value=k(c)),S(a)&&a!=="0x"&&(m.maxFeePerGas=k(a)),S(r)&&r!=="0x"&&(m.maxPriorityFeePerGas=k(r)),d.length!==0&&d!=="0x"&&(m.accessList=wt(d)),$e(m),{...t.length===12?je(t):void 0,...m}}function tl(e){const t=bt(e),[n,s,r,a,o,i,c,u,d,f,h]=t;if(!(t.length===8||t.length===11))throw new Ee({attributes:{chainId:n,nonce:s,gasPrice:r,gas:a,to:o,value:i,data:c,accessList:u,...t.length>8?{v:d,r:f,s:h}:{}},serializedTransaction:e,type:"eip2930"});const l={chainId:N(n),type:"eip2930"};return S(o)&&o!=="0x"&&(l.to=o),S(a)&&a!=="0x"&&(l.gas=k(a)),S(c)&&c!=="0x"&&(l.data=c),S(s)&&(l.nonce=s==="0x"?0:N(s)),S(i)&&i!=="0x"&&(l.value=k(i)),S(r)&&r!=="0x"&&(l.gasPrice=k(r)),u.length!==0&&u!=="0x"&&(l.accessList=wt(u)),Rn(l),{...t.length===11?je(t):void 0,...l}}function nl(e){const t=Nn(e,"hex"),[n,s,r,a,o,i,c,u,d]=t;if(!(t.length===6||t.length===9))throw new Ee({attributes:{nonce:n,gasPrice:s,gas:r,to:a,value:o,data:i,...t.length>6?{v:c,r:u,s:d}:{}},serializedTransaction:e,type:"legacy"});const f={type:"legacy"};if(S(a)&&a!=="0x"&&(f.to=a),S(r)&&r!=="0x"&&(f.gas=k(r)),S(i)&&i!=="0x"&&(f.data=i),S(n)&&(f.nonce=n==="0x"?0:N(n)),S(o)&&o!=="0x"&&(f.value=k(o)),S(s)&&s!=="0x"&&(f.gasPrice=k(s)),Bn(f),t.length===6)return f;const h=S(c)&&c!=="0x"?k(c):0n;if(d==="0x"&&u==="0x")return h>0&&(f.chainId=Number(h)),f;const l=h,m=Number((l-35n)/2n);if(m>0)f.chainId=m;else if(l!==27n&&l!==28n)throw new wn({v:l});return f.v=l,f.s=d,f.r=u,f.yParity=l%2n===0n?1:0,f}function bt(e){return Nn(`0x${e.slice(4)}`,"hex")}function wt(e){const t=[];for(let n=0;n<e.length;n++){const[s,r]=e[n];if(!ee(s,{strict:!1}))throw new ie({address:s});t.push({address:s,storageKeys:r.map(a=>Br(a)?a:se(a))})}return t}function sl(e){const t=[];for(let n=0;n<e.length;n++){const[s,r,a,o,i,c]=e[n];t.push({address:r,chainId:N(s),nonce:N(a),...je([o,i,c])})}return t}function je(e){const t=e.slice(-3),n=t[0]==="0x"||k(t[0])===0n?27n:28n;return{r:Dt(t[1],{size:32}),s:Dt(t[2],{size:32}),v:n,yParity:n===27n?0:1}}function rl(e,t="wei"){return xn(e,Ds[t])}function al(e,t="wei"){return xn(e,js[t])}function Hr(e){const{source:t}=e,n=new Map,s=new Ha(8192),r=new Map,a=({address:o,chainId:i})=>`${o}.${i}`;return{async consume({address:o,chainId:i,client:c}){const u=a({address:o,chainId:i}),d=this.get({address:o,chainId:i,client:c});this.increment({address:o,chainId:i});const f=await d;return await t.set({address:o,chainId:i},f),s.set(u,f),f},async increment({address:o,chainId:i}){const c=a({address:o,chainId:i}),u=n.get(c)??0;n.set(c,u+1)},async get({address:o,chainId:i,client:c}){const u=a({address:o,chainId:i});let d=r.get(u);return d||(d=(async()=>{try{const h=await t.get({address:o,chainId:i,client:c}),l=s.get(u)??0;return l>0&&h<=l?l+1:(s.delete(u),h)}finally{this.reset({address:o,chainId:i})}})(),r.set(u,d)),(n.get(u)??0)+await d},reset({address:o,chainId:i}){const c=a({address:o,chainId:i});n.delete(c),r.delete(c)}}}function ol(){return{async get(e){const{address:t,client:n}=e;return _n(n,{address:t,blockTag:"pending"})},set(){}}}const il=Hr({source:ol()});function cl(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function ul(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?N(e.nonce):void 0,storageProof:e.storageProof?cl(e.storageProof):void 0}}async function dl(e,{address:t,blockNumber:n,blockTag:s,storageKeys:r}){const a=s??"latest",o=n!==void 0?v(n):void 0,i=await e.request({method:"eth_getProof",params:[t,r,o||a]});return ul(i)}async function fl(e,{address:t,blockNumber:n,blockTag:s="latest",slot:r}){const a=n!==void 0?v(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,r,a||s]})}async function ll(e,{hash:t,transactionReceipt:n}){const[s,r]=await Promise.all([C(e,ct,"getBlockNumber")({}),t?C(e,Us,"getTransaction")({hash:t}):void 0]),a=(n==null?void 0:n.blockNumber)||(r==null?void 0:r.blockNumber);return a?s-a+1n:0n}async function Wt(e,t){const{blockNumber:n,blockTag:s="latest",blocks:r,returnFullTransactions:a,traceTransfers:o,validation:i}=t;try{const c=[];for(const h of r){const l=h.blockOverrides?Ga(h.blockOverrides):void 0,m=h.calls.map(g=>{const y=g,b=y.account?j(y.account):void 0,w=y.abi?Q(y):y.data,E={...y,data:y.dataSuffix?be([w||"0x",y.dataSuffix]):w,from:y.from??(b==null?void 0:b.address)};return ut(E),Me(E)}),p=h.stateOverrides?Va(h.stateOverrides):void 0;c.push({blockOverrides:l,calls:m,stateOverrides:p})}const d=(typeof n=="bigint"?v(n):void 0)||s;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:a,traceTransfers:o,validation:i},d]})).map((h,l)=>({...Hs(h),calls:h.calls.map((m,p)=>{var R,L;const{abi:g,args:y,functionName:b,to:w}=r[l].calls[p],E=((R=m.error)==null?void 0:R.data)??m.returnData,I=BigInt(m.gasUsed),x=(L=m.logs)==null?void 0:L.map(O=>ne(O)),_=m.status==="0x1"?"success":"failure",P=g&&_==="success"&&E!=="0x"?Oe({abi:g,data:E,functionName:b}):null,T=(()=>{var z;if(_==="success")return;let O;if(((z=m.error)==null?void 0:z.data)==="0x"?O=new Gs:m.error&&(O=new Vs(m.error)),!!O)return ot(O,{abi:g??[],address:w??"0x",args:y,functionName:b??"<unknown>"})})();return{data:E,gasUsed:I,logs:x,status:_,..._==="success"?{result:P}:{error:T}}})}))}catch(c){const u=c,d=Wa(u,{});throw d instanceof Ws?u:d}}function Gr(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,s=Ka(Ud(e));return n==="Bytes"?s:Ja(s)}class hl extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const s=this.keys().next().value;s&&this.delete(s)}return this}}const ml={checksum:new hl(8192)},Nt=ml.checksum,pl=/^0x[a-fA-F0-9]{40}$/;function vt(e,t={}){const{strict:n=!0}=t;if(!pl.test(e))throw new rs({address:e,cause:new yl});if(n){if(e.toLowerCase()===e)return;if(gl(e)!==e)throw new rs({address:e,cause:new bl})}}function gl(e){if(Nt.has(e))return Nt.get(e);vt(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=Gr(Vd(t),{as:"Bytes"}),s=t.split("");for(let a=0;a<40;a+=2)n[a>>1]>>4>=8&&s[a]&&(s[a]=s[a].toUpperCase()),(n[a>>1]&15)>=8&&s[a+1]&&(s[a+1]=s[a+1].toUpperCase());const r=`0x${s.join("")}`;return Nt.set(e,r),r}function Kt(e,t={}){const{strict:n=!0}=t??{};try{return vt(e,{strict:n}),!0}catch{return!1}}class rs extends q{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class yl extends q{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class bl extends q{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function Jt(e){let t=!0,n="",s=0,r="",a=!1;for(let o=0;o<e.length;o++){const i=e[o];if(["(",")",","].includes(i)&&(t=!0),i==="("&&s++,i===")"&&s--,!!t){if(s===0){if(i===" "&&["event","function","error",""].includes(r))r="";else if(r+=i,i===")"){a=!0;break}continue}if(i===" "){e[o-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}r+=i,n+=i}}if(!a)throw new q("Unable to normalize signature.");return r}function Zt(e,t){const n=typeof e,s=t.type;switch(s){case"address":return Kt(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return s==="tuple"&&"components"in t?Object.values(t.components).every((r,a)=>Zt(Object.values(e)[a],r)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(s)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(s)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(s)?Array.isArray(e)&&e.every(r=>Zt(r,{...t,type:s.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Vr(e,t,n){for(const s in e){const r=e[s],a=t[s];if(r.type==="tuple"&&a.type==="tuple"&&"components"in r&&"components"in a)return Vr(r.components,a.components,n[s]);const o=[r.type,a.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Kt(n[s],{strict:!1}):o.includes("address")&&o.includes("bytes")?Kt(n[s],{strict:!1}):!1)return o}}function Wr(e,t={}){const{prepare:n=!0}=t,s=Array.isArray(e)||typeof e=="string"?Gt(e):e;return{...s,...n?{hash:me(s)}:{}}}function wl(e,t,n){const{args:s=[],prepare:r=!0}=n??{},a=Za(t,{strict:!1}),o=e.filter(u=>a?u.type==="function"||u.type==="error"?Kr(u)===En(t,0,4):u.type==="event"?me(u)===t:!1:"name"in u&&u.name===t);if(o.length===0)throw new Yt({name:t});if(o.length===1)return{...o[0],...r?{hash:me(o[0])}:{}};let i;for(const u of o){if(!("inputs"in u))continue;if(!s||s.length===0){if(!u.inputs||u.inputs.length===0)return{...u,...r?{hash:me(u)}:{}};continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==s.length)continue;if(s.every((f,h)=>{const l="inputs"in u&&u.inputs[h];return l?Zt(f,l):!1})){if(i&&"inputs"in i&&i.inputs){const f=Vr(u.inputs,i.inputs,s);if(f)throw new xl({abiItem:u,type:f[0]},{abiItem:i,type:f[1]})}i=u}}const c=(()=>{if(i)return i;const[u,...d]=o;return{...u,overloads:d}})();if(!c)throw new Yt({name:t});return{...c,...r?{hash:me(c)}:{}}}function Kr(e){return En(me(e),0,4)}function vl(e){const t=typeof e=="string"?e:jt(e);return Jt(t)}function me(e){return typeof e!="string"&&"hash"in e&&e.hash?e.hash:Gr(In(vl(e)))}class xl extends q{constructor(t,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${t.type}\` in \`${Jt(jt(t.abiItem))}\`, and`,`\`${n.type}\` in \`${Jt(jt(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class Yt extends q{constructor({name:t,data:n,type:s="item"}){const r=t?` with name "${t}"`:n?` with data "${n}"`:"";super(`ABI ${s}${r} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const _l=/^(.*)\[([0-9]*)\]$/,El=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Jr=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Il({checksumAddress:e,parameters:t,values:n}){const s=[];for(let r=0;r<t.length;r++)s.push(On({checksumAddress:e,parameter:t[r],value:n[r]}));return s}function On({checksumAddress:e=!1,parameter:t,value:n}){const s=t,r=Bl(s.type);if(r){const[a,o]=r;return Tl(n,{checksumAddress:e,length:a,parameter:{...s,type:o}})}if(s.type==="tuple")return Rl(n,{checksumAddress:e,parameter:s});if(s.type==="address")return Pl(n,{checksum:e});if(s.type==="bool")return Sl(n);if(s.type.startsWith("uint")||s.type.startsWith("int")){const a=s.type.startsWith("int"),[,,o="256"]=Jr.exec(s.type)??[];return Cl(n,{signed:a,size:Number(o)})}if(s.type.startsWith("bytes"))return Al(n,{type:s.type});if(s.type==="string")return kl(n);throw new Qr(s.type)}function Fn(e){let t=0;for(let a=0;a<e.length;a++){const{dynamic:o,encoded:i}=e[a];o?t+=32:t+=we(i)}const n=[],s=[];let r=0;for(let a=0;a<e.length;a++){const{dynamic:o,encoded:i}=e[a];o?(n.push(Ie(t+r,{size:32})),s.push(i),r+=we(i)):n.push(i)}return K(...n,...s)}function Pl(e,t){const{checksum:n=!1}=t;return vt(e,{strict:n}),{dynamic:!1,encoded:Le(e.toLowerCase())}}function Tl(e,t){const{checksumAddress:n,length:s,parameter:r}=t,a=s===null;if(!Array.isArray(e))throw new Ll(e);if(!a&&e.length!==s)throw new Nl({expectedLength:s,givenLength:e.length,type:`${r.type}[${s}]`});let o=!1;const i=[];for(let c=0;c<e.length;c++){const u=On({checksumAddress:n,parameter:r,value:e[c]});u.dynamic&&(o=!0),i.push(u)}if(a||o){const c=Fn(i);if(a){const u=Ie(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?K(u,c):u}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:K(...i.map(({encoded:c})=>c))}}function Al(e,{type:t}){const[,n]=t.split("bytes"),s=we(e);if(!n){let r=e;return s%32!==0&&(r=ge(r,Math.ceil((e.length-2)/2/32)*32)),{dynamic:!0,encoded:K(Le(Ie(s,{size:32})),r)}}if(s!==Number.parseInt(n))throw new Yr({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:ge(e)}}function Sl(e){if(typeof e!="boolean")throw new q(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Le(Ks(e))}}function Cl(e,{signed:t,size:n}){if(typeof n=="number"){const s=2n**(BigInt(n)-(t?1n:0n))-1n,r=t?-s-1n:0n;if(e>s||e<r)throw new Ya({max:s.toString(),min:r.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:Ie(e,{size:32,signed:t})}}function kl(e){const t=In(e),n=Math.ceil(we(t)/32),s=[];for(let r=0;r<n;r++)s.push(ge(En(t,r*32,(r+1)*32)));return{dynamic:!0,encoded:K(ge(Ie(we(t),{size:32})),...s)}}function Rl(e,t){const{checksumAddress:n,parameter:s}=t;let r=!1;const a=[];for(let o=0;o<s.components.length;o++){const i=s.components[o],c=Array.isArray(e)?o:i.name,u=On({checksumAddress:n,parameter:i,value:e[c]});a.push(u),u.dynamic&&(r=!0)}return{dynamic:r,encoded:r?Fn(a):K(...a.map(({encoded:o})=>o))}}function Bl(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function Zr(e,t,n){const{checksumAddress:s=!1}={};if(e.length!==t.length)throw new Xr({expectedLength:e.length,givenLength:t.length});const r=Il({checksumAddress:s,parameters:e,values:t}),a=Fn(r);return a.length===0?"0x":a}function Xt(e,t){if(e.length!==t.length)throw new Xr({expectedLength:e.length,givenLength:t.length});const n=[];for(let s=0;s<e.length;s++){const r=e[s],a=t[s];n.push(Xt.encode(r,a))}return K(...n)}(function(e){function t(n,s,r=!1){if(n==="address"){const c=s;return vt(c),Le(c.toLowerCase(),r?32:0)}if(n==="string")return In(s);if(n==="bytes")return s;if(n==="bool")return Le(Ks(s),r?32:1);const a=n.match(Jr);if(a){const[c,u,d="256"]=a,f=Number.parseInt(d)/8;return Ie(s,{size:r?32:f,signed:u==="int"})}const o=n.match(El);if(o){const[c,u]=o;if(Number.parseInt(u)!==(s.length-2)/2)throw new Yr({expectedSize:Number.parseInt(u),value:s});return ge(s,r?32:0)}const i=n.match(_l);if(i&&Array.isArray(s)){const[c,u]=i,d=[];for(let f=0;f<s.length;f++)d.push(t(u,s[f],!0));return d.length===0?"0x":K(...d)}throw new Qr(n)}e.encode=t})(Xt||(Xt={}));class Nl extends q{constructor({expectedLength:t,givenLength:n,type:s}){super(`Array length mismatch for type \`${s}\`. Expected: \`${t}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class Yr extends q{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${we(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class Xr extends q{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class Ll extends q{constructor(t){super(`Value \`${t}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class Qr extends q{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function Ol(e,t){var r;const{bytecode:n,args:s}=t;return K(n,(r=e.inputs)!=null&&r.length&&(s!=null&&s.length)?Zr(e.inputs,s):"0x")}function Fl(e){return Wr(e)}function Ml(e,...t){const{overloads:n}=e,s=n?ql([e,...n],e.name,{args:t[0]}):e,r=$l(s),a=t.length>0?Zr(s.inputs,t[0]):void 0;return a?K(r,a):r}function fe(e,t={}){return Wr(e,t)}function ql(e,t,n){const s=wl(e,t,n);if(s.type!=="function")throw new Yt({name:t,type:"function"});return s}function $l(e){return Kr(e)}const ea="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",U="0x0000000000000000000000000000000000000000",zl="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function Dl(e,t){const{blockNumber:n,blockTag:s,calls:r,stateOverrides:a,traceAssetChanges:o,traceTransfers:i,validation:c}=t,u=t.account?j(t.account):void 0;if(o&&!u)throw new M("`account` is required when `traceAssetChanges` is true");const d=u?Ol(Fl("constructor(bytes, bytes)"),{bytecode:Js,args:[zl,Ml(fe("function getBalance(address)"),[u.address])]}):void 0,f=o?await Promise.all(t.calls.map(async A=>{if(!A.data&&!A.abi)return;const{accessList:F}=await Er(e,{account:u.address,...A,data:A.abi?Q(A):A.data});return F.map(({address:Ae,storageKeys:We})=>We.length>0?Ae:null)})).then(A=>A.flat().filter(Boolean)):[],h=await Wt(e,{blockNumber:n,blockTag:s,blocks:[...o?[{calls:[{data:d}],stateOverrides:a},{calls:f.map((A,F)=>({abi:[fe("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:A,from:U,nonce:F})),stateOverrides:[{address:U,nonce:0}]}]:[],{calls:[...r,{}].map(A=>({...A,from:u==null?void 0:u.address})),stateOverrides:a},...o?[{calls:[{data:d}]},{calls:f.map((A,F)=>({abi:[fe("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:A,from:U,nonce:F})),stateOverrides:[{address:U,nonce:0}]},{calls:f.map((A,F)=>({to:A,abi:[fe("function decimals() returns (uint256)")],functionName:"decimals",from:U,nonce:F})),stateOverrides:[{address:U,nonce:0}]},{calls:f.map((A,F)=>({to:A,abi:[fe("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:U,nonce:F})),stateOverrides:[{address:U,nonce:0}]},{calls:f.map((A,F)=>({to:A,abi:[fe("function symbol() returns (string)")],functionName:"symbol",from:U,nonce:F})),stateOverrides:[{address:U,nonce:0}]}]:[]],traceTransfers:i,validation:c}),l=o?h[2]:h[0],[m,p,,g,y,b,w,E]=o?h:[],{calls:I,...x}=l,_=I.slice(0,-1)??[],P=(m==null?void 0:m.calls)??[],T=(p==null?void 0:p.calls)??[],R=[...P,...T].map(A=>A.status==="success"?k(A.data):null),L=(g==null?void 0:g.calls)??[],O=(y==null?void 0:y.calls)??[],z=[...L,...O].map(A=>A.status==="success"?k(A.data):null),Ct=((b==null?void 0:b.calls)??[]).map(A=>A.status==="success"?A.result:null),Ve=((E==null?void 0:E.calls)??[]).map(A=>A.status==="success"?A.result:null),la=((w==null?void 0:w.calls)??[]).map(A=>A.status==="success"?A.result:null),kt=[];for(const[A,F]of z.entries()){const Ae=R[A];if(typeof F!="bigint"||typeof Ae!="bigint")continue;const We=Ct[A-1],ha=Ve[A-1],ma=la[A-1],Dn=A===0?{address:ea,decimals:18,symbol:"ETH"}:{address:f[A-1],decimals:ma||We?Number(We??1):void 0,symbol:ha??void 0};kt.some(pa=>pa.token.address===Dn.address)||kt.push({token:Dn,value:{pre:Ae,post:F,diff:F-Ae}})}return{assetChanges:kt,block:x,results:_}}function Qt({r:e,s:t,to:n="hex",v:s,yParity:r}){const a=(()=>{if(r===0||r===1)return r;if(s&&(s===27n||s===28n||s>=35n))return s%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new pt.Signature(k(e),k(t)).toCompactHex()}${a===0?"1b":"1c"}`;return n==="hex"?o:ue(o)}async function Mn(e,t){var f,h,l;const{address:n,factory:s,factoryData:r,hash:a,signature:o,universalSignatureVerifierAddress:i=(l=(h=(f=e.chain)==null?void 0:f.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:l.address,...c}=t,u=S(o)?o:typeof o=="object"&&"r"in o&&"s"in o?Qt(o):H(o),d=await(async()=>!s&&!r||Ln(u)?u:Dr({address:s,data:r,signature:u}))();try{const m=i?{to:i,data:Q({abi:Ut,functionName:"isValidSig",args:[n,a,d]}),...c}:{data:Pn({abi:Ut,args:[n,a,d],bytecode:Zs}),...c},{data:p}=await C(e,cn,"call")(m);return Ys(p??"0x0")}catch(m){try{if(de(W(n),await _e({hash:a,signature:o})))return!0}catch{}if(m instanceof Xs)return!1;throw m}}async function jl(e,{address:t,message:n,factory:s,factoryData:r,signature:a,...o}){const i=at(n);return Mn(e,{address:t,factory:s,factoryData:r,hash:i,signature:a,...o})}async function Ul(e,t){const{address:n,factory:s,factoryData:r,signature:a,message:o,primaryType:i,types:c,domain:u,...d}=t,f=en({message:o,primaryType:i,types:c,domain:u});return Mn(e,{address:n,factory:s,factoryData:r,hash:f,signature:a,...d})}function Hl(e,{blockTag:t="latest",emitMissed:n=!1,emitOnBegin:s=!1,onBlock:r,onError:a,includeTransactions:o,poll:i,pollingInterval:c=e.pollingInterval}){const u=typeof i<"u"?i:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),d=o??!1;let f;return u?(()=>{const m=ye(["watchBlocks",e.uid,t,n,s,d,c]);return Re(m,{onBlock:r,onError:a},p=>it(async()=>{var g;try{const y=await C(e,Se,"getBlock")({blockTag:t,includeTransactions:d});if(y.number!==null&&(f==null?void 0:f.number)!=null){if(y.number===f.number)return;if(y.number-f.number>1&&n)for(let b=(f==null?void 0:f.number)+1n;b<y.number;b++){const w=await C(e,Se,"getBlock")({blockNumber:b,includeTransactions:d});p.onBlock(w,f),f=w}}((f==null?void 0:f.number)==null||t==="pending"&&(y==null?void 0:y.number)==null||y.number!==null&&y.number>f.number)&&(p.onBlock(y,f),f=y)}catch(y){(g=p.onError)==null||g.call(p,y)}},{emitOnBegin:s,interval:c}))})():(()=>{let m=!0,p=!0,g=()=>m=!1;return(async()=>{try{s&&C(e,Se,"getBlock")({blockTag:t,includeTransactions:d}).then(w=>{m&&p&&(r(w,void 0),p=!1)}).catch(a);const y=(()=>{if(e.transport.type==="fallback"){const w=e.transport.transports.find(E=>E.config.type==="webSocket"||E.config.type==="ipc");return w?w.value:e.transport}return e.transport})(),{unsubscribe:b}=await y.subscribe({params:["newHeads"],async onData(w){var I;if(!m)return;const E=await C(e,Se,"getBlock")({blockNumber:(I=w.result)==null?void 0:I.number,includeTransactions:d}).catch(()=>{});m&&(r(E,f),p=!1,f=E)},onError(w){a==null||a(w)}});g=b,m||g()}catch(y){a==null||a(y)}})(),()=>g()})()}function Gl(e,{address:t,args:n,batch:s=!0,event:r,events:a,fromBlock:o,onError:i,onLogs:c,poll:u,pollingInterval:d=e.pollingInterval,strict:f}){const h=typeof u<"u"?u:typeof o=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),l=f??!1;return h?(()=>{const g=ye(["watchEvent",t,n,s,e.uid,r,d,o]);return Re(g,{onLogs:c,onError:i},y=>{let b;o!==void 0&&(b=o-1n);let w,E=!1;const I=it(async()=>{var x;if(!E){try{w=await C(e,Ir,"createEventFilter")({address:t,args:n,event:r,events:a,strict:l,fromBlock:o})}catch{}E=!0;return}try{let _;if(w)_=await C(e,un,"getFilterChanges")({filter:w});else{const P=await C(e,ct,"getBlockNumber")({});b&&b!==P?_=await C(e,An,"getLogs")({address:t,args:n,event:r,events:a,fromBlock:b+1n,toBlock:P}):_=[],b=P}if(_.length===0)return;if(s)y.onLogs(_);else for(const P of _)y.onLogs([P])}catch(_){w&&_ instanceof dn&&(E=!1),(x=y.onError)==null||x.call(y,_)}},{emitOnBegin:!0,interval:d});return async()=>{w&&await C(e,fn,"uninstallFilter")({filter:w}),I()}})})():(()=>{let g=!0,y=()=>g=!1;return(async()=>{try{const b=(()=>{if(e.transport.type==="fallback"){const x=e.transport.transports.find(_=>_.config.type==="webSocket"||_.config.type==="ipc");return x?x.value:e.transport}return e.transport})(),w=a??(r?[r]:void 0);let E=[];w&&(E=[w.flatMap(_=>Pe({abi:[_],eventName:_.name,args:n}))],r&&(E=E[0]));const{unsubscribe:I}=await b.subscribe({params:["logs",{address:t,topics:E}],onData(x){var P;if(!g)return;const _=x.result;try{const{eventName:T,args:R}=ln({abi:w??[],data:_.data,topics:_.topics,strict:l}),L=ne(_,{args:R,eventName:T});c([L])}catch(T){let R,L;if(T instanceof hn||T instanceof mn){if(f)return;R=T.abiItem.name,L=(P=T.abiItem.inputs)==null?void 0:P.some(z=>!("name"in z&&z.name))}const O=ne(_,{args:L?[]:{},eventName:R});c([O])}},onError(x){i==null||i(x)}});y=I,g||y()}catch(b){i==null||i(b)}})(),()=>y()})()}function Vl(e){var f,h,l;const{scheme:t,statement:n,...s}=((f=e.match(Wl))==null?void 0:f.groups)??{},{chainId:r,expirationTime:a,issuedAt:o,notBefore:i,requestId:c,...u}=((h=e.match(Kl))==null?void 0:h.groups)??{},d=(l=e.split("Resources:")[1])==null?void 0:l.split(`
- `).slice(1);return{...s,...u,...r?{chainId:Number(r)}:{},...a?{expirationTime:new Date(a)}:{},...o?{issuedAt:new Date(o)}:{},...i?{notBefore:new Date(i)}:{},...c?{requestId:c}:{},...d?{resources:d}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}const Wl=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Kl=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function Jl(e){const{address:t,domain:n,message:s,nonce:r,scheme:a,time:o=new Date}=e;if(n&&s.domain!==n||r&&s.nonce!==r||a&&s.scheme!==a||s.expirationTime&&o>=s.expirationTime||s.notBefore&&o<s.notBefore)return!1;try{if(!s.address||!ee(s.address,{strict:!1})||t&&!de(s.address,t))return!1}catch{return!1}return!0}async function Zl(e,t){const{address:n,domain:s,message:r,nonce:a,scheme:o,signature:i,time:c=new Date,...u}=t,d=Vl(r);if(!d.address||!Jl({address:n,domain:s,message:d,nonce:a,scheme:o,time:c}))return!1;const h=at(r);return Mn(e,{address:d.address,hash:h,signature:i,...u})}function ta(e){return{call:t=>cn(e,t),createAccessList:t=>Er(e,t),createBlockFilter:()=>gf(e),createContractEventFilter:t=>Tn(e,t),createEventFilter:t=>Ir(e,t),createPendingTransactionFilter:()=>io(e),estimateContractGas:t=>dr(e,t),estimateGas:t=>vs(e,t),getBalance:t=>oo(e,t),getBlobBaseFee:()=>yf(e),getBlock:t=>Se(e,t),getBlockNumber:t=>ct(e,t),getBlockTransactionCount:t=>bf(e,t),getBytecode:t=>ts(e,t),getChainId:()=>lt(e),getCode:t=>ts(e,t),getContractEvents:t=>Sn(e,t),getEip712Domain:t=>vf(e,t),getEnsAddress:t=>ef(e,t),getEnsAvatar:t=>hf(e,t),getEnsName:t=>mf(e,t),getEnsResolver:t=>pf(e,t),getEnsText:t=>_r(e,t),getFeeHistory:t=>Ef(e,t),estimateFeesPerGas:t=>ao(e,t),getFilterChanges:t=>un(e,t),getFilterLogs:t=>If(e,t),getGasPrice:()=>ro(e),getLogs:t=>An(e,t),getProof:t=>dl(e,t),estimateMaxPriorityFeePerGas:t=>so(e,t),getStorageAt:t=>fl(e,t),getTransaction:t=>Us(e,t),getTransactionConfirmations:t=>ll(e,t),getTransactionCount:t=>_n(e,t),getTransactionReceipt:t=>no(e,t),multicall:t=>to(e,t),prepareTransactionRequest:t=>er(e,t),readContract:t=>X(e,t),sendRawTransaction:t=>Qs(e,t),simulate:t=>Wt(e,t),simulateBlocks:t=>Wt(e,t),simulateCalls:t=>Dl(e,t),simulateContract:t=>fr(e,t),verifyMessage:t=>jl(e,t),verifySiweMessage:t=>Zl(e,t),verifyTypedData:t=>Ul(e,t),uninstallFilter:t=>fn(e,t),waitForTransactionReceipt:t=>eo(e,t),watchBlocks:t=>Hl(e,t),watchBlockNumber:t=>Qa(e,t),watchContractEvent:t=>lr(e,t),watchEvent:t=>Gl(e,t),watchPendingTransactions:t=>Xa(e,t)}}function Yl(e){const{key:t="public",name:n="Public Client"}=e;return ht({...e,key:t,name:n,type:"publicClient"}).extend(ta)}async function Xl(e,{hash:t}){await e.request({method:`${e.mode}_dropTransaction`,params:[t]})}async function Ql(e){return e.request({method:`${e.mode}_dumpState`})}async function eh(e){return e.mode==="ganache"?await e.request({method:"eth_mining"}):await e.request({method:`${e.mode}_getAutomine`})}async function th(e){return await e.request({method:"txpool_content"})}async function nh(e){const{pending:t,queued:n}=await e.request({method:"txpool_status"});return{pending:N(t),queued:N(n)}}async function sh(e,{address:t}){await e.request({method:`${e.mode}_impersonateAccount`,params:[t]})}async function rh(e,{seconds:t}){return await e.request({method:"evm_increaseTime",params:[v(t)]})}async function ah(e){return await e.request({method:"txpool_inspect"})}async function oh(e,{state:t}){await e.request({method:`${e.mode}_loadState`,params:[t]})}async function ih(e,{blocks:t,interval:n}){e.mode==="ganache"?await e.request({method:"evm_mine",params:[{blocks:v(t)}]}):await e.request({method:`${e.mode}_mine`,params:[v(t),v(n||0)]})}async function ch(e){await e.request({method:`${e.mode}_removeBlockTimestampInterval`})}async function uh(e,{blockNumber:t,jsonRpcUrl:n}={}){await e.request({method:`${e.mode}_reset`,params:[{forking:{blockNumber:Number(t),jsonRpcUrl:n}}]})}async function dh(e,{id:t}){await e.request({method:"evm_revert",params:[t]})}async function fh(e,t){var y,b,w;const{accessList:n,data:s,from:r,gas:a,gasPrice:o,maxFeePerGas:i,maxPriorityFeePerGas:c,nonce:u,to:d,value:f,...h}=t,l=(w=(b=(y=e.chain)==null?void 0:y.formatters)==null?void 0:b.transactionRequest)==null?void 0:w.format,p=(l||Me)({...Ps(h,{format:l}),accessList:n,data:s,from:r,gas:a,gasPrice:o,maxFeePerGas:i,maxPriorityFeePerGas:c,nonce:u,to:d,value:f});return await e.request({method:"eth_sendUnsignedTransaction",params:[p]})}async function lh(e,t){e.mode==="ganache"?t?await e.request({method:"miner_start"}):await e.request({method:"miner_stop"}):await e.request({method:"evm_setAutomine",params:[t]})}async function hh(e,{address:t,value:n}){e.mode==="ganache"?await e.request({method:"evm_setAccountBalance",params:[t,v(n)]}):await e.request({method:`${e.mode}_setBalance`,params:[t,v(n)]})}async function mh(e,{gasLimit:t}){await e.request({method:"evm_setBlockGasLimit",params:[v(t)]})}async function ph(e,{interval:t}){const n=e.mode==="hardhat"?t*1e3:t;await e.request({method:`${e.mode}_setBlockTimestampInterval`,params:[n]})}async function gh(e,{address:t,bytecode:n}){e.mode==="ganache"?await e.request({method:"evm_setAccountCode",params:[t,n]}):await e.request({method:`${e.mode}_setCode`,params:[t,n]})}async function yh(e,{address:t}){await e.request({method:`${e.mode}_setCoinbase`,params:[t]})}async function bh(e,{interval:t}){const n=e.mode==="hardhat"?t*1e3:t;await e.request({method:"evm_setIntervalMining",params:[n]})}async function wh(e,t){await e.request({method:`${e.mode}_setLoggingEnabled`,params:[t]})}async function vh(e,{gasPrice:t}){await e.request({method:`${e.mode}_setMinGasPrice`,params:[v(t)]})}async function xh(e,{baseFeePerGas:t}){await e.request({method:`${e.mode}_setNextBlockBaseFeePerGas`,params:[v(t)]})}async function _h(e,{timestamp:t}){await e.request({method:"evm_setNextBlockTimestamp",params:[v(t)]})}async function Eh(e,{address:t,nonce:n}){await e.request({method:`${e.mode}_setNonce`,params:[t,v(n)]})}async function Ih(e,t){await e.request({method:`${e.mode}_setRpcUrl`,params:[t]})}async function Ph(e,{address:t,index:n,value:s}){await e.request({method:`${e.mode}_setStorageAt`,params:[t,typeof n=="number"?v(n):n,s]})}async function Th(e){return await e.request({method:"evm_snapshot"})}async function Ah(e,{address:t}){await e.request({method:`${e.mode}_stopImpersonatingAccount`,params:[t]})}function na({mode:e}){return t=>{const n=t.extend(()=>({mode:e}));return{dropTransaction:s=>Xl(n,s),dumpState:()=>Ql(n),getAutomine:()=>eh(n),getTxpoolContent:()=>th(n),getTxpoolStatus:()=>nh(n),impersonateAccount:s=>sh(n,s),increaseTime:s=>rh(n,s),inspectTxpool:()=>ah(n),loadState:s=>oh(n,s),mine:s=>ih(n,s),removeBlockTimestampInterval:()=>ch(n),reset:s=>uh(n,s),revert:s=>dh(n,s),sendUnsignedTransaction:s=>fh(n,s),setAutomine:s=>lh(n,s),setBalance:s=>hh(n,s),setBlockGasLimit:s=>mh(n,s),setBlockTimestampInterval:s=>ph(n,s),setCode:s=>gh(n,s),setCoinbase:s=>yh(n,s),setIntervalMining:s=>bh(n,s),setLoggingEnabled:s=>wh(n,s),setMinGasPrice:s=>vh(n,s),setNextBlockBaseFeePerGas:s=>xh(n,s),setNextBlockTimestamp:s=>_h(n,s),setNonce:s=>Eh(n,s),setRpcUrl:s=>Ih(n,s),setStorageAt:s=>Ph(n,s),snapshot:()=>Th(n),stopImpersonatingAccount:s=>Ah(n,s)}}}function Sh(e){const{key:t="test",name:n="Test Client",mode:s}=e;return ht({...e,key:t,name:n,type:"testClient"}).extend(a=>({mode:s,...na({mode:s})(a)}))}async function Ch(e,{chain:t}){const{id:n,name:s,nativeCurrency:r,rpcUrls:a,blockExplorers:o}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:v(n),chainName:s,nativeCurrency:r,rpcUrls:a.default.http,blockExplorerUrls:o?Object.values(o).map(({url:i})=>i):void 0}]},{dedupe:!0,retryCount:0})}function kh(e,t){const{abi:n,args:s,bytecode:r,...a}=t,o=Pn({abi:n,args:s,bytecode:r});return pn(e,{...a,...a.authorizationList?{to:null}:{},data:o})}async function Rh(e){var n;return((n=e.account)==null?void 0:n.type)==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(s=>tr(s))}async function Bh(e,t={}){const{account:n=e.account,chainId:s}=t,r=n?j(n):void 0,a=s?[r==null?void 0:r.address,[v(s)]]:[r==null?void 0:r.address],o=await e.request({method:"wallet_getCapabilities",params:a}),i={};for(const[c,u]of Object.entries(o)){i[Number(c)]={};for(let[d,f]of Object.entries(u))d==="addSubAccount"&&(d="unstable_addSubAccount"),i[Number(c)][d]=f}return typeof s=="number"?i[s]:i}async function Nh(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}async function sa(e,t){var c;const{account:n=e.account,chainId:s,nonce:r}=t;if(!n)throw new mt({docsPath:"/docs/eip7702/prepareAuthorization"});const a=j(n),o=(()=>{if(t.executor)return t.executor==="self"?t.executor:j(t.executor)})(),i={address:t.contractAddress??t.address,chainId:s,nonce:r};return typeof i.chainId>"u"&&(i.chainId=((c=e.chain)==null?void 0:c.id)??await C(e,lt,"getChainId")({})),typeof i.nonce>"u"&&(i.nonce=await C(e,_n,"getTransactionCount")({address:a.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&de(o.address,a.address))&&(i.nonce+=1)),i}async function Lh(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>W(n))}async function Oh(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}async function Fh(e,t){const{id:n}=t;await e.request({method:"wallet_showCallsStatus",params:[n]})}async function Mh(e,t){const{account:n=e.account}=t;if(!n)throw new mt({docsPath:"/docs/eip7702/signAuthorization"});const s=j(n);if(!s.signAuthorization)throw new co({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:s.type});const r=await sa(e,t);return s.signAuthorization(r)}async function qh(e,t){var u,d,f,h;const{account:n=e.account,chain:s=e.chain,...r}=t;if(!n)throw new mt({docsPath:"/docs/actions/wallet/signTransaction"});const a=j(n);ut({account:a,...t});const o=await C(e,lt,"getChainId")({});s!==null&&nr({currentChainId:o,chain:s});const i=(s==null?void 0:s.formatters)||((u=e.chain)==null?void 0:u.formatters),c=((d=i==null?void 0:i.transactionRequest)==null?void 0:d.format)||Me;return a.signTransaction?a.signTransaction({...r,chainId:o},{serializer:(h=(f=e.chain)==null?void 0:f.serializers)==null?void 0:h.transaction}):await e.request({method:"eth_signTransaction",params:[{...c(r),chainId:v(o),from:a.address}]},{retryCount:0})}async function $h(e,t){const{account:n=e.account,domain:s,message:r,primaryType:a}=t;if(!n)throw new mt({docsPath:"/docs/actions/wallet/signTypedData"});const o=j(n),i={EIP712Domain:ms({domain:s}),...t.types};if(ps({domain:s,message:r,primaryType:a,types:i}),o.signTypedData)return o.signTypedData({domain:s,message:r,primaryType:a,types:i});const c=gs({domain:s,message:r,primaryType:a,types:i});return e.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function zh(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:v(t)}]},{retryCount:0})}async function Dh(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}function ra(e){return{addChain:t=>Ch(e,t),deployContract:t=>kh(e,t),getAddresses:()=>Rh(e),getCallsStatus:t=>pr(e,t),getCapabilities:t=>Bh(e,t),getChainId:()=>lt(e),getPermissions:()=>Nh(e),prepareAuthorization:t=>sa(e,t),prepareTransactionRequest:t=>er(e,t),requestAddresses:()=>Lh(e),requestPermissions:t=>Oh(e,t),sendCalls:t=>Yd(e,t),sendRawTransaction:t=>Qs(e,t),sendTransaction:t=>pn(e,t),showCallsStatus:t=>Fh(e,t),signAuthorization:t=>Mh(e,t),signMessage:t=>uo(e,t),signTransaction:t=>qh(e,t),signTypedData:t=>$h(e,t),switchChain:t=>zh(e,t),waitForCallsStatus:t=>Xd(e,t),watchAsset:t=>Dh(e,t),writeContract:t=>xs(e,t)}}function jh(e){const{key:t="wallet",name:n="Wallet Client",transport:s}=e;return ht({...e,key:t,name:n,transport:s,type:"walletClient"}).extend(ra)}function Uh(e,t={}){const{keepAlive:n,key:s="webSocket",methods:r,name:a="WebSocket JSON-RPC",reconnect:o,retryDelay:i}=t;return({chain:c,retryCount:u,timeout:d})=>{var p;const f=t.retryCount??u,h=d??t.timeout??1e4,l=e||((p=c==null?void 0:c.rpcUrls.default.webSocket)==null?void 0:p[0]),m={keepAlive:n,reconnect:o};if(!l)throw new sr;return rr({key:s,methods:r,name:a,async request({method:g,params:y}){const b={method:g,params:y},w=await tt(l,m),{error:E,result:I}=await w.requestAsync({body:b,timeout:h});if(E)throw new ar({body:b,error:E,url:l});return I},retryCount:f,retryDelay:i,timeout:h,type:"webSocket"},{getSocket(){return Af(l)},getRpcClient(){return tt(l,m)},async subscribe({params:g,onData:y,onError:b}){const w=await tt(l,m),{result:E}=await new Promise((I,x)=>w.request({body:{method:"eth_subscribe",params:g},onError(_){x(_),b==null||b(_)},onResponse(_){if(_.error){x(_.error),b==null||b(_.error);return}if(typeof _.id=="number"){I(_);return}_.method==="eth_subscription"&&y(_.params)}}));return{subscriptionId:E,async unsubscribe(){return new Promise(I=>w.request({body:{method:"eth_unsubscribe",params:[E]},onResponse:I}))}}}})}}class Hh extends Error{constructor(t,n){super(n),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t,this.details=n}}const Lt="/docs/contract/decodeDeployData";function Gh(e){const{abi:t,bytecode:n,data:s}=e;if(s===n)return{bytecode:n};const r=t.find(o=>"type"in o&&o.type==="constructor");if(!r)throw new or({docsPath:Lt});if(!("inputs"in r))throw new Ht({docsPath:Lt});if(!r.inputs||r.inputs.length===0)throw new Ht({docsPath:Lt});return{args:vn(r.inputs,`0x${s.replace(n,"")}`),bytecode:n}}function Vh({r:e,yParityAndS:t}){const n=ue(t),s=n[0]&128?1:0,r=n;return s===1&&(r[0]&=127),{r:e,s:H(r),yParity:s}}function as(e){const{r:t,s:n}=pt.Signature.fromCompact(e.slice(2,130));return{r:v(t,{size:32}),yParityAndS:v(n,{size:32})}}function os(e){const{r:t,s:n}=pt.Signature.fromCompact(e.slice(2,130)),s=+`0x${e.slice(130)}`,[r,a]=(()=>{if(s===0||s===1)return[void 0,s];if(s===27)return[BigInt(s),0];if(s===28)return[BigInt(s),1];throw new Error("Invalid yParityOrV value")})();return typeof r<"u"?{r:v(t,{size:32}),s:v(n,{size:32}),v:r,yParity:a}:{r:v(t,{size:32}),s:v(n,{size:32}),yParity:a}}async function Wh(e){const{serializedTransaction:t,signature:n}=e,s=Ur(t),r=n??{r:s.r,s:s.s,v:s.v,yParity:s.yParity},a=Sr({...s,r:void 0,s:void 0,v:void 0,yParity:void 0,sidecars:void 0});return await _e({hash:Y(a),signature:r})}function Kh(e){const{r:t,s:n,v:s,yParity:r}=e,a=Number(r??s-27n);let o=n;if(a===1){const i=ue(n);i[0]|=128,o=H(i)}return{r:t,yParityAndS:o}}function is({r:e,yParityAndS:t}){return`0x${new pt.Signature(k(e),k(t)).toCompactHex()}`}function Jh(e){const{sidecars:t,version:n}=e,s=e.to??(typeof t[0].blob=="string"?"hex":"bytes"),r=[];for(const{commitment:a}of t)r.push(ir({commitment:a,to:s,version:n}));return r}function Zh(e){const t=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),n=typeof e.blobs[0]=="string"?e.blobs.map(i=>ue(i)):e.blobs,s=n.reduce((i,c)=>i+c.length,0),r=zt(new Uint8Array(s));let a=!0;for(const i of n){const c=zt(i);for(;a&&c.position<i.length;){c.incrementPosition(1);let u=31;i.length-c.position<31&&(u=i.length-c.position);for(const d in Array.from({length:u})){const f=c.readByte();if(f===128&&!c.inspectBytes(c.remaining).includes(128)){a=!1;break}r.pushByte(f)}}}const o=r.bytes.slice(0,r.position);return t==="hex"?H(o):o}function aa({blobToKzgCommitment:e,computeBlobKzgProof:t}){return{blobToKzgCommitment:e,computeBlobKzgProof:t}}function Yh(e,t){try{e.loadTrustedSetup(t)}catch(n){const s=n;if(!s.message.includes("trusted setup is already loaded"))throw s}return aa(e)}const Xh=Object.freeze(Object.defineProperty({__proto__:null,AbiConstructorNotFoundError:or,AbiConstructorParamsNotFoundError:Ht,AbiDecodingDataSizeInvalidError:fo,AbiDecodingDataSizeTooSmallError:lo,AbiDecodingZeroDataError:Gs,AbiEncodingArrayLengthMismatchError:ho,AbiEncodingBytesSizeMismatchError:mo,AbiEncodingLengthMismatchError:Ss,AbiErrorInputsNotFoundError:po,AbiErrorNotFoundError:go,AbiErrorSignatureNotFoundError:yo,AbiEventNotFoundError:Ft,AbiEventSignatureEmptyTopicsError:bo,AbiEventSignatureNotFoundError:wo,AbiFunctionNotFoundError:vo,AbiFunctionOutputsNotFoundError:xo,AbiFunctionSignatureNotFoundError:_o,AccountStateConflictError:Eo,AtomicReadyWalletRejectedUpgradeError:Io,AtomicityNotSupportedError:Es,BaseError:M,BaseFeeScalarError:Po,BlockNotFoundError:To,BundleTooLargeError:Ao,BytesSizeMismatchError:Rs,CallExecutionError:Xs,ChainDisconnectedError:So,ChainDoesNotSupportContract:Co,ChainMismatchError:ko,ChainNotFoundError:Ro,CircularReferenceError:Bo,ClientChainNotConfiguredError:No,ContractFunctionExecutionError:Lo,ContractFunctionRevertedError:qt,ContractFunctionZeroDataError:Oo,CounterfactualDeploymentFailedError:Fo,DecodeLogDataMismatch:hn,DecodeLogTopicsMismatch:mn,DuplicateIdError:Mo,EIP1193ProviderRpcError:Hh,Eip1559FeesNotSupportedError:qo,EnsAvatarInvalidNftUriError:he,EnsAvatarUnsupportedNamespaceError:wr,EnsAvatarUriResolutionError:yt,EstimateGasExecutionError:$o,ExecutionRevertedError:zo,FeeCapTooHighError:ft,FeeCapTooLowError:Do,FeeConflictError:jo,FilterTypeNotSupportedError:ur,HttpRequestError:Uo,InsufficientFundsError:Ho,IntegerOutOfRangeError:Go,InternalRpcError:Vo,IntrinsicGasTooHighError:Wo,IntrinsicGasTooLowError:Ko,InvalidAbiDecodingTypeError:Jo,InvalidAbiEncodingTypeError:Zo,InvalidAbiItemError:ys,InvalidAbiParameterError:bs,InvalidAbiParametersError:ws,InvalidAbiTypeParameterError:Yo,InvalidAddressError:ie,InvalidArrayError:Xo,InvalidBytesBooleanError:Qo,InvalidChainIdError:qe,InvalidDecimalNumberError:ei,InvalidDefinitionTypeError:ti,InvalidDomainError:ba,InvalidFunctionModifierError:ni,InvalidHexBooleanError:si,InvalidHexValueError:$s,InvalidInputRpcError:dn,InvalidLegacyVError:wn,InvalidModifierError:ri,InvalidParameterError:ai,InvalidParamsRpcError:oi,InvalidParenthesisError:ii,InvalidPrimaryTypeError:wa,InvalidRequestRpcError:ci,InvalidSerializableTransactionError:ui,InvalidSerializedTransactionError:Ee,InvalidSerializedTransactionTypeError:zs,InvalidSignatureError:di,InvalidStorageKeySizeError:Ls,InvalidStructSignatureError:fi,InvalidStructTypeError:va,JsonRpcVersionUnsupportedError:li,LimitExceededRpcError:hi,MaxFeePerGasTooLowError:mi,MethodNotFoundRpcError:pi,MethodNotSupportedRpcError:gi,NonceMaxValueError:yi,NonceTooHighError:bi,NonceTooLowError:wi,ParseRpcError:vi,ProviderDisconnectedError:xi,ProviderRpcError:_i,RawContractError:Vs,ResourceNotFoundRpcError:Ei,ResourceUnavailableRpcError:Ii,RpcError:Pi,RpcRequestError:ar,SizeExceedsPaddingSizeError:Ti,SizeOverflowError:Ai,SliceOffsetOutOfBoundsError:Si,SocketClosedError:Ne,SolidityProtectedKeywordError:Ci,StateAssignmentConflictError:ki,SwitchChainError:Ri,TimeoutError:As,TipAboveFeeCapError:Ns,TransactionExecutionError:Bi,TransactionNotFoundError:Ni,TransactionReceiptNotFoundError:Li,TransactionRejectedRpcError:Oi,TransactionTypeNotSupportedError:Fi,UnauthorizedProviderError:Mi,UnknownBundleIdError:qi,UnknownNodeError:Ws,UnknownRpcError:$i,UnknownSignatureError:zi,UnknownTypeError:Di,UnsupportedChainIdError:ji,UnsupportedNonOptionalCapabilityError:_s,UnsupportedPackedAbiType:Bs,UnsupportedProviderMethodError:Ui,UrlRequiredError:sr,UserRejectedRequestError:Hi,WaitForCallsStatusTimeoutError:gr,WaitForTransactionReceiptTimeoutError:Gi,WebSocketRequestError:$t,assertCurrentChain:nr,assertRequest:ut,assertTransactionEIP1559:$e,assertTransactionEIP2930:Rn,assertTransactionLegacy:Bn,blobsToCommitments:Fs,blobsToProofs:qs,boolToBytes:Vi,boolToHex:ks,bytesToBigInt:Wi,bytesToBool:Ki,bytesToHex:H,bytesToNumber:Ji,bytesToRlp:Zi,bytesToString:Yi,ccipFetch:Kn,ccipRequest:Kn,checksumAddress:tr,commitmentToVersionedHash:ir,commitmentsToVersionedHashes:Ms,compactSignatureToHex:is,compactSignatureToSignature:Vh,concat:be,concatBytes:Xi,concatHex:oe,createClient:ht,createNonceManager:Hr,createPublicClient:Yl,createTestClient:Sh,createTransport:rr,createWalletClient:jh,custom:Qi,decodeAbiParameters:vn,decodeDeployData:Gh,decodeErrorResult:ec,decodeEventLog:ln,decodeFunctionData:Sd,decodeFunctionResult:Oe,defineBlock:tc,defineChain:nc,defineKzg:aa,defineTransaction:sc,defineTransactionReceipt:rc,defineTransactionRequest:ac,deploylessCallViaBytecodeBytecode:Js,deploylessCallViaFactoryBytecode:oc,domainSeparator:xa,encodeAbiParameters:rn,encodeDeployData:Pn,encodeErrorResult:Cd,encodeEventTopics:Pe,encodeFunctionData:Q,encodeFunctionResult:kd,encodePacked:Sf,erc1155Abi:ic,erc20Abi:cc,erc20Abi_bytes32:uc,erc4626Abi:dc,erc721Abi:fc,ethAddress:ea,etherUnits:Ds,extractChain:Pf,fallback:lc,formatBlock:Hs,formatEther:hc,formatGwei:mc,formatLog:ne,formatTransaction:pc,formatTransactionReceipt:gc,formatTransactionRequest:Me,formatUnits:yc,fromBlobs:Zh,fromBytes:bc,fromHex:wc,fromRlp:Nn,getAbiItem:sn,getAddress:W,getChainContractAddress:Fe,getContract:Zd,getContractAddress:Of,getContractError:ot,getCreate2Address:kr,getCreateAddress:Cr,getEventSelector:Mt,getEventSignature:Ke,getFunctionSelector:Vn,getFunctionSignature:Ke,getSerializedTransactionType:jr,getTransactionType:Os,getTypesForEIP712Domain:ms,gweiUnits:js,hashDomain:_a,hashMessage:at,hashStruct:Ea,hashTypedData:en,hexToBigInt:k,hexToBool:Ys,hexToBytes:ue,hexToCompactSignature:as,hexToNumber:N,hexToRlp:vc,hexToSignature:os,hexToString:xc,http:_c,isAddress:ee,isAddressEqual:de,isBytes:Vt,isErc6492Signature:Ln,isHash:Br,isHex:S,keccak256:Y,labelhash:br,maxInt104:Ec,maxInt112:Ic,maxInt120:Pc,maxInt128:Tc,maxInt136:Ac,maxInt144:Sc,maxInt152:Cc,maxInt16:kc,maxInt160:Rc,maxInt168:Bc,maxInt176:Nc,maxInt184:Lc,maxInt192:Oc,maxInt200:Fc,maxInt208:Mc,maxInt216:qc,maxInt224:$c,maxInt232:zc,maxInt24:Dc,maxInt240:jc,maxInt248:Uc,maxInt256:Hc,maxInt32:Gc,maxInt40:Vc,maxInt48:Wc,maxInt56:Kc,maxInt64:Jc,maxInt72:Zc,maxInt8:Yc,maxInt80:Xc,maxInt88:Qc,maxInt96:eu,maxUint104:tu,maxUint112:nu,maxUint120:su,maxUint128:ru,maxUint136:au,maxUint144:ou,maxUint152:iu,maxUint16:cu,maxUint160:uu,maxUint168:du,maxUint176:fu,maxUint184:lu,maxUint192:hu,maxUint200:mu,maxUint208:pu,maxUint216:gu,maxUint224:yu,maxUint232:bu,maxUint24:wu,maxUint240:vu,maxUint248:xu,maxUint256:dt,maxUint32:_u,maxUint40:Eu,maxUint48:Iu,maxUint56:Pu,maxUint64:Tu,maxUint72:Au,maxUint8:Su,maxUint80:Cu,maxUint88:ku,maxUint96:Ru,minInt104:Bu,minInt112:Nu,minInt120:Lu,minInt128:Ou,minInt136:Fu,minInt144:Mu,minInt152:qu,minInt16:$u,minInt160:zu,minInt168:Du,minInt176:ju,minInt184:Uu,minInt192:Hu,minInt200:Gu,minInt208:Vu,minInt216:Wu,minInt224:Ku,minInt232:Ju,minInt24:Zu,minInt240:Yu,minInt248:Xu,minInt256:Qu,minInt32:ed,minInt40:td,minInt48:nd,minInt56:sd,minInt64:rd,minInt72:ad,minInt8:od,minInt80:id,minInt88:cd,minInt96:ud,multicall3Abi:dd,namehash:ke,nonceManager:il,numberToBytes:fd,numberToHex:v,offchainLookup:Rd,offchainLookupAbiItem:Bd,offchainLookupSignature:Nd,pad:Ce,padBytes:ld,padHex:Dt,parseAbi:hd,parseAbiItem:Gt,parseAbiParameter:qd,parseAbiParameters:$d,parseCompactSignature:as,parseErc6492Signature:Yf,parseEther:rl,parseEventLogs:on,parseGwei:al,parseSignature:os,parseTransaction:Ur,parseUnits:xn,prepareEncodeFunctionData:md,presignMessagePrefix:Ia,publicActions:ta,recoverAddress:_e,recoverMessageAddress:qr,recoverPublicKey:pd,recoverTransactionAddress:Wh,recoverTypedDataAddress:$r,ripemd160:Vf,rpcSchema:gd,rpcTransactionType:yd,serializeAccessList:ze,serializeCompactSignature:is,serializeErc6492Signature:Dr,serializeSignature:Qt,serializeTransaction:Sr,serializeTypedData:gs,setErrorConfig:bd,setupKzg:Yh,sha256:wd,shouldThrow:vd,sidecarsToVersionedHashes:Jh,signatureToCompactSignature:Kh,signatureToHex:Qt,size:gn,slice:yn,sliceBytes:xd,sliceHex:Be,stringToBytes:pe,stringToHex:Cs,stringify:ye,testActions:na,toBlobSidecars:bn,toBlobs:_d,toBytes:V,toEventHash:Wn,toEventSelector:Mt,toEventSignature:Ke,toFunctionHash:Wn,toFunctionSelector:Vn,toFunctionSignature:Ke,toHex:re,toPrefixedMessage:Pa,toRlp:ae,transactionType:Ed,trim:se,universalSignatureValidatorAbi:Ut,universalSignatureValidatorByteCode:Zs,validateTypedData:ps,verifyHash:Wf,verifyMessage:Kf,verifyTypedData:Jf,walletActions:ra,webSocket:Uh,weiUnits:Id,withCache:Pd,withRetry:Td,withTimeout:Ts,zeroAddress:U,zeroHash:Zf},Symbol.toStringTag,{value:"Module"}));var qn={},xt={},oa={},rt={},ia={},Ue={},He={};Object.defineProperty(He,"__esModule",{value:!0});He.getSDKVersion=void 0;const Qh=()=>"9.1.0";He.getSDKVersion=Qh;var _t={};Object.defineProperty(_t,"__esModule",{value:!0});_t.generateRequestId=void 0;const em=e=>e.toString(16).padStart(2,"0"),tm=e=>{const t=new Uint8Array(e/2);return window.crypto.getRandomValues(t),Array.from(t,em).join("")},nm=()=>typeof window<"u"?tm(10):new Date().getTime().toString(36);_t.generateRequestId=nm;Object.defineProperty(Ue,"__esModule",{value:!0});Ue.MessageFormatter=void 0;const sm=He,rm=_t;class Et{}Ue.MessageFormatter=Et;Et.makeRequest=(e,t)=>({id:(0,rm.generateRequestId)(),method:e,params:t,env:{sdkVersion:(0,sm.getSDKVersion)()}});Et.makeResponse=(e,t,n)=>({id:e,success:!0,version:n,data:t});Et.makeErrorResponse=(e,t,n)=>({id:e,success:!1,error:t,version:n});var G={};Object.defineProperty(G,"__esModule",{value:!0});G.RestrictedMethods=G.Methods=void 0;var cs;(function(e){e.sendTransactions="sendTransactions",e.rpcCall="rpcCall",e.getChainInfo="getChainInfo",e.getSafeInfo="getSafeInfo",e.getTxBySafeTxHash="getTxBySafeTxHash",e.getSafeBalances="getSafeBalances",e.signMessage="signMessage",e.signTypedMessage="signTypedMessage",e.getEnvironmentInfo="getEnvironmentInfo",e.getOffChainSignature="getOffChainSignature",e.requestAddressBook="requestAddressBook",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions"})(cs||(G.Methods=cs={}));var us;(function(e){e.requestAddressBook="requestAddressBook"})(us||(G.RestrictedMethods=us={}));(function(e){var t=B&&B.__createBinding||(Object.create?function(a,o,i,c){c===void 0&&(c=i);var u=Object.getOwnPropertyDescriptor(o,i);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(a,c,u)}:function(a,o,i,c){c===void 0&&(c=i),a[c]=o[i]}),n=B&&B.__exportStar||function(a,o){for(var i in a)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&t(o,a,i)};Object.defineProperty(e,"__esModule",{value:!0});const s=Ue;class r{constructor(o=null,i=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:c,data:u,source:d})=>{const f=!u,h=!this.isServer&&d===window.parent,l=typeof u.version<"u"&&parseInt(u.version.split(".")[0]),m=typeof l=="number"&&l>=1;let p=!0;return Array.isArray(this.allowedOrigins)&&(p=this.allowedOrigins.find(g=>g.test(c))!==void 0),!f&&h&&m&&p},this.logIncomingMessage=c=>{console.info(`Safe Apps SDK v1: A message was received from origin ${c.origin}. `,c.data)},this.onParentMessage=c=>{this.isValidMessage(c)&&(this.debugMode&&this.logIncomingMessage(c),this.handleIncomingMessage(c.data))},this.handleIncomingMessage=c=>{const{id:u}=c,d=this.callbacks.get(u);d&&(d(c),this.callbacks.delete(u))},this.send=(c,u)=>{const d=s.MessageFormatter.makeRequest(c,u);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(d,"*"),new Promise((f,h)=>{this.callbacks.set(d.id,l=>{if(!l.success){h(new Error(l.error));return}f(l)})})},this.allowedOrigins=o,this.debugMode=i,this.isServer||window.addEventListener("message",this.onParentMessage)}}e.default=r,n(G,e)})(ia);var It={},Pt={},Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.isObjectEIP712TypedData=void 0;const am=e=>typeof e=="object"&&e!=null&&"domain"in e&&"types"in e&&"message"in e;Tt.isObjectEIP712TypedData=am;var ca={};Object.defineProperty(ca,"__esModule",{value:!0});var ua={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TransferDirection=e.TransactionStatus=e.TokenType=e.Operation=void 0;var t=Ta;Object.defineProperty(e,"Operation",{enumerable:!0,get:function(){return t.Operation}}),Object.defineProperty(e,"TokenType",{enumerable:!0,get:function(){return t.TokenType}}),Object.defineProperty(e,"TransactionStatus",{enumerable:!0,get:function(){return t.TransactionStatus}}),Object.defineProperty(e,"TransferDirection",{enumerable:!0,get:function(){return t.TransferDirection}})})(ua);var da={};Object.defineProperty(da,"__esModule",{value:!0});(function(e){var t=B&&B.__createBinding||(Object.create?function(s,r,a,o){o===void 0&&(o=a);var i=Object.getOwnPropertyDescriptor(r,a);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[a]}}),Object.defineProperty(s,o,i)}:function(s,r,a,o){o===void 0&&(o=a),s[o]=r[a]}),n=B&&B.__exportStar||function(s,r){for(var a in s)a!=="default"&&!Object.prototype.hasOwnProperty.call(r,a)&&t(r,s,a)};Object.defineProperty(e,"__esModule",{value:!0}),n(Tt,e),n(ca,e),n(ua,e),n(da,e)})(Pt);Object.defineProperty(It,"__esModule",{value:!0});It.TXs=void 0;const Xe=G,om=Pt;class im{constructor(t){this.communicator=t}async getBySafeTxHash(t){if(!t)throw new Error("Invalid safeTxHash");return(await this.communicator.send(Xe.Methods.getTxBySafeTxHash,{safeTxHash:t})).data}async signMessage(t){const n={message:t};return(await this.communicator.send(Xe.Methods.signMessage,n)).data}async signTypedMessage(t){if(!(0,om.isObjectEIP712TypedData)(t))throw new Error("Invalid typed data");return(await this.communicator.send(Xe.Methods.signTypedMessage,{typedData:t})).data}async send({txs:t,params:n}){if(!t||!t.length)throw new Error("No transactions were passed");const s={txs:t,params:n};return(await this.communicator.send(Xe.Methods.sendTransactions,s)).data}}It.TXs=im;var At={},Te={};Object.defineProperty(Te,"__esModule",{value:!0});Te.RPC_CALLS=void 0;Te.RPC_CALLS={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"};Object.defineProperty(At,"__esModule",{value:!0});At.Eth=void 0;const $=Te,cm=G,Z={defaultBlockParam:(e="latest")=>e,returnFullTxObjectParam:(e=!1)=>e,blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class um{constructor(t){this.communicator=t,this.call=this.buildRequest({call:$.RPC_CALLS.eth_call,formatters:[null,Z.defaultBlockParam]}),this.getBalance=this.buildRequest({call:$.RPC_CALLS.eth_getBalance,formatters:[null,Z.defaultBlockParam]}),this.getCode=this.buildRequest({call:$.RPC_CALLS.eth_getCode,formatters:[null,Z.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:$.RPC_CALLS.eth_getStorageAt,formatters:[null,Z.blockNumberToHex,Z.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:$.RPC_CALLS.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:$.RPC_CALLS.eth_getBlockByHash,formatters:[null,Z.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:$.RPC_CALLS.eth_getBlockByNumber,formatters:[Z.blockNumberToHex,Z.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:$.RPC_CALLS.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:$.RPC_CALLS.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:$.RPC_CALLS.eth_getTransactionCount,formatters:[null,Z.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:$.RPC_CALLS.eth_gasPrice}),this.getEstimateGas=n=>this.buildRequest({call:$.RPC_CALLS.eth_estimateGas})([n]),this.setSafeSettings=this.buildRequest({call:$.RPC_CALLS.safe_setSettings})}buildRequest(t){const{call:n,formatters:s}=t;return async r=>{s&&Array.isArray(r)&&s.forEach((i,c)=>{i&&(r[c]=i(r[c]))});const a={call:n,params:r||[]};return(await this.communicator.send(cm.Methods.rpcCall,a)).data}}}At.Eth=um;var St={};const dm=ga(Xh);var ve={};Object.defineProperty(ve,"__esModule",{value:!0});ve.MAGIC_VALUE_BYTES=ve.MAGIC_VALUE=void 0;const fm="0x1626ba7e";ve.MAGIC_VALUE=fm;const lm="0x20c13b0b";ve.MAGIC_VALUE_BYTES=lm;var $n={},Ge={},ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.PermissionsError=ce.PERMISSIONS_REQUEST_REJECTED=void 0;ce.PERMISSIONS_REQUEST_REJECTED=4001;class zn extends Error{constructor(t,n,s){super(t),this.code=n,this.data=s,Object.setPrototypeOf(this,zn.prototype)}}ce.PermissionsError=zn;Object.defineProperty(Ge,"__esModule",{value:!0});Ge.Wallet=void 0;const Ot=G,Qe=ce;class hm{constructor(t){this.communicator=t}async getPermissions(){return(await this.communicator.send(Ot.Methods.wallet_getPermissions,void 0)).data}async requestPermissions(t){if(!this.isPermissionRequestValid(t))throw new Qe.PermissionsError("Permissions request is invalid",Qe.PERMISSIONS_REQUEST_REJECTED);try{return(await this.communicator.send(Ot.Methods.wallet_requestPermissions,t)).data}catch{throw new Qe.PermissionsError("Permissions rejected",Qe.PERMISSIONS_REQUEST_REJECTED)}}isPermissionRequestValid(t){return t.every(n=>typeof n=="object"?Object.keys(n).every(s=>!!Object.values(Ot.RestrictedMethods).includes(s)):!1)}}Ge.Wallet=hm;Object.defineProperty($n,"__esModule",{value:!0});const mm=Ge,ds=ce,fs=(e,t)=>t.some(n=>n.parentCapability===e),pm=()=>(e,t,n)=>{const s=n.value;return n.value=async function(){const r=new mm.Wallet(this.communicator);let a=await r.getPermissions();if(fs(t,a)||(a=await r.requestPermissions([{[t]:{}}])),!fs(t,a))throw new ds.PermissionsError("Permissions rejected",ds.PERMISSIONS_REQUEST_REJECTED);return s.apply(this)},n};$n.default=pm;var gm=B&&B.__decorate||function(e,t,n,s){var r=arguments.length,a=r<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,s);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},ym=B&&B.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(St,"__esModule",{value:!0});St.Safe=void 0;const et=dm,ls=ve,te=G,hs=Te,bm=Pt,wm=ym($n);class fa{constructor(t){this.communicator=t}async getChainInfo(){return(await this.communicator.send(te.Methods.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(te.Methods.getSafeInfo,void 0)).data}async experimental_getBalances({currency:t="usd"}={}){return(await this.communicator.send(te.Methods.getSafeBalances,{currency:t})).data}async check1271Signature(t,n="0x"){const s=await this.getInfo(),r=(0,et.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,n]}),a={call:hs.RPC_CALLS.eth_call,params:[{to:s.safeAddress,data:r},"latest"]};try{return(await this.communicator.send(te.Methods.rpcCall,a)).data.slice(0,10).toLowerCase()===ls.MAGIC_VALUE}catch{return!1}}async check1271SignatureBytes(t,n="0x"){const s=await this.getInfo(),r=(0,et.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,n]}),a={call:hs.RPC_CALLS.eth_call,params:[{to:s.safeAddress,data:r},"latest"]};try{return(await this.communicator.send(te.Methods.rpcCall,a)).data.slice(0,10).toLowerCase()===ls.MAGIC_VALUE_BYTES}catch{return!1}}calculateMessageHash(t){return(0,et.hashMessage)(t)}calculateTypedMessageHash(t){const n=typeof t.domain.chainId=="object"?t.domain.chainId.toNumber():Number(t.domain.chainId);let s=t.primaryType;if(!s){const r=Object.values(t.types),a=Object.keys(t.types).filter(o=>r.every(i=>i.every(({type:c})=>c.replace("[","").replace("]","")!==o)));if(a.length===0||a.length>1)throw new Error("Please specify primaryType");s=a[0]}return(0,et.hashTypedData)({message:t.message,domain:{...t.domain,chainId:n,verifyingContract:t.domain.verifyingContract,salt:t.domain.salt},types:t.types,primaryType:s})}async getOffChainSignature(t){return(await this.communicator.send(te.Methods.getOffChainSignature,t)).data}async isMessageSigned(t,n="0x"){let s;if(typeof t=="string"&&(s=async()=>{const r=this.calculateMessageHash(t);return await this.isMessageHashSigned(r,n)}),(0,bm.isObjectEIP712TypedData)(t)&&(s=async()=>{const r=this.calculateTypedMessageHash(t);return await this.isMessageHashSigned(r,n)}),s)return await s();throw new Error("Invalid message type")}async isMessageHashSigned(t,n="0x"){const s=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const r of s)if(await r(t,n))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(te.Methods.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(te.Methods.requestAddressBook,void 0)).data}}St.Safe=fa;gm([(0,wm.default)()],fa.prototype,"requestAddressBook",null);var vm=B&&B.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rt,"__esModule",{value:!0});const xm=vm(ia),_m=It,Em=At,Im=St,Pm=Ge;class Tm{constructor(t={}){const{allowedDomains:n=null,debug:s=!1}=t;this.communicator=new xm.default(n,s),this.eth=new Em.Eth(this.communicator),this.txs=new _m.TXs(this.communicator),this.safe=new Im.Safe(this.communicator),this.wallet=new Pm.Wallet(this.communicator)}}rt.default=Tm;(function(e){var t=B&&B.__createBinding||(Object.create?function(o,i,c,u){u===void 0&&(u=c);var d=Object.getOwnPropertyDescriptor(i,c);(!d||("get"in d?!i.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return i[c]}}),Object.defineProperty(o,u,d)}:function(o,i,c,u){u===void 0&&(u=c),o[u]=i[c]}),n=B&&B.__exportStar||function(o,i){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(i,c)&&t(i,o,c)},s=B&&B.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.getSDKVersion=void 0;const r=s(rt);e.default=r.default,n(rt,e),n(Pt,e),n(G,e),n(Ue,e);var a=He;Object.defineProperty(e,"getSDKVersion",{enumerable:!0,get:function(){return a.getSDKVersion}}),n(Te,e)})(oa);var xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.numberToHex=xe.getLowerCase=void 0;function Am(e){return e&&e.toLowerCase()}xe.getLowerCase=Am;function Sm(e){return`0x${e.toString(16)}`}xe.numberToHex=Sm;Object.defineProperty(xt,"__esModule",{value:!0});xt.SafeAppProvider=void 0;const le=oa,Cm=Ad,D=xe;class km extends Cm.EventEmitter{constructor(t,n){super(),this.submittedTxs=new Map,this.safe=t,this.sdk=n}async connect(){this.emit("connect",{chainId:this.chainId})}async disconnect(){}get chainId(){return this.safe.chainId}async request(t){var r,a,o,i;const{method:n,params:s=[]}=t;switch(n){case"eth_accounts":return[this.safe.safeAddress];case"net_version":case"eth_chainId":return(0,D.numberToHex)(this.chainId);case"personal_sign":{const[h,l]=s;if(this.safe.safeAddress.toLowerCase()!==l.toLowerCase())throw new Error("The address or message hash is invalid");const m=await this.sdk.txs.signMessage(h);return("signature"in m?m.signature:void 0)||"0x"}case"eth_sign":{const[h,l]=s;if(this.safe.safeAddress.toLowerCase()!==h.toLowerCase()||!l.startsWith("0x"))throw new Error("The address or message hash is invalid");const m=await this.sdk.txs.signMessage(l);return("signature"in m?m.signature:void 0)||"0x"}case"eth_signTypedData":case"eth_signTypedData_v4":{const[h,l]=s,m=typeof l=="string"?JSON.parse(l):l;if(this.safe.safeAddress.toLowerCase()!==h.toLowerCase())throw new Error("The address is invalid");const p=await this.sdk.txs.signTypedMessage(m);return("signature"in p?p.signature:void 0)||"0x"}case"eth_sendTransaction":const c={...s[0],value:s[0].value||"0",data:s[0].data||"0x"};typeof c.gas=="string"&&c.gas.startsWith("0x")&&(c.gas=parseInt(c.gas,16));const u=await this.sdk.txs.send({txs:[c],params:{safeTxGas:c.gas}});return this.submittedTxs.set(u.safeTxHash,{from:this.safe.safeAddress,hash:u.safeTxHash,gas:0,gasPrice:"0x00",nonce:0,input:c.data,value:c.value,to:c.to,blockHash:null,blockNumber:null,transactionIndex:null}),u.safeTxHash;case"eth_blockNumber":return(await this.sdk.eth.getBlockByNumber(["latest"])).number;case"eth_getBalance":return this.sdk.eth.getBalance([(0,D.getLowerCase)(s[0]),s[1]]);case"eth_getCode":return this.sdk.eth.getCode([(0,D.getLowerCase)(s[0]),s[1]]);case"eth_getTransactionCount":return this.sdk.eth.getTransactionCount([(0,D.getLowerCase)(s[0]),s[1]]);case"eth_getStorageAt":return this.sdk.eth.getStorageAt([(0,D.getLowerCase)(s[0]),s[1],s[2]]);case"eth_getBlockByNumber":return this.sdk.eth.getBlockByNumber([s[0],s[1]]);case"eth_getBlockByHash":return this.sdk.eth.getBlockByHash([s[0],s[1]]);case"eth_getTransactionByHash":let f=s[0];try{f=(await this.sdk.txs.getBySafeTxHash(f)).txHash||f}catch{}return this.submittedTxs.has(f)?this.submittedTxs.get(f):this.sdk.eth.getTransactionByHash([f]).then(h=>(h&&(h.hash=s[0]),h));case"eth_getTransactionReceipt":{let h=s[0];try{h=(await this.sdk.txs.getBySafeTxHash(h)).txHash||h}catch{}return this.sdk.eth.getTransactionReceipt([h]).then(l=>(l&&(l.transactionHash=s[0]),l))}case"eth_estimateGas":return this.sdk.eth.getEstimateGas(s[0]);case"eth_call":return this.sdk.eth.call([s[0],s[1]]);case"eth_getLogs":return this.sdk.eth.getPastLogs([s[0]]);case"eth_gasPrice":return this.sdk.eth.getGasPrice();case"wallet_getPermissions":return this.sdk.wallet.getPermissions();case"wallet_requestPermissions":return this.sdk.wallet.requestPermissions(s[0]);case"safe_setSettings":return this.sdk.eth.setSafeSettings([s[0]]);case"wallet_sendCalls":{const{from:h,calls:l,chainId:m}=s[0];if(m!==(0,D.numberToHex)(this.chainId))throw new Error(`Safe is not on chain ${m}`);if(h!==this.safe.safeAddress)throw Error("Invalid from address");const p=l.map((b,w)=>{if(!b.to)throw new Error(`Invalid call #${w}: missing "to" field`);return{to:b.to,data:b.data??"0x",value:b.value??(0,D.numberToHex)(0)}}),{safeTxHash:g}=await this.sdk.txs.send({txs:p});return{id:g}}case"wallet_getCallsStatus":{const h=s[0],l={[le.TransactionStatus.AWAITING_CONFIRMATIONS]:100,[le.TransactionStatus.AWAITING_EXECUTION]:100,[le.TransactionStatus.SUCCESS]:200,[le.TransactionStatus.CANCELLED]:400,[le.TransactionStatus.FAILED]:500},m=await this.sdk.txs.getBySafeTxHash(h),p={version:"1.0",id:h,chainId:(0,D.numberToHex)(this.chainId),status:l[m.txStatus]};if(!m.txHash)return p;const g=await this.sdk.eth.getTransactionReceipt([m.txHash]);if(!g)return p;const y=((a=(r=m.txData)==null?void 0:r.dataDecoded)==null?void 0:a.method)!=="multiSend"?1:((i=(o=m.txData.dataDecoded.parameters)==null?void 0:o[0].valueDecoded)==null?void 0:i.length)??1,b=Number(g.blockNumber),w=Number(g.gasUsed);return p.receipts=Array(y).fill({logs:g.logs,status:(0,D.numberToHex)(m.txStatus===le.TransactionStatus.SUCCESS?1:0),blockHash:g.blockHash,blockNumber:(0,D.numberToHex)(b),gasUsed:(0,D.numberToHex)(w),transactionHash:m.txHash}),p}case"wallet_showCallsStatus":throw new Error(`"${t.method}" not supported`);case"wallet_getCapabilities":return{[(0,D.numberToHex)(this.chainId)]:{atomicBatch:{supported:!0}}};default:throw Error(`"${t.method}" not implemented`)}}send(t,n){t||n("Undefined request"),this.request(t).then(s=>n(null,{jsonrpc:"2.0",id:t.id,result:s})).catch(s=>n(s,null))}}xt.SafeAppProvider=km;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeAppProvider=void 0;var t=xt;Object.defineProperty(e,"SafeAppProvider",{enumerable:!0,get:function(){return t.SafeAppProvider}})})(qn);const Rm=ya(qn),$m=Md({__proto__:null,default:Rm},[qn]);export{$m as i};

import{c as rC,g as fh}from"./CE1G-McA.js";import{a as Nw,b as nC}from"./DZWKlvqC.js";import{u as iC,v as ai,w as kw,x as oC,y as aC,z as dh,t as Oc,A as uC,B as sC,D as cC,l as Mw,C as se,g as ui,b as ie,E as fc,F as lC,G as fC,H as dC,s as hC,I as $e,T as me,J as vC,e as pC,d as _C,a as bC,c as yC}from"./C6yTcgQs.js";import{s as $d}from"./B0SWonas.js";var Nr={},_t={},Bt={},we={},ca={},kr={},Mv;function Dw(){if(Mv)return kr;Mv=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.getBrokenObjectReason=kr.isBrokenObject=kr.createBrokenObject=void 0;var e="__isBrokenObject__",t="__reason__";function r(o,a){a===void 0&&(a={});var u=function(){throw o};return new Proxy(a,{get:function(s,l){if(l===e)return!0;if(l===t)return o;if(l==="toJSON")return;u()},set:u,apply:u,construct:u,defineProperty:u,deleteProperty:u,getOwnPropertyDescriptor:u,getPrototypeOf:u,has:u,isExtensible:u,ownKeys:u,preventExtensions:u,setPrototypeOf:u})}kr.createBrokenObject=r;function n(o){return o!==null&&typeof o=="object"&&o[e]===!0}kr.isBrokenObject=n;function i(o){return o[t]}return kr.getBrokenObjectReason=i,kr}var Dv;function si(){if(Dv)return ca;Dv=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.stringify=void 0;var e=Dw();function t(r,n){return JSON.stringify(r,function(i,o){return(0,e.isBrokenObject)(o)?{__isBrokenObject__:!0,__reason__:(0,e.getBrokenObjectReason)(o)}:typeof o=="bigint"?"".concat(o,"n"):n?.sortedElements===!0&&typeof o=="object"&&!Array.isArray(o)?Object.keys(o).sort().reduce(function(a,u){return a[u]=o[u],a},{}):n?.useCustomToString===!0&&typeof o=="object"&&!Array.isArray(o)&&typeof o.toString=="function"&&o.toString!==Object.prototype.toString?o?.toString():o})}return ca.stringify=t,ca}var fd={},Lv;function Lw(){return Lv||(Lv=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.rawPolyfilledDiagnosticRecord=void 0,e.rawPolyfilledDiagnosticRecord={OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"},Object.freeze(e.rawPolyfilledDiagnosticRecord)})(fd)),fd}var Uv;function it(){if(Uv)return we;Uv=1;var e=we&&we.__extends||(function(){var w=function(E,O){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,P){S.__proto__=P}||function(S,P){for(var I in P)Object.prototype.hasOwnProperty.call(P,I)&&(S[I]=P[I])},w(E,O)};return function(E,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");w(E,O);function S(){this.constructor=E}E.prototype=O===null?Object.create(O):(S.prototype=O.prototype,new S)}})(),t=we&&we.__createBinding||(Object.create?(function(w,E,O,S){S===void 0&&(S=O);var P=Object.getOwnPropertyDescriptor(E,O);(!P||("get"in P?!E.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return E[O]}}),Object.defineProperty(w,S,P)}):(function(w,E,O,S){S===void 0&&(S=O),w[S]=E[O]})),r=we&&we.__setModuleDefault||(Object.create?(function(w,E){Object.defineProperty(w,"default",{enumerable:!0,value:E})}):function(w,E){w.default=E}),n=we&&we.__importStar||function(w){if(w&&w.__esModule)return w;var E={};if(w!=null)for(var O in w)O!=="default"&&Object.prototype.hasOwnProperty.call(w,O)&&t(E,w,O);return r(E,w),E};Object.defineProperty(we,"__esModule",{value:!0}),we.PROTOCOL_ERROR=we.SESSION_EXPIRED=we.SERVICE_UNAVAILABLE=we.GQLError=we.Neo4jError=we.isRetriableError=we.newGQLError=we.newError=void 0;var i=n(si()),o=Lw(),a={DATABASE_ERROR:"DATABASE_ERROR",CLIENT_ERROR:"CLIENT_ERROR",TRANSIENT_ERROR:"TRANSIENT_ERROR",UNKNOWN:"UNKNOWN"};Object.freeze(a);var u=Object.values(a),s="ServiceUnavailable";we.SERVICE_UNAVAILABLE=s;var l="SessionExpired";we.SESSION_EXPIRED=l;var d="ProtocolError";we.PROTOCOL_ERROR=d;var c="N/A",p=(function(w){e(E,w);function E(O,S,P,I,C){var R=this,A;return R=w.call(this,O,C!=null?{cause:C}:void 0)||this,R.constructor=E,R.__proto__=E.prototype,R.cause=C??void 0,R.gqlStatus=S,R.gqlStatusDescription=P,R.diagnosticRecord=I,R.classification=v(R.diagnosticRecord),R.rawClassification=(A=I?._classification)!==null&&A!==void 0?A:void 0,R.name="GQLError",R}return Object.defineProperty(E.prototype,"diagnosticRecordAsJsonString",{get:function(){return i.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),E})(Error);we.GQLError=p;var b=(function(w){e(E,w);function E(O,S,P,I,C,R){var A=w.call(this,O,P,I,C,R)||this;return A.constructor=E,A.__proto__=E.prototype,A.code=S,A.name="Neo4jError",A.retriable=y(S),A}return E.isRetriable=function(O){return O!=null&&O instanceof E&&O.retriable},E})(p);we.Neo4jError=b;function m(w,E,O,S,P,I){return new b(w,E??c,S??"50N42",P??"error: general processing exception - unexpected error. "+w,I??o.rawPolyfilledDiagnosticRecord,O)}we.newError=m;function _(w,E,O,S,P){return new p(w,O??"50N42",S??"error: general processing exception - unexpected error. "+w,P??o.rawPolyfilledDiagnosticRecord,E)}we.newGQLError=_;var f=b.isRetriable;we.isRetriableError=f;function y(w){return w===s||w===l||h(w)||g(w)}function g(w){return w?.includes("TransientError")===!0}function h(w){return w==="Neo.ClientError.Security.AuthorizationExpired"}function v(w){return w===void 0||w._classification===void 0?"UNKNOWN":u.includes(w._classification)?w?._classification:"UNKNOWN"}return we}var bt={},Bv;function Ec(){if(Bv)return bt;Bv=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.toString=bt.toNumber=bt.inSafeRange=bt.isInt=bt.int=void 0;var e=it(),t=new Map,r=(function(){function f(y,g){this.low=y??0,this.high=g??0}return f.prototype.inSafeRange=function(){return this.greaterThanOrEqual(f.MIN_SAFE_VALUE)&&this.lessThanOrEqual(f.MAX_SAFE_VALUE)},f.prototype.toInt=function(){return this.low},f.prototype.toNumber=function(){return this.high*u+(this.low>>>0)},f.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(u)+BigInt(this.low>>>0);var y=this.negate();return BigInt(-1)*(BigInt(y.high>>>0)*BigInt(u)+BigInt(y.low>>>0))},f.prototype.toNumberOrInfinity=function(){return this.lessThan(f.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(f.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},f.prototype.toString=function(y){if(y=y??10,y<2||y>36)throw RangeError("radix out of range: "+y.toString());if(this.isZero())return"0";var g;if(this.isNegative())if(this.equals(f.MIN_VALUE)){var h=f.fromNumber(y),v=this.div(h);return g=v.multiply(h).subtract(this),v.toString(y)+g.toInt().toString(y)}else return"-"+this.negate().toString(y);var w=f.fromNumber(Math.pow(y,6));g=this;for(var E="";;){var O=g.div(w),S=g.subtract(O.multiply(w)).toInt()>>>0,P=S.toString(y);if(g=O,g.isZero())return P+E;for(;P.length<6;)P="0"+P;E=""+P+E}},f.prototype.valueOf=function(){return this.toBigInt()},f.prototype.getHighBits=function(){return this.high},f.prototype.getLowBits=function(){return this.low},f.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(f.MIN_VALUE)?64:this.negate().getNumBitsAbs();var y=this.high!==0?this.high:this.low,g=0;for(g=31;g>0&&(y&1<<g)===0;g--);return this.high!==0?g+33:g+1},f.prototype.isZero=function(){return this.high===0&&this.low===0},f.prototype.isNegative=function(){return this.high<0},f.prototype.isPositive=function(){return this.high>=0},f.prototype.isOdd=function(){return(this.low&1)===1},f.prototype.isEven=function(){return(this.low&1)===0},f.prototype.equals=function(y){var g=f.fromValue(y);return this.high===g.high&&this.low===g.low},f.prototype.notEquals=function(y){return!this.equals(y)},f.prototype.lessThan=function(y){return this.compare(y)<0},f.prototype.lessThanOrEqual=function(y){return this.compare(y)<=0},f.prototype.greaterThan=function(y){return this.compare(y)>0},f.prototype.greaterThanOrEqual=function(y){return this.compare(y)>=0},f.prototype.compare=function(y){var g=f.fromValue(y);if(this.equals(g))return 0;var h=this.isNegative(),v=g.isNegative();return h&&!v?-1:!h&&v?1:this.subtract(g).isNegative()?-1:1},f.prototype.negate=function(){return this.equals(f.MIN_VALUE)?f.MIN_VALUE:this.not().add(f.ONE)},f.prototype.add=function(y){var g=f.fromValue(y),h=this.high>>>16,v=this.high&65535,w=this.low>>>16,E=this.low&65535,O=g.high>>>16,S=g.high&65535,P=g.low>>>16,I=g.low&65535,C=0,R=0,A=0,D=0;return D+=E+I,A+=D>>>16,D&=65535,A+=w+P,R+=A>>>16,A&=65535,R+=v+S,C+=R>>>16,R&=65535,C+=h+O,C&=65535,f.fromBits(A<<16|D,C<<16|R)},f.prototype.subtract=function(y){var g=f.fromValue(y);return this.add(g.negate())},f.prototype.multiply=function(y){if(this.isZero())return f.ZERO;var g=f.fromValue(y);if(g.isZero())return f.ZERO;if(this.equals(f.MIN_VALUE))return g.isOdd()?f.MIN_VALUE:f.ZERO;if(g.equals(f.MIN_VALUE))return this.isOdd()?f.MIN_VALUE:f.ZERO;if(this.isNegative())return g.isNegative()?this.negate().multiply(g.negate()):this.negate().multiply(g).negate();if(g.isNegative())return this.multiply(g.negate()).negate();if(this.lessThan(d)&&g.lessThan(d))return f.fromNumber(this.toNumber()*g.toNumber());var h=this.high>>>16,v=this.high&65535,w=this.low>>>16,E=this.low&65535,O=g.high>>>16,S=g.high&65535,P=g.low>>>16,I=g.low&65535,C=0,R=0,A=0,D=0;return D+=E*I,A+=D>>>16,D&=65535,A+=w*I,R+=A>>>16,A&=65535,A+=E*P,R+=A>>>16,A&=65535,R+=v*I,C+=R>>>16,R&=65535,R+=w*P,C+=R>>>16,R&=65535,R+=E*S,C+=R>>>16,R&=65535,C+=h*I+v*P+w*S+E*O,C&=65535,f.fromBits(A<<16|D,C<<16|R)},f.prototype.div=function(y){var g=f.fromValue(y);if(g.isZero())throw(0,e.newError)("division by zero");if(this.isZero())return f.ZERO;var h,v,w;if(this.equals(f.MIN_VALUE)){if(g.equals(f.ONE)||g.equals(f.NEG_ONE))return f.MIN_VALUE;if(g.equals(f.MIN_VALUE))return f.ONE;var E=this.shiftRight(1);return h=E.div(g).shiftLeft(1),h.equals(f.ZERO)?g.isNegative()?f.ONE:f.NEG_ONE:(v=this.subtract(g.multiply(h)),w=h.add(v.div(g)),w)}else if(g.equals(f.MIN_VALUE))return f.ZERO;if(this.isNegative())return g.isNegative()?this.negate().div(g.negate()):this.negate().div(g).negate();if(g.isNegative())return this.div(g.negate()).negate();for(w=f.ZERO,v=this;v.greaterThanOrEqual(g);){h=Math.max(1,Math.floor(v.toNumber()/g.toNumber()));for(var O=Math.ceil(Math.log(h)/Math.LN2),S=O<=48?1:Math.pow(2,O-48),P=f.fromNumber(h),I=P.multiply(g);I.isNegative()||I.greaterThan(v);)h-=S,P=f.fromNumber(h),I=P.multiply(g);P.isZero()&&(P=f.ONE),w=w.add(P),v=v.subtract(I)}return w},f.prototype.modulo=function(y){var g=f.fromValue(y);return this.subtract(this.div(g).multiply(g))},f.prototype.not=function(){return f.fromBits(~this.low,~this.high)},f.prototype.and=function(y){var g=f.fromValue(y);return f.fromBits(this.low&g.low,this.high&g.high)},f.prototype.or=function(y){var g=f.fromValue(y);return f.fromBits(this.low|g.low,this.high|g.high)},f.prototype.xor=function(y){var g=f.fromValue(y);return f.fromBits(this.low^g.low,this.high^g.high)},f.prototype.shiftLeft=function(y){var g=f.toNumber(y);return(g&=63)===0?f.ZERO:g<32?f.fromBits(this.low<<g,this.high<<g|this.low>>>32-g):f.fromBits(0,this.low<<g-32)},f.prototype.shiftRight=function(y){var g=f.toNumber(y),h=f.toNumber(y);return(g&=63)===0?f.ZERO:h<32?f.fromBits(this.low>>>g|this.high<<32-g,this.high>>g):f.fromBits(this.high>>g-32,this.high>=0?0:-1)},f.isInteger=function(y){return y?.__isInteger__===!0},f.fromInt=function(y){var g;if(y=y|0,y>=-128&&y<128&&(g=t.get(y),g!=null))return g;var h=new f(y,y<0?-1:0);return y>=-128&&y<128&&t.set(y,h),h},f.fromBits=function(y,g){return new f(y,g)},f.fromNumber=function(y){return isNaN(y)||!isFinite(y)?f.ZERO:y<=-l?f.MIN_VALUE:y+1>=l?f.MAX_VALUE:y<0?f.fromNumber(-y).negate():new f(y%u|0,y/u|0)},f.fromString=function(y,g,h){var v=h===void 0?{}:h,w=v.strictStringValidation;if(y.length===0)throw(0,e.newError)("number format error: empty string");if(y==="NaN"||y==="Infinity"||y==="+Infinity"||y==="-Infinity")return f.ZERO;if(g=g??10,g<2||g>36)throw(0,e.newError)("radix out of range: "+g.toString());var E;if((E=y.indexOf("-"))>0)throw(0,e.newError)('number format error: interior "-" character: '+y);if(E===0)return f.fromString(y.substring(1),g).negate();for(var O=f.fromNumber(Math.pow(g,8)),S=f.ZERO,P=0;P<y.length;P+=8){var I=Math.min(8,y.length-P),C=y.substring(P,P+I),R=parseInt(C,g);if(w===!0&&!i(C,R,g))throw(0,e.newError)('number format error: "'.concat(C,'" is NaN in radix ').concat(g,": ").concat(y));if(I<8){var A=f.fromNumber(Math.pow(g,I));S=S.multiply(A).add(f.fromNumber(R))}else S=S.multiply(O),S=S.add(f.fromNumber(R))}return S},f.fromValue=function(y,g){return g===void 0&&(g={}),y instanceof f?y:typeof y=="number"?(g.ceilFloat===!0&&(y=Math.ceil(y)),f.fromNumber(y)):typeof y=="string"?f.fromString(y,void 0,g):typeof y=="bigint"?f.fromString(y.toString()):new f(y.low,y.high)},f.toNumber=function(y){switch(typeof y){case"number":return y;case"bigint":return Number(y);default:return f.fromValue(y).toNumber()}},f.toString=function(y,g){return f.fromValue(y).toString(g)},f.inSafeRange=function(y){return f.fromValue(y).inSafeRange()},f.ZERO=f.fromInt(0),f.ONE=f.fromInt(1),f.NEG_ONE=f.fromInt(-1),f.MAX_VALUE=f.fromBits(-1,2147483647),f.MIN_VALUE=f.fromBits(0,-2147483648),f.MIN_SAFE_VALUE=f.fromBits(1,-2097152),f.MAX_SAFE_VALUE=f.fromBits(-1,2097151),f.__isInteger__=!0,f})();function n(f,y,g){var h=f.toString(y),v=Math.max(g-h.length,0),w="0".repeat(v);return"".concat(w).concat(h)}function i(f,y,g){return!Number.isNaN(f)&&!Number.isNaN(y)&&n(y,g,f.length)===f.toLowerCase()}Object.defineProperty(r.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var o=65536,a=1<<24,u=o*o,s=u*u,l=s/2,d=r.fromInt(a),c=r.fromValue;bt.int=c;var p=r.isInteger;bt.isInt=p;var b=r.inSafeRange;bt.inSafeRange=b;var m=r.toNumber;bt.toNumber=m;var _=r.toString;return bt.toString=_,bt.default=r,bt}var ve={},Mr={},he={},qv;function Lt(){if(qv)return he;qv=1;var e=he&&he.__createBinding||(Object.create?(function(w,E,O,S){S===void 0&&(S=O);var P=Object.getOwnPropertyDescriptor(E,O);(!P||("get"in P?!E.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return E[O]}}),Object.defineProperty(w,S,P)}):(function(w,E,O,S){S===void 0&&(S=O),w[S]=E[O]})),t=he&&he.__setModuleDefault||(Object.create?(function(w,E){Object.defineProperty(w,"default",{enumerable:!0,value:E})}):function(w,E){w.default=E}),r=he&&he.__importStar||function(w){if(w&&w.__esModule)return w;var E={};if(w!=null)for(var O in w)O!=="default"&&Object.prototype.hasOwnProperty.call(w,O)&&e(E,w,O);return t(E,w),E},n=he&&he.__values||function(w){var E=typeof Symbol=="function"&&Symbol.iterator,O=E&&w[E],S=0;if(O)return O.call(w);if(w&&typeof w.length=="number")return{next:function(){return w&&S>=w.length&&(w=void 0),{value:w&&w[S++],done:!w}}};throw new TypeError(E?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(he,"__esModule",{value:!0}),he.ENCRYPTION_OFF=he.ENCRYPTION_ON=he.equals=he.validateQueryAndParameters=he.toNumber=he.assertValidDate=he.assertNumberOrInteger=he.assertNumber=he.assertString=he.assertObject=he.isString=he.isObject=he.isEmptyObjectOrNull=void 0;var i=r(Ec()),o=si(),a="ENCRYPTION_ON";he.ENCRYPTION_ON=a;var u="ENCRYPTION_OFF";he.ENCRYPTION_OFF=u;function s(w){if(w===null)return!0;if(!l(w))return!1;for(var E in w)if(w[E]!==void 0)return!1;return!0}he.isEmptyObjectOrNull=s;function l(w){return typeof w=="object"&&!Array.isArray(w)&&w!==null}he.isObject=l;function d(w,E,O){var S,P,I="",C=E??{},R=(S=O?.skipAsserts)!==null&&S!==void 0?S:!1;return typeof w=="string"?I=w:w instanceof String?I=w.toString():typeof w=="object"&&w.text!=null&&(I=w.text,C=(P=w.parameters)!==null&&P!==void 0?P:{}),R||(f(I),y(C)),{validatedQuery:I,params:C}}he.validateQueryAndParameters=d;function c(w,E){if(!l(w))throw new TypeError(E+" expected to be an object but was: "+(0,o.stringify)(w));return w}he.assertObject=c;function p(w,E){if(!g(w))throw new TypeError((0,o.stringify)(E)+" expected to be string but was: "+(0,o.stringify)(w));return w}he.assertString=p;function b(w,E){if(typeof w!="number")throw new TypeError(E+" expected to be a number but was: "+(0,o.stringify)(w));return w}he.assertNumber=b;function m(w,E){if(typeof w!="number"&&typeof w!="bigint"&&!(0,i.isInt)(w))throw new TypeError(E+" expected to be either a number or an Integer object but was: "+(0,o.stringify)(w));return w}he.assertNumberOrInteger=m;function _(w,E){if(Object.prototype.toString.call(w)!=="[object Date]")throw new TypeError(E+" expected to be a standard JavaScript Date but was: "+(0,o.stringify)(w));if(Number.isNaN(w.getTime()))throw new TypeError(E+" expected to be valid JavaScript Date but its time was NaN: "+(0,o.stringify)(w));return w}he.assertValidDate=_;function f(w){if(p(w,"Cypher query"),w.trim().length===0)throw new TypeError("Cypher query is expected to be a non-empty string.")}function y(w){if(!l(w)){var E=w.constructor!=null?" "+w.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(E," ").concat(JSON.stringify(w)))}}function g(w){return Object.prototype.toString.call(w)==="[object String]"}he.isString=g;function h(w,E){var O,S;if(w===E)return!0;if(w===null||E===null)return!1;if(typeof w=="object"&&typeof E=="object"){var P=Object.keys(w),I=Object.keys(E);if(P.length!==I.length)return!1;try{for(var C=n(P),R=C.next();!R.done;R=C.next()){var A=R.value;if(!h(w[A],E[A]))return!1}}catch(D){O={error:D}}finally{try{R&&!R.done&&(S=C.return)&&S.call(C)}finally{if(O)throw O.error}}return!0}return!1}he.equals=h;function v(w){return w instanceof i.default?w.toNumber():typeof w=="bigint"?(0,i.int)(w).toNumber():w}return he.toNumber=v,he}var xv;function Uw(){return xv||(xv=1,(function(e){var t=Mr&&Mr.__createBinding||(Object.create?(function(N,x,L,$){$===void 0&&($=L);var H=Object.getOwnPropertyDescriptor(x,L);(!H||("get"in H?!x.__esModule:H.writable||H.configurable))&&(H={enumerable:!0,get:function(){return x[L]}}),Object.defineProperty(N,$,H)}):(function(N,x,L,$){$===void 0&&($=L),N[$]=x[L]})),r=Mr&&Mr.__setModuleDefault||(Object.create?(function(N,x){Object.defineProperty(N,"default",{enumerable:!0,value:x})}):function(N,x){N.default=x}),n=Mr&&Mr.__importStar||function(N){if(N&&N.__esModule)return N;var x={};if(N!=null)for(var L in N)L!=="default"&&Object.prototype.hasOwnProperty.call(N,L)&&t(x,N,L);return r(x,N),x};Object.defineProperty(e,"__esModule",{value:!0}),e.floorMod=e.floorDiv=e.assertValidZoneId=e.assertValidNanosecond=e.assertValidSecond=e.assertValidMinute=e.assertValidHour=e.assertValidDay=e.assertValidMonth=e.assertValidYear=e.timeZoneOffsetInSeconds=e.totalNanoseconds=e.newDate=e.toStandardDate=e.isoStringToStandardDate=e.dateToIsoString=e.timeZoneOffsetToIsoString=e.timeToIsoString=e.durationToIsoString=e.dateToEpochDay=e.localDateTimeToEpochSecond=e.localTimeToNanoOfDay=e.normalizeNanosecondsForDuration=e.normalizeSecondsForDuration=e.SECONDS_PER_DAY=e.DAYS_PER_400_YEAR_CYCLE=e.DAYS_0000_TO_1970=e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE=e.NANOS_PER_MILLISECOND=e.NANOS_PER_SECOND=e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE=e.MINUTES_PER_HOUR=e.NANOSECOND_OF_SECOND_RANGE=e.SECOND_OF_MINUTE_RANGE=e.MINUTE_OF_HOUR_RANGE=e.HOUR_OF_DAY_RANGE=e.DAY_OF_MONTH_RANGE=e.MONTH_OF_YEAR_RANGE=e.YEAR_RANGE=void 0;var i=n(Ec()),o=it(),a=Lt(),u=(function(){function N(x,L){this._minNumber=x,this._maxNumber=L,this._minInteger=(0,i.int)(x),this._maxInteger=(0,i.int)(L)}return N.prototype.contains=function(x){if((0,i.isInt)(x)&&x instanceof i.default)return x.greaterThanOrEqual(this._minInteger)&&x.lessThanOrEqual(this._maxInteger);if(typeof x=="bigint"){var L=(0,i.int)(x);return L.greaterThanOrEqual(this._minInteger)&&L.lessThanOrEqual(this._maxInteger)}else return x>=this._minNumber&&x<=this._maxNumber},N.prototype.toString=function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")},N})();e.YEAR_RANGE=new u(-999999999,999999999),e.MONTH_OF_YEAR_RANGE=new u(1,12),e.DAY_OF_MONTH_RANGE=new u(1,31),e.HOUR_OF_DAY_RANGE=new u(0,23),e.MINUTE_OF_HOUR_RANGE=new u(0,59),e.SECOND_OF_MINUTE_RANGE=new u(0,59),e.NANOSECOND_OF_SECOND_RANGE=new u(0,999999999),e.MINUTES_PER_HOUR=60,e.SECONDS_PER_MINUTE=60,e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE*e.MINUTES_PER_HOUR,e.NANOS_PER_SECOND=1e9,e.NANOS_PER_MILLISECOND=1e6,e.NANOS_PER_MINUTE=e.NANOS_PER_SECOND*e.SECONDS_PER_MINUTE,e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE*e.MINUTES_PER_HOUR,e.DAYS_0000_TO_1970=719528,e.DAYS_PER_400_YEAR_CYCLE=146097,e.SECONDS_PER_DAY=86400;function s(N,x){return(0,i.int)(N).add(M(x,e.NANOS_PER_SECOND))}e.normalizeSecondsForDuration=s;function l(N){return V(N,e.NANOS_PER_SECOND)}e.normalizeNanosecondsForDuration=l;function d(N,x,L,$){N=(0,i.int)(N),x=(0,i.int)(x),L=(0,i.int)(L),$=(0,i.int)($);var H=N.multiply(e.NANOS_PER_HOUR);return H=H.add(x.multiply(e.NANOS_PER_MINUTE)),H=H.add(L.multiply(e.NANOS_PER_SECOND)),H.add($)}e.localTimeToNanoOfDay=d;function c(N,x,L,$,H,G,Q){var te=p(N,x,L),re=T($,H,G);return te.multiply(e.SECONDS_PER_DAY).add(re)}e.localDateTimeToEpochSecond=c;function p(N,x,L){N=(0,i.int)(N),x=(0,i.int)(x),L=(0,i.int)(L);var $=N.multiply(365);return N.greaterThanOrEqual(0)?$=$.add(N.add(3).div(4).subtract(N.add(99).div(100)).add(N.add(399).div(400))):$=$.subtract(N.div(-4).subtract(N.div(-100)).add(N.div(-400))),$=$.add(x.multiply(367).subtract(362).div(12)),$=$.add(L.subtract(1)),x.greaterThan(2)&&($=$.subtract(1),k(N)||($=$.subtract(1))),$.subtract(e.DAYS_0000_TO_1970)}e.dateToEpochDay=p;function b(N,x,L,$){var H=Y(N),G=Y(x),Q=z(L,$);return"P".concat(H,"M").concat(G,"DT").concat(Q,"S")}e.durationToIsoString=b;function m(N,x,L,$){var H=Y(N,2),G=Y(x,2),Q=Y(L,2),te=F($);return"".concat(H,":").concat(G,":").concat(Q).concat(te)}e.timeToIsoString=m;function _(N){if(N=(0,i.int)(N),N.equals(0))return"Z";var x=N.isNegative();x&&(N=N.multiply(-1));var L=x?"-":"+",$=Y(N.div(e.SECONDS_PER_HOUR),2),H=Y(N.div(e.SECONDS_PER_MINUTE).modulo(e.MINUTES_PER_HOUR),2),G=N.modulo(e.SECONDS_PER_MINUTE),Q=G.equals(0)?null:Y(G,2);return Q!=null?"".concat(L).concat($,":").concat(H,":").concat(Q):"".concat(L).concat($,":").concat(H)}e.timeZoneOffsetToIsoString=_;function f(N,x,L){var $=W(N),H=Y(x,2),G=Y(L,2);return"".concat($,"-").concat(H,"-").concat(G)}e.dateToIsoString=f;function y(N){return new Date(N)}e.isoStringToStandardDate=y;function g(N){return new Date(N)}e.toStandardDate=g;function h(N){return new Date(N)}e.newDate=h;function v(N,x){x=x??0;var L=N.getMilliseconds()*e.NANOS_PER_MILLISECOND;return K(x,L)}e.totalNanoseconds=v;function w(N){var x=N.getSeconds()-N.getUTCSeconds(),L=N.getMinutes()-N.getUTCMinutes(),$=N.getHours()-N.getUTCHours(),H=E(N);return $*e.SECONDS_PER_HOUR+L*e.SECONDS_PER_MINUTE+x+H*e.SECONDS_PER_DAY}e.timeZoneOffsetInSeconds=w;function E(N){return N.getMonth()===N.getUTCMonth()?N.getDate()-N.getUTCDate():N.getFullYear()>N.getUTCFullYear()||N.getMonth()>N.getUTCMonth()&&N.getFullYear()===N.getUTCFullYear()?N.getDate()+O(N.getUTCMonth(),N.getUTCFullYear())-N.getUTCDate():N.getDate()-(N.getUTCDate()+O(N.getMonth(),N.getFullYear()))}function O(N,x){return N===1?x%400===0||x%4===0&&x%100!==0?29:28:[0,2,4,6,7,9,11].includes(N)?31:30}function S(N){return q(N,e.YEAR_RANGE,"Year")}e.assertValidYear=S;function P(N){return q(N,e.MONTH_OF_YEAR_RANGE,"Month")}e.assertValidMonth=P;function I(N){return q(N,e.DAY_OF_MONTH_RANGE,"Day")}e.assertValidDay=I;function C(N){return q(N,e.HOUR_OF_DAY_RANGE,"Hour")}e.assertValidHour=C;function R(N){return q(N,e.MINUTE_OF_HOUR_RANGE,"Minute")}e.assertValidMinute=R;function A(N){return q(N,e.SECOND_OF_MINUTE_RANGE,"Second")}e.assertValidSecond=A;function D(N){return q(N,e.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")}e.assertValidNanosecond=D;var j=new Map,U=function(N,x){return(0,o.newError)("".concat(x,' is expected to be a valid ZoneId but was: "').concat(N,'"'))};function B(N,x){var L=j.get(x);if(L!==!0){if(L===!1)throw U(x,N);try{Intl.DateTimeFormat(void 0,{timeZone:x}),j.set(x,!0)}catch{throw j.set(x,!1),U(x,N)}}}e.assertValidZoneId=B;function q(N,x,L){if((0,a.assertNumberOrInteger)(N,L),!x.contains(N))throw(0,o.newError)("".concat(L," is expected to be in range ").concat(x.toString()," but was: ").concat(N.toString()));return N}function T(N,x,L){N=(0,i.int)(N),x=(0,i.int)(x),L=(0,i.int)(L);var $=N.multiply(e.SECONDS_PER_HOUR);return $=$.add(x.multiply(e.SECONDS_PER_MINUTE)),$.add(L)}function k(N){return N=(0,i.int)(N),N.modulo(4).equals(0)?N.modulo(100).equals(0)?!!N.modulo(400).equals(0):!0:!1}function M(N,x){N=(0,i.int)(N),x=(0,i.int)(x);var L=N.div(x);return N.isPositive()!==x.isPositive()&&L.multiply(x).notEquals(N)&&(L=L.subtract(1)),L}e.floorDiv=M;function V(N,x){return N=(0,i.int)(N),x=(0,i.int)(x),N.subtract(M(N,x).multiply(x))}e.floorMod=V;function z(N,x){N=(0,i.int)(N),x=(0,i.int)(x);var L,$,H=N.isNegative(),G=x.greaterThan(0);return H&&G?N.equals(-1)?L="-0":L=N.add(1).toString():L=N.toString(),G&&(H?$=F(x.negate().add(2*e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND)):$=F(x.add(e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND))),$!=null?L+$:L}function F(N){return N=(0,i.int)(N),N.equals(0)?"":"."+Y(N,9)}function W(N){var x=(0,i.int)(N);return x.isNegative()||x.greaterThan(9999)?Y(x,6,{usePositiveSign:!0}):Y(x,4)}function Y(N,x,L){N=(0,i.int)(N);var $=N.isNegative();$&&(N=N.negate());var H=N.toString();if(x!=null)for(;H.length<x;)H="0"+H;return $?"-"+H:L?.usePositiveSign===!0?"+"+H:H}function K(N,x){return N instanceof i.default?N.add(x):typeof N=="bigint"?N+BigInt(x):N+x}})(Mr)),Mr}var Fv;function mC(){if(Fv)return ve;Fv=1;var e=ve&&ve.__createBinding||(Object.create?(function(j,U,B,q){q===void 0&&(q=B);var T=Object.getOwnPropertyDescriptor(U,B);(!T||("get"in T?!U.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return U[B]}}),Object.defineProperty(j,q,T)}):(function(j,U,B,q){q===void 0&&(q=B),j[q]=U[B]})),t=ve&&ve.__setModuleDefault||(Object.create?(function(j,U){Object.defineProperty(j,"default",{enumerable:!0,value:U})}):function(j,U){j.default=U}),r=ve&&ve.__importStar||function(j){if(j&&j.__esModule)return j;var U={};if(j!=null)for(var B in j)B!=="default"&&Object.prototype.hasOwnProperty.call(j,B)&&e(U,j,B);return t(U,j),U},n=ve&&ve.__read||function(j,U){var B=typeof Symbol=="function"&&j[Symbol.iterator];if(!B)return j;var q=B.call(j),T,k=[],M;try{for(;(U===void 0||U-- >0)&&!(T=q.next()).done;)k.push(T.value)}catch(V){M={error:V}}finally{try{T&&!T.done&&(B=q.return)&&B.call(q)}finally{if(M)throw M.error}}return k};Object.defineProperty(ve,"__esModule",{value:!0}),ve.isDateTime=ve.DateTime=ve.isLocalDateTime=ve.LocalDateTime=ve.isDate=ve.Date=ve.isTime=ve.Time=ve.isLocalTime=ve.LocalTime=ve.isDuration=ve.Duration=void 0;var i=r(Uw()),o=Lt(),a=it(),u=r(Ec()),s={value:!0,enumerable:!1,configurable:!1,writable:!1},l="__isDuration__",d="__isLocalTime__",c="__isTime__",p="__isDate__",b="__isLocalDateTime__",m="__isDateTime__",_=(function(){function j(U,B,q,T){this.months=(0,o.assertNumberOrInteger)(U,"Months"),this.days=(0,o.assertNumberOrInteger)(B,"Days"),(0,o.assertNumberOrInteger)(q,"Seconds"),(0,o.assertNumberOrInteger)(T,"Nanoseconds"),this.seconds=i.normalizeSecondsForDuration(q,T),this.nanoseconds=i.normalizeNanosecondsForDuration(T),Object.freeze(this)}return j.prototype.toString=function(){return i.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},j})();ve.Duration=_,Object.defineProperty(_.prototype,l,s);function f(j){return C(j,l)}ve.isDuration=f;var y=(function(){function j(U,B,q,T){this.hour=i.assertValidHour(U),this.minute=i.assertValidMinute(B),this.second=i.assertValidSecond(q),this.nanosecond=i.assertValidNanosecond(T),Object.freeze(this)}return j.fromStandardDate=function(U,B){D(U,B);var q=i.totalNanoseconds(U,B);return new j(U.getHours(),U.getMinutes(),U.getSeconds(),q instanceof u.default?q.toInt():typeof q=="bigint"?(0,u.int)(q).toInt():q)},j.prototype.toString=function(){return i.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},j})();ve.LocalTime=y,Object.defineProperty(y.prototype,d,s);function g(j){return C(j,d)}ve.isLocalTime=g;var h=(function(){function j(U,B,q,T,k){this.hour=i.assertValidHour(U),this.minute=i.assertValidMinute(B),this.second=i.assertValidSecond(q),this.nanosecond=i.assertValidNanosecond(T),this.timeZoneOffsetSeconds=(0,o.assertNumberOrInteger)(k,"Time zone offset in seconds"),Object.freeze(this)}return j.fromStandardDate=function(U,B){return D(U,B),new j(U.getHours(),U.getMinutes(),U.getSeconds(),(0,u.toNumber)(i.totalNanoseconds(U,B)),i.timeZoneOffsetInSeconds(U))},j.prototype.toString=function(){return i.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+i.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},j})();ve.Time=h,Object.defineProperty(h.prototype,c,s);function v(j){return C(j,c)}ve.isTime=v;var w=(function(){function j(U,B,q){this.year=i.assertValidYear(U),this.month=i.assertValidMonth(B),this.day=i.assertValidDay(q),Object.freeze(this)}return j.fromStandardDate=function(U){return D(U),new j(U.getFullYear(),U.getMonth()+1,U.getDate())},j.prototype.toStandardDate=function(){return i.isoStringToStandardDate(this.toString())},j.prototype.toString=function(){return i.dateToIsoString(this.year,this.month,this.day)},j})();ve.Date=w,Object.defineProperty(w.prototype,p,s);function E(j){return C(j,p)}ve.isDate=E;var O=(function(){function j(U,B,q,T,k,M,V){this.year=i.assertValidYear(U),this.month=i.assertValidMonth(B),this.day=i.assertValidDay(q),this.hour=i.assertValidHour(T),this.minute=i.assertValidMinute(k),this.second=i.assertValidSecond(M),this.nanosecond=i.assertValidNanosecond(V),Object.freeze(this)}return j.fromStandardDate=function(U,B){return D(U,B),new j(U.getFullYear(),U.getMonth()+1,U.getDate(),U.getHours(),U.getMinutes(),U.getSeconds(),(0,u.toNumber)(i.totalNanoseconds(U,B)))},j.prototype.toStandardDate=function(){return i.isoStringToStandardDate(this.toString())},j.prototype.toString=function(){return R(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},j})();ve.LocalDateTime=O,Object.defineProperty(O.prototype,b,s);function S(j){return C(j,b)}ve.isLocalDateTime=S;var P=(function(){function j(U,B,q,T,k,M,V,z,F){this.year=i.assertValidYear(U),this.month=i.assertValidMonth(B),this.day=i.assertValidDay(q),this.hour=i.assertValidHour(T),this.minute=i.assertValidMinute(k),this.second=i.assertValidSecond(M),this.nanosecond=i.assertValidNanosecond(V);var W=n(A(z,F),2),Y=W[0],K=W[1];this.timeZoneOffsetSeconds=Y,this.timeZoneId=K??void 0,Object.freeze(this)}return j.fromStandardDate=function(U,B){return D(U,B),new j(U.getFullYear(),U.getMonth()+1,U.getDate(),U.getHours(),U.getMinutes(),U.getSeconds(),(0,u.toNumber)(i.totalNanoseconds(U,B)),i.timeZoneOffsetInSeconds(U),null)},j.prototype.toStandardDate=function(){return i.toStandardDate(this._toUTC())},j.prototype.toString=function(){var U,B=R(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),q=this.timeZoneOffsetSeconds!=null?i.timeZoneOffsetToIsoString((U=this.timeZoneOffsetSeconds)!==null&&U!==void 0?U:0):"",T=this.timeZoneId!=null?"[".concat(this.timeZoneId,"]"):"";return B+q+T},j.prototype._toUTC=function(){var U;if(this.timeZoneOffsetSeconds===void 0)throw new Error("Requires DateTime created with time zone offset");var B=i.localDateTimeToEpochSecond(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),q=B.subtract((U=this.timeZoneOffsetSeconds)!==null&&U!==void 0?U:0);return(0,u.int)(q).multiply(1e3).add((0,u.int)(this.nanosecond).div(1e6)).toNumber()},j})();ve.DateTime=P,Object.defineProperty(P.prototype,m,s);function I(j){return C(j,m)}ve.isDateTime=I;function C(j,U){return j!=null&&j[U]===!0}function R(j,U,B,q,T,k,M){return i.dateToIsoString(j,U,B)+"T"+i.timeToIsoString(q,T,k,M)}function A(j,U){var B=j!=null,q=U!=null&&U!=="";if(!B&&!q)throw(0,a.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(j," and id: ").concat(U));var T=[void 0,void 0];return B&&((0,o.assertNumberOrInteger)(j,"Time zone offset in seconds"),T[0]=j),q&&((0,o.assertString)(U,"Time zone ID"),i.assertValidZoneId("Time zone ID",U),T[1]=U),T}function D(j,U){(0,o.assertValidDate)(j,"Standard date"),U!=null&&(0,o.assertNumberOrInteger)(U,"Nanosecond")}return ve}var Ne={},Vv;function gC(){if(Vv)return Ne;Vv=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.isPathSegment=Ne.PathSegment=Ne.isPath=Ne.Path=Ne.isUnboundRelationship=Ne.UnboundRelationship=Ne.isRelationship=Ne.Relationship=Ne.isNode=Ne.Node=void 0;var e=si(),t={value:!0,enumerable:!1,configurable:!1,writable:!1},r="__isNode__",n="__isRelationship__",i="__isUnboundRelationship__",o="__isPath__",a="__isPathSegment__";function u(h,v){return h!=null&&h[v]===!0}var s=(function(){function h(v,w,E,O){this.identity=v,this.labels=w,this.properties=E,this.elementId=g(O,function(){return v.toString()})}return h.prototype.toString=function(){for(var v="("+this.elementId,w=0;w<this.labels.length;w++)v+=":"+this.labels[w];var E=Object.keys(this.properties);if(E.length>0){v+=" {";for(var w=0;w<E.length;w++)w>0&&(v+=","),v+=E[w]+":"+(0,e.stringify)(this.properties[E[w]]);v+="}"}return v+=")",v},h})();Ne.Node=s,Object.defineProperty(s.prototype,r,t);function l(h){return u(h,r)}Ne.isNode=l;var d=(function(){function h(v,w,E,O,S,P,I,C){this.identity=v,this.start=w,this.end=E,this.type=O,this.properties=S,this.elementId=g(P,function(){return v.toString()}),this.startNodeElementId=g(I,function(){return w.toString()}),this.endNodeElementId=g(C,function(){return E.toString()})}return h.prototype.toString=function(){var v="("+this.startNodeElementId+")-[:"+this.type,w=Object.keys(this.properties);if(w.length>0){v+=" {";for(var E=0;E<w.length;E++)E>0&&(v+=","),v+=w[E]+":"+(0,e.stringify)(this.properties[w[E]]);v+="}"}return v+="]->("+this.endNodeElementId+")",v},h})();Ne.Relationship=d,Object.defineProperty(d.prototype,n,t);function c(h){return u(h,n)}Ne.isRelationship=c;var p=(function(){function h(v,w,E,O){this.identity=v,this.type=w,this.properties=E,this.elementId=g(O,function(){return v.toString()})}return h.prototype.bind=function(v,w){return new d(this.identity,v,w,this.type,this.properties,this.elementId)},h.prototype.bindTo=function(v,w){return new d(this.identity,v.identity,w.identity,this.type,this.properties,this.elementId,v.elementId,w.elementId)},h.prototype.toString=function(){var v="-[:"+this.type,w=Object.keys(this.properties);if(w.length>0){v+=" {";for(var E=0;E<w.length;E++)E>0&&(v+=","),v+=w[E]+":"+(0,e.stringify)(this.properties[w[E]]);v+="}"}return v+="]->",v},h})();Ne.UnboundRelationship=p,Object.defineProperty(p.prototype,i,t);function b(h){return u(h,i)}Ne.isUnboundRelationship=b;var m=(function(){function h(v,w,E){this.start=v,this.relationship=w,this.end=E}return h})();Ne.PathSegment=m,Object.defineProperty(m.prototype,a,t);function _(h){return u(h,a)}Ne.isPathSegment=_;var f=(function(){function h(v,w,E){this.start=v,this.end=w,this.segments=E,this.length=E.length}return h})();Ne.Path=f,Object.defineProperty(f.prototype,o,t);function y(h){return u(h,o)}Ne.isPath=y;function g(h,v){return h??v()}return Ne}var er={},$v;function wC(){if($v)return er;$v=1;var e=er&&er.__generator||function(a,u){var s={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},l,d,c,p;return p={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function b(_){return function(f){return m([_,f])}}function m(_){if(l)throw new TypeError("Generator is already executing.");for(;p&&(p=0,_[0]&&(s=0)),s;)try{if(l=1,d&&(c=_[0]&2?d.return:_[0]?d.throw||((c=d.return)&&c.call(d),0):d.next)&&!(c=c.call(d,_[1])).done)return c;switch(d=0,c&&(_=[_[0]&2,c.value]),_[0]){case 0:case 1:c=_;break;case 4:return s.label++,{value:_[1],done:!1};case 5:s.label++,d=_[1],_=[0];continue;case 7:_=s.ops.pop(),s.trys.pop();continue;default:if(c=s.trys,!(c=c.length>0&&c[c.length-1])&&(_[0]===6||_[0]===2)){s=0;continue}if(_[0]===3&&(!c||_[1]>c[0]&&_[1]<c[3])){s.label=_[1];break}if(_[0]===6&&s.label<c[1]){s.label=c[1],c=_;break}if(c&&s.label<c[2]){s.label=c[2],s.ops.push(_);break}c[2]&&s.ops.pop(),s.trys.pop();continue}_=u.call(a,s)}catch(f){_=[6,f],d=0}finally{l=c=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},t=er&&er.__values||function(a){var u=typeof Symbol=="function"&&Symbol.iterator,s=u&&a[u],l=0;if(s)return s.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&l>=a.length&&(a=void 0),{value:a&&a[l++],done:!a}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},r=er&&er.__read||function(a,u){var s=typeof Symbol=="function"&&a[Symbol.iterator];if(!s)return a;var l=s.call(a),d,c=[],p;try{for(;(u===void 0||u-- >0)&&!(d=l.next()).done;)c.push(d.value)}catch(b){p={error:b}}finally{try{d&&!d.done&&(s=l.return)&&s.call(l)}finally{if(p)throw p.error}}return c};Object.defineProperty(er,"__esModule",{value:!0});var n=it();function i(a){var u={};return a.forEach(function(s,l){u[s]=l}),u}var o=(function(){function a(u,s,l){this.keys=u,this.length=u.length,this._fields=s,this._fieldLookup=l??i(u)}return a.prototype.forEach=function(u){var s,l;try{for(var d=t(this.entries()),c=d.next();!c.done;c=d.next()){var p=r(c.value,2),b=p[0],m=p[1];u(m,b,this)}}catch(_){s={error:_}}finally{try{c&&!c.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}},a.prototype.map=function(u){var s,l,d=[];try{for(var c=t(this.entries()),p=c.next();!p.done;p=c.next()){var b=r(p.value,2),m=b[0],_=b[1];d.push(u(_,m,this))}}catch(f){s={error:f}}finally{try{p&&!p.done&&(l=c.return)&&l.call(c)}finally{if(s)throw s.error}}return d},a.prototype.entries=function(){var u;return e(this,function(s){switch(s.label){case 0:u=0,s.label=1;case 1:return u<this.keys.length?[4,[this.keys[u],this._fields[u]]]:[3,4];case 2:s.sent(),s.label=3;case 3:return u++,[3,1];case 4:return[2]}})},a.prototype.values=function(){var u;return e(this,function(s){switch(s.label){case 0:u=0,s.label=1;case 1:return u<this.keys.length?[4,this._fields[u]]:[3,4];case 2:s.sent(),s.label=3;case 3:return u++,[3,1];case 4:return[2]}})},a.prototype[Symbol.iterator]=function(){var u;return e(this,function(s){switch(s.label){case 0:u=0,s.label=1;case 1:return u<this.keys.length?[4,this._fields[u]]:[3,4];case 2:s.sent(),s.label=3;case 3:return u++,[3,1];case 4:return[2]}})},a.prototype.toObject=function(){var u,s,l={};try{for(var d=t(this.entries()),c=d.next();!c.done;c=d.next()){var p=r(c.value,2),b=p[0],m=p[1];l[b]=m}}catch(_){u={error:_}}finally{try{c&&!c.done&&(s=d.return)&&s.call(d)}finally{if(u)throw u.error}}return l},a.prototype.get=function(u){var s;if(typeof u!="number"){if(s=this._fieldLookup[u],s===void 0)throw(0,n.newError)("This record has no field with key '".concat(u.toString(),"', available keys are: [")+this.keys.toString()+"].")}else s=u;if(s>this._fields.length-1||s<0)throw(0,n.newError)("This record has no field with index '"+s.toString()+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[s]},a.prototype.has=function(u){return typeof u=="number"?u>=0&&u<this._fields.length:this._fieldLookup[u]!==void 0},a})();return er.default=o,er}var mi={},Wv;function OC(){if(Wv)return mi;Wv=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.isPoint=mi.Point=void 0;var e=Lt(),t="__isPoint__",r=(function(){function o(a,u,s,l){this.srid=(0,e.assertNumberOrInteger)(a,"SRID"),this.x=(0,e.assertNumber)(u,"X coordinate"),this.y=(0,e.assertNumber)(s,"Y coordinate"),this.z=l==null?l:(0,e.assertNumber)(l,"Z coordinate"),Object.freeze(this)}return o.prototype.toString=function(){return this.z!=null&&!isNaN(this.z)?"Point{srid=".concat(n(this.srid),", x=").concat(n(this.x),", y=").concat(n(this.y),", z=").concat(n(this.z),"}"):"Point{srid=".concat(n(this.srid),", x=").concat(n(this.x),", y=").concat(n(this.y),"}")},o})();mi.Point=r;function n(o){return Number.isInteger(o)?o.toString()+".0":o.toString()}Object.defineProperty(r.prototype,t,{value:!0,enumerable:!1,configurable:!1,writable:!1});function i(o){var a=o;return o!=null&&a[t]===!0}return mi.isPoint=i,mi}var Ke={},fe={},gi={},Hv;function hh(){if(Hv)return gi;Hv=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.FailedObserver=gi.CompletedObserver=void 0;var e=(function(){function n(){}return n.prototype.subscribe=function(i){r(i,i.onKeys,[]),r(i,i.onCompleted,{})},n.prototype.cancel=function(){},n.prototype.pause=function(){},n.prototype.resume=function(){},n.prototype.prepareToHandleSingleResponse=function(){},n.prototype.markCompleted=function(){},n.prototype.onError=function(i){throw new Error("CompletedObserver not supposed to call onError",{cause:i})},n})();gi.CompletedObserver=e;var t=(function(){function n(i){var o=i.error,a=i.onError;this._error=o,this._beforeError=a,this._observers=[],this.onError(o)}return n.prototype.subscribe=function(i){r(i,i.onError,this._error),this._observers.push(i)},n.prototype.onError=function(i){r(this,this._beforeError,i),this._observers.forEach(function(o){return r(o,o.onError,i)})},n.prototype.cancel=function(){},n.prototype.pause=function(){},n.prototype.resume=function(){},n.prototype.markCompleted=function(){},n.prototype.prepareToHandleSingleResponse=function(){},n})();gi.FailedObserver=t;function r(n,i,o){i?.bind(n)(o)}return gi}var st={},zv;function Sc(){if(zv)return st;zv=1;var e=st&&st.__createBinding||(Object.create?(function(c,p,b,m){m===void 0&&(m=b);var _=Object.getOwnPropertyDescriptor(p,b);(!_||("get"in _?!p.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return p[b]}}),Object.defineProperty(c,m,_)}):(function(c,p,b,m){m===void 0&&(m=b),c[m]=p[b]})),t=st&&st.__setModuleDefault||(Object.create?(function(c,p){Object.defineProperty(c,"default",{enumerable:!0,value:p})}):function(c,p){c.default=p}),r=st&&st.__importStar||function(c){if(c&&c.__esModule)return c;var p={};if(c!=null)for(var b in c)b!=="default"&&Object.prototype.hasOwnProperty.call(c,b)&&e(p,c,b);return t(p,c),p},n=st&&st.__read||function(c,p){var b=typeof Symbol=="function"&&c[Symbol.iterator];if(!b)return c;var m=b.call(c),_,f=[],y;try{for(;(p===void 0||p-- >0)&&!(_=m.next()).done;)f.push(_.value)}catch(g){y={error:g}}finally{try{_&&!_.done&&(b=m.return)&&b.call(m)}finally{if(y)throw y.error}}return f},i=st&&st.__spreadArray||function(c,p,b){if(b||arguments.length===2)for(var m=0,_=p.length,f;m<_;m++)(f||!(m in p))&&(f||(f=Array.prototype.slice.call(p,0,m)),f[m]=p[m]);return c.concat(f||Array.prototype.slice.call(p))};Object.defineProperty(st,"__esModule",{value:!0}),st.Bookmarks=void 0;var o=r(Lt()),a="bookmarks",u=(function(){function c(p){this._values=l(p)}return c.empty=function(){return s},c.prototype.isEmpty=function(){return this._values.length===0},c.prototype.values=function(){return this._values},c.prototype[Symbol.iterator]=function(){return this._values[Symbol.iterator]()},c.prototype.asBeginTransactionParameters=function(){var p;return this.isEmpty()?{}:(p={},p[a]=this._values,p)},c})();st.Bookmarks=u;var s=new u(null);function l(c){if(c==null||c==="")return[];if(o.isString(c))return[c];if(Array.isArray(c)){for(var p=new Set,b=d(c),m=0;m<b.length;m++){var _=b[m];if(_!=null){if(!o.isString(_))throw new TypeError("Bookmark value should be a string, given: '".concat(_,"'"));p.add(_)}}return i([],n(p),!1)}throw new TypeError("Bookmarks should either be a string or a string array, given: '".concat(c,"'"))}function d(c){return c.reduce(function(p,b){return Array.isArray(b)?p.concat(d(b)):p.concat(b)},[])}return st}var ue={},Kv;function na(){if(Kv)return ue;Kv=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.TELEMETRY_APIS=ue.BOLT_PROTOCOL_V5_8=ue.BOLT_PROTOCOL_V5_7=ue.BOLT_PROTOCOL_V5_6=ue.BOLT_PROTOCOL_V5_5=ue.BOLT_PROTOCOL_V5_4=ue.BOLT_PROTOCOL_V5_3=ue.BOLT_PROTOCOL_V5_2=ue.BOLT_PROTOCOL_V5_1=ue.BOLT_PROTOCOL_V5_0=ue.BOLT_PROTOCOL_V4_4=ue.BOLT_PROTOCOL_V4_3=ue.BOLT_PROTOCOL_V4_2=ue.BOLT_PROTOCOL_V4_1=ue.BOLT_PROTOCOL_V4_0=ue.BOLT_PROTOCOL_V3=ue.BOLT_PROTOCOL_V2=ue.BOLT_PROTOCOL_V1=ue.DEFAULT_POOL_MAX_SIZE=ue.DEFAULT_POOL_ACQUISITION_TIMEOUT=ue.DEFAULT_CONNECTION_TIMEOUT_MILLIS=ue.ACCESS_MODE_WRITE=ue.ACCESS_MODE_READ=ue.FETCH_ALL=void 0;var e=-1;ue.FETCH_ALL=e;var t=60*1e3;ue.DEFAULT_POOL_ACQUISITION_TIMEOUT=t;var r=100;ue.DEFAULT_POOL_MAX_SIZE=r;var n=3e4;ue.DEFAULT_CONNECTION_TIMEOUT_MILLIS=n;var i="READ";ue.ACCESS_MODE_READ=i;var o="WRITE";ue.ACCESS_MODE_WRITE=o;var a=1;ue.BOLT_PROTOCOL_V1=a;var u=2;ue.BOLT_PROTOCOL_V2=u;var s=3;ue.BOLT_PROTOCOL_V3=s;var l=4;ue.BOLT_PROTOCOL_V4_0=l;var d=4.1;ue.BOLT_PROTOCOL_V4_1=d;var c=4.2;ue.BOLT_PROTOCOL_V4_2=c;var p=4.3;ue.BOLT_PROTOCOL_V4_3=p;var b=4.4;ue.BOLT_PROTOCOL_V4_4=b;var m=5;ue.BOLT_PROTOCOL_V5_0=m;var _=5.1;ue.BOLT_PROTOCOL_V5_1=_;var f=5.2;ue.BOLT_PROTOCOL_V5_2=f;var y=5.3;ue.BOLT_PROTOCOL_V5_3=y;var g=5.4;ue.BOLT_PROTOCOL_V5_4=g;var h=5.5;ue.BOLT_PROTOCOL_V5_5=h;var v=5.6;ue.BOLT_PROTOCOL_V5_6=v;var w=5.7;ue.BOLT_PROTOCOL_V5_7=w;var E=5.8;ue.BOLT_PROTOCOL_V5_8=E;var O={MANAGED_TRANSACTION:0,UNMANAGED_TRANSACTION:1,AUTO_COMMIT_TRANSACTION:2,EXECUTE_QUERY:3};return ue.TELEMETRY_APIS=O,ue}var Ge={},wi={},Gv;function Fl(){if(Gv)return wi;Gv=1;var e=wi&&wi.__extends||(function(){var _=function(f,y){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,h){g.__proto__=h}||function(g,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(g[v]=h[v])},_(f,y)};return function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");_(f,y);function g(){this.constructor=f}f.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}})(),t;Object.defineProperty(wi,"__esModule",{value:!0}),wi.Logger=void 0;var r=it(),n="error",i="warn",o="info",a="debug",u=o,s=(t={},t[n]=0,t[i]=1,t[o]=2,t[a]=3,t),l=(function(){function _(f,y){this._level=f,this._loggerFunction=y}return _.create=function(f){if(f?.logging!=null){var y=f.logging,g=b(y),h=m(y);return new _(g,h)}return this.noOp()},_.noOp=function(){return c},_.prototype.isErrorEnabled=function(){return p(this._level,n)},_.prototype.error=function(f){this.isErrorEnabled()&&this._loggerFunction(n,f)},_.prototype.isWarnEnabled=function(){return p(this._level,i)},_.prototype.warn=function(f){this.isWarnEnabled()&&this._loggerFunction(i,f)},_.prototype.isInfoEnabled=function(){return p(this._level,o)},_.prototype.info=function(f){this.isInfoEnabled()&&this._loggerFunction(o,f)},_.prototype.isDebugEnabled=function(){return p(this._level,a)},_.prototype.debug=function(f){this.isDebugEnabled()&&this._loggerFunction(a,f)},_})();wi.Logger=l;var d=(function(_){e(f,_);function f(){return _.call(this,o,function(y,g){})||this}return f.prototype.isErrorEnabled=function(){return!1},f.prototype.error=function(y){},f.prototype.isWarnEnabled=function(){return!1},f.prototype.warn=function(y){},f.prototype.isInfoEnabled=function(){return!1},f.prototype.info=function(y){},f.prototype.isDebugEnabled=function(){return!1},f.prototype.debug=function(y){},f})(l),c=new d;function p(_,f){return s[_]>=s[f]}function b(_){if(_?.level!=null){var f=_.level,y=s[f];if(y==null&&y!==0)throw(0,r.newError)("Illegal logging level: ".concat(f,". Supported levels are: ").concat(Object.keys(s).toString()));return f}return u}function m(_){var f,y;if(_?.logger!=null){var g=_.logger;if(g!=null&&typeof g=="function")return g}throw(0,r.newError)("Illegal logger function: ".concat((y=(f=_?.logger)===null||f===void 0?void 0:f.toString())!==null&&y!==void 0?y:"undefined"))}return wi}var Yv;function vh(){if(Yv)return Ge;Yv=1;var e=Ge&&Ge.__extends||(function(){var b=function(m,_){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,y){f.__proto__=y}||function(f,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(f[g]=y[g])},b(m,_)};return function(m,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");b(m,_);function f(){this.constructor=m}m.prototype=_===null?Object.create(_):(f.prototype=_.prototype,new f)}})(),t=Ge&&Ge.__awaiter||function(b,m,_,f){function y(g){return g instanceof _?g:new _(function(h){h(g)})}return new(_||(_=Promise))(function(g,h){function v(O){try{E(f.next(O))}catch(S){h(S)}}function w(O){try{E(f.throw(O))}catch(S){h(S)}}function E(O){O.done?g(O.value):y(O.value).then(v,w)}E((f=f.apply(b,m||[])).next())})},r=Ge&&Ge.__generator||function(b,m){var _={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},f,y,g,h;return h={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function v(E){return function(O){return w([E,O])}}function w(E){if(f)throw new TypeError("Generator is already executing.");for(;h&&(h=0,E[0]&&(_=0)),_;)try{if(f=1,y&&(g=E[0]&2?y.return:E[0]?y.throw||((g=y.return)&&g.call(y),0):y.next)&&!(g=g.call(y,E[1])).done)return g;switch(y=0,g&&(E=[E[0]&2,g.value]),E[0]){case 0:case 1:g=E;break;case 4:return _.label++,{value:E[1],done:!1};case 5:_.label++,y=E[1],E=[0];continue;case 7:E=_.ops.pop(),_.trys.pop();continue;default:if(g=_.trys,!(g=g.length>0&&g[g.length-1])&&(E[0]===6||E[0]===2)){_=0;continue}if(E[0]===3&&(!g||E[1]>g[0]&&E[1]<g[3])){_.label=E[1];break}if(E[0]===6&&_.label<g[1]){_.label=g[1],g=E;break}if(g&&_.label<g[2]){_.label=g[2],_.ops.push(E);break}g[2]&&_.ops.pop(),_.trys.pop();continue}E=m.call(b,_)}catch(O){E=[6,O],y=0}finally{f=g=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}};Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.EMPTY_CONNECTION_HOLDER=Ge.ReadOnlyConnectionHolder=Ge.ConnectionHolder=void 0;var n=it(),i=Lt(),o=na(),a=Sc(),u=Fl(),s=(function(){function b(m){var _=m.mode,f=m.database,y=f===void 0?"":f,g=m.bookmarks,h=m.connectionProvider,v=m.impersonatedUser,w=m.onDatabaseNameResolved,E=m.getConnectionAcquistionBookmarks,O=m.auth,S=m.log;this._mode=_??o.ACCESS_MODE_WRITE,this._closed=!1,this._database=y!=null?(0,i.assertString)(y,"database"):"",this._bookmarks=g??a.Bookmarks.empty(),this._connectionProvider=h,this._impersonatedUser=v,this._referenceCount=0,this._connectionPromise=Promise.resolve(null),this._onDatabaseNameResolved=w,this._auth=O,this._log=S,this._logError=this._logError.bind(this),this._getConnectionAcquistionBookmarks=E??(function(){return Promise.resolve(a.Bookmarks.empty())})}return b.prototype.mode=function(){return this._mode},b.prototype.database=function(){return this._database},b.prototype.setDatabase=function(m){this._database=m},b.prototype.bookmarks=function(){return this._bookmarks},b.prototype.connectionProvider=function(){return this._connectionProvider},b.prototype.referenceCount=function(){return this._referenceCount},b.prototype.initializeConnection=function(m){if(this._referenceCount===0&&this._connectionProvider!=null)this._connectionPromise=this._createConnectionPromise(this._connectionProvider,m);else return this._referenceCount++,!1;return this._referenceCount++,!0},b.prototype._createConnectionPromise=function(m,_){return t(this,void 0,void 0,function(){var f,y,g;return r(this,function(h){switch(h.label){case 0:return y=(f=m).acquireConnection,g={accessMode:this._mode,database:this._database},[4,this._getBookmarks()];case 1:return[4,y.apply(f,[(g.bookmarks=h.sent(),g.impersonatedUser=this._impersonatedUser,g.onDatabaseNameResolved=this._onDatabaseNameResolved,g.auth=this._auth,g.homeDb=_,g)])];case 2:return[2,h.sent()]}})})},b.prototype._getBookmarks=function(){return t(this,void 0,void 0,function(){return r(this,function(m){switch(m.label){case 0:return[4,this._getConnectionAcquistionBookmarks()];case 1:return[2,m.sent()]}})})},b.prototype.getConnection=function(){return this._connectionPromise},b.prototype.releaseConnection=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount--,this._referenceCount===0?this._releaseConnection():this._connectionPromise)},b.prototype.close=function(m){return this._closed=!0,this._referenceCount===0?this._connectionPromise:(this._referenceCount=0,this._releaseConnection(m))},b.prototype.log=function(){return this._log},b.prototype._releaseConnection=function(m){return this._connectionPromise=this._connectionPromise.then(function(_){return _!=null?_.isOpen()&&(_.hasOngoingObservableRequests()||m===!0)?_.resetAndFlush().catch(p).then(function(){return _.release().then(function(){return null})}):_.release().then(function(){return null}):Promise.resolve(null)}).catch(this._logError),this._connectionPromise},b.prototype._logError=function(m){return this._log.isWarnEnabled()&&this._log.warn("ConnectionHolder got an error while releasing the connection. Error ".concat(m,". Stacktrace: ").concat(m.stack)),null},b})();Ge.ConnectionHolder=s;var l=(function(b){e(m,b);function m(_){var f=b.call(this,{mode:_.mode(),database:_.database(),bookmarks:_.bookmarks(),getConnectionAcquistionBookmarks:_._getConnectionAcquistionBookmarks,connectionProvider:_.connectionProvider(),log:_.log()})||this;return f._connectionHolder=_,f}return m.prototype.initializeConnection=function(){return this._connectionHolder.referenceCount()!==0},m.prototype.getConnection=function(){return this._connectionHolder.getConnection()},m.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},m.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},m})(s);Ge.ReadOnlyConnectionHolder=l,Ge.default=l;var d=(function(b){e(m,b);function m(){return b.call(this,{log:u.Logger.create({})})||this}return m.prototype.mode=function(){},m.prototype.database=function(){},m.prototype.initializeConnection=function(){return!0},m.prototype.getConnection=function(){return t(this,void 0,void 0,function(){return r(this,function(_){switch(_.label){case 0:return[4,Promise.reject((0,n.newError)("This connection holder does not serve connections"))];case 1:return[2,_.sent()]}})})},m.prototype.releaseConnection=function(){return t(this,void 0,void 0,function(){return r(this,function(_){switch(_.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,_.sent()]}})})},m.prototype.close=function(){return t(this,void 0,void 0,function(){return r(this,function(_){switch(_.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,_.sent()]}})})},m})(s),c=new d;Ge.EMPTY_CONNECTION_HOLDER=c;function p(b){return null}return Ge}var qt={},Zv;function ph(){if(Zv)return qt;Zv=1;var e=qt&&qt.__createBinding||(Object.create?(function(p,b,m,_){_===void 0&&(_=m);var f=Object.getOwnPropertyDescriptor(b,m);(!f||("get"in f?!b.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return b[m]}}),Object.defineProperty(p,_,f)}):(function(p,b,m,_){_===void 0&&(_=m),p[_]=b[m]})),t=qt&&qt.__setModuleDefault||(Object.create?(function(p,b){Object.defineProperty(p,"default",{enumerable:!0,value:b})}):function(p,b){p.default=b}),r=qt&&qt.__importStar||function(p){if(p&&p.__esModule)return p;var b={};if(p!=null)for(var m in p)m!=="default"&&Object.prototype.hasOwnProperty.call(p,m)&&e(b,p,m);return t(b,p),b};Object.defineProperty(qt,"__esModule",{value:!0}),qt.TxConfig=void 0;var n=r(Lt()),i=it(),o=Ec(),a=(function(){function p(b,m){c(b),this.timeout=s(b,m),this.metadata=d(b)}return p.empty=function(){return u},p.prototype.isEmpty=function(){return Object.values(this).every(function(b){return b==null})},p})();qt.TxConfig=a;var u=new a({});function s(p,b){if(n.isObject(p)&&p.timeout!=null){n.assertNumberOrInteger(p.timeout,"Transaction timeout"),l(p)&&b?.isInfoEnabled()===!0&&b?.info("Transaction timeout expected to be an integer, got: ".concat(p.timeout,". The value will be rounded up."));var m=(0,o.int)(p.timeout,{ceilFloat:!0});if(m.isNegative())throw(0,i.newError)("Transaction timeout should not be negative");return m}return null}function l(p){return typeof p.timeout=="number"&&!Number.isInteger(p.timeout)}function d(p){if(n.isObject(p)&&p.metadata!=null){var b=p.metadata;if(n.assertObject(b,"config.metadata"),Object.keys(b).length!==0)return b}return null}function c(p){p!=null&&n.assertObject(p,"Transaction config")}return qt}var ct={},Xv;function Bw(){if(Xv)return ct;Xv=1;var e=ct&&ct.__assign||function(){return e=Object.assign||function(_){for(var f,y=1,g=arguments.length;y<g;y++){f=arguments[y];for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(_[h]=f[h])}return _},e.apply(this,arguments)},t=ct&&ct.__awaiter||function(_,f,y,g){function h(v){return v instanceof y?v:new y(function(w){w(v)})}return new(y||(y=Promise))(function(v,w){function E(P){try{S(g.next(P))}catch(I){w(I)}}function O(P){try{S(g.throw(P))}catch(I){w(I)}}function S(P){P.done?v(P.value):h(P.value).then(E,O)}S((g=g.apply(_,f||[])).next())})},r=ct&&ct.__generator||function(_,f){var y={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},g,h,v,w;return w={next:E(0),throw:E(1),return:E(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function E(S){return function(P){return O([S,P])}}function O(S){if(g)throw new TypeError("Generator is already executing.");for(;w&&(w=0,S[0]&&(y=0)),y;)try{if(g=1,h&&(v=S[0]&2?h.return:S[0]?h.throw||((v=h.return)&&v.call(h),0):h.next)&&!(v=v.call(h,S[1])).done)return v;switch(h=0,v&&(S=[S[0]&2,v.value]),S[0]){case 0:case 1:v=S;break;case 4:return y.label++,{value:S[1],done:!1};case 5:y.label++,h=S[1],S=[0];continue;case 7:S=y.ops.pop(),y.trys.pop();continue;default:if(v=y.trys,!(v=v.length>0&&v[v.length-1])&&(S[0]===6||S[0]===2)){y=0;continue}if(S[0]===3&&(!v||S[1]>v[0]&&S[1]<v[3])){y.label=S[1];break}if(S[0]===6&&y.label<v[1]){y.label=v[1],v=S;break}if(v&&y.label<v[2]){y.label=v[2],y.ops.push(S);break}v[2]&&y.ops.pop(),y.trys.pop();continue}S=f.call(_,y)}catch(P){S=[6,P],h=0}finally{g=v=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},n=ct&&ct.__read||function(_,f){var y=typeof Symbol=="function"&&_[Symbol.iterator];if(!y)return _;var g=y.call(_),h,v=[],w;try{for(;(f===void 0||f-- >0)&&!(h=g.next()).done;)v.push(h.value)}catch(E){w={error:E}}finally{try{h&&!h.done&&(y=g.return)&&y.call(g)}finally{if(w)throw w.error}}return v},i=ct&&ct.__spreadArray||function(_,f,y){if(y||arguments.length===2)for(var g=0,h=f.length,v;g<h;g++)(v||!(g in f))&&(v||(v=Array.prototype.slice.call(f,0,g)),v[g]=f[g]);return _.concat(v||Array.prototype.slice.call(f))};Object.defineProperty(ct,"__esModule",{value:!0}),ct.TransactionExecutor=void 0;var o=it(),a=na(),u=30*1e3,s=1e3,l=2,d=.2;function c(_,f){for(var y=[],g=2;g<arguments.length;g++)y[g-2]=arguments[g];return setTimeout.apply(void 0,i([_,f],n(y),!1))}function p(_){return clearTimeout(_)}var b=(function(){function _(f,y,g,h,v){v===void 0&&(v={setTimeout:c,clearTimeout:p}),this._maxRetryTimeMs=m(f,u),this._initialRetryDelayMs=m(y,s),this._multiplier=m(g,l),this._jitterFactor=m(h,d),this._setTimeout=v.setTimeout,this._clearTimeout=v.clearTimeout,this._inFlightTimeoutIds=[],this.pipelineBegin=!1,this.telemetryApi=a.TELEMETRY_APIS.MANAGED_TRANSACTION,this._verifyAfterConstruction()}return _.prototype.execute=function(f,y,g){var h=this,v={apiTransactionConfig:{api:this.telemetryApi,onTelemetrySuccess:function(){v.apiTransactionConfig=void 0}}};return new Promise(function(w,E){h._executeTransactionInsidePromise(f,y,w,E,g,v).catch(E)}).catch(function(w){var E=Date.now(),O=h._initialRetryDelayMs;return h._retryTransactionPromise(f,y,w,E,O,g,v)})},_.prototype.close=function(){var f=this;this._inFlightTimeoutIds.forEach(function(y){return f._clearTimeout(y)}),this._inFlightTimeoutIds=[]},_.prototype._retryTransactionPromise=function(f,y,g,h,v,w,E){var O=this,S=Date.now()-h;return S>this._maxRetryTimeMs||!(0,o.isRetriableError)(g)?Promise.reject(g):new Promise(function(P,I){var C=O._computeDelayWithJitter(v),R=O._setTimeout(function(){O._inFlightTimeoutIds=O._inFlightTimeoutIds.filter(function(A){return A!==R}),O._executeTransactionInsidePromise(f,y,P,I,w,E).catch(I)},C);O._inFlightTimeoutIds.push(R)}).catch(function(P){var I=v*O._multiplier;return O._retryTransactionPromise(f,y,P,h,I,w,E)})},_.prototype._executeTransactionInsidePromise=function(f,y,g,h,v,w){return t(this,void 0,void 0,function(){var E,O,S,P,I,C,R,A=this;return r(this,function(D){switch(D.label){case 0:return D.trys.push([0,4,,5]),O=f(w?.apiTransactionConfig!=null?e({},w?.apiTransactionConfig):void 0),this.pipelineBegin?(S=O,[3,3]):[3,1];case 1:return[4,O];case 2:S=D.sent(),D.label=3;case 3:return E=S,[3,5];case 4:return P=D.sent(),h(P),[2];case 5:return I=v??(function(j){return j}),C=I(E),R=this._safeExecuteTransactionWork(C,y),R.then(function(j){return A._handleTransactionWorkSuccess(j,E,g,h)}).catch(function(j){return A._handleTransactionWorkFailure(j,E,h)}),[2]}})})},_.prototype._safeExecuteTransactionWork=function(f,y){try{var g=y(f);return Promise.resolve(g)}catch(h){return Promise.reject(h)}},_.prototype._handleTransactionWorkSuccess=function(f,y,g,h){y.isOpen()?y.commit().then(function(){g(f)}).catch(function(v){h(v)}):g(f)},_.prototype._handleTransactionWorkFailure=function(f,y,g){y.isOpen()?y.rollback().catch(function(h){}).then(function(){return g(f)}).catch(g):g(f)},_.prototype._computeDelayWithJitter=function(f){var y=f*this._jitterFactor,g=f-y,h=f+y;return Math.random()*(h-g)+g},_.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,o.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs.toString());if(this._initialRetryDelayMs<0)throw(0,o.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs.toString());if(this._multiplier<1)throw(0,o.newError)("Multiplier should be >= 1.0: "+this._multiplier.toString());if(this._jitterFactor<0||this._jitterFactor>1)throw(0,o.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor.toFixed())},_})();ct.TransactionExecutor=b;function m(_,f){return _??f}return ct}var We={},Qv;function qw(){if(Qv)return We;Qv=1;var e=We&&We.__assign||function(){return e=Object.assign||function(E){for(var O,S=1,P=arguments.length;S<P;S++){O=arguments[S];for(var I in O)Object.prototype.hasOwnProperty.call(O,I)&&(E[I]=O[I])}return E},e.apply(this,arguments)},t=We&&We.__read||function(E,O){var S=typeof Symbol=="function"&&E[Symbol.iterator];if(!S)return E;var P=S.call(E),I,C=[],R;try{for(;(O===void 0||O-- >0)&&!(I=P.next()).done;)C.push(I.value)}catch(A){R={error:A}}finally{try{I&&!I.done&&(S=P.return)&&S.call(P)}finally{if(R)throw R.error}}return C};Object.defineProperty(We,"__esModule",{value:!0}),We.Url=We.formatIPv6Address=We.formatIPv4Address=We.defaultPortForScheme=We.parseDatabaseUrl=void 0;var r=Lt(),n=7687,i=7474,o=7473,a=(function(){function E(O,S,P,I,C){this.scheme=O,this.host=S,this.port=P,this.hostAndPort=I,this.query=C}return E})();We.Url=a;function u(E){var O;(0,r.assertString)(E,"URL");var S=l(E),P=w(S.url),I=S.schemeMissing?null:d(P.scheme),C=c(P.host),R=y(C),A=p(P.port,I),D="".concat(R,":").concat(A),j=b((O=P.query)!==null&&O!==void 0?O:s(P.resourceName),E);return new a(I,C,A,D,j)}We.parseDatabaseUrl=u;function s(E){if(typeof E!="string")return null;var O=t(E.split("?"),2),S=O[1];return S}function l(E){return E=E.trim(),E.includes("://")?{schemeMissing:!1,url:E}:{schemeMissing:!0,url:"none://".concat(E)}}function d(E){return E!=null?(E=E.trim(),E.charAt(E.length-1)===":"&&(E=E.substring(0,E.length-1)),E):null}function c(E,O){if(E==null)throw new Error("Unable to extract host from null or undefined URL");return E.trim()}function p(E,O){var S=typeof E=="string"?parseInt(E,10):E;return S!=null&&!isNaN(S)?S:v(O)}function b(E,O){var S=E!=null?m(E):null,P={};return S?.split("&").forEach(function(I){var C=I.split("=");if(C.length!==2)throw new Error("Invalid parameters: '".concat(C.toString(),"' in URL '").concat(O,"'."));var R=_(C[0],"key",O),A=_(C[1],"value",O);if(P[R]!==void 0)throw new Error("Duplicated query parameters with key '".concat(R,"' in URL '").concat(O,"'"));P[R]=A}),P}function m(E){return E=(E??"").trim(),E?.charAt(0)==="?"&&(E=E.substring(1,E.length)),E}function _(E,O,S){if(E=(E??"").trim(),E==="")throw new Error("Illegal empty ".concat(O," in URL query '").concat(S,"'"));return E}function f(E){var O=E.charAt(0)==="[",S=E.charAt(E.length-1)==="]";if(!O&&!S)return"[".concat(E,"]");if(O&&S)return E;throw new Error("Illegal IPv6 address ".concat(E))}function y(E){if(E===""||E==null)throw new Error("Illegal host ".concat(E));var O=E.includes(":");return O?f(E):E}function g(E,O){return"".concat(E,":").concat(O)}We.formatIPv4Address=g;function h(E,O){var S=f(E);return"".concat(S,":").concat(O)}We.formatIPv6Address=h;function v(E){return E==="http"?i:E==="https"?o:n}We.defaultPortForScheme=v;function w(E){function O(A,D){var j=A.indexOf(D);return j>=0?[A.substring(0,j),A[j],A.substring(j+1)]:[A,"",""]}function S(A,D){var j=A.lastIndexOf(D);return j>=0?[A.substring(0,j),A[j],A.substring(j+1)]:["","",A]}function P(A,D,j){var U=O(A,D),B=O(U[2],j);return[B[0],B[2]]}function I(A){var D={},j;j=S(A,"@"),j[1]==="@"&&(D.userInfo=decodeURIComponent(j[0]),A=j[2]);var U=t(P(A,"[","]"),2),B=U[0],q=U[1];return B!==""?(D.host=B,j=O(q,":")):(j=O(A,":"),D.host=j[0]),j[1]===":"&&(D.port=j[2]),D}var C={},R;return R=O(E,":"),R[1]===":"&&(C.scheme=decodeURIComponent(R[0]),E=R[2]),R=O(E,"#"),R[1]==="#"&&(C.fragment=decodeURIComponent(R[2]),E=R[0]),R=O(E,"?"),R[1]==="?"&&(C.query=R[2],E=R[0]),E.startsWith("//")?(R=O(E.substr(2),"/"),C=e(e({},C),I(R[0])),C.path=R[1]+R[2]):C.path=E,C}return We}var xt={},Jv;function xw(){if(Jv)return xt;Jv=1;var e=xt&&xt.__createBinding||(Object.create?(function(a,u,s,l){l===void 0&&(l=s);var d=Object.getOwnPropertyDescriptor(u,s);(!d||("get"in d?!u.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return u[s]}}),Object.defineProperty(a,l,d)}):(function(a,u,s,l){l===void 0&&(l=s),a[l]=u[s]})),t=xt&&xt.__setModuleDefault||(Object.create?(function(a,u){Object.defineProperty(a,"default",{enumerable:!0,value:u})}):function(a,u){a.default=u}),r=xt&&xt.__importStar||function(a){if(a&&a.__esModule)return a;var u={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(u,a,s);return t(u,a),u};Object.defineProperty(xt,"__esModule",{value:!0}),xt.ServerAddress=void 0;var n=Lt(),i=r(qw()),o=(function(){function a(u,s,l,d){this._host=(0,n.assertString)(u,"host"),this._resolved=s!=null?(0,n.assertString)(s,"resolved"):null,this._port=(0,n.assertNumber)(l,"port"),this._hostPort=d,this._stringValue=s!=null?"".concat(d,"(").concat(s,")"):"".concat(d)}return a.prototype.host=function(){return this._host},a.prototype.resolvedHost=function(){return this._resolved!=null?this._resolved:this._host},a.prototype.port=function(){return this._port},a.prototype.resolveWith=function(u){return new a(this._host,u,this._port,this._hostPort)},a.prototype.asHostPort=function(){return this._hostPort},a.prototype.asKey=function(){return this._hostPort},a.prototype.toString=function(){return this._stringValue},a.fromUrl=function(u){var s=i.parseDatabaseUrl(u);return new a(s.host,null,s.port,s.hostAndPort)},a})();return xt.ServerAddress=o,xt}var Dr={},$c={},ep;function EC(){if(ep)return $c;ep=1,Object.defineProperty($c,"__esModule",{value:!0});var e=(function(){function t(){}return t.prototype.resolve=function(){throw new Error("Abstract function")},t.prototype._resolveToItself=function(r){return Promise.resolve([r])},t})();return $c.default=e,$c}var Wc={},tp;function Fw(){if(tp)return Wc;tp=1,Object.defineProperty(Wc,"__esModule",{value:!0});var e=xw();function t(n){return Promise.resolve([n])}var r=(function(){function n(i){this._resolverFunction=i??t}return n.prototype.resolve=function(i){var o=this;return new Promise(function(a){return a(o._resolverFunction(i.asHostPort()))}).then(function(a){if(!Array.isArray(a))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(a));return a.map(function(u){return e.ServerAddress.fromUrl(u)})})},n})();return Wc.default=r,Wc}var rp;function SC(){if(rp)return Dr;rp=1;var e=Dr&&Dr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.ConfiguredCustomResolver=Dr.BaseHostNameResolver=void 0;var t=e(EC());Dr.BaseHostNameResolver=t.default;var r=e(Fw());return Dr.ConfiguredCustomResolver=r.default,Dr}var Oi={},la={},np;function PC(){if(np)return la;np=1,Object.defineProperty(la,"__esModule",{value:!0}),la.fromVersion=void 0;function e(t,r){r===void 0&&(r=function(){return{get userAgent(){var a;return a?.userAgent}}});var n=r(),i=n.userAgent!=null?n.userAgent.split("(")[1].split(")")[0]:void 0,o=n.userAgent||void 0;return{product:"neo4j-javascript/".concat(t),platform:i,languageDetails:o}}return la.fromVersion=e,la}var ip;function TC(){return ip||(ip=1,(function(e){var t=Oi&&Oi.__createBinding||(Object.create?(function(n,i,o,a){a===void 0&&(a=o);var u=Object.getOwnPropertyDescriptor(i,o);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(n,a,u)}):(function(n,i,o,a){a===void 0&&(a=o),n[a]=i[o]})),r=Oi&&Oi.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,n,o)};Object.defineProperty(e,"__esModule",{value:!0}),r(PC(),e)})(Oi)),Oi}var Ft={},pn={},op;function Vw(){if(op)return pn;op=1,Object.defineProperty(pn,"__esModule",{value:!0}),pn.DEFAULT_ACQUISITION_TIMEOUT=pn.DEFAULT_MAX_SIZE=void 0;var e=100;pn.DEFAULT_MAX_SIZE=e;var t=60*1e3;pn.DEFAULT_ACQUISITION_TIMEOUT=t;var r=(function(){function o(a,u){this.maxSize=n(a,e),this.acquisitionTimeout=n(u,t)}return o.defaultConfig=function(){return new o(e,t)},o.fromDriverConfig=function(a){var u=i(a.maxConnectionPoolSize)?a.maxConnectionPoolSize:e,s=i(a.connectionAcquisitionTimeout)?a.connectionAcquisitionTimeout:t;return new o(u,s)},o})();pn.default=r;function n(o,a){return i(o)?o:a}function i(o){return o===0||o!=null}return pn}var tr={},ap;function CC(){if(ap)return tr;ap=1;var e=tr&&tr.__awaiter||function(c,p,b,m){function _(f){return f instanceof b?f:new b(function(y){y(f)})}return new(b||(b=Promise))(function(f,y){function g(w){try{v(m.next(w))}catch(E){y(E)}}function h(w){try{v(m.throw(w))}catch(E){y(E)}}function v(w){w.done?f(w.value):_(w.value).then(g,h)}v((m=m.apply(c,p||[])).next())})},t=tr&&tr.__generator||function(c,p){var b={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},m,_,f,y;return y={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function g(v){return function(w){return h([v,w])}}function h(v){if(m)throw new TypeError("Generator is already executing.");for(;y&&(y=0,v[0]&&(b=0)),b;)try{if(m=1,_&&(f=v[0]&2?_.return:v[0]?_.throw||((f=_.return)&&f.call(_),0):_.next)&&!(f=f.call(_,v[1])).done)return f;switch(_=0,f&&(v=[v[0]&2,f.value]),v[0]){case 0:case 1:f=v;break;case 4:return b.label++,{value:v[1],done:!1};case 5:b.label++,_=v[1],v=[0];continue;case 7:v=b.ops.pop(),b.trys.pop();continue;default:if(f=b.trys,!(f=f.length>0&&f[f.length-1])&&(v[0]===6||v[0]===2)){b=0;continue}if(v[0]===3&&(!f||v[1]>f[0]&&v[1]<f[3])){b.label=v[1];break}if(v[0]===6&&b.label<f[1]){b.label=f[1],f=v;break}if(f&&b.label<f[2]){b.label=f[2],b.ops.push(v);break}f[2]&&b.ops.pop(),b.trys.pop();continue}v=p.call(c,b)}catch(w){v=[6,w],_=0}finally{m=f=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},r=tr&&tr.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(tr,"__esModule",{value:!0});var n=r(Vw()),i=it(),o=Fl(),a=(function(){function c(p){var b=p.create,m=b===void 0?function(D,j,U){return e(A,void 0,void 0,function(){return t(this,function(B){switch(B.label){case 0:return[4,Promise.reject(new Error("Not implemented"))];case 1:return[2,B.sent()]}})})}:b,_=p.destroy,f=_===void 0?function(D){return e(A,void 0,void 0,function(){return t(this,function(j){switch(j.label){case 0:return[4,Promise.resolve()];case 1:return[2,j.sent()]}})})}:_,y=p.validateOnAcquire,g=y===void 0?function(D,j){return!0}:y,h=p.validateOnRelease,v=h===void 0?function(D){return!0}:h,w=p.installIdleObserver,E=w===void 0?function(D,j){}:w,O=p.removeIdleObserver,S=O===void 0?function(D){}:O,P=p.config,I=P===void 0?n.default.defaultConfig():P,C=p.log,R=C===void 0?o.Logger.noOp():C,A=this;this._create=m,this._destroy=f,this._validateOnAcquire=g,this._validateOnRelease=v,this._installIdleObserver=E,this._removeIdleObserver=S,this._maxSize=I.maxSize,this._acquisitionTimeout=I.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=R,this._closed=!1}return c.prototype.acquire=function(p,b,m){return e(this,void 0,void 0,function(){var _,f,y,g=this;return t(this,function(h){switch(h.label){case 0:return _=b.asKey(),f=this._acquireRequests,y=f[_],y==null&&(f[_]=[]),[4,new Promise(function(v,w){var E=setTimeout(function(){var S=f[_];if(S!=null&&(f[_]=S.filter(function(C){return C!==O})),!O.isCompleted()){var P=g.activeResourceCount(b),I=g.has(b)?g._pools[_].length:0;O.reject((0,i.newError)("Connection acquisition timed out in ".concat(g._acquisitionTimeout," ms. Pool status: Active conn count = ").concat(P,", Idle conn count = ").concat(I,".")))}},g._acquisitionTimeout);typeof E=="object"&&E.unref();var O=new l(_,p,m,v,w,E,g._log);f[_].push(O),g._processPendingAcquireRequests(b)})];case 1:return[2,h.sent()]}})})},c.prototype.purge=function(p){return e(this,void 0,void 0,function(){return t(this,function(b){switch(b.label){case 0:return[4,this._purgeKey(p.asKey())];case 1:return[2,b.sent()]}})})},c.prototype.apply=function(p,b){var m=p.asKey();m in this._pools&&this._pools[m].apply(b)},c.prototype.close=function(){return e(this,void 0,void 0,function(){var p=this;return t(this,function(b){switch(b.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(m){return e(p,void 0,void 0,function(){return t(this,function(_){switch(_.label){case 0:return[4,this._purgeKey(m)];case 1:return[2,_.sent()]}})})})).then()];case 1:return[2,b.sent()]}})})},c.prototype.keepAll=function(p){return e(this,void 0,void 0,function(){var b,m,_,f=this;return t(this,function(y){switch(y.label){case 0:return b=p.map(function(g){return g.asKey()}),m=Object.keys(this._pools),_=m.filter(function(g){return!b.includes(g)}),[4,Promise.all(_.map(function(g){return e(f,void 0,void 0,function(){return t(this,function(h){switch(h.label){case 0:return[4,this._purgeKey(g)];case 1:return[2,h.sent()]}})})})).then()];case 1:return[2,y.sent()]}})})},c.prototype.has=function(p){return p.asKey()in this._pools},c.prototype.activeResourceCount=function(p){var b;return(b=this._activeResourceCounts[p.asKey()])!==null&&b!==void 0?b:0},c.prototype._getOrInitializePoolFor=function(p){var b=this._pools[p];return b==null&&(b=new d,this._pools[p]=b,this._pendingCreates[p]=0),b},c.prototype._acquire=function(p,b,m){return e(this,void 0,void 0,function(){var _,f,y,g,h,w,v,w,E,O=this;return t(this,function(S){switch(S.label){case 0:if(this._closed)throw(0,i.newError)("Pool is closed, it is no more able to serve requests.");if(_=b.asKey(),f=this._getOrInitializePoolFor(_),m)return[3,10];S.label=1;case 1:if(!(f.length>0))return[3,10];if(y=f.pop(),y==null)return[3,1];u(_,this._activeResourceCounts),this._removeIdleObserver!=null&&this._removeIdleObserver(y),g=!1,S.label=2;case 2:return S.trys.push([2,4,,6]),[4,this._validateOnAcquire(p,y)];case 3:return g=S.sent(),[3,6];case 4:return h=S.sent(),s(_,this._activeResourceCounts),f.removeInUse(y),[4,this._destroy(y)];case 5:throw S.sent(),h;case 6:return g?(this._log.isDebugEnabled()&&this._log.debug("".concat(y," acquired from the pool ").concat(_)),[2,{resource:y,pool:f}]):[3,7];case 7:return s(_,this._activeResourceCounts),f.removeInUse(y),[4,this._destroy(y)];case 8:S.sent(),S.label=9;case 9:return[3,1];case 10:if(this._maxSize>0&&(w=this.activeResourceCount(b)+this._pendingCreates[_],w>=this._maxSize))return[2,{resource:null,pool:f}];this._pendingCreates[_]=this._pendingCreates[_]+1,S.label=11;case 11:return S.trys.push([11,,15,16]),w=this.activeResourceCount(b)+f.length,w>=this._maxSize&&m?(E=f.pop(),E==null?[3,13]:(this._removeIdleObserver!=null&&this._removeIdleObserver(E),f.removeInUse(E),[4,this._destroy(E)])):[3,13];case 12:S.sent(),S.label=13;case 13:return[4,this._create(p,b,function(P,I){return e(O,void 0,void 0,function(){return t(this,function(C){switch(C.label){case 0:return[4,this._release(P,I,f)];case 1:return[2,C.sent()]}})})})];case 14:return v=S.sent(),f.pushInUse(v),u(_,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(v," created for the pool ").concat(_)),[3,16];case 15:return this._pendingCreates[_]=this._pendingCreates[_]-1,[7];case 16:return[2,{resource:v,pool:f}]}})})},c.prototype._release=function(p,b,m){return e(this,void 0,void 0,function(){var _,f=this;return t(this,function(y){switch(y.label){case 0:_=p.asKey(),y.label=1;case 1:return y.trys.push([1,,9,10]),m.isActive()?[4,this._validateOnRelease(b)]:[3,6];case 2:return y.sent()?[3,4]:(this._log.isDebugEnabled()&&this._log.debug("".concat(b," destroyed and can't be released to the pool ").concat(_," because it is not functional")),m.removeInUse(b),[4,this._destroy(b)]);case 3:return y.sent(),[3,5];case 4:this._installIdleObserver!=null&&this._installIdleObserver(b,{onError:function(g){f._log.debug("Idle connection ".concat(b," destroyed because of error: ").concat(g));var h=f._pools[_];h!=null&&(f._pools[_]=h.filter(function(v){return v!==b}),h.removeInUse(b)),f._destroy(b).catch(function(){})}}),m.push(b),this._log.isDebugEnabled()&&this._log.debug("".concat(b," released to the pool ").concat(_)),y.label=5;case 5:return[3,8];case 6:return this._log.isDebugEnabled()&&this._log.debug("".concat(b," destroyed and can't be released to the pool ").concat(_," because pool has been purged")),m.removeInUse(b),[4,this._destroy(b)];case 7:y.sent(),y.label=8;case 8:return[3,10];case 9:return s(_,this._activeResourceCounts),this._processPendingAcquireRequests(p),[7];case 10:return[2]}})})},c.prototype._purgeKey=function(p){return e(this,void 0,void 0,function(){var b,m,_;return t(this,function(f){switch(f.label){case 0:if(b=this._pools[p],m=[],b==null)return[3,2];for(;b.length>0;)_=b.pop(),_!=null&&(this._removeIdleObserver!=null&&this._removeIdleObserver(_),m.push(this._destroy(_)));return b.close(),delete this._pools[p],[4,Promise.all(m)];case 1:f.sent(),f.label=2;case 2:return[2]}})})},c.prototype._processPendingAcquireRequests=function(p){var b=this,m=p.asKey(),_=this._acquireRequests[m];if(_!=null){var f=_.shift();f!=null?this._acquire(f.context,p,f.requireNew).catch(function(y){return f.reject(y),{resource:null,pool:null}}).then(function(y){var g=y.resource,h=y.pool;g!=null&&h!=null?f.isCompleted()?b._release(p,g,h).catch(function(v){b._log.isDebugEnabled()&&b._log.debug("".concat(g," could not be release back to the pool. Cause: ").concat(v))}):f.resolve(g):f.isCompleted()||(b._acquireRequests[m]==null&&(b._acquireRequests[m]=[]),b._acquireRequests[m].unshift(f))}).catch(function(y){return f.reject(y)}):delete this._acquireRequests[m]}},c})();function u(c,p){var b,m=(b=p[c])!==null&&b!==void 0?b:0;p[c]=m+1}function s(c,p){var b,m=(b=p[c])!==null&&b!==void 0?b:0,_=m-1;_>0?p[c]=_:delete p[c]}var l=(function(){function c(p,b,m,_,f,y,g){this._key=p,this._context=b,this._resolve=_,this._reject=f,this._timeoutId=y,this._log=g,this._completed=!1,this._config=m??{}}return Object.defineProperty(c.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"requireNew",{get:function(){var p;return(p=this._config.requireNew)!==null&&p!==void 0?p:!1},enumerable:!1,configurable:!0}),c.prototype.isCompleted=function(){return this._completed},c.prototype.resolve=function(p){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(p," acquired from the pool ").concat(this._key)),this._resolve(p))},c.prototype.reject=function(p){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(p))},c})(),d=(function(){function c(){this._active=!0,this._elements=[],this._elementsInUse=new Set}return c.prototype.isActive=function(){return this._active},c.prototype.close=function(){this._active=!1,this._elements=[],this._elementsInUse=new Set},c.prototype.filter=function(p){return this._elements=this._elements.filter(p),this},c.prototype.apply=function(p){this._elements.forEach(p),this._elementsInUse.forEach(p)},Object.defineProperty(c.prototype,"length",{get:function(){return this._elements.length},enumerable:!1,configurable:!0}),c.prototype.pop=function(){var p=this._elements.pop();return p!=null&&this._elementsInUse.add(p),p},c.prototype.push=function(p){return this._elementsInUse.delete(p),this._elements.push(p)},c.prototype.pushInUse=function(p){this._elementsInUse.add(p)},c.prototype.removeInUse=function(p){this._elementsInUse.delete(p)},c})();return tr.default=a,tr}var up;function RC(){return up||(up=1,(function(e){var t=Ft&&Ft.__createBinding||(Object.create?(function(u,s,l,d){d===void 0&&(d=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(u,d,c)}):(function(u,s,l,d){d===void 0&&(d=l),u[d]=s[l]})),r=Ft&&Ft.__setModuleDefault||(Object.create?(function(u,s){Object.defineProperty(u,"default",{enumerable:!0,value:s})}):function(u,s){u.default=s}),n=Ft&&Ft.__importStar||function(u){if(u&&u.__esModule)return u;var s={};if(u!=null)for(var l in u)l!=="default"&&Object.prototype.hasOwnProperty.call(u,l)&&t(s,u,l);return r(s,u),s},i=Ft&&Ft.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_MAX_SIZE=e.DEFAULT_ACQUISITION_TIMEOUT=e.PoolConfig=e.Pool=void 0;var o=n(Vw());e.PoolConfig=o.default,Object.defineProperty(e,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return o.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(e,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return o.DEFAULT_MAX_SIZE}});var a=i(CC());e.Pool=a.default,e.default=a.default})(Ft)),Ft}var sp;function Pc(){if(sp)return fe;sp=1;var e=fe&&fe.__createBinding||(Object.create?(function(g,h,v,w){w===void 0&&(w=v);var E=Object.getOwnPropertyDescriptor(h,v);(!E||("get"in E?!h.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return h[v]}}),Object.defineProperty(g,w,E)}):(function(g,h,v,w){w===void 0&&(w=v),g[w]=h[v]})),t=fe&&fe.__setModuleDefault||(Object.create?(function(g,h){Object.defineProperty(g,"default",{enumerable:!0,value:h})}):function(g,h){g.default=h}),r=fe&&fe.__importStar||function(g){if(g&&g.__esModule)return g;var h={};if(g!=null)for(var v in g)v!=="default"&&Object.prototype.hasOwnProperty.call(g,v)&&e(h,g,v);return t(h,g),h};Object.defineProperty(fe,"__esModule",{value:!0}),fe.pool=fe.boltAgent=fe.objectUtil=fe.resolver=fe.serverAddress=fe.urlUtil=fe.logger=fe.transactionExecutor=fe.txConfig=fe.connectionHolder=fe.constants=fe.bookmarks=fe.observer=fe.temporalUtil=fe.util=void 0;var n=r(Lt());fe.util=n;var i=r(Uw());fe.temporalUtil=i;var o=r(hh());fe.observer=o;var a=r(Sc());fe.bookmarks=a;var u=r(na());fe.constants=u;var s=r(vh());fe.connectionHolder=s;var l=r(ph());fe.txConfig=l;var d=r(Bw());fe.transactionExecutor=d;var c=r(Fl());fe.logger=c;var p=r(qw());fe.urlUtil=p;var b=r(xw());fe.serverAddress=b;var m=r(SC());fe.resolver=m;var _=r(Dw());fe.objectUtil=_;var f=r(TC());fe.boltAgent=f;var y=r(RC());return fe.pool=y,fe}var pe={},cp;function $w(){if(cp)return pe;cp=1;var e=pe&&pe.__assign||function(){return e=Object.assign||function(C){for(var R,A=1,D=arguments.length;A<D;A++){R=arguments[A];for(var j in R)Object.prototype.hasOwnProperty.call(R,j)&&(C[j]=R[j])}return C},e.apply(this,arguments)},t=pe&&pe.__createBinding||(Object.create?(function(C,R,A,D){D===void 0&&(D=A);var j=Object.getOwnPropertyDescriptor(R,A);(!j||("get"in j?!R.__esModule:j.writable||j.configurable))&&(j={enumerable:!0,get:function(){return R[A]}}),Object.defineProperty(C,D,j)}):(function(C,R,A,D){D===void 0&&(D=A),C[D]=R[A]})),r=pe&&pe.__setModuleDefault||(Object.create?(function(C,R){Object.defineProperty(C,"default",{enumerable:!0,value:R})}):function(C,R){C.default=R}),n=pe&&pe.__importStar||function(C){if(C&&C.__esModule)return C;var R={};if(C!=null)for(var A in C)A!=="default"&&Object.prototype.hasOwnProperty.call(C,A)&&t(R,C,A);return r(R,C),R},i=pe&&pe.__read||function(C,R){var A=typeof Symbol=="function"&&C[Symbol.iterator];if(!A)return C;var D=A.call(C),j,U=[],B;try{for(;(R===void 0||R-- >0)&&!(j=D.next()).done;)U.push(j.value)}catch(q){B={error:q}}finally{try{j&&!j.done&&(A=D.return)&&A.call(D)}finally{if(B)throw B.error}}return U},o=pe&&pe.__spreadArray||function(C,R,A){if(A||arguments.length===2)for(var D=0,j=R.length,U;D<j;D++)(U||!(D in R))&&(U||(U=Array.prototype.slice.call(R,0,D)),U[D]=R[D]);return C.concat(U||Array.prototype.slice.call(R))};Object.defineProperty(pe,"__esModule",{value:!0}),pe.buildNotificationsFromMetadata=pe.buildGqlStatusObjectFromMetadata=pe.polyfillNotification=pe.polyfillGqlStatusObject=pe.GqlStatusObject=pe.Notification=pe.notificationClassification=pe.notificationCategory=pe.notificationSeverityLevel=void 0;var a=n(si()),u=Pc(),s=Lw(),l={WARNING:{gql_status:"01N42",status_description:"warn: unknown warning"},NO_DATA:{gql_status:"02N42",status_description:"note: no data - unknown subcondition"},INFORMATION:{gql_status:"03N42",status_description:"info: unknown notification"}},d={WARNING:"WARNING",INFORMATION:"INFORMATION",UNKNOWN:"UNKNOWN"};pe.notificationSeverityLevel=d,Object.freeze(d);var c=Object.values(d),p={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",DEPRECATION:"DEPRECATION",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",GENERIC:"GENERIC",SCHEMA:"SCHEMA",UNKNOWN:"UNKNOWN"};pe.notificationCategory=p,Object.freeze(p);var b=Object.values(p),m=p;pe.notificationClassification=m;var _=(function(){function C(R){this.code=R.code,this.title=R.title,this.description=R.description,this.severity=R.severity,this.position=S(R.position),this.severityLevel=P(R.severity),this.rawSeverityLevel=R.severity,this.category=I(R.category),this.rawCategory=R.category}return C})();pe.Notification=_;var f=(function(){function C(R){var A;this.gqlStatus=R.gql_status,this.statusDescription=R.status_description,this.diagnosticRecord=(A=R.diagnostic_record)!==null&&A!==void 0?A:{},this.position=this.diagnosticRecord._position!=null?S(this.diagnosticRecord._position):void 0,this.severity=P(this.diagnosticRecord._severity),this.rawSeverity=this.diagnosticRecord._severity,this.classification=I(this.diagnosticRecord._classification),this.rawClassification=this.diagnosticRecord._classification,this.isNotification=R.neo4j_code!=null,Object.freeze(this)}return Object.defineProperty(C.prototype,"diagnosticRecordAsJsonString",{get:function(){return a.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),C})();pe.GqlStatusObject=f;function y(C){var R,A,D;if(C.neo4j_code!=null)return new _({code:C.neo4j_code,title:C.title,description:C.description,severity:(R=C.diagnostic_record)===null||R===void 0?void 0:R._severity,category:(A=C.diagnostic_record)===null||A===void 0?void 0:A._classification,position:(D=C.diagnostic_record)===null||D===void 0?void 0:D._position})}pe.polyfillNotification=y;function g(C){var R,A=C.severity===d.WARNING?l.WARNING:l.INFORMATION,D={gql_status:A.gql_status,status_description:(R=C.description)!==null&&R!==void 0?R:A.status_description,neo4j_code:C.code,title:C.title,diagnostic_record:e({},s.rawPolyfilledDiagnosticRecord)};return C.severity!=null&&(D.diagnostic_record._severity=C.severity),C.category!=null&&(D.diagnostic_record._classification=C.category),C.position!=null&&(D.diagnostic_record._position=C.position),new f(D)}pe.polyfillGqlStatusObject=g;var h={SUCCESS:new f({gql_status:"00000",status_description:"note: successful completion",diagnostic_record:s.rawPolyfilledDiagnosticRecord}),NO_DATA:new f({gql_status:"02000",status_description:"note: no data",diagnostic_record:s.rawPolyfilledDiagnosticRecord}),NO_DATA_UNKNOWN_SUBCONDITION:new f(e(e({},l.NO_DATA),{diagnostic_record:s.rawPolyfilledDiagnosticRecord})),OMITTED_RESULT:new f({gql_status:"00001",status_description:"note: successful completion - omitted result",diagnostic_record:s.rawPolyfilledDiagnosticRecord})};Object.freeze(h);function v(C){var R,A;function D(B){return B?.have_records_streamed===!0?h.SUCCESS:B?.has_keys===!1?h.OMITTED_RESULT:B?.pulled===!0?h.NO_DATA:h.NO_DATA_UNKNOWN_SUBCONDITION}if(C.statuses!=null)return C.statuses.map(function(B){return new f(B)});var j=D(C.stream_summary),U=o([j],i((A=(R=C.notifications)===null||R===void 0?void 0:R.map(g))!==null&&A!==void 0?A:[]),!1);return U.sort(function(B,q){return E(B)-E(q)})}pe.buildGqlStatusObjectFromMetadata=v;var w=Object.freeze({"02":0,"01":1,"00":2});function E(C){var R,A,D=(R=C.gqlStatus)===null||R===void 0?void 0:R.slice(0,2);return(A=w[D])!==null&&A!==void 0?A:9999}function O(C){return C.notifications!=null?C.notifications.map(function(R){return new _(R)}):C.statuses!=null?C.statuses.map(y).filter(function(R){return R!=null}):[]}pe.buildNotificationsFromMetadata=O;function S(C){return C==null?{}:{offset:u.util.toNumber(C.offset),line:u.util.toNumber(C.line),column:u.util.toNumber(C.column)}}function P(C){return c.includes(C)?C:d.UNKNOWN}function I(C){return b.includes(C)?C:m.UNKNOWN}return pe.default=_,pe}var lp;function Ww(){if(lp)return Ke;lp=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.Stats=Ke.QueryStatistics=Ke.ProfiledPlan=Ke.Plan=Ke.ServerInfo=Ke.queryType=void 0;var e=Pc(),t=$w(),r=(function(){function d(c,p,b,m){var _,f,y;this.query={text:c,parameters:p},this.queryType=b.type,this.counters=new a((_=b.stats)!==null&&_!==void 0?_:{}),this.updateStatistics=this.counters,this.plan=b.plan!=null||b.profile!=null?new n((f=b.plan)!==null&&f!==void 0?f:b.profile):!1,this.profile=b.profile!=null?new i(b.profile):!1,this.notifications=(0,t.buildNotificationsFromMetadata)(b),this.gqlStatusObjects=(0,t.buildGqlStatusObjectFromMetadata)(b),this.server=new u(b.server,m),this.resultConsumedAfter=b.result_consumed_after,this.resultAvailableAfter=b.result_available_after,this.database={name:(y=b.db)!==null&&y!==void 0?y:null}}return d.prototype.hasPlan=function(){return this.plan instanceof n},d.prototype.hasProfile=function(){return this.profile instanceof i},d})(),n=(function(){function d(c){this.operatorType=c.operatorType,this.identifiers=c.identifiers,this.arguments=c.args,this.children=c.children!=null?c.children.map(function(p){return new d(p)}):[]}return d})();Ke.Plan=n;var i=(function(){function d(c){this.operatorType=c.operatorType,this.identifiers=c.identifiers,this.arguments=c.args,this.dbHits=s("dbHits",c),this.rows=s("rows",c),this.pageCacheMisses=s("pageCacheMisses",c),this.pageCacheHits=s("pageCacheHits",c),this.pageCacheHitRatio=s("pageCacheHitRatio",c),this.time=s("time",c),this.children=c.children!=null?c.children.map(function(p){return new d(p)}):[]}return d.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},d})();Ke.ProfiledPlan=i;var o=(function(){function d(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0}return d})();Ke.Stats=o;var a=(function(){function d(c){var p=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(c).forEach(function(b){var m=b.replace(/(-\w)/g,function(_){return _[1].toUpperCase()});m in p._stats?p._stats[m]=e.util.toNumber(c[b]):m==="systemUpdates"?p._systemUpdates=e.util.toNumber(c[b]):m==="containsSystemUpdates"?p._containsSystemUpdates=c[b]:m==="containsUpdates"&&(p._containsUpdates=c[b])}),this._stats=Object.freeze(this._stats)}return d.prototype.containsUpdates=function(){var c=this;return this._containsUpdates!==void 0?this._containsUpdates:Object.keys(this._stats).reduce(function(p,b){return p+c._stats[b]},0)>0},d.prototype.updates=function(){return this._stats},d.prototype.containsSystemUpdates=function(){return this._containsSystemUpdates!==void 0?this._containsSystemUpdates:this._systemUpdates>0},d.prototype.systemUpdates=function(){return this._systemUpdates},d})();Ke.QueryStatistics=a;var u=(function(){function d(c,p){c!=null&&(this.address=c.address,this.agent=c.version),this.protocolVersion=p}return d})();Ke.ServerInfo=u;function s(d,c,p){if(p===void 0&&(p=0),c!==!1&&d in c){var b=c[d];return e.util.toNumber(b)}else return p}var l={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"};return Ke.queryType=l,Ke.default=r,Ke}var rr={},fp;function AC(){if(fp)return rr;fp=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.notificationFilterDisabledClassification=rr.notificationFilterDisabledCategory=rr.notificationFilterMinimumSeverityLevel=void 0;var e={OFF:"OFF",WARNING:"WARNING",INFORMATION:"INFORMATION"};rr.notificationFilterMinimumSeverityLevel=e,Object.freeze(e);var t={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",DEPRECATION:"DEPRECATION",GENERIC:"GENERIC",SCHEMA:"SCHEMA"};rr.notificationFilterDisabledCategory=t,Object.freeze(t);var r=t;rr.notificationFilterDisabledClassification=r;var n=(function(){function i(){throw this.minimumSeverityLevel=void 0,this.disabledCategories=void 0,this.disabledClassifications=void 0,new Error("Not implemented")}return i})();return rr.default=n,rr}var nr={},dp;function _h(){if(dp)return nr;dp=1;var e=nr&&nr.__awaiter||function(m,_,f,y){function g(h){return h instanceof f?h:new f(function(v){v(h)})}return new(f||(f=Promise))(function(h,v){function w(S){try{O(y.next(S))}catch(P){v(P)}}function E(S){try{O(y.throw(S))}catch(P){v(P)}}function O(S){S.done?h(S.value):g(S.value).then(w,E)}O((y=y.apply(m,_||[])).next())})},t=nr&&nr.__generator||function(m,_){var f={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},y,g,h,v;return v={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function w(O){return function(S){return E([O,S])}}function E(O){if(y)throw new TypeError("Generator is already executing.");for(;v&&(v=0,O[0]&&(f=0)),f;)try{if(y=1,g&&(h=O[0]&2?g.return:O[0]?g.throw||((h=g.return)&&h.call(g),0):g.next)&&!(h=h.call(g,O[1])).done)return h;switch(g=0,h&&(O=[O[0]&2,h.value]),O[0]){case 0:case 1:h=O;break;case 4:return f.label++,{value:O[1],done:!1};case 5:f.label++,g=O[1],O=[0];continue;case 7:O=f.ops.pop(),f.trys.pop();continue;default:if(h=f.trys,!(h=h.length>0&&h[h.length-1])&&(O[0]===6||O[0]===2)){f=0;continue}if(O[0]===3&&(!h||O[1]>h[0]&&O[1]<h[3])){f.label=O[1];break}if(O[0]===6&&f.label<h[1]){f.label=h[1],h=O;break}if(h&&f.label<h[2]){f.label=h[2],f.ops.push(O);break}h[2]&&f.ops.pop(),f.trys.pop();continue}O=_.call(m,f)}catch(S){O=[6,S],g=0}finally{y=h=0}if(O[0]&5)throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}},r=nr&&nr.__importDefault||function(m){return m&&m.__esModule?m:{default:m}},n;Object.defineProperty(nr,"__esModule",{value:!0});var i=r(Ww()),o=Pc(),a=it(),u=o.connectionHolder.EMPTY_CONNECTION_HOLDER,s=function(m){console.log("Uncaught error when processing result: "+m)},l=function(m){},d=function(m){},c=(function(){function m(_,f,y,g,h){h===void 0&&(h={high:Number.MAX_VALUE,low:Number.MAX_VALUE}),this[n]="Result",this._stack=p(),this._streamObserverPromise=_,this._p=null,this._query=f,this._parameters=y??{},this._connectionHolder=g??u,this._keys=null,this._summary=null,this._error=null,this._watermarks=h}return m.prototype.keys=function(){var _=this;return this._keys!==null?Promise.resolve(this._keys):this._error!==null?Promise.reject(this._error):new Promise(function(f,y){_._streamObserverPromise.then(function(g){return g.subscribe(_._decorateObserver({onKeys:function(h){return f(h)},onError:function(h){return y(h)}}))}).catch(y)})},m.prototype.summary=function(){var _=this;return this._summary!==null?Promise.resolve(this._summary):this._error!==null?Promise.reject(this._error):new Promise(function(f,y){_._streamObserverPromise.then(function(g){g.cancel(),g.subscribe(_._decorateObserver({onCompleted:function(h){return f(h)},onError:function(h){return y(h)}}))}).catch(y)})},m.prototype._getOrCreatePromise=function(){var _=this;return this._p==null&&(this._p=new Promise(function(f,y){var g=[],h={onNext:function(v){g.push(v)},onCompleted:function(v){f({records:g,summary:v})},onError:function(v){y(v)}};_.subscribe(h)})),this._p},m.prototype[Symbol.asyncIterator]=function(){var _=this;if(!this.isOpen()){var f=(0,a.newError)("Result is already consumed");return{next:function(){return Promise.reject(f)},peek:function(){return Promise.reject(f)}}}var y={paused:!0,firstRun:!0,finished:!1},g=function(){var w,E;if(y.streaming!=null){var O=(E=(w=y.queuedObserver)===null||w===void 0?void 0:w.size)!==null&&E!==void 0?E:0,S=O>=_._watermarks.high,P=O<=_._watermarks.low;S&&!y.paused?(y.paused=!0,y.streaming.pause()):(P&&y.paused||y.firstRun&&!S)&&(y.firstRun=!1,y.paused=!1,y.streaming.resume())}},h=function(){return e(_,void 0,void 0,function(){var w;return t(this,function(E){switch(E.label){case 0:return y.queuedObserver!==void 0?[3,2]:(y.queuedObserver=this._createQueuedResultObserver(g),w=y,[4,this._subscribe(y.queuedObserver,!0).catch(function(){})]);case 1:w.streaming=E.sent(),g(),E.label=2;case 2:return[2,y.queuedObserver]}})})},v=function(w){if(w===void 0)throw(0,a.newError)("InvalidState: Result stream finished without Summary",a.PROTOCOL_ERROR);return!0};return{next:function(){return e(_,void 0,void 0,function(){var w,E;return t(this,function(O){switch(O.label){case 0:return y.finished&&v(y.summary)?[2,{done:!0,value:y.summary}]:[4,h()];case 1:return w=O.sent(),[4,w.dequeue()];case 2:return E=O.sent(),E.done===!0&&(y.finished=E.done,y.summary=E.value),[2,E]}})})},return:function(w){return e(_,void 0,void 0,function(){var E,O,S;return t(this,function(P){switch(P.label){case 0:return y.finished&&v(y.summary)?[2,{done:!0,value:w??y.summary}]:((S=y.streaming)===null||S===void 0||S.cancel(),[4,h()]);case 1:return E=P.sent(),[4,E.dequeueUntilDone()];case 2:return O=P.sent(),y.finished=!0,O.value=w??O.value,y.summary=O.value,[2,O]}})})},peek:function(){return e(_,void 0,void 0,function(){var w;return t(this,function(E){switch(E.label){case 0:return y.finished&&v(y.summary)?[2,{done:!0,value:y.summary}]:[4,h()];case 1:return w=E.sent(),[4,w.head()];case 2:return[2,E.sent()]}})})}}},m.prototype.then=function(_,f){return this._getOrCreatePromise().then(_,f)},m.prototype.catch=function(_){return this._getOrCreatePromise().catch(_)},m.prototype.finally=function(_){return this._getOrCreatePromise().finally(_)},m.prototype.subscribe=function(_){this._subscribe(_).catch(function(){})},m.prototype.isOpen=function(){return this._summary===null&&this._error===null},m.prototype._subscribe=function(_,f){f===void 0&&(f=!1);var y=this._decorateObserver(_);return this._streamObserverPromise.then(function(g){return f&&g.pause(),g.subscribe(y),g}).catch(function(g){return y.onError!=null&&y.onError(g),Promise.reject(g)})},m.prototype._decorateObserver=function(_){var f=this,y,g,h,v=(y=_.onCompleted)!==null&&y!==void 0?y:l,w=(g=_.onError)!==null&&g!==void 0?g:s,E=(h=_.onKeys)!==null&&h!==void 0?h:d,O=function(I){f._releaseConnectionAndGetSummary(I).then(function(C){return f._summary!==null?v.call(_,f._summary):(f._summary=C,v.call(_,C))}).catch(w)},S=function(I){f._connectionHolder.releaseConnection().then(function(){b(I,f._stack),f._error=I,w.call(_,I)}).catch(w)},P=function(I){return f._keys=I,E.call(_,I)};return{onNext:_.onNext!=null?_.onNext.bind(_):void 0,onKeys:P,onCompleted:O,onError:S}},m.prototype._cancel=function(){this._summary===null&&this._error===null&&this._streamObserverPromise.then(function(_){return _.cancel()}).catch(function(){})},m.prototype._releaseConnectionAndGetSummary=function(_){var f=o.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),y=f.validatedQuery,g=f.params,h=this._connectionHolder;return h.getConnection().then(function(v){return h.releaseConnection().then(function(){return v?.getProtocolVersion()})},function(v){}).then(function(v){return new i.default(y,g,_,v)})},m.prototype._createQueuedResultObserver=function(_){var f=this;function y(){var O={};return O.promise=new Promise(function(S,P){O.resolve=S,O.reject=P}),O}function g(O){return O instanceof Error}function h(){var O;return e(this,void 0,void 0,function(){var S;return t(this,function(P){switch(P.label){case 0:if(v.length>0){if(S=(O=v.shift())!==null&&O!==void 0?O:(0,a.newError)("Unexpected empty buffer",a.PROTOCOL_ERROR),_(),g(S))throw S;return[2,S]}return w.resolvable=y(),[4,w.resolvable.promise];case 1:return[2,P.sent()]}})})}var v=[],w={resolvable:null},E={onNext:function(O){E._push({done:!1,value:O})},onCompleted:function(O){E._push({done:!0,value:O})},onError:function(O){E._push(O)},_push:function(O){if(w.resolvable!==null){var S=w.resolvable;w.resolvable=null,g(O)?S.reject(O):S.resolve(O)}else v.push(O),_()},dequeue:h,dequeueUntilDone:function(){return e(f,void 0,void 0,function(){var O;return t(this,function(S){switch(S.label){case 0:return[4,h()];case 1:return O=S.sent(),O.done===!0?[2,O]:[3,0];case 2:return[2]}})})},head:function(){return e(f,void 0,void 0,function(){var O,O,S;return t(this,function(P){switch(P.label){case 0:if(v.length>0){if(O=v[0],g(O))throw O;return[2,O]}w.resolvable=y(),P.label=1;case 1:return P.trys.push([1,3,4,5]),[4,w.resolvable.promise];case 2:return O=P.sent(),v.unshift(O),[2,O];case 3:throw S=P.sent(),v.unshift(S),S;case 4:return _(),[7];case 5:return[2]}})})},get size(){return v.length}};return E},m})();n=Symbol.toStringTag;function p(){var m=new Error("");return m.stack!=null?m.stack.replace(/^Error(\n\r)*/,""):null}function b(m,_){_!=null&&(m.stack=m.toString()+`
`+_)}return nr.default=c,nr}var Hc={},hp;function Hw(){if(hp)return Hc;hp=1,Object.defineProperty(Hc,"__esModule",{value:!0});var e=(function(){function t(r,n,i){this.keys=r,this.records=n,this.summary=i}return t})();return Hc.default=e,Hc}var Eo={},vp;function IC(){if(vp)return Eo;vp=1,Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.Releasable=void 0;var e=(function(){function r(){}return r.prototype.release=function(){throw new Error("Not implemented")},r})();Eo.Releasable=e;var t=(function(){function r(){}return r.prototype.acquireConnection=function(n){throw Error("Not implemented")},r.prototype.supportsMultiDb=function(){throw Error("Not implemented")},r.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},r.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},r.prototype.supportsSessionAuth=function(){throw Error("Not implemented")},r.prototype.SSREnabled=function(){return!1},r.prototype.verifyConnectivityAndGetServerInfo=function(n){throw Error("Not implemented")},r.prototype.verifyAuthentication=function(n){throw Error("Not implemented")},r.prototype.getNegotiatedProtocolVersion=function(){throw Error("Not Implemented")},r.prototype.close=function(){throw Error("Not implemented")},r})();return Eo.default=t,Eo}var zc={},pp;function jC(){if(pp)return zc;pp=1,Object.defineProperty(zc,"__esModule",{value:!0});var e=(function(){function t(){}return t.prototype.beginTransaction=function(r){throw new Error("Not implemented")},t.prototype.run=function(r,n,i){throw new Error("Not implemented")},t.prototype.commitTransaction=function(r){throw new Error("Not implemented")},t.prototype.rollbackTransaction=function(r){throw new Error("Not implemented")},t.prototype.resetAndFlush=function(){throw new Error("Not implemented")},t.prototype.isOpen=function(){throw new Error("Not implemented")},t.prototype.getProtocolVersion=function(){throw new Error("Not implemented")},t.prototype.hasOngoingObservableRequests=function(){throw new Error("Not implemented")},t})();return zc.default=e,zc}var ir={},_p;function zw(){if(_p)return ir;_p=1;var e=ir&&ir.__awaiter||function(m,_,f,y){function g(h){return h instanceof f?h:new f(function(v){v(h)})}return new(f||(f=Promise))(function(h,v){function w(S){try{O(y.next(S))}catch(P){v(P)}}function E(S){try{O(y.throw(S))}catch(P){v(P)}}function O(S){S.done?h(S.value):g(S.value).then(w,E)}O((y=y.apply(m,_||[])).next())})},t=ir&&ir.__generator||function(m,_){var f={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},y,g,h,v;return v={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function w(O){return function(S){return E([O,S])}}function E(O){if(y)throw new TypeError("Generator is already executing.");for(;v&&(v=0,O[0]&&(f=0)),f;)try{if(y=1,g&&(h=O[0]&2?g.return:O[0]?g.throw||((h=g.return)&&h.call(g),0):g.next)&&!(h=h.call(g,O[1])).done)return h;switch(g=0,h&&(O=[O[0]&2,h.value]),O[0]){case 0:case 1:h=O;break;case 4:return f.label++,{value:O[1],done:!1};case 5:f.label++,g=O[1],O=[0];continue;case 7:O=f.ops.pop(),f.trys.pop();continue;default:if(h=f.trys,!(h=h.length>0&&h[h.length-1])&&(O[0]===6||O[0]===2)){f=0;continue}if(O[0]===3&&(!h||O[1]>h[0]&&O[1]<h[3])){f.label=O[1];break}if(O[0]===6&&f.label<h[1]){f.label=h[1],h=O;break}if(h&&f.label<h[2]){f.label=h[2],f.ops.push(O);break}h[2]&&f.ops.pop(),f.trys.pop();continue}O=_.call(m,f)}catch(S){O=[6,S],g=0}finally{y=h=0}if(O[0]&5)throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}},r=ir&&ir.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(ir,"__esModule",{value:!0});var n=Lt(),i=vh(),o=Sc(),a=ph(),u=hh(),s=it(),l=r(_h()),d=(function(){function m(_){var f=_.connectionHolder,y=_.onClose,g=_.onBookmarks,h=_.onConnection,v=_.reactive,w=_.fetchSize,E=_.impersonatedUser,O=_.highRecordWatermark,S=_.lowRecordWatermark,P=_.notificationFilter,I=_.apiTelemetryConfig,C=this;this._connectionHolder=f,this._reactive=v,this._state=c.ACTIVE,this._onClose=y,this._onBookmarks=g,this._onConnection=h,this._onError=this._onErrorCallback.bind(this),this._fetchSize=w,this._onComplete=this._onCompleteCallback.bind(this),this._results=[],this._impersonatedUser=E,this._lowRecordWatermak=S,this._highRecordWatermark=O,this._bookmarks=o.Bookmarks.empty(),this._notificationFilter=P,this._apiTelemetryConfig=I,this._acceptActive=function(){},this._activePromise=new Promise(function(R,A){C._acceptActive=R})}return m.prototype._begin=function(_,f,y){var g=this;this._connectionHolder.getConnection().then(function(h){return e(g,void 0,void 0,function(){var v,w=this;return t(this,function(E){switch(E.label){case 0:return this._onConnection(),h==null?[3,2]:(v=this,[4,_()]);case 1:return v._bookmarks=E.sent(),[2,h.beginTransaction({bookmarks:this._bookmarks,txConfig:f,mode:this._connectionHolder.mode(),database:this._connectionHolder.database(),impersonatedUser:this._impersonatedUser,notificationFilter:this._notificationFilter,apiTelemetryConfig:this._apiTelemetryConfig,beforeError:function(O){y?.onError(O),w._onError(O).catch(function(){})},afterComplete:function(O){y?.onComplete(O),O.db!==void 0&&y?.onDB!=null&&y.onDB(O.db),w._onComplete(O)}})];case 2:throw(0,s.newError)("No connection available")}})})}).catch(function(h){y?.onError(h),g._onError(h).catch(function(){})}).finally(function(){return g._acceptActive()})},m.prototype.run=function(_,f){var y=(0,n.validateQueryAndParameters)(_,f),g=y.validatedQuery,h=y.params,v=this._state.run(g,h,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize,highRecordWatermark:this._highRecordWatermark,lowRecordWatermark:this._lowRecordWatermak,preparationJob:this._activePromise});return this._results.push(v),v},m.prototype.commit=function(){var _=this,f=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:function(y){return _._onCompleteCallback(y,_._bookmarks)},onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=f.state,this._onClose(),new Promise(function(y,g){f.result.subscribe({onCompleted:function(){return y()},onError:function(h){return g(h)}})})},m.prototype.rollback=function(){var _=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=_.state,this._onClose(),new Promise(function(f,y){_.result.subscribe({onCompleted:function(){return f()},onError:function(g){return y(g)}})})},m.prototype.isOpen=function(){return this._state===c.ACTIVE},m.prototype.close=function(){return e(this,void 0,void 0,function(){return t(this,function(_){switch(_.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:_.sent(),_.label=2;case 2:return[2]}})})},m.prototype[Symbol.asyncDispose]=function(){return this.close()},m.prototype._onErrorCallback=function(_){return this._state===c.FAILED?Promise.resolve(null):(this._state=c.FAILED,this._onClose(),this._results.forEach(function(f){f.isOpen()&&f._streamObserverPromise.then(function(y){return y.onError(_)}).catch(function(y){})}),this._connectionHolder.releaseConnection())},m.prototype._onCompleteCallback=function(_,f){this._onBookmarks(new o.Bookmarks(_?.bookmark),f??o.Bookmarks.empty(),_?.db)},m})(),c={ACTIVE:{commit:function(m){var _=m.connectionHolder,f=m.onError,y=m.onComplete,g=m.onConnection,h=m.pendingResults,v=m.preparationJob;return{result:p(!0,_,f,y,g,h,v),state:c.SUCCEEDED}},rollback:function(m){var _=m.connectionHolder,f=m.onError,y=m.onComplete,g=m.onConnection,h=m.pendingResults,v=m.preparationJob;return{result:p(!1,_,f,y,g,h,v),state:c.ROLLED_BACK}},run:function(m,_,f){var y=f.connectionHolder,g=f.onError,h=f.onComplete,v=f.onConnection,w=f.reactive,E=f.fetchSize,O=f.highRecordWatermark,S=f.lowRecordWatermark,P=f.preparationJob,I=P??Promise.resolve(),C=y.getConnection().then(function(R){return I.then(function(){return R})}).then(function(R){if(v(),R!=null)return R.run(m,_,{bookmarks:o.Bookmarks.empty(),txConfig:a.TxConfig.empty(),beforeError:g,afterComplete:h,reactive:w,fetchSize:E,highRecordWatermark:O,lowRecordWatermark:S});throw(0,s.newError)("No connection available")}).catch(function(R){return new u.FailedObserver({error:R,onError:g})});return b(C,m,_,y,O,S)}},FAILED:{commit:function(m){var _=m.connectionHolder,f=m.onError;return m.onComplete,{result:b(new u.FailedObserver({error:(0,s.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:f}),"COMMIT",{},_,0,0),state:c.FAILED}},rollback:function(m){var _=m.connectionHolder;return m.onError,m.onComplete,{result:b(new u.CompletedObserver,"ROLLBACK",{},_,0,0),state:c.FAILED}},run:function(m,_,f){var y=f.connectionHolder,g=f.onError;return f.onComplete,b(new u.FailedObserver({error:(0,s.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:g}),m,_,y,0,0)}},SUCCEEDED:{commit:function(m){var _=m.connectionHolder,f=m.onError;return m.onComplete,{result:b(new u.FailedObserver({error:(0,s.newError)("Cannot commit this transaction, because it has already been committed."),onError:f}),"COMMIT",{},i.EMPTY_CONNECTION_HOLDER,0,0),state:c.SUCCEEDED,connectionHolder:_}},rollback:function(m){var _=m.connectionHolder,f=m.onError;return m.onComplete,{result:b(new u.FailedObserver({error:(0,s.newError)("Cannot rollback this transaction, because it has already been committed."),onError:f}),"ROLLBACK",{},i.EMPTY_CONNECTION_HOLDER,0,0),state:c.SUCCEEDED,connectionHolder:_}},run:function(m,_,f){var y=f.connectionHolder,g=f.onError;return f.onComplete,b(new u.FailedObserver({error:(0,s.newError)("Cannot run query in this transaction, because it has already been committed."),onError:g}),m,_,y,0,0)}},ROLLED_BACK:{commit:function(m){var _=m.connectionHolder,f=m.onError;return m.onComplete,{result:b(new u.FailedObserver({error:(0,s.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:f}),"COMMIT",{},_,0,0),state:c.ROLLED_BACK}},rollback:function(m){var _=m.connectionHolder;return m.onError,m.onComplete,{result:b(new u.FailedObserver({error:(0,s.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},_,0,0),state:c.ROLLED_BACK}},run:function(m,_,f){var y=f.connectionHolder,g=f.onError;return f.onComplete,b(new u.FailedObserver({error:(0,s.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:g}),m,_,y,0,0)}}};function p(m,_,f,y,g,h,v){var w=v??Promise.resolve(),E=_.getConnection().then(function(O){return w.then(function(){return O})}).then(function(O){return g(),h.forEach(function(S){return S._cancel()}),Promise.all(h.map(function(S){return S.summary()})).then(function(S){if(O!=null)return m?O.commitTransaction({beforeError:f,afterComplete:y}):O.rollbackTransaction({beforeError:f,afterComplete:y});throw(0,s.newError)("No connection available")})}).catch(function(O){return new u.FailedObserver({error:O,onError:f})});return new l.default(E,m?"COMMIT":"ROLLBACK",{},_,{high:Number.MAX_VALUE,low:Number.MAX_VALUE})}function b(m,_,f,y,g,h){return y===void 0&&(y=i.EMPTY_CONNECTION_HOLDER),new l.default(Promise.resolve(m),_,f,new i.ReadOnlyConnectionHolder(y??i.EMPTY_CONNECTION_HOLDER),{low:h,high:g})}return ir.default=d,ir}var Kc={},bp;function Kw(){if(bp)return Kc;bp=1,Object.defineProperty(Kc,"__esModule",{value:!0});var e=(function(){function t(r){var n=r.run;this._run=n}return t.fromTransaction=function(r){return new t({run:r.run.bind(r)})},t.prototype.run=function(r,n){return this._run(r,n)},t})();return Kc.default=e,Kc}var or={},yp;function Gw(){if(yp)return or;yp=1;var e=or&&or.__extends||(function(){var a=function(u,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var c in d)Object.prototype.hasOwnProperty.call(d,c)&&(l[c]=d[c])},a(u,s)};return function(u,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");a(u,s);function l(){this.constructor=u}u.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}})(),t=or&&or.__assign||function(){return t=Object.assign||function(a){for(var u,s=1,l=arguments.length;s<l;s++){u=arguments[s];for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(a[d]=u[d])}return a},t.apply(this,arguments)},r=or&&or.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},n;Object.defineProperty(or,"__esModule",{value:!0});var i=r(zw()),o=(function(a){e(u,a);function u(s){var l=s.connectionHolder,d=s.onClose,c=s.onBookmarks,p=s.onConnection,b=s.reactive,m=s.fetchSize,_=s.impersonatedUser,f=s.highRecordWatermark,y=s.lowRecordWatermark,g=s.notificationFilter,h=s.apiTelemetryConfig,v=s.onDbCallback,w=a.call(this,{connectionHolder:l,onClose:d,onBookmarks:c,onConnection:p,reactive:b,fetchSize:m,impersonatedUser:_,highRecordWatermark:f,lowRecordWatermark:y,notificationFilter:g,apiTelemetryConfig:h})||this;return w[n]="TransactionPromise",w._onDbCallback=v,w}return u.prototype.then=function(s,l){return this._getOrCreateBeginPromise().then(s,l)},u.prototype.catch=function(s){return this._getOrCreateBeginPromise().catch(s)},u.prototype.finally=function(s){return this._getOrCreateBeginPromise().finally(s)},u.prototype._getOrCreateBeginPromise=function(){var s=this;return this._beginPromise==null&&(this._beginPromise=new Promise(function(l,d){s._resolve=l,s._reject=d,s._beginError!=null&&d(s._beginError),s._beginMetadata!=null&&l(s._toTransaction())})),this._beginPromise},u.prototype._toTransaction=function(){return t(t({},this),{run:a.prototype.run.bind(this),commit:a.prototype.commit.bind(this),rollback:a.prototype.rollback.bind(this),close:a.prototype.close.bind(this),isOpen:a.prototype.isOpen.bind(this),_begin:this._begin.bind(this)})},u.prototype._begin=function(s,l){return a.prototype._begin.call(this,s,l,{onError:this._onBeginError.bind(this),onComplete:this._onBeginMetadata.bind(this),onDB:this._onDbCallback})},u.prototype._onBeginError=function(s){this._beginError=s,this._reject!=null&&this._reject(s)},u.prototype._onBeginMetadata=function(s){this._beginMetadata=s??{},this._resolve!=null&&this._resolve(this._toTransaction())},u})(i.default);return n=Symbol.toStringTag,or.default=o,or}var yt={},fa={},mp;function Yw(){if(mp)return fa;mp=1,Object.defineProperty(fa,"__esModule",{value:!0}),fa.cacheKey=void 0;var e=si();function t(r,n){var i;return n!=null?"basic:"+n:r===void 0?"DEFAULT":r.scheme==="basic"?"basic:"+((i=r.principal)!==null&&i!==void 0?i:""):r.scheme==="kerberos"?"kerberos:"+r.credentials:r.scheme==="bearer"?"bearer:"+r.credentials:r.scheme==="none"?"none":(0,e.stringify)(r,{sortedElements:!0})}return fa.cacheKey=t,fa}var gp;function Zw(){if(gp)return yt;gp=1;var e=yt&&yt.__awaiter||function(h,v,w,E){function O(S){return S instanceof w?S:new w(function(P){P(S)})}return new(w||(w=Promise))(function(S,P){function I(A){try{R(E.next(A))}catch(D){P(D)}}function C(A){try{R(E.throw(A))}catch(D){P(D)}}function R(A){A.done?S(A.value):O(A.value).then(I,C)}R((E=E.apply(h,v||[])).next())})},t=yt&&yt.__generator||function(h,v){var w={label:0,sent:function(){if(S[0]&1)throw S[1];return S[1]},trys:[],ops:[]},E,O,S,P;return P={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function I(R){return function(A){return C([R,A])}}function C(R){if(E)throw new TypeError("Generator is already executing.");for(;P&&(P=0,R[0]&&(w=0)),w;)try{if(E=1,O&&(S=R[0]&2?O.return:R[0]?O.throw||((S=O.return)&&S.call(O),0):O.next)&&!(S=S.call(O,R[1])).done)return S;switch(O=0,S&&(R=[R[0]&2,S.value]),R[0]){case 0:case 1:S=R;break;case 4:return w.label++,{value:R[1],done:!1};case 5:w.label++,O=R[1],R=[0];continue;case 7:R=w.ops.pop(),w.trys.pop();continue;default:if(S=w.trys,!(S=S.length>0&&S[S.length-1])&&(R[0]===6||R[0]===2)){w=0;continue}if(R[0]===3&&(!S||R[1]>S[0]&&R[1]<S[3])){w.label=R[1];break}if(R[0]===6&&w.label<S[1]){w.label=S[1],S=R;break}if(S&&w.label<S[2]){w.label=S[2],w.ops.push(R);break}S[2]&&w.ops.pop(),w.trys.pop();continue}R=v.call(h,w)}catch(A){R=[6,A],O=0}finally{E=S=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}},r=yt&&yt.__read||function(h,v){var w=typeof Symbol=="function"&&h[Symbol.iterator];if(!w)return h;var E=w.call(h),O,S=[],P;try{for(;(v===void 0||v-- >0)&&!(O=E.next()).done;)S.push(O.value)}catch(I){P={error:I}}finally{try{O&&!O.done&&(w=E.return)&&w.call(E)}finally{if(P)throw P.error}}return S},n=yt&&yt.__spreadArray||function(h,v,w){if(w||arguments.length===2)for(var E=0,O=v.length,S;E<O;E++)(S||!(E in v))&&(S||(S=Array.prototype.slice.call(v,0,E)),S[E]=v[E]);return h.concat(S||Array.prototype.slice.call(v))},i=yt&&yt.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(yt,"__esModule",{value:!0});var o=hh(),a=Lt(),u=na(),s=it(),l=i(_h()),d=vh(),c=Bw(),p=Sc(),b=ph(),m=i(Gw()),_=i(Kw()),f=Yw(),y=(function(){function h(v){var w=v.mode,E=v.connectionProvider,O=v.bookmarks,S=v.database,P=v.config,I=v.reactive,C=v.fetchSize,R=v.impersonatedUser,A=v.bookmarkManager,D=v.notificationFilter,j=v.auth,U=v.log,B=v.homeDatabaseCallback,q;this._mode=w,this._database=S,this._reactive=I,this._fetchSize=C,this._homeDatabaseCallback=B,this._auth=j,this._getConnectionAcquistionBookmarks=this._getConnectionAcquistionBookmarks.bind(this),this._readConnectionHolder=new d.ConnectionHolder({mode:u.ACCESS_MODE_READ,auth:j,database:S,bookmarks:O,connectionProvider:E,impersonatedUser:R,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:U}),this._writeConnectionHolder=new d.ConnectionHolder({mode:u.ACCESS_MODE_WRITE,auth:j,database:S,bookmarks:O,connectionProvider:E,impersonatedUser:R,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:U}),this._open=!0,this._hasTx=!1,this._impersonatedUser=R,this._lastBookmarks=O??p.Bookmarks.empty(),this._configuredBookmarks=this._lastBookmarks,this._transactionExecutor=g(P),this._databaseNameResolved=this._database!=="";var T=this._calculateWatermaks();this._lowRecordWatermark=T.low,this._highRecordWatermark=T.high,this._results=[],this._bookmarkManager=A,this._notificationFilter=D,this._log=U,this._databaseGuess=P?.cachedHomeDatabase,this._isRoutingSession=(q=P?.routingDriver)!==null&&q!==void 0?q:!1}return h.prototype.run=function(v,w,E){var O=this,S=(0,a.validateQueryAndParameters)(v,w),P=S.validatedQuery,I=S.params,C=E!=null?new b.TxConfig(E,this._log):b.TxConfig.empty(),R=this._run(P,I,function(A){return e(O,void 0,void 0,function(){var D,j=this;return t(this,function(U){switch(U.label){case 0:return[4,this._bookmarks()];case 1:return D=U.sent(),this._assertSessionIsOpen(),[2,A.run(P,I,{bookmarks:D,txConfig:C,mode:this._mode,database:this._database,apiTelemetryConfig:{api:u.TELEMETRY_APIS.AUTO_COMMIT_TRANSACTION},impersonatedUser:this._impersonatedUser,afterComplete:function(B){return j._onCompleteCallback(B,D)},reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,onDb:this._onDatabaseNameResolved.bind(this)})]}})})});return this._results.push(R),R},h.prototype._run=function(v,w,E){var O=this._acquireAndConsumeConnection(E),S=O.connectionHolder,P=O.resultPromise,I=P.catch(function(R){return Promise.resolve(new o.FailedObserver({error:R}))}),C={high:this._highRecordWatermark,low:this._lowRecordWatermark};return new l.default(I,v,w,S,C)},h.prototype._acquireConnection=function(v){var w=this,E=this._acquireAndConsumeConnection(v),O=E.connectionHolder,S=E.resultPromise;return S.then(function(P){return e(w,void 0,void 0,function(){return t(this,function(I){switch(I.label){case 0:return[4,O.releaseConnection()];case 1:return I.sent(),[2,P]}})})})},h.prototype._acquireAndConsumeConnection=function(v){var w,E=this._connectionHolderWithMode(this._mode);return this._open?!this._hasTx&&E.initializeConnection(this._databaseGuess)?w=E.getConnection().then(function(O){return v(O)}):w=Promise.reject((0,s.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):w=Promise.reject((0,s.newError)("Cannot run query in a closed session.")),{connectionHolder:E,resultPromise:w}},h.prototype.beginTransaction=function(v){var w=v,E=b.TxConfig.empty();return w!=null&&(E=new b.TxConfig(w,this._log)),this._beginTransaction(this._mode,E,{api:u.TELEMETRY_APIS.UNMANAGED_TRANSACTION})},h.prototype._beginTransaction=function(v,w,E){var O=this;if(!this._open)throw(0,s.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,s.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var S=h._validateSessionMode(v),P=this._connectionHolderWithMode(S);P.initializeConnection(this._databaseGuess),this._hasTx=!0;var I=new m.default({connectionHolder:P,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmarks:function(C,R,A){return O._updateBookmarks(C,R,A)},onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,apiTelemetryConfig:E,onDbCallback:this._onDatabaseNameResolved.bind(this)});return I._begin(function(){return O._bookmarks()},w),I},h.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,s.newError)("You cannot run more transactions on a closed session.")},h.prototype._transactionClosed=function(){this._hasTx=!1},h.prototype.lastBookmark=function(){return this.lastBookmarks()},h.prototype.lastBookmarks=function(){return this._lastBookmarks.values()},h.prototype._bookmarks=function(){var v;return e(this,void 0,void 0,function(){var w;return t(this,function(E){switch(E.label){case 0:return[4,(v=this._bookmarkManager)===null||v===void 0?void 0:v.getBookmarks()];case 1:return w=E.sent(),w===void 0?[2,this._lastBookmarks]:[2,new p.Bookmarks(n(n([],r(w),!1),r(this._configuredBookmarks),!1))]}})})},h.prototype.readTransaction=function(v,w){var E=new b.TxConfig(w,this._log);return this._runTransaction(u.ACCESS_MODE_READ,E,v)},h.prototype.writeTransaction=function(v,w){var E=new b.TxConfig(w,this._log);return this._runTransaction(u.ACCESS_MODE_WRITE,E,v)},h.prototype._runTransaction=function(v,w,E){var O=this;return this._transactionExecutor.execute(function(S){return O._beginTransaction(v,w,S)},E)},h.prototype.executeRead=function(v,w){var E=new b.TxConfig(w,this._log);return this._executeInTransaction(u.ACCESS_MODE_READ,E,v)},h.prototype.executeWrite=function(v,w){var E=new b.TxConfig(w,this._log);return this._executeInTransaction(u.ACCESS_MODE_WRITE,E,v)},h.prototype._executeInTransaction=function(v,w,E){var O=this;return this._transactionExecutor.execute(function(S){return O._beginTransaction(v,w,S)},E,_.default.fromTransaction)},h.prototype._onDatabaseNameResolved=function(v){if(this._isRoutingSession&&(this._databaseGuess=v,!this._databaseNameResolved)){var w=v??"";this._database=w,this._readConnectionHolder.setDatabase(w),this._writeConnectionHolder.setDatabase(w),this._databaseNameResolved=!0,this._homeDatabaseCallback!=null&&this._homeDatabaseCallback((0,f.cacheKey)(this._auth,this._impersonatedUser),v)}},h.prototype._getConnectionAcquistionBookmarks=function(){var v;return e(this,void 0,void 0,function(){var w;return t(this,function(E){switch(E.label){case 0:return[4,(v=this._bookmarkManager)===null||v===void 0?void 0:v.getBookmarks()];case 1:return w=E.sent(),w===void 0?[2,this._lastBookmarks]:[2,new p.Bookmarks(n(n([],r(this._configuredBookmarks),!1),r(w),!1))]}})})},h.prototype._updateBookmarks=function(v,w,E){var O,S,P;v!=null&&!v.isEmpty()&&((O=this._bookmarkManager)===null||O===void 0||O.updateBookmarks((S=w?.values())!==null&&S!==void 0?S:[],(P=v?.values())!==null&&P!==void 0?P:[]).catch(function(){}),this._lastBookmarks=v,this._configuredBookmarks=p.Bookmarks.empty())},h.prototype.close=function(){return e(this,void 0,void 0,function(){return t(this,function(v){switch(v.label){case 0:return this._open?(this._open=!1,this._results.forEach(function(w){return w._cancel()}),this._transactionExecutor.close(),[4,this._readConnectionHolder.close(this._hasTx)]):[3,3];case 1:return v.sent(),[4,this._writeConnectionHolder.close(this._hasTx)];case 2:v.sent(),v.label=3;case 3:return[2]}})})},h.prototype[Symbol.asyncDispose]=function(){return this.close()},h.prototype._connectionHolderWithMode=function(v){if(v===u.ACCESS_MODE_READ)return this._readConnectionHolder;if(v===u.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,s.newError)("Unknown access mode: "+v)},h.prototype._onCompleteCallback=function(v,w){this._updateBookmarks(new p.Bookmarks(v.bookmark),w,v.db)},h.prototype._calculateWatermaks=function(){return this._fetchSize===u.FETCH_ALL?{low:Number.MAX_VALUE,high:Number.MAX_VALUE}:{low:.3*this._fetchSize,high:.7*this._fetchSize}},h.prototype._configureTransactionExecutor=function(v,w){this._transactionExecutor.pipelineBegin=v,this._transactionExecutor.telemetryApi=w},h._validateSessionMode=function(v){var w=v??u.ACCESS_MODE_WRITE;if(w!==u.ACCESS_MODE_READ&&w!==u.ACCESS_MODE_WRITE)throw(0,s.newError)("Illegal session mode "+w);return w},h})();function g(h){var v,w=(v=h?.maxTransactionRetryTime)!==null&&v!==void 0?v:null;return new c.TransactionExecutor(w)}return yt.default=y,yt}var Re={},Ye={},wp;function Xw(){if(wp)return Ye;wp=1;var e=Ye&&Ye.__awaiter||function(s,l,d,c){function p(b){return b instanceof d?b:new d(function(m){m(b)})}return new(d||(d=Promise))(function(b,m){function _(g){try{y(c.next(g))}catch(h){m(h)}}function f(g){try{y(c.throw(g))}catch(h){m(h)}}function y(g){g.done?b(g.value):p(g.value).then(_,f)}y((c=c.apply(s,l||[])).next())})},t=Ye&&Ye.__generator||function(s,l){var d={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},c,p,b,m;return m={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function _(y){return function(g){return f([y,g])}}function f(y){if(c)throw new TypeError("Generator is already executing.");for(;m&&(m=0,y[0]&&(d=0)),d;)try{if(c=1,p&&(b=y[0]&2?p.return:y[0]?p.throw||((b=p.return)&&b.call(p),0):p.next)&&!(b=b.call(p,y[1])).done)return b;switch(p=0,b&&(y=[y[0]&2,b.value]),y[0]){case 0:case 1:b=y;break;case 4:return d.label++,{value:y[1],done:!1};case 5:d.label++,p=y[1],y=[0];continue;case 7:y=d.ops.pop(),d.trys.pop();continue;default:if(b=d.trys,!(b=b.length>0&&b[b.length-1])&&(y[0]===6||y[0]===2)){d=0;continue}if(y[0]===3&&(!b||y[1]>b[0]&&y[1]<b[3])){d.label=y[1];break}if(y[0]===6&&d.label<b[1]){d.label=b[1],b=y;break}if(b&&d.label<b[2]){d.label=b[2],d.ops.push(y);break}b[2]&&d.ops.pop(),d.trys.pop();continue}y=l.call(s,d)}catch(g){y=[6,g],p=0}finally{c=b=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},r=Ye&&Ye.__values||function(s){var l=typeof Symbol=="function"&&Symbol.iterator,d=l&&s[l],c=0;if(d)return d.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")},n=Ye&&Ye.__read||function(s,l){var d=typeof Symbol=="function"&&s[Symbol.iterator];if(!d)return s;var c=d.call(s),p,b=[],m;try{for(;(l===void 0||l-- >0)&&!(p=c.next()).done;)b.push(p.value)}catch(_){m={error:_}}finally{try{p&&!p.done&&(d=c.return)&&d.call(c)}finally{if(m)throw m.error}}return b},i=Ye&&Ye.__spreadArray||function(s,l,d){if(d||arguments.length===2)for(var c=0,p=l.length,b;c<p;c++)(b||!(c in l))&&(b||(b=Array.prototype.slice.call(l,0,c)),b[c]=l[c]);return s.concat(b||Array.prototype.slice.call(l))};Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.bookmarkManager=void 0;var o=(function(){function s(){throw new Error("Not implemented")}return s.prototype.updateBookmarks=function(l,d){return e(this,void 0,void 0,function(){return t(this,function(c){throw new Error("Not implemented")})})},s.prototype.getBookmarks=function(){return e(this,void 0,void 0,function(){return t(this,function(l){throw new Error("Not implemented")})})},s})();Ye.default=o;function a(s){s===void 0&&(s={});var l=new Set(s.initialBookmarks);return new u(l,s.bookmarksSupplier,s.bookmarksConsumer)}Ye.bookmarkManager=a;var u=(function(){function s(l,d,c){this._bookmarks=l,this._bookmarksSupplier=d,this._bookmarksConsumer=c}return s.prototype.updateBookmarks=function(l,d){return e(this,void 0,void 0,function(){var c,p,b,f,m,_,f,y,g,h,v;return t(this,function(w){switch(w.label){case 0:c=this._bookmarks;try{for(p=r(l),b=p.next();!b.done;b=p.next())f=b.value,c.delete(f)}catch(E){y={error:E}}finally{try{b&&!b.done&&(g=p.return)&&g.call(p)}finally{if(y)throw y.error}}try{for(m=r(d),_=m.next();!_.done;_=m.next())f=_.value,c.add(f)}catch(E){h={error:E}}finally{try{_&&!_.done&&(v=m.return)&&v.call(m)}finally{if(h)throw h.error}}return typeof this._bookmarksConsumer!="function"?[3,2]:[4,this._bookmarksConsumer(i([],n(c),!1))];case 1:w.sent(),w.label=2;case 2:return[2]}})})},s.prototype.getBookmarks=function(){var l;return e(this,void 0,void 0,function(){var d,c,p,b,m,_,f;return t(this,function(y){switch(y.label){case 0:return d=new Set(this._bookmarks),typeof this._bookmarksSupplier!="function"?[3,2]:[4,this._bookmarksSupplier()];case 1:c=(l=y.sent())!==null&&l!==void 0?l:[];try{for(p=r(c),b=p.next();!b.done;b=p.next())m=b.value,d.add(m)}catch(g){_={error:g}}finally{try{b&&!b.done&&(f=p.return)&&f.call(p)}finally{if(_)throw _.error}}y.label=2;case 2:return[2,i([],n(d),!1)]}})})},s})();return Ye}var ar={},Op;function Qw(){if(Op)return ar;Op=1;var e=ar&&ar.__awaiter||function(c,p,b,m){function _(f){return f instanceof b?f:new b(function(y){y(f)})}return new(b||(b=Promise))(function(f,y){function g(w){try{v(m.next(w))}catch(E){y(E)}}function h(w){try{v(m.throw(w))}catch(E){y(E)}}function v(w){w.done?f(w.value):_(w.value).then(g,h)}v((m=m.apply(c,p||[])).next())})},t=ar&&ar.__generator||function(c,p){var b={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},m,_,f,y;return y={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function g(v){return function(w){return h([v,w])}}function h(v){if(m)throw new TypeError("Generator is already executing.");for(;y&&(y=0,v[0]&&(b=0)),b;)try{if(m=1,_&&(f=v[0]&2?_.return:v[0]?_.throw||((f=_.return)&&f.call(_),0):_.next)&&!(f=f.call(_,v[1])).done)return f;switch(_=0,f&&(v=[v[0]&2,f.value]),v[0]){case 0:case 1:f=v;break;case 4:return b.label++,{value:v[1],done:!1};case 5:b.label++,_=v[1],v=[0];continue;case 7:v=b.ops.pop(),b.trys.pop();continue;default:if(f=b.trys,!(f=f.length>0&&f[f.length-1])&&(v[0]===6||v[0]===2)){b=0;continue}if(v[0]===3&&(!f||v[1]>f[0]&&v[1]<f[3])){b.label=v[1];break}if(v[0]===6&&b.label<f[1]){b.label=f[1],f=v;break}if(f&&b.label<f[2]){b.label=f[2],b.ops.push(v);break}f[2]&&b.ops.pop(),b.trys.pop();continue}v=p.call(c,b)}catch(w){v=[6,w],_=0}finally{m=f=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},r=ar&&ar.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(ar,"__esModule",{value:!0});var n=r(Hw()),i=it(),o=(function(){function c(){}return c.prototype.eagerResultTransformer=function(){return u},c.prototype.eager=function(){return u},c.prototype.mappedResultTransformer=function(p){return s(p)},c.prototype.mapped=function(p){return s(p)},c.prototype.first=function(){return l},c.prototype.summary=function(){return d},c})(),a=new o;Object.freeze(a),ar.default=a;function u(c){return e(this,void 0,void 0,function(){var p,b,m,_;return t(this,function(f){switch(f.label){case 0:return[4,c];case 1:return p=f.sent(),b=p.summary,m=p.records,[4,c.keys()];case 2:return _=f.sent(),[2,new n.default(_,m,b)]}})})}function s(c){var p=this;if(c==null||c.collect==null&&c.map==null)throw(0,i.newError)("Requires a map or/and a collect functions.");return function(b){return e(p,void 0,void 0,function(){return t(this,function(m){switch(m.label){case 0:return[4,new Promise(function(_,f){var y={records:[],keys:[]};b.subscribe({onKeys:function(g){y.keys=g},onNext:function(g){if(c.map!=null){var h=c.map(g);h!==void 0&&y.records.push(h)}else y.records.push(g)},onCompleted:function(g){if(c.collect!=null)_(c.collect(y.records,g,y.keys));else{var h={records:y.records,summary:g,keys:y.keys};_(h)}},onError:function(g){f(g)}})})];case 1:return[2,m.sent()]}})})}}function l(c){return e(this,void 0,void 0,function(){var p,b,m,_;return t(this,function(f){switch(f.label){case 0:return p=c[Symbol.asyncIterator](),[4,p.next()];case 1:b=f.sent(),m=b.value,_=b.done,f.label=2;case 2:return f.trys.push([2,,3,6]),_===!0?[2,void 0]:[2,m];case 3:return p.return==null?[3,5]:[4,p.return()];case 4:f.sent(),f.label=5;case 5:return[7];case 6:return[2]}})})}function d(c){return e(this,void 0,void 0,function(){return t(this,function(p){switch(p.label){case 0:return[4,c.summary()];case 1:return[2,p.sent()]}})})}return ar}var _n={},Ep;function NC(){if(Ep)return _n;Ep=1;var e=_n&&_n.__awaiter||function(o,a,u,s){function l(d){return d instanceof u?d:new u(function(c){c(d)})}return new(u||(u=Promise))(function(d,c){function p(_){try{m(s.next(_))}catch(f){c(f)}}function b(_){try{m(s.throw(_))}catch(f){c(f)}}function m(_){_.done?d(_.value):l(_.value).then(p,b)}m((s=s.apply(o,a||[])).next())})},t=_n&&_n.__generator||function(o,a){var u={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},s,l,d,c;return c={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function p(m){return function(_){return b([m,_])}}function b(m){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(u=0)),u;)try{if(s=1,l&&(d=m[0]&2?l.return:m[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,m[1])).done)return d;switch(l=0,d&&(m=[m[0]&2,d.value]),m[0]){case 0:case 1:d=m;break;case 4:return u.label++,{value:m[1],done:!1};case 5:u.label++,l=m[1],m=[0];continue;case 7:m=u.ops.pop(),u.trys.pop();continue;default:if(d=u.trys,!(d=d.length>0&&d[d.length-1])&&(m[0]===6||m[0]===2)){u=0;continue}if(m[0]===3&&(!d||m[1]>d[0]&&m[1]<d[3])){u.label=m[1];break}if(m[0]===6&&u.label<d[1]){u.label=d[1],d=m;break}if(d&&u.label<d[2]){u.label=d[2],u.ops.push(m);break}d[2]&&u.ops.pop(),u.trys.pop();continue}m=a.call(o,u)}catch(_){m=[6,_],l=0}finally{s=d=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}};Object.defineProperty(_n,"__esModule",{value:!0});var r=na(),n=(function(){function o(a){this._createSession=a}return o.prototype.execute=function(a,u,s){return e(this,void 0,void 0,function(){var l,d,c,p=this;return t(this,function(b){switch(b.label){case 0:l=this._createSession({database:a.database,bookmarkManager:a.bookmarkManager,impersonatedUser:a.impersonatedUser,auth:a.auth}),d=i(a.signal,"abort",function(){return e(p,void 0,void 0,function(){return t(this,function(m){switch(m.label){case 0:return[4,l.close()];case 1:return[2,m.sent()]}})})}),l._configureTransactionExecutor(!0,r.TELEMETRY_APIS.EXECUTE_QUERY),b.label=1;case 1:return b.trys.push([1,,3,5]),c=a.routing==="READ"?l.executeRead.bind(l):l.executeWrite.bind(l),[4,c(function(m){return e(p,void 0,void 0,function(){var _;return t(this,function(f){switch(f.label){case 0:return _=m.run(u,s),[4,a.resultTransformer(_)];case 1:return[2,f.sent()]}})})},a.transactionConfig)];case 2:return[2,b.sent()];case 3:return d.uninstall(),[4,l.close()];case 4:return b.sent(),[7];case 5:return[2]}})})},o})();_n.default=n;function i(o,a,u){return typeof o?.addEventListener=="function"&&o.addEventListener(a,u),{uninstall:function(){typeof o?.removeEventListener=="function"&&o.removeEventListener(a,u)}}}return _n}var Gc={},Sp;function kC(){if(Sp)return Gc;Sp=1,Object.defineProperty(Gc,"__esModule",{value:!0});var e=(function(){function t(r){this.maxSize=r,this.pruneCount=Math.max(Math.round(.01*r*Math.log(r)),1),this.map=new Map}return t.prototype.set=function(r,n){this.map.set(r,{database:n,lastUsed:Date.now()}),this._pruneCache()},t.prototype.get=function(r){var n=this.map.get(r);if(n!==void 0)return n.lastUsed=Date.now(),n.database},t.prototype.delete=function(r){this.map.delete(r)},t.prototype._pruneCache=function(){if(this.map.size>this.maxSize)for(var r=Array.from(this.map.entries()).sort(function(i,o){return i[1].lastUsed-o[1].lastUsed}),n=0;n<this.pruneCount;n++)this.map.delete(r[n][0])},t})();return Gc.default=e,Gc}var Pp;function Tp(){if(Pp)return Re;Pp=1;var e=Re&&Re.__assign||function(){return e=Object.assign||function(T){for(var k,M=1,V=arguments.length;M<V;M++){k=arguments[M];for(var z in k)Object.prototype.hasOwnProperty.call(k,z)&&(T[z]=k[z])}return T},e.apply(this,arguments)},t=Re&&Re.__awaiter||function(T,k,M,V){function z(F){return F instanceof M?F:new M(function(W){W(F)})}return new(M||(M=Promise))(function(F,W){function Y(x){try{N(V.next(x))}catch(L){W(L)}}function K(x){try{N(V.throw(x))}catch(L){W(L)}}function N(x){x.done?F(x.value):z(x.value).then(Y,K)}N((V=V.apply(T,k||[])).next())})},r=Re&&Re.__generator||function(T,k){var M={label:0,sent:function(){if(F[0]&1)throw F[1];return F[1]},trys:[],ops:[]},V,z,F,W;return W={next:Y(0),throw:Y(1),return:Y(2)},typeof Symbol=="function"&&(W[Symbol.iterator]=function(){return this}),W;function Y(N){return function(x){return K([N,x])}}function K(N){if(V)throw new TypeError("Generator is already executing.");for(;W&&(W=0,N[0]&&(M=0)),M;)try{if(V=1,z&&(F=N[0]&2?z.return:N[0]?z.throw||((F=z.return)&&F.call(z),0):z.next)&&!(F=F.call(z,N[1])).done)return F;switch(z=0,F&&(N=[N[0]&2,F.value]),N[0]){case 0:case 1:F=N;break;case 4:return M.label++,{value:N[1],done:!1};case 5:M.label++,z=N[1],N=[0];continue;case 7:N=M.ops.pop(),M.trys.pop();continue;default:if(F=M.trys,!(F=F.length>0&&F[F.length-1])&&(N[0]===6||N[0]===2)){M=0;continue}if(N[0]===3&&(!F||N[1]>F[0]&&N[1]<F[3])){M.label=N[1];break}if(N[0]===6&&M.label<F[1]){M.label=F[1],F=N;break}if(F&&M.label<F[2]){M.label=F[2],M.ops.push(N);break}F[2]&&M.ops.pop(),M.trys.pop();continue}N=k.call(T,M)}catch(x){N=[6,x],z=0}finally{V=F=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}},n=Re&&Re.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(Re,"__esModule",{value:!0}),Re.QueryConfig=Re.SessionConfig=Re.routing=Re.WRITE=Re.READ=Re.Driver=void 0;var i=Sc(),o=n(Fw()),a=na(),u=Fl(),s=n(Zw()),l=Lt(),d=Xw(),c=n(Qw()),p=n(NC()),b=it(),m=n(kC()),_=Yw(),f=3600*1e3,y=1e3,g=1e4,h=a.ACCESS_MODE_READ;Re.READ=h;var v=a.ACCESS_MODE_WRITE;Re.WRITE=v;var w=0,E=(function(){function T(){this.defaultAccessMode=v,this.bookmarks=[],this.database="",this.impersonatedUser=void 0,this.auth=void 0,this.fetchSize=void 0,this.bookmarkManager=void 0,this.notificationFilter=void 0}return T})();Re.SessionConfig=E;var O="WRITE",S="READ",P={WRITE:O,READ:S};Re.routing=P,Object.freeze(P);var I=(function(){function T(){this.routing=P.WRITE,this.resultTransformer=void 0,this.database="",this.impersonatedUser=void 0,this.bookmarkManager=void 0,this.transactionConfig=void 0,this.auth=void 0,this.signal=void 0}return T})();Re.QueryConfig=I;var C=(function(){function T(k,M,V,z,F){M===void 0&&(M={}),z===void 0&&(z=function(Y){return new s.default(Y)}),F===void 0&&(F=function(Y){return new p.default(Y)}),A(M);var W=u.Logger.create(M);R(M,W),this._id=w++,this._meta=k,this._config=M,this._log=W,this._createConnectionProvider=V,this._createSession=z,this._defaultExecuteQueryBookmarkManager=(0,d.bookmarkManager)(),this._queryExecutor=F(this.session.bind(this)),this._connectionProvider=null,this.homeDatabaseCache=new m.default(g),this._afterConstruction()}return Object.defineProperty(T.prototype,"executeQueryBookmarkManager",{get:function(){return this._defaultExecuteQueryBookmarkManager},enumerable:!1,configurable:!0}),T.prototype.executeQuery=function(k,M,V){var z,F,W;return V===void 0&&(V={}),t(this,void 0,void 0,function(){var Y,K,N;return r(this,function(x){switch(x.label){case 0:if(Y=V.bookmarkManager===null?void 0:(z=V.bookmarkManager)!==null&&z!==void 0?z:this.executeQueryBookmarkManager,K=(F=V.resultTransformer)!==null&&F!==void 0?F:c.default.eagerResultTransformer(),N=(W=V.routing)!==null&&W!==void 0?W:P.WRITE,N!==P.READ&&N!==P.WRITE)throw(0,b.newError)('Illegal query routing config: "'.concat(N,'"'));return[4,this._queryExecutor.execute({resultTransformer:K,bookmarkManager:Y,routing:N,database:V.database,impersonatedUser:V.impersonatedUser,transactionConfig:V.transactionConfig,auth:V.auth,signal:V.signal},k,M)];case 1:return[2,x.sent()]}})})},T.prototype.verifyConnectivity=function(k){var M=k===void 0?{}:k,V=M.database,z=V===void 0?"":V,F=this._getOrCreateConnectionProvider();return F.verifyConnectivityAndGetServerInfo({database:z,accessMode:h})},T.prototype.verifyAuthentication=function(k){var M=k===void 0?{}:k,V=M.database,z=M.auth;return t(this,void 0,void 0,function(){var F;return r(this,function(W){switch(W.label){case 0:return F=this._getOrCreateConnectionProvider(),[4,F.verifyAuthentication({database:V??"system",auth:z,accessMode:h})];case 1:return[2,W.sent()]}})})},T.prototype.getServerInfo=function(k){var M=k===void 0?{}:k,V=M.database,z=V===void 0?"":V,F=this._getOrCreateConnectionProvider();return F.verifyConnectivityAndGetServerInfo({database:z,accessMode:h})},T.prototype.supportsMultiDb=function(){var k=this._getOrCreateConnectionProvider();return k.supportsMultiDb()},T.prototype.supportsTransactionConfig=function(){var k=this._getOrCreateConnectionProvider();return k.supportsTransactionConfig()},T.prototype.supportsUserImpersonation=function(){var k=this._getOrCreateConnectionProvider();return k.supportsUserImpersonation()},T.prototype.supportsSessionAuth=function(){var k=this._getOrCreateConnectionProvider();return k.supportsSessionAuth()},T.prototype.getNegotiatedProtocolVersion=function(){var k=this._getOrCreateConnectionProvider();return k.getNegotiatedProtocolVersion()},T.prototype.isEncrypted=function(){return this._isEncrypted()},T.prototype._supportsRouting=function(){return this._meta.routing},T.prototype._isEncrypted=function(){return this._config.encrypted===l.ENCRYPTION_ON||this._config.encrypted===!0},T.prototype._getTrust=function(){return this._config.trust},T.prototype.session=function(k){var M=k===void 0?{}:k,V=M.defaultAccessMode,z=V===void 0?v:V,F=M.bookmarks,W=M.database,Y=W===void 0?"":W,K=M.impersonatedUser,N=M.fetchSize,x=M.bookmarkManager,L=M.notificationFilter,$=M.auth;return this._newSession({defaultAccessMode:z,bookmarkOrBookmarks:F,database:Y,reactive:!1,impersonatedUser:K,fetchSize:j(N,this._config.fetchSize),bookmarkManager:x,notificationFilter:L,auth:$})},T.prototype.close=function(){return this._log.info("Driver ".concat(this._id," closing")),this._connectionProvider!=null?this._connectionProvider.close():Promise.resolve()},T.prototype[Symbol.asyncDispose]=function(){return this.close()},T.prototype._afterConstruction=function(){this._log.info("".concat(this._meta.typename," driver ").concat(this._id," created for server address ").concat(this._meta.address.toString()))},T.prototype._homeDatabaseCallback=function(k,M){this.homeDatabaseCache.set(k,M)},T.prototype._newSession=function(k){var M=k.defaultAccessMode,V=k.bookmarkOrBookmarks,z=k.database,F=k.reactive,W=k.impersonatedUser,Y=k.fetchSize,K=k.bookmarkManager,N=k.notificationFilter,x=k.auth,L=s.default._validateSessionMode(M),$=this._getOrCreateConnectionProvider(),H=this.homeDatabaseCache.get((0,_.cacheKey)(x,W)),G=this._homeDatabaseCallback.bind(this),Q=V!=null?new i.Bookmarks(V):i.Bookmarks.empty();return this._createSession({mode:L,database:z??"",connectionProvider:$,bookmarks:Q,config:e({cachedHomeDatabase:H,routingDriver:this._supportsRouting()},this._config),reactive:F,impersonatedUser:W,fetchSize:Y,bookmarkManager:K,notificationFilter:N,auth:x,log:this._log,homeDatabaseCallback:G})},T.prototype._getOrCreateConnectionProvider=function(){return this._connectionProvider==null&&(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,q(this._config))),this._connectionProvider},T})();Re.Driver=C;function R(T,k){var M,V,z=T.resolver;if(z!=null&&typeof z!="function")throw new TypeError("Configured resolver should be a function. Got: ".concat(typeof z));if(T.connectionAcquisitionTimeout<T.connectionTimeout&&k.warn('Configuration for "connectionAcquisitionTimeout" should be greater than or equal to "connectionTimeout". Otherwise, the connection acquisition timeout will take precedence for over the connection timeout in scenarios where a new connection is created while it is acquired'),((M=T.notificationFilter)===null||M===void 0?void 0:M.disabledCategories)!=null&&((V=T.notificationFilter)===null||V===void 0?void 0:V.disabledClassifications)!=null)throw new Error(`The notificationFilter can't have both "disabledCategories" and  "disabledClassifications" configured at the same time.`);return T}function A(T){T.maxConnectionLifetime=D(T.maxConnectionLifetime,f),T.maxConnectionPoolSize=D(T.maxConnectionPoolSize,a.DEFAULT_POOL_MAX_SIZE),T.connectionAcquisitionTimeout=D(T.connectionAcquisitionTimeout,a.DEFAULT_POOL_ACQUISITION_TIMEOUT),T.fetchSize=j(T.fetchSize,y),T.connectionTimeout=U(T),T.connectionLivenessCheckTimeout=B(T.connectionLivenessCheckTimeout)}function D(T,k){var M=parseInt(T,10);return M>0||M===0?M:M<0?Number.MAX_SAFE_INTEGER:k}function j(T,k){var M=parseInt(T,10);if(M>0||M===a.FETCH_ALL)return M;if(M===0||M<0)throw new Error("The fetch size can only be a positive value or ".concat(a.FETCH_ALL," for ALL. However fetchSize = ").concat(M));return k}function U(T){var k=parseInt(T.connectionTimeout,10);return k===0||!isNaN(k)&&k<0?null:isNaN(k)?a.DEFAULT_CONNECTION_TIMEOUT_MILLIS:k}function B(T){if(T!=null){var k=parseInt(T,10);if(k<0||Number.isNaN(k))throw new Error("The connectionLivenessCheckTimeout can only be a positive value or 0 for always. However connectionLivenessCheckTimeout = ".concat(k));return k}}function q(T){return new o.default(T.resolver)}return Re.default=C,Re}var Yc={},Cp;function Jw(){if(Cp)return Yc;Cp=1,Object.defineProperty(Yc,"__esModule",{value:!0});var e=it(),t=si(),r={basic:function(i,o,a){return a!=null?{scheme:"basic",principal:i,credentials:o,realm:a}:{scheme:"basic",principal:i,credentials:o}},kerberos:function(i){return{scheme:"kerberos",principal:"",credentials:i}},bearer:function(i){return{scheme:"bearer",credentials:i}},none:function(){return{scheme:"none"}},custom:function(i,o,a,u,s){var l={scheme:u,principal:i};if(n(o)&&(l.credentials=o),n(a)&&(l.realm=a),n(s)){try{(0,t.stringify)(s)}catch(d){throw(0,e.newError)("Circular references in custom auth token parameters",void 0,d)}l.parameters=s}return l}};function n(i){return!(i==null||i===""||Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length===0)}return Yc.default=r,Yc}var Ze={},Rp;function MC(){if(Rp)return Ze;Rp=1;var e=Ze&&Ze.__awaiter||function(b,m,_,f){function y(g){return g instanceof _?g:new _(function(h){h(g)})}return new(_||(_=Promise))(function(g,h){function v(O){try{E(f.next(O))}catch(S){h(S)}}function w(O){try{E(f.throw(O))}catch(S){h(S)}}function E(O){O.done?g(O.value):y(O.value).then(v,w)}E((f=f.apply(b,m||[])).next())})},t=Ze&&Ze.__generator||function(b,m){var _={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},f,y,g,h;return h={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function v(E){return function(O){return w([E,O])}}function w(E){if(f)throw new TypeError("Generator is already executing.");for(;h&&(h=0,E[0]&&(_=0)),_;)try{if(f=1,y&&(g=E[0]&2?y.return:E[0]?y.throw||((g=y.return)&&g.call(y),0):y.next)&&!(g=g.call(y,E[1])).done)return g;switch(y=0,g&&(E=[E[0]&2,g.value]),E[0]){case 0:case 1:g=E;break;case 4:return _.label++,{value:E[1],done:!1};case 5:_.label++,y=E[1],E=[0];continue;case 7:E=_.ops.pop(),_.trys.pop();continue;default:if(g=_.trys,!(g=g.length>0&&g[g.length-1])&&(E[0]===6||E[0]===2)){_=0;continue}if(E[0]===3&&(!g||E[1]>g[0]&&E[1]<g[3])){_.label=E[1];break}if(E[0]===6&&_.label<g[1]){_.label=g[1],g=E;break}if(g&&_.label<g[2]){_.label=g[2],_.ops.push(E);break}g[2]&&_.ops.pop(),_.trys.pop();continue}E=m.call(b,_)}catch(O){E=[6,O],y=0}finally{f=g=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},r=Ze&&Ze.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.staticAuthTokenManager=Ze.authTokenManagers=Ze.AuthTokenAndExpiration=void 0;var n=r(Jw()),i=Pc(),o=(function(){function b(){}return b.prototype.getToken=function(){throw new Error("Not Implemented")},b.prototype.handleSecurityException=function(m,_){throw new Error("Not implemented")},b})();Ze.default=o;var a=(function(){function b(){this.token=n.default.none(),this.expiration=void 0}return b})();Ze.AuthTokenAndExpiration=a;var u=(function(){function b(){}return b.prototype.bearer=function(m){var _=m.tokenProvider;if(typeof _!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof _));return new c(_,["Neo.ClientError.Security.Unauthorized","Neo.ClientError.Security.TokenExpired"])},b.prototype.basic=function(m){var _=this,f=m.tokenProvider;if(typeof f!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof f));return new c(function(){return e(_,void 0,void 0,function(){var y;return t(this,function(g){switch(g.label){case 0:return y={},[4,f()];case 1:return[2,(y.token=g.sent(),y)]}})})},["Neo.ClientError.Security.Unauthorized"])},b})(),s=new u;Ze.authTokenManagers=s,Object.freeze(s);function l(b){var m=b.authToken;return new p(m)}Ze.staticAuthTokenManager=l;var d=(function(){function b(m){m===void 0&&(m=[]),this._subscribers=m}return b.prototype.subscribe=function(m){this._subscribers.push(m)},b.prototype.onCompleted=function(m){this._subscribers.forEach(function(_){return _.onCompleted(m)})},b.prototype.onError=function(m){this._subscribers.forEach(function(_){return _.onError(m)})},b})(),c=(function(){function b(m,_,f,y){this._tokenProvider=m,this._handledSecurityCodes=_,this._currentAuthData=f,this._refreshObservable=y}return b.prototype.getToken=function(){var m;return e(this,void 0,void 0,function(){return t(this,function(_){switch(_.label){case 0:return this._currentAuthData===void 0||this._currentAuthData.expiration!==void 0&&this._currentAuthData.expiration<new Date?[4,this._refreshAuthToken()]:[3,2];case 1:_.sent(),_.label=2;case 2:return[2,(m=this._currentAuthData)===null||m===void 0?void 0:m.token]}})})},b.prototype.handleSecurityException=function(m,_){var f;return this._handledSecurityCodes.includes(_)?(i.util.equals(m,(f=this._currentAuthData)===null||f===void 0?void 0:f.token)&&this._scheduleRefreshAuthToken(),!0):!1},b.prototype._scheduleRefreshAuthToken=function(m){var _=this;this._refreshObservable===void 0&&(this._currentAuthData=void 0,this._refreshObservable=new d,Promise.resolve(this._tokenProvider()).then(function(f){var y;_._currentAuthData=f,(y=_._refreshObservable)===null||y===void 0||y.onCompleted(f)}).catch(function(f){var y;(y=_._refreshObservable)===null||y===void 0||y.onError(f)}).finally(function(){_._refreshObservable=void 0})),m!==void 0&&this._refreshObservable.subscribe(m)},b.prototype._refreshAuthToken=function(){return e(this,void 0,void 0,function(){var m=this;return t(this,function(_){switch(_.label){case 0:return[4,new Promise(function(f,y){m._scheduleRefreshAuthToken({onCompleted:f,onError:y})})];case 1:return[2,_.sent()]}})})},b})(),p=(function(){function b(m){this._authToken=m}return b.prototype.getToken=function(){return this._authToken},b.prototype.handleSecurityException=function(m,_){return!1},b})();return Ze}var Lr={},Ap;function DC(){if(Ap)return Lr;Ap=1;var e=Lr&&Lr.__extends||(function(){var n=function(i,o){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(a[s]=u[s])},n(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");n(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}})();Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.InternalConfig=Lr.Config=void 0;var t=(function(){function n(){this.encrypted=void 0,this.trust=void 0,this.trustedCertificates=[],this.maxConnectionPoolSize=100,this.maxConnectionLifetime=3600*1e3,this.connectionAcquisitionTimeout=6e4,this.maxTransactionRetryTime=3e4,this.connectionLivenessCheckTimeout=void 0,this.connectionTimeout=3e4,this.disableLosslessIntegers=!1,this.useBigInt=!1,this.logging=void 0,this.resolver=void 0,this.notificationFilter=void 0,this.userAgent=void 0,this.telemetryDisabled=!1,this.clientCertificate=void 0}return n})();Lr.Config=t;var r=(function(n){e(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i})(t);return Lr.InternalConfig=r,Lr}var ke={},Ip;function LC(){if(Ip)return ke;Ip=1;var e=ke&&ke.__extends||(function(){var h=function(v,w){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,O){E.__proto__=O}||function(E,O){for(var S in O)Object.prototype.hasOwnProperty.call(O,S)&&(E[S]=O[S])},h(v,w)};return function(v,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");h(v,w);function E(){this.constructor=v}v.prototype=w===null?Object.create(w):(E.prototype=w.prototype,new E)}})(),t=ke&&ke.__assign||function(){return t=Object.assign||function(h){for(var v,w=1,E=arguments.length;w<E;w++){v=arguments[w];for(var O in v)Object.prototype.hasOwnProperty.call(v,O)&&(h[O]=v[O])}return h},t.apply(this,arguments)},r=ke&&ke.__createBinding||(Object.create?(function(h,v,w,E){E===void 0&&(E=w);var O=Object.getOwnPropertyDescriptor(v,w);(!O||("get"in O?!v.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return v[w]}}),Object.defineProperty(h,E,O)}):(function(h,v,w,E){E===void 0&&(E=w),h[E]=v[w]})),n=ke&&ke.__setModuleDefault||(Object.create?(function(h,v){Object.defineProperty(h,"default",{enumerable:!0,value:v})}):function(h,v){h.default=v}),i=ke&&ke.__importStar||function(h){if(h&&h.__esModule)return h;var v={};if(h!=null)for(var w in h)w!=="default"&&Object.prototype.hasOwnProperty.call(h,w)&&r(v,h,w);return n(v,h),v};Object.defineProperty(ke,"__esModule",{value:!0}),ke.resolveCertificateProvider=ke.clientCertificateProviders=ke.RotatingClientCertificateProvider=ke.ClientCertificateProvider=void 0;var o=i(si()),a=(function(){function h(){this.certfile="",this.keyfile="",this.password=void 0}return h})();ke.default=a;var u=(function(){function h(){}return h.prototype.hasUpdate=function(){throw new Error("Not Implemented")},h.prototype.getClientCertificate=function(){throw new Error("Not Implemented")},h})();ke.ClientCertificateProvider=u;var s=(function(h){e(v,h);function v(){return h!==null&&h.apply(this,arguments)||this}return v.prototype.updateCertificate=function(w){throw new Error("Not implemented")},v})(u);ke.RotatingClientCertificateProvider=s;var l=(function(){function h(){}return h.prototype.rotating=function(v){var w=v.initialCertificate;if(w==null||!p(w))throw new TypeError("initialCertificate should be ClientCertificate, but got ".concat(o.stringify(w)));var E=t({},w);return new g(E)},h})(),d=new l;ke.clientCertificateProviders=d,Object.freeze(d);function c(h){if(h!=null){if(typeof h=="object"&&"hasUpdate"in h&&"getClientCertificate"in h&&typeof h.getClientCertificate=="function"&&typeof h.hasUpdate=="function")return h;if(p(h)){var v=t({},h);return{getClientCertificate:function(){return v},hasUpdate:function(){return!1}}}throw new TypeError("clientCertificate should be configured with ClientCertificate or ClientCertificateProvider, but got ".concat(o.stringify(h)))}}ke.resolveCertificateProvider=c;function p(h){return h!=null&&typeof h=="object"&&"certfile"in h&&b(h.certfile)&&"keyfile"in h&&m(h.keyfile)&&y("password",h)}function b(h){return _(h)||f(h,_)}function m(h){function v(w){return typeof w=="string"||w!=null&&typeof w=="object"&&"path"in w&&typeof w.path=="string"&&y("password",w)}return v(h)||f(h,v)}function _(h){return typeof h=="string"}function f(h,v,w){return w===void 0&&(w=!1),Array.isArray(h)&&(w||h.length>0)&&h.filter(v).length===h.length}function y(h,v){return!(h in v)||v[h]==null||typeof v[h]=="string"}var g=(function(){function h(v,w){w===void 0&&(w=!1),this._certificate=v,this._updated=w}return h.prototype.hasUpdate=function(){try{return this._updated}finally{this._updated=!1}},h.prototype.getClientCertificate=function(){return this._certificate},h.prototype.updateCertificate=function(v){if(!p(v))throw new TypeError("certificate should be ClientCertificate, but got ".concat(o.stringify(v)));this._certificate=t({},v),this._updated=!0},h})();return ke}var jp;function ae(){return jp||(jp=1,(function(e){var t=Bt&&Bt.__createBinding||(Object.create?(function(T,k,M,V){V===void 0&&(V=M);var z=Object.getOwnPropertyDescriptor(k,M);(!z||("get"in z?!k.__esModule:z.writable||z.configurable))&&(z={enumerable:!0,get:function(){return k[M]}}),Object.defineProperty(T,V,z)}):(function(T,k,M,V){V===void 0&&(V=M),T[V]=k[M]})),r=Bt&&Bt.__setModuleDefault||(Object.create?(function(T,k){Object.defineProperty(T,"default",{enumerable:!0,value:k})}):function(T,k){T.default=k}),n=Bt&&Bt.__importStar||function(T){if(T&&T.__esModule)return T;var k={};if(T!=null)for(var M in T)M!=="default"&&Object.prototype.hasOwnProperty.call(T,M)&&t(k,T,M);return r(k,T),k},i=Bt&&Bt.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(e,"__esModule",{value:!0}),e.EagerResult=e.Result=e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.GqlStatusObject=e.Notification=e.ServerInfo=e.queryType=e.ResultSummary=e.Record=e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=e.Time=e.LocalTime=e.LocalDateTime=e.isTime=e.isLocalTime=e.isLocalDateTime=e.isDuration=e.isDateTime=e.isDate=e.Duration=e.DateTime=e.Date=e.Point=e.isPoint=e.internal=e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=e.Integer=e.error=e.isRetriableError=e.GQLError=e.newGQLError=e.Neo4jError=e.newError=e.authTokenManagers=void 0,e.resolveCertificateProvider=e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.routing=e.staticAuthTokenManager=e.bookmarkManager=e.auth=e.json=e.driver=e.types=e.Driver=e.Session=e.TransactionPromise=e.ManagedTransaction=e.Transaction=e.Connection=e.Releasable=e.ConnectionProvider=void 0;var o=it();Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return o.newError}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return o.Neo4jError}}),Object.defineProperty(e,"newGQLError",{enumerable:!0,get:function(){return o.newGQLError}}),Object.defineProperty(e,"GQLError",{enumerable:!0,get:function(){return o.GQLError}}),Object.defineProperty(e,"isRetriableError",{enumerable:!0,get:function(){return o.isRetriableError}});var a=n(Ec());e.Integer=a.default,Object.defineProperty(e,"int",{enumerable:!0,get:function(){return a.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return a.isInt}}),Object.defineProperty(e,"inSafeRange",{enumerable:!0,get:function(){return a.inSafeRange}}),Object.defineProperty(e,"toNumber",{enumerable:!0,get:function(){return a.toNumber}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return a.toString}});var u=mC();Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return u.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return u.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return u.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return u.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return u.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return u.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return u.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return u.isLocalTime}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return u.isTime}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return u.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return u.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return u.Time}});var s=gC();Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return s.Node}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return s.isNode}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return s.Relationship}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return s.isRelationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return s.UnboundRelationship}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return s.isUnboundRelationship}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return s.Path}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return s.isPath}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return s.PathSegment}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return s.isPathSegment}});var l=i(wC());e.Record=l.default;var d=OC();Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return d.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return d.Point}});var c=n(Ww());e.ResultSummary=c.default,Object.defineProperty(e,"queryType",{enumerable:!0,get:function(){return c.queryType}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return c.ServerInfo}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return c.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return c.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return c.QueryStatistics}}),Object.defineProperty(e,"Stats",{enumerable:!0,get:function(){return c.Stats}});var p=n($w());e.Notification=p.default,Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return p.GqlStatusObject}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return p.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return p.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return p.notificationSeverityLevel}});var b=AC();Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return b.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return b.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return b.notificationFilterMinimumSeverityLevel}});var m=i(_h());e.Result=m.default;var _=i(Hw());e.EagerResult=_.default;var f=n(IC());e.ConnectionProvider=f.default,Object.defineProperty(e,"Releasable",{enumerable:!0,get:function(){return f.Releasable}});var y=i(jC());e.Connection=y.default;var g=i(zw());e.Transaction=g.default;var h=i(Kw());e.ManagedTransaction=h.default;var v=i(Gw());e.TransactionPromise=v.default;var w=i(Zw());e.Session=w.default;var E=n(Tp()),O=E;e.Driver=E.default,e.driver=O;var S=i(Jw());e.auth=S.default;var P=Xw();Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return P.bookmarkManager}});var I=MC();Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return I.authTokenManagers}}),Object.defineProperty(e,"staticAuthTokenManager",{enumerable:!0,get:function(){return I.staticAuthTokenManager}});var C=Tp();Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return C.routing}});var R=n(DC());e.types=R;var A=n(si());e.json=A;var D=i(Qw());e.resultTransformers=D.default;var j=LC();Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return j.clientCertificateProviders}}),Object.defineProperty(e,"resolveCertificateProvider",{enumerable:!0,get:function(){return j.resolveCertificateProvider}});var U=n(Pc());e.internal=U;var B={SERVICE_UNAVAILABLE:o.SERVICE_UNAVAILABLE,SESSION_EXPIRED:o.SESSION_EXPIRED,PROTOCOL_ERROR:o.PROTOCOL_ERROR};e.error=B;var q={authTokenManagers:I.authTokenManagers,newError:o.newError,Neo4jError:o.Neo4jError,newGQLError:o.newGQLError,GQLError:o.GQLError,isRetriableError:o.isRetriableError,error:B,Integer:a.default,int:a.int,isInt:a.isInt,inSafeRange:a.inSafeRange,toNumber:a.toNumber,toString:a.toString,internal:U,isPoint:d.isPoint,Point:d.Point,Date:u.Date,DateTime:u.DateTime,Duration:u.Duration,isDate:u.isDate,isDateTime:u.isDateTime,isDuration:u.isDuration,isLocalDateTime:u.isLocalDateTime,isLocalTime:u.isLocalTime,isTime:u.isTime,LocalDateTime:u.LocalDateTime,LocalTime:u.LocalTime,Time:u.Time,Node:s.Node,isNode:s.isNode,Relationship:s.Relationship,isRelationship:s.isRelationship,UnboundRelationship:s.UnboundRelationship,isUnboundRelationship:s.isUnboundRelationship,Path:s.Path,isPath:s.isPath,PathSegment:s.PathSegment,isPathSegment:s.isPathSegment,Record:l.default,ResultSummary:c.default,queryType:c.queryType,ServerInfo:c.ServerInfo,Notification:p.default,GqlStatusObject:p.GqlStatusObject,Plan:c.Plan,ProfiledPlan:c.ProfiledPlan,QueryStatistics:c.QueryStatistics,Stats:c.Stats,Result:m.default,EagerResult:_.default,Transaction:g.default,ManagedTransaction:h.default,TransactionPromise:v.default,Session:w.default,Driver:E.default,Connection:y.default,Releasable:f.Releasable,types:R,driver:O,json:A,auth:S.default,bookmarkManager:P.bookmarkManager,routing:C.routing,resultTransformers:D.default,notificationCategory:p.notificationCategory,notificationClassification:p.notificationClassification,notificationSeverityLevel:p.notificationSeverityLevel,notificationFilterDisabledCategory:b.notificationFilterDisabledCategory,notificationFilterDisabledClassification:b.notificationFilterDisabledClassification,notificationFilterMinimumSeverityLevel:b.notificationFilterMinimumSeverityLevel,clientCertificateProviders:j.clientCertificateProviders,resolveCertificateProvider:j.resolveCertificateProvider};e.default=q})(Bt)),Bt}var So={},Ei={},da={},ha={},va={},Np;function ge(){if(Np)return va;Np=1,Object.defineProperty(va,"__esModule",{value:!0}),va.isFunction=void 0;function e(t){return typeof t=="function"}return va.isFunction=e,va}var lt={},pa={},_a={},kp;function _o(){if(kp)return _a;kp=1,Object.defineProperty(_a,"__esModule",{value:!0}),_a.createErrorClass=void 0;function e(t){var r=function(i){Error.call(i),i.stack=new Error().stack},n=t(r);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}return _a.createErrorClass=e,_a}var Mp;function eO(){if(Mp)return pa;Mp=1,Object.defineProperty(pa,"__esModule",{value:!0}),pa.UnsubscriptionError=void 0;var e=_o();return pa.UnsubscriptionError=e.createErrorClass(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(i,o){return o+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}}),pa}var ba={},Dp;function ci(){if(Dp)return ba;Dp=1,Object.defineProperty(ba,"__esModule",{value:!0}),ba.arrRemove=void 0;function e(t,r){if(t){var n=t.indexOf(r);0<=n&&t.splice(n,1)}}return ba.arrRemove=e,ba}var Lp;function Ut(){if(Lp)return lt;Lp=1;var e=lt&&lt.__values||function(l){var d=typeof Symbol=="function"&&Symbol.iterator,c=d&&l[d],p=0;if(c)return c.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&p>=l.length&&(l=void 0),{value:l&&l[p++],done:!l}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},t=lt&&lt.__read||function(l,d){var c=typeof Symbol=="function"&&l[Symbol.iterator];if(!c)return l;var p=c.call(l),b,m=[],_;try{for(;(d===void 0||d-- >0)&&!(b=p.next()).done;)m.push(b.value)}catch(f){_={error:f}}finally{try{b&&!b.done&&(c=p.return)&&c.call(p)}finally{if(_)throw _.error}}return m},r=lt&&lt.__spreadArray||function(l,d){for(var c=0,p=d.length,b=l.length;c<p;c++,b++)l[b]=d[c];return l};Object.defineProperty(lt,"__esModule",{value:!0}),lt.isSubscription=lt.EMPTY_SUBSCRIPTION=lt.Subscription=void 0;var n=ge(),i=eO(),o=ci(),a=(function(){function l(d){this.initialTeardown=d,this.closed=!1,this._parentage=null,this._finalizers=null}return l.prototype.unsubscribe=function(){var d,c,p,b,m;if(!this.closed){this.closed=!0;var _=this._parentage;if(_)if(this._parentage=null,Array.isArray(_))try{for(var f=e(_),y=f.next();!y.done;y=f.next()){var g=y.value;g.remove(this)}}catch(S){d={error:S}}finally{try{y&&!y.done&&(c=f.return)&&c.call(f)}finally{if(d)throw d.error}}else _.remove(this);var h=this.initialTeardown;if(n.isFunction(h))try{h()}catch(S){m=S instanceof i.UnsubscriptionError?S.errors:[S]}var v=this._finalizers;if(v){this._finalizers=null;try{for(var w=e(v),E=w.next();!E.done;E=w.next()){var O=E.value;try{s(O)}catch(S){m=m??[],S instanceof i.UnsubscriptionError?m=r(r([],t(m)),t(S.errors)):m.push(S)}}}catch(S){p={error:S}}finally{try{E&&!E.done&&(b=w.return)&&b.call(w)}finally{if(p)throw p.error}}}if(m)throw new i.UnsubscriptionError(m)}},l.prototype.add=function(d){var c;if(d&&d!==this)if(this.closed)s(d);else{if(d instanceof l){if(d.closed||d._hasParent(this))return;d._addParent(this)}(this._finalizers=(c=this._finalizers)!==null&&c!==void 0?c:[]).push(d)}},l.prototype._hasParent=function(d){var c=this._parentage;return c===d||Array.isArray(c)&&c.includes(d)},l.prototype._addParent=function(d){var c=this._parentage;this._parentage=Array.isArray(c)?(c.push(d),c):c?[c,d]:d},l.prototype._removeParent=function(d){var c=this._parentage;c===d?this._parentage=null:Array.isArray(c)&&o.arrRemove(c,d)},l.prototype.remove=function(d){var c=this._finalizers;c&&o.arrRemove(c,d),d instanceof l&&d._removeParent(this)},l.EMPTY=(function(){var d=new l;return d.closed=!0,d})(),l})();lt.Subscription=a,lt.EMPTY_SUBSCRIPTION=a.EMPTY;function u(l){return l instanceof a||l&&"closed"in l&&n.isFunction(l.remove)&&n.isFunction(l.add)&&n.isFunction(l.unsubscribe)}lt.isSubscription=u;function s(l){n.isFunction(l)?l():l.unsubscribe()}return lt}var ya={},Up;function Tc(){return Up||(Up=1,Object.defineProperty(ya,"__esModule",{value:!0}),ya.config=void 0,ya.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}),ya}var ma={},Si={},Bp;function tO(){return Bp||(Bp=1,(function(e){var t=Si&&Si.__read||function(n,i){var o=typeof Symbol=="function"&&n[Symbol.iterator];if(!o)return n;var a=o.call(n),u,s=[],l;try{for(;(i===void 0||i-- >0)&&!(u=a.next()).done;)s.push(u.value)}catch(d){l={error:d}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(l)throw l.error}}return s},r=Si&&Si.__spreadArray||function(n,i){for(var o=0,a=i.length,u=n.length;o<a;o++,u++)n[u]=i[o];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutProvider=void 0,e.timeoutProvider={setTimeout:function(n,i){for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var u=e.timeoutProvider.delegate;return u?.setTimeout?u.setTimeout.apply(u,r([n,i],t(o))):setTimeout.apply(void 0,r([n,i],t(o)))},clearTimeout:function(n){var i=e.timeoutProvider.delegate;return(i?.clearTimeout||clearTimeout)(n)},delegate:void 0}})(Si)),Si}var qp;function rO(){if(qp)return ma;qp=1,Object.defineProperty(ma,"__esModule",{value:!0}),ma.reportUnhandledError=void 0;var e=Tc(),t=tO();function r(n){t.timeoutProvider.setTimeout(function(){var i=e.config.onUnhandledError;if(i)i(n);else throw n})}return ma.reportUnhandledError=r,ma}var ga={},xp;function ot(){if(xp)return ga;xp=1,Object.defineProperty(ga,"__esModule",{value:!0}),ga.noop=void 0;function e(){}return ga.noop=e,ga}var Vt={},Fp;function UC(){if(Fp)return Vt;Fp=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.createNotification=Vt.nextNotification=Vt.errorNotification=Vt.COMPLETE_NOTIFICATION=void 0,Vt.COMPLETE_NOTIFICATION=(function(){return r("C",void 0,void 0)})();function e(n){return r("E",void 0,n)}Vt.errorNotification=e;function t(n){return r("N",n,void 0)}Vt.nextNotification=t;function r(n,i,o){return{kind:n,value:i,error:o}}return Vt.createNotification=r,Vt}var Pi={},Vp;function bh(){if(Vp)return Pi;Vp=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.captureError=Pi.errorContext=void 0;var e=Tc(),t=null;function r(i){if(e.config.useDeprecatedSynchronousErrorHandling){var o=!t;if(o&&(t={errorThrown:!1,error:null}),i(),o){var a=t,u=a.errorThrown,s=a.error;if(t=null,u)throw s}}else i()}Pi.errorContext=r;function n(i){e.config.useDeprecatedSynchronousErrorHandling&&t&&(t.errorThrown=!0,t.error=i)}return Pi.captureError=n,Pi}var $p;function Cc(){return $p||($p=1,(function(e){var t=ha&&ha.__extends||(function(){var g=function(h,v){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,E){w.__proto__=E}||function(w,E){for(var O in E)Object.prototype.hasOwnProperty.call(E,O)&&(w[O]=E[O])},g(h,v)};return function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");g(h,v);function w(){this.constructor=h}h.prototype=v===null?Object.create(v):(w.prototype=v.prototype,new w)}})();Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_OBSERVER=e.SafeSubscriber=e.Subscriber=void 0;var r=ge(),n=Ut(),i=Tc(),o=rO(),a=ot(),u=UC(),s=tO(),l=bh(),d=(function(g){t(h,g);function h(v){var w=g.call(this)||this;return w.isStopped=!1,v?(w.destination=v,n.isSubscription(v)&&v.add(w)):w.destination=e.EMPTY_OBSERVER,w}return h.create=function(v,w,E){return new m(v,w,E)},h.prototype.next=function(v){this.isStopped?y(u.nextNotification(v),this):this._next(v)},h.prototype.error=function(v){this.isStopped?y(u.errorNotification(v),this):(this.isStopped=!0,this._error(v))},h.prototype.complete=function(){this.isStopped?y(u.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},h.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,g.prototype.unsubscribe.call(this),this.destination=null)},h.prototype._next=function(v){this.destination.next(v)},h.prototype._error=function(v){try{this.destination.error(v)}finally{this.unsubscribe()}},h.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},h})(n.Subscription);e.Subscriber=d;var c=Function.prototype.bind;function p(g,h){return c.call(g,h)}var b=(function(){function g(h){this.partialObserver=h}return g.prototype.next=function(h){var v=this.partialObserver;if(v.next)try{v.next(h)}catch(w){_(w)}},g.prototype.error=function(h){var v=this.partialObserver;if(v.error)try{v.error(h)}catch(w){_(w)}else _(h)},g.prototype.complete=function(){var h=this.partialObserver;if(h.complete)try{h.complete()}catch(v){_(v)}},g})(),m=(function(g){t(h,g);function h(v,w,E){var O=g.call(this)||this,S;if(r.isFunction(v)||!v)S={next:v??void 0,error:w??void 0,complete:E??void 0};else{var P;O&&i.config.useDeprecatedNextContext?(P=Object.create(v),P.unsubscribe=function(){return O.unsubscribe()},S={next:v.next&&p(v.next,P),error:v.error&&p(v.error,P),complete:v.complete&&p(v.complete,P)}):S=v}return O.destination=new b(S),O}return h})(d);e.SafeSubscriber=m;function _(g){i.config.useDeprecatedSynchronousErrorHandling?l.captureError(g):o.reportUnhandledError(g)}function f(g){throw g}function y(g,h){var v=i.config.onStoppedNotification;v&&s.timeoutProvider.setTimeout(function(){return v(g,h)})}e.EMPTY_OBSERVER={closed:!0,next:a.noop,error:f,complete:a.noop}})(ha)),ha}var wa={},Wp;function Vl(){return Wp||(Wp=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.observable=void 0,wa.observable=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})()),wa}var Ti={},Oa={},Hp;function at(){if(Hp)return Oa;Hp=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.identity=void 0;function e(t){return t}return Oa.identity=e,Oa}var zp;function $l(){if(zp)return Ti;zp=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.pipeFromArray=Ti.pipe=void 0;var e=at();function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return r(n)}Ti.pipe=t;function r(n){return n.length===0?e.identity:n.length===1?n[0]:function(o){return n.reduce(function(a,u){return u(a)},o)}}return Ti.pipeFromArray=r,Ti}var Kp;function Ee(){if(Kp)return da;Kp=1,Object.defineProperty(da,"__esModule",{value:!0}),da.Observable=void 0;var e=Cc(),t=Ut(),r=Vl(),n=$l(),i=Tc(),o=ge(),a=bh(),u=(function(){function c(p){p&&(this._subscribe=p)}return c.prototype.lift=function(p){var b=new c;return b.source=this,b.operator=p,b},c.prototype.subscribe=function(p,b,m){var _=this,f=d(p)?p:new e.SafeSubscriber(p,b,m);return a.errorContext(function(){var y=_,g=y.operator,h=y.source;f.add(g?g.call(f,h):h?_._subscribe(f):_._trySubscribe(f))}),f},c.prototype._trySubscribe=function(p){try{return this._subscribe(p)}catch(b){p.error(b)}},c.prototype.forEach=function(p,b){var m=this;return b=s(b),new b(function(_,f){var y=new e.SafeSubscriber({next:function(g){try{p(g)}catch(h){f(h),y.unsubscribe()}},error:f,complete:_});m.subscribe(y)})},c.prototype._subscribe=function(p){var b;return(b=this.source)===null||b===void 0?void 0:b.subscribe(p)},c.prototype[r.observable]=function(){return this},c.prototype.pipe=function(){for(var p=[],b=0;b<arguments.length;b++)p[b]=arguments[b];return n.pipeFromArray(p)(this)},c.prototype.toPromise=function(p){var b=this;return p=s(p),new p(function(m,_){var f;b.subscribe(function(y){return f=y},function(y){return _(y)},function(){return m(f)})})},c.create=function(p){return new c(p)},c})();da.Observable=u;function s(c){var p;return(p=c??i.config.Promise)!==null&&p!==void 0?p:Promise}function l(c){return c&&o.isFunction(c.next)&&o.isFunction(c.error)&&o.isFunction(c.complete)}function d(c){return c&&c instanceof e.Subscriber||l(c)&&t.isSubscription(c)}return da}var Ci={},Ea={},Ri={},Gp;function J(){if(Gp)return Ri;Gp=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.operate=Ri.hasLift=void 0;var e=ge();function t(n){return e.isFunction(n?.lift)}Ri.hasLift=t;function r(n){return function(i){if(t(i))return i.lift(function(o){try{return n(o,this)}catch(a){this.error(a)}});throw new TypeError("Unable to lift unknown Observable type")}}return Ri.operate=r,Ri}var Ur={},Yp;function ne(){if(Yp)return Ur;Yp=1;var e=Ur&&Ur.__extends||(function(){var i=function(o,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,s){u.__proto__=s}||function(u,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(u[l]=s[l])},i(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");i(o,a);function u(){this.constructor=o}o.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}})();Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.OperatorSubscriber=Ur.createOperatorSubscriber=void 0;var t=Cc();function r(i,o,a,u,s){return new n(i,o,a,u,s)}Ur.createOperatorSubscriber=r;var n=(function(i){e(o,i);function o(a,u,s,l,d,c){var p=i.call(this,a)||this;return p.onFinalize=d,p.shouldUnsubscribe=c,p._next=u?function(b){try{u(b)}catch(m){a.error(m)}}:i.prototype._next,p._error=l?function(b){try{l(b)}catch(m){a.error(m)}finally{this.unsubscribe()}}:i.prototype._error,p._complete=s?function(){try{s()}catch(b){a.error(b)}finally{this.unsubscribe()}}:i.prototype._complete,p}return o.prototype.unsubscribe=function(){var a;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var u=this.closed;i.prototype.unsubscribe.call(this),!u&&((a=this.onFinalize)===null||a===void 0||a.call(this))}},o})(t.Subscriber);return Ur.OperatorSubscriber=n,Ur}var Zp;function yh(){if(Zp)return Ea;Zp=1,Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.refCount=void 0;var e=J(),t=ne();function r(){return e.operate(function(n,i){var o=null;n._refCount++;var a=t.createOperatorSubscriber(i,void 0,void 0,void 0,function(){if(!n||n._refCount<=0||0<--n._refCount){o=null;return}var u=n._connection,s=o;o=null,u&&(!s||u===s)&&u.unsubscribe(),i.unsubscribe()});n.subscribe(a),a.closed||(o=n.connect())})}return Ea.refCount=r,Ea}var Xp;function Wl(){if(Xp)return Ci;Xp=1;var e=Ci&&Ci.__extends||(function(){var u=function(s,l){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(d[p]=c[p])},u(s,l)};return function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");u(s,l);function d(){this.constructor=s}s.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}})();Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.ConnectableObservable=void 0;var t=Ee(),r=Ut(),n=yh(),i=ne(),o=J(),a=(function(u){e(s,u);function s(l,d){var c=u.call(this)||this;return c.source=l,c.subjectFactory=d,c._subject=null,c._refCount=0,c._connection=null,o.hasLift(l)&&(c.lift=l.lift),c}return s.prototype._subscribe=function(l){return this.getSubject().subscribe(l)},s.prototype.getSubject=function(){var l=this._subject;return(!l||l.isStopped)&&(this._subject=this.subjectFactory()),this._subject},s.prototype._teardown=function(){this._refCount=0;var l=this._connection;this._subject=this._connection=null,l?.unsubscribe()},s.prototype.connect=function(){var l=this,d=this._connection;if(!d){d=this._connection=new r.Subscription;var c=this.getSubject();d.add(this.source.subscribe(i.createOperatorSubscriber(c,void 0,function(){l._teardown(),c.complete()},function(p){l._teardown(),c.error(p)},function(){return l._teardown()}))),d.closed&&(this._connection=null,d=r.Subscription.EMPTY)}return d},s.prototype.refCount=function(){return n.refCount()(this)},s})(t.Observable);return Ci.ConnectableObservable=a,Ci}var Sa={},dd={},Qp;function BC(){return Qp||(Qp=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.performanceTimestampProvider=void 0,e.performanceTimestampProvider={now:function(){return(e.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}})(dd)),dd}var Ai={},Jp;function nO(){return Jp||(Jp=1,(function(e){var t=Ai&&Ai.__read||function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var u=a.call(i),s,l=[],d;try{for(;(o===void 0||o-- >0)&&!(s=u.next()).done;)l.push(s.value)}catch(c){d={error:c}}finally{try{s&&!s.done&&(a=u.return)&&a.call(u)}finally{if(d)throw d.error}}return l},r=Ai&&Ai.__spreadArray||function(i,o){for(var a=0,u=o.length,s=i.length;a<u;a++,s++)i[s]=o[a];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrameProvider=void 0;var n=Ut();e.animationFrameProvider={schedule:function(i){var o=requestAnimationFrame,a=cancelAnimationFrame,u=e.animationFrameProvider.delegate;u&&(o=u.requestAnimationFrame,a=u.cancelAnimationFrame);var s=o(function(l){a=void 0,i(l)});return new n.Subscription(function(){return a?.(s)})},requestAnimationFrame:function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=e.animationFrameProvider.delegate;return(a?.requestAnimationFrame||requestAnimationFrame).apply(void 0,r([],t(i)))},cancelAnimationFrame:function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=e.animationFrameProvider.delegate;return(a?.cancelAnimationFrame||cancelAnimationFrame).apply(void 0,r([],t(i)))},delegate:void 0}})(Ai)),Ai}var e_;function qC(){if(e_)return Sa;e_=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.animationFrames=void 0;var e=Ee(),t=BC(),r=nO();function n(a){return a?i(a):o}Sa.animationFrames=n;function i(a){return new e.Observable(function(u){var s=a||t.performanceTimestampProvider,l=s.now(),d=0,c=function(){u.closed||(d=r.animationFrameProvider.requestAnimationFrame(function(p){d=0;var b=s.now();u.next({timestamp:a?b:p,elapsed:b-l}),c()}))};return c(),function(){d&&r.animationFrameProvider.cancelAnimationFrame(d)}})}var o=i();return Sa}var $t={},Pa={},t_;function iO(){if(t_)return Pa;t_=1,Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.ObjectUnsubscribedError=void 0;var e=_o();return Pa.ObjectUnsubscribedError=e.createErrorClass(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Pa}var r_;function ut(){if(r_)return $t;r_=1;var e=$t&&$t.__extends||(function(){var l=function(d,c){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,b){p.__proto__=b}||function(p,b){for(var m in b)Object.prototype.hasOwnProperty.call(b,m)&&(p[m]=b[m])},l(d,c)};return function(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");l(d,c);function p(){this.constructor=d}d.prototype=c===null?Object.create(c):(p.prototype=c.prototype,new p)}})(),t=$t&&$t.__values||function(l){var d=typeof Symbol=="function"&&Symbol.iterator,c=d&&l[d],p=0;if(c)return c.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&p>=l.length&&(l=void 0),{value:l&&l[p++],done:!l}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty($t,"__esModule",{value:!0}),$t.AnonymousSubject=$t.Subject=void 0;var r=Ee(),n=Ut(),i=iO(),o=ci(),a=bh(),u=(function(l){e(d,l);function d(){var c=l.call(this)||this;return c.closed=!1,c.currentObservers=null,c.observers=[],c.isStopped=!1,c.hasError=!1,c.thrownError=null,c}return d.prototype.lift=function(c){var p=new s(this,this);return p.operator=c,p},d.prototype._throwIfClosed=function(){if(this.closed)throw new i.ObjectUnsubscribedError},d.prototype.next=function(c){var p=this;a.errorContext(function(){var b,m;if(p._throwIfClosed(),!p.isStopped){p.currentObservers||(p.currentObservers=Array.from(p.observers));try{for(var _=t(p.currentObservers),f=_.next();!f.done;f=_.next()){var y=f.value;y.next(c)}}catch(g){b={error:g}}finally{try{f&&!f.done&&(m=_.return)&&m.call(_)}finally{if(b)throw b.error}}}})},d.prototype.error=function(c){var p=this;a.errorContext(function(){if(p._throwIfClosed(),!p.isStopped){p.hasError=p.isStopped=!0,p.thrownError=c;for(var b=p.observers;b.length;)b.shift().error(c)}})},d.prototype.complete=function(){var c=this;a.errorContext(function(){if(c._throwIfClosed(),!c.isStopped){c.isStopped=!0;for(var p=c.observers;p.length;)p.shift().complete()}})},d.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(d.prototype,"observed",{get:function(){var c;return((c=this.observers)===null||c===void 0?void 0:c.length)>0},enumerable:!1,configurable:!0}),d.prototype._trySubscribe=function(c){return this._throwIfClosed(),l.prototype._trySubscribe.call(this,c)},d.prototype._subscribe=function(c){return this._throwIfClosed(),this._checkFinalizedStatuses(c),this._innerSubscribe(c)},d.prototype._innerSubscribe=function(c){var p=this,b=this,m=b.hasError,_=b.isStopped,f=b.observers;return m||_?n.EMPTY_SUBSCRIPTION:(this.currentObservers=null,f.push(c),new n.Subscription(function(){p.currentObservers=null,o.arrRemove(f,c)}))},d.prototype._checkFinalizedStatuses=function(c){var p=this,b=p.hasError,m=p.thrownError,_=p.isStopped;b?c.error(m):_&&c.complete()},d.prototype.asObservable=function(){var c=new r.Observable;return c.source=this,c},d.create=function(c,p){return new s(c,p)},d})(r.Observable);$t.Subject=u;var s=(function(l){e(d,l);function d(c,p){var b=l.call(this)||this;return b.destination=c,b.source=p,b}return d.prototype.next=function(c){var p,b;(b=(p=this.destination)===null||p===void 0?void 0:p.next)===null||b===void 0||b.call(p,c)},d.prototype.error=function(c){var p,b;(b=(p=this.destination)===null||p===void 0?void 0:p.error)===null||b===void 0||b.call(p,c)},d.prototype.complete=function(){var c,p;(p=(c=this.destination)===null||c===void 0?void 0:c.complete)===null||p===void 0||p.call(c)},d.prototype._subscribe=function(c){var p,b;return(b=(p=this.source)===null||p===void 0?void 0:p.subscribe(c))!==null&&b!==void 0?b:n.EMPTY_SUBSCRIPTION},d})(u);return $t.AnonymousSubject=s,$t}var Ii={},n_;function oO(){if(n_)return Ii;n_=1;var e=Ii&&Ii.__extends||(function(){var n=function(i,o){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(a[s]=u[s])},n(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");n(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}})();Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.BehaviorSubject=void 0;var t=ut(),r=(function(n){e(i,n);function i(o){var a=n.call(this)||this;return a._value=o,a}return Object.defineProperty(i.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),i.prototype._subscribe=function(o){var a=n.prototype._subscribe.call(this,o);return!a.closed&&o.next(this._value),a},i.prototype.getValue=function(){var o=this,a=o.hasError,u=o.thrownError,s=o._value;if(a)throw u;return this._throwIfClosed(),s},i.prototype.next=function(o){n.prototype.next.call(this,this._value=o)},i})(t.Subject);return Ii.BehaviorSubject=r,Ii}var ji={},hd={},i_;function mh(){return i_||(i_=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.dateTimestampProvider=void 0,e.dateTimestampProvider={now:function(){return(e.dateTimestampProvider.delegate||Date).now()},delegate:void 0}})(hd)),hd}var o_;function gh(){if(o_)return ji;o_=1;var e=ji&&ji.__extends||(function(){var i=function(o,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,s){u.__proto__=s}||function(u,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(u[l]=s[l])},i(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");i(o,a);function u(){this.constructor=o}o.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}})();Object.defineProperty(ji,"__esModule",{value:!0}),ji.ReplaySubject=void 0;var t=ut(),r=mh(),n=(function(i){e(o,i);function o(a,u,s){a===void 0&&(a=1/0),u===void 0&&(u=1/0),s===void 0&&(s=r.dateTimestampProvider);var l=i.call(this)||this;return l._bufferSize=a,l._windowTime=u,l._timestampProvider=s,l._buffer=[],l._infiniteTimeWindow=!0,l._infiniteTimeWindow=u===1/0,l._bufferSize=Math.max(1,a),l._windowTime=Math.max(1,u),l}return o.prototype.next=function(a){var u=this,s=u.isStopped,l=u._buffer,d=u._infiniteTimeWindow,c=u._timestampProvider,p=u._windowTime;s||(l.push(a),!d&&l.push(c.now()+p)),this._trimBuffer(),i.prototype.next.call(this,a)},o.prototype._subscribe=function(a){this._throwIfClosed(),this._trimBuffer();for(var u=this._innerSubscribe(a),s=this,l=s._infiniteTimeWindow,d=s._buffer,c=d.slice(),p=0;p<c.length&&!a.closed;p+=l?1:2)a.next(c[p]);return this._checkFinalizedStatuses(a),u},o.prototype._trimBuffer=function(){var a=this,u=a._bufferSize,s=a._timestampProvider,l=a._buffer,d=a._infiniteTimeWindow,c=(d?1:2)*u;if(u<1/0&&c<l.length&&l.splice(0,l.length-c),!d){for(var p=s.now(),b=0,m=1;m<l.length&&l[m]<=p;m+=2)b=m;b&&l.splice(0,b+1)}},o})(t.Subject);return ji.ReplaySubject=n,ji}var Ni={},a_;function wh(){if(a_)return Ni;a_=1;var e=Ni&&Ni.__extends||(function(){var n=function(i,o){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(a[s]=u[s])},n(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");n(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}})();Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.AsyncSubject=void 0;var t=ut(),r=(function(n){e(i,n);function i(){var o=n!==null&&n.apply(this,arguments)||this;return o._value=null,o._hasValue=!1,o._isComplete=!1,o}return i.prototype._checkFinalizedStatuses=function(o){var a=this,u=a.hasError,s=a._hasValue,l=a._value,d=a.thrownError,c=a.isStopped,p=a._isComplete;u?o.error(d):(c||p)&&(s&&o.next(l),o.complete())},i.prototype.next=function(o){this.isStopped||(this._value=o,this._hasValue=!0)},i.prototype.complete=function(){var o=this,a=o._hasValue,u=o._value,s=o._isComplete;s||(this._isComplete=!0,a&&n.prototype.next.call(this,u),n.prototype.complete.call(this))},i})(t.Subject);return Ni.AsyncSubject=r,Ni}var vd={},ki={},Mi={},Di={},u_;function xC(){if(u_)return Di;u_=1;var e=Di&&Di.__extends||(function(){var n=function(i,o){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(a[s]=u[s])},n(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");n(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}})();Object.defineProperty(Di,"__esModule",{value:!0}),Di.Action=void 0;var t=Ut(),r=(function(n){e(i,n);function i(o,a){return n.call(this)||this}return i.prototype.schedule=function(o,a){return this},i})(t.Subscription);return Di.Action=r,Di}var Li={},s_;function FC(){return s_||(s_=1,(function(e){var t=Li&&Li.__read||function(n,i){var o=typeof Symbol=="function"&&n[Symbol.iterator];if(!o)return n;var a=o.call(n),u,s=[],l;try{for(;(i===void 0||i-- >0)&&!(u=a.next()).done;)s.push(u.value)}catch(d){l={error:d}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(l)throw l.error}}return s},r=Li&&Li.__spreadArray||function(n,i){for(var o=0,a=i.length,u=n.length;o<a;o++,u++)n[u]=i[o];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.intervalProvider=void 0,e.intervalProvider={setInterval:function(n,i){for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var u=e.intervalProvider.delegate;return u?.setInterval?u.setInterval.apply(u,r([n,i],t(o))):setInterval.apply(void 0,r([n,i],t(o)))},clearInterval:function(n){var i=e.intervalProvider.delegate;return(i?.clearInterval||clearInterval)(n)},delegate:void 0}})(Li)),Li}var c_;function Rc(){if(c_)return Mi;c_=1;var e=Mi&&Mi.__extends||(function(){var o=function(a,u){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(s[d]=l[d])},o(a,u)};return function(a,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");o(a,u);function s(){this.constructor=a}a.prototype=u===null?Object.create(u):(s.prototype=u.prototype,new s)}})();Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.AsyncAction=void 0;var t=xC(),r=FC(),n=ci(),i=(function(o){e(a,o);function a(u,s){var l=o.call(this,u,s)||this;return l.scheduler=u,l.work=s,l.pending=!1,l}return a.prototype.schedule=function(u,s){var l;if(s===void 0&&(s=0),this.closed)return this;this.state=u;var d=this.id,c=this.scheduler;return d!=null&&(this.id=this.recycleAsyncId(c,d,s)),this.pending=!0,this.delay=s,this.id=(l=this.id)!==null&&l!==void 0?l:this.requestAsyncId(c,this.id,s),this},a.prototype.requestAsyncId=function(u,s,l){return l===void 0&&(l=0),r.intervalProvider.setInterval(u.flush.bind(u,this),l)},a.prototype.recycleAsyncId=function(u,s,l){if(l===void 0&&(l=0),l!=null&&this.delay===l&&this.pending===!1)return s;s!=null&&r.intervalProvider.clearInterval(s)},a.prototype.execute=function(u,s){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var l=this._execute(u,s);if(l)return l;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},a.prototype._execute=function(u,s){var l=!1,d;try{this.work(u)}catch(c){l=!0,d=c||new Error("Scheduled action threw falsy error")}if(l)return this.unsubscribe(),d},a.prototype.unsubscribe=function(){if(!this.closed){var u=this,s=u.id,l=u.scheduler,d=l.actions;this.work=this.state=this.scheduler=null,this.pending=!1,n.arrRemove(d,this),s!=null&&(this.id=this.recycleAsyncId(l,s,null)),this.delay=null,o.prototype.unsubscribe.call(this)}},a})(t.Action);return Mi.AsyncAction=i,Mi}var Ui={},Bi={},l_;function VC(){if(l_)return Bi;l_=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.TestTools=Bi.Immediate=void 0;var e=1,t,r={};function n(i){return i in r?(delete r[i],!0):!1}return Bi.Immediate={setImmediate:function(i){var o=e++;return r[o]=!0,t||(t=Promise.resolve()),t.then(function(){return n(o)&&i()}),o},clearImmediate:function(i){n(i)}},Bi.TestTools={pending:function(){return Object.keys(r).length}},Bi}var f_;function $C(){return f_||(f_=1,(function(e){var t=Ui&&Ui.__read||function(a,u){var s=typeof Symbol=="function"&&a[Symbol.iterator];if(!s)return a;var l=s.call(a),d,c=[],p;try{for(;(u===void 0||u-- >0)&&!(d=l.next()).done;)c.push(d.value)}catch(b){p={error:b}}finally{try{d&&!d.done&&(s=l.return)&&s.call(l)}finally{if(p)throw p.error}}return c},r=Ui&&Ui.__spreadArray||function(a,u){for(var s=0,l=u.length,d=a.length;s<l;s++,d++)a[d]=u[s];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.immediateProvider=void 0;var n=VC(),i=n.Immediate.setImmediate,o=n.Immediate.clearImmediate;e.immediateProvider={setImmediate:function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];var s=e.immediateProvider.delegate;return(s?.setImmediate||i).apply(void 0,r([],t(a)))},clearImmediate:function(a){var u=e.immediateProvider.delegate;return(u?.clearImmediate||o)(a)},delegate:void 0}})(Ui)),Ui}var d_;function WC(){if(d_)return ki;d_=1;var e=ki&&ki.__extends||(function(){var i=function(o,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,s){u.__proto__=s}||function(u,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(u[l]=s[l])},i(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");i(o,a);function u(){this.constructor=o}o.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}})();Object.defineProperty(ki,"__esModule",{value:!0}),ki.AsapAction=void 0;var t=Rc(),r=$C(),n=(function(i){e(o,i);function o(a,u){var s=i.call(this,a,u)||this;return s.scheduler=a,s.work=u,s}return o.prototype.requestAsyncId=function(a,u,s){return s===void 0&&(s=0),s!==null&&s>0?i.prototype.requestAsyncId.call(this,a,u,s):(a.actions.push(this),a._scheduled||(a._scheduled=r.immediateProvider.setImmediate(a.flush.bind(a,void 0))))},o.prototype.recycleAsyncId=function(a,u,s){var l;if(s===void 0&&(s=0),s!=null?s>0:this.delay>0)return i.prototype.recycleAsyncId.call(this,a,u,s);var d=a.actions;u!=null&&((l=d[d.length-1])===null||l===void 0?void 0:l.id)!==u&&(r.immediateProvider.clearImmediate(u),a._scheduled===u&&(a._scheduled=void 0))},o})(t.AsyncAction);return ki.AsapAction=n,ki}var qi={},xi={},Ta={},h_;function aO(){if(h_)return Ta;h_=1,Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.Scheduler=void 0;var e=mh(),t=(function(){function r(n,i){i===void 0&&(i=r.now),this.schedulerActionCtor=n,this.now=i}return r.prototype.schedule=function(n,i,o){return i===void 0&&(i=0),new this.schedulerActionCtor(this,n).schedule(o,i)},r.now=e.dateTimestampProvider.now,r})();return Ta.Scheduler=t,Ta}var v_;function Ac(){if(v_)return xi;v_=1;var e=xi&&xi.__extends||(function(){var n=function(i,o){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(a[s]=u[s])},n(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");n(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}})();Object.defineProperty(xi,"__esModule",{value:!0}),xi.AsyncScheduler=void 0;var t=aO(),r=(function(n){e(i,n);function i(o,a){a===void 0&&(a=t.Scheduler.now);var u=n.call(this,o,a)||this;return u.actions=[],u._active=!1,u}return i.prototype.flush=function(o){var a=this.actions;if(this._active){a.push(o);return}var u;this._active=!0;do if(u=o.execute(o.state,o.delay))break;while(o=a.shift());if(this._active=!1,u){for(;o=a.shift();)o.unsubscribe();throw u}},i})(t.Scheduler);return xi.AsyncScheduler=r,xi}var p_;function HC(){if(p_)return qi;p_=1;var e=qi&&qi.__extends||(function(){var n=function(i,o){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(a[s]=u[s])},n(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");n(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}})();Object.defineProperty(qi,"__esModule",{value:!0}),qi.AsapScheduler=void 0;var t=Ac(),r=(function(n){e(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.flush=function(o){this._active=!0;var a=this._scheduled;this._scheduled=void 0;var u=this.actions,s;o=o||u.shift();do if(s=o.execute(o.state,o.delay))break;while((o=u[0])&&o.id===a&&u.shift());if(this._active=!1,s){for(;(o=u[0])&&o.id===a&&u.shift();)o.unsubscribe();throw s}},i})(t.AsyncScheduler);return qi.AsapScheduler=r,qi}var __;function zC(){return __||(__=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.asap=e.asapScheduler=void 0;var t=WC(),r=HC();e.asapScheduler=new r.AsapScheduler(t.AsapAction),e.asap=e.asapScheduler})(vd)),vd}var pd={},b_;function Rt(){return b_||(b_=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.async=e.asyncScheduler=void 0;var t=Rc(),r=Ac();e.asyncScheduler=new r.AsyncScheduler(t.AsyncAction),e.async=e.asyncScheduler})(pd)),pd}var _d={},Fi={},y_;function KC(){if(y_)return Fi;y_=1;var e=Fi&&Fi.__extends||(function(){var n=function(i,o){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(a[s]=u[s])},n(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");n(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}})();Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.QueueAction=void 0;var t=Rc(),r=(function(n){e(i,n);function i(o,a){var u=n.call(this,o,a)||this;return u.scheduler=o,u.work=a,u}return i.prototype.schedule=function(o,a){return a===void 0&&(a=0),a>0?n.prototype.schedule.call(this,o,a):(this.delay=a,this.state=o,this.scheduler.flush(this),this)},i.prototype.execute=function(o,a){return a>0||this.closed?n.prototype.execute.call(this,o,a):this._execute(o,a)},i.prototype.requestAsyncId=function(o,a,u){return u===void 0&&(u=0),u!=null&&u>0||u==null&&this.delay>0?n.prototype.requestAsyncId.call(this,o,a,u):(o.flush(this),0)},i})(t.AsyncAction);return Fi.QueueAction=r,Fi}var Vi={},m_;function GC(){if(m_)return Vi;m_=1;var e=Vi&&Vi.__extends||(function(){var n=function(i,o){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(a[s]=u[s])},n(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");n(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}})();Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.QueueScheduler=void 0;var t=Ac(),r=(function(n){e(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i})(t.AsyncScheduler);return Vi.QueueScheduler=r,Vi}var g_;function YC(){return g_||(g_=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.queue=e.queueScheduler=void 0;var t=KC(),r=GC();e.queueScheduler=new r.QueueScheduler(t.QueueAction),e.queue=e.queueScheduler})(_d)),_d}var bd={},$i={},w_;function ZC(){if(w_)return $i;w_=1;var e=$i&&$i.__extends||(function(){var i=function(o,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,s){u.__proto__=s}||function(u,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(u[l]=s[l])},i(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");i(o,a);function u(){this.constructor=o}o.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}})();Object.defineProperty($i,"__esModule",{value:!0}),$i.AnimationFrameAction=void 0;var t=Rc(),r=nO(),n=(function(i){e(o,i);function o(a,u){var s=i.call(this,a,u)||this;return s.scheduler=a,s.work=u,s}return o.prototype.requestAsyncId=function(a,u,s){return s===void 0&&(s=0),s!==null&&s>0?i.prototype.requestAsyncId.call(this,a,u,s):(a.actions.push(this),a._scheduled||(a._scheduled=r.animationFrameProvider.requestAnimationFrame(function(){return a.flush(void 0)})))},o.prototype.recycleAsyncId=function(a,u,s){var l;if(s===void 0&&(s=0),s!=null?s>0:this.delay>0)return i.prototype.recycleAsyncId.call(this,a,u,s);var d=a.actions;u!=null&&u===a._scheduled&&((l=d[d.length-1])===null||l===void 0?void 0:l.id)!==u&&(r.animationFrameProvider.cancelAnimationFrame(u),a._scheduled=void 0)},o})(t.AsyncAction);return $i.AnimationFrameAction=n,$i}var Wi={},O_;function XC(){if(O_)return Wi;O_=1;var e=Wi&&Wi.__extends||(function(){var n=function(i,o){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(a[s]=u[s])},n(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");n(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}})();Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.AnimationFrameScheduler=void 0;var t=Ac(),r=(function(n){e(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i.prototype.flush=function(o){this._active=!0;var a;o?a=o.id:(a=this._scheduled,this._scheduled=void 0);var u=this.actions,s;o=o||u.shift();do if(s=o.execute(o.state,o.delay))break;while((o=u[0])&&o.id===a&&u.shift());if(this._active=!1,s){for(;(o=u[0])&&o.id===a&&u.shift();)o.unsubscribe();throw s}},i})(t.AsyncScheduler);return Wi.AnimationFrameScheduler=r,Wi}var E_;function QC(){return E_||(E_=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrame=e.animationFrameScheduler=void 0;var t=ZC(),r=XC();e.animationFrameScheduler=new r.AnimationFrameScheduler(t.AnimationFrameAction),e.animationFrame=e.animationFrameScheduler})(bd)),bd}var Br={},S_;function JC(){if(S_)return Br;S_=1;var e=Br&&Br.__extends||(function(){var a=function(u,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var c in d)Object.prototype.hasOwnProperty.call(d,c)&&(l[c]=d[c])},a(u,s)};return function(u,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");a(u,s);function l(){this.constructor=u}u.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}})();Object.defineProperty(Br,"__esModule",{value:!0}),Br.VirtualAction=Br.VirtualTimeScheduler=void 0;var t=Rc(),r=Ut(),n=Ac(),i=(function(a){e(u,a);function u(s,l){s===void 0&&(s=o),l===void 0&&(l=1/0);var d=a.call(this,s,function(){return d.frame})||this;return d.maxFrames=l,d.frame=0,d.index=-1,d}return u.prototype.flush=function(){for(var s=this,l=s.actions,d=s.maxFrames,c,p;(p=l[0])&&p.delay<=d&&(l.shift(),this.frame=p.delay,!(c=p.execute(p.state,p.delay))););if(c){for(;p=l.shift();)p.unsubscribe();throw c}},u.frameTimeFactor=10,u})(n.AsyncScheduler);Br.VirtualTimeScheduler=i;var o=(function(a){e(u,a);function u(s,l,d){d===void 0&&(d=s.index+=1);var c=a.call(this,s,l)||this;return c.scheduler=s,c.work=l,c.index=d,c.active=!0,c.index=s.index=d,c}return u.prototype.schedule=function(s,l){if(l===void 0&&(l=0),Number.isFinite(l)){if(!this.id)return a.prototype.schedule.call(this,s,l);this.active=!1;var d=new u(this.scheduler,this.work);return this.add(d),d.schedule(s,l)}else return r.Subscription.EMPTY},u.prototype.requestAsyncId=function(s,l,d){d===void 0&&(d=0),this.delay=s.frame+d;var c=s.actions;return c.push(this),c.sort(u.sortActions),1},u.prototype.recycleAsyncId=function(s,l,d){},u.prototype._execute=function(s,l){if(this.active===!0)return a.prototype._execute.call(this,s,l)},u.sortActions=function(s,l){return s.delay===l.delay?s.index===l.index?0:s.index>l.index?1:-1:s.delay>l.delay?1:-1},u})(t.AsyncAction);return Br.VirtualAction=o,Br}var yd={},md={},P_;function Ir(){return P_||(P_=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=void 0;var t=Ee();e.EMPTY=new t.Observable(function(i){return i.complete()});function r(i){return i?n(i):e.EMPTY}e.empty=r;function n(i){return new t.Observable(function(o){return i.schedule(function(){return o.complete()})})}})(md)),md}var Ca={},qr={},Ra={},T_;function Hl(){if(T_)return Ra;T_=1,Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.isScheduler=void 0;var e=ge();function t(r){return r&&e.isFunction(r.schedule)}return Ra.isScheduler=t,Ra}var C_;function At(){if(C_)return qr;C_=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.popNumber=qr.popScheduler=qr.popResultSelector=void 0;var e=ge(),t=Hl();function r(a){return a[a.length-1]}function n(a){return e.isFunction(r(a))?a.pop():void 0}qr.popResultSelector=n;function i(a){return t.isScheduler(r(a))?a.pop():void 0}qr.popScheduler=i;function o(a,u){return typeof r(a)=="number"?a.pop():u}return qr.popNumber=o,qr}var Aa={},Ia={},ja={},Te={},Na={},R_;function Oh(){return R_||(R_=1,Object.defineProperty(Na,"__esModule",{value:!0}),Na.isArrayLike=void 0,Na.isArrayLike=(function(e){return e&&typeof e.length=="number"&&typeof e!="function"})),Na}var ka={},A_;function uO(){if(A_)return ka;A_=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.isPromise=void 0;var e=ge();function t(r){return e.isFunction(r?.then)}return ka.isPromise=t,ka}var Ma={},I_;function sO(){if(I_)return Ma;I_=1,Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.isInteropObservable=void 0;var e=Vl(),t=ge();function r(n){return t.isFunction(n[e.observable])}return Ma.isInteropObservable=r,Ma}var Da={},j_;function cO(){if(j_)return Da;j_=1,Object.defineProperty(Da,"__esModule",{value:!0}),Da.isAsyncIterable=void 0;var e=ge();function t(r){return Symbol.asyncIterator&&e.isFunction(r?.[Symbol.asyncIterator])}return Da.isAsyncIterable=t,Da}var La={},N_;function lO(){if(N_)return La;N_=1,Object.defineProperty(La,"__esModule",{value:!0}),La.createInvalidObservableTypeError=void 0;function e(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}return La.createInvalidObservableTypeError=e,La}var Ua={},Hi={},k_;function fO(){if(k_)return Hi;k_=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.iterator=Hi.getSymbolIterator=void 0;function e(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}return Hi.getSymbolIterator=e,Hi.iterator=e(),Hi}var M_;function dO(){if(M_)return Ua;M_=1,Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.isIterable=void 0;var e=fO(),t=ge();function r(n){return t.isFunction(n?.[e.iterator])}return Ua.isIterable=r,Ua}var Et={},D_;function Eh(){if(D_)return Et;D_=1;var e=Et&&Et.__generator||function(a,u){var s={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},l,d,c,p;return p={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function b(_){return function(f){return m([_,f])}}function m(_){if(l)throw new TypeError("Generator is already executing.");for(;s;)try{if(l=1,d&&(c=_[0]&2?d.return:_[0]?d.throw||((c=d.return)&&c.call(d),0):d.next)&&!(c=c.call(d,_[1])).done)return c;switch(d=0,c&&(_=[_[0]&2,c.value]),_[0]){case 0:case 1:c=_;break;case 4:return s.label++,{value:_[1],done:!1};case 5:s.label++,d=_[1],_=[0];continue;case 7:_=s.ops.pop(),s.trys.pop();continue;default:if(c=s.trys,!(c=c.length>0&&c[c.length-1])&&(_[0]===6||_[0]===2)){s=0;continue}if(_[0]===3&&(!c||_[1]>c[0]&&_[1]<c[3])){s.label=_[1];break}if(_[0]===6&&s.label<c[1]){s.label=c[1],c=_;break}if(c&&s.label<c[2]){s.label=c[2],s.ops.push(_);break}c[2]&&s.ops.pop(),s.trys.pop();continue}_=u.call(a,s)}catch(f){_=[6,f],d=0}finally{l=c=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},t=Et&&Et.__await||function(a){return this instanceof t?(this.v=a,this):new t(a)},r=Et&&Et.__asyncGenerator||function(a,u,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=s.apply(a,u||[]),d,c=[];return d={},p("next"),p("throw"),p("return"),d[Symbol.asyncIterator]=function(){return this},d;function p(g){l[g]&&(d[g]=function(h){return new Promise(function(v,w){c.push([g,h,v,w])>1||b(g,h)})})}function b(g,h){try{m(l[g](h))}catch(v){y(c[0][3],v)}}function m(g){g.value instanceof t?Promise.resolve(g.value.v).then(_,f):y(c[0][2],g)}function _(g){b("next",g)}function f(g){b("throw",g)}function y(g,h){g(h),c.shift(),c.length&&b(c[0][0],c[0][1])}};Object.defineProperty(Et,"__esModule",{value:!0}),Et.isReadableStreamLike=Et.readableStreamLikeToAsyncGenerator=void 0;var n=ge();function i(a){return r(this,arguments,function(){var s,l,d,c;return e(this,function(p){switch(p.label){case 0:s=a.getReader(),p.label=1;case 1:p.trys.push([1,,9,10]),p.label=2;case 2:return[4,t(s.read())];case 3:return l=p.sent(),d=l.value,c=l.done,c?[4,t(void 0)]:[3,5];case 4:return[2,p.sent()];case 5:return[4,t(d)];case 6:return[4,p.sent()];case 7:return p.sent(),[3,2];case 8:return[3,10];case 9:return s.releaseLock(),[7];case 10:return[2]}})})}Et.readableStreamLikeToAsyncGenerator=i;function o(a){return n.isFunction(a?.getReader)}return Et.isReadableStreamLike=o,Et}var L_;function le(){if(L_)return Te;L_=1;var e=Te&&Te.__awaiter||function(O,S,P,I){function C(R){return R instanceof P?R:new P(function(A){A(R)})}return new(P||(P=Promise))(function(R,A){function D(B){try{U(I.next(B))}catch(q){A(q)}}function j(B){try{U(I.throw(B))}catch(q){A(q)}}function U(B){B.done?R(B.value):C(B.value).then(D,j)}U((I=I.apply(O,S||[])).next())})},t=Te&&Te.__generator||function(O,S){var P={label:0,sent:function(){if(R[0]&1)throw R[1];return R[1]},trys:[],ops:[]},I,C,R,A;return A={next:D(0),throw:D(1),return:D(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function D(U){return function(B){return j([U,B])}}function j(U){if(I)throw new TypeError("Generator is already executing.");for(;P;)try{if(I=1,C&&(R=U[0]&2?C.return:U[0]?C.throw||((R=C.return)&&R.call(C),0):C.next)&&!(R=R.call(C,U[1])).done)return R;switch(C=0,R&&(U=[U[0]&2,R.value]),U[0]){case 0:case 1:R=U;break;case 4:return P.label++,{value:U[1],done:!1};case 5:P.label++,C=U[1],U=[0];continue;case 7:U=P.ops.pop(),P.trys.pop();continue;default:if(R=P.trys,!(R=R.length>0&&R[R.length-1])&&(U[0]===6||U[0]===2)){P=0;continue}if(U[0]===3&&(!R||U[1]>R[0]&&U[1]<R[3])){P.label=U[1];break}if(U[0]===6&&P.label<R[1]){P.label=R[1],R=U;break}if(R&&P.label<R[2]){P.label=R[2],P.ops.push(U);break}R[2]&&P.ops.pop(),P.trys.pop();continue}U=S.call(O,P)}catch(B){U=[6,B],C=0}finally{I=R=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}},r=Te&&Te.__asyncValues||function(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var S=O[Symbol.asyncIterator],P;return S?S.call(O):(O=typeof n=="function"?n(O):O[Symbol.iterator](),P={},I("next"),I("throw"),I("return"),P[Symbol.asyncIterator]=function(){return this},P);function I(R){P[R]=O[R]&&function(A){return new Promise(function(D,j){A=O[R](A),C(D,j,A.done,A.value)})}}function C(R,A,D,j){Promise.resolve(j).then(function(U){R({value:U,done:D})},A)}},n=Te&&Te.__values||function(O){var S=typeof Symbol=="function"&&Symbol.iterator,P=S&&O[S],I=0;if(P)return P.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&I>=O.length&&(O=void 0),{value:O&&O[I++],done:!O}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Te,"__esModule",{value:!0}),Te.fromReadableStreamLike=Te.fromAsyncIterable=Te.fromIterable=Te.fromPromise=Te.fromArrayLike=Te.fromInteropObservable=Te.innerFrom=void 0;var i=Oh(),o=uO(),a=Ee(),u=sO(),s=cO(),l=lO(),d=dO(),c=Eh(),p=ge(),b=rO(),m=Vl();function _(O){if(O instanceof a.Observable)return O;if(O!=null){if(u.isInteropObservable(O))return f(O);if(i.isArrayLike(O))return y(O);if(o.isPromise(O))return g(O);if(s.isAsyncIterable(O))return v(O);if(d.isIterable(O))return h(O);if(c.isReadableStreamLike(O))return w(O)}throw l.createInvalidObservableTypeError(O)}Te.innerFrom=_;function f(O){return new a.Observable(function(S){var P=O[m.observable]();if(p.isFunction(P.subscribe))return P.subscribe(S);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}Te.fromInteropObservable=f;function y(O){return new a.Observable(function(S){for(var P=0;P<O.length&&!S.closed;P++)S.next(O[P]);S.complete()})}Te.fromArrayLike=y;function g(O){return new a.Observable(function(S){O.then(function(P){S.closed||(S.next(P),S.complete())},function(P){return S.error(P)}).then(null,b.reportUnhandledError)})}Te.fromPromise=g;function h(O){return new a.Observable(function(S){var P,I;try{for(var C=n(O),R=C.next();!R.done;R=C.next()){var A=R.value;if(S.next(A),S.closed)return}}catch(D){P={error:D}}finally{try{R&&!R.done&&(I=C.return)&&I.call(C)}finally{if(P)throw P.error}}S.complete()})}Te.fromIterable=h;function v(O){return new a.Observable(function(S){E(O,S).catch(function(P){return S.error(P)})})}Te.fromAsyncIterable=v;function w(O){return v(c.readableStreamLikeToAsyncGenerator(O))}Te.fromReadableStreamLike=w;function E(O,S){var P,I,C,R;return e(this,void 0,void 0,function(){var A,D;return t(this,function(j){switch(j.label){case 0:j.trys.push([0,5,6,11]),P=r(O),j.label=1;case 1:return[4,P.next()];case 2:if(I=j.sent(),!!I.done)return[3,4];if(A=I.value,S.next(A),S.closed)return[2];j.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return D=j.sent(),C={error:D},[3,11];case 6:return j.trys.push([6,,9,10]),I&&!I.done&&(R=P.return)?[4,R.call(P)]:[3,8];case 7:j.sent(),j.label=8;case 8:return[3,10];case 9:if(C)throw C.error;return[7];case 10:return[7];case 11:return S.complete(),[2]}})})}return Te}var Ba={},qa={},U_;function li(){if(U_)return qa;U_=1,Object.defineProperty(qa,"__esModule",{value:!0}),qa.executeSchedule=void 0;function e(t,r,n,i,o){i===void 0&&(i=0),o===void 0&&(o=!1);var a=r.schedule(function(){n(),o?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(a),!o)return a}return qa.executeSchedule=e,qa}var B_;function Ic(){if(B_)return Ba;B_=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.observeOn=void 0;var e=li(),t=J(),r=ne();function n(i,o){return o===void 0&&(o=0),t.operate(function(a,u){a.subscribe(r.createOperatorSubscriber(u,function(s){return e.executeSchedule(u,i,function(){return u.next(s)},o)},function(){return e.executeSchedule(u,i,function(){return u.complete()},o)},function(s){return e.executeSchedule(u,i,function(){return u.error(s)},o)}))})}return Ba.observeOn=n,Ba}var xa={},q_;function jc(){if(q_)return xa;q_=1,Object.defineProperty(xa,"__esModule",{value:!0}),xa.subscribeOn=void 0;var e=J();function t(r,n){return n===void 0&&(n=0),e.operate(function(i,o){o.add(r.schedule(function(){return i.subscribe(o)},n))})}return xa.subscribeOn=t,xa}var x_;function eR(){if(x_)return ja;x_=1,Object.defineProperty(ja,"__esModule",{value:!0}),ja.scheduleObservable=void 0;var e=le(),t=Ic(),r=jc();function n(i,o){return e.innerFrom(i).pipe(r.subscribeOn(o),t.observeOn(o))}return ja.scheduleObservable=n,ja}var Fa={},F_;function tR(){if(F_)return Fa;F_=1,Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.schedulePromise=void 0;var e=le(),t=Ic(),r=jc();function n(i,o){return e.innerFrom(i).pipe(r.subscribeOn(o),t.observeOn(o))}return Fa.schedulePromise=n,Fa}var Va={},V_;function rR(){if(V_)return Va;V_=1,Object.defineProperty(Va,"__esModule",{value:!0}),Va.scheduleArray=void 0;var e=Ee();function t(r,n){return new e.Observable(function(i){var o=0;return n.schedule(function(){o===r.length?i.complete():(i.next(r[o++]),i.closed||this.schedule())})})}return Va.scheduleArray=t,Va}var $a={},$_;function hO(){if($_)return $a;$_=1,Object.defineProperty($a,"__esModule",{value:!0}),$a.scheduleIterable=void 0;var e=Ee(),t=fO(),r=ge(),n=li();function i(o,a){return new e.Observable(function(u){var s;return n.executeSchedule(u,a,function(){s=o[t.iterator](),n.executeSchedule(u,a,function(){var l,d,c;try{l=s.next(),d=l.value,c=l.done}catch(p){u.error(p);return}c?u.complete():u.next(d)},0,!0)}),function(){return r.isFunction(s?.return)&&s.return()}})}return $a.scheduleIterable=i,$a}var Wa={},W_;function vO(){if(W_)return Wa;W_=1,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.scheduleAsyncIterable=void 0;var e=Ee(),t=li();function r(n,i){if(!n)throw new Error("Iterable cannot be null");return new e.Observable(function(o){t.executeSchedule(o,i,function(){var a=n[Symbol.asyncIterator]();t.executeSchedule(o,i,function(){a.next().then(function(u){u.done?o.complete():o.next(u.value)})},0,!0)})})}return Wa.scheduleAsyncIterable=r,Wa}var Ha={},H_;function nR(){if(H_)return Ha;H_=1,Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.scheduleReadableStreamLike=void 0;var e=vO(),t=Eh();function r(n,i){return e.scheduleAsyncIterable(t.readableStreamLikeToAsyncGenerator(n),i)}return Ha.scheduleReadableStreamLike=r,Ha}var z_;function pO(){if(z_)return Ia;z_=1,Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.scheduled=void 0;var e=eR(),t=tR(),r=rR(),n=hO(),i=vO(),o=sO(),a=uO(),u=Oh(),s=dO(),l=cO(),d=lO(),c=Eh(),p=nR();function b(m,_){if(m!=null){if(o.isInteropObservable(m))return e.scheduleObservable(m,_);if(u.isArrayLike(m))return r.scheduleArray(m,_);if(a.isPromise(m))return t.schedulePromise(m,_);if(l.isAsyncIterable(m))return i.scheduleAsyncIterable(m,_);if(s.isIterable(m))return n.scheduleIterable(m,_);if(c.isReadableStreamLike(m))return p.scheduleReadableStreamLike(m,_)}throw d.createInvalidObservableTypeError(m)}return Ia.scheduled=b,Ia}var K_;function fi(){if(K_)return Aa;K_=1,Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.from=void 0;var e=pO(),t=le();function r(n,i){return i?e.scheduled(n,i):t.innerFrom(n)}return Aa.from=r,Aa}var G_;function Sh(){if(G_)return Ca;G_=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.of=void 0;var e=At(),t=fi();function r(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=e.popScheduler(n);return t.from(n,o)}return Ca.of=r,Ca}var za={},Y_;function _O(){if(Y_)return za;Y_=1,Object.defineProperty(za,"__esModule",{value:!0}),za.throwError=void 0;var e=Ee(),t=ge();function r(n,i){var o=t.isFunction(n)?n:function(){return n},a=function(u){return u.error(o())};return new e.Observable(i?function(u){return i.schedule(a,0,u)}:a)}return za.throwError=r,za}var Z_;function Ph(){return Z_||(Z_=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.observeNotification=e.Notification=e.NotificationKind=void 0;var t=Ir(),r=Sh(),n=_O(),i=ge();(function(u){u.NEXT="N",u.ERROR="E",u.COMPLETE="C"})(e.NotificationKind||(e.NotificationKind={}));var o=(function(){function u(s,l,d){this.kind=s,this.value=l,this.error=d,this.hasValue=s==="N"}return u.prototype.observe=function(s){return a(this,s)},u.prototype.do=function(s,l,d){var c=this,p=c.kind,b=c.value,m=c.error;return p==="N"?s?.(b):p==="E"?l?.(m):d?.()},u.prototype.accept=function(s,l,d){var c;return i.isFunction((c=s)===null||c===void 0?void 0:c.next)?this.observe(s):this.do(s,l,d)},u.prototype.toObservable=function(){var s=this,l=s.kind,d=s.value,c=s.error,p=l==="N"?r.of(d):l==="E"?n.throwError(function(){return c}):l==="C"?t.EMPTY:0;if(!p)throw new TypeError("Unexpected notification kind "+l);return p},u.createNext=function(s){return new u("N",s)},u.createError=function(s){return new u("E",void 0,s)},u.createComplete=function(){return u.completeNotification},u.completeNotification=new u("C"),u})();e.Notification=o;function a(u,s){var l,d,c,p=u,b=p.kind,m=p.value,_=p.error;if(typeof b!="string")throw new TypeError('Invalid notification, missing "kind"');b==="N"?(l=s.next)===null||l===void 0||l.call(s,m):b==="E"?(d=s.error)===null||d===void 0||d.call(s,_):(c=s.complete)===null||c===void 0||c.call(s)}e.observeNotification=a})(yd)),yd}var Ka={},X_;function iR(){if(X_)return Ka;X_=1,Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.isObservable=void 0;var e=Ee(),t=ge();function r(n){return!!n&&(n instanceof e.Observable||t.isFunction(n.lift)&&t.isFunction(n.subscribe))}return Ka.isObservable=r,Ka}var Ga={},Ya={},Q_;function bo(){if(Q_)return Ya;Q_=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.EmptyError=void 0;var e=_o();return Ya.EmptyError=e.createErrorClass(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}}),Ya}var J_;function oR(){if(J_)return Ga;J_=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.lastValueFrom=void 0;var e=bo();function t(r,n){var i=typeof n=="object";return new Promise(function(o,a){var u=!1,s;r.subscribe({next:function(l){s=l,u=!0},error:a,complete:function(){u?o(s):i?o(n.defaultValue):a(new e.EmptyError)}})})}return Ga.lastValueFrom=t,Ga}var Za={},eb;function aR(){if(eb)return Za;eb=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za.firstValueFrom=void 0;var e=bo(),t=Cc();function r(n,i){var o=typeof i=="object";return new Promise(function(a,u){var s=new t.SafeSubscriber({next:function(l){a(l),s.unsubscribe()},error:u,complete:function(){o?a(i.defaultValue):u(new e.EmptyError)}});n.subscribe(s)})}return Za.firstValueFrom=r,Za}var Xa={},tb;function bO(){if(tb)return Xa;tb=1,Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.ArgumentOutOfRangeError=void 0;var e=_o();return Xa.ArgumentOutOfRangeError=e.createErrorClass(function(t){return function(){t(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}}),Xa}var Qa={},rb;function yO(){if(rb)return Qa;rb=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.NotFoundError=void 0;var e=_o();return Qa.NotFoundError=e.createErrorClass(function(t){return function(n){t(this),this.name="NotFoundError",this.message=n}}),Qa}var Ja={},nb;function mO(){if(nb)return Ja;nb=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.SequenceError=void 0;var e=_o();return Ja.SequenceError=e.createErrorClass(function(t){return function(n){t(this),this.name="SequenceError",this.message=n}}),Ja}var gd={},eu={},ib;function Th(){if(ib)return eu;ib=1,Object.defineProperty(eu,"__esModule",{value:!0}),eu.isValidDate=void 0;function e(t){return t instanceof Date&&!isNaN(t)}return eu.isValidDate=e,eu}var ob;function wl(){return ob||(ob=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.timeout=e.TimeoutError=void 0;var t=Rt(),r=Th(),n=J(),i=le(),o=_o(),a=ne(),u=li();e.TimeoutError=o.createErrorClass(function(d){return function(p){p===void 0&&(p=null),d(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=p}});function s(d,c){var p=r.isValidDate(d)?{first:d}:typeof d=="number"?{each:d}:d,b=p.first,m=p.each,_=p.with,f=_===void 0?l:_,y=p.scheduler,g=y===void 0?c??t.asyncScheduler:y,h=p.meta,v=h===void 0?null:h;if(b==null&&m==null)throw new TypeError("No timeout provided.");return n.operate(function(w,E){var O,S,P=null,I=0,C=function(R){S=u.executeSchedule(E,g,function(){try{O.unsubscribe(),i.innerFrom(f({meta:v,lastValue:P,seen:I})).subscribe(E)}catch(A){E.error(A)}},R)};O=w.subscribe(a.createOperatorSubscriber(E,function(R){S?.unsubscribe(),I++,E.next(P=R),m>0&&C(m)},void 0,void 0,function(){S?.closed||S?.unsubscribe(),P=null})),!I&&C(b!=null?typeof b=="number"?b:+b-g.now():m)})}e.timeout=s;function l(d){throw new e.TimeoutError(d)}})(gd)),gd}var tu={},xr={},Fr={},ru={},ab;function di(){if(ab)return ru;ab=1,Object.defineProperty(ru,"__esModule",{value:!0}),ru.map=void 0;var e=J(),t=ne();function r(n,i){return e.operate(function(o,a){var u=0;o.subscribe(t.createOperatorSubscriber(a,function(s){a.next(n.call(i,s,u++))}))})}return ru.map=r,ru}var ub;function yo(){if(ub)return Fr;ub=1;var e=Fr&&Fr.__read||function(a,u){var s=typeof Symbol=="function"&&a[Symbol.iterator];if(!s)return a;var l=s.call(a),d,c=[],p;try{for(;(u===void 0||u-- >0)&&!(d=l.next()).done;)c.push(d.value)}catch(b){p={error:b}}finally{try{d&&!d.done&&(s=l.return)&&s.call(l)}finally{if(p)throw p.error}}return c},t=Fr&&Fr.__spreadArray||function(a,u){for(var s=0,l=u.length,d=a.length;s<l;s++,d++)a[d]=u[s];return a};Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.mapOneOrManyArgs=void 0;var r=di(),n=Array.isArray;function i(a,u){return n(u)?a.apply(void 0,t([],e(u))):a(u)}function o(a){return r.map(function(u){return i(a,u)})}return Fr.mapOneOrManyArgs=o,Fr}var sb;function gO(){if(sb)return xr;sb=1;var e=xr&&xr.__read||function(l,d){var c=typeof Symbol=="function"&&l[Symbol.iterator];if(!c)return l;var p=c.call(l),b,m=[],_;try{for(;(d===void 0||d-- >0)&&!(b=p.next()).done;)m.push(b.value)}catch(f){_={error:f}}finally{try{b&&!b.done&&(c=p.return)&&c.call(p)}finally{if(_)throw _.error}}return m},t=xr&&xr.__spreadArray||function(l,d){for(var c=0,p=d.length,b=l.length;c<p;c++,b++)l[b]=d[c];return l};Object.defineProperty(xr,"__esModule",{value:!0}),xr.bindCallbackInternals=void 0;var r=Hl(),n=Ee(),i=jc(),o=yo(),a=Ic(),u=wh();function s(l,d,c,p){if(c)if(r.isScheduler(c))p=c;else return function(){for(var b=[],m=0;m<arguments.length;m++)b[m]=arguments[m];return s(l,d,p).apply(this,b).pipe(o.mapOneOrManyArgs(c))};return p?function(){for(var b=[],m=0;m<arguments.length;m++)b[m]=arguments[m];return s(l,d).apply(this,b).pipe(i.subscribeOn(p),a.observeOn(p))}:function(){for(var b=this,m=[],_=0;_<arguments.length;_++)m[_]=arguments[_];var f=new u.AsyncSubject,y=!0;return new n.Observable(function(g){var h=f.subscribe(g);if(y){y=!1;var v=!1,w=!1;d.apply(b,t(t([],e(m)),[function(){for(var E=[],O=0;O<arguments.length;O++)E[O]=arguments[O];if(l){var S=E.shift();if(S!=null){f.error(S);return}}f.next(1<E.length?E:E[0]),w=!0,v&&f.complete()}])),w&&f.complete(),v=!0}return h})}}return xr.bindCallbackInternals=s,xr}var cb;function uR(){if(cb)return tu;cb=1,Object.defineProperty(tu,"__esModule",{value:!0}),tu.bindCallback=void 0;var e=gO();function t(r,n,i){return e.bindCallbackInternals(!1,r,n,i)}return tu.bindCallback=t,tu}var nu={},lb;function sR(){if(lb)return nu;lb=1,Object.defineProperty(nu,"__esModule",{value:!0}),nu.bindNodeCallback=void 0;var e=gO();function t(r,n,i){return e.bindCallbackInternals(!0,r,n,i)}return nu.bindNodeCallback=t,nu}var zi={},iu={},fb;function wO(){if(fb)return iu;fb=1,Object.defineProperty(iu,"__esModule",{value:!0}),iu.argsArgArrayOrObject=void 0;var e=Array.isArray,t=Object.getPrototypeOf,r=Object.prototype,n=Object.keys;function i(a){if(a.length===1){var u=a[0];if(e(u))return{args:u,keys:null};if(o(u)){var s=n(u);return{args:s.map(function(l){return u[l]}),keys:s}}}return{args:a,keys:null}}iu.argsArgArrayOrObject=i;function o(a){return a&&typeof a=="object"&&t(a)===r}return iu}var ou={},db;function OO(){if(db)return ou;db=1,Object.defineProperty(ou,"__esModule",{value:!0}),ou.createObject=void 0;function e(t,r){return t.reduce(function(n,i,o){return n[i]=r[o],n},{})}return ou.createObject=e,ou}var hb;function Ch(){if(hb)return zi;hb=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.combineLatestInit=zi.combineLatest=void 0;var e=Ee(),t=wO(),r=fi(),n=at(),i=yo(),o=At(),a=OO(),u=ne(),s=li();function l(){for(var p=[],b=0;b<arguments.length;b++)p[b]=arguments[b];var m=o.popScheduler(p),_=o.popResultSelector(p),f=t.argsArgArrayOrObject(p),y=f.args,g=f.keys;if(y.length===0)return r.from([],m);var h=new e.Observable(d(y,m,g?function(v){return a.createObject(g,v)}:n.identity));return _?h.pipe(i.mapOneOrManyArgs(_)):h}zi.combineLatest=l;function d(p,b,m){return m===void 0&&(m=n.identity),function(_){c(b,function(){for(var f=p.length,y=new Array(f),g=f,h=f,v=function(E){c(b,function(){var O=r.from(p[E],b),S=!1;O.subscribe(u.createOperatorSubscriber(_,function(P){y[E]=P,S||(S=!0,h--),h||_.next(m(y.slice()))},function(){--g||_.complete()}))},_)},w=0;w<f;w++)v(w)},_)}}zi.combineLatestInit=d;function c(p,b,m){p?s.executeSchedule(m,p,b):b()}return zi}var au={},uu={},su={},cu={},lu={},vb;function Rh(){if(vb)return lu;vb=1,Object.defineProperty(lu,"__esModule",{value:!0}),lu.mergeInternals=void 0;var e=le(),t=li(),r=ne();function n(i,o,a,u,s,l,d,c){var p=[],b=0,m=0,_=!1,f=function(){_&&!p.length&&!b&&o.complete()},y=function(h){return b<u?g(h):p.push(h)},g=function(h){l&&o.next(h),b++;var v=!1;e.innerFrom(a(h,m++)).subscribe(r.createOperatorSubscriber(o,function(w){s?.(w),l?y(w):o.next(w)},function(){v=!0},void 0,function(){if(v)try{b--;for(var w=function(){var E=p.shift();d?t.executeSchedule(o,d,function(){return g(E)}):g(E)};p.length&&b<u;)w();f()}catch(E){o.error(E)}}))};return i.subscribe(r.createOperatorSubscriber(o,y,function(){_=!0,f()})),function(){c?.()}}return lu.mergeInternals=n,lu}var pb;function hn(){if(pb)return cu;pb=1,Object.defineProperty(cu,"__esModule",{value:!0}),cu.mergeMap=void 0;var e=di(),t=le(),r=J(),n=Rh(),i=ge();function o(a,u,s){return s===void 0&&(s=1/0),i.isFunction(u)?o(function(l,d){return e.map(function(c,p){return u(l,c,d,p)})(t.innerFrom(a(l,d)))},s):(typeof u=="number"&&(s=u),r.operate(function(l,d){return n.mergeInternals(l,d,a,s)}))}return cu.mergeMap=o,cu}var _b;function Nc(){if(_b)return su;_b=1,Object.defineProperty(su,"__esModule",{value:!0}),su.mergeAll=void 0;var e=hn(),t=at();function r(n){return n===void 0&&(n=1/0),e.mergeMap(t.identity,n)}return su.mergeAll=r,su}var bb;function zl(){if(bb)return uu;bb=1,Object.defineProperty(uu,"__esModule",{value:!0}),uu.concatAll=void 0;var e=Nc();function t(){return e.mergeAll(1)}return uu.concatAll=t,uu}var yb;function Kl(){if(yb)return au;yb=1,Object.defineProperty(au,"__esModule",{value:!0}),au.concat=void 0;var e=zl(),t=At(),r=fi();function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return e.concatAll()(r.from(i,t.popScheduler(i)))}return au.concat=n,au}var fu={},du={},mb;function Gl(){if(mb)return du;mb=1,Object.defineProperty(du,"__esModule",{value:!0}),du.defer=void 0;var e=Ee(),t=le();function r(n){return new e.Observable(function(i){t.innerFrom(n()).subscribe(i)})}return du.defer=r,du}var gb;function cR(){if(gb)return fu;gb=1,Object.defineProperty(fu,"__esModule",{value:!0}),fu.connectable=void 0;var e=ut(),t=Ee(),r=Gl(),n={connector:function(){return new e.Subject},resetOnDisconnect:!0};function i(o,a){a===void 0&&(a=n);var u=null,s=a.connector,l=a.resetOnDisconnect,d=l===void 0?!0:l,c=s(),p=new t.Observable(function(b){return c.subscribe(b)});return p.connect=function(){return(!u||u.closed)&&(u=r.defer(function(){return o}).subscribe(c),d&&u.add(function(){return c=s()})),u},p}return fu.connectable=i,fu}var hu={},wb;function lR(){if(wb)return hu;wb=1,Object.defineProperty(hu,"__esModule",{value:!0}),hu.forkJoin=void 0;var e=Ee(),t=wO(),r=le(),n=At(),i=ne(),o=yo(),a=OO();function u(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var d=n.popResultSelector(s),c=t.argsArgArrayOrObject(s),p=c.args,b=c.keys,m=new e.Observable(function(_){var f=p.length;if(!f){_.complete();return}for(var y=new Array(f),g=f,h=f,v=function(E){var O=!1;r.innerFrom(p[E]).subscribe(i.createOperatorSubscriber(_,function(S){O||(O=!0,h--),y[E]=S},function(){return g--},void 0,function(){(!g||!O)&&(h||_.next(b?a.createObject(b,y):y),_.complete())}))},w=0;w<f;w++)v(w)});return d?m.pipe(o.mapOneOrManyArgs(d)):m}return hu.forkJoin=u,hu}var Ki={},Ob;function fR(){if(Ob)return Ki;Ob=1;var e=Ki&&Ki.__read||function(_,f){var y=typeof Symbol=="function"&&_[Symbol.iterator];if(!y)return _;var g=y.call(_),h,v=[],w;try{for(;(f===void 0||f-- >0)&&!(h=g.next()).done;)v.push(h.value)}catch(E){w={error:E}}finally{try{h&&!h.done&&(y=g.return)&&y.call(g)}finally{if(w)throw w.error}}return v};Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.fromEvent=void 0;var t=le(),r=Ee(),n=hn(),i=Oh(),o=ge(),a=yo(),u=["addListener","removeListener"],s=["addEventListener","removeEventListener"],l=["on","off"];function d(_,f,y,g){if(o.isFunction(y)&&(g=y,y=void 0),g)return d(_,f,y).pipe(a.mapOneOrManyArgs(g));var h=e(m(_)?s.map(function(E){return function(O){return _[E](f,O,y)}}):p(_)?u.map(c(_,f)):b(_)?l.map(c(_,f)):[],2),v=h[0],w=h[1];if(!v&&i.isArrayLike(_))return n.mergeMap(function(E){return d(E,f,y)})(t.innerFrom(_));if(!v)throw new TypeError("Invalid event target");return new r.Observable(function(E){var O=function(){for(var S=[],P=0;P<arguments.length;P++)S[P]=arguments[P];return E.next(1<S.length?S:S[0])};return v(O),function(){return w(O)}})}Ki.fromEvent=d;function c(_,f){return function(y){return function(g){return _[y](f,g)}}}function p(_){return o.isFunction(_.addListener)&&o.isFunction(_.removeListener)}function b(_){return o.isFunction(_.on)&&o.isFunction(_.off)}function m(_){return o.isFunction(_.addEventListener)&&o.isFunction(_.removeEventListener)}return Ki}var vu={},Eb;function dR(){if(Eb)return vu;Eb=1,Object.defineProperty(vu,"__esModule",{value:!0}),vu.fromEventPattern=void 0;var e=Ee(),t=ge(),r=yo();function n(i,o,a){return a?n(i,o).pipe(r.mapOneOrManyArgs(a)):new e.Observable(function(u){var s=function(){for(var d=[],c=0;c<arguments.length;c++)d[c]=arguments[c];return u.next(d.length===1?d[0]:d)},l=i(s);return t.isFunction(o)?function(){return o(s,l)}:void 0})}return vu.fromEventPattern=n,vu}var Gi={},Sb;function hR(){if(Sb)return Gi;Sb=1;var e=Gi&&Gi.__generator||function(a,u){var s={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},l,d,c,p;return p={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function b(_){return function(f){return m([_,f])}}function m(_){if(l)throw new TypeError("Generator is already executing.");for(;s;)try{if(l=1,d&&(c=_[0]&2?d.return:_[0]?d.throw||((c=d.return)&&c.call(d),0):d.next)&&!(c=c.call(d,_[1])).done)return c;switch(d=0,c&&(_=[_[0]&2,c.value]),_[0]){case 0:case 1:c=_;break;case 4:return s.label++,{value:_[1],done:!1};case 5:s.label++,d=_[1],_=[0];continue;case 7:_=s.ops.pop(),s.trys.pop();continue;default:if(c=s.trys,!(c=c.length>0&&c[c.length-1])&&(_[0]===6||_[0]===2)){s=0;continue}if(_[0]===3&&(!c||_[1]>c[0]&&_[1]<c[3])){s.label=_[1];break}if(_[0]===6&&s.label<c[1]){s.label=c[1],c=_;break}if(c&&s.label<c[2]){s.label=c[2],s.ops.push(_);break}c[2]&&s.ops.pop(),s.trys.pop();continue}_=u.call(a,s)}catch(f){_=[6,f],d=0}finally{l=c=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}};Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.generate=void 0;var t=at(),r=Hl(),n=Gl(),i=hO();function o(a,u,s,l,d){var c,p,b,m;arguments.length===1?(c=a,m=c.initialState,u=c.condition,s=c.iterate,p=c.resultSelector,b=p===void 0?t.identity:p,d=c.scheduler):(m=a,!l||r.isScheduler(l)?(b=t.identity,d=l):b=l);function _(){var f;return e(this,function(y){switch(y.label){case 0:f=m,y.label=1;case 1:return!u||u(f)?[4,b(f)]:[3,4];case 2:y.sent(),y.label=3;case 3:return f=s(f),[3,1];case 4:return[2]}})}return n.defer(d?function(){return i.scheduleIterable(_(),d)}:_)}return Gi.generate=o,Gi}var pu={},Pb;function vR(){if(Pb)return pu;Pb=1,Object.defineProperty(pu,"__esModule",{value:!0}),pu.iif=void 0;var e=Gl();function t(r,n,i){return e.defer(function(){return r()?n:i})}return pu.iif=t,pu}var _u={},bu={},Tb;function mo(){if(Tb)return bu;Tb=1,Object.defineProperty(bu,"__esModule",{value:!0}),bu.timer=void 0;var e=Ee(),t=Rt(),r=Hl(),n=Th();function i(o,a,u){o===void 0&&(o=0),u===void 0&&(u=t.async);var s=-1;return a!=null&&(r.isScheduler(a)?u=a:s=a),new e.Observable(function(l){var d=n.isValidDate(o)?+o-u.now():o;d<0&&(d=0);var c=0;return u.schedule(function(){l.closed||(l.next(c++),0<=s?this.schedule(void 0,s):l.complete())},d)})}return bu.timer=i,bu}var Cb;function EO(){if(Cb)return _u;Cb=1,Object.defineProperty(_u,"__esModule",{value:!0}),_u.interval=void 0;var e=Rt(),t=mo();function r(n,i){return n===void 0&&(n=0),i===void 0&&(i=e.asyncScheduler),n<0&&(n=0),t.timer(n,n,i)}return _u.interval=r,_u}var yu={},Rb;function pR(){if(Rb)return yu;Rb=1,Object.defineProperty(yu,"__esModule",{value:!0}),yu.merge=void 0;var e=Nc(),t=le(),r=Ir(),n=At(),i=fi();function o(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];var s=n.popScheduler(a),l=n.popNumber(a,1/0),d=a;return d.length?d.length===1?t.innerFrom(d[0]):e.mergeAll(l)(i.from(d,s)):r.EMPTY}return yu.merge=o,yu}var wd={},Ab;function Ib(){return Ab||(Ab=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.never=e.NEVER=void 0;var t=Ee(),r=ot();e.NEVER=new t.Observable(r.noop);function n(){return e.NEVER}e.never=n})(wd)),wd}var mu={},gu={},jb;function ia(){if(jb)return gu;jb=1,Object.defineProperty(gu,"__esModule",{value:!0}),gu.argsOrArgArray=void 0;var e=Array.isArray;function t(r){return r.length===1&&e(r[0])?r[0]:r}return gu.argsOrArgArray=t,gu}var Nb;function SO(){if(Nb)return mu;Nb=1,Object.defineProperty(mu,"__esModule",{value:!0}),mu.onErrorResumeNext=void 0;var e=Ee(),t=ia(),r=ne(),n=ot(),i=le();function o(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];var s=t.argsOrArgArray(a);return new e.Observable(function(l){var d=0,c=function(){if(d<s.length){var p=void 0;try{p=i.innerFrom(s[d++])}catch{c();return}var b=new r.OperatorSubscriber(l,void 0,n.noop,n.noop);p.subscribe(b),b.add(c)}else l.complete()};c()})}return mu.onErrorResumeNext=o,mu}var wu={},kb;function _R(){if(kb)return wu;kb=1,Object.defineProperty(wu,"__esModule",{value:!0}),wu.pairs=void 0;var e=fi();function t(r,n){return e.from(Object.entries(r),n)}return wu.pairs=t,wu}var Ou={},Eu={},Mb;function PO(){if(Mb)return Eu;Mb=1,Object.defineProperty(Eu,"__esModule",{value:!0}),Eu.not=void 0;function e(t,r){return function(n,i){return!t.call(r,n,i)}}return Eu.not=e,Eu}var Su={},Db;function hi(){if(Db)return Su;Db=1,Object.defineProperty(Su,"__esModule",{value:!0}),Su.filter=void 0;var e=J(),t=ne();function r(n,i){return e.operate(function(o,a){var u=0;o.subscribe(t.createOperatorSubscriber(a,function(s){return n.call(i,s,u++)&&a.next(s)}))})}return Su.filter=r,Su}var Lb;function bR(){if(Lb)return Ou;Lb=1,Object.defineProperty(Ou,"__esModule",{value:!0}),Ou.partition=void 0;var e=PO(),t=hi(),r=le();function n(i,o,a){return[t.filter(o,a)(r.innerFrom(i)),t.filter(e.not(o,a))(r.innerFrom(i))]}return Ou.partition=n,Ou}var Yi={},Ub;function TO(){if(Ub)return Yi;Ub=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.raceInit=Yi.race=void 0;var e=Ee(),t=le(),r=ia(),n=ne();function i(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];return a=r.argsOrArgArray(a),a.length===1?t.innerFrom(a[0]):new e.Observable(o(a))}Yi.race=i;function o(a){return function(u){for(var s=[],l=function(c){s.push(t.innerFrom(a[c]).subscribe(n.createOperatorSubscriber(u,function(p){if(s){for(var b=0;b<s.length;b++)b!==c&&s[b].unsubscribe();s=null}u.next(p)})))},d=0;s&&!u.closed&&d<a.length;d++)l(d)}}return Yi.raceInit=o,Yi}var Pu={},Bb;function yR(){if(Bb)return Pu;Bb=1,Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.range=void 0;var e=Ee(),t=Ir();function r(n,i,o){if(i==null&&(i=n,n=0),i<=0)return t.EMPTY;var a=i+n;return new e.Observable(o?function(u){var s=n;return o.schedule(function(){s<a?(u.next(s++),this.schedule()):u.complete()})}:function(u){for(var s=n;s<a&&!u.closed;)u.next(s++);u.complete()})}return Pu.range=r,Pu}var Tu={},qb;function mR(){if(qb)return Tu;qb=1,Object.defineProperty(Tu,"__esModule",{value:!0}),Tu.using=void 0;var e=Ee(),t=le(),r=Ir();function n(i,o){return new e.Observable(function(a){var u=i(),s=o(u),l=s?t.innerFrom(s):r.EMPTY;return l.subscribe(a),function(){u&&u.unsubscribe()}})}return Tu.using=n,Tu}var Vr={},xb;function Ah(){if(xb)return Vr;xb=1;var e=Vr&&Vr.__read||function(l,d){var c=typeof Symbol=="function"&&l[Symbol.iterator];if(!c)return l;var p=c.call(l),b,m=[],_;try{for(;(d===void 0||d-- >0)&&!(b=p.next()).done;)m.push(b.value)}catch(f){_={error:f}}finally{try{b&&!b.done&&(c=p.return)&&c.call(p)}finally{if(_)throw _.error}}return m},t=Vr&&Vr.__spreadArray||function(l,d){for(var c=0,p=d.length,b=l.length;c<p;c++,b++)l[b]=d[c];return l};Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.zip=void 0;var r=Ee(),n=le(),i=ia(),o=Ir(),a=ne(),u=At();function s(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];var c=u.popResultSelector(l),p=i.argsOrArgArray(l);return p.length?new r.Observable(function(b){var m=p.map(function(){return[]}),_=p.map(function(){return!1});b.add(function(){m=_=null});for(var f=function(g){n.innerFrom(p[g]).subscribe(a.createOperatorSubscriber(b,function(h){if(m[g].push(h),m.every(function(w){return w.length})){var v=m.map(function(w){return w.shift()});b.next(c?c.apply(void 0,t([],e(v))):v),m.some(function(w,E){return!w.length&&_[E]})&&b.complete()}},function(){_[g]=!0,!m[g].length&&b.complete()}))},y=0;!b.closed&&y<p.length;y++)f(y);return function(){m=_=null}}):o.EMPTY}return Vr.zip=s,Vr}var Od={},Fb;function gR(){return Fb||(Fb=1,Object.defineProperty(Od,"__esModule",{value:!0})),Od}var Cu={},Vb;function Ih(){if(Vb)return Cu;Vb=1,Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.audit=void 0;var e=J(),t=le(),r=ne();function n(i){return e.operate(function(o,a){var u=!1,s=null,l=null,d=!1,c=function(){if(l?.unsubscribe(),l=null,u){u=!1;var b=s;s=null,a.next(b)}d&&a.complete()},p=function(){l=null,d&&a.complete()};o.subscribe(r.createOperatorSubscriber(a,function(b){u=!0,s=b,l||t.innerFrom(i(b)).subscribe(l=r.createOperatorSubscriber(a,c,p))},function(){d=!0,(!u||!l||l.closed)&&a.complete()}))})}return Cu.audit=n,Cu}var Ru={},$b;function CO(){if($b)return Ru;$b=1,Object.defineProperty(Ru,"__esModule",{value:!0}),Ru.auditTime=void 0;var e=Rt(),t=Ih(),r=mo();function n(i,o){return o===void 0&&(o=e.asyncScheduler),t.audit(function(){return r.timer(i,o)})}return Ru.auditTime=n,Ru}var Au={},Wb;function RO(){if(Wb)return Au;Wb=1,Object.defineProperty(Au,"__esModule",{value:!0}),Au.buffer=void 0;var e=J(),t=ot(),r=ne(),n=le();function i(o){return e.operate(function(a,u){var s=[];return a.subscribe(r.createOperatorSubscriber(u,function(l){return s.push(l)},function(){u.next(s),u.complete()})),n.innerFrom(o).subscribe(r.createOperatorSubscriber(u,function(){var l=s;s=[],u.next(l)},t.noop)),function(){s=null}})}return Au.buffer=i,Au}var Zi={},Hb;function AO(){if(Hb)return Zi;Hb=1;var e=Zi&&Zi.__values||function(o){var a=typeof Symbol=="function"&&Symbol.iterator,u=a&&o[a],s=0;if(u)return u.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&s>=o.length&&(o=void 0),{value:o&&o[s++],done:!o}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.bufferCount=void 0;var t=J(),r=ne(),n=ci();function i(o,a){return a===void 0&&(a=null),a=a??o,t.operate(function(u,s){var l=[],d=0;u.subscribe(r.createOperatorSubscriber(s,function(c){var p,b,m,_,f=null;d++%a===0&&l.push([]);try{for(var y=e(l),g=y.next();!g.done;g=y.next()){var h=g.value;h.push(c),o<=h.length&&(f=f??[],f.push(h))}}catch(E){p={error:E}}finally{try{g&&!g.done&&(b=y.return)&&b.call(y)}finally{if(p)throw p.error}}if(f)try{for(var v=e(f),w=v.next();!w.done;w=v.next()){var h=w.value;n.arrRemove(l,h),s.next(h)}}catch(E){m={error:E}}finally{try{w&&!w.done&&(_=v.return)&&_.call(v)}finally{if(m)throw m.error}}},function(){var c,p;try{for(var b=e(l),m=b.next();!m.done;m=b.next()){var _=m.value;s.next(_)}}catch(f){c={error:f}}finally{try{m&&!m.done&&(p=b.return)&&p.call(b)}finally{if(c)throw c.error}}s.complete()},void 0,function(){l=null}))})}return Zi.bufferCount=i,Zi}var Xi={},zb;function IO(){if(zb)return Xi;zb=1;var e=Xi&&Xi.__values||function(l){var d=typeof Symbol=="function"&&Symbol.iterator,c=d&&l[d],p=0;if(c)return c.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&p>=l.length&&(l=void 0),{value:l&&l[p++],done:!l}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.bufferTime=void 0;var t=Ut(),r=J(),n=ne(),i=ci(),o=Rt(),a=At(),u=li();function s(l){for(var d,c,p=[],b=1;b<arguments.length;b++)p[b-1]=arguments[b];var m=(d=a.popScheduler(p))!==null&&d!==void 0?d:o.asyncScheduler,_=(c=p[0])!==null&&c!==void 0?c:null,f=p[1]||1/0;return r.operate(function(y,g){var h=[],v=!1,w=function(S){var P=S.buffer,I=S.subs;I.unsubscribe(),i.arrRemove(h,S),g.next(P),v&&E()},E=function(){if(h){var S=new t.Subscription;g.add(S);var P=[],I={buffer:P,subs:S};h.push(I),u.executeSchedule(S,m,function(){return w(I)},l)}};_!==null&&_>=0?u.executeSchedule(g,m,E,_,!0):v=!0,E();var O=n.createOperatorSubscriber(g,function(S){var P,I,C=h.slice();try{for(var R=e(C),A=R.next();!A.done;A=R.next()){var D=A.value,j=D.buffer;j.push(S),f<=j.length&&w(D)}}catch(U){P={error:U}}finally{try{A&&!A.done&&(I=R.return)&&I.call(R)}finally{if(P)throw P.error}}},function(){for(;h?.length;)g.next(h.shift().buffer);O?.unsubscribe(),g.complete(),g.unsubscribe()},void 0,function(){return h=null});y.subscribe(O)})}return Xi.bufferTime=s,Xi}var Qi={},Kb;function jO(){if(Kb)return Qi;Kb=1;var e=Qi&&Qi.__values||function(s){var l=typeof Symbol=="function"&&Symbol.iterator,d=l&&s[l],c=0;if(d)return d.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.bufferToggle=void 0;var t=Ut(),r=J(),n=le(),i=ne(),o=ot(),a=ci();function u(s,l){return r.operate(function(d,c){var p=[];n.innerFrom(s).subscribe(i.createOperatorSubscriber(c,function(b){var m=[];p.push(m);var _=new t.Subscription,f=function(){a.arrRemove(p,m),c.next(m),_.unsubscribe()};_.add(n.innerFrom(l(b)).subscribe(i.createOperatorSubscriber(c,f,o.noop)))},o.noop)),d.subscribe(i.createOperatorSubscriber(c,function(b){var m,_;try{for(var f=e(p),y=f.next();!y.done;y=f.next()){var g=y.value;g.push(b)}}catch(h){m={error:h}}finally{try{y&&!y.done&&(_=f.return)&&_.call(f)}finally{if(m)throw m.error}}},function(){for(;p.length>0;)c.next(p.shift());c.complete()}))})}return Qi.bufferToggle=u,Qi}var Iu={},Gb;function NO(){if(Gb)return Iu;Gb=1,Object.defineProperty(Iu,"__esModule",{value:!0}),Iu.bufferWhen=void 0;var e=J(),t=ot(),r=ne(),n=le();function i(o){return e.operate(function(a,u){var s=null,l=null,d=function(){l?.unsubscribe();var c=s;s=[],c&&u.next(c),n.innerFrom(o()).subscribe(l=r.createOperatorSubscriber(u,d,t.noop))};d(),a.subscribe(r.createOperatorSubscriber(u,function(c){return s?.push(c)},function(){s&&u.next(s),u.complete()},void 0,function(){return s=l=null}))})}return Iu.bufferWhen=i,Iu}var ju={},Yb;function kO(){if(Yb)return ju;Yb=1,Object.defineProperty(ju,"__esModule",{value:!0}),ju.catchError=void 0;var e=le(),t=ne(),r=J();function n(i){return r.operate(function(o,a){var u=null,s=!1,l;u=o.subscribe(t.createOperatorSubscriber(a,void 0,void 0,function(d){l=e.innerFrom(i(d,n(i)(o))),u?(u.unsubscribe(),u=null,l.subscribe(a)):s=!0})),s&&(u.unsubscribe(),u=null,l.subscribe(a))})}return ju.catchError=n,ju}var Nu={},ku={},Mu={},Du={},Lu={},Uu={},Zb;function MO(){if(Zb)return Uu;Zb=1,Object.defineProperty(Uu,"__esModule",{value:!0}),Uu.scanInternals=void 0;var e=ne();function t(r,n,i,o,a){return function(u,s){var l=i,d=n,c=0;u.subscribe(e.createOperatorSubscriber(s,function(p){var b=c++;d=l?r(d,p,b):(l=!0,p),o&&s.next(d)},a&&(function(){l&&s.next(d),s.complete()})))}}return Uu.scanInternals=t,Uu}var Xb;function oa(){if(Xb)return Lu;Xb=1,Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.reduce=void 0;var e=MO(),t=J();function r(n,i){return t.operate(e.scanInternals(n,i,arguments.length>=2,!1,!0))}return Lu.reduce=r,Lu}var Qb;function jh(){if(Qb)return Du;Qb=1,Object.defineProperty(Du,"__esModule",{value:!0}),Du.toArray=void 0;var e=oa(),t=J(),r=function(i,o){return i.push(o),i};function n(){return t.operate(function(i,o){e.reduce(r,[])(i).subscribe(o)})}return Du.toArray=n,Du}var Jb;function DO(){if(Jb)return Mu;Jb=1,Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.joinAllInternals=void 0;var e=at(),t=yo(),r=$l(),n=hn(),i=jh();function o(a,u){return r.pipe(i.toArray(),n.mergeMap(function(s){return a(s)}),u?t.mapOneOrManyArgs(u):e.identity)}return Mu.joinAllInternals=o,Mu}var ey;function Nh(){if(ey)return ku;ey=1,Object.defineProperty(ku,"__esModule",{value:!0}),ku.combineLatestAll=void 0;var e=Ch(),t=DO();function r(n){return t.joinAllInternals(e.combineLatest,n)}return ku.combineLatestAll=r,ku}var ty;function LO(){if(ty)return Nu;ty=1,Object.defineProperty(Nu,"__esModule",{value:!0}),Nu.combineAll=void 0;var e=Nh();return Nu.combineAll=e.combineLatestAll,Nu}var $r={},Wr={},ry;function UO(){if(ry)return Wr;ry=1;var e=Wr&&Wr.__read||function(l,d){var c=typeof Symbol=="function"&&l[Symbol.iterator];if(!c)return l;var p=c.call(l),b,m=[],_;try{for(;(d===void 0||d-- >0)&&!(b=p.next()).done;)m.push(b.value)}catch(f){_={error:f}}finally{try{b&&!b.done&&(c=p.return)&&c.call(p)}finally{if(_)throw _.error}}return m},t=Wr&&Wr.__spreadArray||function(l,d){for(var c=0,p=d.length,b=l.length;c<p;c++,b++)l[b]=d[c];return l};Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.combineLatest=void 0;var r=Ch(),n=J(),i=ia(),o=yo(),a=$l(),u=At();function s(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];var c=u.popResultSelector(l);return c?a.pipe(s.apply(void 0,t([],e(l))),o.mapOneOrManyArgs(c)):n.operate(function(p,b){r.combineLatestInit(t([p],e(i.argsOrArgArray(l))))(b)})}return Wr.combineLatest=s,Wr}var ny;function BO(){if(ny)return $r;ny=1;var e=$r&&$r.__read||function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var u=a.call(i),s,l=[],d;try{for(;(o===void 0||o-- >0)&&!(s=u.next()).done;)l.push(s.value)}catch(c){d={error:c}}finally{try{s&&!s.done&&(a=u.return)&&a.call(u)}finally{if(d)throw d.error}}return l},t=$r&&$r.__spreadArray||function(i,o){for(var a=0,u=o.length,s=i.length;a<u;a++,s++)i[s]=o[a];return i};Object.defineProperty($r,"__esModule",{value:!0}),$r.combineLatestWith=void 0;var r=UO();function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return r.combineLatest.apply(void 0,t([],e(i)))}return $r.combineLatestWith=n,$r}var Bu={},iy;function kh(){if(iy)return Bu;iy=1,Object.defineProperty(Bu,"__esModule",{value:!0}),Bu.concatMap=void 0;var e=hn(),t=ge();function r(n,i){return t.isFunction(i)?e.mergeMap(n,i,1):e.mergeMap(n,1)}return Bu.concatMap=r,Bu}var qu={},oy;function qO(){if(oy)return qu;oy=1,Object.defineProperty(qu,"__esModule",{value:!0}),qu.concatMapTo=void 0;var e=kh(),t=ge();function r(n,i){return t.isFunction(i)?e.concatMap(function(){return n},i):e.concatMap(function(){return n})}return qu.concatMapTo=r,qu}var Hr={},zr={},ay;function xO(){if(ay)return zr;ay=1;var e=zr&&zr.__read||function(u,s){var l=typeof Symbol=="function"&&u[Symbol.iterator];if(!l)return u;var d=l.call(u),c,p=[],b;try{for(;(s===void 0||s-- >0)&&!(c=d.next()).done;)p.push(c.value)}catch(m){b={error:m}}finally{try{c&&!c.done&&(l=d.return)&&l.call(d)}finally{if(b)throw b.error}}return p},t=zr&&zr.__spreadArray||function(u,s){for(var l=0,d=s.length,c=u.length;l<d;l++,c++)u[c]=s[l];return u};Object.defineProperty(zr,"__esModule",{value:!0}),zr.concat=void 0;var r=J(),n=zl(),i=At(),o=fi();function a(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];var l=i.popScheduler(u);return r.operate(function(d,c){n.concatAll()(o.from(t([d],e(u)),l)).subscribe(c)})}return zr.concat=a,zr}var uy;function FO(){if(uy)return Hr;uy=1;var e=Hr&&Hr.__read||function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var u=a.call(i),s,l=[],d;try{for(;(o===void 0||o-- >0)&&!(s=u.next()).done;)l.push(s.value)}catch(c){d={error:c}}finally{try{s&&!s.done&&(a=u.return)&&a.call(u)}finally{if(d)throw d.error}}return l},t=Hr&&Hr.__spreadArray||function(i,o){for(var a=0,u=o.length,s=i.length;a<u;a++,s++)i[s]=o[a];return i};Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.concatWith=void 0;var r=xO();function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return r.concat.apply(void 0,t([],e(i)))}return Hr.concatWith=n,Hr}var xu={},Fu={},sy;function wR(){if(sy)return Fu;sy=1,Object.defineProperty(Fu,"__esModule",{value:!0}),Fu.fromSubscribable=void 0;var e=Ee();function t(r){return new e.Observable(function(n){return r.subscribe(n)})}return Fu.fromSubscribable=t,Fu}var cy;function Yl(){if(cy)return xu;cy=1,Object.defineProperty(xu,"__esModule",{value:!0}),xu.connect=void 0;var e=ut(),t=le(),r=J(),n=wR(),i={connector:function(){return new e.Subject}};function o(a,u){u===void 0&&(u=i);var s=u.connector;return r.operate(function(l,d){var c=s();t.innerFrom(a(n.fromSubscribable(c))).subscribe(d),d.add(l.subscribe(c))})}return xu.connect=o,xu}var Vu={},ly;function VO(){if(ly)return Vu;ly=1,Object.defineProperty(Vu,"__esModule",{value:!0}),Vu.count=void 0;var e=oa();function t(r){return e.reduce(function(n,i,o){return!r||r(i,o)?n+1:n},0)}return Vu.count=t,Vu}var $u={},fy;function $O(){if(fy)return $u;fy=1,Object.defineProperty($u,"__esModule",{value:!0}),$u.debounce=void 0;var e=J(),t=ot(),r=ne(),n=le();function i(o){return e.operate(function(a,u){var s=!1,l=null,d=null,c=function(){if(d?.unsubscribe(),d=null,s){s=!1;var p=l;l=null,u.next(p)}};a.subscribe(r.createOperatorSubscriber(u,function(p){d?.unsubscribe(),s=!0,l=p,d=r.createOperatorSubscriber(u,c,t.noop),n.innerFrom(o(p)).subscribe(d)},function(){c(),u.complete()},void 0,function(){l=d=null}))})}return $u.debounce=i,$u}var Wu={},dy;function WO(){if(dy)return Wu;dy=1,Object.defineProperty(Wu,"__esModule",{value:!0}),Wu.debounceTime=void 0;var e=Rt(),t=J(),r=ne();function n(i,o){return o===void 0&&(o=e.asyncScheduler),t.operate(function(a,u){var s=null,l=null,d=null,c=function(){if(s){s.unsubscribe(),s=null;var b=l;l=null,u.next(b)}};function p(){var b=d+i,m=o.now();if(m<b){s=this.schedule(void 0,b-m),u.add(s);return}c()}a.subscribe(r.createOperatorSubscriber(u,function(b){l=b,d=o.now(),s||(s=o.schedule(p,i),u.add(s))},function(){c(),u.complete()},void 0,function(){l=s=null}))})}return Wu.debounceTime=n,Wu}var Hu={},hy;function kc(){if(hy)return Hu;hy=1,Object.defineProperty(Hu,"__esModule",{value:!0}),Hu.defaultIfEmpty=void 0;var e=J(),t=ne();function r(n){return e.operate(function(i,o){var a=!1;i.subscribe(t.createOperatorSubscriber(o,function(u){a=!0,o.next(u)},function(){a||o.next(n),o.complete()}))})}return Hu.defaultIfEmpty=r,Hu}var zu={},Ku={},Gu={},vy;function Mc(){if(vy)return Gu;vy=1,Object.defineProperty(Gu,"__esModule",{value:!0}),Gu.take=void 0;var e=Ir(),t=J(),r=ne();function n(i){return i<=0?function(){return e.EMPTY}:t.operate(function(o,a){var u=0;o.subscribe(r.createOperatorSubscriber(a,function(s){++u<=i&&(a.next(s),i<=u&&a.complete())}))})}return Gu.take=n,Gu}var Yu={},py;function Mh(){if(py)return Yu;py=1,Object.defineProperty(Yu,"__esModule",{value:!0}),Yu.ignoreElements=void 0;var e=J(),t=ne(),r=ot();function n(){return e.operate(function(i,o){i.subscribe(t.createOperatorSubscriber(o,r.noop))})}return Yu.ignoreElements=n,Yu}var Zu={},_y;function Dh(){if(_y)return Zu;_y=1,Object.defineProperty(Zu,"__esModule",{value:!0}),Zu.mapTo=void 0;var e=di();function t(r){return e.map(function(){return r})}return Zu.mapTo=t,Zu}var by;function Lh(){if(by)return Ku;by=1,Object.defineProperty(Ku,"__esModule",{value:!0}),Ku.delayWhen=void 0;var e=Kl(),t=Mc(),r=Mh(),n=Dh(),i=hn(),o=le();function a(u,s){return s?function(l){return e.concat(s.pipe(t.take(1),r.ignoreElements()),l.pipe(a(u)))}:i.mergeMap(function(l,d){return o.innerFrom(u(l,d)).pipe(t.take(1),n.mapTo(l))})}return Ku.delayWhen=a,Ku}var yy;function HO(){if(yy)return zu;yy=1,Object.defineProperty(zu,"__esModule",{value:!0}),zu.delay=void 0;var e=Rt(),t=Lh(),r=mo();function n(i,o){o===void 0&&(o=e.asyncScheduler);var a=r.timer(i,o);return t.delayWhen(function(){return a})}return zu.delay=n,zu}var Xu={},my;function zO(){if(my)return Xu;my=1,Object.defineProperty(Xu,"__esModule",{value:!0}),Xu.dematerialize=void 0;var e=Ph(),t=J(),r=ne();function n(){return t.operate(function(i,o){i.subscribe(r.createOperatorSubscriber(o,function(a){return e.observeNotification(a,o)}))})}return Xu.dematerialize=n,Xu}var Qu={},gy;function KO(){if(gy)return Qu;gy=1,Object.defineProperty(Qu,"__esModule",{value:!0}),Qu.distinct=void 0;var e=J(),t=ne(),r=ot(),n=le();function i(o,a){return e.operate(function(u,s){var l=new Set;u.subscribe(t.createOperatorSubscriber(s,function(d){var c=o?o(d):d;l.has(c)||(l.add(c),s.next(d))})),a&&n.innerFrom(a).subscribe(t.createOperatorSubscriber(s,function(){return l.clear()},r.noop))})}return Qu.distinct=i,Qu}var Ju={},wy;function Uh(){if(wy)return Ju;wy=1,Object.defineProperty(Ju,"__esModule",{value:!0}),Ju.distinctUntilChanged=void 0;var e=at(),t=J(),r=ne();function n(o,a){return a===void 0&&(a=e.identity),o=o??i,t.operate(function(u,s){var l,d=!0;u.subscribe(r.createOperatorSubscriber(s,function(c){var p=a(c);(d||!o(l,p))&&(d=!1,l=p,s.next(c))}))})}Ju.distinctUntilChanged=n;function i(o,a){return o===a}return Ju}var es={},Oy;function GO(){if(Oy)return es;Oy=1,Object.defineProperty(es,"__esModule",{value:!0}),es.distinctUntilKeyChanged=void 0;var e=Uh();function t(r,n){return e.distinctUntilChanged(function(i,o){return n?n(i[r],o[r]):i[r]===o[r]})}return es.distinctUntilKeyChanged=t,es}var ts={},rs={},Ey;function Dc(){if(Ey)return rs;Ey=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.throwIfEmpty=void 0;var e=bo(),t=J(),r=ne();function n(o){return o===void 0&&(o=i),t.operate(function(a,u){var s=!1;a.subscribe(r.createOperatorSubscriber(u,function(l){s=!0,u.next(l)},function(){return s?u.complete():u.error(o())}))})}rs.throwIfEmpty=n;function i(){return new e.EmptyError}return rs}var Sy;function YO(){if(Sy)return ts;Sy=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.elementAt=void 0;var e=bO(),t=hi(),r=Dc(),n=kc(),i=Mc();function o(a,u){if(a<0)throw new e.ArgumentOutOfRangeError;var s=arguments.length>=2;return function(l){return l.pipe(t.filter(function(d,c){return c===a}),i.take(1),s?n.defaultIfEmpty(u):r.throwIfEmpty(function(){return new e.ArgumentOutOfRangeError}))}}return ts.elementAt=o,ts}var Kr={},Py;function ZO(){if(Py)return Kr;Py=1;var e=Kr&&Kr.__read||function(o,a){var u=typeof Symbol=="function"&&o[Symbol.iterator];if(!u)return o;var s=u.call(o),l,d=[],c;try{for(;(a===void 0||a-- >0)&&!(l=s.next()).done;)d.push(l.value)}catch(p){c={error:p}}finally{try{l&&!l.done&&(u=s.return)&&u.call(s)}finally{if(c)throw c.error}}return d},t=Kr&&Kr.__spreadArray||function(o,a){for(var u=0,s=a.length,l=o.length;u<s;u++,l++)o[l]=a[u];return o};Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.endWith=void 0;var r=Kl(),n=Sh();function i(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return function(u){return r.concat(u,n.of.apply(void 0,t([],e(o))))}}return Kr.endWith=i,Kr}var ns={},Ty;function XO(){if(Ty)return ns;Ty=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.every=void 0;var e=J(),t=ne();function r(n,i){return e.operate(function(o,a){var u=0;o.subscribe(t.createOperatorSubscriber(a,function(s){n.call(i,s,u++,o)||(a.next(!1),a.complete())},function(){a.next(!0),a.complete()}))})}return ns.every=r,ns}var is={},os={},as={},Cy;function Bh(){if(Cy)return as;Cy=1,Object.defineProperty(as,"__esModule",{value:!0}),as.exhaustMap=void 0;var e=di(),t=le(),r=J(),n=ne();function i(o,a){return a?function(u){return u.pipe(i(function(s,l){return t.innerFrom(o(s,l)).pipe(e.map(function(d,c){return a(s,d,l,c)}))}))}:r.operate(function(u,s){var l=0,d=null,c=!1;u.subscribe(n.createOperatorSubscriber(s,function(p){d||(d=n.createOperatorSubscriber(s,void 0,function(){d=null,c&&s.complete()}),t.innerFrom(o(p,l++)).subscribe(d))},function(){c=!0,!d&&s.complete()}))})}return as.exhaustMap=i,as}var Ry;function qh(){if(Ry)return os;Ry=1,Object.defineProperty(os,"__esModule",{value:!0}),os.exhaustAll=void 0;var e=Bh(),t=at();function r(){return e.exhaustMap(t.identity)}return os.exhaustAll=r,os}var Ay;function QO(){if(Ay)return is;Ay=1,Object.defineProperty(is,"__esModule",{value:!0}),is.exhaust=void 0;var e=qh();return is.exhaust=e.exhaustAll,is}var us={},Iy;function JO(){if(Iy)return us;Iy=1,Object.defineProperty(us,"__esModule",{value:!0}),us.expand=void 0;var e=J(),t=Rh();function r(n,i,o){return i===void 0&&(i=1/0),i=(i||0)<1?1/0:i,e.operate(function(a,u){return t.mergeInternals(a,u,n,i,void 0,!0,o)})}return us.expand=r,us}var ss={},jy;function e1(){if(jy)return ss;jy=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.finalize=void 0;var e=J();function t(r){return e.operate(function(n,i){try{n.subscribe(i)}finally{i.add(r)}})}return ss.finalize=t,ss}var Ji={},Ny;function xh(){if(Ny)return Ji;Ny=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.createFind=Ji.find=void 0;var e=J(),t=ne();function r(i,o){return e.operate(n(i,o,"value"))}Ji.find=r;function n(i,o,a){var u=a==="index";return function(s,l){var d=0;s.subscribe(t.createOperatorSubscriber(l,function(c){var p=d++;i.call(o,c,p,s)&&(l.next(u?p:c),l.complete())},function(){l.next(u?-1:void 0),l.complete()}))}}return Ji.createFind=n,Ji}var cs={},ky;function t1(){if(ky)return cs;ky=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.findIndex=void 0;var e=J(),t=xh();function r(n,i){return e.operate(t.createFind(n,i,"index"))}return cs.findIndex=r,cs}var ls={},My;function r1(){if(My)return ls;My=1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.first=void 0;var e=bo(),t=hi(),r=Mc(),n=kc(),i=Dc(),o=at();function a(u,s){var l=arguments.length>=2;return function(d){return d.pipe(u?t.filter(function(c,p){return u(c,p,d)}):o.identity,r.take(1),l?n.defaultIfEmpty(s):i.throwIfEmpty(function(){return new e.EmptyError}))}}return ls.first=a,ls}var fs={},Dy;function n1(){if(Dy)return fs;Dy=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.groupBy=void 0;var e=Ee(),t=le(),r=ut(),n=J(),i=ne();function o(a,u,s,l){return n.operate(function(d,c){var p;!u||typeof u=="function"?p=u:(s=u.duration,p=u.element,l=u.connector);var b=new Map,m=function(v){b.forEach(v),v(c)},_=function(v){return m(function(w){return w.error(v)})},f=0,y=!1,g=new i.OperatorSubscriber(c,function(v){try{var w=a(v),E=b.get(w);if(!E){b.set(w,E=l?l():new r.Subject);var O=h(w,E);if(c.next(O),s){var S=i.createOperatorSubscriber(E,function(){E.complete(),S?.unsubscribe()},void 0,void 0,function(){return b.delete(w)});g.add(t.innerFrom(s(O)).subscribe(S))}}E.next(p?p(v):v)}catch(P){_(P)}},function(){return m(function(v){return v.complete()})},_,function(){return b.clear()},function(){return y=!0,f===0});d.subscribe(g);function h(v,w){var E=new e.Observable(function(O){f++;var S=w.subscribe(O);return function(){S.unsubscribe(),--f===0&&y&&g.unsubscribe()}});return E.key=v,E}})}return fs.groupBy=o,fs}var ds={},Ly;function i1(){if(Ly)return ds;Ly=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.isEmpty=void 0;var e=J(),t=ne();function r(){return e.operate(function(n,i){n.subscribe(t.createOperatorSubscriber(i,function(){i.next(!1),i.complete()},function(){i.next(!0),i.complete()}))})}return ds.isEmpty=r,ds}var hs={},eo={},Uy;function Fh(){if(Uy)return eo;Uy=1;var e=eo&&eo.__values||function(o){var a=typeof Symbol=="function"&&Symbol.iterator,u=a&&o[a],s=0;if(u)return u.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&s>=o.length&&(o=void 0),{value:o&&o[s++],done:!o}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(eo,"__esModule",{value:!0}),eo.takeLast=void 0;var t=Ir(),r=J(),n=ne();function i(o){return o<=0?function(){return t.EMPTY}:r.operate(function(a,u){var s=[];a.subscribe(n.createOperatorSubscriber(u,function(l){s.push(l),o<s.length&&s.shift()},function(){var l,d;try{for(var c=e(s),p=c.next();!p.done;p=c.next()){var b=p.value;u.next(b)}}catch(m){l={error:m}}finally{try{p&&!p.done&&(d=c.return)&&d.call(c)}finally{if(l)throw l.error}}u.complete()},void 0,function(){s=null}))})}return eo.takeLast=i,eo}var By;function o1(){if(By)return hs;By=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.last=void 0;var e=bo(),t=hi(),r=Fh(),n=Dc(),i=kc(),o=at();function a(u,s){var l=arguments.length>=2;return function(d){return d.pipe(u?t.filter(function(c,p){return u(c,p,d)}):o.identity,r.takeLast(1),l?i.defaultIfEmpty(s):n.throwIfEmpty(function(){return new e.EmptyError}))}}return hs.last=a,hs}var vs={},qy;function a1(){if(qy)return vs;qy=1,Object.defineProperty(vs,"__esModule",{value:!0}),vs.materialize=void 0;var e=Ph(),t=J(),r=ne();function n(){return t.operate(function(i,o){i.subscribe(r.createOperatorSubscriber(o,function(a){o.next(e.Notification.createNext(a))},function(){o.next(e.Notification.createComplete()),o.complete()},function(a){o.next(e.Notification.createError(a)),o.complete()}))})}return vs.materialize=n,vs}var ps={},xy;function u1(){if(xy)return ps;xy=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.max=void 0;var e=oa(),t=ge();function r(n){return e.reduce(t.isFunction(n)?function(i,o){return n(i,o)>0?i:o}:function(i,o){return i>o?i:o})}return ps.max=r,ps}var _s={},Fy;function s1(){if(Fy)return _s;Fy=1,Object.defineProperty(_s,"__esModule",{value:!0}),_s.flatMap=void 0;var e=hn();return _s.flatMap=e.mergeMap,_s}var bs={},Vy;function c1(){if(Vy)return bs;Vy=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.mergeMapTo=void 0;var e=hn(),t=ge();function r(n,i,o){return o===void 0&&(o=1/0),t.isFunction(i)?e.mergeMap(function(){return n},i,o):(typeof i=="number"&&(o=i),e.mergeMap(function(){return n},o))}return bs.mergeMapTo=r,bs}var ys={},$y;function l1(){if($y)return ys;$y=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.mergeScan=void 0;var e=J(),t=Rh();function r(n,i,o){return o===void 0&&(o=1/0),e.operate(function(a,u){var s=i;return t.mergeInternals(a,u,function(l,d){return n(s,l,d)},o,function(l){s=l},!1,void 0,function(){return s=null})})}return ys.mergeScan=r,ys}var Gr={},Yr={},Wy;function f1(){if(Wy)return Yr;Wy=1;var e=Yr&&Yr.__read||function(u,s){var l=typeof Symbol=="function"&&u[Symbol.iterator];if(!l)return u;var d=l.call(u),c,p=[],b;try{for(;(s===void 0||s-- >0)&&!(c=d.next()).done;)p.push(c.value)}catch(m){b={error:m}}finally{try{c&&!c.done&&(l=d.return)&&l.call(d)}finally{if(b)throw b.error}}return p},t=Yr&&Yr.__spreadArray||function(u,s){for(var l=0,d=s.length,c=u.length;l<d;l++,c++)u[c]=s[l];return u};Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.merge=void 0;var r=J(),n=Nc(),i=At(),o=fi();function a(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];var l=i.popScheduler(u),d=i.popNumber(u,1/0);return r.operate(function(c,p){n.mergeAll(d)(o.from(t([c],e(u)),l)).subscribe(p)})}return Yr.merge=a,Yr}var Hy;function d1(){if(Hy)return Gr;Hy=1;var e=Gr&&Gr.__read||function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var u=a.call(i),s,l=[],d;try{for(;(o===void 0||o-- >0)&&!(s=u.next()).done;)l.push(s.value)}catch(c){d={error:c}}finally{try{s&&!s.done&&(a=u.return)&&a.call(u)}finally{if(d)throw d.error}}return l},t=Gr&&Gr.__spreadArray||function(i,o){for(var a=0,u=o.length,s=i.length;a<u;a++,s++)i[s]=o[a];return i};Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.mergeWith=void 0;var r=f1();function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return r.merge.apply(void 0,t([],e(i)))}return Gr.mergeWith=n,Gr}var ms={},zy;function h1(){if(zy)return ms;zy=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.min=void 0;var e=oa(),t=ge();function r(n){return e.reduce(t.isFunction(n)?function(i,o){return n(i,o)<0?i:o}:function(i,o){return i<o?i:o})}return ms.min=r,ms}var gs={},Ky;function Zl(){if(Ky)return gs;Ky=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.multicast=void 0;var e=Wl(),t=ge(),r=Yl();function n(i,o){var a=t.isFunction(i)?i:function(){return i};return t.isFunction(o)?r.connect(o,{connector:a}):function(u){return new e.ConnectableObservable(u,a)}}return gs.multicast=n,gs}var Wt={},Gy;function v1(){if(Gy)return Wt;Gy=1;var e=Wt&&Wt.__read||function(o,a){var u=typeof Symbol=="function"&&o[Symbol.iterator];if(!u)return o;var s=u.call(o),l,d=[],c;try{for(;(a===void 0||a-- >0)&&!(l=s.next()).done;)d.push(l.value)}catch(p){c={error:p}}finally{try{l&&!l.done&&(u=s.return)&&u.call(s)}finally{if(c)throw c.error}}return d},t=Wt&&Wt.__spreadArray||function(o,a){for(var u=0,s=a.length,l=o.length;u<s;u++,l++)o[l]=a[u];return o};Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.onErrorResumeNext=Wt.onErrorResumeNextWith=void 0;var r=ia(),n=SO();function i(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var u=r.argsOrArgArray(o);return function(s){return n.onErrorResumeNext.apply(void 0,t([s],e(u)))}}return Wt.onErrorResumeNextWith=i,Wt.onErrorResumeNext=i,Wt}var ws={},Yy;function p1(){if(Yy)return ws;Yy=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.pairwise=void 0;var e=J(),t=ne();function r(){return e.operate(function(n,i){var o,a=!1;n.subscribe(t.createOperatorSubscriber(i,function(u){var s=o;o=u,a&&i.next([s,u]),a=!0}))})}return ws.pairwise=r,ws}var Os={},Zy;function _1(){if(Zy)return Os;Zy=1,Object.defineProperty(Os,"__esModule",{value:!0}),Os.pluck=void 0;var e=di();function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=r.length;if(i===0)throw new Error("list of properties cannot be empty.");return e.map(function(o){for(var a=o,u=0;u<i;u++){var s=a?.[r[u]];if(typeof s<"u")a=s;else return}return a})}return Os.pluck=t,Os}var Es={},Xy;function b1(){if(Xy)return Es;Xy=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.publish=void 0;var e=ut(),t=Zl(),r=Yl();function n(i){return i?function(o){return r.connect(i)(o)}:function(o){return t.multicast(new e.Subject)(o)}}return Es.publish=n,Es}var Ss={},Qy;function y1(){if(Qy)return Ss;Qy=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.publishBehavior=void 0;var e=oO(),t=Wl();function r(n){return function(i){var o=new e.BehaviorSubject(n);return new t.ConnectableObservable(i,function(){return o})}}return Ss.publishBehavior=r,Ss}var Ps={},Jy;function m1(){if(Jy)return Ps;Jy=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.publishLast=void 0;var e=wh(),t=Wl();function r(){return function(n){var i=new e.AsyncSubject;return new t.ConnectableObservable(n,function(){return i})}}return Ps.publishLast=r,Ps}var Ts={},em;function g1(){if(em)return Ts;em=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.publishReplay=void 0;var e=gh(),t=Zl(),r=ge();function n(i,o,a,u){a&&!r.isFunction(a)&&(u=a);var s=r.isFunction(a)?a:void 0;return function(l){return t.multicast(new e.ReplaySubject(i,o,u),s)(l)}}return Ts.publishReplay=n,Ts}var Zr={},tm;function Vh(){if(tm)return Zr;tm=1;var e=Zr&&Zr.__read||function(a,u){var s=typeof Symbol=="function"&&a[Symbol.iterator];if(!s)return a;var l=s.call(a),d,c=[],p;try{for(;(u===void 0||u-- >0)&&!(d=l.next()).done;)c.push(d.value)}catch(b){p={error:b}}finally{try{d&&!d.done&&(s=l.return)&&s.call(l)}finally{if(p)throw p.error}}return c},t=Zr&&Zr.__spreadArray||function(a,u){for(var s=0,l=u.length,d=a.length;s<l;s++,d++)a[d]=u[s];return a};Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.raceWith=void 0;var r=TO(),n=J(),i=at();function o(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];return a.length?n.operate(function(s,l){r.raceInit(t([s],e(a)))(l)}):i.identity}return Zr.raceWith=o,Zr}var Cs={},rm;function w1(){if(rm)return Cs;rm=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.repeat=void 0;var e=Ir(),t=J(),r=ne(),n=le(),i=mo();function o(a){var u,s=1/0,l;return a!=null&&(typeof a=="object"?(u=a.count,s=u===void 0?1/0:u,l=a.delay):s=a),s<=0?function(){return e.EMPTY}:t.operate(function(d,c){var p=0,b,m=function(){if(b?.unsubscribe(),b=null,l!=null){var f=typeof l=="number"?i.timer(l):n.innerFrom(l(p)),y=r.createOperatorSubscriber(c,function(){y.unsubscribe(),_()});f.subscribe(y)}else _()},_=function(){var f=!1;b=d.subscribe(r.createOperatorSubscriber(c,void 0,function(){++p<s?b?m():f=!0:c.complete()})),f&&m()};_()})}return Cs.repeat=o,Cs}var Rs={},nm;function O1(){if(nm)return Rs;nm=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.repeatWhen=void 0;var e=le(),t=ut(),r=J(),n=ne();function i(o){return r.operate(function(a,u){var s,l=!1,d,c=!1,p=!1,b=function(){return p&&c&&(u.complete(),!0)},m=function(){return d||(d=new t.Subject,e.innerFrom(o(d)).subscribe(n.createOperatorSubscriber(u,function(){s?_():l=!0},function(){c=!0,b()}))),d},_=function(){p=!1,s=a.subscribe(n.createOperatorSubscriber(u,void 0,function(){p=!0,!b()&&m().next()})),l&&(s.unsubscribe(),s=null,l=!1,_())};_()})}return Rs.repeatWhen=i,Rs}var As={},im;function E1(){if(im)return As;im=1,Object.defineProperty(As,"__esModule",{value:!0}),As.retry=void 0;var e=J(),t=ne(),r=at(),n=mo(),i=le();function o(a){a===void 0&&(a=1/0);var u;a&&typeof a=="object"?u=a:u={count:a};var s=u.count,l=s===void 0?1/0:s,d=u.delay,c=u.resetOnSuccess,p=c===void 0?!1:c;return l<=0?r.identity:e.operate(function(b,m){var _=0,f,y=function(){var g=!1;f=b.subscribe(t.createOperatorSubscriber(m,function(h){p&&(_=0),m.next(h)},void 0,function(h){if(_++<l){var v=function(){f?(f.unsubscribe(),f=null,y()):g=!0};if(d!=null){var w=typeof d=="number"?n.timer(d):i.innerFrom(d(h,_)),E=t.createOperatorSubscriber(m,function(){E.unsubscribe(),v()},function(){m.complete()});w.subscribe(E)}else v()}else m.error(h)})),g&&(f.unsubscribe(),f=null,y())};y()})}return As.retry=o,As}var Is={},om;function S1(){if(om)return Is;om=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.retryWhen=void 0;var e=le(),t=ut(),r=J(),n=ne();function i(o){return r.operate(function(a,u){var s,l=!1,d,c=function(){s=a.subscribe(n.createOperatorSubscriber(u,void 0,void 0,function(p){d||(d=new t.Subject,e.innerFrom(o(d)).subscribe(n.createOperatorSubscriber(u,function(){return s?c():l=!0}))),d&&d.next(p)})),l&&(s.unsubscribe(),s=null,l=!1,c())};c()})}return Is.retryWhen=i,Is}var js={},am;function $h(){if(am)return js;am=1,Object.defineProperty(js,"__esModule",{value:!0}),js.sample=void 0;var e=le(),t=J(),r=ot(),n=ne();function i(o){return t.operate(function(a,u){var s=!1,l=null;a.subscribe(n.createOperatorSubscriber(u,function(d){s=!0,l=d})),e.innerFrom(o).subscribe(n.createOperatorSubscriber(u,function(){if(s){s=!1;var d=l;l=null,u.next(d)}},r.noop))})}return js.sample=i,js}var Ns={},um;function P1(){if(um)return Ns;um=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.sampleTime=void 0;var e=Rt(),t=$h(),r=EO();function n(i,o){return o===void 0&&(o=e.asyncScheduler),t.sample(r.interval(i,o))}return Ns.sampleTime=n,Ns}var ks={},sm;function T1(){if(sm)return ks;sm=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.scan=void 0;var e=J(),t=MO();function r(n,i){return e.operate(t.scanInternals(n,i,arguments.length>=2,!0))}return ks.scan=r,ks}var Ms={},cm;function C1(){if(cm)return Ms;cm=1,Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.sequenceEqual=void 0;var e=J(),t=ne(),r=le();function n(o,a){return a===void 0&&(a=function(u,s){return u===s}),e.operate(function(u,s){var l=i(),d=i(),c=function(b){s.next(b),s.complete()},p=function(b,m){var _=t.createOperatorSubscriber(s,function(f){var y=m.buffer,g=m.complete;y.length===0?g?c(!1):b.buffer.push(f):!a(f,y.shift())&&c(!1)},function(){b.complete=!0;var f=m.complete,y=m.buffer;f&&c(y.length===0),_?.unsubscribe()});return _};u.subscribe(p(l,d)),r.innerFrom(o).subscribe(p(d,l))})}Ms.sequenceEqual=n;function i(){return{buffer:[],complete:!1}}return Ms}var Xr={},lm;function Wh(){if(lm)return Xr;lm=1;var e=Xr&&Xr.__read||function(s,l){var d=typeof Symbol=="function"&&s[Symbol.iterator];if(!d)return s;var c=d.call(s),p,b=[],m;try{for(;(l===void 0||l-- >0)&&!(p=c.next()).done;)b.push(p.value)}catch(_){m={error:_}}finally{try{p&&!p.done&&(d=c.return)&&d.call(c)}finally{if(m)throw m.error}}return b},t=Xr&&Xr.__spreadArray||function(s,l){for(var d=0,c=l.length,p=s.length;d<c;d++,p++)s[p]=l[d];return s};Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.share=void 0;var r=le(),n=ut(),i=Cc(),o=J();function a(s){s===void 0&&(s={});var l=s.connector,d=l===void 0?function(){return new n.Subject}:l,c=s.resetOnError,p=c===void 0?!0:c,b=s.resetOnComplete,m=b===void 0?!0:b,_=s.resetOnRefCountZero,f=_===void 0?!0:_;return function(y){var g,h,v,w=0,E=!1,O=!1,S=function(){h?.unsubscribe(),h=void 0},P=function(){S(),g=v=void 0,E=O=!1},I=function(){var C=g;P(),C?.unsubscribe()};return o.operate(function(C,R){w++,!O&&!E&&S();var A=v=v??d();R.add(function(){w--,w===0&&!O&&!E&&(h=u(I,f))}),A.subscribe(R),!g&&w>0&&(g=new i.SafeSubscriber({next:function(D){return A.next(D)},error:function(D){O=!0,S(),h=u(P,p,D),A.error(D)},complete:function(){E=!0,S(),h=u(P,m),A.complete()}}),r.innerFrom(C).subscribe(g))})(y)}}Xr.share=a;function u(s,l){for(var d=[],c=2;c<arguments.length;c++)d[c-2]=arguments[c];if(l===!0){s();return}if(l!==!1){var p=new i.SafeSubscriber({next:function(){p.unsubscribe(),s()}});return r.innerFrom(l.apply(void 0,t([],e(d)))).subscribe(p)}}return Xr}var Ds={},fm;function R1(){if(fm)return Ds;fm=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.shareReplay=void 0;var e=gh(),t=Wh();function r(n,i,o){var a,u,s,l,d=!1;return n&&typeof n=="object"?(a=n.bufferSize,l=a===void 0?1/0:a,u=n.windowTime,i=u===void 0?1/0:u,s=n.refCount,d=s===void 0?!1:s,o=n.scheduler):l=n??1/0,t.share({connector:function(){return new e.ReplaySubject(l,i,o)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:d})}return Ds.shareReplay=r,Ds}var Ls={},dm;function A1(){if(dm)return Ls;dm=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.single=void 0;var e=bo(),t=mO(),r=yO(),n=J(),i=ne();function o(a){return n.operate(function(u,s){var l=!1,d,c=!1,p=0;u.subscribe(i.createOperatorSubscriber(s,function(b){c=!0,(!a||a(b,p++,u))&&(l&&s.error(new t.SequenceError("Too many matching values")),l=!0,d=b)},function(){l?(s.next(d),s.complete()):s.error(c?new r.NotFoundError("No matching values"):new e.EmptyError)}))})}return Ls.single=o,Ls}var Us={},hm;function I1(){if(hm)return Us;hm=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.skip=void 0;var e=hi();function t(r){return e.filter(function(n,i){return r<=i})}return Us.skip=t,Us}var Bs={},vm;function j1(){if(vm)return Bs;vm=1,Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.skipLast=void 0;var e=at(),t=J(),r=ne();function n(i){return i<=0?e.identity:t.operate(function(o,a){var u=new Array(i),s=0;return o.subscribe(r.createOperatorSubscriber(a,function(l){var d=s++;if(d<i)u[d]=l;else{var c=d%i,p=u[c];u[c]=l,a.next(p)}})),function(){u=null}})}return Bs.skipLast=n,Bs}var qs={},pm;function N1(){if(pm)return qs;pm=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.skipUntil=void 0;var e=J(),t=ne(),r=le(),n=ot();function i(o){return e.operate(function(a,u){var s=!1,l=t.createOperatorSubscriber(u,function(){l?.unsubscribe(),s=!0},n.noop);r.innerFrom(o).subscribe(l),a.subscribe(t.createOperatorSubscriber(u,function(d){return s&&u.next(d)}))})}return qs.skipUntil=i,qs}var xs={},_m;function k1(){if(_m)return xs;_m=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.skipWhile=void 0;var e=J(),t=ne();function r(n){return e.operate(function(i,o){var a=!1,u=0;i.subscribe(t.createOperatorSubscriber(o,function(s){return(a||(a=!n(s,u++)))&&o.next(s)}))})}return xs.skipWhile=r,xs}var Fs={},bm;function M1(){if(bm)return Fs;bm=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.startWith=void 0;var e=Kl(),t=At(),r=J();function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=t.popScheduler(i);return r.operate(function(u,s){(a?e.concat(i,u,a):e.concat(i,u)).subscribe(s)})}return Fs.startWith=n,Fs}var Vs={},$s={},ym;function Lc(){if(ym)return $s;ym=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.switchMap=void 0;var e=le(),t=J(),r=ne();function n(i,o){return t.operate(function(a,u){var s=null,l=0,d=!1,c=function(){return d&&!s&&u.complete()};a.subscribe(r.createOperatorSubscriber(u,function(p){s?.unsubscribe();var b=0,m=l++;e.innerFrom(i(p,m)).subscribe(s=r.createOperatorSubscriber(u,function(_){return u.next(o?o(p,_,m,b++):_)},function(){s=null,c()}))},function(){d=!0,c()}))})}return $s.switchMap=n,$s}var mm;function D1(){if(mm)return Vs;mm=1,Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.switchAll=void 0;var e=Lc(),t=at();function r(){return e.switchMap(t.identity)}return Vs.switchAll=r,Vs}var Ws={},gm;function L1(){if(gm)return Ws;gm=1,Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.switchMapTo=void 0;var e=Lc(),t=ge();function r(n,i){return t.isFunction(i)?e.switchMap(function(){return n},i):e.switchMap(function(){return n})}return Ws.switchMapTo=r,Ws}var Hs={},wm;function U1(){if(wm)return Hs;wm=1,Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.switchScan=void 0;var e=Lc(),t=J();function r(n,i){return t.operate(function(o,a){var u=i;return e.switchMap(function(s,l){return n(u,s,l)},function(s,l){return u=l,l})(o).subscribe(a),function(){u=null}})}return Hs.switchScan=r,Hs}var zs={},Om;function B1(){if(Om)return zs;Om=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.takeUntil=void 0;var e=J(),t=ne(),r=le(),n=ot();function i(o){return e.operate(function(a,u){r.innerFrom(o).subscribe(t.createOperatorSubscriber(u,function(){return u.complete()},n.noop)),!u.closed&&a.subscribe(u)})}return zs.takeUntil=i,zs}var Ks={},Em;function q1(){if(Em)return Ks;Em=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.takeWhile=void 0;var e=J(),t=ne();function r(n,i){return i===void 0&&(i=!1),e.operate(function(o,a){var u=0;o.subscribe(t.createOperatorSubscriber(a,function(s){var l=n(s,u++);(l||i)&&a.next(s),!l&&a.complete()}))})}return Ks.takeWhile=r,Ks}var Gs={},Sm;function x1(){if(Sm)return Gs;Sm=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.tap=void 0;var e=ge(),t=J(),r=ne(),n=at();function i(o,a,u){var s=e.isFunction(o)||a||u?{next:o,error:a,complete:u}:o;return s?t.operate(function(l,d){var c;(c=s.subscribe)===null||c===void 0||c.call(s);var p=!0;l.subscribe(r.createOperatorSubscriber(d,function(b){var m;(m=s.next)===null||m===void 0||m.call(s,b),d.next(b)},function(){var b;p=!1,(b=s.complete)===null||b===void 0||b.call(s),d.complete()},function(b){var m;p=!1,(m=s.error)===null||m===void 0||m.call(s,b),d.error(b)},function(){var b,m;p&&((b=s.unsubscribe)===null||b===void 0||b.call(s)),(m=s.finalize)===null||m===void 0||m.call(s)}))}):n.identity}return Gs.tap=i,Gs}var Ys={},Pm;function Hh(){if(Pm)return Ys;Pm=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.throttle=void 0;var e=J(),t=ne(),r=le();function n(i,o){return e.operate(function(a,u){var s=o??{},l=s.leading,d=l===void 0?!0:l,c=s.trailing,p=c===void 0?!1:c,b=!1,m=null,_=null,f=!1,y=function(){_?.unsubscribe(),_=null,p&&(v(),f&&u.complete())},g=function(){_=null,f&&u.complete()},h=function(w){return _=r.innerFrom(i(w)).subscribe(t.createOperatorSubscriber(u,y,g))},v=function(){if(b){b=!1;var w=m;m=null,u.next(w),!f&&h(w)}};a.subscribe(t.createOperatorSubscriber(u,function(w){b=!0,m=w,!(_&&!_.closed)&&(d?v():h(w))},function(){f=!0,!(p&&b&&_&&!_.closed)&&u.complete()}))})}return Ys.throttle=n,Ys}var Zs={},Tm;function F1(){if(Tm)return Zs;Tm=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.throttleTime=void 0;var e=Rt(),t=Hh(),r=mo();function n(i,o,a){o===void 0&&(o=e.asyncScheduler);var u=r.timer(i,o);return t.throttle(function(){return u},a)}return Zs.throttleTime=n,Zs}var to={},Cm;function V1(){if(Cm)return to;Cm=1,Object.defineProperty(to,"__esModule",{value:!0}),to.TimeInterval=to.timeInterval=void 0;var e=Rt(),t=J(),r=ne();function n(o){return o===void 0&&(o=e.asyncScheduler),t.operate(function(a,u){var s=o.now();a.subscribe(r.createOperatorSubscriber(u,function(l){var d=o.now(),c=d-s;s=d,u.next(new i(l,c))}))})}to.timeInterval=n;var i=(function(){function o(a,u){this.value=a,this.interval=u}return o})();return to.TimeInterval=i,to}var Xs={},Rm;function $1(){if(Rm)return Xs;Rm=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.timeoutWith=void 0;var e=Rt(),t=Th(),r=wl();function n(i,o,a){var u,s,l;if(a=a??e.async,t.isValidDate(i)?u=i:typeof i=="number"&&(s=i),o)l=function(){return o};else throw new TypeError("No observable provided to switch to");if(u==null&&s==null)throw new TypeError("No timeout provided.");return r.timeout({first:u,each:s,scheduler:a,with:l})}return Xs.timeoutWith=n,Xs}var Qs={},Am;function W1(){if(Am)return Qs;Am=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.timestamp=void 0;var e=mh(),t=di();function r(n){return n===void 0&&(n=e.dateTimestampProvider),t.map(function(i){return{value:i,timestamp:n.now()}})}return Qs.timestamp=r,Qs}var Js={},Im;function H1(){if(Im)return Js;Im=1,Object.defineProperty(Js,"__esModule",{value:!0}),Js.window=void 0;var e=ut(),t=J(),r=ne(),n=ot(),i=le();function o(a){return t.operate(function(u,s){var l=new e.Subject;s.next(l.asObservable());var d=function(c){l.error(c),s.error(c)};return u.subscribe(r.createOperatorSubscriber(s,function(c){return l?.next(c)},function(){l.complete(),s.complete()},d)),i.innerFrom(a).subscribe(r.createOperatorSubscriber(s,function(){l.complete(),s.next(l=new e.Subject)},n.noop,d)),function(){l?.unsubscribe(),l=null}})}return Js.window=o,Js}var ro={},jm;function z1(){if(jm)return ro;jm=1;var e=ro&&ro.__values||function(o){var a=typeof Symbol=="function"&&Symbol.iterator,u=a&&o[a],s=0;if(u)return u.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&s>=o.length&&(o=void 0),{value:o&&o[s++],done:!o}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ro,"__esModule",{value:!0}),ro.windowCount=void 0;var t=ut(),r=J(),n=ne();function i(o,a){a===void 0&&(a=0);var u=a>0?a:o;return r.operate(function(s,l){var d=[new t.Subject],c=0;l.next(d[0].asObservable()),s.subscribe(n.createOperatorSubscriber(l,function(p){var b,m;try{for(var _=e(d),f=_.next();!f.done;f=_.next()){var y=f.value;y.next(p)}}catch(v){b={error:v}}finally{try{f&&!f.done&&(m=_.return)&&m.call(_)}finally{if(b)throw b.error}}var g=c-o+1;if(g>=0&&g%u===0&&d.shift().complete(),++c%u===0){var h=new t.Subject;d.push(h),l.next(h.asObservable())}},function(){for(;d.length>0;)d.shift().complete();l.complete()},function(p){for(;d.length>0;)d.shift().error(p);l.error(p)},function(){d=null}))})}return ro.windowCount=i,ro}var ec={},Nm;function K1(){if(Nm)return ec;Nm=1,Object.defineProperty(ec,"__esModule",{value:!0}),ec.windowTime=void 0;var e=ut(),t=Rt(),r=Ut(),n=J(),i=ne(),o=ci(),a=At(),u=li();function s(l){for(var d,c,p=[],b=1;b<arguments.length;b++)p[b-1]=arguments[b];var m=(d=a.popScheduler(p))!==null&&d!==void 0?d:t.asyncScheduler,_=(c=p[0])!==null&&c!==void 0?c:null,f=p[1]||1/0;return n.operate(function(y,g){var h=[],v=!1,w=function(P){var I=P.window,C=P.subs;I.complete(),C.unsubscribe(),o.arrRemove(h,P),v&&E()},E=function(){if(h){var P=new r.Subscription;g.add(P);var I=new e.Subject,C={window:I,subs:P,seen:0};h.push(C),g.next(I.asObservable()),u.executeSchedule(P,m,function(){return w(C)},l)}};_!==null&&_>=0?u.executeSchedule(g,m,E,_,!0):v=!0,E();var O=function(P){return h.slice().forEach(P)},S=function(P){O(function(I){var C=I.window;return P(C)}),P(g),g.unsubscribe()};return y.subscribe(i.createOperatorSubscriber(g,function(P){O(function(I){I.window.next(P),f<=++I.seen&&w(I)})},function(){return S(function(P){return P.complete()})},function(P){return S(function(I){return I.error(P)})})),function(){h=null}})}return ec.windowTime=s,ec}var no={},km;function G1(){if(km)return no;km=1;var e=no&&no.__values||function(l){var d=typeof Symbol=="function"&&Symbol.iterator,c=d&&l[d],p=0;if(c)return c.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&p>=l.length&&(l=void 0),{value:l&&l[p++],done:!l}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(no,"__esModule",{value:!0}),no.windowToggle=void 0;var t=ut(),r=Ut(),n=J(),i=le(),o=ne(),a=ot(),u=ci();function s(l,d){return n.operate(function(c,p){var b=[],m=function(_){for(;0<b.length;)b.shift().error(_);p.error(_)};i.innerFrom(l).subscribe(o.createOperatorSubscriber(p,function(_){var f=new t.Subject;b.push(f);var y=new r.Subscription,g=function(){u.arrRemove(b,f),f.complete(),y.unsubscribe()},h;try{h=i.innerFrom(d(_))}catch(v){m(v);return}p.next(f.asObservable()),y.add(h.subscribe(o.createOperatorSubscriber(p,g,a.noop,m)))},a.noop)),c.subscribe(o.createOperatorSubscriber(p,function(_){var f,y,g=b.slice();try{for(var h=e(g),v=h.next();!v.done;v=h.next()){var w=v.value;w.next(_)}}catch(E){f={error:E}}finally{try{v&&!v.done&&(y=h.return)&&y.call(h)}finally{if(f)throw f.error}}},function(){for(;0<b.length;)b.shift().complete();p.complete()},m,function(){for(;0<b.length;)b.shift().unsubscribe()}))})}return no.windowToggle=s,no}var tc={},Mm;function Y1(){if(Mm)return tc;Mm=1,Object.defineProperty(tc,"__esModule",{value:!0}),tc.windowWhen=void 0;var e=ut(),t=J(),r=ne(),n=le();function i(o){return t.operate(function(a,u){var s,l,d=function(p){s.error(p),u.error(p)},c=function(){l?.unsubscribe(),s?.complete(),s=new e.Subject,u.next(s.asObservable());var p;try{p=n.innerFrom(o())}catch(b){d(b);return}p.subscribe(l=r.createOperatorSubscriber(u,c,c,d))};c(),a.subscribe(r.createOperatorSubscriber(u,function(p){return s.next(p)},function(){s.complete(),u.complete()},d,function(){l?.unsubscribe(),s=null}))})}return tc.windowWhen=i,tc}var Qr={},Dm;function Z1(){if(Dm)return Qr;Dm=1;var e=Qr&&Qr.__read||function(l,d){var c=typeof Symbol=="function"&&l[Symbol.iterator];if(!c)return l;var p=c.call(l),b,m=[],_;try{for(;(d===void 0||d-- >0)&&!(b=p.next()).done;)m.push(b.value)}catch(f){_={error:f}}finally{try{b&&!b.done&&(c=p.return)&&c.call(p)}finally{if(_)throw _.error}}return m},t=Qr&&Qr.__spreadArray||function(l,d){for(var c=0,p=d.length,b=l.length;c<p;c++,b++)l[b]=d[c];return l};Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.withLatestFrom=void 0;var r=J(),n=ne(),i=le(),o=at(),a=ot(),u=At();function s(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];var c=u.popResultSelector(l);return r.operate(function(p,b){for(var m=l.length,_=new Array(m),f=l.map(function(){return!1}),y=!1,g=function(v){i.innerFrom(l[v]).subscribe(n.createOperatorSubscriber(b,function(w){_[v]=w,!y&&!f[v]&&(f[v]=!0,(y=f.every(o.identity))&&(f=null))},a.noop))},h=0;h<m;h++)g(h);p.subscribe(n.createOperatorSubscriber(b,function(v){if(y){var w=t([v],e(_));b.next(c?c.apply(void 0,t([],e(w))):w)}}))})}return Qr.withLatestFrom=s,Qr}var rc={},Lm;function X1(){if(Lm)return rc;Lm=1,Object.defineProperty(rc,"__esModule",{value:!0}),rc.zipAll=void 0;var e=Ah(),t=DO();function r(n){return t.joinAllInternals(e.zip,n)}return rc.zipAll=r,rc}var Jr={},en={},Um;function Q1(){if(Um)return en;Um=1;var e=en&&en.__read||function(o,a){var u=typeof Symbol=="function"&&o[Symbol.iterator];if(!u)return o;var s=u.call(o),l,d=[],c;try{for(;(a===void 0||a-- >0)&&!(l=s.next()).done;)d.push(l.value)}catch(p){c={error:p}}finally{try{l&&!l.done&&(u=s.return)&&u.call(s)}finally{if(c)throw c.error}}return d},t=en&&en.__spreadArray||function(o,a){for(var u=0,s=a.length,l=o.length;u<s;u++,l++)o[l]=a[u];return o};Object.defineProperty(en,"__esModule",{value:!0}),en.zip=void 0;var r=Ah(),n=J();function i(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return n.operate(function(u,s){r.zip.apply(void 0,t([u],e(o))).subscribe(s)})}return en.zip=i,en}var Bm;function J1(){if(Bm)return Jr;Bm=1;var e=Jr&&Jr.__read||function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var u=a.call(i),s,l=[],d;try{for(;(o===void 0||o-- >0)&&!(s=u.next()).done;)l.push(s.value)}catch(c){d={error:c}}finally{try{s&&!s.done&&(a=u.return)&&a.call(u)}finally{if(d)throw d.error}}return l},t=Jr&&Jr.__spreadArray||function(i,o){for(var a=0,u=o.length,s=i.length;a<u;a++,s++)i[s]=o[a];return i};Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.zipWith=void 0;var r=Q1();function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return r.zip.apply(void 0,t([],e(i)))}return Jr.zipWith=n,Jr}var qm;function Xl(){return qm||(qm=1,(function(e){var t=Ei&&Ei.__createBinding||(Object.create?(function(wo,Oo,jr,yi){yi===void 0&&(yi=jr),Object.defineProperty(wo,yi,{enumerable:!0,get:function(){return Oo[jr]}})}):(function(wo,Oo,jr,yi){yi===void 0&&(yi=jr),wo[yi]=Oo[jr]})),r=Ei&&Ei.__exportStar||function(wo,Oo){for(var jr in wo)jr!=="default"&&!Object.prototype.hasOwnProperty.call(Oo,jr)&&t(Oo,wo,jr)};Object.defineProperty(e,"__esModule",{value:!0}),e.interval=e.iif=e.generate=e.fromEventPattern=e.fromEvent=e.from=e.forkJoin=e.empty=e.defer=e.connectable=e.concat=e.combineLatest=e.bindNodeCallback=e.bindCallback=e.UnsubscriptionError=e.TimeoutError=e.SequenceError=e.ObjectUnsubscribedError=e.NotFoundError=e.EmptyError=e.ArgumentOutOfRangeError=e.firstValueFrom=e.lastValueFrom=e.isObservable=e.identity=e.noop=e.pipe=e.NotificationKind=e.Notification=e.Subscriber=e.Subscription=e.Scheduler=e.VirtualAction=e.VirtualTimeScheduler=e.animationFrameScheduler=e.animationFrame=e.queueScheduler=e.queue=e.asyncScheduler=e.async=e.asapScheduler=e.asap=e.AsyncSubject=e.ReplaySubject=e.BehaviorSubject=e.Subject=e.animationFrames=e.observable=e.ConnectableObservable=e.Observable=void 0,e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.combineLatestWith=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=e.config=e.NEVER=e.EMPTY=e.scheduled=e.zip=e.using=e.timer=e.throwError=e.range=e.race=e.partition=e.pairs=e.onErrorResumeNext=e.of=e.never=e.merge=void 0,e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.pairwise=e.onErrorResumeNextWith=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=e.mergeAll=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=void 0,e.zipWith=e.zipAll=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=void 0;var n=Ee();Object.defineProperty(e,"Observable",{enumerable:!0,get:function(){return n.Observable}});var i=Wl();Object.defineProperty(e,"ConnectableObservable",{enumerable:!0,get:function(){return i.ConnectableObservable}});var o=Vl();Object.defineProperty(e,"observable",{enumerable:!0,get:function(){return o.observable}});var a=qC();Object.defineProperty(e,"animationFrames",{enumerable:!0,get:function(){return a.animationFrames}});var u=ut();Object.defineProperty(e,"Subject",{enumerable:!0,get:function(){return u.Subject}});var s=oO();Object.defineProperty(e,"BehaviorSubject",{enumerable:!0,get:function(){return s.BehaviorSubject}});var l=gh();Object.defineProperty(e,"ReplaySubject",{enumerable:!0,get:function(){return l.ReplaySubject}});var d=wh();Object.defineProperty(e,"AsyncSubject",{enumerable:!0,get:function(){return d.AsyncSubject}});var c=zC();Object.defineProperty(e,"asap",{enumerable:!0,get:function(){return c.asap}}),Object.defineProperty(e,"asapScheduler",{enumerable:!0,get:function(){return c.asapScheduler}});var p=Rt();Object.defineProperty(e,"async",{enumerable:!0,get:function(){return p.async}}),Object.defineProperty(e,"asyncScheduler",{enumerable:!0,get:function(){return p.asyncScheduler}});var b=YC();Object.defineProperty(e,"queue",{enumerable:!0,get:function(){return b.queue}}),Object.defineProperty(e,"queueScheduler",{enumerable:!0,get:function(){return b.queueScheduler}});var m=QC();Object.defineProperty(e,"animationFrame",{enumerable:!0,get:function(){return m.animationFrame}}),Object.defineProperty(e,"animationFrameScheduler",{enumerable:!0,get:function(){return m.animationFrameScheduler}});var _=JC();Object.defineProperty(e,"VirtualTimeScheduler",{enumerable:!0,get:function(){return _.VirtualTimeScheduler}}),Object.defineProperty(e,"VirtualAction",{enumerable:!0,get:function(){return _.VirtualAction}});var f=aO();Object.defineProperty(e,"Scheduler",{enumerable:!0,get:function(){return f.Scheduler}});var y=Ut();Object.defineProperty(e,"Subscription",{enumerable:!0,get:function(){return y.Subscription}});var g=Cc();Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return g.Subscriber}});var h=Ph();Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return h.Notification}}),Object.defineProperty(e,"NotificationKind",{enumerable:!0,get:function(){return h.NotificationKind}});var v=$l();Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return v.pipe}});var w=ot();Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return w.noop}});var E=at();Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return E.identity}});var O=iR();Object.defineProperty(e,"isObservable",{enumerable:!0,get:function(){return O.isObservable}});var S=oR();Object.defineProperty(e,"lastValueFrom",{enumerable:!0,get:function(){return S.lastValueFrom}});var P=aR();Object.defineProperty(e,"firstValueFrom",{enumerable:!0,get:function(){return P.firstValueFrom}});var I=bO();Object.defineProperty(e,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return I.ArgumentOutOfRangeError}});var C=bo();Object.defineProperty(e,"EmptyError",{enumerable:!0,get:function(){return C.EmptyError}});var R=yO();Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return R.NotFoundError}});var A=iO();Object.defineProperty(e,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return A.ObjectUnsubscribedError}});var D=mO();Object.defineProperty(e,"SequenceError",{enumerable:!0,get:function(){return D.SequenceError}});var j=wl();Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return j.TimeoutError}});var U=eO();Object.defineProperty(e,"UnsubscriptionError",{enumerable:!0,get:function(){return U.UnsubscriptionError}});var B=uR();Object.defineProperty(e,"bindCallback",{enumerable:!0,get:function(){return B.bindCallback}});var q=sR();Object.defineProperty(e,"bindNodeCallback",{enumerable:!0,get:function(){return q.bindNodeCallback}});var T=Ch();Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return T.combineLatest}});var k=Kl();Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return k.concat}});var M=cR();Object.defineProperty(e,"connectable",{enumerable:!0,get:function(){return M.connectable}});var V=Gl();Object.defineProperty(e,"defer",{enumerable:!0,get:function(){return V.defer}});var z=Ir();Object.defineProperty(e,"empty",{enumerable:!0,get:function(){return z.empty}});var F=lR();Object.defineProperty(e,"forkJoin",{enumerable:!0,get:function(){return F.forkJoin}});var W=fi();Object.defineProperty(e,"from",{enumerable:!0,get:function(){return W.from}});var Y=fR();Object.defineProperty(e,"fromEvent",{enumerable:!0,get:function(){return Y.fromEvent}});var K=dR();Object.defineProperty(e,"fromEventPattern",{enumerable:!0,get:function(){return K.fromEventPattern}});var N=hR();Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return N.generate}});var x=vR();Object.defineProperty(e,"iif",{enumerable:!0,get:function(){return x.iif}});var L=EO();Object.defineProperty(e,"interval",{enumerable:!0,get:function(){return L.interval}});var $=pR();Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return $.merge}});var H=Ib();Object.defineProperty(e,"never",{enumerable:!0,get:function(){return H.never}});var G=Sh();Object.defineProperty(e,"of",{enumerable:!0,get:function(){return G.of}});var Q=SO();Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return Q.onErrorResumeNext}});var te=_R();Object.defineProperty(e,"pairs",{enumerable:!0,get:function(){return te.pairs}});var re=bR();Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return re.partition}});var Z=TO();Object.defineProperty(e,"race",{enumerable:!0,get:function(){return Z.race}});var ee=yR();Object.defineProperty(e,"range",{enumerable:!0,get:function(){return ee.range}});var oe=_O();Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return oe.throwError}});var je=mo();Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return je.timer}});var Se=mR();Object.defineProperty(e,"using",{enumerable:!0,get:function(){return Se.using}});var ce=Ah();Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return ce.zip}});var xe=pO();Object.defineProperty(e,"scheduled",{enumerable:!0,get:function(){return xe.scheduled}});var De=Ir();Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return De.EMPTY}});var Pe=Ib();Object.defineProperty(e,"NEVER",{enumerable:!0,get:function(){return Pe.NEVER}}),r(gR(),e);var Le=Tc();Object.defineProperty(e,"config",{enumerable:!0,get:function(){return Le.config}});var Ve=Ih();Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return Ve.audit}});var sa=CO();Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return sa.auditTime}});var _f=RO();Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return _f.buffer}});var bf=AO();Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return bf.bufferCount}});var yf=IO();Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return yf.bufferTime}});var mf=jO();Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return mf.bufferToggle}});var gf=NO();Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return gf.bufferWhen}});var wf=kO();Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return wf.catchError}});var Of=LO();Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return Of.combineAll}});var Ef=Nh();Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return Ef.combineLatestAll}});var Sf=BO();Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return Sf.combineLatestWith}});var Pf=zl();Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return Pf.concatAll}});var Tf=kh();Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return Tf.concatMap}});var Cf=qO();Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return Cf.concatMapTo}});var Rf=FO();Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return Rf.concatWith}});var Af=Yl();Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return Af.connect}});var If=VO();Object.defineProperty(e,"count",{enumerable:!0,get:function(){return If.count}});var jf=$O();Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return jf.debounce}});var Nf=WO();Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return Nf.debounceTime}});var kf=kc();Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return kf.defaultIfEmpty}});var Mf=HO();Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return Mf.delay}});var Df=Lh();Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return Df.delayWhen}});var Lf=zO();Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return Lf.dematerialize}});var Uf=KO();Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return Uf.distinct}});var Bf=Uh();Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return Bf.distinctUntilChanged}});var qf=GO();Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return qf.distinctUntilKeyChanged}});var xf=YO();Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return xf.elementAt}});var Ff=ZO();Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return Ff.endWith}});var Vf=XO();Object.defineProperty(e,"every",{enumerable:!0,get:function(){return Vf.every}});var $f=QO();Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return $f.exhaust}});var Wf=qh();Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return Wf.exhaustAll}});var Hf=Bh();Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return Hf.exhaustMap}});var zf=JO();Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return zf.expand}});var Kf=hi();Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return Kf.filter}});var Gf=e1();Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return Gf.finalize}});var Yf=xh();Object.defineProperty(e,"find",{enumerable:!0,get:function(){return Yf.find}});var Zf=t1();Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return Zf.findIndex}});var Xf=r1();Object.defineProperty(e,"first",{enumerable:!0,get:function(){return Xf.first}});var Qf=n1();Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return Qf.groupBy}});var Jf=Mh();Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return Jf.ignoreElements}});var ed=i1();Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return ed.isEmpty}});var td=o1();Object.defineProperty(e,"last",{enumerable:!0,get:function(){return td.last}});var rd=di();Object.defineProperty(e,"map",{enumerable:!0,get:function(){return rd.map}});var nd=Dh();Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return nd.mapTo}});var id=a1();Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return id.materialize}});var od=u1();Object.defineProperty(e,"max",{enumerable:!0,get:function(){return od.max}});var ad=Nc();Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return ad.mergeAll}});var ud=s1();Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return ud.flatMap}});var sd=hn();Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return sd.mergeMap}});var cd=c1();Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return cd.mergeMapTo}});var ld=l1();Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return ld.mergeScan}});var eT=d1();Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return eT.mergeWith}});var tT=h1();Object.defineProperty(e,"min",{enumerable:!0,get:function(){return tT.min}});var rT=Zl();Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return rT.multicast}});var nT=Ic();Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return nT.observeOn}});var iT=v1();Object.defineProperty(e,"onErrorResumeNextWith",{enumerable:!0,get:function(){return iT.onErrorResumeNextWith}});var oT=p1();Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return oT.pairwise}});var aT=_1();Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return aT.pluck}});var uT=b1();Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return uT.publish}});var sT=y1();Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return sT.publishBehavior}});var cT=m1();Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return cT.publishLast}});var lT=g1();Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return lT.publishReplay}});var fT=Vh();Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return fT.raceWith}});var dT=oa();Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return dT.reduce}});var hT=w1();Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return hT.repeat}});var vT=O1();Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return vT.repeatWhen}});var pT=E1();Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return pT.retry}});var _T=S1();Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return _T.retryWhen}});var bT=yh();Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return bT.refCount}});var yT=$h();Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return yT.sample}});var mT=P1();Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return mT.sampleTime}});var gT=T1();Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return gT.scan}});var wT=C1();Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return wT.sequenceEqual}});var OT=Wh();Object.defineProperty(e,"share",{enumerable:!0,get:function(){return OT.share}});var ET=R1();Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return ET.shareReplay}});var ST=A1();Object.defineProperty(e,"single",{enumerable:!0,get:function(){return ST.single}});var PT=I1();Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return PT.skip}});var TT=j1();Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return TT.skipLast}});var CT=N1();Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return CT.skipUntil}});var RT=k1();Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return RT.skipWhile}});var AT=M1();Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return AT.startWith}});var IT=jc();Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return IT.subscribeOn}});var jT=D1();Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return jT.switchAll}});var NT=Lc();Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return NT.switchMap}});var kT=L1();Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return kT.switchMapTo}});var MT=U1();Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return MT.switchScan}});var DT=Mc();Object.defineProperty(e,"take",{enumerable:!0,get:function(){return DT.take}});var LT=Fh();Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return LT.takeLast}});var UT=B1();Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return UT.takeUntil}});var BT=q1();Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return BT.takeWhile}});var qT=x1();Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return qT.tap}});var xT=Hh();Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return xT.throttle}});var FT=F1();Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return FT.throttleTime}});var VT=Dc();Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return VT.throwIfEmpty}});var $T=V1();Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return $T.timeInterval}});var WT=wl();Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return WT.timeout}});var HT=$1();Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return HT.timeoutWith}});var zT=W1();Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return zT.timestamp}});var KT=jh();Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return KT.toArray}});var GT=H1();Object.defineProperty(e,"window",{enumerable:!0,get:function(){return GT.window}});var YT=z1();Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return YT.windowCount}});var ZT=K1();Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return ZT.windowTime}});var XT=G1();Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return XT.windowToggle}});var QT=Y1();Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return QT.windowWhen}});var JT=Z1();Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return JT.withLatestFrom}});var eC=X1();Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return eC.zipAll}});var tC=J1();Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return tC.zipWith}})})(Ei)),Ei}var Ed={},nc={},xm;function OR(){if(xm)return nc;xm=1,Object.defineProperty(nc,"__esModule",{value:!0}),nc.partition=void 0;var e=PO(),t=hi();function r(n,i){return function(o){return[t.filter(n,i)(o),t.filter(e.not(n,i))(o)]}}return nc.partition=r,nc}var tn={},Fm;function ER(){if(Fm)return tn;Fm=1;var e=tn&&tn.__read||function(o,a){var u=typeof Symbol=="function"&&o[Symbol.iterator];if(!u)return o;var s=u.call(o),l,d=[],c;try{for(;(a===void 0||a-- >0)&&!(l=s.next()).done;)d.push(l.value)}catch(p){c={error:p}}finally{try{l&&!l.done&&(u=s.return)&&u.call(s)}finally{if(c)throw c.error}}return d},t=tn&&tn.__spreadArray||function(o,a){for(var u=0,s=a.length,l=o.length;u<s;u++,l++)o[l]=a[u];return o};Object.defineProperty(tn,"__esModule",{value:!0}),tn.race=void 0;var r=ia(),n=Vh();function i(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return n.raceWith.apply(void 0,t([],e(r.argsOrArgArray(o))))}return tn.race=i,tn}var Vm;function zh(){return Vm||(Vm=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=e.merge=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.concat=e.combineLatestWith=e.combineLatest=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=void 0,e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.race=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.partition=e.pairwise=e.onErrorResumeNext=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=void 0,e.zipWith=e.zipAll=e.zip=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=void 0;var t=Ih();Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return t.audit}});var r=CO();Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return r.auditTime}});var n=RO();Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return n.buffer}});var i=AO();Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return i.bufferCount}});var o=IO();Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return o.bufferTime}});var a=jO();Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return a.bufferToggle}});var u=NO();Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return u.bufferWhen}});var s=kO();Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return s.catchError}});var l=LO();Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return l.combineAll}});var d=Nh();Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return d.combineLatestAll}});var c=UO();Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return c.combineLatest}});var p=BO();Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return p.combineLatestWith}});var b=xO();Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return b.concat}});var m=zl();Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return m.concatAll}});var _=kh();Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return _.concatMap}});var f=qO();Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return f.concatMapTo}});var y=FO();Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return y.concatWith}});var g=Yl();Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return g.connect}});var h=VO();Object.defineProperty(e,"count",{enumerable:!0,get:function(){return h.count}});var v=$O();Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return v.debounce}});var w=WO();Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return w.debounceTime}});var E=kc();Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return E.defaultIfEmpty}});var O=HO();Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return O.delay}});var S=Lh();Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return S.delayWhen}});var P=zO();Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return P.dematerialize}});var I=KO();Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return I.distinct}});var C=Uh();Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return C.distinctUntilChanged}});var R=GO();Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return R.distinctUntilKeyChanged}});var A=YO();Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return A.elementAt}});var D=ZO();Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return D.endWith}});var j=XO();Object.defineProperty(e,"every",{enumerable:!0,get:function(){return j.every}});var U=QO();Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return U.exhaust}});var B=qh();Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return B.exhaustAll}});var q=Bh();Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return q.exhaustMap}});var T=JO();Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return T.expand}});var k=hi();Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return k.filter}});var M=e1();Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return M.finalize}});var V=xh();Object.defineProperty(e,"find",{enumerable:!0,get:function(){return V.find}});var z=t1();Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return z.findIndex}});var F=r1();Object.defineProperty(e,"first",{enumerable:!0,get:function(){return F.first}});var W=n1();Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return W.groupBy}});var Y=Mh();Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return Y.ignoreElements}});var K=i1();Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return K.isEmpty}});var N=o1();Object.defineProperty(e,"last",{enumerable:!0,get:function(){return N.last}});var x=di();Object.defineProperty(e,"map",{enumerable:!0,get:function(){return x.map}});var L=Dh();Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return L.mapTo}});var $=a1();Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return $.materialize}});var H=u1();Object.defineProperty(e,"max",{enumerable:!0,get:function(){return H.max}});var G=f1();Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return G.merge}});var Q=Nc();Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return Q.mergeAll}});var te=s1();Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return te.flatMap}});var re=hn();Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return re.mergeMap}});var Z=c1();Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return Z.mergeMapTo}});var ee=l1();Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return ee.mergeScan}});var oe=d1();Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return oe.mergeWith}});var je=h1();Object.defineProperty(e,"min",{enumerable:!0,get:function(){return je.min}});var Se=Zl();Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return Se.multicast}});var ce=Ic();Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return ce.observeOn}});var xe=v1();Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return xe.onErrorResumeNext}});var De=p1();Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return De.pairwise}});var Pe=OR();Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return Pe.partition}});var Le=_1();Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return Le.pluck}});var Ve=b1();Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return Ve.publish}});var sa=y1();Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return sa.publishBehavior}});var _f=m1();Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return _f.publishLast}});var bf=g1();Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return bf.publishReplay}});var yf=ER();Object.defineProperty(e,"race",{enumerable:!0,get:function(){return yf.race}});var mf=Vh();Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return mf.raceWith}});var gf=oa();Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return gf.reduce}});var wf=w1();Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return wf.repeat}});var Of=O1();Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return Of.repeatWhen}});var Ef=E1();Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return Ef.retry}});var Sf=S1();Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return Sf.retryWhen}});var Pf=yh();Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return Pf.refCount}});var Tf=$h();Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return Tf.sample}});var Cf=P1();Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return Cf.sampleTime}});var Rf=T1();Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return Rf.scan}});var Af=C1();Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return Af.sequenceEqual}});var If=Wh();Object.defineProperty(e,"share",{enumerable:!0,get:function(){return If.share}});var jf=R1();Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return jf.shareReplay}});var Nf=A1();Object.defineProperty(e,"single",{enumerable:!0,get:function(){return Nf.single}});var kf=I1();Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return kf.skip}});var Mf=j1();Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return Mf.skipLast}});var Df=N1();Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return Df.skipUntil}});var Lf=k1();Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return Lf.skipWhile}});var Uf=M1();Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return Uf.startWith}});var Bf=jc();Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return Bf.subscribeOn}});var qf=D1();Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return qf.switchAll}});var xf=Lc();Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return xf.switchMap}});var Ff=L1();Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return Ff.switchMapTo}});var Vf=U1();Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return Vf.switchScan}});var $f=Mc();Object.defineProperty(e,"take",{enumerable:!0,get:function(){return $f.take}});var Wf=Fh();Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return Wf.takeLast}});var Hf=B1();Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return Hf.takeUntil}});var zf=q1();Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return zf.takeWhile}});var Kf=x1();Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return Kf.tap}});var Gf=Hh();Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return Gf.throttle}});var Yf=F1();Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return Yf.throttleTime}});var Zf=Dc();Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return Zf.throwIfEmpty}});var Xf=V1();Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return Xf.timeInterval}});var Qf=wl();Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return Qf.timeout}});var Jf=$1();Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return Jf.timeoutWith}});var ed=W1();Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return ed.timestamp}});var td=jh();Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return td.toArray}});var rd=H1();Object.defineProperty(e,"window",{enumerable:!0,get:function(){return rd.window}});var nd=z1();Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return nd.windowCount}});var id=K1();Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return id.windowTime}});var od=G1();Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return od.windowToggle}});var ad=Y1();Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return ad.windowWhen}});var ud=Z1();Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return ud.withLatestFrom}});var sd=Q1();Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return sd.zip}});var cd=X1();Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return cd.zipAll}});var ld=J1();Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return ld.zipWith}})})(Ed)),Ed}var bn={},$m;function Ql(){if($m)return bn;$m=1;var e=bn&&bn.__awaiter||function(l,d,c,p){function b(m){return m instanceof c?m:new c(function(_){_(m)})}return new(c||(c=Promise))(function(m,_){function f(h){try{g(p.next(h))}catch(v){_(v)}}function y(h){try{g(p.throw(h))}catch(v){_(v)}}function g(h){h.done?m(h.value):b(h.value).then(f,y)}g((p=p.apply(l,d||[])).next())})},t=bn&&bn.__generator||function(l,d){var c={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},p,b,m,_;return _={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function f(g){return function(h){return y([g,h])}}function y(g){if(p)throw new TypeError("Generator is already executing.");for(;_&&(_=0,g[0]&&(c=0)),c;)try{if(p=1,b&&(m=g[0]&2?b.return:g[0]?b.throw||((m=b.return)&&m.call(b),0):b.next)&&!(m=m.call(b,g[1])).done)return m;switch(b=0,m&&(g=[g[0]&2,m.value]),g[0]){case 0:case 1:m=g;break;case 4:return c.label++,{value:g[1],done:!1};case 5:c.label++,b=g[1],g=[0];continue;case 7:g=c.ops.pop(),c.trys.pop();continue;default:if(m=c.trys,!(m=m.length>0&&m[m.length-1])&&(g[0]===6||g[0]===2)){c=0;continue}if(g[0]===3&&(!m||g[1]>m[0]&&g[1]<m[3])){c.label=g[1];break}if(g[0]===6&&c.label<m[1]){c.label=m[1],m=g;break}if(m&&c.label<m[2]){c.label=m[2],c.ops.push(g);break}m[2]&&c.ops.pop(),c.trys.pop();continue}g=d.call(l,c)}catch(h){g=[6,h],b=0}finally{p=m=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}};Object.defineProperty(bn,"__esModule",{value:!0});var r=ae(),n=Xl(),i=zh(),o={READY:0,STREAMING:1,COMPLETED:2},a=(function(){function l(d,c){var p=d.pipe((0,i.publishReplay)(1),(0,i.refCount)());this._result=p,this._keys=p.pipe((0,i.mergeMap)(function(b){return(0,n.from)(b.keys())}),(0,i.publishReplay)(1),(0,i.refCount)()),this._records=void 0,this._controls=new s,this._summary=new n.ReplaySubject,this._state=c||o.READY}return l.prototype.keys=function(){return this._keys},l.prototype.records=function(){var d=this,c=this._result.pipe((0,i.mergeMap)(function(p){return new n.Observable(function(b){return d._startStreaming({result:p,recordsObserver:b})})}));return c.push=function(){return d._push()},c},l.prototype.consume=function(){var d=this;return this._result.pipe((0,i.mergeMap)(function(c){return new n.Observable(function(p){return d._startStreaming({result:c,summaryObserver:p})})}))},l.prototype.pause=function(){this._controls.pause()},l.prototype.resume=function(){return this._controls.resume()},l.prototype.push=function(){return this._controls.push()},l.prototype._startStreaming=function(d){var c=d===void 0?{}:d,p=c.result,b=c.recordsObserver,m=b===void 0?null:b,_=c.summaryObserver,f=_===void 0?null:_,y=[];return f&&y.push(this._summary.subscribe(f)),this._state<o.STREAMING?(this._state=o.STREAMING,this._setupRecordsStream(p),m?y.push(this._records.subscribe(m)):p._cancel(),y.push({unsubscribe:function(){p._cancel&&p._cancel()}})):m&&m.error((0,r.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){y.forEach(function(g){return g.unsubscribe()})}},l.prototype._toObservable=function(){var d=this;function c(p){return new n.Observable(function(b){b.next(p),b.complete()})}return new n.Observable(function(p){d._result.subscribe({complete:function(){return p.complete()},next:function(b){return p.next(new l(c(b)),d._state)},error:function(b){return p.error(b)}})})},l.prototype._setupRecordsStream=function(d){var c=this;return this._records?this._records:(this._records=u(d[Symbol.asyncIterator](),{complete:function(){return e(c,void 0,void 0,function(){var p,b;return t(this,function(m){switch(m.label){case 0:return this._state=o.COMPLETED,b=(p=this._summary).next,[4,d.summary()];case 1:return b.apply(p,[m.sent()]),this._summary.complete(),[2]}})})},error:function(p){c._state=o.COMPLETED,c._summary.error(p)}},this._controls),this._records)},l})();bn.default=a;function u(l,d,c){var p=this;c===void 0&&(c=new s);var b=new n.Subject,m=function(f){return e(p,void 0,void 0,function(){var y,g,h,v;return t(this,function(w){switch(w.label){case 0:return w.trys.push([0,2,3,4]),c.pushing=!0,[4,f];case 1:return y=w.sent(),g=y.done,h=y.value,g?(b.complete(),d.complete()):(b.next(h),c.paused||m(l.next()).catch(function(){})),[3,4];case 2:return v=w.sent(),b.error(v),d.error(v),[3,4];case 3:return c.pushing=!1,[7];case 4:return[2]}})})};function _(f){return e(this,void 0,void 0,function(){return t(this,function(y){switch(y.label){case 0:return[4,m(l.next(f))];case 1:return y.sent(),[2]}})})}return c.pusher=_,_(),b}var s=(function(){function l(d){d===void 0&&(d=function(){return e(c,void 0,void 0,function(){return t(this,function(p){return[2]})})});var c=this;this._paused=!1,this._pushing=!1,this._push=d}return l.prototype.pause=function(){this._paused=!0},Object.defineProperty(l.prototype,"paused",{get:function(){return this._paused},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"pushing",{get:function(){return this._pushing},set:function(d){this._pushing=d},enumerable:!1,configurable:!0}),l.prototype.resume=function(){return e(this,void 0,void 0,function(){var d;return t(this,function(c){switch(c.label){case 0:return d=this._paused,this._paused=!1,d&&!this._pushing?[4,this._push()]:[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})},l.prototype.push=function(){return e(this,void 0,void 0,function(){return t(this,function(d){switch(d.label){case 0:return this.pause(),[4,this._push()];case 1:return[2,d.sent()]}})})},Object.defineProperty(l.prototype,"pusher",{get:function(){return this._push},set:function(d){this._push=d},enumerable:!1,configurable:!0}),l})();return bn}var Po={},Wm;function Kh(){if(Wm)return Po;Wm=1;var e=Po&&Po.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Po,"__esModule",{value:!0});var t=Xl(),r=e(Ql());e(ae());var n=(function(){function i(o){this._txc=o}return i.prototype.run=function(o,a){var u=this;return new r.default(new t.Observable(function(s){try{s.next(u._txc.run(o,a)),s.complete()}catch(l){s.error(l)}return function(){}}))},i.prototype.commit=function(){var o=this;return new t.Observable(function(a){o._txc.commit().then(function(){a.complete()}).catch(function(u){return a.error(u)})})},i.prototype.rollback=function(){var o=this;return new t.Observable(function(a){o._txc.rollback().then(function(){a.complete()}).catch(function(u){return a.error(u)})})},i.prototype.isOpen=function(){return this._txc.isOpen()},i.prototype.close=function(){var o=this;return new t.Observable(function(a){o._txc.close().then(function(){a.complete()}).catch(function(u){return a.error(u)})})},i})();return Po.default=n,Po}var To={},Hm;function eE(){if(Hm)return To;Hm=1;var e=To&&To.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(To,"__esModule",{value:!0}),e(Ql()),e(Kh());var t=(function(){function r(n){var i=n.run;this._run=i}return r.fromTransaction=function(n){return new r({run:n.run.bind(n)})},r.prototype.run=function(n,i){return this._run(n,i)},r})();return To.default=t,To}var Zc={},zm;function SR(){if(zm)return Zc;zm=1,Object.defineProperty(Zc,"__esModule",{value:!0});var e=ae(),t=Xl(),r=zh();e.internal.logger.Logger;var n=e.error.SERVICE_UNAVAILABLE,i=30*1e3,o=1e3,a=2,u=.2,s=(function(){function d(c){var p=c===void 0?{}:c,b=p.maxRetryTimeout,m=b===void 0?i:b,_=p.initialDelay,f=_===void 0?o:_,y=p.delayMultiplier,g=y===void 0?a:y,h=p.delayJitter,v=h===void 0?u:h,w=p.logger,E=w===void 0?null:w;this._maxRetryTimeout=l(m,i),this._initialDelay=l(f,o),this._delayMultiplier=l(g,a),this._delayJitter=l(v,u),this._logger=E}return d.prototype.retry=function(c){var p=this;return c.pipe((0,r.retryWhen)(function(b){var m=[],_=Date.now(),f=1,y=p._initialDelay;return b.pipe((0,r.mergeMap)(function(g){if(!(0,e.isRetriableError)(g))return(0,t.throwError)(function(){return g});if(m.push(g),f>=2&&Date.now()-_>=p._maxRetryTimeout){var h=(0,e.newError)("Failed after retried for ".concat(f," times in ").concat(p._maxRetryTimeout," ms. Make sure that your database is online and retry again."),n);return h.seenErrors=m,(0,t.throwError)(function(){return h})}var v=p._computeNextDelay(y);return y=y*p._delayMultiplier,f++,p._logger&&p._logger.warn("Transaction failed and will be retried in ".concat(v)),(0,t.of)(1).pipe((0,r.delay)(v))}))}))},d.prototype._computeNextDelay=function(c){var p=c*this._delayJitter;return c-p+2*p*Math.random()},d})();Zc.default=s;function l(d,c){return d||d===0?d:c}return Zc}var Km;function tE(){if(Km)return So;Km=1;var e=So&&So.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(So,"__esModule",{value:!0});var t=Xl(),r=zh(),n=e(Ql()),i=ae(),o=e(Kh()),a=e(eE()),u=e(SR()),s=i.internal.constants,l=s.ACCESS_MODE_READ,d=s.ACCESS_MODE_WRITE,c=s.TELEMETRY_APIS,p=i.internal.txConfig.TxConfig,b=(function(){function _(f){var y=f===void 0?{}:f,g=y.session,h=y.config,v=y.log;this._session=g,this._retryLogic=m(h),this._log=v}return _.prototype.run=function(f,y,g){var h=this;return new n.default(new t.Observable(function(v){try{v.next(h._session.run(f,y,g)),v.complete()}catch(w){v.error(w)}return function(){}}))},_.prototype.beginTransaction=function(f){return this._beginTransaction(this._session._mode,f,{api:c.UNMANAGED_TRANSACTION})},_.prototype.readTransaction=function(f,y){return this._runTransaction(l,f,y)},_.prototype.writeTransaction=function(f,y){return this._runTransaction(d,f,y)},_.prototype.executeRead=function(f,y){return this._executeInTransaction(l,f,y)},_.prototype.executeWrite=function(f,y){return this._executeInTransaction(d,f,y)},_.prototype._executeInTransaction=function(f,y,g){var h=function(v){return new a.default({run:v.run.bind(v)})};return this._runTransaction(f,y,g,h)},_.prototype.close=function(){var f=this;return new t.Observable(function(y){f._session.close().then(function(){y.complete()}).catch(function(g){return y.error(g)})})},_.prototype[Symbol.asyncDispose]=function(){return this.close()},_.prototype.lastBookmark=function(){return this.lastBookmarks()},_.prototype.lastBookmarks=function(){return this._session.lastBookmarks()},_.prototype._beginTransaction=function(f,y,g){var h=this,v=p.empty();return y&&(v=new p(y,this._log)),new t.Observable(function(w){try{h._session._beginTransaction(f,v,g).then(function(E){w.next(new o.default(E)),w.complete()}).catch(function(E){return w.error(E)})}catch(E){w.error(E)}return function(){}})},_.prototype._runTransaction=function(f,y,g,h){var v=this;h===void 0&&(h=function(O){return O});var w=p.empty();g&&(w=new p(g));var E={apiTelemetryConfig:{api:c.MANAGED_TRANSACTION,onTelemetrySuccess:function(){E.apiTelemetryConfig=void 0}}};return this._retryLogic.retry((0,t.of)(1).pipe((0,r.mergeMap)(function(){return v._beginTransaction(f,w,E.apiTelemetryConfig)}),(0,r.mergeMap)(function(O){return(0,t.defer)(function(){try{return y(h(O))}catch(S){return(0,t.throwError)(function(){return S})}}).pipe((0,r.catchError)(function(S){return O.rollback().pipe((0,r.concatWith)((0,t.throwError)(function(){return S})))}),(0,r.concatWith)(O.commit()))})))},_})();So.default=b;function m(_){var f=_&&_.maxTransactionRetryTime?_.maxTransactionRetryTime:null;return new u.default({maxRetryTimeout:f})}return So}var Gm;function PR(){if(Gm)return _t;Gm=1;var e=_t&&_t.__extends||(function(){var l=function(d,c){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,b){p.__proto__=b}||function(p,b){for(var m in b)Object.prototype.hasOwnProperty.call(b,m)&&(p[m]=b[m])},l(d,c)};return function(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");l(d,c);function p(){this.constructor=d}d.prototype=c===null?Object.create(c):(p.prototype=c.prototype,new p)}})(),t=_t&&_t.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(_t,"__esModule",{value:!0}),_t.WRITE=_t.READ=_t.Driver=void 0;var r=ae(),n=t(tE()),i=r.internal.constants.FETCH_ALL,o=r.driver.READ,a=r.driver.WRITE;_t.READ=o,_t.WRITE=a;var u=(function(l){e(d,l);function d(){return l!==null&&l.apply(this,arguments)||this}return d.prototype.rxSession=function(c){var p=c===void 0?{}:c,b=p.defaultAccessMode,m=b===void 0?a:b,_=p.bookmarks,f=p.database,y=f===void 0?"":f,g=p.fetchSize,h=p.impersonatedUser,v=p.bookmarkManager,w=p.notificationFilter,E=p.auth;return new n.default({session:this._newSession({defaultAccessMode:m,bookmarkOrBookmarks:_,database:y,impersonatedUser:h,auth:E,reactive:!1,fetchSize:s(g,this._config.fetchSize),bookmarkManager:v,notificationFilter:w,log:this._log}),config:this._config,log:this._log})},d})(r.Driver);_t.Driver=u;function s(l,d){var c=parseInt(l,10);if(c>0||c===i)return c;if(c===0||c<0)throw new Error("The fetch size can only be a positive value or ".concat(i," for ALL. However fetchSize = ").concat(c));return d}return _t.default=u,_t}var Xc={},Ym;function TR(){return Ym||(Ym=1,Object.defineProperty(Xc,"__esModule",{value:!0}),Xc.default="5.28.2"),Xc}var Ht={},ur={},Qc={},Zm;function rE(){if(Zm)return Qc;Zm=1,Object.defineProperty(Qc,"__esModule",{value:!0});var e=(function(){function t(){}return t.prototype.selectReader=function(r){throw new Error("Abstract function")},t.prototype.selectWriter=function(r){throw new Error("Abstract function")},t})();return Qc.default=e,Qc}var yn={},Jc={},Xm;function CR(){if(Xm)return Jc;Xm=1,Object.defineProperty(Jc,"__esModule",{value:!0});var e=(function(){function t(r){this._offset=r||0}return t.prototype.next=function(r){if(r===0)return-1;var n=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),n%r},t})();return Jc.default=e,Jc}var Qm;function RR(){if(Qm)return yn;Qm=1;var e=yn&&yn.__extends||(function(){var o=function(a,u){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(s[d]=l[d])},o(a,u)};return function(a,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");o(a,u);function s(){this.constructor=a}a.prototype=u===null?Object.create(u):(s.prototype=u.prototype,new s)}})(),t=yn&&yn.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(yn,"__esModule",{value:!0});var r=t(CR()),n=t(rE()),i=(function(o){e(a,o);function a(u){var s=o.call(this)||this;return s._readersIndex=new r.default,s._writersIndex=new r.default,s._connectionPool=u,s}return a.prototype.selectReader=function(u){return this._select(u,this._readersIndex)},a.prototype.selectWriter=function(u){return this._select(u,this._writersIndex)},a.prototype._select=function(u,s){var l=u.length;if(l===0)return null;var d=s.next(l),c=d,p=null,b=Number.MAX_SAFE_INTEGER;do{var m=u[c],_=this._connectionPool.activeResourceCount(m);_<b&&(p=m,b=_),c===l-1?c=0:c++}while(c!==d);return p},a})(n.default);return yn.default=i,yn}var Jm;function nE(){if(Jm)return ur;Jm=1;var e=ur&&ur.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ur,"__esModule",{value:!0}),ur.LeastConnectedLoadBalancingStrategy=ur.LoadBalancingStrategy=void 0;var t=e(rE());ur.LoadBalancingStrategy=t.default;var r=e(RR());return ur.LeastConnectedLoadBalancingStrategy=r.default,ur.default=r.default,ur}var rn={},el={},nn={},zt={},Co={},sr={},mn={},Ro={},eg;function iE(){if(eg)return Ro;eg=1;var e=Ro&&Ro.__extends||(function(){var n=function(i,o){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(a[s]=u[s])},n(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");n(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}})();Object.defineProperty(Ro,"__esModule",{value:!0});var t=(function(){function n(i){this.position=0,this.length=i}return n.prototype.getUInt8=function(i){throw new Error("Not implemented")},n.prototype.getInt8=function(i){throw new Error("Not implemented")},n.prototype.getFloat64=function(i){throw new Error("Not implemented")},n.prototype.getVarInt=function(i){throw new Error("Not implemented")},n.prototype.putUInt8=function(i,o){throw new Error("Not implemented")},n.prototype.putInt8=function(i,o){throw new Error("Not implemented")},n.prototype.putFloat64=function(i,o){throw new Error("Not implemented")},n.prototype.getInt16=function(i){return this.getInt8(i)<<8|this.getUInt8(i+1)},n.prototype.getUInt16=function(i){return this.getUInt8(i)<<8|this.getUInt8(i+1)},n.prototype.getInt32=function(i){return this.getInt8(i)<<24|this.getUInt8(i+1)<<16|this.getUInt8(i+2)<<8|this.getUInt8(i+3)},n.prototype.getUInt32=function(i){return this.getUInt8(i)<<24|this.getUInt8(i+1)<<16|this.getUInt8(i+2)<<8|this.getUInt8(i+3)},n.prototype.getInt64=function(i){return this.getInt8(i)<<56|this.getUInt8(i+1)<<48|this.getUInt8(i+2)<<40|this.getUInt8(i+3)<<32|this.getUInt8(i+4)<<24|this.getUInt8(i+5)<<16|this.getUInt8(i+6)<<8|this.getUInt8(i+7)},n.prototype.getSlice=function(i,o){return new r(i,o,this)},n.prototype.putInt16=function(i,o){this.putInt8(i,o>>8),this.putUInt8(i+1,o&255)},n.prototype.putUInt16=function(i,o){this.putUInt8(i,o>>8&255),this.putUInt8(i+1,o&255)},n.prototype.putInt32=function(i,o){this.putInt8(i,o>>24),this.putUInt8(i+1,o>>16&255),this.putUInt8(i+2,o>>8&255),this.putUInt8(i+3,o&255)},n.prototype.putUInt32=function(i,o){this.putUInt8(i,o>>24&255),this.putUInt8(i+1,o>>16&255),this.putUInt8(i+2,o>>8&255),this.putUInt8(i+3,o&255)},n.prototype.putInt64=function(i,o){this.putInt8(i,o>>48),this.putUInt8(i+1,o>>42&255),this.putUInt8(i+2,o>>36&255),this.putUInt8(i+3,o>>30&255),this.putUInt8(i+4,o>>24&255),this.putUInt8(i+5,o>>16&255),this.putUInt8(i+6,o>>8&255),this.putUInt8(i+7,o&255)},n.prototype.putVarInt=function(i,o){for(var a=0;o>1;){var u=o%128;o>=128&&(u+=128),o=o/128,this.putUInt8(i+a,u),a+=1}return a},n.prototype.putBytes=function(i,o){for(var a=0,u=o.remaining();a<u;a++)this.putUInt8(i+a,o.readUInt8())},n.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},n.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},n.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},n.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},n.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},n.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},n.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},n.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},n.prototype.readVarInt=function(){var i=this.getVarInt(this.position);return this._updatePos(i.length),i.value},n.prototype.writeUInt8=function(i){this.putUInt8(this._updatePos(1),i)},n.prototype.writeInt8=function(i){this.putInt8(this._updatePos(1),i)},n.prototype.writeInt16=function(i){this.putInt16(this._updatePos(2),i)},n.prototype.writeInt32=function(i){this.putInt32(this._updatePos(4),i)},n.prototype.writeUInt32=function(i){this.putUInt32(this._updatePos(4),i)},n.prototype.writeInt64=function(i){this.putInt64(this._updatePos(8),i)},n.prototype.writeFloat64=function(i){this.putFloat64(this._updatePos(8),i)},n.prototype.writeVarInt=function(i){var o=this.putVarInt(this.position,i);this._updatePos(o)},n.prototype.writeBytes=function(i){this.putBytes(this._updatePos(i.remaining()),i)},n.prototype.readSlice=function(i){return this.getSlice(this._updatePos(i),i)},n.prototype._updatePos=function(i){var o=this.position;return this.position+=i,o},n.prototype.remaining=function(){return this.length-this.position},n.prototype.hasRemaining=function(){return this.remaining()>0},n.prototype.reset=function(){this.position=0},n.prototype.toString=function(){return this.constructor.name+"( position="+this.position+` )
  `+this.toHex()},n.prototype.toHex=function(){for(var i="",o=0;o<this.length;o++){var a=this.getUInt8(o).toString(16);a.length===1&&(a="0"+a),i+=a,o!==this.length-1&&(i+=" ")}return i},n})();Ro.default=t;var r=(function(n){e(i,n);function i(o,a,u){var s=n.call(this,a)||this;return s._start=o,s._inner=u,s}return i.prototype.putUInt8=function(o,a){this._inner.putUInt8(this._start+o,a)},i.prototype.getUInt8=function(o){return this._inner.getUInt8(this._start+o)},i.prototype.putInt8=function(o,a){this._inner.putInt8(this._start+o,a)},i.prototype.putFloat64=function(o,a){this._inner.putFloat64(this._start+o,a)},i.prototype.getInt8=function(o){return this._inner.getInt8(this._start+o)},i.prototype.getFloat64=function(o){return this._inner.getFloat64(this._start+o)},i})(t);return Ro}var tg;function Gh(){if(tg)return mn;tg=1;var e=mn&&mn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mn,"__esModule",{value:!0}),mn.BaseBuffer=void 0;var t=e(iE());return mn.BaseBuffer=t.default,mn.default=t.default,mn}var rg;function Uc(){if(rg)return sr;rg=1;var e=sr&&sr.__extends||(function(){var u=function(s,l){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(d[p]=c[p])},u(s,l)};return function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");u(s,l);function d(){this.constructor=s}s.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}})(),t=sr&&sr.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(sr,"__esModule",{value:!0}),sr.alloc=void 0;var r=t(Nw()),n=t(Gh()),i=(function(u){e(s,u);function s(l){var d=this,c=a(l);return d=u.call(this,c.length)||this,d._buffer=c,d}return s.prototype.getUInt8=function(l){return this._buffer.readUInt8(l)},s.prototype.getInt8=function(l){return this._buffer.readInt8(l)},s.prototype.getFloat64=function(l){return this._buffer.readDoubleBE(l)},s.prototype.getVarInt=function(l){for(var d=0,c=this._buffer.readInt8(l+d),p=c%128;c/128>=1;)d+=1,c=this._buffer.readInt8(l+d),p+=c%128;return{length:d+1,value:p}},s.prototype.putUInt8=function(l,d){this._buffer.writeUInt8(d,l)},s.prototype.putInt8=function(l,d){this._buffer.writeInt8(d,l)},s.prototype.putFloat64=function(l,d){this._buffer.writeDoubleBE(d,l)},s.prototype.putBytes=function(l,d){if(d instanceof s){var c=Math.min(d.length-d.position,this.length-l);d._buffer.copy(this._buffer,l,d.position,d.position+c),d.position+=c}else u.prototype.putBytes.call(this,l,d)},s.prototype.getSlice=function(l,d){return new s(this._buffer.slice(l,l+d))},s})(n.default);sr.default=i;function o(u){return new i(u)}sr.alloc=o;function a(u){return u instanceof r.default.Buffer?u:typeof u=="number"&&typeof r.default.Buffer.alloc=="function"?r.default.Buffer.alloc(u):new r.default.Buffer(u)}return sr}var ng;function AR(){if(ng)return Co;ng=1;var e=Co&&Co.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Co,"__esModule",{value:!0});var t=e(Uc()),r=ae(),n=r.internal.util,i=n.ENCRYPTION_OFF,o=n.ENCRYPTION_ON,a=1,u=3,s=(function(){function h(v,w,E){w===void 0&&(w=g),E===void 0&&(E=function(R){return new WebSocket(R)});var O=this;this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=v,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._receiveTimeoutId=null,this._closingPromise=null;var S=b(v,w),P=S.scheme,I=S.error;if(I){this._error=I;return}this._ws=l(P,v.address,E),this._ws.binaryType="arraybuffer";var C=this;this._ws.onclose=function(R){R&&!R.wasClean&&C._handleConnectionError(),C._open=!1},this._ws.onopen=function(){C._clearConnectionTimeout();var R=C._pending;C._pending=null;for(var A=0;A<R.length;A++)C.write(R[A])},this._ws.onmessage=function(R){if(O._resetTimeout(),C.onmessage){var A=new t.default(R.data);C.onmessage(A)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}return h.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired){this._error=(0,r.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),this.onerror&&this.onerror(this._error);return}this._open&&!this._timedout&&(this._error=(0,r.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},h.prototype.write=function(v){if(this._pending!==null)this._pending.push(v);else if(v instanceof t.default)try{this._ws.send(v._buffer)}catch(w){if(this._ws.readyState!==a)this._handleConnectionError();else throw(0,r.newError)("unexpected failure to write.",void 0,w)}else throw(0,r.newError)("Don't know how to send buffer: "+v)},h.prototype.close=function(){var v=this;return this._closingPromise===null&&(this._closingPromise=new Promise(function(w,E){v._clearConnectionTimeout(),v._ws&&v._ws.readyState!==u?(v._open=!1,v.stopReceiveTimeout(),v._ws.onclose=function(){w()},v._ws.close()):w()})),this._closingPromise},h.prototype.setupReceiveTimeout=function(v){this._receiveTimeout=v},h.prototype.stopReceiveTimeout=function(){this._receiveTimeout!==null&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,this._receiveTimeoutId!=null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=null)},h.prototype.startReceiveTimeout=function(){this._open&&this._receiveTimeout!==null&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._resetTimeout())},h.prototype._resetTimeout=function(){var v=this;this._receiveTimeoutStarted&&(this._receiveTimeoutId!==null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=setTimeout(function(){v._receiveTimeoutId=null,v._timedout=!0,v.stopReceiveTimeout(),v._error=(0,r.newError)("Connection lost. Server didn't respond in ".concat(v._receiveTimeout,"ms"),v._config.connectionErrorCode),v.close(),v.onerror&&v.onerror(v._error)},this._receiveTimeout))},h.prototype._setupConnectionTimeout=function(){var v=this,w=this._config.connectionTimeout;if(w){var E=this._ws;return setTimeout(function(){E.readyState!==a&&(v._connectionTimeoutFired=!0,E.close())},w)}return null},h.prototype._clearConnectionTimeout=function(){var v=this._connectionTimeoutId;(v||v===0)&&(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(v))},h})();Co.default=s;function l(h,v,w){var E=h+"://"+v.asHostPort();try{return w(E)}catch(S){if(d(S,v)){var O=p(h,v);return w(O)}else throw S}}function d(h,v){return h.name==="SyntaxError"&&c(v.asHostPort())}function c(h){return h.charAt(0)==="["&&h.indexOf("]")!==-1}function p(h,v){var w=v.host().replace(/:/g,"-"),E=w.replace("%","s"),O=E+".ipv6-literal.net";return"".concat(h,"://").concat(O,":").concat(v.port())}function b(h,v){var w=m(h),E=_(h),O=h.trust,S=f(v);if(y(w,E,S),E)return{scheme:"ws",error:null};if(S)return{scheme:"wss",error:null};if(w){if(!O||O==="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES")return{scheme:"wss",error:null};var P=(0,r.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+O+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+i+'"` in the driver configuration.');return{scheme:null,error:P}}return{scheme:"ws",error:null}}function m(h){return h.encrypted===!0||h.encrypted===o}function _(h){return h.encrypted===!1||h.encrypted===i}function f(h){var v=typeof h=="function"?h():"";return v&&v.toLowerCase().indexOf("https")>=0}function y(h,v,w){w===null||(h&&!w?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):v&&w&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}function g(){return typeof window<"u"&&window.location?window.location.protocol:null}return Co}var Ao={},ig;function IR(){if(ig)return Ao;ig=1;var e=Ao&&Ao.__extends||(function(){var i=function(o,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,s){u.__proto__=s}||function(u,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(u[l]=s[l])},i(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");i(o,a);function u(){this.constructor=o}o.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}})();Object.defineProperty(Ao,"__esModule",{value:!0});var t=ae(),r=t.internal.resolver.BaseHostNameResolver,n=(function(i){e(o,i);function o(){return i!==null&&i.apply(this,arguments)||this}return o.prototype.resolve=function(a){return this._resolveToItself(a)},o})(r);return Ao.default=n,Ao}var gn={},og;function jR(){if(og)return gn;og=1;var e=gn&&gn.__awaiter||function(r,n,i,o){function a(u){return u instanceof i?u:new i(function(s){s(u)})}return new(i||(i=Promise))(function(u,s){function l(p){try{c(o.next(p))}catch(b){s(b)}}function d(p){try{c(o.throw(p))}catch(b){s(b)}}function c(p){p.done?u(p.value):a(p.value).then(l,d)}c((o=o.apply(r,n||[])).next())})},t=gn&&gn.__generator||function(r,n){var i={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,a,u,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(p){return d([c,p])}}function d(c){if(o)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(i=0)),i;)try{if(o=1,a&&(u=c[0]&2?a.return:c[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,c[1])).done)return u;switch(a=0,u&&(c=[c[0]&2,u.value]),c[0]){case 0:case 1:u=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,a=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(u=i.trys,!(u=u.length>0&&u[u.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!u||c[1]>u[0]&&c[1]<u[3])){i.label=c[1];break}if(c[0]===6&&i.label<u[1]){i.label=u[1],u=c;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(c);break}u[2]&&i.ops.pop(),i.trys.pop();continue}c=n.call(r,i)}catch(p){c=[6,p],a=0}finally{o=u=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};return Object.defineProperty(gn,"__esModule",{value:!0}),gn.default={load:function(r){return e(this,void 0,void 0,function(){return t(this,function(n){return[2,r]})})}},gn}var ag;function NR(){if(ag)return zt;ag=1;var e=zt&&zt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(zt,"__esModule",{value:!0}),zt.ClientCertificatesLoader=zt.HostNameResolver=zt.Channel=void 0;var t=e(AR()),r=e(IR()),n=e(jR());return zt.Channel=t.default,zt.HostNameResolver=r.default,zt.ClientCertificatesLoader=n.default,zt}var Kt={},Io={},ug;function kR(){if(ug)return Io;ug=1;var e=Io&&Io.__extends||(function(){var i=function(o,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,s){u.__proto__=s}||function(u,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(u[l]=s[l])},i(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");i(o,a);function u(){this.constructor=o}o.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}})();Object.defineProperty(Io,"__esModule",{value:!0});var t=Gh(),r=Uc(),n=(function(i){e(o,i);function o(a){for(var u=this,s=0,l=0;l<a.length;l++)s+=a[l].length;return u=i.call(this,s)||this,u._buffers=a,u}return o.prototype.getUInt8=function(a){for(var u=0;u<this._buffers.length;u++){var s=this._buffers[u];if(a>=s.length)a-=s.length;else return s.getUInt8(a)}},o.prototype.getInt8=function(a){for(var u=0;u<this._buffers.length;u++){var s=this._buffers[u];if(a>=s.length)a-=s.length;else return s.getInt8(a)}},o.prototype.getFloat64=function(a){for(var u=(0,r.alloc)(8),s=0;s<8;s++)u.putUInt8(s,this.getUInt8(a+s));return u.getFloat64(0)},o})(t.BaseBuffer);return Io.default=n,Io}var sg;function MR(){if(sg)return Kt;sg=1;var e=Kt&&Kt.__extends||(function(){var d=function(c,p){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,m){b.__proto__=m}||function(b,m){for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&(b[_]=m[_])},d(c,p)};return function(c,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");d(c,p);function b(){this.constructor=c}c.prototype=p===null?Object.create(p):(b.prototype=p.prototype,new b)}})(),t=Kt&&Kt.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.Dechunker=Kt.Chunker=void 0;var r=t(iE()),n=Uc(),i=t(kR()),o=2,a=0,u=1400,s=(function(d){e(c,d);function c(p,b){var m=d.call(this,0)||this;return m._bufferSize=b||u,m._ch=p,m._buffer=(0,n.alloc)(m._bufferSize),m._currentChunkStart=0,m._chunkOpen=!1,m}return c.prototype.putUInt8=function(p,b){this._ensure(1),this._buffer.writeUInt8(b)},c.prototype.putInt8=function(p,b){this._ensure(1),this._buffer.writeInt8(b)},c.prototype.putFloat64=function(p,b){this._ensure(8),this._buffer.writeFloat64(b)},c.prototype.putBytes=function(p,b){for(;b.remaining()>0;)this._ensure(1),this._buffer.remaining()>b.remaining()?this._buffer.writeBytes(b):this._buffer.writeBytes(b.readSlice(this._buffer.remaining()));return this},c.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var p=this._buffer;this._buffer=null,this._ch.write(p.getSlice(0,p.position)),this._buffer=(0,n.alloc)(this._bufferSize),this._chunkOpen=!1}return this},c.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<o&&this.flush(),this._buffer.writeInt16(a)},c.prototype._ensure=function(p){var b=this._chunkOpen?p:p+o;this._buffer.remaining()<b&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+o,this._chunkOpen=!0)},c.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var p=this._buffer.position-(this._currentChunkStart+o);this._buffer.putUInt16(this._currentChunkStart,p),this._chunkOpen=!1}},c})(r.default);Kt.Chunker=s;var l=(function(){function d(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return d.prototype.AWAITING_CHUNK=function(c){return c.remaining()>=2?this._onHeader(c.readUInt16()):(this._partialChunkHeader=c.readUInt8()<<8,this.IN_HEADER)},d.prototype.IN_HEADER=function(c){return this._onHeader((this._partialChunkHeader|c.readUInt8())&65535)},d.prototype.IN_CHUNK=function(c){return this._chunkSize<=c.remaining()?(this._currentMessage.push(c.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=c.remaining(),this._currentMessage.push(c.readSlice(c.remaining())),this.IN_CHUNK)},d.prototype.CLOSED=function(c){},d.prototype._onHeader=function(c){if(c===0){var p=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:p=this._currentMessage[0];break;default:p=new i.default(this._currentMessage);break}return this._currentMessage=[],this.onmessage(p),this.AWAITING_CHUNK}else return this._chunkSize=c,this.IN_CHUNK},d.prototype.write=function(c){for(;c.hasRemaining();)this._state=this._state(c)},d})();return Kt.Dechunker=l,Kt}var tl={},cg;function DR(){if(cg)return tl;cg=1,Object.defineProperty(tl,"__esModule",{value:!0});var e=ae(),t=e.internal.util,r=t.ENCRYPTION_OFF,n=t.ENCRYPTION_ON,i=e.error.SERVICE_UNAVAILABLE,o=[null,void 0,!0,!1,n,r],a=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"],u=(function(){function p(b,m,_,f){this.address=b,this.encrypted=s(m),this.trust=l(m),this.trustedCertificates=d(m),this.knownHostsPath=c(m),this.connectionErrorCode=_||i,this.connectionTimeout=m.connectionTimeout,this.clientCertificate=f}return p})();tl.default=u;function s(p){var b=p.encrypted;if(o.indexOf(b)===-1)throw(0,e.newError)("Illegal value of the encrypted setting ".concat(b,". Expected one of ").concat(o));return b}function l(p){var b=p.trust;if(a.indexOf(b)===-1)throw(0,e.newError)("Illegal value of the trust setting ".concat(b,". Expected one of ").concat(a));return b}function d(p){return p.trustedCertificates||[]}function c(p){return p.knownHosts||null}return tl}var jo={},lg;function LR(){if(lg)return jo;lg=1;var e=jo&&jo.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(jo,"__esModule",{value:!0});var t=e(Uc()),r=ae(),n=e(Nw()),i=nC(),o=new i.StringDecoder("utf8");function a(p){return new t.default(c(p))}function u(p,b){if(Object.prototype.hasOwnProperty.call(p,"_buffer"))return s(p,b);if(Object.prototype.hasOwnProperty.call(p,"_buffers"))return l(p,b);throw(0,r.newError)("Don't know how to decode strings from '".concat(p,"'"))}function s(p,b){var m=p.position,_=m+b;return p.position=Math.min(_,p.length),p._buffer.toString("utf8",m,_)}function l(p,b){return d(p,b,function(m){return o.write(m._buffer)},function(){return o.end()})}function d(p,b,m,_){var f=b,y=p.position;p._updatePos(Math.min(b,p.length-y));var g=p._buffers.reduce(function(h,v){if(f<=0)return h;if(y>=v.length)return y-=v.length,"";v._updatePos(y-v.position);var w=Math.min(v.length-y,f),E=v.readSlice(w);return v._updatePos(w),f=Math.max(f-E.length,0),y=0,h+m(E)},"");return g+_()}function c(p){return typeof n.default.Buffer.from=="function"?n.default.Buffer.from(p,"utf8"):new n.default.Buffer(p,"utf8")}return jo.default={encode:a,decode:u},jo}var fg;function vi(){return fg||(fg=1,(function(e){var t=nn&&nn.__createBinding||(Object.create?(function(u,s,l,d){d===void 0&&(d=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(u,d,c)}):(function(u,s,l,d){d===void 0&&(d=l),u[d]=s[l]})),r=nn&&nn.__exportStar||function(u,s){for(var l in u)l!=="default"&&!Object.prototype.hasOwnProperty.call(s,l)&&t(s,u,l)},n=nn&&nn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.utf8=e.alloc=e.ChannelConfig=void 0,r(NR(),e),r(MR(),e);var i=DR();Object.defineProperty(e,"ChannelConfig",{enumerable:!0,get:function(){return n(i).default}});var o=Uc();Object.defineProperty(e,"alloc",{enumerable:!0,get:function(){return o.alloc}});var a=LR();Object.defineProperty(e,"utf8",{enumerable:!0,get:function(){return n(a).default}})})(nn)),nn}var dg;function UR(){if(dg)return el;dg=1,Object.defineProperty(el,"__esModule",{value:!0});var e=vi(),t=ae(),r=1616949271,n=["5.8","5.7","5.6","5.4","5.3","5.2","5.1","5.0","4.4","4.3","4.2","3.0"],i=0;function o(m,_){return{major:m,minor:_}}function a(m){if(m.length>4)throw(0,t.newError)("It should not have more than 4 versions of the protocol");var _=(0,e.alloc)(20);return _.writeInt32(r),m.forEach(function(f){if(f instanceof Array){var y=f[0],g=y.major,h=y.minor,v=f[1].minor,w=h-v;_.writeInt32(w<<16|h<<8|g)}else{var g=f.major,h=f.minor;_.writeInt32(h<<8|g)}}),_.reset(),_}function u(m,_){var f=[m.readUInt8(),m.readUInt8(),m.readUInt8(),m.readUInt8()];if(f[0]===72&&f[1]===84&&f[2]===84&&f[3]===80)throw _.error("Handshake failed since server responded with HTTP."),(0,t.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return+(f[3]+"."+f[2])}function s(m,_,f){for(var y=_.readVarInt(),g=[],h=0;h<y;h++){var v=[_.readUInt8(),_.readUInt8(),_.readUInt8(),_.readUInt8()];g=g.concat(p(v))}_.readVarInt();var w=b(),E=0,O=0;g.sort(function(P,I){return Number(P.major)!==Number(I.major)?Number(I.major)-Number(P.major):Number(I.minor)-Number(P.minor)});for(var h=0;h<g.length;h++){var S=g[h];if(n.includes(S.major+"."+S.minor)){E=S.major,O=S.minor;break}}return new Promise(function(P,I){try{var C=(0,e.alloc)(5);C.writeInt32(O<<8|E),C.writeVarInt(w),m.write(C),P({protocolVersion:+(E+"."+O),capabilites:w,consumeRemainingBuffer:function(R){_.hasRemaining()&&R(_.readSlice(_.remaining()))}})}catch(R){I(R)}})}function l(){return a([o(255,1),[o(5,8),o(5,0)],[o(4,4),o(4,2)],o(3,0)])}function d(m,_){return c(m,_).then(function(f){return f.protocolVersion===255.1?s(m,f.buffer):f})}el.default=d;function c(m,_){var f=this;return new Promise(function(y,g){var h=function(v){g(v)};m.onerror=h.bind(f),m._error&&h(m._error),m.onmessage=function(v){try{var w=u(v,_);y({protocolVersion:w,capabilites:0,buffer:v,consumeRemainingBuffer:function(E){v.hasRemaining()&&E(v.readSlice(v.remaining()))}})}catch(E){g(E)}},m.write(l())})}function p(m){for(var _=[],f=m[3],y=m[2],g=0;g<=m[1];g++)_.push({major:f,minor:y-g});return _}function b(m){return i}return el}var No={},mt={},Gt={},Oe={},wn={},hg;function oE(){if(hg)return wn;hg=1;var e=wn&&wn.__extends||(function(){var a=function(u,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var c in d)Object.prototype.hasOwnProperty.call(d,c)&&(l[c]=d[c])},a(u,s)};return function(u,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");a(u,s);function l(){this.constructor=u}u.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}})(),t=wn&&wn.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(wn,"__esModule",{value:!0}),t(ae());var r=(function(){function a(){}return a.ofRecord=function(u){return u===null?a.ofNull():new o(u)},a.ofMessageResponse=function(u){return u===null?a.ofNull():new n(u)},a.ofNull=function(){return new i},Object.defineProperty(a.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),a})();wn.default=r;var n=(function(a){e(u,a);function u(s){var l=a.call(this)||this;return l._response=s,l}return Object.defineProperty(u.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isNull",{get:function(){return this._response===null},enumerable:!1,configurable:!0}),u})(r),i=(function(a){e(u,a);function u(){return a!==null&&a.apply(this,arguments)||this}return Object.defineProperty(u.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),u})(r),o=(function(a){e(u,a);function u(s){var l=a.call(this)||this;return l._record=s,l}return Object.defineProperty(u.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isNull",{get:function(){return this._record===null},enumerable:!1,configurable:!0}),u})(r);return wn}var St={},io={},vg;function aE(){if(vg)return io;vg=1,Object.defineProperty(io,"__esModule",{value:!0}),io.reuseOngoingRequest=io.identity=void 0;var e=ae();function t(n){return n}io.identity=t;function r(n,i){i===void 0&&(i=null);var o=new Map;return function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];var s=e.json.stringify(a);if(o.has(s))return o.get(s);var l=n.apply(i,a);return o.set(s,l),l.finally(function(){o.delete(s)})}}return io.reuseOngoingRequest=r,io}var oo={},pg;function BR(){if(pg)return oo;pg=1;var e=oo&&oo.__values||function(r){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&r[n],o=0;if(i)return i.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(oo,"__esModule",{value:!0}),oo.equals=void 0;function t(r,n){var i,o;if(r===n)return!0;if(r===null||n===null)return!1;if(typeof r=="object"&&typeof n=="object"){var a=Object.keys(r),u=Object.keys(n);if(a.length!==u.length)return!1;try{for(var s=e(a),l=s.next();!l.done;l=s.next()){var d=l.value;if(r[d]!==n[d])return!1}}catch(c){i={error:c}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}return!0}return!1}return oo.equals=t,oo}var _g;function Bc(){if(_g)return St;_g=1;var e=St&&St.__createBinding||(Object.create?(function(n,i,o,a){a===void 0&&(a=o);var u=Object.getOwnPropertyDescriptor(i,o);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(n,a,u)}):(function(n,i,o,a){a===void 0&&(a=o),n[a]=i[o]})),t=St&&St.__setModuleDefault||(Object.create?(function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}):function(n,i){n.default=i}),r=St&&St.__importStar||function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var o in n)o!=="default"&&Object.prototype.hasOwnProperty.call(n,o)&&e(i,n,o);return t(i,n),i};return Object.defineProperty(St,"__esModule",{value:!0}),St.object=St.functional=void 0,St.functional=r(aE()),St.object=r(BR()),St}var bg;function pt(){if(bg)return Oe;bg=1;var e=Oe&&Oe.__extends||(function(){var g=function(h,v){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,E){w.__proto__=E}||function(w,E){for(var O in E)Object.prototype.hasOwnProperty.call(E,O)&&(w[O]=E[O])},g(h,v)};return function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");g(h,v);function w(){this.constructor=h}h.prototype=v===null?Object.create(v):(w.prototype=v.prototype,new w)}})(),t=Oe&&Oe.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.TelemetryObserver=Oe.ProcedureRouteObserver=Oe.RouteObserver=Oe.CompletedObserver=Oe.FailedObserver=Oe.ResetObserver=Oe.LogoffObserver=Oe.LoginObserver=Oe.ResultStreamObserver=Oe.StreamObserver=void 0;var r=ae(),n=t(oE()),i=Bc(),o=r.internal.constants.FETCH_ALL,a=r.error.PROTOCOL_ERROR,u=(function(){function g(){}return g.prototype.onNext=function(h){},g.prototype.onError=function(h){},g.prototype.onCompleted=function(h){},g})();Oe.StreamObserver=u;var s=(function(g){e(h,g);function h(v){var w=v===void 0?{}:v,E=w.reactive,O=E===void 0?!1:E,S=w.moreFunction,P=w.discardFunction,I=w.fetchSize,C=I===void 0?o:I,R=w.beforeError,A=w.afterError,D=w.beforeKeys,j=w.afterKeys,U=w.beforeComplete,B=w.afterComplete,q=w.server,T=w.highRecordWatermark,k=T===void 0?Number.MAX_VALUE:T,M=w.lowRecordWatermark,V=M===void 0?Number.MAX_VALUE:M,z=w.enrichMetadata,F=w.onDb,W=g.call(this)||this;return W._fieldKeys=null,W._fieldLookup=null,W._head=null,W._queuedRecords=[],W._tail=null,W._error=null,W._observers=[],W._meta={},W._server=q,W._beforeError=R,W._afterError=A,W._beforeKeys=D,W._afterKeys=j,W._beforeComplete=U,W._afterComplete=B,W._enrichMetadata=z||i.functional.identity,W._queryId=null,W._moreFunction=S,W._discardFunction=P,W._discard=!1,W._fetchSize=C,W._lowRecordWatermark=V,W._highRecordWatermark=k,W._setState(O?y.READY:y.READY_STREAMING),W._setupAutoPull(),W._paused=!1,W._pulled=!O,W._haveRecordStreamed=!1,W._onDb=F,W}return h.prototype.pause=function(){this._paused=!0},h.prototype.resume=function(){this._paused=!1,this._setupAutoPull(!0),this._state.pull(this)},h.prototype.onNext=function(v){this._haveRecordStreamed=!0;var w=new r.Record(this._fieldKeys,v,this._fieldLookup);this._observers.some(function(E){return E.onNext})?this._observers.forEach(function(E){E.onNext&&E.onNext(w)}):(this._queuedRecords.push(w),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},h.prototype.onCompleted=function(v){this._state.onSuccess(this,v)},h.prototype.onError=function(v){this._state.onError(this,v)},h.prototype.cancel=function(){this._discard=!0},h.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(y.STREAMING)},h.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(y.SUCCEEDED)},h.prototype.subscribe=function(v){if(this._head&&v.onKeys&&v.onKeys(this._head),this._queuedRecords.length>0&&v.onNext)for(var w=0;w<this._queuedRecords.length;w++)v.onNext(this._queuedRecords[w]),this._queuedRecords.length-w-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===y.READY&&this._handleStreaming());this._tail&&v.onCompleted&&v.onCompleted(this._tail),this._error&&v.onError(this._error),this._observers.push(v),this._state===y.READY&&this._handleStreaming()},h.prototype._handleHasMore=function(v){this._setState(y.READY),this._handleStreaming(),delete v.has_more},h.prototype._handlePullSuccess=function(v){var w=this,E=this._enrichMetadata(Object.assign(this._server?{server:this._server}:{},this._meta,{stream_summary:{have_records_streamed:this._haveRecordStreamed,pulled:this._pulled,has_keys:this._fieldKeys.length>0}},v));if(![void 0,null,"r","w","rw","s"].includes(E.type)){this.onError((0,r.newError)(`Server returned invalid query type. Expected one of [undefined, null, "r", "w", "rw", "s"] but got '`.concat(E.type,"'"),a));return}this._setState(y.SUCCEEDED);var O=null;this._beforeComplete&&(O=this._beforeComplete(E));var S=function(){w._tail=E,w._observers.some(function(P){return P.onCompleted})&&w._observers.forEach(function(P){P.onCompleted&&P.onCompleted(E)}),w._afterComplete&&w._afterComplete(E)};O?Promise.resolve(O).then(function(){return S()}):S()},h.prototype._handleRunSuccess=function(v,w){var E=this;if(this._fieldKeys===null){if(this._fieldKeys=[],this._fieldLookup={},v.fields&&v.fields.length>0){this._fieldKeys=v.fields;for(var O=0;O<v.fields.length;O++)this._fieldLookup[v.fields[O]]=O}v.db!==null&&this._onDb!==void 0&&this._onDb(v.db),v.fields!=null&&delete v.fields,v.qid!==null&&v.qid!==void 0&&(this._queryId=v.qid,delete v.qid),this._storeMetadataForCompletion(v);var S=null;this._beforeKeys&&(S=this._beforeKeys(this._fieldKeys));var P=function(){E._head=E._fieldKeys,E._observers.some(function(I){return I.onKeys})&&E._observers.forEach(function(I){I.onKeys&&I.onKeys(E._fieldKeys)}),E._afterKeys&&E._afterKeys(E._fieldKeys),w()};S?Promise.resolve(S).then(function(){return P()}):P()}},h.prototype._handleError=function(v){var w=this;this._setState(y.FAILED),this._error=v;var E=null;this._beforeError&&(E=this._beforeError(v));var O=function(){w._observers.some(function(S){return S.onError})&&w._observers.forEach(function(S){S.onError&&S.onError(v)}),w._afterError&&w._afterError(v)};E?Promise.resolve(E).then(function(){return O()}):O()},h.prototype._handleStreaming=function(){this._head&&this._observers.some(function(v){return v.onNext||v.onCompleted})&&!this._paused&&(this._discard||this._autoPull)&&this._more()},h.prototype._more=function(){this._discard?this._discardFunction(this._queryId,this):(this._pulled=!0,this._moreFunction(this._queryId,this._fetchSize,this)),this._setState(y.STREAMING)},h.prototype._storeMetadataForCompletion=function(v){for(var w=Object.keys(v),E=w.length,O="";E--;)O=w[E],this._meta[O]=v[O]},h.prototype._setState=function(v){this._state=v},h.prototype._setupAutoPull=function(){this._autoPull=!0},h})(u);Oe.ResultStreamObserver=s;var l=(function(g){e(h,g);function h(v){var w=v===void 0?{}:v,E=w.onError,O=w.onCompleted,S=g.call(this)||this;return S._onError=E,S._onCompleted=O,S}return h.prototype.onNext=function(v){this.onError((0,r.newError)("Received RECORD when initializing "+r.json.stringify(v)))},h.prototype.onError=function(v){this._onError&&this._onError(v)},h.prototype.onCompleted=function(v){this._onCompleted&&this._onCompleted(v)},h})(u);Oe.LoginObserver=l;var d=(function(g){e(h,g);function h(v){var w=v===void 0?{}:v,E=w.onError,O=w.onCompleted,S=g.call(this)||this;return S._onError=E,S._onCompleted=O,S}return h.prototype.onNext=function(v){this.onError((0,r.newError)("Received RECORD when logging off "+r.json.stringify(v)))},h.prototype.onError=function(v){this._onError&&this._onError(v)},h.prototype.onCompleted=function(v){this._onCompleted&&this._onCompleted(v)},h})(u);Oe.LogoffObserver=d;var c=(function(g){e(h,g);function h(v){var w=v===void 0?{}:v,E=w.onProtocolError,O=w.onError,S=w.onComplete,P=g.call(this)||this;return P._onProtocolError=E,P._onError=O,P._onComplete=S,P}return h.prototype.onNext=function(v){this.onError((0,r.newError)("Received RECORD when resetting: received record is: "+r.json.stringify(v),a))},h.prototype.onError=function(v){v.code===a&&this._onProtocolError&&this._onProtocolError(v.message),this._onError&&this._onError(v)},h.prototype.onCompleted=function(v){this._onComplete&&this._onComplete(v)},h})(u);Oe.ResetObserver=c;var p=(function(g){e(h,g);function h(v){var w=v===void 0?{}:v,E=w.onError,O=w.onCompleted,S=g.call(this)||this;return S._onError=E,S._onCompleted=O,S}return h.prototype.onNext=function(v){this.onError((0,r.newError)("Received RECORD when sending telemetry "+r.json.stringify(v),a))},h.prototype.onError=function(v){this._onError&&this._onError(v)},h.prototype.onCompleted=function(v){this._onCompleted&&this._onCompleted(v)},h})(s);Oe.TelemetryObserver=p;var b=(function(g){e(h,g);function h(v){var w=v.error,E=v.onError,O=g.call(this,{beforeError:E})||this;return O.onError(w),O}return h})(s);Oe.FailedObserver=b;var m=(function(g){e(h,g);function h(){var v=g.call(this)||this;return g.prototype.markCompleted.call(v),v}return h})(s);Oe.CompletedObserver=m;var _=(function(g){e(h,g);function h(v){var w=v.resultObserver,E=v.onProtocolError,O=v.onError,S=v.onCompleted,P=g.call(this)||this;return P._resultObserver=w,P._onError=O,P._onCompleted=S,P._records=[],P._onProtocolError=E,w.subscribe(P),P}return h.prototype.onNext=function(v){this._records.push(v)},h.prototype.onError=function(v){v.code===a&&this._onProtocolError&&this._onProtocolError(v.message),this._onError&&this._onError(v)},h.prototype.onCompleted=function(){if(this._records!==null&&this._records.length!==1){this.onError((0,r.newError)("Illegal response from router. Received "+this._records.length+` records but expected only one.
`+r.json.stringify(this._records),a));return}this._onCompleted&&this._onCompleted(n.default.ofRecord(this._records[0]))},h})(u);Oe.ProcedureRouteObserver=_;var f=(function(g){e(h,g);function h(v){var w=v===void 0?{}:v,E=w.onProtocolError,O=w.onError,S=w.onCompleted,P=g.call(this)||this;return P._onProtocolError=E,P._onError=O,P._onCompleted=S,P}return h.prototype.onNext=function(v){this.onError((0,r.newError)("Received RECORD when resetting: received record is: "+r.json.stringify(v),a))},h.prototype.onError=function(v){v.code===a&&this._onProtocolError&&this._onProtocolError(v.message),this._onError&&this._onError(v)},h.prototype.onCompleted=function(v){this._onCompleted&&this._onCompleted(n.default.ofMessageResponse(v))},h})(u);Oe.RouteObserver=f;var y={READY_STREAMING:{onSuccess:function(g,h){g._handleRunSuccess(h,function(){g._setState(y.STREAMING)})},onError:function(g,h){g._handleError(h)},name:function(){return"READY_STREAMING"},pull:function(){}},READY:{onSuccess:function(g,h){g._handleRunSuccess(h,function(){return g._handleStreaming()})},onError:function(g,h){g._handleError(h)},name:function(){return"READY"},pull:function(g){return g._more()}},STREAMING:{onSuccess:function(g,h){h.has_more?g._handleHasMore(h):g._handlePullSuccess(h)},onError:function(g,h){g._handleError(h)},name:function(){return"STREAMING"},pull:function(){}},FAILED:{onError:function(g){},name:function(){return"FAILED"},pull:function(){}},SUCCEEDED:{name:function(){return"SUCCEEDED"},pull:function(){}}};return Oe}var yg;function pi(){if(yg)return Gt;yg=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.assertNotificationFilterIsEmpty=Gt.assertImpersonatedUserIsEmpty=Gt.assertTxConfigIsEmpty=Gt.assertDatabaseIsEmpty=void 0;var e=ae();pt();function t(o,a,u){if(a===void 0&&(a=function(){}),o&&!o.isEmpty()){var s=(0,e.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw a(s.message),u.onError(s),s}}Gt.assertTxConfigIsEmpty=t;function r(o,a,u){if(a===void 0&&(a=function(){}),o){var s=(0,e.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw a(s.message),u.onError(s),s}}Gt.assertDatabaseIsEmpty=r;function n(o,a,u){if(a===void 0&&(a=function(){}),o){var s=(0,e.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+"Trying to impersonate ".concat(o,"."));throw a(s.message),u.onError(s),s}}Gt.assertImpersonatedUserIsEmpty=n;function i(o,a,u){if(a===void 0&&(a=function(){}),o!==void 0){var s=(0,e.newError)("Driver is connected to a database that does not support user notification filters. Please upgrade to Neo4j 5.7.0 or later in order to use this functionality. "+"Trying to set notifications to ".concat(e.json.stringify(o),"."));throw a(s.message),u.onError(s),s}}return Gt.assertNotificationFilterIsEmpty=i,Gt}var Xe={},ao={},On={},mg;function uE(){if(mg)return On;mg=1,Object.defineProperty(On,"__esModule",{value:!0}),On.verifyStructSize=On.Structure=void 0;var e=ae(),t=e.error.PROTOCOL_ERROR,r=(function(){function i(o,a){this.signature=o,this.fields=a}return Object.defineProperty(i.prototype,"size",{get:function(){return this.fields.length},enumerable:!1,configurable:!0}),i.prototype.toString=function(){for(var o="",a=0;a<this.fields.length;a++)a>0&&(o+=", "),o+=this.fields[a];return"Structure("+this.signature+", ["+o+"])"},i})();On.Structure=r;function n(i,o,a){if(o!==a)throw(0,e.newError)("Wrong struct size for ".concat(i,", expected ").concat(o," but was ").concat(a),t)}return On.verifyStructSize=n,On.default=r,On}var gg;function sE(){if(gg)return ao;gg=1,Object.defineProperty(ao,"__esModule",{value:!0}),ao.Unpacker=ao.Packer=void 0;var e=vi(),t=Bc(),r=uE(),n=ae(),i=n.error.PROTOCOL_ERROR,o=128,a=144,u=160,s=176,l=192,d=193,c=194,p=195,b=200,m=201,_=202,f=203,y=208,g=209,h=210,v=212,w=213,E=214,O=204,S=205,P=206,I=216,C=217,R=218,A=220,D=221,j=(function(){function q(T){this._ch=T,this._byteArraysSupported=!0}return q.prototype.packable=function(T,k){var M=this;k===void 0&&(k=t.functional.identity);try{T=k(T)}catch(F){return function(){throw F}}if(T===null)return function(){return M._ch.writeUInt8(l)};if(T===!0)return function(){return M._ch.writeUInt8(p)};if(T===!1)return function(){return M._ch.writeUInt8(c)};if(typeof T=="number")return function(){return M.packFloat(T)};if(typeof T=="string")return function(){return M.packString(T)};if(typeof T=="bigint")return function(){return M.packInteger((0,n.int)(T))};if((0,n.isInt)(T))return function(){return M.packInteger(T)};if(T instanceof Int8Array)return function(){return M.packBytes(T)};if(T instanceof Array)return function(){M.packListHeader(T.length);for(var F=0;F<T.length;F++)M.packable(T[F]===void 0?null:T[F],k)()};if(B(T))return this.packableIterable(T,k);if(T instanceof r.Structure){for(var V=[],z=0;z<T.fields.length;z++)V[z]=this.packable(T.fields[z],k);return function(){return M.packStruct(T.signature,V)}}else return typeof T=="object"?function(){for(var F=Object.keys(T),W=0,Y=0;Y<F.length;Y++)T[F[Y]]!==void 0&&W++;M.packMapHeader(W);for(var Y=0;Y<F.length;Y++){var K=F[Y];T[K]!==void 0&&(M.packString(K),M.packable(T[K],k)())}}:this._nonPackableValue("Unable to pack the given value: ".concat(T))},q.prototype.packableIterable=function(T,k){try{var M=Array.from(T);return this.packable(M,k)}catch(V){throw(0,n.newError)("Cannot pack given iterable, ".concat(V.message,": ").concat(T))}},q.prototype.packStruct=function(T,k){k=k||[],this.packStructHeader(k.length,T);for(var M=0;M<k.length;M++)k[M]()},q.prototype.packInteger=function(T){var k=T.high,M=T.low;T.greaterThanOrEqual(-16)&&T.lessThan(128)?this._ch.writeInt8(M):T.greaterThanOrEqual(-128)&&T.lessThan(-16)?(this._ch.writeUInt8(b),this._ch.writeInt8(M)):T.greaterThanOrEqual(-32768)&&T.lessThan(32768)?(this._ch.writeUInt8(m),this._ch.writeInt16(M)):T.greaterThanOrEqual(-2147483648)&&T.lessThan(2147483648)?(this._ch.writeUInt8(_),this._ch.writeInt32(M)):(this._ch.writeUInt8(f),this._ch.writeInt32(k),this._ch.writeInt32(M))},q.prototype.packFloat=function(T){this._ch.writeUInt8(d),this._ch.writeFloat64(T)},q.prototype.packString=function(T){var k=e.utf8.encode(T),M=k.length;if(M<16)this._ch.writeUInt8(o|M),this._ch.writeBytes(k);else if(M<256)this._ch.writeUInt8(y),this._ch.writeUInt8(M),this._ch.writeBytes(k);else if(M<65536)this._ch.writeUInt8(g),this._ch.writeUInt8(M/256>>0),this._ch.writeUInt8(M%256),this._ch.writeBytes(k);else if(M<4294967296)this._ch.writeUInt8(h),this._ch.writeUInt8((M/16777216>>0)%256),this._ch.writeUInt8((M/65536>>0)%256),this._ch.writeUInt8((M/256>>0)%256),this._ch.writeUInt8(M%256),this._ch.writeBytes(k);else throw(0,n.newError)("UTF-8 strings of size "+M+" are not supported")},q.prototype.packListHeader=function(T){if(T<16)this._ch.writeUInt8(a|T);else if(T<256)this._ch.writeUInt8(v),this._ch.writeUInt8(T);else if(T<65536)this._ch.writeUInt8(w),this._ch.writeUInt8((T/256>>0)%256),this._ch.writeUInt8(T%256);else if(T<4294967296)this._ch.writeUInt8(E),this._ch.writeUInt8((T/16777216>>0)%256),this._ch.writeUInt8((T/65536>>0)%256),this._ch.writeUInt8((T/256>>0)%256),this._ch.writeUInt8(T%256);else throw(0,n.newError)("Lists of size "+T+" are not supported")},q.prototype.packBytes=function(T){if(this._byteArraysSupported){this.packBytesHeader(T.length);for(var k=0;k<T.length;k++)this._ch.writeInt8(T[k])}else throw(0,n.newError)("Byte arrays are not supported by the database this driver is connected to")},q.prototype.packBytesHeader=function(T){if(T<256)this._ch.writeUInt8(O),this._ch.writeUInt8(T);else if(T<65536)this._ch.writeUInt8(S),this._ch.writeUInt8((T/256>>0)%256),this._ch.writeUInt8(T%256);else if(T<4294967296)this._ch.writeUInt8(P),this._ch.writeUInt8((T/16777216>>0)%256),this._ch.writeUInt8((T/65536>>0)%256),this._ch.writeUInt8((T/256>>0)%256),this._ch.writeUInt8(T%256);else throw(0,n.newError)("Byte arrays of size "+T+" are not supported")},q.prototype.packMapHeader=function(T){if(T<16)this._ch.writeUInt8(u|T);else if(T<256)this._ch.writeUInt8(I),this._ch.writeUInt8(T);else if(T<65536)this._ch.writeUInt8(C),this._ch.writeUInt8(T/256>>0),this._ch.writeUInt8(T%256);else if(T<4294967296)this._ch.writeUInt8(R),this._ch.writeUInt8((T/16777216>>0)%256),this._ch.writeUInt8((T/65536>>0)%256),this._ch.writeUInt8((T/256>>0)%256),this._ch.writeUInt8(T%256);else throw(0,n.newError)("Maps of size "+T+" are not supported")},q.prototype.packStructHeader=function(T,k){if(T<16)this._ch.writeUInt8(s|T),this._ch.writeUInt8(k);else if(T<256)this._ch.writeUInt8(A),this._ch.writeUInt8(T),this._ch.writeUInt8(k);else if(T<65536)this._ch.writeUInt8(D),this._ch.writeUInt8(T/256>>0),this._ch.writeUInt8(T%256);else throw(0,n.newError)("Structures of size "+T+" are not supported")},q.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},q.prototype._nonPackableValue=function(T){return function(){throw(0,n.newError)(T,i)}},q})();ao.Packer=j;var U=(function(){function q(T,k){T===void 0&&(T=!1),k===void 0&&(k=!1),this._disableLosslessIntegers=T,this._useBigInt=k}return q.prototype.unpack=function(T,k){k===void 0&&(k=t.functional.identity);var M=T.readUInt8(),V=M&240,z=M&15;if(M===l)return null;var F=this._unpackBoolean(M);if(F!==null)return F;var W=this._unpackNumberOrInteger(M,T);if(W!==null){if((0,n.isInt)(W)){if(this._useBigInt)return W.toBigInt();if(this._disableLosslessIntegers)return W.toNumberOrInfinity()}return W}var Y=this._unpackString(M,V,z,T);if(Y!==null)return Y;var K=this._unpackList(M,V,z,T,k);if(K!==null)return K;var N=this._unpackByteArray(M,T);if(N!==null)return N;var x=this._unpackMap(M,V,z,T,k);if(x!==null)return x;var L=this._unpackStruct(M,V,z,T,k);if(L!==null)return L;throw(0,n.newError)("Unknown packed value with marker "+M.toString(16))},q.prototype.unpackInteger=function(T){var k=T.readUInt8(),M=this._unpackInteger(k,T);if(M==null)throw(0,n.newError)("Unable to unpack integer value with marker "+k.toString(16));return M},q.prototype._unpackBoolean=function(T){return T===p?!0:T===c?!1:null},q.prototype._unpackNumberOrInteger=function(T,k){return T===d?k.readFloat64():this._unpackInteger(T,k)},q.prototype._unpackInteger=function(T,k){if(T>=0&&T<128)return(0,n.int)(T);if(T>=240&&T<256)return(0,n.int)(T-256);if(T===b)return(0,n.int)(k.readInt8());if(T===m)return(0,n.int)(k.readInt16());if(T===_){var M=k.readInt32();return(0,n.int)(M)}else if(T===f){var V=k.readInt32(),z=k.readInt32();return new n.Integer(z,V)}else return null},q.prototype._unpackString=function(T,k,M,V){return k===o?e.utf8.decode(V,M):T===y?e.utf8.decode(V,V.readUInt8()):T===g?e.utf8.decode(V,V.readUInt16()):T===h?e.utf8.decode(V,V.readUInt32()):null},q.prototype._unpackList=function(T,k,M,V,z){return k===a?this._unpackListWithSize(M,V,z):T===v?this._unpackListWithSize(V.readUInt8(),V,z):T===w?this._unpackListWithSize(V.readUInt16(),V,z):T===E?this._unpackListWithSize(V.readUInt32(),V,z):null},q.prototype._unpackListWithSize=function(T,k,M){for(var V=[],z=0;z<T;z++)V.push(this.unpack(k,M));return V},q.prototype._unpackByteArray=function(T,k){return T===O?this._unpackByteArrayWithSize(k.readUInt8(),k):T===S?this._unpackByteArrayWithSize(k.readUInt16(),k):T===P?this._unpackByteArrayWithSize(k.readUInt32(),k):null},q.prototype._unpackByteArrayWithSize=function(T,k){for(var M=new Int8Array(T),V=0;V<T;V++)M[V]=k.readInt8();return M},q.prototype._unpackMap=function(T,k,M,V,z){return k===u?this._unpackMapWithSize(M,V,z):T===I?this._unpackMapWithSize(V.readUInt8(),V,z):T===C?this._unpackMapWithSize(V.readUInt16(),V,z):T===R?this._unpackMapWithSize(V.readUInt32(),V,z):null},q.prototype._unpackMapWithSize=function(T,k,M){for(var V={},z=0;z<T;z++){var F=this.unpack(k,M);V[F]=this.unpack(k,M)}return V},q.prototype._unpackStruct=function(T,k,M,V,z){return k===s?this._unpackStructWithSize(M,V,z):T===A?this._unpackStructWithSize(V.readUInt8(),V,z):T===D?this._unpackStructWithSize(V.readUInt16(),V,z):null},q.prototype._unpackStructWithSize=function(T,k,M){for(var V=k.readUInt8(),z=new r.Structure(V,[]),F=0;F<T;F++)z.fields.push(this.unpack(k,M));return M(z)},q})();ao.Unpacker=U;function B(q){return q==null?!1:typeof q[Symbol.iterator]=="function"}return ao}var ft={},wg;function qR(){if(wg)return ft;wg=1;var e=ft&&ft.__extends||(function(){var u=function(s,l){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(d[p]=c[p])},u(s,l)};return function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");u(s,l);function d(){this.constructor=s}s.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}})(),t=ft&&ft.__createBinding||(Object.create?(function(u,s,l,d){d===void 0&&(d=l);var c=Object.getOwnPropertyDescriptor(s,l);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(u,d,c)}):(function(u,s,l,d){d===void 0&&(d=l),u[d]=s[l]})),r=ft&&ft.__setModuleDefault||(Object.create?(function(u,s){Object.defineProperty(u,"default",{enumerable:!0,value:s})}):function(u,s){u.default=s}),n=ft&&ft.__importStar||function(u){if(u&&u.__esModule)return u;var s={};if(u!=null)for(var l in u)l!=="default"&&Object.prototype.hasOwnProperty.call(u,l)&&t(s,u,l);return r(s,u),s};Object.defineProperty(ft,"__esModule",{value:!0}),ft.Unpacker=ft.Packer=void 0;var i=n(sE()),o=(function(u){e(s,u);function s(){return u!==null&&u.apply(this,arguments)||this}return s.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},s})(i.Packer);ft.Packer=o;var a=(function(u){e(s,u);function s(l,d){return l===void 0&&(l=!1),d===void 0&&(d=!1),u.call(this,l,d)||this}return s})(i.Unpacker);return ft.Unpacker=a,ft}var Og;function _i(){if(Og)return Xe;Og=1;var e=Xe&&Xe.__createBinding||(Object.create?(function(a,u,s,l){l===void 0&&(l=s);var d=Object.getOwnPropertyDescriptor(u,s);(!d||("get"in d?!u.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return u[s]}}),Object.defineProperty(a,l,d)}):(function(a,u,s,l){l===void 0&&(l=s),a[l]=u[s]})),t=Xe&&Xe.__setModuleDefault||(Object.create?(function(a,u){Object.defineProperty(a,"default",{enumerable:!0,value:u})}):function(a,u){a.default=u}),r=Xe&&Xe.__importStar||function(a){if(a&&a.__esModule)return a;var u={};if(a!=null)for(var s in a)s!=="default"&&Object.prototype.hasOwnProperty.call(a,s)&&e(u,a,s);return t(u,a),u};Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.structure=Xe.v2=Xe.v1=void 0;var n=r(sE());Xe.v1=n;var i=r(qR());Xe.v2=i;var o=r(uE());return Xe.structure=o,Xe.default=i,Xe}var ko={},Eg;function It(){if(Eg)return ko;Eg=1,Object.defineProperty(ko,"__esModule",{value:!0}),ko.SIGNATURES=void 0;var e=ae(),t=e.internal.constants,r=t.ACCESS_MODE_READ,n=t.FETCH_ALL,i=e.internal.util.assertString,o=1,a=15,u=16,s=63,l=1,d=2,c=17,p=18,b=19,m=84,_=102,f=106,y=107,g=47,h=63,v="r",w=-1,E=Object.freeze({INIT:o,RESET:a,RUN:u,PULL_ALL:s,HELLO:l,GOODBYE:d,BEGIN:c,COMMIT:p,ROLLBACK:b,TELEMETRY:m,ROUTE:_,LOGON:f,LOGOFF:y,DISCARD:g,PULL:h});ko.SIGNATURES=E;var O=(function(){function B(q,T,k){this.signature=q,this.fields=T,this.toString=k}return B.init=function(q,T){return new B(o,[q,T],function(){return"INIT ".concat(q," {...}")})},B.run=function(q,T){return new B(u,[q,T],function(){return"RUN ".concat(q," ").concat(e.json.stringify(T))})},B.pullAll=function(){return R},B.reset=function(){return A},B.hello=function(q,T,k,M){k===void 0&&(k=null),M===void 0&&(M=null);var V=Object.assign({user_agent:q},T);return k&&(V.routing=k),M&&(V.patch_bolt=M),new B(l,[V],function(){return"HELLO {user_agent: '".concat(q,"', ...}")})},B.hello5x1=function(q,T){T===void 0&&(T=null);var k={user_agent:q};return T&&(k.routing=T),new B(l,[k],function(){return"HELLO {user_agent: '".concat(q,"', ...}")})},B.hello5x2=function(q,T,k){T===void 0&&(T=null),k===void 0&&(k=null);var M={user_agent:q};return I(M,T),k&&(M.routing=k),new B(l,[M],function(){return"HELLO ".concat(e.json.stringify(M))})},B.hello5x3=function(q,T,k,M){k===void 0&&(k=null),M===void 0&&(M=null);var V={};return q&&(V.user_agent=q),T&&(V.bolt_agent={product:T.product,platform:T.platform,language:T.language,language_details:T.languageDetails}),I(V,k),M&&(V.routing=M),new B(l,[V],function(){return"HELLO ".concat(e.json.stringify(V))})},B.hello5x5=function(q,T,k,M){k===void 0&&(k=null),M===void 0&&(M=null);var V={};return q&&(V.user_agent=q),T&&(V.bolt_agent={product:T.product,platform:T.platform,language:T.language,language_details:T.languageDetails}),C(V,k),M&&(V.routing=M),new B(l,[V],function(){return"HELLO ".concat(e.json.stringify(V))})},B.logon=function(q){return new B(f,[q],function(){return"LOGON { ... }"})},B.logoff=function(){return new B(y,[],function(){return"LOGOFF"})},B.begin=function(q){var T=q===void 0?{}:q,k=T.bookmarks,M=T.txConfig,V=T.database,z=T.mode,F=T.impersonatedUser,W=T.notificationFilter,Y=S(k,M,V,z,F,W);return new B(c,[Y],function(){return"BEGIN ".concat(e.json.stringify(Y))})},B.begin5x5=function(q){var T=q===void 0?{}:q,k=T.bookmarks,M=T.txConfig,V=T.database,z=T.mode,F=T.impersonatedUser,W=T.notificationFilter,Y=S(k,M,V,z,F,W,{appendNotificationFilter:C});return new B(c,[Y],function(){return"BEGIN ".concat(e.json.stringify(Y))})},B.commit=function(){return D},B.rollback=function(){return j},B.runWithMetadata=function(q,T,k){var M=k===void 0?{}:k,V=M.bookmarks,z=M.txConfig,F=M.database,W=M.mode,Y=M.impersonatedUser,K=M.notificationFilter,N=S(V,z,F,W,Y,K);return new B(u,[q,T,N],function(){return"RUN ".concat(q," ").concat(e.json.stringify(T)," ").concat(e.json.stringify(N))})},B.runWithMetadata5x5=function(q,T,k){var M=k===void 0?{}:k,V=M.bookmarks,z=M.txConfig,F=M.database,W=M.mode,Y=M.impersonatedUser,K=M.notificationFilter,N=S(V,z,F,W,Y,K,{appendNotificationFilter:C});return new B(u,[q,T,N],function(){return"RUN ".concat(q," ").concat(e.json.stringify(T)," ").concat(e.json.stringify(N))})},B.goodbye=function(){return U},B.pull=function(q){var T=q===void 0?{}:q,k=T.stmtId,M=k===void 0?w:k,V=T.n,z=V===void 0?n:V,F=P(M??w,z||n);return new B(h,[F],function(){return"PULL ".concat(e.json.stringify(F))})},B.discard=function(q){var T=q===void 0?{}:q,k=T.stmtId,M=k===void 0?w:k,V=T.n,z=V===void 0?n:V,F=P(M??w,z||n);return new B(g,[F],function(){return"DISCARD ".concat(e.json.stringify(F))})},B.telemetry=function(q){var T=q.api,k=(0,e.int)(T);return new B(m,[k],function(){return"TELEMETRY ".concat(k.toString())})},B.route=function(q,T,k){return q===void 0&&(q={}),T===void 0&&(T=[]),k===void 0&&(k=null),new B(_,[q,T,k],function(){return"ROUTE ".concat(e.json.stringify(q)," ").concat(e.json.stringify(T)," ").concat(k)})},B.routeV4x4=function(q,T,k){q===void 0&&(q={}),T===void 0&&(T=[]),k===void 0&&(k={});var M={};return k.databaseName&&(M.db=k.databaseName),k.impersonatedUser&&(M.imp_user=k.impersonatedUser),new B(_,[q,T,M],function(){return"ROUTE ".concat(e.json.stringify(q)," ").concat(e.json.stringify(T)," ").concat(e.json.stringify(M))})},B})();ko.default=O;function S(B,q,T,k,M,V,z){var F;z===void 0&&(z={});var W={};B.isEmpty()||(W.bookmarks=B.values()),q.timeout!==null&&(W.tx_timeout=q.timeout),q.metadata&&(W.tx_metadata=q.metadata),T&&(W.db=i(T,"database")),M&&(W.imp_user=i(M,"impersonatedUser")),k===r&&(W.mode=v);var Y=(F=z.appendNotificationFilter)!==null&&F!==void 0?F:I;return Y(W,V),W}function P(B,q){var T={n:(0,e.int)(q)};return B!==w&&(T.qid=(0,e.int)(B)),T}function I(B,q){q&&(q.minimumSeverityLevel&&(B.notifications_minimum_severity=q.minimumSeverityLevel),q.disabledCategories&&(B.notifications_disabled_categories=q.disabledCategories),q.disabledClassifications&&(B.notifications_disabled_categories=q.disabledClassifications))}function C(B,q){q&&(q.minimumSeverityLevel&&(B.notifications_minimum_severity=q.minimumSeverityLevel),q.disabledCategories&&(B.notifications_disabled_classifications=q.disabledCategories),q.disabledClassifications&&(B.notifications_disabled_classifications=q.disabledClassifications))}var R=new O(s,[],function(){return"PULL_ALL"}),A=new O(a,[],function(){return"RESET"}),D=new O(p,[],function(){return"COMMIT"}),j=new O(b,[],function(){return"ROLLBACK"}),U=new O(d,[],function(){return"GOODBYE"});return ko}var Mo={},Do={},Sg;function qe(){if(Sg)return Do;Sg=1,Object.defineProperty(Do,"__esModule",{value:!0}),Do.TypeTransformer=void 0;var e=_i(),t=ae(),r=t.internal.objectUtil,n=(function(){function o(a){this._transformers=a,this._transformersPerSignature=new Map(a.map(function(u){return[u.signature,u]})),this.fromStructure=this.fromStructure.bind(this),this.toStructure=this.toStructure.bind(this),Object.freeze(this)}return o.prototype.fromStructure=function(a){try{if(a instanceof e.structure.Structure&&this._transformersPerSignature.has(a.signature)){var u=this._transformersPerSignature.get(a.signature).fromStructure;return u(a)}return a}catch(s){return r.createBrokenObject(s)}},o.prototype.toStructure=function(a){var u=this._transformers.find(function(s){var l=s.isTypeInstance;return l(a)});return u!==void 0?u.toStructure(a):a},o})();Do.default=n;var i=(function(){function o(a){var u=a.signature,s=a.fromStructure,l=a.toStructure,d=a.isTypeInstance;this.signature=u,this.isTypeInstance=d,this.fromStructure=s,this.toStructure=l,Object.freeze(this)}return o.prototype.extendsWith=function(a){var u=a.signature,s=a.fromStructure,l=a.toStructure,d=a.isTypeInstance;return new o({signature:u||this.signature,fromStructure:s||this.fromStructure,toStructure:l||this.toStructure,isTypeInstance:d||this.isTypeInstance})},o})();return Do.TypeTransformer=i,Do}var Pg;function cE(){if(Pg)return Mo;Pg=1;var e=Mo&&Mo.__read||function(y,g){var h=typeof Symbol=="function"&&y[Symbol.iterator];if(!h)return y;var v=h.call(y),w,E=[],O;try{for(;(g===void 0||g-- >0)&&!(w=v.next()).done;)E.push(w.value)}catch(S){O={error:S}}finally{try{w&&!w.done&&(h=v.return)&&h.call(v)}finally{if(O)throw O.error}}return E};Object.defineProperty(Mo,"__esModule",{value:!0});var t=ae(),r=_i(),n=qe(),i=t.error.PROTOCOL_ERROR,o=78,a=3,u=82,s=5,l=114,d=3,c=80,p=3;function b(){return new n.TypeTransformer({signature:o,isTypeInstance:function(y){return y instanceof t.Node},toStructure:function(y){throw(0,t.newError)("It is not allowed to pass nodes in query parameters, given: ".concat(y),i)},fromStructure:function(y){r.structure.verifyStructSize("Node",a,y.size);var g=e(y.fields,3),h=g[0],v=g[1],w=g[2];return new t.Node(h,v,w)}})}function m(){return new n.TypeTransformer({signature:u,isTypeInstance:function(y){return y instanceof t.Relationship},toStructure:function(y){throw(0,t.newError)("It is not allowed to pass relationships in query parameters, given: ".concat(y),i)},fromStructure:function(y){r.structure.verifyStructSize("Relationship",s,y.size);var g=e(y.fields,5),h=g[0],v=g[1],w=g[2],E=g[3],O=g[4];return new t.Relationship(h,v,w,E,O)}})}function _(){return new n.TypeTransformer({signature:l,isTypeInstance:function(y){return y instanceof t.UnboundRelationship},toStructure:function(y){throw(0,t.newError)("It is not allowed to pass unbound relationships in query parameters, given: ".concat(y),i)},fromStructure:function(y){r.structure.verifyStructSize("UnboundRelationship",d,y.size);var g=e(y.fields,3),h=g[0],v=g[1],w=g[2];return new t.UnboundRelationship(h,v,w)}})}function f(){return new n.TypeTransformer({signature:c,isTypeInstance:function(y){return y instanceof t.Path},toStructure:function(y){throw(0,t.newError)("It is not allowed to pass paths in query parameters, given: ".concat(y),i)},fromStructure:function(y){r.structure.verifyStructSize("Path",p,y.size);for(var g=e(y.fields,3),h=g[0],v=g[1],w=g[2],E=[],O=h[0],S=0;S<w.length;S+=2){var P=h[w[S+1]],I=(0,t.toNumber)(w[S]),C=void 0;I>0?(C=v[I-1],C instanceof t.UnboundRelationship&&(v[I-1]=C=C.bindTo(O,P))):(C=v[-I-1],C instanceof t.UnboundRelationship&&(v[-I-1]=C=C.bindTo(P,O))),E.push(new t.PathSegment(O,C,P)),O=P}return new t.Path(h[0],h[h.length-1],E)}})}return Mo.default={createNodeTransformer:b,createRelationshipTransformer:m,createUnboundRelationshipTransformer:_,createPathTransformer:f},Mo}var Tg;function lE(){if(Tg)return mt;Tg=1;var e=mt&&mt.__assign||function(){return e=Object.assign||function(h){for(var v,w=1,E=arguments.length;w<E;w++){v=arguments[w];for(var O in v)Object.prototype.hasOwnProperty.call(v,O)&&(h[O]=v[O])}return h},e.apply(this,arguments)},t=mt&&mt.__createBinding||(Object.create?(function(h,v,w,E){E===void 0&&(E=w);var O=Object.getOwnPropertyDescriptor(v,w);(!O||("get"in O?!v.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return v[w]}}),Object.defineProperty(h,E,O)}):(function(h,v,w,E){E===void 0&&(E=w),h[E]=v[w]})),r=mt&&mt.__setModuleDefault||(Object.create?(function(h,v){Object.defineProperty(h,"default",{enumerable:!0,value:v})}):function(h,v){h.default=v}),n=mt&&mt.__importStar||function(h){if(h&&h.__esModule)return h;var v={};if(h!=null)for(var w in h)w!=="default"&&Object.prototype.hasOwnProperty.call(h,w)&&t(v,h,w);return r(v,h),v},i=mt&&mt.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(mt,"__esModule",{value:!0});var o=pi();vi();var a=_i(),u=n(It()),s=pt(),l=ae(),d=i(cE()),c=i(qe()),p=l.internal.bookmarks.Bookmarks,b=l.internal.constants,m=b.ACCESS_MODE_WRITE,_=b.BOLT_PROTOCOL_V1;l.internal.logger.Logger;var f=l.internal.txConfig.TxConfig,y=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),g=(function(){function h(v,w,E,O,S,P){var I=E===void 0?{}:E,C=I.disableLosslessIntegers,R=I.useBigInt;O===void 0&&(O=function(){return null}),this._server=v||{},this._chunker=w,this._packer=this._createPacker(w),this._unpacker=this._createUnpacker(C,R),this._responseHandler=O(this),this._log=S,this._onProtocolError=P,this._fatalError=null,this._lastMessageSignature=null,this._config={disableLosslessIntegers:C,useBigInt:R}}return Object.defineProperty(h.prototype,"transformer",{get:function(){var v=this;return this._transformer===void 0&&(this._transformer=new c.default(Object.values(d.default).map(function(w){return w(v._config,v._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"version",{get:function(){return _},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"supportsReAuth",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"initialized",{get:function(){return!!this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"authToken",{get:function(){return this._authToken},enumerable:!1,configurable:!0}),h.prototype.packer=function(){return this._packer},h.prototype.packable=function(v){return this._packer.packable(v,this.transformer.toStructure)},h.prototype.unpacker=function(){return this._unpacker},h.prototype.unpack=function(v){return this._unpacker.unpack(v,this.transformer.fromStructure)},h.prototype.transformMetadata=function(v){return v},h.prototype.enrichErrorMetadata=function(v){return e(e({},v),{diagnostic_record:v.diagnostic_record!==null?e(e({},y),v.diagnostic_record):null})},h.prototype.initialize=function(v){var w=this,E=v===void 0?{}:v,O=E.userAgent;E.boltAgent;var S=E.authToken,P=E.notificationFilter,I=E.onError,C=E.onComplete,R=new s.LoginObserver({onError:function(A){return w._onLoginError(A,I)},onCompleted:function(A){return w._onLoginCompleted(A,C)}});return(0,o.assertNotificationFilterIsEmpty)(P,this._onProtocolError,R),this.write(u.default.init(O,S),R,!0),R},h.prototype.logoff=function(v){var w=v===void 0?{}:v,E=w.onComplete,O=w.onError;w.flush;var S=new s.LogoffObserver({onCompleted:E,onError:O}),P=(0,l.newError)("Driver is connected to a database that does not support logoff. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(P.message),S.onError(P),P},h.prototype.logon=function(v){var w=this,E=v===void 0?{}:v,O=E.authToken,S=E.onComplete,P=E.onError;E.flush;var I=new s.LoginObserver({onCompleted:function(){return w._onLoginCompleted({},O,S)},onError:function(R){return w._onLoginError(R,P)}}),C=(0,l.newError)("Driver is connected to a database that does not support logon. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(C.message),I.onError(C),C},h.prototype.prepareToClose=function(){},h.prototype.beginTransaction=function(v){var w=v===void 0?{}:v,E=w.bookmarks,O=w.txConfig,S=w.database,P=w.mode,I=w.impersonatedUser,C=w.notificationFilter,R=w.beforeError,A=w.afterError,D=w.beforeComplete,j=w.afterComplete;return this.run("BEGIN",E?E.asBeginTransactionParameters():{},{bookmarks:E,txConfig:O,database:S,mode:P,impersonatedUser:I,notificationFilter:C,beforeError:R,afterError:A,beforeComplete:D,afterComplete:j,flush:!1})},h.prototype.commitTransaction=function(v){var w=v===void 0?{}:v,E=w.beforeError,O=w.afterError,S=w.beforeComplete,P=w.afterComplete;return this.run("COMMIT",{},{bookmarks:p.empty(),txConfig:f.empty(),mode:m,beforeError:E,afterError:O,beforeComplete:S,afterComplete:P})},h.prototype.rollbackTransaction=function(v){var w=v===void 0?{}:v,E=w.beforeError,O=w.afterError,S=w.beforeComplete,P=w.afterComplete;return this.run("ROLLBACK",{},{bookmarks:p.empty(),txConfig:f.empty(),mode:m,beforeError:E,afterError:O,beforeComplete:S,afterComplete:P})},h.prototype.run=function(v,w,E){var O=E===void 0?{}:E;O.bookmarks;var S=O.txConfig,P=O.database;O.mode;var I=O.impersonatedUser,C=O.notificationFilter,R=O.beforeKeys,A=O.afterKeys,D=O.beforeError,j=O.afterError,U=O.beforeComplete,B=O.afterComplete,q=O.flush,T=q===void 0?!0:q,k=O.highRecordWatermark,M=k===void 0?Number.MAX_VALUE:k,V=O.lowRecordWatermark,z=V===void 0?Number.MAX_VALUE:V,F=new s.ResultStreamObserver({server:this._server,beforeKeys:R,afterKeys:A,beforeError:D,afterError:j,beforeComplete:U,afterComplete:B,highRecordWatermark:M,lowRecordWatermark:z});return(0,o.assertTxConfigIsEmpty)(S,this._onProtocolError,F),(0,o.assertDatabaseIsEmpty)(P,this._onProtocolError,F),(0,o.assertImpersonatedUserIsEmpty)(I,this._onProtocolError,F),(0,o.assertNotificationFilterIsEmpty)(C,this._onProtocolError,F),this.write(u.default.run(v,w),F,!1),this.write(u.default.pullAll(),F,T),F},Object.defineProperty(h.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),h.prototype.reset=function(v){var w=v===void 0?{}:v,E=w.onError,O=w.onComplete,S=new s.ResetObserver({onProtocolError:this._onProtocolError,onError:E,onComplete:O});return this.write(u.default.reset(),S,!0),S},h.prototype.telemetry=function(v,w){v.api;var E=w===void 0?{}:w;E.onError;var O=E.onCompleted,S=new s.CompletedObserver;return O&&O(),S},h.prototype._createPacker=function(v){return new a.v1.Packer(v)},h.prototype._createUnpacker=function(v,w){return new a.v1.Unpacker(v,w)},h.prototype.write=function(v,w,E){var O=this.queueObserverIfProtocolIsNotBroken(w);if(O){this._log.isDebugEnabled()&&this._log.debug("C: ".concat(v)),this._lastMessageSignature=v.signature;var S=new a.structure.Structure(v.signature,v.fields);this.packable(S)(),this._chunker.messageBoundary(),E&&this._chunker.flush()}},h.prototype.isLastMessageLogon=function(){return this._lastMessageSignature===u.SIGNATURES.HELLO||this._lastMessageSignature===u.SIGNATURES.LOGON},h.prototype.isLastMessageReset=function(){return this._lastMessageSignature===u.SIGNATURES.RESET},h.prototype.notifyFatalError=function(v){return this._fatalError=v,this._responseHandler._notifyErrorToObservers(v)},h.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},h.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},h.prototype.queueObserverIfProtocolIsNotBroken=function(v){return this.isBroken()?(this.notifyFatalErrorToObserver(v),!1):this._responseHandler._queueObserver(v)},h.prototype.isBroken=function(){return!!this._fatalError},h.prototype.notifyFatalErrorToObserver=function(v){v&&v.onError&&v.onError(this._fatalError)},h.prototype.resetFailure=function(){this._responseHandler._resetFailure()},h.prototype._onLoginCompleted=function(v,w,E){if(this._initialized=!0,this._authToken=w,v){var O=v.server;this._server.version||(this._server.version=O)}E&&E(v)},h.prototype._onLoginError=function(v,w){this._onProtocolError(v.message),w&&w(v)},h})();return mt.default=g,mt}var En={},cr={},on={},Cg;function fE(){if(Cg)return on;Cg=1,Object.defineProperty(on,"__esModule",{value:!0}),on.epochSecondAndNanoToLocalDateTime=on.nanoOfDayToLocalTime=on.epochDayToDate=void 0;var e=ae(),t=e.internal.temporalUtil,r=t.DAYS_0000_TO_1970,n=t.DAYS_PER_400_YEAR_CYCLE,i=t.NANOS_PER_HOUR,o=t.NANOS_PER_MINUTE,a=t.NANOS_PER_SECOND,u=t.SECONDS_PER_DAY,s=t.floorDiv,l=t.floorMod;function d(b){b=(0,e.int)(b);var m=b.add(r).subtract(60),_=(0,e.int)(0);if(m.lessThan(0)){var f=m.add(1).div(n).subtract(1);_=f.multiply(400),m=m.add(f.multiply(-n))}var y=m.multiply(400).add(591).div(n),g=m.subtract(y.multiply(365).add(y.div(4)).subtract(y.div(100)).add(y.div(400)));g.lessThan(0)&&(y=y.subtract(1),g=m.subtract(y.multiply(365).add(y.div(4)).subtract(y.div(100)).add(y.div(400)))),y=y.add(_);var h=g,v=h.multiply(5).add(2).div(153),w=v.add(2).modulo(12).add(1),E=h.subtract(v.multiply(306).add(5).div(10)).add(1);return y=y.add(v.div(10)),new e.Date(y,w,E)}on.epochDayToDate=d;function c(b){b=(0,e.int)(b);var m=b.div(i);b=b.subtract(m.multiply(i));var _=b.div(o);b=b.subtract(_.multiply(o));var f=b.div(a),y=b.subtract(f.multiply(a));return new e.LocalTime(m,_,f,y)}on.nanoOfDayToLocalTime=c;function p(b,m){var _=s(b,u),f=l(b,u),y=f.multiply(a).add(m),g=d(_),h=c(y);return new e.LocalDateTime(g.year,g.month,g.day,h.hour,h.minute,h.second,h.nanosecond)}return on.epochSecondAndNanoToLocalDateTime=p,on}var Rg;function dE(){if(Rg)return cr;Rg=1;var e=cr&&cr.__assign||function(){return e=Object.assign||function(F){for(var W,Y=1,K=arguments.length;Y<K;Y++){W=arguments[Y];for(var N in W)Object.prototype.hasOwnProperty.call(W,N)&&(F[N]=W[N])}return F},e.apply(this,arguments)},t=cr&&cr.__read||function(F,W){var Y=typeof Symbol=="function"&&F[Symbol.iterator];if(!Y)return F;var K=Y.call(F),N,x=[],L;try{for(;(W===void 0||W-- >0)&&!(N=K.next()).done;)x.push(N.value)}catch($){L={error:$}}finally{try{N&&!N.done&&(Y=K.return)&&Y.call(K)}finally{if(L)throw L.error}}return x},r=cr&&cr.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(cr,"__esModule",{value:!0});var n=ae(),i=_i(),o=qe(),a=fE(),u=r(cE()),s=n.internal.temporalUtil,l=s.dateToEpochDay,d=s.localDateTimeToEpochSecond,c=s.localTimeToNanoOfDay,p=88,b=3,m=89,_=4,f=69,y=4,g=116,h=1,v=84,w=2,E=68,O=1,S=100,P=2,I=70,C=3,R=102,A=3;function D(){return new o.TypeTransformer({signature:p,isTypeInstance:function(F){return(0,n.isPoint)(F)&&(F.z===null||F.z===void 0)},toStructure:function(F){return new i.structure.Structure(p,[(0,n.int)(F.srid),F.x,F.y])},fromStructure:function(F){i.structure.verifyStructSize("Point2D",b,F.size);var W=t(F.fields,3),Y=W[0],K=W[1],N=W[2];return new n.Point(Y,K,N,void 0)}})}function j(){return new o.TypeTransformer({signature:m,isTypeInstance:function(F){return(0,n.isPoint)(F)&&F.z!==null&&F.z!==void 0},toStructure:function(F){return new i.structure.Structure(m,[(0,n.int)(F.srid),F.x,F.y,F.z])},fromStructure:function(F){i.structure.verifyStructSize("Point3D",_,F.size);var W=t(F.fields,4),Y=W[0],K=W[1],N=W[2],x=W[3];return new n.Point(Y,K,N,x)}})}function U(){return new o.TypeTransformer({signature:f,isTypeInstance:n.isDuration,toStructure:function(F){var W=(0,n.int)(F.months),Y=(0,n.int)(F.days),K=(0,n.int)(F.seconds),N=(0,n.int)(F.nanoseconds);return new i.structure.Structure(f,[W,Y,K,N])},fromStructure:function(F){i.structure.verifyStructSize("Duration",y,F.size);var W=t(F.fields,4),Y=W[0],K=W[1],N=W[2],x=W[3];return new n.Duration(Y,K,N,x)}})}function B(F){var W=F.disableLosslessIntegers,Y=F.useBigInt;return new o.TypeTransformer({signature:g,isTypeInstance:n.isLocalTime,toStructure:function(K){var N=c(K.hour,K.minute,K.second,K.nanosecond);return new i.structure.Structure(g,[N])},fromStructure:function(K){i.structure.verifyStructSize("LocalTime",h,K.size);var N=t(K.fields,1),x=N[0],L=(0,a.nanoOfDayToLocalTime)(x);return z(L,W,Y)}})}function q(F){var W=F.disableLosslessIntegers,Y=F.useBigInt;return new o.TypeTransformer({signature:v,isTypeInstance:n.isTime,toStructure:function(K){var N=c(K.hour,K.minute,K.second,K.nanosecond),x=(0,n.int)(K.timeZoneOffsetSeconds);return new i.structure.Structure(v,[N,x])},fromStructure:function(K){i.structure.verifyStructSize("Time",w,K.size);var N=t(K.fields,2),x=N[0],L=N[1],$=(0,a.nanoOfDayToLocalTime)(x),H=new n.Time($.hour,$.minute,$.second,$.nanosecond,L);return z(H,W,Y)}})}function T(F){var W=F.disableLosslessIntegers,Y=F.useBigInt;return new o.TypeTransformer({signature:E,isTypeInstance:n.isDate,toStructure:function(K){var N=l(K.year,K.month,K.day);return new i.structure.Structure(E,[N])},fromStructure:function(K){i.structure.verifyStructSize("Date",O,K.size);var N=t(K.fields,1),x=N[0],L=(0,a.epochDayToDate)(x);return z(L,W,Y)}})}function k(F){var W=F.disableLosslessIntegers,Y=F.useBigInt;return new o.TypeTransformer({signature:S,isTypeInstance:n.isLocalDateTime,toStructure:function(K){var N=d(K.year,K.month,K.day,K.hour,K.minute,K.second,K.nanosecond),x=(0,n.int)(K.nanosecond);return new i.structure.Structure(S,[N,x])},fromStructure:function(K){i.structure.verifyStructSize("LocalDateTime",P,K.size);var N=t(K.fields,2),x=N[0],L=N[1],$=(0,a.epochSecondAndNanoToLocalDateTime)(x,L);return z($,W,Y)}})}function M(F){var W=F.disableLosslessIntegers,Y=F.useBigInt;return new o.TypeTransformer({signature:R,isTypeInstance:function(K){return(0,n.isDateTime)(K)&&K.timeZoneId!=null},toStructure:function(K){var N=d(K.year,K.month,K.day,K.hour,K.minute,K.second,K.nanosecond),x=(0,n.int)(K.nanosecond),L=K.timeZoneId;return new i.structure.Structure(R,[N,x,L])},fromStructure:function(K){i.structure.verifyStructSize("DateTimeWithZoneId",A,K.size);var N=t(K.fields,3),x=N[0],L=N[1],$=N[2],H=(0,a.epochSecondAndNanoToLocalDateTime)(x,L),G=new n.DateTime(H.year,H.month,H.day,H.hour,H.minute,H.second,H.nanosecond,null,$);return z(G,W,Y)}})}function V(F){var W=F.disableLosslessIntegers,Y=F.useBigInt;return new o.TypeTransformer({signature:I,isTypeInstance:function(K){return(0,n.isDateTime)(K)&&K.timeZoneId==null},toStructure:function(K){var N=d(K.year,K.month,K.day,K.hour,K.minute,K.second,K.nanosecond),x=(0,n.int)(K.nanosecond),L=(0,n.int)(K.timeZoneOffsetSeconds);return new i.structure.Structure(I,[N,x,L])},fromStructure:function(K){i.structure.verifyStructSize("DateTimeWithZoneOffset",C,K.size);var N=t(K.fields,3),x=N[0],L=N[1],$=N[2],H=(0,a.epochSecondAndNanoToLocalDateTime)(x,L),G=new n.DateTime(H.year,H.month,H.day,H.hour,H.minute,H.second,H.nanosecond,$,null);return z(G,W,Y)}})}function z(F,W,Y){if(!W&&!Y)return F;var K=function($){return Y?$.toBigInt():$.toNumberOrInfinity()},N=Object.create(Object.getPrototypeOf(F));for(var x in F)if(Object.prototype.hasOwnProperty.call(F,x)===!0){var L=F[x];N[x]=(0,n.isInt)(L)?K(L):L}return Object.freeze(N),N}return cr.default=e(e({},u.default),{createPoint2DTransformer:D,createPoint3DTransformer:j,createDurationTransformer:U,createLocalTimeTransformer:B,createTimeTransformer:q,createDateTransformer:T,createLocalDateTimeTransformer:k,createDateTimeWithZoneIdTransformer:M,createDateTimeWithOffsetTransformer:V}),cr}var Ag;function hE(){if(Ag)return En;Ag=1;var e=En&&En.__extends||(function(){var l=function(d,c){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,b){p.__proto__=b}||function(p,b){for(var m in b)Object.prototype.hasOwnProperty.call(b,m)&&(p[m]=b[m])},l(d,c)};return function(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");l(d,c);function p(){this.constructor=d}d.prototype=c===null?Object.create(c):(p.prototype=c.prototype,new p)}})(),t=En&&En.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(En,"__esModule",{value:!0});var r=t(lE()),n=t(_i()),i=ae(),o=t(dE()),a=t(qe()),u=i.internal.constants.BOLT_PROTOCOL_V2,s=(function(l){e(d,l);function d(){return l!==null&&l.apply(this,arguments)||this}return d.prototype._createPacker=function(c){return new n.default.Packer(c)},d.prototype._createUnpacker=function(c,p){return new n.default.Unpacker(c,p)},Object.defineProperty(d.prototype,"transformer",{get:function(){var c=this;return this._transformer===void 0&&(this._transformer=new a.default(Object.values(o.default).map(function(p){return p(c._config,c._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"version",{get:function(){return u},enumerable:!1,configurable:!0}),d})(r.default);return En.default=s,En}var lr={},Sn={},Ig;function vE(){if(Ig)return Sn;Ig=1;var e=Sn&&Sn.__assign||function(){return e=Object.assign||function(n){for(var i,o=1,a=arguments.length;o<a;o++){i=arguments[o];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])}return n},e.apply(this,arguments)},t=Sn&&Sn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Sn,"__esModule",{value:!0});var r=t(dE());return Sn.default=e({},r.default),Sn}var jg;function pE(){if(jg)return lr;jg=1;var e=lr&&lr.__extends||(function(){var f=function(y,g){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&(h[w]=v[w])},f(y,g)};return function(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");f(y,g);function h(){this.constructor=y}y.prototype=g===null?Object.create(g):(h.prototype=g.prototype,new h)}})(),t=lr&&lr.__assign||function(){return t=Object.assign||function(f){for(var y,g=1,h=arguments.length;g<h;g++){y=arguments[g];for(var v in y)Object.prototype.hasOwnProperty.call(y,v)&&(f[v]=y[v])}return f},t.apply(this,arguments)},r=lr&&lr.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(lr,"__esModule",{value:!0});var n=r(hE()),i=r(It()),o=pi(),a=pt(),u=r(vE()),s=r(qe()),l=ae();l.internal.bookmarks.Bookmarks;var d=l.internal.constants.BOLT_PROTOCOL_V3,c=l.internal.txConfig.TxConfig,p="context",b="CALL dbms.cluster.routing.getRoutingTable($".concat(p,")"),m=new a.StreamObserver,_=(function(f){e(y,f);function y(){return f!==null&&f.apply(this,arguments)||this}return Object.defineProperty(y.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"transformer",{get:function(){var g=this;return this._transformer===void 0&&(this._transformer=new s.default(Object.values(u.default).map(function(h){return h(g._config,g._log)}))),this._transformer},enumerable:!1,configurable:!0}),y.prototype.transformMetadata=function(g){return"t_first"in g&&(g.result_available_after=g.t_first,delete g.t_first),"t_last"in g&&(g.result_consumed_after=g.t_last,delete g.t_last),g},y.prototype.initialize=function(g){var h=this,v=g===void 0?{}:g,w=v.userAgent;v.boltAgent;var E=v.authToken,O=v.notificationFilter,S=v.onError,P=v.onComplete,I=new a.LoginObserver({onError:function(C){return h._onLoginError(C,S)},onCompleted:function(C){return h._onLoginCompleted(C,E,P)}});return(0,o.assertNotificationFilterIsEmpty)(O,this._onProtocolError,I),this.write(i.default.hello(w,E),I,!0),I},y.prototype.prepareToClose=function(){this.write(i.default.goodbye(),m,!0)},y.prototype.beginTransaction=function(g){var h=g===void 0?{}:g,v=h.bookmarks,w=h.txConfig,E=h.database,O=h.impersonatedUser,S=h.notificationFilter,P=h.mode,I=h.beforeError,C=h.afterError,R=h.beforeComplete,A=h.afterComplete,D=new a.ResultStreamObserver({server:this._server,beforeError:I,afterError:C,beforeComplete:R,afterComplete:A});return D.prepareToHandleSingleResponse(),(0,o.assertDatabaseIsEmpty)(E,this._onProtocolError,D),(0,o.assertImpersonatedUserIsEmpty)(O,this._onProtocolError,D),(0,o.assertNotificationFilterIsEmpty)(S,this._onProtocolError,D),this.write(i.default.begin({bookmarks:v,txConfig:w,mode:P}),D,!0),D},y.prototype.commitTransaction=function(g){var h=g===void 0?{}:g,v=h.beforeError,w=h.afterError,E=h.beforeComplete,O=h.afterComplete,S=new a.ResultStreamObserver({server:this._server,beforeError:v,afterError:w,beforeComplete:E,afterComplete:O});return S.prepareToHandleSingleResponse(),this.write(i.default.commit(),S,!0),S},y.prototype.rollbackTransaction=function(g){var h=g===void 0?{}:g,v=h.beforeError,w=h.afterError,E=h.beforeComplete,O=h.afterComplete,S=new a.ResultStreamObserver({server:this._server,beforeError:v,afterError:w,beforeComplete:E,afterComplete:O});return S.prepareToHandleSingleResponse(),this.write(i.default.rollback(),S,!0),S},y.prototype.run=function(g,h,v){var w=v===void 0?{}:v,E=w.bookmarks,O=w.txConfig,S=w.database,P=w.impersonatedUser,I=w.notificationFilter,C=w.mode,R=w.beforeKeys,A=w.afterKeys,D=w.beforeError,j=w.afterError,U=w.beforeComplete,B=w.afterComplete,q=w.flush,T=q===void 0?!0:q,k=w.highRecordWatermark,M=k===void 0?Number.MAX_VALUE:k,V=w.lowRecordWatermark,z=V===void 0?Number.MAX_VALUE:V,F=new a.ResultStreamObserver({server:this._server,beforeKeys:R,afterKeys:A,beforeError:D,afterError:j,beforeComplete:U,afterComplete:B,highRecordWatermark:M,lowRecordWatermark:z});return(0,o.assertDatabaseIsEmpty)(S,this._onProtocolError,F),(0,o.assertImpersonatedUserIsEmpty)(P,this._onProtocolError,F),(0,o.assertNotificationFilterIsEmpty)(I,this._onProtocolError,F),this.write(i.default.runWithMetadata(g,h,{bookmarks:E,txConfig:O,mode:C}),F,!1),this.write(i.default.pullAll(),F,T),F},y.prototype.requestRoutingInformation=function(g){var h,v=g.routingContext,w=v===void 0?{}:v,E=g.sessionContext,O=E===void 0?{}:E,S=g.onError,P=g.onCompleted,I=this.run(b,(h={},h[p]=w,h),t(t({},O),{txConfig:c.empty()}));return new a.ProcedureRouteObserver({resultObserver:I,onProtocolError:this._onProtocolError,onError:S,onCompleted:P})},y})(n.default);return lr.default=_,lr}var fr={},Pn={},Ng;function _E(){if(Ng)return Pn;Ng=1;var e=Pn&&Pn.__assign||function(){return e=Object.assign||function(n){for(var i,o=1,a=arguments.length;o<a;o++){i=arguments[o];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])}return n},e.apply(this,arguments)},t=Pn&&Pn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Pn,"__esModule",{value:!0});var r=t(vE());return Pn.default=e({},r.default),Pn}var kg;function bE(){if(kg)return fr;kg=1;var e=fr&&fr.__extends||(function(){var g=function(h,v){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,E){w.__proto__=E}||function(w,E){for(var O in E)Object.prototype.hasOwnProperty.call(E,O)&&(w[O]=E[O])},g(h,v)};return function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");g(h,v);function w(){this.constructor=h}h.prototype=v===null?Object.create(v):(w.prototype=v.prototype,new w)}})(),t=fr&&fr.__assign||function(){return t=Object.assign||function(g){for(var h,v=1,w=arguments.length;v<w;v++){h=arguments[v];for(var E in h)Object.prototype.hasOwnProperty.call(h,E)&&(g[E]=h[E])}return g},t.apply(this,arguments)},r=fr&&fr.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(fr,"__esModule",{value:!0});var n=r(pE()),i=r(It()),o=pi(),a=pt(),u=r(_E()),s=r(qe()),l=ae();l.internal.bookmarks.Bookmarks;var d=l.internal.constants,c=d.BOLT_PROTOCOL_V4_0,p=d.FETCH_ALL,b=l.internal.txConfig.TxConfig,m="context",_="database",f="CALL dbms.routing.getRoutingTable($".concat(m,", $").concat(_,")"),y=(function(g){e(h,g);function h(){return g!==null&&g.apply(this,arguments)||this}return Object.defineProperty(h.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"transformer",{get:function(){var v=this;return this._transformer===void 0&&(this._transformer=new s.default(Object.values(u.default).map(function(w){return w(v._config,v._log)}))),this._transformer},enumerable:!1,configurable:!0}),h.prototype.beginTransaction=function(v){var w=v===void 0?{}:v,E=w.bookmarks,O=w.txConfig,S=w.database,P=w.impersonatedUser,I=w.notificationFilter,C=w.mode,R=w.beforeError,A=w.afterError,D=w.beforeComplete,j=w.afterComplete,U=new a.ResultStreamObserver({server:this._server,beforeError:R,afterError:A,beforeComplete:D,afterComplete:j});return U.prepareToHandleSingleResponse(),(0,o.assertImpersonatedUserIsEmpty)(P,this._onProtocolError,U),(0,o.assertNotificationFilterIsEmpty)(I,this._onProtocolError,U),this.write(i.default.begin({bookmarks:E,txConfig:O,database:S,mode:C}),U,!0),U},h.prototype.run=function(v,w,E){var O=E===void 0?{}:E,S=O.bookmarks,P=O.txConfig,I=O.database,C=O.impersonatedUser,R=O.notificationFilter,A=O.mode,D=O.beforeKeys,j=O.afterKeys,U=O.beforeError,B=O.afterError,q=O.beforeComplete,T=O.afterComplete,k=O.flush,M=k===void 0?!0:k,V=O.reactive,z=V===void 0?!1:V,F=O.fetchSize,W=F===void 0?p:F,Y=O.highRecordWatermark,K=Y===void 0?Number.MAX_VALUE:Y,N=O.lowRecordWatermark,x=N===void 0?Number.MAX_VALUE:N,L=new a.ResultStreamObserver({server:this._server,reactive:z,fetchSize:W,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:D,afterKeys:j,beforeError:U,afterError:B,beforeComplete:q,afterComplete:T,highRecordWatermark:K,lowRecordWatermark:x});(0,o.assertImpersonatedUserIsEmpty)(C,this._onProtocolError,L),(0,o.assertNotificationFilterIsEmpty)(R,this._onProtocolError,L);var $=z;return this.write(i.default.runWithMetadata(v,w,{bookmarks:S,txConfig:P,database:I,mode:A}),L,$&&M),z||this.write(i.default.pull({n:W}),L,M),L},h.prototype._requestMore=function(v,w,E){this.write(i.default.pull({stmtId:v,n:w}),E,!0)},h.prototype._requestDiscard=function(v,w){this.write(i.default.discard({stmtId:v}),w,!0)},h.prototype._noOp=function(){},h.prototype.requestRoutingInformation=function(v){var w,E=v.routingContext,O=E===void 0?{}:E,S=v.databaseName,P=S===void 0?null:S,I=v.sessionContext,C=I===void 0?{}:I,R=v.onError,A=v.onCompleted,D=this.run(f,(w={},w[m]=O,w[_]=P,w),t(t({},C),{txConfig:b.empty()}));return new a.ProcedureRouteObserver({resultObserver:D,onProtocolError:this._onProtocolError,onError:R,onCompleted:A})},h})(n.default);return fr.default=y,fr}var Tn={},Cn={},Mg;function yE(){if(Mg)return Cn;Mg=1;var e=Cn&&Cn.__assign||function(){return e=Object.assign||function(n){for(var i,o=1,a=arguments.length;o<a;o++){i=arguments[o];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])}return n},e.apply(this,arguments)},t=Cn&&Cn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Cn,"__esModule",{value:!0});var r=t(_E());return Cn.default=e({},r.default),Cn}var Dg;function mE(){if(Dg)return Tn;Dg=1;var e=Tn&&Tn.__extends||(function(){var c=function(p,b){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,_){m.__proto__=_}||function(m,_){for(var f in _)Object.prototype.hasOwnProperty.call(_,f)&&(m[f]=_[f])},c(p,b)};return function(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");c(p,b);function m(){this.constructor=p}p.prototype=b===null?Object.create(b):(m.prototype=b.prototype,new m)}})(),t=Tn&&Tn.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Tn,"__esModule",{value:!0});var r=t(bE()),n=t(It()),i=pt(),o=ae(),a=pi(),u=t(yE()),s=t(qe()),l=o.internal.constants.BOLT_PROTOCOL_V4_1,d=(function(c){e(p,c);function p(b,m,_,f,y,g,h){f===void 0&&(f=function(){return null});var v=c.call(this,b,m,_,f,y,g)||this;return v._serversideRouting=h,v}return Object.defineProperty(p.prototype,"version",{get:function(){return l},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"transformer",{get:function(){var b=this;return this._transformer===void 0&&(this._transformer=new s.default(Object.values(u.default).map(function(m){return m(b._config,b._log)}))),this._transformer},enumerable:!1,configurable:!0}),p.prototype.initialize=function(b){var m=this,_=b===void 0?{}:b,f=_.userAgent;_.boltAgent;var y=_.authToken,g=_.notificationFilter,h=_.onError,v=_.onComplete,w=new i.LoginObserver({onError:function(E){return m._onLoginError(E,h)},onCompleted:function(E){return m._onLoginCompleted(E,y,v)}});return(0,a.assertNotificationFilterIsEmpty)(g,this._onProtocolError,w),this.write(n.default.hello(f,y,this._serversideRouting),w,!0),w},p})(r.default);return Tn.default=d,Tn}var Rn={},An={},Lg;function gE(){if(Lg)return An;Lg=1;var e=An&&An.__assign||function(){return e=Object.assign||function(n){for(var i,o=1,a=arguments.length;o<a;o++){i=arguments[o];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])}return n},e.apply(this,arguments)},t=An&&An.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(An,"__esModule",{value:!0});var r=t(yE());return An.default=e({},r.default),An}var Ug;function wE(){if(Ug)return Rn;Ug=1;var e=Rn&&Rn.__extends||(function(){var s=function(l,d){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,p){c.__proto__=p}||function(c,p){for(var b in p)Object.prototype.hasOwnProperty.call(p,b)&&(c[b]=p[b])},s(l,d)};return function(l,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");s(l,d);function c(){this.constructor=l}l.prototype=d===null?Object.create(d):(c.prototype=d.prototype,new c)}})(),t=Rn&&Rn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Rn,"__esModule",{value:!0});var r=t(mE()),n=ae(),i=t(gE()),o=t(qe()),a=n.internal.constants.BOLT_PROTOCOL_V4_2,u=(function(s){e(l,s);function l(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(l.prototype,"version",{get:function(){return a},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"transformer",{get:function(){var d=this;return this._transformer===void 0&&(this._transformer=new o.default(Object.values(i.default).map(function(c){return c(d._config,d._log)}))),this._transformer},enumerable:!1,configurable:!0}),l})(r.default);return Rn.default=u,Rn}var dr={},In={},Bg;function OE(){if(Bg)return In;Bg=1;var e=In&&In.__assign||function(){return e=Object.assign||function(n){for(var i,o=1,a=arguments.length;o<a;o++){i=arguments[o];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])}return n},e.apply(this,arguments)},t=In&&In.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(In,"__esModule",{value:!0});var r=t(gE());return In.default=e({},r.default),In}var jn={},Nn={},qg;function Yh(){if(qg)return Nn;qg=1;var e=Nn&&Nn.__assign||function(){return e=Object.assign||function(n){for(var i,o=1,a=arguments.length;o<a;o++){i=arguments[o];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])}return n},e.apply(this,arguments)},t=Nn&&Nn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Nn,"__esModule",{value:!0});var r=t(OE());return Nn.default=e({},r.default),Nn}var xg;function Zh(){if(xg)return jn;xg=1;var e=jn&&jn.__read||function(h,v){var w=typeof Symbol=="function"&&h[Symbol.iterator];if(!w)return h;var E=w.call(h),O,S=[],P;try{for(;(v===void 0||v-- >0)&&!(O=E.next()).done;)S.push(O.value)}catch(I){P={error:I}}finally{try{O&&!O.done&&(w=E.return)&&w.call(E)}finally{if(P)throw P.error}}return S},t=jn&&jn.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(jn,"__esModule",{value:!0});var r=_i(),n=ae(),i=t(Yh()),o=fE(),a=aE(),u=n.internal.temporalUtil.localDateTimeToEpochSecond,s=73,l=3,d=105,c=3;function p(h,v){var w=h.disableLosslessIntegers,E=h.useBigInt,O=i.default.createDateTimeWithZoneIdTransformer(h);return O.extendsWith({signature:d,fromStructure:function(S){r.structure.verifyStructSize("DateTimeWithZoneId",c,S.size);var P=e(S.fields,3),I=P[0],C=P[1],R=P[2],A=f(R,I,C),D=new n.DateTime(A.year,A.month,A.day,A.hour,A.minute,A.second,(0,n.int)(C),A.timeZoneOffsetSeconds,R);return g(D,w,E)},toStructure:function(S){var P=u(S.year,S.month,S.day,S.hour,S.minute,S.second,S.nanosecond),I=S.timeZoneOffsetSeconds!=null?S.timeZoneOffsetSeconds:b(S.timeZoneId,P,S.nanosecond);S.timeZoneOffsetSeconds==null&&v.warn('DateTime objects without "timeZoneOffsetSeconds" property are prune to bugs related to ambiguous times. For instance, 2022-10-30T2:30:00[Europe/Berlin] could be GMT+1 or GMT+2.');var C=P.subtract(I),R=(0,n.int)(S.nanosecond),A=S.timeZoneId;return new r.structure.Structure(d,[C,R,A])}})}function b(h,v,w){var E=f(h,v,w),O=u(E.year,E.month,E.day,E.hour,E.minute,E.second,w),S=O.subtract(v),P=v.subtract(S),I=f(h,P,w),C=u(I.year,I.month,I.day,I.hour,I.minute,I.second,w),R=C.subtract(P);return R}var m=new Map;function _(h){if(!m.has(h)){var v=new Intl.DateTimeFormat("en-US",{timeZone:h,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"});m.set(h,v)}return m.get(h)}function f(h,v,w){var E=_(h),O=(0,n.int)(v).multiply(1e3).add((0,n.int)(w).div(1e6)).toNumber(),S=E.formatToParts(O),P=S.reduce(function(C,R){return R.type==="era"?C.adjustEra=R.value.toUpperCase()==="B"?function(A){return A.subtract(1).negate()}:a.identity:R.type==="hour"?C.hour=(0,n.int)(R.value).modulo(24):R.type!=="literal"&&(C[R.type]=(0,n.int)(R.value)),C},{});P.year=P.adjustEra(P.year);var I=u(P.year,P.month,P.day,P.hour,P.minute,P.second,P.nanosecond);return P.timeZoneOffsetSeconds=I.subtract(v),P.hour=P.hour.modulo(24),P}function y(h){var v=h.disableLosslessIntegers,w=h.useBigInt,E=i.default.createDateTimeWithOffsetTransformer(h);return E.extendsWith({signature:s,toStructure:function(O){var S=u(O.year,O.month,O.day,O.hour,O.minute,O.second,O.nanosecond),P=(0,n.int)(O.nanosecond),I=(0,n.int)(O.timeZoneOffsetSeconds),C=S.subtract(I);return new r.structure.Structure(s,[C,P,I])},fromStructure:function(O){r.structure.verifyStructSize("DateTimeWithZoneOffset",l,O.size);var S=e(O.fields,3),P=S[0],I=S[1],C=S[2],R=(0,n.int)(P).add(C),A=(0,o.epochSecondAndNanoToLocalDateTime)(R,I),D=new n.DateTime(A.year,A.month,A.day,A.hour,A.minute,A.second,A.nanosecond,C,null);return g(D,v,w)}})}function g(h,v,w){if(!v&&!w)return h;var E=function(I){return w?I.toBigInt():I.toNumberOrInfinity()},O=Object.create(Object.getPrototypeOf(h));for(var S in h)if(Object.prototype.hasOwnProperty.call(h,S)===!0){var P=h[S];O[S]=(0,n.isInt)(P)?E(P):P}return Object.freeze(O),O}return jn.default={createDateTimeWithZoneIdTransformer:p,createDateTimeWithOffsetTransformer:y},jn}var Fg;function Xh(){if(Fg)return dr;Fg=1;var e=dr&&dr.__extends||(function(){var m=function(_,f){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,g){y.__proto__=g}||function(y,g){for(var h in g)Object.prototype.hasOwnProperty.call(g,h)&&(y[h]=g[h])},m(_,f)};return function(_,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");m(_,f);function y(){this.constructor=_}_.prototype=f===null?Object.create(f):(y.prototype=f.prototype,new y)}})(),t=dr&&dr.__assign||function(){return t=Object.assign||function(m){for(var _,f=1,y=arguments.length;f<y;f++){_=arguments[f];for(var g in _)Object.prototype.hasOwnProperty.call(_,g)&&(m[g]=_[g])}return m},t.apply(this,arguments)},r=dr&&dr.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(dr,"__esModule",{value:!0});var n=r(wE()),i=r(It()),o=pt(),a=pi(),u=r(OE()),s=r(Zh()),l=r(qe()),d=ae(),c=d.internal.bookmarks.Bookmarks,p=d.internal.constants.BOLT_PROTOCOL_V4_3,b=(function(m){e(_,m);function _(){return m!==null&&m.apply(this,arguments)||this}return Object.defineProperty(_.prototype,"version",{get:function(){return p},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"transformer",{get:function(){var f=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(y){return y(f._config,f._log)}))),this._transformer},enumerable:!1,configurable:!0}),_.prototype.requestRoutingInformation=function(f){var y=f.routingContext,g=y===void 0?{}:y,h=f.databaseName,v=h===void 0?null:h,w=f.sessionContext,E=w===void 0?{}:w,O=f.onError,S=f.onCompleted,P=new o.RouteObserver({onProtocolError:this._onProtocolError,onError:O,onCompleted:S}),I=E.bookmarks||c.empty();return this.write(i.default.route(g,I.values(),v),P,!0),P},_.prototype.initialize=function(f){var y=this,g=f===void 0?{}:f,h=g.userAgent;g.boltAgent;var v=g.authToken,w=g.notificationFilter,E=g.onError,O=g.onComplete,S=new o.LoginObserver({onError:function(P){return y._onLoginError(P,E)},onCompleted:function(P){return P.patch_bolt!==void 0&&y._applyPatches(P.patch_bolt),y._onLoginCompleted(P,v,O)}});return(0,a.assertNotificationFilterIsEmpty)(w,this._onProtocolError,S),this.write(i.default.hello(h,v,this._serversideRouting,["utc"]),S,!0),S},_.prototype._applyPatches=function(f){f.includes("utc")&&this._applyUtcPatch()},_.prototype._applyUtcPatch=function(){var f=this;this._transformer=new l.default(Object.values(t(t({},u.default),s.default)).map(function(y){return y(f._config,f._log)}))},_})(n.default);return dr.default=b,dr}var hr={},Vg;function EE(){if(Vg)return hr;Vg=1;var e=hr&&hr.__extends||(function(){var f=function(y,g){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&(h[w]=v[w])},f(y,g)};return function(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");f(y,g);function h(){this.constructor=y}y.prototype=g===null?Object.create(g):(h.prototype=g.prototype,new h)}})(),t=hr&&hr.__assign||function(){return t=Object.assign||function(f){for(var y,g=1,h=arguments.length;g<h;g++){y=arguments[g];for(var v in y)Object.prototype.hasOwnProperty.call(y,v)&&(f[v]=y[v])}return f},t.apply(this,arguments)},r=hr&&hr.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(hr,"__esModule",{value:!0});var n=r(Xh()),i=ae(),o=r(It()),a=pt(),u=pi(),s=r(Yh()),l=r(Zh()),d=r(qe()),c=i.internal.constants,p=c.BOLT_PROTOCOL_V4_4,b=c.FETCH_ALL,m=i.internal.bookmarks.Bookmarks,_=(function(f){e(y,f);function y(){return f!==null&&f.apply(this,arguments)||this}return Object.defineProperty(y.prototype,"version",{get:function(){return p},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"transformer",{get:function(){var g=this;return this._transformer===void 0&&(this._transformer=new d.default(Object.values(s.default).map(function(h){return h(g._config,g._log)}))),this._transformer},enumerable:!1,configurable:!0}),y.prototype.requestRoutingInformation=function(g){var h=g.routingContext,v=h===void 0?{}:h,w=g.databaseName,E=w===void 0?null:w,O=g.impersonatedUser,S=O===void 0?null:O,P=g.sessionContext,I=P===void 0?{}:P,C=g.onError,R=g.onCompleted,A=new a.RouteObserver({onProtocolError:this._onProtocolError,onError:C,onCompleted:R}),D=I.bookmarks||m.empty();return this.write(o.default.routeV4x4(v,D.values(),{databaseName:E,impersonatedUser:S}),A,!0),A},y.prototype.run=function(g,h,v){var w=v===void 0?{}:v,E=w.bookmarks,O=w.txConfig,S=w.database,P=w.mode,I=w.impersonatedUser,C=w.notificationFilter,R=w.beforeKeys,A=w.afterKeys,D=w.beforeError,j=w.afterError,U=w.beforeComplete,B=w.afterComplete,q=w.flush,T=q===void 0?!0:q,k=w.reactive,M=k===void 0?!1:k,V=w.fetchSize,z=V===void 0?b:V,F=w.highRecordWatermark,W=F===void 0?Number.MAX_VALUE:F,Y=w.lowRecordWatermark,K=Y===void 0?Number.MAX_VALUE:Y,N=new a.ResultStreamObserver({server:this._server,reactive:M,fetchSize:z,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:R,afterKeys:A,beforeError:D,afterError:j,beforeComplete:U,afterComplete:B,highRecordWatermark:W,lowRecordWatermark:K});(0,u.assertNotificationFilterIsEmpty)(C,this._onProtocolError,N);var x=M;return this.write(o.default.runWithMetadata(g,h,{bookmarks:E,txConfig:O,database:S,mode:P,impersonatedUser:I}),N,x&&T),M||this.write(o.default.pull({n:z}),N,T),N},y.prototype.beginTransaction=function(g){var h=g===void 0?{}:g,v=h.bookmarks,w=h.txConfig,E=h.database,O=h.mode,S=h.impersonatedUser,P=h.notificationFilter,I=h.beforeError,C=h.afterError,R=h.beforeComplete,A=h.afterComplete,D=new a.ResultStreamObserver({server:this._server,beforeError:I,afterError:C,beforeComplete:R,afterComplete:A});return D.prepareToHandleSingleResponse(),(0,u.assertNotificationFilterIsEmpty)(P,this._onProtocolError,D),this.write(o.default.begin({bookmarks:v,txConfig:w,database:E,mode:O,impersonatedUser:S}),D,!0),D},y.prototype._applyUtcPatch=function(){var g=this;this._transformer=new d.default(Object.values(t(t({},s.default),l.default)).map(function(h){return h(g._config,g._log)}))},y})(n.default);return hr.default=_,hr}var kn={},vr={},$g;function SE(){if($g)return vr;$g=1;var e=vr&&vr.__assign||function(){return e=Object.assign||function(b){for(var m,_=1,f=arguments.length;_<f;_++){m=arguments[_];for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(b[y]=m[y])}return b},e.apply(this,arguments)},t=vr&&vr.__read||function(b,m){var _=typeof Symbol=="function"&&b[Symbol.iterator];if(!_)return b;var f=_.call(b),y,g=[],h;try{for(;(m===void 0||m-- >0)&&!(y=f.next()).done;)g.push(y.value)}catch(v){h={error:v}}finally{try{y&&!y.done&&(_=f.return)&&_.call(f)}finally{if(h)throw h.error}}return g},r=vr&&vr.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(vr,"__esModule",{value:!0});var n=_i(),i=ae(),o=r(Yh()),a=r(Zh()),u=4,s=8,l=4;function d(b){var m=o.default.createNodeTransformer(b);return m.extendsWith({fromStructure:function(_){n.structure.verifyStructSize("Node",u,_.size);var f=t(_.fields,4),y=f[0],g=f[1],h=f[2],v=f[3];return new i.Node(y,g,h,v)}})}function c(b){var m=o.default.createRelationshipTransformer(b);return m.extendsWith({fromStructure:function(_){n.structure.verifyStructSize("Relationship",s,_.size);var f=t(_.fields,8),y=f[0],g=f[1],h=f[2],v=f[3],w=f[4],E=f[5],O=f[6],S=f[7];return new i.Relationship(y,g,h,v,w,E,O,S)}})}function p(b){var m=o.default.createUnboundRelationshipTransformer(b);return m.extendsWith({fromStructure:function(_){n.structure.verifyStructSize("UnboundRelationship",l,_.size);var f=t(_.fields,4),y=f[0],g=f[1],h=f[2],v=f[3];return new i.UnboundRelationship(y,g,h,v)}})}return vr.default=e(e(e({},o.default),a.default),{createNodeTransformer:d,createRelationshipTransformer:c,createUnboundRelationshipTransformer:p}),vr}var Wg;function PE(){if(Wg)return kn;Wg=1;var e=kn&&kn.__extends||(function(){var c=function(p,b){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,_){m.__proto__=_}||function(m,_){for(var f in _)Object.prototype.hasOwnProperty.call(_,f)&&(m[f]=_[f])},c(p,b)};return function(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");c(p,b);function m(){this.constructor=p}p.prototype=b===null?Object.create(b):(m.prototype=b.prototype,new m)}})(),t=kn&&kn.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(kn,"__esModule",{value:!0});var r=t(EE()),n=pi(),i=t(SE()),o=t(qe()),a=t(It()),u=pt(),s=ae(),l=s.internal.constants.BOLT_PROTOCOL_V5_0,d=(function(c){e(p,c);function p(){return c!==null&&c.apply(this,arguments)||this}return Object.defineProperty(p.prototype,"version",{get:function(){return l},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"transformer",{get:function(){var b=this;return this._transformer===void 0&&(this._transformer=new o.default(Object.values(i.default).map(function(m){return m(b._config,b._log)}))),this._transformer},enumerable:!1,configurable:!0}),p.prototype.initialize=function(b){var m=this,_=b===void 0?{}:b,f=_.userAgent;_.boltAgent;var y=_.authToken,g=_.notificationFilter,h=_.onError,v=_.onComplete,w=new u.LoginObserver({onError:function(E){return m._onLoginError(E,h)},onCompleted:function(E){return m._onLoginCompleted(E,y,v)}});return(0,n.assertNotificationFilterIsEmpty)(g,this._onProtocolError,w),this.write(a.default.hello(f,y,this._serversideRouting),w,!0),w},p})(r.default);return kn.default=d,kn}var pr={},Mn={},Hg;function TE(){if(Hg)return Mn;Hg=1;var e=Mn&&Mn.__assign||function(){return e=Object.assign||function(n){for(var i,o=1,a=arguments.length;o<a;o++){i=arguments[o];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])}return n},e.apply(this,arguments)},t=Mn&&Mn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Mn,"__esModule",{value:!0});var r=t(SE());return Mn.default=e({},r.default),Mn}var zg;function CE(){if(zg)return pr;zg=1;var e=pr&&pr.__extends||(function(){var p=function(b,m){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,f){_.__proto__=f}||function(_,f){for(var y in f)Object.prototype.hasOwnProperty.call(f,y)&&(_[y]=f[y])},p(b,m)};return function(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");p(b,m);function _(){this.constructor=b}b.prototype=m===null?Object.create(m):(_.prototype=m.prototype,new _)}})(),t=pr&&pr.__assign||function(){return t=Object.assign||function(p){for(var b,m=1,_=arguments.length;m<_;m++){b=arguments[m];for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(p[f]=b[f])}return p},t.apply(this,arguments)},r=pr&&pr.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(pr,"__esModule",{value:!0});var n=r(PE()),i=pi(),o=r(TE()),a=r(qe()),u=r(It()),s=pt(),l=ae(),d=l.internal.constants.BOLT_PROTOCOL_V5_1,c=(function(p){e(b,p);function b(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(b.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"transformer",{get:function(){var m=this;return this._transformer===void 0&&(this._transformer=new a.default(Object.values(o.default).map(function(_){return _(m._config,m._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),b.prototype.initialize=function(m){var _=this,f=m===void 0?{}:m,y=f.userAgent;f.boltAgent;var g=f.authToken,h=f.notificationFilter,v=f.onError,w=f.onComplete,E={},O=new s.LoginObserver({onError:function(S){return _._onLoginError(S,v)},onCompleted:function(S){return E.metadata=S,_._onLoginCompleted(S)}});return(0,i.assertNotificationFilterIsEmpty)(h,this._onProtocolError,O),this.write(u.default.hello5x1(y,this._serversideRouting),O,!1),this.logon({authToken:g,onComplete:function(S){return w(t(t({},S),E.metadata))},onError:v,flush:!0})},b.prototype.logon=function(m){var _=this,f=m===void 0?{}:m,y=f.authToken,g=f.onComplete,h=f.onError,v=f.flush,w=new s.LoginObserver({onCompleted:function(){return _._onLoginCompleted(null,y,g)},onError:function(E){return _._onLoginError(E,h)}});return this.write(u.default.logon(y),w,v),w},b.prototype.logoff=function(m){var _=m===void 0?{}:m,f=_.onComplete,y=_.onError,g=_.flush,h=new s.LogoffObserver({onCompleted:f,onError:y});return this.write(u.default.logoff(),h,g),h},b})(n.default);return pr.default=c,pr}var _r={},Dn={},Kg;function RE(){if(Kg)return Dn;Kg=1;var e=Dn&&Dn.__assign||function(){return e=Object.assign||function(n){for(var i,o=1,a=arguments.length;o<a;o++){i=arguments[o];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])}return n},e.apply(this,arguments)},t=Dn&&Dn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Dn,"__esModule",{value:!0});var r=t(TE());return Dn.default=e({},r.default),Dn}var Gg;function AE(){if(Gg)return _r;Gg=1;var e=_r&&_r.__extends||(function(){var b=function(m,_){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,y){f.__proto__=y}||function(f,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(f[g]=y[g])},b(m,_)};return function(m,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");b(m,_);function f(){this.constructor=m}m.prototype=_===null?Object.create(_):(f.prototype=_.prototype,new f)}})(),t=_r&&_r.__assign||function(){return t=Object.assign||function(b){for(var m,_=1,f=arguments.length;_<f;_++){m=arguments[_];for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(b[y]=m[y])}return b},t.apply(this,arguments)},r=_r&&_r.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(_r,"__esModule",{value:!0});var n=r(CE()),i=r(RE()),o=r(qe()),a=r(It()),u=pt(),s=ae(),l=s.internal.constants,d=l.BOLT_PROTOCOL_V5_2,c=l.FETCH_ALL,p=(function(b){e(m,b);function m(){return b!==null&&b.apply(this,arguments)||this}return Object.defineProperty(m.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"transformer",{get:function(){var _=this;return this._transformer===void 0&&(this._transformer=new o.default(Object.values(i.default).map(function(f){return f(_._config,_._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),m.prototype.initialize=function(_){var f=this,y=_===void 0?{}:_,g=y.userAgent;y.boltAgent;var h=y.authToken,v=y.notificationFilter,w=y.onError,E=y.onComplete,O={},S=new u.LoginObserver({onError:function(P){return f._onLoginError(P,w)},onCompleted:function(P){return O.metadata=P,f._onLoginCompleted(P)}});return this.write(a.default.hello5x2(g,v,this._serversideRouting),S,!1),this.logon({authToken:h,onComplete:function(P){return E(t(t({},P),O.metadata))},onError:w,flush:!0})},m.prototype.beginTransaction=function(_){var f=_===void 0?{}:_,y=f.bookmarks,g=f.txConfig,h=f.database,v=f.mode,w=f.impersonatedUser,E=f.notificationFilter,O=f.beforeError,S=f.afterError,P=f.beforeComplete,I=f.afterComplete,C=new u.ResultStreamObserver({server:this._server,beforeError:O,afterError:S,beforeComplete:P,afterComplete:I});return C.prepareToHandleSingleResponse(),this.write(a.default.begin({bookmarks:y,txConfig:g,database:h,mode:v,impersonatedUser:w,notificationFilter:E}),C,!0),C},m.prototype.run=function(_,f,y){var g=y===void 0?{}:y,h=g.bookmarks,v=g.txConfig,w=g.database,E=g.mode,O=g.impersonatedUser,S=g.notificationFilter,P=g.beforeKeys,I=g.afterKeys,C=g.beforeError,R=g.afterError,A=g.beforeComplete,D=g.afterComplete,j=g.flush,U=j===void 0?!0:j,B=g.reactive,q=B===void 0?!1:B,T=g.fetchSize,k=T===void 0?c:T,M=g.highRecordWatermark,V=M===void 0?Number.MAX_VALUE:M,z=g.lowRecordWatermark,F=z===void 0?Number.MAX_VALUE:z,W=new u.ResultStreamObserver({server:this._server,reactive:q,fetchSize:k,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:P,afterKeys:I,beforeError:C,afterError:R,beforeComplete:A,afterComplete:D,highRecordWatermark:V,lowRecordWatermark:F}),Y=q;return this.write(a.default.runWithMetadata(_,f,{bookmarks:h,txConfig:v,database:w,mode:E,impersonatedUser:O,notificationFilter:S}),W,Y&&U),q||this.write(a.default.pull({n:k}),W,U),W},m})(n.default);return _r.default=p,_r}var br={},Ln={},Yg;function IE(){if(Yg)return Ln;Yg=1;var e=Ln&&Ln.__assign||function(){return e=Object.assign||function(n){for(var i,o=1,a=arguments.length;o<a;o++){i=arguments[o];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])}return n},e.apply(this,arguments)},t=Ln&&Ln.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ln,"__esModule",{value:!0});var r=t(RE());return Ln.default=e({},r.default),Ln}var Zg;function jE(){if(Zg)return br;Zg=1;var e=br&&br.__extends||(function(){var c=function(p,b){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,_){m.__proto__=_}||function(m,_){for(var f in _)Object.prototype.hasOwnProperty.call(_,f)&&(m[f]=_[f])},c(p,b)};return function(p,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");c(p,b);function m(){this.constructor=p}p.prototype=b===null?Object.create(b):(m.prototype=b.prototype,new m)}})(),t=br&&br.__assign||function(){return t=Object.assign||function(c){for(var p,b=1,m=arguments.length;b<m;b++){p=arguments[b];for(var _ in p)Object.prototype.hasOwnProperty.call(p,_)&&(c[_]=p[_])}return c},t.apply(this,arguments)},r=br&&br.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(br,"__esModule",{value:!0});var n=r(AE()),i=r(IE()),o=r(qe()),a=r(It()),u=pt(),s=ae(),l=s.internal.constants.BOLT_PROTOCOL_V5_3,d=(function(c){e(p,c);function p(){return c!==null&&c.apply(this,arguments)||this}return Object.defineProperty(p.prototype,"version",{get:function(){return l},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"transformer",{get:function(){var b=this;return this._transformer===void 0&&(this._transformer=new o.default(Object.values(i.default).map(function(m){return m(b._config,b._log)}))),this._transformer},enumerable:!1,configurable:!0}),p.prototype.initialize=function(b){var m=this,_=b===void 0?{}:b,f=_.userAgent,y=_.boltAgent,g=_.authToken,h=_.notificationFilter,v=_.onError,w=_.onComplete,E={},O=new u.LoginObserver({onError:function(S){return m._onLoginError(S,v)},onCompleted:function(S){return E.metadata=S,m._onLoginCompleted(S)}});return this.write(a.default.hello5x3(f,y,h,this._serversideRouting),O,!1),this.logon({authToken:g,onComplete:function(S){return w(t(t({},S),E.metadata))},onError:v,flush:!0})},p})(n.default);return br.default=d,br}var Un={},Bn={},Xg;function NE(){if(Xg)return Bn;Xg=1;var e=Bn&&Bn.__assign||function(){return e=Object.assign||function(n){for(var i,o=1,a=arguments.length;o<a;o++){i=arguments[o];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])}return n},e.apply(this,arguments)},t=Bn&&Bn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Bn,"__esModule",{value:!0});var r=t(IE());return Bn.default=e({},r.default),Bn}var Qg;function kE(){if(Qg)return Un;Qg=1;var e=Un&&Un.__extends||(function(){var d=function(c,p){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,m){b.__proto__=m}||function(b,m){for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&(b[_]=m[_])},d(c,p)};return function(c,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");d(c,p);function b(){this.constructor=c}c.prototype=p===null?Object.create(p):(b.prototype=p.prototype,new b)}})(),t=Un&&Un.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Un,"__esModule",{value:!0});var r=t(jE()),n=t(NE()),i=t(It()),o=pt(),a=t(qe()),u=ae(),s=u.internal.constants.BOLT_PROTOCOL_V5_4,l=(function(d){e(c,d);function c(){return d!==null&&d.apply(this,arguments)||this}return Object.defineProperty(c.prototype,"version",{get:function(){return s},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"transformer",{get:function(){var p=this;return this._transformer===void 0&&(this._transformer=new a.default(Object.values(n.default).map(function(b){return b(p._config,p._log)}))),this._transformer},enumerable:!1,configurable:!0}),c.prototype.telemetry=function(p,b){var m=p.api,_=b===void 0?{}:b,f=_.onError,y=_.onCompleted,g=new o.TelemetryObserver({onCompleted:y,onError:f});return this.write(i.default.telemetry({api:m}),g,!1),g},c})(r.default);return Un.default=l,Un}var yr={},qn={},Jg;function ME(){if(Jg)return qn;Jg=1;var e=qn&&qn.__assign||function(){return e=Object.assign||function(n){for(var i,o=1,a=arguments.length;o<a;o++){i=arguments[o];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])}return n},e.apply(this,arguments)},t=qn&&qn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(qn,"__esModule",{value:!0});var r=t(NE());return qn.default=e({},r.default),qn}var e0;function DE(){if(e0)return yr;e0=1;var e=yr&&yr.__extends||(function(){var m=function(_,f){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,g){y.__proto__=g}||function(y,g){for(var h in g)Object.prototype.hasOwnProperty.call(g,h)&&(y[h]=g[h])},m(_,f)};return function(_,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");m(_,f);function y(){this.constructor=_}_.prototype=f===null?Object.create(f):(y.prototype=f.prototype,new y)}})(),t=yr&&yr.__assign||function(){return t=Object.assign||function(m){for(var _,f=1,y=arguments.length;f<y;f++){_=arguments[f];for(var g in _)Object.prototype.hasOwnProperty.call(_,g)&&(m[g]=_[g])}return m},t.apply(this,arguments)},r=yr&&yr.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(yr,"__esModule",{value:!0});var n=r(kE()),i=r(ME()),o=r(qe()),a=r(It()),u=pt(),s=ae(),l=s.internal.constants,d=l.BOLT_PROTOCOL_V5_5,c=l.FETCH_ALL,p=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),b=(function(m){e(_,m);function _(){return m!==null&&m.apply(this,arguments)||this}return Object.defineProperty(_.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"transformer",{get:function(){var f=this;return this._transformer===void 0&&(this._transformer=new o.default(Object.values(i.default).map(function(y){return y(f._config,f._log)}))),this._transformer},enumerable:!1,configurable:!0}),_.prototype.initialize=function(f){var y=this,g=f===void 0?{}:f,h=g.userAgent,v=g.boltAgent,w=g.authToken,E=g.notificationFilter,O=g.onError,S=g.onComplete,P={},I=new u.LoginObserver({onError:function(C){return y._onLoginError(C,O)},onCompleted:function(C){return P.metadata=C,y._onLoginCompleted(C)}});return this.write(a.default.hello5x5(h,v,E,this._serversideRouting),I,!1),this.logon({authToken:w,onComplete:function(C){return S(t(t({},C),P.metadata))},onError:O,flush:!0})},_.prototype.beginTransaction=function(f){var y=f===void 0?{}:f,g=y.bookmarks,h=y.txConfig,v=y.database,w=y.mode,E=y.impersonatedUser,O=y.notificationFilter,S=y.beforeError,P=y.afterError,I=y.beforeComplete,C=y.afterComplete,R=new u.ResultStreamObserver({server:this._server,beforeError:S,afterError:P,beforeComplete:I,afterComplete:C});return R.prepareToHandleSingleResponse(),this.write(a.default.begin5x5({bookmarks:g,txConfig:h,database:v,mode:w,impersonatedUser:E,notificationFilter:O}),R,!0),R},_.prototype.run=function(f,y,g){var h=g===void 0?{}:g,v=h.bookmarks,w=h.txConfig,E=h.database,O=h.mode,S=h.impersonatedUser,P=h.notificationFilter,I=h.beforeKeys,C=h.afterKeys,R=h.beforeError,A=h.afterError,D=h.beforeComplete,j=h.afterComplete,U=h.flush,B=U===void 0?!0:U,q=h.reactive,T=q===void 0?!1:q,k=h.fetchSize,M=k===void 0?c:k,V=h.highRecordWatermark,z=V===void 0?Number.MAX_VALUE:V,F=h.lowRecordWatermark,W=F===void 0?Number.MAX_VALUE:F,Y=new u.ResultStreamObserver({server:this._server,reactive:T,fetchSize:M,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:I,afterKeys:C,beforeError:R,afterError:A,beforeComplete:D,afterComplete:j,highRecordWatermark:z,lowRecordWatermark:W,enrichMetadata:this._enrichMetadata}),K=T;return this.write(a.default.runWithMetadata5x5(f,y,{bookmarks:v,txConfig:w,database:E,mode:O,impersonatedUser:S,notificationFilter:P}),Y,K&&B),T||this.write(a.default.pull({n:M}),Y,B),Y},_.prototype._enrichMetadata=function(f){return Array.isArray(f.statuses)&&(f.statuses=f.statuses.map(function(y){return t(t({},y),{description:y.neo4j_code!=null?y.status_description:y.description,diagnostic_record:y.diagnostic_record!==null?t(t({},p),y.diagnostic_record):null})})),f},_})(n.default);return yr.default=b,yr}var mr={},xn={},t0;function LE(){if(t0)return xn;t0=1;var e=xn&&xn.__assign||function(){return e=Object.assign||function(n){for(var i,o=1,a=arguments.length;o<a;o++){i=arguments[o];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])}return n},e.apply(this,arguments)},t=xn&&xn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(xn,"__esModule",{value:!0});var r=t(ME());return xn.default=e({},r.default),xn}var r0;function UE(){if(r0)return mr;r0=1;var e=mr&&mr.__extends||(function(){var d=function(c,p){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,m){b.__proto__=m}||function(b,m){for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&(b[_]=m[_])},d(c,p)};return function(c,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");d(c,p);function b(){this.constructor=c}c.prototype=p===null?Object.create(p):(b.prototype=p.prototype,new b)}})(),t=mr&&mr.__assign||function(){return t=Object.assign||function(d){for(var c,p=1,b=arguments.length;p<b;p++){c=arguments[p];for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&(d[m]=c[m])}return d},t.apply(this,arguments)},r=mr&&mr.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(mr,"__esModule",{value:!0});var n=r(DE()),i=r(LE()),o=r(qe()),a=ae(),u=a.internal.constants.BOLT_PROTOCOL_V5_6,s=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),l=(function(d){e(c,d);function c(){return d!==null&&d.apply(this,arguments)||this}return Object.defineProperty(c.prototype,"version",{get:function(){return u},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"transformer",{get:function(){var p=this;return this._transformer===void 0&&(this._transformer=new o.default(Object.values(i.default).map(function(b){return b(p._config,p._log)}))),this._transformer},enumerable:!1,configurable:!0}),c.prototype._enrichMetadata=function(p){return Array.isArray(p.statuses)&&(p.statuses=p.statuses.map(function(b){return t(t({},b),{diagnostic_record:b.diagnostic_record!==null?t(t({},s),b.diagnostic_record):null})})),p},c})(n.default);return mr.default=l,mr}var gr={},Fn={},n0;function BE(){if(n0)return Fn;n0=1;var e=Fn&&Fn.__assign||function(){return e=Object.assign||function(n){for(var i,o=1,a=arguments.length;o<a;o++){i=arguments[o];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])}return n},e.apply(this,arguments)},t=Fn&&Fn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Fn,"__esModule",{value:!0});var r=t(LE());return Fn.default=e({},r.default),Fn}var i0;function qE(){if(i0)return gr;i0=1;var e=gr&&gr.__extends||(function(){var d=function(c,p){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,m){b.__proto__=m}||function(b,m){for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&(b[_]=m[_])},d(c,p)};return function(c,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");d(c,p);function b(){this.constructor=c}c.prototype=p===null?Object.create(p):(b.prototype=p.prototype,new b)}})(),t=gr&&gr.__assign||function(){return t=Object.assign||function(d){for(var c,p=1,b=arguments.length;p<b;p++){c=arguments[p];for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&(d[m]=c[m])}return d},t.apply(this,arguments)},r=gr&&gr.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(gr,"__esModule",{value:!0});var n=r(UE()),i=r(BE()),o=r(qe()),a=ae(),u=a.internal.constants.BOLT_PROTOCOL_V5_7,s=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),l=(function(d){e(c,d);function c(){return d!==null&&d.apply(this,arguments)||this}return Object.defineProperty(c.prototype,"version",{get:function(){return u},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"transformer",{get:function(){var p=this;return this._transformer===void 0&&(this._transformer=new o.default(Object.values(i.default).map(function(b){return b(p._config,p._log)}))),this._transformer},enumerable:!1,configurable:!0}),c.prototype.enrichErrorMetadata=function(p){return t(t({},p),{cause:p.cause!==null&&p.cause!==void 0?this.enrichErrorMetadata(p.cause):null,code:p.neo4j_code,diagnostic_record:p.diagnostic_record!==null?t(t({},s),p.diagnostic_record):null})},c})(n.default);return gr.default=l,gr}var Vn={},$n={},o0;function xR(){if(o0)return $n;o0=1;var e=$n&&$n.__assign||function(){return e=Object.assign||function(n){for(var i,o=1,a=arguments.length;o<a;o++){i=arguments[o];for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])}return n},e.apply(this,arguments)},t=$n&&$n.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty($n,"__esModule",{value:!0});var r=t(BE());return $n.default=e({},r.default),$n}var a0;function FR(){if(a0)return Vn;a0=1;var e=Vn&&Vn.__extends||(function(){var p=function(b,m){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,f){_.__proto__=f}||function(_,f){for(var y in f)Object.prototype.hasOwnProperty.call(f,y)&&(_[y]=f[y])},p(b,m)};return function(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");p(b,m);function _(){this.constructor=b}b.prototype=m===null?Object.create(m):(_.prototype=m.prototype,new _)}})(),t=Vn&&Vn.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(Vn,"__esModule",{value:!0});var r=t(qE()),n=t(xR()),i=t(qe()),o=t(It()),a=pt(),u=ae(),s=u.internal.constants,l=s.BOLT_PROTOCOL_V5_8,d=s.FETCH_ALL,c=(function(p){e(b,p);function b(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(b.prototype,"version",{get:function(){return l},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"transformer",{get:function(){var m=this;return this._transformer===void 0&&(this._transformer=new i.default(Object.values(n.default).map(function(_){return _(m._config,m._log)}))),this._transformer},enumerable:!1,configurable:!0}),b.prototype.run=function(m,_,f){var y=f===void 0?{}:f,g=y.bookmarks,h=y.txConfig,v=y.database,w=y.mode,E=y.impersonatedUser,O=y.notificationFilter,S=y.beforeKeys,P=y.afterKeys,I=y.beforeError,C=y.afterError,R=y.beforeComplete,A=y.afterComplete,D=y.flush,j=D===void 0?!0:D,U=y.reactive,B=U===void 0?!1:U,q=y.fetchSize,T=q===void 0?d:q,k=y.highRecordWatermark,M=k===void 0?Number.MAX_VALUE:k,V=y.lowRecordWatermark,z=V===void 0?Number.MAX_VALUE:V,F=y.onDb,W=new a.ResultStreamObserver({server:this._server,reactive:B,fetchSize:T,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:S,afterKeys:P,beforeError:I,afterError:C,beforeComplete:R,afterComplete:A,highRecordWatermark:M,lowRecordWatermark:z,enrichMetadata:this._enrichMetadata,onDb:F}),Y=B;return this.write(o.default.runWithMetadata5x5(m,_,{bookmarks:g,txConfig:h,database:v,mode:w,impersonatedUser:E,notificationFilter:O}),W,Y&&j),B||this.write(o.default.pull({n:T}),W,j),W},b})(r.default);return Vn.default=c,Vn}var rl={},u0;function VR(){if(u0)return rl;u0=1,Object.defineProperty(rl,"__esModule",{value:!0});var e=ae(),t=112,r=113,n=126,i=127;function o(){}function a(d){return d}var u={onNext:o,onCompleted:o,onError:o},s=(function(){function d(c){var p=c===void 0?{}:c,b=p.transformMetadata,m=p.enrichErrorMetadata,_=p.log,f=p.observer;this._pendingObservers=[],this._log=_,this._transformMetadata=b||a,this._enrichErrorMetadata=m||a,this._observer=Object.assign({onObserversCountChange:o,onError:o,onFailure:o,onErrorApplyTransformation:a},f)}return Object.defineProperty(d.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),d.prototype.handleResponse=function(c){var p=c.fields[0];switch(c.signature){case r:this._log.isDebugEnabled()&&this._log.debug("S: RECORD ".concat(e.json.stringify(c))),this._currentObserver.onNext(p);break;case t:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS ".concat(e.json.stringify(c)));try{var b=this._transformMetadata(p);this._currentObserver.onCompleted(b)}finally{this._updateCurrentObserver()}break;case i:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE ".concat(e.json.stringify(c)));try{this._currentFailure=this._handleErrorPayload(this._enrichErrorMetadata(p)),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case n:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED ".concat(e.json.stringify(c)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,e.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,e.newError)("Unknown Bolt protocol message: "+c))}},d.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onObserversCountChange(this._observersCount)},Object.defineProperty(d.prototype,"_observersCount",{get:function(){return this._currentObserver==null?this._pendingObservers.length:this._pendingObservers.length+1},enumerable:!1,configurable:!0}),d.prototype._queueObserver=function(c){return c=c||u,c.onCompleted=c.onCompleted||o,c.onError=c.onError||o,c.onNext=c.onNext||o,this._currentObserver===void 0?this._currentObserver=c:this._pendingObservers.push(c),this._observer.onObserversCountChange(this._observersCount),!0},d.prototype._notifyErrorToObservers=function(c){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(c);this._pendingObservers.length>0;){var p=this._pendingObservers.shift();p&&p.onError&&p.onError(c)}},d.prototype.hasOngoingObservableRequests=function(){return this._currentObserver!=null||this._pendingObservers.length>0},d.prototype._resetFailure=function(){this._currentFailure=null},d.prototype._handleErrorPayload=function(c){var p=l(c.code),b=c.cause!=null?this._handleErrorCause(c.cause):void 0,m=(0,e.newError)(c.message,p,b,c.gql_status,c.description,c.diagnostic_record);return this._observer.onErrorApplyTransformation(m)},d.prototype._handleErrorCause=function(c){var p=c.cause!=null?this._handleErrorCause(c.cause):void 0,b=(0,e.newGQLError)(c.message,p,c.gql_status,c.description,c.diagnostic_record);return this._observer.onErrorApplyTransformation(b)},d})();rl.default=s;function l(d){return d==="Neo.TransientError.Transaction.Terminated"?"Neo.ClientError.Transaction.Terminated":d==="Neo.TransientError.Transaction.LockClientStopped"?"Neo.ClientError.Transaction.LockClientStopped":d}return rl}var s0;function $R(){if(s0)return No;s0=1;var e=No&&No.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(No,"__esModule",{value:!0});var t=ae(),r=e(lE()),n=e(hE()),i=e(pE()),o=e(bE()),a=e(mE()),u=e(wE()),s=e(Xh()),l=e(EE()),d=e(PE()),c=e(CE()),p=e(AE()),b=e(jE()),m=e(kE()),_=e(DE()),f=e(UE()),y=e(qE()),g=e(FR());vi();var h=e(VR());function v(E){var O=E===void 0?{}:E,S=O.version,P=O.chunker,I=O.dechunker,C=O.channel,R=O.disableLosslessIntegers,A=O.useBigInt,D=O.serversideRouting,j=O.server,U=O.log,B=O.observer,q=function(T){var k=new h.default({transformMetadata:T.transformMetadata.bind(T),enrichErrorMetadata:T.enrichErrorMetadata.bind(T),log:U,observer:B});return C.onerror=B.onError.bind(B),C.onmessage=function(M){return I.write(M)},I.onmessage=function(M){try{k.handleResponse(T.unpack(M))}catch(V){return B.onError(V)}},k};return w(S,j,P,{disableLosslessIntegers:R,useBigInt:A},D,q,B.onProtocolError.bind(B),U)}No.default=v;function w(E,O,S,P,I,C,R,A){switch(E){case 1:return new r.default(O,S,P,C,A,R);case 2:return new n.default(O,S,P,C,A,R);case 3:return new i.default(O,S,P,C,A,R);case 4:return new o.default(O,S,P,C,A,R);case 4.1:return new a.default(O,S,P,C,A,R,I);case 4.2:return new u.default(O,S,P,C,A,R,I);case 4.3:return new s.default(O,S,P,C,A,R,I);case 4.4:return new l.default(O,S,P,C,A,R,I);case 5:return new d.default(O,S,P,C,A,R,I);case 5.1:return new c.default(O,S,P,C,A,R,I);case 5.2:return new p.default(O,S,P,C,A,R,I);case 5.3:return new b.default(O,S,P,C,A,R,I);case 5.4:return new m.default(O,S,P,C,A,R,I);case 5.5:return new _.default(O,S,P,C,A,R,I);case 5.6:return new f.default(O,S,P,C,A,R,I);case 5.7:return new y.default(O,S,P,C,A,R,I);case 5.8:return new g.default(O,S,P,C,A,R,I);default:throw(0,t.newError)("Unknown Bolt protocol version: "+E)}}return No}var c0;function Qh(){return c0||(c0=1,(function(e){var t=rn&&rn.__createBinding||(Object.create?(function(s,l,d,c){c===void 0&&(c=d);var p=Object.getOwnPropertyDescriptor(l,d);(!p||("get"in p?!l.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return l[d]}}),Object.defineProperty(s,c,p)}):(function(s,l,d,c){c===void 0&&(c=d),s[c]=l[d]})),r=rn&&rn.__exportStar||function(s,l){for(var d in s)d!=="default"&&!Object.prototype.hasOwnProperty.call(l,d)&&t(l,s,d)},n=rn&&rn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.RawRoutingTable=e.BoltProtocol=void 0;var i=n(UR()),o=n($R()),a=n(Xh()),u=n(oE());r(pt(),e),e.BoltProtocol=a.default,e.RawRoutingTable=u.default,e.default={handshake:i.default,create:o.default}})(rn)),rn}var ic={},Lo={},l0;function xE(){if(l0)return Lo;l0=1;var e=Lo&&Lo.__extends||(function(){var n=function(i,o){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(a[s]=u[s])},n(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");n(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}})();Object.defineProperty(Lo,"__esModule",{value:!0});var t=ae(),r=(function(n){e(i,n);function i(o){var a=n.call(this)||this;return a._connection=o,a}return i.prototype.acquireConnection=function(o){var a=o===void 0?{}:o;a.accessMode,a.database,a.bookmarks;var u=this._connection;return this._connection=null,Promise.resolve(u)},i})(t.ConnectionProvider);return Lo.default=r,Lo}var Qe={},Yt={},Uo={},f0;function Jh(){if(f0)return Uo;f0=1;var e=Uo&&Uo.__extends||(function(){var n=function(i,o){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(a[s]=u[s])},n(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");n(i,o);function a(){this.constructor=i}i.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}})();Object.defineProperty(Uo,"__esModule",{value:!0}),Qh();var t=ae(),r=(function(n){e(i,n);function i(o){var a=n.call(this)||this;return a._errorHandler=o,a}return Object.defineProperty(i.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(o){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"authToken",{get:function(){throw new Error("not implemented")},set:function(o){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"supportsReAuth",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"creationTimestamp",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"idleTimestamp",{get:function(){throw new Error("not implemented")},set:function(o){throw new Error("not implemented")},enumerable:!1,configurable:!0}),i.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(i.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(o){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),i.prototype.connect=function(o,a,u,s){throw new Error("not implemented")},i.prototype.write=function(o,a,u){throw new Error("not implemented")},i.prototype.close=function(){throw new Error("not implemented")},i.prototype.handleAndTransformError=function(o,a){return this._errorHandler?this._errorHandler.handleAndTransformError(o,a,this):o},i})(t.Connection);return Uo.default=r,Uo}var gt={},d0;function WR(){if(d0)return gt;d0=1;var e=gt&&gt.__extends||(function(){var m=function(_,f){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,g){y.__proto__=g}||function(y,g){for(var h in g)Object.prototype.hasOwnProperty.call(g,h)&&(y[h]=g[h])},m(_,f)};return function(_,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");m(_,f);function y(){this.constructor=_}_.prototype=f===null?Object.create(f):(y.prototype=f.prototype,new y)}})(),t=gt&&gt.__awaiter||function(m,_,f,y){function g(h){return h instanceof f?h:new f(function(v){v(h)})}return new(f||(f=Promise))(function(h,v){function w(S){try{O(y.next(S))}catch(P){v(P)}}function E(S){try{O(y.throw(S))}catch(P){v(P)}}function O(S){S.done?h(S.value):g(S.value).then(w,E)}O((y=y.apply(m,_||[])).next())})},r=gt&&gt.__generator||function(m,_){var f={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},y,g,h,v;return v={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function w(O){return function(S){return E([O,S])}}function E(O){if(y)throw new TypeError("Generator is already executing.");for(;v&&(v=0,O[0]&&(f=0)),f;)try{if(y=1,g&&(h=O[0]&2?g.return:O[0]?g.throw||((h=g.return)&&h.call(g),0):g.next)&&!(h=h.call(g,O[1])).done)return h;switch(g=0,h&&(O=[O[0]&2,h.value]),O[0]){case 0:case 1:h=O;break;case 4:return f.label++,{value:O[1],done:!1};case 5:f.label++,g=O[1],O=[0];continue;case 7:O=f.ops.pop(),f.trys.pop();continue;default:if(h=f.trys,!(h=h.length>0&&h[h.length-1])&&(O[0]===6||O[0]===2)){f=0;continue}if(O[0]===3&&(!h||O[1]>h[0]&&O[1]<h[3])){f.label=O[1];break}if(O[0]===6&&f.label<h[1]){f.label=h[1],h=O;break}if(h&&f.label<h[2]){f.label=h[2],f.ops.push(O);break}h[2]&&f.ops.pop(),f.trys.pop();continue}O=_.call(m,f)}catch(S){O=[6,S],g=0}finally{y=h=0}if(O[0]&5)throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}},n=gt&&gt.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(gt,"__esModule",{value:!0}),gt.createChannelConnection=void 0;var i=vi(),o=ae(),a=n(Jh()),u=n(Qh()),s=o.error.PROTOCOL_ERROR,l=o.internal.logger.Logger,d=0;function c(m,_,f,y,g,h,v,w){h===void 0&&(h=null),w===void 0&&(w=function(S){return new i.Channel(S)});var E=new i.ChannelConfig(m,_,f.errorCode(),g),O=w(E);return u.default.handshake(O,y).then(function(S){var P=S.protocolVersion,I=S.consumeRemainingBuffer,C=new i.Chunker(O),R=new i.Dechunker,A=function(j){return u.default.create({version:P,channel:O,chunker:C,dechunker:R,disableLosslessIntegers:_.disableLosslessIntegers,useBigInt:_.useBigInt,serversideRouting:h,server:j.server,log:j.logger,observer:{onObserversCountChange:j._handleOngoingRequestsNumberChange.bind(j),onError:j._handleFatalError.bind(j),onFailure:j._resetOnFailure.bind(j),onProtocolError:j._handleProtocolError.bind(j),onErrorApplyTransformation:function(U){return j.handleAndTransformError(U,j._address)}}})},D=new p(O,f,m,y,_.disableLosslessIntegers,h,C,_.notificationFilter,A,_.telemetryDisabled,v);return I(function(j){return R.write(j)}),D}).catch(function(S){return O.close().then(function(){throw S})})}gt.createChannelConnection=c;var p=(function(m){e(_,m);function _(f,y,g,h,v,w,E,O,S,P,I){v===void 0&&(v=!1),w===void 0&&(w=null),I===void 0&&(I=function(R){});var C=m.call(this,y)||this;return C._authToken=null,C._idle=!1,C._reseting=!1,C._resetObservers=[],C._id=d++,C._address=g,C._server={address:g.asHostPort()},C._creationTimestamp=Date.now(),C._disableLosslessIntegers=v,C._ch=f,C._chunker=E,C._log=b(C,h),C._serversideRouting=w,C._notificationFilter=O,C._telemetryDisabledDriverConfig=P===!0,C._telemetryDisabledConnection=!0,C._ssrCallback=I,C._dbConnectionId=null,C._protocol=S(C),C._isBroken=!1,C._log.isDebugEnabled()&&C._log.debug("created towards ".concat(g)),C}return _.prototype.beginTransaction=function(f){return this._sendTelemetryIfEnabled(f),this._protocol.beginTransaction(f)},_.prototype.run=function(f,y,g){return this._sendTelemetryIfEnabled(g),this._protocol.run(f,y,g)},_.prototype._sendTelemetryIfEnabled=function(f){this._telemetryDisabledConnection||this._telemetryDisabledDriverConfig||f==null||f.apiTelemetryConfig==null||this._protocol.telemetry({api:f.apiTelemetryConfig.api},{onCompleted:f.apiTelemetryConfig.onTelemetrySuccess,onError:f.beforeError})},_.prototype.commitTransaction=function(f){return this._protocol.commitTransaction(f)},_.prototype.rollbackTransaction=function(f){return this._protocol.rollbackTransaction(f)},_.prototype.getProtocolVersion=function(){return this._protocol.version},Object.defineProperty(_.prototype,"authToken",{get:function(){return this._authToken},set:function(f){this._authToken=f},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"supportsReAuth",{get:function(){return this._protocol.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(f){this._dbConnectionId=f},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"idleTimestamp",{get:function(){return this._idleTimestamp},set:function(f){this._idleTimestamp=f},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"creationTimestamp",{get:function(){return this._creationTimestamp},enumerable:!1,configurable:!0}),_.prototype.connect=function(f,y,g,h){return t(this,void 0,void 0,function(){var v=this;return r(this,function(w){switch(w.label){case 0:if(this._protocol.initialized&&!this._protocol.supportsReAuth)throw(0,o.newError)("Connection does not support re-auth");return this._authToken=g,this._protocol.initialized?[3,2]:[4,this._initialize(f,y,g)];case 1:return[2,w.sent()];case 2:return h?[4,new Promise(function(E,O){v._protocol.logoff({onError:O}),v._protocol.logon({authToken:g,onError:O,onComplete:function(){return E(v)},flush:!0})})]:[3,4];case 3:return[2,w.sent()];case 4:return this._protocol.logoff(),this._protocol.logon({authToken:g,flush:!0}),[2,this]}})})},_.prototype._initialize=function(f,y,g){var h=this,v=this;return new Promise(function(w,E){h._protocol.initialize({userAgent:f,boltAgent:y,authToken:g,notificationFilter:h._notificationFilter,onError:function(O){return E(O)},onComplete:function(O){var S;if(O){var P=O.server;(!h.version||P)&&(h.version=P);var I=O.connection_id;if(h.databaseId||(h.databaseId=I),O.hints){var C=O.hints["connection.recv_timeout_seconds"];if(C!=null){var R=(0,o.toNumber)(C);Number.isInteger(R)&&R>0?h._ch.setupReceiveTimeout(R*1e3):h._log.info("Server located at ".concat(h._address," supplied an invalid connection receive timeout value (").concat(R,"). ")+"Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}var A=O.hints["telemetry.enabled"];A===!0&&(h._telemetryDisabledConnection=!1),h.SSREnabledHint=O.hints["ssr.enabled"]}h._ssrCallback((S=h.SSREnabledHint)!==null&&S!==void 0?S:!1,"OPEN")}w(v)}})})},_.prototype.protocol=function(){return this._protocol},Object.defineProperty(_.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"version",{get:function(){return this._server.version},set:function(f){this._server.version=f},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),_.prototype._handleFatalError=function(f){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||f,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by ".concat(this._error," (").concat(o.json.stringify(this._error),")")),this._protocol.notifyFatalError(this._error)},_.prototype._setIdle=function(f){this._idle=!0,this._ch.stopReceiveTimeout(),this._protocol.queueObserverIfProtocolIsNotBroken(f)},_.prototype._unsetIdle=function(){this._idle=!1,this._updateCurrentObserver()},_.prototype._queueObserver=function(f){return this._protocol.queueObserverIfProtocolIsNotBroken(f)},_.prototype.hasOngoingObservableRequests=function(){return!this._idle&&this._protocol.hasOngoingObservableRequests()},_.prototype.resetAndFlush=function(){var f=this;return new Promise(function(y,g){f._reset({onError:function(h){if(f._isBroken)g(h);else{var v=f._handleProtocolError("Received FAILURE as a response for RESET: ".concat(h));g(v)}},onComplete:function(){y()}})})},_.prototype._resetOnFailure=function(){var f=this;this.isOpen()&&this._reset({onError:function(){f._protocol.resetFailure()},onComplete:function(){f._protocol.resetFailure()}})},_.prototype._reset=function(f){var y=this;if(this._reseting){this._protocol.isLastMessageReset()?this._resetObservers.push(f):this._protocol.reset({onError:function(h){f.onError(h)},onComplete:function(){f.onComplete()}});return}this._resetObservers.push(f),this._reseting=!0;var g=function(h){y._reseting=!1;var v=y._resetObservers;y._resetObservers=[],v.forEach(h)};this._protocol.reset({onError:function(h){g(function(v){return v.onError(h)})},onComplete:function(){g(function(h){return h.onComplete()})}})},_.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},_.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},_.prototype._handleOngoingRequestsNumberChange=function(f){this._idle||(f===0?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout())},_.prototype.close=function(){var f;return t(this,void 0,void 0,function(){return r(this,function(y){switch(y.label){case 0:return this._ssrCallback((f=this.SSREnabledHint)!==null&&f!==void 0?f:!1,"CLOSE"),this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return y.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},_.prototype.toString=function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")},_.prototype._handleProtocolError=function(f){this._protocol.resetFailure(),this._updateCurrentObserver();var y=(0,o.newError)(f,s);return this._handleFatalError(y),y},_})(a.default);gt.default=p;function b(m,_){return new l(_._level,function(f,y){return _._loggerFunction(f,"".concat(m," ").concat(y))})}return gt}var Wn={},h0;function HR(){if(h0)return Wn;h0=1;var e=Wn&&Wn.__extends||(function(){var i=function(o,a){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,s){u.__proto__=s}||function(u,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(u[l]=s[l])},i(o,a)};return function(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");i(o,a);function u(){this.constructor=o}o.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}})(),t=Wn&&Wn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Wn,"__esModule",{value:!0});var r=t(Jh()),n=(function(i){e(o,i);function o(a,u){var s=i.call(this,u)||this;return u&&(s._originalErrorHandler=a._errorHandler,a._errorHandler=s._errorHandler),s._delegate=a,s}return o.prototype.beginTransaction=function(a){return this._delegate.beginTransaction(a)},o.prototype.run=function(a,u,s){return this._delegate.run(a,u,s)},o.prototype.commitTransaction=function(a){return this._delegate.commitTransaction(a)},o.prototype.rollbackTransaction=function(a){return this._delegate.rollbackTransaction(a)},o.prototype.getProtocolVersion=function(){return this._delegate.getProtocolVersion()},Object.defineProperty(o.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(a){this._delegate.databaseId=a},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"authToken",{get:function(){return this._delegate.authToken},set:function(a){this._delegate.authToken=a},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"supportsReAuth",{get:function(){return this._delegate.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"version",{get:function(){return this._delegate.version},set:function(a){this._delegate.version=a},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"creationTimestamp",{get:function(){return this._delegate.creationTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"idleTimestamp",{get:function(){return this._delegate.idleTimestamp},set:function(a){this._delegate.idleTimestamp=a},enumerable:!1,configurable:!0}),o.prototype.isOpen=function(){return this._delegate.isOpen()},o.prototype.protocol=function(){return this._delegate.protocol()},o.prototype.connect=function(a,u,s,l){return this._delegate.connect(a,u,s,l)},o.prototype.write=function(a,u,s){return this._delegate.write(a,u,s)},o.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},o.prototype.hasOngoingObservableRequests=function(){return this._delegate.hasOngoingObservableRequests()},o.prototype.close=function(){return this._delegate.close()},o.prototype.release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate.release()},o})(r.default);return Wn.default=n,Wn}var nl={},v0;function zR(){if(v0)return nl;v0=1,Object.defineProperty(nl,"__esModule",{value:!0});var e=ae(),t=e.error.SERVICE_UNAVAILABLE,r=e.error.SESSION_EXPIRED,n=(function(){function s(l,d,c,p){this._errorCode=l,this._handleUnavailability=d||u,this._handleWriteFailure=c||u,this._handleSecurityError=p||u}return s.create=function(l){var d=l.errorCode,c=l.handleUnavailability,p=l.handleWriteFailure,b=l.handleSecurityError;return new s(d,c,p,b)},s.prototype.errorCode=function(){return this._errorCode},s.prototype.handleAndTransformError=function(l,d,c){return i(l)?this._handleSecurityError(l,d,c):o(l)?this._handleUnavailability(l,d,c):a(l)?this._handleWriteFailure(l,d,c):l},s})();nl.default=n;function i(s){return s!=null&&s.code!=null&&s.code.startsWith("Neo.ClientError.Security.")}function o(s){return s?s.code===r||s.code===t||s.code==="Neo.TransientError.General.DatabaseUnavailable":!1}function a(s){return s?s.code==="Neo.ClientError.Cluster.NotALeader"||s.code==="Neo.ClientError.General.ForbiddenOnReadOnlyDatabase":!1}function u(s){return s}return nl}var p0;function ev(){return p0||(p0=1,(function(e){var t=Yt&&Yt.__createBinding||(Object.create?(function(l,d,c,p){p===void 0&&(p=c);var b=Object.getOwnPropertyDescriptor(d,c);(!b||("get"in b?!d.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return d[c]}}),Object.defineProperty(l,p,b)}):(function(l,d,c,p){p===void 0&&(p=c),l[p]=d[c]})),r=Yt&&Yt.__setModuleDefault||(Object.create?(function(l,d){Object.defineProperty(l,"default",{enumerable:!0,value:d})}):function(l,d){l.default=d}),n=Yt&&Yt.__importStar||function(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var c in l)c!=="default"&&Object.prototype.hasOwnProperty.call(l,c)&&t(d,l,c);return r(d,l),d},i=Yt&&Yt.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=e.ConnectionErrorHandler=e.DelegateConnection=e.ChannelConnection=e.Connection=void 0;var o=i(Jh());e.Connection=o.default;var a=n(WR());e.ChannelConnection=a.default,Object.defineProperty(e,"createChannelConnection",{enumerable:!0,get:function(){return a.createChannelConnection}});var u=i(HR());e.DelegateConnection=u.default;var s=i(zR());e.ConnectionErrorHandler=s.default,e.default=o.default})(Yt)),Yt}var Hn={},_0;function KR(){if(_0)return Hn;_0=1;var e=Hn&&Hn.__awaiter||function(o,a,u,s){function l(d){return d instanceof u?d:new u(function(c){c(d)})}return new(u||(u=Promise))(function(d,c){function p(_){try{m(s.next(_))}catch(f){c(f)}}function b(_){try{m(s.throw(_))}catch(f){c(f)}}function m(_){_.done?d(_.value):l(_.value).then(p,b)}m((s=s.apply(o,a||[])).next())})},t=Hn&&Hn.__generator||function(o,a){var u={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},s,l,d,c;return c={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function p(m){return function(_){return b([m,_])}}function b(m){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(u=0)),u;)try{if(s=1,l&&(d=m[0]&2?l.return:m[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,m[1])).done)return d;switch(l=0,d&&(m=[m[0]&2,d.value]),m[0]){case 0:case 1:d=m;break;case 4:return u.label++,{value:m[1],done:!1};case 5:u.label++,l=m[1],m=[0];continue;case 7:m=u.ops.pop(),u.trys.pop();continue;default:if(d=u.trys,!(d=d.length>0&&d[d.length-1])&&(m[0]===6||m[0]===2)){u=0;continue}if(m[0]===3&&(!d||m[1]>d[0]&&m[1]<d[3])){u.label=m[1];break}if(m[0]===6&&u.label<d[1]){u.label=d[1],d=m;break}if(d&&u.label<d[2]){u.label=d[2],u.ops.push(m);break}d[2]&&u.ops.pop(),u.trys.pop();continue}m=a.call(o,u)}catch(_){m=[6,_],l=0}finally{s=d=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}};Object.defineProperty(Hn,"__esModule",{value:!0});var r=ae(),n=Bc(),i=(function(){function o(a){var u=a.authTokenManager,s=a.userAgent,l=a.boltAgent;this._authTokenManager=u||(0,r.staticAuthTokenManager)({}),this._userAgent=s,this._boltAgent=l}return o.prototype.authenticate=function(a){var u=a.connection,s=a.auth,l=a.skipReAuth,d=a.waitReAuth,c=a.forceReAuth;return e(this,void 0,void 0,function(){var p,b;return t(this,function(m){switch(m.label){case 0:return s==null?[3,3]:(p=u.supportsReAuth===!0&&(!n.object.equals(u.authToken,s)&&l!==!0||c===!0),u.authToken==null||p?[4,u.connect(this._userAgent,this._boltAgent,s,d||!1)]:[3,2]);case 1:return[2,m.sent()];case 2:return[2,u];case 3:return[4,this._authTokenManager.getToken()];case 4:return b=m.sent(),n.object.equals(b,u.authToken)?[3,6]:[4,u.connect(this._userAgent,this._boltAgent,b,!1)];case 5:return[2,m.sent()];case 6:return[2,u]}})})},o.prototype.handleError=function(a){var u=a.connection,s=a.code;return u&&s.startsWith("Neo.ClientError.Security.")?this._authTokenManager.handleSecurityException(u.authToken,s):!1},o})();return Hn.default=i,Hn}var zn={},b0;function GR(){if(b0)return zn;b0=1;var e=zn&&zn.__awaiter||function(n,i,o,a){function u(s){return s instanceof o?s:new o(function(l){l(s)})}return new(o||(o=Promise))(function(s,l){function d(b){try{p(a.next(b))}catch(m){l(m)}}function c(b){try{p(a.throw(b))}catch(m){l(m)}}function p(b){b.done?s(b.value):u(b.value).then(d,c)}p((a=a.apply(n,i||[])).next())})},t=zn&&zn.__generator||function(n,i){var o={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},a,u,s,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(p){return function(b){return c([p,b])}}function c(p){if(a)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(o=0)),o;)try{if(a=1,u&&(s=p[0]&2?u.return:p[0]?u.throw||((s=u.return)&&s.call(u),0):u.next)&&!(s=s.call(u,p[1])).done)return s;switch(u=0,s&&(p=[p[0]&2,s.value]),p[0]){case 0:case 1:s=p;break;case 4:return o.label++,{value:p[1],done:!1};case 5:o.label++,u=p[1],p=[0];continue;case 7:p=o.ops.pop(),o.trys.pop();continue;default:if(s=o.trys,!(s=s.length>0&&s[s.length-1])&&(p[0]===6||p[0]===2)){o=0;continue}if(p[0]===3&&(!s||p[1]>s[0]&&p[1]<s[3])){o.label=p[1];break}if(p[0]===6&&o.label<s[1]){o.label=s[1],s=p;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(p);break}s[2]&&o.ops.pop(),o.trys.pop();continue}p=i.call(n,o)}catch(b){p=[6,b],u=0}finally{a=s=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}};Object.defineProperty(zn,"__esModule",{value:!0});var r=(function(){function n(i){var o=i.connectionLivenessCheckTimeout;this._connectionLivenessCheckTimeout=o}return n.prototype.check=function(i){return e(this,void 0,void 0,function(){var o;return t(this,function(a){switch(a.label){case 0:return this._isCheckDisabled||this._isNewlyCreatedConnection(i)?[2,!0]:(o=Date.now()-i.idleTimestamp,this._connectionLivenessCheckTimeout===0||o>this._connectionLivenessCheckTimeout?[4,i.resetAndFlush().then(function(){return!0})]:[3,2]);case 1:return[2,a.sent()];case 2:return[2,!0]}})})},Object.defineProperty(n.prototype,"_isCheckDisabled",{get:function(){return this._connectionLivenessCheckTimeout==null||this._connectionLivenessCheckTimeout<0},enumerable:!1,configurable:!0}),n.prototype._isNewlyCreatedConnection=function(i){return i.authToken==null},n})();return zn.default=r,zn}var Kn={},y0;function YR(){if(y0)return Kn;y0=1;var e=Kn&&Kn.__awaiter||function(i,o,a,u){function s(l){return l instanceof a?l:new a(function(d){d(l)})}return new(a||(a=Promise))(function(l,d){function c(m){try{b(u.next(m))}catch(_){d(_)}}function p(m){try{b(u.throw(m))}catch(_){d(_)}}function b(m){m.done?l(m.value):s(m.value).then(c,p)}b((u=u.apply(i,o||[])).next())})},t=Kn&&Kn.__generator||function(i,o){var a={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},u,s,l,d;return d={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function c(b){return function(m){return p([b,m])}}function p(b){if(u)throw new TypeError("Generator is already executing.");for(;d&&(d=0,b[0]&&(a=0)),a;)try{if(u=1,s&&(l=b[0]&2?s.return:b[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,b[1])).done)return l;switch(s=0,l&&(b=[b[0]&2,l.value]),b[0]){case 0:case 1:l=b;break;case 4:return a.label++,{value:b[1],done:!1};case 5:a.label++,s=b[1],b=[0];continue;case 7:b=a.ops.pop(),a.trys.pop();continue;default:if(l=a.trys,!(l=l.length>0&&l[l.length-1])&&(b[0]===6||b[0]===2)){a=0;continue}if(b[0]===3&&(!l||b[1]>l[0]&&b[1]<l[3])){a.label=b[1];break}if(b[0]===6&&a.label<l[1]){a.label=l[1],l=b;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(b);break}l[2]&&a.ops.pop(),a.trys.pop();continue}b=o.call(i,a)}catch(m){b=[6,m],s=0}finally{u=l=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}};Object.defineProperty(Kn,"__esModule",{value:!0});var r=vi(),n=(function(){function i(o){var a=o.clientCertificateProvider,u=o.loader;this._clientCertificateProvider=a,this._loader=u||r.ClientCertificatesLoader,this._clientCertificate=null}return i.prototype.getClientCertificate=function(){return e(this,void 0,void 0,function(){var o,a,u=this;return t(this,function(s){switch(s.label){case 0:return o=this._clientCertificateProvider!=null,o?(a=this._clientCertificate==null,a?[3,2]:[4,this._clientCertificateProvider.hasUpdate()]):[3,3];case 1:a=s.sent(),s.label=2;case 2:o=a,s.label=3;case 3:return o&&(this._clientCertificate=Promise.resolve(this._clientCertificateProvider.getClientCertificate()).then(this._loader.load).then(function(l){return u._clientCertificate=l,u._clientCertificate}).catch(function(l){throw u._clientCertificate=null,l})),[2,this._clientCertificate]}})})},i})();return Kn.default=n,Kn}var m0;function tv(){if(m0)return Qe;m0=1;var e=Qe&&Qe.__extends||(function(){var g=function(h,v){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,E){w.__proto__=E}||function(w,E){for(var O in E)Object.prototype.hasOwnProperty.call(E,O)&&(w[O]=E[O])},g(h,v)};return function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");g(h,v);function w(){this.constructor=h}h.prototype=v===null?Object.create(v):(w.prototype=v.prototype,new w)}})(),t=Qe&&Qe.__awaiter||function(g,h,v,w){function E(O){return O instanceof v?O:new v(function(S){S(O)})}return new(v||(v=Promise))(function(O,S){function P(R){try{C(w.next(R))}catch(A){S(A)}}function I(R){try{C(w.throw(R))}catch(A){S(A)}}function C(R){R.done?O(R.value):E(R.value).then(P,I)}C((w=w.apply(g,h||[])).next())})},r=Qe&&Qe.__generator||function(g,h){var v={label:0,sent:function(){if(O[0]&1)throw O[1];return O[1]},trys:[],ops:[]},w,E,O,S;return S={next:P(0),throw:P(1),return:P(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function P(C){return function(R){return I([C,R])}}function I(C){if(w)throw new TypeError("Generator is already executing.");for(;S&&(S=0,C[0]&&(v=0)),v;)try{if(w=1,E&&(O=C[0]&2?E.return:C[0]?E.throw||((O=E.return)&&O.call(E),0):E.next)&&!(O=O.call(E,C[1])).done)return O;switch(E=0,O&&(C=[C[0]&2,O.value]),C[0]){case 0:case 1:O=C;break;case 4:return v.label++,{value:C[1],done:!1};case 5:v.label++,E=C[1],C=[0];continue;case 7:C=v.ops.pop(),v.trys.pop();continue;default:if(O=v.trys,!(O=O.length>0&&O[O.length-1])&&(C[0]===6||C[0]===2)){v=0;continue}if(C[0]===3&&(!O||C[1]>O[0]&&C[1]<O[3])){v.label=C[1];break}if(C[0]===6&&v.label<O[1]){v.label=O[1],O=C;break}if(O&&v.label<O[2]){v.label=O[2],v.ops.push(C);break}O[2]&&v.ops.pop(),v.trys.pop();continue}C=h.call(g,v)}catch(R){C=[6,R],E=0}finally{w=O=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},n=Qe&&Qe.__read||function(g,h){var v=typeof Symbol=="function"&&g[Symbol.iterator];if(!v)return g;var w=v.call(g),E,O=[],S;try{for(;(h===void 0||h-- >0)&&!(E=w.next()).done;)O.push(E.value)}catch(P){S={error:P}}finally{try{E&&!E.done&&(v=w.return)&&v.call(w)}finally{if(S)throw S.error}}return O},i=Qe&&Qe.__spreadArray||function(g,h,v){if(v||arguments.length===2)for(var w=0,E=h.length,O;w<E;w++)(O||!(w in h))&&(O||(O=Array.prototype.slice.call(h,0,w)),O[w]=h[w]);return g.concat(O||Array.prototype.slice.call(h))},o=Qe&&Qe.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(Qe,"__esModule",{value:!0});var a=ev(),u=ae(),s=o(KR()),l=Bc(),d=o(GR()),c=o(YR()),p=u.error.SERVICE_UNAVAILABLE,b=["Neo.ClientError.Security.CredentialsExpired","Neo.ClientError.Security.Forbidden","Neo.ClientError.Security.TokenExpired","Neo.ClientError.Security.Unauthorized"],m=u.internal.pool,_=m.Pool,f=m.PoolConfig,y=(function(g){e(h,g);function h(v,w){var E=v.id,O=v.config,S=v.log,P=v.userAgent,I=v.boltAgent,C=v.authTokenManager,R=v.newPool,A=R===void 0?function(){for(var j=[],U=0;U<arguments.length;U++)j[U]=arguments[U];return new(_.bind.apply(_,i([void 0],n(j),!1)))}:R;w===void 0&&(w=null);var D=g.call(this)||this;return D._id=E,D._config=O,D._log=S,D._clientCertificateHolder=new c.default({clientCertificateProvider:D._config.clientCertificate}),D._authenticationProvider=new s.default({authTokenManager:C,userAgent:P,boltAgent:I}),D._livenessCheckProvider=new d.default({connectionLivenessCheckTimeout:O.connectionLivenessCheckTimeout}),D._userAgent=P,D._boltAgent=I,D._createChannelConnection=w||(function(j){return t(D,void 0,void 0,function(){var U,B;return r(this,function(q){switch(q.label){case 0:return U=a.createChannelConnection,B=[j,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,U.apply(void 0,B.concat([q.sent()]))]}})})}),D._connectionPool=A({create:D._createConnection.bind(D),destroy:D._destroyConnection.bind(D),validateOnAcquire:D._validateConnectionOnAcquire.bind(D),validateOnRelease:D._validateConnectionOnRelease.bind(D),installIdleObserver:h._installIdleObserverOnConnection.bind(D),removeIdleObserver:h._removeIdleObserverOnConnection.bind(D),config:f.fromDriverConfig(O),log:D._log}),D._openConnections={},D}return h.prototype._createConnectionErrorHandler=function(){return new a.ConnectionErrorHandler(p)},h.prototype._getClientCertificate=function(){return t(this,void 0,void 0,function(){return r(this,function(v){return[2,this._config.clientCertificate.getClientCertificate()]})})},h.prototype._createConnection=function(v,w,E){var O=this,S=v.auth;return this._createChannelConnection(w).then(function(P){return P.release=function(){return P.idleTimestamp=Date.now(),E(w,P)},O._openConnections[P.id]=P,O._authenticationProvider.authenticate({connection:P,auth:S}).catch(function(I){throw O._destroyConnection(P),I})})},h.prototype._validateConnectionOnAcquire=function(v,w){var E=v.auth,O=v.skipReAuth;return t(this,void 0,void 0,function(){var S,P;return r(this,function(I){switch(I.label){case 0:if(!this._validateConnection(w))return[2,!1];I.label=1;case 1:return I.trys.push([1,3,,4]),[4,this._livenessCheckProvider.check(w)];case 2:return I.sent(),[3,4];case 3:return S=I.sent(),this._log.debug("The connection ".concat(w.id," is not alive because of an error ").concat(S.code," '").concat(S.message,"'")),[2,!1];case 4:return I.trys.push([4,6,,7]),[4,this._authenticationProvider.authenticate({connection:w,auth:E,skipReAuth:O})];case 5:return I.sent(),[2,!0];case 6:return P=I.sent(),this._log.debug("The connection ".concat(w.id," is not valid because of an error ").concat(P.code," '").concat(P.message,"'")),[2,!1];case 7:return[2]}})})},h.prototype._validateConnectionOnRelease=function(v){return v._sticky!==!0&&this._validateConnection(v)},h.prototype._validateConnection=function(v){if(!v.isOpen())return!1;var w=this._config.maxConnectionLifetime,E=Date.now()-v.creationTimestamp;return!(E>w)},h.prototype._destroyConnection=function(v){return delete this._openConnections[v.id],v.close()},h.prototype._verifyConnectivityAndGetServerVersion=function(v){var w=v.address;return t(this,void 0,void 0,function(){var E,O;return r(this,function(S){switch(S.label){case 0:return[4,this._connectionPool.acquire({},w)];case 1:E=S.sent(),O=new u.ServerInfo(E.server,E.protocol().version),S.label=2;case 2:return S.trys.push([2,,5,7]),E.protocol().isLastMessageLogon()?[3,4]:[4,E.resetAndFlush()];case 3:S.sent(),S.label=4;case 4:return[3,7];case 5:return[4,E.release()];case 6:return S.sent(),[7];case 7:return[2,O]}})})},h.prototype._verifyAuthentication=function(v){var w=v.getAddress,E=v.auth;return t(this,void 0,void 0,function(){var O,S,P,I,C,R;return r(this,function(A){switch(A.label){case 0:O=[],A.label=1;case 1:return A.trys.push([1,8,9,11]),[4,w()];case 2:return S=A.sent(),[4,this._connectionPool.acquire({auth:E,skipReAuth:!0},S)];case 3:if(P=A.sent(),O.push(P),I=!P.protocol().isLastMessageLogon(),!P.supportsReAuth)throw(0,u.newError)("Driver is connected to a database that does not support user switch.");return I&&P.supportsReAuth?[4,this._authenticationProvider.authenticate({connection:P,auth:E,waitReAuth:!0,forceReAuth:!0})]:[3,5];case 4:return A.sent(),[3,7];case 5:return I&&!P.supportsReAuth?[4,this._connectionPool.acquire({auth:E},S,{requireNew:!0})]:[3,7];case 6:C=A.sent(),C._sticky=!0,O.push(C),A.label=7;case 7:return[2,!0];case 8:if(R=A.sent(),b.includes(R.code))return[2,!1];throw R;case 9:return[4,Promise.all(O.map(function(D){return D.release()}))];case 10:return A.sent(),[7];case 11:return[2]}})})},h.prototype._verifyStickyConnection=function(v){var w=v.auth,E=v.connection;return v.address,t(this,void 0,void 0,function(){var O,S;return r(this,function(P){switch(P.label){case 0:return O=l.object.equals(w,E.authToken),S=!O,E._sticky=O&&!E.supportsReAuth,S||E._sticky?[4,E.release()]:[3,2];case 1:throw P.sent(),(0,u.newError)("Driver is connected to a database that does not support user switch.");case 2:return[2]}})})},h.prototype.close=function(){return t(this,void 0,void 0,function(){return r(this,function(v){switch(v.label){case 0:return[4,this._connectionPool.close()];case 1:return v.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(w){return w.close()}))];case 2:return v.sent(),[2]}})})},h._installIdleObserverOnConnection=function(v,w){v._setIdle(w)},h._removeIdleObserverOnConnection=function(v){v._unsetIdle()},h.prototype._handleSecurityError=function(v,w,E){var O=this._authenticationProvider.handleError({connection:E,code:v.code});return O&&(v.retriable=!0),v.code==="Neo.ClientError.Security.AuthorizationExpired"&&this._connectionPool.apply(w,function(S){S.authToken=null}),E&&E.close().catch(function(){}),v},h})(u.ConnectionProvider);return Qe.default=y,Qe}var Nt={},g0;function ZR(){if(g0)return Nt;g0=1;var e=Nt&&Nt.__extends||(function(){var m=function(_,f){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,g){y.__proto__=g}||function(y,g){for(var h in g)Object.prototype.hasOwnProperty.call(g,h)&&(y[h]=g[h])},m(_,f)};return function(_,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");m(_,f);function y(){this.constructor=_}_.prototype=f===null?Object.create(f):(y.prototype=f.prototype,new y)}})(),t=Nt&&Nt.__awaiter||function(m,_,f,y){function g(h){return h instanceof f?h:new f(function(v){v(h)})}return new(f||(f=Promise))(function(h,v){function w(S){try{O(y.next(S))}catch(P){v(P)}}function E(S){try{O(y.throw(S))}catch(P){v(P)}}function O(S){S.done?h(S.value):g(S.value).then(w,E)}O((y=y.apply(m,_||[])).next())})},r=Nt&&Nt.__generator||function(m,_){var f={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},y,g,h,v;return v={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function w(O){return function(S){return E([O,S])}}function E(O){if(y)throw new TypeError("Generator is already executing.");for(;v&&(v=0,O[0]&&(f=0)),f;)try{if(y=1,g&&(h=O[0]&2?g.return:O[0]?g.throw||((h=g.return)&&h.call(g),0):g.next)&&!(h=h.call(g,O[1])).done)return h;switch(g=0,h&&(O=[O[0]&2,h.value]),O[0]){case 0:case 1:h=O;break;case 4:return f.label++,{value:O[1],done:!1};case 5:f.label++,g=O[1],O=[0];continue;case 7:O=f.ops.pop(),f.trys.pop();continue;default:if(h=f.trys,!(h=h.length>0&&h[h.length-1])&&(O[0]===6||O[0]===2)){f=0;continue}if(O[0]===3&&(!h||O[1]>h[0]&&O[1]<h[3])){f.label=O[1];break}if(O[0]===6&&f.label<h[1]){f.label=h[1],h=O;break}if(h&&f.label<h[2]){f.label=h[2],f.ops.push(O);break}h[2]&&f.ops.pop(),f.trys.pop();continue}O=_.call(m,f)}catch(S){O=[6,S],g=0}finally{y=h=0}if(O[0]&5)throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}},n=Nt&&Nt.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(Nt,"__esModule",{value:!0});var i=n(tv()),o=ev(),a=ae(),u=a.internal.constants,s=u.BOLT_PROTOCOL_V3,l=u.BOLT_PROTOCOL_V4_0,d=u.BOLT_PROTOCOL_V4_4,c=u.BOLT_PROTOCOL_V5_1,p=a.error.SERVICE_UNAVAILABLE,b=(function(m){e(_,m);function _(f){var y=f.id,g=f.config,h=f.log,v=f.address,w=f.userAgent,E=f.boltAgent,O=f.authTokenManager,S=f.newPool,P=m.call(this,{id:y,config:g,log:h,userAgent:w,boltAgent:E,authTokenManager:O,newPool:S})||this;return P._address=v,P}return _.prototype.acquireConnection=function(f){var y=f===void 0?{}:f;y.accessMode;var g=y.database;y.bookmarks;var h=y.auth,v=y.forceReAuth;return t(this,void 0,void 0,function(){var w,E,O=this;return r(this,function(S){switch(S.label){case 0:return w=o.ConnectionErrorHandler.create({errorCode:p,handleSecurityError:function(P,I,C){return O._handleSecurityError(P,I,C,g)}}),[4,this._connectionPool.acquire({auth:h,forceReAuth:v},this._address)];case 1:return E=S.sent(),h?[4,this._verifyStickyConnection({auth:h,connection:E,address:this._address})]:[3,3];case 2:return S.sent(),[2,E];case 3:return[2,new o.DelegateConnection(E,w)]}})})},_.prototype._handleSecurityError=function(f,y,g,h){return this._log.warn("Direct driver ".concat(this._id," will close connection to ").concat(y," for database '").concat(h,"' because of an error ").concat(f.code," '").concat(f.message,"'")),m.prototype._handleSecurityError.call(this,f,y,g)},_.prototype._hasProtocolVersion=function(f){return t(this,void 0,void 0,function(){var y,g;return r(this,function(h){switch(h.label){case 0:return[4,this._createChannelConnection(this._address)];case 1:return y=h.sent(),g=y.protocol()?y.protocol().version:null,[4,y.close()];case 2:return h.sent(),g?[2,f(g)]:[2,!1]}})})},_.prototype.supportsMultiDb=function(){return t(this,void 0,void 0,function(){return r(this,function(f){switch(f.label){case 0:return[4,this._hasProtocolVersion(function(y){return y>=l})];case 1:return[2,f.sent()]}})})},_.prototype.getNegotiatedProtocolVersion=function(){var f=this;return new Promise(function(y,g){f._hasProtocolVersion(y).catch(g)})},_.prototype.supportsTransactionConfig=function(){return t(this,void 0,void 0,function(){return r(this,function(f){switch(f.label){case 0:return[4,this._hasProtocolVersion(function(y){return y>=s})];case 1:return[2,f.sent()]}})})},_.prototype.supportsUserImpersonation=function(){return t(this,void 0,void 0,function(){return r(this,function(f){switch(f.label){case 0:return[4,this._hasProtocolVersion(function(y){return y>=d})];case 1:return[2,f.sent()]}})})},_.prototype.supportsSessionAuth=function(){return t(this,void 0,void 0,function(){return r(this,function(f){switch(f.label){case 0:return[4,this._hasProtocolVersion(function(y){return y>=c})];case 1:return[2,f.sent()]}})})},_.prototype.verifyAuthentication=function(f){var y=f.auth;return t(this,void 0,void 0,function(){var g=this;return r(this,function(h){return[2,this._verifyAuthentication({auth:y,getAddress:function(){return g._address}})]})})},_.prototype.verifyConnectivityAndGetServerInfo=function(){return t(this,void 0,void 0,function(){return r(this,function(f){switch(f.label){case 0:return[4,this._verifyConnectivityAndGetServerVersion({address:this._address})];case 1:return[2,f.sent()]}})})},_})(i.default);return Nt.default=b,Nt}var Ae={},wr={},Bo={},Or={},w0;function FE(){if(w0)return Or;w0=1;var e=Or&&Or.__read||function(f,y){var g=typeof Symbol=="function"&&f[Symbol.iterator];if(!g)return f;var h=g.call(f),v,w=[],E;try{for(;(y===void 0||y-- >0)&&!(v=h.next()).done;)w.push(v.value)}catch(O){E={error:O}}finally{try{v&&!v.done&&(g=h.return)&&g.call(h)}finally{if(E)throw E.error}}return w},t=Or&&Or.__spreadArray||function(f,y,g){if(g||arguments.length===2)for(var h=0,v=y.length,w;h<v;h++)(w||!(h in y))&&(w||(w=Array.prototype.slice.call(y,0,h)),w[h]=y[h]);return f.concat(w||Array.prototype.slice.call(y))};Object.defineProperty(Or,"__esModule",{value:!0}),Or.createValidRoutingTable=void 0;var r=ae(),n=r.internal.constants,i=n.ACCESS_MODE_WRITE,o=n.ACCESS_MODE_READ,a=r.internal.serverAddress.ServerAddress,u=r.error.PROTOCOL_ERROR,s=1,l=(function(){function f(y){var g=y===void 0?{}:y,h=g.database,v=g.routers,w=g.readers,E=g.writers,O=g.expirationTime,S=g.ttl;this.database=h||null,this.databaseName=h||"default database",this.routers=v||[],this.readers=w||[],this.writers=E||[],this.expirationTime=O||(0,r.int)(0),this.ttl=S}return f.fromRawRoutingTable=function(y,g,h){return c(y,g,h)},f.prototype.forget=function(y){this.readers=d(this.readers,y),this.writers=d(this.writers,y)},f.prototype.forgetRouter=function(y){this.routers=d(this.routers,y)},f.prototype.forgetWriter=function(y){this.writers=d(this.writers,y)},f.prototype.isStaleFor=function(y){return this.expirationTime.lessThan(Date.now())||this.routers.length<s||y===o&&this.readers.length===0||y===i&&this.writers.length===0},f.prototype.isExpiredFor=function(y){return this.expirationTime.add(y).lessThan(Date.now())},f.prototype.allServers=function(){return t(t(t([],e(this.routers),!1),e(this.readers),!1),e(this.writers),!1)},f.prototype.toString=function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")},f})();Or.default=l;function d(f,y){return f.filter(function(g){return g.asKey()!==y.asKey()})}function c(f,y,g){var h=g.ttl,v=b(g,y),w=p(g,y),E=w.routers,O=w.readers,S=w.writers;return m(E,"routers",y),m(O,"readers",y),new l({database:f||g.db,routers:E,readers:O,writers:S,expirationTime:v,ttl:h})}Or.createValidRoutingTable=c;function p(f,y){try{var g=[],h=[],v=[];return f.servers.forEach(function(w){var E=w.role,O=w.addresses;E==="ROUTE"?g=_(O).map(function(S){return a.fromUrl(S)}):E==="WRITE"?v=_(O).map(function(S){return a.fromUrl(S)}):E==="READ"&&(h=_(O).map(function(S){return a.fromUrl(S)}))}),{routers:g,readers:h,writers:v}}catch(w){throw(0,r.newError)("Unable to parse servers entry from router ".concat(y,` from addresses:
`).concat(r.json.stringify(f.servers),`
Error message: `).concat(w.message),u)}}function b(f,y){try{var g=(0,r.int)(Date.now()),h=(0,r.int)(f.ttl).multiply(1e3).add(g);return h.lessThan(g)?r.Integer.MAX_VALUE:h}catch(v){throw(0,r.newError)("Unable to parse TTL entry from router ".concat(y,` from raw routing table:
`).concat(r.json.stringify(f),`
Error message: `).concat(v.message),u)}}function m(f,y,g){if(f.length===0)throw(0,r.newError)("Received no "+y+" from router "+g,u)}function _(f){if(!Array.isArray(f))throw new TypeError("Array expected but got: "+f);return Array.from(f)}return Or}var O0;function XR(){if(O0)return Bo;O0=1;var e=Bo&&Bo.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Bo,"__esModule",{value:!0});var t=e(FE());ae();var r=(function(){function n(i){this._routingContext=i}return n.prototype.lookupRoutingTableOnRouter=function(i,o,a,u){var s=this;return i._acquireConnection(function(l){return s._requestRawRoutingTable(l,i,o,a,u).then(function(d){return d.isNull?null:t.default.fromRawRoutingTable(o,a,d)})})},n.prototype._requestRawRoutingTable=function(i,o,a,u,s){var l=this;return new Promise(function(d,c){i.protocol().requestRoutingInformation({routingContext:l._routingContext,databaseName:a,impersonatedUser:s,sessionContext:{bookmarks:o._lastBookmarks,mode:o._mode,database:o._database,afterComplete:o._onComplete},onCompleted:d,onError:c})})},n})();return Bo.default=r,Bo}var E0;function QR(){if(E0)return wr;E0=1;var e=wr&&wr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(wr,"__esModule",{value:!0}),wr.RoutingTable=wr.Rediscovery=void 0;var t=e(XR());wr.Rediscovery=t.default;var r=e(FE());return wr.RoutingTable=r.default,wr.default=t.default,wr}var S0;function JR(){if(S0)return Ae;S0=1;var e=Ae&&Ae.__extends||(function(){var N=function(x,L){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,H){$.__proto__=H}||function($,H){for(var G in H)Object.prototype.hasOwnProperty.call(H,G)&&($[G]=H[G])},N(x,L)};return function(x,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");N(x,L);function $(){this.constructor=x}x.prototype=L===null?Object.create(L):($.prototype=L.prototype,new $)}})(),t=Ae&&Ae.__assign||function(){return t=Object.assign||function(N){for(var x,L=1,$=arguments.length;L<$;L++){x=arguments[L];for(var H in x)Object.prototype.hasOwnProperty.call(x,H)&&(N[H]=x[H])}return N},t.apply(this,arguments)},r=Ae&&Ae.__createBinding||(Object.create?(function(N,x,L,$){$===void 0&&($=L);var H=Object.getOwnPropertyDescriptor(x,L);(!H||("get"in H?!x.__esModule:H.writable||H.configurable))&&(H={enumerable:!0,get:function(){return x[L]}}),Object.defineProperty(N,$,H)}):(function(N,x,L,$){$===void 0&&($=L),N[$]=x[L]})),n=Ae&&Ae.__setModuleDefault||(Object.create?(function(N,x){Object.defineProperty(N,"default",{enumerable:!0,value:x})}):function(N,x){N.default=x}),i=Ae&&Ae.__importStar||function(N){if(N&&N.__esModule)return N;var x={};if(N!=null)for(var L in N)L!=="default"&&Object.prototype.hasOwnProperty.call(N,L)&&r(x,N,L);return n(x,N),x},o=Ae&&Ae.__awaiter||function(N,x,L,$){function H(G){return G instanceof L?G:new L(function(Q){Q(G)})}return new(L||(L=Promise))(function(G,Q){function te(ee){try{Z($.next(ee))}catch(oe){Q(oe)}}function re(ee){try{Z($.throw(ee))}catch(oe){Q(oe)}}function Z(ee){ee.done?G(ee.value):H(ee.value).then(te,re)}Z(($=$.apply(N,x||[])).next())})},a=Ae&&Ae.__generator||function(N,x){var L={label:0,sent:function(){if(G[0]&1)throw G[1];return G[1]},trys:[],ops:[]},$,H,G,Q;return Q={next:te(0),throw:te(1),return:te(2)},typeof Symbol=="function"&&(Q[Symbol.iterator]=function(){return this}),Q;function te(Z){return function(ee){return re([Z,ee])}}function re(Z){if($)throw new TypeError("Generator is already executing.");for(;Q&&(Q=0,Z[0]&&(L=0)),L;)try{if($=1,H&&(G=Z[0]&2?H.return:Z[0]?H.throw||((G=H.return)&&G.call(H),0):H.next)&&!(G=G.call(H,Z[1])).done)return G;switch(H=0,G&&(Z=[Z[0]&2,G.value]),Z[0]){case 0:case 1:G=Z;break;case 4:return L.label++,{value:Z[1],done:!1};case 5:L.label++,H=Z[1],Z=[0];continue;case 7:Z=L.ops.pop(),L.trys.pop();continue;default:if(G=L.trys,!(G=G.length>0&&G[G.length-1])&&(Z[0]===6||Z[0]===2)){L=0;continue}if(Z[0]===3&&(!G||Z[1]>G[0]&&Z[1]<G[3])){L.label=Z[1];break}if(Z[0]===6&&L.label<G[1]){L.label=G[1],G=Z;break}if(G&&L.label<G[2]){L.label=G[2],L.ops.push(Z);break}G[2]&&L.ops.pop(),L.trys.pop();continue}Z=x.call(N,L)}catch(ee){Z=[6,ee],H=0}finally{$=G=0}if(Z[0]&5)throw Z[1];return{value:Z[0]?Z[1]:void 0,done:!0}}},u=Ae&&Ae.__values||function(N){var x=typeof Symbol=="function"&&Symbol.iterator,L=x&&N[x],$=0;if(L)return L.call(N);if(N&&typeof N.length=="number")return{next:function(){return N&&$>=N.length&&(N=void 0),{value:N&&N[$++],done:!N}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")},s=Ae&&Ae.__read||function(N,x){var L=typeof Symbol=="function"&&N[Symbol.iterator];if(!L)return N;var $=L.call(N),H,G=[],Q;try{for(;(x===void 0||x-- >0)&&!(H=$.next()).done;)G.push(H.value)}catch(te){Q={error:te}}finally{try{H&&!H.done&&(L=$.return)&&L.call($)}finally{if(Q)throw Q.error}}return G},l=Ae&&Ae.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(Ae,"__esModule",{value:!0});var d=ae(),c=i(QR()),p=vi(),b=l(xE()),m=l(tv()),_=nE(),f=ev(),y=Bc(),g=d.error.SERVICE_UNAVAILABLE,h=d.error.SESSION_EXPIRED,v=d.internal.bookmarks.Bookmarks,w=d.internal.constants,E=w.ACCESS_MODE_READ,O=w.ACCESS_MODE_WRITE,S=w.BOLT_PROTOCOL_V3,P=w.BOLT_PROTOCOL_V4_0,I=w.BOLT_PROTOCOL_V4_4,C=w.BOLT_PROTOCOL_V5_1,R="Neo.ClientError.Procedure.ProcedureNotFound",A="Neo.ClientError.Database.DatabaseNotFound",D="Neo.ClientError.Transaction.InvalidBookmark",j="Neo.ClientError.Transaction.InvalidBookmarkMixture",U="Neo.ClientError.Security.AuthorizationExpired",B="Neo.ClientError.Statement.ArgumentError",q="Neo.ClientError.Request.Invalid",T="Neo.ClientError.Statement.TypeError",k="N/A",M="system",V=null,z=(0,d.int)(3e4),F=(function(N){e(x,N);function x(L){var $=L.id,H=L.address,G=L.routingContext,Q=L.hostNameResolver,te=L.config,re=L.log,Z=L.userAgent,ee=L.boltAgent,oe=L.authTokenManager,je=L.routingTablePurgeDelay,Se=L.newPool,ce=N.call(this,{id:$,config:te,log:re,userAgent:Z,boltAgent:ee,authTokenManager:oe,newPool:Se},function(xe){return o(ce,void 0,void 0,function(){var De,Pe;return a(this,function(Le){switch(Le.label){case 0:return De=f.createChannelConnection,Pe=[xe,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,De.apply(void 0,Pe.concat([Le.sent(),this._routingContext,this._channelSsrCallback.bind(this)]))]}})})})||this;return ce._routingContext=t(t({},G),{address:H.toString()}),ce._seedRouter=H,ce._rediscovery=new c.default(ce._routingContext),ce._loadBalancingStrategy=new _.LeastConnectedLoadBalancingStrategy(ce._connectionPool),ce._hostNameResolver=Q,ce._dnsResolver=new p.HostNameResolver,ce._log=re,ce._useSeedRouter=!0,ce._routingTableRegistry=new W(je?(0,d.int)(je):z),ce._refreshRoutingTable=y.functional.reuseOngoingRequest(ce._refreshRoutingTable,ce),ce._withSSR=0,ce._withoutSSR=0,ce}return x.prototype._createConnectionErrorHandler=function(){return new f.ConnectionErrorHandler(h)},x.prototype._handleUnavailability=function(L,$,H){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat($," for database '").concat(H,"' because of an error ").concat(L.code," '").concat(L.message,"'")),this.forget($,H||V),L},x.prototype._handleSecurityError=function(L,$,H,G){return this._log.warn("Routing driver ".concat(this._id," will close connections to ").concat($," for database '").concat(G,"' because of an error ").concat(L.code," '").concat(L.message,"'")),N.prototype._handleSecurityError.call(this,L,$,H,G)},x.prototype._handleWriteFailure=function(L,$,H){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat($," for database '").concat(H,"' because of an error ").concat(L.code," '").concat(L.message,"'")),this.forgetWriter($,H||V),(0,d.newError)("No longer possible to write to server at "+$,h,L)},x.prototype.acquireConnection=function(L){var $=L===void 0?{}:L,H=$.accessMode,G=$.database,Q=$.bookmarks,te=$.impersonatedUser,re=$.onDatabaseNameResolved,Z=$.auth,ee=$.homeDb;return o(this,void 0,void 0,function(){var oe,je,Se,ce,xe,De=this;return a(this,function(Pe){switch(Pe.label){case 0:return oe={database:G||V},je=new f.ConnectionErrorHandler(h,function(Le,Ve){return De._handleUnavailability(Le,Ve,oe.database)},function(Le,Ve){return De._handleWriteFailure(Le,Ve,ee??oe.database)},function(Le,Ve,sa){return De._handleSecurityError(Le,Ve,sa,oe.database)}),this.SSREnabled()&&ee!==void 0&&G===""?(ce=this._routingTableRegistry.get(ee,function(){return new c.RoutingTable({database:ee})}),ce&&!ce.isStaleFor(H)?[4,this.getConnectionFromRoutingTable(ce,Z,H,je)]:[3,2]):[3,2];case 1:if(Se=Pe.sent(),this.SSREnabled())return[2,Se];Se.release(),Pe.label=2;case 2:return[4,this._freshRoutingTable({accessMode:H,database:oe.database,bookmarks:Q,impersonatedUser:te,auth:Z,onDatabaseNameResolved:function(Le){oe.database=oe.database||Le,re&&re(Le)}})];case 3:return xe=Pe.sent(),[2,this.getConnectionFromRoutingTable(xe,Z,H,je)]}})})},x.prototype.getConnectionFromRoutingTable=function(L,$,H,G){return o(this,void 0,void 0,function(){var Q,te,re,Z,ee;return a(this,function(oe){switch(oe.label){case 0:if(H===E)te=this._loadBalancingStrategy.selectReader(L.readers),Q="read";else if(H===O)te=this._loadBalancingStrategy.selectWriter(L.writers),Q="write";else throw(0,d.newError)("Illegal mode "+H);if(!te)throw(0,d.newError)("Failed to obtain connection towards ".concat(Q," server. Known routing table is: ").concat(L),h);oe.label=1;case 1:return oe.trys.push([1,5,,6]),[4,this._connectionPool.acquire({auth:$},te)];case 2:return re=oe.sent(),$?[4,this._verifyStickyConnection({auth:$,connection:re,address:te})]:[3,4];case 3:return oe.sent(),[2,re];case 4:return[2,new f.DelegateConnection(re,G)];case 5:throw Z=oe.sent(),ee=G.handleAndTransformError(Z,te),ee;case 6:return[2]}})})},x.prototype._hasProtocolVersion=function(L){return o(this,void 0,void 0,function(){var $,H,G,Q,te,re;return a(this,function(Z){switch(Z.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:$=Z.sent(),G=0,Z.label=2;case 2:if(!(G<$.length))return[3,8];Z.label=3;case 3:return Z.trys.push([3,6,,7]),[4,this._createChannelConnection($[G])];case 4:return Q=Z.sent(),te=Q.protocol()?Q.protocol().version:null,[4,Q.close()];case 5:return Z.sent(),te?[2,L(te)]:[2,!1];case 6:return re=Z.sent(),H=re,[3,7];case 7:return G++,[3,2];case 8:if(H)throw H;return[2,!1]}})})},x.prototype.supportsMultiDb=function(){return o(this,void 0,void 0,function(){return a(this,function(L){switch(L.label){case 0:return[4,this._hasProtocolVersion(function($){return $>=P})];case 1:return[2,L.sent()]}})})},x.prototype.supportsTransactionConfig=function(){return o(this,void 0,void 0,function(){return a(this,function(L){switch(L.label){case 0:return[4,this._hasProtocolVersion(function($){return $>=S})];case 1:return[2,L.sent()]}})})},x.prototype.supportsUserImpersonation=function(){return o(this,void 0,void 0,function(){return a(this,function(L){switch(L.label){case 0:return[4,this._hasProtocolVersion(function($){return $>=I})];case 1:return[2,L.sent()]}})})},x.prototype.supportsSessionAuth=function(){return o(this,void 0,void 0,function(){return a(this,function(L){switch(L.label){case 0:return[4,this._hasProtocolVersion(function($){return $>=C})];case 1:return[2,L.sent()]}})})},x.prototype.getNegotiatedProtocolVersion=function(){var L=this;return new Promise(function($,H){L._hasProtocolVersion($).catch(H)})},x.prototype.verifyAuthentication=function(L){var $=L.database,H=L.accessMode,G=L.auth;return o(this,void 0,void 0,function(){var Q=this;return a(this,function(te){return[2,this._verifyAuthentication({auth:G,getAddress:function(){return o(Q,void 0,void 0,function(){var re,Z,ee;return a(this,function(oe){switch(oe.label){case 0:return re={database:$||V},[4,this._freshRoutingTable({accessMode:H,database:re.database,auth:G,onDatabaseNameResolved:function(je){re.database=re.database||je}})];case 1:if(Z=oe.sent(),ee=H===O?Z.writers:Z.readers,ee.length===0)throw(0,d.newError)("No servers available for database '".concat(re.database,"' with access mode '").concat(H,"'"),g);return[2,ee[0]]}})})}})]})})},x.prototype.verifyConnectivityAndGetServerInfo=function(L){var $=L.database,H=L.accessMode;return o(this,void 0,void 0,function(){var G,Q,te,re,Z,ee,oe,je,Se,ce,xe,De;return a(this,function(Pe){switch(Pe.label){case 0:return G={database:$||V},[4,this._freshRoutingTable({accessMode:H,database:G.database,onDatabaseNameResolved:function(Le){G.database=G.database||Le}})];case 1:Q=Pe.sent(),te=H===O?Q.writers:Q.readers,re=(0,d.newError)("No servers available for database '".concat(G.database,"' with access mode '").concat(H,"'"),g),Pe.label=2;case 2:Pe.trys.push([2,9,10,11]),Z=u(te),ee=Z.next(),Pe.label=3;case 3:if(ee.done)return[3,8];oe=ee.value,Pe.label=4;case 4:return Pe.trys.push([4,6,,7]),[4,this._verifyConnectivityAndGetServerVersion({address:oe})];case 5:return je=Pe.sent(),[2,je];case 6:return Se=Pe.sent(),re=Se,[3,7];case 7:return ee=Z.next(),[3,3];case 8:return[3,11];case 9:return ce=Pe.sent(),xe={error:ce},[3,11];case 10:try{ee&&!ee.done&&(De=Z.return)&&De.call(Z)}finally{if(xe)throw xe.error}return[7];case 11:throw re}})})},x.prototype.forget=function(L,$){this._routingTableRegistry.apply($,{applyWhenExists:function(H){return H.forget(L)}}),this._connectionPool.purge(L).catch(function(){})},x.prototype.forgetWriter=function(L,$){this._routingTableRegistry.apply($,{applyWhenExists:function(H){return H.forgetWriter(L)}})},x.prototype._freshRoutingTable=function(L){var $=L===void 0?{}:L,H=$.accessMode,G=$.database,Q=$.bookmarks,te=$.impersonatedUser,re=$.onDatabaseNameResolved,Z=$.auth,ee=this._routingTableRegistry.get(G,function(){return new c.RoutingTable({database:G})});return ee.isStaleFor(H)?(this._log.info('Routing table is stale for database: "'.concat(G,'" and access mode: "').concat(H,'": ').concat(ee)),this._refreshRoutingTable(ee,Q,te,Z).then(function(oe){return re(oe.database),oe})):ee},x.prototype._refreshRoutingTable=function(L,$,H,G){var Q=L.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(Q,L,$,H,G):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(Q,L,$,H,G)},x.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(L,$,H,G,Q){return o(this,void 0,void 0,function(){var te,re,Z,ee,oe,je,Se;return a(this,function(ce){switch(ce.label){case 0:return te=[],[4,this._fetchRoutingTableUsingSeedRouter(te,this._seedRouter,$,H,G,Q)];case 1:return re=s.apply(void 0,[ce.sent(),2]),Z=re[0],ee=re[1],Z?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(L,$,H,G,Q)];case 3:oe=s.apply(void 0,[ce.sent(),2]),je=oe[0],Se=oe[1],Z=je,ee=Se||ee,ce.label=4;case 4:return[4,this._applyRoutingTableIfPossible($,Z,ee)];case 5:return[2,ce.sent()]}})})},x.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(L,$,H,G,Q){return o(this,void 0,void 0,function(){var te,re,Z,ee;return a(this,function(oe){switch(oe.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(L,$,H,G,Q)];case 1:return te=s.apply(void 0,[oe.sent(),2]),re=te[0],Z=te[1],re?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(L,this._seedRouter,$,H,G,Q)];case 2:ee=s.apply(void 0,[oe.sent(),2]),re=ee[0],Z=ee[1],oe.label=3;case 3:return[4,this._applyRoutingTableIfPossible($,re,Z)];case 4:return[2,oe.sent()]}})})},x.prototype._fetchRoutingTableUsingKnownRouters=function(L,$,H,G,Q){return o(this,void 0,void 0,function(){var te,re,Z,ee;return a(this,function(oe){switch(oe.label){case 0:return[4,this._fetchRoutingTable(L,$,H,G,Q)];case 1:return te=s.apply(void 0,[oe.sent(),2]),re=te[0],Z=te[1],re?[2,[re,null]]:(ee=L.length-1,x._forgetRouter($,L,ee),[2,[null,Z]])}})})},x.prototype._fetchRoutingTableUsingSeedRouter=function(L,$,H,G,Q,te){return o(this,void 0,void 0,function(){var re,Z;return a(this,function(ee){switch(ee.label){case 0:return[4,this._resolveSeedRouter($)];case 1:return re=ee.sent(),Z=re.filter(function(oe){return L.indexOf(oe)<0}),[4,this._fetchRoutingTable(Z,H,G,Q,te)];case 2:return[2,ee.sent()]}})})},x.prototype._resolveSeedRouter=function(L){return o(this,void 0,void 0,function(){var $,H,G=this;return a(this,function(Q){switch(Q.label){case 0:return[4,this._hostNameResolver.resolve(L)];case 1:return $=Q.sent(),[4,Promise.all($.map(function(te){return G._dnsResolver.resolve(te)}))];case 2:return H=Q.sent(),[2,[].concat.apply([],H)]}})})},x.prototype._fetchRoutingTable=function(L,$,H,G,Q){return o(this,void 0,void 0,function(){var te=this;return a(this,function(re){return[2,L.reduce(function(Z,ee,oe){return o(te,void 0,void 0,function(){var je,Se,ce,xe,De,Pe,Le;return a(this,function(Ve){switch(Ve.label){case 0:return[4,Z];case 1:return je=s.apply(void 0,[Ve.sent(),1]),Se=je[0],Se?[2,[Se,null]]:(ce=oe-1,x._forgetRouter($,L,ce),[4,this._createSessionForRediscovery(ee,H,G,Q)]);case 2:if(xe=s.apply(void 0,[Ve.sent(),2]),De=xe[0],Pe=xe[1],!De)return[3,8];Ve.label=3;case 3:return Ve.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(De,$.database,ee,G)];case 4:return[2,[Ve.sent(),null]];case 5:return Le=Ve.sent(),[2,this._handleRediscoveryError(Le,ee)];case 6:return De.close(),[7];case 7:return[3,9];case 8:return[2,[null,Pe]];case 9:return[2]}})})},Promise.resolve([null,null]))]})})},x.prototype._createSessionForRediscovery=function(L,$,H,G){return o(this,void 0,void 0,function(){var Q,te,re,Z,ee,oe,je=this;return a(this,function(Se){switch(Se.label){case 0:return Se.trys.push([0,4,,5]),[4,this._connectionPool.acquire({auth:G},L)];case 1:return Q=Se.sent(),G?[4,this._verifyStickyConnection({auth:G,connection:Q,address:L})]:[3,3];case 2:Se.sent(),Se.label=3;case 3:return te=f.ConnectionErrorHandler.create({errorCode:h,handleSecurityError:function(ce,xe,De){return je._handleSecurityError(ce,xe,De)}}),re=Q._sticky?new f.DelegateConnection(Q):new f.DelegateConnection(Q,te),Z=new b.default(re),ee=Q.protocol().version,ee<4?[2,[new d.Session({mode:O,bookmarks:v.empty(),connectionProvider:Z}),null]]:[2,[new d.Session({mode:E,database:M,bookmarks:$,connectionProvider:Z,impersonatedUser:H}),null]];case 4:return oe=Se.sent(),[2,this._handleRediscoveryError(oe,L)];case 5:return[2]}})})},x.prototype._handleRediscoveryError=function(L,$){if(Y(L)||K(L))throw L;if(L.code===R)throw(0,d.newError)("Server at ".concat($.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),g,L);return this._log.warn("unable to fetch routing table because of an error ".concat(L)),[null,L]},x.prototype._applyRoutingTableIfPossible=function(L,$,H){return o(this,void 0,void 0,function(){return a(this,function(G){switch(G.label){case 0:if(!$)throw(0,d.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(L),g,H);return $.writers.length===0&&(this._useSeedRouter=!0),[4,this._updateRoutingTable($)];case 1:return G.sent(),[2,$]}})})},x.prototype._updateRoutingTable=function(L){return o(this,void 0,void 0,function(){return a(this,function($){switch($.label){case 0:return[4,this._connectionPool.keepAll(L.allServers())];case 1:return $.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(L),this._log.info("Updated routing table ".concat(L)),[2]}})})},x._forgetRouter=function(L,$,H){var G=$[H];L&&G&&L.forgetRouter(G)},x.prototype._channelSsrCallback=function(L,$){if($==="OPEN")L===!0?this._withSSR=this._withSSR+1:this._withoutSSR=this._withoutSSR+1;else if($==="CLOSE")L===!0?this._withSSR=this._withSSR-1:this._withoutSSR=this._withoutSSR-1;else throw(0,d.newError)("Channel SSR Callback invoked with action other than 'OPEN' or 'CLOSE'")},x.prototype.SSREnabled=function(){return this._withSSR>0&&this._withoutSSR===0},x})(m.default);Ae.default=F;var W=(function(){function N(x){this._tables=new Map,this._routingTablePurgeDelay=x}return N.prototype.register=function(x){return this._tables.set(x.database,x),this},N.prototype.apply=function(x,L){var $=L===void 0?{}:L,H=$.applyWhenExists,G=$.applyWhenDontExists,Q=G===void 0?function(){}:G;return this._tables.has(x)?H(this._tables.get(x)):typeof x=="string"||x===null?Q():this._forEach(H),this},N.prototype.get=function(x,L){return this._tables.has(x)?this._tables.get(x):typeof L=="function"?L():L},N.prototype.removeExpired=function(){var x=this;return this._removeIf(function(L){return L.isExpiredFor(x._routingTablePurgeDelay)})},N.prototype._forEach=function(x){var L,$;try{for(var H=u(this._tables),G=H.next();!G.done;G=H.next()){var Q=s(G.value,2),te=Q[1];x(te)}}catch(re){L={error:re}}finally{try{G&&!G.done&&($=H.return)&&$.call(H)}finally{if(L)throw L.error}}return this},N.prototype._remove=function(x){return this._tables.delete(x),this},N.prototype._removeIf=function(x){var L,$;try{for(var H=u(this._tables),G=H.next();!G.done;G=H.next()){var Q=s(G.value,2),te=Q[0],re=Q[1];x(re)&&this._remove(te)}}catch(Z){L={error:Z}}finally{try{G&&!G.done&&($=H.return)&&$.call(H)}finally{if(L)throw L.error}}return this},N})();function Y(N){return[A,D,j,B,q,T,k].includes(N.code)}function K(N){var x;return((x=N.code)===null||x===void 0?void 0:x.startsWith("Neo.ClientError.Security."))&&![U].includes(N.code)}return Ae}var P0;function eA(){return P0||(P0=1,(function(e){var t=ic&&ic.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingConnectionProvider=e.DirectConnectionProvider=e.PooledConnectionProvider=e.SingleConnectionProvider=void 0;var r=xE();Object.defineProperty(e,"SingleConnectionProvider",{enumerable:!0,get:function(){return t(r).default}});var n=tv();Object.defineProperty(e,"PooledConnectionProvider",{enumerable:!0,get:function(){return t(n).default}});var i=ZR();Object.defineProperty(e,"DirectConnectionProvider",{enumerable:!0,get:function(){return t(i).default}});var o=JR();Object.defineProperty(e,"RoutingConnectionProvider",{enumerable:!0,get:function(){return t(o).default}})})(ic)),ic}var T0;function tA(){return T0||(T0=1,(function(e){var t=Ht&&Ht.__createBinding||(Object.create?(function(o,a,u,s){s===void 0&&(s=u);var l=Object.getOwnPropertyDescriptor(a,u);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[u]}}),Object.defineProperty(o,s,l)}):(function(o,a,u,s){s===void 0&&(s=u),o[s]=a[u]})),r=Ht&&Ht.__setModuleDefault||(Object.create?(function(o,a){Object.defineProperty(o,"default",{enumerable:!0,value:a})}):function(o,a){o.default=a}),n=Ht&&Ht.__importStar||function(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&t(a,o,u);return r(a,o),a},i=Ht&&Ht.__exportStar||function(o,a){for(var u in o)u!=="default"&&!Object.prototype.hasOwnProperty.call(a,u)&&t(a,o,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.packstream=e.channel=e.buf=e.bolt=e.loadBalancing=void 0,e.loadBalancing=n(nE()),e.bolt=n(Qh()),e.buf=n(Gh()),e.channel=n(vi()),e.packstream=n(_i()),i(eA(),e)})(Ht)),Ht}var C0;function rA(){return C0||(C0=1,(function(e){var t=Nr&&Nr.__awaiter||function(j,U,B,q){function T(k){return k instanceof B?k:new B(function(M){M(k)})}return new(B||(B=Promise))(function(k,M){function V(W){try{F(q.next(W))}catch(Y){M(Y)}}function z(W){try{F(q.throw(W))}catch(Y){M(Y)}}function F(W){W.done?k(W.value):T(W.value).then(V,z)}F((q=q.apply(j,U||[])).next())})},r=Nr&&Nr.__generator||function(j,U){var B={label:0,sent:function(){if(k[0]&1)throw k[1];return k[1]},trys:[],ops:[]},q,T,k,M;return M={next:V(0),throw:V(1),return:V(2)},typeof Symbol=="function"&&(M[Symbol.iterator]=function(){return this}),M;function V(F){return function(W){return z([F,W])}}function z(F){if(q)throw new TypeError("Generator is already executing.");for(;M&&(M=0,F[0]&&(B=0)),B;)try{if(q=1,T&&(k=F[0]&2?T.return:F[0]?T.throw||((k=T.return)&&k.call(T),0):T.next)&&!(k=k.call(T,F[1])).done)return k;switch(T=0,k&&(F=[F[0]&2,k.value]),F[0]){case 0:case 1:k=F;break;case 4:return B.label++,{value:F[1],done:!1};case 5:B.label++,T=F[1],F=[0];continue;case 7:F=B.ops.pop(),B.trys.pop();continue;default:if(k=B.trys,!(k=k.length>0&&k[k.length-1])&&(F[0]===6||F[0]===2)){B=0;continue}if(F[0]===3&&(!k||F[1]>k[0]&&F[1]<k[3])){B.label=F[1];break}if(F[0]===6&&B.label<k[1]){B.label=k[1],k=F;break}if(k&&B.label<k[2]){B.label=k[2],B.ops.push(F);break}k[2]&&B.ops.pop(),B.trys.pop();continue}F=U.call(j,B)}catch(W){F=[6,W],T=0}finally{q=k=0}if(F[0]&5)throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}},n=Nr&&Nr.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(e,"__esModule",{value:!0}),e.UnboundRelationship=e.Relationship=e.Node=e.Record=e.ServerInfo=e.GqlStatusObject=e.Notification=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ResultSummary=e.RxResult=e.RxManagedTransaction=e.RxTransaction=e.RxSession=e.EagerResult=e.Result=e.ManagedTransaction=e.Transaction=e.Session=e.Driver=e.temporal=e.spatial=e.graph=e.error=e.routing=e.session=e.types=e.logging=e.auth=e.isRetriableError=e.Neo4jError=e.integer=e.isUnboundRelationship=e.isRelationship=e.isPathSegment=e.isPath=e.isNode=e.isDateTime=e.isLocalDateTime=e.isDate=e.isTime=e.isLocalTime=e.isDuration=e.isPoint=e.isInt=e.int=e.hasReachableServer=e.driver=e.authTokenManagers=void 0,e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.bookmarkManager=e.DateTime=e.LocalDateTime=e.Date=e.Time=e.LocalTime=e.Duration=e.Integer=e.Point=e.PathSegment=e.Path=void 0;var i=PR();Object.defineProperty(e,"Driver",{enumerable:!0,get:function(){return i.Driver}});var o=n(TR()),a=ae();Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return a.authTokenManagers}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return a.Neo4jError}}),Object.defineProperty(e,"isRetriableError",{enumerable:!0,get:function(){return a.isRetriableError}}),Object.defineProperty(e,"error",{enumerable:!0,get:function(){return a.error}}),Object.defineProperty(e,"Integer",{enumerable:!0,get:function(){return a.Integer}}),Object.defineProperty(e,"int",{enumerable:!0,get:function(){return a.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return a.isInt}}),Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return a.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return a.Point}}),Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return a.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return a.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return a.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return a.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return a.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return a.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return a.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return a.isLocalTime}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return a.isNode}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return a.isPath}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return a.isPathSegment}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return a.isRelationship}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return a.isTime}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return a.isUnboundRelationship}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return a.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return a.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return a.Time}}),Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return a.Node}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return a.Path}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return a.PathSegment}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return a.Relationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return a.UnboundRelationship}}),Object.defineProperty(e,"Record",{enumerable:!0,get:function(){return a.Record}}),Object.defineProperty(e,"ResultSummary",{enumerable:!0,get:function(){return a.ResultSummary}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return a.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return a.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return a.QueryStatistics}}),Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return a.Notification}}),Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return a.GqlStatusObject}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return a.ServerInfo}}),Object.defineProperty(e,"Result",{enumerable:!0,get:function(){return a.Result}}),Object.defineProperty(e,"EagerResult",{enumerable:!0,get:function(){return a.EagerResult}}),Object.defineProperty(e,"auth",{enumerable:!0,get:function(){return a.auth}}),Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return a.Session}}),Object.defineProperty(e,"Transaction",{enumerable:!0,get:function(){return a.Transaction}}),Object.defineProperty(e,"ManagedTransaction",{enumerable:!0,get:function(){return a.ManagedTransaction}}),Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return a.bookmarkManager}}),Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return a.routing}}),Object.defineProperty(e,"resultTransformers",{enumerable:!0,get:function(){return a.resultTransformers}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return a.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return a.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return a.notificationSeverityLevel}}),Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return a.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return a.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return a.notificationFilterMinimumSeverityLevel}}),Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return a.clientCertificateProviders}});var u=tA(),s=n(tE());e.RxSession=s.default;var l=n(Kh());e.RxTransaction=l.default;var d=n(eE());e.RxManagedTransaction=d.default;var c=n(Ql());e.RxResult=c.default;var p=a.internal.util,b=p.ENCRYPTION_ON,m=p.assertString,_=p.isEmptyObjectOrNull,f=a.internal.serverAddress.ServerAddress,y=a.internal.urlUtil,g="neo4j-javascript/"+o.default;function h(j){return typeof j=="object"&&j!=null&&"getToken"in j&&"handleSecurityException"in j&&typeof j.getToken=="function"&&typeof j.handleSecurityException=="function"}function v(j){if(h(j))return j;var U=j;return U=U||{},U.scheme=U.scheme||"none",(0,a.staticAuthTokenManager)({authToken:U})}function w(j,U,B){B===void 0&&(B={}),m(j,"Bolt URL");var q=y.parseDatabaseUrl(j),T=!1,k=!1,M;switch(q.scheme){case"bolt":break;case"bolt+s":k=!0,M="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":k=!0,M="TRUST_ALL_CERTIFICATES";break;case"neo4j":T=!0;break;case"neo4j+s":k=!0,M="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",T=!0;break;case"neo4j+ssc":k=!0,M="TRUST_ALL_CERTIFICATES",T=!0;break;default:throw new Error("Unknown scheme: ".concat(q.scheme))}if(k){if("encrypted"in B||"trust"in B)throw new Error("Encryption/trust can only be configured either through URL or config, not both");B.encrypted=b,B.trust=M,B.clientCertificate=(0,a.resolveCertificateProvider)(B.clientCertificate)}var V=v(U);B.userAgent=B.userAgent||g,B.boltAgent=a.internal.boltAgent.fromVersion(o.default);var z=f.fromUrl(q.hostAndPort),F={address:z,typename:T?"Routing":"Direct",routing:T};return new i.Driver(F,B,W());function W(){if(T)return function(Y,K,N,x){return new u.RoutingConnectionProvider({id:Y,config:K,log:N,hostNameResolver:x,authTokenManager:V,address:z,userAgent:K.userAgent,boltAgent:K.boltAgent,routingContext:q.query})};if(!_(q.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(j,"'"));return function(Y,K,N){return new u.DirectConnectionProvider({id:Y,config:K,log:N,authTokenManager:V,address:z,userAgent:K.userAgent,boltAgent:K.boltAgent})}}}e.driver=w;function E(j,U){return t(this,void 0,void 0,function(){var B;return r(this,function(q){switch(q.label){case 0:B=w(j,{scheme:"none",principal:"",credentials:""},U),q.label=1;case 1:return q.trys.push([1,,3,5]),[4,B.getNegotiatedProtocolVersion()];case 2:return q.sent(),[2,!0];case 3:return[4,B.close()];case 4:return q.sent(),[7];case 5:return[2]}})})}e.hasReachableServer=E;var O={console:function(j){return{level:j,logger:function(U,B){return console.log("".concat(rC.Date.now()," ").concat(U.toUpperCase()," ").concat(B))}}}};e.logging=O;var S={Node:a.Node,Relationship:a.Relationship,UnboundRelationship:a.UnboundRelationship,PathSegment:a.PathSegment,Path:a.Path,Result:a.Result,EagerResult:a.EagerResult,ResultSummary:a.ResultSummary,Record:a.Record,Point:a.Point,Date:a.Date,DateTime:a.DateTime,Duration:a.Duration,LocalDateTime:a.LocalDateTime,LocalTime:a.LocalTime,Time:a.Time,Integer:a.Integer};e.types=S;var P={READ:i.READ,WRITE:i.WRITE};e.session=P;var I={toNumber:a.toNumber,toString:a.toString,inSafeRange:a.inSafeRange};e.integer=I;var C={isPoint:a.isPoint};e.spatial=C;var R={isDuration:a.isDuration,isLocalTime:a.isLocalTime,isTime:a.isTime,isDate:a.isDate,isLocalDateTime:a.isLocalDateTime,isDateTime:a.isDateTime};e.temporal=R;var A={isNode:a.isNode,isPath:a.isPath,isPathSegment:a.isPathSegment,isRelationship:a.isRelationship,isUnboundRelationship:a.isUnboundRelationship};e.graph=A;var D={authTokenManagers:a.authTokenManagers,driver:w,hasReachableServer:E,int:a.int,isInt:a.isInt,isPoint:a.isPoint,isDuration:a.isDuration,isLocalTime:a.isLocalTime,isTime:a.isTime,isDate:a.isDate,isLocalDateTime:a.isLocalDateTime,isDateTime:a.isDateTime,isNode:a.isNode,isPath:a.isPath,isPathSegment:a.isPathSegment,isRelationship:a.isRelationship,isUnboundRelationship:a.isUnboundRelationship,integer:I,Neo4jError:a.Neo4jError,isRetriableError:a.isRetriableError,auth:a.auth,logging:O,types:S,session:P,routing:a.routing,error:a.error,graph:A,spatial:C,temporal:R,Driver:i.Driver,Session:a.Session,Transaction:a.Transaction,ManagedTransaction:a.ManagedTransaction,Result:a.Result,EagerResult:a.EagerResult,RxSession:s.default,RxTransaction:l.default,RxManagedTransaction:d.default,RxResult:c.default,ResultSummary:a.ResultSummary,Plan:a.Plan,ProfiledPlan:a.ProfiledPlan,QueryStatistics:a.QueryStatistics,Notification:a.Notification,GqlStatusObject:a.GqlStatusObject,ServerInfo:a.ServerInfo,Record:a.Record,Node:a.Node,Relationship:a.Relationship,UnboundRelationship:a.UnboundRelationship,Path:a.Path,PathSegment:a.PathSegment,Point:a.Point,Integer:a.Integer,Duration:a.Duration,LocalTime:a.LocalTime,Time:a.Time,Date:a.Date,LocalDateTime:a.LocalDateTime,DateTime:a.DateTime,bookmarkManager:a.bookmarkManager,resultTransformers:a.resultTransformers,notificationCategory:a.notificationCategory,notificationSeverityLevel:a.notificationSeverityLevel,notificationFilterDisabledCategory:a.notificationFilterDisabledCategory,notificationFilterMinimumSeverityLevel:a.notificationFilterMinimumSeverityLevel,clientCertificateProviders:a.clientCertificateProviders};e.default=D})(Nr)),Nr}var R0=rA();const nA=iC({prefix:"9",name:"base10",alphabet:"0123456789"}),iA=Object.freeze(Object.defineProperty({__proto__:null,base10:nA},Symbol.toStringTag,{value:"Module"})),oA=ai({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),aA=ai({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),uA=Object.freeze(Object.defineProperty({__proto__:null,base16:oA,base16upper:aA},Symbol.toStringTag,{value:"Module"})),sA=ai({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),cA=Object.freeze(Object.defineProperty({__proto__:null,base2:sA},Symbol.toStringTag,{value:"Module"})),VE=Array.from(""),lA=VE.reduce((e,t,r)=>(e[r]=t,e),[]),fA=VE.reduce((e,t,r)=>{const n=t.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${t}`);return e[n]=r,e},[]);function dA(e){return e.reduce((t,r)=>(t+=lA[r],t),"")}function hA(e){const t=[];for(const r of e){const n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);const i=fA[n];if(i==null)throw new Error(`Non-base256emoji character: ${r}`);t.push(i)}return new Uint8Array(t)}const vA=kw({prefix:"",name:"base256emoji",encode:dA,decode:hA}),pA=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:vA},Symbol.toStringTag,{value:"Module"})),Jl=ai({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),_A=ai({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),qc=ai({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),bA=ai({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),yA=Object.freeze(Object.defineProperty({__proto__:null,base64:Jl,base64pad:_A,base64url:qc,base64urlpad:bA},Symbol.toStringTag,{value:"Module"})),mA=ai({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),gA=Object.freeze(Object.defineProperty({__proto__:null,base8:mA},Symbol.toStringTag,{value:"Module"})),wA=kw({prefix:"\0",name:"identity",encode:e=>oC(e),decode:e=>aC(e)}),OA=Object.freeze(Object.defineProperty({__proto__:null,identity:wA},Symbol.toStringTag,{value:"Module"})),EA=new TextEncoder,SA=new TextDecoder,PA="json",TA=512;function CA(e){return EA.encode(JSON.stringify(e))}function RA(e){return JSON.parse(SA.decode(e))}const AA=Object.freeze(Object.defineProperty({__proto__:null,code:TA,decode:RA,encode:CA,name:PA},Symbol.toStringTag,{value:"Module"})),IA="raw",jA=85;function NA(e){return dh(e)}function kA(e){return dh(e)}const MA=Object.freeze(Object.defineProperty({__proto__:null,code:jA,decode:kA,encode:NA,name:IA},Symbol.toStringTag,{value:"Module"})),$E=0,DA="identity",WE=dh;function LA(e,t){if(t?.truncate!=null&&t.truncate!==e.byteLength){if(t.truncate<0||t.truncate>e.byteLength)throw new Error(`Invalid truncate option, must be less than or equal to ${e.byteLength}`);e=e.subarray(0,t.truncate)}return Oc($E,WE(e))}const ni={code:$E,name:DA,encode:WE,digest:LA},UA=Object.freeze(Object.defineProperty({__proto__:null,identity:ni},Symbol.toStringTag,{value:"Module"})),BA=20;function HE({name:e,code:t,encode:r,minDigestLength:n,maxDigestLength:i}){return new qA(e,t,r,n,i)}class qA{name;code;encode;minDigestLength;maxDigestLength;constructor(t,r,n,i,o){this.name=t,this.code=r,this.encode=n,this.minDigestLength=i??BA,this.maxDigestLength=o}digest(t,r){if(r?.truncate!=null){if(r.truncate<this.minDigestLength)throw new Error(`Invalid truncate option, must be greater than or equal to ${this.minDigestLength}`);if(this.maxDigestLength!=null&&r.truncate>this.maxDigestLength)throw new Error(`Invalid truncate option, must be less than or equal to ${this.maxDigestLength}`)}if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?A0(n,this.code,r?.truncate):n.then(i=>A0(i,this.code,r?.truncate))}else throw Error("Unknown type, must be binary type")}}function A0(e,t,r){if(r!=null&&r!==e.byteLength){if(r>e.byteLength)throw new Error(`Invalid truncate option, must be less than or equal to ${e.byteLength}`);e=e.subarray(0,r)}return Oc(t,e)}function zE(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}const ef=HE({name:"sha2-256",code:18,encode:zE("SHA-256")}),xA=HE({name:"sha2-512",code:19,encode:zE("SHA-512")}),FA=Object.freeze(Object.defineProperty({__proto__:null,sha256:ef,sha512:xA},Symbol.toStringTag,{value:"Module"})),Ol={...OA,...cA,...gA,...iA,...uA,...cC,...sC,...uC,...yA,...pA},VA={...FA,...UA},$A={raw:MA,json:AA};function Gn(e=0){return new Uint8Array(e)}function ii(e=0){return new Uint8Array(e)}function KE(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const I0=KE("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Sd=KE("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=ii(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),GE={utf8:I0,"utf-8":I0,hex:Ol.base16,latin1:Sd,ascii:Sd,binary:Sd,...Ol};function de(e,t="utf8"){const r=GE[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)}let kt=class extends Error{static name="InvalidMultiaddrError";name="InvalidMultiaddrError"};class pc extends Error{static name="ValidationError";name="ValidationError"}let WA=class extends Error{static name="InvalidParametersError";name="InvalidParametersError"};class HA extends Error{static name="UnknownProtocolError";name="UnknownProtocolError"}function Mt(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function Ce(e,t="utf8"){const r=GE[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)}const zA=Math.pow(2,7),KA=Math.pow(2,14),GA=Math.pow(2,21),rv=Math.pow(2,28),nv=Math.pow(2,35),iv=Math.pow(2,42),ov=Math.pow(2,49),ye=128,tt=127;function fn(e){if(e<zA)return 1;if(e<KA)return 2;if(e<GA)return 3;if(e<rv)return 4;if(e<nv)return 5;if(e<iv)return 6;if(e<ov)return 7;if(Number.MAX_SAFE_INTEGER!=null&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function El(e,t,r=0){switch(fn(e)){case 8:t[r++]=e&255|ye,e/=128;case 7:t[r++]=e&255|ye,e/=128;case 6:t[r++]=e&255|ye,e/=128;case 5:t[r++]=e&255|ye,e/=128;case 4:t[r++]=e&255|ye,e>>>=7;case 3:t[r++]=e&255|ye,e>>>=7;case 2:t[r++]=e&255|ye,e>>>=7;case 1:{t[r++]=e&255,e>>>=7;break}default:throw new Error("unreachable")}return t}function YA(e,t,r=0){switch(fn(e)){case 8:t.set(r++,e&255|ye),e/=128;case 7:t.set(r++,e&255|ye),e/=128;case 6:t.set(r++,e&255|ye),e/=128;case 5:t.set(r++,e&255|ye),e/=128;case 4:t.set(r++,e&255|ye),e>>>=7;case 3:t.set(r++,e&255|ye),e>>>=7;case 2:t.set(r++,e&255|ye),e>>>=7;case 1:{t.set(r++,e&255),e>>>=7;break}default:throw new Error("unreachable")}return t}function YE(e,t){let r=e[t],n=0;if(n+=r&tt,r<ye||(r=e[t+1],n+=(r&tt)<<7,r<ye)||(r=e[t+2],n+=(r&tt)<<14,r<ye)||(r=e[t+3],n+=(r&tt)<<21,r<ye)||(r=e[t+4],n+=(r&tt)*rv,r<ye)||(r=e[t+5],n+=(r&tt)*nv,r<ye)||(r=e[t+6],n+=(r&tt)*iv,r<ye)||(r=e[t+7],n+=(r&tt)*ov,r<ye))return n;throw new RangeError("Could not decode varint")}function ZA(e,t){let r=e.get(t),n=0;if(n+=r&tt,r<ye||(r=e.get(t+1),n+=(r&tt)<<7,r<ye)||(r=e.get(t+2),n+=(r&tt)<<14,r<ye)||(r=e.get(t+3),n+=(r&tt)<<21,r<ye)||(r=e.get(t+4),n+=(r&tt)*rv,r<ye)||(r=e.get(t+5),n+=(r&tt)*nv,r<ye)||(r=e.get(t+6),n+=(r&tt)*iv,r<ye)||(r=e.get(t+7),n+=(r&tt)*ov,r<ye))return n;throw new RangeError("Could not decode varint")}function $B(e,t,r=0){return t==null&&(t=ii(fn(e))),t instanceof Uint8Array?El(e,t,r):YA(e,t,r)}function ZE(e,t=0){return e instanceof Uint8Array?YE(e,t):ZA(e,t)}function WB(e){return e}function _c(e,t){t==null&&(t=e.reduce((i,o)=>i+o.length,0));const r=ii(t);let n=0;for(const i of e)r.set(i,n),n+=i.length;return r}class XA{index=0;input="";new(t){return this.index=0,this.input=t,this}readAtomically(t){const r=this.index,n=t();return n===void 0&&(this.index=r),n}parseWith(t){const r=t();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(t){return this.readAtomically(()=>{const r=this.readChar();if(r===t)return r})}readSeparator(t,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(t)===void 0))return n()})}readNumber(t,r,n,i){return this.readAtomically(()=>{let o=0,a=0;const u=this.peekChar();if(u===void 0)return;const s=u==="0",l=2**(8*i)-1;for(;;){const d=this.readAtomically(()=>{const c=this.readChar();if(c===void 0)return;const p=Number.parseInt(c,t);if(!Number.isNaN(p))return p});if(d===void 0)break;if(o*=t,o+=d,o>l||(a+=1,r!==void 0&&a>r))return}if(a!==0)return!n&&s&&a>1?void 0:o})}readIPv4Addr(){return this.readAtomically(()=>{const t=new Uint8Array(4);for(let r=0;r<t.length;r++){const n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;t[r]=n}return t})}readIPv6Addr(){const t=r=>{for(let n=0;n<r.length/2;n++){const i=n*2;if(n<r.length-3){const a=this.readSeparator(":",n,()=>this.readIPv4Addr());if(a!==void 0)return r[i]=a[0],r[i+1]=a[1],r[i+2]=a[2],r[i+3]=a[3],[i+4,!0]}const o=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(o===void 0)return[i,!1];r[i]=o>>8,r[i+1]=o&255}return[r.length,!1]};return this.readAtomically(()=>{const r=new Uint8Array(16),[n,i]=t(r);if(n===16)return r;if(i||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const o=new Uint8Array(14),a=16-(n+2),[u]=t(o.subarray(0,a));return r.set(o.subarray(0,u),16-u),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const XE=45,QA=15,Yo=new XA;function JA(e){if(!(e.length>QA))return Yo.new(e).parseWith(()=>Yo.readIPv4Addr())}function eI(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>XE))return Yo.new(e).parseWith(()=>Yo.readIPv6Addr())}function HB(e,t=!1){if(e.includes("%")&&(e=e.split("%")[0]),e.length>XE)return;const r=Yo.new(e).parseWith(()=>Yo.readIPAddr());if(r)return t&&r.length===4?Uint8Array.from([0,0,0,0,0,0,0,0,0,0,255,255,r[0],r[1],r[2],r[3]]):r}function QE(e){return!!JA(e)}function tI(e){return!!eI(e)}const Wd=4,Sl=6,Hd=273,rI=33,dc=41,JE=42,nI=43,av=53,uv=54,tf=55,sv=56,iI=132,oI=301,aI=302,uI=400,eS=421,sI=444,cI=445,lI=446,fI=447,tS=448,dI=449,hI=454,vI=460,pI=461,_I=465,bI=466,yI=480,mI=481,gI=443,wI=477,OI=478,EI=479,SI=277,PI=275,TI=276,CI=280,RI=281,rS=290,AI=777;function j0(e){return t=>de(t,e)}function N0(e){return t=>Ce(t,e)}function sc(e){return new DataView(e.buffer).getUint16(e.byteOffset).toString()}function Fo(e){const t=new ArrayBuffer(2);return new DataView(t).setUint16(0,typeof e=="string"?parseInt(e):e),new Uint8Array(t)}function II(e){const t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==16)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);const r=Ce(t[0],"base32"),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=Fo(n);return _c([r,i],r.length+i.length)}function jI(e){const t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==56)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);const r=Mw.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=Fo(n);return _c([r,i],r.length+i.length)}function k0(e){const t=e.subarray(0,e.length-2),r=e.subarray(e.length-2),n=de(t,"base32"),i=sc(r);return`${n}:${i}`}const nS=function(e){e=e.toString().trim();const t=new Uint8Array(4);return e.split(/\./g).forEach((r,n)=>{const i=parseInt(r,10);if(isNaN(i)||i<0||i>255)throw new kt("Invalid byte value in IP address");t[n]=i}),t},NI=function(e){let t=0;e=e.toString().trim();const r=e.split(":",8);let n;for(n=0;n<r.length;n++){const o=QE(r[n]);let a;o&&(a=nS(r[n]),r[n]=de(a.subarray(0,2),"base16")),a!=null&&++n<8&&r.splice(n,0,de(a.subarray(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);const o=[n,1];for(n=9-r.length;n>0;n--)o.push("0");r.splice.apply(r,o)}const i=new Uint8Array(t+16);for(n=0;n<r.length;n++){r[n]===""&&(r[n]="0");const o=parseInt(r[n],16);if(isNaN(o)||o<0||o>65535)throw new kt("Invalid byte value in IP address");i[t++]=o>>8&255,i[t++]=o&255}return i},kI=function(e){if(e.byteLength!==4)throw new kt("IPv4 address was incorrect length");const t=[];for(let r=0;r<e.byteLength;r++)t.push(e[r]);return t.join(".")},MI=function(e){if(e.byteLength!==16)throw new kt("IPv6 address was incorrect length");const t=[];for(let n=0;n<e.byteLength;n+=2){const i=e[n],o=e[n+1],a=`${i.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}`;t.push(a)}const r=t.join(":");try{const n=new URL(`http://[${r}]`);return n.hostname.substring(1,n.hostname.length-1)}catch{throw new kt(`Invalid IPv6 address "${r}"`)}};function DI(e){try{const t=new URL(`http://[${e}]`);return t.hostname.substring(1,t.hostname.length-1)}catch{throw new kt(`Invalid IPv6 address "${e}"`)}}const Pd=Object.values(Ol).map(e=>e.decoder),LI=(function(){let e=Pd[0].or(Pd[1]);return Pd.slice(2).forEach(t=>e=e.or(t)),e})();function UI(e){return LI.decode(e)}function BI(e){return t=>e.encoder.encode(t)}function qI(e){if(parseInt(e).toString()!==e)throw new pc("Value must be an integer")}function xI(e){if(e<0)throw new pc("Value must be a positive integer, or zero")}function FI(e){return t=>{if(t>e)throw new pc(`Value must be smaller than or equal to ${e}`)}}function VI(...e){return t=>{for(const r of e)r(t)}}const il=VI(qI,xI,FI(65535)),et=-1;class $I{protocolsByCode=new Map;protocolsByName=new Map;getProtocol(t){let r;if(typeof t=="string"?r=this.protocolsByName.get(t):r=this.protocolsByCode.get(t),r==null)throw new HA(`Protocol ${t} was unknown`);return r}addProtocol(t){this.protocolsByCode.set(t.code,t),this.protocolsByName.set(t.name,t),t.aliases?.forEach(r=>{this.protocolsByName.set(r,t)})}removeProtocol(t){const r=this.protocolsByCode.get(t);r!=null&&(this.protocolsByCode.delete(r.code),this.protocolsByName.delete(r.name),r.aliases?.forEach(n=>{this.protocolsByName.delete(n)}))}}const Ar=new $I,WI=[{code:Wd,name:"ip4",size:32,valueToBytes:nS,bytesToValue:kI,validate:e=>{if(!QE(e))throw new pc(`Invalid IPv4 address "${e}"`)}},{code:Sl,name:"tcp",size:16,valueToBytes:Fo,bytesToValue:sc,validate:il},{code:Hd,name:"udp",size:16,valueToBytes:Fo,bytesToValue:sc,validate:il},{code:rI,name:"dccp",size:16,valueToBytes:Fo,bytesToValue:sc,validate:il},{code:dc,name:"ip6",size:128,valueToBytes:NI,bytesToValue:MI,stringToValue:DI,validate:e=>{if(!tI(e))throw new pc(`Invalid IPv6 address "${e}"`)}},{code:JE,name:"ip6zone",size:et},{code:nI,name:"ipcidr",size:8,bytesToValue:j0("base10"),valueToBytes:N0("base10")},{code:av,name:"dns",size:et,resolvable:!0},{code:uv,name:"dns4",size:et,resolvable:!0},{code:tf,name:"dns6",size:et,resolvable:!0},{code:sv,name:"dnsaddr",size:et,resolvable:!0},{code:iI,name:"sctp",size:16,valueToBytes:Fo,bytesToValue:sc,validate:il},{code:oI,name:"udt"},{code:aI,name:"utp"},{code:uI,name:"unix",size:et,path:!0,stringToValue:e=>decodeURIComponent(e),valueToString:e=>encodeURIComponent(e)},{code:eS,name:"p2p",aliases:["ipfs"],size:et,bytesToValue:j0("base58btc"),valueToBytes:e=>e.startsWith("Q")||e.startsWith("1")?N0("base58btc")(e):se.parse(e).multihash.bytes},{code:sI,name:"onion",size:96,bytesToValue:k0,valueToBytes:II},{code:cI,name:"onion3",size:296,bytesToValue:k0,valueToBytes:jI},{code:lI,name:"garlic64",size:et},{code:fI,name:"garlic32",size:et},{code:tS,name:"tls"},{code:dI,name:"sni",size:et},{code:hI,name:"noise"},{code:vI,name:"quic"},{code:pI,name:"quic-v1"},{code:_I,name:"webtransport"},{code:bI,name:"certhash",size:et,bytesToValue:BI(qc),valueToBytes:UI},{code:yI,name:"http"},{code:mI,name:"http-path",size:et,stringToValue:e=>`/${decodeURIComponent(e)}`,valueToString:e=>encodeURIComponent(e.substring(1))},{code:gI,name:"https"},{code:wI,name:"ws"},{code:OI,name:"wss"},{code:EI,name:"p2p-websocket-star"},{code:SI,name:"p2p-stardust"},{code:PI,name:"p2p-webrtc-star"},{code:TI,name:"p2p-webrtc-direct"},{code:CI,name:"webrtc-direct"},{code:RI,name:"webrtc"},{code:rS,name:"p2p-circuit"},{code:AI,name:"memory",size:et}];WI.forEach(e=>{Ar.addProtocol(e)});function HI(e){const t=[];let r=0;for(;r<e.length;){const n=ZE(e,r),i=Ar.getProtocol(n),o=fn(n),a=YI(i,e,r+o);let u=0;a>0&&i.size===et&&(u=fn(a));const s=o+u+a,l={code:n,name:i.name,bytes:e.subarray(r,r+s)};if(a>0){const d=r+o+u,c=e.subarray(d,d+a);l.value=i.bytesToValue?.(c)??de(c)}t.push(l),r+=s}return t}function zI(e){let t=0;const r=[];for(const n of e){if(n.bytes==null){const i=Ar.getProtocol(n.code),o=fn(n.code);let a,u=0,s=0;n.value!=null&&(a=i.valueToBytes?.(n.value)??Ce(n.value),u=a.byteLength,i.size===et&&(s=fn(u)));const l=new Uint8Array(o+s+u);let d=0;El(n.code,l,d),d+=o,a!=null&&(i.size===et&&(El(u,l,d),d+=s),l.set(a,d)),n.bytes=l}r.push(n.bytes),t+=n.bytes.byteLength}return _c(r,t)}function KI(e){if(e.charAt(0)!=="/")throw new kt('String multiaddr must start with "/"');const t=[];let r="protocol",n="",i="";for(let o=1;o<e.length;o++){const a=e.charAt(o);a!=="/"&&(r==="protocol"?i+=e.charAt(o):n+=e.charAt(o));const u=o===e.length-1;if(a==="/"||u){const s=Ar.getProtocol(i);if(r==="protocol"){if(s.size==null||s.size===0){t.push({code:s.code,name:s.name}),n="",i="",r="protocol";continue}else if(u)throw new kt(`Component ${i} was missing value`);r="value"}else if(r==="value"){const l={code:s.code,name:s.name};if(s.size!=null&&s.size!==0){if(n==="")throw new kt(`Component ${i} was missing value`);l.value=s.stringToValue?.(n)??n}t.push(l),n="",i="",r="protocol"}}}if(i!==""&&n!=="")throw new kt("Incomplete multiaddr");return t}function GI(e){return`/${e.flatMap(t=>{if(t.value==null)return t.name;const r=Ar.getProtocol(t.code);if(r==null)throw new kt(`Unknown protocol code ${t.code}`);return[t.name,r.valueToString?.(t.value)??t.value]}).join("/")}`}function YI(e,t,r){return e.size==null||e.size===0?0:e.size>0?e.size/8:ZE(t,r)}const ZI=Symbol.for("nodejs.util.inspect.custom"),iS=Symbol.for("@multiformats/multiaddr"),XI=[av,uv,tf,sv];class QI extends Error{constructor(t="No available resolver"){super(t),this.name="NoAvailableResolverError"}}function JI(e){if(e==null&&(e="/"),Pl(e))return e.getComponents();if(e instanceof Uint8Array)return HI(e);if(typeof e=="string")return e=e.replace(/\/(\/)+/,"/").replace(/(\/)+$/,""),e===""&&(e="/"),KI(e);if(Array.isArray(e))return e;throw new kt("Must be a string, Uint8Array, Component[], or another Multiaddr")}class Vo{[iS]=!0;#e;#t;#r;constructor(t="/",r={}){this.#e=JI(t),r.validate!==!1&&ej(this)}get bytes(){return this.#r==null&&(this.#r=zI(this.#e)),this.#r}toString(){return this.#t==null&&(this.#t=GI(this.#e)),this.#t}toJSON(){return this.toString()}toOptions(){let t,r,n,i,o="";for(const{code:u,name:s,value:l}of this.#e)u===JE&&(o=`%${l??""}`),XI.includes(u)&&(r="tcp",i=443,n=`${l??""}${o}`,t=u===tf?6:4),(u===Sl||u===Hd)&&(r=s==="tcp"?"tcp":"udp",i=parseInt(l??"")),(u===Wd||u===dc)&&(r="tcp",n=`${l??""}${o}`,t=u===dc?6:4);if(t==null||r==null||n==null||i==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:t,host:n,transport:r,port:i}}getComponents(){return[...this.#e]}protos(){return this.#e.map(({code:t,value:r})=>{const n=Ar.getProtocol(t);return{code:t,size:n.size??0,name:n.name,resolvable:!!n.resolvable,path:!!n.path}})}protoCodes(){return this.#e.map(({code:t})=>t)}protoNames(){return this.#e.map(({name:t})=>t)}tuples(){return this.#e.map(({code:t,value:r})=>{if(r==null)return[t];const n=Ar.getProtocol(t),i=[t];return r!=null&&i.push(n.valueToBytes?.(r)??Ce(r)),i})}stringTuples(){return this.#e.map(({code:t,value:r})=>r==null?[t]:[t,r])}encapsulate(t){const r=new Vo(t);return new Vo([...this.#e,...r.getComponents()],{validate:!1})}decapsulate(t){const r=t.toString(),n=this.toString(),i=n.lastIndexOf(r);if(i<0)throw new WA(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new Vo(n.slice(0,i),{validate:!1})}decapsulateCode(t){let r;for(let n=this.#e.length-1;n>-1;n--)if(this.#e[n].code===t){r=n;break}return new Vo(this.#e.slice(0,r),{validate:!1})}getPeerId(){try{let t=[];this.#e.forEach(({code:n,value:i})=>{n===eS&&t.push([n,i]),n===rS&&(t=[])});const r=t.pop();if(r?.[1]!=null){const n=r[1];return n[0]==="Q"||n[0]==="1"?de(ui.decode(`z${n}`),"base58btc"):de(se.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){for(const t of this.#e)if(Ar.getProtocol(t.code).path)return t.value??null;return null}equals(t){return Mt(this.bytes,t.bytes)}async resolve(t){const r=this.protos().find(o=>o.resolvable);if(r==null)return[this];const n=tj.get(r.name);if(n==null)throw new QI(`no available resolver for ${r.name}`);return(await n(this,t)).map(o=>wt(o))}nodeAddress(){const t=this.toOptions();if(t.transport!=="tcp"&&t.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(){return!(this.#e.length!==2||this.#e[0].code!==Wd&&this.#e[0].code!==dc||this.#e[1].code!==Sl&&this.#e[1].code!==Hd)}[ZI](){return`Multiaddr(${this.toString()})`}}function ej(e){e.getComponents().forEach(t=>{const r=Ar.getProtocol(t.code);t.value!=null&&r.validate?.(t.value)})}const tj=new Map;function Pl(e){return!!e?.[iS]}function wt(e){return new Vo(e)}function zB(e){const t=Ar.getProtocol(e);return{code:t.code,size:t.size??0,name:t.name,resolvable:!!t.resolvable,path:!!t.path}}class rj extends Array{constructor(){super(),this.inRecursive=[]}prefix(t){const r=this.inRecursive[this.inRecursive.length-1];r&&(r.type===ie.array&&(r.elements++,r.elements!==1&&t.push([44])),r.type===ie.map&&(r.elements++,r.elements!==1&&(r.elements%2===1?t.push([44]):t.push([58]))))}[ie.uint.major](t,r){this.prefix(t);const n=String(r.value),i=[];for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);t.push(i)}[ie.negint.major](t,r){this[ie.uint.major](t,r)}[ie.bytes.major](t,r){throw new Error(`${fc} unsupported type: Uint8Array`)}[ie.string.major](t,r){this.prefix(t);const n=lC(JSON.stringify(r.value));t.push(n.length>32?fC(n):n)}[ie.array.major](t,r){this.prefix(t),this.inRecursive.push({type:ie.array,elements:0}),t.push([91])}[ie.map.major](t,r){this.prefix(t),this.inRecursive.push({type:ie.map,elements:0}),t.push([123])}[ie.tag.major](t,r){}[ie.float.major](t,r){if(r.type.name==="break"){const a=this.inRecursive.pop();if(a){if(a.type===ie.array)t.push([93]);else if(a.type===ie.map)t.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(r.value===void 0)throw new Error(`${fc} unsupported type: undefined`);if(this.prefix(t),r.type.name==="true"){t.push([116,114,117,101]);return}else if(r.type.name==="false"){t.push([102,97,108,115,101]);return}else if(r.type.name==="null"){t.push([110,117,108,108]);return}const n=String(r.value),i=[];let o=!1;for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a),!o&&(i[a]===46||i[a]===101||i[a]===69)&&(o=!0);o||(i.push(46),i.push(48)),t.push(i)}}function nj(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw new Error(`${fc} complex map keys are not supported`);const r=e[0],n=t[0];if(r.type!==ie.string||n.type!==ie.string)throw new Error(`${fc} non-string map keys are not supported`);if(r<n)return-1;if(r>n)return 1;throw new Error(`${fc} unexpected duplicate map keys, this is not supported`)}const ij={addBreakTokens:!0,mapSorter:nj};function oj(e,t){return t=Object.assign({},ij,t),dC(e,new rj,t)}class oS{constructor(t,r={}){this._pos=0,this.data=t,this.options=r,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let t=this.ch();for(;t===32||t===9||t===13||t===10;)t=this.data[++this._pos]}expect(t){if(this.data.length-this._pos<t.length)throw new Error(`${$e} unexpected end of input at position ${this._pos}`);for(let r=0;r<t.length;r++)if(this.data[this._pos++]!==t[r])throw new Error(`${$e} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...t)}'`)}parseNumber(){const t=this._pos;let r=!1,n=!1;const i=u=>{for(;!this.done();){const s=this.ch();if(u.includes(s))this._pos++;else break}};if(this.ch()===45&&(r=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,n=!0;else return new me(ie.uint,0,this._pos-t);if(i([48,49,50,51,52,53,54,55,56,57]),r&&this._pos===t+1)throw new Error(`${$e} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${$e} unexpected token at position ${this._pos}`);n=!0,this._pos++,i([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,i([48,49,50,51,52,53,54,55,56,57]));const o=String.fromCharCode.apply(null,this.data.subarray(t,this._pos)),a=parseFloat(o);return n?new me(ie.float,a,this._pos-t):this.options.allowBigInt!==!0||Number.isSafeInteger(a)?new me(a>=0?ie.uint:ie.negint,a,this._pos-t):new me(a>=0?ie.uint:ie.negint,BigInt(o),this._pos-t)}parseString(){if(this.ch()!==34)throw new Error(`${$e} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let o=this._pos,a=0;o<this.data.length&&a<65536;o++,a++){const u=this.data[o];if(u===92||u<32||u>=128)break;if(u===34){const s=String.fromCharCode.apply(null,this.data.subarray(this._pos,o));return this._pos=o+1,new me(ie.string,s,a)}}const t=this._pos,r=[],n=()=>{if(this._pos+4>=this.data.length)throw new Error(`${$e} unexpected end of unicode escape sequence at position ${this._pos}`);let o=0;for(let a=0;a<4;a++){let u=this.ch();if(u>=48&&u<=57)u-=48;else if(u>=97&&u<=102)u=u-97+10;else if(u>=65&&u<=70)u=u-65+10;else throw new Error(`${$e} unexpected unicode escape character at position ${this._pos}`);o=o*16+u,this._pos++}return o},i=()=>{const o=this.ch();let a=null,u=o>239?4:o>223?3:o>191?2:1;if(this._pos+u>this.data.length)throw new Error(`${$e} unexpected unicode sequence at position ${this._pos}`);let s,l,d,c;switch(u){case 1:o<128&&(a=o);break;case 2:s=this.data[this._pos+1],(s&192)===128&&(c=(o&31)<<6|s&63,c>127&&(a=c));break;case 3:s=this.data[this._pos+1],l=this.data[this._pos+2],(s&192)===128&&(l&192)===128&&(c=(o&15)<<12|(s&63)<<6|l&63,c>2047&&(c<55296||c>57343)&&(a=c));break;case 4:s=this.data[this._pos+1],l=this.data[this._pos+2],d=this.data[this._pos+3],(s&192)===128&&(l&192)===128&&(d&192)===128&&(c=(o&15)<<18|(s&63)<<12|(l&63)<<6|d&63,c>65535&&c<1114112&&(a=c))}a===null?(a=65533,u=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|a&1023),r.push(a),this._pos+=u};for(;!this.done();){const o=this.ch();let a;switch(o){case 92:if(this._pos++,this.done())throw new Error(`${$e} unexpected string termination at position ${this._pos}`);switch(a=this.ch(),this._pos++,a){case 34:case 39:case 92:case 47:r.push(a);break;case 98:r.push(8);break;case 116:r.push(9);break;case 110:r.push(10);break;case 102:r.push(12);break;case 114:r.push(13);break;case 117:r.push(n());break;default:throw new Error(`${$e} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new me(ie.string,vC(r),this._pos-t);default:if(o<32)throw new Error(`${$e} invalid control character at position ${this._pos}`);o<128?(r.push(o),this._pos++):i()}}throw new Error(`${$e} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new me(ie.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new me(ie.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new me(ie.null,null,4);case 102:return this.expect([102,97,108,115,101]),new me(ie.false,!1,5);case 116:return this.expect([116,114,117,101]),new me(ie.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${$e} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new me(ie.break,void 0,1);if(this.ch()!==44)throw new Error(`${$e} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new me(ie.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new me(ie.break,void 0,1);if(this.ch()!==44)throw new Error(`${$e} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new me(ie.break,void 0,1);const t=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${$e} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),t}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${$e} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}}function aj(e,t){return t=Object.assign({tokenizer:new oS(e,t)},t),hC(e,t)}function uj(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function sj(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const t=se.asCID(e);if(!t)return null;const r=t.toString();return[new me(ie.map,1/0,1),new me(ie.string,"/",1),new me(ie.string,r,r.length),new me(ie.break,void 0,1)]}function Tl(e){const t=Jl.encode(e).slice(1);return[new me(ie.map,1/0,1),new me(ie.string,"/",1),new me(ie.map,1/0,1),new me(ie.string,"bytes",5),new me(ie.string,t,t.length),new me(ie.break,void 0,1),new me(ie.break,void 0,1)]}function Zt(e){return Tl(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function cj(e){return Tl(new Uint8Array(e))}function lj(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function fj(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const dj={typeEncoders:{Object:sj,Buffer:Tl,Uint8Array:Tl,Int8Array:Zt,Uint16Array:Zt,Int16Array:Zt,Uint32Array:Zt,Int32Array:Zt,Float32Array:Zt,Float64Array:Zt,Uint8ClampedArray:Zt,BigInt64Array:Zt,BigUint64Array:Zt,DataView:Zt,ArrayBuffer:cj,undefined:lj,number:fj}};class hj extends oS{constructor(t,r){super(t,r),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const t=this._next();if(t.type===ie.map){const r=this._next();if(r.type===ie.string&&r.value==="/"){const n=this._next();if(n.type===ie.string){if(this._next().type!==ie.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new me(ie.tag,42,0)}if(n.type===ie.map){const i=this._next();if(i.type===ie.string&&i.value==="bytes"){const o=this._next();if(o.type===ie.string){for(let u=0;u<2;u++)if(this._next().type!==ie.break)throw new Error("Invalid encoded Bytes form");const a=Jl.decode(`m${o.value}`);return new me(ie.bytes,a,o.value.length)}this.tokenBuffer.push(o)}this.tokenBuffer.push(i)}this.tokenBuffer.push(n)}this.tokenBuffer.push(r)}return t}}const zd={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};zd.tags[42]=se.parse;const vj="dag-json",pj=297,aS=e=>oj(e,dj),uS=e=>{const t=uj(e),r=Object.assign(zd,{tokenizer:new hj(t,zd)});return aj(t,r)},M0=e=>_j.decode(aS(e)),_j=new TextDecoder,bj=e=>uS(yj.encode(e)),yj=new TextEncoder,mj=Object.freeze(Object.defineProperty({__proto__:null,code:pj,decode:uS,encode:aS,format:M0,name:vj,parse:bj,stringify:M0},Symbol.toStringTag,{value:"Module"})),gj=new TextDecoder;function cv(e,t){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");const i=e[t++];if(r+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[r,t]}function Cl(e,t){let r;[r,t]=cv(e,t);const n=t+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,n),n]}function sS(e,t){let r;return[r,t]=cv(e,t),[r&7,r>>3,t]}function wj(e){const t={},r=e.length;let n=0;for(;n<r;){let i,o;if([i,o,n]=sS(e,n),o===1){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(t.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,n]=Cl(e,n)}else if(o===2){if(t.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let a;[a,n]=Cl(e,n),t.Name=gj.decode(a)}else if(o===3){if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[t.Tsize,n]=cv(e,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return t}function Oj(e){const t=e.length;let r=0,n,i=!1,o;for(;r<t;){let u,s;if([u,s,r]=sS(e,r),u!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${u}`);if(s===1){if(o)throw new Error("protobuf: (PBNode) duplicate Data section");[o,r]=Cl(e,r),n&&(i=!0)}else if(s===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let l;[l,r]=Cl(e,r),n.push(wj(l))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${s}`)}if(r>t)throw new Error("protobuf: (PBNode) unexpected end of data");const a={};return o&&(a.Data=o),a.Links=n||[],a}const cS=new TextEncoder,D0=2**32,Ej=2**31;function Sj(e,t){let r=t.length;if(typeof e.Tsize=="number"){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");r=hc(t,r,e.Tsize)-1,t[r]=24}if(typeof e.Name=="string"){const n=cS.encode(e.Name);r-=n.length,t.set(n,r),r=hc(t,r,n.length)-1,t[r]=18}return e.Hash&&(r-=e.Hash.length,t.set(e.Hash,r),r=hc(t,r,e.Hash.length)-1,t[r]=10),t.length-r}function Pj(e){const t=Cj(e),r=new Uint8Array(t);let n=t;if(e.Data&&(n-=e.Data.length,r.set(e.Data,n),n=hc(r,n,e.Data.length)-1,r[n]=10),e.Links)for(let i=e.Links.length-1;i>=0;i--){const o=Sj(e.Links[i],r.subarray(0,n));n-=o,n=hc(r,n,o)-1,r[n]=18}return r}function Tj(e){let t=0;if(e.Hash){const r=e.Hash.length;t+=1+r+$o(r)}if(typeof e.Name=="string"){const r=cS.encode(e.Name).length;t+=1+r+$o(r)}return typeof e.Tsize=="number"&&(t+=1+$o(e.Tsize)),t}function Cj(e){let t=0;if(e.Data){const r=e.Data.length;t+=1+r+$o(r)}if(e.Links)for(const r of e.Links){const n=Tj(r);t+=1+n+$o(n)}return t}function hc(e,t,r){t-=$o(r);const n=t;for(;r>=Ej;)e[t++]=r&127|128,r/=128;for(;r>=128;)e[t++]=r&127|128,r>>>=7;return e[t]=r,n}function $o(e){return e%2===0&&e++,Math.floor((Rj(e)+6)/7)}function Rj(e){let t=0;return e>=D0&&(e=Math.floor(e/D0),t=32),e>=65536&&(e>>>=16,t+=16),e>=256&&(e>>>=8,t+=8),t+Aj[e]}const Aj=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],Ij=["Data","Links"],jj=["Hash","Name","Tsize"],Kd=new TextEncoder;function lS(e,t){if(e===t)return 0;const r=e.Name?Kd.encode(e.Name):[],n=t.Name?Kd.encode(t.Name):[];let i=r.length,o=n.length;for(let a=0,u=Math.min(i,o);a<u;++a)if(r[a]!==n[a]){i=r[a],o=n[a];break}return i<o?-1:o<i?1:0}function L0(e,t){return!Object.keys(e).some(r=>!t.includes(r))}function fS(e){if(typeof e.asCID=="object"){const r=se.asCID(e);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(e.Hash){let r=se.asCID(e.Hash);try{r||(typeof e.Hash=="string"?r=se.parse(e.Hash):e.Hash instanceof Uint8Array&&(r=se.decode(e.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(t.Hash=r)}if(!t.Hash)throw new TypeError("Invalid DAG-PB form");return typeof e.Name=="string"&&(t.Name=e.Name),typeof e.Tsize=="number"&&(t.Tsize=e.Tsize),t}function dS(e){if((e instanceof Uint8Array||typeof e=="string")&&(e={Data:e}),typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(e.Data!==void 0)if(typeof e.Data=="string")t.Data=Kd.encode(e.Data);else if(e.Data instanceof Uint8Array)t.Data=e.Data;else throw new TypeError("Invalid DAG-PB form");if(e.Links!==void 0)if(Array.isArray(e.Links))t.Links=e.Links.map(fS),t.Links.sort(lS);else throw new TypeError("Invalid DAG-PB form");else t.Links=[];return t}function hS(e){if(!e||typeof e!="object"||Array.isArray(e)||e instanceof Uint8Array||e["/"]&&e["/"]===e.bytes)throw new TypeError("Invalid DAG-PB form");if(!L0(e,Ij))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(e.Data!==void 0&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let t=0;t<e.Links.length;t++){const r=e.Links[t];if(!r||typeof r!="object"||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!L0(r,jj))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(r.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash==null||!r.Hash["/"]||r.Hash["/"]!==r.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0){if(typeof r.Tsize!="number"||r.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(t>0&&lS(r,e.Links[t-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function Nj(e,t=[]){return dS({Data:e,Links:t})}function kj(e,t,r){return fS({Hash:r,Name:e,Tsize:t})}function Mj(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}const Dj="dag-pb",Lj=112;function Uj(e){hS(e);const t={};return e.Links&&(t.Links=e.Links.map(r=>{const n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),e.Data&&(t.Data=e.Data),Pj(t)}function Bj(e){const t=Mj(e),r=Oj(t),n={};return r.Data&&(n.Data=r.Data),r.Links&&(n.Links=r.Links.map(i=>{const o={};try{o.Hash=se.decode(i.Hash)}catch{}if(!o.Hash)throw new Error("Invalid Hash field found in link, expected CID");return i.Name!==void 0&&(o.Name=i.Name),i.Tsize!==void 0&&(o.Tsize=i.Tsize),o})),n}const qj=Object.freeze(Object.defineProperty({__proto__:null,code:Lj,createLink:kj,createNode:Nj,decode:Bj,encode:Uj,name:Dj,prepare:dS,validate:hS},Symbol.toStringTag,{value:"Module"}));function xj(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function lv(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function Fj(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),a=o.charCodeAt(0);if(r[a]!==255)throw new TypeError(o+" is ambiguous");r[a]=i}var u=e.length,s=e.charAt(0),l=Math.log(u)/Math.log(256),d=Math.log(256)/Math.log(u);function c(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var _=0,f=0,y=0,g=m.length;y!==g&&m[y]===0;)y++,_++;for(var h=(g-y)*d+1>>>0,v=new Uint8Array(h);y!==g;){for(var w=m[y],E=0,O=h-1;(w!==0||E<f)&&O!==-1;O--,E++)w+=256*v[O]>>>0,v[O]=w%u>>>0,w=w/u>>>0;if(w!==0)throw new Error("Non-zero carry");f=E,y++}for(var S=h-f;S!==h&&v[S]===0;)S++;for(var P=s.repeat(_);S<h;++S)P+=e.charAt(v[S]);return P}function p(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var _=0;if(m[_]!==" "){for(var f=0,y=0;m[_]===s;)f++,_++;for(var g=(m.length-_)*l+1>>>0,h=new Uint8Array(g);m[_];){var v=r[m.charCodeAt(_)];if(v===255)return;for(var w=0,E=g-1;(v!==0||w<y)&&E!==-1;E--,w++)v+=u*h[E]>>>0,h[E]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");y=w,_++}if(m[_]!==" "){for(var O=g-y;O!==g&&h[O]===0;)O++;for(var S=new Uint8Array(f+(g-O)),P=f;O!==g;)S[P++]=h[O++];return S}}}function b(m){var _=p(m);if(_)return _;throw new Error(`Non-${t} character`)}return{encode:c,decodeUnsafe:p,decode:b}}var Vj=Fj,$j=Vj;class Wj{name;prefix;baseEncode;constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Hj{name;prefix;baseDecode;prefixCodePoint;constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return vS(this,t)}}class zj{decoders;constructor(t){this.decoders=t}or(t){return vS(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n!=null)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function vS(e,t){return new zj({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}class Kj{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(t,r,n,i){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Wj(t,r,n),this.decoder=new Hj(t,r,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}function pS({name:e,prefix:t,encode:r,decode:n}){return new Kj(e,t,r,n)}function _S({name:e,prefix:t,alphabet:r}){const{encode:n,decode:i}=$j(r,e);return pS({prefix:t,name:e,encode:n,decode:o=>lv(i(o))})}function Gj(e,t,r,n){const i={};for(let d=0;d<t.length;++d)i[t[d]]=d;let o=e.length;for(;e[o-1]==="=";)--o;const a=new Uint8Array(o*r/8|0);let u=0,s=0,l=0;for(let d=0;d<o;++d){const c=i[e[d]];if(c===void 0)throw new SyntaxError(`Non-${n} character`);s=s<<r|c,u+=r,u>=8&&(u-=8,a[l++]=255&s>>u)}if(u>=r||(255&s<<8-u)!==0)throw new SyntaxError("Unexpected end of data");return a}function Yj(e,t,r){const n=t[t.length-1]==="=",i=(1<<r)-1;let o="",a=0,u=0;for(let s=0;s<e.length;++s)for(u=u<<8|e[s],a+=8;a>r;)a-=r,o+=t[i&u>>a];if(a!==0&&(o+=t[i&u<<r-a]),n)for(;(o.length*r&7)!==0;)o+="=";return o}function jt({name:e,prefix:t,bitsPerChar:r,alphabet:n}){return pS({prefix:t,name:e,encode(i){return Yj(i,n,r)},decode(i){return Gj(i,n,r,e)}})}jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const bS=jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function sn(e){return bS.encode(e).slice(1)}function Tr(e){return bS.decode(`u${e}`)}const bl=jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const ei=_S({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});_S({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Zj=yS,U0=128,Xj=-128,Qj=Math.pow(2,31);function yS(e,t,r){t=t||[],r=r||0;for(var n=r;e>=Qj;)t[r++]=e&255|U0,e/=128;for(;e&Xj;)t[r++]=e&255|U0,e>>>=7;return t[r]=e|0,yS.bytes=r-n+1,t}var Jj=Gd,eN=128,B0=127;function Gd(e,n){var r=0,n=n||0,i=0,o=n,a,u=e.length;do{if(o>=u)throw Gd.bytes=0,new RangeError("Could not decode varint");a=e[o++],r+=i<28?(a&B0)<<i:(a&B0)*Math.pow(2,i),i+=7}while(a>=eN);return Gd.bytes=o-n,r}var tN=Math.pow(2,7),rN=Math.pow(2,14),nN=Math.pow(2,21),iN=Math.pow(2,28),oN=Math.pow(2,35),aN=Math.pow(2,42),uN=Math.pow(2,49),sN=Math.pow(2,56),cN=Math.pow(2,63),lN=function(e){return e<tN?1:e<rN?2:e<nN?3:e<iN?4:e<oN?5:e<aN?6:e<uN?7:e<sN?8:e<cN?9:10},fN={encode:Zj,decode:Jj,encodingLength:lN},Rl=fN;function Yd(e,t=0){return[Rl.decode(e,t),Rl.decode.bytes]}function Al(e,t,r=0){return Rl.encode(e,t,r),t}function Il(e){return Rl.encodingLength(e)}function dN(e,t){const r=t.byteLength,n=Il(e),i=n+Il(r),o=new Uint8Array(i+r);return Al(e,o,0),Al(r,o,n),o.set(t,i),new fv(e,r,t,o)}function hN(e){const t=lv(e),[r,n]=Yd(t),[i,o]=Yd(t.subarray(n)),a=t.subarray(n+o);if(a.byteLength!==i)throw new Error("Incorrect length");return new fv(r,i,a,t)}function vN(e,t){if(e===t)return!0;{const r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&xj(e.bytes,r.bytes)}}class fv{code;size;digest;bytes;constructor(t,r,n,i){this.code=t,this.size=r,this.digest=n,this.bytes=i}}function q0(e,t){const{bytes:r,version:n}=e;switch(n){case 0:return _N(r,Zd(e),t??ei.encoder);default:return bN(r,Zd(e),t??bl.encoder)}}const x0=new WeakMap;function Zd(e){const t=x0.get(e);if(t==null){const r=new Map;return x0.set(e,r),r}return t}class Be{code;version;multihash;bytes;"/";constructor(t,r,n,i){this.code=r,this.version=t,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:t,multihash:r}=this;if(t!==oc)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==yN)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Be.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:t,digest:r}=this.multihash,n=dN(t,r);return Be.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return Be.equals(this,t)}static equals(t,r){const n=r;return n!=null&&t.code===n.code&&t.version===n.version&&vN(t.multihash,n.multihash)}toString(t){return q0(this,t)}toJSON(){return{"/":q0(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;const r=t;if(r instanceof Be)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:i,multihash:o,bytes:a}=r;return new Be(n,i,o,a??F0(n,i,o.bytes))}else if(r[mN]===!0){const{version:n,multihash:i,code:o}=r,a=hN(i);return Be.create(n,o,a)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(r!==oc)throw new Error(`Version 0 CID must use dag-pb (code: ${oc}) block encoding`);return new Be(t,r,n,n.bytes)}case 1:{const i=F0(t,r,n.bytes);return new Be(t,r,n,i)}default:throw new Error("Invalid version")}}static createV0(t){return Be.create(0,oc,t)}static createV1(t,r){return Be.create(1,t,r)}static decode(t){const[r,n]=Be.decodeFirst(t);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(t){const r=Be.inspectBytes(t),n=r.size-r.multihashSize,i=lv(t.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");const o=i.subarray(r.multihashSize-r.digestSize),a=new fv(r.multihashCode,r.digestSize,o,i);return[r.version===0?Be.createV0(a):Be.createV1(r.codec,a),t.subarray(r.size)]}static inspectBytes(t){let r=0;const n=()=>{const[c,p]=Yd(t.subarray(r));return r+=p,c};let i=n(),o=oc;if(i===18?(i=0,r=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const a=r,u=n(),s=n(),l=r+s,d=l-a;return{version:i,codec:o,multihashCode:u,digestSize:s,multihashSize:d,size:l}}static parse(t,r){const[n,i]=pN(t,r),o=Be.decode(i);if(o.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Zd(o).set(n,t),o}}function pN(e,t){switch(e[0]){case"Q":{const r=t??ei;return[ei.prefix,r.decode(`${ei.prefix}${e}`)]}case ei.prefix:{const r=t??ei;return[ei.prefix,r.decode(e)]}case bl.prefix:{const r=t??bl;return[bl.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}}function _N(e,t,r){const{prefix:n}=r;if(n!==ei.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=t.get(n);if(i==null){const o=r.encode(e).slice(1);return t.set(n,o),o}else return i}function bN(e,t,r){const{prefix:n}=r,i=t.get(n);if(i==null){const o=r.encode(e);return t.set(n,o),o}else return i}const oc=112,yN=18;function F0(e,t,r){const n=Il(e),i=n+Il(t),o=new Uint8Array(i+r.byteLength);return Al(e,o,0),Al(t,o,n),o.set(r,i),o}const mN=Symbol.for("@ipld/js-cid/CID");function gN(e){const[t,r,n]=e;return{payload:r,signatures:[{protected:t,signature:n}],link:Be.decode(Tr(r))}}function wN(e){const t={signature:Tr(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=Tr(e.protected)),t}function ON(e){return{payload:Tr(e.payload),signatures:e.signatures.map(wN)}}function EN(e){const t={signature:sn(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=sn(e.protected)),t}function SN(e){const t={payload:sn(e.payload),signatures:e.signatures.map(EN)};try{return t.pld=Xd(TN(e.payload)),t}catch{try{return t.link=Be.decode(new Uint8Array(e.payload)),t}catch{throw new Error("Invalid payload, must be either JSON or CID")}}}function Xd(e){if(typeof e=="string"){if(e.startsWith("ipfs://"))return Be.parse(e.slice(7))}else{if(Array.isArray(e))return e.map(Xd);if(PN(e)){const t={};for(const r in e)t[r]=Xd(e[r]);return t}}return e}function PN(e){return typeof e=="object"&&e!==null}function TN(e){return JSON.parse(new TextDecoder().decode(e))}function CN(e){const[t,r,n,i,o]=e,a={ciphertext:i,iv:n,protected:t,tag:o};return r&&(a.recipients=[{encrypted_key:r}]),a}function RN(e){const t={};return e.encrypted_key&&(t.encrypted_key=Tr(e.encrypted_key)),e.header&&(t.header=e.header),t}function AN(e){const t={ciphertext:Tr(e.ciphertext),protected:Tr(e.protected),iv:Tr(e.iv),tag:Tr(e.tag)};return e.aad&&(t.aad=Tr(e.aad)),e.recipients&&(t.recipients=e.recipients.map(RN)),e.unprotected&&(t.unprotected=e.unprotected),t}function IN(e){const t={};return e.encrypted_key&&(t.encrypted_key=sn(e.encrypted_key)),e.header&&(t.header=e.header),t}function jN(e){const t={ciphertext:sn(e.ciphertext),protected:sn(e.protected),iv:sn(e.iv),tag:sn(e.tag)};return e.aad&&(t.aad=sn(e.aad)),e.recipients&&(t.recipients=e.recipients.map(IN)),e.unprotected&&(t.unprotected=e.unprotected),t}const NN="dag-jose",kN=133;function mS(e){return"payload"in e&&typeof e.payload=="string"&&"signatures"in e&&Array.isArray(e.signatures)}function MN(e){return"payload"in e&&e.payload instanceof Uint8Array&&"signatures"in e&&Array.isArray(e.signatures)}function DN(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}function gS(e){return"ciphertext"in e&&typeof e.ciphertext=="string"&&"iv"in e&&typeof e.iv=="string"&&"protected"in e&&typeof e.protected=="string"&&"tag"in e&&typeof e.tag=="string"}function wS(e){if(typeof e=="string"){const t=e.split(".");if(t.length===3)return gN(t);if(t.length===5)return CN(t);throw new Error("Not a valid JOSE string")}if(mS(e)||gS(e))return e;throw new Error("Not a valid unencoded JOSE object")}function LN(e){typeof e=="string"&&(e=wS(e));let t;if(mS(e))t=ON(e);else if(gS(e))t=AN(e);else throw new Error("Not a valid JOSE object");return new Uint8Array(pC(t))}function UN(e){let t;try{t=_C(e)}catch{throw new Error("Not a valid DAG-JOSE object")}if(MN(t))return SN(t);if(DN(t))return jN(t);throw new Error("Not a valid DAG-JOSE object")}const BN=Object.freeze(Object.defineProperty({__proto__:null,code:kN,decode:UN,encode:LN,name:NN,toGeneral:wS},Symbol.toStringTag,{value:"Module"}));function vn(e){const t=new globalThis.AbortController;function r(){t.abort();for(const o of e)o?.removeEventListener!=null&&o.removeEventListener("abort",r)}for(const o of e){if(o?.aborted===!0){r();break}o?.addEventListener!=null&&o.addEventListener("abort",r)}function n(){for(const o of e)o?.removeEventListener!=null&&o.removeEventListener("abort",r)}const i=t.signal;return i.clear=n,i}const qN="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let xN=(e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=qN[r[e]&63];return t};var Td,V0;function FN(){if(V0)return Td;V0=1;function e(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}return Td=e,Td}var VN=FN();const $N=fh(VN),OS=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,dv=$N(),rf=OS&&!dv,WN=dv&&OS,HN=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!dv,nf=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;async function*of(e,t={}){const r=e.getReader();try{for(;;){const n=await r.read();if(n.done)return;yield n.value}}finally{t.preventCancel!==!0&&await r.cancel(),r.releaseLock()}}var Cd,$0;function zN(){if($0)return Cd;$0=1;function e(r,n){for(const i in n)Object.defineProperty(r,i,{value:n[i],enumerable:!0,configurable:!0});return r}function t(r,n,i){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");i||(i={}),typeof n=="object"&&(i=n,n=""),n&&(i.code=n);try{return e(r,i)}catch{i.message=r.message,i.stack=r.stack;const a=function(){};return a.prototype=Object.create(Object.getPrototypeOf(r)),e(new a,i)}}return Cd=t,Cd}var KN=zN();const Cr=fh(KN);function af(e){const[t,r]=e[Symbol.asyncIterator]!=null?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>t.next(),push:i=>{n.push(i)},next:()=>n.length>0?{done:!1,value:n.shift()}:t.next(),[r](){return this}}}function GN(e){return e[Symbol.asyncIterator]!=null}function W0(e,t){let r=0;if(GN(e))return(async function*(){for await(const s of e)yield t(s,r++)})();const n=af(e),{value:i,done:o}=n.next();if(o===!0)return(function*(){})();const a=t(i,r++);if(typeof a.then=="function")return(async function*(){yield await a;for(const s of n)yield t(s,r++)})();const u=t;return(function*(){yield a;for(const s of n)yield u(s,r++)})()}let YN=class extends Error{response;constructor(t){super(t.statusText),this.name="HTTPError",this.response=t}};class ZN extends Error{constructor(t="Invalid mtime"){super(t),this.name="InvalidMtimeError"}}function Zo(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function jl(e){return e.constructor!=null&&(e.constructor.name==="Blob"||e.constructor.name==="File")&&typeof e.stream=="function"}function Qd(e){return typeof e=="object"&&(e.path!=null||e.content!=null)}function Nl(e){return typeof e?.getReader=="function"}function ES(e){if(e!=null)return typeof e=="string"&&(e=parseInt(e,8)),e&4095}function XN(e){return Object.prototype.hasOwnProperty.call(e,"secs")}function QN(e){return Object.prototype.hasOwnProperty.call(e,"Seconds")}function JN(e){return Array.isArray(e)}function uf(e){if(e!=null){if(XN(e)&&(e={secs:e.secs,nsecs:e.nsecs}),QN(e)&&(e={secs:BigInt(e.Seconds),nsecs:e.FractionalNanoseconds}),JN(e)&&(e={secs:BigInt(e[0]),nsecs:e[1]}),e instanceof Date){const t=e.getTime(),r=Math.floor(t/1e3);e={secs:BigInt(r),nsecs:(t-r*1e3)*1e3}}if(typeof e=="bigint"){const t=e/BigInt(1e9),r=e-t*BigInt(1e9);e={secs:t,nsecs:Number(r)}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw new ZN("mtime-nsecs must be within the range [0,999999999]");return e}}}async function*ek(e,t){if(typeof e=="string"||e instanceof String||Zo(e)||jl(e)||e._readableState!=null)throw Cr(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(Nl(e)&&(e=of(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const r=af(e),{value:n,done:i}=await r.peek();if(i===!0){yield*[];return}if(r.push(n),Number.isInteger(n))throw Cr(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState!=null){yield*W0(r,async o=>Rd({content:o},t));return}if(Zo(n)){yield Rd({content:r},t);return}if(Qd(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||Nl(n)||jl(n)){yield*W0(r,async o=>Rd(o,t));return}}throw Qd(e)?Cr(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):Cr(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}async function Rd(e,t){const{path:r,mode:n,mtime:i,content:o}=e,a={path:r??"",mode:ES(n),mtime:uf(i)};return o!=null?a.content=await t(o):r==null&&(a.content=await t(e)),a}const hv=Symbol.for("@libp2p/peer-id");function GB(e){return!!e?.[hv]}let YB=class extends Error{static name="AbortError";constructor(t="The operation was aborted"){super(t),this.name="AbortError"}};class XB extends Error{static name="UnexpectedPeerError";constructor(t="Unexpected Peer"){super(t),this.name="UnexpectedPeerError"}}class QB extends Error{static name="InvalidCryptoExchangeError";constructor(t="Invalid crypto exchange"){super(t),this.name="InvalidCryptoExchangeError"}}let so=class extends Error{static name="InvalidParametersError";constructor(t="Invalid parameters"){super(t),this.name="InvalidParametersError"}},eq=class extends Error{static name="InvalidPublicKeyError";constructor(t="Invalid public key"){super(t),this.name="InvalidPublicKeyError"}};class rq extends Error{static name="ConnectionClosingError";constructor(t="The connection is closing"){super(t),this.name="ConnectionClosingError"}}class nq extends Error{static name="ConnectionClosedError";constructor(t="The connection is closed"){super(t),this.name="ConnectionClosedError"}}class iq extends Error{static name="ConnectionFailedError";constructor(t="Connection failed"){super(t),this.name="ConnectionFailedError"}}class oq extends Error{static name="MuxerClosedError";constructor(t="The muxer is closed"){super(t),this.name="MuxerClosedError"}}class aq extends Error{static name="StreamResetError";constructor(t="The stream has been reset"){super(t),this.name="StreamResetError"}}class uq extends Error{static name="StreamStateError";constructor(t="The stream is in an invalid state"){super(t),this.name="StreamStateError"}}let sq=class extends Error{static name="NotFoundError";constructor(t="Not found"){super(t),this.name="NotFoundError"}};class lq extends Error{static name="InvalidPeerIdError";constructor(t="Invalid PeerID"){super(t),this.name="InvalidPeerIdError"}}class fq extends Error{static name="InvalidMultiaddrError";constructor(t="Invalid multiaddr"){super(t),this.name="InvalidMultiaddrError"}}class tk extends Error{static name="InvalidCIDError";constructor(t="Invalid CID"){super(t),this.name="InvalidCIDError"}}class rk extends Error{static name="InvalidMultihashError";constructor(t="Invalid Multihash"){super(t),this.name="InvalidMultihashError"}}class dq extends Error{static name="UnsupportedProtocolError";constructor(t="Unsupported protocol error"){super(t),this.name="UnsupportedProtocolError"}}class hq extends Error{static name="InvalidMessageError";constructor(t="Invalid message"){super(t),this.name="InvalidMessageError"}}class vq extends Error{static name="ProtocolError";constructor(t="Protocol error"){super(t),this.name="ProtocolError"}}let pq=class extends Error{static name="TimeoutError";constructor(t="Timed out"){super(t),this.name="TimeoutError"}};class bq extends Error{static name="NotStartedError";constructor(t="Not started"){super(t),this.name="NotStartedError"}}class yq extends Error{static name="DialError";constructor(t="Dial error"){super(t),this.name="DialError"}}class mq extends Error{static name="ListenError";constructor(t="Listen error"){super(t),this.name="ListenError"}}class gq extends Error{static name="LimitedConnectionError";constructor(t="Limited connection"){super(t),this.name="LimitedConnectionError"}}class wq extends Error{static name="TooManyInboundProtocolStreamsError";constructor(t="Too many inbound protocol streams"){super(t),this.name="TooManyInboundProtocolStreamsError"}}class Oq extends Error{static name="TooManyOutboundProtocolStreamsError";constructor(t="Too many outbound protocol streams"){super(t),this.name="TooManyOutboundProtocolStreamsError"}}let nk=class extends Error{static name="UnsupportedKeyTypeError";constructor(t="Unsupported key type"){super(t),this.name="UnsupportedKeyTypeError"}};function ik(e){return e[Symbol.asyncIterator]!=null}function SS(e){if(ik(e))return(async()=>{const r=[];for await(const n of e)r.push(n);return r})();const t=[];for(const r of e)t.push(r);return t}async function PS(e){if(Zo(e))return new Blob([e]);if(typeof e=="string"||e instanceof String)return new Blob([e.toString()]);if(jl(e))return e;if(Nl(e)&&(e=of(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=af(e),{value:r,done:n}=await t.peek();if(n===!0)return H0(t);if(t.push(r),Number.isInteger(r))return new Blob([Uint8Array.from(await SS(t))]);if(Zo(r)||typeof r=="string"||r instanceof String)return H0(t)}throw new so(`Unexpected input: ${e}`)}async function H0(e){const t=[];for await(const r of e)t.push(r);return new Blob(t)}function ok(e){return ek(e,PS)}function vv(e){if(e!=null)return typeof e=="string"?e:e.toString(8).padStart(4,"0")}async function z0(e,t,r={},n){const i=[],o=new FormData;let a=0,u=0;for await(const{content:s,path:l,mode:d,mtime:c}of ok(e)){let p="";const b=s!=null?"file":"dir";a>0&&(p=`-${a}`);let m=b+p;const _=[];if(d!=null&&_.push(`mode=${vv(d)}`),c!=null){const{secs:f,nsecs:y}=c;_.push(`mtime=${f}`),y!=null&&_.push(`mtime-nsecs=${y}`)}if(_.length>0&&(m=`${m}?${_.join("&")}`),s!=null){o.set(m,s,l!=null?encodeURIComponent(l):void 0);const f=u+s.size;i.push({name:l,start:u,end:f}),u=f}else if(l!=null)o.set(m,new File([""],encodeURIComponent(l),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");a++}return{total:u,parts:i,headers:r,body:o}}async function bi(e,t,r={},n=`-----------------------------${xN()}`){let i=z0;return WN&&(i=z0),i(e,t,r,n)}function ze(e){if(e==null)return e;const t=/^[A-Z]+$/,r={};return Object.keys(e).reduce((n,i)=>(t.test(i)?n[i.toLowerCase()]=e[i]:t.test(i[0])?n[i[0].toLowerCase()+i.slice(1)]=e[i]:n[i]=e[i],n),r)}function X({arg:e,searchParams:t,hashAlg:r,mtime:n,mode:i,...o}={}){t!=null&&(o={...o,...t}),r!=null&&(o.hash=r),n!=null&&(n=uf(n),o.mtime=n.secs,o.mtimeNsecs=n.nsecs),i!=null&&(o.mode=vv(i)),isNaN(o.timeout)||(o.timeout=`${o.timeout}ms`),e==null?e=[]:Array.isArray(e)||(e=[e]);const a=new URLSearchParams(o);return e.forEach(u=>{a.append("arg",u)}),a}function TS(e){return async function*(r,n={}){const i=new AbortController,o=vn([i.signal,n.signal]);try{const{headers:a,body:u,total:s,parts:l}=await bi(r,i,n.headers),[d,c]=typeof n.progress=="function"?ak(s,n.progress,l):[void 0,void 0],p=await e.post("add",{searchParams:X({"stream-channels":!0,...n,progress:!!d}),onUploadProgress:c,signal:o,headers:a,body:u});for await(let b of p.ndjson())b=ze(b),b.hash!==void 0?yield sk(b):d?.(b.bytes??0,b.name)}finally{o.clear()}}}const ak=(e,t,r)=>r!=null?[void 0,uk(e,r,t)]:[t,void 0],uk=(e,t,r)=>{let n=0;const i=t.length;return({loaded:o,total:a})=>{const u=Math.floor(o/a*e);for(;n<i;){const{start:s,end:l,name:d}=t[n];if(u<l){r(u-s,d);break}else r(l-s,d),n+=1}}};function sk({name:e,hash:t,size:r,mode:n,mtime:i,mtimeNsecs:o}){const a={path:e,cid:se.parse(t),size:parseInt(r)};return n!=null&&(a.mode=parseInt(n,8)),i!=null&&(a.mtime={secs:i,nsecs:o??0}),a}function ck(e){return e[Symbol.asyncIterator]!=null}function sf(e){if(ck(e))return(async()=>{let r;for await(const n of e)r=n;return r})();let t;for(const r of e)t=r;return t}async function*lk(e,t){if(e==null)throw Cr(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if(typeof e=="string"||e instanceof String){yield ol(e.toString(),t);return}if(Zo(e)||jl(e)){yield ol(e,t);return}if(Nl(e)&&(e=of(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const r=af(e),{value:n,done:i}=await r.peek();if(i===!0){yield{content:[]};return}if(r.push(n),Number.isInteger(n)||Zo(n)||typeof n=="string"||n instanceof String){yield ol(r,t);return}throw Cr(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(Qd(e)){yield ol(e,t);return}throw Cr(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function ol(e,t){const{path:r,mode:n,mtime:i,content:o}=e,a={path:r??"",mode:ES(n),mtime:uf(i)};return o!=null?a.content=await t(o):r==null&&(a.content=await t(e)),a}function fk(e){return lk(e,PS)}function dk(e){const t=TS(e);return async function(n,i={}){const o=fk(n),a=t(o,i),u=await sf(a);if(u==null)throw new Error("Invalid body");return u}}class vt extends Error{static name="InvalidParametersError";constructor(t="Invalid parameters"){super(t),this.name="InvalidParametersError"}}class CS extends Error{static name="InvalidPublicKeyError";constructor(t="Invalid public key"){super(t),this.name="InvalidPublicKeyError"}}class RS extends Error{static name="InvalidPrivateKeyError";constructor(t="Invalid private key"){super(t),this.name="InvalidPrivateKeyError"}}class Sq extends Error{static name="NotFoundError";constructor(t="Not found"){super(t),this.name="NotFoundError"}}class cf extends Error{static name="UnsupportedKeyTypeError";constructor(t="Unsupported key type"){super(t),this.name="UnsupportedKeyTypeError"}}const AS=Symbol.for("@achingbrain/uint8arraylist");function K0(e,t){if(t==null||t<0)throw new RangeError("index is out of bounds");let r=0;for(const n of e){const i=r+n.byteLength;if(t<i)return{buf:n,index:t-r};r=i}throw new RangeError("index is out of bounds")}function al(e){return!!e?.[AS]}class ht{bufs;length;[AS]=!0;constructor(...t){this.bufs=[],this.length=0,t.length>0&&this.appendAll(t)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...t){this.appendAll(t)}appendAll(t){let r=0;for(const n of t)if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.push(n);else if(al(n))r+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}prepend(...t){this.prependAll(t)}prependAll(t){let r=0;for(const n of t.reverse())if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.unshift(n);else if(al(n))r+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}get(t){const r=K0(this.bufs,t);return r.buf[r.index]}set(t,r){const n=K0(this.bufs,t);n.buf[n.index]=r}write(t,r=0){if(t instanceof Uint8Array)for(let n=0;n<t.length;n++)this.set(r+n,t[n]);else if(al(t))for(let n=0;n<t.length;n++)this.set(r+n,t.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(t){if(t=Math.trunc(t),!(Number.isNaN(t)||t<=0)){if(t===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(t>=this.bufs[0].byteLength)t-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(t),this.length-=t;break}}}slice(t,r){const{bufs:n,length:i}=this._subList(t,r);return _c(n,i)}subarray(t,r){const{bufs:n,length:i}=this._subList(t,r);return n.length===1?n[0]:_c(n,i)}sublist(t,r){const{bufs:n,length:i}=this._subList(t,r),o=new ht;return o.length=i,o.bufs=[...n],o}_subList(t,r){if(t=t??0,r=r??this.length,t<0&&(t=this.length+t),r<0&&(r=this.length+r),t<0||r>this.length)throw new RangeError("index is out of bounds");if(t===r)return{bufs:[],length:0};if(t===0&&r===this.length)return{bufs:this.bufs,length:this.length};const n=[];let i=0;for(let o=0;o<this.bufs.length;o++){const a=this.bufs[o],u=i,s=u+a.byteLength;if(i=s,t>=s)continue;const l=t>=u&&t<s,d=r>u&&r<=s;if(l&&d){if(t===u&&r===s){n.push(a);break}const c=t-u;n.push(a.subarray(c,c+(r-t)));break}if(l){if(t===0){n.push(a);continue}n.push(a.subarray(t-u));continue}if(d){if(r===s){n.push(a);break}n.push(a.subarray(0,r-u));break}n.push(a)}return{bufs:n,length:r-t}}indexOf(t,r=0){if(!al(t)&&!(t instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const n=t instanceof Uint8Array?t:t.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),t.length===0)return r>this.length?this.length:r;const i=n.byteLength;if(i===0)throw new TypeError("search must be at least 1 byte long");const o=256,a=new Int32Array(o);for(let c=0;c<o;c++)a[c]=-1;for(let c=0;c<i;c++)a[n[c]]=c;const u=a,s=this.byteLength-n.byteLength,l=n.byteLength-1;let d;for(let c=r;c<=s;c+=d){d=0;for(let p=l;p>=0;p--){const b=this.get(c+p);if(n[p]!==b){d=Math.max(1,p-u[b]);break}}if(d===0)return c}return-1}getInt8(t){const r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(t,r){const n=ii(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,r),this.write(n,t)}getInt16(t,r){const n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,r)}setInt16(t,r,n){const i=Gn(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt16(0,r,n),this.write(i,t)}getInt32(t,r){const n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,r)}setInt32(t,r,n){const i=Gn(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt32(0,r,n),this.write(i,t)}getBigInt64(t,r){const n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,r)}setBigInt64(t,r,n){const i=Gn(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigInt64(0,r,n),this.write(i,t)}getUint8(t){const r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(t,r){const n=ii(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,r),this.write(n,t)}getUint16(t,r){const n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,r)}setUint16(t,r,n){const i=Gn(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint16(0,r,n),this.write(i,t)}getUint32(t,r){const n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,r)}setUint32(t,r,n){const i=Gn(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,r,n),this.write(i,t)}getBigUint64(t,r){const n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,r)}setBigUint64(t,r,n){const i=Gn(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigUint64(0,r,n),this.write(i,t)}getFloat32(t,r){const n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,r)}setFloat32(t,r,n){const i=Gn(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat32(0,r,n),this.write(i,t)}getFloat64(t,r){const n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,r)}setFloat64(t,r,n){const i=Gn(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat64(0,r,n),this.write(i,t)}equals(t){if(t==null||!(t instanceof ht)||t.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!Mt(this.bufs[r],t.bufs[r]))return!1;return!0}static fromUint8Arrays(t,r){const n=new ht;return n.bufs=t,r==null&&(r=t.reduce((i,o)=>i+o.byteLength,0)),n.length=r,n}}const hk=parseInt("11111",2),Jd=parseInt("10000000",2),vk=parseInt("01111111",2),G0={0:ac,1:ac,2:pk,3:yk,4:mk,5:bk,6:_k,16:ac,22:ac,48:ac};function go(e,t={offset:0}){const r=e[t.offset]&hk;if(t.offset++,G0[r]!=null)return G0[r](e,t);throw new Error("No decoder for tag "+r)}function xc(e,t){let r=0;if((e[t.offset]&Jd)===Jd){const n=e[t.offset]&vk;let i="0x";t.offset++;for(let o=0;o<n;o++,t.offset++)i+=e[t.offset].toString(16).padStart(2,"0");r=parseInt(i,16)}else r=e[t.offset],t.offset++;return r}function ac(e,t){xc(e,t);const r=[];for(;!(t.offset>=e.byteLength);){const n=go(e,t);if(n===null)break;r.push(n)}return r}function pk(e,t){const r=xc(e,t),n=t.offset,i=t.offset+r,o=[];for(let a=n;a<i;a++)a===n&&e[a]===0||o.push(e[a]);return t.offset+=r,Uint8Array.from(o)}function _k(e,t){const r=xc(e,t),n=t.offset+r,i=e[t.offset];t.offset++;let o=0,a=0;i<40?(o=0,a=i):i<80?(o=1,a=i-40):(o=2,a=i-80);let u=`${o}.${a}`,s=[];for(;t.offset<n;){const l=e[t.offset];if(t.offset++,s.push(l&127),l<128){s.reverse();let d=0;for(let c=0;c<s.length;c++)d+=s[c]<<c*7;u+=`.${d}`,s=[]}}return u}function bk(e,t){return t.offset++,null}function yk(e,t){const r=xc(e,t),n=e[t.offset];t.offset++;const i=e.subarray(t.offset,t.offset+r-1);if(t.offset+=r,n!==0)throw new Error("Unused bits in bit string is unimplemented");return i}function mk(e,t){const r=xc(e,t),n=e.subarray(t.offset,t.offset+r);return t.offset+=r,n}function gk(e){let t=e.toString(16);t.length%2===1&&(t="0"+t);const r=new ht;for(let n=0;n<t.length;n+=2)r.append(Uint8Array.from([parseInt(`${t[n]}${t[n+1]}`,16)]));return r}function lf(e){if(e.byteLength<128)return Uint8Array.from([e.byteLength]);const t=gk(e.byteLength);return new ht(Uint8Array.from([t.byteLength|Jd]),t)}function Pt(e){const t=new ht,r=128;return(e.subarray()[0]&r)===r&&t.append(Uint8Array.from([0])),t.append(e),new ht(Uint8Array.from([2]),lf(t),t)}function pv(e){const t=Uint8Array.from([0]),r=new ht(t,e);return new ht(Uint8Array.from([3]),lf(r),r)}function wk(e){return new ht(Uint8Array.from([4]),lf(e),e)}function ln(e,t=48){const r=new ht;for(const n of e)r.append(n);return new ht(Uint8Array.from([t]),lf(r),r)}const Ok="1.2.840.10045.3.1.7",Ek="1.3.132.0.34",Sk="1.3.132.0.35";async function Pk(e="P-256"){const t=await crypto.subtle.generateKey({name:"ECDSA",namedCurve:e},!0,["sign","verify"]);return{publicKey:await crypto.subtle.exportKey("jwk",t.publicKey),privateKey:await crypto.subtle.exportKey("jwk",t.privateKey)}}async function Tk(e,t,r){const n=await crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:e.crv??"P-256"},!1,["sign"]);r?.signal?.throwIfAborted();const i=await crypto.subtle.sign({name:"ECDSA",hash:{name:"SHA-256"}},n,t.subarray());return r?.signal?.throwIfAborted(),new Uint8Array(i,0,i.byteLength)}async function Ck(e,t,r,n){const i=await crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:e.crv??"P-256"},!1,["verify"]);n?.signal?.throwIfAborted();const o=await crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},i,t,r.subarray());return n?.signal?.throwIfAborted(),o}const Rk=Uint8Array.from([6,8,42,134,72,206,61,3,1,7]),Ak=Uint8Array.from([6,5,43,129,4,0,34]),Ik=Uint8Array.from([6,5,43,129,4,0,35]),IS={ext:!0,kty:"EC",crv:"P-256"},jS={ext:!0,kty:"EC",crv:"P-384"},NS={ext:!0,kty:"EC",crv:"P-521"},Wo=32,Ho=48,zo=66;function jk(e){const t=go(e);return kS(t)}function kS(e){const t=e[1],r=de(t,"base64url"),n=e[2][1][0],i=1;let o,a;if(t.byteLength===Wo)return o=de(n.subarray(i,i+Wo),"base64url"),a=de(n.subarray(i+Wo),"base64url"),new ml({...IS,key_ops:["sign"],d:r,x:o,y:a});if(t.byteLength===Ho)return o=de(n.subarray(i,i+Ho),"base64url"),a=de(n.subarray(i+Ho),"base64url"),new ml({...jS,key_ops:["sign"],d:r,x:o,y:a});if(t.byteLength===zo)return o=de(n.subarray(i,i+zo),"base64url"),a=de(n.subarray(i+zo),"base64url"),new ml({...NS,key_ops:["sign"],d:r,x:o,y:a});throw new vt(`Private key length was wrong length, got ${t.byteLength}, expected 32, 48 or 66`)}function MS(e){const t=go(e);return Nk(t)}function Nk(e){const t=e[1][1][0],r=1;let n,i;if(t.byteLength===Wo*2+1)return n=de(t.subarray(r,r+Wo),"base64url"),i=de(t.subarray(r+Wo),"base64url"),new yl({...IS,key_ops:["verify"],x:n,y:i});if(t.byteLength===Ho*2+1)return n=de(t.subarray(r,r+Ho),"base64url"),i=de(t.subarray(r+Ho),"base64url"),new yl({...jS,key_ops:["verify"],x:n,y:i});if(t.byteLength===zo*2+1)return n=de(t.subarray(r,r+zo),"base64url"),i=de(t.subarray(r+zo),"base64url"),new yl({...NS,key_ops:["verify"],x:n,y:i});throw new vt(`coordinates were wrong length, got ${t.byteLength}, expected 65, 97 or 133`)}function kk(e){return ln([Pt(Uint8Array.from([1])),wk(Ce(e.d??"","base64url")),ln([DS(e.crv)],160),ln([pv(new ht(Uint8Array.from([4]),Ce(e.x??"","base64url"),Ce(e.y??"","base64url")))],161)]).subarray()}function Mk(e){return ln([Pt(Uint8Array.from([1])),ln([DS(e.crv)],160),ln([pv(new ht(Uint8Array.from([4]),Ce(e.x??"","base64url"),Ce(e.y??"","base64url")))],161)]).subarray()}function DS(e){if(e==="P-256")return Rk;if(e==="P-384")return Ak;if(e==="P-521")return Ik;throw new vt(`Invalid curve ${e}`)}async function Dk(e="P-256"){const t=await Pk(e);return new ml(t.privateKey)}class yl{type="ECDSA";jwk;_raw;constructor(t){this.jwk=t}get raw(){return this._raw==null&&(this._raw=Mk(this.jwk)),this._raw}toMultihash(){return ni.digest(Rv(this))}toCID(){return se.createV1(114,this.toMultihash())}toString(){return ui.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:Mt(this.raw,t.raw)}async verify(t,r,n){return Ck(this.jwk,r,t,n)}}class ml{type="ECDSA";jwk;publicKey;_raw;constructor(t){this.jwk=t,this.publicKey=new yl({crv:t.crv,ext:t.ext,key_ops:["verify"],kty:"EC",x:t.x,y:t.y})}get raw(){return this._raw==null&&(this._raw=kk(this.jwk)),this._raw}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:Mt(this.raw,t.raw)}async sign(t,r){return Tk(this.jwk,t,r)}}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ff(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function ho(e,t=""){if(!Number.isSafeInteger(e)||e<0){const r=t&&`"${t}" `;throw new Error(`${r}expected integer >= 0, got ${e}`)}}function be(e,t,r=""){const n=ff(e),i=e?.length,o=t!==void 0;if(!n||o&&i!==t){const a=r&&`"${r}" `,u=o?` of length ${t}`:"",s=n?`length=${i}`:`type=${typeof e}`;throw new Error(a+"expected Uint8Array"+u+", got "+s)}return e}function LS(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash must wrapped by utils.createHasher");ho(e.outputLen),ho(e.blockLen)}function kl(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Lk(e,t){be(e,void 0,"digestInto() output");const r=t.outputLen;if(e.length<r)throw new Error('"digestInto() output" expected to be of length >='+r)}function Xo(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Ad(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Er(e,t){return e<<32-t|e>>>t}function Pq(e,t){return e<<t|e>>>32-t>>>0}const US=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Uk=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Fc(e){if(be(e),US)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=Uk[e[r]];return t}const an={_0:48,_9:57,A:65,F:70,a:97,f:102};function Y0(e){if(e>=an._0&&e<=an._9)return e-an._0;if(e>=an.A&&e<=an.F)return e-(an.A-10);if(e>=an.a&&e<=an.f)return e-(an.a-10)}function bc(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(US)return Uint8Array.fromHex(e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){const a=Y0(e.charCodeAt(o)),u=Y0(e.charCodeAt(o+1));if(a===void 0||u===void 0){const s=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+s+'" at index '+o)}n[i]=a*16+u}return n}const Bk=async()=>{};async function Tq(e,t,r){let n=Date.now();for(let i=0;i<e;i++){r(i);const o=Date.now()-n;o>=0&&o<t||(await Bk(),n+=o)}}function qk(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Cq(e,t=""){return typeof e=="string"?qk(e):be(e,void 0,t)}function Rr(...e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];be(i),t+=i.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const o=e[n];r.set(o,i),i+=o.length}return r}function Rq(e,t){if(t!==void 0&&{}.toString.call(t)!=="[object Object]")throw new Error("options must be object or undefined");return Object.assign(e,t)}function BS(e,t={}){const r=(i,o)=>e(o).update(i).digest(),n=e(void 0);return r.outputLen=n.outputLen,r.blockLen=n.blockLen,r.create=i=>e(i),Object.assign(r,t),Object.freeze(r)}function _v(e=32){const t=typeof globalThis=="object"?globalThis.crypto:null;if(typeof t?.getRandomValues!="function")throw new Error("crypto.getRandomValues must be defined");return t.getRandomValues(new Uint8Array(e))}const qS=e=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,e])});function xk(e,t,r){return e&t^~e&r}function Fk(e,t,r){return e&t^e&r^t&r}class xS{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(t,r,n,i){this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(t),this.view=Ad(this.buffer)}update(t){kl(this),be(t);const{view:r,buffer:n,blockLen:i}=this,o=t.length;for(let a=0;a<o;){const u=Math.min(i-this.pos,o-a);if(u===i){const s=Ad(t);for(;i<=o-a;a+=i)this.process(s,a);continue}n.set(t.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){kl(this),Lk(t,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:o}=this;let{pos:a}=this;r[a++]=128,Xo(this.buffer.subarray(a)),this.padOffset>i-a&&(this.process(n,0),a=0);for(let c=a;c<i;c++)r[c]=0;n.setBigUint64(i-8,BigInt(this.length*8),o),this.process(n,0);const u=Ad(t),s=this.outputLen;if(s%4)throw new Error("_sha2: outputLen must be aligned to 32bit");const l=s/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<l;c++)u.setUint32(4*c,d[c],o)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||=new this.constructor,t.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:o,destroyed:a,pos:u}=this;return t.destroyed=a,t.finished=o,t.length=i,t.pos=u,i%r&&t.buffer.set(n),t}clone(){return this._cloneInto()}}const Yn=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Je=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),ul=BigInt(2**32-1),Z0=BigInt(32);function Vk(e,t=!1){return t?{h:Number(e&ul),l:Number(e>>Z0&ul)}:{h:Number(e>>Z0&ul)|0,l:Number(e&ul)|0}}function $k(e,t=!1){const r=e.length;let n=new Uint32Array(r),i=new Uint32Array(r);for(let o=0;o<r;o++){const{h:a,l:u}=Vk(e[o],t);[n[o],i[o]]=[a,u]}return[n,i]}const X0=(e,t,r)=>e>>>r,Q0=(e,t,r)=>e<<32-r|t>>>r,qo=(e,t,r)=>e>>>r|t<<32-r,xo=(e,t,r)=>e<<32-r|t>>>r,sl=(e,t,r)=>e<<64-r|t>>>r-32,cl=(e,t,r)=>e>>>r-32|t<<64-r;function un(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}const Wk=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Hk=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,zk=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),Kk=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,Gk=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),Yk=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0,Zk=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Zn=new Uint32Array(64);class Xk extends xS{constructor(t){super(64,t,8,!1)}get(){const{A:t,B:r,C:n,D:i,E:o,F:a,G:u,H:s}=this;return[t,r,n,i,o,a,u,s]}set(t,r,n,i,o,a,u,s){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=a|0,this.G=u|0,this.H=s|0}process(t,r){for(let c=0;c<16;c++,r+=4)Zn[c]=t.getUint32(r,!1);for(let c=16;c<64;c++){const p=Zn[c-15],b=Zn[c-2],m=Er(p,7)^Er(p,18)^p>>>3,_=Er(b,17)^Er(b,19)^b>>>10;Zn[c]=_+Zn[c-7]+m+Zn[c-16]|0}let{A:n,B:i,C:o,D:a,E:u,F:s,G:l,H:d}=this;for(let c=0;c<64;c++){const p=Er(u,6)^Er(u,11)^Er(u,25),b=d+p+xk(u,s,l)+Zk[c]+Zn[c]|0,_=(Er(n,2)^Er(n,13)^Er(n,22))+Fk(n,i,o)|0;d=l,l=s,s=u,u=a+b|0,a=o,o=i,i=n,n=b+_|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,a=a+this.D|0,u=u+this.E|0,s=s+this.F|0,l=l+this.G|0,d=d+this.H|0,this.set(n,i,o,a,u,s,l,d)}roundClean(){Xo(Zn)}destroy(){this.set(0,0,0,0,0,0,0,0),Xo(this.buffer)}}class Qk extends Xk{A=Yn[0]|0;B=Yn[1]|0;C=Yn[2]|0;D=Yn[3]|0;E=Yn[4]|0;F=Yn[5]|0;G=Yn[6]|0;H=Yn[7]|0;constructor(){super(32)}}const FS=$k(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Jk=FS[0],e2=FS[1],Xn=new Uint32Array(80),Qn=new Uint32Array(80);class t2 extends xS{constructor(t){super(128,t,16,!1)}get(){const{Ah:t,Al:r,Bh:n,Bl:i,Ch:o,Cl:a,Dh:u,Dl:s,Eh:l,El:d,Fh:c,Fl:p,Gh:b,Gl:m,Hh:_,Hl:f}=this;return[t,r,n,i,o,a,u,s,l,d,c,p,b,m,_,f]}set(t,r,n,i,o,a,u,s,l,d,c,p,b,m,_,f){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=a|0,this.Dh=u|0,this.Dl=s|0,this.Eh=l|0,this.El=d|0,this.Fh=c|0,this.Fl=p|0,this.Gh=b|0,this.Gl=m|0,this.Hh=_|0,this.Hl=f|0}process(t,r){for(let h=0;h<16;h++,r+=4)Xn[h]=t.getUint32(r),Qn[h]=t.getUint32(r+=4);for(let h=16;h<80;h++){const v=Xn[h-15]|0,w=Qn[h-15]|0,E=qo(v,w,1)^qo(v,w,8)^X0(v,w,7),O=xo(v,w,1)^xo(v,w,8)^Q0(v,w,7),S=Xn[h-2]|0,P=Qn[h-2]|0,I=qo(S,P,19)^sl(S,P,61)^X0(S,P,6),C=xo(S,P,19)^cl(S,P,61)^Q0(S,P,6),R=zk(O,C,Qn[h-7],Qn[h-16]),A=Kk(R,E,I,Xn[h-7],Xn[h-16]);Xn[h]=A|0,Qn[h]=R|0}let{Ah:n,Al:i,Bh:o,Bl:a,Ch:u,Cl:s,Dh:l,Dl:d,Eh:c,El:p,Fh:b,Fl:m,Gh:_,Gl:f,Hh:y,Hl:g}=this;for(let h=0;h<80;h++){const v=qo(c,p,14)^qo(c,p,18)^sl(c,p,41),w=xo(c,p,14)^xo(c,p,18)^cl(c,p,41),E=c&b^~c&_,O=p&m^~p&f,S=Gk(g,w,O,e2[h],Qn[h]),P=Yk(S,y,v,E,Jk[h],Xn[h]),I=S|0,C=qo(n,i,28)^sl(n,i,34)^sl(n,i,39),R=xo(n,i,28)^cl(n,i,34)^cl(n,i,39),A=n&o^n&u^o&u,D=i&a^i&s^a&s;y=_|0,g=f|0,_=b|0,f=m|0,b=c|0,m=p|0,{h:c,l:p}=un(l|0,d|0,P|0,I|0),l=u|0,d=s|0,u=o|0,s=a|0,o=n|0,a=i|0;const j=Wk(I,R,D);n=Hk(j,P,C,A),i=j|0}({h:n,l:i}=un(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:a}=un(this.Bh|0,this.Bl|0,o|0,a|0),{h:u,l:s}=un(this.Ch|0,this.Cl|0,u|0,s|0),{h:l,l:d}=un(this.Dh|0,this.Dl|0,l|0,d|0),{h:c,l:p}=un(this.Eh|0,this.El|0,c|0,p|0),{h:b,l:m}=un(this.Fh|0,this.Fl|0,b|0,m|0),{h:_,l:f}=un(this.Gh|0,this.Gl|0,_|0,f|0),{h:y,l:g}=un(this.Hh|0,this.Hl|0,y|0,g|0),this.set(n,i,o,a,u,s,l,d,c,p,b,m,_,f,y,g)}roundClean(){Xo(Xn,Qn)}destroy(){Xo(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class r2 extends t2{Ah=Je[0]|0;Al=Je[1]|0;Bh=Je[2]|0;Bl=Je[3]|0;Ch=Je[4]|0;Cl=Je[5]|0;Dh=Je[6]|0;Dl=Je[7]|0;Eh=Je[8]|0;El=Je[9]|0;Fh=Je[10]|0;Fl=Je[11]|0;Gh=Je[12]|0;Gl=Je[13]|0;Hh=Je[14]|0;Hl=Je[15]|0;constructor(){super(64)}}const df=BS(()=>new Qk,qS(1)),n2=BS(()=>new r2,qS(3));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bv=BigInt(0),eh=BigInt(1);function vo(e,t=""){if(typeof e!="boolean"){const r=t&&`"${t}" `;throw new Error(r+"expected boolean, got type="+typeof e)}return e}function VS(e){if(typeof e=="bigint"){if(!gl(e))throw new Error("positive bigint expected, got "+e)}else ho(e);return e}function ll(e){const t=VS(e).toString(16);return t.length&1?"0"+t:t}function $S(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?bv:BigInt("0x"+e)}function hf(e){return $S(Fc(e))}function yc(e){return $S(Fc(th(be(e)).reverse()))}function yv(e,t){ho(t),e=VS(e);const r=bc(e.toString(16).padStart(t*2,"0"));if(r.length!==t)throw new Error("number too large");return r}function WS(e,t){return yv(e,t).reverse()}function th(e){return Uint8Array.from(e)}const gl=e=>typeof e=="bigint"&&bv<=e;function i2(e,t,r){return gl(e)&&gl(t)&&gl(r)&&t<=e&&e<r}function rh(e,t,r,n){if(!i2(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function o2(e){let t;for(t=0;e>bv;e>>=eh,t+=1);return t}const mv=e=>(eh<<BigInt(e))-eh;function a2(e,t,r){if(ho(e,"hashLen"),ho(t,"qByteLen"),typeof r!="function")throw new Error("hmacFn must be a function");const n=f=>new Uint8Array(f),i=Uint8Array.of(),o=Uint8Array.of(0),a=Uint8Array.of(1),u=1e3;let s=n(e),l=n(e),d=0;const c=()=>{s.fill(1),l.fill(0),d=0},p=(...f)=>r(l,Rr(s,...f)),b=(f=i)=>{l=p(o,f),s=p(),f.length!==0&&(l=p(a,f),s=p())},m=()=>{if(d++>=u)throw new Error("drbg: tried max amount of iterations");let f=0;const y=[];for(;f<t;){s=p();const g=s.slice();y.push(g),f+=s.length}return Rr(...y)};return(f,y)=>{c(),b(f);let g;for(;!(g=y(m()));)b();return c(),g}}function Vc(e,t={},r={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function n(o,a,u){const s=e[o];if(u&&s===void 0)return;const l=typeof s;if(l!==a||s===null)throw new Error(`param "${o}" is invalid: expected ${a}, got ${l}`)}const i=(o,a)=>Object.entries(o).forEach(([u,s])=>n(u,s,a));i(t,!1),i(r,!0)}function Ml(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(i!==void 0)return i;const o=e(r,...n);return t.set(r,o),o}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ot=BigInt(0),He=BigInt(1),co=BigInt(2),HS=BigInt(3),zS=BigInt(4),KS=BigInt(5),u2=BigInt(7),GS=BigInt(8),s2=BigInt(9),YS=BigInt(16);function Ue(e,t){const r=e%t;return r>=Ot?r:t+r}function Me(e,t,r){let n=e;for(;t-- >Ot;)n*=n,n%=r;return n}function J0(e,t){if(e===Ot)throw new Error("invert: expected non-zero number");if(t<=Ot)throw new Error("invert: expected positive modulus, got "+t);let r=Ue(e,t),n=t,i=Ot,o=He;for(;r!==Ot;){const u=n/r,s=n%r,l=i-o*u;n=r,r=s,i=o,o=l}if(n!==He)throw new Error("invert: does not exist");return Ue(i,t)}function gv(e,t,r){if(!e.eql(e.sqr(t),r))throw new Error("Cannot find square root")}function ZS(e,t){const r=(e.ORDER+He)/zS,n=e.pow(t,r);return gv(e,n,t),n}function c2(e,t){const r=(e.ORDER-KS)/GS,n=e.mul(t,co),i=e.pow(n,r),o=e.mul(t,i),a=e.mul(e.mul(o,co),i),u=e.mul(o,e.sub(a,e.ONE));return gv(e,u,t),u}function l2(e){const t=vf(e),r=XS(e),n=r(t,t.neg(t.ONE)),i=r(t,n),o=r(t,t.neg(n)),a=(e+u2)/YS;return(u,s)=>{let l=u.pow(s,a),d=u.mul(l,n);const c=u.mul(l,i),p=u.mul(l,o),b=u.eql(u.sqr(d),s),m=u.eql(u.sqr(c),s);l=u.cmov(l,d,b),d=u.cmov(p,c,m);const _=u.eql(u.sqr(d),s),f=u.cmov(l,d,_);return gv(u,f,s),f}}function XS(e){if(e<HS)throw new Error("sqrt is not defined for small field");let t=e-He,r=0;for(;t%co===Ot;)t/=co,r++;let n=co;const i=vf(e);for(;ew(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return ZS;let o=i.pow(n,t);const a=(t+He)/co;return function(s,l){if(s.is0(l))return l;if(ew(s,l)!==1)throw new Error("Cannot find square root");let d=r,c=s.mul(s.ONE,o),p=s.pow(l,t),b=s.pow(l,a);for(;!s.eql(p,s.ONE);){if(s.is0(p))return s.ZERO;let m=1,_=s.sqr(p);for(;!s.eql(_,s.ONE);)if(m++,_=s.sqr(_),m===d)throw new Error("Cannot find square root");const f=He<<BigInt(d-m-1),y=s.pow(c,f);d=m,c=s.sqr(y),p=s.mul(p,c),b=s.mul(b,y)}return b}}function f2(e){return e%zS===HS?ZS:e%GS===KS?c2:e%YS===s2?l2(e):XS(e)}const d2=(e,t)=>(Ue(e,t)&He)===He,h2=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function v2(e){const t={ORDER:"bigint",BYTES:"number",BITS:"number"},r=h2.reduce((n,i)=>(n[i]="function",n),t);return Vc(e,r),e}function p2(e,t,r){if(r<Ot)throw new Error("invalid exponent, negatives unsupported");if(r===Ot)return e.ONE;if(r===He)return t;let n=e.ONE,i=t;for(;r>Ot;)r&He&&(n=e.mul(n,i)),i=e.sqr(i),r>>=He;return n}function QS(e,t,r=!1){const n=new Array(t.length).fill(r?e.ZERO:void 0),i=t.reduce((a,u,s)=>e.is0(u)?a:(n[s]=a,e.mul(a,u)),e.ONE),o=e.inv(i);return t.reduceRight((a,u,s)=>e.is0(u)?a:(n[s]=e.mul(a,n[s]),e.mul(a,u)),o),n}function ew(e,t){const r=(e.ORDER-He)/co,n=e.pow(t,r),i=e.eql(n,e.ONE),o=e.eql(n,e.ZERO),a=e.eql(n,e.neg(e.ONE));if(!i&&!o&&!a)throw new Error("invalid Legendre symbol result");return i?1:o?0:-1}function _2(e,t){t!==void 0&&ho(t);const r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}class b2{ORDER;BITS;BYTES;isLE;ZERO=Ot;ONE=He;_lengths;_sqrt;_mod;constructor(t,r={}){if(t<=Ot)throw new Error("invalid field: expected ORDER > 0, got "+t);let n;this.isLE=!1,r!=null&&typeof r=="object"&&(typeof r.BITS=="number"&&(n=r.BITS),typeof r.sqrt=="function"&&(this.sqrt=r.sqrt),typeof r.isLE=="boolean"&&(this.isLE=r.isLE),r.allowedLengths&&(this._lengths=r.allowedLengths?.slice()),typeof r.modFromBytes=="boolean"&&(this._mod=r.modFromBytes));const{nBitLength:i,nByteLength:o}=_2(t,n);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");this.ORDER=t,this.BITS=i,this.BYTES=o,this._sqrt=void 0,Object.preventExtensions(this)}create(t){return Ue(t,this.ORDER)}isValid(t){if(typeof t!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof t);return Ot<=t&&t<this.ORDER}is0(t){return t===Ot}isValidNot0(t){return!this.is0(t)&&this.isValid(t)}isOdd(t){return(t&He)===He}neg(t){return Ue(-t,this.ORDER)}eql(t,r){return t===r}sqr(t){return Ue(t*t,this.ORDER)}add(t,r){return Ue(t+r,this.ORDER)}sub(t,r){return Ue(t-r,this.ORDER)}mul(t,r){return Ue(t*r,this.ORDER)}pow(t,r){return p2(this,t,r)}div(t,r){return Ue(t*J0(r,this.ORDER),this.ORDER)}sqrN(t){return t*t}addN(t,r){return t+r}subN(t,r){return t-r}mulN(t,r){return t*r}inv(t){return J0(t,this.ORDER)}sqrt(t){return this._sqrt||(this._sqrt=f2(this.ORDER)),this._sqrt(this,t)}toBytes(t){return this.isLE?WS(t,this.BYTES):yv(t,this.BYTES)}fromBytes(t,r=!1){be(t);const{_lengths:n,BYTES:i,isLE:o,ORDER:a,_mod:u}=this;if(n){if(!n.includes(t.length)||t.length>i)throw new Error("Field.fromBytes: expected "+n+" bytes, got "+t.length);const l=new Uint8Array(i);l.set(t,o?0:l.length-t.length),t=l}if(t.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+t.length);let s=o?yc(t):hf(t);if(u&&(s=Ue(s,a)),!r&&!this.isValid(s))throw new Error("invalid field element: outside of range 0..ORDER");return s}invertBatch(t){return QS(this,t)}cmov(t,r,n){return n?r:t}}function vf(e,t={}){return new b2(e,t)}function JS(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function eP(e){const t=JS(e);return t+Math.ceil(t/2)}function y2(e,t,r=!1){be(e);const n=e.length,i=JS(t),o=eP(t);if(n<16||n<o||n>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+n);const a=r?yc(e):hf(e),u=Ue(a,t-He)+He;return r?WS(u,i):yv(u,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qo=BigInt(0),lo=BigInt(1);function Dl(e,t){const r=t.negate();return e?r:t}function vc(e,t){const r=QS(e.Fp,t.map(n=>n.Z));return t.map((n,i)=>e.fromAffine(n.toAffine(r[i])))}function tP(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Id(e,t){tP(e,t);const r=Math.ceil(t/e)+1,n=2**(e-1),i=2**e,o=mv(e),a=BigInt(e);return{windows:r,windowSize:n,mask:o,maxNumber:i,shiftBy:a}}function tw(e,t,r){const{windowSize:n,mask:i,maxNumber:o,shiftBy:a}=r;let u=Number(e&i),s=e>>a;u>n&&(u-=o,s+=lo);const l=t*n,d=l+Math.abs(u)-1,c=u===0,p=u<0,b=t%2!==0;return{nextN:s,offset:d,isZero:c,isNeg:p,isNegF:b,offsetF:l}}const jd=new WeakMap,rP=new WeakMap;function Nd(e){return rP.get(e)||1}function rw(e){if(e!==Qo)throw new Error("invalid wNAF")}class nP{BASE;ZERO;Fn;bits;constructor(t,r){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=r}_unsafeLadder(t,r,n=this.ZERO){let i=t;for(;r>Qo;)r&lo&&(n=n.add(i)),i=i.double(),r>>=lo;return n}precomputeWindow(t,r){const{windows:n,windowSize:i}=Id(r,this.bits),o=[];let a=t,u=a;for(let s=0;s<n;s++){u=a,o.push(u);for(let l=1;l<i;l++)u=u.add(a),o.push(u);a=u.double()}return o}wNAF(t,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let i=this.ZERO,o=this.BASE;const a=Id(t,this.bits);for(let u=0;u<a.windows;u++){const{nextN:s,offset:l,isZero:d,isNeg:c,isNegF:p,offsetF:b}=tw(n,u,a);n=s,d?o=o.add(Dl(p,r[b])):i=i.add(Dl(c,r[l]))}return rw(n),{p:i,f:o}}wNAFUnsafe(t,r,n,i=this.ZERO){const o=Id(t,this.bits);for(let a=0;a<o.windows&&n!==Qo;a++){const{nextN:u,offset:s,isZero:l,isNeg:d}=tw(n,a,o);if(n=u,!l){const c=r[s];i=i.add(d?c.negate():c)}}return rw(n),i}getPrecomputes(t,r,n){let i=jd.get(r);return i||(i=this.precomputeWindow(r,t),t!==1&&(typeof n=="function"&&(i=n(i)),jd.set(r,i))),i}cached(t,r,n){const i=Nd(t);return this.wNAF(i,this.getPrecomputes(i,t,n),r)}unsafe(t,r,n,i){const o=Nd(t);return o===1?this._unsafeLadder(t,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,t,n),r,i)}createCache(t,r){tP(r,this.bits),rP.set(t,r),jd.delete(t)}hasCache(t){return Nd(t)!==1}}function m2(e,t,r,n){let i=t,o=e.ZERO,a=e.ZERO;for(;r>Qo||n>Qo;)r&lo&&(o=o.add(i)),n&lo&&(a=a.add(i)),i=i.double(),r>>=lo,n>>=lo;return{p1:o,p2:a}}function nw(e,t,r){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return v2(t),t}else return vf(e,{isLE:r})}function iP(e,t,r={},n){if(n===void 0&&(n=e==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const s of["p","n","h"]){const l=t[s];if(!(typeof l=="bigint"&&l>Qo))throw new Error(`CURVE.${s} must be positive bigint`)}const i=nw(t.p,r.Fp,n),o=nw(t.n,r.Fn,n),u=["Gx","Gy","a",e==="weierstrass"?"b":"d"];for(const s of u)if(!i.isValid(t[s]))throw new Error(`CURVE.${s} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:i,Fn:o}}function oP(e,t){return function(n){const i=e(n);return{secretKey:i,publicKey:t(i)}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Jn=BigInt(0),Fe=BigInt(1),kd=BigInt(2),g2=BigInt(8);function w2(e,t,r,n){const i=e.sqr(r),o=e.sqr(n),a=e.add(e.mul(t.a,i),o),u=e.add(e.ONE,e.mul(t.d,e.mul(i,o)));return e.eql(a,u)}function O2(e,t={}){const r=iP("edwards",e,t,t.FpFnLE),{Fp:n,Fn:i}=r;let o=r.CURVE;const{h:a}=o;Vc(t,{},{uvRatio:"function"});const u=kd<<BigInt(i.BYTES*8)-Fe,s=f=>n.create(f),l=t.uvRatio||((f,y)=>{try{return{isValid:!0,value:n.sqrt(n.div(f,y))}}catch{return{isValid:!1,value:Jn}}});if(!w2(n,o,o.Gx,o.Gy))throw new Error("bad curve params: generator point");function d(f,y,g=!1){const h=g?Fe:Jn;return rh("coordinate "+f,y,h,u),y}function c(f){if(!(f instanceof m))throw new Error("EdwardsPoint expected")}const p=Ml((f,y)=>{const{X:g,Y:h,Z:v}=f,w=f.is0();y==null&&(y=w?g2:n.inv(v));const E=s(g*y),O=s(h*y),S=n.mul(v,y);if(w)return{x:Jn,y:Fe};if(S!==Fe)throw new Error("invZ was invalid");return{x:E,y:O}}),b=Ml(f=>{const{a:y,d:g}=o;if(f.is0())throw new Error("bad point: ZERO");const{X:h,Y:v,Z:w,T:E}=f,O=s(h*h),S=s(v*v),P=s(w*w),I=s(P*P),C=s(O*y),R=s(P*s(C+S)),A=s(I+s(g*s(O*S)));if(R!==A)throw new Error("bad point: equation left != right (1)");const D=s(h*v),j=s(w*E);if(D!==j)throw new Error("bad point: equation left != right (2)");return!0});class m{static BASE=new m(o.Gx,o.Gy,Fe,s(o.Gx*o.Gy));static ZERO=new m(Jn,Fe,Fe,Jn);static Fp=n;static Fn=i;X;Y;Z;T;constructor(y,g,h,v){this.X=d("x",y),this.Y=d("y",g),this.Z=d("z",h,!0),this.T=d("t",v),Object.freeze(this)}static CURVE(){return o}static fromAffine(y){if(y instanceof m)throw new Error("extended point not allowed");const{x:g,y:h}=y||{};return d("x",g),d("y",h),new m(g,h,Fe,s(g*h))}static fromBytes(y,g=!1){const h=n.BYTES,{a:v,d:w}=o;y=th(be(y,h,"point")),vo(g,"zip215");const E=th(y),O=y[h-1];E[h-1]=O&-129;const S=yc(E),P=g?u:n.ORDER;rh("point.y",S,Jn,P);const I=s(S*S),C=s(I-Fe),R=s(w*I-v);let{isValid:A,value:D}=l(C,R);if(!A)throw new Error("bad point: invalid y coordinate");const j=(D&Fe)===Fe,U=(O&128)!==0;if(!g&&D===Jn&&U)throw new Error("bad point: x=0 and x_0=1");return U!==j&&(D=s(-D)),m.fromAffine({x:D,y:S})}static fromHex(y,g=!1){return m.fromBytes(bc(y),g)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(y=8,g=!0){return _.createCache(this,y),g||this.multiply(kd),this}assertValidity(){b(this)}equals(y){c(y);const{X:g,Y:h,Z:v}=this,{X:w,Y:E,Z:O}=y,S=s(g*O),P=s(w*v),I=s(h*O),C=s(E*v);return S===P&&I===C}is0(){return this.equals(m.ZERO)}negate(){return new m(s(-this.X),this.Y,this.Z,s(-this.T))}double(){const{a:y}=o,{X:g,Y:h,Z:v}=this,w=s(g*g),E=s(h*h),O=s(kd*s(v*v)),S=s(y*w),P=g+h,I=s(s(P*P)-w-E),C=S+E,R=C-O,A=S-E,D=s(I*R),j=s(C*A),U=s(I*A),B=s(R*C);return new m(D,j,B,U)}add(y){c(y);const{a:g,d:h}=o,{X:v,Y:w,Z:E,T:O}=this,{X:S,Y:P,Z:I,T:C}=y,R=s(v*S),A=s(w*P),D=s(O*h*C),j=s(E*I),U=s((v+w)*(S+P)-R-A),B=j-D,q=j+D,T=s(A-g*R),k=s(U*B),M=s(q*T),V=s(U*T),z=s(B*q);return new m(k,M,z,V)}subtract(y){return this.add(y.negate())}multiply(y){if(!i.isValidNot0(y))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:g,f:h}=_.cached(this,y,v=>vc(m,v));return vc(m,[g,h])[0]}multiplyUnsafe(y,g=m.ZERO){if(!i.isValid(y))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return y===Jn?m.ZERO:this.is0()||y===Fe?this:_.unsafe(this,y,h=>vc(m,h),g)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}isTorsionFree(){return _.unsafe(this,o.n).is0()}toAffine(y){return p(this,y)}clearCofactor(){return a===Fe?this:this.multiplyUnsafe(a)}toBytes(){const{x:y,y:g}=this.toAffine(),h=n.toBytes(g);return h[h.length-1]|=y&Fe?128:0,h}toHex(){return Fc(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}const _=new nP(m,i.BITS);return m.BASE.precompute(8),m}function E2(e,t,r={}){if(typeof t!="function")throw new Error('"hash" function param is required');Vc(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=r,{BASE:i,Fp:o,Fn:a}=e,u=r.randomBytes||_v,s=r.adjustScalarBytes||(S=>S),l=r.domain||((S,P,I)=>{if(vo(I,"phflag"),P.length||I)throw new Error("Contexts/pre-hash are not supported");return S});function d(S){return a.create(yc(S))}function c(S){const P=h.secretKey;be(S,h.secretKey,"secretKey");const I=be(t(S),2*P,"hashedSecretKey"),C=s(I.slice(0,P)),R=I.slice(P,2*P),A=d(C);return{head:C,prefix:R,scalar:A}}function p(S){const{head:P,prefix:I,scalar:C}=c(S),R=i.multiply(C),A=R.toBytes();return{head:P,prefix:I,scalar:C,point:R,pointBytes:A}}function b(S){return p(S).pointBytes}function m(S=Uint8Array.of(),...P){const I=Rr(...P);return d(t(l(I,be(S,void 0,"context"),!!n)))}function _(S,P,I={}){S=be(S,void 0,"message"),n&&(S=n(S));const{prefix:C,scalar:R,pointBytes:A}=p(P),D=m(I.context,C,S),j=i.multiply(D).toBytes(),U=m(I.context,j,A,S),B=a.create(D+U*R);if(!a.isValid(B))throw new Error("sign failed: invalid s");const q=Rr(j,a.toBytes(B));return be(q,h.signature,"result")}const f={zip215:!0};function y(S,P,I,C=f){const{context:R,zip215:A}=C,D=h.signature;S=be(S,D,"signature"),P=be(P,void 0,"message"),I=be(I,h.publicKey,"publicKey"),A!==void 0&&vo(A,"zip215"),n&&(P=n(P));const j=D/2,U=S.subarray(0,j),B=yc(S.subarray(j,D));let q,T,k;try{q=e.fromBytes(I,A),T=e.fromBytes(U,A),k=i.multiplyUnsafe(B)}catch{return!1}if(!A&&q.isSmallOrder())return!1;const M=m(R,T.toBytes(),q.toBytes(),P);return T.add(q.multiplyUnsafe(M)).subtract(k).clearCofactor().is0()}const g=o.BYTES,h={secretKey:g,publicKey:g,signature:2*g,seed:g};function v(S=u(h.seed)){return be(S,h.seed,"seed")}function w(S){return ff(S)&&S.length===a.BYTES}function E(S,P){try{return!!e.fromBytes(S,P)}catch{return!1}}const O={getExtendedPublicKey:p,randomSecretKey:v,isValidSecretKey:w,isValidPublicKey:E,toMontgomery(S){const{y:P}=e.fromBytes(S),I=h.publicKey,C=I===32;if(!C&&I!==57)throw new Error("only defined for 25519 and 448");const R=C?o.div(Fe+P,Fe-P):o.div(P-Fe,P+Fe);return o.toBytes(R)},toMontgomerySecret(S){const P=h.secretKey;be(S,P);const I=t(S.subarray(0,P));return s(I).subarray(0,P)}};return Object.freeze({keygen:oP(v,b),getPublicKey:b,sign:_,verify:y,utils:O,Point:e,lengths:h})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const S2=BigInt(1),iw=BigInt(2),P2=BigInt(5),T2=BigInt(8),wv=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),C2={p:wv,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:T2,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function R2(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),o=wv,u=e*e%o*e%o,s=Me(u,iw,o)*u%o,l=Me(s,S2,o)*e%o,d=Me(l,P2,o)*l%o,c=Me(d,t,o)*d%o,p=Me(c,r,o)*c%o,b=Me(p,n,o)*p%o,m=Me(b,i,o)*b%o,_=Me(m,i,o)*b%o,f=Me(_,t,o)*d%o;return{pow_p_5_8:Me(f,iw,o)*e%o,b2:u}}function A2(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const ow=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function I2(e,t){const r=wv,n=Ue(t*t*t,r),i=Ue(n*n*t,r),o=R2(e*i).pow_p_5_8;let a=Ue(e*n*o,r);const u=Ue(t*a*a,r),s=a,l=Ue(a*ow,r),d=u===e,c=u===Ue(-e,r),p=u===Ue(-e*ow,r);return d&&(a=s),(c||p)&&(a=l),d2(a,r)&&(a=Ue(-a,r)),{isValid:d||c,value:a}}const j2=O2(C2,{uvRatio:I2});function N2(e){return E2(j2,n2,Object.assign({adjustScalarBytes:A2},e))}const Ll=N2({});class aw extends Error{constructor(t="An error occurred while signing a message"){super(t),this.name="SigningError"}}class uw extends Error{constructor(t="An error occurred while verifying a message"){super(t),this.name="VerificationError"}}class k2 extends Error{constructor(t="Missing Web Crypto API"){super(t),this.name="WebCryptoMissingError"}}const Dt={get(e=globalThis){const t=e.crypto;if(t?.subtle==null)throw new k2("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return t}},Ul=32,Pr=64,nh=32;let Ko;const aP=(async()=>{try{return await Dt.get().subtle.generateKey({name:"Ed25519"},!0,["sign","verify"]),!0}catch{return!1}})();function M2(){const e=Ll.utils.randomSecretKey(),t=Ll.getPublicKey(e);return{privateKey:F2(e,t),publicKey:t}}async function D2(e,t){let r;e.length===Pr?r=e.subarray(0,32):r=e;const n={crv:"Ed25519",kty:"OKP",x:de(e.subarray(32),"base64url"),d:de(r,"base64url"),ext:!0,key_ops:["sign"]},i=await Dt.get().subtle.importKey("jwk",n,{name:"Ed25519"},!0,["sign"]),o=await Dt.get().subtle.sign({name:"Ed25519"},i,t instanceof Uint8Array?t:t.subarray());return new Uint8Array(o,0,o.byteLength)}function L2(e,t){const r=e.subarray(0,nh);return Ll.sign(t instanceof Uint8Array?t:t.subarray(),r)}async function U2(e,t){return Ko==null&&(Ko=await aP),Ko?D2(e,t):L2(e,t)}async function B2(e,t,r){if(e.buffer instanceof ArrayBuffer){const n=await Dt.get().subtle.importKey("raw",e.buffer,{name:"Ed25519"},!1,["verify"]);return await Dt.get().subtle.verify({name:"Ed25519"},n,t,r instanceof Uint8Array?r:r.subarray())}throw new TypeError("WebCrypto does not support SharedArrayBuffer for Ed25519 keys")}function q2(e,t,r){return Ll.verify(t,r instanceof Uint8Array?r:r.subarray(),e)}async function x2(e,t,r){return Ko==null&&(Ko=await aP),Ko?B2(e,t,r):q2(e,t,r)}function F2(e,t){const r=new Uint8Array(Pr);for(let n=0;n<nh;n++)r[n]=e[n],r[nh+n]=t[n];return r}function pf(e){return e==null?!1:typeof e.then=="function"&&typeof e.catch=="function"&&typeof e.finally=="function"}class uP{type="Ed25519";raw;constructor(t){this.raw=mc(t,Ul)}toMultihash(){return ni.digest(Rv(this))}toCID(){return se.createV1(114,this.toMultihash())}toString(){return ui.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:Mt(this.raw,t.raw)}verify(t,r,n){n?.signal?.throwIfAborted();const i=x2(this.raw,r,t);return pf(i)?i.then(o=>(n?.signal?.throwIfAborted(),o)):i}}class ih{type="Ed25519";raw;publicKey;constructor(t,r){this.raw=mc(t,Pr),this.publicKey=new uP(r)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:Mt(this.raw,t.raw)}sign(t,r){r?.signal?.throwIfAborted();const n=U2(this.raw,t);return pf(n)?n.then(i=>(r?.signal?.throwIfAborted(),i)):(r?.signal?.throwIfAborted(),n)}}function sP(e){if(e.length>Pr){e=mc(e,Pr+Ul);const n=e.subarray(0,Pr),i=e.subarray(Pr,e.length);return new ih(n,i)}e=mc(e,Pr);const t=e.subarray(0,Pr),r=e.subarray(Ul);return new ih(t,r)}function cP(e){return e=mc(e,Ul),new uP(e)}async function V2(){const{privateKey:e,publicKey:t}=M2();return new ih(e,t)}function mc(e,t){if(e=Uint8Array.from(e??[]),e.length!==t)throw new vt(`Key must be a Uint8Array of length ${t}, got ${e.length}`);return e}const Ov=new Float32Array([-0]),ri=new Uint8Array(Ov.buffer);function $2(e,t,r){Ov[0]=e,t[r]=ri[0],t[r+1]=ri[1],t[r+2]=ri[2],t[r+3]=ri[3]}function W2(e,t){return ri[0]=e[t],ri[1]=e[t+1],ri[2]=e[t+2],ri[3]=e[t+3],Ov[0]}const Ev=new Float64Array([-0]),rt=new Uint8Array(Ev.buffer);function H2(e,t,r){Ev[0]=e,t[r]=rt[0],t[r+1]=rt[1],t[r+2]=rt[2],t[r+3]=rt[3],t[r+4]=rt[4],t[r+5]=rt[5],t[r+6]=rt[6],t[r+7]=rt[7]}function z2(e,t){return rt[0]=e[t],rt[1]=e[t+1],rt[2]=e[t+2],rt[3]=e[t+3],rt[4]=e[t+4],rt[5]=e[t+5],rt[6]=e[t+6],rt[7]=e[t+7],Ev[0]}const K2=BigInt(Number.MAX_SAFE_INTEGER),G2=BigInt(Number.MIN_SAFE_INTEGER);class nt{lo;hi;constructor(t,r){this.lo=t|0,this.hi=r|0}toNumber(t=!1){if(!t&&this.hi>>>31>0){const r=~this.lo+1>>>0;let n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(t=!1){if(t)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const r=~this.lo+1>>>0;let n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(t=!1){return this.toBigInt(t).toString()}zzEncode(){const t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this}zzDecode(){const t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this}length(){const t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}static fromBigInt(t){if(t===0n)return fo;if(t<K2&&t>G2)return this.fromNumber(Number(t));const r=t<0n;r&&(t=-t);let n=t>>32n,i=t-(n<<32n);return r&&(n=~n|0n,i=~i|0n,++i>sw&&(i=0n,++n>sw&&(n=0n))),new nt(Number(i),Number(n))}static fromNumber(t){if(t===0)return fo;const r=t<0;r&&(t=-t);let n=t>>>0,i=(t-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new nt(n,i)}static from(t){return typeof t=="number"?nt.fromNumber(t):typeof t=="bigint"?nt.fromBigInt(t):typeof t=="string"?nt.fromBigInt(BigInt(t)):t.low!=null||t.high!=null?new nt(t.low>>>0,t.high>>>0):fo}}const fo=new nt(0,0);fo.toBigInt=function(){return 0n};fo.zzEncode=fo.zzDecode=function(){return this};fo.length=function(){return 1};const sw=4294967296n;function Y2(e){let t=0,r=0;for(let n=0;n<e.length;++n)r=e.charCodeAt(n),r<128?t+=1:r<2048?t+=2:(r&64512)===55296&&(e.charCodeAt(n+1)&64512)===56320?(++n,t+=4):t+=3;return t}function Z2(e,t,r){if(r-t<1)return"";let i;const o=[];let a=0,u;for(;t<r;)u=e[t++],u<128?o[a++]=u:u>191&&u<224?o[a++]=(u&31)<<6|e[t++]&63:u>239&&u<365?(u=((u&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,o[a++]=55296+(u>>10),o[a++]=56320+(u&1023)):o[a++]=(u&15)<<12|(e[t++]&63)<<6|e[t++]&63,a>8191&&((i??(i=[])).push(String.fromCharCode.apply(String,o)),a=0);return i!=null?(a>0&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))}function lP(e,t,r){const n=r;let i,o;for(let a=0;a<e.length;++a)i=e.charCodeAt(a),i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=i&63|128):(i&64512)===55296&&((o=e.charCodeAt(a+1))&64512)===56320?(i=65536+((i&1023)<<10)+(o&1023),++a,t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=i&63|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=i&63|128);return r-n}function Xt(e,t){return RangeError(`index out of range: ${e.pos} + ${t??1} > ${e.len}`)}function fl(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}class X2{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(t){this.buf=t,this.pos=0,this.len=t.length}uint32(){let t=4294967295;if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,Xt(this,10);return t}int32(){return this.uint32()|0}sint32(){const t=this.uint32();return t>>>1^-(t&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw Xt(this,4);return fl(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw Xt(this,4);return fl(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw Xt(this,4);const t=W2(this.buf,this.pos);return this.pos+=4,t}double(){if(this.pos+8>this.len)throw Xt(this,4);const t=z2(this.buf,this.pos);return this.pos+=8,t}bytes(){const t=this.uint32(),r=this.pos,n=this.pos+t;if(n>this.len)throw Xt(this,t);return this.pos+=t,r===n?new Uint8Array(0):this.buf.subarray(r,n)}string(){const t=this.bytes();return Z2(t,0,t.length)}skip(t){if(typeof t=="number"){if(this.pos+t>this.len)throw Xt(this,t);this.pos+=t}else do if(this.pos>=this.len)throw Xt(this);while((this.buf[this.pos++]&128)!==0);return this}skipType(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${t} at offset ${this.pos}`)}return this}readLongVarint(){const t=new nt(0,0);let r=0;if(this.len-this.pos>4){for(;r<4;++r)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw Xt(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,t}if(this.len-this.pos>4){for(;r<5;++r)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;r<5;++r){if(this.pos>=this.len)throw Xt(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw Xt(this,8);const t=fl(this.buf,this.pos+=4),r=fl(this.buf,this.pos+=4);return new nt(t,r)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const t=YE(this.buf,this.pos);return this.pos+=fn(t),t}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function Q2(e){return new X2(e instanceof Uint8Array?e:e.subarray())}function fP(e,t,r){const n=Q2(e);return t.decode(n,void 0,r)}function J2(e){let n,i=8192;return function(a){if(a<1||a>4096)return ii(a);i+a>8192&&(n=ii(8192),i=0);const u=n.subarray(i,i+=a);return(i&7)!==0&&(i=(i|7)+1),u}}class cc{fn;len;next;val;constructor(t,r,n){this.fn=t,this.len=r,this.next=void 0,this.val=n}}function Md(){}class eM{head;tail;len;next;constructor(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}}const tM=J2();function rM(e){return globalThis.Buffer!=null?ii(e):tM(e)}class oh{len;head;tail;states;constructor(){this.len=0,this.head=new cc(Md,0,0),this.tail=this.head,this.states=null}_push(t,r,n){return this.tail=this.tail.next=new cc(t,r,n),this.len+=r,this}uint32(t){return this.len+=(this.tail=this.tail.next=new iM((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this}int32(t){return t<0?this._push(dl,10,nt.fromNumber(t)):this.uint32(t)}sint32(t){return this.uint32((t<<1^t>>31)>>>0)}uint64(t){const r=nt.fromBigInt(t);return this._push(dl,r.length(),r)}uint64Number(t){return this._push(El,fn(t),t)}uint64String(t){return this.uint64(BigInt(t))}int64(t){return this.uint64(t)}int64Number(t){return this.uint64Number(t)}int64String(t){return this.uint64String(t)}sint64(t){const r=nt.fromBigInt(t).zzEncode();return this._push(dl,r.length(),r)}sint64Number(t){const r=nt.fromNumber(t).zzEncode();return this._push(dl,r.length(),r)}sint64String(t){return this.sint64(BigInt(t))}bool(t){return this._push(Dd,1,t?1:0)}fixed32(t){return this._push(uc,4,t>>>0)}sfixed32(t){return this.fixed32(t)}fixed64(t){const r=nt.fromBigInt(t);return this._push(uc,4,r.lo)._push(uc,4,r.hi)}fixed64Number(t){const r=nt.fromNumber(t);return this._push(uc,4,r.lo)._push(uc,4,r.hi)}fixed64String(t){return this.fixed64(BigInt(t))}sfixed64(t){return this.fixed64(t)}sfixed64Number(t){return this.fixed64Number(t)}sfixed64String(t){return this.fixed64String(t)}float(t){return this._push($2,4,t)}double(t){return this._push(H2,8,t)}bytes(t){const r=t.length>>>0;return r===0?this._push(Dd,1,0):this.uint32(r)._push(oM,r,t)}string(t){const r=Y2(t);return r!==0?this.uint32(r)._push(lP,r,t):this._push(Dd,1,0)}fork(){return this.states=new eM(this),this.head=this.tail=new cc(Md,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new cc(Md,0,0),this.len=0),this}ldelim(){const t=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=t.next,this.tail=r,this.len+=n),this}finish(){let t=this.head.next;const r=rM(this.len);let n=0;for(;t!=null;)t.fn(t.val,r,n),n+=t.len,t=t.next;return r}}function Dd(e,t,r){t[r]=e&255}function nM(e,t,r){for(;e>127;)t[r++]=e&127|128,e>>>=7;t[r]=e}class iM extends cc{next;constructor(t,r){super(nM,t,r),this.next=void 0}}function dl(e,t,r){for(;e.hi!==0;)t[r++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=e.lo&127|128,e.lo=e.lo>>>7;t[r++]=e.lo}function uc(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function oM(e,t,r){t.set(e,r)}globalThis.Buffer!=null&&(oh.prototype.bytes=function(e){const t=e.length>>>0;return this.uint32(t),t>0&&this._push(aM,t,e),this},oh.prototype.string=function(e){const t=globalThis.Buffer.byteLength(e);return this.uint32(t),t>0&&this._push(uM,t,e),this});function aM(e,t,r){t.set(e,r)}function uM(e,t,r){e.length<40?lP(e,t,r):t.utf8Write!=null?t.utf8Write(e,r):t.set(Ce(e),r)}function sM(){return new oh}function dP(e,t){const r=sM();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}var Bl;(function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"})(Bl||(Bl={}));function hP(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function cM(e){function t(i){if(e[i.toString()]==null)throw new Error("Invalid enum value");return e[i]}const r=function(o,a){const u=t(o);a.int32(u)},n=function(o){const a=o.int32();return t(a)};return hP("enum",Bl.VARINT,r,n)}function vP(e,t){return hP("message",Bl.LENGTH_DELIMITED,e,t)}var Ie;(function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.secp256k1="secp256k1",e.ECDSA="ECDSA"})(Ie||(Ie={}));var ah;(function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.secp256k1=2]="secp256k1",e[e.ECDSA=3]="ECDSA"})(ah||(ah={}));(function(e){e.codec=()=>cM(ah)})(Ie||(Ie={}));var oi;(function(e){let t;e.codec=()=>(t==null&&(t=vP((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),Ie.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const o={},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const u=r.uint32();switch(u>>>3){case 1:{o.Type=Ie.codec().decode(r);break}case 2:{o.Data=r.bytes();break}default:{r.skipType(u&7);break}}}return o})),t),e.encode=r=>dP(r,e.codec()),e.decode=(r,n)=>fP(r,e.codec(),n)})(oi||(oi={}));var ql;(function(e){let t;e.codec=()=>(t==null&&(t=vP((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),Ie.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const o={},a=n==null?r.len:r.pos+n;for(;r.pos<a;){const u=r.uint32();switch(u>>>3){case 1:{o.Type=Ie.codec().decode(r);break}case 2:{o.Data=r.bytes();break}default:{r.skipType(u&7);break}}}return o})),t),e.encode=r=>dP(r,e.codec()),e.decode=(r,n)=>fP(r,e.codec(),n)})(ql||(ql={}));class Sv{type="RSA";jwk;_raw;_multihash;constructor(t,r){this.jwk=t,this._multihash=r}get raw(){return this._raw==null&&(this._raw=Tv(this.jwk)),this._raw}toMultihash(){return this._multihash}toCID(){return se.createV1(114,this._multihash)}toString(){return ui.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:Mt(this.raw,t.raw)}verify(t,r,n){return EM(this.jwk,r,t,n)}}class pP{type="RSA";jwk;_raw;publicKey;constructor(t,r){this.jwk=t,this.publicKey=r}get raw(){return this._raw==null&&(this._raw=hM(this.jwk)),this._raw}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:Mt(this.raw,t.raw)}sign(t,r){return OM(this.jwk,t,r)}}const _P=8192,Pv=18,lM=1062,fM=Uint8Array.from([48,13,6,9,42,134,72,134,247,13,1,1,1,5,0]);function dM(e){return{n:de(e[1],"base64url"),e:de(e[2],"base64url"),d:de(e[3],"base64url"),p:de(e[4],"base64url"),q:de(e[5],"base64url"),dp:de(e[6],"base64url"),dq:de(e[7],"base64url"),qi:de(e[8],"base64url"),kty:"RSA"}}function hM(e){if(e.n==null||e.e==null||e.d==null||e.p==null||e.q==null||e.dp==null||e.dq==null||e.qi==null)throw new vt("JWK was missing components");return ln([Pt(Uint8Array.from([0])),Pt(Ce(e.n,"base64url")),Pt(Ce(e.e,"base64url")),Pt(Ce(e.d,"base64url")),Pt(Ce(e.p,"base64url")),Pt(Ce(e.q,"base64url")),Pt(Ce(e.dp,"base64url")),Pt(Ce(e.dq,"base64url")),Pt(Ce(e.qi,"base64url"))]).subarray()}function vM(e){const t=go(e[1],{offset:0});return{kty:"RSA",n:de(t[0],"base64url"),e:de(t[1],"base64url")}}function Tv(e){if(e.n==null||e.e==null)throw new vt("JWK was missing components");return ln([fM,pv(ln([Pt(Ce(e.n,"base64url")),Pt(Ce(e.e,"base64url"))]))]).subarray()}function pM(e){const t=go(e);return bP(t)}function bP(e){const t=dM(e);return yM(t)}function _M(e,t){if(e.byteLength>=lM)throw new CS("Key size is too large");const r=go(e,{offset:0});return bM(r,e,t)}function bM(e,t,r){const n=vM(e);if(r==null){const i=df(oi.encode({Type:Ie.RSA,Data:t}));r=Oc(Pv,i)}return new Sv(n,r)}function yM(e){if(PM(e)>_P)throw new vt("Key size is too large");const t=gM(e),r=df(oi.encode({Type:Ie.RSA,Data:Tv(t.publicKey)})),n=Oc(Pv,r);return new pP(t.privateKey,new Sv(t.publicKey,n))}async function mM(e){if(e>_P)throw new vt("Key size is too large");const t=await wM(e),r=df(oi.encode({Type:Ie.RSA,Data:Tv(t.publicKey)})),n=Oc(Pv,r);return new pP(t.privateKey,new Sv(t.publicKey,n))}function gM(e){if(e==null)throw new vt("Missing key parameter");return{privateKey:e,publicKey:{kty:e.kty,n:e.n,e:e.e}}}async function wM(e,t){const r=await Dt.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),n=await SM(r);return{privateKey:n[0],publicKey:n[1]}}async function OM(e,t,r){const n=await Dt.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]);r?.signal?.throwIfAborted();const i=await Dt.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},n,t instanceof Uint8Array?t:t.subarray());return r?.signal?.throwIfAborted(),new Uint8Array(i,0,i.byteLength)}async function EM(e,t,r,n){const i=await Dt.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);n?.signal?.throwIfAborted();const o=await Dt.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},i,t,r instanceof Uint8Array?r:r.subarray());return n?.signal?.throwIfAborted(),o}async function SM(e,t){if(e.privateKey==null||e.publicKey==null)throw new vt("Private and public key are required");return await Promise.all([Dt.get().subtle.exportKey("jwk",e.privateKey),Dt.get().subtle.exportKey("jwk",e.publicKey)])}function PM(e){if(e.kty!=="RSA")throw new vt("invalid key type");if(e.n==null)throw new vt("invalid key modulus");return Ce(e.n,"base64url").length*8}class yP{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(t,r){if(LS(t),be(r,void 0,"key"),this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?t.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Xo(i)}update(t){return kl(this),this.iHash.update(t),this}digestInto(t){kl(this),be(t,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||=Object.create(Object.getPrototypeOf(this),{});const{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:a,outputLen:u}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=a,t.outputLen=u,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const mP=(e,t,r)=>new yP(e,t).update(r).digest();mP.create=(e,t)=>new yP(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cw=(e,t)=>(e+(e>=0?t:-t)/gP)/t;function TM(e,t,r){const[[n,i],[o,a]]=t,u=cw(a*e,r),s=cw(-i*e,r);let l=e-u*n-s*o,d=-u*i-s*a;const c=l<cn,p=d<cn;c&&(l=-l),p&&(d=-d);const b=mv(Math.ceil(o2(r)/2))+Go;if(l<cn||l>=b||d<cn||d>=b)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:c,k1:l,k2neg:p,k2:d}}function uh(e){if(!["compact","recovered","der"].includes(e))throw new Error('Signature format must be "compact", "recovered", or "der"');return e}function Ld(e,t){const r={};for(let n of Object.keys(t))r[n]=e[n]===void 0?t[n]:e[n];return vo(r.lowS,"lowS"),vo(r.prehash,"prehash"),r.format!==void 0&&uh(r.format),r}class CM extends Error{constructor(t=""){super(t)}}const ti={Err:CM,_tlv:{encode:(e,t)=>{const{Err:r}=ti;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length&1)throw new r("tlv.encode: unpadded data");const n=t.length/2,i=ll(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const o=n>127?ll(i.length/2|128):"";return ll(e)+o+i+t},decode(e,t){const{Err:r}=ti;let n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");const i=t[n++],o=!!(i&128);let a=0;if(!o)a=i;else{const s=i&127;if(!s)throw new r("tlv.decode(long): indefinite length not supported");if(s>4)throw new r("tlv.decode(long): byte length is too big");const l=t.subarray(n,n+s);if(l.length!==s)throw new r("tlv.decode: length bytes not complete");if(l[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const d of l)a=a<<8|d;if(n+=s,a<128)throw new r("tlv.decode(long): not minimal encoding")}const u=t.subarray(n,n+a);if(u.length!==a)throw new r("tlv.decode: wrong value length");return{v:u,l:t.subarray(n+a)}}},_int:{encode(e){const{Err:t}=ti;if(e<cn)throw new t("integer: negative integers are not allowed");let r=ll(e);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){const{Err:t}=ti;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return hf(e)}},toSig(e){const{Err:t,_int:r,_tlv:n}=ti,i=be(e,void 0,"signature"),{v:o,l:a}=n.decode(48,i);if(a.length)throw new t("invalid signature: left bytes after parsing");const{v:u,l:s}=n.decode(2,o),{v:l,l:d}=n.decode(2,s);if(d.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(u),s:r.decode(l)}},hexFromSig(e){const{_tlv:t,_int:r}=ti,n=t.encode(2,r.encode(e.r)),i=t.encode(2,r.encode(e.s)),o=n+i;return t.encode(48,o)}},cn=BigInt(0),Go=BigInt(1),gP=BigInt(2),hl=BigInt(3),RM=BigInt(4);function AM(e,t={}){const r=iP("weierstrass",e,t),{Fp:n,Fn:i}=r;let o=r.CURVE;const{h:a,n:u}=o;Vc(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object"});const{endo:s}=t;if(s&&(!n.is0(o.a)||typeof s.beta!="bigint"||!Array.isArray(s.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const l=OP(n,i);function d(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(R,A,D){const{x:j,y:U}=A.toAffine(),B=n.toBytes(j);if(vo(D,"isCompressed"),D){d();const q=!n.isOdd(U);return Rr(wP(q),B)}else return Rr(Uint8Array.of(4),B,n.toBytes(U))}function p(R){be(R,void 0,"Point");const{publicKey:A,publicKeyUncompressed:D}=l,j=R.length,U=R[0],B=R.subarray(1);if(j===A&&(U===2||U===3)){const q=n.fromBytes(B);if(!n.isValid(q))throw new Error("bad point: is not on curve, wrong x");const T=_(q);let k;try{k=n.sqrt(T)}catch(z){const F=z instanceof Error?": "+z.message:"";throw new Error("bad point: is not on curve, sqrt error"+F)}d();const M=n.isOdd(k);return(U&1)===1!==M&&(k=n.neg(k)),{x:q,y:k}}else if(j===D&&U===4){const q=n.BYTES,T=n.fromBytes(B.subarray(0,q)),k=n.fromBytes(B.subarray(q,q*2));if(!f(T,k))throw new Error("bad point: is not on curve");return{x:T,y:k}}else throw new Error(`bad point: got length ${j}, expected compressed=${A} or uncompressed=${D}`)}const b=t.toBytes||c,m=t.fromBytes||p;function _(R){const A=n.sqr(R),D=n.mul(A,R);return n.add(n.add(D,n.mul(R,o.a)),o.b)}function f(R,A){const D=n.sqr(A),j=_(R);return n.eql(D,j)}if(!f(o.Gx,o.Gy))throw new Error("bad curve params: generator point");const y=n.mul(n.pow(o.a,hl),RM),g=n.mul(n.sqr(o.b),BigInt(27));if(n.is0(n.add(y,g)))throw new Error("bad curve params: a or b");function h(R,A,D=!1){if(!n.isValid(A)||D&&n.is0(A))throw new Error(`bad point coordinate ${R}`);return A}function v(R){if(!(R instanceof P))throw new Error("Weierstrass Point expected")}function w(R){if(!s||!s.basises)throw new Error("no endo");return TM(R,s.basises,i.ORDER)}const E=Ml((R,A)=>{const{X:D,Y:j,Z:U}=R;if(n.eql(U,n.ONE))return{x:D,y:j};const B=R.is0();A==null&&(A=B?n.ONE:n.inv(U));const q=n.mul(D,A),T=n.mul(j,A),k=n.mul(U,A);if(B)return{x:n.ZERO,y:n.ZERO};if(!n.eql(k,n.ONE))throw new Error("invZ was invalid");return{x:q,y:T}}),O=Ml(R=>{if(R.is0()){if(t.allowInfinityPoint&&!n.is0(R.Y))return;throw new Error("bad point: ZERO")}const{x:A,y:D}=R.toAffine();if(!n.isValid(A)||!n.isValid(D))throw new Error("bad point: x or y not field elements");if(!f(A,D))throw new Error("bad point: equation left != right");if(!R.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function S(R,A,D,j,U){return D=new P(n.mul(D.X,R),D.Y,D.Z),A=Dl(j,A),D=Dl(U,D),A.add(D)}class P{static BASE=new P(o.Gx,o.Gy,n.ONE);static ZERO=new P(n.ZERO,n.ONE,n.ZERO);static Fp=n;static Fn=i;X;Y;Z;constructor(A,D,j){this.X=h("x",A),this.Y=h("y",D,!0),this.Z=h("z",j),Object.freeze(this)}static CURVE(){return o}static fromAffine(A){const{x:D,y:j}=A||{};if(!A||!n.isValid(D)||!n.isValid(j))throw new Error("invalid affine point");if(A instanceof P)throw new Error("projective point not allowed");return n.is0(D)&&n.is0(j)?P.ZERO:new P(D,j,n.ONE)}static fromBytes(A){const D=P.fromAffine(m(be(A,void 0,"point")));return D.assertValidity(),D}static fromHex(A){return P.fromBytes(bc(A))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(A=8,D=!0){return C.createCache(this,A),D||this.multiply(hl),this}assertValidity(){O(this)}hasEvenY(){const{y:A}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(A)}equals(A){v(A);const{X:D,Y:j,Z:U}=this,{X:B,Y:q,Z:T}=A,k=n.eql(n.mul(D,T),n.mul(B,U)),M=n.eql(n.mul(j,T),n.mul(q,U));return k&&M}negate(){return new P(this.X,n.neg(this.Y),this.Z)}double(){const{a:A,b:D}=o,j=n.mul(D,hl),{X:U,Y:B,Z:q}=this;let T=n.ZERO,k=n.ZERO,M=n.ZERO,V=n.mul(U,U),z=n.mul(B,B),F=n.mul(q,q),W=n.mul(U,B);return W=n.add(W,W),M=n.mul(U,q),M=n.add(M,M),T=n.mul(A,M),k=n.mul(j,F),k=n.add(T,k),T=n.sub(z,k),k=n.add(z,k),k=n.mul(T,k),T=n.mul(W,T),M=n.mul(j,M),F=n.mul(A,F),W=n.sub(V,F),W=n.mul(A,W),W=n.add(W,M),M=n.add(V,V),V=n.add(M,V),V=n.add(V,F),V=n.mul(V,W),k=n.add(k,V),F=n.mul(B,q),F=n.add(F,F),V=n.mul(F,W),T=n.sub(T,V),M=n.mul(F,z),M=n.add(M,M),M=n.add(M,M),new P(T,k,M)}add(A){v(A);const{X:D,Y:j,Z:U}=this,{X:B,Y:q,Z:T}=A;let k=n.ZERO,M=n.ZERO,V=n.ZERO;const z=o.a,F=n.mul(o.b,hl);let W=n.mul(D,B),Y=n.mul(j,q),K=n.mul(U,T),N=n.add(D,j),x=n.add(B,q);N=n.mul(N,x),x=n.add(W,Y),N=n.sub(N,x),x=n.add(D,U);let L=n.add(B,T);return x=n.mul(x,L),L=n.add(W,K),x=n.sub(x,L),L=n.add(j,U),k=n.add(q,T),L=n.mul(L,k),k=n.add(Y,K),L=n.sub(L,k),V=n.mul(z,x),k=n.mul(F,K),V=n.add(k,V),k=n.sub(Y,V),V=n.add(Y,V),M=n.mul(k,V),Y=n.add(W,W),Y=n.add(Y,W),K=n.mul(z,K),x=n.mul(F,x),Y=n.add(Y,K),K=n.sub(W,K),K=n.mul(z,K),x=n.add(x,K),W=n.mul(Y,x),M=n.add(M,W),W=n.mul(L,x),k=n.mul(N,k),k=n.sub(k,W),W=n.mul(N,Y),V=n.mul(L,V),V=n.add(V,W),new P(k,M,V)}subtract(A){return this.add(A.negate())}is0(){return this.equals(P.ZERO)}multiply(A){const{endo:D}=t;if(!i.isValidNot0(A))throw new Error("invalid scalar: out of range");let j,U;const B=q=>C.cached(this,q,T=>vc(P,T));if(D){const{k1neg:q,k1:T,k2neg:k,k2:M}=w(A),{p:V,f:z}=B(T),{p:F,f:W}=B(M);U=z.add(W),j=S(D.beta,V,F,q,k)}else{const{p:q,f:T}=B(A);j=q,U=T}return vc(P,[j,U])[0]}multiplyUnsafe(A){const{endo:D}=t,j=this;if(!i.isValid(A))throw new Error("invalid scalar: out of range");if(A===cn||j.is0())return P.ZERO;if(A===Go)return j;if(C.hasCache(this))return this.multiply(A);if(D){const{k1neg:U,k1:B,k2neg:q,k2:T}=w(A),{p1:k,p2:M}=m2(P,j,B,T);return S(D.beta,k,M,U,q)}else return C.unsafe(j,A)}toAffine(A){return E(this,A)}isTorsionFree(){const{isTorsionFree:A}=t;return a===Go?!0:A?A(P,this):C.unsafe(this,u).is0()}clearCofactor(){const{clearCofactor:A}=t;return a===Go?this:A?A(P,this):this.multiplyUnsafe(a)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}toBytes(A=!0){return vo(A,"isCompressed"),this.assertValidity(),b(P,this,A)}toHex(A=!0){return Fc(this.toBytes(A))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}const I=i.BITS,C=new nP(P,t.endo?Math.ceil(I/2):I);return P.BASE.precompute(8),P}function wP(e){return Uint8Array.of(e?2:3)}function OP(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function IM(e,t={}){const{Fn:r}=e,n=t.randomBytes||_v,i=Object.assign(OP(e.Fp,r),{seed:eP(r.ORDER)});function o(b){try{const m=r.fromBytes(b);return r.isValidNot0(m)}catch{return!1}}function a(b,m){const{publicKey:_,publicKeyUncompressed:f}=i;try{const y=b.length;return m===!0&&y!==_||m===!1&&y!==f?!1:!!e.fromBytes(b)}catch{return!1}}function u(b=n(i.seed)){return y2(be(b,i.seed,"seed"),r.ORDER)}function s(b,m=!0){return e.BASE.multiply(r.fromBytes(b)).toBytes(m)}function l(b){const{secretKey:m,publicKey:_,publicKeyUncompressed:f}=i;if(!ff(b)||"_lengths"in r&&r._lengths||m===_)return;const y=be(b,void 0,"key").length;return y===_||y===f}function d(b,m,_=!0){if(l(b)===!0)throw new Error("first arg must be private key");if(l(m)===!1)throw new Error("second arg must be public key");const f=r.fromBytes(b);return e.fromBytes(m).multiply(f).toBytes(_)}const c={isValidSecretKey:o,isValidPublicKey:a,randomSecretKey:u},p=oP(u,s);return Object.freeze({getPublicKey:s,getSharedSecret:d,keygen:p,Point:e,utils:c,lengths:i})}function jM(e,t,r={}){LS(t),Vc(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"}),r=Object.assign({},r);const n=r.randomBytes||_v,i=r.hmac||((D,j)=>mP(t,D,j)),{Fp:o,Fn:a}=e,{ORDER:u,BITS:s}=a,{keygen:l,getPublicKey:d,getSharedSecret:c,utils:p,lengths:b}=IM(e,r),m={prehash:!0,lowS:typeof r.lowS=="boolean"?r.lowS:!0,format:"compact",extraEntropy:!1},_=u*gP<o.ORDER;function f(D){const j=u>>Go;return D>j}function y(D,j){if(!a.isValidNot0(j))throw new Error(`invalid signature ${D}: out of range 1..Point.Fn.ORDER`);return j}function g(){if(_)throw new Error('"recovered" sig type is not supported for cofactor >2 curves')}function h(D,j){uh(j);const U=b.signature,B=j==="compact"?U:j==="recovered"?U+1:void 0;return be(D,B)}class v{r;s;recovery;constructor(j,U,B){if(this.r=y("r",j),this.s=y("s",U),B!=null){if(g(),![0,1,2,3].includes(B))throw new Error("invalid recovery id");this.recovery=B}Object.freeze(this)}static fromBytes(j,U=m.format){h(j,U);let B;if(U==="der"){const{r:M,s:V}=ti.toSig(be(j));return new v(M,V)}U==="recovered"&&(B=j[0],U="compact",j=j.subarray(1));const q=b.signature/2,T=j.subarray(0,q),k=j.subarray(q,q*2);return new v(a.fromBytes(T),a.fromBytes(k),B)}static fromHex(j,U){return this.fromBytes(bc(j),U)}assertRecovery(){const{recovery:j}=this;if(j==null)throw new Error("invalid recovery id: must be present");return j}addRecoveryBit(j){return new v(this.r,this.s,j)}recoverPublicKey(j){const{r:U,s:B}=this,q=this.assertRecovery(),T=q===2||q===3?U+u:U;if(!o.isValid(T))throw new Error("invalid recovery id: sig.r+curve.n != R.x");const k=o.toBytes(T),M=e.fromBytes(Rr(wP((q&1)===0),k)),V=a.inv(T),z=E(be(j,void 0,"msgHash")),F=a.create(-z*V),W=a.create(B*V),Y=e.BASE.multiplyUnsafe(F).add(M.multiplyUnsafe(W));if(Y.is0())throw new Error("invalid recovery: point at infinify");return Y.assertValidity(),Y}hasHighS(){return f(this.s)}toBytes(j=m.format){if(uh(j),j==="der")return bc(ti.hexFromSig(this));const{r:U,s:B}=this,q=a.toBytes(U),T=a.toBytes(B);return j==="recovered"?(g(),Rr(Uint8Array.of(this.assertRecovery()),q,T)):Rr(q,T)}toHex(j){return Fc(this.toBytes(j))}}const w=r.bits2int||function(j){if(j.length>8192)throw new Error("input is too large");const U=hf(j),B=j.length*8-s;return B>0?U>>BigInt(B):U},E=r.bits2int_modN||function(j){return a.create(w(j))},O=mv(s);function S(D){return rh("num < 2^"+s,D,cn,O),a.toBytes(D)}function P(D,j){return be(D,void 0,"message"),j?be(t(D),void 0,"prehashed message"):D}function I(D,j,U){const{lowS:B,prehash:q,extraEntropy:T}=Ld(U,m);D=P(D,q);const k=E(D),M=a.fromBytes(j);if(!a.isValidNot0(M))throw new Error("invalid private key");const V=[S(M),S(k)];if(T!=null&&T!==!1){const Y=T===!0?n(b.secretKey):T;V.push(be(Y,void 0,"extraEntropy"))}const z=Rr(...V),F=k;function W(Y){const K=w(Y);if(!a.isValidNot0(K))return;const N=a.inv(K),x=e.BASE.multiply(K).toAffine(),L=a.create(x.x);if(L===cn)return;const $=a.create(N*a.create(F+L*M));if($===cn)return;let H=(x.x===L?0:2)|Number(x.y&Go),G=$;return B&&f($)&&(G=a.neg($),H^=1),new v(L,G,_?void 0:H)}return{seed:z,k2sig:W}}function C(D,j,U={}){const{seed:B,k2sig:q}=I(D,j,U);return a2(t.outputLen,a.BYTES,i)(B,q).toBytes(U.format)}function R(D,j,U,B={}){const{lowS:q,prehash:T,format:k}=Ld(B,m);if(U=be(U,void 0,"publicKey"),j=P(j,T),!ff(D)){const M=D instanceof v?", use sig.toBytes()":"";throw new Error("verify expects Uint8Array signature"+M)}h(D,k);try{const M=v.fromBytes(D,k),V=e.fromBytes(U);if(q&&M.hasHighS())return!1;const{r:z,s:F}=M,W=E(j),Y=a.inv(F),K=a.create(W*Y),N=a.create(z*Y),x=e.BASE.multiplyUnsafe(K).add(V.multiplyUnsafe(N));return x.is0()?!1:a.create(x.x)===z}catch{return!1}}function A(D,j,U={}){const{prehash:B}=Ld(U,m);return j=P(j,B),v.fromBytes(D,"recovered").recoverPublicKey(j).toBytes()}return Object.freeze({keygen:l,getPublicKey:d,getSharedSecret:c,utils:p,lengths:b,Point:e,sign:C,verify:R,recoverPublicKey:A,Signature:v,hash:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Cv={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},NM={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},lw=BigInt(2);function kM(e){const t=Cv.p,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),a=BigInt(23),u=BigInt(44),s=BigInt(88),l=e*e*e%t,d=l*l*e%t,c=Me(d,r,t)*d%t,p=Me(c,r,t)*d%t,b=Me(p,lw,t)*l%t,m=Me(b,i,t)*b%t,_=Me(m,o,t)*m%t,f=Me(_,u,t)*_%t,y=Me(f,s,t)*f%t,g=Me(y,u,t)*_%t,h=Me(g,r,t)*d%t,v=Me(h,a,t)*m%t,w=Me(v,n,t)*l%t,E=Me(w,lw,t);if(!sh.eql(sh.sqr(E),e))throw new Error("Cannot find square root");return E}const sh=vf(Cv.p,{sqrt:kM}),MM=AM(Cv,{Fp:sh,endo:NM}),dn=jM(MM,df),DM=32;function LM(e,t,r){const n=ef.digest(t instanceof Uint8Array?t:t.subarray());if(pf(n))return n.then(({digest:i})=>(r?.signal?.throwIfAborted(),dn.sign(i,e,{prehash:!1,format:"der"}))).catch(i=>{throw i.name==="AbortError"?i:new aw(String(i))});try{return dn.sign(n.digest,e,{prehash:!1,format:"der"})}catch(i){throw new aw(String(i))}}function UM(e,t,r,n){const i=ef.digest(r instanceof Uint8Array?r:r.subarray());if(pf(i))return i.then(({digest:o})=>(n?.signal?.throwIfAborted(),dn.verify(t,o,e,{prehash:!1,format:"der"}))).catch(o=>{throw o.name==="AbortError"?o:new uw(String(o))});try{return n?.signal?.throwIfAborted(),dn.verify(t,i.digest,e,{prehash:!1,format:"der"})}catch(o){throw new uw(String(o))}}class EP{type="secp256k1";raw;_key;constructor(t){this._key=FM(t),this.raw=qM(this._key)}toMultihash(){return ni.digest(Rv(this))}toCID(){return se.createV1(114,this.toMultihash())}toString(){return ui.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:Mt(this.raw,t.raw)}verify(t,r,n){return UM(this._key,r,t,n)}}class SP{type="secp256k1";raw;publicKey;constructor(t,r){this.raw=xM(t),this.publicKey=new EP(r??VM(t))}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:Mt(this.raw,t.raw)}sign(t,r){return LM(this.raw,t,r)}}function PP(e){return new SP(e)}function TP(e){return new EP(e)}async function BM(){const e=$M();return new SP(e)}function qM(e){return dn.Point.fromBytes(e).toBytes()}function xM(e){try{return dn.getPublicKey(e,!0),e}catch(t){throw new RS(String(t))}}function FM(e){try{return dn.Point.fromBytes(e),e}catch(t){throw new CS(String(t))}}function VM(e){try{return dn.getPublicKey(e,!0)}catch(t){throw new RS(String(t))}}function $M(){return dn.utils.randomSecretKey()}async function Aq(e,t){if(e==="Ed25519")return V2();if(e==="secp256k1")return BM();if(e==="RSA")return mM(zM(t));if(e==="ECDSA")return Dk(KM(t));throw new cf}function WM(e,t){const{Type:r,Data:n}=oi.decode(e),i=n??new Uint8Array;switch(r){case Ie.RSA:return _M(i,t);case Ie.Ed25519:return cP(i);case Ie.secp256k1:return TP(i);case Ie.ECDSA:return MS(i);default:throw new cf}}function HM(e){const{Type:t,Data:r}=oi.decode(e.digest),n=r??new Uint8Array;switch(t){case Ie.Ed25519:return cP(n);case Ie.secp256k1:return TP(n);case Ie.ECDSA:return MS(n);default:throw new cf}}function Rv(e){return oi.encode({Type:Ie[e.type],Data:e.raw})}function Iq(e){const t=ql.decode(e),r=t.Data??new Uint8Array;switch(t.Type){case Ie.RSA:return pM(r);case Ie.Ed25519:return sP(r);case Ie.secp256k1:return PP(r);case Ie.ECDSA:return jk(r);default:throw new cf}}function jq(e){if(e.byteLength===Pr)return sP(e);if(e.byteLength===DM)return PP(e);const t=go(e),r=t[2]?.[0];if(r===Ok||r===Ek||r===Sk)return kS(t);if(t.length>8)return bP(t);throw new vt("Could not extract private key from raw bytes")}function Nq(e){return ql.encode({Type:Ie[e.type],Data:e.raw})}function zM(e){return e==null?2048:parseInt(e,10)}function KM(e){if(e==="P-256"||e==null)return"P-256";if(e==="P-384")return"P-384";if(e==="P-521")return"P-521";throw new vt("Unsupported curve, should be P-256, P-384 or P-521")}async function kq(e){if(e.type==="RSA")return{privateKey:await crypto.subtle.importKey("jwk",e.jwk,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),publicKey:await crypto.subtle.importKey("jwk",e.publicKey.jwk,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])};if(e.type==="ECDSA")return{privateKey:await crypto.subtle.importKey("jwk",e.jwk,{name:"ECDSA",namedCurve:e.jwk.crv??"P-256"},!0,["sign"]),publicKey:await crypto.subtle.importKey("jwk",e.publicKey.jwk,{name:"ECDSA",namedCurve:e.publicKey.jwk.crv??"P-256"},!0,["verify"])};throw new vt("Only RSA and ECDSA keys are supported")}const CP=Symbol.for("nodejs.util.inspect.custom"),GM=114;class Av{type;multihash;publicKey;string;constructor(t){this.type=t.type,this.multihash=t.multihash,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}[hv]=!0;toString(){return this.string==null&&(this.string=ui.encode(this.multihash.bytes).slice(1)),this.string}toMultihash(){return this.multihash}toCID(){return se.createV1(GM,this.multihash)}toJSON(){return this.toString()}equals(t){if(t==null)return!1;if(t instanceof Uint8Array)return Mt(this.multihash.bytes,t);if(typeof t=="string")return this.toString()===t;if(t?.toMultihash()?.bytes!=null)return Mt(this.multihash.bytes,t.toMultihash().bytes);throw new Error("not valid Id")}[CP](){return`PeerId(${this.toString()})`}}class RP extends Av{type="RSA";publicKey;constructor(t){super({...t,type:"RSA"}),this.publicKey=t.publicKey}}class AP extends Av{type="Ed25519";publicKey;constructor(t){super({...t,type:"Ed25519"}),this.publicKey=t.publicKey}}class IP extends Av{type="secp256k1";publicKey;constructor(t){super({...t,type:"secp256k1"}),this.publicKey=t.publicKey}}const YM=2336;class jP{type="url";multihash;publicKey;url;constructor(t){this.url=t.toString(),this.multihash=ni.digest(Ce(this.url))}[CP](){return`PeerId(${this.url})`}[hv]=!0;toString(){return this.toCID().toString()}toMultihash(){return this.multihash}toCID(){return se.createV1(YM,this.toMultihash())}toJSON(){return this.toString()}equals(t){return t==null?!1:(t instanceof Uint8Array&&(t=de(t)),t.toString()===this.toString())}}const ZM=114,fw=2336;function Tt(e,t){let r;if(e.charAt(0)==="1"||e.charAt(0)==="Q")r=bC(ui.decode(`z${e}`));else{if(e.startsWith("k51qzi5uqu5")||e.startsWith("kzwfwjn5ji4")||e.startsWith("k2k4r8")||e.startsWith("bafz"))return QM(se.parse(e));throw new so('Please pass a multibase decoder for strings that do not start with "1" or "Q"')}return NP(r)}function XM(e){if(e.type==="Ed25519")return new AP({multihash:e.toCID().multihash,publicKey:e});if(e.type==="secp256k1")return new IP({multihash:e.toCID().multihash,publicKey:e});if(e.type==="RSA")return new RP({multihash:e.toCID().multihash,publicKey:e});throw new nk}function Mq(e){return XM(e.publicKey)}function NP(e){if(eD(e))return new RP({multihash:e});if(JM(e))try{const t=HM(e);if(t.type==="Ed25519")return new AP({multihash:e,publicKey:t});if(t.type==="secp256k1")return new IP({multihash:e,publicKey:t})}catch{const r=de(e.digest);return new jP(new URL(r))}throw new rk("Supplied PeerID Multihash is invalid")}function QM(e){if(e?.multihash==null||e.version==null||e.version===1&&e.code!==ZM&&e.code!==fw)throw new tk("Supplied PeerID CID is invalid");if(e.code===fw){const t=de(e.multihash.digest);return new jP(new URL(t))}return NP(e.multihash)}function JM(e){return e.code===ni.code}function eD(e){return e.code===ef.code}function kP(e){return async function(r={}){const n=await e.post("bitswap/stat",{searchParams:X(r),signal:r.signal,headers:r.headers});return tD(await n.json())}}function tD(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist??[]).map(t=>se.parse(t["/"])),peers:(e.Peers??[]).map(t=>Tt(t)),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}function rD(e){return async function(r,n={}){return((await(await e.post("bitswap/wantlist",{signal:n.signal,searchParams:X({...n,peer:r.toString()}),headers:n.headers})).json()).Keys??[]).map(o=>se.parse(o["/"]))}}function nD(e){return async function(r={}){return((await(await e.post("bitswap/wantlist",{signal:r.signal,searchParams:X(r),headers:r.headers})).json()).Keys??[]).map(i=>se.parse(i["/"]))}}function iD(e){return{wantlist:nD(e),wantlistForPeer:rD(e),stat:kP(e)}}function MP(e){return async function(r,n={}){const i=await e.post("block/get",{signal:n.signal,searchParams:X({arg:r.toString(),...n}),headers:n.headers});return new Uint8Array(await i.arrayBuffer())}}function oD(e){return async function t(r,n={}){const i=new AbortController,o=vn([i.signal,n.signal]);let a;try{a=await(await e.post("block/put",{signal:o,searchParams:X(n),...await bi([r],i,n.headers)})).json()}catch(u){if(n.format==="dag-pb")return await t(r,{...n,format:"protobuf"});if(n.format==="dag-cbor")return await t(r,{...n,format:"cbor"});throw u}finally{o.clear()}return se.parse(a.Key)}}function aD(e){return async function*(r,n={}){Array.isArray(r)||(r=[r]);const i=await e.post("block/rm",{signal:n.signal,searchParams:X({arg:r.map(o=>o.toString()),"stream-channels":!0,...n}),headers:n.headers});for await(const o of i.ndjson())yield uD(o)}}function uD(e){const t={cid:se.parse(e.Hash)};return e.Error!=null&&(t.error=new Error(e.Error)),t}function sD(e){return async function(r,n={}){const o=await(await e.post("block/stat",{signal:n.signal,searchParams:X({arg:r.toString(),...n}),headers:n.headers})).json();return{cid:se.parse(o.Key),size:o.Size}}}function cD(e){return{get:MP(e),put:oD(e),rm:aD(e),stat:sD(e)}}function lD(e){return async function(r,n={}){const i=await e.post("bootstrap/add",{signal:n.signal,searchParams:X({arg:r,...n}),headers:n.headers}),{Peers:o}=await i.json();return{Peers:o.map(a=>wt(a))}}}function fD(e){return async function(r={}){const n=await e.post("bootstrap/list",{signal:r.signal,searchParams:X(r),headers:r.headers}),{Peers:i}=await n.json();return{Peers:i.map(o=>wt(o))}}}function dD(e){return async function(r,n={}){const i=await e.post("bootstrap/rm",{signal:n.signal,searchParams:X({arg:r,...n}),headers:n.headers}),{Peers:o}=await i.json();return{Peers:o.map(a=>wt(a))}}}function hD(e){return{add:lD(e),list:fD(e),rm:dD(e)}}function vD(e){return async function*(r,n={}){yield*(await e.post("cat",{signal:n.signal,searchParams:X({arg:r.toString(),...n}),headers:n.headers})).iterator()}}function pD(e){return async function(r={}){return(await e.post("commands",{signal:r.signal,searchParams:X(r),headers:r.headers})).json()}}function _D(e){return async function(r={}){return await(await e.post("config/show",{signal:r.signal,searchParams:X({...r}),headers:r.headers})).json()}}function bD(e){return async function(r,n={}){if(r==null)throw new Error("key argument is required");return(await(await e.post("config",{signal:n.signal,searchParams:X({arg:r,...n}),headers:n.headers})).json()).Value}}function yD(e){return async function(r,n={}){const o=await(await e.post("config/profile/apply",{signal:n.signal,searchParams:X({arg:r,...n}),headers:n.headers})).json();return{original:o.OldCfg,updated:o.NewCfg}}}function mD(e){return{apply:yD(e)}}function gD(e){return async function(r,n={}){const i=new AbortController,o=vn([i.signal,n.signal]);try{await(await e.post("config/replace",{signal:o,searchParams:X(n),...await bi([Ce(JSON.stringify(r))],i,n.headers)})).text()}finally{o.clear()}}}function wD(e){return async function(r,n,i={}){if(typeof r!="string")throw new Error("Invalid key type");const o={...i,...OD(r,n)};await(await e.post("config",{signal:i.signal,searchParams:X(o),headers:i.headers})).text()}}function OD(e,t){switch(typeof t){case"boolean":return{arg:[e,t.toString()],bool:!0};case"string":return{arg:[e,t]};default:return{arg:[e,JSON.stringify(t)],json:!0}}}function ED(e){return{getAll:_D(e),get:bD(e),set:wD(e),replace:gD(e),profiles:mD(e)}}function SD(e){return async function*(r,n={}){yield*(await e.post("dag/export",{signal:n.signal,searchParams:X({arg:r.toString()}),headers:n.headers})).iterator()}}function PD(e){return e[Symbol.asyncIterator]!=null}function TD(e){if(PD(e))return(async()=>{for await(const t of e)return t})();for(const t of e)return t}async function*dw(e,t,r,n,i){const o=async l=>{const d=await r.getCodec(l.code),c=await n(l,i);return d.decode(c)},a=t.split("/").filter(Boolean);let u=await o(e),s=e;for(;a.length>0;){const l=a.shift();if(l==null)throw Cr(new Error(`Could not resolve path "${t}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(u,l))u=u[l],yield{value:u,remainderPath:a.join("/")};else throw Cr(new Error(`no link named "${l}" under ${s}`),"ERR_NO_LINK");const d=se.asCID(u);d!=null&&(s=d,u=await o(u))}yield{value:u,remainderPath:""}}function CD(e,t){const r=MP(e);return async function(i,o={}){if(o.path!=null){const d=o.localResolve===!0?await TD(dw(i,o.path,t,r,o)):await sf(dw(i,o.path,t,r,o));if(d==null)throw Cr(new Error("Not found"),"ERR_NOT_FOUND");return d}const a=await t.getCodec(i.code),u=await r(i,o);return{value:a.decode(u),remainderPath:""}}}function RD(e){return async function*(r,n={}){const i=new AbortController,o=vn([i.signal,n.signal]);try{const{headers:a,body:u}=await bi(r,i,n.headers),s=await e.post("dag/import",{signal:o,headers:a,body:u,searchParams:X({"pin-roots":n.pinRoots})});for await(const{Root:l}of s.ndjson())if(l!==void 0){const{Cid:{"/":d},PinErrorMsg:c}=l;yield{root:{cid:se.parse(d),pinErrorMsg:c}}}}finally{o.clear()}}}function AD(e,t){return async function(n,i={}){const o={storeCodec:"dag-cbor",hashAlg:"sha2-256",...i};let a;if(o.inputCodec!=null){if(!(n instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");a=n}else a=(await t.getCodec(o.storeCodec??"dag-cbor")).encode(n),o.inputCodec=o.storeCodec;const u=new AbortController,s=vn([u.signal,o.signal]);try{const d=await(await e.post("dag/put",{timeout:o.timeout,signal:s,searchParams:X(o),...await bi([a],u,o.headers)})).json();return se.parse(d.Cid["/"])}finally{s.clear()}}}function ID(e){return async function(r,n={}){const o=await(await e.post("dag/resolve",{signal:n.signal,searchParams:X({arg:`${r}${n.path!=null?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers})).json();return{cid:se.parse(o.Cid["/"]),remainderPath:o.RemPath}}}function jD(e,t){return{export:SD(e),get:CD(e,t),import:RD(e),put:AD(e,t),resolve:ID(e)}}const ND=0,kD=1,MD=2,DD=3,LD=4,UD=5,BD=6,qD=7;function aa(e){if(e.Type===ND)return{name:"SENDING_QUERY",type:e.Type};if(e.Type===kD)return{from:Tt(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses??[]).map(({ID:t,Addrs:r})=>({id:Tt(t),multiaddrs:r.map(n=>wt(n)),protocols:[]})),providers:(e.Responses??[]).map(({ID:t,Addrs:r})=>({id:Tt(t),multiaddrs:r.map(n=>wt(n)),protocols:[]}))};if(e.Type===MD){let t={id:e.ID??Tt(e.ID),multiaddrs:[],protocols:[]};return e.Responses?.length>0&&(t={id:Tt(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map(r=>wt(r)),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:t}}if(e.Type===DD)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(e.Type===LD)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map(({ID:t,Addrs:r})=>({id:Tt(t),multiaddrs:r.map(n=>wt(n)),protocols:[]}))};if(e.Type===UD)return{name:"VALUE",type:e.Type,value:Ce(e.Extra,"base64pad")};if(e.Type===BD){const t=e.Responses.map(({ID:r})=>Tt(r));if(t.length===0)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:t[0]}}if(e.Type===qD)return{name:"DIALING_PEER",type:e.Type,peer:Tt(e.ID)};throw new Error("Unknown DHT event type")}function xD(e){return async function*(r,n={}){const i=await e.post("dht/query",{signal:n.signal,searchParams:X({arg:r.toString(),...n}),headers:n.headers});for await(const o of i.ndjson())yield aa(o)}}var hw;(function(e){e[e.SENDING_QUERY=0]="SENDING_QUERY",e[e.PEER_RESPONSE=1]="PEER_RESPONSE",e[e.FINAL_PEER=2]="FINAL_PEER",e[e.QUERY_ERROR=3]="QUERY_ERROR",e[e.PROVIDER=4]="PROVIDER",e[e.VALUE=5]="VALUE",e[e.ADDING_PEER=6]="ADDING_PEER",e[e.DIALING_PEER=7]="DIALING_PEER"})(hw||(hw={}));var vw;(function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"})(vw||(vw={}));function FD(e){return{query:xD(e)}}function VD(e){return async function(r={}){return(await e.post("diag/cmds",{signal:r.signal,searchParams:X(r),headers:r.headers})).json()}}function $D(e){return async function(r={}){return(await e.post("diag/net",{signal:r.signal,searchParams:X(r),headers:r.headers})).json()}}function WD(e){return async function(r={}){return(await e.post("diag/sys",{signal:r.signal,searchParams:X(r),headers:r.headers})).json()}}function HD(e){return{cmds:VD(e),net:$D(e),sys:WD(e)}}function zD(e){return async function(r,n,i={}){const o=Array.isArray(r)?r:[r];await(await e.post("files/cp",{signal:i.signal,searchParams:X({arg:o.concat(n).map(u=>se.asCID(u)!=null?`/ipfs/${u}`:u),...i}),headers:i.headers})).text()}}function KD(e){return async function(r,n={}){if(typeof r!="string")throw new Error("ipfs.files.flush requires a path");const o=await(await e.post("files/flush",{signal:n.signal,searchParams:X({arg:r,...n}),headers:n.headers})).json();return se.parse(o.Cid)}}function ch(e){const t=ze(e);return Object.prototype.hasOwnProperty.call(t,"mode")&&(t.mode=parseInt(t.mode,8)),Object.prototype.hasOwnProperty.call(t,"mtime")&&(t.mtime={secs:t.mtime,nsecs:t.mtimeNsecs??0},delete t.mtimeNsecs),t}function GD(e){return async function*(r,n={}){if(r==null)throw new Error("ipfs.files.ls requires a path");const i=await e.post("files/ls",{signal:n.signal,searchParams:X({arg:se.asCID(r)!=null?`/ipfs/${r}`:r,long:!0,...n,stream:!0}),headers:n.headers});for await(const o of i.ndjson())if("Entries"in o)for(const a of o.Entries??[])yield pw(ch(a));else yield pw(ch(o))}}function pw(e){return e.hash!=null&&(e.cid=se.parse(e.hash)),delete e.hash,e.type=e.type===1?"directory":"file",e}function YD(e){return async function(r,n={}){await(await e.post("files/mkdir",{signal:n.signal,searchParams:X({arg:r,...n}),headers:n.headers})).text()}}function ZD(e){return async function(r,n,i={}){Array.isArray(r)||(r=[r]),await(await e.post("files/mv",{signal:i.signal,searchParams:X({arg:r.concat(n),...i}),headers:i.headers})).text()}}function XD(e){if(JD(e))return(async function*(){const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}})();if(QD(e))return e;throw new Error("unknown stream")}function QD(e){return e[Symbol.asyncIterator]!=null}function JD(e){return typeof e?.getReader=="function"}function eL(e){return async function*(r,n={}){const i=await e.post("files/read",{signal:n.signal,searchParams:X({arg:r,count:n.length,...n}),headers:n.headers});if(i.body==null)throw new Error("Invalid response body");yield*XD(i.body)}}function tL(e){return async function(r,n={}){const i=await e.post("files/rm",{signal:n.signal,searchParams:X({arg:r,...n}),headers:n.headers}),o=await i.text();if(o!==""){const a=new YN(i);throw a.message=o,a}}}function DP(e){return async function(r,n={}){const o=await(await e.post("files/stat",{signal:n.signal,searchParams:X({arg:r,...n}),headers:n.headers})).json();return o.WithLocality=o.WithLocality??!1,rL(ch(o))}}function rL(e){return e.cid=se.parse(e.hash),delete e.hash,e}function nL(e){return async function(r,n,i={}){const o=new AbortController,a=vn([o.signal,i.signal]);try{await(await e.post("files/write",{signal:a,searchParams:X({arg:r,streamChannels:!0,count:i.length,...i}),...await bi([{content:n,path:"arg",mode:vv(i.mode),mtime:uf(i.mtime)}],o,i.headers)})).text()}finally{a.clear()}}}function iL(e){return{cp:zD(e),flush:KD(e),ls:GD(e),mkdir:YD(e),mv:ZD(e),read:eL(e),rm:tL(e),stat:DP(e),write:nL(e)}}function oL(e){return function(){const r=new URL(e.opts.base??"");return{host:r.hostname,port:r.port,protocol:r.protocol,pathname:r.pathname,"api-path":r.pathname}}}function aL(e){return async function*(r,n={}){const i={arg:`${r instanceof Uint8Array?se.decode(r):r}`,...n};yield*(await e.post("get",{signal:n.signal,searchParams:X(i),headers:n.headers})).iterator()}}function LP(e){return async function(r={}){const i=await(await e.post("id",{signal:r.signal,searchParams:X({arg:r.peerId!=null?r.peerId.toString():void 0,...r}),headers:r.headers})).json(),o={...ze(i)};return o.id=Tt(o.id),o.addresses!=null&&(o.addresses=o.addresses.map(a=>wt(a))),o}}function uL(e){const t=LP(e);return async function(n={}){try{return!!(await t(n))?.addresses?.length}catch{return!1}}}const sL={type:"ed25519"};function cL(e){return async function(r,n=sL){const o=await(await e.post("key/gen",{signal:n.signal,searchParams:X({arg:r,...n}),headers:n.headers})).json();return ze(o)}}function lL(e){return async function(r,n,i,o={}){const u=await(await e.post("key/import",{signal:o.signal,searchParams:X({arg:r,pem:n,password:i,...o}),headers:o.headers})).json();return ze(u)}}function fL(e){return async function(r={}){return((await(await e.post("key/list",{signal:r.signal,searchParams:X(r),headers:r.headers})).json()).Keys??[]).map(o=>ze(o))}}function dL(e){return async function(r,n,i={}){const o=await e.post("key/rename",{signal:i.signal,searchParams:X({arg:[r,n],...i}),headers:i.headers});return ze(await o.json())}}function hL(e){return async function(r,n={}){const o=await(await e.post("key/rm",{signal:n.signal,searchParams:X({arg:r,...n}),headers:n.headers})).json();return ze(o.Keys[0])}}function vL(e){return{gen:cL(e),import:lL(e),list:fL(e),rename:dL(e),rm:hL(e)}}const Jo=1e3,ea=Jo*60,ta=ea*60,po=ta*24,gc=po*7,ra=po*365.25,wc=ra/12;function pL(e,t){if(typeof e=="string")return _L(e);if(typeof e=="number")return mL(e,t);throw Error(`Value provided to ms() must be a string or number. value=${JSON.stringify(e)}`)}var UP=pL;function _L(e){if(typeof e!="string"||e.length===0||e.length>100)throw Error(`Value provided to ms.parse() must be a string with length between 1 and 99. value=${JSON.stringify(e)}`);let t=/^(?<value>-?\d*\.?\d+) *(?<unit>milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)?$/i.exec(e);if(!t?.groups)return NaN;let{value:r,unit:n="ms"}=t.groups,i=parseFloat(r),o=n.toLowerCase();switch(o){case"years":case"year":case"yrs":case"yr":case"y":return i*ra;case"months":case"month":case"mo":return i*wc;case"weeks":case"week":case"w":return i*gc;case"days":case"day":case"d":return i*po;case"hours":case"hour":case"hrs":case"hr":case"h":return i*ta;case"minutes":case"minute":case"mins":case"min":case"m":return i*ea;case"seconds":case"second":case"secs":case"sec":case"s":return i*Jo;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:throw Error(`Unknown unit "${o}" provided to ms.parse(). value=${JSON.stringify(e)}`)}}function bL(e){let t=Math.abs(e);return t>=ra?`${Math.round(e/ra)}y`:t>=wc?`${Math.round(e/wc)}mo`:t>=gc?`${Math.round(e/gc)}w`:t>=po?`${Math.round(e/po)}d`:t>=ta?`${Math.round(e/ta)}h`:t>=ea?`${Math.round(e/ea)}m`:t>=Jo?`${Math.round(e/Jo)}s`:`${e}ms`}function yL(e){let t=Math.abs(e);return t>=ra?uo(e,t,ra,"year"):t>=wc?uo(e,t,wc,"month"):t>=gc?uo(e,t,gc,"week"):t>=po?uo(e,t,po,"day"):t>=ta?uo(e,t,ta,"hour"):t>=ea?uo(e,t,ea,"minute"):t>=Jo?uo(e,t,Jo,"second"):`${e} ms`}function mL(e,t){if(typeof e!="number"||!Number.isFinite(e))throw Error("Value provided to ms.format() must be of type number.");return t?.long?yL(e):bL(e)}function uo(e,t,r,n){let i=t>=r*1.5;return`${Math.round(e/r)} ${n}${i?"s":""}`}function gL(e){r.debug=r,r.default=r,r.coerce=s,r.disable=o,r.enable=i,r.enabled=a,r.humanize=UP,r.destroy=l,Object.keys(e).forEach(d=>{r[d]=e[d]}),r.names=[],r.skips=[],r.formatters={};function t(d){let c=0;for(let p=0;p<d.length;p++)c=(c<<5)-c+d.charCodeAt(p),c|=0;return r.colors[Math.abs(c)%r.colors.length]}r.selectColor=t;function r(d){let c,p=null,b,m;function _(...f){if(!_.enabled)return;const y=_,g=Number(new Date),h=g-(c||g);y.diff=h,y.prev=c,y.curr=g,c=g,f[0]=r.coerce(f[0]),typeof f[0]!="string"&&f.unshift("%O");let v=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,(E,O)=>{if(E==="%%")return"%";v++;const S=r.formatters[O];if(typeof S=="function"){const P=f[v];E=S.call(y,P),f.splice(v,1),v--}return E}),r.formatArgs.call(y,f),(y.log||r.log).apply(y,f)}return _.namespace=d,_.useColors=r.useColors(),_.color=r.selectColor(d),_.extend=n,_.destroy=r.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(b!==r.namespaces&&(b=r.namespaces,m=r.enabled(d)),m),set:f=>{p=f}}),typeof r.init=="function"&&r.init(_),_}function n(d,c){const p=r(this.namespace+(typeof c>"u"?":":c)+d);return p.log=this.log,p}function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let c;const p=(typeof d=="string"?d:"").split(/[\s,]+/),b=p.length;for(c=0;c<b;c++)p[c]&&(d=p[c].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.substr(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function o(){const d=[...r.names.map(u),...r.skips.map(u).map(c=>"-"+c)].join(",");return r.enable(""),d}function a(d){if(d[d.length-1]==="*")return!0;let c,p;for(c=0,p=r.skips.length;c<p;c++)if(r.skips[c].test(d))return!1;for(c=0,p=r.names.length;c<p;c++)if(r.names[c].test(d))return!0;return!1}function u(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function s(d){return d instanceof Error?d.stack??d.message:d}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.setupFormatters(r.formatters),r.enable(r.load()),r}var wL={};const xl=RL(),OL=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function EL(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/(edge|trident)\/(\d+)/)!=null?!1:typeof document<"u"&&document.documentElement?.style?.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/firefox\/(\d+)/)!=null&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/applewebkit\/(\d+)/)}function SL(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+UP(this.diff),!this.useColors)return;const t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}const PL=console.debug??console.log??(()=>{});function TL(e){try{e?xl?.setItem("debug",e):xl?.removeItem("debug")}catch{}}function CL(){let e;try{e=xl?.getItem("debug")}catch{}return!e&&typeof globalThis.process<"u"&&"env"in globalThis.process&&(e=wL.DEBUG),e}function RL(){try{return localStorage}catch{}}function AL(e){e.j=function(t){try{return JSON.stringify(t)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}}const Ct=gL({formatArgs:SL,save:TL,load:CL,useColors:EL,setupFormatters:AL,colors:OL,storage:xl,log:PL});Ct.formatters.b=e=>e==null?"undefined":ui.baseEncode(e);Ct.formatters.t=e=>e==null?"undefined":Mw.baseEncode(e);Ct.formatters.m=e=>e==null?"undefined":Jl.baseEncode(e);Ct.formatters.p=e=>e==null?"undefined":e.toString();Ct.formatters.c=e=>e==null?"undefined":e.toString();Ct.formatters.k=e=>e==null?"undefined":e.toString();Ct.formatters.a=e=>e==null?"undefined":e.toString();Ct.formatters.e=e=>e==null?"undefined":_w(e.stack)??_w(e.message)??e.toString();function IL(e){const t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=e,t.destroy=()=>!0,t.extend=()=>t,t}function Dq(e){return{forComponent(t){return ua(`${e}:${t}`)}}}function Lq(){return{forComponent(e){return ua(e)}}}function ua(e){let t=IL(`${e}:trace`);return Ct.enabled(`${e}:trace`)&&Ct.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(t=Ct(`${e}:trace`)),Object.assign(Ct(e),{error:Ct(`${e}:error`),trace:t,newScope:r=>ua(`${e}:${r}`)})}function _w(e){if(e!=null&&(e=e.trim(),e.length!==0))return e}var Ud,bw;function jL(){return bw||(bw=1,Ud=e=>{if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}),Ud}var vl,yw;function NL(){if(yw)return vl;yw=1;const e=jL(),{hasOwnProperty:t}=Object.prototype,{propertyIsEnumerable:r}=Object,n=(b,m,_)=>Object.defineProperty(b,m,{value:_,writable:!0,enumerable:!0,configurable:!0}),i=vl,o={concatArrays:!1,ignoreUndefined:!1},a=b=>{const m=[];for(const _ in b)t.call(b,_)&&m.push(_);if(Object.getOwnPropertySymbols){const _=Object.getOwnPropertySymbols(b);for(const f of _)r.call(b,f)&&m.push(f)}return m};function u(b){return Array.isArray(b)?s(b):e(b)?l(b):b}function s(b){const m=b.slice(0,0);return a(b).forEach(_=>{n(m,_,u(b[_]))}),m}function l(b){const m=Object.getPrototypeOf(b)===null?Object.create(null):{};return a(b).forEach(_=>{n(m,_,u(b[_]))}),m}const d=(b,m,_,f)=>(_.forEach(y=>{typeof m[y]>"u"&&f.ignoreUndefined||(y in b&&b[y]!==Object.getPrototypeOf(b)?n(b,y,p(b[y],m[y],f)):n(b,y,u(m[y])))}),b),c=(b,m,_)=>{let f=b.slice(0,0),y=0;return[b,m].forEach(g=>{const h=[];for(let v=0;v<g.length;v++)t.call(g,v)&&(h.push(String(v)),g===b?n(f,y++,g[v]):n(f,y++,u(g[v])));f=d(f,g,a(g).filter(v=>!h.includes(v)),_)}),f};function p(b,m,_){return _.concatArrays&&Array.isArray(b)&&Array.isArray(m)?c(b,m,_):!e(m)||!e(b)?u(m):d(b,m,a(m),_)}return vl=function(...b){const m=p(u(o),this!==i&&this||{},o);let _={_:{}};for(const f of b)if(f!==void 0){if(!e(f))throw new TypeError("`"+f+"` is not an Option Object");_=p(_,{_:f},m)}return _._},vl}var kL=NL();const BP=fh(kL),_e=Object.create(null),qP=6e4,xP=qP*60,Iv=xP*24,FP=Iv*365.25;_e.year=_e.yr=_e.y=FP;_e.month=_e.mo=_e.mth=FP/12;_e.week=_e.wk=_e.w=Iv*7;_e.day=_e.d=Iv;_e.hour=_e.hr=_e.h=xP;_e.minute=_e.min=_e.m=qP;_e.second=_e.sec=_e.s=1e3;_e.millisecond=_e.millisec=_e.ms=1;_e.microsecond=_e.microsec=_e.us=_e.s=.001;_e.nanosecond=_e.nanosec=_e.ns=1e-6;_e.group=",";_e.decimal=".";_e.placeholder=" _";const ML=/((?:\d{1,16}(?:\.\d{1,16})?|\.\d{1,16})(?:[eE][-+]?\d{1,4})?)\s?([\p{L}]{0,14})/gu;Sr.unit=_e;function Sr(e="",t="ms"){let r=null,n;return String(e).replace(new RegExp(`(\\d)[${Sr.unit.placeholder}${Sr.unit.group}](\\d)`,"g"),"$1$2").replace(Sr.unit.decimal,".").replace(ML,(i,o,a)=>{if(a)a=a.toLowerCase();else if(n){for(const u in Sr.unit)if(Sr.unit[u]<n){a=u;break}}else a=t;n=a=Sr.unit[a]||Sr.unit[a.replace(/s$/,"")],a&&(r=(r||0)+o*a)}),r&&r/(Sr.unit[t]||1)*(e[0]==="-"?-1:1)}const DL=()=>{};var Bd,mw;function VP(){if(mw)return Bd;mw=1;const e=typeof navigator<"u"&&navigator.product==="ReactNative";function t(){return e?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const r=self.URL,n=t();class i{constructor(u="",s=n){this.super=new r(u,s),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(u){this.super.hash=u}set host(u){this.super.host=u}set hostname(u){this.super.hostname=u}set href(u){this.super.href=u}set password(u){this.super.password=u}set pathname(u){this.super.pathname=u}set port(u){this.super.port=u}set protocol(u){this.super.protocol=u}set search(u){this.super.search=u}set username(u){this.super.username=u}static createObjectURL(u){return r.createObjectURL(u)}static revokeObjectURL(u){r.revokeObjectURL(u)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}}function o(a){if(typeof a=="string")return new r(a).toString();if(!(a instanceof r)){const u=a.username&&a.password?`${a.username}:${a.password}@`:"",s=a.auth?a.auth+"@":"",l=a.port?":"+a.port:"",d=a.protocol?a.protocol+"//":"",c=a.host||"",p=a.hostname||"",b=a.search||(a.query?"?"+a.query:""),m=a.hash||"",_=a.pathname||"",f=a.path||_+b;return`${d}${u||s}${c||p+l}${f}${m}`}}return Bd={URLWithLegacySupport:i,URLSearchParams:self.URLSearchParams,defaultBase:n,format:o},Bd}var qd,gw;function LL(){if(gw)return qd;gw=1;const{URLWithLegacySupport:e,format:t}=VP();return qd=(r,n={},i={},o)=>{let a=n.protocol?n.protocol.replace(":",""):"http";a=(i[a]||o||a)+":";let u;try{u=new e(r)}catch{u={}}const s=Object.assign({},n,{protocol:a||u.protocol,host:n.host||u.host});return new e(r,t(s)).toString()},qd}var xd,ww;function UL(){if(ww)return xd;ww=1;const{URLWithLegacySupport:e,format:t,URLSearchParams:r,defaultBase:n}=VP(),i=LL();return xd={URL:e,URLSearchParams:r,format:t,relative:i,defaultBase:n},xd}var pl=UL();class $P extends Error{constructor(t="Request timed out"){super(t),this.name="TimeoutError"}}class BL extends Error{constructor(t="The operation was aborted."){super(t),this.name="AbortError"}}class Ow extends Error{response;constructor(t){super(t.statusText),this.name="HTTPError",this.response=t}}const qL=globalThis.fetch,jv=globalThis.Headers,xL=globalThis.Request,WP=globalThis.Response,FL=async(e,t={})=>{const r=new XMLHttpRequest;r.open(t.method??"GET",e.toString(),!0);const{timeout:n,headers:i}=t,o=Number(n);if(!isNaN(o)&&o>0&&o<1/0&&(r.timeout=o),t.overrideMimeType!=null&&r.overrideMimeType(t.overrideMimeType),i!=null)for(const[a,u]of new jv(i))r.setRequestHeader(a,u);return t.signal!=null&&(t.signal.onabort=()=>{r.abort()}),t.onUploadProgress!=null&&(r.upload.onprogress=t.onUploadProgress),r.responseType="arraybuffer",new Promise((a,u)=>{const s=l=>{switch(l.type){case"error":{a(WP.error());break}case"load":{a(new HL(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:WL(r.getAllResponseHeaders())}));break}case"timeout":{u(new $P);break}case"abort":{u(new BL);break}}};r.onerror=s,r.onload=s,r.ontimeout=s,r.onabort=s,r.send(t.body)})},VL=qL,$L=(e,t={})=>t.onUploadProgress!=null?FL(e,t):VL(e,t),WL=e=>{const t=new jv;for(const r of e.trim().split(/[\r\n]+/)){const n=r.indexOf(": ");n>0&&t.set(r.slice(0,n),r.slice(n+1))}return t};class HL extends WP{constructor(t,r,n){super(r,n),Object.defineProperty(this,"url",{value:t})}}const Ew=BP.bind({ignoreUndefined:!0}),_l=ua("kubo-rpc-client:fetch"),zL={throwHttpErrors:!0,credentials:"same-origin"};class Jt{static HTTPError=Ow;static TimeoutError=$P;static post=async(t,r)=>new Jt(r).post(t,r);static get=async(t,r)=>new Jt(r).get(t,r);static put=async(t,r)=>new Jt(r).put(t,r);static delete=async(t,r)=>new Jt(r).delete(t,r);static options=async(t,r)=>new Jt(r).options(t,r);opts;constructor(t={}){this.opts=Ew({},zL,t)}async fetch(t,r={}){const n=Ew({},this.opts,r),i=new jv(n.headers);if(typeof t!="string"&&!(t instanceof pl.URL||t instanceof xL))throw new TypeError("`resource` must be a string, URL, or Request");const o=new pl.URL(t.toString(),n.base),{searchParams:a,transformSearchParams:u,json:s}=n;a!=null&&(typeof u=="function"?o.search=u(new pl.URLSearchParams(n.searchParams)):o.search=new pl.URLSearchParams(n.searchParams).toString()),s!=null&&(n.body=JSON.stringify(n.json),i.set("content-type","application/json"));const l=[n.signal];n.timeout!=null&&isNaN(n.timeout)&&n.timeout>0&&l.push(AbortSignal.timeout(n.timeout));const d=vn(l);try{globalThis.ReadableStream!=null&&n.body instanceof globalThis.ReadableStream&&(rf||nf)&&(n.body=new Blob(await SS(of(n.body)))),_l.trace("outgoing headers",n.headers),_l.trace("%s %s",n.method,o);const c=await $L(o.toString(),{...n,signal:n.signal,timeout:void 0,headers:i,duplex:"half"});if(_l("%s %s %d",n.method,o,c.status),_l.trace("incoming headers",c.headers),!c.ok&&n.throwHttpErrors===!0)throw n.handleError!=null&&await n.handleError(c),new Ow(c);return c.iterator=async function*(){yield*GL(c.body)},c.ndjson=async function*(){for await(const p of KL(c.iterator()))r.transform!=null?yield r.transform(p):yield p},c}finally{d.clear()}}async post(t,r={}){return this.fetch(t,{...r,method:"POST"})}async get(t,r={}){return this.fetch(t,{...r,method:"GET"})}async put(t,r={}){return this.fetch(t,{...r,method:"PUT"})}async delete(t,r={}){return this.fetch(t,{...r,method:"DELETE"})}async options(t,r={}){return this.fetch(t,{...r,method:"OPTIONS"})}}const KL=async function*(e){const t=new TextDecoder;let r="";for await(const n of e){r+=t.decode(n,{stream:!0});const i=r.split(/\r?\n/);for(let o=0;o<i.length-1;o++){const a=i[o].trim();a.length>0&&(yield JSON.parse(a))}r=i[i.length-1]}r+=t.decode(),r=r.trim(),r.length!==0&&(yield JSON.parse(r))},GL=e=>{if(YL(e))return e;if(XL(e)){const t=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:t.next.bind(t),return(r){return e.destroy(),typeof t.return=="function"?t.return():Promise.resolve({done:!0,value:r})}}}}}if(ZL(e)){const t=e.getReader();return(async function*(){try{for(;;){const{done:r,value:n}=await t.read();if(r)return;n!=null&&(yield n)}}finally{t.releaseLock()}})()}throw new TypeError("Body can't be converted to AsyncIterable")},YL=e=>e!==null&&typeof e[Symbol.asyncIterator]=="function",ZL=e=>e!=null&&typeof e.getReader=="function",XL=e=>Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable"),QL=[Sl,av,sv,uv,tf];function Sw(e){return HP("sni",e)?.value}function Pw(e){const t=HP("tcp",e)?.value;return t==null?"":`:${t}`}function HP(e,t){return t.find(r=>r.name===e)}function Tw(e){return e.some(({code:t})=>t===tS)}function Qt(e,t){const r=zP[e.name];if(r==null)throw new Error(`Can't interpret protocol ${e.name}`);const n=r(e,t);return e.code===dc?`[${n}]`:n}const zP={ip4:(e,t)=>e.value,ip6:(e,t)=>t.length===0?e.value:`[${e.value}]`,tcp:(e,t)=>{const r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`tcp://${Qt(r,t)}:${e.value}`},udp:(e,t)=>{const r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`udp://${Qt(r,t)}:${e.value}`},dnsaddr:(e,t)=>e.value,dns4:(e,t)=>e.value,dns6:(e,t)=>e.value,dns:(e,t)=>e.value,ipfs:(e,t)=>{const r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${Qt(r,t)}`},p2p:(e,t)=>{const r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${Qt(r,t)}`},http:(e,t)=>{const r=Tw(t),n=Sw(t),i=Pw(t);if(r&&n!=null)return`https://${n}${i}`;const o=r?"https://":"http://",a=t.pop();if(a==null)throw new Error("Unexpected end of multiaddr");let u=Qt(a,t);return u=u?.replace("tcp://",""),`${o}${u}`},"http-path":(e,t)=>{const r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");const n=Qt(r,t),i=decodeURIComponent(e.value??"");return`${n}${i}`},tls:(e,t)=>{const r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return Qt(r,t)},sni:(e,t)=>{const r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return Qt(r,t)},https:(e,t)=>{const r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");let n=Qt(r,t);return n=n?.replace("tcp://",""),`https://${n}`},ws:(e,t)=>{const r=Tw(t),n=Sw(t),i=Pw(t);if(r&&n!=null)return`wss://${n}${i}`;const o=r?"wss://":"ws://",a=t.pop();if(a==null)throw new Error("Unexpected end of multiaddr");let u=Qt(a,t);return u=u?.replace("tcp://",""),`${o}${u}`},wss:(e,t)=>{const r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");let n=Qt(r,t);return n=n?.replace("tcp://",""),`wss://${n}`}};function JL(e,t){const n=wt(e).getComponents(),i=n.pop();if(i==null)throw new Error("Unexpected end of multiaddr");const o=zP[i.name];if(o==null)throw new Error(`No interpreter found for ${i.name}`);let a=o(i,n)??"";return QL.includes(i.code)&&(a=a.replace(/^.*:\/\//,""),i.value==="443"?a=`https://${a}`:a=`http://${a}`),(a.startsWith("http://")||a.startsWith("https://")||a.startsWith("ws://")||a.startsWith("wss://"))&&(a=new URL(a).toString(),a.endsWith("/")&&(a=a.substring(0,a.length-1))),a}function Cw(e){try{e=JL(wt(e))}catch{}return e=e.toString(),e}const Rw=ua("js-kubo-rpc-client:lib:error-handler"),eU=BP.bind({ignoreUndefined:!0}),tU=rf||nf?location.protocol:"http",rU=rf||nf?location.hostname:"localhost",nU=rf||nf?location.port:"5001",iU=(e={})=>{let t,r={},n;if(typeof e=="string"||Pl(e))t=new URL(Cw(e));else if(e instanceof URL)t=e;else if(typeof e.url=="string"||Pl(e.url))t=new URL(Cw(e.url)),r=e;else if(e.url instanceof URL)t=e.url,r=e;else{r=e??{};const i=(r.protocol??tU).replace(":",""),o=(r.host??rU).split(":")[0],a=r.port??nU;t=new URL(`${i}://${o}:${a}`)}if(r.apiPath!=null?t.pathname=r.apiPath:(t.pathname==="/"||t.pathname===void 0)&&(t.pathname="api/v0"),HN){const i=DL();n=r.agent??new i({keepAlive:!0,maxSockets:6})}return{...r,host:t.host,protocol:t.protocol.replace(":",""),port:Number(t.port),apiPath:t.pathname,url:t,agent:n}},oU=async e=>{let t;try{if((e.headers.get("Content-Type")??"").startsWith("application/json")){const n=await e.json();Rw(n),t=n.Message??n.message}else t=await e.text()}catch(n){Rw("Failed to parse error response",n),t=n.message}let r=new Jt.HTTPError(e);throw t!=null&&(t.includes("deadline has elapsed")&&(r=new Jt.TimeoutError),t.includes("context deadline exceeded")&&(r=new Jt.TimeoutError),t.includes("request timed out")&&(r=new Jt.TimeoutError),r.message=t),r},aU=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,Aw=e=>e.replace(aU,function(t){return"-"+t.toLowerCase()}),uU=e=>typeof e=="string"?Sr(e)??0:e;class sU extends Jt{constructor(t={}){const r=iU(t);super({timeout:r.timeout!=null?uU(r.timeout):void 0,headers:r.headers,base:`${r.url}`,handleError:oU,transformSearchParams:i=>{const o=new URLSearchParams;for(const[a,u]of i)u!=="undefined"&&u!=="null"&&a!=="signal"&&a!=="timeout"&&o.append(Aw(a),u),a==="timeout"&&!isNaN(parseInt(u))&&o.append(Aw(a),u);return o},agent:r.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;const n=this.fetch;this.fetch=async(i,o={})=>(typeof i=="string"&&!i.startsWith("/")&&(i=`${r.url}/${i}`),n.call(this,i,eU(o,{method:"POST"})))}}const cU=async e=>Promise.reject(new Error(`No base found for "${e}"`));class lU{_basesByName;_basesByPrefix;_loadBase;constructor(t){this._basesByName={},this._basesByPrefix={},this._loadBase=t.loadBase??cU;for(const r of t.bases)this.addBase(r)}addBase(t){if(this._basesByName[t.name]!=null&&this._basesByPrefix[t.prefix]!=null)throw new Error(`Codec already exists for codec "${t.name}"`);this._basesByName[t.name]=t,this._basesByPrefix[t.prefix]=t}removeBase(t){delete this._basesByName[t.name],delete this._basesByPrefix[t.prefix]}async getBase(t){if(this._basesByName[t]!=null)return this._basesByName[t];if(this._basesByPrefix[t]!=null)return this._basesByPrefix[t];const r=await this._loadBase(t);return this._basesByName[r.name]==null&&this._basesByPrefix[r.prefix]==null&&this.addBase(r),r}listBases(){return Object.values(this._basesByName)}}const fU=async e=>Promise.reject(new Error(`No codec found for "${e}"`));class dU{_codecsByName;_codecsByCode;_loadCodec;constructor(t){this._codecsByName={},this._codecsByCode={},this._loadCodec=t.loadCodec??fU;for(const r of t.codecs)this.addCodec(r)}addCodec(t){if(this._codecsByName[t.name]!=null||this._codecsByCode[t.code]!=null)throw new Error(`Resolver already exists for codec "${t.name}"`);this._codecsByName[t.name]=t,this._codecsByCode[t.code]=t}removeCodec(t){delete this._codecsByName[t.name],delete this._codecsByCode[t.code]}async getCodec(t){const r=typeof t=="string"?this._codecsByName:this._codecsByCode;if(r[t]!=null)return r[t];const n=await this._loadCodec(t);return r[t]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}}const hU=async e=>Promise.reject(new Error(`No hasher found for "${e}"`));class vU{_hashersByName;_hashersByCode;_loadHasher;constructor(t){this._hashersByName={},this._hashersByCode={},this._loadHasher=t.loadHasher??hU;for(const r of t.hashers)this.addHasher(r)}addHasher(t){if(this._hashersByName[t.name]!=null||this._hashersByCode[t.code]!=null)throw new Error(`Resolver already exists for codec "${t.name}"`);this._hashersByName[t.name]=t,this._hashersByCode[t.code]=t}removeHasher(t){delete this._hashersByName[t.name],delete this._hashersByCode[t.code]}async getHasher(t){const r=typeof t=="string"?this._hashersByName:this._hashersByCode;if(r[t]!=null)return r[t];const n=await this._loadHasher(t);return r[t]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}}function pU(e){return async function(t,r,n={}){const i=await e.post("log/level",{signal:n.signal,searchParams:X({arg:[t,r],...n}),headers:n.headers});return ze(await i.json())}}function _U(e){return async function(r={}){return(await(await e.post("log/ls",{signal:r.signal,searchParams:X(r),headers:r.headers})).json()).Strings}}function bU(e){return async function*(r={}){yield*(await e.post("log/tail",{signal:r.signal,searchParams:X(r),headers:r.headers})).ndjson()}}function yU(e){return{level:pU(e),ls:_U(e),tail:bU(e)}}function mU(e){return async function*(r,n={}){const i=`${r instanceof Uint8Array?se.decode(r):r}`;async function o(u){let s=u.Hash;if(s.includes("/")===!0){const d=s.startsWith("/ipfs/")===!0?s:`/ipfs/${s}`;s=(await DP(e)(d)).cid}else s=se.parse(s);return{name:u.Name,path:i+(u.Name!=null?`/${u.Name}`:""),size:u.Size,cid:s,type:gU(u)}}const a=await e.post("ls",{signal:n.signal,searchParams:X({arg:i,...n}),headers:n.headers});for await(let u of a.ndjson()){if(u=u.Objects,u==null)throw new Error("expected .Objects in results");if(u=u[0],u==null)throw new Error("expected one array in results.Objects");const s=u.Links;if(!Array.isArray(s))throw new Error("expected one array in results.Objects[0].Links");if(s.length===0){yield o(u);return}yield*s.map(o)}}}function gU(e){switch(e.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}function wU(e){return async function(r={}){const n=await e.post("dns",{signal:r.signal,searchParams:X(r),headers:r.headers});return ze(await n.json())}}function OU(e){return async function(r,n={}){const i=await e.post("name/publish",{signal:n.signal,searchParams:X({arg:`${r}`,...n}),headers:n.headers});return ze(await i.json())}}function EU(e){return async function(r,n={}){const i=await e.post("name/pubsub/cancel",{signal:n.signal,searchParams:X({arg:r,...n}),headers:n.headers});return ze(await i.json())}}function SU(e){return async function(r={}){const n=await e.post("name/pubsub/state",{signal:r.signal,searchParams:X(r),headers:r.headers});return ze(await n.json())}}function PU(e){return async function(r={}){return(await(await e.post("name/pubsub/subs",{signal:r.signal,searchParams:X(r),headers:r.headers})).json()).Strings??[]}}function TU(e){return{cancel:EU(e),state:SU(e),subs:PU(e)}}function CU(e){return async function*(r,n={}){const i=await e.post("name/resolve",{signal:n.signal,searchParams:X({arg:r,stream:!0,...n}),headers:n.headers});for await(const o of i.ndjson())yield o.Path}}function RU(e){return{publish:OU(e),resolve:CU(e),pubsub:TU(e)}}function AU(e){return async function(r,n,i={}){const o=await e.post("object/patch/add-link",{signal:i.signal,searchParams:X({arg:[`${r}`,n.Name??n.name??"",(n.Hash??n.cid??"").toString()??null],...i}),headers:i.headers}),{Hash:a}=await o.json();return se.parse(a)}}function IU(e){return async function(r,n,i={}){const o=await e.post("object/patch/rm-link",{signal:i.signal,searchParams:X({arg:[`${r}`,n.Name??n.name??null],...i}),headers:i.headers}),{Hash:a}=await o.json();return se.parse(a)}}function jU(e){return{addLink:AU(e),rmLink:IU(e)}}function NU(e,t){return{patch:jU(e)}}function kU(e){return Symbol.iterator in e}function MU(e){return Symbol.asyncIterator in e}function Iw(e){return se.asCID(e)!=null}async function*KP(e){if(e==null)throw new so(`Unexpected input: ${e}`);const t=se.asCID(e);if(t!=null){yield dt({cid:t});return}if(typeof e=="string"){yield dt({path:e});return}if(e.cid!=null||e.path!=null)return yield dt(e);if(kU(e)){const r=e[Symbol.iterator](),n=r.next();if(n.done===!0)return r;if(Iw(n.value)){yield dt({cid:n.value});for(const i of r)yield dt({cid:i});return}if(typeof n.value=="string"){yield dt({path:n.value});for(const i of r)yield dt({path:i});return}if(n.value.cid!=null||n.value.path!=null){yield dt(n.value);for(const i of r)yield dt(i);return}throw new so(`Unexpected input: ${typeof e}`)}if(MU(e)){const r=e[Symbol.asyncIterator](),n=await r.next();if(n.done===!0)return r;if(Iw(n.value)){yield dt({cid:n.value});for await(const i of r)yield dt({cid:i});return}if(typeof n.value=="string"){yield dt({path:n.value});for await(const i of r)yield dt({path:i});return}if(n.value.cid!=null||n.value.path!=null){yield dt(n.value);for await(const i of r)yield dt(i);return}throw new so(`Unexpected input: ${typeof e}`)}throw new so(`Unexpected input: ${typeof e}`)}function dt(e){const t=e.cid??`${e.path}`;if(t==null)throw new so("Unexpected input: Please path either a CID or an IPFS path");const r={path:t,recursive:e.recursive!==!1};return e.metadata!=null&&(r.metadata=e.metadata),r}function GP(e){return async function*(r,n={}){for await(const{path:i,recursive:o,metadata:a}of KP(r)){const u=await e.post("pin/add",{signal:n.signal,searchParams:X({...n,arg:i,recursive:o,metadata:a!=null?JSON.stringify(a):void 0,stream:!0}),headers:n.headers});for await(const s of u.ndjson()){if(s.Pins!=null){for(const l of s.Pins)yield se.parse(l);continue}yield se.parse(s)}}}}function DU(e){const t=GP(e);return async function(n,i={}){const o=await sf(t([{path:n.toString(),...i}],i));if(o==null)throw new Error("No response received");return o}}function jw(e,t,r,n){const i={type:e,cid:se.parse(t)};return r!=null&&(i.metadata=r),n!=null&&(i.name=n),i}function LU(e){return async function*(r={}){let n=[];r.paths!=null&&(n=Array.isArray(r.paths)?r.paths:[r.paths]);const i=await e.post("pin/ls",{signal:r.signal,searchParams:X({...r,arg:n.map(o=>`${o}`),stream:!0}),headers:r.headers});for await(const o of i.ndjson()){if(o.Keys!=null){for(const a of Object.keys(o.Keys))yield jw(o.Keys[a].Type,a,o.Keys[a].Metadata,o.Keys[a].Name);return}yield jw(o.Type,o.Cid,o.Metadata,o.Name)}}}const YP=({Name:e,Status:t,Cid:r})=>({cid:se.parse(r),name:e,status:t}),ZP=e=>{if(typeof e=="string"&&e!=="")return e;throw new TypeError("service name must be passed")},XP=e=>{if(se.asCID(e)!=null)return e.toString();throw new TypeError(`CID instance expected instead of ${typeof e}`)},Nv=({service:e,cid:t,name:r,status:n,all:i})=>{const o=X({service:ZP(e),name:r,force:i===!0?!0:void 0});if(t!=null)for(const a of t)o.append("cid",XP(a));if(n!=null)for(const a of n)o.append("status",a);return o},UU=(e,{service:t,background:r,name:n,origins:i})=>{const o=X({arg:XP(e),service:ZP(t),name:n,background:r===!0?!0:void 0});if(i!=null)for(const a of i)o.append("origin",a.toString());return o};function BU(e){return async function(r,{timeout:n,signal:i,headers:o,...a}){const u=await e.post("pin/remote/add",{timeout:n,signal:i,headers:o,searchParams:UU(r,a)});return YP(await u.json())}}function qU(e){return async function*({timeout:r,signal:n,headers:i,...o}){const a=await e.post("pin/remote/ls",{timeout:r,signal:n,headers:i,searchParams:Nv(o)});for await(const u of a.ndjson())yield YP(u)}}function xU(e){return async function({timeout:r,signal:n,headers:i,...o}){await e.post("pin/remote/rm",{timeout:r,signal:n,headers:i,searchParams:Nv({...o,all:!0})})}}function FU(e){return async function({timeout:r,signal:n,headers:i,...o}){await e.post("pin/remote/rm",{timeout:r,signal:n,headers:i,searchParams:Nv({...o,all:!1})})}}function VU(e){const t=String(e);if(t==="undefined")throw Error("endpoint is required");return t[t.length-1]==="/"?t.slice(0,-1):t}function $U(e){const t={service:e.Service,endpoint:new URL(e.ApiEndpoint)};return e.Stat!=null&&(t.stat=WU(e.Stat)),t}function WU(e){switch(e.Status){case"valid":{const{Pinning:t,Pinned:r,Queued:n,Failed:i}=e.PinCount;return{status:"valid",pinCount:{queued:n,pinning:t,pinned:r,failed:i}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function HU(e){return async function(r,n){const{endpoint:i,key:o,headers:a,timeout:u,signal:s}=n;await e.post("pin/remote/service/add",{timeout:u,signal:s,searchParams:X({arg:[r,VU(i),o]}),headers:a})}}function zU(e){return async function(r={}){const{stat:n,headers:i,timeout:o,signal:a}=r;return(await(await e.post("pin/remote/service/ls",{timeout:o,signal:a,headers:i,searchParams:n===!0?X({stat:n}):void 0})).json()).RemoteServices.map($U)}}function KU(e){return async function(r,n={}){await e.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:X({arg:r})})}}function GU(e){return{add:HU(e),ls:zU(e),rm:KU(e)}}function YU(e){return{add:BU(e),ls:qU(e),rm:FU(e),rmAll:xU(e),service:GU(e)}}function QP(e){return async function*(r,n={}){for await(const{path:i,recursive:o}of KP(r)){const a=new URLSearchParams(n.searchParams);a.append("arg",`${i}`),o!=null&&a.set("recursive",String(o));const u=await e.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:X({...n,arg:`${i}`,recursive:o})});for await(const s of u.ndjson()){if(s.Pins!=null){yield*s.Pins.map(l=>se.parse(l));continue}yield se.parse(s)}}}}function ZU(e){const t=QP(e);return async function(n,i={}){const o=await sf(t([{path:n.toString(),...i}],i));if(o==null)throw new Error("No response received");return o}}function XU(e){return async function(r,n,i={}){const o=await e.post("pin/update",{signal:i.signal,searchParams:X({...i,arg:[r.toString(),n.toString()]}),headers:i.headers}),{Pins:a}=await o.json();return a.map(u=>se.parse(u))}}function QU(e){return{addAll:GP(e),add:DU(e),ls:LU(e),rmAll:QP(e),rm:ZU(e),update:XU(e),remote:YU(e)}}function JU(e){return async function*(r,n={}){yield*(await e.post("ping",{signal:n.signal,searchParams:X({arg:`${r}`,...n}),headers:n.headers,transform:ze})).ndjson()}}const eB=e=>Array.isArray(e)?e.map(lh):e,lh=e=>de(lc(e)),lc=e=>qc.decode(e),tB=e=>BigInt(`0x${de(qc.decode(e),"base16")}`),kv=e=>qc.encode(Ce(e));function rB(e){return async function(r={}){const{Strings:n}=await(await e.post("pubsub/ls",{signal:r.signal,searchParams:X(r),headers:r.headers})).json();return eB(n)??[]}}function nB(e){return async function(r,n={}){const i=await e.post("pubsub/peers",{signal:n.signal,searchParams:X({arg:kv(r),...n}),headers:n.headers}),{Strings:o}=await i.json();return o??[]}}function iB(e){return async function(r,n,i={}){const o=X({arg:kv(r),...i}),a=new AbortController,u=vn([a.signal,i.signal]);try{await(await e.post("pubsub/pub",{signal:u,searchParams:o,...await bi([n],a,i.headers)})).text()}finally{u.clear()}}}const oB=ua("js-kubo-rpc-client:pubsub:subscribe");function aB(e,t){return async function(n,i,o={}){o.signal=t.subscribe(n,i,o.signal);let a,u;const s=new Promise((d,c)=>{a=d,u=c}),l=setTimeout(()=>{a()},1e3);return e.post("pubsub/sub",{signal:o.signal,searchParams:X({arg:kv(n),...o}),headers:o.headers}).catch(d=>{t.unsubscribe(n,i),u(d)}).then(d=>{clearTimeout(l),d!=null&&(uB(d,{onMessage:c=>{if(i!=null){if(typeof i=="function"){i(c);return}typeof i.handleEvent=="function"&&i.handleEvent(c)}},onEnd:()=>{t.unsubscribe(n,i)},onError:o.onError}),a())}),s}}async function uB(e,{onMessage:t,onEnd:r,onError:n}){n=n??oB;try{for await(const i of e.ndjson())try{if(i.from==null)continue;i.from!=null&&i.seqno!=null?t({type:"signed",from:Tt(i.from),data:lc(i.data),sequenceNumber:tB(i.seqno),topic:lh(i.topicIDs[0]),key:i.key!=null?WM(lc(i.key??"u")):void 0,signature:lc(i.signature??"u")}):t({type:"unsigned",data:lc(i.data),topic:lh(i.topicIDs[0])})}catch(o){o.message=`Failed to parse pubsub message: ${o.message}`,n(o,!1,i)}}catch(i){sB(i)||n(i,!0)}finally{r()}}const sB=e=>{switch(e.type){case"aborted":return!0;case"abort":return!0;default:return e.name==="AbortError"}};class cB{_subs;constructor(){this._subs=new Map}subscribe(t,r,n){const i=this._subs.get(t)??[];if(i.find(a=>a.handler===r)!=null)throw new Error(`Already subscribed to ${t} with this handler`);const o=new AbortController;return this._subs.set(t,[{handler:r,controller:o}].concat(i)),n?.addEventListener("abort",()=>{this.unsubscribe(t,r)}),o.signal}unsubscribe(t,r){const n=this._subs.get(t)??[];let i;r!=null?(this._subs.set(t,n.filter(o=>o.handler!==r)),i=n.filter(o=>o.handler===r)):(this._subs.set(t,[]),i=n),(this._subs.get(t)??[]).length===0&&this._subs.delete(t),i.forEach(o=>{o.controller.abort()})}}function lB(e,t){return async function(n,i){t.unsubscribe(n,i)}}function fB(e){const t=new cB;return{ls:rB(e),peers:nB(e),publish:iB(e),subscribe:aB(e,t),unsubscribe:lB(e,t)}}function dB(e){return async function*(r={}){yield*(await e.post("refs/local",{signal:r.signal,transform:ze,searchParams:X(r),headers:r.headers})).ndjson()}}function hB(e){async function*t(r,n={}){const i=Array.isArray(r)?r:[r];yield*(await e.post("refs",{signal:n.signal,searchParams:X({arg:i.map(a=>`${a instanceof Uint8Array?se.decode(a):a}`),...n}),headers:n.headers,transform:ze})).ndjson()}return Object.assign(t,{local:dB(e)})}function vB(e){return async function*(r={}){yield*(await e.post("repo/gc",{signal:r.signal,searchParams:X(r),headers:r.headers,transform:i=>({err:i.Error!=null?new Error(i.Error):null,cid:i.Key?.["/"]!=null?se.parse(i.Key["/"]):null})})).ndjson()}}function JP(e){return async function(r={}){const i=await(await e.post("repo/stat",{signal:r.signal,searchParams:X(r),headers:r.headers})).json();return{numObjects:BigInt(i.NumObjects),repoSize:BigInt(i.RepoSize),repoPath:i.RepoPath,version:i.Version,storageMax:BigInt(i.StorageMax)}}}function pB(e){return async function(r={}){return(await(await e.post("repo/version",{signal:r.signal,searchParams:X(r),headers:r.headers})).json()).Version}}function _B(e){return{gc:vB(e),stat:JP(e),version:pB(e)}}function bB(e){return async function(r,n={}){const i=await e.post("resolve",{signal:n.signal,searchParams:X({arg:r,...n}),headers:n.headers}),{Path:o}=await i.json();return o}}function yB(e){return async function*(r,n={}){const i=await e.post("routing/findpeer",{signal:n.signal,searchParams:X({arg:r.toString(),stream:!0,...n}),headers:n.headers});for await(const o of i.ndjson())yield aa(o)}}function mB(e){return async function*(r,n={}){const i=await e.post("routing/findprovs",{signal:n.signal,searchParams:X({arg:r.toString(),...n}),headers:n.headers});for await(const o of i.ndjson())yield aa(o)}}function gB(e){return async function*(r,n={}){const i=await e.post("routing/get",{signal:n.signal,searchParams:X({arg:r instanceof Uint8Array?de(r):r.toString(),...n}),headers:n.headers});for await(const o of i.ndjson())yield aa(o)}}function wB(e){return async function*(r,n={recursive:!1}){const i=Array.isArray(r)?r:[r],o=await e.post("routing/provide",{signal:n.signal,searchParams:X({arg:i.map(a=>a.toString()),...n}),headers:n.headers});for await(const a of o.ndjson())yield aa(a)}}function OB(e){return async function*(r,n,i={}){const o=new AbortController,a=vn([o.signal,i.signal]);try{const u=await e.post("routing/put",{signal:a,searchParams:X({arg:r instanceof Uint8Array?de(r):r.toString(),stream:!0,...i}),...await bi([n],o,i.headers)});for await(const s of u.ndjson())yield aa(s)}finally{a.clear()}}}function EB(e){return{findPeer:yB(e),findProvs:mB(e),get:gB(e),provide:wB(e),put:OB(e)}}function SB(e){return async function*(r={}){yield*(await e.post("stats/bw",{signal:r.signal,searchParams:X(r),headers:r.headers,transform:i=>({totalIn:BigInt(i.TotalIn),totalOut:BigInt(i.TotalOut),rateIn:parseFloat(i.RateIn),rateOut:parseFloat(i.RateOut)})})).ndjson()}}function PB(e){return{bitswap:kP(e),repo:JP(e),bw:SB(e)}}function TB(e){return async function(r={}){await(await e.post("shutdown",{signal:r.signal,searchParams:X(r),headers:r.headers})).text()}}function CB(e){return async function(r={}){const n=await e.post("swarm/addrs",{signal:r.signal,searchParams:X(r),headers:r.headers}),{Addrs:i}=await n.json();return Object.keys(i).map(o=>({id:Tt(o),addrs:(i[o]??[]).map(a=>wt(a))}))}}function RB(e){return async function(r,n={}){const i=await e.post("swarm/connect",{signal:n.signal,searchParams:X({arg:r,...n}),headers:n.headers}),{Strings:o}=await i.json();return o??[]}}function AB(e){return async function(r,n={}){const i=await e.post("swarm/disconnect",{signal:n.signal,searchParams:X({arg:r,...n}),headers:n.headers}),{Strings:o}=await i.json();return o??[]}}function IB(e){return async function(r={}){const n=await e.post("swarm/addrs/local",{signal:r.signal,searchParams:X(r),headers:r.headers}),{Strings:i}=await n.json();return(i??[]).map(o=>wt(o))}}function jB(e){return async function(r={}){return((await(await e.post("swarm/peers",{signal:r.signal,searchParams:X(r),headers:r.headers})).json()).Peers??[]).map(o=>({addr:wt(o.Addr),peer:Tt(o.Peer),muxer:o.Muxer,latency:o.Latency,streams:o.Streams,direction:o.Direction==null?void 0:o.Direction===0?"inbound":"outbound",identify:o.Identify}))}}function NB(e){return{addrs:CB(e),connect:RB(e),disconnect:AB(e),localAddrs:IB(e),peers:jB(e)}}function kB(e){return async function(r={}){const n=await e.post("version",{signal:r.signal,searchParams:X(r),headers:r.headers});return{...ze(await n.json()),"ipfs-http-client":"1.0.0"}}}class MB{bases;codecs;hashers;bitswap;block;bootstrap;config;dag;dht;diag;files;key;log;name;object;pin;pubsub;refs;repo;routing;stats;swarm;add;addAll;cat;get;ls;id;version;stop;ping;resolve;commands;mount;isOnline;getEndpointConfig;constructor(t){const r=new sU(t),n={name:ni.name,code:ni.code,encode:u=>u,decode:u=>u},i=Object.values(Ol);(t.ipld?.bases??[]).forEach(u=>i.push(u)),this.bases=new lU({bases:i,loadBase:t.ipld?.loadBase});const o=Object.values($A);[qj,yC,mj,BN,n].concat(t.ipld?.codecs??[]).forEach(u=>{o.push(u)}),this.codecs=new dU({codecs:o,loadCodec:t.ipld?.loadCodec});const a=Object.values(VA);(t.ipld?.hashers??[]).forEach(u=>a.push(u)),this.hashers=new vU({hashers:a,loadHasher:t.ipld?.loadHasher}),this.bitswap=iD(r),this.block=cD(r),this.bootstrap=hD(r),this.config=ED(r),this.dag=jD(r,this.codecs),this.dht=FD(r),this.diag=HD(r),this.files=iL(r),this.key=vL(r),this.log=yU(r),this.name=RU(r),this.object=NU(r,this.codecs),this.pin=QU(r),this.pubsub=fB(r),this.refs=hB(r),this.repo=_B(r),this.routing=EB(r),this.stats=PB(r),this.swarm=NB(r),this.add=dk(r),this.addAll=TS(r),this.cat=vD(r),this.get=aL(r),this.ls=mU(r),this.id=LP(r),this.version=kB(r),this.stop=TB(r),this.ping=JU(r),this.resolve=bB(r),this.commands=pD(r),this.mount=wU(r),this.isOnline=uL(r),this.getEndpointConfig=oL(r)}}function DB(e){return new MB(e)}function LB(e={}){return(typeof e=="string"||Pl(e)||e instanceof URL)&&(e={url:e}),DB(e)}let Fd=null;const Uq=()=>{if(!Fd)try{Fd=R0.driver("neo4j+s://neo4j.mimis.dhappy.org",R0.auth.basic($d.neo4jUser,$d.neo4jPass))}catch(e){throw console.error(`Couldnt generate Neo4j driver: "${e.message}".`),e}return Fd};let Vd=null;const Bq=()=>(Vd||(Vd=LB($d.ipfsAPI.replace(/\/+$/,""))),Vd);export{Ce as $,YB as A,dP as B,fP as C,W0 as D,so as E,dq as F,NP as G,BS as H,vt as I,xS as J,Pq as K,Xo as L,xk as M,bq as N,Fk as O,Ad as P,LS as Q,MA as R,Rq as S,pq as T,ht as U,ho as V,Cq as W,mP as X,Tq as Y,n2 as Z,df as _,Bq as a,gq as a$,Mt as a0,de as a1,sq as a2,AA as a3,qj as a4,TA as a5,pj as a6,xA as a7,af as a8,vn as a9,pI as aA,dI as aB,OI as aC,AI as aD,uI as aE,JL as aF,_c as aG,WM as aH,ua as aI,Rv as aJ,HM as aK,al as aL,TD as aM,of as aN,wt as aO,Tt as aP,QM as aQ,SS as aR,XM as aS,Pl as aT,zB as aU,fq as aV,yq as aW,lq as aX,nq as aY,hq as aZ,rq as a_,rk as aa,Lq as ab,GB as ac,QE as ad,tI as ae,sv as af,uv as ag,tf as ah,eS as ai,RI as aj,rS as ak,CI as al,Hd as am,vI as an,Sl as ao,bI as ap,_I as aq,wI as ar,gI as as,tS as at,yI as au,av,nI as aw,Wd as ax,dc as ay,JE as az,Jl as b,Oq as b0,wq as b1,Aq as b2,Mq as b3,Dt as b4,cf as b5,Nq as b6,Iq as b7,jq as b8,Sq as b9,Ct as ba,WB as bb,XB as bc,QB as bd,uq as be,aq as bf,oq as bg,mq as bh,xN as bi,eq as bj,nk as bk,vq as bl,iq as bm,Ol as bn,kq as bo,oj as bp,RA as bq,sf as br,Dq as bs,Lj as c,Bj as d,Uj as e,HE as f,Uq as g,jA as h,ni as i,mj as j,qc as k,aS as l,uS as m,HB as n,JA as o,dS as p,eI as q,_v as r,ef as s,fn as t,$B as u,ii as v,ZE as w,cM as x,vP as y,Gn as z};

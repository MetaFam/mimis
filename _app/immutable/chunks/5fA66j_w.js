var RP=Object.defineProperty;var By=e=>{throw TypeError(e)};var jP=(e,r,t)=>r in e?RP(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var m=(e,r,t)=>jP(e,typeof r!="symbol"?r+"":r,t),Vy=(e,r,t)=>r.has(e)||By("Cannot "+t);var ir=(e,r,t)=>(Vy(e,r,"read from private field"),t?t.call(e):r.get(e)),xi=(e,r,t)=>r.has(e)?By("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,t),Bi=(e,r,t,n)=>(Vy(e,r,"write to private field"),n?n.call(e,t):r.set(e,t),t);import{c as f,g as bl}from"./BosuxZz1.js";import{b as B0,a as $P}from"./DErBbmgI.js";import{r as NP,y as kP,j as MP}from"./DquymGsT.js";import{F as V0,a as Uh,v as DP,b as LP,c as UP,p as FP,w as xP,m as Wy,d as Vi,e as ar,f as Fh,n as zy,g as BP,h as Hy,i as ur,j as Wt,k as VP,s as Mc}from"./D2jI5Alk.js";import{s as Pc}from"./CR3SSK6x.js";var W0={exports:{}};/*!
 * Toastify js 1.12.0
 * https://github.com/apvarun/toastify-js
 * @license MIT licensed
 *
 * Copyright (C) 2018 Varun A P
 */(function(e){(function(r,t){e.exports?e.exports=t():r.Toastify=t()})(f,function(r){var t=function(a){return new t.lib.init(a)},n="1.12.0";t.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},t.lib=t.prototype={toastify:n,constructor:t,init:function(a){return a||(a={}),this.options={},this.toastElement=null,this.options.text=a.text||t.defaults.text,this.options.node=a.node||t.defaults.node,this.options.duration=a.duration===0?0:a.duration||t.defaults.duration,this.options.selector=a.selector||t.defaults.selector,this.options.callback=a.callback||t.defaults.callback,this.options.destination=a.destination||t.defaults.destination,this.options.newWindow=a.newWindow||t.defaults.newWindow,this.options.close=a.close||t.defaults.close,this.options.gravity=a.gravity==="bottom"?"toastify-bottom":t.defaults.gravity,this.options.positionLeft=a.positionLeft||t.defaults.positionLeft,this.options.position=a.position||t.defaults.position,this.options.backgroundColor=a.backgroundColor||t.defaults.backgroundColor,this.options.avatar=a.avatar||t.defaults.avatar,this.options.className=a.className||t.defaults.className,this.options.stopOnFocus=a.stopOnFocus===void 0?t.defaults.stopOnFocus:a.stopOnFocus,this.options.onClick=a.onClick||t.defaults.onClick,this.options.offset=a.offset||t.defaults.offset,this.options.escapeMarkup=a.escapeMarkup!==void 0?a.escapeMarkup:t.defaults.escapeMarkup,this.options.ariaLive=a.ariaLive||t.defaults.ariaLive,this.options.style=a.style||t.defaults.style,a.backgroundColor&&(this.options.style.background=a.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var a=document.createElement("div");a.className="toastify on "+this.options.className,this.options.position?a.className+=" toastify-"+this.options.position:this.options.positionLeft===!0?(a.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):a.className+=" toastify-right",a.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.');for(var u in this.options.style)a.style[u]=this.options.style[u];if(this.options.ariaLive&&a.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)a.appendChild(this.options.node);else if(this.options.escapeMarkup?a.innerText=this.options.text:a.innerHTML=this.options.text,this.options.avatar!==""){var c=document.createElement("img");c.src=this.options.avatar,c.className="toastify-avatar",this.options.position=="left"||this.options.positionLeft===!0?a.appendChild(c):a.insertAdjacentElement("afterbegin",c)}if(this.options.close===!0){var s=document.createElement("button");s.type="button",s.setAttribute("aria-label","Close"),s.className="toast-close",s.innerHTML="&#10006;",s.addEventListener("click",(function(b){b.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}).bind(this));var l=window.innerWidth>0?window.innerWidth:screen.width;(this.options.position=="left"||this.options.positionLeft===!0)&&l>360?a.insertAdjacentElement("afterbegin",s):a.appendChild(s)}if(this.options.stopOnFocus&&this.options.duration>0){var d=this;a.addEventListener("mouseover",function(b){window.clearTimeout(a.timeOutValue)}),a.addEventListener("mouseleave",function(){a.timeOutValue=window.setTimeout(function(){d.removeElement(a)},d.options.duration)})}if(typeof this.options.destination<"u"&&a.addEventListener("click",(function(b){b.stopPropagation(),this.options.newWindow===!0?window.open(this.options.destination,"_blank"):window.location=this.options.destination}).bind(this)),typeof this.options.onClick=="function"&&typeof this.options.destination>"u"&&a.addEventListener("click",(function(b){b.stopPropagation(),this.options.onClick()}).bind(this)),typeof this.options.offset=="object"){var h=o("x",this.options),p=o("y",this.options),v=this.options.position=="left"?h:"-"+h,_=this.options.gravity=="toastify-top"?p:"-"+p;a.style.transform="translate("+v+","+_+")"}return a},showToast:function(){this.toastElement=this.buildToast();var a;if(typeof this.options.selector=="string"?a=document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||typeof ShadowRoot<"u"&&this.options.selector instanceof ShadowRoot?a=this.options.selector:a=document.body,!a)throw"Root element is not defined";var u=t.defaults.oldestFirst?a.firstChild:a.lastChild;return a.insertBefore(this.toastElement,u),t.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout((function(){this.removeElement(this.toastElement)}).bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(a){a.className=a.className.replace(" on",""),window.setTimeout((function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),a.parentNode&&a.parentNode.removeChild(a),this.options.callback.call(a),t.reposition()}).bind(this),400)}},t.reposition=function(){for(var a={top:15,bottom:15},u={top:15,bottom:15},c={top:15,bottom:15},s=document.getElementsByClassName("toastify"),l,d=0;d<s.length;d++){i(s[d],"toastify-top")===!0?l="toastify-top":l="toastify-bottom";var h=s[d].offsetHeight;l=l.substr(9,l.length-1);var p=15,v=window.innerWidth>0?window.innerWidth:screen.width;v<=360?(s[d].style[l]=c[l]+"px",c[l]+=h+p):i(s[d],"toastify-left")===!0?(s[d].style[l]=a[l]+"px",a[l]+=h+p):(s[d].style[l]=u[l]+"px",u[l]+=h+p)}return this};function o(a,u){return u.offset[a]?isNaN(u.offset[a])?u.offset[a]:u.offset[a]+"px":"0px"}function i(a,u){return!a||typeof u!="string"?!1:!!(a.className&&a.className.trim().split(/\s+/gi).indexOf(u)>-1)}return t.lib.init.prototype=t.lib,t})})(W0);var WP=W0.exports;const uoe=bl(WP);var Bp={},hr={},G={},le={},Lt={},pr={};Object.defineProperty(pr,"__esModule",{value:!0});pr.getBrokenObjectReason=pr.isBrokenObject=pr.createBrokenObject=void 0;var z0="__isBrokenObject__",H0="__reason__";function zP(e,r){r===void 0&&(r={});var t=function(){throw e};return new Proxy(r,{get:function(n,o){if(o===z0)return!0;if(o===H0)return e;if(o==="toJSON")return;t()},set:t,apply:t,construct:t,defineProperty:t,deleteProperty:t,getOwnPropertyDescriptor:t,getPrototypeOf:t,has:t,isExtensible:t,ownKeys:t,preventExtensions:t,setPrototypeOf:t})}pr.createBrokenObject=zP;function HP(e){return e!==null&&typeof e=="object"&&e[z0]===!0}pr.isBrokenObject=HP;function qP(e){return e[H0]}pr.getBrokenObjectReason=qP;Object.defineProperty(Lt,"__esModule",{value:!0});Lt.stringify=void 0;var qy=pr;function GP(e,r){return JSON.stringify(e,function(t,n){return(0,qy.isBrokenObject)(n)?{__isBrokenObject__:!0,__reason__:(0,qy.getBrokenObjectReason)(n)}:typeof n=="bigint"?"".concat(n,"n"):(r==null?void 0:r.sortedElements)===!0&&typeof n=="object"&&!Array.isArray(n)?Object.keys(n).sort().reduce(function(o,i){return o[i]=n[i],o},{}):(r==null?void 0:r.useCustomToString)===!0&&typeof n=="object"&&!Array.isArray(n)&&typeof n.toString=="function"&&n.toString!==Object.prototype.toString?n==null?void 0:n.toString():n})}Lt.stringify=GP;var Yv={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.rawPolyfilledDiagnosticRecord=void 0,e.rawPolyfilledDiagnosticRecord={OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"},Object.freeze(e.rawPolyfilledDiagnosticRecord)})(Yv);var q0=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),KP=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),YP=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),ZP=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&KP(r,e,t);return YP(r,e),r};Object.defineProperty(le,"__esModule",{value:!0});le.PROTOCOL_ERROR=le.SESSION_EXPIRED=le.SERVICE_UNAVAILABLE=le.GQLError=le.Neo4jError=le.isRetriableError=le.newGQLError=le.newError=void 0;var QP=ZP(Lt),G0=Yv,K0={DATABASE_ERROR:"DATABASE_ERROR",CLIENT_ERROR:"CLIENT_ERROR",TRANSIENT_ERROR:"TRANSIENT_ERROR",UNKNOWN:"UNKNOWN"};Object.freeze(K0);var XP=Object.values(K0),Y0="ServiceUnavailable";le.SERVICE_UNAVAILABLE=Y0;var Z0="SessionExpired";le.SESSION_EXPIRED=Z0;var JP="ProtocolError";le.PROTOCOL_ERROR=JP;var eC="N/A",Zv=function(e){q0(r,e);function r(t,n,o,i,a){var u=this,c;return u=e.call(this,t,a!=null?{cause:a}:void 0)||this,u.constructor=r,u.__proto__=r.prototype,u.cause=a??void 0,u.gqlStatus=n,u.gqlStatusDescription=o,u.diagnosticRecord=i,u.classification=sC(u.diagnosticRecord),u.rawClassification=(c=i==null?void 0:i._classification)!==null&&c!==void 0?c:void 0,u.name="GQLError",u}return Object.defineProperty(r.prototype,"diagnosticRecordAsJsonString",{get:function(){return QP.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),r}(Error);le.GQLError=Zv;var Qv=function(e){q0(r,e);function r(t,n,o,i,a,u){var c=e.call(this,t,o,i,a,u)||this;return c.constructor=r,c.__proto__=r.prototype,c.code=n,c.name="Neo4jError",c.retriable=oC(n),c}return r.isRetriable=function(t){return t!=null&&t instanceof r&&t.retriable},r}(Zv);le.Neo4jError=Qv;function tC(e,r,t,n,o,i){return new Qv(e,r??eC,n??"50N42",o??"error: general processing exception - unexpected error. "+e,i??G0.rawPolyfilledDiagnosticRecord,t)}le.newError=tC;function rC(e,r,t,n,o){return new Zv(e,t??"50N42",n??"error: general processing exception - unexpected error. "+e,o??G0.rawPolyfilledDiagnosticRecord,r)}le.newGQLError=rC;var nC=Qv.isRetriable;le.isRetriableError=nC;function oC(e){return e===Y0||e===Z0||aC(e)||iC(e)}function iC(e){return(e==null?void 0:e.includes("TransientError"))===!0}function aC(e){return e==="Neo.ClientError.Security.AuthorizationExpired"}function sC(e){return e===void 0||e._classification===void 0?"UNKNOWN":XP.includes(e._classification)?e==null?void 0:e._classification:"UNKNOWN"}var xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.toString=xe.toNumber=xe.inSafeRange=xe.isInt=xe.int=void 0;var Wi=le,Gy=new Map,Jr=function(){function e(r,t){this.low=r??0,this.high=t??0}return e.prototype.inSafeRange=function(){return this.greaterThanOrEqual(e.MIN_SAFE_VALUE)&&this.lessThanOrEqual(e.MAX_SAFE_VALUE)},e.prototype.toInt=function(){return this.low},e.prototype.toNumber=function(){return this.high*In+(this.low>>>0)},e.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(In)+BigInt(this.low>>>0);var r=this.negate();return BigInt(-1)*(BigInt(r.high>>>0)*BigInt(In)+BigInt(r.low>>>0))},e.prototype.toNumberOrInfinity=function(){return this.lessThan(e.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(e.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},e.prototype.toString=function(r){if(r=r??10,r<2||r>36)throw RangeError("radix out of range: "+r.toString());if(this.isZero())return"0";var t;if(this.isNegative())if(this.equals(e.MIN_VALUE)){var n=e.fromNumber(r),o=this.div(n);return t=o.multiply(n).subtract(this),o.toString(r)+t.toInt().toString(r)}else return"-"+this.negate().toString(r);var i=e.fromNumber(Math.pow(r,6));t=this;for(var a="";;){var u=t.div(i),c=t.subtract(u.multiply(i)).toInt()>>>0,s=c.toString(r);if(t=u,t.isZero())return s+a;for(;s.length<6;)s="0"+s;a=""+s+a}},e.prototype.valueOf=function(){return this.toBigInt()},e.prototype.getHighBits=function(){return this.high},e.prototype.getLowBits=function(){return this.low},e.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(e.MIN_VALUE)?64:this.negate().getNumBitsAbs();var r=this.high!==0?this.high:this.low,t=0;for(t=31;t>0&&!(r&1<<t);t--);return this.high!==0?t+33:t+1},e.prototype.isZero=function(){return this.high===0&&this.low===0},e.prototype.isNegative=function(){return this.high<0},e.prototype.isPositive=function(){return this.high>=0},e.prototype.isOdd=function(){return(this.low&1)===1},e.prototype.isEven=function(){return(this.low&1)===0},e.prototype.equals=function(r){var t=e.fromValue(r);return this.high===t.high&&this.low===t.low},e.prototype.notEquals=function(r){return!this.equals(r)},e.prototype.lessThan=function(r){return this.compare(r)<0},e.prototype.lessThanOrEqual=function(r){return this.compare(r)<=0},e.prototype.greaterThan=function(r){return this.compare(r)>0},e.prototype.greaterThanOrEqual=function(r){return this.compare(r)>=0},e.prototype.compare=function(r){var t=e.fromValue(r);if(this.equals(t))return 0;var n=this.isNegative(),o=t.isNegative();return n&&!o?-1:!n&&o?1:this.subtract(t).isNegative()?-1:1},e.prototype.negate=function(){return this.equals(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.add=function(r){var t=e.fromValue(r),n=this.high>>>16,o=this.high&65535,i=this.low>>>16,a=this.low&65535,u=t.high>>>16,c=t.high&65535,s=t.low>>>16,l=t.low&65535,d=0,h=0,p=0,v=0;return v+=a+l,p+=v>>>16,v&=65535,p+=i+s,h+=p>>>16,p&=65535,h+=o+c,d+=h>>>16,h&=65535,d+=n+u,d&=65535,e.fromBits(p<<16|v,d<<16|h)},e.prototype.subtract=function(r){var t=e.fromValue(r);return this.add(t.negate())},e.prototype.multiply=function(r){if(this.isZero())return e.ZERO;var t=e.fromValue(r);if(t.isZero())return e.ZERO;if(this.equals(e.MIN_VALUE))return t.isOdd()?e.MIN_VALUE:e.ZERO;if(t.equals(e.MIN_VALUE))return this.isOdd()?e.MIN_VALUE:e.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(Zy)&&t.lessThan(Zy))return e.fromNumber(this.toNumber()*t.toNumber());var n=this.high>>>16,o=this.high&65535,i=this.low>>>16,a=this.low&65535,u=t.high>>>16,c=t.high&65535,s=t.low>>>16,l=t.low&65535,d=0,h=0,p=0,v=0;return v+=a*l,p+=v>>>16,v&=65535,p+=i*l,h+=p>>>16,p&=65535,p+=a*s,h+=p>>>16,p&=65535,h+=o*l,d+=h>>>16,h&=65535,h+=i*s,d+=h>>>16,h&=65535,h+=a*c,d+=h>>>16,h&=65535,d+=n*l+o*s+i*c+a*u,d&=65535,e.fromBits(p<<16|v,d<<16|h)},e.prototype.div=function(r){var t=e.fromValue(r);if(t.isZero())throw(0,Wi.newError)("division by zero");if(this.isZero())return e.ZERO;var n,o,i;if(this.equals(e.MIN_VALUE)){if(t.equals(e.ONE)||t.equals(e.NEG_ONE))return e.MIN_VALUE;if(t.equals(e.MIN_VALUE))return e.ONE;var a=this.shiftRight(1);return n=a.div(t).shiftLeft(1),n.equals(e.ZERO)?t.isNegative()?e.ONE:e.NEG_ONE:(o=this.subtract(t.multiply(n)),i=n.add(o.div(t)),i)}else if(t.equals(e.MIN_VALUE))return e.ZERO;if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();for(i=e.ZERO,o=this;o.greaterThanOrEqual(t);){n=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var u=Math.ceil(Math.log(n)/Math.LN2),c=u<=48?1:Math.pow(2,u-48),s=e.fromNumber(n),l=s.multiply(t);l.isNegative()||l.greaterThan(o);)n-=c,s=e.fromNumber(n),l=s.multiply(t);s.isZero()&&(s=e.ONE),i=i.add(s),o=o.subtract(l)}return i},e.prototype.modulo=function(r){var t=e.fromValue(r);return this.subtract(this.div(t).multiply(t))},e.prototype.not=function(){return e.fromBits(~this.low,~this.high)},e.prototype.and=function(r){var t=e.fromValue(r);return e.fromBits(this.low&t.low,this.high&t.high)},e.prototype.or=function(r){var t=e.fromValue(r);return e.fromBits(this.low|t.low,this.high|t.high)},e.prototype.xor=function(r){var t=e.fromValue(r);return e.fromBits(this.low^t.low,this.high^t.high)},e.prototype.shiftLeft=function(r){var t=e.toNumber(r);return(t&=63)===0?e.ZERO:t<32?e.fromBits(this.low<<t,this.high<<t|this.low>>>32-t):e.fromBits(0,this.low<<t-32)},e.prototype.shiftRight=function(r){var t=e.toNumber(r),n=e.toNumber(r);return(t&=63)===0?e.ZERO:n<32?e.fromBits(this.low>>>t|this.high<<32-t,this.high>>t):e.fromBits(this.high>>t-32,this.high>=0?0:-1)},e.isInteger=function(r){return(r==null?void 0:r.__isInteger__)===!0},e.fromInt=function(r){var t;if(r=r|0,r>=-128&&r<128&&(t=Gy.get(r),t!=null))return t;var n=new e(r,r<0?-1:0);return r>=-128&&r<128&&Gy.set(r,n),n},e.fromBits=function(r,t){return new e(r,t)},e.fromNumber=function(r){return isNaN(r)||!isFinite(r)?e.ZERO:r<=-Yy?e.MIN_VALUE:r+1>=Yy?e.MAX_VALUE:r<0?e.fromNumber(-r).negate():new e(r%In|0,r/In|0)},e.fromString=function(r,t,n){var o=n===void 0?{}:n,i=o.strictStringValidation;if(r.length===0)throw(0,Wi.newError)("number format error: empty string");if(r==="NaN"||r==="Infinity"||r==="+Infinity"||r==="-Infinity")return e.ZERO;if(t=t??10,t<2||t>36)throw(0,Wi.newError)("radix out of range: "+t.toString());var a;if((a=r.indexOf("-"))>0)throw(0,Wi.newError)('number format error: interior "-" character: '+r);if(a===0)return e.fromString(r.substring(1),t).negate();for(var u=e.fromNumber(Math.pow(t,8)),c=e.ZERO,s=0;s<r.length;s+=8){var l=Math.min(8,r.length-s),d=r.substring(s,s+l),h=parseInt(d,t);if(i===!0&&!cC(d,h,t))throw(0,Wi.newError)('number format error: "'.concat(d,'" is NaN in radix ').concat(t,": ").concat(r));if(l<8){var p=e.fromNumber(Math.pow(t,l));c=c.multiply(p).add(e.fromNumber(h))}else c=c.multiply(u),c=c.add(e.fromNumber(h))}return c},e.fromValue=function(r,t){return t===void 0&&(t={}),r instanceof e?r:typeof r=="number"?(t.ceilFloat===!0&&(r=Math.ceil(r)),e.fromNumber(r)):typeof r=="string"?e.fromString(r,void 0,t):typeof r=="bigint"?e.fromString(r.toString()):new e(r.low,r.high)},e.toNumber=function(r){switch(typeof r){case"number":return r;case"bigint":return Number(r);default:return e.fromValue(r).toNumber()}},e.toString=function(r,t){return e.fromValue(r).toString(t)},e.inSafeRange=function(r){return e.fromValue(r).inSafeRange()},e.ZERO=e.fromInt(0),e.ONE=e.fromInt(1),e.NEG_ONE=e.fromInt(-1),e.MAX_VALUE=e.fromBits(-1,2147483647),e.MIN_VALUE=e.fromBits(0,-2147483648),e.MIN_SAFE_VALUE=e.fromBits(1,-2097152),e.MAX_SAFE_VALUE=e.fromBits(-1,2097151),e.__isInteger__=!0,e}();function uC(e,r,t){var n=e.toString(r),o=Math.max(t-n.length,0),i="0".repeat(o);return"".concat(i).concat(n)}function cC(e,r,t){return!Number.isNaN(e)&&!Number.isNaN(r)&&uC(r,t,e.length)===e.toLowerCase()}Object.defineProperty(Jr.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var Ky=65536,lC=1<<24,In=Ky*Ky,fC=In*In,Yy=fC/2,Zy=Jr.fromInt(lC),dC=Jr.fromValue;xe.int=dC;var hC=Jr.isInteger;xe.isInt=hC;var pC=Jr.inSafeRange;xe.inSafeRange=pC;var vC=Jr.toNumber;xe.toNumber=vC;var _C=Jr.toString;xe.toString=_C;xe.default=Jr;var ge={},Xv={},re={},yC=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),bC=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),mC=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&yC(r,e,t);return bC(r,e),r},gC=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(re,"__esModule",{value:!0});re.ENCRYPTION_OFF=re.ENCRYPTION_ON=re.equals=re.validateQueryAndParameters=re.toNumber=re.assertValidDate=re.assertNumberOrInteger=re.assertNumber=re.assertString=re.assertObject=re.isString=re.isObject=re.isEmptyObjectOrNull=void 0;var Vp=mC(xe),Ln=Lt,wC="ENCRYPTION_ON";re.ENCRYPTION_ON=wC;var OC="ENCRYPTION_OFF";re.ENCRYPTION_OFF=OC;function EC(e){if(e===null)return!0;if(!ml(e))return!1;for(var r in e)if(e[r]!==void 0)return!1;return!0}re.isEmptyObjectOrNull=EC;function ml(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}re.isObject=ml;function SC(e,r,t){var n,o,i="",a=r??{},u=(n=t==null?void 0:t.skipAsserts)!==null&&n!==void 0?n:!1;return typeof e=="string"?i=e:e instanceof String?i=e.toString():typeof e=="object"&&e.text!=null&&(i=e.text,a=(o=e.parameters)!==null&&o!==void 0?o:{}),u||(IC(i),RC(a)),{validatedQuery:i,params:a}}re.validateQueryAndParameters=SC;function TC(e,r){if(!ml(e))throw new TypeError(r+" expected to be an object but was: "+(0,Ln.stringify)(e));return e}re.assertObject=TC;function Q0(e,r){if(!X0(e))throw new TypeError((0,Ln.stringify)(r)+" expected to be string but was: "+(0,Ln.stringify)(e));return e}re.assertString=Q0;function PC(e,r){if(typeof e!="number")throw new TypeError(r+" expected to be a number but was: "+(0,Ln.stringify)(e));return e}re.assertNumber=PC;function CC(e,r){if(typeof e!="number"&&typeof e!="bigint"&&!(0,Vp.isInt)(e))throw new TypeError(r+" expected to be either a number or an Integer object but was: "+(0,Ln.stringify)(e));return e}re.assertNumberOrInteger=CC;function AC(e,r){if(Object.prototype.toString.call(e)!=="[object Date]")throw new TypeError(r+" expected to be a standard JavaScript Date but was: "+(0,Ln.stringify)(e));if(Number.isNaN(e.getTime()))throw new TypeError(r+" expected to be valid JavaScript Date but its time was NaN: "+(0,Ln.stringify)(e));return e}re.assertValidDate=AC;function IC(e){if(Q0(e,"Cypher query"),e.trim().length===0)throw new TypeError("Cypher query is expected to be a non-empty string.")}function RC(e){if(!ml(e)){var r=e.constructor!=null?" "+e.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(r," ").concat(JSON.stringify(e)))}}function X0(e){return Object.prototype.toString.call(e)==="[object String]"}re.isString=X0;function J0(e,r){var t,n;if(e===r)return!0;if(e===null||r===null)return!1;if(typeof e=="object"&&typeof r=="object"){var o=Object.keys(e),i=Object.keys(r);if(o.length!==i.length)return!1;try{for(var a=gC(o),u=a.next();!u.done;u=a.next()){var c=u.value;if(!J0(e[c],r[c]))return!1}}catch(s){t={error:s}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0}return!1}re.equals=J0;function jC(e){return e instanceof Vp.default?e.toNumber():typeof e=="bigint"?(0,Vp.int)(e).toNumber():e}re.toNumber=jC;(function(e){var r=f&&f.__createBinding||(Object.create?function(y,P,M,x){x===void 0&&(x=M);var K=Object.getOwnPropertyDescriptor(P,M);(!K||("get"in K?!P.__esModule:K.writable||K.configurable))&&(K={enumerable:!0,get:function(){return P[M]}}),Object.defineProperty(y,x,K)}:function(y,P,M,x){x===void 0&&(x=M),y[x]=P[M]}),t=f&&f.__setModuleDefault||(Object.create?function(y,P){Object.defineProperty(y,"default",{enumerable:!0,value:P})}:function(y,P){y.default=P}),n=f&&f.__importStar||function(y){if(y&&y.__esModule)return y;var P={};if(y!=null)for(var M in y)M!=="default"&&Object.prototype.hasOwnProperty.call(y,M)&&r(P,y,M);return t(P,y),P};Object.defineProperty(e,"__esModule",{value:!0}),e.floorMod=e.floorDiv=e.assertValidZoneId=e.assertValidNanosecond=e.assertValidSecond=e.assertValidMinute=e.assertValidHour=e.assertValidDay=e.assertValidMonth=e.assertValidYear=e.timeZoneOffsetInSeconds=e.totalNanoseconds=e.newDate=e.toStandardDate=e.isoStringToStandardDate=e.dateToIsoString=e.timeZoneOffsetToIsoString=e.timeToIsoString=e.durationToIsoString=e.dateToEpochDay=e.localDateTimeToEpochSecond=e.localTimeToNanoOfDay=e.normalizeNanosecondsForDuration=e.normalizeSecondsForDuration=e.SECONDS_PER_DAY=e.DAYS_PER_400_YEAR_CYCLE=e.DAYS_0000_TO_1970=e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE=e.NANOS_PER_MILLISECOND=e.NANOS_PER_SECOND=e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE=e.MINUTES_PER_HOUR=e.NANOSECOND_OF_SECOND_RANGE=e.SECOND_OF_MINUTE_RANGE=e.MINUTE_OF_HOUR_RANGE=e.HOUR_OF_DAY_RANGE=e.DAY_OF_MONTH_RANGE=e.MONTH_OF_YEAR_RANGE=e.YEAR_RANGE=void 0;var o=n(xe),i=le,a=re,u=function(){function y(P,M){this._minNumber=P,this._maxNumber=M,this._minInteger=(0,o.int)(P),this._maxInteger=(0,o.int)(M)}return y.prototype.contains=function(P){if((0,o.isInt)(P)&&P instanceof o.default)return P.greaterThanOrEqual(this._minInteger)&&P.lessThanOrEqual(this._maxInteger);if(typeof P=="bigint"){var M=(0,o.int)(P);return M.greaterThanOrEqual(this._minInteger)&&M.lessThanOrEqual(this._maxInteger)}else return P>=this._minNumber&&P<=this._maxNumber},y.prototype.toString=function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")},y}();e.YEAR_RANGE=new u(-999999999,999999999),e.MONTH_OF_YEAR_RANGE=new u(1,12),e.DAY_OF_MONTH_RANGE=new u(1,31),e.HOUR_OF_DAY_RANGE=new u(0,23),e.MINUTE_OF_HOUR_RANGE=new u(0,59),e.SECOND_OF_MINUTE_RANGE=new u(0,59),e.NANOSECOND_OF_SECOND_RANGE=new u(0,999999999),e.MINUTES_PER_HOUR=60,e.SECONDS_PER_MINUTE=60,e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE*e.MINUTES_PER_HOUR,e.NANOS_PER_SECOND=1e9,e.NANOS_PER_MILLISECOND=1e6,e.NANOS_PER_MINUTE=e.NANOS_PER_SECOND*e.SECONDS_PER_MINUTE,e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE*e.MINUTES_PER_HOUR,e.DAYS_0000_TO_1970=719528,e.DAYS_PER_400_YEAR_CYCLE=146097,e.SECONDS_PER_DAY=86400;function c(y,P){return(0,o.int)(y).add(R(P,e.NANOS_PER_SECOND))}e.normalizeSecondsForDuration=c;function s(y){return V(y,e.NANOS_PER_SECOND)}e.normalizeNanosecondsForDuration=s;function l(y,P,M,x){y=(0,o.int)(y),P=(0,o.int)(P),M=(0,o.int)(M),x=(0,o.int)(x);var K=y.multiply(e.NANOS_PER_HOUR);return K=K.add(P.multiply(e.NANOS_PER_MINUTE)),K=K.add(M.multiply(e.NANOS_PER_SECOND)),K.add(x)}e.localTimeToNanoOfDay=l;function d(y,P,M,x,K,me,je){var yt=h(y,P,M),Cr=T(x,K,me);return yt.multiply(e.SECONDS_PER_DAY).add(Cr)}e.localDateTimeToEpochSecond=d;function h(y,P,M){y=(0,o.int)(y),P=(0,o.int)(P),M=(0,o.int)(M);var x=y.multiply(365);return y.greaterThanOrEqual(0)?x=x.add(y.add(3).div(4).subtract(y.add(99).div(100)).add(y.add(399).div(400))):x=x.subtract(y.div(-4).subtract(y.div(-100)).add(y.div(-400))),x=x.add(P.multiply(367).subtract(362).div(12)),x=x.add(M.subtract(1)),P.greaterThan(2)&&(x=x.subtract(1),C(y)||(x=x.subtract(1))),x.subtract(e.DAYS_0000_TO_1970)}e.dateToEpochDay=h;function p(y,P,M,x){var K=Z(y),me=Z(P),je=H(M,x);return"P".concat(K,"M").concat(me,"DT").concat(je,"S")}e.durationToIsoString=p;function v(y,P,M,x){var K=Z(y,2),me=Z(P,2),je=Z(M,2),yt=F(x);return"".concat(K,":").concat(me,":").concat(je).concat(yt)}e.timeToIsoString=v;function _(y){if(y=(0,o.int)(y),y.equals(0))return"Z";var P=y.isNegative();P&&(y=y.multiply(-1));var M=P?"-":"+",x=Z(y.div(e.SECONDS_PER_HOUR),2),K=Z(y.div(e.SECONDS_PER_MINUTE).modulo(e.MINUTES_PER_HOUR),2),me=y.modulo(e.SECONDS_PER_MINUTE),je=me.equals(0)?null:Z(me,2);return je!=null?"".concat(M).concat(x,":").concat(K,":").concat(je):"".concat(M).concat(x,":").concat(K)}e.timeZoneOffsetToIsoString=_;function b(y,P,M){var x=te(y),K=Z(P,2),me=Z(M,2);return"".concat(x,"-").concat(K,"-").concat(me)}e.dateToIsoString=b;function w(y){return new Date(y)}e.isoStringToStandardDate=w;function E(y){return new Date(y)}e.toStandardDate=E;function S(y){return new Date(y)}e.newDate=S;function O(y,P){P=P??0;var M=y.getMilliseconds()*e.NANOS_PER_MILLISECOND;return se(P,M)}e.totalNanoseconds=O;function A(y){var P=y.getSeconds()-y.getUTCSeconds(),M=y.getMinutes()-y.getUTCMinutes(),x=y.getHours()-y.getUTCHours(),K=$(y);return x*e.SECONDS_PER_HOUR+M*e.SECONDS_PER_MINUTE+P+K*e.SECONDS_PER_DAY}e.timeZoneOffsetInSeconds=A;function $(y){return y.getMonth()===y.getUTCMonth()?y.getDate()-y.getUTCDate():y.getFullYear()>y.getUTCFullYear()||y.getMonth()>y.getUTCMonth()&&y.getFullYear()===y.getUTCFullYear()?y.getDate()+I(y.getUTCMonth(),y.getUTCFullYear())-y.getUTCDate():y.getDate()-(y.getUTCDate()+I(y.getMonth(),y.getFullYear()))}function I(y,P){return y===1?P%400===0||P%4===0&&P%100!==0?29:28:[0,2,4,6,7,9,11].includes(y)?31:30}function L(y){return k(y,e.YEAR_RANGE,"Year")}e.assertValidYear=L;function X(y){return k(y,e.MONTH_OF_YEAR_RANGE,"Month")}e.assertValidMonth=X;function ae(y){return k(y,e.DAY_OF_MONTH_RANGE,"Day")}e.assertValidDay=ae;function _e(y){return k(y,e.HOUR_OF_DAY_RANGE,"Hour")}e.assertValidHour=_e;function ne(y){return k(y,e.MINUTE_OF_HOUR_RANGE,"Minute")}e.assertValidMinute=ne;function ve(y){return k(y,e.SECOND_OF_MINUTE_RANGE,"Second")}e.assertValidSecond=ve;function it(y){return k(y,e.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")}e.assertValidNanosecond=it;var ee=new Map,be=function(y,P){return(0,i.newError)("".concat(P,' is expected to be a valid ZoneId but was: "').concat(y,'"'))};function Y(y,P){var M=ee.get(P);if(M!==!0){if(M===!1)throw be(P,y);try{Intl.DateTimeFormat(void 0,{timeZone:P}),ee.set(P,!0)}catch{throw ee.set(P,!1),be(P,y)}}}e.assertValidZoneId=Y;function k(y,P,M){if((0,a.assertNumberOrInteger)(y,M),!P.contains(y))throw(0,i.newError)("".concat(M," is expected to be in range ").concat(P.toString()," but was: ").concat(y.toString()));return y}function T(y,P,M){y=(0,o.int)(y),P=(0,o.int)(P),M=(0,o.int)(M);var x=y.multiply(e.SECONDS_PER_HOUR);return x=x.add(P.multiply(e.SECONDS_PER_MINUTE)),x.add(M)}function C(y){return y=(0,o.int)(y),y.modulo(4).equals(0)?y.modulo(100).equals(0)?!!y.modulo(400).equals(0):!0:!1}function R(y,P){y=(0,o.int)(y),P=(0,o.int)(P);var M=y.div(P);return y.isPositive()!==P.isPositive()&&M.multiply(P).notEquals(y)&&(M=M.subtract(1)),M}e.floorDiv=R;function V(y,P){return y=(0,o.int)(y),P=(0,o.int)(P),y.subtract(R(y,P).multiply(P))}e.floorMod=V;function H(y,P){y=(0,o.int)(y),P=(0,o.int)(P);var M,x,K=y.isNegative(),me=P.greaterThan(0);return K&&me?y.equals(-1)?M="-0":M=y.add(1).toString():M=y.toString(),me&&(K?x=F(P.negate().add(2*e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND)):x=F(P.add(e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND))),x!=null?M+x:M}function F(y){return y=(0,o.int)(y),y.equals(0)?"":"."+Z(y,9)}function te(y){var P=(0,o.int)(y);return P.isNegative()||P.greaterThan(9999)?Z(P,6,{usePositiveSign:!0}):Z(P,4)}function Z(y,P,M){y=(0,o.int)(y);var x=y.isNegative();x&&(y=y.negate());var K=y.toString();if(P!=null)for(;K.length<P;)K="0"+K;return x?"-"+K:(M==null?void 0:M.usePositiveSign)===!0?"+"+K:K}function se(y,P){return y instanceof o.default?y.add(P):typeof y=="bigint"?y+BigInt(P):y+P}})(Xv);var $C=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),NC=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),ew=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&$C(r,e,t);return NC(r,e),r},kC=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(ge,"__esModule",{value:!0});ge.isDateTime=ge.DateTime=ge.isLocalDateTime=ge.LocalDateTime=ge.isDate=ge.Date=ge.isTime=ge.Time=ge.isLocalTime=ge.LocalTime=ge.isDuration=ge.Duration=void 0;var J=ew(Xv),dr=re,MC=le,Nn=ew(xe),Ko={value:!0,enumerable:!1,configurable:!1,writable:!1},tw="__isDuration__",rw="__isLocalTime__",nw="__isTime__",ow="__isDate__",iw="__isLocalDateTime__",aw="__isDateTime__",sw=function(){function e(r,t,n,o){this.months=(0,dr.assertNumberOrInteger)(r,"Months"),this.days=(0,dr.assertNumberOrInteger)(t,"Days"),(0,dr.assertNumberOrInteger)(n,"Seconds"),(0,dr.assertNumberOrInteger)(o,"Nanoseconds"),this.seconds=J.normalizeSecondsForDuration(n,o),this.nanoseconds=J.normalizeNanosecondsForDuration(o),Object.freeze(this)}return e.prototype.toString=function(){return J.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},e}();ge.Duration=sw;Object.defineProperty(sw.prototype,tw,Ko);function DC(e){return Yo(e,tw)}ge.isDuration=DC;var uw=function(){function e(r,t,n,o){this.hour=J.assertValidHour(r),this.minute=J.assertValidMinute(t),this.second=J.assertValidSecond(n),this.nanosecond=J.assertValidNanosecond(o),Object.freeze(this)}return e.fromStandardDate=function(r,t){ka(r,t);var n=J.totalNanoseconds(r,t);return new e(r.getHours(),r.getMinutes(),r.getSeconds(),n instanceof Nn.default?n.toInt():typeof n=="bigint"?(0,Nn.int)(n).toInt():n)},e.prototype.toString=function(){return J.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},e}();ge.LocalTime=uw;Object.defineProperty(uw.prototype,rw,Ko);function LC(e){return Yo(e,rw)}ge.isLocalTime=LC;var cw=function(){function e(r,t,n,o,i){this.hour=J.assertValidHour(r),this.minute=J.assertValidMinute(t),this.second=J.assertValidSecond(n),this.nanosecond=J.assertValidNanosecond(o),this.timeZoneOffsetSeconds=(0,dr.assertNumberOrInteger)(i,"Time zone offset in seconds"),Object.freeze(this)}return e.fromStandardDate=function(r,t){return ka(r,t),new e(r.getHours(),r.getMinutes(),r.getSeconds(),(0,Nn.toNumber)(J.totalNanoseconds(r,t)),J.timeZoneOffsetInSeconds(r))},e.prototype.toString=function(){return J.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+J.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},e}();ge.Time=cw;Object.defineProperty(cw.prototype,nw,Ko);function UC(e){return Yo(e,nw)}ge.isTime=UC;var lw=function(){function e(r,t,n){this.year=J.assertValidYear(r),this.month=J.assertValidMonth(t),this.day=J.assertValidDay(n),Object.freeze(this)}return e.fromStandardDate=function(r){return ka(r),new e(r.getFullYear(),r.getMonth()+1,r.getDate())},e.prototype.toStandardDate=function(){return J.isoStringToStandardDate(this.toString())},e.prototype.toString=function(){return J.dateToIsoString(this.year,this.month,this.day)},e}();ge.Date=lw;Object.defineProperty(lw.prototype,ow,Ko);function FC(e){return Yo(e,ow)}ge.isDate=FC;var fw=function(){function e(r,t,n,o,i,a,u){this.year=J.assertValidYear(r),this.month=J.assertValidMonth(t),this.day=J.assertValidDay(n),this.hour=J.assertValidHour(o),this.minute=J.assertValidMinute(i),this.second=J.assertValidSecond(a),this.nanosecond=J.assertValidNanosecond(u),Object.freeze(this)}return e.fromStandardDate=function(r,t){return ka(r,t),new e(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),(0,Nn.toNumber)(J.totalNanoseconds(r,t)))},e.prototype.toStandardDate=function(){return J.isoStringToStandardDate(this.toString())},e.prototype.toString=function(){return hw(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},e}();ge.LocalDateTime=fw;Object.defineProperty(fw.prototype,iw,Ko);function xC(e){return Yo(e,iw)}ge.isLocalDateTime=xC;var dw=function(){function e(r,t,n,o,i,a,u,c,s){this.year=J.assertValidYear(r),this.month=J.assertValidMonth(t),this.day=J.assertValidDay(n),this.hour=J.assertValidHour(o),this.minute=J.assertValidMinute(i),this.second=J.assertValidSecond(a),this.nanosecond=J.assertValidNanosecond(u);var l=kC(VC(c,s),2),d=l[0],h=l[1];this.timeZoneOffsetSeconds=d,this.timeZoneId=h??void 0,Object.freeze(this)}return e.fromStandardDate=function(r,t){return ka(r,t),new e(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),(0,Nn.toNumber)(J.totalNanoseconds(r,t)),J.timeZoneOffsetInSeconds(r),null)},e.prototype.toStandardDate=function(){return J.toStandardDate(this._toUTC())},e.prototype.toString=function(){var r,t=hw(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),n=this.timeZoneOffsetSeconds!=null?J.timeZoneOffsetToIsoString((r=this.timeZoneOffsetSeconds)!==null&&r!==void 0?r:0):"",o=this.timeZoneId!=null?"[".concat(this.timeZoneId,"]"):"";return t+n+o},e.prototype._toUTC=function(){var r;if(this.timeZoneOffsetSeconds===void 0)throw new Error("Requires DateTime created with time zone offset");var t=J.localDateTimeToEpochSecond(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),n=t.subtract((r=this.timeZoneOffsetSeconds)!==null&&r!==void 0?r:0);return(0,Nn.int)(n).multiply(1e3).add((0,Nn.int)(this.nanosecond).div(1e6)).toNumber()},e}();ge.DateTime=dw;Object.defineProperty(dw.prototype,aw,Ko);function BC(e){return Yo(e,aw)}ge.isDateTime=BC;function Yo(e,r){return e!=null&&e[r]===!0}function hw(e,r,t,n,o,i,a){return J.dateToIsoString(e,r,t)+"T"+J.timeToIsoString(n,o,i,a)}function VC(e,r){var t=e!=null,n=r!=null&&r!=="";if(!t&&!n)throw(0,MC.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(e," and id: ").concat(r));var o=[void 0,void 0];return t&&((0,dr.assertNumberOrInteger)(e,"Time zone offset in seconds"),o[0]=e),n&&((0,dr.assertString)(r,"Time zone ID"),J.assertValidZoneId("Time zone ID",r),o[1]=r),o}function ka(e,r){(0,dr.assertValidDate)(e,"Standard date"),r!=null&&(0,dr.assertNumberOrInteger)(r,"Nanosecond")}var Se={};Object.defineProperty(Se,"__esModule",{value:!0});Se.isPathSegment=Se.PathSegment=Se.isPath=Se.Path=Se.isUnboundRelationship=Se.UnboundRelationship=Se.isRelationship=Se.Relationship=Se.isNode=Se.Node=void 0;var Jv=Lt,Ma={value:!0,enumerable:!1,configurable:!1,writable:!1},pw="__isNode__",vw="__isRelationship__",_w="__isUnboundRelationship__",yw="__isPath__",bw="__isPathSegment__";function Da(e,r){return e!=null&&e[r]===!0}var mw=function(){function e(r,t,n,o){this.identity=r,this.labels=t,this.properties=n,this.elementId=fa(o,function(){return r.toString()})}return e.prototype.toString=function(){for(var r="("+this.elementId,t=0;t<this.labels.length;t++)r+=":"+this.labels[t];var n=Object.keys(this.properties);if(n.length>0){r+=" {";for(var t=0;t<n.length;t++)t>0&&(r+=","),r+=n[t]+":"+(0,Jv.stringify)(this.properties[n[t]]);r+="}"}return r+=")",r},e}();Se.Node=mw;Object.defineProperty(mw.prototype,pw,Ma);function WC(e){return Da(e,pw)}Se.isNode=WC;var Dc=function(){function e(r,t,n,o,i,a,u,c){this.identity=r,this.start=t,this.end=n,this.type=o,this.properties=i,this.elementId=fa(a,function(){return r.toString()}),this.startNodeElementId=fa(u,function(){return t.toString()}),this.endNodeElementId=fa(c,function(){return n.toString()})}return e.prototype.toString=function(){var r="("+this.startNodeElementId+")-[:"+this.type,t=Object.keys(this.properties);if(t.length>0){r+=" {";for(var n=0;n<t.length;n++)n>0&&(r+=","),r+=t[n]+":"+(0,Jv.stringify)(this.properties[t[n]]);r+="}"}return r+="]->("+this.endNodeElementId+")",r},e}();Se.Relationship=Dc;Object.defineProperty(Dc.prototype,vw,Ma);function zC(e){return Da(e,vw)}Se.isRelationship=zC;var gw=function(){function e(r,t,n,o){this.identity=r,this.type=t,this.properties=n,this.elementId=fa(o,function(){return r.toString()})}return e.prototype.bind=function(r,t){return new Dc(this.identity,r,t,this.type,this.properties,this.elementId)},e.prototype.bindTo=function(r,t){return new Dc(this.identity,r.identity,t.identity,this.type,this.properties,this.elementId,r.elementId,t.elementId)},e.prototype.toString=function(){var r="-[:"+this.type,t=Object.keys(this.properties);if(t.length>0){r+=" {";for(var n=0;n<t.length;n++)n>0&&(r+=","),r+=t[n]+":"+(0,Jv.stringify)(this.properties[t[n]]);r+="}"}return r+="]->",r},e}();Se.UnboundRelationship=gw;Object.defineProperty(gw.prototype,_w,Ma);function HC(e){return Da(e,_w)}Se.isUnboundRelationship=HC;var ww=function(){function e(r,t,n){this.start=r,this.relationship=t,this.end=n}return e}();Se.PathSegment=ww;Object.defineProperty(ww.prototype,bw,Ma);function qC(e){return Da(e,bw)}Se.isPathSegment=qC;var Ow=function(){function e(r,t,n){this.start=r,this.end=t,this.segments=n,this.length=n.length}return e}();Se.Path=Ow;Object.defineProperty(Ow.prototype,yw,Ma);function GC(e){return Da(e,yw)}Se.isPath=GC;function fa(e,r){return e??r()}var e_={},xh=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(t=0)),t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Bh=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},Vh=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(e_,"__esModule",{value:!0});var Qy=le;function KC(e){var r={};return e.forEach(function(t,n){r[t]=n}),r}var YC=function(){function e(r,t,n){this.keys=r,this.length=r.length,this._fields=t,this._fieldLookup=n??KC(r)}return e.prototype.forEach=function(r){var t,n;try{for(var o=Bh(this.entries()),i=o.next();!i.done;i=o.next()){var a=Vh(i.value,2),u=a[0],c=a[1];r(c,u,this)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},e.prototype.map=function(r){var t,n,o=[];try{for(var i=Bh(this.entries()),a=i.next();!a.done;a=i.next()){var u=Vh(a.value,2),c=u[0],s=u[1];o.push(r(s,c,this))}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return o},e.prototype.entries=function(){var r;return xh(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,[this.keys[r],this._fields[r]]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype.values=function(){var r;return xh(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,this._fields[r]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype[Symbol.iterator]=function(){var r;return xh(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,this._fields[r]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype.toObject=function(){var r,t,n={};try{for(var o=Bh(this.entries()),i=o.next();!i.done;i=o.next()){var a=Vh(i.value,2),u=a[0],c=a[1];n[u]=c}}catch(s){r={error:s}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(r)throw r.error}}return n},e.prototype.get=function(r){var t;if(typeof r!="number"){if(t=this._fieldLookup[r],t===void 0)throw(0,Qy.newError)("This record has no field with key '".concat(r.toString(),"', available keys are: [")+this.keys.toString()+"].")}else t=r;if(t>this._fields.length-1||t<0)throw(0,Qy.newError)("This record has no field with index '"+t.toString()+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[t]},e.prototype.has=function(r){return typeof r=="number"?r>=0&&r<this._fields.length:this._fieldLookup[r]!==void 0},e}();e_.default=YC;var No={};Object.defineProperty(No,"__esModule",{value:!0});No.isPoint=No.Point=void 0;var Ju=re,Ew="__isPoint__",Sw=function(){function e(r,t,n,o){this.srid=(0,Ju.assertNumberOrInteger)(r,"SRID"),this.x=(0,Ju.assertNumber)(t,"X coordinate"),this.y=(0,Ju.assertNumber)(n,"Y coordinate"),this.z=o==null?o:(0,Ju.assertNumber)(o,"Z coordinate"),Object.freeze(this)}return e.prototype.toString=function(){return this.z!=null&&!isNaN(this.z)?"Point{srid=".concat(vn(this.srid),", x=").concat(vn(this.x),", y=").concat(vn(this.y),", z=").concat(vn(this.z),"}"):"Point{srid=".concat(vn(this.srid),", x=").concat(vn(this.x),", y=").concat(vn(this.y),"}")},e}();No.Point=Sw;function vn(e){return Number.isInteger(e)?e.toString()+".0":e.toString()}Object.defineProperty(Sw.prototype,Ew,{value:!0,enumerable:!1,configurable:!1,writable:!1});function ZC(e){var r=e;return e!=null&&r[Ew]===!0}No.isPoint=ZC;var Qe={},oe={},xr={};Object.defineProperty(xr,"__esModule",{value:!0});xr.FailedObserver=xr.CompletedObserver=void 0;var QC=function(){function e(){}return e.prototype.subscribe=function(r){da(r,r.onKeys,[]),da(r,r.onCompleted,{})},e.prototype.cancel=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.prepareToHandleSingleResponse=function(){},e.prototype.markCompleted=function(){},e.prototype.onError=function(r){throw new Error("CompletedObserver not supposed to call onError",{cause:r})},e}();xr.CompletedObserver=QC;var XC=function(){function e(r){var t=r.error,n=r.onError;this._error=t,this._beforeError=n,this._observers=[],this.onError(t)}return e.prototype.subscribe=function(r){da(r,r.onError,this._error),this._observers.push(r)},e.prototype.onError=function(r){da(this,this._beforeError,r),this._observers.forEach(function(t){return da(t,t.onError,r)})},e.prototype.cancel=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.markCompleted=function(){},e.prototype.prepareToHandleSingleResponse=function(){},e}();xr.FailedObserver=XC;function da(e,r,t){r!=null&&r.bind(e)(t)}var en={},JC=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),eA=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),tA=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&JC(r,e,t);return eA(r,e),r},rA=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},nA=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(en,"__esModule",{value:!0});en.Bookmarks=void 0;var Xy=tA(re),oA="bookmarks",Tw=function(){function e(r){this._values=aA(r)}return e.empty=function(){return iA},e.prototype.isEmpty=function(){return this._values.length===0},e.prototype.values=function(){return this._values},e.prototype[Symbol.iterator]=function(){return this._values[Symbol.iterator]()},e.prototype.asBeginTransactionParameters=function(){var r;return this.isEmpty()?{}:(r={},r[oA]=this._values,r)},e}();en.Bookmarks=Tw;var iA=new Tw(null);function aA(e){if(e==null||e==="")return[];if(Xy.isString(e))return[e];if(Array.isArray(e)){for(var r=new Set,t=Pw(e),n=0;n<t.length;n++){var o=t[n];if(o!=null){if(!Xy.isString(o))throw new TypeError("Bookmark value should be a string, given: '".concat(o,"'"));r.add(o)}}return nA([],rA(r),!1)}throw new TypeError("Bookmarks should either be a string or a string array, given: '".concat(e,"'"))}function Pw(e){return e.reduce(function(r,t){return Array.isArray(t)?r.concat(Pw(t)):r.concat(t)},[])}var z={};Object.defineProperty(z,"__esModule",{value:!0});z.TELEMETRY_APIS=z.BOLT_PROTOCOL_V5_8=z.BOLT_PROTOCOL_V5_7=z.BOLT_PROTOCOL_V5_6=z.BOLT_PROTOCOL_V5_5=z.BOLT_PROTOCOL_V5_4=z.BOLT_PROTOCOL_V5_3=z.BOLT_PROTOCOL_V5_2=z.BOLT_PROTOCOL_V5_1=z.BOLT_PROTOCOL_V5_0=z.BOLT_PROTOCOL_V4_4=z.BOLT_PROTOCOL_V4_3=z.BOLT_PROTOCOL_V4_2=z.BOLT_PROTOCOL_V4_1=z.BOLT_PROTOCOL_V4_0=z.BOLT_PROTOCOL_V3=z.BOLT_PROTOCOL_V2=z.BOLT_PROTOCOL_V1=z.DEFAULT_POOL_MAX_SIZE=z.DEFAULT_POOL_ACQUISITION_TIMEOUT=z.DEFAULT_CONNECTION_TIMEOUT_MILLIS=z.ACCESS_MODE_WRITE=z.ACCESS_MODE_READ=z.FETCH_ALL=void 0;var sA=-1;z.FETCH_ALL=sA;var uA=60*1e3;z.DEFAULT_POOL_ACQUISITION_TIMEOUT=uA;var cA=100;z.DEFAULT_POOL_MAX_SIZE=cA;var lA=3e4;z.DEFAULT_CONNECTION_TIMEOUT_MILLIS=lA;var fA="READ";z.ACCESS_MODE_READ=fA;var dA="WRITE";z.ACCESS_MODE_WRITE=dA;var hA=1;z.BOLT_PROTOCOL_V1=hA;var pA=2;z.BOLT_PROTOCOL_V2=pA;var vA=3;z.BOLT_PROTOCOL_V3=vA;var _A=4;z.BOLT_PROTOCOL_V4_0=_A;var yA=4.1;z.BOLT_PROTOCOL_V4_1=yA;var bA=4.2;z.BOLT_PROTOCOL_V4_2=bA;var mA=4.3;z.BOLT_PROTOCOL_V4_3=mA;var gA=4.4;z.BOLT_PROTOCOL_V4_4=gA;var wA=5;z.BOLT_PROTOCOL_V5_0=wA;var OA=5.1;z.BOLT_PROTOCOL_V5_1=OA;var EA=5.2;z.BOLT_PROTOCOL_V5_2=EA;var SA=5.3;z.BOLT_PROTOCOL_V5_3=SA;var TA=5.4;z.BOLT_PROTOCOL_V5_4=TA;var PA=5.5;z.BOLT_PROTOCOL_V5_5=PA;var CA=5.6;z.BOLT_PROTOCOL_V5_6=CA;var AA=5.7;z.BOLT_PROTOCOL_V5_7=AA;var IA=5.8;z.BOLT_PROTOCOL_V5_8=IA;var RA={MANAGED_TRANSACTION:0,UNMANAGED_TRANSACTION:1,AUTO_COMMIT_TRANSACTION:2,EXECUTE_QUERY:3};z.TELEMETRY_APIS=RA;var Mt={},Kn={},jA=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),vo;Object.defineProperty(Kn,"__esModule",{value:!0});Kn.Logger=void 0;var Cw=le,Wp="error",zp="warn",wa="info",Hp="debug",$A=wa,Lc=(vo={},vo[Wp]=0,vo[zp]=1,vo[wa]=2,vo[Hp]=3,vo),Aw=function(){function e(r,t){this._level=r,this._loggerFunction=t}return e.create=function(r){if((r==null?void 0:r.logging)!=null){var t=r.logging,n=MA(t),o=DA(t);return new e(n,o)}return this.noOp()},e.noOp=function(){return kA},e.prototype.isErrorEnabled=function(){return ec(this._level,Wp)},e.prototype.error=function(r){this.isErrorEnabled()&&this._loggerFunction(Wp,r)},e.prototype.isWarnEnabled=function(){return ec(this._level,zp)},e.prototype.warn=function(r){this.isWarnEnabled()&&this._loggerFunction(zp,r)},e.prototype.isInfoEnabled=function(){return ec(this._level,wa)},e.prototype.info=function(r){this.isInfoEnabled()&&this._loggerFunction(wa,r)},e.prototype.isDebugEnabled=function(){return ec(this._level,Hp)},e.prototype.debug=function(r){this.isDebugEnabled()&&this._loggerFunction(Hp,r)},e}();Kn.Logger=Aw;var NA=function(e){jA(r,e);function r(){return e.call(this,wa,function(t,n){})||this}return r.prototype.isErrorEnabled=function(){return!1},r.prototype.error=function(t){},r.prototype.isWarnEnabled=function(){return!1},r.prototype.warn=function(t){},r.prototype.isInfoEnabled=function(){return!1},r.prototype.info=function(t){},r.prototype.isDebugEnabled=function(){return!1},r.prototype.debug=function(t){},r}(Aw),kA=new NA;function ec(e,r){return Lc[e]>=Lc[r]}function MA(e){if((e==null?void 0:e.level)!=null){var r=e.level,t=Lc[r];if(t==null&&t!==0)throw(0,Cw.newError)("Illegal logging level: ".concat(r,". Supported levels are: ").concat(Object.keys(Lc).toString()));return r}return $A}function DA(e){var r,t;if((e==null?void 0:e.logger)!=null){var n=e.logger;if(n!=null&&typeof n=="function")return n}throw(0,Cw.newError)("Illegal logger function: ".concat((t=(r=e==null?void 0:e.logger)===null||r===void 0?void 0:r.toString())!==null&&t!==void 0?t:"undefined"))}var Iw=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ha=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(l){try{s(n.next(l))}catch(d){a(d)}}function c(l){try{s(n.throw(l))}catch(d){a(d)}}function s(l){l.done?i(l.value):o(l.value).then(u,c)}s((n=n.apply(e,r||[])).next())})},pa=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(t=0)),t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.EMPTY_CONNECTION_HOLDER=Mt.ReadOnlyConnectionHolder=Mt.ConnectionHolder=void 0;var LA=le,UA=re,FA=z,Jy=en,xA=Kn,t_=function(){function e(r){var t=r.mode,n=r.database,o=n===void 0?"":n,i=r.bookmarks,a=r.connectionProvider,u=r.impersonatedUser,c=r.onDatabaseNameResolved,s=r.getConnectionAcquistionBookmarks,l=r.auth,d=r.log;this._mode=t??FA.ACCESS_MODE_WRITE,this._closed=!1,this._database=o!=null?(0,UA.assertString)(o,"database"):"",this._bookmarks=i??Jy.Bookmarks.empty(),this._connectionProvider=a,this._impersonatedUser=u,this._referenceCount=0,this._connectionPromise=Promise.resolve(null),this._onDatabaseNameResolved=c,this._auth=l,this._log=d,this._logError=this._logError.bind(this),this._getConnectionAcquistionBookmarks=s??function(){return Promise.resolve(Jy.Bookmarks.empty())}}return e.prototype.mode=function(){return this._mode},e.prototype.database=function(){return this._database},e.prototype.setDatabase=function(r){this._database=r},e.prototype.bookmarks=function(){return this._bookmarks},e.prototype.connectionProvider=function(){return this._connectionProvider},e.prototype.referenceCount=function(){return this._referenceCount},e.prototype.initializeConnection=function(r){if(this._referenceCount===0&&this._connectionProvider!=null)this._connectionPromise=this._createConnectionPromise(this._connectionProvider,r);else return this._referenceCount++,!1;return this._referenceCount++,!0},e.prototype._createConnectionPromise=function(r,t){return ha(this,void 0,void 0,function(){var n,o,i;return pa(this,function(a){switch(a.label){case 0:return o=(n=r).acquireConnection,i={accessMode:this._mode,database:this._database},[4,this._getBookmarks()];case 1:return[4,o.apply(n,[(i.bookmarks=a.sent(),i.impersonatedUser=this._impersonatedUser,i.onDatabaseNameResolved=this._onDatabaseNameResolved,i.auth=this._auth,i.homeDb=t,i)])];case 2:return[2,a.sent()]}})})},e.prototype._getBookmarks=function(){return ha(this,void 0,void 0,function(){return pa(this,function(r){switch(r.label){case 0:return[4,this._getConnectionAcquistionBookmarks()];case 1:return[2,r.sent()]}})})},e.prototype.getConnection=function(){return this._connectionPromise},e.prototype.releaseConnection=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount--,this._referenceCount===0?this._releaseConnection():this._connectionPromise)},e.prototype.close=function(r){return this._closed=!0,this._referenceCount===0?this._connectionPromise:(this._referenceCount=0,this._releaseConnection(r))},e.prototype.log=function(){return this._log},e.prototype._releaseConnection=function(r){return this._connectionPromise=this._connectionPromise.then(function(t){return t!=null?t.isOpen()&&(t.hasOngoingObservableRequests()||r===!0)?t.resetAndFlush().catch(WA).then(function(){return t.release().then(function(){return null})}):t.release().then(function(){return null}):Promise.resolve(null)}).catch(this._logError),this._connectionPromise},e.prototype._logError=function(r){return this._log.isWarnEnabled()&&this._log.warn("ConnectionHolder got an error while releasing the connection. Error ".concat(r,". Stacktrace: ").concat(r.stack)),null},e}();Mt.ConnectionHolder=t_;var Rw=function(e){Iw(r,e);function r(t){var n=e.call(this,{mode:t.mode(),database:t.database(),bookmarks:t.bookmarks(),getConnectionAcquistionBookmarks:t._getConnectionAcquistionBookmarks,connectionProvider:t.connectionProvider(),log:t.log()})||this;return n._connectionHolder=t,n}return r.prototype.initializeConnection=function(){return this._connectionHolder.referenceCount()!==0},r.prototype.getConnection=function(){return this._connectionHolder.getConnection()},r.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},r.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},r}(t_);Mt.ReadOnlyConnectionHolder=Rw;Mt.default=Rw;var BA=function(e){Iw(r,e);function r(){return e.call(this,{log:xA.Logger.create({})})||this}return r.prototype.mode=function(){},r.prototype.database=function(){},r.prototype.initializeConnection=function(){return!0},r.prototype.getConnection=function(){return ha(this,void 0,void 0,function(){return pa(this,function(t){switch(t.label){case 0:return[4,Promise.reject((0,LA.newError)("This connection holder does not serve connections"))];case 1:return[2,t.sent()]}})})},r.prototype.releaseConnection=function(){return ha(this,void 0,void 0,function(){return pa(this,function(t){switch(t.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,t.sent()]}})})},r.prototype.close=function(){return ha(this,void 0,void 0,function(){return pa(this,function(t){switch(t.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,t.sent()]}})})},r}(t_),VA=new BA;Mt.EMPTY_CONNECTION_HOLDER=VA;function WA(e){return null}var Zo={},zA=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),HA=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),qA=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&zA(r,e,t);return HA(r,e),r};Object.defineProperty(Zo,"__esModule",{value:!0});Zo.TxConfig=void 0;var Oa=qA(re),GA=le,KA=xe,jw=function(){function e(r,t){JA(r),this.timeout=ZA(r,t),this.metadata=XA(r)}return e.empty=function(){return YA},e.prototype.isEmpty=function(){return Object.values(this).every(function(r){return r==null})},e}();Zo.TxConfig=jw;var YA=new jw({});function ZA(e,r){if(Oa.isObject(e)&&e.timeout!=null){Oa.assertNumberOrInteger(e.timeout,"Transaction timeout"),QA(e)&&(r==null?void 0:r.isInfoEnabled())===!0&&(r==null||r.info("Transaction timeout expected to be an integer, got: ".concat(e.timeout,". The value will be rounded up.")));var t=(0,KA.int)(e.timeout,{ceilFloat:!0});if(t.isNegative())throw(0,GA.newError)("Transaction timeout should not be negative");return t}return null}function QA(e){return typeof e.timeout=="number"&&!Number.isInteger(e.timeout)}function XA(e){if(Oa.isObject(e)&&e.metadata!=null){var r=e.metadata;if(Oa.assertObject(r,"config.metadata"),Object.keys(r).length!==0)return r}return null}function JA(e){e!=null&&Oa.assertObject(e,"Transaction config")}var La={},qp=f&&f.__assign||function(){return qp=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},qp.apply(this,arguments)},eI=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(l){try{s(n.next(l))}catch(d){a(d)}}function c(l){try{s(n.throw(l))}catch(d){a(d)}}function s(l){l.done?i(l.value):o(l.value).then(u,c)}s((n=n.apply(e,r||[])).next())})},tI=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(t=0)),t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},rI=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},nI=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(La,"__esModule",{value:!0});La.TransactionExecutor=void 0;var zi=le,oI=z,iI=30*1e3,aI=1e3,sI=2,uI=.2;function cI(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return setTimeout.apply(void 0,nI([e,r],rI(t),!1))}function lI(e){return clearTimeout(e)}var fI=function(){function e(r,t,n,o,i){i===void 0&&(i={setTimeout:cI,clearTimeout:lI}),this._maxRetryTimeMs=tc(r,iI),this._initialRetryDelayMs=tc(t,aI),this._multiplier=tc(n,sI),this._jitterFactor=tc(o,uI),this._setTimeout=i.setTimeout,this._clearTimeout=i.clearTimeout,this._inFlightTimeoutIds=[],this.pipelineBegin=!1,this.telemetryApi=oI.TELEMETRY_APIS.MANAGED_TRANSACTION,this._verifyAfterConstruction()}return e.prototype.execute=function(r,t,n){var o=this,i={apiTransactionConfig:{api:this.telemetryApi,onTelemetrySuccess:function(){i.apiTransactionConfig=void 0}}};return new Promise(function(a,u){o._executeTransactionInsidePromise(r,t,a,u,n,i).catch(u)}).catch(function(a){var u=Date.now(),c=o._initialRetryDelayMs;return o._retryTransactionPromise(r,t,a,u,c,n,i)})},e.prototype.close=function(){var r=this;this._inFlightTimeoutIds.forEach(function(t){return r._clearTimeout(t)}),this._inFlightTimeoutIds=[]},e.prototype._retryTransactionPromise=function(r,t,n,o,i,a,u){var c=this,s=Date.now()-o;return s>this._maxRetryTimeMs||!(0,zi.isRetriableError)(n)?Promise.reject(n):new Promise(function(l,d){var h=c._computeDelayWithJitter(i),p=c._setTimeout(function(){c._inFlightTimeoutIds=c._inFlightTimeoutIds.filter(function(v){return v!==p}),c._executeTransactionInsidePromise(r,t,l,d,a,u).catch(d)},h);c._inFlightTimeoutIds.push(p)}).catch(function(l){var d=i*c._multiplier;return c._retryTransactionPromise(r,t,l,o,d,a,u)})},e.prototype._executeTransactionInsidePromise=function(r,t,n,o,i,a){return eI(this,void 0,void 0,function(){var u,c,s,l,d,h,p,v=this;return tI(this,function(_){switch(_.label){case 0:return _.trys.push([0,4,,5]),c=r((a==null?void 0:a.apiTransactionConfig)!=null?qp({},a==null?void 0:a.apiTransactionConfig):void 0),this.pipelineBegin?(s=c,[3,3]):[3,1];case 1:return[4,c];case 2:s=_.sent(),_.label=3;case 3:return u=s,[3,5];case 4:return l=_.sent(),o(l),[2];case 5:return d=i??function(b){return b},h=d(u),p=this._safeExecuteTransactionWork(h,t),p.then(function(b){return v._handleTransactionWorkSuccess(b,u,n,o)}).catch(function(b){return v._handleTransactionWorkFailure(b,u,o)}),[2]}})})},e.prototype._safeExecuteTransactionWork=function(r,t){try{var n=t(r);return Promise.resolve(n)}catch(o){return Promise.reject(o)}},e.prototype._handleTransactionWorkSuccess=function(r,t,n,o){t.isOpen()?t.commit().then(function(){n(r)}).catch(function(i){o(i)}):n(r)},e.prototype._handleTransactionWorkFailure=function(r,t,n){t.isOpen()?t.rollback().catch(function(o){}).then(function(){return n(r)}).catch(n):n(r)},e.prototype._computeDelayWithJitter=function(r){var t=r*this._jitterFactor,n=r-t,o=r+t;return Math.random()*(o-n)+n},e.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,zi.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs.toString());if(this._initialRetryDelayMs<0)throw(0,zi.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs.toString());if(this._multiplier<1)throw(0,zi.newError)("Multiplier should be >= 1.0: "+this._multiplier.toString());if(this._jitterFactor<0||this._jitterFactor>1)throw(0,zi.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor.toFixed())},e}();La.TransactionExecutor=fI;function tc(e,r){return e??r}var dt={},Uc=f&&f.__assign||function(){return Uc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Uc.apply(this,arguments)},$w=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(dt,"__esModule",{value:!0});dt.Url=dt.formatIPv6Address=dt.formatIPv4Address=dt.defaultPortForScheme=dt.parseDatabaseUrl=void 0;var dI=re,hI=7687,pI=7474,vI=7473,Nw=function(){function e(r,t,n,o,i){this.scheme=r,this.host=t,this.port=n,this.hostAndPort=o,this.query=i}return e}();dt.Url=Nw;function _I(e){var r;(0,dI.assertString)(e,"URL");var t=bI(e),n=CI(t.url),o=t.schemeMissing?null:mI(n.scheme),i=gI(n.host),a=SI(i),u=wI(n.port,o),c="".concat(a,":").concat(u),s=OI((r=n.query)!==null&&r!==void 0?r:yI(n.resourceName),e);return new Nw(o,i,u,c,s)}dt.parseDatabaseUrl=_I;function yI(e){if(typeof e!="string")return null;var r=$w(e.split("?"),2),t=r[1];return t}function bI(e){return e=e.trim(),e.includes("://")?{schemeMissing:!1,url:e}:{schemeMissing:!0,url:"none://".concat(e)}}function mI(e){return e!=null?(e=e.trim(),e.charAt(e.length-1)===":"&&(e=e.substring(0,e.length-1)),e):null}function gI(e,r){if(e==null)throw new Error("Unable to extract host from null or undefined URL");return e.trim()}function wI(e,r){var t=typeof e=="string"?parseInt(e,10):e;return t!=null&&!isNaN(t)?t:Mw(r)}function OI(e,r){var t=e!=null?EI(e):null,n={};return t!=null&&t.split("&").forEach(function(o){var i=o.split("=");if(i.length!==2)throw new Error("Invalid parameters: '".concat(i.toString(),"' in URL '").concat(r,"'."));var a=eb(i[0],"key",r),u=eb(i[1],"value",r);if(n[a]!==void 0)throw new Error("Duplicated query parameters with key '".concat(a,"' in URL '").concat(r,"'"));n[a]=u}),n}function EI(e){return e=(e??"").trim(),(e==null?void 0:e.charAt(0))==="?"&&(e=e.substring(1,e.length)),e}function eb(e,r,t){if(e=(e??"").trim(),e==="")throw new Error("Illegal empty ".concat(r," in URL query '").concat(t,"'"));return e}function kw(e){var r=e.charAt(0)==="[",t=e.charAt(e.length-1)==="]";if(!r&&!t)return"[".concat(e,"]");if(r&&t)return e;throw new Error("Illegal IPv6 address ".concat(e))}function SI(e){if(e===""||e==null)throw new Error("Illegal host ".concat(e));var r=e.includes(":");return r?kw(e):e}function TI(e,r){return"".concat(e,":").concat(r)}dt.formatIPv4Address=TI;function PI(e,r){var t=kw(e);return"".concat(t,":").concat(r)}dt.formatIPv6Address=PI;function Mw(e){return e==="http"?pI:e==="https"?vI:hI}dt.defaultPortForScheme=Mw;function CI(e){function r(u,c){var s=u.indexOf(c);return s>=0?[u.substring(0,s),u[s],u.substring(s+1)]:[u,"",""]}function t(u,c){var s=u.lastIndexOf(c);return s>=0?[u.substring(0,s),u[s],u.substring(s+1)]:["","",u]}function n(u,c,s){var l=r(u,c),d=r(l[2],s);return[d[0],d[2]]}function o(u){var c={},s;s=t(u,"@"),s[1]==="@"&&(c.userInfo=decodeURIComponent(s[0]),u=s[2]);var l=$w(n(u,"[","]"),2),d=l[0],h=l[1];return d!==""?(c.host=d,s=r(h,":")):(s=r(u,":"),c.host=s[0]),s[1]===":"&&(c.port=s[2]),c}var i={},a;return a=r(e,":"),a[1]===":"&&(i.scheme=decodeURIComponent(a[0]),e=a[2]),a=r(e,"#"),a[1]==="#"&&(i.fragment=decodeURIComponent(a[2]),e=a[0]),a=r(e,"?"),a[1]==="?"&&(i.query=a[2],e=a[0]),e.startsWith("//")?(a=r(e.substr(2),"/"),i=Uc(Uc({},i),o(a[0])),i.path=a[1]+a[2]):i.path=e,i}var Ua={},AI=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),II=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),RI=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&AI(r,e,t);return II(r,e),r};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.ServerAddress=void 0;var Wh=re,jI=RI(dt),$I=function(){function e(r,t,n,o){this._host=(0,Wh.assertString)(r,"host"),this._resolved=t!=null?(0,Wh.assertString)(t,"resolved"):null,this._port=(0,Wh.assertNumber)(n,"port"),this._hostPort=o,this._stringValue=t!=null?"".concat(o,"(").concat(t,")"):"".concat(o)}return e.prototype.host=function(){return this._host},e.prototype.resolvedHost=function(){return this._resolved!=null?this._resolved:this._host},e.prototype.port=function(){return this._port},e.prototype.resolveWith=function(r){return new e(this._host,r,this._port,this._hostPort)},e.prototype.asHostPort=function(){return this._hostPort},e.prototype.asKey=function(){return this._hostPort},e.prototype.toString=function(){return this._stringValue},e.fromUrl=function(r){var t=jI.parseDatabaseUrl(r);return new e(t.host,null,t.port,t.hostAndPort)},e}();Ua.ServerAddress=$I;var ko={},r_={};Object.defineProperty(r_,"__esModule",{value:!0});var NI=function(){function e(){}return e.prototype.resolve=function(){throw new Error("Abstract function")},e.prototype._resolveToItself=function(r){return Promise.resolve([r])},e}();r_.default=NI;var gl={};Object.defineProperty(gl,"__esModule",{value:!0});var kI=Ua;function MI(e){return Promise.resolve([e])}var DI=function(){function e(r){this._resolverFunction=r??MI}return e.prototype.resolve=function(r){var t=this;return new Promise(function(n){return n(t._resolverFunction(r.asHostPort()))}).then(function(n){if(!Array.isArray(n))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(n));return n.map(function(o){return kI.ServerAddress.fromUrl(o)})})},e}();gl.default=DI;var Dw=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ko,"__esModule",{value:!0});ko.ConfiguredCustomResolver=ko.BaseHostNameResolver=void 0;var LI=Dw(r_);ko.BaseHostNameResolver=LI.default;var UI=Dw(gl);ko.ConfiguredCustomResolver=UI.default;var Lw={},wl={};Object.defineProperty(wl,"__esModule",{value:!0});wl.fromVersion=void 0;function FI(e,r){r===void 0&&(r=function(){return{get userAgent(){var i;return i==null?void 0:i.userAgent}}});var t=r(),n=t.userAgent!=null?t.userAgent.split("(")[1].split(")")[0]:void 0,o=t.userAgent||void 0;return{product:"neo4j-javascript/".concat(e),platform:n,languageDetails:o}}wl.fromVersion=FI;(function(e){var r=f&&f.__createBinding||(Object.create?function(n,o,i,a){a===void 0&&(a=i);var u=Object.getOwnPropertyDescriptor(o,i);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(n,a,u)}:function(n,o,i,a){a===void 0&&(a=i),n[a]=o[i]}),t=f&&f.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&r(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),t(wl,e)})(Lw);var Uw={},Br={};Object.defineProperty(Br,"__esModule",{value:!0});Br.DEFAULT_ACQUISITION_TIMEOUT=Br.DEFAULT_MAX_SIZE=void 0;var Cc=100;Br.DEFAULT_MAX_SIZE=Cc;var Ac=60*1e3;Br.DEFAULT_ACQUISITION_TIMEOUT=Ac;var xI=function(){function e(r,t){this.maxSize=tb(r,Cc),this.acquisitionTimeout=tb(t,Ac)}return e.defaultConfig=function(){return new e(Cc,Ac)},e.fromDriverConfig=function(r){var t=Gp(r.maxConnectionPoolSize)?r.maxConnectionPoolSize:Cc,n=Gp(r.connectionAcquisitionTimeout)?r.connectionAcquisitionTimeout:Ac;return new e(t,n)},e}();Br.default=xI;function tb(e,r){return Gp(e)?e:r}function Gp(e){return e===0||e!=null}var n_={},bt=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(l){try{s(n.next(l))}catch(d){a(d)}}function c(l){try{s(n.throw(l))}catch(d){a(d)}}function s(l){l.done?i(l.value):o(l.value).then(u,c)}s((n=n.apply(e,r||[])).next())})},mt=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(t=0)),t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},BI=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n_,"__esModule",{value:!0});var VI=BI(Br),rb=le,WI=Kn,zI=function(){function e(r){var t=r.create,n=t===void 0?function(S,O,A){return bt(E,void 0,void 0,function(){return mt(this,function($){switch($.label){case 0:return[4,Promise.reject(new Error("Not implemented"))];case 1:return[2,$.sent()]}})})}:t,o=r.destroy,i=o===void 0?function(S){return bt(E,void 0,void 0,function(){return mt(this,function(O){switch(O.label){case 0:return[4,Promise.resolve()];case 1:return[2,O.sent()]}})})}:o,a=r.validateOnAcquire,u=a===void 0?function(S,O){return!0}:a,c=r.validateOnRelease,s=c===void 0?function(S){return!0}:c,l=r.installIdleObserver,d=l===void 0?function(S,O){}:l,h=r.removeIdleObserver,p=h===void 0?function(S){}:h,v=r.config,_=v===void 0?VI.default.defaultConfig():v,b=r.log,w=b===void 0?WI.Logger.noOp():b,E=this;this._create=n,this._destroy=i,this._validateOnAcquire=u,this._validateOnRelease=s,this._installIdleObserver=d,this._removeIdleObserver=p,this._maxSize=_.maxSize,this._acquisitionTimeout=_.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=w,this._closed=!1}return e.prototype.acquire=function(r,t,n){return bt(this,void 0,void 0,function(){var o,i,a,u=this;return mt(this,function(c){switch(c.label){case 0:return o=t.asKey(),i=this._acquireRequests,a=i[o],a==null&&(i[o]=[]),[4,new Promise(function(s,l){var d=setTimeout(function(){var p=i[o];if(p!=null&&(i[o]=p.filter(function(b){return b!==h})),!h.isCompleted()){var v=u.activeResourceCount(t),_=u.has(t)?u._pools[o].length:0;h.reject((0,rb.newError)("Connection acquisition timed out in ".concat(u._acquisitionTimeout," ms. Pool status: Active conn count = ").concat(v,", Idle conn count = ").concat(_,".")))}},u._acquisitionTimeout);typeof d=="object"&&d.unref();var h=new HI(o,r,n,s,l,d,u._log);i[o].push(h),u._processPendingAcquireRequests(t)})];case 1:return[2,c.sent()]}})})},e.prototype.purge=function(r){return bt(this,void 0,void 0,function(){return mt(this,function(t){switch(t.label){case 0:return[4,this._purgeKey(r.asKey())];case 1:return[2,t.sent()]}})})},e.prototype.apply=function(r,t){var n=r.asKey();n in this._pools&&this._pools[n].apply(t)},e.prototype.close=function(){return bt(this,void 0,void 0,function(){var r=this;return mt(this,function(t){switch(t.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(n){return bt(r,void 0,void 0,function(){return mt(this,function(o){switch(o.label){case 0:return[4,this._purgeKey(n)];case 1:return[2,o.sent()]}})})})).then()];case 1:return[2,t.sent()]}})})},e.prototype.keepAll=function(r){return bt(this,void 0,void 0,function(){var t,n,o,i=this;return mt(this,function(a){switch(a.label){case 0:return t=r.map(function(u){return u.asKey()}),n=Object.keys(this._pools),o=n.filter(function(u){return!t.includes(u)}),[4,Promise.all(o.map(function(u){return bt(i,void 0,void 0,function(){return mt(this,function(c){switch(c.label){case 0:return[4,this._purgeKey(u)];case 1:return[2,c.sent()]}})})})).then()];case 1:return[2,a.sent()]}})})},e.prototype.has=function(r){return r.asKey()in this._pools},e.prototype.activeResourceCount=function(r){var t;return(t=this._activeResourceCounts[r.asKey()])!==null&&t!==void 0?t:0},e.prototype._getOrInitializePoolFor=function(r){var t=this._pools[r];return t==null&&(t=new qI,this._pools[r]=t,this._pendingCreates[r]=0),t},e.prototype._acquire=function(r,t,n){return bt(this,void 0,void 0,function(){var o,i,a,u,c,l,s,l,d,h=this;return mt(this,function(p){switch(p.label){case 0:if(this._closed)throw(0,rb.newError)("Pool is closed, it is no more able to serve requests.");if(o=t.asKey(),i=this._getOrInitializePoolFor(o),n)return[3,10];p.label=1;case 1:if(!(i.length>0))return[3,10];if(a=i.pop(),a==null)return[3,1];nb(o,this._activeResourceCounts),this._removeIdleObserver!=null&&this._removeIdleObserver(a),u=!1,p.label=2;case 2:return p.trys.push([2,4,,6]),[4,this._validateOnAcquire(r,a)];case 3:return u=p.sent(),[3,6];case 4:return c=p.sent(),zh(o,this._activeResourceCounts),i.removeInUse(a),[4,this._destroy(a)];case 5:throw p.sent(),c;case 6:return u?(this._log.isDebugEnabled()&&this._log.debug("".concat(a," acquired from the pool ").concat(o)),[2,{resource:a,pool:i}]):[3,7];case 7:return zh(o,this._activeResourceCounts),i.removeInUse(a),[4,this._destroy(a)];case 8:p.sent(),p.label=9;case 9:return[3,1];case 10:if(this._maxSize>0&&(l=this.activeResourceCount(t)+this._pendingCreates[o],l>=this._maxSize))return[2,{resource:null,pool:i}];this._pendingCreates[o]=this._pendingCreates[o]+1,p.label=11;case 11:return p.trys.push([11,,15,16]),l=this.activeResourceCount(t)+i.length,l>=this._maxSize&&n?(d=i.pop(),d==null?[3,13]:(this._removeIdleObserver!=null&&this._removeIdleObserver(d),i.removeInUse(d),[4,this._destroy(d)])):[3,13];case 12:p.sent(),p.label=13;case 13:return[4,this._create(r,t,function(v,_){return bt(h,void 0,void 0,function(){return mt(this,function(b){switch(b.label){case 0:return[4,this._release(v,_,i)];case 1:return[2,b.sent()]}})})})];case 14:return s=p.sent(),i.pushInUse(s),nb(o,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(s," created for the pool ").concat(o)),[3,16];case 15:return this._pendingCreates[o]=this._pendingCreates[o]-1,[7];case 16:return[2,{resource:s,pool:i}]}})})},e.prototype._release=function(r,t,n){return bt(this,void 0,void 0,function(){var o,i=this;return mt(this,function(a){switch(a.label){case 0:o=r.asKey(),a.label=1;case 1:return a.trys.push([1,,9,10]),n.isActive()?[4,this._validateOnRelease(t)]:[3,6];case 2:return a.sent()?[3,4]:(this._log.isDebugEnabled()&&this._log.debug("".concat(t," destroyed and can't be released to the pool ").concat(o," because it is not functional")),n.removeInUse(t),[4,this._destroy(t)]);case 3:return a.sent(),[3,5];case 4:this._installIdleObserver!=null&&this._installIdleObserver(t,{onError:function(u){i._log.debug("Idle connection ".concat(t," destroyed because of error: ").concat(u));var c=i._pools[o];c!=null&&(i._pools[o]=c.filter(function(s){return s!==t}),c.removeInUse(t)),i._destroy(t).catch(function(){})}}),n.push(t),this._log.isDebugEnabled()&&this._log.debug("".concat(t," released to the pool ").concat(o)),a.label=5;case 5:return[3,8];case 6:return this._log.isDebugEnabled()&&this._log.debug("".concat(t," destroyed and can't be released to the pool ").concat(o," because pool has been purged")),n.removeInUse(t),[4,this._destroy(t)];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:return zh(o,this._activeResourceCounts),this._processPendingAcquireRequests(r),[7];case 10:return[2]}})})},e.prototype._purgeKey=function(r){return bt(this,void 0,void 0,function(){var t,n,o;return mt(this,function(i){switch(i.label){case 0:if(t=this._pools[r],n=[],t==null)return[3,2];for(;t.length>0;)o=t.pop(),o!=null&&(this._removeIdleObserver!=null&&this._removeIdleObserver(o),n.push(this._destroy(o)));return t.close(),delete this._pools[r],[4,Promise.all(n)];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype._processPendingAcquireRequests=function(r){var t=this,n=r.asKey(),o=this._acquireRequests[n];if(o!=null){var i=o.shift();i!=null?this._acquire(i.context,r,i.requireNew).catch(function(a){return i.reject(a),{resource:null,pool:null}}).then(function(a){var u=a.resource,c=a.pool;u!=null&&c!=null?i.isCompleted()?t._release(r,u,c).catch(function(s){t._log.isDebugEnabled()&&t._log.debug("".concat(u," could not be release back to the pool. Cause: ").concat(s))}):i.resolve(u):i.isCompleted()||(t._acquireRequests[n]==null&&(t._acquireRequests[n]=[]),t._acquireRequests[n].unshift(i))}).catch(function(a){return i.reject(a)}):delete this._acquireRequests[n]}},e}();function nb(e,r){var t,n=(t=r[e])!==null&&t!==void 0?t:0;r[e]=n+1}function zh(e,r){var t,n=(t=r[e])!==null&&t!==void 0?t:0,o=n-1;o>0?r[e]=o:delete r[e]}var HI=function(){function e(r,t,n,o,i,a,u){this._key=r,this._context=t,this._resolve=o,this._reject=i,this._timeoutId=a,this._log=u,this._completed=!1,this._config=n??{}}return Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requireNew",{get:function(){var r;return(r=this._config.requireNew)!==null&&r!==void 0?r:!1},enumerable:!1,configurable:!0}),e.prototype.isCompleted=function(){return this._completed},e.prototype.resolve=function(r){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(r," acquired from the pool ").concat(this._key)),this._resolve(r))},e.prototype.reject=function(r){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(r))},e}(),qI=function(){function e(){this._active=!0,this._elements=[],this._elementsInUse=new Set}return e.prototype.isActive=function(){return this._active},e.prototype.close=function(){this._active=!1,this._elements=[],this._elementsInUse=new Set},e.prototype.filter=function(r){return this._elements=this._elements.filter(r),this},e.prototype.apply=function(r){this._elements.forEach(r),this._elementsInUse.forEach(r)},Object.defineProperty(e.prototype,"length",{get:function(){return this._elements.length},enumerable:!1,configurable:!0}),e.prototype.pop=function(){var r=this._elements.pop();return r!=null&&this._elementsInUse.add(r),r},e.prototype.push=function(r){return this._elementsInUse.delete(r),this._elements.push(r)},e.prototype.pushInUse=function(r){this._elementsInUse.add(r)},e.prototype.removeInUse=function(r){this._elementsInUse.delete(r)},e}();n_.default=zI;(function(e){var r=f&&f.__createBinding||(Object.create?function(u,c,s,l){l===void 0&&(l=s);var d=Object.getOwnPropertyDescriptor(c,s);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[s]}}),Object.defineProperty(u,l,d)}:function(u,c,s,l){l===void 0&&(l=s),u[l]=c[s]}),t=f&&f.__setModuleDefault||(Object.create?function(u,c){Object.defineProperty(u,"default",{enumerable:!0,value:c})}:function(u,c){u.default=c}),n=f&&f.__importStar||function(u){if(u&&u.__esModule)return u;var c={};if(u!=null)for(var s in u)s!=="default"&&Object.prototype.hasOwnProperty.call(u,s)&&r(c,u,s);return t(c,u),c},o=f&&f.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_MAX_SIZE=e.DEFAULT_ACQUISITION_TIMEOUT=e.PoolConfig=e.Pool=void 0;var i=n(Br);e.PoolConfig=i.default,Object.defineProperty(e,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return i.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(e,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return i.DEFAULT_MAX_SIZE}});var a=o(n_);e.Pool=a.default,e.default=a.default})(Uw);var GI=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),KI=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),ot=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&GI(r,e,t);return KI(r,e),r};Object.defineProperty(oe,"__esModule",{value:!0});oe.pool=oe.boltAgent=oe.objectUtil=oe.resolver=oe.serverAddress=oe.urlUtil=oe.logger=oe.transactionExecutor=oe.txConfig=oe.connectionHolder=oe.constants=oe.bookmarks=oe.observer=oe.temporalUtil=oe.util=void 0;var YI=ot(re);oe.util=YI;var ZI=ot(Xv);oe.temporalUtil=ZI;var QI=ot(xr);oe.observer=QI;var XI=ot(en);oe.bookmarks=XI;var JI=ot(z);oe.constants=JI;var eR=ot(Mt);oe.connectionHolder=eR;var tR=ot(Zo);oe.txConfig=tR;var rR=ot(La);oe.transactionExecutor=rR;var nR=ot(Kn);oe.logger=nR;var oR=ot(dt);oe.urlUtil=oR;var iR=ot(Ua);oe.serverAddress=iR;var aR=ot(ko);oe.resolver=aR;var sR=ot(pr);oe.objectUtil=sR;var uR=ot(Lw);oe.boltAgent=uR;var cR=ot(Uw);oe.pool=cR;var Te={},Ea=f&&f.__assign||function(){return Ea=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ea.apply(this,arguments)},lR=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),fR=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),dR=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&lR(r,e,t);return fR(r,e),r},hR=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},pR=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(Te,"__esModule",{value:!0});Te.buildNotificationsFromMetadata=Te.buildGqlStatusObjectFromMetadata=Te.polyfillNotification=Te.polyfillGqlStatusObject=Te.GqlStatusObject=Te.Notification=Te.notificationClassification=Te.notificationCategory=Te.notificationSeverityLevel=void 0;var vR=dR(Lt),Hh=oe,ia=Yv,Kp={WARNING:{gql_status:"01N42",status_description:"warn: unknown warning"},NO_DATA:{gql_status:"02N42",status_description:"note: no data - unknown subcondition"},INFORMATION:{gql_status:"03N42",status_description:"info: unknown notification"}},Fa={WARNING:"WARNING",INFORMATION:"INFORMATION",UNKNOWN:"UNKNOWN"};Te.notificationSeverityLevel=Fa;Object.freeze(Fa);var _R=Object.values(Fa),Ol={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",DEPRECATION:"DEPRECATION",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",GENERIC:"GENERIC",SCHEMA:"SCHEMA",UNKNOWN:"UNKNOWN"};Te.notificationCategory=Ol;Object.freeze(Ol);var yR=Object.values(Ol),Fw=Ol;Te.notificationClassification=Fw;var El=function(){function e(r){this.code=r.code,this.title=r.title,this.description=r.description,this.severity=r.severity,this.position=Vw(r.position),this.severityLevel=Ww(r.severity),this.rawSeverityLevel=r.severity,this.category=zw(r.category),this.rawCategory=r.category}return e}();Te.Notification=El;var Rn=function(){function e(r){var t;this.gqlStatus=r.gql_status,this.statusDescription=r.status_description,this.diagnosticRecord=(t=r.diagnostic_record)!==null&&t!==void 0?t:{},this.position=this.diagnosticRecord._position!=null?Vw(this.diagnosticRecord._position):void 0,this.severity=Ww(this.diagnosticRecord._severity),this.rawSeverity=this.diagnosticRecord._severity,this.classification=zw(this.diagnosticRecord._classification),this.rawClassification=this.diagnosticRecord._classification,this.isNotification=r.neo4j_code!=null,Object.freeze(this)}return Object.defineProperty(e.prototype,"diagnosticRecordAsJsonString",{get:function(){return vR.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),e}();Te.GqlStatusObject=Rn;function xw(e){var r,t,n;if(e.neo4j_code!=null)return new El({code:e.neo4j_code,title:e.title,description:e.description,severity:(r=e.diagnostic_record)===null||r===void 0?void 0:r._severity,category:(t=e.diagnostic_record)===null||t===void 0?void 0:t._classification,position:(n=e.diagnostic_record)===null||n===void 0?void 0:n._position})}Te.polyfillNotification=xw;function Bw(e){var r,t=e.severity===Fa.WARNING?Kp.WARNING:Kp.INFORMATION,n={gql_status:t.gql_status,status_description:(r=e.description)!==null&&r!==void 0?r:t.status_description,neo4j_code:e.code,title:e.title,diagnostic_record:Ea({},ia.rawPolyfilledDiagnosticRecord)};return e.severity!=null&&(n.diagnostic_record._severity=e.severity),e.category!=null&&(n.diagnostic_record._classification=e.category),e.position!=null&&(n.diagnostic_record._position=e.position),new Rn(n)}Te.polyfillGqlStatusObject=Bw;var aa={SUCCESS:new Rn({gql_status:"00000",status_description:"note: successful completion",diagnostic_record:ia.rawPolyfilledDiagnosticRecord}),NO_DATA:new Rn({gql_status:"02000",status_description:"note: no data",diagnostic_record:ia.rawPolyfilledDiagnosticRecord}),NO_DATA_UNKNOWN_SUBCONDITION:new Rn(Ea(Ea({},Kp.NO_DATA),{diagnostic_record:ia.rawPolyfilledDiagnosticRecord})),OMITTED_RESULT:new Rn({gql_status:"00001",status_description:"note: successful completion - omitted result",diagnostic_record:ia.rawPolyfilledDiagnosticRecord})};Object.freeze(aa);function bR(e){var r,t;function n(a){return(a==null?void 0:a.have_records_streamed)===!0?aa.SUCCESS:(a==null?void 0:a.has_keys)===!1?aa.OMITTED_RESULT:(a==null?void 0:a.pulled)===!0?aa.NO_DATA:aa.NO_DATA_UNKNOWN_SUBCONDITION}if(e.statuses!=null)return e.statuses.map(function(a){return new Rn(a)});var o=n(e.stream_summary),i=pR([o],hR((t=(r=e.notifications)===null||r===void 0?void 0:r.map(Bw))!==null&&t!==void 0?t:[]),!1);return i.sort(function(a,u){return ob(a)-ob(u)})}Te.buildGqlStatusObjectFromMetadata=bR;var mR=Object.freeze({"02":0,"01":1,"00":2});function ob(e){var r,t,n=(r=e.gqlStatus)===null||r===void 0?void 0:r.slice(0,2);return(t=mR[n])!==null&&t!==void 0?t:9999}function gR(e){return e.notifications!=null?e.notifications.map(function(r){return new El(r)}):e.statuses!=null?e.statuses.map(xw).filter(function(r){return r!=null}):[]}Te.buildNotificationsFromMetadata=gR;function Vw(e){return e==null?{}:{offset:Hh.util.toNumber(e.offset),line:Hh.util.toNumber(e.line),column:Hh.util.toNumber(e.column)}}function Ww(e){return _R.includes(e)?e:Fa.UNKNOWN}function zw(e){return yR.includes(e)?e:Fw.UNKNOWN}Te.default=El;Object.defineProperty(Qe,"__esModule",{value:!0});Qe.Stats=Qe.QueryStatistics=Qe.ProfiledPlan=Qe.Plan=Qe.ServerInfo=Qe.queryType=void 0;var Yp=oe,ib=Te,wR=function(){function e(r,t,n,o){var i,a,u;this.query={text:r,parameters:t},this.queryType=n.type,this.counters=new Hw((i=n.stats)!==null&&i!==void 0?i:{}),this.updateStatistics=this.counters,this.plan=n.plan!=null||n.profile!=null?new Zp((a=n.plan)!==null&&a!==void 0?a:n.profile):!1,this.profile=n.profile!=null?new Qp(n.profile):!1,this.notifications=(0,ib.buildNotificationsFromMetadata)(n),this.gqlStatusObjects=(0,ib.buildGqlStatusObjectFromMetadata)(n),this.server=new qw(n.server,o),this.resultConsumedAfter=n.result_consumed_after,this.resultAvailableAfter=n.result_available_after,this.database={name:(u=n.db)!==null&&u!==void 0?u:null}}return e.prototype.hasPlan=function(){return this.plan instanceof Zp},e.prototype.hasProfile=function(){return this.profile instanceof Qp},e}(),Zp=function(){function e(r){this.operatorType=r.operatorType,this.identifiers=r.identifiers,this.arguments=r.args,this.children=r.children!=null?r.children.map(function(t){return new e(t)}):[]}return e}();Qe.Plan=Zp;var Qp=function(){function e(r){this.operatorType=r.operatorType,this.identifiers=r.identifiers,this.arguments=r.args,this.dbHits=_o("dbHits",r),this.rows=_o("rows",r),this.pageCacheMisses=_o("pageCacheMisses",r),this.pageCacheHits=_o("pageCacheHits",r),this.pageCacheHitRatio=_o("pageCacheHitRatio",r),this.time=_o("time",r),this.children=r.children!=null?r.children.map(function(t){return new e(t)}):[]}return e.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},e}();Qe.ProfiledPlan=Qp;var OR=function(){function e(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0}return e}();Qe.Stats=OR;var Hw=function(){function e(r){var t=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(r).forEach(function(n){var o=n.replace(/(-\w)/g,function(i){return i[1].toUpperCase()});o in t._stats?t._stats[o]=Yp.util.toNumber(r[n]):o==="systemUpdates"?t._systemUpdates=Yp.util.toNumber(r[n]):o==="containsSystemUpdates"?t._containsSystemUpdates=r[n]:o==="containsUpdates"&&(t._containsUpdates=r[n])}),this._stats=Object.freeze(this._stats)}return e.prototype.containsUpdates=function(){var r=this;return this._containsUpdates!==void 0?this._containsUpdates:Object.keys(this._stats).reduce(function(t,n){return t+r._stats[n]},0)>0},e.prototype.updates=function(){return this._stats},e.prototype.containsSystemUpdates=function(){return this._containsSystemUpdates!==void 0?this._containsSystemUpdates:this._systemUpdates>0},e.prototype.systemUpdates=function(){return this._systemUpdates},e}();Qe.QueryStatistics=Hw;var qw=function(){function e(r,t){r!=null&&(this.address=r.address,this.agent=r.version),this.protocolVersion=t}return e}();Qe.ServerInfo=qw;function _o(e,r,t){if(t===void 0&&(t=0),r!==!1&&e in r){var n=r[e];return Yp.util.toNumber(n)}else return t}var ER={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"};Qe.queryType=ER;Qe.default=wR;var vr={};Object.defineProperty(vr,"__esModule",{value:!0});vr.notificationFilterDisabledClassification=vr.notificationFilterDisabledCategory=vr.notificationFilterMinimumSeverityLevel=void 0;var Gw={OFF:"OFF",WARNING:"WARNING",INFORMATION:"INFORMATION"};vr.notificationFilterMinimumSeverityLevel=Gw;Object.freeze(Gw);var o_={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",DEPRECATION:"DEPRECATION",GENERIC:"GENERIC",SCHEMA:"SCHEMA"};vr.notificationFilterDisabledCategory=o_;Object.freeze(o_);var SR=o_;vr.notificationFilterDisabledClassification=SR;var TR=function(){function e(){throw this.minimumSeverityLevel=void 0,this.disabledCategories=void 0,this.disabledClassifications=void 0,new Error("Not implemented")}return e}();vr.default=TR;var xa={},_n=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(l){try{s(n.next(l))}catch(d){a(d)}}function c(l){try{s(n.throw(l))}catch(d){a(d)}}function s(l){l.done?i(l.value):o(l.value).then(u,c)}s((n=n.apply(e,r||[])).next())})},yn=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(t=0)),t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},PR=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Kw;Object.defineProperty(xa,"__esModule",{value:!0});var CR=PR(Qe),Yw=oe,Hi=le,AR=Yw.connectionHolder.EMPTY_CONNECTION_HOLDER,IR=function(e){console.log("Uncaught error when processing result: "+e)},RR=function(e){},jR=function(e){},$R=function(){function e(r,t,n,o,i){i===void 0&&(i={high:Number.MAX_VALUE,low:Number.MAX_VALUE}),this[Kw]="Result",this._stack=NR(),this._streamObserverPromise=r,this._p=null,this._query=t,this._parameters=n??{},this._connectionHolder=o??AR,this._keys=null,this._summary=null,this._error=null,this._watermarks=i}return e.prototype.keys=function(){var r=this;return this._keys!==null?Promise.resolve(this._keys):this._error!==null?Promise.reject(this._error):new Promise(function(t,n){r._streamObserverPromise.then(function(o){return o.subscribe(r._decorateObserver({onKeys:function(i){return t(i)},onError:function(i){return n(i)}}))}).catch(n)})},e.prototype.summary=function(){var r=this;return this._summary!==null?Promise.resolve(this._summary):this._error!==null?Promise.reject(this._error):new Promise(function(t,n){r._streamObserverPromise.then(function(o){o.cancel(),o.subscribe(r._decorateObserver({onCompleted:function(i){return t(i)},onError:function(i){return n(i)}}))}).catch(n)})},e.prototype._getOrCreatePromise=function(){var r=this;return this._p==null&&(this._p=new Promise(function(t,n){var o=[],i={onNext:function(a){o.push(a)},onCompleted:function(a){t({records:o,summary:a})},onError:function(a){n(a)}};r.subscribe(i)})),this._p},e.prototype[Symbol.asyncIterator]=function(){var r=this;if(!this.isOpen()){var t=(0,Hi.newError)("Result is already consumed");return{next:function(){return Promise.reject(t)},peek:function(){return Promise.reject(t)}}}var n={paused:!0,firstRun:!0,finished:!1},o=function(){var u,c;if(n.streaming!=null){var s=(c=(u=n.queuedObserver)===null||u===void 0?void 0:u.size)!==null&&c!==void 0?c:0,l=s>=r._watermarks.high,d=s<=r._watermarks.low;l&&!n.paused?(n.paused=!0,n.streaming.pause()):(d&&n.paused||n.firstRun&&!l)&&(n.firstRun=!1,n.paused=!1,n.streaming.resume())}},i=function(){return _n(r,void 0,void 0,function(){var u;return yn(this,function(c){switch(c.label){case 0:return n.queuedObserver!==void 0?[3,2]:(n.queuedObserver=this._createQueuedResultObserver(o),u=n,[4,this._subscribe(n.queuedObserver,!0).catch(function(){})]);case 1:u.streaming=c.sent(),o(),c.label=2;case 2:return[2,n.queuedObserver]}})})},a=function(u){if(u===void 0)throw(0,Hi.newError)("InvalidState: Result stream finished without Summary",Hi.PROTOCOL_ERROR);return!0};return{next:function(){return _n(r,void 0,void 0,function(){var u,c;return yn(this,function(s){switch(s.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:n.summary}]:[4,i()];case 1:return u=s.sent(),[4,u.dequeue()];case 2:return c=s.sent(),c.done===!0&&(n.finished=c.done,n.summary=c.value),[2,c]}})})},return:function(u){return _n(r,void 0,void 0,function(){var c,s,l;return yn(this,function(d){switch(d.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:u??n.summary}]:((l=n.streaming)===null||l===void 0||l.cancel(),[4,i()]);case 1:return c=d.sent(),[4,c.dequeueUntilDone()];case 2:return s=d.sent(),n.finished=!0,s.value=u??s.value,n.summary=s.value,[2,s]}})})},peek:function(){return _n(r,void 0,void 0,function(){var u;return yn(this,function(c){switch(c.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:n.summary}]:[4,i()];case 1:return u=c.sent(),[4,u.head()];case 2:return[2,c.sent()]}})})}}},e.prototype.then=function(r,t){return this._getOrCreatePromise().then(r,t)},e.prototype.catch=function(r){return this._getOrCreatePromise().catch(r)},e.prototype.finally=function(r){return this._getOrCreatePromise().finally(r)},e.prototype.subscribe=function(r){this._subscribe(r).catch(function(){})},e.prototype.isOpen=function(){return this._summary===null&&this._error===null},e.prototype._subscribe=function(r,t){t===void 0&&(t=!1);var n=this._decorateObserver(r);return this._streamObserverPromise.then(function(o){return t&&o.pause(),o.subscribe(n),o}).catch(function(o){return n.onError!=null&&n.onError(o),Promise.reject(o)})},e.prototype._decorateObserver=function(r){var t=this,n,o,i,a=(n=r.onCompleted)!==null&&n!==void 0?n:RR,u=(o=r.onError)!==null&&o!==void 0?o:IR,c=(i=r.onKeys)!==null&&i!==void 0?i:jR,s=function(h){t._releaseConnectionAndGetSummary(h).then(function(p){return t._summary!==null?a.call(r,t._summary):(t._summary=p,a.call(r,p))}).catch(u)},l=function(h){t._connectionHolder.releaseConnection().then(function(){kR(h,t._stack),t._error=h,u.call(r,h)}).catch(u)},d=function(h){return t._keys=h,c.call(r,h)};return{onNext:r.onNext!=null?r.onNext.bind(r):void 0,onKeys:d,onCompleted:s,onError:l}},e.prototype._cancel=function(){this._summary===null&&this._error===null&&this._streamObserverPromise.then(function(r){return r.cancel()}).catch(function(){})},e.prototype._releaseConnectionAndGetSummary=function(r){var t=Yw.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),n=t.validatedQuery,o=t.params,i=this._connectionHolder;return i.getConnection().then(function(a){return i.releaseConnection().then(function(){return a==null?void 0:a.getProtocolVersion()})},function(a){}).then(function(a){return new CR.default(n,o,r,a)})},e.prototype._createQueuedResultObserver=function(r){var t=this;function n(){var s={};return s.promise=new Promise(function(l,d){s.resolve=l,s.reject=d}),s}function o(s){return s instanceof Error}function i(){var s;return _n(this,void 0,void 0,function(){var l;return yn(this,function(d){switch(d.label){case 0:if(a.length>0){if(l=(s=a.shift())!==null&&s!==void 0?s:(0,Hi.newError)("Unexpected empty buffer",Hi.PROTOCOL_ERROR),r(),o(l))throw l;return[2,l]}return u.resolvable=n(),[4,u.resolvable.promise];case 1:return[2,d.sent()]}})})}var a=[],u={resolvable:null},c={onNext:function(s){c._push({done:!1,value:s})},onCompleted:function(s){c._push({done:!0,value:s})},onError:function(s){c._push(s)},_push:function(s){if(u.resolvable!==null){var l=u.resolvable;u.resolvable=null,o(s)?l.reject(s):l.resolve(s)}else a.push(s),r()},dequeue:i,dequeueUntilDone:function(){return _n(t,void 0,void 0,function(){var s;return yn(this,function(l){switch(l.label){case 0:return[4,i()];case 1:return s=l.sent(),s.done===!0?[2,s]:[3,0];case 2:return[2]}})})},head:function(){return _n(t,void 0,void 0,function(){var s,s,l;return yn(this,function(d){switch(d.label){case 0:if(a.length>0){if(s=a[0],o(s))throw s;return[2,s]}u.resolvable=n(),d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,u.resolvable.promise];case 2:return s=d.sent(),a.unshift(s),[2,s];case 3:throw l=d.sent(),a.unshift(l),l;case 4:return r(),[7];case 5:return[2]}})})},get size(){return a.length}};return c},e}();Kw=Symbol.toStringTag;function NR(){var e=new Error("");return e.stack!=null?e.stack.replace(/^Error(\n\r)*/,""):null}function kR(e,r){r!=null&&(e.stack=e.toString()+`
`+r)}xa.default=$R;var Sl={};Object.defineProperty(Sl,"__esModule",{value:!0});var MR=function(){function e(r,t,n){this.keys=r,this.records=t,this.summary=n}return e}();Sl.default=MR;var Ba={};Object.defineProperty(Ba,"__esModule",{value:!0});Ba.Releasable=void 0;var DR=function(){function e(){}return e.prototype.release=function(){throw new Error("Not implemented")},e}();Ba.Releasable=DR;var LR=function(){function e(){}return e.prototype.acquireConnection=function(r){throw Error("Not implemented")},e.prototype.supportsMultiDb=function(){throw Error("Not implemented")},e.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},e.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},e.prototype.supportsSessionAuth=function(){throw Error("Not implemented")},e.prototype.SSREnabled=function(){return!1},e.prototype.verifyConnectivityAndGetServerInfo=function(r){throw Error("Not implemented")},e.prototype.verifyAuthentication=function(r){throw Error("Not implemented")},e.prototype.getNegotiatedProtocolVersion=function(){throw Error("Not Implemented")},e.prototype.close=function(){throw Error("Not implemented")},e}();Ba.default=LR;var i_={};Object.defineProperty(i_,"__esModule",{value:!0});var UR=function(){function e(){}return e.prototype.beginTransaction=function(r){throw new Error("Not implemented")},e.prototype.run=function(r,t,n){throw new Error("Not implemented")},e.prototype.commitTransaction=function(r){throw new Error("Not implemented")},e.prototype.rollbackTransaction=function(r){throw new Error("Not implemented")},e.prototype.resetAndFlush=function(){throw new Error("Not implemented")},e.prototype.isOpen=function(){throw new Error("Not implemented")},e.prototype.getProtocolVersion=function(){throw new Error("Not implemented")},e.prototype.hasOngoingObservableRequests=function(){throw new Error("Not implemented")},e}();i_.default=UR;var Tl={},ab=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(l){try{s(n.next(l))}catch(d){a(d)}}function c(l){try{s(n.throw(l))}catch(d){a(d)}}function s(l){l.done?i(l.value):o(l.value).then(u,c)}s((n=n.apply(e,r||[])).next())})},sb=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(t=0)),t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},FR=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tl,"__esModule",{value:!0});var xR=re,va=Mt,Ic=en,BR=Zo,Rt=xr,$t=le,Zw=FR(xa),VR=function(){function e(r){var t=r.connectionHolder,n=r.onClose,o=r.onBookmarks,i=r.onConnection,a=r.reactive,u=r.fetchSize,c=r.impersonatedUser,s=r.highRecordWatermark,l=r.lowRecordWatermark,d=r.notificationFilter,h=r.apiTelemetryConfig,p=this;this._connectionHolder=t,this._reactive=a,this._state=wt.ACTIVE,this._onClose=n,this._onBookmarks=o,this._onConnection=i,this._onError=this._onErrorCallback.bind(this),this._fetchSize=u,this._onComplete=this._onCompleteCallback.bind(this),this._results=[],this._impersonatedUser=c,this._lowRecordWatermak=l,this._highRecordWatermark=s,this._bookmarks=Ic.Bookmarks.empty(),this._notificationFilter=d,this._apiTelemetryConfig=h,this._acceptActive=function(){},this._activePromise=new Promise(function(v,_){p._acceptActive=v})}return e.prototype._begin=function(r,t,n){var o=this;this._connectionHolder.getConnection().then(function(i){return ab(o,void 0,void 0,function(){var a,u=this;return sb(this,function(c){switch(c.label){case 0:return this._onConnection(),i==null?[3,2]:(a=this,[4,r()]);case 1:return a._bookmarks=c.sent(),[2,i.beginTransaction({bookmarks:this._bookmarks,txConfig:t,mode:this._connectionHolder.mode(),database:this._connectionHolder.database(),impersonatedUser:this._impersonatedUser,notificationFilter:this._notificationFilter,apiTelemetryConfig:this._apiTelemetryConfig,beforeError:function(s){n!=null&&n.onError(s),u._onError(s).catch(function(){})},afterComplete:function(s){n!=null&&n.onComplete(s),s.db!==void 0&&(n==null?void 0:n.onDB)!=null&&n.onDB(s.db),u._onComplete(s)}})];case 2:throw(0,$t.newError)("No connection available")}})})}).catch(function(i){n!=null&&n.onError(i),o._onError(i).catch(function(){})}).finally(function(){return o._acceptActive()})},e.prototype.run=function(r,t){var n=(0,xR.validateQueryAndParameters)(r,t),o=n.validatedQuery,i=n.params,a=this._state.run(o,i,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize,highRecordWatermark:this._highRecordWatermark,lowRecordWatermark:this._lowRecordWatermak,preparationJob:this._activePromise});return this._results.push(a),a},e.prototype.commit=function(){var r=this,t=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:function(n){return r._onCompleteCallback(n,r._bookmarks)},onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=t.state,this._onClose(),new Promise(function(n,o){t.result.subscribe({onCompleted:function(){return n()},onError:function(i){return o(i)}})})},e.prototype.rollback=function(){var r=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=r.state,this._onClose(),new Promise(function(t,n){r.result.subscribe({onCompleted:function(){return t()},onError:function(o){return n(o)}})})},e.prototype.isOpen=function(){return this._state===wt.ACTIVE},e.prototype.close=function(){return ab(this,void 0,void 0,function(){return sb(this,function(r){switch(r.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._onErrorCallback=function(r){return this._state===wt.FAILED?Promise.resolve(null):(this._state=wt.FAILED,this._onClose(),this._results.forEach(function(t){t.isOpen()&&t._streamObserverPromise.then(function(n){return n.onError(r)}).catch(function(n){})}),this._connectionHolder.releaseConnection())},e.prototype._onCompleteCallback=function(r,t){this._onBookmarks(new Ic.Bookmarks(r==null?void 0:r.bookmark),t??Ic.Bookmarks.empty(),r==null?void 0:r.db)},e}(),wt={ACTIVE:{commit:function(e){var r=e.connectionHolder,t=e.onError,n=e.onComplete,o=e.onConnection,i=e.pendingResults,a=e.preparationJob;return{result:ub(!0,r,t,n,o,i,a),state:wt.SUCCEEDED}},rollback:function(e){var r=e.connectionHolder,t=e.onError,n=e.onComplete,o=e.onConnection,i=e.pendingResults,a=e.preparationJob;return{result:ub(!1,r,t,n,o,i,a),state:wt.ROLLED_BACK}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError,i=t.onComplete,a=t.onConnection,u=t.reactive,c=t.fetchSize,s=t.highRecordWatermark,l=t.lowRecordWatermark,d=t.preparationJob,h=d??Promise.resolve(),p=n.getConnection().then(function(v){return h.then(function(){return v})}).then(function(v){if(a(),v!=null)return v.run(e,r,{bookmarks:Ic.Bookmarks.empty(),txConfig:BR.TxConfig.empty(),beforeError:o,afterComplete:i,reactive:u,fetchSize:c,highRecordWatermark:s,lowRecordWatermark:l});throw(0,$t.newError)("No connection available")}).catch(function(v){return new Rt.FailedObserver({error:v,onError:o})});return zt(p,e,r,n,s,l)}},FAILED:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:zt(new Rt.FailedObserver({error:(0,$t.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:t}),"COMMIT",{},r,0,0),state:wt.FAILED}},rollback:function(e){var r=e.connectionHolder;return e.onError,e.onComplete,{result:zt(new Rt.CompletedObserver,"ROLLBACK",{},r,0,0),state:wt.FAILED}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError;return t.onComplete,zt(new Rt.FailedObserver({error:(0,$t.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:o}),e,r,n,0,0)}},SUCCEEDED:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:zt(new Rt.FailedObserver({error:(0,$t.newError)("Cannot commit this transaction, because it has already been committed."),onError:t}),"COMMIT",{},va.EMPTY_CONNECTION_HOLDER,0,0),state:wt.SUCCEEDED,connectionHolder:r}},rollback:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:zt(new Rt.FailedObserver({error:(0,$t.newError)("Cannot rollback this transaction, because it has already been committed."),onError:t}),"ROLLBACK",{},va.EMPTY_CONNECTION_HOLDER,0,0),state:wt.SUCCEEDED,connectionHolder:r}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError;return t.onComplete,zt(new Rt.FailedObserver({error:(0,$t.newError)("Cannot run query in this transaction, because it has already been committed."),onError:o}),e,r,n,0,0)}},ROLLED_BACK:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:zt(new Rt.FailedObserver({error:(0,$t.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:t}),"COMMIT",{},r,0,0),state:wt.ROLLED_BACK}},rollback:function(e){var r=e.connectionHolder;return e.onError,e.onComplete,{result:zt(new Rt.FailedObserver({error:(0,$t.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},r,0,0),state:wt.ROLLED_BACK}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError;return t.onComplete,zt(new Rt.FailedObserver({error:(0,$t.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:o}),e,r,n,0,0)}}};function ub(e,r,t,n,o,i,a){var u=a??Promise.resolve(),c=r.getConnection().then(function(s){return u.then(function(){return s})}).then(function(s){return o(),i.forEach(function(l){return l._cancel()}),Promise.all(i.map(function(l){return l.summary()})).then(function(l){if(s!=null)return e?s.commitTransaction({beforeError:t,afterComplete:n}):s.rollbackTransaction({beforeError:t,afterComplete:n});throw(0,$t.newError)("No connection available")})}).catch(function(s){return new Rt.FailedObserver({error:s,onError:t})});return new Zw.default(c,e?"COMMIT":"ROLLBACK",{},r,{high:Number.MAX_VALUE,low:Number.MAX_VALUE})}function zt(e,r,t,n,o,i){return n===void 0&&(n=va.EMPTY_CONNECTION_HOLDER),new Zw.default(Promise.resolve(e),r,t,new va.ReadOnlyConnectionHolder(n??va.EMPTY_CONNECTION_HOLDER),{low:i,high:o})}Tl.default=VR;var Pl={};Object.defineProperty(Pl,"__esModule",{value:!0});var WR=function(){function e(r){var t=r.run;this._run=t}return e.fromTransaction=function(r){return new e({run:r.run.bind(r)})},e.prototype.run=function(r,t){return this._run(r,t)},e}();Pl.default=WR;var Cl={},zR=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fc=f&&f.__assign||function(){return Fc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Fc.apply(this,arguments)},HR=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Qw;Object.defineProperty(Cl,"__esModule",{value:!0});var qR=HR(Tl),GR=function(e){zR(r,e);function r(t){var n=t.connectionHolder,o=t.onClose,i=t.onBookmarks,a=t.onConnection,u=t.reactive,c=t.fetchSize,s=t.impersonatedUser,l=t.highRecordWatermark,d=t.lowRecordWatermark,h=t.notificationFilter,p=t.apiTelemetryConfig,v=t.onDbCallback,_=e.call(this,{connectionHolder:n,onClose:o,onBookmarks:i,onConnection:a,reactive:u,fetchSize:c,impersonatedUser:s,highRecordWatermark:l,lowRecordWatermark:d,notificationFilter:h,apiTelemetryConfig:p})||this;return _[Qw]="TransactionPromise",_._onDbCallback=v,_}return r.prototype.then=function(t,n){return this._getOrCreateBeginPromise().then(t,n)},r.prototype.catch=function(t){return this._getOrCreateBeginPromise().catch(t)},r.prototype.finally=function(t){return this._getOrCreateBeginPromise().finally(t)},r.prototype._getOrCreateBeginPromise=function(){var t=this;return this._beginPromise==null&&(this._beginPromise=new Promise(function(n,o){t._resolve=n,t._reject=o,t._beginError!=null&&o(t._beginError),t._beginMetadata!=null&&n(t._toTransaction())})),this._beginPromise},r.prototype._toTransaction=function(){return Fc(Fc({},this),{run:e.prototype.run.bind(this),commit:e.prototype.commit.bind(this),rollback:e.prototype.rollback.bind(this),close:e.prototype.close.bind(this),isOpen:e.prototype.isOpen.bind(this),_begin:this._begin.bind(this)})},r.prototype._begin=function(t,n){return e.prototype._begin.call(this,t,n,{onError:this._onBeginError.bind(this),onComplete:this._onBeginMetadata.bind(this),onDB:this._onDbCallback})},r.prototype._onBeginError=function(t){this._beginError=t,this._reject!=null&&this._reject(t)},r.prototype._onBeginMetadata=function(t){this._beginMetadata=t??{},this._resolve!=null&&this._resolve(this._toTransaction())},r}(qR.default);Qw=Symbol.toStringTag;Cl.default=GR;var Al={},Va={};Object.defineProperty(Va,"__esModule",{value:!0});Va.cacheKey=void 0;var KR=Lt;function YR(e,r){var t;return r!=null?"basic:"+r:e===void 0?"DEFAULT":e.scheme==="basic"?"basic:"+((t=e.principal)!==null&&t!==void 0?t:""):e.scheme==="kerberos"?"kerberos:"+e.credentials:e.scheme==="bearer"?"bearer:"+e.credentials:e.scheme==="none"?"none":(0,KR.stringify)(e,{sortedElements:!0})}Va.cacheKey=YR;var qi=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(l){try{s(n.next(l))}catch(d){a(d)}}function c(l){try{s(n.throw(l))}catch(d){a(d)}}function s(l){l.done?i(l.value):o(l.value).then(u,c)}s((n=n.apply(e,r||[])).next())})},Gi=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(t=0)),t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},rc=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},nc=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))},a_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Al,"__esModule",{value:!0});var ZR=xr,QR=re,at=z,bn=le,XR=a_(xa),cb=Mt,JR=La,Ki=en,Ar=Zo,ej=a_(Cl),tj=a_(Pl),rj=Va,nj=function(){function e(r){var t=r.mode,n=r.connectionProvider,o=r.bookmarks,i=r.database,a=r.config,u=r.reactive,c=r.fetchSize,s=r.impersonatedUser,l=r.bookmarkManager,d=r.notificationFilter,h=r.auth,p=r.log,v=r.homeDatabaseCallback,_;this._mode=t,this._database=i,this._reactive=u,this._fetchSize=c,this._homeDatabaseCallback=v,this._auth=h,this._getConnectionAcquistionBookmarks=this._getConnectionAcquistionBookmarks.bind(this),this._readConnectionHolder=new cb.ConnectionHolder({mode:at.ACCESS_MODE_READ,auth:h,database:i,bookmarks:o,connectionProvider:n,impersonatedUser:s,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:p}),this._writeConnectionHolder=new cb.ConnectionHolder({mode:at.ACCESS_MODE_WRITE,auth:h,database:i,bookmarks:o,connectionProvider:n,impersonatedUser:s,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:p}),this._open=!0,this._hasTx=!1,this._impersonatedUser=s,this._lastBookmarks=o??Ki.Bookmarks.empty(),this._configuredBookmarks=this._lastBookmarks,this._transactionExecutor=oj(a),this._databaseNameResolved=this._database!=="";var b=this._calculateWatermaks();this._lowRecordWatermark=b.low,this._highRecordWatermark=b.high,this._results=[],this._bookmarkManager=l,this._notificationFilter=d,this._log=p,this._databaseGuess=a==null?void 0:a.cachedHomeDatabase,this._isRoutingSession=(_=a==null?void 0:a.routingDriver)!==null&&_!==void 0?_:!1}return e.prototype.run=function(r,t,n){var o=this,i=(0,QR.validateQueryAndParameters)(r,t),a=i.validatedQuery,u=i.params,c=n!=null?new Ar.TxConfig(n,this._log):Ar.TxConfig.empty(),s=this._run(a,u,function(l){return qi(o,void 0,void 0,function(){var d,h=this;return Gi(this,function(p){switch(p.label){case 0:return[4,this._bookmarks()];case 1:return d=p.sent(),this._assertSessionIsOpen(),[2,l.run(a,u,{bookmarks:d,txConfig:c,mode:this._mode,database:this._database,apiTelemetryConfig:{api:at.TELEMETRY_APIS.AUTO_COMMIT_TRANSACTION},impersonatedUser:this._impersonatedUser,afterComplete:function(v){return h._onCompleteCallback(v,d)},reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,onDb:this._onDatabaseNameResolved.bind(this)})]}})})});return this._results.push(s),s},e.prototype._run=function(r,t,n){var o=this._acquireAndConsumeConnection(n),i=o.connectionHolder,a=o.resultPromise,u=a.catch(function(s){return Promise.resolve(new ZR.FailedObserver({error:s}))}),c={high:this._highRecordWatermark,low:this._lowRecordWatermark};return new XR.default(u,r,t,i,c)},e.prototype._acquireConnection=function(r){var t=this,n=this._acquireAndConsumeConnection(r),o=n.connectionHolder,i=n.resultPromise;return i.then(function(a){return qi(t,void 0,void 0,function(){return Gi(this,function(u){switch(u.label){case 0:return[4,o.releaseConnection()];case 1:return u.sent(),[2,a]}})})})},e.prototype._acquireAndConsumeConnection=function(r){var t,n=this._connectionHolderWithMode(this._mode);return this._open?!this._hasTx&&n.initializeConnection(this._databaseGuess)?t=n.getConnection().then(function(o){return r(o)}):t=Promise.reject((0,bn.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):t=Promise.reject((0,bn.newError)("Cannot run query in a closed session.")),{connectionHolder:n,resultPromise:t}},e.prototype.beginTransaction=function(r){var t=r,n=Ar.TxConfig.empty();return t!=null&&(n=new Ar.TxConfig(t,this._log)),this._beginTransaction(this._mode,n,{api:at.TELEMETRY_APIS.UNMANAGED_TRANSACTION})},e.prototype._beginTransaction=function(r,t,n){var o=this;if(!this._open)throw(0,bn.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,bn.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var i=e._validateSessionMode(r),a=this._connectionHolderWithMode(i);a.initializeConnection(this._databaseGuess),this._hasTx=!0;var u=new ej.default({connectionHolder:a,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmarks:function(c,s,l){return o._updateBookmarks(c,s,l)},onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,apiTelemetryConfig:n,onDbCallback:this._onDatabaseNameResolved.bind(this)});return u._begin(function(){return o._bookmarks()},t),u},e.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,bn.newError)("You cannot run more transactions on a closed session.")},e.prototype._transactionClosed=function(){this._hasTx=!1},e.prototype.lastBookmark=function(){return this.lastBookmarks()},e.prototype.lastBookmarks=function(){return this._lastBookmarks.values()},e.prototype._bookmarks=function(){var r;return qi(this,void 0,void 0,function(){var t;return Gi(this,function(n){switch(n.label){case 0:return[4,(r=this._bookmarkManager)===null||r===void 0?void 0:r.getBookmarks()];case 1:return t=n.sent(),t===void 0?[2,this._lastBookmarks]:[2,new Ki.Bookmarks(nc(nc([],rc(t),!1),rc(this._configuredBookmarks),!1))]}})})},e.prototype.readTransaction=function(r,t){var n=new Ar.TxConfig(t,this._log);return this._runTransaction(at.ACCESS_MODE_READ,n,r)},e.prototype.writeTransaction=function(r,t){var n=new Ar.TxConfig(t,this._log);return this._runTransaction(at.ACCESS_MODE_WRITE,n,r)},e.prototype._runTransaction=function(r,t,n){var o=this;return this._transactionExecutor.execute(function(i){return o._beginTransaction(r,t,i)},n)},e.prototype.executeRead=function(r,t){var n=new Ar.TxConfig(t,this._log);return this._executeInTransaction(at.ACCESS_MODE_READ,n,r)},e.prototype.executeWrite=function(r,t){var n=new Ar.TxConfig(t,this._log);return this._executeInTransaction(at.ACCESS_MODE_WRITE,n,r)},e.prototype._executeInTransaction=function(r,t,n){var o=this;return this._transactionExecutor.execute(function(i){return o._beginTransaction(r,t,i)},n,tj.default.fromTransaction)},e.prototype._onDatabaseNameResolved=function(r){if(this._isRoutingSession&&(this._databaseGuess=r,!this._databaseNameResolved)){var t=r??"";this._database=t,this._readConnectionHolder.setDatabase(t),this._writeConnectionHolder.setDatabase(t),this._databaseNameResolved=!0,this._homeDatabaseCallback!=null&&this._homeDatabaseCallback((0,rj.cacheKey)(this._auth,this._impersonatedUser),r)}},e.prototype._getConnectionAcquistionBookmarks=function(){var r;return qi(this,void 0,void 0,function(){var t;return Gi(this,function(n){switch(n.label){case 0:return[4,(r=this._bookmarkManager)===null||r===void 0?void 0:r.getBookmarks()];case 1:return t=n.sent(),t===void 0?[2,this._lastBookmarks]:[2,new Ki.Bookmarks(nc(nc([],rc(this._configuredBookmarks),!1),rc(t),!1))]}})})},e.prototype._updateBookmarks=function(r,t,n){var o,i,a;r!=null&&!r.isEmpty()&&((o=this._bookmarkManager)===null||o===void 0||o.updateBookmarks((i=t==null?void 0:t.values())!==null&&i!==void 0?i:[],(a=r==null?void 0:r.values())!==null&&a!==void 0?a:[]).catch(function(){}),this._lastBookmarks=r,this._configuredBookmarks=Ki.Bookmarks.empty())},e.prototype.close=function(){return qi(this,void 0,void 0,function(){return Gi(this,function(r){switch(r.label){case 0:return this._open?(this._open=!1,this._results.forEach(function(t){return t._cancel()}),this._transactionExecutor.close(),[4,this._readConnectionHolder.close(this._hasTx)]):[3,3];case 1:return r.sent(),[4,this._writeConnectionHolder.close(this._hasTx)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._connectionHolderWithMode=function(r){if(r===at.ACCESS_MODE_READ)return this._readConnectionHolder;if(r===at.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,bn.newError)("Unknown access mode: "+r)},e.prototype._onCompleteCallback=function(r,t){this._updateBookmarks(new Ki.Bookmarks(r.bookmark),t,r.db)},e.prototype._calculateWatermaks=function(){return this._fetchSize===at.FETCH_ALL?{low:Number.MAX_VALUE,high:Number.MAX_VALUE}:{low:.3*this._fetchSize,high:.7*this._fetchSize}},e.prototype._configureTransactionExecutor=function(r,t){this._transactionExecutor.pipelineBegin=r,this._transactionExecutor.telemetryApi=t},e._validateSessionMode=function(r){var t=r??at.ACCESS_MODE_WRITE;if(t!==at.ACCESS_MODE_READ&&t!==at.ACCESS_MODE_WRITE)throw(0,bn.newError)("Illegal session mode "+t);return t},e}();function oj(e){var r,t=(r=e==null?void 0:e.maxTransactionRetryTime)!==null&&r!==void 0?r:null;return new JR.TransactionExecutor(t)}Al.default=nj;var Xe={},Qo={},xc=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(l){try{s(n.next(l))}catch(d){a(d)}}function c(l){try{s(n.throw(l))}catch(d){a(d)}}function s(l){l.done?i(l.value):o(l.value).then(u,c)}s((n=n.apply(e,r||[])).next())})},Bc=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(t=0)),t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},qh=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},lb=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},fb=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(Qo,"__esModule",{value:!0});Qo.bookmarkManager=void 0;var ij=function(){function e(){throw new Error("Not implemented")}return e.prototype.updateBookmarks=function(r,t){return xc(this,void 0,void 0,function(){return Bc(this,function(n){throw new Error("Not implemented")})})},e.prototype.getBookmarks=function(){return xc(this,void 0,void 0,function(){return Bc(this,function(r){throw new Error("Not implemented")})})},e}();Qo.default=ij;function aj(e){e===void 0&&(e={});var r=new Set(e.initialBookmarks);return new sj(r,e.bookmarksSupplier,e.bookmarksConsumer)}Qo.bookmarkManager=aj;var sj=function(){function e(r,t,n){this._bookmarks=r,this._bookmarksSupplier=t,this._bookmarksConsumer=n}return e.prototype.updateBookmarks=function(r,t){return xc(this,void 0,void 0,function(){var n,o,i,c,a,u,c,s,l,d,h;return Bc(this,function(p){switch(p.label){case 0:n=this._bookmarks;try{for(o=qh(r),i=o.next();!i.done;i=o.next())c=i.value,n.delete(c)}catch(v){s={error:v}}finally{try{i&&!i.done&&(l=o.return)&&l.call(o)}finally{if(s)throw s.error}}try{for(a=qh(t),u=a.next();!u.done;u=a.next())c=u.value,n.add(c)}catch(v){d={error:v}}finally{try{u&&!u.done&&(h=a.return)&&h.call(a)}finally{if(d)throw d.error}}return typeof this._bookmarksConsumer!="function"?[3,2]:[4,this._bookmarksConsumer(fb([],lb(n),!1))];case 1:p.sent(),p.label=2;case 2:return[2]}})})},e.prototype.getBookmarks=function(){var r;return xc(this,void 0,void 0,function(){var t,n,o,i,a,u,c;return Bc(this,function(s){switch(s.label){case 0:return t=new Set(this._bookmarks),typeof this._bookmarksSupplier!="function"?[3,2]:[4,this._bookmarksSupplier()];case 1:n=(r=s.sent())!==null&&r!==void 0?r:[];try{for(o=qh(n),i=o.next();!i.done;i=o.next())a=i.value,t.add(a)}catch(l){u={error:l}}finally{try{i&&!i.done&&(c=o.return)&&c.call(o)}finally{if(u)throw u.error}}s.label=2;case 2:return[2,fb([],lb(t),!1)]}})})},e}(),Il={},Rl=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(l){try{s(n.next(l))}catch(d){a(d)}}function c(l){try{s(n.throw(l))}catch(d){a(d)}}function s(l){l.done?i(l.value):o(l.value).then(u,c)}s((n=n.apply(e,r||[])).next())})},jl=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(t=0)),t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},uj=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Il,"__esModule",{value:!0});var cj=uj(Sl),lj=le,fj=function(){function e(){}return e.prototype.eagerResultTransformer=function(){return db},e.prototype.eager=function(){return db},e.prototype.mappedResultTransformer=function(r){return hb(r)},e.prototype.mapped=function(r){return hb(r)},e.prototype.first=function(){return dj},e.prototype.summary=function(){return hj},e}(),Xw=new fj;Object.freeze(Xw);Il.default=Xw;function db(e){return Rl(this,void 0,void 0,function(){var r,t,n,o;return jl(this,function(i){switch(i.label){case 0:return[4,e];case 1:return r=i.sent(),t=r.summary,n=r.records,[4,e.keys()];case 2:return o=i.sent(),[2,new cj.default(o,n,t)]}})})}function hb(e){var r=this;if(e==null||e.collect==null&&e.map==null)throw(0,lj.newError)("Requires a map or/and a collect functions.");return function(t){return Rl(r,void 0,void 0,function(){return jl(this,function(n){switch(n.label){case 0:return[4,new Promise(function(o,i){var a={records:[],keys:[]};t.subscribe({onKeys:function(u){a.keys=u},onNext:function(u){if(e.map!=null){var c=e.map(u);c!==void 0&&a.records.push(c)}else a.records.push(u)},onCompleted:function(u){if(e.collect!=null)o(e.collect(a.records,u,a.keys));else{var c={records:a.records,summary:u,keys:a.keys};o(c)}},onError:function(u){i(u)}})})];case 1:return[2,n.sent()]}})})}}function dj(e){return Rl(this,void 0,void 0,function(){var r,t,n,o;return jl(this,function(i){switch(i.label){case 0:return r=e[Symbol.asyncIterator](),[4,r.next()];case 1:t=i.sent(),n=t.value,o=t.done,i.label=2;case 2:return i.trys.push([2,,3,6]),o===!0?[2,void 0]:[2,n];case 3:return r.return==null?[3,5]:[4,r.return()];case 4:i.sent(),i.label=5;case 5:return[7];case 6:return[2]}})})}function hj(e){return Rl(this,void 0,void 0,function(){return jl(this,function(r){switch(r.label){case 0:return[4,e.summary()];case 1:return[2,r.sent()]}})})}var s_={},Gh=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(l){try{s(n.next(l))}catch(d){a(d)}}function c(l){try{s(n.throw(l))}catch(d){a(d)}}function s(l){l.done?i(l.value):o(l.value).then(u,c)}s((n=n.apply(e,r||[])).next())})},Kh=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(t=0)),t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(s_,"__esModule",{value:!0});var pj=z,vj=function(){function e(r){this._createSession=r}return e.prototype.execute=function(r,t,n){return Gh(this,void 0,void 0,function(){var o,i,a,u=this;return Kh(this,function(c){switch(c.label){case 0:o=this._createSession({database:r.database,bookmarkManager:r.bookmarkManager,impersonatedUser:r.impersonatedUser,auth:r.auth}),i=_j(r.signal,"abort",function(){return Gh(u,void 0,void 0,function(){return Kh(this,function(s){switch(s.label){case 0:return[4,o.close()];case 1:return[2,s.sent()]}})})}),o._configureTransactionExecutor(!0,pj.TELEMETRY_APIS.EXECUTE_QUERY),c.label=1;case 1:return c.trys.push([1,,3,5]),a=r.routing==="READ"?o.executeRead.bind(o):o.executeWrite.bind(o),[4,a(function(s){return Gh(u,void 0,void 0,function(){var l;return Kh(this,function(d){switch(d.label){case 0:return l=s.run(t,n),[4,r.resultTransformer(l)];case 1:return[2,d.sent()]}})})},r.transactionConfig)];case 2:return[2,c.sent()];case 3:return i.uninstall(),[4,o.close()];case 4:return c.sent(),[7];case 5:return[2]}})})},e}();s_.default=vj;function _j(e,r,t){return typeof(e==null?void 0:e.addEventListener)=="function"&&e.addEventListener(r,t),{uninstall:function(){typeof(e==null?void 0:e.removeEventListener)=="function"&&e.removeEventListener(r,t)}}}var u_={};Object.defineProperty(u_,"__esModule",{value:!0});var yj=function(){function e(r){this.maxSize=r,this.pruneCount=Math.max(Math.round(.01*r*Math.log(r)),1),this.map=new Map}return e.prototype.set=function(r,t){this.map.set(r,{database:t,lastUsed:Date.now()}),this._pruneCache()},e.prototype.get=function(r){var t=this.map.get(r);if(t!==void 0)return t.lastUsed=Date.now(),t.database},e.prototype.delete=function(r){this.map.delete(r)},e.prototype._pruneCache=function(){if(this.map.size>this.maxSize)for(var r=Array.from(this.map.entries()).sort(function(n,o){return n[1].lastUsed-o[1].lastUsed}),t=0;t<this.pruneCount;t++)this.map.delete(r[t][0])},e}();u_.default=yj;var Xp=f&&f.__assign||function(){return Xp=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Xp.apply(this,arguments)},pb=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(l){try{s(n.next(l))}catch(d){a(d)}}function c(l){try{s(n.throw(l))}catch(d){a(d)}}function s(l){l.done?i(l.value):o(l.value).then(u,c)}s((n=n.apply(e,r||[])).next())})},vb=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(t=0)),t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Wa=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.QueryConfig=Xe.SessionConfig=Xe.routing=Xe.WRITE=Xe.READ=Xe.Driver=void 0;var _b=en,bj=Wa(gl),Un=z,mj=Kn,yb=Wa(Al),gj=re,wj=Qo,Oj=Wa(Il),Ej=Wa(s_),Sj=le,Tj=Wa(u_),Pj=Va,Cj=60*60*1e3,Aj=1e3,Ij=1e4,Rc=Un.ACCESS_MODE_READ;Xe.READ=Rc;var c_=Un.ACCESS_MODE_WRITE;Xe.WRITE=c_;var Rj=0,jj=function(){function e(){this.defaultAccessMode=c_,this.bookmarks=[],this.database="",this.impersonatedUser=void 0,this.auth=void 0,this.fetchSize=void 0,this.bookmarkManager=void 0,this.notificationFilter=void 0}return e}();Xe.SessionConfig=jj;var $j="WRITE",Nj="READ",Co={WRITE:$j,READ:Nj};Xe.routing=Co;Object.freeze(Co);var kj=function(){function e(){this.routing=Co.WRITE,this.resultTransformer=void 0,this.database="",this.impersonatedUser=void 0,this.bookmarkManager=void 0,this.transactionConfig=void 0,this.auth=void 0,this.signal=void 0}return e}();Xe.QueryConfig=kj;var Jw=function(){function e(r,t,n,o,i){t===void 0&&(t={}),o===void 0&&(o=function(u){return new yb.default(u)}),i===void 0&&(i=function(u){return new Ej.default(u)}),Dj(t);var a=mj.Logger.create(t);Mj(t,a),this._id=Rj++,this._meta=r,this._config=t,this._log=a,this._createConnectionProvider=n,this._createSession=o,this._defaultExecuteQueryBookmarkManager=(0,wj.bookmarkManager)(),this._queryExecutor=i(this.session.bind(this)),this._connectionProvider=null,this.homeDatabaseCache=new Tj.default(Ij),this._afterConstruction()}return Object.defineProperty(e.prototype,"executeQueryBookmarkManager",{get:function(){return this._defaultExecuteQueryBookmarkManager},enumerable:!1,configurable:!0}),e.prototype.executeQuery=function(r,t,n){var o,i,a;return n===void 0&&(n={}),pb(this,void 0,void 0,function(){var u,c,s;return vb(this,function(l){switch(l.label){case 0:if(u=n.bookmarkManager===null?void 0:(o=n.bookmarkManager)!==null&&o!==void 0?o:this.executeQueryBookmarkManager,c=(i=n.resultTransformer)!==null&&i!==void 0?i:Oj.default.eagerResultTransformer(),s=(a=n.routing)!==null&&a!==void 0?a:Co.WRITE,s!==Co.READ&&s!==Co.WRITE)throw(0,Sj.newError)('Illegal query routing config: "'.concat(s,'"'));return[4,this._queryExecutor.execute({resultTransformer:c,bookmarkManager:u,routing:s,database:n.database,impersonatedUser:n.impersonatedUser,transactionConfig:n.transactionConfig,auth:n.auth,signal:n.signal},r,t)];case 1:return[2,l.sent()]}})})},e.prototype.verifyConnectivity=function(r){var t=r===void 0?{}:r,n=t.database,o=n===void 0?"":n,i=this._getOrCreateConnectionProvider();return i.verifyConnectivityAndGetServerInfo({database:o,accessMode:Rc})},e.prototype.verifyAuthentication=function(r){var t=r===void 0?{}:r,n=t.database,o=t.auth;return pb(this,void 0,void 0,function(){var i;return vb(this,function(a){switch(a.label){case 0:return i=this._getOrCreateConnectionProvider(),[4,i.verifyAuthentication({database:n??"system",auth:o,accessMode:Rc})];case 1:return[2,a.sent()]}})})},e.prototype.getServerInfo=function(r){var t=r===void 0?{}:r,n=t.database,o=n===void 0?"":n,i=this._getOrCreateConnectionProvider();return i.verifyConnectivityAndGetServerInfo({database:o,accessMode:Rc})},e.prototype.supportsMultiDb=function(){var r=this._getOrCreateConnectionProvider();return r.supportsMultiDb()},e.prototype.supportsTransactionConfig=function(){var r=this._getOrCreateConnectionProvider();return r.supportsTransactionConfig()},e.prototype.supportsUserImpersonation=function(){var r=this._getOrCreateConnectionProvider();return r.supportsUserImpersonation()},e.prototype.supportsSessionAuth=function(){var r=this._getOrCreateConnectionProvider();return r.supportsSessionAuth()},e.prototype.getNegotiatedProtocolVersion=function(){var r=this._getOrCreateConnectionProvider();return r.getNegotiatedProtocolVersion()},e.prototype.isEncrypted=function(){return this._isEncrypted()},e.prototype._supportsRouting=function(){return this._meta.routing},e.prototype._isEncrypted=function(){return this._config.encrypted===gj.ENCRYPTION_ON||this._config.encrypted===!0},e.prototype._getTrust=function(){return this._config.trust},e.prototype.session=function(r){var t=r===void 0?{}:r,n=t.defaultAccessMode,o=n===void 0?c_:n,i=t.bookmarks,a=t.database,u=a===void 0?"":a,c=t.impersonatedUser,s=t.fetchSize,l=t.bookmarkManager,d=t.notificationFilter,h=t.auth;return this._newSession({defaultAccessMode:o,bookmarkOrBookmarks:i,database:u,reactive:!1,impersonatedUser:c,fetchSize:eO(s,this._config.fetchSize),bookmarkManager:l,notificationFilter:d,auth:h})},e.prototype.close=function(){return this._log.info("Driver ".concat(this._id," closing")),this._connectionProvider!=null?this._connectionProvider.close():Promise.resolve()},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._afterConstruction=function(){this._log.info("".concat(this._meta.typename," driver ").concat(this._id," created for server address ").concat(this._meta.address.toString()))},e.prototype._homeDatabaseCallback=function(r,t){this.homeDatabaseCache.set(r,t)},e.prototype._newSession=function(r){var t=r.defaultAccessMode,n=r.bookmarkOrBookmarks,o=r.database,i=r.reactive,a=r.impersonatedUser,u=r.fetchSize,c=r.bookmarkManager,s=r.notificationFilter,l=r.auth,d=yb.default._validateSessionMode(t),h=this._getOrCreateConnectionProvider(),p=this.homeDatabaseCache.get((0,Pj.cacheKey)(l,a)),v=this._homeDatabaseCallback.bind(this),_=n!=null?new _b.Bookmarks(n):_b.Bookmarks.empty();return this._createSession({mode:d,database:o??"",connectionProvider:h,bookmarks:_,config:Xp({cachedHomeDatabase:p,routingDriver:this._supportsRouting()},this._config),reactive:i,impersonatedUser:a,fetchSize:u,bookmarkManager:c,notificationFilter:s,auth:l,log:this._log,homeDatabaseCallback:v})},e.prototype._getOrCreateConnectionProvider=function(){return this._connectionProvider==null&&(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,Fj(this._config))),this._connectionProvider},e}();Xe.Driver=Jw;function Mj(e,r){var t,n,o=e.resolver;if(o!=null&&typeof o!="function")throw new TypeError("Configured resolver should be a function. Got: ".concat(typeof o));if(e.connectionAcquisitionTimeout<e.connectionTimeout&&r.warn('Configuration for "connectionAcquisitionTimeout" should be greater than or equal to "connectionTimeout". Otherwise, the connection acquisition timeout will take precedence for over the connection timeout in scenarios where a new connection is created while it is acquired'),((t=e.notificationFilter)===null||t===void 0?void 0:t.disabledCategories)!=null&&((n=e.notificationFilter)===null||n===void 0?void 0:n.disabledClassifications)!=null)throw new Error(`The notificationFilter can't have both "disabledCategories" and  "disabledClassifications" configured at the same time.`);return e}function Dj(e){e.maxConnectionLifetime=Yh(e.maxConnectionLifetime,Cj),e.maxConnectionPoolSize=Yh(e.maxConnectionPoolSize,Un.DEFAULT_POOL_MAX_SIZE),e.connectionAcquisitionTimeout=Yh(e.connectionAcquisitionTimeout,Un.DEFAULT_POOL_ACQUISITION_TIMEOUT),e.fetchSize=eO(e.fetchSize,Aj),e.connectionTimeout=Lj(e),e.connectionLivenessCheckTimeout=Uj(e.connectionLivenessCheckTimeout)}function Yh(e,r){var t=parseInt(e,10);return t>0||t===0?t:t<0?Number.MAX_SAFE_INTEGER:r}function eO(e,r){var t=parseInt(e,10);if(t>0||t===Un.FETCH_ALL)return t;if(t===0||t<0)throw new Error("The fetch size can only be a positive value or ".concat(Un.FETCH_ALL," for ALL. However fetchSize = ").concat(t));return r}function Lj(e){var r=parseInt(e.connectionTimeout,10);return r===0||!isNaN(r)&&r<0?null:isNaN(r)?Un.DEFAULT_CONNECTION_TIMEOUT_MILLIS:r}function Uj(e){if(e!=null){var r=parseInt(e,10);if(r<0||Number.isNaN(r))throw new Error("The connectionLivenessCheckTimeout can only be a positive value or 0 for always. However connectionLivenessCheckTimeout = ".concat(r));return r}}function Fj(e){return new bj.default(e.resolver)}Xe.default=Jw;var $l={};Object.defineProperty($l,"__esModule",{value:!0});var xj=le,Bj=Lt,Vj={basic:function(e,r,t){return t!=null?{scheme:"basic",principal:e,credentials:r,realm:t}:{scheme:"basic",principal:e,credentials:r}},kerberos:function(e){return{scheme:"kerberos",principal:"",credentials:e}},bearer:function(e){return{scheme:"bearer",credentials:e}},none:function(){return{scheme:"none"}},custom:function(e,r,t,n,o){var i={scheme:n,principal:e};if(Zh(r)&&(i.credentials=r),Zh(t)&&(i.realm=t),Zh(o)){try{(0,Bj.stringify)(o)}catch(a){throw(0,xj.newError)("Circular references in custom auth token parameters",void 0,a)}i.parameters=o}return i}};function Zh(e){return!(e==null||e===""||Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length===0)}$l.default=Vj;var _r={},Jp=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(l){try{s(n.next(l))}catch(d){a(d)}}function c(l){try{s(n.throw(l))}catch(d){a(d)}}function s(l){l.done?i(l.value):o(l.value).then(u,c)}s((n=n.apply(e,r||[])).next())})},ev=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(t=0)),t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Wj=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_r,"__esModule",{value:!0});_r.staticAuthTokenManager=_r.authTokenManagers=_r.AuthTokenAndExpiration=void 0;var zj=Wj($l),Hj=oe,qj=function(){function e(){}return e.prototype.getToken=function(){throw new Error("Not Implemented")},e.prototype.handleSecurityException=function(r,t){throw new Error("Not implemented")},e}();_r.default=qj;var Gj=function(){function e(){this.token=zj.default.none(),this.expiration=void 0}return e}();_r.AuthTokenAndExpiration=Gj;var Kj=function(){function e(){}return e.prototype.bearer=function(r){var t=r.tokenProvider;if(typeof t!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof t));return new bb(t,["Neo.ClientError.Security.Unauthorized","Neo.ClientError.Security.TokenExpired"])},e.prototype.basic=function(r){var t=this,n=r.tokenProvider;if(typeof n!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof n));return new bb(function(){return Jp(t,void 0,void 0,function(){var o;return ev(this,function(i){switch(i.label){case 0:return o={},[4,n()];case 1:return[2,(o.token=i.sent(),o)]}})})},["Neo.ClientError.Security.Unauthorized"])},e}(),tO=new Kj;_r.authTokenManagers=tO;Object.freeze(tO);function Yj(e){var r=e.authToken;return new Qj(r)}_r.staticAuthTokenManager=Yj;var Zj=function(){function e(r){r===void 0&&(r=[]),this._subscribers=r}return e.prototype.subscribe=function(r){this._subscribers.push(r)},e.prototype.onCompleted=function(r){this._subscribers.forEach(function(t){return t.onCompleted(r)})},e.prototype.onError=function(r){this._subscribers.forEach(function(t){return t.onError(r)})},e}(),bb=function(){function e(r,t,n,o){this._tokenProvider=r,this._handledSecurityCodes=t,this._currentAuthData=n,this._refreshObservable=o}return e.prototype.getToken=function(){var r;return Jp(this,void 0,void 0,function(){return ev(this,function(t){switch(t.label){case 0:return this._currentAuthData===void 0||this._currentAuthData.expiration!==void 0&&this._currentAuthData.expiration<new Date?[4,this._refreshAuthToken()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2,(r=this._currentAuthData)===null||r===void 0?void 0:r.token]}})})},e.prototype.handleSecurityException=function(r,t){var n;return this._handledSecurityCodes.includes(t)?(Hj.util.equals(r,(n=this._currentAuthData)===null||n===void 0?void 0:n.token)&&this._scheduleRefreshAuthToken(),!0):!1},e.prototype._scheduleRefreshAuthToken=function(r){var t=this;this._refreshObservable===void 0&&(this._currentAuthData=void 0,this._refreshObservable=new Zj,Promise.resolve(this._tokenProvider()).then(function(n){var o;t._currentAuthData=n,(o=t._refreshObservable)===null||o===void 0||o.onCompleted(n)}).catch(function(n){var o;(o=t._refreshObservable)===null||o===void 0||o.onError(n)}).finally(function(){t._refreshObservable=void 0})),r!==void 0&&this._refreshObservable.subscribe(r)},e.prototype._refreshAuthToken=function(){return Jp(this,void 0,void 0,function(){var r=this;return ev(this,function(t){switch(t.label){case 0:return[4,new Promise(function(n,o){r._scheduleRefreshAuthToken({onCompleted:n,onError:o})})];case 1:return[2,t.sent()]}})})},e}(),Qj=function(){function e(r){this._authToken=r}return e.prototype.getToken=function(){return this._authToken},e.prototype.handleSecurityException=function(r,t){return!1},e}(),Mo={},Xj=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Mo,"__esModule",{value:!0});Mo.InternalConfig=Mo.Config=void 0;var rO=function(){function e(){this.encrypted=void 0,this.trust=void 0,this.trustedCertificates=[],this.maxConnectionPoolSize=100,this.maxConnectionLifetime=60*60*1e3,this.connectionAcquisitionTimeout=6e4,this.maxTransactionRetryTime=3e4,this.connectionLivenessCheckTimeout=void 0,this.connectionTimeout=3e4,this.disableLosslessIntegers=!1,this.useBigInt=!1,this.logging=void 0,this.resolver=void 0,this.notificationFilter=void 0,this.userAgent=void 0,this.telemetryDisabled=!1,this.clientCertificate=void 0}return e}();Mo.Config=rO;var Jj=function(e){Xj(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(rO);Mo.InternalConfig=Jj;var kt={},e$=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Sa=f&&f.__assign||function(){return Sa=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Sa.apply(this,arguments)},t$=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),r$=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),n$=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&t$(r,e,t);return r$(r,e),r};Object.defineProperty(kt,"__esModule",{value:!0});kt.resolveCertificateProvider=kt.clientCertificateProviders=kt.RotatingClientCertificateProvider=kt.ClientCertificateProvider=void 0;var l_=n$(Lt),o$=function(){function e(){this.certfile="",this.keyfile="",this.password=void 0}return e}();kt.default=o$;var nO=function(){function e(){}return e.prototype.hasUpdate=function(){throw new Error("Not Implemented")},e.prototype.getClientCertificate=function(){throw new Error("Not Implemented")},e}();kt.ClientCertificateProvider=nO;var i$=function(e){e$(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.updateCertificate=function(t){throw new Error("Not implemented")},r}(nO);kt.RotatingClientCertificateProvider=i$;var a$=function(){function e(){}return e.prototype.rotating=function(r){var t=r.initialCertificate;if(t==null||!f_(t))throw new TypeError("initialCertificate should be ClientCertificate, but got ".concat(l_.stringify(t)));var n=Sa({},t);return new l$(n)},e}(),oO=new a$;kt.clientCertificateProviders=oO;Object.freeze(oO);function s$(e){if(e!=null){if(typeof e=="object"&&"hasUpdate"in e&&"getClientCertificate"in e&&typeof e.getClientCertificate=="function"&&typeof e.hasUpdate=="function")return e;if(f_(e)){var r=Sa({},e);return{getClientCertificate:function(){return r},hasUpdate:function(){return!1}}}throw new TypeError("clientCertificate should be configured with ClientCertificate or ClientCertificateProvider, but got ".concat(l_.stringify(e)))}}kt.resolveCertificateProvider=s$;function f_(e){return e!=null&&typeof e=="object"&&"certfile"in e&&u$(e.certfile)&&"keyfile"in e&&c$(e.keyfile)&&aO("password",e)}function u$(e){return mb(e)||iO(e,mb)}function c$(e){function r(t){return typeof t=="string"||t!=null&&typeof t=="object"&&"path"in t&&typeof t.path=="string"&&aO("password",t)}return r(e)||iO(e,r)}function mb(e){return typeof e=="string"}function iO(e,r,t){return t===void 0&&(t=!1),Array.isArray(e)&&(t||e.length>0)&&e.filter(r).length===e.length}function aO(e,r){return!(e in r)||r[e]==null||typeof r[e]=="string"}var l$=function(){function e(r,t){t===void 0&&(t=!1),this._certificate=r,this._updated=t}return e.prototype.hasUpdate=function(){try{return this._updated}finally{this._updated=!1}},e.prototype.getClientCertificate=function(){return this._certificate},e.prototype.updateCertificate=function(r){if(!f_(r))throw new TypeError("certificate should be ClientCertificate, but got ".concat(l_.stringify(r)));this._certificate=Sa({},r),this._updated=!0},e}();(function(e){var r=f&&f.__createBinding||(Object.create?function(T,C,R,V){V===void 0&&(V=R);var H=Object.getOwnPropertyDescriptor(C,R);(!H||("get"in H?!C.__esModule:H.writable||H.configurable))&&(H={enumerable:!0,get:function(){return C[R]}}),Object.defineProperty(T,V,H)}:function(T,C,R,V){V===void 0&&(V=R),T[V]=C[R]}),t=f&&f.__setModuleDefault||(Object.create?function(T,C){Object.defineProperty(T,"default",{enumerable:!0,value:C})}:function(T,C){T.default=C}),n=f&&f.__importStar||function(T){if(T&&T.__esModule)return T;var C={};if(T!=null)for(var R in T)R!=="default"&&Object.prototype.hasOwnProperty.call(T,R)&&r(C,T,R);return t(C,T),C},o=f&&f.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(e,"__esModule",{value:!0}),e.EagerResult=e.Result=e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.GqlStatusObject=e.Notification=e.ServerInfo=e.queryType=e.ResultSummary=e.Record=e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=e.Time=e.LocalTime=e.LocalDateTime=e.isTime=e.isLocalTime=e.isLocalDateTime=e.isDuration=e.isDateTime=e.isDate=e.Duration=e.DateTime=e.Date=e.Point=e.isPoint=e.internal=e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=e.Integer=e.error=e.isRetriableError=e.GQLError=e.newGQLError=e.Neo4jError=e.newError=e.authTokenManagers=void 0,e.resolveCertificateProvider=e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.routing=e.staticAuthTokenManager=e.bookmarkManager=e.auth=e.json=e.driver=e.types=e.Driver=e.Session=e.TransactionPromise=e.ManagedTransaction=e.Transaction=e.Connection=e.Releasable=e.ConnectionProvider=void 0;var i=le;Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return i.newError}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return i.Neo4jError}}),Object.defineProperty(e,"newGQLError",{enumerable:!0,get:function(){return i.newGQLError}}),Object.defineProperty(e,"GQLError",{enumerable:!0,get:function(){return i.GQLError}}),Object.defineProperty(e,"isRetriableError",{enumerable:!0,get:function(){return i.isRetriableError}});var a=n(xe);e.Integer=a.default,Object.defineProperty(e,"int",{enumerable:!0,get:function(){return a.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return a.isInt}}),Object.defineProperty(e,"inSafeRange",{enumerable:!0,get:function(){return a.inSafeRange}}),Object.defineProperty(e,"toNumber",{enumerable:!0,get:function(){return a.toNumber}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return a.toString}});var u=ge;Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return u.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return u.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return u.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return u.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return u.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return u.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return u.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return u.isLocalTime}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return u.isTime}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return u.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return u.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return u.Time}});var c=Se;Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return c.Node}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return c.isNode}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return c.Relationship}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return c.isRelationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return c.UnboundRelationship}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return c.isUnboundRelationship}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return c.Path}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return c.isPath}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return c.PathSegment}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return c.isPathSegment}});var s=o(e_);e.Record=s.default;var l=No;Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return l.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return l.Point}});var d=n(Qe);e.ResultSummary=d.default,Object.defineProperty(e,"queryType",{enumerable:!0,get:function(){return d.queryType}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return d.ServerInfo}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return d.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return d.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return d.QueryStatistics}}),Object.defineProperty(e,"Stats",{enumerable:!0,get:function(){return d.Stats}});var h=n(Te);e.Notification=h.default,Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return h.GqlStatusObject}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return h.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return h.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return h.notificationSeverityLevel}});var p=vr;Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return p.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return p.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return p.notificationFilterMinimumSeverityLevel}});var v=o(xa);e.Result=v.default;var _=o(Sl);e.EagerResult=_.default;var b=n(Ba);e.ConnectionProvider=b.default,Object.defineProperty(e,"Releasable",{enumerable:!0,get:function(){return b.Releasable}});var w=o(i_);e.Connection=w.default;var E=o(Tl);e.Transaction=E.default;var S=o(Pl);e.ManagedTransaction=S.default;var O=o(Cl);e.TransactionPromise=O.default;var A=o(Al);e.Session=A.default;var $=n(Xe),I=$;e.Driver=$.default,e.driver=I;var L=o($l);e.auth=L.default;var X=Qo;Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return X.bookmarkManager}});var ae=_r;Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return ae.authTokenManagers}}),Object.defineProperty(e,"staticAuthTokenManager",{enumerable:!0,get:function(){return ae.staticAuthTokenManager}});var _e=Xe;Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return _e.routing}});var ne=n(Mo);e.types=ne;var ve=n(Lt);e.json=ve;var it=o(Il);e.resultTransformers=it.default;var ee=kt;Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return ee.clientCertificateProviders}}),Object.defineProperty(e,"resolveCertificateProvider",{enumerable:!0,get:function(){return ee.resolveCertificateProvider}});var be=n(oe);e.internal=be;var Y={SERVICE_UNAVAILABLE:i.SERVICE_UNAVAILABLE,SESSION_EXPIRED:i.SESSION_EXPIRED,PROTOCOL_ERROR:i.PROTOCOL_ERROR};e.error=Y;var k={authTokenManagers:ae.authTokenManagers,newError:i.newError,Neo4jError:i.Neo4jError,newGQLError:i.newGQLError,GQLError:i.GQLError,isRetriableError:i.isRetriableError,error:Y,Integer:a.default,int:a.int,isInt:a.isInt,inSafeRange:a.inSafeRange,toNumber:a.toNumber,toString:a.toString,internal:be,isPoint:l.isPoint,Point:l.Point,Date:u.Date,DateTime:u.DateTime,Duration:u.Duration,isDate:u.isDate,isDateTime:u.isDateTime,isDuration:u.isDuration,isLocalDateTime:u.isLocalDateTime,isLocalTime:u.isLocalTime,isTime:u.isTime,LocalDateTime:u.LocalDateTime,LocalTime:u.LocalTime,Time:u.Time,Node:c.Node,isNode:c.isNode,Relationship:c.Relationship,isRelationship:c.isRelationship,UnboundRelationship:c.UnboundRelationship,isUnboundRelationship:c.isUnboundRelationship,Path:c.Path,isPath:c.isPath,PathSegment:c.PathSegment,isPathSegment:c.isPathSegment,Record:s.default,ResultSummary:d.default,queryType:d.queryType,ServerInfo:d.ServerInfo,Notification:h.default,GqlStatusObject:h.GqlStatusObject,Plan:d.Plan,ProfiledPlan:d.ProfiledPlan,QueryStatistics:d.QueryStatistics,Stats:d.Stats,Result:v.default,EagerResult:_.default,Transaction:E.default,ManagedTransaction:S.default,TransactionPromise:O.default,Session:A.default,Driver:$.default,Connection:w.default,Releasable:b.Releasable,types:ne,driver:I,json:ve,auth:L.default,bookmarkManager:X.bookmarkManager,routing:_e.routing,resultTransformers:it.default,notificationCategory:h.notificationCategory,notificationClassification:h.notificationClassification,notificationSeverityLevel:h.notificationSeverityLevel,notificationFilterDisabledCategory:p.notificationFilterDisabledCategory,notificationFilterDisabledClassification:p.notificationFilterDisabledClassification,notificationFilterMinimumSeverityLevel:p.notificationFilterMinimumSeverityLevel,clientCertificateProviders:ee.clientCertificateProviders,resolveCertificateProvider:ee.resolveCertificateProvider};e.default=k})(G);var Nl={},za={},pe={},Xo={},de={};Object.defineProperty(de,"__esModule",{value:!0});de.isFunction=void 0;function f$(e){return typeof e=="function"}de.isFunction=f$;var Ne={},Ha={},Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.createErrorClass=void 0;function d$(e){var r=function(n){Error.call(n),n.stack=new Error().stack},t=e(r);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Xt.createErrorClass=d$;Object.defineProperty(Ha,"__esModule",{value:!0});Ha.UnsubscriptionError=void 0;var h$=Xt;Ha.UnsubscriptionError=h$.createErrorClass(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,o){return o+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});var Ut={};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.arrRemove=void 0;function p$(e,r){if(e){var t=e.indexOf(r);0<=t&&e.splice(t,1)}}Ut.arrRemove=p$;var gb=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},wb=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Ob=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.isSubscription=Ne.EMPTY_SUBSCRIPTION=Ne.Subscription=void 0;var _a=de,Qh=Ha,Eb=Ut,d_=function(){function e(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var r,t,n,o,i;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var u=gb(a),c=u.next();!c.done;c=u.next()){var s=c.value;s.remove(this)}}catch(_){r={error:_}}finally{try{c&&!c.done&&(t=u.return)&&t.call(u)}finally{if(r)throw r.error}}else a.remove(this);var l=this.initialTeardown;if(_a.isFunction(l))try{l()}catch(_){i=_ instanceof Qh.UnsubscriptionError?_.errors:[_]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var h=gb(d),p=h.next();!p.done;p=h.next()){var v=p.value;try{Sb(v)}catch(_){i=i??[],_ instanceof Qh.UnsubscriptionError?i=Ob(Ob([],wb(i)),wb(_.errors)):i.push(_)}}}catch(_){n={error:_}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}}if(i)throw new Qh.UnsubscriptionError(i)}},e.prototype.add=function(r){var t;if(r&&r!==this)if(this.closed)Sb(r);else{if(r instanceof e){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(r)}},e.prototype._hasParent=function(r){var t=this._parentage;return t===r||Array.isArray(t)&&t.includes(r)},e.prototype._addParent=function(r){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(r),t):t?[t,r]:r},e.prototype._removeParent=function(r){var t=this._parentage;t===r?this._parentage=null:Array.isArray(t)&&Eb.arrRemove(t,r)},e.prototype.remove=function(r){var t=this._finalizers;t&&Eb.arrRemove(t,r),r instanceof e&&r._removeParent(this)},e.EMPTY=function(){var r=new e;return r.closed=!0,r}(),e}();Ne.Subscription=d_;Ne.EMPTY_SUBSCRIPTION=d_.EMPTY;function v$(e){return e instanceof d_||e&&"closed"in e&&_a.isFunction(e.remove)&&_a.isFunction(e.add)&&_a.isFunction(e.unsubscribe)}Ne.isSubscription=v$;function Sb(e){_a.isFunction(e)?e():e.unsubscribe()}var tn={};Object.defineProperty(tn,"__esModule",{value:!0});tn.config=void 0;tn.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var qa={},h_={};(function(e){var r=f&&f.__read||function(n,o){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var a=i.call(n),u,c=[],s;try{for(;(o===void 0||o-- >0)&&!(u=a.next()).done;)c.push(u.value)}catch(l){s={error:l}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(s)throw s.error}}return c},t=f&&f.__spreadArray||function(n,o){for(var i=0,a=o.length,u=n.length;i<a;i++,u++)n[u]=o[i];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutProvider=void 0,e.timeoutProvider={setTimeout:function(n,o){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var u=e.timeoutProvider.delegate;return u!=null&&u.setTimeout?u.setTimeout.apply(u,t([n,o],r(i))):setTimeout.apply(void 0,t([n,o],r(i)))},clearTimeout:function(n){var o=e.timeoutProvider.delegate;return((o==null?void 0:o.clearTimeout)||clearTimeout)(n)},delegate:void 0}})(h_);Object.defineProperty(qa,"__esModule",{value:!0});qa.reportUnhandledError=void 0;var _$=tn,y$=h_;function b$(e){y$.timeoutProvider.setTimeout(function(){var r=_$.config.onUnhandledError;if(r)r(e);else throw e})}qa.reportUnhandledError=b$;var ke={};Object.defineProperty(ke,"__esModule",{value:!0});ke.noop=void 0;function m$(){}ke.noop=m$;var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.createNotification=Yt.nextNotification=Yt.errorNotification=Yt.COMPLETE_NOTIFICATION=void 0;Yt.COMPLETE_NOTIFICATION=function(){return kl("C",void 0,void 0)}();function g$(e){return kl("E",void 0,e)}Yt.errorNotification=g$;function w$(e){return kl("N",e,void 0)}Yt.nextNotification=w$;function kl(e,r,t){return{kind:e,value:r,error:t}}Yt.createNotification=kl;var Vr={};Object.defineProperty(Vr,"__esModule",{value:!0});Vr.captureError=Vr.errorContext=void 0;var sO=tn,jn=null;function O$(e){if(sO.config.useDeprecatedSynchronousErrorHandling){var r=!jn;if(r&&(jn={errorThrown:!1,error:null}),e(),r){var t=jn,n=t.errorThrown,o=t.error;if(jn=null,n)throw o}}else e()}Vr.errorContext=O$;function E$(e){sO.config.useDeprecatedSynchronousErrorHandling&&jn&&(jn.errorThrown=!0,jn.error=e)}Vr.captureError=E$;(function(e){var r=f&&f.__extends||function(){var E=function(S,O){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,$){A.__proto__=$}||function(A,$){for(var I in $)Object.prototype.hasOwnProperty.call($,I)&&(A[I]=$[I])},E(S,O)};return function(S,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");E(S,O);function A(){this.constructor=S}S.prototype=O===null?Object.create(O):(A.prototype=O.prototype,new A)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_OBSERVER=e.SafeSubscriber=e.Subscriber=void 0;var t=de,n=Ne,o=tn,i=qa,a=ke,u=Yt,c=h_,s=Vr,l=function(E){r(S,E);function S(O){var A=E.call(this)||this;return A.isStopped=!1,O?(A.destination=O,n.isSubscription(O)&&O.add(A)):A.destination=e.EMPTY_OBSERVER,A}return S.create=function(O,A,$){return new v(O,A,$)},S.prototype.next=function(O){this.isStopped?w(u.nextNotification(O),this):this._next(O)},S.prototype.error=function(O){this.isStopped?w(u.errorNotification(O),this):(this.isStopped=!0,this._error(O))},S.prototype.complete=function(){this.isStopped?w(u.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},S.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,E.prototype.unsubscribe.call(this),this.destination=null)},S.prototype._next=function(O){this.destination.next(O)},S.prototype._error=function(O){try{this.destination.error(O)}finally{this.unsubscribe()}},S.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},S}(n.Subscription);e.Subscriber=l;var d=Function.prototype.bind;function h(E,S){return d.call(E,S)}var p=function(){function E(S){this.partialObserver=S}return E.prototype.next=function(S){var O=this.partialObserver;if(O.next)try{O.next(S)}catch(A){_(A)}},E.prototype.error=function(S){var O=this.partialObserver;if(O.error)try{O.error(S)}catch(A){_(A)}else _(S)},E.prototype.complete=function(){var S=this.partialObserver;if(S.complete)try{S.complete()}catch(O){_(O)}},E}(),v=function(E){r(S,E);function S(O,A,$){var I=E.call(this)||this,L;if(t.isFunction(O)||!O)L={next:O??void 0,error:A??void 0,complete:$??void 0};else{var X;I&&o.config.useDeprecatedNextContext?(X=Object.create(O),X.unsubscribe=function(){return I.unsubscribe()},L={next:O.next&&h(O.next,X),error:O.error&&h(O.error,X),complete:O.complete&&h(O.complete,X)}):L=O}return I.destination=new p(L),I}return S}(l);e.SafeSubscriber=v;function _(E){o.config.useDeprecatedSynchronousErrorHandling?s.captureError(E):i.reportUnhandledError(E)}function b(E){throw E}function w(E,S){var O=o.config.onStoppedNotification;O&&c.timeoutProvider.setTimeout(function(){return O(E,S)})}e.EMPTY_OBSERVER={closed:!0,next:a.noop,error:b,complete:a.noop}})(Xo);var Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});Yn.observable=void 0;Yn.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();var br={},Me={};Object.defineProperty(Me,"__esModule",{value:!0});Me.identity=void 0;function S$(e){return e}Me.identity=S$;Object.defineProperty(br,"__esModule",{value:!0});br.pipeFromArray=br.pipe=void 0;var T$=Me;function P$(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return uO(e)}br.pipe=P$;function uO(e){return e.length===0?T$.identity:e.length===1?e[0]:function(t){return e.reduce(function(n,o){return o(n)},t)}}br.pipeFromArray=uO;Object.defineProperty(pe,"__esModule",{value:!0});pe.Observable=void 0;var tv=Xo,C$=Ne,A$=Yn,I$=br,R$=tn,Xh=de,j$=Vr,$$=function(){function e(r){r&&(this._subscribe=r)}return e.prototype.lift=function(r){var t=new e;return t.source=this,t.operator=r,t},e.prototype.subscribe=function(r,t,n){var o=this,i=k$(r)?r:new tv.SafeSubscriber(r,t,n);return j$.errorContext(function(){var a=o,u=a.operator,c=a.source;i.add(u?u.call(i,c):c?o._subscribe(i):o._trySubscribe(i))}),i},e.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(t){r.error(t)}},e.prototype.forEach=function(r,t){var n=this;return t=Tb(t),new t(function(o,i){var a=new tv.SafeSubscriber({next:function(u){try{r(u)}catch(c){i(c),a.unsubscribe()}},error:i,complete:o});n.subscribe(a)})},e.prototype._subscribe=function(r){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(r)},e.prototype[A$.observable]=function(){return this},e.prototype.pipe=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return I$.pipeFromArray(r)(this)},e.prototype.toPromise=function(r){var t=this;return r=Tb(r),new r(function(n,o){var i;t.subscribe(function(a){return i=a},function(a){return o(a)},function(){return n(i)})})},e.create=function(r){return new e(r)},e}();pe.Observable=$$;function Tb(e){var r;return(r=e??R$.config.Promise)!==null&&r!==void 0?r:Promise}function N$(e){return e&&Xh.isFunction(e.next)&&Xh.isFunction(e.error)&&Xh.isFunction(e.complete)}function k$(e){return e&&e instanceof tv.Subscriber||N$(e)&&C$.isSubscription(e)}var Zn={},Jo={},U={};Object.defineProperty(U,"__esModule",{value:!0});U.operate=U.hasLift=void 0;var M$=de;function cO(e){return M$.isFunction(e==null?void 0:e.lift)}U.hasLift=cO;function D$(e){return function(r){if(cO(r))return r.lift(function(t){try{return e(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}U.operate=D$;var B={},L$=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(B,"__esModule",{value:!0});B.OperatorSubscriber=B.createOperatorSubscriber=void 0;var U$=Xo;function F$(e,r,t,n,o){return new lO(e,r,t,n,o)}B.createOperatorSubscriber=F$;var lO=function(e){L$(r,e);function r(t,n,o,i,a,u){var c=e.call(this,t)||this;return c.onFinalize=a,c.shouldUnsubscribe=u,c._next=n?function(s){try{n(s)}catch(l){t.error(l)}}:e.prototype._next,c._error=i?function(s){try{i(s)}catch(l){t.error(l)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=o?function(){try{o()}catch(s){t.error(s)}finally{this.unsubscribe()}}:e.prototype._complete,c}return r.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},r}(U$.Subscriber);B.OperatorSubscriber=lO;Object.defineProperty(Jo,"__esModule",{value:!0});Jo.refCount=void 0;var x$=U,B$=B;function V$(){return x$.operate(function(e,r){var t=null;e._refCount++;var n=B$.createOperatorSubscriber(r,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount){t=null;return}var o=e._connection,i=t;t=null,o&&(!i||o===i)&&o.unsubscribe(),r.unsubscribe()});e.subscribe(n),n.closed||(t=e.connect())})}Jo.refCount=V$;var W$=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Zn,"__esModule",{value:!0});Zn.ConnectableObservable=void 0;var z$=pe,Pb=Ne,H$=Jo,q$=B,G$=U,K$=function(e){W$(r,e);function r(t,n){var o=e.call(this)||this;return o.source=t,o.subjectFactory=n,o._subject=null,o._refCount=0,o._connection=null,G$.hasLift(t)&&(o.lift=t.lift),o}return r.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},r.prototype.getSubject=function(){var t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject},r.prototype._teardown=function(){this._refCount=0;var t=this._connection;this._subject=this._connection=null,t==null||t.unsubscribe()},r.prototype.connect=function(){var t=this,n=this._connection;if(!n){n=this._connection=new Pb.Subscription;var o=this.getSubject();n.add(this.source.subscribe(q$.createOperatorSubscriber(o,void 0,function(){t._teardown(),o.complete()},function(i){t._teardown(),o.error(i)},function(){return t._teardown()}))),n.closed&&(this._connection=null,n=Pb.Subscription.EMPTY)}return n},r.prototype.refCount=function(){return H$.refCount()(this)},r}(z$.Observable);Zn.ConnectableObservable=K$;var Ml={},fO={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.performanceTimestampProvider=void 0,e.performanceTimestampProvider={now:function(){return(e.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}})(fO);var p_={};(function(e){var r=f&&f.__read||function(o,i){var a=typeof Symbol=="function"&&o[Symbol.iterator];if(!a)return o;var u=a.call(o),c,s=[],l;try{for(;(i===void 0||i-- >0)&&!(c=u.next()).done;)s.push(c.value)}catch(d){l={error:d}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(l)throw l.error}}return s},t=f&&f.__spreadArray||function(o,i){for(var a=0,u=i.length,c=o.length;a<u;a++,c++)o[c]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrameProvider=void 0;var n=Ne;e.animationFrameProvider={schedule:function(o){var i=requestAnimationFrame,a=cancelAnimationFrame,u=e.animationFrameProvider.delegate;u&&(i=u.requestAnimationFrame,a=u.cancelAnimationFrame);var c=i(function(s){a=void 0,o(s)});return new n.Subscription(function(){return a==null?void 0:a(c)})},requestAnimationFrame:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=e.animationFrameProvider.delegate;return((a==null?void 0:a.requestAnimationFrame)||requestAnimationFrame).apply(void 0,t([],r(o)))},cancelAnimationFrame:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=e.animationFrameProvider.delegate;return((a==null?void 0:a.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,t([],r(o)))},delegate:void 0}})(p_);Object.defineProperty(Ml,"__esModule",{value:!0});Ml.animationFrames=void 0;var Y$=pe,Z$=fO,Cb=p_;function Q$(e){return e?dO(e):X$}Ml.animationFrames=Q$;function dO(e){return new Y$.Observable(function(r){var t=e||Z$.performanceTimestampProvider,n=t.now(),o=0,i=function(){r.closed||(o=Cb.animationFrameProvider.requestAnimationFrame(function(a){o=0;var u=t.now();r.next({timestamp:e?u:a,elapsed:u-n}),i()}))};return i(),function(){o&&Cb.animationFrameProvider.cancelAnimationFrame(o)}})}var X$=dO(),Ae={},Ga={};Object.defineProperty(Ga,"__esModule",{value:!0});Ga.ObjectUnsubscribedError=void 0;var J$=Xt;Ga.ObjectUnsubscribedError=J$.createErrorClass(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var hO=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),eN=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.AnonymousSubject=Ae.Subject=void 0;var Ab=pe,rv=Ne,tN=Ga,rN=Ut,Jh=Vr,pO=function(e){hO(r,e);function r(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r.prototype.lift=function(t){var n=new nv(this,this);return n.operator=t,n},r.prototype._throwIfClosed=function(){if(this.closed)throw new tN.ObjectUnsubscribedError},r.prototype.next=function(t){var n=this;Jh.errorContext(function(){var o,i;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var a=eN(n.currentObservers),u=a.next();!u.done;u=a.next()){var c=u.value;c.next(t)}}catch(s){o={error:s}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}}})},r.prototype.error=function(t){var n=this;Jh.errorContext(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=t;for(var o=n.observers;o.length;)o.shift().error(t)}})},r.prototype.complete=function(){var t=this;Jh.errorContext(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var n=t.observers;n.length;)n.shift().complete()}})},r.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(r.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),r.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},r.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},r.prototype._innerSubscribe=function(t){var n=this,o=this,i=o.hasError,a=o.isStopped,u=o.observers;return i||a?rv.EMPTY_SUBSCRIPTION:(this.currentObservers=null,u.push(t),new rv.Subscription(function(){n.currentObservers=null,rN.arrRemove(u,t)}))},r.prototype._checkFinalizedStatuses=function(t){var n=this,o=n.hasError,i=n.thrownError,a=n.isStopped;o?t.error(i):a&&t.complete()},r.prototype.asObservable=function(){var t=new Ab.Observable;return t.source=this,t},r.create=function(t,n){return new nv(t,n)},r}(Ab.Observable);Ae.Subject=pO;var nv=function(e){hO(r,e);function r(t,n){var o=e.call(this)||this;return o.destination=t,o.source=n,o}return r.prototype.next=function(t){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.next)===null||o===void 0||o.call(n,t)},r.prototype.error=function(t){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.error)===null||o===void 0||o.call(n,t)},r.prototype.complete=function(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)},r.prototype._subscribe=function(t){var n,o;return(o=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&o!==void 0?o:rv.EMPTY_SUBSCRIPTION},r}(pO);Ae.AnonymousSubject=nv;var Ka={},nN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ka,"__esModule",{value:!0});Ka.BehaviorSubject=void 0;var oN=Ae,iN=function(e){nN(r,e);function r(t){var n=e.call(this)||this;return n._value=t,n}return Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),r.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},r.prototype.getValue=function(){var t=this,n=t.hasError,o=t.thrownError,i=t._value;if(n)throw o;return this._throwIfClosed(),i},r.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},r}(oN.Subject);Ka.BehaviorSubject=iN;var ei={},Dl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.dateTimestampProvider=void 0,e.dateTimestampProvider={now:function(){return(e.dateTimestampProvider.delegate||Date).now()},delegate:void 0}})(Dl);var aN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ei,"__esModule",{value:!0});ei.ReplaySubject=void 0;var sN=Ae,uN=Dl,cN=function(e){aN(r,e);function r(t,n,o){t===void 0&&(t=1/0),n===void 0&&(n=1/0),o===void 0&&(o=uN.dateTimestampProvider);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=n,i._timestampProvider=o,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,n),i}return r.prototype.next=function(t){var n=this,o=n.isStopped,i=n._buffer,a=n._infiniteTimeWindow,u=n._timestampProvider,c=n._windowTime;o||(i.push(t),!a&&i.push(u.now()+c)),this._trimBuffer(),e.prototype.next.call(this,t)},r.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(t),o=this,i=o._infiniteTimeWindow,a=o._buffer,u=a.slice(),c=0;c<u.length&&!t.closed;c+=i?1:2)t.next(u[c]);return this._checkFinalizedStatuses(t),n},r.prototype._trimBuffer=function(){var t=this,n=t._bufferSize,o=t._timestampProvider,i=t._buffer,a=t._infiniteTimeWindow,u=(a?1:2)*n;if(n<1/0&&u<i.length&&i.splice(0,i.length-u),!a){for(var c=o.now(),s=0,l=1;l<i.length&&i[l]<=c;l+=2)s=l;s&&i.splice(0,s+1)}},r}(sN.Subject);ei.ReplaySubject=cN;var ti={},lN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ti,"__esModule",{value:!0});ti.AsyncSubject=void 0;var fN=Ae,dN=function(e){lN(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t._value=null,t._hasValue=!1,t._isComplete=!1,t}return r.prototype._checkFinalizedStatuses=function(t){var n=this,o=n.hasError,i=n._hasValue,a=n._value,u=n.thrownError,c=n.isStopped,s=n._isComplete;o?t.error(u):(c||s)&&(i&&t.next(a),t.complete())},r.prototype.next=function(t){this.isStopped||(this._value=t,this._hasValue=!0)},r.prototype.complete=function(){var t=this,n=t._hasValue,o=t._value,i=t._isComplete;i||(this._isComplete=!0,n&&e.prototype.next.call(this,o),e.prototype.complete.call(this))},r}(fN.Subject);ti.AsyncSubject=dN;var vO={},Ll={},rn={},Ul={},hN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ul,"__esModule",{value:!0});Ul.Action=void 0;var pN=Ne,vN=function(e){hN(r,e);function r(t,n){return e.call(this)||this}return r.prototype.schedule=function(t,n){return this},r}(pN.Subscription);Ul.Action=vN;var _O={};(function(e){var r=f&&f.__read||function(n,o){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var a=i.call(n),u,c=[],s;try{for(;(o===void 0||o-- >0)&&!(u=a.next()).done;)c.push(u.value)}catch(l){s={error:l}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(s)throw s.error}}return c},t=f&&f.__spreadArray||function(n,o){for(var i=0,a=o.length,u=n.length;i<a;i++,u++)n[u]=o[i];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.intervalProvider=void 0,e.intervalProvider={setInterval:function(n,o){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var u=e.intervalProvider.delegate;return u!=null&&u.setInterval?u.setInterval.apply(u,t([n,o],r(i))):setInterval.apply(void 0,t([n,o],r(i)))},clearInterval:function(n){var o=e.intervalProvider.delegate;return((o==null?void 0:o.clearInterval)||clearInterval)(n)},delegate:void 0}})(_O);var _N=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(rn,"__esModule",{value:!0});rn.AsyncAction=void 0;var yN=Ul,Ib=_O,bN=Ut,mN=function(e){_N(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o.pending=!1,o}return r.prototype.schedule=function(t,n){var o;if(n===void 0&&(n=0),this.closed)return this;this.state=t;var i=this.id,a=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(a,i,n)),this.pending=!0,this.delay=n,this.id=(o=this.id)!==null&&o!==void 0?o:this.requestAsyncId(a,this.id,n),this},r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),Ib.intervalProvider.setInterval(t.flush.bind(t,this),o)},r.prototype.recycleAsyncId=function(t,n,o){if(o===void 0&&(o=0),o!=null&&this.delay===o&&this.pending===!1)return n;n!=null&&Ib.intervalProvider.clearInterval(n)},r.prototype.execute=function(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var o=this._execute(t,n);if(o)return o;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(t,n){var o=!1,i;try{this.work(t)}catch(a){o=!0,i=a||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),i},r.prototype.unsubscribe=function(){if(!this.closed){var t=this,n=t.id,o=t.scheduler,i=o.actions;this.work=this.state=this.scheduler=null,this.pending=!1,bN.arrRemove(i,this),n!=null&&(this.id=this.recycleAsyncId(o,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},r}(yN.Action);rn.AsyncAction=mN;var yO={},Do={};Object.defineProperty(Do,"__esModule",{value:!0});Do.TestTools=Do.Immediate=void 0;var gN=1,ep,Vc={};function Rb(e){return e in Vc?(delete Vc[e],!0):!1}Do.Immediate={setImmediate:function(e){var r=gN++;return Vc[r]=!0,ep||(ep=Promise.resolve()),ep.then(function(){return Rb(r)&&e()}),r},clearImmediate:function(e){Rb(e)}};Do.TestTools={pending:function(){return Object.keys(Vc).length}};(function(e){var r=f&&f.__read||function(a,u){var c=typeof Symbol=="function"&&a[Symbol.iterator];if(!c)return a;var s=c.call(a),l,d=[],h;try{for(;(u===void 0||u-- >0)&&!(l=s.next()).done;)d.push(l.value)}catch(p){h={error:p}}finally{try{l&&!l.done&&(c=s.return)&&c.call(s)}finally{if(h)throw h.error}}return d},t=f&&f.__spreadArray||function(a,u){for(var c=0,s=u.length,l=a.length;c<s;c++,l++)a[l]=u[c];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.immediateProvider=void 0;var n=Do,o=n.Immediate.setImmediate,i=n.Immediate.clearImmediate;e.immediateProvider={setImmediate:function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];var c=e.immediateProvider.delegate;return((c==null?void 0:c.setImmediate)||o).apply(void 0,t([],r(a)))},clearImmediate:function(a){var u=e.immediateProvider.delegate;return((u==null?void 0:u.clearImmediate)||i)(a)},delegate:void 0}})(yO);var wN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ll,"__esModule",{value:!0});Ll.AsapAction=void 0;var ON=rn,jb=yO,EN=function(e){wN(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o}return r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),o!==null&&o>0?e.prototype.requestAsyncId.call(this,t,n,o):(t.actions.push(this),t._scheduled||(t._scheduled=jb.immediateProvider.setImmediate(t.flush.bind(t,void 0))))},r.prototype.recycleAsyncId=function(t,n,o){var i;if(o===void 0&&(o=0),o!=null?o>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,o);var a=t.actions;n!=null&&((i=a[a.length-1])===null||i===void 0?void 0:i.id)!==n&&(jb.immediateProvider.clearImmediate(n),t._scheduled===n&&(t._scheduled=void 0))},r}(ON.AsyncAction);Ll.AsapAction=EN;var Fl={},nn={},Ya={};Object.defineProperty(Ya,"__esModule",{value:!0});Ya.Scheduler=void 0;var SN=Dl,TN=function(){function e(r,t){t===void 0&&(t=e.now),this.schedulerActionCtor=r,this.now=t}return e.prototype.schedule=function(r,t,n){return t===void 0&&(t=0),new this.schedulerActionCtor(this,r).schedule(n,t)},e.now=SN.dateTimestampProvider.now,e}();Ya.Scheduler=TN;var PN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(nn,"__esModule",{value:!0});nn.AsyncScheduler=void 0;var $b=Ya,CN=function(e){PN(r,e);function r(t,n){n===void 0&&(n=$b.Scheduler.now);var o=e.call(this,t,n)||this;return o.actions=[],o._active=!1,o}return r.prototype.flush=function(t){var n=this.actions;if(this._active){n.push(t);return}var o;this._active=!0;do if(o=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,o){for(;t=n.shift();)t.unsubscribe();throw o}},r}($b.Scheduler);nn.AsyncScheduler=CN;var AN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Fl,"__esModule",{value:!0});Fl.AsapScheduler=void 0;var IN=nn,RN=function(e){AN(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.flush=function(t){this._active=!0;var n=this._scheduled;this._scheduled=void 0;var o=this.actions,i;t=t||o.shift();do if(i=t.execute(t.state,t.delay))break;while((t=o[0])&&t.id===n&&o.shift());if(this._active=!1,i){for(;(t=o[0])&&t.id===n&&o.shift();)t.unsubscribe();throw i}},r}(IN.AsyncScheduler);Fl.AsapScheduler=RN;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.asap=e.asapScheduler=void 0;var r=Ll,t=Fl;e.asapScheduler=new t.AsapScheduler(r.AsapAction),e.asap=e.asapScheduler})(vO);var ct={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.async=e.asyncScheduler=void 0;var r=rn,t=nn;e.asyncScheduler=new t.AsyncScheduler(r.AsyncAction),e.async=e.asyncScheduler})(ct);var bO={},xl={},jN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(xl,"__esModule",{value:!0});xl.QueueAction=void 0;var $N=rn,NN=function(e){jN(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o}return r.prototype.schedule=function(t,n){return n===void 0&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},r.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),o!=null&&o>0||o==null&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,o):(t.flush(this),0)},r}($N.AsyncAction);xl.QueueAction=NN;var Bl={},kN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Bl,"__esModule",{value:!0});Bl.QueueScheduler=void 0;var MN=nn,DN=function(e){kN(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(MN.AsyncScheduler);Bl.QueueScheduler=DN;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.queue=e.queueScheduler=void 0;var r=xl,t=Bl;e.queueScheduler=new t.QueueScheduler(r.QueueAction),e.queue=e.queueScheduler})(bO);var mO={},Vl={},LN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Vl,"__esModule",{value:!0});Vl.AnimationFrameAction=void 0;var UN=rn,Nb=p_,FN=function(e){LN(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o}return r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),o!==null&&o>0?e.prototype.requestAsyncId.call(this,t,n,o):(t.actions.push(this),t._scheduled||(t._scheduled=Nb.animationFrameProvider.requestAnimationFrame(function(){return t.flush(void 0)})))},r.prototype.recycleAsyncId=function(t,n,o){var i;if(o===void 0&&(o=0),o!=null?o>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,o);var a=t.actions;n!=null&&n===t._scheduled&&((i=a[a.length-1])===null||i===void 0?void 0:i.id)!==n&&(Nb.animationFrameProvider.cancelAnimationFrame(n),t._scheduled=void 0)},r}(UN.AsyncAction);Vl.AnimationFrameAction=FN;var Wl={},xN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Wl,"__esModule",{value:!0});Wl.AnimationFrameScheduler=void 0;var BN=nn,VN=function(e){xN(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.flush=function(t){this._active=!0;var n;t?n=t.id:(n=this._scheduled,this._scheduled=void 0);var o=this.actions,i;t=t||o.shift();do if(i=t.execute(t.state,t.delay))break;while((t=o[0])&&t.id===n&&o.shift());if(this._active=!1,i){for(;(t=o[0])&&t.id===n&&o.shift();)t.unsubscribe();throw i}},r}(BN.AsyncScheduler);Wl.AnimationFrameScheduler=VN;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrame=e.animationFrameScheduler=void 0;var r=Vl,t=Wl;e.animationFrameScheduler=new t.AnimationFrameScheduler(r.AnimationFrameAction),e.animationFrame=e.animationFrameScheduler})(mO);var Lo={},gO=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Lo,"__esModule",{value:!0});Lo.VirtualAction=Lo.VirtualTimeScheduler=void 0;var WN=rn,zN=Ne,HN=nn,qN=function(e){gO(r,e);function r(t,n){t===void 0&&(t=wO),n===void 0&&(n=1/0);var o=e.call(this,t,function(){return o.frame})||this;return o.maxFrames=n,o.frame=0,o.index=-1,o}return r.prototype.flush=function(){for(var t=this,n=t.actions,o=t.maxFrames,i,a;(a=n[0])&&a.delay<=o&&(n.shift(),this.frame=a.delay,!(i=a.execute(a.state,a.delay))););if(i){for(;a=n.shift();)a.unsubscribe();throw i}},r.frameTimeFactor=10,r}(HN.AsyncScheduler);Lo.VirtualTimeScheduler=qN;var wO=function(e){gO(r,e);function r(t,n,o){o===void 0&&(o=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=o,i.active=!0,i.index=t.index=o,i}return r.prototype.schedule=function(t,n){if(n===void 0&&(n=0),Number.isFinite(n)){if(!this.id)return e.prototype.schedule.call(this,t,n);this.active=!1;var o=new r(this.scheduler,this.work);return this.add(o),o.schedule(t,n)}else return zN.Subscription.EMPTY},r.prototype.requestAsyncId=function(t,n,o){o===void 0&&(o=0),this.delay=t.frame+o;var i=t.actions;return i.push(this),i.sort(r.sortActions),1},r.prototype.recycleAsyncId=function(t,n,o){},r.prototype._execute=function(t,n){if(this.active===!0)return e.prototype._execute.call(this,t,n)},r.sortActions=function(t,n){return t.delay===n.delay?t.index===n.index?0:t.index>n.index?1:-1:t.delay>n.delay?1:-1},r}(WN.AsyncAction);Lo.VirtualAction=wO;var zl={},Dt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=void 0;var r=pe;e.EMPTY=new r.Observable(function(o){return o.complete()});function t(o){return o?n(o):e.EMPTY}e.empty=t;function n(o){return new r.Observable(function(i){return o.schedule(function(){return i.complete()})})}})(Dt);var ri={},Re={},Qn={};Object.defineProperty(Qn,"__esModule",{value:!0});Qn.isScheduler=void 0;var GN=de;function KN(e){return e&&GN.isFunction(e.schedule)}Qn.isScheduler=KN;Object.defineProperty(Re,"__esModule",{value:!0});Re.popNumber=Re.popScheduler=Re.popResultSelector=void 0;var YN=de,ZN=Qn;function v_(e){return e[e.length-1]}function QN(e){return YN.isFunction(v_(e))?e.pop():void 0}Re.popResultSelector=QN;function XN(e){return ZN.isScheduler(v_(e))?e.pop():void 0}Re.popScheduler=XN;function JN(e,r){return typeof v_(e)=="number"?e.pop():r}Re.popNumber=JN;var Ft={},Za={},Hl={},W={},ni={};Object.defineProperty(ni,"__esModule",{value:!0});ni.isArrayLike=void 0;ni.isArrayLike=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};var Qa={};Object.defineProperty(Qa,"__esModule",{value:!0});Qa.isPromise=void 0;var ek=de;function tk(e){return ek.isFunction(e==null?void 0:e.then)}Qa.isPromise=tk;var Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});Xa.isInteropObservable=void 0;var rk=Yn,nk=de;function ok(e){return nk.isFunction(e[rk.observable])}Xa.isInteropObservable=ok;var Ja={};Object.defineProperty(Ja,"__esModule",{value:!0});Ja.isAsyncIterable=void 0;var ik=de;function ak(e){return Symbol.asyncIterator&&ik.isFunction(e==null?void 0:e[Symbol.asyncIterator])}Ja.isAsyncIterable=ak;var es={};Object.defineProperty(es,"__esModule",{value:!0});es.createInvalidObservableTypeError=void 0;function sk(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}es.createInvalidObservableTypeError=sk;var ts={},Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.iterator=Fn.getSymbolIterator=void 0;function OO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}Fn.getSymbolIterator=OO;Fn.iterator=OO();Object.defineProperty(ts,"__esModule",{value:!0});ts.isIterable=void 0;var uk=Fn,ck=de;function lk(e){return ck.isFunction(e==null?void 0:e[uk.iterator])}ts.isIterable=lk;var Wr={},fk=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Ao=f&&f.__await||function(e){return this instanceof Ao?(this.v=e,this):new Ao(e)},dk=f&&f.__asyncGenerator||function(e,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(e,r||[]),o,i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(h){n[h]&&(o[h]=function(p){return new Promise(function(v,_){i.push([h,p,v,_])>1||u(h,p)})})}function u(h,p){try{c(n[h](p))}catch(v){d(i[0][3],v)}}function c(h){h.value instanceof Ao?Promise.resolve(h.value.v).then(s,l):d(i[0][2],h)}function s(h){u("next",h)}function l(h){u("throw",h)}function d(h,p){h(p),i.shift(),i.length&&u(i[0][0],i[0][1])}};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.isReadableStreamLike=Wr.readableStreamLikeToAsyncGenerator=void 0;var hk=de;function pk(e){return dk(this,arguments,function(){var t,n,o,i;return fk(this,function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Ao(t.read())];case 3:return n=a.sent(),o=n.value,i=n.done,i?[4,Ao(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Ao(o)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}Wr.readableStreamLikeToAsyncGenerator=pk;function vk(e){return hk.isFunction(e==null?void 0:e.getReader)}Wr.isReadableStreamLike=vk;var _k=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(l){try{s(n.next(l))}catch(d){a(d)}}function c(l){try{s(n.throw(l))}catch(d){a(d)}}function s(l){l.done?i(l.value):o(l.value).then(u,c)}s((n=n.apply(e,r||[])).next())})},yk=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},bk=f&&f.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e[Symbol.asyncIterator],t;return r?r.call(e):(e=typeof ov=="function"?ov(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(a){return new Promise(function(u,c){a=e[i](a),o(u,c,a.done,a.value)})}}function o(i,a,u,c){Promise.resolve(c).then(function(s){i({value:s,done:u})},a)}},ov=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(W,"__esModule",{value:!0});W.fromReadableStreamLike=W.fromAsyncIterable=W.fromIterable=W.fromPromise=W.fromArrayLike=W.fromInteropObservable=W.innerFrom=void 0;var mk=ni,gk=Qa,oi=pe,wk=Xa,Ok=Ja,Ek=es,Sk=ts,EO=Wr,Tk=de,Pk=qa,Ck=Yn;function Ak(e){if(e instanceof oi.Observable)return e;if(e!=null){if(wk.isInteropObservable(e))return SO(e);if(mk.isArrayLike(e))return TO(e);if(gk.isPromise(e))return PO(e);if(Ok.isAsyncIterable(e))return __(e);if(Sk.isIterable(e))return CO(e);if(EO.isReadableStreamLike(e))return AO(e)}throw Ek.createInvalidObservableTypeError(e)}W.innerFrom=Ak;function SO(e){return new oi.Observable(function(r){var t=e[Ck.observable]();if(Tk.isFunction(t.subscribe))return t.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}W.fromInteropObservable=SO;function TO(e){return new oi.Observable(function(r){for(var t=0;t<e.length&&!r.closed;t++)r.next(e[t]);r.complete()})}W.fromArrayLike=TO;function PO(e){return new oi.Observable(function(r){e.then(function(t){r.closed||(r.next(t),r.complete())},function(t){return r.error(t)}).then(null,Pk.reportUnhandledError)})}W.fromPromise=PO;function CO(e){return new oi.Observable(function(r){var t,n;try{for(var o=ov(e),i=o.next();!i.done;i=o.next()){var a=i.value;if(r.next(a),r.closed)return}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}r.complete()})}W.fromIterable=CO;function __(e){return new oi.Observable(function(r){Ik(e,r).catch(function(t){return r.error(t)})})}W.fromAsyncIterable=__;function AO(e){return __(EO.readableStreamLikeToAsyncGenerator(e))}W.fromReadableStreamLike=AO;function Ik(e,r){var t,n,o,i;return _k(this,void 0,void 0,function(){var a,u;return yk(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),t=bk(e),c.label=1;case 1:return[4,t.next()];case 2:if(n=c.sent(),!!n.done)return[3,4];if(a=n.value,r.next(a),r.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=c.sent(),o={error:u},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(i=t.return)?[4,i.call(t)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return r.complete(),[2]}})})}var on={},xt={};Object.defineProperty(xt,"__esModule",{value:!0});xt.executeSchedule=void 0;function Rk(e,r,t,n,o){n===void 0&&(n=0),o===void 0&&(o=!1);var i=r.schedule(function(){t(),o?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(i),!o)return i}xt.executeSchedule=Rk;Object.defineProperty(on,"__esModule",{value:!0});on.observeOn=void 0;var tp=xt,jk=U,$k=B;function Nk(e,r){return r===void 0&&(r=0),jk.operate(function(t,n){t.subscribe($k.createOperatorSubscriber(n,function(o){return tp.executeSchedule(n,e,function(){return n.next(o)},r)},function(){return tp.executeSchedule(n,e,function(){return n.complete()},r)},function(o){return tp.executeSchedule(n,e,function(){return n.error(o)},r)}))})}on.observeOn=Nk;var an={};Object.defineProperty(an,"__esModule",{value:!0});an.subscribeOn=void 0;var kk=U;function Mk(e,r){return r===void 0&&(r=0),kk.operate(function(t,n){n.add(e.schedule(function(){return t.subscribe(n)},r))})}an.subscribeOn=Mk;Object.defineProperty(Hl,"__esModule",{value:!0});Hl.scheduleObservable=void 0;var Dk=W,Lk=on,Uk=an;function Fk(e,r){return Dk.innerFrom(e).pipe(Uk.subscribeOn(r),Lk.observeOn(r))}Hl.scheduleObservable=Fk;var ql={};Object.defineProperty(ql,"__esModule",{value:!0});ql.schedulePromise=void 0;var xk=W,Bk=on,Vk=an;function Wk(e,r){return xk.innerFrom(e).pipe(Vk.subscribeOn(r),Bk.observeOn(r))}ql.schedulePromise=Wk;var Gl={};Object.defineProperty(Gl,"__esModule",{value:!0});Gl.scheduleArray=void 0;var zk=pe;function Hk(e,r){return new zk.Observable(function(t){var n=0;return r.schedule(function(){n===e.length?t.complete():(t.next(e[n++]),t.closed||this.schedule())})})}Gl.scheduleArray=Hk;var rs={};Object.defineProperty(rs,"__esModule",{value:!0});rs.scheduleIterable=void 0;var qk=pe,Gk=Fn,Kk=de,kb=xt;function Yk(e,r){return new qk.Observable(function(t){var n;return kb.executeSchedule(t,r,function(){n=e[Gk.iterator](),kb.executeSchedule(t,r,function(){var o,i,a;try{o=n.next(),i=o.value,a=o.done}catch(u){t.error(u);return}a?t.complete():t.next(i)},0,!0)}),function(){return Kk.isFunction(n==null?void 0:n.return)&&n.return()}})}rs.scheduleIterable=Yk;var ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.scheduleAsyncIterable=void 0;var Zk=pe,Mb=xt;function Qk(e,r){if(!e)throw new Error("Iterable cannot be null");return new Zk.Observable(function(t){Mb.executeSchedule(t,r,function(){var n=e[Symbol.asyncIterator]();Mb.executeSchedule(t,r,function(){n.next().then(function(o){o.done?t.complete():t.next(o.value)})},0,!0)})})}ns.scheduleAsyncIterable=Qk;var Kl={};Object.defineProperty(Kl,"__esModule",{value:!0});Kl.scheduleReadableStreamLike=void 0;var Xk=ns,Jk=Wr;function eM(e,r){return Xk.scheduleAsyncIterable(Jk.readableStreamLikeToAsyncGenerator(e),r)}Kl.scheduleReadableStreamLike=eM;Object.defineProperty(Za,"__esModule",{value:!0});Za.scheduled=void 0;var tM=Hl,rM=ql,nM=Gl,oM=rs,iM=ns,aM=Xa,sM=Qa,uM=ni,cM=ts,lM=Ja,fM=es,dM=Wr,hM=Kl;function pM(e,r){if(e!=null){if(aM.isInteropObservable(e))return tM.scheduleObservable(e,r);if(uM.isArrayLike(e))return nM.scheduleArray(e,r);if(sM.isPromise(e))return rM.schedulePromise(e,r);if(lM.isAsyncIterable(e))return iM.scheduleAsyncIterable(e,r);if(cM.isIterable(e))return oM.scheduleIterable(e,r);if(dM.isReadableStreamLike(e))return hM.scheduleReadableStreamLike(e,r)}throw fM.createInvalidObservableTypeError(e)}Za.scheduled=pM;Object.defineProperty(Ft,"__esModule",{value:!0});Ft.from=void 0;var vM=Za,_M=W;function yM(e,r){return r?vM.scheduled(e,r):_M.innerFrom(e)}Ft.from=yM;Object.defineProperty(ri,"__esModule",{value:!0});ri.of=void 0;var bM=Re,mM=Ft;function gM(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=bM.popScheduler(e);return mM.from(e,t)}ri.of=gM;var os={};Object.defineProperty(os,"__esModule",{value:!0});os.throwError=void 0;var wM=pe,OM=de;function EM(e,r){var t=OM.isFunction(e)?e:function(){return e},n=function(o){return o.error(t())};return new wM.Observable(r?function(o){return r.schedule(n,0,o)}:n)}os.throwError=EM;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.observeNotification=e.Notification=e.NotificationKind=void 0;var r=Dt,t=ri,n=os,o=de;(function(u){u.NEXT="N",u.ERROR="E",u.COMPLETE="C"})(e.NotificationKind||(e.NotificationKind={}));var i=function(){function u(c,s,l){this.kind=c,this.value=s,this.error=l,this.hasValue=c==="N"}return u.prototype.observe=function(c){return a(this,c)},u.prototype.do=function(c,s,l){var d=this,h=d.kind,p=d.value,v=d.error;return h==="N"?c==null?void 0:c(p):h==="E"?s==null?void 0:s(v):l==null?void 0:l()},u.prototype.accept=function(c,s,l){var d;return o.isFunction((d=c)===null||d===void 0?void 0:d.next)?this.observe(c):this.do(c,s,l)},u.prototype.toObservable=function(){var c=this,s=c.kind,l=c.value,d=c.error,h=s==="N"?t.of(l):s==="E"?n.throwError(function(){return d}):s==="C"?r.EMPTY:0;if(!h)throw new TypeError("Unexpected notification kind "+s);return h},u.createNext=function(c){return new u("N",c)},u.createError=function(c){return new u("E",void 0,c)},u.createComplete=function(){return u.completeNotification},u.completeNotification=new u("C"),u}();e.Notification=i;function a(u,c){var s,l,d,h=u,p=h.kind,v=h.value,_=h.error;if(typeof p!="string")throw new TypeError('Invalid notification, missing "kind"');p==="N"?(s=c.next)===null||s===void 0||s.call(c,v):p==="E"?(l=c.error)===null||l===void 0||l.call(c,_):(d=c.complete)===null||d===void 0||d.call(c)}e.observeNotification=a})(zl);var Yl={};Object.defineProperty(Yl,"__esModule",{value:!0});Yl.isObservable=void 0;var SM=pe,Db=de;function TM(e){return!!e&&(e instanceof SM.Observable||Db.isFunction(e.lift)&&Db.isFunction(e.subscribe))}Yl.isObservable=TM;var Zl={},Jt={};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.EmptyError=void 0;var PM=Xt;Jt.EmptyError=PM.createErrorClass(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});Object.defineProperty(Zl,"__esModule",{value:!0});Zl.lastValueFrom=void 0;var CM=Jt;function AM(e,r){var t=typeof r=="object";return new Promise(function(n,o){var i=!1,a;e.subscribe({next:function(u){a=u,i=!0},error:o,complete:function(){i?n(a):t?n(r.defaultValue):o(new CM.EmptyError)}})})}Zl.lastValueFrom=AM;var Ql={};Object.defineProperty(Ql,"__esModule",{value:!0});Ql.firstValueFrom=void 0;var IM=Jt,RM=Xo;function jM(e,r){var t=typeof r=="object";return new Promise(function(n,o){var i=new RM.SafeSubscriber({next:function(a){n(a),i.unsubscribe()},error:o,complete:function(){t?n(r.defaultValue):o(new IM.EmptyError)}});e.subscribe(i)})}Ql.firstValueFrom=jM;var is={};Object.defineProperty(is,"__esModule",{value:!0});is.ArgumentOutOfRangeError=void 0;var $M=Xt;is.ArgumentOutOfRangeError=$M.createErrorClass(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}});var as={};Object.defineProperty(as,"__esModule",{value:!0});as.NotFoundError=void 0;var NM=Xt;as.NotFoundError=NM.createErrorClass(function(e){return function(t){e(this),this.name="NotFoundError",this.message=t}});var ss={};Object.defineProperty(ss,"__esModule",{value:!0});ss.SequenceError=void 0;var kM=Xt;ss.SequenceError=kM.createErrorClass(function(e){return function(t){e(this),this.name="SequenceError",this.message=t}});var Ta={},ii={};Object.defineProperty(ii,"__esModule",{value:!0});ii.isValidDate=void 0;function MM(e){return e instanceof Date&&!isNaN(e)}ii.isValidDate=MM;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.timeout=e.TimeoutError=void 0;var r=ct,t=ii,n=U,o=W,i=Xt,a=B,u=xt;e.TimeoutError=i.createErrorClass(function(l){return function(h){h===void 0&&(h=null),l(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=h}});function c(l,d){var h=t.isValidDate(l)?{first:l}:typeof l=="number"?{each:l}:l,p=h.first,v=h.each,_=h.with,b=_===void 0?s:_,w=h.scheduler,E=w===void 0?d??r.asyncScheduler:w,S=h.meta,O=S===void 0?null:S;if(p==null&&v==null)throw new TypeError("No timeout provided.");return n.operate(function(A,$){var I,L,X=null,ae=0,_e=function(ne){L=u.executeSchedule($,E,function(){try{I.unsubscribe(),o.innerFrom(b({meta:O,lastValue:X,seen:ae})).subscribe($)}catch(ve){$.error(ve)}},ne)};I=A.subscribe(a.createOperatorSubscriber($,function(ne){L==null||L.unsubscribe(),ae++,$.next(X=ne),v>0&&_e(v)},void 0,void 0,function(){L!=null&&L.closed||L==null||L.unsubscribe(),X=null})),!ae&&_e(p!=null?typeof p=="number"?p:+p-E.now():v)})}e.timeout=c;function s(l){throw new e.TimeoutError(l)}})(Ta);var Xl={},us={},er={},Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.map=void 0;var DM=U,LM=B;function UM(e,r){return DM.operate(function(t,n){var o=0;t.subscribe(LM.createOperatorSubscriber(n,function(i){n.next(e.call(r,i,o++))}))})}Bt.map=UM;var FM=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},xM=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(er,"__esModule",{value:!0});er.mapOneOrManyArgs=void 0;var BM=Bt,VM=Array.isArray;function WM(e,r){return VM(r)?e.apply(void 0,xM([],FM(r))):e(r)}function zM(e){return BM.map(function(r){return WM(e,r)})}er.mapOneOrManyArgs=zM;var HM=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Lb=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(us,"__esModule",{value:!0});us.bindCallbackInternals=void 0;var qM=Qn,GM=pe,KM=an,YM=er,ZM=on,QM=ti;function iv(e,r,t,n){if(t)if(qM.isScheduler(t))n=t;else return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return iv(e,r,n).apply(this,o).pipe(YM.mapOneOrManyArgs(t))};return n?function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return iv(e,r).apply(this,o).pipe(KM.subscribeOn(n),ZM.observeOn(n))}:function(){for(var o=this,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var u=new QM.AsyncSubject,c=!0;return new GM.Observable(function(s){var l=u.subscribe(s);if(c){c=!1;var d=!1,h=!1;r.apply(o,Lb(Lb([],HM(i)),[function(){for(var p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];if(e){var _=p.shift();if(_!=null){u.error(_);return}}u.next(1<p.length?p:p[0]),h=!0,d&&u.complete()}])),h&&u.complete(),d=!0}return l})}}us.bindCallbackInternals=iv;Object.defineProperty(Xl,"__esModule",{value:!0});Xl.bindCallback=void 0;var XM=us;function JM(e,r,t){return XM.bindCallbackInternals(!1,e,r,t)}Xl.bindCallback=JM;var Jl={};Object.defineProperty(Jl,"__esModule",{value:!0});Jl.bindNodeCallback=void 0;var e2=us;function t2(e,r,t){return e2.bindCallbackInternals(!0,e,r,t)}Jl.bindNodeCallback=t2;var zr={},cs={};Object.defineProperty(cs,"__esModule",{value:!0});cs.argsArgArrayOrObject=void 0;var r2=Array.isArray,n2=Object.getPrototypeOf,o2=Object.prototype,i2=Object.keys;function a2(e){if(e.length===1){var r=e[0];if(r2(r))return{args:r,keys:null};if(s2(r)){var t=i2(r);return{args:t.map(function(n){return r[n]}),keys:t}}}return{args:e,keys:null}}cs.argsArgArrayOrObject=a2;function s2(e){return e&&typeof e=="object"&&n2(e)===o2}var ls={};Object.defineProperty(ls,"__esModule",{value:!0});ls.createObject=void 0;function u2(e,r){return e.reduce(function(t,n,o){return t[n]=r[o],t},{})}ls.createObject=u2;Object.defineProperty(zr,"__esModule",{value:!0});zr.combineLatestInit=zr.combineLatest=void 0;var c2=pe,l2=cs,IO=Ft,RO=Me,f2=er,Ub=Re,d2=ls,h2=B,p2=xt;function v2(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Ub.popScheduler(e),n=Ub.popResultSelector(e),o=l2.argsArgArrayOrObject(e),i=o.args,a=o.keys;if(i.length===0)return IO.from([],t);var u=new c2.Observable(jO(i,t,a?function(c){return d2.createObject(a,c)}:RO.identity));return n?u.pipe(f2.mapOneOrManyArgs(n)):u}zr.combineLatest=v2;function jO(e,r,t){return t===void 0&&(t=RO.identity),function(n){Fb(r,function(){for(var o=e.length,i=new Array(o),a=o,u=o,c=function(l){Fb(r,function(){var d=IO.from(e[l],r),h=!1;d.subscribe(h2.createOperatorSubscriber(n,function(p){i[l]=p,h||(h=!0,u--),u||n.next(t(i.slice()))},function(){--a||n.complete()}))},n)},s=0;s<o;s++)c(s)},n)}}zr.combineLatestInit=jO;function Fb(e,r,t){e?p2.executeSchedule(t,e,r):r()}var Xn={},Jn={},sn={},Tt={},ai={};Object.defineProperty(ai,"__esModule",{value:!0});ai.mergeInternals=void 0;var _2=W,y2=xt,xb=B;function b2(e,r,t,n,o,i,a,u){var c=[],s=0,l=0,d=!1,h=function(){d&&!c.length&&!s&&r.complete()},p=function(_){return s<n?v(_):c.push(_)},v=function(_){i&&r.next(_),s++;var b=!1;_2.innerFrom(t(_,l++)).subscribe(xb.createOperatorSubscriber(r,function(w){o==null||o(w),i?p(w):r.next(w)},function(){b=!0},void 0,function(){if(b)try{s--;for(var w=function(){var E=c.shift();a?y2.executeSchedule(r,a,function(){return v(E)}):v(E)};c.length&&s<n;)w();h()}catch(E){r.error(E)}}))};return e.subscribe(xb.createOperatorSubscriber(r,p,function(){d=!0,h()})),function(){u==null||u()}}ai.mergeInternals=b2;Object.defineProperty(Tt,"__esModule",{value:!0});Tt.mergeMap=void 0;var m2=Bt,g2=W,w2=U,O2=ai,E2=de;function $O(e,r,t){return t===void 0&&(t=1/0),E2.isFunction(r)?$O(function(n,o){return m2.map(function(i,a){return r(n,i,o,a)})(g2.innerFrom(e(n,o)))},t):(typeof r=="number"&&(t=r),w2.operate(function(n,o){return O2.mergeInternals(n,o,e,t)}))}Tt.mergeMap=$O;Object.defineProperty(sn,"__esModule",{value:!0});sn.mergeAll=void 0;var S2=Tt,T2=Me;function P2(e){return e===void 0&&(e=1/0),S2.mergeMap(T2.identity,e)}sn.mergeAll=P2;Object.defineProperty(Jn,"__esModule",{value:!0});Jn.concatAll=void 0;var C2=sn;function A2(){return C2.mergeAll(1)}Jn.concatAll=A2;Object.defineProperty(Xn,"__esModule",{value:!0});Xn.concat=void 0;var I2=Jn,R2=Re,j2=Ft;function $2(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return I2.concatAll()(j2.from(e,R2.popScheduler(e)))}Xn.concat=$2;var ef={},eo={};Object.defineProperty(eo,"__esModule",{value:!0});eo.defer=void 0;var N2=pe,k2=W;function M2(e){return new N2.Observable(function(r){k2.innerFrom(e()).subscribe(r)})}eo.defer=M2;Object.defineProperty(ef,"__esModule",{value:!0});ef.connectable=void 0;var D2=Ae,L2=pe,U2=eo,F2={connector:function(){return new D2.Subject},resetOnDisconnect:!0};function x2(e,r){r===void 0&&(r=F2);var t=null,n=r.connector,o=r.resetOnDisconnect,i=o===void 0?!0:o,a=n(),u=new L2.Observable(function(c){return a.subscribe(c)});return u.connect=function(){return(!t||t.closed)&&(t=U2.defer(function(){return e}).subscribe(a),i&&t.add(function(){return a=n()})),t},u}ef.connectable=x2;var tf={};Object.defineProperty(tf,"__esModule",{value:!0});tf.forkJoin=void 0;var B2=pe,V2=cs,W2=W,z2=Re,H2=B,q2=er,G2=ls;function K2(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=z2.popResultSelector(e),n=V2.argsArgArrayOrObject(e),o=n.args,i=n.keys,a=new B2.Observable(function(u){var c=o.length;if(!c){u.complete();return}for(var s=new Array(c),l=c,d=c,h=function(v){var _=!1;W2.innerFrom(o[v]).subscribe(H2.createOperatorSubscriber(u,function(b){_||(_=!0,d--),s[v]=b},function(){return l--},void 0,function(){(!l||!_)&&(d||u.next(i?G2.createObject(i,s):s),u.complete())}))},p=0;p<c;p++)h(p)});return t?a.pipe(q2.mapOneOrManyArgs(t)):a}tf.forkJoin=K2;var rf={},Y2=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(rf,"__esModule",{value:!0});rf.fromEvent=void 0;var Z2=W,Q2=pe,X2=Tt,J2=ni,xn=de,eD=er,tD=["addListener","removeListener"],rD=["addEventListener","removeEventListener"],nD=["on","off"];function av(e,r,t,n){if(xn.isFunction(t)&&(n=t,t=void 0),n)return av(e,r,t).pipe(eD.mapOneOrManyArgs(n));var o=Y2(aD(e)?rD.map(function(u){return function(c){return e[u](r,c,t)}}):oD(e)?tD.map(Bb(e,r)):iD(e)?nD.map(Bb(e,r)):[],2),i=o[0],a=o[1];if(!i&&J2.isArrayLike(e))return X2.mergeMap(function(u){return av(u,r,t)})(Z2.innerFrom(e));if(!i)throw new TypeError("Invalid event target");return new Q2.Observable(function(u){var c=function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return u.next(1<s.length?s:s[0])};return i(c),function(){return a(c)}})}rf.fromEvent=av;function Bb(e,r){return function(t){return function(n){return e[t](r,n)}}}function oD(e){return xn.isFunction(e.addListener)&&xn.isFunction(e.removeListener)}function iD(e){return xn.isFunction(e.on)&&xn.isFunction(e.off)}function aD(e){return xn.isFunction(e.addEventListener)&&xn.isFunction(e.removeEventListener)}var nf={};Object.defineProperty(nf,"__esModule",{value:!0});nf.fromEventPattern=void 0;var sD=pe,uD=de,cD=er;function NO(e,r,t){return t?NO(e,r).pipe(cD.mapOneOrManyArgs(t)):new sD.Observable(function(n){var o=function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];return n.next(a.length===1?a[0]:a)},i=e(o);return uD.isFunction(r)?function(){return r(o,i)}:void 0})}nf.fromEventPattern=NO;var of={},lD=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(of,"__esModule",{value:!0});of.generate=void 0;var Vb=Me,fD=Qn,dD=eo,hD=rs;function pD(e,r,t,n,o){var i,a,u,c;arguments.length===1?(i=e,c=i.initialState,r=i.condition,t=i.iterate,a=i.resultSelector,u=a===void 0?Vb.identity:a,o=i.scheduler):(c=e,!n||fD.isScheduler(n)?(u=Vb.identity,o=n):u=n);function s(){var l;return lD(this,function(d){switch(d.label){case 0:l=c,d.label=1;case 1:return!r||r(l)?[4,u(l)]:[3,4];case 2:d.sent(),d.label=3;case 3:return l=t(l),[3,1];case 4:return[2]}})}return dD.defer(o?function(){return hD.scheduleIterable(s(),o)}:s)}of.generate=pD;var af={};Object.defineProperty(af,"__esModule",{value:!0});af.iif=void 0;var vD=eo;function _D(e,r,t){return vD.defer(function(){return e()?r:t})}af.iif=_D;var fs={},tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.timer=void 0;var yD=pe,bD=ct,mD=Qn,gD=ii;function wD(e,r,t){e===void 0&&(e=0),t===void 0&&(t=bD.async);var n=-1;return r!=null&&(mD.isScheduler(r)?t=r:n=r),new yD.Observable(function(o){var i=gD.isValidDate(e)?+e-t.now():e;i<0&&(i=0);var a=0;return t.schedule(function(){o.closed||(o.next(a++),0<=n?this.schedule(void 0,n):o.complete())},i)})}tr.timer=wD;Object.defineProperty(fs,"__esModule",{value:!0});fs.interval=void 0;var OD=ct,ED=tr;function SD(e,r){return e===void 0&&(e=0),r===void 0&&(r=OD.asyncScheduler),e<0&&(e=0),ED.timer(e,e,r)}fs.interval=SD;var sf={};Object.defineProperty(sf,"__esModule",{value:!0});sf.merge=void 0;var TD=sn,PD=W,CD=Dt,Wb=Re,AD=Ft;function ID(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Wb.popScheduler(e),n=Wb.popNumber(e,1/0),o=e;return o.length?o.length===1?PD.innerFrom(o[0]):TD.mergeAll(n)(AD.from(o,t)):CD.EMPTY}sf.merge=ID;var sv={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.never=e.NEVER=void 0;var r=pe,t=ke;e.NEVER=new r.Observable(t.noop);function n(){return e.NEVER}e.never=n})(sv);var ds={},gr={};Object.defineProperty(gr,"__esModule",{value:!0});gr.argsOrArgArray=void 0;var RD=Array.isArray;function jD(e){return e.length===1&&RD(e[0])?e[0]:e}gr.argsOrArgArray=jD;Object.defineProperty(ds,"__esModule",{value:!0});ds.onErrorResumeNext=void 0;var $D=pe,ND=gr,kD=B,zb=ke,MD=W;function DD(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=ND.argsOrArgArray(e);return new $D.Observable(function(n){var o=0,i=function(){if(o<t.length){var a=void 0;try{a=MD.innerFrom(t[o++])}catch{i();return}var u=new kD.OperatorSubscriber(n,void 0,zb.noop,zb.noop);a.subscribe(u),u.add(i)}else n.complete()};i()})}ds.onErrorResumeNext=DD;var uf={};Object.defineProperty(uf,"__esModule",{value:!0});uf.pairs=void 0;var LD=Ft;function UD(e,r){return LD.from(Object.entries(e),r)}uf.pairs=UD;var cf={},hs={};Object.defineProperty(hs,"__esModule",{value:!0});hs.not=void 0;function FD(e,r){return function(t,n){return!e.call(r,t,n)}}hs.not=FD;var Vt={};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.filter=void 0;var xD=U,BD=B;function VD(e,r){return xD.operate(function(t,n){var o=0;t.subscribe(BD.createOperatorSubscriber(n,function(i){return e.call(r,i,o++)&&n.next(i)}))})}Vt.filter=VD;Object.defineProperty(cf,"__esModule",{value:!0});cf.partition=void 0;var WD=hs,Hb=Vt,qb=W;function zD(e,r,t){return[Hb.filter(r,t)(qb.innerFrom(e)),Hb.filter(WD.not(r,t))(qb.innerFrom(e))]}cf.partition=zD;var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.raceInit=Bn.race=void 0;var HD=pe,kO=W,qD=gr,GD=B;function KD(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e=qD.argsOrArgArray(e),e.length===1?kO.innerFrom(e[0]):new HD.Observable(MO(e))}Bn.race=KD;function MO(e){return function(r){for(var t=[],n=function(i){t.push(kO.innerFrom(e[i]).subscribe(GD.createOperatorSubscriber(r,function(a){if(t){for(var u=0;u<t.length;u++)u!==i&&t[u].unsubscribe();t=null}r.next(a)})))},o=0;t&&!r.closed&&o<e.length;o++)n(o)}}Bn.raceInit=MO;var lf={};Object.defineProperty(lf,"__esModule",{value:!0});lf.range=void 0;var YD=pe,ZD=Dt;function QD(e,r,t){if(r==null&&(r=e,e=0),r<=0)return ZD.EMPTY;var n=r+e;return new YD.Observable(t?function(o){var i=e;return t.schedule(function(){i<n?(o.next(i++),this.schedule()):o.complete()})}:function(o){for(var i=e;i<n&&!o.closed;)o.next(i++);o.complete()})}lf.range=QD;var ff={};Object.defineProperty(ff,"__esModule",{value:!0});ff.using=void 0;var XD=pe,JD=W,eL=Dt;function tL(e,r){return new XD.Observable(function(t){var n=e(),o=r(n),i=o?JD.innerFrom(o):eL.EMPTY;return i.subscribe(t),function(){n&&n.unsubscribe()}})}ff.using=tL;var si={},rL=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},nL=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(si,"__esModule",{value:!0});si.zip=void 0;var oL=pe,iL=W,aL=gr,sL=Dt,uL=B,cL=Re;function lL(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=cL.popResultSelector(e),n=aL.argsOrArgArray(e);return n.length?new oL.Observable(function(o){var i=n.map(function(){return[]}),a=n.map(function(){return!1});o.add(function(){i=a=null});for(var u=function(s){iL.innerFrom(n[s]).subscribe(uL.createOperatorSubscriber(o,function(l){if(i[s].push(l),i.every(function(h){return h.length})){var d=i.map(function(h){return h.shift()});o.next(t?t.apply(void 0,nL([],rL(d))):d),i.some(function(h,p){return!h.length&&a[p]})&&o.complete()}},function(){a[s]=!0,!i[s].length&&o.complete()}))},c=0;!o.closed&&c<n.length;c++)u(c);return function(){i=a=null}}):sL.EMPTY}si.zip=lL;var DO={};Object.defineProperty(DO,"__esModule",{value:!0});var ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.audit=void 0;var fL=U,dL=W,Gb=B;function hL(e){return fL.operate(function(r,t){var n=!1,o=null,i=null,a=!1,u=function(){if(i==null||i.unsubscribe(),i=null,n){n=!1;var s=o;o=null,t.next(s)}a&&t.complete()},c=function(){i=null,a&&t.complete()};r.subscribe(Gb.createOperatorSubscriber(t,function(s){n=!0,o=s,i||dL.innerFrom(e(s)).subscribe(i=Gb.createOperatorSubscriber(t,u,c))},function(){a=!0,(!n||!i||i.closed)&&t.complete()}))})}ui.audit=hL;var ps={};Object.defineProperty(ps,"__esModule",{value:!0});ps.auditTime=void 0;var pL=ct,vL=ui,_L=tr;function yL(e,r){return r===void 0&&(r=pL.asyncScheduler),vL.audit(function(){return _L.timer(e,r)})}ps.auditTime=yL;var vs={};Object.defineProperty(vs,"__esModule",{value:!0});vs.buffer=void 0;var bL=U,mL=ke,Kb=B,gL=W;function wL(e){return bL.operate(function(r,t){var n=[];return r.subscribe(Kb.createOperatorSubscriber(t,function(o){return n.push(o)},function(){t.next(n),t.complete()})),gL.innerFrom(e).subscribe(Kb.createOperatorSubscriber(t,function(){var o=n;n=[],t.next(o)},mL.noop)),function(){n=null}})}vs.buffer=wL;var _s={},rp=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(_s,"__esModule",{value:!0});_s.bufferCount=void 0;var OL=U,EL=B,SL=Ut;function TL(e,r){return r===void 0&&(r=null),r=r??e,OL.operate(function(t,n){var o=[],i=0;t.subscribe(EL.createOperatorSubscriber(n,function(a){var u,c,s,l,d=null;i++%r===0&&o.push([]);try{for(var h=rp(o),p=h.next();!p.done;p=h.next()){var v=p.value;v.push(a),e<=v.length&&(d=d??[],d.push(v))}}catch(w){u={error:w}}finally{try{p&&!p.done&&(c=h.return)&&c.call(h)}finally{if(u)throw u.error}}if(d)try{for(var _=rp(d),b=_.next();!b.done;b=_.next()){var v=b.value;SL.arrRemove(o,v),n.next(v)}}catch(w){s={error:w}}finally{try{b&&!b.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}},function(){var a,u;try{for(var c=rp(o),s=c.next();!s.done;s=c.next()){var l=s.value;n.next(l)}}catch(d){a={error:d}}finally{try{s&&!s.done&&(u=c.return)&&u.call(c)}finally{if(a)throw a.error}}n.complete()},void 0,function(){o=null}))})}_s.bufferCount=TL;var ys={},PL=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ys,"__esModule",{value:!0});ys.bufferTime=void 0;var CL=Ne,AL=U,IL=B,RL=Ut,jL=ct,$L=Re,Yb=xt;function NL(e){for(var r,t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=(r=$L.popScheduler(n))!==null&&r!==void 0?r:jL.asyncScheduler,a=(t=n[0])!==null&&t!==void 0?t:null,u=n[1]||1/0;return AL.operate(function(c,s){var l=[],d=!1,h=function(_){var b=_.buffer,w=_.subs;w.unsubscribe(),RL.arrRemove(l,_),s.next(b),d&&p()},p=function(){if(l){var _=new CL.Subscription;s.add(_);var b=[],w={buffer:b,subs:_};l.push(w),Yb.executeSchedule(_,i,function(){return h(w)},e)}};a!==null&&a>=0?Yb.executeSchedule(s,i,p,a,!0):d=!0,p();var v=IL.createOperatorSubscriber(s,function(_){var b,w,E=l.slice();try{for(var S=PL(E),O=S.next();!O.done;O=S.next()){var A=O.value,$=A.buffer;$.push(_),u<=$.length&&h(A)}}catch(I){b={error:I}}finally{try{O&&!O.done&&(w=S.return)&&w.call(S)}finally{if(b)throw b.error}}},function(){for(;l!=null&&l.length;)s.next(l.shift().buffer);v==null||v.unsubscribe(),s.complete(),s.unsubscribe()},void 0,function(){return l=null});c.subscribe(v)})}ys.bufferTime=NL;var bs={},kL=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(bs,"__esModule",{value:!0});bs.bufferToggle=void 0;var ML=Ne,DL=U,Zb=W,np=B,Qb=ke,LL=Ut;function UL(e,r){return DL.operate(function(t,n){var o=[];Zb.innerFrom(e).subscribe(np.createOperatorSubscriber(n,function(i){var a=[];o.push(a);var u=new ML.Subscription,c=function(){LL.arrRemove(o,a),n.next(a),u.unsubscribe()};u.add(Zb.innerFrom(r(i)).subscribe(np.createOperatorSubscriber(n,c,Qb.noop)))},Qb.noop)),t.subscribe(np.createOperatorSubscriber(n,function(i){var a,u;try{for(var c=kL(o),s=c.next();!s.done;s=c.next()){var l=s.value;l.push(i)}}catch(d){a={error:d}}finally{try{s&&!s.done&&(u=c.return)&&u.call(c)}finally{if(a)throw a.error}}},function(){for(;o.length>0;)n.next(o.shift());n.complete()}))})}bs.bufferToggle=UL;var ms={};Object.defineProperty(ms,"__esModule",{value:!0});ms.bufferWhen=void 0;var FL=U,xL=ke,Xb=B,BL=W;function VL(e){return FL.operate(function(r,t){var n=null,o=null,i=function(){o==null||o.unsubscribe();var a=n;n=[],a&&t.next(a),BL.innerFrom(e()).subscribe(o=Xb.createOperatorSubscriber(t,i,xL.noop))};i(),r.subscribe(Xb.createOperatorSubscriber(t,function(a){return n==null?void 0:n.push(a)},function(){n&&t.next(n),t.complete()},void 0,function(){return n=o=null}))})}ms.bufferWhen=VL;var gs={};Object.defineProperty(gs,"__esModule",{value:!0});gs.catchError=void 0;var WL=W,zL=B,HL=U;function LO(e){return HL.operate(function(r,t){var n=null,o=!1,i;n=r.subscribe(zL.createOperatorSubscriber(t,void 0,void 0,function(a){i=WL.innerFrom(e(a,LO(e)(r))),n?(n.unsubscribe(),n=null,i.subscribe(t)):o=!0})),o&&(n.unsubscribe(),n=null,i.subscribe(t))})}gs.catchError=LO;var ws={},ci={},Os={},li={},wr={},Es={};Object.defineProperty(Es,"__esModule",{value:!0});Es.scanInternals=void 0;var qL=B;function GL(e,r,t,n,o){return function(i,a){var u=t,c=r,s=0;i.subscribe(qL.createOperatorSubscriber(a,function(l){var d=s++;c=u?e(c,l,d):(u=!0,l),n&&a.next(c)},o&&function(){u&&a.next(c),a.complete()}))}}Es.scanInternals=GL;Object.defineProperty(wr,"__esModule",{value:!0});wr.reduce=void 0;var KL=Es,YL=U;function ZL(e,r){return YL.operate(KL.scanInternals(e,r,arguments.length>=2,!1,!0))}wr.reduce=ZL;Object.defineProperty(li,"__esModule",{value:!0});li.toArray=void 0;var QL=wr,XL=U,JL=function(e,r){return e.push(r),e};function eU(){return XL.operate(function(e,r){QL.reduce(JL,[])(e).subscribe(r)})}li.toArray=eU;Object.defineProperty(Os,"__esModule",{value:!0});Os.joinAllInternals=void 0;var tU=Me,rU=er,nU=br,oU=Tt,iU=li;function aU(e,r){return nU.pipe(iU.toArray(),oU.mergeMap(function(t){return e(t)}),r?rU.mapOneOrManyArgs(r):tU.identity)}Os.joinAllInternals=aU;Object.defineProperty(ci,"__esModule",{value:!0});ci.combineLatestAll=void 0;var sU=zr,uU=Os;function cU(e){return uU.joinAllInternals(sU.combineLatest,e)}ci.combineLatestAll=cU;Object.defineProperty(ws,"__esModule",{value:!0});ws.combineAll=void 0;var lU=ci;ws.combineAll=lU.combineLatestAll;var Ss={},Ts={},Jb=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},em=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ts,"__esModule",{value:!0});Ts.combineLatest=void 0;var fU=zr,dU=U,hU=gr,pU=er,vU=br,_U=Re;function UO(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=_U.popResultSelector(e);return t?vU.pipe(UO.apply(void 0,em([],Jb(e))),pU.mapOneOrManyArgs(t)):dU.operate(function(n,o){fU.combineLatestInit(em([n],Jb(hU.argsOrArgArray(e))))(o)})}Ts.combineLatest=UO;var yU=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},bU=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ss,"__esModule",{value:!0});Ss.combineLatestWith=void 0;var mU=Ts;function gU(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return mU.combineLatest.apply(void 0,bU([],yU(e)))}Ss.combineLatestWith=gU;var fi={};Object.defineProperty(fi,"__esModule",{value:!0});fi.concatMap=void 0;var tm=Tt,wU=de;function OU(e,r){return wU.isFunction(r)?tm.mergeMap(e,r,1):tm.mergeMap(e,1)}fi.concatMap=OU;var Ps={};Object.defineProperty(Ps,"__esModule",{value:!0});Ps.concatMapTo=void 0;var rm=fi,EU=de;function SU(e,r){return EU.isFunction(r)?rm.concatMap(function(){return e},r):rm.concatMap(function(){return e})}Ps.concatMapTo=SU;var Cs={},As={},TU=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},PU=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(As,"__esModule",{value:!0});As.concat=void 0;var CU=U,AU=Jn,IU=Re,RU=Ft;function jU(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=IU.popScheduler(e);return CU.operate(function(n,o){AU.concatAll()(RU.from(PU([n],TU(e)),t)).subscribe(o)})}As.concat=jU;var $U=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},NU=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Cs,"__esModule",{value:!0});Cs.concatWith=void 0;var kU=As;function MU(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return kU.concat.apply(void 0,NU([],$U(e)))}Cs.concatWith=MU;var to={},df={};Object.defineProperty(df,"__esModule",{value:!0});df.fromSubscribable=void 0;var DU=pe;function LU(e){return new DU.Observable(function(r){return e.subscribe(r)})}df.fromSubscribable=LU;Object.defineProperty(to,"__esModule",{value:!0});to.connect=void 0;var UU=Ae,FU=W,xU=U,BU=df,VU={connector:function(){return new UU.Subject}};function WU(e,r){r===void 0&&(r=VU);var t=r.connector;return xU.operate(function(n,o){var i=t();FU.innerFrom(e(BU.fromSubscribable(i))).subscribe(o),o.add(n.subscribe(i))})}to.connect=WU;var Is={};Object.defineProperty(Is,"__esModule",{value:!0});Is.count=void 0;var zU=wr;function HU(e){return zU.reduce(function(r,t,n){return!e||e(t,n)?r+1:r},0)}Is.count=HU;var Rs={};Object.defineProperty(Rs,"__esModule",{value:!0});Rs.debounce=void 0;var qU=U,GU=ke,nm=B,KU=W;function YU(e){return qU.operate(function(r,t){var n=!1,o=null,i=null,a=function(){if(i==null||i.unsubscribe(),i=null,n){n=!1;var u=o;o=null,t.next(u)}};r.subscribe(nm.createOperatorSubscriber(t,function(u){i==null||i.unsubscribe(),n=!0,o=u,i=nm.createOperatorSubscriber(t,a,GU.noop),KU.innerFrom(e(u)).subscribe(i)},function(){a(),t.complete()},void 0,function(){o=i=null}))})}Rs.debounce=YU;var js={};Object.defineProperty(js,"__esModule",{value:!0});js.debounceTime=void 0;var ZU=ct,QU=U,XU=B;function JU(e,r){return r===void 0&&(r=ZU.asyncScheduler),QU.operate(function(t,n){var o=null,i=null,a=null,u=function(){if(o){o.unsubscribe(),o=null;var s=i;i=null,n.next(s)}};function c(){var s=a+e,l=r.now();if(l<s){o=this.schedule(void 0,s-l),n.add(o);return}u()}t.subscribe(XU.createOperatorSubscriber(n,function(s){i=s,a=r.now(),o||(o=r.schedule(c,e),n.add(o))},function(){u(),n.complete()},void 0,function(){i=o=null}))})}js.debounceTime=JU;var un={};Object.defineProperty(un,"__esModule",{value:!0});un.defaultIfEmpty=void 0;var e4=U,t4=B;function r4(e){return e4.operate(function(r,t){var n=!1;r.subscribe(t4.createOperatorSubscriber(t,function(o){n=!0,t.next(o)},function(){n||t.next(e),t.complete()}))})}un.defaultIfEmpty=r4;var $s={},di={},cn={};Object.defineProperty(cn,"__esModule",{value:!0});cn.take=void 0;var n4=Dt,o4=U,i4=B;function a4(e){return e<=0?function(){return n4.EMPTY}:o4.operate(function(r,t){var n=0;r.subscribe(i4.createOperatorSubscriber(t,function(o){++n<=e&&(t.next(o),e<=n&&t.complete())}))})}cn.take=a4;var hi={};Object.defineProperty(hi,"__esModule",{value:!0});hi.ignoreElements=void 0;var s4=U,u4=B,c4=ke;function l4(){return s4.operate(function(e,r){e.subscribe(u4.createOperatorSubscriber(r,c4.noop))})}hi.ignoreElements=l4;var pi={};Object.defineProperty(pi,"__esModule",{value:!0});pi.mapTo=void 0;var f4=Bt;function d4(e){return f4.map(function(){return e})}pi.mapTo=d4;Object.defineProperty(di,"__esModule",{value:!0});di.delayWhen=void 0;var h4=Xn,om=cn,p4=hi,v4=pi,_4=Tt,y4=W;function FO(e,r){return r?function(t){return h4.concat(r.pipe(om.take(1),p4.ignoreElements()),t.pipe(FO(e)))}:_4.mergeMap(function(t,n){return y4.innerFrom(e(t,n)).pipe(om.take(1),v4.mapTo(t))})}di.delayWhen=FO;Object.defineProperty($s,"__esModule",{value:!0});$s.delay=void 0;var b4=ct,m4=di,g4=tr;function w4(e,r){r===void 0&&(r=b4.asyncScheduler);var t=g4.timer(e,r);return m4.delayWhen(function(){return t})}$s.delay=w4;var Ns={};Object.defineProperty(Ns,"__esModule",{value:!0});Ns.dematerialize=void 0;var O4=zl,E4=U,S4=B;function T4(){return E4.operate(function(e,r){e.subscribe(S4.createOperatorSubscriber(r,function(t){return O4.observeNotification(t,r)}))})}Ns.dematerialize=T4;var ks={};Object.defineProperty(ks,"__esModule",{value:!0});ks.distinct=void 0;var P4=U,im=B,C4=ke,A4=W;function I4(e,r){return P4.operate(function(t,n){var o=new Set;t.subscribe(im.createOperatorSubscriber(n,function(i){var a=e?e(i):i;o.has(a)||(o.add(a),n.next(i))})),r&&A4.innerFrom(r).subscribe(im.createOperatorSubscriber(n,function(){return o.clear()},C4.noop))})}ks.distinct=I4;var vi={};Object.defineProperty(vi,"__esModule",{value:!0});vi.distinctUntilChanged=void 0;var R4=Me,j4=U,$4=B;function N4(e,r){return r===void 0&&(r=R4.identity),e=e??k4,j4.operate(function(t,n){var o,i=!0;t.subscribe($4.createOperatorSubscriber(n,function(a){var u=r(a);(i||!e(o,u))&&(i=!1,o=u,n.next(a))}))})}vi.distinctUntilChanged=N4;function k4(e,r){return e===r}var Ms={};Object.defineProperty(Ms,"__esModule",{value:!0});Ms.distinctUntilKeyChanged=void 0;var M4=vi;function D4(e,r){return M4.distinctUntilChanged(function(t,n){return r?r(t[e],n[e]):t[e]===n[e]})}Ms.distinctUntilKeyChanged=D4;var Ds={},ln={};Object.defineProperty(ln,"__esModule",{value:!0});ln.throwIfEmpty=void 0;var L4=Jt,U4=U,F4=B;function x4(e){return e===void 0&&(e=B4),U4.operate(function(r,t){var n=!1;r.subscribe(F4.createOperatorSubscriber(t,function(o){n=!0,t.next(o)},function(){return n?t.complete():t.error(e())}))})}ln.throwIfEmpty=x4;function B4(){return new L4.EmptyError}Object.defineProperty(Ds,"__esModule",{value:!0});Ds.elementAt=void 0;var am=is,V4=Vt,W4=ln,z4=un,H4=cn;function q4(e,r){if(e<0)throw new am.ArgumentOutOfRangeError;var t=arguments.length>=2;return function(n){return n.pipe(V4.filter(function(o,i){return i===e}),H4.take(1),t?z4.defaultIfEmpty(r):W4.throwIfEmpty(function(){return new am.ArgumentOutOfRangeError}))}}Ds.elementAt=q4;var Ls={},G4=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},K4=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ls,"__esModule",{value:!0});Ls.endWith=void 0;var Y4=Xn,Z4=ri;function Q4(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(t){return Y4.concat(t,Z4.of.apply(void 0,K4([],G4(e))))}}Ls.endWith=Q4;var Us={};Object.defineProperty(Us,"__esModule",{value:!0});Us.every=void 0;var X4=U,J4=B;function eF(e,r){return X4.operate(function(t,n){var o=0;t.subscribe(J4.createOperatorSubscriber(n,function(i){e.call(r,i,o++,t)||(n.next(!1),n.complete())},function(){n.next(!0),n.complete()}))})}Us.every=eF;var Fs={},_i={},yi={};Object.defineProperty(yi,"__esModule",{value:!0});yi.exhaustMap=void 0;var tF=Bt,sm=W,rF=U,um=B;function xO(e,r){return r?function(t){return t.pipe(xO(function(n,o){return sm.innerFrom(e(n,o)).pipe(tF.map(function(i,a){return r(n,i,o,a)}))}))}:rF.operate(function(t,n){var o=0,i=null,a=!1;t.subscribe(um.createOperatorSubscriber(n,function(u){i||(i=um.createOperatorSubscriber(n,void 0,function(){i=null,a&&n.complete()}),sm.innerFrom(e(u,o++)).subscribe(i))},function(){a=!0,!i&&n.complete()}))})}yi.exhaustMap=xO;Object.defineProperty(_i,"__esModule",{value:!0});_i.exhaustAll=void 0;var nF=yi,oF=Me;function iF(){return nF.exhaustMap(oF.identity)}_i.exhaustAll=iF;Object.defineProperty(Fs,"__esModule",{value:!0});Fs.exhaust=void 0;var aF=_i;Fs.exhaust=aF.exhaustAll;var xs={};Object.defineProperty(xs,"__esModule",{value:!0});xs.expand=void 0;var sF=U,uF=ai;function cF(e,r,t){return r===void 0&&(r=1/0),r=(r||0)<1?1/0:r,sF.operate(function(n,o){return uF.mergeInternals(n,o,e,r,void 0,!0,t)})}xs.expand=cF;var Bs={};Object.defineProperty(Bs,"__esModule",{value:!0});Bs.finalize=void 0;var lF=U;function fF(e){return lF.operate(function(r,t){try{r.subscribe(t)}finally{t.add(e)}})}Bs.finalize=fF;var Hr={};Object.defineProperty(Hr,"__esModule",{value:!0});Hr.createFind=Hr.find=void 0;var dF=U,hF=B;function pF(e,r){return dF.operate(BO(e,r,"value"))}Hr.find=pF;function BO(e,r,t){var n=t==="index";return function(o,i){var a=0;o.subscribe(hF.createOperatorSubscriber(i,function(u){var c=a++;e.call(r,u,c,o)&&(i.next(n?c:u),i.complete())},function(){i.next(n?-1:void 0),i.complete()}))}}Hr.createFind=BO;var Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.findIndex=void 0;var vF=U,_F=Hr;function yF(e,r){return vF.operate(_F.createFind(e,r,"index"))}Vs.findIndex=yF;var Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.first=void 0;var bF=Jt,mF=Vt,gF=cn,wF=un,OF=ln,EF=Me;function SF(e,r){var t=arguments.length>=2;return function(n){return n.pipe(e?mF.filter(function(o,i){return e(o,i,n)}):EF.identity,gF.take(1),t?wF.defaultIfEmpty(r):OF.throwIfEmpty(function(){return new bF.EmptyError}))}}Ws.first=SF;var zs={};Object.defineProperty(zs,"__esModule",{value:!0});zs.groupBy=void 0;var TF=pe,PF=W,CF=Ae,AF=U,cm=B;function IF(e,r,t,n){return AF.operate(function(o,i){var a;!r||typeof r=="function"?a=r:(t=r.duration,a=r.element,n=r.connector);var u=new Map,c=function(v){u.forEach(v),v(i)},s=function(v){return c(function(_){return _.error(v)})},l=0,d=!1,h=new cm.OperatorSubscriber(i,function(v){try{var _=e(v),b=u.get(_);if(!b){u.set(_,b=n?n():new CF.Subject);var w=p(_,b);if(i.next(w),t){var E=cm.createOperatorSubscriber(b,function(){b.complete(),E==null||E.unsubscribe()},void 0,void 0,function(){return u.delete(_)});h.add(PF.innerFrom(t(w)).subscribe(E))}}b.next(a?a(v):v)}catch(S){s(S)}},function(){return c(function(v){return v.complete()})},s,function(){return u.clear()},function(){return d=!0,l===0});o.subscribe(h);function p(v,_){var b=new TF.Observable(function(w){l++;var E=_.subscribe(w);return function(){E.unsubscribe(),--l===0&&d&&h.unsubscribe()}});return b.key=v,b}})}zs.groupBy=IF;var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.isEmpty=void 0;var RF=U,jF=B;function $F(){return RF.operate(function(e,r){e.subscribe(jF.createOperatorSubscriber(r,function(){r.next(!1),r.complete()},function(){r.next(!0),r.complete()}))})}Hs.isEmpty=$F;var qs={},bi={},NF=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(bi,"__esModule",{value:!0});bi.takeLast=void 0;var kF=Dt,MF=U,DF=B;function LF(e){return e<=0?function(){return kF.EMPTY}:MF.operate(function(r,t){var n=[];r.subscribe(DF.createOperatorSubscriber(t,function(o){n.push(o),e<n.length&&n.shift()},function(){var o,i;try{for(var a=NF(n),u=a.next();!u.done;u=a.next()){var c=u.value;t.next(c)}}catch(s){o={error:s}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}t.complete()},void 0,function(){n=null}))})}bi.takeLast=LF;Object.defineProperty(qs,"__esModule",{value:!0});qs.last=void 0;var UF=Jt,FF=Vt,xF=bi,BF=ln,VF=un,WF=Me;function zF(e,r){var t=arguments.length>=2;return function(n){return n.pipe(e?FF.filter(function(o,i){return e(o,i,n)}):WF.identity,xF.takeLast(1),t?VF.defaultIfEmpty(r):BF.throwIfEmpty(function(){return new UF.EmptyError}))}}qs.last=zF;var Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.materialize=void 0;var op=zl,HF=U,qF=B;function GF(){return HF.operate(function(e,r){e.subscribe(qF.createOperatorSubscriber(r,function(t){r.next(op.Notification.createNext(t))},function(){r.next(op.Notification.createComplete()),r.complete()},function(t){r.next(op.Notification.createError(t)),r.complete()}))})}Gs.materialize=GF;var Ks={};Object.defineProperty(Ks,"__esModule",{value:!0});Ks.max=void 0;var KF=wr,YF=de;function ZF(e){return KF.reduce(YF.isFunction(e)?function(r,t){return e(r,t)>0?r:t}:function(r,t){return r>t?r:t})}Ks.max=ZF;var Ys={};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.flatMap=void 0;var QF=Tt;Ys.flatMap=QF.mergeMap;var Zs={};Object.defineProperty(Zs,"__esModule",{value:!0});Zs.mergeMapTo=void 0;var lm=Tt,XF=de;function JF(e,r,t){return t===void 0&&(t=1/0),XF.isFunction(r)?lm.mergeMap(function(){return e},r,t):(typeof r=="number"&&(t=r),lm.mergeMap(function(){return e},t))}Zs.mergeMapTo=JF;var Qs={};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.mergeScan=void 0;var ex=U,tx=ai;function rx(e,r,t){return t===void 0&&(t=1/0),ex.operate(function(n,o){var i=r;return tx.mergeInternals(n,o,function(a,u){return e(i,a,u)},t,function(a){i=a},!1,void 0,function(){return i=null})})}Qs.mergeScan=rx;var Xs={},Js={},nx=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},ox=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Js,"__esModule",{value:!0});Js.merge=void 0;var ix=U,ax=sn,fm=Re,sx=Ft;function ux(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=fm.popScheduler(e),n=fm.popNumber(e,1/0);return ix.operate(function(o,i){ax.mergeAll(n)(sx.from(ox([o],nx(e)),t)).subscribe(i)})}Js.merge=ux;var cx=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},lx=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Xs,"__esModule",{value:!0});Xs.mergeWith=void 0;var fx=Js;function dx(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return fx.merge.apply(void 0,lx([],cx(e)))}Xs.mergeWith=dx;var eu={};Object.defineProperty(eu,"__esModule",{value:!0});eu.min=void 0;var hx=wr,px=de;function vx(e){return hx.reduce(px.isFunction(e)?function(r,t){return e(r,t)<0?r:t}:function(r,t){return r<t?r:t})}eu.min=vx;var ro={};Object.defineProperty(ro,"__esModule",{value:!0});ro.multicast=void 0;var _x=Zn,dm=de,yx=to;function bx(e,r){var t=dm.isFunction(e)?e:function(){return e};return dm.isFunction(r)?yx.connect(r,{connector:t}):function(n){return new _x.ConnectableObservable(n,t)}}ro.multicast=bx;var Vn={},mx=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},gx=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.onErrorResumeNext=Vn.onErrorResumeNextWith=void 0;var wx=gr,Ox=ds;function VO(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=wx.argsOrArgArray(e);return function(n){return Ox.onErrorResumeNext.apply(void 0,gx([n],mx(t)))}}Vn.onErrorResumeNextWith=VO;Vn.onErrorResumeNext=VO;var tu={};Object.defineProperty(tu,"__esModule",{value:!0});tu.pairwise=void 0;var Ex=U,Sx=B;function Tx(){return Ex.operate(function(e,r){var t,n=!1;e.subscribe(Sx.createOperatorSubscriber(r,function(o){var i=t;t=o,n&&r.next([i,o]),n=!0}))})}tu.pairwise=Tx;var ru={};Object.defineProperty(ru,"__esModule",{value:!0});ru.pluck=void 0;var Px=Bt;function Cx(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=e.length;if(t===0)throw new Error("list of properties cannot be empty.");return Px.map(function(n){for(var o=n,i=0;i<t;i++){var a=o==null?void 0:o[e[i]];if(typeof a<"u")o=a;else return}return o})}ru.pluck=Cx;var nu={};Object.defineProperty(nu,"__esModule",{value:!0});nu.publish=void 0;var Ax=Ae,Ix=ro,Rx=to;function jx(e){return e?function(r){return Rx.connect(e)(r)}:function(r){return Ix.multicast(new Ax.Subject)(r)}}nu.publish=jx;var ou={};Object.defineProperty(ou,"__esModule",{value:!0});ou.publishBehavior=void 0;var $x=Ka,Nx=Zn;function kx(e){return function(r){var t=new $x.BehaviorSubject(e);return new Nx.ConnectableObservable(r,function(){return t})}}ou.publishBehavior=kx;var iu={};Object.defineProperty(iu,"__esModule",{value:!0});iu.publishLast=void 0;var Mx=ti,Dx=Zn;function Lx(){return function(e){var r=new Mx.AsyncSubject;return new Dx.ConnectableObservable(e,function(){return r})}}iu.publishLast=Lx;var au={};Object.defineProperty(au,"__esModule",{value:!0});au.publishReplay=void 0;var Ux=ei,Fx=ro,hm=de;function xx(e,r,t,n){t&&!hm.isFunction(t)&&(n=t);var o=hm.isFunction(t)?t:void 0;return function(i){return Fx.multicast(new Ux.ReplaySubject(e,r,n),o)(i)}}au.publishReplay=xx;var mi={},Bx=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Vx=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(mi,"__esModule",{value:!0});mi.raceWith=void 0;var Wx=Bn,zx=U,Hx=Me;function qx(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length?zx.operate(function(t,n){Wx.raceInit(Vx([t],Bx(e)))(n)}):Hx.identity}mi.raceWith=qx;var su={};Object.defineProperty(su,"__esModule",{value:!0});su.repeat=void 0;var Gx=Dt,Kx=U,pm=B,Yx=W,Zx=tr;function Qx(e){var r,t=1/0,n;return e!=null&&(typeof e=="object"?(r=e.count,t=r===void 0?1/0:r,n=e.delay):t=e),t<=0?function(){return Gx.EMPTY}:Kx.operate(function(o,i){var a=0,u,c=function(){if(u==null||u.unsubscribe(),u=null,n!=null){var l=typeof n=="number"?Zx.timer(n):Yx.innerFrom(n(a)),d=pm.createOperatorSubscriber(i,function(){d.unsubscribe(),s()});l.subscribe(d)}else s()},s=function(){var l=!1;u=o.subscribe(pm.createOperatorSubscriber(i,void 0,function(){++a<t?u?c():l=!0:i.complete()})),l&&c()};s()})}su.repeat=Qx;var uu={};Object.defineProperty(uu,"__esModule",{value:!0});uu.repeatWhen=void 0;var Xx=W,Jx=Ae,e3=U,vm=B;function t3(e){return e3.operate(function(r,t){var n,o=!1,i,a=!1,u=!1,c=function(){return u&&a&&(t.complete(),!0)},s=function(){return i||(i=new Jx.Subject,Xx.innerFrom(e(i)).subscribe(vm.createOperatorSubscriber(t,function(){n?l():o=!0},function(){a=!0,c()}))),i},l=function(){u=!1,n=r.subscribe(vm.createOperatorSubscriber(t,void 0,function(){u=!0,!c()&&s().next()})),o&&(n.unsubscribe(),n=null,o=!1,l())};l()})}uu.repeatWhen=t3;var cu={};Object.defineProperty(cu,"__esModule",{value:!0});cu.retry=void 0;var r3=U,_m=B,n3=Me,o3=tr,i3=W;function a3(e){e===void 0&&(e=1/0);var r;e&&typeof e=="object"?r=e:r={count:e};var t=r.count,n=t===void 0?1/0:t,o=r.delay,i=r.resetOnSuccess,a=i===void 0?!1:i;return n<=0?n3.identity:r3.operate(function(u,c){var s=0,l,d=function(){var h=!1;l=u.subscribe(_m.createOperatorSubscriber(c,function(p){a&&(s=0),c.next(p)},void 0,function(p){if(s++<n){var v=function(){l?(l.unsubscribe(),l=null,d()):h=!0};if(o!=null){var _=typeof o=="number"?o3.timer(o):i3.innerFrom(o(p,s)),b=_m.createOperatorSubscriber(c,function(){b.unsubscribe(),v()},function(){c.complete()});_.subscribe(b)}else v()}else c.error(p)})),h&&(l.unsubscribe(),l=null,d())};d()})}cu.retry=a3;var lu={};Object.defineProperty(lu,"__esModule",{value:!0});lu.retryWhen=void 0;var s3=W,u3=Ae,c3=U,ym=B;function l3(e){return c3.operate(function(r,t){var n,o=!1,i,a=function(){n=r.subscribe(ym.createOperatorSubscriber(t,void 0,void 0,function(u){i||(i=new u3.Subject,s3.innerFrom(e(i)).subscribe(ym.createOperatorSubscriber(t,function(){return n?a():o=!0}))),i&&i.next(u)})),o&&(n.unsubscribe(),n=null,o=!1,a())};a()})}lu.retryWhen=l3;var gi={};Object.defineProperty(gi,"__esModule",{value:!0});gi.sample=void 0;var f3=W,d3=U,h3=ke,bm=B;function p3(e){return d3.operate(function(r,t){var n=!1,o=null;r.subscribe(bm.createOperatorSubscriber(t,function(i){n=!0,o=i})),f3.innerFrom(e).subscribe(bm.createOperatorSubscriber(t,function(){if(n){n=!1;var i=o;o=null,t.next(i)}},h3.noop))})}gi.sample=p3;var fu={};Object.defineProperty(fu,"__esModule",{value:!0});fu.sampleTime=void 0;var v3=ct,_3=gi,y3=fs;function b3(e,r){return r===void 0&&(r=v3.asyncScheduler),_3.sample(y3.interval(e,r))}fu.sampleTime=b3;var du={};Object.defineProperty(du,"__esModule",{value:!0});du.scan=void 0;var m3=U,g3=Es;function w3(e,r){return m3.operate(g3.scanInternals(e,r,arguments.length>=2,!0))}du.scan=w3;var hu={};Object.defineProperty(hu,"__esModule",{value:!0});hu.sequenceEqual=void 0;var O3=U,E3=B,S3=W;function T3(e,r){return r===void 0&&(r=function(t,n){return t===n}),O3.operate(function(t,n){var o=mm(),i=mm(),a=function(c){n.next(c),n.complete()},u=function(c,s){var l=E3.createOperatorSubscriber(n,function(d){var h=s.buffer,p=s.complete;h.length===0?p?a(!1):c.buffer.push(d):!r(d,h.shift())&&a(!1)},function(){c.complete=!0;var d=s.complete,h=s.buffer;d&&a(h.length===0),l==null||l.unsubscribe()});return l};t.subscribe(u(o,i)),S3.innerFrom(e).subscribe(u(i,o))})}hu.sequenceEqual=T3;function mm(){return{buffer:[],complete:!1}}var wi={},P3=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},C3=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(wi,"__esModule",{value:!0});wi.share=void 0;var WO=W,A3=Ae,zO=Xo,I3=U;function R3(e){e===void 0&&(e={});var r=e.connector,t=r===void 0?function(){return new A3.Subject}:r,n=e.resetOnError,o=n===void 0?!0:n,i=e.resetOnComplete,a=i===void 0?!0:i,u=e.resetOnRefCountZero,c=u===void 0?!0:u;return function(s){var l,d,h,p=0,v=!1,_=!1,b=function(){d==null||d.unsubscribe(),d=void 0},w=function(){b(),l=h=void 0,v=_=!1},E=function(){var S=l;w(),S==null||S.unsubscribe()};return I3.operate(function(S,O){p++,!_&&!v&&b();var A=h=h??t();O.add(function(){p--,p===0&&!_&&!v&&(d=ip(E,c))}),A.subscribe(O),!l&&p>0&&(l=new zO.SafeSubscriber({next:function($){return A.next($)},error:function($){_=!0,b(),d=ip(w,o,$),A.error($)},complete:function(){v=!0,b(),d=ip(w,a),A.complete()}}),WO.innerFrom(S).subscribe(l))})(s)}}wi.share=R3;function ip(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];if(r===!0){e();return}if(r!==!1){var o=new zO.SafeSubscriber({next:function(){o.unsubscribe(),e()}});return WO.innerFrom(r.apply(void 0,C3([],P3(t)))).subscribe(o)}}var pu={};Object.defineProperty(pu,"__esModule",{value:!0});pu.shareReplay=void 0;var j3=ei,$3=wi;function N3(e,r,t){var n,o,i,a,u=!1;return e&&typeof e=="object"?(n=e.bufferSize,a=n===void 0?1/0:n,o=e.windowTime,r=o===void 0?1/0:o,i=e.refCount,u=i===void 0?!1:i,t=e.scheduler):a=e??1/0,$3.share({connector:function(){return new j3.ReplaySubject(a,r,t)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}pu.shareReplay=N3;var vu={};Object.defineProperty(vu,"__esModule",{value:!0});vu.single=void 0;var k3=Jt,M3=ss,D3=as,L3=U,U3=B;function F3(e){return L3.operate(function(r,t){var n=!1,o,i=!1,a=0;r.subscribe(U3.createOperatorSubscriber(t,function(u){i=!0,(!e||e(u,a++,r))&&(n&&t.error(new M3.SequenceError("Too many matching values")),n=!0,o=u)},function(){n?(t.next(o),t.complete()):t.error(i?new D3.NotFoundError("No matching values"):new k3.EmptyError)}))})}vu.single=F3;var _u={};Object.defineProperty(_u,"__esModule",{value:!0});_u.skip=void 0;var x3=Vt;function B3(e){return x3.filter(function(r,t){return e<=t})}_u.skip=B3;var yu={};Object.defineProperty(yu,"__esModule",{value:!0});yu.skipLast=void 0;var V3=Me,W3=U,z3=B;function H3(e){return e<=0?V3.identity:W3.operate(function(r,t){var n=new Array(e),o=0;return r.subscribe(z3.createOperatorSubscriber(t,function(i){var a=o++;if(a<e)n[a]=i;else{var u=a%e,c=n[u];n[u]=i,t.next(c)}})),function(){n=null}})}yu.skipLast=H3;var bu={};Object.defineProperty(bu,"__esModule",{value:!0});bu.skipUntil=void 0;var q3=U,gm=B,G3=W,K3=ke;function Y3(e){return q3.operate(function(r,t){var n=!1,o=gm.createOperatorSubscriber(t,function(){o==null||o.unsubscribe(),n=!0},K3.noop);G3.innerFrom(e).subscribe(o),r.subscribe(gm.createOperatorSubscriber(t,function(i){return n&&t.next(i)}))})}bu.skipUntil=Y3;var mu={};Object.defineProperty(mu,"__esModule",{value:!0});mu.skipWhile=void 0;var Z3=U,Q3=B;function X3(e){return Z3.operate(function(r,t){var n=!1,o=0;r.subscribe(Q3.createOperatorSubscriber(t,function(i){return(n||(n=!e(i,o++)))&&t.next(i)}))})}mu.skipWhile=X3;var gu={};Object.defineProperty(gu,"__esModule",{value:!0});gu.startWith=void 0;var wm=Xn,J3=Re,eB=U;function tB(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=J3.popScheduler(e);return eB.operate(function(n,o){(t?wm.concat(e,n,t):wm.concat(e,n)).subscribe(o)})}gu.startWith=tB;var wu={},fn={};Object.defineProperty(fn,"__esModule",{value:!0});fn.switchMap=void 0;var rB=W,nB=U,Om=B;function oB(e,r){return nB.operate(function(t,n){var o=null,i=0,a=!1,u=function(){return a&&!o&&n.complete()};t.subscribe(Om.createOperatorSubscriber(n,function(c){o==null||o.unsubscribe();var s=0,l=i++;rB.innerFrom(e(c,l)).subscribe(o=Om.createOperatorSubscriber(n,function(d){return n.next(r?r(c,d,l,s++):d)},function(){o=null,u()}))},function(){a=!0,u()}))})}fn.switchMap=oB;Object.defineProperty(wu,"__esModule",{value:!0});wu.switchAll=void 0;var iB=fn,aB=Me;function sB(){return iB.switchMap(aB.identity)}wu.switchAll=sB;var Ou={};Object.defineProperty(Ou,"__esModule",{value:!0});Ou.switchMapTo=void 0;var Em=fn,uB=de;function cB(e,r){return uB.isFunction(r)?Em.switchMap(function(){return e},r):Em.switchMap(function(){return e})}Ou.switchMapTo=cB;var Eu={};Object.defineProperty(Eu,"__esModule",{value:!0});Eu.switchScan=void 0;var lB=fn,fB=U;function dB(e,r){return fB.operate(function(t,n){var o=r;return lB.switchMap(function(i,a){return e(o,i,a)},function(i,a){return o=a,a})(t).subscribe(n),function(){o=null}})}Eu.switchScan=dB;var Su={};Object.defineProperty(Su,"__esModule",{value:!0});Su.takeUntil=void 0;var hB=U,pB=B,vB=W,_B=ke;function yB(e){return hB.operate(function(r,t){vB.innerFrom(e).subscribe(pB.createOperatorSubscriber(t,function(){return t.complete()},_B.noop)),!t.closed&&r.subscribe(t)})}Su.takeUntil=yB;var Tu={};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.takeWhile=void 0;var bB=U,mB=B;function gB(e,r){return r===void 0&&(r=!1),bB.operate(function(t,n){var o=0;t.subscribe(mB.createOperatorSubscriber(n,function(i){var a=e(i,o++);(a||r)&&n.next(i),!a&&n.complete()}))})}Tu.takeWhile=gB;var Pu={};Object.defineProperty(Pu,"__esModule",{value:!0});Pu.tap=void 0;var wB=de,OB=U,EB=B,SB=Me;function TB(e,r,t){var n=wB.isFunction(e)||r||t?{next:e,error:r,complete:t}:e;return n?OB.operate(function(o,i){var a;(a=n.subscribe)===null||a===void 0||a.call(n);var u=!0;o.subscribe(EB.createOperatorSubscriber(i,function(c){var s;(s=n.next)===null||s===void 0||s.call(n,c),i.next(c)},function(){var c;u=!1,(c=n.complete)===null||c===void 0||c.call(n),i.complete()},function(c){var s;u=!1,(s=n.error)===null||s===void 0||s.call(n,c),i.error(c)},function(){var c,s;u&&((c=n.unsubscribe)===null||c===void 0||c.call(n)),(s=n.finalize)===null||s===void 0||s.call(n)}))}):SB.identity}Pu.tap=TB;var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.throttle=void 0;var PB=U,Sm=B,CB=W;function AB(e,r){return PB.operate(function(t,n){var o=r??{},i=o.leading,a=i===void 0?!0:i,u=o.trailing,c=u===void 0?!1:u,s=!1,l=null,d=null,h=!1,p=function(){d==null||d.unsubscribe(),d=null,c&&(b(),h&&n.complete())},v=function(){d=null,h&&n.complete()},_=function(w){return d=CB.innerFrom(e(w)).subscribe(Sm.createOperatorSubscriber(n,p,v))},b=function(){if(s){s=!1;var w=l;l=null,n.next(w),!h&&_(w)}};t.subscribe(Sm.createOperatorSubscriber(n,function(w){s=!0,l=w,!(d&&!d.closed)&&(a?b():_(w))},function(){h=!0,!(c&&s&&d&&!d.closed)&&n.complete()}))})}Oi.throttle=AB;var Cu={};Object.defineProperty(Cu,"__esModule",{value:!0});Cu.throttleTime=void 0;var IB=ct,RB=Oi,jB=tr;function $B(e,r,t){r===void 0&&(r=IB.asyncScheduler);var n=jB.timer(e,r);return RB.throttle(function(){return n},t)}Cu.throttleTime=$B;var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.TimeInterval=Wn.timeInterval=void 0;var NB=ct,kB=U,MB=B;function DB(e){return e===void 0&&(e=NB.asyncScheduler),kB.operate(function(r,t){var n=e.now();r.subscribe(MB.createOperatorSubscriber(t,function(o){var i=e.now(),a=i-n;n=i,t.next(new HO(o,a))}))})}Wn.timeInterval=DB;var HO=function(){function e(r,t){this.value=r,this.interval=t}return e}();Wn.TimeInterval=HO;var Au={};Object.defineProperty(Au,"__esModule",{value:!0});Au.timeoutWith=void 0;var LB=ct,UB=ii,FB=Ta;function xB(e,r,t){var n,o,i;if(t=t??LB.async,UB.isValidDate(e)?n=e:typeof e=="number"&&(o=e),r)i=function(){return r};else throw new TypeError("No observable provided to switch to");if(n==null&&o==null)throw new TypeError("No timeout provided.");return FB.timeout({first:n,each:o,scheduler:t,with:i})}Au.timeoutWith=xB;var Iu={};Object.defineProperty(Iu,"__esModule",{value:!0});Iu.timestamp=void 0;var BB=Dl,VB=Bt;function WB(e){return e===void 0&&(e=BB.dateTimestampProvider),VB.map(function(r){return{value:r,timestamp:e.now()}})}Iu.timestamp=WB;var Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});Ru.window=void 0;var Tm=Ae,zB=U,Pm=B,HB=ke,qB=W;function GB(e){return zB.operate(function(r,t){var n=new Tm.Subject;t.next(n.asObservable());var o=function(i){n.error(i),t.error(i)};return r.subscribe(Pm.createOperatorSubscriber(t,function(i){return n==null?void 0:n.next(i)},function(){n.complete(),t.complete()},o)),qB.innerFrom(e).subscribe(Pm.createOperatorSubscriber(t,function(){n.complete(),t.next(n=new Tm.Subject)},HB.noop,o)),function(){n==null||n.unsubscribe(),n=null}})}Ru.window=GB;var ju={},KB=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ju,"__esModule",{value:!0});ju.windowCount=void 0;var Cm=Ae,YB=U,ZB=B;function QB(e,r){r===void 0&&(r=0);var t=r>0?r:e;return YB.operate(function(n,o){var i=[new Cm.Subject],a=0;o.next(i[0].asObservable()),n.subscribe(ZB.createOperatorSubscriber(o,function(u){var c,s;try{for(var l=KB(i),d=l.next();!d.done;d=l.next()){var h=d.value;h.next(u)}}catch(_){c={error:_}}finally{try{d&&!d.done&&(s=l.return)&&s.call(l)}finally{if(c)throw c.error}}var p=a-e+1;if(p>=0&&p%t===0&&i.shift().complete(),++a%t===0){var v=new Cm.Subject;i.push(v),o.next(v.asObservable())}},function(){for(;i.length>0;)i.shift().complete();o.complete()},function(u){for(;i.length>0;)i.shift().error(u);o.error(u)},function(){i=null}))})}ju.windowCount=QB;var $u={};Object.defineProperty($u,"__esModule",{value:!0});$u.windowTime=void 0;var XB=Ae,JB=ct,e6=Ne,t6=U,r6=B,n6=Ut,o6=Re,Am=xt;function i6(e){for(var r,t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=(r=o6.popScheduler(n))!==null&&r!==void 0?r:JB.asyncScheduler,a=(t=n[0])!==null&&t!==void 0?t:null,u=n[1]||1/0;return t6.operate(function(c,s){var l=[],d=!1,h=function(b){var w=b.window,E=b.subs;w.complete(),E.unsubscribe(),n6.arrRemove(l,b),d&&p()},p=function(){if(l){var b=new e6.Subscription;s.add(b);var w=new XB.Subject,E={window:w,subs:b,seen:0};l.push(E),s.next(w.asObservable()),Am.executeSchedule(b,i,function(){return h(E)},e)}};a!==null&&a>=0?Am.executeSchedule(s,i,p,a,!0):d=!0,p();var v=function(b){return l.slice().forEach(b)},_=function(b){v(function(w){var E=w.window;return b(E)}),b(s),s.unsubscribe()};return c.subscribe(r6.createOperatorSubscriber(s,function(b){v(function(w){w.window.next(b),u<=++w.seen&&h(w)})},function(){return _(function(b){return b.complete()})},function(b){return _(function(w){return w.error(b)})})),function(){l=null}})}$u.windowTime=i6;var Nu={},a6=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Nu,"__esModule",{value:!0});Nu.windowToggle=void 0;var s6=Ae,u6=Ne,c6=U,Im=W,ap=B,Rm=ke,l6=Ut;function f6(e,r){return c6.operate(function(t,n){var o=[],i=function(a){for(;0<o.length;)o.shift().error(a);n.error(a)};Im.innerFrom(e).subscribe(ap.createOperatorSubscriber(n,function(a){var u=new s6.Subject;o.push(u);var c=new u6.Subscription,s=function(){l6.arrRemove(o,u),u.complete(),c.unsubscribe()},l;try{l=Im.innerFrom(r(a))}catch(d){i(d);return}n.next(u.asObservable()),c.add(l.subscribe(ap.createOperatorSubscriber(n,s,Rm.noop,i)))},Rm.noop)),t.subscribe(ap.createOperatorSubscriber(n,function(a){var u,c,s=o.slice();try{for(var l=a6(s),d=l.next();!d.done;d=l.next()){var h=d.value;h.next(a)}}catch(p){u={error:p}}finally{try{d&&!d.done&&(c=l.return)&&c.call(l)}finally{if(u)throw u.error}}},function(){for(;0<o.length;)o.shift().complete();n.complete()},i,function(){for(;0<o.length;)o.shift().unsubscribe()}))})}Nu.windowToggle=f6;var ku={};Object.defineProperty(ku,"__esModule",{value:!0});ku.windowWhen=void 0;var d6=Ae,h6=U,jm=B,p6=W;function v6(e){return h6.operate(function(r,t){var n,o,i=function(u){n.error(u),t.error(u)},a=function(){o==null||o.unsubscribe(),n==null||n.complete(),n=new d6.Subject,t.next(n.asObservable());var u;try{u=p6.innerFrom(e())}catch(c){i(c);return}u.subscribe(o=jm.createOperatorSubscriber(t,a,a,i))};a(),r.subscribe(jm.createOperatorSubscriber(t,function(u){return n.next(u)},function(){n.complete(),t.complete()},i,function(){o==null||o.unsubscribe(),n=null}))})}ku.windowWhen=v6;var Mu={},$m=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Nm=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Mu,"__esModule",{value:!0});Mu.withLatestFrom=void 0;var _6=U,km=B,y6=W,b6=Me,m6=ke,g6=Re;function w6(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=g6.popResultSelector(e);return _6.operate(function(n,o){for(var i=e.length,a=new Array(i),u=e.map(function(){return!1}),c=!1,s=function(d){y6.innerFrom(e[d]).subscribe(km.createOperatorSubscriber(o,function(h){a[d]=h,!c&&!u[d]&&(u[d]=!0,(c=u.every(b6.identity))&&(u=null))},m6.noop))},l=0;l<i;l++)s(l);n.subscribe(km.createOperatorSubscriber(o,function(d){if(c){var h=Nm([d],$m(a));o.next(t?t.apply(void 0,Nm([],$m(h))):h)}}))})}Mu.withLatestFrom=w6;var Du={};Object.defineProperty(Du,"__esModule",{value:!0});Du.zipAll=void 0;var O6=si,E6=Os;function S6(e){return E6.joinAllInternals(O6.zip,e)}Du.zipAll=S6;var Lu={},Uu={},T6=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},P6=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Uu,"__esModule",{value:!0});Uu.zip=void 0;var C6=si,A6=U;function I6(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return A6.operate(function(t,n){C6.zip.apply(void 0,P6([t],T6(e))).subscribe(n)})}Uu.zip=I6;var R6=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},j6=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Lu,"__esModule",{value:!0});Lu.zipWith=void 0;var $6=Uu;function N6(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return $6.zip.apply(void 0,j6([],R6(e)))}Lu.zipWith=N6;(function(e){var r=f&&f.__createBinding||(Object.create?function(ho,po,or,pn){pn===void 0&&(pn=or),Object.defineProperty(ho,pn,{enumerable:!0,get:function(){return po[or]}})}:function(ho,po,or,pn){pn===void 0&&(pn=or),ho[pn]=po[or]}),t=f&&f.__exportStar||function(ho,po){for(var or in ho)or!=="default"&&!Object.prototype.hasOwnProperty.call(po,or)&&r(po,ho,or)};Object.defineProperty(e,"__esModule",{value:!0}),e.interval=e.iif=e.generate=e.fromEventPattern=e.fromEvent=e.from=e.forkJoin=e.empty=e.defer=e.connectable=e.concat=e.combineLatest=e.bindNodeCallback=e.bindCallback=e.UnsubscriptionError=e.TimeoutError=e.SequenceError=e.ObjectUnsubscribedError=e.NotFoundError=e.EmptyError=e.ArgumentOutOfRangeError=e.firstValueFrom=e.lastValueFrom=e.isObservable=e.identity=e.noop=e.pipe=e.NotificationKind=e.Notification=e.Subscriber=e.Subscription=e.Scheduler=e.VirtualAction=e.VirtualTimeScheduler=e.animationFrameScheduler=e.animationFrame=e.queueScheduler=e.queue=e.asyncScheduler=e.async=e.asapScheduler=e.asap=e.AsyncSubject=e.ReplaySubject=e.BehaviorSubject=e.Subject=e.animationFrames=e.observable=e.ConnectableObservable=e.Observable=void 0,e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.combineLatestWith=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=e.config=e.NEVER=e.EMPTY=e.scheduled=e.zip=e.using=e.timer=e.throwError=e.range=e.race=e.partition=e.pairs=e.onErrorResumeNext=e.of=e.never=e.merge=void 0,e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.pairwise=e.onErrorResumeNextWith=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=e.mergeAll=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=void 0,e.zipWith=e.zipAll=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=void 0;var n=pe;Object.defineProperty(e,"Observable",{enumerable:!0,get:function(){return n.Observable}});var o=Zn;Object.defineProperty(e,"ConnectableObservable",{enumerable:!0,get:function(){return o.ConnectableObservable}});var i=Yn;Object.defineProperty(e,"observable",{enumerable:!0,get:function(){return i.observable}});var a=Ml;Object.defineProperty(e,"animationFrames",{enumerable:!0,get:function(){return a.animationFrames}});var u=Ae;Object.defineProperty(e,"Subject",{enumerable:!0,get:function(){return u.Subject}});var c=Ka;Object.defineProperty(e,"BehaviorSubject",{enumerable:!0,get:function(){return c.BehaviorSubject}});var s=ei;Object.defineProperty(e,"ReplaySubject",{enumerable:!0,get:function(){return s.ReplaySubject}});var l=ti;Object.defineProperty(e,"AsyncSubject",{enumerable:!0,get:function(){return l.AsyncSubject}});var d=vO;Object.defineProperty(e,"asap",{enumerable:!0,get:function(){return d.asap}}),Object.defineProperty(e,"asapScheduler",{enumerable:!0,get:function(){return d.asapScheduler}});var h=ct;Object.defineProperty(e,"async",{enumerable:!0,get:function(){return h.async}}),Object.defineProperty(e,"asyncScheduler",{enumerable:!0,get:function(){return h.asyncScheduler}});var p=bO;Object.defineProperty(e,"queue",{enumerable:!0,get:function(){return p.queue}}),Object.defineProperty(e,"queueScheduler",{enumerable:!0,get:function(){return p.queueScheduler}});var v=mO;Object.defineProperty(e,"animationFrame",{enumerable:!0,get:function(){return v.animationFrame}}),Object.defineProperty(e,"animationFrameScheduler",{enumerable:!0,get:function(){return v.animationFrameScheduler}});var _=Lo;Object.defineProperty(e,"VirtualTimeScheduler",{enumerable:!0,get:function(){return _.VirtualTimeScheduler}}),Object.defineProperty(e,"VirtualAction",{enumerable:!0,get:function(){return _.VirtualAction}});var b=Ya;Object.defineProperty(e,"Scheduler",{enumerable:!0,get:function(){return b.Scheduler}});var w=Ne;Object.defineProperty(e,"Subscription",{enumerable:!0,get:function(){return w.Subscription}});var E=Xo;Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return E.Subscriber}});var S=zl;Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return S.Notification}}),Object.defineProperty(e,"NotificationKind",{enumerable:!0,get:function(){return S.NotificationKind}});var O=br;Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return O.pipe}});var A=ke;Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return A.noop}});var $=Me;Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return $.identity}});var I=Yl;Object.defineProperty(e,"isObservable",{enumerable:!0,get:function(){return I.isObservable}});var L=Zl;Object.defineProperty(e,"lastValueFrom",{enumerable:!0,get:function(){return L.lastValueFrom}});var X=Ql;Object.defineProperty(e,"firstValueFrom",{enumerable:!0,get:function(){return X.firstValueFrom}});var ae=is;Object.defineProperty(e,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return ae.ArgumentOutOfRangeError}});var _e=Jt;Object.defineProperty(e,"EmptyError",{enumerable:!0,get:function(){return _e.EmptyError}});var ne=as;Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return ne.NotFoundError}});var ve=Ga;Object.defineProperty(e,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return ve.ObjectUnsubscribedError}});var it=ss;Object.defineProperty(e,"SequenceError",{enumerable:!0,get:function(){return it.SequenceError}});var ee=Ta;Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return ee.TimeoutError}});var be=Ha;Object.defineProperty(e,"UnsubscriptionError",{enumerable:!0,get:function(){return be.UnsubscriptionError}});var Y=Xl;Object.defineProperty(e,"bindCallback",{enumerable:!0,get:function(){return Y.bindCallback}});var k=Jl;Object.defineProperty(e,"bindNodeCallback",{enumerable:!0,get:function(){return k.bindNodeCallback}});var T=zr;Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return T.combineLatest}});var C=Xn;Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return C.concat}});var R=ef;Object.defineProperty(e,"connectable",{enumerable:!0,get:function(){return R.connectable}});var V=eo;Object.defineProperty(e,"defer",{enumerable:!0,get:function(){return V.defer}});var H=Dt;Object.defineProperty(e,"empty",{enumerable:!0,get:function(){return H.empty}});var F=tf;Object.defineProperty(e,"forkJoin",{enumerable:!0,get:function(){return F.forkJoin}});var te=Ft;Object.defineProperty(e,"from",{enumerable:!0,get:function(){return te.from}});var Z=rf;Object.defineProperty(e,"fromEvent",{enumerable:!0,get:function(){return Z.fromEvent}});var se=nf;Object.defineProperty(e,"fromEventPattern",{enumerable:!0,get:function(){return se.fromEventPattern}});var y=of;Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return y.generate}});var P=af;Object.defineProperty(e,"iif",{enumerable:!0,get:function(){return P.iif}});var M=fs;Object.defineProperty(e,"interval",{enumerable:!0,get:function(){return M.interval}});var x=sf;Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return x.merge}});var K=sv;Object.defineProperty(e,"never",{enumerable:!0,get:function(){return K.never}});var me=ri;Object.defineProperty(e,"of",{enumerable:!0,get:function(){return me.of}});var je=ds;Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return je.onErrorResumeNext}});var yt=uf;Object.defineProperty(e,"pairs",{enumerable:!0,get:function(){return yt.pairs}});var Cr=cf;Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return Cr.partition}});var fo=Bn;Object.defineProperty(e,"race",{enumerable:!0,get:function(){return fo.race}});var Di=lf;Object.defineProperty(e,"range",{enumerable:!0,get:function(){return Di.range}});var Li=os;Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return Li.throwError}});var Ui=tr;Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return Ui.timer}});var Fi=ff;Object.defineProperty(e,"using",{enumerable:!0,get:function(){return Fi.using}});var Dd=si;Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return Dd.zip}});var Ld=Za;Object.defineProperty(e,"scheduled",{enumerable:!0,get:function(){return Ld.scheduled}});var Ud=Dt;Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return Ud.EMPTY}});var Fd=sv;Object.defineProperty(e,"NEVER",{enumerable:!0,get:function(){return Fd.NEVER}}),t(DO,e);var xd=tn;Object.defineProperty(e,"config",{enumerable:!0,get:function(){return xd.config}});var Bd=ui;Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return Bd.audit}});var Vd=ps;Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return Vd.auditTime}});var Wd=vs;Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return Wd.buffer}});var zd=_s;Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return zd.bufferCount}});var Hd=ys;Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return Hd.bufferTime}});var qd=bs;Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return qd.bufferToggle}});var Gd=ms;Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return Gd.bufferWhen}});var Kd=gs;Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return Kd.catchError}});var Yd=ws;Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return Yd.combineAll}});var Zd=ci;Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return Zd.combineLatestAll}});var Qd=Ss;Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return Qd.combineLatestWith}});var Xd=Jn;Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return Xd.concatAll}});var Jd=fi;Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return Jd.concatMap}});var eh=Ps;Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return eh.concatMapTo}});var th=Cs;Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return th.concatWith}});var rh=to;Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return rh.connect}});var nh=Is;Object.defineProperty(e,"count",{enumerable:!0,get:function(){return nh.count}});var oh=Rs;Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return oh.debounce}});var ih=js;Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return ih.debounceTime}});var ah=un;Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return ah.defaultIfEmpty}});var sh=$s;Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return sh.delay}});var uh=di;Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return uh.delayWhen}});var ch=Ns;Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return ch.dematerialize}});var lh=ks;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return lh.distinct}});var fh=vi;Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return fh.distinctUntilChanged}});var dh=Ms;Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return dh.distinctUntilKeyChanged}});var hh=Ds;Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return hh.elementAt}});var ph=Ls;Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return ph.endWith}});var vh=Us;Object.defineProperty(e,"every",{enumerable:!0,get:function(){return vh.every}});var _h=Fs;Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return _h.exhaust}});var yh=_i;Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return yh.exhaustAll}});var bh=yi;Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return bh.exhaustMap}});var mh=xs;Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return mh.expand}});var gh=Vt;Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return gh.filter}});var wh=Bs;Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return wh.finalize}});var Oh=Hr;Object.defineProperty(e,"find",{enumerable:!0,get:function(){return Oh.find}});var Eh=Vs;Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return Eh.findIndex}});var Sh=Ws;Object.defineProperty(e,"first",{enumerable:!0,get:function(){return Sh.first}});var Th=zs;Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return Th.groupBy}});var Ph=hi;Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return Ph.ignoreElements}});var Ch=Hs;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return Ch.isEmpty}});var Ah=qs;Object.defineProperty(e,"last",{enumerable:!0,get:function(){return Ah.last}});var Ih=Bt;Object.defineProperty(e,"map",{enumerable:!0,get:function(){return Ih.map}});var Rh=pi;Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return Rh.mapTo}});var jh=Gs;Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return jh.materialize}});var $h=Ks;Object.defineProperty(e,"max",{enumerable:!0,get:function(){return $h.max}});var Nh=sn;Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return Nh.mergeAll}});var kh=Ys;Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return kh.flatMap}});var Mh=Tt;Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return Mh.mergeMap}});var Dh=Zs;Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return Dh.mergeMapTo}});var Lh=Qs;Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return Lh.mergeScan}});var AT=Xs;Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return AT.mergeWith}});var IT=eu;Object.defineProperty(e,"min",{enumerable:!0,get:function(){return IT.min}});var RT=ro;Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return RT.multicast}});var jT=on;Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return jT.observeOn}});var $T=Vn;Object.defineProperty(e,"onErrorResumeNextWith",{enumerable:!0,get:function(){return $T.onErrorResumeNextWith}});var NT=tu;Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return NT.pairwise}});var kT=ru;Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return kT.pluck}});var MT=nu;Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return MT.publish}});var DT=ou;Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return DT.publishBehavior}});var LT=iu;Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return LT.publishLast}});var UT=au;Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return UT.publishReplay}});var FT=mi;Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return FT.raceWith}});var xT=wr;Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return xT.reduce}});var BT=su;Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return BT.repeat}});var VT=uu;Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return VT.repeatWhen}});var WT=cu;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return WT.retry}});var zT=lu;Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return zT.retryWhen}});var HT=Jo;Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return HT.refCount}});var qT=gi;Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return qT.sample}});var GT=fu;Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return GT.sampleTime}});var KT=du;Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return KT.scan}});var YT=hu;Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return YT.sequenceEqual}});var ZT=wi;Object.defineProperty(e,"share",{enumerable:!0,get:function(){return ZT.share}});var QT=pu;Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return QT.shareReplay}});var XT=vu;Object.defineProperty(e,"single",{enumerable:!0,get:function(){return XT.single}});var JT=_u;Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return JT.skip}});var eP=yu;Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return eP.skipLast}});var tP=bu;Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return tP.skipUntil}});var rP=mu;Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return rP.skipWhile}});var nP=gu;Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return nP.startWith}});var oP=an;Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return oP.subscribeOn}});var iP=wu;Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return iP.switchAll}});var aP=fn;Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return aP.switchMap}});var sP=Ou;Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return sP.switchMapTo}});var uP=Eu;Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return uP.switchScan}});var cP=cn;Object.defineProperty(e,"take",{enumerable:!0,get:function(){return cP.take}});var lP=bi;Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return lP.takeLast}});var fP=Su;Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return fP.takeUntil}});var dP=Tu;Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return dP.takeWhile}});var hP=Pu;Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return hP.tap}});var pP=Oi;Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return pP.throttle}});var vP=Cu;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return vP.throttleTime}});var _P=ln;Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return _P.throwIfEmpty}});var yP=Wn;Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return yP.timeInterval}});var bP=Ta;Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return bP.timeout}});var mP=Au;Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return mP.timeoutWith}});var gP=Iu;Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return gP.timestamp}});var wP=li;Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return wP.toArray}});var OP=Ru;Object.defineProperty(e,"window",{enumerable:!0,get:function(){return OP.window}});var EP=ju;Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return EP.windowCount}});var SP=$u;Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return SP.windowTime}});var TP=Nu;Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return TP.windowToggle}});var PP=ku;Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return PP.windowWhen}});var CP=Mu;Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return CP.withLatestFrom}});var AP=Du;Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return AP.zipAll}});var IP=Lu;Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return IP.zipWith}})})(za);var hf={},pf={};Object.defineProperty(pf,"__esModule",{value:!0});pf.partition=void 0;var k6=hs,Mm=Vt;function M6(e,r){return function(t){return[Mm.filter(e,r)(t),Mm.filter(k6.not(e,r))(t)]}}pf.partition=M6;var vf={},D6=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},L6=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(vf,"__esModule",{value:!0});vf.race=void 0;var U6=gr,F6=mi;function x6(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return F6.raceWith.apply(void 0,L6([],D6(U6.argsOrArgArray(e))))}vf.race=x6;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=e.merge=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.concat=e.combineLatestWith=e.combineLatest=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=void 0,e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.race=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.partition=e.pairwise=e.onErrorResumeNext=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=void 0,e.zipWith=e.zipAll=e.zip=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=void 0;var r=ui;Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return r.audit}});var t=ps;Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return t.auditTime}});var n=vs;Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return n.buffer}});var o=_s;Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return o.bufferCount}});var i=ys;Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return i.bufferTime}});var a=bs;Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return a.bufferToggle}});var u=ms;Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return u.bufferWhen}});var c=gs;Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return c.catchError}});var s=ws;Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return s.combineAll}});var l=ci;Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return l.combineLatestAll}});var d=Ts;Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return d.combineLatest}});var h=Ss;Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return h.combineLatestWith}});var p=As;Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return p.concat}});var v=Jn;Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return v.concatAll}});var _=fi;Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return _.concatMap}});var b=Ps;Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return b.concatMapTo}});var w=Cs;Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return w.concatWith}});var E=to;Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return E.connect}});var S=Is;Object.defineProperty(e,"count",{enumerable:!0,get:function(){return S.count}});var O=Rs;Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return O.debounce}});var A=js;Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return A.debounceTime}});var $=un;Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return $.defaultIfEmpty}});var I=$s;Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return I.delay}});var L=di;Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return L.delayWhen}});var X=Ns;Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return X.dematerialize}});var ae=ks;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return ae.distinct}});var _e=vi;Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return _e.distinctUntilChanged}});var ne=Ms;Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return ne.distinctUntilKeyChanged}});var ve=Ds;Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return ve.elementAt}});var it=Ls;Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return it.endWith}});var ee=Us;Object.defineProperty(e,"every",{enumerable:!0,get:function(){return ee.every}});var be=Fs;Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return be.exhaust}});var Y=_i;Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return Y.exhaustAll}});var k=yi;Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return k.exhaustMap}});var T=xs;Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return T.expand}});var C=Vt;Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return C.filter}});var R=Bs;Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return R.finalize}});var V=Hr;Object.defineProperty(e,"find",{enumerable:!0,get:function(){return V.find}});var H=Vs;Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return H.findIndex}});var F=Ws;Object.defineProperty(e,"first",{enumerable:!0,get:function(){return F.first}});var te=zs;Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return te.groupBy}});var Z=hi;Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return Z.ignoreElements}});var se=Hs;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return se.isEmpty}});var y=qs;Object.defineProperty(e,"last",{enumerable:!0,get:function(){return y.last}});var P=Bt;Object.defineProperty(e,"map",{enumerable:!0,get:function(){return P.map}});var M=pi;Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return M.mapTo}});var x=Gs;Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return x.materialize}});var K=Ks;Object.defineProperty(e,"max",{enumerable:!0,get:function(){return K.max}});var me=Js;Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return me.merge}});var je=sn;Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return je.mergeAll}});var yt=Ys;Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return yt.flatMap}});var Cr=Tt;Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return Cr.mergeMap}});var fo=Zs;Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return fo.mergeMapTo}});var Di=Qs;Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return Di.mergeScan}});var Li=Xs;Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return Li.mergeWith}});var Ui=eu;Object.defineProperty(e,"min",{enumerable:!0,get:function(){return Ui.min}});var Fi=ro;Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return Fi.multicast}});var Dd=on;Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return Dd.observeOn}});var Ld=Vn;Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return Ld.onErrorResumeNext}});var Ud=tu;Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return Ud.pairwise}});var Fd=pf;Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return Fd.partition}});var xd=ru;Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return xd.pluck}});var Bd=nu;Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return Bd.publish}});var Vd=ou;Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return Vd.publishBehavior}});var Wd=iu;Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return Wd.publishLast}});var zd=au;Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return zd.publishReplay}});var Hd=vf;Object.defineProperty(e,"race",{enumerable:!0,get:function(){return Hd.race}});var qd=mi;Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return qd.raceWith}});var Gd=wr;Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return Gd.reduce}});var Kd=su;Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return Kd.repeat}});var Yd=uu;Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return Yd.repeatWhen}});var Zd=cu;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return Zd.retry}});var Qd=lu;Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return Qd.retryWhen}});var Xd=Jo;Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return Xd.refCount}});var Jd=gi;Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return Jd.sample}});var eh=fu;Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return eh.sampleTime}});var th=du;Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return th.scan}});var rh=hu;Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return rh.sequenceEqual}});var nh=wi;Object.defineProperty(e,"share",{enumerable:!0,get:function(){return nh.share}});var oh=pu;Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return oh.shareReplay}});var ih=vu;Object.defineProperty(e,"single",{enumerable:!0,get:function(){return ih.single}});var ah=_u;Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return ah.skip}});var sh=yu;Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return sh.skipLast}});var uh=bu;Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return uh.skipUntil}});var ch=mu;Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return ch.skipWhile}});var lh=gu;Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return lh.startWith}});var fh=an;Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return fh.subscribeOn}});var dh=wu;Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return dh.switchAll}});var hh=fn;Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return hh.switchMap}});var ph=Ou;Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return ph.switchMapTo}});var vh=Eu;Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return vh.switchScan}});var _h=cn;Object.defineProperty(e,"take",{enumerable:!0,get:function(){return _h.take}});var yh=bi;Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return yh.takeLast}});var bh=Su;Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return bh.takeUntil}});var mh=Tu;Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return mh.takeWhile}});var gh=Pu;Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return gh.tap}});var wh=Oi;Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return wh.throttle}});var Oh=Cu;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return Oh.throttleTime}});var Eh=ln;Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return Eh.throwIfEmpty}});var Sh=Wn;Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return Sh.timeInterval}});var Th=Ta;Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return Th.timeout}});var Ph=Au;Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return Ph.timeoutWith}});var Ch=Iu;Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return Ch.timestamp}});var Ah=li;Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return Ah.toArray}});var Ih=Ru;Object.defineProperty(e,"window",{enumerable:!0,get:function(){return Ih.window}});var Rh=ju;Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return Rh.windowCount}});var jh=$u;Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return jh.windowTime}});var $h=Nu;Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return $h.windowToggle}});var Nh=ku;Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return Nh.windowWhen}});var kh=Mu;Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return kh.withLatestFrom}});var Mh=Uu;Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return Mh.zip}});var Dh=Du;Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return Dh.zipAll}});var Lh=Lu;Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return Lh.zipWith}})})(hf);var Ei={},Io=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(l){try{s(n.next(l))}catch(d){a(d)}}function c(l){try{s(n.throw(l))}catch(d){a(d)}}function s(l){l.done?i(l.value):o(l.value).then(u,c)}s((n=n.apply(e,r||[])).next())})},Ro=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(t=0)),t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(Ei,"__esModule",{value:!0});var B6=G,Cn=za,mn=hf,Yi={READY:0,STREAMING:1,COMPLETED:2},V6=function(){function e(r,t){var n=r.pipe((0,mn.publishReplay)(1),(0,mn.refCount)());this._result=n,this._keys=n.pipe((0,mn.mergeMap)(function(o){return(0,Cn.from)(o.keys())}),(0,mn.publishReplay)(1),(0,mn.refCount)()),this._records=void 0,this._controls=new qO,this._summary=new Cn.ReplaySubject,this._state=t||Yi.READY}return e.prototype.keys=function(){return this._keys},e.prototype.records=function(){var r=this,t=this._result.pipe((0,mn.mergeMap)(function(n){return new Cn.Observable(function(o){return r._startStreaming({result:n,recordsObserver:o})})}));return t.push=function(){return r._push()},t},e.prototype.consume=function(){var r=this;return this._result.pipe((0,mn.mergeMap)(function(t){return new Cn.Observable(function(n){return r._startStreaming({result:t,summaryObserver:n})})}))},e.prototype.pause=function(){this._controls.pause()},e.prototype.resume=function(){return this._controls.resume()},e.prototype.push=function(){return this._controls.push()},e.prototype._startStreaming=function(r){var t=r===void 0?{}:r,n=t.result,o=t.recordsObserver,i=o===void 0?null:o,a=t.summaryObserver,u=a===void 0?null:a,c=[];return u&&c.push(this._summary.subscribe(u)),this._state<Yi.STREAMING?(this._state=Yi.STREAMING,this._setupRecordsStream(n),i?c.push(this._records.subscribe(i)):n._cancel(),c.push({unsubscribe:function(){n._cancel&&n._cancel()}})):i&&i.error((0,B6.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){c.forEach(function(s){return s.unsubscribe()})}},e.prototype._toObservable=function(){var r=this;function t(n){return new Cn.Observable(function(o){o.next(n),o.complete()})}return new Cn.Observable(function(n){r._result.subscribe({complete:function(){return n.complete()},next:function(o){return n.next(new e(t(o)),r._state)},error:function(o){return n.error(o)}})})},e.prototype._setupRecordsStream=function(r){var t=this;return this._records?this._records:(this._records=W6(r[Symbol.asyncIterator](),{complete:function(){return Io(t,void 0,void 0,function(){var n,o;return Ro(this,function(i){switch(i.label){case 0:return this._state=Yi.COMPLETED,o=(n=this._summary).next,[4,r.summary()];case 1:return o.apply(n,[i.sent()]),this._summary.complete(),[2]}})})},error:function(n){t._state=Yi.COMPLETED,t._summary.error(n)}},this._controls),this._records)},e}();Ei.default=V6;function W6(e,r,t){var n=this;t===void 0&&(t=new qO);var o=new Cn.Subject,i=function(u){return Io(n,void 0,void 0,function(){var c,s,l,d;return Ro(this,function(h){switch(h.label){case 0:return h.trys.push([0,2,3,4]),t.pushing=!0,[4,u];case 1:return c=h.sent(),s=c.done,l=c.value,s?(o.complete(),r.complete()):(o.next(l),t.paused||i(e.next()).catch(function(){})),[3,4];case 2:return d=h.sent(),o.error(d),r.error(d),[3,4];case 3:return t.pushing=!1,[7];case 4:return[2]}})})};function a(u){return Io(this,void 0,void 0,function(){return Ro(this,function(c){switch(c.label){case 0:return[4,i(e.next(u))];case 1:return c.sent(),[2]}})})}return t.pusher=a,a(),o}var qO=function(){function e(r){r===void 0&&(r=function(){return Io(t,void 0,void 0,function(){return Ro(this,function(n){return[2]})})});var t=this;this._paused=!1,this._pushing=!1,this._push=r}return e.prototype.pause=function(){this._paused=!0},Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushing",{get:function(){return this._pushing},set:function(r){this._pushing=r},enumerable:!1,configurable:!0}),e.prototype.resume=function(){return Io(this,void 0,void 0,function(){var r;return Ro(this,function(t){switch(t.label){case 0:return r=this._paused,this._paused=!1,r&&!this._pushing?[4,this._push()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.push=function(){return Io(this,void 0,void 0,function(){return Ro(this,function(r){switch(r.label){case 0:return this.pause(),[4,this._push()];case 1:return[2,r.sent()]}})})},Object.defineProperty(e.prototype,"pusher",{get:function(){return this._push},set:function(r){this._push=r},enumerable:!1,configurable:!0}),e}(),Fu={},GO=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fu,"__esModule",{value:!0});var oc=za,z6=GO(Ei);GO(G);var H6=function(){function e(r){this._txc=r}return e.prototype.run=function(r,t){var n=this;return new z6.default(new oc.Observable(function(o){try{o.next(n._txc.run(r,t)),o.complete()}catch(i){o.error(i)}return function(){}}))},e.prototype.commit=function(){var r=this;return new oc.Observable(function(t){r._txc.commit().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype.rollback=function(){var r=this;return new oc.Observable(function(t){r._txc.rollback().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype.isOpen=function(){return this._txc.isOpen()},e.prototype.close=function(){var r=this;return new oc.Observable(function(t){r._txc.close().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e}();Fu.default=H6;var _f={},KO=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_f,"__esModule",{value:!0});KO(Ei);KO(Fu);var q6=function(){function e(r){var t=r.run;this._run=t}return e.fromTransaction=function(r){return new e({run:r.run.bind(r)})},e.prototype.run=function(r,t){return this._run(r,t)},e}();_f.default=q6;var y_={};Object.defineProperty(y_,"__esModule",{value:!0});var Wc=G,sp=za,up=hf;Wc.internal.logger.Logger;var G6=Wc.error.SERVICE_UNAVAILABLE,Dm=30*1e3,Lm=1e3,Um=2,Fm=.2,K6=function(){function e(r){var t=r===void 0?{}:r,n=t.maxRetryTimeout,o=n===void 0?Dm:n,i=t.initialDelay,a=i===void 0?Lm:i,u=t.delayMultiplier,c=u===void 0?Um:u,s=t.delayJitter,l=s===void 0?Fm:s,d=t.logger,h=d===void 0?null:d;this._maxRetryTimeout=ic(o,Dm),this._initialDelay=ic(a,Lm),this._delayMultiplier=ic(c,Um),this._delayJitter=ic(l,Fm),this._logger=h}return e.prototype.retry=function(r){var t=this;return r.pipe((0,up.retryWhen)(function(n){var o=[],i=Date.now(),a=1,u=t._initialDelay;return n.pipe((0,up.mergeMap)(function(c){if(!(0,Wc.isRetriableError)(c))return(0,sp.throwError)(function(){return c});if(o.push(c),a>=2&&Date.now()-i>=t._maxRetryTimeout){var s=(0,Wc.newError)("Failed after retried for ".concat(a," times in ").concat(t._maxRetryTimeout," ms. Make sure that your database is online and retry again."),G6);return s.seenErrors=o,(0,sp.throwError)(function(){return s})}var l=t._computeNextDelay(u);return u=u*t._delayMultiplier,a++,t._logger&&t._logger.warn("Transaction failed and will be retried in ".concat(l)),(0,sp.of)(1).pipe((0,up.delay)(l))}))}))},e.prototype._computeNextDelay=function(r){var t=r*this._delayJitter;return r-t+2*t*Math.random()},e}();y_.default=K6;function ic(e,r){return e||e===0?e:r}var yf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nl,"__esModule",{value:!0});var gn=za,Zi=hf,Y6=yf(Ei),YO=G,Z6=yf(Fu),Q6=yf(_f),X6=yf(y_),b_=YO.internal.constants,xm=b_.ACCESS_MODE_READ,Bm=b_.ACCESS_MODE_WRITE,Vm=b_.TELEMETRY_APIS,ac=YO.internal.txConfig.TxConfig,J6=function(){function e(r){var t=r===void 0?{}:r,n=t.session,o=t.config,i=t.log;this._session=n,this._retryLogic=e8(o),this._log=i}return e.prototype.run=function(r,t,n){var o=this;return new Y6.default(new gn.Observable(function(i){try{i.next(o._session.run(r,t,n)),i.complete()}catch(a){i.error(a)}return function(){}}))},e.prototype.beginTransaction=function(r){return this._beginTransaction(this._session._mode,r,{api:Vm.UNMANAGED_TRANSACTION})},e.prototype.readTransaction=function(r,t){return this._runTransaction(xm,r,t)},e.prototype.writeTransaction=function(r,t){return this._runTransaction(Bm,r,t)},e.prototype.executeRead=function(r,t){return this._executeInTransaction(xm,r,t)},e.prototype.executeWrite=function(r,t){return this._executeInTransaction(Bm,r,t)},e.prototype._executeInTransaction=function(r,t,n){var o=function(i){return new Q6.default({run:i.run.bind(i)})};return this._runTransaction(r,t,n,o)},e.prototype.close=function(){var r=this;return new gn.Observable(function(t){r._session.close().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype.lastBookmark=function(){return this.lastBookmarks()},e.prototype.lastBookmarks=function(){return this._session.lastBookmarks()},e.prototype._beginTransaction=function(r,t,n){var o=this,i=ac.empty();return t&&(i=new ac(t,this._log)),new gn.Observable(function(a){try{o._session._beginTransaction(r,i,n).then(function(u){a.next(new Z6.default(u)),a.complete()}).catch(function(u){return a.error(u)})}catch(u){a.error(u)}return function(){}})},e.prototype._runTransaction=function(r,t,n,o){var i=this;o===void 0&&(o=function(c){return c});var a=ac.empty();n&&(a=new ac(n));var u={apiTelemetryConfig:{api:Vm.MANAGED_TRANSACTION,onTelemetrySuccess:function(){u.apiTelemetryConfig=void 0}}};return this._retryLogic.retry((0,gn.of)(1).pipe((0,Zi.mergeMap)(function(){return i._beginTransaction(r,a,u.apiTelemetryConfig)}),(0,Zi.mergeMap)(function(c){return(0,gn.defer)(function(){try{return t(o(c))}catch(s){return(0,gn.throwError)(function(){return s})}}).pipe((0,Zi.catchError)(function(s){return c.rollback().pipe((0,Zi.concatWith)((0,gn.throwError)(function(){return s})))}),(0,Zi.concatWith)(c.commit()))})))},e}();Nl.default=J6;function e8(e){var r=e&&e.maxTransactionRetryTime?e.maxTransactionRetryTime:null;return new X6.default({maxRetryTimeout:r})}var t8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),r8=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hr,"__esModule",{value:!0});hr.WRITE=hr.READ=hr.Driver=void 0;var bf=G,n8=r8(Nl),Wm=bf.internal.constants.FETCH_ALL,o8=bf.driver.READ,ZO=bf.driver.WRITE;hr.READ=o8;hr.WRITE=ZO;var QO=function(e){t8(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.rxSession=function(t){var n=t===void 0?{}:t,o=n.defaultAccessMode,i=o===void 0?ZO:o,a=n.bookmarks,u=n.database,c=u===void 0?"":u,s=n.fetchSize,l=n.impersonatedUser,d=n.bookmarkManager,h=n.notificationFilter,p=n.auth;return new n8.default({session:this._newSession({defaultAccessMode:i,bookmarkOrBookmarks:a,database:c,impersonatedUser:l,auth:p,reactive:!1,fetchSize:i8(s,this._config.fetchSize),bookmarkManager:d,notificationFilter:h,log:this._log}),config:this._config,log:this._log})},r}(bf.Driver);hr.Driver=QO;function i8(e,r){var t=parseInt(e,10);if(t>0||t===Wm)return t;if(t===0||t<0)throw new Error("The fetch size can only be a positive value or ".concat(Wm," for ALL. However fetchSize = ").concat(t));return r}hr.default=QO;var m_={};Object.defineProperty(m_,"__esModule",{value:!0});m_.default="5.28.1";var XO={},qr={},mf={};Object.defineProperty(mf,"__esModule",{value:!0});var a8=function(){function e(){}return e.prototype.selectReader=function(r){throw new Error("Abstract function")},e.prototype.selectWriter=function(r){throw new Error("Abstract function")},e}();mf.default=a8;var g_={},w_={};Object.defineProperty(w_,"__esModule",{value:!0});var s8=function(){function e(r){this._offset=r||0}return e.prototype.next=function(r){if(r===0)return-1;var t=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),t%r},e}();w_.default=s8;var u8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),JO=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(g_,"__esModule",{value:!0});var zm=JO(w_),c8=JO(mf),l8=function(e){u8(r,e);function r(t){var n=e.call(this)||this;return n._readersIndex=new zm.default,n._writersIndex=new zm.default,n._connectionPool=t,n}return r.prototype.selectReader=function(t){return this._select(t,this._readersIndex)},r.prototype.selectWriter=function(t){return this._select(t,this._writersIndex)},r.prototype._select=function(t,n){var o=t.length;if(o===0)return null;var i=n.next(o),a=i,u=null,c=Number.MAX_SAFE_INTEGER;do{var s=t[a],l=this._connectionPool.activeResourceCount(s);l<c&&(u=s,c=l),a===o-1?a=0:a++}while(a!==i);return u},r}(c8.default);g_.default=l8;var e1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qr,"__esModule",{value:!0});qr.LeastConnectedLoadBalancingStrategy=qr.LoadBalancingStrategy=void 0;var f8=e1(mf);qr.LoadBalancingStrategy=f8.default;var t1=e1(g_);qr.LeastConnectedLoadBalancingStrategy=t1.default;qr.default=t1.default;var O_={},E_={},no={},Ur={},S_={},Or={},oo={},gf={},d8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(gf,"__esModule",{value:!0});var r1=function(){function e(r){this.position=0,this.length=r}return e.prototype.getUInt8=function(r){throw new Error("Not implemented")},e.prototype.getInt8=function(r){throw new Error("Not implemented")},e.prototype.getFloat64=function(r){throw new Error("Not implemented")},e.prototype.getVarInt=function(r){throw new Error("Not implemented")},e.prototype.putUInt8=function(r,t){throw new Error("Not implemented")},e.prototype.putInt8=function(r,t){throw new Error("Not implemented")},e.prototype.putFloat64=function(r,t){throw new Error("Not implemented")},e.prototype.getInt16=function(r){return this.getInt8(r)<<8|this.getUInt8(r+1)},e.prototype.getUInt16=function(r){return this.getUInt8(r)<<8|this.getUInt8(r+1)},e.prototype.getInt32=function(r){return this.getInt8(r)<<24|this.getUInt8(r+1)<<16|this.getUInt8(r+2)<<8|this.getUInt8(r+3)},e.prototype.getUInt32=function(r){return this.getUInt8(r)<<24|this.getUInt8(r+1)<<16|this.getUInt8(r+2)<<8|this.getUInt8(r+3)},e.prototype.getInt64=function(r){return this.getInt8(r)<<56|this.getUInt8(r+1)<<48|this.getUInt8(r+2)<<40|this.getUInt8(r+3)<<32|this.getUInt8(r+4)<<24|this.getUInt8(r+5)<<16|this.getUInt8(r+6)<<8|this.getUInt8(r+7)},e.prototype.getSlice=function(r,t){return new h8(r,t,this)},e.prototype.putInt16=function(r,t){this.putInt8(r,t>>8),this.putUInt8(r+1,t&255)},e.prototype.putUInt16=function(r,t){this.putUInt8(r,t>>8&255),this.putUInt8(r+1,t&255)},e.prototype.putInt32=function(r,t){this.putInt8(r,t>>24),this.putUInt8(r+1,t>>16&255),this.putUInt8(r+2,t>>8&255),this.putUInt8(r+3,t&255)},e.prototype.putUInt32=function(r,t){this.putUInt8(r,t>>24&255),this.putUInt8(r+1,t>>16&255),this.putUInt8(r+2,t>>8&255),this.putUInt8(r+3,t&255)},e.prototype.putInt64=function(r,t){this.putInt8(r,t>>48),this.putUInt8(r+1,t>>42&255),this.putUInt8(r+2,t>>36&255),this.putUInt8(r+3,t>>30&255),this.putUInt8(r+4,t>>24&255),this.putUInt8(r+5,t>>16&255),this.putUInt8(r+6,t>>8&255),this.putUInt8(r+7,t&255)},e.prototype.putVarInt=function(r,t){for(var n=0;t>1;){var o=t%128;t>=128&&(o+=128),t=t/128,this.putUInt8(r+n,o),n+=1}return n},e.prototype.putBytes=function(r,t){for(var n=0,o=t.remaining();n<o;n++)this.putUInt8(r+n,t.readUInt8())},e.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},e.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},e.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},e.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},e.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},e.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},e.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},e.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},e.prototype.readVarInt=function(){var r=this.getVarInt(this.position);return this._updatePos(r.length),r.value},e.prototype.writeUInt8=function(r){this.putUInt8(this._updatePos(1),r)},e.prototype.writeInt8=function(r){this.putInt8(this._updatePos(1),r)},e.prototype.writeInt16=function(r){this.putInt16(this._updatePos(2),r)},e.prototype.writeInt32=function(r){this.putInt32(this._updatePos(4),r)},e.prototype.writeUInt32=function(r){this.putUInt32(this._updatePos(4),r)},e.prototype.writeInt64=function(r){this.putInt64(this._updatePos(8),r)},e.prototype.writeFloat64=function(r){this.putFloat64(this._updatePos(8),r)},e.prototype.writeVarInt=function(r){var t=this.putVarInt(this.position,r);this._updatePos(t)},e.prototype.writeBytes=function(r){this.putBytes(this._updatePos(r.remaining()),r)},e.prototype.readSlice=function(r){return this.getSlice(this._updatePos(r),r)},e.prototype._updatePos=function(r){var t=this.position;return this.position+=r,t},e.prototype.remaining=function(){return this.length-this.position},e.prototype.hasRemaining=function(){return this.remaining()>0},e.prototype.reset=function(){this.position=0},e.prototype.toString=function(){return this.constructor.name+"( position="+this.position+` )
  `+this.toHex()},e.prototype.toHex=function(){for(var r="",t=0;t<this.length;t++){var n=this.getUInt8(t).toString(16);n.length===1&&(n="0"+n),r+=n,t!==this.length-1&&(r+=" ")}return r},e}();gf.default=r1;var h8=function(e){d8(r,e);function r(t,n,o){var i=e.call(this,n)||this;return i._start=t,i._inner=o,i}return r.prototype.putUInt8=function(t,n){this._inner.putUInt8(this._start+t,n)},r.prototype.getUInt8=function(t){return this._inner.getUInt8(this._start+t)},r.prototype.putInt8=function(t,n){this._inner.putInt8(this._start+t,n)},r.prototype.putFloat64=function(t,n){this._inner.putFloat64(this._start+t,n)},r.prototype.getInt8=function(t){return this._inner.getInt8(this._start+t)},r.prototype.getFloat64=function(t){return this._inner.getFloat64(this._start+t)},r}(r1),p8=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oo,"__esModule",{value:!0});oo.BaseBuffer=void 0;var n1=p8(gf);oo.BaseBuffer=n1.default;oo.default=n1.default;var v8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),o1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Or,"__esModule",{value:!0});Or.alloc=void 0;var sc=o1(B0),_8=o1(oo),i1=function(e){v8(r,e);function r(t){var n=this,o=b8(t);return n=e.call(this,o.length)||this,n._buffer=o,n}return r.prototype.getUInt8=function(t){return this._buffer.readUInt8(t)},r.prototype.getInt8=function(t){return this._buffer.readInt8(t)},r.prototype.getFloat64=function(t){return this._buffer.readDoubleBE(t)},r.prototype.getVarInt=function(t){for(var n=0,o=this._buffer.readInt8(t+n),i=o%128;o/128>=1;)n+=1,o=this._buffer.readInt8(t+n),i+=o%128;return{length:n+1,value:i}},r.prototype.putUInt8=function(t,n){this._buffer.writeUInt8(n,t)},r.prototype.putInt8=function(t,n){this._buffer.writeInt8(n,t)},r.prototype.putFloat64=function(t,n){this._buffer.writeDoubleBE(n,t)},r.prototype.putBytes=function(t,n){if(n instanceof r){var o=Math.min(n.length-n.position,this.length-t);n._buffer.copy(this._buffer,t,n.position,n.position+o),n.position+=o}else e.prototype.putBytes.call(this,t,n)},r.prototype.getSlice=function(t,n){return new r(this._buffer.slice(t,t+n))},r}(_8.default);Or.default=i1;function y8(e){return new i1(e)}Or.alloc=y8;function b8(e){return e instanceof sc.default.Buffer?e:typeof e=="number"&&typeof sc.default.Buffer.alloc=="function"?sc.default.Buffer.alloc(e):new sc.default.Buffer(e)}var m8=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(S_,"__esModule",{value:!0});var Hm=m8(Or),go=G,a1=go.internal.util,s1=a1.ENCRYPTION_OFF,g8=a1.ENCRYPTION_ON,qm=1,w8=3,O8=function(){function e(r,t,n){t===void 0&&(t=$8),n===void 0&&(n=function(s){return new WebSocket(s)});var o=this;this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=r,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._receiveTimeoutId=null,this._closingPromise=null;var i=C8(r,t),a=i.scheme,u=i.error;if(u){this._error=u;return}this._ws=E8(a,r.address,n),this._ws.binaryType="arraybuffer";var c=this;this._ws.onclose=function(s){s&&!s.wasClean&&c._handleConnectionError(),c._open=!1},this._ws.onopen=function(){c._clearConnectionTimeout();var s=c._pending;c._pending=null;for(var l=0;l<s.length;l++)c.write(s[l])},this._ws.onmessage=function(s){if(o._resetTimeout(),c.onmessage){var l=new Hm.default(s.data);c.onmessage(l)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}return e.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired){this._error=(0,go.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),this.onerror&&this.onerror(this._error);return}this._open&&!this._timedout&&(this._error=(0,go.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},e.prototype.write=function(r){if(this._pending!==null)this._pending.push(r);else if(r instanceof Hm.default)try{this._ws.send(r._buffer)}catch(t){if(this._ws.readyState!==qm)this._handleConnectionError();else throw t}else throw(0,go.newError)("Don't know how to send buffer: "+r)},e.prototype.close=function(){var r=this;return this._closingPromise===null&&(this._closingPromise=new Promise(function(t,n){r._clearConnectionTimeout(),r._ws&&r._ws.readyState!==w8?(r._open=!1,r.stopReceiveTimeout(),r._ws.onclose=function(){t()},r._ws.close()):t()})),this._closingPromise},e.prototype.setupReceiveTimeout=function(r){this._receiveTimeout=r},e.prototype.stopReceiveTimeout=function(){this._receiveTimeout!==null&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,this._receiveTimeoutId!=null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=null)},e.prototype.startReceiveTimeout=function(){this._open&&this._receiveTimeout!==null&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._resetTimeout())},e.prototype._resetTimeout=function(){var r=this;this._receiveTimeoutStarted&&(this._receiveTimeoutId!==null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=setTimeout(function(){r._receiveTimeoutId=null,r._timedout=!0,r.stopReceiveTimeout(),r._error=(0,go.newError)("Connection lost. Server didn't respond in ".concat(r._receiveTimeout,"ms"),r._config.connectionErrorCode),r.close(),r.onerror&&r.onerror(r._error)},this._receiveTimeout))},e.prototype._setupConnectionTimeout=function(){var r=this,t=this._config.connectionTimeout;if(t){var n=this._ws;return setTimeout(function(){n.readyState!==qm&&(r._connectionTimeoutFired=!0,n.close())},t)}return null},e.prototype._clearConnectionTimeout=function(){var r=this._connectionTimeoutId;(r||r===0)&&(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(r))},e}();S_.default=O8;function E8(e,r,t){var n=e+"://"+r.asHostPort();try{return t(n)}catch(i){if(S8(i,r)){var o=P8(e,r);return t(o)}else throw i}}function S8(e,r){return e.name==="SyntaxError"&&T8(r.asHostPort())}function T8(e){return e.charAt(0)==="["&&e.indexOf("]")!==-1}function P8(e,r){var t=r.host().replace(/:/g,"-"),n=t.replace("%","s"),o=n+".ipv6-literal.net";return"".concat(e,"://").concat(o,":").concat(r.port())}function C8(e,r){var t=A8(e),n=I8(e),o=e.trust,i=R8(r);if(j8(t,n,i),n)return{scheme:"ws",error:null};if(i)return{scheme:"wss",error:null};if(t){if(!o||o==="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES")return{scheme:"wss",error:null};var a=(0,go.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+o+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+s1+'"` in the driver configuration.');return{scheme:null,error:a}}return{scheme:"ws",error:null}}function A8(e){return e.encrypted===!0||e.encrypted===g8}function I8(e){return e.encrypted===!1||e.encrypted===s1}function R8(e){var r=typeof e=="function"?e():"";return r&&r.toLowerCase().indexOf("https")>=0}function j8(e,r,t){t===null||(e&&!t?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):r&&t&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}function $8(){return typeof window<"u"&&window.location?window.location.protocol:null}var T_={},N8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(T_,"__esModule",{value:!0});var k8=G,M8=k8.internal.resolver.BaseHostNameResolver,D8=function(e){N8(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.resolve=function(t){return this._resolveToItself(t)},r}(M8);T_.default=D8;var P_={},L8=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(l){try{s(n.next(l))}catch(d){a(d)}}function c(l){try{s(n.throw(l))}catch(d){a(d)}}function s(l){l.done?i(l.value):o(l.value).then(u,c)}s((n=n.apply(e,r||[])).next())})},U8=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(t=0)),t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(P_,"__esModule",{value:!0});P_.default={load:function(e){return L8(this,void 0,void 0,function(){return U8(this,function(r){return[2,e]})})}};var C_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.ClientCertificatesLoader=Ur.HostNameResolver=Ur.Channel=void 0;var F8=C_(S_),x8=C_(T_),B8=C_(P_);Ur.Channel=F8.default;Ur.HostNameResolver=x8.default;Ur.ClientCertificatesLoader=B8.default;var Uo={},A_={},V8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(A_,"__esModule",{value:!0});var W8=oo,z8=Or,H8=function(e){V8(r,e);function r(t){for(var n=this,o=0,i=0;i<t.length;i++)o+=t[i].length;return n=e.call(this,o)||this,n._buffers=t,n}return r.prototype.getUInt8=function(t){for(var n=0;n<this._buffers.length;n++){var o=this._buffers[n];if(t>=o.length)t-=o.length;else return o.getUInt8(t)}},r.prototype.getInt8=function(t){for(var n=0;n<this._buffers.length;n++){var o=this._buffers[n];if(t>=o.length)t-=o.length;else return o.getInt8(t)}},r.prototype.getFloat64=function(t){for(var n=(0,z8.alloc)(8),o=0;o<8;o++)n.putUInt8(o,this.getUInt8(t+o));return n.getFloat64(0)},r}(W8.BaseBuffer);A_.default=H8;var q8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),u1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Uo,"__esModule",{value:!0});Uo.Dechunker=Uo.Chunker=void 0;var G8=u1(gf),Gm=Or,K8=u1(A_),uc=2,Y8=0,Z8=1400,Q8=function(e){q8(r,e);function r(t,n){var o=e.call(this,0)||this;return o._bufferSize=n||Z8,o._ch=t,o._buffer=(0,Gm.alloc)(o._bufferSize),o._currentChunkStart=0,o._chunkOpen=!1,o}return r.prototype.putUInt8=function(t,n){this._ensure(1),this._buffer.writeUInt8(n)},r.prototype.putInt8=function(t,n){this._ensure(1),this._buffer.writeInt8(n)},r.prototype.putFloat64=function(t,n){this._ensure(8),this._buffer.writeFloat64(n)},r.prototype.putBytes=function(t,n){for(;n.remaining()>0;)this._ensure(1),this._buffer.remaining()>n.remaining()?this._buffer.writeBytes(n):this._buffer.writeBytes(n.readSlice(this._buffer.remaining()));return this},r.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var t=this._buffer;this._buffer=null,this._ch.write(t.getSlice(0,t.position)),this._buffer=(0,Gm.alloc)(this._bufferSize),this._chunkOpen=!1}return this},r.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<uc&&this.flush(),this._buffer.writeInt16(Y8)},r.prototype._ensure=function(t){var n=this._chunkOpen?t:t+uc;this._buffer.remaining()<n&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+uc,this._chunkOpen=!0)},r.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var t=this._buffer.position-(this._currentChunkStart+uc);this._buffer.putUInt16(this._currentChunkStart,t),this._chunkOpen=!1}},r}(G8.default);Uo.Chunker=Q8;var X8=function(){function e(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return e.prototype.AWAITING_CHUNK=function(r){return r.remaining()>=2?this._onHeader(r.readUInt16()):(this._partialChunkHeader=r.readUInt8()<<8,this.IN_HEADER)},e.prototype.IN_HEADER=function(r){return this._onHeader((this._partialChunkHeader|r.readUInt8())&65535)},e.prototype.IN_CHUNK=function(r){return this._chunkSize<=r.remaining()?(this._currentMessage.push(r.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=r.remaining(),this._currentMessage.push(r.readSlice(r.remaining())),this.IN_CHUNK)},e.prototype.CLOSED=function(r){},e.prototype._onHeader=function(r){if(r===0){var t=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:t=this._currentMessage[0];break;default:t=new K8.default(this._currentMessage);break}return this._currentMessage=[],this.onmessage(t),this.AWAITING_CHUNK}else return this._chunkSize=r,this.IN_CHUNK},e.prototype.write=function(r){for(;r.hasRemaining();)this._state=this._state(r)},e}();Uo.Dechunker=X8;var I_={};Object.defineProperty(I_,"__esModule",{value:!0});var wf=G,c1=wf.internal.util,J8=c1.ENCRYPTION_OFF,e5=c1.ENCRYPTION_ON,t5=wf.error.SERVICE_UNAVAILABLE,Km=[null,void 0,!0,!1,e5,J8],Ym=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"],r5=function(){function e(r,t,n,o){this.address=r,this.encrypted=n5(t),this.trust=o5(t),this.trustedCertificates=i5(t),this.knownHostsPath=a5(t),this.connectionErrorCode=n||t5,this.connectionTimeout=t.connectionTimeout,this.clientCertificate=o}return e}();I_.default=r5;function n5(e){var r=e.encrypted;if(Km.indexOf(r)===-1)throw(0,wf.newError)("Illegal value of the encrypted setting ".concat(r,". Expected one of ").concat(Km));return r}function o5(e){var r=e.trust;if(Ym.indexOf(r)===-1)throw(0,wf.newError)("Illegal value of the trust setting ".concat(r,". Expected one of ").concat(Ym));return r}function i5(e){return e.trustedCertificates||[]}function a5(e){return e.knownHosts||null}var R_={},l1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(R_,"__esModule",{value:!0});var s5=l1(Or),u5=G,cp=l1(B0),c5=$P,Zm=new c5.StringDecoder("utf8");function l5(e){return new s5.default(v5(e))}function f5(e,r){if(Object.prototype.hasOwnProperty.call(e,"_buffer"))return d5(e,r);if(Object.prototype.hasOwnProperty.call(e,"_buffers"))return h5(e,r);throw(0,u5.newError)("Don't know how to decode strings from '".concat(e,"'"))}function d5(e,r){var t=e.position,n=t+r;return e.position=Math.min(n,e.length),e._buffer.toString("utf8",t,n)}function h5(e,r){return p5(e,r,function(t){return Zm.write(t._buffer)},function(){return Zm.end()})}function p5(e,r,t,n){var o=r,i=e.position;e._updatePos(Math.min(r,e.length-i));var a=e._buffers.reduce(function(u,c){if(o<=0)return u;if(i>=c.length)return i-=c.length,"";c._updatePos(i-c.position);var s=Math.min(c.length-i,o),l=c.readSlice(s);return c._updatePos(s),o=Math.max(o-l.length,0),i=0,u+t(l)},"");return a+n()}function v5(e){return typeof cp.default.Buffer.from=="function"?cp.default.Buffer.from(e,"utf8"):new cp.default.Buffer(e,"utf8")}R_.default={encode:l5,decode:f5};(function(e){var r=f&&f.__createBinding||(Object.create?function(u,c,s,l){l===void 0&&(l=s);var d=Object.getOwnPropertyDescriptor(c,s);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[s]}}),Object.defineProperty(u,l,d)}:function(u,c,s,l){l===void 0&&(l=s),u[l]=c[s]}),t=f&&f.__exportStar||function(u,c){for(var s in u)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&r(c,u,s)},n=f&&f.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.utf8=e.alloc=e.ChannelConfig=void 0,t(Ur,e),t(Uo,e);var o=I_;Object.defineProperty(e,"ChannelConfig",{enumerable:!0,get:function(){return n(o).default}});var i=Or;Object.defineProperty(e,"alloc",{enumerable:!0,get:function(){return i.alloc}});var a=R_;Object.defineProperty(e,"utf8",{enumerable:!0,get:function(){return n(a).default}})})(no);Object.defineProperty(E_,"__esModule",{value:!0});var f1=no,d1=G,_5=1616949271,y5=["5.8","5.7","5.6","5.4","5.3","5.2","5.1","5.0","4.4","4.3","4.2","3.0"],b5=0;function yo(e,r){return{major:e,minor:r}}function m5(e){if(e.length>4)throw(0,d1.newError)("It should not have more than 4 versions of the protocol");var r=(0,f1.alloc)(5*4);return r.writeInt32(_5),e.forEach(function(t){if(t instanceof Array){var n=t[0],o=n.major,i=n.minor,a=t[1].minor,u=i-a;r.writeInt32(u<<16|i<<8|o)}else{var o=t.major,i=t.minor;r.writeInt32(i<<8|o)}}),r.reset(),r}function g5(e,r){var t=[e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readUInt8()];if(t[0]===72&&t[1]===84&&t[2]===84&&t[3]===80)throw r.error("Handshake failed since server responded with HTTP."),(0,d1.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return+(t[3]+"."+t[2])}function w5(e,r,t){for(var n=r.readVarInt(),o=[],i=0;i<n;i++){var a=[r.readUInt8(),r.readUInt8(),r.readUInt8(),r.readUInt8()];o=o.concat(T5(a))}r.readVarInt();var u=P5(),c=0,s=0;o.sort(function(d,h){return Number(d.major)!==Number(h.major)?Number(h.major)-Number(d.major):Number(h.minor)-Number(d.minor)});for(var i=0;i<o.length;i++){var l=o[i];if(y5.includes(l.major+"."+l.minor)){c=l.major,s=l.minor;break}}return new Promise(function(d,h){try{var p=(0,f1.alloc)(5);p.writeInt32(s<<8|c),p.writeVarInt(u),e.write(p),d({protocolVersion:+(c+"."+s),capabilites:u,consumeRemainingBuffer:function(v){r.hasRemaining()&&v(r.readSlice(r.remaining()))}})}catch(v){h(v)}})}function O5(){return m5([yo(255,1),[yo(5,8),yo(5,0)],[yo(4,4),yo(4,2)],yo(3,0)])}function E5(e,r){return S5(e,r).then(function(t){return t.protocolVersion===255.1?w5(e,t.buffer):t})}E_.default=E5;function S5(e,r){var t=this;return new Promise(function(n,o){var i=function(a){o(a)};e.onerror=i.bind(t),e._error&&i(e._error),e.onmessage=function(a){try{var u=g5(a,r);n({protocolVersion:u,capabilites:0,buffer:a,consumeRemainingBuffer:function(c){a.hasRemaining()&&c(a.readSlice(a.remaining()))}})}catch(c){o(c)}},e.write(O5())})}function T5(e){for(var r=[],t=e[3],n=e[2],o=0;o<=e[1];o++)r.push({major:t,minor:n-o});return r}function P5(e){return b5}var j_={},Of={},Ve={},ie={},Ef={},$_=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),C5=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ef,"__esModule",{value:!0});C5(G);var Sf=function(){function e(){}return e.ofRecord=function(r){return r===null?e.ofNull():new R5(r)},e.ofMessageResponse=function(r){return r===null?e.ofNull():new A5(r)},e.ofNull=function(){return new I5},Object.defineProperty(e.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),e}();Ef.default=Sf;var A5=function(e){$_(r,e);function r(t){var n=e.call(this)||this;return n._response=t,n}return Object.defineProperty(r.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNull",{get:function(){return this._response===null},enumerable:!1,configurable:!0}),r}(Sf),I5=function(e){$_(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),r}(Sf),R5=function(e){$_(r,e);function r(t){var n=e.call(this)||this;return n._record=t,n}return Object.defineProperty(r.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNull",{get:function(){return this._record===null},enumerable:!1,configurable:!0}),r}(Sf),Qt={},zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.reuseOngoingRequest=zn.identity=void 0;var j5=G;function $5(e){return e}zn.identity=$5;function N5(e,r){r===void 0&&(r=null);var t=new Map;return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=j5.json.stringify(n);if(t.has(i))return t.get(i);var a=e.apply(r,n);return t.set(i,a),a.finally(function(){t.delete(i)})}}zn.reuseOngoingRequest=N5;var Tf={},k5=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Tf,"__esModule",{value:!0});Tf.equals=void 0;function M5(e,r){var t,n;if(e===r)return!0;if(e===null||r===null)return!1;if(typeof e=="object"&&typeof r=="object"){var o=Object.keys(e),i=Object.keys(r);if(o.length!==i.length)return!1;try{for(var a=k5(o),u=a.next();!u.done;u=a.next()){var c=u.value;if(e[c]!==r[c])return!1}}catch(s){t={error:s}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0}return!1}Tf.equals=M5;var D5=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),L5=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),h1=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&D5(r,e,t);return L5(r,e),r};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.object=Qt.functional=void 0;Qt.functional=h1(zn);Qt.object=h1(Tf);var Er=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),U5=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ie,"__esModule",{value:!0});ie.TelemetryObserver=ie.ProcedureRouteObserver=ie.RouteObserver=ie.CompletedObserver=ie.FailedObserver=ie.ResetObserver=ie.LogoffObserver=ie.LoginObserver=ie.ResultStreamObserver=ie.StreamObserver=void 0;var tt=G,p1=U5(Ef),F5=Qt,x5=tt.internal.constants.FETCH_ALL,Gr=tt.error.PROTOCOL_ERROR,io=function(){function e(){}return e.prototype.onNext=function(r){},e.prototype.onError=function(r){},e.prototype.onCompleted=function(r){},e}();ie.StreamObserver=io;var Pf=function(e){Er(r,e);function r(t){var n=t===void 0?{}:t,o=n.reactive,i=o===void 0?!1:o,a=n.moreFunction,u=n.discardFunction,c=n.fetchSize,s=c===void 0?x5:c,l=n.beforeError,d=n.afterError,h=n.beforeKeys,p=n.afterKeys,v=n.beforeComplete,_=n.afterComplete,b=n.server,w=n.highRecordWatermark,E=w===void 0?Number.MAX_VALUE:w,S=n.lowRecordWatermark,O=S===void 0?Number.MAX_VALUE:S,A=n.enrichMetadata,$=n.onDb,I=e.call(this)||this;return I._fieldKeys=null,I._fieldLookup=null,I._head=null,I._queuedRecords=[],I._tail=null,I._error=null,I._observers=[],I._meta={},I._server=b,I._beforeError=l,I._afterError=d,I._beforeKeys=h,I._afterKeys=p,I._beforeComplete=v,I._afterComplete=_,I._enrichMetadata=A||F5.functional.identity,I._queryId=null,I._moreFunction=a,I._discardFunction=u,I._discard=!1,I._fetchSize=s,I._lowRecordWatermark=O,I._highRecordWatermark=E,I._setState(i?jt.READY:jt.READY_STREAMING),I._setupAutoPull(),I._paused=!1,I._pulled=!i,I._haveRecordStreamed=!1,I._onDb=$,I}return r.prototype.pause=function(){this._paused=!0},r.prototype.resume=function(){this._paused=!1,this._setupAutoPull(!0),this._state.pull(this)},r.prototype.onNext=function(t){this._haveRecordStreamed=!0;var n=new tt.Record(this._fieldKeys,t,this._fieldLookup);this._observers.some(function(o){return o.onNext})?this._observers.forEach(function(o){o.onNext&&o.onNext(n)}):(this._queuedRecords.push(n),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},r.prototype.onCompleted=function(t){this._state.onSuccess(this,t)},r.prototype.onError=function(t){this._state.onError(this,t)},r.prototype.cancel=function(){this._discard=!0},r.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(jt.STREAMING)},r.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(jt.SUCCEEDED)},r.prototype.subscribe=function(t){if(this._head&&t.onKeys&&t.onKeys(this._head),this._queuedRecords.length>0&&t.onNext)for(var n=0;n<this._queuedRecords.length;n++)t.onNext(this._queuedRecords[n]),this._queuedRecords.length-n-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===jt.READY&&this._handleStreaming());this._tail&&t.onCompleted&&t.onCompleted(this._tail),this._error&&t.onError(this._error),this._observers.push(t),this._state===jt.READY&&this._handleStreaming()},r.prototype._handleHasMore=function(t){this._setState(jt.READY),this._handleStreaming(),delete t.has_more},r.prototype._handlePullSuccess=function(t){var n=this,o=this._enrichMetadata(Object.assign(this._server?{server:this._server}:{},this._meta,{stream_summary:{have_records_streamed:this._haveRecordStreamed,pulled:this._pulled,has_keys:this._fieldKeys.length>0}},t));if(![void 0,null,"r","w","rw","s"].includes(o.type)){this.onError((0,tt.newError)(`Server returned invalid query type. Expected one of [undefined, null, "r", "w", "rw", "s"] but got '`.concat(o.type,"'"),Gr));return}this._setState(jt.SUCCEEDED);var i=null;this._beforeComplete&&(i=this._beforeComplete(o));var a=function(){n._tail=o,n._observers.some(function(u){return u.onCompleted})&&n._observers.forEach(function(u){u.onCompleted&&u.onCompleted(o)}),n._afterComplete&&n._afterComplete(o)};i?Promise.resolve(i).then(function(){return a()}):a()},r.prototype._handleRunSuccess=function(t,n){var o=this;if(this._fieldKeys===null){if(this._fieldKeys=[],this._fieldLookup={},t.fields&&t.fields.length>0){this._fieldKeys=t.fields;for(var i=0;i<t.fields.length;i++)this._fieldLookup[t.fields[i]]=i}t.db!==null&&this._onDb!==void 0&&this._onDb(t.db),t.fields!=null&&delete t.fields,t.qid!==null&&t.qid!==void 0&&(this._queryId=t.qid,delete t.qid),this._storeMetadataForCompletion(t);var a=null;this._beforeKeys&&(a=this._beforeKeys(this._fieldKeys));var u=function(){o._head=o._fieldKeys,o._observers.some(function(c){return c.onKeys})&&o._observers.forEach(function(c){c.onKeys&&c.onKeys(o._fieldKeys)}),o._afterKeys&&o._afterKeys(o._fieldKeys),n()};a?Promise.resolve(a).then(function(){return u()}):u()}},r.prototype._handleError=function(t){var n=this;this._setState(jt.FAILED),this._error=t;var o=null;this._beforeError&&(o=this._beforeError(t));var i=function(){n._observers.some(function(a){return a.onError})&&n._observers.forEach(function(a){a.onError&&a.onError(t)}),n._afterError&&n._afterError(t)};o?Promise.resolve(o).then(function(){return i()}):i()},r.prototype._handleStreaming=function(){this._head&&this._observers.some(function(t){return t.onNext||t.onCompleted})&&!this._paused&&(this._discard||this._autoPull)&&this._more()},r.prototype._more=function(){this._discard?this._discardFunction(this._queryId,this):(this._pulled=!0,this._moreFunction(this._queryId,this._fetchSize,this)),this._setState(jt.STREAMING)},r.prototype._storeMetadataForCompletion=function(t){for(var n=Object.keys(t),o=n.length,i="";o--;)i=n[o],this._meta[i]=t[i]},r.prototype._setState=function(t){this._state=t},r.prototype._setupAutoPull=function(){this._autoPull=!0},r}(io);ie.ResultStreamObserver=Pf;var B5=function(e){Er(r,e);function r(t){var n=t===void 0?{}:t,o=n.onError,i=n.onCompleted,a=e.call(this)||this;return a._onError=o,a._onCompleted=i,a}return r.prototype.onNext=function(t){this.onError((0,tt.newError)("Received RECORD when initializing "+tt.json.stringify(t)))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(io);ie.LoginObserver=B5;var V5=function(e){Er(r,e);function r(t){var n=t===void 0?{}:t,o=n.onError,i=n.onCompleted,a=e.call(this)||this;return a._onError=o,a._onCompleted=i,a}return r.prototype.onNext=function(t){this.onError((0,tt.newError)("Received RECORD when logging off "+tt.json.stringify(t)))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(io);ie.LogoffObserver=V5;var W5=function(e){Er(r,e);function r(t){var n=t===void 0?{}:t,o=n.onProtocolError,i=n.onError,a=n.onComplete,u=e.call(this)||this;return u._onProtocolError=o,u._onError=i,u._onComplete=a,u}return r.prototype.onNext=function(t){this.onError((0,tt.newError)("Received RECORD when resetting: received record is: "+tt.json.stringify(t),Gr))},r.prototype.onError=function(t){t.code===Gr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onComplete&&this._onComplete(t)},r}(io);ie.ResetObserver=W5;var z5=function(e){Er(r,e);function r(t){var n=t===void 0?{}:t,o=n.onError,i=n.onCompleted,a=e.call(this)||this;return a._onError=o,a._onCompleted=i,a}return r.prototype.onNext=function(t){this.onError((0,tt.newError)("Received RECORD when sending telemetry "+tt.json.stringify(t),Gr))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(Pf);ie.TelemetryObserver=z5;var H5=function(e){Er(r,e);function r(t){var n=t.error,o=t.onError,i=e.call(this,{beforeError:o})||this;return i.onError(n),i}return r}(Pf);ie.FailedObserver=H5;var q5=function(e){Er(r,e);function r(){var t=e.call(this)||this;return e.prototype.markCompleted.call(t),t}return r}(Pf);ie.CompletedObserver=q5;var G5=function(e){Er(r,e);function r(t){var n=t.resultObserver,o=t.onProtocolError,i=t.onError,a=t.onCompleted,u=e.call(this)||this;return u._resultObserver=n,u._onError=i,u._onCompleted=a,u._records=[],u._onProtocolError=o,n.subscribe(u),u}return r.prototype.onNext=function(t){this._records.push(t)},r.prototype.onError=function(t){t.code===Gr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(){if(this._records!==null&&this._records.length!==1){this.onError((0,tt.newError)("Illegal response from router. Received "+this._records.length+` records but expected only one.
`+tt.json.stringify(this._records),Gr));return}this._onCompleted&&this._onCompleted(p1.default.ofRecord(this._records[0]))},r}(io);ie.ProcedureRouteObserver=G5;var K5=function(e){Er(r,e);function r(t){var n=t===void 0?{}:t,o=n.onProtocolError,i=n.onError,a=n.onCompleted,u=e.call(this)||this;return u._onProtocolError=o,u._onError=i,u._onCompleted=a,u}return r.prototype.onNext=function(t){this.onError((0,tt.newError)("Received RECORD when resetting: received record is: "+tt.json.stringify(t),Gr))},r.prototype.onError=function(t){t.code===Gr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(p1.default.ofMessageResponse(t))},r}(io);ie.RouteObserver=K5;var jt={READY_STREAMING:{onSuccess:function(e,r){e._handleRunSuccess(r,function(){e._setState(jt.STREAMING)})},onError:function(e,r){e._handleError(r)},name:function(){return"READY_STREAMING"},pull:function(){}},READY:{onSuccess:function(e,r){e._handleRunSuccess(r,function(){return e._handleStreaming()})},onError:function(e,r){e._handleError(r)},name:function(){return"READY"},pull:function(e){return e._more()}},STREAMING:{onSuccess:function(e,r){r.has_more?e._handleHasMore(r):e._handlePullSuccess(r)},onError:function(e,r){e._handleError(r)},name:function(){return"STREAMING"},pull:function(){}},FAILED:{onError:function(e){},name:function(){return"FAILED"},pull:function(){}},SUCCEEDED:{name:function(){return"SUCCEEDED"},pull:function(){}}};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.assertNotificationFilterIsEmpty=Ve.assertImpersonatedUserIsEmpty=Ve.assertTxConfigIsEmpty=Ve.assertDatabaseIsEmpty=void 0;var Pa=G;function Y5(e,r,t){if(r===void 0&&(r=function(){}),e&&!e.isEmpty()){var n=(0,Pa.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw r(n.message),t.onError(n),n}}Ve.assertTxConfigIsEmpty=Y5;function Z5(e,r,t){if(r===void 0&&(r=function(){}),e){var n=(0,Pa.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw r(n.message),t.onError(n),n}}Ve.assertDatabaseIsEmpty=Z5;function Q5(e,r,t){if(r===void 0&&(r=function(){}),e){var n=(0,Pa.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+"Trying to impersonate ".concat(e,"."));throw r(n.message),t.onError(n),n}}Ve.assertImpersonatedUserIsEmpty=Q5;function X5(e,r,t){if(r===void 0&&(r=function(){}),e!==void 0){var n=(0,Pa.newError)("Driver is connected to a database that does not support user notification filters. Please upgrade to Neo4j 5.7.0 or later in order to use this functionality. "+"Trying to set notifications to ".concat(Pa.json.stringify(e),"."));throw r(n.message),t.onError(n),n}}Ve.assertNotificationFilterIsEmpty=X5;var et={},Hn={},Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.verifyStructSize=Kr.Structure=void 0;var v1=G,J5=v1.error.PROTOCOL_ERROR,_1=function(){function e(r,t){this.signature=r,this.fields=t}return Object.defineProperty(e.prototype,"size",{get:function(){return this.fields.length},enumerable:!1,configurable:!0}),e.prototype.toString=function(){for(var r="",t=0;t<this.fields.length;t++)t>0&&(r+=", "),r+=this.fields[t];return"Structure("+this.signature+", ["+r+"])"},e}();Kr.Structure=_1;function eV(e,r,t){if(r!==t)throw(0,v1.newError)("Wrong struct size for ".concat(e,", expected ").concat(r," but was ").concat(t),J5)}Kr.verifyStructSize=eV;Kr.default=_1;Object.defineProperty(Hn,"__esModule",{value:!0});Hn.Unpacker=Hn.Packer=void 0;var sa=no,y1=Qt,b1=Kr,Ie=G,tV=Ie.error.PROTOCOL_ERROR,m1=128,g1=144,w1=160,O1=176,E1=192,S1=193,T1=194,P1=195,C1=200,A1=201,I1=202,R1=203,j1=208,$1=209,N1=210,k1=212,M1=213,D1=214,L1=204,U1=205,F1=206,x1=216,B1=217,V1=218,W1=220,z1=221,rV=function(){function e(r){this._ch=r,this._byteArraysSupported=!0}return e.prototype.packable=function(r,t){var n=this;t===void 0&&(t=y1.functional.identity);try{r=t(r)}catch(a){return function(){throw a}}if(r===null)return function(){return n._ch.writeUInt8(E1)};if(r===!0)return function(){return n._ch.writeUInt8(P1)};if(r===!1)return function(){return n._ch.writeUInt8(T1)};if(typeof r=="number")return function(){return n.packFloat(r)};if(typeof r=="string")return function(){return n.packString(r)};if(typeof r=="bigint")return function(){return n.packInteger((0,Ie.int)(r))};if((0,Ie.isInt)(r))return function(){return n.packInteger(r)};if(r instanceof Int8Array)return function(){return n.packBytes(r)};if(r instanceof Array)return function(){n.packListHeader(r.length);for(var a=0;a<r.length;a++)n.packable(r[a]===void 0?null:r[a],t)()};if(oV(r))return this.packableIterable(r,t);if(r instanceof b1.Structure){for(var o=[],i=0;i<r.fields.length;i++)o[i]=this.packable(r.fields[i],t);return function(){return n.packStruct(r.signature,o)}}else return typeof r=="object"?function(){for(var a=Object.keys(r),u=0,c=0;c<a.length;c++)r[a[c]]!==void 0&&u++;n.packMapHeader(u);for(var c=0;c<a.length;c++){var s=a[c];r[s]!==void 0&&(n.packString(s),n.packable(r[s],t)())}}:this._nonPackableValue("Unable to pack the given value: ".concat(r))},e.prototype.packableIterable=function(r,t){try{var n=Array.from(r);return this.packable(n,t)}catch(o){throw(0,Ie.newError)("Cannot pack given iterable, ".concat(o.message,": ").concat(r))}},e.prototype.packStruct=function(r,t){t=t||[],this.packStructHeader(t.length,r);for(var n=0;n<t.length;n++)t[n]()},e.prototype.packInteger=function(r){var t=r.high,n=r.low;r.greaterThanOrEqual(-16)&&r.lessThan(128)?this._ch.writeInt8(n):r.greaterThanOrEqual(-128)&&r.lessThan(-16)?(this._ch.writeUInt8(C1),this._ch.writeInt8(n)):r.greaterThanOrEqual(-32768)&&r.lessThan(32768)?(this._ch.writeUInt8(A1),this._ch.writeInt16(n)):r.greaterThanOrEqual(-2147483648)&&r.lessThan(2147483648)?(this._ch.writeUInt8(I1),this._ch.writeInt32(n)):(this._ch.writeUInt8(R1),this._ch.writeInt32(t),this._ch.writeInt32(n))},e.prototype.packFloat=function(r){this._ch.writeUInt8(S1),this._ch.writeFloat64(r)},e.prototype.packString=function(r){var t=sa.utf8.encode(r),n=t.length;if(n<16)this._ch.writeUInt8(m1|n),this._ch.writeBytes(t);else if(n<256)this._ch.writeUInt8(j1),this._ch.writeUInt8(n),this._ch.writeBytes(t);else if(n<65536)this._ch.writeUInt8($1),this._ch.writeUInt8(n/256>>0),this._ch.writeUInt8(n%256),this._ch.writeBytes(t);else if(n<4294967296)this._ch.writeUInt8(N1),this._ch.writeUInt8((n/16777216>>0)%256),this._ch.writeUInt8((n/65536>>0)%256),this._ch.writeUInt8((n/256>>0)%256),this._ch.writeUInt8(n%256),this._ch.writeBytes(t);else throw(0,Ie.newError)("UTF-8 strings of size "+n+" are not supported")},e.prototype.packListHeader=function(r){if(r<16)this._ch.writeUInt8(g1|r);else if(r<256)this._ch.writeUInt8(k1),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(M1),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(D1),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Ie.newError)("Lists of size "+r+" are not supported")},e.prototype.packBytes=function(r){if(this._byteArraysSupported){this.packBytesHeader(r.length);for(var t=0;t<r.length;t++)this._ch.writeInt8(r[t])}else throw(0,Ie.newError)("Byte arrays are not supported by the database this driver is connected to")},e.prototype.packBytesHeader=function(r){if(r<256)this._ch.writeUInt8(L1),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(U1),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(F1),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Ie.newError)("Byte arrays of size "+r+" are not supported")},e.prototype.packMapHeader=function(r){if(r<16)this._ch.writeUInt8(w1|r);else if(r<256)this._ch.writeUInt8(x1),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(B1),this._ch.writeUInt8(r/256>>0),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(V1),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Ie.newError)("Maps of size "+r+" are not supported")},e.prototype.packStructHeader=function(r,t){if(r<16)this._ch.writeUInt8(O1|r),this._ch.writeUInt8(t);else if(r<256)this._ch.writeUInt8(W1),this._ch.writeUInt8(r),this._ch.writeUInt8(t);else if(r<65536)this._ch.writeUInt8(z1),this._ch.writeUInt8(r/256>>0),this._ch.writeUInt8(r%256);else throw(0,Ie.newError)("Structures of size "+r+" are not supported")},e.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},e.prototype._nonPackableValue=function(r){return function(){throw(0,Ie.newError)(r,tV)}},e}();Hn.Packer=rV;var nV=function(){function e(r,t){r===void 0&&(r=!1),t===void 0&&(t=!1),this._disableLosslessIntegers=r,this._useBigInt=t}return e.prototype.unpack=function(r,t){t===void 0&&(t=y1.functional.identity);var n=r.readUInt8(),o=n&240,i=n&15;if(n===E1)return null;var a=this._unpackBoolean(n);if(a!==null)return a;var u=this._unpackNumberOrInteger(n,r);if(u!==null){if((0,Ie.isInt)(u)){if(this._useBigInt)return u.toBigInt();if(this._disableLosslessIntegers)return u.toNumberOrInfinity()}return u}var c=this._unpackString(n,o,i,r);if(c!==null)return c;var s=this._unpackList(n,o,i,r,t);if(s!==null)return s;var l=this._unpackByteArray(n,r);if(l!==null)return l;var d=this._unpackMap(n,o,i,r,t);if(d!==null)return d;var h=this._unpackStruct(n,o,i,r,t);if(h!==null)return h;throw(0,Ie.newError)("Unknown packed value with marker "+n.toString(16))},e.prototype.unpackInteger=function(r){var t=r.readUInt8(),n=this._unpackInteger(t,r);if(n==null)throw(0,Ie.newError)("Unable to unpack integer value with marker "+t.toString(16));return n},e.prototype._unpackBoolean=function(r){return r===P1?!0:r===T1?!1:null},e.prototype._unpackNumberOrInteger=function(r,t){return r===S1?t.readFloat64():this._unpackInteger(r,t)},e.prototype._unpackInteger=function(r,t){if(r>=0&&r<128)return(0,Ie.int)(r);if(r>=240&&r<256)return(0,Ie.int)(r-256);if(r===C1)return(0,Ie.int)(t.readInt8());if(r===A1)return(0,Ie.int)(t.readInt16());if(r===I1){var n=t.readInt32();return(0,Ie.int)(n)}else if(r===R1){var o=t.readInt32(),i=t.readInt32();return new Ie.Integer(i,o)}else return null},e.prototype._unpackString=function(r,t,n,o){return t===m1?sa.utf8.decode(o,n):r===j1?sa.utf8.decode(o,o.readUInt8()):r===$1?sa.utf8.decode(o,o.readUInt16()):r===N1?sa.utf8.decode(o,o.readUInt32()):null},e.prototype._unpackList=function(r,t,n,o,i){return t===g1?this._unpackListWithSize(n,o,i):r===k1?this._unpackListWithSize(o.readUInt8(),o,i):r===M1?this._unpackListWithSize(o.readUInt16(),o,i):r===D1?this._unpackListWithSize(o.readUInt32(),o,i):null},e.prototype._unpackListWithSize=function(r,t,n){for(var o=[],i=0;i<r;i++)o.push(this.unpack(t,n));return o},e.prototype._unpackByteArray=function(r,t){return r===L1?this._unpackByteArrayWithSize(t.readUInt8(),t):r===U1?this._unpackByteArrayWithSize(t.readUInt16(),t):r===F1?this._unpackByteArrayWithSize(t.readUInt32(),t):null},e.prototype._unpackByteArrayWithSize=function(r,t){for(var n=new Int8Array(r),o=0;o<r;o++)n[o]=t.readInt8();return n},e.prototype._unpackMap=function(r,t,n,o,i){return t===w1?this._unpackMapWithSize(n,o,i):r===x1?this._unpackMapWithSize(o.readUInt8(),o,i):r===B1?this._unpackMapWithSize(o.readUInt16(),o,i):r===V1?this._unpackMapWithSize(o.readUInt32(),o,i):null},e.prototype._unpackMapWithSize=function(r,t,n){for(var o={},i=0;i<r;i++){var a=this.unpack(t,n);o[a]=this.unpack(t,n)}return o},e.prototype._unpackStruct=function(r,t,n,o,i){return t===O1?this._unpackStructWithSize(n,o,i):r===W1?this._unpackStructWithSize(o.readUInt8(),o,i):r===z1?this._unpackStructWithSize(o.readUInt16(),o,i):null},e.prototype._unpackStructWithSize=function(r,t,n){for(var o=t.readUInt8(),i=new b1.Structure(o,[]),a=0;a<r;a++)i.fields.push(this.unpack(t,n));return n(i)},e}();Hn.Unpacker=nV;function oV(e){return e==null?!1:typeof e[Symbol.iterator]=="function"}var Fo={},H1=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),iV=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),aV=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),sV=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&iV(r,e,t);return aV(r,e),r};Object.defineProperty(Fo,"__esModule",{value:!0});Fo.Unpacker=Fo.Packer=void 0;var q1=sV(Hn),uV=function(e){H1(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},r}(q1.Packer);Fo.Packer=uV;var cV=function(e){H1(r,e);function r(t,n){return t===void 0&&(t=!1),n===void 0&&(n=!1),e.call(this,t,n)||this}return r}(q1.Unpacker);Fo.Unpacker=cV;var lV=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),fV=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),N_=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&lV(r,e,t);return fV(r,e),r};Object.defineProperty(et,"__esModule",{value:!0});et.structure=et.v2=et.v1=void 0;var dV=N_(Hn);et.v1=dV;var G1=N_(Fo);et.v2=G1;var hV=N_(Kr);et.structure=hV;et.default=G1;var ze={};Object.defineProperty(ze,"__esModule",{value:!0});ze.SIGNATURES=void 0;var Ee=G,K1=Ee.internal.constants,pV=K1.ACCESS_MODE_READ,cc=K1.FETCH_ALL,Qm=Ee.internal.util.assertString,Y1=1,Z1=15,jc=16,Q1=63,mo=1,X1=2,uv=17,J1=18,eE=19,tE=84,cv=102,rE=106,nE=107,oE=47,iE=63,vV="r",ua=-1,_V=Object.freeze({INIT:Y1,RESET:Z1,RUN:jc,PULL_ALL:Q1,HELLO:mo,GOODBYE:X1,BEGIN:uv,COMMIT:J1,ROLLBACK:eE,TELEMETRY:tE,ROUTE:cv,LOGON:rE,LOGOFF:nE,DISCARD:oE,PULL:iE});ze.SIGNATURES=_V;var Si=function(){function e(r,t,n){this.signature=r,this.fields=t,this.toString=n}return e.init=function(r,t){return new e(Y1,[r,t],function(){return"INIT ".concat(r," {...}")})},e.run=function(r,t){return new e(jc,[r,t],function(){return"RUN ".concat(r," ").concat(Ee.json.stringify(t))})},e.pullAll=function(){return yV},e.reset=function(){return bV},e.hello=function(r,t,n,o){n===void 0&&(n=null),o===void 0&&(o=null);var i=Object.assign({user_agent:r},t);return n&&(i.routing=n),o&&(i.patch_bolt=o),new e(mo,[i],function(){return"HELLO {user_agent: '".concat(r,"', ...}")})},e.hello5x1=function(r,t){t===void 0&&(t=null);var n={user_agent:r};return t&&(n.routing=t),new e(mo,[n],function(){return"HELLO {user_agent: '".concat(r,"', ...}")})},e.hello5x2=function(r,t,n){t===void 0&&(t=null),n===void 0&&(n=null);var o={user_agent:r};return lv(o,t),n&&(o.routing=n),new e(mo,[o],function(){return"HELLO ".concat(Ee.json.stringify(o))})},e.hello5x3=function(r,t,n,o){n===void 0&&(n=null),o===void 0&&(o=null);var i={};return r&&(i.user_agent=r),t&&(i.bolt_agent={product:t.product,platform:t.platform,language:t.language,language_details:t.languageDetails}),lv(i,n),o&&(i.routing=o),new e(mo,[i],function(){return"HELLO ".concat(Ee.json.stringify(i))})},e.hello5x5=function(r,t,n,o){n===void 0&&(n=null),o===void 0&&(o=null);var i={};return r&&(i.user_agent=r),t&&(i.bolt_agent={product:t.product,platform:t.platform,language:t.language,language_details:t.languageDetails}),lp(i,n),o&&(i.routing=o),new e(mo,[i],function(){return"HELLO ".concat(Ee.json.stringify(i))})},e.logon=function(r){return new e(rE,[r],function(){return"LOGON { ... }"})},e.logoff=function(){return new e(nE,[],function(){return"LOGOFF"})},e.begin=function(r){var t=r===void 0?{}:r,n=t.bookmarks,o=t.txConfig,i=t.database,a=t.mode,u=t.impersonatedUser,c=t.notificationFilter,s=lc(n,o,i,a,u,c);return new e(uv,[s],function(){return"BEGIN ".concat(Ee.json.stringify(s))})},e.begin5x5=function(r){var t=r===void 0?{}:r,n=t.bookmarks,o=t.txConfig,i=t.database,a=t.mode,u=t.impersonatedUser,c=t.notificationFilter,s=lc(n,o,i,a,u,c,{appendNotificationFilter:lp});return new e(uv,[s],function(){return"BEGIN ".concat(Ee.json.stringify(s))})},e.commit=function(){return mV},e.rollback=function(){return gV},e.runWithMetadata=function(r,t,n){var o=n===void 0?{}:n,i=o.bookmarks,a=o.txConfig,u=o.database,c=o.mode,s=o.impersonatedUser,l=o.notificationFilter,d=lc(i,a,u,c,s,l);return new e(jc,[r,t,d],function(){return"RUN ".concat(r," ").concat(Ee.json.stringify(t)," ").concat(Ee.json.stringify(d))})},e.runWithMetadata5x5=function(r,t,n){var o=n===void 0?{}:n,i=o.bookmarks,a=o.txConfig,u=o.database,c=o.mode,s=o.impersonatedUser,l=o.notificationFilter,d=lc(i,a,u,c,s,l,{appendNotificationFilter:lp});return new e(jc,[r,t,d],function(){return"RUN ".concat(r," ").concat(Ee.json.stringify(t)," ").concat(Ee.json.stringify(d))})},e.goodbye=function(){return wV},e.pull=function(r){var t=r===void 0?{}:r,n=t.stmtId,o=n===void 0?ua:n,i=t.n,a=i===void 0?cc:i,u=Xm(o??ua,a||cc);return new e(iE,[u],function(){return"PULL ".concat(Ee.json.stringify(u))})},e.discard=function(r){var t=r===void 0?{}:r,n=t.stmtId,o=n===void 0?ua:n,i=t.n,a=i===void 0?cc:i,u=Xm(o??ua,a||cc);return new e(oE,[u],function(){return"DISCARD ".concat(Ee.json.stringify(u))})},e.telemetry=function(r){var t=r.api,n=(0,Ee.int)(t);return new e(tE,[n],function(){return"TELEMETRY ".concat(n.toString())})},e.route=function(r,t,n){return r===void 0&&(r={}),t===void 0&&(t=[]),n===void 0&&(n=null),new e(cv,[r,t,n],function(){return"ROUTE ".concat(Ee.json.stringify(r)," ").concat(Ee.json.stringify(t)," ").concat(n)})},e.routeV4x4=function(r,t,n){r===void 0&&(r={}),t===void 0&&(t=[]),n===void 0&&(n={});var o={};return n.databaseName&&(o.db=n.databaseName),n.impersonatedUser&&(o.imp_user=n.impersonatedUser),new e(cv,[r,t,o],function(){return"ROUTE ".concat(Ee.json.stringify(r)," ").concat(Ee.json.stringify(t)," ").concat(Ee.json.stringify(o))})},e}();ze.default=Si;function lc(e,r,t,n,o,i,a){var u;a===void 0&&(a={});var c={};e.isEmpty()||(c.bookmarks=e.values()),r.timeout!==null&&(c.tx_timeout=r.timeout),r.metadata&&(c.tx_metadata=r.metadata),t&&(c.db=Qm(t,"database")),o&&(c.imp_user=Qm(o,"impersonatedUser")),n===pV&&(c.mode=vV);var s=(u=a.appendNotificationFilter)!==null&&u!==void 0?u:lv;return s(c,i),c}function Xm(e,r){var t={n:(0,Ee.int)(r)};return e!==ua&&(t.qid=(0,Ee.int)(e)),t}function lv(e,r){r&&(r.minimumSeverityLevel&&(e.notifications_minimum_severity=r.minimumSeverityLevel),r.disabledCategories&&(e.notifications_disabled_categories=r.disabledCategories),r.disabledClassifications&&(e.notifications_disabled_categories=r.disabledClassifications))}function lp(e,r){r&&(r.minimumSeverityLevel&&(e.notifications_minimum_severity=r.minimumSeverityLevel),r.disabledCategories&&(e.notifications_disabled_classifications=r.disabledCategories),r.disabledClassifications&&(e.notifications_disabled_classifications=r.disabledClassifications))}var yV=new Si(Q1,[],function(){return"PULL_ALL"}),bV=new Si(Z1,[],function(){return"RESET"}),mV=new Si(J1,[],function(){return"COMMIT"}),gV=new Si(eE,[],function(){return"ROLLBACK"}),wV=new Si(X1,[],function(){return"GOODBYE"}),Cf={},Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.TypeTransformer=void 0;var OV=et,EV=G,SV=EV.internal.objectUtil,TV=function(){function e(r){this._transformers=r,this._transformersPerSignature=new Map(r.map(function(t){return[t.signature,t]})),this.fromStructure=this.fromStructure.bind(this),this.toStructure=this.toStructure.bind(this),Object.freeze(this)}return e.prototype.fromStructure=function(r){try{if(r instanceof OV.structure.Structure&&this._transformersPerSignature.has(r.signature)){var t=this._transformersPerSignature.get(r.signature).fromStructure;return t(r)}return r}catch(n){return SV.createBrokenObject(n)}},e.prototype.toStructure=function(r){var t=this._transformers.find(function(n){var o=n.isTypeInstance;return o(r)});return t!==void 0?t.toStructure(r):r},e}();Oe.default=TV;var PV=function(){function e(r){var t=r.signature,n=r.fromStructure,o=r.toStructure,i=r.isTypeInstance;this.signature=t,this.isTypeInstance=i,this.fromStructure=n,this.toStructure=o,Object.freeze(this)}return e.prototype.extendsWith=function(r){var t=r.signature,n=r.fromStructure,o=r.toStructure,i=r.isTypeInstance;return new e({signature:t||this.signature,fromStructure:n||this.fromStructure,toStructure:o||this.toStructure,isTypeInstance:i||this.isTypeInstance})},e}();Oe.TypeTransformer=PV;var Af=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(Cf,"__esModule",{value:!0});var Fe=G,If=et,Rf=Oe,jf=Fe.error.PROTOCOL_ERROR,CV=78,AV=3,IV=82,RV=5,jV=114,$V=3,NV=80,kV=3;function MV(){return new Rf.TypeTransformer({signature:CV,isTypeInstance:function(e){return e instanceof Fe.Node},toStructure:function(e){throw(0,Fe.newError)("It is not allowed to pass nodes in query parameters, given: ".concat(e),jf)},fromStructure:function(e){If.structure.verifyStructSize("Node",AV,e.size);var r=Af(e.fields,3),t=r[0],n=r[1],o=r[2];return new Fe.Node(t,n,o)}})}function DV(){return new Rf.TypeTransformer({signature:IV,isTypeInstance:function(e){return e instanceof Fe.Relationship},toStructure:function(e){throw(0,Fe.newError)("It is not allowed to pass relationships in query parameters, given: ".concat(e),jf)},fromStructure:function(e){If.structure.verifyStructSize("Relationship",RV,e.size);var r=Af(e.fields,5),t=r[0],n=r[1],o=r[2],i=r[3],a=r[4];return new Fe.Relationship(t,n,o,i,a)}})}function LV(){return new Rf.TypeTransformer({signature:jV,isTypeInstance:function(e){return e instanceof Fe.UnboundRelationship},toStructure:function(e){throw(0,Fe.newError)("It is not allowed to pass unbound relationships in query parameters, given: ".concat(e),jf)},fromStructure:function(e){If.structure.verifyStructSize("UnboundRelationship",$V,e.size);var r=Af(e.fields,3),t=r[0],n=r[1],o=r[2];return new Fe.UnboundRelationship(t,n,o)}})}function UV(){return new Rf.TypeTransformer({signature:NV,isTypeInstance:function(e){return e instanceof Fe.Path},toStructure:function(e){throw(0,Fe.newError)("It is not allowed to pass paths in query parameters, given: ".concat(e),jf)},fromStructure:function(e){If.structure.verifyStructSize("Path",kV,e.size);for(var r=Af(e.fields,3),t=r[0],n=r[1],o=r[2],i=[],a=t[0],u=0;u<o.length;u+=2){var c=t[o[u+1]],s=(0,Fe.toNumber)(o[u]),l=void 0;s>0?(l=n[s-1],l instanceof Fe.UnboundRelationship&&(n[s-1]=l=l.bindTo(a,c))):(l=n[-s-1],l instanceof Fe.UnboundRelationship&&(n[-s-1]=l=l.bindTo(c,a))),i.push(new Fe.PathSegment(a,l,c)),a=c}return new Fe.Path(t[0],t[t.length-1],i)}})}Cf.default={createNodeTransformer:MV,createRelationshipTransformer:DV,createUnboundRelationshipTransformer:LV,createPathTransformer:UV};var wo=f&&f.__assign||function(){return wo=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},wo.apply(this,arguments)},FV=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),xV=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),BV=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&FV(r,e,t);return xV(r,e),r},aE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Of,"__esModule",{value:!0});var Qi=Ve,fp=et,wn=BV(ze),bo=ie,xo=G,VV=aE(Cf),WV=aE(Oe),Jm=xo.internal.bookmarks.Bookmarks,sE=xo.internal.constants,eg=sE.ACCESS_MODE_WRITE,zV=sE.BOLT_PROTOCOL_V1;xo.internal.logger.Logger;var tg=xo.internal.txConfig.TxConfig,HV=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),qV=function(){function e(r,t,n,o,i,a){var u=n===void 0?{}:n,c=u.disableLosslessIntegers,s=u.useBigInt;o===void 0&&(o=function(){return null}),this._server=r||{},this._chunker=t,this._packer=this._createPacker(t),this._unpacker=this._createUnpacker(c,s),this._responseHandler=o(this),this._log=i,this._onProtocolError=a,this._fatalError=null,this._lastMessageSignature=null,this._config={disableLosslessIntegers:c,useBigInt:s}}return Object.defineProperty(e.prototype,"transformer",{get:function(){var r=this;return this._transformer===void 0&&(this._transformer=new WV.default(Object.values(VV.default).map(function(t){return t(r._config,r._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return zV},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportsReAuth",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initialized",{get:function(){return!!this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authToken",{get:function(){return this._authToken},enumerable:!1,configurable:!0}),e.prototype.packer=function(){return this._packer},e.prototype.packable=function(r){return this._packer.packable(r,this.transformer.toStructure)},e.prototype.unpacker=function(){return this._unpacker},e.prototype.unpack=function(r){return this._unpacker.unpack(r,this.transformer.fromStructure)},e.prototype.transformMetadata=function(r){return r},e.prototype.enrichErrorMetadata=function(r){return wo(wo({},r),{diagnostic_record:r.diagnostic_record!==null?wo(wo({},HV),r.diagnostic_record):null})},e.prototype.initialize=function(r){var t=this,n=r===void 0?{}:r,o=n.userAgent;n.boltAgent;var i=n.authToken,a=n.notificationFilter,u=n.onError,c=n.onComplete,s=new bo.LoginObserver({onError:function(l){return t._onLoginError(l,u)},onCompleted:function(l){return t._onLoginCompleted(l,c)}});return(0,Qi.assertNotificationFilterIsEmpty)(a,this._onProtocolError,s),this.write(wn.default.init(o,i),s,!0),s},e.prototype.logoff=function(r){var t=r===void 0?{}:r,n=t.onComplete,o=t.onError;t.flush;var i=new bo.LogoffObserver({onCompleted:n,onError:o}),a=(0,xo.newError)("Driver is connected to a database that does not support logoff. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(a.message),i.onError(a),a},e.prototype.logon=function(r){var t=this,n=r===void 0?{}:r,o=n.authToken,i=n.onComplete,a=n.onError;n.flush;var u=new bo.LoginObserver({onCompleted:function(){return t._onLoginCompleted({},o,i)},onError:function(s){return t._onLoginError(s,a)}}),c=(0,xo.newError)("Driver is connected to a database that does not support logon. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(c.message),u.onError(c),c},e.prototype.prepareToClose=function(){},e.prototype.beginTransaction=function(r){var t=r===void 0?{}:r,n=t.bookmarks,o=t.txConfig,i=t.database,a=t.mode,u=t.impersonatedUser,c=t.notificationFilter,s=t.beforeError,l=t.afterError,d=t.beforeComplete,h=t.afterComplete;return this.run("BEGIN",n?n.asBeginTransactionParameters():{},{bookmarks:n,txConfig:o,database:i,mode:a,impersonatedUser:u,notificationFilter:c,beforeError:s,afterError:l,beforeComplete:d,afterComplete:h,flush:!1})},e.prototype.commitTransaction=function(r){var t=r===void 0?{}:r,n=t.beforeError,o=t.afterError,i=t.beforeComplete,a=t.afterComplete;return this.run("COMMIT",{},{bookmarks:Jm.empty(),txConfig:tg.empty(),mode:eg,beforeError:n,afterError:o,beforeComplete:i,afterComplete:a})},e.prototype.rollbackTransaction=function(r){var t=r===void 0?{}:r,n=t.beforeError,o=t.afterError,i=t.beforeComplete,a=t.afterComplete;return this.run("ROLLBACK",{},{bookmarks:Jm.empty(),txConfig:tg.empty(),mode:eg,beforeError:n,afterError:o,beforeComplete:i,afterComplete:a})},e.prototype.run=function(r,t,n){var o=n===void 0?{}:n;o.bookmarks;var i=o.txConfig,a=o.database;o.mode;var u=o.impersonatedUser,c=o.notificationFilter,s=o.beforeKeys,l=o.afterKeys,d=o.beforeError,h=o.afterError,p=o.beforeComplete,v=o.afterComplete,_=o.flush,b=_===void 0?!0:_,w=o.highRecordWatermark,E=w===void 0?Number.MAX_VALUE:w,S=o.lowRecordWatermark,O=S===void 0?Number.MAX_VALUE:S,A=new bo.ResultStreamObserver({server:this._server,beforeKeys:s,afterKeys:l,beforeError:d,afterError:h,beforeComplete:p,afterComplete:v,highRecordWatermark:E,lowRecordWatermark:O});return(0,Qi.assertTxConfigIsEmpty)(i,this._onProtocolError,A),(0,Qi.assertDatabaseIsEmpty)(a,this._onProtocolError,A),(0,Qi.assertImpersonatedUserIsEmpty)(u,this._onProtocolError,A),(0,Qi.assertNotificationFilterIsEmpty)(c,this._onProtocolError,A),this.write(wn.default.run(r,t),A,!1),this.write(wn.default.pullAll(),A,b),A},Object.defineProperty(e.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),e.prototype.reset=function(r){var t=r===void 0?{}:r,n=t.onError,o=t.onComplete,i=new bo.ResetObserver({onProtocolError:this._onProtocolError,onError:n,onComplete:o});return this.write(wn.default.reset(),i,!0),i},e.prototype.telemetry=function(r,t){r.api;var n=t===void 0?{}:t;n.onError;var o=n.onCompleted,i=new bo.CompletedObserver;return o&&o(),i},e.prototype._createPacker=function(r){return new fp.v1.Packer(r)},e.prototype._createUnpacker=function(r,t){return new fp.v1.Unpacker(r,t)},e.prototype.write=function(r,t,n){var o=this.queueObserverIfProtocolIsNotBroken(t);if(o){this._log.isDebugEnabled()&&this._log.debug("C: ".concat(r)),this._lastMessageSignature=r.signature;var i=new fp.structure.Structure(r.signature,r.fields);this.packable(i)(),this._chunker.messageBoundary(),n&&this._chunker.flush()}},e.prototype.isLastMessageLogon=function(){return this._lastMessageSignature===wn.SIGNATURES.HELLO||this._lastMessageSignature===wn.SIGNATURES.LOGON},e.prototype.isLastMessageReset=function(){return this._lastMessageSignature===wn.SIGNATURES.RESET},e.prototype.notifyFatalError=function(r){return this._fatalError=r,this._responseHandler._notifyErrorToObservers(r)},e.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},e.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},e.prototype.queueObserverIfProtocolIsNotBroken=function(r){return this.isBroken()?(this.notifyFatalErrorToObserver(r),!1):this._responseHandler._queueObserver(r)},e.prototype.isBroken=function(){return!!this._fatalError},e.prototype.notifyFatalErrorToObserver=function(r){r&&r.onError&&r.onError(this._fatalError)},e.prototype.resetFailure=function(){this._responseHandler._resetFailure()},e.prototype._onLoginCompleted=function(r,t,n){if(this._initialized=!0,this._authToken=t,r){var o=r.server;this._server.version||(this._server.version=o)}n&&n(r)},e.prototype._onLoginError=function(r,t){this._onProtocolError(r.message),t&&t(r)},e}();Of.default=qV;var $f={},Nf={},yr={};Object.defineProperty(yr,"__esModule",{value:!0});yr.epochSecondAndNanoToLocalDateTime=yr.nanoOfDayToLocalTime=yr.epochDayToDate=void 0;var kn=G,dn=kn.internal.temporalUtil,GV=dn.DAYS_0000_TO_1970,dp=dn.DAYS_PER_400_YEAR_CYCLE,rg=dn.NANOS_PER_HOUR,ng=dn.NANOS_PER_MINUTE,fv=dn.NANOS_PER_SECOND,og=dn.SECONDS_PER_DAY,KV=dn.floorDiv,YV=dn.floorMod;function uE(e){e=(0,kn.int)(e);var r=e.add(GV).subtract(60),t=(0,kn.int)(0);if(r.lessThan(0)){var n=r.add(1).div(dp).subtract(1);t=n.multiply(400),r=r.add(n.multiply(-dp))}var o=r.multiply(400).add(591).div(dp),i=r.subtract(o.multiply(365).add(o.div(4)).subtract(o.div(100)).add(o.div(400)));i.lessThan(0)&&(o=o.subtract(1),i=r.subtract(o.multiply(365).add(o.div(4)).subtract(o.div(100)).add(o.div(400)))),o=o.add(t);var a=i,u=a.multiply(5).add(2).div(153),c=u.add(2).modulo(12).add(1),s=a.subtract(u.multiply(306).add(5).div(10)).add(1);return o=o.add(u.div(10)),new kn.Date(o,c,s)}yr.epochDayToDate=uE;function cE(e){e=(0,kn.int)(e);var r=e.div(rg);e=e.subtract(r.multiply(rg));var t=e.div(ng);e=e.subtract(t.multiply(ng));var n=e.div(fv),o=e.subtract(n.multiply(fv));return new kn.LocalTime(r,t,n,o)}yr.nanoOfDayToLocalTime=cE;function ZV(e,r){var t=KV(e,og),n=YV(e,og),o=n.multiply(fv).add(r),i=uE(t),a=cE(o);return new kn.LocalDateTime(i.year,i.month,i.day,a.hour,a.minute,a.second,a.nanosecond)}yr.epochSecondAndNanoToLocalDateTime=ZV;var zc=f&&f.__assign||function(){return zc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},zc.apply(this,arguments)},Sr=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},QV=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nf,"__esModule",{value:!0});var ye=G,Le=et,Tr=Oe,Ti=yr,XV=QV(Cf),k_=ye.internal.temporalUtil,JV=k_.dateToEpochDay,M_=k_.localDateTimeToEpochSecond,lE=k_.localTimeToNanoOfDay,ig=88,eW=3,ag=89,tW=4,sg=69,rW=4,ug=116,nW=1,cg=84,oW=2,lg=68,iW=1,fg=100,aW=2,dg=70,sW=3,hg=102,uW=3;function cW(){return new Tr.TypeTransformer({signature:ig,isTypeInstance:function(e){return(0,ye.isPoint)(e)&&(e.z===null||e.z===void 0)},toStructure:function(e){return new Le.structure.Structure(ig,[(0,ye.int)(e.srid),e.x,e.y])},fromStructure:function(e){Le.structure.verifyStructSize("Point2D",eW,e.size);var r=Sr(e.fields,3),t=r[0],n=r[1],o=r[2];return new ye.Point(t,n,o,void 0)}})}function lW(){return new Tr.TypeTransformer({signature:ag,isTypeInstance:function(e){return(0,ye.isPoint)(e)&&e.z!==null&&e.z!==void 0},toStructure:function(e){return new Le.structure.Structure(ag,[(0,ye.int)(e.srid),e.x,e.y,e.z])},fromStructure:function(e){Le.structure.verifyStructSize("Point3D",tW,e.size);var r=Sr(e.fields,4),t=r[0],n=r[1],o=r[2],i=r[3];return new ye.Point(t,n,o,i)}})}function fW(){return new Tr.TypeTransformer({signature:sg,isTypeInstance:ye.isDuration,toStructure:function(e){var r=(0,ye.int)(e.months),t=(0,ye.int)(e.days),n=(0,ye.int)(e.seconds),o=(0,ye.int)(e.nanoseconds);return new Le.structure.Structure(sg,[r,t,n,o])},fromStructure:function(e){Le.structure.verifyStructSize("Duration",rW,e.size);var r=Sr(e.fields,4),t=r[0],n=r[1],o=r[2],i=r[3];return new ye.Duration(t,n,o,i)}})}function dW(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Tr.TypeTransformer({signature:ug,isTypeInstance:ye.isLocalTime,toStructure:function(n){var o=lE(n.hour,n.minute,n.second,n.nanosecond);return new Le.structure.Structure(ug,[o])},fromStructure:function(n){Le.structure.verifyStructSize("LocalTime",nW,n.size);var o=Sr(n.fields,1),i=o[0],a=(0,Ti.nanoOfDayToLocalTime)(i);return Pi(a,r,t)}})}function hW(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Tr.TypeTransformer({signature:cg,isTypeInstance:ye.isTime,toStructure:function(n){var o=lE(n.hour,n.minute,n.second,n.nanosecond),i=(0,ye.int)(n.timeZoneOffsetSeconds);return new Le.structure.Structure(cg,[o,i])},fromStructure:function(n){Le.structure.verifyStructSize("Time",oW,n.size);var o=Sr(n.fields,2),i=o[0],a=o[1],u=(0,Ti.nanoOfDayToLocalTime)(i),c=new ye.Time(u.hour,u.minute,u.second,u.nanosecond,a);return Pi(c,r,t)}})}function pW(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Tr.TypeTransformer({signature:lg,isTypeInstance:ye.isDate,toStructure:function(n){var o=JV(n.year,n.month,n.day);return new Le.structure.Structure(lg,[o])},fromStructure:function(n){Le.structure.verifyStructSize("Date",iW,n.size);var o=Sr(n.fields,1),i=o[0],a=(0,Ti.epochDayToDate)(i);return Pi(a,r,t)}})}function vW(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Tr.TypeTransformer({signature:fg,isTypeInstance:ye.isLocalDateTime,toStructure:function(n){var o=M_(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),i=(0,ye.int)(n.nanosecond);return new Le.structure.Structure(fg,[o,i])},fromStructure:function(n){Le.structure.verifyStructSize("LocalDateTime",aW,n.size);var o=Sr(n.fields,2),i=o[0],a=o[1],u=(0,Ti.epochSecondAndNanoToLocalDateTime)(i,a);return Pi(u,r,t)}})}function _W(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Tr.TypeTransformer({signature:hg,isTypeInstance:function(n){return(0,ye.isDateTime)(n)&&n.timeZoneId!=null},toStructure:function(n){var o=M_(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),i=(0,ye.int)(n.nanosecond),a=n.timeZoneId;return new Le.structure.Structure(hg,[o,i,a])},fromStructure:function(n){Le.structure.verifyStructSize("DateTimeWithZoneId",uW,n.size);var o=Sr(n.fields,3),i=o[0],a=o[1],u=o[2],c=(0,Ti.epochSecondAndNanoToLocalDateTime)(i,a),s=new ye.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,c.nanosecond,null,u);return Pi(s,r,t)}})}function yW(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Tr.TypeTransformer({signature:dg,isTypeInstance:function(n){return(0,ye.isDateTime)(n)&&n.timeZoneId==null},toStructure:function(n){var o=M_(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),i=(0,ye.int)(n.nanosecond),a=(0,ye.int)(n.timeZoneOffsetSeconds);return new Le.structure.Structure(dg,[o,i,a])},fromStructure:function(n){Le.structure.verifyStructSize("DateTimeWithZoneOffset",sW,n.size);var o=Sr(n.fields,3),i=o[0],a=o[1],u=o[2],c=(0,Ti.epochSecondAndNanoToLocalDateTime)(i,a),s=new ye.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,c.nanosecond,u,null);return Pi(s,r,t)}})}function Pi(e,r,t){if(!r&&!t)return e;var n=function(u){return t?u.toBigInt():u.toNumberOrInfinity()},o=Object.create(Object.getPrototypeOf(e));for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)===!0){var a=e[i];o[i]=(0,ye.isInt)(a)?n(a):a}return Object.freeze(o),o}Nf.default=zc(zc({},XV.default),{createPoint2DTransformer:cW,createPoint3DTransformer:lW,createDurationTransformer:fW,createLocalTimeTransformer:dW,createTimeTransformer:hW,createDateTransformer:pW,createLocalDateTimeTransformer:vW,createDateTimeWithZoneIdTransformer:_W,createDateTimeWithOffsetTransformer:yW});var bW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),kf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($f,"__esModule",{value:!0});var mW=kf(Of),pg=kf(et),gW=G,wW=kf(Nf),OW=kf(Oe),EW=gW.internal.constants.BOLT_PROTOCOL_V2,SW=function(e){bW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype._createPacker=function(t){return new pg.default.Packer(t)},r.prototype._createUnpacker=function(t,n){return new pg.default.Unpacker(t,n)},Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new OW.default(Object.values(wW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return EW},enumerable:!1,configurable:!0}),r}(mW.default);$f.default=SW;var Mf={},Df={},dv=f&&f.__assign||function(){return dv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},dv.apply(this,arguments)},TW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Df,"__esModule",{value:!0});var PW=TW(Nf);Df.default=dv({},PW.default);var CW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Hc=f&&f.__assign||function(){return Hc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Hc.apply(this,arguments)},Lf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mf,"__esModule",{value:!0});var AW=Lf($f),On=Lf(ze),En=Ve,An=ie,IW=Lf(Df),RW=Lf(Oe),D_=G;D_.internal.bookmarks.Bookmarks;var jW=D_.internal.constants.BOLT_PROTOCOL_V3,$W=D_.internal.txConfig.TxConfig,fE="context",NW="CALL dbms.cluster.routing.getRoutingTable($".concat(fE,")"),kW=new An.StreamObserver,MW=function(e){CW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return jW},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new RW.default(Object.values(IW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.transformMetadata=function(t){return"t_first"in t&&(t.result_available_after=t.t_first,delete t.t_first),"t_last"in t&&(t.result_consumed_after=t.t_last,delete t.t_last),t},r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,u=o.notificationFilter,c=o.onError,s=o.onComplete,l=new An.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return n._onLoginCompleted(d,a,s)}});return(0,En.assertNotificationFilterIsEmpty)(u,this._onProtocolError,l),this.write(On.default.hello(i,a),l,!0),l},r.prototype.prepareToClose=function(){this.write(On.default.goodbye(),kW,!0)},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,u=n.impersonatedUser,c=n.notificationFilter,s=n.mode,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new An.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),(0,En.assertDatabaseIsEmpty)(a,this._onProtocolError,v),(0,En.assertImpersonatedUserIsEmpty)(u,this._onProtocolError,v),(0,En.assertNotificationFilterIsEmpty)(c,this._onProtocolError,v),this.write(On.default.begin({bookmarks:o,txConfig:i,mode:s}),v,!0),v},r.prototype.commitTransaction=function(t){var n=t===void 0?{}:t,o=n.beforeError,i=n.afterError,a=n.beforeComplete,u=n.afterComplete,c=new An.ResultStreamObserver({server:this._server,beforeError:o,afterError:i,beforeComplete:a,afterComplete:u});return c.prepareToHandleSingleResponse(),this.write(On.default.commit(),c,!0),c},r.prototype.rollbackTransaction=function(t){var n=t===void 0?{}:t,o=n.beforeError,i=n.afterError,a=n.beforeComplete,u=n.afterComplete,c=new An.ResultStreamObserver({server:this._server,beforeError:o,afterError:i,beforeComplete:a,afterComplete:u});return c.prepareToHandleSingleResponse(),this.write(On.default.rollback(),c,!0),c},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,u=i.txConfig,c=i.database,s=i.impersonatedUser,l=i.notificationFilter,d=i.mode,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,_=i.afterError,b=i.beforeComplete,w=i.afterComplete,E=i.flush,S=E===void 0?!0:E,O=i.highRecordWatermark,A=O===void 0?Number.MAX_VALUE:O,$=i.lowRecordWatermark,I=$===void 0?Number.MAX_VALUE:$,L=new An.ResultStreamObserver({server:this._server,beforeKeys:h,afterKeys:p,beforeError:v,afterError:_,beforeComplete:b,afterComplete:w,highRecordWatermark:A,lowRecordWatermark:I});return(0,En.assertDatabaseIsEmpty)(c,this._onProtocolError,L),(0,En.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,L),(0,En.assertNotificationFilterIsEmpty)(l,this._onProtocolError,L),this.write(On.default.runWithMetadata(t,n,{bookmarks:a,txConfig:u,mode:d}),L,!1),this.write(On.default.pullAll(),L,S),L},r.prototype.requestRoutingInformation=function(t){var n,o=t.routingContext,i=o===void 0?{}:o,a=t.sessionContext,u=a===void 0?{}:a,c=t.onError,s=t.onCompleted,l=this.run(NW,(n={},n[fE]=i,n),Hc(Hc({},u),{txConfig:$W.empty()}));return new An.ProcedureRouteObserver({resultObserver:l,onProtocolError:this._onProtocolError,onError:c,onCompleted:s})},r}(AW.default);Mf.default=MW;var Uf={},Ff={},hv=f&&f.__assign||function(){return hv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},hv.apply(this,arguments)},DW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ff,"__esModule",{value:!0});var LW=DW(Df);Ff.default=hv({},LW.default);var UW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),qc=f&&f.__assign||function(){return qc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},qc.apply(this,arguments)},xf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Uf,"__esModule",{value:!0});var FW=xf(Mf),Xi=xf(ze),fc=Ve,hp=ie,xW=xf(Ff),BW=xf(Oe),L_=G;L_.internal.bookmarks.Bookmarks;var dE=L_.internal.constants,VW=dE.BOLT_PROTOCOL_V4_0,WW=dE.FETCH_ALL,zW=L_.internal.txConfig.TxConfig,hE="context",pE="database",HW="CALL dbms.routing.getRoutingTable($".concat(hE,", $").concat(pE,")"),qW=function(e){UW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return VW},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new BW.default(Object.values(xW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,u=n.impersonatedUser,c=n.notificationFilter,s=n.mode,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new hp.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),(0,fc.assertImpersonatedUserIsEmpty)(u,this._onProtocolError,v),(0,fc.assertNotificationFilterIsEmpty)(c,this._onProtocolError,v),this.write(Xi.default.begin({bookmarks:o,txConfig:i,database:a,mode:s}),v,!0),v},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,u=i.txConfig,c=i.database,s=i.impersonatedUser,l=i.notificationFilter,d=i.mode,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,_=i.afterError,b=i.beforeComplete,w=i.afterComplete,E=i.flush,S=E===void 0?!0:E,O=i.reactive,A=O===void 0?!1:O,$=i.fetchSize,I=$===void 0?WW:$,L=i.highRecordWatermark,X=L===void 0?Number.MAX_VALUE:L,ae=i.lowRecordWatermark,_e=ae===void 0?Number.MAX_VALUE:ae,ne=new hp.ResultStreamObserver({server:this._server,reactive:A,fetchSize:I,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:_,beforeComplete:b,afterComplete:w,highRecordWatermark:X,lowRecordWatermark:_e});(0,fc.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,ne),(0,fc.assertNotificationFilterIsEmpty)(l,this._onProtocolError,ne);var ve=A;return this.write(Xi.default.runWithMetadata(t,n,{bookmarks:a,txConfig:u,database:c,mode:d}),ne,ve&&S),A||this.write(Xi.default.pull({n:I}),ne,S),ne},r.prototype._requestMore=function(t,n,o){this.write(Xi.default.pull({stmtId:t,n}),o,!0)},r.prototype._requestDiscard=function(t,n){this.write(Xi.default.discard({stmtId:t}),n,!0)},r.prototype._noOp=function(){},r.prototype.requestRoutingInformation=function(t){var n,o=t.routingContext,i=o===void 0?{}:o,a=t.databaseName,u=a===void 0?null:a,c=t.sessionContext,s=c===void 0?{}:c,l=t.onError,d=t.onCompleted,h=this.run(HW,(n={},n[hE]=i,n[pE]=u,n),qc(qc({},s),{txConfig:zW.empty()}));return new hp.ProcedureRouteObserver({resultObserver:h,onProtocolError:this._onProtocolError,onError:l,onCompleted:d})},r}(FW.default);Uf.default=qW;var Bf={},Vf={},pv=f&&f.__assign||function(){return pv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},pv.apply(this,arguments)},GW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vf,"__esModule",{value:!0});var KW=GW(Ff);Vf.default=pv({},KW.default);var YW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bf,"__esModule",{value:!0});var ZW=Wf(Uf),QW=Wf(ze),XW=ie,JW=G,ez=Ve,tz=Wf(Vf),rz=Wf(Oe),nz=JW.internal.constants.BOLT_PROTOCOL_V4_1,oz=function(e){YW(r,e);function r(t,n,o,i,a,u,c){i===void 0&&(i=function(){return null});var s=e.call(this,t,n,o,i,a,u)||this;return s._serversideRouting=c,s}return Object.defineProperty(r.prototype,"version",{get:function(){return nz},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new rz.default(Object.values(tz.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,u=o.notificationFilter,c=o.onError,s=o.onComplete,l=new XW.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return n._onLoginCompleted(d,a,s)}});return(0,ez.assertNotificationFilterIsEmpty)(u,this._onProtocolError,l),this.write(QW.default.hello(i,a,this._serversideRouting),l,!0),l},r}(ZW.default);Bf.default=oz;var zf={},Hf={},vv=f&&f.__assign||function(){return vv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},vv.apply(this,arguments)},iz=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hf,"__esModule",{value:!0});var az=iz(Vf);Hf.default=vv({},az.default);var sz=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),U_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zf,"__esModule",{value:!0});var uz=U_(Bf),cz=G,lz=U_(Hf),fz=U_(Oe),dz=cz.internal.constants.BOLT_PROTOCOL_V4_2,hz=function(e){sz(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return dz},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new fz.default(Object.values(lz.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r}(uz.default);zf.default=hz;var xu={},qf={},_v=f&&f.__assign||function(){return _v=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_v.apply(this,arguments)},pz=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qf,"__esModule",{value:!0});var vz=pz(Hf);qf.default=_v({},vz.default);var Bu={},Vu={},yv=f&&f.__assign||function(){return yv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},yv.apply(this,arguments)},_z=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vu,"__esModule",{value:!0});var yz=_z(qf);Vu.default=yv({},yz.default);var vE=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},bz=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bu,"__esModule",{value:!0});var Gc=et,pt=G,_E=bz(Vu),mz=yr,gz=zn,Ca=pt.internal.temporalUtil.localDateTimeToEpochSecond,vg=73,wz=3,_g=105,Oz=3;function Ez(e,r){var t=e.disableLosslessIntegers,n=e.useBigInt,o=_E.default.createDateTimeWithZoneIdTransformer(e);return o.extendsWith({signature:_g,fromStructure:function(i){Gc.structure.verifyStructSize("DateTimeWithZoneId",Oz,i.size);var a=vE(i.fields,3),u=a[0],c=a[1],s=a[2],l=bv(s,u,c),d=new pt.DateTime(l.year,l.month,l.day,l.hour,l.minute,l.second,(0,pt.int)(c),l.timeZoneOffsetSeconds,s);return yE(d,t,n)},toStructure:function(i){var a=Ca(i.year,i.month,i.day,i.hour,i.minute,i.second,i.nanosecond),u=i.timeZoneOffsetSeconds!=null?i.timeZoneOffsetSeconds:Sz(i.timeZoneId,a,i.nanosecond);i.timeZoneOffsetSeconds==null&&r.warn('DateTime objects without "timeZoneOffsetSeconds" property are prune to bugs related to ambiguous times. For instance, 2022-10-30T2:30:00[Europe/Berlin] could be GMT+1 or GMT+2.');var c=a.subtract(u),s=(0,pt.int)(i.nanosecond),l=i.timeZoneId;return new Gc.structure.Structure(_g,[c,s,l])}})}function Sz(e,r,t){var n=bv(e,r,t),o=Ca(n.year,n.month,n.day,n.hour,n.minute,n.second,t),i=o.subtract(r),a=r.subtract(i),u=bv(e,a,t),c=Ca(u.year,u.month,u.day,u.hour,u.minute,u.second,t),s=c.subtract(a);return s}var pp=new Map;function Tz(e){if(!pp.has(e)){var r=new Intl.DateTimeFormat("en-US",{timeZone:e,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"});pp.set(e,r)}return pp.get(e)}function bv(e,r,t){var n=Tz(e),o=(0,pt.int)(r).multiply(1e3).add((0,pt.int)(t).div(1e6)).toNumber(),i=n.formatToParts(o),a=i.reduce(function(c,s){return s.type==="era"?c.adjustEra=s.value.toUpperCase()==="B"?function(l){return l.subtract(1).negate()}:gz.identity:s.type==="hour"?c.hour=(0,pt.int)(s.value).modulo(24):s.type!=="literal"&&(c[s.type]=(0,pt.int)(s.value)),c},{});a.year=a.adjustEra(a.year);var u=Ca(a.year,a.month,a.day,a.hour,a.minute,a.second,a.nanosecond);return a.timeZoneOffsetSeconds=u.subtract(r),a.hour=a.hour.modulo(24),a}function Pz(e){var r=e.disableLosslessIntegers,t=e.useBigInt,n=_E.default.createDateTimeWithOffsetTransformer(e);return n.extendsWith({signature:vg,toStructure:function(o){var i=Ca(o.year,o.month,o.day,o.hour,o.minute,o.second,o.nanosecond),a=(0,pt.int)(o.nanosecond),u=(0,pt.int)(o.timeZoneOffsetSeconds),c=i.subtract(u);return new Gc.structure.Structure(vg,[c,a,u])},fromStructure:function(o){Gc.structure.verifyStructSize("DateTimeWithZoneOffset",wz,o.size);var i=vE(o.fields,3),a=i[0],u=i[1],c=i[2],s=(0,pt.int)(a).add(c),l=(0,mz.epochSecondAndNanoToLocalDateTime)(s,u),d=new pt.DateTime(l.year,l.month,l.day,l.hour,l.minute,l.second,l.nanosecond,c,null);return yE(d,r,t)}})}function yE(e,r,t){if(!r&&!t)return e;var n=function(u){return t?u.toBigInt():u.toNumberOrInfinity()},o=Object.create(Object.getPrototypeOf(e));for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)===!0){var a=e[i];o[i]=(0,pt.isInt)(a)?n(a):a}return Object.freeze(o),o}Bu.default={createDateTimeWithZoneIdTransformer:Ez,createDateTimeWithOffsetTransformer:Pz};var Cz=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Kc=f&&f.__assign||function(){return Kc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Kc.apply(this,arguments)},Wu=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xu,"__esModule",{value:!0});var Az=Wu(zf),yg=Wu(ze),bg=ie,Iz=Ve,mg=Wu(qf),Rz=Wu(Bu),gg=Wu(Oe),bE=G,jz=bE.internal.bookmarks.Bookmarks,$z=bE.internal.constants.BOLT_PROTOCOL_V4_3,Nz=function(e){Cz(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return $z},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new gg.default(Object.values(mg.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.requestRoutingInformation=function(t){var n=t.routingContext,o=n===void 0?{}:n,i=t.databaseName,a=i===void 0?null:i,u=t.sessionContext,c=u===void 0?{}:u,s=t.onError,l=t.onCompleted,d=new bg.RouteObserver({onProtocolError:this._onProtocolError,onError:s,onCompleted:l}),h=c.bookmarks||jz.empty();return this.write(yg.default.route(o,h.values(),a),d,!0),d},r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,u=o.notificationFilter,c=o.onError,s=o.onComplete,l=new bg.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return d.patch_bolt!==void 0&&n._applyPatches(d.patch_bolt),n._onLoginCompleted(d,a,s)}});return(0,Iz.assertNotificationFilterIsEmpty)(u,this._onProtocolError,l),this.write(yg.default.hello(i,a,this._serversideRouting,["utc"]),l,!0),l},r.prototype._applyPatches=function(t){t.includes("utc")&&this._applyUtcPatch()},r.prototype._applyUtcPatch=function(){var t=this;this._transformer=new gg.default(Object.values(Kc(Kc({},mg.default),Rz.default)).map(function(n){return n(t._config,t._log)}))},r}(Az.default);xu.default=Nz;var Gf={},kz=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yc=f&&f.__assign||function(){return Yc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Yc.apply(this,arguments)},zu=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gf,"__esModule",{value:!0});var Mz=zu(xu),mE=G,dc=zu(ze),vp=ie,wg=Ve,Og=zu(Vu),Dz=zu(Bu),Eg=zu(Oe),gE=mE.internal.constants,Lz=gE.BOLT_PROTOCOL_V4_4,Uz=gE.FETCH_ALL,Fz=mE.internal.bookmarks.Bookmarks,xz=function(e){kz(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return Lz},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Eg.default(Object.values(Og.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.requestRoutingInformation=function(t){var n=t.routingContext,o=n===void 0?{}:n,i=t.databaseName,a=i===void 0?null:i,u=t.impersonatedUser,c=u===void 0?null:u,s=t.sessionContext,l=s===void 0?{}:s,d=t.onError,h=t.onCompleted,p=new vp.RouteObserver({onProtocolError:this._onProtocolError,onError:d,onCompleted:h}),v=l.bookmarks||Fz.empty();return this.write(dc.default.routeV4x4(o,v.values(),{databaseName:a,impersonatedUser:c}),p,!0),p},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,u=i.txConfig,c=i.database,s=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,_=i.afterError,b=i.beforeComplete,w=i.afterComplete,E=i.flush,S=E===void 0?!0:E,O=i.reactive,A=O===void 0?!1:O,$=i.fetchSize,I=$===void 0?Uz:$,L=i.highRecordWatermark,X=L===void 0?Number.MAX_VALUE:L,ae=i.lowRecordWatermark,_e=ae===void 0?Number.MAX_VALUE:ae,ne=new vp.ResultStreamObserver({server:this._server,reactive:A,fetchSize:I,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:_,beforeComplete:b,afterComplete:w,highRecordWatermark:X,lowRecordWatermark:_e});(0,wg.assertNotificationFilterIsEmpty)(d,this._onProtocolError,ne);var ve=A;return this.write(dc.default.runWithMetadata(t,n,{bookmarks:a,txConfig:u,database:c,mode:s,impersonatedUser:l}),ne,ve&&S),A||this.write(dc.default.pull({n:I}),ne,S),ne},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,u=n.mode,c=n.impersonatedUser,s=n.notificationFilter,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new vp.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),(0,wg.assertNotificationFilterIsEmpty)(s,this._onProtocolError,v),this.write(dc.default.begin({bookmarks:o,txConfig:i,database:a,mode:u,impersonatedUser:c}),v,!0),v},r.prototype._applyUtcPatch=function(){var t=this;this._transformer=new Eg.default(Object.values(Yc(Yc({},Og.default),Dz.default)).map(function(n){return n(t._config,t._log)}))},r}(Mz.default);Gf.default=xz;var Kf={},Yf={},ya=f&&f.__assign||function(){return ya=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ya.apply(this,arguments)},F_=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},wE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yf,"__esModule",{value:!0});var x_=et,B_=G,Zf=wE(Vu),Bz=wE(Bu),Vz=4,Wz=8,zz=4;function Hz(e){var r=Zf.default.createNodeTransformer(e);return r.extendsWith({fromStructure:function(t){x_.structure.verifyStructSize("Node",Vz,t.size);var n=F_(t.fields,4),o=n[0],i=n[1],a=n[2],u=n[3];return new B_.Node(o,i,a,u)}})}function qz(e){var r=Zf.default.createRelationshipTransformer(e);return r.extendsWith({fromStructure:function(t){x_.structure.verifyStructSize("Relationship",Wz,t.size);var n=F_(t.fields,8),o=n[0],i=n[1],a=n[2],u=n[3],c=n[4],s=n[5],l=n[6],d=n[7];return new B_.Relationship(o,i,a,u,c,s,l,d)}})}function Gz(e){var r=Zf.default.createUnboundRelationshipTransformer(e);return r.extendsWith({fromStructure:function(t){x_.structure.verifyStructSize("UnboundRelationship",zz,t.size);var n=F_(t.fields,4),o=n[0],i=n[1],a=n[2],u=n[3];return new B_.UnboundRelationship(o,i,a,u)}})}Yf.default=ya(ya(ya({},Zf.default),Bz.default),{createNodeTransformer:Hz,createRelationshipTransformer:qz,createUnboundRelationshipTransformer:Gz});var Kz=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kf,"__esModule",{value:!0});var Yz=Qf(Gf),Zz=Ve,Qz=Qf(Yf),Xz=Qf(Oe),Jz=Qf(ze),e7=ie,t7=G,r7=t7.internal.constants.BOLT_PROTOCOL_V5_0,n7=function(e){Kz(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return r7},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Xz.default(Object.values(Qz.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,u=o.notificationFilter,c=o.onError,s=o.onComplete,l=new e7.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return n._onLoginCompleted(d,a,s)}});return(0,Zz.assertNotificationFilterIsEmpty)(u,this._onProtocolError,l),this.write(Jz.default.hello(i,a,this._serversideRouting),l,!0),l},r}(Yz.default);Kf.default=n7;var Xf={},Jf={},mv=f&&f.__assign||function(){return mv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},mv.apply(this,arguments)},o7=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jf,"__esModule",{value:!0});var i7=o7(Yf);Jf.default=mv({},i7.default);var a7=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Zc=f&&f.__assign||function(){return Zc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Zc.apply(this,arguments)},ed=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xf,"__esModule",{value:!0});var s7=ed(Kf),u7=Ve,c7=ed(Jf),l7=ed(Oe),_p=ed(ze),yp=ie,f7=G,d7=f7.internal.constants.BOLT_PROTOCOL_V5_1,h7=function(e){a7(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return d7},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new l7.default(Object.values(c7.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,u=o.notificationFilter,c=o.onError,s=o.onComplete,l={},d=new yp.LoginObserver({onError:function(h){return n._onLoginError(h,c)},onCompleted:function(h){return l.metadata=h,n._onLoginCompleted(h)}});return(0,u7.assertNotificationFilterIsEmpty)(u,this._onProtocolError,d),this.write(_p.default.hello5x1(i,this._serversideRouting),d,!1),this.logon({authToken:a,onComplete:function(h){return s(Zc(Zc({},h),l.metadata))},onError:c,flush:!0})},r.prototype.logon=function(t){var n=this,o=t===void 0?{}:t,i=o.authToken,a=o.onComplete,u=o.onError,c=o.flush,s=new yp.LoginObserver({onCompleted:function(){return n._onLoginCompleted(null,i,a)},onError:function(l){return n._onLoginError(l,u)}});return this.write(_p.default.logon(i),s,c),s},r.prototype.logoff=function(t){var n=t===void 0?{}:t,o=n.onComplete,i=n.onError,a=n.flush,u=new yp.LogoffObserver({onCompleted:o,onError:i});return this.write(_p.default.logoff(),u,a),u},r}(s7.default);Xf.default=h7;var td={},rd={},gv=f&&f.__assign||function(){return gv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},gv.apply(this,arguments)},p7=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rd,"__esModule",{value:!0});var v7=p7(Jf);rd.default=gv({},v7.default);var _7=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qc=f&&f.__assign||function(){return Qc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Qc.apply(this,arguments)},nd=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(td,"__esModule",{value:!0});var y7=nd(Xf),b7=nd(rd),m7=nd(Oe),hc=nd(ze),bp=ie,g7=G,OE=g7.internal.constants,w7=OE.BOLT_PROTOCOL_V5_2,O7=OE.FETCH_ALL,E7=function(e){_7(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return w7},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new m7.default(Object.values(b7.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,u=o.notificationFilter,c=o.onError,s=o.onComplete,l={},d=new bp.LoginObserver({onError:function(h){return n._onLoginError(h,c)},onCompleted:function(h){return l.metadata=h,n._onLoginCompleted(h)}});return this.write(hc.default.hello5x2(i,u,this._serversideRouting),d,!1),this.logon({authToken:a,onComplete:function(h){return s(Qc(Qc({},h),l.metadata))},onError:c,flush:!0})},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,u=n.mode,c=n.impersonatedUser,s=n.notificationFilter,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new bp.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),this.write(hc.default.begin({bookmarks:o,txConfig:i,database:a,mode:u,impersonatedUser:c,notificationFilter:s}),v,!0),v},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,u=i.txConfig,c=i.database,s=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,_=i.afterError,b=i.beforeComplete,w=i.afterComplete,E=i.flush,S=E===void 0?!0:E,O=i.reactive,A=O===void 0?!1:O,$=i.fetchSize,I=$===void 0?O7:$,L=i.highRecordWatermark,X=L===void 0?Number.MAX_VALUE:L,ae=i.lowRecordWatermark,_e=ae===void 0?Number.MAX_VALUE:ae,ne=new bp.ResultStreamObserver({server:this._server,reactive:A,fetchSize:I,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:_,beforeComplete:b,afterComplete:w,highRecordWatermark:X,lowRecordWatermark:_e}),ve=A;return this.write(hc.default.runWithMetadata(t,n,{bookmarks:a,txConfig:u,database:c,mode:s,impersonatedUser:l,notificationFilter:d}),ne,ve&&S),A||this.write(hc.default.pull({n:I}),ne,S),ne},r}(y7.default);td.default=E7;var od={},id={},wv=f&&f.__assign||function(){return wv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},wv.apply(this,arguments)},S7=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(id,"__esModule",{value:!0});var T7=S7(rd);id.default=wv({},T7.default);var P7=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xc=f&&f.__assign||function(){return Xc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Xc.apply(this,arguments)},ad=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(od,"__esModule",{value:!0});var C7=ad(td),A7=ad(id),I7=ad(Oe),R7=ad(ze),j7=ie,$7=G,N7=$7.internal.constants.BOLT_PROTOCOL_V5_3,k7=function(e){P7(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return N7},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new I7.default(Object.values(A7.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent,a=o.boltAgent,u=o.authToken,c=o.notificationFilter,s=o.onError,l=o.onComplete,d={},h=new j7.LoginObserver({onError:function(p){return n._onLoginError(p,s)},onCompleted:function(p){return d.metadata=p,n._onLoginCompleted(p)}});return this.write(R7.default.hello5x3(i,a,c,this._serversideRouting),h,!1),this.logon({authToken:u,onComplete:function(p){return l(Xc(Xc({},p),d.metadata))},onError:s,flush:!0})},r}(C7.default);od.default=k7;var sd={},ud={},Ov=f&&f.__assign||function(){return Ov=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ov.apply(this,arguments)},M7=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ud,"__esModule",{value:!0});var D7=M7(id);ud.default=Ov({},D7.default);var L7=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),cd=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sd,"__esModule",{value:!0});var U7=cd(od),F7=cd(ud),x7=cd(ze),B7=ie,V7=cd(Oe),W7=G,z7=W7.internal.constants.BOLT_PROTOCOL_V5_4,H7=function(e){L7(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return z7},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new V7.default(Object.values(F7.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.telemetry=function(t,n){var o=t.api,i=n===void 0?{}:n,a=i.onError,u=i.onCompleted,c=new B7.TelemetryObserver({onCompleted:u,onError:a});return this.write(x7.default.telemetry({api:o}),c,!1),c},r}(U7.default);sd.default=H7;var ld={},fd={},Ev=f&&f.__assign||function(){return Ev=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ev.apply(this,arguments)},q7=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fd,"__esModule",{value:!0});var G7=q7(ud);fd.default=Ev({},G7.default);var K7=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),kr=f&&f.__assign||function(){return kr=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},kr.apply(this,arguments)},dd=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ld,"__esModule",{value:!0});var Y7=dd(sd),Z7=dd(fd),Q7=dd(Oe),pc=dd(ze),mp=ie,X7=G,EE=X7.internal.constants,J7=EE.BOLT_PROTOCOL_V5_5,eH=EE.FETCH_ALL,tH=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),rH=function(e){K7(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return J7},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Q7.default(Object.values(Z7.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent,a=o.boltAgent,u=o.authToken,c=o.notificationFilter,s=o.onError,l=o.onComplete,d={},h=new mp.LoginObserver({onError:function(p){return n._onLoginError(p,s)},onCompleted:function(p){return d.metadata=p,n._onLoginCompleted(p)}});return this.write(pc.default.hello5x5(i,a,c,this._serversideRouting),h,!1),this.logon({authToken:u,onComplete:function(p){return l(kr(kr({},p),d.metadata))},onError:s,flush:!0})},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,u=n.mode,c=n.impersonatedUser,s=n.notificationFilter,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new mp.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),this.write(pc.default.begin5x5({bookmarks:o,txConfig:i,database:a,mode:u,impersonatedUser:c,notificationFilter:s}),v,!0),v},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,u=i.txConfig,c=i.database,s=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,_=i.afterError,b=i.beforeComplete,w=i.afterComplete,E=i.flush,S=E===void 0?!0:E,O=i.reactive,A=O===void 0?!1:O,$=i.fetchSize,I=$===void 0?eH:$,L=i.highRecordWatermark,X=L===void 0?Number.MAX_VALUE:L,ae=i.lowRecordWatermark,_e=ae===void 0?Number.MAX_VALUE:ae,ne=new mp.ResultStreamObserver({server:this._server,reactive:A,fetchSize:I,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:_,beforeComplete:b,afterComplete:w,highRecordWatermark:X,lowRecordWatermark:_e,enrichMetadata:this._enrichMetadata}),ve=A;return this.write(pc.default.runWithMetadata5x5(t,n,{bookmarks:a,txConfig:u,database:c,mode:s,impersonatedUser:l,notificationFilter:d}),ne,ve&&S),A||this.write(pc.default.pull({n:I}),ne,S),ne},r.prototype._enrichMetadata=function(t){return Array.isArray(t.statuses)&&(t.statuses=t.statuses.map(function(n){return kr(kr({},n),{description:n.neo4j_code!=null?n.status_description:n.description,diagnostic_record:n.diagnostic_record!==null?kr(kr({},tH),n.diagnostic_record):null})})),t},r}(Y7.default);ld.default=rH;var hd={},pd={},Sv=f&&f.__assign||function(){return Sv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Sv.apply(this,arguments)},nH=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pd,"__esModule",{value:!0});var oH=nH(fd);pd.default=Sv({},oH.default);var iH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Oo=f&&f.__assign||function(){return Oo=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Oo.apply(this,arguments)},V_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hd,"__esModule",{value:!0});var aH=V_(ld),sH=V_(pd),uH=V_(Oe),cH=G,lH=cH.internal.constants.BOLT_PROTOCOL_V5_6,fH=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),dH=function(e){iH(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return lH},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new uH.default(Object.values(sH.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype._enrichMetadata=function(t){return Array.isArray(t.statuses)&&(t.statuses=t.statuses.map(function(n){return Oo(Oo({},n),{diagnostic_record:n.diagnostic_record!==null?Oo(Oo({},fH),n.diagnostic_record):null})})),t},r}(aH.default);hd.default=dH;var vd={},_d={},Tv=f&&f.__assign||function(){return Tv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Tv.apply(this,arguments)},hH=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_d,"__esModule",{value:!0});var pH=hH(pd);_d.default=Tv({},pH.default);var vH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Eo=f&&f.__assign||function(){return Eo=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Eo.apply(this,arguments)},W_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vd,"__esModule",{value:!0});var _H=W_(hd),yH=W_(_d),bH=W_(Oe),mH=G,gH=mH.internal.constants.BOLT_PROTOCOL_V5_7,wH=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),OH=function(e){vH(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return gH},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new bH.default(Object.values(yH.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.enrichErrorMetadata=function(t){return Eo(Eo({},t),{cause:t.cause!==null&&t.cause!==void 0?this.enrichErrorMetadata(t.cause):null,code:t.neo4j_code,diagnostic_record:t.diagnostic_record!==null?Eo(Eo({},wH),t.diagnostic_record):null})},r}(_H.default);vd.default=OH;var z_={},H_={},Pv=f&&f.__assign||function(){return Pv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Pv.apply(this,arguments)},EH=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(H_,"__esModule",{value:!0});var SH=EH(_d);H_.default=Pv({},SH.default);var TH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),yd=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(z_,"__esModule",{value:!0});var PH=yd(vd),CH=yd(H_),AH=yd(Oe),Sg=yd(ze),IH=ie,RH=G,SE=RH.internal.constants,jH=SE.BOLT_PROTOCOL_V5_8,$H=SE.FETCH_ALL,NH=function(e){TH(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return jH},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new AH.default(Object.values(CH.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,u=i.txConfig,c=i.database,s=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,_=i.afterError,b=i.beforeComplete,w=i.afterComplete,E=i.flush,S=E===void 0?!0:E,O=i.reactive,A=O===void 0?!1:O,$=i.fetchSize,I=$===void 0?$H:$,L=i.highRecordWatermark,X=L===void 0?Number.MAX_VALUE:L,ae=i.lowRecordWatermark,_e=ae===void 0?Number.MAX_VALUE:ae,ne=i.onDb,ve=new IH.ResultStreamObserver({server:this._server,reactive:A,fetchSize:I,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:_,beforeComplete:b,afterComplete:w,highRecordWatermark:X,lowRecordWatermark:_e,enrichMetadata:this._enrichMetadata,onDb:ne}),it=A;return this.write(Sg.default.runWithMetadata5x5(t,n,{bookmarks:a,txConfig:u,database:c,mode:s,impersonatedUser:l,notificationFilter:d}),ve,it&&S),A||this.write(Sg.default.pull({n:I}),ve,S),ve},r}(PH.default);z_.default=NH;var q_={};Object.defineProperty(q_,"__esModule",{value:!0});var Ir=G,kH=112,MH=113,DH=126,LH=127;function lr(){}function gp(e){return e}var UH={onNext:lr,onCompleted:lr,onError:lr},FH=function(){function e(r){var t=r===void 0?{}:r,n=t.transformMetadata,o=t.enrichErrorMetadata,i=t.log,a=t.observer;this._pendingObservers=[],this._log=i,this._transformMetadata=n||gp,this._enrichErrorMetadata=o||gp,this._observer=Object.assign({onObserversCountChange:lr,onError:lr,onFailure:lr,onErrorApplyTransformation:gp},a)}return Object.defineProperty(e.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),e.prototype.handleResponse=function(r){var t=r.fields[0];switch(r.signature){case MH:this._log.isDebugEnabled()&&this._log.debug("S: RECORD ".concat(Ir.json.stringify(r))),this._currentObserver.onNext(t);break;case kH:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS ".concat(Ir.json.stringify(r)));try{var n=this._transformMetadata(t);this._currentObserver.onCompleted(n)}finally{this._updateCurrentObserver()}break;case LH:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE ".concat(Ir.json.stringify(r)));try{this._currentFailure=this._handleErrorPayload(this._enrichErrorMetadata(t)),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case DH:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED ".concat(Ir.json.stringify(r)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,Ir.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,Ir.newError)("Unknown Bolt protocol message: "+r))}},e.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onObserversCountChange(this._observersCount)},Object.defineProperty(e.prototype,"_observersCount",{get:function(){return this._currentObserver==null?this._pendingObservers.length:this._pendingObservers.length+1},enumerable:!1,configurable:!0}),e.prototype._queueObserver=function(r){return r=r||UH,r.onCompleted=r.onCompleted||lr,r.onError=r.onError||lr,r.onNext=r.onNext||lr,this._currentObserver===void 0?this._currentObserver=r:this._pendingObservers.push(r),this._observer.onObserversCountChange(this._observersCount),!0},e.prototype._notifyErrorToObservers=function(r){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(r);this._pendingObservers.length>0;){var t=this._pendingObservers.shift();t&&t.onError&&t.onError(r)}},e.prototype.hasOngoingObservableRequests=function(){return this._currentObserver!=null||this._pendingObservers.length>0},e.prototype._resetFailure=function(){this._currentFailure=null},e.prototype._handleErrorPayload=function(r){var t=xH(r.code),n=r.cause!=null?this._handleErrorCause(r.cause):void 0,o=(0,Ir.newError)(r.message,t,n,r.gql_status,r.description,r.diagnostic_record);return this._observer.onErrorApplyTransformation(o)},e.prototype._handleErrorCause=function(r){var t=r.cause!=null?this._handleErrorCause(r.cause):void 0,n=(0,Ir.newGQLError)(r.message,t,r.gql_status,r.description,r.diagnostic_record);return this._observer.onErrorApplyTransformation(n)},e}();q_.default=FH;function xH(e){return e==="Neo.TransientError.Transaction.Terminated"?"Neo.ClientError.Transaction.Terminated":e==="Neo.TransientError.Transaction.LockClientStopped"?"Neo.ClientError.Transaction.LockClientStopped":e}var Ue=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(j_,"__esModule",{value:!0});var BH=G,VH=Ue(Of),WH=Ue($f),zH=Ue(Mf),HH=Ue(Uf),qH=Ue(Bf),GH=Ue(zf),KH=Ue(xu),YH=Ue(Gf),ZH=Ue(Kf),QH=Ue(Xf),XH=Ue(td),JH=Ue(od),eq=Ue(sd),tq=Ue(ld),rq=Ue(hd),nq=Ue(vd),oq=Ue(z_),iq=Ue(q_);function aq(e){var r=e===void 0?{}:e,t=r.version,n=r.chunker,o=r.dechunker,i=r.channel,a=r.disableLosslessIntegers,u=r.useBigInt,c=r.serversideRouting,s=r.server,l=r.log,d=r.observer,h=function(p){var v=new iq.default({transformMetadata:p.transformMetadata.bind(p),enrichErrorMetadata:p.enrichErrorMetadata.bind(p),log:l,observer:d});return i.onerror=d.onError.bind(d),i.onmessage=function(_){return o.write(_)},o.onmessage=function(_){try{v.handleResponse(p.unpack(_))}catch(b){return d.onError(b)}},v};return sq(t,s,n,{disableLosslessIntegers:a,useBigInt:u},c,h,d.onProtocolError.bind(d),l)}j_.default=aq;function sq(e,r,t,n,o,i,a,u){switch(e){case 1:return new VH.default(r,t,n,i,u,a);case 2:return new WH.default(r,t,n,i,u,a);case 3:return new zH.default(r,t,n,i,u,a);case 4:return new HH.default(r,t,n,i,u,a);case 4.1:return new qH.default(r,t,n,i,u,a,o);case 4.2:return new GH.default(r,t,n,i,u,a,o);case 4.3:return new KH.default(r,t,n,i,u,a,o);case 4.4:return new YH.default(r,t,n,i,u,a,o);case 5:return new ZH.default(r,t,n,i,u,a,o);case 5.1:return new QH.default(r,t,n,i,u,a,o);case 5.2:return new XH.default(r,t,n,i,u,a,o);case 5.3:return new JH.default(r,t,n,i,u,a,o);case 5.4:return new eq.default(r,t,n,i,u,a,o);case 5.5:return new tq.default(r,t,n,i,u,a,o);case 5.6:return new rq.default(r,t,n,i,u,a,o);case 5.7:return new nq.default(r,t,n,i,u,a,o);case 5.8:return new oq.default(r,t,n,i,u,a,o);default:throw(0,BH.newError)("Unknown Bolt protocol version: "+e)}}(function(e){var r=f&&f.__createBinding||(Object.create?function(c,s,l,d){d===void 0&&(d=l);var h=Object.getOwnPropertyDescriptor(s,l);(!h||("get"in h?!s.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(c,d,h)}:function(c,s,l,d){d===void 0&&(d=l),c[d]=s[l]}),t=f&&f.__exportStar||function(c,s){for(var l in c)l!=="default"&&!Object.prototype.hasOwnProperty.call(s,l)&&r(s,c,l)},n=f&&f.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.RawRoutingTable=e.BoltProtocol=void 0;var o=n(E_),i=n(j_),a=n(xu),u=n(Ef);t(ie,e),e.BoltProtocol=a.default,e.RawRoutingTable=u.default,e.default={handshake:o.default,create:i.default}})(O_);var TE={},bd={},uq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(bd,"__esModule",{value:!0});var cq=G,lq=function(e){uq(r,e);function r(t){var n=e.call(this)||this;return n._connection=t,n}return r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t;n.accessMode,n.database,n.bookmarks;var o=this._connection;return this._connection=null,Promise.resolve(o)},r}(cq.ConnectionProvider);bd.default=lq;var Hu={},md={},qu={},fq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(qu,"__esModule",{value:!0});var dq=G,hq=function(e){fq(r,e);function r(t){var n=e.call(this)||this;return n._errorHandler=t,n}return Object.defineProperty(r.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"authToken",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(r.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.connect=function(t,n,o,i){throw new Error("not implemented")},r.prototype.write=function(t,n,o){throw new Error("not implemented")},r.prototype.close=function(){throw new Error("not implemented")},r.prototype.handleAndTransformError=function(t,n){return this._errorHandler?this._errorHandler.handleAndTransformError(t,n,this):t},r}(dq.Connection);qu.default=hq;var Gu={},pq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Tg=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(l){try{s(n.next(l))}catch(d){a(d)}}function c(l){try{s(n.throw(l))}catch(d){a(d)}}function s(l){l.done?i(l.value):o(l.value).then(u,c)}s((n=n.apply(e,r||[])).next())})},Pg=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(t=0)),t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},PE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gu,"__esModule",{value:!0});Gu.createChannelConnection=void 0;var vc=no,So=G,vq=PE(qu),Cg=PE(O_),_q=So.error.PROTOCOL_ERROR,yq=So.internal.logger.Logger,bq=0;function mq(e,r,t,n,o,i,a,u){i===void 0&&(i=null),u===void 0&&(u=function(l){return new vc.Channel(l)});var c=new vc.ChannelConfig(e,r,t.errorCode(),o),s=u(c);return Cg.default.handshake(s,n).then(function(l){var d=l.protocolVersion,h=l.consumeRemainingBuffer,p=new vc.Chunker(s),v=new vc.Dechunker,_=function(w){return Cg.default.create({version:d,channel:s,chunker:p,dechunker:v,disableLosslessIntegers:r.disableLosslessIntegers,useBigInt:r.useBigInt,serversideRouting:i,server:w.server,log:w.logger,observer:{onObserversCountChange:w._handleOngoingRequestsNumberChange.bind(w),onError:w._handleFatalError.bind(w),onFailure:w._resetOnFailure.bind(w),onProtocolError:w._handleProtocolError.bind(w),onErrorApplyTransformation:function(E){return w.handleAndTransformError(E,w._address)}}})},b=new CE(s,t,e,n,r.disableLosslessIntegers,i,p,r.notificationFilter,_,r.telemetryDisabled,a);return h(function(w){return v.write(w)}),b}).catch(function(l){return s.close().then(function(){throw l})})}Gu.createChannelConnection=mq;var CE=function(e){pq(r,e);function r(t,n,o,i,a,u,c,s,l,d,h){a===void 0&&(a=!1),u===void 0&&(u=null),h===void 0&&(h=function(v){});var p=e.call(this,n)||this;return p._authToken=null,p._idle=!1,p._reseting=!1,p._resetObservers=[],p._id=bq++,p._address=o,p._server={address:o.asHostPort()},p._creationTimestamp=Date.now(),p._disableLosslessIntegers=a,p._ch=t,p._chunker=c,p._log=gq(p,i),p._serversideRouting=u,p._notificationFilter=s,p._telemetryDisabledDriverConfig=d===!0,p._telemetryDisabledConnection=!0,p._ssrCallback=h,p._dbConnectionId=null,p._protocol=l(p),p._isBroken=!1,p._log.isDebugEnabled()&&p._log.debug("created towards ".concat(o)),p}return r.prototype.beginTransaction=function(t){return this._sendTelemetryIfEnabled(t),this._protocol.beginTransaction(t)},r.prototype.run=function(t,n,o){return this._sendTelemetryIfEnabled(o),this._protocol.run(t,n,o)},r.prototype._sendTelemetryIfEnabled=function(t){this._telemetryDisabledConnection||this._telemetryDisabledDriverConfig||t==null||t.apiTelemetryConfig==null||this._protocol.telemetry({api:t.apiTelemetryConfig.api},{onCompleted:t.apiTelemetryConfig.onTelemetrySuccess,onError:t.beforeError})},r.prototype.commitTransaction=function(t){return this._protocol.commitTransaction(t)},r.prototype.rollbackTransaction=function(t){return this._protocol.rollbackTransaction(t)},r.prototype.getProtocolVersion=function(){return this._protocol.version},Object.defineProperty(r.prototype,"authToken",{get:function(){return this._authToken},set:function(t){this._authToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return this._protocol.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(t){this._dbConnectionId=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){return this._idleTimestamp},set:function(t){this._idleTimestamp=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){return this._creationTimestamp},enumerable:!1,configurable:!0}),r.prototype.connect=function(t,n,o,i){return Tg(this,void 0,void 0,function(){var a=this;return Pg(this,function(u){switch(u.label){case 0:if(this._protocol.initialized&&!this._protocol.supportsReAuth)throw(0,So.newError)("Connection does not support re-auth");return this._authToken=o,this._protocol.initialized?[3,2]:[4,this._initialize(t,n,o)];case 1:return[2,u.sent()];case 2:return i?[4,new Promise(function(c,s){a._protocol.logoff({onError:s}),a._protocol.logon({authToken:o,onError:s,onComplete:function(){return c(a)},flush:!0})})]:[3,4];case 3:return[2,u.sent()];case 4:return this._protocol.logoff(),this._protocol.logon({authToken:o,flush:!0}),[2,this]}})})},r.prototype._initialize=function(t,n,o){var i=this,a=this;return new Promise(function(u,c){i._protocol.initialize({userAgent:t,boltAgent:n,authToken:o,notificationFilter:i._notificationFilter,onError:function(s){return c(s)},onComplete:function(s){var l;if(s){var d=s.server;(!i.version||d)&&(i.version=d);var h=s.connection_id;if(i.databaseId||(i.databaseId=h),s.hints){var p=s.hints["connection.recv_timeout_seconds"];if(p!=null){var v=(0,So.toNumber)(p);Number.isInteger(v)&&v>0?i._ch.setupReceiveTimeout(v*1e3):i._log.info("Server located at ".concat(i._address," supplied an invalid connection receive timeout value (").concat(v,"). ")+"Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}var _=s.hints["telemetry.enabled"];_===!0&&(i._telemetryDisabledConnection=!1),i.SSREnabledHint=s.hints["ssr.enabled"]}i._ssrCallback((l=i.SSREnabledHint)!==null&&l!==void 0?l:!1,"OPEN")}u(a)}})})},r.prototype.protocol=function(){return this._protocol},Object.defineProperty(r.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return this._server.version},set:function(t){this._server.version=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),r.prototype._handleFatalError=function(t){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||t,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by ".concat(this._error," (").concat(So.json.stringify(this._error),")")),this._protocol.notifyFatalError(this._error)},r.prototype._setIdle=function(t){this._idle=!0,this._ch.stopReceiveTimeout(),this._protocol.queueObserverIfProtocolIsNotBroken(t)},r.prototype._unsetIdle=function(){this._idle=!1,this._updateCurrentObserver()},r.prototype._queueObserver=function(t){return this._protocol.queueObserverIfProtocolIsNotBroken(t)},r.prototype.hasOngoingObservableRequests=function(){return!this._idle&&this._protocol.hasOngoingObservableRequests()},r.prototype.resetAndFlush=function(){var t=this;return new Promise(function(n,o){t._reset({onError:function(i){if(t._isBroken)o(i);else{var a=t._handleProtocolError("Received FAILURE as a response for RESET: ".concat(i));o(a)}},onComplete:function(){n()}})})},r.prototype._resetOnFailure=function(){var t=this;this.isOpen()&&this._reset({onError:function(){t._protocol.resetFailure()},onComplete:function(){t._protocol.resetFailure()}})},r.prototype._reset=function(t){var n=this;if(this._reseting){this._protocol.isLastMessageReset()?this._resetObservers.push(t):this._protocol.reset({onError:function(i){t.onError(i)},onComplete:function(){t.onComplete()}});return}this._resetObservers.push(t),this._reseting=!0;var o=function(i){n._reseting=!1;var a=n._resetObservers;n._resetObservers=[],a.forEach(i)};this._protocol.reset({onError:function(i){o(function(a){return a.onError(i)})},onComplete:function(){o(function(i){return i.onComplete()})}})},r.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},r.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},r.prototype._handleOngoingRequestsNumberChange=function(t){this._idle||(t===0?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout())},r.prototype.close=function(){var t;return Tg(this,void 0,void 0,function(){return Pg(this,function(n){switch(n.label){case 0:return this._ssrCallback((t=this.SSREnabledHint)!==null&&t!==void 0?t:!1,"CLOSE"),this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return n.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},r.prototype.toString=function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")},r.prototype._handleProtocolError=function(t){this._protocol.resetFailure(),this._updateCurrentObserver();var n=(0,So.newError)(t,_q);return this._handleFatalError(n),n},r}(vq.default);Gu.default=CE;function gq(e,r){return new yq(r._level,function(t,n){return r._loggerFunction(t,"".concat(e," ").concat(n))})}var G_={},wq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Oq=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(G_,"__esModule",{value:!0});var Eq=Oq(qu),Sq=function(e){wq(r,e);function r(t,n){var o=e.call(this,n)||this;return n&&(o._originalErrorHandler=t._errorHandler,t._errorHandler=o._errorHandler),o._delegate=t,o}return r.prototype.beginTransaction=function(t){return this._delegate.beginTransaction(t)},r.prototype.run=function(t,n,o){return this._delegate.run(t,n,o)},r.prototype.commitTransaction=function(t){return this._delegate.commitTransaction(t)},r.prototype.rollbackTransaction=function(t){return this._delegate.rollbackTransaction(t)},r.prototype.getProtocolVersion=function(){return this._delegate.getProtocolVersion()},Object.defineProperty(r.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(t){this._delegate.databaseId=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"authToken",{get:function(){return this._delegate.authToken},set:function(t){this._delegate.authToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return this._delegate.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return this._delegate.version},set:function(t){this._delegate.version=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){return this._delegate.creationTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){return this._delegate.idleTimestamp},set:function(t){this._delegate.idleTimestamp=t},enumerable:!1,configurable:!0}),r.prototype.isOpen=function(){return this._delegate.isOpen()},r.prototype.protocol=function(){return this._delegate.protocol()},r.prototype.connect=function(t,n,o,i){return this._delegate.connect(t,n,o,i)},r.prototype.write=function(t,n,o){return this._delegate.write(t,n,o)},r.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},r.prototype.hasOngoingObservableRequests=function(){return this._delegate.hasOngoingObservableRequests()},r.prototype.close=function(){return this._delegate.close()},r.prototype.release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate.release()},r}(Eq.default);G_.default=Sq;var K_={};Object.defineProperty(K_,"__esModule",{value:!0});var AE=G,Tq=AE.error.SERVICE_UNAVAILABLE,Pq=AE.error.SESSION_EXPIRED,Cq=function(){function e(r,t,n,o){this._errorCode=r,this._handleUnavailability=t||wp,this._handleWriteFailure=n||wp,this._handleSecurityError=o||wp}return e.create=function(r){var t=r.errorCode,n=r.handleUnavailability,o=r.handleWriteFailure,i=r.handleSecurityError;return new e(t,n,o,i)},e.prototype.errorCode=function(){return this._errorCode},e.prototype.handleAndTransformError=function(r,t,n){return Aq(r)?this._handleSecurityError(r,t,n):Iq(r)?this._handleUnavailability(r,t,n):Rq(r)?this._handleWriteFailure(r,t,n):r},e}();K_.default=Cq;function Aq(e){return e!=null&&e.code!=null&&e.code.startsWith("Neo.ClientError.Security.")}function Iq(e){return e?e.code===Pq||e.code===Tq||e.code==="Neo.TransientError.General.DatabaseUnavailable":!1}function Rq(e){return e?e.code==="Neo.ClientError.Cluster.NotALeader"||e.code==="Neo.ClientError.General.ForbiddenOnReadOnlyDatabase":!1}function wp(e){return e}(function(e){var r=f&&f.__createBinding||(Object.create?function(s,l,d,h){h===void 0&&(h=d);var p=Object.getOwnPropertyDescriptor(l,d);(!p||("get"in p?!l.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return l[d]}}),Object.defineProperty(s,h,p)}:function(s,l,d,h){h===void 0&&(h=d),s[h]=l[d]}),t=f&&f.__setModuleDefault||(Object.create?function(s,l){Object.defineProperty(s,"default",{enumerable:!0,value:l})}:function(s,l){s.default=l}),n=f&&f.__importStar||function(s){if(s&&s.__esModule)return s;var l={};if(s!=null)for(var d in s)d!=="default"&&Object.prototype.hasOwnProperty.call(s,d)&&r(l,s,d);return t(l,s),l},o=f&&f.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=e.ConnectionErrorHandler=e.DelegateConnection=e.ChannelConnection=e.Connection=void 0;var i=o(qu);e.Connection=i.default;var a=n(Gu);e.ChannelConnection=a.default,Object.defineProperty(e,"createChannelConnection",{enumerable:!0,get:function(){return a.createChannelConnection}});var u=o(G_);e.DelegateConnection=u.default;var c=o(K_);e.ConnectionErrorHandler=c.default,e.default=i.default})(md);var Y_={},jq=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(l){try{s(n.next(l))}catch(d){a(d)}}function c(l){try{s(n.throw(l))}catch(d){a(d)}}function s(l){l.done?i(l.value):o(l.value).then(u,c)}s((n=n.apply(e,r||[])).next())})},$q=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(t=0)),t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(Y_,"__esModule",{value:!0});var Nq=G,Ag=Qt,kq=function(){function e(r){var t=r.authTokenManager,n=r.userAgent,o=r.boltAgent;this._authTokenManager=t||(0,Nq.staticAuthTokenManager)({}),this._userAgent=n,this._boltAgent=o}return e.prototype.authenticate=function(r){var t=r.connection,n=r.auth,o=r.skipReAuth,i=r.waitReAuth,a=r.forceReAuth;return jq(this,void 0,void 0,function(){var u,c;return $q(this,function(s){switch(s.label){case 0:return n==null?[3,3]:(u=t.supportsReAuth===!0&&(!Ag.object.equals(t.authToken,n)&&o!==!0||a===!0),t.authToken==null||u?[4,t.connect(this._userAgent,this._boltAgent,n,i||!1)]:[3,2]);case 1:return[2,s.sent()];case 2:return[2,t];case 3:return[4,this._authTokenManager.getToken()];case 4:return c=s.sent(),Ag.object.equals(c,t.authToken)?[3,6]:[4,t.connect(this._userAgent,this._boltAgent,c,!1)];case 5:return[2,s.sent()];case 6:return[2,t]}})})},e.prototype.handleError=function(r){var t=r.connection,n=r.code;return t&&n.startsWith("Neo.ClientError.Security.")?this._authTokenManager.handleSecurityException(t.authToken,n):!1},e}();Y_.default=kq;var Z_={},Mq=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(l){try{s(n.next(l))}catch(d){a(d)}}function c(l){try{s(n.throw(l))}catch(d){a(d)}}function s(l){l.done?i(l.value):o(l.value).then(u,c)}s((n=n.apply(e,r||[])).next())})},Dq=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(t=0)),t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(Z_,"__esModule",{value:!0});var Lq=function(){function e(r){var t=r.connectionLivenessCheckTimeout;this._connectionLivenessCheckTimeout=t}return e.prototype.check=function(r){return Mq(this,void 0,void 0,function(){var t;return Dq(this,function(n){switch(n.label){case 0:return this._isCheckDisabled||this._isNewlyCreatedConnection(r)?[2,!0]:(t=Date.now()-r.idleTimestamp,this._connectionLivenessCheckTimeout===0||t>this._connectionLivenessCheckTimeout?[4,r.resetAndFlush().then(function(){return!0})]:[3,2]);case 1:return[2,n.sent()];case 2:return[2,!0]}})})},Object.defineProperty(e.prototype,"_isCheckDisabled",{get:function(){return this._connectionLivenessCheckTimeout==null||this._connectionLivenessCheckTimeout<0},enumerable:!1,configurable:!0}),e.prototype._isNewlyCreatedConnection=function(r){return r.authToken==null},e}();Z_.default=Lq;var Q_={},Uq=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(l){try{s(n.next(l))}catch(d){a(d)}}function c(l){try{s(n.throw(l))}catch(d){a(d)}}function s(l){l.done?i(l.value):o(l.value).then(u,c)}s((n=n.apply(e,r||[])).next())})},Fq=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(t=0)),t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(Q_,"__esModule",{value:!0});var xq=no,Bq=function(){function e(r){var t=r.clientCertificateProvider,n=r.loader;this._clientCertificateProvider=t,this._loader=n||xq.ClientCertificatesLoader,this._clientCertificate=null}return e.prototype.getClientCertificate=function(){return Uq(this,void 0,void 0,function(){var r,t,n=this;return Fq(this,function(o){switch(o.label){case 0:return r=this._clientCertificateProvider!=null,r?(t=this._clientCertificate==null,t?[3,2]:[4,this._clientCertificateProvider.hasUpdate()]):[3,3];case 1:t=o.sent(),o.label=2;case 2:r=t,o.label=3;case 3:return r&&(this._clientCertificate=Promise.resolve(this._clientCertificateProvider.getClientCertificate()).then(this._loader.load).then(function(i){return n._clientCertificate=i,n._clientCertificate}).catch(function(i){throw n._clientCertificate=null,i})),[2,this._clientCertificate]}})})},e}();Q_.default=Bq;var Vq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Sn=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(l){try{s(n.next(l))}catch(d){a(d)}}function c(l){try{s(n.throw(l))}catch(d){a(d)}}function s(l){l.done?i(l.value):o(l.value).then(u,c)}s((n=n.apply(e,r||[])).next())})},Tn=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(t=0)),t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Wq=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},zq=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))},X_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hu,"__esModule",{value:!0});var Ig=md,To=G,Hq=X_(Y_),qq=Qt,Gq=X_(Z_),Kq=X_(Q_),Yq=To.error.SERVICE_UNAVAILABLE,Zq=["Neo.ClientError.Security.CredentialsExpired","Neo.ClientError.Security.Forbidden","Neo.ClientError.Security.TokenExpired","Neo.ClientError.Security.Unauthorized"],IE=To.internal.pool,Rg=IE.Pool,Qq=IE.PoolConfig,Xq=function(e){Vq(r,e);function r(t,n){var o=t.id,i=t.config,a=t.log,u=t.userAgent,c=t.boltAgent,s=t.authTokenManager,l=t.newPool,d=l===void 0?function(){for(var p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];return new(Rg.bind.apply(Rg,zq([void 0],Wq(p),!1)))}:l;n===void 0&&(n=null);var h=e.call(this)||this;return h._id=o,h._config=i,h._log=a,h._clientCertificateHolder=new Kq.default({clientCertificateProvider:h._config.clientCertificate}),h._authenticationProvider=new Hq.default({authTokenManager:s,userAgent:u,boltAgent:c}),h._livenessCheckProvider=new Gq.default({connectionLivenessCheckTimeout:i.connectionLivenessCheckTimeout}),h._userAgent=u,h._boltAgent=c,h._createChannelConnection=n||function(p){return Sn(h,void 0,void 0,function(){var v,_;return Tn(this,function(b){switch(b.label){case 0:return v=Ig.createChannelConnection,_=[p,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,v.apply(void 0,_.concat([b.sent()]))]}})})},h._connectionPool=d({create:h._createConnection.bind(h),destroy:h._destroyConnection.bind(h),validateOnAcquire:h._validateConnectionOnAcquire.bind(h),validateOnRelease:h._validateConnectionOnRelease.bind(h),installIdleObserver:r._installIdleObserverOnConnection.bind(h),removeIdleObserver:r._removeIdleObserverOnConnection.bind(h),config:Qq.fromDriverConfig(i),log:h._log}),h._openConnections={},h}return r.prototype._createConnectionErrorHandler=function(){return new Ig.ConnectionErrorHandler(Yq)},r.prototype._getClientCertificate=function(){return Sn(this,void 0,void 0,function(){return Tn(this,function(t){return[2,this._config.clientCertificate.getClientCertificate()]})})},r.prototype._createConnection=function(t,n,o){var i=this,a=t.auth;return this._createChannelConnection(n).then(function(u){return u.release=function(){return u.idleTimestamp=Date.now(),o(n,u)},i._openConnections[u.id]=u,i._authenticationProvider.authenticate({connection:u,auth:a}).catch(function(c){throw i._destroyConnection(u),c})})},r.prototype._validateConnectionOnAcquire=function(t,n){var o=t.auth,i=t.skipReAuth;return Sn(this,void 0,void 0,function(){var a,u;return Tn(this,function(c){switch(c.label){case 0:if(!this._validateConnection(n))return[2,!1];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this._livenessCheckProvider.check(n)];case 2:return c.sent(),[3,4];case 3:return a=c.sent(),this._log.debug("The connection ".concat(n.id," is not alive because of an error ").concat(a.code," '").concat(a.message,"'")),[2,!1];case 4:return c.trys.push([4,6,,7]),[4,this._authenticationProvider.authenticate({connection:n,auth:o,skipReAuth:i})];case 5:return c.sent(),[2,!0];case 6:return u=c.sent(),this._log.debug("The connection ".concat(n.id," is not valid because of an error ").concat(u.code," '").concat(u.message,"'")),[2,!1];case 7:return[2]}})})},r.prototype._validateConnectionOnRelease=function(t){return t._sticky!==!0&&this._validateConnection(t)},r.prototype._validateConnection=function(t){if(!t.isOpen())return!1;var n=this._config.maxConnectionLifetime,o=Date.now()-t.creationTimestamp;return!(o>n)},r.prototype._destroyConnection=function(t){return delete this._openConnections[t.id],t.close()},r.prototype._verifyConnectivityAndGetServerVersion=function(t){var n=t.address;return Sn(this,void 0,void 0,function(){var o,i;return Tn(this,function(a){switch(a.label){case 0:return[4,this._connectionPool.acquire({},n)];case 1:o=a.sent(),i=new To.ServerInfo(o.server,o.protocol().version),a.label=2;case 2:return a.trys.push([2,,5,7]),o.protocol().isLastMessageLogon()?[3,4]:[4,o.resetAndFlush()];case 3:a.sent(),a.label=4;case 4:return[3,7];case 5:return[4,o.release()];case 6:return a.sent(),[7];case 7:return[2,i]}})})},r.prototype._verifyAuthentication=function(t){var n=t.getAddress,o=t.auth;return Sn(this,void 0,void 0,function(){var i,a,u,c,s,l;return Tn(this,function(d){switch(d.label){case 0:i=[],d.label=1;case 1:return d.trys.push([1,8,9,11]),[4,n()];case 2:return a=d.sent(),[4,this._connectionPool.acquire({auth:o,skipReAuth:!0},a)];case 3:if(u=d.sent(),i.push(u),c=!u.protocol().isLastMessageLogon(),!u.supportsReAuth)throw(0,To.newError)("Driver is connected to a database that does not support user switch.");return c&&u.supportsReAuth?[4,this._authenticationProvider.authenticate({connection:u,auth:o,waitReAuth:!0,forceReAuth:!0})]:[3,5];case 4:return d.sent(),[3,7];case 5:return c&&!u.supportsReAuth?[4,this._connectionPool.acquire({auth:o},a,{requireNew:!0})]:[3,7];case 6:s=d.sent(),s._sticky=!0,i.push(s),d.label=7;case 7:return[2,!0];case 8:if(l=d.sent(),Zq.includes(l.code))return[2,!1];throw l;case 9:return[4,Promise.all(i.map(function(h){return h.release()}))];case 10:return d.sent(),[7];case 11:return[2]}})})},r.prototype._verifyStickyConnection=function(t){var n=t.auth,o=t.connection;return t.address,Sn(this,void 0,void 0,function(){var i,a;return Tn(this,function(u){switch(u.label){case 0:return i=qq.object.equals(n,o.authToken),a=!i,o._sticky=i&&!o.supportsReAuth,a||o._sticky?[4,o.release()]:[3,2];case 1:throw u.sent(),(0,To.newError)("Driver is connected to a database that does not support user switch.");case 2:return[2]}})})},r.prototype.close=function(){return Sn(this,void 0,void 0,function(){return Tn(this,function(t){switch(t.label){case 0:return[4,this._connectionPool.close()];case 1:return t.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(n){return n.close()}))];case 2:return t.sent(),[2]}})})},r._installIdleObserverOnConnection=function(t,n){t._setIdle(n)},r._removeIdleObserverOnConnection=function(t){t._unsetIdle()},r.prototype._handleSecurityError=function(t,n,o){var i=this._authenticationProvider.handleError({connection:o,code:t.code});return i&&(t.retriable=!0),t.code==="Neo.ClientError.Security.AuthorizationExpired"&&this._connectionPool.apply(n,function(a){a.authToken=null}),o&&o.close().catch(function(){}),t},r}(To.ConnectionProvider);Hu.default=Xq;var J_={},Jq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rr=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(l){try{s(n.next(l))}catch(d){a(d)}}function c(l){try{s(n.throw(l))}catch(d){a(d)}}function s(l){l.done?i(l.value):o(l.value).then(u,c)}s((n=n.apply(e,r||[])).next())})},jr=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(t=0)),t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},e9=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(J_,"__esModule",{value:!0});var t9=e9(Hu),jg=md,RE=G,gd=RE.internal.constants,r9=gd.BOLT_PROTOCOL_V3,n9=gd.BOLT_PROTOCOL_V4_0,o9=gd.BOLT_PROTOCOL_V4_4,i9=gd.BOLT_PROTOCOL_V5_1,a9=RE.error.SERVICE_UNAVAILABLE,s9=function(e){Jq(r,e);function r(t){var n=t.id,o=t.config,i=t.log,a=t.address,u=t.userAgent,c=t.boltAgent,s=t.authTokenManager,l=t.newPool,d=e.call(this,{id:n,config:o,log:i,userAgent:u,boltAgent:c,authTokenManager:s,newPool:l})||this;return d._address=a,d}return r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t;n.accessMode;var o=n.database;n.bookmarks;var i=n.auth,a=n.forceReAuth;return Rr(this,void 0,void 0,function(){var u,c,s=this;return jr(this,function(l){switch(l.label){case 0:return u=jg.ConnectionErrorHandler.create({errorCode:a9,handleSecurityError:function(d,h,p){return s._handleSecurityError(d,h,p,o)}}),[4,this._connectionPool.acquire({auth:i,forceReAuth:a},this._address)];case 1:return c=l.sent(),i?[4,this._verifyStickyConnection({auth:i,connection:c,address:this._address})]:[3,3];case 2:return l.sent(),[2,c];case 3:return[2,new jg.DelegateConnection(c,u)]}})})},r.prototype._handleSecurityError=function(t,n,o,i){return this._log.warn("Direct driver ".concat(this._id," will close connection to ").concat(n," for database '").concat(i,"' because of an error ").concat(t.code," '").concat(t.message,"'")),e.prototype._handleSecurityError.call(this,t,n,o)},r.prototype._hasProtocolVersion=function(t){return Rr(this,void 0,void 0,function(){var n,o;return jr(this,function(i){switch(i.label){case 0:return[4,this._createChannelConnection(this._address)];case 1:return n=i.sent(),o=n.protocol()?n.protocol().version:null,[4,n.close()];case 2:return i.sent(),o?[2,t(o)]:[2,!1]}})})},r.prototype.supportsMultiDb=function(){return Rr(this,void 0,void 0,function(){return jr(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=n9})];case 1:return[2,t.sent()]}})})},r.prototype.getNegotiatedProtocolVersion=function(){var t=this;return new Promise(function(n,o){t._hasProtocolVersion(n).catch(o)})},r.prototype.supportsTransactionConfig=function(){return Rr(this,void 0,void 0,function(){return jr(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=r9})];case 1:return[2,t.sent()]}})})},r.prototype.supportsUserImpersonation=function(){return Rr(this,void 0,void 0,function(){return jr(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=o9})];case 1:return[2,t.sent()]}})})},r.prototype.supportsSessionAuth=function(){return Rr(this,void 0,void 0,function(){return jr(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=i9})];case 1:return[2,t.sent()]}})})},r.prototype.verifyAuthentication=function(t){var n=t.auth;return Rr(this,void 0,void 0,function(){var o=this;return jr(this,function(i){return[2,this._verifyAuthentication({auth:n,getAddress:function(){return o._address}})]})})},r.prototype.verifyConnectivityAndGetServerInfo=function(){return Rr(this,void 0,void 0,function(){return jr(this,function(t){switch(t.label){case 0:return[4,this._verifyConnectivityAndGetServerVersion({address:this._address})];case 1:return[2,t.sent()]}})})},r}(t9.default);J_.default=s9;var ey={},qn={},ty={},Ci={},Op=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Ep=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.createValidRoutingTable=void 0;var Ot=G,jE=Ot.internal.constants,u9=jE.ACCESS_MODE_WRITE,c9=jE.ACCESS_MODE_READ,Sp=Ot.internal.serverAddress.ServerAddress,ry=Ot.error.PROTOCOL_ERROR,l9=1,$E=function(){function e(r){var t=r===void 0?{}:r,n=t.database,o=t.routers,i=t.readers,a=t.writers,u=t.expirationTime,c=t.ttl;this.database=n||null,this.databaseName=n||"default database",this.routers=o||[],this.readers=i||[],this.writers=a||[],this.expirationTime=u||(0,Ot.int)(0),this.ttl=c}return e.fromRawRoutingTable=function(r,t,n){return NE(r,t,n)},e.prototype.forget=function(r){this.readers=_c(this.readers,r),this.writers=_c(this.writers,r)},e.prototype.forgetRouter=function(r){this.routers=_c(this.routers,r)},e.prototype.forgetWriter=function(r){this.writers=_c(this.writers,r)},e.prototype.isStaleFor=function(r){return this.expirationTime.lessThan(Date.now())||this.routers.length<l9||r===c9&&this.readers.length===0||r===u9&&this.writers.length===0},e.prototype.isExpiredFor=function(r){return this.expirationTime.add(r).lessThan(Date.now())},e.prototype.allServers=function(){return Ep(Ep(Ep([],Op(this.routers),!1),Op(this.readers),!1),Op(this.writers),!1)},e.prototype.toString=function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")},e}();Ci.default=$E;function _c(e,r){return e.filter(function(t){return t.asKey()!==r.asKey()})}function NE(e,r,t){var n=t.ttl,o=d9(t,r),i=f9(t,r),a=i.routers,u=i.readers,c=i.writers;return $g(a,"routers",r),$g(u,"readers",r),new $E({database:e||t.db,routers:a,readers:u,writers:c,expirationTime:o,ttl:n})}Ci.createValidRoutingTable=NE;function f9(e,r){try{var t=[],n=[],o=[];return e.servers.forEach(function(i){var a=i.role,u=i.addresses;a==="ROUTE"?t=Tp(u).map(function(c){return Sp.fromUrl(c)}):a==="WRITE"?o=Tp(u).map(function(c){return Sp.fromUrl(c)}):a==="READ"&&(n=Tp(u).map(function(c){return Sp.fromUrl(c)}))}),{routers:t,readers:n,writers:o}}catch(i){throw(0,Ot.newError)("Unable to parse servers entry from router ".concat(r,` from addresses:
`).concat(Ot.json.stringify(e.servers),`
Error message: `).concat(i.message),ry)}}function d9(e,r){try{var t=(0,Ot.int)(Date.now()),n=(0,Ot.int)(e.ttl).multiply(1e3).add(t);return n.lessThan(t)?Ot.Integer.MAX_VALUE:n}catch(o){throw(0,Ot.newError)("Unable to parse TTL entry from router ".concat(r,` from raw routing table:
`).concat(Ot.json.stringify(e),`
Error message: `).concat(o.message),ry)}}function $g(e,r,t){if(e.length===0)throw(0,Ot.newError)("Received no "+r+" from router "+t,ry)}function Tp(e){if(!Array.isArray(e))throw new TypeError("Array expected but got: "+e);return Array.from(e)}var h9=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ty,"__esModule",{value:!0});var p9=h9(Ci),v9=function(){function e(r){this._routingContext=r}return e.prototype.lookupRoutingTableOnRouter=function(r,t,n,o){var i=this;return r._acquireConnection(function(a){return i._requestRawRoutingTable(a,r,t,n,o).then(function(u){return u.isNull?null:p9.default.fromRawRoutingTable(t,n,u)})})},e.prototype._requestRawRoutingTable=function(r,t,n,o,i){var a=this;return new Promise(function(u,c){r.protocol().requestRoutingInformation({routingContext:a._routingContext,databaseName:n,impersonatedUser:i,sessionContext:{bookmarks:t._lastBookmarks,mode:t._mode,database:t._database,afterComplete:t._onComplete},onCompleted:u,onError:c})})},e}();ty.default=v9;var kE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qn,"__esModule",{value:!0});qn.RoutingTable=qn.Rediscovery=void 0;var ME=kE(ty);qn.Rediscovery=ME.default;var _9=kE(Ci);qn.RoutingTable=_9.default;qn.default=ME.default;var y9=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Jc=f&&f.__assign||function(){return Jc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Jc.apply(this,arguments)},b9=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),m9=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),g9=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&b9(r,e,t);return m9(r,e),r},Pe=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(l){try{s(n.next(l))}catch(d){a(d)}}function c(l){try{s(n.throw(l))}catch(d){a(d)}}function s(l){l.done?i(l.value):o(l.value).then(u,c)}s((n=n.apply(e,r||[])).next())})},Ce=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(l){return c([s,l])}}function c(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(t=0)),t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Cv=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},cr=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},DE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ey,"__esModule",{value:!0});var Ke=G,Pp=g9(qn),w9=no,O9=DE(bd),E9=DE(Hu),S9=qr,Pn=md,T9=Qt,yc=Ke.error.SERVICE_UNAVAILABLE,Ji=Ke.error.SESSION_EXPIRED,P9=Ke.internal.bookmarks.Bookmarks,Ai=Ke.internal.constants,Ng=Ai.ACCESS_MODE_READ,bc=Ai.ACCESS_MODE_WRITE,C9=Ai.BOLT_PROTOCOL_V3,A9=Ai.BOLT_PROTOCOL_V4_0,I9=Ai.BOLT_PROTOCOL_V4_4,R9=Ai.BOLT_PROTOCOL_V5_1,j9="Neo.ClientError.Procedure.ProcedureNotFound",$9="Neo.ClientError.Database.DatabaseNotFound",N9="Neo.ClientError.Transaction.InvalidBookmark",k9="Neo.ClientError.Transaction.InvalidBookmarkMixture",M9="Neo.ClientError.Security.AuthorizationExpired",D9="Neo.ClientError.Statement.ArgumentError",L9="Neo.ClientError.Request.Invalid",U9="Neo.ClientError.Statement.TypeError",F9="N/A",x9="system",ea=null,B9=(0,Ke.int)(3e4),V9=function(e){y9(r,e);function r(t){var n=t.id,o=t.address,i=t.routingContext,a=t.hostNameResolver,u=t.config,c=t.log,s=t.userAgent,l=t.boltAgent,d=t.authTokenManager,h=t.routingTablePurgeDelay,p=t.newPool,v=e.call(this,{id:n,config:u,log:c,userAgent:s,boltAgent:l,authTokenManager:d,newPool:p},function(_){return Pe(v,void 0,void 0,function(){var b,w;return Ce(this,function(E){switch(E.label){case 0:return b=Pn.createChannelConnection,w=[_,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,b.apply(void 0,w.concat([E.sent(),this._routingContext,this._channelSsrCallback.bind(this)]))]}})})})||this;return v._routingContext=Jc(Jc({},i),{address:o.toString()}),v._seedRouter=o,v._rediscovery=new Pp.default(v._routingContext),v._loadBalancingStrategy=new S9.LeastConnectedLoadBalancingStrategy(v._connectionPool),v._hostNameResolver=a,v._dnsResolver=new w9.HostNameResolver,v._log=c,v._useSeedRouter=!0,v._routingTableRegistry=new W9(h?(0,Ke.int)(h):B9),v._refreshRoutingTable=T9.functional.reuseOngoingRequest(v._refreshRoutingTable,v),v._withSSR=0,v._withoutSSR=0,v}return r.prototype._createConnectionErrorHandler=function(){return new Pn.ConnectionErrorHandler(Ji)},r.prototype._handleUnavailability=function(t,n,o){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(n," for database '").concat(o,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forget(n,o||ea),t},r.prototype._handleSecurityError=function(t,n,o,i){return this._log.warn("Routing driver ".concat(this._id," will close connections to ").concat(n," for database '").concat(i,"' because of an error ").concat(t.code," '").concat(t.message,"'")),e.prototype._handleSecurityError.call(this,t,n,o,i)},r.prototype._handleWriteFailure=function(t,n,o){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(n," for database '").concat(o,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forgetWriter(n,o||ea),(0,Ke.newError)("No longer possible to write to server at "+n,Ji,t)},r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t,o=n.accessMode,i=n.database,a=n.bookmarks,u=n.impersonatedUser,c=n.onDatabaseNameResolved,s=n.auth,l=n.homeDb;return Pe(this,void 0,void 0,function(){var d,h,p,v,_,b=this;return Ce(this,function(w){switch(w.label){case 0:return d={database:i||ea},h=new Pn.ConnectionErrorHandler(Ji,function(E,S){return b._handleUnavailability(E,S,d.database)},function(E,S){return b._handleWriteFailure(E,S,l??d.database)},function(E,S,O){return b._handleSecurityError(E,S,O,d.database)}),this.SSREnabled()&&l!==void 0&&i===""?(v=this._routingTableRegistry.get(l,function(){return new Pp.RoutingTable({database:l})}),v&&!v.isStaleFor(o)?[4,this.getConnectionFromRoutingTable(v,s,o,h)]:[3,2]):[3,2];case 1:if(p=w.sent(),this.SSREnabled())return[2,p];p.release(),w.label=2;case 2:return[4,this._freshRoutingTable({accessMode:o,database:d.database,bookmarks:a,impersonatedUser:u,auth:s,onDatabaseNameResolved:function(E){d.database=d.database||E,c&&c(E)}})];case 3:return _=w.sent(),[2,this.getConnectionFromRoutingTable(_,s,o,h)]}})})},r.prototype.getConnectionFromRoutingTable=function(t,n,o,i){return Pe(this,void 0,void 0,function(){var a,u,c,s,l;return Ce(this,function(d){switch(d.label){case 0:if(o===Ng)u=this._loadBalancingStrategy.selectReader(t.readers),a="read";else if(o===bc)u=this._loadBalancingStrategy.selectWriter(t.writers),a="write";else throw(0,Ke.newError)("Illegal mode "+o);if(!u)throw(0,Ke.newError)("Failed to obtain connection towards ".concat(a," server. Known routing table is: ").concat(t),Ji);d.label=1;case 1:return d.trys.push([1,5,,6]),[4,this._connectionPool.acquire({auth:n},u)];case 2:return c=d.sent(),n?[4,this._verifyStickyConnection({auth:n,connection:c,address:u})]:[3,4];case 3:return d.sent(),[2,c];case 4:return[2,new Pn.DelegateConnection(c,i)];case 5:throw s=d.sent(),l=i.handleAndTransformError(s,u),l;case 6:return[2]}})})},r.prototype._hasProtocolVersion=function(t){return Pe(this,void 0,void 0,function(){var n,o,i,a,u,c;return Ce(this,function(s){switch(s.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:n=s.sent(),i=0,s.label=2;case 2:if(!(i<n.length))return[3,8];s.label=3;case 3:return s.trys.push([3,6,,7]),[4,this._createChannelConnection(n[i])];case 4:return a=s.sent(),u=a.protocol()?a.protocol().version:null,[4,a.close()];case 5:return s.sent(),u?[2,t(u)]:[2,!1];case 6:return c=s.sent(),o=c,[3,7];case 7:return i++,[3,2];case 8:if(o)throw o;return[2,!1]}})})},r.prototype.supportsMultiDb=function(){return Pe(this,void 0,void 0,function(){return Ce(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=A9})];case 1:return[2,t.sent()]}})})},r.prototype.supportsTransactionConfig=function(){return Pe(this,void 0,void 0,function(){return Ce(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=C9})];case 1:return[2,t.sent()]}})})},r.prototype.supportsUserImpersonation=function(){return Pe(this,void 0,void 0,function(){return Ce(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=I9})];case 1:return[2,t.sent()]}})})},r.prototype.supportsSessionAuth=function(){return Pe(this,void 0,void 0,function(){return Ce(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=R9})];case 1:return[2,t.sent()]}})})},r.prototype.getNegotiatedProtocolVersion=function(){var t=this;return new Promise(function(n,o){t._hasProtocolVersion(n).catch(o)})},r.prototype.verifyAuthentication=function(t){var n=t.database,o=t.accessMode,i=t.auth;return Pe(this,void 0,void 0,function(){var a=this;return Ce(this,function(u){return[2,this._verifyAuthentication({auth:i,getAddress:function(){return Pe(a,void 0,void 0,function(){var c,s,l;return Ce(this,function(d){switch(d.label){case 0:return c={database:n||ea},[4,this._freshRoutingTable({accessMode:o,database:c.database,auth:i,onDatabaseNameResolved:function(h){c.database=c.database||h}})];case 1:if(s=d.sent(),l=o===bc?s.writers:s.readers,l.length===0)throw(0,Ke.newError)("No servers available for database '".concat(c.database,"' with access mode '").concat(o,"'"),yc);return[2,l[0]]}})})}})]})})},r.prototype.verifyConnectivityAndGetServerInfo=function(t){var n=t.database,o=t.accessMode;return Pe(this,void 0,void 0,function(){var i,a,u,c,s,l,d,h,p,v,_,b;return Ce(this,function(w){switch(w.label){case 0:return i={database:n||ea},[4,this._freshRoutingTable({accessMode:o,database:i.database,onDatabaseNameResolved:function(E){i.database=i.database||E}})];case 1:a=w.sent(),u=o===bc?a.writers:a.readers,c=(0,Ke.newError)("No servers available for database '".concat(i.database,"' with access mode '").concat(o,"'"),yc),w.label=2;case 2:w.trys.push([2,9,10,11]),s=Cv(u),l=s.next(),w.label=3;case 3:if(l.done)return[3,8];d=l.value,w.label=4;case 4:return w.trys.push([4,6,,7]),[4,this._verifyConnectivityAndGetServerVersion({address:d})];case 5:return h=w.sent(),[2,h];case 6:return p=w.sent(),c=p,[3,7];case 7:return l=s.next(),[3,3];case 8:return[3,11];case 9:return v=w.sent(),_={error:v},[3,11];case 10:try{l&&!l.done&&(b=s.return)&&b.call(s)}finally{if(_)throw _.error}return[7];case 11:throw c}})})},r.prototype.forget=function(t,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(o){return o.forget(t)}}),this._connectionPool.purge(t).catch(function(){})},r.prototype.forgetWriter=function(t,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(o){return o.forgetWriter(t)}})},r.prototype._freshRoutingTable=function(t){var n=t===void 0?{}:t,o=n.accessMode,i=n.database,a=n.bookmarks,u=n.impersonatedUser,c=n.onDatabaseNameResolved,s=n.auth,l=this._routingTableRegistry.get(i,function(){return new Pp.RoutingTable({database:i})});return l.isStaleFor(o)?(this._log.info('Routing table is stale for database: "'.concat(i,'" and access mode: "').concat(o,'": ').concat(l)),this._refreshRoutingTable(l,a,u,s).then(function(d){return c(d.database),d})):l},r.prototype._refreshRoutingTable=function(t,n,o,i){var a=t.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(a,t,n,o,i):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(a,t,n,o,i)},r.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(t,n,o,i,a){return Pe(this,void 0,void 0,function(){var u,c,s,l,d,h,p;return Ce(this,function(v){switch(v.label){case 0:return u=[],[4,this._fetchRoutingTableUsingSeedRouter(u,this._seedRouter,n,o,i,a)];case 1:return c=cr.apply(void 0,[v.sent(),2]),s=c[0],l=c[1],s?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(t,n,o,i,a)];case 3:d=cr.apply(void 0,[v.sent(),2]),h=d[0],p=d[1],s=h,l=p||l,v.label=4;case 4:return[4,this._applyRoutingTableIfPossible(n,s,l)];case 5:return[2,v.sent()]}})})},r.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(t,n,o,i,a){return Pe(this,void 0,void 0,function(){var u,c,s,l;return Ce(this,function(d){switch(d.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(t,n,o,i,a)];case 1:return u=cr.apply(void 0,[d.sent(),2]),c=u[0],s=u[1],c?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(t,this._seedRouter,n,o,i,a)];case 2:l=cr.apply(void 0,[d.sent(),2]),c=l[0],s=l[1],d.label=3;case 3:return[4,this._applyRoutingTableIfPossible(n,c,s)];case 4:return[2,d.sent()]}})})},r.prototype._fetchRoutingTableUsingKnownRouters=function(t,n,o,i,a){return Pe(this,void 0,void 0,function(){var u,c,s,l;return Ce(this,function(d){switch(d.label){case 0:return[4,this._fetchRoutingTable(t,n,o,i,a)];case 1:return u=cr.apply(void 0,[d.sent(),2]),c=u[0],s=u[1],c?[2,[c,null]]:(l=t.length-1,r._forgetRouter(n,t,l),[2,[null,s]])}})})},r.prototype._fetchRoutingTableUsingSeedRouter=function(t,n,o,i,a,u){return Pe(this,void 0,void 0,function(){var c,s;return Ce(this,function(l){switch(l.label){case 0:return[4,this._resolveSeedRouter(n)];case 1:return c=l.sent(),s=c.filter(function(d){return t.indexOf(d)<0}),[4,this._fetchRoutingTable(s,o,i,a,u)];case 2:return[2,l.sent()]}})})},r.prototype._resolveSeedRouter=function(t){return Pe(this,void 0,void 0,function(){var n,o,i=this;return Ce(this,function(a){switch(a.label){case 0:return[4,this._hostNameResolver.resolve(t)];case 1:return n=a.sent(),[4,Promise.all(n.map(function(u){return i._dnsResolver.resolve(u)}))];case 2:return o=a.sent(),[2,[].concat.apply([],o)]}})})},r.prototype._fetchRoutingTable=function(t,n,o,i,a){return Pe(this,void 0,void 0,function(){var u=this;return Ce(this,function(c){return[2,t.reduce(function(s,l,d){return Pe(u,void 0,void 0,function(){var h,p,v,_,b,w,E;return Ce(this,function(S){switch(S.label){case 0:return[4,s];case 1:return h=cr.apply(void 0,[S.sent(),1]),p=h[0],p?[2,[p,null]]:(v=d-1,r._forgetRouter(n,t,v),[4,this._createSessionForRediscovery(l,o,i,a)]);case 2:if(_=cr.apply(void 0,[S.sent(),2]),b=_[0],w=_[1],!b)return[3,8];S.label=3;case 3:return S.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(b,n.database,l,i)];case 4:return[2,[S.sent(),null]];case 5:return E=S.sent(),[2,this._handleRediscoveryError(E,l)];case 6:return b.close(),[7];case 7:return[3,9];case 8:return[2,[null,w]];case 9:return[2]}})})},Promise.resolve([null,null]))]})})},r.prototype._createSessionForRediscovery=function(t,n,o,i){return Pe(this,void 0,void 0,function(){var a,u,c,s,l,d,h=this;return Ce(this,function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),[4,this._connectionPool.acquire({auth:i},t)];case 1:return a=p.sent(),i?[4,this._verifyStickyConnection({auth:i,connection:a,address:t})]:[3,3];case 2:p.sent(),p.label=3;case 3:return u=Pn.ConnectionErrorHandler.create({errorCode:Ji,handleSecurityError:function(v,_,b){return h._handleSecurityError(v,_,b)}}),c=a._sticky?new Pn.DelegateConnection(a):new Pn.DelegateConnection(a,u),s=new O9.default(c),l=a.protocol().version,l<4?[2,[new Ke.Session({mode:bc,bookmarks:P9.empty(),connectionProvider:s}),null]]:[2,[new Ke.Session({mode:Ng,database:x9,bookmarks:n,connectionProvider:s,impersonatedUser:o}),null]];case 4:return d=p.sent(),[2,this._handleRediscoveryError(d,t)];case 5:return[2]}})})},r.prototype._handleRediscoveryError=function(t,n){if(z9(t)||H9(t))throw t;if(t.code===j9)throw(0,Ke.newError)("Server at ".concat(n.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),yc,t);return this._log.warn("unable to fetch routing table because of an error ".concat(t)),[null,t]},r.prototype._applyRoutingTableIfPossible=function(t,n,o){return Pe(this,void 0,void 0,function(){return Ce(this,function(i){switch(i.label){case 0:if(!n)throw(0,Ke.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(t),yc,o);return n.writers.length===0&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(n)];case 1:return i.sent(),[2,n]}})})},r.prototype._updateRoutingTable=function(t){return Pe(this,void 0,void 0,function(){return Ce(this,function(n){switch(n.label){case 0:return[4,this._connectionPool.keepAll(t.allServers())];case 1:return n.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(t),this._log.info("Updated routing table ".concat(t)),[2]}})})},r._forgetRouter=function(t,n,o){var i=n[o];t&&i&&t.forgetRouter(i)},r.prototype._channelSsrCallback=function(t,n){if(n==="OPEN")t===!0?this._withSSR=this._withSSR+1:this._withoutSSR=this._withoutSSR+1;else if(n==="CLOSE")t===!0?this._withSSR=this._withSSR-1:this._withoutSSR=this._withoutSSR-1;else throw(0,Ke.newError)("Channel SSR Callback invoked with action other than 'OPEN' or 'CLOSE'")},r.prototype.SSREnabled=function(){return this._withSSR>0&&this._withoutSSR===0},r}(E9.default);ey.default=V9;var W9=function(){function e(r){this._tables=new Map,this._routingTablePurgeDelay=r}return e.prototype.register=function(r){return this._tables.set(r.database,r),this},e.prototype.apply=function(r,t){var n=t===void 0?{}:t,o=n.applyWhenExists,i=n.applyWhenDontExists,a=i===void 0?function(){}:i;return this._tables.has(r)?o(this._tables.get(r)):typeof r=="string"||r===null?a():this._forEach(o),this},e.prototype.get=function(r,t){return this._tables.has(r)?this._tables.get(r):typeof t=="function"?t():t},e.prototype.removeExpired=function(){var r=this;return this._removeIf(function(t){return t.isExpiredFor(r._routingTablePurgeDelay)})},e.prototype._forEach=function(r){var t,n;try{for(var o=Cv(this._tables),i=o.next();!i.done;i=o.next()){var a=cr(i.value,2),u=a[1];r(u)}}catch(c){t={error:c}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return this},e.prototype._remove=function(r){return this._tables.delete(r),this},e.prototype._removeIf=function(r){var t,n;try{for(var o=Cv(this._tables),i=o.next();!i.done;i=o.next()){var a=cr(i.value,2),u=a[0],c=a[1];r(c)&&this._remove(u)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return this},e}();function z9(e){return[$9,N9,k9,D9,L9,U9,F9].includes(e.code)}function H9(e){return e.code.startsWith("Neo.ClientError.Security.")&&![M9].includes(e.code)}(function(e){var r=f&&f.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingConnectionProvider=e.DirectConnectionProvider=e.PooledConnectionProvider=e.SingleConnectionProvider=void 0;var t=bd;Object.defineProperty(e,"SingleConnectionProvider",{enumerable:!0,get:function(){return r(t).default}});var n=Hu;Object.defineProperty(e,"PooledConnectionProvider",{enumerable:!0,get:function(){return r(n).default}});var o=J_;Object.defineProperty(e,"DirectConnectionProvider",{enumerable:!0,get:function(){return r(o).default}});var i=ey;Object.defineProperty(e,"RoutingConnectionProvider",{enumerable:!0,get:function(){return r(i).default}})})(TE);(function(e){var r=f&&f.__createBinding||(Object.create?function(i,a,u,c){c===void 0&&(c=u);var s=Object.getOwnPropertyDescriptor(a,u);(!s||("get"in s?!a.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return a[u]}}),Object.defineProperty(i,c,s)}:function(i,a,u,c){c===void 0&&(c=u),i[c]=a[u]}),t=f&&f.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),n=f&&f.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var u in i)u!=="default"&&Object.prototype.hasOwnProperty.call(i,u)&&r(a,i,u);return t(a,i),a},o=f&&f.__exportStar||function(i,a){for(var u in i)u!=="default"&&!Object.prototype.hasOwnProperty.call(a,u)&&r(a,i,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.packstream=e.channel=e.buf=e.bolt=e.loadBalancing=void 0,e.loadBalancing=n(qr),e.bolt=n(O_),e.buf=n(oo),e.channel=n(no),e.packstream=n(et),o(TE,e)})(XO);(function(e){var r=f&&f.__awaiter||function(ee,be,Y,k){function T(C){return C instanceof Y?C:new Y(function(R){R(C)})}return new(Y||(Y=Promise))(function(C,R){function V(te){try{F(k.next(te))}catch(Z){R(Z)}}function H(te){try{F(k.throw(te))}catch(Z){R(Z)}}function F(te){te.done?C(te.value):T(te.value).then(V,H)}F((k=k.apply(ee,be||[])).next())})},t=f&&f.__generator||function(ee,be){var Y={label:0,sent:function(){if(C[0]&1)throw C[1];return C[1]},trys:[],ops:[]},k,T,C,R;return R={next:V(0),throw:V(1),return:V(2)},typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function V(F){return function(te){return H([F,te])}}function H(F){if(k)throw new TypeError("Generator is already executing.");for(;R&&(R=0,F[0]&&(Y=0)),Y;)try{if(k=1,T&&(C=F[0]&2?T.return:F[0]?T.throw||((C=T.return)&&C.call(T),0):T.next)&&!(C=C.call(T,F[1])).done)return C;switch(T=0,C&&(F=[F[0]&2,C.value]),F[0]){case 0:case 1:C=F;break;case 4:return Y.label++,{value:F[1],done:!1};case 5:Y.label++,T=F[1],F=[0];continue;case 7:F=Y.ops.pop(),Y.trys.pop();continue;default:if(C=Y.trys,!(C=C.length>0&&C[C.length-1])&&(F[0]===6||F[0]===2)){Y=0;continue}if(F[0]===3&&(!C||F[1]>C[0]&&F[1]<C[3])){Y.label=F[1];break}if(F[0]===6&&Y.label<C[1]){Y.label=C[1],C=F;break}if(C&&Y.label<C[2]){Y.label=C[2],Y.ops.push(F);break}C[2]&&Y.ops.pop(),Y.trys.pop();continue}F=be.call(ee,Y)}catch(te){F=[6,te],T=0}finally{k=C=0}if(F[0]&5)throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}},n=f&&f.__importDefault||function(ee){return ee&&ee.__esModule?ee:{default:ee}};Object.defineProperty(e,"__esModule",{value:!0}),e.UnboundRelationship=e.Relationship=e.Node=e.Record=e.ServerInfo=e.GqlStatusObject=e.Notification=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ResultSummary=e.RxResult=e.RxManagedTransaction=e.RxTransaction=e.RxSession=e.EagerResult=e.Result=e.ManagedTransaction=e.Transaction=e.Session=e.Driver=e.temporal=e.spatial=e.graph=e.error=e.routing=e.session=e.types=e.logging=e.auth=e.isRetryableError=e.Neo4jError=e.integer=e.isUnboundRelationship=e.isRelationship=e.isPathSegment=e.isPath=e.isNode=e.isDateTime=e.isLocalDateTime=e.isDate=e.isTime=e.isLocalTime=e.isDuration=e.isPoint=e.isInt=e.int=e.hasReachableServer=e.driver=e.authTokenManagers=void 0,e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.bookmarkManager=e.DateTime=e.LocalDateTime=e.Date=e.Time=e.LocalTime=e.Duration=e.Integer=e.Point=e.PathSegment=e.Path=void 0;var o=hr;Object.defineProperty(e,"Driver",{enumerable:!0,get:function(){return o.Driver}});var i=n(m_),a=G;Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return a.authTokenManagers}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return a.Neo4jError}}),Object.defineProperty(e,"isRetryableError",{enumerable:!0,get:function(){return a.isRetryableError}}),Object.defineProperty(e,"error",{enumerable:!0,get:function(){return a.error}}),Object.defineProperty(e,"Integer",{enumerable:!0,get:function(){return a.Integer}}),Object.defineProperty(e,"int",{enumerable:!0,get:function(){return a.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return a.isInt}}),Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return a.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return a.Point}}),Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return a.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return a.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return a.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return a.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return a.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return a.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return a.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return a.isLocalTime}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return a.isNode}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return a.isPath}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return a.isPathSegment}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return a.isRelationship}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return a.isTime}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return a.isUnboundRelationship}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return a.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return a.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return a.Time}}),Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return a.Node}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return a.Path}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return a.PathSegment}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return a.Relationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return a.UnboundRelationship}}),Object.defineProperty(e,"Record",{enumerable:!0,get:function(){return a.Record}}),Object.defineProperty(e,"ResultSummary",{enumerable:!0,get:function(){return a.ResultSummary}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return a.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return a.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return a.QueryStatistics}}),Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return a.Notification}}),Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return a.GqlStatusObject}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return a.ServerInfo}}),Object.defineProperty(e,"Result",{enumerable:!0,get:function(){return a.Result}}),Object.defineProperty(e,"EagerResult",{enumerable:!0,get:function(){return a.EagerResult}}),Object.defineProperty(e,"auth",{enumerable:!0,get:function(){return a.auth}}),Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return a.Session}}),Object.defineProperty(e,"Transaction",{enumerable:!0,get:function(){return a.Transaction}}),Object.defineProperty(e,"ManagedTransaction",{enumerable:!0,get:function(){return a.ManagedTransaction}}),Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return a.bookmarkManager}}),Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return a.routing}}),Object.defineProperty(e,"resultTransformers",{enumerable:!0,get:function(){return a.resultTransformers}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return a.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return a.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return a.notificationSeverityLevel}}),Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return a.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return a.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return a.notificationFilterMinimumSeverityLevel}}),Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return a.clientCertificateProviders}});var u=XO,c=n(Nl);e.RxSession=c.default;var s=n(Fu);e.RxTransaction=s.default;var l=n(_f);e.RxManagedTransaction=l.default;var d=n(Ei);e.RxResult=d.default;var h=a.internal.util,p=h.ENCRYPTION_ON,v=h.assertString,_=h.isEmptyObjectOrNull,b=a.internal.serverAddress.ServerAddress,w=a.internal.urlUtil,E="neo4j-javascript/"+i.default;function S(ee){return typeof ee=="object"&&ee!=null&&"getToken"in ee&&"handleSecurityException"in ee&&typeof ee.getToken=="function"&&typeof ee.handleSecurityException=="function"}function O(ee){if(S(ee))return ee;var be=ee;return be=be||{},be.scheme=be.scheme||"none",(0,a.staticAuthTokenManager)({authToken:be})}function A(ee,be,Y){Y===void 0&&(Y={}),v(ee,"Bolt URL");var k=w.parseDatabaseUrl(ee),T=!1,C=!1,R;switch(k.scheme){case"bolt":break;case"bolt+s":C=!0,R="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":C=!0,R="TRUST_ALL_CERTIFICATES";break;case"neo4j":T=!0;break;case"neo4j+s":C=!0,R="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",T=!0;break;case"neo4j+ssc":C=!0,R="TRUST_ALL_CERTIFICATES",T=!0;break;default:throw new Error("Unknown scheme: ".concat(k.scheme))}if(C){if("encrypted"in Y||"trust"in Y)throw new Error("Encryption/trust can only be configured either through URL or config, not both");Y.encrypted=p,Y.trust=R,Y.clientCertificate=(0,a.resolveCertificateProvider)(Y.clientCertificate)}var V=O(be);Y.userAgent=Y.userAgent||E,Y.boltAgent=a.internal.boltAgent.fromVersion(i.default);var H=b.fromUrl(k.hostAndPort),F={address:H,typename:T?"Routing":"Direct",routing:T};return new o.Driver(F,Y,te());function te(){if(T)return function(Z,se,y,P){return new u.RoutingConnectionProvider({id:Z,config:se,log:y,hostNameResolver:P,authTokenManager:V,address:H,userAgent:se.userAgent,boltAgent:se.boltAgent,routingContext:k.query})};if(!_(k.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(ee,"'"));return function(Z,se,y){return new u.DirectConnectionProvider({id:Z,config:se,log:y,authTokenManager:V,address:H,userAgent:se.userAgent,boltAgent:se.boltAgent})}}}e.driver=A;function $(ee,be){return r(this,void 0,void 0,function(){var Y;return t(this,function(k){switch(k.label){case 0:Y=A(ee,{scheme:"none",principal:"",credentials:""},be),k.label=1;case 1:return k.trys.push([1,,3,5]),[4,Y.getNegotiatedProtocolVersion()];case 2:return k.sent(),[2,!0];case 3:return[4,Y.close()];case 4:return k.sent(),[7];case 5:return[2]}})})}e.hasReachableServer=$;var I={console:function(ee){return{level:ee,logger:function(be,Y){return console.log("".concat(f.Date.now()," ").concat(be.toUpperCase()," ").concat(Y))}}}};e.logging=I;var L={Node:a.Node,Relationship:a.Relationship,UnboundRelationship:a.UnboundRelationship,PathSegment:a.PathSegment,Path:a.Path,Result:a.Result,EagerResult:a.EagerResult,ResultSummary:a.ResultSummary,Record:a.Record,Point:a.Point,Date:a.Date,DateTime:a.DateTime,Duration:a.Duration,LocalDateTime:a.LocalDateTime,LocalTime:a.LocalTime,Time:a.Time,Integer:a.Integer};e.types=L;var X={READ:o.READ,WRITE:o.WRITE};e.session=X;var ae={toNumber:a.toNumber,toString:a.toString,inSafeRange:a.inSafeRange};e.integer=ae;var _e={isPoint:a.isPoint};e.spatial=_e;var ne={isDuration:a.isDuration,isLocalTime:a.isLocalTime,isTime:a.isTime,isDate:a.isDate,isLocalDateTime:a.isLocalDateTime,isDateTime:a.isDateTime};e.temporal=ne;var ve={isNode:a.isNode,isPath:a.isPath,isPathSegment:a.isPathSegment,isRelationship:a.isRelationship,isUnboundRelationship:a.isUnboundRelationship};e.graph=ve;var it={authTokenManagers:a.authTokenManagers,driver:A,hasReachableServer:$,int:a.int,isInt:a.isInt,isPoint:a.isPoint,isDuration:a.isDuration,isLocalTime:a.isLocalTime,isTime:a.isTime,isDate:a.isDate,isLocalDateTime:a.isLocalDateTime,isDateTime:a.isDateTime,isNode:a.isNode,isPath:a.isPath,isPathSegment:a.isPathSegment,isRelationship:a.isRelationship,isUnboundRelationship:a.isUnboundRelationship,integer:ae,Neo4jError:a.Neo4jError,isRetryableError:a.isRetryableError,auth:a.auth,logging:I,types:L,session:X,routing:a.routing,error:a.error,graph:ve,spatial:_e,temporal:ne,Driver:o.Driver,Session:a.Session,Transaction:a.Transaction,ManagedTransaction:a.ManagedTransaction,Result:a.Result,EagerResult:a.EagerResult,RxSession:c.default,RxTransaction:s.default,RxManagedTransaction:l.default,RxResult:d.default,ResultSummary:a.ResultSummary,Plan:a.Plan,ProfiledPlan:a.ProfiledPlan,QueryStatistics:a.QueryStatistics,Notification:a.Notification,GqlStatusObject:a.GqlStatusObject,ServerInfo:a.ServerInfo,Record:a.Record,Node:a.Node,Relationship:a.Relationship,UnboundRelationship:a.UnboundRelationship,Path:a.Path,PathSegment:a.PathSegment,Point:a.Point,Integer:a.Integer,Duration:a.Duration,LocalTime:a.LocalTime,Time:a.Time,Date:a.Date,LocalDateTime:a.LocalDateTime,DateTime:a.DateTime,bookmarkManager:a.bookmarkManager,resultTransformers:a.resultTransformers,notificationCategory:a.notificationCategory,notificationSeverityLevel:a.notificationSeverityLevel,notificationFilterDisabledCategory:a.notificationFilterDisabledCategory,notificationFilterMinimumSeverityLevel:a.notificationFilterMinimumSeverityLevel,clientCertificateProviders:a.clientCertificateProviders};e.default=it})(Bp);function $r(e=0){return new Uint8Array(e)}function Yr(e=0){return new Uint8Array(e)}const q9=Math.pow(2,7),G9=Math.pow(2,14),K9=Math.pow(2,21),ny=Math.pow(2,28),oy=Math.pow(2,35),iy=Math.pow(2,42),ay=Math.pow(2,49),he=128,Ye=127;function rr(e){if(e<q9)return 1;if(e<G9)return 2;if(e<K9)return 3;if(e<ny)return 4;if(e<oy)return 5;if(e<iy)return 6;if(e<ay)return 7;if(Number.MAX_SAFE_INTEGER!=null&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function LE(e,r,t=0){switch(rr(e)){case 8:r[t++]=e&255|he,e/=128;case 7:r[t++]=e&255|he,e/=128;case 6:r[t++]=e&255|he,e/=128;case 5:r[t++]=e&255|he,e/=128;case 4:r[t++]=e&255|he,e>>>=7;case 3:r[t++]=e&255|he,e>>>=7;case 2:r[t++]=e&255|he,e>>>=7;case 1:{r[t++]=e&255,e>>>=7;break}default:throw new Error("unreachable")}return r}function Y9(e,r,t=0){switch(rr(e)){case 8:r.set(t++,e&255|he),e/=128;case 7:r.set(t++,e&255|he),e/=128;case 6:r.set(t++,e&255|he),e/=128;case 5:r.set(t++,e&255|he),e/=128;case 4:r.set(t++,e&255|he),e>>>=7;case 3:r.set(t++,e&255|he),e>>>=7;case 2:r.set(t++,e&255|he),e>>>=7;case 1:{r.set(t++,e&255),e>>>=7;break}default:throw new Error("unreachable")}return r}function UE(e,r){let t=e[r],n=0;if(n+=t&Ye,t<he||(t=e[r+1],n+=(t&Ye)<<7,t<he)||(t=e[r+2],n+=(t&Ye)<<14,t<he)||(t=e[r+3],n+=(t&Ye)<<21,t<he)||(t=e[r+4],n+=(t&Ye)*ny,t<he)||(t=e[r+5],n+=(t&Ye)*oy,t<he)||(t=e[r+6],n+=(t&Ye)*iy,t<he)||(t=e[r+7],n+=(t&Ye)*ay,t<he))return n;throw new RangeError("Could not decode varint")}function Z9(e,r){let t=e.get(r),n=0;if(n+=t&Ye,t<he||(t=e.get(r+1),n+=(t&Ye)<<7,t<he)||(t=e.get(r+2),n+=(t&Ye)<<14,t<he)||(t=e.get(r+3),n+=(t&Ye)<<21,t<he)||(t=e.get(r+4),n+=(t&Ye)*ny,t<he)||(t=e.get(r+5),n+=(t&Ye)*oy,t<he)||(t=e.get(r+6),n+=(t&Ye)*iy,t<he)||(t=e.get(r+7),n+=(t&Ye)*ay,t<he))return n;throw new RangeError("Could not decode varint")}function wd(e,r,t=0){return r==null&&(r=Yr(rr(e))),r instanceof Uint8Array?LE(e,r,t):Y9(e,r,t)}function Ku(e,r=0){return e instanceof Uint8Array?UE(e,r):Z9(e,r)}function mr(e,r){r==null&&(r=e.reduce((o,i)=>o+i.length,0));const t=Yr(r);let n=0;for(const o of e)t.set(o,n),n+=o.length;return t}const Q9=new Uint8Array(0);function coe(e){const r=e.match(/../g);return r!=null?new Uint8Array(r.map(t=>parseInt(t,16))):Q9}function X9(e,r){if(e===r)return!0;if(e.byteLength!==r.byteLength)return!1;for(let t=0;t<e.byteLength;t++)if(e[t]!==r[t])return!1;return!0}function Ii(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function J9(e){return new TextEncoder().encode(e)}function eG(e){return new TextDecoder().decode(e)}function tG(e,r){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),a=i.charCodeAt(0);if(t[a]!==255)throw new TypeError(i+" is ambiguous");t[a]=o}var u=e.length,c=e.charAt(0),s=Math.log(u)/Math.log(256),l=Math.log(256)/Math.log(u);function d(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var _=0,b=0,w=0,E=v.length;w!==E&&v[w]===0;)w++,_++;for(var S=(E-w)*l+1>>>0,O=new Uint8Array(S);w!==E;){for(var A=v[w],$=0,I=S-1;(A!==0||$<b)&&I!==-1;I--,$++)A+=256*O[I]>>>0,O[I]=A%u>>>0,A=A/u>>>0;if(A!==0)throw new Error("Non-zero carry");b=$,w++}for(var L=S-b;L!==S&&O[L]===0;)L++;for(var X=c.repeat(_);L<S;++L)X+=e.charAt(O[L]);return X}function h(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var _=0;if(v[_]!==" "){for(var b=0,w=0;v[_]===c;)b++,_++;for(var E=(v.length-_)*s+1>>>0,S=new Uint8Array(E);v[_];){var O=t[v.charCodeAt(_)];if(O===255)return;for(var A=0,$=E-1;(O!==0||A<w)&&$!==-1;$--,A++)O+=u*S[$]>>>0,S[$]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");w=A,_++}if(v[_]!==" "){for(var I=E-w;I!==E&&S[I]===0;)I++;for(var L=new Uint8Array(b+(E-I)),X=b;I!==E;)L[X++]=S[I++];return L}}}function p(v){var _=h(v);if(_)return _;throw new Error(`Non-${r} character`)}return{encode:d,decodeUnsafe:h,decode:p}}var rG=tG,nG=rG;let oG=class{constructor(r,t,n){m(this,"name");m(this,"prefix");m(this,"baseEncode");this.name=r,this.prefix=t,this.baseEncode=n}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}},iG=class{constructor(r,t,n){m(this,"name");m(this,"prefix");m(this,"baseDecode");m(this,"prefixCodePoint");this.name=r,this.prefix=t;const o=t.codePointAt(0);if(o===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=o,this.baseDecode=n}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return FE(this,r)}},aG=class{constructor(r){m(this,"decoders");this.decoders=r}or(r){return FE(this,r)}decode(r){const t=r[0],n=this.decoders[t];if(n!=null)return n.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function FE(e,r){return new aG({...e.decoders??{[e.prefix]:e},...r.decoders??{[r.prefix]:r}})}let sG=class{constructor(r,t,n,o){m(this,"name");m(this,"prefix");m(this,"baseEncode");m(this,"baseDecode");m(this,"encoder");m(this,"decoder");this.name=r,this.prefix=t,this.baseEncode=n,this.baseDecode=o,this.encoder=new oG(r,t,n),this.decoder=new iG(r,t,o)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}};function Od({name:e,prefix:r,encode:t,decode:n}){return new sG(e,r,t,n)}function Yu({name:e,prefix:r,alphabet:t}){const{encode:n,decode:o}=nG(t,e);return Od({prefix:r,name:e,encode:n,decode:i=>Ii(o(i))})}function uG(e,r,t,n){let o=e.length;for(;e[o-1]==="=";)--o;const i=new Uint8Array(o*t/8|0);let a=0,u=0,c=0;for(let s=0;s<o;++s){const l=r[e[s]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<t|l,a+=t,a>=8&&(a-=8,i[c++]=255&u>>a)}if(a>=t||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return i}function cG(e,r,t){const n=r[r.length-1]==="=",o=(1<<t)-1;let i="",a=0,u=0;for(let c=0;c<e.length;++c)for(u=u<<8|e[c],a+=8;a>t;)a-=t,i+=r[o&u>>a];if(a!==0&&(i+=r[o&u<<t-a]),n)for(;i.length*t&7;)i+="=";return i}function lG(e){const r={};for(let t=0;t<e.length;++t)r[e[t]]=t;return r}function He({name:e,prefix:r,bitsPerChar:t,alphabet:n}){const o=lG(n);return Od({prefix:r,name:e,encode(i){return cG(i,n,t)},decode(i){return uG(i,o,t,e)}})}const fG=Yu({prefix:"9",name:"base10",alphabet:"0123456789"}),dG=Object.freeze(Object.defineProperty({__proto__:null,base10:fG},Symbol.toStringTag,{value:"Module"})),hG=He({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),pG=He({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),vG=Object.freeze(Object.defineProperty({__proto__:null,base16:hG,base16upper:pG},Symbol.toStringTag,{value:"Module"})),_G=He({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),yG=Object.freeze(Object.defineProperty({__proto__:null,base2:_G},Symbol.toStringTag,{value:"Module"})),xE=Array.from(""),bG=xE.reduce((e,r,t)=>(e[t]=r,e),[]),mG=xE.reduce((e,r,t)=>{const n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);return e[n]=t,e},[]);function gG(e){return e.reduce((r,t)=>(r+=bG[t],r),"")}function wG(e){const r=[];for(const t of e){const n=t.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${t}`);const o=mG[n];if(o==null)throw new Error(`Non-base256emoji character: ${t}`);r.push(o)}return new Uint8Array(r)}const OG=Od({prefix:"",name:"base256emoji",encode:gG,decode:wG}),EG=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:OG},Symbol.toStringTag,{value:"Module"})),Fr=He({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),SG=He({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),TG=He({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),PG=He({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),CG=He({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),AG=He({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),IG=He({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),RG=He({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),jG=He({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),$G=Object.freeze(Object.defineProperty({__proto__:null,base32:Fr,base32hex:CG,base32hexpad:IG,base32hexpadupper:RG,base32hexupper:AG,base32pad:TG,base32padupper:PG,base32upper:SG,base32z:jG},Symbol.toStringTag,{value:"Module"})),$c=Yu({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),NG=Yu({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),kG=Object.freeze(Object.defineProperty({__proto__:null,base36:$c,base36upper:NG},Symbol.toStringTag,{value:"Module"})),De=Yu({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),MG=Yu({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),DG=Object.freeze(Object.defineProperty({__proto__:null,base58btc:De,base58flickr:MG},Symbol.toStringTag,{value:"Module"})),Ed=He({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),LG=He({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Sd=He({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),UG=He({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),FG=Object.freeze(Object.defineProperty({__proto__:null,base64:Ed,base64pad:LG,base64url:Sd,base64urlpad:UG},Symbol.toStringTag,{value:"Module"})),xG=He({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),BG=Object.freeze(Object.defineProperty({__proto__:null,base8:xG},Symbol.toStringTag,{value:"Module"})),VG=Od({prefix:"\0",name:"identity",encode:e=>eG(e),decode:e=>J9(e)}),WG=Object.freeze(Object.defineProperty({__proto__:null,identity:VG},Symbol.toStringTag,{value:"Module"})),zG=new TextEncoder,HG=new TextDecoder,qG="json",GG=512;function KG(e){return zG.encode(JSON.stringify(e))}function YG(e){return JSON.parse(HG.decode(e))}const ZG=Object.freeze(Object.defineProperty({__proto__:null,code:GG,decode:YG,encode:KG,name:qG},Symbol.toStringTag,{value:"Module"})),QG="raw",XG=85;function JG(e){return Ii(e)}function eK(e){return Ii(e)}const tK=Object.freeze(Object.defineProperty({__proto__:null,code:XG,decode:eK,encode:JG,name:QG},Symbol.toStringTag,{value:"Module"}));var rK=BE,kg=128,nK=-128,oK=Math.pow(2,31);function BE(e,r,t){r=r||[],t=t||0;for(var n=t;e>=oK;)r[t++]=e&255|kg,e/=128;for(;e&nK;)r[t++]=e&255|kg,e>>>=7;return r[t]=e|0,BE.bytes=t-n+1,r}var iK=Av,aK=128,Mg=127;function Av(e,n){var t=0,n=n||0,o=0,i=n,a,u=e.length;do{if(i>=u)throw Av.bytes=0,new RangeError("Could not decode varint");a=e[i++],t+=o<28?(a&Mg)<<o:(a&Mg)*Math.pow(2,o),o+=7}while(a>=aK);return Av.bytes=i-n,t}var sK=Math.pow(2,7),uK=Math.pow(2,14),cK=Math.pow(2,21),lK=Math.pow(2,28),fK=Math.pow(2,35),dK=Math.pow(2,42),hK=Math.pow(2,49),pK=Math.pow(2,56),vK=Math.pow(2,63),_K=function(e){return e<sK?1:e<uK?2:e<cK?3:e<lK?4:e<fK?5:e<dK?6:e<hK?7:e<pK?8:e<vK?9:10},yK={encode:rK,decode:iK,encodingLength:_K},el=yK;function Iv(e,r=0){return[el.decode(e,r),el.decode.bytes]}function tl(e,r,t=0){return el.encode(e,r,t),r}function rl(e){return el.encodingLength(e)}function Aa(e,r){const t=r.byteLength,n=rl(e),o=n+rl(t),i=new Uint8Array(o+t);return tl(e,i,0),tl(t,i,n),i.set(r,o),new uy(e,t,r,i)}function sy(e){const r=Ii(e),[t,n]=Iv(r),[o,i]=Iv(r.subarray(n)),a=r.subarray(n+i);if(a.byteLength!==o)throw new Error("Incorrect length");return new uy(t,o,a,r)}function bK(e,r){if(e===r)return!0;{const t=r;return e.code===t.code&&e.size===t.size&&t.bytes instanceof Uint8Array&&X9(e.bytes,t.bytes)}}let uy=class{constructor(r,t,n,o){m(this,"code");m(this,"size");m(this,"digest");m(this,"bytes");this.code=r,this.size=t,this.digest=n,this.bytes=o}};const VE=0,mK="identity",WE=Ii;function gK(e){return Aa(VE,WE(e))}const Zr={code:VE,name:mK,encode:WE,digest:gK},wK=Object.freeze(Object.defineProperty({__proto__:null,identity:Zr},Symbol.toStringTag,{value:"Module"}));function zE({name:e,code:r,encode:t}){return new OK(e,r,t)}class OK{constructor(r,t,n){m(this,"name");m(this,"code");m(this,"encode");this.name=r,this.code=t,this.encode=n}digest(r){if(r instanceof Uint8Array){const t=this.encode(r);return t instanceof Uint8Array?Aa(this.code,t):t.then(n=>Aa(this.code,n))}else throw Error("Unknown type, must be binary type")}}function HE(e){return async r=>new Uint8Array(await crypto.subtle.digest(e,r))}const cy=zE({name:"sha2-256",code:18,encode:HE("SHA-256")}),EK=zE({name:"sha2-512",code:19,encode:HE("SHA-512")}),SK=Object.freeze(Object.defineProperty({__proto__:null,sha256:cy,sha512:EK},Symbol.toStringTag,{value:"Module"}));function Dg(e,r){const{bytes:t,version:n}=e;switch(n){case 0:return PK(t,Rv(e),r??De.encoder);default:return CK(t,Rv(e),r??Fr.encoder)}}const Lg=new WeakMap;function Rv(e){const r=Lg.get(e);if(r==null){const t=new Map;return Lg.set(e,t),t}return r}var k0;let Q=class Ge{constructor(r,t,n,o){m(this,"code");m(this,"version");m(this,"multihash");m(this,"bytes");m(this,"/");m(this,k0,"CID");this.code=t,this.version=r,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:r,multihash:t}=this;if(r!==ta)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==AK)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ge.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:r,digest:t}=this.multihash,n=Aa(r,t);return Ge.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(r){return Ge.equals(this,r)}static equals(r,t){const n=t;return n!=null&&r.code===n.code&&r.version===n.version&&bK(r.multihash,n.multihash)}toString(r){return Dg(this,r)}toJSON(){return{"/":Dg(this)}}link(){return this}[(k0=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(r){if(r==null)return null;const t=r;if(t instanceof Ge)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){const{version:n,code:o,multihash:i,bytes:a}=t;return new Ge(n,o,i,a??Ug(n,o,i.bytes))}else if(t[IK]===!0){const{version:n,multihash:o,code:i}=t,a=sy(o);return Ge.create(n,i,a)}else return null}static create(r,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(r){case 0:{if(t!==ta)throw new Error(`Version 0 CID must use dag-pb (code: ${ta}) block encoding`);return new Ge(r,t,n,n.bytes)}case 1:{const o=Ug(r,t,n.bytes);return new Ge(r,t,n,o)}default:throw new Error("Invalid version")}}static createV0(r){return Ge.create(0,ta,r)}static createV1(r,t){return Ge.create(1,r,t)}static decode(r){const[t,n]=Ge.decodeFirst(r);if(n.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(r){const t=Ge.inspectBytes(r),n=t.size-t.multihashSize,o=Ii(r.subarray(n,n+t.multihashSize));if(o.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=o.subarray(t.multihashSize-t.digestSize),a=new uy(t.multihashCode,t.digestSize,i,o);return[t.version===0?Ge.createV0(a):Ge.createV1(t.codec,a),r.subarray(t.size)]}static inspectBytes(r){let t=0;const n=()=>{const[d,h]=Iv(r.subarray(t));return t+=h,d};let o=n(),i=ta;if(o===18?(o=0,t=0):i=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const a=t,u=n(),c=n(),s=t+c,l=s-a;return{version:o,codec:i,multihashCode:u,digestSize:c,multihashSize:l,size:s}}static parse(r,t){const[n,o]=TK(r,t),i=Ge.decode(o);if(i.version===0&&r[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Rv(i).set(n,r),i}};function TK(e,r){switch(e[0]){case"Q":{const t=r??De;return[De.prefix,t.decode(`${De.prefix}${e}`)]}case De.prefix:{const t=r??De;return[De.prefix,t.decode(e)]}case Fr.prefix:{const t=r??Fr;return[Fr.prefix,t.decode(e)]}case $c.prefix:{const t=r??$c;return[$c.prefix,t.decode(e)]}default:{if(r==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[e[0],r.decode(e)]}}}function PK(e,r,t){const{prefix:n}=t;if(n!==De.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const o=r.get(n);if(o==null){const i=t.encode(e).slice(1);return r.set(n,i),i}else return o}function CK(e,r,t){const{prefix:n}=t,o=r.get(n);if(o==null){const i=t.encode(e);return r.set(n,i),i}else return o}const ta=112,AK=18;function Ug(e,r,t){const n=rl(e),o=n+rl(r),i=new Uint8Array(o+t.byteLength);return tl(e,i,0),tl(r,i,n),i.set(t,o),i}const IK=Symbol.for("@ipld/js-cid/CID"),nl={...WG,...yG,...BG,...dG,...vG,...$G,...kG,...DG,...FG,...EG},RK={...SK,...wK},jK={raw:tK,json:ZG};function qE(e,r,t,n){return{name:e,prefix:r,encoder:{name:e,prefix:r,encode:t},decoder:{decode:n}}}const Fg=qE("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Cp=qE("ascii","a",e=>{let r="a";for(let t=0;t<e.length;t++)r+=String.fromCharCode(e[t]);return r},e=>{e=e.substring(1);const r=Yr(e.length);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return r}),GE={utf8:Fg,"utf-8":Fg,hex:nl.base16,latin1:Cp,ascii:Cp,binary:Cp,...nl};function we(e,r="utf8"){const t=GE[r];if(t==null)throw new Error(`Unsupported encoding "${r}"`);return t.encoder.encode(e).substring(1)}class $K{constructor(){m(this,"index",0);m(this,"input","")}new(r){return this.index=0,this.input=r,this}readAtomically(r){const t=this.index,n=r();return n===void 0&&(this.index=t),n}parseWith(r){const t=r();if(this.index===this.input.length)return t}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(r){return this.readAtomically(()=>{const t=this.readChar();if(t===r)return t})}readSeparator(r,t,n){return this.readAtomically(()=>{if(!(t>0&&this.readGivenChar(r)===void 0))return n()})}readNumber(r,t,n,o){return this.readAtomically(()=>{let i=0,a=0;const u=this.peekChar();if(u===void 0)return;const c=u==="0",s=2**(8*o)-1;for(;;){const l=this.readAtomically(()=>{const d=this.readChar();if(d===void 0)return;const h=Number.parseInt(d,r);if(!Number.isNaN(h))return h});if(l===void 0)break;if(i*=r,i+=l,i>s||(a+=1,t!==void 0&&a>t))return}if(a!==0)return!n&&c&&a>1?void 0:i})}readIPv4Addr(){return this.readAtomically(()=>{const r=new Uint8Array(4);for(let t=0;t<r.length;t++){const n=this.readSeparator(".",t,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;r[t]=n}return r})}readIPv6Addr(){const r=t=>{for(let n=0;n<t.length/2;n++){const o=n*2;if(n<t.length-3){const a=this.readSeparator(":",n,()=>this.readIPv4Addr());if(a!==void 0)return t[o]=a[0],t[o+1]=a[1],t[o+2]=a[2],t[o+3]=a[3],[o+4,!0]}const i=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(i===void 0)return[o,!1];t[o]=i>>8,t[o+1]=i&255}return[t.length,!1]};return this.readAtomically(()=>{const t=new Uint8Array(16),[n,o]=r(t);if(n===16)return t;if(o||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const i=new Uint8Array(14),a=16-(n+2),[u]=r(i.subarray(0,a));return t.set(i.subarray(0,u),16-u),t})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const KE=45,NK=15,Bo=new $K;function kK(e){if(!(e.length>NK))return Bo.new(e).parseWith(()=>Bo.readIPv4Addr())}function MK(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>KE))return Bo.new(e).parseWith(()=>Bo.readIPv6Addr())}function DK(e,r=!1){if(e.includes("%")&&(e=e.split("%")[0]),e.length>KE)return;const t=Bo.new(e).parseWith(()=>Bo.readIPAddr());if(t)return r&&t.length===4?Uint8Array.from([0,0,0,0,0,0,0,0,0,0,255,255,t[0],t[1],t[2],t[3]]):t}function St(e,r="utf8"){const t=GE[r];if(t==null)throw new Error(`Unsupported encoding "${r}"`);return t.decoder.decode(`${t.prefix}${e}`)}function LK(e){return!!kK(e)}function UK(e){return!!MK(e)}function YE(e){return!!DK(e)}const xg=LK,FK=UK,ZE=function(e){let r=0;if(e=e.toString().trim(),xg(e)){const t=new Uint8Array(r+4);return e.split(/\./g).forEach(n=>{t[r++]=parseInt(n,10)&255}),t}if(FK(e)){const t=e.split(":",8);let n;for(n=0;n<t.length;n++){const i=xg(t[n]);let a;i&&(a=ZE(t[n]),t[n]=we(a.slice(0,2),"base16")),a!=null&&++n<8&&t.splice(n,0,we(a.slice(2,4),"base16"))}if(t[0]==="")for(;t.length<8;)t.unshift("0");else if(t[t.length-1]==="")for(;t.length<8;)t.push("0");else if(t.length<8){for(n=0;n<t.length&&t[n]!=="";n++);const i=[n,1];for(n=9-t.length;n>0;n--)i.push("0");t.splice.apply(t,i)}const o=new Uint8Array(r+16);for(n=0;n<t.length;n++){const i=parseInt(t[n],16);o[r++]=i>>8&255,o[r++]=i&255}return o}throw new Error("invalid ip address")},xK=function(e,r=0,t){r=~~r,t=t??e.length-r;const n=new DataView(e.buffer);if(t===4){const o=[];for(let i=0;i<t;i++)o.push(e[r+i]);return o.join(".")}if(t===16){const o=[];for(let i=0;i<t;i+=2)o.push(n.getUint16(r+i).toString(16));return o.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},lt=-1,Ia={},jv={},BK=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,lt,"ip6zone"],[43,8,"ipcidr"],[53,lt,"dns",!0],[54,lt,"dns4",!0],[55,lt,"dns6",!0],[56,lt,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,lt,"unix",!1,!0],[421,lt,"ipfs"],[421,lt,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,lt,"garlic64"],[448,0,"tls"],[449,lt,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,lt,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[481,lt,"http-path"],[777,lt,"memory"]];BK.forEach(e=>{const r=VK(...e);jv[r.code]=r,Ia[r.name]=r});function VK(e,r,t,n,o){return{code:e,size:r,name:t,resolvable:!!n,path:!!o}}function ue(e){if(typeof e=="number"){if(jv[e]!=null)return jv[e];throw new Error(`no protocol with code: ${e}`)}else if(typeof e=="string"){if(Ia[e]!=null)return Ia[e];throw new Error(`no protocol with name: ${e}`)}throw new Error(`invalid protocol id type: ${typeof e}`)}ue("ip4");ue("ip6");ue("ipcidr");function QE(e,r){switch(ue(e).code){case 4:case 41:return zK(r);case 42:return Rp(r);case 43:return we(r,"base10");case 6:case 273:case 33:case 132:return XE(r).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Rp(r);case 421:return KK(r);case 444:return Wg(r);case 445:return Wg(r);case 466:return GK(r);case 481:return globalThis.encodeURIComponent(Rp(r));default:return we(r,"base16")}}function Bg(e,r){switch(ue(e).code){case 4:return Vg(r);case 41:return Vg(r);case 42:return Ip(r);case 43:return St(r,"base10");case 6:case 273:case 33:case 132:return ly(parseInt(r,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Ip(r);case 421:return HK(r);case 444:return YK(r);case 445:return ZK(r);case 466:return qK(r);case 481:return Ip(globalThis.decodeURIComponent(r));default:return St(r,"base16")}}const Ap=Object.values(nl).map(e=>e.decoder),WK=function(){let e=Ap[0].or(Ap[1]);return Ap.slice(2).forEach(r=>e=e.or(r)),e}();function Vg(e){if(!YE(e))throw new Error("invalid ip address");return ZE(e)}function zK(e){const r=xK(e,0,e.length);if(r==null)throw new Error("ipBuff is required");if(!YE(r))throw new Error("invalid ip address");return r}function ly(e){const r=new ArrayBuffer(2);return new DataView(r).setUint16(0,e),new Uint8Array(r)}function XE(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function Ip(e){const r=St(e),t=Uint8Array.from(wd(r.length));return mr([t,r],t.length+r.length)}function Rp(e){const r=Ku(e);if(e=e.slice(rr(r)),e.length!==r)throw new Error("inconsistent lengths");return we(e)}function HK(e){let r;e[0]==="Q"||e[0]==="1"?r=sy(De.decode(`z${e}`)).bytes:r=Q.parse(e).multihash.bytes;const t=Uint8Array.from(wd(r.length));return mr([t,r],t.length+r.length)}function qK(e){const r=WK.decode(e),t=Uint8Array.from(wd(r.length));return mr([t,r],t.length+r.length)}function GK(e){const r=Ku(e),t=e.slice(rr(r));if(t.length!==r)throw new Error("inconsistent lengths");return"u"+we(t,"base64url")}function KK(e){const r=Ku(e),t=e.slice(rr(r));if(t.length!==r)throw new Error("inconsistent lengths");return we(t,"base58btc")}function YK(e){const r=e.split(":");if(r.length!==2)throw new Error(`failed to parse onion addr: ["'${r.join('", "')}'"]' does not contain a port number`);if(r[0].length!==16)throw new Error(`failed to parse onion addr: ${r[0]} not a Tor onion address.`);const t=Fr.decode("b"+r[0]),n=parseInt(r[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const o=ly(n);return mr([t,o],t.length+o.length)}function ZK(e){const r=e.split(":");if(r.length!==2)throw new Error(`failed to parse onion addr: ["'${r.join('", "')}'"]' does not contain a port number`);if(r[0].length!==56)throw new Error(`failed to parse onion addr: ${r[0]} not a Tor onion3 address.`);const t=Fr.decode(`b${r[0]}`),n=parseInt(r[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const o=ly(n);return mr([t,o],t.length+o.length)}function Wg(e){const r=e.slice(0,e.length-2),t=e.slice(e.length-2),n=we(r,"base32"),o=XE(t);return`${n}:${o}`}function QK(e){e=$v(e);const r=[],t=[];let n=null;const o=e.split("/").slice(1);if(o.length===1&&o[0]==="")return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let i=0;i<o.length;i++){const a=o[i],u=ue(a);if(u.size===0){r.push([u.code]),t.push([u.code]);continue}if(i++,i>=o.length)throw new fy("invalid address: "+e);if(u.path===!0){n=$v(o.slice(i).join("/")),r.push([u.code,Bg(u.code,n)]),t.push([u.code,n]);break}const c=Bg(u.code,o[i]);r.push([u.code,c]),t.push([u.code,QE(u.code,c)])}return{string:JE(t),bytes:eS(r),tuples:r,stringTuples:t,path:n}}function zg(e){const r=[],t=[];let n=null,o=0;for(;o<e.length;){const i=Ku(e,o),a=rr(i),u=ue(i),c=XK(u,e.slice(o+a));if(c===0){r.push([i]),t.push([i]),o+=a;continue}const s=e.slice(o+a,o+a+c);if(o+=c+a,o>e.length)throw new fy("Invalid address Uint8Array: "+we(e,"base16"));r.push([i,s]);const l=QE(i,s);if(t.push([i,l]),u.path===!0){n=l;break}}return{bytes:Uint8Array.from(e),string:JE(t),tuples:r,stringTuples:t,path:n}}function JE(e){const r=[];return e.map(t=>{const n=ue(t[0]);return r.push(n.name),t.length>1&&t[1]!=null&&r.push(t[1]),null}),$v(r.join("/"))}function eS(e){return mr(e.map(r=>{const t=ue(r[0]);let n=Uint8Array.from(wd(t.code));return r.length>1&&r[1]!=null&&(n=mr([n,r[1]])),n}))}function XK(e,r){if(e.size>0)return e.size/8;if(e.size===0)return 0;{const t=Ku(r instanceof Uint8Array?r:Uint8Array.from(r));return t+rr(t)}}function $v(e){return"/"+e.trim().split("/").filter(r=>r).join("/")}class fy extends Error{constructor(t){super(`Error parsing address: ${t}`);m(this,"name","ParseError")}}m(fy,"name","ParseError");function Qr(e,r){if(e===r)return!0;if(e.byteLength!==r.byteLength)return!1;for(let t=0;t<e.byteLength;t++)if(e[t]!==r[t])return!1;return!0}const JK=Symbol.for("nodejs.util.inspect.custom"),tS=Symbol.for("@multiformats/js-multiaddr/multiaddr"),eY=[ue("dns").code,ue("dns4").code,ue("dns6").code,ue("dnsaddr").code];class tY extends Error{constructor(r="No available resolver"){super(r),this.name="NoAvailableResolverError"}}var M0,$o,Dr,$a,Na;const Po=class Po{constructor(r){m(this,"bytes");xi(this,$o);xi(this,Dr);xi(this,$a);xi(this,Na);m(this,M0,!0);r==null&&(r="");let t;if(r instanceof Uint8Array)t=zg(r);else if(typeof r=="string"){if(r.length>0&&r.charAt(0)!=="/")throw new Error(`multiaddr "${r}" must start with a "/"`);t=QK(r)}else if(ol(r))t=zg(r.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=t.bytes,Bi(this,$o,t.string),Bi(this,Dr,t.tuples),Bi(this,$a,t.stringTuples),Bi(this,Na,t.path)}toString(){return ir(this,$o)}toJSON(){return this.toString()}toOptions(){let r,t,n,o,i="";const a=ue("tcp"),u=ue("udp"),c=ue("ip4"),s=ue("ip6"),l=ue("dns6"),d=ue("ip6zone");for(const[p,v]of this.stringTuples())p===d.code&&(i=`%${v??""}`),eY.includes(p)&&(t=a.name==="tcp"?"tcp":"udp",o=443,n=`${v??""}${i}`,r=p===l.code?6:4),(p===a.code||p===u.code)&&(t=ue(p).name==="tcp"?"tcp":"udp",o=parseInt(v??"")),(p===c.code||p===s.code)&&(t=ue(p).name==="tcp"?"tcp":"udp",n=`${v??""}${i}`,r=p===s.code?6:4);if(r==null||t==null||n==null||o==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:r,host:n,transport:t,port:o}}protos(){return ir(this,Dr).map(([r])=>Object.assign({},ue(r)))}protoCodes(){return ir(this,Dr).map(([r])=>r)}protoNames(){return ir(this,Dr).map(([r])=>ue(r).name)}tuples(){return ir(this,Dr).map(([r,t])=>t==null?[r]:[r,t])}stringTuples(){return ir(this,$a).map(([r,t])=>t==null?[r]:[r,t])}encapsulate(r){return r=new Po(r),new Po(this.toString()+r.toString())}decapsulate(r){const t=r.toString(),n=this.toString(),o=n.lastIndexOf(t);if(o<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${r.toString()}`);return new Po(n.slice(0,o))}decapsulateCode(r){const t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===r)return new Po(eS(t.slice(0,n)));return this}getPeerId(){try{let r=[];this.stringTuples().forEach(([n,o])=>{n===Ia.p2p.code&&r.push([n,o]),n===Ia["p2p-circuit"].code&&(r=[])});const t=r.pop();if((t==null?void 0:t[1])!=null){const n=t[1];return n[0]==="Q"||n[0]==="1"?we(De.decode(`z${n}`),"base58btc"):we(Q.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){return ir(this,Na)}equals(r){return Qr(this.bytes,r.bytes)}async resolve(r){const t=this.protos().find(i=>i.resolvable);if(t==null)return[this];const n=rY.get(t.name);if(n==null)throw new tY(`no available resolver for ${t.name}`);return(await n(this,r)).map(i=>ut(i))}nodeAddress(){const r=this.toOptions();if(r.transport!=="tcp"&&r.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${r.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:r.family,address:r.host,port:r.port}}isThinWaistAddress(r){const t=(r??this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}[(M0=tS,JK)](){return`Multiaddr(${ir(this,$o)})`}};$o=new WeakMap,Dr=new WeakMap,$a=new WeakMap,Na=new WeakMap;let Nv=Po;const rY=new Map;function ol(e){return!!(e!=null&&e[tS])}function ut(e){return new Nv(e)}const nY=["string","number","bigint","symbol"],oY=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function iY(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";const r=typeof e;if(nY.includes(r))return r;if(r==="function")return"Function";if(Array.isArray(e))return"Array";if(aY(e))return"Buffer";const t=sY(e);return t||"Object"}function aY(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function sY(e){const r=Object.prototype.toString.call(e).slice(8,-1);if(oY.includes(r))return r}class g{constructor(r,t,n){this.major=r,this.majorEncoded=r<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(r){return this.major<r.major?-1:this.major>r.major?1:0}}g.uint=new g(0,"uint",!0);g.negint=new g(1,"negint",!0);g.bytes=new g(2,"bytes",!0);g.string=new g(3,"string",!0);g.array=new g(4,"array",!1);g.map=new g(5,"map",!1);g.tag=new g(6,"tag",!1);g.float=new g(7,"float",!0);g.false=new g(7,"false",!0);g.true=new g(7,"true",!0);g.null=new g(7,"null",!0);g.undefined=new g(7,"undefined",!0);g.break=new g(7,"break",!0);class N{constructor(r,t,n){this.type=r,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const Ri=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",uY=new TextDecoder,cY=new TextEncoder;function il(e){return Ri&&globalThis.Buffer.isBuffer(e)}function dy(e){return e instanceof Uint8Array?il(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const lY=Ri?(e,r,t)=>t-r>64?globalThis.Buffer.from(e.subarray(r,t)).toString("utf8"):qg(e,r,t):(e,r,t)=>t-r>64?uY.decode(e.subarray(r,t)):qg(e,r,t),rS=Ri?e=>e.length>64?globalThis.Buffer.from(e):Hg(e):e=>e.length>64?cY.encode(e):Hg(e),sr=e=>Uint8Array.from(e),hy=Ri?(e,r,t)=>il(e)?new Uint8Array(e.subarray(r,t)):e.slice(r,t):(e,r,t)=>e.slice(r,t),fY=Ri?(e,r)=>(e=e.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),dy(globalThis.Buffer.concat(e,r))):(e,r)=>{const t=new Uint8Array(r);let n=0;for(let o of e)n+o.length>t.length&&(o=o.subarray(0,t.length-n)),t.set(o,n),n+=o.length;return t},dY=Ri?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function hY(e,r){if(il(e)&&il(r))return e.compare(r);for(let t=0;t<e.length;t++)if(e[t]!==r[t])return e[t]<r[t]?-1:1;return 0}function Hg(e){const r=[];let t=0;for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);o<128?r[t++]=o:o<2048?(r[t++]=o>>6|192,r[t++]=o&63|128):(o&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++n)&1023),r[t++]=o>>18|240,r[t++]=o>>12&63|128,r[t++]=o>>6&63|128,r[t++]=o&63|128):(r[t++]=o>>12|224,r[t++]=o>>6&63|128,r[t++]=o&63|128)}return r}function qg(e,r,t){const n=[];for(;r<t;){const o=e[r];let i=null,a=o>239?4:o>223?3:o>191?2:1;if(r+a<=t){let u,c,s,l;switch(a){case 1:o<128&&(i=o);break;case 2:u=e[r+1],(u&192)===128&&(l=(o&31)<<6|u&63,l>127&&(i=l));break;case 3:u=e[r+1],c=e[r+2],(u&192)===128&&(c&192)===128&&(l=(o&15)<<12|(u&63)<<6|c&63,l>2047&&(l<55296||l>57343)&&(i=l));break;case 4:u=e[r+1],c=e[r+2],s=e[r+3],(u&192)===128&&(c&192)===128&&(s&192)===128&&(l=(o&15)<<18|(u&63)<<12|(c&63)<<6|s&63,l>65535&&l<1114112&&(i=l))}}i===null?(i=65533,a=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|i&1023),n.push(i),r+=a}return nS(n)}const Gg=4096;function nS(e){const r=e.length;if(r<=Gg)return String.fromCharCode.apply(String,e);let t="",n=0;for(;n<r;)t+=String.fromCharCode.apply(String,e.slice(n,n+=Gg));return t}const pY=256;class oS{constructor(r=pY){this.chunkSize=r,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(r){let t=this.chunks[this.chunks.length-1];if(this.cursor+r.length<=this.maxCursor+1){const o=t.length-(this.maxCursor-this.cursor)-1;t.set(r,o)}else{if(t){const o=t.length-(this.maxCursor-this.cursor)-1;o<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,o),this.maxCursor=this.cursor-1)}r.length<64&&r.length<this.chunkSize?(t=dY(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(r,0)):(this.chunks.push(r),this.maxCursor+=r.length)}this.cursor+=r.length}toBytes(r=!1){let t;if(this.chunks.length===1){const n=this.chunks[0];r&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=hy(n,0,this.cursor)}else t=fY(this.chunks,this.cursor);return r&&this.reset(),t}}const q="CBOR decode error:",Mn="CBOR encode error:";function ji(e,r,t){if(e.length-r<t)throw new Error(`${q} not enough data for type`)}const Be=[24,256,65536,4294967296,BigInt("18446744073709551616")];function ao(e,r,t){ji(e,r,1);const n=e[r];if(t.strict===!0&&n<Be[0])throw new Error(`${q} integer encoded in more bytes than necessary (strict decode)`);return n}function so(e,r,t){ji(e,r,2);const n=e[r]<<8|e[r+1];if(t.strict===!0&&n<Be[1])throw new Error(`${q} integer encoded in more bytes than necessary (strict decode)`);return n}function uo(e,r,t){ji(e,r,4);const n=e[r]*16777216+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3];if(t.strict===!0&&n<Be[2])throw new Error(`${q} integer encoded in more bytes than necessary (strict decode)`);return n}function co(e,r,t){ji(e,r,8);const n=e[r]*16777216+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3],o=e[r+4]*16777216+(e[r+5]<<16)+(e[r+6]<<8)+e[r+7],i=(BigInt(n)<<BigInt(32))+BigInt(o);if(t.strict===!0&&i<Be[3])throw new Error(`${q} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(t.allowBigInt===!0)return i;throw new Error(`${q} integers outside of the safe integer range are not supported`)}function vY(e,r,t,n){return new N(g.uint,ao(e,r+1,n),2)}function _Y(e,r,t,n){return new N(g.uint,so(e,r+1,n),3)}function yY(e,r,t,n){return new N(g.uint,uo(e,r+1,n),5)}function bY(e,r,t,n){return new N(g.uint,co(e,r+1,n),9)}function lo(e,r){return Pt(e,0,r.value)}function Pt(e,r,t){if(t<Be[0]){const n=Number(t);e.push([r|n])}else if(t<Be[1]){const n=Number(t);e.push([r|24,n])}else if(t<Be[2]){const n=Number(t);e.push([r|25,n>>>8,n&255])}else if(t<Be[3]){const n=Number(t);e.push([r|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{const n=BigInt(t);if(n<Be[4]){const o=[r|27,0,0,0,0,0,0,0];let i=Number(n&BigInt(4294967295)),a=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=i&255,i=i>>8,o[7]=i&255,i=i>>8,o[6]=i&255,i=i>>8,o[5]=i&255,o[4]=a&255,a=a>>8,o[3]=a&255,a=a>>8,o[2]=a&255,a=a>>8,o[1]=a&255,e.push(o)}else throw new Error(`${q} encountered BigInt larger than allowable range`)}}lo.encodedSize=function(r){return Pt.encodedSize(r.value)};Pt.encodedSize=function(r){return r<Be[0]?1:r<Be[1]?2:r<Be[2]?3:r<Be[3]?5:9};lo.compareTokens=function(r,t){return r.value<t.value?-1:r.value>t.value?1:0};function mY(e,r,t,n){return new N(g.negint,-1-ao(e,r+1,n),2)}function gY(e,r,t,n){return new N(g.negint,-1-so(e,r+1,n),3)}function wY(e,r,t,n){return new N(g.negint,-1-uo(e,r+1,n),5)}const py=BigInt(-1),iS=BigInt(1);function OY(e,r,t,n){const o=co(e,r+1,n);if(typeof o!="bigint"){const i=-1-o;if(i>=Number.MIN_SAFE_INTEGER)return new N(g.negint,i,9)}if(n.allowBigInt!==!0)throw new Error(`${q} integers outside of the safe integer range are not supported`);return new N(g.negint,py-BigInt(o),9)}function vy(e,r){const t=r.value,n=typeof t=="bigint"?t*py-iS:t*-1-1;Pt(e,r.type.majorEncoded,n)}vy.encodedSize=function(r){const t=r.value,n=typeof t=="bigint"?t*py-iS:t*-1-1;return n<Be[0]?1:n<Be[1]?2:n<Be[2]?3:n<Be[3]?5:9};vy.compareTokens=function(r,t){return r.value<t.value?1:r.value>t.value?-1:0};function Zu(e,r,t,n){ji(e,r,t+n);const o=hy(e,r+t,r+t+n);return new N(g.bytes,o,t+n)}function EY(e,r,t,n){return Zu(e,r,1,t)}function SY(e,r,t,n){return Zu(e,r,2,ao(e,r+1,n))}function TY(e,r,t,n){return Zu(e,r,3,so(e,r+1,n))}function PY(e,r,t,n){return Zu(e,r,5,uo(e,r+1,n))}function CY(e,r,t,n){const o=co(e,r+1,n);if(typeof o=="bigint")throw new Error(`${q} 64-bit integer bytes lengths not supported`);return Zu(e,r,9,o)}function al(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===g.string?rS(e.value):e.value),e.encodedBytes}function Td(e,r){const t=al(r);Pt(e,r.type.majorEncoded,t.length),e.push(t)}Td.encodedSize=function(r){const t=al(r);return Pt.encodedSize(t.length)+t.length};Td.compareTokens=function(r,t){return AY(al(r),al(t))};function AY(e,r){return e.length<r.length?-1:e.length>r.length?1:hY(e,r)}function Qu(e,r,t,n,o){const i=t+n;ji(e,r,i);const a=new N(g.string,lY(e,r+t,r+i),i);return o.retainStringBytes===!0&&(a.byteValue=hy(e,r+t,r+i)),a}function IY(e,r,t,n){return Qu(e,r,1,t,n)}function RY(e,r,t,n){return Qu(e,r,2,ao(e,r+1,n),n)}function jY(e,r,t,n){return Qu(e,r,3,so(e,r+1,n),n)}function $Y(e,r,t,n){return Qu(e,r,5,uo(e,r+1,n),n)}function NY(e,r,t,n){const o=co(e,r+1,n);if(typeof o=="bigint")throw new Error(`${q} 64-bit integer string lengths not supported`);return Qu(e,r,9,o,n)}const kY=Td;function $i(e,r,t,n){return new N(g.array,n,t)}function MY(e,r,t,n){return $i(e,r,1,t)}function DY(e,r,t,n){return $i(e,r,2,ao(e,r+1,n))}function LY(e,r,t,n){return $i(e,r,3,so(e,r+1,n))}function UY(e,r,t,n){return $i(e,r,5,uo(e,r+1,n))}function FY(e,r,t,n){const o=co(e,r+1,n);if(typeof o=="bigint")throw new Error(`${q} 64-bit integer array lengths not supported`);return $i(e,r,9,o)}function xY(e,r,t,n){if(n.allowIndefinite===!1)throw new Error(`${q} indefinite length items not allowed`);return $i(e,r,1,1/0)}function _y(e,r){Pt(e,g.array.majorEncoded,r.value)}_y.compareTokens=lo.compareTokens;_y.encodedSize=function(r){return Pt.encodedSize(r.value)};function Ni(e,r,t,n){return new N(g.map,n,t)}function BY(e,r,t,n){return Ni(e,r,1,t)}function VY(e,r,t,n){return Ni(e,r,2,ao(e,r+1,n))}function WY(e,r,t,n){return Ni(e,r,3,so(e,r+1,n))}function zY(e,r,t,n){return Ni(e,r,5,uo(e,r+1,n))}function HY(e,r,t,n){const o=co(e,r+1,n);if(typeof o=="bigint")throw new Error(`${q} 64-bit integer map lengths not supported`);return Ni(e,r,9,o)}function qY(e,r,t,n){if(n.allowIndefinite===!1)throw new Error(`${q} indefinite length items not allowed`);return Ni(e,r,1,1/0)}function yy(e,r){Pt(e,g.map.majorEncoded,r.value)}yy.compareTokens=lo.compareTokens;yy.encodedSize=function(r){return Pt.encodedSize(r.value)};function GY(e,r,t,n){return new N(g.tag,t,1)}function KY(e,r,t,n){return new N(g.tag,ao(e,r+1,n),2)}function YY(e,r,t,n){return new N(g.tag,so(e,r+1,n),3)}function ZY(e,r,t,n){return new N(g.tag,uo(e,r+1,n),5)}function QY(e,r,t,n){return new N(g.tag,co(e,r+1,n),9)}function by(e,r){Pt(e,g.tag.majorEncoded,r.value)}by.compareTokens=lo.compareTokens;by.encodedSize=function(r){return Pt.encodedSize(r.value)};const XY=20,JY=21,eZ=22,tZ=23;function rZ(e,r,t,n){if(n.allowUndefined===!1)throw new Error(`${q} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new N(g.null,null,1):new N(g.undefined,void 0,1)}function nZ(e,r,t,n){if(n.allowIndefinite===!1)throw new Error(`${q} indefinite length items not allowed`);return new N(g.break,void 0,1)}function my(e,r,t){if(t){if(t.allowNaN===!1&&Number.isNaN(e))throw new Error(`${q} NaN values are not supported`);if(t.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${q} Infinity values are not supported`)}return new N(g.float,e,r)}function oZ(e,r,t,n){return my(wy(e,r+1),3,n)}function iZ(e,r,t,n){return my(Oy(e,r+1),5,n)}function aZ(e,r,t,n){return my(cS(e,r+1),9,n)}function gy(e,r,t){const n=r.value;if(n===!1)e.push([g.float.majorEncoded|XY]);else if(n===!0)e.push([g.float.majorEncoded|JY]);else if(n===null)e.push([g.float.majorEncoded|eZ]);else if(n===void 0)e.push([g.float.majorEncoded|tZ]);else{let o,i=!1;(!t||t.float64!==!0)&&(sS(n),o=wy(Nt,1),n===o||Number.isNaN(n)?(Nt[0]=249,e.push(Nt.slice(0,3)),i=!0):(uS(n),o=Oy(Nt,1),n===o&&(Nt[0]=250,e.push(Nt.slice(0,5)),i=!0))),i||(sZ(n),o=cS(Nt,1),Nt[0]=251,e.push(Nt.slice(0,9)))}}gy.encodedSize=function(r,t){const n=r.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){sS(n);let o=wy(Nt,1);if(n===o||Number.isNaN(n))return 3;if(uS(n),o=Oy(Nt,1),n===o)return 5}return 9};const aS=new ArrayBuffer(9),gt=new DataView(aS,1),Nt=new Uint8Array(aS,0);function sS(e){if(e===1/0)gt.setUint16(0,31744,!1);else if(e===-1/0)gt.setUint16(0,64512,!1);else if(Number.isNaN(e))gt.setUint16(0,32256,!1);else{gt.setFloat32(0,e);const r=gt.getUint32(0),t=(r&2139095040)>>23,n=r&8388607;if(t===255)gt.setUint16(0,31744,!1);else if(t===0)gt.setUint16(0,(e&2147483648)>>16|n>>13,!1);else{const o=t-127;o<-24?gt.setUint16(0,0):o<-14?gt.setUint16(0,(r&2147483648)>>16|1<<24+o,!1):gt.setUint16(0,(r&2147483648)>>16|o+15<<10|n>>13,!1)}}}function wy(e,r){if(e.length-r<2)throw new Error(`${q} not enough data for float16`);const t=(e[r]<<8)+e[r+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;const n=t>>10&31,o=t&1023;let i;return n===0?i=o*2**-24:n!==31?i=(o+1024)*2**(n-25):i=o===0?1/0:NaN,t&32768?-i:i}function uS(e){gt.setFloat32(0,e,!1)}function Oy(e,r){if(e.length-r<4)throw new Error(`${q} not enough data for float32`);const t=(e.byteOffset||0)+r;return new DataView(e.buffer,t,4).getFloat32(0,!1)}function sZ(e){gt.setFloat64(0,e,!1)}function cS(e,r){if(e.length-r<8)throw new Error(`${q} not enough data for float64`);const t=(e.byteOffset||0)+r;return new DataView(e.buffer,t,8).getFloat64(0,!1)}gy.compareTokens=lo.compareTokens;function fe(e,r,t){throw new Error(`${q} encountered invalid minor (${t}) for major ${e[r]>>>5}`)}function Pd(e){return()=>{throw new Error(`${q} ${e}`)}}const D=[];for(let e=0;e<=23;e++)D[e]=fe;D[24]=vY;D[25]=_Y;D[26]=yY;D[27]=bY;D[28]=fe;D[29]=fe;D[30]=fe;D[31]=fe;for(let e=32;e<=55;e++)D[e]=fe;D[56]=mY;D[57]=gY;D[58]=wY;D[59]=OY;D[60]=fe;D[61]=fe;D[62]=fe;D[63]=fe;for(let e=64;e<=87;e++)D[e]=EY;D[88]=SY;D[89]=TY;D[90]=PY;D[91]=CY;D[92]=fe;D[93]=fe;D[94]=fe;D[95]=Pd("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)D[e]=IY;D[120]=RY;D[121]=jY;D[122]=$Y;D[123]=NY;D[124]=fe;D[125]=fe;D[126]=fe;D[127]=Pd("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)D[e]=MY;D[152]=DY;D[153]=LY;D[154]=UY;D[155]=FY;D[156]=fe;D[157]=fe;D[158]=fe;D[159]=xY;for(let e=160;e<=183;e++)D[e]=BY;D[184]=VY;D[185]=WY;D[186]=zY;D[187]=HY;D[188]=fe;D[189]=fe;D[190]=fe;D[191]=qY;for(let e=192;e<=215;e++)D[e]=GY;D[216]=KY;D[217]=YY;D[218]=ZY;D[219]=QY;D[220]=fe;D[221]=fe;D[222]=fe;D[223]=fe;for(let e=224;e<=243;e++)D[e]=Pd("simple values are not supported");D[244]=fe;D[245]=fe;D[246]=fe;D[247]=rZ;D[248]=Pd("simple values are not supported");D[249]=oZ;D[250]=iZ;D[251]=aZ;D[252]=fe;D[253]=fe;D[254]=fe;D[255]=nZ;const nr=[];for(let e=0;e<24;e++)nr[e]=new N(g.uint,e,1);for(let e=-1;e>=-24;e--)nr[31-e]=new N(g.negint,e,1);nr[64]=new N(g.bytes,new Uint8Array(0),1);nr[96]=new N(g.string,"",1);nr[128]=new N(g.array,0,1);nr[160]=new N(g.map,0,1);nr[244]=new N(g.false,!1,1);nr[245]=new N(g.true,!0,1);nr[246]=new N(g.null,null,1);function uZ(e){switch(e.type){case g.false:return sr([244]);case g.true:return sr([245]);case g.null:return sr([246]);case g.bytes:return e.value.length?void 0:sr([64]);case g.string:return e.value===""?sr([96]):void 0;case g.array:return e.value===0?sr([128]):void 0;case g.map:return e.value===0?sr([160]):void 0;case g.uint:return e.value<24?sr([Number(e.value)]):void 0;case g.negint:if(e.value>=-24)return sr([31-Number(e.value)])}}const cZ={float64:!1,mapSorter:dZ,quickEncodeToken:uZ};function lZ(){const e=[];return e[g.uint.major]=lo,e[g.negint.major]=vy,e[g.bytes.major]=Td,e[g.string.major]=kY,e[g.array.major]=_y,e[g.map.major]=yy,e[g.tag.major]=by,e[g.float.major]=gy,e}const lS=lZ(),jp=new oS;class sl{constructor(r,t){this.obj=r,this.parent=t}includes(r){let t=this;do if(t.obj===r)return!0;while(t=t.parent);return!1}static createCheck(r,t){if(r&&r.includes(t))throw new Error(`${Mn} object contains circular references`);return new sl(t,r)}}const Nr={null:new N(g.null,null),undefined:new N(g.undefined,void 0),true:new N(g.true,!0),false:new N(g.false,!1),emptyArray:new N(g.array,0),emptyMap:new N(g.map,0)},Xr={number(e,r,t,n){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new N(g.float,e):e>=0?new N(g.uint,e):new N(g.negint,e)},bigint(e,r,t,n){return e>=BigInt(0)?new N(g.uint,e):new N(g.negint,e)},Uint8Array(e,r,t,n){return new N(g.bytes,e)},string(e,r,t,n){return new N(g.string,e)},boolean(e,r,t,n){return e?Nr.true:Nr.false},null(e,r,t,n){return Nr.null},undefined(e,r,t,n){return Nr.undefined},ArrayBuffer(e,r,t,n){return new N(g.bytes,new Uint8Array(e))},DataView(e,r,t,n){return new N(g.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,r,t,n){if(!e.length)return t.addBreakTokens===!0?[Nr.emptyArray,new N(g.break)]:Nr.emptyArray;n=sl.createCheck(n,e);const o=[];let i=0;for(const a of e)o[i++]=Nc(a,t,n);return t.addBreakTokens?[new N(g.array,e.length),o,new N(g.break)]:[new N(g.array,e.length),o]},Object(e,r,t,n){const o=r!=="Object",i=o?e.keys():Object.keys(e),a=o?e.size:i.length;if(!a)return t.addBreakTokens===!0?[Nr.emptyMap,new N(g.break)]:Nr.emptyMap;n=sl.createCheck(n,e);const u=[];let c=0;for(const s of i)u[c++]=[Nc(s,t,n),Nc(o?e.get(s):e[s],t,n)];return fZ(u,t),t.addBreakTokens?[new N(g.map,a),u,new N(g.break)]:[new N(g.map,a),u]}};Xr.Map=Xr.Object;Xr.Buffer=Xr.Uint8Array;for(const e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Xr[`${e}Array`]=Xr.DataView;function Nc(e,r={},t){const n=iY(e),o=r&&r.typeEncoders&&r.typeEncoders[n]||Xr[n];if(typeof o=="function"){const a=o(e,n,r,t);if(a!=null)return a}const i=Xr[n];if(!i)throw new Error(`${Mn} unsupported type: ${n}`);return i(e,n,r,t)}function fZ(e,r){r.mapSorter&&e.sort(r.mapSorter)}function dZ(e,r){const t=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(r[0])?r[0][0]:r[0];if(t.type!==n.type)return t.type.compare(n.type);const o=t.type.major,i=lS[o].compareTokens(t,n);return i===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),i}function fS(e,r,t,n){if(Array.isArray(r))for(const o of r)fS(e,o,t,n);else t[r.type.major](e,r,n)}function dS(e,r,t){const n=Nc(e,t);if(!Array.isArray(n)&&t.quickEncodeToken){const o=t.quickEncodeToken(n);if(o)return o;const i=r[n.type.major];if(i.encodedSize){const a=i.encodedSize(n,t),u=new oS(a);if(i(u,n,t),u.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return dy(u.chunks[0])}}return jp.reset(),fS(jp,n,r,t),jp.toBytes(!0)}function hZ(e,r){return r=Object.assign({},cZ,r),dS(e,lS,r)}const pZ={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class vZ{constructor(r,t={}){this._pos=0,this.data=r,this.options=t}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const r=this.data[this._pos];let t=nr[r];if(t===void 0){const n=D[r];if(!n)throw new Error(`${q} no decoder for major type ${r>>>5} (byte 0x${r.toString(16).padStart(2,"0")})`);const o=r&31;t=n(this.data,this._pos,o,this.options)}return this._pos+=t.encodedLength,t}}const Ra=Symbol.for("DONE"),Cd=Symbol.for("BREAK");function _Z(e,r,t){const n=[];for(let o=0;o<e.value;o++){const i=ja(r,t);if(i===Cd){if(e.value===1/0)break;throw new Error(`${q} got unexpected break to lengthed array`)}if(i===Ra)throw new Error(`${q} found array but not enough entries (got ${o}, expected ${e.value})`);n[o]=i}return n}function yZ(e,r,t){const n=t.useMaps===!0,o=n?void 0:{},i=n?new Map:void 0;for(let a=0;a<e.value;a++){const u=ja(r,t);if(u===Cd){if(e.value===1/0)break;throw new Error(`${q} got unexpected break to lengthed map`)}if(u===Ra)throw new Error(`${q} found map but not enough entries (got ${a} [no key], expected ${e.value})`);if(n!==!0&&typeof u!="string")throw new Error(`${q} non-string keys not supported (got ${typeof u})`);if(t.rejectDuplicateMapKeys===!0&&(n&&i.has(u)||!n&&u in o))throw new Error(`${q} found repeat map key "${u}"`);const c=ja(r,t);if(c===Ra)throw new Error(`${q} found map but not enough entries (got ${a} [no value], expected ${e.value})`);n?i.set(u,c):o[u]=c}return n?i:o}function ja(e,r){if(e.done())return Ra;const t=e.next();if(t.type===g.break)return Cd;if(t.type.terminal)return t.value;if(t.type===g.array)return _Z(t,e,r);if(t.type===g.map)return yZ(t,e,r);if(t.type===g.tag){if(r.tags&&typeof r.tags[t.value]=="function"){const n=ja(e,r);return r.tags[t.value](n)}throw new Error(`${q} tag not supported (${t.value})`)}throw new Error("unsupported")}function bZ(e,r){if(!(e instanceof Uint8Array))throw new Error(`${q} data to decode must be a Uint8Array`);r=Object.assign({},pZ,r);const t=r.tokenizer||new vZ(e,r),n=ja(t,r);if(n===Ra)throw new Error(`${q} did not find any content to decode`);if(n===Cd)throw new Error(`${q} got unexpected break`);return[n,e.subarray(t.pos())]}function hS(e,r){const[t,n]=bZ(e,r);if(n.length>0)throw new Error(`${q} too many terminals, data makes no sense`);return t}const pS=42;function vS(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function mZ(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const r=Q.asCID(e);if(!r)return null;const t=new Uint8Array(r.bytes.byteLength+1);return t.set(r.bytes,1),[new N(g.tag,pS),new N(g.bytes,t)]}function gZ(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function wZ(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const kv={float64:!0,typeEncoders:{Object:mZ,undefined:gZ,number:wZ}},OZ={...kv,typeEncoders:{...kv.typeEncoders}};function EZ(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Q.decode(e.subarray(1))}const ul={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};ul.tags[pS]=EZ;const SZ={...ul,tags:ul.tags.slice()},TZ="dag-cbor",PZ=113,_S=e=>hZ(e,kv),yS=e=>hS(vS(e),ul),CZ=Object.freeze(Object.defineProperty({__proto__:null,code:PZ,decode:yS,decodeOptions:SZ,encode:_S,encodeOptions:OZ,name:TZ,toByteView:vS},Symbol.toStringTag,{value:"Module"}));class AZ extends Array{constructor(){super(),this.inRecursive=[]}prefix(r){const t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===g.array&&(t.elements++,t.elements!==1&&r.push([44])),t.type===g.map&&(t.elements++,t.elements!==1&&(t.elements%2===1?r.push([44]):r.push([58]))))}[g.uint.major](r,t){this.prefix(r);const n=String(t.value),o=[];for(let i=0;i<n.length;i++)o[i]=n.charCodeAt(i);r.push(o)}[g.negint.major](r,t){this[g.uint.major](r,t)}[g.bytes.major](r,t){throw new Error(`${Mn} unsupported type: Uint8Array`)}[g.string.major](r,t){this.prefix(r);const n=rS(JSON.stringify(t.value));r.push(n.length>32?dy(n):n)}[g.array.major](r,t){this.prefix(r),this.inRecursive.push({type:g.array,elements:0}),r.push([91])}[g.map.major](r,t){this.prefix(r),this.inRecursive.push({type:g.map,elements:0}),r.push([123])}[g.tag.major](r,t){}[g.float.major](r,t){if(t.type.name==="break"){const a=this.inRecursive.pop();if(a){if(a.type===g.array)r.push([93]);else if(a.type===g.map)r.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(t.value===void 0)throw new Error(`${Mn} unsupported type: undefined`);if(this.prefix(r),t.type.name==="true"){r.push([116,114,117,101]);return}else if(t.type.name==="false"){r.push([102,97,108,115,101]);return}else if(t.type.name==="null"){r.push([110,117,108,108]);return}const n=String(t.value),o=[];let i=!1;for(let a=0;a<n.length;a++)o[a]=n.charCodeAt(a),!i&&(o[a]===46||o[a]===101||o[a]===69)&&(i=!0);i||(o.push(46),o.push(48)),r.push(o)}}function IZ(e,r){if(Array.isArray(e[0])||Array.isArray(r[0]))throw new Error(`${Mn} complex map keys are not supported`);const t=e[0],n=r[0];if(t.type!==g.string||n.type!==g.string)throw new Error(`${Mn} non-string map keys are not supported`);if(t<n)return-1;if(t>n)return 1;throw new Error(`${Mn} unexpected duplicate map keys, this is not supported`)}const RZ={addBreakTokens:!0,mapSorter:IZ};function jZ(e,r){return r=Object.assign({},RZ,r),dS(e,new AZ,r)}class bS{constructor(r,t={}){this._pos=0,this.data=r,this.options=t,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let r=this.ch();for(;r===32||r===9||r===13||r===10;)r=this.data[++this._pos]}expect(r){if(this.data.length-this._pos<r.length)throw new Error(`${q} unexpected end of input at position ${this._pos}`);for(let t=0;t<r.length;t++)if(this.data[this._pos++]!==r[t])throw new Error(`${q} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...r)}'`)}parseNumber(){const r=this._pos;let t=!1,n=!1;const o=u=>{for(;!this.done();){const c=this.ch();if(u.includes(c))this._pos++;else break}};if(this.ch()===45&&(t=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,n=!0;else return new N(g.uint,0,this._pos-r);if(o([48,49,50,51,52,53,54,55,56,57]),t&&this._pos===r+1)throw new Error(`${q} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${q} unexpected token at position ${this._pos}`);n=!0,this._pos++,o([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,o([48,49,50,51,52,53,54,55,56,57]));const i=String.fromCharCode.apply(null,this.data.subarray(r,this._pos)),a=parseFloat(i);return n?new N(g.float,a,this._pos-r):this.options.allowBigInt!==!0||Number.isSafeInteger(a)?new N(a>=0?g.uint:g.negint,a,this._pos-r):new N(a>=0?g.uint:g.negint,BigInt(i),this._pos-r)}parseString(){if(this.ch()!==34)throw new Error(`${q} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let i=this._pos,a=0;i<this.data.length&&a<65536;i++,a++){const u=this.data[i];if(u===92||u<32||u>=128)break;if(u===34){const c=String.fromCharCode.apply(null,this.data.subarray(this._pos,i));return this._pos=i+1,new N(g.string,c,a)}}const r=this._pos,t=[],n=()=>{if(this._pos+4>=this.data.length)throw new Error(`${q} unexpected end of unicode escape sequence at position ${this._pos}`);let i=0;for(let a=0;a<4;a++){let u=this.ch();if(u>=48&&u<=57)u-=48;else if(u>=97&&u<=102)u=u-97+10;else if(u>=65&&u<=70)u=u-65+10;else throw new Error(`${q} unexpected unicode escape character at position ${this._pos}`);i=i*16+u,this._pos++}return i},o=()=>{const i=this.ch();let a=null,u=i>239?4:i>223?3:i>191?2:1;if(this._pos+u>this.data.length)throw new Error(`${q} unexpected unicode sequence at position ${this._pos}`);let c,s,l,d;switch(u){case 1:i<128&&(a=i);break;case 2:c=this.data[this._pos+1],(c&192)===128&&(d=(i&31)<<6|c&63,d>127&&(a=d));break;case 3:c=this.data[this._pos+1],s=this.data[this._pos+2],(c&192)===128&&(s&192)===128&&(d=(i&15)<<12|(c&63)<<6|s&63,d>2047&&(d<55296||d>57343)&&(a=d));break;case 4:c=this.data[this._pos+1],s=this.data[this._pos+2],l=this.data[this._pos+3],(c&192)===128&&(s&192)===128&&(l&192)===128&&(d=(i&15)<<18|(c&63)<<12|(s&63)<<6|l&63,d>65535&&d<1114112&&(a=d))}a===null?(a=65533,u=1):a>65535&&(a-=65536,t.push(a>>>10&1023|55296),a=56320|a&1023),t.push(a),this._pos+=u};for(;!this.done();){const i=this.ch();let a;switch(i){case 92:if(this._pos++,this.done())throw new Error(`${q} unexpected string termination at position ${this._pos}`);switch(a=this.ch(),this._pos++,a){case 34:case 39:case 92:case 47:t.push(a);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(n());break;default:throw new Error(`${q} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new N(g.string,nS(t),this._pos-r);default:if(i<32)throw new Error(`${q} invalid control character at position ${this._pos}`);i<128?(t.push(i),this._pos++):o()}}throw new Error(`${q} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new N(g.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new N(g.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new N(g.null,null,4);case 102:return this.expect([102,97,108,115,101]),new N(g.false,!1,5);case 116:return this.expect([116,114,117,101]),new N(g.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${q} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new N(g.break,void 0,1);if(this.ch()!==44)throw new Error(`${q} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new N(g.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new N(g.break,void 0,1);if(this.ch()!==44)throw new Error(`${q} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new N(g.break,void 0,1);const r=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${q} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),r}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${q} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}}function $Z(e,r){return r=Object.assign({tokenizer:new bS(e,r)},r),hS(e,r)}function NZ(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function kZ(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const r=Q.asCID(e);if(!r)return null;const t=r.toString();return[new N(g.map,1/0,1),new N(g.string,"/",1),new N(g.string,t,t.length),new N(g.break,void 0,1)]}function cl(e){const r=Ed.encode(e).slice(1);return[new N(g.map,1/0,1),new N(g.string,"/",1),new N(g.map,1/0,1),new N(g.string,"bytes",5),new N(g.string,r,r.length),new N(g.break,void 0,1),new N(g.break,void 0,1)]}function Ct(e){return cl(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function MZ(e){return cl(new Uint8Array(e))}function DZ(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function LZ(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const UZ={typeEncoders:{Object:kZ,Buffer:cl,Uint8Array:cl,Int8Array:Ct,Uint16Array:Ct,Int16Array:Ct,Uint32Array:Ct,Int32Array:Ct,Float32Array:Ct,Float64Array:Ct,Uint8ClampedArray:Ct,BigInt64Array:Ct,BigUint64Array:Ct,DataView:Ct,ArrayBuffer:MZ,undefined:DZ,number:LZ}};class FZ extends bS{constructor(r,t){super(r,t),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const r=this._next();if(r.type===g.map){const t=this._next();if(t.type===g.string&&t.value==="/"){const n=this._next();if(n.type===g.string){if(this._next().type!==g.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new N(g.tag,42,0)}if(n.type===g.map){const o=this._next();if(o.type===g.string&&o.value==="bytes"){const i=this._next();if(i.type===g.string){for(let u=0;u<2;u++)if(this._next().type!==g.break)throw new Error("Invalid encoded Bytes form");const a=Ed.decode(`m${i.value}`);return new N(g.bytes,a,i.value.length)}this.tokenBuffer.push(i)}this.tokenBuffer.push(o)}this.tokenBuffer.push(n)}this.tokenBuffer.push(t)}return r}}const Mv={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Mv.tags[42]=Q.parse;const xZ="dag-json",BZ=297,mS=e=>jZ(e,UZ),gS=e=>{const r=NZ(e),t=Object.assign(Mv,{tokenizer:new FZ(r,Mv)});return $Z(r,t)},Kg=e=>VZ.decode(mS(e)),VZ=new TextDecoder,WZ=e=>gS(zZ.encode(e)),zZ=new TextEncoder,HZ=Object.freeze(Object.defineProperty({__proto__:null,code:BZ,decode:gS,encode:mS,format:Kg,name:xZ,parse:WZ,stringify:Kg},Symbol.toStringTag,{value:"Module"})),qZ=new TextDecoder;function Ey(e,r){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(r>=e.length)throw new Error("protobuf: unexpected end of data");const o=e[r++];if(t+=n<28?(o&127)<<n:(o&127)*2**n,o<128)break}return[t,r]}function ll(e,r){let t;[t,r]=Ey(e,r);const n=r+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(r,n),n]}function wS(e,r){let t;return[t,r]=Ey(e,r),[t&7,t>>3,r]}function GZ(e){const r={},t=e.length;let n=0;for(;n<t;){let o,i;if([o,i,n]=wS(e,n),i===1){if(r.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(r.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(r.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[r.Hash,n]=ll(e,n)}else if(i===2){if(r.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(r.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let a;[a,n]=ll(e,n),r.Name=qZ.decode(a)}else if(i===3){if(r.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[r.Tsize,n]=Ey(e,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${i}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return r}function KZ(e){const r=e.length;let t=0,n,o=!1,i;for(;t<r;){let u,c;if([u,c,t]=wS(e,t),u!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${u}`);if(c===1){if(i)throw new Error("protobuf: (PBNode) duplicate Data section");[i,t]=ll(e,t),n&&(o=!0)}else if(c===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let s;[s,t]=ll(e,t),n.push(GZ(s))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(t>r)throw new Error("protobuf: (PBNode) unexpected end of data");const a={};return i&&(a.Data=i),a.Links=n||[],a}const OS=new TextEncoder,Yg=2**32,YZ=2**31;function ZZ(e,r){let t=r.length;if(typeof e.Tsize=="number"){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");t=ba(r,t,e.Tsize)-1,r[t]=24}if(typeof e.Name=="string"){const n=OS.encode(e.Name);t-=n.length,r.set(n,t),t=ba(r,t,n.length)-1,r[t]=18}return e.Hash&&(t-=e.Hash.length,r.set(e.Hash,t),t=ba(r,t,e.Hash.length)-1,r[t]=10),r.length-t}function QZ(e){const r=JZ(e),t=new Uint8Array(r);let n=r;if(e.Data&&(n-=e.Data.length,t.set(e.Data,n),n=ba(t,n,e.Data.length)-1,t[n]=10),e.Links)for(let o=e.Links.length-1;o>=0;o--){const i=ZZ(e.Links[o],t.subarray(0,n));n-=i,n=ba(t,n,i)-1,t[n]=18}return t}function XZ(e){let r=0;if(e.Hash){const t=e.Hash.length;r+=1+t+jo(t)}if(typeof e.Name=="string"){const t=OS.encode(e.Name).length;r+=1+t+jo(t)}return typeof e.Tsize=="number"&&(r+=1+jo(e.Tsize)),r}function JZ(e){let r=0;if(e.Data){const t=e.Data.length;r+=1+t+jo(t)}if(e.Links)for(const t of e.Links){const n=XZ(t);r+=1+n+jo(n)}return r}function ba(e,r,t){r-=jo(t);const n=r;for(;t>=YZ;)e[r++]=t&127|128,t/=128;for(;t>=128;)e[r++]=t&127|128,t>>>=7;return e[r]=t,n}function jo(e){return e%2===0&&e++,Math.floor((eQ(e)+6)/7)}function eQ(e){let r=0;return e>=Yg&&(e=Math.floor(e/Yg),r=32),e>=65536&&(e>>>=16,r+=16),e>=256&&(e>>>=8,r+=8),r+tQ[e]}const tQ=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],rQ=["Data","Links"],nQ=["Hash","Name","Tsize"],Dv=new TextEncoder;function ES(e,r){if(e===r)return 0;const t=e.Name?Dv.encode(e.Name):[],n=r.Name?Dv.encode(r.Name):[];let o=t.length,i=n.length;for(let a=0,u=Math.min(o,i);a<u;++a)if(t[a]!==n[a]){o=t[a],i=n[a];break}return o<i?-1:i<o?1:0}function Zg(e,r){return!Object.keys(e).some(t=>!r.includes(t))}function SS(e){if(typeof e.asCID=="object"){const t=Q.asCID(e);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if(typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const r={};if(e.Hash){let t=Q.asCID(e.Hash);try{t||(typeof e.Hash=="string"?t=Q.parse(e.Hash):e.Hash instanceof Uint8Array&&(t=Q.decode(e.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}t&&(r.Hash=t)}if(!r.Hash)throw new TypeError("Invalid DAG-PB form");return typeof e.Name=="string"&&(r.Name=e.Name),typeof e.Tsize=="number"&&(r.Tsize=e.Tsize),r}function TS(e){if((e instanceof Uint8Array||typeof e=="string")&&(e={Data:e}),typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const r={};if(e.Data!==void 0)if(typeof e.Data=="string")r.Data=Dv.encode(e.Data);else if(e.Data instanceof Uint8Array)r.Data=e.Data;else throw new TypeError("Invalid DAG-PB form");if(e.Links!==void 0)if(Array.isArray(e.Links))r.Links=e.Links.map(SS),r.Links.sort(ES);else throw new TypeError("Invalid DAG-PB form");else r.Links=[];return r}function PS(e){if(!e||typeof e!="object"||Array.isArray(e)||e instanceof Uint8Array||e["/"]&&e["/"]===e.bytes)throw new TypeError("Invalid DAG-PB form");if(!Zg(e,rQ))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(e.Data!==void 0&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let r=0;r<e.Links.length;r++){const t=e.Links[r];if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!Zg(t,nQ))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(t.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash==null||!t.Hash["/"]||t.Hash["/"]!==t.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0){if(typeof t.Tsize!="number"||t.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(r>0&&ES(t,e.Links[r-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function oQ(e,r=[]){return TS({Data:e,Links:r})}function iQ(e,r,t){return SS({Hash:t,Name:e,Tsize:r})}function aQ(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}const sQ="dag-pb",uQ=112;function cQ(e){PS(e);const r={};return e.Links&&(r.Links=e.Links.map(t=>{const n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),e.Data&&(r.Data=e.Data),QZ(r)}function lQ(e){const r=aQ(e),t=KZ(r),n={};return t.Data&&(n.Data=t.Data),t.Links&&(n.Links=t.Links.map(o=>{const i={};try{i.Hash=Q.decode(o.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return o.Name!==void 0&&(i.Name=o.Name),o.Tsize!==void 0&&(i.Tsize=o.Tsize),i})),n}const fQ=Object.freeze(Object.defineProperty({__proto__:null,code:uQ,createLink:iQ,createNode:oQ,decode:lQ,encode:cQ,name:sQ,prepare:TS,validate:PS},Symbol.toStringTag,{value:"Module"}));function dQ(e,r){if(e===r)return!0;if(e.byteLength!==r.byteLength)return!1;for(let t=0;t<e.byteLength;t++)if(e[t]!==r[t])return!1;return!0}function Sy(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function hQ(e,r){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),a=i.charCodeAt(0);if(t[a]!==255)throw new TypeError(i+" is ambiguous");t[a]=o}var u=e.length,c=e.charAt(0),s=Math.log(u)/Math.log(256),l=Math.log(256)/Math.log(u);function d(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var _=0,b=0,w=0,E=v.length;w!==E&&v[w]===0;)w++,_++;for(var S=(E-w)*l+1>>>0,O=new Uint8Array(S);w!==E;){for(var A=v[w],$=0,I=S-1;(A!==0||$<b)&&I!==-1;I--,$++)A+=256*O[I]>>>0,O[I]=A%u>>>0,A=A/u>>>0;if(A!==0)throw new Error("Non-zero carry");b=$,w++}for(var L=S-b;L!==S&&O[L]===0;)L++;for(var X=c.repeat(_);L<S;++L)X+=e.charAt(O[L]);return X}function h(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var _=0;if(v[_]!==" "){for(var b=0,w=0;v[_]===c;)b++,_++;for(var E=(v.length-_)*s+1>>>0,S=new Uint8Array(E);v[_];){var O=t[v.charCodeAt(_)];if(O===255)return;for(var A=0,$=E-1;(O!==0||A<w)&&$!==-1;$--,A++)O+=u*S[$]>>>0,S[$]=O%256>>>0,O=O/256>>>0;if(O!==0)throw new Error("Non-zero carry");w=A,_++}if(v[_]!==" "){for(var I=E-w;I!==E&&S[I]===0;)I++;for(var L=new Uint8Array(b+(E-I)),X=b;I!==E;)L[X++]=S[I++];return L}}}function p(v){var _=h(v);if(_)return _;throw new Error(`Non-${r} character`)}return{encode:d,decodeUnsafe:h,decode:p}}var pQ=hQ,vQ=pQ;class _Q{constructor(r,t,n){m(this,"name");m(this,"prefix");m(this,"baseEncode");this.name=r,this.prefix=t,this.baseEncode=n}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}}class yQ{constructor(r,t,n){m(this,"name");m(this,"prefix");m(this,"baseDecode");m(this,"prefixCodePoint");if(this.name=r,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return CS(this,r)}}class bQ{constructor(r){m(this,"decoders");this.decoders=r}or(r){return CS(this,r)}decode(r){const t=r[0],n=this.decoders[t];if(n!=null)return n.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function CS(e,r){return new bQ({...e.decoders??{[e.prefix]:e},...r.decoders??{[r.prefix]:r}})}class mQ{constructor(r,t,n,o){m(this,"name");m(this,"prefix");m(this,"baseEncode");m(this,"baseDecode");m(this,"encoder");m(this,"decoder");this.name=r,this.prefix=t,this.baseEncode=n,this.baseDecode=o,this.encoder=new _Q(r,t,n),this.decoder=new yQ(r,t,o)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}}function AS({name:e,prefix:r,encode:t,decode:n}){return new mQ(e,r,t,n)}function IS({name:e,prefix:r,alphabet:t}){const{encode:n,decode:o}=vQ(t,e);return AS({prefix:r,name:e,encode:n,decode:i=>Sy(o(i))})}function gQ(e,r,t,n){const o={};for(let l=0;l<r.length;++l)o[r[l]]=l;let i=e.length;for(;e[i-1]==="=";)--i;const a=new Uint8Array(i*t/8|0);let u=0,c=0,s=0;for(let l=0;l<i;++l){const d=o[e[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|d,u+=t,u>=8&&(u-=8,a[s++]=255&c>>u)}if(u>=t||255&c<<8-u)throw new SyntaxError("Unexpected end of data");return a}function wQ(e,r,t){const n=r[r.length-1]==="=",o=(1<<t)-1;let i="",a=0,u=0;for(let c=0;c<e.length;++c)for(u=u<<8|e[c],a+=8;a>t;)a-=t,i+=r[o&u>>a];if(a!==0&&(i+=r[o&u<<t-a]),n)for(;i.length*t&7;)i+="=";return i}function _t({name:e,prefix:r,bitsPerChar:t,alphabet:n}){return AS({prefix:r,name:e,encode(o){return wQ(o,n,t)},decode(o){return gQ(o,n,t,e)}})}_t({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});_t({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const RS=_t({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});_t({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function fr(e){return RS.encode(e).slice(1)}function Kt(e){return RS.decode(`u${e}`)}const kc=_t({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});_t({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});_t({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});_t({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});_t({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});_t({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});_t({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});_t({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});_t({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const Mr=IS({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});IS({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var OQ=jS,Qg=128,EQ=-128,SQ=Math.pow(2,31);function jS(e,r,t){r=r||[],t=t||0;for(var n=t;e>=SQ;)r[t++]=e&255|Qg,e/=128;for(;e&EQ;)r[t++]=e&255|Qg,e>>>=7;return r[t]=e|0,jS.bytes=t-n+1,r}var TQ=Lv,PQ=128,Xg=127;function Lv(e,n){var t=0,n=n||0,o=0,i=n,a,u=e.length;do{if(i>=u)throw Lv.bytes=0,new RangeError("Could not decode varint");a=e[i++],t+=o<28?(a&Xg)<<o:(a&Xg)*Math.pow(2,o),o+=7}while(a>=PQ);return Lv.bytes=i-n,t}var CQ=Math.pow(2,7),AQ=Math.pow(2,14),IQ=Math.pow(2,21),RQ=Math.pow(2,28),jQ=Math.pow(2,35),$Q=Math.pow(2,42),NQ=Math.pow(2,49),kQ=Math.pow(2,56),MQ=Math.pow(2,63),DQ=function(e){return e<CQ?1:e<AQ?2:e<IQ?3:e<RQ?4:e<jQ?5:e<$Q?6:e<NQ?7:e<kQ?8:e<MQ?9:10},LQ={encode:OQ,decode:TQ,encodingLength:DQ},fl=LQ;function Uv(e,r=0){return[fl.decode(e,r),fl.decode.bytes]}function dl(e,r,t=0){return fl.encode(e,r,t),r}function hl(e){return fl.encodingLength(e)}function UQ(e,r){const t=r.byteLength,n=hl(e),o=n+hl(t),i=new Uint8Array(o+t);return dl(e,i,0),dl(t,i,n),i.set(r,o),new Ty(e,t,r,i)}function FQ(e){const r=Sy(e),[t,n]=Uv(r),[o,i]=Uv(r.subarray(n)),a=r.subarray(n+i);if(a.byteLength!==o)throw new Error("Incorrect length");return new Ty(t,o,a,r)}function xQ(e,r){if(e===r)return!0;{const t=r;return e.code===t.code&&e.size===t.size&&t.bytes instanceof Uint8Array&&dQ(e.bytes,t.bytes)}}class Ty{constructor(r,t,n,o){m(this,"code");m(this,"size");m(this,"digest");m(this,"bytes");this.code=r,this.size=t,this.digest=n,this.bytes=o}}function Jg(e,r){const{bytes:t,version:n}=e;switch(n){case 0:return VQ(t,Fv(e),r??Mr.encoder);default:return WQ(t,Fv(e),r??kc.encoder)}}const e0=new WeakMap;function Fv(e){const r=e0.get(e);if(r==null){const t=new Map;return e0.set(e,t),t}return r}var D0;class $e{constructor(r,t,n,o){m(this,"code");m(this,"version");m(this,"multihash");m(this,"bytes");m(this,"/");m(this,D0,"CID");this.code=t,this.version=r,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:r,multihash:t}=this;if(r!==ra)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==zQ)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return $e.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:r,digest:t}=this.multihash,n=UQ(r,t);return $e.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(r){return $e.equals(this,r)}static equals(r,t){const n=t;return n!=null&&r.code===n.code&&r.version===n.version&&xQ(r.multihash,n.multihash)}toString(r){return Jg(this,r)}toJSON(){return{"/":Jg(this)}}link(){return this}[(D0=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(r){if(r==null)return null;const t=r;if(t instanceof $e)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){const{version:n,code:o,multihash:i,bytes:a}=t;return new $e(n,o,i,a??t0(n,o,i.bytes))}else if(t[HQ]===!0){const{version:n,multihash:o,code:i}=t,a=FQ(o);return $e.create(n,i,a)}else return null}static create(r,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(r){case 0:{if(t!==ra)throw new Error(`Version 0 CID must use dag-pb (code: ${ra}) block encoding`);return new $e(r,t,n,n.bytes)}case 1:{const o=t0(r,t,n.bytes);return new $e(r,t,n,o)}default:throw new Error("Invalid version")}}static createV0(r){return $e.create(0,ra,r)}static createV1(r,t){return $e.create(1,r,t)}static decode(r){const[t,n]=$e.decodeFirst(r);if(n.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(r){const t=$e.inspectBytes(r),n=t.size-t.multihashSize,o=Sy(r.subarray(n,n+t.multihashSize));if(o.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=o.subarray(t.multihashSize-t.digestSize),a=new Ty(t.multihashCode,t.digestSize,i,o);return[t.version===0?$e.createV0(a):$e.createV1(t.codec,a),r.subarray(t.size)]}static inspectBytes(r){let t=0;const n=()=>{const[d,h]=Uv(r.subarray(t));return t+=h,d};let o=n(),i=ra;if(o===18?(o=0,t=0):i=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const a=t,u=n(),c=n(),s=t+c,l=s-a;return{version:o,codec:i,multihashCode:u,digestSize:c,multihashSize:l,size:s}}static parse(r,t){const[n,o]=BQ(r,t),i=$e.decode(o);if(i.version===0&&r[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Fv(i).set(n,r),i}}function BQ(e,r){switch(e[0]){case"Q":{const t=r??Mr;return[Mr.prefix,t.decode(`${Mr.prefix}${e}`)]}case Mr.prefix:{const t=r??Mr;return[Mr.prefix,t.decode(e)]}case kc.prefix:{const t=r??kc;return[kc.prefix,t.decode(e)]}default:{if(r==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],r.decode(e)]}}}function VQ(e,r,t){const{prefix:n}=t;if(n!==Mr.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const o=r.get(n);if(o==null){const i=t.encode(e).slice(1);return r.set(n,i),i}else return o}function WQ(e,r,t){const{prefix:n}=t,o=r.get(n);if(o==null){const i=t.encode(e);return r.set(n,i),i}else return o}const ra=112,zQ=18;function t0(e,r,t){const n=hl(e),o=n+hl(r),i=new Uint8Array(o+t.byteLength);return dl(e,i,0),dl(r,i,n),i.set(t,o),i}const HQ=Symbol.for("@ipld/js-cid/CID");function qQ(e){const[r,t,n]=e;return{payload:t,signatures:[{protected:r,signature:n}],link:$e.decode(Kt(t))}}function GQ(e){const r={signature:Kt(e.signature)};return e.header&&(r.header=e.header),e.protected&&(r.protected=Kt(e.protected)),r}function KQ(e){return{payload:Kt(e.payload),signatures:e.signatures.map(GQ)}}function YQ(e){const r={signature:fr(e.signature)};return e.header&&(r.header=e.header),e.protected&&(r.protected=fr(e.protected)),r}function ZQ(e){const r={payload:fr(e.payload),signatures:e.signatures.map(YQ)};try{return r.pld=xv(XQ(e.payload)),r}catch{try{return r.link=$e.decode(new Uint8Array(e.payload)),r}catch{throw new Error("Invalid payload, must be either JSON or CID")}}}function xv(e){if(typeof e=="string"){if(e.startsWith("ipfs://"))return $e.parse(e.slice(7))}else{if(Array.isArray(e))return e.map(xv);if(QQ(e)){const r={};for(const t in e)r[t]=xv(e[t]);return r}}return e}function QQ(e){return typeof e=="object"&&e!==null}function XQ(e){return JSON.parse(new TextDecoder().decode(e))}function JQ(e){const[r,t,n,o,i]=e,a={ciphertext:o,iv:n,protected:r,tag:i};return t&&(a.recipients=[{encrypted_key:t}]),a}function eX(e){const r={};return e.encrypted_key&&(r.encrypted_key=Kt(e.encrypted_key)),e.header&&(r.header=e.header),r}function tX(e){const r={ciphertext:Kt(e.ciphertext),protected:Kt(e.protected),iv:Kt(e.iv),tag:Kt(e.tag)};return e.aad&&(r.aad=Kt(e.aad)),e.recipients&&(r.recipients=e.recipients.map(eX)),e.unprotected&&(r.unprotected=e.unprotected),r}function rX(e){const r={};return e.encrypted_key&&(r.encrypted_key=fr(e.encrypted_key)),e.header&&(r.header=e.header),r}function nX(e){const r={ciphertext:fr(e.ciphertext),protected:fr(e.protected),iv:fr(e.iv),tag:fr(e.tag)};return e.aad&&(r.aad=fr(e.aad)),e.recipients&&(r.recipients=e.recipients.map(rX)),e.unprotected&&(r.unprotected=e.unprotected),r}const oX="dag-jose",iX=133;function $S(e){return"payload"in e&&typeof e.payload=="string"&&"signatures"in e&&Array.isArray(e.signatures)}function aX(e){return"payload"in e&&e.payload instanceof Uint8Array&&"signatures"in e&&Array.isArray(e.signatures)}function sX(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}function NS(e){return"ciphertext"in e&&typeof e.ciphertext=="string"&&"iv"in e&&typeof e.iv=="string"&&"protected"in e&&typeof e.protected=="string"&&"tag"in e&&typeof e.tag=="string"}function kS(e){if(typeof e=="string"){const r=e.split(".");if(r.length===3)return qQ(r);if(r.length===5)return JQ(r);throw new Error("Not a valid JOSE string")}if($S(e)||NS(e))return e;throw new Error("Not a valid unencoded JOSE object")}function uX(e){typeof e=="string"&&(e=kS(e));let r;if($S(e))r=KQ(e);else if(NS(e))r=tX(e);else throw new Error("Not a valid JOSE object");return new Uint8Array(_S(r))}function cX(e){let r;try{r=yS(e)}catch{throw new Error("Not a valid DAG-JOSE object")}if(aX(r))return ZQ(r);if(sX(r))return nX(r);throw new Error("Not a valid DAG-JOSE object")}const lX=Object.freeze(Object.defineProperty({__proto__:null,code:iX,decode:cX,encode:uX,name:oX,toGeneral:kS},Symbol.toStringTag,{value:"Module"}));function Pr(e){const r=new globalThis.AbortController;function t(){r.abort();for(const i of e)(i==null?void 0:i.removeEventListener)!=null&&i.removeEventListener("abort",t)}for(const i of e){if((i==null?void 0:i.aborted)===!0){t();break}(i==null?void 0:i.addEventListener)!=null&&i.addEventListener("abort",t)}function n(){for(const i of e)(i==null?void 0:i.removeEventListener)!=null&&i.removeEventListener("abort",t)}const o=r.signal;return o.clear=n,o}const fX="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let dX=(e=21)=>{let r="",t=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)r+=fX[t[e]&63];return r};function hX(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var pX=hX;const vX=bl(pX),MS=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,Py=vX(),Ad=MS&&!Py,_X=Py&&MS,yX=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!Py,Id=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;async function*Rd(e,r={}){const t=e.getReader();try{for(;;){const n=await t.read();if(n.done)return;yield n.value}}finally{r.preventCancel!==!0&&await t.cancel(),t.releaseLock()}}function r0(e,r){for(const t in r)Object.defineProperty(e,t,{value:r[t],enumerable:!0,configurable:!0});return e}function bX(e,r,t){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof r=="object"&&(t=r,r=""),r&&(t.code=r);try{return r0(e,t)}catch{t.message=e.message,t.stack=e.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(e)),r0(new o,t)}}var mX=bX;const Zt=bl(mX);function jd(e){const[r,t]=e[Symbol.asyncIterator]!=null?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>r.next(),push:o=>{n.push(o)},next:()=>n.length>0?{done:!1,value:n.shift()}:r.next(),[t](){return this}}}function gX(e){return e[Symbol.asyncIterator]!=null}function n0(e,r){let t=0;if(gX(e))return async function*(){for await(const c of e)yield r(c,t++)}();const n=jd(e),{value:o,done:i}=n.next();if(i===!0)return function*(){}();const a=r(o,t++);if(typeof a.then=="function")return async function*(){yield await a;for await(const c of n)yield r(c,t++)}();const u=r;return function*(){yield a;for(const c of n)yield u(c,t++)}()}let wX=class extends Error{constructor(t){super(t.statusText);m(this,"response");this.name="HTTPError",this.response=t}};class OX extends Error{constructor(r="Invalid mtime"){super(r),this.name="InvalidMtimeError"}}function Vo(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function pl(e){return e.constructor!=null&&(e.constructor.name==="Blob"||e.constructor.name==="File")&&typeof e.stream=="function"}function Bv(e){return typeof e=="object"&&(e.path!=null||e.content!=null)}function vl(e){return typeof(e==null?void 0:e.getReader)=="function"}function DS(e){if(e!=null)return typeof e=="string"&&(e=parseInt(e,8)),e&4095}function EX(e){return Object.prototype.hasOwnProperty.call(e,"secs")}function SX(e){return Object.prototype.hasOwnProperty.call(e,"Seconds")}function TX(e){return Array.isArray(e)}function $d(e){if(e!=null){if(EX(e)&&(e={secs:e.secs,nsecs:e.nsecs}),SX(e)&&(e={secs:BigInt(e.Seconds),nsecs:e.FractionalNanoseconds}),TX(e)&&(e={secs:BigInt(e[0]),nsecs:e[1]}),e instanceof Date){const r=e.getTime(),t=Math.floor(r/1e3);e={secs:BigInt(t),nsecs:(r-t*1e3)*1e3}}if(typeof e=="bigint"){const r=e/BigInt(1e9),t=e-r*BigInt(1e9);e={secs:r,nsecs:Number(t)}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw new OX("mtime-nsecs must be within the range [0,999999999]");return e}}}async function*PX(e,r){if(typeof e=="string"||e instanceof String||Vo(e)||pl(e)||e._readableState!=null)throw Zt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(vl(e)&&(e=Rd(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=jd(e),{value:n,done:o}=await t.peek();if(o===!0){yield*[];return}if(t.push(n),Number.isInteger(n))throw Zt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState!=null){yield*n0(t,async i=>$p({content:i},r));return}if(Vo(n)){yield $p({content:t},r);return}if(Bv(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||vl(n)||pl(n)){yield*n0(t,async i=>$p(i,r));return}}throw Bv(e)?Zt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):Zt(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}async function $p(e,r){const{path:t,mode:n,mtime:o,content:i}=e,a={path:t??"",mode:DS(n),mtime:$d(o)};return i!=null?a.content=await r(i):t==null&&(a.content=await r(e)),a}const LS=Symbol.for("@libp2p/peer-id");class Et extends Error{constructor(r="Invalid parameters"){super(r),this.name="InvalidParametersError"}}m(Et,"name","InvalidParametersError");class Cy extends Error{constructor(r="Invalid public key"){super(r),this.name="InvalidPublicKeyError"}}m(Cy,"name","InvalidPublicKeyError");class US extends Error{constructor(r="Invalid CID"){super(r),this.name="InvalidCIDError"}}m(US,"name","InvalidCIDError");class FS extends Error{constructor(r="Invalid Multihash"){super(r),this.name="InvalidMultihashError"}}m(FS,"name","InvalidMultihashError");class Ay extends Error{constructor(r="Unsupported key type"){super(r),this.name="UnsupportedKeyTypeError"}}m(Ay,"name","UnsupportedKeyTypeError");function CX(e){return e[Symbol.asyncIterator]!=null}function xS(e){if(CX(e))return(async()=>{const t=[];for await(const n of e)t.push(n);return t})();const r=[];for(const t of e)r.push(t);return r}async function BS(e){if(Vo(e))return new Blob([e]);if(typeof e=="string"||e instanceof String)return new Blob([e.toString()]);if(pl(e))return e;if(vl(e)&&(e=Rd(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const r=jd(e),{value:t,done:n}=await r.peek();if(n===!0)return o0(r);if(r.push(t),Number.isInteger(t))return new Blob([Uint8Array.from(await xS(r))]);if(Vo(t)||typeof t=="string"||t instanceof String)return o0(r)}throw new Et(`Unexpected input: ${e}`)}async function o0(e){const r=[];for await(const t of e)r.push(t);return new Blob(r)}function AX(e){return PX(e,BS)}function Iy(e){if(e!=null)return typeof e=="string"?e:e.toString(8).padStart(4,"0")}async function i0(e,r,t={},n){const o=[],i=new FormData;let a=0,u=0;for await(const{content:c,path:s,mode:l,mtime:d}of AX(e)){let h="";const p=c!=null?"file":"dir";a>0&&(h=`-${a}`);let v=p+h;const _=[];if(l!=null&&_.push(`mode=${Iy(l)}`),d!=null){const{secs:b,nsecs:w}=d;_.push(`mtime=${b}`),w!=null&&_.push(`mtime-nsecs=${w}`)}if(_.length>0&&(v=`${v}?${_.join("&")}`),c!=null){i.set(v,c,s!=null?encodeURIComponent(s):void 0);const b=u+c.size;o.push({name:s,start:u,end:b}),u=b}else if(s!=null)i.set(v,new File([""],encodeURIComponent(s),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");a++}return{total:u,parts:o,headers:t,body:i}}async function hn(e,r,t={},n=`-----------------------------${dX()}`){let o=i0;return _X&&(o=i0),o(e,r,t,n)}function qe(e){if(e==null)return e;const r=/^[A-Z]+$/,t={};return Object.keys(e).reduce((n,o)=>(r.test(o)?n[o.toLowerCase()]=e[o]:r.test(o[0])?n[o[0].toLowerCase()+o.slice(1)]=e[o]:n[o]=e[o],n),t)}function j({arg:e,searchParams:r,hashAlg:t,mtime:n,mode:o,...i}={}){r!=null&&(i={...i,...r}),t!=null&&(i.hash=t),n!=null&&(n=$d(n),i.mtime=n.secs,i.mtimeNsecs=n.nsecs),o!=null&&(i.mode=Iy(o)),isNaN(i.timeout)||(i.timeout=`${i.timeout}ms`),e==null?e=[]:Array.isArray(e)||(e=[e]);const a=new URLSearchParams(i);return e.forEach(u=>{a.append("arg",u)}),a}function VS(e){return async function*(t,n={}){const o=new AbortController,i=Pr([o.signal,n.signal]);try{const{headers:a,body:u,total:c,parts:s}=await hn(t,o,n.headers),[l,d]=typeof n.progress=="function"?IX(c,n.progress,s):[void 0,void 0],h=await e.post("add",{searchParams:j({"stream-channels":!0,...n,progress:!!l}),onUploadProgress:d,signal:i,headers:a,body:u});for await(let p of h.ndjson())p=qe(p),p.hash!==void 0?yield jX(p):l!=null&&l(p.bytes??0,p.name)}finally{i.clear()}}}const IX=(e,r,t)=>t!=null?[void 0,RX(e,t,r)]:[r,void 0],RX=(e,r,t)=>{let n=0;const o=r.length;return({loaded:i,total:a})=>{const u=Math.floor(i/a*e);for(;n<o;){const{start:c,end:s,name:l}=r[n];if(u<s){t(u-c,l);break}else t(s-c,l),n+=1}}};function jX({name:e,hash:r,size:t,mode:n,mtime:o,mtimeNsecs:i}){const a={path:e,cid:Q.parse(r),size:parseInt(t)};return n!=null&&(a.mode=parseInt(n,8)),o!=null&&(a.mtime={secs:o,nsecs:i??0}),a}function $X(e){return e[Symbol.asyncIterator]!=null}function Nd(e){if($X(e))return(async()=>{let t;for await(const n of e)t=n;return t})();let r;for(const t of e)r=t;return r}async function*NX(e,r){if(e==null)throw Zt(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if(typeof e=="string"||e instanceof String){yield mc(e.toString(),r);return}if(Vo(e)||pl(e)){yield mc(e,r);return}if(vl(e)&&(e=Rd(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=jd(e),{value:n,done:o}=await t.peek();if(o===!0){yield{content:[]};return}if(t.push(n),Number.isInteger(n)||Vo(n)||typeof n=="string"||n instanceof String){yield mc(t,r);return}throw Zt(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(Bv(e)){yield mc(e,r);return}throw Zt(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function mc(e,r){const{path:t,mode:n,mtime:o,content:i}=e,a={path:t??"",mode:DS(n),mtime:$d(o)};return i!=null?a.content=await r(i):t==null&&(a.content=await r(e)),a}function kX(e){return NX(e,BS)}function MX(e){const r=VS(e);return async function(n,o={}){const i=kX(n),a=r(i,o),u=await Nd(a);if(u==null)throw new Error("Invalid body");return u}}const WS=Symbol.for("@achingbrain/uint8arraylist");function a0(e,r){if(r==null||r<0)throw new RangeError("index is out of bounds");let t=0;for(const n of e){const o=t+n.byteLength;if(r<o)return{buf:n,index:r-t};t=o}throw new RangeError("index is out of bounds")}function gc(e){return!!(e!=null&&e[WS])}var L0;class vt{constructor(...r){m(this,"bufs");m(this,"length");m(this,L0,!0);this.bufs=[],this.length=0,r.length>0&&this.appendAll(r)}*[(L0=WS,Symbol.iterator)](){yield*this.bufs}get byteLength(){return this.length}append(...r){this.appendAll(r)}appendAll(r){let t=0;for(const n of r)if(n instanceof Uint8Array)t+=n.byteLength,this.bufs.push(n);else if(gc(n))t+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=t}prepend(...r){this.prependAll(r)}prependAll(r){let t=0;for(const n of r.reverse())if(n instanceof Uint8Array)t+=n.byteLength,this.bufs.unshift(n);else if(gc(n))t+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=t}get(r){const t=a0(this.bufs,r);return t.buf[t.index]}set(r,t){const n=a0(this.bufs,r);n.buf[n.index]=t}write(r,t=0){if(r instanceof Uint8Array)for(let n=0;n<r.length;n++)this.set(t+n,r[n]);else if(gc(r))for(let n=0;n<r.length;n++)this.set(t+n,r.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(r){if(r=Math.trunc(r),!(Number.isNaN(r)||r<=0)){if(r===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(r>=this.bufs[0].byteLength)r-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(r),this.length-=r;break}}}slice(r,t){const{bufs:n,length:o}=this._subList(r,t);return mr(n,o)}subarray(r,t){const{bufs:n,length:o}=this._subList(r,t);return n.length===1?n[0]:mr(n,o)}sublist(r,t){const{bufs:n,length:o}=this._subList(r,t),i=new vt;return i.length=o,i.bufs=[...n],i}_subList(r,t){if(r=r??0,t=t??this.length,r<0&&(r=this.length+r),t<0&&(t=this.length+t),r<0||t>this.length)throw new RangeError("index is out of bounds");if(r===t)return{bufs:[],length:0};if(r===0&&t===this.length)return{bufs:this.bufs,length:this.length};const n=[];let o=0;for(let i=0;i<this.bufs.length;i++){const a=this.bufs[i],u=o,c=u+a.byteLength;if(o=c,r>=c)continue;const s=r>=u&&r<c,l=t>u&&t<=c;if(s&&l){if(r===u&&t===c){n.push(a);break}const d=r-u;n.push(a.subarray(d,d+(t-r)));break}if(s){if(r===0){n.push(a);continue}n.push(a.subarray(r-u));continue}if(l){if(t===c){n.push(a);break}n.push(a.subarray(0,t-u));break}n.push(a)}return{bufs:n,length:t-r}}indexOf(r,t=0){if(!gc(r)&&!(r instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const n=r instanceof Uint8Array?r:r.subarray();if(t=Number(t??0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),r.length===0)return t>this.length?this.length:t;const o=n.byteLength;if(o===0)throw new TypeError("search must be at least 1 byte long");const i=256,a=new Int32Array(i);for(let d=0;d<i;d++)a[d]=-1;for(let d=0;d<o;d++)a[n[d]]=d;const u=a,c=this.byteLength-n.byteLength,s=n.byteLength-1;let l;for(let d=t;d<=c;d+=l){l=0;for(let h=s;h>=0;h--){const p=this.get(d+h);if(n[h]!==p){l=Math.max(1,h-u[p]);break}}if(l===0)return d}return-1}getInt8(r){const t=this.subarray(r,r+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getInt8(0)}setInt8(r,t){const n=Yr(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,t),this.write(n,r)}getInt16(r,t){const n=this.subarray(r,r+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,t)}setInt16(r,t,n){const o=$r(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt16(0,t,n),this.write(o,r)}getInt32(r,t){const n=this.subarray(r,r+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,t)}setInt32(r,t,n){const o=$r(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt32(0,t,n),this.write(o,r)}getBigInt64(r,t){const n=this.subarray(r,r+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,t)}setBigInt64(r,t,n){const o=$r(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigInt64(0,t,n),this.write(o,r)}getUint8(r){const t=this.subarray(r,r+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0)}setUint8(r,t){const n=Yr(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,t),this.write(n,r)}getUint16(r,t){const n=this.subarray(r,r+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,t)}setUint16(r,t,n){const o=$r(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint16(0,t,n),this.write(o,r)}getUint32(r,t){const n=this.subarray(r,r+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,t)}setUint32(r,t,n){const o=$r(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint32(0,t,n),this.write(o,r)}getBigUint64(r,t){const n=this.subarray(r,r+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,t)}setBigUint64(r,t,n){const o=$r(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigUint64(0,t,n),this.write(o,r)}getFloat32(r,t){const n=this.subarray(r,r+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,t)}setFloat32(r,t,n){const o=$r(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat32(0,t,n),this.write(o,r)}getFloat64(r,t){const n=this.subarray(r,r+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,t)}setFloat64(r,t,n){const o=$r(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat64(0,t,n),this.write(o,r)}equals(r){if(r==null||!(r instanceof vt)||r.bufs.length!==this.bufs.length)return!1;for(let t=0;t<this.bufs.length;t++)if(!Qr(this.bufs[t],r.bufs[t]))return!1;return!0}static fromUint8Arrays(r,t){const n=new vt;return n.bufs=r,t==null&&(t=r.reduce((o,i)=>o+i.byteLength,0)),n.length=t,n}}const DX=parseInt("11111",2),Vv=parseInt("10000000",2),LX=parseInt("01111111",2),s0={0:na,1:na,2:UX,3:BX,4:VX,5:xX,6:FX,16:na,22:na,48:na};function kd(e,r={offset:0}){const t=e[r.offset]&DX;if(r.offset++,s0[t]!=null)return s0[t](e,r);throw new Error("No decoder for tag "+t)}function Xu(e,r){let t=0;if((e[r.offset]&Vv)===Vv){const n=e[r.offset]&LX;let o="0x";r.offset++;for(let i=0;i<n;i++,r.offset++)o+=e[r.offset].toString(16).padStart(2,"0");t=parseInt(o,16)}else t=e[r.offset],r.offset++;return t}function na(e,r){Xu(e,r);const t=[];for(;!(r.offset>=e.byteLength);){const n=kd(e,r);if(n===null)break;t.push(n)}return t}function UX(e,r){const t=Xu(e,r),n=r.offset,o=r.offset+t,i=[];for(let a=n;a<o;a++)a===n&&e[a]===0||i.push(e[a]);return r.offset+=t,Uint8Array.from(i)}function FX(e,r){const t=Xu(e,r),n=r.offset+t,o=e[r.offset];r.offset++;let i=0,a=0;o<40?(i=0,a=o):o<80?(i=1,a=o-40):(i=2,a=o-80);let u=`${i}.${a}`,c=[];for(;r.offset<n;){const s=e[r.offset];if(r.offset++,c.push(s&127),s<128){c.reverse();let l=0;for(let d=0;d<c.length;d++)l+=c[d]<<d*7;u+=`.${l}`,c=[]}}return u}function xX(e,r){return r.offset++,null}function BX(e,r){const t=Xu(e,r),n=e[r.offset];r.offset++;const o=e.subarray(r.offset,r.offset+t-1);if(r.offset+=t,n!==0)throw new Error("Unused bits in bit string is unimplemented");return o}function VX(e,r){const t=Xu(e,r),n=e.subarray(r.offset,r.offset+t);return r.offset+=t,n}function WX(e){let r=e.toString(16);r.length%2===1&&(r="0"+r);const t=new vt;for(let n=0;n<r.length;n+=2)t.append(Uint8Array.from([parseInt(`${r[n]}${r[n+1]}`,16)]));return t}function Ry(e){if(e.byteLength<128)return Uint8Array.from([e.byteLength]);const r=WX(e.byteLength);return new vt(Uint8Array.from([r.byteLength|Vv]),r)}function Wv(e){const r=new vt,t=128;return(e.subarray()[0]&t)===t&&r.append(Uint8Array.from([0])),r.append(e),new vt(Uint8Array.from([2]),Ry(r),r)}function zS(e){const r=Uint8Array.from([0]),t=new vt(r,e);return new vt(Uint8Array.from([3]),Ry(t),t)}function ma(e,r=48){const t=new vt;for(const n of e)t.append(n);return new vt(Uint8Array.from([r]),Ry(t),t)}async function zX(e,r,t){const n=await crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:e.crv??"P-256"},!1,["verify"]);return crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},n,r,t.subarray())}const HX=Uint8Array.from([6,8,42,134,72,206,61,3,1,7]),qX=Uint8Array.from([6,5,43,129,4,0,34]),GX=Uint8Array.from([6,5,43,129,4,0,35]),KX={ext:!0,kty:"EC",crv:"P-256"},YX={ext:!0,kty:"EC",crv:"P-384"},ZX={ext:!0,kty:"EC",crv:"P-521"},Np=32,kp=48,Mp=66;function HS(e){const r=kd(e);return QX(r)}function QX(e){const r=e[1][1][0],t=1;let n,o;if(r.byteLength===Np*2+1)return n=we(r.subarray(t,t+Np),"base64url"),o=we(r.subarray(t+Np),"base64url"),new Dp({...KX,key_ops:["verify"],x:n,y:o});if(r.byteLength===kp*2+1)return n=we(r.subarray(t,t+kp),"base64url"),o=we(r.subarray(t+kp),"base64url"),new Dp({...YX,key_ops:["verify"],x:n,y:o});if(r.byteLength===Mp*2+1)return n=we(r.subarray(t,t+Mp),"base64url"),o=we(r.subarray(t+Mp),"base64url"),new Dp({...ZX,key_ops:["verify"],x:n,y:o});throw new Et(`coordinates were wrong length, got ${r.byteLength}, expected 65, 97 or 133`)}function XX(e){return ma([Wv(Uint8Array.from([1])),ma([JX(e.crv)],160),ma([zS(new vt(Uint8Array.from([4]),St(e.x??"","base64url"),St(e.y??"","base64url")))],161)]).subarray()}function JX(e){if(e==="P-256")return HX;if(e==="P-384")return qX;if(e==="P-521")return GX;throw new Et(`Invalid curve ${e}`)}class Dp{constructor(r){m(this,"type","ECDSA");m(this,"jwk");m(this,"_raw");this.jwk=r}get raw(){return this._raw==null&&(this._raw=XX(this.jwk)),this._raw}toMultihash(){return Zr.digest(ky(this))}toCID(){return Q.createV1(114,this.toMultihash())}toString(){return De.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:Qr(this.raw,r.raw)}async verify(r,t){return zX(this.jwk,t,r)}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ht=BigInt(0),rt=BigInt(1),u0=BigInt(2),eJ=BigInt(8),tJ={zip215:!0};function rJ(e){const r=DP(e);return LP(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...r})}function nJ(e){const r=rJ(e),{Fp:t,n,prehash:o,hash:i,randomBytes:a,nByteLength:u,h:c}=r,s=u0<<BigInt(u*8)-rt,l=t.create,d=V0(r.n,r.nBitLength);function h(k,T){const C=t.sqr(k),R=t.sqr(T),V=t.add(t.mul(r.a,C),R),H=t.add(t.ONE,t.mul(r.d,t.mul(C,R)));return t.eql(V,H)}if(!h(r.Gx,r.Gy))throw new Error("bad curve params: generator point");const p=r.uvRatio||((k,T)=>{try{return{isValid:!0,value:t.sqrt(k*t.inv(T))}}catch{return{isValid:!1,value:Ht}}}),v=r.adjustScalarBytes||(k=>k),_=r.domain||((k,T,C)=>{if(Uh("phflag",C),T.length||C)throw new Error("Contexts/pre-hash are not supported");return k});function b(k,T,C=!1){const R=C?rt:Ht;Vi("coordinate "+k,T,R,s)}function w(k){if(!(k instanceof O))throw new Error("ExtendedPoint expected")}const E=Wy((k,T)=>{const{ex:C,ey:R,ez:V}=k,H=k.is0();T==null&&(T=H?eJ:t.inv(V));const F=l(C*T),te=l(R*T),Z=l(V*T);if(H)return{x:Ht,y:rt};if(Z!==rt)throw new Error("invZ was invalid");return{x:F,y:te}}),S=Wy(k=>{const{a:T,d:C}=r;if(k.is0())throw new Error("bad point: ZERO");const{ex:R,ey:V,ez:H,et:F}=k,te=l(R*R),Z=l(V*V),se=l(H*H),y=l(se*se),P=l(te*T),M=l(se*l(P+Z)),x=l(y+l(C*l(te*Z)));if(M!==x)throw new Error("bad point: equation left != right (1)");const K=l(R*V),me=l(H*F);if(K!==me)throw new Error("bad point: equation left != right (2)");return!0});class O{constructor(T,C,R,V){b("x",T),b("y",C),b("z",R,!0),b("t",V),this.ex=T,this.ey=C,this.ez=R,this.et=V,Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(T){if(T instanceof O)throw new Error("extended point not allowed");const{x:C,y:R}=T||{};return b("x",C),b("y",R),new O(C,R,rt,l(C*R))}static normalizeZ(T){const C=UP(t,T.map(R=>R.ez));return T.map((R,V)=>R.toAffine(C[V])).map(O.fromAffine)}static msm(T,C){return FP(O,d,T,C)}_setWindowSize(T){I.setWindowSize(this,T)}assertValidity(){S(this)}equals(T){w(T);const{ex:C,ey:R,ez:V}=this,{ex:H,ey:F,ez:te}=T,Z=l(C*te),se=l(H*V),y=l(R*te),P=l(F*V);return Z===se&&y===P}is0(){return this.equals(O.ZERO)}negate(){return new O(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:T}=r,{ex:C,ey:R,ez:V}=this,H=l(C*C),F=l(R*R),te=l(u0*l(V*V)),Z=l(T*H),se=C+R,y=l(l(se*se)-H-F),P=Z+F,M=P-te,x=Z-F,K=l(y*M),me=l(P*x),je=l(y*x),yt=l(M*P);return new O(K,me,yt,je)}add(T){w(T);const{a:C,d:R}=r,{ex:V,ey:H,ez:F,et:te}=this,{ex:Z,ey:se,ez:y,et:P}=T,M=l(V*Z),x=l(H*se),K=l(te*R*P),me=l(F*y),je=l((V+H)*(Z+se)-M-x),yt=me-K,Cr=me+K,fo=l(x-C*M),Di=l(je*yt),Li=l(Cr*fo),Ui=l(je*fo),Fi=l(yt*Cr);return new O(Di,Li,Fi,Ui)}subtract(T){return this.add(T.negate())}wNAF(T){return I.wNAFCached(this,T,O.normalizeZ)}multiply(T){const C=T;Vi("scalar",C,rt,n);const{p:R,f:V}=this.wNAF(C);return O.normalizeZ([R,V])[0]}multiplyUnsafe(T,C=O.ZERO){const R=T;return Vi("scalar",R,Ht,n),R===Ht?$:this.is0()||R===rt?this:I.wNAFCachedUnsafe(this,R,O.normalizeZ,C)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return I.unsafeLadder(this,n).is0()}toAffine(T){return E(this,T)}clearCofactor(){const{h:T}=r;return T===rt?this:this.multiplyUnsafe(T)}static fromHex(T,C=!1){const{d:R,a:V}=r,H=t.BYTES;T=ar("pointHex",T,H),Uh("zip215",C);const F=T.slice(),te=T[H-1];F[H-1]=te&-129;const Z=Fh(F),se=C?s:t.ORDER;Vi("pointHex.y",Z,Ht,se);const y=l(Z*Z),P=l(y-rt),M=l(R*y-V);let{isValid:x,value:K}=p(P,M);if(!x)throw new Error("Point.fromHex: invalid y coordinate");const me=(K&rt)===rt,je=(te&128)!==0;if(!C&&K===Ht&&je)throw new Error("Point.fromHex: x=0 and x_0=1");return je!==me&&(K=l(-K)),O.fromAffine({x:K,y:Z})}static fromPrivateKey(T){const{scalar:C}=ae(T);return A.multiply(C)}toRawBytes(){const{x:T,y:C}=this.toAffine(),R=zy(C,t.BYTES);return R[R.length-1]|=T&rt?128:0,R}toHex(){return BP(this.toRawBytes())}}O.BASE=new O(r.Gx,r.Gy,rt,l(r.Gx*r.Gy)),O.ZERO=new O(Ht,rt,rt,Ht);const{BASE:A,ZERO:$}=O,I=xP(O,u*8);function L(k){return ur(k,n)}function X(k){return L(Fh(k))}function ae(k){const T=t.BYTES;k=ar("private key",k,T);const C=ar("hashed private key",i(k),2*T),R=v(C.slice(0,T)),V=C.slice(T,2*T),H=X(R);return{head:R,prefix:V,scalar:H}}function _e(k){const{head:T,prefix:C,scalar:R}=ae(k),V=A.multiply(R),H=V.toRawBytes();return{head:T,prefix:C,scalar:R,point:V,pointBytes:H}}function ne(k){return _e(k).pointBytes}function ve(k=Uint8Array.of(),...T){const C=Hy(...T);return X(i(_(C,ar("context",k),!!o)))}function it(k,T,C={}){k=ar("message",k),o&&(k=o(k));const{prefix:R,scalar:V,pointBytes:H}=_e(T),F=ve(C.context,R,k),te=A.multiply(F).toRawBytes(),Z=ve(C.context,te,H,k),se=L(F+Z*V);Vi("signature.s",se,Ht,n);const y=Hy(te,zy(se,t.BYTES));return ar("result",y,t.BYTES*2)}const ee=tJ;function be(k,T,C,R=ee){const{context:V,zip215:H}=R,F=t.BYTES;k=ar("signature",k,2*F),T=ar("message",T),C=ar("publicKey",C,F),H!==void 0&&Uh("zip215",H),o&&(T=o(T));const te=Fh(k.slice(F,2*F));let Z,se,y;try{Z=O.fromHex(C,H),se=O.fromHex(k.slice(0,F),H),y=A.multiplyUnsafe(te)}catch{return!1}if(!H&&Z.isSmallOrder())return!1;const P=ve(V,se.toRawBytes(),Z.toRawBytes(),T);return se.add(Z.multiplyUnsafe(P)).subtract(y).clearCofactor().equals(O.ZERO)}return A._setWindowSize(8),{CURVE:r,getPublicKey:ne,sign:it,verify:be,ExtendedPoint:O,utils:{getExtendedPublicKey:_e,randomPrivateKey:()=>a(t.BYTES),precompute(k=8,T=O.BASE){return T._setWindowSize(k),T.multiply(BigInt(3)),T}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jy=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),c0=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const oJ=BigInt(1),l0=BigInt(2);BigInt(3);const iJ=BigInt(5),aJ=BigInt(8);function sJ(e){const r=BigInt(10),t=BigInt(20),n=BigInt(40),o=BigInt(80),i=jy,u=e*e%i*e%i,c=Wt(u,l0,i)*u%i,s=Wt(c,oJ,i)*e%i,l=Wt(s,iJ,i)*s%i,d=Wt(l,r,i)*l%i,h=Wt(d,t,i)*d%i,p=Wt(h,n,i)*h%i,v=Wt(p,o,i)*p%i,_=Wt(v,o,i)*p%i,b=Wt(_,r,i)*l%i;return{pow_p_5_8:Wt(b,l0,i)*e%i,b2:u}}function uJ(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function cJ(e,r){const t=jy,n=ur(r*r*r,t),o=ur(n*n*r,t),i=sJ(e*o).pow_p_5_8;let a=ur(e*n*i,t);const u=ur(r*a*a,t),c=a,s=ur(a*c0,t),l=u===e,d=u===ur(-e,t),h=u===ur(-e*c0,t);return l&&(a=c),(d||h)&&(a=s),VP(a,t)&&(a=ur(-a,t)),{isValid:l||d,value:a}}const f0=V0(jy,void 0,!0),lJ={a:f0.create(BigInt(-1)),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:f0,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:aJ,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:kP,randomBytes:NP,adjustScalarBytes:uJ,uvRatio:cJ},fJ=nJ(lJ),qS=32;function dJ(e,r,t){return fJ.verify(r,t instanceof Uint8Array?t:t.subarray(),e)}class hJ{constructor(r){m(this,"type","Ed25519");m(this,"raw");this.raw=KS(r,qS)}toMultihash(){return Zr.digest(ky(this))}toCID(){return Q.createV1(114,this.toMultihash())}toString(){return De.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:Qr(this.raw,r.raw)}verify(r,t){return dJ(this.raw,t,r)}}function GS(e){return e=KS(e,qS),new hJ(e)}function KS(e,r){if(e=Uint8Array.from(e??[]),e.length!==r)throw new Et(`Key must be a Uint8Array of length ${r}, got ${e.length}`);return e}const $y=new Float32Array([-0]),Lr=new Uint8Array($y.buffer);function pJ(e,r,t){$y[0]=e,r[t]=Lr[0],r[t+1]=Lr[1],r[t+2]=Lr[2],r[t+3]=Lr[3]}function vJ(e,r){return Lr[0]=e[r],Lr[1]=e[r+1],Lr[2]=e[r+2],Lr[3]=e[r+3],$y[0]}const Ny=new Float64Array([-0]),Ze=new Uint8Array(Ny.buffer);function _J(e,r,t){Ny[0]=e,r[t]=Ze[0],r[t+1]=Ze[1],r[t+2]=Ze[2],r[t+3]=Ze[3],r[t+4]=Ze[4],r[t+5]=Ze[5],r[t+6]=Ze[6],r[t+7]=Ze[7]}function yJ(e,r){return Ze[0]=e[r],Ze[1]=e[r+1],Ze[2]=e[r+2],Ze[3]=e[r+3],Ze[4]=e[r+4],Ze[5]=e[r+5],Ze[6]=e[r+6],Ze[7]=e[r+7],Ny[0]}const bJ=BigInt(Number.MAX_SAFE_INTEGER),mJ=BigInt(Number.MIN_SAFE_INTEGER);class Je{constructor(r,t){m(this,"lo");m(this,"hi");this.lo=r|0,this.hi=t|0}toNumber(r=!1){if(!r&&this.hi>>>31>0){const t=~this.lo+1>>>0;let n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(r=!1){if(r)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const t=~this.lo+1>>>0;let n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(BigInt(t)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(r=!1){return this.toBigInt(r).toString()}zzEncode(){const r=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^r)>>>0,this.lo=(this.lo<<1^r)>>>0,this}zzDecode(){const r=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^r)>>>0,this.hi=(this.hi>>>1^r)>>>0,this}length(){const r=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?r<16384?r<128?1:2:r<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}static fromBigInt(r){if(r===0n)return Dn;if(r<bJ&&r>mJ)return this.fromNumber(Number(r));const t=r<0n;t&&(r=-r);let n=r>>32n,o=r-(n<<32n);return t&&(n=~n|0n,o=~o|0n,++o>d0&&(o=0n,++n>d0&&(n=0n))),new Je(Number(o),Number(n))}static fromNumber(r){if(r===0)return Dn;const t=r<0;t&&(r=-r);let n=r>>>0,o=(r-n)/4294967296>>>0;return t&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new Je(n,o)}static from(r){return typeof r=="number"?Je.fromNumber(r):typeof r=="bigint"?Je.fromBigInt(r):typeof r=="string"?Je.fromBigInt(BigInt(r)):r.low!=null||r.high!=null?new Je(r.low>>>0,r.high>>>0):Dn}}const Dn=new Je(0,0);Dn.toBigInt=function(){return 0n};Dn.zzEncode=Dn.zzDecode=function(){return this};Dn.length=function(){return 1};const d0=4294967296n;function gJ(e){let r=0,t=0;for(let n=0;n<e.length;++n)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:(t&64512)===55296&&(e.charCodeAt(n+1)&64512)===56320?(++n,r+=4):r+=3;return r}function wJ(e,r,t){if(t-r<1)return"";let o;const i=[];let a=0,u;for(;r<t;)u=e[r++],u<128?i[a++]=u:u>191&&u<224?i[a++]=(u&31)<<6|e[r++]&63:u>239&&u<365?(u=((u&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,i[a++]=55296+(u>>10),i[a++]=56320+(u&1023)):i[a++]=(u&15)<<12|(e[r++]&63)<<6|e[r++]&63,a>8191&&((o??(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o!=null?(a>0&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))}function YS(e,r,t){const n=t;let o,i;for(let a=0;a<e.length;++a)o=e.charCodeAt(a),o<128?r[t++]=o:o<2048?(r[t++]=o>>6|192,r[t++]=o&63|128):(o&64512)===55296&&((i=e.charCodeAt(a+1))&64512)===56320?(o=65536+((o&1023)<<10)+(i&1023),++a,r[t++]=o>>18|240,r[t++]=o>>12&63|128,r[t++]=o>>6&63|128,r[t++]=o&63|128):(r[t++]=o>>12|224,r[t++]=o>>6&63|128,r[t++]=o&63|128);return t-n}function At(e,r){return RangeError(`index out of range: ${e.pos} + ${r??1} > ${e.len}`)}function wc(e,r){return(e[r-4]|e[r-3]<<8|e[r-2]<<16|e[r-1]<<24)>>>0}class OJ{constructor(r){m(this,"buf");m(this,"pos");m(this,"len");m(this,"_slice",Uint8Array.prototype.subarray);this.buf=r,this.pos=0,this.len=r.length}uint32(){let r=4294967295;if(r=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(r=(r|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return r;if((this.pos+=5)>this.len)throw this.pos=this.len,At(this,10);return r}int32(){return this.uint32()|0}sint32(){const r=this.uint32();return r>>>1^-(r&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw At(this,4);return wc(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw At(this,4);return wc(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw At(this,4);const r=vJ(this.buf,this.pos);return this.pos+=4,r}double(){if(this.pos+8>this.len)throw At(this,4);const r=yJ(this.buf,this.pos);return this.pos+=8,r}bytes(){const r=this.uint32(),t=this.pos,n=this.pos+r;if(n>this.len)throw At(this,r);return this.pos+=r,t===n?new Uint8Array(0):this.buf.subarray(t,n)}string(){const r=this.bytes();return wJ(r,0,r.length)}skip(r){if(typeof r=="number"){if(this.pos+r>this.len)throw At(this,r);this.pos+=r}else do if(this.pos>=this.len)throw At(this);while(this.buf[this.pos++]&128);return this}skipType(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${r} at offset ${this.pos}`)}return this}readLongVarint(){const r=new Je(0,0);let t=0;if(this.len-this.pos>4){for(;t<4;++t)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw At(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,r}if(this.len-this.pos>4){for(;t<5;++t)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;t<5;++t){if(this.pos>=this.len)throw At(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw At(this,8);const r=wc(this.buf,this.pos+=4),t=wc(this.buf,this.pos+=4);return new Je(r,t)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const r=UE(this.buf,this.pos);return this.pos+=rr(r),r}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function EJ(e){return new OJ(e instanceof Uint8Array?e:e.subarray())}function ZS(e,r,t){const n=EJ(e);return r.decode(n,void 0,t)}function SJ(e){let n,o=8192;return function(a){if(a<1||a>4096)return Yr(a);o+a>8192&&(n=Yr(8192),o=0);const u=n.subarray(o,o+=a);return o&7&&(o=(o|7)+1),u}}class ca{constructor(r,t,n){m(this,"fn");m(this,"len");m(this,"next");m(this,"val");this.fn=r,this.len=t,this.next=void 0,this.val=n}}function Lp(){}class TJ{constructor(r){m(this,"head");m(this,"tail");m(this,"len");m(this,"next");this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}}const PJ=SJ();function CJ(e){return globalThis.Buffer!=null?Yr(e):PJ(e)}class zv{constructor(){m(this,"len");m(this,"head");m(this,"tail");m(this,"states");this.len=0,this.head=new ca(Lp,0,0),this.tail=this.head,this.states=null}_push(r,t,n){return this.tail=this.tail.next=new ca(r,t,n),this.len+=t,this}uint32(r){return this.len+=(this.tail=this.tail.next=new IJ((r=r>>>0)<128?1:r<16384?2:r<2097152?3:r<268435456?4:5,r)).len,this}int32(r){return r<0?this._push(Oc,10,Je.fromNumber(r)):this.uint32(r)}sint32(r){return this.uint32((r<<1^r>>31)>>>0)}uint64(r){const t=Je.fromBigInt(r);return this._push(Oc,t.length(),t)}uint64Number(r){return this._push(LE,rr(r),r)}uint64String(r){return this.uint64(BigInt(r))}int64(r){return this.uint64(r)}int64Number(r){return this.uint64Number(r)}int64String(r){return this.uint64String(r)}sint64(r){const t=Je.fromBigInt(r).zzEncode();return this._push(Oc,t.length(),t)}sint64Number(r){const t=Je.fromNumber(r).zzEncode();return this._push(Oc,t.length(),t)}sint64String(r){return this.sint64(BigInt(r))}bool(r){return this._push(Up,1,r?1:0)}fixed32(r){return this._push(oa,4,r>>>0)}sfixed32(r){return this.fixed32(r)}fixed64(r){const t=Je.fromBigInt(r);return this._push(oa,4,t.lo)._push(oa,4,t.hi)}fixed64Number(r){const t=Je.fromNumber(r);return this._push(oa,4,t.lo)._push(oa,4,t.hi)}fixed64String(r){return this.fixed64(BigInt(r))}sfixed64(r){return this.fixed64(r)}sfixed64Number(r){return this.fixed64Number(r)}sfixed64String(r){return this.fixed64String(r)}float(r){return this._push(pJ,4,r)}double(r){return this._push(_J,8,r)}bytes(r){const t=r.length>>>0;return t===0?this._push(Up,1,0):this.uint32(t)._push(RJ,t,r)}string(r){const t=gJ(r);return t!==0?this.uint32(t)._push(YS,t,r):this._push(Up,1,0)}fork(){return this.states=new TJ(this),this.head=this.tail=new ca(Lp,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ca(Lp,0,0),this.len=0),this}ldelim(){const r=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=r.next,this.tail=t,this.len+=n),this}finish(){let r=this.head.next;const t=CJ(this.len);let n=0;for(;r!=null;)r.fn(r.val,t,n),n+=r.len,r=r.next;return t}}function Up(e,r,t){r[t]=e&255}function AJ(e,r,t){for(;e>127;)r[t++]=e&127|128,e>>>=7;r[t]=e}class IJ extends ca{constructor(t,n){super(AJ,t,n);m(this,"next");this.next=void 0}}function Oc(e,r,t){for(;e.hi!==0;)r[t++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)r[t++]=e.lo&127|128,e.lo=e.lo>>>7;r[t++]=e.lo}function oa(e,r,t){r[t]=e&255,r[t+1]=e>>>8&255,r[t+2]=e>>>16&255,r[t+3]=e>>>24}function RJ(e,r,t){r.set(e,t)}globalThis.Buffer!=null&&(zv.prototype.bytes=function(e){const r=e.length>>>0;return this.uint32(r),r>0&&this._push(jJ,r,e),this},zv.prototype.string=function(e){const r=globalThis.Buffer.byteLength(e);return this.uint32(r),r>0&&this._push($J,r,e),this});function jJ(e,r,t){r.set(e,t)}function $J(e,r,t){e.length<40?YS(e,r,t):r.utf8Write!=null?r.utf8Write(e,t):r.set(St(e),t)}function NJ(){return new zv}function QS(e,r){const t=NJ();return r.encode(e,t,{lengthDelimited:!1}),t.finish()}var _l;(function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"})(_l||(_l={}));function XS(e,r,t,n){return{name:e,type:r,encode:t,decode:n}}function kJ(e){function r(o){if(e[o.toString()]==null)throw new Error("Invalid enum value");return e[o]}const t=function(i,a){const u=r(i);a.int32(u)},n=function(i){const a=i.int32();return r(a)};return XS("enum",_l.VARINT,t,n)}function JS(e,r){return XS("message",_l.LENGTH_DELIMITED,e,r)}var We;(function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.secp256k1="secp256k1",e.ECDSA="ECDSA"})(We||(We={}));var Hv;(function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.secp256k1=2]="secp256k1",e[e.ECDSA=3]="ECDSA"})(Hv||(Hv={}));(function(e){e.codec=()=>kJ(Hv)})(We||(We={}));var Wo;(function(e){let r;e.codec=()=>(r==null&&(r=JS((t,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),t.Type!=null&&(n.uint32(8),We.codec().encode(t.Type,n)),t.Data!=null&&(n.uint32(18),n.bytes(t.Data)),o.lengthDelimited!==!1&&n.ldelim()},(t,n,o={})=>{const i={},a=n==null?t.len:t.pos+n;for(;t.pos<a;){const u=t.uint32();switch(u>>>3){case 1:{i.Type=We.codec().decode(t);break}case 2:{i.Data=t.bytes();break}default:{t.skipType(u&7);break}}}return i})),r),e.encode=t=>QS(t,e.codec()),e.decode=(t,n)=>ZS(t,e.codec(),n)})(Wo||(Wo={}));var h0;(function(e){let r;e.codec=()=>(r==null&&(r=JS((t,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),t.Type!=null&&(n.uint32(8),We.codec().encode(t.Type,n)),t.Data!=null&&(n.uint32(18),n.bytes(t.Data)),o.lengthDelimited!==!1&&n.ldelim()},(t,n,o={})=>{const i={},a=n==null?t.len:t.pos+n;for(;t.pos<a;){const u=t.uint32();switch(u>>>3){case 1:{i.Type=We.codec().decode(t);break}case 2:{i.Data=t.bytes();break}default:{t.skipType(u&7);break}}}return i})),r),e.encode=t=>QS(t,e.codec()),e.decode=(t,n)=>ZS(t,e.codec(),n)})(h0||(h0={}));class p0 extends Error{constructor(r="An error occurred while verifying a message"){super(r),this.name="VerificationError"}}class MJ extends Error{constructor(r="Missing Web Crypto API"){super(r),this.name="WebCryptoMissingError"}}const v0={get(e=globalThis){const r=e.crypto;if((r==null?void 0:r.subtle)==null)throw new MJ("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return r}};class DJ{constructor(r,t){m(this,"type","RSA");m(this,"jwk");m(this,"_raw");m(this,"_multihash");this.jwk=r,this._multihash=t}get raw(){return this._raw==null&&(this._raw=BJ(this.jwk)),this._raw}toMultihash(){return this._multihash}toCID(){return Q.createV1(114,this._multihash)}toString(){return De.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:Qr(this.raw,r.raw)}verify(r,t){return zJ(this.jwk,t,r)}}const LJ=18,UJ=1062,FJ=Uint8Array.from([48,13,6,9,42,134,72,134,247,13,1,1,1,5,0]);function xJ(e){const r=kd(e[1],{offset:0});return{kty:"RSA",n:we(r[0],"base64url"),e:we(r[1],"base64url")}}function BJ(e){if(e.n==null||e.e==null)throw new Et("JWK was missing components");return ma([FJ,zS(ma([Wv(St(e.n,"base64url")),Wv(St(e.e,"base64url"))]))]).subarray()}function VJ(e,r){if(e.byteLength>=UJ)throw new Cy("Key size is too large");const t=kd(e,{offset:0});return WJ(t,e,r)}function WJ(e,r,t){const n=xJ(e);if(t==null){const o=MP(Wo.encode({Type:We.RSA,Data:r}));t=Aa(LJ,o)}return new DJ(n,t)}async function zJ(e,r,t){const n=await v0.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return v0.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,r,t instanceof Uint8Array?t:t.subarray())}function HJ(e){return e==null?!1:typeof e.then=="function"&&typeof e.catch=="function"&&typeof e.finally=="function"}function qJ(e,r,t){const n=cy.digest(t instanceof Uint8Array?t:t.subarray());if(HJ(n))return n.then(({digest:o})=>Mc.verify(r,o,e)).catch(o=>{throw new p0(String(o))});try{return Mc.verify(r,n.digest,e)}catch(o){throw new p0(String(o))}}class GJ{constructor(r){m(this,"type","secp256k1");m(this,"raw");m(this,"_key");this._key=YJ(r),this.raw=KJ(this._key)}toMultihash(){return Zr.digest(ky(this))}toCID(){return Q.createV1(114,this.toMultihash())}toString(){return De.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:Qr(this.raw,r.raw)}verify(r,t){return qJ(this._key,t,r)}}function eT(e){return new GJ(e)}function KJ(e){return Mc.ProjectivePoint.fromHex(e).toRawBytes(!0)}function YJ(e){try{return Mc.ProjectivePoint.fromHex(e),e}catch(r){throw new Cy(String(r))}}function ZJ(e,r){const{Type:t,Data:n}=Wo.decode(e),o=n??new Uint8Array;switch(t){case We.RSA:return VJ(o,r);case We.Ed25519:return GS(o);case We.secp256k1:return eT(o);case We.ECDSA:return HS(o);default:throw new Ay}}function QJ(e){const{Type:r,Data:t}=Wo.decode(e.digest),n=t??new Uint8Array;switch(r){case We.Ed25519:return GS(n);case We.secp256k1:return eT(n);case We.ECDSA:return HS(n);default:throw new Ay}}function ky(e){return Wo.encode({Type:We[e.type],Data:e.raw})}const tT=Symbol.for("nodejs.util.inspect.custom"),XJ=114;var U0;class My{constructor(r){m(this,"type");m(this,"multihash");m(this,"publicKey");m(this,"string");m(this,U0,!0);this.type=r.type,this.multihash=r.multihash,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}toString(){return this.string==null&&(this.string=De.encode(this.multihash.bytes).slice(1)),this.string}toMultihash(){return this.multihash}toCID(){return Q.createV1(XJ,this.multihash)}toJSON(){return this.toString()}equals(r){var t;if(r==null)return!1;if(r instanceof Uint8Array)return Qr(this.multihash.bytes,r);if(typeof r=="string")return this.toString()===r;if(((t=r==null?void 0:r.toMultihash())==null?void 0:t.bytes)!=null)return Qr(this.multihash.bytes,r.toMultihash().bytes);throw new Error("not valid Id")}[(U0=LS,tT)](){return`PeerId(${this.toString()})`}}class JJ extends My{constructor(t){super({...t,type:"RSA"});m(this,"type","RSA");m(this,"publicKey");this.publicKey=t.publicKey}}class eee extends My{constructor(t){super({...t,type:"Ed25519"});m(this,"type","Ed25519");m(this,"publicKey");this.publicKey=t.publicKey}}class tee extends My{constructor(t){super({...t,type:"secp256k1"});m(this,"type","secp256k1");m(this,"publicKey");this.publicKey=t.publicKey}}const ree=2336;var F0,x0;class rT{constructor(r){m(this,"type","url");m(this,"multihash");m(this,"publicKey");m(this,"url");m(this,F0,!0);this.url=r.toString(),this.multihash=Zr.digest(St(this.url))}[(x0=tT,F0=LS,x0)](){return`PeerId(${this.url})`}toString(){return this.toCID().toString()}toMultihash(){return this.multihash}toCID(){return Q.createV1(ree,this.toMultihash())}toJSON(){return this.toString()}equals(r){return r==null?!1:(r instanceof Uint8Array&&(r=we(r)),r.toString()===this.toString())}}const nee=114,_0=2336;function ft(e,r){let t;if(e.charAt(0)==="1"||e.charAt(0)==="Q")t=sy(De.decode(`z${e}`));else{if(e.startsWith("k51qzi5uqu5")||e.startsWith("kzwfwjn5ji4")||e.startsWith("k2k4r8")||e.startsWith("bafz"))return oee(Q.parse(e));throw new Et('Please pass a multibase decoder for strings that do not start with "1" or "Q"')}return nT(t)}function nT(e){if(aee(e))return new JJ({multihash:e});if(iee(e))try{const r=QJ(e);if(r.type==="Ed25519")return new eee({multihash:e,publicKey:r});if(r.type==="secp256k1")return new tee({multihash:e,publicKey:r})}catch{const t=we(e.digest);return new rT(new URL(t))}throw new FS("Supplied PeerID Multihash is invalid")}function oee(e){if((e==null?void 0:e.multihash)==null||e.version==null||e.version===1&&e.code!==nee&&e.code!==_0)throw new US("Supplied PeerID CID is invalid");if(e.code===_0){const r=we(e.multihash.digest);return new rT(new URL(r))}return nT(e.multihash)}function iee(e){return e.code===Zr.code}function aee(e){return e.code===cy.code}function oT(e){return async function(t={}){const n=await e.post("bitswap/stat",{searchParams:j(t),signal:t.signal,headers:t.headers});return see(await n.json())}}function see(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist??[]).map(r=>Q.parse(r["/"])),peers:(e.Peers??[]).map(r=>ft(r)),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}function uee(e){return async function(t,n={}){return((await(await e.post("bitswap/wantlist",{signal:n.signal,searchParams:j({...n,peer:t.toString()}),headers:n.headers})).json()).Keys??[]).map(i=>Q.parse(i["/"]))}}function cee(e){return async function(t={}){return((await(await e.post("bitswap/wantlist",{signal:t.signal,searchParams:j(t),headers:t.headers})).json()).Keys??[]).map(o=>Q.parse(o["/"]))}}function lee(e){return{wantlist:cee(e),wantlistForPeer:uee(e),stat:oT(e)}}function iT(e){return async function(t,n={}){const o=await e.post("block/get",{signal:n.signal,searchParams:j({arg:t.toString(),...n}),headers:n.headers});return new Uint8Array(await o.arrayBuffer())}}function fee(e){return async function r(t,n={}){const o=new AbortController,i=Pr([o.signal,n.signal]);let a;try{a=await(await e.post("block/put",{signal:i,searchParams:j(n),...await hn([t],o,n.headers)})).json()}catch(u){if(n.format==="dag-pb")return await r(t,{...n,format:"protobuf"});if(n.format==="dag-cbor")return await r(t,{...n,format:"cbor"});throw u}finally{i.clear()}return Q.parse(a.Key)}}function dee(e){return async function*(t,n={}){Array.isArray(t)||(t=[t]);const o=await e.post("block/rm",{signal:n.signal,searchParams:j({arg:t.map(i=>i.toString()),"stream-channels":!0,...n}),headers:n.headers});for await(const i of o.ndjson())yield hee(i)}}function hee(e){const r={cid:Q.parse(e.Hash)};return e.Error!=null&&(r.error=new Error(e.Error)),r}function pee(e){return async function(t,n={}){const i=await(await e.post("block/stat",{signal:n.signal,searchParams:j({arg:t.toString(),...n}),headers:n.headers})).json();return{cid:Q.parse(i.Key),size:i.Size}}}function vee(e){return{get:iT(e),put:fee(e),rm:dee(e),stat:pee(e)}}function _ee(e){return async function(t,n={}){const o=await e.post("bootstrap/add",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers}),{Peers:i}=await o.json();return{Peers:i.map(a=>ut(a))}}}function yee(e){return async function(t={}){const n=await e.post("bootstrap/list",{signal:t.signal,searchParams:j(t),headers:t.headers}),{Peers:o}=await n.json();return{Peers:o.map(i=>ut(i))}}}function bee(e){return async function(t,n={}){const o=await e.post("bootstrap/rm",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers}),{Peers:i}=await o.json();return{Peers:i.map(a=>ut(a))}}}function mee(e){return{add:_ee(e),list:yee(e),rm:bee(e)}}function gee(e){return async function*(t,n={}){yield*(await e.post("cat",{signal:n.signal,searchParams:j({arg:t.toString(),...n}),headers:n.headers})).iterator()}}function wee(e){return async function(t={}){return(await e.post("commands",{signal:t.signal,searchParams:j(t),headers:t.headers})).json()}}function Oee(e){return async function(t={}){return await(await e.post("config/show",{signal:t.signal,searchParams:j({...t}),headers:t.headers})).json()}}function Eee(e){return async function(t,n={}){if(t==null)throw new Error("key argument is required");return(await(await e.post("config",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers})).json()).Value}}function See(e){return async function(t,n={}){const i=await(await e.post("config/profile/apply",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers})).json();return{original:i.OldCfg,updated:i.NewCfg}}}function Tee(e){return{apply:See(e)}}function Pee(e){return async function(t,n={}){const o=new AbortController,i=Pr([o.signal,n.signal]);try{await(await e.post("config/replace",{signal:i,searchParams:j(n),...await hn([St(JSON.stringify(t))],o,n.headers)})).text()}finally{i.clear()}}}function Cee(e){return async function(t,n,o={}){if(typeof t!="string")throw new Error("Invalid key type");const i={...o,...Aee(t,n)};await(await e.post("config",{signal:o.signal,searchParams:j(i),headers:o.headers})).text()}}function Aee(e,r){switch(typeof r){case"boolean":return{arg:[e,r.toString()],bool:!0};case"string":return{arg:[e,r]};default:return{arg:[e,JSON.stringify(r)],json:!0}}}function Iee(e){return{getAll:Oee(e),get:Eee(e),set:Cee(e),replace:Pee(e),profiles:Tee(e)}}function Ree(e){return async function*(t,n={}){yield*(await e.post("dag/export",{signal:n.signal,searchParams:j({arg:t.toString()}),headers:n.headers})).iterator()}}function jee(e){return e[Symbol.asyncIterator]!=null}function $ee(e){if(jee(e))return(async()=>{for await(const r of e)return r})();for(const r of e)return r}async function*y0(e,r,t,n,o){const i=async s=>{const l=await t.getCodec(s.code),d=await n(s,o);return l.decode(d)},a=r.split("/").filter(Boolean);let u=await i(e),c=e;for(;a.length>0;){const s=a.shift();if(s==null)throw Zt(new Error(`Could not resolve path "${r}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(u,s))u=u[s],yield{value:u,remainderPath:a.join("/")};else throw Zt(new Error(`no link named "${s}" under ${c}`),"ERR_NO_LINK");const l=Q.asCID(u);l!=null&&(c=l,u=await i(u))}yield{value:u,remainderPath:""}}function Nee(e,r){const t=iT(e);return async function(o,i={}){if(i.path!=null){const l=i.localResolve===!0?await $ee(y0(o,i.path,r,t,i)):await Nd(y0(o,i.path,r,t,i));if(l==null)throw Zt(new Error("Not found"),"ERR_NOT_FOUND");return l}const a=await r.getCodec(o.code),u=await t(o,i);return{value:a.decode(u),remainderPath:""}}}function kee(e){return async function*(t,n={}){const o=new AbortController,i=Pr([o.signal,n.signal]);try{const{headers:a,body:u}=await hn(t,o,n.headers),c=await e.post("dag/import",{signal:i,headers:a,body:u,searchParams:j({"pin-roots":n.pinRoots})});for await(const{Root:s}of c.ndjson())if(s!==void 0){const{Cid:{"/":l},PinErrorMsg:d}=s;yield{root:{cid:Q.parse(l),pinErrorMsg:d}}}}finally{i.clear()}}}function Mee(e,r){return async function(n,o={}){const i={storeCodec:"dag-cbor",hashAlg:"sha2-256",...o};let a;if(i.inputCodec!=null){if(!(n instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");a=n}else a=(await r.getCodec(i.storeCodec??"dag-cbor")).encode(n),i.inputCodec=i.storeCodec;const u=new AbortController,c=Pr([u.signal,i.signal]);try{const l=await(await e.post("dag/put",{timeout:i.timeout,signal:c,searchParams:j(i),...await hn([a],u,i.headers)})).json();return Q.parse(l.Cid["/"])}finally{c.clear()}}}function Dee(e){return async function(t,n={}){const i=await(await e.post("dag/resolve",{signal:n.signal,searchParams:j({arg:`${t}${n.path!=null?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers})).json();return{cid:Q.parse(i.Cid["/"]),remainderPath:i.RemPath}}}function Lee(e,r){return{export:Ree(e),get:Nee(e,r),import:kee(e),put:Mee(e,r),resolve:Dee(e)}}const Uee=0,Fee=1,xee=2,Bee=3,Vee=4,Wee=5,zee=6,Hee=7;function ki(e){var r;if(e.Type===Uee)return{name:"SENDING_QUERY",type:e.Type};if(e.Type===Fee)return{from:ft(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses??[]).map(({ID:t,Addrs:n})=>({id:ft(t),multiaddrs:n.map(o=>ut(o)),protocols:[]})),providers:(e.Responses??[]).map(({ID:t,Addrs:n})=>({id:ft(t),multiaddrs:n.map(o=>ut(o)),protocols:[]}))};if(e.Type===xee){let t={id:e.ID??ft(e.ID),multiaddrs:[],protocols:[]};return((r=e.Responses)==null?void 0:r.length)>0&&(t={id:ft(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map(n=>ut(n)),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:t}}if(e.Type===Bee)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(e.Type===Vee)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map(({ID:t,Addrs:n})=>({id:ft(t),multiaddrs:n.map(o=>ut(o)),protocols:[]}))};if(e.Type===Wee)return{name:"VALUE",type:e.Type,value:St(e.Extra,"base64pad")};if(e.Type===zee){const t=e.Responses.map(({ID:n})=>ft(n));if(t.length===0)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:t[0]}}if(e.Type===Hee)return{name:"DIALING_PEER",type:e.Type,peer:ft(e.ID)};throw new Error("Unknown DHT event type")}function qee(e){return async function*(t,n={}){const o=await e.post("dht/query",{signal:n.signal,searchParams:j({arg:t.toString(),...n}),headers:n.headers});for await(const i of o.ndjson())yield ki(i)}}var b0;(function(e){e[e.SENDING_QUERY=0]="SENDING_QUERY",e[e.PEER_RESPONSE=1]="PEER_RESPONSE",e[e.FINAL_PEER=2]="FINAL_PEER",e[e.QUERY_ERROR=3]="QUERY_ERROR",e[e.PROVIDER=4]="PROVIDER",e[e.VALUE=5]="VALUE",e[e.ADDING_PEER=6]="ADDING_PEER",e[e.DIALING_PEER=7]="DIALING_PEER"})(b0||(b0={}));var m0;(function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"})(m0||(m0={}));function Gee(e){return{query:qee(e)}}function Kee(e){return async function(t={}){return(await e.post("diag/cmds",{signal:t.signal,searchParams:j(t),headers:t.headers})).json()}}function Yee(e){return async function(t={}){return(await e.post("diag/net",{signal:t.signal,searchParams:j(t),headers:t.headers})).json()}}function Zee(e){return async function(t={}){return(await e.post("diag/sys",{signal:t.signal,searchParams:j(t),headers:t.headers})).json()}}function Qee(e){return{cmds:Kee(e),net:Yee(e),sys:Zee(e)}}function Xee(e){return async function(t,n,o={}){const i=Array.isArray(t)?t:[t];await(await e.post("files/cp",{signal:o.signal,searchParams:j({arg:i.concat(n).map(u=>Q.asCID(u)!=null?`/ipfs/${u}`:u),...o}),headers:o.headers})).text()}}function Jee(e){return async function(t,n={}){if(typeof t!="string")throw new Error("ipfs.files.flush requires a path");const i=await(await e.post("files/flush",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers})).json();return Q.parse(i.Cid)}}function qv(e){const r=qe(e);return Object.prototype.hasOwnProperty.call(r,"mode")&&(r.mode=parseInt(r.mode,8)),Object.prototype.hasOwnProperty.call(r,"mtime")&&(r.mtime={secs:r.mtime,nsecs:r.mtimeNsecs??0},delete r.mtimeNsecs),r}function ete(e){return async function*(t,n={}){if(t==null)throw new Error("ipfs.files.ls requires a path");const o=await e.post("files/ls",{signal:n.signal,searchParams:j({arg:Q.asCID(t)!=null?`/ipfs/${t}`:t,long:!0,...n,stream:!0}),headers:n.headers});for await(const i of o.ndjson())if("Entries"in i)for(const a of i.Entries??[])yield g0(qv(a));else yield g0(qv(i))}}function g0(e){return e.hash!=null&&(e.cid=Q.parse(e.hash)),delete e.hash,e.type=e.type===1?"directory":"file",e}function tte(e){return async function(t,n={}){await(await e.post("files/mkdir",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers})).text()}}function rte(e){return async function(t,n,o={}){Array.isArray(t)||(t=[t]),await(await e.post("files/mv",{signal:o.signal,searchParams:j({arg:t.concat(n),...o}),headers:o.headers})).text()}}function nte(e){if(ite(e))return async function*(){const r=e.getReader();try{for(;;){const{done:t,value:n}=await r.read();if(t)return;yield n}}finally{r.releaseLock()}}();if(ote(e))return e;throw new Error("unknown stream")}function ote(e){return e[Symbol.asyncIterator]!=null}function ite(e){return typeof(e==null?void 0:e.getReader)=="function"}function ate(e){return async function*(t,n={}){const o=await e.post("files/read",{signal:n.signal,searchParams:j({arg:t,count:n.length,...n}),headers:n.headers});if(o.body==null)throw new Error("Invalid response body");yield*nte(o.body)}}function ste(e){return async function(t,n={}){const o=await e.post("files/rm",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers}),i=await o.text();if(i!==""){const a=new wX(o);throw a.message=i,a}}}function aT(e){return async function(t,n={}){const i=await(await e.post("files/stat",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers})).json();return i.WithLocality=i.WithLocality??!1,ute(qv(i))}}function ute(e){return e.cid=Q.parse(e.hash),delete e.hash,e}function cte(e){return async function(t,n,o={}){const i=new AbortController,a=Pr([i.signal,o.signal]);try{await(await e.post("files/write",{signal:a,searchParams:j({arg:t,streamChannels:!0,count:o.length,...o}),...await hn([{content:n,path:"arg",mode:Iy(o.mode),mtime:$d(o.mtime)}],i,o.headers)})).text()}finally{a.clear()}}}function lte(e){return{cp:Xee(e),flush:Jee(e),ls:ete(e),mkdir:tte(e),mv:rte(e),read:ate(e),rm:ste(e),stat:aT(e),write:cte(e)}}function fte(e){return function(){const t=new URL(e.opts.base??"");return{host:t.hostname,port:t.port,protocol:t.protocol,pathname:t.pathname,"api-path":t.pathname}}}function dte(e){return async function*(t,n={}){const o={arg:`${t instanceof Uint8Array?Q.decode(t):t}`,...n};yield*(await e.post("get",{signal:n.signal,searchParams:j(o),headers:n.headers})).iterator()}}function sT(e){return async function(t={}){const o=await(await e.post("id",{signal:t.signal,searchParams:j({arg:t.peerId!=null?t.peerId.toString():void 0,...t}),headers:t.headers})).json(),i={...qe(o)};return i.id=ft(i.id),i.addresses!=null&&(i.addresses=i.addresses.map(a=>ut(a))),i}}function hte(e){const r=sT(e);return async function(n={}){var o;try{const i=await r(n);return!!((o=i==null?void 0:i.addresses)!=null&&o.length)}catch{return!1}}}const pte={type:"ed25519"};function vte(e){return async function(t,n=pte){const i=await(await e.post("key/gen",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers})).json();return qe(i)}}function _te(e){return async function(t,n,o,i={}){const u=await(await e.post("key/import",{signal:i.signal,searchParams:j({arg:t,pem:n,password:o,...i}),headers:i.headers})).json();return qe(u)}}function yte(e){return async function(t={}){return((await(await e.post("key/list",{signal:t.signal,searchParams:j(t),headers:t.headers})).json()).Keys??[]).map(i=>qe(i))}}function bte(e){return async function(t,n,o={}){const i=await e.post("key/rename",{signal:o.signal,searchParams:j({arg:[t,n],...o}),headers:o.headers});return qe(await i.json())}}function mte(e){return async function(t,n={}){const i=await(await e.post("key/rm",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers})).json();return qe(i.Keys[0])}}function gte(e){return{gen:vte(e),import:_te(e),list:yte(e),rename:bte(e),rm:mte(e)}}const zo=1e3,Ho=zo*60,qo=Ho*60,Gn=qo*24,wte=Gn*7,Ote=Gn*365.25;function uT(e,r){try{if(typeof e=="string"&&e.length>0)return Ete(e);if(typeof e=="number"&&isFinite(e))return r!=null&&r.long?Tte(e):Ste(e);throw new Error("Value is not a string or number.")}catch(t){const n=Pte(t)?`${t.message}. value=${JSON.stringify(e)}`:"An unknown error has occured.";throw new Error(n)}}function Ete(e){if(e=String(e),e.length>100)throw new Error("Value exceeds the maximum length of 100 characters.");const r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!r)return NaN;const t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*Ote;case"weeks":case"week":case"w":return t*wte;case"days":case"day":case"d":return t*Gn;case"hours":case"hour":case"hrs":case"hr":case"h":return t*qo;case"minutes":case"minute":case"mins":case"min":case"m":return t*Ho;case"seconds":case"second":case"secs":case"sec":case"s":return t*zo;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:throw new Error(`The unit ${n} was matched, but no matching case exists.`)}}function Ste(e){const r=Math.abs(e);return r>=Gn?`${Math.round(e/Gn)}d`:r>=qo?`${Math.round(e/qo)}h`:r>=Ho?`${Math.round(e/Ho)}m`:r>=zo?`${Math.round(e/zo)}s`:`${e}ms`}function Tte(e){const r=Math.abs(e);return r>=Gn?Ec(e,r,Gn,"day"):r>=qo?Ec(e,r,qo,"hour"):r>=Ho?Ec(e,r,Ho,"minute"):r>=zo?Ec(e,r,zo,"second"):`${e} ms`}function Ec(e,r,t,n){const o=r>=t*1.5;return`${Math.round(e/t)} ${n}${o?"s":""}`}function Pte(e){return typeof e=="object"&&e!==null&&"message"in e}function Cte(e){t.debug=t,t.default=t,t.coerce=c,t.disable=i,t.enable=o,t.enabled=a,t.humanize=uT,t.destroy=s,Object.keys(e).forEach(l=>{t[l]=e[l]}),t.names=[],t.skips=[],t.formatters={};function r(l){let d=0;for(let h=0;h<l.length;h++)d=(d<<5)-d+l.charCodeAt(h),d|=0;return t.colors[Math.abs(d)%t.colors.length]}t.selectColor=r;function t(l){let d,h=null,p,v;function _(...b){if(!_.enabled)return;const w=_,E=Number(new Date),S=E-(d||E);w.diff=S,w.prev=d,w.curr=E,d=E,b[0]=t.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let O=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,($,I)=>{if($==="%%")return"%";O++;const L=t.formatters[I];if(typeof L=="function"){const X=b[O];$=L.call(w,X),b.splice(O,1),O--}return $}),t.formatArgs.call(w,b),(w.log||t.log).apply(w,b)}return _.namespace=l,_.useColors=t.useColors(),_.color=t.selectColor(l),_.extend=n,_.destroy=t.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==t.namespaces&&(p=t.namespaces,v=t.enabled(l)),v),set:b=>{h=b}}),typeof t.init=="function"&&t.init(_),_}function n(l,d){const h=t(this.namespace+(typeof d>"u"?":":d)+l);return h.log=this.log,h}function o(l){t.save(l),t.namespaces=l,t.names=[],t.skips=[];let d;const h=(typeof l=="string"?l:"").split(/[\s,]+/),p=h.length;for(d=0;d<p;d++)h[d]&&(l=h[d].replace(/\*/g,".*?"),l[0]==="-"?t.skips.push(new RegExp("^"+l.substr(1)+"$")):t.names.push(new RegExp("^"+l+"$")))}function i(){const l=[...t.names.map(u),...t.skips.map(u).map(d=>"-"+d)].join(",");return t.enable(""),l}function a(l){if(l[l.length-1]==="*")return!0;let d,h;for(d=0,h=t.skips.length;d<h;d++)if(t.skips[d].test(l))return!1;for(d=0,h=t.names.length;d<h;d++)if(t.names[d].test(l))return!0;return!1}function u(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack??l.message:l}function s(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.setupFormatters(t.formatters),t.enable(t.load()),t}var Ate={};const Gt=Mte(),Ite=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Rte(){var e,r,t,n,o;return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&((e=navigator.userAgent)==null?void 0:e.toLowerCase().match(/(edge|trident)\/(\d+)/))!=null?!1:typeof document<"u"&&((t=(r=document.documentElement)==null?void 0:r.style)==null?void 0:t.WebkitAppearance)||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&((n=navigator.userAgent)==null?void 0:n.toLowerCase().match(/firefox\/(\d+)/))!=null&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&((o=navigator.userAgent)==null?void 0:o.toLowerCase().match(/applewebkit\/(\d+)/))}function jte(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+uT(this.diff),!this.useColors)return;const r="color: "+this.color;e.splice(1,0,r,"color: inherit");let t=0,n=0;e[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(t++,o==="%c"&&(n=t))}),e.splice(n,0,r)}const $te=console.debug??console.log??(()=>{});function Nte(e){try{e?Gt==null||Gt.setItem("debug",e):Gt==null||Gt.removeItem("debug")}catch{}}function kte(){let e;try{e=Gt==null?void 0:Gt.getItem("debug")}catch{}return!e&&typeof globalThis.process<"u"&&"env"in globalThis.process&&(e=Ate.DEBUG),e}function Mte(){try{return localStorage}catch{}}function Dte(e){e.j=function(r){try{return JSON.stringify(r)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}const ht=Cte({formatArgs:jte,save:Nte,load:kte,useColors:Rte,setupFormatters:Dte,colors:Ite,storage:Gt,log:$te});ht.formatters.b=e=>e==null?"undefined":De.baseEncode(e);ht.formatters.t=e=>e==null?"undefined":Fr.baseEncode(e);ht.formatters.m=e=>e==null?"undefined":Ed.baseEncode(e);ht.formatters.p=e=>e==null?"undefined":e.toString();ht.formatters.c=e=>e==null?"undefined":e.toString();ht.formatters.k=e=>e==null?"undefined":e.toString();ht.formatters.a=e=>e==null?"undefined":e.toString();ht.formatters.e=e=>e==null?"undefined":w0(e.stack)??w0(e.message)??e.toString();function Lte(e){const r=()=>{};return r.enabled=!1,r.color="",r.diff=0,r.log=()=>{},r.namespace=e,r.destroy=()=>!0,r.extend=()=>r,r}function Dy(e){let r=Lte(`${e}:trace`);return ht.enabled(`${e}:trace`)&&ht.names.map(t=>t.toString()).find(t=>t.includes(":trace"))!=null&&(r=ht(`${e}:trace`)),Object.assign(ht(e),{error:ht(`${e}:error`),trace:r})}function w0(e){if(e!=null&&(e=e.trim(),e.length!==0))return e}var Ute=e=>{if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const r=Object.getPrototypeOf(e);return r===null||r===Object.prototype};const yl=Ute,{hasOwnProperty:cT}=Object.prototype,{propertyIsEnumerable:Fte}=Object,Go=(e,r,t)=>Object.defineProperty(e,r,{value:t,writable:!0,enumerable:!0,configurable:!0}),xte=f,O0={concatArrays:!1,ignoreUndefined:!1},Md=e=>{const r=[];for(const t in e)cT.call(e,t)&&r.push(t);if(Object.getOwnPropertySymbols){const t=Object.getOwnPropertySymbols(e);for(const n of t)Fte.call(e,n)&&r.push(n)}return r};function Mi(e){return Array.isArray(e)?Bte(e):yl(e)?Vte(e):e}function Bte(e){const r=e.slice(0,0);return Md(e).forEach(t=>{Go(r,t,Mi(e[t]))}),r}function Vte(e){const r=Object.getPrototypeOf(e)===null?Object.create(null):{};return Md(e).forEach(t=>{Go(r,t,Mi(e[t]))}),r}const lT=(e,r,t,n)=>(t.forEach(o=>{typeof r[o]>"u"&&n.ignoreUndefined||(o in e&&e[o]!==Object.getPrototypeOf(e)?Go(e,o,Gv(e[o],r[o],n)):Go(e,o,Mi(r[o])))}),e),Wte=(e,r,t)=>{let n=e.slice(0,0),o=0;return[e,r].forEach(i=>{const a=[];for(let u=0;u<i.length;u++)cT.call(i,u)&&(a.push(String(u)),i===e?Go(n,o++,i[u]):Go(n,o++,Mi(i[u])));n=lT(n,i,Md(i).filter(u=>!a.includes(u)),t)}),n};function Gv(e,r,t){return t.concatArrays&&Array.isArray(e)&&Array.isArray(r)?Wte(e,r,t):!yl(r)||!yl(e)?Mi(r):lT(e,r,Md(r),t)}var zte=function(...e){const r=Gv(Mi(O0),this!==xte&&this||{},O0);let t={_:{}};for(const n of e)if(n!==void 0){if(!yl(n))throw new TypeError("`"+n+"` is not an Option Object");t=Gv(t,{_:n},r)}return t._};const fT=bl(zte),ce=Object.create(null),dT=6e4,hT=dT*60,Ly=hT*24,pT=Ly*365.25;ce.year=ce.yr=ce.y=pT;ce.month=ce.mo=ce.mth=pT/12;ce.week=ce.wk=ce.w=Ly*7;ce.day=ce.d=Ly;ce.hour=ce.hr=ce.h=hT;ce.minute=ce.min=ce.m=dT;ce.second=ce.sec=ce.s=1e3;ce.millisecond=ce.millisec=ce.ms=1;ce.microsecond=ce.microsec=ce.us=ce.s=.001;ce.nanosecond=ce.nanosec=ce.ns=1e-6;ce.group=",";ce.decimal=".";ce.placeholder=" _";const Hte=/((?:\d{1,16}(?:\.\d{1,16})?|\.\d{1,16})(?:[eE][-+]?\d{1,4})?)\s?([\p{L}]{0,14})/gu;qt.unit=ce;function qt(e="",r="ms"){let t=null,n;return String(e).replace(new RegExp(`(\\d)[${qt.unit.placeholder}${qt.unit.group}](\\d)`,"g"),"$1$2").replace(qt.unit.decimal,".").replace(Hte,(o,i,a)=>{if(a)a=a.toLowerCase();else if(n){for(const u in qt.unit)if(qt.unit[u]<n){a=u;break}}else a=r;n=a=qt.unit[a]||qt.unit[a.replace(/s$/,"")],a&&(t=(t||0)+i*a)}),t&&t/(qt.unit[r]||1)*(e[0]==="-"?-1:1)}const qte=()=>{},Gte=typeof navigator<"u"&&navigator.product==="ReactNative";function Kte(){return Gte?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const ga=self.URL,vT=Kte();let Yte=class{constructor(r="",t=vT){this.super=new ga(r,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(r){this.super.hash=r}set host(r){this.super.host=r}set hostname(r){this.super.hostname=r}set href(r){this.super.href=r}set password(r){this.super.password=r}set pathname(r){this.super.pathname=r}set port(r){this.super.port=r}set protocol(r){this.super.protocol=r}set search(r){this.super.search=r}set username(r){this.super.username=r}static createObjectURL(r){return ga.createObjectURL(r)}static revokeObjectURL(r){ga.revokeObjectURL(r)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function Zte(e){if(typeof e=="string")return new ga(e).toString();if(!(e instanceof ga)){const r=e.username&&e.password?`${e.username}:${e.password}@`:"",t=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",o=e.protocol?e.protocol+"//":"",i=e.host||"",a=e.hostname||"",u=e.search||(e.query?"?"+e.query:""),c=e.hash||"",s=e.pathname||"",l=e.path||s+u;return`${o}${r||t}${i||a+n}${l}${c}`}}var _T={URLWithLegacySupport:Yte,URLSearchParams:self.URLSearchParams,defaultBase:vT,format:Zte};const{URLWithLegacySupport:E0,format:Qte}=_T;var Xte=(e,r={},t={},n)=>{let o=r.protocol?r.protocol.replace(":",""):"http";o=(t[o]||n||o)+":";let i;try{i=new E0(e)}catch{i={}}const a=Object.assign({},r,{protocol:o||i.protocol,host:r.host||i.host});return new E0(e,Qte(a)).toString()};const{URLWithLegacySupport:Jte,format:ere,URLSearchParams:tre,defaultBase:rre}=_T,nre=Xte;var Sc={URL:Jte,URLSearchParams:tre,format:ere,relative:nre,defaultBase:rre};class yT extends Error{constructor(r="Request timed out"){super(r),this.name="TimeoutError"}}class ore extends Error{constructor(r="The operation was aborted."){super(r),this.name="AbortError"}}class S0 extends Error{constructor(t){super(t.statusText);m(this,"response");this.name="HTTPError",this.response=t}}const ire=globalThis.fetch,Uy=globalThis.Headers,are=globalThis.Request,bT=globalThis.Response,sre=async(e,r={})=>{const t=new XMLHttpRequest;t.open(r.method??"GET",e.toString(),!0);const{timeout:n,headers:o}=r,i=Number(n);if(!isNaN(i)&&i>0&&i<1/0&&(t.timeout=i),r.overrideMimeType!=null&&t.overrideMimeType(r.overrideMimeType),o!=null)for(const[a,u]of new Uy(o))t.setRequestHeader(a,u);return r.signal!=null&&(r.signal.onabort=()=>{t.abort()}),r.onUploadProgress!=null&&(t.upload.onprogress=r.onUploadProgress),t.responseType="arraybuffer",new Promise((a,u)=>{const c=s=>{switch(s.type){case"error":{a(bT.error());break}case"load":{a(new fre(t.responseURL,t.response,{status:t.status,statusText:t.statusText,headers:lre(t.getAllResponseHeaders())}));break}case"timeout":{u(new yT);break}case"abort":{u(new ore);break}}};t.onerror=c,t.onload=c,t.ontimeout=c,t.onabort=c,t.send(r.body)})},ure=ire,cre=(e,r={})=>r.onUploadProgress!=null?sre(e,r):ure(e,r),lre=e=>{const r=new Uy;for(const t of e.trim().split(/[\r\n]+/)){const n=t.indexOf(": ");n>0&&r.set(t.slice(0,n),t.slice(n+1))}return r};class fre extends bT{constructor(r,t,n){super(t,n),Object.defineProperty(this,"url",{value:r})}}const T0=fT.bind({ignoreUndefined:!0}),Tc=Dy("kubo-rpc-client:fetch"),dre={throwHttpErrors:!0,credentials:"same-origin"},st=class st{constructor(r={}){m(this,"opts");this.opts=T0({},dre,r)}async fetch(r,t={}){const n=T0({},this.opts,t),o=new Uy(n.headers);if(typeof r!="string"&&!(r instanceof Sc.URL||r instanceof are))throw new TypeError("`resource` must be a string, URL, or Request");const i=new Sc.URL(r.toString(),n.base),{searchParams:a,transformSearchParams:u,json:c}=n;a!=null&&(typeof u=="function"?i.search=u(new Sc.URLSearchParams(n.searchParams)):i.search=new Sc.URLSearchParams(n.searchParams).toString()),c!=null&&(n.body=JSON.stringify(n.json),o.set("content-type","application/json"));const s=[n.signal];n.timeout!=null&&isNaN(n.timeout)&&n.timeout>0&&s.push(AbortSignal.timeout(n.timeout));const l=Pr(s);try{globalThis.ReadableStream!=null&&n.body instanceof globalThis.ReadableStream&&(Ad||Id)&&(n.body=new Blob(await xS(Rd(n.body)))),Tc.trace("outgoing headers",n.headers),Tc.trace("%s %s",n.method,i);const d=await cre(i.toString(),{...n,signal:n.signal,timeout:void 0,headers:o,duplex:"half"});if(Tc("%s %s %d",n.method,i,d.status),Tc.trace("incoming headers",d.headers),!d.ok&&n.throwHttpErrors===!0)throw n.handleError!=null&&await n.handleError(d),new S0(d);return d.iterator=async function*(){yield*pre(d.body)},d.ndjson=async function*(){for await(const h of hre(d.iterator()))t.transform!=null?yield t.transform(h):yield h},d}finally{l.clear()}}async post(r,t={}){return this.fetch(r,{...t,method:"POST"})}async get(r,t={}){return this.fetch(r,{...t,method:"GET"})}async put(r,t={}){return this.fetch(r,{...t,method:"PUT"})}async delete(r,t={}){return this.fetch(r,{...t,method:"DELETE"})}async options(r,t={}){return this.fetch(r,{...t,method:"OPTIONS"})}};m(st,"HTTPError",S0),m(st,"TimeoutError",yT),m(st,"post",async(r,t)=>new st(t).post(r,t)),m(st,"get",async(r,t)=>new st(t).get(r,t)),m(st,"put",async(r,t)=>new st(t).put(r,t)),m(st,"delete",async(r,t)=>new st(t).delete(r,t)),m(st,"options",async(r,t)=>new st(t).options(r,t));let $n=st;const hre=async function*(e){const r=new TextDecoder;let t="";for await(const n of e){t+=r.decode(n,{stream:!0});const o=t.split(/\r?\n/);for(let i=0;i<o.length-1;i++){const a=o[i].trim();a.length>0&&(yield JSON.parse(a))}t=o[o.length-1]}t+=r.decode(),t=t.trim(),t.length!==0&&(yield JSON.parse(t))},pre=e=>{if(vre(e))return e;if(yre(e)){const r=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:r.next.bind(r),return(t){return e.destroy(),typeof r.return=="function"?r.return():Promise.resolve({done:!0,value:t})}}}}}if(_re(e)){const r=e.getReader();return async function*(){try{for(;;){const{done:t,value:n}=await r.read();if(t)return;n!=null&&(yield n)}}finally{r.releaseLock()}}()}throw new TypeError("Body can't be converted to AsyncIterable")},vre=e=>e!==null&&typeof e[Symbol.asyncIterator]=="function",_re=e=>e!=null&&typeof e.getReader=="function",yre=e=>Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable"),bre=[ue("tcp").code,ue("dns").code,ue("dnsaddr").code,ue("dns4").code,ue("dns6").code];function P0(e){var r;return(r=mT("sni",e))==null?void 0:r[1]}function C0(e){var t;const r=(t=mT("tcp",e))==null?void 0:t[1];return r==null?"":`:${r}`}function mT(e,r){let t;try{t=ue(e).code}catch{return}for(const[n,o]of r)if(n===t&&o!=null)return[n,o]}function A0(e){return e.some(([r,t])=>r===ue("tls").code)}function It(e,r,t){const n=gT[ue(e).name];if(n==null)throw new Error(`Can't interpret protocol ${ue(e).name}`);const o=n(r,t);return e===ue("ip6").code?`[${o}]`:o}const gT={ip4:(e,r)=>e,ip6:(e,r)=>r.length===0?e:`[${e}]`,tcp:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`tcp://${It(t[0],t[1]??"",r)}:${e}`},udp:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`udp://${It(t[0],t[1]??"",r)}:${e}`},dnsaddr:(e,r)=>e,dns4:(e,r)=>e,dns6:(e,r)=>e,dns:(e,r)=>e,ipfs:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`${It(t[0],t[1]??"",r)}`},p2p:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`${It(t[0],t[1]??"",r)}`},http:(e,r)=>{const t=A0(r),n=P0(r),o=C0(r);if(t&&n!=null)return`https://${n}${o}`;const i=t?"https://":"http://",a=r.pop();if(a==null)throw new Error("Unexpected end of multiaddr");let u=It(a[0],a[1]??"",r);return u=u.replace("tcp://",""),`${i}${u}`},"http-path":(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");const n=It(t[0],t[1]??"",r),o=decodeURIComponent(e);return`${n}/${o}`},tls:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return It(t[0],t[1]??"",r)},sni:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return It(t[0],t[1]??"",r)},https:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");let n=It(t[0],t[1]??"",r);return n=n.replace("tcp://",""),`https://${n}`},ws:(e,r)=>{const t=A0(r),n=P0(r),o=C0(r);if(t&&n!=null)return`wss://${n}${o}`;const i=t?"wss://":"ws://",a=r.pop();if(a==null)throw new Error("Unexpected end of multiaddr");let u=It(a[0],a[1]??"",r);return u=u.replace("tcp://",""),`${i}${u}`},wss:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");let n=It(t[0],t[1]??"",r);return n=n.replace("tcp://",""),`wss://${n}`}};function mre(e,r){const n=ut(e).stringTuples(),o=n.pop();if(o==null)throw new Error("Unexpected end of multiaddr");const i=ue(o[0]),a=gT[i.name];if(a==null)throw new Error(`No interpreter found for ${i.name}`);let u=a(o[1]??"",n);return bre.includes(o[0])&&(u=u.replace(/^.*:\/\//,""),o[1]==="443"?u=`https://${u}`:u=`http://${u}`),(u.startsWith("http://")||u.startsWith("https://")||u.startsWith("ws://")||u.startsWith("wss://"))&&(u=new URL(u).toString(),u.endsWith("/")&&(u=u.substring(0,u.length-1))),u}function I0(e){try{e=mre(ut(e))}catch{}return e=e.toString(),e}const R0=Dy("js-kubo-rpc-client:lib:error-handler"),gre=fT.bind({ignoreUndefined:!0}),wre=Ad||Id?location.protocol:"http",Ore=Ad||Id?location.hostname:"localhost",Ere=Ad||Id?location.port:"5001",Sre=(e={})=>{let r,t={},n;if(typeof e=="string"||ol(e))r=new URL(I0(e));else if(e instanceof URL)r=e;else if(typeof e.url=="string"||ol(e.url))r=new URL(I0(e.url)),t=e;else if(e.url instanceof URL)r=e.url,t=e;else{t=e??{};const o=(t.protocol??wre).replace(":",""),i=(t.host??Ore).split(":")[0],a=t.port??Ere;r=new URL(`${o}://${i}:${a}`)}if(t.apiPath!=null?r.pathname=t.apiPath:(r.pathname==="/"||r.pathname===void 0)&&(r.pathname="api/v0"),yX){const o=qte();n=t.agent??new o({keepAlive:!0,maxSockets:6})}return{...t,host:r.host,protocol:r.protocol.replace(":",""),port:Number(r.port),apiPath:r.pathname,url:r,agent:n}},Tre=async e=>{let r;try{if((e.headers.get("Content-Type")??"").startsWith("application/json")){const n=await e.json();R0(n),r=n.Message??n.message}else r=await e.text()}catch(n){R0("Failed to parse error response",n),r=n.message}let t=new $n.HTTPError(e);throw r!=null&&(r.includes("deadline has elapsed")&&(t=new $n.TimeoutError),r.includes("context deadline exceeded")&&(t=new $n.TimeoutError),r.includes("request timed out")&&(t=new $n.TimeoutError),t.message=r),t},Pre=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,j0=e=>e.replace(Pre,function(r){return"-"+r.toLowerCase()}),Cre=e=>typeof e=="string"?qt(e)??0:e;class Are extends $n{constructor(r={}){const t=Sre(r);super({timeout:t.timeout!=null?Cre(t.timeout):void 0,headers:t.headers,base:`${t.url}`,handleError:Tre,transformSearchParams:o=>{const i=new URLSearchParams;for(const[a,u]of o)u!=="undefined"&&u!=="null"&&a!=="signal"&&a!=="timeout"&&i.append(j0(a),u),a==="timeout"&&!isNaN(parseInt(u))&&i.append(j0(a),u);return i},agent:t.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;const n=this.fetch;this.fetch=async(o,i={})=>(typeof o=="string"&&!o.startsWith("/")&&(o=`${t.url}/${o}`),n.call(this,o,gre(i,{method:"POST"})))}}const Ire=async e=>Promise.reject(new Error(`No base found for "${e}"`));class Rre{constructor(r){m(this,"_basesByName");m(this,"_basesByPrefix");m(this,"_loadBase");this._basesByName={},this._basesByPrefix={},this._loadBase=r.loadBase??Ire;for(const t of r.bases)this.addBase(t)}addBase(r){if(this._basesByName[r.name]!=null&&this._basesByPrefix[r.prefix]!=null)throw new Error(`Codec already exists for codec "${r.name}"`);this._basesByName[r.name]=r,this._basesByPrefix[r.prefix]=r}removeBase(r){delete this._basesByName[r.name],delete this._basesByPrefix[r.prefix]}async getBase(r){if(this._basesByName[r]!=null)return this._basesByName[r];if(this._basesByPrefix[r]!=null)return this._basesByPrefix[r];const t=await this._loadBase(r);return this._basesByName[t.name]==null&&this._basesByPrefix[t.prefix]==null&&this.addBase(t),t}listBases(){return Object.values(this._basesByName)}}const jre=async e=>Promise.reject(new Error(`No codec found for "${e}"`));class $re{constructor(r){m(this,"_codecsByName");m(this,"_codecsByCode");m(this,"_loadCodec");this._codecsByName={},this._codecsByCode={},this._loadCodec=r.loadCodec??jre;for(const t of r.codecs)this.addCodec(t)}addCodec(r){if(this._codecsByName[r.name]!=null||this._codecsByCode[r.code]!=null)throw new Error(`Resolver already exists for codec "${r.name}"`);this._codecsByName[r.name]=r,this._codecsByCode[r.code]=r}removeCodec(r){delete this._codecsByName[r.name],delete this._codecsByCode[r.code]}async getCodec(r){const t=typeof r=="string"?this._codecsByName:this._codecsByCode;if(t[r]!=null)return t[r];const n=await this._loadCodec(r);return t[r]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}}const Nre=async e=>Promise.reject(new Error(`No hasher found for "${e}"`));class kre{constructor(r){m(this,"_hashersByName");m(this,"_hashersByCode");m(this,"_loadHasher");this._hashersByName={},this._hashersByCode={},this._loadHasher=r.loadHasher??Nre;for(const t of r.hashers)this.addHasher(t)}addHasher(r){if(this._hashersByName[r.name]!=null||this._hashersByCode[r.code]!=null)throw new Error(`Resolver already exists for codec "${r.name}"`);this._hashersByName[r.name]=r,this._hashersByCode[r.code]=r}removeHasher(r){delete this._hashersByName[r.name],delete this._hashersByCode[r.code]}async getHasher(r){const t=typeof r=="string"?this._hashersByName:this._hashersByCode;if(t[r]!=null)return t[r];const n=await this._loadHasher(r);return t[r]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}}function Mre(e){return async function(r,t,n={}){const o=await e.post("log/level",{signal:n.signal,searchParams:j({arg:[r,t],...n}),headers:n.headers});return qe(await o.json())}}function Dre(e){return async function(t={}){return(await(await e.post("log/ls",{signal:t.signal,searchParams:j(t),headers:t.headers})).json()).Strings}}function Lre(e){return async function*(t={}){yield*(await e.post("log/tail",{signal:t.signal,searchParams:j(t),headers:t.headers})).ndjson()}}function Ure(e){return{level:Mre(e),ls:Dre(e),tail:Lre(e)}}function Fre(e){return async function*(t,n={}){const o=`${t instanceof Uint8Array?Q.decode(t):t}`;async function i(u){let c=u.Hash;if(c.includes("/")===!0){const l=c.startsWith("/ipfs/")===!0?c:`/ipfs/${c}`;c=(await aT(e)(l)).cid}else c=Q.parse(c);return{name:u.Name,path:o+(u.Name!=null?`/${u.Name}`:""),size:u.Size,cid:c,type:xre(u)}}const a=await e.post("ls",{signal:n.signal,searchParams:j({arg:o,...n}),headers:n.headers});for await(let u of a.ndjson()){if(u=u.Objects,u==null)throw new Error("expected .Objects in results");if(u=u[0],u==null)throw new Error("expected one array in results.Objects");const c=u.Links;if(!Array.isArray(c))throw new Error("expected one array in results.Objects[0].Links");if(c.length===0){yield i(u);return}yield*c.map(i)}}}function xre(e){switch(e.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}function Bre(e){return async function(t={}){const n=await e.post("dns",{signal:t.signal,searchParams:j(t),headers:t.headers});return qe(await n.json())}}function Vre(e){return async function(t,n={}){const o=await e.post("name/publish",{signal:n.signal,searchParams:j({arg:`${t}`,...n}),headers:n.headers});return qe(await o.json())}}function Wre(e){return async function(t,n={}){const o=await e.post("name/pubsub/cancel",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers});return qe(await o.json())}}function zre(e){return async function(t={}){const n=await e.post("name/pubsub/state",{signal:t.signal,searchParams:j(t),headers:t.headers});return qe(await n.json())}}function Hre(e){return async function(t={}){return(await(await e.post("name/pubsub/subs",{signal:t.signal,searchParams:j(t),headers:t.headers})).json()).Strings??[]}}function qre(e){return{cancel:Wre(e),state:zre(e),subs:Hre(e)}}function Gre(e){return async function*(t,n={}){const o=await e.post("name/resolve",{signal:n.signal,searchParams:j({arg:t,stream:!0,...n}),headers:n.headers});for await(const i of o.ndjson())yield i.Path}}function Kre(e){return{publish:Vre(e),resolve:Gre(e),pubsub:qre(e)}}function Yre(e){return async function(t,n,o={}){const i=await e.post("object/patch/add-link",{signal:o.signal,searchParams:j({arg:[`${t}`,n.Name??n.name??"",(n.Hash??n.cid??"").toString()??null],...o}),headers:o.headers}),{Hash:a}=await i.json();return Q.parse(a)}}function Zre(e){return async function(t,n,o={}){const i=await e.post("object/patch/rm-link",{signal:o.signal,searchParams:j({arg:[`${t}`,n.Name??n.name??null],...o}),headers:o.headers}),{Hash:a}=await i.json();return Q.parse(a)}}function Qre(e){return{addLink:Yre(e),rmLink:Zre(e)}}function Xre(e,r){return{patch:Qre(e)}}function Jre(e){return Symbol.iterator in e}function ene(e){return Symbol.asyncIterator in e}function $0(e){return Q.asCID(e)!=null}async function*wT(e){if(e==null)throw new Et(`Unexpected input: ${e}`);const r=Q.asCID(e);if(r!=null){yield nt({cid:r});return}if(typeof e=="string"){yield nt({path:e});return}if(e.cid!=null||e.path!=null)return yield nt(e);if(Jre(e)){const t=e[Symbol.iterator](),n=t.next();if(n.done===!0)return t;if($0(n.value)){yield nt({cid:n.value});for(const o of t)yield nt({cid:o});return}if(typeof n.value=="string"){yield nt({path:n.value});for(const o of t)yield nt({path:o});return}if(n.value.cid!=null||n.value.path!=null){yield nt(n.value);for(const o of t)yield nt(o);return}throw new Et(`Unexpected input: ${typeof e}`)}if(ene(e)){const t=e[Symbol.asyncIterator](),n=await t.next();if(n.done===!0)return t;if($0(n.value)){yield nt({cid:n.value});for await(const o of t)yield nt({cid:o});return}if(typeof n.value=="string"){yield nt({path:n.value});for await(const o of t)yield nt({path:o});return}if(n.value.cid!=null||n.value.path!=null){yield nt(n.value);for await(const o of t)yield nt(o);return}throw new Et(`Unexpected input: ${typeof e}`)}throw new Et(`Unexpected input: ${typeof e}`)}function nt(e){const r=e.cid??`${e.path}`;if(r==null)throw new Et("Unexpected input: Please path either a CID or an IPFS path");const t={path:r,recursive:e.recursive!==!1};return e.metadata!=null&&(t.metadata=e.metadata),t}function OT(e){return async function*(t,n={}){for await(const{path:o,recursive:i,metadata:a}of wT(t)){const u=await e.post("pin/add",{signal:n.signal,searchParams:j({...n,arg:o,recursive:i,metadata:a!=null?JSON.stringify(a):void 0,stream:!0}),headers:n.headers});for await(const c of u.ndjson()){if(c.Pins!=null){for(const s of c.Pins)yield Q.parse(s);continue}yield Q.parse(c)}}}}function tne(e){const r=OT(e);return async function(n,o={}){const i=await Nd(r([{path:n.toString(),...o}],o));if(i==null)throw new Error("No response received");return i}}function N0(e,r,t,n){const o={type:e,cid:Q.parse(r)};return t!=null&&(o.metadata=t),n!=null&&(o.name=n),o}function rne(e){return async function*(t={}){let n=[];t.paths!=null&&(n=Array.isArray(t.paths)?t.paths:[t.paths]);const o=await e.post("pin/ls",{signal:t.signal,searchParams:j({...t,arg:n.map(i=>`${i}`),stream:!0}),headers:t.headers});for await(const i of o.ndjson()){if(i.Keys!=null){for(const a of Object.keys(i.Keys))yield N0(i.Keys[a].Type,a,i.Keys[a].Metadata,i.Keys[a].Name);return}yield N0(i.Type,i.Cid,i.Metadata,i.Name)}}}const ET=({Name:e,Status:r,Cid:t})=>({cid:Q.parse(t),name:e,status:r}),ST=e=>{if(typeof e=="string"&&e!=="")return e;throw new TypeError("service name must be passed")},TT=e=>{if(Q.asCID(e)!=null)return e.toString();throw new TypeError(`CID instance expected instead of ${typeof e}`)},Fy=({service:e,cid:r,name:t,status:n,all:o})=>{const i=j({service:ST(e),name:t,force:o===!0?!0:void 0});if(r!=null)for(const a of r)i.append("cid",TT(a));if(n!=null)for(const a of n)i.append("status",a);return i},nne=(e,{service:r,background:t,name:n,origins:o})=>{const i=j({arg:TT(e),service:ST(r),name:n,background:t===!0?!0:void 0});if(o!=null)for(const a of o)i.append("origin",a.toString());return i};function one(e){return async function(t,{timeout:n,signal:o,headers:i,...a}){const u=await e.post("pin/remote/add",{timeout:n,signal:o,headers:i,searchParams:nne(t,a)});return ET(await u.json())}}function ine(e){return async function*({timeout:t,signal:n,headers:o,...i}){const a=await e.post("pin/remote/ls",{timeout:t,signal:n,headers:o,searchParams:Fy(i)});for await(const u of a.ndjson())yield ET(u)}}function ane(e){return async function({timeout:t,signal:n,headers:o,...i}){await e.post("pin/remote/rm",{timeout:t,signal:n,headers:o,searchParams:Fy({...i,all:!0})})}}function sne(e){return async function({timeout:t,signal:n,headers:o,...i}){await e.post("pin/remote/rm",{timeout:t,signal:n,headers:o,searchParams:Fy({...i,all:!1})})}}function une(e){const r=String(e);if(r==="undefined")throw Error("endpoint is required");return r[r.length-1]==="/"?r.slice(0,-1):r}function cne(e){const r={service:e.Service,endpoint:new URL(e.ApiEndpoint)};return e.Stat!=null&&(r.stat=lne(e.Stat)),r}function lne(e){switch(e.Status){case"valid":{const{Pinning:r,Pinned:t,Queued:n,Failed:o}=e.PinCount;return{status:"valid",pinCount:{queued:n,pinning:r,pinned:t,failed:o}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function fne(e){return async function(t,n){const{endpoint:o,key:i,headers:a,timeout:u,signal:c}=n;await e.post("pin/remote/service/add",{timeout:u,signal:c,searchParams:j({arg:[t,une(o),i]}),headers:a})}}function dne(e){return async function(t={}){const{stat:n,headers:o,timeout:i,signal:a}=t;return(await(await e.post("pin/remote/service/ls",{timeout:i,signal:a,headers:o,searchParams:n===!0?j({stat:n}):void 0})).json()).RemoteServices.map(cne)}}function hne(e){return async function(t,n={}){await e.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:j({arg:t})})}}function pne(e){return{add:fne(e),ls:dne(e),rm:hne(e)}}function vne(e){return{add:one(e),ls:ine(e),rm:sne(e),rmAll:ane(e),service:pne(e)}}function PT(e){return async function*(t,n={}){for await(const{path:o,recursive:i}of wT(t)){const a=new URLSearchParams(n.searchParams);a.append("arg",`${o}`),i!=null&&a.set("recursive",String(i));const u=await e.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:j({...n,arg:`${o}`,recursive:i})});for await(const c of u.ndjson()){if(c.Pins!=null){yield*c.Pins.map(s=>Q.parse(s));continue}yield Q.parse(c)}}}}function _ne(e){const r=PT(e);return async function(n,o={}){const i=await Nd(r([{path:n.toString(),...o}],o));if(i==null)throw new Error("No response received");return i}}function yne(e){return{addAll:OT(e),add:tne(e),ls:rne(e),rmAll:PT(e),rm:_ne(e),remote:vne(e)}}function bne(e){return async function*(t,n={}){yield*(await e.post("ping",{signal:n.signal,searchParams:j({arg:`${t}`,...n}),headers:n.headers,transform:qe})).ndjson()}}const mne=e=>Array.isArray(e)?e.map(Kv):e,Kv=e=>we(la(e)),la=e=>Sd.decode(e),gne=e=>BigInt(`0x${we(Sd.decode(e),"base16")}`),xy=e=>Sd.encode(St(e));function wne(e){return async function(t={}){const{Strings:n}=await(await e.post("pubsub/ls",{signal:t.signal,searchParams:j(t),headers:t.headers})).json();return mne(n)??[]}}function One(e){return async function(t,n={}){const o=await e.post("pubsub/peers",{signal:n.signal,searchParams:j({arg:xy(t),...n}),headers:n.headers}),{Strings:i}=await o.json();return i??[]}}function Ene(e){return async function(t,n,o={}){const i=j({arg:xy(t),...o}),a=new AbortController,u=Pr([a.signal,o.signal]);try{await(await e.post("pubsub/pub",{signal:u,searchParams:i,...await hn([n],a,o.headers)})).text()}finally{u.clear()}}}const Sne=Dy("js-kubo-rpc-client:pubsub:subscribe");function Tne(e,r){return async function(n,o,i={}){i.signal=r.subscribe(n,o,i.signal);let a,u;const c=new Promise((l,d)=>{a=l,u=d}),s=setTimeout(()=>{a()},1e3);return e.post("pubsub/sub",{signal:i.signal,searchParams:j({arg:xy(n),...i}),headers:i.headers}).catch(l=>{r.unsubscribe(n,o),u(l)}).then(l=>{clearTimeout(s),l!=null&&(Pne(l,{onMessage:d=>{if(o!=null){if(typeof o=="function"){o(d);return}typeof o.handleEvent=="function"&&o.handleEvent(d)}},onEnd:()=>{r.unsubscribe(n,o)},onError:i.onError}),a())}),c}}async function Pne(e,{onMessage:r,onEnd:t,onError:n}){n=n??Sne;try{for await(const o of e.ndjson())try{if(o.from==null)continue;o.from!=null&&o.seqno!=null?r({type:"signed",from:ft(o.from),data:la(o.data),sequenceNumber:gne(o.seqno),topic:Kv(o.topicIDs[0]),key:o.key!=null?ZJ(la(o.key??"u")):void 0,signature:la(o.signature??"u")}):r({type:"unsigned",data:la(o.data),topic:Kv(o.topicIDs[0])})}catch(i){i.message=`Failed to parse pubsub message: ${i.message}`,n(i,!1,o)}}catch(o){Cne(o)||n(o,!0)}finally{t()}}const Cne=e=>{switch(e.type){case"aborted":return!0;case"abort":return!0;default:return e.name==="AbortError"}};class Ane{constructor(){m(this,"_subs");this._subs=new Map}subscribe(r,t,n){const o=this._subs.get(r)??[];if(o.find(a=>a.handler===t)!=null)throw new Error(`Already subscribed to ${r} with this handler`);const i=new AbortController;return this._subs.set(r,[{handler:t,controller:i}].concat(o)),n!=null&&n.addEventListener("abort",()=>{this.unsubscribe(r,t)}),i.signal}unsubscribe(r,t){const n=this._subs.get(r)??[];let o;t!=null?(this._subs.set(r,n.filter(i=>i.handler!==t)),o=n.filter(i=>i.handler===t)):(this._subs.set(r,[]),o=n),(this._subs.get(r)??[]).length===0&&this._subs.delete(r),o.forEach(i=>{i.controller.abort()})}}function Ine(e,r){return async function(n,o){r.unsubscribe(n,o)}}function Rne(e){const r=new Ane;return{ls:wne(e),peers:One(e),publish:Ene(e),subscribe:Tne(e,r),unsubscribe:Ine(e,r)}}function jne(e){return async function*(t={}){yield*(await e.post("refs/local",{signal:t.signal,transform:qe,searchParams:j(t),headers:t.headers})).ndjson()}}function $ne(e){async function*r(t,n={}){const o=Array.isArray(t)?t:[t];yield*(await e.post("refs",{signal:n.signal,searchParams:j({arg:o.map(a=>`${a instanceof Uint8Array?Q.decode(a):a}`),...n}),headers:n.headers,transform:qe})).ndjson()}return Object.assign(r,{local:jne(e)})}function Nne(e){return async function*(t={}){yield*(await e.post("repo/gc",{signal:t.signal,searchParams:j(t),headers:t.headers,transform:o=>{var i;return{err:o.Error!=null?new Error(o.Error):null,cid:((i=o.Key)==null?void 0:i["/"])!=null?Q.parse(o.Key["/"]):null}}})).ndjson()}}function CT(e){return async function(t={}){const o=await(await e.post("repo/stat",{signal:t.signal,searchParams:j(t),headers:t.headers})).json();return{numObjects:BigInt(o.NumObjects),repoSize:BigInt(o.RepoSize),repoPath:o.RepoPath,version:o.Version,storageMax:BigInt(o.StorageMax)}}}function kne(e){return async function(t={}){return(await(await e.post("repo/version",{signal:t.signal,searchParams:j(t),headers:t.headers})).json()).Version}}function Mne(e){return{gc:Nne(e),stat:CT(e),version:kne(e)}}function Dne(e){return async function(t,n={}){const o=await e.post("resolve",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers}),{Path:i}=await o.json();return i}}function Lne(e){return async function*(t,n={}){const o=await e.post("routing/findpeer",{signal:n.signal,searchParams:j({arg:t.toString(),stream:!0,...n}),headers:n.headers});for await(const i of o.ndjson())yield ki(i)}}function Une(e){return async function*(t,n={}){const o=await e.post("routing/findprovs",{signal:n.signal,searchParams:j({arg:t.toString(),...n}),headers:n.headers});for await(const i of o.ndjson())yield ki(i)}}function Fne(e){return async function*(t,n={}){const o=await e.post("routing/get",{signal:n.signal,searchParams:j({arg:t instanceof Uint8Array?we(t):t.toString(),...n}),headers:n.headers});for await(const i of o.ndjson())yield ki(i)}}function xne(e){return async function*(t,n={recursive:!1}){const o=Array.isArray(t)?t:[t],i=await e.post("routing/provide",{signal:n.signal,searchParams:j({arg:o.map(a=>a.toString()),...n}),headers:n.headers});for await(const a of i.ndjson())yield ki(a)}}function Bne(e){return async function*(t,n,o={}){const i=new AbortController,a=Pr([i.signal,o.signal]);try{const u=await e.post("routing/put",{signal:a,searchParams:j({arg:t instanceof Uint8Array?we(t):t.toString(),stream:!0,...o}),...await hn([n],i,o.headers)});for await(const c of u.ndjson())yield ki(c)}finally{a.clear()}}}function Vne(e){return{findPeer:Lne(e),findProvs:Une(e),get:Fne(e),provide:xne(e),put:Bne(e)}}function Wne(e){return async function*(t={}){yield*(await e.post("stats/bw",{signal:t.signal,searchParams:j(t),headers:t.headers,transform:o=>({totalIn:BigInt(o.TotalIn),totalOut:BigInt(o.TotalOut),rateIn:parseFloat(o.RateIn),rateOut:parseFloat(o.RateOut)})})).ndjson()}}function zne(e){return{bitswap:oT(e),repo:CT(e),bw:Wne(e)}}function Hne(e){return async function(t={}){await(await e.post("shutdown",{signal:t.signal,searchParams:j(t),headers:t.headers})).text()}}function qne(e){return async function(t={}){const n=await e.post("swarm/addrs",{signal:t.signal,searchParams:j(t),headers:t.headers}),{Addrs:o}=await n.json();return Object.keys(o).map(i=>({id:ft(i),addrs:(o[i]??[]).map(a=>ut(a))}))}}function Gne(e){return async function(t,n={}){const o=await e.post("swarm/connect",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers}),{Strings:i}=await o.json();return i??[]}}function Kne(e){return async function(t,n={}){const o=await e.post("swarm/disconnect",{signal:n.signal,searchParams:j({arg:t,...n}),headers:n.headers}),{Strings:i}=await o.json();return i??[]}}function Yne(e){return async function(t={}){const n=await e.post("swarm/addrs/local",{signal:t.signal,searchParams:j(t),headers:t.headers}),{Strings:o}=await n.json();return(o??[]).map(i=>ut(i))}}function Zne(e){return async function(t={}){return((await(await e.post("swarm/peers",{signal:t.signal,searchParams:j(t),headers:t.headers})).json()).Peers??[]).map(i=>({addr:ut(i.Addr),peer:ft(i.Peer),muxer:i.Muxer,latency:i.Latency,streams:i.Streams,direction:i.Direction==null?void 0:i.Direction===0?"inbound":"outbound"}))}}function Qne(e){return{addrs:qne(e),connect:Gne(e),disconnect:Kne(e),localAddrs:Yne(e),peers:Zne(e)}}function Xne(e){return async function(t={}){const n=await e.post("version",{signal:t.signal,searchParams:j(t),headers:t.headers});return{...qe(await n.json()),"ipfs-http-client":"1.0.0"}}}class Jne{constructor(r){m(this,"bases");m(this,"codecs");m(this,"hashers");m(this,"bitswap");m(this,"block");m(this,"bootstrap");m(this,"config");m(this,"dag");m(this,"dht");m(this,"diag");m(this,"files");m(this,"key");m(this,"log");m(this,"name");m(this,"object");m(this,"pin");m(this,"pubsub");m(this,"refs");m(this,"repo");m(this,"routing");m(this,"stats");m(this,"swarm");m(this,"add");m(this,"addAll");m(this,"cat");m(this,"get");m(this,"ls");m(this,"id");m(this,"version");m(this,"stop");m(this,"ping");m(this,"resolve");m(this,"commands");m(this,"mount");m(this,"isOnline");m(this,"getEndpointConfig");var u,c,s,l,d,h;const t=new Are(r),n={name:Zr.name,code:Zr.code,encode:p=>p,decode:p=>p},o=Object.values(nl);(((u=r.ipld)==null?void 0:u.bases)??[]).forEach(p=>o.push(p)),this.bases=new Rre({bases:o,loadBase:(c=r.ipld)==null?void 0:c.loadBase});const i=Object.values(jK);[fQ,CZ,HZ,lX,n].concat(((s=r.ipld)==null?void 0:s.codecs)??[]).forEach(p=>{i.push(p)}),this.codecs=new $re({codecs:i,loadCodec:(l=r.ipld)==null?void 0:l.loadCodec});const a=Object.values(RK);(((d=r.ipld)==null?void 0:d.hashers)??[]).forEach(p=>a.push(p)),this.hashers=new kre({hashers:a,loadHasher:(h=r.ipld)==null?void 0:h.loadHasher}),this.bitswap=lee(t),this.block=vee(t),this.bootstrap=mee(t),this.config=Iee(t),this.dag=Lee(t,this.codecs),this.dht=Gee(t),this.diag=Qee(t),this.files=lte(t),this.key=gte(t),this.log=Ure(t),this.name=Kre(t),this.object=Xre(t,this.codecs),this.pin=yne(t),this.pubsub=Rne(t),this.refs=$ne(t),this.repo=Mne(t),this.routing=Vne(t),this.stats=zne(t),this.swarm=Qne(t),this.add=MX(t),this.addAll=VS(t),this.cat=gee(t),this.get=dte(t),this.ls=Fre(t),this.id=sT(t),this.version=Xne(t),this.stop=Hne(t),this.ping=bne(t),this.resolve=Dne(t),this.commands=wee(t),this.mount=Bre(t),this.isOnline=hte(t),this.getEndpointConfig=fte(t)}}function eoe(e){return new Jne(e)}function toe(e={}){return(typeof e=="string"||ol(e)||e instanceof URL)&&(e={url:e}),eoe(e)}let Fp=null;const yoe=()=>(Fp||(Fp=Bp.driver(Pc.neo4jURL,Bp.auth.basic(Pc.neo4jUser,Pc.neo4jPass))),Fp);let xp=null;const boe=()=>(xp||(xp=toe(Pc.ipfsAPI.replace(/\/+$/,""))),xp);export{TS as A,lQ as B,Q as C,zE as D,coe as E,tK as F,uoe as T,vt as U,boe as a,De as b,tl as c,rl as d,mS as e,Iv as f,yoe as g,Ed as h,Zr as i,XG as j,Sd as k,PZ as l,_S as m,yS as n,gS as o,TZ as p,sy as q,lZ as r,cy as s,uZ as t,N as u,g as v,Fr as w,Qr as x,uQ as y,cQ as z};

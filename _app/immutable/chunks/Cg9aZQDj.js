import{c as f,g as wp}from"./Cpj98o6Y.js";import{s as Hl}from"./DtriRfZb.js";var Tp={exports:{}};/*!
 * Toastify js 1.12.0
 * https://github.com/apvarun/toastify-js
 * @license MIT licensed
 *
 * Copyright (C) 2018 Varun A P
 */(function(e){(function(r,t){e.exports?e.exports=t():r.Toastify=t()})(f,function(r){var t=function(a){return new t.lib.init(a)},n="1.12.0";t.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},t.lib=t.prototype={toastify:n,constructor:t,init:function(a){return a||(a={}),this.options={},this.toastElement=null,this.options.text=a.text||t.defaults.text,this.options.node=a.node||t.defaults.node,this.options.duration=a.duration===0?0:a.duration||t.defaults.duration,this.options.selector=a.selector||t.defaults.selector,this.options.callback=a.callback||t.defaults.callback,this.options.destination=a.destination||t.defaults.destination,this.options.newWindow=a.newWindow||t.defaults.newWindow,this.options.close=a.close||t.defaults.close,this.options.gravity=a.gravity==="bottom"?"toastify-bottom":t.defaults.gravity,this.options.positionLeft=a.positionLeft||t.defaults.positionLeft,this.options.position=a.position||t.defaults.position,this.options.backgroundColor=a.backgroundColor||t.defaults.backgroundColor,this.options.avatar=a.avatar||t.defaults.avatar,this.options.className=a.className||t.defaults.className,this.options.stopOnFocus=a.stopOnFocus===void 0?t.defaults.stopOnFocus:a.stopOnFocus,this.options.onClick=a.onClick||t.defaults.onClick,this.options.offset=a.offset||t.defaults.offset,this.options.escapeMarkup=a.escapeMarkup!==void 0?a.escapeMarkup:t.defaults.escapeMarkup,this.options.ariaLive=a.ariaLive||t.defaults.ariaLive,this.options.style=a.style||t.defaults.style,a.backgroundColor&&(this.options.style.background=a.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var a=document.createElement("div");a.className="toastify on "+this.options.className,this.options.position?a.className+=" toastify-"+this.options.position:this.options.positionLeft===!0?(a.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):a.className+=" toastify-right",a.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.');for(var s in this.options.style)a.style[s]=this.options.style[s];if(this.options.ariaLive&&a.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)a.appendChild(this.options.node);else if(this.options.escapeMarkup?a.innerText=this.options.text:a.innerHTML=this.options.text,this.options.avatar!==""){var c=document.createElement("img");c.src=this.options.avatar,c.className="toastify-avatar",this.options.position=="left"||this.options.positionLeft===!0?a.appendChild(c):a.insertAdjacentElement("afterbegin",c)}if(this.options.close===!0){var u=document.createElement("button");u.type="button",u.setAttribute("aria-label","Close"),u.className="toast-close",u.innerHTML="&#10006;",u.addEventListener("click",(function(T){T.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}).bind(this));var l=window.innerWidth>0?window.innerWidth:screen.width;(this.options.position=="left"||this.options.positionLeft===!0)&&l>360?a.insertAdjacentElement("afterbegin",u):a.appendChild(u)}if(this.options.stopOnFocus&&this.options.duration>0){var h=this;a.addEventListener("mouseover",function(T){window.clearTimeout(a.timeOutValue)}),a.addEventListener("mouseleave",function(){a.timeOutValue=window.setTimeout(function(){h.removeElement(a)},h.options.duration)})}if(typeof this.options.destination<"u"&&a.addEventListener("click",(function(T){T.stopPropagation(),this.options.newWindow===!0?window.open(this.options.destination,"_blank"):window.location=this.options.destination}).bind(this)),typeof this.options.onClick=="function"&&typeof this.options.destination>"u"&&a.addEventListener("click",(function(T){T.stopPropagation(),this.options.onClick()}).bind(this)),typeof this.options.offset=="object"){var v=i("x",this.options),b=i("y",this.options),m=this.options.position=="left"?v:"-"+v,E=this.options.gravity=="toastify-top"?b:"-"+b;a.style.transform="translate("+m+","+E+")"}return a},showToast:function(){this.toastElement=this.buildToast();var a;if(typeof this.options.selector=="string"?a=document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||typeof ShadowRoot<"u"&&this.options.selector instanceof ShadowRoot?a=this.options.selector:a=document.body,!a)throw"Root element is not defined";var s=t.defaults.oldestFirst?a.firstChild:a.lastChild;return a.insertBefore(this.toastElement,s),t.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout((function(){this.removeElement(this.toastElement)}).bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(a){a.className=a.className.replace(" on",""),window.setTimeout((function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),a.parentNode&&a.parentNode.removeChild(a),this.options.callback.call(a),t.reposition()}).bind(this),400)}},t.reposition=function(){for(var a={top:15,bottom:15},s={top:15,bottom:15},c={top:15,bottom:15},u=document.getElementsByClassName("toastify"),l,h=0;h<u.length;h++){o(u[h],"toastify-top")===!0?l="toastify-top":l="toastify-bottom";var v=u[h].offsetHeight;l=l.substr(9,l.length-1);var b=15,m=window.innerWidth>0?window.innerWidth:screen.width;m<=360?(u[h].style[l]=c[l]+"px",c[l]+=v+b):o(u[h],"toastify-left")===!0?(u[h].style[l]=a[l]+"px",a[l]+=v+b):(u[h].style[l]=s[l]+"px",s[l]+=v+b)}return this};function i(a,s){return s.offset[a]?isNaN(s.offset[a])?s.offset[a]:s.offset[a]+"px":"0px"}function o(a,s){return!a||typeof s!="string"?!1:!!(a.className&&a.className.trim().split(/\s+/gi).indexOf(s)>-1)}return t.lib.init.prototype=t.lib,t})})(Tp);var w0=Tp.exports;const Zx=wp(w0);var Sp={},jt={},x={},oe={},dt={},Mt={};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.getBrokenObjectReason=Mt.isBrokenObject=Mt.createBrokenObject=void 0;var Pp="__isBrokenObject__",Cp="__reason__";function T0(e,r){r===void 0&&(r={});var t=function(){throw e};return new Proxy(r,{get:function(n,i){if(i===Pp)return!0;if(i===Cp)return e;if(i==="toJSON")return;t()},set:t,apply:t,construct:t,defineProperty:t,deleteProperty:t,getOwnPropertyDescriptor:t,getPrototypeOf:t,has:t,isExtensible:t,ownKeys:t,preventExtensions:t,setPrototypeOf:t})}Mt.createBrokenObject=T0;function S0(e){return e!==null&&typeof e=="object"&&e[Pp]===!0}Mt.isBrokenObject=S0;function P0(e){return e[Cp]}Mt.getBrokenObjectReason=P0;Object.defineProperty(dt,"__esModule",{value:!0});dt.stringify=void 0;var Nh=Mt;function C0(e,r){return JSON.stringify(e,function(t,n){return(0,Nh.isBrokenObject)(n)?{__isBrokenObject__:!0,__reason__:(0,Nh.getBrokenObjectReason)(n)}:typeof n=="bigint"?"".concat(n,"n"):(r==null?void 0:r.sortedElements)===!0&&typeof n=="object"&&!Array.isArray(n)?Object.keys(n).sort().reduce(function(i,o){return i[o]=n[o],i},{}):(r==null?void 0:r.useCustomToString)===!0&&typeof n=="object"&&!Array.isArray(n)&&typeof n.toString=="function"&&n.toString!==Object.prototype.toString?n==null?void 0:n.toString():n})}dt.stringify=C0;var wd={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.rawPolyfilledDiagnosticRecord=void 0,e.rawPolyfilledDiagnosticRecord={OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"},Object.freeze(e.rawPolyfilledDiagnosticRecord)})(wd);var Rp=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),R0=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),I0=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),A0=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&R0(r,e,t);return I0(r,e),r};Object.defineProperty(oe,"__esModule",{value:!0});oe.PROTOCOL_ERROR=oe.SESSION_EXPIRED=oe.SERVICE_UNAVAILABLE=oe.GQLError=oe.Neo4jError=oe.isRetriableError=oe.newGQLError=oe.newError=void 0;var j0=A0(dt),Ip=wd,Ap={DATABASE_ERROR:"DATABASE_ERROR",CLIENT_ERROR:"CLIENT_ERROR",TRANSIENT_ERROR:"TRANSIENT_ERROR",UNKNOWN:"UNKNOWN"};Object.freeze(Ap);var M0=Object.values(Ap),jp="ServiceUnavailable";oe.SERVICE_UNAVAILABLE=jp;var Mp="SessionExpired";oe.SESSION_EXPIRED=Mp;var N0="ProtocolError";oe.PROTOCOL_ERROR=N0;var $0="N/A",Td=function(e){Rp(r,e);function r(t,n,i,o,a){var s=this,c;return s=e.call(this,t,a!=null?{cause:a}:void 0)||this,s.constructor=r,s.__proto__=r.prototype,s.cause=a??void 0,s.gqlStatus=n,s.gqlStatusDescription=i,s.diagnosticRecord=o,s.classification=W0(s.diagnosticRecord),s.rawClassification=(c=o==null?void 0:o._classification)!==null&&c!==void 0?c:void 0,s.name="GQLError",s}return Object.defineProperty(r.prototype,"diagnosticRecordAsJsonString",{get:function(){return j0.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),r}(Error);oe.GQLError=Td;var Sd=function(e){Rp(r,e);function r(t,n,i,o,a,s){var c=e.call(this,t,i,o,a,s)||this;return c.constructor=r,c.__proto__=r.prototype,c.code=n,c.name="Neo4jError",c.retriable=U0(n),c}return r.isRetriable=function(t){return t!=null&&t instanceof r&&t.retriable},r}(Td);oe.Neo4jError=Sd;function k0(e,r,t,n,i,o){return new Sd(e,r??$0,n??"50N42",i??"error: general processing exception - unexpected error. "+e,o??Ip.rawPolyfilledDiagnosticRecord,t)}oe.newError=k0;function D0(e,r,t,n,i){return new Td(e,t??"50N42",n??"error: general processing exception - unexpected error. "+e,i??Ip.rawPolyfilledDiagnosticRecord,r)}oe.newGQLError=D0;var L0=Sd.isRetriable;oe.isRetriableError=L0;function U0(e){return e===jp||e===Mp||B0(e)||F0(e)}function F0(e){return(e==null?void 0:e.includes("TransientError"))===!0}function B0(e){return e==="Neo.ClientError.Security.AuthorizationExpired"}function W0(e){return e===void 0||e._classification===void 0?"UNKNOWN":M0.includes(e._classification)?e==null?void 0:e._classification:"UNKNOWN"}var Le={};Object.defineProperty(Le,"__esModule",{value:!0});Le.toString=Le.toNumber=Le.inSafeRange=Le.isInt=Le.int=void 0;var Ei=oe,$h=new Map,or=function(){function e(r,t){this.low=r??0,this.high=t??0}return e.prototype.inSafeRange=function(){return this.greaterThanOrEqual(e.MIN_SAFE_VALUE)&&this.lessThanOrEqual(e.MAX_SAFE_VALUE)},e.prototype.toInt=function(){return this.low},e.prototype.toNumber=function(){return this.high*Dr+(this.low>>>0)},e.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(Dr)+BigInt(this.low>>>0);var r=this.negate();return BigInt(-1)*(BigInt(r.high>>>0)*BigInt(Dr)+BigInt(r.low>>>0))},e.prototype.toNumberOrInfinity=function(){return this.lessThan(e.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(e.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},e.prototype.toString=function(r){if(r=r??10,r<2||r>36)throw RangeError("radix out of range: "+r.toString());if(this.isZero())return"0";var t;if(this.isNegative())if(this.equals(e.MIN_VALUE)){var n=e.fromNumber(r),i=this.div(n);return t=i.multiply(n).subtract(this),i.toString(r)+t.toInt().toString(r)}else return"-"+this.negate().toString(r);var o=e.fromNumber(Math.pow(r,6));t=this;for(var a="";;){var s=t.div(o),c=t.subtract(s.multiply(o)).toInt()>>>0,u=c.toString(r);if(t=s,t.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},e.prototype.valueOf=function(){return this.toBigInt()},e.prototype.getHighBits=function(){return this.high},e.prototype.getLowBits=function(){return this.low},e.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(e.MIN_VALUE)?64:this.negate().getNumBitsAbs();var r=this.high!==0?this.high:this.low,t=0;for(t=31;t>0&&!(r&1<<t);t--);return this.high!==0?t+33:t+1},e.prototype.isZero=function(){return this.high===0&&this.low===0},e.prototype.isNegative=function(){return this.high<0},e.prototype.isPositive=function(){return this.high>=0},e.prototype.isOdd=function(){return(this.low&1)===1},e.prototype.isEven=function(){return(this.low&1)===0},e.prototype.equals=function(r){var t=e.fromValue(r);return this.high===t.high&&this.low===t.low},e.prototype.notEquals=function(r){return!this.equals(r)},e.prototype.lessThan=function(r){return this.compare(r)<0},e.prototype.lessThanOrEqual=function(r){return this.compare(r)<=0},e.prototype.greaterThan=function(r){return this.compare(r)>0},e.prototype.greaterThanOrEqual=function(r){return this.compare(r)>=0},e.prototype.compare=function(r){var t=e.fromValue(r);if(this.equals(t))return 0;var n=this.isNegative(),i=t.isNegative();return n&&!i?-1:!n&&i?1:this.subtract(t).isNegative()?-1:1},e.prototype.negate=function(){return this.equals(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.add=function(r){var t=e.fromValue(r),n=this.high>>>16,i=this.high&65535,o=this.low>>>16,a=this.low&65535,s=t.high>>>16,c=t.high&65535,u=t.low>>>16,l=t.low&65535,h=0,v=0,b=0,m=0;return m+=a+l,b+=m>>>16,m&=65535,b+=o+u,v+=b>>>16,b&=65535,v+=i+c,h+=v>>>16,v&=65535,h+=n+s,h&=65535,e.fromBits(b<<16|m,h<<16|v)},e.prototype.subtract=function(r){var t=e.fromValue(r);return this.add(t.negate())},e.prototype.multiply=function(r){if(this.isZero())return e.ZERO;var t=e.fromValue(r);if(t.isZero())return e.ZERO;if(this.equals(e.MIN_VALUE))return t.isOdd()?e.MIN_VALUE:e.ZERO;if(t.equals(e.MIN_VALUE))return this.isOdd()?e.MIN_VALUE:e.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(Lh)&&t.lessThan(Lh))return e.fromNumber(this.toNumber()*t.toNumber());var n=this.high>>>16,i=this.high&65535,o=this.low>>>16,a=this.low&65535,s=t.high>>>16,c=t.high&65535,u=t.low>>>16,l=t.low&65535,h=0,v=0,b=0,m=0;return m+=a*l,b+=m>>>16,m&=65535,b+=o*l,v+=b>>>16,b&=65535,b+=a*u,v+=b>>>16,b&=65535,v+=i*l,h+=v>>>16,v&=65535,v+=o*u,h+=v>>>16,v&=65535,v+=a*c,h+=v>>>16,v&=65535,h+=n*l+i*u+o*c+a*s,h&=65535,e.fromBits(b<<16|m,h<<16|v)},e.prototype.div=function(r){var t=e.fromValue(r);if(t.isZero())throw(0,Ei.newError)("division by zero");if(this.isZero())return e.ZERO;var n,i,o;if(this.equals(e.MIN_VALUE)){if(t.equals(e.ONE)||t.equals(e.NEG_ONE))return e.MIN_VALUE;if(t.equals(e.MIN_VALUE))return e.ONE;var a=this.shiftRight(1);return n=a.div(t).shiftLeft(1),n.equals(e.ZERO)?t.isNegative()?e.ONE:e.NEG_ONE:(i=this.subtract(t.multiply(n)),o=n.add(i.div(t)),o)}else if(t.equals(e.MIN_VALUE))return e.ZERO;if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();for(o=e.ZERO,i=this;i.greaterThanOrEqual(t);){n=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),c=s<=48?1:Math.pow(2,s-48),u=e.fromNumber(n),l=u.multiply(t);l.isNegative()||l.greaterThan(i);)n-=c,u=e.fromNumber(n),l=u.multiply(t);u.isZero()&&(u=e.ONE),o=o.add(u),i=i.subtract(l)}return o},e.prototype.modulo=function(r){var t=e.fromValue(r);return this.subtract(this.div(t).multiply(t))},e.prototype.not=function(){return e.fromBits(~this.low,~this.high)},e.prototype.and=function(r){var t=e.fromValue(r);return e.fromBits(this.low&t.low,this.high&t.high)},e.prototype.or=function(r){var t=e.fromValue(r);return e.fromBits(this.low|t.low,this.high|t.high)},e.prototype.xor=function(r){var t=e.fromValue(r);return e.fromBits(this.low^t.low,this.high^t.high)},e.prototype.shiftLeft=function(r){var t=e.toNumber(r);return(t&=63)===0?e.ZERO:t<32?e.fromBits(this.low<<t,this.high<<t|this.low>>>32-t):e.fromBits(0,this.low<<t-32)},e.prototype.shiftRight=function(r){var t=e.toNumber(r),n=e.toNumber(r);return(t&=63)===0?e.ZERO:n<32?e.fromBits(this.low>>>t|this.high<<32-t,this.high>>t):e.fromBits(this.high>>t-32,this.high>=0?0:-1)},e.isInteger=function(r){return(r==null?void 0:r.__isInteger__)===!0},e.fromInt=function(r){var t;if(r=r|0,r>=-128&&r<128&&(t=$h.get(r),t!=null))return t;var n=new e(r,r<0?-1:0);return r>=-128&&r<128&&$h.set(r,n),n},e.fromBits=function(r,t){return new e(r,t)},e.fromNumber=function(r){return isNaN(r)||!isFinite(r)?e.ZERO:r<=-Dh?e.MIN_VALUE:r+1>=Dh?e.MAX_VALUE:r<0?e.fromNumber(-r).negate():new e(r%Dr|0,r/Dr|0)},e.fromString=function(r,t,n){var i=n===void 0?{}:n,o=i.strictStringValidation;if(r.length===0)throw(0,Ei.newError)("number format error: empty string");if(r==="NaN"||r==="Infinity"||r==="+Infinity"||r==="-Infinity")return e.ZERO;if(t=t??10,t<2||t>36)throw(0,Ei.newError)("radix out of range: "+t.toString());var a;if((a=r.indexOf("-"))>0)throw(0,Ei.newError)('number format error: interior "-" character: '+r);if(a===0)return e.fromString(r.substring(1),t).negate();for(var s=e.fromNumber(Math.pow(t,8)),c=e.ZERO,u=0;u<r.length;u+=8){var l=Math.min(8,r.length-u),h=r.substring(u,u+l),v=parseInt(h,t);if(o===!0&&!V0(h,v,t))throw(0,Ei.newError)('number format error: "'.concat(h,'" is NaN in radix ').concat(t,": ").concat(r));if(l<8){var b=e.fromNumber(Math.pow(t,l));c=c.multiply(b).add(e.fromNumber(v))}else c=c.multiply(s),c=c.add(e.fromNumber(v))}return c},e.fromValue=function(r,t){return t===void 0&&(t={}),r instanceof e?r:typeof r=="number"?(t.ceilFloat===!0&&(r=Math.ceil(r)),e.fromNumber(r)):typeof r=="string"?e.fromString(r,void 0,t):typeof r=="bigint"?e.fromString(r.toString()):new e(r.low,r.high)},e.toNumber=function(r){switch(typeof r){case"number":return r;case"bigint":return Number(r);default:return e.fromValue(r).toNumber()}},e.toString=function(r,t){return e.fromValue(r).toString(t)},e.inSafeRange=function(r){return e.fromValue(r).inSafeRange()},e.ZERO=e.fromInt(0),e.ONE=e.fromInt(1),e.NEG_ONE=e.fromInt(-1),e.MAX_VALUE=e.fromBits(-1,2147483647),e.MIN_VALUE=e.fromBits(0,-2147483648),e.MIN_SAFE_VALUE=e.fromBits(1,-2097152),e.MAX_SAFE_VALUE=e.fromBits(-1,2097151),e.__isInteger__=!0,e}();function x0(e,r,t){var n=e.toString(r),i=Math.max(t-n.length,0),o="0".repeat(i);return"".concat(o).concat(n)}function V0(e,r,t){return!Number.isNaN(e)&&!Number.isNaN(r)&&x0(r,t,e.length)===e.toLowerCase()}Object.defineProperty(or.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var kh=65536,q0=1<<24,Dr=kh*kh,H0=Dr*Dr,Dh=H0/2,Lh=or.fromInt(q0),z0=or.fromValue;Le.int=z0;var G0=or.isInteger;Le.isInt=G0;var Y0=or.inSafeRange;Le.inSafeRange=Y0;var K0=or.toNumber;Le.toNumber=K0;var Z0=or.toString;Le.toString=Z0;Le.default=or;var be={},Pd={},Q={},Q0=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),X0=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),J0=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Q0(r,e,t);return X0(r,e),r},eO=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Q,"__esModule",{value:!0});Q.ENCRYPTION_OFF=Q.ENCRYPTION_ON=Q.equals=Q.validateQueryAndParameters=Q.toNumber=Q.assertValidDate=Q.assertNumberOrInteger=Q.assertNumber=Q.assertString=Q.assertObject=Q.isString=Q.isObject=Q.isEmptyObjectOrNull=void 0;var Df=J0(Le),Wr=dt,tO="ENCRYPTION_ON";Q.ENCRYPTION_ON=tO;var rO="ENCRYPTION_OFF";Q.ENCRYPTION_OFF=rO;function nO(e){if(e===null)return!0;if(!ns(e))return!1;for(var r in e)if(e[r]!==void 0)return!1;return!0}Q.isEmptyObjectOrNull=nO;function ns(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}Q.isObject=ns;function iO(e,r,t){var n,i,o="",a=r??{},s=(n=t==null?void 0:t.skipAsserts)!==null&&n!==void 0?n:!1;return typeof e=="string"?o=e:e instanceof String?o=e.toString():typeof e=="object"&&e.text!=null&&(o=e.text,a=(i=e.parameters)!==null&&i!==void 0?i:{}),s||(cO(o),lO(a)),{validatedQuery:o,params:a}}Q.validateQueryAndParameters=iO;function oO(e,r){if(!ns(e))throw new TypeError(r+" expected to be an object but was: "+(0,Wr.stringify)(e));return e}Q.assertObject=oO;function Np(e,r){if(!$p(e))throw new TypeError((0,Wr.stringify)(r)+" expected to be string but was: "+(0,Wr.stringify)(e));return e}Q.assertString=Np;function aO(e,r){if(typeof e!="number")throw new TypeError(r+" expected to be a number but was: "+(0,Wr.stringify)(e));return e}Q.assertNumber=aO;function uO(e,r){if(typeof e!="number"&&typeof e!="bigint"&&!(0,Df.isInt)(e))throw new TypeError(r+" expected to be either a number or an Integer object but was: "+(0,Wr.stringify)(e));return e}Q.assertNumberOrInteger=uO;function sO(e,r){if(Object.prototype.toString.call(e)!=="[object Date]")throw new TypeError(r+" expected to be a standard JavaScript Date but was: "+(0,Wr.stringify)(e));if(Number.isNaN(e.getTime()))throw new TypeError(r+" expected to be valid JavaScript Date but its time was NaN: "+(0,Wr.stringify)(e));return e}Q.assertValidDate=sO;function cO(e){if(Np(e,"Cypher query"),e.trim().length===0)throw new TypeError("Cypher query is expected to be a non-empty string.")}function lO(e){if(!ns(e)){var r=e.constructor!=null?" "+e.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(r," ").concat(JSON.stringify(e)))}}function $p(e){return Object.prototype.toString.call(e)==="[object String]"}Q.isString=$p;function kp(e,r){var t,n;if(e===r)return!0;if(e===null||r===null)return!1;if(typeof e=="object"&&typeof r=="object"){var i=Object.keys(e),o=Object.keys(r);if(i.length!==o.length)return!1;try{for(var a=eO(i),s=a.next();!s.done;s=a.next()){var c=s.value;if(!kp(e[c],r[c]))return!1}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0}return!1}Q.equals=kp;function fO(e){return e instanceof Df.default?e.toNumber():typeof e=="bigint"?(0,Df.int)(e).toNumber():e}Q.toNumber=fO;(function(e){var r=f&&f.__createBinding||(Object.create?function(O,C,$,U){U===void 0&&(U=$);var K=Object.getOwnPropertyDescriptor(C,$);(!K||("get"in K?!C.__esModule:K.writable||K.configurable))&&(K={enumerable:!0,get:function(){return C[$]}}),Object.defineProperty(O,U,K)}:function(O,C,$,U){U===void 0&&(U=$),O[U]=C[$]}),t=f&&f.__setModuleDefault||(Object.create?function(O,C){Object.defineProperty(O,"default",{enumerable:!0,value:C})}:function(O,C){O.default=C}),n=f&&f.__importStar||function(O){if(O&&O.__esModule)return O;var C={};if(O!=null)for(var $ in O)$!=="default"&&Object.prototype.hasOwnProperty.call(O,$)&&r(C,O,$);return t(C,O),C};Object.defineProperty(e,"__esModule",{value:!0}),e.floorMod=e.floorDiv=e.assertValidZoneId=e.assertValidNanosecond=e.assertValidSecond=e.assertValidMinute=e.assertValidHour=e.assertValidDay=e.assertValidMonth=e.assertValidYear=e.timeZoneOffsetInSeconds=e.totalNanoseconds=e.newDate=e.toStandardDate=e.isoStringToStandardDate=e.dateToIsoString=e.timeZoneOffsetToIsoString=e.timeToIsoString=e.durationToIsoString=e.dateToEpochDay=e.localDateTimeToEpochSecond=e.localTimeToNanoOfDay=e.normalizeNanosecondsForDuration=e.normalizeSecondsForDuration=e.SECONDS_PER_DAY=e.DAYS_PER_400_YEAR_CYCLE=e.DAYS_0000_TO_1970=e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE=e.NANOS_PER_MILLISECOND=e.NANOS_PER_SECOND=e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE=e.MINUTES_PER_HOUR=e.NANOSECOND_OF_SECOND_RANGE=e.SECOND_OF_MINUTE_RANGE=e.MINUTE_OF_HOUR_RANGE=e.HOUR_OF_DAY_RANGE=e.DAY_OF_MONTH_RANGE=e.MONTH_OF_YEAR_RANGE=e.YEAR_RANGE=void 0;var i=n(Le),o=oe,a=Q,s=function(){function O(C,$){this._minNumber=C,this._maxNumber=$,this._minInteger=(0,i.int)(C),this._maxInteger=(0,i.int)($)}return O.prototype.contains=function(C){if((0,i.isInt)(C)&&C instanceof i.default)return C.greaterThanOrEqual(this._minInteger)&&C.lessThanOrEqual(this._maxInteger);if(typeof C=="bigint"){var $=(0,i.int)(C);return $.greaterThanOrEqual(this._minInteger)&&$.lessThanOrEqual(this._maxInteger)}else return C>=this._minNumber&&C<=this._maxNumber},O.prototype.toString=function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")},O}();e.YEAR_RANGE=new s(-999999999,999999999),e.MONTH_OF_YEAR_RANGE=new s(1,12),e.DAY_OF_MONTH_RANGE=new s(1,31),e.HOUR_OF_DAY_RANGE=new s(0,23),e.MINUTE_OF_HOUR_RANGE=new s(0,59),e.SECOND_OF_MINUTE_RANGE=new s(0,59),e.NANOSECOND_OF_SECOND_RANGE=new s(0,999999999),e.MINUTES_PER_HOUR=60,e.SECONDS_PER_MINUTE=60,e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE*e.MINUTES_PER_HOUR,e.NANOS_PER_SECOND=1e9,e.NANOS_PER_MILLISECOND=1e6,e.NANOS_PER_MINUTE=e.NANOS_PER_SECOND*e.SECONDS_PER_MINUTE,e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE*e.MINUTES_PER_HOUR,e.DAYS_0000_TO_1970=719528,e.DAYS_PER_400_YEAR_CYCLE=146097,e.SECONDS_PER_DAY=86400;function c(O,C){return(0,i.int)(O).add(W(C,e.NANOS_PER_SECOND))}e.normalizeSecondsForDuration=c;function u(O){return J(O,e.NANOS_PER_SECOND)}e.normalizeNanosecondsForDuration=u;function l(O,C,$,U){O=(0,i.int)(O),C=(0,i.int)(C),$=(0,i.int)($),U=(0,i.int)(U);var K=O.multiply(e.NANOS_PER_HOUR);return K=K.add(C.multiply(e.NANOS_PER_MINUTE)),K=K.add($.multiply(e.NANOS_PER_SECOND)),K.add(U)}e.localTimeToNanoOfDay=l;function h(O,C,$,U,K,ye,ke){var Pt=v(O,C,$),yr=H(U,K,ye);return Pt.multiply(e.SECONDS_PER_DAY).add(yr)}e.localDateTimeToEpochSecond=h;function v(O,C,$){O=(0,i.int)(O),C=(0,i.int)(C),$=(0,i.int)($);var U=O.multiply(365);return O.greaterThanOrEqual(0)?U=U.add(O.add(3).div(4).subtract(O.add(99).div(100)).add(O.add(399).div(400))):U=U.subtract(O.div(-4).subtract(O.div(-100)).add(O.div(-400))),U=U.add(C.multiply(367).subtract(362).div(12)),U=U.add($.subtract(1)),C.greaterThan(2)&&(U=U.subtract(1),L(O)||(U=U.subtract(1))),U.subtract(e.DAYS_0000_TO_1970)}e.dateToEpochDay=v;function b(O,C,$,U){var K=ce(O),ye=ce(C),ke=me($,U);return"P".concat(K,"M").concat(ye,"DT").concat(ke,"S")}e.durationToIsoString=b;function m(O,C,$,U){var K=ce(O,2),ye=ce(C,2),ke=ce($,2),Pt=z(U);return"".concat(K,":").concat(ye,":").concat(ke).concat(Pt)}e.timeToIsoString=m;function E(O){if(O=(0,i.int)(O),O.equals(0))return"Z";var C=O.isNegative();C&&(O=O.multiply(-1));var $=C?"-":"+",U=ce(O.div(e.SECONDS_PER_HOUR),2),K=ce(O.div(e.SECONDS_PER_MINUTE).modulo(e.MINUTES_PER_HOUR),2),ye=O.modulo(e.SECONDS_PER_MINUTE),ke=ye.equals(0)?null:ce(ye,2);return ke!=null?"".concat($).concat(U,":").concat(K,":").concat(ke):"".concat($).concat(U,":").concat(K)}e.timeZoneOffsetToIsoString=E;function T(O,C,$){var U=Oe(O),K=ce(C,2),ye=ce($,2);return"".concat(U,"-").concat(K,"-").concat(ye)}e.dateToIsoString=T;function S(O){return new Date(O)}e.isoStringToStandardDate=S;function R(O){return new Date(O)}e.toStandardDate=R;function I(O){return new Date(O)}e.newDate=I;function A(O,C){C=C??0;var $=O.getMilliseconds()*e.NANOS_PER_MILLISECOND;return Be(C,$)}e.totalNanoseconds=A;function j(O){var C=O.getSeconds()-O.getUTCSeconds(),$=O.getMinutes()-O.getUTCMinutes(),U=O.getHours()-O.getUTCHours(),K=k(O);return U*e.SECONDS_PER_HOUR+$*e.SECONDS_PER_MINUTE+C+K*e.SECONDS_PER_DAY}e.timeZoneOffsetInSeconds=j;function k(O){return O.getMonth()===O.getUTCMonth()?O.getDate()-O.getUTCDate():O.getFullYear()>O.getUTCFullYear()||O.getMonth()>O.getUTCMonth()&&O.getFullYear()===O.getUTCFullYear()?O.getDate()+M(O.getUTCMonth(),O.getUTCFullYear())-O.getUTCDate():O.getDate()-(O.getUTCDate()+M(O.getMonth(),O.getFullYear()))}function M(O,C){return O===1?C%400===0||C%4===0&&C%100!==0?29:28:[0,2,4,6,7,9,11].includes(O)?31:30}function q(O){return ee(O,e.YEAR_RANGE,"Year")}e.assertValidYear=q;function ne(O){return ee(O,e.MONTH_OF_YEAR_RANGE,"Month")}e.assertValidMonth=ne;function ie(O){return ee(O,e.DAY_OF_MONTH_RANGE,"Day")}e.assertValidDay=ie;function _e(O){return ee(O,e.HOUR_OF_DAY_RANGE,"Hour")}e.assertValidHour=_e;function X(O){return ee(O,e.MINUTE_OF_HOUR_RANGE,"Minute")}e.assertValidMinute=X;function de(O){return ee(O,e.SECOND_OF_MINUTE_RANGE,"Second")}e.assertValidSecond=de;function ze(O){return ee(O,e.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")}e.assertValidNanosecond=ze;var Y=new Map,he=function(O,C){return(0,o.newError)("".concat(C,' is expected to be a valid ZoneId but was: "').concat(O,'"'))};function V(O,C){var $=Y.get(C);if($!==!0){if($===!1)throw he(C,O);try{Intl.DateTimeFormat(void 0,{timeZone:C}),Y.set(C,!0)}catch{throw Y.set(C,!1),he(C,O)}}}e.assertValidZoneId=V;function ee(O,C,$){if((0,a.assertNumberOrInteger)(O,$),!C.contains(O))throw(0,o.newError)("".concat($," is expected to be in range ").concat(C.toString()," but was: ").concat(O.toString()));return O}function H(O,C,$){O=(0,i.int)(O),C=(0,i.int)(C),$=(0,i.int)($);var U=O.multiply(e.SECONDS_PER_HOUR);return U=U.add(C.multiply(e.SECONDS_PER_MINUTE)),U.add($)}function L(O){return O=(0,i.int)(O),O.modulo(4).equals(0)?O.modulo(100).equals(0)?!!O.modulo(400).equals(0):!0:!1}function W(O,C){O=(0,i.int)(O),C=(0,i.int)(C);var $=O.div(C);return O.isPositive()!==C.isPositive()&&$.multiply(C).notEquals(O)&&($=$.subtract(1)),$}e.floorDiv=W;function J(O,C){return O=(0,i.int)(O),C=(0,i.int)(C),O.subtract(W(O,C).multiply(C))}e.floorMod=J;function me(O,C){O=(0,i.int)(O),C=(0,i.int)(C);var $,U,K=O.isNegative(),ye=C.greaterThan(0);return K&&ye?O.equals(-1)?$="-0":$=O.add(1).toString():$=O.toString(),ye&&(K?U=z(C.negate().add(2*e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND)):U=z(C.add(e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND))),U!=null?$+U:$}function z(O){return O=(0,i.int)(O),O.equals(0)?"":"."+ce(O,9)}function Oe(O){var C=(0,i.int)(O);return C.isNegative()||C.greaterThan(9999)?ce(C,6,{usePositiveSign:!0}):ce(C,4)}function ce(O,C,$){O=(0,i.int)(O);var U=O.isNegative();U&&(O=O.negate());var K=O.toString();if(C!=null)for(;K.length<C;)K="0"+K;return U?"-"+K:($==null?void 0:$.usePositiveSign)===!0?"+"+K:K}function Be(O,C){return O instanceof i.default?O.add(C):typeof O=="bigint"?O+BigInt(C):O+C}})(Pd);var dO=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),hO=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Dp=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&dO(r,e,t);return hO(r,e),r},_O=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(be,"__esModule",{value:!0});be.isDateTime=be.DateTime=be.isLocalDateTime=be.LocalDateTime=be.isDate=be.Date=be.isTime=be.Time=be.isLocalTime=be.LocalTime=be.isDuration=be.Duration=void 0;var G=Dp(Pd),At=Q,vO=oe,Fr=Dp(Le),Ln={value:!0,enumerable:!1,configurable:!1,writable:!1},Lp="__isDuration__",Up="__isLocalTime__",Fp="__isTime__",Bp="__isDate__",Wp="__isLocalDateTime__",xp="__isDateTime__",Vp=function(){function e(r,t,n,i){this.months=(0,At.assertNumberOrInteger)(r,"Months"),this.days=(0,At.assertNumberOrInteger)(t,"Days"),(0,At.assertNumberOrInteger)(n,"Seconds"),(0,At.assertNumberOrInteger)(i,"Nanoseconds"),this.seconds=G.normalizeSecondsForDuration(n,i),this.nanoseconds=G.normalizeNanosecondsForDuration(i),Object.freeze(this)}return e.prototype.toString=function(){return G.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},e}();be.Duration=Vp;Object.defineProperty(Vp.prototype,Lp,Ln);function pO(e){return Un(e,Lp)}be.isDuration=pO;var qp=function(){function e(r,t,n,i){this.hour=G.assertValidHour(r),this.minute=G.assertValidMinute(t),this.second=G.assertValidSecond(n),this.nanosecond=G.assertValidNanosecond(i),Object.freeze(this)}return e.fromStandardDate=function(r,t){Xi(r,t);var n=G.totalNanoseconds(r,t);return new e(r.getHours(),r.getMinutes(),r.getSeconds(),n instanceof Fr.default?n.toInt():typeof n=="bigint"?(0,Fr.int)(n).toInt():n)},e.prototype.toString=function(){return G.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},e}();be.LocalTime=qp;Object.defineProperty(qp.prototype,Up,Ln);function bO(e){return Un(e,Up)}be.isLocalTime=bO;var Hp=function(){function e(r,t,n,i,o){this.hour=G.assertValidHour(r),this.minute=G.assertValidMinute(t),this.second=G.assertValidSecond(n),this.nanosecond=G.assertValidNanosecond(i),this.timeZoneOffsetSeconds=(0,At.assertNumberOrInteger)(o,"Time zone offset in seconds"),Object.freeze(this)}return e.fromStandardDate=function(r,t){return Xi(r,t),new e(r.getHours(),r.getMinutes(),r.getSeconds(),(0,Fr.toNumber)(G.totalNanoseconds(r,t)),G.timeZoneOffsetInSeconds(r))},e.prototype.toString=function(){return G.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+G.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},e}();be.Time=Hp;Object.defineProperty(Hp.prototype,Fp,Ln);function yO(e){return Un(e,Fp)}be.isTime=yO;var zp=function(){function e(r,t,n){this.year=G.assertValidYear(r),this.month=G.assertValidMonth(t),this.day=G.assertValidDay(n),Object.freeze(this)}return e.fromStandardDate=function(r){return Xi(r),new e(r.getFullYear(),r.getMonth()+1,r.getDate())},e.prototype.toStandardDate=function(){return G.isoStringToStandardDate(this.toString())},e.prototype.toString=function(){return G.dateToIsoString(this.year,this.month,this.day)},e}();be.Date=zp;Object.defineProperty(zp.prototype,Bp,Ln);function mO(e){return Un(e,Bp)}be.isDate=mO;var Gp=function(){function e(r,t,n,i,o,a,s){this.year=G.assertValidYear(r),this.month=G.assertValidMonth(t),this.day=G.assertValidDay(n),this.hour=G.assertValidHour(i),this.minute=G.assertValidMinute(o),this.second=G.assertValidSecond(a),this.nanosecond=G.assertValidNanosecond(s),Object.freeze(this)}return e.fromStandardDate=function(r,t){return Xi(r,t),new e(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),(0,Fr.toNumber)(G.totalNanoseconds(r,t)))},e.prototype.toStandardDate=function(){return G.isoStringToStandardDate(this.toString())},e.prototype.toString=function(){return Kp(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},e}();be.LocalDateTime=Gp;Object.defineProperty(Gp.prototype,Wp,Ln);function gO(e){return Un(e,Wp)}be.isLocalDateTime=gO;var Yp=function(){function e(r,t,n,i,o,a,s,c,u){this.year=G.assertValidYear(r),this.month=G.assertValidMonth(t),this.day=G.assertValidDay(n),this.hour=G.assertValidHour(i),this.minute=G.assertValidMinute(o),this.second=G.assertValidSecond(a),this.nanosecond=G.assertValidNanosecond(s);var l=_O(EO(c,u),2),h=l[0],v=l[1];this.timeZoneOffsetSeconds=h,this.timeZoneId=v??void 0,Object.freeze(this)}return e.fromStandardDate=function(r,t){return Xi(r,t),new e(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),(0,Fr.toNumber)(G.totalNanoseconds(r,t)),G.timeZoneOffsetInSeconds(r),null)},e.prototype.toStandardDate=function(){return G.toStandardDate(this._toUTC())},e.prototype.toString=function(){var r,t=Kp(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),n=this.timeZoneOffsetSeconds!=null?G.timeZoneOffsetToIsoString((r=this.timeZoneOffsetSeconds)!==null&&r!==void 0?r:0):"",i=this.timeZoneId!=null?"[".concat(this.timeZoneId,"]"):"";return t+n+i},e.prototype._toUTC=function(){var r;if(this.timeZoneOffsetSeconds===void 0)throw new Error("Requires DateTime created with time zone offset");var t=G.localDateTimeToEpochSecond(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),n=t.subtract((r=this.timeZoneOffsetSeconds)!==null&&r!==void 0?r:0);return(0,Fr.int)(n).multiply(1e3).add((0,Fr.int)(this.nanosecond).div(1e6)).toNumber()},e}();be.DateTime=Yp;Object.defineProperty(Yp.prototype,xp,Ln);function OO(e){return Un(e,xp)}be.isDateTime=OO;function Un(e,r){return e!=null&&e[r]===!0}function Kp(e,r,t,n,i,o,a){return G.dateToIsoString(e,r,t)+"T"+G.timeToIsoString(n,i,o,a)}function EO(e,r){var t=e!=null,n=r!=null&&r!=="";if(!t&&!n)throw(0,vO.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(e," and id: ").concat(r));var i=[void 0,void 0];return t&&((0,At.assertNumberOrInteger)(e,"Time zone offset in seconds"),i[0]=e),n&&((0,At.assertString)(r,"Time zone ID"),G.assertValidZoneId("Time zone ID",r),i[1]=r),i}function Xi(e,r){(0,At.assertValidDate)(e,"Standard date"),r!=null&&(0,At.assertNumberOrInteger)(r,"Nanosecond")}var we={};Object.defineProperty(we,"__esModule",{value:!0});we.isPathSegment=we.PathSegment=we.isPath=we.Path=we.isUnboundRelationship=we.UnboundRelationship=we.isRelationship=we.Relationship=we.isNode=we.Node=void 0;var Cd=dt,Ji={value:!0,enumerable:!1,configurable:!1,writable:!1},Zp="__isNode__",Qp="__isRelationship__",Xp="__isUnboundRelationship__",Jp="__isPath__",eb="__isPathSegment__";function eo(e,r){return e!=null&&e[r]===!0}var tb=function(){function e(r,t,n,i){this.identity=r,this.labels=t,this.properties=n,this.elementId=Ui(i,function(){return r.toString()})}return e.prototype.toString=function(){for(var r="("+this.elementId,t=0;t<this.labels.length;t++)r+=":"+this.labels[t];var n=Object.keys(this.properties);if(n.length>0){r+=" {";for(var t=0;t<n.length;t++)t>0&&(r+=","),r+=n[t]+":"+(0,Cd.stringify)(this.properties[n[t]]);r+="}"}return r+=")",r},e}();we.Node=tb;Object.defineProperty(tb.prototype,Zp,Ji);function wO(e){return eo(e,Zp)}we.isNode=wO;var Fu=function(){function e(r,t,n,i,o,a,s,c){this.identity=r,this.start=t,this.end=n,this.type=i,this.properties=o,this.elementId=Ui(a,function(){return r.toString()}),this.startNodeElementId=Ui(s,function(){return t.toString()}),this.endNodeElementId=Ui(c,function(){return n.toString()})}return e.prototype.toString=function(){var r="("+this.startNodeElementId+")-[:"+this.type,t=Object.keys(this.properties);if(t.length>0){r+=" {";for(var n=0;n<t.length;n++)n>0&&(r+=","),r+=t[n]+":"+(0,Cd.stringify)(this.properties[t[n]]);r+="}"}return r+="]->("+this.endNodeElementId+")",r},e}();we.Relationship=Fu;Object.defineProperty(Fu.prototype,Qp,Ji);function TO(e){return eo(e,Qp)}we.isRelationship=TO;var rb=function(){function e(r,t,n,i){this.identity=r,this.type=t,this.properties=n,this.elementId=Ui(i,function(){return r.toString()})}return e.prototype.bind=function(r,t){return new Fu(this.identity,r,t,this.type,this.properties,this.elementId)},e.prototype.bindTo=function(r,t){return new Fu(this.identity,r.identity,t.identity,this.type,this.properties,this.elementId,r.elementId,t.elementId)},e.prototype.toString=function(){var r="-[:"+this.type,t=Object.keys(this.properties);if(t.length>0){r+=" {";for(var n=0;n<t.length;n++)n>0&&(r+=","),r+=t[n]+":"+(0,Cd.stringify)(this.properties[t[n]]);r+="}"}return r+="]->",r},e}();we.UnboundRelationship=rb;Object.defineProperty(rb.prototype,Xp,Ji);function SO(e){return eo(e,Xp)}we.isUnboundRelationship=SO;var nb=function(){function e(r,t,n){this.start=r,this.relationship=t,this.end=n}return e}();we.PathSegment=nb;Object.defineProperty(nb.prototype,eb,Ji);function PO(e){return eo(e,eb)}we.isPathSegment=PO;var ib=function(){function e(r,t,n){this.start=r,this.end=t,this.segments=n,this.length=n.length}return e}();we.Path=ib;Object.defineProperty(ib.prototype,Jp,Ji);function CO(e){return eo(e,Jp)}we.isPath=CO;function Ui(e,r){return e??r()}var Rd={},zl=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Gl=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},Yl=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(Rd,"__esModule",{value:!0});var Uh=oe;function RO(e){var r={};return e.forEach(function(t,n){r[t]=n}),r}var IO=function(){function e(r,t,n){this.keys=r,this.length=r.length,this._fields=t,this._fieldLookup=n??RO(r)}return e.prototype.forEach=function(r){var t,n;try{for(var i=Gl(this.entries()),o=i.next();!o.done;o=i.next()){var a=Yl(o.value,2),s=a[0],c=a[1];r(c,s,this)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.map=function(r){var t,n,i=[];try{for(var o=Gl(this.entries()),a=o.next();!a.done;a=o.next()){var s=Yl(a.value,2),c=s[0],u=s[1];i.push(r(u,c,this))}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},e.prototype.entries=function(){var r;return zl(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,[this.keys[r],this._fields[r]]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype.values=function(){var r;return zl(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,this._fields[r]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype[Symbol.iterator]=function(){var r;return zl(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,this._fields[r]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype.toObject=function(){var r,t,n={};try{for(var i=Gl(this.entries()),o=i.next();!o.done;o=i.next()){var a=Yl(o.value,2),s=a[0],c=a[1];n[s]=c}}catch(u){r={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}return n},e.prototype.get=function(r){var t;if(typeof r!="number"){if(t=this._fieldLookup[r],t===void 0)throw(0,Uh.newError)("This record has no field with key '".concat(r.toString(),"', available keys are: [")+this.keys.toString()+"].")}else t=r;if(t>this._fields.length-1||t<0)throw(0,Uh.newError)("This record has no field with index '"+t.toString()+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[t]},e.prototype.has=function(r){return typeof r=="number"?r>=0&&r<this._fields.length:this._fieldLookup[r]!==void 0},e}();Rd.default=IO;var In={};Object.defineProperty(In,"__esModule",{value:!0});In.isPoint=In.Point=void 0;var _u=Q,ob="__isPoint__",ab=function(){function e(r,t,n,i){this.srid=(0,_u.assertNumberOrInteger)(r,"SRID"),this.x=(0,_u.assertNumber)(t,"X coordinate"),this.y=(0,_u.assertNumber)(n,"Y coordinate"),this.z=i==null?i:(0,_u.assertNumber)(i,"Z coordinate"),Object.freeze(this)}return e.prototype.toString=function(){return this.z!=null&&!isNaN(this.z)?"Point{srid=".concat(Er(this.srid),", x=").concat(Er(this.x),", y=").concat(Er(this.y),", z=").concat(Er(this.z),"}"):"Point{srid=".concat(Er(this.srid),", x=").concat(Er(this.x),", y=").concat(Er(this.y),"}")},e}();In.Point=ab;function Er(e){return Number.isInteger(e)?e.toString()+".0":e.toString()}Object.defineProperty(ab.prototype,ob,{value:!0,enumerable:!1,configurable:!1,writable:!1});function AO(e){var r=e;return e!=null&&r[ob]===!0}In.isPoint=AO;var xe={},te={},Zt={};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.FailedObserver=Zt.CompletedObserver=void 0;var jO=function(){function e(){}return e.prototype.subscribe=function(r){Fi(r,r.onKeys,[]),Fi(r,r.onCompleted,{})},e.prototype.cancel=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.prepareToHandleSingleResponse=function(){},e.prototype.markCompleted=function(){},e.prototype.onError=function(r){throw new Error("CompletedObserver not supposed to call onError",{cause:r})},e}();Zt.CompletedObserver=jO;var MO=function(){function e(r){var t=r.error,n=r.onError;this._error=t,this._beforeError=n,this._observers=[],this.onError(t)}return e.prototype.subscribe=function(r){Fi(r,r.onError,this._error),this._observers.push(r)},e.prototype.onError=function(r){Fi(this,this._beforeError,r),this._observers.forEach(function(t){return Fi(t,t.onError,r)})},e.prototype.cancel=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.markCompleted=function(){},e.prototype.prepareToHandleSingleResponse=function(){},e}();Zt.FailedObserver=MO;function Fi(e,r,t){r!=null&&r.bind(e)(t)}var ar={},NO=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),$O=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),kO=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&NO(r,e,t);return $O(r,e),r},DO=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},LO=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(ar,"__esModule",{value:!0});ar.Bookmarks=void 0;var Fh=kO(Q),UO="bookmarks",ub=function(){function e(r){this._values=BO(r)}return e.empty=function(){return FO},e.prototype.isEmpty=function(){return this._values.length===0},e.prototype.values=function(){return this._values},e.prototype[Symbol.iterator]=function(){return this._values[Symbol.iterator]()},e.prototype.asBeginTransactionParameters=function(){var r;return this.isEmpty()?{}:(r={},r[UO]=this._values,r)},e}();ar.Bookmarks=ub;var FO=new ub(null);function BO(e){if(e==null||e==="")return[];if(Fh.isString(e))return[e];if(Array.isArray(e)){for(var r=new Set,t=sb(e),n=0;n<t.length;n++){var i=t[n];if(i!=null){if(!Fh.isString(i))throw new TypeError("Bookmark value should be a string, given: '".concat(i,"'"));r.add(i)}}return LO([],DO(r),!1)}throw new TypeError("Bookmarks should either be a string or a string array, given: '".concat(e,"'"))}function sb(e){return e.reduce(function(r,t){return Array.isArray(t)?r.concat(sb(t)):r.concat(t)},[])}var B={};Object.defineProperty(B,"__esModule",{value:!0});B.TELEMETRY_APIS=B.BOLT_PROTOCOL_V5_8=B.BOLT_PROTOCOL_V5_7=B.BOLT_PROTOCOL_V5_6=B.BOLT_PROTOCOL_V5_5=B.BOLT_PROTOCOL_V5_4=B.BOLT_PROTOCOL_V5_3=B.BOLT_PROTOCOL_V5_2=B.BOLT_PROTOCOL_V5_1=B.BOLT_PROTOCOL_V5_0=B.BOLT_PROTOCOL_V4_4=B.BOLT_PROTOCOL_V4_3=B.BOLT_PROTOCOL_V4_2=B.BOLT_PROTOCOL_V4_1=B.BOLT_PROTOCOL_V4_0=B.BOLT_PROTOCOL_V3=B.BOLT_PROTOCOL_V2=B.BOLT_PROTOCOL_V1=B.DEFAULT_POOL_MAX_SIZE=B.DEFAULT_POOL_ACQUISITION_TIMEOUT=B.DEFAULT_CONNECTION_TIMEOUT_MILLIS=B.ACCESS_MODE_WRITE=B.ACCESS_MODE_READ=B.FETCH_ALL=void 0;var WO=-1;B.FETCH_ALL=WO;var xO=60*1e3;B.DEFAULT_POOL_ACQUISITION_TIMEOUT=xO;var VO=100;B.DEFAULT_POOL_MAX_SIZE=VO;var qO=3e4;B.DEFAULT_CONNECTION_TIMEOUT_MILLIS=qO;var HO="READ";B.ACCESS_MODE_READ=HO;var zO="WRITE";B.ACCESS_MODE_WRITE=zO;var GO=1;B.BOLT_PROTOCOL_V1=GO;var YO=2;B.BOLT_PROTOCOL_V2=YO;var KO=3;B.BOLT_PROTOCOL_V3=KO;var ZO=4;B.BOLT_PROTOCOL_V4_0=ZO;var QO=4.1;B.BOLT_PROTOCOL_V4_1=QO;var XO=4.2;B.BOLT_PROTOCOL_V4_2=XO;var JO=4.3;B.BOLT_PROTOCOL_V4_3=JO;var eE=4.4;B.BOLT_PROTOCOL_V4_4=eE;var tE=5;B.BOLT_PROTOCOL_V5_0=tE;var rE=5.1;B.BOLT_PROTOCOL_V5_1=rE;var nE=5.2;B.BOLT_PROTOCOL_V5_2=nE;var iE=5.3;B.BOLT_PROTOCOL_V5_3=iE;var oE=5.4;B.BOLT_PROTOCOL_V5_4=oE;var aE=5.5;B.BOLT_PROTOCOL_V5_5=aE;var uE=5.6;B.BOLT_PROTOCOL_V5_6=uE;var sE=5.7;B.BOLT_PROTOCOL_V5_7=sE;var cE=5.8;B.BOLT_PROTOCOL_V5_8=cE;var lE={MANAGED_TRANSACTION:0,UNMANAGED_TRANSACTION:1,AUTO_COMMIT_TRANSACTION:2,EXECUTE_QUERY:3};B.TELEMETRY_APIS=lE;var lt={},Qr={},fE=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),hn;Object.defineProperty(Qr,"__esModule",{value:!0});Qr.Logger=void 0;var cb=oe,Lf="error",Uf="warn",Hi="info",Ff="debug",dE=Hi,Bu=(hn={},hn[Lf]=0,hn[Uf]=1,hn[Hi]=2,hn[Ff]=3,hn),lb=function(){function e(r,t){this._level=r,this._loggerFunction=t}return e.create=function(r){if((r==null?void 0:r.logging)!=null){var t=r.logging,n=vE(t),i=pE(t);return new e(n,i)}return this.noOp()},e.noOp=function(){return _E},e.prototype.isErrorEnabled=function(){return vu(this._level,Lf)},e.prototype.error=function(r){this.isErrorEnabled()&&this._loggerFunction(Lf,r)},e.prototype.isWarnEnabled=function(){return vu(this._level,Uf)},e.prototype.warn=function(r){this.isWarnEnabled()&&this._loggerFunction(Uf,r)},e.prototype.isInfoEnabled=function(){return vu(this._level,Hi)},e.prototype.info=function(r){this.isInfoEnabled()&&this._loggerFunction(Hi,r)},e.prototype.isDebugEnabled=function(){return vu(this._level,Ff)},e.prototype.debug=function(r){this.isDebugEnabled()&&this._loggerFunction(Ff,r)},e}();Qr.Logger=lb;var hE=function(e){fE(r,e);function r(){return e.call(this,Hi,function(t,n){})||this}return r.prototype.isErrorEnabled=function(){return!1},r.prototype.error=function(t){},r.prototype.isWarnEnabled=function(){return!1},r.prototype.warn=function(t){},r.prototype.isInfoEnabled=function(){return!1},r.prototype.info=function(t){},r.prototype.isDebugEnabled=function(){return!1},r.prototype.debug=function(t){},r}(lb),_E=new hE;function vu(e,r){return Bu[e]>=Bu[r]}function vE(e){if((e==null?void 0:e.level)!=null){var r=e.level,t=Bu[r];if(t==null&&t!==0)throw(0,cb.newError)("Illegal logging level: ".concat(r,". Supported levels are: ").concat(Object.keys(Bu).toString()));return r}return dE}function pE(e){var r,t;if((e==null?void 0:e.logger)!=null){var n=e.logger;if(n!=null&&typeof n=="function")return n}throw(0,cb.newError)("Illegal logger function: ".concat((t=(r=e==null?void 0:e.logger)===null||r===void 0?void 0:r.toString())!==null&&t!==void 0?t:"undefined"))}var fb=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Bi=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Wi=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(lt,"__esModule",{value:!0});lt.EMPTY_CONNECTION_HOLDER=lt.ReadOnlyConnectionHolder=lt.ConnectionHolder=void 0;var bE=oe,yE=Q,mE=B,Bh=ar,gE=Qr,Id=function(){function e(r){var t=r.mode,n=r.database,i=n===void 0?"":n,o=r.bookmarks,a=r.connectionProvider,s=r.impersonatedUser,c=r.onDatabaseNameResolved,u=r.getConnectionAcquistionBookmarks,l=r.auth,h=r.log;this._mode=t??mE.ACCESS_MODE_WRITE,this._closed=!1,this._database=i!=null?(0,yE.assertString)(i,"database"):"",this._bookmarks=o??Bh.Bookmarks.empty(),this._connectionProvider=a,this._impersonatedUser=s,this._referenceCount=0,this._connectionPromise=Promise.resolve(null),this._onDatabaseNameResolved=c,this._auth=l,this._log=h,this._logError=this._logError.bind(this),this._getConnectionAcquistionBookmarks=u??function(){return Promise.resolve(Bh.Bookmarks.empty())}}return e.prototype.mode=function(){return this._mode},e.prototype.database=function(){return this._database},e.prototype.setDatabase=function(r){this._database=r},e.prototype.bookmarks=function(){return this._bookmarks},e.prototype.connectionProvider=function(){return this._connectionProvider},e.prototype.referenceCount=function(){return this._referenceCount},e.prototype.initializeConnection=function(r){if(this._referenceCount===0&&this._connectionProvider!=null)this._connectionPromise=this._createConnectionPromise(this._connectionProvider,r);else return this._referenceCount++,!1;return this._referenceCount++,!0},e.prototype._createConnectionPromise=function(r,t){return Bi(this,void 0,void 0,function(){var n,i,o;return Wi(this,function(a){switch(a.label){case 0:return i=(n=r).acquireConnection,o={accessMode:this._mode,database:this._database},[4,this._getBookmarks()];case 1:return[4,i.apply(n,[(o.bookmarks=a.sent(),o.impersonatedUser=this._impersonatedUser,o.onDatabaseNameResolved=this._onDatabaseNameResolved,o.auth=this._auth,o.homeDb=t,o)])];case 2:return[2,a.sent()]}})})},e.prototype._getBookmarks=function(){return Bi(this,void 0,void 0,function(){return Wi(this,function(r){switch(r.label){case 0:return[4,this._getConnectionAcquistionBookmarks()];case 1:return[2,r.sent()]}})})},e.prototype.getConnection=function(){return this._connectionPromise},e.prototype.releaseConnection=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount--,this._referenceCount===0?this._releaseConnection():this._connectionPromise)},e.prototype.close=function(r){return this._closed=!0,this._referenceCount===0?this._connectionPromise:(this._referenceCount=0,this._releaseConnection(r))},e.prototype.log=function(){return this._log},e.prototype._releaseConnection=function(r){return this._connectionPromise=this._connectionPromise.then(function(t){return t!=null?t.isOpen()&&(t.hasOngoingObservableRequests()||r===!0)?t.resetAndFlush().catch(wE).then(function(){return t.release().then(function(){return null})}):t.release().then(function(){return null}):Promise.resolve(null)}).catch(this._logError),this._connectionPromise},e.prototype._logError=function(r){return this._log.isWarnEnabled()&&this._log.warn("ConnectionHolder got an error while releasing the connection. Error ".concat(r,". Stacktrace: ").concat(r.stack)),null},e}();lt.ConnectionHolder=Id;var db=function(e){fb(r,e);function r(t){var n=e.call(this,{mode:t.mode(),database:t.database(),bookmarks:t.bookmarks(),getConnectionAcquistionBookmarks:t._getConnectionAcquistionBookmarks,connectionProvider:t.connectionProvider(),log:t.log()})||this;return n._connectionHolder=t,n}return r.prototype.initializeConnection=function(){return this._connectionHolder.referenceCount()!==0},r.prototype.getConnection=function(){return this._connectionHolder.getConnection()},r.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},r.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},r}(Id);lt.ReadOnlyConnectionHolder=db;lt.default=db;var OE=function(e){fb(r,e);function r(){return e.call(this,{log:gE.Logger.create({})})||this}return r.prototype.mode=function(){},r.prototype.database=function(){},r.prototype.initializeConnection=function(){return!0},r.prototype.getConnection=function(){return Bi(this,void 0,void 0,function(){return Wi(this,function(t){switch(t.label){case 0:return[4,Promise.reject((0,bE.newError)("This connection holder does not serve connections"))];case 1:return[2,t.sent()]}})})},r.prototype.releaseConnection=function(){return Bi(this,void 0,void 0,function(){return Wi(this,function(t){switch(t.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,t.sent()]}})})},r.prototype.close=function(){return Bi(this,void 0,void 0,function(){return Wi(this,function(t){switch(t.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,t.sent()]}})})},r}(Id),EE=new OE;lt.EMPTY_CONNECTION_HOLDER=EE;function wE(e){return null}var Fn={},TE=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),SE=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),PE=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&TE(r,e,t);return SE(r,e),r};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.TxConfig=void 0;var zi=PE(Q),CE=oe,RE=Le,hb=function(){function e(r,t){NE(r),this.timeout=AE(r,t),this.metadata=ME(r)}return e.empty=function(){return IE},e.prototype.isEmpty=function(){return Object.values(this).every(function(r){return r==null})},e}();Fn.TxConfig=hb;var IE=new hb({});function AE(e,r){if(zi.isObject(e)&&e.timeout!=null){zi.assertNumberOrInteger(e.timeout,"Transaction timeout"),jE(e)&&(r==null?void 0:r.isInfoEnabled())===!0&&(r==null||r.info("Transaction timeout expected to be an integer, got: ".concat(e.timeout,". The value will be rounded up.")));var t=(0,RE.int)(e.timeout,{ceilFloat:!0});if(t.isNegative())throw(0,CE.newError)("Transaction timeout should not be negative");return t}return null}function jE(e){return typeof e.timeout=="number"&&!Number.isInteger(e.timeout)}function ME(e){if(zi.isObject(e)&&e.metadata!=null){var r=e.metadata;if(zi.assertObject(r,"config.metadata"),Object.keys(r).length!==0)return r}return null}function NE(e){e!=null&&zi.assertObject(e,"Transaction config")}var to={},Bf=f&&f.__assign||function(){return Bf=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Bf.apply(this,arguments)},$E=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},kE=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},DE=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},LE=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(to,"__esModule",{value:!0});to.TransactionExecutor=void 0;var wi=oe,UE=B,FE=30*1e3,BE=1e3,WE=2,xE=.2;function VE(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return setTimeout.apply(void 0,LE([e,r],DE(t),!1))}function qE(e){return clearTimeout(e)}var HE=function(){function e(r,t,n,i,o){o===void 0&&(o={setTimeout:VE,clearTimeout:qE}),this._maxRetryTimeMs=pu(r,FE),this._initialRetryDelayMs=pu(t,BE),this._multiplier=pu(n,WE),this._jitterFactor=pu(i,xE),this._setTimeout=o.setTimeout,this._clearTimeout=o.clearTimeout,this._inFlightTimeoutIds=[],this.pipelineBegin=!1,this.telemetryApi=UE.TELEMETRY_APIS.MANAGED_TRANSACTION,this._verifyAfterConstruction()}return e.prototype.execute=function(r,t,n){var i=this,o={apiTransactionConfig:{api:this.telemetryApi,onTelemetrySuccess:function(){o.apiTransactionConfig=void 0}}};return new Promise(function(a,s){i._executeTransactionInsidePromise(r,t,a,s,n,o).catch(s)}).catch(function(a){var s=Date.now(),c=i._initialRetryDelayMs;return i._retryTransactionPromise(r,t,a,s,c,n,o)})},e.prototype.close=function(){var r=this;this._inFlightTimeoutIds.forEach(function(t){return r._clearTimeout(t)}),this._inFlightTimeoutIds=[]},e.prototype._retryTransactionPromise=function(r,t,n,i,o,a,s){var c=this,u=Date.now()-i;return u>this._maxRetryTimeMs||!(0,wi.isRetriableError)(n)?Promise.reject(n):new Promise(function(l,h){var v=c._computeDelayWithJitter(o),b=c._setTimeout(function(){c._inFlightTimeoutIds=c._inFlightTimeoutIds.filter(function(m){return m!==b}),c._executeTransactionInsidePromise(r,t,l,h,a,s).catch(h)},v);c._inFlightTimeoutIds.push(b)}).catch(function(l){var h=o*c._multiplier;return c._retryTransactionPromise(r,t,l,i,h,a,s)})},e.prototype._executeTransactionInsidePromise=function(r,t,n,i,o,a){return $E(this,void 0,void 0,function(){var s,c,u,l,h,v,b,m=this;return kE(this,function(E){switch(E.label){case 0:return E.trys.push([0,4,,5]),c=r((a==null?void 0:a.apiTransactionConfig)!=null?Bf({},a==null?void 0:a.apiTransactionConfig):void 0),this.pipelineBegin?(u=c,[3,3]):[3,1];case 1:return[4,c];case 2:u=E.sent(),E.label=3;case 3:return s=u,[3,5];case 4:return l=E.sent(),i(l),[2];case 5:return h=o??function(T){return T},v=h(s),b=this._safeExecuteTransactionWork(v,t),b.then(function(T){return m._handleTransactionWorkSuccess(T,s,n,i)}).catch(function(T){return m._handleTransactionWorkFailure(T,s,i)}),[2]}})})},e.prototype._safeExecuteTransactionWork=function(r,t){try{var n=t(r);return Promise.resolve(n)}catch(i){return Promise.reject(i)}},e.prototype._handleTransactionWorkSuccess=function(r,t,n,i){t.isOpen()?t.commit().then(function(){n(r)}).catch(function(o){i(o)}):n(r)},e.prototype._handleTransactionWorkFailure=function(r,t,n){t.isOpen()?t.rollback().catch(function(i){}).then(function(){return n(r)}).catch(n):n(r)},e.prototype._computeDelayWithJitter=function(r){var t=r*this._jitterFactor,n=r-t,i=r+t;return Math.random()*(i-n)+n},e.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,wi.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs.toString());if(this._initialRetryDelayMs<0)throw(0,wi.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs.toString());if(this._multiplier<1)throw(0,wi.newError)("Multiplier should be >= 1.0: "+this._multiplier.toString());if(this._jitterFactor<0||this._jitterFactor>1)throw(0,wi.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor.toFixed())},e}();to.TransactionExecutor=HE;function pu(e,r){return e??r}var Qe={},Wu=f&&f.__assign||function(){return Wu=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Wu.apply(this,arguments)},_b=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.Url=Qe.formatIPv6Address=Qe.formatIPv4Address=Qe.defaultPortForScheme=Qe.parseDatabaseUrl=void 0;var zE=Q,GE=7687,YE=7474,KE=7473,vb=function(){function e(r,t,n,i,o){this.scheme=r,this.host=t,this.port=n,this.hostAndPort=i,this.query=o}return e}();Qe.Url=vb;function ZE(e){var r;(0,zE.assertString)(e,"URL");var t=XE(e),n=u1(t.url),i=t.schemeMissing?null:JE(n.scheme),o=e1(n.host),a=i1(o),s=t1(n.port,i),c="".concat(a,":").concat(s),u=r1((r=n.query)!==null&&r!==void 0?r:QE(n.resourceName),e);return new vb(i,o,s,c,u)}Qe.parseDatabaseUrl=ZE;function QE(e){if(typeof e!="string")return null;var r=_b(e.split("?"),2),t=r[1];return t}function XE(e){return e=e.trim(),e.includes("://")?{schemeMissing:!1,url:e}:{schemeMissing:!0,url:"none://".concat(e)}}function JE(e){return e!=null?(e=e.trim(),e.charAt(e.length-1)===":"&&(e=e.substring(0,e.length-1)),e):null}function e1(e,r){if(e==null)throw new Error("Unable to extract host from null or undefined URL");return e.trim()}function t1(e,r){var t=typeof e=="string"?parseInt(e,10):e;return t!=null&&!isNaN(t)?t:bb(r)}function r1(e,r){var t=e!=null?n1(e):null,n={};return t!=null&&t.split("&").forEach(function(i){var o=i.split("=");if(o.length!==2)throw new Error("Invalid parameters: '".concat(o.toString(),"' in URL '").concat(r,"'."));var a=Wh(o[0],"key",r),s=Wh(o[1],"value",r);if(n[a]!==void 0)throw new Error("Duplicated query parameters with key '".concat(a,"' in URL '").concat(r,"'"));n[a]=s}),n}function n1(e){return e=(e??"").trim(),(e==null?void 0:e.charAt(0))==="?"&&(e=e.substring(1,e.length)),e}function Wh(e,r,t){if(e=(e??"").trim(),e==="")throw new Error("Illegal empty ".concat(r," in URL query '").concat(t,"'"));return e}function pb(e){var r=e.charAt(0)==="[",t=e.charAt(e.length-1)==="]";if(!r&&!t)return"[".concat(e,"]");if(r&&t)return e;throw new Error("Illegal IPv6 address ".concat(e))}function i1(e){if(e===""||e==null)throw new Error("Illegal host ".concat(e));var r=e.includes(":");return r?pb(e):e}function o1(e,r){return"".concat(e,":").concat(r)}Qe.formatIPv4Address=o1;function a1(e,r){var t=pb(e);return"".concat(t,":").concat(r)}Qe.formatIPv6Address=a1;function bb(e){return e==="http"?YE:e==="https"?KE:GE}Qe.defaultPortForScheme=bb;function u1(e){function r(s,c){var u=s.indexOf(c);return u>=0?[s.substring(0,u),s[u],s.substring(u+1)]:[s,"",""]}function t(s,c){var u=s.lastIndexOf(c);return u>=0?[s.substring(0,u),s[u],s.substring(u+1)]:["","",s]}function n(s,c,u){var l=r(s,c),h=r(l[2],u);return[h[0],h[2]]}function i(s){var c={},u;u=t(s,"@"),u[1]==="@"&&(c.userInfo=decodeURIComponent(u[0]),s=u[2]);var l=_b(n(s,"[","]"),2),h=l[0],v=l[1];return h!==""?(c.host=h,u=r(v,":")):(u=r(s,":"),c.host=u[0]),u[1]===":"&&(c.port=u[2]),c}var o={},a;return a=r(e,":"),a[1]===":"&&(o.scheme=decodeURIComponent(a[0]),e=a[2]),a=r(e,"#"),a[1]==="#"&&(o.fragment=decodeURIComponent(a[2]),e=a[0]),a=r(e,"?"),a[1]==="?"&&(o.query=a[2],e=a[0]),e.startsWith("//")?(a=r(e.substr(2),"/"),o=Wu(Wu({},o),i(a[0])),o.path=a[1]+a[2]):o.path=e,o}var ro={},s1=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),c1=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),l1=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&s1(r,e,t);return c1(r,e),r};Object.defineProperty(ro,"__esModule",{value:!0});ro.ServerAddress=void 0;var Kl=Q,f1=l1(Qe),d1=function(){function e(r,t,n,i){this._host=(0,Kl.assertString)(r,"host"),this._resolved=t!=null?(0,Kl.assertString)(t,"resolved"):null,this._port=(0,Kl.assertNumber)(n,"port"),this._hostPort=i,this._stringValue=t!=null?"".concat(i,"(").concat(t,")"):"".concat(i)}return e.prototype.host=function(){return this._host},e.prototype.resolvedHost=function(){return this._resolved!=null?this._resolved:this._host},e.prototype.port=function(){return this._port},e.prototype.resolveWith=function(r){return new e(this._host,r,this._port,this._hostPort)},e.prototype.asHostPort=function(){return this._hostPort},e.prototype.asKey=function(){return this._hostPort},e.prototype.toString=function(){return this._stringValue},e.fromUrl=function(r){var t=f1.parseDatabaseUrl(r);return new e(t.host,null,t.port,t.hostAndPort)},e}();ro.ServerAddress=d1;var An={},Ad={};Object.defineProperty(Ad,"__esModule",{value:!0});var h1=function(){function e(){}return e.prototype.resolve=function(){throw new Error("Abstract function")},e.prototype._resolveToItself=function(r){return Promise.resolve([r])},e}();Ad.default=h1;var is={};Object.defineProperty(is,"__esModule",{value:!0});var _1=ro;function v1(e){return Promise.resolve([e])}var p1=function(){function e(r){this._resolverFunction=r??v1}return e.prototype.resolve=function(r){var t=this;return new Promise(function(n){return n(t._resolverFunction(r.asHostPort()))}).then(function(n){if(!Array.isArray(n))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(n));return n.map(function(i){return _1.ServerAddress.fromUrl(i)})})},e}();is.default=p1;var yb=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(An,"__esModule",{value:!0});An.ConfiguredCustomResolver=An.BaseHostNameResolver=void 0;var b1=yb(Ad);An.BaseHostNameResolver=b1.default;var y1=yb(is);An.ConfiguredCustomResolver=y1.default;var mb={},os={};Object.defineProperty(os,"__esModule",{value:!0});os.fromVersion=void 0;function m1(e,r){r===void 0&&(r=function(){return{get userAgent(){var o;return o==null?void 0:o.userAgent}}});var t=r(),n=t.userAgent!=null?t.userAgent.split("(")[1].split(")")[0]:void 0,i=t.userAgent||void 0;return{product:"neo4j-javascript/".concat(e),platform:n,languageDetails:i}}os.fromVersion=m1;(function(e){var r=f&&f.__createBinding||(Object.create?function(n,i,o,a){a===void 0&&(a=o);var s=Object.getOwnPropertyDescriptor(i,o);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(n,a,s)}:function(n,i,o,a){a===void 0&&(a=o),n[a]=i[o]}),t=f&&f.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&r(i,n,o)};Object.defineProperty(e,"__esModule",{value:!0}),t(os,e)})(mb);var gb={},Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.DEFAULT_ACQUISITION_TIMEOUT=Qt.DEFAULT_MAX_SIZE=void 0;var $u=100;Qt.DEFAULT_MAX_SIZE=$u;var ku=60*1e3;Qt.DEFAULT_ACQUISITION_TIMEOUT=ku;var g1=function(){function e(r,t){this.maxSize=xh(r,$u),this.acquisitionTimeout=xh(t,ku)}return e.defaultConfig=function(){return new e($u,ku)},e.fromDriverConfig=function(r){var t=Wf(r.maxConnectionPoolSize)?r.maxConnectionPoolSize:$u,n=Wf(r.connectionAcquisitionTimeout)?r.connectionAcquisitionTimeout:ku;return new e(t,n)},e}();Qt.default=g1;function xh(e,r){return Wf(e)?e:r}function Wf(e){return e===0||e!=null}var jd={},et=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},tt=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},O1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jd,"__esModule",{value:!0});var E1=O1(Qt),Vh=oe,w1=Qr,T1=function(){function e(r){var t=r.create,n=t===void 0?function(I,A,j){return et(R,void 0,void 0,function(){return tt(this,function(k){switch(k.label){case 0:return[4,Promise.reject(new Error("Not implemented"))];case 1:return[2,k.sent()]}})})}:t,i=r.destroy,o=i===void 0?function(I){return et(R,void 0,void 0,function(){return tt(this,function(A){switch(A.label){case 0:return[4,Promise.resolve()];case 1:return[2,A.sent()]}})})}:i,a=r.validateOnAcquire,s=a===void 0?function(I,A){return!0}:a,c=r.validateOnRelease,u=c===void 0?function(I){return!0}:c,l=r.installIdleObserver,h=l===void 0?function(I,A){}:l,v=r.removeIdleObserver,b=v===void 0?function(I){}:v,m=r.config,E=m===void 0?E1.default.defaultConfig():m,T=r.log,S=T===void 0?w1.Logger.noOp():T,R=this;this._create=n,this._destroy=o,this._validateOnAcquire=s,this._validateOnRelease=u,this._installIdleObserver=h,this._removeIdleObserver=b,this._maxSize=E.maxSize,this._acquisitionTimeout=E.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=S,this._closed=!1}return e.prototype.acquire=function(r,t,n){return et(this,void 0,void 0,function(){var i,o,a,s=this;return tt(this,function(c){switch(c.label){case 0:return i=t.asKey(),o=this._acquireRequests,a=o[i],a==null&&(o[i]=[]),[4,new Promise(function(u,l){var h=setTimeout(function(){var b=o[i];if(b!=null&&(o[i]=b.filter(function(T){return T!==v})),!v.isCompleted()){var m=s.activeResourceCount(t),E=s.has(t)?s._pools[i].length:0;v.reject((0,Vh.newError)("Connection acquisition timed out in ".concat(s._acquisitionTimeout," ms. Pool status: Active conn count = ").concat(m,", Idle conn count = ").concat(E,".")))}},s._acquisitionTimeout);typeof h=="object"&&h.unref();var v=new S1(i,r,n,u,l,h,s._log);o[i].push(v),s._processPendingAcquireRequests(t)})];case 1:return[2,c.sent()]}})})},e.prototype.purge=function(r){return et(this,void 0,void 0,function(){return tt(this,function(t){switch(t.label){case 0:return[4,this._purgeKey(r.asKey())];case 1:return[2,t.sent()]}})})},e.prototype.apply=function(r,t){var n=r.asKey();n in this._pools&&this._pools[n].apply(t)},e.prototype.close=function(){return et(this,void 0,void 0,function(){var r=this;return tt(this,function(t){switch(t.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(n){return et(r,void 0,void 0,function(){return tt(this,function(i){switch(i.label){case 0:return[4,this._purgeKey(n)];case 1:return[2,i.sent()]}})})})).then()];case 1:return[2,t.sent()]}})})},e.prototype.keepAll=function(r){return et(this,void 0,void 0,function(){var t,n,i,o=this;return tt(this,function(a){switch(a.label){case 0:return t=r.map(function(s){return s.asKey()}),n=Object.keys(this._pools),i=n.filter(function(s){return!t.includes(s)}),[4,Promise.all(i.map(function(s){return et(o,void 0,void 0,function(){return tt(this,function(c){switch(c.label){case 0:return[4,this._purgeKey(s)];case 1:return[2,c.sent()]}})})})).then()];case 1:return[2,a.sent()]}})})},e.prototype.has=function(r){return r.asKey()in this._pools},e.prototype.activeResourceCount=function(r){var t;return(t=this._activeResourceCounts[r.asKey()])!==null&&t!==void 0?t:0},e.prototype._getOrInitializePoolFor=function(r){var t=this._pools[r];return t==null&&(t=new P1,this._pools[r]=t,this._pendingCreates[r]=0),t},e.prototype._acquire=function(r,t,n){return et(this,void 0,void 0,function(){var i,o,a,s,c,l,u,l,h,v=this;return tt(this,function(b){switch(b.label){case 0:if(this._closed)throw(0,Vh.newError)("Pool is closed, it is no more able to serve requests.");if(i=t.asKey(),o=this._getOrInitializePoolFor(i),n)return[3,10];b.label=1;case 1:if(!(o.length>0))return[3,10];if(a=o.pop(),a==null)return[3,1];qh(i,this._activeResourceCounts),this._removeIdleObserver!=null&&this._removeIdleObserver(a),s=!1,b.label=2;case 2:return b.trys.push([2,4,,6]),[4,this._validateOnAcquire(r,a)];case 3:return s=b.sent(),[3,6];case 4:return c=b.sent(),Zl(i,this._activeResourceCounts),o.removeInUse(a),[4,this._destroy(a)];case 5:throw b.sent(),c;case 6:return s?(this._log.isDebugEnabled()&&this._log.debug("".concat(a," acquired from the pool ").concat(i)),[2,{resource:a,pool:o}]):[3,7];case 7:return Zl(i,this._activeResourceCounts),o.removeInUse(a),[4,this._destroy(a)];case 8:b.sent(),b.label=9;case 9:return[3,1];case 10:if(this._maxSize>0&&(l=this.activeResourceCount(t)+this._pendingCreates[i],l>=this._maxSize))return[2,{resource:null,pool:o}];this._pendingCreates[i]=this._pendingCreates[i]+1,b.label=11;case 11:return b.trys.push([11,,15,16]),l=this.activeResourceCount(t)+o.length,l>=this._maxSize&&n?(h=o.pop(),h==null?[3,13]:(this._removeIdleObserver!=null&&this._removeIdleObserver(h),o.removeInUse(h),[4,this._destroy(h)])):[3,13];case 12:b.sent(),b.label=13;case 13:return[4,this._create(r,t,function(m,E){return et(v,void 0,void 0,function(){return tt(this,function(T){switch(T.label){case 0:return[4,this._release(m,E,o)];case 1:return[2,T.sent()]}})})})];case 14:return u=b.sent(),o.pushInUse(u),qh(i,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(u," created for the pool ").concat(i)),[3,16];case 15:return this._pendingCreates[i]=this._pendingCreates[i]-1,[7];case 16:return[2,{resource:u,pool:o}]}})})},e.prototype._release=function(r,t,n){return et(this,void 0,void 0,function(){var i,o=this;return tt(this,function(a){switch(a.label){case 0:i=r.asKey(),a.label=1;case 1:return a.trys.push([1,,9,10]),n.isActive()?[4,this._validateOnRelease(t)]:[3,6];case 2:return a.sent()?[3,4]:(this._log.isDebugEnabled()&&this._log.debug("".concat(t," destroyed and can't be released to the pool ").concat(i," because it is not functional")),n.removeInUse(t),[4,this._destroy(t)]);case 3:return a.sent(),[3,5];case 4:this._installIdleObserver!=null&&this._installIdleObserver(t,{onError:function(s){o._log.debug("Idle connection ".concat(t," destroyed because of error: ").concat(s));var c=o._pools[i];c!=null&&(o._pools[i]=c.filter(function(u){return u!==t}),c.removeInUse(t)),o._destroy(t).catch(function(){})}}),n.push(t),this._log.isDebugEnabled()&&this._log.debug("".concat(t," released to the pool ").concat(i)),a.label=5;case 5:return[3,8];case 6:return this._log.isDebugEnabled()&&this._log.debug("".concat(t," destroyed and can't be released to the pool ").concat(i," because pool has been purged")),n.removeInUse(t),[4,this._destroy(t)];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:return Zl(i,this._activeResourceCounts),this._processPendingAcquireRequests(r),[7];case 10:return[2]}})})},e.prototype._purgeKey=function(r){return et(this,void 0,void 0,function(){var t,n,i;return tt(this,function(o){switch(o.label){case 0:if(t=this._pools[r],n=[],t==null)return[3,2];for(;t.length>0;)i=t.pop(),i!=null&&(this._removeIdleObserver!=null&&this._removeIdleObserver(i),n.push(this._destroy(i)));return t.close(),delete this._pools[r],[4,Promise.all(n)];case 1:o.sent(),o.label=2;case 2:return[2]}})})},e.prototype._processPendingAcquireRequests=function(r){var t=this,n=r.asKey(),i=this._acquireRequests[n];if(i!=null){var o=i.shift();o!=null?this._acquire(o.context,r,o.requireNew).catch(function(a){return o.reject(a),{resource:null,pool:null}}).then(function(a){var s=a.resource,c=a.pool;s!=null&&c!=null?o.isCompleted()?t._release(r,s,c).catch(function(u){t._log.isDebugEnabled()&&t._log.debug("".concat(s," could not be release back to the pool. Cause: ").concat(u))}):o.resolve(s):o.isCompleted()||(t._acquireRequests[n]==null&&(t._acquireRequests[n]=[]),t._acquireRequests[n].unshift(o))}).catch(function(a){return o.reject(a)}):delete this._acquireRequests[n]}},e}();function qh(e,r){var t,n=(t=r[e])!==null&&t!==void 0?t:0;r[e]=n+1}function Zl(e,r){var t,n=(t=r[e])!==null&&t!==void 0?t:0,i=n-1;i>0?r[e]=i:delete r[e]}var S1=function(){function e(r,t,n,i,o,a,s){this._key=r,this._context=t,this._resolve=i,this._reject=o,this._timeoutId=a,this._log=s,this._completed=!1,this._config=n??{}}return Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requireNew",{get:function(){var r;return(r=this._config.requireNew)!==null&&r!==void 0?r:!1},enumerable:!1,configurable:!0}),e.prototype.isCompleted=function(){return this._completed},e.prototype.resolve=function(r){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(r," acquired from the pool ").concat(this._key)),this._resolve(r))},e.prototype.reject=function(r){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(r))},e}(),P1=function(){function e(){this._active=!0,this._elements=[],this._elementsInUse=new Set}return e.prototype.isActive=function(){return this._active},e.prototype.close=function(){this._active=!1,this._elements=[],this._elementsInUse=new Set},e.prototype.filter=function(r){return this._elements=this._elements.filter(r),this},e.prototype.apply=function(r){this._elements.forEach(r),this._elementsInUse.forEach(r)},Object.defineProperty(e.prototype,"length",{get:function(){return this._elements.length},enumerable:!1,configurable:!0}),e.prototype.pop=function(){var r=this._elements.pop();return r!=null&&this._elementsInUse.add(r),r},e.prototype.push=function(r){return this._elementsInUse.delete(r),this._elements.push(r)},e.prototype.pushInUse=function(r){this._elementsInUse.add(r)},e.prototype.removeInUse=function(r){this._elementsInUse.delete(r)},e}();jd.default=T1;(function(e){var r=f&&f.__createBinding||(Object.create?function(s,c,u,l){l===void 0&&(l=u);var h=Object.getOwnPropertyDescriptor(c,u);(!h||("get"in h?!c.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(s,l,h)}:function(s,c,u,l){l===void 0&&(l=u),s[l]=c[u]}),t=f&&f.__setModuleDefault||(Object.create?function(s,c){Object.defineProperty(s,"default",{enumerable:!0,value:c})}:function(s,c){s.default=c}),n=f&&f.__importStar||function(s){if(s&&s.__esModule)return s;var c={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&r(c,s,u);return t(c,s),c},i=f&&f.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_MAX_SIZE=e.DEFAULT_ACQUISITION_TIMEOUT=e.PoolConfig=e.Pool=void 0;var o=n(Qt);e.PoolConfig=o.default,Object.defineProperty(e,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return o.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(e,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return o.DEFAULT_MAX_SIZE}});var a=i(jd);e.Pool=a.default,e.default=a.default})(gb);var C1=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),R1=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Ge=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&C1(r,e,t);return R1(r,e),r};Object.defineProperty(te,"__esModule",{value:!0});te.pool=te.boltAgent=te.objectUtil=te.resolver=te.serverAddress=te.urlUtil=te.logger=te.transactionExecutor=te.txConfig=te.connectionHolder=te.constants=te.bookmarks=te.observer=te.temporalUtil=te.util=void 0;var I1=Ge(Q);te.util=I1;var A1=Ge(Pd);te.temporalUtil=A1;var j1=Ge(Zt);te.observer=j1;var M1=Ge(ar);te.bookmarks=M1;var N1=Ge(B);te.constants=N1;var $1=Ge(lt);te.connectionHolder=$1;var k1=Ge(Fn);te.txConfig=k1;var D1=Ge(to);te.transactionExecutor=D1;var L1=Ge(Qr);te.logger=L1;var U1=Ge(Qe);te.urlUtil=U1;var F1=Ge(ro);te.serverAddress=F1;var B1=Ge(An);te.resolver=B1;var W1=Ge(Mt);te.objectUtil=W1;var x1=Ge(mb);te.boltAgent=x1;var V1=Ge(gb);te.pool=V1;var Te={},Gi=f&&f.__assign||function(){return Gi=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Gi.apply(this,arguments)},q1=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),H1=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),z1=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&q1(r,e,t);return H1(r,e),r},G1=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Y1=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(Te,"__esModule",{value:!0});Te.buildNotificationsFromMetadata=Te.buildGqlStatusObjectFromMetadata=Te.polyfillNotification=Te.polyfillGqlStatusObject=Te.GqlStatusObject=Te.Notification=Te.notificationClassification=Te.notificationCategory=Te.notificationSeverityLevel=void 0;var K1=z1(dt),Ql=te,$i=wd,xf={WARNING:{gql_status:"01N42",status_description:"warn: unknown warning"},NO_DATA:{gql_status:"02N42",status_description:"note: no data - unknown subcondition"},INFORMATION:{gql_status:"03N42",status_description:"info: unknown notification"}},no={WARNING:"WARNING",INFORMATION:"INFORMATION",UNKNOWN:"UNKNOWN"};Te.notificationSeverityLevel=no;Object.freeze(no);var Z1=Object.values(no),as={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",DEPRECATION:"DEPRECATION",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",GENERIC:"GENERIC",SCHEMA:"SCHEMA",UNKNOWN:"UNKNOWN"};Te.notificationCategory=as;Object.freeze(as);var Q1=Object.values(as),Ob=as;Te.notificationClassification=Ob;var us=function(){function e(r){this.code=r.code,this.title=r.title,this.description=r.description,this.severity=r.severity,this.position=Tb(r.position),this.severityLevel=Sb(r.severity),this.rawSeverityLevel=r.severity,this.category=Pb(r.category),this.rawCategory=r.category}return e}();Te.Notification=us;var Lr=function(){function e(r){var t;this.gqlStatus=r.gql_status,this.statusDescription=r.status_description,this.diagnosticRecord=(t=r.diagnostic_record)!==null&&t!==void 0?t:{},this.position=this.diagnosticRecord._position!=null?Tb(this.diagnosticRecord._position):void 0,this.severity=Sb(this.diagnosticRecord._severity),this.rawSeverity=this.diagnosticRecord._severity,this.classification=Pb(this.diagnosticRecord._classification),this.rawClassification=this.diagnosticRecord._classification,this.isNotification=r.neo4j_code!=null,Object.freeze(this)}return Object.defineProperty(e.prototype,"diagnosticRecordAsJsonString",{get:function(){return K1.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),e}();Te.GqlStatusObject=Lr;function Eb(e){var r,t,n;if(e.neo4j_code!=null)return new us({code:e.neo4j_code,title:e.title,description:e.description,severity:(r=e.diagnostic_record)===null||r===void 0?void 0:r._severity,category:(t=e.diagnostic_record)===null||t===void 0?void 0:t._classification,position:(n=e.diagnostic_record)===null||n===void 0?void 0:n._position})}Te.polyfillNotification=Eb;function wb(e){var r,t=e.severity===no.WARNING?xf.WARNING:xf.INFORMATION,n={gql_status:t.gql_status,status_description:(r=e.description)!==null&&r!==void 0?r:t.status_description,neo4j_code:e.code,title:e.title,diagnostic_record:Gi({},$i.rawPolyfilledDiagnosticRecord)};return e.severity!=null&&(n.diagnostic_record._severity=e.severity),e.category!=null&&(n.diagnostic_record._classification=e.category),e.position!=null&&(n.diagnostic_record._position=e.position),new Lr(n)}Te.polyfillGqlStatusObject=wb;var ki={SUCCESS:new Lr({gql_status:"00000",status_description:"note: successful completion",diagnostic_record:$i.rawPolyfilledDiagnosticRecord}),NO_DATA:new Lr({gql_status:"02000",status_description:"note: no data",diagnostic_record:$i.rawPolyfilledDiagnosticRecord}),NO_DATA_UNKNOWN_SUBCONDITION:new Lr(Gi(Gi({},xf.NO_DATA),{diagnostic_record:$i.rawPolyfilledDiagnosticRecord})),OMITTED_RESULT:new Lr({gql_status:"00001",status_description:"note: successful completion - omitted result",diagnostic_record:$i.rawPolyfilledDiagnosticRecord})};Object.freeze(ki);function X1(e){var r,t;function n(a){return(a==null?void 0:a.have_records_streamed)===!0?ki.SUCCESS:(a==null?void 0:a.has_keys)===!1?ki.OMITTED_RESULT:(a==null?void 0:a.pulled)===!0?ki.NO_DATA:ki.NO_DATA_UNKNOWN_SUBCONDITION}if(e.statuses!=null)return e.statuses.map(function(a){return new Lr(a)});var i=n(e.stream_summary),o=Y1([i],G1((t=(r=e.notifications)===null||r===void 0?void 0:r.map(wb))!==null&&t!==void 0?t:[]),!1);return o.sort(function(a,s){return Hh(a)-Hh(s)})}Te.buildGqlStatusObjectFromMetadata=X1;var J1=Object.freeze({"02":0,"01":1,"00":2});function Hh(e){var r,t,n=(r=e.gqlStatus)===null||r===void 0?void 0:r.slice(0,2);return(t=J1[n])!==null&&t!==void 0?t:9999}function ew(e){return e.notifications!=null?e.notifications.map(function(r){return new us(r)}):e.statuses!=null?e.statuses.map(Eb).filter(function(r){return r!=null}):[]}Te.buildNotificationsFromMetadata=ew;function Tb(e){return e==null?{}:{offset:Ql.util.toNumber(e.offset),line:Ql.util.toNumber(e.line),column:Ql.util.toNumber(e.column)}}function Sb(e){return Z1.includes(e)?e:no.UNKNOWN}function Pb(e){return Q1.includes(e)?e:Ob.UNKNOWN}Te.default=us;Object.defineProperty(xe,"__esModule",{value:!0});xe.Stats=xe.QueryStatistics=xe.ProfiledPlan=xe.Plan=xe.ServerInfo=xe.queryType=void 0;var Vf=te,zh=Te,tw=function(){function e(r,t,n,i){var o,a,s;this.query={text:r,parameters:t},this.queryType=n.type,this.counters=new Cb((o=n.stats)!==null&&o!==void 0?o:{}),this.updateStatistics=this.counters,this.plan=n.plan!=null||n.profile!=null?new qf((a=n.plan)!==null&&a!==void 0?a:n.profile):!1,this.profile=n.profile!=null?new Hf(n.profile):!1,this.notifications=(0,zh.buildNotificationsFromMetadata)(n),this.gqlStatusObjects=(0,zh.buildGqlStatusObjectFromMetadata)(n),this.server=new Rb(n.server,i),this.resultConsumedAfter=n.result_consumed_after,this.resultAvailableAfter=n.result_available_after,this.database={name:(s=n.db)!==null&&s!==void 0?s:null}}return e.prototype.hasPlan=function(){return this.plan instanceof qf},e.prototype.hasProfile=function(){return this.profile instanceof Hf},e}(),qf=function(){function e(r){this.operatorType=r.operatorType,this.identifiers=r.identifiers,this.arguments=r.args,this.children=r.children!=null?r.children.map(function(t){return new e(t)}):[]}return e}();xe.Plan=qf;var Hf=function(){function e(r){this.operatorType=r.operatorType,this.identifiers=r.identifiers,this.arguments=r.args,this.dbHits=_n("dbHits",r),this.rows=_n("rows",r),this.pageCacheMisses=_n("pageCacheMisses",r),this.pageCacheHits=_n("pageCacheHits",r),this.pageCacheHitRatio=_n("pageCacheHitRatio",r),this.time=_n("time",r),this.children=r.children!=null?r.children.map(function(t){return new e(t)}):[]}return e.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},e}();xe.ProfiledPlan=Hf;var rw=function(){function e(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0}return e}();xe.Stats=rw;var Cb=function(){function e(r){var t=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(r).forEach(function(n){var i=n.replace(/(-\w)/g,function(o){return o[1].toUpperCase()});i in t._stats?t._stats[i]=Vf.util.toNumber(r[n]):i==="systemUpdates"?t._systemUpdates=Vf.util.toNumber(r[n]):i==="containsSystemUpdates"?t._containsSystemUpdates=r[n]:i==="containsUpdates"&&(t._containsUpdates=r[n])}),this._stats=Object.freeze(this._stats)}return e.prototype.containsUpdates=function(){var r=this;return this._containsUpdates!==void 0?this._containsUpdates:Object.keys(this._stats).reduce(function(t,n){return t+r._stats[n]},0)>0},e.prototype.updates=function(){return this._stats},e.prototype.containsSystemUpdates=function(){return this._containsSystemUpdates!==void 0?this._containsSystemUpdates:this._systemUpdates>0},e.prototype.systemUpdates=function(){return this._systemUpdates},e}();xe.QueryStatistics=Cb;var Rb=function(){function e(r,t){r!=null&&(this.address=r.address,this.agent=r.version),this.protocolVersion=t}return e}();xe.ServerInfo=Rb;function _n(e,r,t){if(t===void 0&&(t=0),r!==!1&&e in r){var n=r[e];return Vf.util.toNumber(n)}else return t}var nw={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"};xe.queryType=nw;xe.default=tw;var Nt={};Object.defineProperty(Nt,"__esModule",{value:!0});Nt.notificationFilterDisabledClassification=Nt.notificationFilterDisabledCategory=Nt.notificationFilterMinimumSeverityLevel=void 0;var Ib={OFF:"OFF",WARNING:"WARNING",INFORMATION:"INFORMATION"};Nt.notificationFilterMinimumSeverityLevel=Ib;Object.freeze(Ib);var Md={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",DEPRECATION:"DEPRECATION",GENERIC:"GENERIC",SCHEMA:"SCHEMA"};Nt.notificationFilterDisabledCategory=Md;Object.freeze(Md);var iw=Md;Nt.notificationFilterDisabledClassification=iw;var ow=function(){function e(){throw this.minimumSeverityLevel=void 0,this.disabledCategories=void 0,this.disabledClassifications=void 0,new Error("Not implemented")}return e}();Nt.default=ow;var io={},wr=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Tr=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},aw=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Ab;Object.defineProperty(io,"__esModule",{value:!0});var uw=aw(xe),jb=te,Ti=oe,sw=jb.connectionHolder.EMPTY_CONNECTION_HOLDER,cw=function(e){console.log("Uncaught error when processing result: "+e)},lw=function(e){},fw=function(e){},dw=function(){function e(r,t,n,i,o){o===void 0&&(o={high:Number.MAX_VALUE,low:Number.MAX_VALUE}),this[Ab]="Result",this._stack=hw(),this._streamObserverPromise=r,this._p=null,this._query=t,this._parameters=n??{},this._connectionHolder=i??sw,this._keys=null,this._summary=null,this._error=null,this._watermarks=o}return e.prototype.keys=function(){var r=this;return this._keys!==null?Promise.resolve(this._keys):this._error!==null?Promise.reject(this._error):new Promise(function(t,n){r._streamObserverPromise.then(function(i){return i.subscribe(r._decorateObserver({onKeys:function(o){return t(o)},onError:function(o){return n(o)}}))}).catch(n)})},e.prototype.summary=function(){var r=this;return this._summary!==null?Promise.resolve(this._summary):this._error!==null?Promise.reject(this._error):new Promise(function(t,n){r._streamObserverPromise.then(function(i){i.cancel(),i.subscribe(r._decorateObserver({onCompleted:function(o){return t(o)},onError:function(o){return n(o)}}))}).catch(n)})},e.prototype._getOrCreatePromise=function(){var r=this;return this._p==null&&(this._p=new Promise(function(t,n){var i=[],o={onNext:function(a){i.push(a)},onCompleted:function(a){t({records:i,summary:a})},onError:function(a){n(a)}};r.subscribe(o)})),this._p},e.prototype[Symbol.asyncIterator]=function(){var r=this;if(!this.isOpen()){var t=(0,Ti.newError)("Result is already consumed");return{next:function(){return Promise.reject(t)},peek:function(){return Promise.reject(t)}}}var n={paused:!0,firstRun:!0,finished:!1},i=function(){var s,c;if(n.streaming!=null){var u=(c=(s=n.queuedObserver)===null||s===void 0?void 0:s.size)!==null&&c!==void 0?c:0,l=u>=r._watermarks.high,h=u<=r._watermarks.low;l&&!n.paused?(n.paused=!0,n.streaming.pause()):(h&&n.paused||n.firstRun&&!l)&&(n.firstRun=!1,n.paused=!1,n.streaming.resume())}},o=function(){return wr(r,void 0,void 0,function(){var s;return Tr(this,function(c){switch(c.label){case 0:return n.queuedObserver!==void 0?[3,2]:(n.queuedObserver=this._createQueuedResultObserver(i),s=n,[4,this._subscribe(n.queuedObserver,!0).catch(function(){})]);case 1:s.streaming=c.sent(),i(),c.label=2;case 2:return[2,n.queuedObserver]}})})},a=function(s){if(s===void 0)throw(0,Ti.newError)("InvalidState: Result stream finished without Summary",Ti.PROTOCOL_ERROR);return!0};return{next:function(){return wr(r,void 0,void 0,function(){var s,c;return Tr(this,function(u){switch(u.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:n.summary}]:[4,o()];case 1:return s=u.sent(),[4,s.dequeue()];case 2:return c=u.sent(),c.done===!0&&(n.finished=c.done,n.summary=c.value),[2,c]}})})},return:function(s){return wr(r,void 0,void 0,function(){var c,u,l;return Tr(this,function(h){switch(h.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:s??n.summary}]:((l=n.streaming)===null||l===void 0||l.cancel(),[4,o()]);case 1:return c=h.sent(),[4,c.dequeueUntilDone()];case 2:return u=h.sent(),n.finished=!0,u.value=s??u.value,n.summary=u.value,[2,u]}})})},peek:function(){return wr(r,void 0,void 0,function(){var s;return Tr(this,function(c){switch(c.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:n.summary}]:[4,o()];case 1:return s=c.sent(),[4,s.head()];case 2:return[2,c.sent()]}})})}}},e.prototype.then=function(r,t){return this._getOrCreatePromise().then(r,t)},e.prototype.catch=function(r){return this._getOrCreatePromise().catch(r)},e.prototype.finally=function(r){return this._getOrCreatePromise().finally(r)},e.prototype.subscribe=function(r){this._subscribe(r).catch(function(){})},e.prototype.isOpen=function(){return this._summary===null&&this._error===null},e.prototype._subscribe=function(r,t){t===void 0&&(t=!1);var n=this._decorateObserver(r);return this._streamObserverPromise.then(function(i){return t&&i.pause(),i.subscribe(n),i}).catch(function(i){return n.onError!=null&&n.onError(i),Promise.reject(i)})},e.prototype._decorateObserver=function(r){var t=this,n,i,o,a=(n=r.onCompleted)!==null&&n!==void 0?n:lw,s=(i=r.onError)!==null&&i!==void 0?i:cw,c=(o=r.onKeys)!==null&&o!==void 0?o:fw,u=function(v){t._releaseConnectionAndGetSummary(v).then(function(b){return t._summary!==null?a.call(r,t._summary):(t._summary=b,a.call(r,b))}).catch(s)},l=function(v){t._connectionHolder.releaseConnection().then(function(){_w(v,t._stack),t._error=v,s.call(r,v)}).catch(s)},h=function(v){return t._keys=v,c.call(r,v)};return{onNext:r.onNext!=null?r.onNext.bind(r):void 0,onKeys:h,onCompleted:u,onError:l}},e.prototype._cancel=function(){this._summary===null&&this._error===null&&this._streamObserverPromise.then(function(r){return r.cancel()}).catch(function(){})},e.prototype._releaseConnectionAndGetSummary=function(r){var t=jb.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),n=t.validatedQuery,i=t.params,o=this._connectionHolder;return o.getConnection().then(function(a){return o.releaseConnection().then(function(){return a==null?void 0:a.getProtocolVersion()})},function(a){}).then(function(a){return new uw.default(n,i,r,a)})},e.prototype._createQueuedResultObserver=function(r){var t=this;function n(){var u={};return u.promise=new Promise(function(l,h){u.resolve=l,u.reject=h}),u}function i(u){return u instanceof Error}function o(){var u;return wr(this,void 0,void 0,function(){var l;return Tr(this,function(h){switch(h.label){case 0:if(a.length>0){if(l=(u=a.shift())!==null&&u!==void 0?u:(0,Ti.newError)("Unexpected empty buffer",Ti.PROTOCOL_ERROR),r(),i(l))throw l;return[2,l]}return s.resolvable=n(),[4,s.resolvable.promise];case 1:return[2,h.sent()]}})})}var a=[],s={resolvable:null},c={onNext:function(u){c._push({done:!1,value:u})},onCompleted:function(u){c._push({done:!0,value:u})},onError:function(u){c._push(u)},_push:function(u){if(s.resolvable!==null){var l=s.resolvable;s.resolvable=null,i(u)?l.reject(u):l.resolve(u)}else a.push(u),r()},dequeue:o,dequeueUntilDone:function(){return wr(t,void 0,void 0,function(){var u;return Tr(this,function(l){switch(l.label){case 0:return[4,o()];case 1:return u=l.sent(),u.done===!0?[2,u]:[3,0];case 2:return[2]}})})},head:function(){return wr(t,void 0,void 0,function(){var u,u,l;return Tr(this,function(h){switch(h.label){case 0:if(a.length>0){if(u=a[0],i(u))throw u;return[2,u]}s.resolvable=n(),h.label=1;case 1:return h.trys.push([1,3,4,5]),[4,s.resolvable.promise];case 2:return u=h.sent(),a.unshift(u),[2,u];case 3:throw l=h.sent(),a.unshift(l),l;case 4:return r(),[7];case 5:return[2]}})})},get size(){return a.length}};return c},e}();Ab=Symbol.toStringTag;function hw(){var e=new Error("");return e.stack!=null?e.stack.replace(/^Error(\n\r)*/,""):null}function _w(e,r){r!=null&&(e.stack=e.toString()+`
`+r)}io.default=dw;var ss={};Object.defineProperty(ss,"__esModule",{value:!0});var vw=function(){function e(r,t,n){this.keys=r,this.records=t,this.summary=n}return e}();ss.default=vw;var oo={};Object.defineProperty(oo,"__esModule",{value:!0});oo.Releasable=void 0;var pw=function(){function e(){}return e.prototype.release=function(){throw new Error("Not implemented")},e}();oo.Releasable=pw;var bw=function(){function e(){}return e.prototype.acquireConnection=function(r){throw Error("Not implemented")},e.prototype.supportsMultiDb=function(){throw Error("Not implemented")},e.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},e.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},e.prototype.supportsSessionAuth=function(){throw Error("Not implemented")},e.prototype.SSREnabled=function(){return!1},e.prototype.verifyConnectivityAndGetServerInfo=function(r){throw Error("Not implemented")},e.prototype.verifyAuthentication=function(r){throw Error("Not implemented")},e.prototype.getNegotiatedProtocolVersion=function(){throw Error("Not Implemented")},e.prototype.close=function(){throw Error("Not implemented")},e}();oo.default=bw;var Nd={};Object.defineProperty(Nd,"__esModule",{value:!0});var yw=function(){function e(){}return e.prototype.beginTransaction=function(r){throw new Error("Not implemented")},e.prototype.run=function(r,t,n){throw new Error("Not implemented")},e.prototype.commitTransaction=function(r){throw new Error("Not implemented")},e.prototype.rollbackTransaction=function(r){throw new Error("Not implemented")},e.prototype.resetAndFlush=function(){throw new Error("Not implemented")},e.prototype.isOpen=function(){throw new Error("Not implemented")},e.prototype.getProtocolVersion=function(){throw new Error("Not implemented")},e.prototype.hasOngoingObservableRequests=function(){throw new Error("Not implemented")},e}();Nd.default=yw;var cs={},Gh=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Yh=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},mw=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cs,"__esModule",{value:!0});var gw=Q,xi=lt,Du=ar,Ow=Fn,at=Zt,st=oe,Mb=mw(io),Ew=function(){function e(r){var t=r.connectionHolder,n=r.onClose,i=r.onBookmarks,o=r.onConnection,a=r.reactive,s=r.fetchSize,c=r.impersonatedUser,u=r.highRecordWatermark,l=r.lowRecordWatermark,h=r.notificationFilter,v=r.apiTelemetryConfig,b=this;this._connectionHolder=t,this._reactive=a,this._state=nt.ACTIVE,this._onClose=n,this._onBookmarks=i,this._onConnection=o,this._onError=this._onErrorCallback.bind(this),this._fetchSize=s,this._onComplete=this._onCompleteCallback.bind(this),this._results=[],this._impersonatedUser=c,this._lowRecordWatermak=l,this._highRecordWatermark=u,this._bookmarks=Du.Bookmarks.empty(),this._notificationFilter=h,this._apiTelemetryConfig=v,this._acceptActive=function(){},this._activePromise=new Promise(function(m,E){b._acceptActive=m})}return e.prototype._begin=function(r,t,n){var i=this;this._connectionHolder.getConnection().then(function(o){return Gh(i,void 0,void 0,function(){var a,s=this;return Yh(this,function(c){switch(c.label){case 0:return this._onConnection(),o==null?[3,2]:(a=this,[4,r()]);case 1:return a._bookmarks=c.sent(),[2,o.beginTransaction({bookmarks:this._bookmarks,txConfig:t,mode:this._connectionHolder.mode(),database:this._connectionHolder.database(),impersonatedUser:this._impersonatedUser,notificationFilter:this._notificationFilter,apiTelemetryConfig:this._apiTelemetryConfig,beforeError:function(u){n!=null&&n.onError(u),s._onError(u).catch(function(){})},afterComplete:function(u){n!=null&&n.onComplete(u),u.db!==void 0&&(n==null?void 0:n.onDB)!=null&&n.onDB(u.db),s._onComplete(u)}})];case 2:throw(0,st.newError)("No connection available")}})})}).catch(function(o){n!=null&&n.onError(o),i._onError(o).catch(function(){})}).finally(function(){return i._acceptActive()})},e.prototype.run=function(r,t){var n=(0,gw.validateQueryAndParameters)(r,t),i=n.validatedQuery,o=n.params,a=this._state.run(i,o,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize,highRecordWatermark:this._highRecordWatermark,lowRecordWatermark:this._lowRecordWatermak,preparationJob:this._activePromise});return this._results.push(a),a},e.prototype.commit=function(){var r=this,t=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:function(n){return r._onCompleteCallback(n,r._bookmarks)},onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=t.state,this._onClose(),new Promise(function(n,i){t.result.subscribe({onCompleted:function(){return n()},onError:function(o){return i(o)}})})},e.prototype.rollback=function(){var r=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=r.state,this._onClose(),new Promise(function(t,n){r.result.subscribe({onCompleted:function(){return t()},onError:function(i){return n(i)}})})},e.prototype.isOpen=function(){return this._state===nt.ACTIVE},e.prototype.close=function(){return Gh(this,void 0,void 0,function(){return Yh(this,function(r){switch(r.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._onErrorCallback=function(r){return this._state===nt.FAILED?Promise.resolve(null):(this._state=nt.FAILED,this._onClose(),this._results.forEach(function(t){t.isOpen()&&t._streamObserverPromise.then(function(n){return n.onError(r)}).catch(function(n){})}),this._connectionHolder.releaseConnection())},e.prototype._onCompleteCallback=function(r,t){this._onBookmarks(new Du.Bookmarks(r==null?void 0:r.bookmark),t??Du.Bookmarks.empty(),r==null?void 0:r.db)},e}(),nt={ACTIVE:{commit:function(e){var r=e.connectionHolder,t=e.onError,n=e.onComplete,i=e.onConnection,o=e.pendingResults,a=e.preparationJob;return{result:Kh(!0,r,t,n,i,o,a),state:nt.SUCCEEDED}},rollback:function(e){var r=e.connectionHolder,t=e.onError,n=e.onComplete,i=e.onConnection,o=e.pendingResults,a=e.preparationJob;return{result:Kh(!1,r,t,n,i,o,a),state:nt.ROLLED_BACK}},run:function(e,r,t){var n=t.connectionHolder,i=t.onError,o=t.onComplete,a=t.onConnection,s=t.reactive,c=t.fetchSize,u=t.highRecordWatermark,l=t.lowRecordWatermark,h=t.preparationJob,v=h??Promise.resolve(),b=n.getConnection().then(function(m){return v.then(function(){return m})}).then(function(m){if(a(),m!=null)return m.run(e,r,{bookmarks:Du.Bookmarks.empty(),txConfig:Ow.TxConfig.empty(),beforeError:i,afterComplete:o,reactive:s,fetchSize:c,highRecordWatermark:u,lowRecordWatermark:l});throw(0,st.newError)("No connection available")}).catch(function(m){return new at.FailedObserver({error:m,onError:i})});return yt(b,e,r,n,u,l)}},FAILED:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:yt(new at.FailedObserver({error:(0,st.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:t}),"COMMIT",{},r,0,0),state:nt.FAILED}},rollback:function(e){var r=e.connectionHolder;return e.onError,e.onComplete,{result:yt(new at.CompletedObserver,"ROLLBACK",{},r,0,0),state:nt.FAILED}},run:function(e,r,t){var n=t.connectionHolder,i=t.onError;return t.onComplete,yt(new at.FailedObserver({error:(0,st.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:i}),e,r,n,0,0)}},SUCCEEDED:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:yt(new at.FailedObserver({error:(0,st.newError)("Cannot commit this transaction, because it has already been committed."),onError:t}),"COMMIT",{},xi.EMPTY_CONNECTION_HOLDER,0,0),state:nt.SUCCEEDED,connectionHolder:r}},rollback:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:yt(new at.FailedObserver({error:(0,st.newError)("Cannot rollback this transaction, because it has already been committed."),onError:t}),"ROLLBACK",{},xi.EMPTY_CONNECTION_HOLDER,0,0),state:nt.SUCCEEDED,connectionHolder:r}},run:function(e,r,t){var n=t.connectionHolder,i=t.onError;return t.onComplete,yt(new at.FailedObserver({error:(0,st.newError)("Cannot run query in this transaction, because it has already been committed."),onError:i}),e,r,n,0,0)}},ROLLED_BACK:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:yt(new at.FailedObserver({error:(0,st.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:t}),"COMMIT",{},r,0,0),state:nt.ROLLED_BACK}},rollback:function(e){var r=e.connectionHolder;return e.onError,e.onComplete,{result:yt(new at.FailedObserver({error:(0,st.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},r,0,0),state:nt.ROLLED_BACK}},run:function(e,r,t){var n=t.connectionHolder,i=t.onError;return t.onComplete,yt(new at.FailedObserver({error:(0,st.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:i}),e,r,n,0,0)}}};function Kh(e,r,t,n,i,o,a){var s=a??Promise.resolve(),c=r.getConnection().then(function(u){return s.then(function(){return u})}).then(function(u){return i(),o.forEach(function(l){return l._cancel()}),Promise.all(o.map(function(l){return l.summary()})).then(function(l){if(u!=null)return e?u.commitTransaction({beforeError:t,afterComplete:n}):u.rollbackTransaction({beforeError:t,afterComplete:n});throw(0,st.newError)("No connection available")})}).catch(function(u){return new at.FailedObserver({error:u,onError:t})});return new Mb.default(c,e?"COMMIT":"ROLLBACK",{},r,{high:Number.MAX_VALUE,low:Number.MAX_VALUE})}function yt(e,r,t,n,i,o){return n===void 0&&(n=xi.EMPTY_CONNECTION_HOLDER),new Mb.default(Promise.resolve(e),r,t,new xi.ReadOnlyConnectionHolder(n??xi.EMPTY_CONNECTION_HOLDER),{low:o,high:i})}cs.default=Ew;var ls={};Object.defineProperty(ls,"__esModule",{value:!0});var ww=function(){function e(r){var t=r.run;this._run=t}return e.fromTransaction=function(r){return new e({run:r.run.bind(r)})},e.prototype.run=function(r,t){return this._run(r,t)},e}();ls.default=ww;var fs={},Tw=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),xu=f&&f.__assign||function(){return xu=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},xu.apply(this,arguments)},Sw=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Nb;Object.defineProperty(fs,"__esModule",{value:!0});var Pw=Sw(cs),Cw=function(e){Tw(r,e);function r(t){var n=t.connectionHolder,i=t.onClose,o=t.onBookmarks,a=t.onConnection,s=t.reactive,c=t.fetchSize,u=t.impersonatedUser,l=t.highRecordWatermark,h=t.lowRecordWatermark,v=t.notificationFilter,b=t.apiTelemetryConfig,m=t.onDbCallback,E=e.call(this,{connectionHolder:n,onClose:i,onBookmarks:o,onConnection:a,reactive:s,fetchSize:c,impersonatedUser:u,highRecordWatermark:l,lowRecordWatermark:h,notificationFilter:v,apiTelemetryConfig:b})||this;return E[Nb]="TransactionPromise",E._onDbCallback=m,E}return r.prototype.then=function(t,n){return this._getOrCreateBeginPromise().then(t,n)},r.prototype.catch=function(t){return this._getOrCreateBeginPromise().catch(t)},r.prototype.finally=function(t){return this._getOrCreateBeginPromise().finally(t)},r.prototype._getOrCreateBeginPromise=function(){var t=this;return this._beginPromise==null&&(this._beginPromise=new Promise(function(n,i){t._resolve=n,t._reject=i,t._beginError!=null&&i(t._beginError),t._beginMetadata!=null&&n(t._toTransaction())})),this._beginPromise},r.prototype._toTransaction=function(){return xu(xu({},this),{run:e.prototype.run.bind(this),commit:e.prototype.commit.bind(this),rollback:e.prototype.rollback.bind(this),close:e.prototype.close.bind(this),isOpen:e.prototype.isOpen.bind(this),_begin:this._begin.bind(this)})},r.prototype._begin=function(t,n){return e.prototype._begin.call(this,t,n,{onError:this._onBeginError.bind(this),onComplete:this._onBeginMetadata.bind(this),onDB:this._onDbCallback})},r.prototype._onBeginError=function(t){this._beginError=t,this._reject!=null&&this._reject(t)},r.prototype._onBeginMetadata=function(t){this._beginMetadata=t??{},this._resolve!=null&&this._resolve(this._toTransaction())},r}(Pw.default);Nb=Symbol.toStringTag;fs.default=Cw;var ds={},ao={};Object.defineProperty(ao,"__esModule",{value:!0});ao.cacheKey=void 0;var Rw=dt;function Iw(e,r){var t;return r!=null?"basic:"+r:e===void 0?"DEFAULT":e.scheme==="basic"?"basic:"+((t=e.principal)!==null&&t!==void 0?t:""):e.scheme==="kerberos"?"kerberos:"+e.credentials:e.scheme==="bearer"?"bearer:"+e.credentials:e.scheme==="none"?"none":(0,Rw.stringify)(e,{sortedElements:!0})}ao.cacheKey=Iw;var Si=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Pi=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},bu=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},yu=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))},$d=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ds,"__esModule",{value:!0});var Aw=Zt,jw=Q,Ke=B,Sr=oe,Mw=$d(io),Zh=lt,Nw=to,Ci=ar,qt=Fn,$w=$d(fs),kw=$d(ls),Dw=ao,Lw=function(){function e(r){var t=r.mode,n=r.connectionProvider,i=r.bookmarks,o=r.database,a=r.config,s=r.reactive,c=r.fetchSize,u=r.impersonatedUser,l=r.bookmarkManager,h=r.notificationFilter,v=r.auth,b=r.log,m=r.homeDatabaseCallback,E;this._mode=t,this._database=o,this._reactive=s,this._fetchSize=c,this._homeDatabaseCallback=m,this._auth=v,this._getConnectionAcquistionBookmarks=this._getConnectionAcquistionBookmarks.bind(this),this._readConnectionHolder=new Zh.ConnectionHolder({mode:Ke.ACCESS_MODE_READ,auth:v,database:o,bookmarks:i,connectionProvider:n,impersonatedUser:u,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:b}),this._writeConnectionHolder=new Zh.ConnectionHolder({mode:Ke.ACCESS_MODE_WRITE,auth:v,database:o,bookmarks:i,connectionProvider:n,impersonatedUser:u,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:b}),this._open=!0,this._hasTx=!1,this._impersonatedUser=u,this._lastBookmarks=i??Ci.Bookmarks.empty(),this._configuredBookmarks=this._lastBookmarks,this._transactionExecutor=Uw(a),this._databaseNameResolved=this._database!=="";var T=this._calculateWatermaks();this._lowRecordWatermark=T.low,this._highRecordWatermark=T.high,this._results=[],this._bookmarkManager=l,this._notificationFilter=h,this._log=b,this._databaseGuess=a==null?void 0:a.cachedHomeDatabase,this._isRoutingSession=(E=a==null?void 0:a.routingDriver)!==null&&E!==void 0?E:!1}return e.prototype.run=function(r,t,n){var i=this,o=(0,jw.validateQueryAndParameters)(r,t),a=o.validatedQuery,s=o.params,c=n!=null?new qt.TxConfig(n,this._log):qt.TxConfig.empty(),u=this._run(a,s,function(l){return Si(i,void 0,void 0,function(){var h,v=this;return Pi(this,function(b){switch(b.label){case 0:return[4,this._bookmarks()];case 1:return h=b.sent(),this._assertSessionIsOpen(),[2,l.run(a,s,{bookmarks:h,txConfig:c,mode:this._mode,database:this._database,apiTelemetryConfig:{api:Ke.TELEMETRY_APIS.AUTO_COMMIT_TRANSACTION},impersonatedUser:this._impersonatedUser,afterComplete:function(m){return v._onCompleteCallback(m,h)},reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,onDb:this._onDatabaseNameResolved.bind(this)})]}})})});return this._results.push(u),u},e.prototype._run=function(r,t,n){var i=this._acquireAndConsumeConnection(n),o=i.connectionHolder,a=i.resultPromise,s=a.catch(function(u){return Promise.resolve(new Aw.FailedObserver({error:u}))}),c={high:this._highRecordWatermark,low:this._lowRecordWatermark};return new Mw.default(s,r,t,o,c)},e.prototype._acquireConnection=function(r){var t=this,n=this._acquireAndConsumeConnection(r),i=n.connectionHolder,o=n.resultPromise;return o.then(function(a){return Si(t,void 0,void 0,function(){return Pi(this,function(s){switch(s.label){case 0:return[4,i.releaseConnection()];case 1:return s.sent(),[2,a]}})})})},e.prototype._acquireAndConsumeConnection=function(r){var t,n=this._connectionHolderWithMode(this._mode);return this._open?!this._hasTx&&n.initializeConnection(this._databaseGuess)?t=n.getConnection().then(function(i){return r(i)}):t=Promise.reject((0,Sr.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):t=Promise.reject((0,Sr.newError)("Cannot run query in a closed session.")),{connectionHolder:n,resultPromise:t}},e.prototype.beginTransaction=function(r){var t=r,n=qt.TxConfig.empty();return t!=null&&(n=new qt.TxConfig(t,this._log)),this._beginTransaction(this._mode,n,{api:Ke.TELEMETRY_APIS.UNMANAGED_TRANSACTION})},e.prototype._beginTransaction=function(r,t,n){var i=this;if(!this._open)throw(0,Sr.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,Sr.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var o=e._validateSessionMode(r),a=this._connectionHolderWithMode(o);a.initializeConnection(this._databaseGuess),this._hasTx=!0;var s=new $w.default({connectionHolder:a,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmarks:function(c,u,l){return i._updateBookmarks(c,u,l)},onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,apiTelemetryConfig:n,onDbCallback:this._onDatabaseNameResolved.bind(this)});return s._begin(function(){return i._bookmarks()},t),s},e.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,Sr.newError)("You cannot run more transactions on a closed session.")},e.prototype._transactionClosed=function(){this._hasTx=!1},e.prototype.lastBookmark=function(){return this.lastBookmarks()},e.prototype.lastBookmarks=function(){return this._lastBookmarks.values()},e.prototype._bookmarks=function(){var r;return Si(this,void 0,void 0,function(){var t;return Pi(this,function(n){switch(n.label){case 0:return[4,(r=this._bookmarkManager)===null||r===void 0?void 0:r.getBookmarks()];case 1:return t=n.sent(),t===void 0?[2,this._lastBookmarks]:[2,new Ci.Bookmarks(yu(yu([],bu(t),!1),bu(this._configuredBookmarks),!1))]}})})},e.prototype.readTransaction=function(r,t){var n=new qt.TxConfig(t,this._log);return this._runTransaction(Ke.ACCESS_MODE_READ,n,r)},e.prototype.writeTransaction=function(r,t){var n=new qt.TxConfig(t,this._log);return this._runTransaction(Ke.ACCESS_MODE_WRITE,n,r)},e.prototype._runTransaction=function(r,t,n){var i=this;return this._transactionExecutor.execute(function(o){return i._beginTransaction(r,t,o)},n)},e.prototype.executeRead=function(r,t){var n=new qt.TxConfig(t,this._log);return this._executeInTransaction(Ke.ACCESS_MODE_READ,n,r)},e.prototype.executeWrite=function(r,t){var n=new qt.TxConfig(t,this._log);return this._executeInTransaction(Ke.ACCESS_MODE_WRITE,n,r)},e.prototype._executeInTransaction=function(r,t,n){var i=this;return this._transactionExecutor.execute(function(o){return i._beginTransaction(r,t,o)},n,kw.default.fromTransaction)},e.prototype._onDatabaseNameResolved=function(r){if(this._isRoutingSession&&(this._databaseGuess=r,!this._databaseNameResolved)){var t=r??"";this._database=t,this._readConnectionHolder.setDatabase(t),this._writeConnectionHolder.setDatabase(t),this._databaseNameResolved=!0,this._homeDatabaseCallback!=null&&this._homeDatabaseCallback((0,Dw.cacheKey)(this._auth,this._impersonatedUser),r)}},e.prototype._getConnectionAcquistionBookmarks=function(){var r;return Si(this,void 0,void 0,function(){var t;return Pi(this,function(n){switch(n.label){case 0:return[4,(r=this._bookmarkManager)===null||r===void 0?void 0:r.getBookmarks()];case 1:return t=n.sent(),t===void 0?[2,this._lastBookmarks]:[2,new Ci.Bookmarks(yu(yu([],bu(this._configuredBookmarks),!1),bu(t),!1))]}})})},e.prototype._updateBookmarks=function(r,t,n){var i,o,a;r!=null&&!r.isEmpty()&&((i=this._bookmarkManager)===null||i===void 0||i.updateBookmarks((o=t==null?void 0:t.values())!==null&&o!==void 0?o:[],(a=r==null?void 0:r.values())!==null&&a!==void 0?a:[]).catch(function(){}),this._lastBookmarks=r,this._configuredBookmarks=Ci.Bookmarks.empty())},e.prototype.close=function(){return Si(this,void 0,void 0,function(){return Pi(this,function(r){switch(r.label){case 0:return this._open?(this._open=!1,this._results.forEach(function(t){return t._cancel()}),this._transactionExecutor.close(),[4,this._readConnectionHolder.close(this._hasTx)]):[3,3];case 1:return r.sent(),[4,this._writeConnectionHolder.close(this._hasTx)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._connectionHolderWithMode=function(r){if(r===Ke.ACCESS_MODE_READ)return this._readConnectionHolder;if(r===Ke.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,Sr.newError)("Unknown access mode: "+r)},e.prototype._onCompleteCallback=function(r,t){this._updateBookmarks(new Ci.Bookmarks(r.bookmark),t,r.db)},e.prototype._calculateWatermaks=function(){return this._fetchSize===Ke.FETCH_ALL?{low:Number.MAX_VALUE,high:Number.MAX_VALUE}:{low:.3*this._fetchSize,high:.7*this._fetchSize}},e.prototype._configureTransactionExecutor=function(r,t){this._transactionExecutor.pipelineBegin=r,this._transactionExecutor.telemetryApi=t},e._validateSessionMode=function(r){var t=r??Ke.ACCESS_MODE_WRITE;if(t!==Ke.ACCESS_MODE_READ&&t!==Ke.ACCESS_MODE_WRITE)throw(0,Sr.newError)("Illegal session mode "+t);return t},e}();function Uw(e){var r,t=(r=e==null?void 0:e.maxTransactionRetryTime)!==null&&r!==void 0?r:null;return new Nw.TransactionExecutor(t)}ds.default=Lw;var Ve={},Bn={},Vu=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},qu=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Xl=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},Qh=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Xh=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.bookmarkManager=void 0;var Fw=function(){function e(){throw new Error("Not implemented")}return e.prototype.updateBookmarks=function(r,t){return Vu(this,void 0,void 0,function(){return qu(this,function(n){throw new Error("Not implemented")})})},e.prototype.getBookmarks=function(){return Vu(this,void 0,void 0,function(){return qu(this,function(r){throw new Error("Not implemented")})})},e}();Bn.default=Fw;function Bw(e){e===void 0&&(e={});var r=new Set(e.initialBookmarks);return new Ww(r,e.bookmarksSupplier,e.bookmarksConsumer)}Bn.bookmarkManager=Bw;var Ww=function(){function e(r,t,n){this._bookmarks=r,this._bookmarksSupplier=t,this._bookmarksConsumer=n}return e.prototype.updateBookmarks=function(r,t){return Vu(this,void 0,void 0,function(){var n,i,o,c,a,s,c,u,l,h,v;return qu(this,function(b){switch(b.label){case 0:n=this._bookmarks;try{for(i=Xl(r),o=i.next();!o.done;o=i.next())c=o.value,n.delete(c)}catch(m){u={error:m}}finally{try{o&&!o.done&&(l=i.return)&&l.call(i)}finally{if(u)throw u.error}}try{for(a=Xl(t),s=a.next();!s.done;s=a.next())c=s.value,n.add(c)}catch(m){h={error:m}}finally{try{s&&!s.done&&(v=a.return)&&v.call(a)}finally{if(h)throw h.error}}return typeof this._bookmarksConsumer!="function"?[3,2]:[4,this._bookmarksConsumer(Xh([],Qh(n),!1))];case 1:b.sent(),b.label=2;case 2:return[2]}})})},e.prototype.getBookmarks=function(){var r;return Vu(this,void 0,void 0,function(){var t,n,i,o,a,s,c;return qu(this,function(u){switch(u.label){case 0:return t=new Set(this._bookmarks),typeof this._bookmarksSupplier!="function"?[3,2]:[4,this._bookmarksSupplier()];case 1:n=(r=u.sent())!==null&&r!==void 0?r:[];try{for(i=Xl(n),o=i.next();!o.done;o=i.next())a=o.value,t.add(a)}catch(l){s={error:l}}finally{try{o&&!o.done&&(c=i.return)&&c.call(i)}finally{if(s)throw s.error}}u.label=2;case 2:return[2,Xh([],Qh(t),!1)]}})})},e}(),hs={},_s=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},vs=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},xw=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hs,"__esModule",{value:!0});var Vw=xw(ss),qw=oe,Hw=function(){function e(){}return e.prototype.eagerResultTransformer=function(){return Jh},e.prototype.eager=function(){return Jh},e.prototype.mappedResultTransformer=function(r){return e_(r)},e.prototype.mapped=function(r){return e_(r)},e.prototype.first=function(){return zw},e.prototype.summary=function(){return Gw},e}(),$b=new Hw;Object.freeze($b);hs.default=$b;function Jh(e){return _s(this,void 0,void 0,function(){var r,t,n,i;return vs(this,function(o){switch(o.label){case 0:return[4,e];case 1:return r=o.sent(),t=r.summary,n=r.records,[4,e.keys()];case 2:return i=o.sent(),[2,new Vw.default(i,n,t)]}})})}function e_(e){var r=this;if(e==null||e.collect==null&&e.map==null)throw(0,qw.newError)("Requires a map or/and a collect functions.");return function(t){return _s(r,void 0,void 0,function(){return vs(this,function(n){switch(n.label){case 0:return[4,new Promise(function(i,o){var a={records:[],keys:[]};t.subscribe({onKeys:function(s){a.keys=s},onNext:function(s){if(e.map!=null){var c=e.map(s);c!==void 0&&a.records.push(c)}else a.records.push(s)},onCompleted:function(s){if(e.collect!=null)i(e.collect(a.records,s,a.keys));else{var c={records:a.records,summary:s,keys:a.keys};i(c)}},onError:function(s){o(s)}})})];case 1:return[2,n.sent()]}})})}}function zw(e){return _s(this,void 0,void 0,function(){var r,t,n,i;return vs(this,function(o){switch(o.label){case 0:return r=e[Symbol.asyncIterator](),[4,r.next()];case 1:t=o.sent(),n=t.value,i=t.done,o.label=2;case 2:return o.trys.push([2,,3,6]),i===!0?[2,void 0]:[2,n];case 3:return r.return==null?[3,5]:[4,r.return()];case 4:o.sent(),o.label=5;case 5:return[7];case 6:return[2]}})})}function Gw(e){return _s(this,void 0,void 0,function(){return vs(this,function(r){switch(r.label){case 0:return[4,e.summary()];case 1:return[2,r.sent()]}})})}var kd={},Jl=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},ef=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(kd,"__esModule",{value:!0});var Yw=B,Kw=function(){function e(r){this._createSession=r}return e.prototype.execute=function(r,t,n){return Jl(this,void 0,void 0,function(){var i,o,a,s=this;return ef(this,function(c){switch(c.label){case 0:i=this._createSession({database:r.database,bookmarkManager:r.bookmarkManager,impersonatedUser:r.impersonatedUser,auth:r.auth}),o=Zw(r.signal,"abort",function(){return Jl(s,void 0,void 0,function(){return ef(this,function(u){switch(u.label){case 0:return[4,i.close()];case 1:return[2,u.sent()]}})})}),i._configureTransactionExecutor(!0,Yw.TELEMETRY_APIS.EXECUTE_QUERY),c.label=1;case 1:return c.trys.push([1,,3,5]),a=r.routing==="READ"?i.executeRead.bind(i):i.executeWrite.bind(i),[4,a(function(u){return Jl(s,void 0,void 0,function(){var l;return ef(this,function(h){switch(h.label){case 0:return l=u.run(t,n),[4,r.resultTransformer(l)];case 1:return[2,h.sent()]}})})},r.transactionConfig)];case 2:return[2,c.sent()];case 3:return o.uninstall(),[4,i.close()];case 4:return c.sent(),[7];case 5:return[2]}})})},e}();kd.default=Kw;function Zw(e,r,t){return typeof(e==null?void 0:e.addEventListener)=="function"&&e.addEventListener(r,t),{uninstall:function(){typeof(e==null?void 0:e.removeEventListener)=="function"&&e.removeEventListener(r,t)}}}var Dd={};Object.defineProperty(Dd,"__esModule",{value:!0});var Qw=function(){function e(r){this.maxSize=r,this.pruneCount=Math.max(Math.round(.01*r*Math.log(r)),1),this.map=new Map}return e.prototype.set=function(r,t){this.map.set(r,{database:t,lastUsed:Date.now()}),this._pruneCache()},e.prototype.get=function(r){var t=this.map.get(r);if(t!==void 0)return t.lastUsed=Date.now(),t.database},e.prototype.delete=function(r){this.map.delete(r)},e.prototype._pruneCache=function(){if(this.map.size>this.maxSize)for(var r=Array.from(this.map.entries()).sort(function(n,i){return n[1].lastUsed-i[1].lastUsed}),t=0;t<this.pruneCount;t++)this.map.delete(r[t][0])},e}();Dd.default=Qw;var zf=f&&f.__assign||function(){return zf=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},zf.apply(this,arguments)},t_=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},r_=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},uo=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.QueryConfig=Ve.SessionConfig=Ve.routing=Ve.WRITE=Ve.READ=Ve.Driver=void 0;var n_=ar,Xw=uo(is),xr=B,Jw=Qr,i_=uo(ds),eT=Q,tT=Bn,rT=uo(hs),nT=uo(kd),iT=oe,oT=uo(Dd),aT=ao,uT=60*60*1e3,sT=1e3,cT=1e4,Lu=xr.ACCESS_MODE_READ;Ve.READ=Lu;var Ld=xr.ACCESS_MODE_WRITE;Ve.WRITE=Ld;var lT=0,fT=function(){function e(){this.defaultAccessMode=Ld,this.bookmarks=[],this.database="",this.impersonatedUser=void 0,this.auth=void 0,this.fetchSize=void 0,this.bookmarkManager=void 0,this.notificationFilter=void 0}return e}();Ve.SessionConfig=fT;var dT="WRITE",hT="READ",Sn={WRITE:dT,READ:hT};Ve.routing=Sn;Object.freeze(Sn);var _T=function(){function e(){this.routing=Sn.WRITE,this.resultTransformer=void 0,this.database="",this.impersonatedUser=void 0,this.bookmarkManager=void 0,this.transactionConfig=void 0,this.auth=void 0,this.signal=void 0}return e}();Ve.QueryConfig=_T;var kb=function(){function e(r,t,n,i,o){t===void 0&&(t={}),i===void 0&&(i=function(s){return new i_.default(s)}),o===void 0&&(o=function(s){return new nT.default(s)}),pT(t);var a=Jw.Logger.create(t);vT(t,a),this._id=lT++,this._meta=r,this._config=t,this._log=a,this._createConnectionProvider=n,this._createSession=i,this._defaultExecuteQueryBookmarkManager=(0,tT.bookmarkManager)(),this._queryExecutor=o(this.session.bind(this)),this._connectionProvider=null,this.homeDatabaseCache=new oT.default(cT),this._afterConstruction()}return Object.defineProperty(e.prototype,"executeQueryBookmarkManager",{get:function(){return this._defaultExecuteQueryBookmarkManager},enumerable:!1,configurable:!0}),e.prototype.executeQuery=function(r,t,n){var i,o,a;return n===void 0&&(n={}),t_(this,void 0,void 0,function(){var s,c,u;return r_(this,function(l){switch(l.label){case 0:if(s=n.bookmarkManager===null?void 0:(i=n.bookmarkManager)!==null&&i!==void 0?i:this.executeQueryBookmarkManager,c=(o=n.resultTransformer)!==null&&o!==void 0?o:rT.default.eagerResultTransformer(),u=(a=n.routing)!==null&&a!==void 0?a:Sn.WRITE,u!==Sn.READ&&u!==Sn.WRITE)throw(0,iT.newError)('Illegal query routing config: "'.concat(u,'"'));return[4,this._queryExecutor.execute({resultTransformer:c,bookmarkManager:s,routing:u,database:n.database,impersonatedUser:n.impersonatedUser,transactionConfig:n.transactionConfig,auth:n.auth,signal:n.signal},r,t)];case 1:return[2,l.sent()]}})})},e.prototype.verifyConnectivity=function(r){var t=r===void 0?{}:r,n=t.database,i=n===void 0?"":n,o=this._getOrCreateConnectionProvider();return o.verifyConnectivityAndGetServerInfo({database:i,accessMode:Lu})},e.prototype.verifyAuthentication=function(r){var t=r===void 0?{}:r,n=t.database,i=t.auth;return t_(this,void 0,void 0,function(){var o;return r_(this,function(a){switch(a.label){case 0:return o=this._getOrCreateConnectionProvider(),[4,o.verifyAuthentication({database:n??"system",auth:i,accessMode:Lu})];case 1:return[2,a.sent()]}})})},e.prototype.getServerInfo=function(r){var t=r===void 0?{}:r,n=t.database,i=n===void 0?"":n,o=this._getOrCreateConnectionProvider();return o.verifyConnectivityAndGetServerInfo({database:i,accessMode:Lu})},e.prototype.supportsMultiDb=function(){var r=this._getOrCreateConnectionProvider();return r.supportsMultiDb()},e.prototype.supportsTransactionConfig=function(){var r=this._getOrCreateConnectionProvider();return r.supportsTransactionConfig()},e.prototype.supportsUserImpersonation=function(){var r=this._getOrCreateConnectionProvider();return r.supportsUserImpersonation()},e.prototype.supportsSessionAuth=function(){var r=this._getOrCreateConnectionProvider();return r.supportsSessionAuth()},e.prototype.getNegotiatedProtocolVersion=function(){var r=this._getOrCreateConnectionProvider();return r.getNegotiatedProtocolVersion()},e.prototype.isEncrypted=function(){return this._isEncrypted()},e.prototype._supportsRouting=function(){return this._meta.routing},e.prototype._isEncrypted=function(){return this._config.encrypted===eT.ENCRYPTION_ON||this._config.encrypted===!0},e.prototype._getTrust=function(){return this._config.trust},e.prototype.session=function(r){var t=r===void 0?{}:r,n=t.defaultAccessMode,i=n===void 0?Ld:n,o=t.bookmarks,a=t.database,s=a===void 0?"":a,c=t.impersonatedUser,u=t.fetchSize,l=t.bookmarkManager,h=t.notificationFilter,v=t.auth;return this._newSession({defaultAccessMode:i,bookmarkOrBookmarks:o,database:s,reactive:!1,impersonatedUser:c,fetchSize:Db(u,this._config.fetchSize),bookmarkManager:l,notificationFilter:h,auth:v})},e.prototype.close=function(){return this._log.info("Driver ".concat(this._id," closing")),this._connectionProvider!=null?this._connectionProvider.close():Promise.resolve()},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._afterConstruction=function(){this._log.info("".concat(this._meta.typename," driver ").concat(this._id," created for server address ").concat(this._meta.address.toString()))},e.prototype._homeDatabaseCallback=function(r,t){this.homeDatabaseCache.set(r,t)},e.prototype._newSession=function(r){var t=r.defaultAccessMode,n=r.bookmarkOrBookmarks,i=r.database,o=r.reactive,a=r.impersonatedUser,s=r.fetchSize,c=r.bookmarkManager,u=r.notificationFilter,l=r.auth,h=i_.default._validateSessionMode(t),v=this._getOrCreateConnectionProvider(),b=this.homeDatabaseCache.get((0,aT.cacheKey)(l,a)),m=this._homeDatabaseCallback.bind(this),E=n!=null?new n_.Bookmarks(n):n_.Bookmarks.empty();return this._createSession({mode:h,database:i??"",connectionProvider:v,bookmarks:E,config:zf({cachedHomeDatabase:b,routingDriver:this._supportsRouting()},this._config),reactive:o,impersonatedUser:a,fetchSize:s,bookmarkManager:c,notificationFilter:u,auth:l,log:this._log,homeDatabaseCallback:m})},e.prototype._getOrCreateConnectionProvider=function(){return this._connectionProvider==null&&(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,mT(this._config))),this._connectionProvider},e}();Ve.Driver=kb;function vT(e,r){var t,n,i=e.resolver;if(i!=null&&typeof i!="function")throw new TypeError("Configured resolver should be a function. Got: ".concat(typeof i));if(e.connectionAcquisitionTimeout<e.connectionTimeout&&r.warn('Configuration for "connectionAcquisitionTimeout" should be greater than or equal to "connectionTimeout". Otherwise, the connection acquisition timeout will take precedence for over the connection timeout in scenarios where a new connection is created while it is acquired'),((t=e.notificationFilter)===null||t===void 0?void 0:t.disabledCategories)!=null&&((n=e.notificationFilter)===null||n===void 0?void 0:n.disabledClassifications)!=null)throw new Error(`The notificationFilter can't have both "disabledCategories" and  "disabledClassifications" configured at the same time.`);return e}function pT(e){e.maxConnectionLifetime=tf(e.maxConnectionLifetime,uT),e.maxConnectionPoolSize=tf(e.maxConnectionPoolSize,xr.DEFAULT_POOL_MAX_SIZE),e.connectionAcquisitionTimeout=tf(e.connectionAcquisitionTimeout,xr.DEFAULT_POOL_ACQUISITION_TIMEOUT),e.fetchSize=Db(e.fetchSize,sT),e.connectionTimeout=bT(e),e.connectionLivenessCheckTimeout=yT(e.connectionLivenessCheckTimeout)}function tf(e,r){var t=parseInt(e,10);return t>0||t===0?t:t<0?Number.MAX_SAFE_INTEGER:r}function Db(e,r){var t=parseInt(e,10);if(t>0||t===xr.FETCH_ALL)return t;if(t===0||t<0)throw new Error("The fetch size can only be a positive value or ".concat(xr.FETCH_ALL," for ALL. However fetchSize = ").concat(t));return r}function bT(e){var r=parseInt(e.connectionTimeout,10);return r===0||!isNaN(r)&&r<0?null:isNaN(r)?xr.DEFAULT_CONNECTION_TIMEOUT_MILLIS:r}function yT(e){if(e!=null){var r=parseInt(e,10);if(r<0||Number.isNaN(r))throw new Error("The connectionLivenessCheckTimeout can only be a positive value or 0 for always. However connectionLivenessCheckTimeout = ".concat(r));return r}}function mT(e){return new Xw.default(e.resolver)}Ve.default=kb;var ps={};Object.defineProperty(ps,"__esModule",{value:!0});var gT=oe,OT=dt,ET={basic:function(e,r,t){return t!=null?{scheme:"basic",principal:e,credentials:r,realm:t}:{scheme:"basic",principal:e,credentials:r}},kerberos:function(e){return{scheme:"kerberos",principal:"",credentials:e}},bearer:function(e){return{scheme:"bearer",credentials:e}},none:function(){return{scheme:"none"}},custom:function(e,r,t,n,i){var o={scheme:n,principal:e};if(rf(r)&&(o.credentials=r),rf(t)&&(o.realm=t),rf(i)){try{(0,OT.stringify)(i)}catch(a){throw(0,gT.newError)("Circular references in custom auth token parameters",void 0,a)}o.parameters=i}return o}};function rf(e){return!(e==null||e===""||Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length===0)}ps.default=ET;var $t={},Gf=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Yf=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},wT=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($t,"__esModule",{value:!0});$t.staticAuthTokenManager=$t.authTokenManagers=$t.AuthTokenAndExpiration=void 0;var TT=wT(ps),ST=te,PT=function(){function e(){}return e.prototype.getToken=function(){throw new Error("Not Implemented")},e.prototype.handleSecurityException=function(r,t){throw new Error("Not implemented")},e}();$t.default=PT;var CT=function(){function e(){this.token=TT.default.none(),this.expiration=void 0}return e}();$t.AuthTokenAndExpiration=CT;var RT=function(){function e(){}return e.prototype.bearer=function(r){var t=r.tokenProvider;if(typeof t!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof t));return new o_(t,["Neo.ClientError.Security.Unauthorized","Neo.ClientError.Security.TokenExpired"])},e.prototype.basic=function(r){var t=this,n=r.tokenProvider;if(typeof n!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof n));return new o_(function(){return Gf(t,void 0,void 0,function(){var i;return Yf(this,function(o){switch(o.label){case 0:return i={},[4,n()];case 1:return[2,(i.token=o.sent(),i)]}})})},["Neo.ClientError.Security.Unauthorized"])},e}(),Lb=new RT;$t.authTokenManagers=Lb;Object.freeze(Lb);function IT(e){var r=e.authToken;return new jT(r)}$t.staticAuthTokenManager=IT;var AT=function(){function e(r){r===void 0&&(r=[]),this._subscribers=r}return e.prototype.subscribe=function(r){this._subscribers.push(r)},e.prototype.onCompleted=function(r){this._subscribers.forEach(function(t){return t.onCompleted(r)})},e.prototype.onError=function(r){this._subscribers.forEach(function(t){return t.onError(r)})},e}(),o_=function(){function e(r,t,n,i){this._tokenProvider=r,this._handledSecurityCodes=t,this._currentAuthData=n,this._refreshObservable=i}return e.prototype.getToken=function(){var r;return Gf(this,void 0,void 0,function(){return Yf(this,function(t){switch(t.label){case 0:return this._currentAuthData===void 0||this._currentAuthData.expiration!==void 0&&this._currentAuthData.expiration<new Date?[4,this._refreshAuthToken()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2,(r=this._currentAuthData)===null||r===void 0?void 0:r.token]}})})},e.prototype.handleSecurityException=function(r,t){var n;return this._handledSecurityCodes.includes(t)?(ST.util.equals(r,(n=this._currentAuthData)===null||n===void 0?void 0:n.token)&&this._scheduleRefreshAuthToken(),!0):!1},e.prototype._scheduleRefreshAuthToken=function(r){var t=this;this._refreshObservable===void 0&&(this._currentAuthData=void 0,this._refreshObservable=new AT,Promise.resolve(this._tokenProvider()).then(function(n){var i;t._currentAuthData=n,(i=t._refreshObservable)===null||i===void 0||i.onCompleted(n)}).catch(function(n){var i;(i=t._refreshObservable)===null||i===void 0||i.onError(n)}).finally(function(){t._refreshObservable=void 0})),r!==void 0&&this._refreshObservable.subscribe(r)},e.prototype._refreshAuthToken=function(){return Gf(this,void 0,void 0,function(){var r=this;return Yf(this,function(t){switch(t.label){case 0:return[4,new Promise(function(n,i){r._scheduleRefreshAuthToken({onCompleted:n,onError:i})})];case 1:return[2,t.sent()]}})})},e}(),jT=function(){function e(r){this._authToken=r}return e.prototype.getToken=function(){return this._authToken},e.prototype.handleSecurityException=function(r,t){return!1},e}(),jn={},MT=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(jn,"__esModule",{value:!0});jn.InternalConfig=jn.Config=void 0;var Ub=function(){function e(){this.encrypted=void 0,this.trust=void 0,this.trustedCertificates=[],this.maxConnectionPoolSize=100,this.maxConnectionLifetime=60*60*1e3,this.connectionAcquisitionTimeout=6e4,this.maxTransactionRetryTime=3e4,this.connectionLivenessCheckTimeout=void 0,this.connectionTimeout=3e4,this.disableLosslessIntegers=!1,this.useBigInt=!1,this.logging=void 0,this.resolver=void 0,this.notificationFilter=void 0,this.userAgent=void 0,this.telemetryDisabled=!1,this.clientCertificate=void 0}return e}();jn.Config=Ub;var NT=function(e){MT(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(Ub);jn.InternalConfig=NT;var ct={},$T=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yi=f&&f.__assign||function(){return Yi=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Yi.apply(this,arguments)},kT=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),DT=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),LT=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&kT(r,e,t);return DT(r,e),r};Object.defineProperty(ct,"__esModule",{value:!0});ct.resolveCertificateProvider=ct.clientCertificateProviders=ct.RotatingClientCertificateProvider=ct.ClientCertificateProvider=void 0;var Ud=LT(dt),UT=function(){function e(){this.certfile="",this.keyfile="",this.password=void 0}return e}();ct.default=UT;var Fb=function(){function e(){}return e.prototype.hasUpdate=function(){throw new Error("Not Implemented")},e.prototype.getClientCertificate=function(){throw new Error("Not Implemented")},e}();ct.ClientCertificateProvider=Fb;var FT=function(e){$T(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.updateCertificate=function(t){throw new Error("Not implemented")},r}(Fb);ct.RotatingClientCertificateProvider=FT;var BT=function(){function e(){}return e.prototype.rotating=function(r){var t=r.initialCertificate;if(t==null||!Fd(t))throw new TypeError("initialCertificate should be ClientCertificate, but got ".concat(Ud.stringify(t)));var n=Yi({},t);return new qT(n)},e}(),Bb=new BT;ct.clientCertificateProviders=Bb;Object.freeze(Bb);function WT(e){if(e!=null){if(typeof e=="object"&&"hasUpdate"in e&&"getClientCertificate"in e&&typeof e.getClientCertificate=="function"&&typeof e.hasUpdate=="function")return e;if(Fd(e)){var r=Yi({},e);return{getClientCertificate:function(){return r},hasUpdate:function(){return!1}}}throw new TypeError("clientCertificate should be configured with ClientCertificate or ClientCertificateProvider, but got ".concat(Ud.stringify(e)))}}ct.resolveCertificateProvider=WT;function Fd(e){return e!=null&&typeof e=="object"&&"certfile"in e&&xT(e.certfile)&&"keyfile"in e&&VT(e.keyfile)&&xb("password",e)}function xT(e){return a_(e)||Wb(e,a_)}function VT(e){function r(t){return typeof t=="string"||t!=null&&typeof t=="object"&&"path"in t&&typeof t.path=="string"&&xb("password",t)}return r(e)||Wb(e,r)}function a_(e){return typeof e=="string"}function Wb(e,r,t){return t===void 0&&(t=!1),Array.isArray(e)&&(t||e.length>0)&&e.filter(r).length===e.length}function xb(e,r){return!(e in r)||r[e]==null||typeof r[e]=="string"}var qT=function(){function e(r,t){t===void 0&&(t=!1),this._certificate=r,this._updated=t}return e.prototype.hasUpdate=function(){try{return this._updated}finally{this._updated=!1}},e.prototype.getClientCertificate=function(){return this._certificate},e.prototype.updateCertificate=function(r){if(!Fd(r))throw new TypeError("certificate should be ClientCertificate, but got ".concat(Ud.stringify(r)));this._certificate=Yi({},r),this._updated=!0},e}();(function(e){var r=f&&f.__createBinding||(Object.create?function(H,L,W,J){J===void 0&&(J=W);var me=Object.getOwnPropertyDescriptor(L,W);(!me||("get"in me?!L.__esModule:me.writable||me.configurable))&&(me={enumerable:!0,get:function(){return L[W]}}),Object.defineProperty(H,J,me)}:function(H,L,W,J){J===void 0&&(J=W),H[J]=L[W]}),t=f&&f.__setModuleDefault||(Object.create?function(H,L){Object.defineProperty(H,"default",{enumerable:!0,value:L})}:function(H,L){H.default=L}),n=f&&f.__importStar||function(H){if(H&&H.__esModule)return H;var L={};if(H!=null)for(var W in H)W!=="default"&&Object.prototype.hasOwnProperty.call(H,W)&&r(L,H,W);return t(L,H),L},i=f&&f.__importDefault||function(H){return H&&H.__esModule?H:{default:H}};Object.defineProperty(e,"__esModule",{value:!0}),e.EagerResult=e.Result=e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.GqlStatusObject=e.Notification=e.ServerInfo=e.queryType=e.ResultSummary=e.Record=e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=e.Time=e.LocalTime=e.LocalDateTime=e.isTime=e.isLocalTime=e.isLocalDateTime=e.isDuration=e.isDateTime=e.isDate=e.Duration=e.DateTime=e.Date=e.Point=e.isPoint=e.internal=e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=e.Integer=e.error=e.isRetriableError=e.GQLError=e.newGQLError=e.Neo4jError=e.newError=e.authTokenManagers=void 0,e.resolveCertificateProvider=e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.routing=e.staticAuthTokenManager=e.bookmarkManager=e.auth=e.json=e.driver=e.types=e.Driver=e.Session=e.TransactionPromise=e.ManagedTransaction=e.Transaction=e.Connection=e.Releasable=e.ConnectionProvider=void 0;var o=oe;Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return o.newError}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return o.Neo4jError}}),Object.defineProperty(e,"newGQLError",{enumerable:!0,get:function(){return o.newGQLError}}),Object.defineProperty(e,"GQLError",{enumerable:!0,get:function(){return o.GQLError}}),Object.defineProperty(e,"isRetriableError",{enumerable:!0,get:function(){return o.isRetriableError}});var a=n(Le);e.Integer=a.default,Object.defineProperty(e,"int",{enumerable:!0,get:function(){return a.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return a.isInt}}),Object.defineProperty(e,"inSafeRange",{enumerable:!0,get:function(){return a.inSafeRange}}),Object.defineProperty(e,"toNumber",{enumerable:!0,get:function(){return a.toNumber}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return a.toString}});var s=be;Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return s.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return s.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return s.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return s.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return s.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return s.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return s.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return s.isLocalTime}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return s.isTime}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return s.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return s.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return s.Time}});var c=we;Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return c.Node}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return c.isNode}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return c.Relationship}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return c.isRelationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return c.UnboundRelationship}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return c.isUnboundRelationship}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return c.Path}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return c.isPath}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return c.PathSegment}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return c.isPathSegment}});var u=i(Rd);e.Record=u.default;var l=In;Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return l.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return l.Point}});var h=n(xe);e.ResultSummary=h.default,Object.defineProperty(e,"queryType",{enumerable:!0,get:function(){return h.queryType}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return h.ServerInfo}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return h.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return h.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return h.QueryStatistics}}),Object.defineProperty(e,"Stats",{enumerable:!0,get:function(){return h.Stats}});var v=n(Te);e.Notification=v.default,Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return v.GqlStatusObject}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return v.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return v.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return v.notificationSeverityLevel}});var b=Nt;Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return b.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return b.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return b.notificationFilterMinimumSeverityLevel}});var m=i(io);e.Result=m.default;var E=i(ss);e.EagerResult=E.default;var T=n(oo);e.ConnectionProvider=T.default,Object.defineProperty(e,"Releasable",{enumerable:!0,get:function(){return T.Releasable}});var S=i(Nd);e.Connection=S.default;var R=i(cs);e.Transaction=R.default;var I=i(ls);e.ManagedTransaction=I.default;var A=i(fs);e.TransactionPromise=A.default;var j=i(ds);e.Session=j.default;var k=n(Ve),M=k;e.Driver=k.default,e.driver=M;var q=i(ps);e.auth=q.default;var ne=Bn;Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return ne.bookmarkManager}});var ie=$t;Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return ie.authTokenManagers}}),Object.defineProperty(e,"staticAuthTokenManager",{enumerable:!0,get:function(){return ie.staticAuthTokenManager}});var _e=Ve;Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return _e.routing}});var X=n(jn);e.types=X;var de=n(dt);e.json=de;var ze=i(hs);e.resultTransformers=ze.default;var Y=ct;Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return Y.clientCertificateProviders}}),Object.defineProperty(e,"resolveCertificateProvider",{enumerable:!0,get:function(){return Y.resolveCertificateProvider}});var he=n(te);e.internal=he;var V={SERVICE_UNAVAILABLE:o.SERVICE_UNAVAILABLE,SESSION_EXPIRED:o.SESSION_EXPIRED,PROTOCOL_ERROR:o.PROTOCOL_ERROR};e.error=V;var ee={authTokenManagers:ie.authTokenManagers,newError:o.newError,Neo4jError:o.Neo4jError,newGQLError:o.newGQLError,GQLError:o.GQLError,isRetriableError:o.isRetriableError,error:V,Integer:a.default,int:a.int,isInt:a.isInt,inSafeRange:a.inSafeRange,toNumber:a.toNumber,toString:a.toString,internal:he,isPoint:l.isPoint,Point:l.Point,Date:s.Date,DateTime:s.DateTime,Duration:s.Duration,isDate:s.isDate,isDateTime:s.isDateTime,isDuration:s.isDuration,isLocalDateTime:s.isLocalDateTime,isLocalTime:s.isLocalTime,isTime:s.isTime,LocalDateTime:s.LocalDateTime,LocalTime:s.LocalTime,Time:s.Time,Node:c.Node,isNode:c.isNode,Relationship:c.Relationship,isRelationship:c.isRelationship,UnboundRelationship:c.UnboundRelationship,isUnboundRelationship:c.isUnboundRelationship,Path:c.Path,isPath:c.isPath,PathSegment:c.PathSegment,isPathSegment:c.isPathSegment,Record:u.default,ResultSummary:h.default,queryType:h.queryType,ServerInfo:h.ServerInfo,Notification:v.default,GqlStatusObject:v.GqlStatusObject,Plan:h.Plan,ProfiledPlan:h.ProfiledPlan,QueryStatistics:h.QueryStatistics,Stats:h.Stats,Result:m.default,EagerResult:E.default,Transaction:R.default,ManagedTransaction:I.default,TransactionPromise:A.default,Session:j.default,Driver:k.default,Connection:S.default,Releasable:T.Releasable,types:X,driver:M,json:de,auth:q.default,bookmarkManager:ne.bookmarkManager,routing:_e.routing,resultTransformers:ze.default,notificationCategory:v.notificationCategory,notificationClassification:v.notificationClassification,notificationSeverityLevel:v.notificationSeverityLevel,notificationFilterDisabledCategory:b.notificationFilterDisabledCategory,notificationFilterDisabledClassification:b.notificationFilterDisabledClassification,notificationFilterMinimumSeverityLevel:b.notificationFilterMinimumSeverityLevel,clientCertificateProviders:Y.clientCertificateProviders,resolveCertificateProvider:Y.resolveCertificateProvider};e.default=ee})(x);var bs={},so={},se={},Wn={},ue={};Object.defineProperty(ue,"__esModule",{value:!0});ue.isFunction=void 0;function HT(e){return typeof e=="function"}ue.isFunction=HT;var Ae={},co={},Et={};Object.defineProperty(Et,"__esModule",{value:!0});Et.createErrorClass=void 0;function zT(e){var r=function(n){Error.call(n),n.stack=new Error().stack},t=e(r);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Et.createErrorClass=zT;Object.defineProperty(co,"__esModule",{value:!0});co.UnsubscriptionError=void 0;var GT=Et;co.UnsubscriptionError=GT.createErrorClass(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});var ht={};Object.defineProperty(ht,"__esModule",{value:!0});ht.arrRemove=void 0;function YT(e,r){if(e){var t=e.indexOf(r);0<=t&&e.splice(t,1)}}ht.arrRemove=YT;var u_=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},s_=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},c_=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.isSubscription=Ae.EMPTY_SUBSCRIPTION=Ae.Subscription=void 0;var Vi=ue,nf=co,l_=ht,Bd=function(){function e(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var r,t,n,i,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var s=u_(a),c=s.next();!c.done;c=s.next()){var u=c.value;u.remove(this)}}catch(E){r={error:E}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(r)throw r.error}}else a.remove(this);var l=this.initialTeardown;if(Vi.isFunction(l))try{l()}catch(E){o=E instanceof nf.UnsubscriptionError?E.errors:[E]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var v=u_(h),b=v.next();!b.done;b=v.next()){var m=b.value;try{f_(m)}catch(E){o=o??[],E instanceof nf.UnsubscriptionError?o=c_(c_([],s_(o)),s_(E.errors)):o.push(E)}}}catch(E){n={error:E}}finally{try{b&&!b.done&&(i=v.return)&&i.call(v)}finally{if(n)throw n.error}}}if(o)throw new nf.UnsubscriptionError(o)}},e.prototype.add=function(r){var t;if(r&&r!==this)if(this.closed)f_(r);else{if(r instanceof e){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(r)}},e.prototype._hasParent=function(r){var t=this._parentage;return t===r||Array.isArray(t)&&t.includes(r)},e.prototype._addParent=function(r){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(r),t):t?[t,r]:r},e.prototype._removeParent=function(r){var t=this._parentage;t===r?this._parentage=null:Array.isArray(t)&&l_.arrRemove(t,r)},e.prototype.remove=function(r){var t=this._finalizers;t&&l_.arrRemove(t,r),r instanceof e&&r._removeParent(this)},e.EMPTY=function(){var r=new e;return r.closed=!0,r}(),e}();Ae.Subscription=Bd;Ae.EMPTY_SUBSCRIPTION=Bd.EMPTY;function KT(e){return e instanceof Bd||e&&"closed"in e&&Vi.isFunction(e.remove)&&Vi.isFunction(e.add)&&Vi.isFunction(e.unsubscribe)}Ae.isSubscription=KT;function f_(e){Vi.isFunction(e)?e():e.unsubscribe()}var ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.config=void 0;ur.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var lo={},Wd={};(function(e){var r=f&&f.__read||function(n,i){var o=typeof Symbol=="function"&&n[Symbol.iterator];if(!o)return n;var a=o.call(n),s,c=[],u;try{for(;(i===void 0||i-- >0)&&!(s=a.next()).done;)c.push(s.value)}catch(l){u={error:l}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(u)throw u.error}}return c},t=f&&f.__spreadArray||function(n,i){for(var o=0,a=i.length,s=n.length;o<a;o++,s++)n[s]=i[o];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutProvider=void 0,e.timeoutProvider={setTimeout:function(n,i){for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var s=e.timeoutProvider.delegate;return s!=null&&s.setTimeout?s.setTimeout.apply(s,t([n,i],r(o))):setTimeout.apply(void 0,t([n,i],r(o)))},clearTimeout:function(n){var i=e.timeoutProvider.delegate;return((i==null?void 0:i.clearTimeout)||clearTimeout)(n)},delegate:void 0}})(Wd);Object.defineProperty(lo,"__esModule",{value:!0});lo.reportUnhandledError=void 0;var ZT=ur,QT=Wd;function XT(e){QT.timeoutProvider.setTimeout(function(){var r=ZT.config.onUnhandledError;if(r)r(e);else throw e})}lo.reportUnhandledError=XT;var je={};Object.defineProperty(je,"__esModule",{value:!0});je.noop=void 0;function JT(){}je.noop=JT;var gt={};Object.defineProperty(gt,"__esModule",{value:!0});gt.createNotification=gt.nextNotification=gt.errorNotification=gt.COMPLETE_NOTIFICATION=void 0;gt.COMPLETE_NOTIFICATION=function(){return ys("C",void 0,void 0)}();function eS(e){return ys("E",void 0,e)}gt.errorNotification=eS;function tS(e){return ys("N",e,void 0)}gt.nextNotification=tS;function ys(e,r,t){return{kind:e,value:r,error:t}}gt.createNotification=ys;var Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.captureError=Xt.errorContext=void 0;var Vb=ur,Ur=null;function rS(e){if(Vb.config.useDeprecatedSynchronousErrorHandling){var r=!Ur;if(r&&(Ur={errorThrown:!1,error:null}),e(),r){var t=Ur,n=t.errorThrown,i=t.error;if(Ur=null,n)throw i}}else e()}Xt.errorContext=rS;function nS(e){Vb.config.useDeprecatedSynchronousErrorHandling&&Ur&&(Ur.errorThrown=!0,Ur.error=e)}Xt.captureError=nS;(function(e){var r=f&&f.__extends||function(){var R=function(I,A){return R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,k){j.__proto__=k}||function(j,k){for(var M in k)Object.prototype.hasOwnProperty.call(k,M)&&(j[M]=k[M])},R(I,A)};return function(I,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");R(I,A);function j(){this.constructor=I}I.prototype=A===null?Object.create(A):(j.prototype=A.prototype,new j)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_OBSERVER=e.SafeSubscriber=e.Subscriber=void 0;var t=ue,n=Ae,i=ur,o=lo,a=je,s=gt,c=Wd,u=Xt,l=function(R){r(I,R);function I(A){var j=R.call(this)||this;return j.isStopped=!1,A?(j.destination=A,n.isSubscription(A)&&A.add(j)):j.destination=e.EMPTY_OBSERVER,j}return I.create=function(A,j,k){return new m(A,j,k)},I.prototype.next=function(A){this.isStopped?S(s.nextNotification(A),this):this._next(A)},I.prototype.error=function(A){this.isStopped?S(s.errorNotification(A),this):(this.isStopped=!0,this._error(A))},I.prototype.complete=function(){this.isStopped?S(s.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},I.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,R.prototype.unsubscribe.call(this),this.destination=null)},I.prototype._next=function(A){this.destination.next(A)},I.prototype._error=function(A){try{this.destination.error(A)}finally{this.unsubscribe()}},I.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},I}(n.Subscription);e.Subscriber=l;var h=Function.prototype.bind;function v(R,I){return h.call(R,I)}var b=function(){function R(I){this.partialObserver=I}return R.prototype.next=function(I){var A=this.partialObserver;if(A.next)try{A.next(I)}catch(j){E(j)}},R.prototype.error=function(I){var A=this.partialObserver;if(A.error)try{A.error(I)}catch(j){E(j)}else E(I)},R.prototype.complete=function(){var I=this.partialObserver;if(I.complete)try{I.complete()}catch(A){E(A)}},R}(),m=function(R){r(I,R);function I(A,j,k){var M=R.call(this)||this,q;if(t.isFunction(A)||!A)q={next:A??void 0,error:j??void 0,complete:k??void 0};else{var ne;M&&i.config.useDeprecatedNextContext?(ne=Object.create(A),ne.unsubscribe=function(){return M.unsubscribe()},q={next:A.next&&v(A.next,ne),error:A.error&&v(A.error,ne),complete:A.complete&&v(A.complete,ne)}):q=A}return M.destination=new b(q),M}return I}(l);e.SafeSubscriber=m;function E(R){i.config.useDeprecatedSynchronousErrorHandling?u.captureError(R):o.reportUnhandledError(R)}function T(R){throw R}function S(R,I){var A=i.config.onStoppedNotification;A&&c.timeoutProvider.setTimeout(function(){return A(R,I)})}e.EMPTY_OBSERVER={closed:!0,next:a.noop,error:T,complete:a.noop}})(Wn);var Xr={};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.observable=void 0;Xr.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();var Dt={},Me={};Object.defineProperty(Me,"__esModule",{value:!0});Me.identity=void 0;function iS(e){return e}Me.identity=iS;Object.defineProperty(Dt,"__esModule",{value:!0});Dt.pipeFromArray=Dt.pipe=void 0;var oS=Me;function aS(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return qb(e)}Dt.pipe=aS;function qb(e){return e.length===0?oS.identity:e.length===1?e[0]:function(t){return e.reduce(function(n,i){return i(n)},t)}}Dt.pipeFromArray=qb;Object.defineProperty(se,"__esModule",{value:!0});se.Observable=void 0;var Kf=Wn,uS=Ae,sS=Xr,cS=Dt,lS=ur,of=ue,fS=Xt,dS=function(){function e(r){r&&(this._subscribe=r)}return e.prototype.lift=function(r){var t=new e;return t.source=this,t.operator=r,t},e.prototype.subscribe=function(r,t,n){var i=this,o=_S(r)?r:new Kf.SafeSubscriber(r,t,n);return fS.errorContext(function(){var a=i,s=a.operator,c=a.source;o.add(s?s.call(o,c):c?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(t){r.error(t)}},e.prototype.forEach=function(r,t){var n=this;return t=d_(t),new t(function(i,o){var a=new Kf.SafeSubscriber({next:function(s){try{r(s)}catch(c){o(c),a.unsubscribe()}},error:o,complete:i});n.subscribe(a)})},e.prototype._subscribe=function(r){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(r)},e.prototype[sS.observable]=function(){return this},e.prototype.pipe=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return cS.pipeFromArray(r)(this)},e.prototype.toPromise=function(r){var t=this;return r=d_(r),new r(function(n,i){var o;t.subscribe(function(a){return o=a},function(a){return i(a)},function(){return n(o)})})},e.create=function(r){return new e(r)},e}();se.Observable=dS;function d_(e){var r;return(r=e??lS.config.Promise)!==null&&r!==void 0?r:Promise}function hS(e){return e&&of.isFunction(e.next)&&of.isFunction(e.error)&&of.isFunction(e.complete)}function _S(e){return e&&e instanceof Kf.Subscriber||hS(e)&&uS.isSubscription(e)}var Jr={},xn={},N={};Object.defineProperty(N,"__esModule",{value:!0});N.operate=N.hasLift=void 0;var vS=ue;function Hb(e){return vS.isFunction(e==null?void 0:e.lift)}N.hasLift=Hb;function pS(e){return function(r){if(Hb(r))return r.lift(function(t){try{return e(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}N.operate=pS;var D={},bS=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(D,"__esModule",{value:!0});D.OperatorSubscriber=D.createOperatorSubscriber=void 0;var yS=Wn;function mS(e,r,t,n,i){return new zb(e,r,t,n,i)}D.createOperatorSubscriber=mS;var zb=function(e){bS(r,e);function r(t,n,i,o,a,s){var c=e.call(this,t)||this;return c.onFinalize=a,c.shouldUnsubscribe=s,c._next=n?function(u){try{n(u)}catch(l){t.error(l)}}:e.prototype._next,c._error=o?function(u){try{o(u)}catch(l){t.error(l)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=i?function(){try{i()}catch(u){t.error(u)}finally{this.unsubscribe()}}:e.prototype._complete,c}return r.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},r}(yS.Subscriber);D.OperatorSubscriber=zb;Object.defineProperty(xn,"__esModule",{value:!0});xn.refCount=void 0;var gS=N,OS=D;function ES(){return gS.operate(function(e,r){var t=null;e._refCount++;var n=OS.createOperatorSubscriber(r,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount){t=null;return}var i=e._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),r.unsubscribe()});e.subscribe(n),n.closed||(t=e.connect())})}xn.refCount=ES;var wS=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Jr,"__esModule",{value:!0});Jr.ConnectableObservable=void 0;var TS=se,h_=Ae,SS=xn,PS=D,CS=N,RS=function(e){wS(r,e);function r(t,n){var i=e.call(this)||this;return i.source=t,i.subjectFactory=n,i._subject=null,i._refCount=0,i._connection=null,CS.hasLift(t)&&(i.lift=t.lift),i}return r.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},r.prototype.getSubject=function(){var t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject},r.prototype._teardown=function(){this._refCount=0;var t=this._connection;this._subject=this._connection=null,t==null||t.unsubscribe()},r.prototype.connect=function(){var t=this,n=this._connection;if(!n){n=this._connection=new h_.Subscription;var i=this.getSubject();n.add(this.source.subscribe(PS.createOperatorSubscriber(i,void 0,function(){t._teardown(),i.complete()},function(o){t._teardown(),i.error(o)},function(){return t._teardown()}))),n.closed&&(this._connection=null,n=h_.Subscription.EMPTY)}return n},r.prototype.refCount=function(){return SS.refCount()(this)},r}(TS.Observable);Jr.ConnectableObservable=RS;var ms={},Gb={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.performanceTimestampProvider=void 0,e.performanceTimestampProvider={now:function(){return(e.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}})(Gb);var xd={};(function(e){var r=f&&f.__read||function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var s=a.call(i),c,u=[],l;try{for(;(o===void 0||o-- >0)&&!(c=s.next()).done;)u.push(c.value)}catch(h){l={error:h}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(l)throw l.error}}return u},t=f&&f.__spreadArray||function(i,o){for(var a=0,s=o.length,c=i.length;a<s;a++,c++)i[c]=o[a];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrameProvider=void 0;var n=Ae;e.animationFrameProvider={schedule:function(i){var o=requestAnimationFrame,a=cancelAnimationFrame,s=e.animationFrameProvider.delegate;s&&(o=s.requestAnimationFrame,a=s.cancelAnimationFrame);var c=o(function(u){a=void 0,i(u)});return new n.Subscription(function(){return a==null?void 0:a(c)})},requestAnimationFrame:function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=e.animationFrameProvider.delegate;return((a==null?void 0:a.requestAnimationFrame)||requestAnimationFrame).apply(void 0,t([],r(i)))},cancelAnimationFrame:function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=e.animationFrameProvider.delegate;return((a==null?void 0:a.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,t([],r(i)))},delegate:void 0}})(xd);Object.defineProperty(ms,"__esModule",{value:!0});ms.animationFrames=void 0;var IS=se,AS=Gb,__=xd;function jS(e){return e?Yb(e):MS}ms.animationFrames=jS;function Yb(e){return new IS.Observable(function(r){var t=e||AS.performanceTimestampProvider,n=t.now(),i=0,o=function(){r.closed||(i=__.animationFrameProvider.requestAnimationFrame(function(a){i=0;var s=t.now();r.next({timestamp:e?s:a,elapsed:s-n}),o()}))};return o(),function(){i&&__.animationFrameProvider.cancelAnimationFrame(i)}})}var MS=Yb(),Ce={},fo={};Object.defineProperty(fo,"__esModule",{value:!0});fo.ObjectUnsubscribedError=void 0;var NS=Et;fo.ObjectUnsubscribedError=NS.createErrorClass(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var Kb=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),$S=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.AnonymousSubject=Ce.Subject=void 0;var v_=se,Zf=Ae,kS=fo,DS=ht,af=Xt,Zb=function(e){Kb(r,e);function r(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r.prototype.lift=function(t){var n=new Qf(this,this);return n.operator=t,n},r.prototype._throwIfClosed=function(){if(this.closed)throw new kS.ObjectUnsubscribedError},r.prototype.next=function(t){var n=this;af.errorContext(function(){var i,o;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var a=$S(n.currentObservers),s=a.next();!s.done;s=a.next()){var c=s.value;c.next(t)}}catch(u){i={error:u}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}}})},r.prototype.error=function(t){var n=this;af.errorContext(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=t;for(var i=n.observers;i.length;)i.shift().error(t)}})},r.prototype.complete=function(){var t=this;af.errorContext(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var n=t.observers;n.length;)n.shift().complete()}})},r.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(r.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),r.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},r.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},r.prototype._innerSubscribe=function(t){var n=this,i=this,o=i.hasError,a=i.isStopped,s=i.observers;return o||a?Zf.EMPTY_SUBSCRIPTION:(this.currentObservers=null,s.push(t),new Zf.Subscription(function(){n.currentObservers=null,DS.arrRemove(s,t)}))},r.prototype._checkFinalizedStatuses=function(t){var n=this,i=n.hasError,o=n.thrownError,a=n.isStopped;i?t.error(o):a&&t.complete()},r.prototype.asObservable=function(){var t=new v_.Observable;return t.source=this,t},r.create=function(t,n){return new Qf(t,n)},r}(v_.Observable);Ce.Subject=Zb;var Qf=function(e){Kb(r,e);function r(t,n){var i=e.call(this)||this;return i.destination=t,i.source=n,i}return r.prototype.next=function(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,t)},r.prototype.error=function(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,t)},r.prototype.complete=function(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)},r.prototype._subscribe=function(t){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&i!==void 0?i:Zf.EMPTY_SUBSCRIPTION},r}(Zb);Ce.AnonymousSubject=Qf;var ho={},LS=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ho,"__esModule",{value:!0});ho.BehaviorSubject=void 0;var US=Ce,FS=function(e){LS(r,e);function r(t){var n=e.call(this)||this;return n._value=t,n}return Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),r.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},r.prototype.getValue=function(){var t=this,n=t.hasError,i=t.thrownError,o=t._value;if(n)throw i;return this._throwIfClosed(),o},r.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},r}(US.Subject);ho.BehaviorSubject=FS;var Vn={},gs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.dateTimestampProvider=void 0,e.dateTimestampProvider={now:function(){return(e.dateTimestampProvider.delegate||Date).now()},delegate:void 0}})(gs);var BS=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Vn,"__esModule",{value:!0});Vn.ReplaySubject=void 0;var WS=Ce,xS=gs,VS=function(e){BS(r,e);function r(t,n,i){t===void 0&&(t=1/0),n===void 0&&(n=1/0),i===void 0&&(i=xS.dateTimestampProvider);var o=e.call(this)||this;return o._bufferSize=t,o._windowTime=n,o._timestampProvider=i,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=n===1/0,o._bufferSize=Math.max(1,t),o._windowTime=Math.max(1,n),o}return r.prototype.next=function(t){var n=this,i=n.isStopped,o=n._buffer,a=n._infiniteTimeWindow,s=n._timestampProvider,c=n._windowTime;i||(o.push(t),!a&&o.push(s.now()+c)),this._trimBuffer(),e.prototype.next.call(this,t)},r.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(t),i=this,o=i._infiniteTimeWindow,a=i._buffer,s=a.slice(),c=0;c<s.length&&!t.closed;c+=o?1:2)t.next(s[c]);return this._checkFinalizedStatuses(t),n},r.prototype._trimBuffer=function(){var t=this,n=t._bufferSize,i=t._timestampProvider,o=t._buffer,a=t._infiniteTimeWindow,s=(a?1:2)*n;if(n<1/0&&s<o.length&&o.splice(0,o.length-s),!a){for(var c=i.now(),u=0,l=1;l<o.length&&o[l]<=c;l+=2)u=l;u&&o.splice(0,u+1)}},r}(WS.Subject);Vn.ReplaySubject=VS;var qn={},qS=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(qn,"__esModule",{value:!0});qn.AsyncSubject=void 0;var HS=Ce,zS=function(e){qS(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t._value=null,t._hasValue=!1,t._isComplete=!1,t}return r.prototype._checkFinalizedStatuses=function(t){var n=this,i=n.hasError,o=n._hasValue,a=n._value,s=n.thrownError,c=n.isStopped,u=n._isComplete;i?t.error(s):(c||u)&&(o&&t.next(a),t.complete())},r.prototype.next=function(t){this.isStopped||(this._value=t,this._hasValue=!0)},r.prototype.complete=function(){var t=this,n=t._hasValue,i=t._value,o=t._isComplete;o||(this._isComplete=!0,n&&e.prototype.next.call(this,i),e.prototype.complete.call(this))},r}(HS.Subject);qn.AsyncSubject=zS;var Qb={},Os={},sr={},Es={},GS=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Es,"__esModule",{value:!0});Es.Action=void 0;var YS=Ae,KS=function(e){GS(r,e);function r(t,n){return e.call(this)||this}return r.prototype.schedule=function(t,n){return this},r}(YS.Subscription);Es.Action=KS;var Xb={};(function(e){var r=f&&f.__read||function(n,i){var o=typeof Symbol=="function"&&n[Symbol.iterator];if(!o)return n;var a=o.call(n),s,c=[],u;try{for(;(i===void 0||i-- >0)&&!(s=a.next()).done;)c.push(s.value)}catch(l){u={error:l}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(u)throw u.error}}return c},t=f&&f.__spreadArray||function(n,i){for(var o=0,a=i.length,s=n.length;o<a;o++,s++)n[s]=i[o];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.intervalProvider=void 0,e.intervalProvider={setInterval:function(n,i){for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var s=e.intervalProvider.delegate;return s!=null&&s.setInterval?s.setInterval.apply(s,t([n,i],r(o))):setInterval.apply(void 0,t([n,i],r(o)))},clearInterval:function(n){var i=e.intervalProvider.delegate;return((i==null?void 0:i.clearInterval)||clearInterval)(n)},delegate:void 0}})(Xb);var ZS=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(sr,"__esModule",{value:!0});sr.AsyncAction=void 0;var QS=Es,p_=Xb,XS=ht,JS=function(e){ZS(r,e);function r(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.pending=!1,i}return r.prototype.schedule=function(t,n){var i;if(n===void 0&&(n=0),this.closed)return this;this.state=t;var o=this.id,a=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(a,o,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(a,this.id,n),this},r.prototype.requestAsyncId=function(t,n,i){return i===void 0&&(i=0),p_.intervalProvider.setInterval(t.flush.bind(t,this),i)},r.prototype.recycleAsyncId=function(t,n,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&p_.intervalProvider.clearInterval(n)},r.prototype.execute=function(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(t,n){var i=!1,o;try{this.work(t)}catch(a){i=!0,o=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},r.prototype.unsubscribe=function(){if(!this.closed){var t=this,n=t.id,i=t.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,XS.arrRemove(o,this),n!=null&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},r}(QS.Action);sr.AsyncAction=JS;var Jb={},Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.TestTools=Mn.Immediate=void 0;var eP=1,uf,Hu={};function b_(e){return e in Hu?(delete Hu[e],!0):!1}Mn.Immediate={setImmediate:function(e){var r=eP++;return Hu[r]=!0,uf||(uf=Promise.resolve()),uf.then(function(){return b_(r)&&e()}),r},clearImmediate:function(e){b_(e)}};Mn.TestTools={pending:function(){return Object.keys(Hu).length}};(function(e){var r=f&&f.__read||function(a,s){var c=typeof Symbol=="function"&&a[Symbol.iterator];if(!c)return a;var u=c.call(a),l,h=[],v;try{for(;(s===void 0||s-- >0)&&!(l=u.next()).done;)h.push(l.value)}catch(b){v={error:b}}finally{try{l&&!l.done&&(c=u.return)&&c.call(u)}finally{if(v)throw v.error}}return h},t=f&&f.__spreadArray||function(a,s){for(var c=0,u=s.length,l=a.length;c<u;c++,l++)a[l]=s[c];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.immediateProvider=void 0;var n=Mn,i=n.Immediate.setImmediate,o=n.Immediate.clearImmediate;e.immediateProvider={setImmediate:function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var c=e.immediateProvider.delegate;return((c==null?void 0:c.setImmediate)||i).apply(void 0,t([],r(a)))},clearImmediate:function(a){var s=e.immediateProvider.delegate;return((s==null?void 0:s.clearImmediate)||o)(a)},delegate:void 0}})(Jb);var tP=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Os,"__esModule",{value:!0});Os.AsapAction=void 0;var rP=sr,y_=Jb,nP=function(e){tP(r,e);function r(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i}return r.prototype.requestAsyncId=function(t,n,i){return i===void 0&&(i=0),i!==null&&i>0?e.prototype.requestAsyncId.call(this,t,n,i):(t.actions.push(this),t._scheduled||(t._scheduled=y_.immediateProvider.setImmediate(t.flush.bind(t,void 0))))},r.prototype.recycleAsyncId=function(t,n,i){var o;if(i===void 0&&(i=0),i!=null?i>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,i);var a=t.actions;n!=null&&((o=a[a.length-1])===null||o===void 0?void 0:o.id)!==n&&(y_.immediateProvider.clearImmediate(n),t._scheduled===n&&(t._scheduled=void 0))},r}(rP.AsyncAction);Os.AsapAction=nP;var ws={},cr={},_o={};Object.defineProperty(_o,"__esModule",{value:!0});_o.Scheduler=void 0;var iP=gs,oP=function(){function e(r,t){t===void 0&&(t=e.now),this.schedulerActionCtor=r,this.now=t}return e.prototype.schedule=function(r,t,n){return t===void 0&&(t=0),new this.schedulerActionCtor(this,r).schedule(n,t)},e.now=iP.dateTimestampProvider.now,e}();_o.Scheduler=oP;var aP=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(cr,"__esModule",{value:!0});cr.AsyncScheduler=void 0;var m_=_o,uP=function(e){aP(r,e);function r(t,n){n===void 0&&(n=m_.Scheduler.now);var i=e.call(this,t,n)||this;return i.actions=[],i._active=!1,i}return r.prototype.flush=function(t){var n=this.actions;if(this._active){n.push(t);return}var i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}},r}(m_.Scheduler);cr.AsyncScheduler=uP;var sP=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ws,"__esModule",{value:!0});ws.AsapScheduler=void 0;var cP=cr,lP=function(e){sP(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.flush=function(t){this._active=!0;var n=this._scheduled;this._scheduled=void 0;var i=this.actions,o;t=t||i.shift();do if(o=t.execute(t.state,t.delay))break;while((t=i[0])&&t.id===n&&i.shift());if(this._active=!1,o){for(;(t=i[0])&&t.id===n&&i.shift();)t.unsubscribe();throw o}},r}(cP.AsyncScheduler);ws.AsapScheduler=lP;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.asap=e.asapScheduler=void 0;var r=Os,t=ws;e.asapScheduler=new t.AsapScheduler(r.AsapAction),e.asap=e.asapScheduler})(Qb);var Ze={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.async=e.asyncScheduler=void 0;var r=sr,t=cr;e.asyncScheduler=new t.AsyncScheduler(r.AsyncAction),e.async=e.asyncScheduler})(Ze);var ey={},Ts={},fP=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ts,"__esModule",{value:!0});Ts.QueueAction=void 0;var dP=sr,hP=function(e){fP(r,e);function r(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i}return r.prototype.schedule=function(t,n){return n===void 0&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},r.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},r.prototype.requestAsyncId=function(t,n,i){return i===void 0&&(i=0),i!=null&&i>0||i==null&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,i):(t.flush(this),0)},r}(dP.AsyncAction);Ts.QueueAction=hP;var Ss={},_P=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ss,"__esModule",{value:!0});Ss.QueueScheduler=void 0;var vP=cr,pP=function(e){_P(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(vP.AsyncScheduler);Ss.QueueScheduler=pP;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.queue=e.queueScheduler=void 0;var r=Ts,t=Ss;e.queueScheduler=new t.QueueScheduler(r.QueueAction),e.queue=e.queueScheduler})(ey);var ty={},Ps={},bP=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ps,"__esModule",{value:!0});Ps.AnimationFrameAction=void 0;var yP=sr,g_=xd,mP=function(e){bP(r,e);function r(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i}return r.prototype.requestAsyncId=function(t,n,i){return i===void 0&&(i=0),i!==null&&i>0?e.prototype.requestAsyncId.call(this,t,n,i):(t.actions.push(this),t._scheduled||(t._scheduled=g_.animationFrameProvider.requestAnimationFrame(function(){return t.flush(void 0)})))},r.prototype.recycleAsyncId=function(t,n,i){var o;if(i===void 0&&(i=0),i!=null?i>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,i);var a=t.actions;n!=null&&n===t._scheduled&&((o=a[a.length-1])===null||o===void 0?void 0:o.id)!==n&&(g_.animationFrameProvider.cancelAnimationFrame(n),t._scheduled=void 0)},r}(yP.AsyncAction);Ps.AnimationFrameAction=mP;var Cs={},gP=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Cs,"__esModule",{value:!0});Cs.AnimationFrameScheduler=void 0;var OP=cr,EP=function(e){gP(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.flush=function(t){this._active=!0;var n;t?n=t.id:(n=this._scheduled,this._scheduled=void 0);var i=this.actions,o;t=t||i.shift();do if(o=t.execute(t.state,t.delay))break;while((t=i[0])&&t.id===n&&i.shift());if(this._active=!1,o){for(;(t=i[0])&&t.id===n&&i.shift();)t.unsubscribe();throw o}},r}(OP.AsyncScheduler);Cs.AnimationFrameScheduler=EP;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrame=e.animationFrameScheduler=void 0;var r=Ps,t=Cs;e.animationFrameScheduler=new t.AnimationFrameScheduler(r.AnimationFrameAction),e.animationFrame=e.animationFrameScheduler})(ty);var Nn={},ry=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Nn,"__esModule",{value:!0});Nn.VirtualAction=Nn.VirtualTimeScheduler=void 0;var wP=sr,TP=Ae,SP=cr,PP=function(e){ry(r,e);function r(t,n){t===void 0&&(t=ny),n===void 0&&(n=1/0);var i=e.call(this,t,function(){return i.frame})||this;return i.maxFrames=n,i.frame=0,i.index=-1,i}return r.prototype.flush=function(){for(var t=this,n=t.actions,i=t.maxFrames,o,a;(a=n[0])&&a.delay<=i&&(n.shift(),this.frame=a.delay,!(o=a.execute(a.state,a.delay))););if(o){for(;a=n.shift();)a.unsubscribe();throw o}},r.frameTimeFactor=10,r}(SP.AsyncScheduler);Nn.VirtualTimeScheduler=PP;var ny=function(e){ry(r,e);function r(t,n,i){i===void 0&&(i=t.index+=1);var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o.index=i,o.active=!0,o.index=t.index=i,o}return r.prototype.schedule=function(t,n){if(n===void 0&&(n=0),Number.isFinite(n)){if(!this.id)return e.prototype.schedule.call(this,t,n);this.active=!1;var i=new r(this.scheduler,this.work);return this.add(i),i.schedule(t,n)}else return TP.Subscription.EMPTY},r.prototype.requestAsyncId=function(t,n,i){i===void 0&&(i=0),this.delay=t.frame+i;var o=t.actions;return o.push(this),o.sort(r.sortActions),1},r.prototype.recycleAsyncId=function(t,n,i){},r.prototype._execute=function(t,n){if(this.active===!0)return e.prototype._execute.call(this,t,n)},r.sortActions=function(t,n){return t.delay===n.delay?t.index===n.index?0:t.index>n.index?1:-1:t.delay>n.delay?1:-1},r}(wP.AsyncAction);Nn.VirtualAction=ny;var Rs={},ft={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=void 0;var r=se;e.EMPTY=new r.Observable(function(i){return i.complete()});function t(i){return i?n(i):e.EMPTY}e.empty=t;function n(i){return new r.Observable(function(o){return i.schedule(function(){return o.complete()})})}})(ft);var Hn={},Ie={},en={};Object.defineProperty(en,"__esModule",{value:!0});en.isScheduler=void 0;var CP=ue;function RP(e){return e&&CP.isFunction(e.schedule)}en.isScheduler=RP;Object.defineProperty(Ie,"__esModule",{value:!0});Ie.popNumber=Ie.popScheduler=Ie.popResultSelector=void 0;var IP=ue,AP=en;function Vd(e){return e[e.length-1]}function jP(e){return IP.isFunction(Vd(e))?e.pop():void 0}Ie.popResultSelector=jP;function MP(e){return AP.isScheduler(Vd(e))?e.pop():void 0}Ie.popScheduler=MP;function NP(e,r){return typeof Vd(e)=="number"?e.pop():r}Ie.popNumber=NP;var _t={},vo={},Is={},F={},zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.isArrayLike=void 0;zn.isArrayLike=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};var po={};Object.defineProperty(po,"__esModule",{value:!0});po.isPromise=void 0;var $P=ue;function kP(e){return $P.isFunction(e==null?void 0:e.then)}po.isPromise=kP;var bo={};Object.defineProperty(bo,"__esModule",{value:!0});bo.isInteropObservable=void 0;var DP=Xr,LP=ue;function UP(e){return LP.isFunction(e[DP.observable])}bo.isInteropObservable=UP;var yo={};Object.defineProperty(yo,"__esModule",{value:!0});yo.isAsyncIterable=void 0;var FP=ue;function BP(e){return Symbol.asyncIterator&&FP.isFunction(e==null?void 0:e[Symbol.asyncIterator])}yo.isAsyncIterable=BP;var mo={};Object.defineProperty(mo,"__esModule",{value:!0});mo.createInvalidObservableTypeError=void 0;function WP(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}mo.createInvalidObservableTypeError=WP;var go={},Vr={};Object.defineProperty(Vr,"__esModule",{value:!0});Vr.iterator=Vr.getSymbolIterator=void 0;function iy(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}Vr.getSymbolIterator=iy;Vr.iterator=iy();Object.defineProperty(go,"__esModule",{value:!0});go.isIterable=void 0;var xP=Vr,VP=ue;function qP(e){return VP.isFunction(e==null?void 0:e[xP.iterator])}go.isIterable=qP;var Jt={},HP=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Pn=f&&f.__await||function(e){return this instanceof Pn?(this.v=e,this):new Pn(e)},zP=f&&f.__asyncGenerator||function(e,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(e,r||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(v){n[v]&&(i[v]=function(b){return new Promise(function(m,E){o.push([v,b,m,E])>1||s(v,b)})})}function s(v,b){try{c(n[v](b))}catch(m){h(o[0][3],m)}}function c(v){v.value instanceof Pn?Promise.resolve(v.value.v).then(u,l):h(o[0][2],v)}function u(v){s("next",v)}function l(v){s("throw",v)}function h(v,b){v(b),o.shift(),o.length&&s(o[0][0],o[0][1])}};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.isReadableStreamLike=Jt.readableStreamLikeToAsyncGenerator=void 0;var GP=ue;function YP(e){return zP(this,arguments,function(){var t,n,i,o;return HP(this,function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Pn(t.read())];case 3:return n=a.sent(),i=n.value,o=n.done,o?[4,Pn(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Pn(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}Jt.readableStreamLikeToAsyncGenerator=YP;function KP(e){return GP.isFunction(e==null?void 0:e.getReader)}Jt.isReadableStreamLike=KP;var ZP=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},QP=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},XP=f&&f.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e[Symbol.asyncIterator],t;return r?r.call(e):(e=typeof Xf=="function"?Xf(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=e[o]&&function(a){return new Promise(function(s,c){a=e[o](a),i(s,c,a.done,a.value)})}}function i(o,a,s,c){Promise.resolve(c).then(function(u){o({value:u,done:s})},a)}},Xf=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(F,"__esModule",{value:!0});F.fromReadableStreamLike=F.fromAsyncIterable=F.fromIterable=F.fromPromise=F.fromArrayLike=F.fromInteropObservable=F.innerFrom=void 0;var JP=zn,eC=po,Gn=se,tC=bo,rC=yo,nC=mo,iC=go,oy=Jt,oC=ue,aC=lo,uC=Xr;function sC(e){if(e instanceof Gn.Observable)return e;if(e!=null){if(tC.isInteropObservable(e))return ay(e);if(JP.isArrayLike(e))return uy(e);if(eC.isPromise(e))return sy(e);if(rC.isAsyncIterable(e))return qd(e);if(iC.isIterable(e))return cy(e);if(oy.isReadableStreamLike(e))return ly(e)}throw nC.createInvalidObservableTypeError(e)}F.innerFrom=sC;function ay(e){return new Gn.Observable(function(r){var t=e[uC.observable]();if(oC.isFunction(t.subscribe))return t.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}F.fromInteropObservable=ay;function uy(e){return new Gn.Observable(function(r){for(var t=0;t<e.length&&!r.closed;t++)r.next(e[t]);r.complete()})}F.fromArrayLike=uy;function sy(e){return new Gn.Observable(function(r){e.then(function(t){r.closed||(r.next(t),r.complete())},function(t){return r.error(t)}).then(null,aC.reportUnhandledError)})}F.fromPromise=sy;function cy(e){return new Gn.Observable(function(r){var t,n;try{for(var i=Xf(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(r.next(a),r.closed)return}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}r.complete()})}F.fromIterable=cy;function qd(e){return new Gn.Observable(function(r){cC(e,r).catch(function(t){return r.error(t)})})}F.fromAsyncIterable=qd;function ly(e){return qd(oy.readableStreamLikeToAsyncGenerator(e))}F.fromReadableStreamLike=ly;function cC(e,r){var t,n,i,o;return ZP(this,void 0,void 0,function(){var a,s;return QP(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),t=XP(e),c.label=1;case 1:return[4,t.next()];case 2:if(n=c.sent(),!!n.done)return[3,4];if(a=n.value,r.next(a),r.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=c.sent(),i={error:s},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(o=t.return)?[4,o.call(t)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return r.complete(),[2]}})})}var lr={},vt={};Object.defineProperty(vt,"__esModule",{value:!0});vt.executeSchedule=void 0;function lC(e,r,t,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var o=r.schedule(function(){t(),i?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(o),!i)return o}vt.executeSchedule=lC;Object.defineProperty(lr,"__esModule",{value:!0});lr.observeOn=void 0;var sf=vt,fC=N,dC=D;function hC(e,r){return r===void 0&&(r=0),fC.operate(function(t,n){t.subscribe(dC.createOperatorSubscriber(n,function(i){return sf.executeSchedule(n,e,function(){return n.next(i)},r)},function(){return sf.executeSchedule(n,e,function(){return n.complete()},r)},function(i){return sf.executeSchedule(n,e,function(){return n.error(i)},r)}))})}lr.observeOn=hC;var fr={};Object.defineProperty(fr,"__esModule",{value:!0});fr.subscribeOn=void 0;var _C=N;function vC(e,r){return r===void 0&&(r=0),_C.operate(function(t,n){n.add(e.schedule(function(){return t.subscribe(n)},r))})}fr.subscribeOn=vC;Object.defineProperty(Is,"__esModule",{value:!0});Is.scheduleObservable=void 0;var pC=F,bC=lr,yC=fr;function mC(e,r){return pC.innerFrom(e).pipe(yC.subscribeOn(r),bC.observeOn(r))}Is.scheduleObservable=mC;var As={};Object.defineProperty(As,"__esModule",{value:!0});As.schedulePromise=void 0;var gC=F,OC=lr,EC=fr;function wC(e,r){return gC.innerFrom(e).pipe(EC.subscribeOn(r),OC.observeOn(r))}As.schedulePromise=wC;var js={};Object.defineProperty(js,"__esModule",{value:!0});js.scheduleArray=void 0;var TC=se;function SC(e,r){return new TC.Observable(function(t){var n=0;return r.schedule(function(){n===e.length?t.complete():(t.next(e[n++]),t.closed||this.schedule())})})}js.scheduleArray=SC;var Oo={};Object.defineProperty(Oo,"__esModule",{value:!0});Oo.scheduleIterable=void 0;var PC=se,CC=Vr,RC=ue,O_=vt;function IC(e,r){return new PC.Observable(function(t){var n;return O_.executeSchedule(t,r,function(){n=e[CC.iterator](),O_.executeSchedule(t,r,function(){var i,o,a;try{i=n.next(),o=i.value,a=i.done}catch(s){t.error(s);return}a?t.complete():t.next(o)},0,!0)}),function(){return RC.isFunction(n==null?void 0:n.return)&&n.return()}})}Oo.scheduleIterable=IC;var Eo={};Object.defineProperty(Eo,"__esModule",{value:!0});Eo.scheduleAsyncIterable=void 0;var AC=se,E_=vt;function jC(e,r){if(!e)throw new Error("Iterable cannot be null");return new AC.Observable(function(t){E_.executeSchedule(t,r,function(){var n=e[Symbol.asyncIterator]();E_.executeSchedule(t,r,function(){n.next().then(function(i){i.done?t.complete():t.next(i.value)})},0,!0)})})}Eo.scheduleAsyncIterable=jC;var Ms={};Object.defineProperty(Ms,"__esModule",{value:!0});Ms.scheduleReadableStreamLike=void 0;var MC=Eo,NC=Jt;function $C(e,r){return MC.scheduleAsyncIterable(NC.readableStreamLikeToAsyncGenerator(e),r)}Ms.scheduleReadableStreamLike=$C;Object.defineProperty(vo,"__esModule",{value:!0});vo.scheduled=void 0;var kC=Is,DC=As,LC=js,UC=Oo,FC=Eo,BC=bo,WC=po,xC=zn,VC=go,qC=yo,HC=mo,zC=Jt,GC=Ms;function YC(e,r){if(e!=null){if(BC.isInteropObservable(e))return kC.scheduleObservable(e,r);if(xC.isArrayLike(e))return LC.scheduleArray(e,r);if(WC.isPromise(e))return DC.schedulePromise(e,r);if(qC.isAsyncIterable(e))return FC.scheduleAsyncIterable(e,r);if(VC.isIterable(e))return UC.scheduleIterable(e,r);if(zC.isReadableStreamLike(e))return GC.scheduleReadableStreamLike(e,r)}throw HC.createInvalidObservableTypeError(e)}vo.scheduled=YC;Object.defineProperty(_t,"__esModule",{value:!0});_t.from=void 0;var KC=vo,ZC=F;function QC(e,r){return r?KC.scheduled(e,r):ZC.innerFrom(e)}_t.from=QC;Object.defineProperty(Hn,"__esModule",{value:!0});Hn.of=void 0;var XC=Ie,JC=_t;function eR(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=XC.popScheduler(e);return JC.from(e,t)}Hn.of=eR;var wo={};Object.defineProperty(wo,"__esModule",{value:!0});wo.throwError=void 0;var tR=se,rR=ue;function nR(e,r){var t=rR.isFunction(e)?e:function(){return e},n=function(i){return i.error(t())};return new tR.Observable(r?function(i){return r.schedule(n,0,i)}:n)}wo.throwError=nR;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.observeNotification=e.Notification=e.NotificationKind=void 0;var r=ft,t=Hn,n=wo,i=ue;(function(s){s.NEXT="N",s.ERROR="E",s.COMPLETE="C"})(e.NotificationKind||(e.NotificationKind={}));var o=function(){function s(c,u,l){this.kind=c,this.value=u,this.error=l,this.hasValue=c==="N"}return s.prototype.observe=function(c){return a(this,c)},s.prototype.do=function(c,u,l){var h=this,v=h.kind,b=h.value,m=h.error;return v==="N"?c==null?void 0:c(b):v==="E"?u==null?void 0:u(m):l==null?void 0:l()},s.prototype.accept=function(c,u,l){var h;return i.isFunction((h=c)===null||h===void 0?void 0:h.next)?this.observe(c):this.do(c,u,l)},s.prototype.toObservable=function(){var c=this,u=c.kind,l=c.value,h=c.error,v=u==="N"?t.of(l):u==="E"?n.throwError(function(){return h}):u==="C"?r.EMPTY:0;if(!v)throw new TypeError("Unexpected notification kind "+u);return v},s.createNext=function(c){return new s("N",c)},s.createError=function(c){return new s("E",void 0,c)},s.createComplete=function(){return s.completeNotification},s.completeNotification=new s("C"),s}();e.Notification=o;function a(s,c){var u,l,h,v=s,b=v.kind,m=v.value,E=v.error;if(typeof b!="string")throw new TypeError('Invalid notification, missing "kind"');b==="N"?(u=c.next)===null||u===void 0||u.call(c,m):b==="E"?(l=c.error)===null||l===void 0||l.call(c,E):(h=c.complete)===null||h===void 0||h.call(c)}e.observeNotification=a})(Rs);var Ns={};Object.defineProperty(Ns,"__esModule",{value:!0});Ns.isObservable=void 0;var iR=se,w_=ue;function oR(e){return!!e&&(e instanceof iR.Observable||w_.isFunction(e.lift)&&w_.isFunction(e.subscribe))}Ns.isObservable=oR;var $s={},wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.EmptyError=void 0;var aR=Et;wt.EmptyError=aR.createErrorClass(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});Object.defineProperty($s,"__esModule",{value:!0});$s.lastValueFrom=void 0;var uR=wt;function sR(e,r){var t=typeof r=="object";return new Promise(function(n,i){var o=!1,a;e.subscribe({next:function(s){a=s,o=!0},error:i,complete:function(){o?n(a):t?n(r.defaultValue):i(new uR.EmptyError)}})})}$s.lastValueFrom=sR;var ks={};Object.defineProperty(ks,"__esModule",{value:!0});ks.firstValueFrom=void 0;var cR=wt,lR=Wn;function fR(e,r){var t=typeof r=="object";return new Promise(function(n,i){var o=new lR.SafeSubscriber({next:function(a){n(a),o.unsubscribe()},error:i,complete:function(){t?n(r.defaultValue):i(new cR.EmptyError)}});e.subscribe(o)})}ks.firstValueFrom=fR;var To={};Object.defineProperty(To,"__esModule",{value:!0});To.ArgumentOutOfRangeError=void 0;var dR=Et;To.ArgumentOutOfRangeError=dR.createErrorClass(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}});var So={};Object.defineProperty(So,"__esModule",{value:!0});So.NotFoundError=void 0;var hR=Et;So.NotFoundError=hR.createErrorClass(function(e){return function(t){e(this),this.name="NotFoundError",this.message=t}});var Po={};Object.defineProperty(Po,"__esModule",{value:!0});Po.SequenceError=void 0;var _R=Et;Po.SequenceError=_R.createErrorClass(function(e){return function(t){e(this),this.name="SequenceError",this.message=t}});var Ki={},Yn={};Object.defineProperty(Yn,"__esModule",{value:!0});Yn.isValidDate=void 0;function vR(e){return e instanceof Date&&!isNaN(e)}Yn.isValidDate=vR;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.timeout=e.TimeoutError=void 0;var r=Ze,t=Yn,n=N,i=F,o=Et,a=D,s=vt;e.TimeoutError=o.createErrorClass(function(l){return function(v){v===void 0&&(v=null),l(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=v}});function c(l,h){var v=t.isValidDate(l)?{first:l}:typeof l=="number"?{each:l}:l,b=v.first,m=v.each,E=v.with,T=E===void 0?u:E,S=v.scheduler,R=S===void 0?h??r.asyncScheduler:S,I=v.meta,A=I===void 0?null:I;if(b==null&&m==null)throw new TypeError("No timeout provided.");return n.operate(function(j,k){var M,q,ne=null,ie=0,_e=function(X){q=s.executeSchedule(k,R,function(){try{M.unsubscribe(),i.innerFrom(T({meta:A,lastValue:ne,seen:ie})).subscribe(k)}catch(de){k.error(de)}},X)};M=j.subscribe(a.createOperatorSubscriber(k,function(X){q==null||q.unsubscribe(),ie++,k.next(ne=X),m>0&&_e(m)},void 0,void 0,function(){q!=null&&q.closed||q==null||q.unsubscribe(),ne=null})),!ie&&_e(b!=null?typeof b=="number"?b:+b-R.now():m)})}e.timeout=c;function u(l){throw new e.TimeoutError(l)}})(Ki);var Ds={},Co={},Tt={},pt={};Object.defineProperty(pt,"__esModule",{value:!0});pt.map=void 0;var pR=N,bR=D;function yR(e,r){return pR.operate(function(t,n){var i=0;t.subscribe(bR.createOperatorSubscriber(n,function(o){n.next(e.call(r,o,i++))}))})}pt.map=yR;var mR=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},gR=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.mapOneOrManyArgs=void 0;var OR=pt,ER=Array.isArray;function wR(e,r){return ER(r)?e.apply(void 0,gR([],mR(r))):e(r)}function TR(e){return OR.map(function(r){return wR(e,r)})}Tt.mapOneOrManyArgs=TR;var SR=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},T_=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(Co,"__esModule",{value:!0});Co.bindCallbackInternals=void 0;var PR=en,CR=se,RR=fr,IR=Tt,AR=lr,jR=qn;function Jf(e,r,t,n){if(t)if(PR.isScheduler(t))n=t;else return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return Jf(e,r,n).apply(this,i).pipe(IR.mapOneOrManyArgs(t))};return n?function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return Jf(e,r).apply(this,i).pipe(RR.subscribeOn(n),AR.observeOn(n))}:function(){for(var i=this,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var s=new jR.AsyncSubject,c=!0;return new CR.Observable(function(u){var l=s.subscribe(u);if(c){c=!1;var h=!1,v=!1;r.apply(i,T_(T_([],SR(o)),[function(){for(var b=[],m=0;m<arguments.length;m++)b[m]=arguments[m];if(e){var E=b.shift();if(E!=null){s.error(E);return}}s.next(1<b.length?b:b[0]),v=!0,h&&s.complete()}])),v&&s.complete(),h=!0}return l})}}Co.bindCallbackInternals=Jf;Object.defineProperty(Ds,"__esModule",{value:!0});Ds.bindCallback=void 0;var MR=Co;function NR(e,r,t){return MR.bindCallbackInternals(!1,e,r,t)}Ds.bindCallback=NR;var Ls={};Object.defineProperty(Ls,"__esModule",{value:!0});Ls.bindNodeCallback=void 0;var $R=Co;function kR(e,r,t){return $R.bindCallbackInternals(!0,e,r,t)}Ls.bindNodeCallback=kR;var er={},Ro={};Object.defineProperty(Ro,"__esModule",{value:!0});Ro.argsArgArrayOrObject=void 0;var DR=Array.isArray,LR=Object.getPrototypeOf,UR=Object.prototype,FR=Object.keys;function BR(e){if(e.length===1){var r=e[0];if(DR(r))return{args:r,keys:null};if(WR(r)){var t=FR(r);return{args:t.map(function(n){return r[n]}),keys:t}}}return{args:e,keys:null}}Ro.argsArgArrayOrObject=BR;function WR(e){return e&&typeof e=="object"&&LR(e)===UR}var Io={};Object.defineProperty(Io,"__esModule",{value:!0});Io.createObject=void 0;function xR(e,r){return e.reduce(function(t,n,i){return t[n]=r[i],t},{})}Io.createObject=xR;Object.defineProperty(er,"__esModule",{value:!0});er.combineLatestInit=er.combineLatest=void 0;var VR=se,qR=Ro,fy=_t,dy=Me,HR=Tt,S_=Ie,zR=Io,GR=D,YR=vt;function KR(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=S_.popScheduler(e),n=S_.popResultSelector(e),i=qR.argsArgArrayOrObject(e),o=i.args,a=i.keys;if(o.length===0)return fy.from([],t);var s=new VR.Observable(hy(o,t,a?function(c){return zR.createObject(a,c)}:dy.identity));return n?s.pipe(HR.mapOneOrManyArgs(n)):s}er.combineLatest=KR;function hy(e,r,t){return t===void 0&&(t=dy.identity),function(n){P_(r,function(){for(var i=e.length,o=new Array(i),a=i,s=i,c=function(l){P_(r,function(){var h=fy.from(e[l],r),v=!1;h.subscribe(GR.createOperatorSubscriber(n,function(b){o[l]=b,v||(v=!0,s--),s||n.next(t(o.slice()))},function(){--a||n.complete()}))},n)},u=0;u<i;u++)c(u)},n)}}er.combineLatestInit=hy;function P_(e,r,t){e?YR.executeSchedule(t,e,r):r()}var tn={},rn={},dr={},ot={},Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.mergeInternals=void 0;var ZR=F,QR=vt,C_=D;function XR(e,r,t,n,i,o,a,s){var c=[],u=0,l=0,h=!1,v=function(){h&&!c.length&&!u&&r.complete()},b=function(E){return u<n?m(E):c.push(E)},m=function(E){o&&r.next(E),u++;var T=!1;ZR.innerFrom(t(E,l++)).subscribe(C_.createOperatorSubscriber(r,function(S){i==null||i(S),o?b(S):r.next(S)},function(){T=!0},void 0,function(){if(T)try{u--;for(var S=function(){var R=c.shift();a?QR.executeSchedule(r,a,function(){return m(R)}):m(R)};c.length&&u<n;)S();v()}catch(R){r.error(R)}}))};return e.subscribe(C_.createOperatorSubscriber(r,b,function(){h=!0,v()})),function(){s==null||s()}}Kn.mergeInternals=XR;Object.defineProperty(ot,"__esModule",{value:!0});ot.mergeMap=void 0;var JR=pt,eI=F,tI=N,rI=Kn,nI=ue;function _y(e,r,t){return t===void 0&&(t=1/0),nI.isFunction(r)?_y(function(n,i){return JR.map(function(o,a){return r(n,o,i,a)})(eI.innerFrom(e(n,i)))},t):(typeof r=="number"&&(t=r),tI.operate(function(n,i){return rI.mergeInternals(n,i,e,t)}))}ot.mergeMap=_y;Object.defineProperty(dr,"__esModule",{value:!0});dr.mergeAll=void 0;var iI=ot,oI=Me;function aI(e){return e===void 0&&(e=1/0),iI.mergeMap(oI.identity,e)}dr.mergeAll=aI;Object.defineProperty(rn,"__esModule",{value:!0});rn.concatAll=void 0;var uI=dr;function sI(){return uI.mergeAll(1)}rn.concatAll=sI;Object.defineProperty(tn,"__esModule",{value:!0});tn.concat=void 0;var cI=rn,lI=Ie,fI=_t;function dI(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return cI.concatAll()(fI.from(e,lI.popScheduler(e)))}tn.concat=dI;var Us={},nn={};Object.defineProperty(nn,"__esModule",{value:!0});nn.defer=void 0;var hI=se,_I=F;function vI(e){return new hI.Observable(function(r){_I.innerFrom(e()).subscribe(r)})}nn.defer=vI;Object.defineProperty(Us,"__esModule",{value:!0});Us.connectable=void 0;var pI=Ce,bI=se,yI=nn,mI={connector:function(){return new pI.Subject},resetOnDisconnect:!0};function gI(e,r){r===void 0&&(r=mI);var t=null,n=r.connector,i=r.resetOnDisconnect,o=i===void 0?!0:i,a=n(),s=new bI.Observable(function(c){return a.subscribe(c)});return s.connect=function(){return(!t||t.closed)&&(t=yI.defer(function(){return e}).subscribe(a),o&&t.add(function(){return a=n()})),t},s}Us.connectable=gI;var Fs={};Object.defineProperty(Fs,"__esModule",{value:!0});Fs.forkJoin=void 0;var OI=se,EI=Ro,wI=F,TI=Ie,SI=D,PI=Tt,CI=Io;function RI(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=TI.popResultSelector(e),n=EI.argsArgArrayOrObject(e),i=n.args,o=n.keys,a=new OI.Observable(function(s){var c=i.length;if(!c){s.complete();return}for(var u=new Array(c),l=c,h=c,v=function(m){var E=!1;wI.innerFrom(i[m]).subscribe(SI.createOperatorSubscriber(s,function(T){E||(E=!0,h--),u[m]=T},function(){return l--},void 0,function(){(!l||!E)&&(h||s.next(o?CI.createObject(o,u):u),s.complete())}))},b=0;b<c;b++)v(b)});return t?a.pipe(PI.mapOneOrManyArgs(t)):a}Fs.forkJoin=RI;var Bs={},II=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(Bs,"__esModule",{value:!0});Bs.fromEvent=void 0;var AI=F,jI=se,MI=ot,NI=zn,qr=ue,$I=Tt,kI=["addListener","removeListener"],DI=["addEventListener","removeEventListener"],LI=["on","off"];function ed(e,r,t,n){if(qr.isFunction(t)&&(n=t,t=void 0),n)return ed(e,r,t).pipe($I.mapOneOrManyArgs(n));var i=II(BI(e)?DI.map(function(s){return function(c){return e[s](r,c,t)}}):UI(e)?kI.map(R_(e,r)):FI(e)?LI.map(R_(e,r)):[],2),o=i[0],a=i[1];if(!o&&NI.isArrayLike(e))return MI.mergeMap(function(s){return ed(s,r,t)})(AI.innerFrom(e));if(!o)throw new TypeError("Invalid event target");return new jI.Observable(function(s){var c=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return s.next(1<u.length?u:u[0])};return o(c),function(){return a(c)}})}Bs.fromEvent=ed;function R_(e,r){return function(t){return function(n){return e[t](r,n)}}}function UI(e){return qr.isFunction(e.addListener)&&qr.isFunction(e.removeListener)}function FI(e){return qr.isFunction(e.on)&&qr.isFunction(e.off)}function BI(e){return qr.isFunction(e.addEventListener)&&qr.isFunction(e.removeEventListener)}var Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.fromEventPattern=void 0;var WI=se,xI=ue,VI=Tt;function vy(e,r,t){return t?vy(e,r).pipe(VI.mapOneOrManyArgs(t)):new WI.Observable(function(n){var i=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return n.next(a.length===1?a[0]:a)},o=e(i);return xI.isFunction(r)?function(){return r(i,o)}:void 0})}Ws.fromEventPattern=vy;var xs={},qI=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(xs,"__esModule",{value:!0});xs.generate=void 0;var I_=Me,HI=en,zI=nn,GI=Oo;function YI(e,r,t,n,i){var o,a,s,c;arguments.length===1?(o=e,c=o.initialState,r=o.condition,t=o.iterate,a=o.resultSelector,s=a===void 0?I_.identity:a,i=o.scheduler):(c=e,!n||HI.isScheduler(n)?(s=I_.identity,i=n):s=n);function u(){var l;return qI(this,function(h){switch(h.label){case 0:l=c,h.label=1;case 1:return!r||r(l)?[4,s(l)]:[3,4];case 2:h.sent(),h.label=3;case 3:return l=t(l),[3,1];case 4:return[2]}})}return zI.defer(i?function(){return GI.scheduleIterable(u(),i)}:u)}xs.generate=YI;var Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.iif=void 0;var KI=nn;function ZI(e,r,t){return KI.defer(function(){return e()?r:t})}Vs.iif=ZI;var Ao={},St={};Object.defineProperty(St,"__esModule",{value:!0});St.timer=void 0;var QI=se,XI=Ze,JI=en,eA=Yn;function tA(e,r,t){e===void 0&&(e=0),t===void 0&&(t=XI.async);var n=-1;return r!=null&&(JI.isScheduler(r)?t=r:n=r),new QI.Observable(function(i){var o=eA.isValidDate(e)?+e-t.now():e;o<0&&(o=0);var a=0;return t.schedule(function(){i.closed||(i.next(a++),0<=n?this.schedule(void 0,n):i.complete())},o)})}St.timer=tA;Object.defineProperty(Ao,"__esModule",{value:!0});Ao.interval=void 0;var rA=Ze,nA=St;function iA(e,r){return e===void 0&&(e=0),r===void 0&&(r=rA.asyncScheduler),e<0&&(e=0),nA.timer(e,e,r)}Ao.interval=iA;var qs={};Object.defineProperty(qs,"__esModule",{value:!0});qs.merge=void 0;var oA=dr,aA=F,uA=ft,A_=Ie,sA=_t;function cA(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=A_.popScheduler(e),n=A_.popNumber(e,1/0),i=e;return i.length?i.length===1?aA.innerFrom(i[0]):oA.mergeAll(n)(sA.from(i,t)):uA.EMPTY}qs.merge=cA;var td={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.never=e.NEVER=void 0;var r=se,t=je;e.NEVER=new r.Observable(t.noop);function n(){return e.NEVER}e.never=n})(td);var jo={},Lt={};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.argsOrArgArray=void 0;var lA=Array.isArray;function fA(e){return e.length===1&&lA(e[0])?e[0]:e}Lt.argsOrArgArray=fA;Object.defineProperty(jo,"__esModule",{value:!0});jo.onErrorResumeNext=void 0;var dA=se,hA=Lt,_A=D,j_=je,vA=F;function pA(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=hA.argsOrArgArray(e);return new dA.Observable(function(n){var i=0,o=function(){if(i<t.length){var a=void 0;try{a=vA.innerFrom(t[i++])}catch{o();return}var s=new _A.OperatorSubscriber(n,void 0,j_.noop,j_.noop);a.subscribe(s),s.add(o)}else n.complete()};o()})}jo.onErrorResumeNext=pA;var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.pairs=void 0;var bA=_t;function yA(e,r){return bA.from(Object.entries(e),r)}Hs.pairs=yA;var zs={},Mo={};Object.defineProperty(Mo,"__esModule",{value:!0});Mo.not=void 0;function mA(e,r){return function(t,n){return!e.call(r,t,n)}}Mo.not=mA;var bt={};Object.defineProperty(bt,"__esModule",{value:!0});bt.filter=void 0;var gA=N,OA=D;function EA(e,r){return gA.operate(function(t,n){var i=0;t.subscribe(OA.createOperatorSubscriber(n,function(o){return e.call(r,o,i++)&&n.next(o)}))})}bt.filter=EA;Object.defineProperty(zs,"__esModule",{value:!0});zs.partition=void 0;var wA=Mo,M_=bt,N_=F;function TA(e,r,t){return[M_.filter(r,t)(N_.innerFrom(e)),M_.filter(wA.not(r,t))(N_.innerFrom(e))]}zs.partition=TA;var Hr={};Object.defineProperty(Hr,"__esModule",{value:!0});Hr.raceInit=Hr.race=void 0;var SA=se,py=F,PA=Lt,CA=D;function RA(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e=PA.argsOrArgArray(e),e.length===1?py.innerFrom(e[0]):new SA.Observable(by(e))}Hr.race=RA;function by(e){return function(r){for(var t=[],n=function(o){t.push(py.innerFrom(e[o]).subscribe(CA.createOperatorSubscriber(r,function(a){if(t){for(var s=0;s<t.length;s++)s!==o&&t[s].unsubscribe();t=null}r.next(a)})))},i=0;t&&!r.closed&&i<e.length;i++)n(i)}}Hr.raceInit=by;var Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.range=void 0;var IA=se,AA=ft;function jA(e,r,t){if(r==null&&(r=e,e=0),r<=0)return AA.EMPTY;var n=r+e;return new IA.Observable(t?function(i){var o=e;return t.schedule(function(){o<n?(i.next(o++),this.schedule()):i.complete()})}:function(i){for(var o=e;o<n&&!i.closed;)i.next(o++);i.complete()})}Gs.range=jA;var Ys={};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.using=void 0;var MA=se,NA=F,$A=ft;function kA(e,r){return new MA.Observable(function(t){var n=e(),i=r(n),o=i?NA.innerFrom(i):$A.EMPTY;return o.subscribe(t),function(){n&&n.unsubscribe()}})}Ys.using=kA;var Zn={},DA=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},LA=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(Zn,"__esModule",{value:!0});Zn.zip=void 0;var UA=se,FA=F,BA=Lt,WA=ft,xA=D,VA=Ie;function qA(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=VA.popResultSelector(e),n=BA.argsOrArgArray(e);return n.length?new UA.Observable(function(i){var o=n.map(function(){return[]}),a=n.map(function(){return!1});i.add(function(){o=a=null});for(var s=function(u){FA.innerFrom(n[u]).subscribe(xA.createOperatorSubscriber(i,function(l){if(o[u].push(l),o.every(function(v){return v.length})){var h=o.map(function(v){return v.shift()});i.next(t?t.apply(void 0,LA([],DA(h))):h),o.some(function(v,b){return!v.length&&a[b]})&&i.complete()}},function(){a[u]=!0,!o[u].length&&i.complete()}))},c=0;!i.closed&&c<n.length;c++)s(c);return function(){o=a=null}}):WA.EMPTY}Zn.zip=qA;var yy={};Object.defineProperty(yy,"__esModule",{value:!0});var Qn={};Object.defineProperty(Qn,"__esModule",{value:!0});Qn.audit=void 0;var HA=N,zA=F,$_=D;function GA(e){return HA.operate(function(r,t){var n=!1,i=null,o=null,a=!1,s=function(){if(o==null||o.unsubscribe(),o=null,n){n=!1;var u=i;i=null,t.next(u)}a&&t.complete()},c=function(){o=null,a&&t.complete()};r.subscribe($_.createOperatorSubscriber(t,function(u){n=!0,i=u,o||zA.innerFrom(e(u)).subscribe(o=$_.createOperatorSubscriber(t,s,c))},function(){a=!0,(!n||!o||o.closed)&&t.complete()}))})}Qn.audit=GA;var No={};Object.defineProperty(No,"__esModule",{value:!0});No.auditTime=void 0;var YA=Ze,KA=Qn,ZA=St;function QA(e,r){return r===void 0&&(r=YA.asyncScheduler),KA.audit(function(){return ZA.timer(e,r)})}No.auditTime=QA;var $o={};Object.defineProperty($o,"__esModule",{value:!0});$o.buffer=void 0;var XA=N,JA=je,k_=D,ej=F;function tj(e){return XA.operate(function(r,t){var n=[];return r.subscribe(k_.createOperatorSubscriber(t,function(i){return n.push(i)},function(){t.next(n),t.complete()})),ej.innerFrom(e).subscribe(k_.createOperatorSubscriber(t,function(){var i=n;n=[],t.next(i)},JA.noop)),function(){n=null}})}$o.buffer=tj;var ko={},cf=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ko,"__esModule",{value:!0});ko.bufferCount=void 0;var rj=N,nj=D,ij=ht;function oj(e,r){return r===void 0&&(r=null),r=r??e,rj.operate(function(t,n){var i=[],o=0;t.subscribe(nj.createOperatorSubscriber(n,function(a){var s,c,u,l,h=null;o++%r===0&&i.push([]);try{for(var v=cf(i),b=v.next();!b.done;b=v.next()){var m=b.value;m.push(a),e<=m.length&&(h=h??[],h.push(m))}}catch(S){s={error:S}}finally{try{b&&!b.done&&(c=v.return)&&c.call(v)}finally{if(s)throw s.error}}if(h)try{for(var E=cf(h),T=E.next();!T.done;T=E.next()){var m=T.value;ij.arrRemove(i,m),n.next(m)}}catch(S){u={error:S}}finally{try{T&&!T.done&&(l=E.return)&&l.call(E)}finally{if(u)throw u.error}}},function(){var a,s;try{for(var c=cf(i),u=c.next();!u.done;u=c.next()){var l=u.value;n.next(l)}}catch(h){a={error:h}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}n.complete()},void 0,function(){i=null}))})}ko.bufferCount=oj;var Do={},aj=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Do,"__esModule",{value:!0});Do.bufferTime=void 0;var uj=Ae,sj=N,cj=D,lj=ht,fj=Ze,dj=Ie,D_=vt;function hj(e){for(var r,t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=(r=dj.popScheduler(n))!==null&&r!==void 0?r:fj.asyncScheduler,a=(t=n[0])!==null&&t!==void 0?t:null,s=n[1]||1/0;return sj.operate(function(c,u){var l=[],h=!1,v=function(E){var T=E.buffer,S=E.subs;S.unsubscribe(),lj.arrRemove(l,E),u.next(T),h&&b()},b=function(){if(l){var E=new uj.Subscription;u.add(E);var T=[],S={buffer:T,subs:E};l.push(S),D_.executeSchedule(E,o,function(){return v(S)},e)}};a!==null&&a>=0?D_.executeSchedule(u,o,b,a,!0):h=!0,b();var m=cj.createOperatorSubscriber(u,function(E){var T,S,R=l.slice();try{for(var I=aj(R),A=I.next();!A.done;A=I.next()){var j=A.value,k=j.buffer;k.push(E),s<=k.length&&v(j)}}catch(M){T={error:M}}finally{try{A&&!A.done&&(S=I.return)&&S.call(I)}finally{if(T)throw T.error}}},function(){for(;l!=null&&l.length;)u.next(l.shift().buffer);m==null||m.unsubscribe(),u.complete(),u.unsubscribe()},void 0,function(){return l=null});c.subscribe(m)})}Do.bufferTime=hj;var Lo={},_j=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Lo,"__esModule",{value:!0});Lo.bufferToggle=void 0;var vj=Ae,pj=N,L_=F,lf=D,U_=je,bj=ht;function yj(e,r){return pj.operate(function(t,n){var i=[];L_.innerFrom(e).subscribe(lf.createOperatorSubscriber(n,function(o){var a=[];i.push(a);var s=new vj.Subscription,c=function(){bj.arrRemove(i,a),n.next(a),s.unsubscribe()};s.add(L_.innerFrom(r(o)).subscribe(lf.createOperatorSubscriber(n,c,U_.noop)))},U_.noop)),t.subscribe(lf.createOperatorSubscriber(n,function(o){var a,s;try{for(var c=_j(i),u=c.next();!u.done;u=c.next()){var l=u.value;l.push(o)}}catch(h){a={error:h}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}},function(){for(;i.length>0;)n.next(i.shift());n.complete()}))})}Lo.bufferToggle=yj;var Uo={};Object.defineProperty(Uo,"__esModule",{value:!0});Uo.bufferWhen=void 0;var mj=N,gj=je,F_=D,Oj=F;function Ej(e){return mj.operate(function(r,t){var n=null,i=null,o=function(){i==null||i.unsubscribe();var a=n;n=[],a&&t.next(a),Oj.innerFrom(e()).subscribe(i=F_.createOperatorSubscriber(t,o,gj.noop))};o(),r.subscribe(F_.createOperatorSubscriber(t,function(a){return n==null?void 0:n.push(a)},function(){n&&t.next(n),t.complete()},void 0,function(){return n=i=null}))})}Uo.bufferWhen=Ej;var Fo={};Object.defineProperty(Fo,"__esModule",{value:!0});Fo.catchError=void 0;var wj=F,Tj=D,Sj=N;function my(e){return Sj.operate(function(r,t){var n=null,i=!1,o;n=r.subscribe(Tj.createOperatorSubscriber(t,void 0,void 0,function(a){o=wj.innerFrom(e(a,my(e)(r))),n?(n.unsubscribe(),n=null,o.subscribe(t)):i=!0})),i&&(n.unsubscribe(),n=null,o.subscribe(t))})}Fo.catchError=my;var Bo={},Xn={},Wo={},Jn={},Ut={},xo={};Object.defineProperty(xo,"__esModule",{value:!0});xo.scanInternals=void 0;var Pj=D;function Cj(e,r,t,n,i){return function(o,a){var s=t,c=r,u=0;o.subscribe(Pj.createOperatorSubscriber(a,function(l){var h=u++;c=s?e(c,l,h):(s=!0,l),n&&a.next(c)},i&&function(){s&&a.next(c),a.complete()}))}}xo.scanInternals=Cj;Object.defineProperty(Ut,"__esModule",{value:!0});Ut.reduce=void 0;var Rj=xo,Ij=N;function Aj(e,r){return Ij.operate(Rj.scanInternals(e,r,arguments.length>=2,!1,!0))}Ut.reduce=Aj;Object.defineProperty(Jn,"__esModule",{value:!0});Jn.toArray=void 0;var jj=Ut,Mj=N,Nj=function(e,r){return e.push(r),e};function $j(){return Mj.operate(function(e,r){jj.reduce(Nj,[])(e).subscribe(r)})}Jn.toArray=$j;Object.defineProperty(Wo,"__esModule",{value:!0});Wo.joinAllInternals=void 0;var kj=Me,Dj=Tt,Lj=Dt,Uj=ot,Fj=Jn;function Bj(e,r){return Lj.pipe(Fj.toArray(),Uj.mergeMap(function(t){return e(t)}),r?Dj.mapOneOrManyArgs(r):kj.identity)}Wo.joinAllInternals=Bj;Object.defineProperty(Xn,"__esModule",{value:!0});Xn.combineLatestAll=void 0;var Wj=er,xj=Wo;function Vj(e){return xj.joinAllInternals(Wj.combineLatest,e)}Xn.combineLatestAll=Vj;Object.defineProperty(Bo,"__esModule",{value:!0});Bo.combineAll=void 0;var qj=Xn;Bo.combineAll=qj.combineLatestAll;var Vo={},qo={},B_=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},W_=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(qo,"__esModule",{value:!0});qo.combineLatest=void 0;var Hj=er,zj=N,Gj=Lt,Yj=Tt,Kj=Dt,Zj=Ie;function gy(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Zj.popResultSelector(e);return t?Kj.pipe(gy.apply(void 0,W_([],B_(e))),Yj.mapOneOrManyArgs(t)):zj.operate(function(n,i){Hj.combineLatestInit(W_([n],B_(Gj.argsOrArgArray(e))))(i)})}qo.combineLatest=gy;var Qj=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Xj=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(Vo,"__esModule",{value:!0});Vo.combineLatestWith=void 0;var Jj=qo;function eM(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Jj.combineLatest.apply(void 0,Xj([],Qj(e)))}Vo.combineLatestWith=eM;var ei={};Object.defineProperty(ei,"__esModule",{value:!0});ei.concatMap=void 0;var x_=ot,tM=ue;function rM(e,r){return tM.isFunction(r)?x_.mergeMap(e,r,1):x_.mergeMap(e,1)}ei.concatMap=rM;var Ho={};Object.defineProperty(Ho,"__esModule",{value:!0});Ho.concatMapTo=void 0;var V_=ei,nM=ue;function iM(e,r){return nM.isFunction(r)?V_.concatMap(function(){return e},r):V_.concatMap(function(){return e})}Ho.concatMapTo=iM;var zo={},Go={},oM=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},aM=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(Go,"__esModule",{value:!0});Go.concat=void 0;var uM=N,sM=rn,cM=Ie,lM=_t;function fM(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=cM.popScheduler(e);return uM.operate(function(n,i){sM.concatAll()(lM.from(aM([n],oM(e)),t)).subscribe(i)})}Go.concat=fM;var dM=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},hM=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(zo,"__esModule",{value:!0});zo.concatWith=void 0;var _M=Go;function vM(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return _M.concat.apply(void 0,hM([],dM(e)))}zo.concatWith=vM;var on={},Ks={};Object.defineProperty(Ks,"__esModule",{value:!0});Ks.fromSubscribable=void 0;var pM=se;function bM(e){return new pM.Observable(function(r){return e.subscribe(r)})}Ks.fromSubscribable=bM;Object.defineProperty(on,"__esModule",{value:!0});on.connect=void 0;var yM=Ce,mM=F,gM=N,OM=Ks,EM={connector:function(){return new yM.Subject}};function wM(e,r){r===void 0&&(r=EM);var t=r.connector;return gM.operate(function(n,i){var o=t();mM.innerFrom(e(OM.fromSubscribable(o))).subscribe(i),i.add(n.subscribe(o))})}on.connect=wM;var Yo={};Object.defineProperty(Yo,"__esModule",{value:!0});Yo.count=void 0;var TM=Ut;function SM(e){return TM.reduce(function(r,t,n){return!e||e(t,n)?r+1:r},0)}Yo.count=SM;var Ko={};Object.defineProperty(Ko,"__esModule",{value:!0});Ko.debounce=void 0;var PM=N,CM=je,q_=D,RM=F;function IM(e){return PM.operate(function(r,t){var n=!1,i=null,o=null,a=function(){if(o==null||o.unsubscribe(),o=null,n){n=!1;var s=i;i=null,t.next(s)}};r.subscribe(q_.createOperatorSubscriber(t,function(s){o==null||o.unsubscribe(),n=!0,i=s,o=q_.createOperatorSubscriber(t,a,CM.noop),RM.innerFrom(e(s)).subscribe(o)},function(){a(),t.complete()},void 0,function(){i=o=null}))})}Ko.debounce=IM;var Zo={};Object.defineProperty(Zo,"__esModule",{value:!0});Zo.debounceTime=void 0;var AM=Ze,jM=N,MM=D;function NM(e,r){return r===void 0&&(r=AM.asyncScheduler),jM.operate(function(t,n){var i=null,o=null,a=null,s=function(){if(i){i.unsubscribe(),i=null;var u=o;o=null,n.next(u)}};function c(){var u=a+e,l=r.now();if(l<u){i=this.schedule(void 0,u-l),n.add(i);return}s()}t.subscribe(MM.createOperatorSubscriber(n,function(u){o=u,a=r.now(),i||(i=r.schedule(c,e),n.add(i))},function(){s(),n.complete()},void 0,function(){o=i=null}))})}Zo.debounceTime=NM;var hr={};Object.defineProperty(hr,"__esModule",{value:!0});hr.defaultIfEmpty=void 0;var $M=N,kM=D;function DM(e){return $M.operate(function(r,t){var n=!1;r.subscribe(kM.createOperatorSubscriber(t,function(i){n=!0,t.next(i)},function(){n||t.next(e),t.complete()}))})}hr.defaultIfEmpty=DM;var Qo={},ti={},_r={};Object.defineProperty(_r,"__esModule",{value:!0});_r.take=void 0;var LM=ft,UM=N,FM=D;function BM(e){return e<=0?function(){return LM.EMPTY}:UM.operate(function(r,t){var n=0;r.subscribe(FM.createOperatorSubscriber(t,function(i){++n<=e&&(t.next(i),e<=n&&t.complete())}))})}_r.take=BM;var ri={};Object.defineProperty(ri,"__esModule",{value:!0});ri.ignoreElements=void 0;var WM=N,xM=D,VM=je;function qM(){return WM.operate(function(e,r){e.subscribe(xM.createOperatorSubscriber(r,VM.noop))})}ri.ignoreElements=qM;var ni={};Object.defineProperty(ni,"__esModule",{value:!0});ni.mapTo=void 0;var HM=pt;function zM(e){return HM.map(function(){return e})}ni.mapTo=zM;Object.defineProperty(ti,"__esModule",{value:!0});ti.delayWhen=void 0;var GM=tn,H_=_r,YM=ri,KM=ni,ZM=ot,QM=F;function Oy(e,r){return r?function(t){return GM.concat(r.pipe(H_.take(1),YM.ignoreElements()),t.pipe(Oy(e)))}:ZM.mergeMap(function(t,n){return QM.innerFrom(e(t,n)).pipe(H_.take(1),KM.mapTo(t))})}ti.delayWhen=Oy;Object.defineProperty(Qo,"__esModule",{value:!0});Qo.delay=void 0;var XM=Ze,JM=ti,eN=St;function tN(e,r){r===void 0&&(r=XM.asyncScheduler);var t=eN.timer(e,r);return JM.delayWhen(function(){return t})}Qo.delay=tN;var Xo={};Object.defineProperty(Xo,"__esModule",{value:!0});Xo.dematerialize=void 0;var rN=Rs,nN=N,iN=D;function oN(){return nN.operate(function(e,r){e.subscribe(iN.createOperatorSubscriber(r,function(t){return rN.observeNotification(t,r)}))})}Xo.dematerialize=oN;var Jo={};Object.defineProperty(Jo,"__esModule",{value:!0});Jo.distinct=void 0;var aN=N,z_=D,uN=je,sN=F;function cN(e,r){return aN.operate(function(t,n){var i=new Set;t.subscribe(z_.createOperatorSubscriber(n,function(o){var a=e?e(o):o;i.has(a)||(i.add(a),n.next(o))})),r&&sN.innerFrom(r).subscribe(z_.createOperatorSubscriber(n,function(){return i.clear()},uN.noop))})}Jo.distinct=cN;var ii={};Object.defineProperty(ii,"__esModule",{value:!0});ii.distinctUntilChanged=void 0;var lN=Me,fN=N,dN=D;function hN(e,r){return r===void 0&&(r=lN.identity),e=e??_N,fN.operate(function(t,n){var i,o=!0;t.subscribe(dN.createOperatorSubscriber(n,function(a){var s=r(a);(o||!e(i,s))&&(o=!1,i=s,n.next(a))}))})}ii.distinctUntilChanged=hN;function _N(e,r){return e===r}var ea={};Object.defineProperty(ea,"__esModule",{value:!0});ea.distinctUntilKeyChanged=void 0;var vN=ii;function pN(e,r){return vN.distinctUntilChanged(function(t,n){return r?r(t[e],n[e]):t[e]===n[e]})}ea.distinctUntilKeyChanged=pN;var ta={},vr={};Object.defineProperty(vr,"__esModule",{value:!0});vr.throwIfEmpty=void 0;var bN=wt,yN=N,mN=D;function gN(e){return e===void 0&&(e=ON),yN.operate(function(r,t){var n=!1;r.subscribe(mN.createOperatorSubscriber(t,function(i){n=!0,t.next(i)},function(){return n?t.complete():t.error(e())}))})}vr.throwIfEmpty=gN;function ON(){return new bN.EmptyError}Object.defineProperty(ta,"__esModule",{value:!0});ta.elementAt=void 0;var G_=To,EN=bt,wN=vr,TN=hr,SN=_r;function PN(e,r){if(e<0)throw new G_.ArgumentOutOfRangeError;var t=arguments.length>=2;return function(n){return n.pipe(EN.filter(function(i,o){return o===e}),SN.take(1),t?TN.defaultIfEmpty(r):wN.throwIfEmpty(function(){return new G_.ArgumentOutOfRangeError}))}}ta.elementAt=PN;var ra={},CN=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},RN=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(ra,"__esModule",{value:!0});ra.endWith=void 0;var IN=tn,AN=Hn;function jN(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(t){return IN.concat(t,AN.of.apply(void 0,RN([],CN(e))))}}ra.endWith=jN;var na={};Object.defineProperty(na,"__esModule",{value:!0});na.every=void 0;var MN=N,NN=D;function $N(e,r){return MN.operate(function(t,n){var i=0;t.subscribe(NN.createOperatorSubscriber(n,function(o){e.call(r,o,i++,t)||(n.next(!1),n.complete())},function(){n.next(!0),n.complete()}))})}na.every=$N;var ia={},oi={},ai={};Object.defineProperty(ai,"__esModule",{value:!0});ai.exhaustMap=void 0;var kN=pt,Y_=F,DN=N,K_=D;function Ey(e,r){return r?function(t){return t.pipe(Ey(function(n,i){return Y_.innerFrom(e(n,i)).pipe(kN.map(function(o,a){return r(n,o,i,a)}))}))}:DN.operate(function(t,n){var i=0,o=null,a=!1;t.subscribe(K_.createOperatorSubscriber(n,function(s){o||(o=K_.createOperatorSubscriber(n,void 0,function(){o=null,a&&n.complete()}),Y_.innerFrom(e(s,i++)).subscribe(o))},function(){a=!0,!o&&n.complete()}))})}ai.exhaustMap=Ey;Object.defineProperty(oi,"__esModule",{value:!0});oi.exhaustAll=void 0;var LN=ai,UN=Me;function FN(){return LN.exhaustMap(UN.identity)}oi.exhaustAll=FN;Object.defineProperty(ia,"__esModule",{value:!0});ia.exhaust=void 0;var BN=oi;ia.exhaust=BN.exhaustAll;var oa={};Object.defineProperty(oa,"__esModule",{value:!0});oa.expand=void 0;var WN=N,xN=Kn;function VN(e,r,t){return r===void 0&&(r=1/0),r=(r||0)<1?1/0:r,WN.operate(function(n,i){return xN.mergeInternals(n,i,e,r,void 0,!0,t)})}oa.expand=VN;var aa={};Object.defineProperty(aa,"__esModule",{value:!0});aa.finalize=void 0;var qN=N;function HN(e){return qN.operate(function(r,t){try{r.subscribe(t)}finally{t.add(e)}})}aa.finalize=HN;var tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.createFind=tr.find=void 0;var zN=N,GN=D;function YN(e,r){return zN.operate(wy(e,r,"value"))}tr.find=YN;function wy(e,r,t){var n=t==="index";return function(i,o){var a=0;i.subscribe(GN.createOperatorSubscriber(o,function(s){var c=a++;e.call(r,s,c,i)&&(o.next(n?c:s),o.complete())},function(){o.next(n?-1:void 0),o.complete()}))}}tr.createFind=wy;var ua={};Object.defineProperty(ua,"__esModule",{value:!0});ua.findIndex=void 0;var KN=N,ZN=tr;function QN(e,r){return KN.operate(ZN.createFind(e,r,"index"))}ua.findIndex=QN;var sa={};Object.defineProperty(sa,"__esModule",{value:!0});sa.first=void 0;var XN=wt,JN=bt,e$=_r,t$=hr,r$=vr,n$=Me;function i$(e,r){var t=arguments.length>=2;return function(n){return n.pipe(e?JN.filter(function(i,o){return e(i,o,n)}):n$.identity,e$.take(1),t?t$.defaultIfEmpty(r):r$.throwIfEmpty(function(){return new XN.EmptyError}))}}sa.first=i$;var ca={};Object.defineProperty(ca,"__esModule",{value:!0});ca.groupBy=void 0;var o$=se,a$=F,u$=Ce,s$=N,Z_=D;function c$(e,r,t,n){return s$.operate(function(i,o){var a;!r||typeof r=="function"?a=r:(t=r.duration,a=r.element,n=r.connector);var s=new Map,c=function(m){s.forEach(m),m(o)},u=function(m){return c(function(E){return E.error(m)})},l=0,h=!1,v=new Z_.OperatorSubscriber(o,function(m){try{var E=e(m),T=s.get(E);if(!T){s.set(E,T=n?n():new u$.Subject);var S=b(E,T);if(o.next(S),t){var R=Z_.createOperatorSubscriber(T,function(){T.complete(),R==null||R.unsubscribe()},void 0,void 0,function(){return s.delete(E)});v.add(a$.innerFrom(t(S)).subscribe(R))}}T.next(a?a(m):m)}catch(I){u(I)}},function(){return c(function(m){return m.complete()})},u,function(){return s.clear()},function(){return h=!0,l===0});i.subscribe(v);function b(m,E){var T=new o$.Observable(function(S){l++;var R=E.subscribe(S);return function(){R.unsubscribe(),--l===0&&h&&v.unsubscribe()}});return T.key=m,T}})}ca.groupBy=c$;var la={};Object.defineProperty(la,"__esModule",{value:!0});la.isEmpty=void 0;var l$=N,f$=D;function d$(){return l$.operate(function(e,r){e.subscribe(f$.createOperatorSubscriber(r,function(){r.next(!1),r.complete()},function(){r.next(!0),r.complete()}))})}la.isEmpty=d$;var fa={},ui={},h$=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ui,"__esModule",{value:!0});ui.takeLast=void 0;var _$=ft,v$=N,p$=D;function b$(e){return e<=0?function(){return _$.EMPTY}:v$.operate(function(r,t){var n=[];r.subscribe(p$.createOperatorSubscriber(t,function(i){n.push(i),e<n.length&&n.shift()},function(){var i,o;try{for(var a=h$(n),s=a.next();!s.done;s=a.next()){var c=s.value;t.next(c)}}catch(u){i={error:u}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}t.complete()},void 0,function(){n=null}))})}ui.takeLast=b$;Object.defineProperty(fa,"__esModule",{value:!0});fa.last=void 0;var y$=wt,m$=bt,g$=ui,O$=vr,E$=hr,w$=Me;function T$(e,r){var t=arguments.length>=2;return function(n){return n.pipe(e?m$.filter(function(i,o){return e(i,o,n)}):w$.identity,g$.takeLast(1),t?E$.defaultIfEmpty(r):O$.throwIfEmpty(function(){return new y$.EmptyError}))}}fa.last=T$;var da={};Object.defineProperty(da,"__esModule",{value:!0});da.materialize=void 0;var ff=Rs,S$=N,P$=D;function C$(){return S$.operate(function(e,r){e.subscribe(P$.createOperatorSubscriber(r,function(t){r.next(ff.Notification.createNext(t))},function(){r.next(ff.Notification.createComplete()),r.complete()},function(t){r.next(ff.Notification.createError(t)),r.complete()}))})}da.materialize=C$;var ha={};Object.defineProperty(ha,"__esModule",{value:!0});ha.max=void 0;var R$=Ut,I$=ue;function A$(e){return R$.reduce(I$.isFunction(e)?function(r,t){return e(r,t)>0?r:t}:function(r,t){return r>t?r:t})}ha.max=A$;var _a={};Object.defineProperty(_a,"__esModule",{value:!0});_a.flatMap=void 0;var j$=ot;_a.flatMap=j$.mergeMap;var va={};Object.defineProperty(va,"__esModule",{value:!0});va.mergeMapTo=void 0;var Q_=ot,M$=ue;function N$(e,r,t){return t===void 0&&(t=1/0),M$.isFunction(r)?Q_.mergeMap(function(){return e},r,t):(typeof r=="number"&&(t=r),Q_.mergeMap(function(){return e},t))}va.mergeMapTo=N$;var pa={};Object.defineProperty(pa,"__esModule",{value:!0});pa.mergeScan=void 0;var $$=N,k$=Kn;function D$(e,r,t){return t===void 0&&(t=1/0),$$.operate(function(n,i){var o=r;return k$.mergeInternals(n,i,function(a,s){return e(o,a,s)},t,function(a){o=a},!1,void 0,function(){return o=null})})}pa.mergeScan=D$;var ba={},ya={},L$=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},U$=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(ya,"__esModule",{value:!0});ya.merge=void 0;var F$=N,B$=dr,X_=Ie,W$=_t;function x$(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=X_.popScheduler(e),n=X_.popNumber(e,1/0);return F$.operate(function(i,o){B$.mergeAll(n)(W$.from(U$([i],L$(e)),t)).subscribe(o)})}ya.merge=x$;var V$=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},q$=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(ba,"__esModule",{value:!0});ba.mergeWith=void 0;var H$=ya;function z$(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return H$.merge.apply(void 0,q$([],V$(e)))}ba.mergeWith=z$;var ma={};Object.defineProperty(ma,"__esModule",{value:!0});ma.min=void 0;var G$=Ut,Y$=ue;function K$(e){return G$.reduce(Y$.isFunction(e)?function(r,t){return e(r,t)<0?r:t}:function(r,t){return r<t?r:t})}ma.min=K$;var an={};Object.defineProperty(an,"__esModule",{value:!0});an.multicast=void 0;var Z$=Jr,J_=ue,Q$=on;function X$(e,r){var t=J_.isFunction(e)?e:function(){return e};return J_.isFunction(r)?Q$.connect(r,{connector:t}):function(n){return new Z$.ConnectableObservable(n,t)}}an.multicast=X$;var zr={},J$=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},ek=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(zr,"__esModule",{value:!0});zr.onErrorResumeNext=zr.onErrorResumeNextWith=void 0;var tk=Lt,rk=jo;function Ty(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=tk.argsOrArgArray(e);return function(n){return rk.onErrorResumeNext.apply(void 0,ek([n],J$(t)))}}zr.onErrorResumeNextWith=Ty;zr.onErrorResumeNext=Ty;var ga={};Object.defineProperty(ga,"__esModule",{value:!0});ga.pairwise=void 0;var nk=N,ik=D;function ok(){return nk.operate(function(e,r){var t,n=!1;e.subscribe(ik.createOperatorSubscriber(r,function(i){var o=t;t=i,n&&r.next([o,i]),n=!0}))})}ga.pairwise=ok;var Oa={};Object.defineProperty(Oa,"__esModule",{value:!0});Oa.pluck=void 0;var ak=pt;function uk(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=e.length;if(t===0)throw new Error("list of properties cannot be empty.");return ak.map(function(n){for(var i=n,o=0;o<t;o++){var a=i==null?void 0:i[e[o]];if(typeof a<"u")i=a;else return}return i})}Oa.pluck=uk;var Ea={};Object.defineProperty(Ea,"__esModule",{value:!0});Ea.publish=void 0;var sk=Ce,ck=an,lk=on;function fk(e){return e?function(r){return lk.connect(e)(r)}:function(r){return ck.multicast(new sk.Subject)(r)}}Ea.publish=fk;var wa={};Object.defineProperty(wa,"__esModule",{value:!0});wa.publishBehavior=void 0;var dk=ho,hk=Jr;function _k(e){return function(r){var t=new dk.BehaviorSubject(e);return new hk.ConnectableObservable(r,function(){return t})}}wa.publishBehavior=_k;var Ta={};Object.defineProperty(Ta,"__esModule",{value:!0});Ta.publishLast=void 0;var vk=qn,pk=Jr;function bk(){return function(e){var r=new vk.AsyncSubject;return new pk.ConnectableObservable(e,function(){return r})}}Ta.publishLast=bk;var Sa={};Object.defineProperty(Sa,"__esModule",{value:!0});Sa.publishReplay=void 0;var yk=Vn,mk=an,ev=ue;function gk(e,r,t,n){t&&!ev.isFunction(t)&&(n=t);var i=ev.isFunction(t)?t:void 0;return function(o){return mk.multicast(new yk.ReplaySubject(e,r,n),i)(o)}}Sa.publishReplay=gk;var si={},Ok=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Ek=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(si,"__esModule",{value:!0});si.raceWith=void 0;var wk=Hr,Tk=N,Sk=Me;function Pk(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length?Tk.operate(function(t,n){wk.raceInit(Ek([t],Ok(e)))(n)}):Sk.identity}si.raceWith=Pk;var Pa={};Object.defineProperty(Pa,"__esModule",{value:!0});Pa.repeat=void 0;var Ck=ft,Rk=N,tv=D,Ik=F,Ak=St;function jk(e){var r,t=1/0,n;return e!=null&&(typeof e=="object"?(r=e.count,t=r===void 0?1/0:r,n=e.delay):t=e),t<=0?function(){return Ck.EMPTY}:Rk.operate(function(i,o){var a=0,s,c=function(){if(s==null||s.unsubscribe(),s=null,n!=null){var l=typeof n=="number"?Ak.timer(n):Ik.innerFrom(n(a)),h=tv.createOperatorSubscriber(o,function(){h.unsubscribe(),u()});l.subscribe(h)}else u()},u=function(){var l=!1;s=i.subscribe(tv.createOperatorSubscriber(o,void 0,function(){++a<t?s?c():l=!0:o.complete()})),l&&c()};u()})}Pa.repeat=jk;var Ca={};Object.defineProperty(Ca,"__esModule",{value:!0});Ca.repeatWhen=void 0;var Mk=F,Nk=Ce,$k=N,rv=D;function kk(e){return $k.operate(function(r,t){var n,i=!1,o,a=!1,s=!1,c=function(){return s&&a&&(t.complete(),!0)},u=function(){return o||(o=new Nk.Subject,Mk.innerFrom(e(o)).subscribe(rv.createOperatorSubscriber(t,function(){n?l():i=!0},function(){a=!0,c()}))),o},l=function(){s=!1,n=r.subscribe(rv.createOperatorSubscriber(t,void 0,function(){s=!0,!c()&&u().next()})),i&&(n.unsubscribe(),n=null,i=!1,l())};l()})}Ca.repeatWhen=kk;var Ra={};Object.defineProperty(Ra,"__esModule",{value:!0});Ra.retry=void 0;var Dk=N,nv=D,Lk=Me,Uk=St,Fk=F;function Bk(e){e===void 0&&(e=1/0);var r;e&&typeof e=="object"?r=e:r={count:e};var t=r.count,n=t===void 0?1/0:t,i=r.delay,o=r.resetOnSuccess,a=o===void 0?!1:o;return n<=0?Lk.identity:Dk.operate(function(s,c){var u=0,l,h=function(){var v=!1;l=s.subscribe(nv.createOperatorSubscriber(c,function(b){a&&(u=0),c.next(b)},void 0,function(b){if(u++<n){var m=function(){l?(l.unsubscribe(),l=null,h()):v=!0};if(i!=null){var E=typeof i=="number"?Uk.timer(i):Fk.innerFrom(i(b,u)),T=nv.createOperatorSubscriber(c,function(){T.unsubscribe(),m()},function(){c.complete()});E.subscribe(T)}else m()}else c.error(b)})),v&&(l.unsubscribe(),l=null,h())};h()})}Ra.retry=Bk;var Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});Ia.retryWhen=void 0;var Wk=F,xk=Ce,Vk=N,iv=D;function qk(e){return Vk.operate(function(r,t){var n,i=!1,o,a=function(){n=r.subscribe(iv.createOperatorSubscriber(t,void 0,void 0,function(s){o||(o=new xk.Subject,Wk.innerFrom(e(o)).subscribe(iv.createOperatorSubscriber(t,function(){return n?a():i=!0}))),o&&o.next(s)})),i&&(n.unsubscribe(),n=null,i=!1,a())};a()})}Ia.retryWhen=qk;var ci={};Object.defineProperty(ci,"__esModule",{value:!0});ci.sample=void 0;var Hk=F,zk=N,Gk=je,ov=D;function Yk(e){return zk.operate(function(r,t){var n=!1,i=null;r.subscribe(ov.createOperatorSubscriber(t,function(o){n=!0,i=o})),Hk.innerFrom(e).subscribe(ov.createOperatorSubscriber(t,function(){if(n){n=!1;var o=i;i=null,t.next(o)}},Gk.noop))})}ci.sample=Yk;var Aa={};Object.defineProperty(Aa,"__esModule",{value:!0});Aa.sampleTime=void 0;var Kk=Ze,Zk=ci,Qk=Ao;function Xk(e,r){return r===void 0&&(r=Kk.asyncScheduler),Zk.sample(Qk.interval(e,r))}Aa.sampleTime=Xk;var ja={};Object.defineProperty(ja,"__esModule",{value:!0});ja.scan=void 0;var Jk=N,eD=xo;function tD(e,r){return Jk.operate(eD.scanInternals(e,r,arguments.length>=2,!0))}ja.scan=tD;var Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});Ma.sequenceEqual=void 0;var rD=N,nD=D,iD=F;function oD(e,r){return r===void 0&&(r=function(t,n){return t===n}),rD.operate(function(t,n){var i=av(),o=av(),a=function(c){n.next(c),n.complete()},s=function(c,u){var l=nD.createOperatorSubscriber(n,function(h){var v=u.buffer,b=u.complete;v.length===0?b?a(!1):c.buffer.push(h):!r(h,v.shift())&&a(!1)},function(){c.complete=!0;var h=u.complete,v=u.buffer;h&&a(v.length===0),l==null||l.unsubscribe()});return l};t.subscribe(s(i,o)),iD.innerFrom(e).subscribe(s(o,i))})}Ma.sequenceEqual=oD;function av(){return{buffer:[],complete:!1}}var li={},aD=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},uD=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(li,"__esModule",{value:!0});li.share=void 0;var Sy=F,sD=Ce,Py=Wn,cD=N;function lD(e){e===void 0&&(e={});var r=e.connector,t=r===void 0?function(){return new sD.Subject}:r,n=e.resetOnError,i=n===void 0?!0:n,o=e.resetOnComplete,a=o===void 0?!0:o,s=e.resetOnRefCountZero,c=s===void 0?!0:s;return function(u){var l,h,v,b=0,m=!1,E=!1,T=function(){h==null||h.unsubscribe(),h=void 0},S=function(){T(),l=v=void 0,m=E=!1},R=function(){var I=l;S(),I==null||I.unsubscribe()};return cD.operate(function(I,A){b++,!E&&!m&&T();var j=v=v??t();A.add(function(){b--,b===0&&!E&&!m&&(h=df(R,c))}),j.subscribe(A),!l&&b>0&&(l=new Py.SafeSubscriber({next:function(k){return j.next(k)},error:function(k){E=!0,T(),h=df(S,i,k),j.error(k)},complete:function(){m=!0,T(),h=df(S,a),j.complete()}}),Sy.innerFrom(I).subscribe(l))})(u)}}li.share=lD;function df(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];if(r===!0){e();return}if(r!==!1){var i=new Py.SafeSubscriber({next:function(){i.unsubscribe(),e()}});return Sy.innerFrom(r.apply(void 0,uD([],aD(t)))).subscribe(i)}}var Na={};Object.defineProperty(Na,"__esModule",{value:!0});Na.shareReplay=void 0;var fD=Vn,dD=li;function hD(e,r,t){var n,i,o,a,s=!1;return e&&typeof e=="object"?(n=e.bufferSize,a=n===void 0?1/0:n,i=e.windowTime,r=i===void 0?1/0:i,o=e.refCount,s=o===void 0?!1:o,t=e.scheduler):a=e??1/0,dD.share({connector:function(){return new fD.ReplaySubject(a,r,t)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}Na.shareReplay=hD;var $a={};Object.defineProperty($a,"__esModule",{value:!0});$a.single=void 0;var _D=wt,vD=Po,pD=So,bD=N,yD=D;function mD(e){return bD.operate(function(r,t){var n=!1,i,o=!1,a=0;r.subscribe(yD.createOperatorSubscriber(t,function(s){o=!0,(!e||e(s,a++,r))&&(n&&t.error(new vD.SequenceError("Too many matching values")),n=!0,i=s)},function(){n?(t.next(i),t.complete()):t.error(o?new pD.NotFoundError("No matching values"):new _D.EmptyError)}))})}$a.single=mD;var ka={};Object.defineProperty(ka,"__esModule",{value:!0});ka.skip=void 0;var gD=bt;function OD(e){return gD.filter(function(r,t){return e<=t})}ka.skip=OD;var Da={};Object.defineProperty(Da,"__esModule",{value:!0});Da.skipLast=void 0;var ED=Me,wD=N,TD=D;function SD(e){return e<=0?ED.identity:wD.operate(function(r,t){var n=new Array(e),i=0;return r.subscribe(TD.createOperatorSubscriber(t,function(o){var a=i++;if(a<e)n[a]=o;else{var s=a%e,c=n[s];n[s]=o,t.next(c)}})),function(){n=null}})}Da.skipLast=SD;var La={};Object.defineProperty(La,"__esModule",{value:!0});La.skipUntil=void 0;var PD=N,uv=D,CD=F,RD=je;function ID(e){return PD.operate(function(r,t){var n=!1,i=uv.createOperatorSubscriber(t,function(){i==null||i.unsubscribe(),n=!0},RD.noop);CD.innerFrom(e).subscribe(i),r.subscribe(uv.createOperatorSubscriber(t,function(o){return n&&t.next(o)}))})}La.skipUntil=ID;var Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.skipWhile=void 0;var AD=N,jD=D;function MD(e){return AD.operate(function(r,t){var n=!1,i=0;r.subscribe(jD.createOperatorSubscriber(t,function(o){return(n||(n=!e(o,i++)))&&t.next(o)}))})}Ua.skipWhile=MD;var Fa={};Object.defineProperty(Fa,"__esModule",{value:!0});Fa.startWith=void 0;var sv=tn,ND=Ie,$D=N;function kD(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=ND.popScheduler(e);return $D.operate(function(n,i){(t?sv.concat(e,n,t):sv.concat(e,n)).subscribe(i)})}Fa.startWith=kD;var Ba={},pr={};Object.defineProperty(pr,"__esModule",{value:!0});pr.switchMap=void 0;var DD=F,LD=N,cv=D;function UD(e,r){return LD.operate(function(t,n){var i=null,o=0,a=!1,s=function(){return a&&!i&&n.complete()};t.subscribe(cv.createOperatorSubscriber(n,function(c){i==null||i.unsubscribe();var u=0,l=o++;DD.innerFrom(e(c,l)).subscribe(i=cv.createOperatorSubscriber(n,function(h){return n.next(r?r(c,h,l,u++):h)},function(){i=null,s()}))},function(){a=!0,s()}))})}pr.switchMap=UD;Object.defineProperty(Ba,"__esModule",{value:!0});Ba.switchAll=void 0;var FD=pr,BD=Me;function WD(){return FD.switchMap(BD.identity)}Ba.switchAll=WD;var Wa={};Object.defineProperty(Wa,"__esModule",{value:!0});Wa.switchMapTo=void 0;var lv=pr,xD=ue;function VD(e,r){return xD.isFunction(r)?lv.switchMap(function(){return e},r):lv.switchMap(function(){return e})}Wa.switchMapTo=VD;var xa={};Object.defineProperty(xa,"__esModule",{value:!0});xa.switchScan=void 0;var qD=pr,HD=N;function zD(e,r){return HD.operate(function(t,n){var i=r;return qD.switchMap(function(o,a){return e(i,o,a)},function(o,a){return i=a,a})(t).subscribe(n),function(){i=null}})}xa.switchScan=zD;var Va={};Object.defineProperty(Va,"__esModule",{value:!0});Va.takeUntil=void 0;var GD=N,YD=D,KD=F,ZD=je;function QD(e){return GD.operate(function(r,t){KD.innerFrom(e).subscribe(YD.createOperatorSubscriber(t,function(){return t.complete()},ZD.noop)),!t.closed&&r.subscribe(t)})}Va.takeUntil=QD;var qa={};Object.defineProperty(qa,"__esModule",{value:!0});qa.takeWhile=void 0;var XD=N,JD=D;function eL(e,r){return r===void 0&&(r=!1),XD.operate(function(t,n){var i=0;t.subscribe(JD.createOperatorSubscriber(n,function(o){var a=e(o,i++);(a||r)&&n.next(o),!a&&n.complete()}))})}qa.takeWhile=eL;var Ha={};Object.defineProperty(Ha,"__esModule",{value:!0});Ha.tap=void 0;var tL=ue,rL=N,nL=D,iL=Me;function oL(e,r,t){var n=tL.isFunction(e)||r||t?{next:e,error:r,complete:t}:e;return n?rL.operate(function(i,o){var a;(a=n.subscribe)===null||a===void 0||a.call(n);var s=!0;i.subscribe(nL.createOperatorSubscriber(o,function(c){var u;(u=n.next)===null||u===void 0||u.call(n,c),o.next(c)},function(){var c;s=!1,(c=n.complete)===null||c===void 0||c.call(n),o.complete()},function(c){var u;s=!1,(u=n.error)===null||u===void 0||u.call(n,c),o.error(c)},function(){var c,u;s&&((c=n.unsubscribe)===null||c===void 0||c.call(n)),(u=n.finalize)===null||u===void 0||u.call(n)}))}):iL.identity}Ha.tap=oL;var fi={};Object.defineProperty(fi,"__esModule",{value:!0});fi.throttle=void 0;var aL=N,fv=D,uL=F;function sL(e,r){return aL.operate(function(t,n){var i=r??{},o=i.leading,a=o===void 0?!0:o,s=i.trailing,c=s===void 0?!1:s,u=!1,l=null,h=null,v=!1,b=function(){h==null||h.unsubscribe(),h=null,c&&(T(),v&&n.complete())},m=function(){h=null,v&&n.complete()},E=function(S){return h=uL.innerFrom(e(S)).subscribe(fv.createOperatorSubscriber(n,b,m))},T=function(){if(u){u=!1;var S=l;l=null,n.next(S),!v&&E(S)}};t.subscribe(fv.createOperatorSubscriber(n,function(S){u=!0,l=S,!(h&&!h.closed)&&(a?T():E(S))},function(){v=!0,!(c&&u&&h&&!h.closed)&&n.complete()}))})}fi.throttle=sL;var za={};Object.defineProperty(za,"__esModule",{value:!0});za.throttleTime=void 0;var cL=Ze,lL=fi,fL=St;function dL(e,r,t){r===void 0&&(r=cL.asyncScheduler);var n=fL.timer(e,r);return lL.throttle(function(){return n},t)}za.throttleTime=dL;var Gr={};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.TimeInterval=Gr.timeInterval=void 0;var hL=Ze,_L=N,vL=D;function pL(e){return e===void 0&&(e=hL.asyncScheduler),_L.operate(function(r,t){var n=e.now();r.subscribe(vL.createOperatorSubscriber(t,function(i){var o=e.now(),a=o-n;n=o,t.next(new Cy(i,a))}))})}Gr.timeInterval=pL;var Cy=function(){function e(r,t){this.value=r,this.interval=t}return e}();Gr.TimeInterval=Cy;var Ga={};Object.defineProperty(Ga,"__esModule",{value:!0});Ga.timeoutWith=void 0;var bL=Ze,yL=Yn,mL=Ki;function gL(e,r,t){var n,i,o;if(t=t??bL.async,yL.isValidDate(e)?n=e:typeof e=="number"&&(i=e),r)o=function(){return r};else throw new TypeError("No observable provided to switch to");if(n==null&&i==null)throw new TypeError("No timeout provided.");return mL.timeout({first:n,each:i,scheduler:t,with:o})}Ga.timeoutWith=gL;var Ya={};Object.defineProperty(Ya,"__esModule",{value:!0});Ya.timestamp=void 0;var OL=gs,EL=pt;function wL(e){return e===void 0&&(e=OL.dateTimestampProvider),EL.map(function(r){return{value:r,timestamp:e.now()}})}Ya.timestamp=wL;var Ka={};Object.defineProperty(Ka,"__esModule",{value:!0});Ka.window=void 0;var dv=Ce,TL=N,hv=D,SL=je,PL=F;function CL(e){return TL.operate(function(r,t){var n=new dv.Subject;t.next(n.asObservable());var i=function(o){n.error(o),t.error(o)};return r.subscribe(hv.createOperatorSubscriber(t,function(o){return n==null?void 0:n.next(o)},function(){n.complete(),t.complete()},i)),PL.innerFrom(e).subscribe(hv.createOperatorSubscriber(t,function(){n.complete(),t.next(n=new dv.Subject)},SL.noop,i)),function(){n==null||n.unsubscribe(),n=null}})}Ka.window=CL;var Za={},RL=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Za,"__esModule",{value:!0});Za.windowCount=void 0;var _v=Ce,IL=N,AL=D;function jL(e,r){r===void 0&&(r=0);var t=r>0?r:e;return IL.operate(function(n,i){var o=[new _v.Subject],a=0;i.next(o[0].asObservable()),n.subscribe(AL.createOperatorSubscriber(i,function(s){var c,u;try{for(var l=RL(o),h=l.next();!h.done;h=l.next()){var v=h.value;v.next(s)}}catch(E){c={error:E}}finally{try{h&&!h.done&&(u=l.return)&&u.call(l)}finally{if(c)throw c.error}}var b=a-e+1;if(b>=0&&b%t===0&&o.shift().complete(),++a%t===0){var m=new _v.Subject;o.push(m),i.next(m.asObservable())}},function(){for(;o.length>0;)o.shift().complete();i.complete()},function(s){for(;o.length>0;)o.shift().error(s);i.error(s)},function(){o=null}))})}Za.windowCount=jL;var Qa={};Object.defineProperty(Qa,"__esModule",{value:!0});Qa.windowTime=void 0;var ML=Ce,NL=Ze,$L=Ae,kL=N,DL=D,LL=ht,UL=Ie,vv=vt;function FL(e){for(var r,t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=(r=UL.popScheduler(n))!==null&&r!==void 0?r:NL.asyncScheduler,a=(t=n[0])!==null&&t!==void 0?t:null,s=n[1]||1/0;return kL.operate(function(c,u){var l=[],h=!1,v=function(T){var S=T.window,R=T.subs;S.complete(),R.unsubscribe(),LL.arrRemove(l,T),h&&b()},b=function(){if(l){var T=new $L.Subscription;u.add(T);var S=new ML.Subject,R={window:S,subs:T,seen:0};l.push(R),u.next(S.asObservable()),vv.executeSchedule(T,o,function(){return v(R)},e)}};a!==null&&a>=0?vv.executeSchedule(u,o,b,a,!0):h=!0,b();var m=function(T){return l.slice().forEach(T)},E=function(T){m(function(S){var R=S.window;return T(R)}),T(u),u.unsubscribe()};return c.subscribe(DL.createOperatorSubscriber(u,function(T){m(function(S){S.window.next(T),s<=++S.seen&&v(S)})},function(){return E(function(T){return T.complete()})},function(T){return E(function(S){return S.error(T)})})),function(){l=null}})}Qa.windowTime=FL;var Xa={},BL=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Xa,"__esModule",{value:!0});Xa.windowToggle=void 0;var WL=Ce,xL=Ae,VL=N,pv=F,hf=D,bv=je,qL=ht;function HL(e,r){return VL.operate(function(t,n){var i=[],o=function(a){for(;0<i.length;)i.shift().error(a);n.error(a)};pv.innerFrom(e).subscribe(hf.createOperatorSubscriber(n,function(a){var s=new WL.Subject;i.push(s);var c=new xL.Subscription,u=function(){qL.arrRemove(i,s),s.complete(),c.unsubscribe()},l;try{l=pv.innerFrom(r(a))}catch(h){o(h);return}n.next(s.asObservable()),c.add(l.subscribe(hf.createOperatorSubscriber(n,u,bv.noop,o)))},bv.noop)),t.subscribe(hf.createOperatorSubscriber(n,function(a){var s,c,u=i.slice();try{for(var l=BL(u),h=l.next();!h.done;h=l.next()){var v=h.value;v.next(a)}}catch(b){s={error:b}}finally{try{h&&!h.done&&(c=l.return)&&c.call(l)}finally{if(s)throw s.error}}},function(){for(;0<i.length;)i.shift().complete();n.complete()},o,function(){for(;0<i.length;)i.shift().unsubscribe()}))})}Xa.windowToggle=HL;var Ja={};Object.defineProperty(Ja,"__esModule",{value:!0});Ja.windowWhen=void 0;var zL=Ce,GL=N,yv=D,YL=F;function KL(e){return GL.operate(function(r,t){var n,i,o=function(s){n.error(s),t.error(s)},a=function(){i==null||i.unsubscribe(),n==null||n.complete(),n=new zL.Subject,t.next(n.asObservable());var s;try{s=YL.innerFrom(e())}catch(c){o(c);return}s.subscribe(i=yv.createOperatorSubscriber(t,a,a,o))};a(),r.subscribe(yv.createOperatorSubscriber(t,function(s){return n.next(s)},function(){n.complete(),t.complete()},o,function(){i==null||i.unsubscribe(),n=null}))})}Ja.windowWhen=KL;var eu={},mv=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},gv=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(eu,"__esModule",{value:!0});eu.withLatestFrom=void 0;var ZL=N,Ov=D,QL=F,XL=Me,JL=je,eU=Ie;function tU(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=eU.popResultSelector(e);return ZL.operate(function(n,i){for(var o=e.length,a=new Array(o),s=e.map(function(){return!1}),c=!1,u=function(h){QL.innerFrom(e[h]).subscribe(Ov.createOperatorSubscriber(i,function(v){a[h]=v,!c&&!s[h]&&(s[h]=!0,(c=s.every(XL.identity))&&(s=null))},JL.noop))},l=0;l<o;l++)u(l);n.subscribe(Ov.createOperatorSubscriber(i,function(h){if(c){var v=gv([h],mv(a));i.next(t?t.apply(void 0,gv([],mv(v))):v)}}))})}eu.withLatestFrom=tU;var tu={};Object.defineProperty(tu,"__esModule",{value:!0});tu.zipAll=void 0;var rU=Zn,nU=Wo;function iU(e){return nU.joinAllInternals(rU.zip,e)}tu.zipAll=iU;var ru={},nu={},oU=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},aU=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(nu,"__esModule",{value:!0});nu.zip=void 0;var uU=Zn,sU=N;function cU(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return sU.operate(function(t,n){uU.zip.apply(void 0,aU([t],oU(e))).subscribe(n)})}nu.zip=cU;var lU=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},fU=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(ru,"__esModule",{value:!0});ru.zipWith=void 0;var dU=nu;function hU(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return dU.zip.apply(void 0,fU([],lU(e)))}ru.zipWith=hU;(function(e){var r=f&&f.__createBinding||(Object.create?function(fn,dn,Ct,Or){Or===void 0&&(Or=Ct),Object.defineProperty(fn,Or,{enumerable:!0,get:function(){return dn[Ct]}})}:function(fn,dn,Ct,Or){Or===void 0&&(Or=Ct),fn[Or]=dn[Ct]}),t=f&&f.__exportStar||function(fn,dn){for(var Ct in fn)Ct!=="default"&&!Object.prototype.hasOwnProperty.call(dn,Ct)&&r(dn,fn,Ct)};Object.defineProperty(e,"__esModule",{value:!0}),e.interval=e.iif=e.generate=e.fromEventPattern=e.fromEvent=e.from=e.forkJoin=e.empty=e.defer=e.connectable=e.concat=e.combineLatest=e.bindNodeCallback=e.bindCallback=e.UnsubscriptionError=e.TimeoutError=e.SequenceError=e.ObjectUnsubscribedError=e.NotFoundError=e.EmptyError=e.ArgumentOutOfRangeError=e.firstValueFrom=e.lastValueFrom=e.isObservable=e.identity=e.noop=e.pipe=e.NotificationKind=e.Notification=e.Subscriber=e.Subscription=e.Scheduler=e.VirtualAction=e.VirtualTimeScheduler=e.animationFrameScheduler=e.animationFrame=e.queueScheduler=e.queue=e.asyncScheduler=e.async=e.asapScheduler=e.asap=e.AsyncSubject=e.ReplaySubject=e.BehaviorSubject=e.Subject=e.animationFrames=e.observable=e.ConnectableObservable=e.Observable=void 0,e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.combineLatestWith=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=e.config=e.NEVER=e.EMPTY=e.scheduled=e.zip=e.using=e.timer=e.throwError=e.range=e.race=e.partition=e.pairs=e.onErrorResumeNext=e.of=e.never=e.merge=void 0,e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.pairwise=e.onErrorResumeNextWith=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=e.mergeAll=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=void 0,e.zipWith=e.zipAll=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=void 0;var n=se;Object.defineProperty(e,"Observable",{enumerable:!0,get:function(){return n.Observable}});var i=Jr;Object.defineProperty(e,"ConnectableObservable",{enumerable:!0,get:function(){return i.ConnectableObservable}});var o=Xr;Object.defineProperty(e,"observable",{enumerable:!0,get:function(){return o.observable}});var a=ms;Object.defineProperty(e,"animationFrames",{enumerable:!0,get:function(){return a.animationFrames}});var s=Ce;Object.defineProperty(e,"Subject",{enumerable:!0,get:function(){return s.Subject}});var c=ho;Object.defineProperty(e,"BehaviorSubject",{enumerable:!0,get:function(){return c.BehaviorSubject}});var u=Vn;Object.defineProperty(e,"ReplaySubject",{enumerable:!0,get:function(){return u.ReplaySubject}});var l=qn;Object.defineProperty(e,"AsyncSubject",{enumerable:!0,get:function(){return l.AsyncSubject}});var h=Qb;Object.defineProperty(e,"asap",{enumerable:!0,get:function(){return h.asap}}),Object.defineProperty(e,"asapScheduler",{enumerable:!0,get:function(){return h.asapScheduler}});var v=Ze;Object.defineProperty(e,"async",{enumerable:!0,get:function(){return v.async}}),Object.defineProperty(e,"asyncScheduler",{enumerable:!0,get:function(){return v.asyncScheduler}});var b=ey;Object.defineProperty(e,"queue",{enumerable:!0,get:function(){return b.queue}}),Object.defineProperty(e,"queueScheduler",{enumerable:!0,get:function(){return b.queueScheduler}});var m=ty;Object.defineProperty(e,"animationFrame",{enumerable:!0,get:function(){return m.animationFrame}}),Object.defineProperty(e,"animationFrameScheduler",{enumerable:!0,get:function(){return m.animationFrameScheduler}});var E=Nn;Object.defineProperty(e,"VirtualTimeScheduler",{enumerable:!0,get:function(){return E.VirtualTimeScheduler}}),Object.defineProperty(e,"VirtualAction",{enumerable:!0,get:function(){return E.VirtualAction}});var T=_o;Object.defineProperty(e,"Scheduler",{enumerable:!0,get:function(){return T.Scheduler}});var S=Ae;Object.defineProperty(e,"Subscription",{enumerable:!0,get:function(){return S.Subscription}});var R=Wn;Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return R.Subscriber}});var I=Rs;Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return I.Notification}}),Object.defineProperty(e,"NotificationKind",{enumerable:!0,get:function(){return I.NotificationKind}});var A=Dt;Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return A.pipe}});var j=je;Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return j.noop}});var k=Me;Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return k.identity}});var M=Ns;Object.defineProperty(e,"isObservable",{enumerable:!0,get:function(){return M.isObservable}});var q=$s;Object.defineProperty(e,"lastValueFrom",{enumerable:!0,get:function(){return q.lastValueFrom}});var ne=ks;Object.defineProperty(e,"firstValueFrom",{enumerable:!0,get:function(){return ne.firstValueFrom}});var ie=To;Object.defineProperty(e,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return ie.ArgumentOutOfRangeError}});var _e=wt;Object.defineProperty(e,"EmptyError",{enumerable:!0,get:function(){return _e.EmptyError}});var X=So;Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return X.NotFoundError}});var de=fo;Object.defineProperty(e,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return de.ObjectUnsubscribedError}});var ze=Po;Object.defineProperty(e,"SequenceError",{enumerable:!0,get:function(){return ze.SequenceError}});var Y=Ki;Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return Y.TimeoutError}});var he=co;Object.defineProperty(e,"UnsubscriptionError",{enumerable:!0,get:function(){return he.UnsubscriptionError}});var V=Ds;Object.defineProperty(e,"bindCallback",{enumerable:!0,get:function(){return V.bindCallback}});var ee=Ls;Object.defineProperty(e,"bindNodeCallback",{enumerable:!0,get:function(){return ee.bindNodeCallback}});var H=er;Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return H.combineLatest}});var L=tn;Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return L.concat}});var W=Us;Object.defineProperty(e,"connectable",{enumerable:!0,get:function(){return W.connectable}});var J=nn;Object.defineProperty(e,"defer",{enumerable:!0,get:function(){return J.defer}});var me=ft;Object.defineProperty(e,"empty",{enumerable:!0,get:function(){return me.empty}});var z=Fs;Object.defineProperty(e,"forkJoin",{enumerable:!0,get:function(){return z.forkJoin}});var Oe=_t;Object.defineProperty(e,"from",{enumerable:!0,get:function(){return Oe.from}});var ce=Bs;Object.defineProperty(e,"fromEvent",{enumerable:!0,get:function(){return ce.fromEvent}});var Be=Ws;Object.defineProperty(e,"fromEventPattern",{enumerable:!0,get:function(){return Be.fromEventPattern}});var O=xs;Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return O.generate}});var C=Vs;Object.defineProperty(e,"iif",{enumerable:!0,get:function(){return C.iif}});var $=Ao;Object.defineProperty(e,"interval",{enumerable:!0,get:function(){return $.interval}});var U=qs;Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return U.merge}});var K=td;Object.defineProperty(e,"never",{enumerable:!0,get:function(){return K.never}});var ye=Hn;Object.defineProperty(e,"of",{enumerable:!0,get:function(){return ye.of}});var ke=jo;Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return ke.onErrorResumeNext}});var Pt=Hs;Object.defineProperty(e,"pairs",{enumerable:!0,get:function(){return Pt.pairs}});var yr=zs;Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return yr.partition}});var mr=Hr;Object.defineProperty(e,"race",{enumerable:!0,get:function(){return mr.race}});var yi=Gs;Object.defineProperty(e,"range",{enumerable:!0,get:function(){return yi.range}});var mi=wo;Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return mi.throwError}});var ln=St;Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return ln.timer}});var Vt=Ys;Object.defineProperty(e,"using",{enumerable:!0,get:function(){return Vt.using}});var Ye=Zn;Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return Ye.zip}});var gr=vo;Object.defineProperty(e,"scheduled",{enumerable:!0,get:function(){return gr.scheduled}});var gi=ft;Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return gi.EMPTY}});var Je=td;Object.defineProperty(e,"NEVER",{enumerable:!0,get:function(){return Je.NEVER}}),t(yy,e);var Oi=ur;Object.defineProperty(e,"config",{enumerable:!0,get:function(){return Oi.config}});var p=Qn;Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return p.audit}});var d=No;Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return d.auditTime}});var _=$o;Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return _.buffer}});var y=ko;Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return y.bufferCount}});var g=Do;Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return g.bufferTime}});var w=Lo;Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return w.bufferToggle}});var P=Uo;Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return P.bufferWhen}});var Z=Fo;Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return Z.catchError}});var ve=Bo;Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return ve.combineAll}});var le=Xn;Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return le.combineLatestAll}});var pe=Vo;Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return pe.combineLatestWith}});var ae=rn;Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return ae.concatAll}});var al=ei;Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return al.concatMap}});var ul=Ho;Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return ul.concatMapTo}});var sl=zo;Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return sl.concatWith}});var cl=on;Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return cl.connect}});var ll=Yo;Object.defineProperty(e,"count",{enumerable:!0,get:function(){return ll.count}});var fl=Ko;Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return fl.debounce}});var dl=Zo;Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return dl.debounceTime}});var hl=hr;Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return hl.defaultIfEmpty}});var _l=Qo;Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return _l.delay}});var vl=ti;Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return vl.delayWhen}});var pl=Xo;Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return pl.dematerialize}});var bl=Jo;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return bl.distinct}});var yl=ii;Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return yl.distinctUntilChanged}});var ml=ea;Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return ml.distinctUntilKeyChanged}});var gl=ta;Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return gl.elementAt}});var Ol=ra;Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return Ol.endWith}});var El=na;Object.defineProperty(e,"every",{enumerable:!0,get:function(){return El.every}});var wl=ia;Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return wl.exhaust}});var Tl=oi;Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return Tl.exhaustAll}});var Sl=ai;Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return Sl.exhaustMap}});var Pl=oa;Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return Pl.expand}});var Cl=bt;Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return Cl.filter}});var Rl=aa;Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return Rl.finalize}});var Il=tr;Object.defineProperty(e,"find",{enumerable:!0,get:function(){return Il.find}});var Al=ua;Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return Al.findIndex}});var jl=sa;Object.defineProperty(e,"first",{enumerable:!0,get:function(){return jl.first}});var Ml=ca;Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return Ml.groupBy}});var Nl=ri;Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return Nl.ignoreElements}});var $l=la;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return $l.isEmpty}});var kl=fa;Object.defineProperty(e,"last",{enumerable:!0,get:function(){return kl.last}});var Dl=pt;Object.defineProperty(e,"map",{enumerable:!0,get:function(){return Dl.map}});var Ll=ni;Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return Ll.mapTo}});var Ul=da;Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return Ul.materialize}});var Fl=ha;Object.defineProperty(e,"max",{enumerable:!0,get:function(){return Fl.max}});var Bl=dr;Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return Bl.mergeAll}});var Wl=_a;Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return Wl.flatMap}});var xl=ot;Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return xl.mergeMap}});var Vl=va;Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return Vl.mergeMapTo}});var ql=pa;Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return ql.mergeScan}});var Og=ba;Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return Og.mergeWith}});var Eg=ma;Object.defineProperty(e,"min",{enumerable:!0,get:function(){return Eg.min}});var wg=an;Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return wg.multicast}});var Tg=lr;Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return Tg.observeOn}});var Sg=zr;Object.defineProperty(e,"onErrorResumeNextWith",{enumerable:!0,get:function(){return Sg.onErrorResumeNextWith}});var Pg=ga;Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return Pg.pairwise}});var Cg=Oa;Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return Cg.pluck}});var Rg=Ea;Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return Rg.publish}});var Ig=wa;Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return Ig.publishBehavior}});var Ag=Ta;Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return Ag.publishLast}});var jg=Sa;Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return jg.publishReplay}});var Mg=si;Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return Mg.raceWith}});var Ng=Ut;Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return Ng.reduce}});var $g=Pa;Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return $g.repeat}});var kg=Ca;Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return kg.repeatWhen}});var Dg=Ra;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return Dg.retry}});var Lg=Ia;Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return Lg.retryWhen}});var Ug=xn;Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return Ug.refCount}});var Fg=ci;Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return Fg.sample}});var Bg=Aa;Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return Bg.sampleTime}});var Wg=ja;Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return Wg.scan}});var xg=Ma;Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return xg.sequenceEqual}});var Vg=li;Object.defineProperty(e,"share",{enumerable:!0,get:function(){return Vg.share}});var qg=Na;Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return qg.shareReplay}});var Hg=$a;Object.defineProperty(e,"single",{enumerable:!0,get:function(){return Hg.single}});var zg=ka;Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return zg.skip}});var Gg=Da;Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return Gg.skipLast}});var Yg=La;Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return Yg.skipUntil}});var Kg=Ua;Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return Kg.skipWhile}});var Zg=Fa;Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return Zg.startWith}});var Qg=fr;Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return Qg.subscribeOn}});var Xg=Ba;Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return Xg.switchAll}});var Jg=pr;Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return Jg.switchMap}});var e0=Wa;Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return e0.switchMapTo}});var t0=xa;Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return t0.switchScan}});var r0=_r;Object.defineProperty(e,"take",{enumerable:!0,get:function(){return r0.take}});var n0=ui;Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return n0.takeLast}});var i0=Va;Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return i0.takeUntil}});var o0=qa;Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return o0.takeWhile}});var a0=Ha;Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return a0.tap}});var u0=fi;Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return u0.throttle}});var s0=za;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return s0.throttleTime}});var c0=vr;Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return c0.throwIfEmpty}});var l0=Gr;Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return l0.timeInterval}});var f0=Ki;Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return f0.timeout}});var d0=Ga;Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return d0.timeoutWith}});var h0=Ya;Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return h0.timestamp}});var _0=Jn;Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return _0.toArray}});var v0=Ka;Object.defineProperty(e,"window",{enumerable:!0,get:function(){return v0.window}});var p0=Za;Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return p0.windowCount}});var b0=Qa;Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return b0.windowTime}});var y0=Xa;Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return y0.windowToggle}});var m0=Ja;Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return m0.windowWhen}});var g0=eu;Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return g0.withLatestFrom}});var O0=tu;Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return O0.zipAll}});var E0=ru;Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return E0.zipWith}})})(so);var Zs={},Qs={};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.partition=void 0;var _U=Mo,Ev=bt;function vU(e,r){return function(t){return[Ev.filter(e,r)(t),Ev.filter(_U.not(e,r))(t)]}}Qs.partition=vU;var Xs={},pU=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},bU=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(Xs,"__esModule",{value:!0});Xs.race=void 0;var yU=Lt,mU=si;function gU(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return mU.raceWith.apply(void 0,bU([],pU(yU.argsOrArgArray(e))))}Xs.race=gU;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=e.merge=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.concat=e.combineLatestWith=e.combineLatest=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=void 0,e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.race=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.partition=e.pairwise=e.onErrorResumeNext=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=void 0,e.zipWith=e.zipAll=e.zip=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=void 0;var r=Qn;Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return r.audit}});var t=No;Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return t.auditTime}});var n=$o;Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return n.buffer}});var i=ko;Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return i.bufferCount}});var o=Do;Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return o.bufferTime}});var a=Lo;Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return a.bufferToggle}});var s=Uo;Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return s.bufferWhen}});var c=Fo;Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return c.catchError}});var u=Bo;Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return u.combineAll}});var l=Xn;Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return l.combineLatestAll}});var h=qo;Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return h.combineLatest}});var v=Vo;Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return v.combineLatestWith}});var b=Go;Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return b.concat}});var m=rn;Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return m.concatAll}});var E=ei;Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return E.concatMap}});var T=Ho;Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return T.concatMapTo}});var S=zo;Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return S.concatWith}});var R=on;Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return R.connect}});var I=Yo;Object.defineProperty(e,"count",{enumerable:!0,get:function(){return I.count}});var A=Ko;Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return A.debounce}});var j=Zo;Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return j.debounceTime}});var k=hr;Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return k.defaultIfEmpty}});var M=Qo;Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return M.delay}});var q=ti;Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return q.delayWhen}});var ne=Xo;Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return ne.dematerialize}});var ie=Jo;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return ie.distinct}});var _e=ii;Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return _e.distinctUntilChanged}});var X=ea;Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return X.distinctUntilKeyChanged}});var de=ta;Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return de.elementAt}});var ze=ra;Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return ze.endWith}});var Y=na;Object.defineProperty(e,"every",{enumerable:!0,get:function(){return Y.every}});var he=ia;Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return he.exhaust}});var V=oi;Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return V.exhaustAll}});var ee=ai;Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return ee.exhaustMap}});var H=oa;Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return H.expand}});var L=bt;Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return L.filter}});var W=aa;Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return W.finalize}});var J=tr;Object.defineProperty(e,"find",{enumerable:!0,get:function(){return J.find}});var me=ua;Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return me.findIndex}});var z=sa;Object.defineProperty(e,"first",{enumerable:!0,get:function(){return z.first}});var Oe=ca;Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return Oe.groupBy}});var ce=ri;Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return ce.ignoreElements}});var Be=la;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return Be.isEmpty}});var O=fa;Object.defineProperty(e,"last",{enumerable:!0,get:function(){return O.last}});var C=pt;Object.defineProperty(e,"map",{enumerable:!0,get:function(){return C.map}});var $=ni;Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return $.mapTo}});var U=da;Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return U.materialize}});var K=ha;Object.defineProperty(e,"max",{enumerable:!0,get:function(){return K.max}});var ye=ya;Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return ye.merge}});var ke=dr;Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return ke.mergeAll}});var Pt=_a;Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return Pt.flatMap}});var yr=ot;Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return yr.mergeMap}});var mr=va;Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return mr.mergeMapTo}});var yi=pa;Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return yi.mergeScan}});var mi=ba;Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return mi.mergeWith}});var ln=ma;Object.defineProperty(e,"min",{enumerable:!0,get:function(){return ln.min}});var Vt=an;Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return Vt.multicast}});var Ye=lr;Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return Ye.observeOn}});var gr=zr;Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return gr.onErrorResumeNext}});var gi=ga;Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return gi.pairwise}});var Je=Qs;Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return Je.partition}});var Oi=Oa;Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return Oi.pluck}});var p=Ea;Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return p.publish}});var d=wa;Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return d.publishBehavior}});var _=Ta;Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return _.publishLast}});var y=Sa;Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return y.publishReplay}});var g=Xs;Object.defineProperty(e,"race",{enumerable:!0,get:function(){return g.race}});var w=si;Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return w.raceWith}});var P=Ut;Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return P.reduce}});var Z=Pa;Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return Z.repeat}});var ve=Ca;Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return ve.repeatWhen}});var le=Ra;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return le.retry}});var pe=Ia;Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return pe.retryWhen}});var ae=xn;Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return ae.refCount}});var al=ci;Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return al.sample}});var ul=Aa;Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return ul.sampleTime}});var sl=ja;Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return sl.scan}});var cl=Ma;Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return cl.sequenceEqual}});var ll=li;Object.defineProperty(e,"share",{enumerable:!0,get:function(){return ll.share}});var fl=Na;Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return fl.shareReplay}});var dl=$a;Object.defineProperty(e,"single",{enumerable:!0,get:function(){return dl.single}});var hl=ka;Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return hl.skip}});var _l=Da;Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return _l.skipLast}});var vl=La;Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return vl.skipUntil}});var pl=Ua;Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return pl.skipWhile}});var bl=Fa;Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return bl.startWith}});var yl=fr;Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return yl.subscribeOn}});var ml=Ba;Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return ml.switchAll}});var gl=pr;Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return gl.switchMap}});var Ol=Wa;Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return Ol.switchMapTo}});var El=xa;Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return El.switchScan}});var wl=_r;Object.defineProperty(e,"take",{enumerable:!0,get:function(){return wl.take}});var Tl=ui;Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return Tl.takeLast}});var Sl=Va;Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return Sl.takeUntil}});var Pl=qa;Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return Pl.takeWhile}});var Cl=Ha;Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return Cl.tap}});var Rl=fi;Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return Rl.throttle}});var Il=za;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return Il.throttleTime}});var Al=vr;Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return Al.throwIfEmpty}});var jl=Gr;Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return jl.timeInterval}});var Ml=Ki;Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return Ml.timeout}});var Nl=Ga;Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return Nl.timeoutWith}});var $l=Ya;Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return $l.timestamp}});var kl=Jn;Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return kl.toArray}});var Dl=Ka;Object.defineProperty(e,"window",{enumerable:!0,get:function(){return Dl.window}});var Ll=Za;Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return Ll.windowCount}});var Ul=Qa;Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return Ul.windowTime}});var Fl=Xa;Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return Fl.windowToggle}});var Bl=Ja;Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return Bl.windowWhen}});var Wl=eu;Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return Wl.withLatestFrom}});var xl=nu;Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return xl.zip}});var Vl=tu;Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return Vl.zipAll}});var ql=ru;Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return ql.zipWith}})})(Zs);var di={},Cn=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Rn=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(di,"__esModule",{value:!0});var OU=x,$r=so,Pr=Zs,Ri={READY:0,STREAMING:1,COMPLETED:2},EU=function(){function e(r,t){var n=r.pipe((0,Pr.publishReplay)(1),(0,Pr.refCount)());this._result=n,this._keys=n.pipe((0,Pr.mergeMap)(function(i){return(0,$r.from)(i.keys())}),(0,Pr.publishReplay)(1),(0,Pr.refCount)()),this._records=void 0,this._controls=new Ry,this._summary=new $r.ReplaySubject,this._state=t||Ri.READY}return e.prototype.keys=function(){return this._keys},e.prototype.records=function(){var r=this,t=this._result.pipe((0,Pr.mergeMap)(function(n){return new $r.Observable(function(i){return r._startStreaming({result:n,recordsObserver:i})})}));return t.push=function(){return r._push()},t},e.prototype.consume=function(){var r=this;return this._result.pipe((0,Pr.mergeMap)(function(t){return new $r.Observable(function(n){return r._startStreaming({result:t,summaryObserver:n})})}))},e.prototype.pause=function(){this._controls.pause()},e.prototype.resume=function(){return this._controls.resume()},e.prototype.push=function(){return this._controls.push()},e.prototype._startStreaming=function(r){var t=r===void 0?{}:r,n=t.result,i=t.recordsObserver,o=i===void 0?null:i,a=t.summaryObserver,s=a===void 0?null:a,c=[];return s&&c.push(this._summary.subscribe(s)),this._state<Ri.STREAMING?(this._state=Ri.STREAMING,this._setupRecordsStream(n),o?c.push(this._records.subscribe(o)):n._cancel(),c.push({unsubscribe:function(){n._cancel&&n._cancel()}})):o&&o.error((0,OU.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){c.forEach(function(u){return u.unsubscribe()})}},e.prototype._toObservable=function(){var r=this;function t(n){return new $r.Observable(function(i){i.next(n),i.complete()})}return new $r.Observable(function(n){r._result.subscribe({complete:function(){return n.complete()},next:function(i){return n.next(new e(t(i)),r._state)},error:function(i){return n.error(i)}})})},e.prototype._setupRecordsStream=function(r){var t=this;return this._records?this._records:(this._records=wU(r[Symbol.asyncIterator](),{complete:function(){return Cn(t,void 0,void 0,function(){var n,i;return Rn(this,function(o){switch(o.label){case 0:return this._state=Ri.COMPLETED,i=(n=this._summary).next,[4,r.summary()];case 1:return i.apply(n,[o.sent()]),this._summary.complete(),[2]}})})},error:function(n){t._state=Ri.COMPLETED,t._summary.error(n)}},this._controls),this._records)},e}();di.default=EU;function wU(e,r,t){var n=this;t===void 0&&(t=new Ry);var i=new $r.Subject,o=function(s){return Cn(n,void 0,void 0,function(){var c,u,l,h;return Rn(this,function(v){switch(v.label){case 0:return v.trys.push([0,2,3,4]),t.pushing=!0,[4,s];case 1:return c=v.sent(),u=c.done,l=c.value,u?(i.complete(),r.complete()):(i.next(l),t.paused||o(e.next()).catch(function(){})),[3,4];case 2:return h=v.sent(),i.error(h),r.error(h),[3,4];case 3:return t.pushing=!1,[7];case 4:return[2]}})})};function a(s){return Cn(this,void 0,void 0,function(){return Rn(this,function(c){switch(c.label){case 0:return[4,o(e.next(s))];case 1:return c.sent(),[2]}})})}return t.pusher=a,a(),i}var Ry=function(){function e(r){r===void 0&&(r=function(){return Cn(t,void 0,void 0,function(){return Rn(this,function(n){return[2]})})});var t=this;this._paused=!1,this._pushing=!1,this._push=r}return e.prototype.pause=function(){this._paused=!0},Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushing",{get:function(){return this._pushing},set:function(r){this._pushing=r},enumerable:!1,configurable:!0}),e.prototype.resume=function(){return Cn(this,void 0,void 0,function(){var r;return Rn(this,function(t){switch(t.label){case 0:return r=this._paused,this._paused=!1,r&&!this._pushing?[4,this._push()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.push=function(){return Cn(this,void 0,void 0,function(){return Rn(this,function(r){switch(r.label){case 0:return this.pause(),[4,this._push()];case 1:return[2,r.sent()]}})})},Object.defineProperty(e.prototype,"pusher",{get:function(){return this._push},set:function(r){this._push=r},enumerable:!1,configurable:!0}),e}(),iu={},Iy=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(iu,"__esModule",{value:!0});var mu=so,TU=Iy(di);Iy(x);var SU=function(){function e(r){this._txc=r}return e.prototype.run=function(r,t){var n=this;return new TU.default(new mu.Observable(function(i){try{i.next(n._txc.run(r,t)),i.complete()}catch(o){i.error(o)}return function(){}}))},e.prototype.commit=function(){var r=this;return new mu.Observable(function(t){r._txc.commit().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype.rollback=function(){var r=this;return new mu.Observable(function(t){r._txc.rollback().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype.isOpen=function(){return this._txc.isOpen()},e.prototype.close=function(){var r=this;return new mu.Observable(function(t){r._txc.close().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e}();iu.default=SU;var Js={},Ay=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Js,"__esModule",{value:!0});Ay(di);Ay(iu);var PU=function(){function e(r){var t=r.run;this._run=t}return e.fromTransaction=function(r){return new e({run:r.run.bind(r)})},e.prototype.run=function(r,t){return this._run(r,t)},e}();Js.default=PU;var Hd={};Object.defineProperty(Hd,"__esModule",{value:!0});var zu=x,_f=so,vf=Zs;zu.internal.logger.Logger;var CU=zu.error.SERVICE_UNAVAILABLE,wv=30*1e3,Tv=1e3,Sv=2,Pv=.2,RU=function(){function e(r){var t=r===void 0?{}:r,n=t.maxRetryTimeout,i=n===void 0?wv:n,o=t.initialDelay,a=o===void 0?Tv:o,s=t.delayMultiplier,c=s===void 0?Sv:s,u=t.delayJitter,l=u===void 0?Pv:u,h=t.logger,v=h===void 0?null:h;this._maxRetryTimeout=gu(i,wv),this._initialDelay=gu(a,Tv),this._delayMultiplier=gu(c,Sv),this._delayJitter=gu(l,Pv),this._logger=v}return e.prototype.retry=function(r){var t=this;return r.pipe((0,vf.retryWhen)(function(n){var i=[],o=Date.now(),a=1,s=t._initialDelay;return n.pipe((0,vf.mergeMap)(function(c){if(!(0,zu.isRetriableError)(c))return(0,_f.throwError)(function(){return c});if(i.push(c),a>=2&&Date.now()-o>=t._maxRetryTimeout){var u=(0,zu.newError)("Failed after retried for ".concat(a," times in ").concat(t._maxRetryTimeout," ms. Make sure that your database is online and retry again."),CU);return u.seenErrors=i,(0,_f.throwError)(function(){return u})}var l=t._computeNextDelay(s);return s=s*t._delayMultiplier,a++,t._logger&&t._logger.warn("Transaction failed and will be retried in ".concat(l)),(0,_f.of)(1).pipe((0,vf.delay)(l))}))}))},e.prototype._computeNextDelay=function(r){var t=r*this._delayJitter;return r-t+2*t*Math.random()},e}();Hd.default=RU;function gu(e,r){return e||e===0?e:r}var ec=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bs,"__esModule",{value:!0});var Cr=so,Ii=Zs,IU=ec(di),jy=x,AU=ec(iu),jU=ec(Js),MU=ec(Hd),zd=jy.internal.constants,Cv=zd.ACCESS_MODE_READ,Rv=zd.ACCESS_MODE_WRITE,Iv=zd.TELEMETRY_APIS,Ou=jy.internal.txConfig.TxConfig,NU=function(){function e(r){var t=r===void 0?{}:r,n=t.session,i=t.config,o=t.log;this._session=n,this._retryLogic=$U(i),this._log=o}return e.prototype.run=function(r,t,n){var i=this;return new IU.default(new Cr.Observable(function(o){try{o.next(i._session.run(r,t,n)),o.complete()}catch(a){o.error(a)}return function(){}}))},e.prototype.beginTransaction=function(r){return this._beginTransaction(this._session._mode,r,{api:Iv.UNMANAGED_TRANSACTION})},e.prototype.readTransaction=function(r,t){return this._runTransaction(Cv,r,t)},e.prototype.writeTransaction=function(r,t){return this._runTransaction(Rv,r,t)},e.prototype.executeRead=function(r,t){return this._executeInTransaction(Cv,r,t)},e.prototype.executeWrite=function(r,t){return this._executeInTransaction(Rv,r,t)},e.prototype._executeInTransaction=function(r,t,n){var i=function(o){return new jU.default({run:o.run.bind(o)})};return this._runTransaction(r,t,n,i)},e.prototype.close=function(){var r=this;return new Cr.Observable(function(t){r._session.close().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype.lastBookmark=function(){return this.lastBookmarks()},e.prototype.lastBookmarks=function(){return this._session.lastBookmarks()},e.prototype._beginTransaction=function(r,t,n){var i=this,o=Ou.empty();return t&&(o=new Ou(t,this._log)),new Cr.Observable(function(a){try{i._session._beginTransaction(r,o,n).then(function(s){a.next(new AU.default(s)),a.complete()}).catch(function(s){return a.error(s)})}catch(s){a.error(s)}return function(){}})},e.prototype._runTransaction=function(r,t,n,i){var o=this;i===void 0&&(i=function(c){return c});var a=Ou.empty();n&&(a=new Ou(n));var s={apiTelemetryConfig:{api:Iv.MANAGED_TRANSACTION,onTelemetrySuccess:function(){s.apiTelemetryConfig=void 0}}};return this._retryLogic.retry((0,Cr.of)(1).pipe((0,Ii.mergeMap)(function(){return o._beginTransaction(r,a,s.apiTelemetryConfig)}),(0,Ii.mergeMap)(function(c){return(0,Cr.defer)(function(){try{return t(i(c))}catch(u){return(0,Cr.throwError)(function(){return u})}}).pipe((0,Ii.catchError)(function(u){return c.rollback().pipe((0,Ii.concatWith)((0,Cr.throwError)(function(){return u})))}),(0,Ii.concatWith)(c.commit()))})))},e}();bs.default=NU;function $U(e){var r=e&&e.maxTransactionRetryTime?e.maxTransactionRetryTime:null;return new MU.default({maxRetryTimeout:r})}var kU=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),DU=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jt,"__esModule",{value:!0});jt.WRITE=jt.READ=jt.Driver=void 0;var tc=x,LU=DU(bs),Av=tc.internal.constants.FETCH_ALL,UU=tc.driver.READ,My=tc.driver.WRITE;jt.READ=UU;jt.WRITE=My;var Ny=function(e){kU(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.rxSession=function(t){var n=t===void 0?{}:t,i=n.defaultAccessMode,o=i===void 0?My:i,a=n.bookmarks,s=n.database,c=s===void 0?"":s,u=n.fetchSize,l=n.impersonatedUser,h=n.bookmarkManager,v=n.notificationFilter,b=n.auth;return new LU.default({session:this._newSession({defaultAccessMode:o,bookmarkOrBookmarks:a,database:c,impersonatedUser:l,auth:b,reactive:!1,fetchSize:FU(u,this._config.fetchSize),bookmarkManager:h,notificationFilter:v,log:this._log}),config:this._config,log:this._log})},r}(tc.Driver);jt.Driver=Ny;function FU(e,r){var t=parseInt(e,10);if(t>0||t===Av)return t;if(t===0||t<0)throw new Error("The fetch size can only be a positive value or ".concat(Av," for ALL. However fetchSize = ").concat(t));return r}jt.default=Ny;var Gd={};Object.defineProperty(Gd,"__esModule",{value:!0});Gd.default="5.28.1";var $y={},rr={},rc={};Object.defineProperty(rc,"__esModule",{value:!0});var BU=function(){function e(){}return e.prototype.selectReader=function(r){throw new Error("Abstract function")},e.prototype.selectWriter=function(r){throw new Error("Abstract function")},e}();rc.default=BU;var Yd={},Kd={};Object.defineProperty(Kd,"__esModule",{value:!0});var WU=function(){function e(r){this._offset=r||0}return e.prototype.next=function(r){if(r===0)return-1;var t=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),t%r},e}();Kd.default=WU;var xU=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ky=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yd,"__esModule",{value:!0});var jv=ky(Kd),VU=ky(rc),qU=function(e){xU(r,e);function r(t){var n=e.call(this)||this;return n._readersIndex=new jv.default,n._writersIndex=new jv.default,n._connectionPool=t,n}return r.prototype.selectReader=function(t){return this._select(t,this._readersIndex)},r.prototype.selectWriter=function(t){return this._select(t,this._writersIndex)},r.prototype._select=function(t,n){var i=t.length;if(i===0)return null;var o=n.next(i),a=o,s=null,c=Number.MAX_SAFE_INTEGER;do{var u=t[a],l=this._connectionPool.activeResourceCount(u);l<c&&(s=u,c=l),a===i-1?a=0:a++}while(a!==o);return s},r}(VU.default);Yd.default=qU;var Dy=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rr,"__esModule",{value:!0});rr.LeastConnectedLoadBalancingStrategy=rr.LoadBalancingStrategy=void 0;var HU=Dy(rc);rr.LoadBalancingStrategy=HU.default;var Ly=Dy(Yd);rr.LeastConnectedLoadBalancingStrategy=Ly.default;rr.default=Ly.default;var Zd={},Qd={},un={},Kt={},Xd={},Ft={},nc={},ic={};ic.byteLength=YU;ic.toByteArray=ZU;ic.fromByteArray=JU;var mt=[],rt=[],zU=typeof Uint8Array<"u"?Uint8Array:Array,pf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var vn=0,GU=pf.length;vn<GU;++vn)mt[vn]=pf[vn],rt[pf.charCodeAt(vn)]=vn;rt[45]=62;rt[95]=63;function Uy(e){var r=e.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");t===-1&&(t=r);var n=t===r?0:4-t%4;return[t,n]}function YU(e){var r=Uy(e),t=r[0],n=r[1];return(t+n)*3/4-n}function KU(e,r,t){return(r+t)*3/4-t}function ZU(e){var r,t=Uy(e),n=t[0],i=t[1],o=new zU(KU(e,n,i)),a=0,s=i>0?n-4:n,c;for(c=0;c<s;c+=4)r=rt[e.charCodeAt(c)]<<18|rt[e.charCodeAt(c+1)]<<12|rt[e.charCodeAt(c+2)]<<6|rt[e.charCodeAt(c+3)],o[a++]=r>>16&255,o[a++]=r>>8&255,o[a++]=r&255;return i===2&&(r=rt[e.charCodeAt(c)]<<2|rt[e.charCodeAt(c+1)]>>4,o[a++]=r&255),i===1&&(r=rt[e.charCodeAt(c)]<<10|rt[e.charCodeAt(c+1)]<<4|rt[e.charCodeAt(c+2)]>>2,o[a++]=r>>8&255,o[a++]=r&255),o}function QU(e){return mt[e>>18&63]+mt[e>>12&63]+mt[e>>6&63]+mt[e&63]}function XU(e,r,t){for(var n,i=[],o=r;o<t;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),i.push(QU(n));return i.join("")}function JU(e){for(var r,t=e.length,n=t%3,i=[],o=16383,a=0,s=t-n;a<s;a+=o)i.push(XU(e,a,a+o>s?s:a+o));return n===1?(r=e[t-1],i.push(mt[r>>2]+mt[r<<4&63]+"==")):n===2&&(r=(e[t-2]<<8)+e[t-1],i.push(mt[r>>10]+mt[r>>4&63]+mt[r<<2&63]+"=")),i.join("")}var Jd={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Jd.read=function(e,r,t,n,i){var o,a,s=i*8-n-1,c=(1<<s)-1,u=c>>1,l=-7,h=t?i-1:0,v=t?-1:1,b=e[r+h];for(h+=v,o=b&(1<<-l)-1,b>>=-l,l+=s;l>0;o=o*256+e[r+h],h+=v,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=a*256+e[r+h],h+=v,l-=8);if(o===0)o=1-u;else{if(o===c)return a?NaN:(b?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-u}return(b?-1:1)*a*Math.pow(2,o-n)};Jd.write=function(e,r,t,n,i,o){var a,s,c,u=o*8-i-1,l=(1<<u)-1,h=l>>1,v=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=n?0:o-1,m=n?1:-1,E=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(s=isNaN(r)?1:0,a=l):(a=Math.floor(Math.log(r)/Math.LN2),r*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+h>=1?r+=v/c:r+=v*Math.pow(2,1-h),r*c>=2&&(a++,c/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(r*c-1)*Math.pow(2,i),a=a+h):(s=r*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[t+b]=s&255,b+=m,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[t+b]=a&255,b+=m,a/=256,u-=8);e[t+b-m]|=E*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const r=ic,t=Jd,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=R,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=o(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const p=new Uint8Array(1),d={foo:function(){return 42}};return Object.setPrototypeOf(d,Uint8Array.prototype),Object.setPrototypeOf(p,d),p.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function a(p){if(p>i)throw new RangeError('The value "'+p+'" is invalid for option "size"');const d=new Uint8Array(p);return Object.setPrototypeOf(d,s.prototype),d}function s(p,d,_){if(typeof p=="number"){if(typeof d=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(p)}return c(p,d,_)}s.poolSize=8192;function c(p,d,_){if(typeof p=="string")return v(p,d);if(ArrayBuffer.isView(p))return m(p);if(p==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);if(Ye(p,ArrayBuffer)||p&&Ye(p.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ye(p,SharedArrayBuffer)||p&&Ye(p.buffer,SharedArrayBuffer)))return E(p,d,_);if(typeof p=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const y=p.valueOf&&p.valueOf();if(y!=null&&y!==p)return s.from(y,d,_);const g=T(p);if(g)return g;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof p[Symbol.toPrimitive]=="function")return s.from(p[Symbol.toPrimitive]("string"),d,_);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p)}s.from=function(p,d,_){return c(p,d,_)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function u(p){if(typeof p!="number")throw new TypeError('"size" argument must be of type number');if(p<0)throw new RangeError('The value "'+p+'" is invalid for option "size"')}function l(p,d,_){return u(p),p<=0?a(p):d!==void 0?typeof _=="string"?a(p).fill(d,_):a(p).fill(d):a(p)}s.alloc=function(p,d,_){return l(p,d,_)};function h(p){return u(p),a(p<0?0:S(p)|0)}s.allocUnsafe=function(p){return h(p)},s.allocUnsafeSlow=function(p){return h(p)};function v(p,d){if((typeof d!="string"||d==="")&&(d="utf8"),!s.isEncoding(d))throw new TypeError("Unknown encoding: "+d);const _=I(p,d)|0;let y=a(_);const g=y.write(p,d);return g!==_&&(y=y.slice(0,g)),y}function b(p){const d=p.length<0?0:S(p.length)|0,_=a(d);for(let y=0;y<d;y+=1)_[y]=p[y]&255;return _}function m(p){if(Ye(p,Uint8Array)){const d=new Uint8Array(p);return E(d.buffer,d.byteOffset,d.byteLength)}return b(p)}function E(p,d,_){if(d<0||p.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<d+(_||0))throw new RangeError('"length" is outside of buffer bounds');let y;return d===void 0&&_===void 0?y=new Uint8Array(p):_===void 0?y=new Uint8Array(p,d):y=new Uint8Array(p,d,_),Object.setPrototypeOf(y,s.prototype),y}function T(p){if(s.isBuffer(p)){const d=S(p.length)|0,_=a(d);return _.length===0||p.copy(_,0,0,d),_}if(p.length!==void 0)return typeof p.length!="number"||gr(p.length)?a(0):b(p);if(p.type==="Buffer"&&Array.isArray(p.data))return b(p.data)}function S(p){if(p>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return p|0}function R(p){return+p!=p&&(p=0),s.alloc(+p)}s.isBuffer=function(d){return d!=null&&d._isBuffer===!0&&d!==s.prototype},s.compare=function(d,_){if(Ye(d,Uint8Array)&&(d=s.from(d,d.offset,d.byteLength)),Ye(_,Uint8Array)&&(_=s.from(_,_.offset,_.byteLength)),!s.isBuffer(d)||!s.isBuffer(_))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===_)return 0;let y=d.length,g=_.length;for(let w=0,P=Math.min(y,g);w<P;++w)if(d[w]!==_[w]){y=d[w],g=_[w];break}return y<g?-1:g<y?1:0},s.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(d,_){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return s.alloc(0);let y;if(_===void 0)for(_=0,y=0;y<d.length;++y)_+=d[y].length;const g=s.allocUnsafe(_);let w=0;for(y=0;y<d.length;++y){let P=d[y];if(Ye(P,Uint8Array))w+P.length>g.length?(s.isBuffer(P)||(P=s.from(P)),P.copy(g,w)):Uint8Array.prototype.set.call(g,P,w);else if(s.isBuffer(P))P.copy(g,w);else throw new TypeError('"list" argument must be an Array of Buffers');w+=P.length}return g};function I(p,d){if(s.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||Ye(p,ArrayBuffer))return p.byteLength;if(typeof p!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof p);const _=p.length,y=arguments.length>2&&arguments[2]===!0;if(!y&&_===0)return 0;let g=!1;for(;;)switch(d){case"ascii":case"latin1":case"binary":return _;case"utf8":case"utf-8":return mr(p).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _*2;case"hex":return _>>>1;case"base64":return ln(p).length;default:if(g)return y?-1:mr(p).length;d=(""+d).toLowerCase(),g=!0}}s.byteLength=I;function A(p,d,_){let y=!1;if((d===void 0||d<0)&&(d=0),d>this.length||((_===void 0||_>this.length)&&(_=this.length),_<=0)||(_>>>=0,d>>>=0,_<=d))return"";for(p||(p="utf8");;)switch(p){case"hex":return H(this,d,_);case"utf8":case"utf-8":return ze(this,d,_);case"ascii":return V(this,d,_);case"latin1":case"binary":return ee(this,d,_);case"base64":return de(this,d,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,d,_);default:if(y)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase(),y=!0}}s.prototype._isBuffer=!0;function j(p,d,_){const y=p[d];p[d]=p[_],p[_]=y}s.prototype.swap16=function(){const d=this.length;if(d%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let _=0;_<d;_+=2)j(this,_,_+1);return this},s.prototype.swap32=function(){const d=this.length;if(d%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let _=0;_<d;_+=4)j(this,_,_+3),j(this,_+1,_+2);return this},s.prototype.swap64=function(){const d=this.length;if(d%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let _=0;_<d;_+=8)j(this,_,_+7),j(this,_+1,_+6),j(this,_+2,_+5),j(this,_+3,_+4);return this},s.prototype.toString=function(){const d=this.length;return d===0?"":arguments.length===0?ze(this,0,d):A.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(d){if(!s.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d?!0:s.compare(this,d)===0},s.prototype.inspect=function(){let d="";const _=e.INSPECT_MAX_BYTES;return d=this.toString("hex",0,_).replace(/(.{2})/g,"$1 ").trim(),this.length>_&&(d+=" ... "),"<Buffer "+d+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(d,_,y,g,w){if(Ye(d,Uint8Array)&&(d=s.from(d,d.offset,d.byteLength)),!s.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(_===void 0&&(_=0),y===void 0&&(y=d?d.length:0),g===void 0&&(g=0),w===void 0&&(w=this.length),_<0||y>d.length||g<0||w>this.length)throw new RangeError("out of range index");if(g>=w&&_>=y)return 0;if(g>=w)return-1;if(_>=y)return 1;if(_>>>=0,y>>>=0,g>>>=0,w>>>=0,this===d)return 0;let P=w-g,Z=y-_;const ve=Math.min(P,Z),le=this.slice(g,w),pe=d.slice(_,y);for(let ae=0;ae<ve;++ae)if(le[ae]!==pe[ae]){P=le[ae],Z=pe[ae];break}return P<Z?-1:Z<P?1:0};function k(p,d,_,y,g){if(p.length===0)return-1;if(typeof _=="string"?(y=_,_=0):_>2147483647?_=2147483647:_<-2147483648&&(_=-2147483648),_=+_,gr(_)&&(_=g?0:p.length-1),_<0&&(_=p.length+_),_>=p.length){if(g)return-1;_=p.length-1}else if(_<0)if(g)_=0;else return-1;if(typeof d=="string"&&(d=s.from(d,y)),s.isBuffer(d))return d.length===0?-1:M(p,d,_,y,g);if(typeof d=="number")return d=d&255,typeof Uint8Array.prototype.indexOf=="function"?g?Uint8Array.prototype.indexOf.call(p,d,_):Uint8Array.prototype.lastIndexOf.call(p,d,_):M(p,[d],_,y,g);throw new TypeError("val must be string, number or Buffer")}function M(p,d,_,y,g){let w=1,P=p.length,Z=d.length;if(y!==void 0&&(y=String(y).toLowerCase(),y==="ucs2"||y==="ucs-2"||y==="utf16le"||y==="utf-16le")){if(p.length<2||d.length<2)return-1;w=2,P/=2,Z/=2,_/=2}function ve(pe,ae){return w===1?pe[ae]:pe.readUInt16BE(ae*w)}let le;if(g){let pe=-1;for(le=_;le<P;le++)if(ve(p,le)===ve(d,pe===-1?0:le-pe)){if(pe===-1&&(pe=le),le-pe+1===Z)return pe*w}else pe!==-1&&(le-=le-pe),pe=-1}else for(_+Z>P&&(_=P-Z),le=_;le>=0;le--){let pe=!0;for(let ae=0;ae<Z;ae++)if(ve(p,le+ae)!==ve(d,ae)){pe=!1;break}if(pe)return le}return-1}s.prototype.includes=function(d,_,y){return this.indexOf(d,_,y)!==-1},s.prototype.indexOf=function(d,_,y){return k(this,d,_,y,!0)},s.prototype.lastIndexOf=function(d,_,y){return k(this,d,_,y,!1)};function q(p,d,_,y){_=Number(_)||0;const g=p.length-_;y?(y=Number(y),y>g&&(y=g)):y=g;const w=d.length;y>w/2&&(y=w/2);let P;for(P=0;P<y;++P){const Z=parseInt(d.substr(P*2,2),16);if(gr(Z))return P;p[_+P]=Z}return P}function ne(p,d,_,y){return Vt(mr(d,p.length-_),p,_,y)}function ie(p,d,_,y){return Vt(yi(d),p,_,y)}function _e(p,d,_,y){return Vt(ln(d),p,_,y)}function X(p,d,_,y){return Vt(mi(d,p.length-_),p,_,y)}s.prototype.write=function(d,_,y,g){if(_===void 0)g="utf8",y=this.length,_=0;else if(y===void 0&&typeof _=="string")g=_,y=this.length,_=0;else if(isFinite(_))_=_>>>0,isFinite(y)?(y=y>>>0,g===void 0&&(g="utf8")):(g=y,y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const w=this.length-_;if((y===void 0||y>w)&&(y=w),d.length>0&&(y<0||_<0)||_>this.length)throw new RangeError("Attempt to write outside buffer bounds");g||(g="utf8");let P=!1;for(;;)switch(g){case"hex":return q(this,d,_,y);case"utf8":case"utf-8":return ne(this,d,_,y);case"ascii":case"latin1":case"binary":return ie(this,d,_,y);case"base64":return _e(this,d,_,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,d,_,y);default:if(P)throw new TypeError("Unknown encoding: "+g);g=(""+g).toLowerCase(),P=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function de(p,d,_){return d===0&&_===p.length?r.fromByteArray(p):r.fromByteArray(p.slice(d,_))}function ze(p,d,_){_=Math.min(p.length,_);const y=[];let g=d;for(;g<_;){const w=p[g];let P=null,Z=w>239?4:w>223?3:w>191?2:1;if(g+Z<=_){let ve,le,pe,ae;switch(Z){case 1:w<128&&(P=w);break;case 2:ve=p[g+1],(ve&192)===128&&(ae=(w&31)<<6|ve&63,ae>127&&(P=ae));break;case 3:ve=p[g+1],le=p[g+2],(ve&192)===128&&(le&192)===128&&(ae=(w&15)<<12|(ve&63)<<6|le&63,ae>2047&&(ae<55296||ae>57343)&&(P=ae));break;case 4:ve=p[g+1],le=p[g+2],pe=p[g+3],(ve&192)===128&&(le&192)===128&&(pe&192)===128&&(ae=(w&15)<<18|(ve&63)<<12|(le&63)<<6|pe&63,ae>65535&&ae<1114112&&(P=ae))}}P===null?(P=65533,Z=1):P>65535&&(P-=65536,y.push(P>>>10&1023|55296),P=56320|P&1023),y.push(P),g+=Z}return he(y)}const Y=4096;function he(p){const d=p.length;if(d<=Y)return String.fromCharCode.apply(String,p);let _="",y=0;for(;y<d;)_+=String.fromCharCode.apply(String,p.slice(y,y+=Y));return _}function V(p,d,_){let y="";_=Math.min(p.length,_);for(let g=d;g<_;++g)y+=String.fromCharCode(p[g]&127);return y}function ee(p,d,_){let y="";_=Math.min(p.length,_);for(let g=d;g<_;++g)y+=String.fromCharCode(p[g]);return y}function H(p,d,_){const y=p.length;(!d||d<0)&&(d=0),(!_||_<0||_>y)&&(_=y);let g="";for(let w=d;w<_;++w)g+=gi[p[w]];return g}function L(p,d,_){const y=p.slice(d,_);let g="";for(let w=0;w<y.length-1;w+=2)g+=String.fromCharCode(y[w]+y[w+1]*256);return g}s.prototype.slice=function(d,_){const y=this.length;d=~~d,_=_===void 0?y:~~_,d<0?(d+=y,d<0&&(d=0)):d>y&&(d=y),_<0?(_+=y,_<0&&(_=0)):_>y&&(_=y),_<d&&(_=d);const g=this.subarray(d,_);return Object.setPrototypeOf(g,s.prototype),g};function W(p,d,_){if(p%1!==0||p<0)throw new RangeError("offset is not uint");if(p+d>_)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(d,_,y){d=d>>>0,_=_>>>0,y||W(d,_,this.length);let g=this[d],w=1,P=0;for(;++P<_&&(w*=256);)g+=this[d+P]*w;return g},s.prototype.readUintBE=s.prototype.readUIntBE=function(d,_,y){d=d>>>0,_=_>>>0,y||W(d,_,this.length);let g=this[d+--_],w=1;for(;_>0&&(w*=256);)g+=this[d+--_]*w;return g},s.prototype.readUint8=s.prototype.readUInt8=function(d,_){return d=d>>>0,_||W(d,1,this.length),this[d]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(d,_){return d=d>>>0,_||W(d,2,this.length),this[d]|this[d+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(d,_){return d=d>>>0,_||W(d,2,this.length),this[d]<<8|this[d+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(d,_){return d=d>>>0,_||W(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+this[d+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(d,_){return d=d>>>0,_||W(d,4,this.length),this[d]*16777216+(this[d+1]<<16|this[d+2]<<8|this[d+3])},s.prototype.readBigUInt64LE=Je(function(d){d=d>>>0,ye(d,"offset");const _=this[d],y=this[d+7];(_===void 0||y===void 0)&&ke(d,this.length-8);const g=_+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24,w=this[++d]+this[++d]*2**8+this[++d]*2**16+y*2**24;return BigInt(g)+(BigInt(w)<<BigInt(32))}),s.prototype.readBigUInt64BE=Je(function(d){d=d>>>0,ye(d,"offset");const _=this[d],y=this[d+7];(_===void 0||y===void 0)&&ke(d,this.length-8);const g=_*2**24+this[++d]*2**16+this[++d]*2**8+this[++d],w=this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+y;return(BigInt(g)<<BigInt(32))+BigInt(w)}),s.prototype.readIntLE=function(d,_,y){d=d>>>0,_=_>>>0,y||W(d,_,this.length);let g=this[d],w=1,P=0;for(;++P<_&&(w*=256);)g+=this[d+P]*w;return w*=128,g>=w&&(g-=Math.pow(2,8*_)),g},s.prototype.readIntBE=function(d,_,y){d=d>>>0,_=_>>>0,y||W(d,_,this.length);let g=_,w=1,P=this[d+--g];for(;g>0&&(w*=256);)P+=this[d+--g]*w;return w*=128,P>=w&&(P-=Math.pow(2,8*_)),P},s.prototype.readInt8=function(d,_){return d=d>>>0,_||W(d,1,this.length),this[d]&128?(255-this[d]+1)*-1:this[d]},s.prototype.readInt16LE=function(d,_){d=d>>>0,_||W(d,2,this.length);const y=this[d]|this[d+1]<<8;return y&32768?y|4294901760:y},s.prototype.readInt16BE=function(d,_){d=d>>>0,_||W(d,2,this.length);const y=this[d+1]|this[d]<<8;return y&32768?y|4294901760:y},s.prototype.readInt32LE=function(d,_){return d=d>>>0,_||W(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},s.prototype.readInt32BE=function(d,_){return d=d>>>0,_||W(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},s.prototype.readBigInt64LE=Je(function(d){d=d>>>0,ye(d,"offset");const _=this[d],y=this[d+7];(_===void 0||y===void 0)&&ke(d,this.length-8);const g=this[d+4]+this[d+5]*2**8+this[d+6]*2**16+(y<<24);return(BigInt(g)<<BigInt(32))+BigInt(_+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24)}),s.prototype.readBigInt64BE=Je(function(d){d=d>>>0,ye(d,"offset");const _=this[d],y=this[d+7];(_===void 0||y===void 0)&&ke(d,this.length-8);const g=(_<<24)+this[++d]*2**16+this[++d]*2**8+this[++d];return(BigInt(g)<<BigInt(32))+BigInt(this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+y)}),s.prototype.readFloatLE=function(d,_){return d=d>>>0,_||W(d,4,this.length),t.read(this,d,!0,23,4)},s.prototype.readFloatBE=function(d,_){return d=d>>>0,_||W(d,4,this.length),t.read(this,d,!1,23,4)},s.prototype.readDoubleLE=function(d,_){return d=d>>>0,_||W(d,8,this.length),t.read(this,d,!0,52,8)},s.prototype.readDoubleBE=function(d,_){return d=d>>>0,_||W(d,8,this.length),t.read(this,d,!1,52,8)};function J(p,d,_,y,g,w){if(!s.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>g||d<w)throw new RangeError('"value" argument is out of bounds');if(_+y>p.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(d,_,y,g){if(d=+d,_=_>>>0,y=y>>>0,!g){const Z=Math.pow(2,8*y)-1;J(this,d,_,y,Z,0)}let w=1,P=0;for(this[_]=d&255;++P<y&&(w*=256);)this[_+P]=d/w&255;return _+y},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(d,_,y,g){if(d=+d,_=_>>>0,y=y>>>0,!g){const Z=Math.pow(2,8*y)-1;J(this,d,_,y,Z,0)}let w=y-1,P=1;for(this[_+w]=d&255;--w>=0&&(P*=256);)this[_+w]=d/P&255;return _+y},s.prototype.writeUint8=s.prototype.writeUInt8=function(d,_,y){return d=+d,_=_>>>0,y||J(this,d,_,1,255,0),this[_]=d&255,_+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(d,_,y){return d=+d,_=_>>>0,y||J(this,d,_,2,65535,0),this[_]=d&255,this[_+1]=d>>>8,_+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(d,_,y){return d=+d,_=_>>>0,y||J(this,d,_,2,65535,0),this[_]=d>>>8,this[_+1]=d&255,_+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(d,_,y){return d=+d,_=_>>>0,y||J(this,d,_,4,4294967295,0),this[_+3]=d>>>24,this[_+2]=d>>>16,this[_+1]=d>>>8,this[_]=d&255,_+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(d,_,y){return d=+d,_=_>>>0,y||J(this,d,_,4,4294967295,0),this[_]=d>>>24,this[_+1]=d>>>16,this[_+2]=d>>>8,this[_+3]=d&255,_+4};function me(p,d,_,y,g){K(d,y,g,p,_,7);let w=Number(d&BigInt(4294967295));p[_++]=w,w=w>>8,p[_++]=w,w=w>>8,p[_++]=w,w=w>>8,p[_++]=w;let P=Number(d>>BigInt(32)&BigInt(4294967295));return p[_++]=P,P=P>>8,p[_++]=P,P=P>>8,p[_++]=P,P=P>>8,p[_++]=P,_}function z(p,d,_,y,g){K(d,y,g,p,_,7);let w=Number(d&BigInt(4294967295));p[_+7]=w,w=w>>8,p[_+6]=w,w=w>>8,p[_+5]=w,w=w>>8,p[_+4]=w;let P=Number(d>>BigInt(32)&BigInt(4294967295));return p[_+3]=P,P=P>>8,p[_+2]=P,P=P>>8,p[_+1]=P,P=P>>8,p[_]=P,_+8}s.prototype.writeBigUInt64LE=Je(function(d,_=0){return me(this,d,_,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=Je(function(d,_=0){return z(this,d,_,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(d,_,y,g){if(d=+d,_=_>>>0,!g){const ve=Math.pow(2,8*y-1);J(this,d,_,y,ve-1,-ve)}let w=0,P=1,Z=0;for(this[_]=d&255;++w<y&&(P*=256);)d<0&&Z===0&&this[_+w-1]!==0&&(Z=1),this[_+w]=(d/P>>0)-Z&255;return _+y},s.prototype.writeIntBE=function(d,_,y,g){if(d=+d,_=_>>>0,!g){const ve=Math.pow(2,8*y-1);J(this,d,_,y,ve-1,-ve)}let w=y-1,P=1,Z=0;for(this[_+w]=d&255;--w>=0&&(P*=256);)d<0&&Z===0&&this[_+w+1]!==0&&(Z=1),this[_+w]=(d/P>>0)-Z&255;return _+y},s.prototype.writeInt8=function(d,_,y){return d=+d,_=_>>>0,y||J(this,d,_,1,127,-128),d<0&&(d=255+d+1),this[_]=d&255,_+1},s.prototype.writeInt16LE=function(d,_,y){return d=+d,_=_>>>0,y||J(this,d,_,2,32767,-32768),this[_]=d&255,this[_+1]=d>>>8,_+2},s.prototype.writeInt16BE=function(d,_,y){return d=+d,_=_>>>0,y||J(this,d,_,2,32767,-32768),this[_]=d>>>8,this[_+1]=d&255,_+2},s.prototype.writeInt32LE=function(d,_,y){return d=+d,_=_>>>0,y||J(this,d,_,4,2147483647,-2147483648),this[_]=d&255,this[_+1]=d>>>8,this[_+2]=d>>>16,this[_+3]=d>>>24,_+4},s.prototype.writeInt32BE=function(d,_,y){return d=+d,_=_>>>0,y||J(this,d,_,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),this[_]=d>>>24,this[_+1]=d>>>16,this[_+2]=d>>>8,this[_+3]=d&255,_+4},s.prototype.writeBigInt64LE=Je(function(d,_=0){return me(this,d,_,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=Je(function(d,_=0){return z(this,d,_,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Oe(p,d,_,y,g,w){if(_+y>p.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("Index out of range")}function ce(p,d,_,y,g){return d=+d,_=_>>>0,g||Oe(p,d,_,4),t.write(p,d,_,y,23,4),_+4}s.prototype.writeFloatLE=function(d,_,y){return ce(this,d,_,!0,y)},s.prototype.writeFloatBE=function(d,_,y){return ce(this,d,_,!1,y)};function Be(p,d,_,y,g){return d=+d,_=_>>>0,g||Oe(p,d,_,8),t.write(p,d,_,y,52,8),_+8}s.prototype.writeDoubleLE=function(d,_,y){return Be(this,d,_,!0,y)},s.prototype.writeDoubleBE=function(d,_,y){return Be(this,d,_,!1,y)},s.prototype.copy=function(d,_,y,g){if(!s.isBuffer(d))throw new TypeError("argument should be a Buffer");if(y||(y=0),!g&&g!==0&&(g=this.length),_>=d.length&&(_=d.length),_||(_=0),g>0&&g<y&&(g=y),g===y||d.length===0||this.length===0)return 0;if(_<0)throw new RangeError("targetStart out of bounds");if(y<0||y>=this.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("sourceEnd out of bounds");g>this.length&&(g=this.length),d.length-_<g-y&&(g=d.length-_+y);const w=g-y;return this===d&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(_,y,g):Uint8Array.prototype.set.call(d,this.subarray(y,g),_),w},s.prototype.fill=function(d,_,y,g){if(typeof d=="string"){if(typeof _=="string"?(g=_,_=0,y=this.length):typeof y=="string"&&(g=y,y=this.length),g!==void 0&&typeof g!="string")throw new TypeError("encoding must be a string");if(typeof g=="string"&&!s.isEncoding(g))throw new TypeError("Unknown encoding: "+g);if(d.length===1){const P=d.charCodeAt(0);(g==="utf8"&&P<128||g==="latin1")&&(d=P)}}else typeof d=="number"?d=d&255:typeof d=="boolean"&&(d=Number(d));if(_<0||this.length<_||this.length<y)throw new RangeError("Out of range index");if(y<=_)return this;_=_>>>0,y=y===void 0?this.length:y>>>0,d||(d=0);let w;if(typeof d=="number")for(w=_;w<y;++w)this[w]=d;else{const P=s.isBuffer(d)?d:s.from(d,g),Z=P.length;if(Z===0)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for(w=0;w<y-_;++w)this[w+_]=P[w%Z]}return this};const O={};function C(p,d,_){O[p]=class extends _{constructor(){super(),Object.defineProperty(this,"message",{value:d.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${p}]`,this.stack,delete this.name}get code(){return p}set code(g){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:g,writable:!0})}toString(){return`${this.name} [${p}]: ${this.message}`}}}C("ERR_BUFFER_OUT_OF_BOUNDS",function(p){return p?`${p} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),C("ERR_INVALID_ARG_TYPE",function(p,d){return`The "${p}" argument must be of type number. Received type ${typeof d}`},TypeError),C("ERR_OUT_OF_RANGE",function(p,d,_){let y=`The value of "${p}" is out of range.`,g=_;return Number.isInteger(_)&&Math.abs(_)>2**32?g=$(String(_)):typeof _=="bigint"&&(g=String(_),(_>BigInt(2)**BigInt(32)||_<-(BigInt(2)**BigInt(32)))&&(g=$(g)),g+="n"),y+=` It must be ${d}. Received ${g}`,y},RangeError);function $(p){let d="",_=p.length;const y=p[0]==="-"?1:0;for(;_>=y+4;_-=3)d=`_${p.slice(_-3,_)}${d}`;return`${p.slice(0,_)}${d}`}function U(p,d,_){ye(d,"offset"),(p[d]===void 0||p[d+_]===void 0)&&ke(d,p.length-(_+1))}function K(p,d,_,y,g,w){if(p>_||p<d){const P=typeof d=="bigint"?"n":"";let Z;throw d===0||d===BigInt(0)?Z=`>= 0${P} and < 2${P} ** ${(w+1)*8}${P}`:Z=`>= -(2${P} ** ${(w+1)*8-1}${P}) and < 2 ** ${(w+1)*8-1}${P}`,new O.ERR_OUT_OF_RANGE("value",Z,p)}U(y,g,w)}function ye(p,d){if(typeof p!="number")throw new O.ERR_INVALID_ARG_TYPE(d,"number",p)}function ke(p,d,_){throw Math.floor(p)!==p?(ye(p,_),new O.ERR_OUT_OF_RANGE("offset","an integer",p)):d<0?new O.ERR_BUFFER_OUT_OF_BOUNDS:new O.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${d}`,p)}const Pt=/[^+/0-9A-Za-z-_]/g;function yr(p){if(p=p.split("=")[0],p=p.trim().replace(Pt,""),p.length<2)return"";for(;p.length%4!==0;)p=p+"=";return p}function mr(p,d){d=d||1/0;let _;const y=p.length;let g=null;const w=[];for(let P=0;P<y;++P){if(_=p.charCodeAt(P),_>55295&&_<57344){if(!g){if(_>56319){(d-=3)>-1&&w.push(239,191,189);continue}else if(P+1===y){(d-=3)>-1&&w.push(239,191,189);continue}g=_;continue}if(_<56320){(d-=3)>-1&&w.push(239,191,189),g=_;continue}_=(g-55296<<10|_-56320)+65536}else g&&(d-=3)>-1&&w.push(239,191,189);if(g=null,_<128){if((d-=1)<0)break;w.push(_)}else if(_<2048){if((d-=2)<0)break;w.push(_>>6|192,_&63|128)}else if(_<65536){if((d-=3)<0)break;w.push(_>>12|224,_>>6&63|128,_&63|128)}else if(_<1114112){if((d-=4)<0)break;w.push(_>>18|240,_>>12&63|128,_>>6&63|128,_&63|128)}else throw new Error("Invalid code point")}return w}function yi(p){const d=[];for(let _=0;_<p.length;++_)d.push(p.charCodeAt(_)&255);return d}function mi(p,d){let _,y,g;const w=[];for(let P=0;P<p.length&&!((d-=2)<0);++P)_=p.charCodeAt(P),y=_>>8,g=_%256,w.push(g),w.push(y);return w}function ln(p){return r.toByteArray(yr(p))}function Vt(p,d,_,y){let g;for(g=0;g<y&&!(g+_>=d.length||g>=p.length);++g)d[g+_]=p[g];return g}function Ye(p,d){return p instanceof d||p!=null&&p.constructor!=null&&p.constructor.name!=null&&p.constructor.name===d.name}function gr(p){return p!==p}const gi=function(){const p="0123456789abcdef",d=new Array(256);for(let _=0;_<16;++_){const y=_*16;for(let g=0;g<16;++g)d[y+g]=p[_]+p[g]}return d}();function Je(p){return typeof BigInt>"u"?Oi:p}function Oi(){throw new Error("BigInt not supported")}})(nc);var sn={},oc={},eF=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(oc,"__esModule",{value:!0});var Fy=function(){function e(r){this.position=0,this.length=r}return e.prototype.getUInt8=function(r){throw new Error("Not implemented")},e.prototype.getInt8=function(r){throw new Error("Not implemented")},e.prototype.getFloat64=function(r){throw new Error("Not implemented")},e.prototype.getVarInt=function(r){throw new Error("Not implemented")},e.prototype.putUInt8=function(r,t){throw new Error("Not implemented")},e.prototype.putInt8=function(r,t){throw new Error("Not implemented")},e.prototype.putFloat64=function(r,t){throw new Error("Not implemented")},e.prototype.getInt16=function(r){return this.getInt8(r)<<8|this.getUInt8(r+1)},e.prototype.getUInt16=function(r){return this.getUInt8(r)<<8|this.getUInt8(r+1)},e.prototype.getInt32=function(r){return this.getInt8(r)<<24|this.getUInt8(r+1)<<16|this.getUInt8(r+2)<<8|this.getUInt8(r+3)},e.prototype.getUInt32=function(r){return this.getUInt8(r)<<24|this.getUInt8(r+1)<<16|this.getUInt8(r+2)<<8|this.getUInt8(r+3)},e.prototype.getInt64=function(r){return this.getInt8(r)<<56|this.getUInt8(r+1)<<48|this.getUInt8(r+2)<<40|this.getUInt8(r+3)<<32|this.getUInt8(r+4)<<24|this.getUInt8(r+5)<<16|this.getUInt8(r+6)<<8|this.getUInt8(r+7)},e.prototype.getSlice=function(r,t){return new tF(r,t,this)},e.prototype.putInt16=function(r,t){this.putInt8(r,t>>8),this.putUInt8(r+1,t&255)},e.prototype.putUInt16=function(r,t){this.putUInt8(r,t>>8&255),this.putUInt8(r+1,t&255)},e.prototype.putInt32=function(r,t){this.putInt8(r,t>>24),this.putUInt8(r+1,t>>16&255),this.putUInt8(r+2,t>>8&255),this.putUInt8(r+3,t&255)},e.prototype.putUInt32=function(r,t){this.putUInt8(r,t>>24&255),this.putUInt8(r+1,t>>16&255),this.putUInt8(r+2,t>>8&255),this.putUInt8(r+3,t&255)},e.prototype.putInt64=function(r,t){this.putInt8(r,t>>48),this.putUInt8(r+1,t>>42&255),this.putUInt8(r+2,t>>36&255),this.putUInt8(r+3,t>>30&255),this.putUInt8(r+4,t>>24&255),this.putUInt8(r+5,t>>16&255),this.putUInt8(r+6,t>>8&255),this.putUInt8(r+7,t&255)},e.prototype.putVarInt=function(r,t){for(var n=0;t>1;){var i=t%128;t>=128&&(i+=128),t=t/128,this.putUInt8(r+n,i),n+=1}return n},e.prototype.putBytes=function(r,t){for(var n=0,i=t.remaining();n<i;n++)this.putUInt8(r+n,t.readUInt8())},e.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},e.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},e.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},e.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},e.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},e.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},e.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},e.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},e.prototype.readVarInt=function(){var r=this.getVarInt(this.position);return this._updatePos(r.length),r.value},e.prototype.writeUInt8=function(r){this.putUInt8(this._updatePos(1),r)},e.prototype.writeInt8=function(r){this.putInt8(this._updatePos(1),r)},e.prototype.writeInt16=function(r){this.putInt16(this._updatePos(2),r)},e.prototype.writeInt32=function(r){this.putInt32(this._updatePos(4),r)},e.prototype.writeUInt32=function(r){this.putUInt32(this._updatePos(4),r)},e.prototype.writeInt64=function(r){this.putInt64(this._updatePos(8),r)},e.prototype.writeFloat64=function(r){this.putFloat64(this._updatePos(8),r)},e.prototype.writeVarInt=function(r){var t=this.putVarInt(this.position,r);this._updatePos(t)},e.prototype.writeBytes=function(r){this.putBytes(this._updatePos(r.remaining()),r)},e.prototype.readSlice=function(r){return this.getSlice(this._updatePos(r),r)},e.prototype._updatePos=function(r){var t=this.position;return this.position+=r,t},e.prototype.remaining=function(){return this.length-this.position},e.prototype.hasRemaining=function(){return this.remaining()>0},e.prototype.reset=function(){this.position=0},e.prototype.toString=function(){return this.constructor.name+"( position="+this.position+` )
  `+this.toHex()},e.prototype.toHex=function(){for(var r="",t=0;t<this.length;t++){var n=this.getUInt8(t).toString(16);n.length===1&&(n="0"+n),r+=n,t!==this.length-1&&(r+=" ")}return r},e}();oc.default=Fy;var tF=function(e){eF(r,e);function r(t,n,i){var o=e.call(this,n)||this;return o._start=t,o._inner=i,o}return r.prototype.putUInt8=function(t,n){this._inner.putUInt8(this._start+t,n)},r.prototype.getUInt8=function(t){return this._inner.getUInt8(this._start+t)},r.prototype.putInt8=function(t,n){this._inner.putInt8(this._start+t,n)},r.prototype.putFloat64=function(t,n){this._inner.putFloat64(this._start+t,n)},r.prototype.getInt8=function(t){return this._inner.getInt8(this._start+t)},r.prototype.getFloat64=function(t){return this._inner.getFloat64(this._start+t)},r}(Fy),rF=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sn,"__esModule",{value:!0});sn.BaseBuffer=void 0;var By=rF(oc);sn.BaseBuffer=By.default;sn.default=By.default;var nF=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wy=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.alloc=void 0;var Eu=Wy(nc),iF=Wy(sn),xy=function(e){nF(r,e);function r(t){var n=this,i=aF(t);return n=e.call(this,i.length)||this,n._buffer=i,n}return r.prototype.getUInt8=function(t){return this._buffer.readUInt8(t)},r.prototype.getInt8=function(t){return this._buffer.readInt8(t)},r.prototype.getFloat64=function(t){return this._buffer.readDoubleBE(t)},r.prototype.getVarInt=function(t){for(var n=0,i=this._buffer.readInt8(t+n),o=i%128;i/128>=1;)n+=1,i=this._buffer.readInt8(t+n),o+=i%128;return{length:n+1,value:o}},r.prototype.putUInt8=function(t,n){this._buffer.writeUInt8(n,t)},r.prototype.putInt8=function(t,n){this._buffer.writeInt8(n,t)},r.prototype.putFloat64=function(t,n){this._buffer.writeDoubleBE(n,t)},r.prototype.putBytes=function(t,n){if(n instanceof r){var i=Math.min(n.length-n.position,this.length-t);n._buffer.copy(this._buffer,t,n.position,n.position+i),n.position+=i}else e.prototype.putBytes.call(this,t,n)},r.prototype.getSlice=function(t,n){return new r(this._buffer.slice(t,t+n))},r}(iF.default);Ft.default=xy;function oF(e){return new xy(e)}Ft.alloc=oF;function aF(e){return e instanceof Eu.default.Buffer?e:typeof e=="number"&&typeof Eu.default.Buffer.alloc=="function"?Eu.default.Buffer.alloc(e):new Eu.default.Buffer(e)}var uF=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xd,"__esModule",{value:!0});var Mv=uF(Ft),mn=x,Vy=mn.internal.util,qy=Vy.ENCRYPTION_OFF,sF=Vy.ENCRYPTION_ON,Nv=1,cF=3,lF=function(){function e(r,t,n){t===void 0&&(t=gF),n===void 0&&(n=function(u){return new WebSocket(u)});var i=this;this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=r,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._receiveTimeoutId=null,this._closingPromise=null;var o=vF(r,t),a=o.scheme,s=o.error;if(s){this._error=s;return}this._ws=fF(a,r.address,n),this._ws.binaryType="arraybuffer";var c=this;this._ws.onclose=function(u){u&&!u.wasClean&&c._handleConnectionError(),c._open=!1},this._ws.onopen=function(){c._clearConnectionTimeout();var u=c._pending;c._pending=null;for(var l=0;l<u.length;l++)c.write(u[l])},this._ws.onmessage=function(u){if(i._resetTimeout(),c.onmessage){var l=new Mv.default(u.data);c.onmessage(l)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}return e.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired){this._error=(0,mn.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),this.onerror&&this.onerror(this._error);return}this._open&&!this._timedout&&(this._error=(0,mn.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},e.prototype.write=function(r){if(this._pending!==null)this._pending.push(r);else if(r instanceof Mv.default)try{this._ws.send(r._buffer)}catch(t){if(this._ws.readyState!==Nv)this._handleConnectionError();else throw t}else throw(0,mn.newError)("Don't know how to send buffer: "+r)},e.prototype.close=function(){var r=this;return this._closingPromise===null&&(this._closingPromise=new Promise(function(t,n){r._clearConnectionTimeout(),r._ws&&r._ws.readyState!==cF?(r._open=!1,r.stopReceiveTimeout(),r._ws.onclose=function(){t()},r._ws.close()):t()})),this._closingPromise},e.prototype.setupReceiveTimeout=function(r){this._receiveTimeout=r},e.prototype.stopReceiveTimeout=function(){this._receiveTimeout!==null&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,this._receiveTimeoutId!=null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=null)},e.prototype.startReceiveTimeout=function(){this._open&&this._receiveTimeout!==null&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._resetTimeout())},e.prototype._resetTimeout=function(){var r=this;this._receiveTimeoutStarted&&(this._receiveTimeoutId!==null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=setTimeout(function(){r._receiveTimeoutId=null,r._timedout=!0,r.stopReceiveTimeout(),r._error=(0,mn.newError)("Connection lost. Server didn't respond in ".concat(r._receiveTimeout,"ms"),r._config.connectionErrorCode),r.close(),r.onerror&&r.onerror(r._error)},this._receiveTimeout))},e.prototype._setupConnectionTimeout=function(){var r=this,t=this._config.connectionTimeout;if(t){var n=this._ws;return setTimeout(function(){n.readyState!==Nv&&(r._connectionTimeoutFired=!0,n.close())},t)}return null},e.prototype._clearConnectionTimeout=function(){var r=this._connectionTimeoutId;(r||r===0)&&(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(r))},e}();Xd.default=lF;function fF(e,r,t){var n=e+"://"+r.asHostPort();try{return t(n)}catch(o){if(dF(o,r)){var i=_F(e,r);return t(i)}else throw o}}function dF(e,r){return e.name==="SyntaxError"&&hF(r.asHostPort())}function hF(e){return e.charAt(0)==="["&&e.indexOf("]")!==-1}function _F(e,r){var t=r.host().replace(/:/g,"-"),n=t.replace("%","s"),i=n+".ipv6-literal.net";return"".concat(e,"://").concat(i,":").concat(r.port())}function vF(e,r){var t=pF(e),n=bF(e),i=e.trust,o=yF(r);if(mF(t,n,o),n)return{scheme:"ws",error:null};if(o)return{scheme:"wss",error:null};if(t){if(!i||i==="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES")return{scheme:"wss",error:null};var a=(0,mn.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+i+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+qy+'"` in the driver configuration.');return{scheme:null,error:a}}return{scheme:"ws",error:null}}function pF(e){return e.encrypted===!0||e.encrypted===sF}function bF(e){return e.encrypted===!1||e.encrypted===qy}function yF(e){var r=typeof e=="function"?e():"";return r&&r.toLowerCase().indexOf("https")>=0}function mF(e,r,t){t===null||(e&&!t?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):r&&t&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}function gF(){return typeof window<"u"&&window.location?window.location.protocol:null}var eh={},OF=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(eh,"__esModule",{value:!0});var EF=x,wF=EF.internal.resolver.BaseHostNameResolver,TF=function(e){OF(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.resolve=function(t){return this._resolveToItself(t)},r}(wF);eh.default=TF;var th={},SF=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},PF=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(th,"__esModule",{value:!0});th.default={load:function(e){return SF(this,void 0,void 0,function(){return PF(this,function(r){return[2,e]})})}};var rh=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.ClientCertificatesLoader=Kt.HostNameResolver=Kt.Channel=void 0;var CF=rh(Xd),RF=rh(eh),IF=rh(th);Kt.Channel=CF.default;Kt.HostNameResolver=RF.default;Kt.ClientCertificatesLoader=IF.default;var $n={},nh={},AF=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(nh,"__esModule",{value:!0});var jF=sn,MF=Ft,NF=function(e){AF(r,e);function r(t){for(var n=this,i=0,o=0;o<t.length;o++)i+=t[o].length;return n=e.call(this,i)||this,n._buffers=t,n}return r.prototype.getUInt8=function(t){for(var n=0;n<this._buffers.length;n++){var i=this._buffers[n];if(t>=i.length)t-=i.length;else return i.getUInt8(t)}},r.prototype.getInt8=function(t){for(var n=0;n<this._buffers.length;n++){var i=this._buffers[n];if(t>=i.length)t-=i.length;else return i.getInt8(t)}},r.prototype.getFloat64=function(t){for(var n=(0,MF.alloc)(8),i=0;i<8;i++)n.putUInt8(i,this.getUInt8(t+i));return n.getFloat64(0)},r}(jF.BaseBuffer);nh.default=NF;var $F=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Hy=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($n,"__esModule",{value:!0});$n.Dechunker=$n.Chunker=void 0;var kF=Hy(oc),$v=Ft,DF=Hy(nh),wu=2,LF=0,UF=1400,FF=function(e){$F(r,e);function r(t,n){var i=e.call(this,0)||this;return i._bufferSize=n||UF,i._ch=t,i._buffer=(0,$v.alloc)(i._bufferSize),i._currentChunkStart=0,i._chunkOpen=!1,i}return r.prototype.putUInt8=function(t,n){this._ensure(1),this._buffer.writeUInt8(n)},r.prototype.putInt8=function(t,n){this._ensure(1),this._buffer.writeInt8(n)},r.prototype.putFloat64=function(t,n){this._ensure(8),this._buffer.writeFloat64(n)},r.prototype.putBytes=function(t,n){for(;n.remaining()>0;)this._ensure(1),this._buffer.remaining()>n.remaining()?this._buffer.writeBytes(n):this._buffer.writeBytes(n.readSlice(this._buffer.remaining()));return this},r.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var t=this._buffer;this._buffer=null,this._ch.write(t.getSlice(0,t.position)),this._buffer=(0,$v.alloc)(this._bufferSize),this._chunkOpen=!1}return this},r.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<wu&&this.flush(),this._buffer.writeInt16(LF)},r.prototype._ensure=function(t){var n=this._chunkOpen?t:t+wu;this._buffer.remaining()<n&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+wu,this._chunkOpen=!0)},r.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var t=this._buffer.position-(this._currentChunkStart+wu);this._buffer.putUInt16(this._currentChunkStart,t),this._chunkOpen=!1}},r}(kF.default);$n.Chunker=FF;var BF=function(){function e(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return e.prototype.AWAITING_CHUNK=function(r){return r.remaining()>=2?this._onHeader(r.readUInt16()):(this._partialChunkHeader=r.readUInt8()<<8,this.IN_HEADER)},e.prototype.IN_HEADER=function(r){return this._onHeader((this._partialChunkHeader|r.readUInt8())&65535)},e.prototype.IN_CHUNK=function(r){return this._chunkSize<=r.remaining()?(this._currentMessage.push(r.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=r.remaining(),this._currentMessage.push(r.readSlice(r.remaining())),this.IN_CHUNK)},e.prototype.CLOSED=function(r){},e.prototype._onHeader=function(r){if(r===0){var t=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:t=this._currentMessage[0];break;default:t=new DF.default(this._currentMessage);break}return this._currentMessage=[],this.onmessage(t),this.AWAITING_CHUNK}else return this._chunkSize=r,this.IN_CHUNK},e.prototype.write=function(r){for(;r.hasRemaining();)this._state=this._state(r)},e}();$n.Dechunker=BF;var ih={};Object.defineProperty(ih,"__esModule",{value:!0});var ac=x,zy=ac.internal.util,WF=zy.ENCRYPTION_OFF,xF=zy.ENCRYPTION_ON,VF=ac.error.SERVICE_UNAVAILABLE,kv=[null,void 0,!0,!1,xF,WF],Dv=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"],qF=function(){function e(r,t,n,i){this.address=r,this.encrypted=HF(t),this.trust=zF(t),this.trustedCertificates=GF(t),this.knownHostsPath=YF(t),this.connectionErrorCode=n||VF,this.connectionTimeout=t.connectionTimeout,this.clientCertificate=i}return e}();ih.default=qF;function HF(e){var r=e.encrypted;if(kv.indexOf(r)===-1)throw(0,ac.newError)("Illegal value of the encrypted setting ".concat(r,". Expected one of ").concat(kv));return r}function zF(e){var r=e.trust;if(Dv.indexOf(r)===-1)throw(0,ac.newError)("Illegal value of the trust setting ".concat(r,". Expected one of ").concat(Dv));return r}function GF(e){return e.trustedCertificates||[]}function YF(e){return e.knownHosts||null}var oh={},Gy={},rd={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(e,r){var t=nc,n=t.Buffer;function i(a,s){for(var c in a)s[c]=a[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=t:(i(t,r),r.Buffer=o);function o(a,s,c){return n(a,s,c)}o.prototype=Object.create(n.prototype),i(n,o),o.from=function(a,s,c){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,s,c)},o.alloc=function(a,s,c){if(typeof a!="number")throw new TypeError("Argument must be a number");var u=n(a);return s!==void 0?typeof c=="string"?u.fill(s,c):u.fill(s):u.fill(0),u},o.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},o.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(a)}})(rd,rd.exports);var KF=rd.exports,ah=KF.Buffer,Lv=ah.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function ZF(e){if(!e)return"utf8";for(var r;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(r)return;e=(""+e).toLowerCase(),r=!0}}function QF(e){var r=ZF(e);if(typeof r!="string"&&(ah.isEncoding===Lv||!Lv(e)))throw new Error("Unknown encoding: "+e);return r||e}Gy.StringDecoder=ou;function ou(e){this.encoding=QF(e);var r;switch(this.encoding){case"utf16le":this.text=n2,this.end=i2,r=4;break;case"utf8":this.fillLast=e2,r=4;break;case"base64":this.text=o2,this.end=a2,r=3;break;default:this.write=u2,this.end=s2;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=ah.allocUnsafe(r)}ou.prototype.write=function(e){if(e.length===0)return"";var r,t;if(this.lastNeed){if(r=this.fillLast(e),r===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<e.length?r?r+this.text(e,t):this.text(e,t):r||""};ou.prototype.end=r2;ou.prototype.text=t2;ou.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function bf(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function XF(e,r,t){var n=r.length-1;if(n<t)return 0;var i=bf(r[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<t||i===-2?0:(i=bf(r[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<t||i===-2?0:(i=bf(r[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function JF(e,r,t){if((r[0]&192)!==128)return e.lastNeed=0,"�";if(e.lastNeed>1&&r.length>1){if((r[1]&192)!==128)return e.lastNeed=1,"�";if(e.lastNeed>2&&r.length>2&&(r[2]&192)!==128)return e.lastNeed=2,"�"}}function e2(e){var r=this.lastTotal-this.lastNeed,t=JF(this,e);if(t!==void 0)return t;if(this.lastNeed<=e.length)return e.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,r,0,e.length),this.lastNeed-=e.length}function t2(e,r){var t=XF(this,e,r);if(!this.lastNeed)return e.toString("utf8",r);this.lastTotal=t;var n=e.length-(t-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",r,n)}function r2(e){var r=e&&e.length?this.write(e):"";return this.lastNeed?r+"�":r}function n2(e,r){if((e.length-r)%2===0){var t=e.toString("utf16le",r);if(t){var n=t.charCodeAt(t.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",r,e.length-1)}function i2(e){var r=e&&e.length?this.write(e):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,t)}return r}function o2(e,r){var t=(e.length-r)%3;return t===0?e.toString("base64",r):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",r,e.length-t))}function a2(e){var r=e&&e.length?this.write(e):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function u2(e){return e.toString(this.encoding)}function s2(e){return e&&e.length?this.write(e):""}var Yy=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oh,"__esModule",{value:!0});var c2=Yy(Ft),l2=x,yf=Yy(nc),f2=Gy,Uv=new f2.StringDecoder("utf8");function d2(e){return new c2.default(b2(e))}function h2(e,r){if(Object.prototype.hasOwnProperty.call(e,"_buffer"))return _2(e,r);if(Object.prototype.hasOwnProperty.call(e,"_buffers"))return v2(e,r);throw(0,l2.newError)("Don't know how to decode strings from '".concat(e,"'"))}function _2(e,r){var t=e.position,n=t+r;return e.position=Math.min(n,e.length),e._buffer.toString("utf8",t,n)}function v2(e,r){return p2(e,r,function(t){return Uv.write(t._buffer)},function(){return Uv.end()})}function p2(e,r,t,n){var i=r,o=e.position;e._updatePos(Math.min(r,e.length-o));var a=e._buffers.reduce(function(s,c){if(i<=0)return s;if(o>=c.length)return o-=c.length,"";c._updatePos(o-c.position);var u=Math.min(c.length-o,i),l=c.readSlice(u);return c._updatePos(u),i=Math.max(i-l.length,0),o=0,s+t(l)},"");return a+n()}function b2(e){return typeof yf.default.Buffer.from=="function"?yf.default.Buffer.from(e,"utf8"):new yf.default.Buffer(e,"utf8")}oh.default={encode:d2,decode:h2};(function(e){var r=f&&f.__createBinding||(Object.create?function(s,c,u,l){l===void 0&&(l=u);var h=Object.getOwnPropertyDescriptor(c,u);(!h||("get"in h?!c.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(s,l,h)}:function(s,c,u,l){l===void 0&&(l=u),s[l]=c[u]}),t=f&&f.__exportStar||function(s,c){for(var u in s)u!=="default"&&!Object.prototype.hasOwnProperty.call(c,u)&&r(c,s,u)},n=f&&f.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.utf8=e.alloc=e.ChannelConfig=void 0,t(Kt,e),t($n,e);var i=ih;Object.defineProperty(e,"ChannelConfig",{enumerable:!0,get:function(){return n(i).default}});var o=Ft;Object.defineProperty(e,"alloc",{enumerable:!0,get:function(){return o.alloc}});var a=oh;Object.defineProperty(e,"utf8",{enumerable:!0,get:function(){return n(a).default}})})(un);Object.defineProperty(Qd,"__esModule",{value:!0});var Ky=un,Zy=x,y2=1616949271,m2=["5.8","5.7","5.6","5.4","5.3","5.2","5.1","5.0","4.4","4.3","4.2","3.0"],g2=0;function pn(e,r){return{major:e,minor:r}}function O2(e){if(e.length>4)throw(0,Zy.newError)("It should not have more than 4 versions of the protocol");var r=(0,Ky.alloc)(5*4);return r.writeInt32(y2),e.forEach(function(t){if(t instanceof Array){var n=t[0],i=n.major,o=n.minor,a=t[1].minor,s=o-a;r.writeInt32(s<<16|o<<8|i)}else{var i=t.major,o=t.minor;r.writeInt32(o<<8|i)}}),r.reset(),r}function E2(e,r){var t=[e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readUInt8()];if(t[0]===72&&t[1]===84&&t[2]===84&&t[3]===80)throw r.error("Handshake failed since server responded with HTTP."),(0,Zy.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return+(t[3]+"."+t[2])}function w2(e,r,t){for(var n=r.readVarInt(),i=[],o=0;o<n;o++){var a=[r.readUInt8(),r.readUInt8(),r.readUInt8(),r.readUInt8()];i=i.concat(C2(a))}r.readVarInt();var s=R2(),c=0,u=0;i.sort(function(h,v){return Number(h.major)!==Number(v.major)?Number(v.major)-Number(h.major):Number(v.minor)-Number(h.minor)});for(var o=0;o<i.length;o++){var l=i[o];if(m2.includes(l.major+"."+l.minor)){c=l.major,u=l.minor;break}}return new Promise(function(h,v){try{var b=(0,Ky.alloc)(5);b.writeInt32(u<<8|c),b.writeVarInt(s),e.write(b),h({protocolVersion:+(c+"."+u),capabilites:s,consumeRemainingBuffer:function(m){r.hasRemaining()&&m(r.readSlice(r.remaining()))}})}catch(m){v(m)}})}function T2(){return O2([pn(255,1),[pn(5,8),pn(5,0)],[pn(4,4),pn(4,2)],pn(3,0)])}function S2(e,r){return P2(e,r).then(function(t){return t.protocolVersion===255.1?w2(e,t.buffer):t})}Qd.default=S2;function P2(e,r){var t=this;return new Promise(function(n,i){var o=function(a){i(a)};e.onerror=o.bind(t),e._error&&o(e._error),e.onmessage=function(a){try{var s=E2(a,r);n({protocolVersion:s,capabilites:0,buffer:a,consumeRemainingBuffer:function(c){a.hasRemaining()&&c(a.readSlice(a.remaining()))}})}catch(c){i(c)}},e.write(T2())})}function C2(e){for(var r=[],t=e[3],n=e[2],i=0;i<=e[1];i++)r.push({major:t,minor:n-i});return r}function R2(e){return g2}var uh={},uc={},Ue={},re={},sc={},sh=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),I2=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sc,"__esModule",{value:!0});I2(x);var cc=function(){function e(){}return e.ofRecord=function(r){return r===null?e.ofNull():new M2(r)},e.ofMessageResponse=function(r){return r===null?e.ofNull():new A2(r)},e.ofNull=function(){return new j2},Object.defineProperty(e.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),e}();sc.default=cc;var A2=function(e){sh(r,e);function r(t){var n=e.call(this)||this;return n._response=t,n}return Object.defineProperty(r.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNull",{get:function(){return this._response===null},enumerable:!1,configurable:!0}),r}(cc),j2=function(e){sh(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),r}(cc),M2=function(e){sh(r,e);function r(t){var n=e.call(this)||this;return n._record=t,n}return Object.defineProperty(r.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNull",{get:function(){return this._record===null},enumerable:!1,configurable:!0}),r}(cc),Ot={},Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.reuseOngoingRequest=Yr.identity=void 0;var N2=x;function $2(e){return e}Yr.identity=$2;function k2(e,r){r===void 0&&(r=null);var t=new Map;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=N2.json.stringify(n);if(t.has(o))return t.get(o);var a=e.apply(r,n);return t.set(o,a),a.finally(function(){t.delete(o)})}}Yr.reuseOngoingRequest=k2;var lc={},D2=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(lc,"__esModule",{value:!0});lc.equals=void 0;function L2(e,r){var t,n;if(e===r)return!0;if(e===null||r===null)return!1;if(typeof e=="object"&&typeof r=="object"){var i=Object.keys(e),o=Object.keys(r);if(i.length!==o.length)return!1;try{for(var a=D2(i),s=a.next();!s.done;s=a.next()){var c=s.value;if(e[c]!==r[c])return!1}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0}return!1}lc.equals=L2;var U2=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),F2=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Qy=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&U2(r,e,t);return F2(r,e),r};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.object=Ot.functional=void 0;Ot.functional=Qy(Yr);Ot.object=Qy(lc);var Bt=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),B2=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(re,"__esModule",{value:!0});re.TelemetryObserver=re.ProcedureRouteObserver=re.RouteObserver=re.CompletedObserver=re.FailedObserver=re.ResetObserver=re.LogoffObserver=re.LoginObserver=re.ResultStreamObserver=re.StreamObserver=void 0;var He=x,Xy=B2(sc),W2=Ot,x2=He.internal.constants.FETCH_ALL,nr=He.error.PROTOCOL_ERROR,cn=function(){function e(){}return e.prototype.onNext=function(r){},e.prototype.onError=function(r){},e.prototype.onCompleted=function(r){},e}();re.StreamObserver=cn;var fc=function(e){Bt(r,e);function r(t){var n=t===void 0?{}:t,i=n.reactive,o=i===void 0?!1:i,a=n.moreFunction,s=n.discardFunction,c=n.fetchSize,u=c===void 0?x2:c,l=n.beforeError,h=n.afterError,v=n.beforeKeys,b=n.afterKeys,m=n.beforeComplete,E=n.afterComplete,T=n.server,S=n.highRecordWatermark,R=S===void 0?Number.MAX_VALUE:S,I=n.lowRecordWatermark,A=I===void 0?Number.MAX_VALUE:I,j=n.enrichMetadata,k=n.onDb,M=e.call(this)||this;return M._fieldKeys=null,M._fieldLookup=null,M._head=null,M._queuedRecords=[],M._tail=null,M._error=null,M._observers=[],M._meta={},M._server=T,M._beforeError=l,M._afterError=h,M._beforeKeys=v,M._afterKeys=b,M._beforeComplete=m,M._afterComplete=E,M._enrichMetadata=j||W2.functional.identity,M._queryId=null,M._moreFunction=a,M._discardFunction=s,M._discard=!1,M._fetchSize=u,M._lowRecordWatermark=A,M._highRecordWatermark=R,M._setState(o?ut.READY:ut.READY_STREAMING),M._setupAutoPull(),M._paused=!1,M._pulled=!o,M._haveRecordStreamed=!1,M._onDb=k,M}return r.prototype.pause=function(){this._paused=!0},r.prototype.resume=function(){this._paused=!1,this._setupAutoPull(!0),this._state.pull(this)},r.prototype.onNext=function(t){this._haveRecordStreamed=!0;var n=new He.Record(this._fieldKeys,t,this._fieldLookup);this._observers.some(function(i){return i.onNext})?this._observers.forEach(function(i){i.onNext&&i.onNext(n)}):(this._queuedRecords.push(n),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},r.prototype.onCompleted=function(t){this._state.onSuccess(this,t)},r.prototype.onError=function(t){this._state.onError(this,t)},r.prototype.cancel=function(){this._discard=!0},r.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(ut.STREAMING)},r.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(ut.SUCCEEDED)},r.prototype.subscribe=function(t){if(this._head&&t.onKeys&&t.onKeys(this._head),this._queuedRecords.length>0&&t.onNext)for(var n=0;n<this._queuedRecords.length;n++)t.onNext(this._queuedRecords[n]),this._queuedRecords.length-n-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===ut.READY&&this._handleStreaming());this._tail&&t.onCompleted&&t.onCompleted(this._tail),this._error&&t.onError(this._error),this._observers.push(t),this._state===ut.READY&&this._handleStreaming()},r.prototype._handleHasMore=function(t){this._setState(ut.READY),this._handleStreaming(),delete t.has_more},r.prototype._handlePullSuccess=function(t){var n=this,i=this._enrichMetadata(Object.assign(this._server?{server:this._server}:{},this._meta,{stream_summary:{have_records_streamed:this._haveRecordStreamed,pulled:this._pulled,has_keys:this._fieldKeys.length>0}},t));if(![void 0,null,"r","w","rw","s"].includes(i.type)){this.onError((0,He.newError)(`Server returned invalid query type. Expected one of [undefined, null, "r", "w", "rw", "s"] but got '`.concat(i.type,"'"),nr));return}this._setState(ut.SUCCEEDED);var o=null;this._beforeComplete&&(o=this._beforeComplete(i));var a=function(){n._tail=i,n._observers.some(function(s){return s.onCompleted})&&n._observers.forEach(function(s){s.onCompleted&&s.onCompleted(i)}),n._afterComplete&&n._afterComplete(i)};o?Promise.resolve(o).then(function(){return a()}):a()},r.prototype._handleRunSuccess=function(t,n){var i=this;if(this._fieldKeys===null){if(this._fieldKeys=[],this._fieldLookup={},t.fields&&t.fields.length>0){this._fieldKeys=t.fields;for(var o=0;o<t.fields.length;o++)this._fieldLookup[t.fields[o]]=o}t.db!==null&&this._onDb!==void 0&&this._onDb(t.db),t.fields!=null&&delete t.fields,t.qid!==null&&t.qid!==void 0&&(this._queryId=t.qid,delete t.qid),this._storeMetadataForCompletion(t);var a=null;this._beforeKeys&&(a=this._beforeKeys(this._fieldKeys));var s=function(){i._head=i._fieldKeys,i._observers.some(function(c){return c.onKeys})&&i._observers.forEach(function(c){c.onKeys&&c.onKeys(i._fieldKeys)}),i._afterKeys&&i._afterKeys(i._fieldKeys),n()};a?Promise.resolve(a).then(function(){return s()}):s()}},r.prototype._handleError=function(t){var n=this;this._setState(ut.FAILED),this._error=t;var i=null;this._beforeError&&(i=this._beforeError(t));var o=function(){n._observers.some(function(a){return a.onError})&&n._observers.forEach(function(a){a.onError&&a.onError(t)}),n._afterError&&n._afterError(t)};i?Promise.resolve(i).then(function(){return o()}):o()},r.prototype._handleStreaming=function(){this._head&&this._observers.some(function(t){return t.onNext||t.onCompleted})&&!this._paused&&(this._discard||this._autoPull)&&this._more()},r.prototype._more=function(){this._discard?this._discardFunction(this._queryId,this):(this._pulled=!0,this._moreFunction(this._queryId,this._fetchSize,this)),this._setState(ut.STREAMING)},r.prototype._storeMetadataForCompletion=function(t){for(var n=Object.keys(t),i=n.length,o="";i--;)o=n[i],this._meta[o]=t[o]},r.prototype._setState=function(t){this._state=t},r.prototype._setupAutoPull=function(){this._autoPull=!0},r}(cn);re.ResultStreamObserver=fc;var V2=function(e){Bt(r,e);function r(t){var n=t===void 0?{}:t,i=n.onError,o=n.onCompleted,a=e.call(this)||this;return a._onError=i,a._onCompleted=o,a}return r.prototype.onNext=function(t){this.onError((0,He.newError)("Received RECORD when initializing "+He.json.stringify(t)))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(cn);re.LoginObserver=V2;var q2=function(e){Bt(r,e);function r(t){var n=t===void 0?{}:t,i=n.onError,o=n.onCompleted,a=e.call(this)||this;return a._onError=i,a._onCompleted=o,a}return r.prototype.onNext=function(t){this.onError((0,He.newError)("Received RECORD when logging off "+He.json.stringify(t)))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(cn);re.LogoffObserver=q2;var H2=function(e){Bt(r,e);function r(t){var n=t===void 0?{}:t,i=n.onProtocolError,o=n.onError,a=n.onComplete,s=e.call(this)||this;return s._onProtocolError=i,s._onError=o,s._onComplete=a,s}return r.prototype.onNext=function(t){this.onError((0,He.newError)("Received RECORD when resetting: received record is: "+He.json.stringify(t),nr))},r.prototype.onError=function(t){t.code===nr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onComplete&&this._onComplete(t)},r}(cn);re.ResetObserver=H2;var z2=function(e){Bt(r,e);function r(t){var n=t===void 0?{}:t,i=n.onError,o=n.onCompleted,a=e.call(this)||this;return a._onError=i,a._onCompleted=o,a}return r.prototype.onNext=function(t){this.onError((0,He.newError)("Received RECORD when sending telemetry "+He.json.stringify(t),nr))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(fc);re.TelemetryObserver=z2;var G2=function(e){Bt(r,e);function r(t){var n=t.error,i=t.onError,o=e.call(this,{beforeError:i})||this;return o.onError(n),o}return r}(fc);re.FailedObserver=G2;var Y2=function(e){Bt(r,e);function r(){var t=e.call(this)||this;return e.prototype.markCompleted.call(t),t}return r}(fc);re.CompletedObserver=Y2;var K2=function(e){Bt(r,e);function r(t){var n=t.resultObserver,i=t.onProtocolError,o=t.onError,a=t.onCompleted,s=e.call(this)||this;return s._resultObserver=n,s._onError=o,s._onCompleted=a,s._records=[],s._onProtocolError=i,n.subscribe(s),s}return r.prototype.onNext=function(t){this._records.push(t)},r.prototype.onError=function(t){t.code===nr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(){if(this._records!==null&&this._records.length!==1){this.onError((0,He.newError)("Illegal response from router. Received "+this._records.length+` records but expected only one.
`+He.json.stringify(this._records),nr));return}this._onCompleted&&this._onCompleted(Xy.default.ofRecord(this._records[0]))},r}(cn);re.ProcedureRouteObserver=K2;var Z2=function(e){Bt(r,e);function r(t){var n=t===void 0?{}:t,i=n.onProtocolError,o=n.onError,a=n.onCompleted,s=e.call(this)||this;return s._onProtocolError=i,s._onError=o,s._onCompleted=a,s}return r.prototype.onNext=function(t){this.onError((0,He.newError)("Received RECORD when resetting: received record is: "+He.json.stringify(t),nr))},r.prototype.onError=function(t){t.code===nr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(Xy.default.ofMessageResponse(t))},r}(cn);re.RouteObserver=Z2;var ut={READY_STREAMING:{onSuccess:function(e,r){e._handleRunSuccess(r,function(){e._setState(ut.STREAMING)})},onError:function(e,r){e._handleError(r)},name:function(){return"READY_STREAMING"},pull:function(){}},READY:{onSuccess:function(e,r){e._handleRunSuccess(r,function(){return e._handleStreaming()})},onError:function(e,r){e._handleError(r)},name:function(){return"READY"},pull:function(e){return e._more()}},STREAMING:{onSuccess:function(e,r){r.has_more?e._handleHasMore(r):e._handlePullSuccess(r)},onError:function(e,r){e._handleError(r)},name:function(){return"STREAMING"},pull:function(){}},FAILED:{onError:function(e){},name:function(){return"FAILED"},pull:function(){}},SUCCEEDED:{name:function(){return"SUCCEEDED"},pull:function(){}}};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.assertNotificationFilterIsEmpty=Ue.assertImpersonatedUserIsEmpty=Ue.assertTxConfigIsEmpty=Ue.assertDatabaseIsEmpty=void 0;var Zi=x;function Q2(e,r,t){if(r===void 0&&(r=function(){}),e&&!e.isEmpty()){var n=(0,Zi.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw r(n.message),t.onError(n),n}}Ue.assertTxConfigIsEmpty=Q2;function X2(e,r,t){if(r===void 0&&(r=function(){}),e){var n=(0,Zi.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw r(n.message),t.onError(n),n}}Ue.assertDatabaseIsEmpty=X2;function J2(e,r,t){if(r===void 0&&(r=function(){}),e){var n=(0,Zi.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+"Trying to impersonate ".concat(e,"."));throw r(n.message),t.onError(n),n}}Ue.assertImpersonatedUserIsEmpty=J2;function eB(e,r,t){if(r===void 0&&(r=function(){}),e!==void 0){var n=(0,Zi.newError)("Driver is connected to a database that does not support user notification filters. Please upgrade to Neo4j 5.7.0 or later in order to use this functionality. "+"Trying to set notifications to ".concat(Zi.json.stringify(e),"."));throw r(n.message),t.onError(n),n}}Ue.assertNotificationFilterIsEmpty=eB;var qe={},Kr={},ir={};Object.defineProperty(ir,"__esModule",{value:!0});ir.verifyStructSize=ir.Structure=void 0;var Jy=x,tB=Jy.error.PROTOCOL_ERROR,em=function(){function e(r,t){this.signature=r,this.fields=t}return Object.defineProperty(e.prototype,"size",{get:function(){return this.fields.length},enumerable:!1,configurable:!0}),e.prototype.toString=function(){for(var r="",t=0;t<this.fields.length;t++)t>0&&(r+=", "),r+=this.fields[t];return"Structure("+this.signature+", ["+r+"])"},e}();ir.Structure=em;function rB(e,r,t){if(r!==t)throw(0,Jy.newError)("Wrong struct size for ".concat(e,", expected ").concat(r," but was ").concat(t),tB)}ir.verifyStructSize=rB;ir.default=em;Object.defineProperty(Kr,"__esModule",{value:!0});Kr.Unpacker=Kr.Packer=void 0;var Di=un,tm=Ot,rm=ir,Re=x,nB=Re.error.PROTOCOL_ERROR,nm=128,im=144,om=160,am=176,um=192,sm=193,cm=194,lm=195,fm=200,dm=201,hm=202,_m=203,vm=208,pm=209,bm=210,ym=212,mm=213,gm=214,Om=204,Em=205,wm=206,Tm=216,Sm=217,Pm=218,Cm=220,Rm=221,iB=function(){function e(r){this._ch=r,this._byteArraysSupported=!0}return e.prototype.packable=function(r,t){var n=this;t===void 0&&(t=tm.functional.identity);try{r=t(r)}catch(a){return function(){throw a}}if(r===null)return function(){return n._ch.writeUInt8(um)};if(r===!0)return function(){return n._ch.writeUInt8(lm)};if(r===!1)return function(){return n._ch.writeUInt8(cm)};if(typeof r=="number")return function(){return n.packFloat(r)};if(typeof r=="string")return function(){return n.packString(r)};if(typeof r=="bigint")return function(){return n.packInteger((0,Re.int)(r))};if((0,Re.isInt)(r))return function(){return n.packInteger(r)};if(r instanceof Int8Array)return function(){return n.packBytes(r)};if(r instanceof Array)return function(){n.packListHeader(r.length);for(var a=0;a<r.length;a++)n.packable(r[a]===void 0?null:r[a],t)()};if(aB(r))return this.packableIterable(r,t);if(r instanceof rm.Structure){for(var i=[],o=0;o<r.fields.length;o++)i[o]=this.packable(r.fields[o],t);return function(){return n.packStruct(r.signature,i)}}else return typeof r=="object"?function(){for(var a=Object.keys(r),s=0,c=0;c<a.length;c++)r[a[c]]!==void 0&&s++;n.packMapHeader(s);for(var c=0;c<a.length;c++){var u=a[c];r[u]!==void 0&&(n.packString(u),n.packable(r[u],t)())}}:this._nonPackableValue("Unable to pack the given value: ".concat(r))},e.prototype.packableIterable=function(r,t){try{var n=Array.from(r);return this.packable(n,t)}catch(i){throw(0,Re.newError)("Cannot pack given iterable, ".concat(i.message,": ").concat(r))}},e.prototype.packStruct=function(r,t){t=t||[],this.packStructHeader(t.length,r);for(var n=0;n<t.length;n++)t[n]()},e.prototype.packInteger=function(r){var t=r.high,n=r.low;r.greaterThanOrEqual(-16)&&r.lessThan(128)?this._ch.writeInt8(n):r.greaterThanOrEqual(-128)&&r.lessThan(-16)?(this._ch.writeUInt8(fm),this._ch.writeInt8(n)):r.greaterThanOrEqual(-32768)&&r.lessThan(32768)?(this._ch.writeUInt8(dm),this._ch.writeInt16(n)):r.greaterThanOrEqual(-2147483648)&&r.lessThan(2147483648)?(this._ch.writeUInt8(hm),this._ch.writeInt32(n)):(this._ch.writeUInt8(_m),this._ch.writeInt32(t),this._ch.writeInt32(n))},e.prototype.packFloat=function(r){this._ch.writeUInt8(sm),this._ch.writeFloat64(r)},e.prototype.packString=function(r){var t=Di.utf8.encode(r),n=t.length;if(n<16)this._ch.writeUInt8(nm|n),this._ch.writeBytes(t);else if(n<256)this._ch.writeUInt8(vm),this._ch.writeUInt8(n),this._ch.writeBytes(t);else if(n<65536)this._ch.writeUInt8(pm),this._ch.writeUInt8(n/256>>0),this._ch.writeUInt8(n%256),this._ch.writeBytes(t);else if(n<4294967296)this._ch.writeUInt8(bm),this._ch.writeUInt8((n/16777216>>0)%256),this._ch.writeUInt8((n/65536>>0)%256),this._ch.writeUInt8((n/256>>0)%256),this._ch.writeUInt8(n%256),this._ch.writeBytes(t);else throw(0,Re.newError)("UTF-8 strings of size "+n+" are not supported")},e.prototype.packListHeader=function(r){if(r<16)this._ch.writeUInt8(im|r);else if(r<256)this._ch.writeUInt8(ym),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(mm),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(gm),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Re.newError)("Lists of size "+r+" are not supported")},e.prototype.packBytes=function(r){if(this._byteArraysSupported){this.packBytesHeader(r.length);for(var t=0;t<r.length;t++)this._ch.writeInt8(r[t])}else throw(0,Re.newError)("Byte arrays are not supported by the database this driver is connected to")},e.prototype.packBytesHeader=function(r){if(r<256)this._ch.writeUInt8(Om),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(Em),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(wm),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Re.newError)("Byte arrays of size "+r+" are not supported")},e.prototype.packMapHeader=function(r){if(r<16)this._ch.writeUInt8(om|r);else if(r<256)this._ch.writeUInt8(Tm),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(Sm),this._ch.writeUInt8(r/256>>0),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(Pm),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Re.newError)("Maps of size "+r+" are not supported")},e.prototype.packStructHeader=function(r,t){if(r<16)this._ch.writeUInt8(am|r),this._ch.writeUInt8(t);else if(r<256)this._ch.writeUInt8(Cm),this._ch.writeUInt8(r),this._ch.writeUInt8(t);else if(r<65536)this._ch.writeUInt8(Rm),this._ch.writeUInt8(r/256>>0),this._ch.writeUInt8(r%256);else throw(0,Re.newError)("Structures of size "+r+" are not supported")},e.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},e.prototype._nonPackableValue=function(r){return function(){throw(0,Re.newError)(r,nB)}},e}();Kr.Packer=iB;var oB=function(){function e(r,t){r===void 0&&(r=!1),t===void 0&&(t=!1),this._disableLosslessIntegers=r,this._useBigInt=t}return e.prototype.unpack=function(r,t){t===void 0&&(t=tm.functional.identity);var n=r.readUInt8(),i=n&240,o=n&15;if(n===um)return null;var a=this._unpackBoolean(n);if(a!==null)return a;var s=this._unpackNumberOrInteger(n,r);if(s!==null){if((0,Re.isInt)(s)){if(this._useBigInt)return s.toBigInt();if(this._disableLosslessIntegers)return s.toNumberOrInfinity()}return s}var c=this._unpackString(n,i,o,r);if(c!==null)return c;var u=this._unpackList(n,i,o,r,t);if(u!==null)return u;var l=this._unpackByteArray(n,r);if(l!==null)return l;var h=this._unpackMap(n,i,o,r,t);if(h!==null)return h;var v=this._unpackStruct(n,i,o,r,t);if(v!==null)return v;throw(0,Re.newError)("Unknown packed value with marker "+n.toString(16))},e.prototype.unpackInteger=function(r){var t=r.readUInt8(),n=this._unpackInteger(t,r);if(n==null)throw(0,Re.newError)("Unable to unpack integer value with marker "+t.toString(16));return n},e.prototype._unpackBoolean=function(r){return r===lm?!0:r===cm?!1:null},e.prototype._unpackNumberOrInteger=function(r,t){return r===sm?t.readFloat64():this._unpackInteger(r,t)},e.prototype._unpackInteger=function(r,t){if(r>=0&&r<128)return(0,Re.int)(r);if(r>=240&&r<256)return(0,Re.int)(r-256);if(r===fm)return(0,Re.int)(t.readInt8());if(r===dm)return(0,Re.int)(t.readInt16());if(r===hm){var n=t.readInt32();return(0,Re.int)(n)}else if(r===_m){var i=t.readInt32(),o=t.readInt32();return new Re.Integer(o,i)}else return null},e.prototype._unpackString=function(r,t,n,i){return t===nm?Di.utf8.decode(i,n):r===vm?Di.utf8.decode(i,i.readUInt8()):r===pm?Di.utf8.decode(i,i.readUInt16()):r===bm?Di.utf8.decode(i,i.readUInt32()):null},e.prototype._unpackList=function(r,t,n,i,o){return t===im?this._unpackListWithSize(n,i,o):r===ym?this._unpackListWithSize(i.readUInt8(),i,o):r===mm?this._unpackListWithSize(i.readUInt16(),i,o):r===gm?this._unpackListWithSize(i.readUInt32(),i,o):null},e.prototype._unpackListWithSize=function(r,t,n){for(var i=[],o=0;o<r;o++)i.push(this.unpack(t,n));return i},e.prototype._unpackByteArray=function(r,t){return r===Om?this._unpackByteArrayWithSize(t.readUInt8(),t):r===Em?this._unpackByteArrayWithSize(t.readUInt16(),t):r===wm?this._unpackByteArrayWithSize(t.readUInt32(),t):null},e.prototype._unpackByteArrayWithSize=function(r,t){for(var n=new Int8Array(r),i=0;i<r;i++)n[i]=t.readInt8();return n},e.prototype._unpackMap=function(r,t,n,i,o){return t===om?this._unpackMapWithSize(n,i,o):r===Tm?this._unpackMapWithSize(i.readUInt8(),i,o):r===Sm?this._unpackMapWithSize(i.readUInt16(),i,o):r===Pm?this._unpackMapWithSize(i.readUInt32(),i,o):null},e.prototype._unpackMapWithSize=function(r,t,n){for(var i={},o=0;o<r;o++){var a=this.unpack(t,n);i[a]=this.unpack(t,n)}return i},e.prototype._unpackStruct=function(r,t,n,i,o){return t===am?this._unpackStructWithSize(n,i,o):r===Cm?this._unpackStructWithSize(i.readUInt8(),i,o):r===Rm?this._unpackStructWithSize(i.readUInt16(),i,o):null},e.prototype._unpackStructWithSize=function(r,t,n){for(var i=t.readUInt8(),o=new rm.Structure(i,[]),a=0;a<r;a++)o.fields.push(this.unpack(t,n));return n(o)},e}();Kr.Unpacker=oB;function aB(e){return e==null?!1:typeof e[Symbol.iterator]=="function"}var kn={},Im=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),uB=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),sB=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),cB=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&uB(r,e,t);return sB(r,e),r};Object.defineProperty(kn,"__esModule",{value:!0});kn.Unpacker=kn.Packer=void 0;var Am=cB(Kr),lB=function(e){Im(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},r}(Am.Packer);kn.Packer=lB;var fB=function(e){Im(r,e);function r(t,n){return t===void 0&&(t=!1),n===void 0&&(n=!1),e.call(this,t,n)||this}return r}(Am.Unpacker);kn.Unpacker=fB;var dB=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),hB=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),ch=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&dB(r,e,t);return hB(r,e),r};Object.defineProperty(qe,"__esModule",{value:!0});qe.structure=qe.v2=qe.v1=void 0;var _B=ch(Kr);qe.v1=_B;var jm=ch(kn);qe.v2=jm;var vB=ch(ir);qe.structure=vB;qe.default=jm;var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.SIGNATURES=void 0;var Ee=x,Mm=Ee.internal.constants,pB=Mm.ACCESS_MODE_READ,Tu=Mm.FETCH_ALL,Fv=Ee.internal.util.assertString,Nm=1,$m=15,Uu=16,km=63,yn=1,Dm=2,nd=17,Lm=18,Um=19,Fm=84,id=102,Bm=106,Wm=107,xm=47,Vm=63,bB="r",Li=-1,yB=Object.freeze({INIT:Nm,RESET:$m,RUN:Uu,PULL_ALL:km,HELLO:yn,GOODBYE:Dm,BEGIN:nd,COMMIT:Lm,ROLLBACK:Um,TELEMETRY:Fm,ROUTE:id,LOGON:Bm,LOGOFF:Wm,DISCARD:xm,PULL:Vm});Fe.SIGNATURES=yB;var hi=function(){function e(r,t,n){this.signature=r,this.fields=t,this.toString=n}return e.init=function(r,t){return new e(Nm,[r,t],function(){return"INIT ".concat(r," {...}")})},e.run=function(r,t){return new e(Uu,[r,t],function(){return"RUN ".concat(r," ").concat(Ee.json.stringify(t))})},e.pullAll=function(){return mB},e.reset=function(){return gB},e.hello=function(r,t,n,i){n===void 0&&(n=null),i===void 0&&(i=null);var o=Object.assign({user_agent:r},t);return n&&(o.routing=n),i&&(o.patch_bolt=i),new e(yn,[o],function(){return"HELLO {user_agent: '".concat(r,"', ...}")})},e.hello5x1=function(r,t){t===void 0&&(t=null);var n={user_agent:r};return t&&(n.routing=t),new e(yn,[n],function(){return"HELLO {user_agent: '".concat(r,"', ...}")})},e.hello5x2=function(r,t,n){t===void 0&&(t=null),n===void 0&&(n=null);var i={user_agent:r};return od(i,t),n&&(i.routing=n),new e(yn,[i],function(){return"HELLO ".concat(Ee.json.stringify(i))})},e.hello5x3=function(r,t,n,i){n===void 0&&(n=null),i===void 0&&(i=null);var o={};return r&&(o.user_agent=r),t&&(o.bolt_agent={product:t.product,platform:t.platform,language:t.language,language_details:t.languageDetails}),od(o,n),i&&(o.routing=i),new e(yn,[o],function(){return"HELLO ".concat(Ee.json.stringify(o))})},e.hello5x5=function(r,t,n,i){n===void 0&&(n=null),i===void 0&&(i=null);var o={};return r&&(o.user_agent=r),t&&(o.bolt_agent={product:t.product,platform:t.platform,language:t.language,language_details:t.languageDetails}),mf(o,n),i&&(o.routing=i),new e(yn,[o],function(){return"HELLO ".concat(Ee.json.stringify(o))})},e.logon=function(r){return new e(Bm,[r],function(){return"LOGON { ... }"})},e.logoff=function(){return new e(Wm,[],function(){return"LOGOFF"})},e.begin=function(r){var t=r===void 0?{}:r,n=t.bookmarks,i=t.txConfig,o=t.database,a=t.mode,s=t.impersonatedUser,c=t.notificationFilter,u=Su(n,i,o,a,s,c);return new e(nd,[u],function(){return"BEGIN ".concat(Ee.json.stringify(u))})},e.begin5x5=function(r){var t=r===void 0?{}:r,n=t.bookmarks,i=t.txConfig,o=t.database,a=t.mode,s=t.impersonatedUser,c=t.notificationFilter,u=Su(n,i,o,a,s,c,{appendNotificationFilter:mf});return new e(nd,[u],function(){return"BEGIN ".concat(Ee.json.stringify(u))})},e.commit=function(){return OB},e.rollback=function(){return EB},e.runWithMetadata=function(r,t,n){var i=n===void 0?{}:n,o=i.bookmarks,a=i.txConfig,s=i.database,c=i.mode,u=i.impersonatedUser,l=i.notificationFilter,h=Su(o,a,s,c,u,l);return new e(Uu,[r,t,h],function(){return"RUN ".concat(r," ").concat(Ee.json.stringify(t)," ").concat(Ee.json.stringify(h))})},e.runWithMetadata5x5=function(r,t,n){var i=n===void 0?{}:n,o=i.bookmarks,a=i.txConfig,s=i.database,c=i.mode,u=i.impersonatedUser,l=i.notificationFilter,h=Su(o,a,s,c,u,l,{appendNotificationFilter:mf});return new e(Uu,[r,t,h],function(){return"RUN ".concat(r," ").concat(Ee.json.stringify(t)," ").concat(Ee.json.stringify(h))})},e.goodbye=function(){return wB},e.pull=function(r){var t=r===void 0?{}:r,n=t.stmtId,i=n===void 0?Li:n,o=t.n,a=o===void 0?Tu:o,s=Bv(i??Li,a||Tu);return new e(Vm,[s],function(){return"PULL ".concat(Ee.json.stringify(s))})},e.discard=function(r){var t=r===void 0?{}:r,n=t.stmtId,i=n===void 0?Li:n,o=t.n,a=o===void 0?Tu:o,s=Bv(i??Li,a||Tu);return new e(xm,[s],function(){return"DISCARD ".concat(Ee.json.stringify(s))})},e.telemetry=function(r){var t=r.api,n=(0,Ee.int)(t);return new e(Fm,[n],function(){return"TELEMETRY ".concat(n.toString())})},e.route=function(r,t,n){return r===void 0&&(r={}),t===void 0&&(t=[]),n===void 0&&(n=null),new e(id,[r,t,n],function(){return"ROUTE ".concat(Ee.json.stringify(r)," ").concat(Ee.json.stringify(t)," ").concat(n)})},e.routeV4x4=function(r,t,n){r===void 0&&(r={}),t===void 0&&(t=[]),n===void 0&&(n={});var i={};return n.databaseName&&(i.db=n.databaseName),n.impersonatedUser&&(i.imp_user=n.impersonatedUser),new e(id,[r,t,i],function(){return"ROUTE ".concat(Ee.json.stringify(r)," ").concat(Ee.json.stringify(t)," ").concat(Ee.json.stringify(i))})},e}();Fe.default=hi;function Su(e,r,t,n,i,o,a){var s;a===void 0&&(a={});var c={};e.isEmpty()||(c.bookmarks=e.values()),r.timeout!==null&&(c.tx_timeout=r.timeout),r.metadata&&(c.tx_metadata=r.metadata),t&&(c.db=Fv(t,"database")),i&&(c.imp_user=Fv(i,"impersonatedUser")),n===pB&&(c.mode=bB);var u=(s=a.appendNotificationFilter)!==null&&s!==void 0?s:od;return u(c,o),c}function Bv(e,r){var t={n:(0,Ee.int)(r)};return e!==Li&&(t.qid=(0,Ee.int)(e)),t}function od(e,r){r&&(r.minimumSeverityLevel&&(e.notifications_minimum_severity=r.minimumSeverityLevel),r.disabledCategories&&(e.notifications_disabled_categories=r.disabledCategories),r.disabledClassifications&&(e.notifications_disabled_categories=r.disabledClassifications))}function mf(e,r){r&&(r.minimumSeverityLevel&&(e.notifications_minimum_severity=r.minimumSeverityLevel),r.disabledCategories&&(e.notifications_disabled_classifications=r.disabledCategories),r.disabledClassifications&&(e.notifications_disabled_classifications=r.disabledClassifications))}var mB=new hi(km,[],function(){return"PULL_ALL"}),gB=new hi($m,[],function(){return"RESET"}),OB=new hi(Lm,[],function(){return"COMMIT"}),EB=new hi(Um,[],function(){return"ROLLBACK"}),wB=new hi(Dm,[],function(){return"GOODBYE"}),dc={},ge={};Object.defineProperty(ge,"__esModule",{value:!0});ge.TypeTransformer=void 0;var TB=qe,SB=x,PB=SB.internal.objectUtil,CB=function(){function e(r){this._transformers=r,this._transformersPerSignature=new Map(r.map(function(t){return[t.signature,t]})),this.fromStructure=this.fromStructure.bind(this),this.toStructure=this.toStructure.bind(this),Object.freeze(this)}return e.prototype.fromStructure=function(r){try{if(r instanceof TB.structure.Structure&&this._transformersPerSignature.has(r.signature)){var t=this._transformersPerSignature.get(r.signature).fromStructure;return t(r)}return r}catch(n){return PB.createBrokenObject(n)}},e.prototype.toStructure=function(r){var t=this._transformers.find(function(n){var i=n.isTypeInstance;return i(r)});return t!==void 0?t.toStructure(r):r},e}();ge.default=CB;var RB=function(){function e(r){var t=r.signature,n=r.fromStructure,i=r.toStructure,o=r.isTypeInstance;this.signature=t,this.isTypeInstance=o,this.fromStructure=n,this.toStructure=i,Object.freeze(this)}return e.prototype.extendsWith=function(r){var t=r.signature,n=r.fromStructure,i=r.toStructure,o=r.isTypeInstance;return new e({signature:t||this.signature,fromStructure:n||this.fromStructure,toStructure:i||this.toStructure,isTypeInstance:o||this.isTypeInstance})},e}();ge.TypeTransformer=RB;var hc=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(dc,"__esModule",{value:!0});var De=x,_c=qe,vc=ge,pc=De.error.PROTOCOL_ERROR,IB=78,AB=3,jB=82,MB=5,NB=114,$B=3,kB=80,DB=3;function LB(){return new vc.TypeTransformer({signature:IB,isTypeInstance:function(e){return e instanceof De.Node},toStructure:function(e){throw(0,De.newError)("It is not allowed to pass nodes in query parameters, given: ".concat(e),pc)},fromStructure:function(e){_c.structure.verifyStructSize("Node",AB,e.size);var r=hc(e.fields,3),t=r[0],n=r[1],i=r[2];return new De.Node(t,n,i)}})}function UB(){return new vc.TypeTransformer({signature:jB,isTypeInstance:function(e){return e instanceof De.Relationship},toStructure:function(e){throw(0,De.newError)("It is not allowed to pass relationships in query parameters, given: ".concat(e),pc)},fromStructure:function(e){_c.structure.verifyStructSize("Relationship",MB,e.size);var r=hc(e.fields,5),t=r[0],n=r[1],i=r[2],o=r[3],a=r[4];return new De.Relationship(t,n,i,o,a)}})}function FB(){return new vc.TypeTransformer({signature:NB,isTypeInstance:function(e){return e instanceof De.UnboundRelationship},toStructure:function(e){throw(0,De.newError)("It is not allowed to pass unbound relationships in query parameters, given: ".concat(e),pc)},fromStructure:function(e){_c.structure.verifyStructSize("UnboundRelationship",$B,e.size);var r=hc(e.fields,3),t=r[0],n=r[1],i=r[2];return new De.UnboundRelationship(t,n,i)}})}function BB(){return new vc.TypeTransformer({signature:kB,isTypeInstance:function(e){return e instanceof De.Path},toStructure:function(e){throw(0,De.newError)("It is not allowed to pass paths in query parameters, given: ".concat(e),pc)},fromStructure:function(e){_c.structure.verifyStructSize("Path",DB,e.size);for(var r=hc(e.fields,3),t=r[0],n=r[1],i=r[2],o=[],a=t[0],s=0;s<i.length;s+=2){var c=t[i[s+1]],u=(0,De.toNumber)(i[s]),l=void 0;u>0?(l=n[u-1],l instanceof De.UnboundRelationship&&(n[u-1]=l=l.bindTo(a,c))):(l=n[-u-1],l instanceof De.UnboundRelationship&&(n[-u-1]=l=l.bindTo(c,a))),o.push(new De.PathSegment(a,l,c)),a=c}return new De.Path(t[0],t[t.length-1],o)}})}dc.default={createNodeTransformer:LB,createRelationshipTransformer:UB,createUnboundRelationshipTransformer:FB,createPathTransformer:BB};var gn=f&&f.__assign||function(){return gn=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},gn.apply(this,arguments)},WB=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),xB=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),VB=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&WB(r,e,t);return xB(r,e),r},qm=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(uc,"__esModule",{value:!0});var Ai=Ue,gf=qe,Rr=VB(Fe),bn=re,Dn=x,qB=qm(dc),HB=qm(ge),Wv=Dn.internal.bookmarks.Bookmarks,Hm=Dn.internal.constants,xv=Hm.ACCESS_MODE_WRITE,zB=Hm.BOLT_PROTOCOL_V1;Dn.internal.logger.Logger;var Vv=Dn.internal.txConfig.TxConfig,GB=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),YB=function(){function e(r,t,n,i,o,a){var s=n===void 0?{}:n,c=s.disableLosslessIntegers,u=s.useBigInt;i===void 0&&(i=function(){return null}),this._server=r||{},this._chunker=t,this._packer=this._createPacker(t),this._unpacker=this._createUnpacker(c,u),this._responseHandler=i(this),this._log=o,this._onProtocolError=a,this._fatalError=null,this._lastMessageSignature=null,this._config={disableLosslessIntegers:c,useBigInt:u}}return Object.defineProperty(e.prototype,"transformer",{get:function(){var r=this;return this._transformer===void 0&&(this._transformer=new HB.default(Object.values(qB.default).map(function(t){return t(r._config,r._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return zB},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportsReAuth",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initialized",{get:function(){return!!this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authToken",{get:function(){return this._authToken},enumerable:!1,configurable:!0}),e.prototype.packer=function(){return this._packer},e.prototype.packable=function(r){return this._packer.packable(r,this.transformer.toStructure)},e.prototype.unpacker=function(){return this._unpacker},e.prototype.unpack=function(r){return this._unpacker.unpack(r,this.transformer.fromStructure)},e.prototype.transformMetadata=function(r){return r},e.prototype.enrichErrorMetadata=function(r){return gn(gn({},r),{diagnostic_record:r.diagnostic_record!==null?gn(gn({},GB),r.diagnostic_record):null})},e.prototype.initialize=function(r){var t=this,n=r===void 0?{}:r,i=n.userAgent;n.boltAgent;var o=n.authToken,a=n.notificationFilter,s=n.onError,c=n.onComplete,u=new bn.LoginObserver({onError:function(l){return t._onLoginError(l,s)},onCompleted:function(l){return t._onLoginCompleted(l,c)}});return(0,Ai.assertNotificationFilterIsEmpty)(a,this._onProtocolError,u),this.write(Rr.default.init(i,o),u,!0),u},e.prototype.logoff=function(r){var t=r===void 0?{}:r,n=t.onComplete,i=t.onError;t.flush;var o=new bn.LogoffObserver({onCompleted:n,onError:i}),a=(0,Dn.newError)("Driver is connected to a database that does not support logoff. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(a.message),o.onError(a),a},e.prototype.logon=function(r){var t=this,n=r===void 0?{}:r,i=n.authToken,o=n.onComplete,a=n.onError;n.flush;var s=new bn.LoginObserver({onCompleted:function(){return t._onLoginCompleted({},i,o)},onError:function(u){return t._onLoginError(u,a)}}),c=(0,Dn.newError)("Driver is connected to a database that does not support logon. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(c.message),s.onError(c),c},e.prototype.prepareToClose=function(){},e.prototype.beginTransaction=function(r){var t=r===void 0?{}:r,n=t.bookmarks,i=t.txConfig,o=t.database,a=t.mode,s=t.impersonatedUser,c=t.notificationFilter,u=t.beforeError,l=t.afterError,h=t.beforeComplete,v=t.afterComplete;return this.run("BEGIN",n?n.asBeginTransactionParameters():{},{bookmarks:n,txConfig:i,database:o,mode:a,impersonatedUser:s,notificationFilter:c,beforeError:u,afterError:l,beforeComplete:h,afterComplete:v,flush:!1})},e.prototype.commitTransaction=function(r){var t=r===void 0?{}:r,n=t.beforeError,i=t.afterError,o=t.beforeComplete,a=t.afterComplete;return this.run("COMMIT",{},{bookmarks:Wv.empty(),txConfig:Vv.empty(),mode:xv,beforeError:n,afterError:i,beforeComplete:o,afterComplete:a})},e.prototype.rollbackTransaction=function(r){var t=r===void 0?{}:r,n=t.beforeError,i=t.afterError,o=t.beforeComplete,a=t.afterComplete;return this.run("ROLLBACK",{},{bookmarks:Wv.empty(),txConfig:Vv.empty(),mode:xv,beforeError:n,afterError:i,beforeComplete:o,afterComplete:a})},e.prototype.run=function(r,t,n){var i=n===void 0?{}:n;i.bookmarks;var o=i.txConfig,a=i.database;i.mode;var s=i.impersonatedUser,c=i.notificationFilter,u=i.beforeKeys,l=i.afterKeys,h=i.beforeError,v=i.afterError,b=i.beforeComplete,m=i.afterComplete,E=i.flush,T=E===void 0?!0:E,S=i.highRecordWatermark,R=S===void 0?Number.MAX_VALUE:S,I=i.lowRecordWatermark,A=I===void 0?Number.MAX_VALUE:I,j=new bn.ResultStreamObserver({server:this._server,beforeKeys:u,afterKeys:l,beforeError:h,afterError:v,beforeComplete:b,afterComplete:m,highRecordWatermark:R,lowRecordWatermark:A});return(0,Ai.assertTxConfigIsEmpty)(o,this._onProtocolError,j),(0,Ai.assertDatabaseIsEmpty)(a,this._onProtocolError,j),(0,Ai.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,j),(0,Ai.assertNotificationFilterIsEmpty)(c,this._onProtocolError,j),this.write(Rr.default.run(r,t),j,!1),this.write(Rr.default.pullAll(),j,T),j},Object.defineProperty(e.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),e.prototype.reset=function(r){var t=r===void 0?{}:r,n=t.onError,i=t.onComplete,o=new bn.ResetObserver({onProtocolError:this._onProtocolError,onError:n,onComplete:i});return this.write(Rr.default.reset(),o,!0),o},e.prototype.telemetry=function(r,t){r.api;var n=t===void 0?{}:t;n.onError;var i=n.onCompleted,o=new bn.CompletedObserver;return i&&i(),o},e.prototype._createPacker=function(r){return new gf.v1.Packer(r)},e.prototype._createUnpacker=function(r,t){return new gf.v1.Unpacker(r,t)},e.prototype.write=function(r,t,n){var i=this.queueObserverIfProtocolIsNotBroken(t);if(i){this._log.isDebugEnabled()&&this._log.debug("C: ".concat(r)),this._lastMessageSignature=r.signature;var o=new gf.structure.Structure(r.signature,r.fields);this.packable(o)(),this._chunker.messageBoundary(),n&&this._chunker.flush()}},e.prototype.isLastMessageLogon=function(){return this._lastMessageSignature===Rr.SIGNATURES.HELLO||this._lastMessageSignature===Rr.SIGNATURES.LOGON},e.prototype.isLastMessageReset=function(){return this._lastMessageSignature===Rr.SIGNATURES.RESET},e.prototype.notifyFatalError=function(r){return this._fatalError=r,this._responseHandler._notifyErrorToObservers(r)},e.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},e.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},e.prototype.queueObserverIfProtocolIsNotBroken=function(r){return this.isBroken()?(this.notifyFatalErrorToObserver(r),!1):this._responseHandler._queueObserver(r)},e.prototype.isBroken=function(){return!!this._fatalError},e.prototype.notifyFatalErrorToObserver=function(r){r&&r.onError&&r.onError(this._fatalError)},e.prototype.resetFailure=function(){this._responseHandler._resetFailure()},e.prototype._onLoginCompleted=function(r,t,n){if(this._initialized=!0,this._authToken=t,r){var i=r.server;this._server.version||(this._server.version=i)}n&&n(r)},e.prototype._onLoginError=function(r,t){this._onProtocolError(r.message),t&&t(r)},e}();uc.default=YB;var bc={},yc={},kt={};Object.defineProperty(kt,"__esModule",{value:!0});kt.epochSecondAndNanoToLocalDateTime=kt.nanoOfDayToLocalTime=kt.epochDayToDate=void 0;var Br=x,br=Br.internal.temporalUtil,KB=br.DAYS_0000_TO_1970,Of=br.DAYS_PER_400_YEAR_CYCLE,qv=br.NANOS_PER_HOUR,Hv=br.NANOS_PER_MINUTE,ad=br.NANOS_PER_SECOND,zv=br.SECONDS_PER_DAY,ZB=br.floorDiv,QB=br.floorMod;function zm(e){e=(0,Br.int)(e);var r=e.add(KB).subtract(60),t=(0,Br.int)(0);if(r.lessThan(0)){var n=r.add(1).div(Of).subtract(1);t=n.multiply(400),r=r.add(n.multiply(-Of))}var i=r.multiply(400).add(591).div(Of),o=r.subtract(i.multiply(365).add(i.div(4)).subtract(i.div(100)).add(i.div(400)));o.lessThan(0)&&(i=i.subtract(1),o=r.subtract(i.multiply(365).add(i.div(4)).subtract(i.div(100)).add(i.div(400)))),i=i.add(t);var a=o,s=a.multiply(5).add(2).div(153),c=s.add(2).modulo(12).add(1),u=a.subtract(s.multiply(306).add(5).div(10)).add(1);return i=i.add(s.div(10)),new Br.Date(i,c,u)}kt.epochDayToDate=zm;function Gm(e){e=(0,Br.int)(e);var r=e.div(qv);e=e.subtract(r.multiply(qv));var t=e.div(Hv);e=e.subtract(t.multiply(Hv));var n=e.div(ad),i=e.subtract(n.multiply(ad));return new Br.LocalTime(r,t,n,i)}kt.nanoOfDayToLocalTime=Gm;function XB(e,r){var t=ZB(e,zv),n=QB(e,zv),i=n.multiply(ad).add(r),o=zm(t),a=Gm(i);return new Br.LocalDateTime(o.year,o.month,o.day,a.hour,a.minute,a.second,a.nanosecond)}kt.epochSecondAndNanoToLocalDateTime=XB;var Gu=f&&f.__assign||function(){return Gu=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Gu.apply(this,arguments)},Wt=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},JB=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yc,"__esModule",{value:!0});var fe=x,Ne=qe,xt=ge,_i=kt,e4=JB(dc),lh=fe.internal.temporalUtil,t4=lh.dateToEpochDay,fh=lh.localDateTimeToEpochSecond,Ym=lh.localTimeToNanoOfDay,Gv=88,r4=3,Yv=89,n4=4,Kv=69,i4=4,Zv=116,o4=1,Qv=84,a4=2,Xv=68,u4=1,Jv=100,s4=2,ep=70,c4=3,tp=102,l4=3;function f4(){return new xt.TypeTransformer({signature:Gv,isTypeInstance:function(e){return(0,fe.isPoint)(e)&&(e.z===null||e.z===void 0)},toStructure:function(e){return new Ne.structure.Structure(Gv,[(0,fe.int)(e.srid),e.x,e.y])},fromStructure:function(e){Ne.structure.verifyStructSize("Point2D",r4,e.size);var r=Wt(e.fields,3),t=r[0],n=r[1],i=r[2];return new fe.Point(t,n,i,void 0)}})}function d4(){return new xt.TypeTransformer({signature:Yv,isTypeInstance:function(e){return(0,fe.isPoint)(e)&&e.z!==null&&e.z!==void 0},toStructure:function(e){return new Ne.structure.Structure(Yv,[(0,fe.int)(e.srid),e.x,e.y,e.z])},fromStructure:function(e){Ne.structure.verifyStructSize("Point3D",n4,e.size);var r=Wt(e.fields,4),t=r[0],n=r[1],i=r[2],o=r[3];return new fe.Point(t,n,i,o)}})}function h4(){return new xt.TypeTransformer({signature:Kv,isTypeInstance:fe.isDuration,toStructure:function(e){var r=(0,fe.int)(e.months),t=(0,fe.int)(e.days),n=(0,fe.int)(e.seconds),i=(0,fe.int)(e.nanoseconds);return new Ne.structure.Structure(Kv,[r,t,n,i])},fromStructure:function(e){Ne.structure.verifyStructSize("Duration",i4,e.size);var r=Wt(e.fields,4),t=r[0],n=r[1],i=r[2],o=r[3];return new fe.Duration(t,n,i,o)}})}function _4(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new xt.TypeTransformer({signature:Zv,isTypeInstance:fe.isLocalTime,toStructure:function(n){var i=Ym(n.hour,n.minute,n.second,n.nanosecond);return new Ne.structure.Structure(Zv,[i])},fromStructure:function(n){Ne.structure.verifyStructSize("LocalTime",o4,n.size);var i=Wt(n.fields,1),o=i[0],a=(0,_i.nanoOfDayToLocalTime)(o);return vi(a,r,t)}})}function v4(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new xt.TypeTransformer({signature:Qv,isTypeInstance:fe.isTime,toStructure:function(n){var i=Ym(n.hour,n.minute,n.second,n.nanosecond),o=(0,fe.int)(n.timeZoneOffsetSeconds);return new Ne.structure.Structure(Qv,[i,o])},fromStructure:function(n){Ne.structure.verifyStructSize("Time",a4,n.size);var i=Wt(n.fields,2),o=i[0],a=i[1],s=(0,_i.nanoOfDayToLocalTime)(o),c=new fe.Time(s.hour,s.minute,s.second,s.nanosecond,a);return vi(c,r,t)}})}function p4(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new xt.TypeTransformer({signature:Xv,isTypeInstance:fe.isDate,toStructure:function(n){var i=t4(n.year,n.month,n.day);return new Ne.structure.Structure(Xv,[i])},fromStructure:function(n){Ne.structure.verifyStructSize("Date",u4,n.size);var i=Wt(n.fields,1),o=i[0],a=(0,_i.epochDayToDate)(o);return vi(a,r,t)}})}function b4(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new xt.TypeTransformer({signature:Jv,isTypeInstance:fe.isLocalDateTime,toStructure:function(n){var i=fh(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),o=(0,fe.int)(n.nanosecond);return new Ne.structure.Structure(Jv,[i,o])},fromStructure:function(n){Ne.structure.verifyStructSize("LocalDateTime",s4,n.size);var i=Wt(n.fields,2),o=i[0],a=i[1],s=(0,_i.epochSecondAndNanoToLocalDateTime)(o,a);return vi(s,r,t)}})}function y4(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new xt.TypeTransformer({signature:tp,isTypeInstance:function(n){return(0,fe.isDateTime)(n)&&n.timeZoneId!=null},toStructure:function(n){var i=fh(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),o=(0,fe.int)(n.nanosecond),a=n.timeZoneId;return new Ne.structure.Structure(tp,[i,o,a])},fromStructure:function(n){Ne.structure.verifyStructSize("DateTimeWithZoneId",l4,n.size);var i=Wt(n.fields,3),o=i[0],a=i[1],s=i[2],c=(0,_i.epochSecondAndNanoToLocalDateTime)(o,a),u=new fe.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,c.nanosecond,null,s);return vi(u,r,t)}})}function m4(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new xt.TypeTransformer({signature:ep,isTypeInstance:function(n){return(0,fe.isDateTime)(n)&&n.timeZoneId==null},toStructure:function(n){var i=fh(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),o=(0,fe.int)(n.nanosecond),a=(0,fe.int)(n.timeZoneOffsetSeconds);return new Ne.structure.Structure(ep,[i,o,a])},fromStructure:function(n){Ne.structure.verifyStructSize("DateTimeWithZoneOffset",c4,n.size);var i=Wt(n.fields,3),o=i[0],a=i[1],s=i[2],c=(0,_i.epochSecondAndNanoToLocalDateTime)(o,a),u=new fe.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,c.nanosecond,s,null);return vi(u,r,t)}})}function vi(e,r,t){if(!r&&!t)return e;var n=function(s){return t?s.toBigInt():s.toNumberOrInfinity()},i=Object.create(Object.getPrototypeOf(e));for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)===!0){var a=e[o];i[o]=(0,fe.isInt)(a)?n(a):a}return Object.freeze(i),i}yc.default=Gu(Gu({},e4.default),{createPoint2DTransformer:f4,createPoint3DTransformer:d4,createDurationTransformer:h4,createLocalTimeTransformer:_4,createTimeTransformer:v4,createDateTransformer:p4,createLocalDateTimeTransformer:b4,createDateTimeWithZoneIdTransformer:y4,createDateTimeWithOffsetTransformer:m4});var g4=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),mc=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bc,"__esModule",{value:!0});var O4=mc(uc),rp=mc(qe),E4=x,w4=mc(yc),T4=mc(ge),S4=E4.internal.constants.BOLT_PROTOCOL_V2,P4=function(e){g4(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype._createPacker=function(t){return new rp.default.Packer(t)},r.prototype._createUnpacker=function(t,n){return new rp.default.Unpacker(t,n)},Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new T4.default(Object.values(w4.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return S4},enumerable:!1,configurable:!0}),r}(O4.default);bc.default=P4;var gc={},Oc={},ud=f&&f.__assign||function(){return ud=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ud.apply(this,arguments)},C4=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oc,"__esModule",{value:!0});var R4=C4(yc);Oc.default=ud({},R4.default);var I4=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yu=f&&f.__assign||function(){return Yu=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Yu.apply(this,arguments)},Ec=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gc,"__esModule",{value:!0});var A4=Ec(bc),Ir=Ec(Fe),Ar=Ue,kr=re,j4=Ec(Oc),M4=Ec(ge),dh=x;dh.internal.bookmarks.Bookmarks;var N4=dh.internal.constants.BOLT_PROTOCOL_V3,$4=dh.internal.txConfig.TxConfig,Km="context",k4="CALL dbms.cluster.routing.getRoutingTable($".concat(Km,")"),D4=new kr.StreamObserver,L4=function(e){I4(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return N4},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new M4.default(Object.values(j4.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.transformMetadata=function(t){return"t_first"in t&&(t.result_available_after=t.t_first,delete t.t_first),"t_last"in t&&(t.result_consumed_after=t.t_last,delete t.t_last),t},r.prototype.initialize=function(t){var n=this,i=t===void 0?{}:t,o=i.userAgent;i.boltAgent;var a=i.authToken,s=i.notificationFilter,c=i.onError,u=i.onComplete,l=new kr.LoginObserver({onError:function(h){return n._onLoginError(h,c)},onCompleted:function(h){return n._onLoginCompleted(h,a,u)}});return(0,Ar.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(Ir.default.hello(o,a),l,!0),l},r.prototype.prepareToClose=function(){this.write(Ir.default.goodbye(),D4,!0)},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,i=n.bookmarks,o=n.txConfig,a=n.database,s=n.impersonatedUser,c=n.notificationFilter,u=n.mode,l=n.beforeError,h=n.afterError,v=n.beforeComplete,b=n.afterComplete,m=new kr.ResultStreamObserver({server:this._server,beforeError:l,afterError:h,beforeComplete:v,afterComplete:b});return m.prepareToHandleSingleResponse(),(0,Ar.assertDatabaseIsEmpty)(a,this._onProtocolError,m),(0,Ar.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,m),(0,Ar.assertNotificationFilterIsEmpty)(c,this._onProtocolError,m),this.write(Ir.default.begin({bookmarks:i,txConfig:o,mode:u}),m,!0),m},r.prototype.commitTransaction=function(t){var n=t===void 0?{}:t,i=n.beforeError,o=n.afterError,a=n.beforeComplete,s=n.afterComplete,c=new kr.ResultStreamObserver({server:this._server,beforeError:i,afterError:o,beforeComplete:a,afterComplete:s});return c.prepareToHandleSingleResponse(),this.write(Ir.default.commit(),c,!0),c},r.prototype.rollbackTransaction=function(t){var n=t===void 0?{}:t,i=n.beforeError,o=n.afterError,a=n.beforeComplete,s=n.afterComplete,c=new kr.ResultStreamObserver({server:this._server,beforeError:i,afterError:o,beforeComplete:a,afterComplete:s});return c.prepareToHandleSingleResponse(),this.write(Ir.default.rollback(),c,!0),c},r.prototype.run=function(t,n,i){var o=i===void 0?{}:i,a=o.bookmarks,s=o.txConfig,c=o.database,u=o.impersonatedUser,l=o.notificationFilter,h=o.mode,v=o.beforeKeys,b=o.afterKeys,m=o.beforeError,E=o.afterError,T=o.beforeComplete,S=o.afterComplete,R=o.flush,I=R===void 0?!0:R,A=o.highRecordWatermark,j=A===void 0?Number.MAX_VALUE:A,k=o.lowRecordWatermark,M=k===void 0?Number.MAX_VALUE:k,q=new kr.ResultStreamObserver({server:this._server,beforeKeys:v,afterKeys:b,beforeError:m,afterError:E,beforeComplete:T,afterComplete:S,highRecordWatermark:j,lowRecordWatermark:M});return(0,Ar.assertDatabaseIsEmpty)(c,this._onProtocolError,q),(0,Ar.assertImpersonatedUserIsEmpty)(u,this._onProtocolError,q),(0,Ar.assertNotificationFilterIsEmpty)(l,this._onProtocolError,q),this.write(Ir.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,mode:h}),q,!1),this.write(Ir.default.pullAll(),q,I),q},r.prototype.requestRoutingInformation=function(t){var n,i=t.routingContext,o=i===void 0?{}:i,a=t.sessionContext,s=a===void 0?{}:a,c=t.onError,u=t.onCompleted,l=this.run(k4,(n={},n[Km]=o,n),Yu(Yu({},s),{txConfig:$4.empty()}));return new kr.ProcedureRouteObserver({resultObserver:l,onProtocolError:this._onProtocolError,onError:c,onCompleted:u})},r}(A4.default);gc.default=L4;var wc={},Tc={},sd=f&&f.__assign||function(){return sd=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},sd.apply(this,arguments)},U4=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tc,"__esModule",{value:!0});var F4=U4(Oc);Tc.default=sd({},F4.default);var B4=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ku=f&&f.__assign||function(){return Ku=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ku.apply(this,arguments)},Sc=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wc,"__esModule",{value:!0});var W4=Sc(gc),ji=Sc(Fe),Pu=Ue,Ef=re,x4=Sc(Tc),V4=Sc(ge),hh=x;hh.internal.bookmarks.Bookmarks;var Zm=hh.internal.constants,q4=Zm.BOLT_PROTOCOL_V4_0,H4=Zm.FETCH_ALL,z4=hh.internal.txConfig.TxConfig,Qm="context",Xm="database",G4="CALL dbms.routing.getRoutingTable($".concat(Qm,", $").concat(Xm,")"),Y4=function(e){B4(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return q4},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new V4.default(Object.values(x4.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,i=n.bookmarks,o=n.txConfig,a=n.database,s=n.impersonatedUser,c=n.notificationFilter,u=n.mode,l=n.beforeError,h=n.afterError,v=n.beforeComplete,b=n.afterComplete,m=new Ef.ResultStreamObserver({server:this._server,beforeError:l,afterError:h,beforeComplete:v,afterComplete:b});return m.prepareToHandleSingleResponse(),(0,Pu.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,m),(0,Pu.assertNotificationFilterIsEmpty)(c,this._onProtocolError,m),this.write(ji.default.begin({bookmarks:i,txConfig:o,database:a,mode:u}),m,!0),m},r.prototype.run=function(t,n,i){var o=i===void 0?{}:i,a=o.bookmarks,s=o.txConfig,c=o.database,u=o.impersonatedUser,l=o.notificationFilter,h=o.mode,v=o.beforeKeys,b=o.afterKeys,m=o.beforeError,E=o.afterError,T=o.beforeComplete,S=o.afterComplete,R=o.flush,I=R===void 0?!0:R,A=o.reactive,j=A===void 0?!1:A,k=o.fetchSize,M=k===void 0?H4:k,q=o.highRecordWatermark,ne=q===void 0?Number.MAX_VALUE:q,ie=o.lowRecordWatermark,_e=ie===void 0?Number.MAX_VALUE:ie,X=new Ef.ResultStreamObserver({server:this._server,reactive:j,fetchSize:M,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:v,afterKeys:b,beforeError:m,afterError:E,beforeComplete:T,afterComplete:S,highRecordWatermark:ne,lowRecordWatermark:_e});(0,Pu.assertImpersonatedUserIsEmpty)(u,this._onProtocolError,X),(0,Pu.assertNotificationFilterIsEmpty)(l,this._onProtocolError,X);var de=j;return this.write(ji.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,database:c,mode:h}),X,de&&I),j||this.write(ji.default.pull({n:M}),X,I),X},r.prototype._requestMore=function(t,n,i){this.write(ji.default.pull({stmtId:t,n}),i,!0)},r.prototype._requestDiscard=function(t,n){this.write(ji.default.discard({stmtId:t}),n,!0)},r.prototype._noOp=function(){},r.prototype.requestRoutingInformation=function(t){var n,i=t.routingContext,o=i===void 0?{}:i,a=t.databaseName,s=a===void 0?null:a,c=t.sessionContext,u=c===void 0?{}:c,l=t.onError,h=t.onCompleted,v=this.run(G4,(n={},n[Qm]=o,n[Xm]=s,n),Ku(Ku({},u),{txConfig:z4.empty()}));return new Ef.ProcedureRouteObserver({resultObserver:v,onProtocolError:this._onProtocolError,onError:l,onCompleted:h})},r}(W4.default);wc.default=Y4;var Pc={},Cc={},cd=f&&f.__assign||function(){return cd=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},cd.apply(this,arguments)},K4=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cc,"__esModule",{value:!0});var Z4=K4(Tc);Cc.default=cd({},Z4.default);var Q4=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rc=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pc,"__esModule",{value:!0});var X4=Rc(wc),J4=Rc(Fe),e3=re,t3=x,r3=Ue,n3=Rc(Cc),i3=Rc(ge),o3=t3.internal.constants.BOLT_PROTOCOL_V4_1,a3=function(e){Q4(r,e);function r(t,n,i,o,a,s,c){o===void 0&&(o=function(){return null});var u=e.call(this,t,n,i,o,a,s)||this;return u._serversideRouting=c,u}return Object.defineProperty(r.prototype,"version",{get:function(){return o3},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new i3.default(Object.values(n3.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,i=t===void 0?{}:t,o=i.userAgent;i.boltAgent;var a=i.authToken,s=i.notificationFilter,c=i.onError,u=i.onComplete,l=new e3.LoginObserver({onError:function(h){return n._onLoginError(h,c)},onCompleted:function(h){return n._onLoginCompleted(h,a,u)}});return(0,r3.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(J4.default.hello(o,a,this._serversideRouting),l,!0),l},r}(X4.default);Pc.default=a3;var Ic={},Ac={},ld=f&&f.__assign||function(){return ld=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ld.apply(this,arguments)},u3=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ac,"__esModule",{value:!0});var s3=u3(Cc);Ac.default=ld({},s3.default);var c3=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_h=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ic,"__esModule",{value:!0});var l3=_h(Pc),f3=x,d3=_h(Ac),h3=_h(ge),_3=f3.internal.constants.BOLT_PROTOCOL_V4_2,v3=function(e){c3(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return _3},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new h3.default(Object.values(d3.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r}(l3.default);Ic.default=v3;var au={},jc={},fd=f&&f.__assign||function(){return fd=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},fd.apply(this,arguments)},p3=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jc,"__esModule",{value:!0});var b3=p3(Ac);jc.default=fd({},b3.default);var uu={},su={},dd=f&&f.__assign||function(){return dd=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},dd.apply(this,arguments)},y3=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(su,"__esModule",{value:!0});var m3=y3(jc);su.default=dd({},m3.default);var Jm=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},g3=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(uu,"__esModule",{value:!0});var Zu=qe,Xe=x,eg=g3(su),O3=kt,E3=Yr,Qi=Xe.internal.temporalUtil.localDateTimeToEpochSecond,np=73,w3=3,ip=105,T3=3;function S3(e,r){var t=e.disableLosslessIntegers,n=e.useBigInt,i=eg.default.createDateTimeWithZoneIdTransformer(e);return i.extendsWith({signature:ip,fromStructure:function(o){Zu.structure.verifyStructSize("DateTimeWithZoneId",T3,o.size);var a=Jm(o.fields,3),s=a[0],c=a[1],u=a[2],l=hd(u,s,c),h=new Xe.DateTime(l.year,l.month,l.day,l.hour,l.minute,l.second,(0,Xe.int)(c),l.timeZoneOffsetSeconds,u);return tg(h,t,n)},toStructure:function(o){var a=Qi(o.year,o.month,o.day,o.hour,o.minute,o.second,o.nanosecond),s=o.timeZoneOffsetSeconds!=null?o.timeZoneOffsetSeconds:P3(o.timeZoneId,a,o.nanosecond);o.timeZoneOffsetSeconds==null&&r.warn('DateTime objects without "timeZoneOffsetSeconds" property are prune to bugs related to ambiguous times. For instance, 2022-10-30T2:30:00[Europe/Berlin] could be GMT+1 or GMT+2.');var c=a.subtract(s),u=(0,Xe.int)(o.nanosecond),l=o.timeZoneId;return new Zu.structure.Structure(ip,[c,u,l])}})}function P3(e,r,t){var n=hd(e,r,t),i=Qi(n.year,n.month,n.day,n.hour,n.minute,n.second,t),o=i.subtract(r),a=r.subtract(o),s=hd(e,a,t),c=Qi(s.year,s.month,s.day,s.hour,s.minute,s.second,t),u=c.subtract(a);return u}var wf=new Map;function C3(e){if(!wf.has(e)){var r=new Intl.DateTimeFormat("en-US",{timeZone:e,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"});wf.set(e,r)}return wf.get(e)}function hd(e,r,t){var n=C3(e),i=(0,Xe.int)(r).multiply(1e3).add((0,Xe.int)(t).div(1e6)).toNumber(),o=n.formatToParts(i),a=o.reduce(function(c,u){return u.type==="era"?c.adjustEra=u.value.toUpperCase()==="B"?function(l){return l.subtract(1).negate()}:E3.identity:u.type==="hour"?c.hour=(0,Xe.int)(u.value).modulo(24):u.type!=="literal"&&(c[u.type]=(0,Xe.int)(u.value)),c},{});a.year=a.adjustEra(a.year);var s=Qi(a.year,a.month,a.day,a.hour,a.minute,a.second,a.nanosecond);return a.timeZoneOffsetSeconds=s.subtract(r),a.hour=a.hour.modulo(24),a}function R3(e){var r=e.disableLosslessIntegers,t=e.useBigInt,n=eg.default.createDateTimeWithOffsetTransformer(e);return n.extendsWith({signature:np,toStructure:function(i){var o=Qi(i.year,i.month,i.day,i.hour,i.minute,i.second,i.nanosecond),a=(0,Xe.int)(i.nanosecond),s=(0,Xe.int)(i.timeZoneOffsetSeconds),c=o.subtract(s);return new Zu.structure.Structure(np,[c,a,s])},fromStructure:function(i){Zu.structure.verifyStructSize("DateTimeWithZoneOffset",w3,i.size);var o=Jm(i.fields,3),a=o[0],s=o[1],c=o[2],u=(0,Xe.int)(a).add(c),l=(0,O3.epochSecondAndNanoToLocalDateTime)(u,s),h=new Xe.DateTime(l.year,l.month,l.day,l.hour,l.minute,l.second,l.nanosecond,c,null);return tg(h,r,t)}})}function tg(e,r,t){if(!r&&!t)return e;var n=function(s){return t?s.toBigInt():s.toNumberOrInfinity()},i=Object.create(Object.getPrototypeOf(e));for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)===!0){var a=e[o];i[o]=(0,Xe.isInt)(a)?n(a):a}return Object.freeze(i),i}uu.default={createDateTimeWithZoneIdTransformer:S3,createDateTimeWithOffsetTransformer:R3};var I3=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qu=f&&f.__assign||function(){return Qu=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Qu.apply(this,arguments)},cu=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(au,"__esModule",{value:!0});var A3=cu(Ic),op=cu(Fe),ap=re,j3=Ue,up=cu(jc),M3=cu(uu),sp=cu(ge),rg=x,N3=rg.internal.bookmarks.Bookmarks,$3=rg.internal.constants.BOLT_PROTOCOL_V4_3,k3=function(e){I3(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return $3},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new sp.default(Object.values(up.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.requestRoutingInformation=function(t){var n=t.routingContext,i=n===void 0?{}:n,o=t.databaseName,a=o===void 0?null:o,s=t.sessionContext,c=s===void 0?{}:s,u=t.onError,l=t.onCompleted,h=new ap.RouteObserver({onProtocolError:this._onProtocolError,onError:u,onCompleted:l}),v=c.bookmarks||N3.empty();return this.write(op.default.route(i,v.values(),a),h,!0),h},r.prototype.initialize=function(t){var n=this,i=t===void 0?{}:t,o=i.userAgent;i.boltAgent;var a=i.authToken,s=i.notificationFilter,c=i.onError,u=i.onComplete,l=new ap.LoginObserver({onError:function(h){return n._onLoginError(h,c)},onCompleted:function(h){return h.patch_bolt!==void 0&&n._applyPatches(h.patch_bolt),n._onLoginCompleted(h,a,u)}});return(0,j3.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(op.default.hello(o,a,this._serversideRouting,["utc"]),l,!0),l},r.prototype._applyPatches=function(t){t.includes("utc")&&this._applyUtcPatch()},r.prototype._applyUtcPatch=function(){var t=this;this._transformer=new sp.default(Object.values(Qu(Qu({},up.default),M3.default)).map(function(n){return n(t._config,t._log)}))},r}(A3.default);au.default=k3;var Mc={},D3=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xu=f&&f.__assign||function(){return Xu=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Xu.apply(this,arguments)},lu=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mc,"__esModule",{value:!0});var L3=lu(au),ng=x,Cu=lu(Fe),Tf=re,cp=Ue,lp=lu(su),U3=lu(uu),fp=lu(ge),ig=ng.internal.constants,F3=ig.BOLT_PROTOCOL_V4_4,B3=ig.FETCH_ALL,W3=ng.internal.bookmarks.Bookmarks,x3=function(e){D3(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return F3},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new fp.default(Object.values(lp.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.requestRoutingInformation=function(t){var n=t.routingContext,i=n===void 0?{}:n,o=t.databaseName,a=o===void 0?null:o,s=t.impersonatedUser,c=s===void 0?null:s,u=t.sessionContext,l=u===void 0?{}:u,h=t.onError,v=t.onCompleted,b=new Tf.RouteObserver({onProtocolError:this._onProtocolError,onError:h,onCompleted:v}),m=l.bookmarks||W3.empty();return this.write(Cu.default.routeV4x4(i,m.values(),{databaseName:a,impersonatedUser:c}),b,!0),b},r.prototype.run=function(t,n,i){var o=i===void 0?{}:i,a=o.bookmarks,s=o.txConfig,c=o.database,u=o.mode,l=o.impersonatedUser,h=o.notificationFilter,v=o.beforeKeys,b=o.afterKeys,m=o.beforeError,E=o.afterError,T=o.beforeComplete,S=o.afterComplete,R=o.flush,I=R===void 0?!0:R,A=o.reactive,j=A===void 0?!1:A,k=o.fetchSize,M=k===void 0?B3:k,q=o.highRecordWatermark,ne=q===void 0?Number.MAX_VALUE:q,ie=o.lowRecordWatermark,_e=ie===void 0?Number.MAX_VALUE:ie,X=new Tf.ResultStreamObserver({server:this._server,reactive:j,fetchSize:M,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:v,afterKeys:b,beforeError:m,afterError:E,beforeComplete:T,afterComplete:S,highRecordWatermark:ne,lowRecordWatermark:_e});(0,cp.assertNotificationFilterIsEmpty)(h,this._onProtocolError,X);var de=j;return this.write(Cu.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l}),X,de&&I),j||this.write(Cu.default.pull({n:M}),X,I),X},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,i=n.bookmarks,o=n.txConfig,a=n.database,s=n.mode,c=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,h=n.afterError,v=n.beforeComplete,b=n.afterComplete,m=new Tf.ResultStreamObserver({server:this._server,beforeError:l,afterError:h,beforeComplete:v,afterComplete:b});return m.prepareToHandleSingleResponse(),(0,cp.assertNotificationFilterIsEmpty)(u,this._onProtocolError,m),this.write(Cu.default.begin({bookmarks:i,txConfig:o,database:a,mode:s,impersonatedUser:c}),m,!0),m},r.prototype._applyUtcPatch=function(){var t=this;this._transformer=new fp.default(Object.values(Xu(Xu({},lp.default),U3.default)).map(function(n){return n(t._config,t._log)}))},r}(L3.default);Mc.default=x3;var Nc={},$c={},qi=f&&f.__assign||function(){return qi=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},qi.apply(this,arguments)},vh=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},og=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($c,"__esModule",{value:!0});var ph=qe,bh=x,kc=og(su),V3=og(uu),q3=4,H3=8,z3=4;function G3(e){var r=kc.default.createNodeTransformer(e);return r.extendsWith({fromStructure:function(t){ph.structure.verifyStructSize("Node",q3,t.size);var n=vh(t.fields,4),i=n[0],o=n[1],a=n[2],s=n[3];return new bh.Node(i,o,a,s)}})}function Y3(e){var r=kc.default.createRelationshipTransformer(e);return r.extendsWith({fromStructure:function(t){ph.structure.verifyStructSize("Relationship",H3,t.size);var n=vh(t.fields,8),i=n[0],o=n[1],a=n[2],s=n[3],c=n[4],u=n[5],l=n[6],h=n[7];return new bh.Relationship(i,o,a,s,c,u,l,h)}})}function K3(e){var r=kc.default.createUnboundRelationshipTransformer(e);return r.extendsWith({fromStructure:function(t){ph.structure.verifyStructSize("UnboundRelationship",z3,t.size);var n=vh(t.fields,4),i=n[0],o=n[1],a=n[2],s=n[3];return new bh.UnboundRelationship(i,o,a,s)}})}$c.default=qi(qi(qi({},kc.default),V3.default),{createNodeTransformer:G3,createRelationshipTransformer:Y3,createUnboundRelationshipTransformer:K3});var Z3=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Dc=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nc,"__esModule",{value:!0});var Q3=Dc(Mc),X3=Ue,J3=Dc($c),eW=Dc(ge),tW=Dc(Fe),rW=re,nW=x,iW=nW.internal.constants.BOLT_PROTOCOL_V5_0,oW=function(e){Z3(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return iW},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new eW.default(Object.values(J3.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,i=t===void 0?{}:t,o=i.userAgent;i.boltAgent;var a=i.authToken,s=i.notificationFilter,c=i.onError,u=i.onComplete,l=new rW.LoginObserver({onError:function(h){return n._onLoginError(h,c)},onCompleted:function(h){return n._onLoginCompleted(h,a,u)}});return(0,X3.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(tW.default.hello(o,a,this._serversideRouting),l,!0),l},r}(Q3.default);Nc.default=oW;var Lc={},Uc={},_d=f&&f.__assign||function(){return _d=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_d.apply(this,arguments)},aW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Uc,"__esModule",{value:!0});var uW=aW($c);Uc.default=_d({},uW.default);var sW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ju=f&&f.__assign||function(){return Ju=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ju.apply(this,arguments)},Fc=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lc,"__esModule",{value:!0});var cW=Fc(Nc),lW=Ue,fW=Fc(Uc),dW=Fc(ge),Sf=Fc(Fe),Pf=re,hW=x,_W=hW.internal.constants.BOLT_PROTOCOL_V5_1,vW=function(e){sW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return _W},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new dW.default(Object.values(fW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,i=t===void 0?{}:t,o=i.userAgent;i.boltAgent;var a=i.authToken,s=i.notificationFilter,c=i.onError,u=i.onComplete,l={},h=new Pf.LoginObserver({onError:function(v){return n._onLoginError(v,c)},onCompleted:function(v){return l.metadata=v,n._onLoginCompleted(v)}});return(0,lW.assertNotificationFilterIsEmpty)(s,this._onProtocolError,h),this.write(Sf.default.hello5x1(o,this._serversideRouting),h,!1),this.logon({authToken:a,onComplete:function(v){return u(Ju(Ju({},v),l.metadata))},onError:c,flush:!0})},r.prototype.logon=function(t){var n=this,i=t===void 0?{}:t,o=i.authToken,a=i.onComplete,s=i.onError,c=i.flush,u=new Pf.LoginObserver({onCompleted:function(){return n._onLoginCompleted(null,o,a)},onError:function(l){return n._onLoginError(l,s)}});return this.write(Sf.default.logon(o),u,c),u},r.prototype.logoff=function(t){var n=t===void 0?{}:t,i=n.onComplete,o=n.onError,a=n.flush,s=new Pf.LogoffObserver({onCompleted:i,onError:o});return this.write(Sf.default.logoff(),s,a),s},r}(cW.default);Lc.default=vW;var Bc={},Wc={},vd=f&&f.__assign||function(){return vd=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},vd.apply(this,arguments)},pW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wc,"__esModule",{value:!0});var bW=pW(Uc);Wc.default=vd({},bW.default);var yW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),es=f&&f.__assign||function(){return es=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},es.apply(this,arguments)},xc=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bc,"__esModule",{value:!0});var mW=xc(Lc),gW=xc(Wc),OW=xc(ge),Ru=xc(Fe),Cf=re,EW=x,ag=EW.internal.constants,wW=ag.BOLT_PROTOCOL_V5_2,TW=ag.FETCH_ALL,SW=function(e){yW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return wW},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new OW.default(Object.values(gW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,i=t===void 0?{}:t,o=i.userAgent;i.boltAgent;var a=i.authToken,s=i.notificationFilter,c=i.onError,u=i.onComplete,l={},h=new Cf.LoginObserver({onError:function(v){return n._onLoginError(v,c)},onCompleted:function(v){return l.metadata=v,n._onLoginCompleted(v)}});return this.write(Ru.default.hello5x2(o,s,this._serversideRouting),h,!1),this.logon({authToken:a,onComplete:function(v){return u(es(es({},v),l.metadata))},onError:c,flush:!0})},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,i=n.bookmarks,o=n.txConfig,a=n.database,s=n.mode,c=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,h=n.afterError,v=n.beforeComplete,b=n.afterComplete,m=new Cf.ResultStreamObserver({server:this._server,beforeError:l,afterError:h,beforeComplete:v,afterComplete:b});return m.prepareToHandleSingleResponse(),this.write(Ru.default.begin({bookmarks:i,txConfig:o,database:a,mode:s,impersonatedUser:c,notificationFilter:u}),m,!0),m},r.prototype.run=function(t,n,i){var o=i===void 0?{}:i,a=o.bookmarks,s=o.txConfig,c=o.database,u=o.mode,l=o.impersonatedUser,h=o.notificationFilter,v=o.beforeKeys,b=o.afterKeys,m=o.beforeError,E=o.afterError,T=o.beforeComplete,S=o.afterComplete,R=o.flush,I=R===void 0?!0:R,A=o.reactive,j=A===void 0?!1:A,k=o.fetchSize,M=k===void 0?TW:k,q=o.highRecordWatermark,ne=q===void 0?Number.MAX_VALUE:q,ie=o.lowRecordWatermark,_e=ie===void 0?Number.MAX_VALUE:ie,X=new Cf.ResultStreamObserver({server:this._server,reactive:j,fetchSize:M,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:v,afterKeys:b,beforeError:m,afterError:E,beforeComplete:T,afterComplete:S,highRecordWatermark:ne,lowRecordWatermark:_e}),de=j;return this.write(Ru.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l,notificationFilter:h}),X,de&&I),j||this.write(Ru.default.pull({n:M}),X,I),X},r}(mW.default);Bc.default=SW;var Vc={},qc={},pd=f&&f.__assign||function(){return pd=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},pd.apply(this,arguments)},PW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qc,"__esModule",{value:!0});var CW=PW(Wc);qc.default=pd({},CW.default);var RW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ts=f&&f.__assign||function(){return ts=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ts.apply(this,arguments)},Hc=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vc,"__esModule",{value:!0});var IW=Hc(Bc),AW=Hc(qc),jW=Hc(ge),MW=Hc(Fe),NW=re,$W=x,kW=$W.internal.constants.BOLT_PROTOCOL_V5_3,DW=function(e){RW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return kW},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new jW.default(Object.values(AW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,i=t===void 0?{}:t,o=i.userAgent,a=i.boltAgent,s=i.authToken,c=i.notificationFilter,u=i.onError,l=i.onComplete,h={},v=new NW.LoginObserver({onError:function(b){return n._onLoginError(b,u)},onCompleted:function(b){return h.metadata=b,n._onLoginCompleted(b)}});return this.write(MW.default.hello5x3(o,a,c,this._serversideRouting),v,!1),this.logon({authToken:s,onComplete:function(b){return l(ts(ts({},b),h.metadata))},onError:u,flush:!0})},r}(IW.default);Vc.default=DW;var zc={},Gc={},bd=f&&f.__assign||function(){return bd=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},bd.apply(this,arguments)},LW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gc,"__esModule",{value:!0});var UW=LW(qc);Gc.default=bd({},UW.default);var FW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yc=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zc,"__esModule",{value:!0});var BW=Yc(Vc),WW=Yc(Gc),xW=Yc(Fe),VW=re,qW=Yc(ge),HW=x,zW=HW.internal.constants.BOLT_PROTOCOL_V5_4,GW=function(e){FW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return zW},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new qW.default(Object.values(WW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.telemetry=function(t,n){var i=t.api,o=n===void 0?{}:n,a=o.onError,s=o.onCompleted,c=new VW.TelemetryObserver({onCompleted:s,onError:a});return this.write(xW.default.telemetry({api:i}),c,!1),c},r}(BW.default);zc.default=GW;var Kc={},Zc={},yd=f&&f.__assign||function(){return yd=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},yd.apply(this,arguments)},YW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zc,"__esModule",{value:!0});var KW=YW(Gc);Zc.default=yd({},KW.default);var ZW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yt=f&&f.__assign||function(){return Yt=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Yt.apply(this,arguments)},Qc=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kc,"__esModule",{value:!0});var QW=Qc(zc),XW=Qc(Zc),JW=Qc(ge),Iu=Qc(Fe),Rf=re,e6=x,ug=e6.internal.constants,t6=ug.BOLT_PROTOCOL_V5_5,r6=ug.FETCH_ALL,n6=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),i6=function(e){ZW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return t6},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new JW.default(Object.values(XW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,i=t===void 0?{}:t,o=i.userAgent,a=i.boltAgent,s=i.authToken,c=i.notificationFilter,u=i.onError,l=i.onComplete,h={},v=new Rf.LoginObserver({onError:function(b){return n._onLoginError(b,u)},onCompleted:function(b){return h.metadata=b,n._onLoginCompleted(b)}});return this.write(Iu.default.hello5x5(o,a,c,this._serversideRouting),v,!1),this.logon({authToken:s,onComplete:function(b){return l(Yt(Yt({},b),h.metadata))},onError:u,flush:!0})},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,i=n.bookmarks,o=n.txConfig,a=n.database,s=n.mode,c=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,h=n.afterError,v=n.beforeComplete,b=n.afterComplete,m=new Rf.ResultStreamObserver({server:this._server,beforeError:l,afterError:h,beforeComplete:v,afterComplete:b});return m.prepareToHandleSingleResponse(),this.write(Iu.default.begin5x5({bookmarks:i,txConfig:o,database:a,mode:s,impersonatedUser:c,notificationFilter:u}),m,!0),m},r.prototype.run=function(t,n,i){var o=i===void 0?{}:i,a=o.bookmarks,s=o.txConfig,c=o.database,u=o.mode,l=o.impersonatedUser,h=o.notificationFilter,v=o.beforeKeys,b=o.afterKeys,m=o.beforeError,E=o.afterError,T=o.beforeComplete,S=o.afterComplete,R=o.flush,I=R===void 0?!0:R,A=o.reactive,j=A===void 0?!1:A,k=o.fetchSize,M=k===void 0?r6:k,q=o.highRecordWatermark,ne=q===void 0?Number.MAX_VALUE:q,ie=o.lowRecordWatermark,_e=ie===void 0?Number.MAX_VALUE:ie,X=new Rf.ResultStreamObserver({server:this._server,reactive:j,fetchSize:M,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:v,afterKeys:b,beforeError:m,afterError:E,beforeComplete:T,afterComplete:S,highRecordWatermark:ne,lowRecordWatermark:_e,enrichMetadata:this._enrichMetadata}),de=j;return this.write(Iu.default.runWithMetadata5x5(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l,notificationFilter:h}),X,de&&I),j||this.write(Iu.default.pull({n:M}),X,I),X},r.prototype._enrichMetadata=function(t){return Array.isArray(t.statuses)&&(t.statuses=t.statuses.map(function(n){return Yt(Yt({},n),{description:n.neo4j_code!=null?n.status_description:n.description,diagnostic_record:n.diagnostic_record!==null?Yt(Yt({},n6),n.diagnostic_record):null})})),t},r}(QW.default);Kc.default=i6;var Xc={},Jc={},md=f&&f.__assign||function(){return md=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},md.apply(this,arguments)},o6=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jc,"__esModule",{value:!0});var a6=o6(Zc);Jc.default=md({},a6.default);var u6=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),On=f&&f.__assign||function(){return On=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},On.apply(this,arguments)},yh=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xc,"__esModule",{value:!0});var s6=yh(Kc),c6=yh(Jc),l6=yh(ge),f6=x,d6=f6.internal.constants.BOLT_PROTOCOL_V5_6,h6=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),_6=function(e){u6(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return d6},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new l6.default(Object.values(c6.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype._enrichMetadata=function(t){return Array.isArray(t.statuses)&&(t.statuses=t.statuses.map(function(n){return On(On({},n),{diagnostic_record:n.diagnostic_record!==null?On(On({},h6),n.diagnostic_record):null})})),t},r}(s6.default);Xc.default=_6;var el={},tl={},gd=f&&f.__assign||function(){return gd=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},gd.apply(this,arguments)},v6=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tl,"__esModule",{value:!0});var p6=v6(Jc);tl.default=gd({},p6.default);var b6=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),En=f&&f.__assign||function(){return En=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},En.apply(this,arguments)},mh=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(el,"__esModule",{value:!0});var y6=mh(Xc),m6=mh(tl),g6=mh(ge),O6=x,E6=O6.internal.constants.BOLT_PROTOCOL_V5_7,w6=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),T6=function(e){b6(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return E6},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new g6.default(Object.values(m6.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.enrichErrorMetadata=function(t){return En(En({},t),{cause:t.cause!==null&&t.cause!==void 0?this.enrichErrorMetadata(t.cause):null,code:t.neo4j_code,diagnostic_record:t.diagnostic_record!==null?En(En({},w6),t.diagnostic_record):null})},r}(y6.default);el.default=T6;var gh={},Oh={},Od=f&&f.__assign||function(){return Od=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Od.apply(this,arguments)},S6=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oh,"__esModule",{value:!0});var P6=S6(tl);Oh.default=Od({},P6.default);var C6=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),rl=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gh,"__esModule",{value:!0});var R6=rl(el),I6=rl(Oh),A6=rl(ge),dp=rl(Fe),j6=re,M6=x,sg=M6.internal.constants,N6=sg.BOLT_PROTOCOL_V5_8,$6=sg.FETCH_ALL,k6=function(e){C6(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return N6},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new A6.default(Object.values(I6.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.run=function(t,n,i){var o=i===void 0?{}:i,a=o.bookmarks,s=o.txConfig,c=o.database,u=o.mode,l=o.impersonatedUser,h=o.notificationFilter,v=o.beforeKeys,b=o.afterKeys,m=o.beforeError,E=o.afterError,T=o.beforeComplete,S=o.afterComplete,R=o.flush,I=R===void 0?!0:R,A=o.reactive,j=A===void 0?!1:A,k=o.fetchSize,M=k===void 0?$6:k,q=o.highRecordWatermark,ne=q===void 0?Number.MAX_VALUE:q,ie=o.lowRecordWatermark,_e=ie===void 0?Number.MAX_VALUE:ie,X=o.onDb,de=new j6.ResultStreamObserver({server:this._server,reactive:j,fetchSize:M,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:v,afterKeys:b,beforeError:m,afterError:E,beforeComplete:T,afterComplete:S,highRecordWatermark:ne,lowRecordWatermark:_e,enrichMetadata:this._enrichMetadata,onDb:X}),ze=j;return this.write(dp.default.runWithMetadata5x5(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l,notificationFilter:h}),de,ze&&I),j||this.write(dp.default.pull({n:M}),de,I),de},r}(R6.default);gh.default=k6;var Eh={};Object.defineProperty(Eh,"__esModule",{value:!0});var Ht=x,D6=112,L6=113,U6=126,F6=127;function It(){}function If(e){return e}var B6={onNext:It,onCompleted:It,onError:It},W6=function(){function e(r){var t=r===void 0?{}:r,n=t.transformMetadata,i=t.enrichErrorMetadata,o=t.log,a=t.observer;this._pendingObservers=[],this._log=o,this._transformMetadata=n||If,this._enrichErrorMetadata=i||If,this._observer=Object.assign({onObserversCountChange:It,onError:It,onFailure:It,onErrorApplyTransformation:If},a)}return Object.defineProperty(e.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),e.prototype.handleResponse=function(r){var t=r.fields[0];switch(r.signature){case L6:this._log.isDebugEnabled()&&this._log.debug("S: RECORD ".concat(Ht.json.stringify(r))),this._currentObserver.onNext(t);break;case D6:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS ".concat(Ht.json.stringify(r)));try{var n=this._transformMetadata(t);this._currentObserver.onCompleted(n)}finally{this._updateCurrentObserver()}break;case F6:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE ".concat(Ht.json.stringify(r)));try{this._currentFailure=this._handleErrorPayload(this._enrichErrorMetadata(t)),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case U6:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED ".concat(Ht.json.stringify(r)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,Ht.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,Ht.newError)("Unknown Bolt protocol message: "+r))}},e.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onObserversCountChange(this._observersCount)},Object.defineProperty(e.prototype,"_observersCount",{get:function(){return this._currentObserver==null?this._pendingObservers.length:this._pendingObservers.length+1},enumerable:!1,configurable:!0}),e.prototype._queueObserver=function(r){return r=r||B6,r.onCompleted=r.onCompleted||It,r.onError=r.onError||It,r.onNext=r.onNext||It,this._currentObserver===void 0?this._currentObserver=r:this._pendingObservers.push(r),this._observer.onObserversCountChange(this._observersCount),!0},e.prototype._notifyErrorToObservers=function(r){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(r);this._pendingObservers.length>0;){var t=this._pendingObservers.shift();t&&t.onError&&t.onError(r)}},e.prototype.hasOngoingObservableRequests=function(){return this._currentObserver!=null||this._pendingObservers.length>0},e.prototype._resetFailure=function(){this._currentFailure=null},e.prototype._handleErrorPayload=function(r){var t=x6(r.code),n=r.cause!=null?this._handleErrorCause(r.cause):void 0,i=(0,Ht.newError)(r.message,t,n,r.gql_status,r.description,r.diagnostic_record);return this._observer.onErrorApplyTransformation(i)},e.prototype._handleErrorCause=function(r){var t=r.cause!=null?this._handleErrorCause(r.cause):void 0,n=(0,Ht.newGQLError)(r.message,t,r.gql_status,r.description,r.diagnostic_record);return this._observer.onErrorApplyTransformation(n)},e}();Eh.default=W6;function x6(e){return e==="Neo.TransientError.Transaction.Terminated"?"Neo.ClientError.Transaction.Terminated":e==="Neo.TransientError.Transaction.LockClientStopped"?"Neo.ClientError.Transaction.LockClientStopped":e}var $e=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(uh,"__esModule",{value:!0});var V6=x,q6=$e(uc),H6=$e(bc),z6=$e(gc),G6=$e(wc),Y6=$e(Pc),K6=$e(Ic),Z6=$e(au),Q6=$e(Mc),X6=$e(Nc),J6=$e(Lc),e8=$e(Bc),t8=$e(Vc),r8=$e(zc),n8=$e(Kc),i8=$e(Xc),o8=$e(el),a8=$e(gh),u8=$e(Eh);function s8(e){var r=e===void 0?{}:e,t=r.version,n=r.chunker,i=r.dechunker,o=r.channel,a=r.disableLosslessIntegers,s=r.useBigInt,c=r.serversideRouting,u=r.server,l=r.log,h=r.observer,v=function(b){var m=new u8.default({transformMetadata:b.transformMetadata.bind(b),enrichErrorMetadata:b.enrichErrorMetadata.bind(b),log:l,observer:h});return o.onerror=h.onError.bind(h),o.onmessage=function(E){return i.write(E)},i.onmessage=function(E){try{m.handleResponse(b.unpack(E))}catch(T){return h.onError(T)}},m};return c8(t,u,n,{disableLosslessIntegers:a,useBigInt:s},c,v,h.onProtocolError.bind(h),l)}uh.default=s8;function c8(e,r,t,n,i,o,a,s){switch(e){case 1:return new q6.default(r,t,n,o,s,a);case 2:return new H6.default(r,t,n,o,s,a);case 3:return new z6.default(r,t,n,o,s,a);case 4:return new G6.default(r,t,n,o,s,a);case 4.1:return new Y6.default(r,t,n,o,s,a,i);case 4.2:return new K6.default(r,t,n,o,s,a,i);case 4.3:return new Z6.default(r,t,n,o,s,a,i);case 4.4:return new Q6.default(r,t,n,o,s,a,i);case 5:return new X6.default(r,t,n,o,s,a,i);case 5.1:return new J6.default(r,t,n,o,s,a,i);case 5.2:return new e8.default(r,t,n,o,s,a,i);case 5.3:return new t8.default(r,t,n,o,s,a,i);case 5.4:return new r8.default(r,t,n,o,s,a,i);case 5.5:return new n8.default(r,t,n,o,s,a,i);case 5.6:return new i8.default(r,t,n,o,s,a,i);case 5.7:return new o8.default(r,t,n,o,s,a,i);case 5.8:return new a8.default(r,t,n,o,s,a,i);default:throw(0,V6.newError)("Unknown Bolt protocol version: "+e)}}(function(e){var r=f&&f.__createBinding||(Object.create?function(c,u,l,h){h===void 0&&(h=l);var v=Object.getOwnPropertyDescriptor(u,l);(!v||("get"in v?!u.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(c,h,v)}:function(c,u,l,h){h===void 0&&(h=l),c[h]=u[l]}),t=f&&f.__exportStar||function(c,u){for(var l in c)l!=="default"&&!Object.prototype.hasOwnProperty.call(u,l)&&r(u,c,l)},n=f&&f.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.RawRoutingTable=e.BoltProtocol=void 0;var i=n(Qd),o=n(uh),a=n(au),s=n(sc);t(re,e),e.BoltProtocol=a.default,e.RawRoutingTable=s.default,e.default={handshake:i.default,create:o.default}})(Zd);var cg={},nl={},l8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(nl,"__esModule",{value:!0});var f8=x,d8=function(e){l8(r,e);function r(t){var n=e.call(this)||this;return n._connection=t,n}return r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t;n.accessMode,n.database,n.bookmarks;var i=this._connection;return this._connection=null,Promise.resolve(i)},r}(f8.ConnectionProvider);nl.default=d8;var fu={},il={},du={},h8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(du,"__esModule",{value:!0});var _8=x,v8=function(e){h8(r,e);function r(t){var n=e.call(this)||this;return n._errorHandler=t,n}return Object.defineProperty(r.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"authToken",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(r.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.connect=function(t,n,i,o){throw new Error("not implemented")},r.prototype.write=function(t,n,i){throw new Error("not implemented")},r.prototype.close=function(){throw new Error("not implemented")},r.prototype.handleAndTransformError=function(t,n){return this._errorHandler?this._errorHandler.handleAndTransformError(t,n,this):t},r}(_8.Connection);du.default=v8;var hu={},p8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),hp=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},_p=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},lg=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hu,"__esModule",{value:!0});hu.createChannelConnection=void 0;var Au=un,wn=x,b8=lg(du),vp=lg(Zd),y8=wn.error.PROTOCOL_ERROR,m8=wn.internal.logger.Logger,g8=0;function O8(e,r,t,n,i,o,a,s){o===void 0&&(o=null),s===void 0&&(s=function(l){return new Au.Channel(l)});var c=new Au.ChannelConfig(e,r,t.errorCode(),i),u=s(c);return vp.default.handshake(u,n).then(function(l){var h=l.protocolVersion,v=l.consumeRemainingBuffer,b=new Au.Chunker(u),m=new Au.Dechunker,E=function(S){return vp.default.create({version:h,channel:u,chunker:b,dechunker:m,disableLosslessIntegers:r.disableLosslessIntegers,useBigInt:r.useBigInt,serversideRouting:o,server:S.server,log:S.logger,observer:{onObserversCountChange:S._handleOngoingRequestsNumberChange.bind(S),onError:S._handleFatalError.bind(S),onFailure:S._resetOnFailure.bind(S),onProtocolError:S._handleProtocolError.bind(S),onErrorApplyTransformation:function(R){return S.handleAndTransformError(R,S._address)}}})},T=new fg(u,t,e,n,r.disableLosslessIntegers,o,b,r.notificationFilter,E,r.telemetryDisabled,a);return v(function(S){return m.write(S)}),T}).catch(function(l){return u.close().then(function(){throw l})})}hu.createChannelConnection=O8;var fg=function(e){p8(r,e);function r(t,n,i,o,a,s,c,u,l,h,v){a===void 0&&(a=!1),s===void 0&&(s=null),v===void 0&&(v=function(m){});var b=e.call(this,n)||this;return b._authToken=null,b._idle=!1,b._reseting=!1,b._resetObservers=[],b._id=g8++,b._address=i,b._server={address:i.asHostPort()},b._creationTimestamp=Date.now(),b._disableLosslessIntegers=a,b._ch=t,b._chunker=c,b._log=E8(b,o),b._serversideRouting=s,b._notificationFilter=u,b._telemetryDisabledDriverConfig=h===!0,b._telemetryDisabledConnection=!0,b._ssrCallback=v,b._dbConnectionId=null,b._protocol=l(b),b._isBroken=!1,b._log.isDebugEnabled()&&b._log.debug("created towards ".concat(i)),b}return r.prototype.beginTransaction=function(t){return this._sendTelemetryIfEnabled(t),this._protocol.beginTransaction(t)},r.prototype.run=function(t,n,i){return this._sendTelemetryIfEnabled(i),this._protocol.run(t,n,i)},r.prototype._sendTelemetryIfEnabled=function(t){this._telemetryDisabledConnection||this._telemetryDisabledDriverConfig||t==null||t.apiTelemetryConfig==null||this._protocol.telemetry({api:t.apiTelemetryConfig.api},{onCompleted:t.apiTelemetryConfig.onTelemetrySuccess,onError:t.beforeError})},r.prototype.commitTransaction=function(t){return this._protocol.commitTransaction(t)},r.prototype.rollbackTransaction=function(t){return this._protocol.rollbackTransaction(t)},r.prototype.getProtocolVersion=function(){return this._protocol.version},Object.defineProperty(r.prototype,"authToken",{get:function(){return this._authToken},set:function(t){this._authToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return this._protocol.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(t){this._dbConnectionId=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){return this._idleTimestamp},set:function(t){this._idleTimestamp=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){return this._creationTimestamp},enumerable:!1,configurable:!0}),r.prototype.connect=function(t,n,i,o){return hp(this,void 0,void 0,function(){var a=this;return _p(this,function(s){switch(s.label){case 0:if(this._protocol.initialized&&!this._protocol.supportsReAuth)throw(0,wn.newError)("Connection does not support re-auth");return this._authToken=i,this._protocol.initialized?[3,2]:[4,this._initialize(t,n,i)];case 1:return[2,s.sent()];case 2:return o?[4,new Promise(function(c,u){a._protocol.logoff({onError:u}),a._protocol.logon({authToken:i,onError:u,onComplete:function(){return c(a)},flush:!0})})]:[3,4];case 3:return[2,s.sent()];case 4:return this._protocol.logoff(),this._protocol.logon({authToken:i,flush:!0}),[2,this]}})})},r.prototype._initialize=function(t,n,i){var o=this,a=this;return new Promise(function(s,c){o._protocol.initialize({userAgent:t,boltAgent:n,authToken:i,notificationFilter:o._notificationFilter,onError:function(u){return c(u)},onComplete:function(u){var l;if(u){var h=u.server;(!o.version||h)&&(o.version=h);var v=u.connection_id;if(o.databaseId||(o.databaseId=v),u.hints){var b=u.hints["connection.recv_timeout_seconds"];if(b!=null){var m=(0,wn.toNumber)(b);Number.isInteger(m)&&m>0?o._ch.setupReceiveTimeout(m*1e3):o._log.info("Server located at ".concat(o._address," supplied an invalid connection receive timeout value (").concat(m,"). ")+"Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}var E=u.hints["telemetry.enabled"];E===!0&&(o._telemetryDisabledConnection=!1),o.SSREnabledHint=u.hints["ssr.enabled"]}o._ssrCallback((l=o.SSREnabledHint)!==null&&l!==void 0?l:!1,"OPEN")}s(a)}})})},r.prototype.protocol=function(){return this._protocol},Object.defineProperty(r.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return this._server.version},set:function(t){this._server.version=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),r.prototype._handleFatalError=function(t){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||t,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by ".concat(this._error," (").concat(wn.json.stringify(this._error),")")),this._protocol.notifyFatalError(this._error)},r.prototype._setIdle=function(t){this._idle=!0,this._ch.stopReceiveTimeout(),this._protocol.queueObserverIfProtocolIsNotBroken(t)},r.prototype._unsetIdle=function(){this._idle=!1,this._updateCurrentObserver()},r.prototype._queueObserver=function(t){return this._protocol.queueObserverIfProtocolIsNotBroken(t)},r.prototype.hasOngoingObservableRequests=function(){return!this._idle&&this._protocol.hasOngoingObservableRequests()},r.prototype.resetAndFlush=function(){var t=this;return new Promise(function(n,i){t._reset({onError:function(o){if(t._isBroken)i(o);else{var a=t._handleProtocolError("Received FAILURE as a response for RESET: ".concat(o));i(a)}},onComplete:function(){n()}})})},r.prototype._resetOnFailure=function(){var t=this;this.isOpen()&&this._reset({onError:function(){t._protocol.resetFailure()},onComplete:function(){t._protocol.resetFailure()}})},r.prototype._reset=function(t){var n=this;if(this._reseting){this._protocol.isLastMessageReset()?this._resetObservers.push(t):this._protocol.reset({onError:function(o){t.onError(o)},onComplete:function(){t.onComplete()}});return}this._resetObservers.push(t),this._reseting=!0;var i=function(o){n._reseting=!1;var a=n._resetObservers;n._resetObservers=[],a.forEach(o)};this._protocol.reset({onError:function(o){i(function(a){return a.onError(o)})},onComplete:function(){i(function(o){return o.onComplete()})}})},r.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},r.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},r.prototype._handleOngoingRequestsNumberChange=function(t){this._idle||(t===0?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout())},r.prototype.close=function(){var t;return hp(this,void 0,void 0,function(){return _p(this,function(n){switch(n.label){case 0:return this._ssrCallback((t=this.SSREnabledHint)!==null&&t!==void 0?t:!1,"CLOSE"),this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return n.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},r.prototype.toString=function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")},r.prototype._handleProtocolError=function(t){this._protocol.resetFailure(),this._updateCurrentObserver();var n=(0,wn.newError)(t,y8);return this._handleFatalError(n),n},r}(b8.default);hu.default=fg;function E8(e,r){return new m8(r._level,function(t,n){return r._loggerFunction(t,"".concat(e," ").concat(n))})}var wh={},w8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),T8=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wh,"__esModule",{value:!0});var S8=T8(du),P8=function(e){w8(r,e);function r(t,n){var i=e.call(this,n)||this;return n&&(i._originalErrorHandler=t._errorHandler,t._errorHandler=i._errorHandler),i._delegate=t,i}return r.prototype.beginTransaction=function(t){return this._delegate.beginTransaction(t)},r.prototype.run=function(t,n,i){return this._delegate.run(t,n,i)},r.prototype.commitTransaction=function(t){return this._delegate.commitTransaction(t)},r.prototype.rollbackTransaction=function(t){return this._delegate.rollbackTransaction(t)},r.prototype.getProtocolVersion=function(){return this._delegate.getProtocolVersion()},Object.defineProperty(r.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(t){this._delegate.databaseId=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"authToken",{get:function(){return this._delegate.authToken},set:function(t){this._delegate.authToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return this._delegate.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return this._delegate.version},set:function(t){this._delegate.version=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){return this._delegate.creationTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){return this._delegate.idleTimestamp},set:function(t){this._delegate.idleTimestamp=t},enumerable:!1,configurable:!0}),r.prototype.isOpen=function(){return this._delegate.isOpen()},r.prototype.protocol=function(){return this._delegate.protocol()},r.prototype.connect=function(t,n,i,o){return this._delegate.connect(t,n,i,o)},r.prototype.write=function(t,n,i){return this._delegate.write(t,n,i)},r.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},r.prototype.hasOngoingObservableRequests=function(){return this._delegate.hasOngoingObservableRequests()},r.prototype.close=function(){return this._delegate.close()},r.prototype.release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate.release()},r}(S8.default);wh.default=P8;var Th={};Object.defineProperty(Th,"__esModule",{value:!0});var dg=x,C8=dg.error.SERVICE_UNAVAILABLE,R8=dg.error.SESSION_EXPIRED,I8=function(){function e(r,t,n,i){this._errorCode=r,this._handleUnavailability=t||Af,this._handleWriteFailure=n||Af,this._handleSecurityError=i||Af}return e.create=function(r){var t=r.errorCode,n=r.handleUnavailability,i=r.handleWriteFailure,o=r.handleSecurityError;return new e(t,n,i,o)},e.prototype.errorCode=function(){return this._errorCode},e.prototype.handleAndTransformError=function(r,t,n){return A8(r)?this._handleSecurityError(r,t,n):j8(r)?this._handleUnavailability(r,t,n):M8(r)?this._handleWriteFailure(r,t,n):r},e}();Th.default=I8;function A8(e){return e!=null&&e.code!=null&&e.code.startsWith("Neo.ClientError.Security.")}function j8(e){return e?e.code===R8||e.code===C8||e.code==="Neo.TransientError.General.DatabaseUnavailable":!1}function M8(e){return e?e.code==="Neo.ClientError.Cluster.NotALeader"||e.code==="Neo.ClientError.General.ForbiddenOnReadOnlyDatabase":!1}function Af(e){return e}(function(e){var r=f&&f.__createBinding||(Object.create?function(u,l,h,v){v===void 0&&(v=h);var b=Object.getOwnPropertyDescriptor(l,h);(!b||("get"in b?!l.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return l[h]}}),Object.defineProperty(u,v,b)}:function(u,l,h,v){v===void 0&&(v=h),u[v]=l[h]}),t=f&&f.__setModuleDefault||(Object.create?function(u,l){Object.defineProperty(u,"default",{enumerable:!0,value:l})}:function(u,l){u.default=l}),n=f&&f.__importStar||function(u){if(u&&u.__esModule)return u;var l={};if(u!=null)for(var h in u)h!=="default"&&Object.prototype.hasOwnProperty.call(u,h)&&r(l,u,h);return t(l,u),l},i=f&&f.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=e.ConnectionErrorHandler=e.DelegateConnection=e.ChannelConnection=e.Connection=void 0;var o=i(du);e.Connection=o.default;var a=n(hu);e.ChannelConnection=a.default,Object.defineProperty(e,"createChannelConnection",{enumerable:!0,get:function(){return a.createChannelConnection}});var s=i(wh);e.DelegateConnection=s.default;var c=i(Th);e.ConnectionErrorHandler=c.default,e.default=o.default})(il);var Sh={},N8=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},$8=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Sh,"__esModule",{value:!0});var k8=x,pp=Ot,D8=function(){function e(r){var t=r.authTokenManager,n=r.userAgent,i=r.boltAgent;this._authTokenManager=t||(0,k8.staticAuthTokenManager)({}),this._userAgent=n,this._boltAgent=i}return e.prototype.authenticate=function(r){var t=r.connection,n=r.auth,i=r.skipReAuth,o=r.waitReAuth,a=r.forceReAuth;return N8(this,void 0,void 0,function(){var s,c;return $8(this,function(u){switch(u.label){case 0:return n==null?[3,3]:(s=t.supportsReAuth===!0&&(!pp.object.equals(t.authToken,n)&&i!==!0||a===!0),t.authToken==null||s?[4,t.connect(this._userAgent,this._boltAgent,n,o||!1)]:[3,2]);case 1:return[2,u.sent()];case 2:return[2,t];case 3:return[4,this._authTokenManager.getToken()];case 4:return c=u.sent(),pp.object.equals(c,t.authToken)?[3,6]:[4,t.connect(this._userAgent,this._boltAgent,c,!1)];case 5:return[2,u.sent()];case 6:return[2,t]}})})},e.prototype.handleError=function(r){var t=r.connection,n=r.code;return t&&n.startsWith("Neo.ClientError.Security.")?this._authTokenManager.handleSecurityException(t.authToken,n):!1},e}();Sh.default=D8;var Ph={},L8=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},U8=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Ph,"__esModule",{value:!0});var F8=function(){function e(r){var t=r.connectionLivenessCheckTimeout;this._connectionLivenessCheckTimeout=t}return e.prototype.check=function(r){return L8(this,void 0,void 0,function(){var t;return U8(this,function(n){switch(n.label){case 0:return this._isCheckDisabled||this._isNewlyCreatedConnection(r)?[2,!0]:(t=Date.now()-r.idleTimestamp,this._connectionLivenessCheckTimeout===0||t>this._connectionLivenessCheckTimeout?[4,r.resetAndFlush().then(function(){return!0})]:[3,2]);case 1:return[2,n.sent()];case 2:return[2,!0]}})})},Object.defineProperty(e.prototype,"_isCheckDisabled",{get:function(){return this._connectionLivenessCheckTimeout==null||this._connectionLivenessCheckTimeout<0},enumerable:!1,configurable:!0}),e.prototype._isNewlyCreatedConnection=function(r){return r.authToken==null},e}();Ph.default=F8;var Ch={},B8=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},W8=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Ch,"__esModule",{value:!0});var x8=un,V8=function(){function e(r){var t=r.clientCertificateProvider,n=r.loader;this._clientCertificateProvider=t,this._loader=n||x8.ClientCertificatesLoader,this._clientCertificate=null}return e.prototype.getClientCertificate=function(){return B8(this,void 0,void 0,function(){var r,t,n=this;return W8(this,function(i){switch(i.label){case 0:return r=this._clientCertificateProvider!=null,r?(t=this._clientCertificate==null,t?[3,2]:[4,this._clientCertificateProvider.hasUpdate()]):[3,3];case 1:t=i.sent(),i.label=2;case 2:r=t,i.label=3;case 3:return r&&(this._clientCertificate=Promise.resolve(this._clientCertificateProvider.getClientCertificate()).then(this._loader.load).then(function(o){return n._clientCertificate=o,n._clientCertificate}).catch(function(o){throw n._clientCertificate=null,o})),[2,this._clientCertificate]}})})},e}();Ch.default=V8;var q8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),jr=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Mr=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},H8=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},z8=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))},Rh=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fu,"__esModule",{value:!0});var bp=il,Tn=x,G8=Rh(Sh),Y8=Ot,K8=Rh(Ph),Z8=Rh(Ch),Q8=Tn.error.SERVICE_UNAVAILABLE,X8=["Neo.ClientError.Security.CredentialsExpired","Neo.ClientError.Security.Forbidden","Neo.ClientError.Security.TokenExpired","Neo.ClientError.Security.Unauthorized"],hg=Tn.internal.pool,yp=hg.Pool,J8=hg.PoolConfig,ex=function(e){q8(r,e);function r(t,n){var i=t.id,o=t.config,a=t.log,s=t.userAgent,c=t.boltAgent,u=t.authTokenManager,l=t.newPool,h=l===void 0?function(){for(var b=[],m=0;m<arguments.length;m++)b[m]=arguments[m];return new(yp.bind.apply(yp,z8([void 0],H8(b),!1)))}:l;n===void 0&&(n=null);var v=e.call(this)||this;return v._id=i,v._config=o,v._log=a,v._clientCertificateHolder=new Z8.default({clientCertificateProvider:v._config.clientCertificate}),v._authenticationProvider=new G8.default({authTokenManager:u,userAgent:s,boltAgent:c}),v._livenessCheckProvider=new K8.default({connectionLivenessCheckTimeout:o.connectionLivenessCheckTimeout}),v._userAgent=s,v._boltAgent=c,v._createChannelConnection=n||function(b){return jr(v,void 0,void 0,function(){var m,E;return Mr(this,function(T){switch(T.label){case 0:return m=bp.createChannelConnection,E=[b,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,m.apply(void 0,E.concat([T.sent()]))]}})})},v._connectionPool=h({create:v._createConnection.bind(v),destroy:v._destroyConnection.bind(v),validateOnAcquire:v._validateConnectionOnAcquire.bind(v),validateOnRelease:v._validateConnectionOnRelease.bind(v),installIdleObserver:r._installIdleObserverOnConnection.bind(v),removeIdleObserver:r._removeIdleObserverOnConnection.bind(v),config:J8.fromDriverConfig(o),log:v._log}),v._openConnections={},v}return r.prototype._createConnectionErrorHandler=function(){return new bp.ConnectionErrorHandler(Q8)},r.prototype._getClientCertificate=function(){return jr(this,void 0,void 0,function(){return Mr(this,function(t){return[2,this._config.clientCertificate.getClientCertificate()]})})},r.prototype._createConnection=function(t,n,i){var o=this,a=t.auth;return this._createChannelConnection(n).then(function(s){return s.release=function(){return s.idleTimestamp=Date.now(),i(n,s)},o._openConnections[s.id]=s,o._authenticationProvider.authenticate({connection:s,auth:a}).catch(function(c){throw o._destroyConnection(s),c})})},r.prototype._validateConnectionOnAcquire=function(t,n){var i=t.auth,o=t.skipReAuth;return jr(this,void 0,void 0,function(){var a,s;return Mr(this,function(c){switch(c.label){case 0:if(!this._validateConnection(n))return[2,!1];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this._livenessCheckProvider.check(n)];case 2:return c.sent(),[3,4];case 3:return a=c.sent(),this._log.debug("The connection ".concat(n.id," is not alive because of an error ").concat(a.code," '").concat(a.message,"'")),[2,!1];case 4:return c.trys.push([4,6,,7]),[4,this._authenticationProvider.authenticate({connection:n,auth:i,skipReAuth:o})];case 5:return c.sent(),[2,!0];case 6:return s=c.sent(),this._log.debug("The connection ".concat(n.id," is not valid because of an error ").concat(s.code," '").concat(s.message,"'")),[2,!1];case 7:return[2]}})})},r.prototype._validateConnectionOnRelease=function(t){return t._sticky!==!0&&this._validateConnection(t)},r.prototype._validateConnection=function(t){if(!t.isOpen())return!1;var n=this._config.maxConnectionLifetime,i=Date.now()-t.creationTimestamp;return!(i>n)},r.prototype._destroyConnection=function(t){return delete this._openConnections[t.id],t.close()},r.prototype._verifyConnectivityAndGetServerVersion=function(t){var n=t.address;return jr(this,void 0,void 0,function(){var i,o;return Mr(this,function(a){switch(a.label){case 0:return[4,this._connectionPool.acquire({},n)];case 1:i=a.sent(),o=new Tn.ServerInfo(i.server,i.protocol().version),a.label=2;case 2:return a.trys.push([2,,5,7]),i.protocol().isLastMessageLogon()?[3,4]:[4,i.resetAndFlush()];case 3:a.sent(),a.label=4;case 4:return[3,7];case 5:return[4,i.release()];case 6:return a.sent(),[7];case 7:return[2,o]}})})},r.prototype._verifyAuthentication=function(t){var n=t.getAddress,i=t.auth;return jr(this,void 0,void 0,function(){var o,a,s,c,u,l;return Mr(this,function(h){switch(h.label){case 0:o=[],h.label=1;case 1:return h.trys.push([1,8,9,11]),[4,n()];case 2:return a=h.sent(),[4,this._connectionPool.acquire({auth:i,skipReAuth:!0},a)];case 3:if(s=h.sent(),o.push(s),c=!s.protocol().isLastMessageLogon(),!s.supportsReAuth)throw(0,Tn.newError)("Driver is connected to a database that does not support user switch.");return c&&s.supportsReAuth?[4,this._authenticationProvider.authenticate({connection:s,auth:i,waitReAuth:!0,forceReAuth:!0})]:[3,5];case 4:return h.sent(),[3,7];case 5:return c&&!s.supportsReAuth?[4,this._connectionPool.acquire({auth:i},a,{requireNew:!0})]:[3,7];case 6:u=h.sent(),u._sticky=!0,o.push(u),h.label=7;case 7:return[2,!0];case 8:if(l=h.sent(),X8.includes(l.code))return[2,!1];throw l;case 9:return[4,Promise.all(o.map(function(v){return v.release()}))];case 10:return h.sent(),[7];case 11:return[2]}})})},r.prototype._verifyStickyConnection=function(t){var n=t.auth,i=t.connection;return t.address,jr(this,void 0,void 0,function(){var o,a;return Mr(this,function(s){switch(s.label){case 0:return o=Y8.object.equals(n,i.authToken),a=!o,i._sticky=o&&!i.supportsReAuth,a||i._sticky?[4,i.release()]:[3,2];case 1:throw s.sent(),(0,Tn.newError)("Driver is connected to a database that does not support user switch.");case 2:return[2]}})})},r.prototype.close=function(){return jr(this,void 0,void 0,function(){return Mr(this,function(t){switch(t.label){case 0:return[4,this._connectionPool.close()];case 1:return t.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(n){return n.close()}))];case 2:return t.sent(),[2]}})})},r._installIdleObserverOnConnection=function(t,n){t._setIdle(n)},r._removeIdleObserverOnConnection=function(t){t._unsetIdle()},r.prototype._handleSecurityError=function(t,n,i){var o=this._authenticationProvider.handleError({connection:i,code:t.code});return o&&(t.retriable=!0),t.code==="Neo.ClientError.Security.AuthorizationExpired"&&this._connectionPool.apply(n,function(a){a.authToken=null}),i&&i.close().catch(function(){}),t},r}(Tn.ConnectionProvider);fu.default=ex;var Ih={},tx=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zt=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Gt=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},rx=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ih,"__esModule",{value:!0});var nx=rx(fu),mp=il,_g=x,ol=_g.internal.constants,ix=ol.BOLT_PROTOCOL_V3,ox=ol.BOLT_PROTOCOL_V4_0,ax=ol.BOLT_PROTOCOL_V4_4,ux=ol.BOLT_PROTOCOL_V5_1,sx=_g.error.SERVICE_UNAVAILABLE,cx=function(e){tx(r,e);function r(t){var n=t.id,i=t.config,o=t.log,a=t.address,s=t.userAgent,c=t.boltAgent,u=t.authTokenManager,l=t.newPool,h=e.call(this,{id:n,config:i,log:o,userAgent:s,boltAgent:c,authTokenManager:u,newPool:l})||this;return h._address=a,h}return r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t;n.accessMode;var i=n.database;n.bookmarks;var o=n.auth,a=n.forceReAuth;return zt(this,void 0,void 0,function(){var s,c,u=this;return Gt(this,function(l){switch(l.label){case 0:return s=mp.ConnectionErrorHandler.create({errorCode:sx,handleSecurityError:function(h,v,b){return u._handleSecurityError(h,v,b,i)}}),[4,this._connectionPool.acquire({auth:o,forceReAuth:a},this._address)];case 1:return c=l.sent(),o?[4,this._verifyStickyConnection({auth:o,connection:c,address:this._address})]:[3,3];case 2:return l.sent(),[2,c];case 3:return[2,new mp.DelegateConnection(c,s)]}})})},r.prototype._handleSecurityError=function(t,n,i,o){return this._log.warn("Direct driver ".concat(this._id," will close connection to ").concat(n," for database '").concat(o,"' because of an error ").concat(t.code," '").concat(t.message,"'")),e.prototype._handleSecurityError.call(this,t,n,i)},r.prototype._hasProtocolVersion=function(t){return zt(this,void 0,void 0,function(){var n,i;return Gt(this,function(o){switch(o.label){case 0:return[4,this._createChannelConnection(this._address)];case 1:return n=o.sent(),i=n.protocol()?n.protocol().version:null,[4,n.close()];case 2:return o.sent(),i?[2,t(i)]:[2,!1]}})})},r.prototype.supportsMultiDb=function(){return zt(this,void 0,void 0,function(){return Gt(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=ox})];case 1:return[2,t.sent()]}})})},r.prototype.getNegotiatedProtocolVersion=function(){var t=this;return new Promise(function(n,i){t._hasProtocolVersion(n).catch(i)})},r.prototype.supportsTransactionConfig=function(){return zt(this,void 0,void 0,function(){return Gt(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=ix})];case 1:return[2,t.sent()]}})})},r.prototype.supportsUserImpersonation=function(){return zt(this,void 0,void 0,function(){return Gt(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=ax})];case 1:return[2,t.sent()]}})})},r.prototype.supportsSessionAuth=function(){return zt(this,void 0,void 0,function(){return Gt(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=ux})];case 1:return[2,t.sent()]}})})},r.prototype.verifyAuthentication=function(t){var n=t.auth;return zt(this,void 0,void 0,function(){var i=this;return Gt(this,function(o){return[2,this._verifyAuthentication({auth:n,getAddress:function(){return i._address}})]})})},r.prototype.verifyConnectivityAndGetServerInfo=function(){return zt(this,void 0,void 0,function(){return Gt(this,function(t){switch(t.label){case 0:return[4,this._verifyConnectivityAndGetServerVersion({address:this._address})];case 1:return[2,t.sent()]}})})},r}(nx.default);Ih.default=cx;var Ah={},Zr={},jh={},pi={},jf=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Mf=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(pi,"__esModule",{value:!0});pi.createValidRoutingTable=void 0;var it=x,vg=it.internal.constants,lx=vg.ACCESS_MODE_WRITE,fx=vg.ACCESS_MODE_READ,Nf=it.internal.serverAddress.ServerAddress,Mh=it.error.PROTOCOL_ERROR,dx=1,pg=function(){function e(r){var t=r===void 0?{}:r,n=t.database,i=t.routers,o=t.readers,a=t.writers,s=t.expirationTime,c=t.ttl;this.database=n||null,this.databaseName=n||"default database",this.routers=i||[],this.readers=o||[],this.writers=a||[],this.expirationTime=s||(0,it.int)(0),this.ttl=c}return e.fromRawRoutingTable=function(r,t,n){return bg(r,t,n)},e.prototype.forget=function(r){this.readers=ju(this.readers,r),this.writers=ju(this.writers,r)},e.prototype.forgetRouter=function(r){this.routers=ju(this.routers,r)},e.prototype.forgetWriter=function(r){this.writers=ju(this.writers,r)},e.prototype.isStaleFor=function(r){return this.expirationTime.lessThan(Date.now())||this.routers.length<dx||r===fx&&this.readers.length===0||r===lx&&this.writers.length===0},e.prototype.isExpiredFor=function(r){return this.expirationTime.add(r).lessThan(Date.now())},e.prototype.allServers=function(){return Mf(Mf(Mf([],jf(this.routers),!1),jf(this.readers),!1),jf(this.writers),!1)},e.prototype.toString=function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")},e}();pi.default=pg;function ju(e,r){return e.filter(function(t){return t.asKey()!==r.asKey()})}function bg(e,r,t){var n=t.ttl,i=_x(t,r),o=hx(t,r),a=o.routers,s=o.readers,c=o.writers;return gp(a,"routers",r),gp(s,"readers",r),new pg({database:e||t.db,routers:a,readers:s,writers:c,expirationTime:i,ttl:n})}pi.createValidRoutingTable=bg;function hx(e,r){try{var t=[],n=[],i=[];return e.servers.forEach(function(o){var a=o.role,s=o.addresses;a==="ROUTE"?t=$f(s).map(function(c){return Nf.fromUrl(c)}):a==="WRITE"?i=$f(s).map(function(c){return Nf.fromUrl(c)}):a==="READ"&&(n=$f(s).map(function(c){return Nf.fromUrl(c)}))}),{routers:t,readers:n,writers:i}}catch(o){throw(0,it.newError)("Unable to parse servers entry from router ".concat(r,` from addresses:
`).concat(it.json.stringify(e.servers),`
Error message: `).concat(o.message),Mh)}}function _x(e,r){try{var t=(0,it.int)(Date.now()),n=(0,it.int)(e.ttl).multiply(1e3).add(t);return n.lessThan(t)?it.Integer.MAX_VALUE:n}catch(i){throw(0,it.newError)("Unable to parse TTL entry from router ".concat(r,` from raw routing table:
`).concat(it.json.stringify(e),`
Error message: `).concat(i.message),Mh)}}function gp(e,r,t){if(e.length===0)throw(0,it.newError)("Received no "+r+" from router "+t,Mh)}function $f(e){if(!Array.isArray(e))throw new TypeError("Array expected but got: "+e);return Array.from(e)}var vx=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jh,"__esModule",{value:!0});var px=vx(pi),bx=function(){function e(r){this._routingContext=r}return e.prototype.lookupRoutingTableOnRouter=function(r,t,n,i){var o=this;return r._acquireConnection(function(a){return o._requestRawRoutingTable(a,r,t,n,i).then(function(s){return s.isNull?null:px.default.fromRawRoutingTable(t,n,s)})})},e.prototype._requestRawRoutingTable=function(r,t,n,i,o){var a=this;return new Promise(function(s,c){r.protocol().requestRoutingInformation({routingContext:a._routingContext,databaseName:n,impersonatedUser:o,sessionContext:{bookmarks:t._lastBookmarks,mode:t._mode,database:t._database,afterComplete:t._onComplete},onCompleted:s,onError:c})})},e}();jh.default=bx;var yg=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.RoutingTable=Zr.Rediscovery=void 0;var mg=yg(jh);Zr.Rediscovery=mg.default;var yx=yg(pi);Zr.RoutingTable=yx.default;Zr.default=mg.default;var mx=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),rs=f&&f.__assign||function(){return rs=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},rs.apply(this,arguments)},gx=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Ox=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Ex=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&gx(r,e,t);return Ox(r,e),r},Se=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(h){a(h)}}function c(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Pe=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Ed=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},Rt=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},gg=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ah,"__esModule",{value:!0});var We=x,kf=Ex(Zr),wx=un,Tx=gg(nl),Sx=gg(fu),Px=rr,Nr=il,Cx=Ot,Mu=We.error.SERVICE_UNAVAILABLE,Mi=We.error.SESSION_EXPIRED,Rx=We.internal.bookmarks.Bookmarks,bi=We.internal.constants,Op=bi.ACCESS_MODE_READ,Nu=bi.ACCESS_MODE_WRITE,Ix=bi.BOLT_PROTOCOL_V3,Ax=bi.BOLT_PROTOCOL_V4_0,jx=bi.BOLT_PROTOCOL_V4_4,Mx=bi.BOLT_PROTOCOL_V5_1,Nx="Neo.ClientError.Procedure.ProcedureNotFound",$x="Neo.ClientError.Database.DatabaseNotFound",kx="Neo.ClientError.Transaction.InvalidBookmark",Dx="Neo.ClientError.Transaction.InvalidBookmarkMixture",Lx="Neo.ClientError.Security.AuthorizationExpired",Ux="Neo.ClientError.Statement.ArgumentError",Fx="Neo.ClientError.Request.Invalid",Bx="Neo.ClientError.Statement.TypeError",Wx="N/A",xx="system",Ni=null,Vx=(0,We.int)(3e4),qx=function(e){mx(r,e);function r(t){var n=t.id,i=t.address,o=t.routingContext,a=t.hostNameResolver,s=t.config,c=t.log,u=t.userAgent,l=t.boltAgent,h=t.authTokenManager,v=t.routingTablePurgeDelay,b=t.newPool,m=e.call(this,{id:n,config:s,log:c,userAgent:u,boltAgent:l,authTokenManager:h,newPool:b},function(E){return Se(m,void 0,void 0,function(){var T,S;return Pe(this,function(R){switch(R.label){case 0:return T=Nr.createChannelConnection,S=[E,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,T.apply(void 0,S.concat([R.sent(),this._routingContext,this._channelSsrCallback.bind(this)]))]}})})})||this;return m._routingContext=rs(rs({},o),{address:i.toString()}),m._seedRouter=i,m._rediscovery=new kf.default(m._routingContext),m._loadBalancingStrategy=new Px.LeastConnectedLoadBalancingStrategy(m._connectionPool),m._hostNameResolver=a,m._dnsResolver=new wx.HostNameResolver,m._log=c,m._useSeedRouter=!0,m._routingTableRegistry=new Hx(v?(0,We.int)(v):Vx),m._refreshRoutingTable=Cx.functional.reuseOngoingRequest(m._refreshRoutingTable,m),m._withSSR=0,m._withoutSSR=0,m}return r.prototype._createConnectionErrorHandler=function(){return new Nr.ConnectionErrorHandler(Mi)},r.prototype._handleUnavailability=function(t,n,i){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(n," for database '").concat(i,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forget(n,i||Ni),t},r.prototype._handleSecurityError=function(t,n,i,o){return this._log.warn("Routing driver ".concat(this._id," will close connections to ").concat(n," for database '").concat(o,"' because of an error ").concat(t.code," '").concat(t.message,"'")),e.prototype._handleSecurityError.call(this,t,n,i,o)},r.prototype._handleWriteFailure=function(t,n,i){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(n," for database '").concat(i,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forgetWriter(n,i||Ni),(0,We.newError)("No longer possible to write to server at "+n,Mi,t)},r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t,i=n.accessMode,o=n.database,a=n.bookmarks,s=n.impersonatedUser,c=n.onDatabaseNameResolved,u=n.auth,l=n.homeDb;return Se(this,void 0,void 0,function(){var h,v,b,m,E,T=this;return Pe(this,function(S){switch(S.label){case 0:return h={database:o||Ni},v=new Nr.ConnectionErrorHandler(Mi,function(R,I){return T._handleUnavailability(R,I,h.database)},function(R,I){return T._handleWriteFailure(R,I,l??h.database)},function(R,I,A){return T._handleSecurityError(R,I,A,h.database)}),this.SSREnabled()&&l!==void 0&&o===""?(m=this._routingTableRegistry.get(l,function(){return new kf.RoutingTable({database:l})}),m&&!m.isStaleFor(i)?[4,this.getConnectionFromRoutingTable(m,u,i,v)]:[3,2]):[3,2];case 1:if(b=S.sent(),this.SSREnabled())return[2,b];b.release(),S.label=2;case 2:return[4,this._freshRoutingTable({accessMode:i,database:h.database,bookmarks:a,impersonatedUser:s,auth:u,onDatabaseNameResolved:function(R){h.database=h.database||R,c&&c(R)}})];case 3:return E=S.sent(),[2,this.getConnectionFromRoutingTable(E,u,i,v)]}})})},r.prototype.getConnectionFromRoutingTable=function(t,n,i,o){return Se(this,void 0,void 0,function(){var a,s,c,u,l;return Pe(this,function(h){switch(h.label){case 0:if(i===Op)s=this._loadBalancingStrategy.selectReader(t.readers),a="read";else if(i===Nu)s=this._loadBalancingStrategy.selectWriter(t.writers),a="write";else throw(0,We.newError)("Illegal mode "+i);if(!s)throw(0,We.newError)("Failed to obtain connection towards ".concat(a," server. Known routing table is: ").concat(t),Mi);h.label=1;case 1:return h.trys.push([1,5,,6]),[4,this._connectionPool.acquire({auth:n},s)];case 2:return c=h.sent(),n?[4,this._verifyStickyConnection({auth:n,connection:c,address:s})]:[3,4];case 3:return h.sent(),[2,c];case 4:return[2,new Nr.DelegateConnection(c,o)];case 5:throw u=h.sent(),l=o.handleAndTransformError(u,s),l;case 6:return[2]}})})},r.prototype._hasProtocolVersion=function(t){return Se(this,void 0,void 0,function(){var n,i,o,a,s,c;return Pe(this,function(u){switch(u.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:n=u.sent(),o=0,u.label=2;case 2:if(!(o<n.length))return[3,8];u.label=3;case 3:return u.trys.push([3,6,,7]),[4,this._createChannelConnection(n[o])];case 4:return a=u.sent(),s=a.protocol()?a.protocol().version:null,[4,a.close()];case 5:return u.sent(),s?[2,t(s)]:[2,!1];case 6:return c=u.sent(),i=c,[3,7];case 7:return o++,[3,2];case 8:if(i)throw i;return[2,!1]}})})},r.prototype.supportsMultiDb=function(){return Se(this,void 0,void 0,function(){return Pe(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=Ax})];case 1:return[2,t.sent()]}})})},r.prototype.supportsTransactionConfig=function(){return Se(this,void 0,void 0,function(){return Pe(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=Ix})];case 1:return[2,t.sent()]}})})},r.prototype.supportsUserImpersonation=function(){return Se(this,void 0,void 0,function(){return Pe(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=jx})];case 1:return[2,t.sent()]}})})},r.prototype.supportsSessionAuth=function(){return Se(this,void 0,void 0,function(){return Pe(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=Mx})];case 1:return[2,t.sent()]}})})},r.prototype.getNegotiatedProtocolVersion=function(){var t=this;return new Promise(function(n,i){t._hasProtocolVersion(n).catch(i)})},r.prototype.verifyAuthentication=function(t){var n=t.database,i=t.accessMode,o=t.auth;return Se(this,void 0,void 0,function(){var a=this;return Pe(this,function(s){return[2,this._verifyAuthentication({auth:o,getAddress:function(){return Se(a,void 0,void 0,function(){var c,u,l;return Pe(this,function(h){switch(h.label){case 0:return c={database:n||Ni},[4,this._freshRoutingTable({accessMode:i,database:c.database,auth:o,onDatabaseNameResolved:function(v){c.database=c.database||v}})];case 1:if(u=h.sent(),l=i===Nu?u.writers:u.readers,l.length===0)throw(0,We.newError)("No servers available for database '".concat(c.database,"' with access mode '").concat(i,"'"),Mu);return[2,l[0]]}})})}})]})})},r.prototype.verifyConnectivityAndGetServerInfo=function(t){var n=t.database,i=t.accessMode;return Se(this,void 0,void 0,function(){var o,a,s,c,u,l,h,v,b,m,E,T;return Pe(this,function(S){switch(S.label){case 0:return o={database:n||Ni},[4,this._freshRoutingTable({accessMode:i,database:o.database,onDatabaseNameResolved:function(R){o.database=o.database||R}})];case 1:a=S.sent(),s=i===Nu?a.writers:a.readers,c=(0,We.newError)("No servers available for database '".concat(o.database,"' with access mode '").concat(i,"'"),Mu),S.label=2;case 2:S.trys.push([2,9,10,11]),u=Ed(s),l=u.next(),S.label=3;case 3:if(l.done)return[3,8];h=l.value,S.label=4;case 4:return S.trys.push([4,6,,7]),[4,this._verifyConnectivityAndGetServerVersion({address:h})];case 5:return v=S.sent(),[2,v];case 6:return b=S.sent(),c=b,[3,7];case 7:return l=u.next(),[3,3];case 8:return[3,11];case 9:return m=S.sent(),E={error:m},[3,11];case 10:try{l&&!l.done&&(T=u.return)&&T.call(u)}finally{if(E)throw E.error}return[7];case 11:throw c}})})},r.prototype.forget=function(t,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(i){return i.forget(t)}}),this._connectionPool.purge(t).catch(function(){})},r.prototype.forgetWriter=function(t,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(i){return i.forgetWriter(t)}})},r.prototype._freshRoutingTable=function(t){var n=t===void 0?{}:t,i=n.accessMode,o=n.database,a=n.bookmarks,s=n.impersonatedUser,c=n.onDatabaseNameResolved,u=n.auth,l=this._routingTableRegistry.get(o,function(){return new kf.RoutingTable({database:o})});return l.isStaleFor(i)?(this._log.info('Routing table is stale for database: "'.concat(o,'" and access mode: "').concat(i,'": ').concat(l)),this._refreshRoutingTable(l,a,s,u).then(function(h){return c(h.database),h})):l},r.prototype._refreshRoutingTable=function(t,n,i,o){var a=t.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(a,t,n,i,o):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(a,t,n,i,o)},r.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(t,n,i,o,a){return Se(this,void 0,void 0,function(){var s,c,u,l,h,v,b;return Pe(this,function(m){switch(m.label){case 0:return s=[],[4,this._fetchRoutingTableUsingSeedRouter(s,this._seedRouter,n,i,o,a)];case 1:return c=Rt.apply(void 0,[m.sent(),2]),u=c[0],l=c[1],u?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(t,n,i,o,a)];case 3:h=Rt.apply(void 0,[m.sent(),2]),v=h[0],b=h[1],u=v,l=b||l,m.label=4;case 4:return[4,this._applyRoutingTableIfPossible(n,u,l)];case 5:return[2,m.sent()]}})})},r.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(t,n,i,o,a){return Se(this,void 0,void 0,function(){var s,c,u,l;return Pe(this,function(h){switch(h.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(t,n,i,o,a)];case 1:return s=Rt.apply(void 0,[h.sent(),2]),c=s[0],u=s[1],c?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(t,this._seedRouter,n,i,o,a)];case 2:l=Rt.apply(void 0,[h.sent(),2]),c=l[0],u=l[1],h.label=3;case 3:return[4,this._applyRoutingTableIfPossible(n,c,u)];case 4:return[2,h.sent()]}})})},r.prototype._fetchRoutingTableUsingKnownRouters=function(t,n,i,o,a){return Se(this,void 0,void 0,function(){var s,c,u,l;return Pe(this,function(h){switch(h.label){case 0:return[4,this._fetchRoutingTable(t,n,i,o,a)];case 1:return s=Rt.apply(void 0,[h.sent(),2]),c=s[0],u=s[1],c?[2,[c,null]]:(l=t.length-1,r._forgetRouter(n,t,l),[2,[null,u]])}})})},r.prototype._fetchRoutingTableUsingSeedRouter=function(t,n,i,o,a,s){return Se(this,void 0,void 0,function(){var c,u;return Pe(this,function(l){switch(l.label){case 0:return[4,this._resolveSeedRouter(n)];case 1:return c=l.sent(),u=c.filter(function(h){return t.indexOf(h)<0}),[4,this._fetchRoutingTable(u,i,o,a,s)];case 2:return[2,l.sent()]}})})},r.prototype._resolveSeedRouter=function(t){return Se(this,void 0,void 0,function(){var n,i,o=this;return Pe(this,function(a){switch(a.label){case 0:return[4,this._hostNameResolver.resolve(t)];case 1:return n=a.sent(),[4,Promise.all(n.map(function(s){return o._dnsResolver.resolve(s)}))];case 2:return i=a.sent(),[2,[].concat.apply([],i)]}})})},r.prototype._fetchRoutingTable=function(t,n,i,o,a){return Se(this,void 0,void 0,function(){var s=this;return Pe(this,function(c){return[2,t.reduce(function(u,l,h){return Se(s,void 0,void 0,function(){var v,b,m,E,T,S,R;return Pe(this,function(I){switch(I.label){case 0:return[4,u];case 1:return v=Rt.apply(void 0,[I.sent(),1]),b=v[0],b?[2,[b,null]]:(m=h-1,r._forgetRouter(n,t,m),[4,this._createSessionForRediscovery(l,i,o,a)]);case 2:if(E=Rt.apply(void 0,[I.sent(),2]),T=E[0],S=E[1],!T)return[3,8];I.label=3;case 3:return I.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(T,n.database,l,o)];case 4:return[2,[I.sent(),null]];case 5:return R=I.sent(),[2,this._handleRediscoveryError(R,l)];case 6:return T.close(),[7];case 7:return[3,9];case 8:return[2,[null,S]];case 9:return[2]}})})},Promise.resolve([null,null]))]})})},r.prototype._createSessionForRediscovery=function(t,n,i,o){return Se(this,void 0,void 0,function(){var a,s,c,u,l,h,v=this;return Pe(this,function(b){switch(b.label){case 0:return b.trys.push([0,4,,5]),[4,this._connectionPool.acquire({auth:o},t)];case 1:return a=b.sent(),o?[4,this._verifyStickyConnection({auth:o,connection:a,address:t})]:[3,3];case 2:b.sent(),b.label=3;case 3:return s=Nr.ConnectionErrorHandler.create({errorCode:Mi,handleSecurityError:function(m,E,T){return v._handleSecurityError(m,E,T)}}),c=a._sticky?new Nr.DelegateConnection(a):new Nr.DelegateConnection(a,s),u=new Tx.default(c),l=a.protocol().version,l<4?[2,[new We.Session({mode:Nu,bookmarks:Rx.empty(),connectionProvider:u}),null]]:[2,[new We.Session({mode:Op,database:xx,bookmarks:n,connectionProvider:u,impersonatedUser:i}),null]];case 4:return h=b.sent(),[2,this._handleRediscoveryError(h,t)];case 5:return[2]}})})},r.prototype._handleRediscoveryError=function(t,n){if(zx(t)||Gx(t))throw t;if(t.code===Nx)throw(0,We.newError)("Server at ".concat(n.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),Mu,t);return this._log.warn("unable to fetch routing table because of an error ".concat(t)),[null,t]},r.prototype._applyRoutingTableIfPossible=function(t,n,i){return Se(this,void 0,void 0,function(){return Pe(this,function(o){switch(o.label){case 0:if(!n)throw(0,We.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(t),Mu,i);return n.writers.length===0&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(n)];case 1:return o.sent(),[2,n]}})})},r.prototype._updateRoutingTable=function(t){return Se(this,void 0,void 0,function(){return Pe(this,function(n){switch(n.label){case 0:return[4,this._connectionPool.keepAll(t.allServers())];case 1:return n.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(t),this._log.info("Updated routing table ".concat(t)),[2]}})})},r._forgetRouter=function(t,n,i){var o=n[i];t&&o&&t.forgetRouter(o)},r.prototype._channelSsrCallback=function(t,n){if(n==="OPEN")t===!0?this._withSSR=this._withSSR+1:this._withoutSSR=this._withoutSSR+1;else if(n==="CLOSE")t===!0?this._withSSR=this._withSSR-1:this._withoutSSR=this._withoutSSR-1;else throw(0,We.newError)("Channel SSR Callback invoked with action other than 'OPEN' or 'CLOSE'")},r.prototype.SSREnabled=function(){return this._withSSR>0&&this._withoutSSR===0},r}(Sx.default);Ah.default=qx;var Hx=function(){function e(r){this._tables=new Map,this._routingTablePurgeDelay=r}return e.prototype.register=function(r){return this._tables.set(r.database,r),this},e.prototype.apply=function(r,t){var n=t===void 0?{}:t,i=n.applyWhenExists,o=n.applyWhenDontExists,a=o===void 0?function(){}:o;return this._tables.has(r)?i(this._tables.get(r)):typeof r=="string"||r===null?a():this._forEach(i),this},e.prototype.get=function(r,t){return this._tables.has(r)?this._tables.get(r):typeof t=="function"?t():t},e.prototype.removeExpired=function(){var r=this;return this._removeIf(function(t){return t.isExpiredFor(r._routingTablePurgeDelay)})},e.prototype._forEach=function(r){var t,n;try{for(var i=Ed(this._tables),o=i.next();!o.done;o=i.next()){var a=Rt(o.value,2),s=a[1];r(s)}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return this},e.prototype._remove=function(r){return this._tables.delete(r),this},e.prototype._removeIf=function(r){var t,n;try{for(var i=Ed(this._tables),o=i.next();!o.done;o=i.next()){var a=Rt(o.value,2),s=a[0],c=a[1];r(c)&&this._remove(s)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return this},e}();function zx(e){return[$x,kx,Dx,Ux,Fx,Bx,Wx].includes(e.code)}function Gx(e){return e.code.startsWith("Neo.ClientError.Security.")&&![Lx].includes(e.code)}(function(e){var r=f&&f.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingConnectionProvider=e.DirectConnectionProvider=e.PooledConnectionProvider=e.SingleConnectionProvider=void 0;var t=nl;Object.defineProperty(e,"SingleConnectionProvider",{enumerable:!0,get:function(){return r(t).default}});var n=fu;Object.defineProperty(e,"PooledConnectionProvider",{enumerable:!0,get:function(){return r(n).default}});var i=Ih;Object.defineProperty(e,"DirectConnectionProvider",{enumerable:!0,get:function(){return r(i).default}});var o=Ah;Object.defineProperty(e,"RoutingConnectionProvider",{enumerable:!0,get:function(){return r(o).default}})})(cg);(function(e){var r=f&&f.__createBinding||(Object.create?function(o,a,s,c){c===void 0&&(c=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(o,c,u)}:function(o,a,s,c){c===void 0&&(c=s),o[c]=a[s]}),t=f&&f.__setModuleDefault||(Object.create?function(o,a){Object.defineProperty(o,"default",{enumerable:!0,value:a})}:function(o,a){o.default=a}),n=f&&f.__importStar||function(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var s in o)s!=="default"&&Object.prototype.hasOwnProperty.call(o,s)&&r(a,o,s);return t(a,o),a},i=f&&f.__exportStar||function(o,a){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&r(a,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.packstream=e.channel=e.buf=e.bolt=e.loadBalancing=void 0,e.loadBalancing=n(rr),e.bolt=n(Zd),e.buf=n(sn),e.channel=n(un),e.packstream=n(qe),i(cg,e)})($y);(function(e){var r=f&&f.__awaiter||function(Y,he,V,ee){function H(L){return L instanceof V?L:new V(function(W){W(L)})}return new(V||(V=Promise))(function(L,W){function J(Oe){try{z(ee.next(Oe))}catch(ce){W(ce)}}function me(Oe){try{z(ee.throw(Oe))}catch(ce){W(ce)}}function z(Oe){Oe.done?L(Oe.value):H(Oe.value).then(J,me)}z((ee=ee.apply(Y,he||[])).next())})},t=f&&f.__generator||function(Y,he){var V={label:0,sent:function(){if(L[0]&1)throw L[1];return L[1]},trys:[],ops:[]},ee,H,L,W;return W={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(W[Symbol.iterator]=function(){return this}),W;function J(z){return function(Oe){return me([z,Oe])}}function me(z){if(ee)throw new TypeError("Generator is already executing.");for(;W&&(W=0,z[0]&&(V=0)),V;)try{if(ee=1,H&&(L=z[0]&2?H.return:z[0]?H.throw||((L=H.return)&&L.call(H),0):H.next)&&!(L=L.call(H,z[1])).done)return L;switch(H=0,L&&(z=[z[0]&2,L.value]),z[0]){case 0:case 1:L=z;break;case 4:return V.label++,{value:z[1],done:!1};case 5:V.label++,H=z[1],z=[0];continue;case 7:z=V.ops.pop(),V.trys.pop();continue;default:if(L=V.trys,!(L=L.length>0&&L[L.length-1])&&(z[0]===6||z[0]===2)){V=0;continue}if(z[0]===3&&(!L||z[1]>L[0]&&z[1]<L[3])){V.label=z[1];break}if(z[0]===6&&V.label<L[1]){V.label=L[1],L=z;break}if(L&&V.label<L[2]){V.label=L[2],V.ops.push(z);break}L[2]&&V.ops.pop(),V.trys.pop();continue}z=he.call(Y,V)}catch(Oe){z=[6,Oe],H=0}finally{ee=L=0}if(z[0]&5)throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}},n=f&&f.__importDefault||function(Y){return Y&&Y.__esModule?Y:{default:Y}};Object.defineProperty(e,"__esModule",{value:!0}),e.UnboundRelationship=e.Relationship=e.Node=e.Record=e.ServerInfo=e.GqlStatusObject=e.Notification=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ResultSummary=e.RxResult=e.RxManagedTransaction=e.RxTransaction=e.RxSession=e.EagerResult=e.Result=e.ManagedTransaction=e.Transaction=e.Session=e.Driver=e.temporal=e.spatial=e.graph=e.error=e.routing=e.session=e.types=e.logging=e.auth=e.isRetryableError=e.Neo4jError=e.integer=e.isUnboundRelationship=e.isRelationship=e.isPathSegment=e.isPath=e.isNode=e.isDateTime=e.isLocalDateTime=e.isDate=e.isTime=e.isLocalTime=e.isDuration=e.isPoint=e.isInt=e.int=e.hasReachableServer=e.driver=e.authTokenManagers=void 0,e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.bookmarkManager=e.DateTime=e.LocalDateTime=e.Date=e.Time=e.LocalTime=e.Duration=e.Integer=e.Point=e.PathSegment=e.Path=void 0;var i=jt;Object.defineProperty(e,"Driver",{enumerable:!0,get:function(){return i.Driver}});var o=n(Gd),a=x;Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return a.authTokenManagers}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return a.Neo4jError}}),Object.defineProperty(e,"isRetryableError",{enumerable:!0,get:function(){return a.isRetryableError}}),Object.defineProperty(e,"error",{enumerable:!0,get:function(){return a.error}}),Object.defineProperty(e,"Integer",{enumerable:!0,get:function(){return a.Integer}}),Object.defineProperty(e,"int",{enumerable:!0,get:function(){return a.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return a.isInt}}),Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return a.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return a.Point}}),Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return a.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return a.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return a.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return a.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return a.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return a.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return a.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return a.isLocalTime}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return a.isNode}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return a.isPath}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return a.isPathSegment}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return a.isRelationship}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return a.isTime}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return a.isUnboundRelationship}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return a.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return a.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return a.Time}}),Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return a.Node}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return a.Path}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return a.PathSegment}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return a.Relationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return a.UnboundRelationship}}),Object.defineProperty(e,"Record",{enumerable:!0,get:function(){return a.Record}}),Object.defineProperty(e,"ResultSummary",{enumerable:!0,get:function(){return a.ResultSummary}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return a.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return a.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return a.QueryStatistics}}),Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return a.Notification}}),Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return a.GqlStatusObject}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return a.ServerInfo}}),Object.defineProperty(e,"Result",{enumerable:!0,get:function(){return a.Result}}),Object.defineProperty(e,"EagerResult",{enumerable:!0,get:function(){return a.EagerResult}}),Object.defineProperty(e,"auth",{enumerable:!0,get:function(){return a.auth}}),Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return a.Session}}),Object.defineProperty(e,"Transaction",{enumerable:!0,get:function(){return a.Transaction}}),Object.defineProperty(e,"ManagedTransaction",{enumerable:!0,get:function(){return a.ManagedTransaction}}),Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return a.bookmarkManager}}),Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return a.routing}}),Object.defineProperty(e,"resultTransformers",{enumerable:!0,get:function(){return a.resultTransformers}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return a.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return a.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return a.notificationSeverityLevel}}),Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return a.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return a.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return a.notificationFilterMinimumSeverityLevel}}),Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return a.clientCertificateProviders}});var s=$y,c=n(bs);e.RxSession=c.default;var u=n(iu);e.RxTransaction=u.default;var l=n(Js);e.RxManagedTransaction=l.default;var h=n(di);e.RxResult=h.default;var v=a.internal.util,b=v.ENCRYPTION_ON,m=v.assertString,E=v.isEmptyObjectOrNull,T=a.internal.serverAddress.ServerAddress,S=a.internal.urlUtil,R="neo4j-javascript/"+o.default;function I(Y){return typeof Y=="object"&&Y!=null&&"getToken"in Y&&"handleSecurityException"in Y&&typeof Y.getToken=="function"&&typeof Y.handleSecurityException=="function"}function A(Y){if(I(Y))return Y;var he=Y;return he=he||{},he.scheme=he.scheme||"none",(0,a.staticAuthTokenManager)({authToken:he})}function j(Y,he,V){V===void 0&&(V={}),m(Y,"Bolt URL");var ee=S.parseDatabaseUrl(Y),H=!1,L=!1,W;switch(ee.scheme){case"bolt":break;case"bolt+s":L=!0,W="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":L=!0,W="TRUST_ALL_CERTIFICATES";break;case"neo4j":H=!0;break;case"neo4j+s":L=!0,W="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",H=!0;break;case"neo4j+ssc":L=!0,W="TRUST_ALL_CERTIFICATES",H=!0;break;default:throw new Error("Unknown scheme: ".concat(ee.scheme))}if(L){if("encrypted"in V||"trust"in V)throw new Error("Encryption/trust can only be configured either through URL or config, not both");V.encrypted=b,V.trust=W,V.clientCertificate=(0,a.resolveCertificateProvider)(V.clientCertificate)}var J=A(he);V.userAgent=V.userAgent||R,V.boltAgent=a.internal.boltAgent.fromVersion(o.default);var me=T.fromUrl(ee.hostAndPort),z={address:me,typename:H?"Routing":"Direct",routing:H};return new i.Driver(z,V,Oe());function Oe(){if(H)return function(ce,Be,O,C){return new s.RoutingConnectionProvider({id:ce,config:Be,log:O,hostNameResolver:C,authTokenManager:J,address:me,userAgent:Be.userAgent,boltAgent:Be.boltAgent,routingContext:ee.query})};if(!E(ee.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(Y,"'"));return function(ce,Be,O){return new s.DirectConnectionProvider({id:ce,config:Be,log:O,authTokenManager:J,address:me,userAgent:Be.userAgent,boltAgent:Be.boltAgent})}}}e.driver=j;function k(Y,he){return r(this,void 0,void 0,function(){var V;return t(this,function(ee){switch(ee.label){case 0:V=j(Y,{scheme:"none",principal:"",credentials:""},he),ee.label=1;case 1:return ee.trys.push([1,,3,5]),[4,V.getNegotiatedProtocolVersion()];case 2:return ee.sent(),[2,!0];case 3:return[4,V.close()];case 4:return ee.sent(),[7];case 5:return[2]}})})}e.hasReachableServer=k;var M={console:function(Y){return{level:Y,logger:function(he,V){return console.log("".concat(f.Date.now()," ").concat(he.toUpperCase()," ").concat(V))}}}};e.logging=M;var q={Node:a.Node,Relationship:a.Relationship,UnboundRelationship:a.UnboundRelationship,PathSegment:a.PathSegment,Path:a.Path,Result:a.Result,EagerResult:a.EagerResult,ResultSummary:a.ResultSummary,Record:a.Record,Point:a.Point,Date:a.Date,DateTime:a.DateTime,Duration:a.Duration,LocalDateTime:a.LocalDateTime,LocalTime:a.LocalTime,Time:a.Time,Integer:a.Integer};e.types=q;var ne={READ:i.READ,WRITE:i.WRITE};e.session=ne;var ie={toNumber:a.toNumber,toString:a.toString,inSafeRange:a.inSafeRange};e.integer=ie;var _e={isPoint:a.isPoint};e.spatial=_e;var X={isDuration:a.isDuration,isLocalTime:a.isLocalTime,isTime:a.isTime,isDate:a.isDate,isLocalDateTime:a.isLocalDateTime,isDateTime:a.isDateTime};e.temporal=X;var de={isNode:a.isNode,isPath:a.isPath,isPathSegment:a.isPathSegment,isRelationship:a.isRelationship,isUnboundRelationship:a.isUnboundRelationship};e.graph=de;var ze={authTokenManagers:a.authTokenManagers,driver:j,hasReachableServer:k,int:a.int,isInt:a.isInt,isPoint:a.isPoint,isDuration:a.isDuration,isLocalTime:a.isLocalTime,isTime:a.isTime,isDate:a.isDate,isLocalDateTime:a.isLocalDateTime,isDateTime:a.isDateTime,isNode:a.isNode,isPath:a.isPath,isPathSegment:a.isPathSegment,isRelationship:a.isRelationship,isUnboundRelationship:a.isUnboundRelationship,integer:ie,Neo4jError:a.Neo4jError,isRetryableError:a.isRetryableError,auth:a.auth,logging:M,types:q,session:ne,routing:a.routing,error:a.error,graph:de,spatial:_e,temporal:X,Driver:i.Driver,Session:a.Session,Transaction:a.Transaction,ManagedTransaction:a.ManagedTransaction,Result:a.Result,EagerResult:a.EagerResult,RxSession:c.default,RxTransaction:u.default,RxManagedTransaction:l.default,RxResult:h.default,ResultSummary:a.ResultSummary,Plan:a.Plan,ProfiledPlan:a.ProfiledPlan,QueryStatistics:a.QueryStatistics,Notification:a.Notification,GqlStatusObject:a.GqlStatusObject,ServerInfo:a.ServerInfo,Record:a.Record,Node:a.Node,Relationship:a.Relationship,UnboundRelationship:a.UnboundRelationship,Path:a.Path,PathSegment:a.PathSegment,Point:a.Point,Integer:a.Integer,Duration:a.Duration,LocalTime:a.LocalTime,Time:a.Time,Date:a.Date,LocalDateTime:a.LocalDateTime,DateTime:a.DateTime,bookmarkManager:a.bookmarkManager,resultTransformers:a.resultTransformers,notificationCategory:a.notificationCategory,notificationSeverityLevel:a.notificationSeverityLevel,notificationFilterDisabledCategory:a.notificationFilterDisabledCategory,notificationFilterMinimumSeverityLevel:a.notificationFilterMinimumSeverityLevel,clientCertificateProviders:a.clientCertificateProviders};e.default=ze})(Sp);const Ep=wp(Sp),Xx=()=>Ep.driver(Hl.neo4jURL,Ep.auth.basic(Hl.neo4jUser,Hl.neo4jPass));export{Zx as T,Xx as g};

import{b$ as p,bZ as T,bG as g,bz as d,ca as c,bg as f,c0 as u}from"./DgjbO070.js";import{g as x,v as D}from"./DRDJEAPC.js";const P=`Ethereum Signed Message:
`;function $(n){const t=typeof n=="string"?p(n):typeof n.raw=="string"?n.raw:T(n.raw),e=p(`${P}${g(t)}`);return d([e,t])}function M(n,t){return c($(n),t)}function S(n){const{domain:t={},message:e,primaryType:r}=n,a={EIP712Domain:x({domain:t}),...n.types};D({domain:t,message:e,primaryType:r,types:a});const s=["0x1901"];return t&&s.push(l({domain:t,types:a})),r!=="EIP712Domain"&&s.push(y({data:e,primaryType:r,types:a})),c(d(s))}function l({domain:n,types:t}){return y({data:n,primaryType:"EIP712Domain",types:t})}function y({data:n,primaryType:t,types:e}){const r=h({data:n,primaryType:t,types:e});return c(r)}function h({data:n,primaryType:t,types:e}){const r=[{type:"bytes32"}],a=[I({primaryType:t,types:e})];for(const s of e[t]){const[o,i]=b({types:e,name:s.name,type:s.type,value:n[s.name]});r.push(o),a.push(i)}return f(r,a)}function I({primaryType:n,types:t}){const e=u(w({primaryType:n,types:t}));return c(e)}function w({primaryType:n,types:t}){let e="";const r=m({primaryType:n,types:t});r.delete(n);const a=[n,...Array.from(r).sort()];for(const s of a)e+=`${s}(${t[s].map(({name:o,type:i})=>`${i} ${o}`).join(",")})`;return e}function m({primaryType:n,types:t},e=new Set){const a=n.match(/^\w*/u)?.[0];if(e.has(a)||t[a]===void 0)return e;e.add(a);for(const s of t[a])m({primaryType:s.type,types:t},e);return e}function b({types:n,name:t,type:e,value:r}){if(n[e]!==void 0)return[{type:"bytes32"},c(h({data:r,primaryType:e,types:n}))];if(e==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},c(r)];if(e==="string")return[{type:"bytes32"},c(u(r))];if(e.lastIndexOf("]")===e.length-1){const a=e.slice(0,e.lastIndexOf("[")),s=r.map(o=>b({name:t,type:a,types:n,value:o}));return[{type:"bytes32"},c(f(s.map(([o])=>o),s.map(([,o])=>o)))]}return[{type:e},r]}export{l as a,y as b,S as c,M as h,P as p,$ as t};

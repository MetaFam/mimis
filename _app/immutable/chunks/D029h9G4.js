var UP=Object.defineProperty;var Jy=e=>{throw TypeError(e)};var FP=(e,r,t)=>r in e?UP(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var g=(e,r,t)=>FP(e,typeof r!="symbol"?r+"":r,t),eb=(e,r,t)=>r.has(e)||Jy("Cannot "+t);var _e=(e,r,t)=>(eb(e,r,"read from private field"),t?t.call(e):r.get(e)),Zs=(e,r,t)=>r.has(e)?Jy("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,t),Qs=(e,r,t,n)=>(eb(e,r,"write to private field"),n?n.call(e,t):r.set(e,t),t);import{g as f,h as a_,u as ua,o as BP,m as xP}from"./C_jHh3BX.js";import{b as G0,a as VP}from"./DErBbmgI.js";import{F as u_,_ as WP,a as K0,w as zP,n as HP,p as qP,m as tb,b as Ji,e as ur,d as Gp,f as Kp,g as Y0,h as Gt,i as we,j as GP,s as KP,c as YP}from"./NdkHeN1Q.js";import{s as Pc}from"./CyorBdjw.js";var Yp={},dr={},H={},ue={},Ft={},hr={};Object.defineProperty(hr,"__esModule",{value:!0});hr.getBrokenObjectReason=hr.isBrokenObject=hr.createBrokenObject=void 0;var Z0="__isBrokenObject__",Q0="__reason__";function ZP(e,r){r===void 0&&(r={});var t=function(){throw e};return new Proxy(r,{get:function(n,o){if(o===Z0)return!0;if(o===Q0)return e;if(o==="toJSON")return;t()},set:t,apply:t,construct:t,defineProperty:t,deleteProperty:t,getOwnPropertyDescriptor:t,getPrototypeOf:t,has:t,isExtensible:t,ownKeys:t,preventExtensions:t,setPrototypeOf:t})}hr.createBrokenObject=ZP;function QP(e){return e!==null&&typeof e=="object"&&e[Z0]===!0}hr.isBrokenObject=QP;function XP(e){return e[Q0]}hr.getBrokenObjectReason=XP;Object.defineProperty(Ft,"__esModule",{value:!0});Ft.stringify=void 0;var rb=hr;function JP(e,r){return JSON.stringify(e,function(t,n){return(0,rb.isBrokenObject)(n)?{__isBrokenObject__:!0,__reason__:(0,rb.getBrokenObjectReason)(n)}:typeof n=="bigint"?"".concat(n,"n"):(r==null?void 0:r.sortedElements)===!0&&typeof n=="object"&&!Array.isArray(n)?Object.keys(n).sort().reduce(function(o,i){return o[i]=n[i],o},{}):(r==null?void 0:r.useCustomToString)===!0&&typeof n=="object"&&!Array.isArray(n)&&typeof n.toString=="function"&&n.toString!==Object.prototype.toString?n==null?void 0:n.toString():n})}Ft.stringify=JP;var s_={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.rawPolyfilledDiagnosticRecord=void 0,e.rawPolyfilledDiagnosticRecord={OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"},Object.freeze(e.rawPolyfilledDiagnosticRecord)})(s_);var X0=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),eC=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),tC=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),rC=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&eC(r,e,t);return tC(r,e),r};Object.defineProperty(ue,"__esModule",{value:!0});ue.PROTOCOL_ERROR=ue.SESSION_EXPIRED=ue.SERVICE_UNAVAILABLE=ue.GQLError=ue.Neo4jError=ue.isRetriableError=ue.newGQLError=ue.newError=void 0;var nC=rC(Ft),J0=s_,ew={DATABASE_ERROR:"DATABASE_ERROR",CLIENT_ERROR:"CLIENT_ERROR",TRANSIENT_ERROR:"TRANSIENT_ERROR",UNKNOWN:"UNKNOWN"};Object.freeze(ew);var oC=Object.values(ew),tw="ServiceUnavailable";ue.SERVICE_UNAVAILABLE=tw;var rw="SessionExpired";ue.SESSION_EXPIRED=rw;var iC="ProtocolError";ue.PROTOCOL_ERROR=iC;var aC="N/A",c_=function(e){X0(r,e);function r(t,n,o,i,a){var s=this,c;return s=e.call(this,t,a!=null?{cause:a}:void 0)||this,s.constructor=r,s.__proto__=r.prototype,s.cause=a??void 0,s.gqlStatus=n,s.gqlStatusDescription=o,s.diagnosticRecord=i,s.classification=hC(s.diagnosticRecord),s.rawClassification=(c=i==null?void 0:i._classification)!==null&&c!==void 0?c:void 0,s.name="GQLError",s}return Object.defineProperty(r.prototype,"diagnosticRecordAsJsonString",{get:function(){return nC.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),r}(Error);ue.GQLError=c_;var l_=function(e){X0(r,e);function r(t,n,o,i,a,s){var c=e.call(this,t,o,i,a,s)||this;return c.constructor=r,c.__proto__=r.prototype,c.code=n,c.name="Neo4jError",c.retriable=lC(n),c}return r.isRetriable=function(t){return t!=null&&t instanceof r&&t.retriable},r}(c_);ue.Neo4jError=l_;function uC(e,r,t,n,o,i){return new l_(e,r??aC,n??"50N42",o??"error: general processing exception - unexpected error. "+e,i??J0.rawPolyfilledDiagnosticRecord,t)}ue.newError=uC;function sC(e,r,t,n,o){return new c_(e,t??"50N42",n??"error: general processing exception - unexpected error. "+e,o??J0.rawPolyfilledDiagnosticRecord,r)}ue.newGQLError=sC;var cC=l_.isRetriable;ue.isRetriableError=cC;function lC(e){return e===tw||e===rw||dC(e)||fC(e)}function fC(e){return(e==null?void 0:e.includes("TransientError"))===!0}function dC(e){return e==="Neo.ClientError.Security.AuthorizationExpired"}function hC(e){return e===void 0||e._classification===void 0?"UNKNOWN":oC.includes(e._classification)?e==null?void 0:e._classification:"UNKNOWN"}var xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.toString=xe.toNumber=xe.inSafeRange=xe.isInt=xe.int=void 0;var Li=ue,nb=new Map,Kr=function(){function e(r,t){this.low=r??0,this.high=t??0}return e.prototype.inSafeRange=function(){return this.greaterThanOrEqual(e.MIN_SAFE_VALUE)&&this.lessThanOrEqual(e.MAX_SAFE_VALUE)},e.prototype.toInt=function(){return this.low},e.prototype.toNumber=function(){return this.high*Tn+(this.low>>>0)},e.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(Tn)+BigInt(this.low>>>0);var r=this.negate();return BigInt(-1)*(BigInt(r.high>>>0)*BigInt(Tn)+BigInt(r.low>>>0))},e.prototype.toNumberOrInfinity=function(){return this.lessThan(e.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(e.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},e.prototype.toString=function(r){if(r=r??10,r<2||r>36)throw RangeError("radix out of range: "+r.toString());if(this.isZero())return"0";var t;if(this.isNegative())if(this.equals(e.MIN_VALUE)){var n=e.fromNumber(r),o=this.div(n);return t=o.multiply(n).subtract(this),o.toString(r)+t.toInt().toString(r)}else return"-"+this.negate().toString(r);var i=e.fromNumber(Math.pow(r,6));t=this;for(var a="";;){var s=t.div(i),c=t.subtract(s.multiply(i)).toInt()>>>0,u=c.toString(r);if(t=s,t.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},e.prototype.valueOf=function(){return this.toBigInt()},e.prototype.getHighBits=function(){return this.high},e.prototype.getLowBits=function(){return this.low},e.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(e.MIN_VALUE)?64:this.negate().getNumBitsAbs();var r=this.high!==0?this.high:this.low,t=0;for(t=31;t>0&&!(r&1<<t);t--);return this.high!==0?t+33:t+1},e.prototype.isZero=function(){return this.high===0&&this.low===0},e.prototype.isNegative=function(){return this.high<0},e.prototype.isPositive=function(){return this.high>=0},e.prototype.isOdd=function(){return(this.low&1)===1},e.prototype.isEven=function(){return(this.low&1)===0},e.prototype.equals=function(r){var t=e.fromValue(r);return this.high===t.high&&this.low===t.low},e.prototype.notEquals=function(r){return!this.equals(r)},e.prototype.lessThan=function(r){return this.compare(r)<0},e.prototype.lessThanOrEqual=function(r){return this.compare(r)<=0},e.prototype.greaterThan=function(r){return this.compare(r)>0},e.prototype.greaterThanOrEqual=function(r){return this.compare(r)>=0},e.prototype.compare=function(r){var t=e.fromValue(r);if(this.equals(t))return 0;var n=this.isNegative(),o=t.isNegative();return n&&!o?-1:!n&&o?1:this.subtract(t).isNegative()?-1:1},e.prototype.negate=function(){return this.equals(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.add=function(r){var t=e.fromValue(r),n=this.high>>>16,o=this.high&65535,i=this.low>>>16,a=this.low&65535,s=t.high>>>16,c=t.high&65535,u=t.low>>>16,l=t.low&65535,d=0,h=0,p=0,v=0;return v+=a+l,p+=v>>>16,v&=65535,p+=i+u,h+=p>>>16,p&=65535,h+=o+c,d+=h>>>16,h&=65535,d+=n+s,d&=65535,e.fromBits(p<<16|v,d<<16|h)},e.prototype.subtract=function(r){var t=e.fromValue(r);return this.add(t.negate())},e.prototype.multiply=function(r){if(this.isZero())return e.ZERO;var t=e.fromValue(r);if(t.isZero())return e.ZERO;if(this.equals(e.MIN_VALUE))return t.isOdd()?e.MIN_VALUE:e.ZERO;if(t.equals(e.MIN_VALUE))return this.isOdd()?e.MIN_VALUE:e.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(ab)&&t.lessThan(ab))return e.fromNumber(this.toNumber()*t.toNumber());var n=this.high>>>16,o=this.high&65535,i=this.low>>>16,a=this.low&65535,s=t.high>>>16,c=t.high&65535,u=t.low>>>16,l=t.low&65535,d=0,h=0,p=0,v=0;return v+=a*l,p+=v>>>16,v&=65535,p+=i*l,h+=p>>>16,p&=65535,p+=a*u,h+=p>>>16,p&=65535,h+=o*l,d+=h>>>16,h&=65535,h+=i*u,d+=h>>>16,h&=65535,h+=a*c,d+=h>>>16,h&=65535,d+=n*l+o*u+i*c+a*s,d&=65535,e.fromBits(p<<16|v,d<<16|h)},e.prototype.div=function(r){var t=e.fromValue(r);if(t.isZero())throw(0,Li.newError)("division by zero");if(this.isZero())return e.ZERO;var n,o,i;if(this.equals(e.MIN_VALUE)){if(t.equals(e.ONE)||t.equals(e.NEG_ONE))return e.MIN_VALUE;if(t.equals(e.MIN_VALUE))return e.ONE;var a=this.shiftRight(1);return n=a.div(t).shiftLeft(1),n.equals(e.ZERO)?t.isNegative()?e.ONE:e.NEG_ONE:(o=this.subtract(t.multiply(n)),i=n.add(o.div(t)),i)}else if(t.equals(e.MIN_VALUE))return e.ZERO;if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();for(i=e.ZERO,o=this;o.greaterThanOrEqual(t);){n=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),c=s<=48?1:Math.pow(2,s-48),u=e.fromNumber(n),l=u.multiply(t);l.isNegative()||l.greaterThan(o);)n-=c,u=e.fromNumber(n),l=u.multiply(t);u.isZero()&&(u=e.ONE),i=i.add(u),o=o.subtract(l)}return i},e.prototype.modulo=function(r){var t=e.fromValue(r);return this.subtract(this.div(t).multiply(t))},e.prototype.not=function(){return e.fromBits(~this.low,~this.high)},e.prototype.and=function(r){var t=e.fromValue(r);return e.fromBits(this.low&t.low,this.high&t.high)},e.prototype.or=function(r){var t=e.fromValue(r);return e.fromBits(this.low|t.low,this.high|t.high)},e.prototype.xor=function(r){var t=e.fromValue(r);return e.fromBits(this.low^t.low,this.high^t.high)},e.prototype.shiftLeft=function(r){var t=e.toNumber(r);return(t&=63)===0?e.ZERO:t<32?e.fromBits(this.low<<t,this.high<<t|this.low>>>32-t):e.fromBits(0,this.low<<t-32)},e.prototype.shiftRight=function(r){var t=e.toNumber(r),n=e.toNumber(r);return(t&=63)===0?e.ZERO:n<32?e.fromBits(this.low>>>t|this.high<<32-t,this.high>>t):e.fromBits(this.high>>t-32,this.high>=0?0:-1)},e.isInteger=function(r){return(r==null?void 0:r.__isInteger__)===!0},e.fromInt=function(r){var t;if(r=r|0,r>=-128&&r<128&&(t=nb.get(r),t!=null))return t;var n=new e(r,r<0?-1:0);return r>=-128&&r<128&&nb.set(r,n),n},e.fromBits=function(r,t){return new e(r,t)},e.fromNumber=function(r){return isNaN(r)||!isFinite(r)?e.ZERO:r<=-ib?e.MIN_VALUE:r+1>=ib?e.MAX_VALUE:r<0?e.fromNumber(-r).negate():new e(r%Tn|0,r/Tn|0)},e.fromString=function(r,t,n){var o=n===void 0?{}:n,i=o.strictStringValidation;if(r.length===0)throw(0,Li.newError)("number format error: empty string");if(r==="NaN"||r==="Infinity"||r==="+Infinity"||r==="-Infinity")return e.ZERO;if(t=t??10,t<2||t>36)throw(0,Li.newError)("radix out of range: "+t.toString());var a;if((a=r.indexOf("-"))>0)throw(0,Li.newError)('number format error: interior "-" character: '+r);if(a===0)return e.fromString(r.substring(1),t).negate();for(var s=e.fromNumber(Math.pow(t,8)),c=e.ZERO,u=0;u<r.length;u+=8){var l=Math.min(8,r.length-u),d=r.substring(u,u+l),h=parseInt(d,t);if(i===!0&&!vC(d,h,t))throw(0,Li.newError)('number format error: "'.concat(d,'" is NaN in radix ').concat(t,": ").concat(r));if(l<8){var p=e.fromNumber(Math.pow(t,l));c=c.multiply(p).add(e.fromNumber(h))}else c=c.multiply(s),c=c.add(e.fromNumber(h))}return c},e.fromValue=function(r,t){return t===void 0&&(t={}),r instanceof e?r:typeof r=="number"?(t.ceilFloat===!0&&(r=Math.ceil(r)),e.fromNumber(r)):typeof r=="string"?e.fromString(r,void 0,t):typeof r=="bigint"?e.fromString(r.toString()):new e(r.low,r.high)},e.toNumber=function(r){switch(typeof r){case"number":return r;case"bigint":return Number(r);default:return e.fromValue(r).toNumber()}},e.toString=function(r,t){return e.fromValue(r).toString(t)},e.inSafeRange=function(r){return e.fromValue(r).inSafeRange()},e.ZERO=e.fromInt(0),e.ONE=e.fromInt(1),e.NEG_ONE=e.fromInt(-1),e.MAX_VALUE=e.fromBits(-1,2147483647),e.MIN_VALUE=e.fromBits(0,-2147483648),e.MIN_SAFE_VALUE=e.fromBits(1,-2097152),e.MAX_SAFE_VALUE=e.fromBits(-1,2097151),e.__isInteger__=!0,e}();function pC(e,r,t){var n=e.toString(r),o=Math.max(t-n.length,0),i="0".repeat(o);return"".concat(i).concat(n)}function vC(e,r,t){return!Number.isNaN(e)&&!Number.isNaN(r)&&pC(r,t,e.length)===e.toLowerCase()}Object.defineProperty(Kr.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var ob=65536,_C=1<<24,Tn=ob*ob,yC=Tn*Tn,ib=yC/2,ab=Kr.fromInt(_C),bC=Kr.fromValue;xe.int=bC;var mC=Kr.isInteger;xe.isInt=mC;var gC=Kr.inSafeRange;xe.inSafeRange=gC;var wC=Kr.toNumber;xe.toNumber=wC;var OC=Kr.toString;xe.toString=OC;xe.default=Kr;var he={},f_={},ee={},EC=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),SC=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),TC=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&EC(r,e,t);return SC(r,e),r},PC=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ee,"__esModule",{value:!0});ee.ENCRYPTION_OFF=ee.ENCRYPTION_ON=ee.equals=ee.validateQueryAndParameters=ee.toNumber=ee.assertValidDate=ee.assertNumberOrInteger=ee.assertNumber=ee.assertString=ee.assertObject=ee.isString=ee.isObject=ee.isEmptyObjectOrNull=void 0;var Zp=TC(xe),kn=Ft,CC="ENCRYPTION_ON";ee.ENCRYPTION_ON=CC;var AC="ENCRYPTION_OFF";ee.ENCRYPTION_OFF=AC;function IC(e){if(e===null)return!0;if(!wl(e))return!1;for(var r in e)if(e[r]!==void 0)return!1;return!0}ee.isEmptyObjectOrNull=IC;function wl(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}ee.isObject=wl;function RC(e,r,t){var n,o,i="",a=r??{},s=(n=t==null?void 0:t.skipAsserts)!==null&&n!==void 0?n:!1;return typeof e=="string"?i=e:e instanceof String?i=e.toString():typeof e=="object"&&e.text!=null&&(i=e.text,a=(o=e.parameters)!==null&&o!==void 0?o:{}),s||(MC(i),DC(a)),{validatedQuery:i,params:a}}ee.validateQueryAndParameters=RC;function $C(e,r){if(!wl(e))throw new TypeError(r+" expected to be an object but was: "+(0,kn.stringify)(e));return e}ee.assertObject=$C;function nw(e,r){if(!ow(e))throw new TypeError((0,kn.stringify)(r)+" expected to be string but was: "+(0,kn.stringify)(e));return e}ee.assertString=nw;function jC(e,r){if(typeof e!="number")throw new TypeError(r+" expected to be a number but was: "+(0,kn.stringify)(e));return e}ee.assertNumber=jC;function NC(e,r){if(typeof e!="number"&&typeof e!="bigint"&&!(0,Zp.isInt)(e))throw new TypeError(r+" expected to be either a number or an Integer object but was: "+(0,kn.stringify)(e));return e}ee.assertNumberOrInteger=NC;function kC(e,r){if(Object.prototype.toString.call(e)!=="[object Date]")throw new TypeError(r+" expected to be a standard JavaScript Date but was: "+(0,kn.stringify)(e));if(Number.isNaN(e.getTime()))throw new TypeError(r+" expected to be valid JavaScript Date but its time was NaN: "+(0,kn.stringify)(e));return e}ee.assertValidDate=kC;function MC(e){if(nw(e,"Cypher query"),e.trim().length===0)throw new TypeError("Cypher query is expected to be a non-empty string.")}function DC(e){if(!wl(e)){var r=e.constructor!=null?" "+e.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(r," ").concat(JSON.stringify(e)))}}function ow(e){return Object.prototype.toString.call(e)==="[object String]"}ee.isString=ow;function iw(e,r){var t,n;if(e===r)return!0;if(e===null||r===null)return!1;if(typeof e=="object"&&typeof r=="object"){var o=Object.keys(e),i=Object.keys(r);if(o.length!==i.length)return!1;try{for(var a=PC(o),s=a.next();!s.done;s=a.next()){var c=s.value;if(!iw(e[c],r[c]))return!1}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0}return!1}ee.equals=iw;function LC(e){return e instanceof Zp.default?e.toNumber():typeof e=="bigint"?(0,Zp.int)(e).toNumber():e}ee.toNumber=LC;(function(e){var r=f&&f.__createBinding||(Object.create?function(m,A,k,B){B===void 0&&(B=k);var J=Object.getOwnPropertyDescriptor(A,k);(!J||("get"in J?!A.__esModule:J.writable||J.configurable))&&(J={enumerable:!0,get:function(){return A[k]}}),Object.defineProperty(m,B,J)}:function(m,A,k,B){B===void 0&&(B=k),m[B]=A[k]}),t=f&&f.__setModuleDefault||(Object.create?function(m,A){Object.defineProperty(m,"default",{enumerable:!0,value:A})}:function(m,A){m.default=A}),n=f&&f.__importStar||function(m){if(m&&m.__esModule)return m;var A={};if(m!=null)for(var k in m)k!=="default"&&Object.prototype.hasOwnProperty.call(m,k)&&r(A,m,k);return t(A,m),A};Object.defineProperty(e,"__esModule",{value:!0}),e.floorMod=e.floorDiv=e.assertValidZoneId=e.assertValidNanosecond=e.assertValidSecond=e.assertValidMinute=e.assertValidHour=e.assertValidDay=e.assertValidMonth=e.assertValidYear=e.timeZoneOffsetInSeconds=e.totalNanoseconds=e.newDate=e.toStandardDate=e.isoStringToStandardDate=e.dateToIsoString=e.timeZoneOffsetToIsoString=e.timeToIsoString=e.durationToIsoString=e.dateToEpochDay=e.localDateTimeToEpochSecond=e.localTimeToNanoOfDay=e.normalizeNanosecondsForDuration=e.normalizeSecondsForDuration=e.SECONDS_PER_DAY=e.DAYS_PER_400_YEAR_CYCLE=e.DAYS_0000_TO_1970=e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE=e.NANOS_PER_MILLISECOND=e.NANOS_PER_SECOND=e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE=e.MINUTES_PER_HOUR=e.NANOSECOND_OF_SECOND_RANGE=e.SECOND_OF_MINUTE_RANGE=e.MINUTE_OF_HOUR_RANGE=e.HOUR_OF_DAY_RANGE=e.DAY_OF_MONTH_RANGE=e.MONTH_OF_YEAR_RANGE=e.YEAR_RANGE=void 0;var o=n(xe),i=ue,a=ee,s=function(){function m(A,k){this._minNumber=A,this._maxNumber=k,this._minInteger=(0,o.int)(A),this._maxInteger=(0,o.int)(k)}return m.prototype.contains=function(A){if((0,o.isInt)(A)&&A instanceof o.default)return A.greaterThanOrEqual(this._minInteger)&&A.lessThanOrEqual(this._maxInteger);if(typeof A=="bigint"){var k=(0,o.int)(A);return k.greaterThanOrEqual(this._minInteger)&&k.lessThanOrEqual(this._maxInteger)}else return A>=this._minNumber&&A<=this._maxNumber},m.prototype.toString=function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")},m}();e.YEAR_RANGE=new s(-999999999,999999999),e.MONTH_OF_YEAR_RANGE=new s(1,12),e.DAY_OF_MONTH_RANGE=new s(1,31),e.HOUR_OF_DAY_RANGE=new s(0,23),e.MINUTE_OF_HOUR_RANGE=new s(0,59),e.SECOND_OF_MINUTE_RANGE=new s(0,59),e.NANOSECOND_OF_SECOND_RANGE=new s(0,999999999),e.MINUTES_PER_HOUR=60,e.SECONDS_PER_MINUTE=60,e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE*e.MINUTES_PER_HOUR,e.NANOS_PER_SECOND=1e9,e.NANOS_PER_MILLISECOND=1e6,e.NANOS_PER_MINUTE=e.NANOS_PER_SECOND*e.SECONDS_PER_MINUTE,e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE*e.MINUTES_PER_HOUR,e.DAYS_0000_TO_1970=719528,e.DAYS_PER_400_YEAR_CYCLE=146097,e.SECONDS_PER_DAY=86400;function c(m,A){return(0,o.int)(m).add(re(A,e.NANOS_PER_SECOND))}e.normalizeSecondsForDuration=c;function u(m){return pe(m,e.NANOS_PER_SECOND)}e.normalizeNanosecondsForDuration=u;function l(m,A,k,B){m=(0,o.int)(m),A=(0,o.int)(A),k=(0,o.int)(k),B=(0,o.int)(B);var J=m.multiply(e.NANOS_PER_HOUR);return J=J.add(A.multiply(e.NANOS_PER_MINUTE)),J=J.add(k.multiply(e.NANOS_PER_SECOND)),J.add(B)}e.localTimeToNanoOfDay=l;function d(m,A,k,B,J,Ue,At){var cn=h(m,A,k),Di=K(B,J,Ue);return cn.multiply(e.SECONDS_PER_DAY).add(Di)}e.localDateTimeToEpochSecond=d;function h(m,A,k){m=(0,o.int)(m),A=(0,o.int)(A),k=(0,o.int)(k);var B=m.multiply(365);return m.greaterThanOrEqual(0)?B=B.add(m.add(3).div(4).subtract(m.add(99).div(100)).add(m.add(399).div(400))):B=B.subtract(m.div(-4).subtract(m.div(-100)).add(m.div(-400))),B=B.add(A.multiply(367).subtract(362).div(12)),B=B.add(k.subtract(1)),A.greaterThan(2)&&(B=B.subtract(1),L(m)||(B=B.subtract(1))),B.subtract(e.DAYS_0000_TO_1970)}e.dateToEpochDay=h;function p(m,A,k,B){var J=ve(m),Ue=ve(A),At=Ae(k,B);return"P".concat(J,"M").concat(Ue,"DT").concat(At,"S")}e.durationToIsoString=p;function v(m,A,k,B){var J=ve(m,2),Ue=ve(A,2),At=ve(k,2),cn=X(B);return"".concat(J,":").concat(Ue,":").concat(At).concat(cn)}e.timeToIsoString=v;function y(m){if(m=(0,o.int)(m),m.equals(0))return"Z";var A=m.isNegative();A&&(m=m.multiply(-1));var k=A?"-":"+",B=ve(m.div(e.SECONDS_PER_HOUR),2),J=ve(m.div(e.SECONDS_PER_MINUTE).modulo(e.MINUTES_PER_HOUR),2),Ue=m.modulo(e.SECONDS_PER_MINUTE),At=Ue.equals(0)?null:ve(Ue,2);return At!=null?"".concat(k).concat(B,":").concat(J,":").concat(At):"".concat(k).concat(B,":").concat(J)}e.timeZoneOffsetToIsoString=y;function _(m,A,k){var B=$e(m),J=ve(A,2),Ue=ve(k,2);return"".concat(B,"-").concat(J,"-").concat(Ue)}e.dateToIsoString=_;function b(m){return new Date(m)}e.isoStringToStandardDate=b;function w(m){return new Date(m)}e.toStandardDate=w;function S(m){return new Date(m)}e.newDate=S;function E(m,A){A=A??0;var k=m.getMilliseconds()*e.NANOS_PER_MILLISECOND;return ft(A,k)}e.totalNanoseconds=E;function T(m){var A=m.getSeconds()-m.getUTCSeconds(),k=m.getMinutes()-m.getUTCMinutes(),B=m.getHours()-m.getUTCHours(),J=C(m);return B*e.SECONDS_PER_HOUR+k*e.SECONDS_PER_MINUTE+A+J*e.SECONDS_PER_DAY}e.timeZoneOffsetInSeconds=T;function C(m){return m.getMonth()===m.getUTCMonth()?m.getDate()-m.getUTCDate():m.getFullYear()>m.getUTCFullYear()||m.getMonth()>m.getUTCMonth()&&m.getFullYear()===m.getUTCFullYear()?m.getDate()+P(m.getUTCMonth(),m.getUTCFullYear())-m.getUTCDate():m.getDate()-(m.getUTCDate()+P(m.getMonth(),m.getFullYear()))}function P(m,A){return m===1?A%400===0||A%4===0&&A%100!==0?29:28:[0,2,4,6,7,9,11].includes(m)?31:30}function I(m){return te(m,e.YEAR_RANGE,"Year")}e.assertValidYear=I;function M(m){return te(m,e.MONTH_OF_YEAR_RANGE,"Month")}e.assertValidMonth=M;function F(m){return te(m,e.DAY_OF_MONTH_RANGE,"Day")}e.assertValidDay=F;function Q(m){return te(m,e.HOUR_OF_DAY_RANGE,"Hour")}e.assertValidHour=Q;function q(m){return te(m,e.MINUTE_OF_HOUR_RANGE,"Minute")}e.assertValidMinute=q;function Z(m){return te(m,e.SECOND_OF_MINUTE_RANGE,"Second")}e.assertValidSecond=Z;function fe(m){return te(m,e.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")}e.assertValidNanosecond=fe;var V=new Map,ie=function(m,A){return(0,i.newError)("".concat(A,' is expected to be a valid ZoneId but was: "').concat(m,'"'))};function W(m,A){var k=V.get(A);if(k!==!0){if(k===!1)throw ie(A,m);try{Intl.DateTimeFormat(void 0,{timeZone:A}),V.set(A,!0)}catch{throw V.set(A,!1),ie(A,m)}}}e.assertValidZoneId=W;function te(m,A,k){if((0,a.assertNumberOrInteger)(m,k),!A.contains(m))throw(0,i.newError)("".concat(k," is expected to be in range ").concat(A.toString()," but was: ").concat(m.toString()));return m}function K(m,A,k){m=(0,o.int)(m),A=(0,o.int)(A),k=(0,o.int)(k);var B=m.multiply(e.SECONDS_PER_HOUR);return B=B.add(A.multiply(e.SECONDS_PER_MINUTE)),B.add(k)}function L(m){return m=(0,o.int)(m),m.modulo(4).equals(0)?m.modulo(100).equals(0)?!!m.modulo(400).equals(0):!0:!1}function re(m,A){m=(0,o.int)(m),A=(0,o.int)(A);var k=m.div(A);return m.isPositive()!==A.isPositive()&&k.multiply(A).notEquals(m)&&(k=k.subtract(1)),k}e.floorDiv=re;function pe(m,A){return m=(0,o.int)(m),A=(0,o.int)(A),m.subtract(re(m,A).multiply(A))}e.floorMod=pe;function Ae(m,A){m=(0,o.int)(m),A=(0,o.int)(A);var k,B,J=m.isNegative(),Ue=A.greaterThan(0);return J&&Ue?m.equals(-1)?k="-0":k=m.add(1).toString():k=m.toString(),Ue&&(J?B=X(A.negate().add(2*e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND)):B=X(A.add(e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND))),B!=null?k+B:k}function X(m){return m=(0,o.int)(m),m.equals(0)?"":"."+ve(m,9)}function $e(m){var A=(0,o.int)(m);return A.isNegative()||A.greaterThan(9999)?ve(A,6,{usePositiveSign:!0}):ve(A,4)}function ve(m,A,k){m=(0,o.int)(m);var B=m.isNegative();B&&(m=m.negate());var J=m.toString();if(A!=null)for(;J.length<A;)J="0"+J;return B?"-"+J:(k==null?void 0:k.usePositiveSign)===!0?"+"+J:J}function ft(m,A){return m instanceof o.default?m.add(A):typeof m=="bigint"?m+BigInt(A):m+A}})(f_);var UC=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),FC=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),aw=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&UC(r,e,t);return FC(r,e),r},BC=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(he,"__esModule",{value:!0});he.isDateTime=he.DateTime=he.isLocalDateTime=he.LocalDateTime=he.isDate=he.Date=he.isTime=he.Time=he.isLocalTime=he.LocalTime=he.isDuration=he.Duration=void 0;var Y=aw(f_),fr=ee,xC=ue,In=aw(xe),Ko={value:!0,enumerable:!1,configurable:!1,writable:!1},uw="__isDuration__",sw="__isLocalTime__",cw="__isTime__",lw="__isDate__",fw="__isLocalDateTime__",dw="__isDateTime__",hw=function(){function e(r,t,n,o){this.months=(0,fr.assertNumberOrInteger)(r,"Months"),this.days=(0,fr.assertNumberOrInteger)(t,"Days"),(0,fr.assertNumberOrInteger)(n,"Seconds"),(0,fr.assertNumberOrInteger)(o,"Nanoseconds"),this.seconds=Y.normalizeSecondsForDuration(n,o),this.nanoseconds=Y.normalizeNanosecondsForDuration(o),Object.freeze(this)}return e.prototype.toString=function(){return Y.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},e}();he.Duration=hw;Object.defineProperty(hw.prototype,uw,Ko);function VC(e){return Yo(e,uw)}he.isDuration=VC;var pw=function(){function e(r,t,n,o){this.hour=Y.assertValidHour(r),this.minute=Y.assertValidMinute(t),this.second=Y.assertValidSecond(n),this.nanosecond=Y.assertValidNanosecond(o),Object.freeze(this)}return e.fromStandardDate=function(r,t){$a(r,t);var n=Y.totalNanoseconds(r,t);return new e(r.getHours(),r.getMinutes(),r.getSeconds(),n instanceof In.default?n.toInt():typeof n=="bigint"?(0,In.int)(n).toInt():n)},e.prototype.toString=function(){return Y.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},e}();he.LocalTime=pw;Object.defineProperty(pw.prototype,sw,Ko);function WC(e){return Yo(e,sw)}he.isLocalTime=WC;var vw=function(){function e(r,t,n,o,i){this.hour=Y.assertValidHour(r),this.minute=Y.assertValidMinute(t),this.second=Y.assertValidSecond(n),this.nanosecond=Y.assertValidNanosecond(o),this.timeZoneOffsetSeconds=(0,fr.assertNumberOrInteger)(i,"Time zone offset in seconds"),Object.freeze(this)}return e.fromStandardDate=function(r,t){return $a(r,t),new e(r.getHours(),r.getMinutes(),r.getSeconds(),(0,In.toNumber)(Y.totalNanoseconds(r,t)),Y.timeZoneOffsetInSeconds(r))},e.prototype.toString=function(){return Y.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+Y.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},e}();he.Time=vw;Object.defineProperty(vw.prototype,cw,Ko);function zC(e){return Yo(e,cw)}he.isTime=zC;var _w=function(){function e(r,t,n){this.year=Y.assertValidYear(r),this.month=Y.assertValidMonth(t),this.day=Y.assertValidDay(n),Object.freeze(this)}return e.fromStandardDate=function(r){return $a(r),new e(r.getFullYear(),r.getMonth()+1,r.getDate())},e.prototype.toStandardDate=function(){return Y.isoStringToStandardDate(this.toString())},e.prototype.toString=function(){return Y.dateToIsoString(this.year,this.month,this.day)},e}();he.Date=_w;Object.defineProperty(_w.prototype,lw,Ko);function HC(e){return Yo(e,lw)}he.isDate=HC;var yw=function(){function e(r,t,n,o,i,a,s){this.year=Y.assertValidYear(r),this.month=Y.assertValidMonth(t),this.day=Y.assertValidDay(n),this.hour=Y.assertValidHour(o),this.minute=Y.assertValidMinute(i),this.second=Y.assertValidSecond(a),this.nanosecond=Y.assertValidNanosecond(s),Object.freeze(this)}return e.fromStandardDate=function(r,t){return $a(r,t),new e(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),(0,In.toNumber)(Y.totalNanoseconds(r,t)))},e.prototype.toStandardDate=function(){return Y.isoStringToStandardDate(this.toString())},e.prototype.toString=function(){return mw(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},e}();he.LocalDateTime=yw;Object.defineProperty(yw.prototype,fw,Ko);function qC(e){return Yo(e,fw)}he.isLocalDateTime=qC;var bw=function(){function e(r,t,n,o,i,a,s,c,u){this.year=Y.assertValidYear(r),this.month=Y.assertValidMonth(t),this.day=Y.assertValidDay(n),this.hour=Y.assertValidHour(o),this.minute=Y.assertValidMinute(i),this.second=Y.assertValidSecond(a),this.nanosecond=Y.assertValidNanosecond(s);var l=BC(KC(c,u),2),d=l[0],h=l[1];this.timeZoneOffsetSeconds=d,this.timeZoneId=h??void 0,Object.freeze(this)}return e.fromStandardDate=function(r,t){return $a(r,t),new e(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),(0,In.toNumber)(Y.totalNanoseconds(r,t)),Y.timeZoneOffsetInSeconds(r),null)},e.prototype.toStandardDate=function(){return Y.toStandardDate(this._toUTC())},e.prototype.toString=function(){var r,t=mw(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),n=this.timeZoneOffsetSeconds!=null?Y.timeZoneOffsetToIsoString((r=this.timeZoneOffsetSeconds)!==null&&r!==void 0?r:0):"",o=this.timeZoneId!=null?"[".concat(this.timeZoneId,"]"):"";return t+n+o},e.prototype._toUTC=function(){var r;if(this.timeZoneOffsetSeconds===void 0)throw new Error("Requires DateTime created with time zone offset");var t=Y.localDateTimeToEpochSecond(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),n=t.subtract((r=this.timeZoneOffsetSeconds)!==null&&r!==void 0?r:0);return(0,In.int)(n).multiply(1e3).add((0,In.int)(this.nanosecond).div(1e6)).toNumber()},e}();he.DateTime=bw;Object.defineProperty(bw.prototype,dw,Ko);function GC(e){return Yo(e,dw)}he.isDateTime=GC;function Yo(e,r){return e!=null&&e[r]===!0}function mw(e,r,t,n,o,i,a){return Y.dateToIsoString(e,r,t)+"T"+Y.timeToIsoString(n,o,i,a)}function KC(e,r){var t=e!=null,n=r!=null&&r!=="";if(!t&&!n)throw(0,xC.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(e," and id: ").concat(r));var o=[void 0,void 0];return t&&((0,fr.assertNumberOrInteger)(e,"Time zone offset in seconds"),o[0]=e),n&&((0,fr.assertString)(r,"Time zone ID"),Y.assertValidZoneId("Time zone ID",r),o[1]=r),o}function $a(e,r){(0,fr.assertValidDate)(e,"Standard date"),r!=null&&(0,fr.assertNumberOrInteger)(r,"Nanosecond")}var Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.isPathSegment=Oe.PathSegment=Oe.isPath=Oe.Path=Oe.isUnboundRelationship=Oe.UnboundRelationship=Oe.isRelationship=Oe.Relationship=Oe.isNode=Oe.Node=void 0;var d_=Ft,ja={value:!0,enumerable:!1,configurable:!1,writable:!1},gw="__isNode__",ww="__isRelationship__",Ow="__isUnboundRelationship__",Ew="__isPath__",Sw="__isPathSegment__";function Na(e,r){return e!=null&&e[r]===!0}var Tw=function(){function e(r,t,n,o){this.identity=r,this.labels=t,this.properties=n,this.elementId=sa(o,function(){return r.toString()})}return e.prototype.toString=function(){for(var r="("+this.elementId,t=0;t<this.labels.length;t++)r+=":"+this.labels[t];var n=Object.keys(this.properties);if(n.length>0){r+=" {";for(var t=0;t<n.length;t++)t>0&&(r+=","),r+=n[t]+":"+(0,d_.stringify)(this.properties[n[t]]);r+="}"}return r+=")",r},e}();Oe.Node=Tw;Object.defineProperty(Tw.prototype,gw,ja);function YC(e){return Na(e,gw)}Oe.isNode=YC;var Mc=function(){function e(r,t,n,o,i,a,s,c){this.identity=r,this.start=t,this.end=n,this.type=o,this.properties=i,this.elementId=sa(a,function(){return r.toString()}),this.startNodeElementId=sa(s,function(){return t.toString()}),this.endNodeElementId=sa(c,function(){return n.toString()})}return e.prototype.toString=function(){var r="("+this.startNodeElementId+")-[:"+this.type,t=Object.keys(this.properties);if(t.length>0){r+=" {";for(var n=0;n<t.length;n++)n>0&&(r+=","),r+=t[n]+":"+(0,d_.stringify)(this.properties[t[n]]);r+="}"}return r+="]->("+this.endNodeElementId+")",r},e}();Oe.Relationship=Mc;Object.defineProperty(Mc.prototype,ww,ja);function ZC(e){return Na(e,ww)}Oe.isRelationship=ZC;var Pw=function(){function e(r,t,n,o){this.identity=r,this.type=t,this.properties=n,this.elementId=sa(o,function(){return r.toString()})}return e.prototype.bind=function(r,t){return new Mc(this.identity,r,t,this.type,this.properties,this.elementId)},e.prototype.bindTo=function(r,t){return new Mc(this.identity,r.identity,t.identity,this.type,this.properties,this.elementId,r.elementId,t.elementId)},e.prototype.toString=function(){var r="-[:"+this.type,t=Object.keys(this.properties);if(t.length>0){r+=" {";for(var n=0;n<t.length;n++)n>0&&(r+=","),r+=t[n]+":"+(0,d_.stringify)(this.properties[t[n]]);r+="}"}return r+="]->",r},e}();Oe.UnboundRelationship=Pw;Object.defineProperty(Pw.prototype,Ow,ja);function QC(e){return Na(e,Ow)}Oe.isUnboundRelationship=QC;var Cw=function(){function e(r,t,n){this.start=r,this.relationship=t,this.end=n}return e}();Oe.PathSegment=Cw;Object.defineProperty(Cw.prototype,Sw,ja);function XC(e){return Na(e,Sw)}Oe.isPathSegment=XC;var Aw=function(){function e(r,t,n){this.start=r,this.end=t,this.segments=n,this.length=n.length}return e}();Oe.Path=Aw;Object.defineProperty(Aw.prototype,Ew,ja);function JC(e){return Na(e,Ew)}Oe.isPath=JC;function sa(e,r){return e??r()}var h_={},Hh=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},qh=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},Gh=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(h_,"__esModule",{value:!0});var ub=ue;function eA(e){var r={};return e.forEach(function(t,n){r[t]=n}),r}var tA=function(){function e(r,t,n){this.keys=r,this.length=r.length,this._fields=t,this._fieldLookup=n??eA(r)}return e.prototype.forEach=function(r){var t,n;try{for(var o=qh(this.entries()),i=o.next();!i.done;i=o.next()){var a=Gh(i.value,2),s=a[0],c=a[1];r(c,s,this)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},e.prototype.map=function(r){var t,n,o=[];try{for(var i=qh(this.entries()),a=i.next();!a.done;a=i.next()){var s=Gh(a.value,2),c=s[0],u=s[1];o.push(r(u,c,this))}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return o},e.prototype.entries=function(){var r;return Hh(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,[this.keys[r],this._fields[r]]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype.values=function(){var r;return Hh(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,this._fields[r]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype[Symbol.iterator]=function(){var r;return Hh(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,this._fields[r]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype.toObject=function(){var r,t,n={};try{for(var o=qh(this.entries()),i=o.next();!i.done;i=o.next()){var a=Gh(i.value,2),s=a[0],c=a[1];n[s]=c}}catch(u){r={error:u}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(r)throw r.error}}return n},e.prototype.get=function(r){var t;if(typeof r!="number"){if(t=this._fieldLookup[r],t===void 0)throw(0,ub.newError)("This record has no field with key '".concat(r.toString(),"', available keys are: [")+this.keys.toString()+"].")}else t=r;if(t>this._fields.length-1||t<0)throw(0,ub.newError)("This record has no field with index '"+t.toString()+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[t]},e.prototype.has=function(r){return typeof r=="number"?r>=0&&r<this._fields.length:this._fieldLookup[r]!==void 0},e}();h_.default=tA;var No={};Object.defineProperty(No,"__esModule",{value:!0});No.isPoint=No.Point=void 0;var Xs=ee,Iw="__isPoint__",Rw=function(){function e(r,t,n,o){this.srid=(0,Xs.assertNumberOrInteger)(r,"SRID"),this.x=(0,Xs.assertNumber)(t,"X coordinate"),this.y=(0,Xs.assertNumber)(n,"Y coordinate"),this.z=o==null?o:(0,Xs.assertNumber)(o,"Z coordinate"),Object.freeze(this)}return e.prototype.toString=function(){return this.z!=null&&!isNaN(this.z)?"Point{srid=".concat(fn(this.srid),", x=").concat(fn(this.x),", y=").concat(fn(this.y),", z=").concat(fn(this.z),"}"):"Point{srid=".concat(fn(this.srid),", x=").concat(fn(this.x),", y=").concat(fn(this.y),"}")},e}();No.Point=Rw;function fn(e){return Number.isInteger(e)?e.toString()+".0":e.toString()}Object.defineProperty(Rw.prototype,Iw,{value:!0,enumerable:!1,configurable:!1,writable:!1});function rA(e){var r=e;return e!=null&&r[Iw]===!0}No.isPoint=rA;var Je={},ne={},Dr={};Object.defineProperty(Dr,"__esModule",{value:!0});Dr.FailedObserver=Dr.CompletedObserver=void 0;var nA=function(){function e(){}return e.prototype.subscribe=function(r){ca(r,r.onKeys,[]),ca(r,r.onCompleted,{})},e.prototype.cancel=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.prepareToHandleSingleResponse=function(){},e.prototype.markCompleted=function(){},e.prototype.onError=function(r){throw new Error("CompletedObserver not supposed to call onError",{cause:r})},e}();Dr.CompletedObserver=nA;var oA=function(){function e(r){var t=r.error,n=r.onError;this._error=t,this._beforeError=n,this._observers=[],this.onError(t)}return e.prototype.subscribe=function(r){ca(r,r.onError,this._error),this._observers.push(r)},e.prototype.onError=function(r){ca(this,this._beforeError,r),this._observers.forEach(function(t){return ca(t,t.onError,r)})},e.prototype.cancel=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.markCompleted=function(){},e.prototype.prepareToHandleSingleResponse=function(){},e}();Dr.FailedObserver=oA;function ca(e,r,t){r!=null&&r.bind(e)(t)}var Yr={},iA=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),aA=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),uA=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&iA(r,e,t);return aA(r,e),r},sA=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},cA=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.Bookmarks=void 0;var sb=uA(ee),lA="bookmarks",$w=function(){function e(r){this._values=dA(r)}return e.empty=function(){return fA},e.prototype.isEmpty=function(){return this._values.length===0},e.prototype.values=function(){return this._values},e.prototype[Symbol.iterator]=function(){return this._values[Symbol.iterator]()},e.prototype.asBeginTransactionParameters=function(){var r;return this.isEmpty()?{}:(r={},r[lA]=this._values,r)},e}();Yr.Bookmarks=$w;var fA=new $w(null);function dA(e){if(e==null||e==="")return[];if(sb.isString(e))return[e];if(Array.isArray(e)){for(var r=new Set,t=jw(e),n=0;n<t.length;n++){var o=t[n];if(o!=null){if(!sb.isString(o))throw new TypeError("Bookmark value should be a string, given: '".concat(o,"'"));r.add(o)}}return cA([],sA(r),!1)}throw new TypeError("Bookmarks should either be a string or a string array, given: '".concat(e,"'"))}function jw(e){return e.reduce(function(r,t){return Array.isArray(t)?r.concat(jw(t)):r.concat(t)},[])}var x={};Object.defineProperty(x,"__esModule",{value:!0});x.TELEMETRY_APIS=x.BOLT_PROTOCOL_V5_8=x.BOLT_PROTOCOL_V5_7=x.BOLT_PROTOCOL_V5_6=x.BOLT_PROTOCOL_V5_5=x.BOLT_PROTOCOL_V5_4=x.BOLT_PROTOCOL_V5_3=x.BOLT_PROTOCOL_V5_2=x.BOLT_PROTOCOL_V5_1=x.BOLT_PROTOCOL_V5_0=x.BOLT_PROTOCOL_V4_4=x.BOLT_PROTOCOL_V4_3=x.BOLT_PROTOCOL_V4_2=x.BOLT_PROTOCOL_V4_1=x.BOLT_PROTOCOL_V4_0=x.BOLT_PROTOCOL_V3=x.BOLT_PROTOCOL_V2=x.BOLT_PROTOCOL_V1=x.DEFAULT_POOL_MAX_SIZE=x.DEFAULT_POOL_ACQUISITION_TIMEOUT=x.DEFAULT_CONNECTION_TIMEOUT_MILLIS=x.ACCESS_MODE_WRITE=x.ACCESS_MODE_READ=x.FETCH_ALL=void 0;var hA=-1;x.FETCH_ALL=hA;var pA=60*1e3;x.DEFAULT_POOL_ACQUISITION_TIMEOUT=pA;var vA=100;x.DEFAULT_POOL_MAX_SIZE=vA;var _A=3e4;x.DEFAULT_CONNECTION_TIMEOUT_MILLIS=_A;var yA="READ";x.ACCESS_MODE_READ=yA;var bA="WRITE";x.ACCESS_MODE_WRITE=bA;var mA=1;x.BOLT_PROTOCOL_V1=mA;var gA=2;x.BOLT_PROTOCOL_V2=gA;var wA=3;x.BOLT_PROTOCOL_V3=wA;var OA=4;x.BOLT_PROTOCOL_V4_0=OA;var EA=4.1;x.BOLT_PROTOCOL_V4_1=EA;var SA=4.2;x.BOLT_PROTOCOL_V4_2=SA;var TA=4.3;x.BOLT_PROTOCOL_V4_3=TA;var PA=4.4;x.BOLT_PROTOCOL_V4_4=PA;var CA=5;x.BOLT_PROTOCOL_V5_0=CA;var AA=5.1;x.BOLT_PROTOCOL_V5_1=AA;var IA=5.2;x.BOLT_PROTOCOL_V5_2=IA;var RA=5.3;x.BOLT_PROTOCOL_V5_3=RA;var $A=5.4;x.BOLT_PROTOCOL_V5_4=$A;var jA=5.5;x.BOLT_PROTOCOL_V5_5=jA;var NA=5.6;x.BOLT_PROTOCOL_V5_6=NA;var kA=5.7;x.BOLT_PROTOCOL_V5_7=kA;var MA=5.8;x.BOLT_PROTOCOL_V5_8=MA;var DA={MANAGED_TRANSACTION:0,UNMANAGED_TRANSACTION:1,AUTO_COMMIT_TRANSACTION:2,EXECUTE_QUERY:3};x.TELEMETRY_APIS=DA;var Lt={},Gn={},LA=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ho;Object.defineProperty(Gn,"__esModule",{value:!0});Gn.Logger=void 0;var Nw=ue,Qp="error",Xp="warn",ma="info",Jp="debug",UA=ma,Dc=(ho={},ho[Qp]=0,ho[Xp]=1,ho[ma]=2,ho[Jp]=3,ho),kw=function(){function e(r,t){this._level=r,this._loggerFunction=t}return e.create=function(r){if((r==null?void 0:r.logging)!=null){var t=r.logging,n=xA(t),o=VA(t);return new e(n,o)}return this.noOp()},e.noOp=function(){return BA},e.prototype.isErrorEnabled=function(){return Js(this._level,Qp)},e.prototype.error=function(r){this.isErrorEnabled()&&this._loggerFunction(Qp,r)},e.prototype.isWarnEnabled=function(){return Js(this._level,Xp)},e.prototype.warn=function(r){this.isWarnEnabled()&&this._loggerFunction(Xp,r)},e.prototype.isInfoEnabled=function(){return Js(this._level,ma)},e.prototype.info=function(r){this.isInfoEnabled()&&this._loggerFunction(ma,r)},e.prototype.isDebugEnabled=function(){return Js(this._level,Jp)},e.prototype.debug=function(r){this.isDebugEnabled()&&this._loggerFunction(Jp,r)},e}();Gn.Logger=kw;var FA=function(e){LA(r,e);function r(){return e.call(this,ma,function(t,n){})||this}return r.prototype.isErrorEnabled=function(){return!1},r.prototype.error=function(t){},r.prototype.isWarnEnabled=function(){return!1},r.prototype.warn=function(t){},r.prototype.isInfoEnabled=function(){return!1},r.prototype.info=function(t){},r.prototype.isDebugEnabled=function(){return!1},r.prototype.debug=function(t){},r}(kw),BA=new FA;function Js(e,r){return Dc[e]>=Dc[r]}function xA(e){if((e==null?void 0:e.level)!=null){var r=e.level,t=Dc[r];if(t==null&&t!==0)throw(0,Nw.newError)("Illegal logging level: ".concat(r,". Supported levels are: ").concat(Object.keys(Dc).toString()));return r}return UA}function VA(e){var r,t;if((e==null?void 0:e.logger)!=null){var n=e.logger;if(n!=null&&typeof n=="function")return n}throw(0,Nw.newError)("Illegal logger function: ".concat((t=(r=e==null?void 0:e.logger)===null||r===void 0?void 0:r.toString())!==null&&t!==void 0?t:"undefined"))}var Mw=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),la=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},fa=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.EMPTY_CONNECTION_HOLDER=Lt.ReadOnlyConnectionHolder=Lt.ConnectionHolder=void 0;var WA=ue,zA=ee,HA=x,cb=Yr,qA=Gn,p_=function(){function e(r){var t=r.mode,n=r.database,o=n===void 0?"":n,i=r.bookmarks,a=r.connectionProvider,s=r.impersonatedUser,c=r.onDatabaseNameResolved,u=r.getConnectionAcquistionBookmarks,l=r.auth,d=r.log;this._mode=t??HA.ACCESS_MODE_WRITE,this._closed=!1,this._database=o!=null?(0,zA.assertString)(o,"database"):"",this._bookmarks=i??cb.Bookmarks.empty(),this._connectionProvider=a,this._impersonatedUser=s,this._referenceCount=0,this._connectionPromise=Promise.resolve(null),this._onDatabaseNameResolved=c,this._auth=l,this._log=d,this._logError=this._logError.bind(this),this._getConnectionAcquistionBookmarks=u??function(){return Promise.resolve(cb.Bookmarks.empty())}}return e.prototype.mode=function(){return this._mode},e.prototype.database=function(){return this._database},e.prototype.setDatabase=function(r){this._database=r},e.prototype.bookmarks=function(){return this._bookmarks},e.prototype.connectionProvider=function(){return this._connectionProvider},e.prototype.referenceCount=function(){return this._referenceCount},e.prototype.initializeConnection=function(r){if(this._referenceCount===0&&this._connectionProvider!=null)this._connectionPromise=this._createConnectionPromise(this._connectionProvider,r);else return this._referenceCount++,!1;return this._referenceCount++,!0},e.prototype._createConnectionPromise=function(r,t){return la(this,void 0,void 0,function(){var n,o,i;return fa(this,function(a){switch(a.label){case 0:return o=(n=r).acquireConnection,i={accessMode:this._mode,database:this._database},[4,this._getBookmarks()];case 1:return[4,o.apply(n,[(i.bookmarks=a.sent(),i.impersonatedUser=this._impersonatedUser,i.onDatabaseNameResolved=this._onDatabaseNameResolved,i.auth=this._auth,i.homeDb=t,i)])];case 2:return[2,a.sent()]}})})},e.prototype._getBookmarks=function(){return la(this,void 0,void 0,function(){return fa(this,function(r){switch(r.label){case 0:return[4,this._getConnectionAcquistionBookmarks()];case 1:return[2,r.sent()]}})})},e.prototype.getConnection=function(){return this._connectionPromise},e.prototype.releaseConnection=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount--,this._referenceCount===0?this._releaseConnection():this._connectionPromise)},e.prototype.close=function(r){return this._closed=!0,this._referenceCount===0?this._connectionPromise:(this._referenceCount=0,this._releaseConnection(r))},e.prototype.log=function(){return this._log},e.prototype._releaseConnection=function(r){return this._connectionPromise=this._connectionPromise.then(function(t){return t!=null?t.isOpen()&&(t.hasOngoingObservableRequests()||r===!0)?t.resetAndFlush().catch(YA).then(function(){return t.release().then(function(){return null})}):t.release().then(function(){return null}):Promise.resolve(null)}).catch(this._logError),this._connectionPromise},e.prototype._logError=function(r){return this._log.isWarnEnabled()&&this._log.warn("ConnectionHolder got an error while releasing the connection. Error ".concat(r,". Stacktrace: ").concat(r.stack)),null},e}();Lt.ConnectionHolder=p_;var Dw=function(e){Mw(r,e);function r(t){var n=e.call(this,{mode:t.mode(),database:t.database(),bookmarks:t.bookmarks(),getConnectionAcquistionBookmarks:t._getConnectionAcquistionBookmarks,connectionProvider:t.connectionProvider(),log:t.log()})||this;return n._connectionHolder=t,n}return r.prototype.initializeConnection=function(){return this._connectionHolder.referenceCount()!==0},r.prototype.getConnection=function(){return this._connectionHolder.getConnection()},r.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},r.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},r}(p_);Lt.ReadOnlyConnectionHolder=Dw;Lt.default=Dw;var GA=function(e){Mw(r,e);function r(){return e.call(this,{log:qA.Logger.create({})})||this}return r.prototype.mode=function(){},r.prototype.database=function(){},r.prototype.initializeConnection=function(){return!0},r.prototype.getConnection=function(){return la(this,void 0,void 0,function(){return fa(this,function(t){switch(t.label){case 0:return[4,Promise.reject((0,WA.newError)("This connection holder does not serve connections"))];case 1:return[2,t.sent()]}})})},r.prototype.releaseConnection=function(){return la(this,void 0,void 0,function(){return fa(this,function(t){switch(t.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,t.sent()]}})})},r.prototype.close=function(){return la(this,void 0,void 0,function(){return fa(this,function(t){switch(t.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,t.sent()]}})})},r}(p_),KA=new GA;Lt.EMPTY_CONNECTION_HOLDER=KA;function YA(e){return null}var Zo={},ZA=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),QA=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),XA=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&ZA(r,e,t);return QA(r,e),r};Object.defineProperty(Zo,"__esModule",{value:!0});Zo.TxConfig=void 0;var ga=XA(ee),JA=ue,eI=xe,Lw=function(){function e(r,t){iI(r),this.timeout=rI(r,t),this.metadata=oI(r)}return e.empty=function(){return tI},e.prototype.isEmpty=function(){return Object.values(this).every(function(r){return r==null})},e}();Zo.TxConfig=Lw;var tI=new Lw({});function rI(e,r){if(ga.isObject(e)&&e.timeout!=null){ga.assertNumberOrInteger(e.timeout,"Transaction timeout"),nI(e)&&(r==null?void 0:r.isInfoEnabled())===!0&&(r==null||r.info("Transaction timeout expected to be an integer, got: ".concat(e.timeout,". The value will be rounded up.")));var t=(0,eI.int)(e.timeout,{ceilFloat:!0});if(t.isNegative())throw(0,JA.newError)("Transaction timeout should not be negative");return t}return null}function nI(e){return typeof e.timeout=="number"&&!Number.isInteger(e.timeout)}function oI(e){if(ga.isObject(e)&&e.metadata!=null){var r=e.metadata;if(ga.assertObject(r,"config.metadata"),Object.keys(r).length!==0)return r}return null}function iI(e){e!=null&&ga.assertObject(e,"Transaction config")}var ka={},ev=f&&f.__assign||function(){return ev=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ev.apply(this,arguments)},aI=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},uI=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},sI=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},cI=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(ka,"__esModule",{value:!0});ka.TransactionExecutor=void 0;var Ui=ue,lI=x,fI=30*1e3,dI=1e3,hI=2,pI=.2;function vI(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return setTimeout.apply(void 0,cI([e,r],sI(t),!1))}function _I(e){return clearTimeout(e)}var yI=function(){function e(r,t,n,o,i){i===void 0&&(i={setTimeout:vI,clearTimeout:_I}),this._maxRetryTimeMs=ec(r,fI),this._initialRetryDelayMs=ec(t,dI),this._multiplier=ec(n,hI),this._jitterFactor=ec(o,pI),this._setTimeout=i.setTimeout,this._clearTimeout=i.clearTimeout,this._inFlightTimeoutIds=[],this.pipelineBegin=!1,this.telemetryApi=lI.TELEMETRY_APIS.MANAGED_TRANSACTION,this._verifyAfterConstruction()}return e.prototype.execute=function(r,t,n){var o=this,i={apiTransactionConfig:{api:this.telemetryApi,onTelemetrySuccess:function(){i.apiTransactionConfig=void 0}}};return new Promise(function(a,s){o._executeTransactionInsidePromise(r,t,a,s,n,i).catch(s)}).catch(function(a){var s=Date.now(),c=o._initialRetryDelayMs;return o._retryTransactionPromise(r,t,a,s,c,n,i)})},e.prototype.close=function(){var r=this;this._inFlightTimeoutIds.forEach(function(t){return r._clearTimeout(t)}),this._inFlightTimeoutIds=[]},e.prototype._retryTransactionPromise=function(r,t,n,o,i,a,s){var c=this,u=Date.now()-o;return u>this._maxRetryTimeMs||!(0,Ui.isRetriableError)(n)?Promise.reject(n):new Promise(function(l,d){var h=c._computeDelayWithJitter(i),p=c._setTimeout(function(){c._inFlightTimeoutIds=c._inFlightTimeoutIds.filter(function(v){return v!==p}),c._executeTransactionInsidePromise(r,t,l,d,a,s).catch(d)},h);c._inFlightTimeoutIds.push(p)}).catch(function(l){var d=i*c._multiplier;return c._retryTransactionPromise(r,t,l,o,d,a,s)})},e.prototype._executeTransactionInsidePromise=function(r,t,n,o,i,a){return aI(this,void 0,void 0,function(){var s,c,u,l,d,h,p,v=this;return uI(this,function(y){switch(y.label){case 0:return y.trys.push([0,4,,5]),c=r((a==null?void 0:a.apiTransactionConfig)!=null?ev({},a==null?void 0:a.apiTransactionConfig):void 0),this.pipelineBegin?(u=c,[3,3]):[3,1];case 1:return[4,c];case 2:u=y.sent(),y.label=3;case 3:return s=u,[3,5];case 4:return l=y.sent(),o(l),[2];case 5:return d=i??function(_){return _},h=d(s),p=this._safeExecuteTransactionWork(h,t),p.then(function(_){return v._handleTransactionWorkSuccess(_,s,n,o)}).catch(function(_){return v._handleTransactionWorkFailure(_,s,o)}),[2]}})})},e.prototype._safeExecuteTransactionWork=function(r,t){try{var n=t(r);return Promise.resolve(n)}catch(o){return Promise.reject(o)}},e.prototype._handleTransactionWorkSuccess=function(r,t,n,o){t.isOpen()?t.commit().then(function(){n(r)}).catch(function(i){o(i)}):n(r)},e.prototype._handleTransactionWorkFailure=function(r,t,n){t.isOpen()?t.rollback().catch(function(o){}).then(function(){return n(r)}).catch(n):n(r)},e.prototype._computeDelayWithJitter=function(r){var t=r*this._jitterFactor,n=r-t,o=r+t;return Math.random()*(o-n)+n},e.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,Ui.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs.toString());if(this._initialRetryDelayMs<0)throw(0,Ui.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs.toString());if(this._multiplier<1)throw(0,Ui.newError)("Multiplier should be >= 1.0: "+this._multiplier.toString());if(this._jitterFactor<0||this._jitterFactor>1)throw(0,Ui.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor.toFixed())},e}();ka.TransactionExecutor=yI;function ec(e,r){return e??r}var ht={},Lc=f&&f.__assign||function(){return Lc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Lc.apply(this,arguments)},Uw=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(ht,"__esModule",{value:!0});ht.Url=ht.formatIPv6Address=ht.formatIPv4Address=ht.defaultPortForScheme=ht.parseDatabaseUrl=void 0;var bI=ee,mI=7687,gI=7474,wI=7473,Fw=function(){function e(r,t,n,o,i){this.scheme=r,this.host=t,this.port=n,this.hostAndPort=o,this.query=i}return e}();ht.Url=Fw;function OI(e){var r;(0,bI.assertString)(e,"URL");var t=SI(e),n=NI(t.url),o=t.schemeMissing?null:TI(n.scheme),i=PI(n.host),a=RI(i),s=CI(n.port,o),c="".concat(a,":").concat(s),u=AI((r=n.query)!==null&&r!==void 0?r:EI(n.resourceName),e);return new Fw(o,i,s,c,u)}ht.parseDatabaseUrl=OI;function EI(e){if(typeof e!="string")return null;var r=Uw(e.split("?"),2),t=r[1];return t}function SI(e){return e=e.trim(),e.includes("://")?{schemeMissing:!1,url:e}:{schemeMissing:!0,url:"none://".concat(e)}}function TI(e){return e!=null?(e=e.trim(),e.charAt(e.length-1)===":"&&(e=e.substring(0,e.length-1)),e):null}function PI(e,r){if(e==null)throw new Error("Unable to extract host from null or undefined URL");return e.trim()}function CI(e,r){var t=typeof e=="string"?parseInt(e,10):e;return t!=null&&!isNaN(t)?t:xw(r)}function AI(e,r){var t=e!=null?II(e):null,n={};return t!=null&&t.split("&").forEach(function(o){var i=o.split("=");if(i.length!==2)throw new Error("Invalid parameters: '".concat(i.toString(),"' in URL '").concat(r,"'."));var a=lb(i[0],"key",r),s=lb(i[1],"value",r);if(n[a]!==void 0)throw new Error("Duplicated query parameters with key '".concat(a,"' in URL '").concat(r,"'"));n[a]=s}),n}function II(e){return e=(e??"").trim(),(e==null?void 0:e.charAt(0))==="?"&&(e=e.substring(1,e.length)),e}function lb(e,r,t){if(e=(e??"").trim(),e==="")throw new Error("Illegal empty ".concat(r," in URL query '").concat(t,"'"));return e}function Bw(e){var r=e.charAt(0)==="[",t=e.charAt(e.length-1)==="]";if(!r&&!t)return"[".concat(e,"]");if(r&&t)return e;throw new Error("Illegal IPv6 address ".concat(e))}function RI(e){if(e===""||e==null)throw new Error("Illegal host ".concat(e));var r=e.includes(":");return r?Bw(e):e}function $I(e,r){return"".concat(e,":").concat(r)}ht.formatIPv4Address=$I;function jI(e,r){var t=Bw(e);return"".concat(t,":").concat(r)}ht.formatIPv6Address=jI;function xw(e){return e==="http"?gI:e==="https"?wI:mI}ht.defaultPortForScheme=xw;function NI(e){function r(s,c){var u=s.indexOf(c);return u>=0?[s.substring(0,u),s[u],s.substring(u+1)]:[s,"",""]}function t(s,c){var u=s.lastIndexOf(c);return u>=0?[s.substring(0,u),s[u],s.substring(u+1)]:["","",s]}function n(s,c,u){var l=r(s,c),d=r(l[2],u);return[d[0],d[2]]}function o(s){var c={},u;u=t(s,"@"),u[1]==="@"&&(c.userInfo=decodeURIComponent(u[0]),s=u[2]);var l=Uw(n(s,"[","]"),2),d=l[0],h=l[1];return d!==""?(c.host=d,u=r(h,":")):(u=r(s,":"),c.host=u[0]),u[1]===":"&&(c.port=u[2]),c}var i={},a;return a=r(e,":"),a[1]===":"&&(i.scheme=decodeURIComponent(a[0]),e=a[2]),a=r(e,"#"),a[1]==="#"&&(i.fragment=decodeURIComponent(a[2]),e=a[0]),a=r(e,"?"),a[1]==="?"&&(i.query=a[2],e=a[0]),e.startsWith("//")?(a=r(e.substr(2),"/"),i=Lc(Lc({},i),o(a[0])),i.path=a[1]+a[2]):i.path=e,i}var Ma={},kI=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),MI=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),DI=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&kI(r,e,t);return MI(r,e),r};Object.defineProperty(Ma,"__esModule",{value:!0});Ma.ServerAddress=void 0;var Kh=ee,LI=DI(ht),UI=function(){function e(r,t,n,o){this._host=(0,Kh.assertString)(r,"host"),this._resolved=t!=null?(0,Kh.assertString)(t,"resolved"):null,this._port=(0,Kh.assertNumber)(n,"port"),this._hostPort=o,this._stringValue=t!=null?"".concat(o,"(").concat(t,")"):"".concat(o)}return e.prototype.host=function(){return this._host},e.prototype.resolvedHost=function(){return this._resolved!=null?this._resolved:this._host},e.prototype.port=function(){return this._port},e.prototype.resolveWith=function(r){return new e(this._host,r,this._port,this._hostPort)},e.prototype.asHostPort=function(){return this._hostPort},e.prototype.asKey=function(){return this._hostPort},e.prototype.toString=function(){return this._stringValue},e.fromUrl=function(r){var t=LI.parseDatabaseUrl(r);return new e(t.host,null,t.port,t.hostAndPort)},e}();Ma.ServerAddress=UI;var ko={},v_={};Object.defineProperty(v_,"__esModule",{value:!0});var FI=function(){function e(){}return e.prototype.resolve=function(){throw new Error("Abstract function")},e.prototype._resolveToItself=function(r){return Promise.resolve([r])},e}();v_.default=FI;var Ol={};Object.defineProperty(Ol,"__esModule",{value:!0});var BI=Ma;function xI(e){return Promise.resolve([e])}var VI=function(){function e(r){this._resolverFunction=r??xI}return e.prototype.resolve=function(r){var t=this;return new Promise(function(n){return n(t._resolverFunction(r.asHostPort()))}).then(function(n){if(!Array.isArray(n))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(n));return n.map(function(o){return BI.ServerAddress.fromUrl(o)})})},e}();Ol.default=VI;var Vw=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ko,"__esModule",{value:!0});ko.ConfiguredCustomResolver=ko.BaseHostNameResolver=void 0;var WI=Vw(v_);ko.BaseHostNameResolver=WI.default;var zI=Vw(Ol);ko.ConfiguredCustomResolver=zI.default;var Ww={},El={};Object.defineProperty(El,"__esModule",{value:!0});El.fromVersion=void 0;function HI(e,r){r===void 0&&(r=function(){return{get userAgent(){var i;return i==null?void 0:i.userAgent}}});var t=r(),n=t.userAgent!=null?t.userAgent.split("(")[1].split(")")[0]:void 0,o=t.userAgent||void 0;return{product:"neo4j-javascript/".concat(e),platform:n,languageDetails:o}}El.fromVersion=HI;(function(e){var r=f&&f.__createBinding||(Object.create?function(n,o,i,a){a===void 0&&(a=i);var s=Object.getOwnPropertyDescriptor(o,i);(!s||("get"in s?!o.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(n,a,s)}:function(n,o,i,a){a===void 0&&(a=i),n[a]=o[i]}),t=f&&f.__exportStar||function(n,o){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&r(o,n,i)};Object.defineProperty(e,"__esModule",{value:!0}),t(El,e)})(Ww);var zw={},Lr={};Object.defineProperty(Lr,"__esModule",{value:!0});Lr.DEFAULT_ACQUISITION_TIMEOUT=Lr.DEFAULT_MAX_SIZE=void 0;var Cc=100;Lr.DEFAULT_MAX_SIZE=Cc;var Ac=60*1e3;Lr.DEFAULT_ACQUISITION_TIMEOUT=Ac;var qI=function(){function e(r,t){this.maxSize=fb(r,Cc),this.acquisitionTimeout=fb(t,Ac)}return e.defaultConfig=function(){return new e(Cc,Ac)},e.fromDriverConfig=function(r){var t=tv(r.maxConnectionPoolSize)?r.maxConnectionPoolSize:Cc,n=tv(r.connectionAcquisitionTimeout)?r.connectionAcquisitionTimeout:Ac;return new e(t,n)},e}();Lr.default=qI;function fb(e,r){return tv(e)?e:r}function tv(e){return e===0||e!=null}var __={},gt=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},wt=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},GI=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(__,"__esModule",{value:!0});var KI=GI(Lr),db=ue,YI=Gn,ZI=function(){function e(r){var t=r.create,n=t===void 0?function(S,E,T){return gt(w,void 0,void 0,function(){return wt(this,function(C){switch(C.label){case 0:return[4,Promise.reject(new Error("Not implemented"))];case 1:return[2,C.sent()]}})})}:t,o=r.destroy,i=o===void 0?function(S){return gt(w,void 0,void 0,function(){return wt(this,function(E){switch(E.label){case 0:return[4,Promise.resolve()];case 1:return[2,E.sent()]}})})}:o,a=r.validateOnAcquire,s=a===void 0?function(S,E){return!0}:a,c=r.validateOnRelease,u=c===void 0?function(S){return!0}:c,l=r.installIdleObserver,d=l===void 0?function(S,E){}:l,h=r.removeIdleObserver,p=h===void 0?function(S){}:h,v=r.config,y=v===void 0?KI.default.defaultConfig():v,_=r.log,b=_===void 0?YI.Logger.noOp():_,w=this;this._create=n,this._destroy=i,this._validateOnAcquire=s,this._validateOnRelease=u,this._installIdleObserver=d,this._removeIdleObserver=p,this._maxSize=y.maxSize,this._acquisitionTimeout=y.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=b,this._closed=!1}return e.prototype.acquire=function(r,t,n){return gt(this,void 0,void 0,function(){var o,i,a,s=this;return wt(this,function(c){switch(c.label){case 0:return o=t.asKey(),i=this._acquireRequests,a=i[o],a==null&&(i[o]=[]),[4,new Promise(function(u,l){var d=setTimeout(function(){var p=i[o];if(p!=null&&(i[o]=p.filter(function(_){return _!==h})),!h.isCompleted()){var v=s.activeResourceCount(t),y=s.has(t)?s._pools[o].length:0;h.reject((0,db.newError)("Connection acquisition timed out in ".concat(s._acquisitionTimeout," ms. Pool status: Active conn count = ").concat(v,", Idle conn count = ").concat(y,".")))}},s._acquisitionTimeout);typeof d=="object"&&d.unref();var h=new QI(o,r,n,u,l,d,s._log);i[o].push(h),s._processPendingAcquireRequests(t)})];case 1:return[2,c.sent()]}})})},e.prototype.purge=function(r){return gt(this,void 0,void 0,function(){return wt(this,function(t){switch(t.label){case 0:return[4,this._purgeKey(r.asKey())];case 1:return[2,t.sent()]}})})},e.prototype.apply=function(r,t){var n=r.asKey();n in this._pools&&this._pools[n].apply(t)},e.prototype.close=function(){return gt(this,void 0,void 0,function(){var r=this;return wt(this,function(t){switch(t.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(n){return gt(r,void 0,void 0,function(){return wt(this,function(o){switch(o.label){case 0:return[4,this._purgeKey(n)];case 1:return[2,o.sent()]}})})})).then()];case 1:return[2,t.sent()]}})})},e.prototype.keepAll=function(r){return gt(this,void 0,void 0,function(){var t,n,o,i=this;return wt(this,function(a){switch(a.label){case 0:return t=r.map(function(s){return s.asKey()}),n=Object.keys(this._pools),o=n.filter(function(s){return!t.includes(s)}),[4,Promise.all(o.map(function(s){return gt(i,void 0,void 0,function(){return wt(this,function(c){switch(c.label){case 0:return[4,this._purgeKey(s)];case 1:return[2,c.sent()]}})})})).then()];case 1:return[2,a.sent()]}})})},e.prototype.has=function(r){return r.asKey()in this._pools},e.prototype.activeResourceCount=function(r){var t;return(t=this._activeResourceCounts[r.asKey()])!==null&&t!==void 0?t:0},e.prototype._getOrInitializePoolFor=function(r){var t=this._pools[r];return t==null&&(t=new XI,this._pools[r]=t,this._pendingCreates[r]=0),t},e.prototype._acquire=function(r,t,n){return gt(this,void 0,void 0,function(){var o,i,a,s,c,l,u,l,d,h=this;return wt(this,function(p){switch(p.label){case 0:if(this._closed)throw(0,db.newError)("Pool is closed, it is no more able to serve requests.");if(o=t.asKey(),i=this._getOrInitializePoolFor(o),n)return[3,10];p.label=1;case 1:if(!(i.length>0))return[3,10];if(a=i.pop(),a==null)return[3,1];hb(o,this._activeResourceCounts),this._removeIdleObserver!=null&&this._removeIdleObserver(a),s=!1,p.label=2;case 2:return p.trys.push([2,4,,6]),[4,this._validateOnAcquire(r,a)];case 3:return s=p.sent(),[3,6];case 4:return c=p.sent(),Yh(o,this._activeResourceCounts),i.removeInUse(a),[4,this._destroy(a)];case 5:throw p.sent(),c;case 6:return s?(this._log.isDebugEnabled()&&this._log.debug("".concat(a," acquired from the pool ").concat(o)),[2,{resource:a,pool:i}]):[3,7];case 7:return Yh(o,this._activeResourceCounts),i.removeInUse(a),[4,this._destroy(a)];case 8:p.sent(),p.label=9;case 9:return[3,1];case 10:if(this._maxSize>0&&(l=this.activeResourceCount(t)+this._pendingCreates[o],l>=this._maxSize))return[2,{resource:null,pool:i}];this._pendingCreates[o]=this._pendingCreates[o]+1,p.label=11;case 11:return p.trys.push([11,,15,16]),l=this.activeResourceCount(t)+i.length,l>=this._maxSize&&n?(d=i.pop(),d==null?[3,13]:(this._removeIdleObserver!=null&&this._removeIdleObserver(d),i.removeInUse(d),[4,this._destroy(d)])):[3,13];case 12:p.sent(),p.label=13;case 13:return[4,this._create(r,t,function(v,y){return gt(h,void 0,void 0,function(){return wt(this,function(_){switch(_.label){case 0:return[4,this._release(v,y,i)];case 1:return[2,_.sent()]}})})})];case 14:return u=p.sent(),i.pushInUse(u),hb(o,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(u," created for the pool ").concat(o)),[3,16];case 15:return this._pendingCreates[o]=this._pendingCreates[o]-1,[7];case 16:return[2,{resource:u,pool:i}]}})})},e.prototype._release=function(r,t,n){return gt(this,void 0,void 0,function(){var o,i=this;return wt(this,function(a){switch(a.label){case 0:o=r.asKey(),a.label=1;case 1:return a.trys.push([1,,9,10]),n.isActive()?[4,this._validateOnRelease(t)]:[3,6];case 2:return a.sent()?[3,4]:(this._log.isDebugEnabled()&&this._log.debug("".concat(t," destroyed and can't be released to the pool ").concat(o," because it is not functional")),n.removeInUse(t),[4,this._destroy(t)]);case 3:return a.sent(),[3,5];case 4:this._installIdleObserver!=null&&this._installIdleObserver(t,{onError:function(s){i._log.debug("Idle connection ".concat(t," destroyed because of error: ").concat(s));var c=i._pools[o];c!=null&&(i._pools[o]=c.filter(function(u){return u!==t}),c.removeInUse(t)),i._destroy(t).catch(function(){})}}),n.push(t),this._log.isDebugEnabled()&&this._log.debug("".concat(t," released to the pool ").concat(o)),a.label=5;case 5:return[3,8];case 6:return this._log.isDebugEnabled()&&this._log.debug("".concat(t," destroyed and can't be released to the pool ").concat(o," because pool has been purged")),n.removeInUse(t),[4,this._destroy(t)];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:return Yh(o,this._activeResourceCounts),this._processPendingAcquireRequests(r),[7];case 10:return[2]}})})},e.prototype._purgeKey=function(r){return gt(this,void 0,void 0,function(){var t,n,o;return wt(this,function(i){switch(i.label){case 0:if(t=this._pools[r],n=[],t==null)return[3,2];for(;t.length>0;)o=t.pop(),o!=null&&(this._removeIdleObserver!=null&&this._removeIdleObserver(o),n.push(this._destroy(o)));return t.close(),delete this._pools[r],[4,Promise.all(n)];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype._processPendingAcquireRequests=function(r){var t=this,n=r.asKey(),o=this._acquireRequests[n];if(o!=null){var i=o.shift();i!=null?this._acquire(i.context,r,i.requireNew).catch(function(a){return i.reject(a),{resource:null,pool:null}}).then(function(a){var s=a.resource,c=a.pool;s!=null&&c!=null?i.isCompleted()?t._release(r,s,c).catch(function(u){t._log.isDebugEnabled()&&t._log.debug("".concat(s," could not be release back to the pool. Cause: ").concat(u))}):i.resolve(s):i.isCompleted()||(t._acquireRequests[n]==null&&(t._acquireRequests[n]=[]),t._acquireRequests[n].unshift(i))}).catch(function(a){return i.reject(a)}):delete this._acquireRequests[n]}},e}();function hb(e,r){var t,n=(t=r[e])!==null&&t!==void 0?t:0;r[e]=n+1}function Yh(e,r){var t,n=(t=r[e])!==null&&t!==void 0?t:0,o=n-1;o>0?r[e]=o:delete r[e]}var QI=function(){function e(r,t,n,o,i,a,s){this._key=r,this._context=t,this._resolve=o,this._reject=i,this._timeoutId=a,this._log=s,this._completed=!1,this._config=n??{}}return Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requireNew",{get:function(){var r;return(r=this._config.requireNew)!==null&&r!==void 0?r:!1},enumerable:!1,configurable:!0}),e.prototype.isCompleted=function(){return this._completed},e.prototype.resolve=function(r){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(r," acquired from the pool ").concat(this._key)),this._resolve(r))},e.prototype.reject=function(r){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(r))},e}(),XI=function(){function e(){this._active=!0,this._elements=[],this._elementsInUse=new Set}return e.prototype.isActive=function(){return this._active},e.prototype.close=function(){this._active=!1,this._elements=[],this._elementsInUse=new Set},e.prototype.filter=function(r){return this._elements=this._elements.filter(r),this},e.prototype.apply=function(r){this._elements.forEach(r),this._elementsInUse.forEach(r)},Object.defineProperty(e.prototype,"length",{get:function(){return this._elements.length},enumerable:!1,configurable:!0}),e.prototype.pop=function(){var r=this._elements.pop();return r!=null&&this._elementsInUse.add(r),r},e.prototype.push=function(r){return this._elementsInUse.delete(r),this._elements.push(r)},e.prototype.pushInUse=function(r){this._elementsInUse.add(r)},e.prototype.removeInUse=function(r){this._elementsInUse.delete(r)},e}();__.default=ZI;(function(e){var r=f&&f.__createBinding||(Object.create?function(s,c,u,l){l===void 0&&(l=u);var d=Object.getOwnPropertyDescriptor(c,u);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(s,l,d)}:function(s,c,u,l){l===void 0&&(l=u),s[l]=c[u]}),t=f&&f.__setModuleDefault||(Object.create?function(s,c){Object.defineProperty(s,"default",{enumerable:!0,value:c})}:function(s,c){s.default=c}),n=f&&f.__importStar||function(s){if(s&&s.__esModule)return s;var c={};if(s!=null)for(var u in s)u!=="default"&&Object.prototype.hasOwnProperty.call(s,u)&&r(c,s,u);return t(c,s),c},o=f&&f.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_MAX_SIZE=e.DEFAULT_ACQUISITION_TIMEOUT=e.PoolConfig=e.Pool=void 0;var i=n(Lr);e.PoolConfig=i.default,Object.defineProperty(e,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return i.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(e,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return i.DEFAULT_MAX_SIZE}});var a=o(__);e.Pool=a.default,e.default=a.default})(zw);var JI=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),eR=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),at=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&JI(r,e,t);return eR(r,e),r};Object.defineProperty(ne,"__esModule",{value:!0});ne.pool=ne.boltAgent=ne.objectUtil=ne.resolver=ne.serverAddress=ne.urlUtil=ne.logger=ne.transactionExecutor=ne.txConfig=ne.connectionHolder=ne.constants=ne.bookmarks=ne.observer=ne.temporalUtil=ne.util=void 0;var tR=at(ee);ne.util=tR;var rR=at(f_);ne.temporalUtil=rR;var nR=at(Dr);ne.observer=nR;var oR=at(Yr);ne.bookmarks=oR;var iR=at(x);ne.constants=iR;var aR=at(Lt);ne.connectionHolder=aR;var uR=at(Zo);ne.txConfig=uR;var sR=at(ka);ne.transactionExecutor=sR;var cR=at(Gn);ne.logger=cR;var lR=at(ht);ne.urlUtil=lR;var fR=at(Ma);ne.serverAddress=fR;var dR=at(ko);ne.resolver=dR;var hR=at(hr);ne.objectUtil=hR;var pR=at(Ww);ne.boltAgent=pR;var vR=at(zw);ne.pool=vR;var Ee={},wa=f&&f.__assign||function(){return wa=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},wa.apply(this,arguments)},_R=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),yR=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),bR=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&_R(r,e,t);return yR(r,e),r},mR=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},gR=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.buildNotificationsFromMetadata=Ee.buildGqlStatusObjectFromMetadata=Ee.polyfillNotification=Ee.polyfillGqlStatusObject=Ee.GqlStatusObject=Ee.Notification=Ee.notificationClassification=Ee.notificationCategory=Ee.notificationSeverityLevel=void 0;var wR=bR(Ft),Zh=ne,ea=s_,rv={WARNING:{gql_status:"01N42",status_description:"warn: unknown warning"},NO_DATA:{gql_status:"02N42",status_description:"note: no data - unknown subcondition"},INFORMATION:{gql_status:"03N42",status_description:"info: unknown notification"}},Da={WARNING:"WARNING",INFORMATION:"INFORMATION",UNKNOWN:"UNKNOWN"};Ee.notificationSeverityLevel=Da;Object.freeze(Da);var OR=Object.values(Da),Sl={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",DEPRECATION:"DEPRECATION",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",GENERIC:"GENERIC",SCHEMA:"SCHEMA",UNKNOWN:"UNKNOWN"};Ee.notificationCategory=Sl;Object.freeze(Sl);var ER=Object.values(Sl),Hw=Sl;Ee.notificationClassification=Hw;var Tl=function(){function e(r){this.code=r.code,this.title=r.title,this.description=r.description,this.severity=r.severity,this.position=Kw(r.position),this.severityLevel=Yw(r.severity),this.rawSeverityLevel=r.severity,this.category=Zw(r.category),this.rawCategory=r.category}return e}();Ee.Notification=Tl;var Pn=function(){function e(r){var t;this.gqlStatus=r.gql_status,this.statusDescription=r.status_description,this.diagnosticRecord=(t=r.diagnostic_record)!==null&&t!==void 0?t:{},this.position=this.diagnosticRecord._position!=null?Kw(this.diagnosticRecord._position):void 0,this.severity=Yw(this.diagnosticRecord._severity),this.rawSeverity=this.diagnosticRecord._severity,this.classification=Zw(this.diagnosticRecord._classification),this.rawClassification=this.diagnosticRecord._classification,this.isNotification=r.neo4j_code!=null,Object.freeze(this)}return Object.defineProperty(e.prototype,"diagnosticRecordAsJsonString",{get:function(){return wR.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),e}();Ee.GqlStatusObject=Pn;function qw(e){var r,t,n;if(e.neo4j_code!=null)return new Tl({code:e.neo4j_code,title:e.title,description:e.description,severity:(r=e.diagnostic_record)===null||r===void 0?void 0:r._severity,category:(t=e.diagnostic_record)===null||t===void 0?void 0:t._classification,position:(n=e.diagnostic_record)===null||n===void 0?void 0:n._position})}Ee.polyfillNotification=qw;function Gw(e){var r,t=e.severity===Da.WARNING?rv.WARNING:rv.INFORMATION,n={gql_status:t.gql_status,status_description:(r=e.description)!==null&&r!==void 0?r:t.status_description,neo4j_code:e.code,title:e.title,diagnostic_record:wa({},ea.rawPolyfilledDiagnosticRecord)};return e.severity!=null&&(n.diagnostic_record._severity=e.severity),e.category!=null&&(n.diagnostic_record._classification=e.category),e.position!=null&&(n.diagnostic_record._position=e.position),new Pn(n)}Ee.polyfillGqlStatusObject=Gw;var ta={SUCCESS:new Pn({gql_status:"00000",status_description:"note: successful completion",diagnostic_record:ea.rawPolyfilledDiagnosticRecord}),NO_DATA:new Pn({gql_status:"02000",status_description:"note: no data",diagnostic_record:ea.rawPolyfilledDiagnosticRecord}),NO_DATA_UNKNOWN_SUBCONDITION:new Pn(wa(wa({},rv.NO_DATA),{diagnostic_record:ea.rawPolyfilledDiagnosticRecord})),OMITTED_RESULT:new Pn({gql_status:"00001",status_description:"note: successful completion - omitted result",diagnostic_record:ea.rawPolyfilledDiagnosticRecord})};Object.freeze(ta);function SR(e){var r,t;function n(a){return(a==null?void 0:a.have_records_streamed)===!0?ta.SUCCESS:(a==null?void 0:a.has_keys)===!1?ta.OMITTED_RESULT:(a==null?void 0:a.pulled)===!0?ta.NO_DATA:ta.NO_DATA_UNKNOWN_SUBCONDITION}if(e.statuses!=null)return e.statuses.map(function(a){return new Pn(a)});var o=n(e.stream_summary),i=gR([o],mR((t=(r=e.notifications)===null||r===void 0?void 0:r.map(Gw))!==null&&t!==void 0?t:[]),!1);return i.sort(function(a,s){return pb(a)-pb(s)})}Ee.buildGqlStatusObjectFromMetadata=SR;var TR=Object.freeze({"02":0,"01":1,"00":2});function pb(e){var r,t,n=(r=e.gqlStatus)===null||r===void 0?void 0:r.slice(0,2);return(t=TR[n])!==null&&t!==void 0?t:9999}function PR(e){return e.notifications!=null?e.notifications.map(function(r){return new Tl(r)}):e.statuses!=null?e.statuses.map(qw).filter(function(r){return r!=null}):[]}Ee.buildNotificationsFromMetadata=PR;function Kw(e){return e==null?{}:{offset:Zh.util.toNumber(e.offset),line:Zh.util.toNumber(e.line),column:Zh.util.toNumber(e.column)}}function Yw(e){return OR.includes(e)?e:Da.UNKNOWN}function Zw(e){return ER.includes(e)?e:Hw.UNKNOWN}Ee.default=Tl;Object.defineProperty(Je,"__esModule",{value:!0});Je.Stats=Je.QueryStatistics=Je.ProfiledPlan=Je.Plan=Je.ServerInfo=Je.queryType=void 0;var nv=ne,vb=Ee,CR=function(){function e(r,t,n,o){var i,a,s;this.query={text:r,parameters:t},this.queryType=n.type,this.counters=new Qw((i=n.stats)!==null&&i!==void 0?i:{}),this.updateStatistics=this.counters,this.plan=n.plan!=null||n.profile!=null?new ov((a=n.plan)!==null&&a!==void 0?a:n.profile):!1,this.profile=n.profile!=null?new iv(n.profile):!1,this.notifications=(0,vb.buildNotificationsFromMetadata)(n),this.gqlStatusObjects=(0,vb.buildGqlStatusObjectFromMetadata)(n),this.server=new Xw(n.server,o),this.resultConsumedAfter=n.result_consumed_after,this.resultAvailableAfter=n.result_available_after,this.database={name:(s=n.db)!==null&&s!==void 0?s:null}}return e.prototype.hasPlan=function(){return this.plan instanceof ov},e.prototype.hasProfile=function(){return this.profile instanceof iv},e}(),ov=function(){function e(r){this.operatorType=r.operatorType,this.identifiers=r.identifiers,this.arguments=r.args,this.children=r.children!=null?r.children.map(function(t){return new e(t)}):[]}return e}();Je.Plan=ov;var iv=function(){function e(r){this.operatorType=r.operatorType,this.identifiers=r.identifiers,this.arguments=r.args,this.dbHits=po("dbHits",r),this.rows=po("rows",r),this.pageCacheMisses=po("pageCacheMisses",r),this.pageCacheHits=po("pageCacheHits",r),this.pageCacheHitRatio=po("pageCacheHitRatio",r),this.time=po("time",r),this.children=r.children!=null?r.children.map(function(t){return new e(t)}):[]}return e.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},e}();Je.ProfiledPlan=iv;var AR=function(){function e(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0}return e}();Je.Stats=AR;var Qw=function(){function e(r){var t=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(r).forEach(function(n){var o=n.replace(/(-\w)/g,function(i){return i[1].toUpperCase()});o in t._stats?t._stats[o]=nv.util.toNumber(r[n]):o==="systemUpdates"?t._systemUpdates=nv.util.toNumber(r[n]):o==="containsSystemUpdates"?t._containsSystemUpdates=r[n]:o==="containsUpdates"&&(t._containsUpdates=r[n])}),this._stats=Object.freeze(this._stats)}return e.prototype.containsUpdates=function(){var r=this;return this._containsUpdates!==void 0?this._containsUpdates:Object.keys(this._stats).reduce(function(t,n){return t+r._stats[n]},0)>0},e.prototype.updates=function(){return this._stats},e.prototype.containsSystemUpdates=function(){return this._containsSystemUpdates!==void 0?this._containsSystemUpdates:this._systemUpdates>0},e.prototype.systemUpdates=function(){return this._systemUpdates},e}();Je.QueryStatistics=Qw;var Xw=function(){function e(r,t){r!=null&&(this.address=r.address,this.agent=r.version),this.protocolVersion=t}return e}();Je.ServerInfo=Xw;function po(e,r,t){if(t===void 0&&(t=0),r!==!1&&e in r){var n=r[e];return nv.util.toNumber(n)}else return t}var IR={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"};Je.queryType=IR;Je.default=CR;var pr={};Object.defineProperty(pr,"__esModule",{value:!0});pr.notificationFilterDisabledClassification=pr.notificationFilterDisabledCategory=pr.notificationFilterMinimumSeverityLevel=void 0;var Jw={OFF:"OFF",WARNING:"WARNING",INFORMATION:"INFORMATION"};pr.notificationFilterMinimumSeverityLevel=Jw;Object.freeze(Jw);var y_={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",DEPRECATION:"DEPRECATION",GENERIC:"GENERIC",SCHEMA:"SCHEMA"};pr.notificationFilterDisabledCategory=y_;Object.freeze(y_);var RR=y_;pr.notificationFilterDisabledClassification=RR;var $R=function(){function e(){throw this.minimumSeverityLevel=void 0,this.disabledCategories=void 0,this.disabledClassifications=void 0,new Error("Not implemented")}return e}();pr.default=$R;var La={},dn=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},hn=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},jR=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},eO;Object.defineProperty(La,"__esModule",{value:!0});var NR=jR(Je),tO=ne,Fi=ue,kR=tO.connectionHolder.EMPTY_CONNECTION_HOLDER,MR=function(e){console.log("Uncaught error when processing result: "+e)},DR=function(e){},LR=function(e){},UR=function(){function e(r,t,n,o,i){i===void 0&&(i={high:Number.MAX_VALUE,low:Number.MAX_VALUE}),this[eO]="Result",this._stack=FR(),this._streamObserverPromise=r,this._p=null,this._query=t,this._parameters=n??{},this._connectionHolder=o??kR,this._keys=null,this._summary=null,this._error=null,this._watermarks=i}return e.prototype.keys=function(){var r=this;return this._keys!==null?Promise.resolve(this._keys):this._error!==null?Promise.reject(this._error):new Promise(function(t,n){r._streamObserverPromise.then(function(o){return o.subscribe(r._decorateObserver({onKeys:function(i){return t(i)},onError:function(i){return n(i)}}))}).catch(n)})},e.prototype.summary=function(){var r=this;return this._summary!==null?Promise.resolve(this._summary):this._error!==null?Promise.reject(this._error):new Promise(function(t,n){r._streamObserverPromise.then(function(o){o.cancel(),o.subscribe(r._decorateObserver({onCompleted:function(i){return t(i)},onError:function(i){return n(i)}}))}).catch(n)})},e.prototype._getOrCreatePromise=function(){var r=this;return this._p==null&&(this._p=new Promise(function(t,n){var o=[],i={onNext:function(a){o.push(a)},onCompleted:function(a){t({records:o,summary:a})},onError:function(a){n(a)}};r.subscribe(i)})),this._p},e.prototype[Symbol.asyncIterator]=function(){var r=this;if(!this.isOpen()){var t=(0,Fi.newError)("Result is already consumed");return{next:function(){return Promise.reject(t)},peek:function(){return Promise.reject(t)}}}var n={paused:!0,firstRun:!0,finished:!1},o=function(){var s,c;if(n.streaming!=null){var u=(c=(s=n.queuedObserver)===null||s===void 0?void 0:s.size)!==null&&c!==void 0?c:0,l=u>=r._watermarks.high,d=u<=r._watermarks.low;l&&!n.paused?(n.paused=!0,n.streaming.pause()):(d&&n.paused||n.firstRun&&!l)&&(n.firstRun=!1,n.paused=!1,n.streaming.resume())}},i=function(){return dn(r,void 0,void 0,function(){var s;return hn(this,function(c){switch(c.label){case 0:return n.queuedObserver!==void 0?[3,2]:(n.queuedObserver=this._createQueuedResultObserver(o),s=n,[4,this._subscribe(n.queuedObserver,!0).catch(function(){})]);case 1:s.streaming=c.sent(),o(),c.label=2;case 2:return[2,n.queuedObserver]}})})},a=function(s){if(s===void 0)throw(0,Fi.newError)("InvalidState: Result stream finished without Summary",Fi.PROTOCOL_ERROR);return!0};return{next:function(){return dn(r,void 0,void 0,function(){var s,c;return hn(this,function(u){switch(u.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:n.summary}]:[4,i()];case 1:return s=u.sent(),[4,s.dequeue()];case 2:return c=u.sent(),c.done===!0&&(n.finished=c.done,n.summary=c.value),[2,c]}})})},return:function(s){return dn(r,void 0,void 0,function(){var c,u,l;return hn(this,function(d){switch(d.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:s??n.summary}]:((l=n.streaming)===null||l===void 0||l.cancel(),[4,i()]);case 1:return c=d.sent(),[4,c.dequeueUntilDone()];case 2:return u=d.sent(),n.finished=!0,u.value=s??u.value,n.summary=u.value,[2,u]}})})},peek:function(){return dn(r,void 0,void 0,function(){var s;return hn(this,function(c){switch(c.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:n.summary}]:[4,i()];case 1:return s=c.sent(),[4,s.head()];case 2:return[2,c.sent()]}})})}}},e.prototype.then=function(r,t){return this._getOrCreatePromise().then(r,t)},e.prototype.catch=function(r){return this._getOrCreatePromise().catch(r)},e.prototype.finally=function(r){return this._getOrCreatePromise().finally(r)},e.prototype.subscribe=function(r){this._subscribe(r).catch(function(){})},e.prototype.isOpen=function(){return this._summary===null&&this._error===null},e.prototype._subscribe=function(r,t){t===void 0&&(t=!1);var n=this._decorateObserver(r);return this._streamObserverPromise.then(function(o){return t&&o.pause(),o.subscribe(n),o}).catch(function(o){return n.onError!=null&&n.onError(o),Promise.reject(o)})},e.prototype._decorateObserver=function(r){var t=this,n,o,i,a=(n=r.onCompleted)!==null&&n!==void 0?n:DR,s=(o=r.onError)!==null&&o!==void 0?o:MR,c=(i=r.onKeys)!==null&&i!==void 0?i:LR,u=function(h){t._releaseConnectionAndGetSummary(h).then(function(p){return t._summary!==null?a.call(r,t._summary):(t._summary=p,a.call(r,p))}).catch(s)},l=function(h){t._connectionHolder.releaseConnection().then(function(){BR(h,t._stack),t._error=h,s.call(r,h)}).catch(s)},d=function(h){return t._keys=h,c.call(r,h)};return{onNext:r.onNext!=null?r.onNext.bind(r):void 0,onKeys:d,onCompleted:u,onError:l}},e.prototype._cancel=function(){this._summary===null&&this._error===null&&this._streamObserverPromise.then(function(r){return r.cancel()}).catch(function(){})},e.prototype._releaseConnectionAndGetSummary=function(r){var t=tO.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),n=t.validatedQuery,o=t.params,i=this._connectionHolder;return i.getConnection().then(function(a){return i.releaseConnection().then(function(){return a==null?void 0:a.getProtocolVersion()})},function(a){}).then(function(a){return new NR.default(n,o,r,a)})},e.prototype._createQueuedResultObserver=function(r){var t=this;function n(){var u={};return u.promise=new Promise(function(l,d){u.resolve=l,u.reject=d}),u}function o(u){return u instanceof Error}function i(){var u;return dn(this,void 0,void 0,function(){var l;return hn(this,function(d){switch(d.label){case 0:if(a.length>0){if(l=(u=a.shift())!==null&&u!==void 0?u:(0,Fi.newError)("Unexpected empty buffer",Fi.PROTOCOL_ERROR),r(),o(l))throw l;return[2,l]}return s.resolvable=n(),[4,s.resolvable.promise];case 1:return[2,d.sent()]}})})}var a=[],s={resolvable:null},c={onNext:function(u){c._push({done:!1,value:u})},onCompleted:function(u){c._push({done:!0,value:u})},onError:function(u){c._push(u)},_push:function(u){if(s.resolvable!==null){var l=s.resolvable;s.resolvable=null,o(u)?l.reject(u):l.resolve(u)}else a.push(u),r()},dequeue:i,dequeueUntilDone:function(){return dn(t,void 0,void 0,function(){var u;return hn(this,function(l){switch(l.label){case 0:return[4,i()];case 1:return u=l.sent(),u.done===!0?[2,u]:[3,0];case 2:return[2]}})})},head:function(){return dn(t,void 0,void 0,function(){var u,u,l;return hn(this,function(d){switch(d.label){case 0:if(a.length>0){if(u=a[0],o(u))throw u;return[2,u]}s.resolvable=n(),d.label=1;case 1:return d.trys.push([1,3,4,5]),[4,s.resolvable.promise];case 2:return u=d.sent(),a.unshift(u),[2,u];case 3:throw l=d.sent(),a.unshift(l),l;case 4:return r(),[7];case 5:return[2]}})})},get size(){return a.length}};return c},e}();eO=Symbol.toStringTag;function FR(){var e=new Error("");return e.stack!=null?e.stack.replace(/^Error(\n\r)*/,""):null}function BR(e,r){r!=null&&(e.stack=e.toString()+`
`+r)}La.default=UR;var Pl={};Object.defineProperty(Pl,"__esModule",{value:!0});var xR=function(){function e(r,t,n){this.keys=r,this.records=t,this.summary=n}return e}();Pl.default=xR;var Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.Releasable=void 0;var VR=function(){function e(){}return e.prototype.release=function(){throw new Error("Not implemented")},e}();Ua.Releasable=VR;var WR=function(){function e(){}return e.prototype.acquireConnection=function(r){throw Error("Not implemented")},e.prototype.supportsMultiDb=function(){throw Error("Not implemented")},e.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},e.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},e.prototype.supportsSessionAuth=function(){throw Error("Not implemented")},e.prototype.SSREnabled=function(){return!1},e.prototype.verifyConnectivityAndGetServerInfo=function(r){throw Error("Not implemented")},e.prototype.verifyAuthentication=function(r){throw Error("Not implemented")},e.prototype.getNegotiatedProtocolVersion=function(){throw Error("Not Implemented")},e.prototype.close=function(){throw Error("Not implemented")},e}();Ua.default=WR;var b_={};Object.defineProperty(b_,"__esModule",{value:!0});var zR=function(){function e(){}return e.prototype.beginTransaction=function(r){throw new Error("Not implemented")},e.prototype.run=function(r,t,n){throw new Error("Not implemented")},e.prototype.commitTransaction=function(r){throw new Error("Not implemented")},e.prototype.rollbackTransaction=function(r){throw new Error("Not implemented")},e.prototype.resetAndFlush=function(){throw new Error("Not implemented")},e.prototype.isOpen=function(){throw new Error("Not implemented")},e.prototype.getProtocolVersion=function(){throw new Error("Not implemented")},e.prototype.hasOngoingObservableRequests=function(){throw new Error("Not implemented")},e}();b_.default=zR;var Cl={},_b=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},yb=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},HR=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cl,"__esModule",{value:!0});var qR=ee,da=Lt,Ic=Yr,GR=Zo,jt=Dr,kt=ue,rO=HR(La),KR=function(){function e(r){var t=r.connectionHolder,n=r.onClose,o=r.onBookmarks,i=r.onConnection,a=r.reactive,s=r.fetchSize,c=r.impersonatedUser,u=r.highRecordWatermark,l=r.lowRecordWatermark,d=r.notificationFilter,h=r.apiTelemetryConfig,p=this;this._connectionHolder=t,this._reactive=a,this._state=Et.ACTIVE,this._onClose=n,this._onBookmarks=o,this._onConnection=i,this._onError=this._onErrorCallback.bind(this),this._fetchSize=s,this._onComplete=this._onCompleteCallback.bind(this),this._results=[],this._impersonatedUser=c,this._lowRecordWatermak=l,this._highRecordWatermark=u,this._bookmarks=Ic.Bookmarks.empty(),this._notificationFilter=d,this._apiTelemetryConfig=h,this._acceptActive=function(){},this._activePromise=new Promise(function(v,y){p._acceptActive=v})}return e.prototype._begin=function(r,t,n){var o=this;this._connectionHolder.getConnection().then(function(i){return _b(o,void 0,void 0,function(){var a,s=this;return yb(this,function(c){switch(c.label){case 0:return this._onConnection(),i==null?[3,2]:(a=this,[4,r()]);case 1:return a._bookmarks=c.sent(),[2,i.beginTransaction({bookmarks:this._bookmarks,txConfig:t,mode:this._connectionHolder.mode(),database:this._connectionHolder.database(),impersonatedUser:this._impersonatedUser,notificationFilter:this._notificationFilter,apiTelemetryConfig:this._apiTelemetryConfig,beforeError:function(u){n!=null&&n.onError(u),s._onError(u).catch(function(){})},afterComplete:function(u){n!=null&&n.onComplete(u),u.db!==void 0&&(n==null?void 0:n.onDB)!=null&&n.onDB(u.db),s._onComplete(u)}})];case 2:throw(0,kt.newError)("No connection available")}})})}).catch(function(i){n!=null&&n.onError(i),o._onError(i).catch(function(){})}).finally(function(){return o._acceptActive()})},e.prototype.run=function(r,t){var n=(0,qR.validateQueryAndParameters)(r,t),o=n.validatedQuery,i=n.params,a=this._state.run(o,i,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize,highRecordWatermark:this._highRecordWatermark,lowRecordWatermark:this._lowRecordWatermak,preparationJob:this._activePromise});return this._results.push(a),a},e.prototype.commit=function(){var r=this,t=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:function(n){return r._onCompleteCallback(n,r._bookmarks)},onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=t.state,this._onClose(),new Promise(function(n,o){t.result.subscribe({onCompleted:function(){return n()},onError:function(i){return o(i)}})})},e.prototype.rollback=function(){var r=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=r.state,this._onClose(),new Promise(function(t,n){r.result.subscribe({onCompleted:function(){return t()},onError:function(o){return n(o)}})})},e.prototype.isOpen=function(){return this._state===Et.ACTIVE},e.prototype.close=function(){return _b(this,void 0,void 0,function(){return yb(this,function(r){switch(r.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._onErrorCallback=function(r){return this._state===Et.FAILED?Promise.resolve(null):(this._state=Et.FAILED,this._onClose(),this._results.forEach(function(t){t.isOpen()&&t._streamObserverPromise.then(function(n){return n.onError(r)}).catch(function(n){})}),this._connectionHolder.releaseConnection())},e.prototype._onCompleteCallback=function(r,t){this._onBookmarks(new Ic.Bookmarks(r==null?void 0:r.bookmark),t??Ic.Bookmarks.empty(),r==null?void 0:r.db)},e}(),Et={ACTIVE:{commit:function(e){var r=e.connectionHolder,t=e.onError,n=e.onComplete,o=e.onConnection,i=e.pendingResults,a=e.preparationJob;return{result:bb(!0,r,t,n,o,i,a),state:Et.SUCCEEDED}},rollback:function(e){var r=e.connectionHolder,t=e.onError,n=e.onComplete,o=e.onConnection,i=e.pendingResults,a=e.preparationJob;return{result:bb(!1,r,t,n,o,i,a),state:Et.ROLLED_BACK}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError,i=t.onComplete,a=t.onConnection,s=t.reactive,c=t.fetchSize,u=t.highRecordWatermark,l=t.lowRecordWatermark,d=t.preparationJob,h=d??Promise.resolve(),p=n.getConnection().then(function(v){return h.then(function(){return v})}).then(function(v){if(a(),v!=null)return v.run(e,r,{bookmarks:Ic.Bookmarks.empty(),txConfig:GR.TxConfig.empty(),beforeError:o,afterComplete:i,reactive:s,fetchSize:c,highRecordWatermark:u,lowRecordWatermark:l});throw(0,kt.newError)("No connection available")}).catch(function(v){return new jt.FailedObserver({error:v,onError:o})});return Ht(p,e,r,n,u,l)}},FAILED:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:Ht(new jt.FailedObserver({error:(0,kt.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:t}),"COMMIT",{},r,0,0),state:Et.FAILED}},rollback:function(e){var r=e.connectionHolder;return e.onError,e.onComplete,{result:Ht(new jt.CompletedObserver,"ROLLBACK",{},r,0,0),state:Et.FAILED}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError;return t.onComplete,Ht(new jt.FailedObserver({error:(0,kt.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:o}),e,r,n,0,0)}},SUCCEEDED:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:Ht(new jt.FailedObserver({error:(0,kt.newError)("Cannot commit this transaction, because it has already been committed."),onError:t}),"COMMIT",{},da.EMPTY_CONNECTION_HOLDER,0,0),state:Et.SUCCEEDED,connectionHolder:r}},rollback:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:Ht(new jt.FailedObserver({error:(0,kt.newError)("Cannot rollback this transaction, because it has already been committed."),onError:t}),"ROLLBACK",{},da.EMPTY_CONNECTION_HOLDER,0,0),state:Et.SUCCEEDED,connectionHolder:r}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError;return t.onComplete,Ht(new jt.FailedObserver({error:(0,kt.newError)("Cannot run query in this transaction, because it has already been committed."),onError:o}),e,r,n,0,0)}},ROLLED_BACK:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:Ht(new jt.FailedObserver({error:(0,kt.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:t}),"COMMIT",{},r,0,0),state:Et.ROLLED_BACK}},rollback:function(e){var r=e.connectionHolder;return e.onError,e.onComplete,{result:Ht(new jt.FailedObserver({error:(0,kt.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},r,0,0),state:Et.ROLLED_BACK}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError;return t.onComplete,Ht(new jt.FailedObserver({error:(0,kt.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:o}),e,r,n,0,0)}}};function bb(e,r,t,n,o,i,a){var s=a??Promise.resolve(),c=r.getConnection().then(function(u){return s.then(function(){return u})}).then(function(u){return o(),i.forEach(function(l){return l._cancel()}),Promise.all(i.map(function(l){return l.summary()})).then(function(l){if(u!=null)return e?u.commitTransaction({beforeError:t,afterComplete:n}):u.rollbackTransaction({beforeError:t,afterComplete:n});throw(0,kt.newError)("No connection available")})}).catch(function(u){return new jt.FailedObserver({error:u,onError:t})});return new rO.default(c,e?"COMMIT":"ROLLBACK",{},r,{high:Number.MAX_VALUE,low:Number.MAX_VALUE})}function Ht(e,r,t,n,o,i){return n===void 0&&(n=da.EMPTY_CONNECTION_HOLDER),new rO.default(Promise.resolve(e),r,t,new da.ReadOnlyConnectionHolder(n??da.EMPTY_CONNECTION_HOLDER),{low:i,high:o})}Cl.default=KR;var Al={};Object.defineProperty(Al,"__esModule",{value:!0});var YR=function(){function e(r){var t=r.run;this._run=t}return e.fromTransaction=function(r){return new e({run:r.run.bind(r)})},e.prototype.run=function(r,t){return this._run(r,t)},e}();Al.default=YR;var Il={},ZR=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Uc=f&&f.__assign||function(){return Uc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Uc.apply(this,arguments)},QR=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},nO;Object.defineProperty(Il,"__esModule",{value:!0});var XR=QR(Cl),JR=function(e){ZR(r,e);function r(t){var n=t.connectionHolder,o=t.onClose,i=t.onBookmarks,a=t.onConnection,s=t.reactive,c=t.fetchSize,u=t.impersonatedUser,l=t.highRecordWatermark,d=t.lowRecordWatermark,h=t.notificationFilter,p=t.apiTelemetryConfig,v=t.onDbCallback,y=e.call(this,{connectionHolder:n,onClose:o,onBookmarks:i,onConnection:a,reactive:s,fetchSize:c,impersonatedUser:u,highRecordWatermark:l,lowRecordWatermark:d,notificationFilter:h,apiTelemetryConfig:p})||this;return y[nO]="TransactionPromise",y._onDbCallback=v,y}return r.prototype.then=function(t,n){return this._getOrCreateBeginPromise().then(t,n)},r.prototype.catch=function(t){return this._getOrCreateBeginPromise().catch(t)},r.prototype.finally=function(t){return this._getOrCreateBeginPromise().finally(t)},r.prototype._getOrCreateBeginPromise=function(){var t=this;return this._beginPromise==null&&(this._beginPromise=new Promise(function(n,o){t._resolve=n,t._reject=o,t._beginError!=null&&o(t._beginError),t._beginMetadata!=null&&n(t._toTransaction())})),this._beginPromise},r.prototype._toTransaction=function(){return Uc(Uc({},this),{run:e.prototype.run.bind(this),commit:e.prototype.commit.bind(this),rollback:e.prototype.rollback.bind(this),close:e.prototype.close.bind(this),isOpen:e.prototype.isOpen.bind(this),_begin:this._begin.bind(this)})},r.prototype._begin=function(t,n){return e.prototype._begin.call(this,t,n,{onError:this._onBeginError.bind(this),onComplete:this._onBeginMetadata.bind(this),onDB:this._onDbCallback})},r.prototype._onBeginError=function(t){this._beginError=t,this._reject!=null&&this._reject(t)},r.prototype._onBeginMetadata=function(t){this._beginMetadata=t??{},this._resolve!=null&&this._resolve(this._toTransaction())},r}(XR.default);nO=Symbol.toStringTag;Il.default=JR;var Rl={},Fa={};Object.defineProperty(Fa,"__esModule",{value:!0});Fa.cacheKey=void 0;var e$=Ft;function t$(e,r){var t;return r!=null?"basic:"+r:e===void 0?"DEFAULT":e.scheme==="basic"?"basic:"+((t=e.principal)!==null&&t!==void 0?t:""):e.scheme==="kerberos"?"kerberos:"+e.credentials:e.scheme==="bearer"?"bearer:"+e.credentials:e.scheme==="none"?"none":(0,e$.stringify)(e,{sortedElements:!0})}Fa.cacheKey=t$;var Bi=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},xi=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},tc=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},rc=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))},m_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rl,"__esModule",{value:!0});var r$=Dr,n$=ee,ut=x,pn=ue,o$=m_(La),mb=Lt,i$=ka,Vi=Yr,Pr=Zo,a$=m_(Il),u$=m_(Al),s$=Fa,c$=function(){function e(r){var t=r.mode,n=r.connectionProvider,o=r.bookmarks,i=r.database,a=r.config,s=r.reactive,c=r.fetchSize,u=r.impersonatedUser,l=r.bookmarkManager,d=r.notificationFilter,h=r.auth,p=r.log,v=r.homeDatabaseCallback,y;this._mode=t,this._database=i,this._reactive=s,this._fetchSize=c,this._homeDatabaseCallback=v,this._auth=h,this._getConnectionAcquistionBookmarks=this._getConnectionAcquistionBookmarks.bind(this),this._readConnectionHolder=new mb.ConnectionHolder({mode:ut.ACCESS_MODE_READ,auth:h,database:i,bookmarks:o,connectionProvider:n,impersonatedUser:u,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:p}),this._writeConnectionHolder=new mb.ConnectionHolder({mode:ut.ACCESS_MODE_WRITE,auth:h,database:i,bookmarks:o,connectionProvider:n,impersonatedUser:u,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:p}),this._open=!0,this._hasTx=!1,this._impersonatedUser=u,this._lastBookmarks=o??Vi.Bookmarks.empty(),this._configuredBookmarks=this._lastBookmarks,this._transactionExecutor=l$(a),this._databaseNameResolved=this._database!=="";var _=this._calculateWatermaks();this._lowRecordWatermark=_.low,this._highRecordWatermark=_.high,this._results=[],this._bookmarkManager=l,this._notificationFilter=d,this._log=p,this._databaseGuess=a==null?void 0:a.cachedHomeDatabase,this._isRoutingSession=(y=a==null?void 0:a.routingDriver)!==null&&y!==void 0?y:!1}return e.prototype.run=function(r,t,n){var o=this,i=(0,n$.validateQueryAndParameters)(r,t),a=i.validatedQuery,s=i.params,c=n!=null?new Pr.TxConfig(n,this._log):Pr.TxConfig.empty(),u=this._run(a,s,function(l){return Bi(o,void 0,void 0,function(){var d,h=this;return xi(this,function(p){switch(p.label){case 0:return[4,this._bookmarks()];case 1:return d=p.sent(),this._assertSessionIsOpen(),[2,l.run(a,s,{bookmarks:d,txConfig:c,mode:this._mode,database:this._database,apiTelemetryConfig:{api:ut.TELEMETRY_APIS.AUTO_COMMIT_TRANSACTION},impersonatedUser:this._impersonatedUser,afterComplete:function(v){return h._onCompleteCallback(v,d)},reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,onDb:this._onDatabaseNameResolved.bind(this)})]}})})});return this._results.push(u),u},e.prototype._run=function(r,t,n){var o=this._acquireAndConsumeConnection(n),i=o.connectionHolder,a=o.resultPromise,s=a.catch(function(u){return Promise.resolve(new r$.FailedObserver({error:u}))}),c={high:this._highRecordWatermark,low:this._lowRecordWatermark};return new o$.default(s,r,t,i,c)},e.prototype._acquireConnection=function(r){var t=this,n=this._acquireAndConsumeConnection(r),o=n.connectionHolder,i=n.resultPromise;return i.then(function(a){return Bi(t,void 0,void 0,function(){return xi(this,function(s){switch(s.label){case 0:return[4,o.releaseConnection()];case 1:return s.sent(),[2,a]}})})})},e.prototype._acquireAndConsumeConnection=function(r){var t,n=this._connectionHolderWithMode(this._mode);return this._open?!this._hasTx&&n.initializeConnection(this._databaseGuess)?t=n.getConnection().then(function(o){return r(o)}):t=Promise.reject((0,pn.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):t=Promise.reject((0,pn.newError)("Cannot run query in a closed session.")),{connectionHolder:n,resultPromise:t}},e.prototype.beginTransaction=function(r){var t=r,n=Pr.TxConfig.empty();return t!=null&&(n=new Pr.TxConfig(t,this._log)),this._beginTransaction(this._mode,n,{api:ut.TELEMETRY_APIS.UNMANAGED_TRANSACTION})},e.prototype._beginTransaction=function(r,t,n){var o=this;if(!this._open)throw(0,pn.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,pn.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var i=e._validateSessionMode(r),a=this._connectionHolderWithMode(i);a.initializeConnection(this._databaseGuess),this._hasTx=!0;var s=new a$.default({connectionHolder:a,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmarks:function(c,u,l){return o._updateBookmarks(c,u,l)},onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,apiTelemetryConfig:n,onDbCallback:this._onDatabaseNameResolved.bind(this)});return s._begin(function(){return o._bookmarks()},t),s},e.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,pn.newError)("You cannot run more transactions on a closed session.")},e.prototype._transactionClosed=function(){this._hasTx=!1},e.prototype.lastBookmark=function(){return this.lastBookmarks()},e.prototype.lastBookmarks=function(){return this._lastBookmarks.values()},e.prototype._bookmarks=function(){var r;return Bi(this,void 0,void 0,function(){var t;return xi(this,function(n){switch(n.label){case 0:return[4,(r=this._bookmarkManager)===null||r===void 0?void 0:r.getBookmarks()];case 1:return t=n.sent(),t===void 0?[2,this._lastBookmarks]:[2,new Vi.Bookmarks(rc(rc([],tc(t),!1),tc(this._configuredBookmarks),!1))]}})})},e.prototype.readTransaction=function(r,t){var n=new Pr.TxConfig(t,this._log);return this._runTransaction(ut.ACCESS_MODE_READ,n,r)},e.prototype.writeTransaction=function(r,t){var n=new Pr.TxConfig(t,this._log);return this._runTransaction(ut.ACCESS_MODE_WRITE,n,r)},e.prototype._runTransaction=function(r,t,n){var o=this;return this._transactionExecutor.execute(function(i){return o._beginTransaction(r,t,i)},n)},e.prototype.executeRead=function(r,t){var n=new Pr.TxConfig(t,this._log);return this._executeInTransaction(ut.ACCESS_MODE_READ,n,r)},e.prototype.executeWrite=function(r,t){var n=new Pr.TxConfig(t,this._log);return this._executeInTransaction(ut.ACCESS_MODE_WRITE,n,r)},e.prototype._executeInTransaction=function(r,t,n){var o=this;return this._transactionExecutor.execute(function(i){return o._beginTransaction(r,t,i)},n,u$.default.fromTransaction)},e.prototype._onDatabaseNameResolved=function(r){if(this._isRoutingSession&&(this._databaseGuess=r,!this._databaseNameResolved)){var t=r??"";this._database=t,this._readConnectionHolder.setDatabase(t),this._writeConnectionHolder.setDatabase(t),this._databaseNameResolved=!0,this._homeDatabaseCallback!=null&&this._homeDatabaseCallback((0,s$.cacheKey)(this._auth,this._impersonatedUser),r)}},e.prototype._getConnectionAcquistionBookmarks=function(){var r;return Bi(this,void 0,void 0,function(){var t;return xi(this,function(n){switch(n.label){case 0:return[4,(r=this._bookmarkManager)===null||r===void 0?void 0:r.getBookmarks()];case 1:return t=n.sent(),t===void 0?[2,this._lastBookmarks]:[2,new Vi.Bookmarks(rc(rc([],tc(this._configuredBookmarks),!1),tc(t),!1))]}})})},e.prototype._updateBookmarks=function(r,t,n){var o,i,a;r!=null&&!r.isEmpty()&&((o=this._bookmarkManager)===null||o===void 0||o.updateBookmarks((i=t==null?void 0:t.values())!==null&&i!==void 0?i:[],(a=r==null?void 0:r.values())!==null&&a!==void 0?a:[]).catch(function(){}),this._lastBookmarks=r,this._configuredBookmarks=Vi.Bookmarks.empty())},e.prototype.close=function(){return Bi(this,void 0,void 0,function(){return xi(this,function(r){switch(r.label){case 0:return this._open?(this._open=!1,this._results.forEach(function(t){return t._cancel()}),this._transactionExecutor.close(),[4,this._readConnectionHolder.close(this._hasTx)]):[3,3];case 1:return r.sent(),[4,this._writeConnectionHolder.close(this._hasTx)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._connectionHolderWithMode=function(r){if(r===ut.ACCESS_MODE_READ)return this._readConnectionHolder;if(r===ut.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,pn.newError)("Unknown access mode: "+r)},e.prototype._onCompleteCallback=function(r,t){this._updateBookmarks(new Vi.Bookmarks(r.bookmark),t,r.db)},e.prototype._calculateWatermaks=function(){return this._fetchSize===ut.FETCH_ALL?{low:Number.MAX_VALUE,high:Number.MAX_VALUE}:{low:.3*this._fetchSize,high:.7*this._fetchSize}},e.prototype._configureTransactionExecutor=function(r,t){this._transactionExecutor.pipelineBegin=r,this._transactionExecutor.telemetryApi=t},e._validateSessionMode=function(r){var t=r??ut.ACCESS_MODE_WRITE;if(t!==ut.ACCESS_MODE_READ&&t!==ut.ACCESS_MODE_WRITE)throw(0,pn.newError)("Illegal session mode "+t);return t},e}();function l$(e){var r,t=(r=e==null?void 0:e.maxTransactionRetryTime)!==null&&r!==void 0?r:null;return new i$.TransactionExecutor(t)}Rl.default=c$;var et={},Qo={},Fc=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Bc=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Qh=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},gb=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},wb=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(Qo,"__esModule",{value:!0});Qo.bookmarkManager=void 0;var f$=function(){function e(){throw new Error("Not implemented")}return e.prototype.updateBookmarks=function(r,t){return Fc(this,void 0,void 0,function(){return Bc(this,function(n){throw new Error("Not implemented")})})},e.prototype.getBookmarks=function(){return Fc(this,void 0,void 0,function(){return Bc(this,function(r){throw new Error("Not implemented")})})},e}();Qo.default=f$;function d$(e){e===void 0&&(e={});var r=new Set(e.initialBookmarks);return new h$(r,e.bookmarksSupplier,e.bookmarksConsumer)}Qo.bookmarkManager=d$;var h$=function(){function e(r,t,n){this._bookmarks=r,this._bookmarksSupplier=t,this._bookmarksConsumer=n}return e.prototype.updateBookmarks=function(r,t){return Fc(this,void 0,void 0,function(){var n,o,i,c,a,s,c,u,l,d,h;return Bc(this,function(p){switch(p.label){case 0:n=this._bookmarks;try{for(o=Qh(r),i=o.next();!i.done;i=o.next())c=i.value,n.delete(c)}catch(v){u={error:v}}finally{try{i&&!i.done&&(l=o.return)&&l.call(o)}finally{if(u)throw u.error}}try{for(a=Qh(t),s=a.next();!s.done;s=a.next())c=s.value,n.add(c)}catch(v){d={error:v}}finally{try{s&&!s.done&&(h=a.return)&&h.call(a)}finally{if(d)throw d.error}}return typeof this._bookmarksConsumer!="function"?[3,2]:[4,this._bookmarksConsumer(wb([],gb(n),!1))];case 1:p.sent(),p.label=2;case 2:return[2]}})})},e.prototype.getBookmarks=function(){var r;return Fc(this,void 0,void 0,function(){var t,n,o,i,a,s,c;return Bc(this,function(u){switch(u.label){case 0:return t=new Set(this._bookmarks),typeof this._bookmarksSupplier!="function"?[3,2]:[4,this._bookmarksSupplier()];case 1:n=(r=u.sent())!==null&&r!==void 0?r:[];try{for(o=Qh(n),i=o.next();!i.done;i=o.next())a=i.value,t.add(a)}catch(l){s={error:l}}finally{try{i&&!i.done&&(c=o.return)&&c.call(o)}finally{if(s)throw s.error}}u.label=2;case 2:return[2,wb([],gb(t),!1)]}})})},e}(),$l={},jl=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Nl=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},p$=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($l,"__esModule",{value:!0});var v$=p$(Pl),_$=ue,y$=function(){function e(){}return e.prototype.eagerResultTransformer=function(){return Ob},e.prototype.eager=function(){return Ob},e.prototype.mappedResultTransformer=function(r){return Eb(r)},e.prototype.mapped=function(r){return Eb(r)},e.prototype.first=function(){return b$},e.prototype.summary=function(){return m$},e}(),oO=new y$;Object.freeze(oO);$l.default=oO;function Ob(e){return jl(this,void 0,void 0,function(){var r,t,n,o;return Nl(this,function(i){switch(i.label){case 0:return[4,e];case 1:return r=i.sent(),t=r.summary,n=r.records,[4,e.keys()];case 2:return o=i.sent(),[2,new v$.default(o,n,t)]}})})}function Eb(e){var r=this;if(e==null||e.collect==null&&e.map==null)throw(0,_$.newError)("Requires a map or/and a collect functions.");return function(t){return jl(r,void 0,void 0,function(){return Nl(this,function(n){switch(n.label){case 0:return[4,new Promise(function(o,i){var a={records:[],keys:[]};t.subscribe({onKeys:function(s){a.keys=s},onNext:function(s){if(e.map!=null){var c=e.map(s);c!==void 0&&a.records.push(c)}else a.records.push(s)},onCompleted:function(s){if(e.collect!=null)o(e.collect(a.records,s,a.keys));else{var c={records:a.records,summary:s,keys:a.keys};o(c)}},onError:function(s){i(s)}})})];case 1:return[2,n.sent()]}})})}}function b$(e){return jl(this,void 0,void 0,function(){var r,t,n,o;return Nl(this,function(i){switch(i.label){case 0:return r=e[Symbol.asyncIterator](),[4,r.next()];case 1:t=i.sent(),n=t.value,o=t.done,i.label=2;case 2:return i.trys.push([2,,3,6]),o===!0?[2,void 0]:[2,n];case 3:return r.return==null?[3,5]:[4,r.return()];case 4:i.sent(),i.label=5;case 5:return[7];case 6:return[2]}})})}function m$(e){return jl(this,void 0,void 0,function(){return Nl(this,function(r){switch(r.label){case 0:return[4,e.summary()];case 1:return[2,r.sent()]}})})}var g_={},Xh=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Jh=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(g_,"__esModule",{value:!0});var g$=x,w$=function(){function e(r){this._createSession=r}return e.prototype.execute=function(r,t,n){return Xh(this,void 0,void 0,function(){var o,i,a,s=this;return Jh(this,function(c){switch(c.label){case 0:o=this._createSession({database:r.database,bookmarkManager:r.bookmarkManager,impersonatedUser:r.impersonatedUser,auth:r.auth}),i=O$(r.signal,"abort",function(){return Xh(s,void 0,void 0,function(){return Jh(this,function(u){switch(u.label){case 0:return[4,o.close()];case 1:return[2,u.sent()]}})})}),o._configureTransactionExecutor(!0,g$.TELEMETRY_APIS.EXECUTE_QUERY),c.label=1;case 1:return c.trys.push([1,,3,5]),a=r.routing==="READ"?o.executeRead.bind(o):o.executeWrite.bind(o),[4,a(function(u){return Xh(s,void 0,void 0,function(){var l;return Jh(this,function(d){switch(d.label){case 0:return l=u.run(t,n),[4,r.resultTransformer(l)];case 1:return[2,d.sent()]}})})},r.transactionConfig)];case 2:return[2,c.sent()];case 3:return i.uninstall(),[4,o.close()];case 4:return c.sent(),[7];case 5:return[2]}})})},e}();g_.default=w$;function O$(e,r,t){return typeof(e==null?void 0:e.addEventListener)=="function"&&e.addEventListener(r,t),{uninstall:function(){typeof(e==null?void 0:e.removeEventListener)=="function"&&e.removeEventListener(r,t)}}}var w_={};Object.defineProperty(w_,"__esModule",{value:!0});var E$=function(){function e(r){this.maxSize=r,this.pruneCount=Math.max(Math.round(.01*r*Math.log(r)),1),this.map=new Map}return e.prototype.set=function(r,t){this.map.set(r,{database:t,lastUsed:Date.now()}),this._pruneCache()},e.prototype.get=function(r){var t=this.map.get(r);if(t!==void 0)return t.lastUsed=Date.now(),t.database},e.prototype.delete=function(r){this.map.delete(r)},e.prototype._pruneCache=function(){if(this.map.size>this.maxSize)for(var r=Array.from(this.map.entries()).sort(function(n,o){return n[1].lastUsed-o[1].lastUsed}),t=0;t<this.pruneCount;t++)this.map.delete(r[t][0])},e}();w_.default=E$;var av=f&&f.__assign||function(){return av=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},av.apply(this,arguments)},Sb=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Tb=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Ba=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(et,"__esModule",{value:!0});et.QueryConfig=et.SessionConfig=et.routing=et.WRITE=et.READ=et.Driver=void 0;var Pb=Yr,S$=Ba(Ol),Mn=x,T$=Gn,Cb=Ba(Rl),P$=ee,C$=Qo,A$=Ba($l),I$=Ba(g_),R$=ue,$$=Ba(w_),j$=Fa,N$=60*60*1e3,k$=1e3,M$=1e4,Rc=Mn.ACCESS_MODE_READ;et.READ=Rc;var O_=Mn.ACCESS_MODE_WRITE;et.WRITE=O_;var D$=0,L$=function(){function e(){this.defaultAccessMode=O_,this.bookmarks=[],this.database="",this.impersonatedUser=void 0,this.auth=void 0,this.fetchSize=void 0,this.bookmarkManager=void 0,this.notificationFilter=void 0}return e}();et.SessionConfig=L$;var U$="WRITE",F$="READ",Po={WRITE:U$,READ:F$};et.routing=Po;Object.freeze(Po);var B$=function(){function e(){this.routing=Po.WRITE,this.resultTransformer=void 0,this.database="",this.impersonatedUser=void 0,this.bookmarkManager=void 0,this.transactionConfig=void 0,this.auth=void 0,this.signal=void 0}return e}();et.QueryConfig=B$;var iO=function(){function e(r,t,n,o,i){t===void 0&&(t={}),o===void 0&&(o=function(s){return new Cb.default(s)}),i===void 0&&(i=function(s){return new I$.default(s)}),V$(t);var a=T$.Logger.create(t);x$(t,a),this._id=D$++,this._meta=r,this._config=t,this._log=a,this._createConnectionProvider=n,this._createSession=o,this._defaultExecuteQueryBookmarkManager=(0,C$.bookmarkManager)(),this._queryExecutor=i(this.session.bind(this)),this._connectionProvider=null,this.homeDatabaseCache=new $$.default(M$),this._afterConstruction()}return Object.defineProperty(e.prototype,"executeQueryBookmarkManager",{get:function(){return this._defaultExecuteQueryBookmarkManager},enumerable:!1,configurable:!0}),e.prototype.executeQuery=function(r,t,n){var o,i,a;return n===void 0&&(n={}),Sb(this,void 0,void 0,function(){var s,c,u;return Tb(this,function(l){switch(l.label){case 0:if(s=n.bookmarkManager===null?void 0:(o=n.bookmarkManager)!==null&&o!==void 0?o:this.executeQueryBookmarkManager,c=(i=n.resultTransformer)!==null&&i!==void 0?i:A$.default.eagerResultTransformer(),u=(a=n.routing)!==null&&a!==void 0?a:Po.WRITE,u!==Po.READ&&u!==Po.WRITE)throw(0,R$.newError)('Illegal query routing config: "'.concat(u,'"'));return[4,this._queryExecutor.execute({resultTransformer:c,bookmarkManager:s,routing:u,database:n.database,impersonatedUser:n.impersonatedUser,transactionConfig:n.transactionConfig,auth:n.auth,signal:n.signal},r,t)];case 1:return[2,l.sent()]}})})},e.prototype.verifyConnectivity=function(r){var t=r===void 0?{}:r,n=t.database,o=n===void 0?"":n,i=this._getOrCreateConnectionProvider();return i.verifyConnectivityAndGetServerInfo({database:o,accessMode:Rc})},e.prototype.verifyAuthentication=function(r){var t=r===void 0?{}:r,n=t.database,o=t.auth;return Sb(this,void 0,void 0,function(){var i;return Tb(this,function(a){switch(a.label){case 0:return i=this._getOrCreateConnectionProvider(),[4,i.verifyAuthentication({database:n??"system",auth:o,accessMode:Rc})];case 1:return[2,a.sent()]}})})},e.prototype.getServerInfo=function(r){var t=r===void 0?{}:r,n=t.database,o=n===void 0?"":n,i=this._getOrCreateConnectionProvider();return i.verifyConnectivityAndGetServerInfo({database:o,accessMode:Rc})},e.prototype.supportsMultiDb=function(){var r=this._getOrCreateConnectionProvider();return r.supportsMultiDb()},e.prototype.supportsTransactionConfig=function(){var r=this._getOrCreateConnectionProvider();return r.supportsTransactionConfig()},e.prototype.supportsUserImpersonation=function(){var r=this._getOrCreateConnectionProvider();return r.supportsUserImpersonation()},e.prototype.supportsSessionAuth=function(){var r=this._getOrCreateConnectionProvider();return r.supportsSessionAuth()},e.prototype.getNegotiatedProtocolVersion=function(){var r=this._getOrCreateConnectionProvider();return r.getNegotiatedProtocolVersion()},e.prototype.isEncrypted=function(){return this._isEncrypted()},e.prototype._supportsRouting=function(){return this._meta.routing},e.prototype._isEncrypted=function(){return this._config.encrypted===P$.ENCRYPTION_ON||this._config.encrypted===!0},e.prototype._getTrust=function(){return this._config.trust},e.prototype.session=function(r){var t=r===void 0?{}:r,n=t.defaultAccessMode,o=n===void 0?O_:n,i=t.bookmarks,a=t.database,s=a===void 0?"":a,c=t.impersonatedUser,u=t.fetchSize,l=t.bookmarkManager,d=t.notificationFilter,h=t.auth;return this._newSession({defaultAccessMode:o,bookmarkOrBookmarks:i,database:s,reactive:!1,impersonatedUser:c,fetchSize:aO(u,this._config.fetchSize),bookmarkManager:l,notificationFilter:d,auth:h})},e.prototype.close=function(){return this._log.info("Driver ".concat(this._id," closing")),this._connectionProvider!=null?this._connectionProvider.close():Promise.resolve()},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._afterConstruction=function(){this._log.info("".concat(this._meta.typename," driver ").concat(this._id," created for server address ").concat(this._meta.address.toString()))},e.prototype._homeDatabaseCallback=function(r,t){this.homeDatabaseCache.set(r,t)},e.prototype._newSession=function(r){var t=r.defaultAccessMode,n=r.bookmarkOrBookmarks,o=r.database,i=r.reactive,a=r.impersonatedUser,s=r.fetchSize,c=r.bookmarkManager,u=r.notificationFilter,l=r.auth,d=Cb.default._validateSessionMode(t),h=this._getOrCreateConnectionProvider(),p=this.homeDatabaseCache.get((0,j$.cacheKey)(l,a)),v=this._homeDatabaseCallback.bind(this),y=n!=null?new Pb.Bookmarks(n):Pb.Bookmarks.empty();return this._createSession({mode:d,database:o??"",connectionProvider:h,bookmarks:y,config:av({cachedHomeDatabase:p,routingDriver:this._supportsRouting()},this._config),reactive:i,impersonatedUser:a,fetchSize:s,bookmarkManager:c,notificationFilter:u,auth:l,log:this._log,homeDatabaseCallback:v})},e.prototype._getOrCreateConnectionProvider=function(){return this._connectionProvider==null&&(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,H$(this._config))),this._connectionProvider},e}();et.Driver=iO;function x$(e,r){var t,n,o=e.resolver;if(o!=null&&typeof o!="function")throw new TypeError("Configured resolver should be a function. Got: ".concat(typeof o));if(e.connectionAcquisitionTimeout<e.connectionTimeout&&r.warn('Configuration for "connectionAcquisitionTimeout" should be greater than or equal to "connectionTimeout". Otherwise, the connection acquisition timeout will take precedence for over the connection timeout in scenarios where a new connection is created while it is acquired'),((t=e.notificationFilter)===null||t===void 0?void 0:t.disabledCategories)!=null&&((n=e.notificationFilter)===null||n===void 0?void 0:n.disabledClassifications)!=null)throw new Error(`The notificationFilter can't have both "disabledCategories" and  "disabledClassifications" configured at the same time.`);return e}function V$(e){e.maxConnectionLifetime=ep(e.maxConnectionLifetime,N$),e.maxConnectionPoolSize=ep(e.maxConnectionPoolSize,Mn.DEFAULT_POOL_MAX_SIZE),e.connectionAcquisitionTimeout=ep(e.connectionAcquisitionTimeout,Mn.DEFAULT_POOL_ACQUISITION_TIMEOUT),e.fetchSize=aO(e.fetchSize,k$),e.connectionTimeout=W$(e),e.connectionLivenessCheckTimeout=z$(e.connectionLivenessCheckTimeout)}function ep(e,r){var t=parseInt(e,10);return t>0||t===0?t:t<0?Number.MAX_SAFE_INTEGER:r}function aO(e,r){var t=parseInt(e,10);if(t>0||t===Mn.FETCH_ALL)return t;if(t===0||t<0)throw new Error("The fetch size can only be a positive value or ".concat(Mn.FETCH_ALL," for ALL. However fetchSize = ").concat(t));return r}function W$(e){var r=parseInt(e.connectionTimeout,10);return r===0||!isNaN(r)&&r<0?null:isNaN(r)?Mn.DEFAULT_CONNECTION_TIMEOUT_MILLIS:r}function z$(e){if(e!=null){var r=parseInt(e,10);if(r<0||Number.isNaN(r))throw new Error("The connectionLivenessCheckTimeout can only be a positive value or 0 for always. However connectionLivenessCheckTimeout = ".concat(r));return r}}function H$(e){return new S$.default(e.resolver)}et.default=iO;var kl={};Object.defineProperty(kl,"__esModule",{value:!0});var q$=ue,G$=Ft,K$={basic:function(e,r,t){return t!=null?{scheme:"basic",principal:e,credentials:r,realm:t}:{scheme:"basic",principal:e,credentials:r}},kerberos:function(e){return{scheme:"kerberos",principal:"",credentials:e}},bearer:function(e){return{scheme:"bearer",credentials:e}},none:function(){return{scheme:"none"}},custom:function(e,r,t,n,o){var i={scheme:n,principal:e};if(tp(r)&&(i.credentials=r),tp(t)&&(i.realm=t),tp(o)){try{(0,G$.stringify)(o)}catch(a){throw(0,q$.newError)("Circular references in custom auth token parameters",void 0,a)}i.parameters=o}return i}};function tp(e){return!(e==null||e===""||Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length===0)}kl.default=K$;var vr={},uv=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},sv=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Y$=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vr,"__esModule",{value:!0});vr.staticAuthTokenManager=vr.authTokenManagers=vr.AuthTokenAndExpiration=void 0;var Z$=Y$(kl),Q$=ne,X$=function(){function e(){}return e.prototype.getToken=function(){throw new Error("Not Implemented")},e.prototype.handleSecurityException=function(r,t){throw new Error("Not implemented")},e}();vr.default=X$;var J$=function(){function e(){this.token=Z$.default.none(),this.expiration=void 0}return e}();vr.AuthTokenAndExpiration=J$;var ej=function(){function e(){}return e.prototype.bearer=function(r){var t=r.tokenProvider;if(typeof t!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof t));return new Ab(t,["Neo.ClientError.Security.Unauthorized","Neo.ClientError.Security.TokenExpired"])},e.prototype.basic=function(r){var t=this,n=r.tokenProvider;if(typeof n!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof n));return new Ab(function(){return uv(t,void 0,void 0,function(){var o;return sv(this,function(i){switch(i.label){case 0:return o={},[4,n()];case 1:return[2,(o.token=i.sent(),o)]}})})},["Neo.ClientError.Security.Unauthorized"])},e}(),uO=new ej;vr.authTokenManagers=uO;Object.freeze(uO);function tj(e){var r=e.authToken;return new nj(r)}vr.staticAuthTokenManager=tj;var rj=function(){function e(r){r===void 0&&(r=[]),this._subscribers=r}return e.prototype.subscribe=function(r){this._subscribers.push(r)},e.prototype.onCompleted=function(r){this._subscribers.forEach(function(t){return t.onCompleted(r)})},e.prototype.onError=function(r){this._subscribers.forEach(function(t){return t.onError(r)})},e}(),Ab=function(){function e(r,t,n,o){this._tokenProvider=r,this._handledSecurityCodes=t,this._currentAuthData=n,this._refreshObservable=o}return e.prototype.getToken=function(){var r;return uv(this,void 0,void 0,function(){return sv(this,function(t){switch(t.label){case 0:return this._currentAuthData===void 0||this._currentAuthData.expiration!==void 0&&this._currentAuthData.expiration<new Date?[4,this._refreshAuthToken()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2,(r=this._currentAuthData)===null||r===void 0?void 0:r.token]}})})},e.prototype.handleSecurityException=function(r,t){var n;return this._handledSecurityCodes.includes(t)?(Q$.util.equals(r,(n=this._currentAuthData)===null||n===void 0?void 0:n.token)&&this._scheduleRefreshAuthToken(),!0):!1},e.prototype._scheduleRefreshAuthToken=function(r){var t=this;this._refreshObservable===void 0&&(this._currentAuthData=void 0,this._refreshObservable=new rj,Promise.resolve(this._tokenProvider()).then(function(n){var o;t._currentAuthData=n,(o=t._refreshObservable)===null||o===void 0||o.onCompleted(n)}).catch(function(n){var o;(o=t._refreshObservable)===null||o===void 0||o.onError(n)}).finally(function(){t._refreshObservable=void 0})),r!==void 0&&this._refreshObservable.subscribe(r)},e.prototype._refreshAuthToken=function(){return uv(this,void 0,void 0,function(){var r=this;return sv(this,function(t){switch(t.label){case 0:return[4,new Promise(function(n,o){r._scheduleRefreshAuthToken({onCompleted:n,onError:o})})];case 1:return[2,t.sent()]}})})},e}(),nj=function(){function e(r){this._authToken=r}return e.prototype.getToken=function(){return this._authToken},e.prototype.handleSecurityException=function(r,t){return!1},e}(),Mo={},oj=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Mo,"__esModule",{value:!0});Mo.InternalConfig=Mo.Config=void 0;var sO=function(){function e(){this.encrypted=void 0,this.trust=void 0,this.trustedCertificates=[],this.maxConnectionPoolSize=100,this.maxConnectionLifetime=60*60*1e3,this.connectionAcquisitionTimeout=6e4,this.maxTransactionRetryTime=3e4,this.connectionLivenessCheckTimeout=void 0,this.connectionTimeout=3e4,this.disableLosslessIntegers=!1,this.useBigInt=!1,this.logging=void 0,this.resolver=void 0,this.notificationFilter=void 0,this.userAgent=void 0,this.telemetryDisabled=!1,this.clientCertificate=void 0}return e}();Mo.Config=sO;var ij=function(e){oj(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(sO);Mo.InternalConfig=ij;var Dt={},aj=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Oa=f&&f.__assign||function(){return Oa=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Oa.apply(this,arguments)},uj=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),sj=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),cj=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&uj(r,e,t);return sj(r,e),r};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.resolveCertificateProvider=Dt.clientCertificateProviders=Dt.RotatingClientCertificateProvider=Dt.ClientCertificateProvider=void 0;var E_=cj(Ft),lj=function(){function e(){this.certfile="",this.keyfile="",this.password=void 0}return e}();Dt.default=lj;var cO=function(){function e(){}return e.prototype.hasUpdate=function(){throw new Error("Not Implemented")},e.prototype.getClientCertificate=function(){throw new Error("Not Implemented")},e}();Dt.ClientCertificateProvider=cO;var fj=function(e){aj(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.updateCertificate=function(t){throw new Error("Not implemented")},r}(cO);Dt.RotatingClientCertificateProvider=fj;var dj=function(){function e(){}return e.prototype.rotating=function(r){var t=r.initialCertificate;if(t==null||!S_(t))throw new TypeError("initialCertificate should be ClientCertificate, but got ".concat(E_.stringify(t)));var n=Oa({},t);return new _j(n)},e}(),lO=new dj;Dt.clientCertificateProviders=lO;Object.freeze(lO);function hj(e){if(e!=null){if(typeof e=="object"&&"hasUpdate"in e&&"getClientCertificate"in e&&typeof e.getClientCertificate=="function"&&typeof e.hasUpdate=="function")return e;if(S_(e)){var r=Oa({},e);return{getClientCertificate:function(){return r},hasUpdate:function(){return!1}}}throw new TypeError("clientCertificate should be configured with ClientCertificate or ClientCertificateProvider, but got ".concat(E_.stringify(e)))}}Dt.resolveCertificateProvider=hj;function S_(e){return e!=null&&typeof e=="object"&&"certfile"in e&&pj(e.certfile)&&"keyfile"in e&&vj(e.keyfile)&&dO("password",e)}function pj(e){return Ib(e)||fO(e,Ib)}function vj(e){function r(t){return typeof t=="string"||t!=null&&typeof t=="object"&&"path"in t&&typeof t.path=="string"&&dO("password",t)}return r(e)||fO(e,r)}function Ib(e){return typeof e=="string"}function fO(e,r,t){return t===void 0&&(t=!1),Array.isArray(e)&&(t||e.length>0)&&e.filter(r).length===e.length}function dO(e,r){return!(e in r)||r[e]==null||typeof r[e]=="string"}var _j=function(){function e(r,t){t===void 0&&(t=!1),this._certificate=r,this._updated=t}return e.prototype.hasUpdate=function(){try{return this._updated}finally{this._updated=!1}},e.prototype.getClientCertificate=function(){return this._certificate},e.prototype.updateCertificate=function(r){if(!S_(r))throw new TypeError("certificate should be ClientCertificate, but got ".concat(E_.stringify(r)));this._certificate=Oa({},r),this._updated=!0},e}();(function(e){var r=f&&f.__createBinding||(Object.create?function(K,L,re,pe){pe===void 0&&(pe=re);var Ae=Object.getOwnPropertyDescriptor(L,re);(!Ae||("get"in Ae?!L.__esModule:Ae.writable||Ae.configurable))&&(Ae={enumerable:!0,get:function(){return L[re]}}),Object.defineProperty(K,pe,Ae)}:function(K,L,re,pe){pe===void 0&&(pe=re),K[pe]=L[re]}),t=f&&f.__setModuleDefault||(Object.create?function(K,L){Object.defineProperty(K,"default",{enumerable:!0,value:L})}:function(K,L){K.default=L}),n=f&&f.__importStar||function(K){if(K&&K.__esModule)return K;var L={};if(K!=null)for(var re in K)re!=="default"&&Object.prototype.hasOwnProperty.call(K,re)&&r(L,K,re);return t(L,K),L},o=f&&f.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(e,"__esModule",{value:!0}),e.EagerResult=e.Result=e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.GqlStatusObject=e.Notification=e.ServerInfo=e.queryType=e.ResultSummary=e.Record=e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=e.Time=e.LocalTime=e.LocalDateTime=e.isTime=e.isLocalTime=e.isLocalDateTime=e.isDuration=e.isDateTime=e.isDate=e.Duration=e.DateTime=e.Date=e.Point=e.isPoint=e.internal=e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=e.Integer=e.error=e.isRetriableError=e.GQLError=e.newGQLError=e.Neo4jError=e.newError=e.authTokenManagers=void 0,e.resolveCertificateProvider=e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.routing=e.staticAuthTokenManager=e.bookmarkManager=e.auth=e.json=e.driver=e.types=e.Driver=e.Session=e.TransactionPromise=e.ManagedTransaction=e.Transaction=e.Connection=e.Releasable=e.ConnectionProvider=void 0;var i=ue;Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return i.newError}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return i.Neo4jError}}),Object.defineProperty(e,"newGQLError",{enumerable:!0,get:function(){return i.newGQLError}}),Object.defineProperty(e,"GQLError",{enumerable:!0,get:function(){return i.GQLError}}),Object.defineProperty(e,"isRetriableError",{enumerable:!0,get:function(){return i.isRetriableError}});var a=n(xe);e.Integer=a.default,Object.defineProperty(e,"int",{enumerable:!0,get:function(){return a.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return a.isInt}}),Object.defineProperty(e,"inSafeRange",{enumerable:!0,get:function(){return a.inSafeRange}}),Object.defineProperty(e,"toNumber",{enumerable:!0,get:function(){return a.toNumber}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return a.toString}});var s=he;Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return s.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return s.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return s.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return s.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return s.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return s.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return s.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return s.isLocalTime}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return s.isTime}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return s.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return s.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return s.Time}});var c=Oe;Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return c.Node}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return c.isNode}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return c.Relationship}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return c.isRelationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return c.UnboundRelationship}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return c.isUnboundRelationship}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return c.Path}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return c.isPath}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return c.PathSegment}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return c.isPathSegment}});var u=o(h_);e.Record=u.default;var l=No;Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return l.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return l.Point}});var d=n(Je);e.ResultSummary=d.default,Object.defineProperty(e,"queryType",{enumerable:!0,get:function(){return d.queryType}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return d.ServerInfo}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return d.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return d.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return d.QueryStatistics}}),Object.defineProperty(e,"Stats",{enumerable:!0,get:function(){return d.Stats}});var h=n(Ee);e.Notification=h.default,Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return h.GqlStatusObject}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return h.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return h.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return h.notificationSeverityLevel}});var p=pr;Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return p.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return p.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return p.notificationFilterMinimumSeverityLevel}});var v=o(La);e.Result=v.default;var y=o(Pl);e.EagerResult=y.default;var _=n(Ua);e.ConnectionProvider=_.default,Object.defineProperty(e,"Releasable",{enumerable:!0,get:function(){return _.Releasable}});var b=o(b_);e.Connection=b.default;var w=o(Cl);e.Transaction=w.default;var S=o(Al);e.ManagedTransaction=S.default;var E=o(Il);e.TransactionPromise=E.default;var T=o(Rl);e.Session=T.default;var C=n(et),P=C;e.Driver=C.default,e.driver=P;var I=o(kl);e.auth=I.default;var M=Qo;Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return M.bookmarkManager}});var F=vr;Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return F.authTokenManagers}}),Object.defineProperty(e,"staticAuthTokenManager",{enumerable:!0,get:function(){return F.staticAuthTokenManager}});var Q=et;Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return Q.routing}});var q=n(Mo);e.types=q;var Z=n(Ft);e.json=Z;var fe=o($l);e.resultTransformers=fe.default;var V=Dt;Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return V.clientCertificateProviders}}),Object.defineProperty(e,"resolveCertificateProvider",{enumerable:!0,get:function(){return V.resolveCertificateProvider}});var ie=n(ne);e.internal=ie;var W={SERVICE_UNAVAILABLE:i.SERVICE_UNAVAILABLE,SESSION_EXPIRED:i.SESSION_EXPIRED,PROTOCOL_ERROR:i.PROTOCOL_ERROR};e.error=W;var te={authTokenManagers:F.authTokenManagers,newError:i.newError,Neo4jError:i.Neo4jError,newGQLError:i.newGQLError,GQLError:i.GQLError,isRetriableError:i.isRetriableError,error:W,Integer:a.default,int:a.int,isInt:a.isInt,inSafeRange:a.inSafeRange,toNumber:a.toNumber,toString:a.toString,internal:ie,isPoint:l.isPoint,Point:l.Point,Date:s.Date,DateTime:s.DateTime,Duration:s.Duration,isDate:s.isDate,isDateTime:s.isDateTime,isDuration:s.isDuration,isLocalDateTime:s.isLocalDateTime,isLocalTime:s.isLocalTime,isTime:s.isTime,LocalDateTime:s.LocalDateTime,LocalTime:s.LocalTime,Time:s.Time,Node:c.Node,isNode:c.isNode,Relationship:c.Relationship,isRelationship:c.isRelationship,UnboundRelationship:c.UnboundRelationship,isUnboundRelationship:c.isUnboundRelationship,Path:c.Path,isPath:c.isPath,PathSegment:c.PathSegment,isPathSegment:c.isPathSegment,Record:u.default,ResultSummary:d.default,queryType:d.queryType,ServerInfo:d.ServerInfo,Notification:h.default,GqlStatusObject:h.GqlStatusObject,Plan:d.Plan,ProfiledPlan:d.ProfiledPlan,QueryStatistics:d.QueryStatistics,Stats:d.Stats,Result:v.default,EagerResult:y.default,Transaction:w.default,ManagedTransaction:S.default,TransactionPromise:E.default,Session:T.default,Driver:C.default,Connection:b.default,Releasable:_.Releasable,types:q,driver:P,json:Z,auth:I.default,bookmarkManager:M.bookmarkManager,routing:Q.routing,resultTransformers:fe.default,notificationCategory:h.notificationCategory,notificationClassification:h.notificationClassification,notificationSeverityLevel:h.notificationSeverityLevel,notificationFilterDisabledCategory:p.notificationFilterDisabledCategory,notificationFilterDisabledClassification:p.notificationFilterDisabledClassification,notificationFilterMinimumSeverityLevel:p.notificationFilterMinimumSeverityLevel,clientCertificateProviders:V.clientCertificateProviders,resolveCertificateProvider:V.resolveCertificateProvider};e.default=te})(H);var Ml={},xa={},le={},Xo={},ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.isFunction=void 0;function yj(e){return typeof e=="function"}ce.isFunction=yj;var Ne={},Va={},er={};Object.defineProperty(er,"__esModule",{value:!0});er.createErrorClass=void 0;function bj(e){var r=function(n){Error.call(n),n.stack=new Error().stack},t=e(r);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}er.createErrorClass=bj;Object.defineProperty(Va,"__esModule",{value:!0});Va.UnsubscriptionError=void 0;var mj=er;Va.UnsubscriptionError=mj.createErrorClass(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,o){return o+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});var Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.arrRemove=void 0;function gj(e,r){if(e){var t=e.indexOf(r);0<=t&&e.splice(t,1)}}Bt.arrRemove=gj;var Rb=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},$b=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},jb=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.isSubscription=Ne.EMPTY_SUBSCRIPTION=Ne.Subscription=void 0;var ha=ce,rp=Va,Nb=Bt,T_=function(){function e(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var r,t,n,o,i;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var s=Rb(a),c=s.next();!c.done;c=s.next()){var u=c.value;u.remove(this)}}catch(y){r={error:y}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(r)throw r.error}}else a.remove(this);var l=this.initialTeardown;if(ha.isFunction(l))try{l()}catch(y){i=y instanceof rp.UnsubscriptionError?y.errors:[y]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var h=Rb(d),p=h.next();!p.done;p=h.next()){var v=p.value;try{kb(v)}catch(y){i=i??[],y instanceof rp.UnsubscriptionError?i=jb(jb([],$b(i)),$b(y.errors)):i.push(y)}}}catch(y){n={error:y}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}}if(i)throw new rp.UnsubscriptionError(i)}},e.prototype.add=function(r){var t;if(r&&r!==this)if(this.closed)kb(r);else{if(r instanceof e){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(r)}},e.prototype._hasParent=function(r){var t=this._parentage;return t===r||Array.isArray(t)&&t.includes(r)},e.prototype._addParent=function(r){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(r),t):t?[t,r]:r},e.prototype._removeParent=function(r){var t=this._parentage;t===r?this._parentage=null:Array.isArray(t)&&Nb.arrRemove(t,r)},e.prototype.remove=function(r){var t=this._finalizers;t&&Nb.arrRemove(t,r),r instanceof e&&r._removeParent(this)},e.EMPTY=function(){var r=new e;return r.closed=!0,r}(),e}();Ne.Subscription=T_;Ne.EMPTY_SUBSCRIPTION=T_.EMPTY;function wj(e){return e instanceof T_||e&&"closed"in e&&ha.isFunction(e.remove)&&ha.isFunction(e.add)&&ha.isFunction(e.unsubscribe)}Ne.isSubscription=wj;function kb(e){ha.isFunction(e)?e():e.unsubscribe()}var Zr={};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.config=void 0;Zr.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Wa={},P_={};(function(e){var r=f&&f.__read||function(n,o){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var a=i.call(n),s,c=[],u;try{for(;(o===void 0||o-- >0)&&!(s=a.next()).done;)c.push(s.value)}catch(l){u={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(u)throw u.error}}return c},t=f&&f.__spreadArray||function(n,o){for(var i=0,a=o.length,s=n.length;i<a;i++,s++)n[s]=o[i];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutProvider=void 0,e.timeoutProvider={setTimeout:function(n,o){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=e.timeoutProvider.delegate;return s!=null&&s.setTimeout?s.setTimeout.apply(s,t([n,o],r(i))):setTimeout.apply(void 0,t([n,o],r(i)))},clearTimeout:function(n){var o=e.timeoutProvider.delegate;return((o==null?void 0:o.clearTimeout)||clearTimeout)(n)},delegate:void 0}})(P_);Object.defineProperty(Wa,"__esModule",{value:!0});Wa.reportUnhandledError=void 0;var Oj=Zr,Ej=P_;function Sj(e){Ej.timeoutProvider.setTimeout(function(){var r=Oj.config.onUnhandledError;if(r)r(e);else throw e})}Wa.reportUnhandledError=Sj;var ke={};Object.defineProperty(ke,"__esModule",{value:!0});ke.noop=void 0;function Tj(){}ke.noop=Tj;var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.createNotification=Qt.nextNotification=Qt.errorNotification=Qt.COMPLETE_NOTIFICATION=void 0;Qt.COMPLETE_NOTIFICATION=function(){return Dl("C",void 0,void 0)}();function Pj(e){return Dl("E",void 0,e)}Qt.errorNotification=Pj;function Cj(e){return Dl("N",e,void 0)}Qt.nextNotification=Cj;function Dl(e,r,t){return{kind:e,value:r,error:t}}Qt.createNotification=Dl;var Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.captureError=Ur.errorContext=void 0;var hO=Zr,Cn=null;function Aj(e){if(hO.config.useDeprecatedSynchronousErrorHandling){var r=!Cn;if(r&&(Cn={errorThrown:!1,error:null}),e(),r){var t=Cn,n=t.errorThrown,o=t.error;if(Cn=null,n)throw o}}else e()}Ur.errorContext=Aj;function Ij(e){hO.config.useDeprecatedSynchronousErrorHandling&&Cn&&(Cn.errorThrown=!0,Cn.error=e)}Ur.captureError=Ij;(function(e){var r=f&&f.__extends||function(){var w=function(S,E){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,C){T.__proto__=C}||function(T,C){for(var P in C)Object.prototype.hasOwnProperty.call(C,P)&&(T[P]=C[P])},w(S,E)};return function(S,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");w(S,E);function T(){this.constructor=S}S.prototype=E===null?Object.create(E):(T.prototype=E.prototype,new T)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_OBSERVER=e.SafeSubscriber=e.Subscriber=void 0;var t=ce,n=Ne,o=Zr,i=Wa,a=ke,s=Qt,c=P_,u=Ur,l=function(w){r(S,w);function S(E){var T=w.call(this)||this;return T.isStopped=!1,E?(T.destination=E,n.isSubscription(E)&&E.add(T)):T.destination=e.EMPTY_OBSERVER,T}return S.create=function(E,T,C){return new v(E,T,C)},S.prototype.next=function(E){this.isStopped?b(s.nextNotification(E),this):this._next(E)},S.prototype.error=function(E){this.isStopped?b(s.errorNotification(E),this):(this.isStopped=!0,this._error(E))},S.prototype.complete=function(){this.isStopped?b(s.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},S.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,w.prototype.unsubscribe.call(this),this.destination=null)},S.prototype._next=function(E){this.destination.next(E)},S.prototype._error=function(E){try{this.destination.error(E)}finally{this.unsubscribe()}},S.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},S}(n.Subscription);e.Subscriber=l;var d=Function.prototype.bind;function h(w,S){return d.call(w,S)}var p=function(){function w(S){this.partialObserver=S}return w.prototype.next=function(S){var E=this.partialObserver;if(E.next)try{E.next(S)}catch(T){y(T)}},w.prototype.error=function(S){var E=this.partialObserver;if(E.error)try{E.error(S)}catch(T){y(T)}else y(S)},w.prototype.complete=function(){var S=this.partialObserver;if(S.complete)try{S.complete()}catch(E){y(E)}},w}(),v=function(w){r(S,w);function S(E,T,C){var P=w.call(this)||this,I;if(t.isFunction(E)||!E)I={next:E??void 0,error:T??void 0,complete:C??void 0};else{var M;P&&o.config.useDeprecatedNextContext?(M=Object.create(E),M.unsubscribe=function(){return P.unsubscribe()},I={next:E.next&&h(E.next,M),error:E.error&&h(E.error,M),complete:E.complete&&h(E.complete,M)}):I=E}return P.destination=new p(I),P}return S}(l);e.SafeSubscriber=v;function y(w){o.config.useDeprecatedSynchronousErrorHandling?u.captureError(w):i.reportUnhandledError(w)}function _(w){throw w}function b(w,S){var E=o.config.onStoppedNotification;E&&c.timeoutProvider.setTimeout(function(){return E(w,S)})}e.EMPTY_OBSERVER={closed:!0,next:a.noop,error:_,complete:a.noop}})(Xo);var Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.observable=void 0;Kn.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();var br={},Me={};Object.defineProperty(Me,"__esModule",{value:!0});Me.identity=void 0;function Rj(e){return e}Me.identity=Rj;Object.defineProperty(br,"__esModule",{value:!0});br.pipeFromArray=br.pipe=void 0;var $j=Me;function jj(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return pO(e)}br.pipe=jj;function pO(e){return e.length===0?$j.identity:e.length===1?e[0]:function(t){return e.reduce(function(n,o){return o(n)},t)}}br.pipeFromArray=pO;Object.defineProperty(le,"__esModule",{value:!0});le.Observable=void 0;var cv=Xo,Nj=Ne,kj=Kn,Mj=br,Dj=Zr,np=ce,Lj=Ur,Uj=function(){function e(r){r&&(this._subscribe=r)}return e.prototype.lift=function(r){var t=new e;return t.source=this,t.operator=r,t},e.prototype.subscribe=function(r,t,n){var o=this,i=Bj(r)?r:new cv.SafeSubscriber(r,t,n);return Lj.errorContext(function(){var a=o,s=a.operator,c=a.source;i.add(s?s.call(i,c):c?o._subscribe(i):o._trySubscribe(i))}),i},e.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(t){r.error(t)}},e.prototype.forEach=function(r,t){var n=this;return t=Mb(t),new t(function(o,i){var a=new cv.SafeSubscriber({next:function(s){try{r(s)}catch(c){i(c),a.unsubscribe()}},error:i,complete:o});n.subscribe(a)})},e.prototype._subscribe=function(r){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(r)},e.prototype[kj.observable]=function(){return this},e.prototype.pipe=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return Mj.pipeFromArray(r)(this)},e.prototype.toPromise=function(r){var t=this;return r=Mb(r),new r(function(n,o){var i;t.subscribe(function(a){return i=a},function(a){return o(a)},function(){return n(i)})})},e.create=function(r){return new e(r)},e}();le.Observable=Uj;function Mb(e){var r;return(r=e??Dj.config.Promise)!==null&&r!==void 0?r:Promise}function Fj(e){return e&&np.isFunction(e.next)&&np.isFunction(e.error)&&np.isFunction(e.complete)}function Bj(e){return e&&e instanceof cv.Subscriber||Fj(e)&&Nj.isSubscription(e)}var Yn={},Jo={},N={};Object.defineProperty(N,"__esModule",{value:!0});N.operate=N.hasLift=void 0;var xj=ce;function vO(e){return xj.isFunction(e==null?void 0:e.lift)}N.hasLift=vO;function Vj(e){return function(r){if(vO(r))return r.lift(function(t){try{return e(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}N.operate=Vj;var D={},Wj=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(D,"__esModule",{value:!0});D.OperatorSubscriber=D.createOperatorSubscriber=void 0;var zj=Xo;function Hj(e,r,t,n,o){return new _O(e,r,t,n,o)}D.createOperatorSubscriber=Hj;var _O=function(e){Wj(r,e);function r(t,n,o,i,a,s){var c=e.call(this,t)||this;return c.onFinalize=a,c.shouldUnsubscribe=s,c._next=n?function(u){try{n(u)}catch(l){t.error(l)}}:e.prototype._next,c._error=i?function(u){try{i(u)}catch(l){t.error(l)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=o?function(){try{o()}catch(u){t.error(u)}finally{this.unsubscribe()}}:e.prototype._complete,c}return r.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},r}(zj.Subscriber);D.OperatorSubscriber=_O;Object.defineProperty(Jo,"__esModule",{value:!0});Jo.refCount=void 0;var qj=N,Gj=D;function Kj(){return qj.operate(function(e,r){var t=null;e._refCount++;var n=Gj.createOperatorSubscriber(r,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount){t=null;return}var o=e._connection,i=t;t=null,o&&(!i||o===i)&&o.unsubscribe(),r.unsubscribe()});e.subscribe(n),n.closed||(t=e.connect())})}Jo.refCount=Kj;var Yj=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Yn,"__esModule",{value:!0});Yn.ConnectableObservable=void 0;var Zj=le,Db=Ne,Qj=Jo,Xj=D,Jj=N,eN=function(e){Yj(r,e);function r(t,n){var o=e.call(this)||this;return o.source=t,o.subjectFactory=n,o._subject=null,o._refCount=0,o._connection=null,Jj.hasLift(t)&&(o.lift=t.lift),o}return r.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},r.prototype.getSubject=function(){var t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject},r.prototype._teardown=function(){this._refCount=0;var t=this._connection;this._subject=this._connection=null,t==null||t.unsubscribe()},r.prototype.connect=function(){var t=this,n=this._connection;if(!n){n=this._connection=new Db.Subscription;var o=this.getSubject();n.add(this.source.subscribe(Xj.createOperatorSubscriber(o,void 0,function(){t._teardown(),o.complete()},function(i){t._teardown(),o.error(i)},function(){return t._teardown()}))),n.closed&&(this._connection=null,n=Db.Subscription.EMPTY)}return n},r.prototype.refCount=function(){return Qj.refCount()(this)},r}(Zj.Observable);Yn.ConnectableObservable=eN;var Ll={},yO={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.performanceTimestampProvider=void 0,e.performanceTimestampProvider={now:function(){return(e.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}})(yO);var C_={};(function(e){var r=f&&f.__read||function(o,i){var a=typeof Symbol=="function"&&o[Symbol.iterator];if(!a)return o;var s=a.call(o),c,u=[],l;try{for(;(i===void 0||i-- >0)&&!(c=s.next()).done;)u.push(c.value)}catch(d){l={error:d}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(l)throw l.error}}return u},t=f&&f.__spreadArray||function(o,i){for(var a=0,s=i.length,c=o.length;a<s;a++,c++)o[c]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrameProvider=void 0;var n=Ne;e.animationFrameProvider={schedule:function(o){var i=requestAnimationFrame,a=cancelAnimationFrame,s=e.animationFrameProvider.delegate;s&&(i=s.requestAnimationFrame,a=s.cancelAnimationFrame);var c=i(function(u){a=void 0,o(u)});return new n.Subscription(function(){return a==null?void 0:a(c)})},requestAnimationFrame:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=e.animationFrameProvider.delegate;return((a==null?void 0:a.requestAnimationFrame)||requestAnimationFrame).apply(void 0,t([],r(o)))},cancelAnimationFrame:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=e.animationFrameProvider.delegate;return((a==null?void 0:a.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,t([],r(o)))},delegate:void 0}})(C_);Object.defineProperty(Ll,"__esModule",{value:!0});Ll.animationFrames=void 0;var tN=le,rN=yO,Lb=C_;function nN(e){return e?bO(e):oN}Ll.animationFrames=nN;function bO(e){return new tN.Observable(function(r){var t=e||rN.performanceTimestampProvider,n=t.now(),o=0,i=function(){r.closed||(o=Lb.animationFrameProvider.requestAnimationFrame(function(a){o=0;var s=t.now();r.next({timestamp:e?s:a,elapsed:s-n}),i()}))};return i(),function(){o&&Lb.animationFrameProvider.cancelAnimationFrame(o)}})}var oN=bO(),Ce={},za={};Object.defineProperty(za,"__esModule",{value:!0});za.ObjectUnsubscribedError=void 0;var iN=er;za.ObjectUnsubscribedError=iN.createErrorClass(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var mO=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),aN=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.AnonymousSubject=Ce.Subject=void 0;var Ub=le,lv=Ne,uN=za,sN=Bt,op=Ur,gO=function(e){mO(r,e);function r(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r.prototype.lift=function(t){var n=new fv(this,this);return n.operator=t,n},r.prototype._throwIfClosed=function(){if(this.closed)throw new uN.ObjectUnsubscribedError},r.prototype.next=function(t){var n=this;op.errorContext(function(){var o,i;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var a=aN(n.currentObservers),s=a.next();!s.done;s=a.next()){var c=s.value;c.next(t)}}catch(u){o={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}}})},r.prototype.error=function(t){var n=this;op.errorContext(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=t;for(var o=n.observers;o.length;)o.shift().error(t)}})},r.prototype.complete=function(){var t=this;op.errorContext(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var n=t.observers;n.length;)n.shift().complete()}})},r.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(r.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),r.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},r.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},r.prototype._innerSubscribe=function(t){var n=this,o=this,i=o.hasError,a=o.isStopped,s=o.observers;return i||a?lv.EMPTY_SUBSCRIPTION:(this.currentObservers=null,s.push(t),new lv.Subscription(function(){n.currentObservers=null,sN.arrRemove(s,t)}))},r.prototype._checkFinalizedStatuses=function(t){var n=this,o=n.hasError,i=n.thrownError,a=n.isStopped;o?t.error(i):a&&t.complete()},r.prototype.asObservable=function(){var t=new Ub.Observable;return t.source=this,t},r.create=function(t,n){return new fv(t,n)},r}(Ub.Observable);Ce.Subject=gO;var fv=function(e){mO(r,e);function r(t,n){var o=e.call(this)||this;return o.destination=t,o.source=n,o}return r.prototype.next=function(t){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.next)===null||o===void 0||o.call(n,t)},r.prototype.error=function(t){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.error)===null||o===void 0||o.call(n,t)},r.prototype.complete=function(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)},r.prototype._subscribe=function(t){var n,o;return(o=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&o!==void 0?o:lv.EMPTY_SUBSCRIPTION},r}(gO);Ce.AnonymousSubject=fv;var Ha={},cN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ha,"__esModule",{value:!0});Ha.BehaviorSubject=void 0;var lN=Ce,fN=function(e){cN(r,e);function r(t){var n=e.call(this)||this;return n._value=t,n}return Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),r.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},r.prototype.getValue=function(){var t=this,n=t.hasError,o=t.thrownError,i=t._value;if(n)throw o;return this._throwIfClosed(),i},r.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},r}(lN.Subject);Ha.BehaviorSubject=fN;var ei={},Ul={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.dateTimestampProvider=void 0,e.dateTimestampProvider={now:function(){return(e.dateTimestampProvider.delegate||Date).now()},delegate:void 0}})(Ul);var dN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ei,"__esModule",{value:!0});ei.ReplaySubject=void 0;var hN=Ce,pN=Ul,vN=function(e){dN(r,e);function r(t,n,o){t===void 0&&(t=1/0),n===void 0&&(n=1/0),o===void 0&&(o=pN.dateTimestampProvider);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=n,i._timestampProvider=o,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,n),i}return r.prototype.next=function(t){var n=this,o=n.isStopped,i=n._buffer,a=n._infiniteTimeWindow,s=n._timestampProvider,c=n._windowTime;o||(i.push(t),!a&&i.push(s.now()+c)),this._trimBuffer(),e.prototype.next.call(this,t)},r.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(t),o=this,i=o._infiniteTimeWindow,a=o._buffer,s=a.slice(),c=0;c<s.length&&!t.closed;c+=i?1:2)t.next(s[c]);return this._checkFinalizedStatuses(t),n},r.prototype._trimBuffer=function(){var t=this,n=t._bufferSize,o=t._timestampProvider,i=t._buffer,a=t._infiniteTimeWindow,s=(a?1:2)*n;if(n<1/0&&s<i.length&&i.splice(0,i.length-s),!a){for(var c=o.now(),u=0,l=1;l<i.length&&i[l]<=c;l+=2)u=l;u&&i.splice(0,u+1)}},r}(hN.Subject);ei.ReplaySubject=vN;var ti={},_N=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ti,"__esModule",{value:!0});ti.AsyncSubject=void 0;var yN=Ce,bN=function(e){_N(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t._value=null,t._hasValue=!1,t._isComplete=!1,t}return r.prototype._checkFinalizedStatuses=function(t){var n=this,o=n.hasError,i=n._hasValue,a=n._value,s=n.thrownError,c=n.isStopped,u=n._isComplete;o?t.error(s):(c||u)&&(i&&t.next(a),t.complete())},r.prototype.next=function(t){this.isStopped||(this._value=t,this._hasValue=!0)},r.prototype.complete=function(){var t=this,n=t._hasValue,o=t._value,i=t._isComplete;i||(this._isComplete=!0,n&&e.prototype.next.call(this,o),e.prototype.complete.call(this))},r}(yN.Subject);ti.AsyncSubject=bN;var wO={},Fl={},Qr={},Bl={},mN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Bl,"__esModule",{value:!0});Bl.Action=void 0;var gN=Ne,wN=function(e){mN(r,e);function r(t,n){return e.call(this)||this}return r.prototype.schedule=function(t,n){return this},r}(gN.Subscription);Bl.Action=wN;var OO={};(function(e){var r=f&&f.__read||function(n,o){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var a=i.call(n),s,c=[],u;try{for(;(o===void 0||o-- >0)&&!(s=a.next()).done;)c.push(s.value)}catch(l){u={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(u)throw u.error}}return c},t=f&&f.__spreadArray||function(n,o){for(var i=0,a=o.length,s=n.length;i<a;i++,s++)n[s]=o[i];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.intervalProvider=void 0,e.intervalProvider={setInterval:function(n,o){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=e.intervalProvider.delegate;return s!=null&&s.setInterval?s.setInterval.apply(s,t([n,o],r(i))):setInterval.apply(void 0,t([n,o],r(i)))},clearInterval:function(n){var o=e.intervalProvider.delegate;return((o==null?void 0:o.clearInterval)||clearInterval)(n)},delegate:void 0}})(OO);var ON=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Qr,"__esModule",{value:!0});Qr.AsyncAction=void 0;var EN=Bl,Fb=OO,SN=Bt,TN=function(e){ON(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o.pending=!1,o}return r.prototype.schedule=function(t,n){var o;if(n===void 0&&(n=0),this.closed)return this;this.state=t;var i=this.id,a=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(a,i,n)),this.pending=!0,this.delay=n,this.id=(o=this.id)!==null&&o!==void 0?o:this.requestAsyncId(a,this.id,n),this},r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),Fb.intervalProvider.setInterval(t.flush.bind(t,this),o)},r.prototype.recycleAsyncId=function(t,n,o){if(o===void 0&&(o=0),o!=null&&this.delay===o&&this.pending===!1)return n;n!=null&&Fb.intervalProvider.clearInterval(n)},r.prototype.execute=function(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var o=this._execute(t,n);if(o)return o;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(t,n){var o=!1,i;try{this.work(t)}catch(a){o=!0,i=a||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),i},r.prototype.unsubscribe=function(){if(!this.closed){var t=this,n=t.id,o=t.scheduler,i=o.actions;this.work=this.state=this.scheduler=null,this.pending=!1,SN.arrRemove(i,this),n!=null&&(this.id=this.recycleAsyncId(o,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},r}(EN.Action);Qr.AsyncAction=TN;var EO={},Do={};Object.defineProperty(Do,"__esModule",{value:!0});Do.TestTools=Do.Immediate=void 0;var PN=1,ip,xc={};function Bb(e){return e in xc?(delete xc[e],!0):!1}Do.Immediate={setImmediate:function(e){var r=PN++;return xc[r]=!0,ip||(ip=Promise.resolve()),ip.then(function(){return Bb(r)&&e()}),r},clearImmediate:function(e){Bb(e)}};Do.TestTools={pending:function(){return Object.keys(xc).length}};(function(e){var r=f&&f.__read||function(a,s){var c=typeof Symbol=="function"&&a[Symbol.iterator];if(!c)return a;var u=c.call(a),l,d=[],h;try{for(;(s===void 0||s-- >0)&&!(l=u.next()).done;)d.push(l.value)}catch(p){h={error:p}}finally{try{l&&!l.done&&(c=u.return)&&c.call(u)}finally{if(h)throw h.error}}return d},t=f&&f.__spreadArray||function(a,s){for(var c=0,u=s.length,l=a.length;c<u;c++,l++)a[l]=s[c];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.immediateProvider=void 0;var n=Do,o=n.Immediate.setImmediate,i=n.Immediate.clearImmediate;e.immediateProvider={setImmediate:function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var c=e.immediateProvider.delegate;return((c==null?void 0:c.setImmediate)||o).apply(void 0,t([],r(a)))},clearImmediate:function(a){var s=e.immediateProvider.delegate;return((s==null?void 0:s.clearImmediate)||i)(a)},delegate:void 0}})(EO);var CN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Fl,"__esModule",{value:!0});Fl.AsapAction=void 0;var AN=Qr,xb=EO,IN=function(e){CN(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o}return r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),o!==null&&o>0?e.prototype.requestAsyncId.call(this,t,n,o):(t.actions.push(this),t._scheduled||(t._scheduled=xb.immediateProvider.setImmediate(t.flush.bind(t,void 0))))},r.prototype.recycleAsyncId=function(t,n,o){var i;if(o===void 0&&(o=0),o!=null?o>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,o);var a=t.actions;n!=null&&((i=a[a.length-1])===null||i===void 0?void 0:i.id)!==n&&(xb.immediateProvider.clearImmediate(n),t._scheduled===n&&(t._scheduled=void 0))},r}(AN.AsyncAction);Fl.AsapAction=IN;var xl={},Xr={},qa={};Object.defineProperty(qa,"__esModule",{value:!0});qa.Scheduler=void 0;var RN=Ul,$N=function(){function e(r,t){t===void 0&&(t=e.now),this.schedulerActionCtor=r,this.now=t}return e.prototype.schedule=function(r,t,n){return t===void 0&&(t=0),new this.schedulerActionCtor(this,r).schedule(n,t)},e.now=RN.dateTimestampProvider.now,e}();qa.Scheduler=$N;var jN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Xr,"__esModule",{value:!0});Xr.AsyncScheduler=void 0;var Vb=qa,NN=function(e){jN(r,e);function r(t,n){n===void 0&&(n=Vb.Scheduler.now);var o=e.call(this,t,n)||this;return o.actions=[],o._active=!1,o}return r.prototype.flush=function(t){var n=this.actions;if(this._active){n.push(t);return}var o;this._active=!0;do if(o=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,o){for(;t=n.shift();)t.unsubscribe();throw o}},r}(Vb.Scheduler);Xr.AsyncScheduler=NN;var kN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(xl,"__esModule",{value:!0});xl.AsapScheduler=void 0;var MN=Xr,DN=function(e){kN(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.flush=function(t){this._active=!0;var n=this._scheduled;this._scheduled=void 0;var o=this.actions,i;t=t||o.shift();do if(i=t.execute(t.state,t.delay))break;while((t=o[0])&&t.id===n&&o.shift());if(this._active=!1,i){for(;(t=o[0])&&t.id===n&&o.shift();)t.unsubscribe();throw i}},r}(MN.AsyncScheduler);xl.AsapScheduler=DN;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.asap=e.asapScheduler=void 0;var r=Fl,t=xl;e.asapScheduler=new t.AsapScheduler(r.AsapAction),e.asap=e.asapScheduler})(wO);var lt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.async=e.asyncScheduler=void 0;var r=Qr,t=Xr;e.asyncScheduler=new t.AsyncScheduler(r.AsyncAction),e.async=e.asyncScheduler})(lt);var SO={},Vl={},LN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Vl,"__esModule",{value:!0});Vl.QueueAction=void 0;var UN=Qr,FN=function(e){LN(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o}return r.prototype.schedule=function(t,n){return n===void 0&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},r.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),o!=null&&o>0||o==null&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,o):(t.flush(this),0)},r}(UN.AsyncAction);Vl.QueueAction=FN;var Wl={},BN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Wl,"__esModule",{value:!0});Wl.QueueScheduler=void 0;var xN=Xr,VN=function(e){BN(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(xN.AsyncScheduler);Wl.QueueScheduler=VN;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.queue=e.queueScheduler=void 0;var r=Vl,t=Wl;e.queueScheduler=new t.QueueScheduler(r.QueueAction),e.queue=e.queueScheduler})(SO);var TO={},zl={},WN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(zl,"__esModule",{value:!0});zl.AnimationFrameAction=void 0;var zN=Qr,Wb=C_,HN=function(e){WN(r,e);function r(t,n){var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o}return r.prototype.requestAsyncId=function(t,n,o){return o===void 0&&(o=0),o!==null&&o>0?e.prototype.requestAsyncId.call(this,t,n,o):(t.actions.push(this),t._scheduled||(t._scheduled=Wb.animationFrameProvider.requestAnimationFrame(function(){return t.flush(void 0)})))},r.prototype.recycleAsyncId=function(t,n,o){var i;if(o===void 0&&(o=0),o!=null?o>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,o);var a=t.actions;n!=null&&n===t._scheduled&&((i=a[a.length-1])===null||i===void 0?void 0:i.id)!==n&&(Wb.animationFrameProvider.cancelAnimationFrame(n),t._scheduled=void 0)},r}(zN.AsyncAction);zl.AnimationFrameAction=HN;var Hl={},qN=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Hl,"__esModule",{value:!0});Hl.AnimationFrameScheduler=void 0;var GN=Xr,KN=function(e){qN(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.flush=function(t){this._active=!0;var n;t?n=t.id:(n=this._scheduled,this._scheduled=void 0);var o=this.actions,i;t=t||o.shift();do if(i=t.execute(t.state,t.delay))break;while((t=o[0])&&t.id===n&&o.shift());if(this._active=!1,i){for(;(t=o[0])&&t.id===n&&o.shift();)t.unsubscribe();throw i}},r}(GN.AsyncScheduler);Hl.AnimationFrameScheduler=KN;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrame=e.animationFrameScheduler=void 0;var r=zl,t=Hl;e.animationFrameScheduler=new t.AnimationFrameScheduler(r.AnimationFrameAction),e.animationFrame=e.animationFrameScheduler})(TO);var Lo={},PO=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Lo,"__esModule",{value:!0});Lo.VirtualAction=Lo.VirtualTimeScheduler=void 0;var YN=Qr,ZN=Ne,QN=Xr,XN=function(e){PO(r,e);function r(t,n){t===void 0&&(t=CO),n===void 0&&(n=1/0);var o=e.call(this,t,function(){return o.frame})||this;return o.maxFrames=n,o.frame=0,o.index=-1,o}return r.prototype.flush=function(){for(var t=this,n=t.actions,o=t.maxFrames,i,a;(a=n[0])&&a.delay<=o&&(n.shift(),this.frame=a.delay,!(i=a.execute(a.state,a.delay))););if(i){for(;a=n.shift();)a.unsubscribe();throw i}},r.frameTimeFactor=10,r}(QN.AsyncScheduler);Lo.VirtualTimeScheduler=XN;var CO=function(e){PO(r,e);function r(t,n,o){o===void 0&&(o=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=o,i.active=!0,i.index=t.index=o,i}return r.prototype.schedule=function(t,n){if(n===void 0&&(n=0),Number.isFinite(n)){if(!this.id)return e.prototype.schedule.call(this,t,n);this.active=!1;var o=new r(this.scheduler,this.work);return this.add(o),o.schedule(t,n)}else return ZN.Subscription.EMPTY},r.prototype.requestAsyncId=function(t,n,o){o===void 0&&(o=0),this.delay=t.frame+o;var i=t.actions;return i.push(this),i.sort(r.sortActions),1},r.prototype.recycleAsyncId=function(t,n,o){},r.prototype._execute=function(t,n){if(this.active===!0)return e.prototype._execute.call(this,t,n)},r.sortActions=function(t,n){return t.delay===n.delay?t.index===n.index?0:t.index>n.index?1:-1:t.delay>n.delay?1:-1},r}(YN.AsyncAction);Lo.VirtualAction=CO;var ql={},Ut={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=void 0;var r=le;e.EMPTY=new r.Observable(function(o){return o.complete()});function t(o){return o?n(o):e.EMPTY}e.empty=t;function n(o){return new r.Observable(function(i){return o.schedule(function(){return i.complete()})})}})(Ut);var ri={},Re={},Zn={};Object.defineProperty(Zn,"__esModule",{value:!0});Zn.isScheduler=void 0;var JN=ce;function ek(e){return e&&JN.isFunction(e.schedule)}Zn.isScheduler=ek;Object.defineProperty(Re,"__esModule",{value:!0});Re.popNumber=Re.popScheduler=Re.popResultSelector=void 0;var tk=ce,rk=Zn;function A_(e){return e[e.length-1]}function nk(e){return tk.isFunction(A_(e))?e.pop():void 0}Re.popResultSelector=nk;function ok(e){return rk.isScheduler(A_(e))?e.pop():void 0}Re.popScheduler=ok;function ik(e,r){return typeof A_(e)=="number"?e.pop():r}Re.popNumber=ik;var xt={},Ga={},Gl={},U={},ni={};Object.defineProperty(ni,"__esModule",{value:!0});ni.isArrayLike=void 0;ni.isArrayLike=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};var Ka={};Object.defineProperty(Ka,"__esModule",{value:!0});Ka.isPromise=void 0;var ak=ce;function uk(e){return ak.isFunction(e==null?void 0:e.then)}Ka.isPromise=uk;var Ya={};Object.defineProperty(Ya,"__esModule",{value:!0});Ya.isInteropObservable=void 0;var sk=Kn,ck=ce;function lk(e){return ck.isFunction(e[sk.observable])}Ya.isInteropObservable=lk;var Za={};Object.defineProperty(Za,"__esModule",{value:!0});Za.isAsyncIterable=void 0;var fk=ce;function dk(e){return Symbol.asyncIterator&&fk.isFunction(e==null?void 0:e[Symbol.asyncIterator])}Za.isAsyncIterable=dk;var Qa={};Object.defineProperty(Qa,"__esModule",{value:!0});Qa.createInvalidObservableTypeError=void 0;function hk(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}Qa.createInvalidObservableTypeError=hk;var Xa={},Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.iterator=Dn.getSymbolIterator=void 0;function AO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}Dn.getSymbolIterator=AO;Dn.iterator=AO();Object.defineProperty(Xa,"__esModule",{value:!0});Xa.isIterable=void 0;var pk=Dn,vk=ce;function _k(e){return vk.isFunction(e==null?void 0:e[pk.iterator])}Xa.isIterable=_k;var Fr={},yk=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Co=f&&f.__await||function(e){return this instanceof Co?(this.v=e,this):new Co(e)},bk=f&&f.__asyncGenerator||function(e,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(e,r||[]),o,i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(h){n[h]&&(o[h]=function(p){return new Promise(function(v,y){i.push([h,p,v,y])>1||s(h,p)})})}function s(h,p){try{c(n[h](p))}catch(v){d(i[0][3],v)}}function c(h){h.value instanceof Co?Promise.resolve(h.value.v).then(u,l):d(i[0][2],h)}function u(h){s("next",h)}function l(h){s("throw",h)}function d(h,p){h(p),i.shift(),i.length&&s(i[0][0],i[0][1])}};Object.defineProperty(Fr,"__esModule",{value:!0});Fr.isReadableStreamLike=Fr.readableStreamLikeToAsyncGenerator=void 0;var mk=ce;function gk(e){return bk(this,arguments,function(){var t,n,o,i;return yk(this,function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Co(t.read())];case 3:return n=a.sent(),o=n.value,i=n.done,i?[4,Co(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Co(o)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}Fr.readableStreamLikeToAsyncGenerator=gk;function wk(e){return mk.isFunction(e==null?void 0:e.getReader)}Fr.isReadableStreamLike=wk;var Ok=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Ek=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Sk=f&&f.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e[Symbol.asyncIterator],t;return r?r.call(e):(e=typeof dv=="function"?dv(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(a){return new Promise(function(s,c){a=e[i](a),o(s,c,a.done,a.value)})}}function o(i,a,s,c){Promise.resolve(c).then(function(u){i({value:u,done:s})},a)}},dv=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(U,"__esModule",{value:!0});U.fromReadableStreamLike=U.fromAsyncIterable=U.fromIterable=U.fromPromise=U.fromArrayLike=U.fromInteropObservable=U.innerFrom=void 0;var Tk=ni,Pk=Ka,oi=le,Ck=Ya,Ak=Za,Ik=Qa,Rk=Xa,IO=Fr,$k=ce,jk=Wa,Nk=Kn;function kk(e){if(e instanceof oi.Observable)return e;if(e!=null){if(Ck.isInteropObservable(e))return RO(e);if(Tk.isArrayLike(e))return $O(e);if(Pk.isPromise(e))return jO(e);if(Ak.isAsyncIterable(e))return I_(e);if(Rk.isIterable(e))return NO(e);if(IO.isReadableStreamLike(e))return kO(e)}throw Ik.createInvalidObservableTypeError(e)}U.innerFrom=kk;function RO(e){return new oi.Observable(function(r){var t=e[Nk.observable]();if($k.isFunction(t.subscribe))return t.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}U.fromInteropObservable=RO;function $O(e){return new oi.Observable(function(r){for(var t=0;t<e.length&&!r.closed;t++)r.next(e[t]);r.complete()})}U.fromArrayLike=$O;function jO(e){return new oi.Observable(function(r){e.then(function(t){r.closed||(r.next(t),r.complete())},function(t){return r.error(t)}).then(null,jk.reportUnhandledError)})}U.fromPromise=jO;function NO(e){return new oi.Observable(function(r){var t,n;try{for(var o=dv(e),i=o.next();!i.done;i=o.next()){var a=i.value;if(r.next(a),r.closed)return}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}r.complete()})}U.fromIterable=NO;function I_(e){return new oi.Observable(function(r){Mk(e,r).catch(function(t){return r.error(t)})})}U.fromAsyncIterable=I_;function kO(e){return I_(IO.readableStreamLikeToAsyncGenerator(e))}U.fromReadableStreamLike=kO;function Mk(e,r){var t,n,o,i;return Ok(this,void 0,void 0,function(){var a,s;return Ek(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),t=Sk(e),c.label=1;case 1:return[4,t.next()];case 2:if(n=c.sent(),!!n.done)return[3,4];if(a=n.value,r.next(a),r.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=c.sent(),o={error:s},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(i=t.return)?[4,i.call(t)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return r.complete(),[2]}})})}var Jr={},Vt={};Object.defineProperty(Vt,"__esModule",{value:!0});Vt.executeSchedule=void 0;function Dk(e,r,t,n,o){n===void 0&&(n=0),o===void 0&&(o=!1);var i=r.schedule(function(){t(),o?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(i),!o)return i}Vt.executeSchedule=Dk;Object.defineProperty(Jr,"__esModule",{value:!0});Jr.observeOn=void 0;var ap=Vt,Lk=N,Uk=D;function Fk(e,r){return r===void 0&&(r=0),Lk.operate(function(t,n){t.subscribe(Uk.createOperatorSubscriber(n,function(o){return ap.executeSchedule(n,e,function(){return n.next(o)},r)},function(){return ap.executeSchedule(n,e,function(){return n.complete()},r)},function(o){return ap.executeSchedule(n,e,function(){return n.error(o)},r)}))})}Jr.observeOn=Fk;var en={};Object.defineProperty(en,"__esModule",{value:!0});en.subscribeOn=void 0;var Bk=N;function xk(e,r){return r===void 0&&(r=0),Bk.operate(function(t,n){n.add(e.schedule(function(){return t.subscribe(n)},r))})}en.subscribeOn=xk;Object.defineProperty(Gl,"__esModule",{value:!0});Gl.scheduleObservable=void 0;var Vk=U,Wk=Jr,zk=en;function Hk(e,r){return Vk.innerFrom(e).pipe(zk.subscribeOn(r),Wk.observeOn(r))}Gl.scheduleObservable=Hk;var Kl={};Object.defineProperty(Kl,"__esModule",{value:!0});Kl.schedulePromise=void 0;var qk=U,Gk=Jr,Kk=en;function Yk(e,r){return qk.innerFrom(e).pipe(Kk.subscribeOn(r),Gk.observeOn(r))}Kl.schedulePromise=Yk;var Yl={};Object.defineProperty(Yl,"__esModule",{value:!0});Yl.scheduleArray=void 0;var Zk=le;function Qk(e,r){return new Zk.Observable(function(t){var n=0;return r.schedule(function(){n===e.length?t.complete():(t.next(e[n++]),t.closed||this.schedule())})})}Yl.scheduleArray=Qk;var Ja={};Object.defineProperty(Ja,"__esModule",{value:!0});Ja.scheduleIterable=void 0;var Xk=le,Jk=Dn,eM=ce,zb=Vt;function tM(e,r){return new Xk.Observable(function(t){var n;return zb.executeSchedule(t,r,function(){n=e[Jk.iterator](),zb.executeSchedule(t,r,function(){var o,i,a;try{o=n.next(),i=o.value,a=o.done}catch(s){t.error(s);return}a?t.complete():t.next(i)},0,!0)}),function(){return eM.isFunction(n==null?void 0:n.return)&&n.return()}})}Ja.scheduleIterable=tM;var eu={};Object.defineProperty(eu,"__esModule",{value:!0});eu.scheduleAsyncIterable=void 0;var rM=le,Hb=Vt;function nM(e,r){if(!e)throw new Error("Iterable cannot be null");return new rM.Observable(function(t){Hb.executeSchedule(t,r,function(){var n=e[Symbol.asyncIterator]();Hb.executeSchedule(t,r,function(){n.next().then(function(o){o.done?t.complete():t.next(o.value)})},0,!0)})})}eu.scheduleAsyncIterable=nM;var Zl={};Object.defineProperty(Zl,"__esModule",{value:!0});Zl.scheduleReadableStreamLike=void 0;var oM=eu,iM=Fr;function aM(e,r){return oM.scheduleAsyncIterable(iM.readableStreamLikeToAsyncGenerator(e),r)}Zl.scheduleReadableStreamLike=aM;Object.defineProperty(Ga,"__esModule",{value:!0});Ga.scheduled=void 0;var uM=Gl,sM=Kl,cM=Yl,lM=Ja,fM=eu,dM=Ya,hM=Ka,pM=ni,vM=Xa,_M=Za,yM=Qa,bM=Fr,mM=Zl;function gM(e,r){if(e!=null){if(dM.isInteropObservable(e))return uM.scheduleObservable(e,r);if(pM.isArrayLike(e))return cM.scheduleArray(e,r);if(hM.isPromise(e))return sM.schedulePromise(e,r);if(_M.isAsyncIterable(e))return fM.scheduleAsyncIterable(e,r);if(vM.isIterable(e))return lM.scheduleIterable(e,r);if(bM.isReadableStreamLike(e))return mM.scheduleReadableStreamLike(e,r)}throw yM.createInvalidObservableTypeError(e)}Ga.scheduled=gM;Object.defineProperty(xt,"__esModule",{value:!0});xt.from=void 0;var wM=Ga,OM=U;function EM(e,r){return r?wM.scheduled(e,r):OM.innerFrom(e)}xt.from=EM;Object.defineProperty(ri,"__esModule",{value:!0});ri.of=void 0;var SM=Re,TM=xt;function PM(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=SM.popScheduler(e);return TM.from(e,t)}ri.of=PM;var tu={};Object.defineProperty(tu,"__esModule",{value:!0});tu.throwError=void 0;var CM=le,AM=ce;function IM(e,r){var t=AM.isFunction(e)?e:function(){return e},n=function(o){return o.error(t())};return new CM.Observable(r?function(o){return r.schedule(n,0,o)}:n)}tu.throwError=IM;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.observeNotification=e.Notification=e.NotificationKind=void 0;var r=Ut,t=ri,n=tu,o=ce;(function(s){s.NEXT="N",s.ERROR="E",s.COMPLETE="C"})(e.NotificationKind||(e.NotificationKind={}));var i=function(){function s(c,u,l){this.kind=c,this.value=u,this.error=l,this.hasValue=c==="N"}return s.prototype.observe=function(c){return a(this,c)},s.prototype.do=function(c,u,l){var d=this,h=d.kind,p=d.value,v=d.error;return h==="N"?c==null?void 0:c(p):h==="E"?u==null?void 0:u(v):l==null?void 0:l()},s.prototype.accept=function(c,u,l){var d;return o.isFunction((d=c)===null||d===void 0?void 0:d.next)?this.observe(c):this.do(c,u,l)},s.prototype.toObservable=function(){var c=this,u=c.kind,l=c.value,d=c.error,h=u==="N"?t.of(l):u==="E"?n.throwError(function(){return d}):u==="C"?r.EMPTY:0;if(!h)throw new TypeError("Unexpected notification kind "+u);return h},s.createNext=function(c){return new s("N",c)},s.createError=function(c){return new s("E",void 0,c)},s.createComplete=function(){return s.completeNotification},s.completeNotification=new s("C"),s}();e.Notification=i;function a(s,c){var u,l,d,h=s,p=h.kind,v=h.value,y=h.error;if(typeof p!="string")throw new TypeError('Invalid notification, missing "kind"');p==="N"?(u=c.next)===null||u===void 0||u.call(c,v):p==="E"?(l=c.error)===null||l===void 0||l.call(c,y):(d=c.complete)===null||d===void 0||d.call(c)}e.observeNotification=a})(ql);var Ql={};Object.defineProperty(Ql,"__esModule",{value:!0});Ql.isObservable=void 0;var RM=le,qb=ce;function $M(e){return!!e&&(e instanceof RM.Observable||qb.isFunction(e.lift)&&qb.isFunction(e.subscribe))}Ql.isObservable=$M;var Xl={},tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.EmptyError=void 0;var jM=er;tr.EmptyError=jM.createErrorClass(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});Object.defineProperty(Xl,"__esModule",{value:!0});Xl.lastValueFrom=void 0;var NM=tr;function kM(e,r){var t=typeof r=="object";return new Promise(function(n,o){var i=!1,a;e.subscribe({next:function(s){a=s,i=!0},error:o,complete:function(){i?n(a):t?n(r.defaultValue):o(new NM.EmptyError)}})})}Xl.lastValueFrom=kM;var Jl={};Object.defineProperty(Jl,"__esModule",{value:!0});Jl.firstValueFrom=void 0;var MM=tr,DM=Xo;function LM(e,r){var t=typeof r=="object";return new Promise(function(n,o){var i=new DM.SafeSubscriber({next:function(a){n(a),i.unsubscribe()},error:o,complete:function(){t?n(r.defaultValue):o(new MM.EmptyError)}});e.subscribe(i)})}Jl.firstValueFrom=LM;var ru={};Object.defineProperty(ru,"__esModule",{value:!0});ru.ArgumentOutOfRangeError=void 0;var UM=er;ru.ArgumentOutOfRangeError=UM.createErrorClass(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}});var nu={};Object.defineProperty(nu,"__esModule",{value:!0});nu.NotFoundError=void 0;var FM=er;nu.NotFoundError=FM.createErrorClass(function(e){return function(t){e(this),this.name="NotFoundError",this.message=t}});var ou={};Object.defineProperty(ou,"__esModule",{value:!0});ou.SequenceError=void 0;var BM=er;ou.SequenceError=BM.createErrorClass(function(e){return function(t){e(this),this.name="SequenceError",this.message=t}});var Ea={},ii={};Object.defineProperty(ii,"__esModule",{value:!0});ii.isValidDate=void 0;function xM(e){return e instanceof Date&&!isNaN(e)}ii.isValidDate=xM;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.timeout=e.TimeoutError=void 0;var r=lt,t=ii,n=N,o=U,i=er,a=D,s=Vt;e.TimeoutError=i.createErrorClass(function(l){return function(h){h===void 0&&(h=null),l(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=h}});function c(l,d){var h=t.isValidDate(l)?{first:l}:typeof l=="number"?{each:l}:l,p=h.first,v=h.each,y=h.with,_=y===void 0?u:y,b=h.scheduler,w=b===void 0?d??r.asyncScheduler:b,S=h.meta,E=S===void 0?null:S;if(p==null&&v==null)throw new TypeError("No timeout provided.");return n.operate(function(T,C){var P,I,M=null,F=0,Q=function(q){I=s.executeSchedule(C,w,function(){try{P.unsubscribe(),o.innerFrom(_({meta:E,lastValue:M,seen:F})).subscribe(C)}catch(Z){C.error(Z)}},q)};P=T.subscribe(a.createOperatorSubscriber(C,function(q){I==null||I.unsubscribe(),F++,C.next(M=q),v>0&&Q(v)},void 0,void 0,function(){I!=null&&I.closed||I==null||I.unsubscribe(),M=null})),!F&&Q(p!=null?typeof p=="number"?p:+p-w.now():v)})}e.timeout=c;function u(l){throw new e.TimeoutError(l)}})(Ea);var ef={},iu={},rr={},Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.map=void 0;var VM=N,WM=D;function zM(e,r){return VM.operate(function(t,n){var o=0;t.subscribe(WM.createOperatorSubscriber(n,function(i){n.next(e.call(r,i,o++))}))})}Wt.map=zM;var HM=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},qM=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(rr,"__esModule",{value:!0});rr.mapOneOrManyArgs=void 0;var GM=Wt,KM=Array.isArray;function YM(e,r){return KM(r)?e.apply(void 0,qM([],HM(r))):e(r)}function ZM(e){return GM.map(function(r){return YM(e,r)})}rr.mapOneOrManyArgs=ZM;var QM=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Gb=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(iu,"__esModule",{value:!0});iu.bindCallbackInternals=void 0;var XM=Zn,JM=le,eD=en,tD=rr,rD=Jr,nD=ti;function hv(e,r,t,n){if(t)if(XM.isScheduler(t))n=t;else return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return hv(e,r,n).apply(this,o).pipe(tD.mapOneOrManyArgs(t))};return n?function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return hv(e,r).apply(this,o).pipe(eD.subscribeOn(n),rD.observeOn(n))}:function(){for(var o=this,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=new nD.AsyncSubject,c=!0;return new JM.Observable(function(u){var l=s.subscribe(u);if(c){c=!1;var d=!1,h=!1;r.apply(o,Gb(Gb([],QM(i)),[function(){for(var p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];if(e){var y=p.shift();if(y!=null){s.error(y);return}}s.next(1<p.length?p:p[0]),h=!0,d&&s.complete()}])),h&&s.complete(),d=!0}return l})}}iu.bindCallbackInternals=hv;Object.defineProperty(ef,"__esModule",{value:!0});ef.bindCallback=void 0;var oD=iu;function iD(e,r,t){return oD.bindCallbackInternals(!1,e,r,t)}ef.bindCallback=iD;var tf={};Object.defineProperty(tf,"__esModule",{value:!0});tf.bindNodeCallback=void 0;var aD=iu;function uD(e,r,t){return aD.bindCallbackInternals(!0,e,r,t)}tf.bindNodeCallback=uD;var Br={},au={};Object.defineProperty(au,"__esModule",{value:!0});au.argsArgArrayOrObject=void 0;var sD=Array.isArray,cD=Object.getPrototypeOf,lD=Object.prototype,fD=Object.keys;function dD(e){if(e.length===1){var r=e[0];if(sD(r))return{args:r,keys:null};if(hD(r)){var t=fD(r);return{args:t.map(function(n){return r[n]}),keys:t}}}return{args:e,keys:null}}au.argsArgArrayOrObject=dD;function hD(e){return e&&typeof e=="object"&&cD(e)===lD}var uu={};Object.defineProperty(uu,"__esModule",{value:!0});uu.createObject=void 0;function pD(e,r){return e.reduce(function(t,n,o){return t[n]=r[o],t},{})}uu.createObject=pD;Object.defineProperty(Br,"__esModule",{value:!0});Br.combineLatestInit=Br.combineLatest=void 0;var vD=le,_D=au,MO=xt,DO=Me,yD=rr,Kb=Re,bD=uu,mD=D,gD=Vt;function wD(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Kb.popScheduler(e),n=Kb.popResultSelector(e),o=_D.argsArgArrayOrObject(e),i=o.args,a=o.keys;if(i.length===0)return MO.from([],t);var s=new vD.Observable(LO(i,t,a?function(c){return bD.createObject(a,c)}:DO.identity));return n?s.pipe(yD.mapOneOrManyArgs(n)):s}Br.combineLatest=wD;function LO(e,r,t){return t===void 0&&(t=DO.identity),function(n){Yb(r,function(){for(var o=e.length,i=new Array(o),a=o,s=o,c=function(l){Yb(r,function(){var d=MO.from(e[l],r),h=!1;d.subscribe(mD.createOperatorSubscriber(n,function(p){i[l]=p,h||(h=!0,s--),s||n.next(t(i.slice()))},function(){--a||n.complete()}))},n)},u=0;u<o;u++)c(u)},n)}}Br.combineLatestInit=LO;function Yb(e,r,t){e?gD.executeSchedule(t,e,r):r()}var Qn={},Xn={},tn={},Pt={},ai={};Object.defineProperty(ai,"__esModule",{value:!0});ai.mergeInternals=void 0;var OD=U,ED=Vt,Zb=D;function SD(e,r,t,n,o,i,a,s){var c=[],u=0,l=0,d=!1,h=function(){d&&!c.length&&!u&&r.complete()},p=function(y){return u<n?v(y):c.push(y)},v=function(y){i&&r.next(y),u++;var _=!1;OD.innerFrom(t(y,l++)).subscribe(Zb.createOperatorSubscriber(r,function(b){o==null||o(b),i?p(b):r.next(b)},function(){_=!0},void 0,function(){if(_)try{u--;for(var b=function(){var w=c.shift();a?ED.executeSchedule(r,a,function(){return v(w)}):v(w)};c.length&&u<n;)b();h()}catch(w){r.error(w)}}))};return e.subscribe(Zb.createOperatorSubscriber(r,p,function(){d=!0,h()})),function(){s==null||s()}}ai.mergeInternals=SD;Object.defineProperty(Pt,"__esModule",{value:!0});Pt.mergeMap=void 0;var TD=Wt,PD=U,CD=N,AD=ai,ID=ce;function UO(e,r,t){return t===void 0&&(t=1/0),ID.isFunction(r)?UO(function(n,o){return TD.map(function(i,a){return r(n,i,o,a)})(PD.innerFrom(e(n,o)))},t):(typeof r=="number"&&(t=r),CD.operate(function(n,o){return AD.mergeInternals(n,o,e,t)}))}Pt.mergeMap=UO;Object.defineProperty(tn,"__esModule",{value:!0});tn.mergeAll=void 0;var RD=Pt,$D=Me;function jD(e){return e===void 0&&(e=1/0),RD.mergeMap($D.identity,e)}tn.mergeAll=jD;Object.defineProperty(Xn,"__esModule",{value:!0});Xn.concatAll=void 0;var ND=tn;function kD(){return ND.mergeAll(1)}Xn.concatAll=kD;Object.defineProperty(Qn,"__esModule",{value:!0});Qn.concat=void 0;var MD=Xn,DD=Re,LD=xt;function UD(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return MD.concatAll()(LD.from(e,DD.popScheduler(e)))}Qn.concat=UD;var rf={},Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.defer=void 0;var FD=le,BD=U;function xD(e){return new FD.Observable(function(r){BD.innerFrom(e()).subscribe(r)})}Jn.defer=xD;Object.defineProperty(rf,"__esModule",{value:!0});rf.connectable=void 0;var VD=Ce,WD=le,zD=Jn,HD={connector:function(){return new VD.Subject},resetOnDisconnect:!0};function qD(e,r){r===void 0&&(r=HD);var t=null,n=r.connector,o=r.resetOnDisconnect,i=o===void 0?!0:o,a=n(),s=new WD.Observable(function(c){return a.subscribe(c)});return s.connect=function(){return(!t||t.closed)&&(t=zD.defer(function(){return e}).subscribe(a),i&&t.add(function(){return a=n()})),t},s}rf.connectable=qD;var nf={};Object.defineProperty(nf,"__esModule",{value:!0});nf.forkJoin=void 0;var GD=le,KD=au,YD=U,ZD=Re,QD=D,XD=rr,JD=uu;function e2(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=ZD.popResultSelector(e),n=KD.argsArgArrayOrObject(e),o=n.args,i=n.keys,a=new GD.Observable(function(s){var c=o.length;if(!c){s.complete();return}for(var u=new Array(c),l=c,d=c,h=function(v){var y=!1;YD.innerFrom(o[v]).subscribe(QD.createOperatorSubscriber(s,function(_){y||(y=!0,d--),u[v]=_},function(){return l--},void 0,function(){(!l||!y)&&(d||s.next(i?JD.createObject(i,u):u),s.complete())}))},p=0;p<c;p++)h(p)});return t?a.pipe(XD.mapOneOrManyArgs(t)):a}nf.forkJoin=e2;var of={},t2=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(of,"__esModule",{value:!0});of.fromEvent=void 0;var r2=U,n2=le,o2=Pt,i2=ni,Ln=ce,a2=rr,u2=["addListener","removeListener"],s2=["addEventListener","removeEventListener"],c2=["on","off"];function pv(e,r,t,n){if(Ln.isFunction(t)&&(n=t,t=void 0),n)return pv(e,r,t).pipe(a2.mapOneOrManyArgs(n));var o=t2(d2(e)?s2.map(function(s){return function(c){return e[s](r,c,t)}}):l2(e)?u2.map(Qb(e,r)):f2(e)?c2.map(Qb(e,r)):[],2),i=o[0],a=o[1];if(!i&&i2.isArrayLike(e))return o2.mergeMap(function(s){return pv(s,r,t)})(r2.innerFrom(e));if(!i)throw new TypeError("Invalid event target");return new n2.Observable(function(s){var c=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return s.next(1<u.length?u:u[0])};return i(c),function(){return a(c)}})}of.fromEvent=pv;function Qb(e,r){return function(t){return function(n){return e[t](r,n)}}}function l2(e){return Ln.isFunction(e.addListener)&&Ln.isFunction(e.removeListener)}function f2(e){return Ln.isFunction(e.on)&&Ln.isFunction(e.off)}function d2(e){return Ln.isFunction(e.addEventListener)&&Ln.isFunction(e.removeEventListener)}var af={};Object.defineProperty(af,"__esModule",{value:!0});af.fromEventPattern=void 0;var h2=le,p2=ce,v2=rr;function FO(e,r,t){return t?FO(e,r).pipe(v2.mapOneOrManyArgs(t)):new h2.Observable(function(n){var o=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return n.next(a.length===1?a[0]:a)},i=e(o);return p2.isFunction(r)?function(){return r(o,i)}:void 0})}af.fromEventPattern=FO;var uf={},_2=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(uf,"__esModule",{value:!0});uf.generate=void 0;var Xb=Me,y2=Zn,b2=Jn,m2=Ja;function g2(e,r,t,n,o){var i,a,s,c;arguments.length===1?(i=e,c=i.initialState,r=i.condition,t=i.iterate,a=i.resultSelector,s=a===void 0?Xb.identity:a,o=i.scheduler):(c=e,!n||y2.isScheduler(n)?(s=Xb.identity,o=n):s=n);function u(){var l;return _2(this,function(d){switch(d.label){case 0:l=c,d.label=1;case 1:return!r||r(l)?[4,s(l)]:[3,4];case 2:d.sent(),d.label=3;case 3:return l=t(l),[3,1];case 4:return[2]}})}return b2.defer(o?function(){return m2.scheduleIterable(u(),o)}:u)}uf.generate=g2;var sf={};Object.defineProperty(sf,"__esModule",{value:!0});sf.iif=void 0;var w2=Jn;function O2(e,r,t){return w2.defer(function(){return e()?r:t})}sf.iif=O2;var su={},nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.timer=void 0;var E2=le,S2=lt,T2=Zn,P2=ii;function C2(e,r,t){e===void 0&&(e=0),t===void 0&&(t=S2.async);var n=-1;return r!=null&&(T2.isScheduler(r)?t=r:n=r),new E2.Observable(function(o){var i=P2.isValidDate(e)?+e-t.now():e;i<0&&(i=0);var a=0;return t.schedule(function(){o.closed||(o.next(a++),0<=n?this.schedule(void 0,n):o.complete())},i)})}nr.timer=C2;Object.defineProperty(su,"__esModule",{value:!0});su.interval=void 0;var A2=lt,I2=nr;function R2(e,r){return e===void 0&&(e=0),r===void 0&&(r=A2.asyncScheduler),e<0&&(e=0),I2.timer(e,e,r)}su.interval=R2;var cf={};Object.defineProperty(cf,"__esModule",{value:!0});cf.merge=void 0;var $2=tn,j2=U,N2=Ut,Jb=Re,k2=xt;function M2(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Jb.popScheduler(e),n=Jb.popNumber(e,1/0),o=e;return o.length?o.length===1?j2.innerFrom(o[0]):$2.mergeAll(n)(k2.from(o,t)):N2.EMPTY}cf.merge=M2;var vv={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.never=e.NEVER=void 0;var r=le,t=ke;e.NEVER=new r.Observable(t.noop);function n(){return e.NEVER}e.never=n})(vv);var cu={},mr={};Object.defineProperty(mr,"__esModule",{value:!0});mr.argsOrArgArray=void 0;var D2=Array.isArray;function L2(e){return e.length===1&&D2(e[0])?e[0]:e}mr.argsOrArgArray=L2;Object.defineProperty(cu,"__esModule",{value:!0});cu.onErrorResumeNext=void 0;var U2=le,F2=mr,B2=D,em=ke,x2=U;function V2(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=F2.argsOrArgArray(e);return new U2.Observable(function(n){var o=0,i=function(){if(o<t.length){var a=void 0;try{a=x2.innerFrom(t[o++])}catch{i();return}var s=new B2.OperatorSubscriber(n,void 0,em.noop,em.noop);a.subscribe(s),s.add(i)}else n.complete()};i()})}cu.onErrorResumeNext=V2;var lf={};Object.defineProperty(lf,"__esModule",{value:!0});lf.pairs=void 0;var W2=xt;function z2(e,r){return W2.from(Object.entries(e),r)}lf.pairs=z2;var ff={},lu={};Object.defineProperty(lu,"__esModule",{value:!0});lu.not=void 0;function H2(e,r){return function(t,n){return!e.call(r,t,n)}}lu.not=H2;var zt={};Object.defineProperty(zt,"__esModule",{value:!0});zt.filter=void 0;var q2=N,G2=D;function K2(e,r){return q2.operate(function(t,n){var o=0;t.subscribe(G2.createOperatorSubscriber(n,function(i){return e.call(r,i,o++)&&n.next(i)}))})}zt.filter=K2;Object.defineProperty(ff,"__esModule",{value:!0});ff.partition=void 0;var Y2=lu,tm=zt,rm=U;function Z2(e,r,t){return[tm.filter(r,t)(rm.innerFrom(e)),tm.filter(Y2.not(r,t))(rm.innerFrom(e))]}ff.partition=Z2;var Un={};Object.defineProperty(Un,"__esModule",{value:!0});Un.raceInit=Un.race=void 0;var Q2=le,BO=U,X2=mr,J2=D;function eL(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e=X2.argsOrArgArray(e),e.length===1?BO.innerFrom(e[0]):new Q2.Observable(xO(e))}Un.race=eL;function xO(e){return function(r){for(var t=[],n=function(i){t.push(BO.innerFrom(e[i]).subscribe(J2.createOperatorSubscriber(r,function(a){if(t){for(var s=0;s<t.length;s++)s!==i&&t[s].unsubscribe();t=null}r.next(a)})))},o=0;t&&!r.closed&&o<e.length;o++)n(o)}}Un.raceInit=xO;var df={};Object.defineProperty(df,"__esModule",{value:!0});df.range=void 0;var tL=le,rL=Ut;function nL(e,r,t){if(r==null&&(r=e,e=0),r<=0)return rL.EMPTY;var n=r+e;return new tL.Observable(t?function(o){var i=e;return t.schedule(function(){i<n?(o.next(i++),this.schedule()):o.complete()})}:function(o){for(var i=e;i<n&&!o.closed;)o.next(i++);o.complete()})}df.range=nL;var hf={};Object.defineProperty(hf,"__esModule",{value:!0});hf.using=void 0;var oL=le,iL=U,aL=Ut;function uL(e,r){return new oL.Observable(function(t){var n=e(),o=r(n),i=o?iL.innerFrom(o):aL.EMPTY;return i.subscribe(t),function(){n&&n.unsubscribe()}})}hf.using=uL;var ui={},sL=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},cL=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(ui,"__esModule",{value:!0});ui.zip=void 0;var lL=le,fL=U,dL=mr,hL=Ut,pL=D,vL=Re;function _L(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=vL.popResultSelector(e),n=dL.argsOrArgArray(e);return n.length?new lL.Observable(function(o){var i=n.map(function(){return[]}),a=n.map(function(){return!1});o.add(function(){i=a=null});for(var s=function(u){fL.innerFrom(n[u]).subscribe(pL.createOperatorSubscriber(o,function(l){if(i[u].push(l),i.every(function(h){return h.length})){var d=i.map(function(h){return h.shift()});o.next(t?t.apply(void 0,cL([],sL(d))):d),i.some(function(h,p){return!h.length&&a[p]})&&o.complete()}},function(){a[u]=!0,!i[u].length&&o.complete()}))},c=0;!o.closed&&c<n.length;c++)s(c);return function(){i=a=null}}):hL.EMPTY}ui.zip=_L;var VO={};Object.defineProperty(VO,"__esModule",{value:!0});var si={};Object.defineProperty(si,"__esModule",{value:!0});si.audit=void 0;var yL=N,bL=U,nm=D;function mL(e){return yL.operate(function(r,t){var n=!1,o=null,i=null,a=!1,s=function(){if(i==null||i.unsubscribe(),i=null,n){n=!1;var u=o;o=null,t.next(u)}a&&t.complete()},c=function(){i=null,a&&t.complete()};r.subscribe(nm.createOperatorSubscriber(t,function(u){n=!0,o=u,i||bL.innerFrom(e(u)).subscribe(i=nm.createOperatorSubscriber(t,s,c))},function(){a=!0,(!n||!i||i.closed)&&t.complete()}))})}si.audit=mL;var fu={};Object.defineProperty(fu,"__esModule",{value:!0});fu.auditTime=void 0;var gL=lt,wL=si,OL=nr;function EL(e,r){return r===void 0&&(r=gL.asyncScheduler),wL.audit(function(){return OL.timer(e,r)})}fu.auditTime=EL;var du={};Object.defineProperty(du,"__esModule",{value:!0});du.buffer=void 0;var SL=N,TL=ke,om=D,PL=U;function CL(e){return SL.operate(function(r,t){var n=[];return r.subscribe(om.createOperatorSubscriber(t,function(o){return n.push(o)},function(){t.next(n),t.complete()})),PL.innerFrom(e).subscribe(om.createOperatorSubscriber(t,function(){var o=n;n=[],t.next(o)},TL.noop)),function(){n=null}})}du.buffer=CL;var hu={},up=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(hu,"__esModule",{value:!0});hu.bufferCount=void 0;var AL=N,IL=D,RL=Bt;function $L(e,r){return r===void 0&&(r=null),r=r??e,AL.operate(function(t,n){var o=[],i=0;t.subscribe(IL.createOperatorSubscriber(n,function(a){var s,c,u,l,d=null;i++%r===0&&o.push([]);try{for(var h=up(o),p=h.next();!p.done;p=h.next()){var v=p.value;v.push(a),e<=v.length&&(d=d??[],d.push(v))}}catch(b){s={error:b}}finally{try{p&&!p.done&&(c=h.return)&&c.call(h)}finally{if(s)throw s.error}}if(d)try{for(var y=up(d),_=y.next();!_.done;_=y.next()){var v=_.value;RL.arrRemove(o,v),n.next(v)}}catch(b){u={error:b}}finally{try{_&&!_.done&&(l=y.return)&&l.call(y)}finally{if(u)throw u.error}}},function(){var a,s;try{for(var c=up(o),u=c.next();!u.done;u=c.next()){var l=u.value;n.next(l)}}catch(d){a={error:d}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}n.complete()},void 0,function(){o=null}))})}hu.bufferCount=$L;var pu={},jL=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(pu,"__esModule",{value:!0});pu.bufferTime=void 0;var NL=Ne,kL=N,ML=D,DL=Bt,LL=lt,UL=Re,im=Vt;function FL(e){for(var r,t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=(r=UL.popScheduler(n))!==null&&r!==void 0?r:LL.asyncScheduler,a=(t=n[0])!==null&&t!==void 0?t:null,s=n[1]||1/0;return kL.operate(function(c,u){var l=[],d=!1,h=function(y){var _=y.buffer,b=y.subs;b.unsubscribe(),DL.arrRemove(l,y),u.next(_),d&&p()},p=function(){if(l){var y=new NL.Subscription;u.add(y);var _=[],b={buffer:_,subs:y};l.push(b),im.executeSchedule(y,i,function(){return h(b)},e)}};a!==null&&a>=0?im.executeSchedule(u,i,p,a,!0):d=!0,p();var v=ML.createOperatorSubscriber(u,function(y){var _,b,w=l.slice();try{for(var S=jL(w),E=S.next();!E.done;E=S.next()){var T=E.value,C=T.buffer;C.push(y),s<=C.length&&h(T)}}catch(P){_={error:P}}finally{try{E&&!E.done&&(b=S.return)&&b.call(S)}finally{if(_)throw _.error}}},function(){for(;l!=null&&l.length;)u.next(l.shift().buffer);v==null||v.unsubscribe(),u.complete(),u.unsubscribe()},void 0,function(){return l=null});c.subscribe(v)})}pu.bufferTime=FL;var vu={},BL=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(vu,"__esModule",{value:!0});vu.bufferToggle=void 0;var xL=Ne,VL=N,am=U,sp=D,um=ke,WL=Bt;function zL(e,r){return VL.operate(function(t,n){var o=[];am.innerFrom(e).subscribe(sp.createOperatorSubscriber(n,function(i){var a=[];o.push(a);var s=new xL.Subscription,c=function(){WL.arrRemove(o,a),n.next(a),s.unsubscribe()};s.add(am.innerFrom(r(i)).subscribe(sp.createOperatorSubscriber(n,c,um.noop)))},um.noop)),t.subscribe(sp.createOperatorSubscriber(n,function(i){var a,s;try{for(var c=BL(o),u=c.next();!u.done;u=c.next()){var l=u.value;l.push(i)}}catch(d){a={error:d}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}},function(){for(;o.length>0;)n.next(o.shift());n.complete()}))})}vu.bufferToggle=zL;var _u={};Object.defineProperty(_u,"__esModule",{value:!0});_u.bufferWhen=void 0;var HL=N,qL=ke,sm=D,GL=U;function KL(e){return HL.operate(function(r,t){var n=null,o=null,i=function(){o==null||o.unsubscribe();var a=n;n=[],a&&t.next(a),GL.innerFrom(e()).subscribe(o=sm.createOperatorSubscriber(t,i,qL.noop))};i(),r.subscribe(sm.createOperatorSubscriber(t,function(a){return n==null?void 0:n.push(a)},function(){n&&t.next(n),t.complete()},void 0,function(){return n=o=null}))})}_u.bufferWhen=KL;var yu={};Object.defineProperty(yu,"__esModule",{value:!0});yu.catchError=void 0;var YL=U,ZL=D,QL=N;function WO(e){return QL.operate(function(r,t){var n=null,o=!1,i;n=r.subscribe(ZL.createOperatorSubscriber(t,void 0,void 0,function(a){i=YL.innerFrom(e(a,WO(e)(r))),n?(n.unsubscribe(),n=null,i.subscribe(t)):o=!0})),o&&(n.unsubscribe(),n=null,i.subscribe(t))})}yu.catchError=WO;var bu={},ci={},mu={},li={},gr={},gu={};Object.defineProperty(gu,"__esModule",{value:!0});gu.scanInternals=void 0;var XL=D;function JL(e,r,t,n,o){return function(i,a){var s=t,c=r,u=0;i.subscribe(XL.createOperatorSubscriber(a,function(l){var d=u++;c=s?e(c,l,d):(s=!0,l),n&&a.next(c)},o&&function(){s&&a.next(c),a.complete()}))}}gu.scanInternals=JL;Object.defineProperty(gr,"__esModule",{value:!0});gr.reduce=void 0;var eU=gu,tU=N;function rU(e,r){return tU.operate(eU.scanInternals(e,r,arguments.length>=2,!1,!0))}gr.reduce=rU;Object.defineProperty(li,"__esModule",{value:!0});li.toArray=void 0;var nU=gr,oU=N,iU=function(e,r){return e.push(r),e};function aU(){return oU.operate(function(e,r){nU.reduce(iU,[])(e).subscribe(r)})}li.toArray=aU;Object.defineProperty(mu,"__esModule",{value:!0});mu.joinAllInternals=void 0;var uU=Me,sU=rr,cU=br,lU=Pt,fU=li;function dU(e,r){return cU.pipe(fU.toArray(),lU.mergeMap(function(t){return e(t)}),r?sU.mapOneOrManyArgs(r):uU.identity)}mu.joinAllInternals=dU;Object.defineProperty(ci,"__esModule",{value:!0});ci.combineLatestAll=void 0;var hU=Br,pU=mu;function vU(e){return pU.joinAllInternals(hU.combineLatest,e)}ci.combineLatestAll=vU;Object.defineProperty(bu,"__esModule",{value:!0});bu.combineAll=void 0;var _U=ci;bu.combineAll=_U.combineLatestAll;var wu={},Ou={},cm=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},lm=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ou,"__esModule",{value:!0});Ou.combineLatest=void 0;var yU=Br,bU=N,mU=mr,gU=rr,wU=br,OU=Re;function zO(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=OU.popResultSelector(e);return t?wU.pipe(zO.apply(void 0,lm([],cm(e))),gU.mapOneOrManyArgs(t)):bU.operate(function(n,o){yU.combineLatestInit(lm([n],cm(mU.argsOrArgArray(e))))(o)})}Ou.combineLatest=zO;var EU=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},SU=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(wu,"__esModule",{value:!0});wu.combineLatestWith=void 0;var TU=Ou;function PU(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return TU.combineLatest.apply(void 0,SU([],EU(e)))}wu.combineLatestWith=PU;var fi={};Object.defineProperty(fi,"__esModule",{value:!0});fi.concatMap=void 0;var fm=Pt,CU=ce;function AU(e,r){return CU.isFunction(r)?fm.mergeMap(e,r,1):fm.mergeMap(e,1)}fi.concatMap=AU;var Eu={};Object.defineProperty(Eu,"__esModule",{value:!0});Eu.concatMapTo=void 0;var dm=fi,IU=ce;function RU(e,r){return IU.isFunction(r)?dm.concatMap(function(){return e},r):dm.concatMap(function(){return e})}Eu.concatMapTo=RU;var Su={},Tu={},$U=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},jU=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.concat=void 0;var NU=N,kU=Xn,MU=Re,DU=xt;function LU(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=MU.popScheduler(e);return NU.operate(function(n,o){kU.concatAll()(DU.from(jU([n],$U(e)),t)).subscribe(o)})}Tu.concat=LU;var UU=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},FU=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Su,"__esModule",{value:!0});Su.concatWith=void 0;var BU=Tu;function xU(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return BU.concat.apply(void 0,FU([],UU(e)))}Su.concatWith=xU;var eo={},pf={};Object.defineProperty(pf,"__esModule",{value:!0});pf.fromSubscribable=void 0;var VU=le;function WU(e){return new VU.Observable(function(r){return e.subscribe(r)})}pf.fromSubscribable=WU;Object.defineProperty(eo,"__esModule",{value:!0});eo.connect=void 0;var zU=Ce,HU=U,qU=N,GU=pf,KU={connector:function(){return new zU.Subject}};function YU(e,r){r===void 0&&(r=KU);var t=r.connector;return qU.operate(function(n,o){var i=t();HU.innerFrom(e(GU.fromSubscribable(i))).subscribe(o),o.add(n.subscribe(i))})}eo.connect=YU;var Pu={};Object.defineProperty(Pu,"__esModule",{value:!0});Pu.count=void 0;var ZU=gr;function QU(e){return ZU.reduce(function(r,t,n){return!e||e(t,n)?r+1:r},0)}Pu.count=QU;var Cu={};Object.defineProperty(Cu,"__esModule",{value:!0});Cu.debounce=void 0;var XU=N,JU=ke,hm=D,e4=U;function t4(e){return XU.operate(function(r,t){var n=!1,o=null,i=null,a=function(){if(i==null||i.unsubscribe(),i=null,n){n=!1;var s=o;o=null,t.next(s)}};r.subscribe(hm.createOperatorSubscriber(t,function(s){i==null||i.unsubscribe(),n=!0,o=s,i=hm.createOperatorSubscriber(t,a,JU.noop),e4.innerFrom(e(s)).subscribe(i)},function(){a(),t.complete()},void 0,function(){o=i=null}))})}Cu.debounce=t4;var Au={};Object.defineProperty(Au,"__esModule",{value:!0});Au.debounceTime=void 0;var r4=lt,n4=N,o4=D;function i4(e,r){return r===void 0&&(r=r4.asyncScheduler),n4.operate(function(t,n){var o=null,i=null,a=null,s=function(){if(o){o.unsubscribe(),o=null;var u=i;i=null,n.next(u)}};function c(){var u=a+e,l=r.now();if(l<u){o=this.schedule(void 0,u-l),n.add(o);return}s()}t.subscribe(o4.createOperatorSubscriber(n,function(u){i=u,a=r.now(),o||(o=r.schedule(c,e),n.add(o))},function(){s(),n.complete()},void 0,function(){i=o=null}))})}Au.debounceTime=i4;var rn={};Object.defineProperty(rn,"__esModule",{value:!0});rn.defaultIfEmpty=void 0;var a4=N,u4=D;function s4(e){return a4.operate(function(r,t){var n=!1;r.subscribe(u4.createOperatorSubscriber(t,function(o){n=!0,t.next(o)},function(){n||t.next(e),t.complete()}))})}rn.defaultIfEmpty=s4;var Iu={},di={},nn={};Object.defineProperty(nn,"__esModule",{value:!0});nn.take=void 0;var c4=Ut,l4=N,f4=D;function d4(e){return e<=0?function(){return c4.EMPTY}:l4.operate(function(r,t){var n=0;r.subscribe(f4.createOperatorSubscriber(t,function(o){++n<=e&&(t.next(o),e<=n&&t.complete())}))})}nn.take=d4;var hi={};Object.defineProperty(hi,"__esModule",{value:!0});hi.ignoreElements=void 0;var h4=N,p4=D,v4=ke;function _4(){return h4.operate(function(e,r){e.subscribe(p4.createOperatorSubscriber(r,v4.noop))})}hi.ignoreElements=_4;var pi={};Object.defineProperty(pi,"__esModule",{value:!0});pi.mapTo=void 0;var y4=Wt;function b4(e){return y4.map(function(){return e})}pi.mapTo=b4;Object.defineProperty(di,"__esModule",{value:!0});di.delayWhen=void 0;var m4=Qn,pm=nn,g4=hi,w4=pi,O4=Pt,E4=U;function HO(e,r){return r?function(t){return m4.concat(r.pipe(pm.take(1),g4.ignoreElements()),t.pipe(HO(e)))}:O4.mergeMap(function(t,n){return E4.innerFrom(e(t,n)).pipe(pm.take(1),w4.mapTo(t))})}di.delayWhen=HO;Object.defineProperty(Iu,"__esModule",{value:!0});Iu.delay=void 0;var S4=lt,T4=di,P4=nr;function C4(e,r){r===void 0&&(r=S4.asyncScheduler);var t=P4.timer(e,r);return T4.delayWhen(function(){return t})}Iu.delay=C4;var Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});Ru.dematerialize=void 0;var A4=ql,I4=N,R4=D;function $4(){return I4.operate(function(e,r){e.subscribe(R4.createOperatorSubscriber(r,function(t){return A4.observeNotification(t,r)}))})}Ru.dematerialize=$4;var $u={};Object.defineProperty($u,"__esModule",{value:!0});$u.distinct=void 0;var j4=N,vm=D,N4=ke,k4=U;function M4(e,r){return j4.operate(function(t,n){var o=new Set;t.subscribe(vm.createOperatorSubscriber(n,function(i){var a=e?e(i):i;o.has(a)||(o.add(a),n.next(i))})),r&&k4.innerFrom(r).subscribe(vm.createOperatorSubscriber(n,function(){return o.clear()},N4.noop))})}$u.distinct=M4;var vi={};Object.defineProperty(vi,"__esModule",{value:!0});vi.distinctUntilChanged=void 0;var D4=Me,L4=N,U4=D;function F4(e,r){return r===void 0&&(r=D4.identity),e=e??B4,L4.operate(function(t,n){var o,i=!0;t.subscribe(U4.createOperatorSubscriber(n,function(a){var s=r(a);(i||!e(o,s))&&(i=!1,o=s,n.next(a))}))})}vi.distinctUntilChanged=F4;function B4(e,r){return e===r}var ju={};Object.defineProperty(ju,"__esModule",{value:!0});ju.distinctUntilKeyChanged=void 0;var x4=vi;function V4(e,r){return x4.distinctUntilChanged(function(t,n){return r?r(t[e],n[e]):t[e]===n[e]})}ju.distinctUntilKeyChanged=V4;var Nu={},on={};Object.defineProperty(on,"__esModule",{value:!0});on.throwIfEmpty=void 0;var W4=tr,z4=N,H4=D;function q4(e){return e===void 0&&(e=G4),z4.operate(function(r,t){var n=!1;r.subscribe(H4.createOperatorSubscriber(t,function(o){n=!0,t.next(o)},function(){return n?t.complete():t.error(e())}))})}on.throwIfEmpty=q4;function G4(){return new W4.EmptyError}Object.defineProperty(Nu,"__esModule",{value:!0});Nu.elementAt=void 0;var _m=ru,K4=zt,Y4=on,Z4=rn,Q4=nn;function X4(e,r){if(e<0)throw new _m.ArgumentOutOfRangeError;var t=arguments.length>=2;return function(n){return n.pipe(K4.filter(function(o,i){return i===e}),Q4.take(1),t?Z4.defaultIfEmpty(r):Y4.throwIfEmpty(function(){return new _m.ArgumentOutOfRangeError}))}}Nu.elementAt=X4;var ku={},J4=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},eF=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(ku,"__esModule",{value:!0});ku.endWith=void 0;var tF=Qn,rF=ri;function nF(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(t){return tF.concat(t,rF.of.apply(void 0,eF([],J4(e))))}}ku.endWith=nF;var Mu={};Object.defineProperty(Mu,"__esModule",{value:!0});Mu.every=void 0;var oF=N,iF=D;function aF(e,r){return oF.operate(function(t,n){var o=0;t.subscribe(iF.createOperatorSubscriber(n,function(i){e.call(r,i,o++,t)||(n.next(!1),n.complete())},function(){n.next(!0),n.complete()}))})}Mu.every=aF;var Du={},_i={},yi={};Object.defineProperty(yi,"__esModule",{value:!0});yi.exhaustMap=void 0;var uF=Wt,ym=U,sF=N,bm=D;function qO(e,r){return r?function(t){return t.pipe(qO(function(n,o){return ym.innerFrom(e(n,o)).pipe(uF.map(function(i,a){return r(n,i,o,a)}))}))}:sF.operate(function(t,n){var o=0,i=null,a=!1;t.subscribe(bm.createOperatorSubscriber(n,function(s){i||(i=bm.createOperatorSubscriber(n,void 0,function(){i=null,a&&n.complete()}),ym.innerFrom(e(s,o++)).subscribe(i))},function(){a=!0,!i&&n.complete()}))})}yi.exhaustMap=qO;Object.defineProperty(_i,"__esModule",{value:!0});_i.exhaustAll=void 0;var cF=yi,lF=Me;function fF(){return cF.exhaustMap(lF.identity)}_i.exhaustAll=fF;Object.defineProperty(Du,"__esModule",{value:!0});Du.exhaust=void 0;var dF=_i;Du.exhaust=dF.exhaustAll;var Lu={};Object.defineProperty(Lu,"__esModule",{value:!0});Lu.expand=void 0;var hF=N,pF=ai;function vF(e,r,t){return r===void 0&&(r=1/0),r=(r||0)<1?1/0:r,hF.operate(function(n,o){return pF.mergeInternals(n,o,e,r,void 0,!0,t)})}Lu.expand=vF;var Uu={};Object.defineProperty(Uu,"__esModule",{value:!0});Uu.finalize=void 0;var _F=N;function yF(e){return _F.operate(function(r,t){try{r.subscribe(t)}finally{t.add(e)}})}Uu.finalize=yF;var xr={};Object.defineProperty(xr,"__esModule",{value:!0});xr.createFind=xr.find=void 0;var bF=N,mF=D;function gF(e,r){return bF.operate(GO(e,r,"value"))}xr.find=gF;function GO(e,r,t){var n=t==="index";return function(o,i){var a=0;o.subscribe(mF.createOperatorSubscriber(i,function(s){var c=a++;e.call(r,s,c,o)&&(i.next(n?c:s),i.complete())},function(){i.next(n?-1:void 0),i.complete()}))}}xr.createFind=GO;var Fu={};Object.defineProperty(Fu,"__esModule",{value:!0});Fu.findIndex=void 0;var wF=N,OF=xr;function EF(e,r){return wF.operate(OF.createFind(e,r,"index"))}Fu.findIndex=EF;var Bu={};Object.defineProperty(Bu,"__esModule",{value:!0});Bu.first=void 0;var SF=tr,TF=zt,PF=nn,CF=rn,AF=on,IF=Me;function RF(e,r){var t=arguments.length>=2;return function(n){return n.pipe(e?TF.filter(function(o,i){return e(o,i,n)}):IF.identity,PF.take(1),t?CF.defaultIfEmpty(r):AF.throwIfEmpty(function(){return new SF.EmptyError}))}}Bu.first=RF;var xu={};Object.defineProperty(xu,"__esModule",{value:!0});xu.groupBy=void 0;var $F=le,jF=U,NF=Ce,kF=N,mm=D;function MF(e,r,t,n){return kF.operate(function(o,i){var a;!r||typeof r=="function"?a=r:(t=r.duration,a=r.element,n=r.connector);var s=new Map,c=function(v){s.forEach(v),v(i)},u=function(v){return c(function(y){return y.error(v)})},l=0,d=!1,h=new mm.OperatorSubscriber(i,function(v){try{var y=e(v),_=s.get(y);if(!_){s.set(y,_=n?n():new NF.Subject);var b=p(y,_);if(i.next(b),t){var w=mm.createOperatorSubscriber(_,function(){_.complete(),w==null||w.unsubscribe()},void 0,void 0,function(){return s.delete(y)});h.add(jF.innerFrom(t(b)).subscribe(w))}}_.next(a?a(v):v)}catch(S){u(S)}},function(){return c(function(v){return v.complete()})},u,function(){return s.clear()},function(){return d=!0,l===0});o.subscribe(h);function p(v,y){var _=new $F.Observable(function(b){l++;var w=y.subscribe(b);return function(){w.unsubscribe(),--l===0&&d&&h.unsubscribe()}});return _.key=v,_}})}xu.groupBy=MF;var Vu={};Object.defineProperty(Vu,"__esModule",{value:!0});Vu.isEmpty=void 0;var DF=N,LF=D;function UF(){return DF.operate(function(e,r){e.subscribe(LF.createOperatorSubscriber(r,function(){r.next(!1),r.complete()},function(){r.next(!0),r.complete()}))})}Vu.isEmpty=UF;var Wu={},bi={},FF=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(bi,"__esModule",{value:!0});bi.takeLast=void 0;var BF=Ut,xF=N,VF=D;function WF(e){return e<=0?function(){return BF.EMPTY}:xF.operate(function(r,t){var n=[];r.subscribe(VF.createOperatorSubscriber(t,function(o){n.push(o),e<n.length&&n.shift()},function(){var o,i;try{for(var a=FF(n),s=a.next();!s.done;s=a.next()){var c=s.value;t.next(c)}}catch(u){o={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}t.complete()},void 0,function(){n=null}))})}bi.takeLast=WF;Object.defineProperty(Wu,"__esModule",{value:!0});Wu.last=void 0;var zF=tr,HF=zt,qF=bi,GF=on,KF=rn,YF=Me;function ZF(e,r){var t=arguments.length>=2;return function(n){return n.pipe(e?HF.filter(function(o,i){return e(o,i,n)}):YF.identity,qF.takeLast(1),t?KF.defaultIfEmpty(r):GF.throwIfEmpty(function(){return new zF.EmptyError}))}}Wu.last=ZF;var zu={};Object.defineProperty(zu,"__esModule",{value:!0});zu.materialize=void 0;var cp=ql,QF=N,XF=D;function JF(){return QF.operate(function(e,r){e.subscribe(XF.createOperatorSubscriber(r,function(t){r.next(cp.Notification.createNext(t))},function(){r.next(cp.Notification.createComplete()),r.complete()},function(t){r.next(cp.Notification.createError(t)),r.complete()}))})}zu.materialize=JF;var Hu={};Object.defineProperty(Hu,"__esModule",{value:!0});Hu.max=void 0;var eB=gr,tB=ce;function rB(e){return eB.reduce(tB.isFunction(e)?function(r,t){return e(r,t)>0?r:t}:function(r,t){return r>t?r:t})}Hu.max=rB;var qu={};Object.defineProperty(qu,"__esModule",{value:!0});qu.flatMap=void 0;var nB=Pt;qu.flatMap=nB.mergeMap;var Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});Gu.mergeMapTo=void 0;var gm=Pt,oB=ce;function iB(e,r,t){return t===void 0&&(t=1/0),oB.isFunction(r)?gm.mergeMap(function(){return e},r,t):(typeof r=="number"&&(t=r),gm.mergeMap(function(){return e},t))}Gu.mergeMapTo=iB;var Ku={};Object.defineProperty(Ku,"__esModule",{value:!0});Ku.mergeScan=void 0;var aB=N,uB=ai;function sB(e,r,t){return t===void 0&&(t=1/0),aB.operate(function(n,o){var i=r;return uB.mergeInternals(n,o,function(a,s){return e(i,a,s)},t,function(a){i=a},!1,void 0,function(){return i=null})})}Ku.mergeScan=sB;var Yu={},Zu={},cB=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},lB=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Zu,"__esModule",{value:!0});Zu.merge=void 0;var fB=N,dB=tn,wm=Re,hB=xt;function pB(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=wm.popScheduler(e),n=wm.popNumber(e,1/0);return fB.operate(function(o,i){dB.mergeAll(n)(hB.from(lB([o],cB(e)),t)).subscribe(i)})}Zu.merge=pB;var vB=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},_B=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.mergeWith=void 0;var yB=Zu;function bB(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return yB.merge.apply(void 0,_B([],vB(e)))}Yu.mergeWith=bB;var Qu={};Object.defineProperty(Qu,"__esModule",{value:!0});Qu.min=void 0;var mB=gr,gB=ce;function wB(e){return mB.reduce(gB.isFunction(e)?function(r,t){return e(r,t)<0?r:t}:function(r,t){return r<t?r:t})}Qu.min=wB;var to={};Object.defineProperty(to,"__esModule",{value:!0});to.multicast=void 0;var OB=Yn,Om=ce,EB=eo;function SB(e,r){var t=Om.isFunction(e)?e:function(){return e};return Om.isFunction(r)?EB.connect(r,{connector:t}):function(n){return new OB.ConnectableObservable(n,t)}}to.multicast=SB;var Fn={},TB=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},PB=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.onErrorResumeNext=Fn.onErrorResumeNextWith=void 0;var CB=mr,AB=cu;function KO(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=CB.argsOrArgArray(e);return function(n){return AB.onErrorResumeNext.apply(void 0,PB([n],TB(t)))}}Fn.onErrorResumeNextWith=KO;Fn.onErrorResumeNext=KO;var Xu={};Object.defineProperty(Xu,"__esModule",{value:!0});Xu.pairwise=void 0;var IB=N,RB=D;function $B(){return IB.operate(function(e,r){var t,n=!1;e.subscribe(RB.createOperatorSubscriber(r,function(o){var i=t;t=o,n&&r.next([i,o]),n=!0}))})}Xu.pairwise=$B;var Ju={};Object.defineProperty(Ju,"__esModule",{value:!0});Ju.pluck=void 0;var jB=Wt;function NB(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=e.length;if(t===0)throw new Error("list of properties cannot be empty.");return jB.map(function(n){for(var o=n,i=0;i<t;i++){var a=o==null?void 0:o[e[i]];if(typeof a<"u")o=a;else return}return o})}Ju.pluck=NB;var es={};Object.defineProperty(es,"__esModule",{value:!0});es.publish=void 0;var kB=Ce,MB=to,DB=eo;function LB(e){return e?function(r){return DB.connect(e)(r)}:function(r){return MB.multicast(new kB.Subject)(r)}}es.publish=LB;var ts={};Object.defineProperty(ts,"__esModule",{value:!0});ts.publishBehavior=void 0;var UB=Ha,FB=Yn;function BB(e){return function(r){var t=new UB.BehaviorSubject(e);return new FB.ConnectableObservable(r,function(){return t})}}ts.publishBehavior=BB;var rs={};Object.defineProperty(rs,"__esModule",{value:!0});rs.publishLast=void 0;var xB=ti,VB=Yn;function WB(){return function(e){var r=new xB.AsyncSubject;return new VB.ConnectableObservable(e,function(){return r})}}rs.publishLast=WB;var ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.publishReplay=void 0;var zB=ei,HB=to,Em=ce;function qB(e,r,t,n){t&&!Em.isFunction(t)&&(n=t);var o=Em.isFunction(t)?t:void 0;return function(i){return HB.multicast(new zB.ReplaySubject(e,r,n),o)(i)}}ns.publishReplay=qB;var mi={},GB=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},KB=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(mi,"__esModule",{value:!0});mi.raceWith=void 0;var YB=Un,ZB=N,QB=Me;function XB(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length?ZB.operate(function(t,n){YB.raceInit(KB([t],GB(e)))(n)}):QB.identity}mi.raceWith=XB;var os={};Object.defineProperty(os,"__esModule",{value:!0});os.repeat=void 0;var JB=Ut,ex=N,Sm=D,tx=U,rx=nr;function nx(e){var r,t=1/0,n;return e!=null&&(typeof e=="object"?(r=e.count,t=r===void 0?1/0:r,n=e.delay):t=e),t<=0?function(){return JB.EMPTY}:ex.operate(function(o,i){var a=0,s,c=function(){if(s==null||s.unsubscribe(),s=null,n!=null){var l=typeof n=="number"?rx.timer(n):tx.innerFrom(n(a)),d=Sm.createOperatorSubscriber(i,function(){d.unsubscribe(),u()});l.subscribe(d)}else u()},u=function(){var l=!1;s=o.subscribe(Sm.createOperatorSubscriber(i,void 0,function(){++a<t?s?c():l=!0:i.complete()})),l&&c()};u()})}os.repeat=nx;var is={};Object.defineProperty(is,"__esModule",{value:!0});is.repeatWhen=void 0;var ox=U,ix=Ce,ax=N,Tm=D;function ux(e){return ax.operate(function(r,t){var n,o=!1,i,a=!1,s=!1,c=function(){return s&&a&&(t.complete(),!0)},u=function(){return i||(i=new ix.Subject,ox.innerFrom(e(i)).subscribe(Tm.createOperatorSubscriber(t,function(){n?l():o=!0},function(){a=!0,c()}))),i},l=function(){s=!1,n=r.subscribe(Tm.createOperatorSubscriber(t,void 0,function(){s=!0,!c()&&u().next()})),o&&(n.unsubscribe(),n=null,o=!1,l())};l()})}is.repeatWhen=ux;var as={};Object.defineProperty(as,"__esModule",{value:!0});as.retry=void 0;var sx=N,Pm=D,cx=Me,lx=nr,fx=U;function dx(e){e===void 0&&(e=1/0);var r;e&&typeof e=="object"?r=e:r={count:e};var t=r.count,n=t===void 0?1/0:t,o=r.delay,i=r.resetOnSuccess,a=i===void 0?!1:i;return n<=0?cx.identity:sx.operate(function(s,c){var u=0,l,d=function(){var h=!1;l=s.subscribe(Pm.createOperatorSubscriber(c,function(p){a&&(u=0),c.next(p)},void 0,function(p){if(u++<n){var v=function(){l?(l.unsubscribe(),l=null,d()):h=!0};if(o!=null){var y=typeof o=="number"?lx.timer(o):fx.innerFrom(o(p,u)),_=Pm.createOperatorSubscriber(c,function(){_.unsubscribe(),v()},function(){c.complete()});y.subscribe(_)}else v()}else c.error(p)})),h&&(l.unsubscribe(),l=null,d())};d()})}as.retry=dx;var us={};Object.defineProperty(us,"__esModule",{value:!0});us.retryWhen=void 0;var hx=U,px=Ce,vx=N,Cm=D;function _x(e){return vx.operate(function(r,t){var n,o=!1,i,a=function(){n=r.subscribe(Cm.createOperatorSubscriber(t,void 0,void 0,function(s){i||(i=new px.Subject,hx.innerFrom(e(i)).subscribe(Cm.createOperatorSubscriber(t,function(){return n?a():o=!0}))),i&&i.next(s)})),o&&(n.unsubscribe(),n=null,o=!1,a())};a()})}us.retryWhen=_x;var gi={};Object.defineProperty(gi,"__esModule",{value:!0});gi.sample=void 0;var yx=U,bx=N,mx=ke,Am=D;function gx(e){return bx.operate(function(r,t){var n=!1,o=null;r.subscribe(Am.createOperatorSubscriber(t,function(i){n=!0,o=i})),yx.innerFrom(e).subscribe(Am.createOperatorSubscriber(t,function(){if(n){n=!1;var i=o;o=null,t.next(i)}},mx.noop))})}gi.sample=gx;var ss={};Object.defineProperty(ss,"__esModule",{value:!0});ss.sampleTime=void 0;var wx=lt,Ox=gi,Ex=su;function Sx(e,r){return r===void 0&&(r=wx.asyncScheduler),Ox.sample(Ex.interval(e,r))}ss.sampleTime=Sx;var cs={};Object.defineProperty(cs,"__esModule",{value:!0});cs.scan=void 0;var Tx=N,Px=gu;function Cx(e,r){return Tx.operate(Px.scanInternals(e,r,arguments.length>=2,!0))}cs.scan=Cx;var ls={};Object.defineProperty(ls,"__esModule",{value:!0});ls.sequenceEqual=void 0;var Ax=N,Ix=D,Rx=U;function $x(e,r){return r===void 0&&(r=function(t,n){return t===n}),Ax.operate(function(t,n){var o=Im(),i=Im(),a=function(c){n.next(c),n.complete()},s=function(c,u){var l=Ix.createOperatorSubscriber(n,function(d){var h=u.buffer,p=u.complete;h.length===0?p?a(!1):c.buffer.push(d):!r(d,h.shift())&&a(!1)},function(){c.complete=!0;var d=u.complete,h=u.buffer;d&&a(h.length===0),l==null||l.unsubscribe()});return l};t.subscribe(s(o,i)),Rx.innerFrom(e).subscribe(s(i,o))})}ls.sequenceEqual=$x;function Im(){return{buffer:[],complete:!1}}var wi={},jx=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Nx=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(wi,"__esModule",{value:!0});wi.share=void 0;var YO=U,kx=Ce,ZO=Xo,Mx=N;function Dx(e){e===void 0&&(e={});var r=e.connector,t=r===void 0?function(){return new kx.Subject}:r,n=e.resetOnError,o=n===void 0?!0:n,i=e.resetOnComplete,a=i===void 0?!0:i,s=e.resetOnRefCountZero,c=s===void 0?!0:s;return function(u){var l,d,h,p=0,v=!1,y=!1,_=function(){d==null||d.unsubscribe(),d=void 0},b=function(){_(),l=h=void 0,v=y=!1},w=function(){var S=l;b(),S==null||S.unsubscribe()};return Mx.operate(function(S,E){p++,!y&&!v&&_();var T=h=h??t();E.add(function(){p--,p===0&&!y&&!v&&(d=lp(w,c))}),T.subscribe(E),!l&&p>0&&(l=new ZO.SafeSubscriber({next:function(C){return T.next(C)},error:function(C){y=!0,_(),d=lp(b,o,C),T.error(C)},complete:function(){v=!0,_(),d=lp(b,a),T.complete()}}),YO.innerFrom(S).subscribe(l))})(u)}}wi.share=Dx;function lp(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];if(r===!0){e();return}if(r!==!1){var o=new ZO.SafeSubscriber({next:function(){o.unsubscribe(),e()}});return YO.innerFrom(r.apply(void 0,Nx([],jx(t)))).subscribe(o)}}var fs={};Object.defineProperty(fs,"__esModule",{value:!0});fs.shareReplay=void 0;var Lx=ei,Ux=wi;function Fx(e,r,t){var n,o,i,a,s=!1;return e&&typeof e=="object"?(n=e.bufferSize,a=n===void 0?1/0:n,o=e.windowTime,r=o===void 0?1/0:o,i=e.refCount,s=i===void 0?!1:i,t=e.scheduler):a=e??1/0,Ux.share({connector:function(){return new Lx.ReplaySubject(a,r,t)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}fs.shareReplay=Fx;var ds={};Object.defineProperty(ds,"__esModule",{value:!0});ds.single=void 0;var Bx=tr,xx=ou,Vx=nu,Wx=N,zx=D;function Hx(e){return Wx.operate(function(r,t){var n=!1,o,i=!1,a=0;r.subscribe(zx.createOperatorSubscriber(t,function(s){i=!0,(!e||e(s,a++,r))&&(n&&t.error(new xx.SequenceError("Too many matching values")),n=!0,o=s)},function(){n?(t.next(o),t.complete()):t.error(i?new Vx.NotFoundError("No matching values"):new Bx.EmptyError)}))})}ds.single=Hx;var hs={};Object.defineProperty(hs,"__esModule",{value:!0});hs.skip=void 0;var qx=zt;function Gx(e){return qx.filter(function(r,t){return e<=t})}hs.skip=Gx;var ps={};Object.defineProperty(ps,"__esModule",{value:!0});ps.skipLast=void 0;var Kx=Me,Yx=N,Zx=D;function Qx(e){return e<=0?Kx.identity:Yx.operate(function(r,t){var n=new Array(e),o=0;return r.subscribe(Zx.createOperatorSubscriber(t,function(i){var a=o++;if(a<e)n[a]=i;else{var s=a%e,c=n[s];n[s]=i,t.next(c)}})),function(){n=null}})}ps.skipLast=Qx;var vs={};Object.defineProperty(vs,"__esModule",{value:!0});vs.skipUntil=void 0;var Xx=N,Rm=D,Jx=U,e6=ke;function t6(e){return Xx.operate(function(r,t){var n=!1,o=Rm.createOperatorSubscriber(t,function(){o==null||o.unsubscribe(),n=!0},e6.noop);Jx.innerFrom(e).subscribe(o),r.subscribe(Rm.createOperatorSubscriber(t,function(i){return n&&t.next(i)}))})}vs.skipUntil=t6;var _s={};Object.defineProperty(_s,"__esModule",{value:!0});_s.skipWhile=void 0;var r6=N,n6=D;function o6(e){return r6.operate(function(r,t){var n=!1,o=0;r.subscribe(n6.createOperatorSubscriber(t,function(i){return(n||(n=!e(i,o++)))&&t.next(i)}))})}_s.skipWhile=o6;var ys={};Object.defineProperty(ys,"__esModule",{value:!0});ys.startWith=void 0;var $m=Qn,i6=Re,a6=N;function u6(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=i6.popScheduler(e);return a6.operate(function(n,o){(t?$m.concat(e,n,t):$m.concat(e,n)).subscribe(o)})}ys.startWith=u6;var bs={},an={};Object.defineProperty(an,"__esModule",{value:!0});an.switchMap=void 0;var s6=U,c6=N,jm=D;function l6(e,r){return c6.operate(function(t,n){var o=null,i=0,a=!1,s=function(){return a&&!o&&n.complete()};t.subscribe(jm.createOperatorSubscriber(n,function(c){o==null||o.unsubscribe();var u=0,l=i++;s6.innerFrom(e(c,l)).subscribe(o=jm.createOperatorSubscriber(n,function(d){return n.next(r?r(c,d,l,u++):d)},function(){o=null,s()}))},function(){a=!0,s()}))})}an.switchMap=l6;Object.defineProperty(bs,"__esModule",{value:!0});bs.switchAll=void 0;var f6=an,d6=Me;function h6(){return f6.switchMap(d6.identity)}bs.switchAll=h6;var ms={};Object.defineProperty(ms,"__esModule",{value:!0});ms.switchMapTo=void 0;var Nm=an,p6=ce;function v6(e,r){return p6.isFunction(r)?Nm.switchMap(function(){return e},r):Nm.switchMap(function(){return e})}ms.switchMapTo=v6;var gs={};Object.defineProperty(gs,"__esModule",{value:!0});gs.switchScan=void 0;var _6=an,y6=N;function b6(e,r){return y6.operate(function(t,n){var o=r;return _6.switchMap(function(i,a){return e(o,i,a)},function(i,a){return o=a,a})(t).subscribe(n),function(){o=null}})}gs.switchScan=b6;var ws={};Object.defineProperty(ws,"__esModule",{value:!0});ws.takeUntil=void 0;var m6=N,g6=D,w6=U,O6=ke;function E6(e){return m6.operate(function(r,t){w6.innerFrom(e).subscribe(g6.createOperatorSubscriber(t,function(){return t.complete()},O6.noop)),!t.closed&&r.subscribe(t)})}ws.takeUntil=E6;var Os={};Object.defineProperty(Os,"__esModule",{value:!0});Os.takeWhile=void 0;var S6=N,T6=D;function P6(e,r){return r===void 0&&(r=!1),S6.operate(function(t,n){var o=0;t.subscribe(T6.createOperatorSubscriber(n,function(i){var a=e(i,o++);(a||r)&&n.next(i),!a&&n.complete()}))})}Os.takeWhile=P6;var Es={};Object.defineProperty(Es,"__esModule",{value:!0});Es.tap=void 0;var C6=ce,A6=N,I6=D,R6=Me;function $6(e,r,t){var n=C6.isFunction(e)||r||t?{next:e,error:r,complete:t}:e;return n?A6.operate(function(o,i){var a;(a=n.subscribe)===null||a===void 0||a.call(n);var s=!0;o.subscribe(I6.createOperatorSubscriber(i,function(c){var u;(u=n.next)===null||u===void 0||u.call(n,c),i.next(c)},function(){var c;s=!1,(c=n.complete)===null||c===void 0||c.call(n),i.complete()},function(c){var u;s=!1,(u=n.error)===null||u===void 0||u.call(n,c),i.error(c)},function(){var c,u;s&&((c=n.unsubscribe)===null||c===void 0||c.call(n)),(u=n.finalize)===null||u===void 0||u.call(n)}))}):R6.identity}Es.tap=$6;var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.throttle=void 0;var j6=N,km=D,N6=U;function k6(e,r){return j6.operate(function(t,n){var o=r??{},i=o.leading,a=i===void 0?!0:i,s=o.trailing,c=s===void 0?!1:s,u=!1,l=null,d=null,h=!1,p=function(){d==null||d.unsubscribe(),d=null,c&&(_(),h&&n.complete())},v=function(){d=null,h&&n.complete()},y=function(b){return d=N6.innerFrom(e(b)).subscribe(km.createOperatorSubscriber(n,p,v))},_=function(){if(u){u=!1;var b=l;l=null,n.next(b),!h&&y(b)}};t.subscribe(km.createOperatorSubscriber(n,function(b){u=!0,l=b,!(d&&!d.closed)&&(a?_():y(b))},function(){h=!0,!(c&&u&&d&&!d.closed)&&n.complete()}))})}Oi.throttle=k6;var Ss={};Object.defineProperty(Ss,"__esModule",{value:!0});Ss.throttleTime=void 0;var M6=lt,D6=Oi,L6=nr;function U6(e,r,t){r===void 0&&(r=M6.asyncScheduler);var n=L6.timer(e,r);return D6.throttle(function(){return n},t)}Ss.throttleTime=U6;var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.TimeInterval=Bn.timeInterval=void 0;var F6=lt,B6=N,x6=D;function V6(e){return e===void 0&&(e=F6.asyncScheduler),B6.operate(function(r,t){var n=e.now();r.subscribe(x6.createOperatorSubscriber(t,function(o){var i=e.now(),a=i-n;n=i,t.next(new QO(o,a))}))})}Bn.timeInterval=V6;var QO=function(){function e(r,t){this.value=r,this.interval=t}return e}();Bn.TimeInterval=QO;var Ts={};Object.defineProperty(Ts,"__esModule",{value:!0});Ts.timeoutWith=void 0;var W6=lt,z6=ii,H6=Ea;function q6(e,r,t){var n,o,i;if(t=t??W6.async,z6.isValidDate(e)?n=e:typeof e=="number"&&(o=e),r)i=function(){return r};else throw new TypeError("No observable provided to switch to");if(n==null&&o==null)throw new TypeError("No timeout provided.");return H6.timeout({first:n,each:o,scheduler:t,with:i})}Ts.timeoutWith=q6;var Ps={};Object.defineProperty(Ps,"__esModule",{value:!0});Ps.timestamp=void 0;var G6=Ul,K6=Wt;function Y6(e){return e===void 0&&(e=G6.dateTimestampProvider),K6.map(function(r){return{value:r,timestamp:e.now()}})}Ps.timestamp=Y6;var Cs={};Object.defineProperty(Cs,"__esModule",{value:!0});Cs.window=void 0;var Mm=Ce,Z6=N,Dm=D,Q6=ke,X6=U;function J6(e){return Z6.operate(function(r,t){var n=new Mm.Subject;t.next(n.asObservable());var o=function(i){n.error(i),t.error(i)};return r.subscribe(Dm.createOperatorSubscriber(t,function(i){return n==null?void 0:n.next(i)},function(){n.complete(),t.complete()},o)),X6.innerFrom(e).subscribe(Dm.createOperatorSubscriber(t,function(){n.complete(),t.next(n=new Mm.Subject)},Q6.noop,o)),function(){n==null||n.unsubscribe(),n=null}})}Cs.window=J6;var As={},e3=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(As,"__esModule",{value:!0});As.windowCount=void 0;var Lm=Ce,t3=N,r3=D;function n3(e,r){r===void 0&&(r=0);var t=r>0?r:e;return t3.operate(function(n,o){var i=[new Lm.Subject],a=0;o.next(i[0].asObservable()),n.subscribe(r3.createOperatorSubscriber(o,function(s){var c,u;try{for(var l=e3(i),d=l.next();!d.done;d=l.next()){var h=d.value;h.next(s)}}catch(y){c={error:y}}finally{try{d&&!d.done&&(u=l.return)&&u.call(l)}finally{if(c)throw c.error}}var p=a-e+1;if(p>=0&&p%t===0&&i.shift().complete(),++a%t===0){var v=new Lm.Subject;i.push(v),o.next(v.asObservable())}},function(){for(;i.length>0;)i.shift().complete();o.complete()},function(s){for(;i.length>0;)i.shift().error(s);o.error(s)},function(){i=null}))})}As.windowCount=n3;var Is={};Object.defineProperty(Is,"__esModule",{value:!0});Is.windowTime=void 0;var o3=Ce,i3=lt,a3=Ne,u3=N,s3=D,c3=Bt,l3=Re,Um=Vt;function f3(e){for(var r,t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=(r=l3.popScheduler(n))!==null&&r!==void 0?r:i3.asyncScheduler,a=(t=n[0])!==null&&t!==void 0?t:null,s=n[1]||1/0;return u3.operate(function(c,u){var l=[],d=!1,h=function(_){var b=_.window,w=_.subs;b.complete(),w.unsubscribe(),c3.arrRemove(l,_),d&&p()},p=function(){if(l){var _=new a3.Subscription;u.add(_);var b=new o3.Subject,w={window:b,subs:_,seen:0};l.push(w),u.next(b.asObservable()),Um.executeSchedule(_,i,function(){return h(w)},e)}};a!==null&&a>=0?Um.executeSchedule(u,i,p,a,!0):d=!0,p();var v=function(_){return l.slice().forEach(_)},y=function(_){v(function(b){var w=b.window;return _(w)}),_(u),u.unsubscribe()};return c.subscribe(s3.createOperatorSubscriber(u,function(_){v(function(b){b.window.next(_),s<=++b.seen&&h(b)})},function(){return y(function(_){return _.complete()})},function(_){return y(function(b){return b.error(_)})})),function(){l=null}})}Is.windowTime=f3;var Rs={},d3=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Rs,"__esModule",{value:!0});Rs.windowToggle=void 0;var h3=Ce,p3=Ne,v3=N,Fm=U,fp=D,Bm=ke,_3=Bt;function y3(e,r){return v3.operate(function(t,n){var o=[],i=function(a){for(;0<o.length;)o.shift().error(a);n.error(a)};Fm.innerFrom(e).subscribe(fp.createOperatorSubscriber(n,function(a){var s=new h3.Subject;o.push(s);var c=new p3.Subscription,u=function(){_3.arrRemove(o,s),s.complete(),c.unsubscribe()},l;try{l=Fm.innerFrom(r(a))}catch(d){i(d);return}n.next(s.asObservable()),c.add(l.subscribe(fp.createOperatorSubscriber(n,u,Bm.noop,i)))},Bm.noop)),t.subscribe(fp.createOperatorSubscriber(n,function(a){var s,c,u=o.slice();try{for(var l=d3(u),d=l.next();!d.done;d=l.next()){var h=d.value;h.next(a)}}catch(p){s={error:p}}finally{try{d&&!d.done&&(c=l.return)&&c.call(l)}finally{if(s)throw s.error}}},function(){for(;0<o.length;)o.shift().complete();n.complete()},i,function(){for(;0<o.length;)o.shift().unsubscribe()}))})}Rs.windowToggle=y3;var $s={};Object.defineProperty($s,"__esModule",{value:!0});$s.windowWhen=void 0;var b3=Ce,m3=N,xm=D,g3=U;function w3(e){return m3.operate(function(r,t){var n,o,i=function(s){n.error(s),t.error(s)},a=function(){o==null||o.unsubscribe(),n==null||n.complete(),n=new b3.Subject,t.next(n.asObservable());var s;try{s=g3.innerFrom(e())}catch(c){i(c);return}s.subscribe(o=xm.createOperatorSubscriber(t,a,a,i))};a(),r.subscribe(xm.createOperatorSubscriber(t,function(s){return n.next(s)},function(){n.complete(),t.complete()},i,function(){o==null||o.unsubscribe(),n=null}))})}$s.windowWhen=w3;var js={},Vm=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Wm=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(js,"__esModule",{value:!0});js.withLatestFrom=void 0;var O3=N,zm=D,E3=U,S3=Me,T3=ke,P3=Re;function C3(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=P3.popResultSelector(e);return O3.operate(function(n,o){for(var i=e.length,a=new Array(i),s=e.map(function(){return!1}),c=!1,u=function(d){E3.innerFrom(e[d]).subscribe(zm.createOperatorSubscriber(o,function(h){a[d]=h,!c&&!s[d]&&(s[d]=!0,(c=s.every(S3.identity))&&(s=null))},T3.noop))},l=0;l<i;l++)u(l);n.subscribe(zm.createOperatorSubscriber(o,function(d){if(c){var h=Wm([d],Vm(a));o.next(t?t.apply(void 0,Wm([],Vm(h))):h)}}))})}js.withLatestFrom=C3;var Ns={};Object.defineProperty(Ns,"__esModule",{value:!0});Ns.zipAll=void 0;var A3=ui,I3=mu;function R3(e){return I3.joinAllInternals(A3.zip,e)}Ns.zipAll=R3;var ks={},Ms={},$3=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},j3=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(Ms,"__esModule",{value:!0});Ms.zip=void 0;var N3=ui,k3=N;function M3(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return k3.operate(function(t,n){N3.zip.apply(void 0,j3([t],$3(e))).subscribe(n)})}Ms.zip=M3;var D3=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},L3=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(ks,"__esModule",{value:!0});ks.zipWith=void 0;var U3=Ms;function F3(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return U3.zip.apply(void 0,L3([],D3(e)))}ks.zipWith=F3;(function(e){var r=f&&f.__createBinding||(Object.create?function(lo,fo,ir,ln){ln===void 0&&(ln=ir),Object.defineProperty(lo,ln,{enumerable:!0,get:function(){return fo[ir]}})}:function(lo,fo,ir,ln){ln===void 0&&(ln=ir),lo[ln]=fo[ir]}),t=f&&f.__exportStar||function(lo,fo){for(var ir in lo)ir!=="default"&&!Object.prototype.hasOwnProperty.call(fo,ir)&&r(fo,lo,ir)};Object.defineProperty(e,"__esModule",{value:!0}),e.interval=e.iif=e.generate=e.fromEventPattern=e.fromEvent=e.from=e.forkJoin=e.empty=e.defer=e.connectable=e.concat=e.combineLatest=e.bindNodeCallback=e.bindCallback=e.UnsubscriptionError=e.TimeoutError=e.SequenceError=e.ObjectUnsubscribedError=e.NotFoundError=e.EmptyError=e.ArgumentOutOfRangeError=e.firstValueFrom=e.lastValueFrom=e.isObservable=e.identity=e.noop=e.pipe=e.NotificationKind=e.Notification=e.Subscriber=e.Subscription=e.Scheduler=e.VirtualAction=e.VirtualTimeScheduler=e.animationFrameScheduler=e.animationFrame=e.queueScheduler=e.queue=e.asyncScheduler=e.async=e.asapScheduler=e.asap=e.AsyncSubject=e.ReplaySubject=e.BehaviorSubject=e.Subject=e.animationFrames=e.observable=e.ConnectableObservable=e.Observable=void 0,e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.combineLatestWith=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=e.config=e.NEVER=e.EMPTY=e.scheduled=e.zip=e.using=e.timer=e.throwError=e.range=e.race=e.partition=e.pairs=e.onErrorResumeNext=e.of=e.never=e.merge=void 0,e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.pairwise=e.onErrorResumeNextWith=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=e.mergeAll=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=void 0,e.zipWith=e.zipAll=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=void 0;var n=le;Object.defineProperty(e,"Observable",{enumerable:!0,get:function(){return n.Observable}});var o=Yn;Object.defineProperty(e,"ConnectableObservable",{enumerable:!0,get:function(){return o.ConnectableObservable}});var i=Kn;Object.defineProperty(e,"observable",{enumerable:!0,get:function(){return i.observable}});var a=Ll;Object.defineProperty(e,"animationFrames",{enumerable:!0,get:function(){return a.animationFrames}});var s=Ce;Object.defineProperty(e,"Subject",{enumerable:!0,get:function(){return s.Subject}});var c=Ha;Object.defineProperty(e,"BehaviorSubject",{enumerable:!0,get:function(){return c.BehaviorSubject}});var u=ei;Object.defineProperty(e,"ReplaySubject",{enumerable:!0,get:function(){return u.ReplaySubject}});var l=ti;Object.defineProperty(e,"AsyncSubject",{enumerable:!0,get:function(){return l.AsyncSubject}});var d=wO;Object.defineProperty(e,"asap",{enumerable:!0,get:function(){return d.asap}}),Object.defineProperty(e,"asapScheduler",{enumerable:!0,get:function(){return d.asapScheduler}});var h=lt;Object.defineProperty(e,"async",{enumerable:!0,get:function(){return h.async}}),Object.defineProperty(e,"asyncScheduler",{enumerable:!0,get:function(){return h.asyncScheduler}});var p=SO;Object.defineProperty(e,"queue",{enumerable:!0,get:function(){return p.queue}}),Object.defineProperty(e,"queueScheduler",{enumerable:!0,get:function(){return p.queueScheduler}});var v=TO;Object.defineProperty(e,"animationFrame",{enumerable:!0,get:function(){return v.animationFrame}}),Object.defineProperty(e,"animationFrameScheduler",{enumerable:!0,get:function(){return v.animationFrameScheduler}});var y=Lo;Object.defineProperty(e,"VirtualTimeScheduler",{enumerable:!0,get:function(){return y.VirtualTimeScheduler}}),Object.defineProperty(e,"VirtualAction",{enumerable:!0,get:function(){return y.VirtualAction}});var _=qa;Object.defineProperty(e,"Scheduler",{enumerable:!0,get:function(){return _.Scheduler}});var b=Ne;Object.defineProperty(e,"Subscription",{enumerable:!0,get:function(){return b.Subscription}});var w=Xo;Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return w.Subscriber}});var S=ql;Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return S.Notification}}),Object.defineProperty(e,"NotificationKind",{enumerable:!0,get:function(){return S.NotificationKind}});var E=br;Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return E.pipe}});var T=ke;Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return T.noop}});var C=Me;Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return C.identity}});var P=Ql;Object.defineProperty(e,"isObservable",{enumerable:!0,get:function(){return P.isObservable}});var I=Xl;Object.defineProperty(e,"lastValueFrom",{enumerable:!0,get:function(){return I.lastValueFrom}});var M=Jl;Object.defineProperty(e,"firstValueFrom",{enumerable:!0,get:function(){return M.firstValueFrom}});var F=ru;Object.defineProperty(e,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return F.ArgumentOutOfRangeError}});var Q=tr;Object.defineProperty(e,"EmptyError",{enumerable:!0,get:function(){return Q.EmptyError}});var q=nu;Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return q.NotFoundError}});var Z=za;Object.defineProperty(e,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return Z.ObjectUnsubscribedError}});var fe=ou;Object.defineProperty(e,"SequenceError",{enumerable:!0,get:function(){return fe.SequenceError}});var V=Ea;Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return V.TimeoutError}});var ie=Va;Object.defineProperty(e,"UnsubscriptionError",{enumerable:!0,get:function(){return ie.UnsubscriptionError}});var W=ef;Object.defineProperty(e,"bindCallback",{enumerable:!0,get:function(){return W.bindCallback}});var te=tf;Object.defineProperty(e,"bindNodeCallback",{enumerable:!0,get:function(){return te.bindNodeCallback}});var K=Br;Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return K.combineLatest}});var L=Qn;Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return L.concat}});var re=rf;Object.defineProperty(e,"connectable",{enumerable:!0,get:function(){return re.connectable}});var pe=Jn;Object.defineProperty(e,"defer",{enumerable:!0,get:function(){return pe.defer}});var Ae=Ut;Object.defineProperty(e,"empty",{enumerable:!0,get:function(){return Ae.empty}});var X=nf;Object.defineProperty(e,"forkJoin",{enumerable:!0,get:function(){return X.forkJoin}});var $e=xt;Object.defineProperty(e,"from",{enumerable:!0,get:function(){return $e.from}});var ve=of;Object.defineProperty(e,"fromEvent",{enumerable:!0,get:function(){return ve.fromEvent}});var ft=af;Object.defineProperty(e,"fromEventPattern",{enumerable:!0,get:function(){return ft.fromEventPattern}});var m=uf;Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return m.generate}});var A=sf;Object.defineProperty(e,"iif",{enumerable:!0,get:function(){return A.iif}});var k=su;Object.defineProperty(e,"interval",{enumerable:!0,get:function(){return k.interval}});var B=cf;Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return B.merge}});var J=vv;Object.defineProperty(e,"never",{enumerable:!0,get:function(){return J.never}});var Ue=ri;Object.defineProperty(e,"of",{enumerable:!0,get:function(){return Ue.of}});var At=cu;Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return At.onErrorResumeNext}});var cn=lf;Object.defineProperty(e,"pairs",{enumerable:!0,get:function(){return cn.pairs}});var Di=ff;Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return Di.partition}});var Ud=Un;Object.defineProperty(e,"race",{enumerable:!0,get:function(){return Ud.race}});var Fd=df;Object.defineProperty(e,"range",{enumerable:!0,get:function(){return Fd.range}});var Bd=tu;Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return Bd.throwError}});var xd=nr;Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return xd.timer}});var Vd=hf;Object.defineProperty(e,"using",{enumerable:!0,get:function(){return Vd.using}});var Wd=ui;Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return Wd.zip}});var zd=Ga;Object.defineProperty(e,"scheduled",{enumerable:!0,get:function(){return zd.scheduled}});var Hd=Ut;Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return Hd.EMPTY}});var qd=vv;Object.defineProperty(e,"NEVER",{enumerable:!0,get:function(){return qd.NEVER}}),t(VO,e);var Gd=Zr;Object.defineProperty(e,"config",{enumerable:!0,get:function(){return Gd.config}});var Kd=si;Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return Kd.audit}});var Yd=fu;Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return Yd.auditTime}});var Zd=du;Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return Zd.buffer}});var Qd=hu;Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return Qd.bufferCount}});var Xd=pu;Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return Xd.bufferTime}});var Jd=vu;Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return Jd.bufferToggle}});var eh=_u;Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return eh.bufferWhen}});var th=yu;Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return th.catchError}});var rh=bu;Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return rh.combineAll}});var nh=ci;Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return nh.combineLatestAll}});var oh=wu;Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return oh.combineLatestWith}});var ih=Xn;Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return ih.concatAll}});var ah=fi;Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return ah.concatMap}});var uh=Eu;Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return uh.concatMapTo}});var sh=Su;Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return sh.concatWith}});var ch=eo;Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return ch.connect}});var lh=Pu;Object.defineProperty(e,"count",{enumerable:!0,get:function(){return lh.count}});var fh=Cu;Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return fh.debounce}});var dh=Au;Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return dh.debounceTime}});var hh=rn;Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return hh.defaultIfEmpty}});var ph=Iu;Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return ph.delay}});var vh=di;Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return vh.delayWhen}});var _h=Ru;Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return _h.dematerialize}});var yh=$u;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return yh.distinct}});var bh=vi;Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return bh.distinctUntilChanged}});var mh=ju;Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return mh.distinctUntilKeyChanged}});var gh=Nu;Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return gh.elementAt}});var wh=ku;Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return wh.endWith}});var Oh=Mu;Object.defineProperty(e,"every",{enumerable:!0,get:function(){return Oh.every}});var Eh=Du;Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return Eh.exhaust}});var Sh=_i;Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return Sh.exhaustAll}});var Th=yi;Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return Th.exhaustMap}});var Ph=Lu;Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return Ph.expand}});var Ch=zt;Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return Ch.filter}});var Ah=Uu;Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return Ah.finalize}});var Ih=xr;Object.defineProperty(e,"find",{enumerable:!0,get:function(){return Ih.find}});var Rh=Fu;Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return Rh.findIndex}});var $h=Bu;Object.defineProperty(e,"first",{enumerable:!0,get:function(){return $h.first}});var jh=xu;Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return jh.groupBy}});var Nh=hi;Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return Nh.ignoreElements}});var kh=Vu;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return kh.isEmpty}});var Mh=Wu;Object.defineProperty(e,"last",{enumerable:!0,get:function(){return Mh.last}});var Dh=Wt;Object.defineProperty(e,"map",{enumerable:!0,get:function(){return Dh.map}});var Lh=pi;Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return Lh.mapTo}});var Uh=zu;Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return Uh.materialize}});var Fh=Hu;Object.defineProperty(e,"max",{enumerable:!0,get:function(){return Fh.max}});var Bh=tn;Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return Bh.mergeAll}});var xh=qu;Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return xh.flatMap}});var Vh=Pt;Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return Vh.mergeMap}});var Wh=Gu;Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return Wh.mergeMapTo}});var zh=Ku;Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return zh.mergeScan}});var DT=Yu;Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return DT.mergeWith}});var LT=Qu;Object.defineProperty(e,"min",{enumerable:!0,get:function(){return LT.min}});var UT=to;Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return UT.multicast}});var FT=Jr;Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return FT.observeOn}});var BT=Fn;Object.defineProperty(e,"onErrorResumeNextWith",{enumerable:!0,get:function(){return BT.onErrorResumeNextWith}});var xT=Xu;Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return xT.pairwise}});var VT=Ju;Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return VT.pluck}});var WT=es;Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return WT.publish}});var zT=ts;Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return zT.publishBehavior}});var HT=rs;Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return HT.publishLast}});var qT=ns;Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return qT.publishReplay}});var GT=mi;Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return GT.raceWith}});var KT=gr;Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return KT.reduce}});var YT=os;Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return YT.repeat}});var ZT=is;Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return ZT.repeatWhen}});var QT=as;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return QT.retry}});var XT=us;Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return XT.retryWhen}});var JT=Jo;Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return JT.refCount}});var eP=gi;Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return eP.sample}});var tP=ss;Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return tP.sampleTime}});var rP=cs;Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return rP.scan}});var nP=ls;Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return nP.sequenceEqual}});var oP=wi;Object.defineProperty(e,"share",{enumerable:!0,get:function(){return oP.share}});var iP=fs;Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return iP.shareReplay}});var aP=ds;Object.defineProperty(e,"single",{enumerable:!0,get:function(){return aP.single}});var uP=hs;Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return uP.skip}});var sP=ps;Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return sP.skipLast}});var cP=vs;Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return cP.skipUntil}});var lP=_s;Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return lP.skipWhile}});var fP=ys;Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return fP.startWith}});var dP=en;Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return dP.subscribeOn}});var hP=bs;Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return hP.switchAll}});var pP=an;Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return pP.switchMap}});var vP=ms;Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return vP.switchMapTo}});var _P=gs;Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return _P.switchScan}});var yP=nn;Object.defineProperty(e,"take",{enumerable:!0,get:function(){return yP.take}});var bP=bi;Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return bP.takeLast}});var mP=ws;Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return mP.takeUntil}});var gP=Os;Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return gP.takeWhile}});var wP=Es;Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return wP.tap}});var OP=Oi;Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return OP.throttle}});var EP=Ss;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return EP.throttleTime}});var SP=on;Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return SP.throwIfEmpty}});var TP=Bn;Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return TP.timeInterval}});var PP=Ea;Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return PP.timeout}});var CP=Ts;Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return CP.timeoutWith}});var AP=Ps;Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return AP.timestamp}});var IP=li;Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return IP.toArray}});var RP=Cs;Object.defineProperty(e,"window",{enumerable:!0,get:function(){return RP.window}});var $P=As;Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return $P.windowCount}});var jP=Is;Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return jP.windowTime}});var NP=Rs;Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return NP.windowToggle}});var kP=$s;Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return kP.windowWhen}});var MP=js;Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return MP.withLatestFrom}});var DP=Ns;Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return DP.zipAll}});var LP=ks;Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return LP.zipWith}})})(xa);var vf={},_f={};Object.defineProperty(_f,"__esModule",{value:!0});_f.partition=void 0;var B3=lu,Hm=zt;function x3(e,r){return function(t){return[Hm.filter(e,r)(t),Hm.filter(B3.not(e,r))(t)]}}_f.partition=x3;var yf={},V3=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},W3=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,o=e.length;t<n;t++,o++)e[o]=r[t];return e};Object.defineProperty(yf,"__esModule",{value:!0});yf.race=void 0;var z3=mr,H3=mi;function q3(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return H3.raceWith.apply(void 0,W3([],V3(z3.argsOrArgArray(e))))}yf.race=q3;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=e.merge=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.concat=e.combineLatestWith=e.combineLatest=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=void 0,e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.race=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.partition=e.pairwise=e.onErrorResumeNext=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=void 0,e.zipWith=e.zipAll=e.zip=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=void 0;var r=si;Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return r.audit}});var t=fu;Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return t.auditTime}});var n=du;Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return n.buffer}});var o=hu;Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return o.bufferCount}});var i=pu;Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return i.bufferTime}});var a=vu;Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return a.bufferToggle}});var s=_u;Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return s.bufferWhen}});var c=yu;Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return c.catchError}});var u=bu;Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return u.combineAll}});var l=ci;Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return l.combineLatestAll}});var d=Ou;Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return d.combineLatest}});var h=wu;Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return h.combineLatestWith}});var p=Tu;Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return p.concat}});var v=Xn;Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return v.concatAll}});var y=fi;Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return y.concatMap}});var _=Eu;Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return _.concatMapTo}});var b=Su;Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return b.concatWith}});var w=eo;Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return w.connect}});var S=Pu;Object.defineProperty(e,"count",{enumerable:!0,get:function(){return S.count}});var E=Cu;Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return E.debounce}});var T=Au;Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return T.debounceTime}});var C=rn;Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return C.defaultIfEmpty}});var P=Iu;Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return P.delay}});var I=di;Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return I.delayWhen}});var M=Ru;Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return M.dematerialize}});var F=$u;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return F.distinct}});var Q=vi;Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return Q.distinctUntilChanged}});var q=ju;Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return q.distinctUntilKeyChanged}});var Z=Nu;Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return Z.elementAt}});var fe=ku;Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return fe.endWith}});var V=Mu;Object.defineProperty(e,"every",{enumerable:!0,get:function(){return V.every}});var ie=Du;Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return ie.exhaust}});var W=_i;Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return W.exhaustAll}});var te=yi;Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return te.exhaustMap}});var K=Lu;Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return K.expand}});var L=zt;Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return L.filter}});var re=Uu;Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return re.finalize}});var pe=xr;Object.defineProperty(e,"find",{enumerable:!0,get:function(){return pe.find}});var Ae=Fu;Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return Ae.findIndex}});var X=Bu;Object.defineProperty(e,"first",{enumerable:!0,get:function(){return X.first}});var $e=xu;Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return $e.groupBy}});var ve=hi;Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return ve.ignoreElements}});var ft=Vu;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return ft.isEmpty}});var m=Wu;Object.defineProperty(e,"last",{enumerable:!0,get:function(){return m.last}});var A=Wt;Object.defineProperty(e,"map",{enumerable:!0,get:function(){return A.map}});var k=pi;Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return k.mapTo}});var B=zu;Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return B.materialize}});var J=Hu;Object.defineProperty(e,"max",{enumerable:!0,get:function(){return J.max}});var Ue=Zu;Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return Ue.merge}});var At=tn;Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return At.mergeAll}});var cn=qu;Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return cn.flatMap}});var Di=Pt;Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return Di.mergeMap}});var Ud=Gu;Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return Ud.mergeMapTo}});var Fd=Ku;Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return Fd.mergeScan}});var Bd=Yu;Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return Bd.mergeWith}});var xd=Qu;Object.defineProperty(e,"min",{enumerable:!0,get:function(){return xd.min}});var Vd=to;Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return Vd.multicast}});var Wd=Jr;Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return Wd.observeOn}});var zd=Fn;Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return zd.onErrorResumeNext}});var Hd=Xu;Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return Hd.pairwise}});var qd=_f;Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return qd.partition}});var Gd=Ju;Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return Gd.pluck}});var Kd=es;Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return Kd.publish}});var Yd=ts;Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return Yd.publishBehavior}});var Zd=rs;Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return Zd.publishLast}});var Qd=ns;Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return Qd.publishReplay}});var Xd=yf;Object.defineProperty(e,"race",{enumerable:!0,get:function(){return Xd.race}});var Jd=mi;Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return Jd.raceWith}});var eh=gr;Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return eh.reduce}});var th=os;Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return th.repeat}});var rh=is;Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return rh.repeatWhen}});var nh=as;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return nh.retry}});var oh=us;Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return oh.retryWhen}});var ih=Jo;Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return ih.refCount}});var ah=gi;Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return ah.sample}});var uh=ss;Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return uh.sampleTime}});var sh=cs;Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return sh.scan}});var ch=ls;Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return ch.sequenceEqual}});var lh=wi;Object.defineProperty(e,"share",{enumerable:!0,get:function(){return lh.share}});var fh=fs;Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return fh.shareReplay}});var dh=ds;Object.defineProperty(e,"single",{enumerable:!0,get:function(){return dh.single}});var hh=hs;Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return hh.skip}});var ph=ps;Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return ph.skipLast}});var vh=vs;Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return vh.skipUntil}});var _h=_s;Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return _h.skipWhile}});var yh=ys;Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return yh.startWith}});var bh=en;Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return bh.subscribeOn}});var mh=bs;Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return mh.switchAll}});var gh=an;Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return gh.switchMap}});var wh=ms;Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return wh.switchMapTo}});var Oh=gs;Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return Oh.switchScan}});var Eh=nn;Object.defineProperty(e,"take",{enumerable:!0,get:function(){return Eh.take}});var Sh=bi;Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return Sh.takeLast}});var Th=ws;Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return Th.takeUntil}});var Ph=Os;Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return Ph.takeWhile}});var Ch=Es;Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return Ch.tap}});var Ah=Oi;Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return Ah.throttle}});var Ih=Ss;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return Ih.throttleTime}});var Rh=on;Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return Rh.throwIfEmpty}});var $h=Bn;Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return $h.timeInterval}});var jh=Ea;Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return jh.timeout}});var Nh=Ts;Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return Nh.timeoutWith}});var kh=Ps;Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return kh.timestamp}});var Mh=li;Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return Mh.toArray}});var Dh=Cs;Object.defineProperty(e,"window",{enumerable:!0,get:function(){return Dh.window}});var Lh=As;Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return Lh.windowCount}});var Uh=Is;Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return Uh.windowTime}});var Fh=Rs;Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return Fh.windowToggle}});var Bh=$s;Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return Bh.windowWhen}});var xh=js;Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return xh.withLatestFrom}});var Vh=Ms;Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return Vh.zip}});var Wh=Ns;Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return Wh.zipAll}});var zh=ks;Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return zh.zipWith}})})(vf);var Ei={},Ao=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Io=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Ei,"__esModule",{value:!0});var G3=H,En=xa,vn=vf,Wi={READY:0,STREAMING:1,COMPLETED:2},K3=function(){function e(r,t){var n=r.pipe((0,vn.publishReplay)(1),(0,vn.refCount)());this._result=n,this._keys=n.pipe((0,vn.mergeMap)(function(o){return(0,En.from)(o.keys())}),(0,vn.publishReplay)(1),(0,vn.refCount)()),this._records=void 0,this._controls=new XO,this._summary=new En.ReplaySubject,this._state=t||Wi.READY}return e.prototype.keys=function(){return this._keys},e.prototype.records=function(){var r=this,t=this._result.pipe((0,vn.mergeMap)(function(n){return new En.Observable(function(o){return r._startStreaming({result:n,recordsObserver:o})})}));return t.push=function(){return r._push()},t},e.prototype.consume=function(){var r=this;return this._result.pipe((0,vn.mergeMap)(function(t){return new En.Observable(function(n){return r._startStreaming({result:t,summaryObserver:n})})}))},e.prototype.pause=function(){this._controls.pause()},e.prototype.resume=function(){return this._controls.resume()},e.prototype.push=function(){return this._controls.push()},e.prototype._startStreaming=function(r){var t=r===void 0?{}:r,n=t.result,o=t.recordsObserver,i=o===void 0?null:o,a=t.summaryObserver,s=a===void 0?null:a,c=[];return s&&c.push(this._summary.subscribe(s)),this._state<Wi.STREAMING?(this._state=Wi.STREAMING,this._setupRecordsStream(n),i?c.push(this._records.subscribe(i)):n._cancel(),c.push({unsubscribe:function(){n._cancel&&n._cancel()}})):i&&i.error((0,G3.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){c.forEach(function(u){return u.unsubscribe()})}},e.prototype._toObservable=function(){var r=this;function t(n){return new En.Observable(function(o){o.next(n),o.complete()})}return new En.Observable(function(n){r._result.subscribe({complete:function(){return n.complete()},next:function(o){return n.next(new e(t(o)),r._state)},error:function(o){return n.error(o)}})})},e.prototype._setupRecordsStream=function(r){var t=this;return this._records?this._records:(this._records=Y3(r[Symbol.asyncIterator](),{complete:function(){return Ao(t,void 0,void 0,function(){var n,o;return Io(this,function(i){switch(i.label){case 0:return this._state=Wi.COMPLETED,o=(n=this._summary).next,[4,r.summary()];case 1:return o.apply(n,[i.sent()]),this._summary.complete(),[2]}})})},error:function(n){t._state=Wi.COMPLETED,t._summary.error(n)}},this._controls),this._records)},e}();Ei.default=K3;function Y3(e,r,t){var n=this;t===void 0&&(t=new XO);var o=new En.Subject,i=function(s){return Ao(n,void 0,void 0,function(){var c,u,l,d;return Io(this,function(h){switch(h.label){case 0:return h.trys.push([0,2,3,4]),t.pushing=!0,[4,s];case 1:return c=h.sent(),u=c.done,l=c.value,u?(o.complete(),r.complete()):(o.next(l),t.paused||i(e.next()).catch(function(){})),[3,4];case 2:return d=h.sent(),o.error(d),r.error(d),[3,4];case 3:return t.pushing=!1,[7];case 4:return[2]}})})};function a(s){return Ao(this,void 0,void 0,function(){return Io(this,function(c){switch(c.label){case 0:return[4,i(e.next(s))];case 1:return c.sent(),[2]}})})}return t.pusher=a,a(),o}var XO=function(){function e(r){r===void 0&&(r=function(){return Ao(t,void 0,void 0,function(){return Io(this,function(n){return[2]})})});var t=this;this._paused=!1,this._pushing=!1,this._push=r}return e.prototype.pause=function(){this._paused=!0},Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushing",{get:function(){return this._pushing},set:function(r){this._pushing=r},enumerable:!1,configurable:!0}),e.prototype.resume=function(){return Ao(this,void 0,void 0,function(){var r;return Io(this,function(t){switch(t.label){case 0:return r=this._paused,this._paused=!1,r&&!this._pushing?[4,this._push()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.push=function(){return Ao(this,void 0,void 0,function(){return Io(this,function(r){switch(r.label){case 0:return this.pause(),[4,this._push()];case 1:return[2,r.sent()]}})})},Object.defineProperty(e.prototype,"pusher",{get:function(){return this._push},set:function(r){this._push=r},enumerable:!1,configurable:!0}),e}(),Ds={},JO=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ds,"__esModule",{value:!0});var nc=xa,Z3=JO(Ei);JO(H);var Q3=function(){function e(r){this._txc=r}return e.prototype.run=function(r,t){var n=this;return new Z3.default(new nc.Observable(function(o){try{o.next(n._txc.run(r,t)),o.complete()}catch(i){o.error(i)}return function(){}}))},e.prototype.commit=function(){var r=this;return new nc.Observable(function(t){r._txc.commit().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype.rollback=function(){var r=this;return new nc.Observable(function(t){r._txc.rollback().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype.isOpen=function(){return this._txc.isOpen()},e.prototype.close=function(){var r=this;return new nc.Observable(function(t){r._txc.close().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e}();Ds.default=Q3;var bf={},e1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bf,"__esModule",{value:!0});e1(Ei);e1(Ds);var X3=function(){function e(r){var t=r.run;this._run=t}return e.fromTransaction=function(r){return new e({run:r.run.bind(r)})},e.prototype.run=function(r,t){return this._run(r,t)},e}();bf.default=X3;var R_={};Object.defineProperty(R_,"__esModule",{value:!0});var Vc=H,dp=xa,hp=vf;Vc.internal.logger.Logger;var J3=Vc.error.SERVICE_UNAVAILABLE,qm=30*1e3,Gm=1e3,Km=2,Ym=.2,e8=function(){function e(r){var t=r===void 0?{}:r,n=t.maxRetryTimeout,o=n===void 0?qm:n,i=t.initialDelay,a=i===void 0?Gm:i,s=t.delayMultiplier,c=s===void 0?Km:s,u=t.delayJitter,l=u===void 0?Ym:u,d=t.logger,h=d===void 0?null:d;this._maxRetryTimeout=oc(o,qm),this._initialDelay=oc(a,Gm),this._delayMultiplier=oc(c,Km),this._delayJitter=oc(l,Ym),this._logger=h}return e.prototype.retry=function(r){var t=this;return r.pipe((0,hp.retryWhen)(function(n){var o=[],i=Date.now(),a=1,s=t._initialDelay;return n.pipe((0,hp.mergeMap)(function(c){if(!(0,Vc.isRetriableError)(c))return(0,dp.throwError)(function(){return c});if(o.push(c),a>=2&&Date.now()-i>=t._maxRetryTimeout){var u=(0,Vc.newError)("Failed after retried for ".concat(a," times in ").concat(t._maxRetryTimeout," ms. Make sure that your database is online and retry again."),J3);return u.seenErrors=o,(0,dp.throwError)(function(){return u})}var l=t._computeNextDelay(s);return s=s*t._delayMultiplier,a++,t._logger&&t._logger.warn("Transaction failed and will be retried in ".concat(l)),(0,dp.of)(1).pipe((0,hp.delay)(l))}))}))},e.prototype._computeNextDelay=function(r){var t=r*this._delayJitter;return r-t+2*t*Math.random()},e}();R_.default=e8;function oc(e,r){return e||e===0?e:r}var mf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ml,"__esModule",{value:!0});var _n=xa,zi=vf,t8=mf(Ei),t1=H,r8=mf(Ds),n8=mf(bf),o8=mf(R_),$_=t1.internal.constants,Zm=$_.ACCESS_MODE_READ,Qm=$_.ACCESS_MODE_WRITE,Xm=$_.TELEMETRY_APIS,ic=t1.internal.txConfig.TxConfig,i8=function(){function e(r){var t=r===void 0?{}:r,n=t.session,o=t.config,i=t.log;this._session=n,this._retryLogic=a8(o),this._log=i}return e.prototype.run=function(r,t,n){var o=this;return new t8.default(new _n.Observable(function(i){try{i.next(o._session.run(r,t,n)),i.complete()}catch(a){i.error(a)}return function(){}}))},e.prototype.beginTransaction=function(r){return this._beginTransaction(this._session._mode,r,{api:Xm.UNMANAGED_TRANSACTION})},e.prototype.readTransaction=function(r,t){return this._runTransaction(Zm,r,t)},e.prototype.writeTransaction=function(r,t){return this._runTransaction(Qm,r,t)},e.prototype.executeRead=function(r,t){return this._executeInTransaction(Zm,r,t)},e.prototype.executeWrite=function(r,t){return this._executeInTransaction(Qm,r,t)},e.prototype._executeInTransaction=function(r,t,n){var o=function(i){return new n8.default({run:i.run.bind(i)})};return this._runTransaction(r,t,n,o)},e.prototype.close=function(){var r=this;return new _n.Observable(function(t){r._session.close().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype.lastBookmark=function(){return this.lastBookmarks()},e.prototype.lastBookmarks=function(){return this._session.lastBookmarks()},e.prototype._beginTransaction=function(r,t,n){var o=this,i=ic.empty();return t&&(i=new ic(t,this._log)),new _n.Observable(function(a){try{o._session._beginTransaction(r,i,n).then(function(s){a.next(new r8.default(s)),a.complete()}).catch(function(s){return a.error(s)})}catch(s){a.error(s)}return function(){}})},e.prototype._runTransaction=function(r,t,n,o){var i=this;o===void 0&&(o=function(c){return c});var a=ic.empty();n&&(a=new ic(n));var s={apiTelemetryConfig:{api:Xm.MANAGED_TRANSACTION,onTelemetrySuccess:function(){s.apiTelemetryConfig=void 0}}};return this._retryLogic.retry((0,_n.of)(1).pipe((0,zi.mergeMap)(function(){return i._beginTransaction(r,a,s.apiTelemetryConfig)}),(0,zi.mergeMap)(function(c){return(0,_n.defer)(function(){try{return t(o(c))}catch(u){return(0,_n.throwError)(function(){return u})}}).pipe((0,zi.catchError)(function(u){return c.rollback().pipe((0,zi.concatWith)((0,_n.throwError)(function(){return u})))}),(0,zi.concatWith)(c.commit()))})))},e}();Ml.default=i8;function a8(e){var r=e&&e.maxTransactionRetryTime?e.maxTransactionRetryTime:null;return new o8.default({maxRetryTimeout:r})}var u8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),s8=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dr,"__esModule",{value:!0});dr.WRITE=dr.READ=dr.Driver=void 0;var gf=H,c8=s8(Ml),Jm=gf.internal.constants.FETCH_ALL,l8=gf.driver.READ,r1=gf.driver.WRITE;dr.READ=l8;dr.WRITE=r1;var n1=function(e){u8(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.rxSession=function(t){var n=t===void 0?{}:t,o=n.defaultAccessMode,i=o===void 0?r1:o,a=n.bookmarks,s=n.database,c=s===void 0?"":s,u=n.fetchSize,l=n.impersonatedUser,d=n.bookmarkManager,h=n.notificationFilter,p=n.auth;return new c8.default({session:this._newSession({defaultAccessMode:i,bookmarkOrBookmarks:a,database:c,impersonatedUser:l,auth:p,reactive:!1,fetchSize:f8(u,this._config.fetchSize),bookmarkManager:d,notificationFilter:h,log:this._log}),config:this._config,log:this._log})},r}(gf.Driver);dr.Driver=n1;function f8(e,r){var t=parseInt(e,10);if(t>0||t===Jm)return t;if(t===0||t<0)throw new Error("The fetch size can only be a positive value or ".concat(Jm," for ALL. However fetchSize = ").concat(t));return r}dr.default=n1;var j_={};Object.defineProperty(j_,"__esModule",{value:!0});j_.default="5.28.1";var o1={},Vr={},wf={};Object.defineProperty(wf,"__esModule",{value:!0});var d8=function(){function e(){}return e.prototype.selectReader=function(r){throw new Error("Abstract function")},e.prototype.selectWriter=function(r){throw new Error("Abstract function")},e}();wf.default=d8;var N_={},k_={};Object.defineProperty(k_,"__esModule",{value:!0});var h8=function(){function e(r){this._offset=r||0}return e.prototype.next=function(r){if(r===0)return-1;var t=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),t%r},e}();k_.default=h8;var p8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),i1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(N_,"__esModule",{value:!0});var eg=i1(k_),v8=i1(wf),_8=function(e){p8(r,e);function r(t){var n=e.call(this)||this;return n._readersIndex=new eg.default,n._writersIndex=new eg.default,n._connectionPool=t,n}return r.prototype.selectReader=function(t){return this._select(t,this._readersIndex)},r.prototype.selectWriter=function(t){return this._select(t,this._writersIndex)},r.prototype._select=function(t,n){var o=t.length;if(o===0)return null;var i=n.next(o),a=i,s=null,c=Number.MAX_SAFE_INTEGER;do{var u=t[a],l=this._connectionPool.activeResourceCount(u);l<c&&(s=u,c=l),a===o-1?a=0:a++}while(a!==i);return s},r}(v8.default);N_.default=_8;var a1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vr,"__esModule",{value:!0});Vr.LeastConnectedLoadBalancingStrategy=Vr.LoadBalancingStrategy=void 0;var y8=a1(wf);Vr.LoadBalancingStrategy=y8.default;var u1=a1(N_);Vr.LeastConnectedLoadBalancingStrategy=u1.default;Vr.default=u1.default;var M_={},D_={},ro={},Mr={},L_={},wr={},no={},Of={},b8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Of,"__esModule",{value:!0});var s1=function(){function e(r){this.position=0,this.length=r}return e.prototype.getUInt8=function(r){throw new Error("Not implemented")},e.prototype.getInt8=function(r){throw new Error("Not implemented")},e.prototype.getFloat64=function(r){throw new Error("Not implemented")},e.prototype.getVarInt=function(r){throw new Error("Not implemented")},e.prototype.putUInt8=function(r,t){throw new Error("Not implemented")},e.prototype.putInt8=function(r,t){throw new Error("Not implemented")},e.prototype.putFloat64=function(r,t){throw new Error("Not implemented")},e.prototype.getInt16=function(r){return this.getInt8(r)<<8|this.getUInt8(r+1)},e.prototype.getUInt16=function(r){return this.getUInt8(r)<<8|this.getUInt8(r+1)},e.prototype.getInt32=function(r){return this.getInt8(r)<<24|this.getUInt8(r+1)<<16|this.getUInt8(r+2)<<8|this.getUInt8(r+3)},e.prototype.getUInt32=function(r){return this.getUInt8(r)<<24|this.getUInt8(r+1)<<16|this.getUInt8(r+2)<<8|this.getUInt8(r+3)},e.prototype.getInt64=function(r){return this.getInt8(r)<<56|this.getUInt8(r+1)<<48|this.getUInt8(r+2)<<40|this.getUInt8(r+3)<<32|this.getUInt8(r+4)<<24|this.getUInt8(r+5)<<16|this.getUInt8(r+6)<<8|this.getUInt8(r+7)},e.prototype.getSlice=function(r,t){return new m8(r,t,this)},e.prototype.putInt16=function(r,t){this.putInt8(r,t>>8),this.putUInt8(r+1,t&255)},e.prototype.putUInt16=function(r,t){this.putUInt8(r,t>>8&255),this.putUInt8(r+1,t&255)},e.prototype.putInt32=function(r,t){this.putInt8(r,t>>24),this.putUInt8(r+1,t>>16&255),this.putUInt8(r+2,t>>8&255),this.putUInt8(r+3,t&255)},e.prototype.putUInt32=function(r,t){this.putUInt8(r,t>>24&255),this.putUInt8(r+1,t>>16&255),this.putUInt8(r+2,t>>8&255),this.putUInt8(r+3,t&255)},e.prototype.putInt64=function(r,t){this.putInt8(r,t>>48),this.putUInt8(r+1,t>>42&255),this.putUInt8(r+2,t>>36&255),this.putUInt8(r+3,t>>30&255),this.putUInt8(r+4,t>>24&255),this.putUInt8(r+5,t>>16&255),this.putUInt8(r+6,t>>8&255),this.putUInt8(r+7,t&255)},e.prototype.putVarInt=function(r,t){for(var n=0;t>1;){var o=t%128;t>=128&&(o+=128),t=t/128,this.putUInt8(r+n,o),n+=1}return n},e.prototype.putBytes=function(r,t){for(var n=0,o=t.remaining();n<o;n++)this.putUInt8(r+n,t.readUInt8())},e.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},e.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},e.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},e.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},e.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},e.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},e.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},e.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},e.prototype.readVarInt=function(){var r=this.getVarInt(this.position);return this._updatePos(r.length),r.value},e.prototype.writeUInt8=function(r){this.putUInt8(this._updatePos(1),r)},e.prototype.writeInt8=function(r){this.putInt8(this._updatePos(1),r)},e.prototype.writeInt16=function(r){this.putInt16(this._updatePos(2),r)},e.prototype.writeInt32=function(r){this.putInt32(this._updatePos(4),r)},e.prototype.writeUInt32=function(r){this.putUInt32(this._updatePos(4),r)},e.prototype.writeInt64=function(r){this.putInt64(this._updatePos(8),r)},e.prototype.writeFloat64=function(r){this.putFloat64(this._updatePos(8),r)},e.prototype.writeVarInt=function(r){var t=this.putVarInt(this.position,r);this._updatePos(t)},e.prototype.writeBytes=function(r){this.putBytes(this._updatePos(r.remaining()),r)},e.prototype.readSlice=function(r){return this.getSlice(this._updatePos(r),r)},e.prototype._updatePos=function(r){var t=this.position;return this.position+=r,t},e.prototype.remaining=function(){return this.length-this.position},e.prototype.hasRemaining=function(){return this.remaining()>0},e.prototype.reset=function(){this.position=0},e.prototype.toString=function(){return this.constructor.name+"( position="+this.position+` )
  `+this.toHex()},e.prototype.toHex=function(){for(var r="",t=0;t<this.length;t++){var n=this.getUInt8(t).toString(16);n.length===1&&(n="0"+n),r+=n,t!==this.length-1&&(r+=" ")}return r},e}();Of.default=s1;var m8=function(e){b8(r,e);function r(t,n,o){var i=e.call(this,n)||this;return i._start=t,i._inner=o,i}return r.prototype.putUInt8=function(t,n){this._inner.putUInt8(this._start+t,n)},r.prototype.getUInt8=function(t){return this._inner.getUInt8(this._start+t)},r.prototype.putInt8=function(t,n){this._inner.putInt8(this._start+t,n)},r.prototype.putFloat64=function(t,n){this._inner.putFloat64(this._start+t,n)},r.prototype.getInt8=function(t){return this._inner.getInt8(this._start+t)},r.prototype.getFloat64=function(t){return this._inner.getFloat64(this._start+t)},r}(s1),g8=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(no,"__esModule",{value:!0});no.BaseBuffer=void 0;var c1=g8(Of);no.BaseBuffer=c1.default;no.default=c1.default;var w8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),l1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wr,"__esModule",{value:!0});wr.alloc=void 0;var ac=l1(G0),O8=l1(no),f1=function(e){w8(r,e);function r(t){var n=this,o=S8(t);return n=e.call(this,o.length)||this,n._buffer=o,n}return r.prototype.getUInt8=function(t){return this._buffer.readUInt8(t)},r.prototype.getInt8=function(t){return this._buffer.readInt8(t)},r.prototype.getFloat64=function(t){return this._buffer.readDoubleBE(t)},r.prototype.getVarInt=function(t){for(var n=0,o=this._buffer.readInt8(t+n),i=o%128;o/128>=1;)n+=1,o=this._buffer.readInt8(t+n),i+=o%128;return{length:n+1,value:i}},r.prototype.putUInt8=function(t,n){this._buffer.writeUInt8(n,t)},r.prototype.putInt8=function(t,n){this._buffer.writeInt8(n,t)},r.prototype.putFloat64=function(t,n){this._buffer.writeDoubleBE(n,t)},r.prototype.putBytes=function(t,n){if(n instanceof r){var o=Math.min(n.length-n.position,this.length-t);n._buffer.copy(this._buffer,t,n.position,n.position+o),n.position+=o}else e.prototype.putBytes.call(this,t,n)},r.prototype.getSlice=function(t,n){return new r(this._buffer.slice(t,t+n))},r}(O8.default);wr.default=f1;function E8(e){return new f1(e)}wr.alloc=E8;function S8(e){return e instanceof ac.default.Buffer?e:typeof e=="number"&&typeof ac.default.Buffer.alloc=="function"?ac.default.Buffer.alloc(e):new ac.default.Buffer(e)}var T8=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(L_,"__esModule",{value:!0});var tg=T8(wr),bo=H,d1=bo.internal.util,h1=d1.ENCRYPTION_OFF,P8=d1.ENCRYPTION_ON,rg=1,C8=3,A8=function(){function e(r,t,n){t===void 0&&(t=U8),n===void 0&&(n=function(u){return new WebSocket(u)});var o=this;this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=r,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._receiveTimeoutId=null,this._closingPromise=null;var i=N8(r,t),a=i.scheme,s=i.error;if(s){this._error=s;return}this._ws=I8(a,r.address,n),this._ws.binaryType="arraybuffer";var c=this;this._ws.onclose=function(u){u&&!u.wasClean&&c._handleConnectionError(),c._open=!1},this._ws.onopen=function(){c._clearConnectionTimeout();var u=c._pending;c._pending=null;for(var l=0;l<u.length;l++)c.write(u[l])},this._ws.onmessage=function(u){if(o._resetTimeout(),c.onmessage){var l=new tg.default(u.data);c.onmessage(l)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}return e.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired){this._error=(0,bo.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),this.onerror&&this.onerror(this._error);return}this._open&&!this._timedout&&(this._error=(0,bo.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},e.prototype.write=function(r){if(this._pending!==null)this._pending.push(r);else if(r instanceof tg.default)try{this._ws.send(r._buffer)}catch(t){if(this._ws.readyState!==rg)this._handleConnectionError();else throw t}else throw(0,bo.newError)("Don't know how to send buffer: "+r)},e.prototype.close=function(){var r=this;return this._closingPromise===null&&(this._closingPromise=new Promise(function(t,n){r._clearConnectionTimeout(),r._ws&&r._ws.readyState!==C8?(r._open=!1,r.stopReceiveTimeout(),r._ws.onclose=function(){t()},r._ws.close()):t()})),this._closingPromise},e.prototype.setupReceiveTimeout=function(r){this._receiveTimeout=r},e.prototype.stopReceiveTimeout=function(){this._receiveTimeout!==null&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,this._receiveTimeoutId!=null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=null)},e.prototype.startReceiveTimeout=function(){this._open&&this._receiveTimeout!==null&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._resetTimeout())},e.prototype._resetTimeout=function(){var r=this;this._receiveTimeoutStarted&&(this._receiveTimeoutId!==null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=setTimeout(function(){r._receiveTimeoutId=null,r._timedout=!0,r.stopReceiveTimeout(),r._error=(0,bo.newError)("Connection lost. Server didn't respond in ".concat(r._receiveTimeout,"ms"),r._config.connectionErrorCode),r.close(),r.onerror&&r.onerror(r._error)},this._receiveTimeout))},e.prototype._setupConnectionTimeout=function(){var r=this,t=this._config.connectionTimeout;if(t){var n=this._ws;return setTimeout(function(){n.readyState!==rg&&(r._connectionTimeoutFired=!0,n.close())},t)}return null},e.prototype._clearConnectionTimeout=function(){var r=this._connectionTimeoutId;(r||r===0)&&(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(r))},e}();L_.default=A8;function I8(e,r,t){var n=e+"://"+r.asHostPort();try{return t(n)}catch(i){if(R8(i,r)){var o=j8(e,r);return t(o)}else throw i}}function R8(e,r){return e.name==="SyntaxError"&&$8(r.asHostPort())}function $8(e){return e.charAt(0)==="["&&e.indexOf("]")!==-1}function j8(e,r){var t=r.host().replace(/:/g,"-"),n=t.replace("%","s"),o=n+".ipv6-literal.net";return"".concat(e,"://").concat(o,":").concat(r.port())}function N8(e,r){var t=k8(e),n=M8(e),o=e.trust,i=D8(r);if(L8(t,n,i),n)return{scheme:"ws",error:null};if(i)return{scheme:"wss",error:null};if(t){if(!o||o==="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES")return{scheme:"wss",error:null};var a=(0,bo.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+o+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+h1+'"` in the driver configuration.');return{scheme:null,error:a}}return{scheme:"ws",error:null}}function k8(e){return e.encrypted===!0||e.encrypted===P8}function M8(e){return e.encrypted===!1||e.encrypted===h1}function D8(e){var r=typeof e=="function"?e():"";return r&&r.toLowerCase().indexOf("https")>=0}function L8(e,r,t){t===null||(e&&!t?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):r&&t&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}function U8(){return typeof window<"u"&&window.location?window.location.protocol:null}var U_={},F8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(U_,"__esModule",{value:!0});var B8=H,x8=B8.internal.resolver.BaseHostNameResolver,V8=function(e){F8(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.resolve=function(t){return this._resolveToItself(t)},r}(x8);U_.default=V8;var F_={},W8=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},z8=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(F_,"__esModule",{value:!0});F_.default={load:function(e){return W8(this,void 0,void 0,function(){return z8(this,function(r){return[2,e]})})}};var B_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.ClientCertificatesLoader=Mr.HostNameResolver=Mr.Channel=void 0;var H8=B_(L_),q8=B_(U_),G8=B_(F_);Mr.Channel=H8.default;Mr.HostNameResolver=q8.default;Mr.ClientCertificatesLoader=G8.default;var Uo={},x_={},K8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(x_,"__esModule",{value:!0});var Y8=no,Z8=wr,Q8=function(e){K8(r,e);function r(t){for(var n=this,o=0,i=0;i<t.length;i++)o+=t[i].length;return n=e.call(this,o)||this,n._buffers=t,n}return r.prototype.getUInt8=function(t){for(var n=0;n<this._buffers.length;n++){var o=this._buffers[n];if(t>=o.length)t-=o.length;else return o.getUInt8(t)}},r.prototype.getInt8=function(t){for(var n=0;n<this._buffers.length;n++){var o=this._buffers[n];if(t>=o.length)t-=o.length;else return o.getInt8(t)}},r.prototype.getFloat64=function(t){for(var n=(0,Z8.alloc)(8),o=0;o<8;o++)n.putUInt8(o,this.getUInt8(t+o));return n.getFloat64(0)},r}(Y8.BaseBuffer);x_.default=Q8;var X8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),p1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Uo,"__esModule",{value:!0});Uo.Dechunker=Uo.Chunker=void 0;var J8=p1(Of),ng=wr,e5=p1(x_),uc=2,t5=0,r5=1400,n5=function(e){X8(r,e);function r(t,n){var o=e.call(this,0)||this;return o._bufferSize=n||r5,o._ch=t,o._buffer=(0,ng.alloc)(o._bufferSize),o._currentChunkStart=0,o._chunkOpen=!1,o}return r.prototype.putUInt8=function(t,n){this._ensure(1),this._buffer.writeUInt8(n)},r.prototype.putInt8=function(t,n){this._ensure(1),this._buffer.writeInt8(n)},r.prototype.putFloat64=function(t,n){this._ensure(8),this._buffer.writeFloat64(n)},r.prototype.putBytes=function(t,n){for(;n.remaining()>0;)this._ensure(1),this._buffer.remaining()>n.remaining()?this._buffer.writeBytes(n):this._buffer.writeBytes(n.readSlice(this._buffer.remaining()));return this},r.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var t=this._buffer;this._buffer=null,this._ch.write(t.getSlice(0,t.position)),this._buffer=(0,ng.alloc)(this._bufferSize),this._chunkOpen=!1}return this},r.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<uc&&this.flush(),this._buffer.writeInt16(t5)},r.prototype._ensure=function(t){var n=this._chunkOpen?t:t+uc;this._buffer.remaining()<n&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+uc,this._chunkOpen=!0)},r.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var t=this._buffer.position-(this._currentChunkStart+uc);this._buffer.putUInt16(this._currentChunkStart,t),this._chunkOpen=!1}},r}(J8.default);Uo.Chunker=n5;var o5=function(){function e(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return e.prototype.AWAITING_CHUNK=function(r){return r.remaining()>=2?this._onHeader(r.readUInt16()):(this._partialChunkHeader=r.readUInt8()<<8,this.IN_HEADER)},e.prototype.IN_HEADER=function(r){return this._onHeader((this._partialChunkHeader|r.readUInt8())&65535)},e.prototype.IN_CHUNK=function(r){return this._chunkSize<=r.remaining()?(this._currentMessage.push(r.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=r.remaining(),this._currentMessage.push(r.readSlice(r.remaining())),this.IN_CHUNK)},e.prototype.CLOSED=function(r){},e.prototype._onHeader=function(r){if(r===0){var t=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:t=this._currentMessage[0];break;default:t=new e5.default(this._currentMessage);break}return this._currentMessage=[],this.onmessage(t),this.AWAITING_CHUNK}else return this._chunkSize=r,this.IN_CHUNK},e.prototype.write=function(r){for(;r.hasRemaining();)this._state=this._state(r)},e}();Uo.Dechunker=o5;var V_={};Object.defineProperty(V_,"__esModule",{value:!0});var Ef=H,v1=Ef.internal.util,i5=v1.ENCRYPTION_OFF,a5=v1.ENCRYPTION_ON,u5=Ef.error.SERVICE_UNAVAILABLE,og=[null,void 0,!0,!1,a5,i5],ig=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"],s5=function(){function e(r,t,n,o){this.address=r,this.encrypted=c5(t),this.trust=l5(t),this.trustedCertificates=f5(t),this.knownHostsPath=d5(t),this.connectionErrorCode=n||u5,this.connectionTimeout=t.connectionTimeout,this.clientCertificate=o}return e}();V_.default=s5;function c5(e){var r=e.encrypted;if(og.indexOf(r)===-1)throw(0,Ef.newError)("Illegal value of the encrypted setting ".concat(r,". Expected one of ").concat(og));return r}function l5(e){var r=e.trust;if(ig.indexOf(r)===-1)throw(0,Ef.newError)("Illegal value of the trust setting ".concat(r,". Expected one of ").concat(ig));return r}function f5(e){return e.trustedCertificates||[]}function d5(e){return e.knownHosts||null}var W_={},_1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(W_,"__esModule",{value:!0});var h5=_1(wr),p5=H,pp=_1(G0),v5=VP,ag=new v5.StringDecoder("utf8");function _5(e){return new h5.default(w5(e))}function y5(e,r){if(Object.prototype.hasOwnProperty.call(e,"_buffer"))return b5(e,r);if(Object.prototype.hasOwnProperty.call(e,"_buffers"))return m5(e,r);throw(0,p5.newError)("Don't know how to decode strings from '".concat(e,"'"))}function b5(e,r){var t=e.position,n=t+r;return e.position=Math.min(n,e.length),e._buffer.toString("utf8",t,n)}function m5(e,r){return g5(e,r,function(t){return ag.write(t._buffer)},function(){return ag.end()})}function g5(e,r,t,n){var o=r,i=e.position;e._updatePos(Math.min(r,e.length-i));var a=e._buffers.reduce(function(s,c){if(o<=0)return s;if(i>=c.length)return i-=c.length,"";c._updatePos(i-c.position);var u=Math.min(c.length-i,o),l=c.readSlice(u);return c._updatePos(u),o=Math.max(o-l.length,0),i=0,s+t(l)},"");return a+n()}function w5(e){return typeof pp.default.Buffer.from=="function"?pp.default.Buffer.from(e,"utf8"):new pp.default.Buffer(e,"utf8")}W_.default={encode:_5,decode:y5};(function(e){var r=f&&f.__createBinding||(Object.create?function(s,c,u,l){l===void 0&&(l=u);var d=Object.getOwnPropertyDescriptor(c,u);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(s,l,d)}:function(s,c,u,l){l===void 0&&(l=u),s[l]=c[u]}),t=f&&f.__exportStar||function(s,c){for(var u in s)u!=="default"&&!Object.prototype.hasOwnProperty.call(c,u)&&r(c,s,u)},n=f&&f.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.utf8=e.alloc=e.ChannelConfig=void 0,t(Mr,e),t(Uo,e);var o=V_;Object.defineProperty(e,"ChannelConfig",{enumerable:!0,get:function(){return n(o).default}});var i=wr;Object.defineProperty(e,"alloc",{enumerable:!0,get:function(){return i.alloc}});var a=W_;Object.defineProperty(e,"utf8",{enumerable:!0,get:function(){return n(a).default}})})(ro);Object.defineProperty(D_,"__esModule",{value:!0});var y1=ro,b1=H,O5=1616949271,E5=["5.8","5.7","5.6","5.4","5.3","5.2","5.1","5.0","4.4","4.3","4.2","3.0"],S5=0;function vo(e,r){return{major:e,minor:r}}function T5(e){if(e.length>4)throw(0,b1.newError)("It should not have more than 4 versions of the protocol");var r=(0,y1.alloc)(5*4);return r.writeInt32(O5),e.forEach(function(t){if(t instanceof Array){var n=t[0],o=n.major,i=n.minor,a=t[1].minor,s=i-a;r.writeInt32(s<<16|i<<8|o)}else{var o=t.major,i=t.minor;r.writeInt32(i<<8|o)}}),r.reset(),r}function P5(e,r){var t=[e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readUInt8()];if(t[0]===72&&t[1]===84&&t[2]===84&&t[3]===80)throw r.error("Handshake failed since server responded with HTTP."),(0,b1.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return+(t[3]+"."+t[2])}function C5(e,r,t){for(var n=r.readVarInt(),o=[],i=0;i<n;i++){var a=[r.readUInt8(),r.readUInt8(),r.readUInt8(),r.readUInt8()];o=o.concat($5(a))}r.readVarInt();var s=j5(),c=0,u=0;o.sort(function(d,h){return Number(d.major)!==Number(h.major)?Number(h.major)-Number(d.major):Number(h.minor)-Number(d.minor)});for(var i=0;i<o.length;i++){var l=o[i];if(E5.includes(l.major+"."+l.minor)){c=l.major,u=l.minor;break}}return new Promise(function(d,h){try{var p=(0,y1.alloc)(5);p.writeInt32(u<<8|c),p.writeVarInt(s),e.write(p),d({protocolVersion:+(c+"."+u),capabilites:s,consumeRemainingBuffer:function(v){r.hasRemaining()&&v(r.readSlice(r.remaining()))}})}catch(v){h(v)}})}function A5(){return T5([vo(255,1),[vo(5,8),vo(5,0)],[vo(4,4),vo(4,2)],vo(3,0)])}function I5(e,r){return R5(e,r).then(function(t){return t.protocolVersion===255.1?C5(e,t.buffer):t})}D_.default=I5;function R5(e,r){var t=this;return new Promise(function(n,o){var i=function(a){o(a)};e.onerror=i.bind(t),e._error&&i(e._error),e.onmessage=function(a){try{var s=P5(a,r);n({protocolVersion:s,capabilites:0,buffer:a,consumeRemainingBuffer:function(c){a.hasRemaining()&&c(a.readSlice(a.remaining()))}})}catch(c){o(c)}},e.write(A5())})}function $5(e){for(var r=[],t=e[3],n=e[2],o=0;o<=e[1];o++)r.push({major:t,minor:n-o});return r}function j5(e){return S5}var z_={},Sf={},We={},oe={},Tf={},H_=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),N5=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tf,"__esModule",{value:!0});N5(H);var Pf=function(){function e(){}return e.ofRecord=function(r){return r===null?e.ofNull():new D5(r)},e.ofMessageResponse=function(r){return r===null?e.ofNull():new k5(r)},e.ofNull=function(){return new M5},Object.defineProperty(e.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),e}();Tf.default=Pf;var k5=function(e){H_(r,e);function r(t){var n=e.call(this)||this;return n._response=t,n}return Object.defineProperty(r.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNull",{get:function(){return this._response===null},enumerable:!1,configurable:!0}),r}(Pf),M5=function(e){H_(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),r}(Pf),D5=function(e){H_(r,e);function r(t){var n=e.call(this)||this;return n._record=t,n}return Object.defineProperty(r.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNull",{get:function(){return this._record===null},enumerable:!1,configurable:!0}),r}(Pf),Jt={},xn={};Object.defineProperty(xn,"__esModule",{value:!0});xn.reuseOngoingRequest=xn.identity=void 0;var L5=H;function U5(e){return e}xn.identity=U5;function F5(e,r){r===void 0&&(r=null);var t=new Map;return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=L5.json.stringify(n);if(t.has(i))return t.get(i);var a=e.apply(r,n);return t.set(i,a),a.finally(function(){t.delete(i)})}}xn.reuseOngoingRequest=F5;var Cf={},B5=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Cf,"__esModule",{value:!0});Cf.equals=void 0;function x5(e,r){var t,n;if(e===r)return!0;if(e===null||r===null)return!1;if(typeof e=="object"&&typeof r=="object"){var o=Object.keys(e),i=Object.keys(r);if(o.length!==i.length)return!1;try{for(var a=B5(o),s=a.next();!s.done;s=a.next()){var c=s.value;if(e[c]!==r[c])return!1}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0}return!1}Cf.equals=x5;var V5=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),W5=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),m1=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&V5(r,e,t);return W5(r,e),r};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.object=Jt.functional=void 0;Jt.functional=m1(xn);Jt.object=m1(Cf);var Or=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),z5=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oe,"__esModule",{value:!0});oe.TelemetryObserver=oe.ProcedureRouteObserver=oe.RouteObserver=oe.CompletedObserver=oe.FailedObserver=oe.ResetObserver=oe.LogoffObserver=oe.LoginObserver=oe.ResultStreamObserver=oe.StreamObserver=void 0;var nt=H,g1=z5(Tf),H5=Jt,q5=nt.internal.constants.FETCH_ALL,Wr=nt.error.PROTOCOL_ERROR,oo=function(){function e(){}return e.prototype.onNext=function(r){},e.prototype.onError=function(r){},e.prototype.onCompleted=function(r){},e}();oe.StreamObserver=oo;var Af=function(e){Or(r,e);function r(t){var n=t===void 0?{}:t,o=n.reactive,i=o===void 0?!1:o,a=n.moreFunction,s=n.discardFunction,c=n.fetchSize,u=c===void 0?q5:c,l=n.beforeError,d=n.afterError,h=n.beforeKeys,p=n.afterKeys,v=n.beforeComplete,y=n.afterComplete,_=n.server,b=n.highRecordWatermark,w=b===void 0?Number.MAX_VALUE:b,S=n.lowRecordWatermark,E=S===void 0?Number.MAX_VALUE:S,T=n.enrichMetadata,C=n.onDb,P=e.call(this)||this;return P._fieldKeys=null,P._fieldLookup=null,P._head=null,P._queuedRecords=[],P._tail=null,P._error=null,P._observers=[],P._meta={},P._server=_,P._beforeError=l,P._afterError=d,P._beforeKeys=h,P._afterKeys=p,P._beforeComplete=v,P._afterComplete=y,P._enrichMetadata=T||H5.functional.identity,P._queryId=null,P._moreFunction=a,P._discardFunction=s,P._discard=!1,P._fetchSize=u,P._lowRecordWatermark=E,P._highRecordWatermark=w,P._setState(i?Nt.READY:Nt.READY_STREAMING),P._setupAutoPull(),P._paused=!1,P._pulled=!i,P._haveRecordStreamed=!1,P._onDb=C,P}return r.prototype.pause=function(){this._paused=!0},r.prototype.resume=function(){this._paused=!1,this._setupAutoPull(!0),this._state.pull(this)},r.prototype.onNext=function(t){this._haveRecordStreamed=!0;var n=new nt.Record(this._fieldKeys,t,this._fieldLookup);this._observers.some(function(o){return o.onNext})?this._observers.forEach(function(o){o.onNext&&o.onNext(n)}):(this._queuedRecords.push(n),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},r.prototype.onCompleted=function(t){this._state.onSuccess(this,t)},r.prototype.onError=function(t){this._state.onError(this,t)},r.prototype.cancel=function(){this._discard=!0},r.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(Nt.STREAMING)},r.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(Nt.SUCCEEDED)},r.prototype.subscribe=function(t){if(this._head&&t.onKeys&&t.onKeys(this._head),this._queuedRecords.length>0&&t.onNext)for(var n=0;n<this._queuedRecords.length;n++)t.onNext(this._queuedRecords[n]),this._queuedRecords.length-n-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===Nt.READY&&this._handleStreaming());this._tail&&t.onCompleted&&t.onCompleted(this._tail),this._error&&t.onError(this._error),this._observers.push(t),this._state===Nt.READY&&this._handleStreaming()},r.prototype._handleHasMore=function(t){this._setState(Nt.READY),this._handleStreaming(),delete t.has_more},r.prototype._handlePullSuccess=function(t){var n=this,o=this._enrichMetadata(Object.assign(this._server?{server:this._server}:{},this._meta,{stream_summary:{have_records_streamed:this._haveRecordStreamed,pulled:this._pulled,has_keys:this._fieldKeys.length>0}},t));if(![void 0,null,"r","w","rw","s"].includes(o.type)){this.onError((0,nt.newError)(`Server returned invalid query type. Expected one of [undefined, null, "r", "w", "rw", "s"] but got '`.concat(o.type,"'"),Wr));return}this._setState(Nt.SUCCEEDED);var i=null;this._beforeComplete&&(i=this._beforeComplete(o));var a=function(){n._tail=o,n._observers.some(function(s){return s.onCompleted})&&n._observers.forEach(function(s){s.onCompleted&&s.onCompleted(o)}),n._afterComplete&&n._afterComplete(o)};i?Promise.resolve(i).then(function(){return a()}):a()},r.prototype._handleRunSuccess=function(t,n){var o=this;if(this._fieldKeys===null){if(this._fieldKeys=[],this._fieldLookup={},t.fields&&t.fields.length>0){this._fieldKeys=t.fields;for(var i=0;i<t.fields.length;i++)this._fieldLookup[t.fields[i]]=i}t.db!==null&&this._onDb!==void 0&&this._onDb(t.db),t.fields!=null&&delete t.fields,t.qid!==null&&t.qid!==void 0&&(this._queryId=t.qid,delete t.qid),this._storeMetadataForCompletion(t);var a=null;this._beforeKeys&&(a=this._beforeKeys(this._fieldKeys));var s=function(){o._head=o._fieldKeys,o._observers.some(function(c){return c.onKeys})&&o._observers.forEach(function(c){c.onKeys&&c.onKeys(o._fieldKeys)}),o._afterKeys&&o._afterKeys(o._fieldKeys),n()};a?Promise.resolve(a).then(function(){return s()}):s()}},r.prototype._handleError=function(t){var n=this;this._setState(Nt.FAILED),this._error=t;var o=null;this._beforeError&&(o=this._beforeError(t));var i=function(){n._observers.some(function(a){return a.onError})&&n._observers.forEach(function(a){a.onError&&a.onError(t)}),n._afterError&&n._afterError(t)};o?Promise.resolve(o).then(function(){return i()}):i()},r.prototype._handleStreaming=function(){this._head&&this._observers.some(function(t){return t.onNext||t.onCompleted})&&!this._paused&&(this._discard||this._autoPull)&&this._more()},r.prototype._more=function(){this._discard?this._discardFunction(this._queryId,this):(this._pulled=!0,this._moreFunction(this._queryId,this._fetchSize,this)),this._setState(Nt.STREAMING)},r.prototype._storeMetadataForCompletion=function(t){for(var n=Object.keys(t),o=n.length,i="";o--;)i=n[o],this._meta[i]=t[i]},r.prototype._setState=function(t){this._state=t},r.prototype._setupAutoPull=function(){this._autoPull=!0},r}(oo);oe.ResultStreamObserver=Af;var G5=function(e){Or(r,e);function r(t){var n=t===void 0?{}:t,o=n.onError,i=n.onCompleted,a=e.call(this)||this;return a._onError=o,a._onCompleted=i,a}return r.prototype.onNext=function(t){this.onError((0,nt.newError)("Received RECORD when initializing "+nt.json.stringify(t)))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(oo);oe.LoginObserver=G5;var K5=function(e){Or(r,e);function r(t){var n=t===void 0?{}:t,o=n.onError,i=n.onCompleted,a=e.call(this)||this;return a._onError=o,a._onCompleted=i,a}return r.prototype.onNext=function(t){this.onError((0,nt.newError)("Received RECORD when logging off "+nt.json.stringify(t)))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(oo);oe.LogoffObserver=K5;var Y5=function(e){Or(r,e);function r(t){var n=t===void 0?{}:t,o=n.onProtocolError,i=n.onError,a=n.onComplete,s=e.call(this)||this;return s._onProtocolError=o,s._onError=i,s._onComplete=a,s}return r.prototype.onNext=function(t){this.onError((0,nt.newError)("Received RECORD when resetting: received record is: "+nt.json.stringify(t),Wr))},r.prototype.onError=function(t){t.code===Wr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onComplete&&this._onComplete(t)},r}(oo);oe.ResetObserver=Y5;var Z5=function(e){Or(r,e);function r(t){var n=t===void 0?{}:t,o=n.onError,i=n.onCompleted,a=e.call(this)||this;return a._onError=o,a._onCompleted=i,a}return r.prototype.onNext=function(t){this.onError((0,nt.newError)("Received RECORD when sending telemetry "+nt.json.stringify(t),Wr))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(Af);oe.TelemetryObserver=Z5;var Q5=function(e){Or(r,e);function r(t){var n=t.error,o=t.onError,i=e.call(this,{beforeError:o})||this;return i.onError(n),i}return r}(Af);oe.FailedObserver=Q5;var X5=function(e){Or(r,e);function r(){var t=e.call(this)||this;return e.prototype.markCompleted.call(t),t}return r}(Af);oe.CompletedObserver=X5;var J5=function(e){Or(r,e);function r(t){var n=t.resultObserver,o=t.onProtocolError,i=t.onError,a=t.onCompleted,s=e.call(this)||this;return s._resultObserver=n,s._onError=i,s._onCompleted=a,s._records=[],s._onProtocolError=o,n.subscribe(s),s}return r.prototype.onNext=function(t){this._records.push(t)},r.prototype.onError=function(t){t.code===Wr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(){if(this._records!==null&&this._records.length!==1){this.onError((0,nt.newError)("Illegal response from router. Received "+this._records.length+` records but expected only one.
`+nt.json.stringify(this._records),Wr));return}this._onCompleted&&this._onCompleted(g1.default.ofRecord(this._records[0]))},r}(oo);oe.ProcedureRouteObserver=J5;var eV=function(e){Or(r,e);function r(t){var n=t===void 0?{}:t,o=n.onProtocolError,i=n.onError,a=n.onCompleted,s=e.call(this)||this;return s._onProtocolError=o,s._onError=i,s._onCompleted=a,s}return r.prototype.onNext=function(t){this.onError((0,nt.newError)("Received RECORD when resetting: received record is: "+nt.json.stringify(t),Wr))},r.prototype.onError=function(t){t.code===Wr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(g1.default.ofMessageResponse(t))},r}(oo);oe.RouteObserver=eV;var Nt={READY_STREAMING:{onSuccess:function(e,r){e._handleRunSuccess(r,function(){e._setState(Nt.STREAMING)})},onError:function(e,r){e._handleError(r)},name:function(){return"READY_STREAMING"},pull:function(){}},READY:{onSuccess:function(e,r){e._handleRunSuccess(r,function(){return e._handleStreaming()})},onError:function(e,r){e._handleError(r)},name:function(){return"READY"},pull:function(e){return e._more()}},STREAMING:{onSuccess:function(e,r){r.has_more?e._handleHasMore(r):e._handlePullSuccess(r)},onError:function(e,r){e._handleError(r)},name:function(){return"STREAMING"},pull:function(){}},FAILED:{onError:function(e){},name:function(){return"FAILED"},pull:function(){}},SUCCEEDED:{name:function(){return"SUCCEEDED"},pull:function(){}}};Object.defineProperty(We,"__esModule",{value:!0});We.assertNotificationFilterIsEmpty=We.assertImpersonatedUserIsEmpty=We.assertTxConfigIsEmpty=We.assertDatabaseIsEmpty=void 0;var Sa=H;function tV(e,r,t){if(r===void 0&&(r=function(){}),e&&!e.isEmpty()){var n=(0,Sa.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw r(n.message),t.onError(n),n}}We.assertTxConfigIsEmpty=tV;function rV(e,r,t){if(r===void 0&&(r=function(){}),e){var n=(0,Sa.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw r(n.message),t.onError(n),n}}We.assertDatabaseIsEmpty=rV;function nV(e,r,t){if(r===void 0&&(r=function(){}),e){var n=(0,Sa.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+"Trying to impersonate ".concat(e,"."));throw r(n.message),t.onError(n),n}}We.assertImpersonatedUserIsEmpty=nV;function oV(e,r,t){if(r===void 0&&(r=function(){}),e!==void 0){var n=(0,Sa.newError)("Driver is connected to a database that does not support user notification filters. Please upgrade to Neo4j 5.7.0 or later in order to use this functionality. "+"Trying to set notifications to ".concat(Sa.json.stringify(e),"."));throw r(n.message),t.onError(n),n}}We.assertNotificationFilterIsEmpty=oV;var rt={},Vn={},zr={};Object.defineProperty(zr,"__esModule",{value:!0});zr.verifyStructSize=zr.Structure=void 0;var w1=H,iV=w1.error.PROTOCOL_ERROR,O1=function(){function e(r,t){this.signature=r,this.fields=t}return Object.defineProperty(e.prototype,"size",{get:function(){return this.fields.length},enumerable:!1,configurable:!0}),e.prototype.toString=function(){for(var r="",t=0;t<this.fields.length;t++)t>0&&(r+=", "),r+=this.fields[t];return"Structure("+this.signature+", ["+r+"])"},e}();zr.Structure=O1;function aV(e,r,t){if(r!==t)throw(0,w1.newError)("Wrong struct size for ".concat(e,", expected ").concat(r," but was ").concat(t),iV)}zr.verifyStructSize=aV;zr.default=O1;Object.defineProperty(Vn,"__esModule",{value:!0});Vn.Unpacker=Vn.Packer=void 0;var ra=ro,E1=Jt,S1=zr,Ie=H,uV=Ie.error.PROTOCOL_ERROR,T1=128,P1=144,C1=160,A1=176,I1=192,R1=193,$1=194,j1=195,N1=200,k1=201,M1=202,D1=203,L1=208,U1=209,F1=210,B1=212,x1=213,V1=214,W1=204,z1=205,H1=206,q1=216,G1=217,K1=218,Y1=220,Z1=221,sV=function(){function e(r){this._ch=r,this._byteArraysSupported=!0}return e.prototype.packable=function(r,t){var n=this;t===void 0&&(t=E1.functional.identity);try{r=t(r)}catch(a){return function(){throw a}}if(r===null)return function(){return n._ch.writeUInt8(I1)};if(r===!0)return function(){return n._ch.writeUInt8(j1)};if(r===!1)return function(){return n._ch.writeUInt8($1)};if(typeof r=="number")return function(){return n.packFloat(r)};if(typeof r=="string")return function(){return n.packString(r)};if(typeof r=="bigint")return function(){return n.packInteger((0,Ie.int)(r))};if((0,Ie.isInt)(r))return function(){return n.packInteger(r)};if(r instanceof Int8Array)return function(){return n.packBytes(r)};if(r instanceof Array)return function(){n.packListHeader(r.length);for(var a=0;a<r.length;a++)n.packable(r[a]===void 0?null:r[a],t)()};if(lV(r))return this.packableIterable(r,t);if(r instanceof S1.Structure){for(var o=[],i=0;i<r.fields.length;i++)o[i]=this.packable(r.fields[i],t);return function(){return n.packStruct(r.signature,o)}}else return typeof r=="object"?function(){for(var a=Object.keys(r),s=0,c=0;c<a.length;c++)r[a[c]]!==void 0&&s++;n.packMapHeader(s);for(var c=0;c<a.length;c++){var u=a[c];r[u]!==void 0&&(n.packString(u),n.packable(r[u],t)())}}:this._nonPackableValue("Unable to pack the given value: ".concat(r))},e.prototype.packableIterable=function(r,t){try{var n=Array.from(r);return this.packable(n,t)}catch(o){throw(0,Ie.newError)("Cannot pack given iterable, ".concat(o.message,": ").concat(r))}},e.prototype.packStruct=function(r,t){t=t||[],this.packStructHeader(t.length,r);for(var n=0;n<t.length;n++)t[n]()},e.prototype.packInteger=function(r){var t=r.high,n=r.low;r.greaterThanOrEqual(-16)&&r.lessThan(128)?this._ch.writeInt8(n):r.greaterThanOrEqual(-128)&&r.lessThan(-16)?(this._ch.writeUInt8(N1),this._ch.writeInt8(n)):r.greaterThanOrEqual(-32768)&&r.lessThan(32768)?(this._ch.writeUInt8(k1),this._ch.writeInt16(n)):r.greaterThanOrEqual(-2147483648)&&r.lessThan(2147483648)?(this._ch.writeUInt8(M1),this._ch.writeInt32(n)):(this._ch.writeUInt8(D1),this._ch.writeInt32(t),this._ch.writeInt32(n))},e.prototype.packFloat=function(r){this._ch.writeUInt8(R1),this._ch.writeFloat64(r)},e.prototype.packString=function(r){var t=ra.utf8.encode(r),n=t.length;if(n<16)this._ch.writeUInt8(T1|n),this._ch.writeBytes(t);else if(n<256)this._ch.writeUInt8(L1),this._ch.writeUInt8(n),this._ch.writeBytes(t);else if(n<65536)this._ch.writeUInt8(U1),this._ch.writeUInt8(n/256>>0),this._ch.writeUInt8(n%256),this._ch.writeBytes(t);else if(n<4294967296)this._ch.writeUInt8(F1),this._ch.writeUInt8((n/16777216>>0)%256),this._ch.writeUInt8((n/65536>>0)%256),this._ch.writeUInt8((n/256>>0)%256),this._ch.writeUInt8(n%256),this._ch.writeBytes(t);else throw(0,Ie.newError)("UTF-8 strings of size "+n+" are not supported")},e.prototype.packListHeader=function(r){if(r<16)this._ch.writeUInt8(P1|r);else if(r<256)this._ch.writeUInt8(B1),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(x1),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(V1),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Ie.newError)("Lists of size "+r+" are not supported")},e.prototype.packBytes=function(r){if(this._byteArraysSupported){this.packBytesHeader(r.length);for(var t=0;t<r.length;t++)this._ch.writeInt8(r[t])}else throw(0,Ie.newError)("Byte arrays are not supported by the database this driver is connected to")},e.prototype.packBytesHeader=function(r){if(r<256)this._ch.writeUInt8(W1),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(z1),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(H1),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Ie.newError)("Byte arrays of size "+r+" are not supported")},e.prototype.packMapHeader=function(r){if(r<16)this._ch.writeUInt8(C1|r);else if(r<256)this._ch.writeUInt8(q1),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(G1),this._ch.writeUInt8(r/256>>0),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(K1),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Ie.newError)("Maps of size "+r+" are not supported")},e.prototype.packStructHeader=function(r,t){if(r<16)this._ch.writeUInt8(A1|r),this._ch.writeUInt8(t);else if(r<256)this._ch.writeUInt8(Y1),this._ch.writeUInt8(r),this._ch.writeUInt8(t);else if(r<65536)this._ch.writeUInt8(Z1),this._ch.writeUInt8(r/256>>0),this._ch.writeUInt8(r%256);else throw(0,Ie.newError)("Structures of size "+r+" are not supported")},e.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},e.prototype._nonPackableValue=function(r){return function(){throw(0,Ie.newError)(r,uV)}},e}();Vn.Packer=sV;var cV=function(){function e(r,t){r===void 0&&(r=!1),t===void 0&&(t=!1),this._disableLosslessIntegers=r,this._useBigInt=t}return e.prototype.unpack=function(r,t){t===void 0&&(t=E1.functional.identity);var n=r.readUInt8(),o=n&240,i=n&15;if(n===I1)return null;var a=this._unpackBoolean(n);if(a!==null)return a;var s=this._unpackNumberOrInteger(n,r);if(s!==null){if((0,Ie.isInt)(s)){if(this._useBigInt)return s.toBigInt();if(this._disableLosslessIntegers)return s.toNumberOrInfinity()}return s}var c=this._unpackString(n,o,i,r);if(c!==null)return c;var u=this._unpackList(n,o,i,r,t);if(u!==null)return u;var l=this._unpackByteArray(n,r);if(l!==null)return l;var d=this._unpackMap(n,o,i,r,t);if(d!==null)return d;var h=this._unpackStruct(n,o,i,r,t);if(h!==null)return h;throw(0,Ie.newError)("Unknown packed value with marker "+n.toString(16))},e.prototype.unpackInteger=function(r){var t=r.readUInt8(),n=this._unpackInteger(t,r);if(n==null)throw(0,Ie.newError)("Unable to unpack integer value with marker "+t.toString(16));return n},e.prototype._unpackBoolean=function(r){return r===j1?!0:r===$1?!1:null},e.prototype._unpackNumberOrInteger=function(r,t){return r===R1?t.readFloat64():this._unpackInteger(r,t)},e.prototype._unpackInteger=function(r,t){if(r>=0&&r<128)return(0,Ie.int)(r);if(r>=240&&r<256)return(0,Ie.int)(r-256);if(r===N1)return(0,Ie.int)(t.readInt8());if(r===k1)return(0,Ie.int)(t.readInt16());if(r===M1){var n=t.readInt32();return(0,Ie.int)(n)}else if(r===D1){var o=t.readInt32(),i=t.readInt32();return new Ie.Integer(i,o)}else return null},e.prototype._unpackString=function(r,t,n,o){return t===T1?ra.utf8.decode(o,n):r===L1?ra.utf8.decode(o,o.readUInt8()):r===U1?ra.utf8.decode(o,o.readUInt16()):r===F1?ra.utf8.decode(o,o.readUInt32()):null},e.prototype._unpackList=function(r,t,n,o,i){return t===P1?this._unpackListWithSize(n,o,i):r===B1?this._unpackListWithSize(o.readUInt8(),o,i):r===x1?this._unpackListWithSize(o.readUInt16(),o,i):r===V1?this._unpackListWithSize(o.readUInt32(),o,i):null},e.prototype._unpackListWithSize=function(r,t,n){for(var o=[],i=0;i<r;i++)o.push(this.unpack(t,n));return o},e.prototype._unpackByteArray=function(r,t){return r===W1?this._unpackByteArrayWithSize(t.readUInt8(),t):r===z1?this._unpackByteArrayWithSize(t.readUInt16(),t):r===H1?this._unpackByteArrayWithSize(t.readUInt32(),t):null},e.prototype._unpackByteArrayWithSize=function(r,t){for(var n=new Int8Array(r),o=0;o<r;o++)n[o]=t.readInt8();return n},e.prototype._unpackMap=function(r,t,n,o,i){return t===C1?this._unpackMapWithSize(n,o,i):r===q1?this._unpackMapWithSize(o.readUInt8(),o,i):r===G1?this._unpackMapWithSize(o.readUInt16(),o,i):r===K1?this._unpackMapWithSize(o.readUInt32(),o,i):null},e.prototype._unpackMapWithSize=function(r,t,n){for(var o={},i=0;i<r;i++){var a=this.unpack(t,n);o[a]=this.unpack(t,n)}return o},e.prototype._unpackStruct=function(r,t,n,o,i){return t===A1?this._unpackStructWithSize(n,o,i):r===Y1?this._unpackStructWithSize(o.readUInt8(),o,i):r===Z1?this._unpackStructWithSize(o.readUInt16(),o,i):null},e.prototype._unpackStructWithSize=function(r,t,n){for(var o=t.readUInt8(),i=new S1.Structure(o,[]),a=0;a<r;a++)i.fields.push(this.unpack(t,n));return n(i)},e}();Vn.Unpacker=cV;function lV(e){return e==null?!1:typeof e[Symbol.iterator]=="function"}var Fo={},Q1=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fV=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),dV=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),hV=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&fV(r,e,t);return dV(r,e),r};Object.defineProperty(Fo,"__esModule",{value:!0});Fo.Unpacker=Fo.Packer=void 0;var X1=hV(Vn),pV=function(e){Q1(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},r}(X1.Packer);Fo.Packer=pV;var vV=function(e){Q1(r,e);function r(t,n){return t===void 0&&(t=!1),n===void 0&&(n=!1),e.call(this,t,n)||this}return r}(X1.Unpacker);Fo.Unpacker=vV;var _V=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),yV=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),q_=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&_V(r,e,t);return yV(r,e),r};Object.defineProperty(rt,"__esModule",{value:!0});rt.structure=rt.v2=rt.v1=void 0;var bV=q_(Vn);rt.v1=bV;var J1=q_(Fo);rt.v2=J1;var mV=q_(zr);rt.structure=mV;rt.default=J1;var He={};Object.defineProperty(He,"__esModule",{value:!0});He.SIGNATURES=void 0;var ge=H,eE=ge.internal.constants,gV=eE.ACCESS_MODE_READ,sc=eE.FETCH_ALL,ug=ge.internal.util.assertString,tE=1,rE=15,$c=16,nE=63,yo=1,oE=2,_v=17,iE=18,aE=19,uE=84,yv=102,sE=106,cE=107,lE=47,fE=63,wV="r",na=-1,OV=Object.freeze({INIT:tE,RESET:rE,RUN:$c,PULL_ALL:nE,HELLO:yo,GOODBYE:oE,BEGIN:_v,COMMIT:iE,ROLLBACK:aE,TELEMETRY:uE,ROUTE:yv,LOGON:sE,LOGOFF:cE,DISCARD:lE,PULL:fE});He.SIGNATURES=OV;var Si=function(){function e(r,t,n){this.signature=r,this.fields=t,this.toString=n}return e.init=function(r,t){return new e(tE,[r,t],function(){return"INIT ".concat(r," {...}")})},e.run=function(r,t){return new e($c,[r,t],function(){return"RUN ".concat(r," ").concat(ge.json.stringify(t))})},e.pullAll=function(){return EV},e.reset=function(){return SV},e.hello=function(r,t,n,o){n===void 0&&(n=null),o===void 0&&(o=null);var i=Object.assign({user_agent:r},t);return n&&(i.routing=n),o&&(i.patch_bolt=o),new e(yo,[i],function(){return"HELLO {user_agent: '".concat(r,"', ...}")})},e.hello5x1=function(r,t){t===void 0&&(t=null);var n={user_agent:r};return t&&(n.routing=t),new e(yo,[n],function(){return"HELLO {user_agent: '".concat(r,"', ...}")})},e.hello5x2=function(r,t,n){t===void 0&&(t=null),n===void 0&&(n=null);var o={user_agent:r};return bv(o,t),n&&(o.routing=n),new e(yo,[o],function(){return"HELLO ".concat(ge.json.stringify(o))})},e.hello5x3=function(r,t,n,o){n===void 0&&(n=null),o===void 0&&(o=null);var i={};return r&&(i.user_agent=r),t&&(i.bolt_agent={product:t.product,platform:t.platform,language:t.language,language_details:t.languageDetails}),bv(i,n),o&&(i.routing=o),new e(yo,[i],function(){return"HELLO ".concat(ge.json.stringify(i))})},e.hello5x5=function(r,t,n,o){n===void 0&&(n=null),o===void 0&&(o=null);var i={};return r&&(i.user_agent=r),t&&(i.bolt_agent={product:t.product,platform:t.platform,language:t.language,language_details:t.languageDetails}),vp(i,n),o&&(i.routing=o),new e(yo,[i],function(){return"HELLO ".concat(ge.json.stringify(i))})},e.logon=function(r){return new e(sE,[r],function(){return"LOGON { ... }"})},e.logoff=function(){return new e(cE,[],function(){return"LOGOFF"})},e.begin=function(r){var t=r===void 0?{}:r,n=t.bookmarks,o=t.txConfig,i=t.database,a=t.mode,s=t.impersonatedUser,c=t.notificationFilter,u=cc(n,o,i,a,s,c);return new e(_v,[u],function(){return"BEGIN ".concat(ge.json.stringify(u))})},e.begin5x5=function(r){var t=r===void 0?{}:r,n=t.bookmarks,o=t.txConfig,i=t.database,a=t.mode,s=t.impersonatedUser,c=t.notificationFilter,u=cc(n,o,i,a,s,c,{appendNotificationFilter:vp});return new e(_v,[u],function(){return"BEGIN ".concat(ge.json.stringify(u))})},e.commit=function(){return TV},e.rollback=function(){return PV},e.runWithMetadata=function(r,t,n){var o=n===void 0?{}:n,i=o.bookmarks,a=o.txConfig,s=o.database,c=o.mode,u=o.impersonatedUser,l=o.notificationFilter,d=cc(i,a,s,c,u,l);return new e($c,[r,t,d],function(){return"RUN ".concat(r," ").concat(ge.json.stringify(t)," ").concat(ge.json.stringify(d))})},e.runWithMetadata5x5=function(r,t,n){var o=n===void 0?{}:n,i=o.bookmarks,a=o.txConfig,s=o.database,c=o.mode,u=o.impersonatedUser,l=o.notificationFilter,d=cc(i,a,s,c,u,l,{appendNotificationFilter:vp});return new e($c,[r,t,d],function(){return"RUN ".concat(r," ").concat(ge.json.stringify(t)," ").concat(ge.json.stringify(d))})},e.goodbye=function(){return CV},e.pull=function(r){var t=r===void 0?{}:r,n=t.stmtId,o=n===void 0?na:n,i=t.n,a=i===void 0?sc:i,s=sg(o??na,a||sc);return new e(fE,[s],function(){return"PULL ".concat(ge.json.stringify(s))})},e.discard=function(r){var t=r===void 0?{}:r,n=t.stmtId,o=n===void 0?na:n,i=t.n,a=i===void 0?sc:i,s=sg(o??na,a||sc);return new e(lE,[s],function(){return"DISCARD ".concat(ge.json.stringify(s))})},e.telemetry=function(r){var t=r.api,n=(0,ge.int)(t);return new e(uE,[n],function(){return"TELEMETRY ".concat(n.toString())})},e.route=function(r,t,n){return r===void 0&&(r={}),t===void 0&&(t=[]),n===void 0&&(n=null),new e(yv,[r,t,n],function(){return"ROUTE ".concat(ge.json.stringify(r)," ").concat(ge.json.stringify(t)," ").concat(n)})},e.routeV4x4=function(r,t,n){r===void 0&&(r={}),t===void 0&&(t=[]),n===void 0&&(n={});var o={};return n.databaseName&&(o.db=n.databaseName),n.impersonatedUser&&(o.imp_user=n.impersonatedUser),new e(yv,[r,t,o],function(){return"ROUTE ".concat(ge.json.stringify(r)," ").concat(ge.json.stringify(t)," ").concat(ge.json.stringify(o))})},e}();He.default=Si;function cc(e,r,t,n,o,i,a){var s;a===void 0&&(a={});var c={};e.isEmpty()||(c.bookmarks=e.values()),r.timeout!==null&&(c.tx_timeout=r.timeout),r.metadata&&(c.tx_metadata=r.metadata),t&&(c.db=ug(t,"database")),o&&(c.imp_user=ug(o,"impersonatedUser")),n===gV&&(c.mode=wV);var u=(s=a.appendNotificationFilter)!==null&&s!==void 0?s:bv;return u(c,i),c}function sg(e,r){var t={n:(0,ge.int)(r)};return e!==na&&(t.qid=(0,ge.int)(e)),t}function bv(e,r){r&&(r.minimumSeverityLevel&&(e.notifications_minimum_severity=r.minimumSeverityLevel),r.disabledCategories&&(e.notifications_disabled_categories=r.disabledCategories),r.disabledClassifications&&(e.notifications_disabled_categories=r.disabledClassifications))}function vp(e,r){r&&(r.minimumSeverityLevel&&(e.notifications_minimum_severity=r.minimumSeverityLevel),r.disabledCategories&&(e.notifications_disabled_classifications=r.disabledCategories),r.disabledClassifications&&(e.notifications_disabled_classifications=r.disabledClassifications))}var EV=new Si(nE,[],function(){return"PULL_ALL"}),SV=new Si(rE,[],function(){return"RESET"}),TV=new Si(iE,[],function(){return"COMMIT"}),PV=new Si(aE,[],function(){return"ROLLBACK"}),CV=new Si(oE,[],function(){return"GOODBYE"}),If={},me={};Object.defineProperty(me,"__esModule",{value:!0});me.TypeTransformer=void 0;var AV=rt,IV=H,RV=IV.internal.objectUtil,$V=function(){function e(r){this._transformers=r,this._transformersPerSignature=new Map(r.map(function(t){return[t.signature,t]})),this.fromStructure=this.fromStructure.bind(this),this.toStructure=this.toStructure.bind(this),Object.freeze(this)}return e.prototype.fromStructure=function(r){try{if(r instanceof AV.structure.Structure&&this._transformersPerSignature.has(r.signature)){var t=this._transformersPerSignature.get(r.signature).fromStructure;return t(r)}return r}catch(n){return RV.createBrokenObject(n)}},e.prototype.toStructure=function(r){var t=this._transformers.find(function(n){var o=n.isTypeInstance;return o(r)});return t!==void 0?t.toStructure(r):r},e}();me.default=$V;var jV=function(){function e(r){var t=r.signature,n=r.fromStructure,o=r.toStructure,i=r.isTypeInstance;this.signature=t,this.isTypeInstance=i,this.fromStructure=n,this.toStructure=o,Object.freeze(this)}return e.prototype.extendsWith=function(r){var t=r.signature,n=r.fromStructure,o=r.toStructure,i=r.isTypeInstance;return new e({signature:t||this.signature,fromStructure:n||this.fromStructure,toStructure:o||this.toStructure,isTypeInstance:i||this.isTypeInstance})},e}();me.TypeTransformer=jV;var Rf=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};Object.defineProperty(If,"__esModule",{value:!0});var Fe=H,$f=rt,jf=me,Nf=Fe.error.PROTOCOL_ERROR,NV=78,kV=3,MV=82,DV=5,LV=114,UV=3,FV=80,BV=3;function xV(){return new jf.TypeTransformer({signature:NV,isTypeInstance:function(e){return e instanceof Fe.Node},toStructure:function(e){throw(0,Fe.newError)("It is not allowed to pass nodes in query parameters, given: ".concat(e),Nf)},fromStructure:function(e){$f.structure.verifyStructSize("Node",kV,e.size);var r=Rf(e.fields,3),t=r[0],n=r[1],o=r[2];return new Fe.Node(t,n,o)}})}function VV(){return new jf.TypeTransformer({signature:MV,isTypeInstance:function(e){return e instanceof Fe.Relationship},toStructure:function(e){throw(0,Fe.newError)("It is not allowed to pass relationships in query parameters, given: ".concat(e),Nf)},fromStructure:function(e){$f.structure.verifyStructSize("Relationship",DV,e.size);var r=Rf(e.fields,5),t=r[0],n=r[1],o=r[2],i=r[3],a=r[4];return new Fe.Relationship(t,n,o,i,a)}})}function WV(){return new jf.TypeTransformer({signature:LV,isTypeInstance:function(e){return e instanceof Fe.UnboundRelationship},toStructure:function(e){throw(0,Fe.newError)("It is not allowed to pass unbound relationships in query parameters, given: ".concat(e),Nf)},fromStructure:function(e){$f.structure.verifyStructSize("UnboundRelationship",UV,e.size);var r=Rf(e.fields,3),t=r[0],n=r[1],o=r[2];return new Fe.UnboundRelationship(t,n,o)}})}function zV(){return new jf.TypeTransformer({signature:FV,isTypeInstance:function(e){return e instanceof Fe.Path},toStructure:function(e){throw(0,Fe.newError)("It is not allowed to pass paths in query parameters, given: ".concat(e),Nf)},fromStructure:function(e){$f.structure.verifyStructSize("Path",BV,e.size);for(var r=Rf(e.fields,3),t=r[0],n=r[1],o=r[2],i=[],a=t[0],s=0;s<o.length;s+=2){var c=t[o[s+1]],u=(0,Fe.toNumber)(o[s]),l=void 0;u>0?(l=n[u-1],l instanceof Fe.UnboundRelationship&&(n[u-1]=l=l.bindTo(a,c))):(l=n[-u-1],l instanceof Fe.UnboundRelationship&&(n[-u-1]=l=l.bindTo(c,a))),i.push(new Fe.PathSegment(a,l,c)),a=c}return new Fe.Path(t[0],t[t.length-1],i)}})}If.default={createNodeTransformer:xV,createRelationshipTransformer:VV,createUnboundRelationshipTransformer:WV,createPathTransformer:zV};var mo=f&&f.__assign||function(){return mo=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},mo.apply(this,arguments)},HV=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),qV=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),GV=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&HV(r,e,t);return qV(r,e),r},dE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sf,"__esModule",{value:!0});var Hi=We,_p=rt,yn=GV(He),_o=oe,Bo=H,KV=dE(If),YV=dE(me),cg=Bo.internal.bookmarks.Bookmarks,hE=Bo.internal.constants,lg=hE.ACCESS_MODE_WRITE,ZV=hE.BOLT_PROTOCOL_V1;Bo.internal.logger.Logger;var fg=Bo.internal.txConfig.TxConfig,QV=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),XV=function(){function e(r,t,n,o,i,a){var s=n===void 0?{}:n,c=s.disableLosslessIntegers,u=s.useBigInt;o===void 0&&(o=function(){return null}),this._server=r||{},this._chunker=t,this._packer=this._createPacker(t),this._unpacker=this._createUnpacker(c,u),this._responseHandler=o(this),this._log=i,this._onProtocolError=a,this._fatalError=null,this._lastMessageSignature=null,this._config={disableLosslessIntegers:c,useBigInt:u}}return Object.defineProperty(e.prototype,"transformer",{get:function(){var r=this;return this._transformer===void 0&&(this._transformer=new YV.default(Object.values(KV.default).map(function(t){return t(r._config,r._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return ZV},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportsReAuth",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initialized",{get:function(){return!!this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authToken",{get:function(){return this._authToken},enumerable:!1,configurable:!0}),e.prototype.packer=function(){return this._packer},e.prototype.packable=function(r){return this._packer.packable(r,this.transformer.toStructure)},e.prototype.unpacker=function(){return this._unpacker},e.prototype.unpack=function(r){return this._unpacker.unpack(r,this.transformer.fromStructure)},e.prototype.transformMetadata=function(r){return r},e.prototype.enrichErrorMetadata=function(r){return mo(mo({},r),{diagnostic_record:r.diagnostic_record!==null?mo(mo({},QV),r.diagnostic_record):null})},e.prototype.initialize=function(r){var t=this,n=r===void 0?{}:r,o=n.userAgent;n.boltAgent;var i=n.authToken,a=n.notificationFilter,s=n.onError,c=n.onComplete,u=new _o.LoginObserver({onError:function(l){return t._onLoginError(l,s)},onCompleted:function(l){return t._onLoginCompleted(l,c)}});return(0,Hi.assertNotificationFilterIsEmpty)(a,this._onProtocolError,u),this.write(yn.default.init(o,i),u,!0),u},e.prototype.logoff=function(r){var t=r===void 0?{}:r,n=t.onComplete,o=t.onError;t.flush;var i=new _o.LogoffObserver({onCompleted:n,onError:o}),a=(0,Bo.newError)("Driver is connected to a database that does not support logoff. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(a.message),i.onError(a),a},e.prototype.logon=function(r){var t=this,n=r===void 0?{}:r,o=n.authToken,i=n.onComplete,a=n.onError;n.flush;var s=new _o.LoginObserver({onCompleted:function(){return t._onLoginCompleted({},o,i)},onError:function(u){return t._onLoginError(u,a)}}),c=(0,Bo.newError)("Driver is connected to a database that does not support logon. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(c.message),s.onError(c),c},e.prototype.prepareToClose=function(){},e.prototype.beginTransaction=function(r){var t=r===void 0?{}:r,n=t.bookmarks,o=t.txConfig,i=t.database,a=t.mode,s=t.impersonatedUser,c=t.notificationFilter,u=t.beforeError,l=t.afterError,d=t.beforeComplete,h=t.afterComplete;return this.run("BEGIN",n?n.asBeginTransactionParameters():{},{bookmarks:n,txConfig:o,database:i,mode:a,impersonatedUser:s,notificationFilter:c,beforeError:u,afterError:l,beforeComplete:d,afterComplete:h,flush:!1})},e.prototype.commitTransaction=function(r){var t=r===void 0?{}:r,n=t.beforeError,o=t.afterError,i=t.beforeComplete,a=t.afterComplete;return this.run("COMMIT",{},{bookmarks:cg.empty(),txConfig:fg.empty(),mode:lg,beforeError:n,afterError:o,beforeComplete:i,afterComplete:a})},e.prototype.rollbackTransaction=function(r){var t=r===void 0?{}:r,n=t.beforeError,o=t.afterError,i=t.beforeComplete,a=t.afterComplete;return this.run("ROLLBACK",{},{bookmarks:cg.empty(),txConfig:fg.empty(),mode:lg,beforeError:n,afterError:o,beforeComplete:i,afterComplete:a})},e.prototype.run=function(r,t,n){var o=n===void 0?{}:n;o.bookmarks;var i=o.txConfig,a=o.database;o.mode;var s=o.impersonatedUser,c=o.notificationFilter,u=o.beforeKeys,l=o.afterKeys,d=o.beforeError,h=o.afterError,p=o.beforeComplete,v=o.afterComplete,y=o.flush,_=y===void 0?!0:y,b=o.highRecordWatermark,w=b===void 0?Number.MAX_VALUE:b,S=o.lowRecordWatermark,E=S===void 0?Number.MAX_VALUE:S,T=new _o.ResultStreamObserver({server:this._server,beforeKeys:u,afterKeys:l,beforeError:d,afterError:h,beforeComplete:p,afterComplete:v,highRecordWatermark:w,lowRecordWatermark:E});return(0,Hi.assertTxConfigIsEmpty)(i,this._onProtocolError,T),(0,Hi.assertDatabaseIsEmpty)(a,this._onProtocolError,T),(0,Hi.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,T),(0,Hi.assertNotificationFilterIsEmpty)(c,this._onProtocolError,T),this.write(yn.default.run(r,t),T,!1),this.write(yn.default.pullAll(),T,_),T},Object.defineProperty(e.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),e.prototype.reset=function(r){var t=r===void 0?{}:r,n=t.onError,o=t.onComplete,i=new _o.ResetObserver({onProtocolError:this._onProtocolError,onError:n,onComplete:o});return this.write(yn.default.reset(),i,!0),i},e.prototype.telemetry=function(r,t){r.api;var n=t===void 0?{}:t;n.onError;var o=n.onCompleted,i=new _o.CompletedObserver;return o&&o(),i},e.prototype._createPacker=function(r){return new _p.v1.Packer(r)},e.prototype._createUnpacker=function(r,t){return new _p.v1.Unpacker(r,t)},e.prototype.write=function(r,t,n){var o=this.queueObserverIfProtocolIsNotBroken(t);if(o){this._log.isDebugEnabled()&&this._log.debug("C: ".concat(r)),this._lastMessageSignature=r.signature;var i=new _p.structure.Structure(r.signature,r.fields);this.packable(i)(),this._chunker.messageBoundary(),n&&this._chunker.flush()}},e.prototype.isLastMessageLogon=function(){return this._lastMessageSignature===yn.SIGNATURES.HELLO||this._lastMessageSignature===yn.SIGNATURES.LOGON},e.prototype.isLastMessageReset=function(){return this._lastMessageSignature===yn.SIGNATURES.RESET},e.prototype.notifyFatalError=function(r){return this._fatalError=r,this._responseHandler._notifyErrorToObservers(r)},e.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},e.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},e.prototype.queueObserverIfProtocolIsNotBroken=function(r){return this.isBroken()?(this.notifyFatalErrorToObserver(r),!1):this._responseHandler._queueObserver(r)},e.prototype.isBroken=function(){return!!this._fatalError},e.prototype.notifyFatalErrorToObserver=function(r){r&&r.onError&&r.onError(this._fatalError)},e.prototype.resetFailure=function(){this._responseHandler._resetFailure()},e.prototype._onLoginCompleted=function(r,t,n){if(this._initialized=!0,this._authToken=t,r){var o=r.server;this._server.version||(this._server.version=o)}n&&n(r)},e.prototype._onLoginError=function(r,t){this._onProtocolError(r.message),t&&t(r)},e}();Sf.default=XV;var kf={},Mf={},_r={};Object.defineProperty(_r,"__esModule",{value:!0});_r.epochSecondAndNanoToLocalDateTime=_r.nanoOfDayToLocalTime=_r.epochDayToDate=void 0;var Rn=H,un=Rn.internal.temporalUtil,JV=un.DAYS_0000_TO_1970,yp=un.DAYS_PER_400_YEAR_CYCLE,dg=un.NANOS_PER_HOUR,hg=un.NANOS_PER_MINUTE,mv=un.NANOS_PER_SECOND,pg=un.SECONDS_PER_DAY,eW=un.floorDiv,tW=un.floorMod;function pE(e){e=(0,Rn.int)(e);var r=e.add(JV).subtract(60),t=(0,Rn.int)(0);if(r.lessThan(0)){var n=r.add(1).div(yp).subtract(1);t=n.multiply(400),r=r.add(n.multiply(-yp))}var o=r.multiply(400).add(591).div(yp),i=r.subtract(o.multiply(365).add(o.div(4)).subtract(o.div(100)).add(o.div(400)));i.lessThan(0)&&(o=o.subtract(1),i=r.subtract(o.multiply(365).add(o.div(4)).subtract(o.div(100)).add(o.div(400)))),o=o.add(t);var a=i,s=a.multiply(5).add(2).div(153),c=s.add(2).modulo(12).add(1),u=a.subtract(s.multiply(306).add(5).div(10)).add(1);return o=o.add(s.div(10)),new Rn.Date(o,c,u)}_r.epochDayToDate=pE;function vE(e){e=(0,Rn.int)(e);var r=e.div(dg);e=e.subtract(r.multiply(dg));var t=e.div(hg);e=e.subtract(t.multiply(hg));var n=e.div(mv),o=e.subtract(n.multiply(mv));return new Rn.LocalTime(r,t,n,o)}_r.nanoOfDayToLocalTime=vE;function rW(e,r){var t=eW(e,pg),n=tW(e,pg),o=n.multiply(mv).add(r),i=pE(t),a=vE(o);return new Rn.LocalDateTime(i.year,i.month,i.day,a.hour,a.minute,a.second,a.nanosecond)}_r.epochSecondAndNanoToLocalDateTime=rW;var Wc=f&&f.__assign||function(){return Wc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Wc.apply(this,arguments)},Er=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},nW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mf,"__esModule",{value:!0});var de=H,De=rt,Sr=me,Ti=_r,oW=nW(If),G_=de.internal.temporalUtil,iW=G_.dateToEpochDay,K_=G_.localDateTimeToEpochSecond,_E=G_.localTimeToNanoOfDay,vg=88,aW=3,_g=89,uW=4,yg=69,sW=4,bg=116,cW=1,mg=84,lW=2,gg=68,fW=1,wg=100,dW=2,Og=70,hW=3,Eg=102,pW=3;function vW(){return new Sr.TypeTransformer({signature:vg,isTypeInstance:function(e){return(0,de.isPoint)(e)&&(e.z===null||e.z===void 0)},toStructure:function(e){return new De.structure.Structure(vg,[(0,de.int)(e.srid),e.x,e.y])},fromStructure:function(e){De.structure.verifyStructSize("Point2D",aW,e.size);var r=Er(e.fields,3),t=r[0],n=r[1],o=r[2];return new de.Point(t,n,o,void 0)}})}function _W(){return new Sr.TypeTransformer({signature:_g,isTypeInstance:function(e){return(0,de.isPoint)(e)&&e.z!==null&&e.z!==void 0},toStructure:function(e){return new De.structure.Structure(_g,[(0,de.int)(e.srid),e.x,e.y,e.z])},fromStructure:function(e){De.structure.verifyStructSize("Point3D",uW,e.size);var r=Er(e.fields,4),t=r[0],n=r[1],o=r[2],i=r[3];return new de.Point(t,n,o,i)}})}function yW(){return new Sr.TypeTransformer({signature:yg,isTypeInstance:de.isDuration,toStructure:function(e){var r=(0,de.int)(e.months),t=(0,de.int)(e.days),n=(0,de.int)(e.seconds),o=(0,de.int)(e.nanoseconds);return new De.structure.Structure(yg,[r,t,n,o])},fromStructure:function(e){De.structure.verifyStructSize("Duration",sW,e.size);var r=Er(e.fields,4),t=r[0],n=r[1],o=r[2],i=r[3];return new de.Duration(t,n,o,i)}})}function bW(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Sr.TypeTransformer({signature:bg,isTypeInstance:de.isLocalTime,toStructure:function(n){var o=_E(n.hour,n.minute,n.second,n.nanosecond);return new De.structure.Structure(bg,[o])},fromStructure:function(n){De.structure.verifyStructSize("LocalTime",cW,n.size);var o=Er(n.fields,1),i=o[0],a=(0,Ti.nanoOfDayToLocalTime)(i);return Pi(a,r,t)}})}function mW(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Sr.TypeTransformer({signature:mg,isTypeInstance:de.isTime,toStructure:function(n){var o=_E(n.hour,n.minute,n.second,n.nanosecond),i=(0,de.int)(n.timeZoneOffsetSeconds);return new De.structure.Structure(mg,[o,i])},fromStructure:function(n){De.structure.verifyStructSize("Time",lW,n.size);var o=Er(n.fields,2),i=o[0],a=o[1],s=(0,Ti.nanoOfDayToLocalTime)(i),c=new de.Time(s.hour,s.minute,s.second,s.nanosecond,a);return Pi(c,r,t)}})}function gW(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Sr.TypeTransformer({signature:gg,isTypeInstance:de.isDate,toStructure:function(n){var o=iW(n.year,n.month,n.day);return new De.structure.Structure(gg,[o])},fromStructure:function(n){De.structure.verifyStructSize("Date",fW,n.size);var o=Er(n.fields,1),i=o[0],a=(0,Ti.epochDayToDate)(i);return Pi(a,r,t)}})}function wW(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Sr.TypeTransformer({signature:wg,isTypeInstance:de.isLocalDateTime,toStructure:function(n){var o=K_(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),i=(0,de.int)(n.nanosecond);return new De.structure.Structure(wg,[o,i])},fromStructure:function(n){De.structure.verifyStructSize("LocalDateTime",dW,n.size);var o=Er(n.fields,2),i=o[0],a=o[1],s=(0,Ti.epochSecondAndNanoToLocalDateTime)(i,a);return Pi(s,r,t)}})}function OW(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Sr.TypeTransformer({signature:Eg,isTypeInstance:function(n){return(0,de.isDateTime)(n)&&n.timeZoneId!=null},toStructure:function(n){var o=K_(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),i=(0,de.int)(n.nanosecond),a=n.timeZoneId;return new De.structure.Structure(Eg,[o,i,a])},fromStructure:function(n){De.structure.verifyStructSize("DateTimeWithZoneId",pW,n.size);var o=Er(n.fields,3),i=o[0],a=o[1],s=o[2],c=(0,Ti.epochSecondAndNanoToLocalDateTime)(i,a),u=new de.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,c.nanosecond,null,s);return Pi(u,r,t)}})}function EW(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Sr.TypeTransformer({signature:Og,isTypeInstance:function(n){return(0,de.isDateTime)(n)&&n.timeZoneId==null},toStructure:function(n){var o=K_(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),i=(0,de.int)(n.nanosecond),a=(0,de.int)(n.timeZoneOffsetSeconds);return new De.structure.Structure(Og,[o,i,a])},fromStructure:function(n){De.structure.verifyStructSize("DateTimeWithZoneOffset",hW,n.size);var o=Er(n.fields,3),i=o[0],a=o[1],s=o[2],c=(0,Ti.epochSecondAndNanoToLocalDateTime)(i,a),u=new de.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,c.nanosecond,s,null);return Pi(u,r,t)}})}function Pi(e,r,t){if(!r&&!t)return e;var n=function(s){return t?s.toBigInt():s.toNumberOrInfinity()},o=Object.create(Object.getPrototypeOf(e));for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)===!0){var a=e[i];o[i]=(0,de.isInt)(a)?n(a):a}return Object.freeze(o),o}Mf.default=Wc(Wc({},oW.default),{createPoint2DTransformer:vW,createPoint3DTransformer:_W,createDurationTransformer:yW,createLocalTimeTransformer:bW,createTimeTransformer:mW,createDateTransformer:gW,createLocalDateTimeTransformer:wW,createDateTimeWithZoneIdTransformer:OW,createDateTimeWithOffsetTransformer:EW});var SW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Df=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(kf,"__esModule",{value:!0});var TW=Df(Sf),Sg=Df(rt),PW=H,CW=Df(Mf),AW=Df(me),IW=PW.internal.constants.BOLT_PROTOCOL_V2,RW=function(e){SW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype._createPacker=function(t){return new Sg.default.Packer(t)},r.prototype._createUnpacker=function(t,n){return new Sg.default.Unpacker(t,n)},Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new AW.default(Object.values(CW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return IW},enumerable:!1,configurable:!0}),r}(TW.default);kf.default=RW;var Lf={},Uf={},gv=f&&f.__assign||function(){return gv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},gv.apply(this,arguments)},$W=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Uf,"__esModule",{value:!0});var jW=$W(Mf);Uf.default=gv({},jW.default);var NW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zc=f&&f.__assign||function(){return zc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},zc.apply(this,arguments)},Ff=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lf,"__esModule",{value:!0});var kW=Ff(kf),bn=Ff(He),mn=We,Sn=oe,MW=Ff(Uf),DW=Ff(me),Y_=H;Y_.internal.bookmarks.Bookmarks;var LW=Y_.internal.constants.BOLT_PROTOCOL_V3,UW=Y_.internal.txConfig.TxConfig,yE="context",FW="CALL dbms.cluster.routing.getRoutingTable($".concat(yE,")"),BW=new Sn.StreamObserver,xW=function(e){NW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return LW},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new DW.default(Object.values(MW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.transformMetadata=function(t){return"t_first"in t&&(t.result_available_after=t.t_first,delete t.t_first),"t_last"in t&&(t.result_consumed_after=t.t_last,delete t.t_last),t},r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new Sn.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return n._onLoginCompleted(d,a,u)}});return(0,mn.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(bn.default.hello(i,a),l,!0),l},r.prototype.prepareToClose=function(){this.write(bn.default.goodbye(),BW,!0)},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.impersonatedUser,c=n.notificationFilter,u=n.mode,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new Sn.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),(0,mn.assertDatabaseIsEmpty)(a,this._onProtocolError,v),(0,mn.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,v),(0,mn.assertNotificationFilterIsEmpty)(c,this._onProtocolError,v),this.write(bn.default.begin({bookmarks:o,txConfig:i,mode:u}),v,!0),v},r.prototype.commitTransaction=function(t){var n=t===void 0?{}:t,o=n.beforeError,i=n.afterError,a=n.beforeComplete,s=n.afterComplete,c=new Sn.ResultStreamObserver({server:this._server,beforeError:o,afterError:i,beforeComplete:a,afterComplete:s});return c.prepareToHandleSingleResponse(),this.write(bn.default.commit(),c,!0),c},r.prototype.rollbackTransaction=function(t){var n=t===void 0?{}:t,o=n.beforeError,i=n.afterError,a=n.beforeComplete,s=n.afterComplete,c=new Sn.ResultStreamObserver({server:this._server,beforeError:o,afterError:i,beforeComplete:a,afterComplete:s});return c.prepareToHandleSingleResponse(),this.write(bn.default.rollback(),c,!0),c},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.impersonatedUser,l=i.notificationFilter,d=i.mode,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,y=i.afterError,_=i.beforeComplete,b=i.afterComplete,w=i.flush,S=w===void 0?!0:w,E=i.highRecordWatermark,T=E===void 0?Number.MAX_VALUE:E,C=i.lowRecordWatermark,P=C===void 0?Number.MAX_VALUE:C,I=new Sn.ResultStreamObserver({server:this._server,beforeKeys:h,afterKeys:p,beforeError:v,afterError:y,beforeComplete:_,afterComplete:b,highRecordWatermark:T,lowRecordWatermark:P});return(0,mn.assertDatabaseIsEmpty)(c,this._onProtocolError,I),(0,mn.assertImpersonatedUserIsEmpty)(u,this._onProtocolError,I),(0,mn.assertNotificationFilterIsEmpty)(l,this._onProtocolError,I),this.write(bn.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,mode:d}),I,!1),this.write(bn.default.pullAll(),I,S),I},r.prototype.requestRoutingInformation=function(t){var n,o=t.routingContext,i=o===void 0?{}:o,a=t.sessionContext,s=a===void 0?{}:a,c=t.onError,u=t.onCompleted,l=this.run(FW,(n={},n[yE]=i,n),zc(zc({},s),{txConfig:UW.empty()}));return new Sn.ProcedureRouteObserver({resultObserver:l,onProtocolError:this._onProtocolError,onError:c,onCompleted:u})},r}(kW.default);Lf.default=xW;var Bf={},xf={},wv=f&&f.__assign||function(){return wv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},wv.apply(this,arguments)},VW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xf,"__esModule",{value:!0});var WW=VW(Uf);xf.default=wv({},WW.default);var zW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Hc=f&&f.__assign||function(){return Hc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Hc.apply(this,arguments)},Vf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bf,"__esModule",{value:!0});var HW=Vf(Lf),qi=Vf(He),lc=We,bp=oe,qW=Vf(xf),GW=Vf(me),Z_=H;Z_.internal.bookmarks.Bookmarks;var bE=Z_.internal.constants,KW=bE.BOLT_PROTOCOL_V4_0,YW=bE.FETCH_ALL,ZW=Z_.internal.txConfig.TxConfig,mE="context",gE="database",QW="CALL dbms.routing.getRoutingTable($".concat(mE,", $").concat(gE,")"),XW=function(e){zW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return KW},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new GW.default(Object.values(qW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.impersonatedUser,c=n.notificationFilter,u=n.mode,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new bp.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),(0,lc.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,v),(0,lc.assertNotificationFilterIsEmpty)(c,this._onProtocolError,v),this.write(qi.default.begin({bookmarks:o,txConfig:i,database:a,mode:u}),v,!0),v},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.impersonatedUser,l=i.notificationFilter,d=i.mode,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,y=i.afterError,_=i.beforeComplete,b=i.afterComplete,w=i.flush,S=w===void 0?!0:w,E=i.reactive,T=E===void 0?!1:E,C=i.fetchSize,P=C===void 0?YW:C,I=i.highRecordWatermark,M=I===void 0?Number.MAX_VALUE:I,F=i.lowRecordWatermark,Q=F===void 0?Number.MAX_VALUE:F,q=new bp.ResultStreamObserver({server:this._server,reactive:T,fetchSize:P,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:y,beforeComplete:_,afterComplete:b,highRecordWatermark:M,lowRecordWatermark:Q});(0,lc.assertImpersonatedUserIsEmpty)(u,this._onProtocolError,q),(0,lc.assertNotificationFilterIsEmpty)(l,this._onProtocolError,q);var Z=T;return this.write(qi.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,database:c,mode:d}),q,Z&&S),T||this.write(qi.default.pull({n:P}),q,S),q},r.prototype._requestMore=function(t,n,o){this.write(qi.default.pull({stmtId:t,n}),o,!0)},r.prototype._requestDiscard=function(t,n){this.write(qi.default.discard({stmtId:t}),n,!0)},r.prototype._noOp=function(){},r.prototype.requestRoutingInformation=function(t){var n,o=t.routingContext,i=o===void 0?{}:o,a=t.databaseName,s=a===void 0?null:a,c=t.sessionContext,u=c===void 0?{}:c,l=t.onError,d=t.onCompleted,h=this.run(QW,(n={},n[mE]=i,n[gE]=s,n),Hc(Hc({},u),{txConfig:ZW.empty()}));return new bp.ProcedureRouteObserver({resultObserver:h,onProtocolError:this._onProtocolError,onError:l,onCompleted:d})},r}(HW.default);Bf.default=XW;var Wf={},zf={},Ov=f&&f.__assign||function(){return Ov=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ov.apply(this,arguments)},JW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zf,"__esModule",{value:!0});var ez=JW(xf);zf.default=Ov({},ez.default);var tz=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Hf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wf,"__esModule",{value:!0});var rz=Hf(Bf),nz=Hf(He),oz=oe,iz=H,az=We,uz=Hf(zf),sz=Hf(me),cz=iz.internal.constants.BOLT_PROTOCOL_V4_1,lz=function(e){tz(r,e);function r(t,n,o,i,a,s,c){i===void 0&&(i=function(){return null});var u=e.call(this,t,n,o,i,a,s)||this;return u._serversideRouting=c,u}return Object.defineProperty(r.prototype,"version",{get:function(){return cz},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new sz.default(Object.values(uz.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new oz.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return n._onLoginCompleted(d,a,u)}});return(0,az.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(nz.default.hello(i,a,this._serversideRouting),l,!0),l},r}(rz.default);Wf.default=lz;var qf={},Gf={},Ev=f&&f.__assign||function(){return Ev=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ev.apply(this,arguments)},fz=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gf,"__esModule",{value:!0});var dz=fz(zf);Gf.default=Ev({},dz.default);var hz=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Q_=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qf,"__esModule",{value:!0});var pz=Q_(Wf),vz=H,_z=Q_(Gf),yz=Q_(me),bz=vz.internal.constants.BOLT_PROTOCOL_V4_2,mz=function(e){hz(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return bz},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new yz.default(Object.values(_z.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r}(pz.default);qf.default=mz;var Ls={},Kf={},Sv=f&&f.__assign||function(){return Sv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Sv.apply(this,arguments)},gz=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kf,"__esModule",{value:!0});var wz=gz(Gf);Kf.default=Sv({},wz.default);var Us={},Fs={},Tv=f&&f.__assign||function(){return Tv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Tv.apply(this,arguments)},Oz=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fs,"__esModule",{value:!0});var Ez=Oz(Kf);Fs.default=Tv({},Ez.default);var wE=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Sz=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Us,"__esModule",{value:!0});var qc=rt,vt=H,OE=Sz(Fs),Tz=_r,Pz=xn,Ta=vt.internal.temporalUtil.localDateTimeToEpochSecond,Tg=73,Cz=3,Pg=105,Az=3;function Iz(e,r){var t=e.disableLosslessIntegers,n=e.useBigInt,o=OE.default.createDateTimeWithZoneIdTransformer(e);return o.extendsWith({signature:Pg,fromStructure:function(i){qc.structure.verifyStructSize("DateTimeWithZoneId",Az,i.size);var a=wE(i.fields,3),s=a[0],c=a[1],u=a[2],l=Pv(u,s,c),d=new vt.DateTime(l.year,l.month,l.day,l.hour,l.minute,l.second,(0,vt.int)(c),l.timeZoneOffsetSeconds,u);return EE(d,t,n)},toStructure:function(i){var a=Ta(i.year,i.month,i.day,i.hour,i.minute,i.second,i.nanosecond),s=i.timeZoneOffsetSeconds!=null?i.timeZoneOffsetSeconds:Rz(i.timeZoneId,a,i.nanosecond);i.timeZoneOffsetSeconds==null&&r.warn('DateTime objects without "timeZoneOffsetSeconds" property are prune to bugs related to ambiguous times. For instance, 2022-10-30T2:30:00[Europe/Berlin] could be GMT+1 or GMT+2.');var c=a.subtract(s),u=(0,vt.int)(i.nanosecond),l=i.timeZoneId;return new qc.structure.Structure(Pg,[c,u,l])}})}function Rz(e,r,t){var n=Pv(e,r,t),o=Ta(n.year,n.month,n.day,n.hour,n.minute,n.second,t),i=o.subtract(r),a=r.subtract(i),s=Pv(e,a,t),c=Ta(s.year,s.month,s.day,s.hour,s.minute,s.second,t),u=c.subtract(a);return u}var mp=new Map;function $z(e){if(!mp.has(e)){var r=new Intl.DateTimeFormat("en-US",{timeZone:e,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"});mp.set(e,r)}return mp.get(e)}function Pv(e,r,t){var n=$z(e),o=(0,vt.int)(r).multiply(1e3).add((0,vt.int)(t).div(1e6)).toNumber(),i=n.formatToParts(o),a=i.reduce(function(c,u){return u.type==="era"?c.adjustEra=u.value.toUpperCase()==="B"?function(l){return l.subtract(1).negate()}:Pz.identity:u.type==="hour"?c.hour=(0,vt.int)(u.value).modulo(24):u.type!=="literal"&&(c[u.type]=(0,vt.int)(u.value)),c},{});a.year=a.adjustEra(a.year);var s=Ta(a.year,a.month,a.day,a.hour,a.minute,a.second,a.nanosecond);return a.timeZoneOffsetSeconds=s.subtract(r),a.hour=a.hour.modulo(24),a}function jz(e){var r=e.disableLosslessIntegers,t=e.useBigInt,n=OE.default.createDateTimeWithOffsetTransformer(e);return n.extendsWith({signature:Tg,toStructure:function(o){var i=Ta(o.year,o.month,o.day,o.hour,o.minute,o.second,o.nanosecond),a=(0,vt.int)(o.nanosecond),s=(0,vt.int)(o.timeZoneOffsetSeconds),c=i.subtract(s);return new qc.structure.Structure(Tg,[c,a,s])},fromStructure:function(o){qc.structure.verifyStructSize("DateTimeWithZoneOffset",Cz,o.size);var i=wE(o.fields,3),a=i[0],s=i[1],c=i[2],u=(0,vt.int)(a).add(c),l=(0,Tz.epochSecondAndNanoToLocalDateTime)(u,s),d=new vt.DateTime(l.year,l.month,l.day,l.hour,l.minute,l.second,l.nanosecond,c,null);return EE(d,r,t)}})}function EE(e,r,t){if(!r&&!t)return e;var n=function(s){return t?s.toBigInt():s.toNumberOrInfinity()},o=Object.create(Object.getPrototypeOf(e));for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)===!0){var a=e[i];o[i]=(0,vt.isInt)(a)?n(a):a}return Object.freeze(o),o}Us.default={createDateTimeWithZoneIdTransformer:Iz,createDateTimeWithOffsetTransformer:jz};var Nz=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gc=f&&f.__assign||function(){return Gc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Gc.apply(this,arguments)},Bs=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ls,"__esModule",{value:!0});var kz=Bs(qf),Cg=Bs(He),Ag=oe,Mz=We,Ig=Bs(Kf),Dz=Bs(Us),Rg=Bs(me),SE=H,Lz=SE.internal.bookmarks.Bookmarks,Uz=SE.internal.constants.BOLT_PROTOCOL_V4_3,Fz=function(e){Nz(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return Uz},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Rg.default(Object.values(Ig.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.requestRoutingInformation=function(t){var n=t.routingContext,o=n===void 0?{}:n,i=t.databaseName,a=i===void 0?null:i,s=t.sessionContext,c=s===void 0?{}:s,u=t.onError,l=t.onCompleted,d=new Ag.RouteObserver({onProtocolError:this._onProtocolError,onError:u,onCompleted:l}),h=c.bookmarks||Lz.empty();return this.write(Cg.default.route(o,h.values(),a),d,!0),d},r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new Ag.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return d.patch_bolt!==void 0&&n._applyPatches(d.patch_bolt),n._onLoginCompleted(d,a,u)}});return(0,Mz.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(Cg.default.hello(i,a,this._serversideRouting,["utc"]),l,!0),l},r.prototype._applyPatches=function(t){t.includes("utc")&&this._applyUtcPatch()},r.prototype._applyUtcPatch=function(){var t=this;this._transformer=new Rg.default(Object.values(Gc(Gc({},Ig.default),Dz.default)).map(function(n){return n(t._config,t._log)}))},r}(kz.default);Ls.default=Fz;var Yf={},Bz=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Kc=f&&f.__assign||function(){return Kc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Kc.apply(this,arguments)},xs=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yf,"__esModule",{value:!0});var xz=xs(Ls),TE=H,fc=xs(He),gp=oe,$g=We,jg=xs(Fs),Vz=xs(Us),Ng=xs(me),PE=TE.internal.constants,Wz=PE.BOLT_PROTOCOL_V4_4,zz=PE.FETCH_ALL,Hz=TE.internal.bookmarks.Bookmarks,qz=function(e){Bz(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return Wz},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Ng.default(Object.values(jg.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.requestRoutingInformation=function(t){var n=t.routingContext,o=n===void 0?{}:n,i=t.databaseName,a=i===void 0?null:i,s=t.impersonatedUser,c=s===void 0?null:s,u=t.sessionContext,l=u===void 0?{}:u,d=t.onError,h=t.onCompleted,p=new gp.RouteObserver({onProtocolError:this._onProtocolError,onError:d,onCompleted:h}),v=l.bookmarks||Hz.empty();return this.write(fc.default.routeV4x4(o,v.values(),{databaseName:a,impersonatedUser:c}),p,!0),p},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,y=i.afterError,_=i.beforeComplete,b=i.afterComplete,w=i.flush,S=w===void 0?!0:w,E=i.reactive,T=E===void 0?!1:E,C=i.fetchSize,P=C===void 0?zz:C,I=i.highRecordWatermark,M=I===void 0?Number.MAX_VALUE:I,F=i.lowRecordWatermark,Q=F===void 0?Number.MAX_VALUE:F,q=new gp.ResultStreamObserver({server:this._server,reactive:T,fetchSize:P,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:y,beforeComplete:_,afterComplete:b,highRecordWatermark:M,lowRecordWatermark:Q});(0,$g.assertNotificationFilterIsEmpty)(d,this._onProtocolError,q);var Z=T;return this.write(fc.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l}),q,Z&&S),T||this.write(fc.default.pull({n:P}),q,S),q},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.mode,c=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new gp.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),(0,$g.assertNotificationFilterIsEmpty)(u,this._onProtocolError,v),this.write(fc.default.begin({bookmarks:o,txConfig:i,database:a,mode:s,impersonatedUser:c}),v,!0),v},r.prototype._applyUtcPatch=function(){var t=this;this._transformer=new Ng.default(Object.values(Kc(Kc({},jg.default),Vz.default)).map(function(n){return n(t._config,t._log)}))},r}(xz.default);Yf.default=qz;var Zf={},Qf={},pa=f&&f.__assign||function(){return pa=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},pa.apply(this,arguments)},X_=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},CE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qf,"__esModule",{value:!0});var J_=rt,ey=H,Xf=CE(Fs),Gz=CE(Us),Kz=4,Yz=8,Zz=4;function Qz(e){var r=Xf.default.createNodeTransformer(e);return r.extendsWith({fromStructure:function(t){J_.structure.verifyStructSize("Node",Kz,t.size);var n=X_(t.fields,4),o=n[0],i=n[1],a=n[2],s=n[3];return new ey.Node(o,i,a,s)}})}function Xz(e){var r=Xf.default.createRelationshipTransformer(e);return r.extendsWith({fromStructure:function(t){J_.structure.verifyStructSize("Relationship",Yz,t.size);var n=X_(t.fields,8),o=n[0],i=n[1],a=n[2],s=n[3],c=n[4],u=n[5],l=n[6],d=n[7];return new ey.Relationship(o,i,a,s,c,u,l,d)}})}function Jz(e){var r=Xf.default.createUnboundRelationshipTransformer(e);return r.extendsWith({fromStructure:function(t){J_.structure.verifyStructSize("UnboundRelationship",Zz,t.size);var n=X_(t.fields,4),o=n[0],i=n[1],a=n[2],s=n[3];return new ey.UnboundRelationship(o,i,a,s)}})}Qf.default=pa(pa(pa({},Xf.default),Gz.default),{createNodeTransformer:Qz,createRelationshipTransformer:Xz,createUnboundRelationshipTransformer:Jz});var e7=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Jf=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zf,"__esModule",{value:!0});var t7=Jf(Yf),r7=We,n7=Jf(Qf),o7=Jf(me),i7=Jf(He),a7=oe,u7=H,s7=u7.internal.constants.BOLT_PROTOCOL_V5_0,c7=function(e){e7(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return s7},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new o7.default(Object.values(n7.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l=new a7.LoginObserver({onError:function(d){return n._onLoginError(d,c)},onCompleted:function(d){return n._onLoginCompleted(d,a,u)}});return(0,r7.assertNotificationFilterIsEmpty)(s,this._onProtocolError,l),this.write(i7.default.hello(i,a,this._serversideRouting),l,!0),l},r}(t7.default);Zf.default=c7;var ed={},td={},Cv=f&&f.__assign||function(){return Cv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Cv.apply(this,arguments)},l7=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(td,"__esModule",{value:!0});var f7=l7(Qf);td.default=Cv({},f7.default);var d7=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yc=f&&f.__assign||function(){return Yc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Yc.apply(this,arguments)},rd=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ed,"__esModule",{value:!0});var h7=rd(Zf),p7=We,v7=rd(td),_7=rd(me),wp=rd(He),Op=oe,y7=H,b7=y7.internal.constants.BOLT_PROTOCOL_V5_1,m7=function(e){d7(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return b7},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new _7.default(Object.values(v7.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l={},d=new Op.LoginObserver({onError:function(h){return n._onLoginError(h,c)},onCompleted:function(h){return l.metadata=h,n._onLoginCompleted(h)}});return(0,p7.assertNotificationFilterIsEmpty)(s,this._onProtocolError,d),this.write(wp.default.hello5x1(i,this._serversideRouting),d,!1),this.logon({authToken:a,onComplete:function(h){return u(Yc(Yc({},h),l.metadata))},onError:c,flush:!0})},r.prototype.logon=function(t){var n=this,o=t===void 0?{}:t,i=o.authToken,a=o.onComplete,s=o.onError,c=o.flush,u=new Op.LoginObserver({onCompleted:function(){return n._onLoginCompleted(null,i,a)},onError:function(l){return n._onLoginError(l,s)}});return this.write(wp.default.logon(i),u,c),u},r.prototype.logoff=function(t){var n=t===void 0?{}:t,o=n.onComplete,i=n.onError,a=n.flush,s=new Op.LogoffObserver({onCompleted:o,onError:i});return this.write(wp.default.logoff(),s,a),s},r}(h7.default);ed.default=m7;var nd={},od={},Av=f&&f.__assign||function(){return Av=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Av.apply(this,arguments)},g7=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(od,"__esModule",{value:!0});var w7=g7(td);od.default=Av({},w7.default);var O7=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Zc=f&&f.__assign||function(){return Zc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Zc.apply(this,arguments)},id=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nd,"__esModule",{value:!0});var E7=id(ed),S7=id(od),T7=id(me),dc=id(He),Ep=oe,P7=H,AE=P7.internal.constants,C7=AE.BOLT_PROTOCOL_V5_2,A7=AE.FETCH_ALL,I7=function(e){O7(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return C7},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new T7.default(Object.values(S7.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent;o.boltAgent;var a=o.authToken,s=o.notificationFilter,c=o.onError,u=o.onComplete,l={},d=new Ep.LoginObserver({onError:function(h){return n._onLoginError(h,c)},onCompleted:function(h){return l.metadata=h,n._onLoginCompleted(h)}});return this.write(dc.default.hello5x2(i,s,this._serversideRouting),d,!1),this.logon({authToken:a,onComplete:function(h){return u(Zc(Zc({},h),l.metadata))},onError:c,flush:!0})},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.mode,c=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new Ep.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),this.write(dc.default.begin({bookmarks:o,txConfig:i,database:a,mode:s,impersonatedUser:c,notificationFilter:u}),v,!0),v},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,y=i.afterError,_=i.beforeComplete,b=i.afterComplete,w=i.flush,S=w===void 0?!0:w,E=i.reactive,T=E===void 0?!1:E,C=i.fetchSize,P=C===void 0?A7:C,I=i.highRecordWatermark,M=I===void 0?Number.MAX_VALUE:I,F=i.lowRecordWatermark,Q=F===void 0?Number.MAX_VALUE:F,q=new Ep.ResultStreamObserver({server:this._server,reactive:T,fetchSize:P,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:y,beforeComplete:_,afterComplete:b,highRecordWatermark:M,lowRecordWatermark:Q}),Z=T;return this.write(dc.default.runWithMetadata(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l,notificationFilter:d}),q,Z&&S),T||this.write(dc.default.pull({n:P}),q,S),q},r}(E7.default);nd.default=I7;var ad={},ud={},Iv=f&&f.__assign||function(){return Iv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Iv.apply(this,arguments)},R7=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ud,"__esModule",{value:!0});var $7=R7(od);ud.default=Iv({},$7.default);var j7=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qc=f&&f.__assign||function(){return Qc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Qc.apply(this,arguments)},sd=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ad,"__esModule",{value:!0});var N7=sd(nd),k7=sd(ud),M7=sd(me),D7=sd(He),L7=oe,U7=H,F7=U7.internal.constants.BOLT_PROTOCOL_V5_3,B7=function(e){j7(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return F7},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new M7.default(Object.values(k7.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent,a=o.boltAgent,s=o.authToken,c=o.notificationFilter,u=o.onError,l=o.onComplete,d={},h=new L7.LoginObserver({onError:function(p){return n._onLoginError(p,u)},onCompleted:function(p){return d.metadata=p,n._onLoginCompleted(p)}});return this.write(D7.default.hello5x3(i,a,c,this._serversideRouting),h,!1),this.logon({authToken:s,onComplete:function(p){return l(Qc(Qc({},p),d.metadata))},onError:u,flush:!0})},r}(N7.default);ad.default=B7;var cd={},ld={},Rv=f&&f.__assign||function(){return Rv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Rv.apply(this,arguments)},x7=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ld,"__esModule",{value:!0});var V7=x7(ud);ld.default=Rv({},V7.default);var W7=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fd=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cd,"__esModule",{value:!0});var z7=fd(ad),H7=fd(ld),q7=fd(He),G7=oe,K7=fd(me),Y7=H,Z7=Y7.internal.constants.BOLT_PROTOCOL_V5_4,Q7=function(e){W7(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return Z7},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new K7.default(Object.values(H7.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.telemetry=function(t,n){var o=t.api,i=n===void 0?{}:n,a=i.onError,s=i.onCompleted,c=new G7.TelemetryObserver({onCompleted:s,onError:a});return this.write(q7.default.telemetry({api:o}),c,!1),c},r}(z7.default);cd.default=Q7;var dd={},hd={},$v=f&&f.__assign||function(){return $v=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},$v.apply(this,arguments)},X7=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hd,"__esModule",{value:!0});var J7=X7(ld);hd.default=$v({},J7.default);var eH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),jr=f&&f.__assign||function(){return jr=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},jr.apply(this,arguments)},pd=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dd,"__esModule",{value:!0});var tH=pd(cd),rH=pd(hd),nH=pd(me),hc=pd(He),Sp=oe,oH=H,IE=oH.internal.constants,iH=IE.BOLT_PROTOCOL_V5_5,aH=IE.FETCH_ALL,uH=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),sH=function(e){eH(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return iH},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new nH.default(Object.values(rH.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,o=t===void 0?{}:t,i=o.userAgent,a=o.boltAgent,s=o.authToken,c=o.notificationFilter,u=o.onError,l=o.onComplete,d={},h=new Sp.LoginObserver({onError:function(p){return n._onLoginError(p,u)},onCompleted:function(p){return d.metadata=p,n._onLoginCompleted(p)}});return this.write(hc.default.hello5x5(i,a,c,this._serversideRouting),h,!1),this.logon({authToken:s,onComplete:function(p){return l(jr(jr({},p),d.metadata))},onError:u,flush:!0})},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,o=n.bookmarks,i=n.txConfig,a=n.database,s=n.mode,c=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,d=n.afterError,h=n.beforeComplete,p=n.afterComplete,v=new Sp.ResultStreamObserver({server:this._server,beforeError:l,afterError:d,beforeComplete:h,afterComplete:p});return v.prepareToHandleSingleResponse(),this.write(hc.default.begin5x5({bookmarks:o,txConfig:i,database:a,mode:s,impersonatedUser:c,notificationFilter:u}),v,!0),v},r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,y=i.afterError,_=i.beforeComplete,b=i.afterComplete,w=i.flush,S=w===void 0?!0:w,E=i.reactive,T=E===void 0?!1:E,C=i.fetchSize,P=C===void 0?aH:C,I=i.highRecordWatermark,M=I===void 0?Number.MAX_VALUE:I,F=i.lowRecordWatermark,Q=F===void 0?Number.MAX_VALUE:F,q=new Sp.ResultStreamObserver({server:this._server,reactive:T,fetchSize:P,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:y,beforeComplete:_,afterComplete:b,highRecordWatermark:M,lowRecordWatermark:Q,enrichMetadata:this._enrichMetadata}),Z=T;return this.write(hc.default.runWithMetadata5x5(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l,notificationFilter:d}),q,Z&&S),T||this.write(hc.default.pull({n:P}),q,S),q},r.prototype._enrichMetadata=function(t){return Array.isArray(t.statuses)&&(t.statuses=t.statuses.map(function(n){return jr(jr({},n),{description:n.neo4j_code!=null?n.status_description:n.description,diagnostic_record:n.diagnostic_record!==null?jr(jr({},uH),n.diagnostic_record):null})})),t},r}(tH.default);dd.default=sH;var vd={},_d={},jv=f&&f.__assign||function(){return jv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},jv.apply(this,arguments)},cH=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_d,"__esModule",{value:!0});var lH=cH(hd);_d.default=jv({},lH.default);var fH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),go=f&&f.__assign||function(){return go=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},go.apply(this,arguments)},ty=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vd,"__esModule",{value:!0});var dH=ty(dd),hH=ty(_d),pH=ty(me),vH=H,_H=vH.internal.constants.BOLT_PROTOCOL_V5_6,yH=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),bH=function(e){fH(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return _H},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new pH.default(Object.values(hH.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype._enrichMetadata=function(t){return Array.isArray(t.statuses)&&(t.statuses=t.statuses.map(function(n){return go(go({},n),{diagnostic_record:n.diagnostic_record!==null?go(go({},yH),n.diagnostic_record):null})})),t},r}(dH.default);vd.default=bH;var yd={},bd={},Nv=f&&f.__assign||function(){return Nv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Nv.apply(this,arguments)},mH=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bd,"__esModule",{value:!0});var gH=mH(_d);bd.default=Nv({},gH.default);var wH=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),wo=f&&f.__assign||function(){return wo=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},wo.apply(this,arguments)},ry=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yd,"__esModule",{value:!0});var OH=ry(vd),EH=ry(bd),SH=ry(me),TH=H,PH=TH.internal.constants.BOLT_PROTOCOL_V5_7,CH=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),AH=function(e){wH(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return PH},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new SH.default(Object.values(EH.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.enrichErrorMetadata=function(t){return wo(wo({},t),{cause:t.cause!==null&&t.cause!==void 0?this.enrichErrorMetadata(t.cause):null,code:t.neo4j_code,diagnostic_record:t.diagnostic_record!==null?wo(wo({},CH),t.diagnostic_record):null})},r}(OH.default);yd.default=AH;var ny={},oy={},kv=f&&f.__assign||function(){return kv=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},kv.apply(this,arguments)},IH=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oy,"__esModule",{value:!0});var RH=IH(bd);oy.default=kv({},RH.default);var $H=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),md=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ny,"__esModule",{value:!0});var jH=md(yd),NH=md(oy),kH=md(me),kg=md(He),MH=oe,DH=H,RE=DH.internal.constants,LH=RE.BOLT_PROTOCOL_V5_8,UH=RE.FETCH_ALL,FH=function(e){$H(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return LH},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new kH.default(Object.values(NH.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.run=function(t,n,o){var i=o===void 0?{}:o,a=i.bookmarks,s=i.txConfig,c=i.database,u=i.mode,l=i.impersonatedUser,d=i.notificationFilter,h=i.beforeKeys,p=i.afterKeys,v=i.beforeError,y=i.afterError,_=i.beforeComplete,b=i.afterComplete,w=i.flush,S=w===void 0?!0:w,E=i.reactive,T=E===void 0?!1:E,C=i.fetchSize,P=C===void 0?UH:C,I=i.highRecordWatermark,M=I===void 0?Number.MAX_VALUE:I,F=i.lowRecordWatermark,Q=F===void 0?Number.MAX_VALUE:F,q=i.onDb,Z=new MH.ResultStreamObserver({server:this._server,reactive:T,fetchSize:P,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:h,afterKeys:p,beforeError:v,afterError:y,beforeComplete:_,afterComplete:b,highRecordWatermark:M,lowRecordWatermark:Q,enrichMetadata:this._enrichMetadata,onDb:q}),fe=T;return this.write(kg.default.runWithMetadata5x5(t,n,{bookmarks:a,txConfig:s,database:c,mode:u,impersonatedUser:l,notificationFilter:d}),Z,fe&&S),T||this.write(kg.default.pull({n:P}),Z,S),Z},r}(jH.default);ny.default=FH;var iy={};Object.defineProperty(iy,"__esModule",{value:!0});var Cr=H,BH=112,xH=113,VH=126,WH=127;function cr(){}function Tp(e){return e}var zH={onNext:cr,onCompleted:cr,onError:cr},HH=function(){function e(r){var t=r===void 0?{}:r,n=t.transformMetadata,o=t.enrichErrorMetadata,i=t.log,a=t.observer;this._pendingObservers=[],this._log=i,this._transformMetadata=n||Tp,this._enrichErrorMetadata=o||Tp,this._observer=Object.assign({onObserversCountChange:cr,onError:cr,onFailure:cr,onErrorApplyTransformation:Tp},a)}return Object.defineProperty(e.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),e.prototype.handleResponse=function(r){var t=r.fields[0];switch(r.signature){case xH:this._log.isDebugEnabled()&&this._log.debug("S: RECORD ".concat(Cr.json.stringify(r))),this._currentObserver.onNext(t);break;case BH:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS ".concat(Cr.json.stringify(r)));try{var n=this._transformMetadata(t);this._currentObserver.onCompleted(n)}finally{this._updateCurrentObserver()}break;case WH:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE ".concat(Cr.json.stringify(r)));try{this._currentFailure=this._handleErrorPayload(this._enrichErrorMetadata(t)),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case VH:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED ".concat(Cr.json.stringify(r)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,Cr.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,Cr.newError)("Unknown Bolt protocol message: "+r))}},e.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onObserversCountChange(this._observersCount)},Object.defineProperty(e.prototype,"_observersCount",{get:function(){return this._currentObserver==null?this._pendingObservers.length:this._pendingObservers.length+1},enumerable:!1,configurable:!0}),e.prototype._queueObserver=function(r){return r=r||zH,r.onCompleted=r.onCompleted||cr,r.onError=r.onError||cr,r.onNext=r.onNext||cr,this._currentObserver===void 0?this._currentObserver=r:this._pendingObservers.push(r),this._observer.onObserversCountChange(this._observersCount),!0},e.prototype._notifyErrorToObservers=function(r){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(r);this._pendingObservers.length>0;){var t=this._pendingObservers.shift();t&&t.onError&&t.onError(r)}},e.prototype.hasOngoingObservableRequests=function(){return this._currentObserver!=null||this._pendingObservers.length>0},e.prototype._resetFailure=function(){this._currentFailure=null},e.prototype._handleErrorPayload=function(r){var t=qH(r.code),n=r.cause!=null?this._handleErrorCause(r.cause):void 0,o=(0,Cr.newError)(r.message,t,n,r.gql_status,r.description,r.diagnostic_record);return this._observer.onErrorApplyTransformation(o)},e.prototype._handleErrorCause=function(r){var t=r.cause!=null?this._handleErrorCause(r.cause):void 0,n=(0,Cr.newGQLError)(r.message,t,r.gql_status,r.description,r.diagnostic_record);return this._observer.onErrorApplyTransformation(n)},e}();iy.default=HH;function qH(e){return e==="Neo.TransientError.Transaction.Terminated"?"Neo.ClientError.Transaction.Terminated":e==="Neo.TransientError.Transaction.LockClientStopped"?"Neo.ClientError.Transaction.LockClientStopped":e}var Le=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(z_,"__esModule",{value:!0});var GH=H,KH=Le(Sf),YH=Le(kf),ZH=Le(Lf),QH=Le(Bf),XH=Le(Wf),JH=Le(qf),eq=Le(Ls),tq=Le(Yf),rq=Le(Zf),nq=Le(ed),oq=Le(nd),iq=Le(ad),aq=Le(cd),uq=Le(dd),sq=Le(vd),cq=Le(yd),lq=Le(ny),fq=Le(iy);function dq(e){var r=e===void 0?{}:e,t=r.version,n=r.chunker,o=r.dechunker,i=r.channel,a=r.disableLosslessIntegers,s=r.useBigInt,c=r.serversideRouting,u=r.server,l=r.log,d=r.observer,h=function(p){var v=new fq.default({transformMetadata:p.transformMetadata.bind(p),enrichErrorMetadata:p.enrichErrorMetadata.bind(p),log:l,observer:d});return i.onerror=d.onError.bind(d),i.onmessage=function(y){return o.write(y)},o.onmessage=function(y){try{v.handleResponse(p.unpack(y))}catch(_){return d.onError(_)}},v};return hq(t,u,n,{disableLosslessIntegers:a,useBigInt:s},c,h,d.onProtocolError.bind(d),l)}z_.default=dq;function hq(e,r,t,n,o,i,a,s){switch(e){case 1:return new KH.default(r,t,n,i,s,a);case 2:return new YH.default(r,t,n,i,s,a);case 3:return new ZH.default(r,t,n,i,s,a);case 4:return new QH.default(r,t,n,i,s,a);case 4.1:return new XH.default(r,t,n,i,s,a,o);case 4.2:return new JH.default(r,t,n,i,s,a,o);case 4.3:return new eq.default(r,t,n,i,s,a,o);case 4.4:return new tq.default(r,t,n,i,s,a,o);case 5:return new rq.default(r,t,n,i,s,a,o);case 5.1:return new nq.default(r,t,n,i,s,a,o);case 5.2:return new oq.default(r,t,n,i,s,a,o);case 5.3:return new iq.default(r,t,n,i,s,a,o);case 5.4:return new aq.default(r,t,n,i,s,a,o);case 5.5:return new uq.default(r,t,n,i,s,a,o);case 5.6:return new sq.default(r,t,n,i,s,a,o);case 5.7:return new cq.default(r,t,n,i,s,a,o);case 5.8:return new lq.default(r,t,n,i,s,a,o);default:throw(0,GH.newError)("Unknown Bolt protocol version: "+e)}}(function(e){var r=f&&f.__createBinding||(Object.create?function(c,u,l,d){d===void 0&&(d=l);var h=Object.getOwnPropertyDescriptor(u,l);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(c,d,h)}:function(c,u,l,d){d===void 0&&(d=l),c[d]=u[l]}),t=f&&f.__exportStar||function(c,u){for(var l in c)l!=="default"&&!Object.prototype.hasOwnProperty.call(u,l)&&r(u,c,l)},n=f&&f.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.RawRoutingTable=e.BoltProtocol=void 0;var o=n(D_),i=n(z_),a=n(Ls),s=n(Tf);t(oe,e),e.BoltProtocol=a.default,e.RawRoutingTable=s.default,e.default={handshake:o.default,create:i.default}})(M_);var $E={},gd={},pq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(gd,"__esModule",{value:!0});var vq=H,_q=function(e){pq(r,e);function r(t){var n=e.call(this)||this;return n._connection=t,n}return r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t;n.accessMode,n.database,n.bookmarks;var o=this._connection;return this._connection=null,Promise.resolve(o)},r}(vq.ConnectionProvider);gd.default=_q;var Vs={},wd={},Ws={},yq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ws,"__esModule",{value:!0});var bq=H,mq=function(e){yq(r,e);function r(t){var n=e.call(this)||this;return n._errorHandler=t,n}return Object.defineProperty(r.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"authToken",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(r.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.connect=function(t,n,o,i){throw new Error("not implemented")},r.prototype.write=function(t,n,o){throw new Error("not implemented")},r.prototype.close=function(){throw new Error("not implemented")},r.prototype.handleAndTransformError=function(t,n){return this._errorHandler?this._errorHandler.handleAndTransformError(t,n,this):t},r}(bq.Connection);Ws.default=mq;var zs={},gq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Mg=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Dg=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},jE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zs,"__esModule",{value:!0});zs.createChannelConnection=void 0;var pc=ro,Oo=H,wq=jE(Ws),Lg=jE(M_),Oq=Oo.error.PROTOCOL_ERROR,Eq=Oo.internal.logger.Logger,Sq=0;function Tq(e,r,t,n,o,i,a,s){i===void 0&&(i=null),s===void 0&&(s=function(l){return new pc.Channel(l)});var c=new pc.ChannelConfig(e,r,t.errorCode(),o),u=s(c);return Lg.default.handshake(u,n).then(function(l){var d=l.protocolVersion,h=l.consumeRemainingBuffer,p=new pc.Chunker(u),v=new pc.Dechunker,y=function(b){return Lg.default.create({version:d,channel:u,chunker:p,dechunker:v,disableLosslessIntegers:r.disableLosslessIntegers,useBigInt:r.useBigInt,serversideRouting:i,server:b.server,log:b.logger,observer:{onObserversCountChange:b._handleOngoingRequestsNumberChange.bind(b),onError:b._handleFatalError.bind(b),onFailure:b._resetOnFailure.bind(b),onProtocolError:b._handleProtocolError.bind(b),onErrorApplyTransformation:function(w){return b.handleAndTransformError(w,b._address)}}})},_=new NE(u,t,e,n,r.disableLosslessIntegers,i,p,r.notificationFilter,y,r.telemetryDisabled,a);return h(function(b){return v.write(b)}),_}).catch(function(l){return u.close().then(function(){throw l})})}zs.createChannelConnection=Tq;var NE=function(e){gq(r,e);function r(t,n,o,i,a,s,c,u,l,d,h){a===void 0&&(a=!1),s===void 0&&(s=null),h===void 0&&(h=function(v){});var p=e.call(this,n)||this;return p._authToken=null,p._idle=!1,p._reseting=!1,p._resetObservers=[],p._id=Sq++,p._address=o,p._server={address:o.asHostPort()},p._creationTimestamp=Date.now(),p._disableLosslessIntegers=a,p._ch=t,p._chunker=c,p._log=Pq(p,i),p._serversideRouting=s,p._notificationFilter=u,p._telemetryDisabledDriverConfig=d===!0,p._telemetryDisabledConnection=!0,p._ssrCallback=h,p._dbConnectionId=null,p._protocol=l(p),p._isBroken=!1,p._log.isDebugEnabled()&&p._log.debug("created towards ".concat(o)),p}return r.prototype.beginTransaction=function(t){return this._sendTelemetryIfEnabled(t),this._protocol.beginTransaction(t)},r.prototype.run=function(t,n,o){return this._sendTelemetryIfEnabled(o),this._protocol.run(t,n,o)},r.prototype._sendTelemetryIfEnabled=function(t){this._telemetryDisabledConnection||this._telemetryDisabledDriverConfig||t==null||t.apiTelemetryConfig==null||this._protocol.telemetry({api:t.apiTelemetryConfig.api},{onCompleted:t.apiTelemetryConfig.onTelemetrySuccess,onError:t.beforeError})},r.prototype.commitTransaction=function(t){return this._protocol.commitTransaction(t)},r.prototype.rollbackTransaction=function(t){return this._protocol.rollbackTransaction(t)},r.prototype.getProtocolVersion=function(){return this._protocol.version},Object.defineProperty(r.prototype,"authToken",{get:function(){return this._authToken},set:function(t){this._authToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return this._protocol.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(t){this._dbConnectionId=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){return this._idleTimestamp},set:function(t){this._idleTimestamp=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){return this._creationTimestamp},enumerable:!1,configurable:!0}),r.prototype.connect=function(t,n,o,i){return Mg(this,void 0,void 0,function(){var a=this;return Dg(this,function(s){switch(s.label){case 0:if(this._protocol.initialized&&!this._protocol.supportsReAuth)throw(0,Oo.newError)("Connection does not support re-auth");return this._authToken=o,this._protocol.initialized?[3,2]:[4,this._initialize(t,n,o)];case 1:return[2,s.sent()];case 2:return i?[4,new Promise(function(c,u){a._protocol.logoff({onError:u}),a._protocol.logon({authToken:o,onError:u,onComplete:function(){return c(a)},flush:!0})})]:[3,4];case 3:return[2,s.sent()];case 4:return this._protocol.logoff(),this._protocol.logon({authToken:o,flush:!0}),[2,this]}})})},r.prototype._initialize=function(t,n,o){var i=this,a=this;return new Promise(function(s,c){i._protocol.initialize({userAgent:t,boltAgent:n,authToken:o,notificationFilter:i._notificationFilter,onError:function(u){return c(u)},onComplete:function(u){var l;if(u){var d=u.server;(!i.version||d)&&(i.version=d);var h=u.connection_id;if(i.databaseId||(i.databaseId=h),u.hints){var p=u.hints["connection.recv_timeout_seconds"];if(p!=null){var v=(0,Oo.toNumber)(p);Number.isInteger(v)&&v>0?i._ch.setupReceiveTimeout(v*1e3):i._log.info("Server located at ".concat(i._address," supplied an invalid connection receive timeout value (").concat(v,"). ")+"Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}var y=u.hints["telemetry.enabled"];y===!0&&(i._telemetryDisabledConnection=!1),i.SSREnabledHint=u.hints["ssr.enabled"]}i._ssrCallback((l=i.SSREnabledHint)!==null&&l!==void 0?l:!1,"OPEN")}s(a)}})})},r.prototype.protocol=function(){return this._protocol},Object.defineProperty(r.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return this._server.version},set:function(t){this._server.version=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),r.prototype._handleFatalError=function(t){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||t,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by ".concat(this._error," (").concat(Oo.json.stringify(this._error),")")),this._protocol.notifyFatalError(this._error)},r.prototype._setIdle=function(t){this._idle=!0,this._ch.stopReceiveTimeout(),this._protocol.queueObserverIfProtocolIsNotBroken(t)},r.prototype._unsetIdle=function(){this._idle=!1,this._updateCurrentObserver()},r.prototype._queueObserver=function(t){return this._protocol.queueObserverIfProtocolIsNotBroken(t)},r.prototype.hasOngoingObservableRequests=function(){return!this._idle&&this._protocol.hasOngoingObservableRequests()},r.prototype.resetAndFlush=function(){var t=this;return new Promise(function(n,o){t._reset({onError:function(i){if(t._isBroken)o(i);else{var a=t._handleProtocolError("Received FAILURE as a response for RESET: ".concat(i));o(a)}},onComplete:function(){n()}})})},r.prototype._resetOnFailure=function(){var t=this;this.isOpen()&&this._reset({onError:function(){t._protocol.resetFailure()},onComplete:function(){t._protocol.resetFailure()}})},r.prototype._reset=function(t){var n=this;if(this._reseting){this._protocol.isLastMessageReset()?this._resetObservers.push(t):this._protocol.reset({onError:function(i){t.onError(i)},onComplete:function(){t.onComplete()}});return}this._resetObservers.push(t),this._reseting=!0;var o=function(i){n._reseting=!1;var a=n._resetObservers;n._resetObservers=[],a.forEach(i)};this._protocol.reset({onError:function(i){o(function(a){return a.onError(i)})},onComplete:function(){o(function(i){return i.onComplete()})}})},r.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},r.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},r.prototype._handleOngoingRequestsNumberChange=function(t){this._idle||(t===0?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout())},r.prototype.close=function(){var t;return Mg(this,void 0,void 0,function(){return Dg(this,function(n){switch(n.label){case 0:return this._ssrCallback((t=this.SSREnabledHint)!==null&&t!==void 0?t:!1,"CLOSE"),this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return n.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},r.prototype.toString=function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")},r.prototype._handleProtocolError=function(t){this._protocol.resetFailure(),this._updateCurrentObserver();var n=(0,Oo.newError)(t,Oq);return this._handleFatalError(n),n},r}(wq.default);zs.default=NE;function Pq(e,r){return new Eq(r._level,function(t,n){return r._loggerFunction(t,"".concat(e," ").concat(n))})}var ay={},Cq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Aq=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ay,"__esModule",{value:!0});var Iq=Aq(Ws),Rq=function(e){Cq(r,e);function r(t,n){var o=e.call(this,n)||this;return n&&(o._originalErrorHandler=t._errorHandler,t._errorHandler=o._errorHandler),o._delegate=t,o}return r.prototype.beginTransaction=function(t){return this._delegate.beginTransaction(t)},r.prototype.run=function(t,n,o){return this._delegate.run(t,n,o)},r.prototype.commitTransaction=function(t){return this._delegate.commitTransaction(t)},r.prototype.rollbackTransaction=function(t){return this._delegate.rollbackTransaction(t)},r.prototype.getProtocolVersion=function(){return this._delegate.getProtocolVersion()},Object.defineProperty(r.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(t){this._delegate.databaseId=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"authToken",{get:function(){return this._delegate.authToken},set:function(t){this._delegate.authToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return this._delegate.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return this._delegate.version},set:function(t){this._delegate.version=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){return this._delegate.creationTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){return this._delegate.idleTimestamp},set:function(t){this._delegate.idleTimestamp=t},enumerable:!1,configurable:!0}),r.prototype.isOpen=function(){return this._delegate.isOpen()},r.prototype.protocol=function(){return this._delegate.protocol()},r.prototype.connect=function(t,n,o,i){return this._delegate.connect(t,n,o,i)},r.prototype.write=function(t,n,o){return this._delegate.write(t,n,o)},r.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},r.prototype.hasOngoingObservableRequests=function(){return this._delegate.hasOngoingObservableRequests()},r.prototype.close=function(){return this._delegate.close()},r.prototype.release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate.release()},r}(Iq.default);ay.default=Rq;var uy={};Object.defineProperty(uy,"__esModule",{value:!0});var kE=H,$q=kE.error.SERVICE_UNAVAILABLE,jq=kE.error.SESSION_EXPIRED,Nq=function(){function e(r,t,n,o){this._errorCode=r,this._handleUnavailability=t||Pp,this._handleWriteFailure=n||Pp,this._handleSecurityError=o||Pp}return e.create=function(r){var t=r.errorCode,n=r.handleUnavailability,o=r.handleWriteFailure,i=r.handleSecurityError;return new e(t,n,o,i)},e.prototype.errorCode=function(){return this._errorCode},e.prototype.handleAndTransformError=function(r,t,n){return kq(r)?this._handleSecurityError(r,t,n):Mq(r)?this._handleUnavailability(r,t,n):Dq(r)?this._handleWriteFailure(r,t,n):r},e}();uy.default=Nq;function kq(e){return e!=null&&e.code!=null&&e.code.startsWith("Neo.ClientError.Security.")}function Mq(e){return e?e.code===jq||e.code===$q||e.code==="Neo.TransientError.General.DatabaseUnavailable":!1}function Dq(e){return e?e.code==="Neo.ClientError.Cluster.NotALeader"||e.code==="Neo.ClientError.General.ForbiddenOnReadOnlyDatabase":!1}function Pp(e){return e}(function(e){var r=f&&f.__createBinding||(Object.create?function(u,l,d,h){h===void 0&&(h=d);var p=Object.getOwnPropertyDescriptor(l,d);(!p||("get"in p?!l.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return l[d]}}),Object.defineProperty(u,h,p)}:function(u,l,d,h){h===void 0&&(h=d),u[h]=l[d]}),t=f&&f.__setModuleDefault||(Object.create?function(u,l){Object.defineProperty(u,"default",{enumerable:!0,value:l})}:function(u,l){u.default=l}),n=f&&f.__importStar||function(u){if(u&&u.__esModule)return u;var l={};if(u!=null)for(var d in u)d!=="default"&&Object.prototype.hasOwnProperty.call(u,d)&&r(l,u,d);return t(l,u),l},o=f&&f.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=e.ConnectionErrorHandler=e.DelegateConnection=e.ChannelConnection=e.Connection=void 0;var i=o(Ws);e.Connection=i.default;var a=n(zs);e.ChannelConnection=a.default,Object.defineProperty(e,"createChannelConnection",{enumerable:!0,get:function(){return a.createChannelConnection}});var s=o(ay);e.DelegateConnection=s.default;var c=o(uy);e.ConnectionErrorHandler=c.default,e.default=i.default})(wd);var sy={},Lq=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Uq=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(sy,"__esModule",{value:!0});var Fq=H,Ug=Jt,Bq=function(){function e(r){var t=r.authTokenManager,n=r.userAgent,o=r.boltAgent;this._authTokenManager=t||(0,Fq.staticAuthTokenManager)({}),this._userAgent=n,this._boltAgent=o}return e.prototype.authenticate=function(r){var t=r.connection,n=r.auth,o=r.skipReAuth,i=r.waitReAuth,a=r.forceReAuth;return Lq(this,void 0,void 0,function(){var s,c;return Uq(this,function(u){switch(u.label){case 0:return n==null?[3,3]:(s=t.supportsReAuth===!0&&(!Ug.object.equals(t.authToken,n)&&o!==!0||a===!0),t.authToken==null||s?[4,t.connect(this._userAgent,this._boltAgent,n,i||!1)]:[3,2]);case 1:return[2,u.sent()];case 2:return[2,t];case 3:return[4,this._authTokenManager.getToken()];case 4:return c=u.sent(),Ug.object.equals(c,t.authToken)?[3,6]:[4,t.connect(this._userAgent,this._boltAgent,c,!1)];case 5:return[2,u.sent()];case 6:return[2,t]}})})},e.prototype.handleError=function(r){var t=r.connection,n=r.code;return t&&n.startsWith("Neo.ClientError.Security.")?this._authTokenManager.handleSecurityException(t.authToken,n):!1},e}();sy.default=Bq;var cy={},xq=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Vq=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(cy,"__esModule",{value:!0});var Wq=function(){function e(r){var t=r.connectionLivenessCheckTimeout;this._connectionLivenessCheckTimeout=t}return e.prototype.check=function(r){return xq(this,void 0,void 0,function(){var t;return Vq(this,function(n){switch(n.label){case 0:return this._isCheckDisabled||this._isNewlyCreatedConnection(r)?[2,!0]:(t=Date.now()-r.idleTimestamp,this._connectionLivenessCheckTimeout===0||t>this._connectionLivenessCheckTimeout?[4,r.resetAndFlush().then(function(){return!0})]:[3,2]);case 1:return[2,n.sent()];case 2:return[2,!0]}})})},Object.defineProperty(e.prototype,"_isCheckDisabled",{get:function(){return this._connectionLivenessCheckTimeout==null||this._connectionLivenessCheckTimeout<0},enumerable:!1,configurable:!0}),e.prototype._isNewlyCreatedConnection=function(r){return r.authToken==null},e}();cy.default=Wq;var ly={},zq=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Hq=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(ly,"__esModule",{value:!0});var qq=ro,Gq=function(){function e(r){var t=r.clientCertificateProvider,n=r.loader;this._clientCertificateProvider=t,this._loader=n||qq.ClientCertificatesLoader,this._clientCertificate=null}return e.prototype.getClientCertificate=function(){return zq(this,void 0,void 0,function(){var r,t,n=this;return Hq(this,function(o){switch(o.label){case 0:return r=this._clientCertificateProvider!=null,r?(t=this._clientCertificate==null,t?[3,2]:[4,this._clientCertificateProvider.hasUpdate()]):[3,3];case 1:t=o.sent(),o.label=2;case 2:r=t,o.label=3;case 3:return r&&(this._clientCertificate=Promise.resolve(this._clientCertificateProvider.getClientCertificate()).then(this._loader.load).then(function(i){return n._clientCertificate=i,n._clientCertificate}).catch(function(i){throw n._clientCertificate=null,i})),[2,this._clientCertificate]}})})},e}();ly.default=Gq;var Kq=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),gn=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},wn=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Yq=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Zq=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))},fy=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vs,"__esModule",{value:!0});var Fg=wd,Eo=H,Qq=fy(sy),Xq=Jt,Jq=fy(cy),eG=fy(ly),tG=Eo.error.SERVICE_UNAVAILABLE,rG=["Neo.ClientError.Security.CredentialsExpired","Neo.ClientError.Security.Forbidden","Neo.ClientError.Security.TokenExpired","Neo.ClientError.Security.Unauthorized"],ME=Eo.internal.pool,Bg=ME.Pool,nG=ME.PoolConfig,oG=function(e){Kq(r,e);function r(t,n){var o=t.id,i=t.config,a=t.log,s=t.userAgent,c=t.boltAgent,u=t.authTokenManager,l=t.newPool,d=l===void 0?function(){for(var p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];return new(Bg.bind.apply(Bg,Zq([void 0],Yq(p),!1)))}:l;n===void 0&&(n=null);var h=e.call(this)||this;return h._id=o,h._config=i,h._log=a,h._clientCertificateHolder=new eG.default({clientCertificateProvider:h._config.clientCertificate}),h._authenticationProvider=new Qq.default({authTokenManager:u,userAgent:s,boltAgent:c}),h._livenessCheckProvider=new Jq.default({connectionLivenessCheckTimeout:i.connectionLivenessCheckTimeout}),h._userAgent=s,h._boltAgent=c,h._createChannelConnection=n||function(p){return gn(h,void 0,void 0,function(){var v,y;return wn(this,function(_){switch(_.label){case 0:return v=Fg.createChannelConnection,y=[p,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,v.apply(void 0,y.concat([_.sent()]))]}})})},h._connectionPool=d({create:h._createConnection.bind(h),destroy:h._destroyConnection.bind(h),validateOnAcquire:h._validateConnectionOnAcquire.bind(h),validateOnRelease:h._validateConnectionOnRelease.bind(h),installIdleObserver:r._installIdleObserverOnConnection.bind(h),removeIdleObserver:r._removeIdleObserverOnConnection.bind(h),config:nG.fromDriverConfig(i),log:h._log}),h._openConnections={},h}return r.prototype._createConnectionErrorHandler=function(){return new Fg.ConnectionErrorHandler(tG)},r.prototype._getClientCertificate=function(){return gn(this,void 0,void 0,function(){return wn(this,function(t){return[2,this._config.clientCertificate.getClientCertificate()]})})},r.prototype._createConnection=function(t,n,o){var i=this,a=t.auth;return this._createChannelConnection(n).then(function(s){return s.release=function(){return s.idleTimestamp=Date.now(),o(n,s)},i._openConnections[s.id]=s,i._authenticationProvider.authenticate({connection:s,auth:a}).catch(function(c){throw i._destroyConnection(s),c})})},r.prototype._validateConnectionOnAcquire=function(t,n){var o=t.auth,i=t.skipReAuth;return gn(this,void 0,void 0,function(){var a,s;return wn(this,function(c){switch(c.label){case 0:if(!this._validateConnection(n))return[2,!1];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this._livenessCheckProvider.check(n)];case 2:return c.sent(),[3,4];case 3:return a=c.sent(),this._log.debug("The connection ".concat(n.id," is not alive because of an error ").concat(a.code," '").concat(a.message,"'")),[2,!1];case 4:return c.trys.push([4,6,,7]),[4,this._authenticationProvider.authenticate({connection:n,auth:o,skipReAuth:i})];case 5:return c.sent(),[2,!0];case 6:return s=c.sent(),this._log.debug("The connection ".concat(n.id," is not valid because of an error ").concat(s.code," '").concat(s.message,"'")),[2,!1];case 7:return[2]}})})},r.prototype._validateConnectionOnRelease=function(t){return t._sticky!==!0&&this._validateConnection(t)},r.prototype._validateConnection=function(t){if(!t.isOpen())return!1;var n=this._config.maxConnectionLifetime,o=Date.now()-t.creationTimestamp;return!(o>n)},r.prototype._destroyConnection=function(t){return delete this._openConnections[t.id],t.close()},r.prototype._verifyConnectivityAndGetServerVersion=function(t){var n=t.address;return gn(this,void 0,void 0,function(){var o,i;return wn(this,function(a){switch(a.label){case 0:return[4,this._connectionPool.acquire({},n)];case 1:o=a.sent(),i=new Eo.ServerInfo(o.server,o.protocol().version),a.label=2;case 2:return a.trys.push([2,,5,7]),o.protocol().isLastMessageLogon()?[3,4]:[4,o.resetAndFlush()];case 3:a.sent(),a.label=4;case 4:return[3,7];case 5:return[4,o.release()];case 6:return a.sent(),[7];case 7:return[2,i]}})})},r.prototype._verifyAuthentication=function(t){var n=t.getAddress,o=t.auth;return gn(this,void 0,void 0,function(){var i,a,s,c,u,l;return wn(this,function(d){switch(d.label){case 0:i=[],d.label=1;case 1:return d.trys.push([1,8,9,11]),[4,n()];case 2:return a=d.sent(),[4,this._connectionPool.acquire({auth:o,skipReAuth:!0},a)];case 3:if(s=d.sent(),i.push(s),c=!s.protocol().isLastMessageLogon(),!s.supportsReAuth)throw(0,Eo.newError)("Driver is connected to a database that does not support user switch.");return c&&s.supportsReAuth?[4,this._authenticationProvider.authenticate({connection:s,auth:o,waitReAuth:!0,forceReAuth:!0})]:[3,5];case 4:return d.sent(),[3,7];case 5:return c&&!s.supportsReAuth?[4,this._connectionPool.acquire({auth:o},a,{requireNew:!0})]:[3,7];case 6:u=d.sent(),u._sticky=!0,i.push(u),d.label=7;case 7:return[2,!0];case 8:if(l=d.sent(),rG.includes(l.code))return[2,!1];throw l;case 9:return[4,Promise.all(i.map(function(h){return h.release()}))];case 10:return d.sent(),[7];case 11:return[2]}})})},r.prototype._verifyStickyConnection=function(t){var n=t.auth,o=t.connection;return t.address,gn(this,void 0,void 0,function(){var i,a;return wn(this,function(s){switch(s.label){case 0:return i=Xq.object.equals(n,o.authToken),a=!i,o._sticky=i&&!o.supportsReAuth,a||o._sticky?[4,o.release()]:[3,2];case 1:throw s.sent(),(0,Eo.newError)("Driver is connected to a database that does not support user switch.");case 2:return[2]}})})},r.prototype.close=function(){return gn(this,void 0,void 0,function(){return wn(this,function(t){switch(t.label){case 0:return[4,this._connectionPool.close()];case 1:return t.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(n){return n.close()}))];case 2:return t.sent(),[2]}})})},r._installIdleObserverOnConnection=function(t,n){t._setIdle(n)},r._removeIdleObserverOnConnection=function(t){t._unsetIdle()},r.prototype._handleSecurityError=function(t,n,o){var i=this._authenticationProvider.handleError({connection:o,code:t.code});return i&&(t.retriable=!0),t.code==="Neo.ClientError.Security.AuthorizationExpired"&&this._connectionPool.apply(n,function(a){a.authToken=null}),o&&o.close().catch(function(){}),t},r}(Eo.ConnectionProvider);Vs.default=oG;var dy={},iG=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ar=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Ir=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},aG=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dy,"__esModule",{value:!0});var uG=aG(Vs),xg=wd,DE=H,Od=DE.internal.constants,sG=Od.BOLT_PROTOCOL_V3,cG=Od.BOLT_PROTOCOL_V4_0,lG=Od.BOLT_PROTOCOL_V4_4,fG=Od.BOLT_PROTOCOL_V5_1,dG=DE.error.SERVICE_UNAVAILABLE,hG=function(e){iG(r,e);function r(t){var n=t.id,o=t.config,i=t.log,a=t.address,s=t.userAgent,c=t.boltAgent,u=t.authTokenManager,l=t.newPool,d=e.call(this,{id:n,config:o,log:i,userAgent:s,boltAgent:c,authTokenManager:u,newPool:l})||this;return d._address=a,d}return r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t;n.accessMode;var o=n.database;n.bookmarks;var i=n.auth,a=n.forceReAuth;return Ar(this,void 0,void 0,function(){var s,c,u=this;return Ir(this,function(l){switch(l.label){case 0:return s=xg.ConnectionErrorHandler.create({errorCode:dG,handleSecurityError:function(d,h,p){return u._handleSecurityError(d,h,p,o)}}),[4,this._connectionPool.acquire({auth:i,forceReAuth:a},this._address)];case 1:return c=l.sent(),i?[4,this._verifyStickyConnection({auth:i,connection:c,address:this._address})]:[3,3];case 2:return l.sent(),[2,c];case 3:return[2,new xg.DelegateConnection(c,s)]}})})},r.prototype._handleSecurityError=function(t,n,o,i){return this._log.warn("Direct driver ".concat(this._id," will close connection to ").concat(n," for database '").concat(i,"' because of an error ").concat(t.code," '").concat(t.message,"'")),e.prototype._handleSecurityError.call(this,t,n,o)},r.prototype._hasProtocolVersion=function(t){return Ar(this,void 0,void 0,function(){var n,o;return Ir(this,function(i){switch(i.label){case 0:return[4,this._createChannelConnection(this._address)];case 1:return n=i.sent(),o=n.protocol()?n.protocol().version:null,[4,n.close()];case 2:return i.sent(),o?[2,t(o)]:[2,!1]}})})},r.prototype.supportsMultiDb=function(){return Ar(this,void 0,void 0,function(){return Ir(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=cG})];case 1:return[2,t.sent()]}})})},r.prototype.getNegotiatedProtocolVersion=function(){var t=this;return new Promise(function(n,o){t._hasProtocolVersion(n).catch(o)})},r.prototype.supportsTransactionConfig=function(){return Ar(this,void 0,void 0,function(){return Ir(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=sG})];case 1:return[2,t.sent()]}})})},r.prototype.supportsUserImpersonation=function(){return Ar(this,void 0,void 0,function(){return Ir(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=lG})];case 1:return[2,t.sent()]}})})},r.prototype.supportsSessionAuth=function(){return Ar(this,void 0,void 0,function(){return Ir(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=fG})];case 1:return[2,t.sent()]}})})},r.prototype.verifyAuthentication=function(t){var n=t.auth;return Ar(this,void 0,void 0,function(){var o=this;return Ir(this,function(i){return[2,this._verifyAuthentication({auth:n,getAddress:function(){return o._address}})]})})},r.prototype.verifyConnectivityAndGetServerInfo=function(){return Ar(this,void 0,void 0,function(){return Ir(this,function(t){switch(t.label){case 0:return[4,this._verifyConnectivityAndGetServerVersion({address:this._address})];case 1:return[2,t.sent()]}})})},r}(uG.default);dy.default=hG;var hy={},Wn={},py={},Ci={},Cp=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Ap=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,o=r.length,i;n<o;n++)(i||!(n in r))&&(i||(i=Array.prototype.slice.call(r,0,n)),i[n]=r[n]);return e.concat(i||Array.prototype.slice.call(r))};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.createValidRoutingTable=void 0;var St=H,LE=St.internal.constants,pG=LE.ACCESS_MODE_WRITE,vG=LE.ACCESS_MODE_READ,Ip=St.internal.serverAddress.ServerAddress,vy=St.error.PROTOCOL_ERROR,_G=1,UE=function(){function e(r){var t=r===void 0?{}:r,n=t.database,o=t.routers,i=t.readers,a=t.writers,s=t.expirationTime,c=t.ttl;this.database=n||null,this.databaseName=n||"default database",this.routers=o||[],this.readers=i||[],this.writers=a||[],this.expirationTime=s||(0,St.int)(0),this.ttl=c}return e.fromRawRoutingTable=function(r,t,n){return FE(r,t,n)},e.prototype.forget=function(r){this.readers=vc(this.readers,r),this.writers=vc(this.writers,r)},e.prototype.forgetRouter=function(r){this.routers=vc(this.routers,r)},e.prototype.forgetWriter=function(r){this.writers=vc(this.writers,r)},e.prototype.isStaleFor=function(r){return this.expirationTime.lessThan(Date.now())||this.routers.length<_G||r===vG&&this.readers.length===0||r===pG&&this.writers.length===0},e.prototype.isExpiredFor=function(r){return this.expirationTime.add(r).lessThan(Date.now())},e.prototype.allServers=function(){return Ap(Ap(Ap([],Cp(this.routers),!1),Cp(this.readers),!1),Cp(this.writers),!1)},e.prototype.toString=function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")},e}();Ci.default=UE;function vc(e,r){return e.filter(function(t){return t.asKey()!==r.asKey()})}function FE(e,r,t){var n=t.ttl,o=bG(t,r),i=yG(t,r),a=i.routers,s=i.readers,c=i.writers;return Vg(a,"routers",r),Vg(s,"readers",r),new UE({database:e||t.db,routers:a,readers:s,writers:c,expirationTime:o,ttl:n})}Ci.createValidRoutingTable=FE;function yG(e,r){try{var t=[],n=[],o=[];return e.servers.forEach(function(i){var a=i.role,s=i.addresses;a==="ROUTE"?t=Rp(s).map(function(c){return Ip.fromUrl(c)}):a==="WRITE"?o=Rp(s).map(function(c){return Ip.fromUrl(c)}):a==="READ"&&(n=Rp(s).map(function(c){return Ip.fromUrl(c)}))}),{routers:t,readers:n,writers:o}}catch(i){throw(0,St.newError)("Unable to parse servers entry from router ".concat(r,` from addresses:
`).concat(St.json.stringify(e.servers),`
Error message: `).concat(i.message),vy)}}function bG(e,r){try{var t=(0,St.int)(Date.now()),n=(0,St.int)(e.ttl).multiply(1e3).add(t);return n.lessThan(t)?St.Integer.MAX_VALUE:n}catch(o){throw(0,St.newError)("Unable to parse TTL entry from router ".concat(r,` from raw routing table:
`).concat(St.json.stringify(e),`
Error message: `).concat(o.message),vy)}}function Vg(e,r,t){if(e.length===0)throw(0,St.newError)("Received no "+r+" from router "+t,vy)}function Rp(e){if(!Array.isArray(e))throw new TypeError("Array expected but got: "+e);return Array.from(e)}var mG=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(py,"__esModule",{value:!0});var gG=mG(Ci),wG=function(){function e(r){this._routingContext=r}return e.prototype.lookupRoutingTableOnRouter=function(r,t,n,o){var i=this;return r._acquireConnection(function(a){return i._requestRawRoutingTable(a,r,t,n,o).then(function(s){return s.isNull?null:gG.default.fromRawRoutingTable(t,n,s)})})},e.prototype._requestRawRoutingTable=function(r,t,n,o,i){var a=this;return new Promise(function(s,c){r.protocol().requestRoutingInformation({routingContext:a._routingContext,databaseName:n,impersonatedUser:i,sessionContext:{bookmarks:t._lastBookmarks,mode:t._mode,database:t._database,afterComplete:t._onComplete},onCompleted:s,onError:c})})},e}();py.default=wG;var BE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.RoutingTable=Wn.Rediscovery=void 0;var xE=BE(py);Wn.Rediscovery=xE.default;var OG=BE(Ci);Wn.RoutingTable=OG.default;Wn.default=xE.default;var EG=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xc=f&&f.__assign||function(){return Xc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Xc.apply(this,arguments)},SG=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),TG=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),PG=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&SG(r,e,t);return TG(r,e),r},Te=f&&f.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(d){a(d)}}function c(l){try{u(n.throw(l))}catch(d){a(d)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(e,r||[])).next())})},Pe=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Mv=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},sr=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},VE=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hy,"__esModule",{value:!0});var Ze=H,$p=PG(Wn),CG=ro,AG=VE(gd),IG=VE(Vs),RG=Vr,On=wd,$G=Jt,_c=Ze.error.SERVICE_UNAVAILABLE,Gi=Ze.error.SESSION_EXPIRED,jG=Ze.internal.bookmarks.Bookmarks,Ai=Ze.internal.constants,Wg=Ai.ACCESS_MODE_READ,yc=Ai.ACCESS_MODE_WRITE,NG=Ai.BOLT_PROTOCOL_V3,kG=Ai.BOLT_PROTOCOL_V4_0,MG=Ai.BOLT_PROTOCOL_V4_4,DG=Ai.BOLT_PROTOCOL_V5_1,LG="Neo.ClientError.Procedure.ProcedureNotFound",UG="Neo.ClientError.Database.DatabaseNotFound",FG="Neo.ClientError.Transaction.InvalidBookmark",BG="Neo.ClientError.Transaction.InvalidBookmarkMixture",xG="Neo.ClientError.Security.AuthorizationExpired",VG="Neo.ClientError.Statement.ArgumentError",WG="Neo.ClientError.Request.Invalid",zG="Neo.ClientError.Statement.TypeError",HG="N/A",qG="system",Ki=null,GG=(0,Ze.int)(3e4),KG=function(e){EG(r,e);function r(t){var n=t.id,o=t.address,i=t.routingContext,a=t.hostNameResolver,s=t.config,c=t.log,u=t.userAgent,l=t.boltAgent,d=t.authTokenManager,h=t.routingTablePurgeDelay,p=t.newPool,v=e.call(this,{id:n,config:s,log:c,userAgent:u,boltAgent:l,authTokenManager:d,newPool:p},function(y){return Te(v,void 0,void 0,function(){var _,b;return Pe(this,function(w){switch(w.label){case 0:return _=On.createChannelConnection,b=[y,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,_.apply(void 0,b.concat([w.sent(),this._routingContext,this._channelSsrCallback.bind(this)]))]}})})})||this;return v._routingContext=Xc(Xc({},i),{address:o.toString()}),v._seedRouter=o,v._rediscovery=new $p.default(v._routingContext),v._loadBalancingStrategy=new RG.LeastConnectedLoadBalancingStrategy(v._connectionPool),v._hostNameResolver=a,v._dnsResolver=new CG.HostNameResolver,v._log=c,v._useSeedRouter=!0,v._routingTableRegistry=new YG(h?(0,Ze.int)(h):GG),v._refreshRoutingTable=$G.functional.reuseOngoingRequest(v._refreshRoutingTable,v),v._withSSR=0,v._withoutSSR=0,v}return r.prototype._createConnectionErrorHandler=function(){return new On.ConnectionErrorHandler(Gi)},r.prototype._handleUnavailability=function(t,n,o){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(n," for database '").concat(o,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forget(n,o||Ki),t},r.prototype._handleSecurityError=function(t,n,o,i){return this._log.warn("Routing driver ".concat(this._id," will close connections to ").concat(n," for database '").concat(i,"' because of an error ").concat(t.code," '").concat(t.message,"'")),e.prototype._handleSecurityError.call(this,t,n,o,i)},r.prototype._handleWriteFailure=function(t,n,o){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(n," for database '").concat(o,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forgetWriter(n,o||Ki),(0,Ze.newError)("No longer possible to write to server at "+n,Gi,t)},r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t,o=n.accessMode,i=n.database,a=n.bookmarks,s=n.impersonatedUser,c=n.onDatabaseNameResolved,u=n.auth,l=n.homeDb;return Te(this,void 0,void 0,function(){var d,h,p,v,y,_=this;return Pe(this,function(b){switch(b.label){case 0:return d={database:i||Ki},h=new On.ConnectionErrorHandler(Gi,function(w,S){return _._handleUnavailability(w,S,d.database)},function(w,S){return _._handleWriteFailure(w,S,l??d.database)},function(w,S,E){return _._handleSecurityError(w,S,E,d.database)}),this.SSREnabled()&&l!==void 0&&i===""?(v=this._routingTableRegistry.get(l,function(){return new $p.RoutingTable({database:l})}),v&&!v.isStaleFor(o)?[4,this.getConnectionFromRoutingTable(v,u,o,h)]:[3,2]):[3,2];case 1:if(p=b.sent(),this.SSREnabled())return[2,p];p.release(),b.label=2;case 2:return[4,this._freshRoutingTable({accessMode:o,database:d.database,bookmarks:a,impersonatedUser:s,auth:u,onDatabaseNameResolved:function(w){d.database=d.database||w,c&&c(w)}})];case 3:return y=b.sent(),[2,this.getConnectionFromRoutingTable(y,u,o,h)]}})})},r.prototype.getConnectionFromRoutingTable=function(t,n,o,i){return Te(this,void 0,void 0,function(){var a,s,c,u,l;return Pe(this,function(d){switch(d.label){case 0:if(o===Wg)s=this._loadBalancingStrategy.selectReader(t.readers),a="read";else if(o===yc)s=this._loadBalancingStrategy.selectWriter(t.writers),a="write";else throw(0,Ze.newError)("Illegal mode "+o);if(!s)throw(0,Ze.newError)("Failed to obtain connection towards ".concat(a," server. Known routing table is: ").concat(t),Gi);d.label=1;case 1:return d.trys.push([1,5,,6]),[4,this._connectionPool.acquire({auth:n},s)];case 2:return c=d.sent(),n?[4,this._verifyStickyConnection({auth:n,connection:c,address:s})]:[3,4];case 3:return d.sent(),[2,c];case 4:return[2,new On.DelegateConnection(c,i)];case 5:throw u=d.sent(),l=i.handleAndTransformError(u,s),l;case 6:return[2]}})})},r.prototype._hasProtocolVersion=function(t){return Te(this,void 0,void 0,function(){var n,o,i,a,s,c;return Pe(this,function(u){switch(u.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:n=u.sent(),i=0,u.label=2;case 2:if(!(i<n.length))return[3,8];u.label=3;case 3:return u.trys.push([3,6,,7]),[4,this._createChannelConnection(n[i])];case 4:return a=u.sent(),s=a.protocol()?a.protocol().version:null,[4,a.close()];case 5:return u.sent(),s?[2,t(s)]:[2,!1];case 6:return c=u.sent(),o=c,[3,7];case 7:return i++,[3,2];case 8:if(o)throw o;return[2,!1]}})})},r.prototype.supportsMultiDb=function(){return Te(this,void 0,void 0,function(){return Pe(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=kG})];case 1:return[2,t.sent()]}})})},r.prototype.supportsTransactionConfig=function(){return Te(this,void 0,void 0,function(){return Pe(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=NG})];case 1:return[2,t.sent()]}})})},r.prototype.supportsUserImpersonation=function(){return Te(this,void 0,void 0,function(){return Pe(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=MG})];case 1:return[2,t.sent()]}})})},r.prototype.supportsSessionAuth=function(){return Te(this,void 0,void 0,function(){return Pe(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=DG})];case 1:return[2,t.sent()]}})})},r.prototype.getNegotiatedProtocolVersion=function(){var t=this;return new Promise(function(n,o){t._hasProtocolVersion(n).catch(o)})},r.prototype.verifyAuthentication=function(t){var n=t.database,o=t.accessMode,i=t.auth;return Te(this,void 0,void 0,function(){var a=this;return Pe(this,function(s){return[2,this._verifyAuthentication({auth:i,getAddress:function(){return Te(a,void 0,void 0,function(){var c,u,l;return Pe(this,function(d){switch(d.label){case 0:return c={database:n||Ki},[4,this._freshRoutingTable({accessMode:o,database:c.database,auth:i,onDatabaseNameResolved:function(h){c.database=c.database||h}})];case 1:if(u=d.sent(),l=o===yc?u.writers:u.readers,l.length===0)throw(0,Ze.newError)("No servers available for database '".concat(c.database,"' with access mode '").concat(o,"'"),_c);return[2,l[0]]}})})}})]})})},r.prototype.verifyConnectivityAndGetServerInfo=function(t){var n=t.database,o=t.accessMode;return Te(this,void 0,void 0,function(){var i,a,s,c,u,l,d,h,p,v,y,_;return Pe(this,function(b){switch(b.label){case 0:return i={database:n||Ki},[4,this._freshRoutingTable({accessMode:o,database:i.database,onDatabaseNameResolved:function(w){i.database=i.database||w}})];case 1:a=b.sent(),s=o===yc?a.writers:a.readers,c=(0,Ze.newError)("No servers available for database '".concat(i.database,"' with access mode '").concat(o,"'"),_c),b.label=2;case 2:b.trys.push([2,9,10,11]),u=Mv(s),l=u.next(),b.label=3;case 3:if(l.done)return[3,8];d=l.value,b.label=4;case 4:return b.trys.push([4,6,,7]),[4,this._verifyConnectivityAndGetServerVersion({address:d})];case 5:return h=b.sent(),[2,h];case 6:return p=b.sent(),c=p,[3,7];case 7:return l=u.next(),[3,3];case 8:return[3,11];case 9:return v=b.sent(),y={error:v},[3,11];case 10:try{l&&!l.done&&(_=u.return)&&_.call(u)}finally{if(y)throw y.error}return[7];case 11:throw c}})})},r.prototype.forget=function(t,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(o){return o.forget(t)}}),this._connectionPool.purge(t).catch(function(){})},r.prototype.forgetWriter=function(t,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(o){return o.forgetWriter(t)}})},r.prototype._freshRoutingTable=function(t){var n=t===void 0?{}:t,o=n.accessMode,i=n.database,a=n.bookmarks,s=n.impersonatedUser,c=n.onDatabaseNameResolved,u=n.auth,l=this._routingTableRegistry.get(i,function(){return new $p.RoutingTable({database:i})});return l.isStaleFor(o)?(this._log.info('Routing table is stale for database: "'.concat(i,'" and access mode: "').concat(o,'": ').concat(l)),this._refreshRoutingTable(l,a,s,u).then(function(d){return c(d.database),d})):l},r.prototype._refreshRoutingTable=function(t,n,o,i){var a=t.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(a,t,n,o,i):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(a,t,n,o,i)},r.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(t,n,o,i,a){return Te(this,void 0,void 0,function(){var s,c,u,l,d,h,p;return Pe(this,function(v){switch(v.label){case 0:return s=[],[4,this._fetchRoutingTableUsingSeedRouter(s,this._seedRouter,n,o,i,a)];case 1:return c=sr.apply(void 0,[v.sent(),2]),u=c[0],l=c[1],u?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(t,n,o,i,a)];case 3:d=sr.apply(void 0,[v.sent(),2]),h=d[0],p=d[1],u=h,l=p||l,v.label=4;case 4:return[4,this._applyRoutingTableIfPossible(n,u,l)];case 5:return[2,v.sent()]}})})},r.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(t,n,o,i,a){return Te(this,void 0,void 0,function(){var s,c,u,l;return Pe(this,function(d){switch(d.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(t,n,o,i,a)];case 1:return s=sr.apply(void 0,[d.sent(),2]),c=s[0],u=s[1],c?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(t,this._seedRouter,n,o,i,a)];case 2:l=sr.apply(void 0,[d.sent(),2]),c=l[0],u=l[1],d.label=3;case 3:return[4,this._applyRoutingTableIfPossible(n,c,u)];case 4:return[2,d.sent()]}})})},r.prototype._fetchRoutingTableUsingKnownRouters=function(t,n,o,i,a){return Te(this,void 0,void 0,function(){var s,c,u,l;return Pe(this,function(d){switch(d.label){case 0:return[4,this._fetchRoutingTable(t,n,o,i,a)];case 1:return s=sr.apply(void 0,[d.sent(),2]),c=s[0],u=s[1],c?[2,[c,null]]:(l=t.length-1,r._forgetRouter(n,t,l),[2,[null,u]])}})})},r.prototype._fetchRoutingTableUsingSeedRouter=function(t,n,o,i,a,s){return Te(this,void 0,void 0,function(){var c,u;return Pe(this,function(l){switch(l.label){case 0:return[4,this._resolveSeedRouter(n)];case 1:return c=l.sent(),u=c.filter(function(d){return t.indexOf(d)<0}),[4,this._fetchRoutingTable(u,o,i,a,s)];case 2:return[2,l.sent()]}})})},r.prototype._resolveSeedRouter=function(t){return Te(this,void 0,void 0,function(){var n,o,i=this;return Pe(this,function(a){switch(a.label){case 0:return[4,this._hostNameResolver.resolve(t)];case 1:return n=a.sent(),[4,Promise.all(n.map(function(s){return i._dnsResolver.resolve(s)}))];case 2:return o=a.sent(),[2,[].concat.apply([],o)]}})})},r.prototype._fetchRoutingTable=function(t,n,o,i,a){return Te(this,void 0,void 0,function(){var s=this;return Pe(this,function(c){return[2,t.reduce(function(u,l,d){return Te(s,void 0,void 0,function(){var h,p,v,y,_,b,w;return Pe(this,function(S){switch(S.label){case 0:return[4,u];case 1:return h=sr.apply(void 0,[S.sent(),1]),p=h[0],p?[2,[p,null]]:(v=d-1,r._forgetRouter(n,t,v),[4,this._createSessionForRediscovery(l,o,i,a)]);case 2:if(y=sr.apply(void 0,[S.sent(),2]),_=y[0],b=y[1],!_)return[3,8];S.label=3;case 3:return S.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(_,n.database,l,i)];case 4:return[2,[S.sent(),null]];case 5:return w=S.sent(),[2,this._handleRediscoveryError(w,l)];case 6:return _.close(),[7];case 7:return[3,9];case 8:return[2,[null,b]];case 9:return[2]}})})},Promise.resolve([null,null]))]})})},r.prototype._createSessionForRediscovery=function(t,n,o,i){return Te(this,void 0,void 0,function(){var a,s,c,u,l,d,h=this;return Pe(this,function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),[4,this._connectionPool.acquire({auth:i},t)];case 1:return a=p.sent(),i?[4,this._verifyStickyConnection({auth:i,connection:a,address:t})]:[3,3];case 2:p.sent(),p.label=3;case 3:return s=On.ConnectionErrorHandler.create({errorCode:Gi,handleSecurityError:function(v,y,_){return h._handleSecurityError(v,y,_)}}),c=a._sticky?new On.DelegateConnection(a):new On.DelegateConnection(a,s),u=new AG.default(c),l=a.protocol().version,l<4?[2,[new Ze.Session({mode:yc,bookmarks:jG.empty(),connectionProvider:u}),null]]:[2,[new Ze.Session({mode:Wg,database:qG,bookmarks:n,connectionProvider:u,impersonatedUser:o}),null]];case 4:return d=p.sent(),[2,this._handleRediscoveryError(d,t)];case 5:return[2]}})})},r.prototype._handleRediscoveryError=function(t,n){if(ZG(t)||QG(t))throw t;if(t.code===LG)throw(0,Ze.newError)("Server at ".concat(n.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),_c,t);return this._log.warn("unable to fetch routing table because of an error ".concat(t)),[null,t]},r.prototype._applyRoutingTableIfPossible=function(t,n,o){return Te(this,void 0,void 0,function(){return Pe(this,function(i){switch(i.label){case 0:if(!n)throw(0,Ze.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(t),_c,o);return n.writers.length===0&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(n)];case 1:return i.sent(),[2,n]}})})},r.prototype._updateRoutingTable=function(t){return Te(this,void 0,void 0,function(){return Pe(this,function(n){switch(n.label){case 0:return[4,this._connectionPool.keepAll(t.allServers())];case 1:return n.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(t),this._log.info("Updated routing table ".concat(t)),[2]}})})},r._forgetRouter=function(t,n,o){var i=n[o];t&&i&&t.forgetRouter(i)},r.prototype._channelSsrCallback=function(t,n){if(n==="OPEN")t===!0?this._withSSR=this._withSSR+1:this._withoutSSR=this._withoutSSR+1;else if(n==="CLOSE")t===!0?this._withSSR=this._withSSR-1:this._withoutSSR=this._withoutSSR-1;else throw(0,Ze.newError)("Channel SSR Callback invoked with action other than 'OPEN' or 'CLOSE'")},r.prototype.SSREnabled=function(){return this._withSSR>0&&this._withoutSSR===0},r}(IG.default);hy.default=KG;var YG=function(){function e(r){this._tables=new Map,this._routingTablePurgeDelay=r}return e.prototype.register=function(r){return this._tables.set(r.database,r),this},e.prototype.apply=function(r,t){var n=t===void 0?{}:t,o=n.applyWhenExists,i=n.applyWhenDontExists,a=i===void 0?function(){}:i;return this._tables.has(r)?o(this._tables.get(r)):typeof r=="string"||r===null?a():this._forEach(o),this},e.prototype.get=function(r,t){return this._tables.has(r)?this._tables.get(r):typeof t=="function"?t():t},e.prototype.removeExpired=function(){var r=this;return this._removeIf(function(t){return t.isExpiredFor(r._routingTablePurgeDelay)})},e.prototype._forEach=function(r){var t,n;try{for(var o=Mv(this._tables),i=o.next();!i.done;i=o.next()){var a=sr(i.value,2),s=a[1];r(s)}}catch(c){t={error:c}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return this},e.prototype._remove=function(r){return this._tables.delete(r),this},e.prototype._removeIf=function(r){var t,n;try{for(var o=Mv(this._tables),i=o.next();!i.done;i=o.next()){var a=sr(i.value,2),s=a[0],c=a[1];r(c)&&this._remove(s)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return this},e}();function ZG(e){return[UG,FG,BG,VG,WG,zG,HG].includes(e.code)}function QG(e){return e.code.startsWith("Neo.ClientError.Security.")&&![xG].includes(e.code)}(function(e){var r=f&&f.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingConnectionProvider=e.DirectConnectionProvider=e.PooledConnectionProvider=e.SingleConnectionProvider=void 0;var t=gd;Object.defineProperty(e,"SingleConnectionProvider",{enumerable:!0,get:function(){return r(t).default}});var n=Vs;Object.defineProperty(e,"PooledConnectionProvider",{enumerable:!0,get:function(){return r(n).default}});var o=dy;Object.defineProperty(e,"DirectConnectionProvider",{enumerable:!0,get:function(){return r(o).default}});var i=hy;Object.defineProperty(e,"RoutingConnectionProvider",{enumerable:!0,get:function(){return r(i).default}})})($E);(function(e){var r=f&&f.__createBinding||(Object.create?function(i,a,s,c){c===void 0&&(c=s);var u=Object.getOwnPropertyDescriptor(a,s);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(i,c,u)}:function(i,a,s,c){c===void 0&&(c=s),i[c]=a[s]}),t=f&&f.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),n=f&&f.__importStar||function(i){if(i&&i.__esModule)return i;var a={};if(i!=null)for(var s in i)s!=="default"&&Object.prototype.hasOwnProperty.call(i,s)&&r(a,i,s);return t(a,i),a},o=f&&f.__exportStar||function(i,a){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&r(a,i,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.packstream=e.channel=e.buf=e.bolt=e.loadBalancing=void 0,e.loadBalancing=n(Vr),e.bolt=n(M_),e.buf=n(no),e.channel=n(ro),e.packstream=n(rt),o($E,e)})(o1);(function(e){var r=f&&f.__awaiter||function(V,ie,W,te){function K(L){return L instanceof W?L:new W(function(re){re(L)})}return new(W||(W=Promise))(function(L,re){function pe($e){try{X(te.next($e))}catch(ve){re(ve)}}function Ae($e){try{X(te.throw($e))}catch(ve){re(ve)}}function X($e){$e.done?L($e.value):K($e.value).then(pe,Ae)}X((te=te.apply(V,ie||[])).next())})},t=f&&f.__generator||function(V,ie){var W={label:0,sent:function(){if(L[0]&1)throw L[1];return L[1]},trys:[],ops:[]},te,K,L,re;return re={next:pe(0),throw:pe(1),return:pe(2)},typeof Symbol=="function"&&(re[Symbol.iterator]=function(){return this}),re;function pe(X){return function($e){return Ae([X,$e])}}function Ae(X){if(te)throw new TypeError("Generator is already executing.");for(;re&&(re=0,X[0]&&(W=0)),W;)try{if(te=1,K&&(L=X[0]&2?K.return:X[0]?K.throw||((L=K.return)&&L.call(K),0):K.next)&&!(L=L.call(K,X[1])).done)return L;switch(K=0,L&&(X=[X[0]&2,L.value]),X[0]){case 0:case 1:L=X;break;case 4:return W.label++,{value:X[1],done:!1};case 5:W.label++,K=X[1],X=[0];continue;case 7:X=W.ops.pop(),W.trys.pop();continue;default:if(L=W.trys,!(L=L.length>0&&L[L.length-1])&&(X[0]===6||X[0]===2)){W=0;continue}if(X[0]===3&&(!L||X[1]>L[0]&&X[1]<L[3])){W.label=X[1];break}if(X[0]===6&&W.label<L[1]){W.label=L[1],L=X;break}if(L&&W.label<L[2]){W.label=L[2],W.ops.push(X);break}L[2]&&W.ops.pop(),W.trys.pop();continue}X=ie.call(V,W)}catch($e){X=[6,$e],K=0}finally{te=L=0}if(X[0]&5)throw X[1];return{value:X[0]?X[1]:void 0,done:!0}}},n=f&&f.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};Object.defineProperty(e,"__esModule",{value:!0}),e.UnboundRelationship=e.Relationship=e.Node=e.Record=e.ServerInfo=e.GqlStatusObject=e.Notification=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ResultSummary=e.RxResult=e.RxManagedTransaction=e.RxTransaction=e.RxSession=e.EagerResult=e.Result=e.ManagedTransaction=e.Transaction=e.Session=e.Driver=e.temporal=e.spatial=e.graph=e.error=e.routing=e.session=e.types=e.logging=e.auth=e.isRetryableError=e.Neo4jError=e.integer=e.isUnboundRelationship=e.isRelationship=e.isPathSegment=e.isPath=e.isNode=e.isDateTime=e.isLocalDateTime=e.isDate=e.isTime=e.isLocalTime=e.isDuration=e.isPoint=e.isInt=e.int=e.hasReachableServer=e.driver=e.authTokenManagers=void 0,e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.bookmarkManager=e.DateTime=e.LocalDateTime=e.Date=e.Time=e.LocalTime=e.Duration=e.Integer=e.Point=e.PathSegment=e.Path=void 0;var o=dr;Object.defineProperty(e,"Driver",{enumerable:!0,get:function(){return o.Driver}});var i=n(j_),a=H;Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return a.authTokenManagers}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return a.Neo4jError}}),Object.defineProperty(e,"isRetryableError",{enumerable:!0,get:function(){return a.isRetryableError}}),Object.defineProperty(e,"error",{enumerable:!0,get:function(){return a.error}}),Object.defineProperty(e,"Integer",{enumerable:!0,get:function(){return a.Integer}}),Object.defineProperty(e,"int",{enumerable:!0,get:function(){return a.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return a.isInt}}),Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return a.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return a.Point}}),Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return a.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return a.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return a.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return a.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return a.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return a.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return a.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return a.isLocalTime}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return a.isNode}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return a.isPath}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return a.isPathSegment}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return a.isRelationship}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return a.isTime}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return a.isUnboundRelationship}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return a.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return a.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return a.Time}}),Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return a.Node}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return a.Path}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return a.PathSegment}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return a.Relationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return a.UnboundRelationship}}),Object.defineProperty(e,"Record",{enumerable:!0,get:function(){return a.Record}}),Object.defineProperty(e,"ResultSummary",{enumerable:!0,get:function(){return a.ResultSummary}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return a.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return a.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return a.QueryStatistics}}),Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return a.Notification}}),Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return a.GqlStatusObject}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return a.ServerInfo}}),Object.defineProperty(e,"Result",{enumerable:!0,get:function(){return a.Result}}),Object.defineProperty(e,"EagerResult",{enumerable:!0,get:function(){return a.EagerResult}}),Object.defineProperty(e,"auth",{enumerable:!0,get:function(){return a.auth}}),Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return a.Session}}),Object.defineProperty(e,"Transaction",{enumerable:!0,get:function(){return a.Transaction}}),Object.defineProperty(e,"ManagedTransaction",{enumerable:!0,get:function(){return a.ManagedTransaction}}),Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return a.bookmarkManager}}),Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return a.routing}}),Object.defineProperty(e,"resultTransformers",{enumerable:!0,get:function(){return a.resultTransformers}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return a.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return a.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return a.notificationSeverityLevel}}),Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return a.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return a.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return a.notificationFilterMinimumSeverityLevel}}),Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return a.clientCertificateProviders}});var s=o1,c=n(Ml);e.RxSession=c.default;var u=n(Ds);e.RxTransaction=u.default;var l=n(bf);e.RxManagedTransaction=l.default;var d=n(Ei);e.RxResult=d.default;var h=a.internal.util,p=h.ENCRYPTION_ON,v=h.assertString,y=h.isEmptyObjectOrNull,_=a.internal.serverAddress.ServerAddress,b=a.internal.urlUtil,w="neo4j-javascript/"+i.default;function S(V){return typeof V=="object"&&V!=null&&"getToken"in V&&"handleSecurityException"in V&&typeof V.getToken=="function"&&typeof V.handleSecurityException=="function"}function E(V){if(S(V))return V;var ie=V;return ie=ie||{},ie.scheme=ie.scheme||"none",(0,a.staticAuthTokenManager)({authToken:ie})}function T(V,ie,W){W===void 0&&(W={}),v(V,"Bolt URL");var te=b.parseDatabaseUrl(V),K=!1,L=!1,re;switch(te.scheme){case"bolt":break;case"bolt+s":L=!0,re="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":L=!0,re="TRUST_ALL_CERTIFICATES";break;case"neo4j":K=!0;break;case"neo4j+s":L=!0,re="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",K=!0;break;case"neo4j+ssc":L=!0,re="TRUST_ALL_CERTIFICATES",K=!0;break;default:throw new Error("Unknown scheme: ".concat(te.scheme))}if(L){if("encrypted"in W||"trust"in W)throw new Error("Encryption/trust can only be configured either through URL or config, not both");W.encrypted=p,W.trust=re,W.clientCertificate=(0,a.resolveCertificateProvider)(W.clientCertificate)}var pe=E(ie);W.userAgent=W.userAgent||w,W.boltAgent=a.internal.boltAgent.fromVersion(i.default);var Ae=_.fromUrl(te.hostAndPort),X={address:Ae,typename:K?"Routing":"Direct",routing:K};return new o.Driver(X,W,$e());function $e(){if(K)return function(ve,ft,m,A){return new s.RoutingConnectionProvider({id:ve,config:ft,log:m,hostNameResolver:A,authTokenManager:pe,address:Ae,userAgent:ft.userAgent,boltAgent:ft.boltAgent,routingContext:te.query})};if(!y(te.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(V,"'"));return function(ve,ft,m){return new s.DirectConnectionProvider({id:ve,config:ft,log:m,authTokenManager:pe,address:Ae,userAgent:ft.userAgent,boltAgent:ft.boltAgent})}}}e.driver=T;function C(V,ie){return r(this,void 0,void 0,function(){var W;return t(this,function(te){switch(te.label){case 0:W=T(V,{scheme:"none",principal:"",credentials:""},ie),te.label=1;case 1:return te.trys.push([1,,3,5]),[4,W.getNegotiatedProtocolVersion()];case 2:return te.sent(),[2,!0];case 3:return[4,W.close()];case 4:return te.sent(),[7];case 5:return[2]}})})}e.hasReachableServer=C;var P={console:function(V){return{level:V,logger:function(ie,W){return console.log("".concat(f.Date.now()," ").concat(ie.toUpperCase()," ").concat(W))}}}};e.logging=P;var I={Node:a.Node,Relationship:a.Relationship,UnboundRelationship:a.UnboundRelationship,PathSegment:a.PathSegment,Path:a.Path,Result:a.Result,EagerResult:a.EagerResult,ResultSummary:a.ResultSummary,Record:a.Record,Point:a.Point,Date:a.Date,DateTime:a.DateTime,Duration:a.Duration,LocalDateTime:a.LocalDateTime,LocalTime:a.LocalTime,Time:a.Time,Integer:a.Integer};e.types=I;var M={READ:o.READ,WRITE:o.WRITE};e.session=M;var F={toNumber:a.toNumber,toString:a.toString,inSafeRange:a.inSafeRange};e.integer=F;var Q={isPoint:a.isPoint};e.spatial=Q;var q={isDuration:a.isDuration,isLocalTime:a.isLocalTime,isTime:a.isTime,isDate:a.isDate,isLocalDateTime:a.isLocalDateTime,isDateTime:a.isDateTime};e.temporal=q;var Z={isNode:a.isNode,isPath:a.isPath,isPathSegment:a.isPathSegment,isRelationship:a.isRelationship,isUnboundRelationship:a.isUnboundRelationship};e.graph=Z;var fe={authTokenManagers:a.authTokenManagers,driver:T,hasReachableServer:C,int:a.int,isInt:a.isInt,isPoint:a.isPoint,isDuration:a.isDuration,isLocalTime:a.isLocalTime,isTime:a.isTime,isDate:a.isDate,isLocalDateTime:a.isLocalDateTime,isDateTime:a.isDateTime,isNode:a.isNode,isPath:a.isPath,isPathSegment:a.isPathSegment,isRelationship:a.isRelationship,isUnboundRelationship:a.isUnboundRelationship,integer:F,Neo4jError:a.Neo4jError,isRetryableError:a.isRetryableError,auth:a.auth,logging:P,types:I,session:M,routing:a.routing,error:a.error,graph:Z,spatial:Q,temporal:q,Driver:o.Driver,Session:a.Session,Transaction:a.Transaction,ManagedTransaction:a.ManagedTransaction,Result:a.Result,EagerResult:a.EagerResult,RxSession:c.default,RxTransaction:u.default,RxManagedTransaction:l.default,RxResult:d.default,ResultSummary:a.ResultSummary,Plan:a.Plan,ProfiledPlan:a.ProfiledPlan,QueryStatistics:a.QueryStatistics,Notification:a.Notification,GqlStatusObject:a.GqlStatusObject,ServerInfo:a.ServerInfo,Record:a.Record,Node:a.Node,Relationship:a.Relationship,UnboundRelationship:a.UnboundRelationship,Path:a.Path,PathSegment:a.PathSegment,Point:a.Point,Integer:a.Integer,Duration:a.Duration,LocalTime:a.LocalTime,Time:a.Time,Date:a.Date,LocalDateTime:a.LocalDateTime,DateTime:a.DateTime,bookmarkManager:a.bookmarkManager,resultTransformers:a.resultTransformers,notificationCategory:a.notificationCategory,notificationSeverityLevel:a.notificationSeverityLevel,notificationFilterDisabledCategory:a.notificationFilterDisabledCategory,notificationFilterMinimumSeverityLevel:a.notificationFilterMinimumSeverityLevel,clientCertificateProviders:a.clientCertificateProviders};e.default=fe})(Yp);const XG=new Uint8Array(0);function oie(e){const r=e.match(/../g);return r!=null?new Uint8Array(r.map(t=>parseInt(t,16))):XG}function JG(e,r){if(e===r)return!0;if(e.byteLength!==r.byteLength)return!1;for(let t=0;t<e.byteLength;t++)if(e[t]!==r[t])return!1;return!0}function Ii(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function e9(e){return new TextEncoder().encode(e)}function t9(e){return new TextDecoder().decode(e)}function r9(e,r){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),a=i.charCodeAt(0);if(t[a]!==255)throw new TypeError(i+" is ambiguous");t[a]=o}var s=e.length,c=e.charAt(0),u=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function d(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var y=0,_=0,b=0,w=v.length;b!==w&&v[b]===0;)b++,y++;for(var S=(w-b)*l+1>>>0,E=new Uint8Array(S);b!==w;){for(var T=v[b],C=0,P=S-1;(T!==0||C<_)&&P!==-1;P--,C++)T+=256*E[P]>>>0,E[P]=T%s>>>0,T=T/s>>>0;if(T!==0)throw new Error("Non-zero carry");_=C,b++}for(var I=S-_;I!==S&&E[I]===0;)I++;for(var M=c.repeat(y);I<S;++I)M+=e.charAt(E[I]);return M}function h(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var y=0;if(v[y]!==" "){for(var _=0,b=0;v[y]===c;)_++,y++;for(var w=(v.length-y)*u+1>>>0,S=new Uint8Array(w);v[y];){var E=t[v.charCodeAt(y)];if(E===255)return;for(var T=0,C=w-1;(E!==0||T<b)&&C!==-1;C--,T++)E+=s*S[C]>>>0,S[C]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");b=T,y++}if(v[y]!==" "){for(var P=w-b;P!==w&&S[P]===0;)P++;for(var I=new Uint8Array(_+(w-P)),M=_;P!==w;)I[M++]=S[P++];return I}}}function p(v){var y=h(v);if(y)return y;throw new Error(`Non-${r} character`)}return{encode:d,decodeUnsafe:h,decode:p}}var n9=r9,o9=n9;let i9=class{constructor(r,t,n){g(this,"name");g(this,"prefix");g(this,"baseEncode");this.name=r,this.prefix=t,this.baseEncode=n}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}},a9=class{constructor(r,t,n){g(this,"name");g(this,"prefix");g(this,"baseDecode");g(this,"prefixCodePoint");this.name=r,this.prefix=t;const o=t.codePointAt(0);if(o===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=o,this.baseDecode=n}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return WE(this,r)}},u9=class{constructor(r){g(this,"decoders");this.decoders=r}or(r){return WE(this,r)}decode(r){const t=r[0],n=this.decoders[t];if(n!=null)return n.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function WE(e,r){return new u9({...e.decoders??{[e.prefix]:e},...r.decoders??{[r.prefix]:r}})}let s9=class{constructor(r,t,n,o){g(this,"name");g(this,"prefix");g(this,"baseEncode");g(this,"baseDecode");g(this,"encoder");g(this,"decoder");this.name=r,this.prefix=t,this.baseEncode=n,this.baseDecode=o,this.encoder=new i9(r,t,n),this.decoder=new a9(r,t,o)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}};function Ed({name:e,prefix:r,encode:t,decode:n}){return new s9(e,r,t,n)}function Hs({name:e,prefix:r,alphabet:t}){const{encode:n,decode:o}=o9(t,e);return Ed({prefix:r,name:e,encode:n,decode:i=>Ii(o(i))})}function c9(e,r,t,n){let o=e.length;for(;e[o-1]==="=";)--o;const i=new Uint8Array(o*t/8|0);let a=0,s=0,c=0;for(let u=0;u<o;++u){const l=r[e[u]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);s=s<<t|l,a+=t,a>=8&&(a-=8,i[c++]=255&s>>a)}if(a>=t||255&s<<8-a)throw new SyntaxError("Unexpected end of data");return i}function l9(e,r,t){const n=r[r.length-1]==="=",o=(1<<t)-1;let i="",a=0,s=0;for(let c=0;c<e.length;++c)for(s=s<<8|e[c],a+=8;a>t;)a-=t,i+=r[o&s>>a];if(a!==0&&(i+=r[o&s<<t-a]),n)for(;i.length*t&7;)i+="=";return i}function f9(e){const r={};for(let t=0;t<e.length;++t)r[e[t]]=t;return r}function qe({name:e,prefix:r,bitsPerChar:t,alphabet:n}){const o=f9(n);return Ed({prefix:r,name:e,encode(i){return l9(i,n,t)},decode(i){return c9(i,o,t,e)}})}const d9=Hs({prefix:"9",name:"base10",alphabet:"0123456789"}),h9=Object.freeze(Object.defineProperty({__proto__:null,base10:d9},Symbol.toStringTag,{value:"Module"})),p9=qe({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),v9=qe({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),_9=Object.freeze(Object.defineProperty({__proto__:null,base16:p9,base16upper:v9},Symbol.toStringTag,{value:"Module"})),y9=qe({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),b9=Object.freeze(Object.defineProperty({__proto__:null,base2:y9},Symbol.toStringTag,{value:"Module"})),zE=Array.from(""),m9=zE.reduce((e,r,t)=>(e[t]=r,e),[]),g9=zE.reduce((e,r,t)=>{const n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);return e[n]=t,e},[]);function w9(e){return e.reduce((r,t)=>(r+=m9[t],r),"")}function O9(e){const r=[];for(const t of e){const n=t.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${t}`);const o=g9[n];if(o==null)throw new Error(`Non-base256emoji character: ${t}`);r.push(o)}return new Uint8Array(r)}const E9=Ed({prefix:"",name:"base256emoji",encode:w9,decode:O9}),S9=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:E9},Symbol.toStringTag,{value:"Module"})),$n=qe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),T9=qe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),P9=qe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),C9=qe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),A9=qe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),I9=qe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),R9=qe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),$9=qe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),j9=qe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),N9=Object.freeze(Object.defineProperty({__proto__:null,base32:$n,base32hex:A9,base32hexpad:R9,base32hexpadupper:$9,base32hexupper:I9,base32pad:P9,base32padupper:C9,base32upper:T9,base32z:j9},Symbol.toStringTag,{value:"Module"})),jc=Hs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),k9=Hs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),M9=Object.freeze(Object.defineProperty({__proto__:null,base36:jc,base36upper:k9},Symbol.toStringTag,{value:"Module"})),Be=Hs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),D9=Hs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),L9=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Be,base58flickr:D9},Symbol.toStringTag,{value:"Module"})),Sd=qe({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),U9=qe({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),qs=qe({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),F9=qe({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),B9=Object.freeze(Object.defineProperty({__proto__:null,base64:Sd,base64pad:U9,base64url:qs,base64urlpad:F9},Symbol.toStringTag,{value:"Module"})),x9=qe({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),V9=Object.freeze(Object.defineProperty({__proto__:null,base8:x9},Symbol.toStringTag,{value:"Module"})),W9=Ed({prefix:"\0",name:"identity",encode:e=>t9(e),decode:e=>e9(e)}),z9=Object.freeze(Object.defineProperty({__proto__:null,identity:W9},Symbol.toStringTag,{value:"Module"})),H9=new TextEncoder,q9=new TextDecoder,G9="json",K9=512;function Y9(e){return H9.encode(JSON.stringify(e))}function Z9(e){return JSON.parse(q9.decode(e))}const Q9=Object.freeze(Object.defineProperty({__proto__:null,code:K9,decode:Z9,encode:Y9,name:G9},Symbol.toStringTag,{value:"Module"})),X9="raw",J9=85;function eK(e){return Ii(e)}function tK(e){return Ii(e)}const rK=Object.freeze(Object.defineProperty({__proto__:null,code:J9,decode:tK,encode:eK,name:X9},Symbol.toStringTag,{value:"Module"}));var nK=HE,zg=128,oK=-128,iK=Math.pow(2,31);function HE(e,r,t){r=r||[],t=t||0;for(var n=t;e>=iK;)r[t++]=e&255|zg,e/=128;for(;e&oK;)r[t++]=e&255|zg,e>>>=7;return r[t]=e|0,HE.bytes=t-n+1,r}var aK=Dv,uK=128,Hg=127;function Dv(e,n){var t=0,n=n||0,o=0,i=n,a,s=e.length;do{if(i>=s)throw Dv.bytes=0,new RangeError("Could not decode varint");a=e[i++],t+=o<28?(a&Hg)<<o:(a&Hg)*Math.pow(2,o),o+=7}while(a>=uK);return Dv.bytes=i-n,t}var sK=Math.pow(2,7),cK=Math.pow(2,14),lK=Math.pow(2,21),fK=Math.pow(2,28),dK=Math.pow(2,35),hK=Math.pow(2,42),pK=Math.pow(2,49),vK=Math.pow(2,56),_K=Math.pow(2,63),yK=function(e){return e<sK?1:e<cK?2:e<lK?3:e<fK?4:e<dK?5:e<hK?6:e<pK?7:e<vK?8:e<_K?9:10},bK={encode:nK,decode:aK,encodingLength:yK},Jc=bK;function Lv(e,r=0){return[Jc.decode(e,r),Jc.decode.bytes]}function el(e,r,t=0){return Jc.encode(e,r,t),r}function tl(e){return Jc.encodingLength(e)}function Pa(e,r){const t=r.byteLength,n=tl(e),o=n+tl(t),i=new Uint8Array(o+t);return el(e,i,0),el(t,i,n),i.set(r,o),new _y(e,t,r,i)}function qE(e){const r=Ii(e),[t,n]=Lv(r),[o,i]=Lv(r.subarray(n)),a=r.subarray(n+i);if(a.byteLength!==o)throw new Error("Incorrect length");return new _y(t,o,a,r)}function mK(e,r){if(e===r)return!0;{const t=r;return e.code===t.code&&e.size===t.size&&t.bytes instanceof Uint8Array&&JG(e.bytes,t.bytes)}}let _y=class{constructor(r,t,n,o){g(this,"code");g(this,"size");g(this,"digest");g(this,"bytes");this.code=r,this.size=t,this.digest=n,this.bytes=o}};const GE=0,gK="identity",KE=Ii;function wK(e){return Pa(GE,KE(e))}const Hr={code:GE,name:gK,encode:KE,digest:wK},OK=Object.freeze(Object.defineProperty({__proto__:null,identity:Hr},Symbol.toStringTag,{value:"Module"}));function YE({name:e,code:r,encode:t}){return new EK(e,r,t)}class EK{constructor(r,t,n){g(this,"name");g(this,"code");g(this,"encode");this.name=r,this.code=t,this.encode=n}digest(r){if(r instanceof Uint8Array){const t=this.encode(r);return t instanceof Uint8Array?Pa(this.code,t):t.then(n=>Pa(this.code,n))}else throw Error("Unknown type, must be binary type")}}function ZE(e){return async r=>new Uint8Array(await crypto.subtle.digest(e,r))}const yy=YE({name:"sha2-256",code:18,encode:ZE("SHA-256")}),SK=YE({name:"sha2-512",code:19,encode:ZE("SHA-512")}),TK=Object.freeze(Object.defineProperty({__proto__:null,sha256:yy,sha512:SK},Symbol.toStringTag,{value:"Module"}));function qg(e,r){const{bytes:t,version:n}=e;switch(n){case 0:return CK(t,Uv(e),r??Be.encoder);default:return AK(t,Uv(e),r??$n.encoder)}}const Gg=new WeakMap;function Uv(e){const r=Gg.get(e);if(r==null){const t=new Map;return Gg.set(e,t),t}return r}var B0;let G=class Ke{constructor(r,t,n,o){g(this,"code");g(this,"version");g(this,"multihash");g(this,"bytes");g(this,"/");g(this,B0,"CID");this.code=t,this.version=r,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:r,multihash:t}=this;if(r!==Yi)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==IK)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ke.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:r,digest:t}=this.multihash,n=Pa(r,t);return Ke.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(r){return Ke.equals(this,r)}static equals(r,t){const n=t;return n!=null&&r.code===n.code&&r.version===n.version&&mK(r.multihash,n.multihash)}toString(r){return qg(this,r)}toJSON(){return{"/":qg(this)}}link(){return this}[(B0=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(r){if(r==null)return null;const t=r;if(t instanceof Ke)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){const{version:n,code:o,multihash:i,bytes:a}=t;return new Ke(n,o,i,a??Kg(n,o,i.bytes))}else if(t[RK]===!0){const{version:n,multihash:o,code:i}=t,a=qE(o);return Ke.create(n,i,a)}else return null}static create(r,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(r){case 0:{if(t!==Yi)throw new Error(`Version 0 CID must use dag-pb (code: ${Yi}) block encoding`);return new Ke(r,t,n,n.bytes)}case 1:{const o=Kg(r,t,n.bytes);return new Ke(r,t,n,o)}default:throw new Error("Invalid version")}}static createV0(r){return Ke.create(0,Yi,r)}static createV1(r,t){return Ke.create(1,r,t)}static decode(r){const[t,n]=Ke.decodeFirst(r);if(n.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(r){const t=Ke.inspectBytes(r),n=t.size-t.multihashSize,o=Ii(r.subarray(n,n+t.multihashSize));if(o.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=o.subarray(t.multihashSize-t.digestSize),a=new _y(t.multihashCode,t.digestSize,i,o);return[t.version===0?Ke.createV0(a):Ke.createV1(t.codec,a),r.subarray(t.size)]}static inspectBytes(r){let t=0;const n=()=>{const[d,h]=Lv(r.subarray(t));return t+=h,d};let o=n(),i=Yi;if(o===18?(o=0,t=0):i=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const a=t,s=n(),c=n(),u=t+c,l=u-a;return{version:o,codec:i,multihashCode:s,digestSize:c,multihashSize:l,size:u}}static parse(r,t){const[n,o]=PK(r,t),i=Ke.decode(o);if(i.version===0&&r[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Uv(i).set(n,r),i}};function PK(e,r){switch(e[0]){case"Q":{const t=r??Be;return[Be.prefix,t.decode(`${Be.prefix}${e}`)]}case Be.prefix:{const t=r??Be;return[Be.prefix,t.decode(e)]}case $n.prefix:{const t=r??$n;return[$n.prefix,t.decode(e)]}case jc.prefix:{const t=r??jc;return[jc.prefix,t.decode(e)]}default:{if(r==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[e[0],r.decode(e)]}}}function CK(e,r,t){const{prefix:n}=t;if(n!==Be.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const o=r.get(n);if(o==null){const i=t.encode(e).slice(1);return r.set(n,i),i}else return o}function AK(e,r,t){const{prefix:n}=t,o=r.get(n);if(o==null){const i=t.encode(e);return r.set(n,i),i}else return o}const Yi=112,IK=18;function Kg(e,r,t){const n=tl(e),o=n+tl(r),i=new Uint8Array(o+t.byteLength);return el(e,i,0),el(r,i,n),i.set(t,o),i}const RK=Symbol.for("@ipld/js-cid/CID"),rl={...z9,...b9,...V9,...h9,..._9,...N9,...M9,...L9,...B9,...S9},$K={...TK,...OK},jK={raw:rK,json:Q9};function Rr(e=0){return new Uint8Array(e)}function zn(e=0){return new Uint8Array(e)}function QE(e,r,t,n){return{name:e,prefix:r,encoder:{name:e,prefix:r,encode:t},decoder:{decode:n}}}const Yg=QE("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),jp=QE("ascii","a",e=>{let r="a";for(let t=0;t<e.length;t++)r+=String.fromCharCode(e[t]);return r},e=>{e=e.substring(1);const r=zn(e.length);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return r}),XE={utf8:Yg,"utf-8":Yg,hex:rl.base16,latin1:jp,ascii:jp,binary:jp,...rl};function Se(e,r="utf8"){const t=XE[r];if(t==null)throw new Error(`Unsupported encoding "${r}"`);return t.encoder.encode(e).substring(1)}class _t extends Error{constructor(){super(...arguments);g(this,"name","InvalidMultiaddrError")}}g(_t,"name","InvalidMultiaddrError");class xo extends Error{constructor(){super(...arguments);g(this,"name","ValidationError")}}g(xo,"name","ValidationError");var qp;let NK=(qp=class extends Error{constructor(){super(...arguments);g(this,"name","InvalidParametersError")}},g(qp,"name","InvalidParametersError"),qp);class JE extends Error{constructor(){super(...arguments);g(this,"name","UnknownProtocolError")}}g(JE,"name","UnknownProtocolError");function qr(e,r){if(e===r)return!0;if(e.byteLength!==r.byteLength)return!1;for(let t=0;t<e.byteLength;t++)if(e[t]!==r[t])return!1;return!0}function bt(e,r="utf8"){const t=XE[r];if(t==null)throw new Error(`Unsupported encoding "${r}"`);return t.decoder.decode(`${t.prefix}${e}`)}const kK=Math.pow(2,7),MK=Math.pow(2,14),DK=Math.pow(2,21),by=Math.pow(2,28),my=Math.pow(2,35),gy=Math.pow(2,42),wy=Math.pow(2,49),be=128,Qe=127;function Hn(e){if(e<kK)return 1;if(e<MK)return 2;if(e<DK)return 3;if(e<by)return 4;if(e<my)return 5;if(e<gy)return 6;if(e<wy)return 7;if(Number.MAX_SAFE_INTEGER!=null&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function Fv(e,r,t=0){switch(Hn(e)){case 8:r[t++]=e&255|be,e/=128;case 7:r[t++]=e&255|be,e/=128;case 6:r[t++]=e&255|be,e/=128;case 5:r[t++]=e&255|be,e/=128;case 4:r[t++]=e&255|be,e>>>=7;case 3:r[t++]=e&255|be,e>>>=7;case 2:r[t++]=e&255|be,e>>>=7;case 1:{r[t++]=e&255,e>>>=7;break}default:throw new Error("unreachable")}return r}function eS(e,r){let t=e[r],n=0;if(n+=t&Qe,t<be||(t=e[r+1],n+=(t&Qe)<<7,t<be)||(t=e[r+2],n+=(t&Qe)<<14,t<be)||(t=e[r+3],n+=(t&Qe)<<21,t<be)||(t=e[r+4],n+=(t&Qe)*by,t<be)||(t=e[r+5],n+=(t&Qe)*my,t<be)||(t=e[r+6],n+=(t&Qe)*gy,t<be)||(t=e[r+7],n+=(t&Qe)*wy,t<be))return n;throw new RangeError("Could not decode varint")}function LK(e,r){let t=e.get(r),n=0;if(n+=t&Qe,t<be||(t=e.get(r+1),n+=(t&Qe)<<7,t<be)||(t=e.get(r+2),n+=(t&Qe)<<14,t<be)||(t=e.get(r+3),n+=(t&Qe)<<21,t<be)||(t=e.get(r+4),n+=(t&Qe)*by,t<be)||(t=e.get(r+5),n+=(t&Qe)*my,t<be)||(t=e.get(r+6),n+=(t&Qe)*gy,t<be)||(t=e.get(r+7),n+=(t&Qe)*wy,t<be))return n;throw new RangeError("Could not decode varint")}function tS(e,r=0){return e instanceof Uint8Array?eS(e,r):LK(e,r)}function Ca(e,r){r==null&&(r=e.reduce((o,i)=>o+i.length,0));const t=zn(r);let n=0;for(const o of e)t.set(o,n),n+=o.length;return t}class UK{constructor(){g(this,"index",0);g(this,"input","")}new(r){return this.index=0,this.input=r,this}readAtomically(r){const t=this.index,n=r();return n===void 0&&(this.index=t),n}parseWith(r){const t=r();if(this.index===this.input.length)return t}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(r){return this.readAtomically(()=>{const t=this.readChar();if(t===r)return t})}readSeparator(r,t,n){return this.readAtomically(()=>{if(!(t>0&&this.readGivenChar(r)===void 0))return n()})}readNumber(r,t,n,o){return this.readAtomically(()=>{let i=0,a=0;const s=this.peekChar();if(s===void 0)return;const c=s==="0",u=2**(8*o)-1;for(;;){const l=this.readAtomically(()=>{const d=this.readChar();if(d===void 0)return;const h=Number.parseInt(d,r);if(!Number.isNaN(h))return h});if(l===void 0)break;if(i*=r,i+=l,i>u||(a+=1,t!==void 0&&a>t))return}if(a!==0)return!n&&c&&a>1?void 0:i})}readIPv4Addr(){return this.readAtomically(()=>{const r=new Uint8Array(4);for(let t=0;t<r.length;t++){const n=this.readSeparator(".",t,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;r[t]=n}return r})}readIPv6Addr(){const r=t=>{for(let n=0;n<t.length/2;n++){const o=n*2;if(n<t.length-3){const a=this.readSeparator(":",n,()=>this.readIPv4Addr());if(a!==void 0)return t[o]=a[0],t[o+1]=a[1],t[o+2]=a[2],t[o+3]=a[3],[o+4,!0]}const i=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(i===void 0)return[o,!1];t[o]=i>>8,t[o+1]=i&255}return[t.length,!1]};return this.readAtomically(()=>{const t=new Uint8Array(16),[n,o]=r(t);if(n===16)return t;if(o||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const i=new Uint8Array(14),a=16-(n+2),[s]=r(i.subarray(0,a));return t.set(i.subarray(0,s),16-s),t})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const FK=45,BK=15,nl=new UK;function xK(e){if(!(e.length>BK))return nl.new(e).parseWith(()=>nl.readIPv4Addr())}function VK(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>FK))return nl.new(e).parseWith(()=>nl.readIPv6Addr())}function rS(e){return!!xK(e)}function WK(e){return!!VK(e)}const Bv=4,ol=6,xv=273,zK=33,va=41,nS=42,HK=43,Oy=53,Ey=54,Td=55,Sy=56,qK=132,GK=301,KK=302,YK=400,oS=421,ZK=444,QK=445,XK=446,JK=447,iS=448,eY=449,tY=454,rY=460,nY=461,oY=465,iY=466,aY=480,uY=481,sY=443,cY=477,lY=478,fY=479,dY=277,hY=275,pY=276,vY=280,_Y=281,aS=290,yY=777;function Zg(e){return r=>Se(r,e)}function Qg(e){return r=>bt(r,e)}function oa(e){return new DataView(e.buffer).getUint16(e.byteOffset).toString()}function So(e){const r=new ArrayBuffer(2);return new DataView(r).setUint16(0,typeof e=="string"?parseInt(e):e),new Uint8Array(r)}function bY(e){const r=e.split(":");if(r.length!==2)throw new Error(`failed to parse onion addr: ["'${r.join('", "')}'"]' does not contain a port number`);if(r[0].length!==16)throw new Error(`failed to parse onion addr: ${r[0]} not a Tor onion address.`);const t=bt(r[0],"base32"),n=parseInt(r[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const o=So(n);return Ca([t,o],t.length+o.length)}function mY(e){const r=e.split(":");if(r.length!==2)throw new Error(`failed to parse onion addr: ["'${r.join('", "')}'"]' does not contain a port number`);if(r[0].length!==56)throw new Error(`failed to parse onion addr: ${r[0]} not a Tor onion3 address.`);const t=$n.decode(`b${r[0]}`),n=parseInt(r[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const o=So(n);return Ca([t,o],t.length+o.length)}function Xg(e){const r=e.subarray(0,e.length-2),t=e.subarray(e.length-2),n=Se(r,"base32"),o=oa(t);return`${n}:${o}`}const uS=function(e){e=e.toString().trim();const r=new Uint8Array(4);return e.split(/\./g).forEach((t,n)=>{const o=parseInt(t,10);if(isNaN(o)||o<0||o>255)throw new _t("Invalid byte value in IP address");r[n]=o}),r},gY=function(e){let r=0;e=e.toString().trim();const t=e.split(":",8);let n;for(n=0;n<t.length;n++){const i=rS(t[n]);let a;i&&(a=uS(t[n]),t[n]=Se(a.subarray(0,2),"base16")),a!=null&&++n<8&&t.splice(n,0,Se(a.subarray(2,4),"base16"))}if(t[0]==="")for(;t.length<8;)t.unshift("0");else if(t[t.length-1]==="")for(;t.length<8;)t.push("0");else if(t.length<8){for(n=0;n<t.length&&t[n]!=="";n++);const i=[n,1];for(n=9-t.length;n>0;n--)i.push("0");t.splice.apply(t,i)}const o=new Uint8Array(r+16);for(n=0;n<t.length;n++){t[n]===""&&(t[n]="0");const i=parseInt(t[n],16);if(isNaN(i)||i<0||i>65535)throw new _t("Invalid byte value in IP address");o[r++]=i>>8&255,o[r++]=i&255}return o},wY=function(e){if(e.byteLength!==4)throw new _t("IPv4 address was incorrect length");const r=[];for(let t=0;t<e.byteLength;t++)r.push(e[t]);return r.join(".")},OY=function(e){if(e.byteLength!==16)throw new _t("IPv6 address was incorrect length");const r=[];for(let n=0;n<e.byteLength;n+=2){const o=e[n],i=e[n+1],a=`${o.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}`;r.push(a)}const t=r.join(":");try{const n=new URL(`http://[${t}]`);return n.hostname.substring(1,n.hostname.length-1)}catch{throw new _t(`Invalid IPv6 address "${t}"`)}};function EY(e){try{const r=new URL(`http://[${e}]`);return r.hostname.substring(1,r.hostname.length-1)}catch{throw new _t(`Invalid IPv6 address "${e}"`)}}const Np=Object.values(rl).map(e=>e.decoder),SY=function(){let e=Np[0].or(Np[1]);return Np.slice(2).forEach(r=>e=e.or(r)),e}();function TY(e){return SY.decode(e)}function PY(e){return r=>e.encoder.encode(r)}function CY(e){if(parseInt(e).toString()!==e)throw new xo("Value must be an integer")}function AY(e){if(e<0)throw new xo("Value must be a positive integer, or zero")}function IY(e){return r=>{if(r>e)throw new xo(`Value must be smaller than or equal to ${e}`)}}function RY(...e){return r=>{for(const t of e)t(r)}}const bc=RY(CY,AY,IY(65535)),Ye=-1;class $Y{constructor(){g(this,"protocolsByCode",new Map);g(this,"protocolsByName",new Map)}getProtocol(r){let t;if(typeof r=="string"?t=this.protocolsByName.get(r):t=this.protocolsByCode.get(r),t==null)throw new JE(`Protocol ${r} was unknown`);return t}addProtocol(r){var t;this.protocolsByCode.set(r.code,r),this.protocolsByName.set(r.name,r),(t=r.aliases)==null||t.forEach(n=>{this.protocolsByName.set(n,r)})}removeProtocol(r){var n;const t=this.protocolsByCode.get(r);t!=null&&(this.protocolsByCode.delete(t.code),this.protocolsByName.delete(t.name),(n=t.aliases)==null||n.forEach(o=>{this.protocolsByName.delete(o)}))}}const yr=new $Y,jY=[{code:Bv,name:"ip4",size:32,valueToBytes:uS,bytesToValue:wY,validate:e=>{if(!rS(e))throw new xo(`Invalid IPv4 address "${e}"`)}},{code:ol,name:"tcp",size:16,valueToBytes:So,bytesToValue:oa,validate:bc},{code:xv,name:"udp",size:16,valueToBytes:So,bytesToValue:oa,validate:bc},{code:zK,name:"dccp",size:16,valueToBytes:So,bytesToValue:oa,validate:bc},{code:va,name:"ip6",size:128,valueToBytes:gY,bytesToValue:OY,stringToValue:EY,validate:e=>{if(!WK(e))throw new xo(`Invalid IPv6 address "${e}"`)}},{code:nS,name:"ip6zone",size:Ye},{code:HK,name:"ipcidr",size:8,bytesToValue:Zg("base10"),valueToBytes:Qg("base10")},{code:Oy,name:"dns",size:Ye,resolvable:!0},{code:Ey,name:"dns4",size:Ye,resolvable:!0},{code:Td,name:"dns6",size:Ye,resolvable:!0},{code:Sy,name:"dnsaddr",size:Ye,resolvable:!0},{code:qK,name:"sctp",size:16,valueToBytes:So,bytesToValue:oa,validate:bc},{code:GK,name:"udt"},{code:KK,name:"utp"},{code:YK,name:"unix",size:Ye,path:!0,stringToValue:e=>decodeURIComponent(e),valueToString:e=>encodeURIComponent(e)},{code:oS,name:"p2p",aliases:["ipfs"],size:Ye,bytesToValue:Zg("base58btc"),valueToBytes:e=>e.startsWith("Q")||e.startsWith("1")?Qg("base58btc")(e):G.parse(e).multihash.bytes},{code:ZK,name:"onion",size:96,bytesToValue:Xg,valueToBytes:bY},{code:QK,name:"onion3",size:296,bytesToValue:Xg,valueToBytes:mY},{code:XK,name:"garlic64",size:Ye},{code:JK,name:"garlic32",size:Ye},{code:iS,name:"tls"},{code:eY,name:"sni",size:Ye},{code:tY,name:"noise"},{code:rY,name:"quic"},{code:nY,name:"quic-v1"},{code:oY,name:"webtransport"},{code:iY,name:"certhash",size:Ye,bytesToValue:PY(qs),valueToBytes:TY},{code:aY,name:"http"},{code:uY,name:"http-path",size:Ye,stringToValue:e=>`/${decodeURIComponent(e)}`,valueToString:e=>encodeURIComponent(e.substring(1))},{code:sY,name:"https"},{code:cY,name:"ws"},{code:lY,name:"wss"},{code:fY,name:"p2p-websocket-star"},{code:dY,name:"p2p-stardust"},{code:hY,name:"p2p-webrtc-star"},{code:pY,name:"p2p-webrtc-direct"},{code:vY,name:"webrtc-direct"},{code:_Y,name:"webrtc"},{code:aS,name:"p2p-circuit"},{code:yY,name:"memory",size:Ye}];jY.forEach(e=>{yr.addProtocol(e)});function NY(e){var n;const r=[];let t=0;for(;t<e.length;){const o=tS(e,t),i=yr.getProtocol(o),a=Hn(o),s=LY(i,e,t+a);let c=0;s>0&&i.size===Ye&&(c=Hn(s));const u=a+c+s,l={code:o,name:i.name,bytes:e.subarray(t,t+u)};if(s>0){const d=t+a+c,h=e.subarray(d,d+s);l.value=((n=i.bytesToValue)==null?void 0:n.call(i,h))??Se(h)}r.push(l),t+=u}return r}function kY(e){var n;let r=0;const t=[];for(const o of e){if(o.bytes==null){const i=yr.getProtocol(o.code),a=Hn(o.code);let s,c=0,u=0;o.value!=null&&(s=((n=i.valueToBytes)==null?void 0:n.call(i,o.value))??bt(o.value),c=s.byteLength,i.size===Ye&&(u=Hn(c)));const l=new Uint8Array(a+u+c);let d=0;Fv(o.code,l,d),d+=a,s!=null&&(i.size===Ye&&(Fv(c,l,d),d+=u),l.set(s,d)),o.bytes=l}t.push(o.bytes),r+=o.bytes.byteLength}return Ca(t,r)}function MY(e){var i;if(e.charAt(0)!=="/")throw new _t('String multiaddr must start with "/"');const r=[];let t="protocol",n="",o="";for(let a=1;a<e.length;a++){const s=e.charAt(a);s!=="/"&&(t==="protocol"?o+=e.charAt(a):n+=e.charAt(a));const c=a===e.length-1;if(s==="/"||c){const u=yr.getProtocol(o);if(t==="protocol"){if(u.size==null||u.size===0){r.push({code:u.code,name:u.name}),n="",o="",t="protocol";continue}else if(c)throw new _t(`Component ${o} was missing value`);t="value"}else if(t==="value"){const l={code:u.code,name:u.name};if(u.size!=null&&u.size!==0){if(n==="")throw new _t(`Component ${o} was missing value`);l.value=((i=u.stringToValue)==null?void 0:i.call(u,n))??n}r.push(l),n="",o="",t="protocol"}}}if(o!==""&&n!=="")throw new _t("Incomplete multiaddr");return r}function DY(e){return`/${e.flatMap(r=>{var n;if(r.value==null)return r.name;const t=yr.getProtocol(r.code);if(t==null)throw new _t(`Unknown protocol code ${r.code}`);return[r.name,((n=t.valueToString)==null?void 0:n.call(t,r.value))??r.value]}).join("/")}`}function LY(e,r,t){return e.size==null||e.size===0?0:e.size>0?e.size/8:tS(r,t)}const UY=Symbol.for("nodejs.util.inspect.custom"),sS=Symbol.for("@multiformats/multiaddr"),FY=[Oy,Ey,Td,Sy];class BY extends Error{constructor(r="No available resolver"){super(r),this.name="NoAvailableResolverError"}}function xY(e){if(e==null&&(e="/"),il(e))return e.getComponents();if(e instanceof Uint8Array)return NY(e);if(typeof e=="string")return e=e.replace(/\/(\/)+/,"/").replace(/(\/)+$/,""),e===""&&(e="/"),MY(e);if(Array.isArray(e))return e;throw new _t("Must be a string, Uint8Array, Component[], or another Multiaddr")}var x0,ye,$o,jo;const To=class To{constructor(r="/",t={}){g(this,x0,!0);Zs(this,ye);Zs(this,$o);Zs(this,jo);Qs(this,ye,xY(r)),t.validate!==!1&&VY(this)}get bytes(){return _e(this,jo)==null&&Qs(this,jo,kY(_e(this,ye))),_e(this,jo)}toString(){return _e(this,$o)==null&&Qs(this,$o,DY(_e(this,ye))),_e(this,$o)}toJSON(){return this.toString()}toOptions(){let r,t,n,o,i="";for(const{code:s,name:c,value:u}of _e(this,ye))s===nS&&(i=`%${u??""}`),FY.includes(s)&&(t="tcp",o=443,n=`${u??""}${i}`,r=s===Td?6:4),(s===ol||s===xv)&&(t=c==="tcp"?"tcp":"udp",o=parseInt(u??"")),(s===Bv||s===va)&&(t="tcp",n=`${u??""}${i}`,r=s===va?6:4);if(r==null||t==null||n==null||o==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:r,host:n,transport:t,port:o}}getComponents(){return[..._e(this,ye)]}protos(){return _e(this,ye).map(({code:r,value:t})=>{const n=yr.getProtocol(r);return{code:r,size:n.size??0,name:n.name,resolvable:!!n.resolvable,path:!!n.path}})}protoCodes(){return _e(this,ye).map(({code:r})=>r)}protoNames(){return _e(this,ye).map(({name:r})=>r)}tuples(){return _e(this,ye).map(({code:r,value:t})=>{var i;if(t==null)return[r];const n=yr.getProtocol(r),o=[r];return t!=null&&o.push(((i=n.valueToBytes)==null?void 0:i.call(n,t))??bt(t)),o})}stringTuples(){return _e(this,ye).map(({code:r,value:t})=>t==null?[r]:[r,t])}encapsulate(r){const t=new To(r);return new To([..._e(this,ye),...t.getComponents()],{validate:!1})}decapsulate(r){const t=r.toString(),n=this.toString(),o=n.lastIndexOf(t);if(o<0)throw new NK(`Address ${this.toString()} does not contain subaddress: ${r.toString()}`);return new To(n.slice(0,o),{validate:!1})}decapsulateCode(r){let t;for(let n=_e(this,ye).length-1;n>-1;n--)if(_e(this,ye)[n].code===r){t=n;break}return new To(_e(this,ye).slice(0,t),{validate:!1})}getPeerId(){try{let r=[];_e(this,ye).forEach(({code:n,value:o})=>{n===oS&&r.push([n,o]),n===aS&&(r=[])});const t=r.pop();if((t==null?void 0:t[1])!=null){const n=t[1];return n[0]==="Q"||n[0]==="1"?Se(Be.decode(`z${n}`),"base58btc"):Se(G.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){for(const r of _e(this,ye))if(yr.getProtocol(r.code).path)return r.value??null;return null}equals(r){return qr(this.bytes,r.bytes)}async resolve(r){const t=this.protos().find(i=>i.resolvable);if(t==null)return[this];const n=WY.get(t.name);if(n==null)throw new BY(`no available resolver for ${t.name}`);return(await n(this,r)).map(i=>ct(i))}nodeAddress(){const r=this.toOptions();if(r.transport!=="tcp"&&r.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${r.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:r.family,address:r.host,port:r.port}}isThinWaistAddress(){return!(_e(this,ye).length!==2||_e(this,ye)[0].code!==Bv&&_e(this,ye)[0].code!==va||_e(this,ye)[1].code!==ol&&_e(this,ye)[1].code!==xv)}[(x0=sS,UY)](){return`Multiaddr(${this.toString()})`}};ye=new WeakMap,$o=new WeakMap,jo=new WeakMap;let Vv=To;function VY(e){e.getComponents().forEach(r=>{var n;const t=yr.getProtocol(r.code);r.value!=null&&((n=t.validate)==null||n.call(t,r.value))})}const WY=new Map;function il(e){return!!(e!=null&&e[sS])}function ct(e){return new Vv(e)}const zY=["string","number","bigint","symbol"],HY=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function qY(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";const r=typeof e;if(zY.includes(r))return r;if(r==="function")return"Function";if(Array.isArray(e))return"Array";if(GY(e))return"Buffer";const t=KY(e);return t||"Object"}function GY(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function KY(e){const r=Object.prototype.toString.call(e).slice(8,-1);if(HY.includes(r))return r}class O{constructor(r,t,n){this.major=r,this.majorEncoded=r<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(r){return this.major<r.major?-1:this.major>r.major?1:0}}O.uint=new O(0,"uint",!0);O.negint=new O(1,"negint",!0);O.bytes=new O(2,"bytes",!0);O.string=new O(3,"string",!0);O.array=new O(4,"array",!1);O.map=new O(5,"map",!1);O.tag=new O(6,"tag",!1);O.float=new O(7,"float",!0);O.false=new O(7,"false",!0);O.true=new O(7,"true",!0);O.null=new O(7,"null",!0);O.undefined=new O(7,"undefined",!0);O.break=new O(7,"break",!0);class ${constructor(r,t,n){this.type=r,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const Ri=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",YY=new TextDecoder,ZY=new TextEncoder;function al(e){return Ri&&globalThis.Buffer.isBuffer(e)}function Ty(e){return e instanceof Uint8Array?al(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const QY=Ri?(e,r,t)=>t-r>64?globalThis.Buffer.from(e.subarray(r,t)).toString("utf8"):e0(e,r,t):(e,r,t)=>t-r>64?YY.decode(e.subarray(r,t)):e0(e,r,t),cS=Ri?e=>e.length>64?globalThis.Buffer.from(e):Jg(e):e=>e.length>64?ZY.encode(e):Jg(e),ar=e=>Uint8Array.from(e),Py=Ri?(e,r,t)=>al(e)?new Uint8Array(e.subarray(r,t)):e.slice(r,t):(e,r,t)=>e.slice(r,t),XY=Ri?(e,r)=>(e=e.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),Ty(globalThis.Buffer.concat(e,r))):(e,r)=>{const t=new Uint8Array(r);let n=0;for(let o of e)n+o.length>t.length&&(o=o.subarray(0,t.length-n)),t.set(o,n),n+=o.length;return t},JY=Ri?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function eZ(e,r){if(al(e)&&al(r))return e.compare(r);for(let t=0;t<e.length;t++)if(e[t]!==r[t])return e[t]<r[t]?-1:1;return 0}function Jg(e){const r=[];let t=0;for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);o<128?r[t++]=o:o<2048?(r[t++]=o>>6|192,r[t++]=o&63|128):(o&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++n)&1023),r[t++]=o>>18|240,r[t++]=o>>12&63|128,r[t++]=o>>6&63|128,r[t++]=o&63|128):(r[t++]=o>>12|224,r[t++]=o>>6&63|128,r[t++]=o&63|128)}return r}function e0(e,r,t){const n=[];for(;r<t;){const o=e[r];let i=null,a=o>239?4:o>223?3:o>191?2:1;if(r+a<=t){let s,c,u,l;switch(a){case 1:o<128&&(i=o);break;case 2:s=e[r+1],(s&192)===128&&(l=(o&31)<<6|s&63,l>127&&(i=l));break;case 3:s=e[r+1],c=e[r+2],(s&192)===128&&(c&192)===128&&(l=(o&15)<<12|(s&63)<<6|c&63,l>2047&&(l<55296||l>57343)&&(i=l));break;case 4:s=e[r+1],c=e[r+2],u=e[r+3],(s&192)===128&&(c&192)===128&&(u&192)===128&&(l=(o&15)<<18|(s&63)<<12|(c&63)<<6|u&63,l>65535&&l<1114112&&(i=l))}}i===null?(i=65533,a=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|i&1023),n.push(i),r+=a}return lS(n)}const t0=4096;function lS(e){const r=e.length;if(r<=t0)return String.fromCharCode.apply(String,e);let t="",n=0;for(;n<r;)t+=String.fromCharCode.apply(String,e.slice(n,n+=t0));return t}const tZ=256;class fS{constructor(r=tZ){this.chunkSize=r,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(r){let t=this.chunks[this.chunks.length-1];if(this.cursor+r.length<=this.maxCursor+1){const o=t.length-(this.maxCursor-this.cursor)-1;t.set(r,o)}else{if(t){const o=t.length-(this.maxCursor-this.cursor)-1;o<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,o),this.maxCursor=this.cursor-1)}r.length<64&&r.length<this.chunkSize?(t=JY(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(r,0)):(this.chunks.push(r),this.maxCursor+=r.length)}this.cursor+=r.length}toBytes(r=!1){let t;if(this.chunks.length===1){const n=this.chunks[0];r&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=Py(n,0,this.cursor)}else t=XY(this.chunks,this.cursor);return r&&this.reset(),t}}const z="CBOR decode error:",jn="CBOR encode error:";function $i(e,r,t){if(e.length-r<t)throw new Error(`${z} not enough data for type`)}const Ve=[24,256,65536,4294967296,BigInt("18446744073709551616")];function io(e,r,t){$i(e,r,1);const n=e[r];if(t.strict===!0&&n<Ve[0])throw new Error(`${z} integer encoded in more bytes than necessary (strict decode)`);return n}function ao(e,r,t){$i(e,r,2);const n=e[r]<<8|e[r+1];if(t.strict===!0&&n<Ve[1])throw new Error(`${z} integer encoded in more bytes than necessary (strict decode)`);return n}function uo(e,r,t){$i(e,r,4);const n=e[r]*16777216+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3];if(t.strict===!0&&n<Ve[2])throw new Error(`${z} integer encoded in more bytes than necessary (strict decode)`);return n}function so(e,r,t){$i(e,r,8);const n=e[r]*16777216+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3],o=e[r+4]*16777216+(e[r+5]<<16)+(e[r+6]<<8)+e[r+7],i=(BigInt(n)<<BigInt(32))+BigInt(o);if(t.strict===!0&&i<Ve[3])throw new Error(`${z} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(t.allowBigInt===!0)return i;throw new Error(`${z} integers outside of the safe integer range are not supported`)}function rZ(e,r,t,n){return new $(O.uint,io(e,r+1,n),2)}function nZ(e,r,t,n){return new $(O.uint,ao(e,r+1,n),3)}function oZ(e,r,t,n){return new $(O.uint,uo(e,r+1,n),5)}function iZ(e,r,t,n){return new $(O.uint,so(e,r+1,n),9)}function co(e,r){return Ct(e,0,r.value)}function Ct(e,r,t){if(t<Ve[0]){const n=Number(t);e.push([r|n])}else if(t<Ve[1]){const n=Number(t);e.push([r|24,n])}else if(t<Ve[2]){const n=Number(t);e.push([r|25,n>>>8,n&255])}else if(t<Ve[3]){const n=Number(t);e.push([r|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{const n=BigInt(t);if(n<Ve[4]){const o=[r|27,0,0,0,0,0,0,0];let i=Number(n&BigInt(4294967295)),a=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=i&255,i=i>>8,o[7]=i&255,i=i>>8,o[6]=i&255,i=i>>8,o[5]=i&255,o[4]=a&255,a=a>>8,o[3]=a&255,a=a>>8,o[2]=a&255,a=a>>8,o[1]=a&255,e.push(o)}else throw new Error(`${z} encountered BigInt larger than allowable range`)}}co.encodedSize=function(r){return Ct.encodedSize(r.value)};Ct.encodedSize=function(r){return r<Ve[0]?1:r<Ve[1]?2:r<Ve[2]?3:r<Ve[3]?5:9};co.compareTokens=function(r,t){return r.value<t.value?-1:r.value>t.value?1:0};function aZ(e,r,t,n){return new $(O.negint,-1-io(e,r+1,n),2)}function uZ(e,r,t,n){return new $(O.negint,-1-ao(e,r+1,n),3)}function sZ(e,r,t,n){return new $(O.negint,-1-uo(e,r+1,n),5)}const Cy=BigInt(-1),dS=BigInt(1);function cZ(e,r,t,n){const o=so(e,r+1,n);if(typeof o!="bigint"){const i=-1-o;if(i>=Number.MIN_SAFE_INTEGER)return new $(O.negint,i,9)}if(n.allowBigInt!==!0)throw new Error(`${z} integers outside of the safe integer range are not supported`);return new $(O.negint,Cy-BigInt(o),9)}function Ay(e,r){const t=r.value,n=typeof t=="bigint"?t*Cy-dS:t*-1-1;Ct(e,r.type.majorEncoded,n)}Ay.encodedSize=function(r){const t=r.value,n=typeof t=="bigint"?t*Cy-dS:t*-1-1;return n<Ve[0]?1:n<Ve[1]?2:n<Ve[2]?3:n<Ve[3]?5:9};Ay.compareTokens=function(r,t){return r.value<t.value?1:r.value>t.value?-1:0};function Gs(e,r,t,n){$i(e,r,t+n);const o=Py(e,r+t,r+t+n);return new $(O.bytes,o,t+n)}function lZ(e,r,t,n){return Gs(e,r,1,t)}function fZ(e,r,t,n){return Gs(e,r,2,io(e,r+1,n))}function dZ(e,r,t,n){return Gs(e,r,3,ao(e,r+1,n))}function hZ(e,r,t,n){return Gs(e,r,5,uo(e,r+1,n))}function pZ(e,r,t,n){const o=so(e,r+1,n);if(typeof o=="bigint")throw new Error(`${z} 64-bit integer bytes lengths not supported`);return Gs(e,r,9,o)}function ul(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===O.string?cS(e.value):e.value),e.encodedBytes}function Pd(e,r){const t=ul(r);Ct(e,r.type.majorEncoded,t.length),e.push(t)}Pd.encodedSize=function(r){const t=ul(r);return Ct.encodedSize(t.length)+t.length};Pd.compareTokens=function(r,t){return vZ(ul(r),ul(t))};function vZ(e,r){return e.length<r.length?-1:e.length>r.length?1:eZ(e,r)}function Ks(e,r,t,n,o){const i=t+n;$i(e,r,i);const a=new $(O.string,QY(e,r+t,r+i),i);return o.retainStringBytes===!0&&(a.byteValue=Py(e,r+t,r+i)),a}function _Z(e,r,t,n){return Ks(e,r,1,t,n)}function yZ(e,r,t,n){return Ks(e,r,2,io(e,r+1,n),n)}function bZ(e,r,t,n){return Ks(e,r,3,ao(e,r+1,n),n)}function mZ(e,r,t,n){return Ks(e,r,5,uo(e,r+1,n),n)}function gZ(e,r,t,n){const o=so(e,r+1,n);if(typeof o=="bigint")throw new Error(`${z} 64-bit integer string lengths not supported`);return Ks(e,r,9,o,n)}const wZ=Pd;function ji(e,r,t,n){return new $(O.array,n,t)}function OZ(e,r,t,n){return ji(e,r,1,t)}function EZ(e,r,t,n){return ji(e,r,2,io(e,r+1,n))}function SZ(e,r,t,n){return ji(e,r,3,ao(e,r+1,n))}function TZ(e,r,t,n){return ji(e,r,5,uo(e,r+1,n))}function PZ(e,r,t,n){const o=so(e,r+1,n);if(typeof o=="bigint")throw new Error(`${z} 64-bit integer array lengths not supported`);return ji(e,r,9,o)}function CZ(e,r,t,n){if(n.allowIndefinite===!1)throw new Error(`${z} indefinite length items not allowed`);return ji(e,r,1,1/0)}function Iy(e,r){Ct(e,O.array.majorEncoded,r.value)}Iy.compareTokens=co.compareTokens;Iy.encodedSize=function(r){return Ct.encodedSize(r.value)};function Ni(e,r,t,n){return new $(O.map,n,t)}function AZ(e,r,t,n){return Ni(e,r,1,t)}function IZ(e,r,t,n){return Ni(e,r,2,io(e,r+1,n))}function RZ(e,r,t,n){return Ni(e,r,3,ao(e,r+1,n))}function $Z(e,r,t,n){return Ni(e,r,5,uo(e,r+1,n))}function jZ(e,r,t,n){const o=so(e,r+1,n);if(typeof o=="bigint")throw new Error(`${z} 64-bit integer map lengths not supported`);return Ni(e,r,9,o)}function NZ(e,r,t,n){if(n.allowIndefinite===!1)throw new Error(`${z} indefinite length items not allowed`);return Ni(e,r,1,1/0)}function Ry(e,r){Ct(e,O.map.majorEncoded,r.value)}Ry.compareTokens=co.compareTokens;Ry.encodedSize=function(r){return Ct.encodedSize(r.value)};function kZ(e,r,t,n){return new $(O.tag,t,1)}function MZ(e,r,t,n){return new $(O.tag,io(e,r+1,n),2)}function DZ(e,r,t,n){return new $(O.tag,ao(e,r+1,n),3)}function LZ(e,r,t,n){return new $(O.tag,uo(e,r+1,n),5)}function UZ(e,r,t,n){return new $(O.tag,so(e,r+1,n),9)}function $y(e,r){Ct(e,O.tag.majorEncoded,r.value)}$y.compareTokens=co.compareTokens;$y.encodedSize=function(r){return Ct.encodedSize(r.value)};const FZ=20,BZ=21,xZ=22,VZ=23;function WZ(e,r,t,n){if(n.allowUndefined===!1)throw new Error(`${z} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new $(O.null,null,1):new $(O.undefined,void 0,1)}function zZ(e,r,t,n){if(n.allowIndefinite===!1)throw new Error(`${z} indefinite length items not allowed`);return new $(O.break,void 0,1)}function jy(e,r,t){if(t){if(t.allowNaN===!1&&Number.isNaN(e))throw new Error(`${z} NaN values are not supported`);if(t.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${z} Infinity values are not supported`)}return new $(O.float,e,r)}function HZ(e,r,t,n){return jy(ky(e,r+1),3,n)}function qZ(e,r,t,n){return jy(My(e,r+1),5,n)}function GZ(e,r,t,n){return jy(_S(e,r+1),9,n)}function Ny(e,r,t){const n=r.value;if(n===!1)e.push([O.float.majorEncoded|FZ]);else if(n===!0)e.push([O.float.majorEncoded|BZ]);else if(n===null)e.push([O.float.majorEncoded|xZ]);else if(n===void 0)e.push([O.float.majorEncoded|VZ]);else{let o,i=!1;(!t||t.float64!==!0)&&(pS(n),o=ky(Mt,1),n===o||Number.isNaN(n)?(Mt[0]=249,e.push(Mt.slice(0,3)),i=!0):(vS(n),o=My(Mt,1),n===o&&(Mt[0]=250,e.push(Mt.slice(0,5)),i=!0))),i||(KZ(n),o=_S(Mt,1),Mt[0]=251,e.push(Mt.slice(0,9)))}}Ny.encodedSize=function(r,t){const n=r.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){pS(n);let o=ky(Mt,1);if(n===o||Number.isNaN(n))return 3;if(vS(n),o=My(Mt,1),n===o)return 5}return 9};const hS=new ArrayBuffer(9),Ot=new DataView(hS,1),Mt=new Uint8Array(hS,0);function pS(e){if(e===1/0)Ot.setUint16(0,31744,!1);else if(e===-1/0)Ot.setUint16(0,64512,!1);else if(Number.isNaN(e))Ot.setUint16(0,32256,!1);else{Ot.setFloat32(0,e);const r=Ot.getUint32(0),t=(r&2139095040)>>23,n=r&8388607;if(t===255)Ot.setUint16(0,31744,!1);else if(t===0)Ot.setUint16(0,(e&2147483648)>>16|n>>13,!1);else{const o=t-127;o<-24?Ot.setUint16(0,0):o<-14?Ot.setUint16(0,(r&2147483648)>>16|1<<24+o,!1):Ot.setUint16(0,(r&2147483648)>>16|o+15<<10|n>>13,!1)}}}function ky(e,r){if(e.length-r<2)throw new Error(`${z} not enough data for float16`);const t=(e[r]<<8)+e[r+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;const n=t>>10&31,o=t&1023;let i;return n===0?i=o*2**-24:n!==31?i=(o+1024)*2**(n-25):i=o===0?1/0:NaN,t&32768?-i:i}function vS(e){Ot.setFloat32(0,e,!1)}function My(e,r){if(e.length-r<4)throw new Error(`${z} not enough data for float32`);const t=(e.byteOffset||0)+r;return new DataView(e.buffer,t,4).getFloat32(0,!1)}function KZ(e){Ot.setFloat64(0,e,!1)}function _S(e,r){if(e.length-r<8)throw new Error(`${z} not enough data for float64`);const t=(e.byteOffset||0)+r;return new DataView(e.buffer,t,8).getFloat64(0,!1)}Ny.compareTokens=co.compareTokens;function se(e,r,t){throw new Error(`${z} encountered invalid minor (${t}) for major ${e[r]>>>5}`)}function Cd(e){return()=>{throw new Error(`${z} ${e}`)}}const j=[];for(let e=0;e<=23;e++)j[e]=se;j[24]=rZ;j[25]=nZ;j[26]=oZ;j[27]=iZ;j[28]=se;j[29]=se;j[30]=se;j[31]=se;for(let e=32;e<=55;e++)j[e]=se;j[56]=aZ;j[57]=uZ;j[58]=sZ;j[59]=cZ;j[60]=se;j[61]=se;j[62]=se;j[63]=se;for(let e=64;e<=87;e++)j[e]=lZ;j[88]=fZ;j[89]=dZ;j[90]=hZ;j[91]=pZ;j[92]=se;j[93]=se;j[94]=se;j[95]=Cd("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)j[e]=_Z;j[120]=yZ;j[121]=bZ;j[122]=mZ;j[123]=gZ;j[124]=se;j[125]=se;j[126]=se;j[127]=Cd("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)j[e]=OZ;j[152]=EZ;j[153]=SZ;j[154]=TZ;j[155]=PZ;j[156]=se;j[157]=se;j[158]=se;j[159]=CZ;for(let e=160;e<=183;e++)j[e]=AZ;j[184]=IZ;j[185]=RZ;j[186]=$Z;j[187]=jZ;j[188]=se;j[189]=se;j[190]=se;j[191]=NZ;for(let e=192;e<=215;e++)j[e]=kZ;j[216]=MZ;j[217]=DZ;j[218]=LZ;j[219]=UZ;j[220]=se;j[221]=se;j[222]=se;j[223]=se;for(let e=224;e<=243;e++)j[e]=Cd("simple values are not supported");j[244]=se;j[245]=se;j[246]=se;j[247]=WZ;j[248]=Cd("simple values are not supported");j[249]=HZ;j[250]=qZ;j[251]=GZ;j[252]=se;j[253]=se;j[254]=se;j[255]=zZ;const or=[];for(let e=0;e<24;e++)or[e]=new $(O.uint,e,1);for(let e=-1;e>=-24;e--)or[31-e]=new $(O.negint,e,1);or[64]=new $(O.bytes,new Uint8Array(0),1);or[96]=new $(O.string,"",1);or[128]=new $(O.array,0,1);or[160]=new $(O.map,0,1);or[244]=new $(O.false,!1,1);or[245]=new $(O.true,!0,1);or[246]=new $(O.null,null,1);function YZ(e){switch(e.type){case O.false:return ar([244]);case O.true:return ar([245]);case O.null:return ar([246]);case O.bytes:return e.value.length?void 0:ar([64]);case O.string:return e.value===""?ar([96]):void 0;case O.array:return e.value===0?ar([128]):void 0;case O.map:return e.value===0?ar([160]):void 0;case O.uint:return e.value<24?ar([Number(e.value)]):void 0;case O.negint:if(e.value>=-24)return ar([31-Number(e.value)])}}const ZZ={float64:!1,mapSorter:JZ,quickEncodeToken:YZ};function QZ(){const e=[];return e[O.uint.major]=co,e[O.negint.major]=Ay,e[O.bytes.major]=Pd,e[O.string.major]=wZ,e[O.array.major]=Iy,e[O.map.major]=Ry,e[O.tag.major]=$y,e[O.float.major]=Ny,e}const yS=QZ(),kp=new fS;class sl{constructor(r,t){this.obj=r,this.parent=t}includes(r){let t=this;do if(t.obj===r)return!0;while(t=t.parent);return!1}static createCheck(r,t){if(r&&r.includes(t))throw new Error(`${jn} object contains circular references`);return new sl(t,r)}}const $r={null:new $(O.null,null),undefined:new $(O.undefined,void 0),true:new $(O.true,!0),false:new $(O.false,!1),emptyArray:new $(O.array,0),emptyMap:new $(O.map,0)},Gr={number(e,r,t,n){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new $(O.float,e):e>=0?new $(O.uint,e):new $(O.negint,e)},bigint(e,r,t,n){return e>=BigInt(0)?new $(O.uint,e):new $(O.negint,e)},Uint8Array(e,r,t,n){return new $(O.bytes,e)},string(e,r,t,n){return new $(O.string,e)},boolean(e,r,t,n){return e?$r.true:$r.false},null(e,r,t,n){return $r.null},undefined(e,r,t,n){return $r.undefined},ArrayBuffer(e,r,t,n){return new $(O.bytes,new Uint8Array(e))},DataView(e,r,t,n){return new $(O.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,r,t,n){if(!e.length)return t.addBreakTokens===!0?[$r.emptyArray,new $(O.break)]:$r.emptyArray;n=sl.createCheck(n,e);const o=[];let i=0;for(const a of e)o[i++]=Nc(a,t,n);return t.addBreakTokens?[new $(O.array,e.length),o,new $(O.break)]:[new $(O.array,e.length),o]},Object(e,r,t,n){const o=r!=="Object",i=o?e.keys():Object.keys(e),a=o?e.size:i.length;if(!a)return t.addBreakTokens===!0?[$r.emptyMap,new $(O.break)]:$r.emptyMap;n=sl.createCheck(n,e);const s=[];let c=0;for(const u of i)s[c++]=[Nc(u,t,n),Nc(o?e.get(u):e[u],t,n)];return XZ(s,t),t.addBreakTokens?[new $(O.map,a),s,new $(O.break)]:[new $(O.map,a),s]}};Gr.Map=Gr.Object;Gr.Buffer=Gr.Uint8Array;for(const e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Gr[`${e}Array`]=Gr.DataView;function Nc(e,r={},t){const n=qY(e),o=r&&r.typeEncoders&&r.typeEncoders[n]||Gr[n];if(typeof o=="function"){const a=o(e,n,r,t);if(a!=null)return a}const i=Gr[n];if(!i)throw new Error(`${jn} unsupported type: ${n}`);return i(e,n,r,t)}function XZ(e,r){r.mapSorter&&e.sort(r.mapSorter)}function JZ(e,r){const t=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(r[0])?r[0][0]:r[0];if(t.type!==n.type)return t.type.compare(n.type);const o=t.type.major,i=yS[o].compareTokens(t,n);return i===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),i}function bS(e,r,t,n){if(Array.isArray(r))for(const o of r)bS(e,o,t,n);else t[r.type.major](e,r,n)}function mS(e,r,t){const n=Nc(e,t);if(!Array.isArray(n)&&t.quickEncodeToken){const o=t.quickEncodeToken(n);if(o)return o;const i=r[n.type.major];if(i.encodedSize){const a=i.encodedSize(n,t),s=new fS(a);if(i(s,n,t),s.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return Ty(s.chunks[0])}}return kp.reset(),bS(kp,n,r,t),kp.toBytes(!0)}function eQ(e,r){return r=Object.assign({},ZZ,r),mS(e,yS,r)}const tQ={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class rQ{constructor(r,t={}){this._pos=0,this.data=r,this.options=t}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const r=this.data[this._pos];let t=or[r];if(t===void 0){const n=j[r];if(!n)throw new Error(`${z} no decoder for major type ${r>>>5} (byte 0x${r.toString(16).padStart(2,"0")})`);const o=r&31;t=n(this.data,this._pos,o,this.options)}return this._pos+=t.encodedLength,t}}const Aa=Symbol.for("DONE"),Ad=Symbol.for("BREAK");function nQ(e,r,t){const n=[];for(let o=0;o<e.value;o++){const i=Ia(r,t);if(i===Ad){if(e.value===1/0)break;throw new Error(`${z} got unexpected break to lengthed array`)}if(i===Aa)throw new Error(`${z} found array but not enough entries (got ${o}, expected ${e.value})`);n[o]=i}return n}function oQ(e,r,t){const n=t.useMaps===!0,o=n?void 0:{},i=n?new Map:void 0;for(let a=0;a<e.value;a++){const s=Ia(r,t);if(s===Ad){if(e.value===1/0)break;throw new Error(`${z} got unexpected break to lengthed map`)}if(s===Aa)throw new Error(`${z} found map but not enough entries (got ${a} [no key], expected ${e.value})`);if(n!==!0&&typeof s!="string")throw new Error(`${z} non-string keys not supported (got ${typeof s})`);if(t.rejectDuplicateMapKeys===!0&&(n&&i.has(s)||!n&&s in o))throw new Error(`${z} found repeat map key "${s}"`);const c=Ia(r,t);if(c===Aa)throw new Error(`${z} found map but not enough entries (got ${a} [no value], expected ${e.value})`);n?i.set(s,c):o[s]=c}return n?i:o}function Ia(e,r){if(e.done())return Aa;const t=e.next();if(t.type===O.break)return Ad;if(t.type.terminal)return t.value;if(t.type===O.array)return nQ(t,e,r);if(t.type===O.map)return oQ(t,e,r);if(t.type===O.tag){if(r.tags&&typeof r.tags[t.value]=="function"){const n=Ia(e,r);return r.tags[t.value](n)}throw new Error(`${z} tag not supported (${t.value})`)}throw new Error("unsupported")}function iQ(e,r){if(!(e instanceof Uint8Array))throw new Error(`${z} data to decode must be a Uint8Array`);r=Object.assign({},tQ,r);const t=r.tokenizer||new rQ(e,r),n=Ia(t,r);if(n===Aa)throw new Error(`${z} did not find any content to decode`);if(n===Ad)throw new Error(`${z} got unexpected break`);return[n,e.subarray(t.pos())]}function gS(e,r){const[t,n]=iQ(e,r);if(n.length>0)throw new Error(`${z} too many terminals, data makes no sense`);return t}const wS=42;function OS(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function aQ(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const r=G.asCID(e);if(!r)return null;const t=new Uint8Array(r.bytes.byteLength+1);return t.set(r.bytes,1),[new $(O.tag,wS),new $(O.bytes,t)]}function uQ(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function sQ(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const Wv={float64:!0,typeEncoders:{Object:aQ,undefined:uQ,number:sQ}},cQ={...Wv,typeEncoders:{...Wv.typeEncoders}};function lQ(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return G.decode(e.subarray(1))}const cl={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};cl.tags[wS]=lQ;const fQ={...cl,tags:cl.tags.slice()},dQ="dag-cbor",hQ=113,ES=e=>eQ(e,Wv),SS=e=>gS(OS(e),cl),pQ=Object.freeze(Object.defineProperty({__proto__:null,code:hQ,decode:SS,decodeOptions:fQ,encode:ES,encodeOptions:cQ,name:dQ,toByteView:OS},Symbol.toStringTag,{value:"Module"}));class vQ extends Array{constructor(){super(),this.inRecursive=[]}prefix(r){const t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===O.array&&(t.elements++,t.elements!==1&&r.push([44])),t.type===O.map&&(t.elements++,t.elements!==1&&(t.elements%2===1?r.push([44]):r.push([58]))))}[O.uint.major](r,t){this.prefix(r);const n=String(t.value),o=[];for(let i=0;i<n.length;i++)o[i]=n.charCodeAt(i);r.push(o)}[O.negint.major](r,t){this[O.uint.major](r,t)}[O.bytes.major](r,t){throw new Error(`${jn} unsupported type: Uint8Array`)}[O.string.major](r,t){this.prefix(r);const n=cS(JSON.stringify(t.value));r.push(n.length>32?Ty(n):n)}[O.array.major](r,t){this.prefix(r),this.inRecursive.push({type:O.array,elements:0}),r.push([91])}[O.map.major](r,t){this.prefix(r),this.inRecursive.push({type:O.map,elements:0}),r.push([123])}[O.tag.major](r,t){}[O.float.major](r,t){if(t.type.name==="break"){const a=this.inRecursive.pop();if(a){if(a.type===O.array)r.push([93]);else if(a.type===O.map)r.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(t.value===void 0)throw new Error(`${jn} unsupported type: undefined`);if(this.prefix(r),t.type.name==="true"){r.push([116,114,117,101]);return}else if(t.type.name==="false"){r.push([102,97,108,115,101]);return}else if(t.type.name==="null"){r.push([110,117,108,108]);return}const n=String(t.value),o=[];let i=!1;for(let a=0;a<n.length;a++)o[a]=n.charCodeAt(a),!i&&(o[a]===46||o[a]===101||o[a]===69)&&(i=!0);i||(o.push(46),o.push(48)),r.push(o)}}function _Q(e,r){if(Array.isArray(e[0])||Array.isArray(r[0]))throw new Error(`${jn} complex map keys are not supported`);const t=e[0],n=r[0];if(t.type!==O.string||n.type!==O.string)throw new Error(`${jn} non-string map keys are not supported`);if(t<n)return-1;if(t>n)return 1;throw new Error(`${jn} unexpected duplicate map keys, this is not supported`)}const yQ={addBreakTokens:!0,mapSorter:_Q};function bQ(e,r){return r=Object.assign({},yQ,r),mS(e,new vQ,r)}class TS{constructor(r,t={}){this._pos=0,this.data=r,this.options=t,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let r=this.ch();for(;r===32||r===9||r===13||r===10;)r=this.data[++this._pos]}expect(r){if(this.data.length-this._pos<r.length)throw new Error(`${z} unexpected end of input at position ${this._pos}`);for(let t=0;t<r.length;t++)if(this.data[this._pos++]!==r[t])throw new Error(`${z} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...r)}'`)}parseNumber(){const r=this._pos;let t=!1,n=!1;const o=s=>{for(;!this.done();){const c=this.ch();if(s.includes(c))this._pos++;else break}};if(this.ch()===45&&(t=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,n=!0;else return new $(O.uint,0,this._pos-r);if(o([48,49,50,51,52,53,54,55,56,57]),t&&this._pos===r+1)throw new Error(`${z} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${z} unexpected token at position ${this._pos}`);n=!0,this._pos++,o([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,o([48,49,50,51,52,53,54,55,56,57]));const i=String.fromCharCode.apply(null,this.data.subarray(r,this._pos)),a=parseFloat(i);return n?new $(O.float,a,this._pos-r):this.options.allowBigInt!==!0||Number.isSafeInteger(a)?new $(a>=0?O.uint:O.negint,a,this._pos-r):new $(a>=0?O.uint:O.negint,BigInt(i),this._pos-r)}parseString(){if(this.ch()!==34)throw new Error(`${z} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let i=this._pos,a=0;i<this.data.length&&a<65536;i++,a++){const s=this.data[i];if(s===92||s<32||s>=128)break;if(s===34){const c=String.fromCharCode.apply(null,this.data.subarray(this._pos,i));return this._pos=i+1,new $(O.string,c,a)}}const r=this._pos,t=[],n=()=>{if(this._pos+4>=this.data.length)throw new Error(`${z} unexpected end of unicode escape sequence at position ${this._pos}`);let i=0;for(let a=0;a<4;a++){let s=this.ch();if(s>=48&&s<=57)s-=48;else if(s>=97&&s<=102)s=s-97+10;else if(s>=65&&s<=70)s=s-65+10;else throw new Error(`${z} unexpected unicode escape character at position ${this._pos}`);i=i*16+s,this._pos++}return i},o=()=>{const i=this.ch();let a=null,s=i>239?4:i>223?3:i>191?2:1;if(this._pos+s>this.data.length)throw new Error(`${z} unexpected unicode sequence at position ${this._pos}`);let c,u,l,d;switch(s){case 1:i<128&&(a=i);break;case 2:c=this.data[this._pos+1],(c&192)===128&&(d=(i&31)<<6|c&63,d>127&&(a=d));break;case 3:c=this.data[this._pos+1],u=this.data[this._pos+2],(c&192)===128&&(u&192)===128&&(d=(i&15)<<12|(c&63)<<6|u&63,d>2047&&(d<55296||d>57343)&&(a=d));break;case 4:c=this.data[this._pos+1],u=this.data[this._pos+2],l=this.data[this._pos+3],(c&192)===128&&(u&192)===128&&(l&192)===128&&(d=(i&15)<<18|(c&63)<<12|(u&63)<<6|l&63,d>65535&&d<1114112&&(a=d))}a===null?(a=65533,s=1):a>65535&&(a-=65536,t.push(a>>>10&1023|55296),a=56320|a&1023),t.push(a),this._pos+=s};for(;!this.done();){const i=this.ch();let a;switch(i){case 92:if(this._pos++,this.done())throw new Error(`${z} unexpected string termination at position ${this._pos}`);switch(a=this.ch(),this._pos++,a){case 34:case 39:case 92:case 47:t.push(a);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(n());break;default:throw new Error(`${z} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new $(O.string,lS(t),this._pos-r);default:if(i<32)throw new Error(`${z} invalid control character at position ${this._pos}`);i<128?(t.push(i),this._pos++):o()}}throw new Error(`${z} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new $(O.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new $(O.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new $(O.null,null,4);case 102:return this.expect([102,97,108,115,101]),new $(O.false,!1,5);case 116:return this.expect([116,114,117,101]),new $(O.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${z} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new $(O.break,void 0,1);if(this.ch()!==44)throw new Error(`${z} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new $(O.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new $(O.break,void 0,1);if(this.ch()!==44)throw new Error(`${z} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new $(O.break,void 0,1);const r=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${z} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),r}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${z} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}}function mQ(e,r){return r=Object.assign({tokenizer:new TS(e,r)},r),gS(e,r)}function gQ(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function wQ(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const r=G.asCID(e);if(!r)return null;const t=r.toString();return[new $(O.map,1/0,1),new $(O.string,"/",1),new $(O.string,t,t.length),new $(O.break,void 0,1)]}function ll(e){const r=Sd.encode(e).slice(1);return[new $(O.map,1/0,1),new $(O.string,"/",1),new $(O.map,1/0,1),new $(O.string,"bytes",5),new $(O.string,r,r.length),new $(O.break,void 0,1),new $(O.break,void 0,1)]}function It(e){return ll(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function OQ(e){return ll(new Uint8Array(e))}function EQ(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function SQ(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const TQ={typeEncoders:{Object:wQ,Buffer:ll,Uint8Array:ll,Int8Array:It,Uint16Array:It,Int16Array:It,Uint32Array:It,Int32Array:It,Float32Array:It,Float64Array:It,Uint8ClampedArray:It,BigInt64Array:It,BigUint64Array:It,DataView:It,ArrayBuffer:OQ,undefined:EQ,number:SQ}};class PQ extends TS{constructor(r,t){super(r,t),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const r=this._next();if(r.type===O.map){const t=this._next();if(t.type===O.string&&t.value==="/"){const n=this._next();if(n.type===O.string){if(this._next().type!==O.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new $(O.tag,42,0)}if(n.type===O.map){const o=this._next();if(o.type===O.string&&o.value==="bytes"){const i=this._next();if(i.type===O.string){for(let s=0;s<2;s++)if(this._next().type!==O.break)throw new Error("Invalid encoded Bytes form");const a=Sd.decode(`m${i.value}`);return new $(O.bytes,a,i.value.length)}this.tokenBuffer.push(i)}this.tokenBuffer.push(o)}this.tokenBuffer.push(n)}this.tokenBuffer.push(t)}return r}}const zv={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};zv.tags[42]=G.parse;const CQ="dag-json",AQ=297,PS=e=>bQ(e,TQ),CS=e=>{const r=gQ(e),t=Object.assign(zv,{tokenizer:new PQ(r,zv)});return mQ(r,t)},r0=e=>IQ.decode(PS(e)),IQ=new TextDecoder,RQ=e=>CS($Q.encode(e)),$Q=new TextEncoder,jQ=Object.freeze(Object.defineProperty({__proto__:null,code:AQ,decode:CS,encode:PS,format:r0,name:CQ,parse:RQ,stringify:r0},Symbol.toStringTag,{value:"Module"})),NQ=new TextDecoder;function Dy(e,r){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(r>=e.length)throw new Error("protobuf: unexpected end of data");const o=e[r++];if(t+=n<28?(o&127)<<n:(o&127)*2**n,o<128)break}return[t,r]}function fl(e,r){let t;[t,r]=Dy(e,r);const n=r+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(r,n),n]}function AS(e,r){let t;return[t,r]=Dy(e,r),[t&7,t>>3,r]}function kQ(e){const r={},t=e.length;let n=0;for(;n<t;){let o,i;if([o,i,n]=AS(e,n),i===1){if(r.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(r.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(r.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[r.Hash,n]=fl(e,n)}else if(i===2){if(r.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(r.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let a;[a,n]=fl(e,n),r.Name=NQ.decode(a)}else if(i===3){if(r.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[r.Tsize,n]=Dy(e,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${i}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return r}function MQ(e){const r=e.length;let t=0,n,o=!1,i;for(;t<r;){let s,c;if([s,c,t]=AS(e,t),s!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${s}`);if(c===1){if(i)throw new Error("protobuf: (PBNode) duplicate Data section");[i,t]=fl(e,t),n&&(o=!0)}else if(c===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let u;[u,t]=fl(e,t),n.push(kQ(u))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(t>r)throw new Error("protobuf: (PBNode) unexpected end of data");const a={};return i&&(a.Data=i),a.Links=n||[],a}const IS=new TextEncoder,n0=2**32,DQ=2**31;function LQ(e,r){let t=r.length;if(typeof e.Tsize=="number"){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");t=_a(r,t,e.Tsize)-1,r[t]=24}if(typeof e.Name=="string"){const n=IS.encode(e.Name);t-=n.length,r.set(n,t),t=_a(r,t,n.length)-1,r[t]=18}return e.Hash&&(t-=e.Hash.length,r.set(e.Hash,t),t=_a(r,t,e.Hash.length)-1,r[t]=10),r.length-t}function UQ(e){const r=BQ(e),t=new Uint8Array(r);let n=r;if(e.Data&&(n-=e.Data.length,t.set(e.Data,n),n=_a(t,n,e.Data.length)-1,t[n]=10),e.Links)for(let o=e.Links.length-1;o>=0;o--){const i=LQ(e.Links[o],t.subarray(0,n));n-=i,n=_a(t,n,i)-1,t[n]=18}return t}function FQ(e){let r=0;if(e.Hash){const t=e.Hash.length;r+=1+t+Ro(t)}if(typeof e.Name=="string"){const t=IS.encode(e.Name).length;r+=1+t+Ro(t)}return typeof e.Tsize=="number"&&(r+=1+Ro(e.Tsize)),r}function BQ(e){let r=0;if(e.Data){const t=e.Data.length;r+=1+t+Ro(t)}if(e.Links)for(const t of e.Links){const n=FQ(t);r+=1+n+Ro(n)}return r}function _a(e,r,t){r-=Ro(t);const n=r;for(;t>=DQ;)e[r++]=t&127|128,t/=128;for(;t>=128;)e[r++]=t&127|128,t>>>=7;return e[r]=t,n}function Ro(e){return e%2===0&&e++,Math.floor((xQ(e)+6)/7)}function xQ(e){let r=0;return e>=n0&&(e=Math.floor(e/n0),r=32),e>=65536&&(e>>>=16,r+=16),e>=256&&(e>>>=8,r+=8),r+VQ[e]}const VQ=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],WQ=["Data","Links"],zQ=["Hash","Name","Tsize"],Hv=new TextEncoder;function RS(e,r){if(e===r)return 0;const t=e.Name?Hv.encode(e.Name):[],n=r.Name?Hv.encode(r.Name):[];let o=t.length,i=n.length;for(let a=0,s=Math.min(o,i);a<s;++a)if(t[a]!==n[a]){o=t[a],i=n[a];break}return o<i?-1:i<o?1:0}function o0(e,r){return!Object.keys(e).some(t=>!r.includes(t))}function $S(e){if(typeof e.asCID=="object"){const t=G.asCID(e);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if(typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const r={};if(e.Hash){let t=G.asCID(e.Hash);try{t||(typeof e.Hash=="string"?t=G.parse(e.Hash):e.Hash instanceof Uint8Array&&(t=G.decode(e.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}t&&(r.Hash=t)}if(!r.Hash)throw new TypeError("Invalid DAG-PB form");return typeof e.Name=="string"&&(r.Name=e.Name),typeof e.Tsize=="number"&&(r.Tsize=e.Tsize),r}function jS(e){if((e instanceof Uint8Array||typeof e=="string")&&(e={Data:e}),typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const r={};if(e.Data!==void 0)if(typeof e.Data=="string")r.Data=Hv.encode(e.Data);else if(e.Data instanceof Uint8Array)r.Data=e.Data;else throw new TypeError("Invalid DAG-PB form");if(e.Links!==void 0)if(Array.isArray(e.Links))r.Links=e.Links.map($S),r.Links.sort(RS);else throw new TypeError("Invalid DAG-PB form");else r.Links=[];return r}function NS(e){if(!e||typeof e!="object"||Array.isArray(e)||e instanceof Uint8Array||e["/"]&&e["/"]===e.bytes)throw new TypeError("Invalid DAG-PB form");if(!o0(e,WQ))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(e.Data!==void 0&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let r=0;r<e.Links.length;r++){const t=e.Links[r];if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!o0(t,zQ))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(t.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash==null||!t.Hash["/"]||t.Hash["/"]!==t.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0){if(typeof t.Tsize!="number"||t.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(r>0&&RS(t,e.Links[r-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function HQ(e,r=[]){return jS({Data:e,Links:r})}function qQ(e,r,t){return $S({Hash:t,Name:e,Tsize:r})}function GQ(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}const KQ="dag-pb",YQ=112;function ZQ(e){NS(e);const r={};return e.Links&&(r.Links=e.Links.map(t=>{const n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),e.Data&&(r.Data=e.Data),UQ(r)}function QQ(e){const r=GQ(e),t=MQ(r),n={};return t.Data&&(n.Data=t.Data),t.Links&&(n.Links=t.Links.map(o=>{const i={};try{i.Hash=G.decode(o.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return o.Name!==void 0&&(i.Name=o.Name),o.Tsize!==void 0&&(i.Tsize=o.Tsize),i})),n}const XQ=Object.freeze(Object.defineProperty({__proto__:null,code:YQ,createLink:qQ,createNode:HQ,decode:QQ,encode:ZQ,name:KQ,prepare:jS,validate:NS},Symbol.toStringTag,{value:"Module"}));function JQ(e,r){if(e===r)return!0;if(e.byteLength!==r.byteLength)return!1;for(let t=0;t<e.byteLength;t++)if(e[t]!==r[t])return!1;return!0}function Ly(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function eX(e,r){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),a=i.charCodeAt(0);if(t[a]!==255)throw new TypeError(i+" is ambiguous");t[a]=o}var s=e.length,c=e.charAt(0),u=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function d(v){if(v instanceof Uint8Array||(ArrayBuffer.isView(v)?v=new Uint8Array(v.buffer,v.byteOffset,v.byteLength):Array.isArray(v)&&(v=Uint8Array.from(v))),!(v instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(v.length===0)return"";for(var y=0,_=0,b=0,w=v.length;b!==w&&v[b]===0;)b++,y++;for(var S=(w-b)*l+1>>>0,E=new Uint8Array(S);b!==w;){for(var T=v[b],C=0,P=S-1;(T!==0||C<_)&&P!==-1;P--,C++)T+=256*E[P]>>>0,E[P]=T%s>>>0,T=T/s>>>0;if(T!==0)throw new Error("Non-zero carry");_=C,b++}for(var I=S-_;I!==S&&E[I]===0;)I++;for(var M=c.repeat(y);I<S;++I)M+=e.charAt(E[I]);return M}function h(v){if(typeof v!="string")throw new TypeError("Expected String");if(v.length===0)return new Uint8Array;var y=0;if(v[y]!==" "){for(var _=0,b=0;v[y]===c;)_++,y++;for(var w=(v.length-y)*u+1>>>0,S=new Uint8Array(w);v[y];){var E=t[v.charCodeAt(y)];if(E===255)return;for(var T=0,C=w-1;(E!==0||T<b)&&C!==-1;C--,T++)E+=s*S[C]>>>0,S[C]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");b=T,y++}if(v[y]!==" "){for(var P=w-b;P!==w&&S[P]===0;)P++;for(var I=new Uint8Array(_+(w-P)),M=_;P!==w;)I[M++]=S[P++];return I}}}function p(v){var y=h(v);if(y)return y;throw new Error(`Non-${r} character`)}return{encode:d,decodeUnsafe:h,decode:p}}var tX=eX,rX=tX;class nX{constructor(r,t,n){g(this,"name");g(this,"prefix");g(this,"baseEncode");this.name=r,this.prefix=t,this.baseEncode=n}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}}class oX{constructor(r,t,n){g(this,"name");g(this,"prefix");g(this,"baseDecode");g(this,"prefixCodePoint");if(this.name=r,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return kS(this,r)}}class iX{constructor(r){g(this,"decoders");this.decoders=r}or(r){return kS(this,r)}decode(r){const t=r[0],n=this.decoders[t];if(n!=null)return n.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function kS(e,r){return new iX({...e.decoders??{[e.prefix]:e},...r.decoders??{[r.prefix]:r}})}class aX{constructor(r,t,n,o){g(this,"name");g(this,"prefix");g(this,"baseEncode");g(this,"baseDecode");g(this,"encoder");g(this,"decoder");this.name=r,this.prefix=t,this.baseEncode=n,this.baseDecode=o,this.encoder=new nX(r,t,n),this.decoder=new oX(r,t,o)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}}function MS({name:e,prefix:r,encode:t,decode:n}){return new aX(e,r,t,n)}function DS({name:e,prefix:r,alphabet:t}){const{encode:n,decode:o}=rX(t,e);return MS({prefix:r,name:e,encode:n,decode:i=>Ly(o(i))})}function uX(e,r,t,n){const o={};for(let l=0;l<r.length;++l)o[r[l]]=l;let i=e.length;for(;e[i-1]==="=";)--i;const a=new Uint8Array(i*t/8|0);let s=0,c=0,u=0;for(let l=0;l<i;++l){const d=o[e[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|d,s+=t,s>=8&&(s-=8,a[u++]=255&c>>s)}if(s>=t||255&c<<8-s)throw new SyntaxError("Unexpected end of data");return a}function sX(e,r,t){const n=r[r.length-1]==="=",o=(1<<t)-1;let i="",a=0,s=0;for(let c=0;c<e.length;++c)for(s=s<<8|e[c],a+=8;a>t;)a-=t,i+=r[o&s>>a];if(a!==0&&(i+=r[o&s<<t-a]),n)for(;i.length*t&7;)i+="=";return i}function mt({name:e,prefix:r,bitsPerChar:t,alphabet:n}){return MS({prefix:r,name:e,encode(o){return sX(o,n,t)},decode(o){return uX(o,n,t,e)}})}mt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});mt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const LS=mt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});mt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function lr(e){return LS.encode(e).slice(1)}function Zt(e){return LS.decode(`u${e}`)}const kc=mt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});mt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});mt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});mt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});mt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});mt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});mt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});mt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});mt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const Nr=DS({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});DS({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var cX=US,i0=128,lX=-128,fX=Math.pow(2,31);function US(e,r,t){r=r||[],t=t||0;for(var n=t;e>=fX;)r[t++]=e&255|i0,e/=128;for(;e&lX;)r[t++]=e&255|i0,e>>>=7;return r[t]=e|0,US.bytes=t-n+1,r}var dX=qv,hX=128,a0=127;function qv(e,n){var t=0,n=n||0,o=0,i=n,a,s=e.length;do{if(i>=s)throw qv.bytes=0,new RangeError("Could not decode varint");a=e[i++],t+=o<28?(a&a0)<<o:(a&a0)*Math.pow(2,o),o+=7}while(a>=hX);return qv.bytes=i-n,t}var pX=Math.pow(2,7),vX=Math.pow(2,14),_X=Math.pow(2,21),yX=Math.pow(2,28),bX=Math.pow(2,35),mX=Math.pow(2,42),gX=Math.pow(2,49),wX=Math.pow(2,56),OX=Math.pow(2,63),EX=function(e){return e<pX?1:e<vX?2:e<_X?3:e<yX?4:e<bX?5:e<mX?6:e<gX?7:e<wX?8:e<OX?9:10},SX={encode:cX,decode:dX,encodingLength:EX},dl=SX;function Gv(e,r=0){return[dl.decode(e,r),dl.decode.bytes]}function hl(e,r,t=0){return dl.encode(e,r,t),r}function pl(e){return dl.encodingLength(e)}function TX(e,r){const t=r.byteLength,n=pl(e),o=n+pl(t),i=new Uint8Array(o+t);return hl(e,i,0),hl(t,i,n),i.set(r,o),new Uy(e,t,r,i)}function PX(e){const r=Ly(e),[t,n]=Gv(r),[o,i]=Gv(r.subarray(n)),a=r.subarray(n+i);if(a.byteLength!==o)throw new Error("Incorrect length");return new Uy(t,o,a,r)}function CX(e,r){if(e===r)return!0;{const t=r;return e.code===t.code&&e.size===t.size&&t.bytes instanceof Uint8Array&&JQ(e.bytes,t.bytes)}}class Uy{constructor(r,t,n,o){g(this,"code");g(this,"size");g(this,"digest");g(this,"bytes");this.code=r,this.size=t,this.digest=n,this.bytes=o}}function u0(e,r){const{bytes:t,version:n}=e;switch(n){case 0:return IX(t,Kv(e),r??Nr.encoder);default:return RX(t,Kv(e),r??kc.encoder)}}const s0=new WeakMap;function Kv(e){const r=s0.get(e);if(r==null){const t=new Map;return s0.set(e,t),t}return r}var V0;class je{constructor(r,t,n,o){g(this,"code");g(this,"version");g(this,"multihash");g(this,"bytes");g(this,"/");g(this,V0,"CID");this.code=t,this.version=r,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:r,multihash:t}=this;if(r!==Zi)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==$X)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return je.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:r,digest:t}=this.multihash,n=TX(r,t);return je.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(r){return je.equals(this,r)}static equals(r,t){const n=t;return n!=null&&r.code===n.code&&r.version===n.version&&CX(r.multihash,n.multihash)}toString(r){return u0(this,r)}toJSON(){return{"/":u0(this)}}link(){return this}[(V0=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(r){if(r==null)return null;const t=r;if(t instanceof je)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){const{version:n,code:o,multihash:i,bytes:a}=t;return new je(n,o,i,a??c0(n,o,i.bytes))}else if(t[jX]===!0){const{version:n,multihash:o,code:i}=t,a=PX(o);return je.create(n,i,a)}else return null}static create(r,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(r){case 0:{if(t!==Zi)throw new Error(`Version 0 CID must use dag-pb (code: ${Zi}) block encoding`);return new je(r,t,n,n.bytes)}case 1:{const o=c0(r,t,n.bytes);return new je(r,t,n,o)}default:throw new Error("Invalid version")}}static createV0(r){return je.create(0,Zi,r)}static createV1(r,t){return je.create(1,r,t)}static decode(r){const[t,n]=je.decodeFirst(r);if(n.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(r){const t=je.inspectBytes(r),n=t.size-t.multihashSize,o=Ly(r.subarray(n,n+t.multihashSize));if(o.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=o.subarray(t.multihashSize-t.digestSize),a=new Uy(t.multihashCode,t.digestSize,i,o);return[t.version===0?je.createV0(a):je.createV1(t.codec,a),r.subarray(t.size)]}static inspectBytes(r){let t=0;const n=()=>{const[d,h]=Gv(r.subarray(t));return t+=h,d};let o=n(),i=Zi;if(o===18?(o=0,t=0):i=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const a=t,s=n(),c=n(),u=t+c,l=u-a;return{version:o,codec:i,multihashCode:s,digestSize:c,multihashSize:l,size:u}}static parse(r,t){const[n,o]=AX(r,t),i=je.decode(o);if(i.version===0&&r[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Kv(i).set(n,r),i}}function AX(e,r){switch(e[0]){case"Q":{const t=r??Nr;return[Nr.prefix,t.decode(`${Nr.prefix}${e}`)]}case Nr.prefix:{const t=r??Nr;return[Nr.prefix,t.decode(e)]}case kc.prefix:{const t=r??kc;return[kc.prefix,t.decode(e)]}default:{if(r==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],r.decode(e)]}}}function IX(e,r,t){const{prefix:n}=t;if(n!==Nr.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const o=r.get(n);if(o==null){const i=t.encode(e).slice(1);return r.set(n,i),i}else return o}function RX(e,r,t){const{prefix:n}=t,o=r.get(n);if(o==null){const i=t.encode(e);return r.set(n,i),i}else return o}const Zi=112,$X=18;function c0(e,r,t){const n=pl(e),o=n+pl(r),i=new Uint8Array(o+t.byteLength);return hl(e,i,0),hl(r,i,n),i.set(t,o),i}const jX=Symbol.for("@ipld/js-cid/CID");function NX(e){const[r,t,n]=e;return{payload:t,signatures:[{protected:r,signature:n}],link:je.decode(Zt(t))}}function kX(e){const r={signature:Zt(e.signature)};return e.header&&(r.header=e.header),e.protected&&(r.protected=Zt(e.protected)),r}function MX(e){return{payload:Zt(e.payload),signatures:e.signatures.map(kX)}}function DX(e){const r={signature:lr(e.signature)};return e.header&&(r.header=e.header),e.protected&&(r.protected=lr(e.protected)),r}function LX(e){const r={payload:lr(e.payload),signatures:e.signatures.map(DX)};try{return r.pld=Yv(FX(e.payload)),r}catch{try{return r.link=je.decode(new Uint8Array(e.payload)),r}catch{throw new Error("Invalid payload, must be either JSON or CID")}}}function Yv(e){if(typeof e=="string"){if(e.startsWith("ipfs://"))return je.parse(e.slice(7))}else{if(Array.isArray(e))return e.map(Yv);if(UX(e)){const r={};for(const t in e)r[t]=Yv(e[t]);return r}}return e}function UX(e){return typeof e=="object"&&e!==null}function FX(e){return JSON.parse(new TextDecoder().decode(e))}function BX(e){const[r,t,n,o,i]=e,a={ciphertext:o,iv:n,protected:r,tag:i};return t&&(a.recipients=[{encrypted_key:t}]),a}function xX(e){const r={};return e.encrypted_key&&(r.encrypted_key=Zt(e.encrypted_key)),e.header&&(r.header=e.header),r}function VX(e){const r={ciphertext:Zt(e.ciphertext),protected:Zt(e.protected),iv:Zt(e.iv),tag:Zt(e.tag)};return e.aad&&(r.aad=Zt(e.aad)),e.recipients&&(r.recipients=e.recipients.map(xX)),e.unprotected&&(r.unprotected=e.unprotected),r}function WX(e){const r={};return e.encrypted_key&&(r.encrypted_key=lr(e.encrypted_key)),e.header&&(r.header=e.header),r}function zX(e){const r={ciphertext:lr(e.ciphertext),protected:lr(e.protected),iv:lr(e.iv),tag:lr(e.tag)};return e.aad&&(r.aad=lr(e.aad)),e.recipients&&(r.recipients=e.recipients.map(WX)),e.unprotected&&(r.unprotected=e.unprotected),r}const HX="dag-jose",qX=133;function FS(e){return"payload"in e&&typeof e.payload=="string"&&"signatures"in e&&Array.isArray(e.signatures)}function GX(e){return"payload"in e&&e.payload instanceof Uint8Array&&"signatures"in e&&Array.isArray(e.signatures)}function KX(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}function BS(e){return"ciphertext"in e&&typeof e.ciphertext=="string"&&"iv"in e&&typeof e.iv=="string"&&"protected"in e&&typeof e.protected=="string"&&"tag"in e&&typeof e.tag=="string"}function xS(e){if(typeof e=="string"){const r=e.split(".");if(r.length===3)return NX(r);if(r.length===5)return BX(r);throw new Error("Not a valid JOSE string")}if(FS(e)||BS(e))return e;throw new Error("Not a valid unencoded JOSE object")}function YX(e){typeof e=="string"&&(e=xS(e));let r;if(FS(e))r=MX(e);else if(BS(e))r=VX(e);else throw new Error("Not a valid JOSE object");return new Uint8Array(ES(r))}function ZX(e){let r;try{r=SS(e)}catch{throw new Error("Not a valid DAG-JOSE object")}if(GX(r))return LX(r);if(KX(r))return zX(r);throw new Error("Not a valid DAG-JOSE object")}const QX=Object.freeze(Object.defineProperty({__proto__:null,code:qX,decode:ZX,encode:YX,name:HX,toGeneral:xS},Symbol.toStringTag,{value:"Module"}));function Tr(e){const r=new globalThis.AbortController;function t(){r.abort();for(const i of e)(i==null?void 0:i.removeEventListener)!=null&&i.removeEventListener("abort",t)}for(const i of e){if((i==null?void 0:i.aborted)===!0){t();break}(i==null?void 0:i.addEventListener)!=null&&i.addEventListener("abort",t)}function n(){for(const i of e)(i==null?void 0:i.removeEventListener)!=null&&i.removeEventListener("abort",t)}const o=r.signal;return o.clear=n,o}const XX="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let JX=(e=21)=>{let r="",t=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)r+=XX[t[e]&63];return r};function eJ(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var tJ=eJ;const rJ=a_(tJ),VS=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,Fy=rJ(),Id=VS&&!Fy,nJ=Fy&&VS,oJ=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!Fy,Rd=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;async function*$d(e,r={}){const t=e.getReader();try{for(;;){const n=await t.read();if(n.done)return;yield n.value}}finally{r.preventCancel!==!0&&await t.cancel(),t.releaseLock()}}function l0(e,r){for(const t in r)Object.defineProperty(e,t,{value:r[t],enumerable:!0,configurable:!0});return e}function iJ(e,r,t){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof r=="object"&&(t=r,r=""),r&&(t.code=r);try{return l0(e,t)}catch{t.message=e.message,t.stack=e.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(e)),l0(new o,t)}}var aJ=iJ;const Xt=a_(aJ);function jd(e){const[r,t]=e[Symbol.asyncIterator]!=null?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>r.next(),push:o=>{n.push(o)},next:()=>n.length>0?{done:!1,value:n.shift()}:r.next(),[t](){return this}}}function uJ(e){return e[Symbol.asyncIterator]!=null}function f0(e,r){let t=0;if(uJ(e))return async function*(){for await(const c of e)yield r(c,t++)}();const n=jd(e),{value:o,done:i}=n.next();if(i===!0)return function*(){}();const a=r(o,t++);if(typeof a.then=="function")return async function*(){yield await a;for(const c of n)yield r(c,t++)}();const s=r;return function*(){yield a;for(const c of n)yield s(c,t++)}()}let sJ=class extends Error{constructor(t){super(t.statusText);g(this,"response");this.name="HTTPError",this.response=t}};class cJ extends Error{constructor(r="Invalid mtime"){super(r),this.name="InvalidMtimeError"}}function Vo(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function vl(e){return e.constructor!=null&&(e.constructor.name==="Blob"||e.constructor.name==="File")&&typeof e.stream=="function"}function Zv(e){return typeof e=="object"&&(e.path!=null||e.content!=null)}function _l(e){return typeof(e==null?void 0:e.getReader)=="function"}function WS(e){if(e!=null)return typeof e=="string"&&(e=parseInt(e,8)),e&4095}function lJ(e){return Object.prototype.hasOwnProperty.call(e,"secs")}function fJ(e){return Object.prototype.hasOwnProperty.call(e,"Seconds")}function dJ(e){return Array.isArray(e)}function Nd(e){if(e!=null){if(lJ(e)&&(e={secs:e.secs,nsecs:e.nsecs}),fJ(e)&&(e={secs:BigInt(e.Seconds),nsecs:e.FractionalNanoseconds}),dJ(e)&&(e={secs:BigInt(e[0]),nsecs:e[1]}),e instanceof Date){const r=e.getTime(),t=Math.floor(r/1e3);e={secs:BigInt(t),nsecs:(r-t*1e3)*1e3}}if(typeof e=="bigint"){const r=e/BigInt(1e9),t=e-r*BigInt(1e9);e={secs:r,nsecs:Number(t)}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw new cJ("mtime-nsecs must be within the range [0,999999999]");return e}}}async function*hJ(e,r){if(typeof e=="string"||e instanceof String||Vo(e)||vl(e)||e._readableState!=null)throw Xt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(_l(e)&&(e=$d(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=jd(e),{value:n,done:o}=await t.peek();if(o===!0){yield*[];return}if(t.push(n),Number.isInteger(n))throw Xt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState!=null){yield*f0(t,async i=>Mp({content:i},r));return}if(Vo(n)){yield Mp({content:t},r);return}if(Zv(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||_l(n)||vl(n)){yield*f0(t,async i=>Mp(i,r));return}}throw Zv(e)?Xt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):Xt(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}async function Mp(e,r){const{path:t,mode:n,mtime:o,content:i}=e,a={path:t??"",mode:WS(n),mtime:Nd(o)};return i!=null?a.content=await r(i):t==null&&(a.content=await r(e)),a}const zS=Symbol.for("@libp2p/peer-id");class Tt extends Error{constructor(r="Invalid parameters"){super(r),this.name="InvalidParametersError"}}g(Tt,"name","InvalidParametersError");class By extends Error{constructor(r="Invalid public key"){super(r),this.name="InvalidPublicKeyError"}}g(By,"name","InvalidPublicKeyError");class HS extends Error{constructor(r="Invalid CID"){super(r),this.name="InvalidCIDError"}}g(HS,"name","InvalidCIDError");class qS extends Error{constructor(r="Invalid Multihash"){super(r),this.name="InvalidMultihashError"}}g(qS,"name","InvalidMultihashError");class xy extends Error{constructor(r="Unsupported key type"){super(r),this.name="UnsupportedKeyTypeError"}}g(xy,"name","UnsupportedKeyTypeError");function pJ(e){return e[Symbol.asyncIterator]!=null}function GS(e){if(pJ(e))return(async()=>{const t=[];for await(const n of e)t.push(n);return t})();const r=[];for(const t of e)r.push(t);return r}async function KS(e){if(Vo(e))return new Blob([e]);if(typeof e=="string"||e instanceof String)return new Blob([e.toString()]);if(vl(e))return e;if(_l(e)&&(e=$d(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const r=jd(e),{value:t,done:n}=await r.peek();if(n===!0)return d0(r);if(r.push(t),Number.isInteger(t))return new Blob([Uint8Array.from(await GS(r))]);if(Vo(t)||typeof t=="string"||t instanceof String)return d0(r)}throw new Tt(`Unexpected input: ${e}`)}async function d0(e){const r=[];for await(const t of e)r.push(t);return new Blob(r)}function vJ(e){return hJ(e,KS)}function Vy(e){if(e!=null)return typeof e=="string"?e:e.toString(8).padStart(4,"0")}async function h0(e,r,t={},n){const o=[],i=new FormData;let a=0,s=0;for await(const{content:c,path:u,mode:l,mtime:d}of vJ(e)){let h="";const p=c!=null?"file":"dir";a>0&&(h=`-${a}`);let v=p+h;const y=[];if(l!=null&&y.push(`mode=${Vy(l)}`),d!=null){const{secs:_,nsecs:b}=d;y.push(`mtime=${_}`),b!=null&&y.push(`mtime-nsecs=${b}`)}if(y.length>0&&(v=`${v}?${y.join("&")}`),c!=null){i.set(v,c,u!=null?encodeURIComponent(u):void 0);const _=s+c.size;o.push({name:u,start:s,end:_}),s=_}else if(u!=null)i.set(v,new File([""],encodeURIComponent(u),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");a++}return{total:s,parts:o,headers:t,body:i}}async function sn(e,r,t={},n=`-----------------------------${JX()}`){let o=h0;return nJ&&(o=h0),o(e,r,t,n)}function Ge(e){if(e==null)return e;const r=/^[A-Z]+$/,t={};return Object.keys(e).reduce((n,o)=>(r.test(o)?n[o.toLowerCase()]=e[o]:r.test(o[0])?n[o[0].toLowerCase()+o.slice(1)]=e[o]:n[o]=e[o],n),t)}function R({arg:e,searchParams:r,hashAlg:t,mtime:n,mode:o,...i}={}){r!=null&&(i={...i,...r}),t!=null&&(i.hash=t),n!=null&&(n=Nd(n),i.mtime=n.secs,i.mtimeNsecs=n.nsecs),o!=null&&(i.mode=Vy(o)),isNaN(i.timeout)||(i.timeout=`${i.timeout}ms`),e==null?e=[]:Array.isArray(e)||(e=[e]);const a=new URLSearchParams(i);return e.forEach(s=>{a.append("arg",s)}),a}function YS(e){return async function*(t,n={}){const o=new AbortController,i=Tr([o.signal,n.signal]);try{const{headers:a,body:s,total:c,parts:u}=await sn(t,o,n.headers),[l,d]=typeof n.progress=="function"?_J(c,n.progress,u):[void 0,void 0],h=await e.post("add",{searchParams:R({"stream-channels":!0,...n,progress:!!l}),onUploadProgress:d,signal:i,headers:a,body:s});for await(let p of h.ndjson())p=Ge(p),p.hash!==void 0?yield bJ(p):l!=null&&l(p.bytes??0,p.name)}finally{i.clear()}}}const _J=(e,r,t)=>t!=null?[void 0,yJ(e,t,r)]:[r,void 0],yJ=(e,r,t)=>{let n=0;const o=r.length;return({loaded:i,total:a})=>{const s=Math.floor(i/a*e);for(;n<o;){const{start:c,end:u,name:l}=r[n];if(s<u){t(s-c,l);break}else t(u-c,l),n+=1}}};function bJ({name:e,hash:r,size:t,mode:n,mtime:o,mtimeNsecs:i}){const a={path:e,cid:G.parse(r),size:parseInt(t)};return n!=null&&(a.mode=parseInt(n,8)),o!=null&&(a.mtime={secs:o,nsecs:i??0}),a}function mJ(e){return e[Symbol.asyncIterator]!=null}function kd(e){if(mJ(e))return(async()=>{let t;for await(const n of e)t=n;return t})();let r;for(const t of e)r=t;return r}async function*gJ(e,r){if(e==null)throw Xt(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if(typeof e=="string"||e instanceof String){yield mc(e.toString(),r);return}if(Vo(e)||vl(e)){yield mc(e,r);return}if(_l(e)&&(e=$d(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=jd(e),{value:n,done:o}=await t.peek();if(o===!0){yield{content:[]};return}if(t.push(n),Number.isInteger(n)||Vo(n)||typeof n=="string"||n instanceof String){yield mc(t,r);return}throw Xt(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(Zv(e)){yield mc(e,r);return}throw Xt(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function mc(e,r){const{path:t,mode:n,mtime:o,content:i}=e,a={path:t??"",mode:WS(n),mtime:Nd(o)};return i!=null?a.content=await r(i):t==null&&(a.content=await r(e)),a}function wJ(e){return gJ(e,KS)}function OJ(e){const r=YS(e);return async function(n,o={}){const i=wJ(n),a=r(i,o),s=await kd(a);if(s==null)throw new Error("Invalid body");return s}}const ZS=Symbol.for("@achingbrain/uint8arraylist");function p0(e,r){if(r==null||r<0)throw new RangeError("index is out of bounds");let t=0;for(const n of e){const o=t+n.byteLength;if(r<o)return{buf:n,index:r-t};t=o}throw new RangeError("index is out of bounds")}function gc(e){return!!(e!=null&&e[ZS])}var W0;class yt{constructor(...r){g(this,"bufs");g(this,"length");g(this,W0,!0);this.bufs=[],this.length=0,r.length>0&&this.appendAll(r)}*[(W0=ZS,Symbol.iterator)](){yield*this.bufs}get byteLength(){return this.length}append(...r){this.appendAll(r)}appendAll(r){let t=0;for(const n of r)if(n instanceof Uint8Array)t+=n.byteLength,this.bufs.push(n);else if(gc(n))t+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=t}prepend(...r){this.prependAll(r)}prependAll(r){let t=0;for(const n of r.reverse())if(n instanceof Uint8Array)t+=n.byteLength,this.bufs.unshift(n);else if(gc(n))t+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=t}get(r){const t=p0(this.bufs,r);return t.buf[t.index]}set(r,t){const n=p0(this.bufs,r);n.buf[n.index]=t}write(r,t=0){if(r instanceof Uint8Array)for(let n=0;n<r.length;n++)this.set(t+n,r[n]);else if(gc(r))for(let n=0;n<r.length;n++)this.set(t+n,r.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(r){if(r=Math.trunc(r),!(Number.isNaN(r)||r<=0)){if(r===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(r>=this.bufs[0].byteLength)r-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(r),this.length-=r;break}}}slice(r,t){const{bufs:n,length:o}=this._subList(r,t);return Ca(n,o)}subarray(r,t){const{bufs:n,length:o}=this._subList(r,t);return n.length===1?n[0]:Ca(n,o)}sublist(r,t){const{bufs:n,length:o}=this._subList(r,t),i=new yt;return i.length=o,i.bufs=[...n],i}_subList(r,t){if(r=r??0,t=t??this.length,r<0&&(r=this.length+r),t<0&&(t=this.length+t),r<0||t>this.length)throw new RangeError("index is out of bounds");if(r===t)return{bufs:[],length:0};if(r===0&&t===this.length)return{bufs:this.bufs,length:this.length};const n=[];let o=0;for(let i=0;i<this.bufs.length;i++){const a=this.bufs[i],s=o,c=s+a.byteLength;if(o=c,r>=c)continue;const u=r>=s&&r<c,l=t>s&&t<=c;if(u&&l){if(r===s&&t===c){n.push(a);break}const d=r-s;n.push(a.subarray(d,d+(t-r)));break}if(u){if(r===0){n.push(a);continue}n.push(a.subarray(r-s));continue}if(l){if(t===c){n.push(a);break}n.push(a.subarray(0,t-s));break}n.push(a)}return{bufs:n,length:t-r}}indexOf(r,t=0){if(!gc(r)&&!(r instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const n=r instanceof Uint8Array?r:r.subarray();if(t=Number(t??0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),r.length===0)return t>this.length?this.length:t;const o=n.byteLength;if(o===0)throw new TypeError("search must be at least 1 byte long");const i=256,a=new Int32Array(i);for(let d=0;d<i;d++)a[d]=-1;for(let d=0;d<o;d++)a[n[d]]=d;const s=a,c=this.byteLength-n.byteLength,u=n.byteLength-1;let l;for(let d=t;d<=c;d+=l){l=0;for(let h=u;h>=0;h--){const p=this.get(d+h);if(n[h]!==p){l=Math.max(1,h-s[p]);break}}if(l===0)return d}return-1}getInt8(r){const t=this.subarray(r,r+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getInt8(0)}setInt8(r,t){const n=zn(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,t),this.write(n,r)}getInt16(r,t){const n=this.subarray(r,r+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,t)}setInt16(r,t,n){const o=Rr(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt16(0,t,n),this.write(o,r)}getInt32(r,t){const n=this.subarray(r,r+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,t)}setInt32(r,t,n){const o=Rr(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt32(0,t,n),this.write(o,r)}getBigInt64(r,t){const n=this.subarray(r,r+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,t)}setBigInt64(r,t,n){const o=Rr(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigInt64(0,t,n),this.write(o,r)}getUint8(r){const t=this.subarray(r,r+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0)}setUint8(r,t){const n=zn(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,t),this.write(n,r)}getUint16(r,t){const n=this.subarray(r,r+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,t)}setUint16(r,t,n){const o=Rr(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint16(0,t,n),this.write(o,r)}getUint32(r,t){const n=this.subarray(r,r+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,t)}setUint32(r,t,n){const o=Rr(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint32(0,t,n),this.write(o,r)}getBigUint64(r,t){const n=this.subarray(r,r+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,t)}setBigUint64(r,t,n){const o=Rr(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigUint64(0,t,n),this.write(o,r)}getFloat32(r,t){const n=this.subarray(r,r+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,t)}setFloat32(r,t,n){const o=Rr(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat32(0,t,n),this.write(o,r)}getFloat64(r,t){const n=this.subarray(r,r+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,t)}setFloat64(r,t,n){const o=Rr(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat64(0,t,n),this.write(o,r)}equals(r){if(r==null||!(r instanceof yt)||r.bufs.length!==this.bufs.length)return!1;for(let t=0;t<this.bufs.length;t++)if(!qr(this.bufs[t],r.bufs[t]))return!1;return!0}static fromUint8Arrays(r,t){const n=new yt;return n.bufs=r,t==null&&(t=r.reduce((o,i)=>o+i.byteLength,0)),n.length=t,n}}const EJ=parseInt("11111",2),Qv=parseInt("10000000",2),SJ=parseInt("01111111",2),v0={0:Qi,1:Qi,2:TJ,3:AJ,4:IJ,5:CJ,6:PJ,16:Qi,22:Qi,48:Qi};function Md(e,r={offset:0}){const t=e[r.offset]&EJ;if(r.offset++,v0[t]!=null)return v0[t](e,r);throw new Error("No decoder for tag "+t)}function Ys(e,r){let t=0;if((e[r.offset]&Qv)===Qv){const n=e[r.offset]&SJ;let o="0x";r.offset++;for(let i=0;i<n;i++,r.offset++)o+=e[r.offset].toString(16).padStart(2,"0");t=parseInt(o,16)}else t=e[r.offset],r.offset++;return t}function Qi(e,r){Ys(e,r);const t=[];for(;!(r.offset>=e.byteLength);){const n=Md(e,r);if(n===null)break;t.push(n)}return t}function TJ(e,r){const t=Ys(e,r),n=r.offset,o=r.offset+t,i=[];for(let a=n;a<o;a++)a===n&&e[a]===0||i.push(e[a]);return r.offset+=t,Uint8Array.from(i)}function PJ(e,r){const t=Ys(e,r),n=r.offset+t,o=e[r.offset];r.offset++;let i=0,a=0;o<40?(i=0,a=o):o<80?(i=1,a=o-40):(i=2,a=o-80);let s=`${i}.${a}`,c=[];for(;r.offset<n;){const u=e[r.offset];if(r.offset++,c.push(u&127),u<128){c.reverse();let l=0;for(let d=0;d<c.length;d++)l+=c[d]<<d*7;s+=`.${l}`,c=[]}}return s}function CJ(e,r){return r.offset++,null}function AJ(e,r){const t=Ys(e,r),n=e[r.offset];r.offset++;const o=e.subarray(r.offset,r.offset+t-1);if(r.offset+=t,n!==0)throw new Error("Unused bits in bit string is unimplemented");return o}function IJ(e,r){const t=Ys(e,r),n=e.subarray(r.offset,r.offset+t);return r.offset+=t,n}function RJ(e){let r=e.toString(16);r.length%2===1&&(r="0"+r);const t=new yt;for(let n=0;n<r.length;n+=2)t.append(Uint8Array.from([parseInt(`${r[n]}${r[n+1]}`,16)]));return t}function Wy(e){if(e.byteLength<128)return Uint8Array.from([e.byteLength]);const r=RJ(e.byteLength);return new yt(Uint8Array.from([r.byteLength|Qv]),r)}function Xv(e){const r=new yt,t=128;return(e.subarray()[0]&t)===t&&r.append(Uint8Array.from([0])),r.append(e),new yt(Uint8Array.from([2]),Wy(r),r)}function QS(e){const r=Uint8Array.from([0]),t=new yt(r,e);return new yt(Uint8Array.from([3]),Wy(t),t)}function ya(e,r=48){const t=new yt;for(const n of e)t.append(n);return new yt(Uint8Array.from([r]),Wy(t),t)}async function $J(e,r,t,n){var a,s;const o=await crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:e.crv??"P-256"},!1,["verify"]);(a=n==null?void 0:n.signal)==null||a.throwIfAborted();const i=await crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},o,r,t.subarray());return(s=n==null?void 0:n.signal)==null||s.throwIfAborted(),i}const jJ=Uint8Array.from([6,8,42,134,72,206,61,3,1,7]),NJ=Uint8Array.from([6,5,43,129,4,0,34]),kJ=Uint8Array.from([6,5,43,129,4,0,35]),MJ={ext:!0,kty:"EC",crv:"P-256"},DJ={ext:!0,kty:"EC",crv:"P-384"},LJ={ext:!0,kty:"EC",crv:"P-521"},Dp=32,Lp=48,Up=66;function XS(e){const r=Md(e);return UJ(r)}function UJ(e){const r=e[1][1][0],t=1;let n,o;if(r.byteLength===Dp*2+1)return n=Se(r.subarray(t,t+Dp),"base64url"),o=Se(r.subarray(t+Dp),"base64url"),new Fp({...MJ,key_ops:["verify"],x:n,y:o});if(r.byteLength===Lp*2+1)return n=Se(r.subarray(t,t+Lp),"base64url"),o=Se(r.subarray(t+Lp),"base64url"),new Fp({...DJ,key_ops:["verify"],x:n,y:o});if(r.byteLength===Up*2+1)return n=Se(r.subarray(t,t+Up),"base64url"),o=Se(r.subarray(t+Up),"base64url"),new Fp({...LJ,key_ops:["verify"],x:n,y:o});throw new Tt(`coordinates were wrong length, got ${r.byteLength}, expected 65, 97 or 133`)}function FJ(e){return ya([Xv(Uint8Array.from([1])),ya([BJ(e.crv)],160),ya([QS(new yt(Uint8Array.from([4]),bt(e.x??"","base64url"),bt(e.y??"","base64url")))],161)]).subarray()}function BJ(e){if(e==="P-256")return jJ;if(e==="P-384")return NJ;if(e==="P-521")return kJ;throw new Tt(`Invalid curve ${e}`)}class Fp{constructor(r){g(this,"type","ECDSA");g(this,"jwk");g(this,"_raw");this.jwk=r}get raw(){return this._raw==null&&(this._raw=FJ(this.jwk)),this._raw}toMultihash(){return Hr.digest(qy(this))}toCID(){return G.createV1(114,this.toMultihash())}toString(){return Be.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:qr(this.raw,r.raw)}async verify(r,t,n){return $J(this.jwk,t,r,n)}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qt=BigInt(0),ot=BigInt(1),Bp=BigInt(2),xJ=BigInt(8),VJ={zip215:!0};function WJ(e,r,t,n){const o=e.sqr(t),i=e.sqr(n),a=e.add(e.mul(r.a,o),i),s=e.add(e.ONE,e.mul(r.d,e.mul(o,i)));return e.eql(a,s)}function zJ(e,r={}){const{Fp:t,Fn:n}=WP("edwards",e,r),{h:o,n:i}=e;K0(r,{},{uvRatio:"function"});const a=Bp<<BigInt(n.BYTES*8)-ot,s=y=>t.create(y),c=r.uvRatio||((y,_)=>{try{return{isValid:!0,value:t.sqrt(t.div(y,_))}}catch{return{isValid:!1,value:qt}}});if(!WJ(t,e,e.Gx,e.Gy))throw new Error("bad curve params: generator point");function u(y,_,b=!1){const w=b?ot:qt;return Ji("coordinate "+y,_,w,a),_}function l(y){if(!(y instanceof p))throw new Error("ExtendedPoint expected")}const d=tb((y,_)=>{const{ex:b,ey:w,ez:S}=y,E=y.is0();_==null&&(_=E?xJ:t.inv(S));const T=s(b*_),C=s(w*_),P=s(S*_);if(E)return{x:qt,y:ot};if(P!==ot)throw new Error("invZ was invalid");return{x:T,y:C}}),h=tb(y=>{const{a:_,d:b}=e;if(y.is0())throw new Error("bad point: ZERO");const{ex:w,ey:S,ez:E,et:T}=y,C=s(w*w),P=s(S*S),I=s(E*E),M=s(I*I),F=s(C*_),Q=s(I*s(F+P)),q=s(M+s(b*s(C*P)));if(Q!==q)throw new Error("bad point: equation left != right (1)");const Z=s(w*S),fe=s(E*T);if(Z!==fe)throw new Error("bad point: equation left != right (2)");return!0});class p{constructor(_,b,w,S){this.ex=u("x",_),this.ey=u("y",b),this.ez=u("z",w,!0),this.et=u("t",S),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(_){if(_ instanceof p)throw new Error("extended point not allowed");const{x:b,y:w}=_||{};return u("x",b),u("y",w),new p(b,w,ot,s(b*w))}static normalizeZ(_){return HP(p,"ez",_)}static msm(_,b){return qP(p,n,_,b)}_setWindowSize(_){this.precompute(_)}precompute(_=8,b=!0){return v.setWindowSize(this,_),b||this.multiply(Bp),this}assertValidity(){h(this)}equals(_){l(_);const{ex:b,ey:w,ez:S}=this,{ex:E,ey:T,ez:C}=_,P=s(b*C),I=s(E*S),M=s(w*C),F=s(T*S);return P===I&&M===F}is0(){return this.equals(p.ZERO)}negate(){return new p(s(-this.ex),this.ey,this.ez,s(-this.et))}double(){const{a:_}=e,{ex:b,ey:w,ez:S}=this,E=s(b*b),T=s(w*w),C=s(Bp*s(S*S)),P=s(_*E),I=b+w,M=s(s(I*I)-E-T),F=P+T,Q=F-C,q=P-T,Z=s(M*Q),fe=s(F*q),V=s(M*q),ie=s(Q*F);return new p(Z,fe,ie,V)}add(_){l(_);const{a:b,d:w}=e,{ex:S,ey:E,ez:T,et:C}=this,{ex:P,ey:I,ez:M,et:F}=_,Q=s(S*P),q=s(E*I),Z=s(C*w*F),fe=s(T*M),V=s((S+E)*(P+I)-Q-q),ie=fe-Z,W=fe+Z,te=s(q-b*Q),K=s(V*ie),L=s(W*te),re=s(V*te),pe=s(ie*W);return new p(K,L,pe,re)}subtract(_){return this.add(_.negate())}multiply(_){const b=_;Ji("scalar",b,ot,i);const{p:w,f:S}=v.wNAFCached(this,b,p.normalizeZ);return p.normalizeZ([w,S])[0]}multiplyUnsafe(_,b=p.ZERO){const w=_;return Ji("scalar",w,qt,i),w===qt?p.ZERO:this.is0()||w===ot?this:v.wNAFCachedUnsafe(this,w,p.normalizeZ,b)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return v.wNAFCachedUnsafe(this,i).is0()}toAffine(_){return d(this,_)}clearCofactor(){return o===ot?this:this.multiplyUnsafe(o)}static fromBytes(_,b=!1){return ua.abytes(_),this.fromHex(_,b)}static fromHex(_,b=!1){const{d:w,a:S}=e,E=t.BYTES;_=ur("pointHex",_,E),Gp("zip215",b);const T=_.slice(),C=_[E-1];T[E-1]=C&-129;const P=Kp(T),I=b?a:t.ORDER;Ji("pointHex.y",P,qt,I);const M=s(P*P),F=s(M-ot),Q=s(w*M-S);let{isValid:q,value:Z}=c(F,Q);if(!q)throw new Error("Point.fromHex: invalid y coordinate");const fe=(Z&ot)===ot,V=(C&128)!==0;if(!b&&Z===qt&&V)throw new Error("Point.fromHex: x=0 and x_0=1");return V!==fe&&(Z=s(-Z)),p.fromAffine({x:Z,y:P})}static fromPrivateScalar(_){return p.BASE.multiply(_)}toBytes(){const{x:_,y:b}=this.toAffine(),w=Y0(b,t.BYTES);return w[w.length-1]|=_&ot?128:0,w}toRawBytes(){return this.toBytes()}toHex(){return ua.bytesToHex(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}p.BASE=new p(e.Gx,e.Gy,ot,s(e.Gx*e.Gy)),p.ZERO=new p(qt,ot,ot,qt),p.Fp=t,p.Fn=n;const v=zP(p,n.BYTES*8);return p}function HJ(e,r){K0(r,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:t,hash:n}=r,{BASE:o,Fp:i,Fn:a}=e,s=a.ORDER,c=r.randomBytes||ua.randomBytes,u=r.adjustScalarBytes||(T=>T),l=r.domain||((T,C,P)=>{if(Gp("phflag",P),C.length||P)throw new Error("Contexts/pre-hash are not supported");return T});function d(T){return a.create(T)}function h(T){return d(Kp(T))}function p(T){const C=i.BYTES;T=ur("private key",T,C);const P=ur("hashed private key",n(T),2*C),I=u(P.slice(0,C)),M=P.slice(C,2*C),F=h(I);return{head:I,prefix:M,scalar:F}}function v(T){const{head:C,prefix:P,scalar:I}=p(T),M=o.multiply(I),F=M.toBytes();return{head:C,prefix:P,scalar:I,point:M,pointBytes:F}}function y(T){return v(T).pointBytes}function _(T=Uint8Array.of(),...C){const P=ua.concatBytes(...C);return h(n(l(P,ur("context",T),!!t)))}function b(T,C,P={}){T=ur("message",T),t&&(T=t(T));const{prefix:I,scalar:M,pointBytes:F}=v(C),Q=_(P.context,I,T),q=o.multiply(Q).toBytes(),Z=_(P.context,q,F,T),fe=d(Q+Z*M);Ji("signature.s",fe,qt,s);const V=i.BYTES,ie=ua.concatBytes(q,Y0(fe,V));return ur("result",ie,V*2)}const w=VJ;function S(T,C,P,I=w){const{context:M,zip215:F}=I,Q=i.BYTES;T=ur("signature",T,2*Q),C=ur("message",C),P=ur("publicKey",P,Q),F!==void 0&&Gp("zip215",F),t&&(C=t(C));const q=Kp(T.slice(Q,2*Q));let Z,fe,V;try{Z=e.fromHex(P,F),fe=e.fromHex(T.slice(0,Q),F),V=o.multiplyUnsafe(q)}catch{return!1}if(!F&&Z.isSmallOrder())return!1;const ie=_(M,fe.toBytes(),Z.toBytes(),C);return fe.add(Z.multiplyUnsafe(ie)).subtract(V).clearCofactor().is0()}return o.precompute(8),{getPublicKey:y,sign:b,verify:S,utils:{getExtendedPublicKey:v,randomPrivateKey:()=>c(i.BYTES),precompute(T=8,C=e.BASE){return C.precompute(T,!1)}},Point:e}}function qJ(e){const r={a:e.a,d:e.d,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},t=e.Fp,n=u_(r.n,e.nBitLength,!0),o={Fp:t,Fn:n,uvRatio:e.uvRatio},i={hash:e.hash,randomBytes:e.randomBytes,adjustScalarBytes:e.adjustScalarBytes,domain:e.domain,prehash:e.prehash,mapToCurve:e.mapToCurve};return{CURVE:r,curveOpts:o,eddsaOpts:i}}function GJ(e,r){return Object.assign({},r,{ExtendedPoint:r.Point,CURVE:e})}function KJ(e){const{CURVE:r,curveOpts:t,eddsaOpts:n}=qJ(e),o=zJ(r,t),i=HJ(o,n);return GJ(e,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const YJ=BigInt(1),_0=BigInt(2);BigInt(3);const ZJ=BigInt(5),QJ=BigInt(8),Dd={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:QJ,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function XJ(e){const r=BigInt(10),t=BigInt(20),n=BigInt(40),o=BigInt(80),i=Dd.p,s=e*e%i*e%i,c=we(s,_0,i)*s%i,u=we(c,YJ,i)*e%i,l=we(u,ZJ,i)*u%i,d=we(l,r,i)*l%i,h=we(d,t,i)*d%i,p=we(h,n,i)*h%i,v=we(p,o,i)*p%i,y=we(v,o,i)*p%i,_=we(y,r,i)*l%i;return{pow_p_5_8:we(_,_0,i)*e%i,b2:s}}function JJ(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const y0=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function eee(e,r){const t=Dd.p,n=Gt(r*r*r,t),o=Gt(n*n*r,t),i=XJ(e*o).pow_p_5_8;let a=Gt(e*n*i,t);const s=Gt(r*a*a,t),c=a,u=Gt(a*y0,t),l=s===e,d=s===Gt(-e,t),h=s===Gt(-e*y0,t);return l&&(a=c),(d||h)&&(a=u),GP(a,t)&&(a=Gt(-a,t)),{isValid:l||d,value:a}}const tee=u_(Dd.p,void 0,!0),ree={...Dd,Fp:tee,hash:BP,adjustScalarBytes:JJ,uvRatio:eee},nee=KJ(ree);class b0 extends Error{constructor(r="An error occurred while verifying a message"){super(r),this.name="VerificationError"}}class oee extends Error{constructor(r="Missing Web Crypto API"){super(r),this.name="WebCryptoMissingError"}}const Ra={get(e=globalThis){const r=e.crypto;if((r==null?void 0:r.subtle)==null)throw new oee("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return r}},JS=32;let xp;const iee=(async()=>{try{return await Ra.get().subtle.generateKey({name:"Ed25519"},!0,["sign","verify"]),!0}catch{return!1}})();async function aee(e,r,t){if(e.buffer instanceof ArrayBuffer){const n=await Ra.get().subtle.importKey("raw",e.buffer,{name:"Ed25519"},!1,["verify"]);return await Ra.get().subtle.verify({name:"Ed25519"},n,r,t instanceof Uint8Array?t:t.subarray())}throw new TypeError("WebCrypto does not support SharedArrayBuffer for Ed25519 keys")}function uee(e,r,t){return nee.verify(r,t instanceof Uint8Array?t:t.subarray(),e)}async function see(e,r,t){return xp==null&&(xp=await iee),xp?aee(e,r,t):uee(e,r,t)}function eT(e){return e==null?!1:typeof e.then=="function"&&typeof e.catch=="function"&&typeof e.finally=="function"}class cee{constructor(r){g(this,"type","Ed25519");g(this,"raw");this.raw=rT(r,JS)}toMultihash(){return Hr.digest(qy(this))}toCID(){return G.createV1(114,this.toMultihash())}toString(){return Be.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:qr(this.raw,r.raw)}verify(r,t,n){var i;(i=n==null?void 0:n.signal)==null||i.throwIfAborted();const o=see(this.raw,t,r);return eT(o)?o.then(a=>{var s;return(s=n==null?void 0:n.signal)==null||s.throwIfAborted(),a}):o}}function tT(e){return e=rT(e,JS),new cee(e)}function rT(e,r){if(e=Uint8Array.from(e??[]),e.length!==r)throw new Tt(`Key must be a Uint8Array of length ${r}, got ${e.length}`);return e}const zy=new Float32Array([-0]),kr=new Uint8Array(zy.buffer);function lee(e,r,t){zy[0]=e,r[t]=kr[0],r[t+1]=kr[1],r[t+2]=kr[2],r[t+3]=kr[3]}function fee(e,r){return kr[0]=e[r],kr[1]=e[r+1],kr[2]=e[r+2],kr[3]=e[r+3],zy[0]}const Hy=new Float64Array([-0]),Xe=new Uint8Array(Hy.buffer);function dee(e,r,t){Hy[0]=e,r[t]=Xe[0],r[t+1]=Xe[1],r[t+2]=Xe[2],r[t+3]=Xe[3],r[t+4]=Xe[4],r[t+5]=Xe[5],r[t+6]=Xe[6],r[t+7]=Xe[7]}function hee(e,r){return Xe[0]=e[r],Xe[1]=e[r+1],Xe[2]=e[r+2],Xe[3]=e[r+3],Xe[4]=e[r+4],Xe[5]=e[r+5],Xe[6]=e[r+6],Xe[7]=e[r+7],Hy[0]}const pee=BigInt(Number.MAX_SAFE_INTEGER),vee=BigInt(Number.MIN_SAFE_INTEGER);class tt{constructor(r,t){g(this,"lo");g(this,"hi");this.lo=r|0,this.hi=t|0}toNumber(r=!1){if(!r&&this.hi>>>31>0){const t=~this.lo+1>>>0;let n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(r=!1){if(r)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const t=~this.lo+1>>>0;let n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(BigInt(t)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(r=!1){return this.toBigInt(r).toString()}zzEncode(){const r=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^r)>>>0,this.lo=(this.lo<<1^r)>>>0,this}zzDecode(){const r=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^r)>>>0,this.hi=(this.hi>>>1^r)>>>0,this}length(){const r=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?r<16384?r<128?1:2:r<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}static fromBigInt(r){if(r===0n)return Nn;if(r<pee&&r>vee)return this.fromNumber(Number(r));const t=r<0n;t&&(r=-r);let n=r>>32n,o=r-(n<<32n);return t&&(n=~n|0n,o=~o|0n,++o>m0&&(o=0n,++n>m0&&(n=0n))),new tt(Number(o),Number(n))}static fromNumber(r){if(r===0)return Nn;const t=r<0;t&&(r=-r);let n=r>>>0,o=(r-n)/4294967296>>>0;return t&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new tt(n,o)}static from(r){return typeof r=="number"?tt.fromNumber(r):typeof r=="bigint"?tt.fromBigInt(r):typeof r=="string"?tt.fromBigInt(BigInt(r)):r.low!=null||r.high!=null?new tt(r.low>>>0,r.high>>>0):Nn}}const Nn=new tt(0,0);Nn.toBigInt=function(){return 0n};Nn.zzEncode=Nn.zzDecode=function(){return this};Nn.length=function(){return 1};const m0=4294967296n;function _ee(e){let r=0,t=0;for(let n=0;n<e.length;++n)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:(t&64512)===55296&&(e.charCodeAt(n+1)&64512)===56320?(++n,r+=4):r+=3;return r}function yee(e,r,t){if(t-r<1)return"";let o;const i=[];let a=0,s;for(;r<t;)s=e[r++],s<128?i[a++]=s:s>191&&s<224?i[a++]=(s&31)<<6|e[r++]&63:s>239&&s<365?(s=((s&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,i[a++]=55296+(s>>10),i[a++]=56320+(s&1023)):i[a++]=(s&15)<<12|(e[r++]&63)<<6|e[r++]&63,a>8191&&((o??(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o!=null?(a>0&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))}function nT(e,r,t){const n=t;let o,i;for(let a=0;a<e.length;++a)o=e.charCodeAt(a),o<128?r[t++]=o:o<2048?(r[t++]=o>>6|192,r[t++]=o&63|128):(o&64512)===55296&&((i=e.charCodeAt(a+1))&64512)===56320?(o=65536+((o&1023)<<10)+(i&1023),++a,r[t++]=o>>18|240,r[t++]=o>>12&63|128,r[t++]=o>>6&63|128,r[t++]=o&63|128):(r[t++]=o>>12|224,r[t++]=o>>6&63|128,r[t++]=o&63|128);return t-n}function Rt(e,r){return RangeError(`index out of range: ${e.pos} + ${r??1} > ${e.len}`)}function wc(e,r){return(e[r-4]|e[r-3]<<8|e[r-2]<<16|e[r-1]<<24)>>>0}class bee{constructor(r){g(this,"buf");g(this,"pos");g(this,"len");g(this,"_slice",Uint8Array.prototype.subarray);this.buf=r,this.pos=0,this.len=r.length}uint32(){let r=4294967295;if(r=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(r=(r|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return r;if((this.pos+=5)>this.len)throw this.pos=this.len,Rt(this,10);return r}int32(){return this.uint32()|0}sint32(){const r=this.uint32();return r>>>1^-(r&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw Rt(this,4);return wc(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw Rt(this,4);return wc(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw Rt(this,4);const r=fee(this.buf,this.pos);return this.pos+=4,r}double(){if(this.pos+8>this.len)throw Rt(this,4);const r=hee(this.buf,this.pos);return this.pos+=8,r}bytes(){const r=this.uint32(),t=this.pos,n=this.pos+r;if(n>this.len)throw Rt(this,r);return this.pos+=r,t===n?new Uint8Array(0):this.buf.subarray(t,n)}string(){const r=this.bytes();return yee(r,0,r.length)}skip(r){if(typeof r=="number"){if(this.pos+r>this.len)throw Rt(this,r);this.pos+=r}else do if(this.pos>=this.len)throw Rt(this);while(this.buf[this.pos++]&128);return this}skipType(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${r} at offset ${this.pos}`)}return this}readLongVarint(){const r=new tt(0,0);let t=0;if(this.len-this.pos>4){for(;t<4;++t)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw Rt(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,r}if(this.len-this.pos>4){for(;t<5;++t)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;t<5;++t){if(this.pos>=this.len)throw Rt(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw Rt(this,8);const r=wc(this.buf,this.pos+=4),t=wc(this.buf,this.pos+=4);return new tt(r,t)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const r=eS(this.buf,this.pos);return this.pos+=Hn(r),r}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function mee(e){return new bee(e instanceof Uint8Array?e:e.subarray())}function oT(e,r,t){const n=mee(e);return r.decode(n,void 0,t)}function gee(e){let n,o=8192;return function(a){if(a<1||a>4096)return zn(a);o+a>8192&&(n=zn(8192),o=0);const s=n.subarray(o,o+=a);return o&7&&(o=(o|7)+1),s}}class ia{constructor(r,t,n){g(this,"fn");g(this,"len");g(this,"next");g(this,"val");this.fn=r,this.len=t,this.next=void 0,this.val=n}}function Vp(){}class wee{constructor(r){g(this,"head");g(this,"tail");g(this,"len");g(this,"next");this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}}const Oee=gee();function Eee(e){return globalThis.Buffer!=null?zn(e):Oee(e)}class Jv{constructor(){g(this,"len");g(this,"head");g(this,"tail");g(this,"states");this.len=0,this.head=new ia(Vp,0,0),this.tail=this.head,this.states=null}_push(r,t,n){return this.tail=this.tail.next=new ia(r,t,n),this.len+=t,this}uint32(r){return this.len+=(this.tail=this.tail.next=new Tee((r=r>>>0)<128?1:r<16384?2:r<2097152?3:r<268435456?4:5,r)).len,this}int32(r){return r<0?this._push(Oc,10,tt.fromNumber(r)):this.uint32(r)}sint32(r){return this.uint32((r<<1^r>>31)>>>0)}uint64(r){const t=tt.fromBigInt(r);return this._push(Oc,t.length(),t)}uint64Number(r){return this._push(Fv,Hn(r),r)}uint64String(r){return this.uint64(BigInt(r))}int64(r){return this.uint64(r)}int64Number(r){return this.uint64Number(r)}int64String(r){return this.uint64String(r)}sint64(r){const t=tt.fromBigInt(r).zzEncode();return this._push(Oc,t.length(),t)}sint64Number(r){const t=tt.fromNumber(r).zzEncode();return this._push(Oc,t.length(),t)}sint64String(r){return this.sint64(BigInt(r))}bool(r){return this._push(Wp,1,r?1:0)}fixed32(r){return this._push(Xi,4,r>>>0)}sfixed32(r){return this.fixed32(r)}fixed64(r){const t=tt.fromBigInt(r);return this._push(Xi,4,t.lo)._push(Xi,4,t.hi)}fixed64Number(r){const t=tt.fromNumber(r);return this._push(Xi,4,t.lo)._push(Xi,4,t.hi)}fixed64String(r){return this.fixed64(BigInt(r))}sfixed64(r){return this.fixed64(r)}sfixed64Number(r){return this.fixed64Number(r)}sfixed64String(r){return this.fixed64String(r)}float(r){return this._push(lee,4,r)}double(r){return this._push(dee,8,r)}bytes(r){const t=r.length>>>0;return t===0?this._push(Wp,1,0):this.uint32(t)._push(Pee,t,r)}string(r){const t=_ee(r);return t!==0?this.uint32(t)._push(nT,t,r):this._push(Wp,1,0)}fork(){return this.states=new wee(this),this.head=this.tail=new ia(Vp,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ia(Vp,0,0),this.len=0),this}ldelim(){const r=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=r.next,this.tail=t,this.len+=n),this}finish(){let r=this.head.next;const t=Eee(this.len);let n=0;for(;r!=null;)r.fn(r.val,t,n),n+=r.len,r=r.next;return t}}function Wp(e,r,t){r[t]=e&255}function See(e,r,t){for(;e>127;)r[t++]=e&127|128,e>>>=7;r[t]=e}class Tee extends ia{constructor(t,n){super(See,t,n);g(this,"next");this.next=void 0}}function Oc(e,r,t){for(;e.hi!==0;)r[t++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)r[t++]=e.lo&127|128,e.lo=e.lo>>>7;r[t++]=e.lo}function Xi(e,r,t){r[t]=e&255,r[t+1]=e>>>8&255,r[t+2]=e>>>16&255,r[t+3]=e>>>24}function Pee(e,r,t){r.set(e,t)}globalThis.Buffer!=null&&(Jv.prototype.bytes=function(e){const r=e.length>>>0;return this.uint32(r),r>0&&this._push(Cee,r,e),this},Jv.prototype.string=function(e){const r=globalThis.Buffer.byteLength(e);return this.uint32(r),r>0&&this._push(Aee,r,e),this});function Cee(e,r,t){r.set(e,t)}function Aee(e,r,t){e.length<40?nT(e,r,t):r.utf8Write!=null?r.utf8Write(e,t):r.set(bt(e),t)}function Iee(){return new Jv}function iT(e,r){const t=Iee();return r.encode(e,t,{lengthDelimited:!1}),t.finish()}var yl;(function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"})(yl||(yl={}));function aT(e,r,t,n){return{name:e,type:r,encode:t,decode:n}}function Ree(e){function r(o){if(e[o.toString()]==null)throw new Error("Invalid enum value");return e[o]}const t=function(i,a){const s=r(i);a.int32(s)},n=function(i){const a=i.int32();return r(a)};return aT("enum",yl.VARINT,t,n)}function uT(e,r){return aT("message",yl.LENGTH_DELIMITED,e,r)}var ze;(function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.secp256k1="secp256k1",e.ECDSA="ECDSA"})(ze||(ze={}));var e_;(function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.secp256k1=2]="secp256k1",e[e.ECDSA=3]="ECDSA"})(e_||(e_={}));(function(e){e.codec=()=>Ree(e_)})(ze||(ze={}));var Wo;(function(e){let r;e.codec=()=>(r==null&&(r=uT((t,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),t.Type!=null&&(n.uint32(8),ze.codec().encode(t.Type,n)),t.Data!=null&&(n.uint32(18),n.bytes(t.Data)),o.lengthDelimited!==!1&&n.ldelim()},(t,n,o={})=>{const i={},a=n==null?t.len:t.pos+n;for(;t.pos<a;){const s=t.uint32();switch(s>>>3){case 1:{i.Type=ze.codec().decode(t);break}case 2:{i.Data=t.bytes();break}default:{t.skipType(s&7);break}}}return i})),r),e.encode=t=>iT(t,e.codec()),e.decode=(t,n)=>oT(t,e.codec(),n)})(Wo||(Wo={}));var g0;(function(e){let r;e.codec=()=>(r==null&&(r=uT((t,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),t.Type!=null&&(n.uint32(8),ze.codec().encode(t.Type,n)),t.Data!=null&&(n.uint32(18),n.bytes(t.Data)),o.lengthDelimited!==!1&&n.ldelim()},(t,n,o={})=>{const i={},a=n==null?t.len:t.pos+n;for(;t.pos<a;){const s=t.uint32();switch(s>>>3){case 1:{i.Type=ze.codec().decode(t);break}case 2:{i.Data=t.bytes();break}default:{t.skipType(s&7);break}}}return i})),r),e.encode=t=>iT(t,e.codec()),e.decode=(t,n)=>oT(t,e.codec(),n)})(g0||(g0={}));class $ee{constructor(r,t){g(this,"type","RSA");g(this,"jwk");g(this,"_raw");g(this,"_multihash");this.jwk=r,this._multihash=t}get raw(){return this._raw==null&&(this._raw=Dee(this.jwk)),this._raw}toMultihash(){return this._multihash}toCID(){return G.createV1(114,this._multihash)}toString(){return Be.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:qr(this.raw,r.raw)}verify(r,t,n){return Fee(this.jwk,t,r,n)}}const jee=18,Nee=1062,kee=Uint8Array.from([48,13,6,9,42,134,72,134,247,13,1,1,1,5,0]);function Mee(e){const r=Md(e[1],{offset:0});return{kty:"RSA",n:Se(r[0],"base64url"),e:Se(r[1],"base64url")}}function Dee(e){if(e.n==null||e.e==null)throw new Tt("JWK was missing components");return ya([kee,QS(ya([Xv(bt(e.n,"base64url")),Xv(bt(e.e,"base64url"))]))]).subarray()}function Lee(e,r){if(e.byteLength>=Nee)throw new By("Key size is too large");const t=Md(e,{offset:0});return Uee(t,e,r)}function Uee(e,r,t){const n=Mee(e);if(t==null){const o=KP(Wo.encode({Type:ze.RSA,Data:r}));t=Pa(jee,o)}return new $ee(n,t)}async function Fee(e,r,t,n){var a,s;const o=await Ra.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);(a=n==null?void 0:n.signal)==null||a.throwIfAborted();const i=await Ra.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},o,r,t instanceof Uint8Array?t:t.subarray());return(s=n==null?void 0:n.signal)==null||s.throwIfAborted(),i}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bl={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const Bee=BigInt(1),t_=BigInt(2),w0=(e,r)=>(e+r/t_)/r;function xee(e){const r=bl.p,t=BigInt(3),n=BigInt(6),o=BigInt(11),i=BigInt(22),a=BigInt(23),s=BigInt(44),c=BigInt(88),u=e*e*e%r,l=u*u*e%r,d=we(l,t,r)*l%r,h=we(d,t,r)*l%r,p=we(h,t_,r)*u%r,v=we(p,o,r)*p%r,y=we(v,i,r)*v%r,_=we(y,s,r)*y%r,b=we(_,c,r)*_%r,w=we(b,s,r)*y%r,S=we(w,t,r)*l%r,E=we(S,a,r)*v%r,T=we(E,n,r)*u%r,C=we(T,t_,r);if(!r_.eql(r_.sqr(C),e))throw new Error("Cannot find square root");return C}const r_=u_(bl.p,void 0,void 0,{sqrt:xee}),ml=YP({...bl,Fp:r_,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const r=bl.n,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Bee*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,a=BigInt("0x100000000000000000000000000000000"),s=w0(i*e,r),c=w0(-n*e,r);let u=Gt(e-s*t-c*o,r),l=Gt(-s*n-c*i,r);const d=u>a,h=l>a;if(d&&(u=r-u),h&&(l=r-l),u>a||l>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:h,k2:l}}}},xP);function Vee(e,r,t,n){var i;const o=yy.digest(t instanceof Uint8Array?t:t.subarray());if(eT(o))return o.then(({digest:a})=>{var s;return(s=n==null?void 0:n.signal)==null||s.throwIfAborted(),ml.verify(r,a,e)}).catch(a=>{throw a.name==="AbortError"?a:new b0(String(a))});try{return(i=n==null?void 0:n.signal)==null||i.throwIfAborted(),ml.verify(r,o.digest,e)}catch(a){throw new b0(String(a))}}class Wee{constructor(r){g(this,"type","secp256k1");g(this,"raw");g(this,"_key");this._key=Hee(r),this.raw=zee(this._key)}toMultihash(){return Hr.digest(qy(this))}toCID(){return G.createV1(114,this.toMultihash())}toString(){return Be.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:qr(this.raw,r.raw)}verify(r,t,n){return Vee(this._key,t,r,n)}}function sT(e){return new Wee(e)}function zee(e){return ml.ProjectivePoint.fromHex(e).toRawBytes(!0)}function Hee(e){try{return ml.ProjectivePoint.fromHex(e),e}catch(r){throw new By(String(r))}}function qee(e,r){const{Type:t,Data:n}=Wo.decode(e),o=n??new Uint8Array;switch(t){case ze.RSA:return Lee(o,r);case ze.Ed25519:return tT(o);case ze.secp256k1:return sT(o);case ze.ECDSA:return XS(o);default:throw new xy}}function Gee(e){const{Type:r,Data:t}=Wo.decode(e.digest),n=t??new Uint8Array;switch(r){case ze.Ed25519:return tT(n);case ze.secp256k1:return sT(n);case ze.ECDSA:return XS(n);default:throw new xy}}function qy(e){return Wo.encode({Type:ze[e.type],Data:e.raw})}const cT=Symbol.for("nodejs.util.inspect.custom"),Kee=114;var z0;class Gy{constructor(r){g(this,"type");g(this,"multihash");g(this,"publicKey");g(this,"string");g(this,z0,!0);this.type=r.type,this.multihash=r.multihash,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}toString(){return this.string==null&&(this.string=Be.encode(this.multihash.bytes).slice(1)),this.string}toMultihash(){return this.multihash}toCID(){return G.createV1(Kee,this.multihash)}toJSON(){return this.toString()}equals(r){var t;if(r==null)return!1;if(r instanceof Uint8Array)return qr(this.multihash.bytes,r);if(typeof r=="string")return this.toString()===r;if(((t=r==null?void 0:r.toMultihash())==null?void 0:t.bytes)!=null)return qr(this.multihash.bytes,r.toMultihash().bytes);throw new Error("not valid Id")}[(z0=zS,cT)](){return`PeerId(${this.toString()})`}}class Yee extends Gy{constructor(t){super({...t,type:"RSA"});g(this,"type","RSA");g(this,"publicKey");this.publicKey=t.publicKey}}class Zee extends Gy{constructor(t){super({...t,type:"Ed25519"});g(this,"type","Ed25519");g(this,"publicKey");this.publicKey=t.publicKey}}class Qee extends Gy{constructor(t){super({...t,type:"secp256k1"});g(this,"type","secp256k1");g(this,"publicKey");this.publicKey=t.publicKey}}const Xee=2336;var H0,q0;class lT{constructor(r){g(this,"type","url");g(this,"multihash");g(this,"publicKey");g(this,"url");g(this,H0,!0);this.url=r.toString(),this.multihash=Hr.digest(bt(this.url))}[(q0=cT,H0=zS,q0)](){return`PeerId(${this.url})`}toString(){return this.toCID().toString()}toMultihash(){return this.multihash}toCID(){return G.createV1(Xee,this.toMultihash())}toJSON(){return this.toString()}equals(r){return r==null?!1:(r instanceof Uint8Array&&(r=Se(r)),r.toString()===this.toString())}}const Jee=114,O0=2336;function dt(e,r){let t;if(e.charAt(0)==="1"||e.charAt(0)==="Q")t=qE(Be.decode(`z${e}`));else{if(e.startsWith("k51qzi5uqu5")||e.startsWith("kzwfwjn5ji4")||e.startsWith("k2k4r8")||e.startsWith("bafz"))return ete(G.parse(e));throw new Tt('Please pass a multibase decoder for strings that do not start with "1" or "Q"')}return fT(t)}function fT(e){if(rte(e))return new Yee({multihash:e});if(tte(e))try{const r=Gee(e);if(r.type==="Ed25519")return new Zee({multihash:e,publicKey:r});if(r.type==="secp256k1")return new Qee({multihash:e,publicKey:r})}catch{const t=Se(e.digest);return new lT(new URL(t))}throw new qS("Supplied PeerID Multihash is invalid")}function ete(e){if((e==null?void 0:e.multihash)==null||e.version==null||e.version===1&&e.code!==Jee&&e.code!==O0)throw new HS("Supplied PeerID CID is invalid");if(e.code===O0){const r=Se(e.multihash.digest);return new lT(new URL(r))}return fT(e.multihash)}function tte(e){return e.code===Hr.code}function rte(e){return e.code===yy.code}function dT(e){return async function(t={}){const n=await e.post("bitswap/stat",{searchParams:R(t),signal:t.signal,headers:t.headers});return nte(await n.json())}}function nte(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist??[]).map(r=>G.parse(r["/"])),peers:(e.Peers??[]).map(r=>dt(r)),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}function ote(e){return async function(t,n={}){return((await(await e.post("bitswap/wantlist",{signal:n.signal,searchParams:R({...n,peer:t.toString()}),headers:n.headers})).json()).Keys??[]).map(i=>G.parse(i["/"]))}}function ite(e){return async function(t={}){return((await(await e.post("bitswap/wantlist",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()).Keys??[]).map(o=>G.parse(o["/"]))}}function ate(e){return{wantlist:ite(e),wantlistForPeer:ote(e),stat:dT(e)}}function hT(e){return async function(t,n={}){const o=await e.post("block/get",{signal:n.signal,searchParams:R({arg:t.toString(),...n}),headers:n.headers});return new Uint8Array(await o.arrayBuffer())}}function ute(e){return async function r(t,n={}){const o=new AbortController,i=Tr([o.signal,n.signal]);let a;try{a=await(await e.post("block/put",{signal:i,searchParams:R(n),...await sn([t],o,n.headers)})).json()}catch(s){if(n.format==="dag-pb")return await r(t,{...n,format:"protobuf"});if(n.format==="dag-cbor")return await r(t,{...n,format:"cbor"});throw s}finally{i.clear()}return G.parse(a.Key)}}function ste(e){return async function*(t,n={}){Array.isArray(t)||(t=[t]);const o=await e.post("block/rm",{signal:n.signal,searchParams:R({arg:t.map(i=>i.toString()),"stream-channels":!0,...n}),headers:n.headers});for await(const i of o.ndjson())yield cte(i)}}function cte(e){const r={cid:G.parse(e.Hash)};return e.Error!=null&&(r.error=new Error(e.Error)),r}function lte(e){return async function(t,n={}){const i=await(await e.post("block/stat",{signal:n.signal,searchParams:R({arg:t.toString(),...n}),headers:n.headers})).json();return{cid:G.parse(i.Key),size:i.Size}}}function fte(e){return{get:hT(e),put:ute(e),rm:ste(e),stat:lte(e)}}function dte(e){return async function(t,n={}){const o=await e.post("bootstrap/add",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers}),{Peers:i}=await o.json();return{Peers:i.map(a=>ct(a))}}}function hte(e){return async function(t={}){const n=await e.post("bootstrap/list",{signal:t.signal,searchParams:R(t),headers:t.headers}),{Peers:o}=await n.json();return{Peers:o.map(i=>ct(i))}}}function pte(e){return async function(t,n={}){const o=await e.post("bootstrap/rm",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers}),{Peers:i}=await o.json();return{Peers:i.map(a=>ct(a))}}}function vte(e){return{add:dte(e),list:hte(e),rm:pte(e)}}function _te(e){return async function*(t,n={}){yield*(await e.post("cat",{signal:n.signal,searchParams:R({arg:t.toString(),...n}),headers:n.headers})).iterator()}}function yte(e){return async function(t={}){return(await e.post("commands",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()}}function bte(e){return async function(t={}){return await(await e.post("config/show",{signal:t.signal,searchParams:R({...t}),headers:t.headers})).json()}}function mte(e){return async function(t,n={}){if(t==null)throw new Error("key argument is required");return(await(await e.post("config",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers})).json()).Value}}function gte(e){return async function(t,n={}){const i=await(await e.post("config/profile/apply",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers})).json();return{original:i.OldCfg,updated:i.NewCfg}}}function wte(e){return{apply:gte(e)}}function Ote(e){return async function(t,n={}){const o=new AbortController,i=Tr([o.signal,n.signal]);try{await(await e.post("config/replace",{signal:i,searchParams:R(n),...await sn([bt(JSON.stringify(t))],o,n.headers)})).text()}finally{i.clear()}}}function Ete(e){return async function(t,n,o={}){if(typeof t!="string")throw new Error("Invalid key type");const i={...o,...Ste(t,n)};await(await e.post("config",{signal:o.signal,searchParams:R(i),headers:o.headers})).text()}}function Ste(e,r){switch(typeof r){case"boolean":return{arg:[e,r.toString()],bool:!0};case"string":return{arg:[e,r]};default:return{arg:[e,JSON.stringify(r)],json:!0}}}function Tte(e){return{getAll:bte(e),get:mte(e),set:Ete(e),replace:Ote(e),profiles:wte(e)}}function Pte(e){return async function*(t,n={}){yield*(await e.post("dag/export",{signal:n.signal,searchParams:R({arg:t.toString()}),headers:n.headers})).iterator()}}function Cte(e){return e[Symbol.asyncIterator]!=null}function Ate(e){if(Cte(e))return(async()=>{for await(const r of e)return r})();for(const r of e)return r}async function*E0(e,r,t,n,o){const i=async u=>{const l=await t.getCodec(u.code),d=await n(u,o);return l.decode(d)},a=r.split("/").filter(Boolean);let s=await i(e),c=e;for(;a.length>0;){const u=a.shift();if(u==null)throw Xt(new Error(`Could not resolve path "${r}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(s,u))s=s[u],yield{value:s,remainderPath:a.join("/")};else throw Xt(new Error(`no link named "${u}" under ${c}`),"ERR_NO_LINK");const l=G.asCID(s);l!=null&&(c=l,s=await i(s))}yield{value:s,remainderPath:""}}function Ite(e,r){const t=hT(e);return async function(o,i={}){if(i.path!=null){const l=i.localResolve===!0?await Ate(E0(o,i.path,r,t,i)):await kd(E0(o,i.path,r,t,i));if(l==null)throw Xt(new Error("Not found"),"ERR_NOT_FOUND");return l}const a=await r.getCodec(o.code),s=await t(o,i);return{value:a.decode(s),remainderPath:""}}}function Rte(e){return async function*(t,n={}){const o=new AbortController,i=Tr([o.signal,n.signal]);try{const{headers:a,body:s}=await sn(t,o,n.headers),c=await e.post("dag/import",{signal:i,headers:a,body:s,searchParams:R({"pin-roots":n.pinRoots})});for await(const{Root:u}of c.ndjson())if(u!==void 0){const{Cid:{"/":l},PinErrorMsg:d}=u;yield{root:{cid:G.parse(l),pinErrorMsg:d}}}}finally{i.clear()}}}function $te(e,r){return async function(n,o={}){const i={storeCodec:"dag-cbor",hashAlg:"sha2-256",...o};let a;if(i.inputCodec!=null){if(!(n instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");a=n}else a=(await r.getCodec(i.storeCodec??"dag-cbor")).encode(n),i.inputCodec=i.storeCodec;const s=new AbortController,c=Tr([s.signal,i.signal]);try{const l=await(await e.post("dag/put",{timeout:i.timeout,signal:c,searchParams:R(i),...await sn([a],s,i.headers)})).json();return G.parse(l.Cid["/"])}finally{c.clear()}}}function jte(e){return async function(t,n={}){const i=await(await e.post("dag/resolve",{signal:n.signal,searchParams:R({arg:`${t}${n.path!=null?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers})).json();return{cid:G.parse(i.Cid["/"]),remainderPath:i.RemPath}}}function Nte(e,r){return{export:Pte(e),get:Ite(e,r),import:Rte(e),put:$te(e,r),resolve:jte(e)}}const kte=0,Mte=1,Dte=2,Lte=3,Ute=4,Fte=5,Bte=6,xte=7;function ki(e){var r;if(e.Type===kte)return{name:"SENDING_QUERY",type:e.Type};if(e.Type===Mte)return{from:dt(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses??[]).map(({ID:t,Addrs:n})=>({id:dt(t),multiaddrs:n.map(o=>ct(o)),protocols:[]})),providers:(e.Responses??[]).map(({ID:t,Addrs:n})=>({id:dt(t),multiaddrs:n.map(o=>ct(o)),protocols:[]}))};if(e.Type===Dte){let t={id:e.ID??dt(e.ID),multiaddrs:[],protocols:[]};return((r=e.Responses)==null?void 0:r.length)>0&&(t={id:dt(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map(n=>ct(n)),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:t}}if(e.Type===Lte)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(e.Type===Ute)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map(({ID:t,Addrs:n})=>({id:dt(t),multiaddrs:n.map(o=>ct(o)),protocols:[]}))};if(e.Type===Fte)return{name:"VALUE",type:e.Type,value:bt(e.Extra,"base64pad")};if(e.Type===Bte){const t=e.Responses.map(({ID:n})=>dt(n));if(t.length===0)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:t[0]}}if(e.Type===xte)return{name:"DIALING_PEER",type:e.Type,peer:dt(e.ID)};throw new Error("Unknown DHT event type")}function Vte(e){return async function*(t,n={}){const o=await e.post("dht/query",{signal:n.signal,searchParams:R({arg:t.toString(),...n}),headers:n.headers});for await(const i of o.ndjson())yield ki(i)}}var S0;(function(e){e[e.SENDING_QUERY=0]="SENDING_QUERY",e[e.PEER_RESPONSE=1]="PEER_RESPONSE",e[e.FINAL_PEER=2]="FINAL_PEER",e[e.QUERY_ERROR=3]="QUERY_ERROR",e[e.PROVIDER=4]="PROVIDER",e[e.VALUE=5]="VALUE",e[e.ADDING_PEER=6]="ADDING_PEER",e[e.DIALING_PEER=7]="DIALING_PEER"})(S0||(S0={}));var T0;(function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"})(T0||(T0={}));function Wte(e){return{query:Vte(e)}}function zte(e){return async function(t={}){return(await e.post("diag/cmds",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()}}function Hte(e){return async function(t={}){return(await e.post("diag/net",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()}}function qte(e){return async function(t={}){return(await e.post("diag/sys",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()}}function Gte(e){return{cmds:zte(e),net:Hte(e),sys:qte(e)}}function Kte(e){return async function(t,n,o={}){const i=Array.isArray(t)?t:[t];await(await e.post("files/cp",{signal:o.signal,searchParams:R({arg:i.concat(n).map(s=>G.asCID(s)!=null?`/ipfs/${s}`:s),...o}),headers:o.headers})).text()}}function Yte(e){return async function(t,n={}){if(typeof t!="string")throw new Error("ipfs.files.flush requires a path");const i=await(await e.post("files/flush",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers})).json();return G.parse(i.Cid)}}function n_(e){const r=Ge(e);return Object.prototype.hasOwnProperty.call(r,"mode")&&(r.mode=parseInt(r.mode,8)),Object.prototype.hasOwnProperty.call(r,"mtime")&&(r.mtime={secs:r.mtime,nsecs:r.mtimeNsecs??0},delete r.mtimeNsecs),r}function Zte(e){return async function*(t,n={}){if(t==null)throw new Error("ipfs.files.ls requires a path");const o=await e.post("files/ls",{signal:n.signal,searchParams:R({arg:G.asCID(t)!=null?`/ipfs/${t}`:t,long:!0,...n,stream:!0}),headers:n.headers});for await(const i of o.ndjson())if("Entries"in i)for(const a of i.Entries??[])yield P0(n_(a));else yield P0(n_(i))}}function P0(e){return e.hash!=null&&(e.cid=G.parse(e.hash)),delete e.hash,e.type=e.type===1?"directory":"file",e}function Qte(e){return async function(t,n={}){await(await e.post("files/mkdir",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers})).text()}}function Xte(e){return async function(t,n,o={}){Array.isArray(t)||(t=[t]),await(await e.post("files/mv",{signal:o.signal,searchParams:R({arg:t.concat(n),...o}),headers:o.headers})).text()}}function Jte(e){if(tre(e))return async function*(){const r=e.getReader();try{for(;;){const{done:t,value:n}=await r.read();if(t)return;yield n}}finally{r.releaseLock()}}();if(ere(e))return e;throw new Error("unknown stream")}function ere(e){return e[Symbol.asyncIterator]!=null}function tre(e){return typeof(e==null?void 0:e.getReader)=="function"}function rre(e){return async function*(t,n={}){const o=await e.post("files/read",{signal:n.signal,searchParams:R({arg:t,count:n.length,...n}),headers:n.headers});if(o.body==null)throw new Error("Invalid response body");yield*Jte(o.body)}}function nre(e){return async function(t,n={}){const o=await e.post("files/rm",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers}),i=await o.text();if(i!==""){const a=new sJ(o);throw a.message=i,a}}}function pT(e){return async function(t,n={}){const i=await(await e.post("files/stat",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers})).json();return i.WithLocality=i.WithLocality??!1,ore(n_(i))}}function ore(e){return e.cid=G.parse(e.hash),delete e.hash,e}function ire(e){return async function(t,n,o={}){const i=new AbortController,a=Tr([i.signal,o.signal]);try{await(await e.post("files/write",{signal:a,searchParams:R({arg:t,streamChannels:!0,count:o.length,...o}),...await sn([{content:n,path:"arg",mode:Vy(o.mode),mtime:Nd(o.mtime)}],i,o.headers)})).text()}finally{a.clear()}}}function are(e){return{cp:Kte(e),flush:Yte(e),ls:Zte(e),mkdir:Qte(e),mv:Xte(e),read:rre(e),rm:nre(e),stat:pT(e),write:ire(e)}}function ure(e){return function(){const t=new URL(e.opts.base??"");return{host:t.hostname,port:t.port,protocol:t.protocol,pathname:t.pathname,"api-path":t.pathname}}}function sre(e){return async function*(t,n={}){const o={arg:`${t instanceof Uint8Array?G.decode(t):t}`,...n};yield*(await e.post("get",{signal:n.signal,searchParams:R(o),headers:n.headers})).iterator()}}function vT(e){return async function(t={}){const o=await(await e.post("id",{signal:t.signal,searchParams:R({arg:t.peerId!=null?t.peerId.toString():void 0,...t}),headers:t.headers})).json(),i={...Ge(o)};return i.id=dt(i.id),i.addresses!=null&&(i.addresses=i.addresses.map(a=>ct(a))),i}}function cre(e){const r=vT(e);return async function(n={}){var o;try{const i=await r(n);return!!((o=i==null?void 0:i.addresses)!=null&&o.length)}catch{return!1}}}const lre={type:"ed25519"};function fre(e){return async function(t,n=lre){const i=await(await e.post("key/gen",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers})).json();return Ge(i)}}function dre(e){return async function(t,n,o,i={}){const s=await(await e.post("key/import",{signal:i.signal,searchParams:R({arg:t,pem:n,password:o,...i}),headers:i.headers})).json();return Ge(s)}}function hre(e){return async function(t={}){return((await(await e.post("key/list",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()).Keys??[]).map(i=>Ge(i))}}function pre(e){return async function(t,n,o={}){const i=await e.post("key/rename",{signal:o.signal,searchParams:R({arg:[t,n],...o}),headers:o.headers});return Ge(await i.json())}}function vre(e){return async function(t,n={}){const i=await(await e.post("key/rm",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers})).json();return Ge(i.Keys[0])}}function _re(e){return{gen:fre(e),import:dre(e),list:hre(e),rename:pre(e),rm:vre(e)}}const zo=1e3,Ho=zo*60,qo=Ho*60,qn=qo*24,yre=qn*7,bre=qn*365.25;function _T(e,r){try{if(typeof e=="string"&&e.length>0)return mre(e);if(typeof e=="number"&&isFinite(e))return r!=null&&r.long?wre(e):gre(e);throw new Error("Value is not a string or number.")}catch(t){const n=Ore(t)?`${t.message}. value=${JSON.stringify(e)}`:"An unknown error has occured.";throw new Error(n)}}function mre(e){if(e=String(e),e.length>100)throw new Error("Value exceeds the maximum length of 100 characters.");const r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!r)return NaN;const t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*bre;case"weeks":case"week":case"w":return t*yre;case"days":case"day":case"d":return t*qn;case"hours":case"hour":case"hrs":case"hr":case"h":return t*qo;case"minutes":case"minute":case"mins":case"min":case"m":return t*Ho;case"seconds":case"second":case"secs":case"sec":case"s":return t*zo;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:throw new Error(`The unit ${n} was matched, but no matching case exists.`)}}function gre(e){const r=Math.abs(e);return r>=qn?`${Math.round(e/qn)}d`:r>=qo?`${Math.round(e/qo)}h`:r>=Ho?`${Math.round(e/Ho)}m`:r>=zo?`${Math.round(e/zo)}s`:`${e}ms`}function wre(e){const r=Math.abs(e);return r>=qn?Ec(e,r,qn,"day"):r>=qo?Ec(e,r,qo,"hour"):r>=Ho?Ec(e,r,Ho,"minute"):r>=zo?Ec(e,r,zo,"second"):`${e} ms`}function Ec(e,r,t,n){const o=r>=t*1.5;return`${Math.round(e/t)} ${n}${o?"s":""}`}function Ore(e){return typeof e=="object"&&e!==null&&"message"in e}function Ere(e){t.debug=t,t.default=t,t.coerce=c,t.disable=i,t.enable=o,t.enabled=a,t.humanize=_T,t.destroy=u,Object.keys(e).forEach(l=>{t[l]=e[l]}),t.names=[],t.skips=[],t.formatters={};function r(l){let d=0;for(let h=0;h<l.length;h++)d=(d<<5)-d+l.charCodeAt(h),d|=0;return t.colors[Math.abs(d)%t.colors.length]}t.selectColor=r;function t(l){let d,h=null,p,v;function y(..._){if(!y.enabled)return;const b=y,w=Number(new Date),S=w-(d||w);b.diff=S,b.prev=d,b.curr=w,d=w,_[0]=t.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let E=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(C,P)=>{if(C==="%%")return"%";E++;const I=t.formatters[P];if(typeof I=="function"){const M=_[E];C=I.call(b,M),_.splice(E,1),E--}return C}),t.formatArgs.call(b,_),(b.log||t.log).apply(b,_)}return y.namespace=l,y.useColors=t.useColors(),y.color=t.selectColor(l),y.extend=n,y.destroy=t.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==t.namespaces&&(p=t.namespaces,v=t.enabled(l)),v),set:_=>{h=_}}),typeof t.init=="function"&&t.init(y),y}function n(l,d){const h=t(this.namespace+(typeof d>"u"?":":d)+l);return h.log=this.log,h}function o(l){t.save(l),t.namespaces=l,t.names=[],t.skips=[];let d;const h=(typeof l=="string"?l:"").split(/[\s,]+/),p=h.length;for(d=0;d<p;d++)h[d]&&(l=h[d].replace(/\*/g,".*?"),l[0]==="-"?t.skips.push(new RegExp("^"+l.substr(1)+"$")):t.names.push(new RegExp("^"+l+"$")))}function i(){const l=[...t.names.map(s),...t.skips.map(s).map(d=>"-"+d)].join(",");return t.enable(""),l}function a(l){if(l[l.length-1]==="*")return!0;let d,h;for(d=0,h=t.skips.length;d<h;d++)if(t.skips[d].test(l))return!1;for(d=0,h=t.names.length;d<h;d++)if(t.names[d].test(l))return!0;return!1}function s(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack??l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.setupFormatters(t.formatters),t.enable(t.load()),t}var Sre={};const Yt=$re(),Tre=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Pre(){var e,r,t,n,o;return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&((e=navigator.userAgent)==null?void 0:e.toLowerCase().match(/(edge|trident)\/(\d+)/))!=null?!1:typeof document<"u"&&((t=(r=document.documentElement)==null?void 0:r.style)==null?void 0:t.WebkitAppearance)||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&((n=navigator.userAgent)==null?void 0:n.toLowerCase().match(/firefox\/(\d+)/))!=null&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&((o=navigator.userAgent)==null?void 0:o.toLowerCase().match(/applewebkit\/(\d+)/))}function Cre(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+_T(this.diff),!this.useColors)return;const r="color: "+this.color;e.splice(1,0,r,"color: inherit");let t=0,n=0;e[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(t++,o==="%c"&&(n=t))}),e.splice(n,0,r)}const Are=console.debug??console.log??(()=>{});function Ire(e){try{e?Yt==null||Yt.setItem("debug",e):Yt==null||Yt.removeItem("debug")}catch{}}function Rre(){let e;try{e=Yt==null?void 0:Yt.getItem("debug")}catch{}return!e&&typeof globalThis.process<"u"&&"env"in globalThis.process&&(e=Sre.DEBUG),e}function $re(){try{return localStorage}catch{}}function jre(e){e.j=function(r){try{return JSON.stringify(r)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}const pt=Ere({formatArgs:Cre,save:Ire,load:Rre,useColors:Pre,setupFormatters:jre,colors:Tre,storage:Yt,log:Are});pt.formatters.b=e=>e==null?"undefined":Be.baseEncode(e);pt.formatters.t=e=>e==null?"undefined":$n.baseEncode(e);pt.formatters.m=e=>e==null?"undefined":Sd.baseEncode(e);pt.formatters.p=e=>e==null?"undefined":e.toString();pt.formatters.c=e=>e==null?"undefined":e.toString();pt.formatters.k=e=>e==null?"undefined":e.toString();pt.formatters.a=e=>e==null?"undefined":e.toString();pt.formatters.e=e=>e==null?"undefined":C0(e.stack)??C0(e.message)??e.toString();function Nre(e){const r=()=>{};return r.enabled=!1,r.color="",r.diff=0,r.log=()=>{},r.namespace=e,r.destroy=()=>!0,r.extend=()=>r,r}function Ky(e){let r=Nre(`${e}:trace`);return pt.enabled(`${e}:trace`)&&pt.names.map(t=>t.toString()).find(t=>t.includes(":trace"))!=null&&(r=pt(`${e}:trace`)),Object.assign(pt(e),{error:pt(`${e}:error`),trace:r})}function C0(e){if(e!=null&&(e=e.trim(),e.length!==0))return e}var kre=e=>{if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const r=Object.getPrototypeOf(e);return r===null||r===Object.prototype};const gl=kre,{hasOwnProperty:yT}=Object.prototype,{propertyIsEnumerable:Mre}=Object,Go=(e,r,t)=>Object.defineProperty(e,r,{value:t,writable:!0,enumerable:!0,configurable:!0}),Dre=f,A0={concatArrays:!1,ignoreUndefined:!1},Ld=e=>{const r=[];for(const t in e)yT.call(e,t)&&r.push(t);if(Object.getOwnPropertySymbols){const t=Object.getOwnPropertySymbols(e);for(const n of t)Mre.call(e,n)&&r.push(n)}return r};function Mi(e){return Array.isArray(e)?Lre(e):gl(e)?Ure(e):e}function Lre(e){const r=e.slice(0,0);return Ld(e).forEach(t=>{Go(r,t,Mi(e[t]))}),r}function Ure(e){const r=Object.getPrototypeOf(e)===null?Object.create(null):{};return Ld(e).forEach(t=>{Go(r,t,Mi(e[t]))}),r}const bT=(e,r,t,n)=>(t.forEach(o=>{typeof r[o]>"u"&&n.ignoreUndefined||(o in e&&e[o]!==Object.getPrototypeOf(e)?Go(e,o,o_(e[o],r[o],n)):Go(e,o,Mi(r[o])))}),e),Fre=(e,r,t)=>{let n=e.slice(0,0),o=0;return[e,r].forEach(i=>{const a=[];for(let s=0;s<i.length;s++)yT.call(i,s)&&(a.push(String(s)),i===e?Go(n,o++,i[s]):Go(n,o++,Mi(i[s])));n=bT(n,i,Ld(i).filter(s=>!a.includes(s)),t)}),n};function o_(e,r,t){return t.concatArrays&&Array.isArray(e)&&Array.isArray(r)?Fre(e,r,t):!gl(r)||!gl(e)?Mi(r):bT(e,r,Ld(r),t)}var Bre=function(...e){const r=o_(Mi(A0),this!==Dre&&this||{},A0);let t={_:{}};for(const n of e)if(n!==void 0){if(!gl(n))throw new TypeError("`"+n+"` is not an Option Object");t=o_(t,{_:n},r)}return t._};const mT=a_(Bre),ae=Object.create(null),gT=6e4,wT=gT*60,Yy=wT*24,OT=Yy*365.25;ae.year=ae.yr=ae.y=OT;ae.month=ae.mo=ae.mth=OT/12;ae.week=ae.wk=ae.w=Yy*7;ae.day=ae.d=Yy;ae.hour=ae.hr=ae.h=wT;ae.minute=ae.min=ae.m=gT;ae.second=ae.sec=ae.s=1e3;ae.millisecond=ae.millisec=ae.ms=1;ae.microsecond=ae.microsec=ae.us=ae.s=.001;ae.nanosecond=ae.nanosec=ae.ns=1e-6;ae.group=",";ae.decimal=".";ae.placeholder=" _";const xre=/((?:\d{1,16}(?:\.\d{1,16})?|\.\d{1,16})(?:[eE][-+]?\d{1,4})?)\s?([\p{L}]{0,14})/gu;Kt.unit=ae;function Kt(e="",r="ms"){let t=null,n;return String(e).replace(new RegExp(`(\\d)[${Kt.unit.placeholder}${Kt.unit.group}](\\d)`,"g"),"$1$2").replace(Kt.unit.decimal,".").replace(xre,(o,i,a)=>{if(a)a=a.toLowerCase();else if(n){for(const s in Kt.unit)if(Kt.unit[s]<n){a=s;break}}else a=r;n=a=Kt.unit[a]||Kt.unit[a.replace(/s$/,"")],a&&(t=(t||0)+i*a)}),t&&t/(Kt.unit[r]||1)*(e[0]==="-"?-1:1)}const Vre=()=>{},Wre=typeof navigator<"u"&&navigator.product==="ReactNative";function zre(){return Wre?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const ba=self.URL,ET=zre();let Hre=class{constructor(r="",t=ET){this.super=new ba(r,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(r){this.super.hash=r}set host(r){this.super.host=r}set hostname(r){this.super.hostname=r}set href(r){this.super.href=r}set password(r){this.super.password=r}set pathname(r){this.super.pathname=r}set port(r){this.super.port=r}set protocol(r){this.super.protocol=r}set search(r){this.super.search=r}set username(r){this.super.username=r}static createObjectURL(r){return ba.createObjectURL(r)}static revokeObjectURL(r){ba.revokeObjectURL(r)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function qre(e){if(typeof e=="string")return new ba(e).toString();if(!(e instanceof ba)){const r=e.username&&e.password?`${e.username}:${e.password}@`:"",t=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",o=e.protocol?e.protocol+"//":"",i=e.host||"",a=e.hostname||"",s=e.search||(e.query?"?"+e.query:""),c=e.hash||"",u=e.pathname||"",l=e.path||u+s;return`${o}${r||t}${i||a+n}${l}${c}`}}var ST={URLWithLegacySupport:Hre,URLSearchParams:self.URLSearchParams,defaultBase:ET,format:qre};const{URLWithLegacySupport:I0,format:Gre}=ST;var Kre=(e,r={},t={},n)=>{let o=r.protocol?r.protocol.replace(":",""):"http";o=(t[o]||n||o)+":";let i;try{i=new I0(e)}catch{i={}}const a=Object.assign({},r,{protocol:o||i.protocol,host:r.host||i.host});return new I0(e,Gre(a)).toString()};const{URLWithLegacySupport:Yre,format:Zre,URLSearchParams:Qre,defaultBase:Xre}=ST,Jre=Kre;var Sc={URL:Yre,URLSearchParams:Qre,format:Zre,relative:Jre,defaultBase:Xre};class TT extends Error{constructor(r="Request timed out"){super(r),this.name="TimeoutError"}}class ene extends Error{constructor(r="The operation was aborted."){super(r),this.name="AbortError"}}class R0 extends Error{constructor(t){super(t.statusText);g(this,"response");this.name="HTTPError",this.response=t}}const tne=globalThis.fetch,Zy=globalThis.Headers,rne=globalThis.Request,PT=globalThis.Response,nne=async(e,r={})=>{const t=new XMLHttpRequest;t.open(r.method??"GET",e.toString(),!0);const{timeout:n,headers:o}=r,i=Number(n);if(!isNaN(i)&&i>0&&i<1/0&&(t.timeout=i),r.overrideMimeType!=null&&t.overrideMimeType(r.overrideMimeType),o!=null)for(const[a,s]of new Zy(o))t.setRequestHeader(a,s);return r.signal!=null&&(r.signal.onabort=()=>{t.abort()}),r.onUploadProgress!=null&&(t.upload.onprogress=r.onUploadProgress),t.responseType="arraybuffer",new Promise((a,s)=>{const c=u=>{switch(u.type){case"error":{a(PT.error());break}case"load":{a(new une(t.responseURL,t.response,{status:t.status,statusText:t.statusText,headers:ane(t.getAllResponseHeaders())}));break}case"timeout":{s(new TT);break}case"abort":{s(new ene);break}}};t.onerror=c,t.onload=c,t.ontimeout=c,t.onabort=c,t.send(r.body)})},one=tne,ine=(e,r={})=>r.onUploadProgress!=null?nne(e,r):one(e,r),ane=e=>{const r=new Zy;for(const t of e.trim().split(/[\r\n]+/)){const n=t.indexOf(": ");n>0&&r.set(t.slice(0,n),t.slice(n+1))}return r};class une extends PT{constructor(r,t,n){super(t,n),Object.defineProperty(this,"url",{value:r})}}const $0=mT.bind({ignoreUndefined:!0}),Tc=Ky("kubo-rpc-client:fetch"),sne={throwHttpErrors:!0,credentials:"same-origin"},st=class st{constructor(r={}){g(this,"opts");this.opts=$0({},sne,r)}async fetch(r,t={}){const n=$0({},this.opts,t),o=new Zy(n.headers);if(typeof r!="string"&&!(r instanceof Sc.URL||r instanceof rne))throw new TypeError("`resource` must be a string, URL, or Request");const i=new Sc.URL(r.toString(),n.base),{searchParams:a,transformSearchParams:s,json:c}=n;a!=null&&(typeof s=="function"?i.search=s(new Sc.URLSearchParams(n.searchParams)):i.search=new Sc.URLSearchParams(n.searchParams).toString()),c!=null&&(n.body=JSON.stringify(n.json),o.set("content-type","application/json"));const u=[n.signal];n.timeout!=null&&isNaN(n.timeout)&&n.timeout>0&&u.push(AbortSignal.timeout(n.timeout));const l=Tr(u);try{globalThis.ReadableStream!=null&&n.body instanceof globalThis.ReadableStream&&(Id||Rd)&&(n.body=new Blob(await GS($d(n.body)))),Tc.trace("outgoing headers",n.headers),Tc.trace("%s %s",n.method,i);const d=await ine(i.toString(),{...n,signal:n.signal,timeout:void 0,headers:o,duplex:"half"});if(Tc("%s %s %d",n.method,i,d.status),Tc.trace("incoming headers",d.headers),!d.ok&&n.throwHttpErrors===!0)throw n.handleError!=null&&await n.handleError(d),new R0(d);return d.iterator=async function*(){yield*lne(d.body)},d.ndjson=async function*(){for await(const h of cne(d.iterator()))t.transform!=null?yield t.transform(h):yield h},d}finally{l.clear()}}async post(r,t={}){return this.fetch(r,{...t,method:"POST"})}async get(r,t={}){return this.fetch(r,{...t,method:"GET"})}async put(r,t={}){return this.fetch(r,{...t,method:"PUT"})}async delete(r,t={}){return this.fetch(r,{...t,method:"DELETE"})}async options(r,t={}){return this.fetch(r,{...t,method:"OPTIONS"})}};g(st,"HTTPError",R0),g(st,"TimeoutError",TT),g(st,"post",async(r,t)=>new st(t).post(r,t)),g(st,"get",async(r,t)=>new st(t).get(r,t)),g(st,"put",async(r,t)=>new st(t).put(r,t)),g(st,"delete",async(r,t)=>new st(t).delete(r,t)),g(st,"options",async(r,t)=>new st(t).options(r,t));let An=st;const cne=async function*(e){const r=new TextDecoder;let t="";for await(const n of e){t+=r.decode(n,{stream:!0});const o=t.split(/\r?\n/);for(let i=0;i<o.length-1;i++){const a=o[i].trim();a.length>0&&(yield JSON.parse(a))}t=o[o.length-1]}t+=r.decode(),t=t.trim(),t.length!==0&&(yield JSON.parse(t))},lne=e=>{if(fne(e))return e;if(hne(e)){const r=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:r.next.bind(r),return(t){return e.destroy(),typeof r.return=="function"?r.return():Promise.resolve({done:!0,value:t})}}}}}if(dne(e)){const r=e.getReader();return async function*(){try{for(;;){const{done:t,value:n}=await r.read();if(t)return;n!=null&&(yield n)}}finally{r.releaseLock()}}()}throw new TypeError("Body can't be converted to AsyncIterable")},fne=e=>e!==null&&typeof e[Symbol.asyncIterator]=="function",dne=e=>e!=null&&typeof e.getReader=="function",hne=e=>Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable"),pne=[ol,Oy,Sy,Ey,Td];function j0(e){var r;return(r=CT("sni",e))==null?void 0:r.value}function N0(e){var t;const r=(t=CT("tcp",e))==null?void 0:t.value;return r==null?"":`:${r}`}function CT(e,r){return r.find(t=>t.name===e)}function k0(e){return e.some(({code:r})=>r===iS)}function $t(e,r){const t=AT[e.name];if(t==null)throw new Error(`Can't interpret protocol ${e.name}`);const n=t(e,r);return e.code===va?`[${n}]`:n}const AT={ip4:(e,r)=>e.value,ip6:(e,r)=>r.length===0?e.value:`[${e.value}]`,tcp:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`tcp://${$t(t,r)}:${e.value}`},udp:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`udp://${$t(t,r)}:${e.value}`},dnsaddr:(e,r)=>e.value,dns4:(e,r)=>e.value,dns6:(e,r)=>e.value,dns:(e,r)=>e.value,ipfs:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`${$t(t,r)}`},p2p:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return`${$t(t,r)}`},http:(e,r)=>{const t=k0(r),n=j0(r),o=N0(r);if(t&&n!=null)return`https://${n}${o}`;const i=t?"https://":"http://",a=r.pop();if(a==null)throw new Error("Unexpected end of multiaddr");let s=$t(a,r);return s=s==null?void 0:s.replace("tcp://",""),`${i}${s}`},"http-path":(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");const n=$t(t,r),o=decodeURIComponent(e.value??"");return`${n}${o}`},tls:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return $t(t,r)},sni:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");return $t(t,r)},https:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");let n=$t(t,r);return n=n==null?void 0:n.replace("tcp://",""),`https://${n}`},ws:(e,r)=>{const t=k0(r),n=j0(r),o=N0(r);if(t&&n!=null)return`wss://${n}${o}`;const i=t?"wss://":"ws://",a=r.pop();if(a==null)throw new Error("Unexpected end of multiaddr");let s=$t(a,r);return s=s==null?void 0:s.replace("tcp://",""),`${i}${s}`},wss:(e,r)=>{const t=r.pop();if(t==null)throw new Error("Unexpected end of multiaddr");let n=$t(t,r);return n=n==null?void 0:n.replace("tcp://",""),`wss://${n}`}};function vne(e,r){const n=ct(e).getComponents(),o=n.pop();if(o==null)throw new Error("Unexpected end of multiaddr");const i=AT[o.name];if(i==null)throw new Error(`No interpreter found for ${o.name}`);let a=i(o,n)??"";return pne.includes(o.code)&&(a=a.replace(/^.*:\/\//,""),o.value==="443"?a=`https://${a}`:a=`http://${a}`),(a.startsWith("http://")||a.startsWith("https://")||a.startsWith("ws://")||a.startsWith("wss://"))&&(a=new URL(a).toString(),a.endsWith("/")&&(a=a.substring(0,a.length-1))),a}function M0(e){try{e=vne(ct(e))}catch{}return e=e.toString(),e}const D0=Ky("js-kubo-rpc-client:lib:error-handler"),_ne=mT.bind({ignoreUndefined:!0}),yne=Id||Rd?location.protocol:"http",bne=Id||Rd?location.hostname:"localhost",mne=Id||Rd?location.port:"5001",gne=(e={})=>{let r,t={},n;if(typeof e=="string"||il(e))r=new URL(M0(e));else if(e instanceof URL)r=e;else if(typeof e.url=="string"||il(e.url))r=new URL(M0(e.url)),t=e;else if(e.url instanceof URL)r=e.url,t=e;else{t=e??{};const o=(t.protocol??yne).replace(":",""),i=(t.host??bne).split(":")[0],a=t.port??mne;r=new URL(`${o}://${i}:${a}`)}if(t.apiPath!=null?r.pathname=t.apiPath:(r.pathname==="/"||r.pathname===void 0)&&(r.pathname="api/v0"),oJ){const o=Vre();n=t.agent??new o({keepAlive:!0,maxSockets:6})}return{...t,host:r.host,protocol:r.protocol.replace(":",""),port:Number(r.port),apiPath:r.pathname,url:r,agent:n}},wne=async e=>{let r;try{if((e.headers.get("Content-Type")??"").startsWith("application/json")){const n=await e.json();D0(n),r=n.Message??n.message}else r=await e.text()}catch(n){D0("Failed to parse error response",n),r=n.message}let t=new An.HTTPError(e);throw r!=null&&(r.includes("deadline has elapsed")&&(t=new An.TimeoutError),r.includes("context deadline exceeded")&&(t=new An.TimeoutError),r.includes("request timed out")&&(t=new An.TimeoutError),t.message=r),t},One=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,L0=e=>e.replace(One,function(r){return"-"+r.toLowerCase()}),Ene=e=>typeof e=="string"?Kt(e)??0:e;class Sne extends An{constructor(r={}){const t=gne(r);super({timeout:t.timeout!=null?Ene(t.timeout):void 0,headers:t.headers,base:`${t.url}`,handleError:wne,transformSearchParams:o=>{const i=new URLSearchParams;for(const[a,s]of o)s!=="undefined"&&s!=="null"&&a!=="signal"&&a!=="timeout"&&i.append(L0(a),s),a==="timeout"&&!isNaN(parseInt(s))&&i.append(L0(a),s);return i},agent:t.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;const n=this.fetch;this.fetch=async(o,i={})=>(typeof o=="string"&&!o.startsWith("/")&&(o=`${t.url}/${o}`),n.call(this,o,_ne(i,{method:"POST"})))}}const Tne=async e=>Promise.reject(new Error(`No base found for "${e}"`));class Pne{constructor(r){g(this,"_basesByName");g(this,"_basesByPrefix");g(this,"_loadBase");this._basesByName={},this._basesByPrefix={},this._loadBase=r.loadBase??Tne;for(const t of r.bases)this.addBase(t)}addBase(r){if(this._basesByName[r.name]!=null&&this._basesByPrefix[r.prefix]!=null)throw new Error(`Codec already exists for codec "${r.name}"`);this._basesByName[r.name]=r,this._basesByPrefix[r.prefix]=r}removeBase(r){delete this._basesByName[r.name],delete this._basesByPrefix[r.prefix]}async getBase(r){if(this._basesByName[r]!=null)return this._basesByName[r];if(this._basesByPrefix[r]!=null)return this._basesByPrefix[r];const t=await this._loadBase(r);return this._basesByName[t.name]==null&&this._basesByPrefix[t.prefix]==null&&this.addBase(t),t}listBases(){return Object.values(this._basesByName)}}const Cne=async e=>Promise.reject(new Error(`No codec found for "${e}"`));class Ane{constructor(r){g(this,"_codecsByName");g(this,"_codecsByCode");g(this,"_loadCodec");this._codecsByName={},this._codecsByCode={},this._loadCodec=r.loadCodec??Cne;for(const t of r.codecs)this.addCodec(t)}addCodec(r){if(this._codecsByName[r.name]!=null||this._codecsByCode[r.code]!=null)throw new Error(`Resolver already exists for codec "${r.name}"`);this._codecsByName[r.name]=r,this._codecsByCode[r.code]=r}removeCodec(r){delete this._codecsByName[r.name],delete this._codecsByCode[r.code]}async getCodec(r){const t=typeof r=="string"?this._codecsByName:this._codecsByCode;if(t[r]!=null)return t[r];const n=await this._loadCodec(r);return t[r]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}}const Ine=async e=>Promise.reject(new Error(`No hasher found for "${e}"`));class Rne{constructor(r){g(this,"_hashersByName");g(this,"_hashersByCode");g(this,"_loadHasher");this._hashersByName={},this._hashersByCode={},this._loadHasher=r.loadHasher??Ine;for(const t of r.hashers)this.addHasher(t)}addHasher(r){if(this._hashersByName[r.name]!=null||this._hashersByCode[r.code]!=null)throw new Error(`Resolver already exists for codec "${r.name}"`);this._hashersByName[r.name]=r,this._hashersByCode[r.code]=r}removeHasher(r){delete this._hashersByName[r.name],delete this._hashersByCode[r.code]}async getHasher(r){const t=typeof r=="string"?this._hashersByName:this._hashersByCode;if(t[r]!=null)return t[r];const n=await this._loadHasher(r);return t[r]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}}function $ne(e){return async function(r,t,n={}){const o=await e.post("log/level",{signal:n.signal,searchParams:R({arg:[r,t],...n}),headers:n.headers});return Ge(await o.json())}}function jne(e){return async function(t={}){return(await(await e.post("log/ls",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()).Strings}}function Nne(e){return async function*(t={}){yield*(await e.post("log/tail",{signal:t.signal,searchParams:R(t),headers:t.headers})).ndjson()}}function kne(e){return{level:$ne(e),ls:jne(e),tail:Nne(e)}}function Mne(e){return async function*(t,n={}){const o=`${t instanceof Uint8Array?G.decode(t):t}`;async function i(s){let c=s.Hash;if(c.includes("/")===!0){const l=c.startsWith("/ipfs/")===!0?c:`/ipfs/${c}`;c=(await pT(e)(l)).cid}else c=G.parse(c);return{name:s.Name,path:o+(s.Name!=null?`/${s.Name}`:""),size:s.Size,cid:c,type:Dne(s)}}const a=await e.post("ls",{signal:n.signal,searchParams:R({arg:o,...n}),headers:n.headers});for await(let s of a.ndjson()){if(s=s.Objects,s==null)throw new Error("expected .Objects in results");if(s=s[0],s==null)throw new Error("expected one array in results.Objects");const c=s.Links;if(!Array.isArray(c))throw new Error("expected one array in results.Objects[0].Links");if(c.length===0){yield i(s);return}yield*c.map(i)}}}function Dne(e){switch(e.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}function Lne(e){return async function(t={}){const n=await e.post("dns",{signal:t.signal,searchParams:R(t),headers:t.headers});return Ge(await n.json())}}function Une(e){return async function(t,n={}){const o=await e.post("name/publish",{signal:n.signal,searchParams:R({arg:`${t}`,...n}),headers:n.headers});return Ge(await o.json())}}function Fne(e){return async function(t,n={}){const o=await e.post("name/pubsub/cancel",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers});return Ge(await o.json())}}function Bne(e){return async function(t={}){const n=await e.post("name/pubsub/state",{signal:t.signal,searchParams:R(t),headers:t.headers});return Ge(await n.json())}}function xne(e){return async function(t={}){return(await(await e.post("name/pubsub/subs",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()).Strings??[]}}function Vne(e){return{cancel:Fne(e),state:Bne(e),subs:xne(e)}}function Wne(e){return async function*(t,n={}){const o=await e.post("name/resolve",{signal:n.signal,searchParams:R({arg:t,stream:!0,...n}),headers:n.headers});for await(const i of o.ndjson())yield i.Path}}function zne(e){return{publish:Une(e),resolve:Wne(e),pubsub:Vne(e)}}function Hne(e){return async function(t,n,o={}){const i=await e.post("object/patch/add-link",{signal:o.signal,searchParams:R({arg:[`${t}`,n.Name??n.name??"",(n.Hash??n.cid??"").toString()??null],...o}),headers:o.headers}),{Hash:a}=await i.json();return G.parse(a)}}function qne(e){return async function(t,n,o={}){const i=await e.post("object/patch/rm-link",{signal:o.signal,searchParams:R({arg:[`${t}`,n.Name??n.name??null],...o}),headers:o.headers}),{Hash:a}=await i.json();return G.parse(a)}}function Gne(e){return{addLink:Hne(e),rmLink:qne(e)}}function Kne(e,r){return{patch:Gne(e)}}function Yne(e){return Symbol.iterator in e}function Zne(e){return Symbol.asyncIterator in e}function U0(e){return G.asCID(e)!=null}async function*IT(e){if(e==null)throw new Tt(`Unexpected input: ${e}`);const r=G.asCID(e);if(r!=null){yield it({cid:r});return}if(typeof e=="string"){yield it({path:e});return}if(e.cid!=null||e.path!=null)return yield it(e);if(Yne(e)){const t=e[Symbol.iterator](),n=t.next();if(n.done===!0)return t;if(U0(n.value)){yield it({cid:n.value});for(const o of t)yield it({cid:o});return}if(typeof n.value=="string"){yield it({path:n.value});for(const o of t)yield it({path:o});return}if(n.value.cid!=null||n.value.path!=null){yield it(n.value);for(const o of t)yield it(o);return}throw new Tt(`Unexpected input: ${typeof e}`)}if(Zne(e)){const t=e[Symbol.asyncIterator](),n=await t.next();if(n.done===!0)return t;if(U0(n.value)){yield it({cid:n.value});for await(const o of t)yield it({cid:o});return}if(typeof n.value=="string"){yield it({path:n.value});for await(const o of t)yield it({path:o});return}if(n.value.cid!=null||n.value.path!=null){yield it(n.value);for await(const o of t)yield it(o);return}throw new Tt(`Unexpected input: ${typeof e}`)}throw new Tt(`Unexpected input: ${typeof e}`)}function it(e){const r=e.cid??`${e.path}`;if(r==null)throw new Tt("Unexpected input: Please path either a CID or an IPFS path");const t={path:r,recursive:e.recursive!==!1};return e.metadata!=null&&(t.metadata=e.metadata),t}function RT(e){return async function*(t,n={}){for await(const{path:o,recursive:i,metadata:a}of IT(t)){const s=await e.post("pin/add",{signal:n.signal,searchParams:R({...n,arg:o,recursive:i,metadata:a!=null?JSON.stringify(a):void 0,stream:!0}),headers:n.headers});for await(const c of s.ndjson()){if(c.Pins!=null){for(const u of c.Pins)yield G.parse(u);continue}yield G.parse(c)}}}}function Qne(e){const r=RT(e);return async function(n,o={}){const i=await kd(r([{path:n.toString(),...o}],o));if(i==null)throw new Error("No response received");return i}}function F0(e,r,t,n){const o={type:e,cid:G.parse(r)};return t!=null&&(o.metadata=t),n!=null&&(o.name=n),o}function Xne(e){return async function*(t={}){let n=[];t.paths!=null&&(n=Array.isArray(t.paths)?t.paths:[t.paths]);const o=await e.post("pin/ls",{signal:t.signal,searchParams:R({...t,arg:n.map(i=>`${i}`),stream:!0}),headers:t.headers});for await(const i of o.ndjson()){if(i.Keys!=null){for(const a of Object.keys(i.Keys))yield F0(i.Keys[a].Type,a,i.Keys[a].Metadata,i.Keys[a].Name);return}yield F0(i.Type,i.Cid,i.Metadata,i.Name)}}}const $T=({Name:e,Status:r,Cid:t})=>({cid:G.parse(t),name:e,status:r}),jT=e=>{if(typeof e=="string"&&e!=="")return e;throw new TypeError("service name must be passed")},NT=e=>{if(G.asCID(e)!=null)return e.toString();throw new TypeError(`CID instance expected instead of ${typeof e}`)},Qy=({service:e,cid:r,name:t,status:n,all:o})=>{const i=R({service:jT(e),name:t,force:o===!0?!0:void 0});if(r!=null)for(const a of r)i.append("cid",NT(a));if(n!=null)for(const a of n)i.append("status",a);return i},Jne=(e,{service:r,background:t,name:n,origins:o})=>{const i=R({arg:NT(e),service:jT(r),name:n,background:t===!0?!0:void 0});if(o!=null)for(const a of o)i.append("origin",a.toString());return i};function eoe(e){return async function(t,{timeout:n,signal:o,headers:i,...a}){const s=await e.post("pin/remote/add",{timeout:n,signal:o,headers:i,searchParams:Jne(t,a)});return $T(await s.json())}}function toe(e){return async function*({timeout:t,signal:n,headers:o,...i}){const a=await e.post("pin/remote/ls",{timeout:t,signal:n,headers:o,searchParams:Qy(i)});for await(const s of a.ndjson())yield $T(s)}}function roe(e){return async function({timeout:t,signal:n,headers:o,...i}){await e.post("pin/remote/rm",{timeout:t,signal:n,headers:o,searchParams:Qy({...i,all:!0})})}}function noe(e){return async function({timeout:t,signal:n,headers:o,...i}){await e.post("pin/remote/rm",{timeout:t,signal:n,headers:o,searchParams:Qy({...i,all:!1})})}}function ooe(e){const r=String(e);if(r==="undefined")throw Error("endpoint is required");return r[r.length-1]==="/"?r.slice(0,-1):r}function ioe(e){const r={service:e.Service,endpoint:new URL(e.ApiEndpoint)};return e.Stat!=null&&(r.stat=aoe(e.Stat)),r}function aoe(e){switch(e.Status){case"valid":{const{Pinning:r,Pinned:t,Queued:n,Failed:o}=e.PinCount;return{status:"valid",pinCount:{queued:n,pinning:r,pinned:t,failed:o}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function uoe(e){return async function(t,n){const{endpoint:o,key:i,headers:a,timeout:s,signal:c}=n;await e.post("pin/remote/service/add",{timeout:s,signal:c,searchParams:R({arg:[t,ooe(o),i]}),headers:a})}}function soe(e){return async function(t={}){const{stat:n,headers:o,timeout:i,signal:a}=t;return(await(await e.post("pin/remote/service/ls",{timeout:i,signal:a,headers:o,searchParams:n===!0?R({stat:n}):void 0})).json()).RemoteServices.map(ioe)}}function coe(e){return async function(t,n={}){await e.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:R({arg:t})})}}function loe(e){return{add:uoe(e),ls:soe(e),rm:coe(e)}}function foe(e){return{add:eoe(e),ls:toe(e),rm:noe(e),rmAll:roe(e),service:loe(e)}}function kT(e){return async function*(t,n={}){for await(const{path:o,recursive:i}of IT(t)){const a=new URLSearchParams(n.searchParams);a.append("arg",`${o}`),i!=null&&a.set("recursive",String(i));const s=await e.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:R({...n,arg:`${o}`,recursive:i})});for await(const c of s.ndjson()){if(c.Pins!=null){yield*c.Pins.map(u=>G.parse(u));continue}yield G.parse(c)}}}}function doe(e){const r=kT(e);return async function(n,o={}){const i=await kd(r([{path:n.toString(),...o}],o));if(i==null)throw new Error("No response received");return i}}function hoe(e){return async function(t,n,o={}){const i=await e.post("pin/update",{signal:o.signal,searchParams:R({...o,arg:[t.toString(),n.toString()]}),headers:o.headers}),{Pins:a}=await i.json();return a.map(s=>G.parse(s))}}function poe(e){return{addAll:RT(e),add:Qne(e),ls:Xne(e),rmAll:kT(e),rm:doe(e),update:hoe(e),remote:foe(e)}}function voe(e){return async function*(t,n={}){yield*(await e.post("ping",{signal:n.signal,searchParams:R({arg:`${t}`,...n}),headers:n.headers,transform:Ge})).ndjson()}}const _oe=e=>Array.isArray(e)?e.map(i_):e,i_=e=>Se(aa(e)),aa=e=>qs.decode(e),yoe=e=>BigInt(`0x${Se(qs.decode(e),"base16")}`),Xy=e=>qs.encode(bt(e));function boe(e){return async function(t={}){const{Strings:n}=await(await e.post("pubsub/ls",{signal:t.signal,searchParams:R(t),headers:t.headers})).json();return _oe(n)??[]}}function moe(e){return async function(t,n={}){const o=await e.post("pubsub/peers",{signal:n.signal,searchParams:R({arg:Xy(t),...n}),headers:n.headers}),{Strings:i}=await o.json();return i??[]}}function goe(e){return async function(t,n,o={}){const i=R({arg:Xy(t),...o}),a=new AbortController,s=Tr([a.signal,o.signal]);try{await(await e.post("pubsub/pub",{signal:s,searchParams:i,...await sn([n],a,o.headers)})).text()}finally{s.clear()}}}const woe=Ky("js-kubo-rpc-client:pubsub:subscribe");function Ooe(e,r){return async function(n,o,i={}){i.signal=r.subscribe(n,o,i.signal);let a,s;const c=new Promise((l,d)=>{a=l,s=d}),u=setTimeout(()=>{a()},1e3);return e.post("pubsub/sub",{signal:i.signal,searchParams:R({arg:Xy(n),...i}),headers:i.headers}).catch(l=>{r.unsubscribe(n,o),s(l)}).then(l=>{clearTimeout(u),l!=null&&(Eoe(l,{onMessage:d=>{if(o!=null){if(typeof o=="function"){o(d);return}typeof o.handleEvent=="function"&&o.handleEvent(d)}},onEnd:()=>{r.unsubscribe(n,o)},onError:i.onError}),a())}),c}}async function Eoe(e,{onMessage:r,onEnd:t,onError:n}){n=n??woe;try{for await(const o of e.ndjson())try{if(o.from==null)continue;o.from!=null&&o.seqno!=null?r({type:"signed",from:dt(o.from),data:aa(o.data),sequenceNumber:yoe(o.seqno),topic:i_(o.topicIDs[0]),key:o.key!=null?qee(aa(o.key??"u")):void 0,signature:aa(o.signature??"u")}):r({type:"unsigned",data:aa(o.data),topic:i_(o.topicIDs[0])})}catch(i){i.message=`Failed to parse pubsub message: ${i.message}`,n(i,!1,o)}}catch(o){Soe(o)||n(o,!0)}finally{t()}}const Soe=e=>{switch(e.type){case"aborted":return!0;case"abort":return!0;default:return e.name==="AbortError"}};class Toe{constructor(){g(this,"_subs");this._subs=new Map}subscribe(r,t,n){const o=this._subs.get(r)??[];if(o.find(a=>a.handler===t)!=null)throw new Error(`Already subscribed to ${r} with this handler`);const i=new AbortController;return this._subs.set(r,[{handler:t,controller:i}].concat(o)),n!=null&&n.addEventListener("abort",()=>{this.unsubscribe(r,t)}),i.signal}unsubscribe(r,t){const n=this._subs.get(r)??[];let o;t!=null?(this._subs.set(r,n.filter(i=>i.handler!==t)),o=n.filter(i=>i.handler===t)):(this._subs.set(r,[]),o=n),(this._subs.get(r)??[]).length===0&&this._subs.delete(r),o.forEach(i=>{i.controller.abort()})}}function Poe(e,r){return async function(n,o){r.unsubscribe(n,o)}}function Coe(e){const r=new Toe;return{ls:boe(e),peers:moe(e),publish:goe(e),subscribe:Ooe(e,r),unsubscribe:Poe(e,r)}}function Aoe(e){return async function*(t={}){yield*(await e.post("refs/local",{signal:t.signal,transform:Ge,searchParams:R(t),headers:t.headers})).ndjson()}}function Ioe(e){async function*r(t,n={}){const o=Array.isArray(t)?t:[t];yield*(await e.post("refs",{signal:n.signal,searchParams:R({arg:o.map(a=>`${a instanceof Uint8Array?G.decode(a):a}`),...n}),headers:n.headers,transform:Ge})).ndjson()}return Object.assign(r,{local:Aoe(e)})}function Roe(e){return async function*(t={}){yield*(await e.post("repo/gc",{signal:t.signal,searchParams:R(t),headers:t.headers,transform:o=>{var i;return{err:o.Error!=null?new Error(o.Error):null,cid:((i=o.Key)==null?void 0:i["/"])!=null?G.parse(o.Key["/"]):null}}})).ndjson()}}function MT(e){return async function(t={}){const o=await(await e.post("repo/stat",{signal:t.signal,searchParams:R(t),headers:t.headers})).json();return{numObjects:BigInt(o.NumObjects),repoSize:BigInt(o.RepoSize),repoPath:o.RepoPath,version:o.Version,storageMax:BigInt(o.StorageMax)}}}function $oe(e){return async function(t={}){return(await(await e.post("repo/version",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()).Version}}function joe(e){return{gc:Roe(e),stat:MT(e),version:$oe(e)}}function Noe(e){return async function(t,n={}){const o=await e.post("resolve",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers}),{Path:i}=await o.json();return i}}function koe(e){return async function*(t,n={}){const o=await e.post("routing/findpeer",{signal:n.signal,searchParams:R({arg:t.toString(),stream:!0,...n}),headers:n.headers});for await(const i of o.ndjson())yield ki(i)}}function Moe(e){return async function*(t,n={}){const o=await e.post("routing/findprovs",{signal:n.signal,searchParams:R({arg:t.toString(),...n}),headers:n.headers});for await(const i of o.ndjson())yield ki(i)}}function Doe(e){return async function*(t,n={}){const o=await e.post("routing/get",{signal:n.signal,searchParams:R({arg:t instanceof Uint8Array?Se(t):t.toString(),...n}),headers:n.headers});for await(const i of o.ndjson())yield ki(i)}}function Loe(e){return async function*(t,n={recursive:!1}){const o=Array.isArray(t)?t:[t],i=await e.post("routing/provide",{signal:n.signal,searchParams:R({arg:o.map(a=>a.toString()),...n}),headers:n.headers});for await(const a of i.ndjson())yield ki(a)}}function Uoe(e){return async function*(t,n,o={}){const i=new AbortController,a=Tr([i.signal,o.signal]);try{const s=await e.post("routing/put",{signal:a,searchParams:R({arg:t instanceof Uint8Array?Se(t):t.toString(),stream:!0,...o}),...await sn([n],i,o.headers)});for await(const c of s.ndjson())yield ki(c)}finally{a.clear()}}}function Foe(e){return{findPeer:koe(e),findProvs:Moe(e),get:Doe(e),provide:Loe(e),put:Uoe(e)}}function Boe(e){return async function*(t={}){yield*(await e.post("stats/bw",{signal:t.signal,searchParams:R(t),headers:t.headers,transform:o=>({totalIn:BigInt(o.TotalIn),totalOut:BigInt(o.TotalOut),rateIn:parseFloat(o.RateIn),rateOut:parseFloat(o.RateOut)})})).ndjson()}}function xoe(e){return{bitswap:dT(e),repo:MT(e),bw:Boe(e)}}function Voe(e){return async function(t={}){await(await e.post("shutdown",{signal:t.signal,searchParams:R(t),headers:t.headers})).text()}}function Woe(e){return async function(t={}){const n=await e.post("swarm/addrs",{signal:t.signal,searchParams:R(t),headers:t.headers}),{Addrs:o}=await n.json();return Object.keys(o).map(i=>({id:dt(i),addrs:(o[i]??[]).map(a=>ct(a))}))}}function zoe(e){return async function(t,n={}){const o=await e.post("swarm/connect",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers}),{Strings:i}=await o.json();return i??[]}}function Hoe(e){return async function(t,n={}){const o=await e.post("swarm/disconnect",{signal:n.signal,searchParams:R({arg:t,...n}),headers:n.headers}),{Strings:i}=await o.json();return i??[]}}function qoe(e){return async function(t={}){const n=await e.post("swarm/addrs/local",{signal:t.signal,searchParams:R(t),headers:t.headers}),{Strings:o}=await n.json();return(o??[]).map(i=>ct(i))}}function Goe(e){return async function(t={}){return((await(await e.post("swarm/peers",{signal:t.signal,searchParams:R(t),headers:t.headers})).json()).Peers??[]).map(i=>({addr:ct(i.Addr),peer:dt(i.Peer),muxer:i.Muxer,latency:i.Latency,streams:i.Streams,direction:i.Direction==null?void 0:i.Direction===0?"inbound":"outbound"}))}}function Koe(e){return{addrs:Woe(e),connect:zoe(e),disconnect:Hoe(e),localAddrs:qoe(e),peers:Goe(e)}}function Yoe(e){return async function(t={}){const n=await e.post("version",{signal:t.signal,searchParams:R(t),headers:t.headers});return{...Ge(await n.json()),"ipfs-http-client":"1.0.0"}}}class Zoe{constructor(r){g(this,"bases");g(this,"codecs");g(this,"hashers");g(this,"bitswap");g(this,"block");g(this,"bootstrap");g(this,"config");g(this,"dag");g(this,"dht");g(this,"diag");g(this,"files");g(this,"key");g(this,"log");g(this,"name");g(this,"object");g(this,"pin");g(this,"pubsub");g(this,"refs");g(this,"repo");g(this,"routing");g(this,"stats");g(this,"swarm");g(this,"add");g(this,"addAll");g(this,"cat");g(this,"get");g(this,"ls");g(this,"id");g(this,"version");g(this,"stop");g(this,"ping");g(this,"resolve");g(this,"commands");g(this,"mount");g(this,"isOnline");g(this,"getEndpointConfig");var s,c,u,l,d,h;const t=new Sne(r),n={name:Hr.name,code:Hr.code,encode:p=>p,decode:p=>p},o=Object.values(rl);(((s=r.ipld)==null?void 0:s.bases)??[]).forEach(p=>o.push(p)),this.bases=new Pne({bases:o,loadBase:(c=r.ipld)==null?void 0:c.loadBase});const i=Object.values(jK);[XQ,pQ,jQ,QX,n].concat(((u=r.ipld)==null?void 0:u.codecs)??[]).forEach(p=>{i.push(p)}),this.codecs=new Ane({codecs:i,loadCodec:(l=r.ipld)==null?void 0:l.loadCodec});const a=Object.values($K);(((d=r.ipld)==null?void 0:d.hashers)??[]).forEach(p=>a.push(p)),this.hashers=new Rne({hashers:a,loadHasher:(h=r.ipld)==null?void 0:h.loadHasher}),this.bitswap=ate(t),this.block=fte(t),this.bootstrap=vte(t),this.config=Tte(t),this.dag=Nte(t,this.codecs),this.dht=Wte(t),this.diag=Gte(t),this.files=are(t),this.key=_re(t),this.log=kne(t),this.name=zne(t),this.object=Kne(t,this.codecs),this.pin=poe(t),this.pubsub=Coe(t),this.refs=Ioe(t),this.repo=joe(t),this.routing=Foe(t),this.stats=xoe(t),this.swarm=Koe(t),this.add=OJ(t),this.addAll=YS(t),this.cat=_te(t),this.get=sre(t),this.ls=Mne(t),this.id=vT(t),this.version=Yoe(t),this.stop=Voe(t),this.ping=voe(t),this.resolve=Noe(t),this.commands=yte(t),this.mount=Lne(t),this.isOnline=cre(t),this.getEndpointConfig=ure(t)}}function Qoe(e){return new Zoe(e)}function Xoe(e={}){return(typeof e=="string"||il(e)||e instanceof URL)&&(e={url:e}),Qoe(e)}let zp=null;const hie=()=>(zp||(zp=Yp.driver(Pc.neo4jURL,Yp.auth.basic(Pc.neo4jUser,Pc.neo4jPass))),zp);let Hp=null;const pie=()=>(Hp||(Hp=Xoe(Pc.ipfsAPI.replace(/\/+$/,""))),Hp);export{YZ as A,O as B,G as C,$n as D,JG as E,rK as R,$ as T,yt as U,PS as a,YQ as b,AQ as c,QQ as d,ES as e,ZQ as f,hie as g,YE as h,oie as i,pie as j,Be as k,el as l,tl as m,Lv as n,Sd as o,jS as p,Hr as q,J9 as r,yy as s,qs as t,hQ as u,SS as v,CS as w,dQ as x,qE as y,QZ as z};

import{g as I,u as Is,h as Cs}from"./CKxxabAx.js";import{d as As}from"./B3xn-KJW.js";import{cy as pe,cz as ye,aQ as vt,aR as Et,cA as Pt,cB as ot,cC as Tt,aX as j,bu as Rs,cD as St,cE as Bs,w as It,cF as Ct,cG as ks,cH as Q,cI as He,cJ as Z,an as G,ao as z,cK as _e,cL as xe,cM as At,B as ve,cN as Ls,aq as ze,bj as R,a5 as Ve,cO as qs,cP as Ms,cQ as Os,cR as Rt,cS as Bt,n as p,ad as ee,cT as N,at as D,cU as kt,cV as Lt,cW as qt,cX as $e,cY as We,bl as $,al as be,aV as H,g as O,bC as Mt,ak as X,u as Ot,cZ as Ft,bG as te,c_ as Ne,y as _,c6 as se,q as Ee,a9 as Ke,bm as jt,c$ as Ht,d0 as J,bh as T,d1 as De,d2 as Je,d3 as Nt,d4 as Dt,by as Ye,bz as Fs,cm as Qe,c3 as Ut,bg as Gt,d5 as zt,aZ as Pe,cn as Xe,d6 as js,bx as Vt,cj as $t,d7 as Wt,d8 as Hs,cc as Ns,cd as Ds,d9 as Kt,da as Jt,db as Yt,dc as Qt,dd as Ue,de as Xt,df as Us,dg as Gs,bN as zs,dh as Vs,di as $s,bB as Ws,ac as Ks,ab as Js,dj as Ys,aT as Qs,dk as Xs,dl as Zs,ae as ea,af as ta,a8 as sa,dm as aa,dn as na,bf as ra,dp as oa,dq as ia,dr as ca,ar as ua,c7 as da,ds as la,dt as fa,du as ha,dv as ma,dw as ga,dx as pa,cs as ya,bo as ba,cr as wa,dy as _a,bc as xa,bd as va,dz as Ea,dA as Pa,dB as Ta,dC as Sa,dD as Ia,dE as Ca,H as Aa,dF as Ra,dG as Ba,dH as ka,dI as La,dJ as qa,dK as Ma,dL as Oa,aS as Fa,dM as ja,ag as Ha,dN as Na,dO as Da,dP as Ua,dQ as Ga,dR as za,b9 as Va,dS as $a,dT as Wa,dU as Ka,dV as Ja,dW as Ya,dX as Qa,dY as Xa,dZ as Za,d_ as en,d$ as tn,e0 as sn,e1 as an,e2 as nn,e3 as rn,e4 as on,e5 as cn,e6 as un,e7 as dn,e8 as ln,bO as fn,e9 as hn,ea as mn,eb as gn,ec as pn,ed as yn,ee as bn,ef as wn,eg as _n,S as xn,eh as vn,ei as En,ej as Pn,ek as Tn,el as Sn,em as In,en as Cn,bQ as An,eo as Rn,ep as Bn,eq as kn,er as Ln,be as qn,bF as Mn,es as On,U as Fn,et as jn,eu as Hn,bD as Nn,ev as Dn,ew as Un,ex as Gn,ey as zn,ez as Vn,eA as $n,eB as Wn,p as Kn,bb as Jn,b4 as Yn,eC as Qn,cu as Xn,eD as Zn,eE as er,eF as tr,c1 as sr,eG as ar,v as nr,aG as rr,eH as or,cx as ir,eI as cr,eJ as ur,eK as dr,eL as lr,bM as fr,eM as hr,cq as mr,a$ as gr,eN as pr,ct as yr,eO as br,eP as wr,eQ as _r,aa as xr,br as vr,a_ as Er,aU as it,eR as de,a6 as ct,c5 as Pr,eS as Tr,cw as Sr,cv as Ir,eT as Cr,eU as Ar,eV as Rr,eW as Br,eX as kr,eY as Lr,eZ as qr,e_ as Mr,e$ as Or,f0 as Fr,f1 as jr,f2 as Hr,f3 as Nr,f4 as Dr,f5 as Ur,f6 as Gr,f7 as zr,f8 as Vr,f9 as $r,fa as Wr,fb as Kr,fc as Jr,fd as Yr,fe as Qr,ff as Xr,fg as Zr,fh as eo,fi as to,fj as so,fk as ao,fl as no,fm as ro,fn as oo,fo as io,fp as co,fq as uo,fr as lo,fs as fo,ft as ho,fu as mo,fv as go,fw as po,fx as yo,fy as bo,fz as wo,fA as _o,fB as xo,fC as vo,fD as Eo,fE as Po,fF as To,fG as So,fH as Io,fI as Co,fJ as Ao,fK as Ro,fL as Bo,fM as ko,fN as Lo,fO as qo,fP as Mo,fQ as Oo,fR as Fo,fS as jo,fT as Ho,fU as No,fV as Do,fW as Uo,fX as Go,fY as zo,fZ as Vo,f_ as $o,f$ as Wo,g0 as Ko,g1 as Jo,g2 as Yo,g3 as Qo,g4 as Xo,g5 as Zo,g6 as ei,g7 as ti,g8 as si,g9 as ai,ga as ni,gb as ri,gc as oi,gd as ii,ge as ci,gf as ui,gg as di,gh as li,gi as fi,gj as hi,gk as mi,gl as gi,gm as pi,gn as yi,go as bi,co as wi,b0 as _i,gp as xi,gq as vi,gr as Ei,gs as Pi,gt as Ti,gu as Si,gv as Ii,gw as Ci,bq as Ai,as as Ri,o as Bi,gx as ki,gy as ut,gz as Li,c2 as qi,c4 as Mi,gA as Oi,gB as Fi,gC as ji,gD as Hi}from"./M6cbFFaq.js";import{d as Ni,f as Di,h as Ui,i as Gi,j as zi,k as Zt,p as es,w as Vi,l as $i,m as Wi,E as Ki,n as Ji,o as Yi,F as Qi,W as Xi,c as Zi,a as ec,q as tc,e as sc,r as ac,b as dt,t as nc,u as rc,v as oc,x as ic,y as cc,s as uc,z as lt,A as dc,B as lc}from"./DqoSn6_k.js";import{h as ts,a as ss,g as as,v as ns,s as rs,I as fc,b as hc,c as mc,d as gc,e as pc,f as yc,p as bc,t as wc}from"./DfzBXp8F.js";import{_ as _c}from"./C1FmrZbK.js";import{d as xc,e as vc,b as Ec}from"./C95_jVNJ.js";import{s as os}from"./DJp8xxOB.js";import{ccipRequest as ft,offchainLookup as Pc,offchainLookupAbiItem as Tc,offchainLookupSignature as Sc}from"./-SWLAShI.js";import{r as Ic}from"./DN21MdDm.js";function Cc(e,t){for(var s=0;s<t.length;s++){const a=t[s];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in e)){const r=Object.getOwnPropertyDescriptor(a,n);r&&Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function Ac(e){let t;if(typeof e=="string")t=pe(e,{modifiers:ye});else{const s=vt(e),a=e.length;for(let n=0;n<a;n++){const r=e[n];if(!Et(r)){t=pe(r,{modifiers:ye,structs:s});break}}}if(!t)throw new Pt({param:e});return t}function Rc(e){const t=[];if(typeof e=="string"){const s=ot(e),a=s.length;for(let n=0;n<a;n++)t.push(pe(s[n],{modifiers:ye}))}else{const s=vt(e),a=e.length;for(let n=0;n<a;n++){const r=e[n];if(Et(r))continue;const i=ot(r),c=i.length;for(let o=0;o<c;o++)t.push(pe(i[o],{modifiers:ye,structs:s}))}}if(t.length===0)throw new Tt({params:e});return t}function Bc({abi:e,address:t,client:s}){const a=s,[n,r]=a?"public"in a&&"wallet"in a?[a.public,a.wallet]:"public"in a?[a.public,void 0]:"wallet"in a?[void 0,a.wallet]:[a,a]:[void 0,void 0],i=n!=null,c=r!=null,o={};let u=!1,l=!1,f=!1;for(const h of e)if(h.type==="function"?h.stateMutability==="view"||h.stateMutability==="pure"?u=!0:l=!0:h.type==="event"&&(f=!0),u&&l&&f)break;return i&&(u&&(o.read=new Proxy({},{get(h,d){return(...m)=>{const{args:g,options:y}=le(m);return j(n,Rs,"readContract")({abi:e,address:t,functionName:d,args:g,...y})}}})),l&&(o.simulate=new Proxy({},{get(h,d){return(...m)=>{const{args:g,options:y}=le(m);return j(n,Ni,"simulateContract")({abi:e,address:t,functionName:d,args:g,...y})}}})),f&&(o.createEventFilter=new Proxy({},{get(h,d){return(...m)=>{const g=e.find(w=>w.type==="event"&&w.name===d),{args:y,options:x}=Me(m,g);return j(n,Di,"createContractEventFilter")({abi:e,address:t,eventName:d,args:y,...x})}}}),o.getEvents=new Proxy({},{get(h,d){return(...m)=>{const g=e.find(w=>w.type==="event"&&w.name===d),{args:y,options:x}=Me(m,g);return j(n,Ui,"getContractEvents")({abi:e,address:t,eventName:d,args:y,...x})}}}),o.watchEvent=new Proxy({},{get(h,d){return(...m)=>{const g=e.find(w=>w.type==="event"&&w.name===d),{args:y,options:x}=Me(m,g);return j(n,Gi,"watchContractEvent")({abi:e,address:t,eventName:d,args:y,...x})}}}))),c&&l&&(o.write=new Proxy({},{get(h,d){return(...m)=>{const{args:g,options:y}=le(m);return j(r,St,"writeContract")({abi:e,address:t,functionName:d,args:g,...y})}}})),(i||c)&&l&&(o.estimateGas=new Proxy({},{get(h,d){return(...m)=>{const{args:g,options:y}=le(m);return j(n??r,zi,"estimateContractGas")({abi:e,address:t,functionName:d,args:g,...y,account:y.account??r.account})}}})),o.address=t,o.abi=e,o}function le(e){const t=e.length&&Array.isArray(e[0]),s=t?e[0]:[],a=(t?e[1]:e[0])??{};return{args:s,options:a}}function Me(e,t){let s=!1;Array.isArray(e[0])?s=!0:e.length===1?s=t.inputs.some(r=>r.indexed):e.length===2&&(s=!0);const a=s?e[0]:void 0,n=(s?e[1]:e[0])??{};return{args:a,options:n}}function kc({chains:e,id:t}){return e.find(s=>s.id===t)}const Oe=new Map;async function Lc(e){const{getSocket:t,keepAlive:s=!0,key:a="socket",reconnect:n=!0,url:r}=e,{interval:i=3e4}=typeof s=="object"?s:{},{attempts:c=5,delay:o=2e3}=typeof n=="object"?n:{},u=JSON.stringify({keepAlive:s,key:a,url:r,reconnect:n});let l=Oe.get(u);if(l)return l;let f=0;const{schedule:h}=Bs({id:u,fn:async()=>{const g=new Map,y=new Map;let x,w,v;async function C(){const E=await t({onClose(){var b,P;for(const S of g.values())(b=S.onError)==null||b.call(S,new Q({url:r}));for(const S of y.values())(P=S.onError)==null||P.call(S,new Q({url:r}));n&&f<c?setTimeout(async()=>{f++,await C().catch(console.error)},o):(g.clear(),y.clear())},onError(b){var P,S;x=b;for(const A of g.values())(P=A.onError)==null||P.call(A,x);for(const A of y.values())(S=A.onError)==null||S.call(A,x);l==null||l.close(),n&&f<c?setTimeout(async()=>{f++,await C().catch(console.error)},o):(g.clear(),y.clear())},onOpen(){x=void 0,f=0},onResponse(b){const P=b.method==="eth_subscription",S=P?b.params.subscription:b.id,A=P?y:g,k=A.get(S);k&&k.onResponse(b),P||A.delete(S)}});if(w=E,s&&(v&&clearInterval(v),v=setInterval(()=>{var b;return(b=w.ping)==null?void 0:b.call(w)},i)),n&&y.size>0){const b=y.entries();for(const[P,{onResponse:S,body:A,onError:k}]of b)A&&(y.delete(P),l==null||l.request({body:A,onResponse:S,onError:k}))}return E}return await C(),x=void 0,l={close(){v&&clearInterval(v),w.close(),Oe.delete(u)},get socket(){return w},request({body:E,onError:b,onResponse:P}){x&&b&&b(x);const S=E.id??ks.take(),A=k=>{var rt;typeof k.id=="number"&&S!==k.id||(E.method==="eth_subscribe"&&typeof k.result=="string"&&y.set(k.result,{onResponse:A,onError:b,body:E}),E.method==="eth_unsubscribe"&&y.delete((rt=E.params)==null?void 0:rt[0]),P(k))};g.set(S,{onResponse:A,onError:b});try{w.request({body:{jsonrpc:"2.0",id:S,...E}})}catch(k){b==null||b(k)}},requestAsync({body:E,timeout:b=1e4}){return It(()=>new Promise((P,S)=>this.request({body:E,onError:S,onResponse:P})),{errorInstance:new Ct({body:E,url:r}),timeout:b})},requests:g,subscriptions:y,url:r},Oe.set(u,l),[l]}}),[d,[m]]=await h();return m}async function ge(e,t={}){const{keepAlive:s,reconnect:a}=t;return Lc({async getSocket({onClose:n,onError:r,onOpen:i,onResponse:c}){const o=await _c(()=>import("./CJ5et6AR.js"),[],import.meta.url).then(d=>d.WebSocket),u=new o(e);function l(){u.removeEventListener("close",l),u.removeEventListener("message",f),u.removeEventListener("error",r),u.removeEventListener("open",i),n()}function f({data:d}){try{const m=JSON.parse(d);c(m)}catch(m){r(m)}}u.addEventListener("close",l),u.addEventListener("message",f),u.addEventListener("error",r),u.addEventListener("open",i),u.readyState===o.CONNECTING&&await new Promise((d,m)=>{u&&(u.onopen=d,u.onerror=m)});const{close:h}=u;return Object.assign(u,{close(){h.bind(u)(),l()},ping(){try{if(u.readyState===u.CLOSED||u.readyState===u.CLOSING)throw new He({url:u.url,cause:new Q({url:u.url})});const d={jsonrpc:"2.0",method:"net_version",params:[]};u.send(JSON.stringify(d))}catch(d){r(d)}},request({body:d}){if(u.readyState===u.CLOSED||u.readyState===u.CLOSING)throw new He({body:d,url:u.url,cause:new Q({url:u.url})});return u.send(JSON.stringify(d))}})},keepAlive:s,reconnect:a,url:e})}async function qc(e){const t=await ge(e);return Object.assign(t.socket,{requests:t.requests,subscriptions:t.subscriptions})}function is(e){const{authorizationList:t}=e;if(t)for(const s of t){const{chainId:a}=s,n=s.address;if(!G(n))throw new z({address:n});if(a<0)throw new Z({chainId:a})}ae(e)}function cs(e){const{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new Ls;for(const s of t){const a=ze(s),n=R(Ve(s,0,1));if(a!==32)throw new qs({hash:s,size:a});if(n!==Ms)throw new Os({hash:s,version:n})}}ae(e)}function ae(e){const{chainId:t,maxPriorityFeePerGas:s,maxFeePerGas:a,to:n}=e;if(t<=0)throw new Z({chainId:t});if(n&&!G(n))throw new z({address:n});if(a&&a>_e)throw new xe({maxFeePerGas:a});if(s&&a&&s>a)throw new At({maxFeePerGas:a,maxPriorityFeePerGas:s})}function Ze(e){const{chainId:t,maxPriorityFeePerGas:s,gasPrice:a,maxFeePerGas:n,to:r}=e;if(t<=0)throw new Z({chainId:t});if(r&&!G(r))throw new z({address:r});if(s||n)throw new ve("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(a&&a>_e)throw new xe({maxFeePerGas:a})}function et(e){const{chainId:t,maxPriorityFeePerGas:s,gasPrice:a,maxFeePerGas:n,to:r}=e;if(r&&!G(r))throw new z({address:r});if(typeof t<"u"&&t<=0)throw new Z({chainId:t});if(s||n)throw new ve("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(a&&a>_e)throw new xe({maxFeePerGas:a})}function ne(e){if(!e||e.length===0)return[];const t=[];for(let s=0;s<e.length;s++){const{address:a,storageKeys:n}=e[s];for(let r=0;r<n.length;r++)if(n[r].length-2!==64)throw new Rt({storageKey:n[r]});if(!G(a,{strict:!1}))throw new z({address:a});t.push([a,n])}return t}function us(e,t){const s=Bt(e);return s==="eip1559"?Fc(e,t):s==="eip2930"?jc(e,t):s==="eip4844"?Oc(e,t):s==="eip7702"?Mc(e,t):Hc(e,t)}function Mc(e,t){const{authorizationList:s,chainId:a,gas:n,nonce:r,to:i,value:c,maxFeePerGas:o,maxPriorityFeePerGas:u,accessList:l,data:f}=e;is(e);const h=ne(l),d=Nc(s);return ee(["0x04",N([p(a),r?p(r):"0x",u?p(u):"0x",o?p(o):"0x",n?p(n):"0x",i??"0x",c?p(c):"0x",f??"0x",h,d,...re(e,t)])])}function Oc(e,t){const{chainId:s,gas:a,nonce:n,to:r,value:i,maxFeePerBlobGas:c,maxFeePerGas:o,maxPriorityFeePerGas:u,accessList:l,data:f}=e;cs(e);let h=e.blobVersionedHashes,d=e.sidecars;if(e.blobs&&(typeof h>"u"||typeof d>"u")){const v=typeof e.blobs[0]=="string"?e.blobs:e.blobs.map(b=>D(b)),C=e.kzg,E=kt({blobs:v,kzg:C});if(typeof h>"u"&&(h=Lt({commitments:E})),typeof d>"u"){const b=qt({blobs:v,commitments:E,kzg:C});d=$e({blobs:v,commitments:E,proofs:b})}}const m=ne(l),g=[p(s),n?p(n):"0x",u?p(u):"0x",o?p(o):"0x",a?p(a):"0x",r??"0x",i?p(i):"0x",f??"0x",m,c?p(c):"0x",h??[],...re(e,t)],y=[],x=[],w=[];if(d)for(let v=0;v<d.length;v++){const{blob:C,commitment:E,proof:b}=d[v];y.push(C),x.push(E),w.push(b)}return ee(["0x03",d?N([g,y,x,w]):N(g)])}function Fc(e,t){const{chainId:s,gas:a,nonce:n,to:r,value:i,maxFeePerGas:c,maxPriorityFeePerGas:o,accessList:u,data:l}=e;ae(e);const f=ne(u),h=[p(s),n?p(n):"0x",o?p(o):"0x",c?p(c):"0x",a?p(a):"0x",r??"0x",i?p(i):"0x",l??"0x",f,...re(e,t)];return ee(["0x02",N(h)])}function jc(e,t){const{chainId:s,gas:a,data:n,nonce:r,to:i,value:c,accessList:o,gasPrice:u}=e;Ze(e);const l=ne(o),f=[p(s),r?p(r):"0x",u?p(u):"0x",a?p(a):"0x",i??"0x",c?p(c):"0x",n??"0x",l,...re(e,t)];return ee(["0x01",N(f)])}function Hc(e,t){const{chainId:s=0,gas:a,data:n,nonce:r,to:i,value:c,gasPrice:o}=e;et(e);let u=[r?p(r):"0x",o?p(o):"0x",a?p(a):"0x",i??"0x",c?p(c):"0x",n??"0x"];if(t){const l=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(s>0)return BigInt(s*2)+BigInt(35n+t.v-27n);const d=27n+(t.v===27n?0n:1n);if(t.v!==d)throw new We({v:t.v});return d})(),f=$(t.r),h=$(t.s);u=[...u,p(l),f==="0x00"?"0x":f,h==="0x00"?"0x":h]}else s>0&&(u=[...u,p(s),"0x","0x"]);return N(u)}function re(e,t){const s=t??e,{v:a,yParity:n}=s;if(typeof s.r>"u")return[];if(typeof s.s>"u")return[];if(typeof a>"u"&&typeof n>"u")return[];const r=$(s.r),i=$(s.s);return[typeof n=="number"?n?p(1):"0x":a===0n?"0x":a===1n?p(1):a===27n?"0x":p(1),r==="0x00"?"0x":r,i==="0x00"?"0x":i]}function Nc(e){if(!e||e.length===0)return[];const t=[];for(const s of e){const{chainId:a,nonce:n,...r}=s,i=s.address;t.push([a?be(a):"0x",i,n?be(n):"0x",...re({},r)])}return t}function Ge(e){return!e||typeof e!="object"||!("BYTES_PER_ELEMENT"in e)?!1:e.BYTES_PER_ELEMENT===1&&e.constructor.name==="Uint8Array"}function Dc(e){return e.opcode==="CREATE2"?ls(e):ds(e)}function ds(e){const t=H(O(e.from));let s=H(e.nonce);return s[0]===0&&(s=new Uint8Array([])),O(`0x${X(N([t,s],"bytes")).slice(26)}`)}function ls(e){const t=H(O(e.from)),s=Mt(Ge(e.salt)?e.salt:H(e.salt),{size:32}),a="bytecodeHash"in e?Ge(e.bytecodeHash)?e.bytecodeHash:H(e.bytecodeHash):X(e.bytecode,"bytes");return O(Ve(X(Ot([H("0xff"),t,s,a])),12))}function tt(e,t="hex"){const s=(()=>{if(typeof e=="string"){if(e.length>3&&e.length%2!==0)throw new Ft(e);return te(e)}return e})(),a=Ne(s,{recursiveReadLimit:Number.POSITIVE_INFINITY});return fs(a,t)}function fs(e,t="hex"){if(e.bytes.length===0)return t==="hex"?D(e.bytes):e.bytes;const s=e.readByte();if(s<128&&e.decrementPosition(1),s<192){const n=ht(e,s,128),r=e.readBytes(n);return t==="hex"?D(r):r}const a=ht(e,s,192);return Uc(e,a,t)}function ht(e,t,s){if(s===128&&t<128)return 1;if(t<=s+55)return t-s;if(t===s+55+1)return e.readUint8();if(t===s+55+2)return e.readUint16();if(t===s+55+3)return e.readUint24();if(t===s+55+4)return e.readUint32();throw new ve("Invalid RLP prefix")}function Uc(e,t,s){const a=e.position,n=[];for(;e.position-a<t;)n.push(fs(e,s));return n}function hs(e){return _(e)&&ze(e)===32}const Gc=Ic;function zc(e,t){const s=t||"hex",a=Gc(_(e,{strict:!1})?H(e):e);return s==="bytes"?a:be(a)}async function ms({message:e,signature:t}){return se({hash:ts(e),signature:t})}async function gs(e){const{domain:t,message:s,primaryType:a,signature:n,types:r}=e;return se({hash:ss({domain:t,message:s,primaryType:a,types:r}),signature:n})}async function Vc({address:e,hash:t,signature:s}){return Ee(O(e),await se({hash:t,signature:s}))}async function $c({address:e,message:t,signature:s}){return Ee(O(e),await ms({message:t,signature:s}))}async function Wc(e){const{address:t,domain:s,message:a,primaryType:n,signature:r,types:i}=e;return Ee(O(t),await gs({domain:s,message:a,primaryType:n,signature:r,types:i}))}function Kc(e){if(!Zt(e))return{signature:e};const[t,s,a]=Ke([{type:"address"},{type:"bytes"},{type:"bytes"}],e);return{address:t,data:s,signature:a}}function ps(e){const t=jt(e,0,1);if(t==="0x04")return"eip7702";if(t==="0x03")return"eip4844";if(t==="0x02")return"eip1559";if(t==="0x01")return"eip2930";if(t!=="0x"&&R(t)>=192)return"legacy";throw new Ht({serializedType:t})}function ys(e){const t=ps(e);return t==="eip1559"?Qc(e):t==="eip2930"?Xc(e):t==="eip4844"?Yc(e):t==="eip7702"?Jc(e):Zc(e)}function Jc(e){const t=Te(e),[s,a,n,r,i,c,o,u,l,f,h,d,m]=t;if(t.length!==10&&t.length!==13)throw new J({attributes:{chainId:s,nonce:a,maxPriorityFeePerGas:n,maxFeePerGas:r,gas:i,to:c,value:o,data:u,accessList:l,authorizationList:f,...t.length>9?{v:h,r:d,s:m}:{}},serializedTransaction:e,type:"eip7702"});const g={chainId:R(s),type:"eip7702"};return _(c)&&c!=="0x"&&(g.to=c),_(i)&&i!=="0x"&&(g.gas=T(i)),_(u)&&u!=="0x"&&(g.data=u),_(a)&&(g.nonce=a==="0x"?0:R(a)),_(o)&&o!=="0x"&&(g.value=T(o)),_(r)&&r!=="0x"&&(g.maxFeePerGas=T(r)),_(n)&&n!=="0x"&&(g.maxPriorityFeePerGas=T(n)),l.length!==0&&l!=="0x"&&(g.accessList=Se(l)),f.length!==0&&f!=="0x"&&(g.authorizationList=eu(f)),is(g),{...t.length===13?oe(t):void 0,...g}}function Yc(e){const t=Te(e),s=t.length===4,a=s?t[0]:t,n=s?t.slice(1):[],[r,i,c,o,u,l,f,h,d,m,g,y,x,w]=a,[v,C,E]=n;if(!(a.length===11||a.length===14))throw new J({attributes:{chainId:r,nonce:i,maxPriorityFeePerGas:c,maxFeePerGas:o,gas:u,to:l,value:f,data:h,accessList:d,...a.length>9?{v:y,r:x,s:w}:{}},serializedTransaction:e,type:"eip4844"});const b={blobVersionedHashes:g,chainId:R(r),type:"eip4844"};return _(l)&&l!=="0x"&&(b.to=l),_(u)&&u!=="0x"&&(b.gas=T(u)),_(h)&&h!=="0x"&&(b.data=h),_(i)&&(b.nonce=i==="0x"?0:R(i)),_(f)&&f!=="0x"&&(b.value=T(f)),_(m)&&m!=="0x"&&(b.maxFeePerBlobGas=T(m)),_(o)&&o!=="0x"&&(b.maxFeePerGas=T(o)),_(c)&&c!=="0x"&&(b.maxPriorityFeePerGas=T(c)),d.length!==0&&d!=="0x"&&(b.accessList=Se(d)),v&&C&&E&&(b.sidecars=$e({blobs:v,commitments:C,proofs:E})),cs(b),{...a.length===14?oe(a):void 0,...b}}function Qc(e){const t=Te(e),[s,a,n,r,i,c,o,u,l,f,h,d]=t;if(!(t.length===9||t.length===12))throw new J({attributes:{chainId:s,nonce:a,maxPriorityFeePerGas:n,maxFeePerGas:r,gas:i,to:c,value:o,data:u,accessList:l,...t.length>9?{v:f,r:h,s:d}:{}},serializedTransaction:e,type:"eip1559"});const m={chainId:R(s),type:"eip1559"};return _(c)&&c!=="0x"&&(m.to=c),_(i)&&i!=="0x"&&(m.gas=T(i)),_(u)&&u!=="0x"&&(m.data=u),_(a)&&(m.nonce=a==="0x"?0:R(a)),_(o)&&o!=="0x"&&(m.value=T(o)),_(r)&&r!=="0x"&&(m.maxFeePerGas=T(r)),_(n)&&n!=="0x"&&(m.maxPriorityFeePerGas=T(n)),l.length!==0&&l!=="0x"&&(m.accessList=Se(l)),ae(m),{...t.length===12?oe(t):void 0,...m}}function Xc(e){const t=Te(e),[s,a,n,r,i,c,o,u,l,f,h]=t;if(!(t.length===8||t.length===11))throw new J({attributes:{chainId:s,nonce:a,gasPrice:n,gas:r,to:i,value:c,data:o,accessList:u,...t.length>8?{v:l,r:f,s:h}:{}},serializedTransaction:e,type:"eip2930"});const d={chainId:R(s),type:"eip2930"};return _(i)&&i!=="0x"&&(d.to=i),_(r)&&r!=="0x"&&(d.gas=T(r)),_(o)&&o!=="0x"&&(d.data=o),_(a)&&(d.nonce=a==="0x"?0:R(a)),_(c)&&c!=="0x"&&(d.value=T(c)),_(n)&&n!=="0x"&&(d.gasPrice=T(n)),u.length!==0&&u!=="0x"&&(d.accessList=Se(u)),Ze(d),{...t.length===11?oe(t):void 0,...d}}function Zc(e){const t=tt(e,"hex"),[s,a,n,r,i,c,o,u,l]=t;if(!(t.length===6||t.length===9))throw new J({attributes:{nonce:s,gasPrice:a,gas:n,to:r,value:i,data:c,...t.length>6?{v:o,r:u,s:l}:{}},serializedTransaction:e,type:"legacy"});const f={type:"legacy"};if(_(r)&&r!=="0x"&&(f.to=r),_(n)&&n!=="0x"&&(f.gas=T(n)),_(c)&&c!=="0x"&&(f.data=c),_(s)&&(f.nonce=s==="0x"?0:R(s)),_(i)&&i!=="0x"&&(f.value=T(i)),_(a)&&a!=="0x"&&(f.gasPrice=T(a)),et(f),t.length===6)return f;const h=_(o)&&o!=="0x"?T(o):0n;if(l==="0x"&&u==="0x")return h>0&&(f.chainId=Number(h)),f;const d=h,m=Number((d-35n)/2n);if(m>0)f.chainId=m;else if(d!==27n&&d!==28n)throw new We({v:d});return f.v=d,f.s=l,f.r=u,f.yParity=d%2n===0n?1:0,f}function Te(e){return tt(`0x${e.slice(4)}`,"hex")}function Se(e){const t=[];for(let s=0;s<e.length;s++){const[a,n]=e[s];if(!G(a,{strict:!1}))throw new z({address:a});t.push({address:a,storageKeys:n.map(r=>hs(r)?r:$(r))})}return t}function eu(e){const t=[];for(let s=0;s<e.length;s++){const[a,n,r,i,c,o]=e[s];t.push({address:n,chainId:R(a),nonce:R(r),...oe([i,c,o])})}return t}function oe(e){const t=e.slice(-3),s=t[0]==="0x"||T(t[0])===0n?27n:28n;return{r:De(t[1],{size:32}),s:De(t[2],{size:32}),v:s,yParity:s===27n?0:1}}function tu(e,t="wei"){return Je(e,Nt[t])}function su(e,t="wei"){return Je(e,Dt[t])}async function au(e,{hash:t}){await e.request({method:`${e.mode}_dropTransaction`,params:[t]})}async function nu(e){return e.request({method:`${e.mode}_dumpState`})}async function ru(e){return e.mode==="ganache"?await e.request({method:"eth_mining"}):await e.request({method:`${e.mode}_getAutomine`})}async function ou(e){return await e.request({method:"txpool_content"})}async function iu(e){const{pending:t,queued:s}=await e.request({method:"txpool_status"});return{pending:R(t),queued:R(s)}}async function cu(e,{address:t}){await e.request({method:`${e.mode}_impersonateAccount`,params:[t]})}async function uu(e,{seconds:t}){return await e.request({method:"evm_increaseTime",params:[p(t)]})}async function du(e){return await e.request({method:"txpool_inspect"})}async function lu(e,{state:t}){await e.request({method:`${e.mode}_loadState`,params:[t]})}async function fu(e,{blocks:t,interval:s}){e.mode==="ganache"?await e.request({method:"evm_mine",params:[{blocks:p(t)}]}):await e.request({method:`${e.mode}_mine`,params:[p(t),p(s||0)]})}async function hu(e){await e.request({method:`${e.mode}_removeBlockTimestampInterval`})}async function mu(e,{blockNumber:t,jsonRpcUrl:s}={}){await e.request({method:`${e.mode}_reset`,params:[{forking:{blockNumber:Number(t),jsonRpcUrl:s}}]})}async function gu(e,{id:t}){await e.request({method:"evm_revert",params:[t]})}async function pu(e,t){var x,w,v;const{accessList:s,data:a,from:n,gas:r,gasPrice:i,maxFeePerGas:c,maxPriorityFeePerGas:o,nonce:u,to:l,value:f,...h}=t,d=(v=(w=(x=e.chain)==null?void 0:x.formatters)==null?void 0:w.transactionRequest)==null?void 0:v.format,g=(d||Ye)({...Fs(h,{format:d}),accessList:s,data:a,from:n,gas:r,gasPrice:i,maxFeePerGas:c,maxPriorityFeePerGas:o,nonce:u,to:l,value:f});return await e.request({method:"eth_sendUnsignedTransaction",params:[g]})}async function yu(e,t){e.mode==="ganache"?t?await e.request({method:"miner_start"}):await e.request({method:"miner_stop"}):await e.request({method:"evm_setAutomine",params:[t]})}async function bu(e,{address:t,value:s}){e.mode==="ganache"?await e.request({method:"evm_setAccountBalance",params:[t,p(s)]}):await e.request({method:`${e.mode}_setBalance`,params:[t,p(s)]})}async function wu(e,{gasLimit:t}){await e.request({method:"evm_setBlockGasLimit",params:[p(t)]})}async function _u(e,{interval:t}){const s=e.mode==="hardhat"?t*1e3:t;await e.request({method:`${e.mode}_setBlockTimestampInterval`,params:[s]})}async function xu(e,{address:t,bytecode:s}){e.mode==="ganache"?await e.request({method:"evm_setAccountCode",params:[t,s]}):await e.request({method:`${e.mode}_setCode`,params:[t,s]})}async function vu(e,{address:t}){await e.request({method:`${e.mode}_setCoinbase`,params:[t]})}async function Eu(e,{interval:t}){const s=e.mode==="hardhat"?t*1e3:t;await e.request({method:"evm_setIntervalMining",params:[s]})}async function Pu(e,t){await e.request({method:`${e.mode}_setLoggingEnabled`,params:[t]})}async function Tu(e,{gasPrice:t}){await e.request({method:`${e.mode}_setMinGasPrice`,params:[p(t)]})}async function Su(e,{baseFeePerGas:t}){await e.request({method:`${e.mode}_setNextBlockBaseFeePerGas`,params:[p(t)]})}async function Iu(e,{timestamp:t}){await e.request({method:"evm_setNextBlockTimestamp",params:[p(t)]})}async function Cu(e,{address:t,nonce:s}){await e.request({method:`${e.mode}_setNonce`,params:[t,p(s)]})}async function Au(e,t){await e.request({method:`${e.mode}_setRpcUrl`,params:[t]})}async function Ru(e,{address:t,index:s,value:a}){await e.request({method:`${e.mode}_setStorageAt`,params:[t,typeof s=="number"?p(s):s,a]})}async function Bu(e){return await e.request({method:"evm_snapshot"})}async function ku(e,{address:t}){await e.request({method:`${e.mode}_stopImpersonatingAccount`,params:[t]})}function bs({mode:e}){return t=>{const s=t.extend(()=>({mode:e}));return{dropTransaction:a=>au(s,a),dumpState:()=>nu(s),getAutomine:()=>ru(s),getTxpoolContent:()=>ou(s),getTxpoolStatus:()=>iu(s),impersonateAccount:a=>cu(s,a),increaseTime:a=>uu(s,a),inspectTxpool:()=>du(s),loadState:a=>lu(s,a),mine:a=>fu(s,a),removeBlockTimestampInterval:()=>hu(s),reset:a=>mu(s,a),revert:a=>gu(s,a),sendUnsignedTransaction:a=>pu(s,a),setAutomine:a=>yu(s,a),setBalance:a=>bu(s,a),setBlockGasLimit:a=>wu(s,a),setBlockTimestampInterval:a=>_u(s,a),setCode:a=>xu(s,a),setCoinbase:a=>vu(s,a),setIntervalMining:a=>Eu(s,a),setLoggingEnabled:a=>Pu(s,a),setMinGasPrice:a=>Tu(s,a),setNextBlockBaseFeePerGas:a=>Su(s,a),setNextBlockTimestamp:a=>Iu(s,a),setNonce:a=>Cu(s,a),setRpcUrl:a=>Au(s,a),setStorageAt:a=>Ru(s,a),snapshot:()=>Bu(s),stopImpersonatingAccount:a=>ku(s,a)}}}function Lu(e){const{key:t="test",name:s="Test Client",mode:a}=e;return Qe({...e,key:t,name:s,type:"testClient"}).extend(r=>({mode:a,...bs({mode:a})(r)}))}async function qu(e,{chain:t}){const{id:s,name:a,nativeCurrency:n,rpcUrls:r,blockExplorers:i}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:p(s),chainName:a,nativeCurrency:n,rpcUrls:r.default.http,blockExplorerUrls:i?Object.values(i).map(({url:c})=>c):void 0}]},{dedupe:!0,retryCount:0})}function Mu(e,t){const{abi:s,args:a,bytecode:n,...r}=t,i=Ut({abi:s,args:a,bytecode:n});return Gt(e,{...r,...r.authorizationList?{to:null}:{},data:i})}async function Ou(e){var s;return((s=e.account)==null?void 0:s.type)==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(a=>zt(a))}async function Fu(e,t={}){const{account:s=e.account,chainId:a}=t,n=s?Pe(s):void 0,r=a?[n==null?void 0:n.address,[p(a)]]:[n==null?void 0:n.address],i=await e.request({method:"wallet_getCapabilities",params:r}),c={};for(const[o,u]of Object.entries(i)){c[Number(o)]={};for(let[l,f]of Object.entries(u))l==="addSubAccount"&&(l="unstable_addSubAccount"),c[Number(o)][l]=f}return typeof a=="number"?c[a]:c}async function ju(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}async function Hu(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(s=>O(s))}async function Nu(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}async function Du(e,t){const{id:s}=t;await e.request({method:"wallet_showCallsStatus",params:[s]})}async function Uu(e,t){const{account:s=e.account}=t;if(!s)throw new Xe({docsPath:"/docs/eip7702/signAuthorization"});const a=Pe(s);if(!a.signAuthorization)throw new js({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:a.type});const n=await es(e,t);return a.signAuthorization(n)}async function Gu(e,t){var u,l,f,h;const{account:s=e.account,chain:a=e.chain,...n}=t;if(!s)throw new Xe({docsPath:"/docs/actions/wallet/signTransaction"});const r=Pe(s);Vt({account:r,...t});const i=await j(e,$t,"getChainId")({});a!==null&&Wt({currentChainId:i,chain:a});const c=(a==null?void 0:a.formatters)||((u=e.chain)==null?void 0:u.formatters),o=((l=c==null?void 0:c.transactionRequest)==null?void 0:l.format)||Ye;return r.signTransaction?r.signTransaction({...n,chainId:i},{serializer:(h=(f=e.chain)==null?void 0:f.serializers)==null?void 0:h.transaction}):await e.request({method:"eth_signTransaction",params:[{...o(n),chainId:p(i),from:r.address}]},{retryCount:0})}async function zu(e,t){const{account:s=e.account,domain:a,message:n,primaryType:r}=t;if(!s)throw new Xe({docsPath:"/docs/actions/wallet/signTypedData"});const i=Pe(s),c={EIP712Domain:as({domain:a}),...t.types};if(ns({domain:a,message:n,primaryType:r,types:c}),i.signTypedData)return i.signTypedData({domain:a,message:n,primaryType:r,types:c});const o=rs({domain:a,message:n,primaryType:r,types:c});return e.request({method:"eth_signTypedData_v4",params:[i.address,o]},{retryCount:0})}async function Vu(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:p(t)}]},{retryCount:0})}async function $u(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}function ws(e){return{addChain:t=>qu(e,t),deployContract:t=>Mu(e,t),getAddresses:()=>Ou(e),getCallsStatus:t=>Wi(e,t),getCapabilities:t=>Fu(e,t),getChainId:()=>$t(e),getPermissions:()=>ju(e),prepareAuthorization:t=>es(e,t),prepareTransactionRequest:t=>Ds(e,t),requestAddresses:()=>Hu(e),requestPermissions:t=>Nu(e,t),sendCalls:t=>$i(e,t),sendRawTransaction:t=>Ns(e,t),sendTransaction:t=>Gt(e,t),showCallsStatus:t=>Du(e,t),signAuthorization:t=>Uu(e,t),signMessage:t=>Hs(e,t),signTransaction:t=>Gu(e,t),signTypedData:t=>zu(e,t),switchChain:t=>Vu(e,t),waitForCallsStatus:t=>Vi(e,t),watchAsset:t=>$u(e,t),writeContract:t=>St(e,t)}}function Wu(e){const{key:t="wallet",name:s="Wallet Client",transport:a}=e;return Qe({...e,key:t,name:s,transport:a,type:"walletClient"}).extend(ws)}function Ku(e,t={}){const{keepAlive:s,key:a="webSocket",methods:n,name:r="WebSocket JSON-RPC",reconnect:i,retryDelay:c}=t;return({chain:o,retryCount:u,timeout:l})=>{var g;const f=t.retryCount??u,h=l??t.timeout??1e4,d=e||((g=o==null?void 0:o.rpcUrls.default.webSocket)==null?void 0:g[0]),m={keepAlive:s,reconnect:i};if(!d)throw new Kt;return Jt({key:a,methods:n,name:r,async request({method:y,params:x}){const w={method:y,params:x},v=await ge(d,m),{error:C,result:E}=await v.requestAsync({body:w,timeout:h});if(C)throw new Yt({body:w,error:C,url:d});return E},retryCount:f,retryDelay:c,timeout:h,type:"webSocket"},{getSocket(){return qc(d)},getRpcClient(){return ge(d,m)},async subscribe({params:y,onData:x,onError:w}){const v=await ge(d,m),{result:C}=await new Promise((E,b)=>v.request({body:{method:"eth_subscribe",params:y},onError(P){b(P),w==null||w(P)},onResponse(P){if(P.error){b(P.error),w==null||w(P.error);return}if(typeof P.id=="number"){E(P);return}P.method==="eth_subscription"&&x(P.params)}}));return{subscriptionId:C,async unsubscribe(){return new Promise(E=>v.request({body:{method:"eth_unsubscribe",params:[C]},onResponse:E}))}}}})}}class Ju extends Error{constructor(t,s){super(s),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t,this.details=s}}const Fe="/docs/contract/decodeDeployData";function Yu(e){const{abi:t,bytecode:s,data:a}=e;if(a===s)return{bytecode:s};const n=t.find(i=>"type"in i&&i.type==="constructor");if(!n)throw new Qt({docsPath:Fe});if(!("inputs"in n))throw new Ue({docsPath:Fe});if(!n.inputs||n.inputs.length===0)throw new Ue({docsPath:Fe});return{args:Ke(n.inputs,`0x${a.replace(s,"")}`),bytecode:s}}function Qu({r:e,yParityAndS:t}){const s=te(t),a=s[0]&128?1:0,n=s;return a===1&&(n[0]&=127),{r:e,s:D(n),yParity:a}}function mt(e){const{r:t,s}=os.Signature.fromCompact(e.slice(2,130));return{r:p(t,{size:32}),yParityAndS:p(s,{size:32})}}async function Xu(e){const{serializedTransaction:t,signature:s}=e,a=ys(t),n=s??{r:a.r,s:a.s,v:a.v,yParity:a.yParity},r=us({...a,r:void 0,s:void 0,v:void 0,yParity:void 0,sidecars:void 0});return await se({hash:X(r),signature:n})}function Zu(e){const{r:t,s,v:a,yParity:n}=e,r=Number(n??a-27n);let i=s;if(r===1){const c=te(s);c[0]|=128,i=D(c)}return{r:t,yParityAndS:i}}function gt({r:e,yParityAndS:t}){return`0x${new os.Signature(T(e),T(t)).toCompactHex()}`}function ed(e){const{sidecars:t,version:s}=e,a=e.to??(typeof t[0].blob=="string"?"hex":"bytes"),n=[];for(const{commitment:r}of t)n.push(Xt({commitment:r,to:a,version:s}));return n}function td(e){const t=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),s=typeof e.blobs[0]=="string"?e.blobs.map(c=>te(c)):e.blobs,a=s.reduce((c,o)=>c+o.length,0),n=Ne(new Uint8Array(a));let r=!0;for(const c of s){const o=Ne(c);for(;r&&o.position<c.length;){o.incrementPosition(1);let u=31;c.length-o.position<31&&(u=c.length-o.position);for(const l in Array.from({length:u})){const f=o.readByte();if(f===128&&!o.inspectBytes(o.remaining).includes(128)){r=!1;break}n.pushByte(f)}}}const i=n.bytes.slice(0,n.position);return t==="hex"?D(i):i}function _s({blobToKzgCommitment:e,computeBlobKzgProof:t}){return{blobToKzgCommitment:e,computeBlobKzgProof:t}}function sd(e,t){try{e.loadTrustedSetup(t)}catch(s){const a=s;if(!a.message.includes("trusted setup is already loaded"))throw a}return _s(e)}const ad=Object.freeze(Object.defineProperty({__proto__:null,AbiConstructorNotFoundError:Qt,AbiConstructorParamsNotFoundError:Ue,AbiDecodingDataSizeInvalidError:Us,AbiDecodingDataSizeTooSmallError:Gs,AbiDecodingZeroDataError:zs,AbiEncodingArrayLengthMismatchError:Vs,AbiEncodingBytesSizeMismatchError:$s,AbiEncodingLengthMismatchError:Ws,AbiErrorInputsNotFoundError:Ks,AbiErrorNotFoundError:Js,AbiErrorSignatureNotFoundError:Ys,AbiEventNotFoundError:Qs,AbiEventSignatureEmptyTopicsError:Xs,AbiEventSignatureNotFoundError:Zs,AbiFunctionNotFoundError:ea,AbiFunctionOutputsNotFoundError:ta,AbiFunctionSignatureNotFoundError:sa,AccountStateConflictError:aa,AtomicReadyWalletRejectedUpgradeError:na,AtomicityNotSupportedError:ra,BaseError:ve,BaseFeeScalarError:oa,BlockNotFoundError:ia,BundleTooLargeError:ca,BytesSizeMismatchError:ua,CallExecutionError:da,ChainDisconnectedError:la,ChainDoesNotSupportContract:fa,ChainMismatchError:ha,ChainNotFoundError:ma,CircularReferenceError:ga,ClientChainNotConfiguredError:pa,ContractFunctionExecutionError:ya,ContractFunctionRevertedError:ba,ContractFunctionZeroDataError:wa,CounterfactualDeploymentFailedError:_a,DecodeLogDataMismatch:xa,DecodeLogTopicsMismatch:va,DuplicateIdError:Ea,EIP1193ProviderRpcError:Ju,Eip1559FeesNotSupportedError:Pa,EnsAvatarInvalidNftUriError:Ki,EnsAvatarUnsupportedNamespaceError:Ji,EnsAvatarUriResolutionError:Yi,EstimateGasExecutionError:Ta,ExecutionRevertedError:Sa,FeeCapTooHighError:xe,FeeCapTooLowError:Ia,FeeConflictError:Ca,FilterTypeNotSupportedError:Qi,HttpRequestError:Aa,InsufficientFundsError:Ra,IntegerOutOfRangeError:Ba,InternalRpcError:ka,IntrinsicGasTooHighError:La,IntrinsicGasTooLowError:qa,InvalidAbiDecodingTypeError:Ma,InvalidAbiEncodingTypeError:Oa,InvalidAbiItemError:Fa,InvalidAbiParameterError:Pt,InvalidAbiParametersError:Tt,InvalidAbiTypeParameterError:ja,InvalidAddressError:z,InvalidArrayError:Ha,InvalidBytesBooleanError:Na,InvalidChainIdError:Z,InvalidDecimalNumberError:Da,InvalidDefinitionTypeError:Ua,InvalidDomainError:fc,InvalidFunctionModifierError:Ga,InvalidHexBooleanError:za,InvalidHexValueError:Ft,InvalidInputRpcError:Va,InvalidLegacyVError:We,InvalidModifierError:$a,InvalidParameterError:Wa,InvalidParamsRpcError:Ka,InvalidParenthesisError:Ja,InvalidPrimaryTypeError:hc,InvalidRequestRpcError:Ya,InvalidSerializableTransactionError:Qa,InvalidSerializedTransactionError:J,InvalidSerializedTransactionTypeError:Ht,InvalidSignatureError:Xa,InvalidStorageKeySizeError:Rt,InvalidStructSignatureError:Za,InvalidStructTypeError:mc,JsonRpcVersionUnsupportedError:en,LimitExceededRpcError:tn,MaxFeePerGasTooLowError:sn,MethodNotFoundRpcError:an,MethodNotSupportedRpcError:nn,NonceMaxValueError:rn,NonceTooHighError:on,NonceTooLowError:cn,ParseRpcError:un,ProviderDisconnectedError:dn,ProviderRpcError:ln,RawContractError:fn,ResourceNotFoundRpcError:hn,ResourceUnavailableRpcError:mn,RpcError:gn,RpcRequestError:Yt,SizeExceedsPaddingSizeError:pn,SizeOverflowError:yn,SliceOffsetOutOfBoundsError:bn,SocketClosedError:Q,SolidityProtectedKeywordError:wn,StateAssignmentConflictError:_n,SwitchChainError:xn,TimeoutError:Ct,TipAboveFeeCapError:At,TransactionExecutionError:vn,TransactionNotFoundError:En,TransactionReceiptNotFoundError:Pn,TransactionRejectedRpcError:Tn,TransactionTypeNotSupportedError:Sn,UnauthorizedProviderError:In,UnknownBundleIdError:Cn,UnknownNodeError:An,UnknownRpcError:Rn,UnknownSignatureError:Bn,UnknownTypeError:kn,UnsupportedChainIdError:Ln,UnsupportedNonOptionalCapabilityError:qn,UnsupportedPackedAbiType:Mn,UnsupportedProviderMethodError:On,UrlRequiredError:Kt,UserRejectedRequestError:Fn,WaitForCallsStatusTimeoutError:Xi,WaitForTransactionReceiptTimeoutError:jn,WebSocketRequestError:He,assertCurrentChain:Wt,assertRequest:Vt,assertTransactionEIP1559:ae,assertTransactionEIP2930:Ze,assertTransactionLegacy:et,blobsToCommitments:kt,blobsToProofs:qt,boolToBytes:Hn,boolToHex:Nn,bytesToBigInt:Dn,bytesToBool:Un,bytesToHex:D,bytesToNumber:Gn,bytesToRlp:zn,bytesToString:Vn,ccipFetch:ft,ccipRequest:ft,checksumAddress:zt,commitmentToVersionedHash:Xt,commitmentsToVersionedHashes:Lt,compactSignatureToHex:gt,compactSignatureToSignature:Qu,concat:Ot,concatBytes:$n,concatHex:ee,createClient:Qe,createNonceManager:Zi,createPublicClient:ec,createTestClient:Lu,createTransport:Jt,createWalletClient:Wu,custom:Wn,decodeAbiParameters:Ke,decodeDeployData:Yu,decodeErrorResult:Kn,decodeEventLog:Jn,decodeFunctionData:xc,decodeFunctionResult:Yn,defineBlock:Qn,defineChain:Xn,defineKzg:_s,defineTransaction:Zn,defineTransactionReceipt:er,defineTransactionRequest:tr,deploylessCallViaBytecodeBytecode:sr,deploylessCallViaFactoryBytecode:ar,domainSeparator:gc,encodeAbiParameters:nr,encodeDeployData:Ut,encodeErrorResult:vc,encodeEventTopics:tc,encodeFunctionData:rr,encodeFunctionResult:Ec,encodePacked:sc,erc1155Abi:or,erc20Abi:ir,erc20Abi_bytes32:cr,erc4626Abi:ur,erc721Abi:dr,ethAddress:ac,etherUnits:Nt,extractChain:kc,fallback:lr,formatBlock:fr,formatEther:hr,formatGwei:mr,formatLog:gr,formatTransaction:pr,formatTransactionReceipt:yr,formatTransactionRequest:Ye,formatUnits:br,fromBlobs:td,fromBytes:wr,fromHex:_r,fromRlp:tt,getAbiItem:xr,getAddress:O,getChainContractAddress:vr,getContract:Bc,getContractAddress:Dc,getContractError:Er,getCreate2Address:ls,getCreateAddress:ds,getEventSelector:it,getEventSignature:de,getFunctionSelector:ct,getFunctionSignature:de,getSerializedTransactionType:ps,getTransactionType:Bt,getTypesForEIP712Domain:as,gweiUnits:Dt,hashDomain:pc,hashMessage:ts,hashStruct:yc,hashTypedData:ss,hexToBigInt:T,hexToBool:Pr,hexToBytes:te,hexToCompactSignature:mt,hexToNumber:R,hexToRlp:Tr,hexToSignature:dt,hexToString:Sr,http:Ir,isAddress:G,isAddressEqual:Ee,isBytes:Ge,isErc6492Signature:Zt,isHash:hs,isHex:_,keccak256:X,labelhash:nc,maxInt104:Cr,maxInt112:Ar,maxInt120:Rr,maxInt128:Br,maxInt136:kr,maxInt144:Lr,maxInt152:qr,maxInt16:Mr,maxInt160:Or,maxInt168:Fr,maxInt176:jr,maxInt184:Hr,maxInt192:Nr,maxInt200:Dr,maxInt208:Ur,maxInt216:Gr,maxInt224:zr,maxInt232:Vr,maxInt24:$r,maxInt240:Wr,maxInt248:Kr,maxInt256:Jr,maxInt32:Yr,maxInt40:Qr,maxInt48:Xr,maxInt56:Zr,maxInt64:eo,maxInt72:to,maxInt8:so,maxInt80:ao,maxInt88:no,maxInt96:ro,maxUint104:oo,maxUint112:io,maxUint120:co,maxUint128:uo,maxUint136:lo,maxUint144:fo,maxUint152:ho,maxUint16:mo,maxUint160:go,maxUint168:po,maxUint176:yo,maxUint184:bo,maxUint192:wo,maxUint200:_o,maxUint208:xo,maxUint216:vo,maxUint224:Eo,maxUint232:Po,maxUint24:To,maxUint240:So,maxUint248:Io,maxUint256:_e,maxUint32:Co,maxUint40:Ao,maxUint48:Ro,maxUint56:Bo,maxUint64:ko,maxUint72:Lo,maxUint8:qo,maxUint80:Mo,maxUint88:Oo,maxUint96:Fo,minInt104:jo,minInt112:Ho,minInt120:No,minInt128:Do,minInt136:Uo,minInt144:Go,minInt152:zo,minInt16:Vo,minInt160:$o,minInt168:Wo,minInt176:Ko,minInt184:Jo,minInt192:Yo,minInt200:Qo,minInt208:Xo,minInt216:Zo,minInt224:ei,minInt232:ti,minInt24:si,minInt240:ai,minInt248:ni,minInt256:ri,minInt32:oi,minInt40:ii,minInt48:ci,minInt56:ui,minInt64:di,minInt72:li,minInt8:fi,minInt80:hi,minInt88:mi,minInt96:gi,multicall3Abi:pi,namehash:rc,nonceManager:oc,numberToBytes:yi,numberToHex:p,offchainLookup:Pc,offchainLookupAbiItem:Tc,offchainLookupSignature:Sc,pad:Mt,padBytes:bi,padHex:De,parseAbi:wi,parseAbiItem:ic,parseAbiParameter:Ac,parseAbiParameters:Rc,parseCompactSignature:mt,parseErc6492Signature:Kc,parseEther:tu,parseEventLogs:_i,parseGwei:su,parseSignature:dt,parseTransaction:ys,parseUnits:Je,prepareEncodeFunctionData:xi,presignMessagePrefix:bc,publicActions:cc,recoverAddress:se,recoverMessageAddress:ms,recoverPublicKey:vi,recoverTransactionAddress:Xu,recoverTypedDataAddress:gs,ripemd160:zc,rpcSchema:Ei,rpcTransactionType:Pi,serializeAccessList:ne,serializeCompactSignature:gt,serializeErc6492Signature:uc,serializeSignature:lt,serializeTransaction:us,serializeTypedData:rs,setErrorConfig:Ti,setupKzg:sd,sha256:Si,shouldThrow:Ii,sidecarsToVersionedHashes:ed,signatureToCompactSignature:Zu,signatureToHex:lt,size:ze,slice:Ve,sliceBytes:Ci,sliceHex:jt,stringToBytes:Ai,stringToHex:Ri,stringify:Bi,testActions:bs,toBlobSidecars:$e,toBlobs:ki,toBytes:H,toEventHash:ut,toEventSelector:it,toEventSignature:de,toFunctionHash:ut,toFunctionSelector:ct,toFunctionSignature:de,toHex:be,toPrefixedMessage:wc,toRlp:N,transactionType:Li,trim:$,universalSignatureValidatorAbi:qi,universalSignatureValidatorByteCode:Mi,validateTypedData:ns,verifyHash:Vc,verifyMessage:$c,verifyTypedData:Wc,walletActions:ws,webSocket:Ku,weiUnits:Oi,withCache:Fi,withRetry:ji,withTimeout:It,zeroAddress:dc,zeroHash:lc},Symbol.toStringTag,{value:"Module"}));var st={},Ie={},xs={},we={},vs={},ie={},ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.getSDKVersion=void 0;const nd=()=>"9.1.0";ce.getSDKVersion=nd;var Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.generateRequestId=void 0;const rd=e=>e.toString(16).padStart(2,"0"),od=e=>{const t=new Uint8Array(e/2);return window.crypto.getRandomValues(t),Array.from(t,rd).join("")},id=()=>typeof window<"u"?od(10):new Date().getTime().toString(36);Ce.generateRequestId=id;Object.defineProperty(ie,"__esModule",{value:!0});ie.MessageFormatter=void 0;const cd=ce,ud=Ce;class Ae{}ie.MessageFormatter=Ae;Ae.makeRequest=(e,t)=>({id:(0,ud.generateRequestId)(),method:e,params:t,env:{sdkVersion:(0,cd.getSDKVersion)()}});Ae.makeResponse=(e,t,s)=>({id:e,success:!0,version:s,data:t});Ae.makeErrorResponse=(e,t,s)=>({id:e,success:!1,error:t,version:s});var q={};Object.defineProperty(q,"__esModule",{value:!0});q.RestrictedMethods=q.Methods=void 0;var pt;(function(e){e.sendTransactions="sendTransactions",e.rpcCall="rpcCall",e.getChainInfo="getChainInfo",e.getSafeInfo="getSafeInfo",e.getTxBySafeTxHash="getTxBySafeTxHash",e.getSafeBalances="getSafeBalances",e.signMessage="signMessage",e.signTypedMessage="signTypedMessage",e.getEnvironmentInfo="getEnvironmentInfo",e.getOffChainSignature="getOffChainSignature",e.requestAddressBook="requestAddressBook",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions"})(pt||(q.Methods=pt={}));var yt;(function(e){e.requestAddressBook="requestAddressBook"})(yt||(q.RestrictedMethods=yt={}));(function(e){var t=I&&I.__createBinding||(Object.create?function(r,i,c,o){o===void 0&&(o=c);var u=Object.getOwnPropertyDescriptor(i,c);(!u||("get"in u?!i.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return i[c]}}),Object.defineProperty(r,o,u)}:function(r,i,c,o){o===void 0&&(o=c),r[o]=i[c]}),s=I&&I.__exportStar||function(r,i){for(var c in r)c!=="default"&&!Object.prototype.hasOwnProperty.call(i,c)&&t(i,r,c)};Object.defineProperty(e,"__esModule",{value:!0});const a=ie;class n{constructor(i=null,c=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:o,data:u,source:l})=>{const f=!u,h=!this.isServer&&l===window.parent,d=typeof u.version<"u"&&parseInt(u.version.split(".")[0]),m=typeof d=="number"&&d>=1;let g=!0;return Array.isArray(this.allowedOrigins)&&(g=this.allowedOrigins.find(y=>y.test(o))!==void 0),!f&&h&&m&&g},this.logIncomingMessage=o=>{console.info(`Safe Apps SDK v1: A message was received from origin ${o.origin}. `,o.data)},this.onParentMessage=o=>{this.isValidMessage(o)&&(this.debugMode&&this.logIncomingMessage(o),this.handleIncomingMessage(o.data))},this.handleIncomingMessage=o=>{const{id:u}=o,l=this.callbacks.get(u);l&&(l(o),this.callbacks.delete(u))},this.send=(o,u)=>{const l=a.MessageFormatter.makeRequest(o,u);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(l,"*"),new Promise((f,h)=>{this.callbacks.set(l.id,d=>{if(!d.success){h(new Error(d.error));return}f(d)})})},this.allowedOrigins=i,this.debugMode=c,this.isServer||window.addEventListener("message",this.onParentMessage)}}e.default=n,s(q,e)})(vs);var Re={},Be={},ke={};Object.defineProperty(ke,"__esModule",{value:!0});ke.isObjectEIP712TypedData=void 0;const dd=e=>typeof e=="object"&&e!=null&&"domain"in e&&"types"in e&&"message"in e;ke.isObjectEIP712TypedData=dd;var Es={};Object.defineProperty(Es,"__esModule",{value:!0});var Ps={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TransferDirection=e.TransactionStatus=e.TokenType=e.Operation=void 0;var t=As;Object.defineProperty(e,"Operation",{enumerable:!0,get:function(){return t.Operation}}),Object.defineProperty(e,"TokenType",{enumerable:!0,get:function(){return t.TokenType}}),Object.defineProperty(e,"TransactionStatus",{enumerable:!0,get:function(){return t.TransactionStatus}}),Object.defineProperty(e,"TransferDirection",{enumerable:!0,get:function(){return t.TransferDirection}})})(Ps);var Ts={};Object.defineProperty(Ts,"__esModule",{value:!0});(function(e){var t=I&&I.__createBinding||(Object.create?function(a,n,r,i){i===void 0&&(i=r);var c=Object.getOwnPropertyDescriptor(n,r);(!c||("get"in c?!n.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return n[r]}}),Object.defineProperty(a,i,c)}:function(a,n,r,i){i===void 0&&(i=r),a[i]=n[r]}),s=I&&I.__exportStar||function(a,n){for(var r in a)r!=="default"&&!Object.prototype.hasOwnProperty.call(n,r)&&t(n,a,r)};Object.defineProperty(e,"__esModule",{value:!0}),s(ke,e),s(Es,e),s(Ps,e),s(Ts,e)})(Be);Object.defineProperty(Re,"__esModule",{value:!0});Re.TXs=void 0;const fe=q,ld=Be;class fd{constructor(t){this.communicator=t}async getBySafeTxHash(t){if(!t)throw new Error("Invalid safeTxHash");return(await this.communicator.send(fe.Methods.getTxBySafeTxHash,{safeTxHash:t})).data}async signMessage(t){const s={message:t};return(await this.communicator.send(fe.Methods.signMessage,s)).data}async signTypedMessage(t){if(!(0,ld.isObjectEIP712TypedData)(t))throw new Error("Invalid typed data");return(await this.communicator.send(fe.Methods.signTypedMessage,{typedData:t})).data}async send({txs:t,params:s}){if(!t||!t.length)throw new Error("No transactions were passed");const a={txs:t,params:s};return(await this.communicator.send(fe.Methods.sendTransactions,a)).data}}Re.TXs=fd;var Le={},Y={};Object.defineProperty(Y,"__esModule",{value:!0});Y.RPC_CALLS=void 0;Y.RPC_CALLS={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"};Object.defineProperty(Le,"__esModule",{value:!0});Le.Eth=void 0;const B=Y,hd=q,M={defaultBlockParam:(e="latest")=>e,returnFullTxObjectParam:(e=!1)=>e,blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class md{constructor(t){this.communicator=t,this.call=this.buildRequest({call:B.RPC_CALLS.eth_call,formatters:[null,M.defaultBlockParam]}),this.getBalance=this.buildRequest({call:B.RPC_CALLS.eth_getBalance,formatters:[null,M.defaultBlockParam]}),this.getCode=this.buildRequest({call:B.RPC_CALLS.eth_getCode,formatters:[null,M.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:B.RPC_CALLS.eth_getStorageAt,formatters:[null,M.blockNumberToHex,M.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:B.RPC_CALLS.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:B.RPC_CALLS.eth_getBlockByHash,formatters:[null,M.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:B.RPC_CALLS.eth_getBlockByNumber,formatters:[M.blockNumberToHex,M.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:B.RPC_CALLS.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:B.RPC_CALLS.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:B.RPC_CALLS.eth_getTransactionCount,formatters:[null,M.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:B.RPC_CALLS.eth_gasPrice}),this.getEstimateGas=s=>this.buildRequest({call:B.RPC_CALLS.eth_estimateGas})([s]),this.setSafeSettings=this.buildRequest({call:B.RPC_CALLS.safe_setSettings})}buildRequest(t){const{call:s,formatters:a}=t;return async n=>{a&&Array.isArray(n)&&a.forEach((c,o)=>{c&&(n[o]=c(n[o]))});const r={call:s,params:n||[]};return(await this.communicator.send(hd.Methods.rpcCall,r)).data}}}Le.Eth=md;var qe={};const gd=Is(ad);var W={};Object.defineProperty(W,"__esModule",{value:!0});W.MAGIC_VALUE_BYTES=W.MAGIC_VALUE=void 0;const pd="0x1626ba7e";W.MAGIC_VALUE=pd;const yd="0x20c13b0b";W.MAGIC_VALUE_BYTES=yd;var at={},ue={},U={};Object.defineProperty(U,"__esModule",{value:!0});U.PermissionsError=U.PERMISSIONS_REQUEST_REJECTED=void 0;U.PERMISSIONS_REQUEST_REJECTED=4001;class nt extends Error{constructor(t,s,a){super(t),this.code=s,this.data=a,Object.setPrototypeOf(this,nt.prototype)}}U.PermissionsError=nt;Object.defineProperty(ue,"__esModule",{value:!0});ue.Wallet=void 0;const je=q,he=U;class bd{constructor(t){this.communicator=t}async getPermissions(){return(await this.communicator.send(je.Methods.wallet_getPermissions,void 0)).data}async requestPermissions(t){if(!this.isPermissionRequestValid(t))throw new he.PermissionsError("Permissions request is invalid",he.PERMISSIONS_REQUEST_REJECTED);try{return(await this.communicator.send(je.Methods.wallet_requestPermissions,t)).data}catch{throw new he.PermissionsError("Permissions rejected",he.PERMISSIONS_REQUEST_REJECTED)}}isPermissionRequestValid(t){return t.every(s=>typeof s=="object"?Object.keys(s).every(a=>!!Object.values(je.RestrictedMethods).includes(a)):!1)}}ue.Wallet=bd;Object.defineProperty(at,"__esModule",{value:!0});const wd=ue,bt=U,wt=(e,t)=>t.some(s=>s.parentCapability===e),_d=()=>(e,t,s)=>{const a=s.value;return s.value=async function(){const n=new wd.Wallet(this.communicator);let r=await n.getPermissions();if(wt(t,r)||(r=await n.requestPermissions([{[t]:{}}])),!wt(t,r))throw new bt.PermissionsError("Permissions rejected",bt.PERMISSIONS_REQUEST_REJECTED);return a.apply(this)},s};at.default=_d;var xd=I&&I.__decorate||function(e,t,s,a){var n=arguments.length,r=n<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,s):a,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,s,a);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r},vd=I&&I.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qe,"__esModule",{value:!0});qe.Safe=void 0;const me=gd,_t=W,F=q,xt=Y,Ed=Be,Pd=vd(at);class Ss{constructor(t){this.communicator=t}async getChainInfo(){return(await this.communicator.send(F.Methods.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(F.Methods.getSafeInfo,void 0)).data}async experimental_getBalances({currency:t="usd"}={}){return(await this.communicator.send(F.Methods.getSafeBalances,{currency:t})).data}async check1271Signature(t,s="0x"){const a=await this.getInfo(),n=(0,me.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,s]}),r={call:xt.RPC_CALLS.eth_call,params:[{to:a.safeAddress,data:n},"latest"]};try{return(await this.communicator.send(F.Methods.rpcCall,r)).data.slice(0,10).toLowerCase()===_t.MAGIC_VALUE}catch{return!1}}async check1271SignatureBytes(t,s="0x"){const a=await this.getInfo(),n=(0,me.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,s]}),r={call:xt.RPC_CALLS.eth_call,params:[{to:a.safeAddress,data:n},"latest"]};try{return(await this.communicator.send(F.Methods.rpcCall,r)).data.slice(0,10).toLowerCase()===_t.MAGIC_VALUE_BYTES}catch{return!1}}calculateMessageHash(t){return(0,me.hashMessage)(t)}calculateTypedMessageHash(t){const s=typeof t.domain.chainId=="object"?t.domain.chainId.toNumber():Number(t.domain.chainId);let a=t.primaryType;if(!a){const n=Object.values(t.types),r=Object.keys(t.types).filter(i=>n.every(c=>c.every(({type:o})=>o.replace("[","").replace("]","")!==i)));if(r.length===0||r.length>1)throw new Error("Please specify primaryType");a=r[0]}return(0,me.hashTypedData)({message:t.message,domain:{...t.domain,chainId:s,verifyingContract:t.domain.verifyingContract,salt:t.domain.salt},types:t.types,primaryType:a})}async getOffChainSignature(t){return(await this.communicator.send(F.Methods.getOffChainSignature,t)).data}async isMessageSigned(t,s="0x"){let a;if(typeof t=="string"&&(a=async()=>{const n=this.calculateMessageHash(t);return await this.isMessageHashSigned(n,s)}),(0,Ed.isObjectEIP712TypedData)(t)&&(a=async()=>{const n=this.calculateTypedMessageHash(t);return await this.isMessageHashSigned(n,s)}),a)return await a();throw new Error("Invalid message type")}async isMessageHashSigned(t,s="0x"){const a=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const n of a)if(await n(t,s))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(F.Methods.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(F.Methods.requestAddressBook,void 0)).data}}qe.Safe=Ss;xd([(0,Pd.default)()],Ss.prototype,"requestAddressBook",null);var Td=I&&I.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(we,"__esModule",{value:!0});const Sd=Td(vs),Id=Re,Cd=Le,Ad=qe,Rd=ue;class Bd{constructor(t={}){const{allowedDomains:s=null,debug:a=!1}=t;this.communicator=new Sd.default(s,a),this.eth=new Cd.Eth(this.communicator),this.txs=new Id.TXs(this.communicator),this.safe=new Ad.Safe(this.communicator),this.wallet=new Rd.Wallet(this.communicator)}}we.default=Bd;(function(e){var t=I&&I.__createBinding||(Object.create?function(i,c,o,u){u===void 0&&(u=o);var l=Object.getOwnPropertyDescriptor(c,o);(!l||("get"in l?!c.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return c[o]}}),Object.defineProperty(i,u,l)}:function(i,c,o,u){u===void 0&&(u=o),i[u]=c[o]}),s=I&&I.__exportStar||function(i,c){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(c,o)&&t(c,i,o)},a=I&&I.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e,"__esModule",{value:!0}),e.getSDKVersion=void 0;const n=a(we);e.default=n.default,s(we,e),s(Be,e),s(q,e),s(ie,e);var r=ce;Object.defineProperty(e,"getSDKVersion",{enumerable:!0,get:function(){return r.getSDKVersion}}),s(Y,e)})(xs);var K={};Object.defineProperty(K,"__esModule",{value:!0});K.numberToHex=K.getLowerCase=void 0;function kd(e){return e&&e.toLowerCase()}K.getLowerCase=kd;function Ld(e){return`0x${e.toString(16)}`}K.numberToHex=Ld;Object.defineProperty(Ie,"__esModule",{value:!0});Ie.SafeAppProvider=void 0;const V=xs,qd=Hi,L=K;class Md extends qd.EventEmitter{constructor(t,s){super(),this.submittedTxs=new Map,this.safe=t,this.sdk=s}async connect(){this.emit("connect",{chainId:this.chainId})}async disconnect(){}get chainId(){return this.safe.chainId}async request(t){var n,r,i,c;const{method:s,params:a=[]}=t;switch(s){case"eth_accounts":return[this.safe.safeAddress];case"net_version":case"eth_chainId":return(0,L.numberToHex)(this.chainId);case"personal_sign":{const[h,d]=a;if(this.safe.safeAddress.toLowerCase()!==d.toLowerCase())throw new Error("The address or message hash is invalid");const m=await this.sdk.txs.signMessage(h);return("signature"in m?m.signature:void 0)||"0x"}case"eth_sign":{const[h,d]=a;if(this.safe.safeAddress.toLowerCase()!==h.toLowerCase()||!d.startsWith("0x"))throw new Error("The address or message hash is invalid");const m=await this.sdk.txs.signMessage(d);return("signature"in m?m.signature:void 0)||"0x"}case"eth_signTypedData":case"eth_signTypedData_v4":{const[h,d]=a,m=typeof d=="string"?JSON.parse(d):d;if(this.safe.safeAddress.toLowerCase()!==h.toLowerCase())throw new Error("The address is invalid");const g=await this.sdk.txs.signTypedMessage(m);return("signature"in g?g.signature:void 0)||"0x"}case"eth_sendTransaction":const o={...a[0],value:a[0].value||"0",data:a[0].data||"0x"};typeof o.gas=="string"&&o.gas.startsWith("0x")&&(o.gas=parseInt(o.gas,16));const u=await this.sdk.txs.send({txs:[o],params:{safeTxGas:o.gas}});return this.submittedTxs.set(u.safeTxHash,{from:this.safe.safeAddress,hash:u.safeTxHash,gas:0,gasPrice:"0x00",nonce:0,input:o.data,value:o.value,to:o.to,blockHash:null,blockNumber:null,transactionIndex:null}),u.safeTxHash;case"eth_blockNumber":return(await this.sdk.eth.getBlockByNumber(["latest"])).number;case"eth_getBalance":return this.sdk.eth.getBalance([(0,L.getLowerCase)(a[0]),a[1]]);case"eth_getCode":return this.sdk.eth.getCode([(0,L.getLowerCase)(a[0]),a[1]]);case"eth_getTransactionCount":return this.sdk.eth.getTransactionCount([(0,L.getLowerCase)(a[0]),a[1]]);case"eth_getStorageAt":return this.sdk.eth.getStorageAt([(0,L.getLowerCase)(a[0]),a[1],a[2]]);case"eth_getBlockByNumber":return this.sdk.eth.getBlockByNumber([a[0],a[1]]);case"eth_getBlockByHash":return this.sdk.eth.getBlockByHash([a[0],a[1]]);case"eth_getTransactionByHash":let f=a[0];try{f=(await this.sdk.txs.getBySafeTxHash(f)).txHash||f}catch{}return this.submittedTxs.has(f)?this.submittedTxs.get(f):this.sdk.eth.getTransactionByHash([f]).then(h=>(h&&(h.hash=a[0]),h));case"eth_getTransactionReceipt":{let h=a[0];try{h=(await this.sdk.txs.getBySafeTxHash(h)).txHash||h}catch{}return this.sdk.eth.getTransactionReceipt([h]).then(d=>(d&&(d.transactionHash=a[0]),d))}case"eth_estimateGas":return this.sdk.eth.getEstimateGas(a[0]);case"eth_call":return this.sdk.eth.call([a[0],a[1]]);case"eth_getLogs":return this.sdk.eth.getPastLogs([a[0]]);case"eth_gasPrice":return this.sdk.eth.getGasPrice();case"wallet_getPermissions":return this.sdk.wallet.getPermissions();case"wallet_requestPermissions":return this.sdk.wallet.requestPermissions(a[0]);case"safe_setSettings":return this.sdk.eth.setSafeSettings([a[0]]);case"wallet_sendCalls":{const{from:h,calls:d,chainId:m}=a[0];if(m!==(0,L.numberToHex)(this.chainId))throw new Error(`Safe is not on chain ${m}`);if(h!==this.safe.safeAddress)throw Error("Invalid from address");const g=d.map((w,v)=>{if(!w.to)throw new Error(`Invalid call #${v}: missing "to" field`);return{to:w.to,data:w.data??"0x",value:w.value??(0,L.numberToHex)(0)}}),{safeTxHash:y}=await this.sdk.txs.send({txs:g});return{id:y}}case"wallet_getCallsStatus":{const h=a[0],d={[V.TransactionStatus.AWAITING_CONFIRMATIONS]:100,[V.TransactionStatus.AWAITING_EXECUTION]:100,[V.TransactionStatus.SUCCESS]:200,[V.TransactionStatus.CANCELLED]:400,[V.TransactionStatus.FAILED]:500},m=await this.sdk.txs.getBySafeTxHash(h),g={version:"1.0",id:h,chainId:(0,L.numberToHex)(this.chainId),status:d[m.txStatus]};if(!m.txHash)return g;const y=await this.sdk.eth.getTransactionReceipt([m.txHash]);if(!y)return g;const x=((r=(n=m.txData)==null?void 0:n.dataDecoded)==null?void 0:r.method)!=="multiSend"?1:((c=(i=m.txData.dataDecoded.parameters)==null?void 0:i[0].valueDecoded)==null?void 0:c.length)??1,w=Number(y.blockNumber),v=Number(y.gasUsed);return g.receipts=Array(x).fill({logs:y.logs,status:(0,L.numberToHex)(m.txStatus===V.TransactionStatus.SUCCESS?1:0),blockHash:y.blockHash,blockNumber:(0,L.numberToHex)(w),gasUsed:(0,L.numberToHex)(v),transactionHash:m.txHash}),g}case"wallet_showCallsStatus":throw new Error(`"${t.method}" not supported`);case"wallet_getCapabilities":return{[(0,L.numberToHex)(this.chainId)]:{atomicBatch:{supported:!0}}};default:throw Error(`"${t.method}" not implemented`)}}send(t,s){t||s("Undefined request"),this.request(t).then(a=>s(null,{jsonrpc:"2.0",id:t.id,result:a})).catch(a=>s(a,null))}}Ie.SafeAppProvider=Md;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeAppProvider=void 0;var t=Ie;Object.defineProperty(e,"SafeAppProvider",{enumerable:!0,get:function(){return t.SafeAppProvider}})})(st);const Od=Cs(st),Wd=Cc({__proto__:null,default:Od},[st]);export{Wd as i};

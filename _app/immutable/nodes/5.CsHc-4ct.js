var Fn=e=>{throw TypeError(e)};var un=(e,n,t)=>n.has(e)||Fn("Cannot "+t);var ie=(e,n,t)=>(un(e,n,"read from private field"),t?t.call(e):n.get(e)),Re=(e,n,t)=>n.has(e)?Fn("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(e):n.set(e,t),Wn=(e,n,t,i)=>(un(e,n,"write to private field"),i?i.call(e,t):n.set(e,t),t),Yn=(e,n,t)=>(un(e,n,"access private method"),t);import"../chunks/CWj6FrbW.js";import{B as sr,h as Fr,o as Wr,q as Yr,f as $,t as ce,b as G,al as V,k as u,ak as N,aj as me,p as Se,aP as cn,a as Ze,aQ as kn,c as Ae,d as H,r as R,z as ge,s as q,aK as Vt,g as Ot,aX as zr,$ as dn}from"../chunks/8ZL4plC7.js";import{s as rt,d as it,e as Ue,m as Xr}from"../chunks/5ydkCp1N.js";import{i as Oe}from"../chunks/DgOwyvh5.js";import{h as qr}from"../chunks/MaUIUMe0.js";import{s as K,r as On,a as Vr}from"../chunks/LiIg-eof.js";import{s as wt}from"../chunks/UvXCAlEy.js";import{s as wn}from"../chunks/c8X7ZcKw.js";import{c as lr,b as Gr}from"../chunks/-i0roBdl.js";import{b as ve}from"../chunks/Dxov3PAW.js";import{T as Br}from"../chunks/Bp_RW_AD.js";import{l as zn}from"../chunks/8HslT92O.js";import{v as Yt,c as Kr}from"../chunks/CYf-Csf8.js";import{b as Zr}from"../chunks/CH4yTGyN.js";import{p as ur}from"../chunks/COQkvP3Y.js";import{s as vt}from"../chunks/CyorBdjw.js";import{g as cr,j as $r}from"../chunks/D029h9G4.js";import{N as Qr,r as Jr,i as qt,j as fn}from"../chunks/SXEma9z9.js";import{e as dr,i as ei}from"../chunks/CD0Uw8Ry.js";import{c as _n}from"../chunks/BuFIMopG.js";import{p as Ee}from"../chunks/CjIms16n.js";import{g as Xn,h as ti}from"../chunks/C_jHh3BX.js";import{t as zt}from"../chunks/vAFrriDj.js";function ni(e,n,t){sr(()=>{var i=Fr(()=>n(e,t==null?void 0:t())||{});if(i!=null&&i.destroy)return()=>i.destroy()})}function ri(e,n,t,i,s){var l=()=>{i(t[e])};t.addEventListener(n,l),s?Wr(()=>{t[e]=s()}):l(),(t===document.body||t===window||t===document)&&Yr(()=>{t.removeEventListener(n,l)})}async function ii(e,n){const i=cr().session();try{const{records:[s]}=await i.run("MERGE (r:Root) RETURN elementId(r) as id");let l=s.get("id");const d=`
      MATCH (elem) WHERE elementId(elem) = $currentId
      MERGE (elem)-[tain:CONTAINS {path: $element}]->(next:Spot)
      ON CREATE SET elem.mimis_id = $elemUUID
      ON CREATE SEY tain.mimis_id = $tainUUID
      RETURN elementId(next) as id
    `;for(const O of n){const{records:[k]}=await i.run(d,{currentId:l,element:O,elemUUID:Yt(),tainUUID:Yt()});l=k.get("id")}const h=`
      MATCH (path) WHERE elementId(path) = $currentId
      OPTIONAL MATCH (path)-[:REPRESENTED_BY]->(sib:Nöopoint)
      WITH path, sib
      ORDER BY sib.createdAt DESC
      WITH path, collect(sib)[0] as previous
      CREATE (path)-[:REPRESENTED_BY]->(list:List:Nöopoint {
        mimis_id: $uuid, createdAt: timestamp()
      })
      WITH list, previous
      FOREACH (_ IN CASE WHEN previous IS NOT NULL THEN [1] ELSE [] END |
        MERGE (list)-[:PREVIOUS]->(previous)
      )
      RETURN elementId(list) as id
    `,{records:[v]}=await i.run(h,{currentId:l,uuid:Yt()});l=v.get("id");const p=`
      MATCH (list) WHERE elementId(list) = $currentId
      MERGE (file:IPFS:File {cid: $cid})
      MERGE (point:Nöopoint)-[:EMBODIED_AS]->(file)
      MERGE (spot:Spot)-[:REPRESENTED_BY]->(point)
      MERGE (item:Spot)-[:CONTAINS {path: $title}]->(spot)
      ON CREATE SET file.createdAt = timestamp()
      ON CREATE SET file.mimis_id = $uuid
      SET file.type = (
        CASE WHEN file.type IS NULL THEN $type ELSE file.type END
      )
      CREATE (list)-[:ENTRY {order: $order}]->(item)
      RETURN file
    `;for(const O in e){const{cid:k,title:I,type:m}=e[O];await i.run(p,{currentId:l,cid:k,title:I,type:m,order:Number(O)+1,uuid:Yt()})}}finally{await i.close()}}async function ai(e){const n=await Qr.get.children(e,{onlyCurrent:!0});if(n.length===0)throw new Error("No results for path.");if(n.length>1)throw new Error(`${n.length} results for path.`);const[{nöopoint:t}]=n,i=cr(),s=i.session();console.debug({nöopoint:t});try{const l=`
      MERGE (itemPoint:Nöopoint)-[:EMBODIED_BY]->(item)
      MATCH (point)-[:REPRESENTED_BY]->(itemPoint)
      WHERE elementId(point) = $id
      AND NOT ()-[:PREVIOUS]->(point)
      ORDER BY entry.order
      RETURN DISTINCT entry, item
    `,{records:d}=await s.run(l,{id:t.elementId}),h=Jr(d);return console.debug({found:h}),qt(h.map(v=>({title:v.entry.properties.path,type:v.item.properties.type,cid:v.item.properties.cid})))}finally{s.close(),i.close()}}function oi(e){if(Array.isArray(e))return e}function si(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var i,s,l,d,h=[],v=!0,p=!1;try{if(l=(t=t.call(e)).next,n===0){if(Object(t)!==t)return;v=!1}else for(;!(v=(i=l.call(t)).done)&&(h.push(i.value),h.length!==n);v=!0);}catch(O){p=!0,s=O}finally{try{if(!v&&t.return!=null&&(d=t.return(),Object(d)!==d))return}finally{if(p)throw s}}return h}}function mn(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,i=Array(n);t<n;t++)i[t]=e[t];return i}function fr(e,n){if(e){if(typeof e=="string")return mn(e,n);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?mn(e,n):void 0}}function li(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function In(e,n){return oi(e)||si(e,n)||fr(e,n)||li()}var $e={},_t={};Object.defineProperty(_t,"__esModule",{value:!0});_t.bind=void 0;function ui(e,n){var t=n.type,i=n.listener,s=n.options;return e.addEventListener(t,i,s),function(){e.removeEventListener(t,i,s)}}_t.bind=ui;var Kt={},nt=Xn&&Xn.__assign||function(){return nt=Object.assign||function(e){for(var n,t=1,i=arguments.length;t<i;t++){n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},nt.apply(this,arguments)};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.bindAll=void 0;var ci=_t;function qn(e){if(!(typeof e>"u"))return typeof e=="boolean"?{capture:e}:e}function di(e,n){if(n==null)return e;var t=nt(nt({},e),{options:nt(nt({},qn(n)),qn(e.options))});return t}function fi(e,n,t){var i=n.map(function(s){var l=di(s,t);return(0,ci.bind)(e,l)});return function(){i.forEach(function(l){return l()})}}Kt.bindAll=fi;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.bindAll=e.bind=void 0;var n=_t;Object.defineProperty(e,"bind",{enumerable:!0,get:function(){return n.bind}});var t=Kt;Object.defineProperty(e,"bindAll",{enumerable:!0,get:function(){return t.bindAll}})})($e);var vr="data-pdnd-honey-pot";function hr(e){return e instanceof Element&&e.hasAttribute(vr)}function pr(e){var n=document.elementsFromPoint(e.x,e.y),t=In(n,2),i=t[0],s=t[1];return i?hr(i)?s??null:i:null}function pt(e){"@babel/helpers - typeof";return pt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},pt(e)}function vi(e,n){if(pt(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var i=t.call(e,n);if(pt(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function hi(e){var n=vi(e,"string");return pt(n)=="symbol"?n:n+""}function It(e,n,t){return(n=hi(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var gr=2147483647;function Vn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,i)}return t}function Gn(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?Vn(Object(t),!0).forEach(function(i){It(e,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Vn(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}return e}var gt=2,Bn=gt/2;function pi(e){return{x:Math.floor(e.x),y:Math.floor(e.y)}}function gi(e){return{x:e.x-Bn,y:e.y-Bn}}function mi(e){return{x:Math.max(e.x,0),y:Math.max(e.y,0)}}function yi(e){return{x:Math.min(e.x,window.innerWidth-gt),y:Math.min(e.y,window.innerHeight-gt)}}function Kn(e){var n=e.client,t=yi(mi(gi(pi(n))));return DOMRect.fromRect({x:t.x,y:t.y,width:gt,height:gt})}function Zn(e){var n=e.clientRect;return{left:"".concat(n.left,"px"),top:"".concat(n.top,"px"),width:"".concat(n.width,"px"),height:"".concat(n.height,"px")}}function bi(e){var n=e.client,t=e.clientRect;return n.x>=t.x&&n.x<=t.x+t.width&&n.y>=t.y&&n.y<=t.y+t.height}function Ei(e){var n=e.initial,t=document.createElement("div");t.setAttribute(vr,"true");var i=Kn({client:n});Object.assign(t.style,Gn(Gn({backgroundColor:"transparent",position:"fixed",padding:0,margin:0,boxSizing:"border-box"},Zn({clientRect:i})),{},{pointerEvents:"auto",zIndex:gr})),document.body.appendChild(t);var s=$e.bind(window,{type:"pointermove",listener:function(d){var h={x:d.clientX,y:d.clientY};i=Kn({client:h}),Object.assign(t.style,Zn({clientRect:i}))},options:{capture:!0}});return function(d){var h=d.current;if(s(),bi({client:h,clientRect:i})){t.remove();return}function v(){p(),t.remove()}var p=$e.bindAll(window,[{type:"pointerdown",listener:v},{type:"pointermove",listener:v},{type:"focusin",listener:v},{type:"focusout",listener:v},{type:"dragstart",listener:v},{type:"dragenter",listener:v},{type:"dragover",listener:v}],{capture:!0})}}function Ti(){var e=null;function n(){return e=null,$e.bind(window,{type:"pointermove",listener:function(s){e={x:s.clientX,y:s.clientY}},options:{capture:!0}})}function t(){var i=null;return function(l){var d=l.eventName,h=l.payload;if(d==="onDragStart"){var v=h.location.initial.input,p=e??{x:v.clientX,y:v.clientY};i=Ei({initial:p})}if(d==="onDrop"){var O,k=h.location.current.input;(O=i)===null||O===void 0||O({current:{x:k.clientX,y:k.clientY}}),i=null,e=null}}}return{bindEvents:n,getOnPostDispatch:t}}function ki(e){if(Array.isArray(e))return mn(e)}function Oi(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mr(e){return ki(e)||Oi(e)||fr(e)||wi()}function Qe(e){var n=null;return function(){if(!n){for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];var d=e.apply(this,s);n={result:d}}return n.result}}var _i=Qe(function(){return navigator.userAgent.includes("Firefox")}),St=Qe(function(){var n=navigator,t=n.userAgent;return t.includes("AppleWebKit")&&!t.includes("Chrome")}),yn={isLeavingWindow:Symbol("leaving"),isEnteringWindow:Symbol("entering")};function Ii(e){var n=e.dragLeave;return St()?n.hasOwnProperty(yn.isLeavingWindow):!1}(function(){if(typeof window>"u"||!St())return;function n(){return{enterCount:0,isOverWindow:!1}}var t=n();function i(){t=n()}$e.bindAll(window,[{type:"dragstart",listener:function(){t.enterCount=0,t.isOverWindow=!0}},{type:"drop",listener:i},{type:"dragend",listener:i},{type:"dragenter",listener:function(l){!t.isOverWindow&&t.enterCount===0&&(l[yn.isEnteringWindow]=!0),t.isOverWindow=!0,t.enterCount++}},{type:"dragleave",listener:function(l){t.enterCount--,t.isOverWindow&&t.enterCount===0&&(l[yn.isLeavingWindow]=!0,t.isOverWindow=!1)}}],{capture:!0})})();function Si(e){return"nodeName"in e}function Ai(e){return Si(e)&&e.ownerDocument!==document}function Di(e){var n=e.dragLeave,t=n.type,i=n.relatedTarget;return t!=="dragleave"?!1:St()?Ii({dragLeave:n}):i==null?!0:_i()?Ai(i):i instanceof HTMLIFrameElement}function Pi(e){var n=e.onDragEnd;return[{type:"pointermove",listener:function(){var t=0;return function(){if(t<20){t++;return}n()}}()},{type:"pointerdown",listener:n}]}function ht(e){return{altKey:e.altKey,button:e.button,buttons:e.buttons,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY}}var xi=function(n){var t=[],i=null,s=function(){for(var d=arguments.length,h=new Array(d),v=0;v<d;v++)h[v]=arguments[v];t=h,!i&&(i=requestAnimationFrame(function(){i=null,n.apply(void 0,t)}))};return s.cancel=function(){i&&(cancelAnimationFrame(i),i=null)},s},vn=xi(function(e){return e()}),Xt=function(){var e=null;function n(i){var s=requestAnimationFrame(function(){e=null,i()});e={frameId:s,fn:i}}function t(){e&&(cancelAnimationFrame(e.frameId),e.fn(),e=null)}return{schedule:n,flush:t}}();function Ci(e){var n=e.source,t=e.initial,i=e.dispatchEvent,s={dropTargets:[]};function l(h){i(h),s={dropTargets:h.payload.location.current.dropTargets}}var d={start:function(v){var p=v.nativeSetDragImage,O={current:t,previous:s,initial:t};l({eventName:"onGenerateDragPreview",payload:{source:n,location:O,nativeSetDragImage:p}}),Xt.schedule(function(){l({eventName:"onDragStart",payload:{source:n,location:O}})})},dragUpdate:function(v){var p=v.current;Xt.flush(),vn.cancel(),l({eventName:"onDropTargetChange",payload:{source:n,location:{initial:t,previous:s,current:p}}})},drag:function(v){var p=v.current;vn(function(){Xt.flush();var O={initial:t,previous:s,current:p};l({eventName:"onDrag",payload:{source:n,location:O}})})},drop:function(v){var p=v.current,O=v.updatedSourcePayload;Xt.flush(),vn.cancel(),l({eventName:"onDrop",payload:{source:O??n,location:{current:p,previous:s,initial:t}}})}};return d}var bn={isActive:!1};function yr(){return!bn.isActive}function Ni(e){return e.dataTransfer?e.dataTransfer.setDragImage.bind(e.dataTransfer):null}function Mi(e){var n=e.current,t=e.next;if(n.length!==t.length)return!0;for(var i=0;i<n.length;i++)if(n[i].element!==t[i].element)return!0;return!1}function Ri(e){var n=e.event,t=e.dragType,i=e.getDropTargetsOver,s=e.dispatchEvent;if(!yr())return;var l=Li({event:n,dragType:t,getDropTargetsOver:i});bn.isActive=!0;var d={current:l};hn({event:n,current:l.dropTargets});var h=Ci({source:t.payload,dispatchEvent:s,initial:l});function v(m){var f=Mi({current:d.current.dropTargets,next:m.dropTargets});d.current=m,f&&h.dragUpdate({current:d.current})}function p(m){var f=ht(m),T=hr(m.target)?pr({x:f.clientX,y:f.clientY}):m.target,b=i({target:T,input:f,source:t.payload,current:d.current.dropTargets});b.length&&(m.preventDefault(),hn({event:m,current:b})),v({dropTargets:b,input:f})}function O(){d.current.dropTargets.length&&v({dropTargets:[],input:d.current.input}),h.drop({current:d.current,updatedSourcePayload:null}),k()}function k(){bn.isActive=!1,I()}var I=$e.bindAll(window,[{type:"dragover",listener:function(f){p(f),h.drag({current:d.current})}},{type:"dragenter",listener:p},{type:"dragleave",listener:function(f){Di({dragLeave:f})&&(v({input:d.current.input,dropTargets:[]}),t.startedFrom==="external"&&O())}},{type:"drop",listener:function(f){if(d.current={dropTargets:d.current.dropTargets,input:ht(f)},!d.current.dropTargets.length){O();return}f.preventDefault(),hn({event:f,current:d.current.dropTargets}),h.drop({current:d.current,updatedSourcePayload:t.type==="external"?t.getDropPayload(f):null}),k()}},{type:"dragend",listener:function(f){d.current={dropTargets:d.current.dropTargets,input:ht(f)},O()}}].concat(mr(Pi({onDragEnd:O}))),{capture:!0});h.start({nativeSetDragImage:Ni(n)})}function hn(e){var n,t=e.event,i=e.current,s=(n=i[0])===null||n===void 0?void 0:n.dropEffect;s!=null&&t.dataTransfer&&(t.dataTransfer.dropEffect=s)}function Li(e){var n=e.event,t=e.dragType,i=e.getDropTargetsOver,s=ht(n);if(t.startedFrom==="external")return{input:s,dropTargets:[]};var l=i({input:s,source:t.payload,target:n.target,current:[]});return{input:s,dropTargets:l}}var $n={canStart:yr,start:Ri},En=new Map;function Ui(e){var n=e.typeKey,t=e.mount,i=En.get(n);if(i)return i.usageCount++,i;var s={typeKey:n,unmount:t(),usageCount:1};return En.set(n,s),s}function Hi(e){var n=Ui(e);return function(){n.usageCount--,!(n.usageCount>0)&&(n.unmount(),En.delete(e.typeKey))}}function Zt(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(){n.forEach(function(s){return s()})}}function br(e,n){var t=n.attribute,i=n.value;return e.setAttribute(t,i),function(){return e.removeAttribute(t)}}function Qn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,i)}return t}function Ye(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?Qn(Object(t),!0).forEach(function(i){It(e,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Qn(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}return e}function pn(e,n){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=ji(e))||n){t&&(e=t);var i=0,s=function(){};return{s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(p){throw p},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,d=!0,h=!1;return{s:function(){t=t.call(e)},n:function(){var p=t.next();return d=p.done,p},e:function(p){h=!0,l=p},f:function(){try{d||t.return==null||t.return()}finally{if(h)throw l}}}}function ji(e,n){if(e){if(typeof e=="string")return Jn(e,n);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Jn(e,n):void 0}}function Jn(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,i=Array(n);t<n;t++)i[t]=e[t];return i}function gn(e){return e.slice(0).reverse()}function Fi(e){var n=e.typeKey,t=e.defaultDropEffect,i=new WeakMap,s="data-drop-target-for-".concat(n),l="[".concat(s,"]");function d(m){return i.set(m.element,m),function(){return i.delete(m.element)}}function h(m){var f=Zt(br(m.element,{attribute:s,value:"true"}),d(m));return Qe(f)}function v(m){var f,T,b,w,E=m.source,S=m.target,P=m.input,L=m.result,A=L===void 0?[]:L;if(S==null)return A;if(!(S instanceof Element))return S instanceof Node?v({source:E,target:S.parentElement,input:P,result:A}):A;var F=S.closest(l);if(F==null)return A;var z=i.get(F);if(z==null)return A;var Y={input:P,source:E,element:z.element};if(z.canDrop&&!z.canDrop(Y))return v({source:E,target:z.element.parentElement,input:P,result:A});var B=(f=(T=z.getData)===null||T===void 0?void 0:T.call(z,Y))!==null&&f!==void 0?f:{},U=(b=(w=z.getDropEffect)===null||w===void 0?void 0:w.call(z,Y))!==null&&b!==void 0?b:t,W={data:B,element:z.element,dropEffect:U,isActiveDueToStickiness:!1};return v({source:E,target:z.element.parentElement,input:P,result:[].concat(mr(A),[W])})}function p(m){var f=m.eventName,T=m.payload,b=pn(T.location.current.dropTargets),w;try{for(b.s();!(w=b.n()).done;){var E,S=w.value,P=i.get(S.element),L=Ye(Ye({},T),{},{self:S});P==null||(E=P[f])===null||E===void 0||E.call(P,L)}}catch(A){b.e(A)}finally{b.f()}}var O={onGenerateDragPreview:p,onDrag:p,onDragStart:p,onDrop:p,onDropTargetChange:function(f){var T=f.payload,b=new Set(T.location.current.dropTargets.map(function(he){return he.element})),w=new Set,E=pn(T.location.previous.dropTargets),S;try{for(E.s();!(S=E.n()).done;){var P,L=S.value;w.add(L.element);var A=i.get(L.element),F=b.has(L.element),z=Ye(Ye({},T),{},{self:L});if(A==null||(P=A.onDropTargetChange)===null||P===void 0||P.call(A,z),!F){var Y;A==null||(Y=A.onDragLeave)===null||Y===void 0||Y.call(A,z)}}}catch(he){E.e(he)}finally{E.f()}var B=pn(T.location.current.dropTargets),U;try{for(B.s();!(U=B.n()).done;){var W,te,ye=U.value;if(!w.has(ye.element)){var De=Ye(Ye({},T),{},{self:ye}),se=i.get(ye.element);se==null||(W=se.onDropTargetChange)===null||W===void 0||W.call(se,De),se==null||(te=se.onDragEnter)===null||te===void 0||te.call(se,De)}}}catch(he){B.e(he)}finally{B.f()}}};function k(m){O[m.eventName](m)}function I(m){var f=m.source,T=m.target,b=m.input,w=m.current,E=v({source:f,target:T,input:b});if(E.length>=w.length)return E;for(var S=gn(w),P=gn(E),L=[],A=0;A<S.length;A++){var F,z=S[A],Y=P[A];if(Y!=null){L.push(Y);continue}var B=L[A-1],U=S[A-1];if((B==null?void 0:B.element)!==(U==null?void 0:U.element))break;var W=i.get(z.element);if(!W)break;var te={input:b,source:f,element:W.element};if(W.canDrop&&!W.canDrop(te)||!((F=W.getIsSticky)!==null&&F!==void 0&&F.call(W,te)))break;L.push(Ye(Ye({},z),{},{isActiveDueToStickiness:!0}))}return gn(L)}return{dropTargetForConsumers:h,getIsOver:I,dispatchEvent:k}}function Wi(e,n){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Yi(e))||n){t&&(e=t);var i=0,s=function(){};return{s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(p){throw p},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,d=!0,h=!1;return{s:function(){t=t.call(e)},n:function(){var p=t.next();return d=p.done,p},e:function(p){h=!0,l=p},f:function(){try{d||t.return==null||t.return()}finally{if(h)throw l}}}}function Yi(e,n){if(e){if(typeof e=="string")return er(e,n);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?er(e,n):void 0}}function er(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,i=Array(n);t<n;t++)i[t]=e[t];return i}function tr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,i)}return t}function zi(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?tr(Object(t),!0).forEach(function(i){It(e,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tr(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}return e}function Xi(){var e=new Set,n=null;function t(l){n&&(!l.canMonitor||l.canMonitor(n.canMonitorArgs))&&n.active.add(l)}function i(l){var d=zi({},l);e.add(d),t(d);function h(){e.delete(d),n&&n.active.delete(d)}return Qe(h)}function s(l){var d=l.eventName,h=l.payload;if(d==="onGenerateDragPreview"){n={canMonitorArgs:{initial:h.location.initial,source:h.source},active:new Set};var v=Wi(e),p;try{for(v.s();!(p=v.n()).done;){var O=p.value;t(O)}}catch(b){v.e(b)}finally{v.f()}}if(n){for(var k=Array.from(n.active),I=0,m=k;I<m.length;I++){var f=m[I];if(n.active.has(f)){var T;(T=f[d])===null||T===void 0||T.call(f,h)}}d==="onDrop"&&(n.active.clear(),n=null)}}return{dispatchEvent:s,monitorForConsumers:i}}function qi(e){var n=e.typeKey,t=e.mount,i=e.dispatchEventToSource,s=e.onPostDispatch,l=e.defaultDropEffect,d=Xi(),h=Fi({typeKey:n,defaultDropEffect:l});function v(k){i==null||i(k),h.dispatchEvent(k),d.dispatchEvent(k),s==null||s(k)}function p(k){var I=k.event,m=k.dragType;$n.start({event:I,dragType:m,getDropTargetsOver:h.getIsOver,dispatchEvent:v})}function O(){function k(){var I={canStart:$n.canStart,start:p};return t(I)}return Hi({typeKey:n,mount:k})}return{registerUsage:O,dropTarget:h.dropTargetForConsumers,monitor:d.monitorForConsumers}}var Er=Qe(function(){return navigator.userAgent.toLocaleLowerCase().includes("android")}),Vi="pdnd:android-fallback",nr="text/plain",Gi="text/uri-list",Bi="application/vnd.pdnd",Gt=new WeakMap;function Ki(e){return Gt.set(e.element,e),function(){Gt.delete(e.element)}}var rr=Ti(),Sn=qi({typeKey:"element",defaultDropEffect:"move",mount:function(n){return Zt(rr.bindEvents(),$e.bind(document,{type:"dragstart",listener:function(i){var s,l,d,h,v,p;if(n.canStart(i)&&!i.defaultPrevented&&i.dataTransfer){var O=i.target;if(!(O instanceof HTMLElement))return null;var k=Gt.get(O);if(!k)return null;var I=ht(i),m={element:k.element,dragHandle:(s=k.dragHandle)!==null&&s!==void 0?s:null,input:I};if(k.canDrag&&!k.canDrag(m))return i.preventDefault(),null;if(k.dragHandle){var f=pr({x:I.clientX,y:I.clientY});if(!k.dragHandle.contains(f))return i.preventDefault(),null}var T=(l=(d=k.getInitialDataForExternal)===null||d===void 0?void 0:d.call(k,m))!==null&&l!==void 0?l:null;if(T)for(var b=0,w=Object.entries(T);b<w.length;b++){var E=In(w[b],2),S=E[0],P=E[1];i.dataTransfer.setData(S,P??"")}Er()&&!i.dataTransfer.types.includes(nr)&&!i.dataTransfer.types.includes(Gi)&&i.dataTransfer.setData(nr,Vi),i.dataTransfer.setData(Bi,"");var L={element:k.element,dragHandle:(h=k.dragHandle)!==null&&h!==void 0?h:null,data:(v=(p=k.getInitialData)===null||p===void 0?void 0:p.call(k,m))!==null&&v!==void 0?v:{}},A={type:"element",payload:L,startedFrom:"internal"};n.start({event:i,dragType:A})}}}))},dispatchEventToSource:function(n){var t,i,s=n.eventName,l=n.payload;(t=Gt.get(l.source.element))===null||t===void 0||(i=t[s])===null||i===void 0||i.call(t,l)},onPostDispatch:rr.getOnPostDispatch()}),Zi=Sn.dropTarget,Tr=Sn.monitor;function $i(e){var n=Zt(Sn.registerUsage(),Ki(e),br(e.element,{attribute:"draggable",value:"true"}));return Qe(n)}function ir(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,i)}return t}function ar(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?ir(Object(t),!0).forEach(function(i){It(e,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ir(Object(t)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})}return e}var Qi={top:function(n,t){return Math.abs(t.y-n.top)},right:function(n,t){return Math.abs(n.right-t.x)},bottom:function(n,t){return Math.abs(n.bottom-t.y)},left:function(n,t){return Math.abs(t.x-n.left)}},kr=Symbol("closestEdge");function Ji(e,n){var t,i,s=n.element,l=n.input,d=n.allowedEdges,h={x:l.clientX,y:l.clientY},v=s.getBoundingClientRect(),p=d.map(function(k){return{edge:k,value:Qi[k](v,h)}}),O=(t=(i=p.sort(function(k,I){return k.value-I.value})[0])===null||i===void 0?void 0:i.edge)!==null&&t!==void 0?t:null;return ar(ar({},e),{},It({},kr,O))}function Tn(e){var n;return(n=e[kr])!==null&&n!==void 0?n:null}function ea(e){var n=e.list,t=e.startIndex,i=e.finishIndex;if(t===-1||i===-1)return Array.from(n);var s=Array.from(n),l=s.splice(t,1),d=In(l,1),h=d[0];return s.splice(i,0,h),s}function ta(e){var n=e.startIndex,t=e.closestEdgeOfTarget,i=e.indexOfTarget,s=e.axis;if(n===-1||i===-1||n===i)return n;if(t==null)return i;var l=t==="bottom"||s==="horizontal",d=n<i;return d?l?i:i-1:l?i+1:i}function na(e){var n=e.list,t=e.startIndex,i=e.closestEdgeOfTarget,s=e.indexOfTarget,l=e.axis;return ea({list:n,startIndex:t,finishIndex:ta({closestEdgeOfTarget:i,startIndex:t,indexOfTarget:s,axis:l})})}var ra={large:700};function ia(e){e.animate([{backgroundColor:"var(--ds-background-selected, #E9F2FF)"},{}],{duration:ra.large,easing:"cubic-bezier(0.25, 0.1, 0.25, 1.0)",iterations:1})}function aa(){return{x:0,y:0}}function oa(e){var n=e.render,t=e.nativeSetDragImage,i=e.getOffset,s=i===void 0?aa:i,l=document.createElement("div");Object.assign(l.style,{position:"fixed",top:0,left:0,zIndex:gr,pointerEvents:"none"}),document.body.append(l);var d=n({container:l});queueMicrotask(function(){var p=s({container:l});if(St()){var O=l.getBoundingClientRect();if(O.width===0)return;l.style.left="-".concat(O.width-1e-4,"px")}t==null||t(l,p.x,p.y)});function h(){v(),d==null||d(),document.body.removeChild(l)}var v=Tr({onDragStart:h,onDrop:h})}var sa=Qe(function(){return St()&&"ontouchend"in document}),la=function(n){var t=n.container,i=t.getBoundingClientRect();return{x:i.width/2,y:i.height/2}};function ua(e){return function(t){var i=t.container;if(sa()||Er())return la({container:i});Object.assign(i.style,{borderInlineStart:"".concat(e.x," solid transparent"),borderTop:"".concat(e.y," solid transparent")});var s=window.getComputedStyle(i);if(s.direction==="rtl"){var l=i.getBoundingClientRect();return{x:l.width,y:0}}return{x:0,y:0}}}var ca="Invariant failed";function da(e,n){if(!e)throw new Error(ca)}var fa=$("<div></div>");function va(e,n){let t=Ee(n,"edge",3,"top"),i=Ee(n,"gap",3,"0.5rem");const s=2,l=8,d=(s-l)/2,h=`calc(-0.5 * (${i()} + ${s}px))`;var v=fa();let p;ce(O=>{wt(v,1,_n(["drop-indicator",`${t()}`]),"svelte-m9rsq0"),p=wn(v,"",p,O)},[()=>({"--line-thickness":`${s}px`,"--line-offset":h,"--terminal-size":`${l}px`,"--terminal-radius":`${l/2}px`,"--negative-terminal-size":`-${l}px`,"--offset-terminal":`${d}px`,position:"absolute","pointer-events":"none"})]),G(e,v)}var mt,yt,bt,Le,Et,Tt,kt,Bt,Or;class ha{constructor(){Re(this,Bt);Re(this,mt,V(!0));Re(this,yt,V(me(new Map)));Re(this,bt,V(me(new Map)));Re(this,Le,V(me(new Map)));Re(this,Et,V(null));Re(this,Tt,V(me(ur.url.searchParams.has("debug")||vt.debugging)));Re(this,kt,!1)}get single(){return u(ie(this,mt))}set single(n){N(ie(this,mt),n,!0)}get debug(){return u(ie(this,Tt))}set debug(n){N(ie(this,Tt),n,!0)}getSetting(n){return ie(this,kt)||Yn(this,Bt,Or).call(this),u(ie(this,yt)).get(n)}setSetting(n,t){return this.debug&&console.debug({setting:{[n.toString()]:t}}),u(ie(this,yt)).set(n,t)}register(n,t){const{itemId:i}=t??{};this.debug&&console.debug({registering:{itemId:i,name:n.name}}),i==null?u(ie(this,bt)).set(n.name,n):(u(ie(this,Le)).get(i)==null&&u(ie(this,Le)).set(i,{}),this.retrieve(n.name,{itemId:i})!=null&&this.debug&&console.warn(`Redefining function: ${n.name} for item: ${i}`),u(ie(this,Le)).get(i)[n.name]=n)}retrieve(n,t){var d;const{itemId:i,useActive:s}=t??{};if(n==null&&i==null&&s!=!0)throw new Error("At least one of `name`, `itemId`, or `useActive` required.");const l=s?this.activeId:i;return n==null?(this.debug&&console.debug({retrieving:{itemId:i,useActive:s}}),u(ie(this,Le)).get(l)):i==null&&s!=!0?(this.debug&&console.debug({retrieving:{name:n}}),u(ie(this,bt)).get(n)):(d=u(ie(this,Le)).get(l))==null?void 0:d[n]}retrieveAll(n){return u(ie(this,Le)).values().map(t=>t[n]).filter(Boolean)}any(n){const t=this.retrieveAll(n);let i=!1;for(const s of t)if(i||(i=s()),i)break;return i}all(n){const t=this.retrieveAll(n);let i=!0;for(const s of t)if(i&&(i=s()),!i)break;return i}set activeId(n){this.debug&&console.debug({activeId:n}),N(ie(this,Et),n,!0)}get activeId(){return u(ie(this,Et))}}mt=new WeakMap,yt=new WeakMap,bt=new WeakMap,Le=new WeakMap,Et=new WeakMap,Tt=new WeakMap,kt=new WeakMap,Bt=new WeakSet,Or=function(){Wn(this,kt,!0),this.single=!0};const M=new ha;var pa=$('<img class="svelte-re623r"/>'),ga=$("<audio controls><source/></audio>"),ma=$('<video controls class="svelte-re623r"><source/> <track kind="captions"/></video>',2),ya=$(`<object class="svelte-re623r"><p>Your browser can't render an <code>&lt;object&gt;</code> of type <q> </q>.</p></object>`);function An(e,n){Se(n,!0);const{debug:t}=M;let i=Ee(n,"content",15);const{cid:s,title:l,type:d}=n.datum;let h=kn(()=>{if(d==null)return"undefined";const[I,m,f]=Array.from(d.match(/^([^/]+)\/(.*)$/)??[]);return t&&console.debug({klass:m,ext:f}),f!=="svg+xml"?m:"object"});var v=cn(),p=Ze(v);{var O=I=>{var m=pa();ve(m,f=>i(f),()=>i()),ce(f=>{K(m,"id",s),K(m,"src",f),K(m,"alt",l)},[()=>zt({cid:s})]),G(I,m)},k=I=>{var m=cn(),f=Ze(m);{var T=w=>{var E=ga();K(E,"tabindex",-1);var S=H(E);R(E),ve(E,P=>i(P),()=>i()),ce(P=>{K(E,"id",s),K(S,"src",P),K(S,"type",d)},[()=>zt({cid:s})]),G(w,E)},b=w=>{var E=cn(),S=Ze(E);{var P=A=>{var F=ma();K(F,"tabindex",-1);var z=H(F);ge(2),R(F),ve(F,Y=>i(Y),()=>i()),ce(Y=>{K(F,"id",s),K(z,"src",Y),K(z,"type",d)},[()=>zt({cid:s})]),G(A,F)},L=A=>{var F=ya(),z=H(F),Y=q(H(z),3),B=H(Y,!0);R(Y),ge(),R(z),R(F),ve(F,U=>i(U),()=>i()),ce(U=>{K(F,"id",s),K(F,"data",U),K(F,"title",l),K(F,"type",d),rt(B,d)},[()=>zt({cid:s})]),G(A,F)};Oe(S,A=>{u(h)==="video"?A(P):A(L,!1)},!0)}G(w,E)};Oe(f,w=>{u(h)==="audio"?w(T):w(b,!1)},!0)}G(I,m)};Oe(p,I=>{u(h)==="image"?I(O):I(k,!1)})}G(e,v),Ae()}var ba=(e,n)=>{var t;return(t=n())==null?void 0:t.close()},Ea=(e,n)=>{var t;return(t=n())==null?void 0:t.close()},Ta=(e,n,t)=>{const i=new CustomEvent("datum-delete",{detail:{id:n.datum.id},bubbles:!0});t().dispatchEvent(i)},ka=$('<dialog><h1> </h1> <button id="x" commandfor="close" class="svelte-1dmd0h1">⨯</button> <form class="svelte-1dmd0h1"><!> <nav class="svelte-1dmd0h1"><button id="cancel" type="button" commandfor="close" class="svelte-1dmd0h1"><u>C</u>ancel</button> <button id="delete" class="svelte-1dmd0h1"><u>R</u>emove</button></nav></form></dialog>');function Oa(e,n){Se(n,!0);let t=Ee(n,"handle",15,null),i=V(null);var s=ka(),l=H(s),d=H(l);R(l);var h=q(l,2);h.__click=[ba,t];var v=q(h,2),p=H(v);An(p,{get datum(){return n.datum}});var O=q(p,2),k=H(O);k.__click=[Ea,t];var I=q(k,2);I.__click=[Ta,n,t],ve(I,m=>N(i,m),()=>u(i)),R(O),R(v),R(s),ve(s,m=>t(m),()=>t()),ce(()=>rt(d,`Delete ${n.datum.title??""}?`)),Ue("open",s,()=>{console.debug({opened:t()}),Vt().then(()=>{var m;return(m=u(i))==null?void 0:m.focus()})}),Ue("submit",v,m=>m.preventDefault()),G(e,s),Ae()}it(["click"]);var wr={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(e){(function(n,t,i,s){var l=["","webkit","Moz","MS","ms","o"],d=t.createElement("div"),h="function",v=Math.round,p=Math.abs,O=Date.now;function k(r,a,o){return setTimeout(S(r,o),a)}function I(r,a,o){return Array.isArray(r)?(m(r,o[a],o),!0):!1}function m(r,a,o){var c;if(r)if(r.forEach)r.forEach(a,o);else if(r.length!==s)for(c=0;c<r.length;)a.call(o,r[c],c,r),c++;else for(c in r)r.hasOwnProperty(c)&&a.call(o,r[c],c,r)}function f(r,a,o){var c="DEPRECATED METHOD: "+a+`
`+o+` AT 
`;return function(){var g=new Error("get-stack-trace"),_=g&&g.stack?g.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",j=n.console&&(n.console.warn||n.console.log);return j&&j.call(n.console,c,_),r.apply(this,arguments)}}var T;typeof Object.assign!="function"?T=function(a){if(a===s||a===null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(a),c=1;c<arguments.length;c++){var g=arguments[c];if(g!==s&&g!==null)for(var _ in g)g.hasOwnProperty(_)&&(o[_]=g[_])}return o}:T=Object.assign;var b=f(function(a,o,c){for(var g=Object.keys(o),_=0;_<g.length;)(!c||c&&a[g[_]]===s)&&(a[g[_]]=o[g[_]]),_++;return a},"extend","Use `assign`."),w=f(function(a,o){return b(a,o,!0)},"merge","Use `assign`.");function E(r,a,o){var c=a.prototype,g;g=r.prototype=Object.create(c),g.constructor=r,g._super=c,o&&T(g,o)}function S(r,a){return function(){return r.apply(a,arguments)}}function P(r,a){return typeof r==h?r.apply(a&&a[0]||s,a):r}function L(r,a){return r===s?a:r}function A(r,a,o){m(B(a),function(c){r.addEventListener(c,o,!1)})}function F(r,a,o){m(B(a),function(c){r.removeEventListener(c,o,!1)})}function z(r,a){for(;r;){if(r==a)return!0;r=r.parentNode}return!1}function Y(r,a){return r.indexOf(a)>-1}function B(r){return r.trim().split(/\s+/g)}function U(r,a,o){if(r.indexOf&&!o)return r.indexOf(a);for(var c=0;c<r.length;){if(o&&r[c][o]==a||!o&&r[c]===a)return c;c++}return-1}function W(r){return Array.prototype.slice.call(r,0)}function te(r,a,o){for(var c=[],g=[],_=0;_<r.length;){var j=r[_][a];U(g,j)<0&&c.push(r[_]),g[_]=j,_++}return c=c.sort(function(oe,fe){return oe[a]>fe[a]}),c}function ye(r,a){for(var o,c,g=a[0].toUpperCase()+a.slice(1),_=0;_<l.length;){if(o=l[_],c=o?o+g:a,c in r)return c;_++}return s}var De=1;function se(){return De++}function he(r){var a=r.ownerDocument||r;return a.defaultView||a.parentWindow||n}var Je=/mobile|tablet|ip(ad|hone|od)|android/i,x="ontouchstart"in n,Q=ye(n,"PointerEvent")!==s,de=x&&Je.test(navigator.userAgent),ne="touch",ze="pen",Xe="mouse",At="kinect",Dt=25,J=1,we=2,Z=4,le=8,He=1,je=2,Pe=4,qe=8,xe=16,pe=je|Pe,Te=qe|xe,at=pe|Te,ot=["x","y"],Ve=["clientX","clientY"];function ue(r,a){var o=this;this.manager=r,this.callback=a,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(c){P(r.options.enable,[r])&&o.handler(c)},this.init()}ue.prototype={handler:function(){},init:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(he(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&F(this.element,this.evEl,this.domHandler),this.evTarget&&F(this.target,this.evTarget,this.domHandler),this.evWin&&F(he(this.element),this.evWin,this.domHandler)}};function Pt(r){var a,o=r.options.inputClass;return o?a=o:Q?a=Jt:de?a=Lt:x?a=en:a=X,new a(r,xt)}function xt(r,a,o){var c=o.pointers.length,g=o.changedPointers.length,_=a&J&&c-g===0,j=a&(Z|le)&&c-g===0;o.isFirst=!!_,o.isFinal=!!j,_&&(r.session={}),o.eventType=a,st(r,o),r.emit("hammer.input",o),r.recognize(o),r.session.prevInput=o}function st(r,a){var o=r.session,c=a.pointers,g=c.length;o.firstInput||(o.firstInput=Nt(a)),g>1&&!o.firstMultiple?o.firstMultiple=Nt(a):g===1&&(o.firstMultiple=!1);var _=o.firstInput,j=o.firstMultiple,re=j?j.center:_.center,oe=a.center=Mt(c);a.timeStamp=O(),a.deltaTime=a.timeStamp-_.timeStamp,a.angle=ut(re,oe),a.distance=Be(re,oe),Ct(o,a),a.offsetDirection=lt(a.deltaX,a.deltaY);var fe=Rt(a.deltaTime,a.deltaX,a.deltaY);a.overallVelocityX=fe.x,a.overallVelocityY=fe.y,a.overallVelocity=p(fe.x)>p(fe.y)?fe.x:fe.y,a.scale=j?Qt(j.pointers,c):1,a.rotation=j?$t(j.pointers,c):0,a.maxPointers=o.prevInput?a.pointers.length>o.prevInput.maxPointers?a.pointers.length:o.prevInput.maxPointers:a.pointers.length,Ge(o,a);var Ie=r.element;z(a.srcEvent.target,Ie)&&(Ie=a.srcEvent.target),a.target=Ie}function Ct(r,a){var o=a.center,c=r.offsetDelta||{},g=r.prevDelta||{},_=r.prevInput||{};(a.eventType===J||_.eventType===Z)&&(g=r.prevDelta={x:_.deltaX||0,y:_.deltaY||0},c=r.offsetDelta={x:o.x,y:o.y}),a.deltaX=g.x+(o.x-c.x),a.deltaY=g.y+(o.y-c.y)}function Ge(r,a){var o=r.lastInterval||a,c=a.timeStamp-o.timeStamp,g,_,j,re;if(a.eventType!=le&&(c>Dt||o.velocity===s)){var oe=a.deltaX-o.deltaX,fe=a.deltaY-o.deltaY,Ie=Rt(c,oe,fe);_=Ie.x,j=Ie.y,g=p(Ie.x)>p(Ie.y)?Ie.x:Ie.y,re=lt(oe,fe),r.lastInterval=a}else g=o.velocity,_=o.velocityX,j=o.velocityY,re=o.direction;a.velocity=g,a.velocityX=_,a.velocityY=j,a.direction=re}function Nt(r){for(var a=[],o=0;o<r.pointers.length;)a[o]={clientX:v(r.pointers[o].clientX),clientY:v(r.pointers[o].clientY)},o++;return{timeStamp:O(),pointers:a,center:Mt(a),deltaX:r.deltaX,deltaY:r.deltaY}}function Mt(r){var a=r.length;if(a===1)return{x:v(r[0].clientX),y:v(r[0].clientY)};for(var o=0,c=0,g=0;g<a;)o+=r[g].clientX,c+=r[g].clientY,g++;return{x:v(o/a),y:v(c/a)}}function Rt(r,a,o){return{x:a/r||0,y:o/r||0}}function lt(r,a){return r===a?He:p(r)>=p(a)?r<0?je:Pe:a<0?qe:xe}function Be(r,a,o){o||(o=ot);var c=a[o[0]]-r[o[0]],g=a[o[1]]-r[o[1]];return Math.sqrt(c*c+g*g)}function ut(r,a,o){o||(o=ot);var c=a[o[0]]-r[o[0]],g=a[o[1]]-r[o[1]];return Math.atan2(g,c)*180/Math.PI}function $t(r,a){return ut(a[1],a[0],Ve)+ut(r[1],r[0],Ve)}function Qt(r,a){return Be(a[0],a[1],Ve)/Be(r[0],r[1],Ve)}var y={mousedown:J,mousemove:we,mouseup:Z},D="mousedown",C="mousemove mouseup";function X(){this.evEl=D,this.evWin=C,this.pressed=!1,ue.apply(this,arguments)}E(X,ue,{handler:function(a){var o=y[a.type];o&J&&a.button===0&&(this.pressed=!0),o&we&&a.which!==1&&(o=Z),this.pressed&&(o&Z&&(this.pressed=!1),this.callback(this.manager,o,{pointers:[a],changedPointers:[a],pointerType:Xe,srcEvent:a}))}});var ee={pointerdown:J,pointermove:we,pointerup:Z,pointercancel:le,pointerout:le},ae={2:ne,3:ze,4:Xe,5:At},Ce="pointerdown",et="pointermove pointerup pointercancel";n.MSPointerEvent&&!n.PointerEvent&&(Ce="MSPointerDown",et="MSPointerMove MSPointerUp MSPointerCancel");function Jt(){this.evEl=Ce,this.evWin=et,ue.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}E(Jt,ue,{handler:function(a){var o=this.store,c=!1,g=a.type.toLowerCase().replace("ms",""),_=ee[g],j=ae[a.pointerType]||a.pointerType,re=j==ne,oe=U(o,a.pointerId,"pointerId");_&J&&(a.button===0||re)?oe<0&&(o.push(a),oe=o.length-1):_&(Z|le)&&(c=!0),!(oe<0)&&(o[oe]=a,this.callback(this.manager,_,{pointers:o,changedPointers:[a],pointerType:j,srcEvent:a}),c&&o.splice(oe,1))}});var _r={touchstart:J,touchmove:we,touchend:Z,touchcancel:le},Ir="touchstart",Sr="touchstart touchmove touchend touchcancel";function Dn(){this.evTarget=Ir,this.evWin=Sr,this.started=!1,ue.apply(this,arguments)}E(Dn,ue,{handler:function(a){var o=_r[a.type];if(o===J&&(this.started=!0),!!this.started){var c=Ar.call(this,a,o);o&(Z|le)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,o,{pointers:c[0],changedPointers:c[1],pointerType:ne,srcEvent:a})}}});function Ar(r,a){var o=W(r.touches),c=W(r.changedTouches);return a&(Z|le)&&(o=te(o.concat(c),"identifier")),[o,c]}var Dr={touchstart:J,touchmove:we,touchend:Z,touchcancel:le},Pr="touchstart touchmove touchend touchcancel";function Lt(){this.evTarget=Pr,this.targetIds={},ue.apply(this,arguments)}E(Lt,ue,{handler:function(a){var o=Dr[a.type],c=xr.call(this,a,o);c&&this.callback(this.manager,o,{pointers:c[0],changedPointers:c[1],pointerType:ne,srcEvent:a})}});function xr(r,a){var o=W(r.touches),c=this.targetIds;if(a&(J|we)&&o.length===1)return c[o[0].identifier]=!0,[o,o];var g,_,j=W(r.changedTouches),re=[],oe=this.target;if(_=o.filter(function(fe){return z(fe.target,oe)}),a===J)for(g=0;g<_.length;)c[_[g].identifier]=!0,g++;for(g=0;g<j.length;)c[j[g].identifier]&&re.push(j[g]),a&(Z|le)&&delete c[j[g].identifier],g++;if(re.length)return[te(_.concat(re),"identifier"),re]}var Cr=2500,Pn=25;function en(){ue.apply(this,arguments);var r=S(this.handler,this);this.touch=new Lt(this.manager,r),this.mouse=new X(this.manager,r),this.primaryTouch=null,this.lastTouches=[]}E(en,ue,{handler:function(a,o,c){var g=c.pointerType==ne,_=c.pointerType==Xe;if(!(_&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(g)Nr.call(this,o,c);else if(_&&Mr.call(this,c))return;this.callback(a,o,c)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Nr(r,a){r&J?(this.primaryTouch=a.changedPointers[0].identifier,xn.call(this,a)):r&(Z|le)&&xn.call(this,a)}function xn(r){var a=r.changedPointers[0];if(a.identifier===this.primaryTouch){var o={x:a.clientX,y:a.clientY};this.lastTouches.push(o);var c=this.lastTouches,g=function(){var _=c.indexOf(o);_>-1&&c.splice(_,1)};setTimeout(g,Cr)}}function Mr(r){for(var a=r.srcEvent.clientX,o=r.srcEvent.clientY,c=0;c<this.lastTouches.length;c++){var g=this.lastTouches[c],_=Math.abs(a-g.x),j=Math.abs(o-g.y);if(_<=Pn&&j<=Pn)return!0}return!1}var Cn=ye(d.style,"touchAction"),Nn=Cn!==s,Mn="compute",Rn="auto",tn="manipulation",Ke="none",ct="pan-x",dt="pan-y",Ut=Lr();function nn(r,a){this.manager=r,this.set(a)}nn.prototype={set:function(r){r==Mn&&(r=this.compute()),Nn&&this.manager.element.style&&Ut[r]&&(this.manager.element.style[Cn]=r),this.actions=r.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var r=[];return m(this.manager.recognizers,function(a){P(a.options.enable,[a])&&(r=r.concat(a.getTouchAction()))}),Rr(r.join(" "))},preventDefaults:function(r){var a=r.srcEvent,o=r.offsetDirection;if(this.manager.session.prevented){a.preventDefault();return}var c=this.actions,g=Y(c,Ke)&&!Ut[Ke],_=Y(c,dt)&&!Ut[dt],j=Y(c,ct)&&!Ut[ct];if(g){var re=r.pointers.length===1,oe=r.distance<2,fe=r.deltaTime<250;if(re&&oe&&fe)return}if(!(j&&_)&&(g||_&&o&pe||j&&o&Te))return this.preventSrc(a)},preventSrc:function(r){this.manager.session.prevented=!0,r.preventDefault()}};function Rr(r){if(Y(r,Ke))return Ke;var a=Y(r,ct),o=Y(r,dt);return a&&o?Ke:a||o?a?ct:dt:Y(r,tn)?tn:Rn}function Lr(){if(!Nn)return!1;var r={},a=n.CSS&&n.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(o){r[o]=a?n.CSS.supports("touch-action",o):!0}),r}var Ht=1,be=2,tt=4,Fe=8,Ne=Fe,ft=16,_e=32;function Me(r){this.options=T({},this.defaults,r||{}),this.id=se(),this.manager=null,this.options.enable=L(this.options.enable,!0),this.state=Ht,this.simultaneous={},this.requireFail=[]}Me.prototype={defaults:{},set:function(r){return T(this.options,r),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(r){if(I(r,"recognizeWith",this))return this;var a=this.simultaneous;return r=jt(r,this),a[r.id]||(a[r.id]=r,r.recognizeWith(this)),this},dropRecognizeWith:function(r){return I(r,"dropRecognizeWith",this)?this:(r=jt(r,this),delete this.simultaneous[r.id],this)},requireFailure:function(r){if(I(r,"requireFailure",this))return this;var a=this.requireFail;return r=jt(r,this),U(a,r)===-1&&(a.push(r),r.requireFailure(this)),this},dropRequireFailure:function(r){if(I(r,"dropRequireFailure",this))return this;r=jt(r,this);var a=U(this.requireFail,r);return a>-1&&this.requireFail.splice(a,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(r){return!!this.simultaneous[r.id]},emit:function(r){var a=this,o=this.state;function c(g){a.manager.emit(g,r)}o<Fe&&c(a.options.event+Ln(o)),c(a.options.event),r.additionalEvent&&c(r.additionalEvent),o>=Fe&&c(a.options.event+Ln(o))},tryEmit:function(r){if(this.canEmit())return this.emit(r);this.state=_e},canEmit:function(){for(var r=0;r<this.requireFail.length;){if(!(this.requireFail[r].state&(_e|Ht)))return!1;r++}return!0},recognize:function(r){var a=T({},r);if(!P(this.options.enable,[this,a])){this.reset(),this.state=_e;return}this.state&(Ne|ft|_e)&&(this.state=Ht),this.state=this.process(a),this.state&(be|tt|Fe|ft)&&this.tryEmit(a)},process:function(r){},getTouchAction:function(){},reset:function(){}};function Ln(r){return r&ft?"cancel":r&Fe?"end":r&tt?"move":r&be?"start":""}function Un(r){return r==xe?"down":r==qe?"up":r==je?"left":r==Pe?"right":""}function jt(r,a){var o=a.manager;return o?o.get(r):r}function ke(){Me.apply(this,arguments)}E(ke,Me,{defaults:{pointers:1},attrTest:function(r){var a=this.options.pointers;return a===0||r.pointers.length===a},process:function(r){var a=this.state,o=r.eventType,c=a&(be|tt),g=this.attrTest(r);return c&&(o&le||!g)?a|ft:c||g?o&Z?a|Fe:a&be?a|tt:be:_e}});function Ft(){ke.apply(this,arguments),this.pX=null,this.pY=null}E(Ft,ke,{defaults:{event:"pan",threshold:10,pointers:1,direction:at},getTouchAction:function(){var r=this.options.direction,a=[];return r&pe&&a.push(dt),r&Te&&a.push(ct),a},directionTest:function(r){var a=this.options,o=!0,c=r.distance,g=r.direction,_=r.deltaX,j=r.deltaY;return g&a.direction||(a.direction&pe?(g=_===0?He:_<0?je:Pe,o=_!=this.pX,c=Math.abs(r.deltaX)):(g=j===0?He:j<0?qe:xe,o=j!=this.pY,c=Math.abs(r.deltaY))),r.direction=g,o&&c>a.threshold&&g&a.direction},attrTest:function(r){return ke.prototype.attrTest.call(this,r)&&(this.state&be||!(this.state&be)&&this.directionTest(r))},emit:function(r){this.pX=r.deltaX,this.pY=r.deltaY;var a=Un(r.direction);a&&(r.additionalEvent=this.options.event+a),this._super.emit.call(this,r)}});function rn(){ke.apply(this,arguments)}E(rn,ke,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ke]},attrTest:function(r){return this._super.attrTest.call(this,r)&&(Math.abs(r.scale-1)>this.options.threshold||this.state&be)},emit:function(r){if(r.scale!==1){var a=r.scale<1?"in":"out";r.additionalEvent=this.options.event+a}this._super.emit.call(this,r)}});function an(){Me.apply(this,arguments),this._timer=null,this._input=null}E(an,Me,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Rn]},process:function(r){var a=this.options,o=r.pointers.length===a.pointers,c=r.distance<a.threshold,g=r.deltaTime>a.time;if(this._input=r,!c||!o||r.eventType&(Z|le)&&!g)this.reset();else if(r.eventType&J)this.reset(),this._timer=k(function(){this.state=Ne,this.tryEmit()},a.time,this);else if(r.eventType&Z)return Ne;return _e},reset:function(){clearTimeout(this._timer)},emit:function(r){this.state===Ne&&(r&&r.eventType&Z?this.manager.emit(this.options.event+"up",r):(this._input.timeStamp=O(),this.manager.emit(this.options.event,this._input)))}});function on(){ke.apply(this,arguments)}E(on,ke,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ke]},attrTest:function(r){return this._super.attrTest.call(this,r)&&(Math.abs(r.rotation)>this.options.threshold||this.state&be)}});function sn(){ke.apply(this,arguments)}E(sn,ke,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:pe|Te,pointers:1},getTouchAction:function(){return Ft.prototype.getTouchAction.call(this)},attrTest:function(r){var a=this.options.direction,o;return a&(pe|Te)?o=r.overallVelocity:a&pe?o=r.overallVelocityX:a&Te&&(o=r.overallVelocityY),this._super.attrTest.call(this,r)&&a&r.offsetDirection&&r.distance>this.options.threshold&&r.maxPointers==this.options.pointers&&p(o)>this.options.velocity&&r.eventType&Z},emit:function(r){var a=Un(r.offsetDirection);a&&this.manager.emit(this.options.event+a,r),this.manager.emit(this.options.event,r)}});function Wt(){Me.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}E(Wt,Me,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[tn]},process:function(r){var a=this.options,o=r.pointers.length===a.pointers,c=r.distance<a.threshold,g=r.deltaTime<a.time;if(this.reset(),r.eventType&J&&this.count===0)return this.failTimeout();if(c&&g&&o){if(r.eventType!=Z)return this.failTimeout();var _=this.pTime?r.timeStamp-this.pTime<a.interval:!0,j=!this.pCenter||Be(this.pCenter,r.center)<a.posThreshold;this.pTime=r.timeStamp,this.pCenter=r.center,!j||!_?this.count=1:this.count+=1,this._input=r;var re=this.count%a.taps;if(re===0)return this.hasRequireFailures()?(this._timer=k(function(){this.state=Ne,this.tryEmit()},a.interval,this),be):Ne}return _e},failTimeout:function(){return this._timer=k(function(){this.state=_e},this.options.interval,this),_e},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ne&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function We(r,a){return a=a||{},a.recognizers=L(a.recognizers,We.defaults.preset),new ln(r,a)}We.VERSION="2.0.7",We.defaults={domEvents:!1,touchAction:Mn,enable:!0,inputTarget:null,inputClass:null,preset:[[on,{enable:!1}],[rn,{enable:!1},["rotate"]],[sn,{direction:pe}],[Ft,{direction:pe},["swipe"]],[Wt],[Wt,{event:"doubletap",taps:2},["tap"]],[an]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ur=1,Hn=2;function ln(r,a){this.options=T({},We.defaults,a||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=Pt(this),this.touchAction=new nn(this,this.options.touchAction),jn(this,!0),m(this.options.recognizers,function(o){var c=this.add(new o[0](o[1]));o[2]&&c.recognizeWith(o[2]),o[3]&&c.requireFailure(o[3])},this)}ln.prototype={set:function(r){return T(this.options,r),r.touchAction&&this.touchAction.update(),r.inputTarget&&(this.input.destroy(),this.input.target=r.inputTarget,this.input.init()),this},stop:function(r){this.session.stopped=r?Hn:Ur},recognize:function(r){var a=this.session;if(!a.stopped){this.touchAction.preventDefaults(r);var o,c=this.recognizers,g=a.curRecognizer;(!g||g&&g.state&Ne)&&(g=a.curRecognizer=null);for(var _=0;_<c.length;)o=c[_],a.stopped!==Hn&&(!g||o==g||o.canRecognizeWith(g))?o.recognize(r):o.reset(),!g&&o.state&(be|tt|Fe)&&(g=a.curRecognizer=o),_++}},get:function(r){if(r instanceof Me)return r;for(var a=this.recognizers,o=0;o<a.length;o++)if(a[o].options.event==r)return a[o];return null},add:function(r){if(I(r,"add",this))return this;var a=this.get(r.options.event);return a&&this.remove(a),this.recognizers.push(r),r.manager=this,this.touchAction.update(),r},remove:function(r){if(I(r,"remove",this))return this;if(r=this.get(r),r){var a=this.recognizers,o=U(a,r);o!==-1&&(a.splice(o,1),this.touchAction.update())}return this},on:function(r,a){if(r!==s&&a!==s){var o=this.handlers;return m(B(r),function(c){o[c]=o[c]||[],o[c].push(a)}),this}},off:function(r,a){if(r!==s){var o=this.handlers;return m(B(r),function(c){a?o[c]&&o[c].splice(U(o[c],a),1):delete o[c]}),this}},emit:function(r,a){this.options.domEvents&&Hr(r,a);var o=this.handlers[r]&&this.handlers[r].slice();if(!(!o||!o.length)){a.type=r,a.preventDefault=function(){a.srcEvent.preventDefault()};for(var c=0;c<o.length;)o[c](a),c++}},destroy:function(){this.element&&jn(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function jn(r,a){var o=r.element;if(o.style){var c;m(r.options.cssProps,function(g,_){c=ye(o.style,_),a?(r.oldCssProps[c]=o.style[c],o.style[c]=g):o.style[c]=r.oldCssProps[c]||""}),a||(r.oldCssProps={})}}function Hr(r,a){var o=t.createEvent("Event");o.initEvent(r,!0,!0),o.gesture=a,a.target.dispatchEvent(o)}T(We,{INPUT_START:J,INPUT_MOVE:we,INPUT_END:Z,INPUT_CANCEL:le,STATE_POSSIBLE:Ht,STATE_BEGAN:be,STATE_CHANGED:tt,STATE_ENDED:Fe,STATE_RECOGNIZED:Ne,STATE_CANCELLED:ft,STATE_FAILED:_e,DIRECTION_NONE:He,DIRECTION_LEFT:je,DIRECTION_RIGHT:Pe,DIRECTION_UP:qe,DIRECTION_DOWN:xe,DIRECTION_HORIZONTAL:pe,DIRECTION_VERTICAL:Te,DIRECTION_ALL:at,Manager:ln,Input:ue,TouchAction:nn,TouchInput:Lt,MouseInput:X,PointerEventInput:Jt,TouchMouseInput:en,SingleTouchInput:Dn,Recognizer:Me,AttrRecognizer:ke,Tap:Wt,Pan:Ft,Swipe:sn,Pinch:rn,Rotate:on,Press:an,on:A,off:F,each:m,merge:w,extend:b,assign:T,inherit:E,bindFn:S,prefixed:ye});var jr=typeof n<"u"?n:typeof self<"u"?self:{};jr.Hammer=We,e.exports?e.exports=We:n[i]=We})(window,document,"Hammer")})(wr);var wa=wr.exports;const _a=ti(wa);var Ia=()=>{},Sa=(e,n,t,i,s,l,d,h)=>{n&&console.debug({"zoom:onkeydown":{"🔑":e.key,isMedia:u(t)instanceof HTMLMediaElement}}),e.stopImmediatePropagation(),["z","Escape"].includes(e.key)?i().close():["Enter","ArrowDown"].includes(e.key)?(u(t)instanceof HTMLMediaElement&&u(t).pause(),s(1)):["ArrowUp"].includes(e.key)?(u(t)instanceof HTMLMediaElement&&u(t).pause(),s(-1)):["ArrowLeft"].includes(e.key)&&u(t)instanceof HTMLMediaElement?l({scale:-30}):["ArrowRight"].includes(e.key)&&u(t)instanceof HTMLMediaElement?l({scale:30}):[" "].includes(e.key)&&u(t)instanceof HTMLMediaElement?u(d)["play|pause"]():["m"].includes(e.key)&&u(t)instanceof HTMLMediaElement?u(d)["(un)?mute"]():["+","="].includes(e.key)?h({factor:1.2}):["-","_"].includes(e.key)?h({factor:.8}):["f"].includes(e.key)&&u(t)instanceof HTMLMediaElement?u(d).fullscreen():/^\d$/.test(e.key)?l({to:Number(e.key)/9-1e-5}):console.debug({"dialog:onkeypress":{"🔑":e.key}})},Aa=$('<dialog class="zoom svelte-1fdhmlk"><h1 class="svelte-1fdhmlk"> </h1> <!></dialog>');function Da(e,n){Se(n,!0);let t=Ee(n,"handle",15,null),i=V(null);const{debug:s}=M;function l({factor:f=1,scale:T=0}){if(!u(i))throw new Error("`content` is null.");const b=getComputedStyle(u(i));let w=Number(b.scale);isNaN(w)&&(w=1);let E=w*f+T;s&&console.debug({zoom:w,factor:f,scale:T,next:E}),u(i).style.scale=String(E),t().style.setProperty("--max-width","auto"),t().style.setProperty("--max-height","auto")}function d({factor:f=1,scale:T=0}){if(!u(i))throw new Error("`content` is null.");if(!(u(i)instanceof HTMLMediaElement))s&&console.warn("`content` is not a media element.");else{const b=u(i).volume;let w=b*f+T;s&&console.debug({volume:b,factor:f,scale:T,next:w})}}function h({factor:f=1,scale:T=0,to:b=null}){if(!u(i))throw new Error("`content` is null.");if(!(u(i)instanceof HTMLMediaElement))s&&console.warn("`content` is not a media element.");else{let w=u(i).currentTime;b!=null&&(b<1?w=b*u(i).duration:w=b);let E=w*f+T;s&&console.debug({time:w,to:b,factor:f,scale:T,next:E}),u(i).currentTime=E}}const v=kn(()=>{const T=Object.fromEntries(["play|pause","(un)?mute","fullscreen"].map(b=>[b,()=>{}]));if(!u(i))s&&console.warn("`content` is null.");else if(!(u(i)instanceof HTMLMediaElement))s&&console.warn("`content` is not a media element.");else{const b=u(i);Object.assign(T,{"play|pause":fn({condition:()=>b.paused,branch:{if:()=>b.play(),else:()=>b.pause()}}),"(un)?mute":fn({branch:{if:()=>b.muted=!b.muted}}),fullscreen:fn({condition:()=>!!document.fullscreenElement,branch:{if:()=>document.exitFullscreen(),else:()=>b.requestFullscreen()}})})}return T});function p(f){var w,E,S,P,L;let T=t();const b=f>=0;if(Math.abs(f)>0)do T=(E=(w=T.closest("li"))==null?void 0:w[b?"previousElementSibling":"nextElementSibling"])==null?void 0:E.querySelector(".zoom"),T||(T=(L=(P=(S=t().closest("li"))==null?void 0:S.parentElement)==null?void 0:P[b?"lastElementChild":"firstElementChild"])==null?void 0:L.querySelector(".zoom")),f+=b?-1:1;while(Math.abs(f)>0&&T);T&&(t().close(),T.showModal())}Ot(()=>{const f=new _a(t());f.get("pinch").set({enable:!0}),f.on("swiperight",()=>{p(1)}),f.on("swipeleft",()=>{p(-1)}),f.on("panright",()=>{h({scale:2})}),f.on("panleft",()=>{h({scale:-2})}),f.on("panup",()=>{d({scale:20})}),f.on("pandown",()=>{d({scale:-20})}),f.on("pinchin",()=>{l({factor:.8})}),f.on("pinchout",()=>{l({factor:1.2})}),f.on("tap",()=>{var T,b;(b=(T=u(v))["play/pause"])==null||b.call(T)}),f.on("doubletap",()=>{t().close()})});var O=Aa();O.__click=[Ia],O.__keydown=[Sa,s,i,t,p,h,v,l];var k=H(O),I=H(k,!0);R(k);var m=q(k,2);An(m,{get datum(){return n.datum},get content(){return u(i)},set content(f){N(i,f,!0)}}),R(O),ve(O,f=>t(f),()=>t()),ce(()=>rt(I,n.datum.title)),G(e,O),Ae()}it(["click","keydown"]);var Pa=(e,n,t,i,s,l)=>{var d;u(n)||(e.preventDefault(),t&&console.debug({"summary:onclick":{"details.open":(d=u(i))==null?void 0:d.open,content:u(s),evt:e,"var:open":l()}}))},xa=(e,n)=>{u(n)||e.preventDefault()},Ca=$('<form class="svelte-27y2d5"><input name="title"/> <button type="submit">💾</button></form>'),Na=$('<details class="svelte-27y2d5"><summary class="svelte-27y2d5"><!></summary> <!></details> <!> <!>',1);function Ma(e,n){Se(n,!0);const{debug:t}=M;class i extends Error{constructor(){super("Not a media element.")}}let s=Ee(n,"datum",15,null),l=Ee(n,"open",15,!1),d=V(null),h=V(null);if(s()==null)throw new Error(" `null` `datum`.");const{id:v,cid:p,title:O,type:k}=s();let I=V(null),m=V(null),f=V(null),T=V(!1);me(O);const{single:b}=M;Ot(()=>{var x;n.index===0&&((x=u(d))==null||x.focus())});function w(x){const{play:Q=null,pitch:de=null}=x??{};if(!(u(h)instanceof HTMLMediaElement)){if(de===!1)return;throw t&&console.debug({rejecting:u(h)}),new i}(u(h).paused||Q===!0)&&Q!==!1?(t&&console.debug({playing:u(h)}),u(h).play()):(t&&console.debug({pausing:u(h)}),u(h).pause())}M.register(w,{itemId:v});function E(x){u(I)&&((!l()||(x==null?void 0:x.open)===!0)&&(x==null?void 0:x.open)!==!1?(t&&console.debug({opening:u(I)}),l(!0)):(t&&console.debug({closing:u(I)}),l(!1),w({play:!1,pitch:!1})))}M.register(E,{itemId:v});function S(){return l()}M.register(S,{itemId:v});function P(){var x,Q,de,ne,ze;t&&console.debug({zoom:{datum:s(),open:(x=u(f))==null?void 0:x.open,modal:(Q=u(f))==null?void 0:Q.matches(":modal")}}),(de=u(f))!=null&&de.matches(":modal")?(ne=u(f))==null||ne.close():(ze=u(f))==null||ze.showModal()}M.register(P,{itemId:v});function L(){var x;(x=u(m))==null||x.showModal()}M.register(L,{itemId:v});function A(){var x;(x=u(d))==null||x.focus()}M.register(A,{itemId:v});function F(x){N(T,x,!0)}M.register(F,{itemId:v});function z(){return u(T)}M.register(z,{itemId:v});function Y(x){u(T)&&x.focus()}var B=Na(),U=Ze(B),W=H(U);K(W,"tabindex",0),W.__click=[Pa,T,t,I,h,l],W.__keydown=[xa,T];var te=H(W);{var ye=x=>{var Q=Ca(),de=H(Q);On(de),sr(()=>lr(de,()=>s().title,ne=>s(s().title=ne,!0))),ni(de,ne=>Y==null?void 0:Y(ne)),ge(2),R(Q),Ue("submit",Q,ne=>{ne.preventDefault(),N(T,!1)}),G(x,Q)},De=x=>{var Q=zr();ce(de=>rt(Q,`${s().title??""} ${de??""}`),[()=>k!=null&&k.startsWith("video/")?"🎬":""]),G(x,Q)};Oe(te,x=>{u(T)?x(ye):x(De,!1)})}R(W),ve(W,x=>N(d,x),()=>u(d));var se=q(W,2);An(se,{get datum(){return s()},get content(){return u(h)},set content(x){N(h,x,!0)}}),R(U),ve(U,x=>N(I,x),()=>u(I));var he=q(U,2);Oa(he,{get datum(){return s()},get handle(){return u(m)},set handle(x){N(m,x,!0)}});var Je=q(he,2);Da(Je,{get datum(){return s()},get handle(){return u(f)},set handle(x){N(f,x,!0)}}),ce(()=>{K(U,"name",`file${b?"":`-${n.index+1}`}`),K(U,"id",`deets-${n.index+1}`),K(W,"id",`sum-${n.index+1}`)}),ri("open","toggle",U,l,l),G(e,B),Ae()}it(["click","keydown"]);var Ra=$('<div class="border-solid rounded p-2 bg-white dark:bg-white/25"> </div>');function or(e,n){Se(n,!0);var t=Ra(),i=H(t,!0);R(t),ce(()=>rt(i,n.datum.title)),G(e,t),Ae()}var La=$("<li><!> <!></li>");function Ua(e,n){Se(n,!0);const{debug:t}=M,i={type:"idle"};let s=Ee(n,"datum",15,null);if(s()==null)throw new Error("`null` `datum`.");let l=V(null),d=V(me(i)),h=V(!1);Ot(()=>(da(u(l)),Zt($i({element:u(l),getInitialData(){return s()},onGenerateDragPreview({nativeSetDragImage:f}){oa({nativeSetDragImage:f,getOffset:ua({x:"1rem",y:"0.5rem"}),render({container:T}){or!=null&&(N(d,{type:"preview",container:T},!0),Xr(or,{target:T,props:{datum:s()}}))}})},onDragStart(){N(d,{type:"is-dragging"},!0)},onDrop(){N(d,i,!0)}}),Zi({element:u(l),canDrop({source:f}){return f.element===u(l)?!1:n.isDatum(f.data)},getData({input:f}){return s()==null?{}:u(l)==null?s():Ji(s(),{element:u(l),input:f,allowedEdges:["top","bottom"]})},getIsSticky(){return!0},onDragEnter({self:f}){const T=Tn(f.data);N(d,{type:"is-dragging-over",closestEdge:T},!0)},onDrag({self:f}){const T=Tn(f.data);N(d,{type:"is-dragging-over",closestEdge:T},!0)},onDragLeave(){N(d,i,!0)},onDrop(){N(d,i,!0)}}))));const v=()=>{var f;M.activeId=((f=s())==null?void 0:f.id)??null};var p=La();p.__focusin=v,p.__click=f=>{v(),M.any("isEditing")||(M.retrieve("focus",{useActive:!0})(),(!f.ctrlKey||!u(h))&&M.retrieve("toggleOpen",{useActive:!0})())};let O;var k=H(p);Ma(k,{get index(){return n.index},get datum(){return s()},set datum(f){s(f)},get open(){return u(h)},set open(f){N(h,f,!0)}});var I=q(k,2);{var m=f=>{va(f,{get edge(){return u(d).closestEdge},gap:"0.5rem"})};Oe(I,f=>{u(d).type==="is-dragging-over"&&u(d).closestEdge&&f(m)})}R(p),ve(p,f=>N(l,f),()=>u(l)),ce((f,T)=>{var b;K(p,"data-element-id",(b=s())==null?void 0:b.id),wt(p,1,f,"svelte-1iaogg8"),O=wn(p,"",O,T)},[()=>{var f;return _n((f=n.rowClasses)==null?void 0:f.call(n,u(d).type))},()=>{var f;return{"view-transition-name":`item-${(f=s())==null?void 0:f.id}`}}]),Ue("keypress",p,()=>{}),G(e,p),Ae()}it(["focusin","click"]);var Ha=$("<ol></ol>");function ja(e,n){Se(n,!0);let t=Ee(n,"data",31,()=>me([])),i=Ee(n,"history",27,()=>me([])),s=V(null);const l=h=>n.isDatum?n.isDatum(h):!0;Ot(()=>Tr({canMonitor({source:h}){return l(h.data)},onDrop({location:h,source:v}){const[p]=h.current.dropTargets;if(!p)return;const{data:O}=v,{data:k}=p;if(!l(O)||!l(k))return;const I=E=>t().findIndex(({id:S})=>S===E),m=I(O.id),f=I(k.id);if(f<0||m<0)return;const T=Tn(k),b=async()=>{var P;i().push([...t()]);const E={idx:m},S={idx:f};if(u(s)){for(const L of[E,S])L.elem=(P=u(s))==null?void 0:P.querySelector(`li:nth-of-type(${L.idx+1})`),L.color=getComputedStyle(L.elem).borderColor;E.elem&&E.color&&S.elem&&S.color&&(E.elem.style.borderColor=E.color,S.elem.style.borderColor=S.color)}t(na({list:t(),startIndex:m,indexOfTarget:f,closestEdgeOfTarget:T,axis:"vertical"})),await Vt(),E.elem&&E.color&&S.elem&&S.color&&(E.elem.style.borderColor=S.color,S.elem.style.borderColor=E.color)};"startViewTransition"in document?document.startViewTransition(b):b();const w=document.querySelector(`[data-element-id="${O.id}"]`);w instanceof HTMLElement&&ia(w)}}));var d=Ha();dr(d,23,t,h=>h.id,(h,v,p)=>{Ua(h,{get rowClasses(){return n.rowClasses},isDatum:l,get index(){return u(p)},get datum(){return t()[u(p)]},set datum(O){t(t()[u(p)]=O,!0)}})}),R(d),ve(d,h=>N(s,h),()=>u(s)),ce(h=>wt(d,1,h),[()=>_n([...Array.from(n.listClasses??[]),"sortable-list"])]),G(e,d),Ae()}var Fa=$('<dialog><h1>Keyboard & Touch Navigation</h1> <form method="dialog"><button id="close" class="svelte-invagy">⨯</button> <ul class="svelte-invagy"><li><kbd>?</kbd>: (Display|Hide) these shortcuts.</li> <li><kbd>↑</kbd> | <kbd>↓</kbd>: Highlight the (previous|next) entry.</li> <li><kbd>enter</kbd>: (Expand|Collapse) the highlighted entry.</li> <li><kbd>e</kbd>: Edit the title of the highlighted entry.</li> <li><kbd>c</kbd>: Copy the highlighted entry to a different list.</li> <li><kbd>x</kbd> / <kbd>delete</kbd> / <kbd>backspace</kbd>: Delete the highlighted entry.</li> <li><kbd>s</kbd> | <kbd>n</kbd>: (Save|Load) the current configuration (to|from) Neo4j.</li> <li><kbd>j</kbd>: Jump to a specific entry number.</li> <li><kbd>m</kbd>, (<kbd>↑</kbd> | <kbd>↓</kbd>), <kbd>enter</kbd>: Move the selected entry (up|down).</li> <li><kbd>d</kbd> | <kbd>l</kbd>: (Down)?Load the congfiguration as JSON5.</li> <li><kbd>p</kbd> | <kbd>b</kbd>: (Publish|Load) a CBOR representation of the list (to|from) IPFS pub/sub.</li> <li><kbd>a</kbd>: Add local files to the list <em>(removing duplicates)</em>.</li> <li><kbd>v</kbd>: View all entries.</li> <li><kbd>h</kbd>: Hide all entries.</li> <li><kbd>u</kbd> | <kbd>r</kbd>: (Un|Re)do the last change.</li> <li><kbd><i>space</i></kbd>: <ul class="svelte-invagy"><li>If the highlighted entry is collapsed, expand it.</li> <li>If the expanded entry is media, (play|pause) it.</li> <li>If the expanded entry is not media, collapse it.</li></ul></li> <li><kbd>z</kbd>: Zoom in on the highlighted entry: <ul class="svelte-invagy"><li><kbd>z</kbd> / <kbd>escape</kbd>: Zoom out.</li> <li><kbd>↑</kbd> / <em>swipe</em> <kbd>↑</kbd>: View the previous entry.</li> <li><kbd>↓</kbd> / <em>swipe</em> <kbd>↓</kbd>: View the next entry.</li> <li><em>pan</em> <kbd>→</kbd> | <em>pan</em> <kbd>←</kbd>: Seek (forward|back) by 2 seconds.</li> <li><kbd>→</kbd> | <kbd>←</kbd>: Seek (forward|back) by ½ minute.</li> <li>(<kbd>→</kbd> | <kbd>←</kbd>) ≥ 2sec: Seek (forward|back) by 7½% for each additional 1½ second held.</li> <li><kbd>0</kbd>–<kbd>9</kbd>: Seek to 0–100% of the way through the media.</li> <li><kbd>ctrl</kbd> ➕ (<kbd>↑</kbd> | <kbd>↓</kbd>) / (<em>pan</em>)? (<kbd>↑</kbd> | <kbd>↓</kbd>): (In|De)crease the volume by 75%.</li> <li><kbd>space</kbd>: (Play|Pause) media.</li> <li><kbd>m</kbd>: (Un)?Mute media.</li> <li><kbd>f</kbd>: Toggle fullscreen.</li></ul></li></ul> <ul id="controls" class="svelte-invagy"><li><button id="ok">OK</button></li></ul></form></dialog>');function Wa(e,n){Se(n,!0);let t=Ee(n,"handle",15,null);var i=Fa();ve(i,s=>t(s),()=>t()),G(e,i),Ae()}function Ya(e,n,t,i){n&&console.debug({"Replacing From":[...t]}),t.length>0&&i(t.pop()??[""])}var za=$('<li class="svelte-1fu48zf"><button id="clear" class="svelte-1fu48zf"><span>∅</span></button></li>'),Xa=function(e,n,t){var i;if(e.key==="Enter"){e.preventDefault();const s=new Event("submit",{bubbles:!0,cancelable:!0});s.submitter=this,(i=u(n))==null||i.dispatchEvent(s),t&&console.debug({Fired:s})}},qa=$('<button type="button" class="minus svelte-1fu48zf"><span class="svelte-1fu48zf">⨯</span></button>'),Va=$('<li class="svelte-1fu48zf"><button type="button" class="slash svelte-1fu48zf"><span>/</span></button></li>'),Ga=$('<li><input class="svelte-1fu48zf"/> <!></li> <!>',1),Ba=$('<li class="svelte-1fu48zf"><button type="button" class="svelte-1fu48zf"><span>↺</span></button></li>'),Ka=$('<form><ol class="svelte-1fu48zf"><!> <li class="svelte-1fu48zf"><button id="before" class="svelte-1fu48zf"><span>+</span></button></li> <!> <li class="svelte-1fu48zf"><button id="more" class="svelte-1fu48zf"><span>+</span></button></li> <!></ol></form>');function Za(e,n){Se(n,!0);let t=Ee(n,"elements",31,()=>me([""])),i=me([]),s=V(null),{debugging:l}=vt,d=V(null),h=V(null);function v(b,{clear:w=!1}={}){const E=w?[]:t().slice(0,b),S=w?[]:t().slice(b),P=[...E,"",...S];i.push([...t()]),l&&console.debug({Replacing:i.at(-1),With:[...P]}),t(P),N(s,b,!0)}Ot(()=>{var b,w;u(s)!=null&&((w=(b=u(d))==null?void 0:b.querySelectorAll("input")[u(s)])==null||w.focus(),N(s,null))});var p=Ka(),O=H(p),k=H(O);{var I=b=>{var w=za();G(b,w)};Oe(k,b=>{(t().length>1||t()[0]!=="")&&b(I)})}var m=q(k,4);dr(m,17,t,ei,(b,w,E)=>{var S=Ga(),P=Ze(S);let L;var A=H(P);On(A),K(A,"id",`text-${E}`),A.__keydown=[Xa,d,l];var F=q(A,2);{var z=U=>{var W=qa();W.__click=()=>{i.push([...t()]),t().splice(E,1)},K(W,"tabindex",-1),G(U,W)};Oe(F,U=>{t().length>1&&U(z)})}R(P);var Y=q(P,2);{var B=U=>{var W=Va(),te=H(W);te.__click=()=>v(E+1),K(te,"tabindex",-1),R(W),G(U,W)};Oe(Y,U=>{E<t().length-1&&U(B)})}ce(U=>L=wt(P,1,"svelte-1fu48zf",null,L,U),[()=>({single:t().length<=1})]),Ue("focus",A,()=>{N(h,t()[E],!0)}),Ue("blur",A,()=>{u(h)&&u(h)!==t()[E]&&(l&&console.debug({from:u(h),to:t()[E]}),i.push([...t()]))}),lr(A,()=>t()[E],U=>t(t()[E]=U,!0)),G(b,S)});var f=q(m,4);{var T=b=>{var w=Ba(),E=H(w);E.__click=[Ya,l,i,t],R(w),G(b,w)};Oe(f,b=>{i.length>0&&b(T)})}R(O),R(p),ve(p,b=>N(d,b),()=>u(d)),Ue("submit",p,b=>{var P;b.preventDefault();const w=(P=b.submitter)==null?void 0:P.id;if(!w)throw new Error("No submitter.");l&&console.debug({submitter:w});const[E,S]=Array.from(w.match(/^text-(\d+)$/)??[]);if(S){const L=Number(S)+1;l&&console.debug({"Inserting At":L}),v(L)}else if(["before","more"].includes(w)){const L=w==="before"?0:t().length;l&&console.debug({idx:L}),v(L)}else if(w==="clear")v(0,{clear:!0});else throw new Error(`Unrecognized Submitter Id: "${w}"`)}),G(e,p),Ae()}it(["keydown","click"]);var $a=$('<link rel="icon" class="svelte-kldhhd"/> <meta name="description" class="svelte-kldhhd"/>',1),Qa=(e,n)=>{var t;return(t=u(n))==null?void 0:t.click()},Ja=(e,n,t)=>n(e,t),eo=(e,n)=>{var t;return(t=u(n))==null?void 0:t.click()},to=$('<span class="svelte-kldhhd"><section class="svelte-kldhhd"><p class="svelte-kldhhd">Loading…</p> <progress class="svelte-kldhhd"> </progress></section></span>'),no=$('<span class="svelte-kldhhd">Add Files</span>'),ro=(e,n,t)=>n(e,t),io=$('<p class="svelte-kldhhd">No entries yet.</p>'),ao=$('<header class="svelte-kldhhd"><h1 class="svelte-kldhhd">Merge List</h1> <nav class="svelte-kldhhd"><ul id="controls" class="svelte-kldhhd"><li class="svelte-kldhhd"><button id="save" type="button"><span class="svelte-kldhhd">🖫</span></button> <dialog open class="svelte-kldhhd">Save</dialog></li> <li class="svelte-kldhhd"><button id="load" type="button" class="svelte-kldhhd"><span class="svelte-kldhhd">📥</span></button> <dialog open class="svelte-kldhhd">Load</dialog></li> <li class="svelte-kldhhd"><form class="svelte-kldhhd"><label class="svelte-kldhhd"><button id="export" type="button" class="svelte-kldhhd"><span class="svelte-kldhhd">⭱</span></button> <input type="file" accept="*json5,*.json" multiple class="svelte-kldhhd"/></label></form> <dialog open class="svelte-kldhhd">Import</dialog></li> <li class="svelte-kldhhd"><button id="import" type="button" class="svelte-kldhhd"><span class="svelte-kldhhd">⭳</span></button> <dialog open class="svelte-kldhhd">Export</dialog></li> <li class="svelte-kldhhd"><button id="undo" type="button" class="svelte-kldhhd"><span class="svelte-kldhhd">↺</span></button> <dialog open class="svelte-kldhhd">Undo</dialog></li> <li class="svelte-kldhhd"><button id="shortcuts" type="button" class="pulsing svelte-kldhhd"><span class="svelte-kldhhd">⌨</span></button> <dialog open class="svelte-kldhhd">Shortcuts</dialog></li> <li class="svelte-kldhhd"><button id="show" type="button" class="svelte-kldhhd"><span class="svelte-kldhhd">⟱</span></button> <dialog open class="svelte-kldhhd">Show All</dialog></li> <li class="svelte-kldhhd"><button id="hide" type="button" class="svelte-kldhhd"><span class="svelte-kldhhd">⟰</span></button> <dialog open class="svelte-kldhhd">Hide All</dialog></li> <li class="svelte-kldhhd"><label class="button svelte-kldhhd" id="single"><input type="checkbox" class="svelte-kldhhd"/> <span class="svelte-kldhhd">Ⅰ</span></label> <dialog open class="svelte-kldhhd">Single<br class="svelte-kldhhd"/>Visible</dialog></li></ul></nav></header> <main class="svelte-kldhhd"><!> <form class="svelte-kldhhd"><label class="svelte-kldhhd"><button id="add-file" type="button" class="svelte-kldhhd"><!></button> <input type="file" accept="image/*,video/*,audio/*" multiple class="svelte-kldhhd"/></label></form> <!> <!></main>',1);function xo(e,n){Se(n,!0);const{debug:t}=M;let i=V(me([])),s=$r(),l=V(!1),d=V(!1),h=V(!1),v=V(me([])),p=V(0),O=0,k=V(null),I=V(null),m=V(null),f=V(me(ur.params.path.split("/").filter(Boolean)));u(f).length===0&&u(f).push("");const T=kn(()=>u(f).filter(y=>y.trim()!=="").length>0),b=(y,D={})=>{Br({text:y,duration:16e3,close:!0,gravity:"bottom",position:"center",stopOnFocus:!0,style:{background:"linear-gradient(to right, #1E396A, #F32587)"},...D}).showToast()};async function w(y){const D={chunker:"rabin",cidVersion:1,progress:ae=>{N(p,u(p)+ae)},timeout:6e4},C=y.reduce((ae,{size:Ce})=>ae+Ce,0);t&&console.debug({Adding:y,"Total Size":C,options:D});let X=[],ee=0;for await(const{cid:ae}of s.addAll(y,D))t&&console.debug({"Added Local":{cid:ae,file:y[ee].name}}),X.push({cid:ae.toString(),title:y[ee].name.replace(/\.[^.]*$/,""),type:y[ee].type}),ee++;return qt(X)}async function E(y){const D=await Kr();if(!vt.storachaEmail)throw new Error("No Storacha email specified in settings.");const C=await D.login(vt.storachaEmail);let X=D.spaces().find(ae=>ae.name==="Mïmis");if(X||(X=await D.createSpace("Mïmis",{account:C})),!X)throw new Error('Couldn’t find or create space: "Mïmis".');await D.setCurrentSpace(X.did());const ee=await Promise.all(y.map(async ae=>({cid:(await D.uploadFile(ae,{dedupe:!0})).toString(),title:ae.name.replace(/\.[^.]*$/,""),type:ae.type})));return qt(ee)}async function S(y){var D;try{Array.isArray(y)||(y=[y]);const C=vt.saveLocal?await w(y):await E(y);t&&console.debug({Added:C});const X=C[0].id,ee=u(i).map(({cid:et})=>et),ae=C.filter(({cid:et})=>!ee.includes(et));t&&console.debug({infos:C,"Unique Entries":ae}),N(i,u(i).concat(ae),!0),await Vt();const Ce=document.querySelector(`[data-element-id="${X}"] summary`);Ce==null||Ce.focus()}catch(C){throw console.error({"IPFS Add Error":C}),((D=C.response)==null?void 0:D.status)===0?new Error("Couldn’t connect to IPFS."):C}}async function P(y){const D=await Promise.all(y.map(async C=>zn.parse(await C.text())));N(i,qt(D.flat()),!0)}async function L(y,D){var C;try{y.preventDefault(),N(l,!0);const X=(C=y.currentTarget)==null?void 0:C.files;if(!X)return;await D.call(D,Array.from(X)),N(h,u(i).length>0)}catch(X){b(X.message)}finally{N(l,!1)}}function A(){try{N(d,!0),console.debug({save:{entries:u(i),path:u(f)}}),ii(u(i),u(f))}finally{N(d,!1)}}M.register(A);async function F(){try{N(d,!0),N(i,await ai(u(f)),!0)}finally{N(d,!1)}}M.register(F);function z(){if(u(v).length===0)return;const y=async()=>{const D=u(v).pop();N(i,D,!0),N(h,u(v).length>0),await Vt()};"startViewTransition"in document?document.startViewTransition(y):y()}M.register(z);function Y(){var y;(y=u(m))==null||y.showModal()}M.register(Y);async function B(){M.single=!1;const y=M.retrieveAll("toggleOpen");for(const D of y)D({open:!0})}M.register(B);async function U(){const y=M.retrieveAll("toggleOpen");for(const D of y)D({open:!1})}M.register(U);function W(){var y;(y=u(k))==null||y.click()}M.register(W);function te(){const y=u(i).map(({id:X,...ee})=>ee),D=zn.stringify(y,null,2),C=document.createElement("a");C.href=URL.createObjectURL(new Blob([D],{type:"application/json"})),C.download=`mïmis config.${new Date().toISOString()}.json5`,t&&console.debug({Downloading:u(i),href:C.href,name:C.download}),C.style.display="none",document.body.appendChild(C),C.click(),setTimeout(()=>{document.body.removeChild(C),URL.revokeObjectURL(C.href)},100)}M.register(te);function ye(y,D){const C=y.closest("li"),X=D==="up"?C==null?void 0:C.previousElementSibling:C==null?void 0:C.nextElementSibling;if(!X)return;const ee=X.querySelector("summary");ee==null||ee.focus(),M.retrieve("toggleOpen",{useActive:!0})({open:!0})}var De=ao();qr(y=>{var D=$a();dn.title="Mïmis: Merge List";var C=Ze(D),X=q(C,2);K(X,"content","Ordered list of files to be combined with others in the same namespace."),ce(()=>K(C,"href",`${Zr}/merge%20left.svg`)),G(y,D)}),Ue("datum-delete",dn,y=>{const{id:D}=y.detail;u(v).push([...u(i)]),N(i,u(i).filter(C=>C.id!==D),!0)}),Ue("keydown",dn,y=>{var D,C,X;if(!(M.any("isEditing")||document.activeElement instanceof HTMLInputElement))if(t&&console.debug({"document:onkeypress":{"🗝️":y.key,isOpen:(D=M.retrieve("isOpen",{useActive:!0}))==null?void 0:D()}}),y.key==="a")(C=u(k))==null||C.click();else if(y.key==="?")Y();else if(y.key==="s")A();else if(y.key==="u")z();else if(y.key==="v")B();else if(y.key==="h")U();else if(y.key==="d")te();else if(y.key==="l")(X=u(I))==null||X.click();else if(y.key==="e")y.stopPropagation(),M.retrieve("setEditing",{useActive:!0})(!0);else if(y.key==="z")M.retrieve("zoom",{useActive:!0})();else if(y.key==="Delete")M.retrieve("remove",{useActive:!0})();else if(y.key==="Escape")M.retrieve("toggleOpen",{useActive:!0})({open:!1});else if(y.key==="Enter")M.retrieve("toggleOpen",{useActive:!0})();else if(y.key===" ")if(y.preventDefault(),M.retrieve("isOpen",{useActive:!0})())try{M.retrieve("togglePlay",{useActive:!0})()}catch{M.retrieve("toggleOpen",{useActive:!0})()}else M.retrieve("toggleOpen",{useActive:!0})();else/^Arrow(Up|Down)$/.test(y.key)&&ye(y.target,y.key.replace(/^Arrow/,"").toLowerCase())});var se=Ze(De),he=q(H(se),2),Je=H(he),x=H(Je),Q=H(x);Q.__click=A;let de;ge(2),R(x);var ne=q(x,2),ze=H(ne);ze.__click=F,ge(2),R(ne);var Xe=q(ne,2),At=H(Xe),Dt=H(At),J=H(Dt);J.__click=[Qa,I];var we=q(J,2);we.__change=[Ja,L,P],ve(we,y=>N(I,y),()=>u(I)),R(Dt),R(At),ge(2),R(Xe);var Z=q(Xe,2),le=H(Z);le.__click=te,ge(2),R(Z);var He=q(Z,2),je=H(He);je.__click=z,ge(2),R(He);var Pe=q(He,2),qe=H(Pe);qe.__click=Y,ge(2),R(Pe);var xe=q(Pe,2),pe=H(xe);pe.__click=B,ge(2),R(xe);var Te=q(xe,2),at=H(Te);at.__click=U,ge(2),R(Te);var ot=q(Te,2),Ve=H(ot),ue=H(Ve);On(ue),wn(ue,"",{},{display:"none"}),ge(2),R(Ve),ge(2),R(ot),R(Je),R(he),R(se);var Pt=q(se,2),xt=H(Pt);Za(xt,{get elements(){return u(f)},set elements(y){N(f,y,!0)}});var st=q(xt,2),Ct=H(st),Ge=H(Ct);Ge.__click=[eo,k];var Nt=H(Ge);{var Mt=y=>{var D=to(),C=H(D),X=q(H(C),2);K(X,"max",O);var ee=H(X);R(X),R(C),R(D),ce(()=>{Vr(X,u(p)),rt(ee,`${u(p)/O*100}%`)}),G(y,D)},Rt=y=>{var D=no();G(y,D)};Oe(Nt,y=>{u(l)?y(Mt):y(Rt,!1)})}R(Ge);var lt=q(Ge,2);lt.__change=[ro,L,S],ve(lt,y=>N(k,y),()=>u(k)),R(Ct),R(st);var Be=q(st,2);{var ut=y=>{var D=io();G(y,D)},$t=y=>{ja(y,{get data(){return u(i)},set data(D){N(i,D,!0)},get history(){return u(v)},set history(D){N(v,D,!0)}})};Oe(Be,y=>{u(i).length===0?y(ut):y($t,!1)})}var Qt=q(Be,2);Wa(Qt,{get handle(){return u(m)},set handle(y){N(m,y,!0)}}),R(Pt),ce((y,D,C)=>{Q.disabled=!u(T)||!u(h)||u(d),de=wt(Q,1,"svelte-kldhhd",null,de,y),ze.disabled=!u(T)||u(d),J.disabled=u(l),je.disabled=u(v).length===0||u(d),pe.disabled=D,at.disabled=C,Ge.disabled=u(l)},[()=>({saving:u(d)}),()=>u(i).length===0||M.any("isOpen"),()=>u(i).length===0||!M.any("isOpen")]),Gr(ue,()=>M.single,y=>M.single=y),G(e,De),Ae()}it(["click","change"]);export{xo as component};

var jn=e=>{throw TypeError(e)};var un=(e,t,n)=>t.has(e)||jn("Cannot "+n);var ne=(e,t,n)=>(un(e,t,"read from private field"),n?n.call(e):t.get(e)),Ce=(e,t,n)=>t.has(e)?jn("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Fn=(e,t,n,a)=>(un(e,t,"write to private field"),a?a.call(e,n):t.set(e,n),n),Wn=(e,t,n)=>(un(e,t,"access private method"),n);import"../chunks/CWj6FrbW.js";import{A as or,h as Hr,n as jr,o as Fr,f as re,t as fe,b as Z,ag as q,k as c,af as N,ae as Ee,p as Me,aL as cn,a as tt,aG as kn,c as Re,d as L,r as R,ac as ge,s as V,av as zt,g as Gt,aT as Wr,ad as dn}from"../chunks/CHL_XyGH.js";import{s as rt,d as Et,e as nt,m as Yr}from"../chunks/Cv5ER_U-.js";import{i as Be}from"../chunks/DFaSiuii.js";import{h as Xr}from"../chunks/DhaZMK9J.js";import{b as Bt,d as On,c as wn,s as K,r as sr,e as zr}from"../chunks/C569SQVq.js";import{c as qr,b as Vr}from"../chunks/S5vleeRV.js";import{b as ve}from"../chunks/BjZFVJDF.js";import{T as Gr}from"../chunks/B2cAYdwZ.js";import{l as Yn}from"../chunks/8HslT92O.js";import{c as Br}from"../chunks/CwYghvO1.js";import{b as Kr}from"../chunks/mS3KIaNS.js";import{p as lr}from"../chunks/BbdZ67up.js";import{s as Yt}from"../chunks/KGfyMtIs.js";import{g as ur,a as Zr}from"../chunks/Bi109sN7.js";import{v as jt,P as Qr}from"../chunks/BhgOS_kI.js";import{N as Jr,r as $r,i as Xt,e as fn}from"../chunks/CDVT8wMl.js";import{e as ei}from"../chunks/DTqv0tSM.js";import{p as ke}from"../chunks/BKhxqlYf.js";import{x as Xn,y as ti}from"../chunks/Eljbaigh.js";import{t as Ft}from"../chunks/AYLxYG74.js";function ni(e,t,n){or(()=>{var a=Hr(()=>t(e,n==null?void 0:n())||{});if(a!=null&&a.destroy)return()=>a.destroy()})}function ri(e,t,n,a,s){var l=()=>{a(n[e])};n.addEventListener(t,l),s?jr(()=>{n[e]=s()}):l(),(n===document.body||n===window||n===document)&&Fr(()=>{n.removeEventListener(t,l)})}async function ii(e,t){const a=ur().session();try{const{records:[s]}=await a.run("MERGE (r:Root) RETURN elementId(r) as id");let l=s.get("id");const f=`
      MATCH (elem) WHERE elementId(elem) = $currentId
      MERGE (elem)-[tain:CONTAINS {path: $element}]->(next:Spot)
      ON CREATE SET elem.mimis_id = $elemUUID
      ON CREATE SET tain.mimis_id = $tainUUID
      RETURN elementId(next) as id
    `;for(const E of t){const{records:[T]}=await a.run(f,{currentId:l,element:E,elemUUID:jt(),tainUUID:jt()});l=T.get("id")}const v=`
      MATCH (path) WHERE elementId(path) = $currentId
      OPTIONAL MATCH (path)-[:REPRESENTED_BY]->(sib:Nöopoint)
      WITH path, sib
      ORDER BY sib.createdAt DESC
      WITH path, collect(sib)[0] as previous
      CREATE (path)-[:REPRESENTED_BY]->(list:List:Nöopoint {
        mimis_id: $uuid, createdAt: timestamp()
      })
      WITH list, previous
      FOREACH (_ IN CASE WHEN previous IS NOT NULL THEN [1] ELSE [] END |
        MERGE (list)-[:PREVIOUS]->(previous)
      )
      RETURN elementId(list) as id
    `,{records:[h]}=await a.run(v,{currentId:l,uuid:jt()});l=h.get("id");const g=`
      MATCH (list) WHERE elementId(list) = $currentId
      MERGE (file:IPFS:File {cid: $cid})
      MERGE (point:Nöopoint)-[:EMBODIED_AS]->(file)
      MERGE (spot:Spot)-[:REPRESENTED_BY]->(point)
      MERGE (item:Spot)-[:CONTAINS {path: $title}]->(spot)
      ON CREATE SET file.createdAt = timestamp()
      ON CREATE SET file.mimis_id = $uuid
      SET file.type = (
        CASE WHEN file.type IS NULL THEN $type ELSE file.type END
      )
      CREATE (list)-[:ENTRY {order: $order}]->(item)
      RETURN file
    `;for(const E in e){const{cid:T,title:I,type:m}=e[E];await a.run(g,{currentId:l,cid:T,title:I,type:m,order:Number(E)+1,uuid:jt()})}}finally{await a.close()}}async function ai(e){const t=await Jr.get.children(e,{onlyCurrent:!0});if(t.length===0)throw new Error("No results for path.");if(t.length>1)throw new Error(`${t.length} results for path.`);const[{nöopoint:n}]=t,a=ur(),s=a.session();console.debug({nöopoint:n});try{const l=`
      MERGE (itemPoint:Nöopoint)-[:EMBODIED_BY]->(item)
      MATCH (point)-[:REPRESENTED_BY]->(itemPoint)
      WHERE elementId(point) = $id
      AND NOT ()-[:PREVIOUS]->(point)
      ORDER BY entry.order
      RETURN DISTINCT entry, item
    `,{records:f}=await s.run(l,{id:n.elementId}),v=$r(f);return console.debug({found:v}),Xt(v.map(h=>({title:h.entry.properties.path,type:h.item.properties.type,cid:h.item.properties.cid})))}finally{s.close(),a.close()}}function oi(e){if(Array.isArray(e))return e}function si(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a,s,l,f,v=[],h=!0,g=!1;try{if(l=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;h=!1}else for(;!(h=(a=l.call(n)).done)&&(v.push(a.value),v.length!==t);h=!0);}catch(E){g=!0,s=E}finally{try{if(!h&&n.return!=null&&(f=n.return(),Object(f)!==f))return}finally{if(g)throw s}}return v}}function mn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function cr(e,t){if(e){if(typeof e=="string")return mn(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mn(e,t):void 0}}function li(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function In(e,t){return oi(e)||si(e,t)||cr(e,t)||li()}var Ke={},kt={};Object.defineProperty(kt,"__esModule",{value:!0});kt.bind=void 0;function ui(e,t){var n=t.type,a=t.listener,s=t.options;return e.addEventListener(n,a,s),function(){e.removeEventListener(n,a,s)}}kt.bind=ui;var Kt={},et=Xn&&Xn.__assign||function(){return et=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},et.apply(this,arguments)};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.bindAll=void 0;var ci=kt;function zn(e){if(!(typeof e>"u"))return typeof e=="boolean"?{capture:e}:e}function di(e,t){if(t==null)return e;var n=et(et({},e),{options:et(et({},zn(t)),zn(e.options))});return n}function fi(e,t,n){var a=t.map(function(s){var l=di(s,n);return(0,ci.bind)(e,l)});return function(){a.forEach(function(l){return l()})}}Kt.bindAll=fi;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.bindAll=e.bind=void 0;var t=kt;Object.defineProperty(e,"bind",{enumerable:!0,get:function(){return t.bind}});var n=Kt;Object.defineProperty(e,"bindAll",{enumerable:!0,get:function(){return n.bindAll}})})(Ke);var dr="data-pdnd-honey-pot";function fr(e){return e instanceof Element&&e.hasAttribute(dr)}function hr(e){var t=document.elementsFromPoint(e.x,e.y),n=In(t,2),a=n[0],s=n[1];return a?fr(a)?s??null:a:null}function ht(e){"@babel/helpers - typeof";return ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ht(e)}function hi(e,t){if(ht(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(ht(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vi(e){var t=hi(e,"string");return ht(t)=="symbol"?t:t+""}function Ot(e,t,n){return(t=vi(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vr=2147483647;function qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Vn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qn(Object(n),!0).forEach(function(a){Ot(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qn(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}var vt=2,Gn=vt/2;function pi(e){return{x:Math.floor(e.x),y:Math.floor(e.y)}}function gi(e){return{x:e.x-Gn,y:e.y-Gn}}function mi(e){return{x:Math.max(e.x,0),y:Math.max(e.y,0)}}function yi(e){return{x:Math.min(e.x,window.innerWidth-vt),y:Math.min(e.y,window.innerHeight-vt)}}function Bn(e){var t=e.client,n=yi(mi(gi(pi(t))));return DOMRect.fromRect({x:n.x,y:n.y,width:vt,height:vt})}function Kn(e){var t=e.clientRect;return{left:"".concat(t.left,"px"),top:"".concat(t.top,"px"),width:"".concat(t.width,"px"),height:"".concat(t.height,"px")}}function bi(e){var t=e.client,n=e.clientRect;return t.x>=n.x&&t.x<=n.x+n.width&&t.y>=n.y&&t.y<=n.y+n.height}function Ti(e){var t=e.initial,n=document.createElement("div");n.setAttribute(dr,"true");var a=Bn({client:t});Object.assign(n.style,Vn(Vn({backgroundColor:"transparent",position:"fixed",padding:0,margin:0,boxSizing:"border-box"},Kn({clientRect:a})),{},{pointerEvents:"auto",zIndex:vr})),document.body.appendChild(n);var s=Ke.bind(window,{type:"pointermove",listener:function(f){var v={x:f.clientX,y:f.clientY};a=Bn({client:v}),Object.assign(n.style,Kn({clientRect:a}))},options:{capture:!0}});return function(f){var v=f.current;if(s(),bi({client:v,clientRect:a})){n.remove();return}function h(){g(),n.remove()}var g=Ke.bindAll(window,[{type:"pointerdown",listener:h},{type:"pointermove",listener:h},{type:"focusin",listener:h},{type:"focusout",listener:h},{type:"dragstart",listener:h},{type:"dragenter",listener:h},{type:"dragover",listener:h}],{capture:!0})}}function Ei(){var e=null;function t(){return e=null,Ke.bind(window,{type:"pointermove",listener:function(s){e={x:s.clientX,y:s.clientY}},options:{capture:!0}})}function n(){var a=null;return function(l){var f=l.eventName,v=l.payload;if(f==="onDragStart"){var h=v.location.initial.input,g=e??{x:h.clientX,y:h.clientY};a=Ti({initial:g})}if(f==="onDrop"){var E,T=v.location.current.input;(E=a)===null||E===void 0||E({current:{x:T.clientX,y:T.clientY}}),a=null,e=null}}}return{bindEvents:t,getOnPostDispatch:n}}function ki(e){if(Array.isArray(e))return mn(e)}function Oi(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pr(e){return ki(e)||Oi(e)||cr(e)||wi()}function Ze(e){var t=null;return function(){if(!t){for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];var f=e.apply(this,s);t={result:f}}return t.result}}var Ii=Ze(function(){return navigator.userAgent.includes("Firefox")}),wt=Ze(function(){var t=navigator,n=t.userAgent;return n.includes("AppleWebKit")&&!n.includes("Chrome")}),yn={isLeavingWindow:Symbol("leaving"),isEnteringWindow:Symbol("entering")};function Si(e){var t=e.dragLeave;return wt()?t.hasOwnProperty(yn.isLeavingWindow):!1}(function(){if(typeof window>"u"||!wt())return;function t(){return{enterCount:0,isOverWindow:!1}}var n=t();function a(){n=t()}Ke.bindAll(window,[{type:"dragstart",listener:function(){n.enterCount=0,n.isOverWindow=!0}},{type:"drop",listener:a},{type:"dragend",listener:a},{type:"dragenter",listener:function(l){!n.isOverWindow&&n.enterCount===0&&(l[yn.isEnteringWindow]=!0),n.isOverWindow=!0,n.enterCount++}},{type:"dragleave",listener:function(l){n.enterCount--,n.isOverWindow&&n.enterCount===0&&(l[yn.isLeavingWindow]=!0,n.isOverWindow=!1)}}],{capture:!0})})();function Ai(e){return"nodeName"in e}function _i(e){return Ai(e)&&e.ownerDocument!==document}function Di(e){var t=e.dragLeave,n=t.type,a=t.relatedTarget;return n!=="dragleave"?!1:wt()?Si({dragLeave:t}):a==null?!0:Ii()?_i(a):a instanceof HTMLIFrameElement}function Pi(e){var t=e.onDragEnd;return[{type:"pointermove",listener:function(){var n=0;return function(){if(n<20){n++;return}t()}}()},{type:"pointerdown",listener:t}]}function ft(e){return{altKey:e.altKey,button:e.button,buttons:e.buttons,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY}}var xi=function(t){var n=[],a=null,s=function(){for(var f=arguments.length,v=new Array(f),h=0;h<f;h++)v[h]=arguments[h];n=v,!a&&(a=requestAnimationFrame(function(){a=null,t.apply(void 0,n)}))};return s.cancel=function(){a&&(cancelAnimationFrame(a),a=null)},s},hn=xi(function(e){return e()}),Wt=function(){var e=null;function t(a){var s=requestAnimationFrame(function(){e=null,a()});e={frameId:s,fn:a}}function n(){e&&(cancelAnimationFrame(e.frameId),e.fn(),e=null)}return{schedule:t,flush:n}}();function Ci(e){var t=e.source,n=e.initial,a=e.dispatchEvent,s={dropTargets:[]};function l(v){a(v),s={dropTargets:v.payload.location.current.dropTargets}}var f={start:function(h){var g=h.nativeSetDragImage,E={current:n,previous:s,initial:n};l({eventName:"onGenerateDragPreview",payload:{source:t,location:E,nativeSetDragImage:g}}),Wt.schedule(function(){l({eventName:"onDragStart",payload:{source:t,location:E}})})},dragUpdate:function(h){var g=h.current;Wt.flush(),hn.cancel(),l({eventName:"onDropTargetChange",payload:{source:t,location:{initial:n,previous:s,current:g}}})},drag:function(h){var g=h.current;hn(function(){Wt.flush();var E={initial:n,previous:s,current:g};l({eventName:"onDrag",payload:{source:t,location:E}})})},drop:function(h){var g=h.current,E=h.updatedSourcePayload;Wt.flush(),hn.cancel(),l({eventName:"onDrop",payload:{source:E??t,location:{current:g,previous:s,initial:n}}})}};return f}var bn={isActive:!1};function gr(){return!bn.isActive}function Ni(e){return e.dataTransfer?e.dataTransfer.setDragImage.bind(e.dataTransfer):null}function Mi(e){var t=e.current,n=e.next;if(t.length!==n.length)return!0;for(var a=0;a<t.length;a++)if(t[a].element!==n[a].element)return!0;return!1}function Ri(e){var t=e.event,n=e.dragType,a=e.getDropTargetsOver,s=e.dispatchEvent;if(!gr())return;var l=Li({event:t,dragType:n,getDropTargetsOver:a});bn.isActive=!0;var f={current:l};vn({event:t,current:l.dropTargets});var v=Ci({source:n.payload,dispatchEvent:s,initial:l});function h(m){var d=Mi({current:f.current.dropTargets,next:m.dropTargets});f.current=m,d&&v.dragUpdate({current:f.current})}function g(m){var d=ft(m),b=fr(m.target)?hr({x:d.clientX,y:d.clientY}):m.target,w=a({target:b,input:d,source:n.payload,current:f.current.dropTargets});w.length&&(m.preventDefault(),vn({event:m,current:w})),h({dropTargets:w,input:d})}function E(){f.current.dropTargets.length&&h({dropTargets:[],input:f.current.input}),v.drop({current:f.current,updatedSourcePayload:null}),T()}function T(){bn.isActive=!1,I()}var I=Ke.bindAll(window,[{type:"dragover",listener:function(d){g(d),v.drag({current:f.current})}},{type:"dragenter",listener:g},{type:"dragleave",listener:function(d){Di({dragLeave:d})&&(h({input:f.current.input,dropTargets:[]}),n.startedFrom==="external"&&E())}},{type:"drop",listener:function(d){if(f.current={dropTargets:f.current.dropTargets,input:ft(d)},!f.current.dropTargets.length){E();return}d.preventDefault(),vn({event:d,current:f.current.dropTargets}),v.drop({current:f.current,updatedSourcePayload:n.type==="external"?n.getDropPayload(d):null}),T()}},{type:"dragend",listener:function(d){f.current={dropTargets:f.current.dropTargets,input:ft(d)},E()}}].concat(pr(Pi({onDragEnd:E}))),{capture:!0});v.start({nativeSetDragImage:Ni(t)})}function vn(e){var t,n=e.event,a=e.current,s=(t=a[0])===null||t===void 0?void 0:t.dropEffect;s!=null&&n.dataTransfer&&(n.dataTransfer.dropEffect=s)}function Li(e){var t=e.event,n=e.dragType,a=e.getDropTargetsOver,s=ft(t);if(n.startedFrom==="external")return{input:s,dropTargets:[]};var l=a({input:s,source:n.payload,target:t.target,current:[]});return{input:s,dropTargets:l}}var Zn={canStart:gr,start:Ri},Tn=new Map;function Ui(e){var t=e.typeKey,n=e.mount,a=Tn.get(t);if(a)return a.usageCount++,a;var s={typeKey:t,unmount:n(),usageCount:1};return Tn.set(t,s),s}function Hi(e){var t=Ui(e);return function(){t.usageCount--,!(t.usageCount>0)&&(t.unmount(),Tn.delete(e.typeKey))}}function Zt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){t.forEach(function(s){return s()})}}function mr(e,t){var n=t.attribute,a=t.value;return e.setAttribute(n,a),function(){return e.removeAttribute(n)}}function Qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qn(Object(n),!0).forEach(function(a){Ot(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function pn(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ji(e))||t){n&&(e=n);var a=0,s=function(){};return{s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(g){throw g},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,f=!0,v=!1;return{s:function(){n=n.call(e)},n:function(){var g=n.next();return f=g.done,g},e:function(g){v=!0,l=g},f:function(){try{f||n.return==null||n.return()}finally{if(v)throw l}}}}function ji(e,t){if(e){if(typeof e=="string")return Jn(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jn(e,t):void 0}}function Jn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function gn(e){return e.slice(0).reverse()}function Fi(e){var t=e.typeKey,n=e.defaultDropEffect,a=new WeakMap,s="data-drop-target-for-".concat(t),l="[".concat(s,"]");function f(m){return a.set(m.element,m),function(){return a.delete(m.element)}}function v(m){var d=Zt(mr(m.element,{attribute:s,value:"true"}),f(m));return Ze(d)}function h(m){var d,b,w,D,k=m.source,P=m.target,M=m.input,H=m.result,x=H===void 0?[]:H;if(P==null)return x;if(!(P instanceof Element))return P instanceof Node?h({source:k,target:P.parentElement,input:M,result:x}):x;var j=P.closest(l);if(j==null)return x;var Y=a.get(j);if(Y==null)return x;var F={input:M,source:k,element:Y.element};if(Y.canDrop&&!Y.canDrop(F))return h({source:k,target:Y.element.parentElement,input:M,result:x});var G=(d=(b=Y.getData)===null||b===void 0?void 0:b.call(Y,F))!==null&&d!==void 0?d:{},X=(w=(D=Y.getDropEffect)===null||D===void 0?void 0:D.call(Y,F))!==null&&w!==void 0?w:n,z={data:G,element:Y.element,dropEffect:X,isActiveDueToStickiness:!1};return h({source:k,target:Y.element.parentElement,input:M,result:[].concat(pr(x),[z])})}function g(m){var d=m.eventName,b=m.payload,w=pn(b.location.current.dropTargets),D;try{for(w.s();!(D=w.n()).done;){var k,P=D.value,M=a.get(P.element),H=Fe(Fe({},b),{},{self:P});M==null||(k=M[d])===null||k===void 0||k.call(M,H)}}catch(x){w.e(x)}finally{w.f()}}var E={onGenerateDragPreview:g,onDrag:g,onDragStart:g,onDrop:g,onDropTargetChange:function(d){var b=d.payload,w=new Set(b.location.current.dropTargets.map(function(he){return he.element})),D=new Set,k=pn(b.location.previous.dropTargets),P;try{for(k.s();!(P=k.n()).done;){var M,H=P.value;D.add(H.element);var x=a.get(H.element),j=w.has(H.element),Y=Fe(Fe({},b),{},{self:H});if(x==null||(M=x.onDropTargetChange)===null||M===void 0||M.call(x,Y),!j){var F;x==null||(F=x.onDragLeave)===null||F===void 0||F.call(x,Y)}}}catch(he){k.e(he)}finally{k.f()}var G=pn(b.location.current.dropTargets),X;try{for(G.s();!(X=G.n()).done;){var z,ue,me=X.value;if(!D.has(me.element)){var Se=Fe(Fe({},b),{},{self:me}),oe=a.get(me.element);oe==null||(z=oe.onDropTargetChange)===null||z===void 0||z.call(oe,Se),oe==null||(ue=oe.onDragEnter)===null||ue===void 0||ue.call(oe,Se)}}}catch(he){G.e(he)}finally{G.f()}}};function T(m){E[m.eventName](m)}function I(m){var d=m.source,b=m.target,w=m.input,D=m.current,k=h({source:d,target:b,input:w});if(k.length>=D.length)return k;for(var P=gn(D),M=gn(k),H=[],x=0;x<P.length;x++){var j,Y=P[x],F=M[x];if(F!=null){H.push(F);continue}var G=H[x-1],X=P[x-1];if((G==null?void 0:G.element)!==(X==null?void 0:X.element))break;var z=a.get(Y.element);if(!z)break;var ue={input:w,source:d,element:z.element};if(z.canDrop&&!z.canDrop(ue)||!((j=z.getIsSticky)!==null&&j!==void 0&&j.call(z,ue)))break;H.push(Fe(Fe({},Y),{},{isActiveDueToStickiness:!0}))}return gn(H)}return{dropTargetForConsumers:v,getIsOver:I,dispatchEvent:T}}function Wi(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Yi(e))||t){n&&(e=n);var a=0,s=function(){};return{s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(g){throw g},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,f=!0,v=!1;return{s:function(){n=n.call(e)},n:function(){var g=n.next();return f=g.done,g},e:function(g){v=!0,l=g},f:function(){try{f||n.return==null||n.return()}finally{if(v)throw l}}}}function Yi(e,t){if(e){if(typeof e=="string")return $n(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$n(e,t):void 0}}function $n(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function Xi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?er(Object(n),!0).forEach(function(a){Ot(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):er(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function zi(){var e=new Set,t=null;function n(l){t&&(!l.canMonitor||l.canMonitor(t.canMonitorArgs))&&t.active.add(l)}function a(l){var f=Xi({},l);e.add(f),n(f);function v(){e.delete(f),t&&t.active.delete(f)}return Ze(v)}function s(l){var f=l.eventName,v=l.payload;if(f==="onGenerateDragPreview"){t={canMonitorArgs:{initial:v.location.initial,source:v.source},active:new Set};var h=Wi(e),g;try{for(h.s();!(g=h.n()).done;){var E=g.value;n(E)}}catch(w){h.e(w)}finally{h.f()}}if(t){for(var T=Array.from(t.active),I=0,m=T;I<m.length;I++){var d=m[I];if(t.active.has(d)){var b;(b=d[f])===null||b===void 0||b.call(d,v)}}f==="onDrop"&&(t.active.clear(),t=null)}}return{dispatchEvent:s,monitorForConsumers:a}}function qi(e){var t=e.typeKey,n=e.mount,a=e.dispatchEventToSource,s=e.onPostDispatch,l=e.defaultDropEffect,f=zi(),v=Fi({typeKey:t,defaultDropEffect:l});function h(T){a==null||a(T),v.dispatchEvent(T),f.dispatchEvent(T),s==null||s(T)}function g(T){var I=T.event,m=T.dragType;Zn.start({event:I,dragType:m,getDropTargetsOver:v.getIsOver,dispatchEvent:h})}function E(){function T(){var I={canStart:Zn.canStart,start:g};return n(I)}return Hi({typeKey:t,mount:T})}return{registerUsage:E,dropTarget:v.dropTargetForConsumers,monitor:f.monitorForConsumers}}var yr=Ze(function(){return navigator.userAgent.toLocaleLowerCase().includes("android")}),Vi="pdnd:android-fallback",tr="text/plain",Gi="text/uri-list",Bi="application/vnd.pdnd",qt=new WeakMap;function Ki(e){return qt.set(e.element,e),function(){qt.delete(e.element)}}var nr=Ei(),Sn=qi({typeKey:"element",defaultDropEffect:"move",mount:function(t){return Zt(nr.bindEvents(),Ke.bind(document,{type:"dragstart",listener:function(a){var s,l,f,v,h,g;if(t.canStart(a)&&!a.defaultPrevented&&a.dataTransfer){var E=a.target;if(!(E instanceof HTMLElement))return null;var T=qt.get(E);if(!T)return null;var I=ft(a),m={element:T.element,dragHandle:(s=T.dragHandle)!==null&&s!==void 0?s:null,input:I};if(T.canDrag&&!T.canDrag(m))return a.preventDefault(),null;if(T.dragHandle){var d=hr({x:I.clientX,y:I.clientY});if(!T.dragHandle.contains(d))return a.preventDefault(),null}var b=(l=(f=T.getInitialDataForExternal)===null||f===void 0?void 0:f.call(T,m))!==null&&l!==void 0?l:null;if(b)for(var w=0,D=Object.entries(b);w<D.length;w++){var k=In(D[w],2),P=k[0],M=k[1];a.dataTransfer.setData(P,M??"")}yr()&&!a.dataTransfer.types.includes(tr)&&!a.dataTransfer.types.includes(Gi)&&a.dataTransfer.setData(tr,Vi),a.dataTransfer.setData(Bi,"");var H={element:T.element,dragHandle:(v=T.dragHandle)!==null&&v!==void 0?v:null,data:(h=(g=T.getInitialData)===null||g===void 0?void 0:g.call(T,m))!==null&&h!==void 0?h:{}},x={type:"element",payload:H,startedFrom:"internal"};t.start({event:a,dragType:x})}}}))},dispatchEventToSource:function(t){var n,a,s=t.eventName,l=t.payload;(n=qt.get(l.source.element))===null||n===void 0||(a=n[s])===null||a===void 0||a.call(n,l)},onPostDispatch:nr.getOnPostDispatch()}),Zi=Sn.dropTarget,br=Sn.monitor;function Qi(e){var t=Zt(Sn.registerUsage(),Ki(e),mr(e.element,{attribute:"draggable",value:"true"}));return Ze(t)}function rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function ir(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rr(Object(n),!0).forEach(function(a){Ot(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}var Ji={top:function(t,n){return Math.abs(n.y-t.top)},right:function(t,n){return Math.abs(t.right-n.x)},bottom:function(t,n){return Math.abs(t.bottom-n.y)},left:function(t,n){return Math.abs(n.x-t.left)}},Tr=Symbol("closestEdge");function $i(e,t){var n,a,s=t.element,l=t.input,f=t.allowedEdges,v={x:l.clientX,y:l.clientY},h=s.getBoundingClientRect(),g=f.map(function(T){return{edge:T,value:Ji[T](h,v)}}),E=(n=(a=g.sort(function(T,I){return T.value-I.value})[0])===null||a===void 0?void 0:a.edge)!==null&&n!==void 0?n:null;return ir(ir({},e),{},Ot({},Tr,E))}function En(e){var t;return(t=e[Tr])!==null&&t!==void 0?t:null}function ea(e){var t=e.list,n=e.startIndex,a=e.finishIndex;if(n===-1||a===-1)return Array.from(t);var s=Array.from(t),l=s.splice(n,1),f=In(l,1),v=f[0];return s.splice(a,0,v),s}function ta(e){var t=e.startIndex,n=e.closestEdgeOfTarget,a=e.indexOfTarget,s=e.axis;if(t===-1||a===-1||t===a)return t;if(n==null)return a;var l=n==="bottom"||s==="horizontal",f=t<a;return f?l?a:a-1:l?a+1:a}function na(e){var t=e.list,n=e.startIndex,a=e.closestEdgeOfTarget,s=e.indexOfTarget,l=e.axis;return ea({list:t,startIndex:n,finishIndex:ta({closestEdgeOfTarget:a,startIndex:n,indexOfTarget:s,axis:l})})}var ra={large:700};function ia(e){e.animate([{backgroundColor:"var(--ds-background-selected, #E9F2FF)"},{}],{duration:ra.large,easing:"cubic-bezier(0.25, 0.1, 0.25, 1.0)",iterations:1})}function aa(){return{x:0,y:0}}function oa(e){var t=e.render,n=e.nativeSetDragImage,a=e.getOffset,s=a===void 0?aa:a,l=document.createElement("div");Object.assign(l.style,{position:"fixed",top:0,left:0,zIndex:vr,pointerEvents:"none"}),document.body.append(l);var f=t({container:l});queueMicrotask(function(){var g=s({container:l});if(wt()){var E=l.getBoundingClientRect();if(E.width===0)return;l.style.left="-".concat(E.width-1e-4,"px")}n==null||n(l,g.x,g.y)});function v(){h(),f==null||f(),document.body.removeChild(l)}var h=br({onDragStart:v,onDrop:v})}var sa=Ze(function(){return wt()&&"ontouchend"in document}),la=function(t){var n=t.container,a=n.getBoundingClientRect();return{x:a.width/2,y:a.height/2}};function ua(e){return function(n){var a=n.container;if(sa()||yr())return la({container:a});Object.assign(a.style,{borderInlineStart:"".concat(e.x," solid transparent"),borderTop:"".concat(e.y," solid transparent")});var s=window.getComputedStyle(a);if(s.direction==="rtl"){var l=a.getBoundingClientRect();return{x:l.width,y:0}}return{x:0,y:0}}}var ca="Invariant failed";function da(e,t){if(!e)throw new Error(ca)}var fa=re("<div></div>");function ha(e,t){let n=ke(t,"edge",3,"top"),a=ke(t,"gap",3,"0.5rem");const s=2,l=8,f=(s-l)/2,v=`calc(-0.5 * (${a()} + ${s}px))`;var h=fa();let g;fe(E=>{Bt(h,1,On(["drop-indicator",`${n()}`]),"svelte-m9rsq0"),g=wn(h,"",g,E)},[()=>({"--line-thickness":`${s}px`,"--line-offset":v,"--terminal-size":`${l}px`,"--terminal-radius":`${l/2}px`,"--negative-terminal-size":`-${l}px`,"--offset-terminal":`${f}px`,position:"absolute","pointer-events":"none"})]),Z(e,h)}var pt,gt,mt,Ne,yt,bt,Tt,Vt,Er;class va{constructor(){Ce(this,Vt);Ce(this,pt,q(!0));Ce(this,gt,q(Ee(new Map)));Ce(this,mt,q(Ee(new Map)));Ce(this,Ne,q(Ee(new Map)));Ce(this,yt,q(null));Ce(this,bt,q(Ee(lr.url.searchParams.has("debug")||Yt.debugging)));Ce(this,Tt,!1)}get single(){return c(ne(this,pt))}set single(t){N(ne(this,pt),t,!0)}get debug(){return c(ne(this,bt))}set debug(t){N(ne(this,bt),t,!0)}getSetting(t){return ne(this,Tt)||Wn(this,Vt,Er).call(this),c(ne(this,gt)).get(t)}setSetting(t,n){return this.debug&&console.debug({setting:{[t.toString()]:n}}),c(ne(this,gt)).set(t,n)}register(t,n){const{itemId:a}=n??{};this.debug&&console.debug({registering:{itemId:a,name:t.name}}),a==null?c(ne(this,mt)).set(t.name,t):(c(ne(this,Ne)).get(a)==null&&c(ne(this,Ne)).set(a,{}),this.retrieve(t.name,{itemId:a})!=null&&this.debug&&console.warn(`Redefining function: ${t.name} for item: ${a}`),c(ne(this,Ne)).get(a)[t.name]=t)}retrieve(t,n){var f;const{itemId:a,useActive:s}=n??{};if(t==null&&a==null&&s!=!0)throw new Error("At least one of `name`, `itemId`, or `useActive` required.");const l=s?this.activeId:a;return t==null?(this.debug&&console.debug({retrieving:{itemId:a,useActive:s}}),c(ne(this,Ne)).get(l)):a==null&&s!=!0?(this.debug&&console.debug({retrieving:{name:t}}),c(ne(this,mt)).get(t)):(f=c(ne(this,Ne)).get(l))==null?void 0:f[t]}retrieveAll(t){return c(ne(this,Ne)).values().map(n=>n[t]).filter(Boolean)}any(t){const n=this.retrieveAll(t);let a=!1;for(const s of n)if(a||(a=s()),a)break;return a}all(t){const n=this.retrieveAll(t);let a=!0;for(const s of n)if(a&&(a=s()),!a)break;return a}set activeId(t){this.debug&&console.debug({activeId:t}),N(ne(this,yt),t,!0)}get activeId(){return c(ne(this,yt))}}pt=new WeakMap,gt=new WeakMap,mt=new WeakMap,Ne=new WeakMap,yt=new WeakMap,bt=new WeakMap,Tt=new WeakMap,Vt=new WeakSet,Er=function(){Fn(this,Tt,!0),this.single=!0};const C=new va;var pa=re('<img class="svelte-re623r"/>'),ga=re("<audio controls><source/></audio>"),ma=re('<video controls class="svelte-re623r"><source/> <track kind="captions"/></video>',2),ya=re(`<object class="svelte-re623r"><p>Your browser can't render an <code>&lt;object&gt;</code> of type <q> </q>.</p></object>`);function An(e,t){Me(t,!0);const{debug:n}=C;let a=ke(t,"content",15);const{cid:s,title:l,type:f}=t.datum;let v=kn(()=>{if(f==null)return"undefined";const[I,m,d]=Array.from(f.match(/^([^/]+)\/(.*)$/)??[]);return n&&console.debug({klass:m,ext:d}),d!=="svg+xml"?m:"object"});var h=cn(),g=tt(h);{var E=I=>{var m=pa();ve(m,d=>a(d),()=>a()),fe(d=>{K(m,"id",s),K(m,"src",d),K(m,"alt",l)},[()=>Ft({cid:s})]),Z(I,m)},T=I=>{var m=cn(),d=tt(m);{var b=D=>{var k=ga();K(k,"tabindex",-1);var P=L(k);R(k),ve(k,M=>a(M),()=>a()),fe(M=>{K(k,"id",s),K(P,"src",M),K(P,"type",f)},[()=>Ft({cid:s})]),Z(D,k)},w=D=>{var k=cn(),P=tt(k);{var M=x=>{var j=ma();K(j,"tabindex",-1);var Y=L(j);ge(2),R(j),ve(j,F=>a(F),()=>a()),fe(F=>{K(j,"id",s),K(Y,"src",F),K(Y,"type",f)},[()=>Ft({cid:s})]),Z(x,j)},H=x=>{var j=ya(),Y=L(j),F=V(L(Y),3),G=L(F,!0);R(F),ge(),R(Y),R(j),ve(j,X=>a(X),()=>a()),fe(X=>{K(j,"id",s),K(j,"data",X),K(j,"title",l),K(j,"type",f),rt(G,f)},[()=>Ft({cid:s})]),Z(x,j)};Be(P,x=>{c(v)==="video"?x(M):x(H,!1)},!0)}Z(D,k)};Be(d,D=>{c(v)==="audio"?D(b):D(w,!1)},!0)}Z(I,m)};Be(g,I=>{c(v)==="image"?I(E):I(T,!1)})}Z(e,h),Re()}var ba=(e,t)=>{var n;return(n=t())==null?void 0:n.close()},Ta=(e,t)=>{var n;return(n=t())==null?void 0:n.close()},Ea=(e,t,n)=>{const a=new CustomEvent("datum-delete",{detail:{id:t.datum.id},bubbles:!0});n().dispatchEvent(a)},ka=re('<dialog><h1> </h1> <button id="x" commandfor="close" class="svelte-1dmd0h1">⨯</button> <form class="svelte-1dmd0h1"><!> <nav class="svelte-1dmd0h1"><button id="cancel" type="button" commandfor="close" class="svelte-1dmd0h1"><u>C</u>ancel</button> <button id="delete" class="svelte-1dmd0h1"><u>R</u>emove</button></nav></form></dialog>');function Oa(e,t){Me(t,!0);let n=ke(t,"handle",15,null),a=q(null);var s=ka(),l=L(s),f=L(l);R(l);var v=V(l,2);v.__click=[ba,n];var h=V(v,2),g=L(h);An(g,{get datum(){return t.datum}});var E=V(g,2),T=L(E);T.__click=[Ta,n];var I=V(T,2);I.__click=[Ea,t,n],ve(I,m=>N(a,m),()=>c(a)),R(E),R(h),R(s),ve(s,m=>n(m),()=>n()),fe(()=>rt(f,`Delete ${t.datum.title??""}?`)),nt("open",s,()=>{console.debug({opened:n()}),zt().then(()=>{var m;return(m=c(a))==null?void 0:m.focus()})}),nt("submit",h,m=>m.preventDefault()),Z(e,s),Re()}Et(["click"]);var kr={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(e){(function(t,n,a,s){var l=["","webkit","Moz","MS","ms","o"],f=n.createElement("div"),v="function",h=Math.round,g=Math.abs,E=Date.now;function T(r,i,o){return setTimeout(P(r,o),i)}function I(r,i,o){return Array.isArray(r)?(m(r,o[i],o),!0):!1}function m(r,i,o){var u;if(r)if(r.forEach)r.forEach(i,o);else if(r.length!==s)for(u=0;u<r.length;)i.call(o,r[u],u,r),u++;else for(u in r)r.hasOwnProperty(u)&&i.call(o,r[u],u,r)}function d(r,i,o){var u="DEPRECATED METHOD: "+i+`
`+o+` AT 
`;return function(){var p=new Error("get-stack-trace"),O=p&&p.stack?p.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",U=t.console&&(t.console.warn||t.console.log);return U&&U.call(t.console,u,O),r.apply(this,arguments)}}var b;typeof Object.assign!="function"?b=function(i){if(i===s||i===null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(i),u=1;u<arguments.length;u++){var p=arguments[u];if(p!==s&&p!==null)for(var O in p)p.hasOwnProperty(O)&&(o[O]=p[O])}return o}:b=Object.assign;var w=d(function(i,o,u){for(var p=Object.keys(o),O=0;O<p.length;)(!u||u&&i[p[O]]===s)&&(i[p[O]]=o[p[O]]),O++;return i},"extend","Use `assign`."),D=d(function(i,o){return w(i,o,!0)},"merge","Use `assign`.");function k(r,i,o){var u=i.prototype,p;p=r.prototype=Object.create(u),p.constructor=r,p._super=u,o&&b(p,o)}function P(r,i){return function(){return r.apply(i,arguments)}}function M(r,i){return typeof r==v?r.apply(i&&i[0]||s,i):r}function H(r,i){return r===s?i:r}function x(r,i,o){m(G(i),function(u){r.addEventListener(u,o,!1)})}function j(r,i,o){m(G(i),function(u){r.removeEventListener(u,o,!1)})}function Y(r,i){for(;r;){if(r==i)return!0;r=r.parentNode}return!1}function F(r,i){return r.indexOf(i)>-1}function G(r){return r.trim().split(/\s+/g)}function X(r,i,o){if(r.indexOf&&!o)return r.indexOf(i);for(var u=0;u<r.length;){if(o&&r[u][o]==i||!o&&r[u]===i)return u;u++}return-1}function z(r){return Array.prototype.slice.call(r,0)}function ue(r,i,o){for(var u=[],p=[],O=0;O<r.length;){var U=r[O][i];X(p,U)<0&&u.push(r[O]),p[O]=U,O++}return u=u.sort(function(ae,de){return ae[i]>de[i]}),u}function me(r,i){for(var o,u,p=i[0].toUpperCase()+i.slice(1),O=0;O<l.length;){if(o=l[O],u=o?o+p:i,u in r)return u;O++}return s}var Se=1;function oe(){return Se++}function he(r){var i=r.ownerDocument||r;return i.defaultView||i.parentWindow||t}var Qe=/mobile|tablet|ip(ad|hone|od)|android/i,A="ontouchstart"in t,Q=me(t,"PointerEvent")!==s,ce=A&&Qe.test(navigator.userAgent),ee="touch",We="pen",Ye="mouse",It="kinect",St=25,J=1,Oe=2,B=4,se=8,Le=1,Ue=2,Ae=4,Xe=8,_e=16,pe=Ue|Ae,be=Xe|_e,it=pe|be,at=["x","y"],ze=["clientX","clientY"];function le(r,i){var o=this;this.manager=r,this.callback=i,this.element=r.element,this.target=r.options.inputTarget,this.domHandler=function(u){M(r.options.enable,[r])&&o.handler(u)},this.init()}le.prototype={handler:function(){},init:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(he(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&j(this.element,this.evEl,this.domHandler),this.evTarget&&j(this.target,this.evTarget,this.domHandler),this.evWin&&j(he(this.element),this.evWin,this.domHandler)}};function At(r){var i,o=r.options.inputClass;return o?i=o:Q?i=$t:ce?i=Nt:A?i=en:i=W,new i(r,_t)}function _t(r,i,o){var u=o.pointers.length,p=o.changedPointers.length,O=i&J&&u-p===0,U=i&(B|se)&&u-p===0;o.isFirst=!!O,o.isFinal=!!U,O&&(r.session={}),o.eventType=i,ot(r,o),r.emit("hammer.input",o),r.recognize(o),r.session.prevInput=o}function ot(r,i){var o=r.session,u=i.pointers,p=u.length;o.firstInput||(o.firstInput=Pt(i)),p>1&&!o.firstMultiple?o.firstMultiple=Pt(i):p===1&&(o.firstMultiple=!1);var O=o.firstInput,U=o.firstMultiple,te=U?U.center:O.center,ae=i.center=xt(u);i.timeStamp=E(),i.deltaTime=i.timeStamp-O.timeStamp,i.angle=lt(te,ae),i.distance=Ve(te,ae),Dt(o,i),i.offsetDirection=st(i.deltaX,i.deltaY);var de=Ct(i.deltaTime,i.deltaX,i.deltaY);i.overallVelocityX=de.x,i.overallVelocityY=de.y,i.overallVelocity=g(de.x)>g(de.y)?de.x:de.y,i.scale=U?Jt(U.pointers,u):1,i.rotation=U?Qt(U.pointers,u):0,i.maxPointers=o.prevInput?i.pointers.length>o.prevInput.maxPointers?i.pointers.length:o.prevInput.maxPointers:i.pointers.length,qe(o,i);var Ie=r.element;Y(i.srcEvent.target,Ie)&&(Ie=i.srcEvent.target),i.target=Ie}function Dt(r,i){var o=i.center,u=r.offsetDelta||{},p=r.prevDelta||{},O=r.prevInput||{};(i.eventType===J||O.eventType===B)&&(p=r.prevDelta={x:O.deltaX||0,y:O.deltaY||0},u=r.offsetDelta={x:o.x,y:o.y}),i.deltaX=p.x+(o.x-u.x),i.deltaY=p.y+(o.y-u.y)}function qe(r,i){var o=r.lastInterval||i,u=i.timeStamp-o.timeStamp,p,O,U,te;if(i.eventType!=se&&(u>St||o.velocity===s)){var ae=i.deltaX-o.deltaX,de=i.deltaY-o.deltaY,Ie=Ct(u,ae,de);O=Ie.x,U=Ie.y,p=g(Ie.x)>g(Ie.y)?Ie.x:Ie.y,te=st(ae,de),r.lastInterval=i}else p=o.velocity,O=o.velocityX,U=o.velocityY,te=o.direction;i.velocity=p,i.velocityX=O,i.velocityY=U,i.direction=te}function Pt(r){for(var i=[],o=0;o<r.pointers.length;)i[o]={clientX:h(r.pointers[o].clientX),clientY:h(r.pointers[o].clientY)},o++;return{timeStamp:E(),pointers:i,center:xt(i),deltaX:r.deltaX,deltaY:r.deltaY}}function xt(r){var i=r.length;if(i===1)return{x:h(r[0].clientX),y:h(r[0].clientY)};for(var o=0,u=0,p=0;p<i;)o+=r[p].clientX,u+=r[p].clientY,p++;return{x:h(o/i),y:h(u/i)}}function Ct(r,i,o){return{x:i/r||0,y:o/r||0}}function st(r,i){return r===i?Le:g(r)>=g(i)?r<0?Ue:Ae:i<0?Xe:_e}function Ve(r,i,o){o||(o=at);var u=i[o[0]]-r[o[0]],p=i[o[1]]-r[o[1]];return Math.sqrt(u*u+p*p)}function lt(r,i,o){o||(o=at);var u=i[o[0]]-r[o[0]],p=i[o[1]]-r[o[1]];return Math.atan2(p,u)*180/Math.PI}function Qt(r,i){return lt(i[1],i[0],ze)+lt(r[1],r[0],ze)}function Jt(r,i){return Ve(i[0],i[1],ze)/Ve(r[0],r[1],ze)}var y={mousedown:J,mousemove:Oe,mouseup:B},S="mousedown",_="mousemove mouseup";function W(){this.evEl=S,this.evWin=_,this.pressed=!1,le.apply(this,arguments)}k(W,le,{handler:function(i){var o=y[i.type];o&J&&i.button===0&&(this.pressed=!0),o&Oe&&i.which!==1&&(o=B),this.pressed&&(o&B&&(this.pressed=!1),this.callback(this.manager,o,{pointers:[i],changedPointers:[i],pointerType:Ye,srcEvent:i}))}});var $={pointerdown:J,pointermove:Oe,pointerup:B,pointercancel:se,pointerout:se},ie={2:ee,3:We,4:Ye,5:It},De="pointerdown",Je="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(De="MSPointerDown",Je="MSPointerMove MSPointerUp MSPointerCancel");function $t(){this.evEl=De,this.evWin=Je,le.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}k($t,le,{handler:function(i){var o=this.store,u=!1,p=i.type.toLowerCase().replace("ms",""),O=$[p],U=ie[i.pointerType]||i.pointerType,te=U==ee,ae=X(o,i.pointerId,"pointerId");O&J&&(i.button===0||te)?ae<0&&(o.push(i),ae=o.length-1):O&(B|se)&&(u=!0),!(ae<0)&&(o[ae]=i,this.callback(this.manager,O,{pointers:o,changedPointers:[i],pointerType:U,srcEvent:i}),u&&o.splice(ae,1))}});var Or={touchstart:J,touchmove:Oe,touchend:B,touchcancel:se},wr="touchstart",Ir="touchstart touchmove touchend touchcancel";function _n(){this.evTarget=wr,this.evWin=Ir,this.started=!1,le.apply(this,arguments)}k(_n,le,{handler:function(i){var o=Or[i.type];if(o===J&&(this.started=!0),!!this.started){var u=Sr.call(this,i,o);o&(B|se)&&u[0].length-u[1].length===0&&(this.started=!1),this.callback(this.manager,o,{pointers:u[0],changedPointers:u[1],pointerType:ee,srcEvent:i})}}});function Sr(r,i){var o=z(r.touches),u=z(r.changedTouches);return i&(B|se)&&(o=ue(o.concat(u),"identifier")),[o,u]}var Ar={touchstart:J,touchmove:Oe,touchend:B,touchcancel:se},_r="touchstart touchmove touchend touchcancel";function Nt(){this.evTarget=_r,this.targetIds={},le.apply(this,arguments)}k(Nt,le,{handler:function(i){var o=Ar[i.type],u=Dr.call(this,i,o);u&&this.callback(this.manager,o,{pointers:u[0],changedPointers:u[1],pointerType:ee,srcEvent:i})}});function Dr(r,i){var o=z(r.touches),u=this.targetIds;if(i&(J|Oe)&&o.length===1)return u[o[0].identifier]=!0,[o,o];var p,O,U=z(r.changedTouches),te=[],ae=this.target;if(O=o.filter(function(de){return Y(de.target,ae)}),i===J)for(p=0;p<O.length;)u[O[p].identifier]=!0,p++;for(p=0;p<U.length;)u[U[p].identifier]&&te.push(U[p]),i&(B|se)&&delete u[U[p].identifier],p++;if(te.length)return[ue(O.concat(te),"identifier"),te]}var Pr=2500,Dn=25;function en(){le.apply(this,arguments);var r=P(this.handler,this);this.touch=new Nt(this.manager,r),this.mouse=new W(this.manager,r),this.primaryTouch=null,this.lastTouches=[]}k(en,le,{handler:function(i,o,u){var p=u.pointerType==ee,O=u.pointerType==Ye;if(!(O&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(p)xr.call(this,o,u);else if(O&&Cr.call(this,u))return;this.callback(i,o,u)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function xr(r,i){r&J?(this.primaryTouch=i.changedPointers[0].identifier,Pn.call(this,i)):r&(B|se)&&Pn.call(this,i)}function Pn(r){var i=r.changedPointers[0];if(i.identifier===this.primaryTouch){var o={x:i.clientX,y:i.clientY};this.lastTouches.push(o);var u=this.lastTouches,p=function(){var O=u.indexOf(o);O>-1&&u.splice(O,1)};setTimeout(p,Pr)}}function Cr(r){for(var i=r.srcEvent.clientX,o=r.srcEvent.clientY,u=0;u<this.lastTouches.length;u++){var p=this.lastTouches[u],O=Math.abs(i-p.x),U=Math.abs(o-p.y);if(O<=Dn&&U<=Dn)return!0}return!1}var xn=me(f.style,"touchAction"),Cn=xn!==s,Nn="compute",Mn="auto",tn="manipulation",Ge="none",ut="pan-x",ct="pan-y",Mt=Mr();function nn(r,i){this.manager=r,this.set(i)}nn.prototype={set:function(r){r==Nn&&(r=this.compute()),Cn&&this.manager.element.style&&Mt[r]&&(this.manager.element.style[xn]=r),this.actions=r.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var r=[];return m(this.manager.recognizers,function(i){M(i.options.enable,[i])&&(r=r.concat(i.getTouchAction()))}),Nr(r.join(" "))},preventDefaults:function(r){var i=r.srcEvent,o=r.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var u=this.actions,p=F(u,Ge)&&!Mt[Ge],O=F(u,ct)&&!Mt[ct],U=F(u,ut)&&!Mt[ut];if(p){var te=r.pointers.length===1,ae=r.distance<2,de=r.deltaTime<250;if(te&&ae&&de)return}if(!(U&&O)&&(p||O&&o&pe||U&&o&be))return this.preventSrc(i)},preventSrc:function(r){this.manager.session.prevented=!0,r.preventDefault()}};function Nr(r){if(F(r,Ge))return Ge;var i=F(r,ut),o=F(r,ct);return i&&o?Ge:i||o?i?ut:ct:F(r,tn)?tn:Mn}function Mr(){if(!Cn)return!1;var r={},i=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(o){r[o]=i?t.CSS.supports("touch-action",o):!0}),r}var Rt=1,ye=2,$e=4,He=8,Pe=He,dt=16,we=32;function xe(r){this.options=b({},this.defaults,r||{}),this.id=oe(),this.manager=null,this.options.enable=H(this.options.enable,!0),this.state=Rt,this.simultaneous={},this.requireFail=[]}xe.prototype={defaults:{},set:function(r){return b(this.options,r),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(r){if(I(r,"recognizeWith",this))return this;var i=this.simultaneous;return r=Lt(r,this),i[r.id]||(i[r.id]=r,r.recognizeWith(this)),this},dropRecognizeWith:function(r){return I(r,"dropRecognizeWith",this)?this:(r=Lt(r,this),delete this.simultaneous[r.id],this)},requireFailure:function(r){if(I(r,"requireFailure",this))return this;var i=this.requireFail;return r=Lt(r,this),X(i,r)===-1&&(i.push(r),r.requireFailure(this)),this},dropRequireFailure:function(r){if(I(r,"dropRequireFailure",this))return this;r=Lt(r,this);var i=X(this.requireFail,r);return i>-1&&this.requireFail.splice(i,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(r){return!!this.simultaneous[r.id]},emit:function(r){var i=this,o=this.state;function u(p){i.manager.emit(p,r)}o<He&&u(i.options.event+Rn(o)),u(i.options.event),r.additionalEvent&&u(r.additionalEvent),o>=He&&u(i.options.event+Rn(o))},tryEmit:function(r){if(this.canEmit())return this.emit(r);this.state=we},canEmit:function(){for(var r=0;r<this.requireFail.length;){if(!(this.requireFail[r].state&(we|Rt)))return!1;r++}return!0},recognize:function(r){var i=b({},r);if(!M(this.options.enable,[this,i])){this.reset(),this.state=we;return}this.state&(Pe|dt|we)&&(this.state=Rt),this.state=this.process(i),this.state&(ye|$e|He|dt)&&this.tryEmit(i)},process:function(r){},getTouchAction:function(){},reset:function(){}};function Rn(r){return r&dt?"cancel":r&He?"end":r&$e?"move":r&ye?"start":""}function Ln(r){return r==_e?"down":r==Xe?"up":r==Ue?"left":r==Ae?"right":""}function Lt(r,i){var o=i.manager;return o?o.get(r):r}function Te(){xe.apply(this,arguments)}k(Te,xe,{defaults:{pointers:1},attrTest:function(r){var i=this.options.pointers;return i===0||r.pointers.length===i},process:function(r){var i=this.state,o=r.eventType,u=i&(ye|$e),p=this.attrTest(r);return u&&(o&se||!p)?i|dt:u||p?o&B?i|He:i&ye?i|$e:ye:we}});function Ut(){Te.apply(this,arguments),this.pX=null,this.pY=null}k(Ut,Te,{defaults:{event:"pan",threshold:10,pointers:1,direction:it},getTouchAction:function(){var r=this.options.direction,i=[];return r&pe&&i.push(ct),r&be&&i.push(ut),i},directionTest:function(r){var i=this.options,o=!0,u=r.distance,p=r.direction,O=r.deltaX,U=r.deltaY;return p&i.direction||(i.direction&pe?(p=O===0?Le:O<0?Ue:Ae,o=O!=this.pX,u=Math.abs(r.deltaX)):(p=U===0?Le:U<0?Xe:_e,o=U!=this.pY,u=Math.abs(r.deltaY))),r.direction=p,o&&u>i.threshold&&p&i.direction},attrTest:function(r){return Te.prototype.attrTest.call(this,r)&&(this.state&ye||!(this.state&ye)&&this.directionTest(r))},emit:function(r){this.pX=r.deltaX,this.pY=r.deltaY;var i=Ln(r.direction);i&&(r.additionalEvent=this.options.event+i),this._super.emit.call(this,r)}});function rn(){Te.apply(this,arguments)}k(rn,Te,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ge]},attrTest:function(r){return this._super.attrTest.call(this,r)&&(Math.abs(r.scale-1)>this.options.threshold||this.state&ye)},emit:function(r){if(r.scale!==1){var i=r.scale<1?"in":"out";r.additionalEvent=this.options.event+i}this._super.emit.call(this,r)}});function an(){xe.apply(this,arguments),this._timer=null,this._input=null}k(an,xe,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Mn]},process:function(r){var i=this.options,o=r.pointers.length===i.pointers,u=r.distance<i.threshold,p=r.deltaTime>i.time;if(this._input=r,!u||!o||r.eventType&(B|se)&&!p)this.reset();else if(r.eventType&J)this.reset(),this._timer=T(function(){this.state=Pe,this.tryEmit()},i.time,this);else if(r.eventType&B)return Pe;return we},reset:function(){clearTimeout(this._timer)},emit:function(r){this.state===Pe&&(r&&r.eventType&B?this.manager.emit(this.options.event+"up",r):(this._input.timeStamp=E(),this.manager.emit(this.options.event,this._input)))}});function on(){Te.apply(this,arguments)}k(on,Te,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ge]},attrTest:function(r){return this._super.attrTest.call(this,r)&&(Math.abs(r.rotation)>this.options.threshold||this.state&ye)}});function sn(){Te.apply(this,arguments)}k(sn,Te,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:pe|be,pointers:1},getTouchAction:function(){return Ut.prototype.getTouchAction.call(this)},attrTest:function(r){var i=this.options.direction,o;return i&(pe|be)?o=r.overallVelocity:i&pe?o=r.overallVelocityX:i&be&&(o=r.overallVelocityY),this._super.attrTest.call(this,r)&&i&r.offsetDirection&&r.distance>this.options.threshold&&r.maxPointers==this.options.pointers&&g(o)>this.options.velocity&&r.eventType&B},emit:function(r){var i=Ln(r.offsetDirection);i&&this.manager.emit(this.options.event+i,r),this.manager.emit(this.options.event,r)}});function Ht(){xe.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}k(Ht,xe,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[tn]},process:function(r){var i=this.options,o=r.pointers.length===i.pointers,u=r.distance<i.threshold,p=r.deltaTime<i.time;if(this.reset(),r.eventType&J&&this.count===0)return this.failTimeout();if(u&&p&&o){if(r.eventType!=B)return this.failTimeout();var O=this.pTime?r.timeStamp-this.pTime<i.interval:!0,U=!this.pCenter||Ve(this.pCenter,r.center)<i.posThreshold;this.pTime=r.timeStamp,this.pCenter=r.center,!U||!O?this.count=1:this.count+=1,this._input=r;var te=this.count%i.taps;if(te===0)return this.hasRequireFailures()?(this._timer=T(function(){this.state=Pe,this.tryEmit()},i.interval,this),ye):Pe}return we},failTimeout:function(){return this._timer=T(function(){this.state=we},this.options.interval,this),we},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Pe&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function je(r,i){return i=i||{},i.recognizers=H(i.recognizers,je.defaults.preset),new ln(r,i)}je.VERSION="2.0.7",je.defaults={domEvents:!1,touchAction:Nn,enable:!0,inputTarget:null,inputClass:null,preset:[[on,{enable:!1}],[rn,{enable:!1},["rotate"]],[sn,{direction:pe}],[Ut,{direction:pe},["swipe"]],[Ht],[Ht,{event:"doubletap",taps:2},["tap"]],[an]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Rr=1,Un=2;function ln(r,i){this.options=b({},je.defaults,i||{}),this.options.inputTarget=this.options.inputTarget||r,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=r,this.input=At(this),this.touchAction=new nn(this,this.options.touchAction),Hn(this,!0),m(this.options.recognizers,function(o){var u=this.add(new o[0](o[1]));o[2]&&u.recognizeWith(o[2]),o[3]&&u.requireFailure(o[3])},this)}ln.prototype={set:function(r){return b(this.options,r),r.touchAction&&this.touchAction.update(),r.inputTarget&&(this.input.destroy(),this.input.target=r.inputTarget,this.input.init()),this},stop:function(r){this.session.stopped=r?Un:Rr},recognize:function(r){var i=this.session;if(!i.stopped){this.touchAction.preventDefaults(r);var o,u=this.recognizers,p=i.curRecognizer;(!p||p&&p.state&Pe)&&(p=i.curRecognizer=null);for(var O=0;O<u.length;)o=u[O],i.stopped!==Un&&(!p||o==p||o.canRecognizeWith(p))?o.recognize(r):o.reset(),!p&&o.state&(ye|$e|He)&&(p=i.curRecognizer=o),O++}},get:function(r){if(r instanceof xe)return r;for(var i=this.recognizers,o=0;o<i.length;o++)if(i[o].options.event==r)return i[o];return null},add:function(r){if(I(r,"add",this))return this;var i=this.get(r.options.event);return i&&this.remove(i),this.recognizers.push(r),r.manager=this,this.touchAction.update(),r},remove:function(r){if(I(r,"remove",this))return this;if(r=this.get(r),r){var i=this.recognizers,o=X(i,r);o!==-1&&(i.splice(o,1),this.touchAction.update())}return this},on:function(r,i){if(r!==s&&i!==s){var o=this.handlers;return m(G(r),function(u){o[u]=o[u]||[],o[u].push(i)}),this}},off:function(r,i){if(r!==s){var o=this.handlers;return m(G(r),function(u){i?o[u]&&o[u].splice(X(o[u],i),1):delete o[u]}),this}},emit:function(r,i){this.options.domEvents&&Lr(r,i);var o=this.handlers[r]&&this.handlers[r].slice();if(!(!o||!o.length)){i.type=r,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var u=0;u<o.length;)o[u](i),u++}},destroy:function(){this.element&&Hn(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Hn(r,i){var o=r.element;if(o.style){var u;m(r.options.cssProps,function(p,O){u=me(o.style,O),i?(r.oldCssProps[u]=o.style[u],o.style[u]=p):o.style[u]=r.oldCssProps[u]||""}),i||(r.oldCssProps={})}}function Lr(r,i){var o=n.createEvent("Event");o.initEvent(r,!0,!0),o.gesture=i,i.target.dispatchEvent(o)}b(je,{INPUT_START:J,INPUT_MOVE:Oe,INPUT_END:B,INPUT_CANCEL:se,STATE_POSSIBLE:Rt,STATE_BEGAN:ye,STATE_CHANGED:$e,STATE_ENDED:He,STATE_RECOGNIZED:Pe,STATE_CANCELLED:dt,STATE_FAILED:we,DIRECTION_NONE:Le,DIRECTION_LEFT:Ue,DIRECTION_RIGHT:Ae,DIRECTION_UP:Xe,DIRECTION_DOWN:_e,DIRECTION_HORIZONTAL:pe,DIRECTION_VERTICAL:be,DIRECTION_ALL:it,Manager:ln,Input:le,TouchAction:nn,TouchInput:Nt,MouseInput:W,PointerEventInput:$t,TouchMouseInput:en,SingleTouchInput:_n,Recognizer:xe,AttrRecognizer:Te,Tap:Ht,Pan:Ut,Swipe:sn,Pinch:rn,Rotate:on,Press:an,on:x,off:j,each:m,merge:D,extend:w,assign:b,inherit:k,bindFn:P,prefixed:me});var Ur=typeof t<"u"?t:typeof self<"u"?self:{};Ur.Hammer=je,e.exports?e.exports=je:t[a]=je})(window,document,"Hammer")})(kr);var wa=kr.exports;const Ia=ti(wa);var Sa=()=>{},Aa=(e,t,n,a,s,l,f,v)=>{t&&console.debug({"zoom:onkeydown":{"🔑":e.key,isMedia:c(n)instanceof HTMLMediaElement}}),e.stopImmediatePropagation(),["z","Escape"].includes(e.key)?a().close():["Enter","ArrowDown"].includes(e.key)?(c(n)instanceof HTMLMediaElement&&c(n).pause(),s(1)):["ArrowUp"].includes(e.key)?(c(n)instanceof HTMLMediaElement&&c(n).pause(),s(-1)):["ArrowLeft"].includes(e.key)&&c(n)instanceof HTMLMediaElement?l({scale:-30}):["ArrowRight"].includes(e.key)&&c(n)instanceof HTMLMediaElement?l({scale:30}):[" "].includes(e.key)&&c(n)instanceof HTMLMediaElement?c(f)["play|pause"]():["m"].includes(e.key)&&c(n)instanceof HTMLMediaElement?c(f)["(un)?mute"]():["+","="].includes(e.key)?v({factor:1.2}):["-","_"].includes(e.key)?v({factor:.8}):["f"].includes(e.key)&&c(n)instanceof HTMLMediaElement?c(f).fullscreen():/^\d$/.test(e.key)?l({to:Number(e.key)/9-1e-5}):console.debug({"dialog:onkeypress":{"🔑":e.key}})},_a=re('<dialog class="zoom svelte-1fdhmlk"><h1 class="svelte-1fdhmlk"> </h1> <!></dialog>');function Da(e,t){Me(t,!0);let n=ke(t,"handle",15,null),a=q(null);const{debug:s}=C;function l({factor:d=1,scale:b=0}){if(!c(a))throw new Error("`content` is null.");const w=getComputedStyle(c(a));let D=Number(w.scale);isNaN(D)&&(D=1);let k=D*d+b;s&&console.debug({zoom:D,factor:d,scale:b,next:k}),c(a).style.scale=String(k),n().style.setProperty("--max-width","auto"),n().style.setProperty("--max-height","auto")}function f({factor:d=1,scale:b=0}){if(!c(a))throw new Error("`content` is null.");if(!(c(a)instanceof HTMLMediaElement))s&&console.warn("`content` is not a media element.");else{const w=c(a).volume;let D=w*d+b;s&&console.debug({volume:w,factor:d,scale:b,next:D})}}function v({factor:d=1,scale:b=0,to:w=null}){if(!c(a))throw new Error("`content` is null.");if(!(c(a)instanceof HTMLMediaElement))s&&console.warn("`content` is not a media element.");else{let D=c(a).currentTime;w!=null&&(w<1?D=w*c(a).duration:D=w);let k=D*d+b;s&&console.debug({time:D,to:w,factor:d,scale:b,next:k}),c(a).currentTime=k}}const h=kn(()=>{const b=Object.fromEntries(["play|pause","(un)?mute","fullscreen"].map(w=>[w,()=>{}]));if(!c(a))s&&console.warn("`content` is null.");else if(!(c(a)instanceof HTMLMediaElement))s&&console.warn("`content` is not a media element.");else{const w=c(a);Object.assign(b,{"play|pause":fn({condition:()=>w.paused,branch:{if:()=>w.play(),else:()=>w.pause()}}),"(un)?mute":fn({branch:{if:()=>w.muted=!w.muted}}),fullscreen:fn({condition:()=>!!document.fullscreenElement,branch:{if:()=>document.exitFullscreen(),else:()=>w.requestFullscreen()}})})}return b});function g(d){var D,k,P,M,H;let b=n();const w=d>=0;if(Math.abs(d)>0)do b=(k=(D=b.closest("li"))==null?void 0:D[w?"previousElementSibling":"nextElementSibling"])==null?void 0:k.querySelector(".zoom"),b||(b=(H=(M=(P=n().closest("li"))==null?void 0:P.parentElement)==null?void 0:M[w?"lastElementChild":"firstElementChild"])==null?void 0:H.querySelector(".zoom")),d+=w?-1:1;while(Math.abs(d)>0&&b);b&&(n().close(),b.showModal())}Gt(()=>{const d=new Ia(n());d.get("pinch").set({enable:!0}),d.on("swiperight",()=>{g(1)}),d.on("swipeleft",()=>{g(-1)}),d.on("panright",()=>{v({scale:2})}),d.on("panleft",()=>{v({scale:-2})}),d.on("panup",()=>{f({scale:20})}),d.on("pandown",()=>{f({scale:-20})}),d.on("pinchin",()=>{l({factor:.8})}),d.on("pinchout",()=>{l({factor:1.2})}),d.on("tap",()=>{var b,w;(w=(b=c(h))["play/pause"])==null||w.call(b)}),d.on("doubletap",()=>{n().close()})});var E=_a();E.__click=[Sa],E.__keydown=[Aa,s,a,n,g,v,h,l];var T=L(E),I=L(T,!0);R(T);var m=V(T,2);An(m,{get datum(){return t.datum},get content(){return c(a)},set content(d){N(a,d,!0)}}),R(E),ve(E,d=>n(d),()=>n()),fe(()=>rt(I,t.datum.title)),Z(e,E),Re()}Et(["click","keydown"]);var Pa=(e,t,n,a,s,l)=>{var f;c(t)||(e.preventDefault(),n&&console.debug({"summary:onclick":{"details.open":(f=c(a))==null?void 0:f.open,content:c(s),evt:e,"var:open":l()}}))},xa=(e,t)=>{c(t)||e.preventDefault()},Ca=re('<form class="svelte-27y2d5"><input name="title"/> <button type="submit">💾</button></form>'),Na=re('<details class="svelte-27y2d5"><summary class="svelte-27y2d5"><!></summary> <!></details> <!> <!>',1);function Ma(e,t){Me(t,!0);const{debug:n}=C;class a extends Error{constructor(){super("Not a media element.")}}let s=ke(t,"datum",15,null),l=ke(t,"open",15,!1),f=q(null),v=q(null);if(s()==null)throw new Error(" `null` `datum`.");const{id:h,cid:g,title:E,type:T}=s();let I=q(null),m=q(null),d=q(null),b=q(!1);Ee(E);const{single:w}=C;Gt(()=>{var A;t.index===0&&((A=c(f))==null||A.focus())});function D(A){const{play:Q=null,pitch:ce=null}=A??{};if(!(c(v)instanceof HTMLMediaElement)){if(ce===!1)return;throw n&&console.debug({rejecting:c(v)}),new a}(c(v).paused||Q===!0)&&Q!==!1?(n&&console.debug({playing:c(v)}),c(v).play()):(n&&console.debug({pausing:c(v)}),c(v).pause())}C.register(D,{itemId:h});function k(A){c(I)&&((!l()||(A==null?void 0:A.open)===!0)&&(A==null?void 0:A.open)!==!1?(n&&console.debug({opening:c(I)}),l(!0)):(n&&console.debug({closing:c(I)}),l(!1),D({play:!1,pitch:!1})))}C.register(k,{itemId:h});function P(){return l()}C.register(P,{itemId:h});function M(){var A,Q,ce,ee,We;n&&console.debug({zoom:{datum:s(),open:(A=c(d))==null?void 0:A.open,modal:(Q=c(d))==null?void 0:Q.matches(":modal")}}),(ce=c(d))!=null&&ce.matches(":modal")?(ee=c(d))==null||ee.close():(We=c(d))==null||We.showModal()}C.register(M,{itemId:h});function H(){var A;(A=c(m))==null||A.showModal()}C.register(H,{itemId:h});function x(){var A;(A=c(f))==null||A.focus()}C.register(x,{itemId:h});function j(A){N(b,A,!0)}C.register(j,{itemId:h});function Y(){return c(b)}C.register(Y,{itemId:h});function F(A){c(b)&&A.focus()}var G=Na(),X=tt(G),z=L(X);K(z,"tabindex",0),z.__click=[Pa,b,n,I,v,l],z.__keydown=[xa,b];var ue=L(z);{var me=A=>{var Q=Ca(),ce=L(Q);sr(ce),or(()=>qr(ce,()=>s().title,ee=>s(s().title=ee,!0))),ni(ce,ee=>F==null?void 0:F(ee)),ge(2),R(Q),nt("submit",Q,ee=>{ee.preventDefault(),N(b,!1)}),Z(A,Q)},Se=A=>{var Q=Wr();fe(ce=>rt(Q,`${s().title??""} ${ce??""}`),[()=>T!=null&&T.startsWith("video/")?"🎬":""]),Z(A,Q)};Be(ue,A=>{c(b)?A(me):A(Se,!1)})}R(z),ve(z,A=>N(f,A),()=>c(f));var oe=V(z,2);An(oe,{get datum(){return s()},get content(){return c(v)},set content(A){N(v,A,!0)}}),R(X),ve(X,A=>N(I,A),()=>c(I));var he=V(X,2);Oa(he,{get datum(){return s()},get handle(){return c(m)},set handle(A){N(m,A,!0)}});var Qe=V(he,2);Da(Qe,{get datum(){return s()},get handle(){return c(d)},set handle(A){N(d,A,!0)}}),fe(()=>{K(X,"name",`file${w?"":`-${t.index+1}`}`),K(X,"id",`deets-${t.index+1}`),K(z,"id",`sum-${t.index+1}`)}),ri("open","toggle",X,l,l),Z(e,G),Re()}Et(["click","keydown"]);var Ra=re('<div class="border-solid rounded p-2 bg-white dark:bg-white/25"> </div>');function ar(e,t){Me(t,!0);var n=Ra(),a=L(n,!0);R(n),fe(()=>rt(a,t.datum.title)),Z(e,n),Re()}var La=re("<li><!> <!></li>");function Ua(e,t){Me(t,!0);const{debug:n}=C,a={type:"idle"};let s=ke(t,"datum",15,null);if(s()==null)throw new Error("`null` `datum`.");let l=q(null),f=q(Ee(a)),v=q(!1);Gt(()=>(da(c(l)),Zt(Qi({element:c(l),getInitialData(){return s()},onGenerateDragPreview({nativeSetDragImage:d}){oa({nativeSetDragImage:d,getOffset:ua({x:"1rem",y:"0.5rem"}),render({container:b}){ar!=null&&(N(f,{type:"preview",container:b},!0),Yr(ar,{target:b,props:{datum:s()}}))}})},onDragStart(){N(f,{type:"is-dragging"},!0)},onDrop(){N(f,a,!0)}}),Zi({element:c(l),canDrop({source:d}){return d.element===c(l)?!1:t.isDatum(d.data)},getData({input:d}){return s()==null?{}:c(l)==null?s():$i(s(),{element:c(l),input:d,allowedEdges:["top","bottom"]})},getIsSticky(){return!0},onDragEnter({self:d}){const b=En(d.data);N(f,{type:"is-dragging-over",closestEdge:b},!0)},onDrag({self:d}){const b=En(d.data);N(f,{type:"is-dragging-over",closestEdge:b},!0)},onDragLeave(){N(f,a,!0)},onDrop(){N(f,a,!0)}}))));const h=()=>{var d;C.activeId=((d=s())==null?void 0:d.id)??null};var g=La();g.__focusin=h,g.__click=d=>{h(),C.any("isEditing")||(C.retrieve("focus",{useActive:!0})(),(!d.ctrlKey||!c(v))&&C.retrieve("toggleOpen",{useActive:!0})())};let E;var T=L(g);Ma(T,{get index(){return t.index},get datum(){return s()},set datum(d){s(d)},get open(){return c(v)},set open(d){N(v,d,!0)}});var I=V(T,2);{var m=d=>{ha(d,{get edge(){return c(f).closestEdge},gap:"0.5rem"})};Be(I,d=>{c(f).type==="is-dragging-over"&&c(f).closestEdge&&d(m)})}R(g),ve(g,d=>N(l,d),()=>c(l)),fe((d,b)=>{var w;K(g,"data-element-id",(w=s())==null?void 0:w.id),Bt(g,1,d,"svelte-1iaogg8"),E=wn(g,"",E,b)},[()=>{var d;return On((d=t.rowClasses)==null?void 0:d.call(t,c(f).type))},()=>{var d;return{"view-transition-name":`item-${(d=s())==null?void 0:d.id}`}}]),nt("keypress",g,()=>{}),Z(e,g),Re()}Et(["focusin","click"]);var Ha=re("<ol></ol>");function ja(e,t){Me(t,!0);let n=ke(t,"data",31,()=>Ee([])),a=ke(t,"history",27,()=>Ee([])),s=q(null);const l=v=>t.isDatum?t.isDatum(v):!0;Gt(()=>br({canMonitor({source:v}){return l(v.data)},onDrop({location:v,source:h}){const[g]=v.current.dropTargets;if(!g)return;const{data:E}=h,{data:T}=g;if(!l(E)||!l(T))return;const I=k=>n().findIndex(({id:P})=>P===k),m=I(E.id),d=I(T.id);if(d<0||m<0)return;const b=En(T),w=async()=>{var M;a().push([...n()]);const k={idx:m},P={idx:d};if(c(s)){for(const H of[k,P])H.elem=(M=c(s))==null?void 0:M.querySelector(`li:nth-of-type(${H.idx+1})`),H.color=getComputedStyle(H.elem).borderColor;k.elem&&k.color&&P.elem&&P.color&&(k.elem.style.borderColor=k.color,P.elem.style.borderColor=P.color)}n(na({list:n(),startIndex:m,indexOfTarget:d,closestEdgeOfTarget:b,axis:"vertical"})),await zt(),k.elem&&k.color&&P.elem&&P.color&&(k.elem.style.borderColor=P.color,P.elem.style.borderColor=k.color)};"startViewTransition"in document?document.startViewTransition(w):w();const D=document.querySelector(`[data-element-id="${E.id}"]`);D instanceof HTMLElement&&ia(D)}}));var f=Ha();ei(f,23,n,v=>v.id,(v,h,g)=>{Ua(v,{get rowClasses(){return t.rowClasses},isDatum:l,get index(){return c(g)},get datum(){return n()[c(g)]},set datum(E){n(n()[c(g)]=E,!0)}})}),R(f),ve(f,v=>N(s,v),()=>c(s)),fe(v=>Bt(f,1,v),[()=>On([...Array.from(t.listClasses??[]),"sortable-list"])]),Z(e,f),Re()}var Fa=re('<dialog><h1>Keyboard & Touch Navigation</h1> <form method="dialog"><button id="close" class="svelte-invagy">⨯</button> <ul class="svelte-invagy"><li><kbd>?</kbd>: (Display|Hide) these shortcuts.</li> <li><kbd>↑</kbd> | <kbd>↓</kbd>: Highlight the (previous|next) entry.</li> <li><kbd>enter</kbd>: (Expand|Collapse) the highlighted entry.</li> <li><kbd>e</kbd>: Edit the title of the highlighted entry.</li> <li><kbd>c</kbd>: Copy the highlighted entry to a different list.</li> <li><kbd>x</kbd> / <kbd>delete</kbd> / <kbd>backspace</kbd>: Delete the highlighted entry.</li> <li><kbd>s</kbd> | <kbd>n</kbd>: (Save|Load) the current configuration (to|from) Neo4j.</li> <li><kbd>j</kbd>: Jump to a specific entry number.</li> <li><kbd>m</kbd>, (<kbd>↑</kbd> | <kbd>↓</kbd>), <kbd>enter</kbd>: Move the selected entry (up|down).</li> <li><kbd>d</kbd> | <kbd>l</kbd>: (Down)?Load the congfiguration as JSON5.</li> <li><kbd>p</kbd> | <kbd>b</kbd>: (Publish|Load) a CBOR representation of the list (to|from) IPFS pub/sub.</li> <li><kbd>a</kbd>: Add local files to the list <em>(removing duplicates)</em>.</li> <li><kbd>v</kbd>: View all entries.</li> <li><kbd>h</kbd>: Hide all entries.</li> <li><kbd>u</kbd> | <kbd>r</kbd>: (Un|Re)do the last change.</li> <li><kbd><i>space</i></kbd>: <ul class="svelte-invagy"><li>If the highlighted entry is collapsed, expand it.</li> <li>If the expanded entry is media, (play|pause) it.</li> <li>If the expanded entry is not media, collapse it.</li></ul></li> <li><kbd>z</kbd>: Zoom in on the highlighted entry: <ul class="svelte-invagy"><li><kbd>z</kbd> / <kbd>escape</kbd>: Zoom out.</li> <li><kbd>↑</kbd> / <em>swipe</em> <kbd>↑</kbd>: View the previous entry.</li> <li><kbd>↓</kbd> / <em>swipe</em> <kbd>↓</kbd>: View the next entry.</li> <li><em>pan</em> <kbd>→</kbd> | <em>pan</em> <kbd>←</kbd>: Seek (forward|back) by 2 seconds.</li> <li><kbd>→</kbd> | <kbd>←</kbd>: Seek (forward|back) by ½ minute.</li> <li>(<kbd>→</kbd> | <kbd>←</kbd>) ≥ 2sec: Seek (forward|back) by 7½% for each additional 1½ second held.</li> <li><kbd>0</kbd>–<kbd>9</kbd>: Seek to 0–100% of the way through the media.</li> <li><kbd>ctrl</kbd> ➕ (<kbd>↑</kbd> | <kbd>↓</kbd>) / (<em>pan</em>)? (<kbd>↑</kbd> | <kbd>↓</kbd>): (In|De)crease the volume by 75%.</li> <li><kbd>space</kbd>: (Play|Pause) media.</li> <li><kbd>m</kbd>: (Un)?Mute media.</li> <li><kbd>f</kbd>: Toggle fullscreen.</li></ul></li></ul> <ul id="controls" class="svelte-invagy"><li><button id="ok">OK</button></li></ul></form></dialog>');function Wa(e,t){Me(t,!0);let n=ke(t,"handle",15,null);var a=Fa();ve(a,s=>n(s),()=>n()),Z(e,a),Re()}var Ya=re('<link rel="icon" class="svelte-kldhhd"/> <meta name="description" class="svelte-kldhhd"/>',1),Xa=(e,t)=>{var n;return(n=c(t))==null?void 0:n.click()},za=(e,t,n)=>t(e,n),qa=(e,t)=>{var n;return(n=c(t))==null?void 0:n.click()},Va=re('<span class="svelte-kldhhd"><section class="svelte-kldhhd"><p class="svelte-kldhhd">Loading…</p> <progress class="svelte-kldhhd"> </progress></section></span>'),Ga=re('<span class="svelte-kldhhd">Add Files</span>'),Ba=(e,t,n)=>t(e,n),Ka=re('<p class="svelte-kldhhd">No entries yet.</p>'),Za=re('<header class="svelte-kldhhd"><h1 class="svelte-kldhhd">Merge List</h1> <nav class="svelte-kldhhd"><ul id="controls" class="svelte-kldhhd"><li class="svelte-kldhhd"><button id="save" type="button"><span class="svelte-kldhhd">🖫</span></button> <dialog open class="svelte-kldhhd">Save</dialog></li> <li class="svelte-kldhhd"><button id="load" type="button" class="svelte-kldhhd"><span class="svelte-kldhhd">📥</span></button> <dialog open class="svelte-kldhhd">Load</dialog></li> <li class="svelte-kldhhd"><form class="svelte-kldhhd"><label class="svelte-kldhhd"><button id="export" type="button" class="svelte-kldhhd"><span class="svelte-kldhhd">⭱</span></button> <input type="file" accept="*json5,*.json" multiple class="svelte-kldhhd"/></label></form> <dialog open class="svelte-kldhhd">Import</dialog></li> <li class="svelte-kldhhd"><button id="import" type="button" class="svelte-kldhhd"><span class="svelte-kldhhd">⭳</span></button> <dialog open class="svelte-kldhhd">Export</dialog></li> <li class="svelte-kldhhd"><button id="undo" type="button" class="svelte-kldhhd"><span class="svelte-kldhhd">↺</span></button> <dialog open class="svelte-kldhhd">Undo</dialog></li> <li class="svelte-kldhhd"><button id="shortcuts" type="button" class="pulsing svelte-kldhhd"><span class="svelte-kldhhd">⌨</span></button> <dialog open class="svelte-kldhhd">Shortcuts</dialog></li> <li class="svelte-kldhhd"><button id="show" type="button" class="svelte-kldhhd"><span class="svelte-kldhhd">⟱</span></button> <dialog open class="svelte-kldhhd">Show All</dialog></li> <li class="svelte-kldhhd"><button id="hide" type="button" class="svelte-kldhhd"><span class="svelte-kldhhd">⟰</span></button> <dialog open class="svelte-kldhhd">Hide All</dialog></li> <li class="svelte-kldhhd"><label class="button svelte-kldhhd" id="single"><input type="checkbox" class="svelte-kldhhd"/> <span class="svelte-kldhhd">Ⅰ</span></label> <dialog open class="svelte-kldhhd">Single<br class="svelte-kldhhd"/>Visible</dialog></li></ul></nav></header> <main class="svelte-kldhhd"><!> <form class="svelte-kldhhd"><label class="svelte-kldhhd"><button id="add-file" type="button" class="svelte-kldhhd"><!></button> <input type="file" accept="image/*,video/*,audio/*" multiple class="svelte-kldhhd"/></label></form> <!> <!></main>',1);function To(e,t){Me(t,!0);const{debug:n}=C;let a=q(Ee([])),s=Zr(),l=q(!1),f=q(!1),v=q(!1),h=q(Ee([])),g=q(0),E=0,T=q(null),I=q(null),m=q(null),d=q(Ee(lr.params.path.split("/").filter(Boolean)));c(d).length===0&&c(d).push("");const b=kn(()=>c(d).filter(y=>y.trim()!=="").length>0),w=(y,S={})=>{Gr({text:y,duration:16e3,close:!0,gravity:"bottom",position:"center",stopOnFocus:!0,style:{background:"linear-gradient(to right, #1E396A, #F32587)"},...S}).showToast()};async function D(y){const S={chunker:"rabin",cidVersion:1,progress:ie=>{N(g,c(g)+ie)},timeout:6e4},_=y.reduce((ie,{size:De})=>ie+De,0);n&&console.debug({Adding:y,"Total Size":_,options:S});let W=[],$=0;for await(const{cid:ie}of s.addAll(y,S))n&&console.debug({"Added Local":{cid:ie,file:y[$].name}}),W.push({cid:ie.toString(),title:y[$].name.replace(/\.[^.]*$/,""),type:y[$].type}),$++;return Xt(W)}async function k(y){const S=await Br();if(!Yt.storachaEmail)throw new Error("No Storacha email specified in settings.");const _=await S.login(Yt.storachaEmail);let W=S.spaces().find(ie=>ie.name==="Mïmis");if(W||(W=await S.createSpace("Mïmis",{account:_})),!W)throw new Error('Couldn’t find or create space: "Mïmis".');await S.setCurrentSpace(W.did());const $=await Promise.all(y.map(async ie=>({cid:(await S.uploadFile(ie,{dedupe:!0})).toString(),title:ie.name.replace(/\.[^.]*$/,""),type:ie.type})));return Xt($)}async function P(y){var S;try{Array.isArray(y)||(y=[y]);const _=Yt.saveLocal?await D(y):await k(y);n&&console.debug({Added:_});const W=_[0].id,$=c(a).map(({cid:Je})=>Je),ie=_.filter(({cid:Je})=>!$.includes(Je));n&&console.debug({infos:_,"Unique Entries":ie}),N(a,c(a).concat(ie),!0),await zt();const De=document.querySelector(`[data-element-id="${W}"] summary`);De==null||De.focus()}catch(_){throw console.error({"IPFS Add Error":_}),((S=_.response)==null?void 0:S.status)===0?new Error("Couldn’t connect to IPFS."):_}}async function M(y){const S=await Promise.all(y.map(async _=>Yn.parse(await _.text())));N(a,Xt(S.flat()),!0)}async function H(y,S){var _;try{y.preventDefault(),N(l,!0);const W=(_=y.currentTarget)==null?void 0:_.files;if(!W)return;await S.call(S,Array.from(W)),N(v,c(a).length>0)}catch(W){w(W.message)}finally{N(l,!1)}}function x(){try{N(f,!0),console.debug({save:{entries:c(a),path:c(d)}}),ii(c(a),c(d))}finally{N(f,!1)}}C.register(x);async function j(){try{N(f,!0),N(a,await ai(c(d)),!0)}finally{N(f,!1)}}C.register(j);function Y(){if(c(h).length===0)return;const y=async()=>{const S=c(h).pop();N(a,S,!0),N(v,c(h).length>0),await zt()};"startViewTransition"in document?document.startViewTransition(y):y()}C.register(Y);function F(){var y;(y=c(m))==null||y.showModal()}C.register(F);async function G(){C.single=!1;const y=C.retrieveAll("toggleOpen");for(const S of y)S({open:!0})}C.register(G);async function X(){const y=C.retrieveAll("toggleOpen");for(const S of y)S({open:!1})}C.register(X);function z(){var y;(y=c(T))==null||y.click()}C.register(z);function ue(){const y=c(a).map(({id:W,...$})=>$),S=Yn.stringify(y,null,2),_=document.createElement("a");_.href=URL.createObjectURL(new Blob([S],{type:"application/json"})),_.download=`mïmis config.${new Date().toISOString()}.json5`,n&&console.debug({Downloading:c(a),href:_.href,name:_.download}),_.style.display="none",document.body.appendChild(_),_.click(),setTimeout(()=>{document.body.removeChild(_),URL.revokeObjectURL(_.href)},100)}C.register(ue);function me(y,S){const _=y.closest("li"),W=S==="up"?_==null?void 0:_.previousElementSibling:_==null?void 0:_.nextElementSibling;if(!W)return;const $=W.querySelector("summary");$==null||$.focus(),C.retrieve("toggleOpen",{useActive:!0})({open:!0})}var Se=Za();Xr(y=>{var S=Ya();dn.title="Mïmis: Merge List";var _=tt(S),W=V(_,2);K(W,"content","Ordered list of files to be combined with others in the same namespace."),fe(()=>K(_,"href",`${Kr}/merge%20left.svg`)),Z(y,S)}),nt("datum-delete",dn,y=>{const{id:S}=y.detail;c(h).push([...c(a)]),N(a,c(a).filter(_=>_.id!==S),!0)}),nt("keydown",dn,y=>{var S,_,W;if(!(C.any("isEditing")||document.activeElement instanceof HTMLInputElement))if(n&&console.debug({"document:onkeypress":{"🗝️":y.key,isOpen:(S=C.retrieve("isOpen",{useActive:!0}))==null?void 0:S()}}),y.key==="a")(_=c(T))==null||_.click();else if(y.key==="?")F();else if(y.key==="s")x();else if(y.key==="u")Y();else if(y.key==="v")G();else if(y.key==="h")X();else if(y.key==="d")ue();else if(y.key==="l")(W=c(I))==null||W.click();else if(y.key==="e")y.stopPropagation(),C.retrieve("setEditing",{useActive:!0})(!0);else if(y.key==="z")C.retrieve("zoom",{useActive:!0})();else if(y.key==="Delete")C.retrieve("remove",{useActive:!0})();else if(y.key==="Escape")C.retrieve("toggleOpen",{useActive:!0})({open:!1});else if(y.key==="Enter")C.retrieve("toggleOpen",{useActive:!0})();else if(y.key===" ")if(y.preventDefault(),C.retrieve("isOpen",{useActive:!0})())try{C.retrieve("togglePlay",{useActive:!0})()}catch{C.retrieve("toggleOpen",{useActive:!0})()}else C.retrieve("toggleOpen",{useActive:!0})();else/^Arrow(Up|Down)$/.test(y.key)&&me(y.target,y.key.replace(/^Arrow/,"").toLowerCase())});var oe=tt(Se),he=V(L(oe),2),Qe=L(he),A=L(Qe),Q=L(A);Q.__click=x;let ce;ge(2),R(A);var ee=V(A,2),We=L(ee);We.__click=j,ge(2),R(ee);var Ye=V(ee,2),It=L(Ye),St=L(It),J=L(St);J.__click=[Xa,I];var Oe=V(J,2);Oe.__change=[za,H,M],ve(Oe,y=>N(I,y),()=>c(I)),R(St),R(It),ge(2),R(Ye);var B=V(Ye,2),se=L(B);se.__click=ue,ge(2),R(B);var Le=V(B,2),Ue=L(Le);Ue.__click=Y,ge(2),R(Le);var Ae=V(Le,2),Xe=L(Ae);Xe.__click=F,ge(2),R(Ae);var _e=V(Ae,2),pe=L(_e);pe.__click=G,ge(2),R(_e);var be=V(_e,2),it=L(be);it.__click=X,ge(2),R(be);var at=V(be,2),ze=L(at),le=L(ze);sr(le),wn(le,"",{},{display:"none"}),ge(2),R(ze),ge(2),R(at),R(Qe),R(he),R(oe);var At=V(oe,2),_t=L(At);Qr(_t,{get elements(){return c(d)},set elements(y){N(d,y,!0)}});var ot=V(_t,2),Dt=L(ot),qe=L(Dt);qe.__click=[qa,T];var Pt=L(qe);{var xt=y=>{var S=Va(),_=L(S),W=V(L(_),2);K(W,"max",E);var $=L(W);R(W),R(_),R(S),fe(()=>{zr(W,c(g)),rt($,`${c(g)/E*100}%`)}),Z(y,S)},Ct=y=>{var S=Ga();Z(y,S)};Be(Pt,y=>{c(l)?y(xt):y(Ct,!1)})}R(qe);var st=V(qe,2);st.__change=[Ba,H,P],ve(st,y=>N(T,y),()=>c(T)),R(Dt),R(ot);var Ve=V(ot,2);{var lt=y=>{var S=Ka();Z(y,S)},Qt=y=>{ja(y,{get data(){return c(a)},set data(S){N(a,S,!0)},get history(){return c(h)},set history(S){N(h,S,!0)}})};Be(Ve,y=>{c(a).length===0?y(lt):y(Qt,!1)})}var Jt=V(Ve,2);Wa(Jt,{get handle(){return c(m)},set handle(y){N(m,y,!0)}}),R(At),fe((y,S,_)=>{Q.disabled=!c(b)||!c(v)||c(f),ce=Bt(Q,1,"svelte-kldhhd",null,ce,y),We.disabled=!c(b)||c(f),J.disabled=c(l),Ue.disabled=c(h).length===0||c(f),pe.disabled=S,it.disabled=_,qe.disabled=c(l)},[()=>({saving:c(f)}),()=>c(a).length===0||C.any("isOpen"),()=>c(a).length===0||!C.any("isOpen")]),Vr(le,()=>C.single,y=>C.single=y),Z(e,Se),Re()}Et(["click","change"]);export{To as component};

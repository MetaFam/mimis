var I=Object.defineProperty;var J=(a,t,n)=>t in a?I(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n;var p=(a,t,n)=>J(a,typeof t!="symbol"?t+"":t,n);import"../chunks/CWj6FrbW.js";import{p as T,ac as b,ah as K,af as M,aN as F,d as m,k as e,ae as G,s as j,r as y,t as Q,b as E,c as W,g as Z,f as R,ad as tt}from"../chunks/CuKwMJ0M.js";import{h as et}from"../chunks/DjLVrDJo.js";import{e as P,i as k}from"../chunks/CpRzmRWM.js";import{s as z}from"../chunks/DRICJ3qh.js";import{i as rt}from"../chunks/DX5XkaxQ.js";import{a as $,b as st}from"../chunks/3AH-aWZb.js";import{b as A}from"../chunks/DohLA9KU.js";class N{constructor({x:t=0,y:n=0,w:r=0,h:o=0}={}){p(this,"x");p(this,"y");p(this,"w");p(this,"h");p(this,"center");this.x=Math.min(t,t+r),this.y=Math.min(n,n+o),this.w=Math.abs(r),this.h=Math.abs(o),this.center={x:this.x+this.w/2,y:this.y+this.h/2}}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}get width(){return this.w}set width(t){this.w=t}get height(){return this.h}set height(t){this.h=t}}class B{constructor({x:t=0,y:n=0}={}){p(this,"x");p(this,"y");this.x=t,this.y=n}}function H(a,t){if(!a||!t)return null;if(!a.closest)throw new Error("`elem.closest()` is not defined.");const n=a instanceof SVGSVGElement?a:a.closest("svg"),r=n==null?void 0:n.createSVGPoint();if(!r)throw new Error(`No SVG parent of ${a.nodeName}.`);r.x=t.x,r.y=t.y;const o=a.getScreenCTM();if(!o)throw new Error("`ctm` wasn’t set.");return r.matrixTransform(o.inverse())}function L({points:a,bounds:t=new N({x:0,y:0,w:window.innerWidth,h:window.innerHeight}),forward:n=!0}){const[r,o]=[a.start,a.inline];if(r.x===o.x&&r.y===o.y)return null;const f=n?1:-1,h={x:(o.x-r.x)*f,y:(o.y-r.y)*f},c=[];if(h.y!==0){const s=(t.top-r.y)/h.y;if(s>0){const l=r.x+s*h.x;l>=t.left&&l<=t.right&&c.push({x:l,y:t.top,edge:"top",t:s})}}if(h.y!==0){const s=(t.bottom-r.y)/h.y;if(s>0){const l=r.x+s*h.x;l>=t.left&&l<=t.right&&c.push({x:l,y:t.bottom,edge:"bottom",t:s})}}if(h.x!==0){const s=(t.left-r.x)/h.x;if(s>0){const l=r.y+s*h.y;l>=t.top&&l<=t.bottom&&c.push({x:t.left,y:l,edge:"left",t:s})}}if(h.x!==0){const s=(t.right-r.x)/h.x;if(s>0){const l=r.y+s*h.y;l>=t.top&&l<=t.bottom&&c.push({x:t.right,y:l,edge:"right",t:s})}}if(c.length>0){const s=c.reduce((l,d)=>d.t<l.t?d:l);return s.progress=1/s.t,s}return null}var it=F("<line></line>"),ot=F('<svg width="100%" height="100%" preserveAspectRatio="none"><!><rect class="svelte-maswdv"></rect><text textLength="100%" lengthAdjust="spacingAndGlyphs" class="svelte-maswdv"><tspan dy="0.75lh"> </tspan> <tspan x="0" dy="0.75lh"> </tspan> <tspan x="0" dy="0.75lh"> </tspan></text></svg>');function nt(a,t){T(t,!0);let n=b(null),r=b(null),o=G(()=>{if(!e(n))return new N;const i=e(n).getBoundingClientRect();return new N({x:i.x,y:i.y,w:i.width,h:i.height})}),f=b(K(new B));document.addEventListener("mousemove",i=>{try{M(f,new B({x:i.clientX,y:i.clientY}),!0)}catch(x){console.error({"Mouse Update":x})}});const h={x:-12,y:0,h:55,get w(){return 2*Math.abs(this.x)}};let c=G(()=>H(e(r),L({points:{start:e(o).center,inline:e(f)},bounds:e(o),forward:!0})));const s=G(()=>H(e(r),L({points:{start:e(o).center,inline:e(f)},bounds:e(o),forward:!1}))),l=G(()=>e(c)&&e(s)?{x1:e(c).x,y1:e(c).y,x2:e(s).x,y2:e(s).y}:null);var d=ot(),g=m(d);{var S=i=>{var x=it();st(x,()=>({...e(l)}),void 0,void 0,"svelte-maswdv"),E(i,x)};rt(g,i=>{e(l)&&i(S)})}var u=j(g),V=j(u),w=m(V),v=m(w);y(w);var _=j(w,2),O=m(_);y(_);var C=j(_,2),U=m(C);y(C),y(V),A(V,i=>M(n,i),()=>e(n)),y(d),A(d,i=>M(r,i),()=>e(r)),Q((i,x,X,Y,q,D)=>{$(d,"viewBox",`${h.x} ${h.y} ${h.w??""} ${h.h}`),$(u,"x",h.x),$(u,"y",h.y),$(u,"width",h.w),$(u,"height",h.h),z(v,`ℳ: «${t.col??""}, ${t.row??""}»`),z(O,`🐭: «${i??""}, ${x??""}»`),z(U,`☐: «${X??""}, ${Y??""}»
      → «
        ${q??""},
        ${D??""}
      »`)},[()=>e(f).x.toFixed(1),()=>e(f).y.toFixed(1),()=>{var i;return Math.round(((i=e(o))==null?void 0:i.x)??0)},()=>{var i;return Math.round(((i=e(o))==null?void 0:i.y)??0)},()=>{var i,x;return Math.round((((i=e(o))==null?void 0:i.x)??0)+(((x=e(o))==null?void 0:x.w)??0))},()=>{var i,x;return Math.round((((i=e(o))==null?void 0:i.y)??0)+(((x=e(o))==null?void 0:x.h)??0))}]),E(a,d),W()}var at=R('<li class="svelte-1rd7cjp"><!></li>'),ht=R('<li class="svelte-1rd7cjp"><ol class="svelte-1rd7cjp"></ol></li>'),lt=R('<ol id="grid" class="svelte-1rd7cjp"></ol>');function wt(a,t){T(t,!0);let n=b(8),r=b(8);const{documentElement:o}=document,f=()=>{if(!(o instanceof HTMLHtmlElement))throw new Error("`html` is not a `<html>` element.");const s=getComputedStyle(o);M(r,Number(s.getPropertyValue("--rows")),!0),M(n,Number(s.getPropertyValue("--cols")),!0),console.debug({resize:{cols:e(n),rows:e(r)}})};new ResizeObserver(f).observe(o),Z(f);var c=lt();et(s=>{tt.title="Macrodata Refinement"}),P(c,21,()=>({length:e(r)}),k,(s,l,d)=>{var g=ht(),S=m(g);P(S,21,()=>({length:e(n)}),k,(u,V,w)=>{var v=at(),_=m(v);nt(_,{row:d+1,col:w+1}),y(v),E(u,v)}),y(S),y(g),E(s,g)}),y(c),E(a,c),W()}export{wt as component};

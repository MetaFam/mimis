import{a as d,t as C,c as L}from"../chunks/disclose-version.C2YwwBDH.js";import{ag as Q,H as Y,n as w,J as ee,aF as te,Z as $,V as k,X as ae,S as re,a8 as D,F,v as U,ak as q,aG as G,U as A,W as O,aH as se,d as oe,p as le,a as ie,aC as ne,s as y,i as o,l as ce,c as _,aI as J,r as p,t as H,k as ue,m as W,f as fe}from"../chunks/runtime.CRsO_40P.js";import{s as R}from"../chunks/render.gDQF84TA.js";import{i as z}from"../chunks/if.C6ZCGi2N.js";import{e as V,i as X}from"../chunks/each.BPZJEbO0.js";import{h as pe}from"../chunks/svelte-head.CeQ74Cht.js";import{s as I}from"../chunks/attributes.DKQOS9qK.js";import{d as ve,e as he}from"../chunks/events.ttbO-_kY.js";import{b as me}from"../chunks/misc.D1ddFLYY.js";import{p as Z}from"../chunks/proxy.C9vbjBtw.js";import{g as de}from"../chunks/neo4jDriver.tQrFAidX.js";import{s as _e}from"../chunks/settings.svelte.DJrgAN_i.js";const M=0,S=1,P=2;function be(e,t,r,c,T){w&&ee();var b=e,E=Q(),x=oe,v,s,a,l,u=(E?D:F)(void 0),f=(E?D:F)(void 0),n=!1;function m(i,h){n=!0,h&&(U(N),q(N),G(x));try{i===M&&r&&(s?A(s):s=k(()=>r(b))),i===S&&c&&(a?A(a):a=k(()=>c(b,u))),i===P&&T&&(l?A(l):l=k(()=>T(b,f))),i!==M&&s&&O(s,()=>s=null),i!==S&&a&&O(a,()=>a=null),i!==P&&l&&O(l,()=>l=null)}finally{h&&(G(null),q(null),U(null),se())}}var N=Y(()=>{if(v!==(v=t())){if(te(v)){var i=v;n=!1,i.then(h=>{i===v&&($(u,h),m(S,!0))},h=>{if(i===v)throw $(f,h),m(P,!0),f.v}),w?r&&(s=k(()=>r(b))):ae(()=>{n||m(M,!0)})}else $(u,v),m(S,!1);return()=>v=null}});w&&(b=re)}const ge=!0,Ve=Object.freeze(Object.defineProperty({__proto__:null,prerender:ge},Symbol.toStringTag,{value:"Module"})),Ce=async e=>{const t=de();try{const r=t.session(),c=e.length===0?`
        MATCH (start:Root)-[children:CONTAINS|CONNECTS]->(child)
        RETURN children.path as path, child
      `:`
        WITH $elems as pathElems
        MATCH path = (start:Root)-[:CONTAINS|CONNECTS*]->(end)
        MATCH (end)-[children:CONTAINS|CONNECTS]->(child)
        WHERE [rel in relationships(path) WHERE NOT isEmpty(rel.path) | rel.path] = pathElems
        RETURN children.path as path, child
      `,T=await r.run(c,{elems:e});return await r.close(),T.records}finally{t.close()}},Ne=({url:e,cid:t})=>{if(!e&&!t||e&&t)throw new Error("Must provide either `url` xor `cid`.");let r=[];if(e!=null?[,,t,...r]=Array.from(/^(ipfs:\/\/)?([^/]+)(\/.*)?$/.exec(e)??[]):t!=null&&([t,...r]=t.split("/")),t==null)throw new Error("Could not determine `cid`.");return _e.ipfsConversion.replace("{cid}",t).replace("{path}",r.join("/"))};let j=Z([]),Te=ue(async()=>{const e=await Ce(j);return console.debug({result:e}),e}),g=ce(null);const Ee=e=>{e.preventDefault();const t=e.target.elements.chip;B(t.value),t.value=""},B=e=>{e=e.trim(),e&&(j.push(e),W(g,null))},ye=e=>{j.splice(e,1),W(g,null)};var je=C('<li class="svelte-17z8ooj"> <button class="svelte-17z8ooj">⨯</button></li>'),xe=C('<ul id="path" class="svelte-17z8ooj"></ul>'),ke=C("<h2>No Results</h2>"),He=(e,t,r,c)=>{o(t).get("child").labels.includes("File")?(W(r,Z(o(t).get("child").properties.cid)),console.debug({fileCID:o(r)})):c(o(t).get("path"))},Se=C("<li><button> </button></li>"),we=C('<ul id="result" class="svelte-17z8ooj"></ul>'),$e=C("<h2>Searching…</h2>"),Ae=C('<object class="svelte-17z8ooj"><p>Could not display <a target="_blank"> </a>.</p></object>'),Oe=C('<main class="svelte-17z8ooj"><form><input id="chip" placeholder="Path Element"> <button>Add Path Element</button></form> <!> <section id="result" class="svelte-17z8ooj"><!> <!></section></main>');function Xe(e,t){le(t,!0);var r=Oe();pe(s=>{ne.title="Mïmis: Search"});var c=_(r),T=_(c);me(T),J(2),p(c);var b=y(c,2);z(b,()=>j.length>0,s=>{var a=xe();V(a,21,()=>j,X,(l,u,f)=>{var n=je(),m=_(n),N=y(m);N.__click=()=>ye(f),p(n),H(()=>R(m,`${o(u)??""} `)),d(l,n)}),p(a),d(s,a)});var E=y(b,2),x=_(E);be(x,()=>o(Te),s=>{var a=$e();d(s,a)},(s,a)=>{var l=L(),u=fe(l);z(u,()=>!o(a)||o(a).length===0,f=>{var n=ke();d(f,n)},f=>{var n=we();V(n,21,()=>o(a),X,(m,N)=>{var i=Se(),h=_(i);h.__click=[He,N,g,B];var K=_(h,!0);H(()=>R(K,o(N).get("path"))),p(h),p(i),d(m,i)}),p(n),d(f,n)}),d(s,l)});var v=y(x,2);z(v,()=>o(g),s=>{var a=Ae();H(()=>I(a,"data",Ne({cid:o(g)})));var l=_(a),u=y(_(l)),f=_(u);p(u),J(),p(l),p(a),H(()=>{I(a,"title",`ipfs://${o(g)}`),I(u,"href",`https://w3s.link/ipfs/${o(g)}`),R(f,`ipfs://${o(g)??""}`)}),d(s,a)}),p(E),p(r),he("submit",c,Ee),d(e,r),ie()}ve(["click"]);export{Xe as component,Ve as universal};

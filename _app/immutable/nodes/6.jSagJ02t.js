var Nh=e=>{throw TypeError(e)};var $0=(e,r,t)=>r.has(e)||Nh("Cannot "+t);var Si=(e,r,t)=>($0(e,r,"read from private field"),t?t.call(e):r.get(e)),Zl=(e,r,t)=>r.has(e)?Nh("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,t);import{a as $h,t as $p}from"../chunks/disclose-version.CWPB9Y93.js";import{aJ as k0,z as D0,E as L0,p as U0,f as F0,t as B0,a as W0,aA as x0,c as kh,s as Dh,d as Or,aE as mu,e as gu,r as Lh,aG as Uh}from"../chunks/runtime.Bx2Nn8Q7.js";import{l as V0,d as q0,e as Fh}from"../chunks/events.DqiJTyrp.js";import{h as H0}from"../chunks/svelte-head.BQD6g_ak.js";import{i as z0,p as Ql}from"../chunks/if.cg-YgoI-.js";import{r as G0}from"../chunks/attributes.Bly51DLA.js";import{b as Y0}from"../chunks/this.liOuQ6aX.js";import{v as Dr,j as K0,k as Bh,C as Wh,d as Z0,c as f,g as Q0,s as X0,w as J0}from"../chunks/bootstrap-icons.DkihfE77.js";function eO(e,r,t=r){var n=k0();V0(e,"input",()=>{var i=xh(e)?Vh(e.value):e.value;t(i),n&&i!==(i=r())&&(e.value=i??"")}),D0(()=>{var i=r();if(L0&&e.defaultValue!==e.value){t(e.value);return}xh(e)&&i===Vh(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function xh(e){var r=e.type;return r==="number"||r==="range"}function Vh(e){return e===""?null:+e}const Xl={SHA2_256:18,LENGTH:32,DAG_PB:112},tO=40;function zu(e,r){if(!e.length)throw new Error("Unexpected end of data");const t=Dr.decode(e);return r.seek(Dr.decode.bytes),t}function rO(e){const r=new DataView(e.buffer,e.byteOffset,e.byteLength);let t=0;return{version:2,characteristics:[r.getBigUint64(t,!0),r.getBigUint64(t+=8,!0)],dataOffset:Number(r.getBigUint64(t+=8,!0)),dataSize:Number(r.getBigUint64(t+=8,!0)),indexOffset:Number(r.getBigUint64(t+=8,!0))}}function nO(e){Dr.decode(e);const r=Dr.decode.bytes,t=Dr.decode(e.subarray(Dr.decode.bytes)),n=Dr.decode.bytes;return r+n+t}const Yt={Null:e=>e===null?e:void 0,Int:e=>Number.isInteger(e)?e:void 0,Float:e=>typeof e=="number"&&Number.isFinite(e)?e:void 0,String:e=>typeof e=="string"?e:void 0,Bool:e=>typeof e=="boolean"?e:void 0,Bytes:e=>e instanceof Uint8Array?e:void 0,Link:e=>e!==null&&typeof e=="object"&&e.asCID===e?e:void 0,List:e=>Array.isArray(e)?e:void 0,Map:e=>e!==null&&typeof e=="object"&&e.asCID!==e&&!Array.isArray(e)&&!(e instanceof Uint8Array)?e:void 0},Ui={"CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)":Yt.Link,"CarV1HeaderOrV2Pragma > roots (anon)":e=>{if(Yt.List(e)!==void 0){for(let r=0;r<e.length;r++){let t=e[r];if(t=Ui["CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)"](t),t===void 0)return;if(t!==e[r]){const n=e.slice(0,r);for(let i=r;i<e.length;i++){let o=e[i];if(o=Ui["CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)"](o),o===void 0)return;n.push(o)}return n}}return e}},Int:Yt.Int,CarV1HeaderOrV2Pragma:e=>{if(Yt.Map(e)===void 0)return;const r=Object.entries(e);let t=e,n=1;for(let i=0;i<r.length;i++){const[o,a]=r[i];switch(o){case"roots":{const c=Ui["CarV1HeaderOrV2Pragma > roots (anon)"](e[o]);if(c===void 0)return;if(c!==a||t!==e){if(t===e){t={};for(let s=0;s<i;s++)t[r[s][0]]=r[s][1]}t.roots=c}}break;case"version":{n--;const c=Ui.Int(e[o]);if(c===void 0)return;if(c!==a||t!==e){if(t===e){t={};for(let s=0;s<i;s++)t[r[s][0]]=r[s][1]}t.version=c}}break;default:return}}if(!(n>0))return t}},Fi={"CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)":Yt.Link,"CarV1HeaderOrV2Pragma > roots (anon)":e=>{if(Yt.List(e)!==void 0){for(let r=0;r<e.length;r++){let t=e[r];if(t=Fi["CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)"](t),t===void 0)return;if(t!==e[r]){const n=e.slice(0,r);for(let i=r;i<e.length;i++){let o=e[i];if(o=Fi["CarV1HeaderOrV2Pragma > roots (anon) > valueType (anon)"](o),o===void 0)return;n.push(o)}return n}}return e}},Int:Yt.Int,CarV1HeaderOrV2Pragma:e=>{if(Yt.Map(e)===void 0)return;const r=Object.entries(e);let t=e,n=1;for(let i=0;i<r.length;i++){const[o,a]=r[i];switch(o){case"roots":{const c=Fi["CarV1HeaderOrV2Pragma > roots (anon)"](a);if(c===void 0)return;if(c!==a||t!==e){if(t===e){t={};for(let s=0;s<i;s++)t[r[s][0]]=r[s][1]}t.roots=c}}break;case"version":{n--;const c=Fi.Int(a);if(c===void 0)return;if(c!==a||t!==e){if(t===e){t={};for(let s=0;s<i;s++)t[r[s][0]]=r[s][1]}t.version=c}}break;default:return}}if(!(n>0))return t}},iO={toTyped:Ui.CarV1HeaderOrV2Pragma,toRepresentation:Fi.CarV1HeaderOrV2Pragma};async function kp(e,r){const t=zu(await e.upTo(8),e);if(t===0)throw new Error("Invalid CAR header (zero length)");const n=await e.exactly(t,!0),i=K0(n);if(iO.toTyped(i)===void 0)throw new Error("Invalid CAR header format");if(i.version!==1&&i.version!==2||r!==void 0&&i.version!==r)throw new Error(`Invalid CAR version: ${i.version}${r!==void 0?` (expected ${r})`:""}`);if(i.version===1){if(!Array.isArray(i.roots))throw new Error("Invalid CAR header format");return i}if(i.roots!==void 0)throw new Error("Invalid CAR header format");const o=rO(await e.exactly(tO,!0));e.seek(o.dataOffset-e.pos);const a=await kp(e,1);return Object.assign(a,o)}async function oO(e){const r=await e.exactly(2,!1);if(r[0]===Xl.SHA2_256&&r[1]===Xl.LENGTH){const a=await e.exactly(34,!0),c=Bh(a);return Wh.create(0,Xl.DAG_PB,c)}const t=zu(await e.upTo(8),e);if(t!==1)throw new Error(`Unexpected CID version (${t})`);const n=zu(await e.upTo(8),e),i=await e.exactly(nO(await e.upTo(8)),!0),o=Bh(i);return Wh.create(t,n,o)}async function Dp(e){const r=e.pos;let t=zu(await e.upTo(8),e);if(t===0)throw new Error("Invalid CAR section (zero length)");t+=e.pos-r;const n=await oO(e),i=t-Number(e.pos-r);return{cid:n,length:t,blockLength:i}}async function aO(e){const{cid:r,blockLength:t}=await Dp(e);return{bytes:await e.exactly(t,!0),cid:r}}async function uO(e){const r=e.pos,{cid:t,length:n,blockLength:i}=await Dp(e),o={cid:t,length:n,blockLength:i,offset:r,blockOffset:e.pos};return e.seek(o.blockLength),o}function cO(e){const r=(async()=>{const t=await kp(e);if(t.version===2){const n=e.pos-t.dataOffset;e=dO(e,t.dataSize-n)}return t})();return{header:()=>r,async*blocks(){for(await r;(await e.upTo(8)).length>0;)yield await aO(e)},async*blocksIndex(){for(await r;(await e.upTo(8)).length>0;)yield await uO(e)}}}function sO(e){let r=0;return{async upTo(t){return e.subarray(r,r+Math.min(t,e.length-r))},async exactly(t,n=!1){if(t>e.length-r)throw new Error("Unexpected end of data");const i=e.subarray(r,r+t);return n&&(r+=t),i},seek(t){r+=t},get pos(){return r}}}function lO(e){let r=0,t=0,n=0,i=new Uint8Array(0);const o=async a=>{t=i.length-n;const c=[i.subarray(n)];for(;t<a;){const u=await e();if(u==null)break;t<0?u.length>t&&c.push(u.subarray(-t)):c.push(u),t+=u.length}i=new Uint8Array(c.reduce((u,l)=>u+l.length,0));let s=0;for(const u of c)i.set(u,s),s+=u.length;n=0};return{async upTo(a){return i.length-n<a&&await o(a),i.subarray(n,n+Math.min(i.length-n,a))},async exactly(a,c=!1){if(i.length-n<a&&await o(a),i.length-n<a)throw new Error("Unexpected end of data");const s=i.subarray(n,n+a);return c&&(r+=a,n+=a),s},seek(a){r+=a,n+=a},get pos(){return r}}}function fO(e){const r=e[Symbol.asyncIterator]();async function t(){const n=await r.next();return n.done?null:n.value}return lO(t)}function dO(e,r){let t=0;return{async upTo(n){let i=await e.upTo(n);return i.length+t>r&&(i=i.subarray(0,r-t)),i},async exactly(n,i=!1){const o=await e.exactly(n,i);if(o.length+t>r)throw new Error("Unexpected end of data");return i&&(t+=n),o},seek(n){t+=n,e.seek(n)},get pos(){return e.pos}}}class hO{constructor(r,t,n){this._version=r,this._roots=t,this._iterable=n,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}}class Gu extends hO{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(r){const{version:t,roots:n,iterator:i}=await vO(r);return new Gu(t,n,i)}static async fromIterable(r){const{version:t,roots:n,iterator:i}=await _O(r);return new Gu(t,n,i)}}async function vO(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return Lp(sO(e))}async function _O(e){if(!e||typeof e[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return Lp(fO(e))}async function Lp(e){const r=cO(e),{version:t,roots:n}=await r.header();return{version:t,roots:n,iterator:r.blocks()}}const pO=!0,IV=Object.freeze(Object.defineProperty({__proto__:null,prerender:pO},Symbol.toStringTag,{value:"Module"}));async function*yO(e){const r=e.getReader();try{for(;;){const{done:t,value:n}=await r.read();if(t)return;yield n}}finally{r.releaseLock()}}async function bO(e){const r=await Gu.fromIterable(yO(e.stream())),t=[],n=[],i={};let o=null;for await(const{cid:a,bytes:c}of r){o=a.toString();const s=await Z0(c),{Links:u}=s;if(u.length===0){t.push(a.toString());continue}if(u.every(({Name:h})=>h==="")){n.push(a.toString());continue}const l=u.map(({Name:h,Tsize:_,Hash:y})=>({name:h,size:_,cid:y.toString()}));i[a.toString()]=l.map(h=>{const _=n.includes(h.cid)||t.includes(h.cid)?"file":"directory",y={type:_,title:h.name??`Unknown ${_}`,size:h.size??0,cid:h.cid};if(_==="directory"){const m=y.children=i[h.cid],E=m.map(({childCount:w=0})=>w);y.childCount=E.reduce((w,S)=>w+S,m.length)}return y})}if(!o)throw new Error("No nodes found.");return i[o]}var Up={},At={},V={},ne={},Dt={},jt={};Object.defineProperty(jt,"__esModule",{value:!0});jt.getBrokenObjectReason=jt.isBrokenObject=jt.createBrokenObject=void 0;var Fp="__isBrokenObject__",Bp="__reason__";function mO(e,r){r===void 0&&(r={});var t=function(){throw e};return new Proxy(r,{get:function(n,i){if(i===Fp)return!0;if(i===Bp)return e;if(i==="toJSON")return;t()},set:t,apply:t,construct:t,defineProperty:t,deleteProperty:t,getOwnPropertyDescriptor:t,getPrototypeOf:t,has:t,isExtensible:t,ownKeys:t,preventExtensions:t,setPrototypeOf:t})}jt.createBrokenObject=mO;function gO(e){return e!==null&&typeof e=="object"&&e[Fp]===!0}jt.isBrokenObject=gO;function OO(e){return e[Bp]}jt.getBrokenObjectReason=OO;Object.defineProperty(Dt,"__esModule",{value:!0});Dt.stringify=void 0;var qh=jt;function EO(e,r){return JSON.stringify(e,function(t,n){return(0,qh.isBrokenObject)(n)?{__isBrokenObject__:!0,__reason__:(0,qh.getBrokenObjectReason)(n)}:typeof n=="bigint"?"".concat(n,"n"):(r==null?void 0:r.useCustomToString)===!0&&typeof n=="object"&&!Array.isArray(n)&&typeof n.toString=="function"&&n.toString!==Object.prototype.toString?n==null?void 0:n.toString():n})}Dt.stringify=EO;var Sd={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.rawPolyfilledDiagnosticRecord=void 0,e.rawPolyfilledDiagnosticRecord={OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"},Object.freeze(e.rawPolyfilledDiagnosticRecord)})(Sd);var Wp=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),wO=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),TO=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),SO=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&wO(r,e,t);return TO(r,e),r};Object.defineProperty(ne,"__esModule",{value:!0});ne.PROTOCOL_ERROR=ne.SESSION_EXPIRED=ne.SERVICE_UNAVAILABLE=ne.GQLError=ne.Neo4jError=ne.isRetriableError=ne.newGQLError=ne.newError=void 0;var PO=SO(Dt),xp=Sd,Vp={DATABASE_ERROR:"DATABASE_ERROR",CLIENT_ERROR:"CLIENT_ERROR",TRANSIENT_ERROR:"TRANSIENT_ERROR",UNKNOWN:"UNKNOWN"};Object.freeze(Vp);var CO=Object.values(Vp),qp="ServiceUnavailable";ne.SERVICE_UNAVAILABLE=qp;var Hp="SessionExpired";ne.SESSION_EXPIRED=Hp;var IO="ProtocolError";ne.PROTOCOL_ERROR=IO;var RO="N/A",Pd=function(e){Wp(r,e);function r(t,n,i,o,a){var c=this,s;return c=e.call(this,t,a!=null?{cause:a}:void 0)||this,c.constructor=r,c.__proto__=r.prototype,c.cause=a??void 0,c.gqlStatus=n,c.gqlStatusDescription=i,c.diagnosticRecord=o,c.classification=DO(c.diagnosticRecord),c.rawClassification=(s=o==null?void 0:o._classification)!==null&&s!==void 0?s:void 0,c.name="GQLError",c}return Object.defineProperty(r.prototype,"diagnosticRecordAsJsonString",{get:function(){return PO.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),r}(Error);ne.GQLError=Pd;var Cd=function(e){Wp(r,e);function r(t,n,i,o,a,c){var s=e.call(this,t,i,o,a,c)||this;return s.constructor=r,s.__proto__=r.prototype,s.code=n,s.name="Neo4jError",s.retriable=NO(n),s}return r.isRetriable=function(t){return t!=null&&t instanceof r&&t.retriable},r}(Pd);ne.Neo4jError=Cd;function AO(e,r,t,n,i,o){return new Cd(e,r??RO,n??"50N42",i??"error: general processing exception - unexpected error. "+e,o??xp.rawPolyfilledDiagnosticRecord,t)}ne.newError=AO;function jO(e,r,t,n,i){return new Pd(e,t??"50N42",n??"error: general processing exception - unexpected error. "+e,i??xp.rawPolyfilledDiagnosticRecord,r)}ne.newGQLError=jO;var MO=Cd.isRetriable;ne.isRetriableError=MO;function NO(e){return e===qp||e===Hp||kO(e)||$O(e)}function $O(e){return(e==null?void 0:e.includes("TransientError"))===!0}function kO(e){return e==="Neo.ClientError.Security.AuthorizationExpired"}function DO(e){return e===void 0||e._classification===void 0?"UNKNOWN":CO.includes(e._classification)?e==null?void 0:e._classification:"UNKNOWN"}var $e={};Object.defineProperty($e,"__esModule",{value:!0});$e.toString=$e.toNumber=$e.inSafeRange=$e.isInt=$e.int=void 0;var Pi=ne,Hh=new Map,or=function(){function e(r,t){this.low=r??0,this.high=t??0}return e.prototype.inSafeRange=function(){return this.greaterThanOrEqual(e.MIN_SAFE_VALUE)&&this.lessThanOrEqual(e.MAX_SAFE_VALUE)},e.prototype.toInt=function(){return this.low},e.prototype.toNumber=function(){return this.high*Lr+(this.low>>>0)},e.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(Lr)+BigInt(this.low>>>0);var r=this.negate();return BigInt(-1)*(BigInt(r.high>>>0)*BigInt(Lr)+BigInt(r.low>>>0))},e.prototype.toNumberOrInfinity=function(){return this.lessThan(e.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(e.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},e.prototype.toString=function(r){if(r=r??10,r<2||r>36)throw RangeError("radix out of range: "+r.toString());if(this.isZero())return"0";var t;if(this.isNegative())if(this.equals(e.MIN_VALUE)){var n=e.fromNumber(r),i=this.div(n);return t=i.multiply(n).subtract(this),i.toString(r)+t.toInt().toString(r)}else return"-"+this.negate().toString(r);var o=e.fromNumber(Math.pow(r,6));t=this;for(var a="";;){var c=t.div(o),s=t.subtract(c.multiply(o)).toInt()>>>0,u=s.toString(r);if(t=c,t.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},e.prototype.valueOf=function(){return this.toBigInt()},e.prototype.getHighBits=function(){return this.high},e.prototype.getLowBits=function(){return this.low},e.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(e.MIN_VALUE)?64:this.negate().getNumBitsAbs();var r=this.high!==0?this.high:this.low,t=0;for(t=31;t>0&&!(r&1<<t);t--);return this.high!==0?t+33:t+1},e.prototype.isZero=function(){return this.high===0&&this.low===0},e.prototype.isNegative=function(){return this.high<0},e.prototype.isPositive=function(){return this.high>=0},e.prototype.isOdd=function(){return(this.low&1)===1},e.prototype.isEven=function(){return(this.low&1)===0},e.prototype.equals=function(r){var t=e.fromValue(r);return this.high===t.high&&this.low===t.low},e.prototype.notEquals=function(r){return!this.equals(r)},e.prototype.lessThan=function(r){return this.compare(r)<0},e.prototype.lessThanOrEqual=function(r){return this.compare(r)<=0},e.prototype.greaterThan=function(r){return this.compare(r)>0},e.prototype.greaterThanOrEqual=function(r){return this.compare(r)>=0},e.prototype.compare=function(r){var t=e.fromValue(r);if(this.equals(t))return 0;var n=this.isNegative(),i=t.isNegative();return n&&!i?-1:!n&&i?1:this.subtract(t).isNegative()?-1:1},e.prototype.negate=function(){return this.equals(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.add=function(r){var t=e.fromValue(r),n=this.high>>>16,i=this.high&65535,o=this.low>>>16,a=this.low&65535,c=t.high>>>16,s=t.high&65535,u=t.low>>>16,l=t.low&65535,h=0,_=0,y=0,m=0;return m+=a+l,y+=m>>>16,m&=65535,y+=o+u,_+=y>>>16,y&=65535,_+=i+s,h+=_>>>16,_&=65535,h+=n+c,h&=65535,e.fromBits(y<<16|m,h<<16|_)},e.prototype.subtract=function(r){var t=e.fromValue(r);return this.add(t.negate())},e.prototype.multiply=function(r){if(this.isZero())return e.ZERO;var t=e.fromValue(r);if(t.isZero())return e.ZERO;if(this.equals(e.MIN_VALUE))return t.isOdd()?e.MIN_VALUE:e.ZERO;if(t.equals(e.MIN_VALUE))return this.isOdd()?e.MIN_VALUE:e.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(Yh)&&t.lessThan(Yh))return e.fromNumber(this.toNumber()*t.toNumber());var n=this.high>>>16,i=this.high&65535,o=this.low>>>16,a=this.low&65535,c=t.high>>>16,s=t.high&65535,u=t.low>>>16,l=t.low&65535,h=0,_=0,y=0,m=0;return m+=a*l,y+=m>>>16,m&=65535,y+=o*l,_+=y>>>16,y&=65535,y+=a*u,_+=y>>>16,y&=65535,_+=i*l,h+=_>>>16,_&=65535,_+=o*u,h+=_>>>16,_&=65535,_+=a*s,h+=_>>>16,_&=65535,h+=n*l+i*u+o*s+a*c,h&=65535,e.fromBits(y<<16|m,h<<16|_)},e.prototype.div=function(r){var t=e.fromValue(r);if(t.isZero())throw(0,Pi.newError)("division by zero");if(this.isZero())return e.ZERO;var n,i,o;if(this.equals(e.MIN_VALUE)){if(t.equals(e.ONE)||t.equals(e.NEG_ONE))return e.MIN_VALUE;if(t.equals(e.MIN_VALUE))return e.ONE;var a=this.shiftRight(1);return n=a.div(t).shiftLeft(1),n.equals(e.ZERO)?t.isNegative()?e.ONE:e.NEG_ONE:(i=this.subtract(t.multiply(n)),o=n.add(i.div(t)),o)}else if(t.equals(e.MIN_VALUE))return e.ZERO;if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();for(o=e.ZERO,i=this;i.greaterThanOrEqual(t);){n=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));for(var c=Math.ceil(Math.log(n)/Math.LN2),s=c<=48?1:Math.pow(2,c-48),u=e.fromNumber(n),l=u.multiply(t);l.isNegative()||l.greaterThan(i);)n-=s,u=e.fromNumber(n),l=u.multiply(t);u.isZero()&&(u=e.ONE),o=o.add(u),i=i.subtract(l)}return o},e.prototype.modulo=function(r){var t=e.fromValue(r);return this.subtract(this.div(t).multiply(t))},e.prototype.not=function(){return e.fromBits(~this.low,~this.high)},e.prototype.and=function(r){var t=e.fromValue(r);return e.fromBits(this.low&t.low,this.high&t.high)},e.prototype.or=function(r){var t=e.fromValue(r);return e.fromBits(this.low|t.low,this.high|t.high)},e.prototype.xor=function(r){var t=e.fromValue(r);return e.fromBits(this.low^t.low,this.high^t.high)},e.prototype.shiftLeft=function(r){var t=e.toNumber(r);return(t&=63)===0?e.ZERO:t<32?e.fromBits(this.low<<t,this.high<<t|this.low>>>32-t):e.fromBits(0,this.low<<t-32)},e.prototype.shiftRight=function(r){var t=e.toNumber(r),n=e.toNumber(r);return(t&=63)===0?e.ZERO:n<32?e.fromBits(this.low>>>t|this.high<<32-t,this.high>>t):e.fromBits(this.high>>t-32,this.high>=0?0:-1)},e.isInteger=function(r){return(r==null?void 0:r.__isInteger__)===!0},e.fromInt=function(r){var t;if(r=r|0,r>=-128&&r<128&&(t=Hh.get(r),t!=null))return t;var n=new e(r,r<0?-1:0);return r>=-128&&r<128&&Hh.set(r,n),n},e.fromBits=function(r,t){return new e(r,t)},e.fromNumber=function(r){return isNaN(r)||!isFinite(r)?e.ZERO:r<=-Gh?e.MIN_VALUE:r+1>=Gh?e.MAX_VALUE:r<0?e.fromNumber(-r).negate():new e(r%Lr|0,r/Lr|0)},e.fromString=function(r,t,n){var i=n===void 0?{}:n,o=i.strictStringValidation;if(r.length===0)throw(0,Pi.newError)("number format error: empty string");if(r==="NaN"||r==="Infinity"||r==="+Infinity"||r==="-Infinity")return e.ZERO;if(t=t??10,t<2||t>36)throw(0,Pi.newError)("radix out of range: "+t.toString());var a;if((a=r.indexOf("-"))>0)throw(0,Pi.newError)('number format error: interior "-" character: '+r);if(a===0)return e.fromString(r.substring(1),t).negate();for(var c=e.fromNumber(Math.pow(t,8)),s=e.ZERO,u=0;u<r.length;u+=8){var l=Math.min(8,r.length-u),h=r.substring(u,u+l),_=parseInt(h,t);if(o===!0&&!UO(h,_,t))throw(0,Pi.newError)('number format error: "'.concat(h,'" is NaN in radix ').concat(t,": ").concat(r));if(l<8){var y=e.fromNumber(Math.pow(t,l));s=s.multiply(y).add(e.fromNumber(_))}else s=s.multiply(c),s=s.add(e.fromNumber(_))}return s},e.fromValue=function(r,t){return t===void 0&&(t={}),r instanceof e?r:typeof r=="number"?(t.ceilFloat===!0&&(r=Math.ceil(r)),e.fromNumber(r)):typeof r=="string"?e.fromString(r,void 0,t):typeof r=="bigint"?e.fromString(r.toString()):new e(r.low,r.high)},e.toNumber=function(r){switch(typeof r){case"number":return r;case"bigint":return Number(r);default:return e.fromValue(r).toNumber()}},e.toString=function(r,t){return e.fromValue(r).toString(t)},e.inSafeRange=function(r){return e.fromValue(r).inSafeRange()},e.ZERO=e.fromInt(0),e.ONE=e.fromInt(1),e.NEG_ONE=e.fromInt(-1),e.MAX_VALUE=e.fromBits(-1,2147483647),e.MIN_VALUE=e.fromBits(0,-2147483648),e.MIN_SAFE_VALUE=e.fromBits(1,-2097152),e.MAX_SAFE_VALUE=e.fromBits(-1,2097151),e.__isInteger__=!0,e}();function LO(e,r,t){var n=e.toString(r),i=Math.max(t-n.length,0),o="0".repeat(i);return"".concat(o).concat(n)}function UO(e,r,t){return!Number.isNaN(e)&&!Number.isNaN(r)&&LO(r,t,e.length)===e.toLowerCase()}Object.defineProperty(or.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var zh=65536,FO=1<<24,Lr=zh*zh,BO=Lr*Lr,Gh=BO/2,Yh=or.fromInt(FO),WO=or.fromValue;$e.int=WO;var xO=or.isInteger;$e.isInt=xO;var VO=or.inSafeRange;$e.inSafeRange=VO;var qO=or.toNumber;$e.toNumber=qO;var HO=or.toString;$e.toString=HO;$e.default=or;var ve={},Id={},X={},zO=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),GO=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),YO=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&zO(r,e,t);return GO(r,e),r},KO=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(X,"__esModule",{value:!0});X.ENCRYPTION_OFF=X.ENCRYPTION_ON=X.equals=X.validateQueryAndParameters=X.toNumber=X.assertValidDate=X.assertNumberOrInteger=X.assertNumber=X.assertString=X.assertObject=X.isString=X.isObject=X.isEmptyObjectOrNull=void 0;var xf=YO($e),xr=Dt,ZO="ENCRYPTION_ON";X.ENCRYPTION_ON=ZO;var QO="ENCRYPTION_OFF";X.ENCRYPTION_OFF=QO;function XO(e){if(e===null)return!0;if(!dc(e))return!1;for(var r in e)if(e[r]!==void 0)return!1;return!0}X.isEmptyObjectOrNull=XO;function dc(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}X.isObject=dc;function JO(e,r,t){var n,i,o="",a=r??{},c=(n=t==null?void 0:t.skipAsserts)!==null&&n!==void 0?n:!1;return typeof e=="string"?o=e:e instanceof String?o=e.toString():typeof e=="object"&&e.text!=null&&(o=e.text,a=(i=e.parameters)!==null&&i!==void 0?i:{}),c||(iE(o),oE(a)),{validatedQuery:o,params:a}}X.validateQueryAndParameters=JO;function eE(e,r){if(!dc(e))throw new TypeError(r+" expected to be an object but was: "+(0,xr.stringify)(e));return e}X.assertObject=eE;function zp(e,r){if(!Gp(e))throw new TypeError((0,xr.stringify)(r)+" expected to be string but was: "+(0,xr.stringify)(e));return e}X.assertString=zp;function tE(e,r){if(typeof e!="number")throw new TypeError(r+" expected to be a number but was: "+(0,xr.stringify)(e));return e}X.assertNumber=tE;function rE(e,r){if(typeof e!="number"&&typeof e!="bigint"&&!(0,xf.isInt)(e))throw new TypeError(r+" expected to be either a number or an Integer object but was: "+(0,xr.stringify)(e));return e}X.assertNumberOrInteger=rE;function nE(e,r){if(Object.prototype.toString.call(e)!=="[object Date]")throw new TypeError(r+" expected to be a standard JavaScript Date but was: "+(0,xr.stringify)(e));if(Number.isNaN(e.getTime()))throw new TypeError(r+" expected to be valid JavaScript Date but its time was NaN: "+(0,xr.stringify)(e));return e}X.assertValidDate=nE;function iE(e){if(zp(e,"Cypher query"),e.trim().length===0)throw new TypeError("Cypher query is expected to be a non-empty string.")}function oE(e){if(!dc(e)){var r=e.constructor!=null?" "+e.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(r," ").concat(JSON.stringify(e)))}}function Gp(e){return Object.prototype.toString.call(e)==="[object String]"}X.isString=Gp;function Yp(e,r){var t,n;if(e===r)return!0;if(e===null||r===null)return!1;if(typeof e=="object"&&typeof r=="object"){var i=Object.keys(e),o=Object.keys(r);if(i.length!==o.length)return!1;try{for(var a=KO(i),c=a.next();!c.done;c=a.next()){var s=c.value;if(!Yp(e[s],r[s]))return!1}}catch(u){t={error:u}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0}return!1}X.equals=Yp;function aE(e){return e instanceof xf.default?e.toNumber():typeof e=="bigint"?(0,xf.int)(e).toNumber():e}X.toNumber=aE;(function(e){var r=f&&f.__createBinding||(Object.create?function(O,C,N,L){L===void 0&&(L=N);var Z=Object.getOwnPropertyDescriptor(C,N);(!Z||("get"in Z?!C.__esModule:Z.writable||Z.configurable))&&(Z={enumerable:!0,get:function(){return C[N]}}),Object.defineProperty(O,L,Z)}:function(O,C,N,L){L===void 0&&(L=N),O[L]=C[N]}),t=f&&f.__setModuleDefault||(Object.create?function(O,C){Object.defineProperty(O,"default",{enumerable:!0,value:C})}:function(O,C){O.default=C}),n=f&&f.__importStar||function(O){if(O&&O.__esModule)return O;var C={};if(O!=null)for(var N in O)N!=="default"&&Object.prototype.hasOwnProperty.call(O,N)&&r(C,O,N);return t(C,O),C};Object.defineProperty(e,"__esModule",{value:!0}),e.floorMod=e.floorDiv=e.assertValidZoneId=e.assertValidNanosecond=e.assertValidSecond=e.assertValidMinute=e.assertValidHour=e.assertValidDay=e.assertValidMonth=e.assertValidYear=e.timeZoneOffsetInSeconds=e.totalNanoseconds=e.newDate=e.toStandardDate=e.isoStringToStandardDate=e.dateToIsoString=e.timeZoneOffsetToIsoString=e.timeToIsoString=e.durationToIsoString=e.dateToEpochDay=e.localDateTimeToEpochSecond=e.localTimeToNanoOfDay=e.normalizeNanosecondsForDuration=e.normalizeSecondsForDuration=e.SECONDS_PER_DAY=e.DAYS_PER_400_YEAR_CYCLE=e.DAYS_0000_TO_1970=e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE=e.NANOS_PER_MILLISECOND=e.NANOS_PER_SECOND=e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE=e.MINUTES_PER_HOUR=e.NANOSECOND_OF_SECOND_RANGE=e.SECOND_OF_MINUTE_RANGE=e.MINUTE_OF_HOUR_RANGE=e.HOUR_OF_DAY_RANGE=e.DAY_OF_MONTH_RANGE=e.MONTH_OF_YEAR_RANGE=e.YEAR_RANGE=void 0;var i=n($e),o=ne,a=X,c=function(){function O(C,N){this._minNumber=C,this._maxNumber=N,this._minInteger=(0,i.int)(C),this._maxInteger=(0,i.int)(N)}return O.prototype.contains=function(C){if((0,i.isInt)(C)&&C instanceof i.default)return C.greaterThanOrEqual(this._minInteger)&&C.lessThanOrEqual(this._maxInteger);if(typeof C=="bigint"){var N=(0,i.int)(C);return N.greaterThanOrEqual(this._minInteger)&&N.lessThanOrEqual(this._maxInteger)}else return C>=this._minNumber&&C<=this._maxNumber},O.prototype.toString=function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")},O}();e.YEAR_RANGE=new c(-999999999,999999999),e.MONTH_OF_YEAR_RANGE=new c(1,12),e.DAY_OF_MONTH_RANGE=new c(1,31),e.HOUR_OF_DAY_RANGE=new c(0,23),e.MINUTE_OF_HOUR_RANGE=new c(0,59),e.SECOND_OF_MINUTE_RANGE=new c(0,59),e.NANOSECOND_OF_SECOND_RANGE=new c(0,999999999),e.MINUTES_PER_HOUR=60,e.SECONDS_PER_MINUTE=60,e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE*e.MINUTES_PER_HOUR,e.NANOS_PER_SECOND=1e9,e.NANOS_PER_MILLISECOND=1e6,e.NANOS_PER_MINUTE=e.NANOS_PER_SECOND*e.SECONDS_PER_MINUTE,e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE*e.MINUTES_PER_HOUR,e.DAYS_0000_TO_1970=719528,e.DAYS_PER_400_YEAR_CYCLE=146097,e.SECONDS_PER_DAY=86400;function s(O,C){return(0,i.int)(O).add(q(C,e.NANOS_PER_SECOND))}e.normalizeSecondsForDuration=s;function u(O){return D(O,e.NANOS_PER_SECOND)}e.normalizeNanosecondsForDuration=u;function l(O,C,N,L){O=(0,i.int)(O),C=(0,i.int)(C),N=(0,i.int)(N),L=(0,i.int)(L);var Z=O.multiply(e.NANOS_PER_HOUR);return Z=Z.add(C.multiply(e.NANOS_PER_MINUTE)),Z=Z.add(N.multiply(e.NANOS_PER_SECOND)),Z.add(L)}e.localTimeToNanoOfDay=l;function h(O,C,N,L,Z,Ie,He){var ze=_(O,C,N),ot=W(L,Z,Ie);return ze.multiply(e.SECONDS_PER_DAY).add(ot)}e.localDateTimeToEpochSecond=h;function _(O,C,N){O=(0,i.int)(O),C=(0,i.int)(C),N=(0,i.int)(N);var L=O.multiply(365);return O.greaterThanOrEqual(0)?L=L.add(O.add(3).div(4).subtract(O.add(99).div(100)).add(O.add(399).div(400))):L=L.subtract(O.div(-4).subtract(O.div(-100)).add(O.div(-400))),L=L.add(C.multiply(367).subtract(362).div(12)),L=L.add(N.subtract(1)),C.greaterThan(2)&&(L=L.subtract(1),ce(O)||(L=L.subtract(1))),L.subtract(e.DAYS_0000_TO_1970)}e.dateToEpochDay=_;function y(O,C,N,L){var Z=U(O),Ie=U(C),He=x(N,L);return"P".concat(Z,"M").concat(Ie,"DT").concat(He,"S")}e.durationToIsoString=y;function m(O,C,N,L){var Z=U(O,2),Ie=U(C,2),He=U(N,2),ze=Q(L);return"".concat(Z,":").concat(Ie,":").concat(He).concat(ze)}e.timeToIsoString=m;function E(O){if(O=(0,i.int)(O),O.equals(0))return"Z";var C=O.isNegative();C&&(O=O.multiply(-1));var N=C?"-":"+",L=U(O.div(e.SECONDS_PER_HOUR),2),Z=U(O.div(e.SECONDS_PER_MINUTE).modulo(e.MINUTES_PER_HOUR),2),Ie=O.modulo(e.SECONDS_PER_MINUTE),He=Ie.equals(0)?null:U(Ie,2);return He!=null?"".concat(N).concat(L,":").concat(Z,":").concat(He):"".concat(N).concat(L,":").concat(Z)}e.timeZoneOffsetToIsoString=E;function w(O,C,N){var L=ye(O),Z=U(C,2),Ie=U(N,2);return"".concat(L,"-").concat(Z,"-").concat(Ie)}e.dateToIsoString=w;function S(O){return new Date(O)}e.isoStringToStandardDate=S;function A(O){return new Date(O)}e.toStandardDate=A;function R(O){return new Date(O)}e.newDate=R;function I(O,C){C=C??0;var N=O.getMilliseconds()*e.NANOS_PER_MILLISECOND;return be(C,N)}e.totalNanoseconds=I;function j(O){var C=O.getSeconds()>=O.getUTCSeconds()?O.getSeconds()-O.getUTCSeconds():O.getSeconds()-O.getUTCSeconds()+60,N=O.getTimezoneOffset();return N===0?0+C:-1*N*e.SECONDS_PER_MINUTE+C}e.timeZoneOffsetInSeconds=j;function M(O){return re(O,e.YEAR_RANGE,"Year")}e.assertValidYear=M;function G(O){return re(O,e.MONTH_OF_YEAR_RANGE,"Month")}e.assertValidMonth=G;function H(O){return re(O,e.DAY_OF_MONTH_RANGE,"Day")}e.assertValidDay=H;function ie(O){return re(O,e.HOUR_OF_DAY_RANGE,"Hour")}e.assertValidHour=ie;function ue(O){return re(O,e.MINUTE_OF_HOUR_RANGE,"Minute")}e.assertValidMinute=ue;function pe(O){return re(O,e.SECOND_OF_MINUTE_RANGE,"Second")}e.assertValidSecond=pe;function J(O){return re(O,e.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")}e.assertValidNanosecond=J;var _e=new Map,qe=function(O,C){return(0,o.newError)("".concat(C,' is expected to be a valid ZoneId but was: "').concat(O,'"'))};function Y(O,C){var N=_e.get(C);if(N!==!0){if(N===!1)throw qe(C,O);try{Intl.DateTimeFormat(void 0,{timeZone:C}),_e.set(C,!0)}catch{throw _e.set(C,!1),qe(C,O)}}}e.assertValidZoneId=Y;function re(O,C,N){if((0,a.assertNumberOrInteger)(O,N),!C.contains(O))throw(0,o.newError)("".concat(N," is expected to be in range ").concat(C.toString()," but was: ").concat(O.toString()));return O}function W(O,C,N){O=(0,i.int)(O),C=(0,i.int)(C),N=(0,i.int)(N);var L=O.multiply(e.SECONDS_PER_HOUR);return L=L.add(C.multiply(e.SECONDS_PER_MINUTE)),L.add(N)}function ce(O){return O=(0,i.int)(O),O.modulo(4).equals(0)?O.modulo(100).equals(0)?!!O.modulo(400).equals(0):!0:!1}function q(O,C){O=(0,i.int)(O),C=(0,i.int)(C);var N=O.div(C);return O.isPositive()!==C.isPositive()&&N.multiply(C).notEquals(O)&&(N=N.subtract(1)),N}e.floorDiv=q;function D(O,C){return O=(0,i.int)(O),C=(0,i.int)(C),O.subtract(q(O,C).multiply(C))}e.floorMod=D;function x(O,C){O=(0,i.int)(O),C=(0,i.int)(C);var N,L,Z=O.isNegative(),Ie=C.greaterThan(0);return Z&&Ie?O.equals(-1)?N="-0":N=O.add(1).toString():N=O.toString(),Ie&&(Z?L=Q(C.negate().add(2*e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND)):L=Q(C.add(e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND))),L!=null?N+L:N}function Q(O){return O=(0,i.int)(O),O.equals(0)?"":"."+U(O,9)}function ye(O){var C=(0,i.int)(O);return C.isNegative()||C.greaterThan(9999)?U(C,6,{usePositiveSign:!0}):U(C,4)}function U(O,C,N){O=(0,i.int)(O);var L=O.isNegative();L&&(O=O.negate());var Z=O.toString();if(C!=null)for(;Z.length<C;)Z="0"+Z;return L?"-"+Z:(N==null?void 0:N.usePositiveSign)===!0?"+"+Z:Z}function be(O,C){return O instanceof i.default?O.add(C):typeof O=="bigint"?O+BigInt(C):O+C}})(Id);var uE=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),cE=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Kp=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&uE(r,e,t);return cE(r,e),r},sE=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(ve,"__esModule",{value:!0});ve.isDateTime=ve.DateTime=ve.isLocalDateTime=ve.LocalDateTime=ve.isDate=ve.Date=ve.isTime=ve.Time=ve.isLocalTime=ve.LocalTime=ve.isDuration=ve.Duration=void 0;var z=Kp(Id),Rt=X,lE=ne,Br=Kp($e),Un={value:!0,enumerable:!1,configurable:!1,writable:!1},Zp="__isDuration__",Qp="__isLocalTime__",Xp="__isTime__",Jp="__isDate__",ey="__isLocalDateTime__",ty="__isDateTime__",ry=function(){function e(r,t,n,i){this.months=(0,Rt.assertNumberOrInteger)(r,"Months"),this.days=(0,Rt.assertNumberOrInteger)(t,"Days"),(0,Rt.assertNumberOrInteger)(n,"Seconds"),(0,Rt.assertNumberOrInteger)(i,"Nanoseconds"),this.seconds=z.normalizeSecondsForDuration(n,i),this.nanoseconds=z.normalizeNanosecondsForDuration(i),Object.freeze(this)}return e.prototype.toString=function(){return z.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},e}();ve.Duration=ry;Object.defineProperty(ry.prototype,Zp,Un);function fE(e){return Fn(e,Zp)}ve.isDuration=fE;var ny=function(){function e(r,t,n,i){this.hour=z.assertValidHour(r),this.minute=z.assertValidMinute(t),this.second=z.assertValidSecond(n),this.nanosecond=z.assertValidNanosecond(i),Object.freeze(this)}return e.fromStandardDate=function(r,t){io(r,t);var n=z.totalNanoseconds(r,t);return new e(r.getHours(),r.getMinutes(),r.getSeconds(),n instanceof Br.default?n.toInt():typeof n=="bigint"?(0,Br.int)(n).toInt():n)},e.prototype.toString=function(){return z.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},e}();ve.LocalTime=ny;Object.defineProperty(ny.prototype,Qp,Un);function dE(e){return Fn(e,Qp)}ve.isLocalTime=dE;var iy=function(){function e(r,t,n,i,o){this.hour=z.assertValidHour(r),this.minute=z.assertValidMinute(t),this.second=z.assertValidSecond(n),this.nanosecond=z.assertValidNanosecond(i),this.timeZoneOffsetSeconds=(0,Rt.assertNumberOrInteger)(o,"Time zone offset in seconds"),Object.freeze(this)}return e.fromStandardDate=function(r,t){return io(r,t),new e(r.getHours(),r.getMinutes(),r.getSeconds(),(0,Br.toNumber)(z.totalNanoseconds(r,t)),z.timeZoneOffsetInSeconds(r))},e.prototype.toString=function(){return z.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+z.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},e}();ve.Time=iy;Object.defineProperty(iy.prototype,Xp,Un);function hE(e){return Fn(e,Xp)}ve.isTime=hE;var oy=function(){function e(r,t,n){this.year=z.assertValidYear(r),this.month=z.assertValidMonth(t),this.day=z.assertValidDay(n),Object.freeze(this)}return e.fromStandardDate=function(r){return io(r),new e(r.getFullYear(),r.getMonth()+1,r.getDate())},e.prototype.toStandardDate=function(){return z.isoStringToStandardDate(this.toString())},e.prototype.toString=function(){return z.dateToIsoString(this.year,this.month,this.day)},e}();ve.Date=oy;Object.defineProperty(oy.prototype,Jp,Un);function vE(e){return Fn(e,Jp)}ve.isDate=vE;var ay=function(){function e(r,t,n,i,o,a,c){this.year=z.assertValidYear(r),this.month=z.assertValidMonth(t),this.day=z.assertValidDay(n),this.hour=z.assertValidHour(i),this.minute=z.assertValidMinute(o),this.second=z.assertValidSecond(a),this.nanosecond=z.assertValidNanosecond(c),Object.freeze(this)}return e.fromStandardDate=function(r,t){return io(r,t),new e(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),(0,Br.toNumber)(z.totalNanoseconds(r,t)))},e.prototype.toStandardDate=function(){return z.isoStringToStandardDate(this.toString())},e.prototype.toString=function(){return cy(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},e}();ve.LocalDateTime=ay;Object.defineProperty(ay.prototype,ey,Un);function _E(e){return Fn(e,ey)}ve.isLocalDateTime=_E;var uy=function(){function e(r,t,n,i,o,a,c,s,u){this.year=z.assertValidYear(r),this.month=z.assertValidMonth(t),this.day=z.assertValidDay(n),this.hour=z.assertValidHour(i),this.minute=z.assertValidMinute(o),this.second=z.assertValidSecond(a),this.nanosecond=z.assertValidNanosecond(c);var l=sE(yE(s,u),2),h=l[0],_=l[1];this.timeZoneOffsetSeconds=h,this.timeZoneId=_??void 0,Object.freeze(this)}return e.fromStandardDate=function(r,t){return io(r,t),new e(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),(0,Br.toNumber)(z.totalNanoseconds(r,t)),z.timeZoneOffsetInSeconds(r),null)},e.prototype.toStandardDate=function(){return z.toStandardDate(this._toUTC())},e.prototype.toString=function(){var r,t=cy(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),n=this.timeZoneOffsetSeconds!=null?z.timeZoneOffsetToIsoString((r=this.timeZoneOffsetSeconds)!==null&&r!==void 0?r:0):"",i=this.timeZoneId!=null?"[".concat(this.timeZoneId,"]"):"";return t+n+i},e.prototype._toUTC=function(){var r;if(this.timeZoneOffsetSeconds===void 0)throw new Error("Requires DateTime created with time zone offset");var t=z.localDateTimeToEpochSecond(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),n=t.subtract((r=this.timeZoneOffsetSeconds)!==null&&r!==void 0?r:0);return(0,Br.int)(n).multiply(1e3).add((0,Br.int)(this.nanosecond).div(1e6)).toNumber()},e}();ve.DateTime=uy;Object.defineProperty(uy.prototype,ty,Un);function pE(e){return Fn(e,ty)}ve.isDateTime=pE;function Fn(e,r){return e!=null&&e[r]===!0}function cy(e,r,t,n,i,o,a){return z.dateToIsoString(e,r,t)+"T"+z.timeToIsoString(n,i,o,a)}function yE(e,r){var t=e!=null,n=r!=null&&r!=="";if(!t&&!n)throw(0,lE.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(e," and id: ").concat(r));var i=[void 0,void 0];return t&&((0,Rt.assertNumberOrInteger)(e,"Time zone offset in seconds"),i[0]=e),n&&((0,Rt.assertString)(r,"Time zone ID"),z.assertValidZoneId("Time zone ID",r),i[1]=r),i}function io(e,r){(0,Rt.assertValidDate)(e,"Standard date"),r!=null&&(0,Rt.assertNumberOrInteger)(r,"Nanosecond")}var ge={};Object.defineProperty(ge,"__esModule",{value:!0});ge.isPathSegment=ge.PathSegment=ge.isPath=ge.Path=ge.isUnboundRelationship=ge.UnboundRelationship=ge.isRelationship=ge.Relationship=ge.isNode=ge.Node=void 0;var Rd=Dt,oo={value:!0,enumerable:!1,configurable:!1,writable:!1},sy="__isNode__",ly="__isRelationship__",fy="__isUnboundRelationship__",dy="__isPath__",hy="__isPathSegment__";function ao(e,r){return e!=null&&e[r]===!0}var vy=function(){function e(r,t,n,i){this.identity=r,this.labels=t,this.properties=n,this.elementId=qi(i,function(){return r.toString()})}return e.prototype.toString=function(){for(var r="("+this.elementId,t=0;t<this.labels.length;t++)r+=":"+this.labels[t];var n=Object.keys(this.properties);if(n.length>0){r+=" {";for(var t=0;t<n.length;t++)t>0&&(r+=","),r+=n[t]+":"+(0,Rd.stringify)(this.properties[n[t]]);r+="}"}return r+=")",r},e}();ge.Node=vy;Object.defineProperty(vy.prototype,sy,oo);function bE(e){return ao(e,sy)}ge.isNode=bE;var Yu=function(){function e(r,t,n,i,o,a,c,s){this.identity=r,this.start=t,this.end=n,this.type=i,this.properties=o,this.elementId=qi(a,function(){return r.toString()}),this.startNodeElementId=qi(c,function(){return t.toString()}),this.endNodeElementId=qi(s,function(){return n.toString()})}return e.prototype.toString=function(){var r="("+this.startNodeElementId+")-[:"+this.type,t=Object.keys(this.properties);if(t.length>0){r+=" {";for(var n=0;n<t.length;n++)n>0&&(r+=","),r+=t[n]+":"+(0,Rd.stringify)(this.properties[t[n]]);r+="}"}return r+="]->("+this.endNodeElementId+")",r},e}();ge.Relationship=Yu;Object.defineProperty(Yu.prototype,ly,oo);function mE(e){return ao(e,ly)}ge.isRelationship=mE;var _y=function(){function e(r,t,n,i){this.identity=r,this.type=t,this.properties=n,this.elementId=qi(i,function(){return r.toString()})}return e.prototype.bind=function(r,t){return new Yu(this.identity,r,t,this.type,this.properties,this.elementId)},e.prototype.bindTo=function(r,t){return new Yu(this.identity,r.identity,t.identity,this.type,this.properties,this.elementId,r.elementId,t.elementId)},e.prototype.toString=function(){var r="-[:"+this.type,t=Object.keys(this.properties);if(t.length>0){r+=" {";for(var n=0;n<t.length;n++)n>0&&(r+=","),r+=t[n]+":"+(0,Rd.stringify)(this.properties[t[n]]);r+="}"}return r+="]->",r},e}();ge.UnboundRelationship=_y;Object.defineProperty(_y.prototype,fy,oo);function gE(e){return ao(e,fy)}ge.isUnboundRelationship=gE;var py=function(){function e(r,t,n){this.start=r,this.relationship=t,this.end=n}return e}();ge.PathSegment=py;Object.defineProperty(py.prototype,hy,oo);function OE(e){return ao(e,hy)}ge.isPathSegment=OE;var yy=function(){function e(r,t,n){this.start=r,this.end=t,this.segments=n,this.length=n.length}return e}();ge.Path=yy;Object.defineProperty(yy.prototype,dy,oo);function EE(e){return ao(e,dy)}ge.isPath=EE;function qi(e,r){return e??r()}var Ad={},Jl=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},ef=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},tf=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(Ad,"__esModule",{value:!0});var Kh=ne;function wE(e){var r={};return e.forEach(function(t,n){r[t]=n}),r}var TE=function(){function e(r,t,n){this.keys=r,this.length=r.length,this._fields=t,this._fieldLookup=n??wE(r)}return e.prototype.forEach=function(r){var t,n;try{for(var i=ef(this.entries()),o=i.next();!o.done;o=i.next()){var a=tf(o.value,2),c=a[0],s=a[1];r(s,c,this)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.map=function(r){var t,n,i=[];try{for(var o=ef(this.entries()),a=o.next();!a.done;a=o.next()){var c=tf(a.value,2),s=c[0],u=c[1];i.push(r(u,s,this))}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},e.prototype.entries=function(){var r;return Jl(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,[this.keys[r],this._fields[r]]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype.values=function(){var r;return Jl(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,this._fields[r]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype[Symbol.iterator]=function(){var r;return Jl(this,function(t){switch(t.label){case 0:r=0,t.label=1;case 1:return r<this.keys.length?[4,this._fields[r]]:[3,4];case 2:t.sent(),t.label=3;case 3:return r++,[3,1];case 4:return[2]}})},e.prototype.toObject=function(){var r,t,n={};try{for(var i=ef(this.entries()),o=i.next();!o.done;o=i.next()){var a=tf(o.value,2),c=a[0],s=a[1];n[c]=s}}catch(u){r={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}return n},e.prototype.get=function(r){var t;if(typeof r!="number"){if(t=this._fieldLookup[r],t===void 0)throw(0,Kh.newError)("This record has no field with key '".concat(r.toString(),"', available keys are: [")+this.keys.toString()+"].")}else t=r;if(t>this._fields.length-1||t<0)throw(0,Kh.newError)("This record has no field with index '"+t.toString()+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[t]},e.prototype.has=function(r){return typeof r=="number"?r>=0&&r<this._fields.length:this._fieldLookup[r]!==void 0},e}();Ad.default=TE;var An={};Object.defineProperty(An,"__esModule",{value:!0});An.isPoint=An.Point=void 0;var Ou=X,by="__isPoint__",my=function(){function e(r,t,n,i){this.srid=(0,Ou.assertNumberOrInteger)(r,"SRID"),this.x=(0,Ou.assertNumber)(t,"X coordinate"),this.y=(0,Ou.assertNumber)(n,"Y coordinate"),this.z=i==null?i:(0,Ou.assertNumber)(i,"Z coordinate"),Object.freeze(this)}return e.prototype.toString=function(){return this.z!=null&&!isNaN(this.z)?"Point{srid=".concat(Er(this.srid),", x=").concat(Er(this.x),", y=").concat(Er(this.y),", z=").concat(Er(this.z),"}"):"Point{srid=".concat(Er(this.srid),", x=").concat(Er(this.x),", y=").concat(Er(this.y),"}")},e}();An.Point=my;function Er(e){return Number.isInteger(e)?e.toString()+".0":e.toString()}Object.defineProperty(my.prototype,by,{value:!0,enumerable:!1,configurable:!1,writable:!1});function SE(e){var r=e;return e!=null&&r[by]===!0}An.isPoint=SE;var Le={},ee={},Zt={};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.FailedObserver=Zt.CompletedObserver=void 0;var PE=function(){function e(){}return e.prototype.subscribe=function(r){Hi(r,r.onKeys,[]),Hi(r,r.onCompleted,{})},e.prototype.cancel=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.prepareToHandleSingleResponse=function(){},e.prototype.markCompleted=function(){},e.prototype.onError=function(r){throw new Error("CompletedObserver not supposed to call onError",{cause:r})},e}();Zt.CompletedObserver=PE;var CE=function(){function e(r){var t=r.error,n=r.onError;this._error=t,this._beforeError=n,this._observers=[],this.onError(t)}return e.prototype.subscribe=function(r){Hi(r,r.onError,this._error),this._observers.push(r)},e.prototype.onError=function(r){Hi(this,this._beforeError,r),this._observers.forEach(function(t){return Hi(t,t.onError,r)})},e.prototype.cancel=function(){},e.prototype.pause=function(){},e.prototype.resume=function(){},e.prototype.markCompleted=function(){},e.prototype.prepareToHandleSingleResponse=function(){},e}();Zt.FailedObserver=CE;function Hi(e,r,t){r!=null&&r.bind(e)(t)}var ar={},IE=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),RE=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),AE=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&IE(r,e,t);return RE(r,e),r},jE=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},ME=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(ar,"__esModule",{value:!0});ar.Bookmarks=void 0;var Zh=AE(X),NE="bookmarks",gy=function(){function e(r){this._values=kE(r)}return e.empty=function(){return $E},e.prototype.isEmpty=function(){return this._values.length===0},e.prototype.values=function(){return this._values},e.prototype[Symbol.iterator]=function(){return this._values[Symbol.iterator]()},e.prototype.asBeginTransactionParameters=function(){var r;return this.isEmpty()?{}:(r={},r[NE]=this._values,r)},e}();ar.Bookmarks=gy;var $E=new gy(null);function kE(e){if(e==null||e==="")return[];if(Zh.isString(e))return[e];if(Array.isArray(e)){for(var r=new Set,t=Oy(e),n=0;n<t.length;n++){var i=t[n];if(i!=null){if(!Zh.isString(i))throw new TypeError("Bookmark value should be a string, given: '".concat(i,"'"));r.add(i)}}return ME([],jE(r),!1)}throw new TypeError("Bookmarks should either be a string or a string array, given: '".concat(e,"'"))}function Oy(e){return e.reduce(function(r,t){return Array.isArray(t)?r.concat(Oy(t)):r.concat(t)},[])}var B={};Object.defineProperty(B,"__esModule",{value:!0});B.TELEMETRY_APIS=B.BOLT_PROTOCOL_V5_7=B.BOLT_PROTOCOL_V5_6=B.BOLT_PROTOCOL_V5_5=B.BOLT_PROTOCOL_V5_4=B.BOLT_PROTOCOL_V5_3=B.BOLT_PROTOCOL_V5_2=B.BOLT_PROTOCOL_V5_1=B.BOLT_PROTOCOL_V5_0=B.BOLT_PROTOCOL_V4_4=B.BOLT_PROTOCOL_V4_3=B.BOLT_PROTOCOL_V4_2=B.BOLT_PROTOCOL_V4_1=B.BOLT_PROTOCOL_V4_0=B.BOLT_PROTOCOL_V3=B.BOLT_PROTOCOL_V2=B.BOLT_PROTOCOL_V1=B.DEFAULT_POOL_MAX_SIZE=B.DEFAULT_POOL_ACQUISITION_TIMEOUT=B.DEFAULT_CONNECTION_TIMEOUT_MILLIS=B.ACCESS_MODE_WRITE=B.ACCESS_MODE_READ=B.FETCH_ALL=void 0;var DE=-1;B.FETCH_ALL=DE;var LE=60*1e3;B.DEFAULT_POOL_ACQUISITION_TIMEOUT=LE;var UE=100;B.DEFAULT_POOL_MAX_SIZE=UE;var FE=3e4;B.DEFAULT_CONNECTION_TIMEOUT_MILLIS=FE;var BE="READ";B.ACCESS_MODE_READ=BE;var WE="WRITE";B.ACCESS_MODE_WRITE=WE;var xE=1;B.BOLT_PROTOCOL_V1=xE;var VE=2;B.BOLT_PROTOCOL_V2=VE;var qE=3;B.BOLT_PROTOCOL_V3=qE;var HE=4;B.BOLT_PROTOCOL_V4_0=HE;var zE=4.1;B.BOLT_PROTOCOL_V4_1=zE;var GE=4.2;B.BOLT_PROTOCOL_V4_2=GE;var YE=4.3;B.BOLT_PROTOCOL_V4_3=YE;var KE=4.4;B.BOLT_PROTOCOL_V4_4=KE;var ZE=5;B.BOLT_PROTOCOL_V5_0=ZE;var QE=5.1;B.BOLT_PROTOCOL_V5_1=QE;var XE=5.2;B.BOLT_PROTOCOL_V5_2=XE;var JE=5.3;B.BOLT_PROTOCOL_V5_3=JE;var ew=5.4;B.BOLT_PROTOCOL_V5_4=ew;var tw=5.5;B.BOLT_PROTOCOL_V5_5=tw;var rw=5.6;B.BOLT_PROTOCOL_V5_6=rw;var nw=5.7;B.BOLT_PROTOCOL_V5_7=nw;var iw={MANAGED_TRANSACTION:0,UNMANAGED_TRANSACTION:1,AUTO_COMMIT_TRANSACTION:2,EXECUTE_QUERY:3};B.TELEMETRY_APIS=iw;var lt={},Xr={},ow=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),vn;Object.defineProperty(Xr,"__esModule",{value:!0});Xr.Logger=void 0;var Ey=ne,Vf="error",qf="warn",Qi="info",Hf="debug",aw=Qi,Ku=(vn={},vn[Vf]=0,vn[qf]=1,vn[Qi]=2,vn[Hf]=3,vn),wy=function(){function e(r,t){this._level=r,this._loggerFunction=t}return e.create=function(r){if((r==null?void 0:r.logging)!=null){var t=r.logging,n=sw(t),i=lw(t);return new e(n,i)}return this.noOp()},e.noOp=function(){return cw},e.prototype.isErrorEnabled=function(){return Eu(this._level,Vf)},e.prototype.error=function(r){this.isErrorEnabled()&&this._loggerFunction(Vf,r)},e.prototype.isWarnEnabled=function(){return Eu(this._level,qf)},e.prototype.warn=function(r){this.isWarnEnabled()&&this._loggerFunction(qf,r)},e.prototype.isInfoEnabled=function(){return Eu(this._level,Qi)},e.prototype.info=function(r){this.isInfoEnabled()&&this._loggerFunction(Qi,r)},e.prototype.isDebugEnabled=function(){return Eu(this._level,Hf)},e.prototype.debug=function(r){this.isDebugEnabled()&&this._loggerFunction(Hf,r)},e}();Xr.Logger=wy;var uw=function(e){ow(r,e);function r(){return e.call(this,Qi,function(t,n){})||this}return r.prototype.isErrorEnabled=function(){return!1},r.prototype.error=function(t){},r.prototype.isWarnEnabled=function(){return!1},r.prototype.warn=function(t){},r.prototype.isInfoEnabled=function(){return!1},r.prototype.info=function(t){},r.prototype.isDebugEnabled=function(){return!1},r.prototype.debug=function(t){},r}(wy),cw=new uw;function Eu(e,r){return Ku[e]>=Ku[r]}function sw(e){if((e==null?void 0:e.level)!=null){var r=e.level,t=Ku[r];if(t==null&&t!==0)throw(0,Ey.newError)("Illegal logging level: ".concat(r,". Supported levels are: ").concat(Object.keys(Ku).toString()));return r}return aw}function lw(e){var r,t;if((e==null?void 0:e.logger)!=null){var n=e.logger;if(n!=null&&typeof n=="function")return n}throw(0,Ey.newError)("Illegal logger function: ".concat((t=(r=e==null?void 0:e.logger)===null||r===void 0?void 0:r.toString())!==null&&t!==void 0?t:"undefined"))}var Ty=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zi=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(c,s)}u((n=n.apply(e,r||[])).next())})},Gi=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(lt,"__esModule",{value:!0});lt.EMPTY_CONNECTION_HOLDER=lt.ReadOnlyConnectionHolder=lt.ConnectionHolder=void 0;var fw=ne,dw=X,hw=B,Qh=ar,vw=Xr,jd=function(){function e(r){var t=r.mode,n=r.database,i=n===void 0?"":n,o=r.bookmarks,a=r.connectionProvider,c=r.impersonatedUser,s=r.onDatabaseNameResolved,u=r.getConnectionAcquistionBookmarks,l=r.auth,h=r.log;this._mode=t??hw.ACCESS_MODE_WRITE,this._closed=!1,this._database=i!=null?(0,dw.assertString)(i,"database"):"",this._bookmarks=o??Qh.Bookmarks.empty(),this._connectionProvider=a,this._impersonatedUser=c,this._referenceCount=0,this._connectionPromise=Promise.resolve(null),this._onDatabaseNameResolved=s,this._auth=l,this._log=h,this._logError=this._logError.bind(this),this._getConnectionAcquistionBookmarks=u??function(){return Promise.resolve(Qh.Bookmarks.empty())}}return e.prototype.mode=function(){return this._mode},e.prototype.database=function(){return this._database},e.prototype.setDatabase=function(r){this._database=r},e.prototype.bookmarks=function(){return this._bookmarks},e.prototype.connectionProvider=function(){return this._connectionProvider},e.prototype.referenceCount=function(){return this._referenceCount},e.prototype.initializeConnection=function(){if(this._referenceCount===0&&this._connectionProvider!=null)this._connectionPromise=this._createConnectionPromise(this._connectionProvider);else return this._referenceCount++,!1;return this._referenceCount++,!0},e.prototype._createConnectionPromise=function(r){return zi(this,void 0,void 0,function(){var t,n,i;return Gi(this,function(o){switch(o.label){case 0:return n=(t=r).acquireConnection,i={accessMode:this._mode,database:this._database},[4,this._getBookmarks()];case 1:return[4,n.apply(t,[(i.bookmarks=o.sent(),i.impersonatedUser=this._impersonatedUser,i.onDatabaseNameResolved=this._onDatabaseNameResolved,i.auth=this._auth,i)])];case 2:return[2,o.sent()]}})})},e.prototype._getBookmarks=function(){return zi(this,void 0,void 0,function(){return Gi(this,function(r){switch(r.label){case 0:return[4,this._getConnectionAcquistionBookmarks()];case 1:return[2,r.sent()]}})})},e.prototype.getConnection=function(){return this._connectionPromise},e.prototype.releaseConnection=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount--,this._referenceCount===0?this._releaseConnection():this._connectionPromise)},e.prototype.close=function(r){return this._closed=!0,this._referenceCount===0?this._connectionPromise:(this._referenceCount=0,this._releaseConnection(r))},e.prototype.log=function(){return this._log},e.prototype._releaseConnection=function(r){return this._connectionPromise=this._connectionPromise.then(function(t){return t!=null?t.isOpen()&&(t.hasOngoingObservableRequests()||r===!0)?t.resetAndFlush().catch(yw).then(function(){return t.release().then(function(){return null})}):t.release().then(function(){return null}):Promise.resolve(null)}).catch(this._logError),this._connectionPromise},e.prototype._logError=function(r){return this._log.isWarnEnabled()&&this._log.warn("ConnectionHolder got an error while releasing the connection. Error ".concat(r,". Stacktrace: ").concat(r.stack)),null},e}();lt.ConnectionHolder=jd;var Sy=function(e){Ty(r,e);function r(t){var n=e.call(this,{mode:t.mode(),database:t.database(),bookmarks:t.bookmarks(),getConnectionAcquistionBookmarks:t._getConnectionAcquistionBookmarks,connectionProvider:t.connectionProvider(),log:t.log()})||this;return n._connectionHolder=t,n}return r.prototype.initializeConnection=function(){return this._connectionHolder.referenceCount()!==0},r.prototype.getConnection=function(){return this._connectionHolder.getConnection()},r.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},r.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},r}(jd);lt.ReadOnlyConnectionHolder=Sy;lt.default=Sy;var _w=function(e){Ty(r,e);function r(){return e.call(this,{log:vw.Logger.create({})})||this}return r.prototype.mode=function(){},r.prototype.database=function(){},r.prototype.initializeConnection=function(){return!0},r.prototype.getConnection=function(){return zi(this,void 0,void 0,function(){return Gi(this,function(t){switch(t.label){case 0:return[4,Promise.reject((0,fw.newError)("This connection holder does not serve connections"))];case 1:return[2,t.sent()]}})})},r.prototype.releaseConnection=function(){return zi(this,void 0,void 0,function(){return Gi(this,function(t){switch(t.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,t.sent()]}})})},r.prototype.close=function(){return zi(this,void 0,void 0,function(){return Gi(this,function(t){switch(t.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,t.sent()]}})})},r}(jd),pw=new _w;lt.EMPTY_CONNECTION_HOLDER=pw;function yw(e){return null}var Bn={},bw=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),mw=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),gw=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&bw(r,e,t);return mw(r,e),r};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.TxConfig=void 0;var Xi=gw(X),Ow=ne,Ew=$e,Py=function(){function e(r,t){Cw(r),this.timeout=Tw(r,t),this.metadata=Pw(r)}return e.empty=function(){return ww},e.prototype.isEmpty=function(){return Object.values(this).every(function(r){return r==null})},e}();Bn.TxConfig=Py;var ww=new Py({});function Tw(e,r){if(Xi.isObject(e)&&e.timeout!=null){Xi.assertNumberOrInteger(e.timeout,"Transaction timeout"),Sw(e)&&(r==null?void 0:r.isInfoEnabled())===!0&&(r==null||r.info("Transaction timeout expected to be an integer, got: ".concat(e.timeout,". The value will be rounded up.")));var t=(0,Ew.int)(e.timeout,{ceilFloat:!0});if(t.isNegative())throw(0,Ow.newError)("Transaction timeout should not be negative");return t}return null}function Sw(e){return typeof e.timeout=="number"&&!Number.isInteger(e.timeout)}function Pw(e){if(Xi.isObject(e)&&e.metadata!=null){var r=e.metadata;if(Xi.assertObject(r,"config.metadata"),Object.keys(r).length!==0)return r}return null}function Cw(e){e!=null&&Xi.assertObject(e,"Transaction config")}var uo={},zf=f&&f.__assign||function(){return zf=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},zf.apply(this,arguments)},Iw=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(c,s)}u((n=n.apply(e,r||[])).next())})},Rw=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Aw=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},jw=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(uo,"__esModule",{value:!0});uo.TransactionExecutor=void 0;var Ci=ne,Mw=B,Nw=30*1e3,$w=1e3,kw=2,Dw=.2;function Lw(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];return setTimeout.apply(void 0,jw([e,r],Aw(t),!1))}function Uw(e){return clearTimeout(e)}var Fw=function(){function e(r,t,n,i,o){o===void 0&&(o={setTimeout:Lw,clearTimeout:Uw}),this._maxRetryTimeMs=wu(r,Nw),this._initialRetryDelayMs=wu(t,$w),this._multiplier=wu(n,kw),this._jitterFactor=wu(i,Dw),this._setTimeout=o.setTimeout,this._clearTimeout=o.clearTimeout,this._inFlightTimeoutIds=[],this.pipelineBegin=!1,this.telemetryApi=Mw.TELEMETRY_APIS.MANAGED_TRANSACTION,this._verifyAfterConstruction()}return e.prototype.execute=function(r,t,n){var i=this,o={apiTransactionConfig:{api:this.telemetryApi,onTelemetrySuccess:function(){o.apiTransactionConfig=void 0}}};return new Promise(function(a,c){i._executeTransactionInsidePromise(r,t,a,c,n,o).catch(c)}).catch(function(a){var c=Date.now(),s=i._initialRetryDelayMs;return i._retryTransactionPromise(r,t,a,c,s,n,o)})},e.prototype.close=function(){var r=this;this._inFlightTimeoutIds.forEach(function(t){return r._clearTimeout(t)}),this._inFlightTimeoutIds=[]},e.prototype._retryTransactionPromise=function(r,t,n,i,o,a,c){var s=this,u=Date.now()-i;return u>this._maxRetryTimeMs||!(0,Ci.isRetriableError)(n)?Promise.reject(n):new Promise(function(l,h){var _=s._computeDelayWithJitter(o),y=s._setTimeout(function(){s._inFlightTimeoutIds=s._inFlightTimeoutIds.filter(function(m){return m!==y}),s._executeTransactionInsidePromise(r,t,l,h,a,c).catch(h)},_);s._inFlightTimeoutIds.push(y)}).catch(function(l){var h=o*s._multiplier;return s._retryTransactionPromise(r,t,l,i,h,a,c)})},e.prototype._executeTransactionInsidePromise=function(r,t,n,i,o,a){return Iw(this,void 0,void 0,function(){var c,s,u,l,h,_,y,m=this;return Rw(this,function(E){switch(E.label){case 0:return E.trys.push([0,4,,5]),s=r((a==null?void 0:a.apiTransactionConfig)!=null?zf({},a==null?void 0:a.apiTransactionConfig):void 0),this.pipelineBegin?(u=s,[3,3]):[3,1];case 1:return[4,s];case 2:u=E.sent(),E.label=3;case 3:return c=u,[3,5];case 4:return l=E.sent(),i(l),[2];case 5:return h=o??function(w){return w},_=h(c),y=this._safeExecuteTransactionWork(_,t),y.then(function(w){return m._handleTransactionWorkSuccess(w,c,n,i)}).catch(function(w){return m._handleTransactionWorkFailure(w,c,i)}),[2]}})})},e.prototype._safeExecuteTransactionWork=function(r,t){try{var n=t(r);return Promise.resolve(n)}catch(i){return Promise.reject(i)}},e.prototype._handleTransactionWorkSuccess=function(r,t,n,i){t.isOpen()?t.commit().then(function(){n(r)}).catch(function(o){i(o)}):n(r)},e.prototype._handleTransactionWorkFailure=function(r,t,n){t.isOpen()?t.rollback().catch(function(i){}).then(function(){return n(r)}).catch(n):n(r)},e.prototype._computeDelayWithJitter=function(r){var t=r*this._jitterFactor,n=r-t,i=r+t;return Math.random()*(i-n)+n},e.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,Ci.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs.toString());if(this._initialRetryDelayMs<0)throw(0,Ci.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs.toString());if(this._multiplier<1)throw(0,Ci.newError)("Multiplier should be >= 1.0: "+this._multiplier.toString());if(this._jitterFactor<0||this._jitterFactor>1)throw(0,Ci.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor.toFixed())},e}();uo.TransactionExecutor=Fw;function wu(e,r){return e??r}var Ze={},Zu=f&&f.__assign||function(){return Zu=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Zu.apply(this,arguments)},Cy=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.Url=Ze.formatIPv6Address=Ze.formatIPv4Address=Ze.defaultPortForScheme=Ze.parseDatabaseUrl=void 0;var Bw=X,Ww=7687,xw=7474,Vw=7473,Iy=function(){function e(r,t,n,i,o){this.scheme=r,this.host=t,this.port=n,this.hostAndPort=i,this.query=o}return e}();Ze.Url=Iy;function qw(e){var r;(0,Bw.assertString)(e,"URL");var t=zw(e),n=t1(t.url),i=t.schemeMissing?null:Gw(n.scheme),o=Yw(n.host),a=Xw(o),c=Kw(n.port,i),s="".concat(a,":").concat(c),u=Zw((r=n.query)!==null&&r!==void 0?r:Hw(n.resourceName),e);return new Iy(i,o,c,s,u)}Ze.parseDatabaseUrl=qw;function Hw(e){if(typeof e!="string")return null;var r=Cy(e.split("?"),2),t=r[1];return t}function zw(e){return e=e.trim(),e.includes("://")?{schemeMissing:!1,url:e}:{schemeMissing:!0,url:"none://".concat(e)}}function Gw(e){return e!=null?(e=e.trim(),e.charAt(e.length-1)===":"&&(e=e.substring(0,e.length-1)),e):null}function Yw(e,r){if(e==null)throw new Error("Unable to extract host from null or undefined URL");return e.trim()}function Kw(e,r){var t=typeof e=="string"?parseInt(e,10):e;return t!=null&&!isNaN(t)?t:Ay(r)}function Zw(e,r){var t=e!=null?Qw(e):null,n={};return t!=null&&t.split("&").forEach(function(i){var o=i.split("=");if(o.length!==2)throw new Error("Invalid parameters: '".concat(o.toString(),"' in URL '").concat(r,"'."));var a=Xh(o[0],"key",r),c=Xh(o[1],"value",r);if(n[a]!==void 0)throw new Error("Duplicated query parameters with key '".concat(a,"' in URL '").concat(r,"'"));n[a]=c}),n}function Qw(e){return e=(e??"").trim(),(e==null?void 0:e.charAt(0))==="?"&&(e=e.substring(1,e.length)),e}function Xh(e,r,t){if(e=(e??"").trim(),e==="")throw new Error("Illegal empty ".concat(r," in URL query '").concat(t,"'"));return e}function Ry(e){var r=e.charAt(0)==="[",t=e.charAt(e.length-1)==="]";if(!r&&!t)return"[".concat(e,"]");if(r&&t)return e;throw new Error("Illegal IPv6 address ".concat(e))}function Xw(e){if(e===""||e==null)throw new Error("Illegal host ".concat(e));var r=e.includes(":");return r?Ry(e):e}function Jw(e,r){return"".concat(e,":").concat(r)}Ze.formatIPv4Address=Jw;function e1(e,r){var t=Ry(e);return"".concat(t,":").concat(r)}Ze.formatIPv6Address=e1;function Ay(e){return e==="http"?xw:e==="https"?Vw:Ww}Ze.defaultPortForScheme=Ay;function t1(e){function r(c,s){var u=c.indexOf(s);return u>=0?[c.substring(0,u),c[u],c.substring(u+1)]:[c,"",""]}function t(c,s){var u=c.lastIndexOf(s);return u>=0?[c.substring(0,u),c[u],c.substring(u+1)]:["","",c]}function n(c,s,u){var l=r(c,s),h=r(l[2],u);return[h[0],h[2]]}function i(c){var s={},u;u=t(c,"@"),u[1]==="@"&&(s.userInfo=decodeURIComponent(u[0]),c=u[2]);var l=Cy(n(c,"[","]"),2),h=l[0],_=l[1];return h!==""?(s.host=h,u=r(_,":")):(u=r(c,":"),s.host=u[0]),u[1]===":"&&(s.port=u[2]),s}var o={},a;return a=r(e,":"),a[1]===":"&&(o.scheme=decodeURIComponent(a[0]),e=a[2]),a=r(e,"#"),a[1]==="#"&&(o.fragment=decodeURIComponent(a[2]),e=a[0]),a=r(e,"?"),a[1]==="?"&&(o.query=a[2],e=a[0]),e.startsWith("//")?(a=r(e.substr(2),"/"),o=Zu(Zu({},o),i(a[0])),o.path=a[1]+a[2]):o.path=e,o}var co={},r1=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),n1=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),i1=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&r1(r,e,t);return n1(r,e),r};Object.defineProperty(co,"__esModule",{value:!0});co.ServerAddress=void 0;var rf=X,o1=i1(Ze),a1=function(){function e(r,t,n,i){this._host=(0,rf.assertString)(r,"host"),this._resolved=t!=null?(0,rf.assertString)(t,"resolved"):null,this._port=(0,rf.assertNumber)(n,"port"),this._hostPort=i,this._stringValue=t!=null?"".concat(i,"(").concat(t,")"):"".concat(i)}return e.prototype.host=function(){return this._host},e.prototype.resolvedHost=function(){return this._resolved!=null?this._resolved:this._host},e.prototype.port=function(){return this._port},e.prototype.resolveWith=function(r){return new e(this._host,r,this._port,this._hostPort)},e.prototype.asHostPort=function(){return this._hostPort},e.prototype.asKey=function(){return this._hostPort},e.prototype.toString=function(){return this._stringValue},e.fromUrl=function(r){var t=o1.parseDatabaseUrl(r);return new e(t.host,null,t.port,t.hostAndPort)},e}();co.ServerAddress=a1;var jn={},Md={};Object.defineProperty(Md,"__esModule",{value:!0});var u1=function(){function e(){}return e.prototype.resolve=function(){throw new Error("Abstract function")},e.prototype._resolveToItself=function(r){return Promise.resolve([r])},e}();Md.default=u1;var hc={};Object.defineProperty(hc,"__esModule",{value:!0});var c1=co;function s1(e){return Promise.resolve([e])}var l1=function(){function e(r){this._resolverFunction=r??s1}return e.prototype.resolve=function(r){var t=this;return new Promise(function(n){return n(t._resolverFunction(r.asHostPort()))}).then(function(n){if(!Array.isArray(n))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(n));return n.map(function(i){return c1.ServerAddress.fromUrl(i)})})},e}();hc.default=l1;var jy=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jn,"__esModule",{value:!0});jn.ConfiguredCustomResolver=jn.BaseHostNameResolver=void 0;var f1=jy(Md);jn.BaseHostNameResolver=f1.default;var d1=jy(hc);jn.ConfiguredCustomResolver=d1.default;var My={},vc={};Object.defineProperty(vc,"__esModule",{value:!0});vc.fromVersion=void 0;function h1(e,r){r===void 0&&(r=function(){return{get userAgent(){var o;return o==null?void 0:o.userAgent}}});var t=r(),n=t.userAgent!=null?t.userAgent.split("(")[1].split(")")[0]:void 0,i=t.userAgent||void 0;return{product:"neo4j-javascript/".concat(e),platform:n,languageDetails:i}}vc.fromVersion=h1;(function(e){var r=f&&f.__createBinding||(Object.create?function(n,i,o,a){a===void 0&&(a=o);var c=Object.getOwnPropertyDescriptor(i,o);(!c||("get"in c?!i.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(n,a,c)}:function(n,i,o,a){a===void 0&&(a=o),n[a]=i[o]}),t=f&&f.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&r(i,n,o)};Object.defineProperty(e,"__esModule",{value:!0}),t(vc,e)})(My);var Ny={},Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.DEFAULT_ACQUISITION_TIMEOUT=Qt.DEFAULT_MAX_SIZE=void 0;var Wu=100;Qt.DEFAULT_MAX_SIZE=Wu;var xu=60*1e3;Qt.DEFAULT_ACQUISITION_TIMEOUT=xu;var v1=function(){function e(r,t){this.maxSize=Jh(r,Wu),this.acquisitionTimeout=Jh(t,xu)}return e.defaultConfig=function(){return new e(Wu,xu)},e.fromDriverConfig=function(r){var t=Gf(r.maxConnectionPoolSize)?r.maxConnectionPoolSize:Wu,n=Gf(r.connectionAcquisitionTimeout)?r.connectionAcquisitionTimeout:xu;return new e(t,n)},e}();Qt.default=v1;function Jh(e,r){return Gf(e)?e:r}function Gf(e){return e===0||e!=null}var Nd={},Je=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(c,s)}u((n=n.apply(e,r||[])).next())})},et=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},_1=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nd,"__esModule",{value:!0});var p1=_1(Qt),ev=ne,y1=Xr,b1=function(){function e(r){var t=r.create,n=t===void 0?function(R,I,j){return Je(A,void 0,void 0,function(){return et(this,function(M){switch(M.label){case 0:return[4,Promise.reject(new Error("Not implemented"))];case 1:return[2,M.sent()]}})})}:t,i=r.destroy,o=i===void 0?function(R){return Je(A,void 0,void 0,function(){return et(this,function(I){switch(I.label){case 0:return[4,Promise.resolve()];case 1:return[2,I.sent()]}})})}:i,a=r.validateOnAcquire,c=a===void 0?function(R,I){return!0}:a,s=r.validateOnRelease,u=s===void 0?function(R){return!0}:s,l=r.installIdleObserver,h=l===void 0?function(R,I){}:l,_=r.removeIdleObserver,y=_===void 0?function(R){}:_,m=r.config,E=m===void 0?p1.default.defaultConfig():m,w=r.log,S=w===void 0?y1.Logger.noOp():w,A=this;this._create=n,this._destroy=o,this._validateOnAcquire=c,this._validateOnRelease=u,this._installIdleObserver=h,this._removeIdleObserver=y,this._maxSize=E.maxSize,this._acquisitionTimeout=E.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=S,this._closed=!1}return e.prototype.acquire=function(r,t,n){return Je(this,void 0,void 0,function(){var i,o,a,c=this;return et(this,function(s){switch(s.label){case 0:return i=t.asKey(),o=this._acquireRequests,a=o[i],a==null&&(o[i]=[]),[4,new Promise(function(u,l){var h=setTimeout(function(){var y=o[i];if(y!=null&&(o[i]=y.filter(function(w){return w!==_})),!_.isCompleted()){var m=c.activeResourceCount(t),E=c.has(t)?c._pools[i].length:0;_.reject((0,ev.newError)("Connection acquisition timed out in ".concat(c._acquisitionTimeout," ms. Pool status: Active conn count = ").concat(m,", Idle conn count = ").concat(E,".")))}},c._acquisitionTimeout);typeof h=="object"&&h.unref();var _=new m1(i,r,n,u,l,h,c._log);o[i].push(_),c._processPendingAcquireRequests(t)})];case 1:return[2,s.sent()]}})})},e.prototype.purge=function(r){return Je(this,void 0,void 0,function(){return et(this,function(t){switch(t.label){case 0:return[4,this._purgeKey(r.asKey())];case 1:return[2,t.sent()]}})})},e.prototype.apply=function(r,t){var n=r.asKey();n in this._pools&&this._pools[n].apply(t)},e.prototype.close=function(){return Je(this,void 0,void 0,function(){var r=this;return et(this,function(t){switch(t.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(n){return Je(r,void 0,void 0,function(){return et(this,function(i){switch(i.label){case 0:return[4,this._purgeKey(n)];case 1:return[2,i.sent()]}})})})).then()];case 1:return[2,t.sent()]}})})},e.prototype.keepAll=function(r){return Je(this,void 0,void 0,function(){var t,n,i,o=this;return et(this,function(a){switch(a.label){case 0:return t=r.map(function(c){return c.asKey()}),n=Object.keys(this._pools),i=n.filter(function(c){return!t.includes(c)}),[4,Promise.all(i.map(function(c){return Je(o,void 0,void 0,function(){return et(this,function(s){switch(s.label){case 0:return[4,this._purgeKey(c)];case 1:return[2,s.sent()]}})})})).then()];case 1:return[2,a.sent()]}})})},e.prototype.has=function(r){return r.asKey()in this._pools},e.prototype.activeResourceCount=function(r){var t;return(t=this._activeResourceCounts[r.asKey()])!==null&&t!==void 0?t:0},e.prototype._getOrInitializePoolFor=function(r){var t=this._pools[r];return t==null&&(t=new g1,this._pools[r]=t,this._pendingCreates[r]=0),t},e.prototype._acquire=function(r,t,n){return Je(this,void 0,void 0,function(){var i,o,a,c,s,l,u,l,h,_=this;return et(this,function(y){switch(y.label){case 0:if(this._closed)throw(0,ev.newError)("Pool is closed, it is no more able to serve requests.");if(i=t.asKey(),o=this._getOrInitializePoolFor(i),n)return[3,10];y.label=1;case 1:if(!(o.length>0))return[3,10];if(a=o.pop(),a==null)return[3,1];tv(i,this._activeResourceCounts),this._removeIdleObserver!=null&&this._removeIdleObserver(a),c=!1,y.label=2;case 2:return y.trys.push([2,4,,6]),[4,this._validateOnAcquire(r,a)];case 3:return c=y.sent(),[3,6];case 4:return s=y.sent(),nf(i,this._activeResourceCounts),o.removeInUse(a),[4,this._destroy(a)];case 5:throw y.sent(),s;case 6:return c?(this._log.isDebugEnabled()&&this._log.debug("".concat(a," acquired from the pool ").concat(i)),[2,{resource:a,pool:o}]):[3,7];case 7:return nf(i,this._activeResourceCounts),o.removeInUse(a),[4,this._destroy(a)];case 8:y.sent(),y.label=9;case 9:return[3,1];case 10:if(this._maxSize>0&&(l=this.activeResourceCount(t)+this._pendingCreates[i],l>=this._maxSize))return[2,{resource:null,pool:o}];this._pendingCreates[i]=this._pendingCreates[i]+1,y.label=11;case 11:return y.trys.push([11,,15,16]),l=this.activeResourceCount(t)+o.length,l>=this._maxSize&&n?(h=o.pop(),h==null?[3,13]:(this._removeIdleObserver!=null&&this._removeIdleObserver(h),o.removeInUse(h),[4,this._destroy(h)])):[3,13];case 12:y.sent(),y.label=13;case 13:return[4,this._create(r,t,function(m,E){return Je(_,void 0,void 0,function(){return et(this,function(w){switch(w.label){case 0:return[4,this._release(m,E,o)];case 1:return[2,w.sent()]}})})})];case 14:return u=y.sent(),o.pushInUse(u),tv(i,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(u," created for the pool ").concat(i)),[3,16];case 15:return this._pendingCreates[i]=this._pendingCreates[i]-1,[7];case 16:return[2,{resource:u,pool:o}]}})})},e.prototype._release=function(r,t,n){return Je(this,void 0,void 0,function(){var i,o=this;return et(this,function(a){switch(a.label){case 0:i=r.asKey(),a.label=1;case 1:return a.trys.push([1,,9,10]),n.isActive()?[4,this._validateOnRelease(t)]:[3,6];case 2:return a.sent()?[3,4]:(this._log.isDebugEnabled()&&this._log.debug("".concat(t," destroyed and can't be released to the pool ").concat(i," because it is not functional")),n.removeInUse(t),[4,this._destroy(t)]);case 3:return a.sent(),[3,5];case 4:this._installIdleObserver!=null&&this._installIdleObserver(t,{onError:function(c){o._log.debug("Idle connection ".concat(t," destroyed because of error: ").concat(c));var s=o._pools[i];s!=null&&(o._pools[i]=s.filter(function(u){return u!==t}),s.removeInUse(t)),o._destroy(t).catch(function(){})}}),n.push(t),this._log.isDebugEnabled()&&this._log.debug("".concat(t," released to the pool ").concat(i)),a.label=5;case 5:return[3,8];case 6:return this._log.isDebugEnabled()&&this._log.debug("".concat(t," destroyed and can't be released to the pool ").concat(i," because pool has been purged")),n.removeInUse(t),[4,this._destroy(t)];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:return nf(i,this._activeResourceCounts),this._processPendingAcquireRequests(r),[7];case 10:return[2]}})})},e.prototype._purgeKey=function(r){return Je(this,void 0,void 0,function(){var t,n,i;return et(this,function(o){switch(o.label){case 0:if(t=this._pools[r],n=[],t==null)return[3,2];for(;t.length>0;)i=t.pop(),i!=null&&(this._removeIdleObserver!=null&&this._removeIdleObserver(i),n.push(this._destroy(i)));return t.close(),delete this._pools[r],[4,Promise.all(n)];case 1:o.sent(),o.label=2;case 2:return[2]}})})},e.prototype._processPendingAcquireRequests=function(r){var t=this,n=r.asKey(),i=this._acquireRequests[n];if(i!=null){var o=i.shift();o!=null?this._acquire(o.context,r,o.requireNew).catch(function(a){return o.reject(a),{resource:null,pool:null}}).then(function(a){var c=a.resource,s=a.pool;c!=null&&s!=null?o.isCompleted()?t._release(r,c,s).catch(function(u){t._log.isDebugEnabled()&&t._log.debug("".concat(c," could not be release back to the pool. Cause: ").concat(u))}):o.resolve(c):o.isCompleted()||(t._acquireRequests[n]==null&&(t._acquireRequests[n]=[]),t._acquireRequests[n].unshift(o))}).catch(function(a){return o.reject(a)}):delete this._acquireRequests[n]}},e}();function tv(e,r){var t,n=(t=r[e])!==null&&t!==void 0?t:0;r[e]=n+1}function nf(e,r){var t,n=(t=r[e])!==null&&t!==void 0?t:0,i=n-1;i>0?r[e]=i:delete r[e]}var m1=function(){function e(r,t,n,i,o,a,c){this._key=r,this._context=t,this._resolve=i,this._reject=o,this._timeoutId=a,this._log=c,this._completed=!1,this._config=n??{}}return Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requireNew",{get:function(){var r;return(r=this._config.requireNew)!==null&&r!==void 0?r:!1},enumerable:!1,configurable:!0}),e.prototype.isCompleted=function(){return this._completed},e.prototype.resolve=function(r){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(r," acquired from the pool ").concat(this._key)),this._resolve(r))},e.prototype.reject=function(r){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(r))},e}(),g1=function(){function e(){this._active=!0,this._elements=[],this._elementsInUse=new Set}return e.prototype.isActive=function(){return this._active},e.prototype.close=function(){this._active=!1,this._elements=[],this._elementsInUse=new Set},e.prototype.filter=function(r){return this._elements=this._elements.filter(r),this},e.prototype.apply=function(r){this._elements.forEach(r),this._elementsInUse.forEach(r)},Object.defineProperty(e.prototype,"length",{get:function(){return this._elements.length},enumerable:!1,configurable:!0}),e.prototype.pop=function(){var r=this._elements.pop();return r!=null&&this._elementsInUse.add(r),r},e.prototype.push=function(r){return this._elementsInUse.delete(r),this._elements.push(r)},e.prototype.pushInUse=function(r){this._elementsInUse.add(r)},e.prototype.removeInUse=function(r){this._elementsInUse.delete(r)},e}();Nd.default=b1;(function(e){var r=f&&f.__createBinding||(Object.create?function(c,s,u,l){l===void 0&&(l=u);var h=Object.getOwnPropertyDescriptor(s,u);(!h||("get"in h?!s.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(c,l,h)}:function(c,s,u,l){l===void 0&&(l=u),c[l]=s[u]}),t=f&&f.__setModuleDefault||(Object.create?function(c,s){Object.defineProperty(c,"default",{enumerable:!0,value:s})}:function(c,s){c.default=s}),n=f&&f.__importStar||function(c){if(c&&c.__esModule)return c;var s={};if(c!=null)for(var u in c)u!=="default"&&Object.prototype.hasOwnProperty.call(c,u)&&r(s,c,u);return t(s,c),s},i=f&&f.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_MAX_SIZE=e.DEFAULT_ACQUISITION_TIMEOUT=e.PoolConfig=e.Pool=void 0;var o=n(Qt);e.PoolConfig=o.default,Object.defineProperty(e,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return o.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(e,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return o.DEFAULT_MAX_SIZE}});var a=i(Nd);e.Pool=a.default,e.default=a.default})(Ny);var O1=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),E1=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Ve=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&O1(r,e,t);return E1(r,e),r};Object.defineProperty(ee,"__esModule",{value:!0});ee.pool=ee.boltAgent=ee.objectUtil=ee.resolver=ee.serverAddress=ee.urlUtil=ee.logger=ee.transactionExecutor=ee.txConfig=ee.connectionHolder=ee.constants=ee.bookmarks=ee.observer=ee.temporalUtil=ee.util=void 0;var w1=Ve(X);ee.util=w1;var T1=Ve(Id);ee.temporalUtil=T1;var S1=Ve(Zt);ee.observer=S1;var P1=Ve(ar);ee.bookmarks=P1;var C1=Ve(B);ee.constants=C1;var I1=Ve(lt);ee.connectionHolder=I1;var R1=Ve(Bn);ee.txConfig=R1;var A1=Ve(uo);ee.transactionExecutor=A1;var j1=Ve(Xr);ee.logger=j1;var M1=Ve(Ze);ee.urlUtil=M1;var N1=Ve(co);ee.serverAddress=N1;var $1=Ve(jn);ee.resolver=$1;var k1=Ve(jt);ee.objectUtil=k1;var D1=Ve(My);ee.boltAgent=D1;var L1=Ve(Ny);ee.pool=L1;var Oe={},Ji=f&&f.__assign||function(){return Ji=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ji.apply(this,arguments)},U1=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),F1=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),B1=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&U1(r,e,t);return F1(r,e),r},W1=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},x1=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.buildNotificationsFromMetadata=Oe.buildGqlStatusObjectFromMetadata=Oe.polyfillNotification=Oe.polyfillGqlStatusObject=Oe.GqlStatusObject=Oe.Notification=Oe.notificationClassification=Oe.notificationCategory=Oe.notificationSeverityLevel=void 0;var V1=B1(Dt),of=ee,Bi=Sd,Yf={WARNING:{gql_status:"01N42",status_description:"warn: unknown warning"},NO_DATA:{gql_status:"02N42",status_description:"note: no data - unknown subcondition"},INFORMATION:{gql_status:"03N42",status_description:"info: unknown notification"},ERROR:{gql_status:"50N42",status_description:"error: general processing exception - unexpected error"}},so={WARNING:"WARNING",INFORMATION:"INFORMATION",UNKNOWN:"UNKNOWN"};Oe.notificationSeverityLevel=so;Object.freeze(so);var q1=Object.values(so),_c={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",DEPRECATION:"DEPRECATION",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",GENERIC:"GENERIC",SCHEMA:"SCHEMA",UNKNOWN:"UNKNOWN"};Oe.notificationCategory=_c;Object.freeze(_c);var H1=Object.values(_c),$y=_c;Oe.notificationClassification=$y;var pc=function(){function e(r){this.code=r.code,this.title=r.title,this.description=r.description,this.severity=r.severity,this.position=Ly(r.position),this.severityLevel=Uy(r.severity),this.rawSeverityLevel=r.severity,this.category=Fy(r.category),this.rawCategory=r.category}return e}();Oe.Notification=pc;var Ur=function(){function e(r){var t;this.gqlStatus=r.gql_status,this.statusDescription=r.status_description,this.diagnosticRecord=(t=r.diagnostic_record)!==null&&t!==void 0?t:{},this.position=this.diagnosticRecord._position!=null?Ly(this.diagnosticRecord._position):void 0,this.severity=Uy(this.diagnosticRecord._severity),this.rawSeverity=this.diagnosticRecord._severity,this.classification=Fy(this.diagnosticRecord._classification),this.rawClassification=this.diagnosticRecord._classification,this.isNotification=r.neo4j_code!=null,Object.freeze(this)}return Object.defineProperty(e.prototype,"diagnosticRecordAsJsonString",{get:function(){return V1.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),e}();Oe.GqlStatusObject=Ur;function ky(e){var r,t,n;if(e.neo4j_code!=null)return new pc({code:e.neo4j_code,title:e.title,description:e.description,severity:(r=e.diagnostic_record)===null||r===void 0?void 0:r._severity,category:(t=e.diagnostic_record)===null||t===void 0?void 0:t._classification,position:(n=e.diagnostic_record)===null||n===void 0?void 0:n._position})}Oe.polyfillNotification=ky;function Dy(e){var r,t=e.severity===so.WARNING?Yf.WARNING:Yf.INFORMATION,n={gql_status:t.gql_status,status_description:(r=e.description)!==null&&r!==void 0?r:t.status_description,neo4j_code:e.code,title:e.title,diagnostic_record:Ji({},Bi.rawPolyfilledDiagnosticRecord)};return e.severity!=null&&(n.diagnostic_record._severity=e.severity),e.category!=null&&(n.diagnostic_record._classification=e.category),e.position!=null&&(n.diagnostic_record._position=e.position),new Ur(n)}Oe.polyfillGqlStatusObject=Dy;var Wi={SUCCESS:new Ur({gql_status:"00000",status_description:"note: successful completion",diagnostic_record:Bi.rawPolyfilledDiagnosticRecord}),NO_DATA:new Ur({gql_status:"02000",status_description:"note: no data",diagnostic_record:Bi.rawPolyfilledDiagnosticRecord}),NO_DATA_UNKNOWN_SUBCONDITION:new Ur(Ji(Ji({},Yf.NO_DATA),{diagnostic_record:Bi.rawPolyfilledDiagnosticRecord})),OMITTED_RESULT:new Ur({gql_status:"00001",status_description:"note: successful completion - omitted result",diagnostic_record:Bi.rawPolyfilledDiagnosticRecord})};Object.freeze(Wi);function z1(e){var r,t;function n(a){return(a==null?void 0:a.have_records_streamed)===!0?Wi.SUCCESS:(a==null?void 0:a.has_keys)===!1?Wi.OMITTED_RESULT:(a==null?void 0:a.pulled)===!0?Wi.NO_DATA:Wi.NO_DATA_UNKNOWN_SUBCONDITION}if(e.statuses!=null)return e.statuses.map(function(a){return new Ur(a)});var i=n(e.stream_summary),o=x1([i],W1((t=(r=e.notifications)===null||r===void 0?void 0:r.map(Dy))!==null&&t!==void 0?t:[]),!1);return o.sort(function(a,c){return rv(a)-rv(c)})}Oe.buildGqlStatusObjectFromMetadata=z1;var G1=Object.freeze({"02":0,"01":1,"00":2});function rv(e){var r,t,n=(r=e.gqlStatus)===null||r===void 0?void 0:r.slice(0,2);return(t=G1[n])!==null&&t!==void 0?t:9999}function Y1(e){return e.notifications!=null?e.notifications.map(function(r){return new pc(r)}):e.statuses!=null?e.statuses.map(ky).filter(function(r){return r!=null}):[]}Oe.buildNotificationsFromMetadata=Y1;function Ly(e){return e==null?{}:{offset:of.util.toNumber(e.offset),line:of.util.toNumber(e.line),column:of.util.toNumber(e.column)}}function Uy(e){return q1.includes(e)?e:so.UNKNOWN}function Fy(e){return H1.includes(e)?e:$y.UNKNOWN}Oe.default=pc;Object.defineProperty(Le,"__esModule",{value:!0});Le.Stats=Le.QueryStatistics=Le.ProfiledPlan=Le.Plan=Le.ServerInfo=Le.queryType=void 0;var Kf=ee,nv=Oe,K1=function(){function e(r,t,n,i){var o,a,c;this.query={text:r,parameters:t},this.queryType=n.type,this.counters=new By((o=n.stats)!==null&&o!==void 0?o:{}),this.updateStatistics=this.counters,this.plan=n.plan!=null||n.profile!=null?new Zf((a=n.plan)!==null&&a!==void 0?a:n.profile):!1,this.profile=n.profile!=null?new Qf(n.profile):!1,this.notifications=(0,nv.buildNotificationsFromMetadata)(n),this.gqlStatusObjects=(0,nv.buildGqlStatusObjectFromMetadata)(n),this.server=new Wy(n.server,i),this.resultConsumedAfter=n.result_consumed_after,this.resultAvailableAfter=n.result_available_after,this.database={name:(c=n.db)!==null&&c!==void 0?c:null}}return e.prototype.hasPlan=function(){return this.plan instanceof Zf},e.prototype.hasProfile=function(){return this.profile instanceof Qf},e}(),Zf=function(){function e(r){this.operatorType=r.operatorType,this.identifiers=r.identifiers,this.arguments=r.args,this.children=r.children!=null?r.children.map(function(t){return new e(t)}):[]}return e}();Le.Plan=Zf;var Qf=function(){function e(r){this.operatorType=r.operatorType,this.identifiers=r.identifiers,this.arguments=r.args,this.dbHits=_n("dbHits",r),this.rows=_n("rows",r),this.pageCacheMisses=_n("pageCacheMisses",r),this.pageCacheHits=_n("pageCacheHits",r),this.pageCacheHitRatio=_n("pageCacheHitRatio",r),this.time=_n("time",r),this.children=r.children!=null?r.children.map(function(t){return new e(t)}):[]}return e.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},e}();Le.ProfiledPlan=Qf;var Z1=function(){function e(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0}return e}();Le.Stats=Z1;var By=function(){function e(r){var t=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(r).forEach(function(n){var i=n.replace(/(-\w)/g,function(o){return o[1].toUpperCase()});i in t._stats?t._stats[i]=Kf.util.toNumber(r[n]):i==="systemUpdates"?t._systemUpdates=Kf.util.toNumber(r[n]):i==="containsSystemUpdates"?t._containsSystemUpdates=r[n]:i==="containsUpdates"&&(t._containsUpdates=r[n])}),this._stats=Object.freeze(this._stats)}return e.prototype.containsUpdates=function(){var r=this;return this._containsUpdates!==void 0?this._containsUpdates:Object.keys(this._stats).reduce(function(t,n){return t+r._stats[n]},0)>0},e.prototype.updates=function(){return this._stats},e.prototype.containsSystemUpdates=function(){return this._containsSystemUpdates!==void 0?this._containsSystemUpdates:this._systemUpdates>0},e.prototype.systemUpdates=function(){return this._systemUpdates},e}();Le.QueryStatistics=By;var Wy=function(){function e(r,t){r!=null&&(this.address=r.address,this.agent=r.version),this.protocolVersion=t}return e}();Le.ServerInfo=Wy;function _n(e,r,t){if(t===void 0&&(t=0),r!==!1&&e in r){var n=r[e];return Kf.util.toNumber(n)}else return t}var Q1={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"};Le.queryType=Q1;Le.default=K1;var Mt={};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.notificationFilterDisabledClassification=Mt.notificationFilterDisabledCategory=Mt.notificationFilterMinimumSeverityLevel=void 0;var xy={OFF:"OFF",WARNING:"WARNING",INFORMATION:"INFORMATION"};Mt.notificationFilterMinimumSeverityLevel=xy;Object.freeze(xy);var $d={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",DEPRECATION:"DEPRECATION",GENERIC:"GENERIC",SCHEMA:"SCHEMA"};Mt.notificationFilterDisabledCategory=$d;Object.freeze($d);var X1=$d;Mt.notificationFilterDisabledClassification=X1;var J1=function(){function e(){throw this.minimumSeverityLevel=void 0,this.disabledCategories=void 0,this.disabledClassifications=void 0,new Error("Not implemented")}return e}();Mt.default=J1;var lo={},wr=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(c,s)}u((n=n.apply(e,r||[])).next())})},Tr=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},eT=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Vy;Object.defineProperty(lo,"__esModule",{value:!0});var tT=eT(Le),qy=ee,Ii=ne,rT=qy.connectionHolder.EMPTY_CONNECTION_HOLDER,nT=function(e){console.log("Uncaught error when processing result: "+e)},iT=function(e){},oT=function(e){},aT=function(){function e(r,t,n,i,o){o===void 0&&(o={high:Number.MAX_VALUE,low:Number.MAX_VALUE}),this[Vy]="Result",this._stack=uT(),this._streamObserverPromise=r,this._p=null,this._query=t,this._parameters=n??{},this._connectionHolder=i??rT,this._keys=null,this._summary=null,this._error=null,this._watermarks=o}return e.prototype.keys=function(){var r=this;return this._keys!==null?Promise.resolve(this._keys):this._error!==null?Promise.reject(this._error):new Promise(function(t,n){r._streamObserverPromise.then(function(i){return i.subscribe(r._decorateObserver({onKeys:function(o){return t(o)},onError:function(o){return n(o)}}))}).catch(n)})},e.prototype.summary=function(){var r=this;return this._summary!==null?Promise.resolve(this._summary):this._error!==null?Promise.reject(this._error):new Promise(function(t,n){r._streamObserverPromise.then(function(i){i.cancel(),i.subscribe(r._decorateObserver({onCompleted:function(o){return t(o)},onError:function(o){return n(o)}}))}).catch(n)})},e.prototype._getOrCreatePromise=function(){var r=this;return this._p==null&&(this._p=new Promise(function(t,n){var i=[],o={onNext:function(a){i.push(a)},onCompleted:function(a){t({records:i,summary:a})},onError:function(a){n(a)}};r.subscribe(o)})),this._p},e.prototype[Symbol.asyncIterator]=function(){var r=this;if(!this.isOpen()){var t=(0,Ii.newError)("Result is already consumed");return{next:function(){return Promise.reject(t)},peek:function(){return Promise.reject(t)}}}var n={paused:!0,firstRun:!0,finished:!1},i=function(){var c,s;if(n.streaming!=null){var u=(s=(c=n.queuedObserver)===null||c===void 0?void 0:c.size)!==null&&s!==void 0?s:0,l=u>=r._watermarks.high,h=u<=r._watermarks.low;l&&!n.paused?(n.paused=!0,n.streaming.pause()):(h&&n.paused||n.firstRun&&!l)&&(n.firstRun=!1,n.paused=!1,n.streaming.resume())}},o=function(){return wr(r,void 0,void 0,function(){var c;return Tr(this,function(s){switch(s.label){case 0:return n.queuedObserver!==void 0?[3,2]:(n.queuedObserver=this._createQueuedResultObserver(i),c=n,[4,this._subscribe(n.queuedObserver,!0).catch(function(){})]);case 1:c.streaming=s.sent(),i(),s.label=2;case 2:return[2,n.queuedObserver]}})})},a=function(c){if(c===void 0)throw(0,Ii.newError)("InvalidState: Result stream finished without Summary",Ii.PROTOCOL_ERROR);return!0};return{next:function(){return wr(r,void 0,void 0,function(){var c,s;return Tr(this,function(u){switch(u.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:n.summary}]:[4,o()];case 1:return c=u.sent(),[4,c.dequeue()];case 2:return s=u.sent(),s.done===!0&&(n.finished=s.done,n.summary=s.value),[2,s]}})})},return:function(c){return wr(r,void 0,void 0,function(){var s,u,l;return Tr(this,function(h){switch(h.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:c??n.summary}]:((l=n.streaming)===null||l===void 0||l.cancel(),[4,o()]);case 1:return s=h.sent(),[4,s.dequeueUntilDone()];case 2:return u=h.sent(),n.finished=!0,u.value=c??u.value,n.summary=u.value,[2,u]}})})},peek:function(){return wr(r,void 0,void 0,function(){var c;return Tr(this,function(s){switch(s.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:n.summary}]:[4,o()];case 1:return c=s.sent(),[4,c.head()];case 2:return[2,s.sent()]}})})}}},e.prototype.then=function(r,t){return this._getOrCreatePromise().then(r,t)},e.prototype.catch=function(r){return this._getOrCreatePromise().catch(r)},e.prototype.finally=function(r){return this._getOrCreatePromise().finally(r)},e.prototype.subscribe=function(r){this._subscribe(r).catch(function(){})},e.prototype.isOpen=function(){return this._summary===null&&this._error===null},e.prototype._subscribe=function(r,t){t===void 0&&(t=!1);var n=this._decorateObserver(r);return this._streamObserverPromise.then(function(i){return t&&i.pause(),i.subscribe(n),i}).catch(function(i){return n.onError!=null&&n.onError(i),Promise.reject(i)})},e.prototype._decorateObserver=function(r){var t=this,n,i,o,a=(n=r.onCompleted)!==null&&n!==void 0?n:iT,c=(i=r.onError)!==null&&i!==void 0?i:nT,s=(o=r.onKeys)!==null&&o!==void 0?o:oT,u=function(_){t._releaseConnectionAndGetSummary(_).then(function(y){return t._summary!==null?a.call(r,t._summary):(t._summary=y,a.call(r,y))}).catch(c)},l=function(_){t._connectionHolder.releaseConnection().then(function(){cT(_,t._stack),t._error=_,c.call(r,_)}).catch(c)},h=function(_){return t._keys=_,s.call(r,_)};return{onNext:r.onNext!=null?r.onNext.bind(r):void 0,onKeys:h,onCompleted:u,onError:l}},e.prototype._cancel=function(){this._summary===null&&this._error===null&&this._streamObserverPromise.then(function(r){return r.cancel()}).catch(function(){})},e.prototype._releaseConnectionAndGetSummary=function(r){var t=qy.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),n=t.validatedQuery,i=t.params,o=this._connectionHolder;return o.getConnection().then(function(a){return o.releaseConnection().then(function(){return a==null?void 0:a.getProtocolVersion()})},function(a){}).then(function(a){return new tT.default(n,i,r,a)})},e.prototype._createQueuedResultObserver=function(r){var t=this;function n(){var u={};return u.promise=new Promise(function(l,h){u.resolve=l,u.reject=h}),u}function i(u){return u instanceof Error}function o(){var u;return wr(this,void 0,void 0,function(){var l;return Tr(this,function(h){switch(h.label){case 0:if(a.length>0){if(l=(u=a.shift())!==null&&u!==void 0?u:(0,Ii.newError)("Unexpected empty buffer",Ii.PROTOCOL_ERROR),r(),i(l))throw l;return[2,l]}return c.resolvable=n(),[4,c.resolvable.promise];case 1:return[2,h.sent()]}})})}var a=[],c={resolvable:null},s={onNext:function(u){s._push({done:!1,value:u})},onCompleted:function(u){s._push({done:!0,value:u})},onError:function(u){s._push(u)},_push:function(u){if(c.resolvable!==null){var l=c.resolvable;c.resolvable=null,i(u)?l.reject(u):l.resolve(u)}else a.push(u),r()},dequeue:o,dequeueUntilDone:function(){return wr(t,void 0,void 0,function(){var u;return Tr(this,function(l){switch(l.label){case 0:return[4,o()];case 1:return u=l.sent(),u.done===!0?[2,u]:[3,0];case 2:return[2]}})})},head:function(){return wr(t,void 0,void 0,function(){var u,u,l;return Tr(this,function(h){switch(h.label){case 0:if(a.length>0){if(u=a[0],i(u))throw u;return[2,u]}c.resolvable=n(),h.label=1;case 1:return h.trys.push([1,3,4,5]),[4,c.resolvable.promise];case 2:return u=h.sent(),a.unshift(u),[2,u];case 3:throw l=h.sent(),a.unshift(l),l;case 4:return r(),[7];case 5:return[2]}})})},get size(){return a.length}};return s},e}();Vy=Symbol.toStringTag;function uT(){var e=new Error("");return e.stack!=null?e.stack.replace(/^Error(\n\r)*/,""):null}function cT(e,r){r!=null&&(e.stack=e.toString()+`
`+r)}lo.default=aT;var yc={};Object.defineProperty(yc,"__esModule",{value:!0});var sT=function(){function e(r,t,n){this.keys=r,this.records=t,this.summary=n}return e}();yc.default=sT;var fo={};Object.defineProperty(fo,"__esModule",{value:!0});fo.Releasable=void 0;var lT=function(){function e(){}return e.prototype.release=function(){throw new Error("Not implemented")},e}();fo.Releasable=lT;var fT=function(){function e(){}return e.prototype.acquireConnection=function(r){throw Error("Not implemented")},e.prototype.supportsMultiDb=function(){throw Error("Not implemented")},e.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},e.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},e.prototype.supportsSessionAuth=function(){throw Error("Not implemented")},e.prototype.verifyConnectivityAndGetServerInfo=function(r){throw Error("Not implemented")},e.prototype.verifyAuthentication=function(r){throw Error("Not implemented")},e.prototype.getNegotiatedProtocolVersion=function(){throw Error("Not Implemented")},e.prototype.close=function(){throw Error("Not implemented")},e}();fo.default=fT;var kd={};Object.defineProperty(kd,"__esModule",{value:!0});var dT=function(){function e(){}return e.prototype.beginTransaction=function(r){throw new Error("Not implemented")},e.prototype.run=function(r,t,n){throw new Error("Not implemented")},e.prototype.commitTransaction=function(r){throw new Error("Not implemented")},e.prototype.rollbackTransaction=function(r){throw new Error("Not implemented")},e.prototype.resetAndFlush=function(){throw new Error("Not implemented")},e.prototype.isOpen=function(){throw new Error("Not implemented")},e.prototype.getProtocolVersion=function(){throw new Error("Not implemented")},e.prototype.hasOngoingObservableRequests=function(){throw new Error("Not implemented")},e}();kd.default=dT;var bc={},iv=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(c,s)}u((n=n.apply(e,r||[])).next())})},ov=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},hT=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bc,"__esModule",{value:!0});var vT=X,Yi=lt,Vu=ar,_T=Bn,at=Zt,ct=ne,Hy=hT(lo),pT=function(){function e(r){var t=r.connectionHolder,n=r.onClose,i=r.onBookmarks,o=r.onConnection,a=r.reactive,c=r.fetchSize,s=r.impersonatedUser,u=r.highRecordWatermark,l=r.lowRecordWatermark,h=r.notificationFilter,_=r.apiTelemetryConfig,y=this;this._connectionHolder=t,this._reactive=a,this._state=rt.ACTIVE,this._onClose=n,this._onBookmarks=i,this._onConnection=o,this._onError=this._onErrorCallback.bind(this),this._fetchSize=c,this._onComplete=this._onCompleteCallback.bind(this),this._results=[],this._impersonatedUser=s,this._lowRecordWatermak=l,this._highRecordWatermark=u,this._bookmarks=Vu.Bookmarks.empty(),this._notificationFilter=h,this._apiTelemetryConfig=_,this._acceptActive=function(){},this._activePromise=new Promise(function(m,E){y._acceptActive=m})}return e.prototype._begin=function(r,t,n){var i=this;this._connectionHolder.getConnection().then(function(o){return iv(i,void 0,void 0,function(){var a,c=this;return ov(this,function(s){switch(s.label){case 0:return this._onConnection(),o==null?[3,2]:(a=this,[4,r()]);case 1:return a._bookmarks=s.sent(),[2,o.beginTransaction({bookmarks:this._bookmarks,txConfig:t,mode:this._connectionHolder.mode(),database:this._connectionHolder.database(),impersonatedUser:this._impersonatedUser,notificationFilter:this._notificationFilter,apiTelemetryConfig:this._apiTelemetryConfig,beforeError:function(u){n!=null&&n.onError(u),c._onError(u).catch(function(){})},afterComplete:function(u){n!=null&&n.onComplete(u),c._onComplete(u)}})];case 2:throw(0,ct.newError)("No connection available")}})})}).catch(function(o){n!=null&&n.onError(o),i._onError(o).catch(function(){})}).finally(function(){return i._acceptActive()})},e.prototype.run=function(r,t){var n=(0,vT.validateQueryAndParameters)(r,t),i=n.validatedQuery,o=n.params,a=this._state.run(i,o,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize,highRecordWatermark:this._highRecordWatermark,lowRecordWatermark:this._lowRecordWatermak,preparationJob:this._activePromise});return this._results.push(a),a},e.prototype.commit=function(){var r=this,t=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:function(n){return r._onCompleteCallback(n,r._bookmarks)},onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=t.state,this._onClose(),new Promise(function(n,i){t.result.subscribe({onCompleted:function(){return n()},onError:function(o){return i(o)}})})},e.prototype.rollback=function(){var r=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=r.state,this._onClose(),new Promise(function(t,n){r.result.subscribe({onCompleted:function(){return t()},onError:function(i){return n(i)}})})},e.prototype.isOpen=function(){return this._state===rt.ACTIVE},e.prototype.close=function(){return iv(this,void 0,void 0,function(){return ov(this,function(r){switch(r.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._onErrorCallback=function(r){return this._state===rt.FAILED?Promise.resolve(null):(this._state=rt.FAILED,this._onClose(),this._results.forEach(function(t){t.isOpen()&&t._streamObserverPromise.then(function(n){return n.onError(r)}).catch(function(n){})}),this._connectionHolder.releaseConnection())},e.prototype._onCompleteCallback=function(r,t){this._onBookmarks(new Vu.Bookmarks(r==null?void 0:r.bookmark),t??Vu.Bookmarks.empty(),r==null?void 0:r.db)},e}(),rt={ACTIVE:{commit:function(e){var r=e.connectionHolder,t=e.onError,n=e.onComplete,i=e.onConnection,o=e.pendingResults,a=e.preparationJob;return{result:av(!0,r,t,n,i,o,a),state:rt.SUCCEEDED}},rollback:function(e){var r=e.connectionHolder,t=e.onError,n=e.onComplete,i=e.onConnection,o=e.pendingResults,a=e.preparationJob;return{result:av(!1,r,t,n,i,o,a),state:rt.ROLLED_BACK}},run:function(e,r,t){var n=t.connectionHolder,i=t.onError,o=t.onComplete,a=t.onConnection,c=t.reactive,s=t.fetchSize,u=t.highRecordWatermark,l=t.lowRecordWatermark,h=t.preparationJob,_=h??Promise.resolve(),y=n.getConnection().then(function(m){return _.then(function(){return m})}).then(function(m){if(a(),m!=null)return m.run(e,r,{bookmarks:Vu.Bookmarks.empty(),txConfig:_T.TxConfig.empty(),beforeError:i,afterComplete:o,reactive:c,fetchSize:s,highRecordWatermark:u,lowRecordWatermark:l});throw(0,ct.newError)("No connection available")}).catch(function(m){return new at.FailedObserver({error:m,onError:i})});return yt(y,e,r,n,u,l)}},FAILED:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:yt(new at.FailedObserver({error:(0,ct.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:t}),"COMMIT",{},r,0,0),state:rt.FAILED}},rollback:function(e){var r=e.connectionHolder;return e.onError,e.onComplete,{result:yt(new at.CompletedObserver,"ROLLBACK",{},r,0,0),state:rt.FAILED}},run:function(e,r,t){var n=t.connectionHolder,i=t.onError;return t.onComplete,yt(new at.FailedObserver({error:(0,ct.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:i}),e,r,n,0,0)}},SUCCEEDED:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:yt(new at.FailedObserver({error:(0,ct.newError)("Cannot commit this transaction, because it has already been committed."),onError:t}),"COMMIT",{},Yi.EMPTY_CONNECTION_HOLDER,0,0),state:rt.SUCCEEDED,connectionHolder:r}},rollback:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:yt(new at.FailedObserver({error:(0,ct.newError)("Cannot rollback this transaction, because it has already been committed."),onError:t}),"ROLLBACK",{},Yi.EMPTY_CONNECTION_HOLDER,0,0),state:rt.SUCCEEDED,connectionHolder:r}},run:function(e,r,t){var n=t.connectionHolder,i=t.onError;return t.onComplete,yt(new at.FailedObserver({error:(0,ct.newError)("Cannot run query in this transaction, because it has already been committed."),onError:i}),e,r,n,0,0)}},ROLLED_BACK:{commit:function(e){var r=e.connectionHolder,t=e.onError;return e.onComplete,{result:yt(new at.FailedObserver({error:(0,ct.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:t}),"COMMIT",{},r,0,0),state:rt.ROLLED_BACK}},rollback:function(e){var r=e.connectionHolder;return e.onError,e.onComplete,{result:yt(new at.FailedObserver({error:(0,ct.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},r,0,0),state:rt.ROLLED_BACK}},run:function(e,r,t){var n=t.connectionHolder,i=t.onError;return t.onComplete,yt(new at.FailedObserver({error:(0,ct.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:i}),e,r,n,0,0)}}};function av(e,r,t,n,i,o,a){var c=a??Promise.resolve(),s=r.getConnection().then(function(u){return c.then(function(){return u})}).then(function(u){return i(),o.forEach(function(l){return l._cancel()}),Promise.all(o.map(function(l){return l.summary()})).then(function(l){if(u!=null)return e?u.commitTransaction({beforeError:t,afterComplete:n}):u.rollbackTransaction({beforeError:t,afterComplete:n});throw(0,ct.newError)("No connection available")})}).catch(function(u){return new at.FailedObserver({error:u,onError:t})});return new Hy.default(s,e?"COMMIT":"ROLLBACK",{},r,{high:Number.MAX_VALUE,low:Number.MAX_VALUE})}function yt(e,r,t,n,i,o){return n===void 0&&(n=Yi.EMPTY_CONNECTION_HOLDER),new Hy.default(Promise.resolve(e),r,t,new Yi.ReadOnlyConnectionHolder(n??Yi.EMPTY_CONNECTION_HOLDER),{low:o,high:i})}bc.default=pT;var mc={};Object.defineProperty(mc,"__esModule",{value:!0});var yT=function(){function e(r){var t=r.run;this._run=t}return e.fromTransaction=function(r){return new e({run:r.run.bind(r)})},e.prototype.run=function(r,t){return this._run(r,t)},e}();mc.default=yT;var gc={},bT=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qu=f&&f.__assign||function(){return Qu=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Qu.apply(this,arguments)},mT=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},zy;Object.defineProperty(gc,"__esModule",{value:!0});var gT=mT(bc),OT=function(e){bT(r,e);function r(t){var n=t.connectionHolder,i=t.onClose,o=t.onBookmarks,a=t.onConnection,c=t.reactive,s=t.fetchSize,u=t.impersonatedUser,l=t.highRecordWatermark,h=t.lowRecordWatermark,_=t.notificationFilter,y=t.apiTelemetryConfig,m=e.call(this,{connectionHolder:n,onClose:i,onBookmarks:o,onConnection:a,reactive:c,fetchSize:s,impersonatedUser:u,highRecordWatermark:l,lowRecordWatermark:h,notificationFilter:_,apiTelemetryConfig:y})||this;return m[zy]="TransactionPromise",m}return r.prototype.then=function(t,n){return this._getOrCreateBeginPromise().then(t,n)},r.prototype.catch=function(t){return this._getOrCreateBeginPromise().catch(t)},r.prototype.finally=function(t){return this._getOrCreateBeginPromise().finally(t)},r.prototype._getOrCreateBeginPromise=function(){var t=this;return this._beginPromise==null&&(this._beginPromise=new Promise(function(n,i){t._resolve=n,t._reject=i,t._beginError!=null&&i(t._beginError),t._beginMetadata!=null&&n(t._toTransaction())})),this._beginPromise},r.prototype._toTransaction=function(){return Qu(Qu({},this),{run:e.prototype.run.bind(this),commit:e.prototype.commit.bind(this),rollback:e.prototype.rollback.bind(this),close:e.prototype.close.bind(this),isOpen:e.prototype.isOpen.bind(this),_begin:this._begin.bind(this)})},r.prototype._begin=function(t,n){return e.prototype._begin.call(this,t,n,{onError:this._onBeginError.bind(this),onComplete:this._onBeginMetadata.bind(this)})},r.prototype._onBeginError=function(t){this._beginError=t,this._reject!=null&&this._reject(t)},r.prototype._onBeginMetadata=function(t){this._beginMetadata=t??{},this._resolve!=null&&this._resolve(this._toTransaction())},r}(gT.default);zy=Symbol.toStringTag;gc.default=OT;var Oc={},Ri=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(c,s)}u((n=n.apply(e,r||[])).next())})},Ai=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Tu=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Su=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))},Dd=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oc,"__esModule",{value:!0});var ET=Zt,wT=X,Ye=B,Sr=ne,TT=Dd(lo),uv=lt,ST=uo,ji=ar,Vt=Bn,PT=Dd(gc),CT=Dd(mc),IT=function(){function e(r){var t=r.mode,n=r.connectionProvider,i=r.bookmarks,o=r.database,a=r.config,c=r.reactive,s=r.fetchSize,u=r.impersonatedUser,l=r.bookmarkManager,h=r.notificationFilter,_=r.auth,y=r.log;this._mode=t,this._database=o,this._reactive=c,this._fetchSize=s,this._onDatabaseNameResolved=this._onDatabaseNameResolved.bind(this),this._getConnectionAcquistionBookmarks=this._getConnectionAcquistionBookmarks.bind(this),this._readConnectionHolder=new uv.ConnectionHolder({mode:Ye.ACCESS_MODE_READ,auth:_,database:o,bookmarks:i,connectionProvider:n,impersonatedUser:u,onDatabaseNameResolved:this._onDatabaseNameResolved,getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:y}),this._writeConnectionHolder=new uv.ConnectionHolder({mode:Ye.ACCESS_MODE_WRITE,auth:_,database:o,bookmarks:i,connectionProvider:n,impersonatedUser:u,onDatabaseNameResolved:this._onDatabaseNameResolved,getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:y}),this._open=!0,this._hasTx=!1,this._impersonatedUser=u,this._lastBookmarks=i??ji.Bookmarks.empty(),this._configuredBookmarks=this._lastBookmarks,this._transactionExecutor=RT(a),this._databaseNameResolved=this._database!=="";var m=this._calculateWatermaks();this._lowRecordWatermark=m.low,this._highRecordWatermark=m.high,this._results=[],this._bookmarkManager=l,this._notificationFilter=h,this._log=y}return e.prototype.run=function(r,t,n){var i=this,o=(0,wT.validateQueryAndParameters)(r,t),a=o.validatedQuery,c=o.params,s=n!=null?new Vt.TxConfig(n,this._log):Vt.TxConfig.empty(),u=this._run(a,c,function(l){return Ri(i,void 0,void 0,function(){var h,_=this;return Ai(this,function(y){switch(y.label){case 0:return[4,this._bookmarks()];case 1:return h=y.sent(),this._assertSessionIsOpen(),[2,l.run(a,c,{bookmarks:h,txConfig:s,mode:this._mode,database:this._database,apiTelemetryConfig:{api:Ye.TELEMETRY_APIS.AUTO_COMMIT_TRANSACTION},impersonatedUser:this._impersonatedUser,afterComplete:function(m){return _._onCompleteCallback(m,h)},reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter})]}})})});return this._results.push(u),u},e.prototype._run=function(r,t,n){var i=this._acquireAndConsumeConnection(n),o=i.connectionHolder,a=i.resultPromise,c=a.catch(function(u){return Promise.resolve(new ET.FailedObserver({error:u}))}),s={high:this._highRecordWatermark,low:this._lowRecordWatermark};return new TT.default(c,r,t,o,s)},e.prototype._acquireConnection=function(r){var t=this,n=this._acquireAndConsumeConnection(r),i=n.connectionHolder,o=n.resultPromise;return o.then(function(a){return Ri(t,void 0,void 0,function(){return Ai(this,function(c){switch(c.label){case 0:return[4,i.releaseConnection()];case 1:return c.sent(),[2,a]}})})})},e.prototype._acquireAndConsumeConnection=function(r){var t,n=this._connectionHolderWithMode(this._mode);return this._open?!this._hasTx&&n.initializeConnection()?t=n.getConnection().then(function(i){return r(i)}):t=Promise.reject((0,Sr.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):t=Promise.reject((0,Sr.newError)("Cannot run query in a closed session.")),{connectionHolder:n,resultPromise:t}},e.prototype.beginTransaction=function(r){var t=r,n=Vt.TxConfig.empty();return t!=null&&(n=new Vt.TxConfig(t,this._log)),this._beginTransaction(this._mode,n,{api:Ye.TELEMETRY_APIS.UNMANAGED_TRANSACTION})},e.prototype._beginTransaction=function(r,t,n){var i=this;if(!this._open)throw(0,Sr.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,Sr.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var o=e._validateSessionMode(r),a=this._connectionHolderWithMode(o);a.initializeConnection(),this._hasTx=!0;var c=new PT.default({connectionHolder:a,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmarks:function(s,u,l){return i._updateBookmarks(s,u,l)},onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,apiTelemetryConfig:n});return c._begin(function(){return i._bookmarks()},t),c},e.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,Sr.newError)("You cannot run more transactions on a closed session.")},e.prototype._transactionClosed=function(){this._hasTx=!1},e.prototype.lastBookmark=function(){return this.lastBookmarks()},e.prototype.lastBookmarks=function(){return this._lastBookmarks.values()},e.prototype._bookmarks=function(){var r;return Ri(this,void 0,void 0,function(){var t;return Ai(this,function(n){switch(n.label){case 0:return[4,(r=this._bookmarkManager)===null||r===void 0?void 0:r.getBookmarks()];case 1:return t=n.sent(),t===void 0?[2,this._lastBookmarks]:[2,new ji.Bookmarks(Su(Su([],Tu(t),!1),Tu(this._configuredBookmarks),!1))]}})})},e.prototype.readTransaction=function(r,t){var n=new Vt.TxConfig(t,this._log);return this._runTransaction(Ye.ACCESS_MODE_READ,n,r)},e.prototype.writeTransaction=function(r,t){var n=new Vt.TxConfig(t,this._log);return this._runTransaction(Ye.ACCESS_MODE_WRITE,n,r)},e.prototype._runTransaction=function(r,t,n){var i=this;return this._transactionExecutor.execute(function(o){return i._beginTransaction(r,t,o)},n)},e.prototype.executeRead=function(r,t){var n=new Vt.TxConfig(t,this._log);return this._executeInTransaction(Ye.ACCESS_MODE_READ,n,r)},e.prototype.executeWrite=function(r,t){var n=new Vt.TxConfig(t,this._log);return this._executeInTransaction(Ye.ACCESS_MODE_WRITE,n,r)},e.prototype._executeInTransaction=function(r,t,n){var i=this;return this._transactionExecutor.execute(function(o){return i._beginTransaction(r,t,o)},n,CT.default.fromTransaction)},e.prototype._onDatabaseNameResolved=function(r){if(!this._databaseNameResolved){var t=r??"";this._database=t,this._readConnectionHolder.setDatabase(t),this._writeConnectionHolder.setDatabase(t),this._databaseNameResolved=!0}},e.prototype._getConnectionAcquistionBookmarks=function(){var r;return Ri(this,void 0,void 0,function(){var t;return Ai(this,function(n){switch(n.label){case 0:return[4,(r=this._bookmarkManager)===null||r===void 0?void 0:r.getBookmarks()];case 1:return t=n.sent(),t===void 0?[2,this._lastBookmarks]:[2,new ji.Bookmarks(Su(Su([],Tu(this._configuredBookmarks),!1),Tu(t),!1))]}})})},e.prototype._updateBookmarks=function(r,t,n){var i,o,a;r!=null&&!r.isEmpty()&&((i=this._bookmarkManager)===null||i===void 0||i.updateBookmarks((o=t==null?void 0:t.values())!==null&&o!==void 0?o:[],(a=r==null?void 0:r.values())!==null&&a!==void 0?a:[]).catch(function(){}),this._lastBookmarks=r,this._configuredBookmarks=ji.Bookmarks.empty())},e.prototype.close=function(){return Ri(this,void 0,void 0,function(){return Ai(this,function(r){switch(r.label){case 0:return this._open?(this._open=!1,this._results.forEach(function(t){return t._cancel()}),this._transactionExecutor.close(),[4,this._readConnectionHolder.close(this._hasTx)]):[3,3];case 1:return r.sent(),[4,this._writeConnectionHolder.close(this._hasTx)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._connectionHolderWithMode=function(r){if(r===Ye.ACCESS_MODE_READ)return this._readConnectionHolder;if(r===Ye.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,Sr.newError)("Unknown access mode: "+r)},e.prototype._onCompleteCallback=function(r,t){this._updateBookmarks(new ji.Bookmarks(r.bookmark),t,r.db)},e.prototype._calculateWatermaks=function(){return this._fetchSize===Ye.FETCH_ALL?{low:Number.MAX_VALUE,high:Number.MAX_VALUE}:{low:.3*this._fetchSize,high:.7*this._fetchSize}},e.prototype._configureTransactionExecutor=function(r,t){this._transactionExecutor.pipelineBegin=r,this._transactionExecutor.telemetryApi=t},e._validateSessionMode=function(r){var t=r??Ye.ACCESS_MODE_WRITE;if(t!==Ye.ACCESS_MODE_READ&&t!==Ye.ACCESS_MODE_WRITE)throw(0,Sr.newError)("Illegal session mode "+t);return t},e}();function RT(e){var r,t=(r=e==null?void 0:e.maxTransactionRetryTime)!==null&&r!==void 0?r:null;return new ST.TransactionExecutor(t)}Oc.default=IT;var Ue={},Wn={},Xu=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(c,s)}u((n=n.apply(e,r||[])).next())})},Ju=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},af=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},cv=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},sv=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.bookmarkManager=void 0;var AT=function(){function e(){throw new Error("Not implemented")}return e.prototype.updateBookmarks=function(r,t){return Xu(this,void 0,void 0,function(){return Ju(this,function(n){throw new Error("Not implemented")})})},e.prototype.getBookmarks=function(){return Xu(this,void 0,void 0,function(){return Ju(this,function(r){throw new Error("Not implemented")})})},e}();Wn.default=AT;function jT(e){e===void 0&&(e={});var r=new Set(e.initialBookmarks);return new MT(r,e.bookmarksSupplier,e.bookmarksConsumer)}Wn.bookmarkManager=jT;var MT=function(){function e(r,t,n){this._bookmarks=r,this._bookmarksSupplier=t,this._bookmarksConsumer=n}return e.prototype.updateBookmarks=function(r,t){return Xu(this,void 0,void 0,function(){var n,i,o,s,a,c,s,u,l,h,_;return Ju(this,function(y){switch(y.label){case 0:n=this._bookmarks;try{for(i=af(r),o=i.next();!o.done;o=i.next())s=o.value,n.delete(s)}catch(m){u={error:m}}finally{try{o&&!o.done&&(l=i.return)&&l.call(i)}finally{if(u)throw u.error}}try{for(a=af(t),c=a.next();!c.done;c=a.next())s=c.value,n.add(s)}catch(m){h={error:m}}finally{try{c&&!c.done&&(_=a.return)&&_.call(a)}finally{if(h)throw h.error}}return typeof this._bookmarksConsumer!="function"?[3,2]:[4,this._bookmarksConsumer(sv([],cv(n),!1))];case 1:y.sent(),y.label=2;case 2:return[2]}})})},e.prototype.getBookmarks=function(){var r;return Xu(this,void 0,void 0,function(){var t,n,i,o,a,c,s;return Ju(this,function(u){switch(u.label){case 0:return t=new Set(this._bookmarks),typeof this._bookmarksSupplier!="function"?[3,2]:[4,this._bookmarksSupplier()];case 1:n=(r=u.sent())!==null&&r!==void 0?r:[];try{for(i=af(n),o=i.next();!o.done;o=i.next())a=o.value,t.add(a)}catch(l){c={error:l}}finally{try{o&&!o.done&&(s=i.return)&&s.call(i)}finally{if(c)throw c.error}}u.label=2;case 2:return[2,sv([],cv(t),!1)]}})})},e}(),Ec={},wc=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(c,s)}u((n=n.apply(e,r||[])).next())})},Tc=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},NT=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ec,"__esModule",{value:!0});var $T=NT(yc),kT=ne,DT=function(){function e(){}return e.prototype.eagerResultTransformer=function(){return lv},e.prototype.eager=function(){return lv},e.prototype.mappedResultTransformer=function(r){return fv(r)},e.prototype.mapped=function(r){return fv(r)},e.prototype.first=function(){return LT},e.prototype.summary=function(){return UT},e}(),Gy=new DT;Object.freeze(Gy);Ec.default=Gy;function lv(e){return wc(this,void 0,void 0,function(){var r,t,n,i;return Tc(this,function(o){switch(o.label){case 0:return[4,e];case 1:return r=o.sent(),t=r.summary,n=r.records,[4,e.keys()];case 2:return i=o.sent(),[2,new $T.default(i,n,t)]}})})}function fv(e){var r=this;if(e==null||e.collect==null&&e.map==null)throw(0,kT.newError)("Requires a map or/and a collect functions.");return function(t){return wc(r,void 0,void 0,function(){return Tc(this,function(n){switch(n.label){case 0:return[4,new Promise(function(i,o){var a={records:[],keys:[]};t.subscribe({onKeys:function(c){a.keys=c},onNext:function(c){if(e.map!=null){var s=e.map(c);s!==void 0&&a.records.push(s)}else a.records.push(c)},onCompleted:function(c){if(e.collect!=null)i(e.collect(a.records,c,a.keys));else{var s={records:a.records,summary:c,keys:a.keys};i(s)}},onError:function(c){o(c)}})})];case 1:return[2,n.sent()]}})})}}function LT(e){return wc(this,void 0,void 0,function(){var r,t,n,i;return Tc(this,function(o){switch(o.label){case 0:return r=e[Symbol.asyncIterator](),[4,r.next()];case 1:t=o.sent(),n=t.value,i=t.done,o.label=2;case 2:return o.trys.push([2,,3,6]),i===!0?[2,void 0]:[2,n];case 3:return r.return==null?[3,5]:[4,r.return()];case 4:o.sent(),o.label=5;case 5:return[7];case 6:return[2]}})})}function UT(e){return wc(this,void 0,void 0,function(){return Tc(this,function(r){switch(r.label){case 0:return[4,e.summary()];case 1:return[2,r.sent()]}})})}var Ld={},uf=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(c,s)}u((n=n.apply(e,r||[])).next())})},cf=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Ld,"__esModule",{value:!0});var FT=B,BT=function(){function e(r){this._createSession=r}return e.prototype.execute=function(r,t,n){return uf(this,void 0,void 0,function(){var i,o,a,c=this;return cf(this,function(s){switch(s.label){case 0:i=this._createSession({database:r.database,bookmarkManager:r.bookmarkManager,impersonatedUser:r.impersonatedUser,auth:r.auth}),o=WT(r.signal,"abort",function(){return uf(c,void 0,void 0,function(){return cf(this,function(u){switch(u.label){case 0:return[4,i.close()];case 1:return[2,u.sent()]}})})}),i._configureTransactionExecutor(!0,FT.TELEMETRY_APIS.EXECUTE_QUERY),s.label=1;case 1:return s.trys.push([1,,3,5]),a=r.routing==="READ"?i.executeRead.bind(i):i.executeWrite.bind(i),[4,a(function(u){return uf(c,void 0,void 0,function(){var l;return cf(this,function(h){switch(h.label){case 0:return l=u.run(t,n),[4,r.resultTransformer(l)];case 1:return[2,h.sent()]}})})},r.transactionConfig)];case 2:return[2,s.sent()];case 3:return o.uninstall(),[4,i.close()];case 4:return s.sent(),[7];case 5:return[2]}})})},e}();Ld.default=BT;function WT(e,r,t){return typeof(e==null?void 0:e.addEventListener)=="function"&&e.addEventListener(r,t),{uninstall:function(){typeof(e==null?void 0:e.removeEventListener)=="function"&&e.removeEventListener(r,t)}}}var dv=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(c,s)}u((n=n.apply(e,r||[])).next())})},hv=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Sc=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.QueryConfig=Ue.SessionConfig=Ue.routing=Ue.WRITE=Ue.READ=Ue.Driver=void 0;var vv=ar,xT=Sc(hc),Vr=B,VT=Xr,_v=Sc(Oc),qT=X,HT=Wn,zT=Sc(Ec),GT=Sc(Ld),YT=ne,KT=60*60*1e3,ZT=1e3,qu=Vr.ACCESS_MODE_READ;Ue.READ=qu;var Ud=Vr.ACCESS_MODE_WRITE;Ue.WRITE=Ud;var QT=0,XT=function(){function e(){this.defaultAccessMode=Ud,this.bookmarks=[],this.database="",this.impersonatedUser=void 0,this.auth=void 0,this.fetchSize=void 0,this.bookmarkManager=void 0,this.notificationFilter=void 0}return e}();Ue.SessionConfig=XT;var JT="WRITE",eS="READ",Pn={WRITE:JT,READ:eS};Ue.routing=Pn;Object.freeze(Pn);var tS=function(){function e(){this.routing=Pn.WRITE,this.resultTransformer=void 0,this.database="",this.impersonatedUser=void 0,this.bookmarkManager=void 0,this.transactionConfig=void 0,this.auth=void 0,this.signal=void 0}return e}();Ue.QueryConfig=tS;var Yy=function(){function e(r,t,n,i,o){t===void 0&&(t={}),i===void 0&&(i=function(c){return new _v.default(c)}),o===void 0&&(o=function(c){return new GT.default(c)}),nS(t);var a=VT.Logger.create(t);rS(t,a),this._id=QT++,this._meta=r,this._config=t,this._log=a,this._createConnectionProvider=n,this._createSession=i,this._defaultExecuteQueryBookmarkManager=(0,HT.bookmarkManager)(),this._queryExecutor=o(this.session.bind(this)),this._connectionProvider=null,this._afterConstruction()}return Object.defineProperty(e.prototype,"executeQueryBookmarkManager",{get:function(){return this._defaultExecuteQueryBookmarkManager},enumerable:!1,configurable:!0}),e.prototype.executeQuery=function(r,t,n){var i,o,a;return n===void 0&&(n={}),dv(this,void 0,void 0,function(){var c,s,u;return hv(this,function(l){switch(l.label){case 0:if(c=n.bookmarkManager===null?void 0:(i=n.bookmarkManager)!==null&&i!==void 0?i:this.executeQueryBookmarkManager,s=(o=n.resultTransformer)!==null&&o!==void 0?o:zT.default.eagerResultTransformer(),u=(a=n.routing)!==null&&a!==void 0?a:Pn.WRITE,u!==Pn.READ&&u!==Pn.WRITE)throw(0,YT.newError)('Illegal query routing config: "'.concat(u,'"'));return[4,this._queryExecutor.execute({resultTransformer:s,bookmarkManager:c,routing:u,database:n.database,impersonatedUser:n.impersonatedUser,transactionConfig:n.transactionConfig,auth:n.auth,signal:n.signal},r,t)];case 1:return[2,l.sent()]}})})},e.prototype.verifyConnectivity=function(r){var t=r===void 0?{}:r,n=t.database,i=n===void 0?"":n,o=this._getOrCreateConnectionProvider();return o.verifyConnectivityAndGetServerInfo({database:i,accessMode:qu})},e.prototype.verifyAuthentication=function(r){var t=r===void 0?{}:r,n=t.database,i=t.auth;return dv(this,void 0,void 0,function(){var o;return hv(this,function(a){switch(a.label){case 0:return o=this._getOrCreateConnectionProvider(),[4,o.verifyAuthentication({database:n??"system",auth:i,accessMode:qu})];case 1:return[2,a.sent()]}})})},e.prototype.getServerInfo=function(r){var t=r===void 0?{}:r,n=t.database,i=n===void 0?"":n,o=this._getOrCreateConnectionProvider();return o.verifyConnectivityAndGetServerInfo({database:i,accessMode:qu})},e.prototype.supportsMultiDb=function(){var r=this._getOrCreateConnectionProvider();return r.supportsMultiDb()},e.prototype.supportsTransactionConfig=function(){var r=this._getOrCreateConnectionProvider();return r.supportsTransactionConfig()},e.prototype.supportsUserImpersonation=function(){var r=this._getOrCreateConnectionProvider();return r.supportsUserImpersonation()},e.prototype.supportsSessionAuth=function(){var r=this._getOrCreateConnectionProvider();return r.supportsSessionAuth()},e.prototype.getNegotiatedProtocolVersion=function(){var r=this._getOrCreateConnectionProvider();return r.getNegotiatedProtocolVersion()},e.prototype.isEncrypted=function(){return this._isEncrypted()},e.prototype._supportsRouting=function(){return this._meta.routing},e.prototype._isEncrypted=function(){return this._config.encrypted===qT.ENCRYPTION_ON||this._config.encrypted===!0},e.prototype._getTrust=function(){return this._config.trust},e.prototype.session=function(r){var t=r===void 0?{}:r,n=t.defaultAccessMode,i=n===void 0?Ud:n,o=t.bookmarks,a=t.database,c=a===void 0?"":a,s=t.impersonatedUser,u=t.fetchSize,l=t.bookmarkManager,h=t.notificationFilter,_=t.auth;return this._newSession({defaultAccessMode:i,bookmarkOrBookmarks:o,database:c,reactive:!1,impersonatedUser:s,fetchSize:Ky(u,this._config.fetchSize),bookmarkManager:l,notificationFilter:h,auth:_})},e.prototype.close=function(){return this._log.info("Driver ".concat(this._id," closing")),this._connectionProvider!=null?this._connectionProvider.close():Promise.resolve()},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype._afterConstruction=function(){this._log.info("".concat(this._meta.typename," driver ").concat(this._id," created for server address ").concat(this._meta.address.toString()))},e.prototype._newSession=function(r){var t=r.defaultAccessMode,n=r.bookmarkOrBookmarks,i=r.database,o=r.reactive,a=r.impersonatedUser,c=r.fetchSize,s=r.bookmarkManager,u=r.notificationFilter,l=r.auth,h=_v.default._validateSessionMode(t),_=this._getOrCreateConnectionProvider(),y=n!=null?new vv.Bookmarks(n):vv.Bookmarks.empty();return this._createSession({mode:h,database:i??"",connectionProvider:_,bookmarks:y,config:this._config,reactive:o,impersonatedUser:a,fetchSize:c,bookmarkManager:s,notificationFilter:u,auth:l,log:this._log})},e.prototype._getOrCreateConnectionProvider=function(){return this._connectionProvider==null&&(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,aS(this._config))),this._connectionProvider},e}();Ue.Driver=Yy;function rS(e,r){var t,n,i=e.resolver;if(i!=null&&typeof i!="function")throw new TypeError("Configured resolver should be a function. Got: ".concat(typeof i));if(e.connectionAcquisitionTimeout<e.connectionTimeout&&r.warn('Configuration for "connectionAcquisitionTimeout" should be greater than or equal to "connectionTimeout". Otherwise, the connection acquisition timeout will take precedence for over the connection timeout in scenarios where a new connection is created while it is acquired'),((t=e.notificationFilter)===null||t===void 0?void 0:t.disabledCategories)!=null&&((n=e.notificationFilter)===null||n===void 0?void 0:n.disabledClassifications)!=null)throw new Error(`The notificationFilter can't have both "disabledCategories" and  "disabledClassifications" configured at the same time.`);return e}function nS(e){e.maxConnectionLifetime=sf(e.maxConnectionLifetime,KT),e.maxConnectionPoolSize=sf(e.maxConnectionPoolSize,Vr.DEFAULT_POOL_MAX_SIZE),e.connectionAcquisitionTimeout=sf(e.connectionAcquisitionTimeout,Vr.DEFAULT_POOL_ACQUISITION_TIMEOUT),e.fetchSize=Ky(e.fetchSize,ZT),e.connectionTimeout=iS(e),e.connectionLivenessCheckTimeout=oS(e.connectionLivenessCheckTimeout)}function sf(e,r){var t=parseInt(e,10);return t>0||t===0?t:t<0?Number.MAX_SAFE_INTEGER:r}function Ky(e,r){var t=parseInt(e,10);if(t>0||t===Vr.FETCH_ALL)return t;if(t===0||t<0)throw new Error("The fetch size can only be a positive value or ".concat(Vr.FETCH_ALL," for ALL. However fetchSize = ").concat(t));return r}function iS(e){var r=parseInt(e.connectionTimeout,10);return r===0||!isNaN(r)&&r<0?null:isNaN(r)?Vr.DEFAULT_CONNECTION_TIMEOUT_MILLIS:r}function oS(e){if(e!=null){var r=parseInt(e,10);if(r<0||Number.isNaN(r))throw new Error("The connectionLivenessCheckTimeout can only be a positive value or 0 for always. However connectionLivenessCheckTimeout = ".concat(r));return r}}function aS(e){return new xT.default(e.resolver)}Ue.default=Yy;var Pc={};Object.defineProperty(Pc,"__esModule",{value:!0});var uS={basic:function(e,r,t){return t!=null?{scheme:"basic",principal:e,credentials:r,realm:t}:{scheme:"basic",principal:e,credentials:r}},kerberos:function(e){return{scheme:"kerberos",principal:"",credentials:e}},bearer:function(e){return{scheme:"bearer",credentials:e}},none:function(){return{scheme:"none"}},custom:function(e,r,t,n,i){var o={scheme:n,principal:e};return lf(r)&&(o.credentials=r),lf(t)&&(o.realm=t),lf(i)&&(o.parameters=i),o}};function lf(e){return!(e==null||e===""||Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length===0)}Pc.default=uS;var Nt={},Xf=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(c,s)}u((n=n.apply(e,r||[])).next())})},Jf=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},cS=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nt,"__esModule",{value:!0});Nt.staticAuthTokenManager=Nt.authTokenManagers=Nt.AuthTokenAndExpiration=void 0;var sS=cS(Pc),lS=ee,fS=function(){function e(){}return e.prototype.getToken=function(){throw new Error("Not Implemented")},e.prototype.handleSecurityException=function(r,t){throw new Error("Not implemented")},e}();Nt.default=fS;var dS=function(){function e(){this.token=sS.default.none(),this.expiration=void 0}return e}();Nt.AuthTokenAndExpiration=dS;var hS=function(){function e(){}return e.prototype.bearer=function(r){var t=r.tokenProvider;if(typeof t!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof t));return new pv(t,["Neo.ClientError.Security.Unauthorized","Neo.ClientError.Security.TokenExpired"])},e.prototype.basic=function(r){var t=this,n=r.tokenProvider;if(typeof n!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof n));return new pv(function(){return Xf(t,void 0,void 0,function(){var i;return Jf(this,function(o){switch(o.label){case 0:return i={},[4,n()];case 1:return[2,(i.token=o.sent(),i)]}})})},["Neo.ClientError.Security.Unauthorized"])},e}(),Zy=new hS;Nt.authTokenManagers=Zy;Object.freeze(Zy);function vS(e){var r=e.authToken;return new pS(r)}Nt.staticAuthTokenManager=vS;var _S=function(){function e(r){r===void 0&&(r=[]),this._subscribers=r}return e.prototype.subscribe=function(r){this._subscribers.push(r)},e.prototype.onCompleted=function(r){this._subscribers.forEach(function(t){return t.onCompleted(r)})},e.prototype.onError=function(r){this._subscribers.forEach(function(t){return t.onError(r)})},e}(),pv=function(){function e(r,t,n,i){this._tokenProvider=r,this._handledSecurityCodes=t,this._currentAuthData=n,this._refreshObservable=i}return e.prototype.getToken=function(){var r;return Xf(this,void 0,void 0,function(){return Jf(this,function(t){switch(t.label){case 0:return this._currentAuthData===void 0||this._currentAuthData.expiration!==void 0&&this._currentAuthData.expiration<new Date?[4,this._refreshAuthToken()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2,(r=this._currentAuthData)===null||r===void 0?void 0:r.token]}})})},e.prototype.handleSecurityException=function(r,t){var n;return this._handledSecurityCodes.includes(t)?(lS.util.equals(r,(n=this._currentAuthData)===null||n===void 0?void 0:n.token)&&this._scheduleRefreshAuthToken(),!0):!1},e.prototype._scheduleRefreshAuthToken=function(r){var t=this;this._refreshObservable===void 0&&(this._currentAuthData=void 0,this._refreshObservable=new _S,Promise.resolve(this._tokenProvider()).then(function(n){var i;t._currentAuthData=n,(i=t._refreshObservable)===null||i===void 0||i.onCompleted(n)}).catch(function(n){var i;(i=t._refreshObservable)===null||i===void 0||i.onError(n)}).finally(function(){t._refreshObservable=void 0})),r!==void 0&&this._refreshObservable.subscribe(r)},e.prototype._refreshAuthToken=function(){return Xf(this,void 0,void 0,function(){var r=this;return Jf(this,function(t){switch(t.label){case 0:return[4,new Promise(function(n,i){r._scheduleRefreshAuthToken({onCompleted:n,onError:i})})];case 1:return[2,t.sent()]}})})},e}(),pS=function(){function e(r){this._authToken=r}return e.prototype.getToken=function(){return this._authToken},e.prototype.handleSecurityException=function(r,t){return!1},e}(),Mn={},yS=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Mn,"__esModule",{value:!0});Mn.InternalConfig=Mn.Config=void 0;var Qy=function(){function e(){this.encrypted=void 0,this.trust=void 0,this.trustedCertificates=[],this.maxConnectionPoolSize=100,this.maxConnectionLifetime=60*60*1e3,this.connectionAcquisitionTimeout=6e4,this.maxTransactionRetryTime=3e4,this.connectionLivenessCheckTimeout=void 0,this.connectionTimeout=3e4,this.disableLosslessIntegers=!1,this.useBigInt=!1,this.logging=void 0,this.resolver=void 0,this.notificationFilter=void 0,this.userAgent=void 0,this.telemetryDisabled=!1,this.clientCertificate=void 0}return e}();Mn.Config=Qy;var bS=function(e){yS(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(Qy);Mn.InternalConfig=bS;var st={},mS=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),eo=f&&f.__assign||function(){return eo=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},eo.apply(this,arguments)},gS=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),OS=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),ES=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&gS(r,e,t);return OS(r,e),r};Object.defineProperty(st,"__esModule",{value:!0});st.resolveCertificateProvider=st.clientCertificateProviders=st.RotatingClientCertificateProvider=st.ClientCertificateProvider=void 0;var Fd=ES(Dt),wS=function(){function e(){this.certfile="",this.keyfile="",this.password=void 0}return e}();st.default=wS;var Xy=function(){function e(){}return e.prototype.hasUpdate=function(){throw new Error("Not Implemented")},e.prototype.getClientCertificate=function(){throw new Error("Not Implemented")},e}();st.ClientCertificateProvider=Xy;var TS=function(e){mS(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.updateCertificate=function(t){throw new Error("Not implemented")},r}(Xy);st.RotatingClientCertificateProvider=TS;var SS=function(){function e(){}return e.prototype.rotating=function(r){var t=r.initialCertificate;if(t==null||!Bd(t))throw new TypeError("initialCertificate should be ClientCertificate, but got ".concat(Fd.stringify(t)));var n=eo({},t);return new RS(n)},e}(),Jy=new SS;st.clientCertificateProviders=Jy;Object.freeze(Jy);function PS(e){if(e!=null){if(typeof e=="object"&&"hasUpdate"in e&&"getClientCertificate"in e&&typeof e.getClientCertificate=="function"&&typeof e.hasUpdate=="function")return e;if(Bd(e)){var r=eo({},e);return{getClientCertificate:function(){return r},hasUpdate:function(){return!1}}}throw new TypeError("clientCertificate should be configured with ClientCertificate or ClientCertificateProvider, but got ".concat(Fd.stringify(e)))}}st.resolveCertificateProvider=PS;function Bd(e){return e!=null&&typeof e=="object"&&"certfile"in e&&CS(e.certfile)&&"keyfile"in e&&IS(e.keyfile)&&tb("password",e)}function CS(e){return yv(e)||eb(e,yv)}function IS(e){function r(t){return typeof t=="string"||t!=null&&typeof t=="object"&&"path"in t&&typeof t.path=="string"&&tb("password",t)}return r(e)||eb(e,r)}function yv(e){return typeof e=="string"}function eb(e,r,t){return t===void 0&&(t=!1),Array.isArray(e)&&(t||e.length>0)&&e.filter(r).length===e.length}function tb(e,r){return!(e in r)||r[e]==null||typeof r[e]=="string"}var RS=function(){function e(r,t){t===void 0&&(t=!1),this._certificate=r,this._updated=t}return e.prototype.hasUpdate=function(){try{return this._updated}finally{this._updated=!1}},e.prototype.getClientCertificate=function(){return this._certificate},e.prototype.updateCertificate=function(r){if(!Bd(r))throw new TypeError("certificate should be ClientCertificate, but got ".concat(Fd.stringify(r)));this._certificate=eo({},r),this._updated=!0},e}();(function(e){var r=f&&f.__createBinding||(Object.create?function(q,D,x,Q){Q===void 0&&(Q=x);var ye=Object.getOwnPropertyDescriptor(D,x);(!ye||("get"in ye?!D.__esModule:ye.writable||ye.configurable))&&(ye={enumerable:!0,get:function(){return D[x]}}),Object.defineProperty(q,Q,ye)}:function(q,D,x,Q){Q===void 0&&(Q=x),q[Q]=D[x]}),t=f&&f.__setModuleDefault||(Object.create?function(q,D){Object.defineProperty(q,"default",{enumerable:!0,value:D})}:function(q,D){q.default=D}),n=f&&f.__importStar||function(q){if(q&&q.__esModule)return q;var D={};if(q!=null)for(var x in q)x!=="default"&&Object.prototype.hasOwnProperty.call(q,x)&&r(D,q,x);return t(D,q),D},i=f&&f.__importDefault||function(q){return q&&q.__esModule?q:{default:q}};Object.defineProperty(e,"__esModule",{value:!0}),e.EagerResult=e.Result=e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.GqlStatusObject=e.Notification=e.ServerInfo=e.queryType=e.ResultSummary=e.Record=e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=e.Time=e.LocalTime=e.LocalDateTime=e.isTime=e.isLocalTime=e.isLocalDateTime=e.isDuration=e.isDateTime=e.isDate=e.Duration=e.DateTime=e.Date=e.Point=e.isPoint=e.internal=e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=e.Integer=e.error=e.isRetriableError=e.GQLError=e.newGQLError=e.Neo4jError=e.newError=e.authTokenManagers=void 0,e.resolveCertificateProvider=e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.routing=e.staticAuthTokenManager=e.bookmarkManager=e.auth=e.json=e.driver=e.types=e.Driver=e.Session=e.TransactionPromise=e.ManagedTransaction=e.Transaction=e.Connection=e.Releasable=e.ConnectionProvider=void 0;var o=ne;Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return o.newError}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return o.Neo4jError}}),Object.defineProperty(e,"newGQLError",{enumerable:!0,get:function(){return o.newGQLError}}),Object.defineProperty(e,"GQLError",{enumerable:!0,get:function(){return o.GQLError}}),Object.defineProperty(e,"isRetriableError",{enumerable:!0,get:function(){return o.isRetriableError}});var a=n($e);e.Integer=a.default,Object.defineProperty(e,"int",{enumerable:!0,get:function(){return a.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return a.isInt}}),Object.defineProperty(e,"inSafeRange",{enumerable:!0,get:function(){return a.inSafeRange}}),Object.defineProperty(e,"toNumber",{enumerable:!0,get:function(){return a.toNumber}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return a.toString}});var c=ve;Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return c.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return c.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return c.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return c.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return c.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return c.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return c.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return c.isLocalTime}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return c.isTime}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return c.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return c.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return c.Time}});var s=ge;Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return s.Node}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return s.isNode}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return s.Relationship}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return s.isRelationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return s.UnboundRelationship}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return s.isUnboundRelationship}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return s.Path}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return s.isPath}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return s.PathSegment}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return s.isPathSegment}});var u=i(Ad);e.Record=u.default;var l=An;Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return l.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return l.Point}});var h=n(Le);e.ResultSummary=h.default,Object.defineProperty(e,"queryType",{enumerable:!0,get:function(){return h.queryType}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return h.ServerInfo}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return h.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return h.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return h.QueryStatistics}}),Object.defineProperty(e,"Stats",{enumerable:!0,get:function(){return h.Stats}});var _=n(Oe);e.Notification=_.default,Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return _.GqlStatusObject}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return _.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return _.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return _.notificationSeverityLevel}});var y=Mt;Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return y.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return y.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return y.notificationFilterMinimumSeverityLevel}});var m=i(lo);e.Result=m.default;var E=i(yc);e.EagerResult=E.default;var w=n(fo);e.ConnectionProvider=w.default,Object.defineProperty(e,"Releasable",{enumerable:!0,get:function(){return w.Releasable}});var S=i(kd);e.Connection=S.default;var A=i(bc);e.Transaction=A.default;var R=i(mc);e.ManagedTransaction=R.default;var I=i(gc);e.TransactionPromise=I.default;var j=i(Oc);e.Session=j.default;var M=n(Ue),G=M;e.Driver=M.default,e.driver=G;var H=i(Pc);e.auth=H.default;var ie=Wn;Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return ie.bookmarkManager}});var ue=Nt;Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return ue.authTokenManagers}}),Object.defineProperty(e,"staticAuthTokenManager",{enumerable:!0,get:function(){return ue.staticAuthTokenManager}});var pe=Ue;Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return pe.routing}});var J=n(Mn);e.types=J;var _e=n(Dt);e.json=_e;var qe=i(Ec);e.resultTransformers=qe.default;var Y=st;Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return Y.clientCertificateProviders}}),Object.defineProperty(e,"resolveCertificateProvider",{enumerable:!0,get:function(){return Y.resolveCertificateProvider}});var re=n(ee);e.internal=re;var W={SERVICE_UNAVAILABLE:o.SERVICE_UNAVAILABLE,SESSION_EXPIRED:o.SESSION_EXPIRED,PROTOCOL_ERROR:o.PROTOCOL_ERROR};e.error=W;var ce={authTokenManagers:ue.authTokenManagers,newError:o.newError,Neo4jError:o.Neo4jError,newGQLError:o.newGQLError,GQLError:o.GQLError,isRetriableError:o.isRetriableError,error:W,Integer:a.default,int:a.int,isInt:a.isInt,inSafeRange:a.inSafeRange,toNumber:a.toNumber,toString:a.toString,internal:re,isPoint:l.isPoint,Point:l.Point,Date:c.Date,DateTime:c.DateTime,Duration:c.Duration,isDate:c.isDate,isDateTime:c.isDateTime,isDuration:c.isDuration,isLocalDateTime:c.isLocalDateTime,isLocalTime:c.isLocalTime,isTime:c.isTime,LocalDateTime:c.LocalDateTime,LocalTime:c.LocalTime,Time:c.Time,Node:s.Node,isNode:s.isNode,Relationship:s.Relationship,isRelationship:s.isRelationship,UnboundRelationship:s.UnboundRelationship,isUnboundRelationship:s.isUnboundRelationship,Path:s.Path,isPath:s.isPath,PathSegment:s.PathSegment,isPathSegment:s.isPathSegment,Record:u.default,ResultSummary:h.default,queryType:h.queryType,ServerInfo:h.ServerInfo,Notification:_.default,GqlStatusObject:_.GqlStatusObject,Plan:h.Plan,ProfiledPlan:h.ProfiledPlan,QueryStatistics:h.QueryStatistics,Stats:h.Stats,Result:m.default,EagerResult:E.default,Transaction:A.default,ManagedTransaction:R.default,TransactionPromise:I.default,Session:j.default,Driver:M.default,Connection:S.default,Releasable:w.Releasable,types:J,driver:G,json:_e,auth:H.default,bookmarkManager:ie.bookmarkManager,routing:pe.routing,resultTransformers:qe.default,notificationCategory:_.notificationCategory,notificationClassification:_.notificationClassification,notificationSeverityLevel:_.notificationSeverityLevel,notificationFilterDisabledCategory:y.notificationFilterDisabledCategory,notificationFilterDisabledClassification:y.notificationFilterDisabledClassification,notificationFilterMinimumSeverityLevel:y.notificationFilterMinimumSeverityLevel,clientCertificateProviders:Y.clientCertificateProviders,resolveCertificateProvider:Y.resolveCertificateProvider};e.default=ce})(V);var Cc={},ho={},se={},xn={},ae={};Object.defineProperty(ae,"__esModule",{value:!0});ae.isFunction=void 0;function AS(e){return typeof e=="function"}ae.isFunction=AS;var Re={},vo={},Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.createErrorClass=void 0;function jS(e){var r=function(n){Error.call(n),n.stack=new Error().stack},t=e(r);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}Ot.createErrorClass=jS;Object.defineProperty(vo,"__esModule",{value:!0});vo.UnsubscriptionError=void 0;var MS=Ot;vo.UnsubscriptionError=MS.createErrorClass(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});var dt={};Object.defineProperty(dt,"__esModule",{value:!0});dt.arrRemove=void 0;function NS(e,r){if(e){var t=e.indexOf(r);0<=t&&e.splice(t,1)}}dt.arrRemove=NS;var bv=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},mv=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},gv=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(Re,"__esModule",{value:!0});Re.isSubscription=Re.EMPTY_SUBSCRIPTION=Re.Subscription=void 0;var Ki=ae,ff=vo,Ov=dt,Wd=function(){function e(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var r,t,n,i,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var c=bv(a),s=c.next();!s.done;s=c.next()){var u=s.value;u.remove(this)}}catch(E){r={error:E}}finally{try{s&&!s.done&&(t=c.return)&&t.call(c)}finally{if(r)throw r.error}}else a.remove(this);var l=this.initialTeardown;if(Ki.isFunction(l))try{l()}catch(E){o=E instanceof ff.UnsubscriptionError?E.errors:[E]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var _=bv(h),y=_.next();!y.done;y=_.next()){var m=y.value;try{Ev(m)}catch(E){o=o??[],E instanceof ff.UnsubscriptionError?o=gv(gv([],mv(o)),mv(E.errors)):o.push(E)}}}catch(E){n={error:E}}finally{try{y&&!y.done&&(i=_.return)&&i.call(_)}finally{if(n)throw n.error}}}if(o)throw new ff.UnsubscriptionError(o)}},e.prototype.add=function(r){var t;if(r&&r!==this)if(this.closed)Ev(r);else{if(r instanceof e){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(r)}},e.prototype._hasParent=function(r){var t=this._parentage;return t===r||Array.isArray(t)&&t.includes(r)},e.prototype._addParent=function(r){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(r),t):t?[t,r]:r},e.prototype._removeParent=function(r){var t=this._parentage;t===r?this._parentage=null:Array.isArray(t)&&Ov.arrRemove(t,r)},e.prototype.remove=function(r){var t=this._finalizers;t&&Ov.arrRemove(t,r),r instanceof e&&r._removeParent(this)},e.EMPTY=function(){var r=new e;return r.closed=!0,r}(),e}();Re.Subscription=Wd;Re.EMPTY_SUBSCRIPTION=Wd.EMPTY;function $S(e){return e instanceof Wd||e&&"closed"in e&&Ki.isFunction(e.remove)&&Ki.isFunction(e.add)&&Ki.isFunction(e.unsubscribe)}Re.isSubscription=$S;function Ev(e){Ki.isFunction(e)?e():e.unsubscribe()}var ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.config=void 0;ur.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var _o={},xd={};(function(e){var r=f&&f.__read||function(n,i){var o=typeof Symbol=="function"&&n[Symbol.iterator];if(!o)return n;var a=o.call(n),c,s=[],u;try{for(;(i===void 0||i-- >0)&&!(c=a.next()).done;)s.push(c.value)}catch(l){u={error:l}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(u)throw u.error}}return s},t=f&&f.__spreadArray||function(n,i){for(var o=0,a=i.length,c=n.length;o<a;o++,c++)n[c]=i[o];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutProvider=void 0,e.timeoutProvider={setTimeout:function(n,i){for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var c=e.timeoutProvider.delegate;return c!=null&&c.setTimeout?c.setTimeout.apply(c,t([n,i],r(o))):setTimeout.apply(void 0,t([n,i],r(o)))},clearTimeout:function(n){var i=e.timeoutProvider.delegate;return((i==null?void 0:i.clearTimeout)||clearTimeout)(n)},delegate:void 0}})(xd);Object.defineProperty(_o,"__esModule",{value:!0});_o.reportUnhandledError=void 0;var kS=ur,DS=xd;function LS(e){DS.timeoutProvider.setTimeout(function(){var r=kS.config.onUnhandledError;if(r)r(e);else throw e})}_o.reportUnhandledError=LS;var Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.noop=void 0;function US(){}Ae.noop=US;var mt={};Object.defineProperty(mt,"__esModule",{value:!0});mt.createNotification=mt.nextNotification=mt.errorNotification=mt.COMPLETE_NOTIFICATION=void 0;mt.COMPLETE_NOTIFICATION=function(){return Ic("C",void 0,void 0)}();function FS(e){return Ic("E",void 0,e)}mt.errorNotification=FS;function BS(e){return Ic("N",e,void 0)}mt.nextNotification=BS;function Ic(e,r,t){return{kind:e,value:r,error:t}}mt.createNotification=Ic;var Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.captureError=Xt.errorContext=void 0;var rb=ur,Fr=null;function WS(e){if(rb.config.useDeprecatedSynchronousErrorHandling){var r=!Fr;if(r&&(Fr={errorThrown:!1,error:null}),e(),r){var t=Fr,n=t.errorThrown,i=t.error;if(Fr=null,n)throw i}}else e()}Xt.errorContext=WS;function xS(e){rb.config.useDeprecatedSynchronousErrorHandling&&Fr&&(Fr.errorThrown=!0,Fr.error=e)}Xt.captureError=xS;(function(e){var r=f&&f.__extends||function(){var A=function(R,I){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,M){j.__proto__=M}||function(j,M){for(var G in M)Object.prototype.hasOwnProperty.call(M,G)&&(j[G]=M[G])},A(R,I)};return function(R,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");A(R,I);function j(){this.constructor=R}R.prototype=I===null?Object.create(I):(j.prototype=I.prototype,new j)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_OBSERVER=e.SafeSubscriber=e.Subscriber=void 0;var t=ae,n=Re,i=ur,o=_o,a=Ae,c=mt,s=xd,u=Xt,l=function(A){r(R,A);function R(I){var j=A.call(this)||this;return j.isStopped=!1,I?(j.destination=I,n.isSubscription(I)&&I.add(j)):j.destination=e.EMPTY_OBSERVER,j}return R.create=function(I,j,M){return new m(I,j,M)},R.prototype.next=function(I){this.isStopped?S(c.nextNotification(I),this):this._next(I)},R.prototype.error=function(I){this.isStopped?S(c.errorNotification(I),this):(this.isStopped=!0,this._error(I))},R.prototype.complete=function(){this.isStopped?S(c.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},R.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,A.prototype.unsubscribe.call(this),this.destination=null)},R.prototype._next=function(I){this.destination.next(I)},R.prototype._error=function(I){try{this.destination.error(I)}finally{this.unsubscribe()}},R.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},R}(n.Subscription);e.Subscriber=l;var h=Function.prototype.bind;function _(A,R){return h.call(A,R)}var y=function(){function A(R){this.partialObserver=R}return A.prototype.next=function(R){var I=this.partialObserver;if(I.next)try{I.next(R)}catch(j){E(j)}},A.prototype.error=function(R){var I=this.partialObserver;if(I.error)try{I.error(R)}catch(j){E(j)}else E(R)},A.prototype.complete=function(){var R=this.partialObserver;if(R.complete)try{R.complete()}catch(I){E(I)}},A}(),m=function(A){r(R,A);function R(I,j,M){var G=A.call(this)||this,H;if(t.isFunction(I)||!I)H={next:I??void 0,error:j??void 0,complete:M??void 0};else{var ie;G&&i.config.useDeprecatedNextContext?(ie=Object.create(I),ie.unsubscribe=function(){return G.unsubscribe()},H={next:I.next&&_(I.next,ie),error:I.error&&_(I.error,ie),complete:I.complete&&_(I.complete,ie)}):H=I}return G.destination=new y(H),G}return R}(l);e.SafeSubscriber=m;function E(A){i.config.useDeprecatedSynchronousErrorHandling?u.captureError(A):o.reportUnhandledError(A)}function w(A){throw A}function S(A,R){var I=i.config.onStoppedNotification;I&&s.timeoutProvider.setTimeout(function(){return I(A,R)})}e.EMPTY_OBSERVER={closed:!0,next:a.noop,error:w,complete:a.noop}})(xn);var Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.observable=void 0;Jr.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();var kt={},je={};Object.defineProperty(je,"__esModule",{value:!0});je.identity=void 0;function VS(e){return e}je.identity=VS;Object.defineProperty(kt,"__esModule",{value:!0});kt.pipeFromArray=kt.pipe=void 0;var qS=je;function HS(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return nb(e)}kt.pipe=HS;function nb(e){return e.length===0?qS.identity:e.length===1?e[0]:function(t){return e.reduce(function(n,i){return i(n)},t)}}kt.pipeFromArray=nb;Object.defineProperty(se,"__esModule",{value:!0});se.Observable=void 0;var ed=xn,zS=Re,GS=Jr,YS=kt,KS=ur,df=ae,ZS=Xt,QS=function(){function e(r){r&&(this._subscribe=r)}return e.prototype.lift=function(r){var t=new e;return t.source=this,t.operator=r,t},e.prototype.subscribe=function(r,t,n){var i=this,o=JS(r)?r:new ed.SafeSubscriber(r,t,n);return ZS.errorContext(function(){var a=i,c=a.operator,s=a.source;o.add(c?c.call(o,s):s?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(t){r.error(t)}},e.prototype.forEach=function(r,t){var n=this;return t=wv(t),new t(function(i,o){var a=new ed.SafeSubscriber({next:function(c){try{r(c)}catch(s){o(s),a.unsubscribe()}},error:o,complete:i});n.subscribe(a)})},e.prototype._subscribe=function(r){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(r)},e.prototype[GS.observable]=function(){return this},e.prototype.pipe=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return YS.pipeFromArray(r)(this)},e.prototype.toPromise=function(r){var t=this;return r=wv(r),new r(function(n,i){var o;t.subscribe(function(a){return o=a},function(a){return i(a)},function(){return n(o)})})},e.create=function(r){return new e(r)},e}();se.Observable=QS;function wv(e){var r;return(r=e??KS.config.Promise)!==null&&r!==void 0?r:Promise}function XS(e){return e&&df.isFunction(e.next)&&df.isFunction(e.error)&&df.isFunction(e.complete)}function JS(e){return e&&e instanceof ed.Subscriber||XS(e)&&zS.isSubscription(e)}var en={},Vn={},$={};Object.defineProperty($,"__esModule",{value:!0});$.operate=$.hasLift=void 0;var eP=ae;function ib(e){return eP.isFunction(e==null?void 0:e.lift)}$.hasLift=ib;function tP(e){return function(r){if(ib(r))return r.lift(function(t){try{return e(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}$.operate=tP;var k={},rP=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(k,"__esModule",{value:!0});k.OperatorSubscriber=k.createOperatorSubscriber=void 0;var nP=xn;function iP(e,r,t,n,i){return new ob(e,r,t,n,i)}k.createOperatorSubscriber=iP;var ob=function(e){rP(r,e);function r(t,n,i,o,a,c){var s=e.call(this,t)||this;return s.onFinalize=a,s.shouldUnsubscribe=c,s._next=n?function(u){try{n(u)}catch(l){t.error(l)}}:e.prototype._next,s._error=o?function(u){try{o(u)}catch(l){t.error(l)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=i?function(){try{i()}catch(u){t.error(u)}finally{this.unsubscribe()}}:e.prototype._complete,s}return r.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},r}(nP.Subscriber);k.OperatorSubscriber=ob;Object.defineProperty(Vn,"__esModule",{value:!0});Vn.refCount=void 0;var oP=$,aP=k;function uP(){return oP.operate(function(e,r){var t=null;e._refCount++;var n=aP.createOperatorSubscriber(r,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount){t=null;return}var i=e._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),r.unsubscribe()});e.subscribe(n),n.closed||(t=e.connect())})}Vn.refCount=uP;var cP=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(en,"__esModule",{value:!0});en.ConnectableObservable=void 0;var sP=se,Tv=Re,lP=Vn,fP=k,dP=$,hP=function(e){cP(r,e);function r(t,n){var i=e.call(this)||this;return i.source=t,i.subjectFactory=n,i._subject=null,i._refCount=0,i._connection=null,dP.hasLift(t)&&(i.lift=t.lift),i}return r.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},r.prototype.getSubject=function(){var t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject},r.prototype._teardown=function(){this._refCount=0;var t=this._connection;this._subject=this._connection=null,t==null||t.unsubscribe()},r.prototype.connect=function(){var t=this,n=this._connection;if(!n){n=this._connection=new Tv.Subscription;var i=this.getSubject();n.add(this.source.subscribe(fP.createOperatorSubscriber(i,void 0,function(){t._teardown(),i.complete()},function(o){t._teardown(),i.error(o)},function(){return t._teardown()}))),n.closed&&(this._connection=null,n=Tv.Subscription.EMPTY)}return n},r.prototype.refCount=function(){return lP.refCount()(this)},r}(sP.Observable);en.ConnectableObservable=hP;var Rc={},ab={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.performanceTimestampProvider=void 0,e.performanceTimestampProvider={now:function(){return(e.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}})(ab);var Vd={};(function(e){var r=f&&f.__read||function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var c=a.call(i),s,u=[],l;try{for(;(o===void 0||o-- >0)&&!(s=c.next()).done;)u.push(s.value)}catch(h){l={error:h}}finally{try{s&&!s.done&&(a=c.return)&&a.call(c)}finally{if(l)throw l.error}}return u},t=f&&f.__spreadArray||function(i,o){for(var a=0,c=o.length,s=i.length;a<c;a++,s++)i[s]=o[a];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrameProvider=void 0;var n=Re;e.animationFrameProvider={schedule:function(i){var o=requestAnimationFrame,a=cancelAnimationFrame,c=e.animationFrameProvider.delegate;c&&(o=c.requestAnimationFrame,a=c.cancelAnimationFrame);var s=o(function(u){a=void 0,i(u)});return new n.Subscription(function(){return a==null?void 0:a(s)})},requestAnimationFrame:function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=e.animationFrameProvider.delegate;return((a==null?void 0:a.requestAnimationFrame)||requestAnimationFrame).apply(void 0,t([],r(i)))},cancelAnimationFrame:function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=e.animationFrameProvider.delegate;return((a==null?void 0:a.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,t([],r(i)))},delegate:void 0}})(Vd);Object.defineProperty(Rc,"__esModule",{value:!0});Rc.animationFrames=void 0;var vP=se,_P=ab,Sv=Vd;function pP(e){return e?ub(e):yP}Rc.animationFrames=pP;function ub(e){return new vP.Observable(function(r){var t=e||_P.performanceTimestampProvider,n=t.now(),i=0,o=function(){r.closed||(i=Sv.animationFrameProvider.requestAnimationFrame(function(a){i=0;var c=t.now();r.next({timestamp:e?c:a,elapsed:c-n}),o()}))};return o(),function(){i&&Sv.animationFrameProvider.cancelAnimationFrame(i)}})}var yP=ub(),we={},po={};Object.defineProperty(po,"__esModule",{value:!0});po.ObjectUnsubscribedError=void 0;var bP=Ot;po.ObjectUnsubscribedError=bP.createErrorClass(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var cb=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),mP=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(we,"__esModule",{value:!0});we.AnonymousSubject=we.Subject=void 0;var Pv=se,td=Re,gP=po,OP=dt,hf=Xt,sb=function(e){cb(r,e);function r(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r.prototype.lift=function(t){var n=new rd(this,this);return n.operator=t,n},r.prototype._throwIfClosed=function(){if(this.closed)throw new gP.ObjectUnsubscribedError},r.prototype.next=function(t){var n=this;hf.errorContext(function(){var i,o;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var a=mP(n.currentObservers),c=a.next();!c.done;c=a.next()){var s=c.value;s.next(t)}}catch(u){i={error:u}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}}})},r.prototype.error=function(t){var n=this;hf.errorContext(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=t;for(var i=n.observers;i.length;)i.shift().error(t)}})},r.prototype.complete=function(){var t=this;hf.errorContext(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var n=t.observers;n.length;)n.shift().complete()}})},r.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(r.prototype,"observed",{get:function(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0},enumerable:!1,configurable:!0}),r.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},r.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},r.prototype._innerSubscribe=function(t){var n=this,i=this,o=i.hasError,a=i.isStopped,c=i.observers;return o||a?td.EMPTY_SUBSCRIPTION:(this.currentObservers=null,c.push(t),new td.Subscription(function(){n.currentObservers=null,OP.arrRemove(c,t)}))},r.prototype._checkFinalizedStatuses=function(t){var n=this,i=n.hasError,o=n.thrownError,a=n.isStopped;i?t.error(o):a&&t.complete()},r.prototype.asObservable=function(){var t=new Pv.Observable;return t.source=this,t},r.create=function(t,n){return new rd(t,n)},r}(Pv.Observable);we.Subject=sb;var rd=function(e){cb(r,e);function r(t,n){var i=e.call(this)||this;return i.destination=t,i.source=n,i}return r.prototype.next=function(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,t)},r.prototype.error=function(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,t)},r.prototype.complete=function(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)},r.prototype._subscribe=function(t){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&i!==void 0?i:td.EMPTY_SUBSCRIPTION},r}(sb);we.AnonymousSubject=rd;var yo={},EP=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(yo,"__esModule",{value:!0});yo.BehaviorSubject=void 0;var wP=we,TP=function(e){EP(r,e);function r(t){var n=e.call(this)||this;return n._value=t,n}return Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),r.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},r.prototype.getValue=function(){var t=this,n=t.hasError,i=t.thrownError,o=t._value;if(n)throw i;return this._throwIfClosed(),o},r.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},r}(wP.Subject);yo.BehaviorSubject=TP;var qn={},Ac={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.dateTimestampProvider=void 0,e.dateTimestampProvider={now:function(){return(e.dateTimestampProvider.delegate||Date).now()},delegate:void 0}})(Ac);var SP=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(qn,"__esModule",{value:!0});qn.ReplaySubject=void 0;var PP=we,CP=Ac,IP=function(e){SP(r,e);function r(t,n,i){t===void 0&&(t=1/0),n===void 0&&(n=1/0),i===void 0&&(i=CP.dateTimestampProvider);var o=e.call(this)||this;return o._bufferSize=t,o._windowTime=n,o._timestampProvider=i,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=n===1/0,o._bufferSize=Math.max(1,t),o._windowTime=Math.max(1,n),o}return r.prototype.next=function(t){var n=this,i=n.isStopped,o=n._buffer,a=n._infiniteTimeWindow,c=n._timestampProvider,s=n._windowTime;i||(o.push(t),!a&&o.push(c.now()+s)),this._trimBuffer(),e.prototype.next.call(this,t)},r.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(t),i=this,o=i._infiniteTimeWindow,a=i._buffer,c=a.slice(),s=0;s<c.length&&!t.closed;s+=o?1:2)t.next(c[s]);return this._checkFinalizedStatuses(t),n},r.prototype._trimBuffer=function(){var t=this,n=t._bufferSize,i=t._timestampProvider,o=t._buffer,a=t._infiniteTimeWindow,c=(a?1:2)*n;if(n<1/0&&c<o.length&&o.splice(0,o.length-c),!a){for(var s=i.now(),u=0,l=1;l<o.length&&o[l]<=s;l+=2)u=l;u&&o.splice(0,u+1)}},r}(PP.Subject);qn.ReplaySubject=IP;var Hn={},RP=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Hn,"__esModule",{value:!0});Hn.AsyncSubject=void 0;var AP=we,jP=function(e){RP(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t._value=null,t._hasValue=!1,t._isComplete=!1,t}return r.prototype._checkFinalizedStatuses=function(t){var n=this,i=n.hasError,o=n._hasValue,a=n._value,c=n.thrownError,s=n.isStopped,u=n._isComplete;i?t.error(c):(s||u)&&(o&&t.next(a),t.complete())},r.prototype.next=function(t){this.isStopped||(this._value=t,this._hasValue=!0)},r.prototype.complete=function(){var t=this,n=t._hasValue,i=t._value,o=t._isComplete;o||(this._isComplete=!0,n&&e.prototype.next.call(this,i),e.prototype.complete.call(this))},r}(AP.Subject);Hn.AsyncSubject=jP;var lb={},jc={},cr={},Mc={},MP=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Mc,"__esModule",{value:!0});Mc.Action=void 0;var NP=Re,$P=function(e){MP(r,e);function r(t,n){return e.call(this)||this}return r.prototype.schedule=function(t,n){return this},r}(NP.Subscription);Mc.Action=$P;var fb={};(function(e){var r=f&&f.__read||function(n,i){var o=typeof Symbol=="function"&&n[Symbol.iterator];if(!o)return n;var a=o.call(n),c,s=[],u;try{for(;(i===void 0||i-- >0)&&!(c=a.next()).done;)s.push(c.value)}catch(l){u={error:l}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(u)throw u.error}}return s},t=f&&f.__spreadArray||function(n,i){for(var o=0,a=i.length,c=n.length;o<a;o++,c++)n[c]=i[o];return n};Object.defineProperty(e,"__esModule",{value:!0}),e.intervalProvider=void 0,e.intervalProvider={setInterval:function(n,i){for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var c=e.intervalProvider.delegate;return c!=null&&c.setInterval?c.setInterval.apply(c,t([n,i],r(o))):setInterval.apply(void 0,t([n,i],r(o)))},clearInterval:function(n){var i=e.intervalProvider.delegate;return((i==null?void 0:i.clearInterval)||clearInterval)(n)},delegate:void 0}})(fb);var kP=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(cr,"__esModule",{value:!0});cr.AsyncAction=void 0;var DP=Mc,Cv=fb,LP=dt,UP=function(e){kP(r,e);function r(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.pending=!1,i}return r.prototype.schedule=function(t,n){var i;if(n===void 0&&(n=0),this.closed)return this;this.state=t;var o=this.id,a=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(a,o,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(a,this.id,n),this},r.prototype.requestAsyncId=function(t,n,i){return i===void 0&&(i=0),Cv.intervalProvider.setInterval(t.flush.bind(t,this),i)},r.prototype.recycleAsyncId=function(t,n,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Cv.intervalProvider.clearInterval(n)},r.prototype.execute=function(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(t,n){var i=!1,o;try{this.work(t)}catch(a){i=!0,o=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},r.prototype.unsubscribe=function(){if(!this.closed){var t=this,n=t.id,i=t.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,LP.arrRemove(o,this),n!=null&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},r}(DP.Action);cr.AsyncAction=UP;var db={},Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.TestTools=Nn.Immediate=void 0;var FP=1,vf,ec={};function Iv(e){return e in ec?(delete ec[e],!0):!1}Nn.Immediate={setImmediate:function(e){var r=FP++;return ec[r]=!0,vf||(vf=Promise.resolve()),vf.then(function(){return Iv(r)&&e()}),r},clearImmediate:function(e){Iv(e)}};Nn.TestTools={pending:function(){return Object.keys(ec).length}};(function(e){var r=f&&f.__read||function(a,c){var s=typeof Symbol=="function"&&a[Symbol.iterator];if(!s)return a;var u=s.call(a),l,h=[],_;try{for(;(c===void 0||c-- >0)&&!(l=u.next()).done;)h.push(l.value)}catch(y){_={error:y}}finally{try{l&&!l.done&&(s=u.return)&&s.call(u)}finally{if(_)throw _.error}}return h},t=f&&f.__spreadArray||function(a,c){for(var s=0,u=c.length,l=a.length;s<u;s++,l++)a[l]=c[s];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.immediateProvider=void 0;var n=Nn,i=n.Immediate.setImmediate,o=n.Immediate.clearImmediate;e.immediateProvider={setImmediate:function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var s=e.immediateProvider.delegate;return((s==null?void 0:s.setImmediate)||i).apply(void 0,t([],r(a)))},clearImmediate:function(a){var c=e.immediateProvider.delegate;return((c==null?void 0:c.clearImmediate)||o)(a)},delegate:void 0}})(db);var BP=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(jc,"__esModule",{value:!0});jc.AsapAction=void 0;var WP=cr,Rv=db,xP=function(e){BP(r,e);function r(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i}return r.prototype.requestAsyncId=function(t,n,i){return i===void 0&&(i=0),i!==null&&i>0?e.prototype.requestAsyncId.call(this,t,n,i):(t.actions.push(this),t._scheduled||(t._scheduled=Rv.immediateProvider.setImmediate(t.flush.bind(t,void 0))))},r.prototype.recycleAsyncId=function(t,n,i){var o;if(i===void 0&&(i=0),i!=null?i>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,i);var a=t.actions;n!=null&&((o=a[a.length-1])===null||o===void 0?void 0:o.id)!==n&&(Rv.immediateProvider.clearImmediate(n),t._scheduled===n&&(t._scheduled=void 0))},r}(WP.AsyncAction);jc.AsapAction=xP;var Nc={},sr={},bo={};Object.defineProperty(bo,"__esModule",{value:!0});bo.Scheduler=void 0;var VP=Ac,qP=function(){function e(r,t){t===void 0&&(t=e.now),this.schedulerActionCtor=r,this.now=t}return e.prototype.schedule=function(r,t,n){return t===void 0&&(t=0),new this.schedulerActionCtor(this,r).schedule(n,t)},e.now=VP.dateTimestampProvider.now,e}();bo.Scheduler=qP;var HP=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(sr,"__esModule",{value:!0});sr.AsyncScheduler=void 0;var Av=bo,zP=function(e){HP(r,e);function r(t,n){n===void 0&&(n=Av.Scheduler.now);var i=e.call(this,t,n)||this;return i.actions=[],i._active=!1,i}return r.prototype.flush=function(t){var n=this.actions;if(this._active){n.push(t);return}var i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}},r}(Av.Scheduler);sr.AsyncScheduler=zP;var GP=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Nc,"__esModule",{value:!0});Nc.AsapScheduler=void 0;var YP=sr,KP=function(e){GP(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.flush=function(t){this._active=!0;var n=this._scheduled;this._scheduled=void 0;var i=this.actions,o;t=t||i.shift();do if(o=t.execute(t.state,t.delay))break;while((t=i[0])&&t.id===n&&i.shift());if(this._active=!1,o){for(;(t=i[0])&&t.id===n&&i.shift();)t.unsubscribe();throw o}},r}(YP.AsyncScheduler);Nc.AsapScheduler=KP;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.asap=e.asapScheduler=void 0;var r=jc,t=Nc;e.asapScheduler=new t.AsapScheduler(r.AsapAction),e.asap=e.asapScheduler})(lb);var Ke={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.async=e.asyncScheduler=void 0;var r=cr,t=sr;e.asyncScheduler=new t.AsyncScheduler(r.AsyncAction),e.async=e.asyncScheduler})(Ke);var hb={},$c={},ZP=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty($c,"__esModule",{value:!0});$c.QueueAction=void 0;var QP=cr,XP=function(e){ZP(r,e);function r(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i}return r.prototype.schedule=function(t,n){return n===void 0&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},r.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},r.prototype.requestAsyncId=function(t,n,i){return i===void 0&&(i=0),i!=null&&i>0||i==null&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,i):(t.flush(this),0)},r}(QP.AsyncAction);$c.QueueAction=XP;var kc={},JP=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(kc,"__esModule",{value:!0});kc.QueueScheduler=void 0;var eC=sr,tC=function(e){JP(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(eC.AsyncScheduler);kc.QueueScheduler=tC;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.queue=e.queueScheduler=void 0;var r=$c,t=kc;e.queueScheduler=new t.QueueScheduler(r.QueueAction),e.queue=e.queueScheduler})(hb);var vb={},Dc={},rC=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Dc,"__esModule",{value:!0});Dc.AnimationFrameAction=void 0;var nC=cr,jv=Vd,iC=function(e){rC(r,e);function r(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i}return r.prototype.requestAsyncId=function(t,n,i){return i===void 0&&(i=0),i!==null&&i>0?e.prototype.requestAsyncId.call(this,t,n,i):(t.actions.push(this),t._scheduled||(t._scheduled=jv.animationFrameProvider.requestAnimationFrame(function(){return t.flush(void 0)})))},r.prototype.recycleAsyncId=function(t,n,i){var o;if(i===void 0&&(i=0),i!=null?i>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,i);var a=t.actions;n!=null&&((o=a[a.length-1])===null||o===void 0?void 0:o.id)!==n&&(jv.animationFrameProvider.cancelAnimationFrame(n),t._scheduled=void 0)},r}(nC.AsyncAction);Dc.AnimationFrameAction=iC;var Lc={},oC=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Lc,"__esModule",{value:!0});Lc.AnimationFrameScheduler=void 0;var aC=sr,uC=function(e){oC(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.flush=function(t){this._active=!0;var n=this._scheduled;this._scheduled=void 0;var i=this.actions,o;t=t||i.shift();do if(o=t.execute(t.state,t.delay))break;while((t=i[0])&&t.id===n&&i.shift());if(this._active=!1,o){for(;(t=i[0])&&t.id===n&&i.shift();)t.unsubscribe();throw o}},r}(aC.AsyncScheduler);Lc.AnimationFrameScheduler=uC;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrame=e.animationFrameScheduler=void 0;var r=Dc,t=Lc;e.animationFrameScheduler=new t.AnimationFrameScheduler(r.AnimationFrameAction),e.animationFrame=e.animationFrameScheduler})(vb);var $n={},_b=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty($n,"__esModule",{value:!0});$n.VirtualAction=$n.VirtualTimeScheduler=void 0;var cC=cr,sC=Re,lC=sr,fC=function(e){_b(r,e);function r(t,n){t===void 0&&(t=pb),n===void 0&&(n=1/0);var i=e.call(this,t,function(){return i.frame})||this;return i.maxFrames=n,i.frame=0,i.index=-1,i}return r.prototype.flush=function(){for(var t=this,n=t.actions,i=t.maxFrames,o,a;(a=n[0])&&a.delay<=i&&(n.shift(),this.frame=a.delay,!(o=a.execute(a.state,a.delay))););if(o){for(;a=n.shift();)a.unsubscribe();throw o}},r.frameTimeFactor=10,r}(lC.AsyncScheduler);$n.VirtualTimeScheduler=fC;var pb=function(e){_b(r,e);function r(t,n,i){i===void 0&&(i=t.index+=1);var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o.index=i,o.active=!0,o.index=t.index=i,o}return r.prototype.schedule=function(t,n){if(n===void 0&&(n=0),Number.isFinite(n)){if(!this.id)return e.prototype.schedule.call(this,t,n);this.active=!1;var i=new r(this.scheduler,this.work);return this.add(i),i.schedule(t,n)}else return sC.Subscription.EMPTY},r.prototype.requestAsyncId=function(t,n,i){i===void 0&&(i=0),this.delay=t.frame+i;var o=t.actions;return o.push(this),o.sort(r.sortActions),1},r.prototype.recycleAsyncId=function(t,n,i){},r.prototype._execute=function(t,n){if(this.active===!0)return e.prototype._execute.call(this,t,n)},r.sortActions=function(t,n){return t.delay===n.delay?t.index===n.index?0:t.index>n.index?1:-1:t.delay>n.delay?1:-1},r}(cC.AsyncAction);$n.VirtualAction=pb;var Uc={},ft={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=void 0;var r=se;e.EMPTY=new r.Observable(function(i){return i.complete()});function t(i){return i?n(i):e.EMPTY}e.empty=t;function n(i){return new r.Observable(function(o){return i.schedule(function(){return o.complete()})})}})(ft);var zn={},Ce={},tn={};Object.defineProperty(tn,"__esModule",{value:!0});tn.isScheduler=void 0;var dC=ae;function hC(e){return e&&dC.isFunction(e.schedule)}tn.isScheduler=hC;Object.defineProperty(Ce,"__esModule",{value:!0});Ce.popNumber=Ce.popScheduler=Ce.popResultSelector=void 0;var vC=ae,_C=tn;function qd(e){return e[e.length-1]}function pC(e){return vC.isFunction(qd(e))?e.pop():void 0}Ce.popResultSelector=pC;function yC(e){return _C.isScheduler(qd(e))?e.pop():void 0}Ce.popScheduler=yC;function bC(e,r){return typeof qd(e)=="number"?e.pop():r}Ce.popNumber=bC;var ht={},mo={},Fc={},F={},Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.isArrayLike=void 0;Gn.isArrayLike=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};var go={};Object.defineProperty(go,"__esModule",{value:!0});go.isPromise=void 0;var mC=ae;function gC(e){return mC.isFunction(e==null?void 0:e.then)}go.isPromise=gC;var Oo={};Object.defineProperty(Oo,"__esModule",{value:!0});Oo.isInteropObservable=void 0;var OC=Jr,EC=ae;function wC(e){return EC.isFunction(e[OC.observable])}Oo.isInteropObservable=wC;var Eo={};Object.defineProperty(Eo,"__esModule",{value:!0});Eo.isAsyncIterable=void 0;var TC=ae;function SC(e){return Symbol.asyncIterator&&TC.isFunction(e==null?void 0:e[Symbol.asyncIterator])}Eo.isAsyncIterable=SC;var wo={};Object.defineProperty(wo,"__esModule",{value:!0});wo.createInvalidObservableTypeError=void 0;function PC(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}wo.createInvalidObservableTypeError=PC;var To={},qr={};Object.defineProperty(qr,"__esModule",{value:!0});qr.iterator=qr.getSymbolIterator=void 0;function yb(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}qr.getSymbolIterator=yb;qr.iterator=yb();Object.defineProperty(To,"__esModule",{value:!0});To.isIterable=void 0;var CC=qr,IC=ae;function RC(e){return IC.isFunction(e==null?void 0:e[CC.iterator])}To.isIterable=RC;var Jt={},AC=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Cn=f&&f.__await||function(e){return this instanceof Cn?(this.v=e,this):new Cn(e)},jC=f&&f.__asyncGenerator||function(e,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(e,r||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(_){n[_]&&(i[_]=function(y){return new Promise(function(m,E){o.push([_,y,m,E])>1||c(_,y)})})}function c(_,y){try{s(n[_](y))}catch(m){h(o[0][3],m)}}function s(_){_.value instanceof Cn?Promise.resolve(_.value.v).then(u,l):h(o[0][2],_)}function u(_){c("next",_)}function l(_){c("throw",_)}function h(_,y){_(y),o.shift(),o.length&&c(o[0][0],o[0][1])}};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.isReadableStreamLike=Jt.readableStreamLikeToAsyncGenerator=void 0;var MC=ae;function NC(e){return jC(this,arguments,function(){var t,n,i,o;return AC(this,function(a){switch(a.label){case 0:t=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Cn(t.read())];case 3:return n=a.sent(),i=n.value,o=n.done,o?[4,Cn(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Cn(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}Jt.readableStreamLikeToAsyncGenerator=NC;function $C(e){return MC.isFunction(e==null?void 0:e.getReader)}Jt.isReadableStreamLike=$C;var kC=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(c,s)}u((n=n.apply(e,r||[])).next())})},DC=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},LC=f&&f.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e[Symbol.asyncIterator],t;return r?r.call(e):(e=typeof nd=="function"?nd(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=e[o]&&function(a){return new Promise(function(c,s){a=e[o](a),i(c,s,a.done,a.value)})}}function i(o,a,c,s){Promise.resolve(s).then(function(u){o({value:u,done:c})},a)}},nd=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(F,"__esModule",{value:!0});F.fromReadableStreamLike=F.fromAsyncIterable=F.fromIterable=F.fromPromise=F.fromArrayLike=F.fromInteropObservable=F.innerFrom=void 0;var UC=Gn,FC=go,Yn=se,BC=Oo,WC=Eo,xC=wo,VC=To,bb=Jt,qC=ae,HC=_o,zC=Jr;function GC(e){if(e instanceof Yn.Observable)return e;if(e!=null){if(BC.isInteropObservable(e))return mb(e);if(UC.isArrayLike(e))return gb(e);if(FC.isPromise(e))return Ob(e);if(WC.isAsyncIterable(e))return Hd(e);if(VC.isIterable(e))return Eb(e);if(bb.isReadableStreamLike(e))return wb(e)}throw xC.createInvalidObservableTypeError(e)}F.innerFrom=GC;function mb(e){return new Yn.Observable(function(r){var t=e[zC.observable]();if(qC.isFunction(t.subscribe))return t.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}F.fromInteropObservable=mb;function gb(e){return new Yn.Observable(function(r){for(var t=0;t<e.length&&!r.closed;t++)r.next(e[t]);r.complete()})}F.fromArrayLike=gb;function Ob(e){return new Yn.Observable(function(r){e.then(function(t){r.closed||(r.next(t),r.complete())},function(t){return r.error(t)}).then(null,HC.reportUnhandledError)})}F.fromPromise=Ob;function Eb(e){return new Yn.Observable(function(r){var t,n;try{for(var i=nd(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(r.next(a),r.closed)return}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}r.complete()})}F.fromIterable=Eb;function Hd(e){return new Yn.Observable(function(r){YC(e,r).catch(function(t){return r.error(t)})})}F.fromAsyncIterable=Hd;function wb(e){return Hd(bb.readableStreamLikeToAsyncGenerator(e))}F.fromReadableStreamLike=wb;function YC(e,r){var t,n,i,o;return kC(this,void 0,void 0,function(){var a,c;return DC(this,function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),t=LC(e),s.label=1;case 1:return[4,t.next()];case 2:if(n=s.sent(),!!n.done)return[3,4];if(a=n.value,r.next(a),r.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=s.sent(),i={error:c},[3,11];case 6:return s.trys.push([6,,9,10]),n&&!n.done&&(o=t.return)?[4,o.call(t)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return r.complete(),[2]}})})}var lr={},vt={};Object.defineProperty(vt,"__esModule",{value:!0});vt.executeSchedule=void 0;function KC(e,r,t,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var o=r.schedule(function(){t(),i?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(o),!i)return o}vt.executeSchedule=KC;Object.defineProperty(lr,"__esModule",{value:!0});lr.observeOn=void 0;var _f=vt,ZC=$,QC=k;function XC(e,r){return r===void 0&&(r=0),ZC.operate(function(t,n){t.subscribe(QC.createOperatorSubscriber(n,function(i){return _f.executeSchedule(n,e,function(){return n.next(i)},r)},function(){return _f.executeSchedule(n,e,function(){return n.complete()},r)},function(i){return _f.executeSchedule(n,e,function(){return n.error(i)},r)}))})}lr.observeOn=XC;var fr={};Object.defineProperty(fr,"__esModule",{value:!0});fr.subscribeOn=void 0;var JC=$;function eI(e,r){return r===void 0&&(r=0),JC.operate(function(t,n){n.add(e.schedule(function(){return t.subscribe(n)},r))})}fr.subscribeOn=eI;Object.defineProperty(Fc,"__esModule",{value:!0});Fc.scheduleObservable=void 0;var tI=F,rI=lr,nI=fr;function iI(e,r){return tI.innerFrom(e).pipe(nI.subscribeOn(r),rI.observeOn(r))}Fc.scheduleObservable=iI;var Bc={};Object.defineProperty(Bc,"__esModule",{value:!0});Bc.schedulePromise=void 0;var oI=F,aI=lr,uI=fr;function cI(e,r){return oI.innerFrom(e).pipe(uI.subscribeOn(r),aI.observeOn(r))}Bc.schedulePromise=cI;var Wc={};Object.defineProperty(Wc,"__esModule",{value:!0});Wc.scheduleArray=void 0;var sI=se;function lI(e,r){return new sI.Observable(function(t){var n=0;return r.schedule(function(){n===e.length?t.complete():(t.next(e[n++]),t.closed||this.schedule())})})}Wc.scheduleArray=lI;var So={};Object.defineProperty(So,"__esModule",{value:!0});So.scheduleIterable=void 0;var fI=se,dI=qr,hI=ae,Mv=vt;function vI(e,r){return new fI.Observable(function(t){var n;return Mv.executeSchedule(t,r,function(){n=e[dI.iterator](),Mv.executeSchedule(t,r,function(){var i,o,a;try{i=n.next(),o=i.value,a=i.done}catch(c){t.error(c);return}a?t.complete():t.next(o)},0,!0)}),function(){return hI.isFunction(n==null?void 0:n.return)&&n.return()}})}So.scheduleIterable=vI;var Po={};Object.defineProperty(Po,"__esModule",{value:!0});Po.scheduleAsyncIterable=void 0;var _I=se,Nv=vt;function pI(e,r){if(!e)throw new Error("Iterable cannot be null");return new _I.Observable(function(t){Nv.executeSchedule(t,r,function(){var n=e[Symbol.asyncIterator]();Nv.executeSchedule(t,r,function(){n.next().then(function(i){i.done?t.complete():t.next(i.value)})},0,!0)})})}Po.scheduleAsyncIterable=pI;var xc={};Object.defineProperty(xc,"__esModule",{value:!0});xc.scheduleReadableStreamLike=void 0;var yI=Po,bI=Jt;function mI(e,r){return yI.scheduleAsyncIterable(bI.readableStreamLikeToAsyncGenerator(e),r)}xc.scheduleReadableStreamLike=mI;Object.defineProperty(mo,"__esModule",{value:!0});mo.scheduled=void 0;var gI=Fc,OI=Bc,EI=Wc,wI=So,TI=Po,SI=Oo,PI=go,CI=Gn,II=To,RI=Eo,AI=wo,jI=Jt,MI=xc;function NI(e,r){if(e!=null){if(SI.isInteropObservable(e))return gI.scheduleObservable(e,r);if(CI.isArrayLike(e))return EI.scheduleArray(e,r);if(PI.isPromise(e))return OI.schedulePromise(e,r);if(RI.isAsyncIterable(e))return TI.scheduleAsyncIterable(e,r);if(II.isIterable(e))return wI.scheduleIterable(e,r);if(jI.isReadableStreamLike(e))return MI.scheduleReadableStreamLike(e,r)}throw AI.createInvalidObservableTypeError(e)}mo.scheduled=NI;Object.defineProperty(ht,"__esModule",{value:!0});ht.from=void 0;var $I=mo,kI=F;function DI(e,r){return r?$I.scheduled(e,r):kI.innerFrom(e)}ht.from=DI;Object.defineProperty(zn,"__esModule",{value:!0});zn.of=void 0;var LI=Ce,UI=ht;function FI(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=LI.popScheduler(e);return UI.from(e,t)}zn.of=FI;var Co={};Object.defineProperty(Co,"__esModule",{value:!0});Co.throwError=void 0;var BI=se,WI=ae;function xI(e,r){var t=WI.isFunction(e)?e:function(){return e},n=function(i){return i.error(t())};return new BI.Observable(r?function(i){return r.schedule(n,0,i)}:n)}Co.throwError=xI;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.observeNotification=e.Notification=e.NotificationKind=void 0;var r=ft,t=zn,n=Co,i=ae;(function(c){c.NEXT="N",c.ERROR="E",c.COMPLETE="C"})(e.NotificationKind||(e.NotificationKind={}));var o=function(){function c(s,u,l){this.kind=s,this.value=u,this.error=l,this.hasValue=s==="N"}return c.prototype.observe=function(s){return a(this,s)},c.prototype.do=function(s,u,l){var h=this,_=h.kind,y=h.value,m=h.error;return _==="N"?s==null?void 0:s(y):_==="E"?u==null?void 0:u(m):l==null?void 0:l()},c.prototype.accept=function(s,u,l){var h;return i.isFunction((h=s)===null||h===void 0?void 0:h.next)?this.observe(s):this.do(s,u,l)},c.prototype.toObservable=function(){var s=this,u=s.kind,l=s.value,h=s.error,_=u==="N"?t.of(l):u==="E"?n.throwError(function(){return h}):u==="C"?r.EMPTY:0;if(!_)throw new TypeError("Unexpected notification kind "+u);return _},c.createNext=function(s){return new c("N",s)},c.createError=function(s){return new c("E",void 0,s)},c.createComplete=function(){return c.completeNotification},c.completeNotification=new c("C"),c}();e.Notification=o;function a(c,s){var u,l,h,_=c,y=_.kind,m=_.value,E=_.error;if(typeof y!="string")throw new TypeError('Invalid notification, missing "kind"');y==="N"?(u=s.next)===null||u===void 0||u.call(s,m):y==="E"?(l=s.error)===null||l===void 0||l.call(s,E):(h=s.complete)===null||h===void 0||h.call(s)}e.observeNotification=a})(Uc);var Vc={};Object.defineProperty(Vc,"__esModule",{value:!0});Vc.isObservable=void 0;var VI=se,$v=ae;function qI(e){return!!e&&(e instanceof VI.Observable||$v.isFunction(e.lift)&&$v.isFunction(e.subscribe))}Vc.isObservable=qI;var qc={},Et={};Object.defineProperty(Et,"__esModule",{value:!0});Et.EmptyError=void 0;var HI=Ot;Et.EmptyError=HI.createErrorClass(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});Object.defineProperty(qc,"__esModule",{value:!0});qc.lastValueFrom=void 0;var zI=Et;function GI(e,r){var t=typeof r=="object";return new Promise(function(n,i){var o=!1,a;e.subscribe({next:function(c){a=c,o=!0},error:i,complete:function(){o?n(a):t?n(r.defaultValue):i(new zI.EmptyError)}})})}qc.lastValueFrom=GI;var Hc={};Object.defineProperty(Hc,"__esModule",{value:!0});Hc.firstValueFrom=void 0;var YI=Et,KI=xn;function ZI(e,r){var t=typeof r=="object";return new Promise(function(n,i){var o=new KI.SafeSubscriber({next:function(a){n(a),o.unsubscribe()},error:i,complete:function(){t?n(r.defaultValue):i(new YI.EmptyError)}});e.subscribe(o)})}Hc.firstValueFrom=ZI;var Io={};Object.defineProperty(Io,"__esModule",{value:!0});Io.ArgumentOutOfRangeError=void 0;var QI=Ot;Io.ArgumentOutOfRangeError=QI.createErrorClass(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}});var Ro={};Object.defineProperty(Ro,"__esModule",{value:!0});Ro.NotFoundError=void 0;var XI=Ot;Ro.NotFoundError=XI.createErrorClass(function(e){return function(t){e(this),this.name="NotFoundError",this.message=t}});var Ao={};Object.defineProperty(Ao,"__esModule",{value:!0});Ao.SequenceError=void 0;var JI=Ot;Ao.SequenceError=JI.createErrorClass(function(e){return function(t){e(this),this.name="SequenceError",this.message=t}});var to={},Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.isValidDate=void 0;function eR(e){return e instanceof Date&&!isNaN(e)}Kn.isValidDate=eR;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.timeout=e.TimeoutError=void 0;var r=Ke,t=Kn,n=$,i=F,o=Ot,a=k,c=vt;e.TimeoutError=o.createErrorClass(function(l){return function(_){_===void 0&&(_=null),l(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=_}});function s(l,h){var _=t.isValidDate(l)?{first:l}:typeof l=="number"?{each:l}:l,y=_.first,m=_.each,E=_.with,w=E===void 0?u:E,S=_.scheduler,A=S===void 0?h??r.asyncScheduler:S,R=_.meta,I=R===void 0?null:R;if(y==null&&m==null)throw new TypeError("No timeout provided.");return n.operate(function(j,M){var G,H,ie=null,ue=0,pe=function(J){H=c.executeSchedule(M,A,function(){try{G.unsubscribe(),i.innerFrom(w({meta:I,lastValue:ie,seen:ue})).subscribe(M)}catch(_e){M.error(_e)}},J)};G=j.subscribe(a.createOperatorSubscriber(M,function(J){H==null||H.unsubscribe(),ue++,M.next(ie=J),m>0&&pe(m)},void 0,void 0,function(){H!=null&&H.closed||H==null||H.unsubscribe(),ie=null})),!ue&&pe(y!=null?typeof y=="number"?y:+y-A.now():m)})}e.timeout=s;function u(l){throw new e.TimeoutError(l)}})(to);var zc={},jo={},wt={},_t={};Object.defineProperty(_t,"__esModule",{value:!0});_t.map=void 0;var tR=$,rR=k;function nR(e,r){return tR.operate(function(t,n){var i=0;t.subscribe(rR.createOperatorSubscriber(n,function(o){n.next(e.call(r,o,i++))}))})}_t.map=nR;var iR=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},oR=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(wt,"__esModule",{value:!0});wt.mapOneOrManyArgs=void 0;var aR=_t,uR=Array.isArray;function cR(e,r){return uR(r)?e.apply(void 0,oR([],iR(r))):e(r)}function sR(e){return aR.map(function(r){return cR(e,r)})}wt.mapOneOrManyArgs=sR;var lR=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},kv=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(jo,"__esModule",{value:!0});jo.bindCallbackInternals=void 0;var fR=tn,dR=se,hR=fr,vR=wt,_R=lr,pR=Hn;function id(e,r,t,n){if(t)if(fR.isScheduler(t))n=t;else return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return id(e,r,n).apply(this,i).pipe(vR.mapOneOrManyArgs(t))};return n?function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return id(e,r).apply(this,i).pipe(hR.subscribeOn(n),_R.observeOn(n))}:function(){for(var i=this,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var c=new pR.AsyncSubject,s=!0;return new dR.Observable(function(u){var l=c.subscribe(u);if(s){s=!1;var h=!1,_=!1;r.apply(i,kv(kv([],lR(o)),[function(){for(var y=[],m=0;m<arguments.length;m++)y[m]=arguments[m];if(e){var E=y.shift();if(E!=null){c.error(E);return}}c.next(1<y.length?y:y[0]),_=!0,h&&c.complete()}])),_&&c.complete(),h=!0}return l})}}jo.bindCallbackInternals=id;Object.defineProperty(zc,"__esModule",{value:!0});zc.bindCallback=void 0;var yR=jo;function bR(e,r,t){return yR.bindCallbackInternals(!1,e,r,t)}zc.bindCallback=bR;var Gc={};Object.defineProperty(Gc,"__esModule",{value:!0});Gc.bindNodeCallback=void 0;var mR=jo;function gR(e,r,t){return mR.bindCallbackInternals(!0,e,r,t)}Gc.bindNodeCallback=gR;var er={},Mo={};Object.defineProperty(Mo,"__esModule",{value:!0});Mo.argsArgArrayOrObject=void 0;var OR=Array.isArray,ER=Object.getPrototypeOf,wR=Object.prototype,TR=Object.keys;function SR(e){if(e.length===1){var r=e[0];if(OR(r))return{args:r,keys:null};if(PR(r)){var t=TR(r);return{args:t.map(function(n){return r[n]}),keys:t}}}return{args:e,keys:null}}Mo.argsArgArrayOrObject=SR;function PR(e){return e&&typeof e=="object"&&ER(e)===wR}var No={};Object.defineProperty(No,"__esModule",{value:!0});No.createObject=void 0;function CR(e,r){return e.reduce(function(t,n,i){return t[n]=r[i],t},{})}No.createObject=CR;Object.defineProperty(er,"__esModule",{value:!0});er.combineLatestInit=er.combineLatest=void 0;var IR=se,RR=Mo,Tb=ht,Sb=je,AR=wt,Dv=Ce,jR=No,MR=k,NR=vt;function $R(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Dv.popScheduler(e),n=Dv.popResultSelector(e),i=RR.argsArgArrayOrObject(e),o=i.args,a=i.keys;if(o.length===0)return Tb.from([],t);var c=new IR.Observable(Pb(o,t,a?function(s){return jR.createObject(a,s)}:Sb.identity));return n?c.pipe(AR.mapOneOrManyArgs(n)):c}er.combineLatest=$R;function Pb(e,r,t){return t===void 0&&(t=Sb.identity),function(n){Lv(r,function(){for(var i=e.length,o=new Array(i),a=i,c=i,s=function(l){Lv(r,function(){var h=Tb.from(e[l],r),_=!1;h.subscribe(MR.createOperatorSubscriber(n,function(y){o[l]=y,_||(_=!0,c--),c||n.next(t(o.slice()))},function(){--a||n.complete()}))},n)},u=0;u<i;u++)s(u)},n)}}er.combineLatestInit=Pb;function Lv(e,r,t){e?NR.executeSchedule(t,e,r):r()}var rn={},nn={},dr={},it={},Zn={};Object.defineProperty(Zn,"__esModule",{value:!0});Zn.mergeInternals=void 0;var kR=F,DR=vt,Uv=k;function LR(e,r,t,n,i,o,a,c){var s=[],u=0,l=0,h=!1,_=function(){h&&!s.length&&!u&&r.complete()},y=function(E){return u<n?m(E):s.push(E)},m=function(E){o&&r.next(E),u++;var w=!1;kR.innerFrom(t(E,l++)).subscribe(Uv.createOperatorSubscriber(r,function(S){i==null||i(S),o?y(S):r.next(S)},function(){w=!0},void 0,function(){if(w)try{u--;for(var S=function(){var A=s.shift();a?DR.executeSchedule(r,a,function(){return m(A)}):m(A)};s.length&&u<n;)S();_()}catch(A){r.error(A)}}))};return e.subscribe(Uv.createOperatorSubscriber(r,y,function(){h=!0,_()})),function(){c==null||c()}}Zn.mergeInternals=LR;Object.defineProperty(it,"__esModule",{value:!0});it.mergeMap=void 0;var UR=_t,FR=F,BR=$,WR=Zn,xR=ae;function Cb(e,r,t){return t===void 0&&(t=1/0),xR.isFunction(r)?Cb(function(n,i){return UR.map(function(o,a){return r(n,o,i,a)})(FR.innerFrom(e(n,i)))},t):(typeof r=="number"&&(t=r),BR.operate(function(n,i){return WR.mergeInternals(n,i,e,t)}))}it.mergeMap=Cb;Object.defineProperty(dr,"__esModule",{value:!0});dr.mergeAll=void 0;var VR=it,qR=je;function HR(e){return e===void 0&&(e=1/0),VR.mergeMap(qR.identity,e)}dr.mergeAll=HR;Object.defineProperty(nn,"__esModule",{value:!0});nn.concatAll=void 0;var zR=dr;function GR(){return zR.mergeAll(1)}nn.concatAll=GR;Object.defineProperty(rn,"__esModule",{value:!0});rn.concat=void 0;var YR=nn,KR=Ce,ZR=ht;function QR(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return YR.concatAll()(ZR.from(e,KR.popScheduler(e)))}rn.concat=QR;var Yc={},on={};Object.defineProperty(on,"__esModule",{value:!0});on.defer=void 0;var XR=se,JR=F;function eA(e){return new XR.Observable(function(r){JR.innerFrom(e()).subscribe(r)})}on.defer=eA;Object.defineProperty(Yc,"__esModule",{value:!0});Yc.connectable=void 0;var tA=we,rA=se,nA=on,iA={connector:function(){return new tA.Subject},resetOnDisconnect:!0};function oA(e,r){r===void 0&&(r=iA);var t=null,n=r.connector,i=r.resetOnDisconnect,o=i===void 0?!0:i,a=n(),c=new rA.Observable(function(s){return a.subscribe(s)});return c.connect=function(){return(!t||t.closed)&&(t=nA.defer(function(){return e}).subscribe(a),o&&t.add(function(){return a=n()})),t},c}Yc.connectable=oA;var Kc={};Object.defineProperty(Kc,"__esModule",{value:!0});Kc.forkJoin=void 0;var aA=se,uA=Mo,cA=F,sA=Ce,lA=k,fA=wt,dA=No;function hA(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=sA.popResultSelector(e),n=uA.argsArgArrayOrObject(e),i=n.args,o=n.keys,a=new aA.Observable(function(c){var s=i.length;if(!s){c.complete();return}for(var u=new Array(s),l=s,h=s,_=function(m){var E=!1;cA.innerFrom(i[m]).subscribe(lA.createOperatorSubscriber(c,function(w){E||(E=!0,h--),u[m]=w},function(){return l--},void 0,function(){(!l||!E)&&(h||c.next(o?dA.createObject(o,u):u),c.complete())}))},y=0;y<s;y++)_(y)});return t?a.pipe(fA.mapOneOrManyArgs(t)):a}Kc.forkJoin=hA;var Zc={},vA=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(Zc,"__esModule",{value:!0});Zc.fromEvent=void 0;var _A=F,pA=se,yA=it,bA=Gn,Hr=ae,mA=wt,gA=["addListener","removeListener"],OA=["addEventListener","removeEventListener"],EA=["on","off"];function od(e,r,t,n){if(Hr.isFunction(t)&&(n=t,t=void 0),n)return od(e,r,t).pipe(mA.mapOneOrManyArgs(n));var i=vA(SA(e)?OA.map(function(c){return function(s){return e[c](r,s,t)}}):wA(e)?gA.map(Fv(e,r)):TA(e)?EA.map(Fv(e,r)):[],2),o=i[0],a=i[1];if(!o&&bA.isArrayLike(e))return yA.mergeMap(function(c){return od(c,r,t)})(_A.innerFrom(e));if(!o)throw new TypeError("Invalid event target");return new pA.Observable(function(c){var s=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return c.next(1<u.length?u:u[0])};return o(s),function(){return a(s)}})}Zc.fromEvent=od;function Fv(e,r){return function(t){return function(n){return e[t](r,n)}}}function wA(e){return Hr.isFunction(e.addListener)&&Hr.isFunction(e.removeListener)}function TA(e){return Hr.isFunction(e.on)&&Hr.isFunction(e.off)}function SA(e){return Hr.isFunction(e.addEventListener)&&Hr.isFunction(e.removeEventListener)}var Qc={};Object.defineProperty(Qc,"__esModule",{value:!0});Qc.fromEventPattern=void 0;var PA=se,CA=ae,IA=wt;function Ib(e,r,t){return t?Ib(e,r).pipe(IA.mapOneOrManyArgs(t)):new PA.Observable(function(n){var i=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return n.next(a.length===1?a[0]:a)},o=e(i);return CA.isFunction(r)?function(){return r(i,o)}:void 0})}Qc.fromEventPattern=Ib;var Xc={},RA=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Xc,"__esModule",{value:!0});Xc.generate=void 0;var Bv=je,AA=tn,jA=on,MA=So;function NA(e,r,t,n,i){var o,a,c,s;arguments.length===1?(o=e,s=o.initialState,r=o.condition,t=o.iterate,a=o.resultSelector,c=a===void 0?Bv.identity:a,i=o.scheduler):(s=e,!n||AA.isScheduler(n)?(c=Bv.identity,i=n):c=n);function u(){var l;return RA(this,function(h){switch(h.label){case 0:l=s,h.label=1;case 1:return!r||r(l)?[4,c(l)]:[3,4];case 2:h.sent(),h.label=3;case 3:return l=t(l),[3,1];case 4:return[2]}})}return jA.defer(i?function(){return MA.scheduleIterable(u(),i)}:u)}Xc.generate=NA;var Jc={};Object.defineProperty(Jc,"__esModule",{value:!0});Jc.iif=void 0;var $A=on;function kA(e,r,t){return $A.defer(function(){return e()?r:t})}Jc.iif=kA;var $o={},Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.timer=void 0;var DA=se,LA=Ke,UA=tn,FA=Kn;function BA(e,r,t){e===void 0&&(e=0),t===void 0&&(t=LA.async);var n=-1;return r!=null&&(UA.isScheduler(r)?t=r:n=r),new DA.Observable(function(i){var o=FA.isValidDate(e)?+e-t.now():e;o<0&&(o=0);var a=0;return t.schedule(function(){i.closed||(i.next(a++),0<=n?this.schedule(void 0,n):i.complete())},o)})}Tt.timer=BA;Object.defineProperty($o,"__esModule",{value:!0});$o.interval=void 0;var WA=Ke,xA=Tt;function VA(e,r){return e===void 0&&(e=0),r===void 0&&(r=WA.asyncScheduler),e<0&&(e=0),xA.timer(e,e,r)}$o.interval=VA;var es={};Object.defineProperty(es,"__esModule",{value:!0});es.merge=void 0;var qA=dr,HA=F,zA=ft,Wv=Ce,GA=ht;function YA(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Wv.popScheduler(e),n=Wv.popNumber(e,1/0),i=e;return i.length?i.length===1?HA.innerFrom(i[0]):qA.mergeAll(n)(GA.from(i,t)):zA.EMPTY}es.merge=YA;var ad={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.never=e.NEVER=void 0;var r=se,t=Ae;e.NEVER=new r.Observable(t.noop);function n(){return e.NEVER}e.never=n})(ad);var ko={},St={};Object.defineProperty(St,"__esModule",{value:!0});St.argsOrArgArray=void 0;var KA=Array.isArray;function ZA(e){return e.length===1&&KA(e[0])?e[0]:e}St.argsOrArgArray=ZA;Object.defineProperty(ko,"__esModule",{value:!0});ko.onErrorResumeNext=void 0;var QA=se,XA=St,JA=k,xv=Ae,ej=F;function tj(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=XA.argsOrArgArray(e);return new QA.Observable(function(n){var i=0,o=function(){if(i<t.length){var a=void 0;try{a=ej.innerFrom(t[i++])}catch{o();return}var c=new JA.OperatorSubscriber(n,void 0,xv.noop,xv.noop);a.subscribe(c),c.add(o)}else n.complete()};o()})}ko.onErrorResumeNext=tj;var ts={};Object.defineProperty(ts,"__esModule",{value:!0});ts.pairs=void 0;var rj=ht;function nj(e,r){return rj.from(Object.entries(e),r)}ts.pairs=nj;var rs={},Do={};Object.defineProperty(Do,"__esModule",{value:!0});Do.not=void 0;function ij(e,r){return function(t,n){return!e.call(r,t,n)}}Do.not=ij;var pt={};Object.defineProperty(pt,"__esModule",{value:!0});pt.filter=void 0;var oj=$,aj=k;function uj(e,r){return oj.operate(function(t,n){var i=0;t.subscribe(aj.createOperatorSubscriber(n,function(o){return e.call(r,o,i++)&&n.next(o)}))})}pt.filter=uj;Object.defineProperty(rs,"__esModule",{value:!0});rs.partition=void 0;var cj=Do,Vv=pt,qv=F;function sj(e,r,t){return[Vv.filter(r,t)(qv.innerFrom(e)),Vv.filter(cj.not(r,t))(qv.innerFrom(e))]}rs.partition=sj;var zr={};Object.defineProperty(zr,"__esModule",{value:!0});zr.raceInit=zr.race=void 0;var lj=se,Rb=F,fj=St,dj=k;function hj(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e=fj.argsOrArgArray(e),e.length===1?Rb.innerFrom(e[0]):new lj.Observable(Ab(e))}zr.race=hj;function Ab(e){return function(r){for(var t=[],n=function(o){t.push(Rb.innerFrom(e[o]).subscribe(dj.createOperatorSubscriber(r,function(a){if(t){for(var c=0;c<t.length;c++)c!==o&&t[c].unsubscribe();t=null}r.next(a)})))},i=0;t&&!r.closed&&i<e.length;i++)n(i)}}zr.raceInit=Ab;var ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.range=void 0;var vj=se,_j=ft;function pj(e,r,t){if(r==null&&(r=e,e=0),r<=0)return _j.EMPTY;var n=r+e;return new vj.Observable(t?function(i){var o=e;return t.schedule(function(){o<n?(i.next(o++),this.schedule()):i.complete()})}:function(i){for(var o=e;o<n&&!i.closed;)i.next(o++);i.complete()})}ns.range=pj;var is={};Object.defineProperty(is,"__esModule",{value:!0});is.using=void 0;var yj=se,bj=F,mj=ft;function gj(e,r){return new yj.Observable(function(t){var n=e(),i=r(n),o=i?bj.innerFrom(i):mj.EMPTY;return o.subscribe(t),function(){n&&n.unsubscribe()}})}is.using=gj;var Qn={},Oj=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Ej=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(Qn,"__esModule",{value:!0});Qn.zip=void 0;var wj=se,Tj=F,Sj=St,Pj=ft,Cj=k,Ij=Ce;function Rj(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Ij.popResultSelector(e),n=Sj.argsOrArgArray(e);return n.length?new wj.Observable(function(i){var o=n.map(function(){return[]}),a=n.map(function(){return!1});i.add(function(){o=a=null});for(var c=function(u){Tj.innerFrom(n[u]).subscribe(Cj.createOperatorSubscriber(i,function(l){if(o[u].push(l),o.every(function(_){return _.length})){var h=o.map(function(_){return _.shift()});i.next(t?t.apply(void 0,Ej([],Oj(h))):h),o.some(function(_,y){return!_.length&&a[y]})&&i.complete()}},function(){a[u]=!0,!o[u].length&&i.complete()}))},s=0;!i.closed&&s<n.length;s++)c(s);return function(){o=a=null}}):Pj.EMPTY}Qn.zip=Rj;var jb={};Object.defineProperty(jb,"__esModule",{value:!0});var Xn={};Object.defineProperty(Xn,"__esModule",{value:!0});Xn.audit=void 0;var Aj=$,jj=F,Hv=k;function Mj(e){return Aj.operate(function(r,t){var n=!1,i=null,o=null,a=!1,c=function(){if(o==null||o.unsubscribe(),o=null,n){n=!1;var u=i;i=null,t.next(u)}a&&t.complete()},s=function(){o=null,a&&t.complete()};r.subscribe(Hv.createOperatorSubscriber(t,function(u){n=!0,i=u,o||jj.innerFrom(e(u)).subscribe(o=Hv.createOperatorSubscriber(t,c,s))},function(){a=!0,(!n||!o||o.closed)&&t.complete()}))})}Xn.audit=Mj;var Lo={};Object.defineProperty(Lo,"__esModule",{value:!0});Lo.auditTime=void 0;var Nj=Ke,$j=Xn,kj=Tt;function Dj(e,r){return r===void 0&&(r=Nj.asyncScheduler),$j.audit(function(){return kj.timer(e,r)})}Lo.auditTime=Dj;var Uo={};Object.defineProperty(Uo,"__esModule",{value:!0});Uo.buffer=void 0;var Lj=$,Uj=Ae,zv=k,Fj=F;function Bj(e){return Lj.operate(function(r,t){var n=[];return r.subscribe(zv.createOperatorSubscriber(t,function(i){return n.push(i)},function(){t.next(n),t.complete()})),Fj.innerFrom(e).subscribe(zv.createOperatorSubscriber(t,function(){var i=n;n=[],t.next(i)},Uj.noop)),function(){n=null}})}Uo.buffer=Bj;var Fo={},pf=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Fo,"__esModule",{value:!0});Fo.bufferCount=void 0;var Wj=$,xj=k,Vj=dt;function qj(e,r){return r===void 0&&(r=null),r=r??e,Wj.operate(function(t,n){var i=[],o=0;t.subscribe(xj.createOperatorSubscriber(n,function(a){var c,s,u,l,h=null;o++%r===0&&i.push([]);try{for(var _=pf(i),y=_.next();!y.done;y=_.next()){var m=y.value;m.push(a),e<=m.length&&(h=h??[],h.push(m))}}catch(S){c={error:S}}finally{try{y&&!y.done&&(s=_.return)&&s.call(_)}finally{if(c)throw c.error}}if(h)try{for(var E=pf(h),w=E.next();!w.done;w=E.next()){var m=w.value;Vj.arrRemove(i,m),n.next(m)}}catch(S){u={error:S}}finally{try{w&&!w.done&&(l=E.return)&&l.call(E)}finally{if(u)throw u.error}}},function(){var a,c;try{for(var s=pf(i),u=s.next();!u.done;u=s.next()){var l=u.value;n.next(l)}}catch(h){a={error:h}}finally{try{u&&!u.done&&(c=s.return)&&c.call(s)}finally{if(a)throw a.error}}n.complete()},void 0,function(){i=null}))})}Fo.bufferCount=qj;var Bo={},Hj=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Bo,"__esModule",{value:!0});Bo.bufferTime=void 0;var zj=Re,Gj=$,Yj=k,Kj=dt,Zj=Ke,Qj=Ce,Gv=vt;function Xj(e){for(var r,t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=(r=Qj.popScheduler(n))!==null&&r!==void 0?r:Zj.asyncScheduler,a=(t=n[0])!==null&&t!==void 0?t:null,c=n[1]||1/0;return Gj.operate(function(s,u){var l=[],h=!1,_=function(E){var w=E.buffer,S=E.subs;S.unsubscribe(),Kj.arrRemove(l,E),u.next(w),h&&y()},y=function(){if(l){var E=new zj.Subscription;u.add(E);var w=[],S={buffer:w,subs:E};l.push(S),Gv.executeSchedule(E,o,function(){return _(S)},e)}};a!==null&&a>=0?Gv.executeSchedule(u,o,y,a,!0):h=!0,y();var m=Yj.createOperatorSubscriber(u,function(E){var w,S,A=l.slice();try{for(var R=Hj(A),I=R.next();!I.done;I=R.next()){var j=I.value,M=j.buffer;M.push(E),c<=M.length&&_(j)}}catch(G){w={error:G}}finally{try{I&&!I.done&&(S=R.return)&&S.call(R)}finally{if(w)throw w.error}}},function(){for(;l!=null&&l.length;)u.next(l.shift().buffer);m==null||m.unsubscribe(),u.complete(),u.unsubscribe()},void 0,function(){return l=null});s.subscribe(m)})}Bo.bufferTime=Xj;var Wo={},Jj=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Wo,"__esModule",{value:!0});Wo.bufferToggle=void 0;var eM=Re,tM=$,Yv=F,yf=k,Kv=Ae,rM=dt;function nM(e,r){return tM.operate(function(t,n){var i=[];Yv.innerFrom(e).subscribe(yf.createOperatorSubscriber(n,function(o){var a=[];i.push(a);var c=new eM.Subscription,s=function(){rM.arrRemove(i,a),n.next(a),c.unsubscribe()};c.add(Yv.innerFrom(r(o)).subscribe(yf.createOperatorSubscriber(n,s,Kv.noop)))},Kv.noop)),t.subscribe(yf.createOperatorSubscriber(n,function(o){var a,c;try{for(var s=Jj(i),u=s.next();!u.done;u=s.next()){var l=u.value;l.push(o)}}catch(h){a={error:h}}finally{try{u&&!u.done&&(c=s.return)&&c.call(s)}finally{if(a)throw a.error}}},function(){for(;i.length>0;)n.next(i.shift());n.complete()}))})}Wo.bufferToggle=nM;var xo={};Object.defineProperty(xo,"__esModule",{value:!0});xo.bufferWhen=void 0;var iM=$,oM=Ae,Zv=k,aM=F;function uM(e){return iM.operate(function(r,t){var n=null,i=null,o=function(){i==null||i.unsubscribe();var a=n;n=[],a&&t.next(a),aM.innerFrom(e()).subscribe(i=Zv.createOperatorSubscriber(t,o,oM.noop))};o(),r.subscribe(Zv.createOperatorSubscriber(t,function(a){return n==null?void 0:n.push(a)},function(){n&&t.next(n),t.complete()},void 0,function(){return n=i=null}))})}xo.bufferWhen=uM;var Vo={};Object.defineProperty(Vo,"__esModule",{value:!0});Vo.catchError=void 0;var cM=F,sM=k,lM=$;function Mb(e){return lM.operate(function(r,t){var n=null,i=!1,o;n=r.subscribe(sM.createOperatorSubscriber(t,void 0,void 0,function(a){o=cM.innerFrom(e(a,Mb(e)(r))),n?(n.unsubscribe(),n=null,o.subscribe(t)):i=!0})),i&&(n.unsubscribe(),n=null,o.subscribe(t))})}Vo.catchError=Mb;var qo={},Jn={},Ho={},ei={},Lt={},zo={};Object.defineProperty(zo,"__esModule",{value:!0});zo.scanInternals=void 0;var fM=k;function dM(e,r,t,n,i){return function(o,a){var c=t,s=r,u=0;o.subscribe(fM.createOperatorSubscriber(a,function(l){var h=u++;s=c?e(s,l,h):(c=!0,l),n&&a.next(s)},i&&function(){c&&a.next(s),a.complete()}))}}zo.scanInternals=dM;Object.defineProperty(Lt,"__esModule",{value:!0});Lt.reduce=void 0;var hM=zo,vM=$;function _M(e,r){return vM.operate(hM.scanInternals(e,r,arguments.length>=2,!1,!0))}Lt.reduce=_M;Object.defineProperty(ei,"__esModule",{value:!0});ei.toArray=void 0;var pM=Lt,yM=$,bM=function(e,r){return e.push(r),e};function mM(){return yM.operate(function(e,r){pM.reduce(bM,[])(e).subscribe(r)})}ei.toArray=mM;Object.defineProperty(Ho,"__esModule",{value:!0});Ho.joinAllInternals=void 0;var gM=je,OM=wt,EM=kt,wM=it,TM=ei;function SM(e,r){return EM.pipe(TM.toArray(),wM.mergeMap(function(t){return e(t)}),r?OM.mapOneOrManyArgs(r):gM.identity)}Ho.joinAllInternals=SM;Object.defineProperty(Jn,"__esModule",{value:!0});Jn.combineLatestAll=void 0;var PM=er,CM=Ho;function IM(e){return CM.joinAllInternals(PM.combineLatest,e)}Jn.combineLatestAll=IM;Object.defineProperty(qo,"__esModule",{value:!0});qo.combineAll=void 0;var RM=Jn;qo.combineAll=RM.combineLatestAll;var Go={},Yo={},Qv=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Xv=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(Yo,"__esModule",{value:!0});Yo.combineLatest=void 0;var AM=er,jM=$,MM=St,NM=wt,$M=kt,kM=Ce;function Nb(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=kM.popResultSelector(e);return t?$M.pipe(Nb.apply(void 0,Xv([],Qv(e))),NM.mapOneOrManyArgs(t)):jM.operate(function(n,i){AM.combineLatestInit(Xv([n],Qv(MM.argsOrArgArray(e))))(i)})}Yo.combineLatest=Nb;var DM=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},LM=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(Go,"__esModule",{value:!0});Go.combineLatestWith=void 0;var UM=Yo;function FM(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return UM.combineLatest.apply(void 0,LM([],DM(e)))}Go.combineLatestWith=FM;var ti={};Object.defineProperty(ti,"__esModule",{value:!0});ti.concatMap=void 0;var Jv=it,BM=ae;function WM(e,r){return BM.isFunction(r)?Jv.mergeMap(e,r,1):Jv.mergeMap(e,1)}ti.concatMap=WM;var Ko={};Object.defineProperty(Ko,"__esModule",{value:!0});Ko.concatMapTo=void 0;var e_=ti,xM=ae;function VM(e,r){return xM.isFunction(r)?e_.concatMap(function(){return e},r):e_.concatMap(function(){return e})}Ko.concatMapTo=VM;var Zo={},Qo={},qM=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},HM=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(Qo,"__esModule",{value:!0});Qo.concat=void 0;var zM=$,GM=nn,YM=Ce,KM=ht;function ZM(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=YM.popScheduler(e);return zM.operate(function(n,i){GM.concatAll()(KM.from(HM([n],qM(e)),t)).subscribe(i)})}Qo.concat=ZM;var QM=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},XM=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(Zo,"__esModule",{value:!0});Zo.concatWith=void 0;var JM=Qo;function eN(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return JM.concat.apply(void 0,XM([],QM(e)))}Zo.concatWith=eN;var an={},os={};Object.defineProperty(os,"__esModule",{value:!0});os.fromSubscribable=void 0;var tN=se;function rN(e){return new tN.Observable(function(r){return e.subscribe(r)})}os.fromSubscribable=rN;Object.defineProperty(an,"__esModule",{value:!0});an.connect=void 0;var nN=we,iN=F,oN=$,aN=os,uN={connector:function(){return new nN.Subject}};function cN(e,r){r===void 0&&(r=uN);var t=r.connector;return oN.operate(function(n,i){var o=t();iN.innerFrom(e(aN.fromSubscribable(o))).subscribe(i),i.add(n.subscribe(o))})}an.connect=cN;var Xo={};Object.defineProperty(Xo,"__esModule",{value:!0});Xo.count=void 0;var sN=Lt;function lN(e){return sN.reduce(function(r,t,n){return!e||e(t,n)?r+1:r},0)}Xo.count=lN;var Jo={};Object.defineProperty(Jo,"__esModule",{value:!0});Jo.debounce=void 0;var fN=$,dN=Ae,t_=k,hN=F;function vN(e){return fN.operate(function(r,t){var n=!1,i=null,o=null,a=function(){if(o==null||o.unsubscribe(),o=null,n){n=!1;var c=i;i=null,t.next(c)}};r.subscribe(t_.createOperatorSubscriber(t,function(c){o==null||o.unsubscribe(),n=!0,i=c,o=t_.createOperatorSubscriber(t,a,dN.noop),hN.innerFrom(e(c)).subscribe(o)},function(){a(),t.complete()},void 0,function(){i=o=null}))})}Jo.debounce=vN;var ea={};Object.defineProperty(ea,"__esModule",{value:!0});ea.debounceTime=void 0;var _N=Ke,pN=$,yN=k;function bN(e,r){return r===void 0&&(r=_N.asyncScheduler),pN.operate(function(t,n){var i=null,o=null,a=null,c=function(){if(i){i.unsubscribe(),i=null;var u=o;o=null,n.next(u)}};function s(){var u=a+e,l=r.now();if(l<u){i=this.schedule(void 0,u-l),n.add(i);return}c()}t.subscribe(yN.createOperatorSubscriber(n,function(u){o=u,a=r.now(),i||(i=r.schedule(s,e),n.add(i))},function(){c(),n.complete()},void 0,function(){o=i=null}))})}ea.debounceTime=bN;var hr={};Object.defineProperty(hr,"__esModule",{value:!0});hr.defaultIfEmpty=void 0;var mN=$,gN=k;function ON(e){return mN.operate(function(r,t){var n=!1;r.subscribe(gN.createOperatorSubscriber(t,function(i){n=!0,t.next(i)},function(){n||t.next(e),t.complete()}))})}hr.defaultIfEmpty=ON;var ta={},ri={},vr={};Object.defineProperty(vr,"__esModule",{value:!0});vr.take=void 0;var EN=ft,wN=$,TN=k;function SN(e){return e<=0?function(){return EN.EMPTY}:wN.operate(function(r,t){var n=0;r.subscribe(TN.createOperatorSubscriber(t,function(i){++n<=e&&(t.next(i),e<=n&&t.complete())}))})}vr.take=SN;var ni={};Object.defineProperty(ni,"__esModule",{value:!0});ni.ignoreElements=void 0;var PN=$,CN=k,IN=Ae;function RN(){return PN.operate(function(e,r){e.subscribe(CN.createOperatorSubscriber(r,IN.noop))})}ni.ignoreElements=RN;var ii={};Object.defineProperty(ii,"__esModule",{value:!0});ii.mapTo=void 0;var AN=_t;function jN(e){return AN.map(function(){return e})}ii.mapTo=jN;Object.defineProperty(ri,"__esModule",{value:!0});ri.delayWhen=void 0;var MN=rn,r_=vr,NN=ni,$N=ii,kN=it,DN=F;function $b(e,r){return r?function(t){return MN.concat(r.pipe(r_.take(1),NN.ignoreElements()),t.pipe($b(e)))}:kN.mergeMap(function(t,n){return DN.innerFrom(e(t,n)).pipe(r_.take(1),$N.mapTo(t))})}ri.delayWhen=$b;Object.defineProperty(ta,"__esModule",{value:!0});ta.delay=void 0;var LN=Ke,UN=ri,FN=Tt;function BN(e,r){r===void 0&&(r=LN.asyncScheduler);var t=FN.timer(e,r);return UN.delayWhen(function(){return t})}ta.delay=BN;var ra={};Object.defineProperty(ra,"__esModule",{value:!0});ra.dematerialize=void 0;var WN=Uc,xN=$,VN=k;function qN(){return xN.operate(function(e,r){e.subscribe(VN.createOperatorSubscriber(r,function(t){return WN.observeNotification(t,r)}))})}ra.dematerialize=qN;var na={};Object.defineProperty(na,"__esModule",{value:!0});na.distinct=void 0;var HN=$,n_=k,zN=Ae,GN=F;function YN(e,r){return HN.operate(function(t,n){var i=new Set;t.subscribe(n_.createOperatorSubscriber(n,function(o){var a=e?e(o):o;i.has(a)||(i.add(a),n.next(o))})),r&&GN.innerFrom(r).subscribe(n_.createOperatorSubscriber(n,function(){return i.clear()},zN.noop))})}na.distinct=YN;var oi={};Object.defineProperty(oi,"__esModule",{value:!0});oi.distinctUntilChanged=void 0;var KN=je,ZN=$,QN=k;function XN(e,r){return r===void 0&&(r=KN.identity),e=e??JN,ZN.operate(function(t,n){var i,o=!0;t.subscribe(QN.createOperatorSubscriber(n,function(a){var c=r(a);(o||!e(i,c))&&(o=!1,i=c,n.next(a))}))})}oi.distinctUntilChanged=XN;function JN(e,r){return e===r}var ia={};Object.defineProperty(ia,"__esModule",{value:!0});ia.distinctUntilKeyChanged=void 0;var e$=oi;function t$(e,r){return e$.distinctUntilChanged(function(t,n){return r?r(t[e],n[e]):t[e]===n[e]})}ia.distinctUntilKeyChanged=t$;var oa={},_r={};Object.defineProperty(_r,"__esModule",{value:!0});_r.throwIfEmpty=void 0;var r$=Et,n$=$,i$=k;function o$(e){return e===void 0&&(e=a$),n$.operate(function(r,t){var n=!1;r.subscribe(i$.createOperatorSubscriber(t,function(i){n=!0,t.next(i)},function(){return n?t.complete():t.error(e())}))})}_r.throwIfEmpty=o$;function a$(){return new r$.EmptyError}Object.defineProperty(oa,"__esModule",{value:!0});oa.elementAt=void 0;var i_=Io,u$=pt,c$=_r,s$=hr,l$=vr;function f$(e,r){if(e<0)throw new i_.ArgumentOutOfRangeError;var t=arguments.length>=2;return function(n){return n.pipe(u$.filter(function(i,o){return o===e}),l$.take(1),t?s$.defaultIfEmpty(r):c$.throwIfEmpty(function(){return new i_.ArgumentOutOfRangeError}))}}oa.elementAt=f$;var aa={},d$=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},h$=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(aa,"__esModule",{value:!0});aa.endWith=void 0;var v$=rn,_$=zn;function p$(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return function(t){return v$.concat(t,_$.of.apply(void 0,h$([],d$(e))))}}aa.endWith=p$;var ua={};Object.defineProperty(ua,"__esModule",{value:!0});ua.every=void 0;var y$=$,b$=k;function m$(e,r){return y$.operate(function(t,n){var i=0;t.subscribe(b$.createOperatorSubscriber(n,function(o){e.call(r,o,i++,t)||(n.next(!1),n.complete())},function(){n.next(!0),n.complete()}))})}ua.every=m$;var ca={},ai={},ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.exhaustMap=void 0;var g$=_t,o_=F,O$=$,a_=k;function kb(e,r){return r?function(t){return t.pipe(kb(function(n,i){return o_.innerFrom(e(n,i)).pipe(g$.map(function(o,a){return r(n,o,i,a)}))}))}:O$.operate(function(t,n){var i=0,o=null,a=!1;t.subscribe(a_.createOperatorSubscriber(n,function(c){o||(o=a_.createOperatorSubscriber(n,void 0,function(){o=null,a&&n.complete()}),o_.innerFrom(e(c,i++)).subscribe(o))},function(){a=!0,!o&&n.complete()}))})}ui.exhaustMap=kb;Object.defineProperty(ai,"__esModule",{value:!0});ai.exhaustAll=void 0;var E$=ui,w$=je;function T$(){return E$.exhaustMap(w$.identity)}ai.exhaustAll=T$;Object.defineProperty(ca,"__esModule",{value:!0});ca.exhaust=void 0;var S$=ai;ca.exhaust=S$.exhaustAll;var sa={};Object.defineProperty(sa,"__esModule",{value:!0});sa.expand=void 0;var P$=$,C$=Zn;function I$(e,r,t){return r===void 0&&(r=1/0),r=(r||0)<1?1/0:r,P$.operate(function(n,i){return C$.mergeInternals(n,i,e,r,void 0,!0,t)})}sa.expand=I$;var la={};Object.defineProperty(la,"__esModule",{value:!0});la.finalize=void 0;var R$=$;function A$(e){return R$.operate(function(r,t){try{r.subscribe(t)}finally{t.add(e)}})}la.finalize=A$;var tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.createFind=tr.find=void 0;var j$=$,M$=k;function N$(e,r){return j$.operate(Db(e,r,"value"))}tr.find=N$;function Db(e,r,t){var n=t==="index";return function(i,o){var a=0;i.subscribe(M$.createOperatorSubscriber(o,function(c){var s=a++;e.call(r,c,s,i)&&(o.next(n?s:c),o.complete())},function(){o.next(n?-1:void 0),o.complete()}))}}tr.createFind=Db;var fa={};Object.defineProperty(fa,"__esModule",{value:!0});fa.findIndex=void 0;var $$=$,k$=tr;function D$(e,r){return $$.operate(k$.createFind(e,r,"index"))}fa.findIndex=D$;var da={};Object.defineProperty(da,"__esModule",{value:!0});da.first=void 0;var L$=Et,U$=pt,F$=vr,B$=hr,W$=_r,x$=je;function V$(e,r){var t=arguments.length>=2;return function(n){return n.pipe(e?U$.filter(function(i,o){return e(i,o,n)}):x$.identity,F$.take(1),t?B$.defaultIfEmpty(r):W$.throwIfEmpty(function(){return new L$.EmptyError}))}}da.first=V$;var ha={};Object.defineProperty(ha,"__esModule",{value:!0});ha.groupBy=void 0;var q$=se,H$=F,z$=we,G$=$,u_=k;function Y$(e,r,t,n){return G$.operate(function(i,o){var a;!r||typeof r=="function"?a=r:(t=r.duration,a=r.element,n=r.connector);var c=new Map,s=function(m){c.forEach(m),m(o)},u=function(m){return s(function(E){return E.error(m)})},l=0,h=!1,_=new u_.OperatorSubscriber(o,function(m){try{var E=e(m),w=c.get(E);if(!w){c.set(E,w=n?n():new z$.Subject);var S=y(E,w);if(o.next(S),t){var A=u_.createOperatorSubscriber(w,function(){w.complete(),A==null||A.unsubscribe()},void 0,void 0,function(){return c.delete(E)});_.add(H$.innerFrom(t(S)).subscribe(A))}}w.next(a?a(m):m)}catch(R){u(R)}},function(){return s(function(m){return m.complete()})},u,function(){return c.clear()},function(){return h=!0,l===0});i.subscribe(_);function y(m,E){var w=new q$.Observable(function(S){l++;var A=E.subscribe(S);return function(){A.unsubscribe(),--l===0&&h&&_.unsubscribe()}});return w.key=m,w}})}ha.groupBy=Y$;var va={};Object.defineProperty(va,"__esModule",{value:!0});va.isEmpty=void 0;var K$=$,Z$=k;function Q$(){return K$.operate(function(e,r){e.subscribe(Z$.createOperatorSubscriber(r,function(){r.next(!1),r.complete()},function(){r.next(!0),r.complete()}))})}va.isEmpty=Q$;var _a={},ci={},X$=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ci,"__esModule",{value:!0});ci.takeLast=void 0;var J$=ft,ek=$,tk=k;function rk(e){return e<=0?function(){return J$.EMPTY}:ek.operate(function(r,t){var n=[];r.subscribe(tk.createOperatorSubscriber(t,function(i){n.push(i),e<n.length&&n.shift()},function(){var i,o;try{for(var a=X$(n),c=a.next();!c.done;c=a.next()){var s=c.value;t.next(s)}}catch(u){i={error:u}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}t.complete()},void 0,function(){n=null}))})}ci.takeLast=rk;Object.defineProperty(_a,"__esModule",{value:!0});_a.last=void 0;var nk=Et,ik=pt,ok=ci,ak=_r,uk=hr,ck=je;function sk(e,r){var t=arguments.length>=2;return function(n){return n.pipe(e?ik.filter(function(i,o){return e(i,o,n)}):ck.identity,ok.takeLast(1),t?uk.defaultIfEmpty(r):ak.throwIfEmpty(function(){return new nk.EmptyError}))}}_a.last=sk;var pa={};Object.defineProperty(pa,"__esModule",{value:!0});pa.materialize=void 0;var bf=Uc,lk=$,fk=k;function dk(){return lk.operate(function(e,r){e.subscribe(fk.createOperatorSubscriber(r,function(t){r.next(bf.Notification.createNext(t))},function(){r.next(bf.Notification.createComplete()),r.complete()},function(t){r.next(bf.Notification.createError(t)),r.complete()}))})}pa.materialize=dk;var ya={};Object.defineProperty(ya,"__esModule",{value:!0});ya.max=void 0;var hk=Lt,vk=ae;function _k(e){return hk.reduce(vk.isFunction(e)?function(r,t){return e(r,t)>0?r:t}:function(r,t){return r>t?r:t})}ya.max=_k;var ba={};Object.defineProperty(ba,"__esModule",{value:!0});ba.flatMap=void 0;var pk=it;ba.flatMap=pk.mergeMap;var ma={};Object.defineProperty(ma,"__esModule",{value:!0});ma.mergeMapTo=void 0;var c_=it,yk=ae;function bk(e,r,t){return t===void 0&&(t=1/0),yk.isFunction(r)?c_.mergeMap(function(){return e},r,t):(typeof r=="number"&&(t=r),c_.mergeMap(function(){return e},t))}ma.mergeMapTo=bk;var ga={};Object.defineProperty(ga,"__esModule",{value:!0});ga.mergeScan=void 0;var mk=$,gk=Zn;function Ok(e,r,t){return t===void 0&&(t=1/0),mk.operate(function(n,i){var o=r;return gk.mergeInternals(n,i,function(a,c){return e(o,a,c)},t,function(a){o=a},!1,void 0,function(){return o=null})})}ga.mergeScan=Ok;var Oa={},Ea={},Ek=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},wk=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(Ea,"__esModule",{value:!0});Ea.merge=void 0;var Tk=$,Sk=St,Pk=dr,s_=Ce,Ck=ht;function Ik(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=s_.popScheduler(e),n=s_.popNumber(e,1/0);return e=Sk.argsOrArgArray(e),Tk.operate(function(i,o){Pk.mergeAll(n)(Ck.from(wk([i],Ek(e)),t)).subscribe(o)})}Ea.merge=Ik;var Rk=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Ak=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(Oa,"__esModule",{value:!0});Oa.mergeWith=void 0;var jk=Ea;function Mk(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return jk.merge.apply(void 0,Ak([],Rk(e)))}Oa.mergeWith=Mk;var wa={};Object.defineProperty(wa,"__esModule",{value:!0});wa.min=void 0;var Nk=Lt,$k=ae;function kk(e){return Nk.reduce($k.isFunction(e)?function(r,t){return e(r,t)<0?r:t}:function(r,t){return r<t?r:t})}wa.min=kk;var un={};Object.defineProperty(un,"__esModule",{value:!0});un.multicast=void 0;var Dk=en,l_=ae,Lk=an;function Uk(e,r){var t=l_.isFunction(e)?e:function(){return e};return l_.isFunction(r)?Lk.connect(r,{connector:t}):function(n){return new Dk.ConnectableObservable(n,t)}}un.multicast=Uk;var Gr={},Fk=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Bk=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.onErrorResumeNext=Gr.onErrorResumeNextWith=void 0;var Wk=St,xk=ko;function Lb(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Wk.argsOrArgArray(e);return function(n){return xk.onErrorResumeNext.apply(void 0,Bk([n],Fk(t)))}}Gr.onErrorResumeNextWith=Lb;Gr.onErrorResumeNext=Lb;var Ta={};Object.defineProperty(Ta,"__esModule",{value:!0});Ta.pairwise=void 0;var Vk=$,qk=k;function Hk(){return Vk.operate(function(e,r){var t,n=!1;e.subscribe(qk.createOperatorSubscriber(r,function(i){var o=t;t=i,n&&r.next([o,i]),n=!0}))})}Ta.pairwise=Hk;var Sa={};Object.defineProperty(Sa,"__esModule",{value:!0});Sa.pluck=void 0;var zk=_t;function Gk(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=e.length;if(t===0)throw new Error("list of properties cannot be empty.");return zk.map(function(n){for(var i=n,o=0;o<t;o++){var a=i==null?void 0:i[e[o]];if(typeof a<"u")i=a;else return}return i})}Sa.pluck=Gk;var Pa={};Object.defineProperty(Pa,"__esModule",{value:!0});Pa.publish=void 0;var Yk=we,Kk=un,Zk=an;function Qk(e){return e?function(r){return Zk.connect(e)(r)}:function(r){return Kk.multicast(new Yk.Subject)(r)}}Pa.publish=Qk;var Ca={};Object.defineProperty(Ca,"__esModule",{value:!0});Ca.publishBehavior=void 0;var Xk=yo,Jk=en;function eD(e){return function(r){var t=new Xk.BehaviorSubject(e);return new Jk.ConnectableObservable(r,function(){return t})}}Ca.publishBehavior=eD;var Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});Ia.publishLast=void 0;var tD=Hn,rD=en;function nD(){return function(e){var r=new tD.AsyncSubject;return new rD.ConnectableObservable(e,function(){return r})}}Ia.publishLast=nD;var Ra={};Object.defineProperty(Ra,"__esModule",{value:!0});Ra.publishReplay=void 0;var iD=qn,oD=un,f_=ae;function aD(e,r,t,n){t&&!f_.isFunction(t)&&(n=t);var i=f_.isFunction(t)?t:void 0;return function(o){return oD.multicast(new iD.ReplaySubject(e,r,n),i)(o)}}Ra.publishReplay=aD;var si={},uD=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},cD=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(si,"__esModule",{value:!0});si.raceWith=void 0;var sD=zr,lD=$,fD=je;function dD(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.length?lD.operate(function(t,n){sD.raceInit(cD([t],uD(e)))(n)}):fD.identity}si.raceWith=dD;var Aa={};Object.defineProperty(Aa,"__esModule",{value:!0});Aa.repeat=void 0;var hD=ft,vD=$,d_=k,_D=F,pD=Tt;function yD(e){var r,t=1/0,n;return e!=null&&(typeof e=="object"?(r=e.count,t=r===void 0?1/0:r,n=e.delay):t=e),t<=0?function(){return hD.EMPTY}:vD.operate(function(i,o){var a=0,c,s=function(){if(c==null||c.unsubscribe(),c=null,n!=null){var l=typeof n=="number"?pD.timer(n):_D.innerFrom(n(a)),h=d_.createOperatorSubscriber(o,function(){h.unsubscribe(),u()});l.subscribe(h)}else u()},u=function(){var l=!1;c=i.subscribe(d_.createOperatorSubscriber(o,void 0,function(){++a<t?c?s():l=!0:o.complete()})),l&&s()};u()})}Aa.repeat=yD;var ja={};Object.defineProperty(ja,"__esModule",{value:!0});ja.repeatWhen=void 0;var bD=F,mD=we,gD=$,h_=k;function OD(e){return gD.operate(function(r,t){var n,i=!1,o,a=!1,c=!1,s=function(){return c&&a&&(t.complete(),!0)},u=function(){return o||(o=new mD.Subject,bD.innerFrom(e(o)).subscribe(h_.createOperatorSubscriber(t,function(){n?l():i=!0},function(){a=!0,s()}))),o},l=function(){c=!1,n=r.subscribe(h_.createOperatorSubscriber(t,void 0,function(){c=!0,!s()&&u().next()})),i&&(n.unsubscribe(),n=null,i=!1,l())};l()})}ja.repeatWhen=OD;var Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});Ma.retry=void 0;var ED=$,v_=k,wD=je,TD=Tt,SD=F;function PD(e){e===void 0&&(e=1/0);var r;e&&typeof e=="object"?r=e:r={count:e};var t=r.count,n=t===void 0?1/0:t,i=r.delay,o=r.resetOnSuccess,a=o===void 0?!1:o;return n<=0?wD.identity:ED.operate(function(c,s){var u=0,l,h=function(){var _=!1;l=c.subscribe(v_.createOperatorSubscriber(s,function(y){a&&(u=0),s.next(y)},void 0,function(y){if(u++<n){var m=function(){l?(l.unsubscribe(),l=null,h()):_=!0};if(i!=null){var E=typeof i=="number"?TD.timer(i):SD.innerFrom(i(y,u)),w=v_.createOperatorSubscriber(s,function(){w.unsubscribe(),m()},function(){s.complete()});E.subscribe(w)}else m()}else s.error(y)})),_&&(l.unsubscribe(),l=null,h())};h()})}Ma.retry=PD;var Na={};Object.defineProperty(Na,"__esModule",{value:!0});Na.retryWhen=void 0;var CD=F,ID=we,RD=$,__=k;function AD(e){return RD.operate(function(r,t){var n,i=!1,o,a=function(){n=r.subscribe(__.createOperatorSubscriber(t,void 0,void 0,function(c){o||(o=new ID.Subject,CD.innerFrom(e(o)).subscribe(__.createOperatorSubscriber(t,function(){return n?a():i=!0}))),o&&o.next(c)})),i&&(n.unsubscribe(),n=null,i=!1,a())};a()})}Na.retryWhen=AD;var li={};Object.defineProperty(li,"__esModule",{value:!0});li.sample=void 0;var jD=F,MD=$,ND=Ae,p_=k;function $D(e){return MD.operate(function(r,t){var n=!1,i=null;r.subscribe(p_.createOperatorSubscriber(t,function(o){n=!0,i=o})),jD.innerFrom(e).subscribe(p_.createOperatorSubscriber(t,function(){if(n){n=!1;var o=i;i=null,t.next(o)}},ND.noop))})}li.sample=$D;var $a={};Object.defineProperty($a,"__esModule",{value:!0});$a.sampleTime=void 0;var kD=Ke,DD=li,LD=$o;function UD(e,r){return r===void 0&&(r=kD.asyncScheduler),DD.sample(LD.interval(e,r))}$a.sampleTime=UD;var ka={};Object.defineProperty(ka,"__esModule",{value:!0});ka.scan=void 0;var FD=$,BD=zo;function WD(e,r){return FD.operate(BD.scanInternals(e,r,arguments.length>=2,!0))}ka.scan=WD;var Da={};Object.defineProperty(Da,"__esModule",{value:!0});Da.sequenceEqual=void 0;var xD=$,VD=k,qD=F;function HD(e,r){return r===void 0&&(r=function(t,n){return t===n}),xD.operate(function(t,n){var i=y_(),o=y_(),a=function(s){n.next(s),n.complete()},c=function(s,u){var l=VD.createOperatorSubscriber(n,function(h){var _=u.buffer,y=u.complete;_.length===0?y?a(!1):s.buffer.push(h):!r(h,_.shift())&&a(!1)},function(){s.complete=!0;var h=u.complete,_=u.buffer;h&&a(_.length===0),l==null||l.unsubscribe()});return l};t.subscribe(c(i,o)),qD.innerFrom(e).subscribe(c(o,i))})}Da.sequenceEqual=HD;function y_(){return{buffer:[],complete:!1}}var fi={},zD=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},GD=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(fi,"__esModule",{value:!0});fi.share=void 0;var Ub=F,YD=we,Fb=xn,KD=$;function ZD(e){e===void 0&&(e={});var r=e.connector,t=r===void 0?function(){return new YD.Subject}:r,n=e.resetOnError,i=n===void 0?!0:n,o=e.resetOnComplete,a=o===void 0?!0:o,c=e.resetOnRefCountZero,s=c===void 0?!0:c;return function(u){var l,h,_,y=0,m=!1,E=!1,w=function(){h==null||h.unsubscribe(),h=void 0},S=function(){w(),l=_=void 0,m=E=!1},A=function(){var R=l;S(),R==null||R.unsubscribe()};return KD.operate(function(R,I){y++,!E&&!m&&w();var j=_=_??t();I.add(function(){y--,y===0&&!E&&!m&&(h=mf(A,s))}),j.subscribe(I),!l&&y>0&&(l=new Fb.SafeSubscriber({next:function(M){return j.next(M)},error:function(M){E=!0,w(),h=mf(S,i,M),j.error(M)},complete:function(){m=!0,w(),h=mf(S,a),j.complete()}}),Ub.innerFrom(R).subscribe(l))})(u)}}fi.share=ZD;function mf(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];if(r===!0){e();return}if(r!==!1){var i=new Fb.SafeSubscriber({next:function(){i.unsubscribe(),e()}});return Ub.innerFrom(r.apply(void 0,GD([],zD(t)))).subscribe(i)}}var La={};Object.defineProperty(La,"__esModule",{value:!0});La.shareReplay=void 0;var QD=qn,XD=fi;function JD(e,r,t){var n,i,o,a,c=!1;return e&&typeof e=="object"?(n=e.bufferSize,a=n===void 0?1/0:n,i=e.windowTime,r=i===void 0?1/0:i,o=e.refCount,c=o===void 0?!1:o,t=e.scheduler):a=e??1/0,XD.share({connector:function(){return new QD.ReplaySubject(a,r,t)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}La.shareReplay=JD;var Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.single=void 0;var eL=Et,tL=Ao,rL=Ro,nL=$,iL=k;function oL(e){return nL.operate(function(r,t){var n=!1,i,o=!1,a=0;r.subscribe(iL.createOperatorSubscriber(t,function(c){o=!0,(!e||e(c,a++,r))&&(n&&t.error(new tL.SequenceError("Too many matching values")),n=!0,i=c)},function(){n?(t.next(i),t.complete()):t.error(o?new rL.NotFoundError("No matching values"):new eL.EmptyError)}))})}Ua.single=oL;var Fa={};Object.defineProperty(Fa,"__esModule",{value:!0});Fa.skip=void 0;var aL=pt;function uL(e){return aL.filter(function(r,t){return e<=t})}Fa.skip=uL;var Ba={};Object.defineProperty(Ba,"__esModule",{value:!0});Ba.skipLast=void 0;var cL=je,sL=$,lL=k;function fL(e){return e<=0?cL.identity:sL.operate(function(r,t){var n=new Array(e),i=0;return r.subscribe(lL.createOperatorSubscriber(t,function(o){var a=i++;if(a<e)n[a]=o;else{var c=a%e,s=n[c];n[c]=o,t.next(s)}})),function(){n=null}})}Ba.skipLast=fL;var Wa={};Object.defineProperty(Wa,"__esModule",{value:!0});Wa.skipUntil=void 0;var dL=$,b_=k,hL=F,vL=Ae;function _L(e){return dL.operate(function(r,t){var n=!1,i=b_.createOperatorSubscriber(t,function(){i==null||i.unsubscribe(),n=!0},vL.noop);hL.innerFrom(e).subscribe(i),r.subscribe(b_.createOperatorSubscriber(t,function(o){return n&&t.next(o)}))})}Wa.skipUntil=_L;var xa={};Object.defineProperty(xa,"__esModule",{value:!0});xa.skipWhile=void 0;var pL=$,yL=k;function bL(e){return pL.operate(function(r,t){var n=!1,i=0;r.subscribe(yL.createOperatorSubscriber(t,function(o){return(n||(n=!e(o,i++)))&&t.next(o)}))})}xa.skipWhile=bL;var Va={};Object.defineProperty(Va,"__esModule",{value:!0});Va.startWith=void 0;var m_=rn,mL=Ce,gL=$;function OL(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=mL.popScheduler(e);return gL.operate(function(n,i){(t?m_.concat(e,n,t):m_.concat(e,n)).subscribe(i)})}Va.startWith=OL;var qa={},pr={};Object.defineProperty(pr,"__esModule",{value:!0});pr.switchMap=void 0;var EL=F,wL=$,g_=k;function TL(e,r){return wL.operate(function(t,n){var i=null,o=0,a=!1,c=function(){return a&&!i&&n.complete()};t.subscribe(g_.createOperatorSubscriber(n,function(s){i==null||i.unsubscribe();var u=0,l=o++;EL.innerFrom(e(s,l)).subscribe(i=g_.createOperatorSubscriber(n,function(h){return n.next(r?r(s,h,l,u++):h)},function(){i=null,c()}))},function(){a=!0,c()}))})}pr.switchMap=TL;Object.defineProperty(qa,"__esModule",{value:!0});qa.switchAll=void 0;var SL=pr,PL=je;function CL(){return SL.switchMap(PL.identity)}qa.switchAll=CL;var Ha={};Object.defineProperty(Ha,"__esModule",{value:!0});Ha.switchMapTo=void 0;var O_=pr,IL=ae;function RL(e,r){return IL.isFunction(r)?O_.switchMap(function(){return e},r):O_.switchMap(function(){return e})}Ha.switchMapTo=RL;var za={};Object.defineProperty(za,"__esModule",{value:!0});za.switchScan=void 0;var AL=pr,jL=$;function ML(e,r){return jL.operate(function(t,n){var i=r;return AL.switchMap(function(o,a){return e(i,o,a)},function(o,a){return i=a,a})(t).subscribe(n),function(){i=null}})}za.switchScan=ML;var Ga={};Object.defineProperty(Ga,"__esModule",{value:!0});Ga.takeUntil=void 0;var NL=$,$L=k,kL=F,DL=Ae;function LL(e){return NL.operate(function(r,t){kL.innerFrom(e).subscribe($L.createOperatorSubscriber(t,function(){return t.complete()},DL.noop)),!t.closed&&r.subscribe(t)})}Ga.takeUntil=LL;var Ya={};Object.defineProperty(Ya,"__esModule",{value:!0});Ya.takeWhile=void 0;var UL=$,FL=k;function BL(e,r){return r===void 0&&(r=!1),UL.operate(function(t,n){var i=0;t.subscribe(FL.createOperatorSubscriber(n,function(o){var a=e(o,i++);(a||r)&&n.next(o),!a&&n.complete()}))})}Ya.takeWhile=BL;var Ka={};Object.defineProperty(Ka,"__esModule",{value:!0});Ka.tap=void 0;var WL=ae,xL=$,VL=k,qL=je;function HL(e,r,t){var n=WL.isFunction(e)||r||t?{next:e,error:r,complete:t}:e;return n?xL.operate(function(i,o){var a;(a=n.subscribe)===null||a===void 0||a.call(n);var c=!0;i.subscribe(VL.createOperatorSubscriber(o,function(s){var u;(u=n.next)===null||u===void 0||u.call(n,s),o.next(s)},function(){var s;c=!1,(s=n.complete)===null||s===void 0||s.call(n),o.complete()},function(s){var u;c=!1,(u=n.error)===null||u===void 0||u.call(n,s),o.error(s)},function(){var s,u;c&&((s=n.unsubscribe)===null||s===void 0||s.call(n)),(u=n.finalize)===null||u===void 0||u.call(n)}))}):qL.identity}Ka.tap=HL;var di={};Object.defineProperty(di,"__esModule",{value:!0});di.throttle=void 0;var zL=$,E_=k,GL=F;function YL(e,r){return zL.operate(function(t,n){var i=r??{},o=i.leading,a=o===void 0?!0:o,c=i.trailing,s=c===void 0?!1:c,u=!1,l=null,h=null,_=!1,y=function(){h==null||h.unsubscribe(),h=null,s&&(w(),_&&n.complete())},m=function(){h=null,_&&n.complete()},E=function(S){return h=GL.innerFrom(e(S)).subscribe(E_.createOperatorSubscriber(n,y,m))},w=function(){if(u){u=!1;var S=l;l=null,n.next(S),!_&&E(S)}};t.subscribe(E_.createOperatorSubscriber(n,function(S){u=!0,l=S,!(h&&!h.closed)&&(a?w():E(S))},function(){_=!0,!(s&&u&&h&&!h.closed)&&n.complete()}))})}di.throttle=YL;var Za={};Object.defineProperty(Za,"__esModule",{value:!0});Za.throttleTime=void 0;var KL=Ke,ZL=di,QL=Tt;function XL(e,r,t){r===void 0&&(r=KL.asyncScheduler);var n=QL.timer(e,r);return ZL.throttle(function(){return n},t)}Za.throttleTime=XL;var Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.TimeInterval=Yr.timeInterval=void 0;var JL=Ke,eU=$,tU=k;function rU(e){return e===void 0&&(e=JL.asyncScheduler),eU.operate(function(r,t){var n=e.now();r.subscribe(tU.createOperatorSubscriber(t,function(i){var o=e.now(),a=o-n;n=o,t.next(new Bb(i,a))}))})}Yr.timeInterval=rU;var Bb=function(){function e(r,t){this.value=r,this.interval=t}return e}();Yr.TimeInterval=Bb;var Qa={};Object.defineProperty(Qa,"__esModule",{value:!0});Qa.timeoutWith=void 0;var nU=Ke,iU=Kn,oU=to;function aU(e,r,t){var n,i,o;if(t=t??nU.async,iU.isValidDate(e)?n=e:typeof e=="number"&&(i=e),r)o=function(){return r};else throw new TypeError("No observable provided to switch to");if(n==null&&i==null)throw new TypeError("No timeout provided.");return oU.timeout({first:n,each:i,scheduler:t,with:o})}Qa.timeoutWith=aU;var Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});Xa.timestamp=void 0;var uU=Ac,cU=_t;function sU(e){return e===void 0&&(e=uU.dateTimestampProvider),cU.map(function(r){return{value:r,timestamp:e.now()}})}Xa.timestamp=sU;var Ja={};Object.defineProperty(Ja,"__esModule",{value:!0});Ja.window=void 0;var w_=we,lU=$,T_=k,fU=Ae,dU=F;function hU(e){return lU.operate(function(r,t){var n=new w_.Subject;t.next(n.asObservable());var i=function(o){n.error(o),t.error(o)};return r.subscribe(T_.createOperatorSubscriber(t,function(o){return n==null?void 0:n.next(o)},function(){n.complete(),t.complete()},i)),dU.innerFrom(e).subscribe(T_.createOperatorSubscriber(t,function(){n.complete(),t.next(n=new w_.Subject)},fU.noop,i)),function(){n==null||n.unsubscribe(),n=null}})}Ja.window=hU;var eu={},vU=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(eu,"__esModule",{value:!0});eu.windowCount=void 0;var S_=we,_U=$,pU=k;function yU(e,r){r===void 0&&(r=0);var t=r>0?r:e;return _U.operate(function(n,i){var o=[new S_.Subject],a=0;i.next(o[0].asObservable()),n.subscribe(pU.createOperatorSubscriber(i,function(c){var s,u;try{for(var l=vU(o),h=l.next();!h.done;h=l.next()){var _=h.value;_.next(c)}}catch(E){s={error:E}}finally{try{h&&!h.done&&(u=l.return)&&u.call(l)}finally{if(s)throw s.error}}var y=a-e+1;if(y>=0&&y%t===0&&o.shift().complete(),++a%t===0){var m=new S_.Subject;o.push(m),i.next(m.asObservable())}},function(){for(;o.length>0;)o.shift().complete();i.complete()},function(c){for(;o.length>0;)o.shift().error(c);i.error(c)},function(){o=null}))})}eu.windowCount=yU;var tu={};Object.defineProperty(tu,"__esModule",{value:!0});tu.windowTime=void 0;var bU=we,mU=Ke,gU=Re,OU=$,EU=k,wU=dt,TU=Ce,P_=vt;function SU(e){for(var r,t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=(r=TU.popScheduler(n))!==null&&r!==void 0?r:mU.asyncScheduler,a=(t=n[0])!==null&&t!==void 0?t:null,c=n[1]||1/0;return OU.operate(function(s,u){var l=[],h=!1,_=function(w){var S=w.window,A=w.subs;S.complete(),A.unsubscribe(),wU.arrRemove(l,w),h&&y()},y=function(){if(l){var w=new gU.Subscription;u.add(w);var S=new bU.Subject,A={window:S,subs:w,seen:0};l.push(A),u.next(S.asObservable()),P_.executeSchedule(w,o,function(){return _(A)},e)}};a!==null&&a>=0?P_.executeSchedule(u,o,y,a,!0):h=!0,y();var m=function(w){return l.slice().forEach(w)},E=function(w){m(function(S){var A=S.window;return w(A)}),w(u),u.unsubscribe()};return s.subscribe(EU.createOperatorSubscriber(u,function(w){m(function(S){S.window.next(w),c<=++S.seen&&_(S)})},function(){return E(function(w){return w.complete()})},function(w){return E(function(S){return S.error(w)})})),function(){l=null}})}tu.windowTime=SU;var ru={},PU=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ru,"__esModule",{value:!0});ru.windowToggle=void 0;var CU=we,IU=Re,RU=$,C_=F,gf=k,I_=Ae,AU=dt;function jU(e,r){return RU.operate(function(t,n){var i=[],o=function(a){for(;0<i.length;)i.shift().error(a);n.error(a)};C_.innerFrom(e).subscribe(gf.createOperatorSubscriber(n,function(a){var c=new CU.Subject;i.push(c);var s=new IU.Subscription,u=function(){AU.arrRemove(i,c),c.complete(),s.unsubscribe()},l;try{l=C_.innerFrom(r(a))}catch(h){o(h);return}n.next(c.asObservable()),s.add(l.subscribe(gf.createOperatorSubscriber(n,u,I_.noop,o)))},I_.noop)),t.subscribe(gf.createOperatorSubscriber(n,function(a){var c,s,u=i.slice();try{for(var l=PU(u),h=l.next();!h.done;h=l.next()){var _=h.value;_.next(a)}}catch(y){c={error:y}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(c)throw c.error}}},function(){for(;0<i.length;)i.shift().complete();n.complete()},o,function(){for(;0<i.length;)i.shift().unsubscribe()}))})}ru.windowToggle=jU;var nu={};Object.defineProperty(nu,"__esModule",{value:!0});nu.windowWhen=void 0;var MU=we,NU=$,R_=k,$U=F;function kU(e){return NU.operate(function(r,t){var n,i,o=function(c){n.error(c),t.error(c)},a=function(){i==null||i.unsubscribe(),n==null||n.complete(),n=new MU.Subject,t.next(n.asObservable());var c;try{c=$U.innerFrom(e())}catch(s){o(s);return}c.subscribe(i=R_.createOperatorSubscriber(t,a,a,o))};a(),r.subscribe(R_.createOperatorSubscriber(t,function(c){return n.next(c)},function(){n.complete(),t.complete()},o,function(){i==null||i.unsubscribe(),n=null}))})}nu.windowWhen=kU;var iu={},A_=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},j_=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(iu,"__esModule",{value:!0});iu.withLatestFrom=void 0;var DU=$,M_=k,LU=F,UU=je,FU=Ae,BU=Ce;function WU(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=BU.popResultSelector(e);return DU.operate(function(n,i){for(var o=e.length,a=new Array(o),c=e.map(function(){return!1}),s=!1,u=function(h){LU.innerFrom(e[h]).subscribe(M_.createOperatorSubscriber(i,function(_){a[h]=_,!s&&!c[h]&&(c[h]=!0,(s=c.every(UU.identity))&&(c=null))},FU.noop))},l=0;l<o;l++)u(l);n.subscribe(M_.createOperatorSubscriber(i,function(h){if(s){var _=j_([h],A_(a));i.next(t?t.apply(void 0,j_([],A_(_))):_)}}))})}iu.withLatestFrom=WU;var ou={};Object.defineProperty(ou,"__esModule",{value:!0});ou.zipAll=void 0;var xU=Qn,VU=Ho;function qU(e){return VU.joinAllInternals(xU.zip,e)}ou.zipAll=qU;var au={},uu={},HU=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},zU=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(uu,"__esModule",{value:!0});uu.zip=void 0;var GU=Qn,YU=$;function KU(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return YU.operate(function(t,n){GU.zip.apply(void 0,zU([t],HU(e))).subscribe(n)})}uu.zip=KU;var ZU=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},QU=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(au,"__esModule",{value:!0});au.zipWith=void 0;var XU=uu;function JU(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return XU.zip.apply(void 0,QU([],ZU(e)))}au.zipWith=JU;(function(e){var r=f&&f.__createBinding||(Object.create?function(dn,hn,Pt,gr){gr===void 0&&(gr=Pt),Object.defineProperty(dn,gr,{enumerable:!0,get:function(){return hn[Pt]}})}:function(dn,hn,Pt,gr){gr===void 0&&(gr=Pt),dn[gr]=hn[Pt]}),t=f&&f.__exportStar||function(dn,hn){for(var Pt in dn)Pt!=="default"&&!Object.prototype.hasOwnProperty.call(hn,Pt)&&r(hn,dn,Pt)};Object.defineProperty(e,"__esModule",{value:!0}),e.interval=e.iif=e.generate=e.fromEventPattern=e.fromEvent=e.from=e.forkJoin=e.empty=e.defer=e.connectable=e.concat=e.combineLatest=e.bindNodeCallback=e.bindCallback=e.UnsubscriptionError=e.TimeoutError=e.SequenceError=e.ObjectUnsubscribedError=e.NotFoundError=e.EmptyError=e.ArgumentOutOfRangeError=e.firstValueFrom=e.lastValueFrom=e.isObservable=e.identity=e.noop=e.pipe=e.NotificationKind=e.Notification=e.Subscriber=e.Subscription=e.Scheduler=e.VirtualAction=e.VirtualTimeScheduler=e.animationFrameScheduler=e.animationFrame=e.queueScheduler=e.queue=e.asyncScheduler=e.async=e.asapScheduler=e.asap=e.AsyncSubject=e.ReplaySubject=e.BehaviorSubject=e.Subject=e.animationFrames=e.observable=e.ConnectableObservable=e.Observable=void 0,e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.combineLatestWith=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=e.config=e.NEVER=e.EMPTY=e.scheduled=e.zip=e.using=e.timer=e.throwError=e.range=e.race=e.partition=e.pairs=e.onErrorResumeNext=e.of=e.never=e.merge=void 0,e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.pairwise=e.onErrorResumeNextWith=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=e.mergeAll=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=void 0,e.zipWith=e.zipAll=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=void 0;var n=se;Object.defineProperty(e,"Observable",{enumerable:!0,get:function(){return n.Observable}});var i=en;Object.defineProperty(e,"ConnectableObservable",{enumerable:!0,get:function(){return i.ConnectableObservable}});var o=Jr;Object.defineProperty(e,"observable",{enumerable:!0,get:function(){return o.observable}});var a=Rc;Object.defineProperty(e,"animationFrames",{enumerable:!0,get:function(){return a.animationFrames}});var c=we;Object.defineProperty(e,"Subject",{enumerable:!0,get:function(){return c.Subject}});var s=yo;Object.defineProperty(e,"BehaviorSubject",{enumerable:!0,get:function(){return s.BehaviorSubject}});var u=qn;Object.defineProperty(e,"ReplaySubject",{enumerable:!0,get:function(){return u.ReplaySubject}});var l=Hn;Object.defineProperty(e,"AsyncSubject",{enumerable:!0,get:function(){return l.AsyncSubject}});var h=lb;Object.defineProperty(e,"asap",{enumerable:!0,get:function(){return h.asap}}),Object.defineProperty(e,"asapScheduler",{enumerable:!0,get:function(){return h.asapScheduler}});var _=Ke;Object.defineProperty(e,"async",{enumerable:!0,get:function(){return _.async}}),Object.defineProperty(e,"asyncScheduler",{enumerable:!0,get:function(){return _.asyncScheduler}});var y=hb;Object.defineProperty(e,"queue",{enumerable:!0,get:function(){return y.queue}}),Object.defineProperty(e,"queueScheduler",{enumerable:!0,get:function(){return y.queueScheduler}});var m=vb;Object.defineProperty(e,"animationFrame",{enumerable:!0,get:function(){return m.animationFrame}}),Object.defineProperty(e,"animationFrameScheduler",{enumerable:!0,get:function(){return m.animationFrameScheduler}});var E=$n;Object.defineProperty(e,"VirtualTimeScheduler",{enumerable:!0,get:function(){return E.VirtualTimeScheduler}}),Object.defineProperty(e,"VirtualAction",{enumerable:!0,get:function(){return E.VirtualAction}});var w=bo;Object.defineProperty(e,"Scheduler",{enumerable:!0,get:function(){return w.Scheduler}});var S=Re;Object.defineProperty(e,"Subscription",{enumerable:!0,get:function(){return S.Subscription}});var A=xn;Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return A.Subscriber}});var R=Uc;Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return R.Notification}}),Object.defineProperty(e,"NotificationKind",{enumerable:!0,get:function(){return R.NotificationKind}});var I=kt;Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return I.pipe}});var j=Ae;Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return j.noop}});var M=je;Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return M.identity}});var G=Vc;Object.defineProperty(e,"isObservable",{enumerable:!0,get:function(){return G.isObservable}});var H=qc;Object.defineProperty(e,"lastValueFrom",{enumerable:!0,get:function(){return H.lastValueFrom}});var ie=Hc;Object.defineProperty(e,"firstValueFrom",{enumerable:!0,get:function(){return ie.firstValueFrom}});var ue=Io;Object.defineProperty(e,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return ue.ArgumentOutOfRangeError}});var pe=Et;Object.defineProperty(e,"EmptyError",{enumerable:!0,get:function(){return pe.EmptyError}});var J=Ro;Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return J.NotFoundError}});var _e=po;Object.defineProperty(e,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return _e.ObjectUnsubscribedError}});var qe=Ao;Object.defineProperty(e,"SequenceError",{enumerable:!0,get:function(){return qe.SequenceError}});var Y=to;Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return Y.TimeoutError}});var re=vo;Object.defineProperty(e,"UnsubscriptionError",{enumerable:!0,get:function(){return re.UnsubscriptionError}});var W=zc;Object.defineProperty(e,"bindCallback",{enumerable:!0,get:function(){return W.bindCallback}});var ce=Gc;Object.defineProperty(e,"bindNodeCallback",{enumerable:!0,get:function(){return ce.bindNodeCallback}});var q=er;Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return q.combineLatest}});var D=rn;Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return D.concat}});var x=Yc;Object.defineProperty(e,"connectable",{enumerable:!0,get:function(){return x.connectable}});var Q=on;Object.defineProperty(e,"defer",{enumerable:!0,get:function(){return Q.defer}});var ye=ft;Object.defineProperty(e,"empty",{enumerable:!0,get:function(){return ye.empty}});var U=Kc;Object.defineProperty(e,"forkJoin",{enumerable:!0,get:function(){return U.forkJoin}});var be=ht;Object.defineProperty(e,"from",{enumerable:!0,get:function(){return be.from}});var O=Zc;Object.defineProperty(e,"fromEvent",{enumerable:!0,get:function(){return O.fromEvent}});var C=Qc;Object.defineProperty(e,"fromEventPattern",{enumerable:!0,get:function(){return C.fromEventPattern}});var N=Xc;Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return N.generate}});var L=Jc;Object.defineProperty(e,"iif",{enumerable:!0,get:function(){return L.iif}});var Z=$o;Object.defineProperty(e,"interval",{enumerable:!0,get:function(){return Z.interval}});var Ie=es;Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return Ie.merge}});var He=ad;Object.defineProperty(e,"never",{enumerable:!0,get:function(){return He.never}});var ze=zn;Object.defineProperty(e,"of",{enumerable:!0,get:function(){return ze.of}});var ot=ko;Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return ot.onErrorResumeNext}});var mi=ts;Object.defineProperty(e,"pairs",{enumerable:!0,get:function(){return mi.pairs}});var gi=rs;Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return gi.partition}});var br=zr;Object.defineProperty(e,"race",{enumerable:!0,get:function(){return br.race}});var Oi=ns;Object.defineProperty(e,"range",{enumerable:!0,get:function(){return Oi.range}});var Ei=Co;Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return Ei.throwError}});var fn=Tt;Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return fn.timer}});var xt=is;Object.defineProperty(e,"using",{enumerable:!0,get:function(){return xt.using}});var Ge=Qn;Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return Ge.zip}});var mr=mo;Object.defineProperty(e,"scheduled",{enumerable:!0,get:function(){return mr.scheduled}});var wi=ft;Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return wi.EMPTY}});var Xe=ad;Object.defineProperty(e,"NEVER",{enumerable:!0,get:function(){return Xe.NEVER}}),t(jb,e);var Ti=ur;Object.defineProperty(e,"config",{enumerable:!0,get:function(){return Ti.config}});var p=Xn;Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return p.audit}});var d=Lo;Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return d.auditTime}});var v=Uo;Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return v.buffer}});var b=Fo;Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return b.bufferCount}});var g=Bo;Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return g.bufferTime}});var T=Wo;Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return T.bufferToggle}});var P=xo;Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return P.bufferWhen}});var K=Vo;Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return K.catchError}});var de=qo;Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return de.combineAll}});var le=Jn;Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return le.combineLatestAll}});var he=Go;Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return he.combineLatestWith}});var oe=nn;Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return oe.concatAll}});var fl=ti;Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return fl.concatMap}});var dl=Ko;Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return dl.concatMapTo}});var hl=Zo;Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return hl.concatWith}});var vl=an;Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return vl.connect}});var _l=Xo;Object.defineProperty(e,"count",{enumerable:!0,get:function(){return _l.count}});var pl=Jo;Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return pl.debounce}});var yl=ea;Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return yl.debounceTime}});var bl=hr;Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return bl.defaultIfEmpty}});var ml=ta;Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return ml.delay}});var gl=ri;Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return gl.delayWhen}});var Ol=ra;Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return Ol.dematerialize}});var El=na;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return El.distinct}});var wl=oi;Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return wl.distinctUntilChanged}});var Tl=ia;Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return Tl.distinctUntilKeyChanged}});var Sl=oa;Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return Sl.elementAt}});var Pl=aa;Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return Pl.endWith}});var Cl=ua;Object.defineProperty(e,"every",{enumerable:!0,get:function(){return Cl.every}});var Il=ca;Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return Il.exhaust}});var Rl=ai;Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return Rl.exhaustAll}});var Al=ui;Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return Al.exhaustMap}});var jl=sa;Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return jl.expand}});var Ml=pt;Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return Ml.filter}});var Nl=la;Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return Nl.finalize}});var $l=tr;Object.defineProperty(e,"find",{enumerable:!0,get:function(){return $l.find}});var kl=fa;Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return kl.findIndex}});var Dl=da;Object.defineProperty(e,"first",{enumerable:!0,get:function(){return Dl.first}});var Ll=ha;Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return Ll.groupBy}});var Ul=ni;Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return Ul.ignoreElements}});var Fl=va;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return Fl.isEmpty}});var Bl=_a;Object.defineProperty(e,"last",{enumerable:!0,get:function(){return Bl.last}});var Wl=_t;Object.defineProperty(e,"map",{enumerable:!0,get:function(){return Wl.map}});var xl=ii;Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return xl.mapTo}});var Vl=pa;Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return Vl.materialize}});var ql=ya;Object.defineProperty(e,"max",{enumerable:!0,get:function(){return ql.max}});var Hl=dr;Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return Hl.mergeAll}});var zl=ba;Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return zl.flatMap}});var Gl=it;Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return Gl.mergeMap}});var Yl=ma;Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return Yl.mergeMapTo}});var Kl=ga;Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return Kl.mergeScan}});var Mg=Oa;Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return Mg.mergeWith}});var Ng=wa;Object.defineProperty(e,"min",{enumerable:!0,get:function(){return Ng.min}});var $g=un;Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return $g.multicast}});var kg=lr;Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return kg.observeOn}});var Dg=Gr;Object.defineProperty(e,"onErrorResumeNextWith",{enumerable:!0,get:function(){return Dg.onErrorResumeNextWith}});var Lg=Ta;Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return Lg.pairwise}});var Ug=Sa;Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return Ug.pluck}});var Fg=Pa;Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return Fg.publish}});var Bg=Ca;Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return Bg.publishBehavior}});var Wg=Ia;Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return Wg.publishLast}});var xg=Ra;Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return xg.publishReplay}});var Vg=si;Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return Vg.raceWith}});var qg=Lt;Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return qg.reduce}});var Hg=Aa;Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return Hg.repeat}});var zg=ja;Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return zg.repeatWhen}});var Gg=Ma;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return Gg.retry}});var Yg=Na;Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return Yg.retryWhen}});var Kg=Vn;Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return Kg.refCount}});var Zg=li;Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return Zg.sample}});var Qg=$a;Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return Qg.sampleTime}});var Xg=ka;Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return Xg.scan}});var Jg=Da;Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return Jg.sequenceEqual}});var e0=fi;Object.defineProperty(e,"share",{enumerable:!0,get:function(){return e0.share}});var t0=La;Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return t0.shareReplay}});var r0=Ua;Object.defineProperty(e,"single",{enumerable:!0,get:function(){return r0.single}});var n0=Fa;Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return n0.skip}});var i0=Ba;Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return i0.skipLast}});var o0=Wa;Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return o0.skipUntil}});var a0=xa;Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return a0.skipWhile}});var u0=Va;Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return u0.startWith}});var c0=fr;Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return c0.subscribeOn}});var s0=qa;Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return s0.switchAll}});var l0=pr;Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return l0.switchMap}});var f0=Ha;Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return f0.switchMapTo}});var d0=za;Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return d0.switchScan}});var h0=vr;Object.defineProperty(e,"take",{enumerable:!0,get:function(){return h0.take}});var v0=ci;Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return v0.takeLast}});var _0=Ga;Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return _0.takeUntil}});var p0=Ya;Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return p0.takeWhile}});var y0=Ka;Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return y0.tap}});var b0=di;Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return b0.throttle}});var m0=Za;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return m0.throttleTime}});var g0=_r;Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return g0.throwIfEmpty}});var O0=Yr;Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return O0.timeInterval}});var E0=to;Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return E0.timeout}});var w0=Qa;Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return w0.timeoutWith}});var T0=Xa;Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return T0.timestamp}});var S0=ei;Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return S0.toArray}});var P0=Ja;Object.defineProperty(e,"window",{enumerable:!0,get:function(){return P0.window}});var C0=eu;Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return C0.windowCount}});var I0=tu;Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return I0.windowTime}});var R0=ru;Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return R0.windowToggle}});var A0=nu;Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return A0.windowWhen}});var j0=iu;Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return j0.withLatestFrom}});var M0=ou;Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return M0.zipAll}});var N0=au;Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return N0.zipWith}})})(ho);var as={},us={};Object.defineProperty(us,"__esModule",{value:!0});us.partition=void 0;var e2=Do,N_=pt;function t2(e,r){return function(t){return[N_.filter(e,r)(t),N_.filter(e2.not(e,r))(t)]}}us.partition=t2;var cs={},r2=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},n2=f&&f.__spreadArray||function(e,r){for(var t=0,n=r.length,i=e.length;t<n;t++,i++)e[i]=r[t];return e};Object.defineProperty(cs,"__esModule",{value:!0});cs.race=void 0;var i2=St,o2=si;function a2(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return o2.raceWith.apply(void 0,n2([],r2(i2.argsOrArgArray(e))))}cs.race=a2;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=e.merge=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.concat=e.combineLatestWith=e.combineLatest=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=void 0,e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.race=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.partition=e.pairwise=e.onErrorResumeNext=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=void 0,e.zipWith=e.zipAll=e.zip=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=void 0;var r=Xn;Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return r.audit}});var t=Lo;Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return t.auditTime}});var n=Uo;Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return n.buffer}});var i=Fo;Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return i.bufferCount}});var o=Bo;Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return o.bufferTime}});var a=Wo;Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return a.bufferToggle}});var c=xo;Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return c.bufferWhen}});var s=Vo;Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return s.catchError}});var u=qo;Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return u.combineAll}});var l=Jn;Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return l.combineLatestAll}});var h=Yo;Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return h.combineLatest}});var _=Go;Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return _.combineLatestWith}});var y=Qo;Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return y.concat}});var m=nn;Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return m.concatAll}});var E=ti;Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return E.concatMap}});var w=Ko;Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return w.concatMapTo}});var S=Zo;Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return S.concatWith}});var A=an;Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return A.connect}});var R=Xo;Object.defineProperty(e,"count",{enumerable:!0,get:function(){return R.count}});var I=Jo;Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return I.debounce}});var j=ea;Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return j.debounceTime}});var M=hr;Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return M.defaultIfEmpty}});var G=ta;Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return G.delay}});var H=ri;Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return H.delayWhen}});var ie=ra;Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return ie.dematerialize}});var ue=na;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return ue.distinct}});var pe=oi;Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return pe.distinctUntilChanged}});var J=ia;Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return J.distinctUntilKeyChanged}});var _e=oa;Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return _e.elementAt}});var qe=aa;Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return qe.endWith}});var Y=ua;Object.defineProperty(e,"every",{enumerable:!0,get:function(){return Y.every}});var re=ca;Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return re.exhaust}});var W=ai;Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return W.exhaustAll}});var ce=ui;Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return ce.exhaustMap}});var q=sa;Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return q.expand}});var D=pt;Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return D.filter}});var x=la;Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return x.finalize}});var Q=tr;Object.defineProperty(e,"find",{enumerable:!0,get:function(){return Q.find}});var ye=fa;Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return ye.findIndex}});var U=da;Object.defineProperty(e,"first",{enumerable:!0,get:function(){return U.first}});var be=ha;Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return be.groupBy}});var O=ni;Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return O.ignoreElements}});var C=va;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return C.isEmpty}});var N=_a;Object.defineProperty(e,"last",{enumerable:!0,get:function(){return N.last}});var L=_t;Object.defineProperty(e,"map",{enumerable:!0,get:function(){return L.map}});var Z=ii;Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return Z.mapTo}});var Ie=pa;Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return Ie.materialize}});var He=ya;Object.defineProperty(e,"max",{enumerable:!0,get:function(){return He.max}});var ze=Ea;Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return ze.merge}});var ot=dr;Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return ot.mergeAll}});var mi=ba;Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return mi.flatMap}});var gi=it;Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return gi.mergeMap}});var br=ma;Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return br.mergeMapTo}});var Oi=ga;Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return Oi.mergeScan}});var Ei=Oa;Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return Ei.mergeWith}});var fn=wa;Object.defineProperty(e,"min",{enumerable:!0,get:function(){return fn.min}});var xt=un;Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return xt.multicast}});var Ge=lr;Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return Ge.observeOn}});var mr=Gr;Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return mr.onErrorResumeNext}});var wi=Ta;Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return wi.pairwise}});var Xe=us;Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return Xe.partition}});var Ti=Sa;Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return Ti.pluck}});var p=Pa;Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return p.publish}});var d=Ca;Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return d.publishBehavior}});var v=Ia;Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return v.publishLast}});var b=Ra;Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return b.publishReplay}});var g=cs;Object.defineProperty(e,"race",{enumerable:!0,get:function(){return g.race}});var T=si;Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return T.raceWith}});var P=Lt;Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return P.reduce}});var K=Aa;Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return K.repeat}});var de=ja;Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return de.repeatWhen}});var le=Ma;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return le.retry}});var he=Na;Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return he.retryWhen}});var oe=Vn;Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return oe.refCount}});var fl=li;Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return fl.sample}});var dl=$a;Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return dl.sampleTime}});var hl=ka;Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return hl.scan}});var vl=Da;Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return vl.sequenceEqual}});var _l=fi;Object.defineProperty(e,"share",{enumerable:!0,get:function(){return _l.share}});var pl=La;Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return pl.shareReplay}});var yl=Ua;Object.defineProperty(e,"single",{enumerable:!0,get:function(){return yl.single}});var bl=Fa;Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return bl.skip}});var ml=Ba;Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return ml.skipLast}});var gl=Wa;Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return gl.skipUntil}});var Ol=xa;Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return Ol.skipWhile}});var El=Va;Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return El.startWith}});var wl=fr;Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return wl.subscribeOn}});var Tl=qa;Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return Tl.switchAll}});var Sl=pr;Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return Sl.switchMap}});var Pl=Ha;Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return Pl.switchMapTo}});var Cl=za;Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return Cl.switchScan}});var Il=vr;Object.defineProperty(e,"take",{enumerable:!0,get:function(){return Il.take}});var Rl=ci;Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return Rl.takeLast}});var Al=Ga;Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return Al.takeUntil}});var jl=Ya;Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return jl.takeWhile}});var Ml=Ka;Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return Ml.tap}});var Nl=di;Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return Nl.throttle}});var $l=Za;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return $l.throttleTime}});var kl=_r;Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return kl.throwIfEmpty}});var Dl=Yr;Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return Dl.timeInterval}});var Ll=to;Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return Ll.timeout}});var Ul=Qa;Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return Ul.timeoutWith}});var Fl=Xa;Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return Fl.timestamp}});var Bl=ei;Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return Bl.toArray}});var Wl=Ja;Object.defineProperty(e,"window",{enumerable:!0,get:function(){return Wl.window}});var xl=eu;Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return xl.windowCount}});var Vl=tu;Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return Vl.windowTime}});var ql=ru;Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return ql.windowToggle}});var Hl=nu;Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return Hl.windowWhen}});var zl=iu;Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return zl.withLatestFrom}});var Gl=uu;Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return Gl.zip}});var Yl=ou;Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return Yl.zipAll}});var Kl=au;Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return Kl.zipWith}})})(as);var hi={},In=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(c,s)}u((n=n.apply(e,r||[])).next())})},Rn=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(hi,"__esModule",{value:!0});var u2=V,$r=ho,Pr=as,Mi={READY:0,STREAMING:1,COMPLETED:2},c2=function(){function e(r,t){var n=r.pipe((0,Pr.publishReplay)(1),(0,Pr.refCount)());this._result=n,this._keys=n.pipe((0,Pr.mergeMap)(function(i){return(0,$r.from)(i.keys())}),(0,Pr.publishReplay)(1),(0,Pr.refCount)()),this._records=void 0,this._controls=new Wb,this._summary=new $r.ReplaySubject,this._state=t||Mi.READY}return e.prototype.keys=function(){return this._keys},e.prototype.records=function(){var r=this,t=this._result.pipe((0,Pr.mergeMap)(function(n){return new $r.Observable(function(i){return r._startStreaming({result:n,recordsObserver:i})})}));return t.push=function(){return r._push()},t},e.prototype.consume=function(){var r=this;return this._result.pipe((0,Pr.mergeMap)(function(t){return new $r.Observable(function(n){return r._startStreaming({result:t,summaryObserver:n})})}))},e.prototype.pause=function(){this._controls.pause()},e.prototype.resume=function(){return this._controls.resume()},e.prototype.push=function(){return this._controls.push()},e.prototype._startStreaming=function(r){var t=r===void 0?{}:r,n=t.result,i=t.recordsObserver,o=i===void 0?null:i,a=t.summaryObserver,c=a===void 0?null:a,s=[];return c&&s.push(this._summary.subscribe(c)),this._state<Mi.STREAMING?(this._state=Mi.STREAMING,this._setupRecordsStream(n),o?s.push(this._records.subscribe(o)):n._cancel(),s.push({unsubscribe:function(){n._cancel&&n._cancel()}})):o&&o.error((0,u2.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){s.forEach(function(u){return u.unsubscribe()})}},e.prototype._toObservable=function(){var r=this;function t(n){return new $r.Observable(function(i){i.next(n),i.complete()})}return new $r.Observable(function(n){r._result.subscribe({complete:function(){return n.complete()},next:function(i){return n.next(new e(t(i)),r._state)},error:function(i){return n.error(i)}})})},e.prototype._setupRecordsStream=function(r){var t=this;return this._records?this._records:(this._records=s2(r[Symbol.asyncIterator](),{complete:function(){return In(t,void 0,void 0,function(){var n,i;return Rn(this,function(o){switch(o.label){case 0:return this._state=Mi.COMPLETED,i=(n=this._summary).next,[4,r.summary()];case 1:return i.apply(n,[o.sent()]),this._summary.complete(),[2]}})})},error:function(n){t._state=Mi.COMPLETED,t._summary.error(n)}},this._controls),this._records)},e}();hi.default=c2;function s2(e,r,t){var n=this;t===void 0&&(t=new Wb);var i=new $r.Subject,o=function(c){return In(n,void 0,void 0,function(){var s,u,l,h;return Rn(this,function(_){switch(_.label){case 0:return _.trys.push([0,2,3,4]),t.pushing=!0,[4,c];case 1:return s=_.sent(),u=s.done,l=s.value,u?(i.complete(),r.complete()):(i.next(l),t.paused||o(e.next()).catch(function(){})),[3,4];case 2:return h=_.sent(),i.error(h),r.error(h),[3,4];case 3:return t.pushing=!1,[7];case 4:return[2]}})})};function a(c){return In(this,void 0,void 0,function(){return Rn(this,function(s){switch(s.label){case 0:return[4,o(e.next(c))];case 1:return s.sent(),[2]}})})}return t.pusher=a,a(),i}var Wb=function(){function e(r){r===void 0&&(r=function(){return In(t,void 0,void 0,function(){return Rn(this,function(n){return[2]})})});var t=this;this._paused=!1,this._pushing=!1,this._push=r}return e.prototype.pause=function(){this._paused=!0},Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushing",{get:function(){return this._pushing},set:function(r){this._pushing=r},enumerable:!1,configurable:!0}),e.prototype.resume=function(){return In(this,void 0,void 0,function(){var r;return Rn(this,function(t){switch(t.label){case 0:return r=this._paused,this._paused=!1,r&&!this._pushing?[4,this._push()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.push=function(){return In(this,void 0,void 0,function(){return Rn(this,function(r){switch(r.label){case 0:return this.pause(),[4,this._push()];case 1:return[2,r.sent()]}})})},Object.defineProperty(e.prototype,"pusher",{get:function(){return this._push},set:function(r){this._push=r},enumerable:!1,configurable:!0}),e}(),cu={},xb=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cu,"__esModule",{value:!0});var Pu=ho,l2=xb(hi);xb(V);var f2=function(){function e(r){this._txc=r}return e.prototype.run=function(r,t){var n=this;return new l2.default(new Pu.Observable(function(i){try{i.next(n._txc.run(r,t)),i.complete()}catch(o){i.error(o)}return function(){}}))},e.prototype.commit=function(){var r=this;return new Pu.Observable(function(t){r._txc.commit().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype.rollback=function(){var r=this;return new Pu.Observable(function(t){r._txc.rollback().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype.isOpen=function(){return this._txc.isOpen()},e.prototype.close=function(){var r=this;return new Pu.Observable(function(t){r._txc.close().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e}();cu.default=f2;var ss={},Vb=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ss,"__esModule",{value:!0});Vb(hi);Vb(cu);var d2=function(){function e(r){var t=r.run;this._run=t}return e.fromTransaction=function(r){return new e({run:r.run.bind(r)})},e.prototype.run=function(r,t){return this._run(r,t)},e}();ss.default=d2;var zd={};Object.defineProperty(zd,"__esModule",{value:!0});var tc=V,Of=ho,Ef=as;tc.internal.logger.Logger;var h2=tc.error.SERVICE_UNAVAILABLE,$_=30*1e3,k_=1e3,D_=2,L_=.2,v2=function(){function e(r){var t=r===void 0?{}:r,n=t.maxRetryTimeout,i=n===void 0?$_:n,o=t.initialDelay,a=o===void 0?k_:o,c=t.delayMultiplier,s=c===void 0?D_:c,u=t.delayJitter,l=u===void 0?L_:u,h=t.logger,_=h===void 0?null:h;this._maxRetryTimeout=Cu(i,$_),this._initialDelay=Cu(a,k_),this._delayMultiplier=Cu(s,D_),this._delayJitter=Cu(l,L_),this._logger=_}return e.prototype.retry=function(r){var t=this;return r.pipe((0,Ef.retryWhen)(function(n){var i=[],o=Date.now(),a=1,c=t._initialDelay;return n.pipe((0,Ef.mergeMap)(function(s){if(!(0,tc.isRetriableError)(s))return(0,Of.throwError)(function(){return s});if(i.push(s),a>=2&&Date.now()-o>=t._maxRetryTimeout){var u=(0,tc.newError)("Failed after retried for ".concat(a," times in ").concat(t._maxRetryTimeout," ms. Make sure that your database is online and retry again."),h2);return u.seenErrors=i,(0,Of.throwError)(function(){return u})}var l=t._computeNextDelay(c);return c=c*t._delayMultiplier,a++,t._logger&&t._logger.warn("Transaction failed and will be retried in ".concat(l)),(0,Of.of)(1).pipe((0,Ef.delay)(l))}))}))},e.prototype._computeNextDelay=function(r){var t=r*this._delayJitter;return r-t+2*t*Math.random()},e}();zd.default=v2;function Cu(e,r){return e||e===0?e:r}var ls=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cc,"__esModule",{value:!0});var Cr=ho,Ni=as,_2=ls(hi),qb=V,p2=ls(cu),y2=ls(ss),b2=ls(zd),Gd=qb.internal.constants,U_=Gd.ACCESS_MODE_READ,F_=Gd.ACCESS_MODE_WRITE,B_=Gd.TELEMETRY_APIS,Iu=qb.internal.txConfig.TxConfig,m2=function(){function e(r){var t=r===void 0?{}:r,n=t.session,i=t.config,o=t.log;this._session=n,this._retryLogic=g2(i),this._log=o}return e.prototype.run=function(r,t,n){var i=this;return new _2.default(new Cr.Observable(function(o){try{o.next(i._session.run(r,t,n)),o.complete()}catch(a){o.error(a)}return function(){}}))},e.prototype.beginTransaction=function(r){return this._beginTransaction(this._session._mode,r,{api:B_.UNMANAGED_TRANSACTION})},e.prototype.readTransaction=function(r,t){return this._runTransaction(U_,r,t)},e.prototype.writeTransaction=function(r,t){return this._runTransaction(F_,r,t)},e.prototype.executeRead=function(r,t){return this._executeInTransaction(U_,r,t)},e.prototype.executeWrite=function(r,t){return this._executeInTransaction(F_,r,t)},e.prototype._executeInTransaction=function(r,t,n){var i=function(o){return new y2.default({run:o.run.bind(o)})};return this._runTransaction(r,t,n,i)},e.prototype.close=function(){var r=this;return new Cr.Observable(function(t){r._session.close().then(function(){t.complete()}).catch(function(n){return t.error(n)})})},e.prototype[Symbol.asyncDispose]=function(){return this.close()},e.prototype.lastBookmark=function(){return this.lastBookmarks()},e.prototype.lastBookmarks=function(){return this._session.lastBookmarks()},e.prototype._beginTransaction=function(r,t,n){var i=this,o=Iu.empty();return t&&(o=new Iu(t,this._log)),new Cr.Observable(function(a){try{i._session._beginTransaction(r,o,n).then(function(c){a.next(new p2.default(c)),a.complete()}).catch(function(c){return a.error(c)})}catch(c){a.error(c)}return function(){}})},e.prototype._runTransaction=function(r,t,n,i){var o=this;i===void 0&&(i=function(s){return s});var a=Iu.empty();n&&(a=new Iu(n));var c={apiTelemetryConfig:{api:B_.MANAGED_TRANSACTION,onTelemetrySuccess:function(){c.apiTelemetryConfig=void 0}}};return this._retryLogic.retry((0,Cr.of)(1).pipe((0,Ni.mergeMap)(function(){return o._beginTransaction(r,a,c.apiTelemetryConfig)}),(0,Ni.mergeMap)(function(s){return(0,Cr.defer)(function(){try{return t(i(s))}catch(u){return(0,Cr.throwError)(function(){return u})}}).pipe((0,Ni.catchError)(function(u){return s.rollback().pipe((0,Ni.concatWith)((0,Cr.throwError)(function(){return u})))}),(0,Ni.concatWith)(s.commit()))})))},e}();Cc.default=m2;function g2(e){var r=e&&e.maxTransactionRetryTime?e.maxTransactionRetryTime:null;return new b2.default({maxRetryTimeout:r})}var O2=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),E2=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(At,"__esModule",{value:!0});At.WRITE=At.READ=At.Driver=void 0;var fs=V,w2=E2(Cc),W_=fs.internal.constants.FETCH_ALL,T2=fs.driver.READ,Hb=fs.driver.WRITE;At.READ=T2;At.WRITE=Hb;var zb=function(e){O2(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.rxSession=function(t){var n=t===void 0?{}:t,i=n.defaultAccessMode,o=i===void 0?Hb:i,a=n.bookmarks,c=n.database,s=c===void 0?"":c,u=n.fetchSize,l=n.impersonatedUser,h=n.bookmarkManager,_=n.notificationFilter,y=n.auth;return new w2.default({session:this._newSession({defaultAccessMode:o,bookmarkOrBookmarks:a,database:s,impersonatedUser:l,auth:y,reactive:!1,fetchSize:S2(u,this._config.fetchSize),bookmarkManager:h,notificationFilter:_,log:this._log}),config:this._config,log:this._log})},r}(fs.Driver);At.Driver=zb;function S2(e,r){var t=parseInt(e,10);if(t>0||t===W_)return t;if(t===0||t<0)throw new Error("The fetch size can only be a positive value or ".concat(W_," for ALL. However fetchSize = ").concat(t));return r}At.default=zb;var Yd={};Object.defineProperty(Yd,"__esModule",{value:!0});Yd.default="5.26.0";var Gb={},rr={},ds={};Object.defineProperty(ds,"__esModule",{value:!0});var P2=function(){function e(){}return e.prototype.selectReader=function(r){throw new Error("Abstract function")},e.prototype.selectWriter=function(r){throw new Error("Abstract function")},e}();ds.default=P2;var Kd={},Zd={};Object.defineProperty(Zd,"__esModule",{value:!0});var C2=function(){function e(r){this._offset=r||0}return e.prototype.next=function(r){if(r===0)return-1;var t=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),t%r},e}();Zd.default=C2;var I2=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yb=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kd,"__esModule",{value:!0});var x_=Yb(Zd),R2=Yb(ds),A2=function(e){I2(r,e);function r(t){var n=e.call(this)||this;return n._readersIndex=new x_.default,n._writersIndex=new x_.default,n._connectionPool=t,n}return r.prototype.selectReader=function(t){return this._select(t,this._readersIndex)},r.prototype.selectWriter=function(t){return this._select(t,this._writersIndex)},r.prototype._select=function(t,n){var i=t.length;if(i===0)return null;var o=n.next(i),a=o,c=null,s=Number.MAX_SAFE_INTEGER;do{var u=t[a],l=this._connectionPool.activeResourceCount(u);l<s&&(c=u,s=l),a===i-1?a=0:a++}while(a!==o);return c},r}(R2.default);Kd.default=A2;var Kb=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rr,"__esModule",{value:!0});rr.LeastConnectedLoadBalancingStrategy=rr.LoadBalancingStrategy=void 0;var j2=Kb(ds);rr.LoadBalancingStrategy=j2.default;var Zb=Kb(Kd);rr.LeastConnectedLoadBalancingStrategy=Zb.default;rr.default=Zb.default;var Qd={},Xd={},cn={},Kt={},Jd={},Ut={},hs={},vs={};vs.byteLength=$2;vs.toByteArray=D2;vs.fromByteArray=F2;var bt=[],tt=[],M2=typeof Uint8Array<"u"?Uint8Array:Array,wf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var pn=0,N2=wf.length;pn<N2;++pn)bt[pn]=wf[pn],tt[wf.charCodeAt(pn)]=pn;tt[45]=62;tt[95]=63;function Qb(e){var r=e.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");t===-1&&(t=r);var n=t===r?0:4-t%4;return[t,n]}function $2(e){var r=Qb(e),t=r[0],n=r[1];return(t+n)*3/4-n}function k2(e,r,t){return(r+t)*3/4-t}function D2(e){var r,t=Qb(e),n=t[0],i=t[1],o=new M2(k2(e,n,i)),a=0,c=i>0?n-4:n,s;for(s=0;s<c;s+=4)r=tt[e.charCodeAt(s)]<<18|tt[e.charCodeAt(s+1)]<<12|tt[e.charCodeAt(s+2)]<<6|tt[e.charCodeAt(s+3)],o[a++]=r>>16&255,o[a++]=r>>8&255,o[a++]=r&255;return i===2&&(r=tt[e.charCodeAt(s)]<<2|tt[e.charCodeAt(s+1)]>>4,o[a++]=r&255),i===1&&(r=tt[e.charCodeAt(s)]<<10|tt[e.charCodeAt(s+1)]<<4|tt[e.charCodeAt(s+2)]>>2,o[a++]=r>>8&255,o[a++]=r&255),o}function L2(e){return bt[e>>18&63]+bt[e>>12&63]+bt[e>>6&63]+bt[e&63]}function U2(e,r,t){for(var n,i=[],o=r;o<t;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),i.push(L2(n));return i.join("")}function F2(e){for(var r,t=e.length,n=t%3,i=[],o=16383,a=0,c=t-n;a<c;a+=o)i.push(U2(e,a,a+o>c?c:a+o));return n===1?(r=e[t-1],i.push(bt[r>>2]+bt[r<<4&63]+"==")):n===2&&(r=(e[t-2]<<8)+e[t-1],i.push(bt[r>>10]+bt[r>>4&63]+bt[r<<2&63]+"=")),i.join("")}var eh={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */eh.read=function(e,r,t,n,i){var o,a,c=i*8-n-1,s=(1<<c)-1,u=s>>1,l=-7,h=t?i-1:0,_=t?-1:1,y=e[r+h];for(h+=_,o=y&(1<<-l)-1,y>>=-l,l+=c;l>0;o=o*256+e[r+h],h+=_,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=a*256+e[r+h],h+=_,l-=8);if(o===0)o=1-u;else{if(o===s)return a?NaN:(y?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-u}return(y?-1:1)*a*Math.pow(2,o-n)};eh.write=function(e,r,t,n,i,o){var a,c,s,u=o*8-i-1,l=(1<<u)-1,h=l>>1,_=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:o-1,m=n?1:-1,E=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(c=isNaN(r)?1:0,a=l):(a=Math.floor(Math.log(r)/Math.LN2),r*(s=Math.pow(2,-a))<1&&(a--,s*=2),a+h>=1?r+=_/s:r+=_*Math.pow(2,1-h),r*s>=2&&(a++,s/=2),a+h>=l?(c=0,a=l):a+h>=1?(c=(r*s-1)*Math.pow(2,i),a=a+h):(c=r*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[t+y]=c&255,y+=m,c/=256,i-=8);for(a=a<<i|c,u+=i;u>0;e[t+y]=a&255,y+=m,a/=256,u-=8);e[t+y-m]|=E*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const r=vs,t=eh,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=A,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,c.TYPED_ARRAY_SUPPORT=o(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const p=new Uint8Array(1),d={foo:function(){return 42}};return Object.setPrototypeOf(d,Uint8Array.prototype),Object.setPrototypeOf(p,d),p.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function a(p){if(p>i)throw new RangeError('The value "'+p+'" is invalid for option "size"');const d=new Uint8Array(p);return Object.setPrototypeOf(d,c.prototype),d}function c(p,d,v){if(typeof p=="number"){if(typeof d=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(p)}return s(p,d,v)}c.poolSize=8192;function s(p,d,v){if(typeof p=="string")return _(p,d);if(ArrayBuffer.isView(p))return m(p);if(p==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);if(Ge(p,ArrayBuffer)||p&&Ge(p.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ge(p,SharedArrayBuffer)||p&&Ge(p.buffer,SharedArrayBuffer)))return E(p,d,v);if(typeof p=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const b=p.valueOf&&p.valueOf();if(b!=null&&b!==p)return c.from(b,d,v);const g=w(p);if(g)return g;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof p[Symbol.toPrimitive]=="function")return c.from(p[Symbol.toPrimitive]("string"),d,v);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p)}c.from=function(p,d,v){return s(p,d,v)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function u(p){if(typeof p!="number")throw new TypeError('"size" argument must be of type number');if(p<0)throw new RangeError('The value "'+p+'" is invalid for option "size"')}function l(p,d,v){return u(p),p<=0?a(p):d!==void 0?typeof v=="string"?a(p).fill(d,v):a(p).fill(d):a(p)}c.alloc=function(p,d,v){return l(p,d,v)};function h(p){return u(p),a(p<0?0:S(p)|0)}c.allocUnsafe=function(p){return h(p)},c.allocUnsafeSlow=function(p){return h(p)};function _(p,d){if((typeof d!="string"||d==="")&&(d="utf8"),!c.isEncoding(d))throw new TypeError("Unknown encoding: "+d);const v=R(p,d)|0;let b=a(v);const g=b.write(p,d);return g!==v&&(b=b.slice(0,g)),b}function y(p){const d=p.length<0?0:S(p.length)|0,v=a(d);for(let b=0;b<d;b+=1)v[b]=p[b]&255;return v}function m(p){if(Ge(p,Uint8Array)){const d=new Uint8Array(p);return E(d.buffer,d.byteOffset,d.byteLength)}return y(p)}function E(p,d,v){if(d<0||p.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<d+(v||0))throw new RangeError('"length" is outside of buffer bounds');let b;return d===void 0&&v===void 0?b=new Uint8Array(p):v===void 0?b=new Uint8Array(p,d):b=new Uint8Array(p,d,v),Object.setPrototypeOf(b,c.prototype),b}function w(p){if(c.isBuffer(p)){const d=S(p.length)|0,v=a(d);return v.length===0||p.copy(v,0,0,d),v}if(p.length!==void 0)return typeof p.length!="number"||mr(p.length)?a(0):y(p);if(p.type==="Buffer"&&Array.isArray(p.data))return y(p.data)}function S(p){if(p>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return p|0}function A(p){return+p!=p&&(p=0),c.alloc(+p)}c.isBuffer=function(d){return d!=null&&d._isBuffer===!0&&d!==c.prototype},c.compare=function(d,v){if(Ge(d,Uint8Array)&&(d=c.from(d,d.offset,d.byteLength)),Ge(v,Uint8Array)&&(v=c.from(v,v.offset,v.byteLength)),!c.isBuffer(d)||!c.isBuffer(v))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===v)return 0;let b=d.length,g=v.length;for(let T=0,P=Math.min(b,g);T<P;++T)if(d[T]!==v[T]){b=d[T],g=v[T];break}return b<g?-1:g<b?1:0},c.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(d,v){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return c.alloc(0);let b;if(v===void 0)for(v=0,b=0;b<d.length;++b)v+=d[b].length;const g=c.allocUnsafe(v);let T=0;for(b=0;b<d.length;++b){let P=d[b];if(Ge(P,Uint8Array))T+P.length>g.length?(c.isBuffer(P)||(P=c.from(P)),P.copy(g,T)):Uint8Array.prototype.set.call(g,P,T);else if(c.isBuffer(P))P.copy(g,T);else throw new TypeError('"list" argument must be an Array of Buffers');T+=P.length}return g};function R(p,d){if(c.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||Ge(p,ArrayBuffer))return p.byteLength;if(typeof p!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof p);const v=p.length,b=arguments.length>2&&arguments[2]===!0;if(!b&&v===0)return 0;let g=!1;for(;;)switch(d){case"ascii":case"latin1":case"binary":return v;case"utf8":case"utf-8":return br(p).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v*2;case"hex":return v>>>1;case"base64":return fn(p).length;default:if(g)return b?-1:br(p).length;d=(""+d).toLowerCase(),g=!0}}c.byteLength=R;function I(p,d,v){let b=!1;if((d===void 0||d<0)&&(d=0),d>this.length||((v===void 0||v>this.length)&&(v=this.length),v<=0)||(v>>>=0,d>>>=0,v<=d))return"";for(p||(p="utf8");;)switch(p){case"hex":return q(this,d,v);case"utf8":case"utf-8":return qe(this,d,v);case"ascii":return W(this,d,v);case"latin1":case"binary":return ce(this,d,v);case"base64":return _e(this,d,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,d,v);default:if(b)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase(),b=!0}}c.prototype._isBuffer=!0;function j(p,d,v){const b=p[d];p[d]=p[v],p[v]=b}c.prototype.swap16=function(){const d=this.length;if(d%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let v=0;v<d;v+=2)j(this,v,v+1);return this},c.prototype.swap32=function(){const d=this.length;if(d%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let v=0;v<d;v+=4)j(this,v,v+3),j(this,v+1,v+2);return this},c.prototype.swap64=function(){const d=this.length;if(d%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let v=0;v<d;v+=8)j(this,v,v+7),j(this,v+1,v+6),j(this,v+2,v+5),j(this,v+3,v+4);return this},c.prototype.toString=function(){const d=this.length;return d===0?"":arguments.length===0?qe(this,0,d):I.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(d){if(!c.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d?!0:c.compare(this,d)===0},c.prototype.inspect=function(){let d="";const v=e.INSPECT_MAX_BYTES;return d=this.toString("hex",0,v).replace(/(.{2})/g,"$1 ").trim(),this.length>v&&(d+=" ... "),"<Buffer "+d+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(d,v,b,g,T){if(Ge(d,Uint8Array)&&(d=c.from(d,d.offset,d.byteLength)),!c.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(v===void 0&&(v=0),b===void 0&&(b=d?d.length:0),g===void 0&&(g=0),T===void 0&&(T=this.length),v<0||b>d.length||g<0||T>this.length)throw new RangeError("out of range index");if(g>=T&&v>=b)return 0;if(g>=T)return-1;if(v>=b)return 1;if(v>>>=0,b>>>=0,g>>>=0,T>>>=0,this===d)return 0;let P=T-g,K=b-v;const de=Math.min(P,K),le=this.slice(g,T),he=d.slice(v,b);for(let oe=0;oe<de;++oe)if(le[oe]!==he[oe]){P=le[oe],K=he[oe];break}return P<K?-1:K<P?1:0};function M(p,d,v,b,g){if(p.length===0)return-1;if(typeof v=="string"?(b=v,v=0):v>2147483647?v=2147483647:v<-2147483648&&(v=-2147483648),v=+v,mr(v)&&(v=g?0:p.length-1),v<0&&(v=p.length+v),v>=p.length){if(g)return-1;v=p.length-1}else if(v<0)if(g)v=0;else return-1;if(typeof d=="string"&&(d=c.from(d,b)),c.isBuffer(d))return d.length===0?-1:G(p,d,v,b,g);if(typeof d=="number")return d=d&255,typeof Uint8Array.prototype.indexOf=="function"?g?Uint8Array.prototype.indexOf.call(p,d,v):Uint8Array.prototype.lastIndexOf.call(p,d,v):G(p,[d],v,b,g);throw new TypeError("val must be string, number or Buffer")}function G(p,d,v,b,g){let T=1,P=p.length,K=d.length;if(b!==void 0&&(b=String(b).toLowerCase(),b==="ucs2"||b==="ucs-2"||b==="utf16le"||b==="utf-16le")){if(p.length<2||d.length<2)return-1;T=2,P/=2,K/=2,v/=2}function de(he,oe){return T===1?he[oe]:he.readUInt16BE(oe*T)}let le;if(g){let he=-1;for(le=v;le<P;le++)if(de(p,le)===de(d,he===-1?0:le-he)){if(he===-1&&(he=le),le-he+1===K)return he*T}else he!==-1&&(le-=le-he),he=-1}else for(v+K>P&&(v=P-K),le=v;le>=0;le--){let he=!0;for(let oe=0;oe<K;oe++)if(de(p,le+oe)!==de(d,oe)){he=!1;break}if(he)return le}return-1}c.prototype.includes=function(d,v,b){return this.indexOf(d,v,b)!==-1},c.prototype.indexOf=function(d,v,b){return M(this,d,v,b,!0)},c.prototype.lastIndexOf=function(d,v,b){return M(this,d,v,b,!1)};function H(p,d,v,b){v=Number(v)||0;const g=p.length-v;b?(b=Number(b),b>g&&(b=g)):b=g;const T=d.length;b>T/2&&(b=T/2);let P;for(P=0;P<b;++P){const K=parseInt(d.substr(P*2,2),16);if(mr(K))return P;p[v+P]=K}return P}function ie(p,d,v,b){return xt(br(d,p.length-v),p,v,b)}function ue(p,d,v,b){return xt(Oi(d),p,v,b)}function pe(p,d,v,b){return xt(fn(d),p,v,b)}function J(p,d,v,b){return xt(Ei(d,p.length-v),p,v,b)}c.prototype.write=function(d,v,b,g){if(v===void 0)g="utf8",b=this.length,v=0;else if(b===void 0&&typeof v=="string")g=v,b=this.length,v=0;else if(isFinite(v))v=v>>>0,isFinite(b)?(b=b>>>0,g===void 0&&(g="utf8")):(g=b,b=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const T=this.length-v;if((b===void 0||b>T)&&(b=T),d.length>0&&(b<0||v<0)||v>this.length)throw new RangeError("Attempt to write outside buffer bounds");g||(g="utf8");let P=!1;for(;;)switch(g){case"hex":return H(this,d,v,b);case"utf8":case"utf-8":return ie(this,d,v,b);case"ascii":case"latin1":case"binary":return ue(this,d,v,b);case"base64":return pe(this,d,v,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,d,v,b);default:if(P)throw new TypeError("Unknown encoding: "+g);g=(""+g).toLowerCase(),P=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _e(p,d,v){return d===0&&v===p.length?r.fromByteArray(p):r.fromByteArray(p.slice(d,v))}function qe(p,d,v){v=Math.min(p.length,v);const b=[];let g=d;for(;g<v;){const T=p[g];let P=null,K=T>239?4:T>223?3:T>191?2:1;if(g+K<=v){let de,le,he,oe;switch(K){case 1:T<128&&(P=T);break;case 2:de=p[g+1],(de&192)===128&&(oe=(T&31)<<6|de&63,oe>127&&(P=oe));break;case 3:de=p[g+1],le=p[g+2],(de&192)===128&&(le&192)===128&&(oe=(T&15)<<12|(de&63)<<6|le&63,oe>2047&&(oe<55296||oe>57343)&&(P=oe));break;case 4:de=p[g+1],le=p[g+2],he=p[g+3],(de&192)===128&&(le&192)===128&&(he&192)===128&&(oe=(T&15)<<18|(de&63)<<12|(le&63)<<6|he&63,oe>65535&&oe<1114112&&(P=oe))}}P===null?(P=65533,K=1):P>65535&&(P-=65536,b.push(P>>>10&1023|55296),P=56320|P&1023),b.push(P),g+=K}return re(b)}const Y=4096;function re(p){const d=p.length;if(d<=Y)return String.fromCharCode.apply(String,p);let v="",b=0;for(;b<d;)v+=String.fromCharCode.apply(String,p.slice(b,b+=Y));return v}function W(p,d,v){let b="";v=Math.min(p.length,v);for(let g=d;g<v;++g)b+=String.fromCharCode(p[g]&127);return b}function ce(p,d,v){let b="";v=Math.min(p.length,v);for(let g=d;g<v;++g)b+=String.fromCharCode(p[g]);return b}function q(p,d,v){const b=p.length;(!d||d<0)&&(d=0),(!v||v<0||v>b)&&(v=b);let g="";for(let T=d;T<v;++T)g+=wi[p[T]];return g}function D(p,d,v){const b=p.slice(d,v);let g="";for(let T=0;T<b.length-1;T+=2)g+=String.fromCharCode(b[T]+b[T+1]*256);return g}c.prototype.slice=function(d,v){const b=this.length;d=~~d,v=v===void 0?b:~~v,d<0?(d+=b,d<0&&(d=0)):d>b&&(d=b),v<0?(v+=b,v<0&&(v=0)):v>b&&(v=b),v<d&&(v=d);const g=this.subarray(d,v);return Object.setPrototypeOf(g,c.prototype),g};function x(p,d,v){if(p%1!==0||p<0)throw new RangeError("offset is not uint");if(p+d>v)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(d,v,b){d=d>>>0,v=v>>>0,b||x(d,v,this.length);let g=this[d],T=1,P=0;for(;++P<v&&(T*=256);)g+=this[d+P]*T;return g},c.prototype.readUintBE=c.prototype.readUIntBE=function(d,v,b){d=d>>>0,v=v>>>0,b||x(d,v,this.length);let g=this[d+--v],T=1;for(;v>0&&(T*=256);)g+=this[d+--v]*T;return g},c.prototype.readUint8=c.prototype.readUInt8=function(d,v){return d=d>>>0,v||x(d,1,this.length),this[d]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(d,v){return d=d>>>0,v||x(d,2,this.length),this[d]|this[d+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(d,v){return d=d>>>0,v||x(d,2,this.length),this[d]<<8|this[d+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(d,v){return d=d>>>0,v||x(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+this[d+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(d,v){return d=d>>>0,v||x(d,4,this.length),this[d]*16777216+(this[d+1]<<16|this[d+2]<<8|this[d+3])},c.prototype.readBigUInt64LE=Xe(function(d){d=d>>>0,ze(d,"offset");const v=this[d],b=this[d+7];(v===void 0||b===void 0)&&ot(d,this.length-8);const g=v+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24,T=this[++d]+this[++d]*2**8+this[++d]*2**16+b*2**24;return BigInt(g)+(BigInt(T)<<BigInt(32))}),c.prototype.readBigUInt64BE=Xe(function(d){d=d>>>0,ze(d,"offset");const v=this[d],b=this[d+7];(v===void 0||b===void 0)&&ot(d,this.length-8);const g=v*2**24+this[++d]*2**16+this[++d]*2**8+this[++d],T=this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+b;return(BigInt(g)<<BigInt(32))+BigInt(T)}),c.prototype.readIntLE=function(d,v,b){d=d>>>0,v=v>>>0,b||x(d,v,this.length);let g=this[d],T=1,P=0;for(;++P<v&&(T*=256);)g+=this[d+P]*T;return T*=128,g>=T&&(g-=Math.pow(2,8*v)),g},c.prototype.readIntBE=function(d,v,b){d=d>>>0,v=v>>>0,b||x(d,v,this.length);let g=v,T=1,P=this[d+--g];for(;g>0&&(T*=256);)P+=this[d+--g]*T;return T*=128,P>=T&&(P-=Math.pow(2,8*v)),P},c.prototype.readInt8=function(d,v){return d=d>>>0,v||x(d,1,this.length),this[d]&128?(255-this[d]+1)*-1:this[d]},c.prototype.readInt16LE=function(d,v){d=d>>>0,v||x(d,2,this.length);const b=this[d]|this[d+1]<<8;return b&32768?b|4294901760:b},c.prototype.readInt16BE=function(d,v){d=d>>>0,v||x(d,2,this.length);const b=this[d+1]|this[d]<<8;return b&32768?b|4294901760:b},c.prototype.readInt32LE=function(d,v){return d=d>>>0,v||x(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},c.prototype.readInt32BE=function(d,v){return d=d>>>0,v||x(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},c.prototype.readBigInt64LE=Xe(function(d){d=d>>>0,ze(d,"offset");const v=this[d],b=this[d+7];(v===void 0||b===void 0)&&ot(d,this.length-8);const g=this[d+4]+this[d+5]*2**8+this[d+6]*2**16+(b<<24);return(BigInt(g)<<BigInt(32))+BigInt(v+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24)}),c.prototype.readBigInt64BE=Xe(function(d){d=d>>>0,ze(d,"offset");const v=this[d],b=this[d+7];(v===void 0||b===void 0)&&ot(d,this.length-8);const g=(v<<24)+this[++d]*2**16+this[++d]*2**8+this[++d];return(BigInt(g)<<BigInt(32))+BigInt(this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+b)}),c.prototype.readFloatLE=function(d,v){return d=d>>>0,v||x(d,4,this.length),t.read(this,d,!0,23,4)},c.prototype.readFloatBE=function(d,v){return d=d>>>0,v||x(d,4,this.length),t.read(this,d,!1,23,4)},c.prototype.readDoubleLE=function(d,v){return d=d>>>0,v||x(d,8,this.length),t.read(this,d,!0,52,8)},c.prototype.readDoubleBE=function(d,v){return d=d>>>0,v||x(d,8,this.length),t.read(this,d,!1,52,8)};function Q(p,d,v,b,g,T){if(!c.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>g||d<T)throw new RangeError('"value" argument is out of bounds');if(v+b>p.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(d,v,b,g){if(d=+d,v=v>>>0,b=b>>>0,!g){const K=Math.pow(2,8*b)-1;Q(this,d,v,b,K,0)}let T=1,P=0;for(this[v]=d&255;++P<b&&(T*=256);)this[v+P]=d/T&255;return v+b},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(d,v,b,g){if(d=+d,v=v>>>0,b=b>>>0,!g){const K=Math.pow(2,8*b)-1;Q(this,d,v,b,K,0)}let T=b-1,P=1;for(this[v+T]=d&255;--T>=0&&(P*=256);)this[v+T]=d/P&255;return v+b},c.prototype.writeUint8=c.prototype.writeUInt8=function(d,v,b){return d=+d,v=v>>>0,b||Q(this,d,v,1,255,0),this[v]=d&255,v+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(d,v,b){return d=+d,v=v>>>0,b||Q(this,d,v,2,65535,0),this[v]=d&255,this[v+1]=d>>>8,v+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(d,v,b){return d=+d,v=v>>>0,b||Q(this,d,v,2,65535,0),this[v]=d>>>8,this[v+1]=d&255,v+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(d,v,b){return d=+d,v=v>>>0,b||Q(this,d,v,4,4294967295,0),this[v+3]=d>>>24,this[v+2]=d>>>16,this[v+1]=d>>>8,this[v]=d&255,v+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(d,v,b){return d=+d,v=v>>>0,b||Q(this,d,v,4,4294967295,0),this[v]=d>>>24,this[v+1]=d>>>16,this[v+2]=d>>>8,this[v+3]=d&255,v+4};function ye(p,d,v,b,g){He(d,b,g,p,v,7);let T=Number(d&BigInt(4294967295));p[v++]=T,T=T>>8,p[v++]=T,T=T>>8,p[v++]=T,T=T>>8,p[v++]=T;let P=Number(d>>BigInt(32)&BigInt(4294967295));return p[v++]=P,P=P>>8,p[v++]=P,P=P>>8,p[v++]=P,P=P>>8,p[v++]=P,v}function U(p,d,v,b,g){He(d,b,g,p,v,7);let T=Number(d&BigInt(4294967295));p[v+7]=T,T=T>>8,p[v+6]=T,T=T>>8,p[v+5]=T,T=T>>8,p[v+4]=T;let P=Number(d>>BigInt(32)&BigInt(4294967295));return p[v+3]=P,P=P>>8,p[v+2]=P,P=P>>8,p[v+1]=P,P=P>>8,p[v]=P,v+8}c.prototype.writeBigUInt64LE=Xe(function(d,v=0){return ye(this,d,v,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Xe(function(d,v=0){return U(this,d,v,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(d,v,b,g){if(d=+d,v=v>>>0,!g){const de=Math.pow(2,8*b-1);Q(this,d,v,b,de-1,-de)}let T=0,P=1,K=0;for(this[v]=d&255;++T<b&&(P*=256);)d<0&&K===0&&this[v+T-1]!==0&&(K=1),this[v+T]=(d/P>>0)-K&255;return v+b},c.prototype.writeIntBE=function(d,v,b,g){if(d=+d,v=v>>>0,!g){const de=Math.pow(2,8*b-1);Q(this,d,v,b,de-1,-de)}let T=b-1,P=1,K=0;for(this[v+T]=d&255;--T>=0&&(P*=256);)d<0&&K===0&&this[v+T+1]!==0&&(K=1),this[v+T]=(d/P>>0)-K&255;return v+b},c.prototype.writeInt8=function(d,v,b){return d=+d,v=v>>>0,b||Q(this,d,v,1,127,-128),d<0&&(d=255+d+1),this[v]=d&255,v+1},c.prototype.writeInt16LE=function(d,v,b){return d=+d,v=v>>>0,b||Q(this,d,v,2,32767,-32768),this[v]=d&255,this[v+1]=d>>>8,v+2},c.prototype.writeInt16BE=function(d,v,b){return d=+d,v=v>>>0,b||Q(this,d,v,2,32767,-32768),this[v]=d>>>8,this[v+1]=d&255,v+2},c.prototype.writeInt32LE=function(d,v,b){return d=+d,v=v>>>0,b||Q(this,d,v,4,2147483647,-2147483648),this[v]=d&255,this[v+1]=d>>>8,this[v+2]=d>>>16,this[v+3]=d>>>24,v+4},c.prototype.writeInt32BE=function(d,v,b){return d=+d,v=v>>>0,b||Q(this,d,v,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),this[v]=d>>>24,this[v+1]=d>>>16,this[v+2]=d>>>8,this[v+3]=d&255,v+4},c.prototype.writeBigInt64LE=Xe(function(d,v=0){return ye(this,d,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Xe(function(d,v=0){return U(this,d,v,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function be(p,d,v,b,g,T){if(v+b>p.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("Index out of range")}function O(p,d,v,b,g){return d=+d,v=v>>>0,g||be(p,d,v,4),t.write(p,d,v,b,23,4),v+4}c.prototype.writeFloatLE=function(d,v,b){return O(this,d,v,!0,b)},c.prototype.writeFloatBE=function(d,v,b){return O(this,d,v,!1,b)};function C(p,d,v,b,g){return d=+d,v=v>>>0,g||be(p,d,v,8),t.write(p,d,v,b,52,8),v+8}c.prototype.writeDoubleLE=function(d,v,b){return C(this,d,v,!0,b)},c.prototype.writeDoubleBE=function(d,v,b){return C(this,d,v,!1,b)},c.prototype.copy=function(d,v,b,g){if(!c.isBuffer(d))throw new TypeError("argument should be a Buffer");if(b||(b=0),!g&&g!==0&&(g=this.length),v>=d.length&&(v=d.length),v||(v=0),g>0&&g<b&&(g=b),g===b||d.length===0||this.length===0)return 0;if(v<0)throw new RangeError("targetStart out of bounds");if(b<0||b>=this.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("sourceEnd out of bounds");g>this.length&&(g=this.length),d.length-v<g-b&&(g=d.length-v+b);const T=g-b;return this===d&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(v,b,g):Uint8Array.prototype.set.call(d,this.subarray(b,g),v),T},c.prototype.fill=function(d,v,b,g){if(typeof d=="string"){if(typeof v=="string"?(g=v,v=0,b=this.length):typeof b=="string"&&(g=b,b=this.length),g!==void 0&&typeof g!="string")throw new TypeError("encoding must be a string");if(typeof g=="string"&&!c.isEncoding(g))throw new TypeError("Unknown encoding: "+g);if(d.length===1){const P=d.charCodeAt(0);(g==="utf8"&&P<128||g==="latin1")&&(d=P)}}else typeof d=="number"?d=d&255:typeof d=="boolean"&&(d=Number(d));if(v<0||this.length<v||this.length<b)throw new RangeError("Out of range index");if(b<=v)return this;v=v>>>0,b=b===void 0?this.length:b>>>0,d||(d=0);let T;if(typeof d=="number")for(T=v;T<b;++T)this[T]=d;else{const P=c.isBuffer(d)?d:c.from(d,g),K=P.length;if(K===0)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for(T=0;T<b-v;++T)this[T+v]=P[T%K]}return this};const N={};function L(p,d,v){N[p]=class extends v{constructor(){super(),Object.defineProperty(this,"message",{value:d.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${p}]`,this.stack,delete this.name}get code(){return p}set code(g){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:g,writable:!0})}toString(){return`${this.name} [${p}]: ${this.message}`}}}L("ERR_BUFFER_OUT_OF_BOUNDS",function(p){return p?`${p} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),L("ERR_INVALID_ARG_TYPE",function(p,d){return`The "${p}" argument must be of type number. Received type ${typeof d}`},TypeError),L("ERR_OUT_OF_RANGE",function(p,d,v){let b=`The value of "${p}" is out of range.`,g=v;return Number.isInteger(v)&&Math.abs(v)>2**32?g=Z(String(v)):typeof v=="bigint"&&(g=String(v),(v>BigInt(2)**BigInt(32)||v<-(BigInt(2)**BigInt(32)))&&(g=Z(g)),g+="n"),b+=` It must be ${d}. Received ${g}`,b},RangeError);function Z(p){let d="",v=p.length;const b=p[0]==="-"?1:0;for(;v>=b+4;v-=3)d=`_${p.slice(v-3,v)}${d}`;return`${p.slice(0,v)}${d}`}function Ie(p,d,v){ze(d,"offset"),(p[d]===void 0||p[d+v]===void 0)&&ot(d,p.length-(v+1))}function He(p,d,v,b,g,T){if(p>v||p<d){const P=typeof d=="bigint"?"n":"";let K;throw d===0||d===BigInt(0)?K=`>= 0${P} and < 2${P} ** ${(T+1)*8}${P}`:K=`>= -(2${P} ** ${(T+1)*8-1}${P}) and < 2 ** ${(T+1)*8-1}${P}`,new N.ERR_OUT_OF_RANGE("value",K,p)}Ie(b,g,T)}function ze(p,d){if(typeof p!="number")throw new N.ERR_INVALID_ARG_TYPE(d,"number",p)}function ot(p,d,v){throw Math.floor(p)!==p?(ze(p,v),new N.ERR_OUT_OF_RANGE("offset","an integer",p)):d<0?new N.ERR_BUFFER_OUT_OF_BOUNDS:new N.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${d}`,p)}const mi=/[^+/0-9A-Za-z-_]/g;function gi(p){if(p=p.split("=")[0],p=p.trim().replace(mi,""),p.length<2)return"";for(;p.length%4!==0;)p=p+"=";return p}function br(p,d){d=d||1/0;let v;const b=p.length;let g=null;const T=[];for(let P=0;P<b;++P){if(v=p.charCodeAt(P),v>55295&&v<57344){if(!g){if(v>56319){(d-=3)>-1&&T.push(239,191,189);continue}else if(P+1===b){(d-=3)>-1&&T.push(239,191,189);continue}g=v;continue}if(v<56320){(d-=3)>-1&&T.push(239,191,189),g=v;continue}v=(g-55296<<10|v-56320)+65536}else g&&(d-=3)>-1&&T.push(239,191,189);if(g=null,v<128){if((d-=1)<0)break;T.push(v)}else if(v<2048){if((d-=2)<0)break;T.push(v>>6|192,v&63|128)}else if(v<65536){if((d-=3)<0)break;T.push(v>>12|224,v>>6&63|128,v&63|128)}else if(v<1114112){if((d-=4)<0)break;T.push(v>>18|240,v>>12&63|128,v>>6&63|128,v&63|128)}else throw new Error("Invalid code point")}return T}function Oi(p){const d=[];for(let v=0;v<p.length;++v)d.push(p.charCodeAt(v)&255);return d}function Ei(p,d){let v,b,g;const T=[];for(let P=0;P<p.length&&!((d-=2)<0);++P)v=p.charCodeAt(P),b=v>>8,g=v%256,T.push(g),T.push(b);return T}function fn(p){return r.toByteArray(gi(p))}function xt(p,d,v,b){let g;for(g=0;g<b&&!(g+v>=d.length||g>=p.length);++g)d[g+v]=p[g];return g}function Ge(p,d){return p instanceof d||p!=null&&p.constructor!=null&&p.constructor.name!=null&&p.constructor.name===d.name}function mr(p){return p!==p}const wi=function(){const p="0123456789abcdef",d=new Array(256);for(let v=0;v<16;++v){const b=v*16;for(let g=0;g<16;++g)d[b+g]=p[v]+p[g]}return d}();function Xe(p){return typeof BigInt>"u"?Ti:p}function Ti(){throw new Error("BigInt not supported")}})(hs);var sn={},_s={},B2=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(_s,"__esModule",{value:!0});var Xb=function(){function e(r){this.position=0,this.length=r}return e.prototype.getUInt8=function(r){throw new Error("Not implemented")},e.prototype.getInt8=function(r){throw new Error("Not implemented")},e.prototype.getFloat64=function(r){throw new Error("Not implemented")},e.prototype.putUInt8=function(r,t){throw new Error("Not implemented")},e.prototype.putInt8=function(r,t){throw new Error("Not implemented")},e.prototype.putFloat64=function(r,t){throw new Error("Not implemented")},e.prototype.getInt16=function(r){return this.getInt8(r)<<8|this.getUInt8(r+1)},e.prototype.getUInt16=function(r){return this.getUInt8(r)<<8|this.getUInt8(r+1)},e.prototype.getInt32=function(r){return this.getInt8(r)<<24|this.getUInt8(r+1)<<16|this.getUInt8(r+2)<<8|this.getUInt8(r+3)},e.prototype.getUInt32=function(r){return this.getUInt8(r)<<24|this.getUInt8(r+1)<<16|this.getUInt8(r+2)<<8|this.getUInt8(r+3)},e.prototype.getInt64=function(r){return this.getInt8(r)<<56|this.getUInt8(r+1)<<48|this.getUInt8(r+2)<<40|this.getUInt8(r+3)<<32|this.getUInt8(r+4)<<24|this.getUInt8(r+5)<<16|this.getUInt8(r+6)<<8|this.getUInt8(r+7)},e.prototype.getSlice=function(r,t){return new W2(r,t,this)},e.prototype.putInt16=function(r,t){this.putInt8(r,t>>8),this.putUInt8(r+1,t&255)},e.prototype.putUInt16=function(r,t){this.putUInt8(r,t>>8&255),this.putUInt8(r+1,t&255)},e.prototype.putInt32=function(r,t){this.putInt8(r,t>>24),this.putUInt8(r+1,t>>16&255),this.putUInt8(r+2,t>>8&255),this.putUInt8(r+3,t&255)},e.prototype.putUInt32=function(r,t){this.putUInt8(r,t>>24&255),this.putUInt8(r+1,t>>16&255),this.putUInt8(r+2,t>>8&255),this.putUInt8(r+3,t&255)},e.prototype.putInt64=function(r,t){this.putInt8(r,t>>48),this.putUInt8(r+1,t>>42&255),this.putUInt8(r+2,t>>36&255),this.putUInt8(r+3,t>>30&255),this.putUInt8(r+4,t>>24&255),this.putUInt8(r+5,t>>16&255),this.putUInt8(r+6,t>>8&255),this.putUInt8(r+7,t&255)},e.prototype.putBytes=function(r,t){for(var n=0,i=t.remaining();n<i;n++)this.putUInt8(r+n,t.readUInt8())},e.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},e.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},e.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},e.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},e.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},e.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},e.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},e.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},e.prototype.writeUInt8=function(r){this.putUInt8(this._updatePos(1),r)},e.prototype.writeInt8=function(r){this.putInt8(this._updatePos(1),r)},e.prototype.writeInt16=function(r){this.putInt16(this._updatePos(2),r)},e.prototype.writeInt32=function(r){this.putInt32(this._updatePos(4),r)},e.prototype.writeUInt32=function(r){this.putUInt32(this._updatePos(4),r)},e.prototype.writeInt64=function(r){this.putInt64(this._updatePos(8),r)},e.prototype.writeFloat64=function(r){this.putFloat64(this._updatePos(8),r)},e.prototype.writeBytes=function(r){this.putBytes(this._updatePos(r.remaining()),r)},e.prototype.readSlice=function(r){return this.getSlice(this._updatePos(r),r)},e.prototype._updatePos=function(r){var t=this.position;return this.position+=r,t},e.prototype.remaining=function(){return this.length-this.position},e.prototype.hasRemaining=function(){return this.remaining()>0},e.prototype.reset=function(){this.position=0},e.prototype.toString=function(){return this.constructor.name+"( position="+this.position+` )
  `+this.toHex()},e.prototype.toHex=function(){for(var r="",t=0;t<this.length;t++){var n=this.getUInt8(t).toString(16);n.length===1&&(n="0"+n),r+=n,t!==this.length-1&&(r+=" ")}return r},e}();_s.default=Xb;var W2=function(e){B2(r,e);function r(t,n,i){var o=e.call(this,n)||this;return o._start=t,o._inner=i,o}return r.prototype.putUInt8=function(t,n){this._inner.putUInt8(this._start+t,n)},r.prototype.getUInt8=function(t){return this._inner.getUInt8(this._start+t)},r.prototype.putInt8=function(t,n){this._inner.putInt8(this._start+t,n)},r.prototype.putFloat64=function(t,n){this._inner.putFloat64(this._start+t,n)},r.prototype.getInt8=function(t){return this._inner.getInt8(this._start+t)},r.prototype.getFloat64=function(t){return this._inner.getFloat64(this._start+t)},r}(Xb),x2=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sn,"__esModule",{value:!0});sn.BaseBuffer=void 0;var Jb=x2(_s);sn.BaseBuffer=Jb.default;sn.default=Jb.default;var V2=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),em=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.alloc=void 0;var Ru=em(hs),q2=em(sn),tm=function(e){V2(r,e);function r(t){var n=this,i=z2(t);return n=e.call(this,i.length)||this,n._buffer=i,n}return r.prototype.getUInt8=function(t){return this._buffer.readUInt8(t)},r.prototype.getInt8=function(t){return this._buffer.readInt8(t)},r.prototype.getFloat64=function(t){return this._buffer.readDoubleBE(t)},r.prototype.putUInt8=function(t,n){this._buffer.writeUInt8(n,t)},r.prototype.putInt8=function(t,n){this._buffer.writeInt8(n,t)},r.prototype.putFloat64=function(t,n){this._buffer.writeDoubleBE(n,t)},r.prototype.putBytes=function(t,n){if(n instanceof r){var i=Math.min(n.length-n.position,this.length-t);n._buffer.copy(this._buffer,t,n.position,n.position+i),n.position+=i}else e.prototype.putBytes.call(this,t,n)},r.prototype.getSlice=function(t,n){return new r(this._buffer.slice(t,t+n))},r}(q2.default);Ut.default=tm;function H2(e){return new tm(e)}Ut.alloc=H2;function z2(e){return e instanceof Ru.default.Buffer?e:typeof e=="number"&&typeof Ru.default.Buffer.alloc=="function"?Ru.default.Buffer.alloc(e):new Ru.default.Buffer(e)}var G2=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jd,"__esModule",{value:!0});var V_=G2(Ut),gn=V,rm=gn.internal.util,nm=rm.ENCRYPTION_OFF,Y2=rm.ENCRYPTION_ON,q_=1,K2=3,Z2=function(){function e(r,t,n){t===void 0&&(t=aF),n===void 0&&(n=function(u){return new WebSocket(u)});var i=this;this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=r,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._receiveTimeoutId=null,this._closingPromise=null;var o=tF(r,t),a=o.scheme,c=o.error;if(c){this._error=c;return}this._ws=Q2(a,r.address,n),this._ws.binaryType="arraybuffer";var s=this;this._ws.onclose=function(u){u&&!u.wasClean&&s._handleConnectionError(),s._open=!1},this._ws.onopen=function(){s._clearConnectionTimeout();var u=s._pending;s._pending=null;for(var l=0;l<u.length;l++)s.write(u[l])},this._ws.onmessage=function(u){if(i._resetTimeout(),s.onmessage){var l=new V_.default(u.data);s.onmessage(l)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}return e.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired){this._error=(0,gn.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),this.onerror&&this.onerror(this._error);return}this._open&&!this._timedout&&(this._error=(0,gn.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},e.prototype.write=function(r){if(this._pending!==null)this._pending.push(r);else if(r instanceof V_.default)try{this._ws.send(r._buffer)}catch(t){if(this._ws.readyState!==q_)this._handleConnectionError();else throw t}else throw(0,gn.newError)("Don't know how to send buffer: "+r)},e.prototype.close=function(){var r=this;return this._closingPromise===null&&(this._closingPromise=new Promise(function(t,n){r._clearConnectionTimeout(),r._ws&&r._ws.readyState!==K2?(r._open=!1,r.stopReceiveTimeout(),r._ws.onclose=function(){t()},r._ws.close()):t()})),this._closingPromise},e.prototype.setupReceiveTimeout=function(r){this._receiveTimeout=r},e.prototype.stopReceiveTimeout=function(){this._receiveTimeout!==null&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,this._receiveTimeoutId!=null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=null)},e.prototype.startReceiveTimeout=function(){this._open&&this._receiveTimeout!==null&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._resetTimeout())},e.prototype._resetTimeout=function(){var r=this;this._receiveTimeoutStarted&&(this._receiveTimeoutId!==null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=setTimeout(function(){r._receiveTimeoutId=null,r._timedout=!0,r.stopReceiveTimeout(),r._error=(0,gn.newError)("Connection lost. Server didn't respond in ".concat(r._receiveTimeout,"ms"),r._config.connectionErrorCode),r.close(),r.onerror&&r.onerror(r._error)},this._receiveTimeout))},e.prototype._setupConnectionTimeout=function(){var r=this,t=this._config.connectionTimeout;if(t){var n=this._ws;return setTimeout(function(){n.readyState!==q_&&(r._connectionTimeoutFired=!0,n.close())},t)}return null},e.prototype._clearConnectionTimeout=function(){var r=this._connectionTimeoutId;(r||r===0)&&(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(r))},e}();Jd.default=Z2;function Q2(e,r,t){var n=e+"://"+r.asHostPort();try{return t(n)}catch(o){if(X2(o,r)){var i=eF(e,r);return t(i)}else throw o}}function X2(e,r){return e.name==="SyntaxError"&&J2(r.asHostPort())}function J2(e){return e.charAt(0)==="["&&e.indexOf("]")!==-1}function eF(e,r){var t=r.host().replace(/:/g,"-"),n=t.replace("%","s"),i=n+".ipv6-literal.net";return"".concat(e,"://").concat(i,":").concat(r.port())}function tF(e,r){var t=rF(e),n=nF(e),i=e.trust,o=iF(r);if(oF(t,n,o),n)return{scheme:"ws",error:null};if(o)return{scheme:"wss",error:null};if(t){if(!i||i==="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES")return{scheme:"wss",error:null};var a=(0,gn.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+i+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+nm+'"` in the driver configuration.');return{scheme:null,error:a}}return{scheme:"ws",error:null}}function rF(e){return e.encrypted===!0||e.encrypted===Y2}function nF(e){return e.encrypted===!1||e.encrypted===nm}function iF(e){var r=typeof e=="function"?e():"";return r&&r.toLowerCase().indexOf("https")>=0}function oF(e,r,t){t===null||(e&&!t?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):r&&t&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}function aF(){return typeof window<"u"&&window.location?window.location.protocol:null}var th={},uF=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(th,"__esModule",{value:!0});var cF=V,sF=cF.internal.resolver.BaseHostNameResolver,lF=function(e){uF(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.resolve=function(t){return this._resolveToItself(t)},r}(sF);th.default=lF;var rh={},fF=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(c,s)}u((n=n.apply(e,r||[])).next())})},dF=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(rh,"__esModule",{value:!0});rh.default={load:function(e){return fF(this,void 0,void 0,function(){return dF(this,function(r){return[2,e]})})}};var nh=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.ClientCertificatesLoader=Kt.HostNameResolver=Kt.Channel=void 0;var hF=nh(Jd),vF=nh(th),_F=nh(rh);Kt.Channel=hF.default;Kt.HostNameResolver=vF.default;Kt.ClientCertificatesLoader=_F.default;var kn={},ih={},pF=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ih,"__esModule",{value:!0});var yF=sn,bF=Ut,mF=function(e){pF(r,e);function r(t){for(var n=this,i=0,o=0;o<t.length;o++)i+=t[o].length;return n=e.call(this,i)||this,n._buffers=t,n}return r.prototype.getUInt8=function(t){for(var n=0;n<this._buffers.length;n++){var i=this._buffers[n];if(t>=i.length)t-=i.length;else return i.getUInt8(t)}},r.prototype.getInt8=function(t){for(var n=0;n<this._buffers.length;n++){var i=this._buffers[n];if(t>=i.length)t-=i.length;else return i.getInt8(t)}},r.prototype.getFloat64=function(t){for(var n=(0,bF.alloc)(8),i=0;i<8;i++)n.putUInt8(i,this.getUInt8(t+i));return n.getFloat64(0)},r}(yF.BaseBuffer);ih.default=mF;var gF=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),im=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(kn,"__esModule",{value:!0});kn.Dechunker=kn.Chunker=void 0;var OF=im(_s),H_=Ut,EF=im(ih),Au=2,wF=0,TF=1400,SF=function(e){gF(r,e);function r(t,n){var i=e.call(this,0)||this;return i._bufferSize=n||TF,i._ch=t,i._buffer=(0,H_.alloc)(i._bufferSize),i._currentChunkStart=0,i._chunkOpen=!1,i}return r.prototype.putUInt8=function(t,n){this._ensure(1),this._buffer.writeUInt8(n)},r.prototype.putInt8=function(t,n){this._ensure(1),this._buffer.writeInt8(n)},r.prototype.putFloat64=function(t,n){this._ensure(8),this._buffer.writeFloat64(n)},r.prototype.putBytes=function(t,n){for(;n.remaining()>0;)this._ensure(1),this._buffer.remaining()>n.remaining()?this._buffer.writeBytes(n):this._buffer.writeBytes(n.readSlice(this._buffer.remaining()));return this},r.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var t=this._buffer;this._buffer=null,this._ch.write(t.getSlice(0,t.position)),this._buffer=(0,H_.alloc)(this._bufferSize),this._chunkOpen=!1}return this},r.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<Au&&this.flush(),this._buffer.writeInt16(wF)},r.prototype._ensure=function(t){var n=this._chunkOpen?t:t+Au;this._buffer.remaining()<n&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+Au,this._chunkOpen=!0)},r.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var t=this._buffer.position-(this._currentChunkStart+Au);this._buffer.putUInt16(this._currentChunkStart,t),this._chunkOpen=!1}},r}(OF.default);kn.Chunker=SF;var PF=function(){function e(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return e.prototype.AWAITING_CHUNK=function(r){return r.remaining()>=2?this._onHeader(r.readUInt16()):(this._partialChunkHeader=r.readUInt8()<<8,this.IN_HEADER)},e.prototype.IN_HEADER=function(r){return this._onHeader((this._partialChunkHeader|r.readUInt8())&65535)},e.prototype.IN_CHUNK=function(r){return this._chunkSize<=r.remaining()?(this._currentMessage.push(r.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=r.remaining(),this._currentMessage.push(r.readSlice(r.remaining())),this.IN_CHUNK)},e.prototype.CLOSED=function(r){},e.prototype._onHeader=function(r){if(r===0){var t=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:t=this._currentMessage[0];break;default:t=new EF.default(this._currentMessage);break}return this._currentMessage=[],this.onmessage(t),this.AWAITING_CHUNK}else return this._chunkSize=r,this.IN_CHUNK},e.prototype.write=function(r){for(;r.hasRemaining();)this._state=this._state(r)},e}();kn.Dechunker=PF;var oh={};Object.defineProperty(oh,"__esModule",{value:!0});var ps=V,om=ps.internal.util,CF=om.ENCRYPTION_OFF,IF=om.ENCRYPTION_ON,RF=ps.error.SERVICE_UNAVAILABLE,z_=[null,void 0,!0,!1,IF,CF],G_=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"],AF=function(){function e(r,t,n,i){this.address=r,this.encrypted=jF(t),this.trust=MF(t),this.trustedCertificates=NF(t),this.knownHostsPath=$F(t),this.connectionErrorCode=n||RF,this.connectionTimeout=t.connectionTimeout,this.clientCertificate=i}return e}();oh.default=AF;function jF(e){var r=e.encrypted;if(z_.indexOf(r)===-1)throw(0,ps.newError)("Illegal value of the encrypted setting ".concat(r,". Expected one of ").concat(z_));return r}function MF(e){var r=e.trust;if(G_.indexOf(r)===-1)throw(0,ps.newError)("Illegal value of the trust setting ".concat(r,". Expected one of ").concat(G_));return r}function NF(e){return e.trustedCertificates||[]}function $F(e){return e.knownHosts||null}var ah={},am={},ud={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(e,r){var t=hs,n=t.Buffer;function i(a,c){for(var s in a)c[s]=a[s]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=t:(i(t,r),r.Buffer=o);function o(a,c,s){return n(a,c,s)}o.prototype=Object.create(n.prototype),i(n,o),o.from=function(a,c,s){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,c,s)},o.alloc=function(a,c,s){if(typeof a!="number")throw new TypeError("Argument must be a number");var u=n(a);return c!==void 0?typeof s=="string"?u.fill(c,s):u.fill(c):u.fill(0),u},o.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},o.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(a)}})(ud,ud.exports);var kF=ud.exports,uh=kF.Buffer,Y_=uh.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function DF(e){if(!e)return"utf8";for(var r;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(r)return;e=(""+e).toLowerCase(),r=!0}}function LF(e){var r=DF(e);if(typeof r!="string"&&(uh.isEncoding===Y_||!Y_(e)))throw new Error("Unknown encoding: "+e);return r||e}am.StringDecoder=su;function su(e){this.encoding=LF(e);var r;switch(this.encoding){case"utf16le":this.text=VF,this.end=qF,r=4;break;case"utf8":this.fillLast=BF,r=4;break;case"base64":this.text=HF,this.end=zF,r=3;break;default:this.write=GF,this.end=YF;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=uh.allocUnsafe(r)}su.prototype.write=function(e){if(e.length===0)return"";var r,t;if(this.lastNeed){if(r=this.fillLast(e),r===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<e.length?r?r+this.text(e,t):this.text(e,t):r||""};su.prototype.end=xF;su.prototype.text=WF;su.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function Tf(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function UF(e,r,t){var n=r.length-1;if(n<t)return 0;var i=Tf(r[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<t||i===-2?0:(i=Tf(r[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<t||i===-2?0:(i=Tf(r[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function FF(e,r,t){if((r[0]&192)!==128)return e.lastNeed=0,"";if(e.lastNeed>1&&r.length>1){if((r[1]&192)!==128)return e.lastNeed=1,"";if(e.lastNeed>2&&r.length>2&&(r[2]&192)!==128)return e.lastNeed=2,""}}function BF(e){var r=this.lastTotal-this.lastNeed,t=FF(this,e);if(t!==void 0)return t;if(this.lastNeed<=e.length)return e.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,r,0,e.length),this.lastNeed-=e.length}function WF(e,r){var t=UF(this,e,r);if(!this.lastNeed)return e.toString("utf8",r);this.lastTotal=t;var n=e.length-(t-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",r,n)}function xF(e){var r=e&&e.length?this.write(e):"";return this.lastNeed?r+"":r}function VF(e,r){if((e.length-r)%2===0){var t=e.toString("utf16le",r);if(t){var n=t.charCodeAt(t.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",r,e.length-1)}function qF(e){var r=e&&e.length?this.write(e):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,t)}return r}function HF(e,r){var t=(e.length-r)%3;return t===0?e.toString("base64",r):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",r,e.length-t))}function zF(e){var r=e&&e.length?this.write(e):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function GF(e){return e.toString(this.encoding)}function YF(e){return e&&e.length?this.write(e):""}var um=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ah,"__esModule",{value:!0});var KF=um(Ut),ZF=V,Sf=um(hs),QF=am,K_=new QF.StringDecoder("utf8");function XF(e){return new KF.default(nB(e))}function JF(e,r){if(Object.prototype.hasOwnProperty.call(e,"_buffer"))return eB(e,r);if(Object.prototype.hasOwnProperty.call(e,"_buffers"))return tB(e,r);throw(0,ZF.newError)("Don't know how to decode strings from '".concat(e,"'"))}function eB(e,r){var t=e.position,n=t+r;return e.position=Math.min(n,e.length),e._buffer.toString("utf8",t,n)}function tB(e,r){return rB(e,r,function(t){return K_.write(t._buffer)},function(){return K_.end()})}function rB(e,r,t,n){var i=r,o=e.position;e._updatePos(Math.min(r,e.length-o));var a=e._buffers.reduce(function(c,s){if(i<=0)return c;if(o>=s.length)return o-=s.length,"";s._updatePos(o-s.position);var u=Math.min(s.length-o,i),l=s.readSlice(u);return s._updatePos(u),i=Math.max(i-l.length,0),o=0,c+t(l)},"");return a+n()}function nB(e){return typeof Sf.default.Buffer.from=="function"?Sf.default.Buffer.from(e,"utf8"):new Sf.default.Buffer(e,"utf8")}ah.default={encode:XF,decode:JF};(function(e){var r=f&&f.__createBinding||(Object.create?function(c,s,u,l){l===void 0&&(l=u);var h=Object.getOwnPropertyDescriptor(s,u);(!h||("get"in h?!s.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(c,l,h)}:function(c,s,u,l){l===void 0&&(l=u),c[l]=s[u]}),t=f&&f.__exportStar||function(c,s){for(var u in c)u!=="default"&&!Object.prototype.hasOwnProperty.call(s,u)&&r(s,c,u)},n=f&&f.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.utf8=e.alloc=e.ChannelConfig=void 0,t(Kt,e),t(kn,e);var i=oh;Object.defineProperty(e,"ChannelConfig",{enumerable:!0,get:function(){return n(i).default}});var o=Ut;Object.defineProperty(e,"alloc",{enumerable:!0,get:function(){return o.alloc}});var a=ah;Object.defineProperty(e,"utf8",{enumerable:!0,get:function(){return n(a).default}})})(cn);Object.defineProperty(Xd,"__esModule",{value:!0});var iB=cn,cm=V,oB=1616949271;function yn(e,r){return{major:e,minor:r}}function aB(e){if(e.length>4)throw(0,cm.newError)("It should not have more than 4 versions of the protocol");var r=(0,iB.alloc)(5*4);return r.writeInt32(oB),e.forEach(function(t){if(t instanceof Array){var n=t[0],i=n.major,o=n.minor,a=t[1].minor,c=o-a;r.writeInt32(c<<16|o<<8|i)}else{var i=t.major,o=t.minor;r.writeInt32(o<<8|i)}}),r.reset(),r}function uB(e,r){var t=[e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readUInt8()];if(t[0]===72&&t[1]===84&&t[2]===84&&t[3]===80)throw r.error("Handshake failed since server responded with HTTP."),(0,cm.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return+(t[3]+"."+t[2])}function cB(){return aB([[yn(5,7),yn(5,0)],[yn(4,4),yn(4,2)],yn(4,1),yn(3,0)])}function sB(e,r){var t=this;return new Promise(function(n,i){var o=function(a){i(a)};e.onerror=o.bind(t),e._error&&o(e._error),e.onmessage=function(a){try{var c=uB(a,r);n({protocolVersion:c,consumeRemainingBuffer:function(s){a.hasRemaining()&&s(a.readSlice(a.remaining()))}})}catch(s){i(s)}},e.write(cB())})}Xd.default=sB;var ch={},ys={},ke={},te={},bs={},sh=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),lB=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bs,"__esModule",{value:!0});lB(V);var ms=function(){function e(){}return e.ofRecord=function(r){return r===null?e.ofNull():new hB(r)},e.ofMessageResponse=function(r){return r===null?e.ofNull():new fB(r)},e.ofNull=function(){return new dB},Object.defineProperty(e.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),e}();bs.default=ms;var fB=function(e){sh(r,e);function r(t){var n=e.call(this)||this;return n._response=t,n}return Object.defineProperty(r.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNull",{get:function(){return this._response===null},enumerable:!1,configurable:!0}),r}(ms),dB=function(e){sh(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),r}(ms),hB=function(e){sh(r,e);function r(t){var n=e.call(this)||this;return n._record=t,n}return Object.defineProperty(r.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isNull",{get:function(){return this._record===null},enumerable:!1,configurable:!0}),r}(ms),gt={},Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.reuseOngoingRequest=Kr.identity=void 0;var vB=V;function _B(e){return e}Kr.identity=_B;function pB(e,r){r===void 0&&(r=null);var t=new Map;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=vB.json.stringify(n);if(t.has(o))return t.get(o);var a=e.apply(r,n);return t.set(o,a),a.finally(function(){t.delete(o)})}}Kr.reuseOngoingRequest=pB;var gs={},yB=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(gs,"__esModule",{value:!0});gs.equals=void 0;function bB(e,r){var t,n;if(e===r)return!0;if(e===null||r===null)return!1;if(typeof e=="object"&&typeof r=="object"){var i=Object.keys(e),o=Object.keys(r);if(i.length!==o.length)return!1;try{for(var a=yB(i),c=a.next();!c.done;c=a.next()){var s=c.value;if(e[s]!==r[s])return!1}}catch(u){t={error:u}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!0}return!1}gs.equals=bB;var mB=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),gB=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),sm=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&mB(r,e,t);return gB(r,e),r};Object.defineProperty(gt,"__esModule",{value:!0});gt.object=gt.functional=void 0;gt.functional=sm(Kr);gt.object=sm(gs);var Ft=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),OB=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(te,"__esModule",{value:!0});te.TelemetryObserver=te.ProcedureRouteObserver=te.RouteObserver=te.CompletedObserver=te.FailedObserver=te.ResetObserver=te.LogoffObserver=te.LoginObserver=te.ResultStreamObserver=te.StreamObserver=void 0;var Be=V,lm=OB(bs),EB=gt,wB=Be.internal.constants.FETCH_ALL,nr=Be.error.PROTOCOL_ERROR,ln=function(){function e(){}return e.prototype.onNext=function(r){},e.prototype.onError=function(r){},e.prototype.onCompleted=function(r){},e}();te.StreamObserver=ln;var Os=function(e){Ft(r,e);function r(t){var n=t===void 0?{}:t,i=n.reactive,o=i===void 0?!1:i,a=n.moreFunction,c=n.discardFunction,s=n.fetchSize,u=s===void 0?wB:s,l=n.beforeError,h=n.afterError,_=n.beforeKeys,y=n.afterKeys,m=n.beforeComplete,E=n.afterComplete,w=n.server,S=n.highRecordWatermark,A=S===void 0?Number.MAX_VALUE:S,R=n.lowRecordWatermark,I=R===void 0?Number.MAX_VALUE:R,j=n.enrichMetadata,M=e.call(this)||this;return M._fieldKeys=null,M._fieldLookup=null,M._head=null,M._queuedRecords=[],M._tail=null,M._error=null,M._observers=[],M._meta={},M._server=w,M._beforeError=l,M._afterError=h,M._beforeKeys=_,M._afterKeys=y,M._beforeComplete=m,M._afterComplete=E,M._enrichMetadata=j||EB.functional.identity,M._queryId=null,M._moreFunction=a,M._discardFunction=c,M._discard=!1,M._fetchSize=u,M._lowRecordWatermark=I,M._highRecordWatermark=A,M._setState(o?ut.READY:ut.READY_STREAMING),M._setupAutoPull(),M._paused=!1,M._pulled=!o,M._haveRecordStreamed=!1,M}return r.prototype.pause=function(){this._paused=!0},r.prototype.resume=function(){this._paused=!1,this._setupAutoPull(!0),this._state.pull(this)},r.prototype.onNext=function(t){this._haveRecordStreamed=!0;var n=new Be.Record(this._fieldKeys,t,this._fieldLookup);this._observers.some(function(i){return i.onNext})?this._observers.forEach(function(i){i.onNext&&i.onNext(n)}):(this._queuedRecords.push(n),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},r.prototype.onCompleted=function(t){this._state.onSuccess(this,t)},r.prototype.onError=function(t){this._state.onError(this,t)},r.prototype.cancel=function(){this._discard=!0},r.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(ut.STREAMING)},r.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(ut.SUCCEEDED)},r.prototype.subscribe=function(t){if(this._head&&t.onKeys&&t.onKeys(this._head),this._queuedRecords.length>0&&t.onNext)for(var n=0;n<this._queuedRecords.length;n++)t.onNext(this._queuedRecords[n]),this._queuedRecords.length-n-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===ut.READY&&this._handleStreaming());this._tail&&t.onCompleted&&t.onCompleted(this._tail),this._error&&t.onError(this._error),this._observers.push(t),this._state===ut.READY&&this._handleStreaming()},r.prototype._handleHasMore=function(t){this._setState(ut.READY),this._handleStreaming(),delete t.has_more},r.prototype._handlePullSuccess=function(t){var n=this,i=this._enrichMetadata(Object.assign(this._server?{server:this._server}:{},this._meta,{stream_summary:{have_records_streamed:this._haveRecordStreamed,pulled:this._pulled,has_keys:this._fieldKeys.length>0}},t));if(![void 0,null,"r","w","rw","s"].includes(i.type)){this.onError((0,Be.newError)(`Server returned invalid query type. Expected one of [undefined, null, "r", "w", "rw", "s"] but got '`.concat(i.type,"'"),nr));return}this._setState(ut.SUCCEEDED);var o=null;this._beforeComplete&&(o=this._beforeComplete(i));var a=function(){n._tail=i,n._observers.some(function(c){return c.onCompleted})&&n._observers.forEach(function(c){c.onCompleted&&c.onCompleted(i)}),n._afterComplete&&n._afterComplete(i)};o?Promise.resolve(o).then(function(){return a()}):a()},r.prototype._handleRunSuccess=function(t,n){var i=this;if(this._fieldKeys===null){if(this._fieldKeys=[],this._fieldLookup={},t.fields&&t.fields.length>0){this._fieldKeys=t.fields;for(var o=0;o<t.fields.length;o++)this._fieldLookup[t.fields[o]]=o}t.fields!=null&&delete t.fields,t.qid!==null&&t.qid!==void 0&&(this._queryId=t.qid,delete t.qid),this._storeMetadataForCompletion(t);var a=null;this._beforeKeys&&(a=this._beforeKeys(this._fieldKeys));var c=function(){i._head=i._fieldKeys,i._observers.some(function(s){return s.onKeys})&&i._observers.forEach(function(s){s.onKeys&&s.onKeys(i._fieldKeys)}),i._afterKeys&&i._afterKeys(i._fieldKeys),n()};a?Promise.resolve(a).then(function(){return c()}):c()}},r.prototype._handleError=function(t){var n=this;this._setState(ut.FAILED),this._error=t;var i=null;this._beforeError&&(i=this._beforeError(t));var o=function(){n._observers.some(function(a){return a.onError})&&n._observers.forEach(function(a){a.onError&&a.onError(t)}),n._afterError&&n._afterError(t)};i?Promise.resolve(i).then(function(){return o()}):o()},r.prototype._handleStreaming=function(){this._head&&this._observers.some(function(t){return t.onNext||t.onCompleted})&&!this._paused&&(this._discard||this._autoPull)&&this._more()},r.prototype._more=function(){this._discard?this._discardFunction(this._queryId,this):(this._pulled=!0,this._moreFunction(this._queryId,this._fetchSize,this)),this._setState(ut.STREAMING)},r.prototype._storeMetadataForCompletion=function(t){for(var n=Object.keys(t),i=n.length,o="";i--;)o=n[i],this._meta[o]=t[o]},r.prototype._setState=function(t){this._state=t},r.prototype._setupAutoPull=function(){this._autoPull=!0},r}(ln);te.ResultStreamObserver=Os;var TB=function(e){Ft(r,e);function r(t){var n=t===void 0?{}:t,i=n.onError,o=n.onCompleted,a=e.call(this)||this;return a._onError=i,a._onCompleted=o,a}return r.prototype.onNext=function(t){this.onError((0,Be.newError)("Received RECORD when initializing "+Be.json.stringify(t)))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(ln);te.LoginObserver=TB;var SB=function(e){Ft(r,e);function r(t){var n=t===void 0?{}:t,i=n.onError,o=n.onCompleted,a=e.call(this)||this;return a._onError=i,a._onCompleted=o,a}return r.prototype.onNext=function(t){this.onError((0,Be.newError)("Received RECORD when logging off "+Be.json.stringify(t)))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(ln);te.LogoffObserver=SB;var PB=function(e){Ft(r,e);function r(t){var n=t===void 0?{}:t,i=n.onProtocolError,o=n.onError,a=n.onComplete,c=e.call(this)||this;return c._onProtocolError=i,c._onError=o,c._onComplete=a,c}return r.prototype.onNext=function(t){this.onError((0,Be.newError)("Received RECORD when resetting: received record is: "+Be.json.stringify(t),nr))},r.prototype.onError=function(t){t.code===nr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onComplete&&this._onComplete(t)},r}(ln);te.ResetObserver=PB;var CB=function(e){Ft(r,e);function r(t){var n=t===void 0?{}:t,i=n.onError,o=n.onCompleted,a=e.call(this)||this;return a._onError=i,a._onCompleted=o,a}return r.prototype.onNext=function(t){this.onError((0,Be.newError)("Received RECORD when sending telemetry "+Be.json.stringify(t),nr))},r.prototype.onError=function(t){this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},r}(Os);te.TelemetryObserver=CB;var IB=function(e){Ft(r,e);function r(t){var n=t.error,i=t.onError,o=e.call(this,{beforeError:i})||this;return o.onError(n),o}return r}(Os);te.FailedObserver=IB;var RB=function(e){Ft(r,e);function r(){var t=e.call(this)||this;return e.prototype.markCompleted.call(t),t}return r}(Os);te.CompletedObserver=RB;var AB=function(e){Ft(r,e);function r(t){var n=t.resultObserver,i=t.onProtocolError,o=t.onError,a=t.onCompleted,c=e.call(this)||this;return c._resultObserver=n,c._onError=o,c._onCompleted=a,c._records=[],c._onProtocolError=i,n.subscribe(c),c}return r.prototype.onNext=function(t){this._records.push(t)},r.prototype.onError=function(t){t.code===nr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(){if(this._records!==null&&this._records.length!==1){this.onError((0,Be.newError)("Illegal response from router. Received "+this._records.length+` records but expected only one.
`+Be.json.stringify(this._records),nr));return}this._onCompleted&&this._onCompleted(lm.default.ofRecord(this._records[0]))},r}(ln);te.ProcedureRouteObserver=AB;var jB=function(e){Ft(r,e);function r(t){var n=t===void 0?{}:t,i=n.onProtocolError,o=n.onError,a=n.onCompleted,c=e.call(this)||this;return c._onProtocolError=i,c._onError=o,c._onCompleted=a,c}return r.prototype.onNext=function(t){this.onError((0,Be.newError)("Received RECORD when resetting: received record is: "+Be.json.stringify(t),nr))},r.prototype.onError=function(t){t.code===nr&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},r.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(lm.default.ofMessageResponse(t))},r}(ln);te.RouteObserver=jB;var ut={READY_STREAMING:{onSuccess:function(e,r){e._handleRunSuccess(r,function(){e._setState(ut.STREAMING)})},onError:function(e,r){e._handleError(r)},name:function(){return"READY_STREAMING"},pull:function(){}},READY:{onSuccess:function(e,r){e._handleRunSuccess(r,function(){return e._handleStreaming()})},onError:function(e,r){e._handleError(r)},name:function(){return"READY"},pull:function(e){return e._more()}},STREAMING:{onSuccess:function(e,r){r.has_more?e._handleHasMore(r):e._handlePullSuccess(r)},onError:function(e,r){e._handleError(r)},name:function(){return"STREAMING"},pull:function(){}},FAILED:{onError:function(e){},name:function(){return"FAILED"},pull:function(){}},SUCCEEDED:{name:function(){return"SUCCEEDED"},pull:function(){}}};Object.defineProperty(ke,"__esModule",{value:!0});ke.assertNotificationFilterIsEmpty=ke.assertImpersonatedUserIsEmpty=ke.assertTxConfigIsEmpty=ke.assertDatabaseIsEmpty=void 0;var ro=V;function MB(e,r,t){if(r===void 0&&(r=function(){}),e&&!e.isEmpty()){var n=(0,ro.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw r(n.message),t.onError(n),n}}ke.assertTxConfigIsEmpty=MB;function NB(e,r,t){if(r===void 0&&(r=function(){}),e){var n=(0,ro.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw r(n.message),t.onError(n),n}}ke.assertDatabaseIsEmpty=NB;function $B(e,r,t){if(r===void 0&&(r=function(){}),e){var n=(0,ro.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+"Trying to impersonate ".concat(e,"."));throw r(n.message),t.onError(n),n}}ke.assertImpersonatedUserIsEmpty=$B;function kB(e,r,t){if(r===void 0&&(r=function(){}),e!==void 0){var n=(0,ro.newError)("Driver is connected to a database that does not support user notification filters. Please upgrade to Neo4j 5.7.0 or later in order to use this functionality. "+"Trying to set notifications to ".concat(ro.json.stringify(e),"."));throw r(n.message),t.onError(n),n}}ke.assertNotificationFilterIsEmpty=kB;var Fe={},Zr={},ir={};Object.defineProperty(ir,"__esModule",{value:!0});ir.verifyStructSize=ir.Structure=void 0;var fm=V,DB=fm.error.PROTOCOL_ERROR,dm=function(){function e(r,t){this.signature=r,this.fields=t}return Object.defineProperty(e.prototype,"size",{get:function(){return this.fields.length},enumerable:!1,configurable:!0}),e.prototype.toString=function(){for(var r="",t=0;t<this.fields.length;t++)t>0&&(r+=", "),r+=this.fields[t];return"Structure("+this.signature+", ["+r+"])"},e}();ir.Structure=dm;function LB(e,r,t){if(r!==t)throw(0,fm.newError)("Wrong struct size for ".concat(e,", expected ").concat(r," but was ").concat(t),DB)}ir.verifyStructSize=LB;ir.default=dm;Object.defineProperty(Zr,"__esModule",{value:!0});Zr.Unpacker=Zr.Packer=void 0;var xi=cn,hm=gt,vm=ir,Pe=V,UB=Pe.error.PROTOCOL_ERROR,_m=128,pm=144,ym=160,bm=176,mm=192,gm=193,Om=194,Em=195,wm=200,Tm=201,Sm=202,Pm=203,Cm=208,Im=209,Rm=210,Am=212,jm=213,Mm=214,Nm=204,$m=205,km=206,Dm=216,Lm=217,Um=218,Fm=220,Bm=221,FB=function(){function e(r){this._ch=r,this._byteArraysSupported=!0}return e.prototype.packable=function(r,t){var n=this;t===void 0&&(t=hm.functional.identity);try{r=t(r)}catch(a){return function(){throw a}}if(r===null)return function(){return n._ch.writeUInt8(mm)};if(r===!0)return function(){return n._ch.writeUInt8(Em)};if(r===!1)return function(){return n._ch.writeUInt8(Om)};if(typeof r=="number")return function(){return n.packFloat(r)};if(typeof r=="string")return function(){return n.packString(r)};if(typeof r=="bigint")return function(){return n.packInteger((0,Pe.int)(r))};if((0,Pe.isInt)(r))return function(){return n.packInteger(r)};if(r instanceof Int8Array)return function(){return n.packBytes(r)};if(r instanceof Array)return function(){n.packListHeader(r.length);for(var a=0;a<r.length;a++)n.packable(r[a]===void 0?null:r[a],t)()};if(WB(r))return this.packableIterable(r,t);if(r instanceof vm.Structure){for(var i=[],o=0;o<r.fields.length;o++)i[o]=this.packable(r.fields[o],t);return function(){return n.packStruct(r.signature,i)}}else return typeof r=="object"?function(){for(var a=Object.keys(r),c=0,s=0;s<a.length;s++)r[a[s]]!==void 0&&c++;n.packMapHeader(c);for(var s=0;s<a.length;s++){var u=a[s];r[u]!==void 0&&(n.packString(u),n.packable(r[u],t)())}}:this._nonPackableValue("Unable to pack the given value: ".concat(r))},e.prototype.packableIterable=function(r,t){try{var n=Array.from(r);return this.packable(n,t)}catch(i){throw(0,Pe.newError)("Cannot pack given iterable, ".concat(i.message,": ").concat(r))}},e.prototype.packStruct=function(r,t){t=t||[],this.packStructHeader(t.length,r);for(var n=0;n<t.length;n++)t[n]()},e.prototype.packInteger=function(r){var t=r.high,n=r.low;r.greaterThanOrEqual(-16)&&r.lessThan(128)?this._ch.writeInt8(n):r.greaterThanOrEqual(-128)&&r.lessThan(-16)?(this._ch.writeUInt8(wm),this._ch.writeInt8(n)):r.greaterThanOrEqual(-32768)&&r.lessThan(32768)?(this._ch.writeUInt8(Tm),this._ch.writeInt16(n)):r.greaterThanOrEqual(-2147483648)&&r.lessThan(2147483648)?(this._ch.writeUInt8(Sm),this._ch.writeInt32(n)):(this._ch.writeUInt8(Pm),this._ch.writeInt32(t),this._ch.writeInt32(n))},e.prototype.packFloat=function(r){this._ch.writeUInt8(gm),this._ch.writeFloat64(r)},e.prototype.packString=function(r){var t=xi.utf8.encode(r),n=t.length;if(n<16)this._ch.writeUInt8(_m|n),this._ch.writeBytes(t);else if(n<256)this._ch.writeUInt8(Cm),this._ch.writeUInt8(n),this._ch.writeBytes(t);else if(n<65536)this._ch.writeUInt8(Im),this._ch.writeUInt8(n/256>>0),this._ch.writeUInt8(n%256),this._ch.writeBytes(t);else if(n<4294967296)this._ch.writeUInt8(Rm),this._ch.writeUInt8((n/16777216>>0)%256),this._ch.writeUInt8((n/65536>>0)%256),this._ch.writeUInt8((n/256>>0)%256),this._ch.writeUInt8(n%256),this._ch.writeBytes(t);else throw(0,Pe.newError)("UTF-8 strings of size "+n+" are not supported")},e.prototype.packListHeader=function(r){if(r<16)this._ch.writeUInt8(pm|r);else if(r<256)this._ch.writeUInt8(Am),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(jm),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(Mm),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Pe.newError)("Lists of size "+r+" are not supported")},e.prototype.packBytes=function(r){if(this._byteArraysSupported){this.packBytesHeader(r.length);for(var t=0;t<r.length;t++)this._ch.writeInt8(r[t])}else throw(0,Pe.newError)("Byte arrays are not supported by the database this driver is connected to")},e.prototype.packBytesHeader=function(r){if(r<256)this._ch.writeUInt8(Nm),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8($m),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(km),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Pe.newError)("Byte arrays of size "+r+" are not supported")},e.prototype.packMapHeader=function(r){if(r<16)this._ch.writeUInt8(ym|r);else if(r<256)this._ch.writeUInt8(Dm),this._ch.writeUInt8(r);else if(r<65536)this._ch.writeUInt8(Lm),this._ch.writeUInt8(r/256>>0),this._ch.writeUInt8(r%256);else if(r<4294967296)this._ch.writeUInt8(Um),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256);else throw(0,Pe.newError)("Maps of size "+r+" are not supported")},e.prototype.packStructHeader=function(r,t){if(r<16)this._ch.writeUInt8(bm|r),this._ch.writeUInt8(t);else if(r<256)this._ch.writeUInt8(Fm),this._ch.writeUInt8(r),this._ch.writeUInt8(t);else if(r<65536)this._ch.writeUInt8(Bm),this._ch.writeUInt8(r/256>>0),this._ch.writeUInt8(r%256);else throw(0,Pe.newError)("Structures of size "+r+" are not supported")},e.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},e.prototype._nonPackableValue=function(r){return function(){throw(0,Pe.newError)(r,UB)}},e}();Zr.Packer=FB;var BB=function(){function e(r,t){r===void 0&&(r=!1),t===void 0&&(t=!1),this._disableLosslessIntegers=r,this._useBigInt=t}return e.prototype.unpack=function(r,t){t===void 0&&(t=hm.functional.identity);var n=r.readUInt8(),i=n&240,o=n&15;if(n===mm)return null;var a=this._unpackBoolean(n);if(a!==null)return a;var c=this._unpackNumberOrInteger(n,r);if(c!==null){if((0,Pe.isInt)(c)){if(this._useBigInt)return c.toBigInt();if(this._disableLosslessIntegers)return c.toNumberOrInfinity()}return c}var s=this._unpackString(n,i,o,r);if(s!==null)return s;var u=this._unpackList(n,i,o,r,t);if(u!==null)return u;var l=this._unpackByteArray(n,r);if(l!==null)return l;var h=this._unpackMap(n,i,o,r,t);if(h!==null)return h;var _=this._unpackStruct(n,i,o,r,t);if(_!==null)return _;throw(0,Pe.newError)("Unknown packed value with marker "+n.toString(16))},e.prototype.unpackInteger=function(r){var t=r.readUInt8(),n=this._unpackInteger(t,r);if(n==null)throw(0,Pe.newError)("Unable to unpack integer value with marker "+t.toString(16));return n},e.prototype._unpackBoolean=function(r){return r===Em?!0:r===Om?!1:null},e.prototype._unpackNumberOrInteger=function(r,t){return r===gm?t.readFloat64():this._unpackInteger(r,t)},e.prototype._unpackInteger=function(r,t){if(r>=0&&r<128)return(0,Pe.int)(r);if(r>=240&&r<256)return(0,Pe.int)(r-256);if(r===wm)return(0,Pe.int)(t.readInt8());if(r===Tm)return(0,Pe.int)(t.readInt16());if(r===Sm){var n=t.readInt32();return(0,Pe.int)(n)}else if(r===Pm){var i=t.readInt32(),o=t.readInt32();return new Pe.Integer(o,i)}else return null},e.prototype._unpackString=function(r,t,n,i){return t===_m?xi.utf8.decode(i,n):r===Cm?xi.utf8.decode(i,i.readUInt8()):r===Im?xi.utf8.decode(i,i.readUInt16()):r===Rm?xi.utf8.decode(i,i.readUInt32()):null},e.prototype._unpackList=function(r,t,n,i,o){return t===pm?this._unpackListWithSize(n,i,o):r===Am?this._unpackListWithSize(i.readUInt8(),i,o):r===jm?this._unpackListWithSize(i.readUInt16(),i,o):r===Mm?this._unpackListWithSize(i.readUInt32(),i,o):null},e.prototype._unpackListWithSize=function(r,t,n){for(var i=[],o=0;o<r;o++)i.push(this.unpack(t,n));return i},e.prototype._unpackByteArray=function(r,t){return r===Nm?this._unpackByteArrayWithSize(t.readUInt8(),t):r===$m?this._unpackByteArrayWithSize(t.readUInt16(),t):r===km?this._unpackByteArrayWithSize(t.readUInt32(),t):null},e.prototype._unpackByteArrayWithSize=function(r,t){for(var n=new Int8Array(r),i=0;i<r;i++)n[i]=t.readInt8();return n},e.prototype._unpackMap=function(r,t,n,i,o){return t===ym?this._unpackMapWithSize(n,i,o):r===Dm?this._unpackMapWithSize(i.readUInt8(),i,o):r===Lm?this._unpackMapWithSize(i.readUInt16(),i,o):r===Um?this._unpackMapWithSize(i.readUInt32(),i,o):null},e.prototype._unpackMapWithSize=function(r,t,n){for(var i={},o=0;o<r;o++){var a=this.unpack(t,n);i[a]=this.unpack(t,n)}return i},e.prototype._unpackStruct=function(r,t,n,i,o){return t===bm?this._unpackStructWithSize(n,i,o):r===Fm?this._unpackStructWithSize(i.readUInt8(),i,o):r===Bm?this._unpackStructWithSize(i.readUInt16(),i,o):null},e.prototype._unpackStructWithSize=function(r,t,n){for(var i=t.readUInt8(),o=new vm.Structure(i,[]),a=0;a<r;a++)o.fields.push(this.unpack(t,n));return n(o)},e}();Zr.Unpacker=BB;function WB(e){return e==null?!1:typeof e[Symbol.iterator]=="function"}var Dn={},Wm=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),xB=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),VB=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),qB=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&xB(r,e,t);return VB(r,e),r};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.Unpacker=Dn.Packer=void 0;var xm=qB(Zr),HB=function(e){Wm(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},r}(xm.Packer);Dn.Packer=HB;var zB=function(e){Wm(r,e);function r(t,n){return t===void 0&&(t=!1),n===void 0&&(n=!1),e.call(this,t,n)||this}return r}(xm.Unpacker);Dn.Unpacker=zB;var GB=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),YB=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),lh=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&GB(r,e,t);return YB(r,e),r};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.structure=Fe.v2=Fe.v1=void 0;var KB=lh(Zr);Fe.v1=KB;var Vm=lh(Dn);Fe.v2=Vm;var ZB=lh(ir);Fe.structure=ZB;Fe.default=Vm;var We={};Object.defineProperty(We,"__esModule",{value:!0});We.SIGNATURES=void 0;var me=V,qm=me.internal.constants,QB=qm.ACCESS_MODE_READ,ju=qm.FETCH_ALL,Z_=me.internal.util.assertString,Hm=1,zm=15,Hu=16,Gm=63,mn=1,Ym=2,cd=17,Km=18,Zm=19,Qm=84,sd=102,Xm=106,Jm=107,eg=47,tg=63,XB="r",Vi=-1,JB=Object.freeze({INIT:Hm,RESET:zm,RUN:Hu,PULL_ALL:Gm,HELLO:mn,GOODBYE:Ym,BEGIN:cd,COMMIT:Km,ROLLBACK:Zm,TELEMETRY:Qm,ROUTE:sd,LOGON:Xm,LOGOFF:Jm,DISCARD:eg,PULL:tg});We.SIGNATURES=JB;var vi=function(){function e(r,t,n){this.signature=r,this.fields=t,this.toString=n}return e.init=function(r,t){return new e(Hm,[r,t],function(){return"INIT ".concat(r," {...}")})},e.run=function(r,t){return new e(Hu,[r,t],function(){return"RUN ".concat(r," ").concat(me.json.stringify(t))})},e.pullAll=function(){return e4},e.reset=function(){return t4},e.hello=function(r,t,n,i){n===void 0&&(n=null),i===void 0&&(i=null);var o=Object.assign({user_agent:r},t);return n&&(o.routing=n),i&&(o.patch_bolt=i),new e(mn,[o],function(){return"HELLO {user_agent: '".concat(r,"', ...}")})},e.hello5x1=function(r,t){t===void 0&&(t=null);var n={user_agent:r};return t&&(n.routing=t),new e(mn,[n],function(){return"HELLO {user_agent: '".concat(r,"', ...}")})},e.hello5x2=function(r,t,n){t===void 0&&(t=null),n===void 0&&(n=null);var i={user_agent:r};return ld(i,t),n&&(i.routing=n),new e(mn,[i],function(){return"HELLO ".concat(me.json.stringify(i))})},e.hello5x3=function(r,t,n,i){n===void 0&&(n=null),i===void 0&&(i=null);var o={};return r&&(o.user_agent=r),t&&(o.bolt_agent={product:t.product,platform:t.platform,language:t.language,language_details:t.languageDetails}),ld(o,n),i&&(o.routing=i),new e(mn,[o],function(){return"HELLO ".concat(me.json.stringify(o))})},e.hello5x5=function(r,t,n,i){n===void 0&&(n=null),i===void 0&&(i=null);var o={};return r&&(o.user_agent=r),t&&(o.bolt_agent={product:t.product,platform:t.platform,language:t.language,language_details:t.languageDetails}),Pf(o,n),i&&(o.routing=i),new e(mn,[o],function(){return"HELLO ".concat(me.json.stringify(o))})},e.logon=function(r){return new e(Xm,[r],function(){return"LOGON { ... }"})},e.logoff=function(){return new e(Jm,[],function(){return"LOGOFF"})},e.begin=function(r){var t=r===void 0?{}:r,n=t.bookmarks,i=t.txConfig,o=t.database,a=t.mode,c=t.impersonatedUser,s=t.notificationFilter,u=Mu(n,i,o,a,c,s);return new e(cd,[u],function(){return"BEGIN ".concat(me.json.stringify(u))})},e.begin5x5=function(r){var t=r===void 0?{}:r,n=t.bookmarks,i=t.txConfig,o=t.database,a=t.mode,c=t.impersonatedUser,s=t.notificationFilter,u=Mu(n,i,o,a,c,s,{appendNotificationFilter:Pf});return new e(cd,[u],function(){return"BEGIN ".concat(me.json.stringify(u))})},e.commit=function(){return r4},e.rollback=function(){return n4},e.runWithMetadata=function(r,t,n){var i=n===void 0?{}:n,o=i.bookmarks,a=i.txConfig,c=i.database,s=i.mode,u=i.impersonatedUser,l=i.notificationFilter,h=Mu(o,a,c,s,u,l);return new e(Hu,[r,t,h],function(){return"RUN ".concat(r," ").concat(me.json.stringify(t)," ").concat(me.json.stringify(h))})},e.runWithMetadata5x5=function(r,t,n){var i=n===void 0?{}:n,o=i.bookmarks,a=i.txConfig,c=i.database,s=i.mode,u=i.impersonatedUser,l=i.notificationFilter,h=Mu(o,a,c,s,u,l,{appendNotificationFilter:Pf});return new e(Hu,[r,t,h],function(){return"RUN ".concat(r," ").concat(me.json.stringify(t)," ").concat(me.json.stringify(h))})},e.goodbye=function(){return i4},e.pull=function(r){var t=r===void 0?{}:r,n=t.stmtId,i=n===void 0?Vi:n,o=t.n,a=o===void 0?ju:o,c=Q_(i??Vi,a||ju);return new e(tg,[c],function(){return"PULL ".concat(me.json.stringify(c))})},e.discard=function(r){var t=r===void 0?{}:r,n=t.stmtId,i=n===void 0?Vi:n,o=t.n,a=o===void 0?ju:o,c=Q_(i??Vi,a||ju);return new e(eg,[c],function(){return"DISCARD ".concat(me.json.stringify(c))})},e.telemetry=function(r){var t=r.api,n=(0,me.int)(t);return new e(Qm,[n],function(){return"TELEMETRY ".concat(n.toString())})},e.route=function(r,t,n){return r===void 0&&(r={}),t===void 0&&(t=[]),n===void 0&&(n=null),new e(sd,[r,t,n],function(){return"ROUTE ".concat(me.json.stringify(r)," ").concat(me.json.stringify(t)," ").concat(n)})},e.routeV4x4=function(r,t,n){r===void 0&&(r={}),t===void 0&&(t=[]),n===void 0&&(n={});var i={};return n.databaseName&&(i.db=n.databaseName),n.impersonatedUser&&(i.imp_user=n.impersonatedUser),new e(sd,[r,t,i],function(){return"ROUTE ".concat(me.json.stringify(r)," ").concat(me.json.stringify(t)," ").concat(me.json.stringify(i))})},e}();We.default=vi;function Mu(e,r,t,n,i,o,a){var c;a===void 0&&(a={});var s={};e.isEmpty()||(s.bookmarks=e.values()),r.timeout!==null&&(s.tx_timeout=r.timeout),r.metadata&&(s.tx_metadata=r.metadata),t&&(s.db=Z_(t,"database")),i&&(s.imp_user=Z_(i,"impersonatedUser")),n===QB&&(s.mode=XB);var u=(c=a.appendNotificationFilter)!==null&&c!==void 0?c:ld;return u(s,o),s}function Q_(e,r){var t={n:(0,me.int)(r)};return e!==Vi&&(t.qid=(0,me.int)(e)),t}function ld(e,r){r&&(r.minimumSeverityLevel&&(e.notifications_minimum_severity=r.minimumSeverityLevel),r.disabledCategories&&(e.notifications_disabled_categories=r.disabledCategories),r.disabledClassifications&&(e.notifications_disabled_categories=r.disabledClassifications))}function Pf(e,r){r&&(r.minimumSeverityLevel&&(e.notifications_minimum_severity=r.minimumSeverityLevel),r.disabledCategories&&(e.notifications_disabled_classifications=r.disabledCategories),r.disabledClassifications&&(e.notifications_disabled_classifications=r.disabledClassifications))}var e4=new vi(Gm,[],function(){return"PULL_ALL"}),t4=new vi(zm,[],function(){return"RESET"}),r4=new vi(Km,[],function(){return"COMMIT"}),n4=new vi(Zm,[],function(){return"ROLLBACK"}),i4=new vi(Ym,[],function(){return"GOODBYE"}),Es={},Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.TypeTransformer=void 0;var o4=Fe,a4=V,u4=a4.internal.objectUtil,c4=function(){function e(r){this._transformers=r,this._transformersPerSignature=new Map(r.map(function(t){return[t.signature,t]})),this.fromStructure=this.fromStructure.bind(this),this.toStructure=this.toStructure.bind(this),Object.freeze(this)}return e.prototype.fromStructure=function(r){try{if(r instanceof o4.structure.Structure&&this._transformersPerSignature.has(r.signature)){var t=this._transformersPerSignature.get(r.signature).fromStructure;return t(r)}return r}catch(n){return u4.createBrokenObject(n)}},e.prototype.toStructure=function(r){var t=this._transformers.find(function(n){var i=n.isTypeInstance;return i(r)});return t!==void 0?t.toStructure(r):r},e}();Ee.default=c4;var s4=function(){function e(r){var t=r.signature,n=r.fromStructure,i=r.toStructure,o=r.isTypeInstance;this.signature=t,this.isTypeInstance=o,this.fromStructure=n,this.toStructure=i,Object.freeze(this)}return e.prototype.extendsWith=function(r){var t=r.signature,n=r.fromStructure,i=r.toStructure,o=r.isTypeInstance;return new e({signature:t||this.signature,fromStructure:n||this.fromStructure,toStructure:i||this.toStructure,isTypeInstance:o||this.isTypeInstance})},e}();Ee.TypeTransformer=s4;var ws=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(Es,"__esModule",{value:!0});var Ne=V,Ts=Fe,Ss=Ee,Ps=Ne.error.PROTOCOL_ERROR,l4=78,f4=3,d4=82,h4=5,v4=114,_4=3,p4=80,y4=3;function b4(){return new Ss.TypeTransformer({signature:l4,isTypeInstance:function(e){return e instanceof Ne.Node},toStructure:function(e){throw(0,Ne.newError)("It is not allowed to pass nodes in query parameters, given: ".concat(e),Ps)},fromStructure:function(e){Ts.structure.verifyStructSize("Node",f4,e.size);var r=ws(e.fields,3),t=r[0],n=r[1],i=r[2];return new Ne.Node(t,n,i)}})}function m4(){return new Ss.TypeTransformer({signature:d4,isTypeInstance:function(e){return e instanceof Ne.Relationship},toStructure:function(e){throw(0,Ne.newError)("It is not allowed to pass relationships in query parameters, given: ".concat(e),Ps)},fromStructure:function(e){Ts.structure.verifyStructSize("Relationship",h4,e.size);var r=ws(e.fields,5),t=r[0],n=r[1],i=r[2],o=r[3],a=r[4];return new Ne.Relationship(t,n,i,o,a)}})}function g4(){return new Ss.TypeTransformer({signature:v4,isTypeInstance:function(e){return e instanceof Ne.UnboundRelationship},toStructure:function(e){throw(0,Ne.newError)("It is not allowed to pass unbound relationships in query parameters, given: ".concat(e),Ps)},fromStructure:function(e){Ts.structure.verifyStructSize("UnboundRelationship",_4,e.size);var r=ws(e.fields,3),t=r[0],n=r[1],i=r[2];return new Ne.UnboundRelationship(t,n,i)}})}function O4(){return new Ss.TypeTransformer({signature:p4,isTypeInstance:function(e){return e instanceof Ne.Path},toStructure:function(e){throw(0,Ne.newError)("It is not allowed to pass paths in query parameters, given: ".concat(e),Ps)},fromStructure:function(e){Ts.structure.verifyStructSize("Path",y4,e.size);for(var r=ws(e.fields,3),t=r[0],n=r[1],i=r[2],o=[],a=t[0],c=0;c<i.length;c+=2){var s=t[i[c+1]],u=(0,Ne.toNumber)(i[c]),l=void 0;u>0?(l=n[u-1],l instanceof Ne.UnboundRelationship&&(n[u-1]=l=l.bindTo(a,s))):(l=n[-u-1],l instanceof Ne.UnboundRelationship&&(n[-u-1]=l=l.bindTo(s,a))),o.push(new Ne.PathSegment(a,l,s)),a=s}return new Ne.Path(t[0],t[t.length-1],o)}})}Es.default={createNodeTransformer:b4,createRelationshipTransformer:m4,createUnboundRelationshipTransformer:g4,createPathTransformer:O4};var On=f&&f.__assign||function(){return On=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},On.apply(this,arguments)},E4=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),w4=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),T4=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&E4(r,e,t);return w4(r,e),r},rg=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ys,"__esModule",{value:!0});var $i=ke,Cf=Fe,Ir=T4(We),bn=te,Ln=V,S4=rg(Es),P4=rg(Ee),X_=Ln.internal.bookmarks.Bookmarks,ng=Ln.internal.constants,J_=ng.ACCESS_MODE_WRITE,C4=ng.BOLT_PROTOCOL_V1;Ln.internal.logger.Logger;var ep=Ln.internal.txConfig.TxConfig,I4=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),R4=function(){function e(r,t,n,i,o,a){var c=n===void 0?{}:n,s=c.disableLosslessIntegers,u=c.useBigInt;i===void 0&&(i=function(){return null}),this._server=r||{},this._chunker=t,this._packer=this._createPacker(t),this._unpacker=this._createUnpacker(s,u),this._responseHandler=i(this),this._log=o,this._onProtocolError=a,this._fatalError=null,this._lastMessageSignature=null,this._config={disableLosslessIntegers:s,useBigInt:u}}return Object.defineProperty(e.prototype,"transformer",{get:function(){var r=this;return this._transformer===void 0&&(this._transformer=new P4.default(Object.values(S4.default).map(function(t){return t(r._config,r._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return C4},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportsReAuth",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initialized",{get:function(){return!!this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authToken",{get:function(){return this._authToken},enumerable:!1,configurable:!0}),e.prototype.packer=function(){return this._packer},e.prototype.packable=function(r){return this._packer.packable(r,this.transformer.toStructure)},e.prototype.unpacker=function(){return this._unpacker},e.prototype.unpack=function(r){return this._unpacker.unpack(r,this.transformer.fromStructure)},e.prototype.transformMetadata=function(r){return r},e.prototype.enrichErrorMetadata=function(r){return On(On({},r),{diagnostic_record:r.diagnostic_record!==null?On(On({},I4),r.diagnostic_record):null})},e.prototype.initialize=function(r){var t=this,n=r===void 0?{}:r,i=n.userAgent;n.boltAgent;var o=n.authToken,a=n.notificationFilter,c=n.onError,s=n.onComplete,u=new bn.LoginObserver({onError:function(l){return t._onLoginError(l,c)},onCompleted:function(l){return t._onLoginCompleted(l,s)}});return(0,$i.assertNotificationFilterIsEmpty)(a,this._onProtocolError,u),this.write(Ir.default.init(i,o),u,!0),u},e.prototype.logoff=function(r){var t=r===void 0?{}:r,n=t.onComplete,i=t.onError;t.flush;var o=new bn.LogoffObserver({onCompleted:n,onError:i}),a=(0,Ln.newError)("Driver is connected to a database that does not support logoff. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(a.message),o.onError(a),a},e.prototype.logon=function(r){var t=this,n=r===void 0?{}:r,i=n.authToken,o=n.onComplete,a=n.onError;n.flush;var c=new bn.LoginObserver({onCompleted:function(){return t._onLoginCompleted({},i,o)},onError:function(u){return t._onLoginError(u,a)}}),s=(0,Ln.newError)("Driver is connected to a database that does not support logon. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(s.message),c.onError(s),s},e.prototype.prepareToClose=function(){},e.prototype.beginTransaction=function(r){var t=r===void 0?{}:r,n=t.bookmarks,i=t.txConfig,o=t.database,a=t.mode,c=t.impersonatedUser,s=t.notificationFilter,u=t.beforeError,l=t.afterError,h=t.beforeComplete,_=t.afterComplete;return this.run("BEGIN",n?n.asBeginTransactionParameters():{},{bookmarks:n,txConfig:i,database:o,mode:a,impersonatedUser:c,notificationFilter:s,beforeError:u,afterError:l,beforeComplete:h,afterComplete:_,flush:!1})},e.prototype.commitTransaction=function(r){var t=r===void 0?{}:r,n=t.beforeError,i=t.afterError,o=t.beforeComplete,a=t.afterComplete;return this.run("COMMIT",{},{bookmarks:X_.empty(),txConfig:ep.empty(),mode:J_,beforeError:n,afterError:i,beforeComplete:o,afterComplete:a})},e.prototype.rollbackTransaction=function(r){var t=r===void 0?{}:r,n=t.beforeError,i=t.afterError,o=t.beforeComplete,a=t.afterComplete;return this.run("ROLLBACK",{},{bookmarks:X_.empty(),txConfig:ep.empty(),mode:J_,beforeError:n,afterError:i,beforeComplete:o,afterComplete:a})},e.prototype.run=function(r,t,n){var i=n===void 0?{}:n;i.bookmarks;var o=i.txConfig,a=i.database;i.mode;var c=i.impersonatedUser,s=i.notificationFilter,u=i.beforeKeys,l=i.afterKeys,h=i.beforeError,_=i.afterError,y=i.beforeComplete,m=i.afterComplete,E=i.flush,w=E===void 0?!0:E,S=i.highRecordWatermark,A=S===void 0?Number.MAX_VALUE:S,R=i.lowRecordWatermark,I=R===void 0?Number.MAX_VALUE:R,j=new bn.ResultStreamObserver({server:this._server,beforeKeys:u,afterKeys:l,beforeError:h,afterError:_,beforeComplete:y,afterComplete:m,highRecordWatermark:A,lowRecordWatermark:I});return(0,$i.assertTxConfigIsEmpty)(o,this._onProtocolError,j),(0,$i.assertDatabaseIsEmpty)(a,this._onProtocolError,j),(0,$i.assertImpersonatedUserIsEmpty)(c,this._onProtocolError,j),(0,$i.assertNotificationFilterIsEmpty)(s,this._onProtocolError,j),this.write(Ir.default.run(r,t),j,!1),this.write(Ir.default.pullAll(),j,w),j},Object.defineProperty(e.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),e.prototype.reset=function(r){var t=r===void 0?{}:r,n=t.onError,i=t.onComplete,o=new bn.ResetObserver({onProtocolError:this._onProtocolError,onError:n,onComplete:i});return this.write(Ir.default.reset(),o,!0),o},e.prototype.telemetry=function(r,t){r.api;var n=t===void 0?{}:t;n.onError;var i=n.onCompleted,o=new bn.CompletedObserver;return i&&i(),o},e.prototype._createPacker=function(r){return new Cf.v1.Packer(r)},e.prototype._createUnpacker=function(r,t){return new Cf.v1.Unpacker(r,t)},e.prototype.write=function(r,t,n){var i=this.queueObserverIfProtocolIsNotBroken(t);if(i){this._log.isDebugEnabled()&&this._log.debug("C: ".concat(r)),this._lastMessageSignature=r.signature;var o=new Cf.structure.Structure(r.signature,r.fields);this.packable(o)(),this._chunker.messageBoundary(),n&&this._chunker.flush()}},e.prototype.isLastMessageLogon=function(){return this._lastMessageSignature===Ir.SIGNATURES.HELLO||this._lastMessageSignature===Ir.SIGNATURES.LOGON},e.prototype.isLastMessageReset=function(){return this._lastMessageSignature===Ir.SIGNATURES.RESET},e.prototype.notifyFatalError=function(r){return this._fatalError=r,this._responseHandler._notifyErrorToObservers(r)},e.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},e.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},e.prototype.queueObserverIfProtocolIsNotBroken=function(r){return this.isBroken()?(this.notifyFatalErrorToObserver(r),!1):this._responseHandler._queueObserver(r)},e.prototype.isBroken=function(){return!!this._fatalError},e.prototype.notifyFatalErrorToObserver=function(r){r&&r.onError&&r.onError(this._fatalError)},e.prototype.resetFailure=function(){this._responseHandler._resetFailure()},e.prototype._onLoginCompleted=function(r,t,n){if(this._initialized=!0,this._authToken=t,r){var i=r.server;this._server.version||(this._server.version=i)}n&&n(r)},e.prototype._onLoginError=function(r,t){this._onProtocolError(r.message),t&&t(r)},e}();ys.default=R4;var Cs={},Is={},$t={};Object.defineProperty($t,"__esModule",{value:!0});$t.epochSecondAndNanoToLocalDateTime=$t.nanoOfDayToLocalTime=$t.epochDayToDate=void 0;var Wr=V,yr=Wr.internal.temporalUtil,A4=yr.DAYS_0000_TO_1970,If=yr.DAYS_PER_400_YEAR_CYCLE,tp=yr.NANOS_PER_HOUR,rp=yr.NANOS_PER_MINUTE,fd=yr.NANOS_PER_SECOND,np=yr.SECONDS_PER_DAY,j4=yr.floorDiv,M4=yr.floorMod;function ig(e){e=(0,Wr.int)(e);var r=e.add(A4).subtract(60),t=(0,Wr.int)(0);if(r.lessThan(0)){var n=r.add(1).div(If).subtract(1);t=n.multiply(400),r=r.add(n.multiply(-If))}var i=r.multiply(400).add(591).div(If),o=r.subtract(i.multiply(365).add(i.div(4)).subtract(i.div(100)).add(i.div(400)));o.lessThan(0)&&(i=i.subtract(1),o=r.subtract(i.multiply(365).add(i.div(4)).subtract(i.div(100)).add(i.div(400)))),i=i.add(t);var a=o,c=a.multiply(5).add(2).div(153),s=c.add(2).modulo(12).add(1),u=a.subtract(c.multiply(306).add(5).div(10)).add(1);return i=i.add(c.div(10)),new Wr.Date(i,s,u)}$t.epochDayToDate=ig;function og(e){e=(0,Wr.int)(e);var r=e.div(tp);e=e.subtract(r.multiply(tp));var t=e.div(rp);e=e.subtract(t.multiply(rp));var n=e.div(fd),i=e.subtract(n.multiply(fd));return new Wr.LocalTime(r,t,n,i)}$t.nanoOfDayToLocalTime=og;function N4(e,r){var t=j4(e,np),n=M4(e,np),i=n.multiply(fd).add(r),o=ig(t),a=og(i);return new Wr.LocalDateTime(o.year,o.month,o.day,a.hour,a.minute,a.second,a.nanosecond)}$t.epochSecondAndNanoToLocalDateTime=N4;var rc=f&&f.__assign||function(){return rc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},rc.apply(this,arguments)},Bt=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},$4=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Is,"__esModule",{value:!0});var fe=V,Me=Fe,Wt=Ee,_i=$t,k4=$4(Es),fh=fe.internal.temporalUtil,D4=fh.dateToEpochDay,dh=fh.localDateTimeToEpochSecond,ag=fh.localTimeToNanoOfDay,ip=88,L4=3,op=89,U4=4,ap=69,F4=4,up=116,B4=1,cp=84,W4=2,sp=68,x4=1,lp=100,V4=2,fp=70,q4=3,dp=102,H4=3;function z4(){return new Wt.TypeTransformer({signature:ip,isTypeInstance:function(e){return(0,fe.isPoint)(e)&&(e.z===null||e.z===void 0)},toStructure:function(e){return new Me.structure.Structure(ip,[(0,fe.int)(e.srid),e.x,e.y])},fromStructure:function(e){Me.structure.verifyStructSize("Point2D",L4,e.size);var r=Bt(e.fields,3),t=r[0],n=r[1],i=r[2];return new fe.Point(t,n,i,void 0)}})}function G4(){return new Wt.TypeTransformer({signature:op,isTypeInstance:function(e){return(0,fe.isPoint)(e)&&e.z!==null&&e.z!==void 0},toStructure:function(e){return new Me.structure.Structure(op,[(0,fe.int)(e.srid),e.x,e.y,e.z])},fromStructure:function(e){Me.structure.verifyStructSize("Point3D",U4,e.size);var r=Bt(e.fields,4),t=r[0],n=r[1],i=r[2],o=r[3];return new fe.Point(t,n,i,o)}})}function Y4(){return new Wt.TypeTransformer({signature:ap,isTypeInstance:fe.isDuration,toStructure:function(e){var r=(0,fe.int)(e.months),t=(0,fe.int)(e.days),n=(0,fe.int)(e.seconds),i=(0,fe.int)(e.nanoseconds);return new Me.structure.Structure(ap,[r,t,n,i])},fromStructure:function(e){Me.structure.verifyStructSize("Duration",F4,e.size);var r=Bt(e.fields,4),t=r[0],n=r[1],i=r[2],o=r[3];return new fe.Duration(t,n,i,o)}})}function K4(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Wt.TypeTransformer({signature:up,isTypeInstance:fe.isLocalTime,toStructure:function(n){var i=ag(n.hour,n.minute,n.second,n.nanosecond);return new Me.structure.Structure(up,[i])},fromStructure:function(n){Me.structure.verifyStructSize("LocalTime",B4,n.size);var i=Bt(n.fields,1),o=i[0],a=(0,_i.nanoOfDayToLocalTime)(o);return pi(a,r,t)}})}function Z4(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Wt.TypeTransformer({signature:cp,isTypeInstance:fe.isTime,toStructure:function(n){var i=ag(n.hour,n.minute,n.second,n.nanosecond),o=(0,fe.int)(n.timeZoneOffsetSeconds);return new Me.structure.Structure(cp,[i,o])},fromStructure:function(n){Me.structure.verifyStructSize("Time",W4,n.size);var i=Bt(n.fields,2),o=i[0],a=i[1],c=(0,_i.nanoOfDayToLocalTime)(o),s=new fe.Time(c.hour,c.minute,c.second,c.nanosecond,a);return pi(s,r,t)}})}function Q4(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Wt.TypeTransformer({signature:sp,isTypeInstance:fe.isDate,toStructure:function(n){var i=D4(n.year,n.month,n.day);return new Me.structure.Structure(sp,[i])},fromStructure:function(n){Me.structure.verifyStructSize("Date",x4,n.size);var i=Bt(n.fields,1),o=i[0],a=(0,_i.epochDayToDate)(o);return pi(a,r,t)}})}function X4(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Wt.TypeTransformer({signature:lp,isTypeInstance:fe.isLocalDateTime,toStructure:function(n){var i=dh(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),o=(0,fe.int)(n.nanosecond);return new Me.structure.Structure(lp,[i,o])},fromStructure:function(n){Me.structure.verifyStructSize("LocalDateTime",V4,n.size);var i=Bt(n.fields,2),o=i[0],a=i[1],c=(0,_i.epochSecondAndNanoToLocalDateTime)(o,a);return pi(c,r,t)}})}function J4(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Wt.TypeTransformer({signature:dp,isTypeInstance:function(n){return(0,fe.isDateTime)(n)&&n.timeZoneId!=null},toStructure:function(n){var i=dh(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),o=(0,fe.int)(n.nanosecond),a=n.timeZoneId;return new Me.structure.Structure(dp,[i,o,a])},fromStructure:function(n){Me.structure.verifyStructSize("DateTimeWithZoneId",H4,n.size);var i=Bt(n.fields,3),o=i[0],a=i[1],c=i[2],s=(0,_i.epochSecondAndNanoToLocalDateTime)(o,a),u=new fe.DateTime(s.year,s.month,s.day,s.hour,s.minute,s.second,s.nanosecond,null,c);return pi(u,r,t)}})}function e3(e){var r=e.disableLosslessIntegers,t=e.useBigInt;return new Wt.TypeTransformer({signature:fp,isTypeInstance:function(n){return(0,fe.isDateTime)(n)&&n.timeZoneId==null},toStructure:function(n){var i=dh(n.year,n.month,n.day,n.hour,n.minute,n.second,n.nanosecond),o=(0,fe.int)(n.nanosecond),a=(0,fe.int)(n.timeZoneOffsetSeconds);return new Me.structure.Structure(fp,[i,o,a])},fromStructure:function(n){Me.structure.verifyStructSize("DateTimeWithZoneOffset",q4,n.size);var i=Bt(n.fields,3),o=i[0],a=i[1],c=i[2],s=(0,_i.epochSecondAndNanoToLocalDateTime)(o,a),u=new fe.DateTime(s.year,s.month,s.day,s.hour,s.minute,s.second,s.nanosecond,c,null);return pi(u,r,t)}})}function pi(e,r,t){if(!r&&!t)return e;var n=function(c){return t?c.toBigInt():c.toNumberOrInfinity()},i=Object.create(Object.getPrototypeOf(e));for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)===!0){var a=e[o];i[o]=(0,fe.isInt)(a)?n(a):a}return Object.freeze(i),i}Is.default=rc(rc({},k4.default),{createPoint2DTransformer:z4,createPoint3DTransformer:G4,createDurationTransformer:Y4,createLocalTimeTransformer:K4,createTimeTransformer:Z4,createDateTransformer:Q4,createLocalDateTimeTransformer:X4,createDateTimeWithZoneIdTransformer:J4,createDateTimeWithOffsetTransformer:e3});var t3=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rs=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cs,"__esModule",{value:!0});var r3=Rs(ys),hp=Rs(Fe),n3=V,i3=Rs(Is),o3=Rs(Ee),a3=n3.internal.constants.BOLT_PROTOCOL_V2,u3=function(e){t3(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype._createPacker=function(t){return new hp.default.Packer(t)},r.prototype._createUnpacker=function(t,n){return new hp.default.Unpacker(t,n)},Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new o3.default(Object.values(i3.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return a3},enumerable:!1,configurable:!0}),r}(r3.default);Cs.default=u3;var As={},js={},dd=f&&f.__assign||function(){return dd=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},dd.apply(this,arguments)},c3=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(js,"__esModule",{value:!0});var s3=c3(Is);js.default=dd({},s3.default);var l3=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),nc=f&&f.__assign||function(){return nc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},nc.apply(this,arguments)},Ms=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(As,"__esModule",{value:!0});var f3=Ms(Cs),Rr=Ms(We),Ar=ke,kr=te,d3=Ms(js),h3=Ms(Ee),hh=V;hh.internal.bookmarks.Bookmarks;var v3=hh.internal.constants.BOLT_PROTOCOL_V3,_3=hh.internal.txConfig.TxConfig,ug="context",p3="CALL dbms.cluster.routing.getRoutingTable($".concat(ug,")"),y3=new kr.StreamObserver,b3=function(e){l3(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return v3},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new h3.default(Object.values(d3.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.transformMetadata=function(t){return"t_first"in t&&(t.result_available_after=t.t_first,delete t.t_first),"t_last"in t&&(t.result_consumed_after=t.t_last,delete t.t_last),t},r.prototype.initialize=function(t){var n=this,i=t===void 0?{}:t,o=i.userAgent;i.boltAgent;var a=i.authToken,c=i.notificationFilter,s=i.onError,u=i.onComplete,l=new kr.LoginObserver({onError:function(h){return n._onLoginError(h,s)},onCompleted:function(h){return n._onLoginCompleted(h,a,u)}});return(0,Ar.assertNotificationFilterIsEmpty)(c,this._onProtocolError,l),this.write(Rr.default.hello(o,a),l,!0),l},r.prototype.prepareToClose=function(){this.write(Rr.default.goodbye(),y3,!0)},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,i=n.bookmarks,o=n.txConfig,a=n.database,c=n.impersonatedUser,s=n.notificationFilter,u=n.mode,l=n.beforeError,h=n.afterError,_=n.beforeComplete,y=n.afterComplete,m=new kr.ResultStreamObserver({server:this._server,beforeError:l,afterError:h,beforeComplete:_,afterComplete:y});return m.prepareToHandleSingleResponse(),(0,Ar.assertDatabaseIsEmpty)(a,this._onProtocolError,m),(0,Ar.assertImpersonatedUserIsEmpty)(c,this._onProtocolError,m),(0,Ar.assertNotificationFilterIsEmpty)(s,this._onProtocolError,m),this.write(Rr.default.begin({bookmarks:i,txConfig:o,mode:u}),m,!0),m},r.prototype.commitTransaction=function(t){var n=t===void 0?{}:t,i=n.beforeError,o=n.afterError,a=n.beforeComplete,c=n.afterComplete,s=new kr.ResultStreamObserver({server:this._server,beforeError:i,afterError:o,beforeComplete:a,afterComplete:c});return s.prepareToHandleSingleResponse(),this.write(Rr.default.commit(),s,!0),s},r.prototype.rollbackTransaction=function(t){var n=t===void 0?{}:t,i=n.beforeError,o=n.afterError,a=n.beforeComplete,c=n.afterComplete,s=new kr.ResultStreamObserver({server:this._server,beforeError:i,afterError:o,beforeComplete:a,afterComplete:c});return s.prepareToHandleSingleResponse(),this.write(Rr.default.rollback(),s,!0),s},r.prototype.run=function(t,n,i){var o=i===void 0?{}:i,a=o.bookmarks,c=o.txConfig,s=o.database,u=o.impersonatedUser,l=o.notificationFilter,h=o.mode,_=o.beforeKeys,y=o.afterKeys,m=o.beforeError,E=o.afterError,w=o.beforeComplete,S=o.afterComplete,A=o.flush,R=A===void 0?!0:A,I=o.highRecordWatermark,j=I===void 0?Number.MAX_VALUE:I,M=o.lowRecordWatermark,G=M===void 0?Number.MAX_VALUE:M,H=new kr.ResultStreamObserver({server:this._server,beforeKeys:_,afterKeys:y,beforeError:m,afterError:E,beforeComplete:w,afterComplete:S,highRecordWatermark:j,lowRecordWatermark:G});return(0,Ar.assertDatabaseIsEmpty)(s,this._onProtocolError,H),(0,Ar.assertImpersonatedUserIsEmpty)(u,this._onProtocolError,H),(0,Ar.assertNotificationFilterIsEmpty)(l,this._onProtocolError,H),this.write(Rr.default.runWithMetadata(t,n,{bookmarks:a,txConfig:c,mode:h}),H,!1),this.write(Rr.default.pullAll(),H,R),H},r.prototype.requestRoutingInformation=function(t){var n,i=t.routingContext,o=i===void 0?{}:i,a=t.sessionContext,c=a===void 0?{}:a,s=t.onError,u=t.onCompleted,l=this.run(p3,(n={},n[ug]=o,n),nc(nc({},c),{txConfig:_3.empty()}));return new kr.ProcedureRouteObserver({resultObserver:l,onProtocolError:this._onProtocolError,onError:s,onCompleted:u})},r}(f3.default);As.default=b3;var Ns={},$s={},hd=f&&f.__assign||function(){return hd=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},hd.apply(this,arguments)},m3=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($s,"__esModule",{value:!0});var g3=m3(js);$s.default=hd({},g3.default);var O3=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ic=f&&f.__assign||function(){return ic=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ic.apply(this,arguments)},ks=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ns,"__esModule",{value:!0});var E3=ks(As),ki=ks(We),Nu=ke,Rf=te,w3=ks($s),T3=ks(Ee),vh=V;vh.internal.bookmarks.Bookmarks;var cg=vh.internal.constants,S3=cg.BOLT_PROTOCOL_V4_0,P3=cg.FETCH_ALL,C3=vh.internal.txConfig.TxConfig,sg="context",lg="database",I3="CALL dbms.routing.getRoutingTable($".concat(sg,", $").concat(lg,")"),R3=function(e){O3(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return S3},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new T3.default(Object.values(w3.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,i=n.bookmarks,o=n.txConfig,a=n.database,c=n.impersonatedUser,s=n.notificationFilter,u=n.mode,l=n.beforeError,h=n.afterError,_=n.beforeComplete,y=n.afterComplete,m=new Rf.ResultStreamObserver({server:this._server,beforeError:l,afterError:h,beforeComplete:_,afterComplete:y});return m.prepareToHandleSingleResponse(),(0,Nu.assertImpersonatedUserIsEmpty)(c,this._onProtocolError,m),(0,Nu.assertNotificationFilterIsEmpty)(s,this._onProtocolError,m),this.write(ki.default.begin({bookmarks:i,txConfig:o,database:a,mode:u}),m,!0),m},r.prototype.run=function(t,n,i){var o=i===void 0?{}:i,a=o.bookmarks,c=o.txConfig,s=o.database,u=o.impersonatedUser,l=o.notificationFilter,h=o.mode,_=o.beforeKeys,y=o.afterKeys,m=o.beforeError,E=o.afterError,w=o.beforeComplete,S=o.afterComplete,A=o.flush,R=A===void 0?!0:A,I=o.reactive,j=I===void 0?!1:I,M=o.fetchSize,G=M===void 0?P3:M,H=o.highRecordWatermark,ie=H===void 0?Number.MAX_VALUE:H,ue=o.lowRecordWatermark,pe=ue===void 0?Number.MAX_VALUE:ue,J=new Rf.ResultStreamObserver({server:this._server,reactive:j,fetchSize:G,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:_,afterKeys:y,beforeError:m,afterError:E,beforeComplete:w,afterComplete:S,highRecordWatermark:ie,lowRecordWatermark:pe});(0,Nu.assertImpersonatedUserIsEmpty)(u,this._onProtocolError,J),(0,Nu.assertNotificationFilterIsEmpty)(l,this._onProtocolError,J);var _e=j;return this.write(ki.default.runWithMetadata(t,n,{bookmarks:a,txConfig:c,database:s,mode:h}),J,_e&&R),j||this.write(ki.default.pull({n:G}),J,R),J},r.prototype._requestMore=function(t,n,i){this.write(ki.default.pull({stmtId:t,n}),i,!0)},r.prototype._requestDiscard=function(t,n){this.write(ki.default.discard({stmtId:t}),n,!0)},r.prototype._noOp=function(){},r.prototype.requestRoutingInformation=function(t){var n,i=t.routingContext,o=i===void 0?{}:i,a=t.databaseName,c=a===void 0?null:a,s=t.sessionContext,u=s===void 0?{}:s,l=t.onError,h=t.onCompleted,_=this.run(I3,(n={},n[sg]=o,n[lg]=c,n),ic(ic({},u),{txConfig:C3.empty()}));return new Rf.ProcedureRouteObserver({resultObserver:_,onProtocolError:this._onProtocolError,onError:l,onCompleted:h})},r}(E3.default);Ns.default=R3;var Ds={},Ls={},vd=f&&f.__assign||function(){return vd=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},vd.apply(this,arguments)},A3=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ls,"__esModule",{value:!0});var j3=A3($s);Ls.default=vd({},j3.default);var M3=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Us=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ds,"__esModule",{value:!0});var N3=Us(Ns),$3=Us(We),k3=te,D3=V,L3=ke,U3=Us(Ls),F3=Us(Ee),B3=D3.internal.constants.BOLT_PROTOCOL_V4_1,W3=function(e){M3(r,e);function r(t,n,i,o,a,c,s){o===void 0&&(o=function(){return null});var u=e.call(this,t,n,i,o,a,c)||this;return u._serversideRouting=s,u}return Object.defineProperty(r.prototype,"version",{get:function(){return B3},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new F3.default(Object.values(U3.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,i=t===void 0?{}:t,o=i.userAgent;i.boltAgent;var a=i.authToken,c=i.notificationFilter,s=i.onError,u=i.onComplete,l=new k3.LoginObserver({onError:function(h){return n._onLoginError(h,s)},onCompleted:function(h){return n._onLoginCompleted(h,a,u)}});return(0,L3.assertNotificationFilterIsEmpty)(c,this._onProtocolError,l),this.write($3.default.hello(o,a,this._serversideRouting),l,!0),l},r}(N3.default);Ds.default=W3;var Fs={},Bs={},_d=f&&f.__assign||function(){return _d=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_d.apply(this,arguments)},x3=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bs,"__esModule",{value:!0});var V3=x3(Ls);Bs.default=_d({},V3.default);var q3=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_h=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fs,"__esModule",{value:!0});var H3=_h(Ds),z3=V,G3=_h(Bs),Y3=_h(Ee),K3=z3.internal.constants.BOLT_PROTOCOL_V4_2,Z3=function(e){q3(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return K3},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Y3.default(Object.values(G3.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r}(H3.default);Fs.default=Z3;var lu={},Ws={},pd=f&&f.__assign||function(){return pd=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},pd.apply(this,arguments)},Q3=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ws,"__esModule",{value:!0});var X3=Q3(Bs);Ws.default=pd({},X3.default);var fu={},du={},yd=f&&f.__assign||function(){return yd=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},yd.apply(this,arguments)},J3=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(du,"__esModule",{value:!0});var eW=J3(Ws);du.default=yd({},eW.default);var fg=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},tW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fu,"__esModule",{value:!0});var oc=Fe,Qe=V,dg=tW(du),rW=$t,nW=Kr,no=Qe.internal.temporalUtil.localDateTimeToEpochSecond,vp=73,iW=3,_p=105,oW=3;function aW(e,r){var t=e.disableLosslessIntegers,n=e.useBigInt,i=dg.default.createDateTimeWithZoneIdTransformer(e);return i.extendsWith({signature:_p,fromStructure:function(o){oc.structure.verifyStructSize("DateTimeWithZoneId",oW,o.size);var a=fg(o.fields,3),c=a[0],s=a[1],u=a[2],l=bd(u,c,s),h=new Qe.DateTime(l.year,l.month,l.day,l.hour,l.minute,l.second,(0,Qe.int)(s),l.timeZoneOffsetSeconds,u);return hg(h,t,n)},toStructure:function(o){var a=no(o.year,o.month,o.day,o.hour,o.minute,o.second,o.nanosecond),c=o.timeZoneOffsetSeconds!=null?o.timeZoneOffsetSeconds:uW(o.timeZoneId,a,o.nanosecond);o.timeZoneOffsetSeconds==null&&r.warn('DateTime objects without "timeZoneOffsetSeconds" property are prune to bugs related to ambiguous times. For instance, 2022-10-30T2:30:00[Europe/Berlin] could be GMT+1 or GMT+2.');var s=a.subtract(c),u=(0,Qe.int)(o.nanosecond),l=o.timeZoneId;return new oc.structure.Structure(_p,[s,u,l])}})}function uW(e,r,t){var n=bd(e,r,t),i=no(n.year,n.month,n.day,n.hour,n.minute,n.second,t),o=i.subtract(r),a=r.subtract(o),c=bd(e,a,t),s=no(c.year,c.month,c.day,c.hour,c.minute,c.second,t),u=s.subtract(a);return u}var Af=new Map;function cW(e){if(!Af.has(e)){var r=new Intl.DateTimeFormat("en-US",{timeZone:e,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"});Af.set(e,r)}return Af.get(e)}function bd(e,r,t){var n=cW(e),i=(0,Qe.int)(r).multiply(1e3).add((0,Qe.int)(t).div(1e6)).toNumber(),o=n.formatToParts(i),a=o.reduce(function(s,u){return u.type==="era"?s.adjustEra=u.value.toUpperCase()==="B"?function(l){return l.subtract(1).negate()}:nW.identity:u.type==="hour"?s.hour=(0,Qe.int)(u.value).modulo(24):u.type!=="literal"&&(s[u.type]=(0,Qe.int)(u.value)),s},{});a.year=a.adjustEra(a.year);var c=no(a.year,a.month,a.day,a.hour,a.minute,a.second,a.nanosecond);return a.timeZoneOffsetSeconds=c.subtract(r),a.hour=a.hour.modulo(24),a}function sW(e){var r=e.disableLosslessIntegers,t=e.useBigInt,n=dg.default.createDateTimeWithOffsetTransformer(e);return n.extendsWith({signature:vp,toStructure:function(i){var o=no(i.year,i.month,i.day,i.hour,i.minute,i.second,i.nanosecond),a=(0,Qe.int)(i.nanosecond),c=(0,Qe.int)(i.timeZoneOffsetSeconds),s=o.subtract(c);return new oc.structure.Structure(vp,[s,a,c])},fromStructure:function(i){oc.structure.verifyStructSize("DateTimeWithZoneOffset",iW,i.size);var o=fg(i.fields,3),a=o[0],c=o[1],s=o[2],u=(0,Qe.int)(a).add(s),l=(0,rW.epochSecondAndNanoToLocalDateTime)(u,c),h=new Qe.DateTime(l.year,l.month,l.day,l.hour,l.minute,l.second,l.nanosecond,s,null);return hg(h,r,t)}})}function hg(e,r,t){if(!r&&!t)return e;var n=function(c){return t?c.toBigInt():c.toNumberOrInfinity()},i=Object.create(Object.getPrototypeOf(e));for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)===!0){var a=e[o];i[o]=(0,Qe.isInt)(a)?n(a):a}return Object.freeze(i),i}fu.default={createDateTimeWithZoneIdTransformer:aW,createDateTimeWithOffsetTransformer:sW};var lW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ac=f&&f.__assign||function(){return ac=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ac.apply(this,arguments)},hu=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lu,"__esModule",{value:!0});var fW=hu(Fs),pp=hu(We),yp=te,dW=ke,bp=hu(Ws),hW=hu(fu),mp=hu(Ee),vg=V,vW=vg.internal.bookmarks.Bookmarks,_W=vg.internal.constants.BOLT_PROTOCOL_V4_3,pW=function(e){lW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return _W},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new mp.default(Object.values(bp.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.requestRoutingInformation=function(t){var n=t.routingContext,i=n===void 0?{}:n,o=t.databaseName,a=o===void 0?null:o,c=t.sessionContext,s=c===void 0?{}:c,u=t.onError,l=t.onCompleted,h=new yp.RouteObserver({onProtocolError:this._onProtocolError,onError:u,onCompleted:l}),_=s.bookmarks||vW.empty();return this.write(pp.default.route(i,_.values(),a),h,!0),h},r.prototype.initialize=function(t){var n=this,i=t===void 0?{}:t,o=i.userAgent;i.boltAgent;var a=i.authToken,c=i.notificationFilter,s=i.onError,u=i.onComplete,l=new yp.LoginObserver({onError:function(h){return n._onLoginError(h,s)},onCompleted:function(h){return h.patch_bolt!==void 0&&n._applyPatches(h.patch_bolt),n._onLoginCompleted(h,a,u)}});return(0,dW.assertNotificationFilterIsEmpty)(c,this._onProtocolError,l),this.write(pp.default.hello(o,a,this._serversideRouting,["utc"]),l,!0),l},r.prototype._applyPatches=function(t){t.includes("utc")&&this._applyUtcPatch()},r.prototype._applyUtcPatch=function(){var t=this;this._transformer=new mp.default(Object.values(ac(ac({},bp.default),hW.default)).map(function(n){return n(t._config,t._log)}))},r}(fW.default);lu.default=pW;var xs={},yW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),uc=f&&f.__assign||function(){return uc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},uc.apply(this,arguments)},vu=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xs,"__esModule",{value:!0});var bW=vu(lu),_g=V,$u=vu(We),jf=te,gp=ke,Op=vu(du),mW=vu(fu),Ep=vu(Ee),pg=_g.internal.constants,gW=pg.BOLT_PROTOCOL_V4_4,OW=pg.FETCH_ALL,EW=_g.internal.bookmarks.Bookmarks,wW=function(e){yW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return gW},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Ep.default(Object.values(Op.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.requestRoutingInformation=function(t){var n=t.routingContext,i=n===void 0?{}:n,o=t.databaseName,a=o===void 0?null:o,c=t.impersonatedUser,s=c===void 0?null:c,u=t.sessionContext,l=u===void 0?{}:u,h=t.onError,_=t.onCompleted,y=new jf.RouteObserver({onProtocolError:this._onProtocolError,onError:h,onCompleted:_}),m=l.bookmarks||EW.empty();return this.write($u.default.routeV4x4(i,m.values(),{databaseName:a,impersonatedUser:s}),y,!0),y},r.prototype.run=function(t,n,i){var o=i===void 0?{}:i,a=o.bookmarks,c=o.txConfig,s=o.database,u=o.mode,l=o.impersonatedUser,h=o.notificationFilter,_=o.beforeKeys,y=o.afterKeys,m=o.beforeError,E=o.afterError,w=o.beforeComplete,S=o.afterComplete,A=o.flush,R=A===void 0?!0:A,I=o.reactive,j=I===void 0?!1:I,M=o.fetchSize,G=M===void 0?OW:M,H=o.highRecordWatermark,ie=H===void 0?Number.MAX_VALUE:H,ue=o.lowRecordWatermark,pe=ue===void 0?Number.MAX_VALUE:ue,J=new jf.ResultStreamObserver({server:this._server,reactive:j,fetchSize:G,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:_,afterKeys:y,beforeError:m,afterError:E,beforeComplete:w,afterComplete:S,highRecordWatermark:ie,lowRecordWatermark:pe});(0,gp.assertNotificationFilterIsEmpty)(h,this._onProtocolError,J);var _e=j;return this.write($u.default.runWithMetadata(t,n,{bookmarks:a,txConfig:c,database:s,mode:u,impersonatedUser:l}),J,_e&&R),j||this.write($u.default.pull({n:G}),J,R),J},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,i=n.bookmarks,o=n.txConfig,a=n.database,c=n.mode,s=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,h=n.afterError,_=n.beforeComplete,y=n.afterComplete,m=new jf.ResultStreamObserver({server:this._server,beforeError:l,afterError:h,beforeComplete:_,afterComplete:y});return m.prepareToHandleSingleResponse(),(0,gp.assertNotificationFilterIsEmpty)(u,this._onProtocolError,m),this.write($u.default.begin({bookmarks:i,txConfig:o,database:a,mode:c,impersonatedUser:s}),m,!0),m},r.prototype._applyUtcPatch=function(){var t=this;this._transformer=new Ep.default(Object.values(uc(uc({},Op.default),mW.default)).map(function(n){return n(t._config,t._log)}))},r}(bW.default);xs.default=wW;var Vs={},qs={},Zi=f&&f.__assign||function(){return Zi=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Zi.apply(this,arguments)},ph=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},yg=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qs,"__esModule",{value:!0});var yh=Fe,bh=V,Hs=yg(du),TW=yg(fu),SW=4,PW=8,CW=4;function IW(e){var r=Hs.default.createNodeTransformer(e);return r.extendsWith({fromStructure:function(t){yh.structure.verifyStructSize("Node",SW,t.size);var n=ph(t.fields,4),i=n[0],o=n[1],a=n[2],c=n[3];return new bh.Node(i,o,a,c)}})}function RW(e){var r=Hs.default.createRelationshipTransformer(e);return r.extendsWith({fromStructure:function(t){yh.structure.verifyStructSize("Relationship",PW,t.size);var n=ph(t.fields,8),i=n[0],o=n[1],a=n[2],c=n[3],s=n[4],u=n[5],l=n[6],h=n[7];return new bh.Relationship(i,o,a,c,s,u,l,h)}})}function AW(e){var r=Hs.default.createUnboundRelationshipTransformer(e);return r.extendsWith({fromStructure:function(t){yh.structure.verifyStructSize("UnboundRelationship",CW,t.size);var n=ph(t.fields,4),i=n[0],o=n[1],a=n[2],c=n[3];return new bh.UnboundRelationship(i,o,a,c)}})}qs.default=Zi(Zi(Zi({},Hs.default),TW.default),{createNodeTransformer:IW,createRelationshipTransformer:RW,createUnboundRelationshipTransformer:AW});var jW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zs=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vs,"__esModule",{value:!0});var MW=zs(xs),NW=ke,$W=zs(qs),kW=zs(Ee),DW=zs(We),LW=te,UW=V,FW=UW.internal.constants.BOLT_PROTOCOL_V5_0,BW=function(e){jW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return FW},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new kW.default(Object.values($W.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,i=t===void 0?{}:t,o=i.userAgent;i.boltAgent;var a=i.authToken,c=i.notificationFilter,s=i.onError,u=i.onComplete,l=new LW.LoginObserver({onError:function(h){return n._onLoginError(h,s)},onCompleted:function(h){return n._onLoginCompleted(h,a,u)}});return(0,NW.assertNotificationFilterIsEmpty)(c,this._onProtocolError,l),this.write(DW.default.hello(o,a,this._serversideRouting),l,!0),l},r}(MW.default);Vs.default=BW;var Gs={},Ys={},md=f&&f.__assign||function(){return md=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},md.apply(this,arguments)},WW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ys,"__esModule",{value:!0});var xW=WW(qs);Ys.default=md({},xW.default);var VW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),cc=f&&f.__assign||function(){return cc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},cc.apply(this,arguments)},Ks=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gs,"__esModule",{value:!0});var qW=Ks(Vs),HW=ke,zW=Ks(Ys),GW=Ks(Ee),Mf=Ks(We),Nf=te,YW=V,KW=YW.internal.constants.BOLT_PROTOCOL_V5_1,ZW=function(e){VW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return KW},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new GW.default(Object.values(zW.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,i=t===void 0?{}:t,o=i.userAgent;i.boltAgent;var a=i.authToken,c=i.notificationFilter,s=i.onError,u=i.onComplete,l={},h=new Nf.LoginObserver({onError:function(_){return n._onLoginError(_,s)},onCompleted:function(_){return l.metadata=_,n._onLoginCompleted(_)}});return(0,HW.assertNotificationFilterIsEmpty)(c,this._onProtocolError,h),this.write(Mf.default.hello5x1(o,this._serversideRouting),h,!1),this.logon({authToken:a,onComplete:function(_){return u(cc(cc({},_),l.metadata))},onError:s,flush:!0})},r.prototype.logon=function(t){var n=this,i=t===void 0?{}:t,o=i.authToken,a=i.onComplete,c=i.onError,s=i.flush,u=new Nf.LoginObserver({onCompleted:function(){return n._onLoginCompleted(null,o,a)},onError:function(l){return n._onLoginError(l,c)}});return this.write(Mf.default.logon(o),u,s),u},r.prototype.logoff=function(t){var n=t===void 0?{}:t,i=n.onComplete,o=n.onError,a=n.flush,c=new Nf.LogoffObserver({onCompleted:i,onError:o});return this.write(Mf.default.logoff(),c,a),c},r}(qW.default);Gs.default=ZW;var Zs={},Qs={},gd=f&&f.__assign||function(){return gd=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},gd.apply(this,arguments)},QW=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qs,"__esModule",{value:!0});var XW=QW(Ys);Qs.default=gd({},XW.default);var JW=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),sc=f&&f.__assign||function(){return sc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},sc.apply(this,arguments)},Xs=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zs,"__esModule",{value:!0});var ex=Xs(Gs),tx=Xs(Qs),rx=Xs(Ee),ku=Xs(We),$f=te,nx=V,bg=nx.internal.constants,ix=bg.BOLT_PROTOCOL_V5_2,ox=bg.FETCH_ALL,ax=function(e){JW(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return ix},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new rx.default(Object.values(tx.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,i=t===void 0?{}:t,o=i.userAgent;i.boltAgent;var a=i.authToken,c=i.notificationFilter,s=i.onError,u=i.onComplete,l={},h=new $f.LoginObserver({onError:function(_){return n._onLoginError(_,s)},onCompleted:function(_){return l.metadata=_,n._onLoginCompleted(_)}});return this.write(ku.default.hello5x2(o,c,this._serversideRouting),h,!1),this.logon({authToken:a,onComplete:function(_){return u(sc(sc({},_),l.metadata))},onError:s,flush:!0})},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,i=n.bookmarks,o=n.txConfig,a=n.database,c=n.mode,s=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,h=n.afterError,_=n.beforeComplete,y=n.afterComplete,m=new $f.ResultStreamObserver({server:this._server,beforeError:l,afterError:h,beforeComplete:_,afterComplete:y});return m.prepareToHandleSingleResponse(),this.write(ku.default.begin({bookmarks:i,txConfig:o,database:a,mode:c,impersonatedUser:s,notificationFilter:u}),m,!0),m},r.prototype.run=function(t,n,i){var o=i===void 0?{}:i,a=o.bookmarks,c=o.txConfig,s=o.database,u=o.mode,l=o.impersonatedUser,h=o.notificationFilter,_=o.beforeKeys,y=o.afterKeys,m=o.beforeError,E=o.afterError,w=o.beforeComplete,S=o.afterComplete,A=o.flush,R=A===void 0?!0:A,I=o.reactive,j=I===void 0?!1:I,M=o.fetchSize,G=M===void 0?ox:M,H=o.highRecordWatermark,ie=H===void 0?Number.MAX_VALUE:H,ue=o.lowRecordWatermark,pe=ue===void 0?Number.MAX_VALUE:ue,J=new $f.ResultStreamObserver({server:this._server,reactive:j,fetchSize:G,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:_,afterKeys:y,beforeError:m,afterError:E,beforeComplete:w,afterComplete:S,highRecordWatermark:ie,lowRecordWatermark:pe}),_e=j;return this.write(ku.default.runWithMetadata(t,n,{bookmarks:a,txConfig:c,database:s,mode:u,impersonatedUser:l,notificationFilter:h}),J,_e&&R),j||this.write(ku.default.pull({n:G}),J,R),J},r}(ex.default);Zs.default=ax;var Js={},el={},Od=f&&f.__assign||function(){return Od=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Od.apply(this,arguments)},ux=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(el,"__esModule",{value:!0});var cx=ux(Qs);el.default=Od({},cx.default);var sx=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),lc=f&&f.__assign||function(){return lc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},lc.apply(this,arguments)},tl=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Js,"__esModule",{value:!0});var lx=tl(Zs),fx=tl(el),dx=tl(Ee),hx=tl(We),vx=te,_x=V,px=_x.internal.constants.BOLT_PROTOCOL_V5_3,yx=function(e){sx(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return px},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new dx.default(Object.values(fx.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,i=t===void 0?{}:t,o=i.userAgent,a=i.boltAgent,c=i.authToken,s=i.notificationFilter,u=i.onError,l=i.onComplete,h={},_=new vx.LoginObserver({onError:function(y){return n._onLoginError(y,u)},onCompleted:function(y){return h.metadata=y,n._onLoginCompleted(y)}});return this.write(hx.default.hello5x3(o,a,s,this._serversideRouting),_,!1),this.logon({authToken:c,onComplete:function(y){return l(lc(lc({},y),h.metadata))},onError:u,flush:!0})},r}(lx.default);Js.default=yx;var rl={},nl={},Ed=f&&f.__assign||function(){return Ed=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ed.apply(this,arguments)},bx=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nl,"__esModule",{value:!0});var mx=bx(el);nl.default=Ed({},mx.default);var gx=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),il=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rl,"__esModule",{value:!0});var Ox=il(Js),Ex=il(nl),wx=il(We),Tx=te,Sx=il(Ee),Px=V,Cx=Px.internal.constants.BOLT_PROTOCOL_V5_4,Ix=function(e){gx(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return Cx},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Sx.default(Object.values(Ex.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.telemetry=function(t,n){var i=t.api,o=n===void 0?{}:n,a=o.onError,c=o.onCompleted,s=new Tx.TelemetryObserver({onCompleted:c,onError:a});return this.write(wx.default.telemetry({api:i}),s,!1),s},r}(Ox.default);rl.default=Ix;var ol={},_u={},wd=f&&f.__assign||function(){return wd=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},wd.apply(this,arguments)},Rx=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_u,"__esModule",{value:!0});var Ax=Rx(nl);_u.default=wd({},Ax.default);var jx=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gt=f&&f.__assign||function(){return Gt=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Gt.apply(this,arguments)},al=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ol,"__esModule",{value:!0});var Mx=al(rl),Nx=al(_u),$x=al(Ee),Du=al(We),kf=te,kx=V,mg=kx.internal.constants,Dx=mg.BOLT_PROTOCOL_V5_5,Lx=mg.FETCH_ALL,Ux=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),Fx=function(e){jx(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return Dx},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new $x.default(Object.values(Nx.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.initialize=function(t){var n=this,i=t===void 0?{}:t,o=i.userAgent,a=i.boltAgent,c=i.authToken,s=i.notificationFilter,u=i.onError,l=i.onComplete,h={},_=new kf.LoginObserver({onError:function(y){return n._onLoginError(y,u)},onCompleted:function(y){return h.metadata=y,n._onLoginCompleted(y)}});return this.write(Du.default.hello5x5(o,a,s,this._serversideRouting),_,!1),this.logon({authToken:c,onComplete:function(y){return l(Gt(Gt({},y),h.metadata))},onError:u,flush:!0})},r.prototype.beginTransaction=function(t){var n=t===void 0?{}:t,i=n.bookmarks,o=n.txConfig,a=n.database,c=n.mode,s=n.impersonatedUser,u=n.notificationFilter,l=n.beforeError,h=n.afterError,_=n.beforeComplete,y=n.afterComplete,m=new kf.ResultStreamObserver({server:this._server,beforeError:l,afterError:h,beforeComplete:_,afterComplete:y});return m.prepareToHandleSingleResponse(),this.write(Du.default.begin5x5({bookmarks:i,txConfig:o,database:a,mode:c,impersonatedUser:s,notificationFilter:u}),m,!0),m},r.prototype.run=function(t,n,i){var o=i===void 0?{}:i,a=o.bookmarks,c=o.txConfig,s=o.database,u=o.mode,l=o.impersonatedUser,h=o.notificationFilter,_=o.beforeKeys,y=o.afterKeys,m=o.beforeError,E=o.afterError,w=o.beforeComplete,S=o.afterComplete,A=o.flush,R=A===void 0?!0:A,I=o.reactive,j=I===void 0?!1:I,M=o.fetchSize,G=M===void 0?Lx:M,H=o.highRecordWatermark,ie=H===void 0?Number.MAX_VALUE:H,ue=o.lowRecordWatermark,pe=ue===void 0?Number.MAX_VALUE:ue,J=new kf.ResultStreamObserver({server:this._server,reactive:j,fetchSize:G,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:_,afterKeys:y,beforeError:m,afterError:E,beforeComplete:w,afterComplete:S,highRecordWatermark:ie,lowRecordWatermark:pe,enrichMetadata:this._enrichMetadata}),_e=j;return this.write(Du.default.runWithMetadata5x5(t,n,{bookmarks:a,txConfig:c,database:s,mode:u,impersonatedUser:l,notificationFilter:h}),J,_e&&R),j||this.write(Du.default.pull({n:G}),J,R),J},r.prototype._enrichMetadata=function(t){return Array.isArray(t.statuses)&&(t.statuses=t.statuses.map(function(n){return Gt(Gt({},n),{description:n.neo4j_code!=null?n.status_description:n.description,diagnostic_record:n.diagnostic_record!==null?Gt(Gt({},Ux),n.diagnostic_record):null})})),t},r}(Mx.default);ol.default=Fx;var ul={},Bx=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),En=f&&f.__assign||function(){return En=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},En.apply(this,arguments)},mh=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ul,"__esModule",{value:!0});var Wx=mh(ol),xx=mh(_u),Vx=mh(Ee),qx=V,Hx=qx.internal.constants.BOLT_PROTOCOL_V5_6,zx=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),Gx=function(e){Bx(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return Hx},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Vx.default(Object.values(xx.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype._enrichMetadata=function(t){return Array.isArray(t.statuses)&&(t.statuses=t.statuses.map(function(n){return En(En({},n),{diagnostic_record:n.diagnostic_record!==null?En(En({},zx),n.diagnostic_record):null})})),t},r}(Wx.default);ul.default=Gx;var gh={},Yx=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),wn=f&&f.__assign||function(){return wn=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},wn.apply(this,arguments)},Oh=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gh,"__esModule",{value:!0});var Kx=Oh(ul),Zx=Oh(_u),Qx=Oh(Ee),Xx=V,Jx=Xx.internal.constants.BOLT_PROTOCOL_V5_7,e6=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),t6=function(e){Yx(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"version",{get:function(){return Jx},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transformer",{get:function(){var t=this;return this._transformer===void 0&&(this._transformer=new Qx.default(Object.values(Zx.default).map(function(n){return n(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),r.prototype.enrichErrorMetadata=function(t){return wn(wn({},t),{cause:t.cause!==null&&t.cause!==void 0?this.enrichErrorMetadata(t.cause):null,code:t.neo4j_code,diagnostic_record:t.diagnostic_record!==null?wn(wn({},e6),t.diagnostic_record):null})},r}(Kx.default);gh.default=t6;var Eh={};Object.defineProperty(Eh,"__esModule",{value:!0});var qt=V,r6=112,n6=113,i6=126,o6=127;function It(){}function Df(e){return e}var a6={onNext:It,onCompleted:It,onError:It},u6=function(){function e(r){var t=r===void 0?{}:r,n=t.transformMetadata,i=t.enrichErrorMetadata,o=t.log,a=t.observer;this._pendingObservers=[],this._log=o,this._transformMetadata=n||Df,this._enrichErrorMetadata=i||Df,this._observer=Object.assign({onObserversCountChange:It,onError:It,onFailure:It,onErrorApplyTransformation:Df},a)}return Object.defineProperty(e.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),e.prototype.handleResponse=function(r){var t=r.fields[0];switch(r.signature){case n6:this._log.isDebugEnabled()&&this._log.debug("S: RECORD ".concat(qt.json.stringify(r))),this._currentObserver.onNext(t);break;case r6:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS ".concat(qt.json.stringify(r)));try{var n=this._transformMetadata(t);this._currentObserver.onCompleted(n)}finally{this._updateCurrentObserver()}break;case o6:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE ".concat(qt.json.stringify(r)));try{this._currentFailure=this._handleErrorPayload(this._enrichErrorMetadata(t)),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case i6:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED ".concat(qt.json.stringify(r)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,qt.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,qt.newError)("Unknown Bolt protocol message: "+r))}},e.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onObserversCountChange(this._observersCount)},Object.defineProperty(e.prototype,"_observersCount",{get:function(){return this._currentObserver==null?this._pendingObservers.length:this._pendingObservers.length+1},enumerable:!1,configurable:!0}),e.prototype._queueObserver=function(r){return r=r||a6,r.onCompleted=r.onCompleted||It,r.onError=r.onError||It,r.onNext=r.onNext||It,this._currentObserver===void 0?this._currentObserver=r:this._pendingObservers.push(r),this._observer.onObserversCountChange(this._observersCount),!0},e.prototype._notifyErrorToObservers=function(r){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(r);this._pendingObservers.length>0;){var t=this._pendingObservers.shift();t&&t.onError&&t.onError(r)}},e.prototype.hasOngoingObservableRequests=function(){return this._currentObserver!=null||this._pendingObservers.length>0},e.prototype._resetFailure=function(){this._currentFailure=null},e.prototype._handleErrorPayload=function(r){var t=c6(r.code),n=r.cause!=null?this._handleErrorCause(r.cause):void 0,i=(0,qt.newError)(r.message,t,n,r.gql_status,r.description,r.diagnostic_record);return this._observer.onErrorApplyTransformation(i)},e.prototype._handleErrorCause=function(r){var t=r.cause!=null?this._handleErrorCause(r.cause):void 0,n=(0,qt.newGQLError)(r.message,t,r.gql_status,r.description,r.diagnostic_record);return this._observer.onErrorApplyTransformation(n)},e}();Eh.default=u6;function c6(e){return e==="Neo.TransientError.Transaction.Terminated"?"Neo.ClientError.Transaction.Terminated":e==="Neo.TransientError.Transaction.LockClientStopped"?"Neo.ClientError.Transaction.LockClientStopped":e}var De=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ch,"__esModule",{value:!0});var s6=V,l6=De(ys),f6=De(Cs),d6=De(As),h6=De(Ns),v6=De(Ds),_6=De(Fs),p6=De(lu),y6=De(xs),b6=De(Vs),m6=De(Gs),g6=De(Zs),O6=De(Js),E6=De(rl),w6=De(ol),T6=De(ul),S6=De(gh),P6=De(Eh);function C6(e){var r=e===void 0?{}:e,t=r.version,n=r.chunker,i=r.dechunker,o=r.channel,a=r.disableLosslessIntegers,c=r.useBigInt,s=r.serversideRouting,u=r.server,l=r.log,h=r.observer,_=function(y){var m=new P6.default({transformMetadata:y.transformMetadata.bind(y),enrichErrorMetadata:y.enrichErrorMetadata.bind(y),log:l,observer:h});return o.onerror=h.onError.bind(h),o.onmessage=function(E){return i.write(E)},i.onmessage=function(E){try{m.handleResponse(y.unpack(E))}catch(w){return h.onError(w)}},m};return I6(t,u,n,{disableLosslessIntegers:a,useBigInt:c},s,_,h.onProtocolError.bind(h),l)}ch.default=C6;function I6(e,r,t,n,i,o,a,c){switch(e){case 1:return new l6.default(r,t,n,o,c,a);case 2:return new f6.default(r,t,n,o,c,a);case 3:return new d6.default(r,t,n,o,c,a);case 4:return new h6.default(r,t,n,o,c,a);case 4.1:return new v6.default(r,t,n,o,c,a,i);case 4.2:return new _6.default(r,t,n,o,c,a,i);case 4.3:return new p6.default(r,t,n,o,c,a,i);case 4.4:return new y6.default(r,t,n,o,c,a,i);case 5:return new b6.default(r,t,n,o,c,a,i);case 5.1:return new m6.default(r,t,n,o,c,a,i);case 5.2:return new g6.default(r,t,n,o,c,a,i);case 5.3:return new O6.default(r,t,n,o,c,a,i);case 5.4:return new E6.default(r,t,n,o,c,a,i);case 5.5:return new w6.default(r,t,n,o,c,a,i);case 5.6:return new T6.default(r,t,n,o,c,a,i);case 5.7:return new S6.default(r,t,n,o,c,a,i);default:throw(0,s6.newError)("Unknown Bolt protocol version: "+e)}}(function(e){var r=f&&f.__createBinding||(Object.create?function(s,u,l,h){h===void 0&&(h=l);var _=Object.getOwnPropertyDescriptor(u,l);(!_||("get"in _?!u.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(s,h,_)}:function(s,u,l,h){h===void 0&&(h=l),s[h]=u[l]}),t=f&&f.__exportStar||function(s,u){for(var l in s)l!=="default"&&!Object.prototype.hasOwnProperty.call(u,l)&&r(u,s,l)},n=f&&f.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.RawRoutingTable=e.BoltProtocol=void 0;var i=n(Xd),o=n(ch),a=n(lu),c=n(bs);t(te,e),e.BoltProtocol=a.default,e.RawRoutingTable=c.default,e.default={handshake:i.default,create:o.default}})(Qd);var gg={},cl={},R6=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(cl,"__esModule",{value:!0});var A6=V,j6=function(e){R6(r,e);function r(t){var n=e.call(this)||this;return n._connection=t,n}return r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t;n.accessMode,n.database,n.bookmarks;var i=this._connection;return this._connection=null,Promise.resolve(i)},r}(A6.ConnectionProvider);cl.default=j6;var pu={},sl={},yu={},M6=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(yu,"__esModule",{value:!0});var N6=V,$6=function(e){M6(r,e);function r(t){var n=e.call(this)||this;return n._errorHandler=t,n}return Object.defineProperty(r.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"authToken",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(r.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),r.prototype.connect=function(t,n,i,o){throw new Error("not implemented")},r.prototype.write=function(t,n,i){throw new Error("not implemented")},r.prototype.close=function(){throw new Error("not implemented")},r.prototype.handleAndTransformError=function(t,n){return this._errorHandler?this._errorHandler.handleAndTransformError(t,n,this):t},r}(N6.Connection);yu.default=$6;var bu={},k6=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),wp=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(c,s)}u((n=n.apply(e,r||[])).next())})},Tp=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Og=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bu,"__esModule",{value:!0});bu.createChannelConnection=void 0;var Lu=cn,Tn=V,D6=Og(yu),Sp=Og(Qd),L6=Tn.error.PROTOCOL_ERROR,U6=Tn.internal.logger.Logger,F6=0;function B6(e,r,t,n,i,o,a){o===void 0&&(o=null),a===void 0&&(a=function(u){return new Lu.Channel(u)});var c=new Lu.ChannelConfig(e,r,t.errorCode(),i),s=a(c);return Sp.default.handshake(s,n).then(function(u){var l=u.protocolVersion,h=u.consumeRemainingBuffer,_=new Lu.Chunker(s),y=new Lu.Dechunker,m=function(w){return Sp.default.create({version:l,channel:s,chunker:_,dechunker:y,disableLosslessIntegers:r.disableLosslessIntegers,useBigInt:r.useBigInt,serversideRouting:o,server:w.server,log:w.logger,observer:{onObserversCountChange:w._handleOngoingRequestsNumberChange.bind(w),onError:w._handleFatalError.bind(w),onFailure:w._resetOnFailure.bind(w),onProtocolError:w._handleProtocolError.bind(w),onErrorApplyTransformation:function(S){return w.handleAndTransformError(S,w._address)}}})},E=new Eg(s,t,e,n,r.disableLosslessIntegers,o,_,r.notificationFilter,m,r.telemetryDisabled);return h(function(w){return y.write(w)}),E}).catch(function(u){return s.close().then(function(){throw u})})}bu.createChannelConnection=B6;var Eg=function(e){k6(r,e);function r(t,n,i,o,a,c,s,u,l,h){a===void 0&&(a=!1),c===void 0&&(c=null);var _=e.call(this,n)||this;return _._authToken=null,_._idle=!1,_._reseting=!1,_._resetObservers=[],_._id=F6++,_._address=i,_._server={address:i.asHostPort()},_._creationTimestamp=Date.now(),_._disableLosslessIntegers=a,_._ch=t,_._chunker=s,_._log=W6(_,o),_._serversideRouting=c,_._notificationFilter=u,_._telemetryDisabledDriverConfig=h===!0,_._telemetryDisabledConnection=!0,_._dbConnectionId=null,_._protocol=l(_),_._isBroken=!1,_._log.isDebugEnabled()&&_._log.debug("created towards ".concat(i)),_}return r.prototype.beginTransaction=function(t){return this._sendTelemetryIfEnabled(t),this._protocol.beginTransaction(t)},r.prototype.run=function(t,n,i){return this._sendTelemetryIfEnabled(i),this._protocol.run(t,n,i)},r.prototype._sendTelemetryIfEnabled=function(t){this._telemetryDisabledConnection||this._telemetryDisabledDriverConfig||t==null||t.apiTelemetryConfig==null||this._protocol.telemetry({api:t.apiTelemetryConfig.api},{onCompleted:t.apiTelemetryConfig.onTelemetrySuccess,onError:t.beforeError})},r.prototype.commitTransaction=function(t){return this._protocol.commitTransaction(t)},r.prototype.rollbackTransaction=function(t){return this._protocol.rollbackTransaction(t)},r.prototype.getProtocolVersion=function(){return this._protocol.version},Object.defineProperty(r.prototype,"authToken",{get:function(){return this._authToken},set:function(t){this._authToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return this._protocol.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(t){this._dbConnectionId=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){return this._idleTimestamp},set:function(t){this._idleTimestamp=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){return this._creationTimestamp},enumerable:!1,configurable:!0}),r.prototype.connect=function(t,n,i,o){return wp(this,void 0,void 0,function(){var a=this;return Tp(this,function(c){switch(c.label){case 0:if(this._protocol.initialized&&!this._protocol.supportsReAuth)throw(0,Tn.newError)("Connection does not support re-auth");return this._authToken=i,this._protocol.initialized?[3,2]:[4,this._initialize(t,n,i)];case 1:return[2,c.sent()];case 2:return o?[4,new Promise(function(s,u){a._protocol.logoff({onError:u}),a._protocol.logon({authToken:i,onError:u,onComplete:function(){return s(a)},flush:!0})})]:[3,4];case 3:return[2,c.sent()];case 4:return this._protocol.logoff(),this._protocol.logon({authToken:i,flush:!0}),[2,this]}})})},r.prototype._initialize=function(t,n,i){var o=this,a=this;return new Promise(function(c,s){o._protocol.initialize({userAgent:t,boltAgent:n,authToken:i,notificationFilter:o._notificationFilter,onError:function(u){return s(u)},onComplete:function(u){if(u){var l=u.server;(!o.version||l)&&(o.version=l);var h=u.connection_id;if(o.databaseId||(o.databaseId=h),u.hints){var _=u.hints["connection.recv_timeout_seconds"];if(_!=null){var y=(0,Tn.toNumber)(_);Number.isInteger(y)&&y>0?o._ch.setupReceiveTimeout(y*1e3):o._log.info("Server located at ".concat(o._address," supplied an invalid connection receive timeout value (").concat(y,"). ")+"Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}var m=u.hints["telemetry.enabled"];m===!0&&(o._telemetryDisabledConnection=!1)}}c(a)}})})},r.prototype.protocol=function(){return this._protocol},Object.defineProperty(r.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return this._server.version},set:function(t){this._server.version=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),r.prototype._handleFatalError=function(t){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||t,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by ".concat(this._error," (").concat(Tn.json.stringify(this._error),")")),this._protocol.notifyFatalError(this._error)},r.prototype._setIdle=function(t){this._idle=!0,this._ch.stopReceiveTimeout(),this._protocol.queueObserverIfProtocolIsNotBroken(t)},r.prototype._unsetIdle=function(){this._idle=!1,this._updateCurrentObserver()},r.prototype._queueObserver=function(t){return this._protocol.queueObserverIfProtocolIsNotBroken(t)},r.prototype.hasOngoingObservableRequests=function(){return!this._idle&&this._protocol.hasOngoingObservableRequests()},r.prototype.resetAndFlush=function(){var t=this;return new Promise(function(n,i){t._reset({onError:function(o){if(t._isBroken)i(o);else{var a=t._handleProtocolError("Received FAILURE as a response for RESET: ".concat(o));i(a)}},onComplete:function(){n()}})})},r.prototype._resetOnFailure=function(){var t=this;this.isOpen()&&this._reset({onError:function(){t._protocol.resetFailure()},onComplete:function(){t._protocol.resetFailure()}})},r.prototype._reset=function(t){var n=this;if(this._reseting){this._protocol.isLastMessageReset()?this._resetObservers.push(t):this._protocol.reset({onError:function(o){t.onError(o)},onComplete:function(){t.onComplete()}});return}this._resetObservers.push(t),this._reseting=!0;var i=function(o){n._reseting=!1;var a=n._resetObservers;n._resetObservers=[],a.forEach(o)};this._protocol.reset({onError:function(o){i(function(a){return a.onError(o)})},onComplete:function(){i(function(o){return o.onComplete()})}})},r.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},r.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},r.prototype._handleOngoingRequestsNumberChange=function(t){this._idle||(t===0?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout())},r.prototype.close=function(){return wp(this,void 0,void 0,function(){return Tp(this,function(t){switch(t.label){case 0:return this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return t.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},r.prototype.toString=function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")},r.prototype._handleProtocolError=function(t){this._protocol.resetFailure(),this._updateCurrentObserver();var n=(0,Tn.newError)(t,L6);return this._handleFatalError(n),n},r}(D6.default);bu.default=Eg;function W6(e,r){return new U6(r._level,function(t,n){return r._loggerFunction(t,"".concat(e," ").concat(n))})}var wh={},x6=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),V6=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wh,"__esModule",{value:!0});var q6=V6(yu),H6=function(e){x6(r,e);function r(t,n){var i=e.call(this,n)||this;return n&&(i._originalErrorHandler=t._errorHandler,t._errorHandler=i._errorHandler),i._delegate=t,i}return r.prototype.beginTransaction=function(t){return this._delegate.beginTransaction(t)},r.prototype.run=function(t,n,i){return this._delegate.run(t,n,i)},r.prototype.commitTransaction=function(t){return this._delegate.commitTransaction(t)},r.prototype.rollbackTransaction=function(t){return this._delegate.rollbackTransaction(t)},r.prototype.getProtocolVersion=function(){return this._delegate.getProtocolVersion()},Object.defineProperty(r.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(t){this._delegate.databaseId=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"authToken",{get:function(){return this._delegate.authToken},set:function(t){this._delegate.authToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"supportsReAuth",{get:function(){return this._delegate.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"version",{get:function(){return this._delegate.version},set:function(t){this._delegate.version=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"creationTimestamp",{get:function(){return this._delegate.creationTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"idleTimestamp",{get:function(){return this._delegate.idleTimestamp},set:function(t){this._delegate.idleTimestamp=t},enumerable:!1,configurable:!0}),r.prototype.isOpen=function(){return this._delegate.isOpen()},r.prototype.protocol=function(){return this._delegate.protocol()},r.prototype.connect=function(t,n,i,o){return this._delegate.connect(t,n,i,o)},r.prototype.write=function(t,n,i){return this._delegate.write(t,n,i)},r.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},r.prototype.hasOngoingObservableRequests=function(){return this._delegate.hasOngoingObservableRequests()},r.prototype.close=function(){return this._delegate.close()},r.prototype.release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate.release()},r}(q6.default);wh.default=H6;var Th={};Object.defineProperty(Th,"__esModule",{value:!0});var wg=V,z6=wg.error.SERVICE_UNAVAILABLE,G6=wg.error.SESSION_EXPIRED,Y6=function(){function e(r,t,n,i){this._errorCode=r,this._handleUnavailability=t||Lf,this._handleWriteFailure=n||Lf,this._handleSecurityError=i||Lf}return e.create=function(r){var t=r.errorCode,n=r.handleUnavailability,i=r.handleWriteFailure,o=r.handleSecurityError;return new e(t,n,i,o)},e.prototype.errorCode=function(){return this._errorCode},e.prototype.handleAndTransformError=function(r,t,n){return K6(r)?this._handleSecurityError(r,t,n):Z6(r)?this._handleUnavailability(r,t,n):Q6(r)?this._handleWriteFailure(r,t,n):r},e}();Th.default=Y6;function K6(e){return e!=null&&e.code!=null&&e.code.startsWith("Neo.ClientError.Security.")}function Z6(e){return e?e.code===G6||e.code===z6||e.code==="Neo.TransientError.General.DatabaseUnavailable":!1}function Q6(e){return e?e.code==="Neo.ClientError.Cluster.NotALeader"||e.code==="Neo.ClientError.General.ForbiddenOnReadOnlyDatabase":!1}function Lf(e){return e}(function(e){var r=f&&f.__createBinding||(Object.create?function(u,l,h,_){_===void 0&&(_=h);var y=Object.getOwnPropertyDescriptor(l,h);(!y||("get"in y?!l.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return l[h]}}),Object.defineProperty(u,_,y)}:function(u,l,h,_){_===void 0&&(_=h),u[_]=l[h]}),t=f&&f.__setModuleDefault||(Object.create?function(u,l){Object.defineProperty(u,"default",{enumerable:!0,value:l})}:function(u,l){u.default=l}),n=f&&f.__importStar||function(u){if(u&&u.__esModule)return u;var l={};if(u!=null)for(var h in u)h!=="default"&&Object.prototype.hasOwnProperty.call(u,h)&&r(l,u,h);return t(l,u),l},i=f&&f.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=e.ConnectionErrorHandler=e.DelegateConnection=e.ChannelConnection=e.Connection=void 0;var o=i(yu);e.Connection=o.default;var a=n(bu);e.ChannelConnection=a.default,Object.defineProperty(e,"createChannelConnection",{enumerable:!0,get:function(){return a.createChannelConnection}});var c=i(wh);e.DelegateConnection=c.default;var s=i(Th);e.ConnectionErrorHandler=s.default,e.default=o.default})(sl);var Sh={},X6=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(c,s)}u((n=n.apply(e,r||[])).next())})},J6=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Sh,"__esModule",{value:!0});var e8=V,Pp=gt,t8=function(){function e(r){var t=r.authTokenManager,n=r.userAgent,i=r.boltAgent;this._authTokenManager=t||(0,e8.staticAuthTokenManager)({}),this._userAgent=n,this._boltAgent=i}return e.prototype.authenticate=function(r){var t=r.connection,n=r.auth,i=r.skipReAuth,o=r.waitReAuth,a=r.forceReAuth;return X6(this,void 0,void 0,function(){var c,s;return J6(this,function(u){switch(u.label){case 0:return n==null?[3,3]:(c=t.supportsReAuth===!0&&(!Pp.object.equals(t.authToken,n)&&i!==!0||a===!0),t.authToken==null||c?[4,t.connect(this._userAgent,this._boltAgent,n,o||!1)]:[3,2]);case 1:return[2,u.sent()];case 2:return[2,t];case 3:return[4,this._authTokenManager.getToken()];case 4:return s=u.sent(),Pp.object.equals(s,t.authToken)?[3,6]:[4,t.connect(this._userAgent,this._boltAgent,s,!1)];case 5:return[2,u.sent()];case 6:return[2,t]}})})},e.prototype.handleError=function(r){var t=r.connection,n=r.code;return t&&n.startsWith("Neo.ClientError.Security.")?this._authTokenManager.handleSecurityException(t.authToken,n):!1},e}();Sh.default=t8;var Ph={},r8=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(c,s)}u((n=n.apply(e,r||[])).next())})},n8=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Ph,"__esModule",{value:!0});var i8=function(){function e(r){var t=r.connectionLivenessCheckTimeout;this._connectionLivenessCheckTimeout=t}return e.prototype.check=function(r){return r8(this,void 0,void 0,function(){var t;return n8(this,function(n){switch(n.label){case 0:return this._isCheckDisabled||this._isNewlyCreatedConnection(r)?[2,!0]:(t=Date.now()-r.idleTimestamp,this._connectionLivenessCheckTimeout===0||t>this._connectionLivenessCheckTimeout?[4,r.resetAndFlush().then(function(){return!0})]:[3,2]);case 1:return[2,n.sent()];case 2:return[2,!0]}})})},Object.defineProperty(e.prototype,"_isCheckDisabled",{get:function(){return this._connectionLivenessCheckTimeout==null||this._connectionLivenessCheckTimeout<0},enumerable:!1,configurable:!0}),e.prototype._isNewlyCreatedConnection=function(r){return r.authToken==null},e}();Ph.default=i8;var Ch={},o8=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(c,s)}u((n=n.apply(e,r||[])).next())})},a8=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(Ch,"__esModule",{value:!0});var u8=cn,c8=function(){function e(r){var t=r.clientCertificateProvider,n=r.loader;this._clientCertificateProvider=t,this._loader=n||u8.ClientCertificatesLoader,this._clientCertificate=null}return e.prototype.getClientCertificate=function(){return o8(this,void 0,void 0,function(){var r,t,n=this;return a8(this,function(i){switch(i.label){case 0:return r=this._clientCertificateProvider!=null,r?(t=this._clientCertificate==null,t?[3,2]:[4,this._clientCertificateProvider.hasUpdate()]):[3,3];case 1:t=i.sent(),i.label=2;case 2:r=t,i.label=3;case 3:return r&&(this._clientCertificate=Promise.resolve(this._clientCertificateProvider.getClientCertificate()).then(this._loader.load).then(function(o){return n._clientCertificate=o,n._clientCertificate}).catch(function(o){throw n._clientCertificate=null,o})),[2,this._clientCertificate]}})})},e}();Ch.default=c8;var s8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),jr=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(c,s)}u((n=n.apply(e,r||[])).next())})},Mr=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},l8=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},f8=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))},Ih=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pu,"__esModule",{value:!0});var Cp=sl,Sn=V,d8=Ih(Sh),h8=gt,v8=Ih(Ph),_8=Ih(Ch),p8=Sn.error.SERVICE_UNAVAILABLE,y8=["Neo.ClientError.Security.CredentialsExpired","Neo.ClientError.Security.Forbidden","Neo.ClientError.Security.TokenExpired","Neo.ClientError.Security.Unauthorized"],Tg=Sn.internal.pool,Ip=Tg.Pool,b8=Tg.PoolConfig,m8=function(e){s8(r,e);function r(t,n){var i=t.id,o=t.config,a=t.log,c=t.userAgent,s=t.boltAgent,u=t.authTokenManager,l=t.newPool,h=l===void 0?function(){for(var y=[],m=0;m<arguments.length;m++)y[m]=arguments[m];return new(Ip.bind.apply(Ip,f8([void 0],l8(y),!1)))}:l;n===void 0&&(n=null);var _=e.call(this)||this;return _._id=i,_._config=o,_._log=a,_._clientCertificateHolder=new _8.default({clientCertificateProvider:_._config.clientCertificate}),_._authenticationProvider=new d8.default({authTokenManager:u,userAgent:c,boltAgent:s}),_._livenessCheckProvider=new v8.default({connectionLivenessCheckTimeout:o.connectionLivenessCheckTimeout}),_._userAgent=c,_._boltAgent=s,_._createChannelConnection=n||function(y){return jr(_,void 0,void 0,function(){var m,E;return Mr(this,function(w){switch(w.label){case 0:return m=Cp.createChannelConnection,E=[y,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,m.apply(void 0,E.concat([w.sent()]))]}})})},_._connectionPool=h({create:_._createConnection.bind(_),destroy:_._destroyConnection.bind(_),validateOnAcquire:_._validateConnectionOnAcquire.bind(_),validateOnRelease:_._validateConnectionOnRelease.bind(_),installIdleObserver:r._installIdleObserverOnConnection.bind(_),removeIdleObserver:r._removeIdleObserverOnConnection.bind(_),config:b8.fromDriverConfig(o),log:_._log}),_._openConnections={},_}return r.prototype._createConnectionErrorHandler=function(){return new Cp.ConnectionErrorHandler(p8)},r.prototype._getClientCertificate=function(){return jr(this,void 0,void 0,function(){return Mr(this,function(t){return[2,this._config.clientCertificate.getClientCertificate()]})})},r.prototype._createConnection=function(t,n,i){var o=this,a=t.auth;return this._createChannelConnection(n).then(function(c){return c.release=function(){return c.idleTimestamp=Date.now(),i(n,c)},o._openConnections[c.id]=c,o._authenticationProvider.authenticate({connection:c,auth:a}).catch(function(s){throw o._destroyConnection(c),s})})},r.prototype._validateConnectionOnAcquire=function(t,n){var i=t.auth,o=t.skipReAuth;return jr(this,void 0,void 0,function(){var a,c;return Mr(this,function(s){switch(s.label){case 0:if(!this._validateConnection(n))return[2,!1];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._livenessCheckProvider.check(n)];case 2:return s.sent(),[3,4];case 3:return a=s.sent(),this._log.debug("The connection ".concat(n.id," is not alive because of an error ").concat(a.code," '").concat(a.message,"'")),[2,!1];case 4:return s.trys.push([4,6,,7]),[4,this._authenticationProvider.authenticate({connection:n,auth:i,skipReAuth:o})];case 5:return s.sent(),[2,!0];case 6:return c=s.sent(),this._log.debug("The connection ".concat(n.id," is not valid because of an error ").concat(c.code," '").concat(c.message,"'")),[2,!1];case 7:return[2]}})})},r.prototype._validateConnectionOnRelease=function(t){return t._sticky!==!0&&this._validateConnection(t)},r.prototype._validateConnection=function(t){if(!t.isOpen())return!1;var n=this._config.maxConnectionLifetime,i=Date.now()-t.creationTimestamp;return!(i>n)},r.prototype._destroyConnection=function(t){return delete this._openConnections[t.id],t.close()},r.prototype._verifyConnectivityAndGetServerVersion=function(t){var n=t.address;return jr(this,void 0,void 0,function(){var i,o;return Mr(this,function(a){switch(a.label){case 0:return[4,this._connectionPool.acquire({},n)];case 1:i=a.sent(),o=new Sn.ServerInfo(i.server,i.protocol().version),a.label=2;case 2:return a.trys.push([2,,5,7]),i.protocol().isLastMessageLogon()?[3,4]:[4,i.resetAndFlush()];case 3:a.sent(),a.label=4;case 4:return[3,7];case 5:return[4,i.release()];case 6:return a.sent(),[7];case 7:return[2,o]}})})},r.prototype._verifyAuthentication=function(t){var n=t.getAddress,i=t.auth;return jr(this,void 0,void 0,function(){var o,a,c,s,u,l;return Mr(this,function(h){switch(h.label){case 0:o=[],h.label=1;case 1:return h.trys.push([1,8,9,11]),[4,n()];case 2:return a=h.sent(),[4,this._connectionPool.acquire({auth:i,skipReAuth:!0},a)];case 3:if(c=h.sent(),o.push(c),s=!c.protocol().isLastMessageLogon(),!c.supportsReAuth)throw(0,Sn.newError)("Driver is connected to a database that does not support user switch.");return s&&c.supportsReAuth?[4,this._authenticationProvider.authenticate({connection:c,auth:i,waitReAuth:!0,forceReAuth:!0})]:[3,5];case 4:return h.sent(),[3,7];case 5:return s&&!c.supportsReAuth?[4,this._connectionPool.acquire({auth:i},a,{requireNew:!0})]:[3,7];case 6:u=h.sent(),u._sticky=!0,o.push(u),h.label=7;case 7:return[2,!0];case 8:if(l=h.sent(),y8.includes(l.code))return[2,!1];throw l;case 9:return[4,Promise.all(o.map(function(_){return _.release()}))];case 10:return h.sent(),[7];case 11:return[2]}})})},r.prototype._verifyStickyConnection=function(t){var n=t.auth,i=t.connection;return t.address,jr(this,void 0,void 0,function(){var o,a;return Mr(this,function(c){switch(c.label){case 0:return o=h8.object.equals(n,i.authToken),a=!o,i._sticky=o&&!i.supportsReAuth,a||i._sticky?[4,i.release()]:[3,2];case 1:throw c.sent(),(0,Sn.newError)("Driver is connected to a database that does not support user switch.");case 2:return[2]}})})},r.prototype.close=function(){return jr(this,void 0,void 0,function(){return Mr(this,function(t){switch(t.label){case 0:return[4,this._connectionPool.close()];case 1:return t.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(n){return n.close()}))];case 2:return t.sent(),[2]}})})},r._installIdleObserverOnConnection=function(t,n){t._setIdle(n)},r._removeIdleObserverOnConnection=function(t){t._unsetIdle()},r.prototype._handleSecurityError=function(t,n,i){var o=this._authenticationProvider.handleError({connection:i,code:t.code});return o&&(t.retriable=!0),t.code==="Neo.ClientError.Security.AuthorizationExpired"&&this._connectionPool.apply(n,function(a){a.authToken=null}),i&&i.close().catch(function(){}),t},r}(Sn.ConnectionProvider);pu.default=m8;var Rh={},g8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ht=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(c,s)}u((n=n.apply(e,r||[])).next())})},zt=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},O8=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rh,"__esModule",{value:!0});var E8=O8(pu),Rp=sl,Sg=V,ll=Sg.internal.constants,w8=ll.BOLT_PROTOCOL_V3,T8=ll.BOLT_PROTOCOL_V4_0,S8=ll.BOLT_PROTOCOL_V4_4,P8=ll.BOLT_PROTOCOL_V5_1,C8=Sg.error.SERVICE_UNAVAILABLE,I8=function(e){g8(r,e);function r(t){var n=t.id,i=t.config,o=t.log,a=t.address,c=t.userAgent,s=t.boltAgent,u=t.authTokenManager,l=t.newPool,h=e.call(this,{id:n,config:i,log:o,userAgent:c,boltAgent:s,authTokenManager:u,newPool:l})||this;return h._address=a,h}return r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t;n.accessMode;var i=n.database;n.bookmarks;var o=n.auth,a=n.forceReAuth;return Ht(this,void 0,void 0,function(){var c,s,u=this;return zt(this,function(l){switch(l.label){case 0:return c=Rp.ConnectionErrorHandler.create({errorCode:C8,handleSecurityError:function(h,_,y){return u._handleSecurityError(h,_,y,i)}}),[4,this._connectionPool.acquire({auth:o,forceReAuth:a},this._address)];case 1:return s=l.sent(),o?[4,this._verifyStickyConnection({auth:o,connection:s,address:this._address})]:[3,3];case 2:return l.sent(),[2,s];case 3:return[2,new Rp.DelegateConnection(s,c)]}})})},r.prototype._handleSecurityError=function(t,n,i,o){return this._log.warn("Direct driver ".concat(this._id," will close connection to ").concat(n," for database '").concat(o,"' because of an error ").concat(t.code," '").concat(t.message,"'")),e.prototype._handleSecurityError.call(this,t,n,i)},r.prototype._hasProtocolVersion=function(t){return Ht(this,void 0,void 0,function(){var n,i;return zt(this,function(o){switch(o.label){case 0:return[4,this._createChannelConnection(this._address)];case 1:return n=o.sent(),i=n.protocol()?n.protocol().version:null,[4,n.close()];case 2:return o.sent(),i?[2,t(i)]:[2,!1]}})})},r.prototype.supportsMultiDb=function(){return Ht(this,void 0,void 0,function(){return zt(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=T8})];case 1:return[2,t.sent()]}})})},r.prototype.getNegotiatedProtocolVersion=function(){var t=this;return new Promise(function(n,i){t._hasProtocolVersion(n).catch(i)})},r.prototype.supportsTransactionConfig=function(){return Ht(this,void 0,void 0,function(){return zt(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=w8})];case 1:return[2,t.sent()]}})})},r.prototype.supportsUserImpersonation=function(){return Ht(this,void 0,void 0,function(){return zt(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=S8})];case 1:return[2,t.sent()]}})})},r.prototype.supportsSessionAuth=function(){return Ht(this,void 0,void 0,function(){return zt(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=P8})];case 1:return[2,t.sent()]}})})},r.prototype.verifyAuthentication=function(t){var n=t.auth;return Ht(this,void 0,void 0,function(){var i=this;return zt(this,function(o){return[2,this._verifyAuthentication({auth:n,getAddress:function(){return i._address}})]})})},r.prototype.verifyConnectivityAndGetServerInfo=function(){return Ht(this,void 0,void 0,function(){return zt(this,function(t){switch(t.label){case 0:return[4,this._verifyConnectivityAndGetServerVersion({address:this._address})];case 1:return[2,t.sent()]}})})},r}(E8.default);Rh.default=I8;var Ah={},Qr={},jh={},yi={},Uf=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},Ff=f&&f.__spreadArray||function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(yi,"__esModule",{value:!0});yi.createValidRoutingTable=void 0;var nt=V,Pg=nt.internal.constants,R8=Pg.ACCESS_MODE_WRITE,A8=Pg.ACCESS_MODE_READ,Bf=nt.internal.serverAddress.ServerAddress,Mh=nt.error.PROTOCOL_ERROR,j8=1,Cg=function(){function e(r){var t=r===void 0?{}:r,n=t.database,i=t.routers,o=t.readers,a=t.writers,c=t.expirationTime,s=t.ttl;this.database=n||null,this.databaseName=n||"default database",this.routers=i||[],this.readers=o||[],this.writers=a||[],this.expirationTime=c||(0,nt.int)(0),this.ttl=s}return e.fromRawRoutingTable=function(r,t,n){return Ig(r,t,n)},e.prototype.forget=function(r){this.readers=Uu(this.readers,r),this.writers=Uu(this.writers,r)},e.prototype.forgetRouter=function(r){this.routers=Uu(this.routers,r)},e.prototype.forgetWriter=function(r){this.writers=Uu(this.writers,r)},e.prototype.isStaleFor=function(r){return this.expirationTime.lessThan(Date.now())||this.routers.length<j8||r===A8&&this.readers.length===0||r===R8&&this.writers.length===0},e.prototype.isExpiredFor=function(r){return this.expirationTime.add(r).lessThan(Date.now())},e.prototype.allServers=function(){return Ff(Ff(Ff([],Uf(this.routers),!1),Uf(this.readers),!1),Uf(this.writers),!1)},e.prototype.toString=function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")},e}();yi.default=Cg;function Uu(e,r){return e.filter(function(t){return t.asKey()!==r.asKey()})}function Ig(e,r,t){var n=t.ttl,i=N8(t,r),o=M8(t,r),a=o.routers,c=o.readers,s=o.writers;return Ap(a,"routers",r),Ap(c,"readers",r),new Cg({database:e||t.db,routers:a,readers:c,writers:s,expirationTime:i,ttl:n})}yi.createValidRoutingTable=Ig;function M8(e,r){try{var t=[],n=[],i=[];return e.servers.forEach(function(o){var a=o.role,c=o.addresses;a==="ROUTE"?t=Wf(c).map(function(s){return Bf.fromUrl(s)}):a==="WRITE"?i=Wf(c).map(function(s){return Bf.fromUrl(s)}):a==="READ"&&(n=Wf(c).map(function(s){return Bf.fromUrl(s)}))}),{routers:t,readers:n,writers:i}}catch(o){throw(0,nt.newError)("Unable to parse servers entry from router ".concat(r,` from addresses:
`).concat(nt.json.stringify(e.servers),`
Error message: `).concat(o.message),Mh)}}function N8(e,r){try{var t=(0,nt.int)(Date.now()),n=(0,nt.int)(e.ttl).multiply(1e3).add(t);return n.lessThan(t)?nt.Integer.MAX_VALUE:n}catch(i){throw(0,nt.newError)("Unable to parse TTL entry from router ".concat(r,` from raw routing table:
`).concat(nt.json.stringify(e),`
Error message: `).concat(i.message),Mh)}}function Ap(e,r,t){if(e.length===0)throw(0,nt.newError)("Received no "+r+" from router "+t,Mh)}function Wf(e){if(!Array.isArray(e))throw new TypeError("Array expected but got: "+e);return Array.from(e)}var $8=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jh,"__esModule",{value:!0});var k8=$8(yi),D8=function(){function e(r){this._routingContext=r}return e.prototype.lookupRoutingTableOnRouter=function(r,t,n,i){var o=this;return r._acquireConnection(function(a){return o._requestRawRoutingTable(a,r,t,n,i).then(function(c){return c.isNull?null:k8.default.fromRawRoutingTable(t,n,c)})})},e.prototype._requestRawRoutingTable=function(r,t,n,i,o){var a=this;return new Promise(function(c,s){r.protocol().requestRoutingInformation({routingContext:a._routingContext,databaseName:n,impersonatedUser:o,sessionContext:{bookmarks:t._lastBookmarks,mode:t._mode,database:t._database,afterComplete:t._onComplete},onCompleted:c,onError:s})})},e}();jh.default=D8;var Rg=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.RoutingTable=Qr.Rediscovery=void 0;var Ag=Rg(jh);Qr.Rediscovery=Ag.default;var L8=Rg(yi);Qr.RoutingTable=L8.default;Qr.default=Ag.default;var U8=f&&f.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fc=f&&f.__assign||function(){return fc=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},fc.apply(this,arguments)},F8=f&&f.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),B8=f&&f.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),W8=f&&f.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&F8(r,e,t);return B8(r,e),r},Te=f&&f.__awaiter||function(e,r,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?o(l.value):i(l.value).then(c,s)}u((n=n.apply(e,r||[])).next())})},Se=f&&f.__generator||function(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Td=f&&f.__values||function(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},Ct=f&&f.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o},jg=f&&f.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ah,"__esModule",{value:!0});var xe=V,jp=W8(Qr),x8=cn,V8=jg(cl),q8=jg(pu),H8=rr,Nr=sl,z8=gt,Fu=xe.error.SERVICE_UNAVAILABLE,Di=xe.error.SESSION_EXPIRED,G8=xe.internal.bookmarks.Bookmarks,bi=xe.internal.constants,Mp=bi.ACCESS_MODE_READ,Bu=bi.ACCESS_MODE_WRITE,Y8=bi.BOLT_PROTOCOL_V3,K8=bi.BOLT_PROTOCOL_V4_0,Z8=bi.BOLT_PROTOCOL_V4_4,Q8=bi.BOLT_PROTOCOL_V5_1,X8="Neo.ClientError.Procedure.ProcedureNotFound",J8="Neo.ClientError.Database.DatabaseNotFound",eV="Neo.ClientError.Transaction.InvalidBookmark",tV="Neo.ClientError.Transaction.InvalidBookmarkMixture",rV="Neo.ClientError.Security.AuthorizationExpired",nV="Neo.ClientError.Statement.ArgumentError",iV="Neo.ClientError.Request.Invalid",oV="Neo.ClientError.Statement.TypeError",aV="N/A",uV="system",Li=null,cV=(0,xe.int)(3e4),sV=function(e){U8(r,e);function r(t){var n=t.id,i=t.address,o=t.routingContext,a=t.hostNameResolver,c=t.config,s=t.log,u=t.userAgent,l=t.boltAgent,h=t.authTokenManager,_=t.routingTablePurgeDelay,y=t.newPool,m=e.call(this,{id:n,config:c,log:s,userAgent:u,boltAgent:l,authTokenManager:h,newPool:y},function(E){return Te(m,void 0,void 0,function(){var w,S;return Se(this,function(A){switch(A.label){case 0:return w=Nr.createChannelConnection,S=[E,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,w.apply(void 0,S.concat([A.sent(),this._routingContext]))]}})})})||this;return m._routingContext=fc(fc({},o),{address:i.toString()}),m._seedRouter=i,m._rediscovery=new jp.default(m._routingContext),m._loadBalancingStrategy=new H8.LeastConnectedLoadBalancingStrategy(m._connectionPool),m._hostNameResolver=a,m._dnsResolver=new x8.HostNameResolver,m._log=s,m._useSeedRouter=!0,m._routingTableRegistry=new lV(_?(0,xe.int)(_):cV),m._refreshRoutingTable=z8.functional.reuseOngoingRequest(m._refreshRoutingTable,m),m}return r.prototype._createConnectionErrorHandler=function(){return new Nr.ConnectionErrorHandler(Di)},r.prototype._handleUnavailability=function(t,n,i){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(n," for database '").concat(i,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forget(n,i||Li),t},r.prototype._handleSecurityError=function(t,n,i,o){return this._log.warn("Routing driver ".concat(this._id," will close connections to ").concat(n," for database '").concat(o,"' because of an error ").concat(t.code," '").concat(t.message,"'")),e.prototype._handleSecurityError.call(this,t,n,i,o)},r.prototype._handleWriteFailure=function(t,n,i){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(n," for database '").concat(i,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forgetWriter(n,i||Li),(0,xe.newError)("No longer possible to write to server at "+n,Di,t)},r.prototype.acquireConnection=function(t){var n=t===void 0?{}:t,i=n.accessMode,o=n.database,a=n.bookmarks,c=n.impersonatedUser,s=n.onDatabaseNameResolved,u=n.auth;return Te(this,void 0,void 0,function(){var l,h,_,y,m,E,w,S,A=this;return Se(this,function(R){switch(R.label){case 0:return _={database:o||Li},y=new Nr.ConnectionErrorHandler(Di,function(I,j){return A._handleUnavailability(I,j,_.database)},function(I,j){return A._handleWriteFailure(I,j,_.database)},function(I,j,M){return A._handleSecurityError(I,j,M,_.database)}),[4,this._freshRoutingTable({accessMode:i,database:_.database,bookmarks:a,impersonatedUser:c,auth:u,onDatabaseNameResolved:function(I){_.database=_.database||I,s&&s(I)}})];case 1:if(m=R.sent(),i===Mp)h=this._loadBalancingStrategy.selectReader(m.readers),l="read";else if(i===Bu)h=this._loadBalancingStrategy.selectWriter(m.writers),l="write";else throw(0,xe.newError)("Illegal mode "+i);if(!h)throw(0,xe.newError)("Failed to obtain connection towards ".concat(l," server. Known routing table is: ").concat(m),Di);R.label=2;case 2:return R.trys.push([2,6,,7]),[4,this._connectionPool.acquire({auth:u},h)];case 3:return E=R.sent(),u?[4,this._verifyStickyConnection({auth:u,connection:E,address:h})]:[3,5];case 4:return R.sent(),[2,E];case 5:return[2,new Nr.DelegateConnection(E,y)];case 6:throw w=R.sent(),S=y.handleAndTransformError(w,h),S;case 7:return[2]}})})},r.prototype._hasProtocolVersion=function(t){return Te(this,void 0,void 0,function(){var n,i,o,a,c,s;return Se(this,function(u){switch(u.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:n=u.sent(),o=0,u.label=2;case 2:if(!(o<n.length))return[3,8];u.label=3;case 3:return u.trys.push([3,6,,7]),[4,this._createChannelConnection(n[o])];case 4:return a=u.sent(),c=a.protocol()?a.protocol().version:null,[4,a.close()];case 5:return u.sent(),c?[2,t(c)]:[2,!1];case 6:return s=u.sent(),i=s,[3,7];case 7:return o++,[3,2];case 8:if(i)throw i;return[2,!1]}})})},r.prototype.supportsMultiDb=function(){return Te(this,void 0,void 0,function(){return Se(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=K8})];case 1:return[2,t.sent()]}})})},r.prototype.supportsTransactionConfig=function(){return Te(this,void 0,void 0,function(){return Se(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=Y8})];case 1:return[2,t.sent()]}})})},r.prototype.supportsUserImpersonation=function(){return Te(this,void 0,void 0,function(){return Se(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=Z8})];case 1:return[2,t.sent()]}})})},r.prototype.supportsSessionAuth=function(){return Te(this,void 0,void 0,function(){return Se(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(n){return n>=Q8})];case 1:return[2,t.sent()]}})})},r.prototype.getNegotiatedProtocolVersion=function(){var t=this;return new Promise(function(n,i){t._hasProtocolVersion(n).catch(i)})},r.prototype.verifyAuthentication=function(t){var n=t.database,i=t.accessMode,o=t.auth;return Te(this,void 0,void 0,function(){var a=this;return Se(this,function(c){return[2,this._verifyAuthentication({auth:o,getAddress:function(){return Te(a,void 0,void 0,function(){var s,u,l;return Se(this,function(h){switch(h.label){case 0:return s={database:n||Li},[4,this._freshRoutingTable({accessMode:i,database:s.database,auth:o,onDatabaseNameResolved:function(_){s.database=s.database||_}})];case 1:if(u=h.sent(),l=i===Bu?u.writers:u.readers,l.length===0)throw(0,xe.newError)("No servers available for database '".concat(s.database,"' with access mode '").concat(i,"'"),Fu);return[2,l[0]]}})})}})]})})},r.prototype.verifyConnectivityAndGetServerInfo=function(t){var n=t.database,i=t.accessMode;return Te(this,void 0,void 0,function(){var o,a,c,s,u,l,h,_,y,m,E,w;return Se(this,function(S){switch(S.label){case 0:return o={database:n||Li},[4,this._freshRoutingTable({accessMode:i,database:o.database,onDatabaseNameResolved:function(A){o.database=o.database||A}})];case 1:a=S.sent(),c=i===Bu?a.writers:a.readers,s=(0,xe.newError)("No servers available for database '".concat(o.database,"' with access mode '").concat(i,"'"),Fu),S.label=2;case 2:S.trys.push([2,9,10,11]),u=Td(c),l=u.next(),S.label=3;case 3:if(l.done)return[3,8];h=l.value,S.label=4;case 4:return S.trys.push([4,6,,7]),[4,this._verifyConnectivityAndGetServerVersion({address:h})];case 5:return _=S.sent(),[2,_];case 6:return y=S.sent(),s=y,[3,7];case 7:return l=u.next(),[3,3];case 8:return[3,11];case 9:return m=S.sent(),E={error:m},[3,11];case 10:try{l&&!l.done&&(w=u.return)&&w.call(u)}finally{if(E)throw E.error}return[7];case 11:throw s}})})},r.prototype.forget=function(t,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(i){return i.forget(t)}}),this._connectionPool.purge(t).catch(function(){})},r.prototype.forgetWriter=function(t,n){this._routingTableRegistry.apply(n,{applyWhenExists:function(i){return i.forgetWriter(t)}})},r.prototype._freshRoutingTable=function(t){var n=t===void 0?{}:t,i=n.accessMode,o=n.database,a=n.bookmarks,c=n.impersonatedUser,s=n.onDatabaseNameResolved,u=n.auth,l=this._routingTableRegistry.get(o,function(){return new jp.RoutingTable({database:o})});return l.isStaleFor(i)?(this._log.info('Routing table is stale for database: "'.concat(o,'" and access mode: "').concat(i,'": ').concat(l)),this._refreshRoutingTable(l,a,c,u).then(function(h){return s(h.database),h})):l},r.prototype._refreshRoutingTable=function(t,n,i,o){var a=t.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(a,t,n,i,o):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(a,t,n,i,o)},r.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(t,n,i,o,a){return Te(this,void 0,void 0,function(){var c,s,u,l,h,_,y;return Se(this,function(m){switch(m.label){case 0:return c=[],[4,this._fetchRoutingTableUsingSeedRouter(c,this._seedRouter,n,i,o,a)];case 1:return s=Ct.apply(void 0,[m.sent(),2]),u=s[0],l=s[1],u?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(t,n,i,o,a)];case 3:h=Ct.apply(void 0,[m.sent(),2]),_=h[0],y=h[1],u=_,l=y||l,m.label=4;case 4:return[4,this._applyRoutingTableIfPossible(n,u,l)];case 5:return[2,m.sent()]}})})},r.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(t,n,i,o,a){return Te(this,void 0,void 0,function(){var c,s,u,l;return Se(this,function(h){switch(h.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(t,n,i,o,a)];case 1:return c=Ct.apply(void 0,[h.sent(),2]),s=c[0],u=c[1],s?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(t,this._seedRouter,n,i,o,a)];case 2:l=Ct.apply(void 0,[h.sent(),2]),s=l[0],u=l[1],h.label=3;case 3:return[4,this._applyRoutingTableIfPossible(n,s,u)];case 4:return[2,h.sent()]}})})},r.prototype._fetchRoutingTableUsingKnownRouters=function(t,n,i,o,a){return Te(this,void 0,void 0,function(){var c,s,u,l;return Se(this,function(h){switch(h.label){case 0:return[4,this._fetchRoutingTable(t,n,i,o,a)];case 1:return c=Ct.apply(void 0,[h.sent(),2]),s=c[0],u=c[1],s?[2,[s,null]]:(l=t.length-1,r._forgetRouter(n,t,l),[2,[null,u]])}})})},r.prototype._fetchRoutingTableUsingSeedRouter=function(t,n,i,o,a,c){return Te(this,void 0,void 0,function(){var s,u;return Se(this,function(l){switch(l.label){case 0:return[4,this._resolveSeedRouter(n)];case 1:return s=l.sent(),u=s.filter(function(h){return t.indexOf(h)<0}),[4,this._fetchRoutingTable(u,i,o,a,c)];case 2:return[2,l.sent()]}})})},r.prototype._resolveSeedRouter=function(t){return Te(this,void 0,void 0,function(){var n,i,o=this;return Se(this,function(a){switch(a.label){case 0:return[4,this._hostNameResolver.resolve(t)];case 1:return n=a.sent(),[4,Promise.all(n.map(function(c){return o._dnsResolver.resolve(c)}))];case 2:return i=a.sent(),[2,[].concat.apply([],i)]}})})},r.prototype._fetchRoutingTable=function(t,n,i,o,a){return Te(this,void 0,void 0,function(){var c=this;return Se(this,function(s){return[2,t.reduce(function(u,l,h){return Te(c,void 0,void 0,function(){var _,y,m,E,w,S,A;return Se(this,function(R){switch(R.label){case 0:return[4,u];case 1:return _=Ct.apply(void 0,[R.sent(),1]),y=_[0],y?[2,[y,null]]:(m=h-1,r._forgetRouter(n,t,m),[4,this._createSessionForRediscovery(l,i,o,a)]);case 2:if(E=Ct.apply(void 0,[R.sent(),2]),w=E[0],S=E[1],!w)return[3,8];R.label=3;case 3:return R.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(w,n.database,l,o)];case 4:return[2,[R.sent(),null]];case 5:return A=R.sent(),[2,this._handleRediscoveryError(A,l)];case 6:return w.close(),[7];case 7:return[3,9];case 8:return[2,[null,S]];case 9:return[2]}})})},Promise.resolve([null,null]))]})})},r.prototype._createSessionForRediscovery=function(t,n,i,o){return Te(this,void 0,void 0,function(){var a,c,s,u,l,h,_=this;return Se(this,function(y){switch(y.label){case 0:return y.trys.push([0,4,,5]),[4,this._connectionPool.acquire({auth:o},t)];case 1:return a=y.sent(),o?[4,this._verifyStickyConnection({auth:o,connection:a,address:t})]:[3,3];case 2:y.sent(),y.label=3;case 3:return c=Nr.ConnectionErrorHandler.create({errorCode:Di,handleSecurityError:function(m,E,w){return _._handleSecurityError(m,E,w)}}),s=a._sticky?new Nr.DelegateConnection(a):new Nr.DelegateConnection(a,c),u=new V8.default(s),l=a.protocol().version,l<4?[2,[new xe.Session({mode:Bu,bookmarks:G8.empty(),connectionProvider:u}),null]]:[2,[new xe.Session({mode:Mp,database:uV,bookmarks:n,connectionProvider:u,impersonatedUser:i}),null]];case 4:return h=y.sent(),[2,this._handleRediscoveryError(h,t)];case 5:return[2]}})})},r.prototype._handleRediscoveryError=function(t,n){if(fV(t)||dV(t))throw t;if(t.code===X8)throw(0,xe.newError)("Server at ".concat(n.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),Fu,t);return this._log.warn("unable to fetch routing table because of an error ".concat(t)),[null,t]},r.prototype._applyRoutingTableIfPossible=function(t,n,i){return Te(this,void 0,void 0,function(){return Se(this,function(o){switch(o.label){case 0:if(!n)throw(0,xe.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(t),Fu,i);return n.writers.length===0&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(n)];case 1:return o.sent(),[2,n]}})})},r.prototype._updateRoutingTable=function(t){return Te(this,void 0,void 0,function(){return Se(this,function(n){switch(n.label){case 0:return[4,this._connectionPool.keepAll(t.allServers())];case 1:return n.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(t),this._log.info("Updated routing table ".concat(t)),[2]}})})},r._forgetRouter=function(t,n,i){var o=n[i];t&&o&&t.forgetRouter(o)},r}(q8.default);Ah.default=sV;var lV=function(){function e(r){this._tables=new Map,this._routingTablePurgeDelay=r}return e.prototype.register=function(r){return this._tables.set(r.database,r),this},e.prototype.apply=function(r,t){var n=t===void 0?{}:t,i=n.applyWhenExists,o=n.applyWhenDontExists,a=o===void 0?function(){}:o;return this._tables.has(r)?i(this._tables.get(r)):typeof r=="string"||r===null?a():this._forEach(i),this},e.prototype.get=function(r,t){return this._tables.has(r)?this._tables.get(r):typeof t=="function"?t():t},e.prototype.removeExpired=function(){var r=this;return this._removeIf(function(t){return t.isExpiredFor(r._routingTablePurgeDelay)})},e.prototype._forEach=function(r){var t,n;try{for(var i=Td(this._tables),o=i.next();!o.done;o=i.next()){var a=Ct(o.value,2),c=a[1];r(c)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return this},e.prototype._remove=function(r){return this._tables.delete(r),this},e.prototype._removeIf=function(r){var t,n;try{for(var i=Td(this._tables),o=i.next();!o.done;o=i.next()){var a=Ct(o.value,2),c=a[0],s=a[1];r(s)&&this._remove(c)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return this},e}();function fV(e){return[J8,eV,tV,nV,iV,oV,aV].includes(e.code)}function dV(e){return e.code.startsWith("Neo.ClientError.Security.")&&![rV].includes(e.code)}(function(e){var r=f&&f.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingConnectionProvider=e.DirectConnectionProvider=e.PooledConnectionProvider=e.SingleConnectionProvider=void 0;var t=cl;Object.defineProperty(e,"SingleConnectionProvider",{enumerable:!0,get:function(){return r(t).default}});var n=pu;Object.defineProperty(e,"PooledConnectionProvider",{enumerable:!0,get:function(){return r(n).default}});var i=Rh;Object.defineProperty(e,"DirectConnectionProvider",{enumerable:!0,get:function(){return r(i).default}});var o=Ah;Object.defineProperty(e,"RoutingConnectionProvider",{enumerable:!0,get:function(){return r(o).default}})})(gg);(function(e){var r=f&&f.__createBinding||(Object.create?function(o,a,c,s){s===void 0&&(s=c);var u=Object.getOwnPropertyDescriptor(a,c);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(o,s,u)}:function(o,a,c,s){s===void 0&&(s=c),o[s]=a[c]}),t=f&&f.__setModuleDefault||(Object.create?function(o,a){Object.defineProperty(o,"default",{enumerable:!0,value:a})}:function(o,a){o.default=a}),n=f&&f.__importStar||function(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var c in o)c!=="default"&&Object.prototype.hasOwnProperty.call(o,c)&&r(a,o,c);return t(a,o),a},i=f&&f.__exportStar||function(o,a){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&r(a,o,c)};Object.defineProperty(e,"__esModule",{value:!0}),e.packstream=e.channel=e.buf=e.bolt=e.loadBalancing=void 0,e.loadBalancing=n(rr),e.bolt=n(Qd),e.buf=n(sn),e.channel=n(cn),e.packstream=n(Fe),i(gg,e)})(Gb);(function(e){var r=f&&f.__awaiter||function(Y,re,W,ce){function q(D){return D instanceof W?D:new W(function(x){x(D)})}return new(W||(W=Promise))(function(D,x){function Q(be){try{U(ce.next(be))}catch(O){x(O)}}function ye(be){try{U(ce.throw(be))}catch(O){x(O)}}function U(be){be.done?D(be.value):q(be.value).then(Q,ye)}U((ce=ce.apply(Y,re||[])).next())})},t=f&&f.__generator||function(Y,re){var W={label:0,sent:function(){if(D[0]&1)throw D[1];return D[1]},trys:[],ops:[]},ce,q,D,x;return x={next:Q(0),throw:Q(1),return:Q(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function Q(U){return function(be){return ye([U,be])}}function ye(U){if(ce)throw new TypeError("Generator is already executing.");for(;x&&(x=0,U[0]&&(W=0)),W;)try{if(ce=1,q&&(D=U[0]&2?q.return:U[0]?q.throw||((D=q.return)&&D.call(q),0):q.next)&&!(D=D.call(q,U[1])).done)return D;switch(q=0,D&&(U=[U[0]&2,D.value]),U[0]){case 0:case 1:D=U;break;case 4:return W.label++,{value:U[1],done:!1};case 5:W.label++,q=U[1],U=[0];continue;case 7:U=W.ops.pop(),W.trys.pop();continue;default:if(D=W.trys,!(D=D.length>0&&D[D.length-1])&&(U[0]===6||U[0]===2)){W=0;continue}if(U[0]===3&&(!D||U[1]>D[0]&&U[1]<D[3])){W.label=U[1];break}if(U[0]===6&&W.label<D[1]){W.label=D[1],D=U;break}if(D&&W.label<D[2]){W.label=D[2],W.ops.push(U);break}D[2]&&W.ops.pop(),W.trys.pop();continue}U=re.call(Y,W)}catch(be){U=[6,be],q=0}finally{ce=D=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}},n=f&&f.__importDefault||function(Y){return Y&&Y.__esModule?Y:{default:Y}};Object.defineProperty(e,"__esModule",{value:!0}),e.UnboundRelationship=e.Relationship=e.Node=e.Record=e.ServerInfo=e.GqlStatusObject=e.Notification=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ResultSummary=e.RxResult=e.RxManagedTransaction=e.RxTransaction=e.RxSession=e.EagerResult=e.Result=e.ManagedTransaction=e.Transaction=e.Session=e.Driver=e.temporal=e.spatial=e.graph=e.error=e.routing=e.session=e.types=e.logging=e.auth=e.isRetryableError=e.Neo4jError=e.integer=e.isUnboundRelationship=e.isRelationship=e.isPathSegment=e.isPath=e.isNode=e.isDateTime=e.isLocalDateTime=e.isDate=e.isTime=e.isLocalTime=e.isDuration=e.isPoint=e.isInt=e.int=e.hasReachableServer=e.driver=e.authTokenManagers=void 0,e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.bookmarkManager=e.DateTime=e.LocalDateTime=e.Date=e.Time=e.LocalTime=e.Duration=e.Integer=e.Point=e.PathSegment=e.Path=void 0;var i=At;Object.defineProperty(e,"Driver",{enumerable:!0,get:function(){return i.Driver}});var o=n(Yd),a=V;Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return a.authTokenManagers}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return a.Neo4jError}}),Object.defineProperty(e,"isRetryableError",{enumerable:!0,get:function(){return a.isRetryableError}}),Object.defineProperty(e,"error",{enumerable:!0,get:function(){return a.error}}),Object.defineProperty(e,"Integer",{enumerable:!0,get:function(){return a.Integer}}),Object.defineProperty(e,"int",{enumerable:!0,get:function(){return a.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return a.isInt}}),Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return a.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return a.Point}}),Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return a.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return a.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return a.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return a.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return a.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return a.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return a.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return a.isLocalTime}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return a.isNode}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return a.isPath}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return a.isPathSegment}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return a.isRelationship}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return a.isTime}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return a.isUnboundRelationship}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return a.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return a.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return a.Time}}),Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return a.Node}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return a.Path}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return a.PathSegment}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return a.Relationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return a.UnboundRelationship}}),Object.defineProperty(e,"Record",{enumerable:!0,get:function(){return a.Record}}),Object.defineProperty(e,"ResultSummary",{enumerable:!0,get:function(){return a.ResultSummary}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return a.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return a.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return a.QueryStatistics}}),Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return a.Notification}}),Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return a.GqlStatusObject}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return a.ServerInfo}}),Object.defineProperty(e,"Result",{enumerable:!0,get:function(){return a.Result}}),Object.defineProperty(e,"EagerResult",{enumerable:!0,get:function(){return a.EagerResult}}),Object.defineProperty(e,"auth",{enumerable:!0,get:function(){return a.auth}}),Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return a.Session}}),Object.defineProperty(e,"Transaction",{enumerable:!0,get:function(){return a.Transaction}}),Object.defineProperty(e,"ManagedTransaction",{enumerable:!0,get:function(){return a.ManagedTransaction}}),Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return a.bookmarkManager}}),Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return a.routing}}),Object.defineProperty(e,"resultTransformers",{enumerable:!0,get:function(){return a.resultTransformers}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return a.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return a.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return a.notificationSeverityLevel}}),Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return a.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return a.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return a.notificationFilterMinimumSeverityLevel}}),Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return a.clientCertificateProviders}});var c=Gb,s=n(Cc);e.RxSession=s.default;var u=n(cu);e.RxTransaction=u.default;var l=n(ss);e.RxManagedTransaction=l.default;var h=n(hi);e.RxResult=h.default;var _=a.internal.util,y=_.ENCRYPTION_ON,m=_.assertString,E=_.isEmptyObjectOrNull,w=a.internal.serverAddress.ServerAddress,S=a.internal.urlUtil,A="neo4j-javascript/"+o.default;function R(Y){return typeof Y=="object"&&Y!=null&&"getToken"in Y&&"handleSecurityException"in Y&&typeof Y.getToken=="function"&&typeof Y.handleSecurityException=="function"}function I(Y){if(R(Y))return Y;var re=Y;return re=re||{},re.scheme=re.scheme||"none",(0,a.staticAuthTokenManager)({authToken:re})}function j(Y,re,W){W===void 0&&(W={}),m(Y,"Bolt URL");var ce=S.parseDatabaseUrl(Y),q=!1,D=!1,x;switch(ce.scheme){case"bolt":break;case"bolt+s":D=!0,x="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":D=!0,x="TRUST_ALL_CERTIFICATES";break;case"neo4j":q=!0;break;case"neo4j+s":D=!0,x="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",q=!0;break;case"neo4j+ssc":D=!0,x="TRUST_ALL_CERTIFICATES",q=!0;break;default:throw new Error("Unknown scheme: ".concat(ce.scheme))}if(D){if("encrypted"in W||"trust"in W)throw new Error("Encryption/trust can only be configured either through URL or config, not both");W.encrypted=y,W.trust=x,W.clientCertificate=(0,a.resolveCertificateProvider)(W.clientCertificate)}var Q=I(re);W.userAgent=W.userAgent||A,W.boltAgent=a.internal.boltAgent.fromVersion(o.default);var ye=w.fromUrl(ce.hostAndPort),U={address:ye,typename:q?"Routing":"Direct",routing:q};return new i.Driver(U,W,be());function be(){if(q)return function(O,C,N,L){return new c.RoutingConnectionProvider({id:O,config:C,log:N,hostNameResolver:L,authTokenManager:Q,address:ye,userAgent:C.userAgent,boltAgent:C.boltAgent,routingContext:ce.query})};if(!E(ce.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(Y,"'"));return function(O,C,N){return new c.DirectConnectionProvider({id:O,config:C,log:N,authTokenManager:Q,address:ye,userAgent:C.userAgent,boltAgent:C.boltAgent})}}}e.driver=j;function M(Y,re){return r(this,void 0,void 0,function(){var W;return t(this,function(ce){switch(ce.label){case 0:W=j(Y,{scheme:"none",principal:"",credentials:""},re),ce.label=1;case 1:return ce.trys.push([1,,3,5]),[4,W.getNegotiatedProtocolVersion()];case 2:return ce.sent(),[2,!0];case 3:return[4,W.close()];case 4:return ce.sent(),[7];case 5:return[2]}})})}e.hasReachableServer=M;var G={console:function(Y){return{level:Y,logger:function(re,W){return console.log("".concat(f.Date.now()," ").concat(re.toUpperCase()," ").concat(W))}}}};e.logging=G;var H={Node:a.Node,Relationship:a.Relationship,UnboundRelationship:a.UnboundRelationship,PathSegment:a.PathSegment,Path:a.Path,Result:a.Result,EagerResult:a.EagerResult,ResultSummary:a.ResultSummary,Record:a.Record,Point:a.Point,Date:a.Date,DateTime:a.DateTime,Duration:a.Duration,LocalDateTime:a.LocalDateTime,LocalTime:a.LocalTime,Time:a.Time,Integer:a.Integer};e.types=H;var ie={READ:i.READ,WRITE:i.WRITE};e.session=ie;var ue={toNumber:a.toNumber,toString:a.toString,inSafeRange:a.inSafeRange};e.integer=ue;var pe={isPoint:a.isPoint};e.spatial=pe;var J={isDuration:a.isDuration,isLocalTime:a.isLocalTime,isTime:a.isTime,isDate:a.isDate,isLocalDateTime:a.isLocalDateTime,isDateTime:a.isDateTime};e.temporal=J;var _e={isNode:a.isNode,isPath:a.isPath,isPathSegment:a.isPathSegment,isRelationship:a.isRelationship,isUnboundRelationship:a.isUnboundRelationship};e.graph=_e;var qe={authTokenManagers:a.authTokenManagers,driver:j,hasReachableServer:M,int:a.int,isInt:a.isInt,isPoint:a.isPoint,isDuration:a.isDuration,isLocalTime:a.isLocalTime,isTime:a.isTime,isDate:a.isDate,isLocalDateTime:a.isLocalDateTime,isDateTime:a.isDateTime,isNode:a.isNode,isPath:a.isPath,isPathSegment:a.isPathSegment,isRelationship:a.isRelationship,isUnboundRelationship:a.isUnboundRelationship,integer:ue,Neo4jError:a.Neo4jError,isRetryableError:a.isRetryableError,auth:a.auth,logging:G,types:H,session:ie,routing:a.routing,error:a.error,graph:_e,spatial:pe,temporal:J,Driver:i.Driver,Session:a.Session,Transaction:a.Transaction,ManagedTransaction:a.ManagedTransaction,Result:a.Result,EagerResult:a.EagerResult,RxSession:s.default,RxTransaction:u.default,RxManagedTransaction:l.default,RxResult:h.default,ResultSummary:a.ResultSummary,Plan:a.Plan,ProfiledPlan:a.ProfiledPlan,QueryStatistics:a.QueryStatistics,Notification:a.Notification,GqlStatusObject:a.GqlStatusObject,ServerInfo:a.ServerInfo,Record:a.Record,Node:a.Node,Relationship:a.Relationship,UnboundRelationship:a.UnboundRelationship,Path:a.Path,PathSegment:a.PathSegment,Point:a.Point,Integer:a.Integer,Duration:a.Duration,LocalTime:a.LocalTime,Time:a.Time,Date:a.Date,LocalDateTime:a.LocalDateTime,DateTime:a.DateTime,bookmarkManager:a.bookmarkManager,resultTransformers:a.resultTransformers,notificationCategory:a.notificationCategory,notificationSeverityLevel:a.notificationSeverityLevel,notificationFilterDisabledCategory:a.notificationFilterDisabledCategory,notificationFilterMinimumSeverityLevel:a.notificationFilterMinimumSeverityLevel,clientCertificateProviders:a.clientCertificateProviders};e.default=qe})(Up);const Np=Q0(Up),hV="neo4j+s://c7fe659d.databases.neo4j.io",vV="neo4j",_V="wv7jCNLXwDEe2ttTHh-Z4u-1V5nykezWEWvVgrx-VDc";async function pV(e,r=[]){const t=Np.driver(hV,Np.auth.basic(vV,_V));try{const c=await a(e,structuredClone(r));console.info(`Mounted ${c} at /${r.join("/")}/.`)}finally{await t.close()}async function n({dirCID:c,entryCID:s,name:u}){const l=t.session();await l.run(`
      MATCH (e:IPFS { cid: $entryCID })
      MERGE (d:IPFS:Directory { cid: $dirCID })
      MERGE (d)-[c:CONTAINS]->(e)
      SET c.path = $name
    `,{dirCID:c,entryCID:s,name:u}),await l.close()}async function i({cid:c,type:s,size:u}){const l=t.session();await l.run(`
      MERGE (e:IPFS:File { cid: $cid })
      SET e.mimetype = CASE WHEN $type IS NOT NULL THEN $type END
      SET e.size = $size
    `,{cid:c,type:s,size:u}),await l.close()}async function o({path:c,cid:s}){const u=t.session(),l=`
      MERGE (r:Mount:Root)
      RETURN elementId(r) as id
    `,{records:h}=await u.run(l);let _=h[0].get("id");for(;c.length>0;){const m=`
        MATCH (p:Mount)
        WHERE elementId(p) = $next
        MERGE (p)-[:CONTAINS {path: $elem}]->(n:Mount)
        RETURN elementId(n) as id
      `,{records:E}=await u.run(m,{next:_,elem:c.shift()});_=E[0].get("id")}await u.run(`
      MATCH (m:Mount)
      WHERE elementId(m) = $next
      MATCH (i:IPFS { cid: $cid })
      MERGE (m)-[:CONNECTS {order: 1}]->(i)
    `,{next:_,cid:s}),await u.close()}async function a(c,s=[]){if(!c.children)throw new Error(`Not A Directory: ${c.title}`);for(const u of c.children)if(!(!u.selected&&u.getSelectedNodes().length===0)){if(u.children)await a(u);else{const l=(()=>{var h;switch((h=u.title.split(".").at(-1))==null?void 0:h.toLowerCase()){case"svg":return"image/svg+xml";case"png":return"image/png";case"jpg":case"jpeg":return"image/jpeg";default:return null}})();await i({cid:u.data.cid,type:l,size:u.data.size})}if(c.data.cid)await n({dirCID:c.data.cid,entryCID:u.data.cid,name:u.title});else return await o({path:s,cid:u.data.cid}),u.data.cid}}}var yV=$p('<form class="svelte-o04jkh"><input placeholder="/system/mount/point/"> <button>Neo4j Import</button></form>'),bV=$p('<form class="svelte-o04jkh"><input type="file" required accept=".car"> <button>Read CAR</button></form> <!> <div id="fs-tree" class="svelte-o04jkh"></div>',1);function AV(e,r){var y,m,E;U0(r,!0);class t{constructor(){Zl(this,m,mu());Zl(this,E,mu(!((y=this.form)!=null&&y.checkValidity())))}get form(){return Or(Si(this,m))}set form(S){gu(Si(this,m),Ql(S))}get disabled(){return Or(Si(this,E))}set disabled(S){gu(Si(this,E),Ql(S))}}m=new WeakMap,E=new WeakMap;let n=mu(void 0),i=new t,o=mu("");const a=async w=>{var I,j;w.preventDefault();const S=((I=i.form)==null?void 0:I.querySelector('input[type="file"]'))??null,A=(j=S==null?void 0:S.files)==null?void 0:j[0];if(!A)throw new Error("No file selected.");const R=await bO(A);X0(R),gu(n,Ql(J0({source:R,mount:"fs-tree"})))},c=async w=>{w.preventDefault();const S=Or(o).split("/").filter(Boolean);if(!Or(n))throw new Error("No tree to mount.");pV(Or(n).root,S)};var s=bV();H0(w=>{x0.title="Upload a CAR"});var u=F0(s),l=kh(u);l.__change=()=>{var w;return i.disabled=!((w=i.form)!=null&&w.checkValidity())};var h=Dh(l,2);Lh(u),Y0(u,w=>i.form=w,()=>i==null?void 0:i.form);var _=Dh(u,2);z0(_,()=>!!Or(n),w=>{var S=yV(),A=kh(S);G0(A),Uh(2),Lh(S),Fh("submit",S,c),eO(A,()=>Or(o),R=>gu(o,R)),$h(w,S)}),Uh(2),B0(()=>h.disabled=i.disabled),Fh("submit",u,a),$h(e,s),W0()}q0(["change"]);export{AV as component,IV as universal};

import"../chunks/DsnmJJEf.js";import{p as L,aw as b,aB as D,az as $,b6 as T,d as g,k as e,ay as E,s as S,r as p,t as I,b as M,c as F,g as J,f as R,ax as K}from"../chunks/C0lYg4N8.js";import{h as Q}from"../chunks/vHHk0yCJ.js";import{e as C,i as N}from"../chunks/BznPomiX.js";import{s as V}from"../chunks/9GzlE_cd.js";import{i as Z}from"../chunks/DJx03HtA.js";import{a as _,c as tt}from"../chunks/CoB6fEAl.js";import{b as P}from"../chunks/C1A0XLvw.js";class G{x;y;w;h;center;constructor({x:t=0,y:h=0,w:r=0,h:o=0}={}){this.x=Math.min(t,t+r),this.y=Math.min(h,h+o),this.w=Math.abs(r),this.h=Math.abs(o),this.center={x:this.x+this.w/2,y:this.y+this.h/2}}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}get width(){return this.w}set width(t){this.w=t}get height(){return this.h}set height(t){this.h=t}}class k{x;y;constructor({x:t=0,y:h=0}={}){this.x=t,this.y=h}}function A(l,t){if(!l||!t)return null;if(!l.closest)throw new Error("`elem.closest()` is not defined.");const r=(l instanceof SVGSVGElement?l:l.closest("svg"))?.createSVGPoint();if(!r)throw new Error(`No SVG parent of ${l.nodeName}.`);r.x=t.x,r.y=t.y;const o=l.getScreenCTM();if(!o)throw new Error("`ctm` wasnâ€™t set.");return r.matrixTransform(o.inverse())}function H({points:l,bounds:t=new G({x:0,y:0,w:window.innerWidth,h:window.innerHeight}),forward:h=!0}){const[r,o]=[l.start,l.inline];if(r.x===o.x&&r.y===o.y)return null;const x=h?1:-1,i={x:(o.x-r.x)*x,y:(o.y-r.y)*x},c=[];if(i.y!==0){const s=(t.top-r.y)/i.y;if(s>0){const n=r.x+s*i.x;n>=t.left&&n<=t.right&&c.push({x:n,y:t.top,edge:"top",t:s})}}if(i.y!==0){const s=(t.bottom-r.y)/i.y;if(s>0){const n=r.x+s*i.x;n>=t.left&&n<=t.right&&c.push({x:n,y:t.bottom,edge:"bottom",t:s})}}if(i.x!==0){const s=(t.left-r.x)/i.x;if(s>0){const n=r.y+s*i.y;n>=t.top&&n<=t.bottom&&c.push({x:t.left,y:n,edge:"left",t:s})}}if(i.x!==0){const s=(t.right-r.x)/i.x;if(s>0){const n=r.y+s*i.y;n>=t.top&&n<=t.bottom&&c.push({x:t.right,y:n,edge:"right",t:s})}}if(c.length>0){const s=c.reduce((n,f)=>f.t<n.t?f:n);return s.progress=1/s.t,s}return null}var et=T("<line></line>"),rt=T('<svg width="100%" height="100%" preserveAspectRatio="none"><!><rect class="svelte-zivjp"></rect><text textLength="100%" lengthAdjust="spacingAndGlyphs" class="svelte-zivjp"><tspan dy="0.75lh"> </tspan> <tspan x="0" dy="0.75lh"> </tspan> <tspan x="0" dy="0.75lh"> </tspan></text></svg>');function st(l,t){L(t,!0);let h=b(null),r=b(null),o=E(()=>{if(!e(h))return new G;const a=e(h).getBoundingClientRect();return new G({x:a.x,y:a.y,w:a.width,h:a.height})}),x=b(D(new k));document.addEventListener("mousemove",a=>{try{$(x,new k({x:a.clientX,y:a.clientY}),!0)}catch(v){console.error({"Mouse Update":v})}});const i={x:-12,y:0,h:55,get w(){return 2*Math.abs(this.x)}};let c=E(()=>A(e(r),H({points:{start:e(o).center,inline:e(x)},bounds:e(o),forward:!0})));const s=E(()=>A(e(r),H({points:{start:e(o).center,inline:e(x)},bounds:e(o),forward:!1}))),n=E(()=>e(c)&&e(s)?{x1:e(c).x,y1:e(c).y,x2:e(s).x,y2:e(s).y}:null);var f=rt(),u=g(f);{var z=a=>{var v=et();tt(v,()=>({...e(n)}),void 0,void 0,"svelte-zivjp"),M(a,v)};Z(u,a=>{e(n)&&a(z)})}var y=S(u),j=S(y),m=g(j),w=g(m);p(m);var d=S(m,2),W=g(d);p(d);var B=S(d,2),O=g(B);p(B),p(j),P(j,a=>$(h,a),()=>e(h)),p(f),P(f,a=>$(r,a),()=>e(r)),I((a,v,U,X,Y,q)=>{_(f,"viewBox",`${i.x} ${i.y} ${i.w??""} ${i.h}`),_(y,"x",i.x),_(y,"y",i.y),_(y,"width",i.w),_(y,"height",i.h),V(w,`â„³: Â«${t.col??""}, ${t.row??""}Â»`),V(W,`ðŸ­: Â«${a??""}, ${v??""}Â»`),V(O,`â˜: Â«${U??""}, ${X??""}Â»
      â†’ Â«
        ${Y??""},
        ${q??""}
      Â»`)},[()=>e(x).x.toFixed(1),()=>e(x).y.toFixed(1),()=>Math.round(e(o)?.x??0),()=>Math.round(e(o)?.y??0),()=>Math.round((e(o)?.x??0)+(e(o)?.w??0)),()=>Math.round((e(o)?.y??0)+(e(o)?.h??0))]),M(l,f),F()}var ot=R('<li class="svelte-11opb1j"><!></li>'),it=R('<li class="svelte-11opb1j"><ol class="svelte-11opb1j"></ol></li>'),nt=R('<ol id="grid" class="svelte-11opb1j"></ol>');function gt(l,t){L(t,!0);let h=b(8),r=b(8);const{documentElement:o}=document,x=()=>{if(!(o instanceof HTMLHtmlElement))throw new Error("`html` is not a `<html>` element.");const s=getComputedStyle(o);$(r,Number(s.getPropertyValue("--rows")),!0),$(h,Number(s.getPropertyValue("--cols")),!0),console.debug({resize:{cols:e(h),rows:e(r)}})};new ResizeObserver(x).observe(o),J(x);var c=nt();Q(s=>{K.title="Macrodata Refinement"}),C(c,21,()=>({length:e(r)}),N,(s,n,f)=>{var u=it(),z=g(u);C(z,21,()=>({length:e(h)}),N,(y,j,m)=>{var w=ot(),d=g(w);st(d,{row:f+1,col:m+1}),p(w),M(y,w)}),p(z),p(u),M(s,u)}),p(c),M(l,c),F()}export{gt as component};

import{a as p,t as m,c as Z}from"../chunks/disclose-version.CtYrEA78.js";import{aD as ee,z as te,h as I,C as ae,aE as re,S as j,M as O,O as se,I as ie,a1 as G,x as U,i as K,ay as B,aF as J,K as w,N as M,aG as oe,ah as le,p as ne,a as ce,aA as ue,s as x,d as s,aH as fe,c as v,aI as L,r as c,t as P,k as he,f as pe,e as ve}from"../chunks/runtime.Dweuwbqp.js";import{s as D}from"../chunks/render.B2dMyOIT.js";import{p as X,i as W}from"../chunks/if.BfmecCpI.js";import{e as Q,i as V}from"../chunks/each.BGjj3ZiQ.js";import{h as de}from"../chunks/svelte-head.iJn9f2HD.js";import{s as q}from"../chunks/attributes.D28ev2Wi.js";import{d as _e,e as me}from"../chunks/events.BodA8K1H.js";import{b as be}from"../chunks/misc.JGJ8CsuQ.js";import{g as ge}from"../chunks/neo4jDriver.tQrFAidX.js";const z=0,$=1,F=2;function Ne(b,u,r,d,n){I&&ae();var g=b,E=ee(),A=le,o,l,_,f,C=(E?G:U)(void 0),y=(E?G:U)(void 0),T=!1;function e(a,i){T=!0,i&&(K(t),B(t),J(A));try{a===z&&r&&(l?w(l):l=O(()=>r(g))),a===$&&d&&(_?w(_):_=O(()=>d(g,C))),a===F&&n&&(f?w(f):f=O(()=>n(g,y))),a!==z&&l&&M(l,()=>l=null),a!==$&&_&&M(_,()=>_=null),a!==F&&f&&M(f,()=>f=null)}finally{i&&(J(null),B(null),K(null),oe())}}var t=te(()=>{if(o!==(o=u())){if(re(o)){var a=o;T=!1,a.then(i=>{a===o&&(j(C,i),e($,!0))},i=>{if(a===o)throw j(y,i),e(F,!0),y.v}),I?r&&(l=O(()=>r(g))):se(()=>{T||e(z,!0)})}else j(C,o),e($,!1);return()=>o=null}});I&&(g=ie)}const Ce=!0,Fe=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ce},Symbol.toStringTag,{value:"Module"})),ye=async b=>{const u=ge();try{const r=u.session(),d=b.length===0?`
        MATCH (start:Root)-[children:CONTAINS|CONNECTS]->(child)
        RETURN children.path as path, child
      `:`
        WITH $elems as pathElems
        MATCH path = (start:Root)-[:CONTAINS|CONNECTS*]->(end)
        MATCH (end)-[children:CONTAINS|CONNECTS]->(child)
        WHERE [rel in relationships(path) WHERE NOT isEmpty(rel.path) | rel.path] = pathElems
        RETURN children.path as path, child
      `,n=await r.run(d,{elems:b});return await r.close(),n.records}finally{u.close()}};var Ee=m('<li class="svelte-2irh7e"> <button class="svelte-2irh7e">⨯</button></li>'),Te=m('<ul id="path" class="svelte-2irh7e"></ul>'),xe=m("<h2>No Results</h2>"),ke=(b,u,r,d)=>{s(u).get("child").labels.includes("File")?(ve(r,X(s(u).get("child").properties.cid)),console.debug({fileCID:s(r)})):d(s(u).get("path"))},Se=m("<li><button> </button></li>"),Oe=m('<ul id="result" class="svelte-2irh7e"></ul>'),$e=m("<h2>Searching…</h2>"),Ae=m('<object><p>Could not display <a target="_blank"> </a>.</p></object>'),He=m('<main class="svelte-2irh7e"><form><input id="chip" placeholder="Path Element"> <button>Add Path Element</button></form> <!> <section id="result" class="svelte-2irh7e"><!> <!></section></main>');function Ge(b,u){ne(u,!0);let r=X([]),d=he(async()=>{const e=await ye(r);return console.debug({result:e}),e}),n=fe(null);const g=e=>{e.preventDefault();const t=e.target.elements.chip;E(t.value),t.value=""},E=e=>{e=e.trim(),e&&r.push(e)},A=e=>{r.splice(e,1)};var o=He();de(e=>{ue.title="Mïmis: Search"});var l=v(o),_=v(l);be(_),L(2),c(l);var f=x(l,2);W(f,()=>r.length>0,e=>{var t=Te();Q(t,21,()=>r,V,(a,i,N)=>{var h=Ee(),k=v(h),S=x(k);S.__click=()=>A(N),c(h),P(()=>D(k,`${s(i)??""} `)),p(a,h)}),c(t),p(e,t)});var C=x(f,2),y=v(C);Ne(y,()=>s(d),e=>{var t=$e();p(e,t)},(e,t)=>{var a=Z(),i=pe(a);W(i,()=>!s(t)||s(t).length===0,N=>{var h=xe();p(N,h)},N=>{var h=Oe();Q(h,21,()=>s(t),V,(k,S)=>{var H=Se(),R=v(H);R.__click=[ke,S,n,E];var Y=v(R,!0);P(()=>D(Y,s(S).get("path"))),c(R),c(H),p(k,H)}),c(h),p(N,h)}),p(e,a)});var T=x(y,2);W(T,()=>s(n),e=>{var t=Ae(),a=v(t),i=x(v(a)),N=v(i);c(i),L(),c(a),c(t),P(()=>{q(t,"data",`ipfs://${s(n)}`),q(t,"title",`ipfs://${s(n)}`),q(i,"href",`https://w3s.link/ipfs/${s(n)}`),D(N,`ipfs://${s(n)??""}`)}),p(e,t)}),c(C),c(o),me("submit",l,g),p(b,o),ce()}_e(["click"]);export{Ge as component,Fe as universal};

import"../chunks/CWj6FrbW.js";import{p as k,ah as A,f as _,d as b,s as h,b as w,c as M,$ as I,r as g,t as x,l as T}from"../chunks/DyJcJ3Y7.js";import{d as $,s as O}from"../chunks/THFJsEQF.js";import{e as S,i as L}from"../chunks/C7Rmo30o.js";import{h as W}from"../chunks/BgZ3Q8g3.js";import{l as j}from"../chunks/8HslT92O.js";import{W as D,m as q,P as C,c as B,s as G}from"../chunks/Dw6aEOe4.js";const J=async(v,p,r,s)=>{try{const o="This is a test.",a=await p();let{address:c}=r.getAccount();if(c||(c=await new Promise(d=>{r.subscribeAccount(({address:i})=>{i&&d(i)}),r.open()})),s({message:o,provider:a,address:c}),!c)throw new Error("Could not find address from provider.");const e=await a.request({method:"personal_sign",params:[o,c]});s({signature:e})}catch(o){s(`Error: ${o.message}`)}},R=async(v,p,r,s,o)=>{try{const a="This is a test.",c=await p();let{address:e}=r.getAccount();if(e||(e=await new Promise(i=>{r.subscribeAccount(({address:m})=>{m&&i(m)}),r.open()})),s({message:a,config:o.wagmiConfig,address:e}),!e)throw new Error("Could not find address from provider.");s({connectors:r.getConnectors()});const d=await G(o.wagmiConfig,{message:a});s({signature:d})}catch(a){s(`Error: ${a.message}`)}};var U=_('<link rel="icon" href="radioactive%20barrel.svg"/>'),z=_("<li><pre> </pre></li>"),F=_('<main class="svelte-18lbhld"><button class="svelte-18lbhld">Provider <code>sign_message</code></button> <button class="svelte-18lbhld">WAGMI <code>signMessage</code></button> <appkit-button></appkit-button> <ol reversed></ol></main>',2);function K(v,p){k(p,!0);const r=A([]);function s(t){if(console.debug({msg:t}),typeof t!="string")try{t=j.stringify(t,null,2)}catch(n){t=`Error: ${n.message}`}r.unshift(t)}const o=[q],a=new D({projectId:C,networks:o}),e=A(B({adapters:[a],networks:o,metadata:{name:"Mïmis",description:"Collaborative filesystem",url:"https://mimis.dhappy.org",icons:["https://avatars.githubusercontent.com/u/179229932"]},projectId:C,features:{analytics:!0,swaps:!1,onramp:!1,connectMethodsOrder:["wallet","social","email"]}}));async function d(t="eip155"){return await e.ready(),new Promise((n,u)=>{const f=e.getProvider(t);if(f)return n(f);e.subscribeProviders(l=>n(l[t])),e.subscribeEvents(l=>{l.data.event==="MODAL_CLOSE"&&(l.data.properties.connected||u(new Error("Modal closed without connection.")))}),e.open()})}var i=F();W(t=>{var n=U();I.title="Mïmis: Signing Test",w(t,n)});var m=b(i);m.__click=[J,d,e,s];var y=h(m,2);y.__click=[R,d,e,s,a];var E=h(y,2),P=h(E,2);S(P,21,()=>r,L,(t,n)=>{var u=z(),f=b(u),l=b(f,!0);g(f),g(u),x(()=>O(l,T(n))),w(t,u)}),g(P),g(i),w(v,i),M()}$(["click"]);export{K as component};

var Uh=Object.defineProperty;var Ja=t=>{throw TypeError(t)};var Ph=(t,e,r)=>e in t?Uh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var S=(t,e,r)=>Ph(t,typeof e!="symbol"?e+"":e,r),Xa=(t,e,r)=>e.has(t)||Ja("Cannot "+r);var Vt=(t,e,r)=>(Xa(t,e,"read from private field"),r?r.call(t):e.get(t)),An=(t,e,r)=>e.has(t)?Ja("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Bn=(t,e,r,n)=>(Xa(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);import{c as Ds,a as Ue,t as Ye,d as Dh}from"../chunks/1uucwj4j.js";import{p as pr,f as On,g as P,a as gr,k as Nl,t as ft,c as ve,r as we,ai as Gt,s as Ce,y as pe,aH as Lo,x as Ne,b as Xi,aJ as $h,ah as $s}from"../chunks/CFSPKoXQ.js";import{s as Qi,m as Rh}from"../chunks/C7UMR4Iq.js";import{i as Gr}from"../chunks/DVYZzJui.js";import{h as Lh}from"../chunks/BH7azq3Y.js";import{s as _e,a as Fh,c as Fo,r as Mh,b as Hh}from"../chunks/FRPJG6-M.js";import{s as Mo,t as Vh}from"../chunks/CH5QzJvD.js";import{d as Yn,j as Yr}from"../chunks/DBoXZUh-.js";import{b as jh}from"../chunks/DiN6TLz0.js";import{p as Ee}from"../chunks/Cbbz3xGW.js";import{b as dt}from"../chunks/Ec_nTkiZ.js";import{T as zh}from"../chunks/CQbym6Aj.js";import{g as es,c as io}from"../chunks/Cpj98o6Y.js";import{s as Gh}from"../chunks/5Gv3GOPF.js";import{p as kt}from"../chunks/DZwW-C3d.js";import{t as mi}from"../chunks/CsOxUP_k.js";import{c as be}from"../chunks/DWQ8lEC3.js";import{e as qh}from"../chunks/BpjVJYY2.js";import{c as Wh}from"../chunks/CWbDj4LP.js";import"../chunks/BC_t1SYp.js";function Ut(t,e,r,n){var i=t.__styles??(t.__styles={});i[e]!==r&&(i[e]=r,r==null?t.style.removeProperty(e):t.style.setProperty(e,r,""))}function Kh(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function ln(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function Yh(t){return new TextEncoder().encode(t)}function Zh(t){return new TextDecoder().decode(t)}function Jh(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),f=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var b=0,w=0,x=0,B=y.length;x!==B&&y[x]===0;)x++,b++;for(var A=(B-x)*u+1>>>0,I=new Uint8Array(A);x!==B;){for(var D=y[x],N=0,C=A-1;(D!==0||N<w)&&C!==-1;C--,N++)D+=256*I[C]>>>0,I[C]=D%a>>>0,D=D/a>>>0;if(D!==0)throw new Error("Non-zero carry");w=N,x++}for(var _=A-w;_!==A&&I[_]===0;)_++;for(var O=c.repeat(b);_<A;++_)O+=t.charAt(I[_]);return O}function p(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var b=0;if(y[b]!==" "){for(var w=0,x=0;y[b]===c;)w++,b++;for(var B=(y.length-b)*f+1>>>0,A=new Uint8Array(B);y[b];){var I=r[y.charCodeAt(b)];if(I===255)return;for(var D=0,N=B-1;(I!==0||D<x)&&N!==-1;N--,D++)I+=a*A[N]>>>0,A[N]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");x=D,b++}if(y[b]!==" "){for(var C=B-x;C!==B&&A[C]===0;)C++;for(var _=new Uint8Array(w+(B-C)),O=w;C!==B;)_[O++]=A[C++];return _}}}function m(y){var b=p(y);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:p,decode:m}}var Xh=Jh,Qh=Xh;let ep=class{constructor(e,r,n){S(this,"name");S(this,"prefix");S(this,"baseEncode");this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},tp=class{constructor(e,r,n){S(this,"name");S(this,"prefix");S(this,"baseDecode");S(this,"prefixCodePoint");this.name=e,this.prefix=r;const i=r.codePointAt(0);if(i===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=i,this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return _l(this,e)}},rp=class{constructor(e){S(this,"decoders");this.decoders=e}or(e){return _l(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function _l(t,e){return new rp({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}let np=class{constructor(e,r,n,i){S(this,"name");S(this,"prefix");S(this,"baseEncode");S(this,"baseDecode");S(this,"encoder");S(this,"decoder");this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new ep(e,r,n),this.decoder=new tp(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function ts({name:t,prefix:e,encode:r,decode:n}){return new np(t,e,r,n)}function Zn({name:t,prefix:e,alphabet:r}){const{encode:n,decode:i}=Qh(r,t);return ts({prefix:e,name:t,encode:n,decode:s=>ln(i(s))})}function ip(t,e,r,n){const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,f=0;for(let u=0;u<s;++u){const h=i[t[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[f++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o}function sp(t,e,r){const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o!==0&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s}function Ve({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return ts({prefix:e,name:t,encode(i){return sp(i,n,r)},decode(i){return ip(i,n,r,t)}})}const Me=Zn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),op=Zn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ap=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Me,base58flickr:op},Symbol.toStringTag,{value:"Module"})),fr=Ve({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),cp=Ve({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),lp=Ve({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),up=Ve({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),fp=Ve({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),dp=Ve({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hp=Ve({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),pp=Ve({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),gp=Ve({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),yp=Object.freeze(Object.defineProperty({__proto__:null,base32:fr,base32hex:fp,base32hexpad:hp,base32hexpadupper:pp,base32hexupper:dp,base32pad:lp,base32padupper:up,base32upper:cp,base32z:gp},Symbol.toStringTag,{value:"Module"})),Ii=Zn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),mp=Zn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),wp=Object.freeze(Object.defineProperty({__proto__:null,base36:Ii,base36upper:mp},Symbol.toStringTag,{value:"Module"}));var bp=Ol,Qa=128,vp=127,xp=~vp,Ep=Math.pow(2,31);function Ol(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Ep;)e[r++]=t&255|Qa,t/=128;for(;t&xp;)e[r++]=t&255|Qa,t>>>=7;return e[r]=t|0,Ol.bytes=r-n+1,e}var Sp=so,Ap=128,ec=127;function so(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw so.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&ec)<<i:(o&ec)*Math.pow(2,i),i+=7}while(o>=Ap);return so.bytes=s-n,r}var Bp=Math.pow(2,7),kp=Math.pow(2,14),Tp=Math.pow(2,21),Ip=Math.pow(2,28),Cp=Math.pow(2,35),Np=Math.pow(2,42),_p=Math.pow(2,49),Op=Math.pow(2,56),Up=Math.pow(2,63),Pp=function(t){return t<Bp?1:t<kp?2:t<Tp?3:t<Ip?4:t<Cp?5:t<Np?6:t<_p?7:t<Op?8:t<Up?9:10},Dp={encode:bp,decode:Sp,encodingLength:Pp},_i=Dp;function oo(t,e=0){return[_i.decode(t,e),_i.decode.bytes]}function Oi(t,e,r=0){return _i.encode(t,e,r),e}function Ui(t){return _i.encodingLength(t)}function Rn(t,e){const r=e.byteLength,n=Ui(t),i=n+Ui(r),s=new Uint8Array(i+r);return Oi(t,s,0),Oi(r,s,n),s.set(e,i),new Vo(t,r,e,s)}function Ho(t){const e=ln(t),[r,n]=oo(e),[i,s]=oo(e.subarray(n)),o=e.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new Vo(r,i,o,e)}function $p(t,e){if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&Kh(t.bytes,r.bytes)}}let Vo=class{constructor(e,r,n,i){S(this,"code");S(this,"size");S(this,"digest");S(this,"bytes");this.code=e,this.size=r,this.digest=n,this.bytes=i}};function tc(t,e){const{bytes:r,version:n}=t;switch(n){case 0:return Lp(r,ao(t),e??Me.encoder);default:return Fp(r,ao(t),e??fr.encoder)}}const rc=new WeakMap;function ao(t){const e=rc.get(t);if(e==null){const r=new Map;return rc.set(t,r),r}return e}var Al;let Q=class Ge{constructor(e,r,n,i){S(this,"code");S(this,"version");S(this,"multihash");S(this,"bytes");S(this,"/");S(this,Al,"CID");this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==kn)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Mp)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ge.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=Rn(e,r);return Ge.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Ge.equals(this,e)}static equals(e,r){const n=r;return n!=null&&e.code===n.code&&e.version===n.version&&$p(e.multihash,n.multihash)}toString(e){return tc(this,e)}toJSON(){return{"/":tc(this)}}link(){return this}[(Al=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const r=e;if(r instanceof Ge)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:i,multihash:s,bytes:o}=r;return new Ge(n,i,s,o??nc(n,i,s.bytes))}else if(r[Hp]===!0){const{version:n,multihash:i,code:s}=r,o=Ho(i);return Ge.create(n,s,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==kn)throw new Error(`Version 0 CID must use dag-pb (code: ${kn}) block encoding`);return new Ge(e,r,n,n.bytes)}case 1:{const i=nc(e,r,n.bytes);return new Ge(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Ge.create(0,kn,e)}static createV1(e,r){return Ge.create(1,e,r)}static decode(e){const[r,n]=Ge.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=Ge.inspectBytes(e),n=r.size-r.multihashSize,i=ln(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");const s=i.subarray(r.multihashSize-r.digestSize),o=new Vo(r.multihashCode,r.digestSize,s,i);return[r.version===0?Ge.createV0(o):Ge.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[h,p]=oo(e.subarray(r));return r+=p,h};let i=n(),s=kn;if(i===18?(i=0,r=0):s=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const o=r,a=n(),c=n(),f=r+c,u=f-o;return{version:i,codec:s,multihashCode:a,digestSize:c,multihashSize:u,size:f}}static parse(e,r){const[n,i]=Rp(e,r),s=Ge.decode(i);if(s.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return ao(s).set(n,e),s}};function Rp(t,e){switch(t[0]){case"Q":{const r=e??Me;return[Me.prefix,r.decode(`${Me.prefix}${t}`)]}case Me.prefix:{const r=e??Me;return[Me.prefix,r.decode(t)]}case fr.prefix:{const r=e??fr;return[fr.prefix,r.decode(t)]}case Ii.prefix:{const r=e??Ii;return[Ii.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function Lp(t,e,r){const{prefix:n}=r;if(n!==Me.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=e.get(n);if(i==null){const s=r.encode(t).slice(1);return e.set(n,s),s}else return i}function Fp(t,e,r){const{prefix:n}=r,i=e.get(n);if(i==null){const s=r.encode(t);return e.set(n,s),s}else return i}const kn=112,Mp=18;function nc(t,e,r){const n=Ui(t),i=n+Ui(e),s=new Uint8Array(i+r.byteLength);return Oi(t,s,0),Oi(e,s,n),s.set(r,i),s}const Hp=Symbol.for("@ipld/js-cid/CID");function Zr(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}const Vp=Zn({prefix:"9",name:"base10",alphabet:"0123456789"}),jp=Object.freeze(Object.defineProperty({__proto__:null,base10:Vp},Symbol.toStringTag,{value:"Module"})),zp=Ve({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Gp=Ve({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),qp=Object.freeze(Object.defineProperty({__proto__:null,base16:zp,base16upper:Gp},Symbol.toStringTag,{value:"Module"})),Wp=Ve({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Kp=Object.freeze(Object.defineProperty({__proto__:null,base2:Wp},Symbol.toStringTag,{value:"Module"})),Ul=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Yp=Ul.reduce((t,e,r)=>(t[r]=e,t),[]),Zp=Ul.reduce((t,e,r)=>{const n=e.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${e}`);return t[n]=r,t},[]);function Jp(t){return t.reduce((e,r)=>(e+=Yp[r],e),"")}function Xp(t){const e=[];for(const r of t){const n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);const i=Zp[n];if(i==null)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}const Qp=ts({prefix:"🚀",name:"base256emoji",encode:Jp,decode:Xp}),eg=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Qp},Symbol.toStringTag,{value:"Module"})),rs=Ve({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),tg=Ve({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ns=Ve({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),rg=Ve({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),ng=Object.freeze(Object.defineProperty({__proto__:null,base64:rs,base64pad:tg,base64url:ns,base64urlpad:rg},Symbol.toStringTag,{value:"Module"})),ig=Ve({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),sg=Object.freeze(Object.defineProperty({__proto__:null,base8:ig},Symbol.toStringTag,{value:"Module"})),og=ts({prefix:"\0",name:"identity",encode:t=>Zh(t),decode:t=>Yh(t)}),ag=Object.freeze(Object.defineProperty({__proto__:null,identity:og},Symbol.toStringTag,{value:"Module"})),cg=new TextEncoder,lg=new TextDecoder,ug="json",fg=512;function dg(t){return cg.encode(JSON.stringify(t))}function hg(t){return JSON.parse(lg.decode(t))}const pg=Object.freeze(Object.defineProperty({__proto__:null,code:fg,decode:hg,encode:dg,name:ug},Symbol.toStringTag,{value:"Module"})),gg="raw",yg=85;function mg(t){return ln(t)}function wg(t){return ln(t)}const bg=Object.freeze(Object.defineProperty({__proto__:null,code:yg,decode:wg,encode:mg,name:gg},Symbol.toStringTag,{value:"Module"})),Pl=0,vg="identity",Dl=ln;function xg(t){return Rn(Pl,Dl(t))}const Ar={code:Pl,name:vg,encode:Dl,digest:xg},Eg=Object.freeze(Object.defineProperty({__proto__:null,identity:Ar},Symbol.toStringTag,{value:"Module"}));function $l({name:t,code:e,encode:r}){return new Sg(t,e,r)}class Sg{constructor(e,r,n){S(this,"name");S(this,"code");S(this,"encode");this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Rn(this.code,r):r.then(n=>Rn(this.code,n))}else throw Error("Unknown type, must be binary type")}}function Rl(t){return async e=>new Uint8Array(await crypto.subtle.digest(t,e))}const jo=$l({name:"sha2-256",code:18,encode:Rl("SHA-256")}),Ag=$l({name:"sha2-512",code:19,encode:Rl("SHA-512")}),Bg=Object.freeze(Object.defineProperty({__proto__:null,sha256:jo,sha512:Ag},Symbol.toStringTag,{value:"Module"})),Pi={...ag,...Kp,...sg,...jp,...qp,...yp,...wp,...ap,...ng,...eg},kg={...Bg,...Eg},Tg={raw:bg,json:pg};function Jr(t=0){return new Uint8Array(t)}function Ll(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const ic=Ll("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Rs=Ll("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Jr(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Fl={utf8:ic,"utf-8":ic,hex:Pi.base16,latin1:Rs,ascii:Rs,binary:Rs,...Pi};function Le(t,e="utf8"){const r=Fl[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}const Ig=Math.pow(2,7),Cg=Math.pow(2,14),Ng=Math.pow(2,21),zo=Math.pow(2,28),Go=Math.pow(2,35),qo=Math.pow(2,42),Wo=Math.pow(2,49),ge=128,qe=127;function Rt(t){if(t<Ig)return 1;if(t<Cg)return 2;if(t<Ng)return 3;if(t<zo)return 4;if(t<Go)return 5;if(t<qo)return 6;if(t<Wo)return 7;if(Number.MAX_SAFE_INTEGER!=null&&t>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function Ml(t,e,r=0){switch(Rt(t)){case 8:e[r++]=t&255|ge,t/=128;case 7:e[r++]=t&255|ge,t/=128;case 6:e[r++]=t&255|ge,t/=128;case 5:e[r++]=t&255|ge,t/=128;case 4:e[r++]=t&255|ge,t>>>=7;case 3:e[r++]=t&255|ge,t>>>=7;case 2:e[r++]=t&255|ge,t>>>=7;case 1:{e[r++]=t&255,t>>>=7;break}default:throw new Error("unreachable")}return e}function _g(t,e,r=0){switch(Rt(t)){case 8:e.set(r++,t&255|ge),t/=128;case 7:e.set(r++,t&255|ge),t/=128;case 6:e.set(r++,t&255|ge),t/=128;case 5:e.set(r++,t&255|ge),t/=128;case 4:e.set(r++,t&255|ge),t>>>=7;case 3:e.set(r++,t&255|ge),t>>>=7;case 2:e.set(r++,t&255|ge),t>>>=7;case 1:{e.set(r++,t&255),t>>>=7;break}default:throw new Error("unreachable")}return e}function Hl(t,e){let r=t[e],n=0;if(n+=r&qe,r<ge||(r=t[e+1],n+=(r&qe)<<7,r<ge)||(r=t[e+2],n+=(r&qe)<<14,r<ge)||(r=t[e+3],n+=(r&qe)<<21,r<ge)||(r=t[e+4],n+=(r&qe)*zo,r<ge)||(r=t[e+5],n+=(r&qe)*Go,r<ge)||(r=t[e+6],n+=(r&qe)*qo,r<ge)||(r=t[e+7],n+=(r&qe)*Wo,r<ge))return n;throw new RangeError("Could not decode varint")}function Og(t,e){let r=t.get(e),n=0;if(n+=r&qe,r<ge||(r=t.get(e+1),n+=(r&qe)<<7,r<ge)||(r=t.get(e+2),n+=(r&qe)<<14,r<ge)||(r=t.get(e+3),n+=(r&qe)<<21,r<ge)||(r=t.get(e+4),n+=(r&qe)*zo,r<ge)||(r=t.get(e+5),n+=(r&qe)*Go,r<ge)||(r=t.get(e+6),n+=(r&qe)*qo,r<ge)||(r=t.get(e+7),n+=(r&qe)*Wo,r<ge))return n;throw new RangeError("Could not decode varint")}function is(t,e,r=0){return e==null&&(e=Jr(Rt(t))),e instanceof Uint8Array?Ml(t,e,r):_g(t,e,r)}function Jn(t,e=0){return t instanceof Uint8Array?Hl(t,e):Og(t,e)}function Br(t,e){e==null&&(e=t.reduce((i,s)=>i+s.length,0));const r=Jr(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}class Ug{constructor(){S(this,"index",0);S(this,"input","")}new(e){return this.index=0,this.input=e,this}readAtomically(e){const r=this.index,n=e();return n===void 0&&(this.index=r),n}parseWith(e){const r=e();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{const r=this.readChar();if(r===e)return r})}readSeparator(e,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(e)===void 0))return n()})}readNumber(e,r,n,i){return this.readAtomically(()=>{let s=0,o=0;const a=this.peekChar();if(a===void 0)return;const c=a==="0",f=2**(8*i)-1;for(;;){const u=this.readAtomically(()=>{const h=this.readChar();if(h===void 0)return;const p=Number.parseInt(h,e);if(!Number.isNaN(p))return p});if(u===void 0)break;if(s*=e,s+=u,s>f||(o+=1,r!==void 0&&o>r))return}if(o!==0)return!n&&c&&o>1?void 0:s})}readIPv4Addr(){return this.readAtomically(()=>{const e=new Uint8Array(4);for(let r=0;r<e.length;r++){const n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;e[r]=n}return e})}readIPv6Addr(){const e=r=>{for(let n=0;n<r.length/2;n++){const i=n*2;if(n<r.length-3){const o=this.readSeparator(":",n,()=>this.readIPv4Addr());if(o!==void 0)return r[i]=o[0],r[i+1]=o[1],r[i+2]=o[2],r[i+3]=o[3],[i+4,!0]}const s=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(s===void 0)return[i,!1];r[i]=s>>8,r[i+1]=s&255}return[r.length,!1]};return this.readAtomically(()=>{const r=new Uint8Array(16),[n,i]=e(r);if(n===16)return r;if(i||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const s=new Uint8Array(14),o=16-(n+2),[a]=e(s.subarray(0,o));return r.set(s.subarray(0,a),16-a),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const Vl=45,Pg=15,Xr=new Ug;function Dg(t){if(!(t.length>Pg))return Xr.new(t).parseWith(()=>Xr.readIPv4Addr())}function $g(t){if(t.includes("%")&&(t=t.split("%")[0]),!(t.length>Vl))return Xr.new(t).parseWith(()=>Xr.readIPv6Addr())}function Rg(t){if(t.includes("%")&&(t=t.split("%")[0]),!(t.length>Vl))return Xr.new(t).parseWith(()=>Xr.readIPAddr())}function Tt(t,e="utf8"){const r=Fl[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}function Lg(t){return!!Dg(t)}function Fg(t){return!!$g(t)}function jl(t){return!!Rg(t)}const sc=Lg,Mg=Fg,zl=function(t){let e=0;if(t=t.toString().trim(),sc(t)){const r=new Uint8Array(e+4);return t.split(/\./g).forEach(n=>{r[e++]=parseInt(n,10)&255}),r}if(Mg(t)){const r=t.split(":",8);let n;for(n=0;n<r.length;n++){const s=sc(r[n]);let o;s&&(o=zl(r[n]),r[n]=Le(o.slice(0,2),"base16")),o!=null&&++n<8&&r.splice(n,0,Le(o.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);const s=[n,1];for(n=9-r.length;n>0;n--)s.push("0");r.splice.apply(r,s)}const i=new Uint8Array(e+16);for(n=0;n<r.length;n++){const s=parseInt(r[n],16);i[e++]=s>>8&255,i[e++]=s&255}return i}throw new Error("invalid ip address")},Hg=function(t,e=0,r){e=~~e,r=r??t.length-e;const n=new DataView(t.buffer);if(r===4){const i=[];for(let s=0;s<r;s++)i.push(t[e+s]);return i.join(".")}if(r===16){const i=[];for(let s=0;s<r;s+=2)i.push(n.getUint16(e+s).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},at=-1,Ln={},co={},Vg=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,at,"ip6zone"],[43,8,"ipcidr"],[53,at,"dns",!0],[54,at,"dns4",!0],[55,at,"dns6",!0],[56,at,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,at,"unix",!1,!0],[421,at,"ipfs"],[421,at,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,at,"garlic64"],[448,0,"tls"],[449,at,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,at,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[481,at,"http-path"],[777,at,"memory"]];Vg.forEach(t=>{const e=jg(...t);co[e.code]=e,Ln[e.name]=e});function jg(t,e,r,n,i){return{code:t,size:e,name:r,resolvable:!!n,path:!!i}}function ue(t){if(typeof t=="number"){if(co[t]!=null)return co[t];throw new Error(`no protocol with code: ${t}`)}else if(typeof t=="string"){if(Ln[t]!=null)return Ln[t];throw new Error(`no protocol with name: ${t}`)}throw new Error(`invalid protocol id type: ${typeof t}`)}ue("ip4");ue("ip6");ue("ipcidr");function Gl(t,e){switch(ue(t).code){case 4:case 41:return Gg(e);case 42:return Ms(e);case 43:return Le(e,"base10");case 6:case 273:case 33:case 132:return ql(e).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Ms(e);case 421:return Yg(e);case 444:return cc(e);case 445:return cc(e);case 466:return Kg(e);case 481:return globalThis.encodeURIComponent(Ms(e));default:return Le(e,"base16")}}function oc(t,e){switch(ue(t).code){case 4:return ac(e);case 41:return ac(e);case 42:return Fs(e);case 43:return Tt(e,"base10");case 6:case 273:case 33:case 132:return Ko(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Fs(e);case 421:return qg(e);case 444:return Zg(e);case 445:return Jg(e);case 466:return Wg(e);case 481:return Fs(globalThis.decodeURIComponent(e));default:return Tt(e,"base16")}}const Ls=Object.values(Pi).map(t=>t.decoder),zg=function(){let t=Ls[0].or(Ls[1]);return Ls.slice(2).forEach(e=>t=t.or(e)),t}();function ac(t){if(!jl(t))throw new Error("invalid ip address");return zl(t)}function Gg(t){const e=Hg(t,0,t.length);if(e==null)throw new Error("ipBuff is required");if(!jl(e))throw new Error("invalid ip address");return e}function Ko(t){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function ql(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function Fs(t){const e=Tt(t),r=Uint8Array.from(is(e.length));return Br([r,e],r.length+e.length)}function Ms(t){const e=Jn(t);if(t=t.slice(Rt(e)),t.length!==e)throw new Error("inconsistent lengths");return Le(t)}function qg(t){let e;t[0]==="Q"||t[0]==="1"?e=Ho(Me.decode(`z${t}`)).bytes:e=Q.parse(t).multihash.bytes;const r=Uint8Array.from(is(e.length));return Br([r,e],r.length+e.length)}function Wg(t){const e=zg.decode(t),r=Uint8Array.from(is(e.length));return Br([r,e],r.length+e.length)}function Kg(t){const e=Jn(t),r=t.slice(Rt(e));if(r.length!==e)throw new Error("inconsistent lengths");return"u"+Le(r,"base64url")}function Yg(t){const e=Jn(t),r=t.slice(Rt(e));if(r.length!==e)throw new Error("inconsistent lengths");return Le(r,"base58btc")}function Zg(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const r=fr.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=Ko(n);return Br([r,i],r.length+i.length)}function Jg(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const r=fr.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=Ko(n);return Br([r,i],r.length+i.length)}function cc(t){const e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=Le(e,"base32"),i=ql(r);return`${n}:${i}`}function Xg(t){t=lo(t);const e=[],r=[];let n=null;const i=t.split("/").slice(1);if(i.length===1&&i[0]==="")return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let s=0;s<i.length;s++){const o=i[s],a=ue(o);if(a.size===0){e.push([a.code]),r.push([a.code]);continue}if(s++,s>=i.length)throw Yl("invalid address: "+t);if(a.path===!0){n=lo(i.slice(s).join("/")),e.push([a.code,oc(a.code,n)]),r.push([a.code,n]);break}const c=oc(a.code,i[s]);e.push([a.code,c]),r.push([a.code,Gl(a.code,c)])}return{string:Wl(r),bytes:Kl(e),tuples:e,stringTuples:r,path:n}}function lc(t){const e=[],r=[];let n=null,i=0;for(;i<t.length;){const s=Jn(t,i),o=Rt(s),a=ue(s),c=Qg(a,t.slice(i+o));if(c===0){e.push([s]),r.push([s]),i+=o;continue}const f=t.slice(i+o,i+o+c);if(i+=c+o,i>t.length)throw Yl("Invalid address Uint8Array: "+Le(t,"base16"));e.push([s,f]);const u=Gl(s,f);if(r.push([s,u]),a.path===!0){n=u;break}}return{bytes:Uint8Array.from(t),string:Wl(r),tuples:e,stringTuples:r,path:n}}function Wl(t){const e=[];return t.map(r=>{const n=ue(r[0]);return e.push(n.name),r.length>1&&r[1]!=null&&e.push(r[1]),null}),lo(e.join("/"))}function Kl(t){return Br(t.map(e=>{const r=ue(e[0]);let n=Uint8Array.from(is(r.code));return e.length>1&&e[1]!=null&&(n=Br([n,e[1]])),n}))}function Qg(t,e){if(t.size>0)return t.size/8;if(t.size===0)return 0;{const r=Jn(e instanceof Uint8Array?e:Uint8Array.from(e));return r+Rt(r)}}function lo(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function Yl(t){return new Error("Error parsing address: "+t)}const ey=Symbol.for("nodejs.util.inspect.custom"),Zl=Symbol.for("@multiformats/js-multiaddr/multiaddr"),ty=[ue("dns").code,ue("dns4").code,ue("dns6").code,ue("dnsaddr").code];class ry extends Error{constructor(e="No available resolver"){super(e),this.name="NoAvailableResolverError"}}var Bl,Kr,lr,Wn,Kn;const zr=class zr{constructor(e){S(this,"bytes");An(this,Kr);An(this,lr);An(this,Wn);An(this,Kn);S(this,Bl,!0);e==null&&(e="");let r;if(e instanceof Uint8Array)r=lc(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);r=Xg(e)}else if(Di(e))r=lc(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=r.bytes,Bn(this,Kr,r.string),Bn(this,lr,r.tuples),Bn(this,Wn,r.stringTuples),Bn(this,Kn,r.path)}toString(){return Vt(this,Kr)}toJSON(){return this.toString()}toOptions(){let e,r,n,i,s="";const o=ue("tcp"),a=ue("udp"),c=ue("ip4"),f=ue("ip6"),u=ue("dns6"),h=ue("ip6zone");for(const[m,y]of this.stringTuples())m===h.code&&(s=`%${y??""}`),ty.includes(m)&&(r=o.name,i=443,n=`${y??""}${s}`,e=m===u.code?6:4),(m===o.code||m===a.code)&&(r=ue(m).name,i=parseInt(y??"")),(m===c.code||m===f.code)&&(r=ue(m).name,n=`${y??""}${s}`,e=m===f.code?6:4);if(e==null||r==null||n==null||i==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:n,transport:r,port:i}}protos(){return Vt(this,lr).map(([e])=>Object.assign({},ue(e)))}protoCodes(){return Vt(this,lr).map(([e])=>e)}protoNames(){return Vt(this,lr).map(([e])=>ue(e).name)}tuples(){return Vt(this,lr).map(([e,r])=>r==null?[e]:[e,r])}stringTuples(){return Vt(this,Wn).map(([e,r])=>r==null?[e]:[e,r])}encapsulate(e){return e=new zr(e),new zr(this.toString()+e.toString())}decapsulate(e){const r=e.toString(),n=this.toString(),i=n.lastIndexOf(r);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new zr(n.slice(0,i))}decapsulateCode(e){const r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===e)return new zr(Kl(r.slice(0,n)));return this}getPeerId(){try{let e=[];this.stringTuples().forEach(([n,i])=>{n===Ln.p2p.code&&e.push([n,i]),n===Ln["p2p-circuit"].code&&(e=[])});const r=e.pop();if((r==null?void 0:r[1])!=null){const n=r[1];return n[0]==="Q"||n[0]==="1"?Le(Me.decode(`z${n}`),"base58btc"):Le(Q.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){return Vt(this,Kn)}equals(e){return Zr(this.bytes,e.bytes)}async resolve(e){const r=this.protos().find(s=>s.resolvable);if(r==null)return[this];const n=ny.get(r.name);if(n==null)throw new ry(`no available resolver for ${r.name}`);return(await n(this,e)).map(s=>st(s))}nodeAddress(){const e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const r=(e??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[(Bl=Zl,ey)](){return`Multiaddr(${Vt(this,Kr)})`}};Kr=new WeakMap,lr=new WeakMap,Wn=new WeakMap,Kn=new WeakMap;let uo=zr;const ny=new Map;function Di(t){return!!(t!=null&&t[Zl])}function st(t){return new uo(t)}const iy=["string","number","bigint","symbol"],sy=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function oy(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";const e=typeof t;if(iy.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(ay(t))return"Buffer";const r=cy(t);return r||"Object"}function ay(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function cy(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(sy.includes(e))return e}class v{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}v.uint=new v(0,"uint",!0);v.negint=new v(1,"negint",!0);v.bytes=new v(2,"bytes",!0);v.string=new v(3,"string",!0);v.array=new v(4,"array",!1);v.map=new v(5,"map",!1);v.tag=new v(6,"tag",!1);v.float=new v(7,"float",!0);v.false=new v(7,"false",!0);v.true=new v(7,"true",!0);v.null=new v(7,"null",!0);v.undefined=new v(7,"undefined",!0);v.break=new v(7,"break",!0);class F{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const un=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",ly=new TextDecoder,uy=new TextEncoder;function $i(t){return un&&globalThis.Buffer.isBuffer(t)}function Yo(t){return t instanceof Uint8Array?$i(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const fy=un?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):fc(t,e,r):(t,e,r)=>r-e>64?ly.decode(t.subarray(e,r)):fc(t,e,r),Jl=un?t=>t.length>64?globalThis.Buffer.from(t):uc(t):t=>t.length>64?uy.encode(t):uc(t),jt=t=>Uint8Array.from(t),Zo=un?(t,e,r)=>$i(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),dy=un?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),Yo(globalThis.Buffer.concat(t,e))):(t,e)=>{const r=new Uint8Array(e);let n=0;for(let i of t)n+i.length>r.length&&(i=i.subarray(0,r.length-n)),r.set(i,n),n+=i.length;return r},hy=un?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function py(t,e){if($i(t)&&$i(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function uc(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e}function fc(t,e,r){const n=[];for(;e<r;){const i=t[e];let s=null,o=i>239?4:i>223?3:i>191?2:1;if(e+o<=r){let a,c,f,u;switch(o){case 1:i<128&&(s=i);break;case 2:a=t[e+1],(a&192)===128&&(u=(i&31)<<6|a&63,u>127&&(s=u));break;case 3:a=t[e+1],c=t[e+2],(a&192)===128&&(c&192)===128&&(u=(i&15)<<12|(a&63)<<6|c&63,u>2047&&(u<55296||u>57343)&&(s=u));break;case 4:a=t[e+1],c=t[e+2],f=t[e+3],(a&192)===128&&(c&192)===128&&(f&192)===128&&(u=(i&15)<<18|(a&63)<<12|(c&63)<<6|f&63,u>65535&&u<1114112&&(s=u))}}s===null?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),e+=o}return Xl(n)}const dc=4096;function Xl(t){const e=t.length;if(e<=dc)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=dc));return r}const gy=256;class Ql{constructor(e=gy){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const i=r.length-(this.maxCursor-this.cursor)-1;r.set(e,i)}else{if(r){const i=r.length-(this.maxCursor-this.cursor)-1;i<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=hy(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){const n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=Zo(n,0,this.cursor)}else r=dy(this.chunks,this.cursor);return e&&this.reset(),r}}const Z="CBOR decode error:",xr="CBOR encode error:";function fn(t,e,r){if(t.length-e<r)throw new Error(`${Z} not enough data for type`)}const He=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Or(t,e,r){fn(t,e,1);const n=t[e];if(r.strict===!0&&n<He[0])throw new Error(`${Z} integer encoded in more bytes than necessary (strict decode)`);return n}function Ur(t,e,r){fn(t,e,2);const n=t[e]<<8|t[e+1];if(r.strict===!0&&n<He[1])throw new Error(`${Z} integer encoded in more bytes than necessary (strict decode)`);return n}function Pr(t,e,r){fn(t,e,4);const n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<He[2])throw new Error(`${Z} integer encoded in more bytes than necessary (strict decode)`);return n}function Dr(t,e,r){fn(t,e,8);const n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],i=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],s=(BigInt(n)<<BigInt(32))+BigInt(i);if(r.strict===!0&&s<He[3])throw new Error(`${Z} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(r.allowBigInt===!0)return s;throw new Error(`${Z} integers outside of the safe integer range are not supported`)}function yy(t,e,r,n){return new F(v.uint,Or(t,e+1,n),2)}function my(t,e,r,n){return new F(v.uint,Ur(t,e+1,n),3)}function wy(t,e,r,n){return new F(v.uint,Pr(t,e+1,n),5)}function by(t,e,r,n){return new F(v.uint,Dr(t,e+1,n),9)}function $r(t,e){return bt(t,0,e.value)}function bt(t,e,r){if(r<He[0]){const n=Number(r);t.push([e|n])}else if(r<He[1]){const n=Number(r);t.push([e|24,n])}else if(r<He[2]){const n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<He[3]){const n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{const n=BigInt(r);if(n<He[4]){const i=[e|27,0,0,0,0,0,0,0];let s=Number(n&BigInt(4294967295)),o=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=s&255,s=s>>8,i[7]=s&255,s=s>>8,i[6]=s&255,s=s>>8,i[5]=s&255,i[4]=o&255,o=o>>8,i[3]=o&255,o=o>>8,i[2]=o&255,o=o>>8,i[1]=o&255,t.push(i)}else throw new Error(`${Z} encountered BigInt larger than allowable range`)}}$r.encodedSize=function(e){return bt.encodedSize(e.value)};bt.encodedSize=function(e){return e<He[0]?1:e<He[1]?2:e<He[2]?3:e<He[3]?5:9};$r.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};function vy(t,e,r,n){return new F(v.negint,-1-Or(t,e+1,n),2)}function xy(t,e,r,n){return new F(v.negint,-1-Ur(t,e+1,n),3)}function Ey(t,e,r,n){return new F(v.negint,-1-Pr(t,e+1,n),5)}const Jo=BigInt(-1),eu=BigInt(1);function Sy(t,e,r,n){const i=Dr(t,e+1,n);if(typeof i!="bigint"){const s=-1-i;if(s>=Number.MIN_SAFE_INTEGER)return new F(v.negint,s,9)}if(n.allowBigInt!==!0)throw new Error(`${Z} integers outside of the safe integer range are not supported`);return new F(v.negint,Jo-BigInt(i),9)}function Xo(t,e){const r=e.value,n=typeof r=="bigint"?r*Jo-eu:r*-1-1;bt(t,e.type.majorEncoded,n)}Xo.encodedSize=function(e){const r=e.value,n=typeof r=="bigint"?r*Jo-eu:r*-1-1;return n<He[0]?1:n<He[1]?2:n<He[2]?3:n<He[3]?5:9};Xo.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};function Xn(t,e,r,n){fn(t,e,r+n);const i=Zo(t,e+r,e+r+n);return new F(v.bytes,i,r+n)}function Ay(t,e,r,n){return Xn(t,e,1,r)}function By(t,e,r,n){return Xn(t,e,2,Or(t,e+1,n))}function ky(t,e,r,n){return Xn(t,e,3,Ur(t,e+1,n))}function Ty(t,e,r,n){return Xn(t,e,5,Pr(t,e+1,n))}function Iy(t,e,r,n){const i=Dr(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Z} 64-bit integer bytes lengths not supported`);return Xn(t,e,9,i)}function Ri(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===v.string?Jl(t.value):t.value),t.encodedBytes}function ss(t,e){const r=Ri(e);bt(t,e.type.majorEncoded,r.length),t.push(r)}ss.encodedSize=function(e){const r=Ri(e);return bt.encodedSize(r.length)+r.length};ss.compareTokens=function(e,r){return Cy(Ri(e),Ri(r))};function Cy(t,e){return t.length<e.length?-1:t.length>e.length?1:py(t,e)}function Qn(t,e,r,n,i){const s=r+n;fn(t,e,s);const o=new F(v.string,fy(t,e+r,e+s),s);return i.retainStringBytes===!0&&(o.byteValue=Zo(t,e+r,e+s)),o}function Ny(t,e,r,n){return Qn(t,e,1,r,n)}function _y(t,e,r,n){return Qn(t,e,2,Or(t,e+1,n),n)}function Oy(t,e,r,n){return Qn(t,e,3,Ur(t,e+1,n),n)}function Uy(t,e,r,n){return Qn(t,e,5,Pr(t,e+1,n),n)}function Py(t,e,r,n){const i=Dr(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Z} 64-bit integer string lengths not supported`);return Qn(t,e,9,i,n)}const Dy=ss;function dn(t,e,r,n){return new F(v.array,n,r)}function $y(t,e,r,n){return dn(t,e,1,r)}function Ry(t,e,r,n){return dn(t,e,2,Or(t,e+1,n))}function Ly(t,e,r,n){return dn(t,e,3,Ur(t,e+1,n))}function Fy(t,e,r,n){return dn(t,e,5,Pr(t,e+1,n))}function My(t,e,r,n){const i=Dr(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Z} 64-bit integer array lengths not supported`);return dn(t,e,9,i)}function Hy(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Z} indefinite length items not allowed`);return dn(t,e,1,1/0)}function Qo(t,e){bt(t,v.array.majorEncoded,e.value)}Qo.compareTokens=$r.compareTokens;Qo.encodedSize=function(e){return bt.encodedSize(e.value)};function hn(t,e,r,n){return new F(v.map,n,r)}function Vy(t,e,r,n){return hn(t,e,1,r)}function jy(t,e,r,n){return hn(t,e,2,Or(t,e+1,n))}function zy(t,e,r,n){return hn(t,e,3,Ur(t,e+1,n))}function Gy(t,e,r,n){return hn(t,e,5,Pr(t,e+1,n))}function qy(t,e,r,n){const i=Dr(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Z} 64-bit integer map lengths not supported`);return hn(t,e,9,i)}function Wy(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Z} indefinite length items not allowed`);return hn(t,e,1,1/0)}function ea(t,e){bt(t,v.map.majorEncoded,e.value)}ea.compareTokens=$r.compareTokens;ea.encodedSize=function(e){return bt.encodedSize(e.value)};function Ky(t,e,r,n){return new F(v.tag,r,1)}function Yy(t,e,r,n){return new F(v.tag,Or(t,e+1,n),2)}function Zy(t,e,r,n){return new F(v.tag,Ur(t,e+1,n),3)}function Jy(t,e,r,n){return new F(v.tag,Pr(t,e+1,n),5)}function Xy(t,e,r,n){return new F(v.tag,Dr(t,e+1,n),9)}function ta(t,e){bt(t,v.tag.majorEncoded,e.value)}ta.compareTokens=$r.compareTokens;ta.encodedSize=function(e){return bt.encodedSize(e.value)};const Qy=20,e0=21,t0=22,r0=23;function n0(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${Z} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new F(v.null,null,1):new F(v.undefined,void 0,1)}function i0(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Z} indefinite length items not allowed`);return new F(v.break,void 0,1)}function ra(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${Z} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${Z} Infinity values are not supported`)}return new F(v.float,t,e)}function s0(t,e,r,n){return ra(ia(t,e+1),3,n)}function o0(t,e,r,n){return ra(sa(t,e+1),5,n)}function a0(t,e,r,n){return ra(iu(t,e+1),9,n)}function na(t,e,r){const n=e.value;if(n===!1)t.push([v.float.majorEncoded|Qy]);else if(n===!0)t.push([v.float.majorEncoded|e0]);else if(n===null)t.push([v.float.majorEncoded|t0]);else if(n===void 0)t.push([v.float.majorEncoded|r0]);else{let i,s=!1;(!r||r.float64!==!0)&&(ru(n),i=ia(Bt,1),n===i||Number.isNaN(n)?(Bt[0]=249,t.push(Bt.slice(0,3)),s=!0):(nu(n),i=sa(Bt,1),n===i&&(Bt[0]=250,t.push(Bt.slice(0,5)),s=!0))),s||(c0(n),i=iu(Bt,1),Bt[0]=251,t.push(Bt.slice(0,9)))}}na.encodedSize=function(e,r){const n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){ru(n);let i=ia(Bt,1);if(n===i||Number.isNaN(n))return 3;if(nu(n),i=sa(Bt,1),n===i)return 5}return 9};const tu=new ArrayBuffer(9),yt=new DataView(tu,1),Bt=new Uint8Array(tu,0);function ru(t){if(t===1/0)yt.setUint16(0,31744,!1);else if(t===-1/0)yt.setUint16(0,64512,!1);else if(Number.isNaN(t))yt.setUint16(0,32256,!1);else{yt.setFloat32(0,t);const e=yt.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)yt.setUint16(0,31744,!1);else if(r===0)yt.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{const i=r-127;i<-24?yt.setUint16(0,0):i<-14?yt.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):yt.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function ia(t,e){if(t.length-e<2)throw new Error(`${Z} not enough data for float16`);const r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;const n=r>>10&31,i=r&1023;let s;return n===0?s=i*2**-24:n!==31?s=(i+1024)*2**(n-25):s=i===0?1/0:NaN,r&32768?-s:s}function nu(t){yt.setFloat32(0,t,!1)}function sa(t,e){if(t.length-e<4)throw new Error(`${Z} not enough data for float32`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function c0(t){yt.setFloat64(0,t,!1)}function iu(t,e){if(t.length-e<8)throw new Error(`${Z} not enough data for float64`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}na.compareTokens=$r.compareTokens;function de(t,e,r){throw new Error(`${Z} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function os(t){return()=>{throw new Error(`${Z} ${t}`)}}const V=[];for(let t=0;t<=23;t++)V[t]=de;V[24]=yy;V[25]=my;V[26]=wy;V[27]=by;V[28]=de;V[29]=de;V[30]=de;V[31]=de;for(let t=32;t<=55;t++)V[t]=de;V[56]=vy;V[57]=xy;V[58]=Ey;V[59]=Sy;V[60]=de;V[61]=de;V[62]=de;V[63]=de;for(let t=64;t<=87;t++)V[t]=Ay;V[88]=By;V[89]=ky;V[90]=Ty;V[91]=Iy;V[92]=de;V[93]=de;V[94]=de;V[95]=os("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)V[t]=Ny;V[120]=_y;V[121]=Oy;V[122]=Uy;V[123]=Py;V[124]=de;V[125]=de;V[126]=de;V[127]=os("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)V[t]=$y;V[152]=Ry;V[153]=Ly;V[154]=Fy;V[155]=My;V[156]=de;V[157]=de;V[158]=de;V[159]=Hy;for(let t=160;t<=183;t++)V[t]=Vy;V[184]=jy;V[185]=zy;V[186]=Gy;V[187]=qy;V[188]=de;V[189]=de;V[190]=de;V[191]=Wy;for(let t=192;t<=215;t++)V[t]=Ky;V[216]=Yy;V[217]=Zy;V[218]=Jy;V[219]=Xy;V[220]=de;V[221]=de;V[222]=de;V[223]=de;for(let t=224;t<=243;t++)V[t]=os("simple values are not supported");V[244]=de;V[245]=de;V[246]=de;V[247]=n0;V[248]=os("simple values are not supported");V[249]=s0;V[250]=o0;V[251]=a0;V[252]=de;V[253]=de;V[254]=de;V[255]=i0;const Lt=[];for(let t=0;t<24;t++)Lt[t]=new F(v.uint,t,1);for(let t=-1;t>=-24;t--)Lt[31-t]=new F(v.negint,t,1);Lt[64]=new F(v.bytes,new Uint8Array(0),1);Lt[96]=new F(v.string,"",1);Lt[128]=new F(v.array,0,1);Lt[160]=new F(v.map,0,1);Lt[244]=new F(v.false,!1,1);Lt[245]=new F(v.true,!0,1);Lt[246]=new F(v.null,null,1);function l0(t){switch(t.type){case v.false:return jt([244]);case v.true:return jt([245]);case v.null:return jt([246]);case v.bytes:return t.value.length?void 0:jt([64]);case v.string:return t.value===""?jt([96]):void 0;case v.array:return t.value===0?jt([128]):void 0;case v.map:return t.value===0?jt([160]):void 0;case v.uint:return t.value<24?jt([Number(t.value)]):void 0;case v.negint:if(t.value>=-24)return jt([31-Number(t.value)])}}const u0={float64:!1,mapSorter:h0,quickEncodeToken:l0};function f0(){const t=[];return t[v.uint.major]=$r,t[v.negint.major]=Xo,t[v.bytes.major]=ss,t[v.string.major]=Dy,t[v.array.major]=Qo,t[v.map.major]=ea,t[v.tag.major]=ta,t[v.float.major]=na,t}const su=f0(),Hs=new Ql;class Li{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${xr} object contains circular references`);return new Li(r,e)}}const rr={null:new F(v.null,null),undefined:new F(v.undefined,void 0),true:new F(v.true,!0),false:new F(v.false,!1),emptyArray:new F(v.array,0),emptyMap:new F(v.map,0)},hr={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new F(v.float,t):t>=0?new F(v.uint,t):new F(v.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new F(v.uint,t):new F(v.negint,t)},Uint8Array(t,e,r,n){return new F(v.bytes,t)},string(t,e,r,n){return new F(v.string,t)},boolean(t,e,r,n){return t?rr.true:rr.false},null(t,e,r,n){return rr.null},undefined(t,e,r,n){return rr.undefined},ArrayBuffer(t,e,r,n){return new F(v.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new F(v.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[rr.emptyArray,new F(v.break)]:rr.emptyArray;n=Li.createCheck(n,t);const i=[];let s=0;for(const o of t)i[s++]=Ci(o,r,n);return r.addBreakTokens?[new F(v.array,t.length),i,new F(v.break)]:[new F(v.array,t.length),i]},Object(t,e,r,n){const i=e!=="Object",s=i?t.keys():Object.keys(t),o=i?t.size:s.length;if(!o)return r.addBreakTokens===!0?[rr.emptyMap,new F(v.break)]:rr.emptyMap;n=Li.createCheck(n,t);const a=[];let c=0;for(const f of s)a[c++]=[Ci(f,r,n),Ci(i?t.get(f):t[f],r,n)];return d0(a,r),r.addBreakTokens?[new F(v.map,o),a,new F(v.break)]:[new F(v.map,o),a]}};hr.Map=hr.Object;hr.Buffer=hr.Uint8Array;for(const t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))hr[`${t}Array`]=hr.DataView;function Ci(t,e={},r){const n=oy(t),i=e&&e.typeEncoders&&e.typeEncoders[n]||hr[n];if(typeof i=="function"){const o=i(t,n,e,r);if(o!=null)return o}const s=hr[n];if(!s)throw new Error(`${xr} unsupported type: ${n}`);return s(t,n,e,r)}function d0(t,e){e.mapSorter&&t.sort(e.mapSorter)}function h0(t,e){const r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);const i=r.type.major,s=su[i].compareTokens(r,n);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function ou(t,e,r,n){if(Array.isArray(e))for(const i of e)ou(t,i,r,n);else r[e.type.major](t,e,n)}function au(t,e,r){const n=Ci(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){const i=r.quickEncodeToken(n);if(i)return i;const s=e[n.type.major];if(s.encodedSize){const o=s.encodedSize(n,r),a=new Ql(o);if(s(a,n,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return Yo(a.chunks[0])}}return Hs.reset(),ou(Hs,n,e,r),Hs.toBytes(!0)}function p0(t,e){return e=Object.assign({},u0,e),au(t,su,e)}const g0={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class y0{constructor(e,r={}){this._pos=0,this.data=e,this.options=r}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const e=this.data[this._pos];let r=Lt[e];if(r===void 0){const n=V[e];if(!n)throw new Error(`${Z} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const i=e&31;r=n(this.data,this._pos,i,this.options)}return this._pos+=r.encodedLength,r}}const Fn=Symbol.for("DONE"),as=Symbol.for("BREAK");function m0(t,e,r){const n=[];for(let i=0;i<t.value;i++){const s=Mn(e,r);if(s===as){if(t.value===1/0)break;throw new Error(`${Z} got unexpected break to lengthed array`)}if(s===Fn)throw new Error(`${Z} found array but not enough entries (got ${i}, expected ${t.value})`);n[i]=s}return n}function w0(t,e,r){const n=r.useMaps===!0,i=n?void 0:{},s=n?new Map:void 0;for(let o=0;o<t.value;o++){const a=Mn(e,r);if(a===as){if(t.value===1/0)break;throw new Error(`${Z} got unexpected break to lengthed map`)}if(a===Fn)throw new Error(`${Z} found map but not enough entries (got ${o} [no key], expected ${t.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${Z} non-string keys not supported (got ${typeof a})`);if(r.rejectDuplicateMapKeys===!0&&(n&&s.has(a)||!n&&a in i))throw new Error(`${Z} found repeat map key "${a}"`);const c=Mn(e,r);if(c===Fn)throw new Error(`${Z} found map but not enough entries (got ${o} [no value], expected ${t.value})`);n?s.set(a,c):i[a]=c}return n?s:i}function Mn(t,e){if(t.done())return Fn;const r=t.next();if(r.type===v.break)return as;if(r.type.terminal)return r.value;if(r.type===v.array)return m0(r,t,e);if(r.type===v.map)return w0(r,t,e);if(r.type===v.tag){if(e.tags&&typeof e.tags[r.value]=="function"){const n=Mn(t,e);return e.tags[r.value](n)}throw new Error(`${Z} tag not supported (${r.value})`)}throw new Error("unsupported")}function b0(t,e){if(!(t instanceof Uint8Array))throw new Error(`${Z} data to decode must be a Uint8Array`);e=Object.assign({},g0,e);const r=e.tokenizer||new y0(t,e),n=Mn(r,e);if(n===Fn)throw new Error(`${Z} did not find any content to decode`);if(n===as)throw new Error(`${Z} got unexpected break`);return[n,t.subarray(r.pos())]}function cu(t,e){const[r,n]=b0(t,e);if(n.length>0)throw new Error(`${Z} too many terminals, data makes no sense`);return r}const lu=42;function uu(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}function v0(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;const e=Q.asCID(t);if(!e)return null;const r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new F(v.tag,lu),new F(v.bytes,r)]}function x0(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function E0(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const fo={float64:!0,typeEncoders:{Object:v0,undefined:x0,number:E0}},S0={...fo,typeEncoders:{...fo.typeEncoders}};function A0(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Q.decode(t.subarray(1))}const Fi={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Fi.tags[lu]=A0;const B0={...Fi,tags:Fi.tags.slice()},k0="dag-cbor",T0=113,fu=t=>p0(t,fo),du=t=>cu(uu(t),Fi),I0=Object.freeze(Object.defineProperty({__proto__:null,code:T0,decode:du,decodeOptions:B0,encode:fu,encodeOptions:S0,name:k0,toByteView:uu},Symbol.toStringTag,{value:"Module"}));class C0 extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){const r=this.inRecursive[this.inRecursive.length-1];r&&(r.type===v.array&&(r.elements++,r.elements!==1&&e.push([44])),r.type===v.map&&(r.elements++,r.elements!==1&&(r.elements%2===1?e.push([44]):e.push([58]))))}[v.uint.major](e,r){this.prefix(e);const n=String(r.value),i=[];for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);e.push(i)}[v.negint.major](e,r){this[v.uint.major](e,r)}[v.bytes.major](e,r){throw new Error(`${xr} unsupported type: Uint8Array`)}[v.string.major](e,r){this.prefix(e);const n=Jl(JSON.stringify(r.value));e.push(n.length>32?Yo(n):n)}[v.array.major](e,r){this.prefix(e),this.inRecursive.push({type:v.array,elements:0}),e.push([91])}[v.map.major](e,r){this.prefix(e),this.inRecursive.push({type:v.map,elements:0}),e.push([123])}[v.tag.major](e,r){}[v.float.major](e,r){if(r.type.name==="break"){const o=this.inRecursive.pop();if(o){if(o.type===v.array)e.push([93]);else if(o.type===v.map)e.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(r.value===void 0)throw new Error(`${xr} unsupported type: undefined`);if(this.prefix(e),r.type.name==="true"){e.push([116,114,117,101]);return}else if(r.type.name==="false"){e.push([102,97,108,115,101]);return}else if(r.type.name==="null"){e.push([110,117,108,108]);return}const n=String(r.value),i=[];let s=!1;for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o),!s&&(i[o]===46||i[o]===101||i[o]===69)&&(s=!0);s||(i.push(46),i.push(48)),e.push(i)}}function N0(t,e){if(Array.isArray(t[0])||Array.isArray(e[0]))throw new Error(`${xr} complex map keys are not supported`);const r=t[0],n=e[0];if(r.type!==v.string||n.type!==v.string)throw new Error(`${xr} non-string map keys are not supported`);if(r<n)return-1;if(r>n)return 1;throw new Error(`${xr} unexpected duplicate map keys, this is not supported`)}const _0={addBreakTokens:!0,mapSorter:N0};function O0(t,e){return e=Object.assign({},_0,e),au(t,new C0,e)}class hu{constructor(e,r={}){this._pos=0,this.data=e,this.options=r,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;e===32||e===9||e===13||e===10;)e=this.data[++this._pos]}expect(e){if(this.data.length-this._pos<e.length)throw new Error(`${Z} unexpected end of input at position ${this._pos}`);for(let r=0;r<e.length;r++)if(this.data[this._pos++]!==e[r])throw new Error(`${Z} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){const e=this._pos;let r=!1,n=!1;const i=a=>{for(;!this.done();){const c=this.ch();if(a.includes(c))this._pos++;else break}};if(this.ch()===45&&(r=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,n=!0;else return new F(v.uint,0,this._pos-e);if(i([48,49,50,51,52,53,54,55,56,57]),r&&this._pos===e+1)throw new Error(`${Z} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${Z} unexpected token at position ${this._pos}`);n=!0,this._pos++,i([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,i([48,49,50,51,52,53,54,55,56,57]));const s=String.fromCharCode.apply(null,this.data.subarray(e,this._pos)),o=parseFloat(s);return n?new F(v.float,o,this._pos-e):this.options.allowBigInt!==!0||Number.isSafeInteger(o)?new F(o>=0?v.uint:v.negint,o,this._pos-e):new F(o>=0?v.uint:v.negint,BigInt(s),this._pos-e)}parseString(){if(this.ch()!==34)throw new Error(`${Z} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let s=this._pos,o=0;s<this.data.length&&o<65536;s++,o++){const a=this.data[s];if(a===92||a<32||a>=128)break;if(a===34){const c=String.fromCharCode.apply(null,this.data.subarray(this._pos,s));return this._pos=s+1,new F(v.string,c,o)}}const e=this._pos,r=[],n=()=>{if(this._pos+4>=this.data.length)throw new Error(`${Z} unexpected end of unicode escape sequence at position ${this._pos}`);let s=0;for(let o=0;o<4;o++){let a=this.ch();if(a>=48&&a<=57)a-=48;else if(a>=97&&a<=102)a=a-97+10;else if(a>=65&&a<=70)a=a-65+10;else throw new Error(`${Z} unexpected unicode escape character at position ${this._pos}`);s=s*16+a,this._pos++}return s},i=()=>{const s=this.ch();let o=null,a=s>239?4:s>223?3:s>191?2:1;if(this._pos+a>this.data.length)throw new Error(`${Z} unexpected unicode sequence at position ${this._pos}`);let c,f,u,h;switch(a){case 1:s<128&&(o=s);break;case 2:c=this.data[this._pos+1],(c&192)===128&&(h=(s&31)<<6|c&63,h>127&&(o=h));break;case 3:c=this.data[this._pos+1],f=this.data[this._pos+2],(c&192)===128&&(f&192)===128&&(h=(s&15)<<12|(c&63)<<6|f&63,h>2047&&(h<55296||h>57343)&&(o=h));break;case 4:c=this.data[this._pos+1],f=this.data[this._pos+2],u=this.data[this._pos+3],(c&192)===128&&(f&192)===128&&(u&192)===128&&(h=(s&15)<<18|(c&63)<<12|(f&63)<<6|u&63,h>65535&&h<1114112&&(o=h))}o===null?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|o&1023),r.push(o),this._pos+=a};for(;!this.done();){const s=this.ch();let o;switch(s){case 92:if(this._pos++,this.done())throw new Error(`${Z} unexpected string termination at position ${this._pos}`);switch(o=this.ch(),this._pos++,o){case 34:case 39:case 92:case 47:r.push(o);break;case 98:r.push(8);break;case 116:r.push(9);break;case 110:r.push(10);break;case 102:r.push(12);break;case 114:r.push(13);break;case 117:r.push(n());break;default:throw new Error(`${Z} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new F(v.string,Xl(r),this._pos-e);default:if(s<32)throw new Error(`${Z} invalid control character at position ${this._pos}`);s<128?(r.push(s),this._pos++):i()}}throw new Error(`${Z} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new F(v.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new F(v.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new F(v.null,null,4);case 102:return this.expect([102,97,108,115,101]),new F(v.false,!1,5);case 116:return this.expect([116,114,117,101]),new F(v.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${Z} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new F(v.break,void 0,1);if(this.ch()!==44)throw new Error(`${Z} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new F(v.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new F(v.break,void 0,1);if(this.ch()!==44)throw new Error(`${Z} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new F(v.break,void 0,1);const e=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${Z} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${Z} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}}function U0(t,e){return e=Object.assign({tokenizer:new hu(t,e)},e),cu(t,e)}function P0(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}function D0(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;const e=Q.asCID(t);if(!e)return null;const r=e.toString();return[new F(v.map,1/0,1),new F(v.string,"/",1),new F(v.string,r,r.length),new F(v.break,void 0,1)]}function Mi(t){const e=rs.encode(t).slice(1);return[new F(v.map,1/0,1),new F(v.string,"/",1),new F(v.map,1/0,1),new F(v.string,"bytes",5),new F(v.string,e,e.length),new F(v.break,void 0,1),new F(v.break,void 0,1)]}function Et(t){return Mi(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function $0(t){return Mi(new Uint8Array(t))}function R0(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function L0(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const F0={typeEncoders:{Object:D0,Buffer:Mi,Uint8Array:Mi,Int8Array:Et,Uint16Array:Et,Int16Array:Et,Uint32Array:Et,Int32Array:Et,Float32Array:Et,Float64Array:Et,Uint8ClampedArray:Et,BigInt64Array:Et,BigUint64Array:Et,DataView:Et,ArrayBuffer:$0,undefined:R0,number:L0}};class M0 extends hu{constructor(e,r){super(e,r),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const e=this._next();if(e.type===v.map){const r=this._next();if(r.type===v.string&&r.value==="/"){const n=this._next();if(n.type===v.string){if(this._next().type!==v.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new F(v.tag,42,0)}if(n.type===v.map){const i=this._next();if(i.type===v.string&&i.value==="bytes"){const s=this._next();if(s.type===v.string){for(let a=0;a<2;a++)if(this._next().type!==v.break)throw new Error("Invalid encoded Bytes form");const o=rs.decode(`m${s.value}`);return new F(v.bytes,o,s.value.length)}this.tokenBuffer.push(s)}this.tokenBuffer.push(i)}this.tokenBuffer.push(n)}this.tokenBuffer.push(r)}return e}}const ho={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};ho.tags[42]=Q.parse;const H0="dag-json",V0=297,pu=t=>O0(t,F0),gu=t=>{const e=P0(t),r=Object.assign(ho,{tokenizer:new M0(e,ho)});return U0(e,r)},hc=t=>j0.decode(pu(t)),j0=new TextDecoder,z0=t=>gu(G0.encode(t)),G0=new TextEncoder,q0=Object.freeze(Object.defineProperty({__proto__:null,code:V0,decode:gu,encode:pu,format:hc,name:H0,parse:z0,stringify:hc},Symbol.toStringTag,{value:"Module"})),W0=new TextDecoder;function oa(t,e){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");const i=t[e++];if(r+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[r,e]}function Hi(t,e){let r;[r,e]=oa(t,e);const n=e+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,n),n]}function yu(t,e){let r;return[r,e]=oa(t,e),[r&7,r>>3,e]}function K0(t){const e={},r=t.length;let n=0;for(;n<r;){let i,s;if([i,s,n]=yu(t,n),s===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=Hi(t,n)}else if(s===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let o;[o,n]=Hi(t,n),e.Name=W0.decode(o)}else if(s===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=oa(t,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${s}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function Y0(t){const e=t.length;let r=0,n,i=!1,s;for(;r<e;){let a,c;if([a,c,r]=yu(t,r),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(c===1){if(s)throw new Error("protobuf: (PBNode) duplicate Data section");[s,r]=Hi(t,r),n&&(i=!0)}else if(c===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let f;[f,r]=Hi(t,r),n.push(K0(f))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(r>e)throw new Error("protobuf: (PBNode) unexpected end of data");const o={};return s&&(o.Data=s),o.Links=n||[],o}const mu=new TextEncoder,pc=2**32,Z0=2**31;function J0(t,e){let r=e.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");r=Un(e,r,t.Tsize)-1,e[r]=24}if(typeof t.Name=="string"){const n=mu.encode(t.Name);r-=n.length,e.set(n,r),r=Un(e,r,n.length)-1,e[r]=18}return t.Hash&&(r-=t.Hash.length,e.set(t.Hash,r),r=Un(e,r,t.Hash.length)-1,e[r]=10),e.length-r}function X0(t){const e=em(t),r=new Uint8Array(e);let n=e;if(t.Data&&(n-=t.Data.length,r.set(t.Data,n),n=Un(r,n,t.Data.length)-1,r[n]=10),t.Links)for(let i=t.Links.length-1;i>=0;i--){const s=J0(t.Links[i],r.subarray(0,n));n-=s,n=Un(r,n,s)-1,r[n]=18}return r}function Q0(t){let e=0;if(t.Hash){const r=t.Hash.length;e+=1+r+qr(r)}if(typeof t.Name=="string"){const r=mu.encode(t.Name).length;e+=1+r+qr(r)}return typeof t.Tsize=="number"&&(e+=1+qr(t.Tsize)),e}function em(t){let e=0;if(t.Data){const r=t.Data.length;e+=1+r+qr(r)}if(t.Links)for(const r of t.Links){const n=Q0(r);e+=1+n+qr(n)}return e}function Un(t,e,r){e-=qr(r);const n=e;for(;r>=Z0;)t[e++]=r&127|128,r/=128;for(;r>=128;)t[e++]=r&127|128,r>>>=7;return t[e]=r,n}function qr(t){return t%2===0&&t++,Math.floor((tm(t)+6)/7)}function tm(t){let e=0;return t>=pc&&(t=Math.floor(t/pc),e=32),t>=65536&&(t>>>=16,e+=16),t>=256&&(t>>>=8,e+=8),e+rm[t]}const rm=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],nm=["Data","Links"],im=["Hash","Name","Tsize"],po=new TextEncoder;function wu(t,e){if(t===e)return 0;const r=t.Name?po.encode(t.Name):[],n=e.Name?po.encode(e.Name):[];let i=r.length,s=n.length;for(let o=0,a=Math.min(i,s);o<a;++o)if(r[o]!==n[o]){i=r[o],s=n[o];break}return i<s?-1:s<i?1:0}function gc(t,e){return!Object.keys(t).some(r=>!e.includes(r))}function bu(t){if(typeof t.asCID=="object"){const r=Q.asCID(t);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Hash){let r=Q.asCID(t.Hash);try{r||(typeof t.Hash=="string"?r=Q.parse(t.Hash):t.Hash instanceof Uint8Array&&(r=Q.decode(t.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(e.Hash=r)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof t.Name=="string"&&(e.Name=t.Name),typeof t.Tsize=="number"&&(e.Tsize=t.Tsize),e}function vu(t){if((t instanceof Uint8Array||typeof t=="string")&&(t={Data:t}),typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Data!==void 0)if(typeof t.Data=="string")e.Data=po.encode(t.Data);else if(t.Data instanceof Uint8Array)e.Data=t.Data;else throw new TypeError("Invalid DAG-PB form");if(t.Links!==void 0)if(Array.isArray(t.Links))e.Links=t.Links.map(bu),e.Links.sort(wu);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function xu(t){if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form");if(!gc(t,nm))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let e=0;e<t.Links.length;e++){const r=t.Links[e];if(!r||typeof r!="object"||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!gc(r,im))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(r.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash==null||!r.Hash["/"]||r.Hash["/"]!==r.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0){if(typeof r.Tsize!="number"||r.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(e>0&&wu(r,t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function sm(t,e=[]){return vu({Data:t,Links:e})}function om(t,e,r){return bu({Hash:r,Name:t,Tsize:e})}function am(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}const cm="dag-pb",lm=112;function um(t){xu(t);const e={};return t.Links&&(e.Links=t.Links.map(r=>{const n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),t.Data&&(e.Data=t.Data),X0(e)}function fm(t){const e=am(t),r=Y0(e),n={};return r.Data&&(n.Data=r.Data),r.Links&&(n.Links=r.Links.map(i=>{const s={};try{s.Hash=Q.decode(i.Hash)}catch{}if(!s.Hash)throw new Error("Invalid Hash field found in link, expected CID");return i.Name!==void 0&&(s.Name=i.Name),i.Tsize!==void 0&&(s.Tsize=i.Tsize),s})),n}const dm=Object.freeze(Object.defineProperty({__proto__:null,code:lm,createLink:om,createNode:sm,decode:fm,encode:um,name:cm,prepare:vu,validate:xu},Symbol.toStringTag,{value:"Module"}));function hm(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function aa(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function pm(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),f=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var b=0,w=0,x=0,B=y.length;x!==B&&y[x]===0;)x++,b++;for(var A=(B-x)*u+1>>>0,I=new Uint8Array(A);x!==B;){for(var D=y[x],N=0,C=A-1;(D!==0||N<w)&&C!==-1;C--,N++)D+=256*I[C]>>>0,I[C]=D%a>>>0,D=D/a>>>0;if(D!==0)throw new Error("Non-zero carry");w=N,x++}for(var _=A-w;_!==A&&I[_]===0;)_++;for(var O=c.repeat(b);_<A;++_)O+=t.charAt(I[_]);return O}function p(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var b=0;if(y[b]!==" "){for(var w=0,x=0;y[b]===c;)w++,b++;for(var B=(y.length-b)*f+1>>>0,A=new Uint8Array(B);y[b];){var I=r[y.charCodeAt(b)];if(I===255)return;for(var D=0,N=B-1;(I!==0||D<x)&&N!==-1;N--,D++)I+=a*A[N]>>>0,A[N]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");x=D,b++}if(y[b]!==" "){for(var C=B-x;C!==B&&A[C]===0;)C++;for(var _=new Uint8Array(w+(B-C)),O=w;C!==B;)_[O++]=A[C++];return _}}}function m(y){var b=p(y);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:p,decode:m}}var gm=pm,ym=gm;class mm{constructor(e,r,n){S(this,"name");S(this,"prefix");S(this,"baseEncode");this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class wm{constructor(e,r,n){S(this,"name");S(this,"prefix");S(this,"baseDecode");S(this,"prefixCodePoint");if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Eu(this,e)}}class bm{constructor(e){S(this,"decoders");this.decoders=e}or(e){return Eu(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function Eu(t,e){return new bm({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}class vm{constructor(e,r,n,i){S(this,"name");S(this,"prefix");S(this,"baseEncode");S(this,"baseDecode");S(this,"encoder");S(this,"decoder");this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new mm(e,r,n),this.decoder=new wm(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function Su({name:t,prefix:e,encode:r,decode:n}){return new vm(t,e,r,n)}function Au({name:t,prefix:e,alphabet:r}){const{encode:n,decode:i}=ym(r,t);return Su({prefix:e,name:t,encode:n,decode:s=>aa(i(s))})}function xm(t,e,r,n){const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,f=0;for(let u=0;u<s;++u){const h=i[t[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,o[f++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o}function Em(t,e,r){const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o!==0&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s}function ht({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return Su({prefix:e,name:t,encode(i){return Em(i,n,r)},decode(i){return xm(i,n,r,t)}})}ht({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});ht({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const Bu=ht({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});ht({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function Wt(t){return Bu.encode(t).slice(1)}function Dt(t){return Bu.decode(`u${t}`)}const Ni=ht({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});ht({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});ht({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});ht({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});ht({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});ht({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});ht({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});ht({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});ht({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const cr=Au({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});Au({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Sm=ku,yc=128,Am=127,Bm=~Am,km=Math.pow(2,31);function ku(t,e,r){e=e||[],r=r||0;for(var n=r;t>=km;)e[r++]=t&255|yc,t/=128;for(;t&Bm;)e[r++]=t&255|yc,t>>>=7;return e[r]=t|0,ku.bytes=r-n+1,e}var Tm=go,Im=128,mc=127;function go(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw go.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&mc)<<i:(o&mc)*Math.pow(2,i),i+=7}while(o>=Im);return go.bytes=s-n,r}var Cm=Math.pow(2,7),Nm=Math.pow(2,14),_m=Math.pow(2,21),Om=Math.pow(2,28),Um=Math.pow(2,35),Pm=Math.pow(2,42),Dm=Math.pow(2,49),$m=Math.pow(2,56),Rm=Math.pow(2,63),Lm=function(t){return t<Cm?1:t<Nm?2:t<_m?3:t<Om?4:t<Um?5:t<Pm?6:t<Dm?7:t<$m?8:t<Rm?9:10},Fm={encode:Sm,decode:Tm,encodingLength:Lm},Vi=Fm;function yo(t,e=0){return[Vi.decode(t,e),Vi.decode.bytes]}function ji(t,e,r=0){return Vi.encode(t,e,r),e}function zi(t){return Vi.encodingLength(t)}function Mm(t,e){const r=e.byteLength,n=zi(t),i=n+zi(r),s=new Uint8Array(i+r);return ji(t,s,0),ji(r,s,n),s.set(e,i),new ca(t,r,e,s)}function Hm(t){const e=aa(t),[r,n]=yo(e),[i,s]=yo(e.subarray(n)),o=e.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new ca(r,i,o,e)}function Vm(t,e){if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&hm(t.bytes,r.bytes)}}class ca{constructor(e,r,n,i){S(this,"code");S(this,"size");S(this,"digest");S(this,"bytes");this.code=e,this.size=r,this.digest=n,this.bytes=i}}function wc(t,e){const{bytes:r,version:n}=t;switch(n){case 0:return zm(r,mo(t),e??cr.encoder);default:return Gm(r,mo(t),e??Ni.encoder)}}const bc=new WeakMap;function mo(t){const e=bc.get(t);if(e==null){const r=new Map;return bc.set(t,r),r}return e}var kl;class Pe{constructor(e,r,n,i){S(this,"code");S(this,"version");S(this,"multihash");S(this,"bytes");S(this,"/");S(this,kl,"CID");this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==Tn)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==qm)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Pe.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=Mm(e,r);return Pe.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Pe.equals(this,e)}static equals(e,r){const n=r;return n!=null&&e.code===n.code&&e.version===n.version&&Vm(e.multihash,n.multihash)}toString(e){return wc(this,e)}toJSON(){return{"/":wc(this)}}link(){return this}[(kl=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const r=e;if(r instanceof Pe)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:i,multihash:s,bytes:o}=r;return new Pe(n,i,s,o??vc(n,i,s.bytes))}else if(r[Wm]===!0){const{version:n,multihash:i,code:s}=r,o=Hm(i);return Pe.create(n,s,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Tn)throw new Error(`Version 0 CID must use dag-pb (code: ${Tn}) block encoding`);return new Pe(e,r,n,n.bytes)}case 1:{const i=vc(e,r,n.bytes);return new Pe(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Pe.create(0,Tn,e)}static createV1(e,r){return Pe.create(1,e,r)}static decode(e){const[r,n]=Pe.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=Pe.inspectBytes(e),n=r.size-r.multihashSize,i=aa(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");const s=i.subarray(r.multihashSize-r.digestSize),o=new ca(r.multihashCode,r.digestSize,s,i);return[r.version===0?Pe.createV0(o):Pe.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[h,p]=yo(e.subarray(r));return r+=p,h};let i=n(),s=Tn;if(i===18?(i=0,r=0):s=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const o=r,a=n(),c=n(),f=r+c,u=f-o;return{version:i,codec:s,multihashCode:a,digestSize:c,multihashSize:u,size:f}}static parse(e,r){const[n,i]=jm(e,r),s=Pe.decode(i);if(s.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return mo(s).set(n,e),s}}function jm(t,e){switch(t[0]){case"Q":{const r=e??cr;return[cr.prefix,r.decode(`${cr.prefix}${t}`)]}case cr.prefix:{const r=e??cr;return[cr.prefix,r.decode(t)]}case Ni.prefix:{const r=e??Ni;return[Ni.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function zm(t,e,r){const{prefix:n}=r;if(n!==cr.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=e.get(n);if(i==null){const s=r.encode(t).slice(1);return e.set(n,s),s}else return i}function Gm(t,e,r){const{prefix:n}=r,i=e.get(n);if(i==null){const s=r.encode(t);return e.set(n,s),s}else return i}const Tn=112,qm=18;function vc(t,e,r){const n=zi(t),i=n+zi(e),s=new Uint8Array(i+r.byteLength);return ji(t,s,0),ji(e,s,n),s.set(r,i),s}const Wm=Symbol.for("@ipld/js-cid/CID");function Km(t){const[e,r,n]=t;return{payload:r,signatures:[{protected:e,signature:n}],link:Pe.decode(Dt(r))}}function Ym(t){const e={signature:Dt(t.signature)};return t.header&&(e.header=t.header),t.protected&&(e.protected=Dt(t.protected)),e}function Zm(t){return{payload:Dt(t.payload),signatures:t.signatures.map(Ym)}}function Jm(t){const e={signature:Wt(t.signature)};return t.header&&(e.header=t.header),t.protected&&(e.protected=Wt(t.protected)),e}function Xm(t){const e={payload:Wt(t.payload),signatures:t.signatures.map(Jm)};try{return e.pld=wo(ew(t.payload)),e}catch{try{return e.link=Pe.decode(new Uint8Array(t.payload)),e}catch{throw new Error("Invalid payload, must be either JSON or CID")}}}function wo(t){if(typeof t=="string"){if(t.startsWith("ipfs://"))return Pe.parse(t.slice(7))}else{if(Array.isArray(t))return t.map(wo);if(Qm(t)){const e={};for(const r in t)e[r]=wo(t[r]);return e}}return t}function Qm(t){return typeof t=="object"&&t!==null}function ew(t){return JSON.parse(new TextDecoder().decode(t))}function tw(t){const[e,r,n,i,s]=t,o={ciphertext:i,iv:n,protected:e,tag:s};return r&&(o.recipients=[{encrypted_key:r}]),o}function rw(t){const e={};return t.encrypted_key&&(e.encrypted_key=Dt(t.encrypted_key)),t.header&&(e.header=t.header),e}function nw(t){const e={ciphertext:Dt(t.ciphertext),protected:Dt(t.protected),iv:Dt(t.iv),tag:Dt(t.tag)};return t.aad&&(e.aad=Dt(t.aad)),t.recipients&&(e.recipients=t.recipients.map(rw)),t.unprotected&&(e.unprotected=t.unprotected),e}function iw(t){const e={};return t.encrypted_key&&(e.encrypted_key=Wt(t.encrypted_key)),t.header&&(e.header=t.header),e}function sw(t){const e={ciphertext:Wt(t.ciphertext),protected:Wt(t.protected),iv:Wt(t.iv),tag:Wt(t.tag)};return t.aad&&(e.aad=Wt(t.aad)),t.recipients&&(e.recipients=t.recipients.map(iw)),t.unprotected&&(e.unprotected=t.unprotected),e}const ow="dag-jose",aw=133;function Tu(t){return"payload"in t&&typeof t.payload=="string"&&"signatures"in t&&Array.isArray(t.signatures)}function cw(t){return"payload"in t&&t.payload instanceof Uint8Array&&"signatures"in t&&Array.isArray(t.signatures)}function lw(t){return"ciphertext"in t&&t.ciphertext instanceof Uint8Array&&"iv"in t&&t.iv instanceof Uint8Array&&"protected"in t&&t.protected instanceof Uint8Array&&"tag"in t&&t.tag instanceof Uint8Array}function Iu(t){return"ciphertext"in t&&typeof t.ciphertext=="string"&&"iv"in t&&typeof t.iv=="string"&&"protected"in t&&typeof t.protected=="string"&&"tag"in t&&typeof t.tag=="string"}function Cu(t){if(typeof t=="string"){const e=t.split(".");if(e.length===3)return Km(e);if(e.length===5)return tw(e);throw new Error("Not a valid JOSE string")}if(Tu(t)||Iu(t))return t;throw new Error("Not a valid unencoded JOSE object")}function uw(t){typeof t=="string"&&(t=Cu(t));let e;if(Tu(t))e=Zm(t);else if(Iu(t))e=nw(t);else throw new Error("Not a valid JOSE object");return new Uint8Array(fu(e))}function fw(t){let e;try{e=du(t)}catch{throw new Error("Not a valid DAG-JOSE object")}if(cw(e))return Xm(e);if(lw(e))return sw(e);throw new Error("Not a valid DAG-JOSE object")}const dw=Object.freeze(Object.defineProperty({__proto__:null,code:aw,decode:fw,encode:uw,name:ow,toGeneral:Cu},Symbol.toStringTag,{value:"Module"}));function Jt(t){const e=new globalThis.AbortController;function r(){e.abort();for(const s of t)(s==null?void 0:s.removeEventListener)!=null&&s.removeEventListener("abort",r)}for(const s of t){if((s==null?void 0:s.aborted)===!0){r();break}(s==null?void 0:s.addEventListener)!=null&&s.addEventListener("abort",r)}function n(){for(const s of t)(s==null?void 0:s.removeEventListener)!=null&&s.removeEventListener("abort",r)}const i=e.signal;return i.clear=n,i}const hw="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let pw=(t=21)=>{let e="",r=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)e+=hw[r[t]&63];return e};function gw(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var yw=gw;const mw=es(yw),Nu=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,la=mw(),cs=Nu&&!la,ww=la&&Nu,bw=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!la,ls=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;async function*us(t,e={}){const r=t.getReader();try{for(;;){const n=await r.read();if(n.done)return;yield n.value}}finally{e.preventCancel!==!0&&await r.cancel(),r.releaseLock()}}function xc(t,e){for(const r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function vw(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return xc(t,r)}catch{r.message=t.message,r.stack=t.stack;const i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),xc(new i,r)}}var xw=vw;const $t=es(xw);function fs(t){const[e,r]=t[Symbol.asyncIterator]!=null?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:i=>{n.push(i)},next:()=>n.length>0?{done:!1,value:n.shift()}:e.next(),[r](){return this}}}function Ew(t){return t[Symbol.asyncIterator]!=null}function Ec(t,e){let r=0;if(Ew(t))return async function*(){for await(const c of t)yield e(c,r++)}();const n=fs(t),{value:i,done:s}=n.next();if(s===!0)return function*(){}();const o=e(i,r++);if(typeof o.then=="function")return async function*(){yield await o;for await(const c of n)yield e(c,r++)}();const a=e;return function*(){yield o;for(const c of n)yield a(c,r++)}()}let Sw=class extends Error{constructor(r){super(r.statusText);S(this,"response");this.name="HTTPError",this.response=r}};class Aw extends Error{constructor(e="Invalid mtime"){super(e),this.name="InvalidMtimeError"}}function Qr(t){return ArrayBuffer.isView(t)||t instanceof ArrayBuffer}function Gi(t){return t.constructor!=null&&(t.constructor.name==="Blob"||t.constructor.name==="File")&&typeof t.stream=="function"}function bo(t){return typeof t=="object"&&(t.path!=null||t.content!=null)}function qi(t){return typeof(t==null?void 0:t.getReader)=="function"}function _u(t){if(t!=null)return typeof t=="string"&&(t=parseInt(t,8)),t&4095}function Bw(t){return Object.prototype.hasOwnProperty.call(t,"secs")}function kw(t){return Object.prototype.hasOwnProperty.call(t,"Seconds")}function Tw(t){return Array.isArray(t)}function ds(t){if(t!=null){if(Bw(t)&&(t={secs:t.secs,nsecs:t.nsecs}),kw(t)&&(t={secs:BigInt(t.Seconds),nsecs:t.FractionalNanoseconds}),Tw(t)&&(t={secs:BigInt(t[0]),nsecs:t[1]}),t instanceof Date){const e=t.getTime(),r=Math.floor(e/1e3);t={secs:BigInt(r),nsecs:(e-r*1e3)*1e3}}if(typeof t=="bigint"){const e=t/BigInt(1e9),r=t-e*BigInt(1e9);t={secs:e,nsecs:Number(r)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(t.nsecs!=null&&(t.nsecs<0||t.nsecs>999999999))throw new Aw("mtime-nsecs must be within the range [0,999999999]");return t}}}async function*Iw(t,e){if(typeof t=="string"||t instanceof String||Qr(t)||Gi(t)||t._readableState!=null)throw $t(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(qi(t)&&(t=us(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const r=fs(t),{value:n,done:i}=await r.peek();if(i===!0){yield*[];return}if(r.push(n),Number.isInteger(n))throw $t(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState!=null){yield*Ec(r,async s=>Vs({content:s},e));return}if(Qr(n)){yield Vs({content:r},e);return}if(bo(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||qi(n)||Gi(n)){yield*Ec(r,async s=>Vs(s,e));return}}throw bo(t)?$t(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):$t(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}async function Vs(t,e){const{path:r,mode:n,mtime:i,content:s}=t,o={path:r??"",mode:_u(n),mtime:ds(i)};return s!=null?o.content=await e(s):r==null&&(o.content=await e(t)),o}const Ou=Symbol.for("@libp2p/peer-id");class wt extends Error{constructor(e="Invalid parameters"){super(e),this.name="InvalidParametersError"}}S(wt,"name","InvalidParametersError");class ua extends Error{constructor(e="Invalid public key"){super(e),this.name="InvalidPublicKeyError"}}S(ua,"name","InvalidPublicKeyError");class Uu extends Error{constructor(e="Invalid Multihash"){super(e),this.name="InvalidMultihashError"}}S(Uu,"name","InvalidMultihashError");class fa extends Error{constructor(e="Unsupported key type"){super(e),this.name="UnsupportedKeyTypeError"}}S(fa,"name","UnsupportedKeyTypeError");function Cw(t){return t[Symbol.asyncIterator]!=null}function Pu(t){if(Cw(t))return(async()=>{const r=[];for await(const n of t)r.push(n);return r})();const e=[];for(const r of t)e.push(r);return e}async function Du(t){if(Qr(t))return new Blob([t]);if(typeof t=="string"||t instanceof String)return new Blob([t.toString()]);if(Gi(t))return t;if(qi(t)&&(t=us(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const e=fs(t),{value:r,done:n}=await e.peek();if(n===!0)return Sc(e);if(e.push(r),Number.isInteger(r))return new Blob([Uint8Array.from(await Pu(e))]);if(Qr(r)||typeof r=="string"||r instanceof String)return Sc(e)}throw new wt(`Unexpected input: ${t}`)}async function Sc(t){const e=[];for await(const r of t)e.push(r);return new Blob(e)}function Nw(t){return Iw(t,Du)}function da(t){if(t!=null)return typeof t=="string"?t:t.toString(8).padStart(4,"0")}async function Ac(t,e,r={},n){const i=[],s=new FormData;let o=0,a=0;for await(const{content:c,path:f,mode:u,mtime:h}of Nw(t)){let p="";const m=c!=null?"file":"dir";o>0&&(p=`-${o}`);let y=m+p;const b=[];if(u!=null&&b.push(`mode=${da(u)}`),h!=null){const{secs:w,nsecs:x}=h;b.push(`mtime=${w}`),x!=null&&b.push(`mtime-nsecs=${x}`)}if(b.length>0&&(y=`${y}?${b.join("&")}`),c!=null){s.set(y,c,f!=null?encodeURIComponent(f):void 0);const w=a+c.size;i.push({name:f,start:a,end:w}),a=w}else if(f!=null)s.set(y,new File([""],encodeURIComponent(f),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");o++}return{total:a,parts:i,headers:r,body:s}}async function yr(t,e,r={},n=`-----------------------------${pw()}`){let i=Ac;return ww&&(i=Ac),i(t,e,r,n)}function je(t){if(t==null)return t;const e=/^[A-Z]+$/,r={};return Object.keys(t).reduce((n,i)=>(e.test(i)?n[i.toLowerCase()]=t[i]:e.test(i[0])?n[i[0].toLowerCase()+i.slice(1)]=t[i]:n[i]=t[i],n),r)}function R({arg:t,searchParams:e,hashAlg:r,mtime:n,mode:i,...s}={}){e!=null&&(s={...s,...e}),r!=null&&(s.hash=r),n!=null&&(n=ds(n),s.mtime=n.secs,s.mtimeNsecs=n.nsecs),i!=null&&(s.mode=da(i)),isNaN(s.timeout)||(s.timeout=`${s.timeout}ms`),t==null?t=[]:Array.isArray(t)||(t=[t]);const o=new URLSearchParams(s);return t.forEach(a=>{o.append("arg",a)}),o}function $u(t){return async function*(r,n={}){const i=new AbortController,s=Jt([i.signal,n.signal]);try{const{headers:o,body:a,total:c,parts:f}=await yr(r,i,n.headers),[u,h]=typeof n.progress=="function"?_w(c,n.progress,f):[void 0,void 0],p=await t.post("add",{searchParams:R({"stream-channels":!0,...n,progress:!!u}),onUploadProgress:h,signal:s,headers:o,body:a});for await(let m of p.ndjson())m=je(m),m.hash!==void 0?yield Uw(m):u!=null&&u(m.bytes??0,m.name)}finally{s.clear()}}}const _w=(t,e,r)=>r!=null?[void 0,Ow(t,r,e)]:[e,void 0],Ow=(t,e,r)=>{let n=0;const i=e.length;return({loaded:s,total:o})=>{const a=Math.floor(s/o*t);for(;n<i;){const{start:c,end:f,name:u}=e[n];if(a<f){r(a-c,u);break}else r(f-c,u),n+=1}}};function Uw({name:t,hash:e,size:r,mode:n,mtime:i,mtimeNsecs:s}){const o={path:t,cid:Q.parse(e),size:parseInt(r)};return n!=null&&(o.mode=parseInt(n,8)),i!=null&&(o.mtime={secs:i,nsecs:s??0}),o}function Pw(t){return t[Symbol.asyncIterator]!=null}function hs(t){if(Pw(t))return(async()=>{let r;for await(const n of t)r=n;return r})();let e;for(const r of t)e=r;return e}async function*Dw(t,e){if(t==null)throw $t(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT");if(typeof t=="string"||t instanceof String){yield wi(t.toString(),e);return}if(Qr(t)||Gi(t)){yield wi(t,e);return}if(qi(t)&&(t=us(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const r=fs(t),{value:n,done:i}=await r.peek();if(i===!0){yield{content:[]};return}if(r.push(n),Number.isInteger(n)||Qr(n)||typeof n=="string"||n instanceof String){yield wi(r,e);return}throw $t(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(bo(t)){yield wi(t,e);return}throw $t(new Error('Unexpected input: cannot convert "'+typeof t+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function wi(t,e){const{path:r,mode:n,mtime:i,content:s}=t,o={path:r??"",mode:_u(n),mtime:ds(i)};return s!=null?o.content=await e(s):r==null&&(o.content=await e(t)),o}function $w(t){return Dw(t,Du)}function Rw(t){const e=$u(t);return async function(n,i={}){const s=$w(n),o=e(s,i),a=await hs(o);if(a==null)throw new Error("Invalid body");return a}}function Bc(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Lw(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ps(t,...e){if(!Lw(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Fw(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Bc(t.outputLen),Bc(t.blockLen)}function Wi(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Mw(t,e){ps(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Hr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function js(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function _t(t,e){return t<<32-e|t>>>e}function Hw(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function ha(t){return typeof t=="string"&&(t=Hw(t)),ps(t),t}function Vw(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];ps(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}class Ru{clone(){return this._cloneInto()}}function Lu(t){const e=n=>t().update(ha(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Fu(t=32){if(Hr&&typeof Hr.getRandomValues=="function")return Hr.getRandomValues(new Uint8Array(t));if(Hr&&typeof Hr.randomBytes=="function")return Hr.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function jw(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,f=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+f,a,n)}function zw(t,e,r){return t&e^~t&r}function Gw(t,e,r){return t&e^t&r^e&r}class Mu extends Ru{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=js(this.buffer)}update(e){Wi(this);const{view:r,buffer:n,blockLen:i}=this;e=ha(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=js(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Wi(this),Mw(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let h=o;h<i;h++)r[h]=0;jw(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=js(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=c/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<f;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}}const bi=BigInt(2**32-1),vo=BigInt(32);function Hu(t,e=!1){return e?{h:Number(t&bi),l:Number(t>>vo&bi)}:{h:Number(t>>vo&bi)|0,l:Number(t&bi)|0}}function qw(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Hu(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const Ww=(t,e)=>BigInt(t>>>0)<<vo|BigInt(e>>>0),Kw=(t,e,r)=>t>>>r,Yw=(t,e,r)=>t<<32-r|e>>>r,Zw=(t,e,r)=>t>>>r|e<<32-r,Jw=(t,e,r)=>t<<32-r|e>>>r,Xw=(t,e,r)=>t<<64-r|e>>>r-32,Qw=(t,e,r)=>t>>>r-32|e<<64-r,eb=(t,e)=>e,tb=(t,e)=>t,rb=(t,e,r)=>t<<r|e>>>32-r,nb=(t,e,r)=>e<<r|t>>>32-r,ib=(t,e,r)=>e<<r-32|t>>>64-r,sb=(t,e,r)=>t<<r-32|e>>>64-r;function ob(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const ab=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),cb=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,lb=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),ub=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,fb=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),db=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,ie={fromBig:Hu,split:qw,toBig:Ww,shrSH:Kw,shrSL:Yw,rotrSH:Zw,rotrSL:Jw,rotrBH:Xw,rotrBL:Qw,rotr32H:eb,rotr32L:tb,rotlSH:rb,rotlSL:nb,rotlBH:ib,rotlBL:sb,add:ob,add3L:ab,add3H:cb,add4L:lb,add4H:ub,add5H:db,add5L:fb},[hb,pb]=ie.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),nr=new Uint32Array(80),ir=new Uint32Array(80);class gb extends Mu{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:c,Eh:f,El:u,Fh:h,Fl:p,Gh:m,Gl:y,Hh:b,Hl:w}=this;return[e,r,n,i,s,o,a,c,f,u,h,p,m,y,b,w]}set(e,r,n,i,s,o,a,c,f,u,h,p,m,y,b,w){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=f|0,this.El=u|0,this.Fh=h|0,this.Fl=p|0,this.Gh=m|0,this.Gl=y|0,this.Hh=b|0,this.Hl=w|0}process(e,r){for(let A=0;A<16;A++,r+=4)nr[A]=e.getUint32(r),ir[A]=e.getUint32(r+=4);for(let A=16;A<80;A++){const I=nr[A-15]|0,D=ir[A-15]|0,N=ie.rotrSH(I,D,1)^ie.rotrSH(I,D,8)^ie.shrSH(I,D,7),C=ie.rotrSL(I,D,1)^ie.rotrSL(I,D,8)^ie.shrSL(I,D,7),_=nr[A-2]|0,O=ir[A-2]|0,J=ie.rotrSH(_,O,19)^ie.rotrBH(_,O,61)^ie.shrSH(_,O,6),K=ie.rotrSL(_,O,19)^ie.rotrBL(_,O,61)^ie.shrSL(_,O,6),q=ie.add4L(C,K,ir[A-7],ir[A-16]),ce=ie.add4H(q,N,J,nr[A-7],nr[A-16]);nr[A]=ce|0,ir[A]=q|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:c,Dh:f,Dl:u,Eh:h,El:p,Fh:m,Fl:y,Gh:b,Gl:w,Hh:x,Hl:B}=this;for(let A=0;A<80;A++){const I=ie.rotrSH(h,p,14)^ie.rotrSH(h,p,18)^ie.rotrBH(h,p,41),D=ie.rotrSL(h,p,14)^ie.rotrSL(h,p,18)^ie.rotrBL(h,p,41),N=h&m^~h&b,C=p&y^~p&w,_=ie.add5L(B,D,C,pb[A],ir[A]),O=ie.add5H(_,x,I,N,hb[A],nr[A]),J=_|0,K=ie.rotrSH(n,i,28)^ie.rotrBH(n,i,34)^ie.rotrBH(n,i,39),q=ie.rotrSL(n,i,28)^ie.rotrBL(n,i,34)^ie.rotrBL(n,i,39),ce=n&s^n&a^s&a,L=i&o^i&c^o&c;x=b|0,B=w|0,b=m|0,w=y|0,m=h|0,y=p|0,{h,l:p}=ie.add(f|0,u|0,O|0,J|0),f=a|0,u=c|0,a=s|0,c=o|0,s=n|0,o=i|0;const j=ie.add3L(J,q,L);n=ie.add3H(j,O,K,ce),i=j|0}({h:n,l:i}=ie.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=ie.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=ie.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:f,l:u}=ie.add(this.Dh|0,this.Dl|0,f|0,u|0),{h,l:p}=ie.add(this.Eh|0,this.El|0,h|0,p|0),{h:m,l:y}=ie.add(this.Fh|0,this.Fl|0,m|0,y|0),{h:b,l:w}=ie.add(this.Gh|0,this.Gl|0,b|0,w|0),{h:x,l:B}=ie.add(this.Hh|0,this.Hl|0,x|0,B|0),this.set(n,i,s,o,a,c,f,u,h,p,m,y,b,w,x,B)}roundClean(){nr.fill(0),ir.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const yb=Lu(()=>new gb);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gs=BigInt(0),ys=BigInt(1),mb=BigInt(2);function kr(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ei(t){if(!kr(t))throw new Error("Uint8Array expected")}function Yt(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const wb=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Tr(t){ei(t);let e="";for(let r=0;r<t.length;r++)e+=wb[t[r]];return e}function Vr(t){const e=t.toString(16);return e.length&1?"0"+e:e}function pa(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?gs:BigInt("0x"+t)}const zt={_0:48,_9:57,A:65,F:70,a:97,f:102};function kc(t){if(t>=zt._0&&t<=zt._9)return t-zt._0;if(t>=zt.A&&t<=zt.F)return t-(zt.A-10);if(t>=zt.a&&t<=zt.f)return t-(zt.a-10)}function en(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=kc(t.charCodeAt(s)),a=kc(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+a}return n}function Er(t){return pa(Tr(t))}function Wr(t){return ei(t),pa(Tr(Uint8Array.from(t).reverse()))}function tn(t,e){return en(t.toString(16).padStart(e*2,"0"))}function Hn(t,e){return tn(t,e).reverse()}function bb(t){return en(Vr(t))}function Oe(t,e,r){let n;if(typeof e=="string")try{n=en(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(kr(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function Ir(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];ei(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}function vb(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function xb(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const zs=t=>typeof t=="bigint"&&gs<=t;function ms(t,e,r){return zs(t)&&zs(e)&&zs(r)&&e<=t&&t<r}function mt(t,e,r,n){if(!ms(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function Vu(t){let e;for(e=0;t>gs;t>>=ys,e+=1);return e}function Eb(t,e){return t>>BigInt(e)&ys}function Sb(t,e,r){return t|(r?ys:gs)<<BigInt(e)}const ga=t=>(mb<<BigInt(t-1))-ys,Gs=t=>new Uint8Array(t),Tc=t=>Uint8Array.from(t);function ju(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Gs(t),i=Gs(t),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...h)=>r(i,n,...h),c=(h=Gs())=>{i=a(Tc([0]),h),n=a(),h.length!==0&&(i=a(Tc([1]),h),n=a())},f=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const p=[];for(;h<e;){n=a();const m=n.slice();p.push(m),h+=n.length}return Ir(...p)};return(h,p)=>{o(),c(h);let m;for(;!(m=p(f()));)c();return o(),m}}const Ab={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||kr(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function pn(t,e,r={}){const n=(i,s,o)=>{const a=Ab[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}const Bb=()=>{throw new Error("not implemented")};function Vn(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}const kb=Object.freeze(Object.defineProperty({__proto__:null,aInRange:mt,abool:Yt,abytes:ei,bitGet:Eb,bitLen:Vu,bitMask:ga,bitSet:Sb,bytesToHex:Tr,bytesToNumberBE:Er,bytesToNumberLE:Wr,concatBytes:Ir,createHmacDrbg:ju,ensureBytes:Oe,equalBytes:vb,hexToBytes:en,hexToNumber:pa,inRange:ms,isBytes:kr,memoized:Vn,notImplemented:Bb,numberToBytesBE:tn,numberToBytesLE:Hn,numberToHexUnpadded:Vr,numberToVarBytesBE:bb,utf8ToBytes:xb,validateObject:pn},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Re=BigInt(0),Ae=BigInt(1),br=BigInt(2),Tb=BigInt(3),xo=BigInt(4),Ic=BigInt(5),Cc=BigInt(8);function Se(t,e){const r=t%e;return r>=Re?r:e+r}function Ib(t,e,r){if(e<Re)throw new Error("invalid exponent, negatives unsupported");if(r<=Re)throw new Error("invalid modulus");if(r===Ae)return Re;let n=Ae;for(;e>Re;)e&Ae&&(n=n*t%r),t=t*t%r,e>>=Ae;return n}function ke(t,e,r){let n=t;for(;e-- >Re;)n*=n,n%=r;return n}function Eo(t,e){if(t===Re)throw new Error("invert: expected non-zero number");if(e<=Re)throw new Error("invert: expected positive modulus, got "+e);let r=Se(t,e),n=e,i=Re,s=Ae;for(;r!==Re;){const a=n/r,c=n%r,f=i-s*a;n=r,r=c,i=s,s=f}if(n!==Ae)throw new Error("invert: does not exist");return Se(i,e)}function Cb(t){const e=(t-Ae)/br;let r,n,i;for(r=t-Ae,n=0;r%br===Re;r/=br,n++);for(i=br;i<t&&Ib(i,e,t)!==t-Ae;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+Ae)/xo;return function(c,f){const u=c.pow(f,o);if(!c.eql(c.sqr(u),f))throw new Error("Cannot find square root");return u}}const s=(r+Ae)/br;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let f=n,u=a.pow(a.mul(a.ONE,i),r),h=a.pow(c,s),p=a.pow(c,r);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let m=1;for(let b=a.sqr(p);m<f&&!a.eql(b,a.ONE);m++)b=a.sqr(b);const y=a.pow(u,Ae<<BigInt(f-m-1));u=a.sqr(y),h=a.mul(h,y),p=a.mul(p,u),f=m}return h}}function Nb(t){if(t%xo===Tb){const e=(t+Ae)/xo;return function(n,i){const s=n.pow(i,e);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%Cc===Ic){const e=(t-Ic)/Cc;return function(n,i){const s=n.mul(i,br),o=n.pow(s,e),a=n.mul(i,o),c=n.mul(n.mul(a,br),o),f=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(f),i))throw new Error("Cannot find square root");return f}}return Cb(t)}const _b=(t,e)=>(Se(t,e)&Ae)===Ae,Ob=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ub(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Ob.reduce((n,i)=>(n[i]="function",n),e);return pn(t,r)}function Pb(t,e,r){if(r<Re)throw new Error("invalid exponent, negatives unsupported");if(r===Re)return t.ONE;if(r===Ae)return e;let n=t.ONE,i=e;for(;r>Re;)r&Ae&&(n=t.mul(n,i)),i=t.sqr(i),r>>=Ae;return n}function Db(t,e){const r=new Array(e.length),n=e.reduce((s,o,a)=>t.is0(o)?s:(r[a]=s,t.mul(s,o)),t.ONE),i=t.inv(n);return e.reduceRight((s,o,a)=>t.is0(o)?s:(r[a]=t.mul(s,r[a]),t.mul(s,o)),i),r}function zu(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function ws(t,e,r=!1,n={}){if(t<=Re)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=zu(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:s,MASK:ga(i),ZERO:Re,ONE:Ae,create:c=>Se(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Re<=c&&c<t},is0:c=>c===Re,isOdd:c=>(c&Ae)===Ae,neg:c=>Se(-c,t),eql:(c,f)=>c===f,sqr:c=>Se(c*c,t),add:(c,f)=>Se(c+f,t),sub:(c,f)=>Se(c-f,t),mul:(c,f)=>Se(c*f,t),pow:(c,f)=>Pb(a,c,f),div:(c,f)=>Se(c*Eo(f,t),t),sqrN:c=>c*c,addN:(c,f)=>c+f,subN:(c,f)=>c-f,mulN:(c,f)=>c*f,inv:c=>Eo(c,t),sqrt:n.sqrt||(c=>(o||(o=Nb(t)),o(a,c))),invertBatch:c=>Db(a,c),cmov:(c,f,u)=>u?f:c,toBytes:c=>r?Hn(c,s):tn(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return r?Wr(c):Er(c)}});return Object.freeze(a)}function Gu(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function qu(t){const e=Gu(t);return e+Math.ceil(e/2)}function $b(t,e,r=!1){const n=t.length,i=Gu(e),s=qu(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=r?Wr(t):Er(t),a=Se(o,e-Ae)+Ae;return r?Hn(a,i):tn(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Nc=BigInt(0),vi=BigInt(1);function qs(t,e){const r=e.negate();return t?r:e}function Wu(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Ws(t,e){Wu(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function Rb(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function Lb(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const Ks=new WeakMap,Ku=new WeakMap;function Ys(t){return Ku.get(t)||1}function Yu(t,e){return{constTimeNegate:qs,hasPrecomputes(r){return Ys(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>Nc;)n&vi&&(i=i.add(s)),s=s.double(),n>>=vi;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=Ws(n,e),o=[];let a=r,c=a;for(let f=0;f<i;f++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,i){const{windows:s,windowSize:o}=Ws(r,e);let a=t.ZERO,c=t.BASE;const f=BigInt(2**r-1),u=2**r,h=BigInt(r);for(let p=0;p<s;p++){const m=p*o;let y=Number(i&f);i>>=h,y>o&&(y-=u,i+=vi);const b=m,w=m+Math.abs(y)-1,x=p%2!==0,B=y<0;y===0?c=c.add(qs(x,n[b])):a=a.add(qs(B,n[w]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,s=t.ZERO){const{windows:o,windowSize:a}=Ws(r,e),c=BigInt(2**r-1),f=2**r,u=BigInt(r);for(let h=0;h<o;h++){const p=h*a;if(i===Nc)break;let m=Number(i&c);if(i>>=u,m>a&&(m-=f,i+=vi),m===0)continue;let y=n[p+Math.abs(m)-1];m<0&&(y=y.negate()),s=s.add(y)}return s},getPrecomputes(r,n,i){let s=Ks.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&Ks.set(n,i(s))),s},wNAFCached(r,n,i){const s=Ys(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=Ys(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){Wu(n,e),Ku.set(r,n),Ks.delete(r)}}}function Zu(t,e,r,n){if(Rb(r,t),Lb(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=Vu(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),f=Math.floor((e.BITS-1)/o)*o;let u=i;for(let h=f;h>=0;h-=o){c.fill(i);for(let m=0;m<n.length;m++){const y=n[m],b=Number(y>>BigInt(h)&BigInt(a));c[b]=c[b].add(r[m])}let p=i;for(let m=c.length-1,y=i;m>0;m--)y=y.add(c[m]),p=p.add(y);if(u=u.add(p),h!==0)for(let m=0;m<o;m++)u=u.double()}return u}function ya(t){return Ub(t.Fp),pn(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...zu(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const St=BigInt(0),rt=BigInt(1),xi=BigInt(2),Fb=BigInt(8),Mb={zip215:!0};function Hb(t){const e=ya(t);return pn(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Vb(t){const e=Hb(t),{Fp:r,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=e,f=xi<<BigInt(a*8)-rt,u=r.create,h=ws(e.n,e.nBitLength),p=e.uvRatio||((E,T)=>{try{return{isValid:!0,value:r.sqrt(E*r.inv(T))}}catch{return{isValid:!1,value:St}}}),m=e.adjustScalarBytes||(E=>E),y=e.domain||((E,T,U)=>{if(Yt("phflag",U),T.length||U)throw new Error("Contexts/pre-hash are not supported");return E});function b(E,T){mt("coordinate "+E,T,St,f)}function w(E){if(!(E instanceof A))throw new Error("ExtendedPoint expected")}const x=Vn((E,T)=>{const{ex:U,ey:M,ez:W}=E,Y=E.is0();T==null&&(T=Y?Fb:r.inv(W));const ee=u(U*T),re=u(M*T),X=u(W*T);if(Y)return{x:St,y:rt};if(X!==rt)throw new Error("invZ was invalid");return{x:ee,y:re}}),B=Vn(E=>{const{a:T,d:U}=e;if(E.is0())throw new Error("bad point: ZERO");const{ex:M,ey:W,ez:Y,et:ee}=E,re=u(M*M),X=u(W*W),le=u(Y*Y),he=u(le*le),se=u(re*T),ye=u(le*u(se+X)),ne=u(he+u(U*u(re*X)));if(ye!==ne)throw new Error("bad point: equation left != right (1)");const fe=u(M*W),Ie=u(Y*ee);if(fe!==Ie)throw new Error("bad point: equation left != right (2)");return!0});class A{constructor(T,U,M,W){this.ex=T,this.ey=U,this.ez=M,this.et=W,b("x",T),b("y",U),b("z",M),b("t",W),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(T){if(T instanceof A)throw new Error("extended point not allowed");const{x:U,y:M}=T||{};return b("x",U),b("y",M),new A(U,M,rt,u(U*M))}static normalizeZ(T){const U=r.invertBatch(T.map(M=>M.ez));return T.map((M,W)=>M.toAffine(U[W])).map(A.fromAffine)}static msm(T,U){return Zu(A,h,T,U)}_setWindowSize(T){N.setWindowSize(this,T)}assertValidity(){B(this)}equals(T){w(T);const{ex:U,ey:M,ez:W}=this,{ex:Y,ey:ee,ez:re}=T,X=u(U*re),le=u(Y*W),he=u(M*re),se=u(ee*W);return X===le&&he===se}is0(){return this.equals(A.ZERO)}negate(){return new A(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:T}=e,{ex:U,ey:M,ez:W}=this,Y=u(U*U),ee=u(M*M),re=u(xi*u(W*W)),X=u(T*Y),le=U+M,he=u(u(le*le)-Y-ee),se=X+ee,ye=se-re,ne=X-ee,fe=u(he*ye),Ie=u(se*ne),H=u(he*ne),te=u(ye*se);return new A(fe,Ie,te,H)}add(T){w(T);const{a:U,d:M}=e,{ex:W,ey:Y,ez:ee,et:re}=this,{ex:X,ey:le,ez:he,et:se}=T;if(U===BigInt(-1)){const Ft=u((Y-W)*(le+X)),Ze=u((Y+W)*(le-X)),bn=u(Ze-Ft);if(bn===St)return this.double();const ni=u(ee*xi*se),ii=u(re*xi*he),si=ii+ni,oi=Ze+Ft,vn=ii-ni,ai=u(si*bn),ci=u(oi*vn),li=u(si*vn),Fr=u(bn*oi);return new A(ai,ci,Fr,li)}const ye=u(W*X),ne=u(Y*le),fe=u(re*M*se),Ie=u(ee*he),H=u((W+Y)*(X+le)-ye-ne),te=Ie-fe,me=Ie+fe,Be=u(ne-U*ye),ze=u(H*te),vt=u(me*Be),mr=u(H*Be),tt=u(te*me);return new A(ze,vt,tt,mr)}subtract(T){return this.add(T.negate())}wNAF(T){return N.wNAFCached(this,T,A.normalizeZ)}multiply(T){const U=T;mt("scalar",U,rt,n);const{p:M,f:W}=this.wNAF(U);return A.normalizeZ([M,W])[0]}multiplyUnsafe(T,U=A.ZERO){const M=T;return mt("scalar",M,St,n),M===St?D:this.is0()||M===rt?this:N.wNAFCachedUnsafe(this,M,A.normalizeZ,U)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return N.unsafeLadder(this,n).is0()}toAffine(T){return x(this,T)}clearCofactor(){const{h:T}=e;return T===rt?this:this.multiplyUnsafe(T)}static fromHex(T,U=!1){const{d:M,a:W}=e,Y=r.BYTES;T=Oe("pointHex",T,Y),Yt("zip215",U);const ee=T.slice(),re=T[Y-1];ee[Y-1]=re&-129;const X=Wr(ee),le=U?f:r.ORDER;mt("pointHex.y",X,St,le);const he=u(X*X),se=u(he-rt),ye=u(M*he-W);let{isValid:ne,value:fe}=p(se,ye);if(!ne)throw new Error("Point.fromHex: invalid y coordinate");const Ie=(fe&rt)===rt,H=(re&128)!==0;if(!U&&fe===St&&H)throw new Error("Point.fromHex: x=0 and x_0=1");return H!==Ie&&(fe=u(-fe)),A.fromAffine({x:fe,y:X})}static fromPrivateKey(T){return O(T).point}toRawBytes(){const{x:T,y:U}=this.toAffine(),M=Hn(U,r.BYTES);return M[M.length-1]|=T&rt?128:0,M}toHex(){return Tr(this.toRawBytes())}}A.BASE=new A(e.Gx,e.Gy,rt,u(e.Gx*e.Gy)),A.ZERO=new A(St,rt,rt,St);const{BASE:I,ZERO:D}=A,N=Yu(A,a*8);function C(E){return Se(E,n)}function _(E){return C(Wr(E))}function O(E){const T=r.BYTES;E=Oe("private key",E,T);const U=Oe("hashed private key",s(E),2*T),M=m(U.slice(0,T)),W=U.slice(T,2*T),Y=_(M),ee=I.multiply(Y),re=ee.toRawBytes();return{head:M,prefix:W,scalar:Y,point:ee,pointBytes:re}}function J(E){return O(E).pointBytes}function K(E=new Uint8Array,...T){const U=Ir(...T);return _(s(y(U,Oe("context",E),!!i)))}function q(E,T,U={}){E=Oe("message",E),i&&(E=i(E));const{prefix:M,scalar:W,pointBytes:Y}=O(T),ee=K(U.context,M,E),re=I.multiply(ee).toRawBytes(),X=K(U.context,re,Y,E),le=C(ee+X*W);mt("signature.s",le,St,n);const he=Ir(re,Hn(le,r.BYTES));return Oe("result",he,r.BYTES*2)}const ce=Mb;function L(E,T,U,M=ce){const{context:W,zip215:Y}=M,ee=r.BYTES;E=Oe("signature",E,2*ee),T=Oe("message",T),U=Oe("publicKey",U,ee),Y!==void 0&&Yt("zip215",Y),i&&(T=i(T));const re=Wr(E.slice(ee,2*ee));let X,le,he;try{X=A.fromHex(U,Y),le=A.fromHex(E.slice(0,ee),Y),he=I.multiplyUnsafe(re)}catch{return!1}if(!Y&&X.isSmallOrder())return!1;const se=K(W,le.toRawBytes(),X.toRawBytes(),T);return le.add(X.multiplyUnsafe(se)).subtract(he).clearCofactor().equals(A.ZERO)}return I._setWindowSize(8),{CURVE:e,getPublicKey:J,sign:q,verify:L,ExtendedPoint:A,utils:{getExtendedPublicKey:O,randomPrivateKey:()=>o(r.BYTES),precompute(E=8,T=A.BASE){return T._setWindowSize(E),T.multiply(BigInt(3)),T}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ma=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),_c=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const jb=BigInt(1),Oc=BigInt(2);BigInt(3);const zb=BigInt(5),Gb=BigInt(8);function qb(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=ma,a=t*t%s*t%s,c=ke(a,Oc,s)*a%s,f=ke(c,jb,s)*t%s,u=ke(f,zb,s)*f%s,h=ke(u,e,s)*u%s,p=ke(h,r,s)*h%s,m=ke(p,n,s)*p%s,y=ke(m,i,s)*m%s,b=ke(y,i,s)*m%s,w=ke(b,e,s)*u%s;return{pow_p_5_8:ke(w,Oc,s)*t%s,b2:a}}function Wb(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Kb(t,e){const r=ma,n=Se(e*e*e,r),i=Se(n*n*e,r),s=qb(t*i).pow_p_5_8;let o=Se(t*n*s,r);const a=Se(e*o*o,r),c=o,f=Se(o*_c,r),u=a===t,h=a===Se(-t,r),p=a===Se(-t*_c,r);return u&&(o=c),(h||p)&&(o=f),_b(o,r)&&(o=Se(-o,r)),{isValid:u||h,value:o}}const Yb=ws(ma,void 0,!0),Zb={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Yb,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Gb,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:yb,randomBytes:Fu,adjustScalarBytes:Wb,uvRatio:Kb},Jb=Vb(Zb),Ju=32;function Xb(t,e,r){return Jb.verify(e,r instanceof Uint8Array?r:r.subarray(),t)}class Qb{constructor(e){S(this,"type","Ed25519");S(this,"raw");this.raw=Qu(e,Ju)}toMultihash(){return Ar.digest(_d(this))}toCID(){return Q.createV1(114,this.toMultihash())}toString(){return Me.encode(this.toMultihash().bytes).substring(1)}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:Zr(this.raw,e.raw)}verify(e,r){return Xb(this.raw,r,e)}}function Xu(t){return t=Qu(t,Ju),new Qb(t)}function Qu(t,e){if(t=Uint8Array.from(t??[]),t.length!==e)throw new wt(`Key must be a Uint8Array of length ${e}, got ${t.length}`);return t}const wa=new Float32Array([-0]),ur=new Uint8Array(wa.buffer);function ev(t,e,r){wa[0]=t,e[r]=ur[0],e[r+1]=ur[1],e[r+2]=ur[2],e[r+3]=ur[3]}function tv(t,e){return ur[0]=t[e],ur[1]=t[e+1],ur[2]=t[e+2],ur[3]=t[e+3],wa[0]}const ba=new Float64Array([-0]),We=new Uint8Array(ba.buffer);function rv(t,e,r){ba[0]=t,e[r]=We[0],e[r+1]=We[1],e[r+2]=We[2],e[r+3]=We[3],e[r+4]=We[4],e[r+5]=We[5],e[r+6]=We[6],e[r+7]=We[7]}function nv(t,e){return We[0]=t[e],We[1]=t[e+1],We[2]=t[e+2],We[3]=t[e+3],We[4]=t[e+4],We[5]=t[e+5],We[6]=t[e+6],We[7]=t[e+7],ba[0]}const iv=BigInt(Number.MAX_SAFE_INTEGER),sv=BigInt(Number.MIN_SAFE_INTEGER);class Ke{constructor(e,r){S(this,"lo");S(this,"hi");this.lo=e|0,this.hi=r|0}toNumber(e=!1){if(!e&&this.hi>>>31>0){const r=~this.lo+1>>>0;let n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(e=!1){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const r=~this.lo+1>>>0;let n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(e=!1){return this.toBigInt(e).toString()}zzEncode(){const e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){const e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){const e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}static fromBigInt(e){if(e===0n)return Sr;if(e<iv&&e>sv)return this.fromNumber(Number(e));const r=e<0n;r&&(e=-e);let n=e>>32n,i=e-(n<<32n);return r&&(n=~n|0n,i=~i|0n,++i>Uc&&(i=0n,++n>Uc&&(n=0n))),new Ke(Number(i),Number(n))}static fromNumber(e){if(e===0)return Sr;const r=e<0;r&&(e=-e);let n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new Ke(n,i)}static from(e){return typeof e=="number"?Ke.fromNumber(e):typeof e=="bigint"?Ke.fromBigInt(e):typeof e=="string"?Ke.fromBigInt(BigInt(e)):e.low!=null||e.high!=null?new Ke(e.low>>>0,e.high>>>0):Sr}}const Sr=new Ke(0,0);Sr.toBigInt=function(){return 0n};Sr.zzEncode=Sr.zzDecode=function(){return this};Sr.length=function(){return 1};const Uc=4294967296n;function ov(t){let e=0,r=0;for(let n=0;n<t.length;++n)r=t.charCodeAt(n),r<128?e+=1:r<2048?e+=2:(r&64512)===55296&&(t.charCodeAt(n+1)&64512)===56320?(++n,e+=4):e+=3;return e}function av(t,e,r){if(r-e<1)return"";let i;const s=[];let o=0,a;for(;e<r;)a=t[e++],a<128?s[o++]=a:a>191&&a<224?s[o++]=(a&31)<<6|t[e++]&63:a>239&&a<365?(a=((a&7)<<18|(t[e++]&63)<<12|(t[e++]&63)<<6|t[e++]&63)-65536,s[o++]=55296+(a>>10),s[o++]=56320+(a&1023)):s[o++]=(a&15)<<12|(t[e++]&63)<<6|t[e++]&63,o>8191&&((i??(i=[])).push(String.fromCharCode.apply(String,s)),o=0);return i!=null?(o>0&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))}function ef(t,e,r){const n=r;let i,s;for(let o=0;o<t.length;++o)i=t.charCodeAt(o),i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&((s=t.charCodeAt(o+1))&64512)===56320?(i=65536+((i&1023)<<10)+(s&1023),++o,e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128);return r-n}function At(t,e){return RangeError(`index out of range: ${t.pos} + ${e??1} > ${t.len}`)}function Ei(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}class cv{constructor(e){S(this,"buf");S(this,"pos");S(this,"len");S(this,"_slice",Uint8Array.prototype.subarray);this.buf=e,this.pos=0,this.len=e.length}uint32(){let e=4294967295;if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,At(this,10);return e}int32(){return this.uint32()|0}sint32(){const e=this.uint32();return e>>>1^-(e&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw At(this,4);return Ei(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw At(this,4);return Ei(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw At(this,4);const e=tv(this.buf,this.pos);return this.pos+=4,e}double(){if(this.pos+8>this.len)throw At(this,4);const e=nv(this.buf,this.pos);return this.pos+=8,e}bytes(){const e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw At(this,e);return this.pos+=e,r===n?new Uint8Array(0):this.buf.subarray(r,n)}string(){const e=this.bytes();return av(e,0,e.length)}skip(e){if(typeof e=="number"){if(this.pos+e>this.len)throw At(this,e);this.pos+=e}else do if(this.pos>=this.len)throw At(this);while(this.buf[this.pos++]&128);return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${e} at offset ${this.pos}`)}return this}readLongVarint(){const e=new Ke(0,0);let r=0;if(this.len-this.pos>4){for(;r<4;++r)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw At(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,e}if(this.len-this.pos>4){for(;r<5;++r)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;r<5;++r){if(this.pos>=this.len)throw At(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw At(this,8);const e=Ei(this.buf,this.pos+=4),r=Ei(this.buf,this.pos+=4);return new Ke(e,r)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const e=Hl(this.buf,this.pos);return this.pos+=Rt(e),e}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function lv(t){return new cv(t instanceof Uint8Array?t:t.subarray())}function tf(t,e,r){const n=lv(t);return e.decode(n,void 0,r)}function uv(t){let n,i=8192;return function(o){if(o<1||o>4096)return Jr(o);i+o>8192&&(n=Jr(8192),i=0);const a=n.subarray(i,i+=o);return i&7&&(i=(i|7)+1),a}}class Nn{constructor(e,r,n){S(this,"fn");S(this,"len");S(this,"next");S(this,"val");this.fn=e,this.len=r,this.next=void 0,this.val=n}}function Zs(){}class fv{constructor(e){S(this,"head");S(this,"tail");S(this,"len");S(this,"next");this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}}const dv=uv();function hv(t){return globalThis.Buffer!=null?Jr(t):dv(t)}class So{constructor(){S(this,"len");S(this,"head");S(this,"tail");S(this,"states");this.len=0,this.head=new Nn(Zs,0,0),this.tail=this.head,this.states=null}_push(e,r,n){return this.tail=this.tail.next=new Nn(e,r,n),this.len+=r,this}uint32(e){return this.len+=(this.tail=this.tail.next=new gv((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this}int32(e){return e<0?this._push(Si,10,Ke.fromNumber(e)):this.uint32(e)}sint32(e){return this.uint32((e<<1^e>>31)>>>0)}uint64(e){const r=Ke.fromBigInt(e);return this._push(Si,r.length(),r)}uint64Number(e){return this._push(Ml,Rt(e),e)}uint64String(e){return this.uint64(BigInt(e))}int64(e){return this.uint64(e)}int64Number(e){return this.uint64Number(e)}int64String(e){return this.uint64String(e)}sint64(e){const r=Ke.fromBigInt(e).zzEncode();return this._push(Si,r.length(),r)}sint64Number(e){const r=Ke.fromNumber(e).zzEncode();return this._push(Si,r.length(),r)}sint64String(e){return this.sint64(BigInt(e))}bool(e){return this._push(Js,1,e?1:0)}fixed32(e){return this._push(In,4,e>>>0)}sfixed32(e){return this.fixed32(e)}fixed64(e){const r=Ke.fromBigInt(e);return this._push(In,4,r.lo)._push(In,4,r.hi)}fixed64Number(e){const r=Ke.fromNumber(e);return this._push(In,4,r.lo)._push(In,4,r.hi)}fixed64String(e){return this.fixed64(BigInt(e))}sfixed64(e){return this.fixed64(e)}sfixed64Number(e){return this.fixed64Number(e)}sfixed64String(e){return this.fixed64String(e)}float(e){return this._push(ev,4,e)}double(e){return this._push(rv,8,e)}bytes(e){const r=e.length>>>0;return r===0?this._push(Js,1,0):this.uint32(r)._push(yv,r,e)}string(e){const r=ov(e);return r!==0?this.uint32(r)._push(ef,r,e):this._push(Js,1,0)}fork(){return this.states=new fv(this),this.head=this.tail=new Nn(Zs,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Nn(Zs,0,0),this.len=0),this}ldelim(){const e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=e.next,this.tail=r,this.len+=n),this}finish(){let e=this.head.next;const r=hv(this.len);let n=0;for(;e!=null;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r}}function Js(t,e,r){e[r]=t&255}function pv(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}class gv extends Nn{constructor(r,n){super(pv,r,n);S(this,"next");this.next=void 0}}function Si(t,e,r){for(;t.hi!==0;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}function In(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function yv(t,e,r){e.set(t,r)}globalThis.Buffer!=null&&(So.prototype.bytes=function(t){const e=t.length>>>0;return this.uint32(e),e>0&&this._push(mv,e,t),this},So.prototype.string=function(t){const e=globalThis.Buffer.byteLength(t);return this.uint32(e),e>0&&this._push(wv,e,t),this});function mv(t,e,r){e.set(t,r)}function wv(t,e,r){t.length<40?ef(t,e,r):e.utf8Write!=null?e.utf8Write(t,r):e.set(Tt(t),r)}function bv(){return new So}function rf(t,e){const r=bv();return e.encode(t,r,{lengthDelimited:!1}),r.finish()}var Ki;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})(Ki||(Ki={}));function nf(t,e,r,n){return{name:t,type:e,encode:r,decode:n}}function vv(t){function e(i){if(t[i.toString()]==null)throw new Error("Invalid enum value");return t[i]}const r=function(s,o){const a=e(s);o.int32(a)},n=function(s){const o=s.int32();return e(o)};return nf("enum",Ki.VARINT,r,n)}function sf(t,e){return nf("message",Ki.LENGTH_DELIMITED,t,e)}var Qe;(function(t){t.RSA="RSA",t.Ed25519="Ed25519",t.secp256k1="secp256k1"})(Qe||(Qe={}));var Ao;(function(t){t[t.RSA=0]="RSA",t[t.Ed25519=1]="Ed25519",t[t.secp256k1=2]="secp256k1"})(Ao||(Ao={}));(function(t){t.codec=()=>vv(Ao)})(Qe||(Qe={}));var rn;(function(t){let e;t.codec=()=>(e==null&&(e=sf((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),Qe.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={},o=n==null?r.len:r.pos+n;for(;r.pos<o;){const a=r.uint32();switch(a>>>3){case 1:{s.Type=Qe.codec().decode(r);break}case 2:{s.Data=r.bytes();break}default:{r.skipType(a&7);break}}}return s})),e),t.encode=r=>rf(r,t.codec()),t.decode=(r,n)=>tf(r,t.codec(),n)})(rn||(rn={}));var Pc;(function(t){let e;t.codec=()=>(e==null&&(e=sf((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),Qe.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={},o=n==null?r.len:r.pos+n;for(;r.pos<o;){const a=r.uint32();switch(a>>>3){case 1:{s.Type=Qe.codec().decode(r);break}case 2:{s.Data=r.bytes();break}default:{r.skipType(a&7);break}}}return s})),e),t.encode=r=>rf(r,t.codec()),t.decode=(r,n)=>tf(r,t.codec(),n)})(Pc||(Pc={}));const xv=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),sr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),or=new Uint32Array(64);class Ev extends Mu{constructor(){super(64,32,8,!1),this.A=sr[0]|0,this.B=sr[1]|0,this.C=sr[2]|0,this.D=sr[3]|0,this.E=sr[4]|0,this.F=sr[5]|0,this.G=sr[6]|0,this.H=sr[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:c}=this;return[e,r,n,i,s,o,a,c]}set(e,r,n,i,s,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let h=0;h<16;h++,r+=4)or[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){const p=or[h-15],m=or[h-2],y=_t(p,7)^_t(p,18)^p>>>3,b=_t(m,17)^_t(m,19)^m>>>10;or[h]=b+or[h-7]+y+or[h-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:c,G:f,H:u}=this;for(let h=0;h<64;h++){const p=_t(a,6)^_t(a,11)^_t(a,25),m=u+p+zw(a,c,f)+xv[h]+or[h]|0,b=(_t(n,2)^_t(n,13)^_t(n,22))+Gw(n,i,s)|0;u=f,f=c,c=a,a=o+m|0,o=s,s=i,i=n,n=m+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,c,f,u)}roundClean(){or.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const of=Lu(()=>new Ev);/*!
 * MIT License
 * 
 * Copyright (c) 2017-2024 Peculiar Ventures, LLC
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const Sv="[object ArrayBuffer]";class xe{static isArrayBuffer(e){return Object.prototype.toString.call(e)===Sv}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,r){if(e.constructor===r)return e;if(this.isArrayBuffer(e))return new r(e);if(this.isArrayBufferView(e))return new r(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,r){const n=xe.toUint8Array(e),i=xe.toUint8Array(r);if(n.length!==i.byteLength)return!1;for(let s=0;s<n.length;s++)if(n[s]!==i[s])return!1;return!0}static concat(...e){let r;Array.isArray(e[0])&&!(e[1]instanceof Function)||Array.isArray(e[0])&&e[1]instanceof Function?r=e[0]:e[e.length-1]instanceof Function?r=e.slice(0,e.length-1):r=e;let n=0;for(const o of r)n+=o.byteLength;const i=new Uint8Array(n);let s=0;for(const o of r){const a=this.toUint8Array(o);i.set(a,s),s+=a.length}return e[e.length-1]instanceof Function?this.toView(i,e[e.length-1]):i.buffer}}const Xs="string",Av=/^[0-9a-f\s]+$/i,Bv=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,kv=/^[a-zA-Z0-9-_]+$/;class Dc{static fromString(e){const r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n.buffer}static toString(e){const r=xe.toUint8Array(e);let n="";for(let s=0;s<r.length;s++)n+=String.fromCharCode(r[s]);return decodeURIComponent(escape(n))}}class Ot{static toString(e,r=!1){const n=xe.toArrayBuffer(e),i=new DataView(n);let s="";for(let o=0;o<n.byteLength;o+=2){const a=i.getUint16(o,r);s+=String.fromCharCode(a)}return s}static fromString(e,r=!1){const n=new ArrayBuffer(e.length*2),i=new DataView(n);for(let s=0;s<e.length;s++)i.setUint16(s*2,e.charCodeAt(s),r);return n}}class Te{static isHex(e){return typeof e===Xs&&Av.test(e)}static isBase64(e){return typeof e===Xs&&Bv.test(e)}static isBase64Url(e){return typeof e===Xs&&kv.test(e)}static ToString(e,r="utf8"){const n=xe.toUint8Array(e);switch(r.toLowerCase()){case"utf8":return this.ToUtf8String(n);case"binary":return this.ToBinary(n);case"hex":return this.ToHex(n);case"base64":return this.ToBase64(n);case"base64url":return this.ToBase64Url(n);case"utf16le":return Ot.toString(n,!0);case"utf16":case"utf16be":return Ot.toString(n);default:throw new Error(`Unknown type of encoding '${r}'`)}}static FromString(e,r="utf8"){if(!e)return new ArrayBuffer(0);switch(r.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return Ot.fromString(e,!0);case"utf16":case"utf16be":return Ot.fromString(e);default:throw new Error(`Unknown type of encoding '${r}'`)}}static ToBase64(e){const r=xe.toUint8Array(e);if(typeof btoa<"u"){const n=this.ToString(r,"binary");return btoa(n)}else return Buffer.from(r).toString("base64")}static FromBase64(e){const r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!Te.isBase64(r))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(r)):new Uint8Array(Buffer.from(r,"base64")).buffer}static FromBase64Url(e){const r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!Te.isBase64Url(r))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(r.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,r=Te.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.FromBinary(e);case"utf8":return Dc.fromString(e);case"utf16":case"utf16be":return Ot.fromString(e);case"utf16le":case"usc2":return Ot.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${r}'`)}}static ToUtf8String(e,r=Te.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.ToBinary(e);case"utf8":return Dc.toString(e);case"utf16":case"utf16be":return Ot.toString(e);case"utf16le":case"usc2":return Ot.toString(e,!0);default:throw new Error(`Unknown type of encoding '${r}'`)}}static FromBinary(e){const r=e.length,n=new Uint8Array(r);for(let i=0;i<r;i++)n[i]=e.charCodeAt(i);return n.buffer}static ToBinary(e){const r=xe.toUint8Array(e);let n="";for(let i=0;i<r.length;i++)n+=String.fromCharCode(r[i]);return n}static ToHex(e){const r=xe.toUint8Array(e);let n="";const i=r.length;for(let s=0;s<i;s++){const o=r[s];o<16&&(n+="0"),n+=o.toString(16)}return n}static FromHex(e){let r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!Te.isHex(r))throw new TypeError("Argument 'hexString' is not HEX encoded");r.length%2&&(r=`0${r}`);const n=new Uint8Array(r.length/2);for(let i=0;i<r.length;i=i+2){const s=r.slice(i,i+2);n[i/2]=parseInt(s,16)}return n.buffer}static ToUtf16String(e,r=!1){return Ot.toString(e,r)}static FromUtf16String(e,r=!1){return Ot.fromString(e,r)}static Base64Padding(e){const r=4-e.length%4;if(r<4)for(let n=0;n<r;n++)e+="=";return e}static formatString(e){return(e==null?void 0:e.replace(/[\n\r\t ]/g,""))||""}}Te.DEFAULT_UTF8_ENCODING="utf8";/*!
 Copyright (c) Peculiar Ventures, LLC
*/function nn(t,e){let r=0;if(t.length===1)return t[0];for(let n=t.length-1;n>=0;n--)r+=t[t.length-1-n]*Math.pow(2,e*n);return r}function Cr(t,e,r=-1){const n=r;let i=t,s=0,o=Math.pow(2,e);for(let a=1;a<8;a++){if(t<o){let c;if(n<0)c=new ArrayBuffer(a),s=a;else{if(n<a)return new ArrayBuffer(0);c=new ArrayBuffer(n),s=n}const f=new Uint8Array(c);for(let u=a-1;u>=0;u--){const h=Math.pow(2,u*e);f[s-u-1]=Math.floor(i/h),i-=f[s-u-1]*h}return c}o*=Math.pow(2,e)}return new ArrayBuffer(0)}function Bo(...t){let e=0,r=0;for(const s of t)e+=s.length;const n=new ArrayBuffer(e),i=new Uint8Array(n);for(const s of t)i.set(s,r),r+=s.length;return i}function af(){const t=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const a=t[0]===255&&t[1]&128,c=t[0]===0&&(t[1]&128)===0;(a||c)&&this.warnings.push("Needlessly long format")}const e=new ArrayBuffer(this.valueHex.byteLength),r=new Uint8Array(e);for(let a=0;a<this.valueHex.byteLength;a++)r[a]=0;r[0]=t[0]&128;const n=nn(r,8),i=new ArrayBuffer(this.valueHex.byteLength),s=new Uint8Array(i);for(let a=0;a<this.valueHex.byteLength;a++)s[a]=t[a];return s[0]&=127,nn(s,8)-n}function Tv(t){const e=t<0?t*-1:t;let r=128;for(let n=1;n<8;n++){if(e<=r){if(t<0){const o=r-e,a=Cr(o,8,n),c=new Uint8Array(a);return c[0]|=128,a}let i=Cr(e,8,n),s=new Uint8Array(i);if(s[0]&128){const o=i.slice(0),a=new Uint8Array(o);i=new ArrayBuffer(i.byteLength+1),s=new Uint8Array(i);for(let c=0;c<o.byteLength;c++)s[c+1]=a[c];s[0]=0}return i}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function Iv(t,e){if(t.byteLength!==e.byteLength)return!1;const r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0}function lt(t,e){const r=t.toString(10);if(e<r.length)return"";const n=e-r.length,i=new Array(n);for(let o=0;o<n;o++)i[o]="0";return i.join("").concat(r)}/*!
 * Copyright (c) 2014, GMO GlobalSign
 * Copyright (c) 2015-2022, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */function Yi(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function va(t){let e=0,r=0;for(let i=0;i<t.length;i++){const s=t[i];e+=s.byteLength}const n=new Uint8Array(e);for(let i=0;i<t.length;i++){const s=t[i];n.set(new Uint8Array(s),r),r+=s.byteLength}return n.buffer}function Xt(t,e,r,n){return e instanceof Uint8Array?e.byteLength?r<0?(t.error="Wrong parameter: inputOffset less than zero",!1):n<0?(t.error="Wrong parameter: inputLength less than zero",!1):e.byteLength-r-n<0?(t.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(t.error="Wrong parameter: inputBuffer has zero length",!1):(t.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class xa{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return va(this.items)}}const Cn=[new Uint8Array([1])],$c="0123456789",gn="",It=new ArrayBuffer(0),Ea=new Uint8Array(0),jn="EndOfContent",cf="OCTET STRING",lf="BIT STRING";function Qt(t){var e;return e=class extends t{constructor(...n){var i;super(...n);const s=n[0]||{};this.isHexOnly=(i=s.isHexOnly)!==null&&i!==void 0?i:!1,this.valueHexView=s.valueHex?xe.toUint8Array(s.valueHex):Ea}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(n){this.valueHexView=new Uint8Array(n)}fromBER(n,i,s){const o=n instanceof ArrayBuffer?new Uint8Array(n):n;if(!Xt(this,o,i,s))return-1;const a=i+s;return this.valueHexView=o.subarray(i,a),this.valueHexView.length?(this.blockLength=s,a):(this.warnings.push("Zero buffer length"),i)}toBER(n=!1){return this.isHexOnly?n?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",It)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:Te.ToHex(this.valueHexView)}}},e.NAME="hexBlock",e}class Rr{constructor({blockLength:e=0,error:r=gn,warnings:n=[],valueBeforeDecode:i=Ea}={}){this.blockLength=e,this.error=r,this.warnings=n,this.valueBeforeDecodeView=xe.toUint8Array(i)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:Te.ToHex(this.valueBeforeDecodeView)}}}Rr.NAME="baseBlock";class ot extends Rr{fromBER(e,r,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}ot.NAME="valueBlock";class uf extends Qt(Rr){constructor({idBlock:e={}}={}){var r,n,i,s;super(),e?(this.isHexOnly=(r=e.isHexOnly)!==null&&r!==void 0?r:!1,this.valueHexView=e.valueHex?xe.toUint8Array(e.valueHex):Ea,this.tagClass=(n=e.tagClass)!==null&&n!==void 0?n:-1,this.tagNumber=(i=e.tagNumber)!==null&&i!==void 0?i:-1,this.isConstructed=(s=e.isConstructed)!==null&&s!==void 0?s:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let r=0;switch(this.tagClass){case 1:r|=0;break;case 2:r|=64;break;case 3:r|=128;break;case 4:r|=192;break;default:return this.error="Unknown tag class",It}if(this.isConstructed&&(r|=32),this.tagNumber<31&&!this.isHexOnly){const i=new Uint8Array(1);if(!e){let s=this.tagNumber;s&=31,r|=s,i[0]=r}return i.buffer}if(!this.isHexOnly){const i=Cr(this.tagNumber,7),s=new Uint8Array(i),o=i.byteLength,a=new Uint8Array(o+1);if(a[0]=r|31,!e){for(let c=0;c<o-1;c++)a[c+1]=s[c]|128;a[o]=s[o-1]}return a.buffer}const n=new Uint8Array(this.valueHexView.byteLength+1);if(n[0]=r|31,!e){const i=this.valueHexView;for(let s=0;s<i.length-1;s++)n[s+1]=i[s]|128;n[this.valueHexView.byteLength]=i[i.length-1]}return n.buffer}fromBER(e,r,n){const i=xe.toUint8Array(e);if(!Xt(this,i,r,n))return-1;const s=i.subarray(r,r+n);if(s.length===0)return this.error="Zero buffer length",-1;switch(s[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(s[0]&32)===32,this.isHexOnly=!1;const a=s[0]&31;if(a!==31)this.tagNumber=a,this.blockLength=1;else{let c=1,f=this.valueHexView=new Uint8Array(255),u=255;for(;s[c]&128;){if(f[c-1]=s[c]&127,c++,c>=s.length)return this.error="End of input reached before message was fully decoded",-1;if(c===u){u+=255;const p=new Uint8Array(u);for(let m=0;m<f.length;m++)p[m]=f[m];f=this.valueHexView=new Uint8Array(u)}}this.blockLength=c+1,f[c-1]=s[c]&127;const h=new Uint8Array(c);for(let p=0;p<c;p++)h[p]=f[p];f=this.valueHexView=new Uint8Array(c),f.set(h),this.blockLength<=9?this.tagNumber=nn(f,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return r+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}uf.NAME="identificationBlock";class ff extends Rr{constructor({lenBlock:e={}}={}){var r,n,i;super(),this.isIndefiniteForm=(r=e.isIndefiniteForm)!==null&&r!==void 0?r:!1,this.longFormUsed=(n=e.longFormUsed)!==null&&n!==void 0?n:!1,this.length=(i=e.length)!==null&&i!==void 0?i:0}fromBER(e,r,n){const i=xe.toUint8Array(e);if(!Xt(this,i,r,n))return-1;const s=i.subarray(r,r+n);if(s.length===0)return this.error="Zero buffer length",-1;if(s[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=s[0]===128,this.isIndefiniteForm)return this.blockLength=1,r+this.blockLength;if(this.longFormUsed=!!(s[0]&128),this.longFormUsed===!1)return this.length=s[0],this.blockLength=1,r+this.blockLength;const o=s[0]&127;if(o>8)return this.error="Too big integer",-1;if(o+1>s.length)return this.error="End of input reached before message was fully decoded",-1;const a=r+1,c=i.subarray(a,a+o);return c[o-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=nn(c,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=o+1,r+this.blockLength}toBER(e=!1){let r,n;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return r=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(r),n[0]=128),r;if(this.longFormUsed){const i=Cr(this.length,8);if(i.byteLength>127)return this.error="Too big length",It;if(r=new ArrayBuffer(i.byteLength+1),e)return r;const s=new Uint8Array(i);n=new Uint8Array(r),n[0]=i.byteLength|128;for(let o=0;o<i.byteLength;o++)n[o+1]=s[o];return r}return r=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(r),n[0]=this.length),r}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}ff.NAME="lengthBlock";const G={};class et extends Rr{constructor({name:e=gn,optional:r=!1,primitiveSchema:n,...i}={},s){super(i),this.name=e,this.optional=r,n&&(this.primitiveSchema=n),this.idBlock=new uf(i),this.lenBlock=new ff(i),this.valueBlock=s?new s(i):new ot(i)}fromBER(e,r,n){const i=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),i)}toBER(e,r){const n=r||new xa;r||df(this);const i=this.idBlock.toBER(e);if(n.write(i),this.lenBlock.isIndefiniteForm)n.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,n),n.write(new ArrayBuffer(2));else{const s=this.valueBlock.toBER(e);this.lenBlock.length=s.byteLength;const o=this.lenBlock.toBER(e);n.write(o),n.write(s)}return r?It:n.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return e==="ascii"?this.onAsciiEncoding():Te.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${Te.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;const r=this.toBER(),n=e.toBER();return Iv(r,n)}}et.NAME="BaseBlock";function df(t){if(t instanceof G.Constructed)for(const e of t.valueBlock.value)df(e)&&(t.lenBlock.isIndefiniteForm=!0);return!!t.lenBlock.isIndefiniteForm}class hf extends et{constructor({value:e=gn,...r}={},n){super(r,n),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,r,n){const i=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),i)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}hf.NAME="BaseStringBlock";class pf extends Qt(ot){constructor({isHexOnly:e=!0,...r}={}){super(r),this.isHexOnly=e}}pf.NAME="PrimitiveValueBlock";var gf;class yf extends et{constructor(e={}){super(e,pf),this.idBlock.isConstructed=!1}}gf=yf;G.Primitive=gf;yf.NAME="PRIMITIVE";function Cv(t,e){if(t instanceof e)return t;const r=new e;return r.idBlock=t.idBlock,r.lenBlock=t.lenBlock,r.warnings=t.warnings,r.valueBeforeDecodeView=t.valueBeforeDecodeView,r}function bs(t,e=0,r=t.length){const n=e;let i=new et({},ot);const s=new Rr;if(!Xt(s,t,e,r))return i.error=s.error,{offset:-1,result:i};if(!t.subarray(e,e+r).length)return i.error="Zero buffer length",{offset:-1,result:i};let a=i.idBlock.fromBER(t,e,r);if(i.idBlock.warnings.length&&i.warnings.concat(i.idBlock.warnings),a===-1)return i.error=i.idBlock.error,{offset:-1,result:i};if(e=a,r-=i.idBlock.blockLength,a=i.lenBlock.fromBER(t,e,r),i.lenBlock.warnings.length&&i.warnings.concat(i.lenBlock.warnings),a===-1)return i.error=i.lenBlock.error,{offset:-1,result:i};if(e=a,r-=i.lenBlock.blockLength,!i.idBlock.isConstructed&&i.lenBlock.isIndefiniteForm)return i.error="Indefinite length form used for primitive encoding form",{offset:-1,result:i};let c=et;switch(i.idBlock.tagClass){case 1:if(i.idBlock.tagNumber>=37&&i.idBlock.isHexOnly===!1)return i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:i};switch(i.idBlock.tagNumber){case 0:if(i.idBlock.isConstructed&&i.lenBlock.length>0)return i.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:i};c=G.EndOfContent;break;case 1:c=G.Boolean;break;case 2:c=G.Integer;break;case 3:c=G.BitString;break;case 4:c=G.OctetString;break;case 5:c=G.Null;break;case 6:c=G.ObjectIdentifier;break;case 10:c=G.Enumerated;break;case 12:c=G.Utf8String;break;case 13:c=G.RelativeObjectIdentifier;break;case 14:c=G.TIME;break;case 15:return i.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:i};case 16:c=G.Sequence;break;case 17:c=G.Set;break;case 18:c=G.NumericString;break;case 19:c=G.PrintableString;break;case 20:c=G.TeletexString;break;case 21:c=G.VideotexString;break;case 22:c=G.IA5String;break;case 23:c=G.UTCTime;break;case 24:c=G.GeneralizedTime;break;case 25:c=G.GraphicString;break;case 26:c=G.VisibleString;break;case 27:c=G.GeneralString;break;case 28:c=G.UniversalString;break;case 29:c=G.CharacterString;break;case 30:c=G.BmpString;break;case 31:c=G.DATE;break;case 32:c=G.TimeOfDay;break;case 33:c=G.DateTime;break;case 34:c=G.Duration;break;default:{const f=i.idBlock.isConstructed?new G.Constructed:new G.Primitive;f.idBlock=i.idBlock,f.lenBlock=i.lenBlock,f.warnings=i.warnings,i=f}}break;case 2:case 3:case 4:default:c=i.idBlock.isConstructed?G.Constructed:G.Primitive}return i=Cv(i,c),a=i.fromBER(t,e,i.lenBlock.isIndefiniteForm?r:i.lenBlock.length),i.valueBeforeDecodeView=t.subarray(n,n+i.blockLength),{offset:a,result:i}}function Nv(t){if(!t.byteLength){const e=new et({},ot);return e.error="Input buffer has zero length",{offset:-1,result:e}}return bs(xe.toUint8Array(t).slice(),0,t.byteLength)}function _v(t,e){return t?1:e}class dr extends ot{constructor({value:e=[],isIndefiniteForm:r=!1,...n}={}){super(n),this.value=e,this.isIndefiniteForm=r}fromBER(e,r,n){const i=xe.toUint8Array(e);if(!Xt(this,i,r,n))return-1;if(this.valueBeforeDecodeView=i.subarray(r,r+n),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),r;let s=r;for(;_v(this.isIndefiniteForm,n)>0;){const o=bs(i,s,n);if(o.offset===-1)return this.error=o.result.error,this.warnings.concat(o.result.warnings),-1;if(s=o.offset,this.blockLength+=o.result.blockLength,n-=o.result.blockLength,this.value.push(o.result),this.isIndefiniteForm&&o.result.constructor.NAME===jn)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===jn?this.value.pop():this.warnings.push("No EndOfContent block encoded")),s}toBER(e,r){const n=r||new xa;for(let i=0;i<this.value.length;i++)this.value[i].toBER(e,n);return r?It:n.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const r of this.value)e.value.push(r.toJSON());return e}}dr.NAME="ConstructedValueBlock";var mf;class yn extends et{constructor(e={}){super(e,dr),this.idBlock.isConstructed=!0}fromBER(e,r,n){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const i=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),i)}onAsciiEncoding(){const e=[];for(const n of this.valueBlock.value)e.push(n.toString("ascii").split(`
`).map(i=>`  ${i}`).join(`
`));const r=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${r} :
${e.join(`
`)}`:`${r} :`}}mf=yn;G.Constructed=mf;yn.NAME="CONSTRUCTED";class wf extends ot{fromBER(e,r,n){return r}toBER(e){return It}}wf.override="EndOfContentValueBlock";var bf;class vf extends et{constructor(e={}){super(e,wf),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}bf=vf;G.EndOfContent=bf;vf.NAME=jn;var xf;class Sa extends et{constructor(e={}){super(e,ot),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,r,n){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=n,r+n>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):r+n}toBER(e,r){const n=new ArrayBuffer(2);if(!e){const i=new Uint8Array(n);i[0]=5,i[1]=0}return r&&r.write(n),n}onAsciiEncoding(){return`${this.constructor.NAME}`}}xf=Sa;G.Null=xf;Sa.NAME="NULL";class Ef extends Qt(ot){constructor({value:e,...r}={}){super(r),r.valueHex?this.valueHexView=xe.toUint8Array(r.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,r,n){const i=xe.toUint8Array(e);return Xt(this,i,r,n)?(this.valueHexView=i.subarray(r,r+n),n>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,af.call(this),this.blockLength=n,r+n):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}Ef.NAME="BooleanValueBlock";var Sf;let Af=class extends et{constructor(e={}){super(e,Ef),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};Sf=Af;G.Boolean=Sf;Af.NAME="BOOLEAN";class Bf extends Qt(dr){constructor({isConstructed:e=!1,...r}={}){super(r),this.isConstructed=e}fromBER(e,r,n){let i=0;if(this.isConstructed){if(this.isHexOnly=!1,i=dr.prototype.fromBER.call(this,e,r,n),i===-1)return i;for(let s=0;s<this.value.length;s++){const o=this.value[s].constructor.NAME;if(o===jn){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(o!==cf)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,i=super.fromBER(e,r,n),this.blockLength=n;return i}toBER(e,r){return this.isConstructed?dr.prototype.toBER.call(this,e,r):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}Bf.NAME="OctetStringValueBlock";var kf;class vs extends et{constructor({idBlock:e={},lenBlock:r={},...n}={}){var i,s;(i=n.isConstructed)!==null&&i!==void 0||(n.isConstructed=!!(!((s=n.value)===null||s===void 0)&&s.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...r,isIndefiniteForm:!!n.isIndefiniteForm},...n},Bf),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,r,n){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,n===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),r;if(!this.valueBlock.isConstructed){const s=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(r,r+n);try{if(s.byteLength){const o=bs(s,0,s.byteLength);o.offset!==-1&&o.offset===n&&(this.valueBlock.value=[o.result])}}catch{}}return super.fromBER(e,r,n)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?yn.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${Te.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const e=[];for(const r of this.valueBlock.value)r instanceof vs&&e.push(r.valueBlock.valueHexView);return xe.concat(e)}}kf=vs;G.OctetString=kf;vs.NAME=cf;class Tf extends Qt(dr){constructor({unusedBits:e=0,isConstructed:r=!1,...n}={}){super(n),this.unusedBits=e,this.isConstructed=r,this.blockLength=this.valueHexView.byteLength}fromBER(e,r,n){if(!n)return r;let i=-1;if(this.isConstructed){if(i=dr.prototype.fromBER.call(this,e,r,n),i===-1)return i;for(const a of this.value){const c=a.constructor.NAME;if(c===jn){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(c!==lf)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const f=a.valueBlock;if(this.unusedBits>0&&f.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=f.unusedBits}return i}const s=xe.toUint8Array(e);if(!Xt(this,s,r,n))return-1;const o=s.subarray(r,r+n);if(this.unusedBits=o[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const a=o.subarray(1);try{if(a.byteLength){const c=bs(a,0,a.byteLength);c.offset!==-1&&c.offset===n-1&&(this.value=[c.result])}}catch{}}return this.valueHexView=o.subarray(1),this.blockLength=o.length,r+n}toBER(e,r){if(this.isConstructed)return dr.prototype.toBER.call(this,e,r);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return It;const n=new Uint8Array(this.valueHexView.length+1);return n[0]=this.unusedBits,n.set(this.valueHexView,1),n.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}Tf.NAME="BitStringValueBlock";var If;class Aa extends et{constructor({idBlock:e={},lenBlock:r={},...n}={}){var i,s;(i=n.isConstructed)!==null&&i!==void 0||(n.isConstructed=!!(!((s=n.value)===null||s===void 0)&&s.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...r,isIndefiniteForm:!!n.isIndefiniteForm},...n},Tf),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,r,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,r,n)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return yn.prototype.onAsciiEncoding.call(this);{const e=[],r=this.valueBlock.valueHexView;for(const i of r)e.push(i.toString(2).padStart(8,"0"));const n=e.join("");return`${this.constructor.NAME} : ${n.substring(0,n.length-this.valueBlock.unusedBits)}`}}}If=Aa;G.BitString=If;Aa.NAME=lf;var Cf;function Ov(t,e){const r=new Uint8Array([0]),n=new Uint8Array(t),i=new Uint8Array(e);let s=n.slice(0);const o=s.length-1,a=i.slice(0),c=a.length-1;let f=0;const u=c<o?o:c;let h=0;for(let p=u;p>=0;p--,h++){switch(!0){case h<a.length:f=s[o-h]+a[c-h]+r[0];break;default:f=s[o-h]+r[0]}switch(r[0]=f/10,!0){case h>=s.length:s=Bo(new Uint8Array([f%10]),s);break;default:s[o-h]=f%10}}return r[0]>0&&(s=Bo(r,s)),s}function Rc(t){if(t>=Cn.length)for(let e=Cn.length;e<=t;e++){const r=new Uint8Array([0]);let n=Cn[e-1].slice(0);for(let i=n.length-1;i>=0;i--){const s=new Uint8Array([(n[i]<<1)+r[0]]);r[0]=s[0]/10,n[i]=s[0]%10}r[0]>0&&(n=Bo(r,n)),Cn.push(n)}return Cn[t]}function Uv(t,e){let r=0;const n=new Uint8Array(t),i=new Uint8Array(e),s=n.slice(0),o=s.length-1,a=i.slice(0),c=a.length-1;let f,u=0;for(let h=c;h>=0;h--,u++)switch(f=s[o-u]-a[c-u]-r,!0){case f<0:r=1,s[o-u]=f+10;break;default:r=0,s[o-u]=f}if(r>0)for(let h=o-c+1;h>=0;h--,u++)if(f=s[o-u]-r,f<0)r=1,s[o-u]=f+10;else{r=0,s[o-u]=f;break}return s.slice()}class Ba extends Qt(ot){constructor({value:e,...r}={}){super(r),this._valueDec=0,r.valueHex&&this.setValueHex(),e!==void 0&&(this.valueDec=e)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=af.call(this)))}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(Tv(e))}get valueDec(){return this._valueDec}fromDER(e,r,n,i=0){const s=this.fromBER(e,r,n);if(s===-1)return s;const o=this.valueHexView;return o[0]===0&&o[1]&128?this.valueHexView=o.subarray(1):i!==0&&o.length<i&&(i-o.length>1&&(i=o.length+1),this.valueHexView=o.subarray(i-o.length)),s}toDER(e=!1){const r=this.valueHexView;switch(!0){case(r[0]&128)!==0:{const n=new Uint8Array(this.valueHexView.length+1);n[0]=0,n.set(r,1),this.valueHexView=n}break;case(r[0]===0&&(r[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(e)}fromBER(e,r,n){const i=super.fromBER(e,r,n);return i===-1||this.setValueHex(),i}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=this.valueHexView.length*8-1;let r=new Uint8Array(this.valueHexView.length*8/3),n=0,i;const s=this.valueHexView;let o="",a=!1;for(let c=s.byteLength-1;c>=0;c--){i=s[c];for(let f=0;f<8;f++){if((i&1)===1)switch(n){case e:r=Uv(Rc(n),r),o="-";break;default:r=Ov(r,Rc(n))}n++,i>>=1}}for(let c=0;c<r.length;c++)r[c]&&(a=!0),a&&(o+=$c.charAt(r[c]));return a===!1&&(o+=$c.charAt(0)),o}}Cf=Ba;Ba.NAME="IntegerValueBlock";Object.defineProperty(Cf.prototype,"valueHex",{set:function(t){this.valueHexView=new Uint8Array(t),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});var Nf;class Zt extends et{constructor(e={}){super(e,Ba),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return Yi(),BigInt(this.valueBlock.toString())}static fromBigInt(e){Yi();const r=BigInt(e),n=new xa,i=r.toString(16).replace(/^-/,""),s=new Uint8Array(Te.FromHex(i));if(r<0){const a=new Uint8Array(s.length+(s[0]&128?1:0));a[0]|=128;const f=BigInt(`0x${Te.ToHex(a)}`)+r,u=xe.toUint8Array(Te.FromHex(f.toString(16)));u[0]|=128,n.write(u)}else s[0]&128&&n.write(new Uint8Array([0])),n.write(s);return new Zt({valueHex:n.final()})}convertToDER(){const e=new Zt({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new Zt({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}Nf=Zt;G.Integer=Nf;Zt.NAME="INTEGER";var _f;class Of extends Zt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}_f=Of;G.Enumerated=_f;Of.NAME="ENUMERATED";class ko extends Qt(ot){constructor({valueDec:e=-1,isFirstSid:r=!1,...n}={}){super(n),this.valueDec=e,this.isFirstSid=r}fromBER(e,r,n){if(!n)return r;const i=xe.toUint8Array(e);if(!Xt(this,i,r,n))return-1;const s=i.subarray(r,r+n);this.valueHexView=new Uint8Array(n);for(let a=0;a<n&&(this.valueHexView[a]=s[a]&127,this.blockLength++,!!(s[a]&128));a++);const o=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength;a++)o[a]=this.valueHexView[a];return this.valueHexView=o,s[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=nn(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}set valueBigInt(e){Yi();let r=BigInt(e).toString(2);for(;r.length%7;)r="0"+r;const n=new Uint8Array(r.length/7);for(let i=0;i<n.length;i++)n[i]=parseInt(r.slice(i*7,i*7+7),2)+(i+1<n.length?128:0);this.fromBER(n.buffer,0,n.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const i=this.valueHexView,s=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength-1;o++)s[o]=i[o]|128;return s[this.blockLength-1]=i[this.blockLength-1],s.buffer}const r=Cr(this.valueDec,7);if(r.byteLength===0)return this.error="Error during encoding SID value",It;const n=new Uint8Array(r.byteLength);if(!e){const i=new Uint8Array(r),s=r.byteLength-1;for(let o=0;o<s;o++)n[o]=i[o]|128;n[s]=i[s]}return n}toString(){let e="";if(this.isHexOnly)e=Te.ToHex(this.valueHexView);else if(this.isFirstSid){let r=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",r-=40):(e="2.",r-=80),e+=r.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}ko.NAME="sidBlock";class Uf extends ot{constructor({value:e=gn,...r}={}){super(r),this.value=[],e&&this.fromString(e)}fromBER(e,r,n){let i=r;for(;n>0;){const s=new ko;if(i=s.fromBER(e,i,n),i===-1)return this.blockLength=0,this.error=s.error,i;this.value.length===0&&(s.isFirstSid=!0),this.blockLength+=s.blockLength,n-=s.blockLength,this.value.push(s)}return i}toBER(e){const r=[];for(let n=0;n<this.value.length;n++){const i=this.value[n].toBER(e);if(i.byteLength===0)return this.error=this.value[n].error,It;r.push(i)}return va(r)}fromString(e){this.value=[];let r=0,n=0,i="",s=!1;do if(n=e.indexOf(".",r),n===-1?i=e.substring(r):i=e.substring(r,n),r=n+1,s){const o=this.value[0];let a=0;switch(o.valueDec){case 0:break;case 1:a=40;break;case 2:a=80;break;default:this.value=[];return}const c=parseInt(i,10);if(isNaN(c))return;o.valueDec=c+a,s=!1}else{const o=new ko;if(i>Number.MAX_SAFE_INTEGER){Yi();const a=BigInt(i);o.valueBigInt=a}else if(o.valueDec=parseInt(i,10),isNaN(o.valueDec))return;this.value.length||(o.isFirstSid=!0,s=!0),this.value.push(o)}while(n!==-1)}toString(){let e="",r=!1;for(let n=0;n<this.value.length;n++){r=this.value[n].isHexOnly;let i=this.value[n].toString();n!==0&&(e=`${e}.`),r?(i=`{${i}}`,this.value[n].isFirstSid?e=`2.{${i} - 80}`:e+=i):e+=i}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}}Uf.NAME="ObjectIdentifierValueBlock";var Pf;class ka extends et{constructor(e={}){super(e,Uf),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}Pf=ka;G.ObjectIdentifier=Pf;ka.NAME="OBJECT IDENTIFIER";class To extends Qt(Rr){constructor({valueDec:e=0,...r}={}){super(r),this.valueDec=e}fromBER(e,r,n){if(n===0)return r;const i=xe.toUint8Array(e);if(!Xt(this,i,r,n))return-1;const s=i.subarray(r,r+n);this.valueHexView=new Uint8Array(n);for(let a=0;a<n&&(this.valueHexView[a]=s[a]&127,this.blockLength++,!!(s[a]&128));a++);const o=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength;a++)o[a]=this.valueHexView[a];return this.valueHexView=o,s[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=nn(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const i=this.valueHexView,s=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength-1;o++)s[o]=i[o]|128;return s[this.blockLength-1]=i[this.blockLength-1],s.buffer}const r=Cr(this.valueDec,7);if(r.byteLength===0)return this.error="Error during encoding SID value",It;const n=new Uint8Array(r.byteLength);if(!e){const i=new Uint8Array(r),s=r.byteLength-1;for(let o=0;o<s;o++)n[o]=i[o]|128;n[s]=i[s]}return n.buffer}toString(){let e="";return this.isHexOnly?e=Te.ToHex(this.valueHexView):e=this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}To.NAME="relativeSidBlock";class Df extends ot{constructor({value:e=gn,...r}={}){super(r),this.value=[],e&&this.fromString(e)}fromBER(e,r,n){let i=r;for(;n>0;){const s=new To;if(i=s.fromBER(e,i,n),i===-1)return this.blockLength=0,this.error=s.error,i;this.blockLength+=s.blockLength,n-=s.blockLength,this.value.push(s)}return i}toBER(e,r){const n=[];for(let i=0;i<this.value.length;i++){const s=this.value[i].toBER(e);if(s.byteLength===0)return this.error=this.value[i].error,It;n.push(s)}return va(n)}fromString(e){this.value=[];let r=0,n=0,i="";do{n=e.indexOf(".",r),n===-1?i=e.substring(r):i=e.substring(r,n),r=n+1;const s=new To;if(s.valueDec=parseInt(i,10),isNaN(s.valueDec))return!0;this.value.push(s)}while(n!==-1);return!0}toString(){let e="",r=!1;for(let n=0;n<this.value.length;n++){r=this.value[n].isHexOnly;let i=this.value[n].toString();n!==0&&(e=`${e}.`),r&&(i=`{${i}}`),e+=i}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}}Df.NAME="RelativeObjectIdentifierValueBlock";var $f;class Rf extends et{constructor(e={}){super(e,Df),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}$f=Rf;G.RelativeObjectIdentifier=$f;Rf.NAME="RelativeObjectIdentifier";var Lf;class Pn extends yn{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}Lf=Pn;G.Sequence=Lf;Pn.NAME="SEQUENCE";var Ff;let Mf=class extends yn{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};Ff=Mf;G.Set=Ff;Mf.NAME="SET";class Hf extends Qt(ot){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=gn}toJSON(){return{...super.toJSON(),value:this.value}}}Hf.NAME="StringValueBlock";class Vf extends Hf{}Vf.NAME="SimpleStringValueBlock";class pt extends hf{constructor({...e}={}){super(e,Vf)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,xe.toUint8Array(e))}fromString(e){const r=e.length,n=this.valueBlock.valueHexView=new Uint8Array(r);for(let i=0;i<r;i++)n[i]=e.charCodeAt(i);this.valueBlock.value=e}}pt.NAME="SIMPLE STRING";class jf extends pt{fromBuffer(e){this.valueBlock.valueHexView=xe.toUint8Array(e);try{this.valueBlock.value=Te.ToUtf8String(e)}catch(r){this.warnings.push(`Error during "decodeURIComponent": ${r}, using raw string`),this.valueBlock.value=Te.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(Te.FromUtf8String(e)),this.valueBlock.value=e}}jf.NAME="Utf8StringValueBlock";var zf;class Lr extends jf{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}zf=Lr;G.Utf8String=zf;Lr.NAME="UTF8String";class Gf extends pt{fromBuffer(e){this.valueBlock.value=Te.ToUtf16String(e),this.valueBlock.valueHexView=xe.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(Te.FromUtf16String(e))}}Gf.NAME="BmpStringValueBlock";var qf;class Wf extends Gf{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}qf=Wf;G.BmpString=qf;Wf.NAME="BMPString";class Kf extends pt{fromBuffer(e){const r=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),n=new Uint8Array(r);for(let i=0;i<n.length;i+=4)n[i]=n[i+3],n[i+1]=n[i+2],n[i+2]=0,n[i+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(r))}fromString(e){const r=e.length,n=this.valueBlock.valueHexView=new Uint8Array(r*4);for(let i=0;i<r;i++){const s=Cr(e.charCodeAt(i),8),o=new Uint8Array(s);if(o.length>4)continue;const a=4-o.length;for(let c=o.length-1;c>=0;c--)n[i*4+c+a]=o[c]}this.valueBlock.value=e}}Kf.NAME="UniversalStringValueBlock";var Yf;class Zf extends Kf{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}Yf=Zf;G.UniversalString=Yf;Zf.NAME="UniversalString";var Jf;class Xf extends pt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}Jf=Xf;G.NumericString=Jf;Xf.NAME="NumericString";var Qf;class ed extends pt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}Qf=ed;G.PrintableString=Qf;ed.NAME="PrintableString";var td;class rd extends pt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}td=rd;G.TeletexString=td;rd.NAME="TeletexString";var nd;class id extends pt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}nd=id;G.VideotexString=nd;id.NAME="VideotexString";var sd;class od extends pt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}sd=od;G.IA5String=sd;od.NAME="IA5String";var ad;class cd extends pt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}ad=cd;G.GraphicString=ad;cd.NAME="GraphicString";var ld;class Ta extends pt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}ld=Ta;G.VisibleString=ld;Ta.NAME="VisibleString";var ud;class fd extends pt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}ud=fd;G.GeneralString=ud;fd.NAME="GeneralString";var dd;class hd extends pt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}dd=hd;G.CharacterString=dd;hd.NAME="CharacterString";var pd;class Ia extends Ta{constructor({value:e,valueDate:r,...n}={}){if(super(n),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let i=0;i<e.length;i++)this.valueBlock.valueHexView[i]=e.charCodeAt(i)}r&&(this.fromDate(r),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,xe.toUint8Array(e)))}toBuffer(){const e=this.toString(),r=new ArrayBuffer(e.length),n=new Uint8Array(r);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return r}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const n=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(n===null){this.error="Wrong input string for conversion";return}const i=parseInt(n[1],10);i>=50?this.year=1900+i:this.year=2e3+i,this.month=parseInt(n[2],10),this.day=parseInt(n[3],10),this.hour=parseInt(n[4],10),this.minute=parseInt(n[5],10),this.second=parseInt(n[6],10)}toString(e="iso"){if(e==="iso"){const r=new Array(7);return r[0]=lt(this.year<2e3?this.year-1900:this.year-2e3,2),r[1]=lt(this.month,2),r[2]=lt(this.day,2),r[3]=lt(this.hour,2),r[4]=lt(this.minute,2),r[5]=lt(this.second,2),r[6]="Z",r.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}pd=Ia;G.UTCTime=pd;Ia.NAME="UTCTime";var gd;class yd extends Ia{constructor(e={}){var r;super(e),(r=this.millisecond)!==null&&r!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let r=!1,n="",i="",s=0,o,a=0,c=0;if(e[e.length-1]==="Z")n=e.substring(0,e.length-1),r=!0;else{const h=new Number(e[e.length-1]);if(isNaN(h.valueOf()))throw new Error("Wrong input string for conversion");n=e}if(r){if(n.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(n.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let h=1,p=n.indexOf("+"),m="";if(p===-1&&(p=n.indexOf("-"),h=-1),p!==-1){if(m=n.substring(p+1),n=n.substring(0,p),m.length!==2&&m.length!==4)throw new Error("Wrong input string for conversion");let y=parseInt(m.substring(0,2),10);if(isNaN(y.valueOf()))throw new Error("Wrong input string for conversion");if(a=h*y,m.length===4){if(y=parseInt(m.substring(2,4),10),isNaN(y.valueOf()))throw new Error("Wrong input string for conversion");c=h*y}}}let f=n.indexOf(".");if(f===-1&&(f=n.indexOf(",")),f!==-1){const h=new Number(`0${n.substring(f)}`);if(isNaN(h.valueOf()))throw new Error("Wrong input string for conversion");s=h.valueOf(),i=n.substring(0,f)}else i=n;switch(!0){case i.length===8:if(o=/(\d{4})(\d{2})(\d{2})/ig,f!==-1)throw new Error("Wrong input string for conversion");break;case i.length===10:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,f!==-1){let h=60*s;this.minute=Math.floor(h),h=60*(h-this.minute),this.second=Math.floor(h),h=1e3*(h-this.second),this.millisecond=Math.floor(h)}break;case i.length===12:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,f!==-1){let h=60*s;this.second=Math.floor(h),h=1e3*(h-this.second),this.millisecond=Math.floor(h)}break;case i.length===14:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,f!==-1){const h=1e3*s;this.millisecond=Math.floor(h)}break;default:throw new Error("Wrong input string for conversion")}const u=o.exec(i);if(u===null)throw new Error("Wrong input string for conversion");for(let h=1;h<u.length;h++)switch(h){case 1:this.year=parseInt(u[h],10);break;case 2:this.month=parseInt(u[h],10);break;case 3:this.day=parseInt(u[h],10);break;case 4:this.hour=parseInt(u[h],10)+a;break;case 5:this.minute=parseInt(u[h],10)+c;break;case 6:this.second=parseInt(u[h],10);break;default:throw new Error("Wrong input string for conversion")}if(r===!1){const h=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=h.getUTCFullYear(),this.month=h.getUTCMonth(),this.day=h.getUTCDay(),this.hour=h.getUTCHours(),this.minute=h.getUTCMinutes(),this.second=h.getUTCSeconds(),this.millisecond=h.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){const r=[];return r.push(lt(this.year,4)),r.push(lt(this.month,2)),r.push(lt(this.day,2)),r.push(lt(this.hour,2)),r.push(lt(this.minute,2)),r.push(lt(this.second,2)),this.millisecond!==0&&(r.push("."),r.push(lt(this.millisecond,3))),r.push("Z"),r.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}gd=yd;G.GeneralizedTime=gd;yd.NAME="GeneralizedTime";var md;class wd extends Lr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}md=wd;G.DATE=md;wd.NAME="DATE";var bd;class vd extends Lr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}bd=vd;G.TimeOfDay=bd;vd.NAME="TimeOfDay";var xd;class Ed extends Lr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}xd=Ed;G.DateTime=xd;Ed.NAME="DateTime";var Sd;class Ad extends Lr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}Sd=Ad;G.Duration=Sd;Ad.NAME="Duration";var Bd;class kd extends Lr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}Bd=kd;G.TIME=Bd;kd.NAME="TIME";class Lc extends Error{constructor(e="An error occurred while verifying a message"){super(e),this.name="VerificationError"}}class Pv extends Error{constructor(e="Missing Web Crypto API"){super(e),this.name="WebCryptoMissingError"}}const Fc={get(t=globalThis){const e=t.crypto;if((e==null?void 0:e.subtle)==null)throw new Pv("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return e}};async function Dv(t,e,r){const n=await Fc.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return Fc.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,e,r instanceof Uint8Array?r:r.subarray())}function $v(t){if(t.kty!=="RSA")throw new wt("invalid key type");if(t.n==null)throw new wt("invalid key modulus");return Tt(t.n,"base64url").length*8}class Rv{constructor(e,r){S(this,"type","RSA");S(this,"_key");S(this,"_raw");S(this,"_multihash");this._key=e,this._multihash=r}get raw(){return this._raw==null&&(this._raw=Hv(this._key)),this._raw}toMultihash(){return this._multihash}toCID(){return Q.createV1(114,this._multihash)}toString(){return Me.encode(this.toMultihash().bytes).substring(1)}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:Zr(this.raw,e.raw)}verify(e,r){return Dv(this._key,r,e)}}const Lv=8192,Fv=18;function Mv(t){const{result:e}=Nv(t),r=e.valueBlock.value[1].valueBlock.value[0].valueBlock.value;return{kty:"RSA",n:Mc(r[0]),e:Mc(r[1])}}function Hv(t){if(t.n==null||t.e==null)throw new wt("JWK was missing components");const r=new Pn({value:[new Pn({value:[new ka({value:"1.2.840.113549.1.1.1"}),new Sa]}),new Aa({valueHex:new Pn({value:[Zt.fromBigInt(Hc(Tt(t.n,"base64url"))),Zt.fromBigInt(Hc(Tt(t.e,"base64url")))]}).toBER()})]}).toBER();return new Uint8Array(r,0,r.byteLength)}function Mc(t){let e=t.valueBlock.valueHexView;for(;e[0]===0;)e=e.subarray(1);return Le(e,"base64url")}function Hc(t){const e=[];return t.forEach(function(r){let n=r.toString(16);n.length%2>0&&(n=`0${n}`),e.push(n)}),BigInt("0x"+e.join(""))}function Vv(t){const e=Mv(t);if($v(e)>Lv)throw new ua("Key size is too large");const r=of(rn.encode({Type:Qe.RSA,Data:t})),n=Rn(Fv,r);return new Rv(e,n)}class Td extends Ru{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Fw(e);const n=ha(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Wi(this),this.iHash.update(e),this}digestInto(e){Wi(this),ps(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Id=(t,e,r)=>new Td(t,e).update(r).digest();Id.create=(t,e)=>new Td(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Vc(t){t.lowS!==void 0&&Yt("lowS",t.lowS),t.prehash!==void 0&&Yt("prehash",t.prehash)}function jv(t){const e=ya(t);pn(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:zv,hexToBytes:Gv}=kb;class qv extends Error{constructor(e=""){super(e)}}const qt={Err:qv,_tlv:{encode:(t,e)=>{const{Err:r}=qt;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=Vr(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?Vr(i.length/2|128):"";return Vr(t)+s+i+e},decode(t,e){const{Err:r}=qt;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const f=e.subarray(n,n+c);if(f.length!==c)throw new r("tlv.decode: length bytes not complete");if(f[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const u of f)o=o<<8|u;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=qt;if(t<Kt)throw new e("integer: negative integers are not allowed");let r=Vr(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=qt;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return zv(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=qt,i=typeof t=="string"?Gv(t):t;ei(i);const{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:f,l:u}=n.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(f)}},hexFromSig(t){const{_tlv:e,_int:r}=qt,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),s=n+i;return e.encode(48,s)}},Kt=BigInt(0),$e=BigInt(1);BigInt(2);const jc=BigInt(3);BigInt(4);function Wv(t){const e=jv(t),{Fp:r}=e,n=ws(e.n,e.nBitLength),i=e.toBytes||((b,w,x)=>{const B=w.toAffine();return Ir(Uint8Array.from([4]),r.toBytes(B.x),r.toBytes(B.y))}),s=e.fromBytes||(b=>{const w=b.subarray(1),x=r.fromBytes(w.subarray(0,r.BYTES)),B=r.fromBytes(w.subarray(r.BYTES,2*r.BYTES));return{x,y:B}});function o(b){const{a:w,b:x}=e,B=r.sqr(b),A=r.mul(B,b);return r.add(r.add(A,r.mul(b,w)),x)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(b){return ms(b,$e,e.n)}function c(b){const{allowedPrivateKeyLengths:w,nByteLength:x,wrapPrivateKey:B,n:A}=e;if(w&&typeof b!="bigint"){if(kr(b)&&(b=Tr(b)),typeof b!="string"||!w.includes(b.length))throw new Error("invalid private key");b=b.padStart(x*2,"0")}let I;try{I=typeof b=="bigint"?b:Er(Oe("private key",b,x))}catch{throw new Error("invalid private key, expected hex or "+x+" bytes, got "+typeof b)}return B&&(I=Se(I,A)),mt("private key",I,$e,A),I}function f(b){if(!(b instanceof p))throw new Error("ProjectivePoint expected")}const u=Vn((b,w)=>{const{px:x,py:B,pz:A}=b;if(r.eql(A,r.ONE))return{x,y:B};const I=b.is0();w==null&&(w=I?r.ONE:r.inv(A));const D=r.mul(x,w),N=r.mul(B,w),C=r.mul(A,w);if(I)return{x:r.ZERO,y:r.ZERO};if(!r.eql(C,r.ONE))throw new Error("invZ was invalid");return{x:D,y:N}}),h=Vn(b=>{if(b.is0()){if(e.allowInfinityPoint&&!r.is0(b.py))return;throw new Error("bad point: ZERO")}const{x:w,y:x}=b.toAffine();if(!r.isValid(w)||!r.isValid(x))throw new Error("bad point: x or y not FE");const B=r.sqr(x),A=o(w);if(!r.eql(B,A))throw new Error("bad point: equation left != right");if(!b.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class p{constructor(w,x,B){if(this.px=w,this.py=x,this.pz=B,w==null||!r.isValid(w))throw new Error("x required");if(x==null||!r.isValid(x))throw new Error("y required");if(B==null||!r.isValid(B))throw new Error("z required");Object.freeze(this)}static fromAffine(w){const{x,y:B}=w||{};if(!w||!r.isValid(x)||!r.isValid(B))throw new Error("invalid affine point");if(w instanceof p)throw new Error("projective point not allowed");const A=I=>r.eql(I,r.ZERO);return A(x)&&A(B)?p.ZERO:new p(x,B,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const x=r.invertBatch(w.map(B=>B.pz));return w.map((B,A)=>B.toAffine(x[A])).map(p.fromAffine)}static fromHex(w){const x=p.fromAffine(s(Oe("pointHex",w)));return x.assertValidity(),x}static fromPrivateKey(w){return p.BASE.multiply(c(w))}static msm(w,x){return Zu(p,n,w,x)}_setWindowSize(w){y.setWindowSize(this,w)}assertValidity(){h(this)}hasEvenY(){const{y:w}=this.toAffine();if(r.isOdd)return!r.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){f(w);const{px:x,py:B,pz:A}=this,{px:I,py:D,pz:N}=w,C=r.eql(r.mul(x,N),r.mul(I,A)),_=r.eql(r.mul(B,N),r.mul(D,A));return C&&_}negate(){return new p(this.px,r.neg(this.py),this.pz)}double(){const{a:w,b:x}=e,B=r.mul(x,jc),{px:A,py:I,pz:D}=this;let N=r.ZERO,C=r.ZERO,_=r.ZERO,O=r.mul(A,A),J=r.mul(I,I),K=r.mul(D,D),q=r.mul(A,I);return q=r.add(q,q),_=r.mul(A,D),_=r.add(_,_),N=r.mul(w,_),C=r.mul(B,K),C=r.add(N,C),N=r.sub(J,C),C=r.add(J,C),C=r.mul(N,C),N=r.mul(q,N),_=r.mul(B,_),K=r.mul(w,K),q=r.sub(O,K),q=r.mul(w,q),q=r.add(q,_),_=r.add(O,O),O=r.add(_,O),O=r.add(O,K),O=r.mul(O,q),C=r.add(C,O),K=r.mul(I,D),K=r.add(K,K),O=r.mul(K,q),N=r.sub(N,O),_=r.mul(K,J),_=r.add(_,_),_=r.add(_,_),new p(N,C,_)}add(w){f(w);const{px:x,py:B,pz:A}=this,{px:I,py:D,pz:N}=w;let C=r.ZERO,_=r.ZERO,O=r.ZERO;const J=e.a,K=r.mul(e.b,jc);let q=r.mul(x,I),ce=r.mul(B,D),L=r.mul(A,N),j=r.add(x,B),E=r.add(I,D);j=r.mul(j,E),E=r.add(q,ce),j=r.sub(j,E),E=r.add(x,A);let T=r.add(I,N);return E=r.mul(E,T),T=r.add(q,L),E=r.sub(E,T),T=r.add(B,A),C=r.add(D,N),T=r.mul(T,C),C=r.add(ce,L),T=r.sub(T,C),O=r.mul(J,E),C=r.mul(K,L),O=r.add(C,O),C=r.sub(ce,O),O=r.add(ce,O),_=r.mul(C,O),ce=r.add(q,q),ce=r.add(ce,q),L=r.mul(J,L),E=r.mul(K,E),ce=r.add(ce,L),L=r.sub(q,L),L=r.mul(J,L),E=r.add(E,L),q=r.mul(ce,E),_=r.add(_,q),q=r.mul(T,E),C=r.mul(j,C),C=r.sub(C,q),q=r.mul(j,ce),O=r.mul(T,O),O=r.add(O,q),new p(C,_,O)}subtract(w){return this.add(w.negate())}is0(){return this.equals(p.ZERO)}wNAF(w){return y.wNAFCached(this,w,p.normalizeZ)}multiplyUnsafe(w){const{endo:x,n:B}=e;mt("scalar",w,Kt,B);const A=p.ZERO;if(w===Kt)return A;if(this.is0()||w===$e)return this;if(!x||y.hasPrecomputes(this))return y.wNAFCachedUnsafe(this,w,p.normalizeZ);let{k1neg:I,k1:D,k2neg:N,k2:C}=x.splitScalar(w),_=A,O=A,J=this;for(;D>Kt||C>Kt;)D&$e&&(_=_.add(J)),C&$e&&(O=O.add(J)),J=J.double(),D>>=$e,C>>=$e;return I&&(_=_.negate()),N&&(O=O.negate()),O=new p(r.mul(O.px,x.beta),O.py,O.pz),_.add(O)}multiply(w){const{endo:x,n:B}=e;mt("scalar",w,$e,B);let A,I;if(x){const{k1neg:D,k1:N,k2neg:C,k2:_}=x.splitScalar(w);let{p:O,f:J}=this.wNAF(N),{p:K,f:q}=this.wNAF(_);O=y.constTimeNegate(D,O),K=y.constTimeNegate(C,K),K=new p(r.mul(K.px,x.beta),K.py,K.pz),A=O.add(K),I=J.add(q)}else{const{p:D,f:N}=this.wNAF(w);A=D,I=N}return p.normalizeZ([A,I])[0]}multiplyAndAddUnsafe(w,x,B){const A=p.BASE,I=(N,C)=>C===Kt||C===$e||!N.equals(A)?N.multiplyUnsafe(C):N.multiply(C),D=I(this,x).add(I(w,B));return D.is0()?void 0:D}toAffine(w){return u(this,w)}isTorsionFree(){const{h:w,isTorsionFree:x}=e;if(w===$e)return!0;if(x)return x(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:x}=e;return w===$e?this:x?x(p,this):this.multiplyUnsafe(e.h)}toRawBytes(w=!0){return Yt("isCompressed",w),this.assertValidity(),i(p,this,w)}toHex(w=!0){return Yt("isCompressed",w),Tr(this.toRawBytes(w))}}p.BASE=new p(e.Gx,e.Gy,r.ONE),p.ZERO=new p(r.ZERO,r.ONE,r.ZERO);const m=e.nBitLength,y=Yu(p,e.endo?Math.ceil(m/2):m);return{CURVE:e,ProjectivePoint:p,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function Kv(t){const e=ya(t);return pn(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Yv(t){const e=Kv(t),{Fp:r,n}=e,i=r.BYTES+1,s=2*r.BYTES+1;function o(L){return Se(L,n)}function a(L){return Eo(L,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:f,weierstrassEquation:u,isWithinCurveOrder:h}=Wv({...e,toBytes(L,j,E){const T=j.toAffine(),U=r.toBytes(T.x),M=Ir;return Yt("isCompressed",E),E?M(Uint8Array.from([j.hasEvenY()?2:3]),U):M(Uint8Array.from([4]),U,r.toBytes(T.y))},fromBytes(L){const j=L.length,E=L[0],T=L.subarray(1);if(j===i&&(E===2||E===3)){const U=Er(T);if(!ms(U,$e,r.ORDER))throw new Error("Point is not on curve");const M=u(U);let W;try{W=r.sqrt(M)}catch(re){const X=re instanceof Error?": "+re.message:"";throw new Error("Point is not on curve"+X)}const Y=(W&$e)===$e;return(E&1)===1!==Y&&(W=r.neg(W)),{x:U,y:W}}else if(j===s&&E===4){const U=r.fromBytes(T.subarray(0,r.BYTES)),M=r.fromBytes(T.subarray(r.BYTES,2*r.BYTES));return{x:U,y:M}}else{const U=i,M=s;throw new Error("invalid Point, expected length of "+U+", or uncompressed "+M+", got "+j)}}}),p=L=>Tr(tn(L,e.nByteLength));function m(L){const j=n>>$e;return L>j}function y(L){return m(L)?o(-L):L}const b=(L,j,E)=>Er(L.slice(j,E));class w{constructor(j,E,T){this.r=j,this.s=E,this.recovery=T,this.assertValidity()}static fromCompact(j){const E=e.nByteLength;return j=Oe("compactSignature",j,E*2),new w(b(j,0,E),b(j,E,2*E))}static fromDER(j){const{r:E,s:T}=qt.toSig(Oe("DER",j));return new w(E,T)}assertValidity(){mt("r",this.r,$e,n),mt("s",this.s,$e,n)}addRecoveryBit(j){return new w(this.r,this.s,j)}recoverPublicKey(j){const{r:E,s:T,recovery:U}=this,M=N(Oe("msgHash",j));if(U==null||![0,1,2,3].includes(U))throw new Error("recovery id invalid");const W=U===2||U===3?E+e.n:E;if(W>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const Y=U&1?"03":"02",ee=c.fromHex(Y+p(W)),re=a(W),X=o(-M*re),le=o(T*re),he=c.BASE.multiplyAndAddUnsafe(ee,X,le);if(!he)throw new Error("point at infinify");return he.assertValidity(),he}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return en(this.toDERHex())}toDERHex(){return qt.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return en(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const x={isValidPrivateKey(L){try{return f(L),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const L=qu(e.n);return $b(e.randomBytes(L),e.n)},precompute(L=8,j=c.BASE){return j._setWindowSize(L),j.multiply(BigInt(3)),j}};function B(L,j=!0){return c.fromPrivateKey(L).toRawBytes(j)}function A(L){const j=kr(L),E=typeof L=="string",T=(j||E)&&L.length;return j?T===i||T===s:E?T===2*i||T===2*s:L instanceof c}function I(L,j,E=!0){if(A(L))throw new Error("first arg must be private key");if(!A(j))throw new Error("second arg must be public key");return c.fromHex(j).multiply(f(L)).toRawBytes(E)}const D=e.bits2int||function(L){if(L.length>8192)throw new Error("input is too large");const j=Er(L),E=L.length*8-e.nBitLength;return E>0?j>>BigInt(E):j},N=e.bits2int_modN||function(L){return o(D(L))},C=ga(e.nBitLength);function _(L){return mt("num < 2^"+e.nBitLength,L,Kt,C),tn(L,e.nByteLength)}function O(L,j,E=J){if(["recovered","canonical"].some(ye=>ye in E))throw new Error("sign() legacy options not supported");const{hash:T,randomBytes:U}=e;let{lowS:M,prehash:W,extraEntropy:Y}=E;M==null&&(M=!0),L=Oe("msgHash",L),Vc(E),W&&(L=Oe("prehashed msgHash",T(L)));const ee=N(L),re=f(j),X=[_(re),_(ee)];if(Y!=null&&Y!==!1){const ye=Y===!0?U(r.BYTES):Y;X.push(Oe("extraEntropy",ye))}const le=Ir(...X),he=ee;function se(ye){const ne=D(ye);if(!h(ne))return;const fe=a(ne),Ie=c.BASE.multiply(ne).toAffine(),H=o(Ie.x);if(H===Kt)return;const te=o(fe*o(he+H*re));if(te===Kt)return;let me=(Ie.x===H?0:2)|Number(Ie.y&$e),Be=te;return M&&m(te)&&(Be=y(te),me^=1),new w(H,Be,me)}return{seed:le,k2sig:se}}const J={lowS:e.lowS,prehash:!1},K={lowS:e.lowS,prehash:!1};function q(L,j,E=J){const{seed:T,k2sig:U}=O(L,j,E),M=e;return ju(M.hash.outputLen,M.nByteLength,M.hmac)(T,U)}c.BASE._setWindowSize(8);function ce(L,j,E,T=K){var me;const U=L;j=Oe("msgHash",j),E=Oe("publicKey",E);const{lowS:M,prehash:W,format:Y}=T;if(Vc(T),"strict"in T)throw new Error("options.strict was renamed to lowS");if(Y!==void 0&&Y!=="compact"&&Y!=="der")throw new Error("format must be compact or der");const ee=typeof U=="string"||kr(U),re=!ee&&!Y&&typeof U=="object"&&U!==null&&typeof U.r=="bigint"&&typeof U.s=="bigint";if(!ee&&!re)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let X,le;try{if(re&&(X=new w(U.r,U.s)),ee){try{Y!=="compact"&&(X=w.fromDER(U))}catch(Be){if(!(Be instanceof qt.Err))throw Be}!X&&Y!=="der"&&(X=w.fromCompact(U))}le=c.fromHex(E)}catch{return!1}if(!X||M&&X.hasHighS())return!1;W&&(j=e.hash(j));const{r:he,s:se}=X,ye=N(j),ne=a(se),fe=o(ye*ne),Ie=o(he*ne),H=(me=c.BASE.multiplyAndAddUnsafe(le,fe,Ie))==null?void 0:me.toAffine();return H?o(H.x)===he:!1}return{CURVE:e,getPublicKey:B,getSharedSecret:I,sign:q,verify:ce,ProjectivePoint:c,Signature:w,utils:x}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Zv(t){return{hash:t,hmac:(e,...r)=>Id(t,e,Vw(...r)),randomBytes:Fu}}function Jv(t,e){const r=n=>Yv({...t,...Zv(n)});return{...r(e),create:r}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Cd=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),zc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Xv=BigInt(1),Io=BigInt(2),Gc=(t,e)=>(t+e/Io)/e;function Qv(t){const e=Cd,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),f=t*t*t%e,u=f*f*t%e,h=ke(u,r,e)*u%e,p=ke(h,r,e)*u%e,m=ke(p,Io,e)*f%e,y=ke(m,i,e)*m%e,b=ke(y,s,e)*y%e,w=ke(b,a,e)*b%e,x=ke(w,c,e)*w%e,B=ke(x,a,e)*b%e,A=ke(B,r,e)*u%e,I=ke(A,o,e)*y%e,D=ke(I,n,e)*f%e,N=ke(D,Io,e);if(!Co.eql(Co.sqr(N),t))throw new Error("Cannot find square root");return N}const Co=ws(Cd,void 0,void 0,{sqrt:Qv}),zn=Jv({a:BigInt(0),b:BigInt(7),Fp:Co,n:zc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=zc,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Xv*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=Gc(s*t,e),c=Gc(-n*t,e);let f=Se(t-a*r-c*i,e),u=Se(-a*n-c*s,e);const h=f>o,p=u>o;if(h&&(f=e-f),p&&(u=e-u),f>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:f,k2neg:p,k2:u}}}},of);BigInt(0);zn.ProjectivePoint;function e1(t){return t==null?!1:typeof t.then=="function"&&typeof t.catch=="function"&&typeof t.finally=="function"}function t1(t,e,r){const n=jo.digest(r instanceof Uint8Array?r:r.subarray());if(e1(n))return n.then(({digest:i})=>zn.verify(e,i,t)).catch(i=>{throw new Lc(String(i))});try{return zn.verify(e,n.digest,t)}catch(i){throw new Lc(String(i))}}class r1{constructor(e){S(this,"type","secp256k1");S(this,"raw");S(this,"_key");this._key=i1(e),this.raw=n1(this._key)}toMultihash(){return Ar.digest(_d(this))}toCID(){return Q.createV1(114,this.toMultihash())}toString(){return Me.encode(this.toMultihash().bytes).substring(1)}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:Zr(this.raw,e.raw)}verify(e,r){return t1(this._key,r,e)}}function Nd(t){return new r1(t)}function n1(t){return zn.ProjectivePoint.fromHex(t).toRawBytes(!0)}function i1(t){try{return zn.ProjectivePoint.fromHex(t),t}catch(e){throw new ua(String(e))}}function s1(t){const{Type:e,Data:r}=rn.decode(t),n=r??new Uint8Array;switch(e){case Qe.RSA:return Vv(n);case Qe.Ed25519:return Xu(n);case Qe.secp256k1:return Nd(n);default:throw new fa}}function o1(t){const{Type:e,Data:r}=rn.decode(t.digest),n=r??new Uint8Array;switch(e){case Qe.Ed25519:return Xu(n);case Qe.secp256k1:return Nd(n);default:throw new fa}}function _d(t){return rn.encode({Type:Qe[t.type],Data:t.raw})}const Od=Symbol.for("nodejs.util.inspect.custom"),a1=114;var Tl;class Ca{constructor(e){S(this,"type");S(this,"multihash");S(this,"publicKey");S(this,"string");S(this,Tl,!0);this.type=e.type,this.multihash=e.multihash,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}toString(){return this.string==null&&(this.string=Me.encode(this.multihash.bytes).slice(1)),this.string}toMultihash(){return this.multihash}toCID(){return Q.createV1(a1,this.multihash)}toJSON(){return this.toString()}equals(e){var r;if(e==null)return!1;if(e instanceof Uint8Array)return Zr(this.multihash.bytes,e);if(typeof e=="string")return this.toString()===e;if(((r=e==null?void 0:e.toMultihash())==null?void 0:r.bytes)!=null)return Zr(this.multihash.bytes,e.toMultihash().bytes);throw new Error("not valid Id")}[(Tl=Ou,Od)](){return`PeerId(${this.toString()})`}}class c1 extends Ca{constructor(r){super({...r,type:"RSA"});S(this,"type","RSA");S(this,"publicKey");this.publicKey=r.publicKey}}class l1 extends Ca{constructor(r){super({...r,type:"Ed25519"});S(this,"type","Ed25519");S(this,"publicKey");this.publicKey=r.publicKey}}class u1 extends Ca{constructor(r){super({...r,type:"secp256k1"});S(this,"type","secp256k1");S(this,"publicKey");this.publicKey=r.publicKey}}const f1=2336;var Il,Cl;class d1{constructor(e){S(this,"type","url");S(this,"multihash");S(this,"publicKey");S(this,"url");S(this,Il,!0);this.url=e.toString(),this.multihash=Ar.digest(Tt(this.url))}[(Cl=Od,Il=Ou,Cl)](){return`PeerId(${this.url})`}toString(){return this.toCID().toString()}toMultihash(){return this.multihash}toCID(){return Q.createV1(f1,this.toMultihash())}toJSON(){return this.toString()}equals(e){return e==null?!1:(e instanceof Uint8Array&&(e=Le(e)),e.toString()===this.toString())}}function ct(t,e){let r;if(t.charAt(0)==="1"||t.charAt(0)==="Q")r=Ho(Me.decode(`z${t}`));else throw new wt('Please pass a multibase decoder for strings that do not start with "1" or "Q"');return h1(r)}function h1(t){if(g1(t))return new c1({multihash:t});if(p1(t))try{const e=o1(t);if(e.type==="Ed25519")return new l1({multihash:t,publicKey:e});if(e.type==="secp256k1")return new u1({multihash:t,publicKey:e})}catch{const r=Le(t.digest);return new d1(new URL(r))}throw new Uu("Supplied PeerID Multihash is invalid")}function p1(t){return t.code===Ar.code}function g1(t){return t.code===jo.code}function Ud(t){return async function(r={}){const n=await t.post("bitswap/stat",{searchParams:R(r),signal:r.signal,headers:r.headers});return y1(await n.json())}}function y1(t){return{provideBufLen:t.ProvideBufLen,wantlist:(t.Wantlist??[]).map(e=>Q.parse(e["/"])),peers:(t.Peers??[]).map(e=>ct(e)),blocksReceived:BigInt(t.BlocksReceived),dataReceived:BigInt(t.DataReceived),blocksSent:BigInt(t.BlocksSent),dataSent:BigInt(t.DataSent),dupBlksReceived:BigInt(t.DupBlksReceived),dupDataReceived:BigInt(t.DupDataReceived)}}function m1(t){return async function(r,n={}){return((await(await t.post("bitswap/wantlist",{signal:n.signal,searchParams:R({...n,peer:r.toString()}),headers:n.headers})).json()).Keys??[]).map(s=>Q.parse(s["/"]))}}function w1(t){return async function(r={}){return((await(await t.post("bitswap/wantlist",{signal:r.signal,searchParams:R(r),headers:r.headers})).json()).Keys??[]).map(i=>Q.parse(i["/"]))}}function b1(t){return{wantlist:w1(t),wantlistForPeer:m1(t),stat:Ud(t)}}function Pd(t){return async function(r,n={}){const i=await t.post("block/get",{signal:n.signal,searchParams:R({arg:r.toString(),...n}),headers:n.headers});return new Uint8Array(await i.arrayBuffer())}}function v1(t){return async function e(r,n={}){const i=new AbortController,s=Jt([i.signal,n.signal]);let o;try{o=await(await t.post("block/put",{signal:s,searchParams:R(n),...await yr([r],i,n.headers)})).json()}catch(a){if(n.format==="dag-pb")return await e(r,{...n,format:"protobuf"});if(n.format==="dag-cbor")return await e(r,{...n,format:"cbor"});throw a}finally{s.clear()}return Q.parse(o.Key)}}function x1(t){return async function*(r,n={}){Array.isArray(r)||(r=[r]);const i=await t.post("block/rm",{signal:n.signal,searchParams:R({arg:r.map(s=>s.toString()),"stream-channels":!0,...n}),headers:n.headers});for await(const s of i.ndjson())yield E1(s)}}function E1(t){const e={cid:Q.parse(t.Hash)};return t.Error!=null&&(e.error=new Error(t.Error)),e}function S1(t){return async function(r,n={}){const s=await(await t.post("block/stat",{signal:n.signal,searchParams:R({arg:r.toString(),...n}),headers:n.headers})).json();return{cid:Q.parse(s.Key),size:s.Size}}}function A1(t){return{get:Pd(t),put:v1(t),rm:x1(t),stat:S1(t)}}function B1(t){return async function(r,n={}){const i=await t.post("bootstrap/add",{signal:n.signal,searchParams:R({arg:r,...n}),headers:n.headers}),{Peers:s}=await i.json();return{Peers:s.map(o=>st(o))}}}function k1(t){return async function(r={}){const n=await t.post("bootstrap/list",{signal:r.signal,searchParams:R(r),headers:r.headers}),{Peers:i}=await n.json();return{Peers:i.map(s=>st(s))}}}function T1(t){return async function(r,n={}){const i=await t.post("bootstrap/rm",{signal:n.signal,searchParams:R({arg:r,...n}),headers:n.headers}),{Peers:s}=await i.json();return{Peers:s.map(o=>st(o))}}}function I1(t){return{add:B1(t),list:k1(t),rm:T1(t)}}function C1(t){return async function*(r,n={}){yield*(await t.post("cat",{signal:n.signal,searchParams:R({arg:r.toString(),...n}),headers:n.headers})).iterator()}}function N1(t){return async function(r={}){return(await t.post("commands",{signal:r.signal,searchParams:R(r),headers:r.headers})).json()}}function _1(t){return async function(r={}){return await(await t.post("config/show",{signal:r.signal,searchParams:R({...r}),headers:r.headers})).json()}}function O1(t){return async function(r,n={}){if(r==null)throw new Error("key argument is required");return(await(await t.post("config",{signal:n.signal,searchParams:R({arg:r,...n}),headers:n.headers})).json()).Value}}function U1(t){return async function(r,n={}){const s=await(await t.post("config/profile/apply",{signal:n.signal,searchParams:R({arg:r,...n}),headers:n.headers})).json();return{original:s.OldCfg,updated:s.NewCfg}}}function P1(t){return{apply:U1(t)}}function D1(t){return async function(r,n={}){const i=new AbortController,s=Jt([i.signal,n.signal]);try{await(await t.post("config/replace",{signal:s,searchParams:R(n),...await yr([Tt(JSON.stringify(r))],i,n.headers)})).text()}finally{s.clear()}}}function $1(t){return async function(r,n,i={}){if(typeof r!="string")throw new Error("Invalid key type");const s={...i,...R1(r,n)};await(await t.post("config",{signal:i.signal,searchParams:R(s),headers:i.headers})).text()}}function R1(t,e){switch(typeof e){case"boolean":return{arg:[t,e.toString()],bool:!0};case"string":return{arg:[t,e]};default:return{arg:[t,JSON.stringify(e)],json:!0}}}function L1(t){return{getAll:_1(t),get:O1(t),set:$1(t),replace:D1(t),profiles:P1(t)}}function F1(t){return async function*(r,n={}){yield*(await t.post("dag/export",{signal:n.signal,searchParams:R({arg:r.toString()}),headers:n.headers})).iterator()}}function M1(t){return t[Symbol.asyncIterator]!=null}function H1(t){if(M1(t))return(async()=>{for await(const e of t)return e})();for(const e of t)return e}async function*qc(t,e,r,n,i){const s=async f=>{const u=await r.getCodec(f.code),h=await n(f,i);return u.decode(h)},o=e.split("/").filter(Boolean);let a=await s(t),c=t;for(;o.length>0;){const f=o.shift();if(f==null)throw $t(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(a,f))a=a[f],yield{value:a,remainderPath:o.join("/")};else throw $t(new Error(`no link named "${f}" under ${c}`),"ERR_NO_LINK");const u=Q.asCID(a);u!=null&&(c=u,a=await s(a))}yield{value:a,remainderPath:""}}function V1(t,e){const r=Pd(t);return async function(i,s={}){if(s.path!=null){const u=s.localResolve===!0?await H1(qc(i,s.path,e,r,s)):await hs(qc(i,s.path,e,r,s));if(u==null)throw $t(new Error("Not found"),"ERR_NOT_FOUND");return u}const o=await e.getCodec(i.code),a=await r(i,s);return{value:o.decode(a),remainderPath:""}}}function j1(t){return async function*(r,n={}){const i=new AbortController,s=Jt([i.signal,n.signal]);try{const{headers:o,body:a}=await yr(r,i,n.headers),c=await t.post("dag/import",{signal:s,headers:o,body:a,searchParams:R({"pin-roots":n.pinRoots})});for await(const{Root:f}of c.ndjson())if(f!==void 0){const{Cid:{"/":u},PinErrorMsg:h}=f;yield{root:{cid:Q.parse(u),pinErrorMsg:h}}}}finally{s.clear()}}}function z1(t,e){return async function(n,i={}){const s={storeCodec:"dag-cbor",hashAlg:"sha2-256",...i};let o;if(s.inputCodec!=null){if(!(n instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");o=n}else o=(await e.getCodec(s.storeCodec??"dag-cbor")).encode(n),s.inputCodec=s.storeCodec;const a=new AbortController,c=Jt([a.signal,s.signal]);try{const u=await(await t.post("dag/put",{timeout:s.timeout,signal:c,searchParams:R(s),...await yr([o],a,s.headers)})).json();return Q.parse(u.Cid["/"])}finally{c.clear()}}}function G1(t){return async function(r,n={}){const s=await(await t.post("dag/resolve",{signal:n.signal,searchParams:R({arg:`${r}${n.path!=null?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers})).json();return{cid:Q.parse(s.Cid["/"]),remainderPath:s.RemPath}}}function q1(t,e){return{export:F1(t),get:V1(t,e),import:j1(t),put:z1(t,e),resolve:G1(t)}}const W1=0,K1=1,Y1=2,Z1=3,J1=4,X1=5,Q1=6,ex=7;function mn(t){var e;if(t.Type===W1)return{name:"SENDING_QUERY",type:t.Type};if(t.Type===K1)return{from:ct(t.ID),name:"PEER_RESPONSE",type:t.Type,messageType:0,messageName:"PUT_VALUE",closer:(t.Responses??[]).map(({ID:r,Addrs:n})=>({id:ct(r),multiaddrs:n.map(i=>st(i)),protocols:[]})),providers:(t.Responses??[]).map(({ID:r,Addrs:n})=>({id:ct(r),multiaddrs:n.map(i=>st(i)),protocols:[]}))};if(t.Type===Y1){let r={id:t.ID??ct(t.ID),multiaddrs:[],protocols:[]};return((e=t.Responses)==null?void 0:e.length)>0&&(r={id:ct(t.Responses[0].ID),multiaddrs:t.Responses[0].Addrs.map(n=>st(n)),protocols:[]}),{name:"FINAL_PEER",type:t.Type,peer:r}}if(t.Type===Z1)return{name:"QUERY_ERROR",type:t.Type,error:new Error(t.Extra)};if(t.Type===J1)return{name:"PROVIDER",type:t.Type,providers:t.Responses.map(({ID:r,Addrs:n})=>({id:ct(r),multiaddrs:n.map(i=>st(i)),protocols:[]}))};if(t.Type===X1)return{name:"VALUE",type:t.Type,value:Tt(t.Extra,"base64pad")};if(t.Type===Q1){const r=t.Responses.map(({ID:n})=>ct(n));if(r.length===0)throw new Error("No peer found");return{name:"ADDING_PEER",type:t.Type,peer:r[0]}}if(t.Type===ex)return{name:"DIALING_PEER",type:t.Type,peer:ct(t.ID)};throw new Error("Unknown DHT event type")}function tx(t){return async function*(r,n={}){const i=await t.post("dht/query",{signal:n.signal,searchParams:R({arg:r.toString(),...n}),headers:n.headers});for await(const s of i.ndjson())yield mn(s)}}var Wc;(function(t){t[t.SENDING_QUERY=0]="SENDING_QUERY",t[t.PEER_RESPONSE=1]="PEER_RESPONSE",t[t.FINAL_PEER=2]="FINAL_PEER",t[t.QUERY_ERROR=3]="QUERY_ERROR",t[t.PROVIDER=4]="PROVIDER",t[t.VALUE=5]="VALUE",t[t.ADDING_PEER=6]="ADDING_PEER",t[t.DIALING_PEER=7]="DIALING_PEER"})(Wc||(Wc={}));var Kc;(function(t){t[t.PUT_VALUE=0]="PUT_VALUE",t[t.GET_VALUE=1]="GET_VALUE",t[t.ADD_PROVIDER=2]="ADD_PROVIDER",t[t.GET_PROVIDERS=3]="GET_PROVIDERS",t[t.FIND_NODE=4]="FIND_NODE",t[t.PING=5]="PING"})(Kc||(Kc={}));function rx(t){return{query:tx(t)}}function nx(t){return async function(r={}){return(await t.post("diag/cmds",{signal:r.signal,searchParams:R(r),headers:r.headers})).json()}}function ix(t){return async function(r={}){return(await t.post("diag/net",{signal:r.signal,searchParams:R(r),headers:r.headers})).json()}}function sx(t){return async function(r={}){return(await t.post("diag/sys",{signal:r.signal,searchParams:R(r),headers:r.headers})).json()}}function ox(t){return{cmds:nx(t),net:ix(t),sys:sx(t)}}function ax(t){return async function(r,n,i={}){const s=Array.isArray(r)?r:[r];await(await t.post("files/cp",{signal:i.signal,searchParams:R({arg:s.concat(n).map(a=>Q.asCID(a)!=null?`/ipfs/${a}`:a),...i}),headers:i.headers})).text()}}function cx(t){return async function(r,n={}){if(typeof r!="string")throw new Error("ipfs.files.flush requires a path");const s=await(await t.post("files/flush",{signal:n.signal,searchParams:R({arg:r,...n}),headers:n.headers})).json();return Q.parse(s.Cid)}}function No(t){const e=je(t);return Object.prototype.hasOwnProperty.call(e,"mode")&&(e.mode=parseInt(e.mode,8)),Object.prototype.hasOwnProperty.call(e,"mtime")&&(e.mtime={secs:e.mtime,nsecs:e.mtimeNsecs??0},delete e.mtimeNsecs),e}function lx(t){return async function*(r,n={}){if(r==null)throw new Error("ipfs.files.ls requires a path");const i=await t.post("files/ls",{signal:n.signal,searchParams:R({arg:Q.asCID(r)!=null?`/ipfs/${r}`:r,long:!0,...n,stream:!0}),headers:n.headers});for await(const s of i.ndjson())if("Entries"in s)for(const o of s.Entries??[])yield Yc(No(o));else yield Yc(No(s))}}function Yc(t){return t.hash!=null&&(t.cid=Q.parse(t.hash)),delete t.hash,t.type=t.type===1?"directory":"file",t}function ux(t){return async function(r,n={}){await(await t.post("files/mkdir",{signal:n.signal,searchParams:R({arg:r,...n}),headers:n.headers})).text()}}function fx(t){return async function(r,n,i={}){Array.isArray(r)||(r=[r]),await(await t.post("files/mv",{signal:i.signal,searchParams:R({arg:r.concat(n),...i}),headers:i.headers})).text()}}function dx(t){if(px(t))return async function*(){const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)return;yield n}}finally{e.releaseLock()}}();if(hx(t))return t;throw new Error("unknown stream")}function hx(t){return t[Symbol.asyncIterator]!=null}function px(t){return typeof(t==null?void 0:t.getReader)=="function"}function gx(t){return async function*(r,n={}){const i=await t.post("files/read",{signal:n.signal,searchParams:R({arg:r,count:n.length,...n}),headers:n.headers});if(i.body==null)throw new Error("Invalid response body");yield*dx(i.body)}}function yx(t){return async function(r,n={}){const i=await t.post("files/rm",{signal:n.signal,searchParams:R({arg:r,...n}),headers:n.headers}),s=await i.text();if(s!==""){const o=new Sw(i);throw o.message=s,o}}}function Dd(t){return async function(r,n={}){const s=await(await t.post("files/stat",{signal:n.signal,searchParams:R({arg:r,...n}),headers:n.headers})).json();return s.WithLocality=s.WithLocality??!1,mx(No(s))}}function mx(t){return t.cid=Q.parse(t.hash),delete t.hash,t}function wx(t){return async function(r,n,i={}){const s=new AbortController,o=Jt([s.signal,i.signal]);try{await(await t.post("files/write",{signal:o,searchParams:R({arg:r,streamChannels:!0,count:i.length,...i}),...await yr([{content:n,path:"arg",mode:da(i.mode),mtime:ds(i.mtime)}],s,i.headers)})).text()}finally{o.clear()}}}function bx(t){return{cp:ax(t),flush:cx(t),ls:lx(t),mkdir:ux(t),mv:fx(t),read:gx(t),rm:yx(t),stat:Dd(t),write:wx(t)}}function vx(t){return function(){const r=new URL(t.opts.base??"");return{host:r.hostname,port:r.port,protocol:r.protocol,pathname:r.pathname,"api-path":r.pathname}}}function xx(t){return async function*(r,n={}){const i={arg:`${r instanceof Uint8Array?Q.decode(r):r}`,...n};yield*(await t.post("get",{signal:n.signal,searchParams:R(i),headers:n.headers})).iterator()}}function $d(t){return async function(r={}){const i=await(await t.post("id",{signal:r.signal,searchParams:R({arg:r.peerId!=null?r.peerId.toString():void 0,...r}),headers:r.headers})).json(),s={...je(i)};return s.id=ct(s.id),s.addresses!=null&&(s.addresses=s.addresses.map(o=>st(o))),s}}function Ex(t){const e=$d(t);return async function(n={}){var i;try{const s=await e(n);return!!((i=s==null?void 0:s.addresses)!=null&&i.length)}catch{return!1}}}const Sx={type:"ed25519"};function Ax(t){return async function(r,n=Sx){const s=await(await t.post("key/gen",{signal:n.signal,searchParams:R({arg:r,...n}),headers:n.headers})).json();return je(s)}}function Bx(t){return async function(r,n,i,s={}){const a=await(await t.post("key/import",{signal:s.signal,searchParams:R({arg:r,pem:n,password:i,...s}),headers:s.headers})).json();return je(a)}}function kx(t){return async function(r={}){return((await(await t.post("key/list",{signal:r.signal,searchParams:R(r),headers:r.headers})).json()).Keys??[]).map(s=>je(s))}}function Tx(t){return async function(r,n,i={}){const s=await t.post("key/rename",{signal:i.signal,searchParams:R({arg:[r,n],...i}),headers:i.headers});return je(await s.json())}}function Ix(t){return async function(r,n={}){const s=await(await t.post("key/rm",{signal:n.signal,searchParams:R({arg:r,...n}),headers:n.headers})).json();return je(s.Keys[0])}}function Cx(t){return{gen:Ax(t),import:Bx(t),list:kx(t),rename:Tx(t),rm:Ix(t)}}const sn=1e3,on=sn*60,an=on*60,Nr=an*24,Nx=Nr*7,_x=Nr*365.25;function Rd(t,e){try{if(typeof t=="string"&&t.length>0)return Ox(t);if(typeof t=="number"&&isFinite(t))return e!=null&&e.long?Px(t):Ux(t);throw new Error("Value is not a string or number.")}catch(r){const n=Dx(r)?`${r.message}. value=${JSON.stringify(t)}`:"An unknown error has occured.";throw new Error(n)}}function Ox(t){if(t=String(t),t.length>100)throw new Error("Value exceeds the maximum length of 100 characters.");const e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return NaN;const r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*_x;case"weeks":case"week":case"w":return r*Nx;case"days":case"day":case"d":return r*Nr;case"hours":case"hour":case"hrs":case"hr":case"h":return r*an;case"minutes":case"minute":case"mins":case"min":case"m":return r*on;case"seconds":case"second":case"secs":case"sec":case"s":return r*sn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:throw new Error(`The unit ${n} was matched, but no matching case exists.`)}}function Ux(t){const e=Math.abs(t);return e>=Nr?`${Math.round(t/Nr)}d`:e>=an?`${Math.round(t/an)}h`:e>=on?`${Math.round(t/on)}m`:e>=sn?`${Math.round(t/sn)}s`:`${t}ms`}function Px(t){const e=Math.abs(t);return e>=Nr?Ai(t,e,Nr,"day"):e>=an?Ai(t,e,an,"hour"):e>=on?Ai(t,e,on,"minute"):e>=sn?Ai(t,e,sn,"second"):`${t} ms`}function Ai(t,e,r,n){const i=e>=r*1.5;return`${Math.round(t/r)} ${n}${i?"s":""}`}function Dx(t){return typeof t=="object"&&t!==null&&"message"in t}function $x(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=Rd,r.destroy=f,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let h=0;for(let p=0;p<u.length;p++)h=(h<<5)-h+u.charCodeAt(p),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=e;function r(u){let h,p=null,m,y;function b(...w){if(!b.enabled)return;const x=b,B=Number(new Date),A=B-(h||B);x.diff=A,x.prev=h,x.curr=B,h=B,w[0]=r.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");let I=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,(N,C)=>{if(N==="%%")return"%";I++;const _=r.formatters[C];if(typeof _=="function"){const O=w[I];N=_.call(x,O),w.splice(I,1),I--}return N}),r.formatArgs.call(x,w),(x.log||r.log).apply(x,w)}return b.namespace=u,b.useColors=r.useColors(),b.color=r.selectColor(u),b.extend=n,b.destroy=r.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(m!==r.namespaces&&(m=r.namespaces,y=r.enabled(u)),y),set:w=>{p=w}}),typeof r.init=="function"&&r.init(b),b}function n(u,h){const p=r(this.namespace+(typeof h>"u"?":":h)+u);return p.log=this.log,p}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let h;const p=(typeof u=="string"?u:"").split(/[\s,]+/),m=p.length;for(h=0;h<m;h++)p[h]&&(u=p[h].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.substr(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function s(){const u=[...r.names.map(a),...r.skips.map(a).map(h=>"-"+h)].join(",");return r.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let h,p;for(h=0,p=r.skips.length;h<p;h++)if(r.skips[h].test(u))return!1;for(h=0,p=r.names.length;h<p;h++)if(r.names[h].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack??u.message:u}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.setupFormatters(r.formatters),r.enable(r.load()),r}var Rx={};const Pt=zx(),Lx=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Fx(){var t,e,r,n,i;return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&((t=navigator.userAgent)==null?void 0:t.toLowerCase().match(/(edge|trident)\/(\d+)/))!=null?!1:typeof document<"u"&&((r=(e=document.documentElement)==null?void 0:e.style)==null?void 0:r.WebkitAppearance)||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&((n=navigator.userAgent)==null?void 0:n.toLowerCase().match(/firefox\/(\d+)/))!=null&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&((i=navigator.userAgent)==null?void 0:i.toLowerCase().match(/applewebkit\/(\d+)/))}function Mx(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Rd(this.diff),!this.useColors)return;const e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}const Hx=console.debug??console.log??(()=>{});function Vx(t){try{t?Pt==null||Pt.setItem("debug",t):Pt==null||Pt.removeItem("debug")}catch{}}function jx(){let t;try{t=Pt==null?void 0:Pt.getItem("debug")}catch{}return!t&&typeof globalThis.process<"u"&&"env"in globalThis.process&&(t=Rx.DEBUG),t}function zx(){try{return localStorage}catch{}}function Gx(t){t.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}}const ut=$x({formatArgs:Mx,save:Vx,load:jx,useColors:Fx,setupFormatters:Gx,colors:Lx,storage:Pt,log:Hx});ut.formatters.b=t=>t==null?"undefined":Me.baseEncode(t);ut.formatters.t=t=>t==null?"undefined":fr.baseEncode(t);ut.formatters.m=t=>t==null?"undefined":rs.baseEncode(t);ut.formatters.p=t=>t==null?"undefined":t.toString();ut.formatters.c=t=>t==null?"undefined":t.toString();ut.formatters.k=t=>t==null?"undefined":t.toString();ut.formatters.a=t=>t==null?"undefined":t.toString();ut.formatters.e=t=>t==null?"undefined":Zc(t.stack)??Zc(t.message)??t.toString();function qx(t){const e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=t,e.destroy=()=>!0,e.extend=()=>e,e}function Na(t){let e=qx(`${t}:trace`);return ut.enabled(`${t}:trace`)&&ut.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(e=ut(`${t}:trace`)),Object.assign(ut(t),{error:ut(`${t}:error`),trace:e})}function Zc(t){if(t!=null&&(t=t.trim(),t.length!==0))return t}var Wx=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype};const Zi=Wx,{hasOwnProperty:Ld}=Object.prototype,{propertyIsEnumerable:Kx}=Object,cn=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0}),Yx=io,Jc={concatArrays:!1,ignoreUndefined:!1},xs=t=>{const e=[];for(const r in t)Ld.call(t,r)&&e.push(r);if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(t);for(const n of r)Kx.call(t,n)&&e.push(n)}return e};function wn(t){return Array.isArray(t)?Zx(t):Zi(t)?Jx(t):t}function Zx(t){const e=t.slice(0,0);return xs(t).forEach(r=>{cn(e,r,wn(t[r]))}),e}function Jx(t){const e=Object.getPrototypeOf(t)===null?Object.create(null):{};return xs(t).forEach(r=>{cn(e,r,wn(t[r]))}),e}const Fd=(t,e,r,n)=>(r.forEach(i=>{typeof e[i]>"u"&&n.ignoreUndefined||(i in t&&t[i]!==Object.getPrototypeOf(t)?cn(t,i,_o(t[i],e[i],n)):cn(t,i,wn(e[i])))}),t),Xx=(t,e,r)=>{let n=t.slice(0,0),i=0;return[t,e].forEach(s=>{const o=[];for(let a=0;a<s.length;a++)Ld.call(s,a)&&(o.push(String(a)),s===t?cn(n,i++,s[a]):cn(n,i++,wn(s[a])));n=Fd(n,s,xs(s).filter(a=>!o.includes(a)),r)}),n};function _o(t,e,r){return r.concatArrays&&Array.isArray(t)&&Array.isArray(e)?Xx(t,e,r):!Zi(e)||!Zi(t)?wn(e):Fd(t,e,xs(e),r)}var Qx=function(...t){const e=_o(wn(Jc),this!==Yx&&this||{},Jc);let r={_:{}};for(const n of t)if(n!==void 0){if(!Zi(n))throw new TypeError("`"+n+"` is not an Option Object");r=_o(r,{_:n},e)}return r._};const Md=es(Qx);let eE=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;ae.year=ae.yr=ae.y=6e4*60*24*365.25;ae.month=ae.b=6e4*60*24*(365.25/12);ae.week=ae.wk=ae.w=6e4*60*24*7;ae.day=ae.d=6e4*60*24;ae.hour=ae.hr=ae.h=6e4*60;ae.minute=ae.min=ae.m=6e4;ae.second=ae.sec=ae.s=1e3;ae.millisecond=ae.millisec=ae.ms=1;ae.µs=ae.μs=ae.us=ae.microsecond=1/1e3;ae.nanosecond=ae.ns=1/1e6;function ae(t="",e="ms"){var r=null,n;return t=(t+"").replace(/(\d)[,_](\d)/g,"$1$2"),t.replace(eE,function(i,s,o){if(o)o=o.toLowerCase();else if(n){for(var a in ae)if(ae[a]<n){o=a;break}}else o=e;Object.prototype.hasOwnProperty.call(ae,o)?o=ae[o]:Object.prototype.hasOwnProperty.call(ae,o.replace(/s$/,""))?o=ae[o.replace(/s$/,"")]:o=null,o&&(r=(r||0)+Math.abs(parseFloat(s,10))*o,n=o)}),r&&r/(ae[e]||1)*(t[0]==="-"?-1:1)}const tE=()=>{},rE=typeof navigator<"u"&&navigator.product==="ReactNative";function nE(){return rE?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const Dn=self.URL,Hd=nE();let iE=class{constructor(e="",r=Hd){this.super=new Dn(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return Dn.createObjectURL(e)}static revokeObjectURL(e){Dn.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function sE(t){if(typeof t=="string")return new Dn(t).toString();if(!(t instanceof Dn)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",i=t.protocol?t.protocol+"//":"",s=t.host||"",o=t.hostname||"",a=t.search||(t.query?"?"+t.query:""),c=t.hash||"",f=t.pathname||"",u=t.path||f+a;return`${i}${e||r}${s||o+n}${u}${c}`}}var Vd={URLWithLegacySupport:iE,URLSearchParams:self.URLSearchParams,defaultBase:Hd,format:sE};const{URLWithLegacySupport:Xc,format:oE}=Vd;var aE=(t,e={},r={},n)=>{let i=e.protocol?e.protocol.replace(":",""):"http";i=(r[i]||n||i)+":";let s;try{s=new Xc(t)}catch{s={}}const o=Object.assign({},e,{protocol:i||s.protocol,host:e.host||s.host});return new Xc(t,oE(o)).toString()};const{URLWithLegacySupport:cE,format:lE,URLSearchParams:uE,defaultBase:fE}=Vd,dE=aE;var Bi={URL:cE,URLSearchParams:uE,format:lE,relative:dE,defaultBase:fE};class jd extends Error{constructor(e="Request timed out"){super(e),this.name="TimeoutError"}}class hE extends Error{constructor(e="The operation was aborted."){super(e),this.name="AbortError"}}class Qc extends Error{constructor(r){super(r.statusText);S(this,"response");this.name="HTTPError",this.response=r}}const pE=globalThis.fetch,_a=globalThis.Headers,gE=globalThis.Request,zd=globalThis.Response,yE=async(t,e={})=>{const r=new XMLHttpRequest;r.open(e.method??"GET",t.toString(),!0);const{timeout:n,headers:i}=e,s=Number(n);if(!isNaN(s)&&s>0&&s<1/0&&(r.timeout=s),e.overrideMimeType!=null&&r.overrideMimeType(e.overrideMimeType),i!=null)for(const[o,a]of new _a(i))r.setRequestHeader(o,a);return e.signal!=null&&(e.signal.onabort=()=>{r.abort()}),e.onUploadProgress!=null&&(r.upload.onprogress=e.onUploadProgress),r.responseType="arraybuffer",new Promise((o,a)=>{const c=f=>{switch(f.type){case"error":{o(zd.error());break}case"load":{o(new vE(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:bE(r.getAllResponseHeaders())}));break}case"timeout":{a(new jd);break}case"abort":{a(new hE);break}}};r.onerror=c,r.onload=c,r.ontimeout=c,r.onabort=c,r.send(e.body)})},mE=pE,wE=(t,e={})=>e.onUploadProgress!=null?yE(t,e):mE(t,e),bE=t=>{const e=new _a;for(const r of t.trim().split(/[\r\n]+/)){const n=r.indexOf(": ");n>0&&e.set(r.slice(0,n),r.slice(n+1))}return e};class vE extends zd{constructor(e,r,n){super(r,n),Object.defineProperty(this,"url",{value:e})}}const el=Md.bind({ignoreUndefined:!0}),ki=Na("kubo-rpc-client:fetch"),xE={throwHttpErrors:!0,credentials:"same-origin"},it=class it{constructor(e={}){S(this,"opts");this.opts=el({},xE,e)}async fetch(e,r={}){const n=el({},this.opts,r),i=new _a(n.headers);if(typeof e!="string"&&!(e instanceof Bi.URL||e instanceof gE))throw new TypeError("`resource` must be a string, URL, or Request");const s=new Bi.URL(e.toString(),n.base),{searchParams:o,transformSearchParams:a,json:c}=n;o!=null&&(typeof a=="function"?s.search=a(new Bi.URLSearchParams(n.searchParams)):s.search=new Bi.URLSearchParams(n.searchParams).toString()),c!=null&&(n.body=JSON.stringify(n.json),i.set("content-type","application/json"));const f=[n.signal];n.timeout!=null&&isNaN(n.timeout)&&n.timeout>0&&f.push(AbortSignal.timeout(n.timeout));const u=Jt(f);try{globalThis.ReadableStream!=null&&n.body instanceof globalThis.ReadableStream&&(cs||ls)&&(n.body=new Blob(await Pu(us(n.body)))),ki.trace("outgoing headers",n.headers),ki.trace("%s %s",n.method,s);const h=await wE(s.toString(),{...n,signal:n.signal,timeout:void 0,headers:i,duplex:"half"});if(ki("%s %s %d",n.method,s,h.status),ki.trace("incoming headers",h.headers),!h.ok&&n.throwHttpErrors===!0)throw n.handleError!=null&&await n.handleError(h),new Qc(h);return h.iterator=async function*(){yield*SE(h.body)},h.ndjson=async function*(){for await(const p of EE(h.iterator()))r.transform!=null?yield r.transform(p):yield p},h}finally{u.clear()}}async post(e,r={}){return this.fetch(e,{...r,method:"POST"})}async get(e,r={}){return this.fetch(e,{...r,method:"GET"})}async put(e,r={}){return this.fetch(e,{...r,method:"PUT"})}async delete(e,r={}){return this.fetch(e,{...r,method:"DELETE"})}async options(e,r={}){return this.fetch(e,{...r,method:"OPTIONS"})}};S(it,"HTTPError",Qc),S(it,"TimeoutError",jd),S(it,"post",async(e,r)=>new it(r).post(e,r)),S(it,"get",async(e,r)=>new it(r).get(e,r)),S(it,"put",async(e,r)=>new it(r).put(e,r)),S(it,"delete",async(e,r)=>new it(r).delete(e,r)),S(it,"options",async(e,r)=>new it(r).options(e,r));let vr=it;const EE=async function*(t){const e=new TextDecoder;let r="";for await(const n of t){r+=e.decode(n,{stream:!0});const i=r.split(/\r?\n/);for(let s=0;s<i.length-1;s++){const o=i[s].trim();o.length>0&&(yield JSON.parse(o))}r=i[i.length-1]}r+=e.decode(),r=r.trim(),r.length!==0&&(yield JSON.parse(r))},SE=t=>{if(AE(t))return t;if(kE(t)){const e=t[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:e.next.bind(e),return(r){return t.destroy(),typeof e.return=="function"?e.return():Promise.resolve({done:!0,value:r})}}}}}if(BE(t)){const e=t.getReader();return async function*(){try{for(;;){const{done:r,value:n}=await e.read();if(r)return;n!=null&&(yield n)}}finally{e.releaseLock()}}()}throw new TypeError("Body can't be converted to AsyncIterable")},AE=t=>t!==null&&typeof t[Symbol.asyncIterator]=="function",BE=t=>t!=null&&typeof t.getReader=="function",kE=t=>Object.prototype.hasOwnProperty.call(t,"readable")&&Object.prototype.hasOwnProperty.call(t,"writable"),TE=[ue("tcp").code,ue("dns").code,ue("dnsaddr").code,ue("dns4").code,ue("dns6").code];function tl(t){var e;return(e=Gd("sni",t))==null?void 0:e[1]}function rl(t){var r;const e=(r=Gd("tcp",t))==null?void 0:r[1];return e==null?"":`:${e}`}function Gd(t,e){let r;try{r=ue(t).code}catch{return}for(const[n,i]of e)if(n===r&&i!=null)return[n,i]}function nl(t){return t.some(([e,r])=>e===ue("tls").code)}function nt(t,e,r){const n=qd[ue(t).name];if(n==null)throw new Error(`Can't interpret protocol ${ue(t).name}`);const i=n(e,r);return t===ue("ip6").code?`[${i}]`:i}const qd={ip4:(t,e)=>t,ip6:(t,e)=>e.length===0?t:`[${t}]`,tcp:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`tcp://${nt(r[0],r[1]??"",e)}:${t}`},udp:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`udp://${nt(r[0],r[1]??"",e)}:${t}`},dnsaddr:(t,e)=>t,dns4:(t,e)=>t,dns6:(t,e)=>t,dns:(t,e)=>t,ipfs:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${nt(r[0],r[1]??"",e)}/ipfs/${t}`},p2p:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${nt(r[0],r[1]??"",e)}/p2p/${t}`},http:(t,e)=>{const r=nl(e),n=tl(e),i=rl(e);if(r&&n!=null)return`https://${n}${i}`;const s=r?"https://":"http://",o=e.pop();if(o==null)throw new Error("Unexpected end of multiaddr");let a=nt(o[0],o[1]??"",e);return a=a.replace("tcp://",""),`${s}${a}`},"http-path":(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");const n=nt(r[0],r[1]??"",e),i=decodeURIComponent(t);return`${n}/${i}`},tls:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return nt(r[0],r[1]??"",e)},sni:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return nt(r[0],r[1]??"",e)},https:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");let n=nt(r[0],r[1]??"",e);return n=n.replace("tcp://",""),`https://${n}`},ws:(t,e)=>{const r=nl(e),n=tl(e),i=rl(e);if(r&&n!=null)return`wss://${n}${i}`;const s=r?"wss://":"ws://",o=e.pop();if(o==null)throw new Error("Unexpected end of multiaddr");let a=nt(o[0],o[1]??"",e);return a=a.replace("tcp://",""),`${s}${a}`},wss:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");let n=nt(r[0],r[1]??"",e);return n=n.replace("tcp://",""),`wss://${n}`},"p2p-websocket-star":(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${nt(r[0],r[1]??"",e)}/p2p-websocket-star`},"p2p-webrtc-star":(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${nt(r[0],r[1]??"",e)}/p2p-webrtc-star`},"p2p-webrtc-direct":(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${nt(r[0],r[1]??"",e)}/p2p-webrtc-direct`}};function IE(t,e){const n=st(t).stringTuples(),i=n.pop();if(i==null)throw new Error("Unexpected end of multiaddr");const s=ue(i[0]),o=qd[s.name];if(o==null)throw new Error(`No interpreter found for ${s.name}`);let a=o(i[1]??"",n);return TE.includes(i[0])&&(a=a.replace(/^.*:\/\//,""),i[1]==="443"?a=`https://${a}`:a=`http://${a}`),(a.startsWith("http://")||a.startsWith("https://")||a.startsWith("ws://")||a.startsWith("wss://"))&&(a=new URL(a).toString(),a.endsWith("/")&&(a=a.substring(0,a.length-1))),a}function il(t){try{t=IE(st(t))}catch{}return t=t.toString(),t}const sl=Na("js-kubo-rpc-client:lib:error-handler"),CE=Md.bind({ignoreUndefined:!0}),NE=cs||ls?location.protocol:"http",_E=cs||ls?location.hostname:"localhost",OE=cs||ls?location.port:"5001",UE=(t={})=>{let e,r={},n;if(typeof t=="string"||Di(t))e=new URL(il(t));else if(t instanceof URL)e=t;else if(typeof t.url=="string"||Di(t.url))e=new URL(il(t.url)),r=t;else if(t.url instanceof URL)e=t.url,r=t;else{r=t??{};const i=(r.protocol??NE).replace(":",""),s=(r.host??_E).split(":")[0],o=r.port??OE;e=new URL(`${i}://${s}:${o}`)}if(r.apiPath!=null?e.pathname=r.apiPath:(e.pathname==="/"||e.pathname===void 0)&&(e.pathname="api/v0"),bw){const i=tE();n=r.agent??new i({keepAlive:!0,maxSockets:6})}return{...r,host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:n}},PE=async t=>{let e;try{if((t.headers.get("Content-Type")??"").startsWith("application/json")){const n=await t.json();sl(n),e=n.Message??n.message}else e=await t.text()}catch(n){sl("Failed to parse error response",n),e=n.message}let r=new vr.HTTPError(t);throw e!=null&&(e.includes("deadline has elapsed")&&(r=new vr.TimeoutError),e.includes("context deadline exceeded")&&(r=new vr.TimeoutError),e.includes("request timed out")&&(r=new vr.TimeoutError),r.message=e),r},DE=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,ol=t=>t.replace(DE,function(e){return"-"+e.toLowerCase()}),$E=t=>typeof t=="string"?ae(t)??0:t;class RE extends vr{constructor(e={}){const r=UE(e);super({timeout:r.timeout!=null?$E(r.timeout):void 0,headers:r.headers,base:`${r.url}`,handleError:PE,transformSearchParams:i=>{const s=new URLSearchParams;for(const[o,a]of i)a!=="undefined"&&a!=="null"&&o!=="signal"&&o!=="timeout"&&s.append(ol(o),a),o==="timeout"&&!isNaN(parseInt(a))&&s.append(ol(o),a);return s},agent:r.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;const n=this.fetch;this.fetch=async(i,s={})=>(typeof i=="string"&&!i.startsWith("/")&&(i=`${r.url}/${i}`),n.call(this,i,CE(s,{method:"POST"})))}}const LE=async t=>Promise.reject(new Error(`No base found for "${t}"`));class FE{constructor(e){S(this,"_basesByName");S(this,"_basesByPrefix");S(this,"_loadBase");this._basesByName={},this._basesByPrefix={},this._loadBase=e.loadBase??LE;for(const r of e.bases)this.addBase(r)}addBase(e){if(this._basesByName[e.name]!=null&&this._basesByPrefix[e.prefix]!=null)throw new Error(`Codec already exists for codec "${e.name}"`);this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}removeBase(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}async getBase(e){if(this._basesByName[e]!=null)return this._basesByName[e];if(this._basesByPrefix[e]!=null)return this._basesByPrefix[e];const r=await this._loadBase(e);return this._basesByName[r.name]==null&&this._basesByPrefix[r.prefix]==null&&this.addBase(r),r}listBases(){return Object.values(this._basesByName)}}const ME=async t=>Promise.reject(new Error(`No codec found for "${t}"`));class HE{constructor(e){S(this,"_codecsByName");S(this,"_codecsByCode");S(this,"_loadCodec");this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec??ME;for(const r of e.codecs)this.addCodec(r)}addCodec(e){if(this._codecsByName[e.name]!=null||this._codecsByCode[e.code]!=null)throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){const r=typeof e=="string"?this._codecsByName:this._codecsByCode;if(r[e]!=null)return r[e];const n=await this._loadCodec(e);return r[e]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}}const VE=async t=>Promise.reject(new Error(`No hasher found for "${t}"`));class jE{constructor(e){S(this,"_hashersByName");S(this,"_hashersByCode");S(this,"_loadHasher");this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher??VE;for(const r of e.hashers)this.addHasher(r)}addHasher(e){if(this._hashersByName[e.name]!=null||this._hashersByCode[e.code]!=null)throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){const r=typeof e=="string"?this._hashersByName:this._hashersByCode;if(r[e]!=null)return r[e];const n=await this._loadHasher(e);return r[e]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}}function zE(t){return async function(e,r,n={}){const i=await t.post("log/level",{signal:n.signal,searchParams:R({arg:[e,r],...n}),headers:n.headers});return je(await i.json())}}function GE(t){return async function(r={}){return(await(await t.post("log/ls",{signal:r.signal,searchParams:R(r),headers:r.headers})).json()).Strings}}function qE(t){return async function*(r={}){yield*(await t.post("log/tail",{signal:r.signal,searchParams:R(r),headers:r.headers})).ndjson()}}function WE(t){return{level:zE(t),ls:GE(t),tail:qE(t)}}function KE(t){return async function*(r,n={}){const i=`${r instanceof Uint8Array?Q.decode(r):r}`;async function s(a){let c=a.Hash;if(c.includes("/")===!0){const u=c.startsWith("/ipfs/")===!0?c:`/ipfs/${c}`;c=(await Dd(t)(u)).cid}else c=Q.parse(c);return{name:a.Name,path:i+(a.Name!=null?`/${a.Name}`:""),size:a.Size,cid:c,type:YE(a)}}const o=await t.post("ls",{signal:n.signal,searchParams:R({arg:i,...n}),headers:n.headers});for await(let a of o.ndjson()){if(a=a.Objects,a==null)throw new Error("expected .Objects in results");if(a=a[0],a==null)throw new Error("expected one array in results.Objects");const c=a.Links;if(!Array.isArray(c))throw new Error("expected one array in results.Objects[0].Links");if(c.length===0){yield s(a);return}yield*c.map(s)}}}function YE(t){switch(t.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}function ZE(t){return async function(r={}){const n=await t.post("dns",{signal:r.signal,searchParams:R(r),headers:r.headers});return je(await n.json())}}function JE(t){return async function(r,n={}){const i=await t.post("name/publish",{signal:n.signal,searchParams:R({arg:`${r}`,...n}),headers:n.headers});return je(await i.json())}}function XE(t){return async function(r,n={}){const i=await t.post("name/pubsub/cancel",{signal:n.signal,searchParams:R({arg:r,...n}),headers:n.headers});return je(await i.json())}}function QE(t){return async function(r={}){const n=await t.post("name/pubsub/state",{signal:r.signal,searchParams:R(r),headers:r.headers});return je(await n.json())}}function e2(t){return async function(r={}){return(await(await t.post("name/pubsub/subs",{signal:r.signal,searchParams:R(r),headers:r.headers})).json()).Strings??[]}}function t2(t){return{cancel:XE(t),state:QE(t),subs:e2(t)}}function r2(t){return async function*(r,n={}){const i=await t.post("name/resolve",{signal:n.signal,searchParams:R({arg:r,stream:!0,...n}),headers:n.headers});for await(const s of i.ndjson())yield s.Path}}function n2(t){return{publish:JE(t),resolve:r2(t),pubsub:t2(t)}}function i2(t){return async function(r,n,i={}){const s=await t.post("object/patch/add-link",{signal:i.signal,searchParams:R({arg:[`${r}`,n.Name??n.name??"",(n.Hash??n.cid??"").toString()??null],...i}),headers:i.headers}),{Hash:o}=await s.json();return Q.parse(o)}}function s2(t){return async function(r,n,i={}){const s=await t.post("object/patch/rm-link",{signal:i.signal,searchParams:R({arg:[`${r}`,n.Name??n.name??null],...i}),headers:i.headers}),{Hash:o}=await s.json();return Q.parse(o)}}function o2(t){return{addLink:i2(t),rmLink:s2(t)}}function a2(t,e){return{patch:o2(t)}}function c2(t){return Symbol.iterator in t}function l2(t){return Symbol.asyncIterator in t}function al(t){return Q.asCID(t)!=null}async function*Wd(t){if(t==null)throw new wt(`Unexpected input: ${t}`);const e=Q.asCID(t);if(e!=null){yield Xe({cid:e});return}if(typeof t=="string"){yield Xe({path:t});return}if(t.cid!=null||t.path!=null)return yield Xe(t);if(c2(t)){const r=t[Symbol.iterator](),n=r.next();if(n.done===!0)return r;if(al(n.value)){yield Xe({cid:n.value});for(const i of r)yield Xe({cid:i});return}if(typeof n.value=="string"){yield Xe({path:n.value});for(const i of r)yield Xe({path:i});return}if(n.value.cid!=null||n.value.path!=null){yield Xe(n.value);for(const i of r)yield Xe(i);return}throw new wt(`Unexpected input: ${typeof t}`)}if(l2(t)){const r=t[Symbol.asyncIterator](),n=await r.next();if(n.done===!0)return r;if(al(n.value)){yield Xe({cid:n.value});for await(const i of r)yield Xe({cid:i});return}if(typeof n.value=="string"){yield Xe({path:n.value});for await(const i of r)yield Xe({path:i});return}if(n.value.cid!=null||n.value.path!=null){yield Xe(n.value);for await(const i of r)yield Xe(i);return}throw new wt(`Unexpected input: ${typeof t}`)}throw new wt(`Unexpected input: ${typeof t}`)}function Xe(t){const e=t.cid??`${t.path}`;if(e==null)throw new wt("Unexpected input: Please path either a CID or an IPFS path");const r={path:e,recursive:t.recursive!==!1};return t.metadata!=null&&(r.metadata=t.metadata),r}function Kd(t){return async function*(r,n={}){for await(const{path:i,recursive:s,metadata:o}of Wd(r)){const a=await t.post("pin/add",{signal:n.signal,searchParams:R({...n,arg:i,recursive:s,metadata:o!=null?JSON.stringify(o):void 0,stream:!0}),headers:n.headers});for await(const c of a.ndjson()){if(c.Pins!=null){for(const f of c.Pins)yield Q.parse(f);continue}yield Q.parse(c)}}}}function u2(t){const e=Kd(t);return async function(n,i={}){const s=await hs(e([{path:n.toString(),...i}],i));if(s==null)throw new Error("No response received");return s}}function cl(t,e,r){const n={type:t,cid:Q.parse(e)};return r!=null&&(n.metadata=r),n}function f2(t){return async function*(r={}){let n=[];r.paths!=null&&(n=Array.isArray(r.paths)?r.paths:[r.paths]);const i=await t.post("pin/ls",{signal:r.signal,searchParams:R({...r,arg:n.map(s=>`${s}`),stream:!0}),headers:r.headers});for await(const s of i.ndjson()){if(s.Keys!=null){for(const o of Object.keys(s.Keys))yield cl(s.Keys[o].Type,o,s.Keys[o].Metadata);return}yield cl(s.Type,s.Cid,s.Metadata)}}}const Yd=({Name:t,Status:e,Cid:r})=>({cid:Q.parse(r),name:t,status:e}),Zd=t=>{if(typeof t=="string"&&t!=="")return t;throw new TypeError("service name must be passed")},Jd=t=>{if(Q.asCID(t)!=null)return t.toString();throw new TypeError(`CID instance expected instead of ${typeof t}`)},Oa=({service:t,cid:e,name:r,status:n,all:i})=>{const s=R({service:Zd(t),name:r,force:i===!0?!0:void 0});if(e!=null)for(const o of e)s.append("cid",Jd(o));if(n!=null)for(const o of n)s.append("status",o);return s},d2=(t,{service:e,background:r,name:n,origins:i})=>{const s=R({arg:Jd(t),service:Zd(e),name:n,background:r===!0?!0:void 0});if(i!=null)for(const o of i)s.append("origin",o.toString());return s};function h2(t){return async function(r,{timeout:n,signal:i,headers:s,...o}){const a=await t.post("pin/remote/add",{timeout:n,signal:i,headers:s,searchParams:d2(r,o)});return Yd(await a.json())}}function p2(t){return async function*({timeout:r,signal:n,headers:i,...s}){const o=await t.post("pin/remote/ls",{timeout:r,signal:n,headers:i,searchParams:Oa(s)});for await(const a of o.ndjson())yield Yd(a)}}function g2(t){return async function({timeout:r,signal:n,headers:i,...s}){await t.post("pin/remote/rm",{timeout:r,signal:n,headers:i,searchParams:Oa({...s,all:!0})})}}function y2(t){return async function({timeout:r,signal:n,headers:i,...s}){await t.post("pin/remote/rm",{timeout:r,signal:n,headers:i,searchParams:Oa({...s,all:!1})})}}function m2(t){const e=String(t);if(e==="undefined")throw Error("endpoint is required");return e[e.length-1]==="/"?e.slice(0,-1):e}function w2(t){const e={service:t.Service,endpoint:new URL(t.ApiEndpoint)};return t.Stat!=null&&(e.stat=b2(t.Stat)),e}function b2(t){switch(t.Status){case"valid":{const{Pinning:e,Pinned:r,Queued:n,Failed:i}=t.PinCount;return{status:"valid",pinCount:{queued:n,pinning:e,pinned:r,failed:i}}}case"invalid":return{status:"invalid"};default:return{status:t.Status}}}function v2(t){return async function(r,n){const{endpoint:i,key:s,headers:o,timeout:a,signal:c}=n;await t.post("pin/remote/service/add",{timeout:a,signal:c,searchParams:R({arg:[r,m2(i),s]}),headers:o})}}function x2(t){return async function(r={}){const{stat:n,headers:i,timeout:s,signal:o}=r;return(await(await t.post("pin/remote/service/ls",{timeout:s,signal:o,headers:i,searchParams:n===!0?R({stat:n}):void 0})).json()).RemoteServices.map(w2)}}function E2(t){return async function(r,n={}){await t.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:R({arg:r})})}}function S2(t){return{add:v2(t),ls:x2(t),rm:E2(t)}}function A2(t){return{add:h2(t),ls:p2(t),rm:y2(t),rmAll:g2(t),service:S2(t)}}function Xd(t){return async function*(r,n={}){for await(const{path:i,recursive:s}of Wd(r)){const o=new URLSearchParams(n.searchParams);o.append("arg",`${i}`),s!=null&&o.set("recursive",String(s));const a=await t.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:R({...n,arg:`${i}`,recursive:s})});for await(const c of a.ndjson()){if(c.Pins!=null){yield*c.Pins.map(f=>Q.parse(f));continue}yield Q.parse(c)}}}}function B2(t){const e=Xd(t);return async function(n,i={}){const s=await hs(e([{path:n.toString(),...i}],i));if(s==null)throw new Error("No response received");return s}}function k2(t){return{addAll:Kd(t),add:u2(t),ls:f2(t),rmAll:Xd(t),rm:B2(t),remote:A2(t)}}function T2(t){return async function*(r,n={}){yield*(await t.post("ping",{signal:n.signal,searchParams:R({arg:`${r}`,...n}),headers:n.headers,transform:je})).ndjson()}}const I2=t=>Array.isArray(t)?t.map(Oo):t,Oo=t=>Le(_n(t)),_n=t=>ns.decode(t),C2=t=>BigInt(`0x${Le(ns.decode(t),"base16")}`),Ua=t=>ns.encode(Tt(t));function N2(t){return async function(r={}){const{Strings:n}=await(await t.post("pubsub/ls",{signal:r.signal,searchParams:R(r),headers:r.headers})).json();return I2(n)??[]}}function _2(t){return async function(r,n={}){const i=await t.post("pubsub/peers",{signal:n.signal,searchParams:R({arg:Ua(r),...n}),headers:n.headers}),{Strings:s}=await i.json();return s??[]}}function O2(t){return async function(r,n,i={}){const s=R({arg:Ua(r),...i}),o=new AbortController,a=Jt([o.signal,i.signal]);try{await(await t.post("pubsub/pub",{signal:a,searchParams:s,...await yr([n],o,i.headers)})).text()}finally{a.clear()}}}const U2=Na("js-kubo-rpc-client:pubsub:subscribe");function P2(t,e){return async function(n,i,s={}){s.signal=e.subscribe(n,i,s.signal);let o,a;const c=new Promise((u,h)=>{o=u,a=h}),f=setTimeout(()=>{o()},1e3);return t.post("pubsub/sub",{signal:s.signal,searchParams:R({arg:Ua(n),...s}),headers:s.headers}).catch(u=>{e.unsubscribe(n,i),a(u)}).then(u=>{clearTimeout(f),u!=null&&(D2(u,{onMessage:h=>{if(i!=null){if(typeof i=="function"){i(h);return}typeof i.handleEvent=="function"&&i.handleEvent(h)}},onEnd:()=>{e.unsubscribe(n,i)},onError:s.onError}),o())}),c}}async function D2(t,{onMessage:e,onEnd:r,onError:n}){n=n??U2;try{for await(const i of t.ndjson())try{if(i.from==null)continue;i.from!=null&&i.seqno!=null?e({type:"signed",from:ct(i.from),data:_n(i.data),sequenceNumber:C2(i.seqno),topic:Oo(i.topicIDs[0]),key:i.key!=null?s1(_n(i.key??"u")):void 0,signature:_n(i.signature??"u")}):e({type:"unsigned",data:_n(i.data),topic:Oo(i.topicIDs[0])})}catch(s){s.message=`Failed to parse pubsub message: ${s.message}`,n(s,!1,i)}}catch(i){$2(i)||n(i,!0)}finally{r()}}const $2=t=>{switch(t.type){case"aborted":return!0;case"abort":return!0;default:return t.name==="AbortError"}};class R2{constructor(){S(this,"_subs");this._subs=new Map}subscribe(e,r,n){const i=this._subs.get(e)??[];if(i.find(o=>o.handler===r)!=null)throw new Error(`Already subscribed to ${e} with this handler`);const s=new AbortController;return this._subs.set(e,[{handler:r,controller:s}].concat(i)),n!=null&&n.addEventListener("abort",()=>{this.unsubscribe(e,r)}),s.signal}unsubscribe(e,r){const n=this._subs.get(e)??[];let i;r!=null?(this._subs.set(e,n.filter(s=>s.handler!==r)),i=n.filter(s=>s.handler===r)):(this._subs.set(e,[]),i=n),(this._subs.get(e)??[]).length===0&&this._subs.delete(e),i.forEach(s=>{s.controller.abort()})}}function L2(t,e){return async function(n,i){e.unsubscribe(n,i)}}function F2(t){const e=new R2;return{ls:N2(t),peers:_2(t),publish:O2(t),subscribe:P2(t,e),unsubscribe:L2(t,e)}}function M2(t){return async function*(r={}){yield*(await t.post("refs/local",{signal:r.signal,transform:je,searchParams:R(r),headers:r.headers})).ndjson()}}function H2(t){async function*e(r,n={}){const i=Array.isArray(r)?r:[r];yield*(await t.post("refs",{signal:n.signal,searchParams:R({arg:i.map(o=>`${o instanceof Uint8Array?Q.decode(o):o}`),...n}),headers:n.headers,transform:je})).ndjson()}return Object.assign(e,{local:M2(t)})}function V2(t){return async function*(r={}){yield*(await t.post("repo/gc",{signal:r.signal,searchParams:R(r),headers:r.headers,transform:i=>{var s;return{err:i.Error!=null?new Error(i.Error):null,cid:((s=i.Key)==null?void 0:s["/"])!=null?Q.parse(i.Key["/"]):null}}})).ndjson()}}function Qd(t){return async function(r={}){const i=await(await t.post("repo/stat",{signal:r.signal,searchParams:R(r),headers:r.headers})).json();return{numObjects:BigInt(i.NumObjects),repoSize:BigInt(i.RepoSize),repoPath:i.RepoPath,version:i.Version,storageMax:BigInt(i.StorageMax)}}}function j2(t){return async function(r={}){return(await(await t.post("repo/version",{signal:r.signal,searchParams:R(r),headers:r.headers})).json()).Version}}function z2(t){return{gc:V2(t),stat:Qd(t),version:j2(t)}}function G2(t){return async function(r,n={}){const i=await t.post("resolve",{signal:n.signal,searchParams:R({arg:r,...n}),headers:n.headers}),{Path:s}=await i.json();return s}}function q2(t){return async function*(r,n={}){const i=await t.post("routing/findpeer",{signal:n.signal,searchParams:R({arg:r.toString(),stream:!0,...n}),headers:n.headers});for await(const s of i.ndjson())yield mn(s)}}function W2(t){return async function*(r,n={}){const i=await t.post("routing/findprovs",{signal:n.signal,searchParams:R({arg:r.toString(),...n}),headers:n.headers});for await(const s of i.ndjson())yield mn(s)}}function K2(t){return async function*(r,n={}){const i=await t.post("routing/get",{signal:n.signal,searchParams:R({arg:r instanceof Uint8Array?Le(r):r.toString(),...n}),headers:n.headers});for await(const s of i.ndjson())yield mn(s)}}function Y2(t){return async function*(r,n={recursive:!1}){const i=Array.isArray(r)?r:[r],s=await t.post("routing/provide",{signal:n.signal,searchParams:R({arg:i.map(o=>o.toString()),...n}),headers:n.headers});for await(const o of s.ndjson())yield mn(o)}}function Z2(t){return async function*(r,n,i={}){const s=new AbortController,o=Jt([s.signal,i.signal]);try{const a=await t.post("routing/put",{signal:o,searchParams:R({arg:r instanceof Uint8Array?Le(r):r.toString(),stream:!0,...i}),...await yr([n],s,i.headers)});for await(const c of a.ndjson())yield mn(c)}finally{o.clear()}}}function J2(t){return{findPeer:q2(t),findProvs:W2(t),get:K2(t),provide:Y2(t),put:Z2(t)}}function X2(t){return async function*(r={}){yield*(await t.post("stats/bw",{signal:r.signal,searchParams:R(r),headers:r.headers,transform:i=>({totalIn:BigInt(i.TotalIn),totalOut:BigInt(i.TotalOut),rateIn:parseFloat(i.RateIn),rateOut:parseFloat(i.RateOut)})})).ndjson()}}function Q2(t){return{bitswap:Ud(t),repo:Qd(t),bw:X2(t)}}function eS(t){return async function(r={}){await(await t.post("shutdown",{signal:r.signal,searchParams:R(r),headers:r.headers})).text()}}function tS(t){return async function(r={}){const n=await t.post("swarm/addrs",{signal:r.signal,searchParams:R(r),headers:r.headers}),{Addrs:i}=await n.json();return Object.keys(i).map(s=>({id:ct(s),addrs:(i[s]??[]).map(o=>st(o))}))}}function rS(t){return async function(r,n={}){const i=await t.post("swarm/connect",{signal:n.signal,searchParams:R({arg:r,...n}),headers:n.headers}),{Strings:s}=await i.json();return s??[]}}function nS(t){return async function(r,n={}){const i=await t.post("swarm/disconnect",{signal:n.signal,searchParams:R({arg:r,...n}),headers:n.headers}),{Strings:s}=await i.json();return s??[]}}function iS(t){return async function(r={}){const n=await t.post("swarm/addrs/local",{signal:r.signal,searchParams:R(r),headers:r.headers}),{Strings:i}=await n.json();return(i??[]).map(s=>st(s))}}function sS(t){return async function(r={}){return((await(await t.post("swarm/peers",{signal:r.signal,searchParams:R(r),headers:r.headers})).json()).Peers??[]).map(s=>({addr:st(s.Addr),peer:ct(s.Peer),muxer:s.Muxer,latency:s.Latency,streams:s.Streams,direction:s.Direction==null?void 0:s.Direction===0?"inbound":"outbound"}))}}function oS(t){return{addrs:tS(t),connect:rS(t),disconnect:nS(t),localAddrs:iS(t),peers:sS(t)}}function aS(t){return async function(r={}){const n=await t.post("version",{signal:r.signal,searchParams:R(r),headers:r.headers});return{...je(await n.json()),"ipfs-http-client":"1.0.0"}}}class cS{constructor(e){S(this,"bases");S(this,"codecs");S(this,"hashers");S(this,"bitswap");S(this,"block");S(this,"bootstrap");S(this,"config");S(this,"dag");S(this,"dht");S(this,"diag");S(this,"files");S(this,"key");S(this,"log");S(this,"name");S(this,"object");S(this,"pin");S(this,"pubsub");S(this,"refs");S(this,"repo");S(this,"routing");S(this,"stats");S(this,"swarm");S(this,"add");S(this,"addAll");S(this,"cat");S(this,"get");S(this,"ls");S(this,"id");S(this,"version");S(this,"stop");S(this,"ping");S(this,"resolve");S(this,"commands");S(this,"mount");S(this,"isOnline");S(this,"getEndpointConfig");var a,c,f,u,h,p;const r=new RE(e),n={name:Ar.name,code:Ar.code,encode:m=>m,decode:m=>m},i=Object.values(Pi);(((a=e.ipld)==null?void 0:a.bases)??[]).forEach(m=>i.push(m)),this.bases=new FE({bases:i,loadBase:(c=e.ipld)==null?void 0:c.loadBase});const s=Object.values(Tg);[dm,I0,q0,dw,n].concat(((f=e.ipld)==null?void 0:f.codecs)??[]).forEach(m=>{s.push(m)}),this.codecs=new HE({codecs:s,loadCodec:(u=e.ipld)==null?void 0:u.loadCodec});const o=Object.values(kg);(((h=e.ipld)==null?void 0:h.hashers)??[]).forEach(m=>o.push(m)),this.hashers=new jE({hashers:o,loadHasher:(p=e.ipld)==null?void 0:p.loadHasher}),this.bitswap=b1(r),this.block=A1(r),this.bootstrap=I1(r),this.config=L1(r),this.dag=q1(r,this.codecs),this.dht=rx(r),this.diag=ox(r),this.files=bx(r),this.key=Cx(r),this.log=WE(r),this.name=n2(r),this.object=a2(r,this.codecs),this.pin=k2(r),this.pubsub=F2(r),this.refs=H2(r),this.repo=z2(r),this.routing=J2(r),this.stats=Q2(r),this.swarm=oS(r),this.add=Rw(r),this.addAll=$u(r),this.cat=C1(r),this.get=xx(r),this.ls=KE(r),this.id=$d(r),this.version=aS(r),this.stop=eS(r),this.ping=T2(r),this.resolve=G2(r),this.commands=N1(r),this.mount=ZE(r),this.isOnline=Ex(r),this.getEndpointConfig=vx(r)}}function lS(t){return new cS(t)}function uS(t={}){return(typeof t=="string"||Di(t)||t instanceof URL)&&(t={url:t}),lS(t)}var fS=Ye('<img class="svelte-re623r">'),dS=Ye("<audio controls><source></audio>"),hS=Ye('<video controls class="svelte-re623r"><source> <track kind="captions"></video>',2),pS=Ye(`<object class="svelte-re623r"><p>Your browser can't render an <code>&lt;object&gt;</code> of type <q></q>.</p></object>`);function Pa(t,e){pr(e,!0);const{debug:r}=be;let n=kt(e,"content",15);const{cid:i,title:s,type:o}=e.datum;let a=Nl(()=>{if(o==null)return"undefined";const[p,m,y]=Array.from(o.match(/^([^/]+)\/(.*)$/)??[]);return r&&console.debug({klass:m,ext:y}),y!=="svg+xml"?m:"object"});var c=Ds(),f=On(c);{var u=p=>{var m=fS();_e(m,"id",i),_e(m,"alt",s),dt(m,y=>n(y),()=>n()),ft(y=>_e(m,"src",y),[()=>mi({cid:i})]),Ue(p,m)},h=p=>{var m=Ds(),y=On(m);{var b=x=>{var B=dS();_e(B,"id",i),_e(B,"tabindex",-1);var A=ve(B);_e(A,"type",o),we(B),dt(B,I=>n(I),()=>n()),ft(I=>_e(A,"src",I),[()=>mi({cid:i})]),Ue(x,B)},w=x=>{var B=Ds(),A=On(B);{var I=N=>{var C=hS();_e(C,"id",i),_e(C,"tabindex",-1);var _=ve(C);_e(_,"type",o),Gt(2),we(C),dt(C,O=>n(O),()=>n()),ft(O=>_e(_,"src",O),[()=>mi({cid:i})]),Ue(N,C)},D=N=>{var C=pS();_e(C,"id",i),_e(C,"title",s),_e(C,"type",o);var _=ve(C),O=Ce(ve(_),3);O.textContent=o,Gt(),we(_),we(C),dt(C,J=>n(J),()=>n()),ft(J=>_e(C,"data",J),[()=>mi({cid:i})]),Ue(N,C)};Gr(A,N=>{P(a)==="video"?N(I):N(D,!1)},!0)}Ue(x,B)};Gr(y,x=>{P(a)==="audio"?x(b):x(w,!1)},!0)}Ue(p,m)};Gr(f,p=>{P(a)==="image"?p(u):p(h,!1)})}Ue(t,c),gr()}var gS=(t,e)=>{var r;return(r=e())==null?void 0:r.close()},yS=(t,e)=>{var r;return(r=e())==null?void 0:r.close()},mS=(t,e,r)=>{const n=new CustomEvent("datum-delete",{detail:{id:e.datum.id},bubbles:!0});r().dispatchEvent(n)},wS=Ye('<dialog><h1> </h1> <button id="x" commandfor="close" class="svelte-1dmd0h1">⨯</button> <form class="svelte-1dmd0h1"><!> <nav class="svelte-1dmd0h1"><button id="cancel" type="button" accesskey="c" commandfor="close" class="svelte-1dmd0h1"><u>C</u>ancel</button> <button id="delete" accesskey="r" class="svelte-1dmd0h1"><u>R</u>emove</button></nav></form></dialog>');function bS(t,e){pr(e,!0);let r=kt(e,"handle",15,null),n=Ne(null);var i=wS(),s=ve(i),o=ve(s);we(s);var a=Ce(s,2);a.__click=[gS,r];var c=Ce(a,2),f=ve(c);Pa(f,{get datum(){return e.datum}});var u=Ce(f,2),h=ve(u);h.__click=[yS,r];var p=Ce(h,2);p.__click=[mS,e,r],dt(p,m=>pe(n,m),()=>P(n)),we(u),we(c),we(i),dt(i,m=>r(m),()=>r()),ft(()=>Qi(o,`Delete ${e.datum.title??""}?`)),Yr("open",i,()=>{console.debug({opened:r()}),Lo().then(()=>{var m;return(m=P(n))==null?void 0:m.focus()})}),Yr("submit",c,m=>m.preventDefault()),Ue(t,i),gr()}Yn(["click"]);var eh={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,r,n,i){var s=["","webkit","Moz","MS","ms","o"],o=r.createElement("div"),a="function",c=Math.round,f=Math.abs,u=Date.now;function h(l,d,g){return setTimeout(A(l,g),d)}function p(l,d,g){return Array.isArray(l)?(m(l,g[d],g),!0):!1}function m(l,d,g){var k;if(l)if(l.forEach)l.forEach(d,g);else if(l.length!==i)for(k=0;k<l.length;)d.call(g,l[k],k,l),k++;else for(k in l)l.hasOwnProperty(k)&&d.call(g,l[k],k,l)}function y(l,d,g){var k="DEPRECATED METHOD: "+d+`
`+g+` AT 
`;return function(){var $=new Error("get-stack-trace"),z=$&&$.stack?$.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",oe=e.console&&(e.console.warn||e.console.log);return oe&&oe.call(e.console,k,z),l.apply(this,arguments)}}var b;typeof Object.assign!="function"?b=function(d){if(d===i||d===null)throw new TypeError("Cannot convert undefined or null to object");for(var g=Object(d),k=1;k<arguments.length;k++){var $=arguments[k];if($!==i&&$!==null)for(var z in $)$.hasOwnProperty(z)&&(g[z]=$[z])}return g}:b=Object.assign;var w=y(function(d,g,k){for(var $=Object.keys(g),z=0;z<$.length;)(!k||k&&d[$[z]]===i)&&(d[$[z]]=g[$[z]]),z++;return d},"extend","Use `assign`."),x=y(function(d,g){return w(d,g,!0)},"merge","Use `assign`.");function B(l,d,g){var k=d.prototype,$;$=l.prototype=Object.create(k),$.constructor=l,$._super=k,g&&b($,g)}function A(l,d){return function(){return l.apply(d,arguments)}}function I(l,d){return typeof l==a?l.apply(d&&d[0]||i,d):l}function D(l,d){return l===i?d:l}function N(l,d,g){m(J(d),function(k){l.addEventListener(k,g,!1)})}function C(l,d,g){m(J(d),function(k){l.removeEventListener(k,g,!1)})}function _(l,d){for(;l;){if(l==d)return!0;l=l.parentNode}return!1}function O(l,d){return l.indexOf(d)>-1}function J(l){return l.trim().split(/\s+/g)}function K(l,d,g){if(l.indexOf&&!g)return l.indexOf(d);for(var k=0;k<l.length;){if(g&&l[k][g]==d||!g&&l[k]===d)return k;k++}return-1}function q(l){return Array.prototype.slice.call(l,0)}function ce(l,d,g){for(var k=[],$=[],z=0;z<l.length;){var oe=l[z][d];K($,oe)<0&&k.push(l[z]),$[z]=oe,z++}return k=k.sort(function(Fe,Je){return Fe[d]>Je[d]}),k}function L(l,d){for(var g,k,$=d[0].toUpperCase()+d.slice(1),z=0;z<s.length;){if(g=s[z],k=g?g+$:d,k in l)return k;z++}return i}var j=1;function E(){return j++}function T(l){var d=l.ownerDocument||l;return d.defaultView||d.parentWindow||e}var U=/mobile|tablet|ip(ad|hone|od)|android/i,M="ontouchstart"in e,W=L(e,"PointerEvent")!==i,Y=M&&U.test(navigator.userAgent),ee="touch",re="pen",X="mouse",le="kinect",he=25,se=1,ye=2,ne=4,fe=8,Ie=1,H=2,te=4,me=8,Be=16,ze=H|te,vt=me|Be,mr=ze|vt,tt=["x","y"],Ft=["clientX","clientY"];function Ze(l,d){var g=this;this.manager=l,this.callback=d,this.element=l.element,this.target=l.options.inputTarget,this.domHandler=function(k){I(l.options.enable,[l])&&g.handler(k)},this.init()}Ze.prototype={handler:function(){},init:function(){this.evEl&&N(this.element,this.evEl,this.domHandler),this.evTarget&&N(this.target,this.evTarget,this.domHandler),this.evWin&&N(T(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(T(this.element),this.evWin,this.domHandler)}};function bn(l){var d,g=l.options.inputClass;return g?d=g:W?d=ks:Y?d=fi:M?d=Ts:d=ui,new d(l,ni)}function ni(l,d,g){var k=g.pointers.length,$=g.changedPointers.length,z=d&se&&k-$===0,oe=d&(ne|fe)&&k-$===0;g.isFirst=!!z,g.isFinal=!!oe,z&&(l.session={}),g.eventType=d,ii(l,g),l.emit("hammer.input",g),l.recognize(g),l.session.prevInput=g}function ii(l,d){var g=l.session,k=d.pointers,$=k.length;g.firstInput||(g.firstInput=vn(d)),$>1&&!g.firstMultiple?g.firstMultiple=vn(d):$===1&&(g.firstMultiple=!1);var z=g.firstInput,oe=g.firstMultiple,De=oe?oe.center:z.center,Fe=d.center=ai(k);d.timeStamp=u(),d.deltaTime=d.timeStamp-z.timeStamp,d.angle=Bs(De,Fe),d.distance=Fr(De,Fe),si(g,d),d.offsetDirection=li(d.deltaX,d.deltaY);var Je=ci(d.deltaTime,d.deltaX,d.deltaY);d.overallVelocityX=Je.x,d.overallVelocityY=Je.y,d.overallVelocity=f(Je.x)>f(Je.y)?Je.x:Je.y,d.scale=oe?dh(oe.pointers,k):1,d.rotation=oe?fh(oe.pointers,k):0,d.maxPointers=g.prevInput?d.pointers.length>g.prevInput.maxPointers?d.pointers.length:g.prevInput.maxPointers:d.pointers.length,oi(g,d);var Nt=l.element;_(d.srcEvent.target,Nt)&&(Nt=d.srcEvent.target),d.target=Nt}function si(l,d){var g=d.center,k=l.offsetDelta||{},$=l.prevDelta||{},z=l.prevInput||{};(d.eventType===se||z.eventType===ne)&&($=l.prevDelta={x:z.deltaX||0,y:z.deltaY||0},k=l.offsetDelta={x:g.x,y:g.y}),d.deltaX=$.x+(g.x-k.x),d.deltaY=$.y+(g.y-k.y)}function oi(l,d){var g=l.lastInterval||d,k=d.timeStamp-g.timeStamp,$,z,oe,De;if(d.eventType!=fe&&(k>he||g.velocity===i)){var Fe=d.deltaX-g.deltaX,Je=d.deltaY-g.deltaY,Nt=ci(k,Fe,Je);z=Nt.x,oe=Nt.y,$=f(Nt.x)>f(Nt.y)?Nt.x:Nt.y,De=li(Fe,Je),l.lastInterval=d}else $=g.velocity,z=g.velocityX,oe=g.velocityY,De=g.direction;d.velocity=$,d.velocityX=z,d.velocityY=oe,d.direction=De}function vn(l){for(var d=[],g=0;g<l.pointers.length;)d[g]={clientX:c(l.pointers[g].clientX),clientY:c(l.pointers[g].clientY)},g++;return{timeStamp:u(),pointers:d,center:ai(d),deltaX:l.deltaX,deltaY:l.deltaY}}function ai(l){var d=l.length;if(d===1)return{x:c(l[0].clientX),y:c(l[0].clientY)};for(var g=0,k=0,$=0;$<d;)g+=l[$].clientX,k+=l[$].clientY,$++;return{x:c(g/d),y:c(k/d)}}function ci(l,d,g){return{x:d/l||0,y:g/l||0}}function li(l,d){return l===d?Ie:f(l)>=f(d)?l<0?H:te:d<0?me:Be}function Fr(l,d,g){g||(g=tt);var k=d[g[0]]-l[g[0]],$=d[g[1]]-l[g[1]];return Math.sqrt(k*k+$*$)}function Bs(l,d,g){g||(g=tt);var k=d[g[0]]-l[g[0]],$=d[g[1]]-l[g[1]];return Math.atan2($,k)*180/Math.PI}function fh(l,d){return Bs(d[1],d[0],Ft)+Bs(l[1],l[0],Ft)}function dh(l,d){return Fr(d[0],d[1],Ft)/Fr(l[0],l[1],Ft)}var hh={mousedown:se,mousemove:ye,mouseup:ne},ph="mousedown",gh="mousemove mouseup";function ui(){this.evEl=ph,this.evWin=gh,this.pressed=!1,Ze.apply(this,arguments)}B(ui,Ze,{handler:function(d){var g=hh[d.type];g&se&&d.button===0&&(this.pressed=!0),g&ye&&d.which!==1&&(g=ne),this.pressed&&(g&ne&&(this.pressed=!1),this.callback(this.manager,g,{pointers:[d],changedPointers:[d],pointerType:X,srcEvent:d}))}});var yh={pointerdown:se,pointermove:ye,pointerup:ne,pointercancel:fe,pointerout:fe},mh={2:ee,3:re,4:X,5:le},La="pointerdown",Fa="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(La="MSPointerDown",Fa="MSPointerMove MSPointerUp MSPointerCancel");function ks(){this.evEl=La,this.evWin=Fa,Ze.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}B(ks,Ze,{handler:function(d){var g=this.store,k=!1,$=d.type.toLowerCase().replace("ms",""),z=yh[$],oe=mh[d.pointerType]||d.pointerType,De=oe==ee,Fe=K(g,d.pointerId,"pointerId");z&se&&(d.button===0||De)?Fe<0&&(g.push(d),Fe=g.length-1):z&(ne|fe)&&(k=!0),!(Fe<0)&&(g[Fe]=d,this.callback(this.manager,z,{pointers:g,changedPointers:[d],pointerType:oe,srcEvent:d}),k&&g.splice(Fe,1))}});var wh={touchstart:se,touchmove:ye,touchend:ne,touchcancel:fe},bh="touchstart",vh="touchstart touchmove touchend touchcancel";function Ma(){this.evTarget=bh,this.evWin=vh,this.started=!1,Ze.apply(this,arguments)}B(Ma,Ze,{handler:function(d){var g=wh[d.type];if(g===se&&(this.started=!0),!!this.started){var k=xh.call(this,d,g);g&(ne|fe)&&k[0].length-k[1].length===0&&(this.started=!1),this.callback(this.manager,g,{pointers:k[0],changedPointers:k[1],pointerType:ee,srcEvent:d})}}});function xh(l,d){var g=q(l.touches),k=q(l.changedTouches);return d&(ne|fe)&&(g=ce(g.concat(k),"identifier")),[g,k]}var Eh={touchstart:se,touchmove:ye,touchend:ne,touchcancel:fe},Sh="touchstart touchmove touchend touchcancel";function fi(){this.evTarget=Sh,this.targetIds={},Ze.apply(this,arguments)}B(fi,Ze,{handler:function(d){var g=Eh[d.type],k=Ah.call(this,d,g);k&&this.callback(this.manager,g,{pointers:k[0],changedPointers:k[1],pointerType:ee,srcEvent:d})}});function Ah(l,d){var g=q(l.touches),k=this.targetIds;if(d&(se|ye)&&g.length===1)return k[g[0].identifier]=!0,[g,g];var $,z,oe=q(l.changedTouches),De=[],Fe=this.target;if(z=g.filter(function(Je){return _(Je.target,Fe)}),d===se)for($=0;$<z.length;)k[z[$].identifier]=!0,$++;for($=0;$<oe.length;)k[oe[$].identifier]&&De.push(oe[$]),d&(ne|fe)&&delete k[oe[$].identifier],$++;if(De.length)return[ce(z.concat(De),"identifier"),De]}var Bh=2500,Ha=25;function Ts(){Ze.apply(this,arguments);var l=A(this.handler,this);this.touch=new fi(this.manager,l),this.mouse=new ui(this.manager,l),this.primaryTouch=null,this.lastTouches=[]}B(Ts,Ze,{handler:function(d,g,k){var $=k.pointerType==ee,z=k.pointerType==X;if(!(z&&k.sourceCapabilities&&k.sourceCapabilities.firesTouchEvents)){if($)kh.call(this,g,k);else if(z&&Th.call(this,k))return;this.callback(d,g,k)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function kh(l,d){l&se?(this.primaryTouch=d.changedPointers[0].identifier,Va.call(this,d)):l&(ne|fe)&&Va.call(this,d)}function Va(l){var d=l.changedPointers[0];if(d.identifier===this.primaryTouch){var g={x:d.clientX,y:d.clientY};this.lastTouches.push(g);var k=this.lastTouches,$=function(){var z=k.indexOf(g);z>-1&&k.splice(z,1)};setTimeout($,Bh)}}function Th(l){for(var d=l.srcEvent.clientX,g=l.srcEvent.clientY,k=0;k<this.lastTouches.length;k++){var $=this.lastTouches[k],z=Math.abs(d-$.x),oe=Math.abs(g-$.y);if(z<=Ha&&oe<=Ha)return!0}return!1}var ja=L(o.style,"touchAction"),za=ja!==i,Ga="compute",qa="auto",Is="manipulation",wr="none",xn="pan-x",En="pan-y",di=Ch();function Cs(l,d){this.manager=l,this.set(d)}Cs.prototype={set:function(l){l==Ga&&(l=this.compute()),za&&this.manager.element.style&&di[l]&&(this.manager.element.style[ja]=l),this.actions=l.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var l=[];return m(this.manager.recognizers,function(d){I(d.options.enable,[d])&&(l=l.concat(d.getTouchAction()))}),Ih(l.join(" "))},preventDefaults:function(l){var d=l.srcEvent,g=l.offsetDirection;if(this.manager.session.prevented){d.preventDefault();return}var k=this.actions,$=O(k,wr)&&!di[wr],z=O(k,En)&&!di[En],oe=O(k,xn)&&!di[xn];if($){var De=l.pointers.length===1,Fe=l.distance<2,Je=l.deltaTime<250;if(De&&Fe&&Je)return}if(!(oe&&z)&&($||z&&g&ze||oe&&g&vt))return this.preventSrc(d)},preventSrc:function(l){this.manager.session.prevented=!0,l.preventDefault()}};function Ih(l){if(O(l,wr))return wr;var d=O(l,xn),g=O(l,En);return d&&g?wr:d||g?d?xn:En:O(l,Is)?Is:qa}function Ch(){if(!za)return!1;var l={},d=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(g){l[g]=d?e.CSS.supports("touch-action",g):!0}),l}var hi=1,gt=2,Mr=4,er=8,Mt=er,Sn=16,Ct=32;function Ht(l){this.options=b({},this.defaults,l||{}),this.id=E(),this.manager=null,this.options.enable=D(this.options.enable,!0),this.state=hi,this.simultaneous={},this.requireFail=[]}Ht.prototype={defaults:{},set:function(l){return b(this.options,l),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(l){if(p(l,"recognizeWith",this))return this;var d=this.simultaneous;return l=pi(l,this),d[l.id]||(d[l.id]=l,l.recognizeWith(this)),this},dropRecognizeWith:function(l){return p(l,"dropRecognizeWith",this)?this:(l=pi(l,this),delete this.simultaneous[l.id],this)},requireFailure:function(l){if(p(l,"requireFailure",this))return this;var d=this.requireFail;return l=pi(l,this),K(d,l)===-1&&(d.push(l),l.requireFailure(this)),this},dropRequireFailure:function(l){if(p(l,"dropRequireFailure",this))return this;l=pi(l,this);var d=K(this.requireFail,l);return d>-1&&this.requireFail.splice(d,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(l){return!!this.simultaneous[l.id]},emit:function(l){var d=this,g=this.state;function k($){d.manager.emit($,l)}g<er&&k(d.options.event+Wa(g)),k(d.options.event),l.additionalEvent&&k(l.additionalEvent),g>=er&&k(d.options.event+Wa(g))},tryEmit:function(l){if(this.canEmit())return this.emit(l);this.state=Ct},canEmit:function(){for(var l=0;l<this.requireFail.length;){if(!(this.requireFail[l].state&(Ct|hi)))return!1;l++}return!0},recognize:function(l){var d=b({},l);if(!I(this.options.enable,[this,d])){this.reset(),this.state=Ct;return}this.state&(Mt|Sn|Ct)&&(this.state=hi),this.state=this.process(d),this.state&(gt|Mr|er|Sn)&&this.tryEmit(d)},process:function(l){},getTouchAction:function(){},reset:function(){}};function Wa(l){return l&Sn?"cancel":l&er?"end":l&Mr?"move":l&gt?"start":""}function Ka(l){return l==Be?"down":l==me?"up":l==H?"left":l==te?"right":""}function pi(l,d){var g=d.manager;return g?g.get(l):l}function xt(){Ht.apply(this,arguments)}B(xt,Ht,{defaults:{pointers:1},attrTest:function(l){var d=this.options.pointers;return d===0||l.pointers.length===d},process:function(l){var d=this.state,g=l.eventType,k=d&(gt|Mr),$=this.attrTest(l);return k&&(g&fe||!$)?d|Sn:k||$?g&ne?d|er:d&gt?d|Mr:gt:Ct}});function gi(){xt.apply(this,arguments),this.pX=null,this.pY=null}B(gi,xt,{defaults:{event:"pan",threshold:10,pointers:1,direction:mr},getTouchAction:function(){var l=this.options.direction,d=[];return l&ze&&d.push(En),l&vt&&d.push(xn),d},directionTest:function(l){var d=this.options,g=!0,k=l.distance,$=l.direction,z=l.deltaX,oe=l.deltaY;return $&d.direction||(d.direction&ze?($=z===0?Ie:z<0?H:te,g=z!=this.pX,k=Math.abs(l.deltaX)):($=oe===0?Ie:oe<0?me:Be,g=oe!=this.pY,k=Math.abs(l.deltaY))),l.direction=$,g&&k>d.threshold&&$&d.direction},attrTest:function(l){return xt.prototype.attrTest.call(this,l)&&(this.state&gt||!(this.state&gt)&&this.directionTest(l))},emit:function(l){this.pX=l.deltaX,this.pY=l.deltaY;var d=Ka(l.direction);d&&(l.additionalEvent=this.options.event+d),this._super.emit.call(this,l)}});function Ns(){xt.apply(this,arguments)}B(Ns,xt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[wr]},attrTest:function(l){return this._super.attrTest.call(this,l)&&(Math.abs(l.scale-1)>this.options.threshold||this.state&gt)},emit:function(l){if(l.scale!==1){var d=l.scale<1?"in":"out";l.additionalEvent=this.options.event+d}this._super.emit.call(this,l)}});function _s(){Ht.apply(this,arguments),this._timer=null,this._input=null}B(_s,Ht,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[qa]},process:function(l){var d=this.options,g=l.pointers.length===d.pointers,k=l.distance<d.threshold,$=l.deltaTime>d.time;if(this._input=l,!k||!g||l.eventType&(ne|fe)&&!$)this.reset();else if(l.eventType&se)this.reset(),this._timer=h(function(){this.state=Mt,this.tryEmit()},d.time,this);else if(l.eventType&ne)return Mt;return Ct},reset:function(){clearTimeout(this._timer)},emit:function(l){this.state===Mt&&(l&&l.eventType&ne?this.manager.emit(this.options.event+"up",l):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}});function Os(){xt.apply(this,arguments)}B(Os,xt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[wr]},attrTest:function(l){return this._super.attrTest.call(this,l)&&(Math.abs(l.rotation)>this.options.threshold||this.state&gt)}});function Us(){xt.apply(this,arguments)}B(Us,xt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:ze|vt,pointers:1},getTouchAction:function(){return gi.prototype.getTouchAction.call(this)},attrTest:function(l){var d=this.options.direction,g;return d&(ze|vt)?g=l.overallVelocity:d&ze?g=l.overallVelocityX:d&vt&&(g=l.overallVelocityY),this._super.attrTest.call(this,l)&&d&l.offsetDirection&&l.distance>this.options.threshold&&l.maxPointers==this.options.pointers&&f(g)>this.options.velocity&&l.eventType&ne},emit:function(l){var d=Ka(l.offsetDirection);d&&this.manager.emit(this.options.event+d,l),this.manager.emit(this.options.event,l)}});function yi(){Ht.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}B(yi,Ht,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Is]},process:function(l){var d=this.options,g=l.pointers.length===d.pointers,k=l.distance<d.threshold,$=l.deltaTime<d.time;if(this.reset(),l.eventType&se&&this.count===0)return this.failTimeout();if(k&&$&&g){if(l.eventType!=ne)return this.failTimeout();var z=this.pTime?l.timeStamp-this.pTime<d.interval:!0,oe=!this.pCenter||Fr(this.pCenter,l.center)<d.posThreshold;this.pTime=l.timeStamp,this.pCenter=l.center,!oe||!z?this.count=1:this.count+=1,this._input=l;var De=this.count%d.taps;if(De===0)return this.hasRequireFailures()?(this._timer=h(function(){this.state=Mt,this.tryEmit()},d.interval,this),gt):Mt}return Ct},failTimeout:function(){return this._timer=h(function(){this.state=Ct},this.options.interval,this),Ct},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Mt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function tr(l,d){return d=d||{},d.recognizers=D(d.recognizers,tr.defaults.preset),new Ps(l,d)}tr.VERSION="2.0.7",tr.defaults={domEvents:!1,touchAction:Ga,enable:!0,inputTarget:null,inputClass:null,preset:[[Os,{enable:!1}],[Ns,{enable:!1},["rotate"]],[Us,{direction:ze}],[gi,{direction:ze},["swipe"]],[yi],[yi,{event:"doubletap",taps:2},["tap"]],[_s]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Nh=1,Ya=2;function Ps(l,d){this.options=b({},tr.defaults,d||{}),this.options.inputTarget=this.options.inputTarget||l,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=l,this.input=bn(this),this.touchAction=new Cs(this,this.options.touchAction),Za(this,!0),m(this.options.recognizers,function(g){var k=this.add(new g[0](g[1]));g[2]&&k.recognizeWith(g[2]),g[3]&&k.requireFailure(g[3])},this)}Ps.prototype={set:function(l){return b(this.options,l),l.touchAction&&this.touchAction.update(),l.inputTarget&&(this.input.destroy(),this.input.target=l.inputTarget,this.input.init()),this},stop:function(l){this.session.stopped=l?Ya:Nh},recognize:function(l){var d=this.session;if(!d.stopped){this.touchAction.preventDefaults(l);var g,k=this.recognizers,$=d.curRecognizer;(!$||$&&$.state&Mt)&&($=d.curRecognizer=null);for(var z=0;z<k.length;)g=k[z],d.stopped!==Ya&&(!$||g==$||g.canRecognizeWith($))?g.recognize(l):g.reset(),!$&&g.state&(gt|Mr|er)&&($=d.curRecognizer=g),z++}},get:function(l){if(l instanceof Ht)return l;for(var d=this.recognizers,g=0;g<d.length;g++)if(d[g].options.event==l)return d[g];return null},add:function(l){if(p(l,"add",this))return this;var d=this.get(l.options.event);return d&&this.remove(d),this.recognizers.push(l),l.manager=this,this.touchAction.update(),l},remove:function(l){if(p(l,"remove",this))return this;if(l=this.get(l),l){var d=this.recognizers,g=K(d,l);g!==-1&&(d.splice(g,1),this.touchAction.update())}return this},on:function(l,d){if(l!==i&&d!==i){var g=this.handlers;return m(J(l),function(k){g[k]=g[k]||[],g[k].push(d)}),this}},off:function(l,d){if(l!==i){var g=this.handlers;return m(J(l),function(k){d?g[k]&&g[k].splice(K(g[k],d),1):delete g[k]}),this}},emit:function(l,d){this.options.domEvents&&_h(l,d);var g=this.handlers[l]&&this.handlers[l].slice();if(!(!g||!g.length)){d.type=l,d.preventDefault=function(){d.srcEvent.preventDefault()};for(var k=0;k<g.length;)g[k](d),k++}},destroy:function(){this.element&&Za(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Za(l,d){var g=l.element;if(g.style){var k;m(l.options.cssProps,function($,z){k=L(g.style,z),d?(l.oldCssProps[k]=g.style[k],g.style[k]=$):g.style[k]=l.oldCssProps[k]||""}),d||(l.oldCssProps={})}}function _h(l,d){var g=r.createEvent("Event");g.initEvent(l,!0,!0),g.gesture=d,d.target.dispatchEvent(g)}b(tr,{INPUT_START:se,INPUT_MOVE:ye,INPUT_END:ne,INPUT_CANCEL:fe,STATE_POSSIBLE:hi,STATE_BEGAN:gt,STATE_CHANGED:Mr,STATE_ENDED:er,STATE_RECOGNIZED:Mt,STATE_CANCELLED:Sn,STATE_FAILED:Ct,DIRECTION_NONE:Ie,DIRECTION_LEFT:H,DIRECTION_RIGHT:te,DIRECTION_UP:me,DIRECTION_DOWN:Be,DIRECTION_HORIZONTAL:ze,DIRECTION_VERTICAL:vt,DIRECTION_ALL:mr,Manager:Ps,Input:Ze,TouchAction:Cs,TouchInput:fi,MouseInput:ui,PointerEventInput:ks,TouchMouseInput:Ts,SingleTouchInput:Ma,Recognizer:Ht,AttrRecognizer:xt,Tap:yi,Pan:gi,Swipe:Us,Pinch:Ns,Rotate:Os,Press:_s,on:N,off:C,each:m,merge:x,extend:w,assign:b,inherit:B,bindFn:A,prefixed:L});var Oh=typeof e<"u"?e:typeof self<"u"?self:{};Oh.Hammer=tr,t.exports?t.exports=tr:e[n]=tr})(window,document,"Hammer")})(eh);var vS=eh.exports;const xS=es(vS);function Qs({condition:t=()=>!0,branch:e={if:()=>{},else:()=>{}}}){return()=>{var r,n;return t!=null&&t()?(r=e==null?void 0:e.if)==null?void 0:r.call(e):(n=e==null?void 0:e.else)==null?void 0:n.call(e)}}var ES=()=>{},SS=(t,e,r,n,i,s)=>{t.stopImmediatePropagation(),["z","Escape"].includes(t.key)?e().close():["Enter","ArrowRight"].includes(t.key)?r(1):["ArrowLeft"].includes(t.key)?r(-1):[" "].includes(t.key)&&P(n)instanceof HTMLMediaElement?i["play|pause"]():["m"].includes(t.key)&&P(n)instanceof HTMLMediaElement?i["(un)?mute"]():["+","="].includes(t.key)?s({factor:1.2}):["-","_"].includes(t.key)?s({factor:.8}):["f"].includes(t.key)&&P(n)instanceof HTMLMediaElement?i.fullscreen():console.debug({"dialog:onkeypress":{"🔑":t.key}})},AS=Ye('<dialog class="zoom svelte-1fdhmlk"><h1 class="svelte-1fdhmlk"> </h1> <!></dialog>');function BS(t,e){pr(e,!0);let r=kt(e,"handle",15,null),n=Ne(null);const{debug:i}=be;function s({factor:y=1,scale:b=0}){if(!P(n))throw new Error("`content` is null.");const w=getComputedStyle(P(n));let x=Number(w.scale);isNaN(x)&&(x=1);let B=x*y+b;i&&console.debug({zoom:x,factor:y,scale:b,next:B}),P(n).style.scale=String(B),r().style.setProperty("--max-width","auto"),r().style.setProperty("--max-height","auto")}function o({factor:y=1,scale:b=0}){if(!P(n))throw new Error("`content` is null.");if(!(P(n)instanceof HTMLMediaElement))i&&console.warn("`content` is not a media element.");else{const w=P(n).volume;let x=w*y+b;i&&console.debug({volume:w,factor:y,scale:b,next:x})}}function a({factor:y=1,scale:b=0}){if(!P(n))throw new Error("`content` is null.");if(!(P(n)instanceof HTMLMediaElement))i&&console.warn("`content` is not a media element.");else{const w=P(n).currentTime;let x=w*y+b;i&&console.debug({time:w,factor:y,scale:b,next:x}),P(n).currentTime=x}}const c=(()=>{const b=Object.fromEntries(["play|pause","(un)?mute","fullscreen"].map(w=>[w,()=>{}]));if(!P(n))throw new Error("`content` is null.");if(!(P(n)instanceof HTMLMediaElement))i&&console.warn("`content` is not a media element.");else{const w=P(n);Object.assign(b,{"play|pause":Qs({condition:()=>w.paused,branch:{if:()=>w.play(),else:()=>w.pause()}}),"(un)?mute":Qs({branch:{if:()=>w.muted=!w.muted}}),fullscreen:Qs({condition:()=>!!document.fullscreenElement,branch:{if:()=>document.exitFullscreen(),else:()=>w.requestFullscreen()}})})}return b})();function f(y){var x,B,A,I,D;let b=r();const w=y>=0;if(Math.abs(y)>0)do b=(B=(x=b.closest("li"))==null?void 0:x[w?"previousElementSibling":"nextElementSibling"])==null?void 0:B.querySelector(".zoom"),b||(b=(D=(I=(A=r().closest("li"))==null?void 0:A.parentElement)==null?void 0:I[w?"lastElementChild":"firstElementChild"])==null?void 0:D.querySelector(".zoom")),y+=w?-1:1;while(Math.abs(y)>0&&b);b&&(r().close(),b.showModal())}Xi(()=>{const y=new xS(r());y.get("pinch").set({enable:!0}),y.on("swiperight",()=>{f(1)}),y.on("swipeleft",()=>{f(-1)}),y.on("panright",()=>{a({scale:2})}),y.on("panleft",()=>{a({scale:-2})}),y.on("panup",()=>{o({scale:20})}),y.on("pandown",()=>{o({scale:-20})}),y.on("pinchin",()=>{s({factor:.8})}),y.on("pinchout",()=>{s({factor:1.2})}),y.on("tap",()=>{var b;(b=c["play/pause"])==null||b.call(c)}),y.on("doubletap",()=>{r().close()})});var u=AS();u.__click=[ES],u.__keydown=[SS,r,f,n,c,s];var h=ve(u),p=ve(h,!0);we(h);var m=Ce(h,2);Pa(m,{get datum(){return e.datum},get content(){return P(n)},set content(y){pe(n,Ee(y))}}),we(u),dt(u,y=>r(y),()=>r()),ft(()=>Qi(p,e.datum.title)),Ue(t,u),gr()}Yn(["click","keydown"]);var kS=(t,e,r)=>{var n;t.preventDefault(),console.debug({"summary:onclick":{open:(n=P(e))==null?void 0:n.open,content:P(r),evt:t}})},TS=Ye('<details><summary class="svelte-16ok2cr"></summary> <!></details> <!> <!>',1);function IS(t,e){pr(e,!0);const{debug:r}=be;class n extends Error{constructor(){super("Not a media element.")}}let i=kt(e,"datum",11,null),s=kt(e,"open",15,!1),o=Ne(null),a=Ne(null);if(i()==null)throw new Error(" `null` `datum`.");const{id:c,cid:f,title:u,type:h}=i();let p=Ne(null),m=Ne(null),y=Ne(null);const{single:b}=be;Xi(()=>{var E;e.index===0&&((E=P(o))==null||E.focus())});function w(E){const{play:T=null,pitch:U=null}=E??{};if(!(P(a)instanceof HTMLMediaElement)){if(U===!1)return;throw r&&console.debug({rejecting:P(a)}),new n}(P(a).paused||T===!0)&&T!==!1?(r&&console.debug({playing:P(a)}),P(a).play()):(r&&console.debug({pausing:P(a)}),P(a).pause())}be.register(w,{itemId:c});function x(E){P(p)&&((!s()||(E==null?void 0:E.open)===!0)&&(E==null?void 0:E.open)!==!1?(r&&console.debug({opening:P(p)}),s(!0)):(r&&console.debug({closing:P(p)}),s(!1),w({play:!1,pitch:!1})))}be.register(x,{itemId:c});function B(){return s()}be.register(B,{itemId:c});function A(){var E,T,U,M,W;r&&console.debug({zoom:{datum:i(),open:(E=P(y))==null?void 0:E.open,modal:(T=P(y))==null?void 0:T.matches(":modal")}}),(U=P(y))!=null&&U.matches(":modal")?(M=P(y))==null||M.close():(W=P(y))==null||W.showModal()}be.register(A,{itemId:c});function I(){var E;(E=P(m))==null||E.showModal()}be.register(I,{itemId:c});let D=Nl(()=>s()?{open:s()}:{});var N=TS(),C=On(N),_=E=>{E.ctrlKey&&s()&&A()},O=E=>{const T=E.currentTarget;r&&console.debug({"details:onkeypress":{"🔑":E.key,open:T.open}}),E.key==="Escape"?x({open:!1}):T.open&&E.key==="Enter"&&(E.preventDefault(),x({open:!1}))},J=E=>{var T;if(/^Arrow(Up|Down)$/.test(E.key)){const U=E.currentTarget.closest("li"),M=E.key.endsWith("Up")?U==null?void 0:U.previousElementSibling:U==null?void 0:U.nextElementSibling;if(!M)return;(T=M.querySelector("summary"))==null||T.focus(),E.preventDefault()}};let K;var q=ve(C);_e(q,"tabindex",0),q.__click=[kS,p,a],q.textContent=u,dt(q,E=>pe(o,E),()=>P(o));var ce=Ce(q,2);Pa(ce,{get datum(){return i()},get content(){return P(a)},set content(E){pe(a,Ee(E))}}),we(C),dt(C,E=>pe(p,E),()=>P(p));var L=Ce(C,2);bS(L,{get datum(){return i()},get handle(){return P(m)},set handle(E){pe(m,Ee(E))}});var j=Ce(L,2);BS(j,{get datum(){return i()},get handle(){return P(y)},set handle(E){pe(y,Ee(E))}}),ft(()=>{K=Fh(C,K,{...P(D),name:`file${(b?"":`-${e.index+1}`)??""}`,id:`deets-${e.index+1}`,onclick:_,onkeypress:O,onkeydown:J},"svelte-16ok2cr"),_e(q,"id",`sum-${e.index+1}`)}),Yr("keypress",q,E=>{const T=E.currentTarget.closest("details");T&&(r&&console.debug({"summary:onclick":{"🔑":E.key,open:T==null?void 0:T.open,content:P(a),evt:E}}),T.open&&E.key===" "&&(E.preventDefault(),E.stopImmediatePropagation()))}),Ue(t,N),gr()}Yn(["click"]);var CS=Ye('<div class="border-solid rounded p-2 bg-white dark:bg-white/25"> </div>');function NS(t,e){pr(e,!0);var r=CS(),n=ve(r,!0);we(r),ft(()=>Qi(n,e.datum.title)),Ue(t,r),gr()}function _S(t){if(Array.isArray(t))return t}function OS(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,a=[],c=!0,f=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(u){f=!0,i=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(f)throw i}}return a}}function Uo(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function th(t,e){if(t){if(typeof t=="string")return Uo(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Uo(t,e):void 0}}function US(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Da(t,e){return _S(t)||OS(t,e)||th(t,e)||US()}var _r={},ti={};Object.defineProperty(ti,"__esModule",{value:!0});ti.bind=void 0;function PS(t,e){var r=e.type,n=e.listener,i=e.options;return t.addEventListener(r,n,i),function(){t.removeEventListener(r,n,i)}}ti.bind=PS;var Es={},jr=io&&io.__assign||function(){return jr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},jr.apply(this,arguments)};Object.defineProperty(Es,"__esModule",{value:!0});Es.bindAll=void 0;var DS=ti;function ll(t){if(!(typeof t>"u"))return typeof t=="boolean"?{capture:t}:t}function $S(t,e){if(e==null)return t;var r=jr(jr({},t),{options:jr(jr({},ll(e)),ll(t.options))});return r}function RS(t,e,r){var n=e.map(function(i){var s=$S(i,r);return(0,DS.bind)(t,s)});return function(){n.forEach(function(s){return s()})}}Es.bindAll=RS;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.bindAll=t.bind=void 0;var e=ti;Object.defineProperty(t,"bind",{enumerable:!0,get:function(){return e.bind}});var r=Es;Object.defineProperty(t,"bindAll",{enumerable:!0,get:function(){return r.bindAll}})})(_r);var rh="data-pdnd-honey-pot";function nh(t){return t instanceof Element&&t.hasAttribute(rh)}function ih(t){var e=document.elementsFromPoint(t.x,t.y),r=Da(e,2),n=r[0],i=r[1];return n?nh(n)?i??null:n:null}function Gn(t){"@babel/helpers - typeof";return Gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gn(t)}function LS(t,e){if(Gn(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Gn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FS(t){var e=LS(t,"string");return Gn(e)=="symbol"?e:e+""}function ri(t,e,r){return(e=FS(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var sh=2147483647;function ul(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ul(Object(r),!0).forEach(function(n){ri(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ul(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var qn=2,dl=qn/2;function MS(t){return{x:Math.floor(t.x),y:Math.floor(t.y)}}function HS(t){return{x:t.x-dl,y:t.y-dl}}function VS(t){return{x:Math.max(t.x,0),y:Math.max(t.y,0)}}function jS(t){return{x:Math.min(t.x,window.innerWidth-qn),y:Math.min(t.y,window.innerHeight-qn)}}function hl(t){var e=t.client,r=jS(VS(HS(MS(e))));return DOMRect.fromRect({x:r.x,y:r.y,width:qn,height:qn})}function pl(t){var e=t.clientRect;return{left:"".concat(e.left,"px"),top:"".concat(e.top,"px"),width:"".concat(e.width,"px"),height:"".concat(e.height,"px")}}function zS(t){var e=t.client,r=t.clientRect;return e.x>=r.x&&e.x<=r.x+r.width&&e.y>=r.y&&e.y<=r.y+r.height}function GS(t){var e=t.initial,r=document.createElement("div");r.setAttribute(rh,"true");var n=hl({client:e});Object.assign(r.style,fl(fl({backgroundColor:"transparent",position:"fixed",padding:0,margin:0,boxSizing:"border-box"},pl({clientRect:n})),{},{pointerEvents:"auto",zIndex:sh})),document.body.appendChild(r);var i=_r.bind(window,{type:"pointermove",listener:function(o){var a={x:o.clientX,y:o.clientY};n=hl({client:a}),Object.assign(r.style,pl({clientRect:n}))},options:{capture:!0}});return function(o){var a=o.current;if(i(),zS({client:a,clientRect:n})){r.remove();return}function c(){f(),r.remove()}var f=_r.bindAll(window,[{type:"pointerdown",listener:c},{type:"pointermove",listener:c},{type:"focusin",listener:c},{type:"focusout",listener:c},{type:"dragstart",listener:c},{type:"dragenter",listener:c},{type:"dragover",listener:c}],{capture:!0})}}function qS(){var t=null;function e(){return t=null,_r.bind(window,{type:"pointermove",listener:function(i){t={x:i.clientX,y:i.clientY}},options:{capture:!0}})}function r(){var n=null;return function(s){var o=s.eventName,a=s.payload;if(o==="onDragStart"){var c,f=a.location.initial.input,u=(c=t)!==null&&c!==void 0?c:{x:f.clientX,y:f.clientY};n=GS({initial:u})}if(o==="onDrop"){var h,p=a.location.current.input;(h=n)===null||h===void 0||h({current:{x:p.clientX,y:p.clientY}}),n=null,t=null}}}return{bindEvents:e,getOnPostDispatch:r}}function WS(t){if(Array.isArray(t))return Uo(t)}function KS(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function YS(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oh(t){return WS(t)||KS(t)||th(t)||YS()}function $a(t){var e=null;return function(){if(!e){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var o=t.apply(this,i);e={result:o}}return e.result}}var ZS=$a(function(){return navigator.userAgent.includes("Firefox")}),Ss=$a(function(){var e=navigator,r=e.userAgent;return r.includes("AppleWebKit")&&!r.includes("Chrome")}),Po={isLeavingWindow:Symbol("leaving"),isEnteringWindow:Symbol("entering")};function JS(t){var e=t.dragLeave;return Ss()?e.hasOwnProperty(Po.isLeavingWindow):!1}(function(){if(typeof window>"u"||!Ss())return;function e(){return{enterCount:0,isOverWindow:!1}}var r=e();function n(){r=e()}_r.bindAll(window,[{type:"dragstart",listener:function(){r.enterCount=0,r.isOverWindow=!0}},{type:"drop",listener:n},{type:"dragend",listener:n},{type:"dragenter",listener:function(s){!r.isOverWindow&&r.enterCount===0&&(s[Po.isEnteringWindow]=!0),r.isOverWindow=!0,r.enterCount++}},{type:"dragleave",listener:function(s){r.enterCount--,r.isOverWindow&&r.enterCount===0&&(s[Po.isLeavingWindow]=!0,r.isOverWindow=!1)}}],{capture:!0})})();function XS(t){return"nodeName"in t}function QS(t){return XS(t)&&t.ownerDocument!==document}function eA(t){var e=t.dragLeave,r=e.type,n=e.relatedTarget;return r!=="dragleave"?!1:Ss()?JS({dragLeave:e}):n==null?!0:ZS()?QS(n):n instanceof HTMLIFrameElement}function tA(t){var e=t.onDragEnd;return[{type:"pointermove",listener:function(){var r=0;return function(){if(r<20){r++;return}e()}}()},{type:"pointerdown",listener:e}]}function $n(t){return{altKey:t.altKey,button:t.button,buttons:t.buttons,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}var rA=function(e){var r=[],n=null,i=function(){for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];r=a,!n&&(n=requestAnimationFrame(function(){n=null,e.apply(void 0,r)}))};return i.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},i},eo=rA(function(t){return t()}),Ti=function(){var t=null;function e(n){var i=requestAnimationFrame(function(){t=null,n()});t={frameId:i,fn:n}}function r(){t&&(cancelAnimationFrame(t.frameId),t.fn(),t=null)}return{schedule:e,flush:r}}();function nA(t){var e=t.source,r=t.initial,n=t.dispatchEvent,i={dropTargets:[]};function s(a){n(a),i={dropTargets:a.payload.location.current.dropTargets}}var o={start:function(c){var f=c.nativeSetDragImage,u={current:r,previous:i,initial:r};s({eventName:"onGenerateDragPreview",payload:{source:e,location:u,nativeSetDragImage:f}}),Ti.schedule(function(){s({eventName:"onDragStart",payload:{source:e,location:u}})})},dragUpdate:function(c){var f=c.current;Ti.flush(),eo.cancel(),s({eventName:"onDropTargetChange",payload:{source:e,location:{initial:r,previous:i,current:f}}})},drag:function(c){var f=c.current;eo(function(){Ti.flush();var u={initial:r,previous:i,current:f};s({eventName:"onDrag",payload:{source:e,location:u}})})},drop:function(c){var f=c.current,u=c.updatedSourcePayload;Ti.flush(),eo.cancel(),s({eventName:"onDrop",payload:{source:u??e,location:{current:f,previous:i,initial:r}}})}};return o}var Do={isActive:!1};function ah(){return!Do.isActive}function iA(t){return t.dataTransfer?t.dataTransfer.setDragImage.bind(t.dataTransfer):null}function sA(t){var e=t.current,r=t.next;if(e.length!==r.length)return!0;for(var n=0;n<e.length;n++)if(e[n].element!==r[n].element)return!0;return!1}function oA(t){var e=t.event,r=t.dragType,n=t.getDropTargetsOver,i=t.dispatchEvent;if(!ah())return;var s=aA({event:e,dragType:r,getDropTargetsOver:n});Do.isActive=!0;var o={current:s};to({event:e,current:s.dropTargets});var a=nA({source:r.payload,dispatchEvent:i,initial:s});function c(m){var y=sA({current:o.current.dropTargets,next:m.dropTargets});o.current=m,y&&a.dragUpdate({current:o.current})}function f(m){var y=$n(m),b=nh(m.target)?ih({x:y.clientX,y:y.clientY}):m.target,w=n({target:b,input:y,source:r.payload,current:o.current.dropTargets});w.length&&(m.preventDefault(),to({event:m,current:w})),c({dropTargets:w,input:y})}function u(){o.current.dropTargets.length&&c({dropTargets:[],input:o.current.input}),a.drop({current:o.current,updatedSourcePayload:null}),h()}function h(){Do.isActive=!1,p()}var p=_r.bindAll(window,[{type:"dragover",listener:function(y){f(y),a.drag({current:o.current})}},{type:"dragenter",listener:f},{type:"dragleave",listener:function(y){eA({dragLeave:y})&&(c({input:o.current.input,dropTargets:[]}),r.startedFrom==="external"&&u())}},{type:"drop",listener:function(y){if(o.current={dropTargets:o.current.dropTargets,input:$n(y)},!o.current.dropTargets.length){u();return}y.preventDefault(),to({event:y,current:o.current.dropTargets}),a.drop({current:o.current,updatedSourcePayload:r.type==="external"?r.getDropPayload(y):null}),h()}},{type:"dragend",listener:function(y){o.current={dropTargets:o.current.dropTargets,input:$n(y)},u()}}].concat(oh(tA({onDragEnd:u}))),{capture:!0});a.start({nativeSetDragImage:iA(e)})}function to(t){var e,r=t.event,n=t.current,i=(e=n[0])===null||e===void 0?void 0:e.dropEffect;i!=null&&r.dataTransfer&&(r.dataTransfer.dropEffect=i)}function aA(t){var e=t.event,r=t.dragType,n=t.getDropTargetsOver,i=$n(e);if(r.startedFrom==="external")return{input:i,dropTargets:[]};var s=n({input:i,source:r.payload,target:e.target,current:[]});return{input:i,dropTargets:s}}var gl={canStart:ah,start:oA},$o=new Map;function cA(t){var e=t.typeKey,r=t.mount,n=$o.get(e);if(n)return n.usageCount++,n;var i={typeKey:e,unmount:r(),usageCount:1};return $o.set(e,i),i}function lA(t){var e=cA(t);return function(){e.usageCount--,!(e.usageCount>0)&&(e.unmount(),$o.delete(t.typeKey))}}function As(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(){e.forEach(function(i){return i()})}}function ch(t,e){var r=e.attribute,n=e.value;return t.setAttribute(r,n),function(){return t.removeAttribute(r)}}function yl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ar(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yl(Object(r),!0).forEach(function(n){ri(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ro(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=uA(t))||e){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var f=r.next();return o=f.done,f},e:function(f){a=!0,s=f},f:function(){try{o||r.return==null||r.return()}finally{if(a)throw s}}}}function uA(t,e){if(t){if(typeof t=="string")return ml(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ml(t,e):void 0}}function ml(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function no(t){return t.slice(0).reverse()}function fA(t){var e=t.typeKey,r=t.defaultDropEffect,n=new WeakMap,i="data-drop-target-for-".concat(e),s="[".concat(i,"]");function o(m){return n.set(m.element,m),function(){return n.delete(m.element)}}function a(m){return As(ch(m.element,{attribute:i,value:"true"}),o(m))}function c(m){var y,b,w,x,B=m.source,A=m.target,I=m.input,D=m.result,N=D===void 0?[]:D;if(A==null)return N;if(!(A instanceof Element))return A instanceof Node?c({source:B,target:A.parentElement,input:I,result:N}):N;var C=A.closest(s);if(C==null)return N;var _=n.get(C);if(_==null)return N;var O={input:I,source:B,element:_.element};if(_.canDrop&&!_.canDrop(O))return c({source:B,target:_.element.parentElement,input:I,result:N});var J=(y=(b=_.getData)===null||b===void 0?void 0:b.call(_,O))!==null&&y!==void 0?y:{},K=(w=(x=_.getDropEffect)===null||x===void 0?void 0:x.call(_,O))!==null&&w!==void 0?w:r,q={data:J,element:_.element,dropEffect:K,isActiveDueToStickiness:!1};return c({source:B,target:_.element.parentElement,input:I,result:[].concat(oh(N),[q])})}function f(m){var y=m.eventName,b=m.payload,w=ro(b.location.current.dropTargets),x;try{for(w.s();!(x=w.n()).done;){var B,A=x.value,I=n.get(A.element),D=ar(ar({},b),{},{self:A});I==null||(B=I[y])===null||B===void 0||B.call(I,D)}}catch(N){w.e(N)}finally{w.f()}}var u={onGenerateDragPreview:f,onDrag:f,onDragStart:f,onDrop:f,onDropTargetChange:function(y){var b=y.payload,w=new Set(b.location.current.dropTargets.map(function(T){return T.element})),x=new Set,B=ro(b.location.previous.dropTargets),A;try{for(B.s();!(A=B.n()).done;){var I,D=A.value;x.add(D.element);var N=n.get(D.element),C=w.has(D.element),_=ar(ar({},b),{},{self:D});if(N==null||(I=N.onDropTargetChange)===null||I===void 0||I.call(N,_),!C){var O;N==null||(O=N.onDragLeave)===null||O===void 0||O.call(N,_)}}}catch(T){B.e(T)}finally{B.f()}var J=ro(b.location.current.dropTargets),K;try{for(J.s();!(K=J.n()).done;){var q,ce,L=K.value;if(!x.has(L.element)){var j=ar(ar({},b),{},{self:L}),E=n.get(L.element);E==null||(q=E.onDropTargetChange)===null||q===void 0||q.call(E,j),E==null||(ce=E.onDragEnter)===null||ce===void 0||ce.call(E,j)}}}catch(T){J.e(T)}finally{J.f()}}};function h(m){u[m.eventName](m)}function p(m){var y=m.source,b=m.target,w=m.input,x=m.current,B=c({source:y,target:b,input:w});if(B.length>=x.length)return B;for(var A=no(x),I=no(B),D=[],N=0;N<A.length;N++){var C,_=A[N],O=I[N];if(O!=null){D.push(O);continue}var J=D[N-1],K=A[N-1];if((J==null?void 0:J.element)!==(K==null?void 0:K.element))break;var q=n.get(_.element);if(!q)break;var ce={input:w,source:y,element:q.element};if(q.canDrop&&!q.canDrop(ce)||!((C=q.getIsSticky)!==null&&C!==void 0&&C.call(q,ce)))break;D.push(ar(ar({},_),{},{isActiveDueToStickiness:!0}))}return no(D)}return{dropTargetForConsumers:a,getIsOver:p,dispatchEvent:h}}function dA(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=hA(t))||e){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var f=r.next();return o=f.done,f},e:function(f){a=!0,s=f},f:function(){try{o||r.return==null||r.return()}finally{if(a)throw s}}}}function hA(t,e){if(t){if(typeof t=="string")return wl(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wl(t,e):void 0}}function wl(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function bl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bl(Object(r),!0).forEach(function(n){ri(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gA(){var t=new Set,e=null;function r(s){e&&(!s.canMonitor||s.canMonitor(e.canMonitorArgs))&&e.active.add(s)}function n(s){var o=pA({},s);return t.add(o),r(o),function(){t.delete(o),e&&e.active.delete(o)}}function i(s){var o=s.eventName,a=s.payload;if(o==="onGenerateDragPreview"){e={canMonitorArgs:{initial:a.location.initial,source:a.source},active:new Set};var c=dA(t),f;try{for(c.s();!(f=c.n()).done;){var u=f.value;r(u)}}catch(w){c.e(w)}finally{c.f()}}if(e){for(var h=Array.from(e.active),p=0,m=h;p<m.length;p++){var y=m[p];if(e.active.has(y)){var b;(b=y[o])===null||b===void 0||b.call(y,a)}}o==="onDrop"&&(e.active.clear(),e=null)}}return{dispatchEvent:i,monitorForConsumers:n}}function yA(t){var e=t.typeKey,r=t.mount,n=t.dispatchEventToSource,i=t.onPostDispatch,s=t.defaultDropEffect,o=gA(),a=fA({typeKey:e,defaultDropEffect:s});function c(h){n==null||n(h),a.dispatchEvent(h),o.dispatchEvent(h),i==null||i(h)}function f(h){var p=h.event,m=h.dragType;gl.start({event:p,dragType:m,getDropTargetsOver:a.getIsOver,dispatchEvent:c})}function u(){function h(){var p={canStart:gl.canStart,start:f};return r(p)}return lA({typeKey:e,mount:h})}return{registerUsage:u,dropTarget:a.dropTargetForConsumers,monitor:o.monitorForConsumers}}var mA=$a(function(){return navigator.userAgent.toLocaleLowerCase().includes("android")}),wA="pdnd:android-fallback",vl="text/plain",bA="text/uri-list",vA="application/vnd.pdnd",Ji=new WeakMap;function xA(t){return Ji.set(t.element,t),function(){Ji.delete(t.element)}}var xl=qS(),Ra=yA({typeKey:"element",defaultDropEffect:"move",mount:function(e){return As(xl.bindEvents(),_r.bind(document,{type:"dragstart",listener:function(n){var i,s,o,a,c,f;if(e.canStart(n)&&!n.defaultPrevented&&n.dataTransfer){var u=n.target;if(!(u instanceof HTMLElement))return null;var h=Ji.get(u);if(!h)return null;var p=$n(n),m={element:h.element,dragHandle:(i=h.dragHandle)!==null&&i!==void 0?i:null,input:p};if(h.canDrag&&!h.canDrag(m))return n.preventDefault(),null;if(h.dragHandle){var y=ih({x:p.clientX,y:p.clientY});if(!h.dragHandle.contains(y))return n.preventDefault(),null}var b=(s=(o=h.getInitialDataForExternal)===null||o===void 0?void 0:o.call(h,m))!==null&&s!==void 0?s:null;if(b)for(var w=0,x=Object.entries(b);w<x.length;w++){var B=Da(x[w],2),A=B[0],I=B[1];n.dataTransfer.setData(A,I??"")}mA()&&!n.dataTransfer.types.includes(vl)&&!n.dataTransfer.types.includes(bA)&&n.dataTransfer.setData(vl,wA),n.dataTransfer.setData(vA,"");var D={element:h.element,dragHandle:(a=h.dragHandle)!==null&&a!==void 0?a:null,data:(c=(f=h.getInitialData)===null||f===void 0?void 0:f.call(h,m))!==null&&c!==void 0?c:{}},N={type:"element",payload:D,startedFrom:"internal"};e.start({event:n,dragType:N})}}}))},dispatchEventToSource:function(e){var r,n,i=e.eventName,s=e.payload;(r=Ji.get(s.source.element))===null||r===void 0||(n=r[i])===null||n===void 0||n.call(r,s)},onPostDispatch:xl.getOnPostDispatch()}),EA=Ra.dropTarget,lh=Ra.monitor;function SA(t){return As(Ra.registerUsage(),xA(t),ch(t.element,{attribute:"draggable",value:"true"}))}function El(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Sl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?El(Object(r),!0).forEach(function(n){ri(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):El(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var AA={top:function(e,r){return Math.abs(r.y-e.top)},right:function(e,r){return Math.abs(e.right-r.x)},bottom:function(e,r){return Math.abs(e.bottom-r.y)},left:function(e,r){return Math.abs(r.x-e.left)}},uh=Symbol("closestEdge");function BA(t,e){var r,n,i=e.element,s=e.input,o=e.allowedEdges,a={x:s.clientX,y:s.clientY},c=i.getBoundingClientRect(),f=o.map(function(h){return{edge:h,value:AA[h](c,a)}}),u=(r=(n=f.sort(function(h,p){return h.value-p.value})[0])===null||n===void 0?void 0:n.edge)!==null&&r!==void 0?r:null;return Sl(Sl({},t),{},ri({},uh,u))}function Ro(t){var e;return(e=t[uh])!==null&&e!==void 0?e:null}function kA(t){var e=t.list,r=t.startIndex,n=t.finishIndex;if(r===-1||n===-1)return e;var i=Array.from(e),s=i.splice(r,1),o=Da(s,1),a=o[0];return i.splice(n,0,a),i}function TA(t){var e=t.startIndex,r=t.closestEdgeOfTarget,n=t.indexOfTarget,i=t.axis;if(e===-1||n===-1||e===n)return e;if(r==null)return n;var s=i==="vertical"&&r==="bottom"||i==="horizontal"&&r==="right",o=e<n;return o?s?n:n-1:s?n+1:n}function IA(t){var e=t.list,r=t.startIndex,n=t.closestEdgeOfTarget,i=t.indexOfTarget,s=t.axis;return kA({list:e,startIndex:r,finishIndex:TA({closestEdgeOfTarget:n,startIndex:r,indexOfTarget:i,axis:s})})}var CA={none:0,small:100,medium:350,large:700};function NA(t){t.animate([{backgroundColor:"var(--ds-background-selected, #E9F2FF)"},{}],{duration:CA.large,easing:"cubic-bezier(0.25, 0.1, 0.25, 1.0)",iterations:1})}function _A(){return{x:0,y:0}}function OA(t){var e=t.render,r=t.nativeSetDragImage,n=t.getOffset,i=n===void 0?_A:n,s=document.createElement("div");Object.assign(s.style,{position:"fixed",top:0,left:0,zIndex:sh,pointerEvents:"none"}),document.body.append(s);var o=e({container:s});queueMicrotask(function(){var f=i({container:s});if(Ss()){var u=s.getBoundingClientRect();if(u.width===0)return;s.style.left="-".concat(u.width-1e-4,"px")}r==null||r(s,f.x,f.y)});function a(){c(),o==null||o(),document.body.removeChild(s)}var c=lh({onDragStart:a,onDrop:a})}function UA(t){return function(e){var r=e.container;return Object.assign(r.style,{borderLeft:"".concat(t.x," solid transparent"),borderTop:"".concat(t.y," solid transparent")}),{x:0,y:0}}}var PA="Invariant failed";function DA(t,e){if(!t)throw new Error(PA)}var $A=Ye("<div></div>");function RA(t,e){let r=kt(e,"edge",3,"top"),n=kt(e,"gap",3,"0.5rem");const i=2,s=8,o=(i-s)/2,a=`calc(-0.5 * (${n()} + ${i}px))`;var c=$A();ft(()=>{Mo(c,Fo(["drop-indicator",`${r()}`]),"svelte-m9rsq0"),Ut(c,"--line-thickness",`${i}px`),Ut(c,"--line-offset",a),Ut(c,"--terminal-size",`${s}px`),Ut(c,"--terminal-radius",`${s/2}px`),Ut(c,"--negative-terminal-size",`-${s}px`),Ut(c,"--offset-terminal",`${o}px`),Ut(c,"position","absolute"),Ut(c,"pointer-events","none")}),Ue(t,c)}var LA=Ye("<li><!> <!></li>");function FA(t,e){pr(e,!0);const r={type:"idle"};let n=kt(e,"datum",15,null);if(n()==null)throw new Error("`null` `datum`.");let i=Ne(null),s=Ne(Ee(r)),o=Ne(!1);Xi(()=>(DA(P(i)),As(SA({element:P(i),getInitialData(){return n()},onGenerateDragPreview({nativeSetDragImage:p}){OA({nativeSetDragImage:p,getOffset:UA({x:"1rem",y:"0.5rem"}),render({container:m}){e.preview!=null&&(pe(s,Ee({type:"preview",container:m})),Rh(e.preview,{target:m,props:{datum:n()}}))}})},onDragStart(){pe(s,Ee({type:"is-dragging"}))},onDrop(){pe(s,Ee(r))}}),EA({element:P(i),canDrop({source:p}){return p.element===P(i)?!1:e.isDatum(p.data)},getData({input:p}){return n()==null?{}:P(i)==null?n():BA(n(),{element:P(i),input:p,allowedEdges:["top","bottom"]})},getIsSticky(){return!0},onDragEnter({self:p}){const m=Ro(p.data);pe(s,Ee({type:"is-dragging-over",closestEdge:m}))},onDrag({self:p}){const m=Ro(p.data);pe(s,Ee({type:"is-dragging-over",closestEdge:m}))},onDragLeave(){pe(s,Ee(r))},onDrop(){pe(s,Ee(r))}}))));const a=()=>{var p;be.activeId=((p=n())==null?void 0:p.id)??null};var c=LA();c.__focusin=a,c.__click=p=>{a(),(!p.ctrlKey||!P(o))&&be.retrieve("toggleOpen",{useActive:!0})()};var f=ve(c);Wh(f,()=>e.row,(p,m)=>{m(p,{get index(){return e.index},get datum(){return n()},set datum(y){n(y)},get open(){return P(o)},set open(y){pe(o,Ee(y))}})});var u=Ce(f,2);{var h=p=>{RA(p,{get edge(){return P(s).closestEdge},gap:"0.5rem"})};Gr(u,p=>{P(s).type==="is-dragging-over"&&P(s).closestEdge&&p(h)})}we(c),dt(c,p=>pe(i,p),()=>P(i)),ft(p=>{var m,y;_e(c,"data-element-id",(m=n())==null?void 0:m.id),Mo(c,Fo(p),"svelte-1iaogg8"),Ut(c,"view-transition-name",`item-${(y=n())==null?void 0:y.id}`)},[()=>{var p;return(p=e.rowClasses)==null?void 0:p.call(e,P(s).type)}]),Yr("keypress",c,()=>{}),Ue(t,c),gr()}Yn(["focusin","click"]);var MA=Ye("<ol></ol>");function HA(t,e){pr(e,!0);let r=kt(e,"data",31,()=>Ee([])),n=kt(e,"history",27,()=>Ee([])),i=Ne(null);const s=a=>e.isDatum?e.isDatum(a):!0;Xi(()=>lh({canMonitor({source:a}){return s(a.data)},onDrop({location:a,source:c}){const[f]=a.current.dropTargets;if(!f)return;const{data:u}=c,{data:h}=f;if(!s(u)||!s(h))return;const p=x=>r().findIndex(({id:B})=>B===x),m=p(u.id),y=p(h.id);if(y<0||m<0)return;const b=Ro(h);document.startViewTransition(async()=>{var A,I;n().push([...r()]);const x={idx:m},B={idx:y};if(P(i)){for(const D of[x,B])D.elem=(A=P(i))==null?void 0:A.querySelector(`li:nth-of-type(${D.idx+1})`),D.color=(I=new Map(D.elem.computedStyleMap()).get("border-color"))==null?void 0:I.toString();x.elem&&x.color&&B.elem&&B.color&&(x.elem.style.borderColor=x.color,B.elem.style.borderColor=B.color)}r(IA({list:r(),startIndex:m,indexOfTarget:y,closestEdgeOfTarget:b,axis:"vertical"})),await Lo(),x.elem&&x.color&&B.elem&&B.color&&(x.elem.style.borderColor=B.color,B.elem.style.borderColor=x.color)});const w=document.querySelector(`[data-element-id="${u.id}"]`);w instanceof HTMLElement&&NA(w)}}));var o=MA();qh(o,23,r,a=>a.id,(a,c,f)=>{FA(a,{get row(){return e.row},get rowClasses(){return e.rowClasses},get preview(){return e.preview},isDatum:s,get index(){return P(f)},get datum(){return r()[P(f)]},set datum(u){r(r()[P(f)]=u,!0)}})}),we(o),dt(o,a=>pe(i,a),()=>P(i)),ft(a=>Mo(o,Fo(a)),[()=>[...Array.from(e.listClasses??[]),"sortable-list"]]),Ue(t,o),gr()}var VA=Ye('<dialog><h1>Keyboard & Touch Navigation</h1> <form method="dialog"><button id="close" class="svelte-invagy">⨯</button> <ul class="svelte-invagy"><li><kbd>?</kbd>: (Display|Hide) these shortcuts.</li> <li><kbd>↑</kbd> | <kbd>↓</kbd>: Highlight the (previous|next) entry.</li> <li><kbd>enter</kbd>: (Expand|Collapse) the highlighted entry.</li> <li><kbd>e</kbd>: Edit the title of the highlighted entry.</li> <li><kbd>c</kbd>: Copy the highlighted entry to a different list.</li> <li><kbd>x</kbd> / <kbd>delete</kbd> / <kbd>backspace</kbd>: Delete the highlighted entry.</li> <li><kbd>s</kbd> | <kbd>n</kbd>: (Save|Load) the current configuration (to|from) Neo4j.</li> <li><kbd>j</kbd>: Jump to a specific entry number.</li> <li><kbd>m</kbd>, (<kbd>↑</kbd> | <kbd>↓</kbd>), <kbd>enter</kbd>: Move the selected entry (up|down).</li> <li><kbd>d</kbd> | <kbd>l</kbd>: (Down)?Load the congfiguration as JSON5.</li> <li><kbd>p</kbd> | <kbd>b</kbd>: (Publish|Load) a CBOR representation of the list (to|from) IPFS pub/sub.</li> <li><kbd>a</kbd>: Add local files to the list <em>(removing duplicates)</em>.</li> <li><kbd>v</kbd>: View all entries.</li> <li><kbd>h</kbd>: Hide all entries.</li> <li><kbd>u</kbd> | <kbd>r</kbd>: (Un|Re)do the last change.</li> <li><kbd><i>space</i></kbd>: <ul class="svelte-invagy"><li>If the highlighted entry is collapsed, expand it.</li> <li>If the expanded entry is media, (play|pause) it.</li> <li>If the expanded entry is not media, collapse it.</li></ul></li> <li><kbd>z</kbd>: Zoom in on the highlighted entry: <ul class="svelte-invagy"><li><kbd>z</kbd> / <kbd>escape</kbd>: Zoom out.</li> <li><kbd>ctrl</kbd> ➕ <kbd>→</kbd> / <kbd>→</kbd> ⨯ 2 / <kbd>enter</kbd> / <em>swipe</em> <kbd>→</kbd>: View the next entry.</li> <li><kbd>ctrl</kbd> ➕ <kbd>←</kbd> / <kbd>←</kbd> ⨯ 2 / <em>swipe</em> <kbd>←</kbd>: View the previous entry.</li> <li>(<em>pan</em>)? <kbd>→</kbd> | (<em>pan</em>)? <kbd>←</kbd>: Seek (forward|back) by 2 seconds.</li> <li><kbd>→</kbd> ⨯ 2, <kbd>→</kbd>+ | <kbd>←</kbd> ⨯ 2, <kbd>→</kbd>+: Seek (forward|back) by 1 minute.</li> <li>(<kbd>→</kbd> | <kbd>←</kbd>) ≥ 2sec: Seek (forward|back) by 2½% for each additional 1½ second held.</li> <li><kbd>0</kbd>–<kbd>9</kbd>: Seek to 0–90% of the way through the media.</li> <li><kbd>↑</kbd> | <kbd>↓</kbd>: (In|De)crease the volume by ⅕.</li> <li><kbd>ctrl</kbd> ➕ (<kbd>↑</kbd> | <kbd>↓</kbd>) / (<em>pan</em>)? (<kbd>↑</kbd> | <kbd>↓</kbd>): (In|De)crease the volume by 75%.</li> <li><kbd>space</kbd>: (Play|Pause) media.</li> <li><kbd>m</kbd>: (Un)?Mute media.</li> <li><kbd>f</kbd>: Toggle fullscreen.</li></ul></li></ul> <ul id="controls" class="svelte-invagy"><li><button id="ok">OK</button></li></ul></form></dialog>');function jA(t,e){let r=kt(e,"handle",15,null);var n=VA();dt(n,i=>r(i),()=>r()),Ue(t,n)}async function zA(t,e,r){var n;try{t.preventDefault(),pe(e,!0);const i=(n=t.currentTarget)==null?void 0:n.files;if(!i)return;await r(Array.from(i))}catch(i){zh({text:i.message,duration:16e3,close:!0,gravity:"bottom",position:"center",stopOnFocus:!0,style:{background:"linear-gradient(to right, #1E396A, #F32587)"}}).showToast()}finally{pe(e,!1)}}var GA=Ye('<meta name="description" class="svelte-1t6afbf">'),qA=(t,e)=>{var r;return(r=P(e))==null?void 0:r.click()},WA=Ye('<section class="svelte-1t6afbf"><p class="svelte-1t6afbf">Loading…</p> <progress class="svelte-1t6afbf"> </progress></section>'),KA=Ye('<p class="svelte-1t6afbf">No entries yet.</p>'),YA=Ye('<header class="svelte-1t6afbf"><h1 class="svelte-1t6afbf">Merge List</h1></header> <main class="svelte-1t6afbf"><form class="svelte-1t6afbf"><label class="svelte-1t6afbf"><button id="add-file" type="button" class="svelte-1t6afbf"><!></button> <input type="file" accept="image/*,video/*,audio/*" multiple class="svelte-1t6afbf"></label></form> <ul id="controls" class="svelte-1t6afbf"><li class="svelte-1t6afbf"><button id="save" type="button" class="svelte-1t6afbf">🖫</button> <dialog open class="svelte-1t6afbf">Save</dialog></li> <li class="svelte-1t6afbf"><button id="undo" type="button" class="svelte-1t6afbf">↺</button> <dialog open class="svelte-1t6afbf">Undo</dialog></li> <li class="svelte-1t6afbf"><button id="shortcuts" type="button" class="svelte-1t6afbf">⌨</button> <dialog open class="svelte-1t6afbf">Shortcuts</dialog></li> <li class="svelte-1t6afbf"><button id="show" type="button" class="svelte-1t6afbf">⟱</button> <dialog open class="svelte-1t6afbf">Show All</dialog></li> <li class="svelte-1t6afbf"><button id="hide" type="button" class="svelte-1t6afbf">⟰</button> <dialog open class="svelte-1t6afbf">Hide All</dialog></li> <li class="svelte-1t6afbf"><label class="button svelte-1t6afbf" id="single"><input type="checkbox" class="svelte-1t6afbf"> Ⅰ</label> <dialog open class="svelte-1t6afbf">Single<br class="svelte-1t6afbf">Visible</dialog></li></ul> <!> <!></main>',1);function TB(t,e){pr(e,!0);const{debug:r}=be;let n=Ne(Ee([])),i=uS(Gh.ipfsAPI),s=Ne(!1),o=Ne(!1),a=Ne(!1),c=Ne(Ee([])),f=Ne(0),u=Ne(0),h=Ne(0),p=Ne(null),m=Ne(null);async function y(H){var te;try{Array.isArray(H)||(H=[H]),pe(u,Ee(H.reduce((tt,{size:Ft})=>tt+Ft,0)));const me={chunker:"rabin",cidVersion:1,progress:tt=>{pe(f,P(f)+tt)},timeout:6e4};r&&console.debug({Adding:H,"Total Size":P(u),options:me});let Be=[],ze=0;for await(const{cid:tt}of i.addAll(H,me))Be.push({id:$h(h),cid:tt.toString(),title:H[ze].name.replace(/\.[^.]*$/,""),type:H[ze].type}),ze++;r&&console.debug({Added:Be});const vt=P(n).map(({cid:tt})=>tt),mr=Be.filter(({cid:tt})=>!vt.includes(tt));r&&console.debug({infos:Be,"Unique Entries":mr}),pe(n,Ee(P(n).concat(mr)))}catch(me){throw console.error({"IPFS Add Error":me}),((te=me.response)==null?void 0:te.status)===0?new Error("Couldn’t connect to IPFS."):me}}function b(){try{pe(o,!0)}finally{pe(o,!1)}}be.register(b);function w(){P(c).length!==0&&document.startViewTransition(async()=>{const H=P(c).pop();pe(n,Ee(H)),pe(a,P(c).length>0),await Lo()})}be.register(w);function x(){var H;(H=P(m))==null||H.showModal()}be.register(x);async function B(){be.single=!1;const H=be.retrieveAll("toggleOpen");for(const te of H)te({open:!0})}be.register(B);async function A(){const H=be.retrieveAll("toggleOpen");for(const te of H)te({open:!1})}be.register(A);function I(){var H;(H=P(p))==null||H.click()}be.register(I);var D=YA();Lh(H=>{var te=GA();$s.title="Mïmis: Merge List",_e(te,"content","Ordered list of files to be combined with others in the same namespace."),Ue(H,te)}),Yr("datum-delete",$s,H=>{const{id:te}=H.detail;P(c).push([...P(n)]),pe(n,Ee(P(n).filter(me=>me.id!==te)))}),Yr("keypress",$s,H=>{var te;H.key==="a"?(te=P(p))==null||te.click():H.key==="?"?x():H.key==="s"?b():H.key==="u"?w():H.key==="v"?B():H.key==="h"?A():H.key==="z"?be.retrieve("zoom",{useActive:!0})():H.key==="d"&&be.retrieve("remove",{useActive:!0})()});var N=Ce(On(D),2),C=ve(N),_=ve(C),O=ve(_);O.__click=[qA,p];var J=ve(O);{var K=H=>{var te=WA(),me=Ce(ve(te),2),Be=ve(me);we(me),we(te),ft(()=>{_e(me,"max",P(u)),Hh(me,P(f)),Qi(Be,`${P(f)/P(u)*100}%`)}),Ue(H,te)},q=H=>{var te=Dh("Add Files");Ue(H,te)};Gr(J,H=>{P(s)?H(K):H(q,!1)})}we(O);var ce=Ce(O,2);ce.__change=[zA,s,y],dt(ce,H=>pe(p,H),()=>P(p)),we(_),we(C);var L=Ce(C,2),j=ve(L),E=ve(j);E.__click=b,Gt(2),we(j);var T=Ce(j,2),U=ve(T);U.__click=w,Gt(2),we(T);var M=Ce(T,2),W=ve(M);W.__click=x,Gt(2),we(M);var Y=Ce(M,2),ee=ve(Y);ee.__click=B,Gt(2),we(Y);var re=Ce(Y,2),X=ve(re);X.__click=A,Gt(2),we(re);var le=Ce(re,2),he=ve(le),se=ve(he);Mh(se),Ut(se,"display","none"),Gt(),we(he),Gt(2),we(le),we(L);var ye=Ce(L,2);{var ne=H=>{var te=KA();Ue(H,te)},fe=H=>{HA(H,{id:"entries",row:IS,preview:NS,get data(){return P(n)},set data(te){pe(n,Ee(te))},get history(){return P(c)},set history(te){pe(c,Ee(te))}})};Gr(ye,H=>{P(n).length===0?H(ne):H(fe,!1)})}var Ie=Ce(ye,2);jA(Ie,{get handle(){return P(m)},set handle(H){pe(m,Ee(H))}}),we(N),ft((H,te)=>{O.disabled=P(s),E.disabled=!P(a)||P(o),Vh(E,"saving",P(o)),U.disabled=P(c).length===0||P(o),ee.disabled=H,X.disabled=te},[()=>P(n).length===0||be.any("isOpen"),()=>P(n).length===0||!be.any("isOpen")]),jh(se,()=>be.single,H=>be.single=H),Ue(t,D),gr()}Yn(["click","change"]);export{TB as component};

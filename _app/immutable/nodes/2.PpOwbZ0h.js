var A=Object.defineProperty;var I=(i,e,t)=>e in i?A(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var O=(i,e,t)=>I(i,typeof e!="symbol"?e+"":e,t);import{c as comment,a as append$1,t as template}from"../chunks/disclose-version.Bg0kX8aU.js";import{p as push$1,ad as set$1,f as first_child,c as child,r as reset,t as template_effect,z as get$1,a as pop,aE as state,v as user_effect,s as sibling,aG as next,ah as $document}from"../chunks/runtime.Cnff9h-R.js";import{s as set_text}from"../chunks/render.BVambEWF.js";import{a as proxy,i as if_block,p as prop}from"../chunks/props.MlQtJ2GN.js";import{e as each$1,i as index,t as toggle_class}from"../chunks/class.B67Z4YH5.js";import{h as head}from"../chunks/svelte-head.C_EiSMci.js";import{a as set_attribute}from"../chunks/attributes.DPDkfRjw.js";import{d as delegate,e as event}from"../chunks/events.yOX-zgMA.js";import{b as bind_this}from"../chunks/this.CJV69Y89.js";import{g as getDefaultExportFromCjs,m as makeCborEncoders,c as commonjsGlobal,a as code$2,d as decode$2,e as encode$2,p as prepare,b as create$7,C as CID,f as fromHex,h as coerce,i as encode$3,v as varint}from"../chunks/index.BOkM_KHM.js";const prerender=!0,_page$1=Object.freeze(Object.defineProperty({__proto__:null,prerender},Symbol.toStringTag,{value:"Module"}));/*!
 * debounce & throttle, taken from https://github.com/lodash/lodash v4.17.21
 * MIT License: https://raw.githubusercontent.com/lodash/lodash/4.17.21-npm/LICENSE
 * Modified for TypeScript type annotations.
 */const freeGlobal=typeof global=="object"&&global!==null&&global.Object===Object&&global,freeGlobalThis=typeof globalThis=="object"&&globalThis!==null&&globalThis.Object==Object&&globalThis,freeSelf=typeof self=="object"&&self!==null&&self.Object===Object&&self,root$1=freeGlobalThis||freeGlobal||freeSelf||Function("return this")();function isObject(i){const e=typeof i;return i!=null&&(e==="object"||e==="function")}function debounce(i,e=0,t={}){let n,r,s,o,a,l,c=0,d=!1,h=!1,f=!0;const p=!e&&e!==0&&typeof root$1.requestAnimationFrame=="function";if(typeof i!="function")throw new TypeError("Expected a function");e=+e||0,isObject(t)&&(d=!!t.leading,h="maxWait"in t,s=h?Math.max(+t.maxWait||0,e):s,f="trailing"in t?!!t.trailing:f);function y(x){const N=n,C=r;return n=r=void 0,c=x,o=i.apply(C,N),o}function u(x,N){return p?(root$1.cancelAnimationFrame(a),root$1.requestAnimationFrame(x)):setTimeout(x,N)}function g(x){if(p)return root$1.cancelAnimationFrame(x);clearTimeout(x)}function m(x){return c=x,a=u(b,e),d?y(x):o}function $(x){const N=x-l,C=x-c,L=e-N;return h?Math.min(L,s-C):L}function v(x){const N=x-l,C=x-c;return l===void 0||N>=e||N<0||h&&C>=s}function b(){const x=Date.now();if(v(x))return w(x);a=u(b,$(x))}function w(x){return a=void 0,f&&n?y(x):(n=r=void 0,o)}function _(){a!==void 0&&g(a),c=0,n=l=r=a=void 0}function k(){return a===void 0?o:w(Date.now())}function S(){return a!==void 0}function E(...x){const N=Date.now(),C=v(N);if(n=x,r=this,l=N,C){if(a===void 0)return m(l);if(h)return a=u(b,e),y(l)}return a===void 0&&(a=u(b,e)),o}return E.cancel=_,E.flush=k,E.pending=S,E}function throttle(i,e=0,t={}){let n=!0,r=!0;if(typeof i!="function")throw new TypeError("Expected a function");return isObject(t)&&(n="leading"in t?!!t.leading:n,r="trailing"in t?!!t.trailing:r),debounce(i,e,{leading:n,trailing:r,maxWait:e})}/*!
 * Wunderbaum - util
 * Copyright (c) 2021-2024, Martin Wendt. Released under the MIT license.
 * v0.11.0, Sun, 04 Aug 2024 15:35:53 GMT (https://github.com/mar10/wunderbaum)
 */const MOUSE_BUTTONS={0:"",1:"left",2:"middle",3:"right",4:"back",5:"forward"},MAX_INT=9007199254740991,userInfo=_getUserInfo(),isMac=userInfo.isMac,REX_HTML=/[&<>"'/]/g,REX_TOOLTIP=/[<>"'/]/g,ENTITY_MAP={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};class ValidationError extends Error{constructor(e){super(e),this.name="ValidationError"}}let Deferred$1=class{constructor(){this.thens=[],this.catches=[],this.status=""}resolve(e){if(this.status)throw new Error("already settled");this.status="resolved",this.resolvedValue=e,this.thens.forEach(t=>t(e)),this.thens=[]}reject(e){if(this.status)throw new Error("already settled");this.status="rejected",this.rejectedError=e,this.catches.forEach(t=>t(e)),this.catches=[]}then(e){status==="resolved"?e(this.resolvedValue):this.thens.unshift(e)}catch(e){this.status==="rejected"?e(this.rejectedError):this.catches.unshift(e)}promise(){return{then:this.then,catch:this.catch}}};function assert(i,e){if(!i)throw e=e||"Assertion failed.",new Error(e)}function _getUserInfo(){const i=navigator;return{isMac:/Mac/.test(i.platform)}}function documentReady(i){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",i):i()}function documentReadyPromise(){return new Promise(i=>{documentReady(i)})}function each(i,e){if(i==null)return i;const t=i.length;let n=0;if(typeof t=="number")for(;n<t&&e.call(i[n],n,i[n])!==!1;n++);else for(const r in i)if(e.call(i[n],r,i[r])===!1)break;return i}function error(i){throw new Error(i)}function escapeHtml(i){return(""+i).replace(REX_HTML,function(e){return ENTITY_MAP[e]})}function escapeRegex(i){return(""+i).replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function escapeTooltip(i){return(""+i).replace(REX_TOOLTIP,function(e){return ENTITY_MAP[e]})}function extractHtmlText(i){return i.indexOf(">")>=0&&error("Not implemented"),i}function getValueFromElem(i,e=!1){const t=i.tagName;let n=null;if(t==="SPAN"&&i.classList.contains("wb-col")){const r=i,s=r.querySelector("input,select");if(s)return getValueFromElem(s,e);r.innerText=""+n}else if(t==="INPUT"){const r=i;switch(r.type){case"button":case"reset":case"submit":case"image":break;case"checkbox":n=r.indeterminate?null:r.checked;break;case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n=e?r.valueAsDate:r.value;break;case"number":case"range":n=r.valueAsNumber;break;case"radio":{const o=r.name,a=r.parentElement.querySelector(`input[name="${o}"]:checked`);n=a?a.value:void 0}break;case"text":default:n=r.value}}else t==="SELECT"&&(n=i.value);return n}function setValueToElem(i,e){const t=i.tagName;if(t==="SPAN"&&i.classList.contains("wb-col")){const n=i,r=n.querySelector("input,select");if(r)return setValueToElem(r,e);n.innerText=""+e}else if(t==="INPUT"){const n=i,r=n.type;switch(r){case"checkbox":n.indeterminate=e===null,n.checked=!!e;break;case"date":case"month":case"time":case"week":case"datetime":case"datetime-local":n.valueAsDate=new Date(e);break;case"number":case"range":e==null?n.value=e:n.valueAsNumber=e;break;case"radio":error(`Not yet implemented: ${r}`);break;case"button":case"reset":case"submit":case"image":break;case"text":default:n.value=e??""}}else if(t==="SELECT"){const n=i;e==null?n.selectedIndex=-1:n.value=e}}function setElemDisplay(i,e){const t=elemFromSelector(i).style;e?t.display==="none"&&(t.display=""):t.display===""&&(t.display="none")}function elemFromHtml(i){const e=document.createElement("template");return e.innerHTML=i.trim(),e.content.firstElementChild}const _IGNORE_KEYS=new Set(["Alt","Control","Meta","Shift"]);function elemFromSelector(i){return i?typeof i=="string"?document.querySelector(i):i:null}function eventToString(i){const e=i.key,t=i.type,n=[];return i.altKey&&n.push("Alt"),i.ctrlKey&&n.push("Control"),i.metaKey&&n.push("Meta"),i.shiftKey&&n.push("Shift"),t==="click"||t==="dblclick"?n.push(MOUSE_BUTTONS[i.button]+t):t==="wheel"?n.push(t):_IGNORE_KEYS.has(e)||n.push(e),n.join("+")}function extend(...i){for(let e=1;e<i.length;e++){const t=i[e];if(t!=null)for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[0][n]=t[n])}return i[0]}function isArray(i){return Array.isArray(i)}function isEmptyObject(i){return Object.keys(i).length===0&&i.constructor===Object}function isFunction(i){return typeof i=="function"}function isPlainObject(i){return Object.prototype.toString.call(i)==="[object Object]"}function noop$1(...i){}function onEvent(i,e,t,n){let r,s;i=elemFromSelector(i),n?(r=t,s=n):(r="",s=t),e.split(" ").forEach(o=>{i.addEventListener(o,function(a){if(r){if(a.target){let l=a.target;if(l.matches(r)||(l=l.closest(r),l))return s(a)}}else return s(a)})})}function overrideMethod(i,e,t,n){let r,s;const o=n||i,a=i[e],l=(...h)=>a.apply(o,h),c=h=>a.apply(o,h),d=(...h)=>{try{return r=o._super,s=o._superApply,o._super=l,o._superApply=c,t.apply(o,h)}finally{o._super=r,o._superApply=s}};i[e]=d}function setTimeoutPromise(i,e){return new Promise((t,n)=>{setTimeout(()=>{try{t(i.apply(this))}catch(r){n(r)}},e)})}async function sleep(i){return new Promise(e=>setTimeout(e,i))}function toggleCheckbox(i,e,t){const n=elemFromSelector(i);if(assert(n.type==="checkbox",`Expected a checkbox: ${n.type}`),t??(t=n.classList.contains("wb-tristate")||n.indeterminate),e===void 0)switch(n.indeterminate?null:n.checked){case!0:e=!1;break;case!1:e=t?null:!0;break;case null:e=!0;break}n.indeterminate=e==null,n.checked=!!e}function getOption(i,e,t=void 0){let n;i&&e.indexOf(".")>=0&&([n,e]=e.split("."),i=i[n]);const r=i?i[e]:null;return r??t}function rotate(i,e){const t=e.indexOf(i);return e[(t+1)%e.length]}function toSet(i){if(i instanceof Set)return i;if(typeof i=="string"){const e=new Set;for(const t of i.split(" "))e.add(t.trim());return e}if(Array.isArray(i))return new Set(i);throw new Error("Cannot convert to Set<string>: "+i)}function toPixel(...i){for(const e of i){if(typeof e=="number")return e;if(typeof e=="string"&&e.endsWith("px"))return parseInt(e,10);assert(e==null,`Expected a number or string like '123px': ${e}`)}throw new Error(`Expected a string like '123px': ${i}`)}function toBool(...i){for(const e of i)if(e!=null)return!!e;throw new Error("No default boolean value provided")}function type$1(i){return Object.prototype.toString.call(i).replace(/^\[object (.+)\]$/,"$1").toLowerCase()}function adaptiveThrottle(i,e){const t=Object.assign({minDelay:16,defaultDelay:200,maxDelay:5e3,delayFactor:2},e),n=Math.max(16,+t.minDelay),r=+t.maxDelay;let s=0,o=null,a=null;const l=(...c)=>{if(s)o=c,s+=1;else{s=1;const d=c;o=null;const h=Date.now();try{i.apply(this,d)}catch(u){console.error(u)}const f=Date.now()-h,p=Math.min(Math.max(n,f*t.delayFactor),r),y=Math.max(n,p-f);a=setTimeout(()=>{a=null,s=0,o!=null&&l.apply(this,o)},y)}};return l.cancel=()=>{a&&(clearTimeout(a),a=null),o=null,s=0},l.pending=()=>!!a,l.flush=()=>{throw new Error("Not implemented")},l}var util$5=Object.freeze({__proto__:null,Deferred:Deferred$1,MAX_INT,MOUSE_BUTTONS,ValidationError,adaptiveThrottle,assert,debounce,documentReady,documentReadyPromise,each,elemFromHtml,elemFromSelector,error,escapeHtml,escapeRegex,escapeTooltip,eventToString,extend,extractHtmlText,getOption,getValueFromElem,isArray,isEmptyObject,isFunction,isMac,isPlainObject,noop:noop$1,onEvent,overrideMethod,rotate,setElemDisplay,setTimeoutPromise,setValueToElem,sleep,throttle,toBool,toPixel,toSet,toggleCheckbox,type:type$1});/*!
 * Wunderbaum - types
 * Copyright (c) 2021-2024, Martin Wendt. Released under the MIT license.
 * v0.11.0, Sun, 04 Aug 2024 15:35:53 GMT (https://github.com/mar10/wunderbaum)
 */var ChangeType;(function(i){i.any="any",i.data="data",i.colStructure="colStructure",i.resize="resize",i.row="row",i.structure="structure",i.status="status",i.scroll="scroll"})(ChangeType||(ChangeType={}));var RenderFlag;(function(i){i.clearMarkup="clearMarkup",i.header="header",i.redraw="redraw",i.scroll="scroll"})(RenderFlag||(RenderFlag={}));var NodeStatusType;(function(i){i.ok="ok",i.loading="loading",i.error="error",i.noData="noData",i.paging="paging"})(NodeStatusType||(NodeStatusType={}));var NodeRegion;(function(i){i.unknown="",i.checkbox="checkbox",i.column="column",i.expander="expander",i.icon="icon",i.prefix="prefix",i.title="title"})(NodeRegion||(NodeRegion={}));var NavModeEnum;(function(i){i.startRow="startRow",i.cell="cell",i.startCell="startCell",i.row="row"})(NavModeEnum||(NavModeEnum={}));/*!
 * Wunderbaum - wb_extension_base
 * Copyright (c) 2021-2024, Martin Wendt. Released under the MIT license.
 * v0.11.0, Sun, 04 Aug 2024 15:35:53 GMT (https://github.com/mar10/wunderbaum)
 */class WunderbaumExtension{constructor(e,t,n){this.enabled=!0,this.tree=e,this.id=t,this.treeOpts=e.options;const r=e.options;this.treeOpts[t]===void 0?r[t]=this.extensionOpts=extend({},n):(this.extensionOpts=extend({},n,r[t]),r[t]=this.extensionOpts),this.enabled=this.getPluginOption("enabled",!0)}init(){this.tree.element.classList.add("wb-ext-"+this.id)}getPluginOption(e,t){var n;return(n=this.extensionOpts[e])!==null&&n!==void 0?n:t}setPluginOption(e,t){this.extensionOpts[e]=t}setEnabled(e=!0){return this.setPluginOption("enabled",!!e)}onKeyEvent(e){}onRender(e){}}/*!
 * Wunderbaum - ext-filter
 * Copyright (c) 2021-2024, Martin Wendt. Released under the MIT license.
 * v0.11.0, Sun, 04 Aug 2024 15:35:53 GMT (https://github.com/mar10/wunderbaum)
 */const START_MARKER="￷",END_MARKER="￸",RE_START_MARKER=new RegExp(escapeRegex(START_MARKER),"g"),RE_END_MARTKER=new RegExp(escapeRegex(END_MARKER),"g");class FilterExtension extends WunderbaumExtension{constructor(e){super(e,"filter",{autoApply:!0,autoExpand:!1,matchBranch:!1,connectInput:null,fuzzy:!1,hideExpanders:!1,highlight:!0,leavesOnly:!1,mode:"dim",noData:!0}),this.lastFilterArgs=null}init(){super.init();const e=this.getPluginOption("connectInput");e&&(this.queryInput=elemFromSelector(e),assert(this.queryInput,`Invalid 'filter.connectInput' option: ${e}.`),onEvent(this.queryInput,"input",debounce(t=>{this.filterNodes(this.queryInput.value.trim(),{})},700)))}setPluginOption(e,t){switch(super.setPluginOption(e,t),e){case"mode":this.tree.filterMode=t==="hide"?"hide":"dim",this.tree.updateFilter();break}}_applyFilterNoUpdate(e,t){return this.tree.runWithDeferredUpdate(()=>this._applyFilterImpl(e,t))}_applyFilterImpl(e,t){let n=0;const r=Date.now(),s=this.tree,o=s.options,a=o.autoCollapse,l=extend({},o.filter,t),c=l.mode==="hide",d=!!l.matchBranch,h=!!l.leavesOnly&&!d;let f,p;if(typeof e=="string"||e instanceof RegExp){if(e==="")return s.logInfo("Passing an empty string as a filter is handled as clearFilter()."),this.clearFilter(),0;if(l.fuzzy){assert(typeof e=="string","fuzzy filter must be a string");const y=e.split("").map(escapeRegex).reduce(function(u,g){return u+"([^"+g+"]*)"+g},"");f=new RegExp(y,"i")}else if(e instanceof RegExp)f=e,p=e;else{const y=escapeRegex(e);f=new RegExp(y,"i"),p=new RegExp(y,"gi")}s.logDebug(`Filtering nodes by '${f}'`),e=y=>{if(!y.title)return!1;const u=y.title,g=f.exec(u);if(g&&l.highlight){let m;l.fuzzy?m=_markFuzzyMatchedChars(u,g,!0):m=u.replace(p,function($){return START_MARKER+$+END_MARKER}),y.titleWithHighlight=escapeHtml(m).replace(RE_START_MARKER,"<mark>").replace(RE_END_MARTKER,"</mark>")}return!!g}}return s.filterMode=l.mode,this.lastFilterArgs=arguments,s.element.classList.toggle("wb-ext-filter-hide",!!c),s.element.classList.toggle("wb-ext-filter-dim",!c),s.element.classList.toggle("wb-ext-filter-hide-expanders",!!l.hideExpanders),s.root.subMatchCount=0,s.visit(y=>{delete y.match,delete y.titleWithHighlight,y.subMatchCount=0}),s.setStatus(NodeStatusType.ok),o.autoCollapse=!1,s.visit(y=>{if(h&&y.children!=null)return;let u=e(y);if(u==="skip")return y.visit(function(m){m.match=!1},!0),"skip";let g=!1;(d||u==="branch")&&y.parent.match&&(u=!0,g=!0),u&&(n++,y.match=!0,y.visitParents(m=>{m!==y&&(m.subMatchCount+=1),l.autoExpand&&!g&&!m.expanded&&(m.setExpanded(!0,{noAnimation:!0,noEvents:!0}),m._filterAutoExpanded=!0)},!0))}),o.autoCollapse=a,n===0&&l.noData&&c&&(typeof l.noData=="string"?s.root.setStatus(NodeStatusType.noData,{message:l.noData}):s.root.setStatus(NodeStatusType.noData)),s.logDebug(`Filter '${e}' found ${n} nodes in ${Date.now()-r} ms.`),n}filterNodes(e,t){return this._applyFilterNoUpdate(e,t)}filterBranches(e,t){return assert(t.matchBranch===void 0,"filterBranches() is deprecated."),t.matchBranch=!0,this._applyFilterNoUpdate(e,t)}countMatches(){let e=0;return this.tree.visit(t=>{t.match&&!t.statusNodeType&&e++}),e}updateFilter(){var e;const t=this.tree;t.filterMode&&this.lastFilterArgs&&(!((e=t.options.filter)===null||e===void 0)&&e.autoApply)?this._applyFilterNoUpdate.apply(this,this.lastFilterArgs):t.logWarn("updateFilter(): no filter active.")}clearFilter(){const e=this.tree;e.enableUpdate(!1),e.setStatus(NodeStatusType.ok),delete e.root.match,delete e.root.subMatchCount,e.visit(t=>{delete t.match,delete t.subMatchCount,delete t.titleWithHighlight,t._filterAutoExpanded&&t.expanded&&t.setExpanded(!1,{noAnimation:!0,noEvents:!0}),delete t._filterAutoExpanded}),e.filterMode=null,this.lastFilterArgs=null,e.element.classList.remove("wb-ext-filter-dim","wb-ext-filter-hide"),e.enableUpdate(!0)}}function _markFuzzyMatchedChars(i,e,t=!0){const n=[];for(let s=1;s<e.length;s++){const o=e[s].length+(s===1?0:1)+(n[n.length-1]||0);n.push(o)}const r=i.split("");return t?n.forEach(function(s){r[s]=START_MARKER+r[s]+END_MARKER}):n.forEach(function(s){r[s]="<mark>"+r[s]+"</mark>"}),r.join("")}/*!
 * Wunderbaum - ext-keynav
 * Copyright (c) 2021-2024, Martin Wendt. Released under the MIT license.
 * v0.11.0, Sun, 04 Aug 2024 15:35:53 GMT (https://github.com/mar10/wunderbaum)
 */const QUICKSEARCH_DELAY=500;class KeynavExtension extends WunderbaumExtension{constructor(e){super(e,"keynav",{})}_getEmbeddedInputElem(e){var t;let n=null;if(e&&e.type!=null)n=e;else{const r=(t=this.tree.getActiveColElem())===null||t===void 0?void 0:t.querySelector("input,select");r&&(n=r)}return n}_isCurInputFocused(){var e;return!!((e=this.tree.getActiveColElem())===null||e===void 0?void 0:e.querySelector("input:focus,select:focus"))}onKeyEvent(e){const t=e.event,n=this.tree,r=e.options,s=!t.ctrlKey||r.autoActivate,o=this._getEmbeddedInputElem(t.target),a=o&&this._isCurInputFocused(),l=r.navigationModeOption;let c,d=eventToString(t),h=e.node,f=!0;if(!n.isEnabled()||n._callEvent("keydown",e)===!1||n._callMethod("edit._preprocessKeyEvent",e)===!1)return!1;if(!h){const y=n.getFocusNode()||n.getActiveNode(),u=n.getFirstChild();if(!y&&u&&d==="ArrowDown"){u.logInfo("Keydown: activate first node."),u.setActive();return}c=y||u,c&&(c.setFocus(),h=n.getFocusNode(),h.logInfo("Keydown: force focus on active node."))}const p=h.isColspan();if(n.isRowNav()){if(a){switch(d){case"Enter":o.blur(),n.setFocus();break;case"Escape":h._render(),n.setFocus();break}return}if(r.quicksearch&&d.length===1&&/^\w$/.test(d)&&!o){const y=Date.now();y-n.lastQuicksearchTime>QUICKSEARCH_DELAY&&(n.lastQuicksearchTerm=""),n.lastQuicksearchTime=y,n.lastQuicksearchTerm+=d;const u=n.findNextNode(n.lastQuicksearchTerm,n.getActiveNode());u&&u.setActive(!0,{event:t}),t.preventDefault();return}switch(d){case"Enter":h.isActive()&&(h.isExpanded()?d="Subtract":h.isExpandable(!0)&&(d="Add"));break;case"ArrowLeft":h.expanded&&(d="Subtract");break;case"ArrowRight":if(!h.expanded&&h.isExpandable(!0))d="Add";else if(l===NavModeEnum.startCell||l===NavModeEnum.startRow)return t.preventDefault(),n.setCellNav(),!1;break}switch(d){case"+":case"Add":h.setExpanded(!0);break;case"-":case"Subtract":h.setExpanded(!1);break;case" ":h.getOption("checkbox")?h.toggleSelected():h.setActive(!0,{event:t});break;case"Enter":h.setActive(!0,{event:t});break;case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"Backspace":case"End":case"Home":case"Control+End":case"Control+Home":case"Meta+ArrowDown":case"Meta+ArrowUp":case"PageDown":case"PageUp":h.navigate(d,{activate:s,event:t});break;default:f=!1}}else{const y=o?o.type||o.tagName:"",u=o&&y!=="checkbox";if(a){if(d==="Escape"){h.logDebug("Reset focused input on Escape"),o.setCustomValidity(""),h._render(),n.setFocus(),n.setColumn(n.activeColIdx);return}else if(d!=="Enter"){if(o&&o.checkValidity&&!o.checkValidity())return h.logDebug(`Ignored ${d} inside invalid input`),!1;h.logDebug(`Ignored ${d} inside focused input`);return}}else if(o&&d.length===1&&u)return o.focus(),o.value="",h.logDebug(`Focus input: ${d}`),!1;switch(d==="Tab"?(d="ArrowRight",f=!0):d==="Shift+Tab"&&(d=n.activeColIdx>0?"ArrowLeft":"",f=!0),d){case"+":case"Add":h.setExpanded(!0);break;case"-":case"Subtract":h.setExpanded(!1);break;case" ":n.activeColIdx===0&&h.getOption("checkbox")?(h.toggleSelected(),f=!0):o&&y==="checkbox"&&(o.click(),f=!0);break;case"F2":o&&!a&&u&&(o.focus(),f=!0);break;case"Enter":n.setFocus(),(n.activeColIdx===0||p)&&h.isExpandable()?(h.setExpanded(!h.isExpanded()),f=!0):o&&!a&&u&&(o.focus(),f=!0);break;case"Escape":n.setFocus(),h.log("keynav: focus tree..."),n.isCellNav()&&l!==NavModeEnum.cell&&(h.log("keynav: setCellNav(false)"),n.setCellNav(!1),n.setFocus(),f=!0);break;case"ArrowLeft":n.setFocus(),p&&h.isExpanded()?h.setExpanded(!1):!p&&n.activeColIdx>0?n.setColumn(n.activeColIdx-1):l!==NavModeEnum.cell&&n.setCellNav(!1),f=!0;break;case"ArrowRight":n.setFocus(),p&&!h.isExpanded()?h.setExpanded():!p&&n.activeColIdx<n.columns.length-1&&n.setColumn(n.activeColIdx+1),f=!0;break;case"Home":n.setFocus(),!p&&n.activeColIdx>0&&n.setColumn(0),f=!0;break;case"End":n.setFocus(),!p&&n.activeColIdx<n.columns.length-1&&n.setColumn(n.columns.length-1),f=!0;break;case"ArrowDown":case"ArrowUp":case"Backspace":case"Control+End":case"Control+Home":case"Meta+ArrowDown":case"Meta+ArrowUp":case"PageDown":case"PageUp":h.navigate(d,{activate:s,event:t}),f=!0;break;default:f=!1}}f&&t.preventDefault()}}/*!
 * Wunderbaum - ext-logger
 * Copyright (c) 2021-2024, Martin Wendt. Released under the MIT license.
 * v0.11.0, Sun, 04 Aug 2024 15:35:53 GMT (https://github.com/mar10/wunderbaum)
 */class LoggerExtension extends WunderbaumExtension{constructor(e){super(e,"logger",{}),this.ignoreEvents=new Set(["iconBadge","render","discard"]),this.prefix=e+".ext-logger"}init(){const e=this.tree;if(e.getOption("debugLevel")>=4){const t=this.ignoreEvents,n=this.prefix;overrideMethod(e,"callEvent",function(r,s){if(t.has(r))return e._superApply(arguments);const o=Date.now(),a=e._superApply(arguments);return e.logDebug(`${n}: callEvent('${r}') took ${Date.now()-o} ms.`,arguments[1]),a})}}onKeyEvent(e){this.tree.logDebug(`${this.prefix}: onKeyEvent()`,e)}}/*!
 * Wunderbaum - common
 * Copyright (c) 2021-2024, Martin Wendt. Released under the MIT license.
 * v0.11.0, Sun, 04 Aug 2024 15:35:53 GMT (https://github.com/mar10/wunderbaum)
 */const DEFAULT_DEBUGLEVEL=3,ROW_HEIGHT=22,ICON_WIDTH=20,TITLE_SPAN_PAD_Y=7,RENDER_MAX_PREFETCH=5,DEFAULT_MIN_COL_WIDTH=4,TEST_IMG=new RegExp(/\.|\//),iconMaps={bootstrap:{error:"bi bi-exclamation-triangle",loading:"bi bi-chevron-right wb-busy",noData:"bi bi-question-circle",expanderExpanded:"bi bi-chevron-down",expanderCollapsed:"bi bi-chevron-right",expanderLazy:"bi bi-chevron-right wb-helper-lazy-expander",checkChecked:"bi bi-check-square",checkUnchecked:"bi bi-square",checkUnknown:"bi bi-dash-square-dotted",radioChecked:"bi bi-circle-fill",radioUnchecked:"bi bi-circle",radioUnknown:"bi bi-record-circle",folder:"bi bi-folder2",folderOpen:"bi bi-folder2-open",folderLazy:"bi bi-folder-symlink",doc:"bi bi-file-earmark",colSortable:"bi bi-chevron-expand",colSortAsc:"bi bi-arrow-down",colSortDesc:"bi bi-arrow-up",colFilter:"bi bi-filter-circle",colFilterActive:"bi bi-filter-circle-fill wb-helper-invalid",colMenu:"bi bi-three-dots-vertical"},fontawesome6:{error:"fa-solid fa-triangle-exclamation",loading:"fa-solid fa-chevron-right fa-beat",noData:"fa-solid fa-circle-question",expanderExpanded:"fa-solid fa-chevron-down",expanderCollapsed:"fa-solid fa-chevron-right",expanderLazy:"fa-solid fa-chevron-right wb-helper-lazy-expander",checkChecked:"fa-regular fa-square-check",checkUnchecked:"fa-regular fa-square",checkUnknown:"fa-regular fa-square-minus",radioChecked:"fa-solid fa-circle",radioUnchecked:"fa-regular fa-circle",radioUnknown:"fa-regular fa-circle-question",folder:"fa-solid fa-folder-closed",folderOpen:"fa-regular fa-folder-open",folderLazy:"fa-solid fa-folder-plus",doc:"fa-regular fa-file",colSortable:"fa-solid fa-fw fa-sort",colSortAsc:"fa-solid fa-fw fa-sort-up",colSortDesc:"fa-solid fa-fw fa-sort-down",colFilter:"fa-solid fa-fw fa-filter",colFilterActive:"fa-solid fa-fw fa-filter wb-helper-invalid",colMenu:"fa-solid fa-fw fa-ellipsis-v"}},RESERVED_TREE_SOURCE_KEYS=new Set(["_format","_keyMap","_positional","_typeList","_valueMap","_version","children","columns","types"]),KEY_TO_ACTION_DICT={" ":"toggleSelect","+":"expand",Add:"expand",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",Backspace:"parent","/":"collapseAll",Divide:"collapseAll",End:"lastCol",Home:"firstCol","Control+End":"last","Control+Home":"first","Meta+ArrowDown":"last","Meta+ArrowUp":"first","*":"expandAll",Multiply:"expandAll",PageDown:"pageDown",PageUp:"pageUp","-":"collapse",Subtract:"collapse"};function makeNodeTitleMatcher(i){return i instanceof RegExp?function(e){return i.test(e.title)}:(assert(typeof i=="string",`Expected a string or RegExp: ${i}`),function(e){return e.title===i})}function makeNodeTitleStartMatcher(i){i=escapeRegex(i);const e=new RegExp("^"+i,"i");return function(t){return e.test(t.title)}}function nodeTitleSorter(i,e){const t=i.title.toLowerCase(),n=e.title.toLowerCase();return t===n?0:t>n?1:-1}function unflattenSource(i){var e,t,n;const{_format:r,_keyMap:s={},_positional:o=[],children:a}=i;if(r!=="flat")throw new Error(`Expected source._format: "flat", but got ${r}`);if(o&&o.includes("children"))throw new Error(`source._positional must not include "children": ${o}`);let l=s;if(s.t){console.warn("source._keyMap maps from long to short since v0.7.0. Flip key/value!"),l={};for(const[g,m]of Object.entries(s))l[m]=g}const c=o.map(u=>l[u]),d=[],h={},f={},p=(e=l.key)!==null&&e!==void 0?e:"key",y=(t=l.children)!==null&&t!==void 0?t:"children";for(const[u,g]of a.entries()){const[m,$,v={}]=g;g[1]=null,g[2]!=null&&(g[2]=null),$.forEach((_,k)=>{v[c[k]]=_}),f[u]=v;const b=v[p];b!=null&&(h[b]=v);let w=null;if(m!==null){if(typeof m=="number"){if(w=f[m],w===void 0)throw new Error(`unflattenSource: Could not find parent node by index: ${m}.`)}else if(w=h[m],w===void 0)throw new Error(`unflattenSource: Could not find parent node by key: ${m}`)}w?((n=w[y])!==null&&n!==void 0||(w[y]=[]),w[y].push(v)):d.push(v)}i.children=d}function decompressSourceData(i){let{_format:e,_version:t=1,_keyMap:n,_valueMap:r}=i;assert(t===1,`Expected file version 1 instead of ${t}`);let s=n,o={};if(s)for(const[l,c]of Object.entries(s))o[c]=l;if(s&&s.t&&(console.warn("source._keyMap maps from long to short since v0.7.0. Flip key/value!"),[s,o]=[o,s]),i._typeList!=null){const l='source._typeList is deprecated since v0.7.0: use source._valueMap: {"type": [...]} instead.';if(r!=null)throw new Error(l);console.warn(l),r={type:i._typeList},delete i._typeList}e==="flat"&&unflattenSource(i),delete i._format,delete i._version,delete i._keyMap,delete i._valueMap,delete i._positional;function a(l){for(const c of l)Object.getOwnPropertyNames(c).forEach(d=>{const h=c[d];let f=d;if(n&&o[d]!=null&&(f=o[d],f!==d&&(c[f]=h,delete c[d])),r&&typeof h=="number"&&r[f]!=null){const p=r[f][h];if(p==null)throw new Error(`Expected valueMap[${f}][${h}] entry in [${r[f]}]`);c[f]=p}}),c.children&&a(c.children)}(n||r)&&a(i.children)}/*!
 * Wunderbaum - ext-dnd
 * Copyright (c) 2021-2024, Martin Wendt. Released under the MIT license.
 * v0.11.0, Sun, 04 Aug 2024 15:35:53 GMT (https://github.com/mar10/wunderbaum)
 */const nodeMimeType="application/x-wunderbaum-node";class DndExtension extends WunderbaumExtension{constructor(e){super(e,"dnd",{autoExpandMS:1500,multiSource:!1,effectAllowed:"all",dropEffectDefault:"move",guessDropEffect:!0,preventForeignNodes:!1,preventLazyParents:!0,preventNonNodes:!1,preventRecursion:!0,preventSameParent:!1,preventVoidMoves:!0,serializeClipboardData:!0,scroll:!0,scrollSensitivity:20,scrollSpeed:5,sourceCopyHook:null,dragStart:null,drag:null,dragEnd:null,dragEnter:null,dragOver:null,dragExpand:null,drop:null,dragLeave:null}),this.srcNode=null,this.lastTargetNode=null,this.lastEnterStamp=0,this.lastAllowedDropRegions=null,this.lastDropEffect=null,this.lastDropRegion=!1,this.currentScrollDir=0,this.applyScrollDirThrottled=throttle(this._applyScrollDir,50)}init(){super.init();const e=this.tree,t=e.options.dnd;t.dragStart&&onEvent(e.element,"dragstart drag dragend",this.onDragEvent.bind(this)),t.dragEnter&&onEvent(e.element,"dragenter dragover dragleave drop",this.onDropEvent.bind(this))}_leaveNode(){const e=this.lastTargetNode;this.lastEnterStamp=0,e&&(e.setClass("wb-drop-target wb-drop-over wb-drop-after wb-drop-before",!1),this.lastTargetNode=null)}unifyDragover(e){if(e===!1)return!1;if(e instanceof Set)return e.size>0?e:!1;if(e===!0)return new Set(["over","before","after"]);if(typeof e=="string"||isArray(e))return e=toSet(e),e.size>0?e:!1;throw new Error("Unsupported drop region definition: "+e)}_calcDropRegion(e,t){const n=e.offsetY;return t?t.size===3?n<.25*ROW_HEIGHT?"before":n>.75*ROW_HEIGHT?"after":"over":t.size===1&&t.has("over")?"over":n>ROW_HEIGHT/2?"after":"before":!1}_guessDropEffect(e){var t;const n=this.treeOpts.dnd,r=(t=n.effectAllowed)!==null&&t!==void 0?t:"all",s=["all","copy","copyLink","copyMove"].includes(r),o=["all","link","copyLink","linkMove"].includes(r),a=["all","move","copyMove","linkMove"].includes(r);let l=n.dropEffectDefault;return n.guessDropEffect&&(isMac?(e.altKey&&s&&(l="copy"),e.metaKey&&a&&(l="move"),e.altKey&&e.metaKey&&o&&(l="link")):(e.ctrlKey&&s&&(l="copy"),e.shiftKey&&a&&(l="move"),e.altKey&&o&&(l="link"))),l}_isVoidDrop(e,t,n){return!this.treeOpts.dnd.preventVoidMoves||!t?!1:n==="before"&&e===t.getNextSibling()||n==="after"&&e===t.getPrevSibling()?!0:t===e||t.parent===e}_applyScrollDir(){if(this.isDragging()&&this.currentScrollDir){const e=this.tree.options.dnd,t=this.tree.element,n=t.scrollTop;this.currentScrollDir<0?t.scrollTop=Math.max(0,n-e.scrollSpeed):this.currentScrollDir>0&&(t.scrollTop=n+e.scrollSpeed)}}_autoScroll(e){const t=this.tree,r=t.options.dnd.scrollSensitivity,s=t.element,o=t.headerElement.clientHeight,a=s.offsetHeight,l=s.scrollTop;return this.currentScrollDir=0,l>0&&e>0&&e<=r+o?this.currentScrollDir=-1:l<s.scrollHeight-a&&e>=a-r&&(this.currentScrollDir=1),this.currentScrollDir&&this.applyScrollDirThrottled(),s.scrollTop-l}isDragging(){return!!this.srcNode}onDragEvent(e){var t;const n=this.treeOpts.dnd,r=Wunderbaum.getNode(e);if(!r){this.tree.logWarn(`onDragEvent.${e.type}: no node`);return}if(["dragstart","dragend"].includes(e.type)&&this.tree.logDebug(`onDragEvent.${e.type} srcNode: ${r}`,e),e.type==="dragstart"){if(e.dataTransfer.effectAllowed=n.effectAllowed,r.isEditingTitle())return r.logDebug("Prevented dragging node in edit mode."),e.preventDefault(),!1;if(!r._callEvent("dnd.dragStart",{event:e}))return e.preventDefault(),!1;const o=r.toDict(!0,a=>{a._orgKey=a.key,delete a.key});o._treeId=r.tree.id,n.serializeClipboardData&&(typeof n.serializeClipboardData=="function"?e.dataTransfer.setData(nodeMimeType,n.serializeClipboardData(o,r)):e.dataTransfer.setData(nodeMimeType,JSON.stringify(o))),!((t=e.dataTransfer)===null||t===void 0)&&t.types.includes("text/plain")||e.dataTransfer.setData("text/plain",r.title),this.srcNode=r,setTimeout(()=>{r.setClass("wb-drag-source")},0)}else e.type==="drag"?n.drag&&r._callEvent("dnd.drag",{event:e}):e.type==="dragend"&&(r.setClass("wb-drag-source",!1),this.srcNode=null,this.lastTargetNode&&this._leaveNode(),r._callEvent("dnd.dragEnd",{event:e}));return!0}onDropEvent(e){var t;const n=this.srcNode,r=n?n.tree:null,s=Wunderbaum.getNode(e),o=this.treeOpts.dnd,a=e.dataTransfer,l=this._calcDropRegion(e,this.lastAllowedDropRegions),c=(d,h)=>(d&&this.tree.log(`Prevented drop operation (${h}).`),d);if(!s){this._leaveNode();return}if(["drop"].includes(e.type)&&this.tree.logDebug(`onDropEvent.${e.type} targetNode: ${s}, ea: ${a==null?void 0:a.effectAllowed}, de: ${a==null?void 0:a.dropEffect}, cy: ${e.offsetY}, r: ${l}, srcNode: ${n}`,e),e.type==="dragenter"){if(this.lastAllowedDropRegions=null,this.lastTargetNode&&this.lastTargetNode!==s&&this._leaveNode(),this.lastTargetNode=s,this.lastEnterStamp=Date.now(),c(s.isStatusNode(),"is status node")||c(o.preventForeignNodes&&s.tree!==r,"preventForeignNodes")||c(o.preventLazyParents&&!s.isLoaded(),"preventLazyParents")||c(o.preventNonNodes&&!n,"preventNonNodes")||c(o.preventRecursion&&(n==null?void 0:n.isAncestorOf(s)),"preventRecursion")||c(o.preventSameParent&&n&&s.parent===n.parent,"preventSameParent")||c(o.preventVoidMoves&&s===n,"preventVoidMoves"))return a.dropEffect="none",!0;a.dropEffect=this._guessDropEffect(e)||"none";let d=s._callEvent("dnd.dragEnter",{event:e,sourceNode:n});return d=this.unifyDragover(d),d?(this.lastAllowedDropRegions=d,this.lastDropEffect=a.dropEffect,s.setClass("wb-drop-target"),e.preventDefault(),!1):(a.dropEffect="none",!0)}else if(e.type==="dragover"){const d=e.clientY-this.tree.element.offsetTop;this._autoScroll(d),a.dropEffect=this._guessDropEffect(e)||"none",s._callEvent("dnd.dragOver",{event:e,sourceNode:n});const h=this._calcDropRegion(e,this.lastAllowedDropRegions);return this.lastDropRegion=h,this.lastDropEffect=a.dropEffect,o.autoExpandMS>0&&s.isExpandable(!0)&&!s._isLoading&&Date.now()-this.lastEnterStamp>o.autoExpandMS&&s._callEvent("dnd.dragExpand",{event:e,sourceNode:n})!==!1&&s.setExpanded(),!h||this._isVoidDrop(s,n,h)?void 0:(s.setClass("wb-drop-over",h==="over"),s.setClass("wb-drop-before",h==="before"),s.setClass("wb-drop-after",h==="after"),e.preventDefault(),!1)}else if(e.type==="dragleave")s._callEvent("dnd.dragLeave",{event:e,sourceNode:n});else if(e.type==="drop"){e.stopPropagation(),e.preventDefault(),this._leaveNode();const d=this.lastDropRegion;let h=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData(nodeMimeType);h=h?JSON.parse(h):null;const f=this.srcNode,p=this.lastDropEffect;setTimeout(()=>{s._callEvent("dnd.drop",{event:e,region:d,suggestedDropMode:d==="over"?"appendChild":d,suggestedDropEffect:p,sourceNode:f,sourceNodeData:h})},10)}return!1}}/*!
 * Wunderbaum - drag_observer
 * Copyright (c) 2021-2024, Martin Wendt. Released under the MIT license.
 * v0.11.0, Sun, 04 Aug 2024 15:35:53 GMT (https://github.com/mar10/wunderbaum)
 */class DragObserver{constructor(e){if(this.start={event:null,x:0,y:0,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1},this.dragElem=null,this.dragging=!1,this.customData={},this.events=["mousedown","mouseup","mousemove","keydown"],!e.root)throw new Error("Missing `root` option.");this.opts=Object.assign({thresh:5},e),this.root=e.root,this._handler=this.handleEvent.bind(this),this.events.forEach(t=>{this.root.addEventListener(t,this._handler)})}disconnect(){this.events.forEach(e=>{this.root.removeEventListener(e,this._handler)})}getDragElem(){return this.dragElem}isDragging(){return this.dragging}stopDrag(e){if(this.dragging&&this.opts.dragstop&&e){e.type="dragstop";try{this.opts.dragstop(e)}catch(t){console.error("dragstop error",t)}}this.dragElem=null,this.dragging=!1,this.start.event=null,this.customData={}}handleEvent(e){const t=e.type,n=this.opts,r={type:e.type,startEvent:t==="mousedown"?e:this.start.event,event:e,customData:this.customData,dragElem:this.dragElem,dx:e.pageX-this.start.x,dy:e.pageY-this.start.y,apply:void 0};switch(t){case"keydown":this.stopDrag(r);break;case"mousedown":if(this.dragElem){this.stopDrag(r);break}if(n.selector){let s=e.target;if(s.matches(n.selector))this.dragElem=s;else if(s=s.closest(n.selector),s)this.dragElem=s;else break}this.start.event=e,this.start.x=e.pageX,this.start.y=e.pageY,this.start.altKey=e.altKey,this.start.ctrlKey=e.ctrlKey,this.start.metaKey=e.metaKey,this.start.shiftKey=e.shiftKey;break;case"mousemove":if(!this.dragElem)break;if(!this.dragging){if(n.thresh&&r.dx*r.dx+r.dy*r.dy<n.thresh*n.thresh)break;if(r.type="dragstart",n.dragstart(r)===!1){this.stopDrag(r);break}this.dragging=!0}this.dragging&&this.opts.drag&&(r.type="drag",this.opts.drag(r));break;case"mouseup":if(!this.dragging){this.stopDrag(r);break}e.button===0?r.apply=!0:r.apply=!1,this.stopDrag(r);break}}}/*!
 * Wunderbaum - ext-grid
 * Copyright (c) 2021-2024, Martin Wendt. Released under the MIT license.
 * v0.11.0, Sun, 04 Aug 2024 15:35:53 GMT (https://github.com/mar10/wunderbaum)
 */class GridExtension extends WunderbaumExtension{constructor(e){super(e,"grid",{}),this.observer=new DragObserver({root:window.document,selector:"span.wb-col-resizer-active",thresh:4,dragstart:t=>{const n=Wunderbaum.getEventInfo(t.startEvent),r=n.colDef,s=r&&this.tree.element.contains(t.dragElem)&&toBool(r.resizable,e.options.columnsResizable,!1);if(this.tree.element.classList.toggle("wb-col-resizing",!!s),n.colElem.classList.toggle("wb-col-resizing",!!s),s){t.customData.colDef=r,t.customData.orgCustomWidthPx=r.customWidthPx;const o=Number.parseInt(n.colElem.style.width,10);t.customData.orgWidthPx=o,r.customWidthPx=o,this.tree.update(ChangeType.colStructure)}return s},drag:t=>this.handleDrag(t),dragstop:t=>this.handleDrag(t)})}init(){super.init()}handleDrag(e){const t=e.customData,n=t.colDef;if(e.type==="dragstop"||e.type==="drag"){if(this.tree.element.classList.remove("wb-col-resizing"),e.apply||e.type==="drag"){const r=toPixel(n.minWidth,DEFAULT_MIN_COL_WIDTH),s=Math.max(r,t.orgWidthPx+e.dx);n.customWidthPx=s}else this.tree.log("Column resize cancelled",e),n.customWidthPx=t.orgCustomWidthPx;this.tree.update(ChangeType.colStructure)}}}/*!
 * Wunderbaum - deferred
 * Copyright (c) 2021-2024, Martin Wendt. Released under the MIT license.
 * v0.11.0, Sun, 04 Aug 2024 15:35:53 GMT (https://github.com/mar10/wunderbaum)
 */class Deferred{constructor(){this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t})}resolve(e){this._resolve(e)}reject(e){this._reject(e)}promise(){return this._promise}then(e){return this._promise.then(e)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}}/*!
 * Wunderbaum - wunderbaum_node
 * Copyright (c) 2021-2024, Martin Wendt. Released under the MIT license.
 * v0.11.0, Sun, 04 Aug 2024 15:35:53 GMT (https://github.com/mar10/wunderbaum)
 */const NODE_PROPS=new Set(["checkbox","classes","expanded","icon","iconTooltip","key","lazy","_partsel","radiogroup","refKey","selected","statusNodeType","title","tooltip","type","unselectable"]),NODE_DICT_PROPS=new Set(NODE_PROPS);NODE_DICT_PROPS.delete("_partsel");NODE_DICT_PROPS.delete("unselectable");class WunderbaumNode{constructor(e,t,n){var r,s;this.refKey=void 0,this.children=null,this.classes=null,this.data={},this._isLoading=!1,this._requestId=0,this._errorInfo=null,this._partsel=!1,this._partload=!1,this.subMatchCount=0,this._rowIdx=0,this._rowElem=void 0,assert(!t||t.tree===e,`Invalid parent: ${t}`),assert(!n.children,"'children' not allowed here"),this.tree=e,this.parent=t,this.key=""+((r=n.key)!==null&&r!==void 0?r:++WunderbaumNode.sequence),this.title=""+((s=n.title)!==null&&s!==void 0?s:"<"+this.key+">"),n.refKey!=null&&(this.refKey=""+n.refKey),n.type!=null&&(this.type=""+n.type),this.expanded=n.expanded===!0,n.icon!=null&&(this.icon=n.icon),this.lazy=n.lazy===!0,n.statusNodeType!=null&&(this.statusNodeType=""+n.statusNodeType),n.colspan!=null&&(this.colspan=!!n.colspan),n.checkbox!=null&&(this.checkbox=!!n.checkbox),n.radiogroup!=null&&(this.radiogroup=!!n.radiogroup),this.selected=n.selected===!0,n.unselectable===!0&&(this.unselectable=!0),n.classes&&this.setClass(n.classes);for(const[o,a]of Object.entries(n))NODE_PROPS.has(o)||(this.data[o]=a);t&&!this.statusNodeType&&e._registerNode(this)}toString(){return`WunderbaumNode@${this.key}<'${this.title}'>`}*[Symbol.iterator](){const e=this.children;if(e)for(let t=0,n=e.length;t<n;t++){const r=e[t];yield r,r.children&&(yield*r)}}_callEvent(e,t){var n;return(n=this.tree)===null||n===void 0?void 0:n._callEvent(e,extend({node:this,typeInfo:this.type?this.tree.types[this.type]:{}},t))}addChildren(e,t){const n=this.tree;let{before:r=null,applyMinExpanLevel:s=!0,_level:o}=t??{};o??(o=this.getLevel());const a=[];try{n.enableUpdate(!1),isPlainObject(e)&&(e=[e]);const l=s&&o<n.options.minExpandLevel;for(const c of e){const d=c.children;delete c.children;const h=new WunderbaumNode(n,this,c);l&&!h.isUnloaded()&&(h.expanded=!0),a.push(h),d&&h.addChildren(d,{_level:o+1})}if(!this.children)this.children=a;else if(r==null||this.children.length===0)this.children=this.children.concat(a);else{r=this.findDirectChild(r);const c=this.children.indexOf(r);assert(c>=0,`options.before must be a direct child of ${this}`),this.children.splice(c,0,...a)}n.update(ChangeType.structure)}finally{n.enableUpdate(!0)}return a[0]}addNode(e,t="appendChild"){switch(t==="over"&&(t="appendChild"),t){case"after":return this.parent.addChildren(e,{before:this.getNextSibling()});case"before":return this.parent.addChildren(e,{before:this});case"prependChild":return this.addChildren(e,{before:0});case"appendChild":return this.addChildren(e)}assert(!1,`Invalid mode: ${t}`)}applyCommand(e,t){return this.tree.applyCommand(e,this,t)}collapseSiblings(e){for(const t of this.parent.children)t!==this&&t.expanded&&t.setExpanded(!1,e)}setClass(e,t=!0){const n=toSet(e);if(t)this.classes===null&&(this.classes=new Set),n.forEach(r=>{var s;this.classes.add(r),(s=this._rowElem)===null||s===void 0||s.classList.toggle(r,t)});else{if(this.classes===null)return;n.forEach(r=>{var s;this.classes.delete(r),(s=this._rowElem)===null||s===void 0||s.classList.toggle(r,t)}),this.classes.size===0&&(this.classes=null)}}startEditTitle(){this.tree._callMethod("edit.startEditTitle",this)}async expandAll(e=!0,t){const n=this.tree,r=this.tree.options.minExpandLevel,{depth:s=99,loadLazy:o,force:a,keepActiveNodeVisible:l=!0}=t??{},c={scrollIntoView:!1,force:a,loadLazy:o};async function d(f,p){var y;if(p===0)return;const u=p==null?null:p-1,g=[];return(y=f.children)===null||y===void 0||y.forEach(m=>{if(e)if(!m.expanded&&(m.children||o&&m.lazy)){const $=m.setExpanded(!0,c);g.push($),$.then(async()=>{await d(m,u)})}else g.push(d(m,u));else(!r||a||m.getLevel()>r)&&m.setExpanded(!1,c),d(m,u)}),new Promise(m=>{Promise.all(g).then(()=>{m(!0)})})}const h=n.logTime(`${this}.expandAll(${e})`);try{n.enableUpdate(!1),await d(this,s)}finally{n.enableUpdate(!0),n.logTimeEnd(h)}n.activeNode&&l&&n.activeNode.scrollIntoView()}findAll(e){const t=typeof e=="function"?e:makeNodeTitleMatcher(e),n=[];return this.visit(r=>{t(r)&&n.push(r)}),n}findDirectChild(e){const t=this.children;if(!t)return null;if(typeof e=="string"){for(let n=0,r=t.length;n<r;n++)if(t[n].key===e)return t[n]}else{if(typeof e=="number")return t[e];if(e.parent===this)return e}return null}findFirst(e){const t=typeof e=="function"?e:makeNodeTitleMatcher(e);let n=null;return this.visit(r=>{if(t(r))return n=r,!1}),n}findRelatedNode(e,t=!1){return this.tree.findRelatedNode(this,e,t)}*format_iter(e,t){t??(t=["    "," |  "," ╰─ "," ├─ "]),e??(e=s=>""+s);function n(s){const o=s.parent.children;return s===o[o.length-1]}const r=s=>{const o=[e(s)];o.unshift(t[n(s)?2:3]);let a=s.parent;for(;a&&a!==this;)o.unshift(t[n(a)?0:1]),a=a.parent;return o.join("")};yield e(this);for(const s of this)yield r(s)}format(e,t){const n=[];for(const r of this.format_iter(e,t))n.push(r);return n.join(`
`)}getColElem(e){var t;typeof e=="string"&&(e=this.tree.columns.findIndex(r=>r.id===e));const n=(t=this._rowElem)===null||t===void 0?void 0:t.querySelectorAll("span.wb-col");return n?n[e]:null}getCloneList(e=!1){if(!this.refKey)return[];const t=this.tree.findByRefKey(this.refKey);return e?t:[...t].filter(n=>n!==this)}getFirstChild(){return this.children?this.children[0]:null}getLastChild(){return this.children?this.children[this.children.length-1]:null}getLevel(){let e=0,t=this.parent;for(;t;)e++,t=t.parent;return e}getNextSibling(){const e=this.parent.children,t=e.indexOf(this);return e[t+1]||null}getParent(){return this.parent}getParentList(e=!1,t=!1){const n=[];let r=t?this:this.parent;for(;r;)(e||r.parent)&&n.unshift(r),r=r.parent;return n}getPath(e=!0,t="title",n="/"){let r;const s=[],o=typeof t=="function";return this.visitParents(a=>{a.parent&&(r=o?t(a):a[t],s.unshift(r))},e),s.join(n)}getPrevSibling(){const e=this.parent.children,t=e.indexOf(this);return e[t-1]||null}hasChildren(){return this.lazy?this.children==null?void 0:this.children.length===0?!1:this.children.length===1&&this.children[0].isStatusNode()?void 0:!0:!!(this.children&&this.children.length)}hasClass(e){return this.classes?this.classes.has(e):!1}hasFocus(){return this.tree.focusNode===this}isActive(){return this.tree.activeNode===this}isAncestorOf(e){return e&&e.isDescendantOf(this)}isChildOf(e){return e&&this.parent===e}isClone(){return!!this.refKey&&this.tree.findByRefKey(this.refKey).length>1}isColspan(){return!!this.getOption("colspan")}isDescendantOf(e){if(!e||e.tree!==this.tree)return!1;let t=this.parent;for(;t;){if(t===e)return!0;t===t.parent&&error(`Recursive parent link: ${t}`),t=t.parent}return!1}isExpandable(e=!1){return e&&this.expanded||this.children===!1?!1:this.children==null?!!this.lazy:this.children.length===0?!!this.tree.options.emptyChildListExpandable:!0}isEditingTitle(){return this.tree._callMethod("edit.isEditingTitle",this)}isExpanded(){return!!this.expanded}isFirstSibling(){const e=this.parent;return!e||e.children[0]===this}isLastSibling(){const e=this.parent;return!e||e.children[e.children.length-1]===this}isLazy(){return!!this.lazy}isLoaded(){return!this.lazy||this.hasChildren()!==void 0}isLoading(){return this._isLoading}isPagingNode(){return this.statusNodeType==="paging"}isParentOf(e){return e&&e.parent===this}isPartload(){return!!this._partload}isPartsel(){return!this.selected&&!!this._partsel}isRadio(){return!!this.parent.radiogroup||this.getOption("checkbox")==="radio"}isRendered(){return!!this._rowElem}isRootNode(){return this.tree.root===this}isSelected(){return this.selected?!0:this._partsel?void 0:!1}isStatusNode(){return!!this.statusNodeType}isTopLevel(){return this.tree.root===this.parent}isUnloaded(){return this.hasChildren()===void 0}isVisible(){const e=this.tree.filterMode==="hide",t=this.getParentList(!1,!1);if(e&&!this.match&&!this.subMatchCount)return!1;for(let n=0,r=t.length;n<r;n++)if(!t[n].expanded)return!1;return!0}_loadSourceObject(e,t){var n;const r=this.tree;t??(t=this.getLevel());const s=this._callEvent("receive",{response:e});s!=null&&(e=s),isArray(e)&&(e={children:e}),assert(isPlainObject(e),`Expected an array or plain object: ${e}`);const o=(n=e.format)!==null&&n!==void 0?n:"nested";assert(o==="nested"||o==="flat",`Expected source.format = 'nested' or 'flat': ${o}`),decompressSourceData(e),assert(e.children,"If `source` is an object, it must have a `children` property"),e.types&&(r.logInfo("Redefine types",e.columns),r.setTypes(e.types,!1),delete e.types),e.columns&&(r.logInfo("Redefine columns",e.columns),r.columns=e.columns,delete e.columns,r.update(ChangeType.colStructure)),this.addChildren(e.children);for(const[a,l]of Object.entries(e))RESERVED_TREE_SOURCE_KEYS.has(a)||(r.data[a]=l);r.options.selectMode==="hier"&&this.fixSelection3FromEndNodes(),this.resetNativeChildOrder(),this._callEvent("load")}async _fetchWithOptions(e){var t,n;let r,s,o,a,l,c={};typeof e=="string"?(r=e,c.method="GET"):isPlainObject(e)?({url:r,params:s,body:o,options:a,...l}=e,assert(!l||Object.keys(l).length===0,`Unexpected source properties: ${Object.keys(l)}. Use 'options' instead.`),assert(typeof r=="string","expected source.url as string"),isPlainObject(a)&&(c=a),isPlainObject(o)&&(assert(!c.body,"options.body should be passed as source.body"),c.body=JSON.stringify(c.body),(t=c.method)!==null&&t!==void 0||(c.method="POST")),isPlainObject(s)&&(r+="?"+new URLSearchParams(s),(n=c.method)!==null&&n!==void 0||(c.method="GET"))):(r="",error(`Unsupported source format: ${e}`)),this.setStatus(NodeStatusType.loading);const d=await fetch(r,c);return d.ok||error(`GET ${r} returned ${d.status}, ${d}`),await d.json()}async load(e){const t=this.tree,n=Date.now(),r=this.parent,s=Date.now();let o=0,a=0,l=0;this._requestId&&this.logWarn(`Recursive load request #${n} while #${this._requestId} is pending.`),this._requestId=n;try{if(typeof e=="string"?e:e.url){const d=await this._fetchWithOptions(e);if(a=Date.now()-s,this._requestId&&this._requestId>n){this.logWarn(`Ignored load response #${n} because #${this._requestId} is pending.`);return}else this.logDebug(`Received response for load request #${n}`);if(this.parent===null&&r!==null){this.logWarn("Lazy parent node was removed while loading: discarding response.");return}this.setStatus(NodeStatusType.ok);const h=Date.now();this._loadSourceObject(d),l=Date.now()-h}else{if(typeof e.then=="function"){const d=t.logTime(`Resolve thenable ${e}`);e=await Promise.resolve(e),t.logTimeEnd(d)}this._loadSourceObject(e),l=Date.now()-s}}catch(c){throw this.logError("Error during load()",e,c),this._callEvent("error",{error:c}),this.setStatus(NodeStatusType.error,{message:""+c}),c}finally{this._requestId=0,o=Date.now()-s,t.options.debugLevel>=3&&t.logInfo(`Load source took ${o/1e3} seconds (transfer: ${a/1e3}s, processing: ${l/1e3}s)`)}}async loadLazy(e=!1){const t=this.expanded;if(assert(this.lazy,"load() requires a lazy node"),!(!e&&!this.isUnloaded())){if(this.isLoading()){this.logWarn("loadLazy() called while already loading: ignored.");return}this.isLoaded()&&this.resetLazy(),this.setStatus(NodeStatusType.loading);try{const n=await this._callEvent("lazyLoad");if(n===!1){this.setStatus(NodeStatusType.ok);return}assert(isArray(n)||n&&n.url,"The lazyLoad event must return a node list, `{url: ...}`, or false."),await this.load(n),this.setStatus(NodeStatusType.ok),t?(this.expanded=!0,this.tree.update(ChangeType.structure)):this.update()}catch(n){this.logError("Error during loadLazy()",n),this._callEvent("error",{error:n}),this.setStatus(NodeStatusType.error,{message:""+n})}}}log(...e){this.tree.options.debugLevel>=4&&console.log(this.toString(),...e)}logDebug(...e){this.tree.options.debugLevel>=4&&console.debug(this.toString(),...e)}logError(...e){this.tree.options.debugLevel>=1&&console.error(this.toString(),...e)}logInfo(...e){this.tree.options.debugLevel>=3&&console.info(this.toString(),...e)}logWarn(...e){this.tree.options.debugLevel>=2&&console.warn(this.toString(),...e)}async makeVisible(e){let t;const n=new Deferred,r=[],s=this.getParentList(!1,!1),o=s.length,a=getOption(e,"noAnimation",!1),l=getOption(e,"scrollIntoView",!0);for(t=o-1;t>=0;t--){const c={noAnimation:a};r.push(s[t].setExpanded(!0,c))}return Promise.all(r).then(()=>{l&&this.tree?(this.tree.updatePendingModifications(),this.scrollIntoView().then(()=>{n.resolve()})):n.resolve()}),n.promise()}moveTo(e,t="appendChild",n){t==="over"&&(t="appendChild"),t==="prependChild"&&(e.children&&e.children.length?(t="before",e=e.children[0]):t="appendChild");let r;const s=this.tree,o=this.parent,a=t==="appendChild"?e:e.parent;if(this!==e){if(this.parent?a.isDescendantOf(this)&&error("Cannot move a node to its own descendant"):error("Cannot move system root"),a!==o&&o.triggerModifyChild("remove",this),this.parent.children.length===1){if(this.parent===a)return;this.parent.children=this.parent.lazy?[]:null,this.parent.expanded=!1}else r=this.parent.children.indexOf(this),assert(r>=0,"invalid source parent"),this.parent.children.splice(r,1);if(this.parent=a,a.hasChildren())switch(t){case"appendChild":a.children.push(this);break;case"before":r=a.children.indexOf(e),assert(r>=0,"invalid target parent"),a.children.splice(r,0,this);break;case"after":r=a.children.indexOf(e),assert(r>=0,"invalid target parent"),a.children.splice(r+1,0,this);break;default:error(`Invalid mode '${t}'.`)}else a.children=[this];n&&e.visit(n,!0),a===o?a.triggerModifyChild("move",this):a.triggerModifyChild("add",this),s!==e.tree&&(this.logWarn("Cross-tree moveTo is experimental!"),this.visit(l=>{l.tree=e.tree},!0)),setTimeout(()=>{s.update(ChangeType.any)},0)}}async navigate(e,t){e=KEY_TO_ACTION_DICT[e]||e;const n=this.findRelatedNode(e);if(!n)return this.logWarn(`Could not find related node '${e}'.`),Promise.resolve(this);try{n.makeVisible({scrollIntoView:!1})}catch{}return n.setFocus(),(t==null?void 0:t.activate)===!1?Promise.resolve(this):n.setActive(!0,{event:t==null?void 0:t.event})}remove(){const e=this.tree,t=this.parent.children.indexOf(this);this.triggerModify("remove"),this.parent.children.splice(t,1),this.visit(n=>{n.removeMarkup(),e._unregisterNode(n)},!0),e.update(ChangeType.structure)}removeChildren(){var e,t;const n=this.tree;this.children&&(!((e=n.activeNode)===null||e===void 0)&&e.isDescendantOf(this)&&n.activeNode.setActive(!1),!((t=n.focusNode)===null||t===void 0)&&t.isDescendantOf(this)&&n._setFocusNode(null),this.triggerModifyChild("remove",null),this.visit(r=>{n._unregisterNode(r)}),this.lazy?this.children=[]:this.children=null,this.isRootNode()||(this.expanded=!1),this.tree.update(ChangeType.structure))}removeMarkup(){this._rowElem&&(delete this._rowElem._wb_node,this._rowElem.remove(),this._rowElem=void 0)}_getRenderInfo(){const e={},t={},n=this.isColspan(),r=this._rowElem?this._rowElem.querySelectorAll("span.wb-col"):null;let s=0;for(const o of this.tree.columns)e[o.id]={id:o.id,idx:s,elem:r?r[s]:null,info:o},!n&&o.id!=="*"&&(t[o.id]=e[o.id]),s++;return{allColInfosById:e,renderColInfosById:t}}_createIcon(e,t,n,r){let s,o=this.getOption("icon");if(this._errorInfo?o=e.error:this._isLoading&&r&&(o=e.loading),o===!1)return null;typeof o=="string"||(this.statusNodeType?o=e[this.statusNodeType]:this.expanded?o=e.folderOpen:this.children?o=e.folder:this.lazy?o=e.folderLazy:o=e.doc),o?o.indexOf("<")>=0?s=elemFromHtml(o):TEST_IMG.test(o)?s=elemFromHtml(`<i class="wb-icon" style="background-image: url('${o}');">`):(s=document.createElement("i"),s.className="wb-icon "+o):(s=document.createElement("i"),s.className="wb-icon"),n?t.replaceChild(s,n):t.appendChild(s);const a=this._callEvent("iconBadge",{iconSpan:s});let l=null;if(a!=null&&a!==!1){let c="",d="";isPlainObject(a)?(l=""+a.badge,c=a.badgeClass?" "+a.badgeClass:"",d=a.badgeTooltip?` title="${a.badgeTooltip}"`:""):typeof a=="number"?l=""+a:l=a,typeof l=="string"&&(l=elemFromHtml(`<span class="wb-badge${c}"${d}>${escapeHtml(l)}</span>`)),l&&s.append(l)}return s}_render_markup(e){const t=this.tree,n=t.options,r=this.getOption("checkbox"),s=t.columns,o=this.getLevel(),a=t.isRowNav()?null:t.activeColIdx;let l,c=this._rowElem,d=null,h=null;const f=!c;assert(f,"Expected unrendered node"),assert(!f||e&&e.after,"opts.after expected, unless updating"),assert(!this.isRootNode(),"Root node not allowed"),c=document.createElement("div"),c.classList.add("wb-row"),c.style.top=this._rowIdx*ROW_HEIGHT+"px",this._rowElem=c,c._wb_node=this;const p=document.createElement("span");p.classList.add("wb-node","wb-col"),c.appendChild(p);let y=0;r&&(d=document.createElement("i"),d.classList.add("wb-checkbox"),(r==="radio"||this.parent.radiogroup)&&d.classList.add("wb-radio"),p.appendChild(d),y+=ICON_WIDTH);for(let v=o-1;v>0;v--)l=document.createElement("i"),l.classList.add("wb-indent"),p.appendChild(l),y+=ICON_WIDTH;(!n.minExpandLevel||o>n.minExpandLevel)&&(h=document.createElement("i"),h.classList.add("wb-expander"),p.appendChild(h),y+=ICON_WIDTH),this._createIcon(t.iconMap,p,null,!h)&&(y+=ICON_WIDTH);const g=document.createElement("span");if(g.classList.add("wb-title"),p.appendChild(g),p._ofsTitlePx=y,t.options.dnd.dragStart&&(p.draggable=!0),!this.isColspan()&&s.length>1){let v=0;for(const b of s){v++;let w;b.id==="*"?w=p:(w=document.createElement("span"),w.classList.add("wb-col"),c.appendChild(w)),v===a&&w.classList.add("wb-active"),b.classes&&w.classList.add(...b.classes.split(" ")),w.style.left=b._ofsPx+"px",w.style.width=b._widthPx+"px",f&&b.html&&typeof b.html=="string"&&(w.innerHTML=b.html)}}switch(e?e.after:"last"){case"first":t.nodeListElement.prepend(c);break;case"last":t.nodeListElement.appendChild(c);break;default:e.after.after(c)}e.isNew=!0,this._render_data(e)}_render_data(e){assert(this._rowElem,"No _rowElem");const t=this.tree,n=t.options,r=this._rowElem,s=!!e.isNew,o=!!e.preventScroll,a=t.columns,l=this.isColspan(),c=r.querySelector("span.wb-node"),d=c.querySelector("span.wb-title"),h=t.element.scrollTop;this.titleWithHighlight?d.innerHTML=this.titleWithHighlight:d.textContent=this.title;const f=this.getOption("tooltip",!1);if(f&&(d.title=f===!0?this.title:f),o&&(t.element.scrollTop=h),!n.skeleton)if(l){const p=t.element.clientWidth;d.style.width=p-c._ofsTitlePx-TITLE_SPAN_PAD_Y+"px"}else d.style.width=a[0]._widthPx-c._ofsTitlePx-TITLE_SPAN_PAD_Y+"px";if(e.isDataChange=!0,this._render_status(e),this.statusNodeType)this._callEvent("renderStatusNode",{isNew:s,nodeElem:c,isColspan:l});else if(this.parent){const p=this._getRenderInfo();this._callEvent("render",{isNew:s,nodeElem:c,isColspan:l,allColInfosById:p.allColInfosById,renderColInfosById:p.renderColInfosById})}}_render_status(e){const t=this.tree,n=t.iconMap,r=t.options,s=this.type?t.types[this.type]:null,o=this._rowElem,a=o.querySelector("span.wb-node"),l=a.querySelector("i.wb-expander"),c=a.querySelector("i.wb-checkbox"),d=["wb-row"];if(this.expanded&&d.push("wb-expanded"),this.lazy&&d.push("wb-lazy"),this.selected&&d.push("wb-selected"),this._partsel&&d.push("wb-partsel"),this===t.activeNode&&d.push("wb-active"),this===t.focusNode&&d.push("wb-focus"),this._errorInfo&&d.push("wb-error"),this._isLoading&&d.push("wb-loading"),this.isColspan()&&d.push("wb-colspan"),this.statusNodeType&&d.push("wb-status-"+this.statusNodeType),this.match&&d.push("wb-match"),this.subMatchCount&&d.push("wb-submatch"),r.skeleton&&d.push("wb-skeleton"),o.className=d.join(" "),this.classes&&o.classList.add(...this.classes),s&&s.classes&&o.classList.add(...s.classes),l){let h=null;this._isLoading?h=n.loading:this.isExpandable(!1)?this.expanded?h=n.expanderExpanded:h=n.expanderCollapsed:this.lazy&&this.children==null&&(h=n.expanderLazy),h==null?l.classList.add("wb-indent"):TEST_IMG.test(h)?l.style.backgroundImage=`url('${h}')`:l.className="wb-expander "+h}if(c){let h="wb-checkbox ";this.isRadio()?(h+="wb-radio ",this.selected?h+=n.radioChecked:h+=n.radioUnchecked):this.selected?h+=n.checkChecked:this._partsel?h+=n.checkUnknown:h+=n.checkUnchecked,c.className=h}if(!e.isNew){let h=0;for(const p of o.children)p.classList.toggle("wb-active",h++===t.activeColIdx),p.classList.remove("wb-error","wb-invalid");const f=a.querySelector("i.wb-icon");f&&this._createIcon(t.iconMap,a,f,!l)}if(e.resizeCols!==!1&&!this.isColspan()){const h=o.querySelectorAll("span.wb-col");let f=0,p=0;for(const y of this.tree.columns){const u=h[f];u.style.left=`${p}px`,u.style.width=`${y._widthPx}px`,f++,p+=y._widthPx}}}_render(e){const t=Object.assign({change:ChangeType.data},e);switch(this._rowElem||(t.change=ChangeType.row),t.change){case"status":this._render_status(t);break;case"data":this._render_data(t);break;case"row":this._render_markup(t);break;default:error(`Invalid change type '${t.change}'.`)}}resetLazy(){this.removeChildren(),this.expanded=!1,this.lazy=!0,this.children=null,this.tree.update(ChangeType.structure)}toDict(e=!1,t){const n={};if(NODE_DICT_PROPS.forEach(r=>{const s=this[r];s instanceof Set?s.size&&(n[r]=Array.prototype.join.call(s.keys()," ")):(s||s===!1||s===0)&&(n[r]=s)}),isEmptyObject(this.data)||(n.data=extend({},this.data),isEmptyObject(n.data)&&delete n.data),t){const r=t(n,this);if(r===!1)return!1;r==="skip"&&(e=!1)}if(e&&isArray(this.children)){n.children=[];for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r];if(!o.isStatusNode()){const a=o.toDict(!0,t);a!==!1&&n.children.push(a)}}}return n}getOption(e,t){const n=this.tree;let r=n.options;e.indexOf(".")>=0&&([r,e]=e.split("."));const s=r[e];if(typeof s=="function"){const l=s.call(n,{type:"resolve",tree:n,node:this});if(l!==void 0)return l}if(this[e]!==void 0)return this[e];const o=this.type?n.types[this.type]:void 0,a=o?o[e]:void 0;return a!==void 0?a:s??t}async scrollIntoView(e){const t=Object.assign({node:this},e);return this.tree.scrollTo(t)}async setActive(e=!0,t){const n=this.tree,r=n.getActiveNode(),s=t==null?void 0:t.retrigger,o=t==null?void 0:t.focusTree,a=t==null?void 0:t.noEvents,l=t==null?void 0:t.event,c=t==null?void 0:t.colIdx,d=t==null?void 0:t.edit;if(assert(!c||n.isCellNav(),"colIdx requires cellNav"),assert(!d||c!=null,"edit requires colIdx"),!a)if(e){if(r!==this||s){if((r==null?void 0:r._callEvent("deactivate",{nextNode:this,event:l}))===!1||this._callEvent("beforeActivate",{prevNode:r,event:l})===!1)return;n._setActiveNode(null),r==null||r.update(ChangeType.status)}}else(r===this||s)&&this._callEvent("deactivate",{nextNode:null,event:l});return r!==this&&(e&&n._setActiveNode(this),r==null||r.update(ChangeType.status),this.update(ChangeType.status)),this.makeVisible().then(()=>{e&&((o||d)&&(n.setFocus(),n._setFocusNode(this),n.focusNode.setFocus()),c!=null&&n.isCellNav()&&n.setColumn(c,{edit:d}),a||this._callEvent("activate",{prevNode:r,event:l}))})}async setExpanded(e=!0,t){const{force:n,scrollIntoView:r,immediate:s}=t??{},o=!(t!=null&&t.noEvents);if(!e&&this.isExpanded()&&this.getLevel()<=this.tree.getOption("minExpandLevel")&&!n){this.logDebug("Ignored collapse request below minExpandLevel.");return}if(!e==!this.expanded||o&&this._callEvent("beforeExpand",{flag:e})===!1)return;e&&this.getOption("autoCollapse")&&this.collapseSiblings(t),e&&this.lazy&&this.children==null&&await this.loadLazy(),this.expanded=e;const a={immediate:s};if(this.tree.update(ChangeType.structure,a),e&&r){const l=this.getLastChild();l&&(this.tree.updatePendingModifications(),l.scrollIntoView({topNode:this}))}o&&this._callEvent("expand",{flag:e})}setFocus(e=!0){assert(!!e,"Blur is not yet implemented");const t=this.tree.focusNode;this.tree._setFocusNode(this),t==null||t.update(),this.update()}setIcon(e){this.icon=e,this.update()}setKey(e,t){throw new Error("Not yet implemented")}update(e=ChangeType.data){assert(e===ChangeType.status||e===ChangeType.data,`Invalid change type ${e}`),this.tree.update(e,this)}getSelectedNodes(e=!1){const t=[];return this.visit(n=>{if(n.selected&&(t.push(n),e===!0))return"skip"}),t}toggleSelected(e){let t=this.isSelected();return t===void 0&&!this.isRadio()?t=this._anySelectable():t=!t,this.setSelected(t,e)}_anySelectable(){let e=!1;return this.visit(t=>{if(t.selected===!1&&!t.unselectable&&!t.hasChildren()&&!t.parent.radiogroup)return e=!0,!1}),e}_changeSelectStatusProps(e){let t=!1;switch(e){case!1:t=this.selected||this._partsel,this.selected=!1,this._partsel=!1;break;case!0:t=!this.selected||!this._partsel,this.selected=!0,this._partsel=!0;break;case void 0:t=this.selected||!this._partsel,this.selected=!1,this._partsel=!0;break;default:error(`Invalid state: ${e}`)}return t&&this.update(),t}fixSelection3AfterClick(e){const t=!!(e!=null&&e.force),n=this.isSelected();this.visit(r=>{if(r.radiogroup)return"skip";(t||!r.getOption("unselectable"))&&r._changeSelectStatusProps(n)}),this.fixSelection3FromEndNodes()}fixSelection3FromEndNodes(e){const t=!!(e!=null&&e.force);assert(this.tree.options.selectMode==="hier","expected selectMode 'hier'");const n=r=>{let s;const o=r.children;if(o&&o.length){let a=!0,l=!1;for(let c=0,d=o.length;c<d;c++){const h=o[c],f=n(h);f!==!1&&(l=!0),f!==!0&&(a=!1)}s=a?!0:l?void 0:!1}else s=!!r.selected;return r._partsel&&!r.selected&&r.lazy&&r.children==null&&(s=void 0),(t||!r.getOption("unselectable"))&&r._changeSelectStatusProps(s),s};n(this),this.visitParents(r=>{let s;const o=r.children;let a=!0,l=!1;for(let c=0,d=o.length;c<d;c++){const h=o[c];s=!!h.selected,(s||h._partsel)&&(l=!0),s||(a=!1)}s=a?!0:l?void 0:!1,r._changeSelectStatusProps(s)})}setSelected(e=!0,t){const n=this.tree,r=!(t!=null&&t.noEvents),s=this.isSelected(),o=this.parent&&this.parent.radiogroup,a=n.options.selectMode,l=(t==null?void 0:t.force)||!this.getOption("unselectable");return e=!!e,l?t!=null&&t.propagateDown&&a==="multi"?(n.runWithDeferredUpdate(()=>{this.visit(c=>{c.setSelected(e)})}),s):(e===s||r&&this._callEvent("beforeSelect",{flag:e})===!1||(n.runWithDeferredUpdate(()=>{if(o){if(!e&&!(t!=null&&t.force))return s;for(const c of this.parent.children)c.selected=c===this}else this.selected=e,a==="hier"?this.fixSelection3AfterClick():a==="single"&&n.visit(c=>{c.selected=!1})}),r&&this._callEvent("select",{flag:e})),s):s}setStatus(e,t){const n=this.tree,r=t==null?void 0:t.message,s=t==null?void 0:t.details;let o=null;const a=()=>{const c=this.children;c&&c.length&&c[0].isStatusNode()&&c[0].remove()},l=c=>{const d=this.children,h=d?d[0]:null;return assert(c.statusNodeType,"Not a status node"),assert(!h||!h.isStatusNode(),"Child must not be a status node"),o=this.addNode(c,"prependChild"),o.match=!0,n.update(ChangeType.structure),o};switch(a(),e){case"ok":this._isLoading=!1,this._errorInfo=null;break;case"loading":this._isLoading=!0,this._errorInfo=null,this.parent?this.update(ChangeType.status):l({statusNodeType:e,title:n.options.strings.loading+(r?" ("+r+")":""),checkbox:!1,colspan:!0,tooltip:s});break;case"error":l({statusNodeType:e,title:n.options.strings.loadError+(r?" ("+r+")":""),checkbox:!1,colspan:!0,tooltip:s}),this._isLoading=!1,this._errorInfo={message:r,details:s};break;case"noData":l({statusNodeType:e,title:r||n.options.strings.noData,checkbox:!1,colspan:!0,tooltip:s}),this._isLoading=!1,this._errorInfo=null;break;default:error("invalid node status "+e)}return n.update(ChangeType.structure),o}setTitle(e){this.title=e,this.update()}setTooltip(e){this.tooltip=e,this.update()}_sortChildren(e,t){const n=this.children;if(n&&(n.sort(e),t))for(let r=0,s=n.length;r<s;r++)n[r].children&&n[r]._sortChildren(e,t)}sortChildren(e=nodeTitleSorter,t=!1){this._sortChildren(e||nodeTitleSorter,t),this.tree.update(ChangeType.structure)}resetNativeChildOrder(e){const{recursive:t=!0,propName:n="_nativeIndex"}=e??{};this.children&&this.children.forEach((r,s)=>{r.data[n]=s,t&&r.children&&r.resetNativeChildOrder(e)})}sortByProperty(e){var t,n,r;const{caseInsensitive:s=!0,deep:o=!0,nativeOrderPropName:a="_nativeIndex",updateColInfo:l=!1}=e;let c,d;if(l){d=this.tree._columnsById[e.colId],assert(d,`Invalid colId specified: ${e.colId}`),c=(t=e.order)!==null&&t!==void 0?t:rotate(d.sortOrder,["asc","desc",void 0]);for(const p of this.tree.columns)p.sortOrder=p===d?c:void 0;this.tree.update(ChangeType.colStructure)}else c=(n=e.order)!==null&&n!==void 0?n:"asc";let h=(r=e.propName)!==null&&r!==void 0?r:e.colId||"";h==="*"&&(h="title"),c==null&&(h=a,c="asc"),this.logDebug(`sortByProperty(), propName=${h}, ${c}`,e),assert(h,"No property name specified");const f=(p,y)=>{let u,g;return NODE_DICT_PROPS.has(h)?(u=p[h],g=y[h]):(u=p.data[h],g=y.data[h]),s&&(typeof u=="string"&&(u=u.toLowerCase()),typeof g=="string"&&(g=g.toLowerCase())),c==="desc"?u===g?0:u>g?-1:1:u===g?0:u>g?1:-1};return this.sortChildren(f,o)}triggerModifyChild(e,t,n){this.logDebug(`modifyChild(${e})`,n,t),this.tree.options.modifyChild&&(t&&t.parent!==this&&error("child "+t+" is not a child of "+this),this._callEvent("modifyChild",extend({operation:e,child:t},n)))}triggerModify(e,t){this.parent.triggerModifyChild(e,this,t)}visit(e,t=!1){let n=!0;const r=this.children;if(t===!0&&(n=e(this),n===!1||n==="skip"))return n;if(r)for(let s=0,o=r.length;s<o&&(n=r[s].visit(e,!0),n!==!1);s++);return n}visitParents(e,t=!1){if(t&&e(this)===!1)return!1;let n=this.parent;for(;n;){if(e(n)===!1)return!1;n=n.parent}return!0}visitSiblings(e,t=!1){const n=this.parent.children;for(let r=0,s=n.length;r<s;r++){const o=n[r];if((t||o!==this)&&e(o)===!1)return!1}return!0}isMatched(){return!(this.tree.filterMode&&!this.match)}}WunderbaumNode.sequence=0;/*!
 * Wunderbaum - ext-edit
 * Copyright (c) 2021-2024, Martin Wendt. Released under the MIT license.
 * v0.11.0, Sun, 04 Aug 2024 15:35:53 GMT (https://github.com/mar10/wunderbaum)
 */class EditExtension extends WunderbaumExtension{constructor(e){super(e,"edit",{debounce:100,minlength:1,maxlength:null,trigger:[],trim:!0,select:!0,slowClickDelay:1e3,validity:!0,beforeEdit:null,edit:null,apply:null}),this.curEditNode=null,this.relatedNode=null,this.debouncedOnChange=debounce(this._onChange.bind(this),this.getPluginOption("debounce"))}async _applyChange(e,t,n,r,s){return t.log(`_applyChange(${e})`,s),n.classList.add("wb-busy"),n.classList.remove("wb-error","wb-invalid"),r.setCustomValidity(""),new Promise((o,a)=>{const l=t._callEvent(e,s);Promise.resolve(l).then(c=>{o(c)}).catch(c=>{a(c)})}).then(o=>{if(!r.checkValidity())throw t.logWarn("inputElem.checkValidity() failed: throwing...."),new ValidationError(r.validationMessage);return o}).catch(o=>{if(o instanceof ValidationError)t.logWarn("catched ",o),n.classList.add("wb-invalid"),r.setCustomValidity&&!r.validationMessage&&r.setCustomValidity(o.message),r.validationMessage&&r.reportValidity();else throw t.logError(`Error in ${e} event handler (throw e.util.ValidationError instead if this was intended)`,o),n.classList.add("wb-error"),o}).finally(()=>{n.classList.remove("wb-busy")})}_onChange(e){const t=Wunderbaum.getEventInfo(e),n=t.node,r=t.colElem;if(!n||t.colIdx===0){this.tree.log("Ignored change event for removed element or node title");return}this._applyChange("change",n,r,e.target,{info:t,event:e,inputElem:e.target,inputValue:Wunderbaum.util.getValueFromElem(e.target),inputValid:e.target.checkValidity()})}init(){super.init(),onEvent(this.tree.element,"change",".contenteditable,input,textarea,select",e=>this._onChange(e))}_preprocessKeyEvent(e){const t=e.event,n=eventToString(t),r=this.tree,s=this.getPluginOption("trigger");if(this.isEditingTitle()){switch(n){case"Enter":return this._stopEditTitle(!0,{event:t}),!1;case"Escape":return this._stopEditTitle(!1,{event:t}),!1}return!1}if(r.isRowNav()||r.activeColIdx===0){switch(n){case"Enter":if(s.indexOf("macEnter")>=0&&isMac)return this.startEditTitle(),!1;break;case"F2":if(s.indexOf("F2")>=0)return this.startEditTitle(),!1;break}return!0}return!0}isEditingTitle(e){return e?this.curEditNode===e:!!this.curEditNode}startEditTitle(e){e=e??this.tree.getActiveNode();const t=this.getPluginOption("validity"),n=this.getPluginOption("select");if(!e)return;this.tree.logDebug(`startEditTitle(node=${e})`);let r=e._callEvent("edit.beforeEdit");if(r===!1){e.logDebug("beforeEdit canceled operation.");return}if(r===!0||!r){const a=escapeHtml(e.title);let l=this.getPluginOption("maxlength");const c=l?` maxlength="${l}"`:"";l=this.getPluginOption("minlength");const d=l?` minlength="${l}"`:"",h=l>0?" required":"";r=`<input type=text class="wb-input-edit" tabindex=-1 value="${a}" autocorrect="off"${h}${d}${c} >`}const s=e.getColElem(0).querySelector(".wb-title");s.innerHTML=r;const o=s.firstElementChild;t&&o.addEventListener("keydown",a=>{o.setCustomValidity(""),o.reportValidity()||e.logWarn(`Invalid input: '${o.value}'`)}),o.focus(),n&&o.select(),this.curEditNode=e,e._callEvent("edit.edit",{inputElem:o})}stopEditTitle(e){return this._stopEditTitle(e,{})}_stopEditTitle(e,t){var n;t??(t={});const r=document.activeElement;let s=r?getValueFromElem(r):null;const o=this.curEditNode,a=!!t.forceClose,l=this.getPluginOption("validity");if(s&&this.getPluginOption("trim")&&(s=s.trim()),!o){this.tree.logDebug("stopEditTitle: not in edit mode.");return}if(o.logDebug(`stopEditTitle(${e})`,t,r,s),e&&s!==null&&s!==o.title){const c=r.validationMessage;if(c)throw new Error(`Input validation failed for "${s}": ${c}.`);const d=o.getColElem(0);this._applyChange("edit.apply",o,d,r,{oldValue:o.title,newValue:s,inputElem:r,inputValid:r.checkValidity()}).then(h=>{var f;const p=r.validationMessage;if(l&&p&&h!==!1)throw new Error(`Edit apply validation failed for "${s}": ${p}.`);!a&&h===!1||(o==null||o.setTitle(s),(f=this.curEditNode)===null||f===void 0||f._render({preventScroll:!0}),this.curEditNode=null,this.relatedNode=null,this.tree.setFocus())})}else(n=this.curEditNode)===null||n===void 0||n._render({preventScroll:!0}),this.curEditNode=null,this.relatedNode=null,this.tree.setFocus()}createNode(e="after",t,n){const r=this.tree;if(t=t??r.getActiveNode(),assert(t,"No node was passed, or no node is currently active."),e=e||"prependChild",n==null?n={title:""}:typeof n=="string"?n={title:n}:assert(isPlainObject(n),`Expected a plain object: ${n}`),(e==="prependChild"||e==="appendChild")&&(t!=null&&t.isExpandable(!0))){t.setExpanded().then(()=>{this.createNode(e,t,n)});return}const s=t.addNode(n,e);s.setClass("wb-edit-new"),this.relatedNode=t,s.match=!0,s.makeVisible({noAnimation:!0}).then(()=>{this.startEditTitle(s)})}}/*!
 * wunderbaum.ts
 *
 * A treegrid control.
 *
 * Copyright (c) 2021-2024, Martin Wendt (https://wwWendt.de).
 * https://github.com/mar10/wunderbaum
 *
 * Released under the MIT license.
 * @version v0.11.0
 * @date Sun, 04 Aug 2024 15:35:53 GMT
 */class WbSystemRoot extends WunderbaumNode{constructor(e){super(e,null,{key:"__root__",title:e.id})}toString(){return`WbSystemRoot@${this.key}<'${this.tree.id}'>`}}class Wunderbaum{get activeNode(){var e;return!((e=this._activeNode)===null||e===void 0)&&e.tree?this._activeNode:null}get focusNode(){var e;return!((e=this._focusNode)===null||e===void 0)&&e.tree?this._focusNode:null}constructor(e){this.enabled=!0,this.data={},this.extensionList=[],this.extensions={},this.keyMap=new Map,this.refKeyMap=new Map,this.treeRowCount=0,this._disableUpdateCount=0,this._disableUpdateIgnoreCount=0,this._activeNode=null,this._focusNode=null,this.types={},this.columns=[],this._columnsById={},this.pendingChangeTypes=new Set,this._util=util$5,this.filterMode=null,this.activeColIdx=0,this._cellNavMode=!1,this.lastQuicksearchTime=0,this.lastQuicksearchTerm="",this.lastClickTime=0;const t=this.options=extend({id:null,source:null,element:null,debugLevel:DEFAULT_DEBUGLEVEL,header:null,rowHeightPx:ROW_HEIGHT,iconMap:"bootstrap",columns:null,types:null,enabled:!0,fixedCol:!1,showSpinner:!1,checkbox:!1,minExpandLevel:0,emptyChildListExpandable:!1,skeleton:!1,connectTopBreadcrumb:null,selectMode:"multi",navigationModeOption:null,quicksearch:!0,iconBadge:null,change:null,error:null,receive:null,strings:{loadError:"Error",loading:"Loading...",noData:"No data"}},e),n=new Deferred;this.ready=n.promise();let r=!1;if(this.ready.then(()=>{r=!0;try{this._callEvent("init")}catch(o){this.logError("Exception inside `init(e)` event:",o)}}).catch(o=>{if(r)throw o;this._callEvent("init",{error:o})}),this.id=t.id||"wb_"+ ++Wunderbaum.sequence,this.root=new WbSystemRoot(this),this._registerExtension(new KeynavExtension(this)),this._registerExtension(new EditExtension(this)),this._registerExtension(new FilterExtension(this)),this._registerExtension(new DndExtension(this)),this._registerExtension(new GridExtension(this)),this._registerExtension(new LoggerExtension(this)),this._updateViewportThrottled=adaptiveThrottle(this._updateViewportImmediately.bind(this),{}),this.columns=t.columns,delete t.columns,!this.columns||!this.columns.length){const o=typeof t.header=="string"?t.header:this.id;this.columns=[{id:"*",title:o,width:"*"}]}t.types&&this.setTypes(t.types,!0),delete t.types,this.element=elemFromSelector(t.element),assert(!!this.element,`Invalid 'element' option: ${t.element}`),this.element.classList.add("wunderbaum"),this.element.getAttribute("tabindex")||(this.element.tabIndex=0),this.element._wb_tree=this,this.headerElement=this.element.querySelector("div.wb-header");const s=t.header==null?this.columns.length>1:!!t.header;if(this.headerElement){assert(!this.columns,"`opts.columns` must not be set if markup already contains a header"),this.columns=[];const o=this.headerElement.querySelector("div.wb-row");for(const a of o.querySelectorAll("div"))this.columns.push({id:a.dataset.id||`col_${this.columns.length}`,title:""+a.textContent,width:"*"})}else{const o="<span class='wb-col'></span>".repeat(this.columns.length);if(this.element.innerHTML=`
        <div class='wb-header'>
          <div class='wb-row'>
            ${o}
          </div>
        </div>`,!s){const a=this.element.querySelector("div.wb-header");a.style.display="none"}}this.element.innerHTML+=`
      <div class="wb-list-container">
        <div class="wb-node-list"></div>
      </div>`,this.listContainerElement=this.element.querySelector("div.wb-list-container"),this.nodeListElement=this.listContainerElement.querySelector("div.wb-node-list"),this.headerElement=this.element.querySelector("div.wb-header"),this.element.classList.toggle("wb-grid",this.columns.length>1),this._initExtensions(),["enabled","fixedCol"].forEach(o=>{t[o]!=null&&this.setOption(o,t[o])}),t.source?(t.showSpinner&&(this.nodeListElement.innerHTML="<progress class='spinner'>loading...</progress>"),this.load(t.source).then(()=>{t.navigationModeOption==null?this.isGrid()?this.setNavigationOption(NavModeEnum.cell):this.setNavigationOption(NavModeEnum.row):this.setNavigationOption(t.navigationModeOption),this.update(ChangeType.structure,{immediate:!0}),n.resolve()}).catch(o=>{n.reject(o)}).finally(()=>{var o;(o=this.element.querySelector("progress.spinner"))===null||o===void 0||o.remove(),this.element.classList.remove("wb-initializing")})):n.resolve(),this.update(ChangeType.any),this.element.addEventListener("scroll",o=>{this.update(ChangeType.scroll)}),this.resizeObserver=new ResizeObserver(o=>{this.update(ChangeType.resize)}),this.resizeObserver.observe(this.element),onEvent(this.element,"click",".wb-button,.wb-col-icon",o=>{var a,l;const c=Wunderbaum.getEventInfo(o),d=(l=(a=o.target)===null||a===void 0?void 0:a.dataset)===null||l===void 0?void 0:l.command;this._callEvent("buttonClick",{event:o,info:c,command:d})}),onEvent(this.nodeListElement,"click","div.wb-row",o=>{const a=Wunderbaum.getEventInfo(o),l=a.node,c=o;if(this._callEvent("click",{event:o,node:l,info:a})===!1)return this.lastClickTime=Date.now(),!1;if(l){if(c.ctrlKey){l.toggleSelected();return}const d=this.getOption("edit.trigger"),h=this.getOption("edit.slowClickDelay");d.indexOf("clickActive")>=0&&a.region==="title"&&l.isActive()&&(!h||Date.now()-this.lastClickTime<h)&&l.startEditTitle(),a.colIdx>=0?l.setActive(!0,{colIdx:a.colIdx,event:o}):l.setActive(!0,{event:o}),a.region===NodeRegion.expander?l.setExpanded(!l.isExpanded(),{scrollIntoView:e.scrollIntoViewOnExpandClick!==!1}):a.region===NodeRegion.checkbox&&l.toggleSelected()}this.lastClickTime=Date.now()}),onEvent(this.nodeListElement,"dblclick","div.wb-row",o=>{const a=Wunderbaum.getEventInfo(o),l=a.node;if(this._callEvent("dblclick",{event:o,node:l,info:a})===!1)return!1;l&&a.colIdx===0&&l.isExpandable()&&(this._callMethod("edit._stopEditTitle"),l.setExpanded(!l.isExpanded()))}),onEvent(this.element,"keydown",o=>{const a=Wunderbaum.getEventInfo(o),l=eventToString(o),c=a.node||this.getFocusNode();this._callHook("onKeyEvent",{event:o,node:c,info:a,eventName:l})}),onEvent(this.element,"focusin focusout",o=>{const a=o.type==="focusin",l=Wunderbaum.getNode(o);this._callEvent("focus",{flag:a,event:o}),a&&this.isRowNav()&&!this.isEditingTitle()&&(t.navigationModeOption===NavModeEnum.row?l==null||l.setActive():this.setCellNav()),a||this._callMethod("edit._stopEditTitle",!0,{event:o,forceClose:!0})})}static getTree(e){if(e instanceof Wunderbaum)return e;if(e instanceof WunderbaumNode)return e.tree;if(e===void 0&&(e=0),typeof e=="number")e=document.querySelectorAll(".wunderbaum")[e];else if(typeof e=="string"){for(const t of document.querySelectorAll(".wunderbaum")){const n=t._wb_tree;if(n&&n.id===e)return n}if(e=document.querySelector(e),!e)return null}else e.target&&(e=e.target);return assert(e instanceof Element,`Invalid el type: ${e}`),e.matches(".wunderbaum")||(e=e.closest(".wunderbaum")),e&&e._wb_tree?e._wb_tree:null}get iconMap(){const e=this.options.iconMap;return typeof e=="string"?iconMaps[e]:e}static getNode(e){if(e){if(e instanceof WunderbaumNode)return e;e.target!==void 0&&(e=e.target)}else return null;for(;e;){if(e._wb_node)return e._wb_node;e=e.parentElement}return null}*[Symbol.iterator](){yield*this.root}_registerExtension(e){this.extensionList.push(e),this.extensions[e.id]=e}_initExtensions(){for(const e of this.extensionList)e.init()}_registerNode(e){const t=e.key;assert(t!=null,`Missing key: '${e}'.`),assert(!this.keyMap.has(t),`Duplicate key: '${t}': ${e}.`),this.keyMap.set(t,e);const n=e.refKey;if(n!=null){const r=this.refKeyMap.get(n);r?r.add(e):this.refKeyMap.set(n,new Set([e]))}}_unregisterNode(e){const t=e.refKey;if(t!=null){const n=this.refKeyMap.get(t);n&&n.delete(e)&&!n.size&&this.refKeyMap.delete(t)}this.keyMap.delete(e.key),e.tree=null,e.parent=null,e.removeMarkup()}_callHook(e,t={}){let n;const r=extend({},{tree:this,options:this.options,result:void 0},t);for(const s of this.extensionList){if(n=s[e].call(s,r),n===!1)break;r.result!==void 0&&(n=r.result)}return n}_callMethod(e,...t){const[n,r]=e.split("."),s=r?this.extensions[n]:this,o=s[r];if(o)return o.apply(s,t);this.logError(`Calling undefined method '${e}()'.`)}_callEvent(e,t){const[n,r]=e.split("."),s=this.options,o=r?s[n][r]:s[n];if(o)return o.call(this,extend({type:e,tree:this,util:this._util},t))}_getNodeByRowIdx(e){let t=null;return this.visitRows(n=>{if(n._rowIdx===e)return t=n,!1}),t}getTopmostVpNode(e=!0){const r=this.element.scrollTop;let s;return e?s=Math.ceil((r-1)/ROW_HEIGHT):s=Math.floor(r/ROW_HEIGHT),this._getNodeByRowIdx(s)}getLowestVpNode(e=!0){const t=this.element,n=this.headerElement.clientHeight,r=t.scrollTop,s=t.clientHeight-n;let o;return e?o=Math.floor((r+s)/ROW_HEIGHT)-1:o=Math.ceil((r+s)/ROW_HEIGHT)-1,o=Math.min(o,this.count(!0)-1),this._getNodeByRowIdx(o)}_getPrevNodeInView(e,t=1){return this.visitRows(n=>{if(e=n,t--<=0)return!1},{reverse:!0,start:e||this.getActiveNode()}),e}_getNextNodeInView(e,t=1){return this.visitRows(n=>{if(e=n,t--<=0)return!1},{reverse:!1,start:e||this.getActiveNode()}),e}addChildren(e,t){return this.root.addChildren(e,t)}applyCommand(e,t,n){let r,s;switch(t instanceof WunderbaumNode?r=t:(r=this.getActiveNode(),assert(n===void 0,`Unexpected options: ${n}`),n=t),e){case"moveUp":s=r.getPrevSibling(),s&&(r.moveTo(s,"before"),r.setActive());break;case"moveDown":s=r.getNextSibling(),s&&(r.moveTo(s,"after"),r.setActive());break;case"indent":s=r.getPrevSibling(),s&&(r.moveTo(s,"appendChild"),s.setExpanded(),r.setActive());break;case"outdent":r.isTopLevel()||(r.moveTo(r.getParent(),"after"),r.setActive());break;case"remove":s=r.getPrevSibling()||r.getParent(),r.remove(),s&&s.setActive();break;case"addChild":this._callMethod("edit.createNode","prependChild");break;case"addSibling":this._callMethod("edit.createNode","after");break;case"rename":r.startEditTitle();break;case"down":case"first":case"last":case"left":case"pageDown":case"pageUp":case"parent":case"right":case"up":return r.navigate(e);default:error(`Unhandled command: '${e}'`)}}clear(){this.root.removeChildren(),this.root.children=null,this.keyMap.clear(),this.refKeyMap.clear(),this.treeRowCount=0,this._activeNode=null,this._focusNode=null,this.update(ChangeType.structure)}destroy(){this.logInfo("destroy()..."),this.clear(),this.resizeObserver.disconnect(),this.element.innerHTML="",this.element.outerHTML=this.element.outerHTML}getOption(e,t){let n,r=this.options;e.indexOf(".")>=0&&([n,e]=e.split("."),r=r[n]);let s=r[e];return typeof s=="function"&&(s=s({type:"resolve",tree:this})),s??t}setOption(e,t){if(e.indexOf(".")>=0){const n=e.split(".");this.extensions[n[0]].setPluginOption(n[1],t);return}switch(this.options[e]=t,e){case"checkbox":this.update(ChangeType.any);break;case"enabled":this.setEnabled(!!t);break;case"fixedCol":this.element.classList.toggle("wb-fixed-col",!!t);break}}hasFocus(){return this.element.contains(document.activeElement)}hasHeader(){const e=this.options.header;return this.isGrid()?e!==!1:!!e}runWithDeferredUpdate(e,t=null){try{this.enableUpdate(!1);const n=e();return assert(!(n instanceof Promise),`Promise return not allowed: ${n}`),n}finally{this.enableUpdate(!0)}}async expandAll(e=!0,t){await this.root.expandAll(e,t)}selectAll(e=!0){return this.root.setSelected(e,{propagateDown:!0})}toggleSelect(){this.selectAll(this.root._anySelectable())}getSelectedNodes(e=!1){return this.root.getSelectedNodes(e)}_selectRange(e){this.logDebug("_selectRange",e),error("Not yet implemented.")}count(e=!1){return e?this.treeRowCount:this.keyMap.size}_check(){let e=0;this.visit(t=>{e++}),this.keyMap.size!==e&&this.logWarn(`_check failed: ${this.keyMap.size} !== ${e}`)}findAll(e){return this.root.findAll(e)}findByRefKey(e){const t=this.refKeyMap.get(e);return t?Array.from(t):[]}findFirst(e){return this.root.findFirst(e)}findKey(e){return this.keyMap.get(e)||null}findNextNode(e,t){let n=null;const r=this.getFirstChild(),s=typeof e=="string"?makeNodeTitleStartMatcher(e):e;t=t||r;function o(a){if(s(a)&&(n=a),n||a===t)return!1}return this.visitRows(o,{start:t,includeSelf:!1}),!n&&t!==r&&this.visitRows(o,{start:r,includeSelf:!0}),n}findRelatedNode(e,t,n=!1){let r=null;const s=Math.floor(this.listContainerElement.clientHeight/ROW_HEIGHT);switch(t){case"parent":e.parent&&e.parent.parent&&(r=e.parent);break;case"first":this.visit(o=>{if(o.isVisible())return r=o,!1});break;case"last":this.visit(o=>{o.isVisible()&&(r=o)});break;case"left":e.parent&&e.parent.parent&&(r=e.parent);break;case"right":e.children&&e.children.length&&(r=e.children[0]);break;case"up":r=this._getPrevNodeInView(e);break;case"down":r=this._getNextNodeInView(e);break;case"pageDown":{const o=this.getLowestVpNode();e._rowIdx<o._rowIdx?r=o:r=this._getNextNodeInView(e,s)}break;case"pageUp":if(e._rowIdx===0)r=e;else{const o=this.getTopmostVpNode();e._rowIdx>o._rowIdx?r=o:r=this._getPrevNodeInView(e,s)}break;default:this.logWarn("Unknown relation '"+t+"'.")}return r}*format_iter(e,t){yield*this.root.format_iter(e,t)}format(e,t){return this.root.format(e,t)}getActiveColElem(){return this.activeNode&&this.activeColIdx>=0?this.activeNode.getColElem(this.activeColIdx):null}getActiveNode(){return this.activeNode}getFirstChild(){return this.root.getFirstChild()}getFocusNode(){return this.focusNode}static getEventInfo(e){const t=e.target,n=t.classList,r=t.closest("span.wb-col"),s=Wunderbaum.getNode(t),o=s?s.tree:Wunderbaum.getTree(e),a={event:e,canonicalName:eventToString(e),tree:o,node:s,region:NodeRegion.unknown,colDef:void 0,colIdx:-1,colId:void 0,colElem:r};if(n.contains("wb-title"))a.region=NodeRegion.title;else if(n.contains("wb-expander"))a.region=s.isExpandable()?NodeRegion.expander:NodeRegion.prefix;else if(n.contains("wb-checkbox"))a.region=NodeRegion.checkbox;else if(n.contains("wb-icon"))a.region=NodeRegion.icon;else if(n.contains("wb-node"))a.region=NodeRegion.title;else if(r){a.region=NodeRegion.column;const l=Array.prototype.indexOf.call(r.parentNode.children,r);a.colIdx=l}else if(n.contains("wb-row"))a.region=NodeRegion.title;else return e.type!=="mousemove"&&!(e instanceof KeyboardEvent)&&(o==null||o.logWarn("getEventInfo(): not found",e,a)),a;return a.colIdx===-1&&(a.colIdx=0),a.colDef=o==null?void 0:o.columns[a.colIdx],a.colDef!=null&&(a.colId=a.colDef.id),a}toString(){return`Wunderbaum<'${this.id}'>`}isEditing(){return!!this.nodeListElement.querySelector("input:focus,select:focus")}isEditingTitle(){return this._callMethod("edit.isEditingTitle")}isLoading(){let e=!1;return this.root.visit(t=>{if(t._isLoading||t._requestId)return e=!0,!1},!0),e}log(...e){this.options.debugLevel>=4&&console.log(this.toString(),...e)}logDebug(...e){this.options.debugLevel>=4&&console.debug(this.toString(),...e)}logError(...e){this.options.debugLevel>=1&&console.error(this.toString(),...e)}logInfo(...e){this.options.debugLevel>=3&&console.info(this.toString(),...e)}logTime(e){return this.options.debugLevel>=4&&console.time(this+": "+e),e}logTimeEnd(e){this.options.debugLevel>=4&&console.timeEnd(this+": "+e)}logWarn(...e){this.options.debugLevel>=2&&console.warn(this.toString(),...e)}resetColumns(){this.columns.forEach(e=>{delete e.customWidthPx}),this.update(ChangeType.colStructure)}scrollTo(e){let n,r;e instanceof WunderbaumNode?n=e:(r=e,n=r.node),assert(n&&n._rowIdx!=null,`Invalid node: ${n}`);const s=this.element,o=this.headerElement.clientHeight,a=s.scrollTop,l=s.clientHeight,c=n._rowIdx*ROW_HEIGHT+o,d=o,h=c-a,f=h+ROW_HEIGHT,p=r==null?void 0:r.topNode;let y=null;h>=d?f<=l||(y=c+ROW_HEIGHT-l+2):y=c-d-2,y!=null&&(this.log(`scrollTo(${c}): ${a} => ${y}`),s.scrollTop=y,p&&this.scrollTo(p))}scrollToHorz(){const e=this.columns[0]._widthPx,t=this.element.clientWidth,n=this.element.scrollLeft,r=this.getActiveColElem(),s=Number.parseInt(r==null?void 0:r.style.left,10),o=s+Number.parseInt(r==null?void 0:r.style.width,10);let a=n;s-n<e?a=s-e:o-n>t&&(a=o-t),a=Math.max(0,a),this.log(`scrollToHorz(${this.activeColIdx}): ${s}..${o}, fixedOfs=${e}, vpWidth=${t}, curLeft=${n} -> ${a}`),this.element.scrollLeft=a}setColumn(e,t){var n,r,s;const o=t==null?void 0:t.edit,a=(t==null?void 0:t.scrollIntoView)!==!1;if(assert(this.isCellNav(),"Expected cellNav mode"),typeof e=="string"){const l=e;e=this.columns.findIndex(c=>c.id===e),assert(e>=0,`Invalid colId: ${l}`)}if(assert(0<=e&&e<this.columns.length,`Invalid colIdx: ${e}`),this.activeColIdx=e,this.hasHeader())for(const l of this.headerElement.children){let c=0;for(const d of l.children)d.classList.toggle("wb-active",c++===e)}(n=this.activeNode)===null||n===void 0||n.update(ChangeType.status);for(const l of this.nodeListElement.children){let c=0;for(const d of l.children)d.classList.toggle("wb-active",c++===e)}(a||o)&&this.scrollToHorz(),o&&this.activeNode&&(e===0?this.activeNode.startEditTitle():(s=(r=this.getActiveColElem())===null||r===void 0?void 0:r.querySelector("input,select"))===null||s===void 0||s.focus())}_setActiveNode(e){this._activeNode=e}setActiveNode(e,t=!0,n){var r;(r=this.findKey(e))===null||r===void 0||r.setActive(t,n)}setFocus(e=!0){e?this.element.focus():this.element.blur()}_setFocusNode(e){this._focusNode=e}update(e,t,n){t instanceof WunderbaumNode||(n=t,t=void 0);const r=!!getOption(n,"immediate"),s=RenderFlag,o=this.pendingChangeTypes;if(this._disableUpdateCount){this._disableUpdateIgnoreCount++;return}switch(e){case ChangeType.any:case ChangeType.colStructure:o.add(s.header),o.add(s.clearMarkup),o.add(s.redraw),o.add(s.scroll);break;case ChangeType.resize:o.add(s.header),o.add(s.redraw);break;case ChangeType.structure:o.add(s.redraw);break;case ChangeType.scroll:o.add(s.scroll);break;case ChangeType.row:case ChangeType.data:case ChangeType.status:assert(t,`Option '${e}' requires a node.`),t._rowElem&&t._render({change:e});break;default:error(`Invalid change type '${e}'.`)}if(e===ChangeType.colStructure){const a=this.isGrid();this.element.classList.toggle("wb-grid",a),!a&&this.isCellNav()&&this.setCellNav(!1)}o.size>0&&(r?this._updateViewportImmediately():this._updateViewportThrottled())}setEnabled(e=!0){const t=this.enabled;return this.enabled=!!e,this.element.classList.toggle("wb-disabled",!e),t}isEnabled(){return this.enabled}isGrid(){return this.columns&&this.columns.length>1}isCellNav(){return!!this._cellNavMode}isRowNav(){return!this._cellNavMode}setCellNav(e=!0){var t;const n=this._cellNavMode;this._cellNavMode=!!e,e&&!n&&this.setColumn(0),this.element.classList.toggle("wb-cell-mode",e),(t=this.activeNode)===null||t===void 0||t.update(ChangeType.status)}setNavigationOption(e,t=!1){if(!this.isGrid()&&e!==NavModeEnum.row){this.logWarn("Plain trees only support row navigation mode.");return}switch(this.options.navigationModeOption=e,e){case NavModeEnum.cell:this.setCellNav(!0);break;case NavModeEnum.row:this.setCellNav(!1);break;case NavModeEnum.startCell:t&&this.setCellNav(!0);break;case NavModeEnum.startRow:t&&this.setCellNav(!1);break;default:error(`Invalid mode '${e}'.`)}}setStatus(e,t){return this.root.setStatus(e,t)}setTypes(e,t=!0){assert(isPlainObject(e),`Expected plain objext: ${e}`),t?this.types=e:extend(this.types,e);for(const n of Object.values(this.types))n.classes&&(n.classes=toSet(n.classes))}sortChildren(e=nodeTitleSorter,t=!1){this.root.sortChildren(e,t)}sortByProperty(e){this.root.sortByProperty(e)}toDictArray(e){var t;return(t=this.root.toDict(!0,e).children)!==null&&t!==void 0?t:[]}_updateColumnWidths(){const t=this.element.clientWidth,n=1,r=this.columns,s=r[0];let o=0,a=0,l=0,c=!1;if(s.id!=="*")throw new Error(`First column must have  id '*': got '${s.id}'.`);this._columnsById={};for(const p of r){this._columnsById[p.id]=p;const y=p.customWidthPx?`${p.customWidthPx}px`:p.width;if(p.id==="*"&&p!==s)throw new Error(`Column id '*' must be defined only once: '${p.title}'.`);if(!y||y==="*")p._weight=1,a+=1;else if(typeof y=="number")p._weight=y,a+=y;else if(typeof y=="string"&&y.endsWith("px")){p._weight=0;const u=parseFloat(y.slice(0,-2));p._widthPx!=u&&(c=!0,p._widthPx=u),l+=u}else error(`Invalid column width: ${y} (expected string ending with 'px' or number, e.g. "<num>px" or <int>).`)}const d=Math.max(0,t-l);let h=0;for(const p of r){let y;if(p._weight){const u=p.minWidth;typeof u=="number"?y=u:typeof u=="string"&&u.endsWith("px")?y=parseFloat(u.slice(0,-2)):y=4;const g=Math.max(y,d*p._weight/a);p._widthPx!=g&&(c=!0,p._widthPx=g)}p._ofsPx=h,h+=p._widthPx}r[r.length-1]._widthPx-=n,o=h-n;const f=`${o}px`;return this.headerElement.style.width=f,this.listContainerElement.style.width=f,c}_insertIcon(e,t){const n=document.createElement("i");n.className=e,t.appendChild(n)}_renderHeaderMarkup(){assert(this.headerElement,"Expected a headerElement");const e=this.hasHeader();if(setElemDisplay(this.headerElement,e),!e)return;const t=this.iconMap,n=this.columns.length,r=this.headerElement.querySelector(".wb-row");assert(r,"Expected a row in header element"),r.innerHTML="<span class='wb-col'></span>".repeat(n);for(let s=0;s<n;s++){const o=this.columns[s],a=r.children[s];a.style.left=o._ofsPx+"px",a.style.width=o._widthPx+"px",typeof o.headerClasses=="string"?o.headerClasses&&a.classList.add(...o.headerClasses.split(" ")):o.classes&&a.classList.add(...o.classes.split(" "));let l="";o.tooltip&&(l=escapeTooltip(o.tooltip),l=` title="${l}"`);let c="";if(toBool(o.menu,this.options.columnsMenu,!1)){const f=`<i data-command=menu class="wb-col-icon ${"wb-col-icon-menu "+t.colMenu}"></i>`;c+=f}if(toBool(o.sortable,this.options.columnsSortable,!1)){let h="wb-col-icon-sort "+t.colSortable;o.sortOrder&&(h+=`wb-col-sort-${o.sortOrder}`,h+=o.sortOrder==="asc"?t.colSortAsc:t.colSortDesc);const f=`<i data-command=sort class="wb-col-icon ${h}"></i>`;c+=f}if(toBool(o.filterable,this.options.columnsFilterable,!1)){a.classList.toggle("wb-col-filter",!!o.filterActive);let h="wb-col-icon-filter "+t.colFilter;o.filterActive&&(h+=t.colFilterActive);const f=`<i data-command=filter class="wb-col-icon ${h}"></i>`;c+=f}s<n-1&&(toBool(o.resizable,this.options.columnsResizable,!1)?c+='<span class="wb-col-resizer wb-col-resizer-active"></span>':c+='<span class="wb-col-resizer"></span>');const d=escapeHtml(o.title||o.id);a.innerHTML=`<span class="wb-col-title"${l}>${d}</span>${c}`,this.isCellNav()&&a.classList.toggle("wb-active",s===this.activeColIdx)}}updatePendingModifications(){this.pendingChangeTypes.size>0&&this._updateViewportImmediately()}_updateViewportImmediately(){var e;if(this._disableUpdateCount){this.log(`_updateViewportImmediately() IGNORED (disable level: ${this._disableUpdateCount}).`),this._disableUpdateIgnoreCount++;return}this._updateViewportThrottled.pending()&&this._updateViewportThrottled.cancel();const t=1,n=RenderFlag,r=new Set(this.pendingChangeTypes);if(this.pendingChangeTypes.clear(),r.has(n.scroll)&&r.size===1)this._updateRows({newNodesOnly:!0});else{if(this.log("_updateViewportImmediately():",r),this.options.adjustHeight!==!1){let o=this.listContainerElement.clientHeight;const a=this.headerElement.clientHeight,l=this.element.clientHeight-a-t;Math.abs(o-l)>1&&(this.listContainerElement.style.height=l+"px",o=l)}r.has(n.clearMarkup)&&this.visit(o=>{o.removeMarkup()}),r.has(n.header)&&(this._updateColumnWidths(),this._renderHeaderMarkup()),this._updateRows()}if(this.options.connectTopBreadcrumb){assert(this.options.connectTopBreadcrumb.textContent!=null,"Invalid 'connectTopBreadcrumb' option (input element expected).");let o=(e=this.getTopmostVpNode(!0))===null||e===void 0?void 0:e.getPath(!1,"title"," > ");o=o?o+" >":"",this.options.connectTopBreadcrumb.textContent=o}this._callEvent("update")}_updateRows(e){e=Object.assign({newNodesOnly:!1},e);const t=!!e.newNodesOnly,n=ROW_HEIGHT,r=this.element.clientHeight,s=RENDER_MAX_PREFETCH,o=this.element.scrollTop;let a=Math.max(0,o/n-s);a=Math.floor(a),a%2&&a--;let l=Math.max(0,(o+r)/n+s);l=Math.ceil(l);const c=new Set;this.nodeListElement.childNodes.forEach(y=>{const u=y;c.add(u._wb_node)});let d=0,h=0,f=!1,p="first";this.visitRows(function(y){const u=y._rowElem;y._rowIdx!==d&&(y._rowIdx=d,f=!0),d<a||d>l?u&&(p=u):u&&t?(c.delete(y),u.style.top=d*ROW_HEIGHT+"px",p=u):(c.delete(y),u&&(u.style.top=d*ROW_HEIGHT+"px"),y._render({top:h,after:p}),p=y._rowElem),d++,h+=n}),this.treeRowCount=d;for(const y of c)y._callEvent("discard"),y.removeMarkup();return this.nodeListElement.style.height=`${h}px`,f}visit(e){return this.root.visit(e,!1)}visitRows(e,t){if(!this.root.hasChildren())return!1;if(t&&t.reverse)return delete t.reverse,this._visitRowsUp(e,t);t=t||{};let n,r,s,o,a,l,c=0,d=t.includeSelf===!1,h=t.start||this.root.children[0];const f=!!t.includeHidden,p=!f&&this.filterMode==="hide";for(s=h.parent;s;){for(a=s.children,r=a.indexOf(h)+c,assert(r>=0,`Could not find ${h} in parent's children: ${s}`),n=r;n<a.length;n++){if(h=a[n],h===l)return!1;if(!(p&&!h.statusNodeType&&!h.match&&!h.subMatchCount)&&(!d&&e(h)===!1||(d=!1,h.children&&h.children.length&&(f||h.expanded)&&(o=h.visit(y=>{if(y===l)return!1;if(p&&!y.match&&!y.subMatchCount)return"skip";if(e(y)===!1)return!1;if(!f&&y.children&&!y.expanded)return"skip"},!1),o===!1))))return!1}h=s,s=s.parent,c=1,!s&&t.wrap&&(this.logDebug("visitRows(): wrap around"),assert(t.start,"`wrap` option requires `start`"),l=t.start,t.wrap=!1,s=this.root,c=0)}return!0}_visitRowsUp(e,t){let n,r,s,o=t.start||this.root.children[0];const a=!!t.includeHidden;if(t.includeSelf!==!1&&e(o)===!1)return!1;for(;;){if(s=o.parent,n=s.children,n[0]===o){if(o=s,!o.parent)break;n=s.children}else for(r=n.indexOf(o),o=n[r-1];(a||o.expanded)&&o.children&&o.children.length;)n=o.children,s=o,o=n[n.length-1];if(!(!a&&!o.isVisible())&&e(o)===!1)return!1}return!0}load(e){return this.clear(),this.root.load(e)}enableUpdate(e){e?(assert(this._disableUpdateCount>0,"enableUpdate(true) was called too often"),this._disableUpdateCount--,this._disableUpdateCount===0&&(this.logDebug(`enableUpdate(): active again. Re-painting to catch up with ${this._disableUpdateIgnoreCount} ignored update requests...`),this._disableUpdateIgnoreCount=0,this.update(ChangeType.any,{immediate:!0}))):this._disableUpdateCount++}filterNodes(e,t){return this.extensions.filter.filterNodes(e,t)}countMatches(){return this.extensions.filter.countMatches()}filterBranches(e,t){return this.extensions.filter.filterBranches(e,t)}clearFilter(){return this.extensions.filter.clearFilter()}isFilterActive(){return!!this.filterMode}updateFilter(){return this.extensions.filter.updateFilter()}}Wunderbaum.sequence=0;Wunderbaum.version="v0.11.0";Wunderbaum.util=util$5;var root_1$2=template("<img>"),root_2$2=template("<pre> </pre>");function Content(i,e){push$1(e,!0);let t=state(void 0),n=state(void 0);const[,r]=Array.from(/([^.]+)$/.exec(e.content.name)??[]);switch(r){case"jpg":case"jpeg":case"png":case"gif":case"svg":{set$1(t,proxy(URL.createObjectURL(e.content)));break}default:set$1(t,void 0),e.content.text().then(a=>{set$1(n,proxy(a))})}var s=comment(),o=first_child(s);if_block(o,()=>get$1(t),a=>{var l=root_1$2();template_effect(()=>{set_attribute(l,"src",get$1(t)),set_attribute(l,"alt",e.content.name)}),append$1(a,l)},a=>{var l=root_2$2(),c=child(l,!0);reset(l),template_effect(()=>set_text(c,get$1(n))),append$1(a,l)}),append$1(i,s),pop()}var on_click$1=async(i,e)=>{set$1(e,proxy(await window.showDirectoryPicker()))},root_2$1=template("<span> </span>"),root_3$1=template("<span>No directory selected.</span>"),root_1$1=template('<label><button type="button">Pick Directory</button> <!></label>'),root_4$1=template("<p>Warning: This program uses <code>showDirectoryPicker()</code> to retrieve a <code>FileSystemDirectoryHandle</code>. As of this writing, 26 November 2024, Chrome & Opera are the only browsers that make this function available.</p> <p>Specifically, <em>this</em> browser doesn't have support for <code>showDirectoryPicker</code>.</p>",1),root_5$1=template('<label><input id="gitignore" type="checkbox" checked> <span>Respect <code>.gitignore</code>s</span></label> <button>Review Import</button>',1),on_click_1=(i,e)=>e(!1),root_6$1=template("<button>😿 Sorry 😿</button>"),root=template('<dialog class="svelte-1tpfgm6"><h1>Import A Directory Tree</h1> <form class="svelte-1tpfgm6"><!> <!></form></dialog>');function BeginDialog(i,e){push$1(e,!0);let t=prop(e,"open",15,!1),n=state(void 0);user_effect(()=>{var d,h;t()?(d=get$1(n))==null||d.showModal():(h=get$1(n))==null||h.close()});let r=state(void 0);const s=async d=>{var p;d.preventDefault(),d.target.elements.namedItem("dir");const f=[get$1(r)].filter(y=>!!y);if(f.length===0)throw new Error("No directory selected.");(p=e.onsubmit)==null||p.call(e,f),t(!1)};var o=root(),a=sibling(child(o),2),l=child(a);if_block(l,()=>!!window.showDirectoryPicker,d=>{var h=root_1$1(),f=child(h);f.__click=[on_click$1,r];var p=sibling(f,2);if_block(p,()=>get$1(r),y=>{var u=root_2$1(),g=child(u,!0);reset(u),template_effect(()=>set_text(g,get$1(r).name)),append$1(y,u)},y=>{var u=root_3$1();append$1(y,u)}),reset(h),append$1(d,h)},d=>{var h=root_4$1();next(2),append$1(d,h)});var c=sibling(l,2);if_block(c,()=>!!window.showDirectoryPicker,d=>{var h=root_5$1();next(2),append$1(d,h)},d=>{var h=root_6$1();h.__click=[on_click_1,t],append$1(d,h)}),reset(a),reset(o),bind_this(o,d=>set$1(n,d),()=>get$1(n)),event("submit",a,s),append$1(i,o),pop()}delegate(["click"]);var define_process_env_default={};function makeArray(i){return Array.isArray(i)?i:[i]}const EMPTY$4="",SPACE=" ",ESCAPE="\\",REGEX_TEST_BLANK_LINE=/^\s+$/,REGEX_INVALID_TRAILING_BACKSLASH=/(?:[^\\]|^)\\$/,REGEX_REPLACE_LEADING_EXCAPED_EXCLAMATION=/^\\!/,REGEX_REPLACE_LEADING_EXCAPED_HASH=/^\\#/,REGEX_SPLITALL_CRLF=/\r?\n/g,REGEX_TEST_INVALID_PATH=/^\.*\/|^\.+$/,SLASH="/";let TMP_KEY_IGNORE="node-ignore";typeof Symbol<"u"&&(TMP_KEY_IGNORE=Symbol.for("node-ignore"));const KEY_IGNORE=TMP_KEY_IGNORE,define=(i,e,t)=>Object.defineProperty(i,e,{value:t}),REGEX_REGEXP_RANGE=/([0-z])-([0-z])/g,RETURN_FALSE=()=>!1,sanitizeRange=i=>i.replace(REGEX_REGEXP_RANGE,(e,t,n)=>t.charCodeAt(0)<=n.charCodeAt(0)?e:EMPTY$4),cleanRangeBackSlash=i=>{const{length:e}=i;return i.slice(0,e-e%2)},REPLACERS=[[/^\uFEFF/,()=>EMPTY$4],[/((?:\\\\)*?)(\\?\s+)$/,(i,e,t)=>e+(t.indexOf("\\")===0?SPACE:EMPTY$4)],[/(\\+?)\s/g,(i,e)=>{const{length:t}=e;return e.slice(0,t-t%2)+SPACE}],[/[\\$.|*+(){^]/g,i=>`\\${i}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(i,e,t)=>e+6<t.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(i,e,t)=>{const n=t.replace(/\\\*/g,"[^\\/]*");return e+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>ESCAPE],[/\\\\/g,()=>ESCAPE],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(i,e,t,n,r)=>e===ESCAPE?`\\[${t}${cleanRangeBackSlash(n)}${r}`:r==="]"&&n.length%2===0?`[${sanitizeRange(t)}${n}]`:"[]"],[/(?:[^*])$/,i=>/\/$/.test(i)?`${i}$`:`${i}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(i,e)=>`${e?`${e}[^/]+`:"[^/]*"}(?=$|\\/$)`]],regexCache=Object.create(null),makeRegex=(i,e)=>{let t=regexCache[i];return t||(t=REPLACERS.reduce((n,[r,s])=>n.replace(r,s.bind(i)),i),regexCache[i]=t),e?new RegExp(t,"i"):new RegExp(t)},isString=i=>typeof i=="string",checkPattern=i=>i&&isString(i)&&!REGEX_TEST_BLANK_LINE.test(i)&&!REGEX_INVALID_TRAILING_BACKSLASH.test(i)&&i.indexOf("#")!==0,splitPattern=i=>i.split(REGEX_SPLITALL_CRLF);class IgnoreRule{constructor(e,t,n,r){this.origin=e,this.pattern=t,this.negative=n,this.regex=r}}const createRule=(i,e)=>{const t=i;let n=!1;i.indexOf("!")===0&&(n=!0,i=i.substr(1)),i=i.replace(REGEX_REPLACE_LEADING_EXCAPED_EXCLAMATION,"!").replace(REGEX_REPLACE_LEADING_EXCAPED_HASH,"#");const r=makeRegex(i,e);return new IgnoreRule(t,i,n,r)},throwError=(i,e)=>{throw new e(i)},checkPath=(i,e,t)=>isString(i)?i?checkPath.isNotRelative(i)?t(`path should be a \`path.relative()\`d string, but got "${e}"`,RangeError):!0:t("path must not be empty",TypeError):t(`path must be a string, but got \`${e}\``,TypeError),isNotRelative=i=>REGEX_TEST_INVALID_PATH.test(i);checkPath.isNotRelative=isNotRelative;checkPath.convert=i=>i;class Ignore{constructor({ignorecase:e=!0,ignoreCase:t=e,allowRelativePaths:n=!1}={}){define(this,KEY_IGNORE,!0),this._rules=[],this._ignoreCase=t,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[KEY_IGNORE]){this._rules=this._rules.concat(e._rules),this._added=!0;return}if(checkPattern(e)){const t=createRule(e,this._ignoreCase);this._added=!0,this._rules.push(t)}}add(e){return this._added=!1,makeArray(isString(e)?splitPattern(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,t){let n=!1,r=!1;return this._rules.forEach(s=>{const{negative:o}=s;if(r===o&&n!==r||o&&!n&&!r&&!t)return;s.regex.test(e)&&(n=!o,r=o)}),{ignored:n,unignored:r}}_test(e,t,n,r){const s=e&&checkPath.convert(e);return checkPath(s,e,this._allowRelativePaths?RETURN_FALSE:throwError),this._t(s,t,n,r)}_t(e,t,n,r){if(e in t)return t[e];if(r||(r=e.split(SLASH)),r.pop(),!r.length)return t[e]=this._testOne(e,n);const s=this._t(r.join(SLASH)+SLASH,t,n,r);return t[e]=s.ignored?s:this._testOne(e,n)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return makeArray(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}}const factory$1=i=>new Ignore(i),isPathValid=i=>checkPath(i&&checkPath.convert(i),i,RETURN_FALSE);factory$1.isPathValid=isPathValid;factory$1.default=factory$1;var ignore=factory$1;if(typeof process<"u"&&(define_process_env_default&&define_process_env_default.IGNORE_TEST_WIN32||process.platform==="win32")){const i=t=>/^\\\\\?\\/.test(t)||/["<>|\u0000-\u001F]+/u.test(t)?t:t.replace(/\\/g,"/");checkPath.convert=i;const e=/^[a-z]:\//i;checkPath.isNotRelative=t=>e.test(t)||isNotRelative(t)}const ignore$1=getDefaultExportFromCjs(ignore);let gitignores=[];const readTree=({onStatusUpdate:i,dirs:e,gitignores:t=!0})=>{return Array.isArray(e)||(e=[e]),Promise.all(e.map(async r=>await n(r)));async function n(r,s=""){var l;const o=`${s}${r.name}/`;if(i==null||i(`Traversing: ${o}`),t)try{if(gitignores.length===0){const d=ignore$1();d.add(["**/.git"]),gitignores.push({ig:d,path:o})}const c=await r.getFileHandle(".gitignore");if(c){const d=ignore$1(),f=(await(await c.getFile()).text()).split(/\s*\n\s*/m);d.add(f),gitignores.push({ig:d,path:o})}}catch{}const a={type:"directory",title:r.name,children:[],size:0,childCount:0};for await(const c of r.values()){const d=`${o}${c.name}`;if(!gitignores.some(f=>{if(!d.startsWith(f.path))throw new Error(`Invalid Path: "${d}", doesn't start with "${f.path}".`);const p=d.substring(f.path.length);if(p!==""&&(f.ig.ignores(p)||f.ig.ignores(p.replace(/^\/+/,""))||c.kind==="directory"&&f.ig.ignores(`${p}/`)))return i==null||i(`Ignoring: ${d}`),!0})){let f;if(c.kind==="directory")f=await n(c,o),a.childCount+=f.childCount;else{i==null||i(`Leaf: ${d}`);const p=await c.getFile();f={type:"file",title:c.name,size:p.size,handle:c},a.childCount+=1}f&&(a.size+=f.size,(l=a.children)==null||l.push(f))}}return gitignores=gitignores.filter(c=>c.path.length<o.length),a}};makeCborEncoders();var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(i,e){for(var t=new Array(arguments.length-1),n=0,r=2,s=!0;r<arguments.length;)t[n++]=arguments[r++];return new Promise(function(a,l){t[n]=function(d){if(s)if(s=!1,d)l(d);else{for(var h=new Array(arguments.length-1),f=0;f<h.length;)h[f++]=arguments[f];a.apply(null,h)}};try{i.apply(e||null,t)}catch(c){s&&(s=!1,l(c))}})}var base64$1={};(function(i){var e=i;e.length=function(a){var l=a.length;if(!l)return 0;for(var c=0;--l%4>1&&a.charAt(l)==="=";)++c;return Math.ceil(a.length*3)/4-c};for(var t=new Array(64),n=new Array(123),r=0;r<64;)n[t[r]=r<26?r+65:r<52?r+71:r<62?r-4:r-59|43]=r++;e.encode=function(a,l,c){for(var d=null,h=[],f=0,p=0,y;l<c;){var u=a[l++];switch(p){case 0:h[f++]=t[u>>2],y=(u&3)<<4,p=1;break;case 1:h[f++]=t[y|u>>4],y=(u&15)<<2,p=2;break;case 2:h[f++]=t[y|u>>6],h[f++]=t[u&63],p=0;break}f>8191&&((d||(d=[])).push(String.fromCharCode.apply(String,h)),f=0)}return p&&(h[f++]=t[y],h[f++]=61,p===1&&(h[f++]=61)),d?(f&&d.push(String.fromCharCode.apply(String,h.slice(0,f))),d.join("")):String.fromCharCode.apply(String,h.slice(0,f))};var s="invalid encoding";e.decode=function(a,l,c){for(var d=c,h=0,f,p=0;p<a.length;){var y=a.charCodeAt(p++);if(y===61&&h>1)break;if((y=n[y])===void 0)throw Error(s);switch(h){case 0:f=y,h=1;break;case 1:l[c++]=f<<2|(y&48)>>4,f=y,h=2;break;case 2:l[c++]=(f&15)<<4|(y&60)>>2,f=y,h=3;break;case 3:l[c++]=(f&3)<<6|y,h=0;break}}if(h===1)throw Error(s);return c-d},e.test=function(a){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(a)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this};EventEmitter.prototype.off=function(e,t){if(e===void 0)this._listeners={};else if(t===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this};EventEmitter.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this};var float=factory(factory);function factory(i){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),n=t[3]===128;function r(l,c,d){e[0]=l,c[d]=t[0],c[d+1]=t[1],c[d+2]=t[2],c[d+3]=t[3]}function s(l,c,d){e[0]=l,c[d]=t[3],c[d+1]=t[2],c[d+2]=t[1],c[d+3]=t[0]}i.writeFloatLE=n?r:s,i.writeFloatBE=n?s:r;function o(l,c){return t[0]=l[c],t[1]=l[c+1],t[2]=l[c+2],t[3]=l[c+3],e[0]}function a(l,c){return t[3]=l[c],t[2]=l[c+1],t[1]=l[c+2],t[0]=l[c+3],e[0]}i.readFloatLE=n?o:a,i.readFloatBE=n?a:o}():function(){function e(n,r,s,o){var a=r<0?1:0;if(a&&(r=-r),r===0)n(1/r>0?0:2147483648,s,o);else if(isNaN(r))n(2143289344,s,o);else if(r>34028234663852886e22)n((a<<31|2139095040)>>>0,s,o);else if(r<11754943508222875e-54)n((a<<31|Math.round(r/1401298464324817e-60))>>>0,s,o);else{var l=Math.floor(Math.log(r)/Math.LN2),c=Math.round(r*Math.pow(2,-l)*8388608)&8388607;n((a<<31|l+127<<23|c)>>>0,s,o)}}i.writeFloatLE=e.bind(null,writeUintLE),i.writeFloatBE=e.bind(null,writeUintBE);function t(n,r,s){var o=n(r,s),a=(o>>31)*2+1,l=o>>>23&255,c=o&8388607;return l===255?c?NaN:a*(1/0):l===0?a*1401298464324817e-60*c:a*Math.pow(2,l-150)*(c+8388608)}i.readFloatLE=t.bind(null,readUintLE),i.readFloatBE=t.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),n=t[7]===128;function r(l,c,d){e[0]=l,c[d]=t[0],c[d+1]=t[1],c[d+2]=t[2],c[d+3]=t[3],c[d+4]=t[4],c[d+5]=t[5],c[d+6]=t[6],c[d+7]=t[7]}function s(l,c,d){e[0]=l,c[d]=t[7],c[d+1]=t[6],c[d+2]=t[5],c[d+3]=t[4],c[d+4]=t[3],c[d+5]=t[2],c[d+6]=t[1],c[d+7]=t[0]}i.writeDoubleLE=n?r:s,i.writeDoubleBE=n?s:r;function o(l,c){return t[0]=l[c],t[1]=l[c+1],t[2]=l[c+2],t[3]=l[c+3],t[4]=l[c+4],t[5]=l[c+5],t[6]=l[c+6],t[7]=l[c+7],e[0]}function a(l,c){return t[7]=l[c],t[6]=l[c+1],t[5]=l[c+2],t[4]=l[c+3],t[3]=l[c+4],t[2]=l[c+5],t[1]=l[c+6],t[0]=l[c+7],e[0]}i.readDoubleLE=n?o:a,i.readDoubleBE=n?a:o}():function(){function e(n,r,s,o,a,l){var c=o<0?1:0;if(c&&(o=-o),o===0)n(0,a,l+r),n(1/o>0?0:2147483648,a,l+s);else if(isNaN(o))n(0,a,l+r),n(2146959360,a,l+s);else if(o>17976931348623157e292)n(0,a,l+r),n((c<<31|2146435072)>>>0,a,l+s);else{var d;if(o<22250738585072014e-324)d=o/5e-324,n(d>>>0,a,l+r),n((c<<31|d/4294967296)>>>0,a,l+s);else{var h=Math.floor(Math.log(o)/Math.LN2);h===1024&&(h=1023),d=o*Math.pow(2,-h),n(d*4503599627370496>>>0,a,l+r),n((c<<31|h+1023<<20|d*1048576&1048575)>>>0,a,l+s)}}}i.writeDoubleLE=e.bind(null,writeUintLE,0,4),i.writeDoubleBE=e.bind(null,writeUintBE,4,0);function t(n,r,s,o,a){var l=n(o,a+r),c=n(o,a+s),d=(c>>31)*2+1,h=c>>>20&2047,f=4294967296*(c&1048575)+l;return h===2047?f?NaN:d*(1/0):h===0?d*5e-324*f:d*Math.pow(2,h-1075)*(f+4503599627370496)}i.readDoubleLE=t.bind(null,readUintLE,0,4),i.readDoubleBE=t.bind(null,readUintBE,4,0)}(),i}function writeUintLE(i,e,t){e[t]=i&255,e[t+1]=i>>>8&255,e[t+2]=i>>>16&255,e[t+3]=i>>>24}function writeUintBE(i,e,t){e[t]=i>>>24,e[t+1]=i>>>16&255,e[t+2]=i>>>8&255,e[t+3]=i&255}function readUintLE(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16|i[e+3]<<24)>>>0}function readUintBE(i,e){return(i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(i){}return null}var utf8$3={};(function(i){var e=i;e.length=function(n){for(var r=0,s=0,o=0;o<n.length;++o)s=n.charCodeAt(o),s<128?r+=1:s<2048?r+=2:(s&64512)===55296&&(n.charCodeAt(o+1)&64512)===56320?(++o,r+=4):r+=3;return r},e.read=function(n,r,s){var o=s-r;if(o<1)return"";for(var a=null,l=[],c=0,d;r<s;)d=n[r++],d<128?l[c++]=d:d>191&&d<224?l[c++]=(d&31)<<6|n[r++]&63:d>239&&d<365?(d=((d&7)<<18|(n[r++]&63)<<12|(n[r++]&63)<<6|n[r++]&63)-65536,l[c++]=55296+(d>>10),l[c++]=56320+(d&1023)):l[c++]=(d&15)<<12|(n[r++]&63)<<6|n[r++]&63,c>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,l)),c=0);return a?(c&&a.push(String.fromCharCode.apply(String,l.slice(0,c))),a.join("")):String.fromCharCode.apply(String,l.slice(0,c))},e.write=function(n,r,s){for(var o=s,a,l,c=0;c<n.length;++c)a=n.charCodeAt(c),a<128?r[s++]=a:a<2048?(r[s++]=a>>6|192,r[s++]=a&63|128):(a&64512)===55296&&((l=n.charCodeAt(c+1))&64512)===56320?(a=65536+((a&1023)<<10)+(l&1023),++c,r[s++]=a>>18|240,r[s++]=a>>12&63|128,r[s++]=a>>6&63|128,r[s++]=a&63|128):(r[s++]=a>>12|224,r[s++]=a>>6&63|128,r[s++]=a&63|128);return s-o}})(utf8$3);var pool_1=pool;function pool(i,e,t){var n=t||8192,r=n>>>1,s=null,o=n;return function(l){if(l<1||l>r)return i(l);o+l>n&&(s=i(n),o=0);var c=e.call(s,o,o+=l);return o&7&&(o=(o|7)+1),c}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=e;var i=requireMinimal();function e(s,o){this.lo=s>>>0,this.hi=o>>>0}var t=e.zero=new e(0,0);t.toNumber=function(){return 0},t.zzEncode=t.zzDecode=function(){return this},t.length=function(){return 1};var n=e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(o){if(o===0)return t;var a=o<0;a&&(o=-o);var l=o>>>0,c=(o-l)/4294967296>>>0;return a&&(c=~c>>>0,l=~l>>>0,++l>4294967295&&(l=0,++c>4294967295&&(c=0))),new e(l,c)},e.from=function(o){if(typeof o=="number")return e.fromNumber(o);if(i.isString(o))if(i.Long)o=i.Long.fromString(o);else return e.fromNumber(parseInt(o,10));return o.low||o.high?new e(o.low>>>0,o.high>>>0):t},e.prototype.toNumber=function(o){if(!o&&this.hi>>>31){var a=~this.lo+1>>>0,l=~this.hi>>>0;return a||(l=l+1>>>0),-(a+l*4294967296)}return this.lo+this.hi*4294967296},e.prototype.toLong=function(o){return i.Long?new i.Long(this.lo|0,this.hi|0,!!o):{low:this.lo|0,high:this.hi|0,unsigned:!!o}};var r=String.prototype.charCodeAt;return e.fromHash=function(o){return o===n?t:new e((r.call(o,0)|r.call(o,1)<<8|r.call(o,2)<<16|r.call(o,3)<<24)>>>0,(r.call(o,4)|r.call(o,5)<<8|r.call(o,6)<<16|r.call(o,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var o=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^o)>>>0,this.lo=(this.lo<<1^o)>>>0,this},e.prototype.zzDecode=function(){var o=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^o)>>>0,this.hi=(this.hi>>>1^o)>>>0,this},e.prototype.length=function(){var o=this.lo,a=(this.lo>>>28|this.hi<<4)>>>0,l=this.hi>>>24;return l===0?a===0?o<16384?o<128?1:2:o<2097152?3:4:a<16384?a<128?5:6:a<2097152?7:8:l<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(i){var e=i;e.asPromise=aspromise,e.base64=base64$1,e.EventEmitter=eventemitter,e.float=float,e.inquire=inquire_1,e.utf8=utf8$3,e.pool=pool_1,e.LongBits=requireLongbits(),e.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s},e.isString=function(s){return typeof s=="string"||s instanceof String},e.isObject=function(s){return s&&typeof s=="object"},e.isset=e.isSet=function(s,o){var a=s[o];return a!=null&&s.hasOwnProperty(o)?typeof a!="object"||(Array.isArray(a)?a.length:Object.keys(a).length)>0:!1},e.Buffer=function(){try{var r=e.inquire("buffer").Buffer;return r.prototype.utf8Write?r:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(s){return typeof s=="number"?e.Buffer?e._Buffer_allocUnsafe(s):new e.Array(s):e.Buffer?e._Buffer_from(s):typeof Uint8Array>"u"?s:new Uint8Array(s)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(s){return s?e.LongBits.from(s).toHash():e.LongBits.zeroHash},e.longFromHash=function(s,o){var a=e.LongBits.fromHash(s);return e.Long?e.Long.fromBits(a.lo,a.hi,o):a.toNumber(!!o)};function t(r,s,o){for(var a=Object.keys(s),l=0;l<a.length;++l)(r[a[l]]===void 0||!o)&&(r[a[l]]=s[a[l]]);return r}e.merge=t,e.lcFirst=function(s){return s.charAt(0).toLowerCase()+s.substring(1)};function n(r){function s(o,a){if(!(this instanceof s))return new s(o,a);Object.defineProperty(this,"message",{get:function(){return o}}),Error.captureStackTrace?Error.captureStackTrace(this,s):Object.defineProperty(this,"stack",{value:new Error().stack||""}),a&&t(this,a)}return s.prototype=Object.create(Error.prototype,{constructor:{value:s,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return r},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),s}e.newError=n,e.ProtocolError=n("ProtocolError"),e.oneOfGetter=function(s){for(var o={},a=0;a<s.length;++a)o[s[a]]=1;return function(){for(var l=Object.keys(this),c=l.length-1;c>-1;--c)if(o[l[c]]===1&&this[l[c]]!==void 0&&this[l[c]]!==null)return l[c]}},e.oneOfSetter=function(s){return function(o){for(var a=0;a<s.length;++a)s[a]!==o&&delete this[s[a]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var r=e.Buffer;if(!r){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=r.from!==Uint8Array.from&&r.from||function(o,a){return new r(o,a)},e._Buffer_allocUnsafe=r.allocUnsafe||function(o){return new r(o)}}}(minimal$1)),minimal$1}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$2=util$4.utf8;function Op(i,e,t){this.fn=i,this.len=e,this.next=void 0,this.val=t}function noop(){}function State(i){this.head=i.head,this.tail=i.tail,this.len=i.len,this.next=i.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$6=function i(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$6();Writer$1.alloc=function i(e){return new util$4.Array(e)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function i(e,t,n){return this.tail=this.tail.next=new Op(e,t,n),this.len+=t,this};function writeByte(i,e,t){e[t]=i&255}function writeVarint32(i,e,t){for(;i>127;)e[t++]=i&127|128,i>>>=7;e[t]=i}function VarintOp(i,e){this.len=i,this.next=void 0,this.val=e}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function i(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Writer$1.prototype.int32=function i(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)};Writer$1.prototype.sint32=function i(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(i,e,t){for(;i.hi;)e[t++]=i.lo&127|128,i.lo=(i.lo>>>7|i.hi<<25)>>>0,i.hi>>>=7;for(;i.lo>127;)e[t++]=i.lo&127|128,i.lo=i.lo>>>7;e[t++]=i.lo}Writer$1.prototype.uint64=function i(e){var t=LongBits$1.from(e);return this._push(writeVarint64,t.length(),t)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function i(e){var t=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)};Writer$1.prototype.bool=function i(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(i,e,t){e[t]=i&255,e[t+1]=i>>>8&255,e[t+2]=i>>>16&255,e[t+3]=i>>>24}Writer$1.prototype.fixed32=function i(e){return this._push(writeFixed32,4,e>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function i(e){var t=LongBits$1.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function i(e){return this._push(util$4.float.writeFloatLE,4,e)};Writer$1.prototype.double=function i(e){return this._push(util$4.float.writeDoubleLE,8,e)};var writeBytes=util$4.Array.prototype.set?function i(e,t,n){t.set(e,n)}:function i(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};Writer$1.prototype.bytes=function i(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(util$4.isString(e)){var n=Writer$1.alloc(t=base64.length(e));base64.decode(e,n,0),e=n}return this.uint32(t)._push(writeBytes,t,e)};Writer$1.prototype.string=function i(e){var t=utf8$2.length(e);return t?this.uint32(t)._push(utf8$2.write,t,e):this._push(writeByte,1,0)};Writer$1.prototype.fork=function i(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function i(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function i(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this};Writer$1.prototype.finish=function i(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t};Writer$1._configure=function(i){BufferWriter$1=i,Writer$1.create=create$6(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}};BufferWriter.prototype.bytes=function i(e){util$3.isString(e)&&(e=util$3._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(BufferWriter.writeBytesBuffer,t,e),this};function writeStringBuffer(i,e,t){i.length<40?util$3.utf8.write(i,e,t):e.utf8Write?e.utf8Write(i,t):e.write(i,t)}BufferWriter.prototype.string=function i(e){var t=util$3.Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this};BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8$1=util$2.utf8;function indexOutOfRange(i,e){return RangeError("index out of range: "+i.pos+" + "+(e||1)+" > "+i.len)}function Reader$1(i){this.buf=i,this.pos=0,this.len=i.length}var create_array=typeof Uint8Array<"u"?function i(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function i(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create$5=function i(){return util$2.Buffer?function(t){return(Reader$1.create=function(r){return util$2.Buffer.isBuffer(r)?new BufferReader$1(r):create_array(r)})(t)}:create_array};Reader$1.create=create$5();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function i(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}}();Reader$1.prototype.int32=function i(){return this.uint32()|0};Reader$1.prototype.sint32=function i(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var i=new LongBits(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(i.lo=(i.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return i;if(i.lo=(i.lo|(this.buf[this.pos]&127)<<28)>>>0,i.hi=(i.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return i;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(i.lo=(i.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return i}return i.lo=(i.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,i}if(this.len-this.pos>4){for(;e<5;++e)if(i.hi=(i.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return i}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(i.hi=(i.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return i}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function i(){return this.uint32()!==0};function readFixed32_end(i,e){return(i[e-4]|i[e-3]<<8|i[e-2]<<16|i[e-1]<<24)>>>0}Reader$1.prototype.fixed32=function i(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function i(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function i(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Reader$1.prototype.double=function i(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Reader$1.prototype.bytes=function i(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw indexOutOfRange(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(t,n);if(t===n){var r=util$2.Buffer;return r?r.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,n)};Reader$1.prototype.string=function i(){var e=this.bytes();return utf8$1.read(e,0,e.length)};Reader$1.prototype.skip=function i(e){if(typeof e=="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(i){switch(i){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(i=this.uint32()&7)!==4;)this.skipType(i);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+i+" at offset "+this.pos)}return this};Reader$1._configure=function(i){BufferReader$1=i,Reader$1.create=create$5(),BufferReader$1._configure();var e=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(i){Reader.call(this,i)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function i(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure();var rpc={},service=Service,util=requireMinimal();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(i,e,t){if(typeof i!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=i,this.requestDelimited=!!e,this.responseDelimited=!!t}Service.prototype.rpcCall=function i(e,t,n,r,s){if(!r)throw TypeError("request must be specified");var o=this;if(!s)return util.asPromise(i,o,e,t,n,r);if(!o.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return o.rpcImpl(e,t[o.requestDelimited?"encodeDelimited":"encode"](r).finish(),function(l,c){if(l)return o.emit("error",l,e),s(l);if(c===null){o.end(!0);return}if(!(c instanceof n))try{c=n[o.responseDelimited?"decodeDelimited":"decode"](c)}catch(d){return o.emit("error",d,e),s(d)}return o.emit("data",c,e),s(null,c)})}catch(a){o.emit("error",a,e),setTimeout(function(){s(a)},0);return}};Service.prototype.end=function i(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(i){var e=i;e.Service=service})(rpc);var roots={};(function(i){var e=i;e.build="minimal",e.Writer=writer,e.BufferWriter=writer_buffer,e.Reader=reader,e.BufferReader=reader_buffer,e.util=requireMinimal(),e.rpc=rpc,e.roots=roots,e.configure=t;function t(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}t()})(indexMinimal);var minimal=indexMinimal;const $protobuf=getDefaultExportFromCjs(minimal),$Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util,$root=$protobuf.roots.unixfs||($protobuf.roots.unixfs={}),Data=$root.Data=(()=>{function i(e){if(this.blocksizes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return i.prototype.Type=0,i.prototype.Data=$util.newBuffer([]),i.prototype.filesize=$util.Long?$util.Long.fromBits(0,0,!0):0,i.prototype.blocksizes=$util.emptyArray,i.prototype.hashType=$util.Long?$util.Long.fromBits(0,0,!0):0,i.prototype.fanout=$util.Long?$util.Long.fromBits(0,0,!0):0,i.prototype.mode=0,i.prototype.mtime=null,i.encode=function(t,n){if(n||(n=$Writer.create()),n.uint32(8).int32(t.Type),t.Data!=null&&Object.hasOwnProperty.call(t,"Data")&&n.uint32(18).bytes(t.Data),t.filesize!=null&&Object.hasOwnProperty.call(t,"filesize")&&n.uint32(24).uint64(t.filesize),t.blocksizes!=null&&t.blocksizes.length)for(var r=0;r<t.blocksizes.length;++r)n.uint32(32).uint64(t.blocksizes[r]);return t.hashType!=null&&Object.hasOwnProperty.call(t,"hashType")&&n.uint32(40).uint64(t.hashType),t.fanout!=null&&Object.hasOwnProperty.call(t,"fanout")&&n.uint32(48).uint64(t.fanout),t.mode!=null&&Object.hasOwnProperty.call(t,"mode")&&n.uint32(56).uint32(t.mode),t.mtime!=null&&Object.hasOwnProperty.call(t,"mtime")&&$root.UnixTime.encode(t.mtime,n.uint32(66).fork()).ldelim(),n},i.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));for(var r=n===void 0?t.len:t.pos+n,s=new $root.Data;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:s.Type=t.int32();break;case 2:s.Data=t.bytes();break;case 3:s.filesize=t.uint64();break;case 4:if(s.blocksizes&&s.blocksizes.length||(s.blocksizes=[]),(o&7)===2)for(var a=t.uint32()+t.pos;t.pos<a;)s.blocksizes.push(t.uint64());else s.blocksizes.push(t.uint64());break;case 5:s.hashType=t.uint64();break;case 6:s.fanout=t.uint64();break;case 7:s.mode=t.uint32();break;case 8:s.mtime=$root.UnixTime.decode(t,t.uint32());break;default:t.skipType(o&7);break}}if(!s.hasOwnProperty("Type"))throw $util.ProtocolError("missing required 'Type'",{instance:s});return s},i.fromObject=function(t){if(t instanceof $root.Data)return t;var n=new $root.Data;switch(t.Type){case"Raw":case 0:n.Type=0;break;case"Directory":case 1:n.Type=1;break;case"File":case 2:n.Type=2;break;case"Metadata":case 3:n.Type=3;break;case"Symlink":case 4:n.Type=4;break;case"HAMTShard":case 5:n.Type=5;break}if(t.Data!=null&&(typeof t.Data=="string"?$util.base64.decode(t.Data,n.Data=$util.newBuffer($util.base64.length(t.Data)),0):t.Data.length&&(n.Data=t.Data)),t.filesize!=null&&($util.Long?(n.filesize=$util.Long.fromValue(t.filesize)).unsigned=!0:typeof t.filesize=="string"?n.filesize=parseInt(t.filesize,10):typeof t.filesize=="number"?n.filesize=t.filesize:typeof t.filesize=="object"&&(n.filesize=new $util.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0))),t.blocksizes){if(!Array.isArray(t.blocksizes))throw TypeError(".Data.blocksizes: array expected");n.blocksizes=[];for(var r=0;r<t.blocksizes.length;++r)$util.Long?(n.blocksizes[r]=$util.Long.fromValue(t.blocksizes[r])).unsigned=!0:typeof t.blocksizes[r]=="string"?n.blocksizes[r]=parseInt(t.blocksizes[r],10):typeof t.blocksizes[r]=="number"?n.blocksizes[r]=t.blocksizes[r]:typeof t.blocksizes[r]=="object"&&(n.blocksizes[r]=new $util.LongBits(t.blocksizes[r].low>>>0,t.blocksizes[r].high>>>0).toNumber(!0))}if(t.hashType!=null&&($util.Long?(n.hashType=$util.Long.fromValue(t.hashType)).unsigned=!0:typeof t.hashType=="string"?n.hashType=parseInt(t.hashType,10):typeof t.hashType=="number"?n.hashType=t.hashType:typeof t.hashType=="object"&&(n.hashType=new $util.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0))),t.fanout!=null&&($util.Long?(n.fanout=$util.Long.fromValue(t.fanout)).unsigned=!0:typeof t.fanout=="string"?n.fanout=parseInt(t.fanout,10):typeof t.fanout=="number"?n.fanout=t.fanout:typeof t.fanout=="object"&&(n.fanout=new $util.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0))),t.mode!=null&&(n.mode=t.mode>>>0),t.mtime!=null){if(typeof t.mtime!="object")throw TypeError(".Data.mtime: object expected");n.mtime=$root.UnixTime.fromObject(t.mtime)}return n},i.toObject=function(t,n){n||(n={});var r={};if((n.arrays||n.defaults)&&(r.blocksizes=[]),n.defaults){if(r.Type=n.enums===String?"Raw":0,n.bytes===String?r.Data="":(r.Data=[],n.bytes!==Array&&(r.Data=$util.newBuffer(r.Data))),$util.Long){var s=new $util.Long(0,0,!0);r.filesize=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else r.filesize=n.longs===String?"0":0;if($util.Long){var s=new $util.Long(0,0,!0);r.hashType=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else r.hashType=n.longs===String?"0":0;if($util.Long){var s=new $util.Long(0,0,!0);r.fanout=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else r.fanout=n.longs===String?"0":0;r.mode=0,r.mtime=null}if(t.Type!=null&&t.hasOwnProperty("Type")&&(r.Type=n.enums===String?$root.Data.DataType[t.Type]:t.Type),t.Data!=null&&t.hasOwnProperty("Data")&&(r.Data=n.bytes===String?$util.base64.encode(t.Data,0,t.Data.length):n.bytes===Array?Array.prototype.slice.call(t.Data):t.Data),t.filesize!=null&&t.hasOwnProperty("filesize")&&(typeof t.filesize=="number"?r.filesize=n.longs===String?String(t.filesize):t.filesize:r.filesize=n.longs===String?$util.Long.prototype.toString.call(t.filesize):n.longs===Number?new $util.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(!0):t.filesize),t.blocksizes&&t.blocksizes.length){r.blocksizes=[];for(var o=0;o<t.blocksizes.length;++o)typeof t.blocksizes[o]=="number"?r.blocksizes[o]=n.longs===String?String(t.blocksizes[o]):t.blocksizes[o]:r.blocksizes[o]=n.longs===String?$util.Long.prototype.toString.call(t.blocksizes[o]):n.longs===Number?new $util.LongBits(t.blocksizes[o].low>>>0,t.blocksizes[o].high>>>0).toNumber(!0):t.blocksizes[o]}return t.hashType!=null&&t.hasOwnProperty("hashType")&&(typeof t.hashType=="number"?r.hashType=n.longs===String?String(t.hashType):t.hashType:r.hashType=n.longs===String?$util.Long.prototype.toString.call(t.hashType):n.longs===Number?new $util.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(!0):t.hashType),t.fanout!=null&&t.hasOwnProperty("fanout")&&(typeof t.fanout=="number"?r.fanout=n.longs===String?String(t.fanout):t.fanout:r.fanout=n.longs===String?$util.Long.prototype.toString.call(t.fanout):n.longs===Number?new $util.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(!0):t.fanout),t.mode!=null&&t.hasOwnProperty("mode")&&(r.mode=t.mode),t.mtime!=null&&t.hasOwnProperty("mtime")&&(r.mtime=$root.UnixTime.toObject(t.mtime,n)),r},i.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},i.DataType=function(){const e={},t=Object.create(e);return t[e[0]="Raw"]=0,t[e[1]="Directory"]=1,t[e[2]="File"]=2,t[e[3]="Metadata"]=3,t[e[4]="Symlink"]=4,t[e[5]="HAMTShard"]=5,t}(),i})();$root.UnixTime=(()=>{function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return i.prototype.Seconds=$util.Long?$util.Long.fromBits(0,0,!1):0,i.prototype.FractionalNanoseconds=0,i.encode=function(t,n){return n||(n=$Writer.create()),n.uint32(8).int64(t.Seconds),t.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(t,"FractionalNanoseconds")&&n.uint32(21).fixed32(t.FractionalNanoseconds),n},i.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));for(var r=n===void 0?t.len:t.pos+n,s=new $root.UnixTime;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:s.Seconds=t.int64();break;case 2:s.FractionalNanoseconds=t.fixed32();break;default:t.skipType(o&7);break}}if(!s.hasOwnProperty("Seconds"))throw $util.ProtocolError("missing required 'Seconds'",{instance:s});return s},i.fromObject=function(t){if(t instanceof $root.UnixTime)return t;var n=new $root.UnixTime;return t.Seconds!=null&&($util.Long?(n.Seconds=$util.Long.fromValue(t.Seconds)).unsigned=!1:typeof t.Seconds=="string"?n.Seconds=parseInt(t.Seconds,10):typeof t.Seconds=="number"?n.Seconds=t.Seconds:typeof t.Seconds=="object"&&(n.Seconds=new $util.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber())),t.FractionalNanoseconds!=null&&(n.FractionalNanoseconds=t.FractionalNanoseconds>>>0),n},i.toObject=function(t,n){n||(n={});var r={};if(n.defaults){if($util.Long){var s=new $util.Long(0,0,!1);r.Seconds=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else r.Seconds=n.longs===String?"0":0;r.FractionalNanoseconds=0}return t.Seconds!=null&&t.hasOwnProperty("Seconds")&&(typeof t.Seconds=="number"?r.Seconds=n.longs===String?String(t.Seconds):t.Seconds:r.Seconds=n.longs===String?$util.Long.prototype.toString.call(t.Seconds):n.longs===Number?new $util.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber():t.Seconds),t.FractionalNanoseconds!=null&&t.hasOwnProperty("FractionalNanoseconds")&&(r.FractionalNanoseconds=t.FractionalNanoseconds),r},i.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},i})();$root.Metadata=(()=>{function i(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return i.prototype.MimeType="",i.encode=function(t,n){return n||(n=$Writer.create()),t.MimeType!=null&&Object.hasOwnProperty.call(t,"MimeType")&&n.uint32(10).string(t.MimeType),n},i.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));for(var r=n===void 0?t.len:t.pos+n,s=new $root.Metadata;t.pos<r;){var o=t.uint32();switch(o>>>3){case 1:s.MimeType=t.string();break;default:t.skipType(o&7);break}}return s},i.fromObject=function(t){if(t instanceof $root.Metadata)return t;var n=new $root.Metadata;return t.MimeType!=null&&(n.MimeType=String(t.MimeType)),n},i.toObject=function(t,n){n||(n={});var r={};return n.defaults&&(r.MimeType=""),t.MimeType!=null&&t.hasOwnProperty("MimeType")&&(r.MimeType=t.MimeType),r},i.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},i})();const NodeType=Data.DataType,EMPTY$3=Object.freeze([]),EMPTY_BUFFER$1=new Uint8Array(0),BLANK$2=Object.freeze({}),DEFAULT_FILE_MODE=parseInt("0644",8),DEFAULT_DIRECTORY_MODE=parseInt("0755",8),code$1=code$2,name$3="UnixFS",encodePB=(i,e)=>(Object(globalThis).debug&&console.log({data:i,links:e}),encode$2(prepare({Data:Data.encode(i).finish(),Links:e}))),createRaw=i=>({type:NodeType.Raw,content:i}),createEmptyFile=i=>createSimpleFile(EMPTY_BUFFER$1,i),createSimpleFile=(i,e)=>({type:NodeType.File,layout:"simple",content:i,metadata:decodeMetadata(e)}),createFileChunk=i=>({type:NodeType.File,layout:"simple",content:i}),createAdvancedFile=(i,e)=>({type:NodeType.File,layout:"advanced",parts:i,metadata:decodeMetadata(e)}),createFileShard=i=>({type:NodeType.File,layout:"advanced",parts:i}),createComplexFile=(i,e,t)=>({type:NodeType.File,layout:"complex",content:i,parts:e,metadata:decodeMetadata(t)}),createFlatDirectory=(i,e)=>({type:NodeType.Directory,metadata:decodeMetadata(e),entries:i}),createShardedDirectory=(i,e,t,n,r=BLANK$2)=>({type:NodeType.HAMTShard,bitfield:e,fanout:readFanout(t),hashType:readInt(n),entries:i,metadata:decodeMetadata(r)}),createDirectoryShard=(i,e,t,n)=>({type:NodeType.HAMTShard,bitfield:e,fanout:readFanout(t),hashType:readInt(n),entries:i}),encodeRaw=i=>encodePB({Type:NodeType.Raw,Data:i.byteLength>0?i:void 0,filesize:i.byteLength,blocksizes:EMPTY$3},[]),encodeFile=(i,e=!1)=>{const t=e?BLANK$2:Object(i).metadata;switch(i.layout){case"simple":return encodeSimpleFile(i.content,t);case"advanced":return encodeAdvancedFile(i.parts,t);case"complex":return encodeComplexFile(i.content,i.parts,t);default:throw new TypeError(`File with unknown layout "${Object(i).layout}" was passed`)}},encodeFileChunk=i=>encodeSimpleFile(i,BLANK$2),encodeFileShard=i=>encodePB({Type:NodeType.File,blocksizes:i.map(contentByteLength),filesize:cumulativeContentByteLength(i)},i.map(encodeLink)),encodeAdvancedFile=(i,e=BLANK$2)=>encodePB({Type:NodeType.File,blocksizes:i.map(contentByteLength),filesize:cumulativeContentByteLength(i),...encodeMetadata(e)},i.map(encodeLink)),encodeLink=i=>({Name:"",Tsize:i.dagByteLength,Hash:i.cid}),encodeSimpleFile=(i,e=BLANK$2)=>encodePB({Type:NodeType.File,Data:i.byteLength>0?i:void 0,filesize:i.byteLength,blocksizes:[],...encodeMetadata(e)},[]),encodeComplexFile=(i,e,t=BLANK$2)=>encodePB({Type:NodeType.File,Data:i,filesize:i.byteLength+cumulativeContentByteLength(e),blocksizes:e.map(contentByteLength)},e.map(encodeLink)),encodeDirectory=i=>encodePB({Type:i.type,...encodeDirectoryMetadata(i.metadata||BLANK$2)},i.entries.map(encodeNamedLink)),encodeHAMTShard=({bitfield:i,fanout:e,hashType:t,entries:n,metadata:r=BLANK$2})=>encodePB({Type:NodeType.HAMTShard,Data:i.byteLength>0?i:void 0,fanout:readFanout(e),hashType:readInt(t),...encodeDirectoryMetadata(r)},n.map(encodeNamedLink)),readFanout=i=>{if(Math.log2(i)%1===0)return i;throw new TypeError(`Expected hamt size to be a power of two instead got ${i}`)},readInt=i=>{if(Number.isInteger(i))return i;throw new TypeError(`Expected an integer value instead got ${i}`)},createSymlink=(i,e=BLANK$2)=>({type:NodeType.Symlink,content:i,metadata:decodeMetadata(e)}),encodeSymlink=(i,e=!1)=>{const t=e?BLANK$2:Object(i).metadata;return encodePB({Type:NodeType.Symlink,Data:i.content,...encodeMetadata(t||BLANK$2)},[])},encode$1=(i,e=!0)=>{switch(i.type){case NodeType.Raw:return encodeRaw(i.content);case NodeType.File:return encodeFile(i);case NodeType.Directory:return encodeDirectory(i);case NodeType.HAMTShard:return encodeHAMTShard(i);case NodeType.Symlink:return encodeSymlink(i);default:throw new Error(`Unknown node type ${Object(i).type}`)}},decode$1=i=>{const e=decode$2(i),t=Data.decode(e.Data),{Type:n,Data:r,mtime:s,mode:o,blocksizes:a,...l}=Data.toObject(t,{defaults:!1,arrays:!0,longs:Number,objects:!1}),c={...o&&{mode:o},...decodeMtime(s)},d=e.Links;switch(t.Type){case NodeType.Raw:return createRaw(r);case NodeType.File:return d.length===0?new SimpleFileView(r,c):r.byteLength===0?new AdvancedFileView(decodeFileLinks(l.blocksizes,d),c):new ComplexFileView(r,decodeFileLinks(l.blocksizes,d),c);case NodeType.Directory:return createFlatDirectory(decodeDirectoryLinks(d),c);case NodeType.HAMTShard:return createShardedDirectory(decodeDirectoryLinks(d),r||EMPTY_BUFFER$1,l.fanout,l.hashType,c);case NodeType.Symlink:return createSymlink(r,c);default:throw new TypeError(`Unsupported node type ${t.Type}`)}},decodeMtime=i=>i==null?void 0:{mtime:{secs:i.Seconds,nsecs:i.FractionalNanoseconds||0}},decodeFileLinks=(i,e)=>{const t=[],n=i.length;let r=0;for(;r<n;)t.push({cid:e[r].Hash,dagByteLength:e[r].Tsize||0,contentByteLength:i[r]});return t},decodeDirectoryLinks=i=>i.map(e=>({cid:e.Hash,name:e.Name||"",dagByteLength:e.Tsize||0})),cumulativeContentByteLength=i=>i.reduce((e,t)=>e+t.contentByteLength,0),cumulativeDagByteLength=(i,e)=>e.reduce((t,n)=>t+n.dagByteLength,i.byteLength),contentByteLength=i=>i.contentByteLength,encodeNamedLink=({name:i,dagByteLength:e,cid:t})=>({Name:i,Tsize:e,Hash:t}),encodeDirectoryMetadata=i=>encodeMetadata(i,DEFAULT_DIRECTORY_MODE),encodeMetadata=({mode:i,mtime:e},t=DEFAULT_FILE_MODE)=>({mode:i!=null?encodeMode(i,t):void 0,mtime:e!=null?encodeMTime(e):void 0}),decodeMetadata=i=>i==null?BLANK$2:{...i.mode==null?void 0:{mode:decodeMode(i.mode)},...i.mtime==null?void 0:{mtime:i.mtime}},encodeMTime=i=>i==null?void 0:i.nsecs!==0?{Seconds:i.secs,FractionalNanoseconds:i.nsecs}:{Seconds:i.secs},encodeMode=(i,e)=>{const t=i==null?void 0:decodeMode(i);return t===e||t==null?void 0:t},decodeMode=i=>i&4095|i&4294963200,matchFile=({content:i=EMPTY_BUFFER$1,parts:e=EMPTY$3,metadata:t=BLANK$2,...n})=>e.length===0?new SimpleFileView(i,t):i.byteLength===0?new AdvancedFileView(e,t):new ComplexFileView(i,e,t);class SimpleFileView{constructor(e,t){this.content=e,this.metadata=t,this.layout="simple",this.type=NodeType.File}get filesize(){return this.content.byteLength}encode(){return encodeSimpleFile(this.content,this.metadata)}}class AdvancedFileView{constructor(e,t){this.parts=e,this.metadata=t}get layout(){return"advanced"}get type(){return NodeType.File}get fileSize(){return cumulativeContentByteLength(this.parts)}get blockSizes(){return this.parts.map(contentByteLength)}encode(){return encodeAdvancedFile(this.parts,this.metadata)}}class ComplexFileView{constructor(e,t,n){this.content=e,this.parts=t,this.metadata=n}get layout(){return"complex"}get type(){return NodeType.File}get fileSize(){return this.content.byteLength+cumulativeContentByteLength(this.parts)}get blockSizes(){return this.parts.map(contentByteLength)}encode(){return encodeComplexFile(this.content,this.parts,this.metadata)}}const filesize=i=>{switch(i.type){case NodeType.Raw:case NodeType.Symlink:return i.content.byteLength;case NodeType.File:switch(i.layout){case"simple":return i.content.byteLength;case"advanced":return cumulativeContentByteLength(i.parts);case"complex":return i.content.byteLength+cumulativeContentByteLength(i.parts)}default:return 0}},UnixFS=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_DIRECTORY_MODE,DEFAULT_FILE_MODE,NodeType,code:code$1,createAdvancedFile,createComplexFile,createDirectoryShard,createEmptyFile,createFileChunk,createFileShard,createFlatDirectory,createRaw,createShardedDirectory,createSimpleFile,createSymlink,cumulativeContentByteLength,cumulativeDagByteLength,decode:decode$1,decodeMetadata,encode:encode$1,encodeAdvancedFile,encodeComplexFile,encodeDirectory,encodeDirectoryMetadata,encodeFile,encodeFileChunk,encodeFileShard,encodeHAMTShard,encodeLink,encodeMetadata,encodeMode,encodeRaw,encodeSimpleFile,encodeSymlink,filesize,matchFile,name:name$3},Symbol.toStringTag,{value:"Module"})),effect=function*(i){const e=yield*i;yield*send(e)};function*current(){return yield CURRENT}const suspend=function*(){yield SUSPEND},wait$1=function*(i){const e=yield*current();if(isAsync(i)){let t=!1,n;if(i.then(r=>{t=!1,n=r,enqueue(e)},r=>{t=!0,n=r,enqueue(e)}),yield*suspend(),t)throw n;return n}else return main(wake(e)),yield*suspend(),i};function*wake(i){enqueue(i)}const isAsync=i=>i!=null&&typeof i.then=="function",send=function*(i){yield i},listen=function*(i){const e=[];for(const t of Object.entries(i)){const[n,r]=t;r!==NONE&&e.push(yield*fork$1(tag(r,n)))}yield*group(e)},effects=i=>i.length>0?batch(i.map(effect)):NONE;function*batch(i){const e=[];for(const t of i)e.push(yield*fork$1(t));yield*group(e)}const tag=(i,e)=>i===NONE?NONE:i instanceof Tagger?new Tagger([...i.tags,e],i.source):new Tagger([e],i);class Tagger{constructor(e,t){this.tags=e,this.source=t,this.controller}[Symbol.iterator](){return this.controller||(this.controller=this.source[Symbol.iterator]()),this}box(e){if(e.done)return e;switch(e.value){case SUSPEND:case CURRENT:return e;default:{const t=e;let{value:n}=t;for(const r of this.tags)n=withTag(r,n);return t.value=n,t}}}next(e){return this.box(this.controller.next(e))}throw(e){return this.box(this.controller.throw(e))}return(e){return this.box(this.controller.return(e))}get[Symbol.toStringTag](){return"TaggedEffect"}}const none$1=()=>NONE,withTag=(i,e)=>({type:i,[i]:e}),CURRENT=Symbol("current"),SUSPEND=Symbol("suspend");class Group{static of(e){return e.group||MAIN}static enqueue(e,t){e.group=t,t.stack.active.push(e)}constructor(e,t=[],n=new Set,r=new Stack(t,n)){this.driver=e,this.parent=Group.of(e),this.stack=r,this.id=++ID}}class Main{constructor(){this.status=IDLE,this.stack=new Stack,this.id=0}}class Stack{constructor(e=[],t=new Set){this.active=e,this.idle=t}static size({active:e,idle:t}){return e.length+t.size}}const main=i=>enqueue(i[Symbol.iterator]()),enqueue=i=>{let e=Group.of(i);for(e.stack.active.push(i),e.stack.idle.delete(i);e.parent;){const{idle:t,active:n}=e.parent.stack;if(t.has(e.driver))t.delete(e.driver),n.push(e.driver);else break;e=e.parent}if(MAIN.status===IDLE)for(MAIN.status=ACTIVE;;)try{for(const t of step(MAIN));MAIN.status=IDLE;break}catch{MAIN.stack.active.shift()}},resume=i=>enqueue(i),step=function*(i){const{active:e}=i.stack;let t=e[0];for(i.stack.idle.delete(t);t;){let n=INIT;e:for(;!n.done&&t===e[0];){const r=n.value;switch(r){case SUSPEND:i.stack.idle.add(t);break e;case CURRENT:n=t.next(t);break;default:n=t.next(yield r);break}}e.shift(),t=e[0],i.stack.idle.delete(t)}},fork$1=(i,e)=>new Fork(i,e),exit=(i,e)=>conclude(i,{ok:!0,value:e}),abort=(i,e)=>conclude(i,{ok:!1,error:e});function*conclude(i,e){try{const t=i,n=e.ok?t.return(e.value):t.throw(e.error);if(!n.done)if(n.value===SUSPEND){const{idle:r}=Group.of(t).stack;r.add(t)}else enqueue(t)}catch{}}function*group(i){if(i.length===0)return;const e=yield*current(),t=new Group(e);let n=null;for(const r of i){const{result:s}=r;if(s){!s.ok&&!n&&(n=s);continue}move(r,t)}try{if(n)throw n.error;for(;yield*step(t),Stack.size(t.stack)>0;)yield*suspend()}catch(r){for(const s of t.stack.active)yield*abort(s,r);for(const s of t.stack.idle)yield*abort(s,r),enqueue(s);throw r}}const move=(i,e)=>{const t=Group.of(i);if(t!==e){const{active:n,idle:r}=t.stack,s=e.stack;if(i.group=e,r.has(i))r.delete(i),s.idle.add(i);else{const o=n.indexOf(i);o>=0&&(n.splice(o,1),s.active.push(i))}}};function*join(i){i.status===IDLE&&(yield*i),i.result||(yield*group([i]));const e=i.result;if(e.ok)return e.value;throw e.error}class Future{constructor(e){this.handler=e,this.result}get promise(){const{result:e}=this,t=e==null?new Promise((n,r)=>{this.handler.onsuccess=n,this.handler.onfailure=r}):e.ok?Promise.resolve(e.value):Promise.reject(e.error);return Object.defineProperty(this,"promise",{value:t}),t}then(e,t){return this.activate().promise.then(e,t)}catch(e){return this.activate().promise.catch(e)}finally(e){return this.activate().promise.finally(e)}activate(){return this}}class Fork extends Future{constructor(e,t=BLANK$1,n={},r=INIT){super(n),this.id=++ID,this.name=t.name||"",this.task=e,this.state=r,this.status=IDLE,this.result,this.handler=n,this.controller}*resume(){resume(this)}join(){return join(this)}abort(e){return abort(this,e)}exit(e){return exit(this,e)}get[Symbol.toStringTag](){return"Fork"}*[Symbol.iterator](){return this.activate()}activate(){return this.controller=this.task[Symbol.iterator](),this.status=ACTIVE,enqueue(this),this}panic(e){this.result={ok:!1,error:e},this.status=FINISHED;const{handler:t}=this;throw t.onfailure&&t.onfailure(e),e}step(e){if(this.state=e,e.done){this.result={ok:!0,value:e.value},this.status=FINISHED;const{handler:t}=this;t.onsuccess&&t.onsuccess(e.value)}return e}next(e){try{return this.step(this.controller.next(e))}catch(t){return this.panic(t)}}return(e){try{return this.step(this.controller.return(e))}catch(t){return this.panic(t)}}throw(e){try{return this.step(this.controller.throw(e))}catch(t){return this.panic(t)}}}const loop=function*(i,e){const t=yield*current(),n=new Group(t);for(Group.enqueue(i[Symbol.iterator](),n);;){for(const r of step(n))Group.enqueue(e(r)[Symbol.iterator](),n);if(Stack.size(n.stack)>0)yield*suspend();else break}};let ID=0;const IDLE="idle",ACTIVE="active",FINISHED="finished",INIT={done:!1,value:CURRENT},BLANK$1={},NONE=function*i(){}(),MAIN=new Main;function Indexed(){}Object.defineProperties(Indexed,{prototype:{value:new Proxy(Object.prototype,{get(i,e,t){return typeof e=="symbol"?Reflect.get(i,e,t):t.get(e)}})}});const empty=()=>new BufferView,slice=(i,e=0,t=i.byteLength)=>{const n=[],r=e<0?i.byteLength-e:e,s=t<0?i.byteLength-t:t;if(r===0&&s>=i.byteLength)return i;if(r>s||r>i.byteLength||s<=0)return empty();let o=0,a=0;for(const l of i.segments){const c=a+l.byteLength;if(o===0){if(s<=c){const d=l.subarray(r-a,s-a);n.push(d),o=d.byteLength;break}else if(r<c){const d=r===a?l:l.subarray(r-a);n.push(d),o=d.byteLength}}else if(s<=c){const d=s===c?l:l.subarray(0,s-a);n.push(d),o+=d.byteLength;break}else n.push(l),o+=l.byteLength;a=c}return new BufferView(n,i.byteOffset+r,o)},push=(i,e)=>e.byteLength>0?(i.segments.push(e),new BufferView(i.segments,i.byteOffset,i.byteLength+e.byteLength)):i,get=(i,e)=>{if(e<i.byteLength){let t=0;for(const n of i.segments){if(e<t+n.byteLength)return n[e-t];t+=n.byteLength}}},copyTo=(i,e,t)=>{let n=t;for(const r of i.segments)e.set(r,n),n+=r.byteLength;return e};function*iterate(i){for(const e of i.segments)yield*e}class BufferView extends Indexed{constructor(e=[],t=0,n=0){super(),this.segments=e,this.byteLength=n,this.length=n,this.byteOffset=t}[Symbol.iterator](){return iterate(this)}slice(e,t){return slice(this,e,t)}subarray(e,t){return slice(this,e,t)}push(e){return push(this,e)}get(e){return get(this,e)}copyTo(e,t){return copyTo(this,e,t)}}const panic=i=>{throw new Error(i)},unreachable=(i,e,...t)=>panic(String.raw(i,JSON.stringify(e),...t)),EMPTY_BUFFER=new Uint8Array(0),EMPTY$2=[],open$1=i=>({config:i,buffer:empty()}),write$3=(i,e)=>e.byteLength>0?split(i.config,i.buffer.push(e),!1):{...i,chunks:EMPTY$2},close$5=i=>split(i.config,i.buffer,!0),split=(i,e,t)=>{const n=i.chunker,r=[];let s=0;for(const o of n.cut(n.context,e,t))if(o>0){const a=e.subarray(s,s+o);r.push(a),s+=o}return{config:i,chunks:r,buffer:e.subarray(s)}},mutable=()=>({mutable:!0,needs:{},nodes:{},links:{},linked:EMPTY$1}),addNodes=(i,e)=>{let t=patch(e,{});for(const n of i){const{ready:r,has:s,wants:o}=collect(n.children,t.links);o.length===0?t=patch(t,{links:assign(void 0,s),linked:[{id:n.id,links:r}]}):t=patch(t,{needs:assign(n.id,o),nodes:{[n.id]:{children:n.children,count:o.length}}})}return t},addLink=(i,e,t)=>{const n=t.needs[i],r=t.nodes[n];if(r!=null)if(r.count===1){const{ready:s,has:o}=collect(r.children,{...t.links,[i]:e});return patch(t,{needs:{[i]:void 0},links:assign(void 0,o),nodes:{[n]:void 0},linked:[{id:n,links:s}]})}else return patch(t,{needs:{[i]:void 0},links:{[i]:e},nodes:{[n]:{...r,count:r.count-1}}});else return patch(t,{links:{[i]:e}})},patch=(i,{needs:e,nodes:t,links:n,linked:r})=>{const s=i.mutable?i:{...i},o=i.mutable?BLANK:void 0;return e&&(s.needs=patchDict(i.needs,e,o)),t&&(s.nodes=patchDict(i.nodes,t,o)),n&&(s.links=patchDict(i.links,n,o)),s.linked=r?append(i.linked||EMPTY$1,r,EMPTY$1):i.linked||[],s},assign=(i,e)=>{const t={};for(const n of e)t[n]=i;return t},patchDict=(i,e,t=i)=>{const n=i===t?{...i}:i;for(const r of Object.entries(e)){const[s,o]=r;o==null?delete n[s]:n[s]=o}return n},append=(i,e,t=i)=>{if(i===t)return[...i,...e];for(const n of e)i.push(n);return i},collect=(i,e)=>{const t=[],n=[],r=[];for(const s of i){const o=e[s];o?(t.push(s),r.push(o)):n.push(s)}return{has:t,wants:n,ready:r}},EMPTY$1=Object.freeze([]),BLANK=Object.freeze({}),update=(i,e)=>{switch(i.type){case"write":return write$2(e,i.bytes);case"link":return link(e,i.link);case"block":return{state:e,effect:none$1()};case"close":return close$4(e);case"end":return{state:e,effect:none$1()};default:return unreachable`File Writer got unknown message ${i}`}},init$1=(i,e,t)=>({status:"open",metadata:e,config:t,writer:i,chunker:open$1({chunker:t.chunker}),layout:t.fileLayout.open(),nodeQueue:mutable()}),write$2=(i,e)=>{if(i.status==="open"){const{chunks:t,...n}=write$3(i.chunker,e),{nodes:r,leaves:s,layout:o}=i.config.fileLayout.write(i.layout,t),{linked:a,...l}=addNodes(r,i.nodeQueue),c=[...encodeLeaves(s,i.config),...encodeBranches(a,i.config)];return{state:{...i,chunker:n,layout:o,nodeQueue:l},effect:listen({link:effects(c)})}}else return panic("Unable to perform write on closed file")},link=(i,{id:e,link:t,block:n})=>{let{linked:r,...s}=addLink(e,t,i.nodeQueue);const o=encodeBranches(r,i.config),a=i.status==="closed"&&e===i.rootID?{...i,status:"linked",link:t,nodeQueue:s}:{...i,nodeQueue:s},l=i.status==="closed"&&e===i.rootID&&i.end?i.end.resume():none$1();return{state:a,effect:listen({link:effects(o),block:writeBlock(i.writer,n),end:l})}},close$4=i=>{if(i.status==="open"){const{chunks:e}=close$5(i.chunker),{layout:t,...n}=i.config.fileLayout.write(i.layout,e),{root:r,...s}=i.config.fileLayout.close(t,i.metadata),[o,a]=isLeafNode(r)?[[...n.nodes,...s.nodes],[...n.leaves,...s.leaves,r]]:[[...n.nodes,...s.nodes,r],[...n.leaves,...s.leaves]],{linked:l,...c}=addNodes(o,i.nodeQueue),d=[...encodeLeaves(a,i.config),...encodeBranches(l,i.config)],h=fork$1(suspend());return{state:{...i,chunker:null,layout:null,rootID:r.id,status:"closed",end:h,nodeQueue:c},effect:listen({link:effects(d),end:join(h)})}}else return{state:i,effect:none$1()}},encodeLeaves=(i,e)=>i.map(t=>encodeLeaf(e,t,e.fileChunkEncoder)),encodeLeaf=function*({hasher:i,linker:e},{id:t,content:n},r){const s=r.encode(n?asUint8Array(n):EMPTY_BUFFER),o=yield*wait$1(i.digest(s)),a=e.createLink(r.code,o),l={cid:a,bytes:s},c={cid:a,contentByteLength:n?n.byteLength:0,dagByteLength:s.byteLength};return{id:t,block:l,link:c}},encodeBranches=(i,e)=>i.map(t=>encodeBranch(e,t)),encodeBranch=function*(i,{id:e,links:t},n){const r=i.fileEncoder.encode({type:NodeType.File,layout:"advanced",parts:t,metadata:n}),s=yield*wait$1(Promise.resolve(i.hasher.digest(r))),o=i.linker.createLink(i.fileEncoder.code,s),a={bytes:r,cid:o},l={cid:o,contentByteLength:cumulativeContentByteLength(t),dagByteLength:cumulativeDagByteLength(r,t)};return{id:e,block:a,link:l}},writeBlock=function*(i,e){(i.desiredSize||0)<=0&&(yield*wait$1(i.ready)),i.write(e)},asUint8Array=i=>i instanceof Uint8Array?i:i.copyTo(new Uint8Array(i.byteLength),0),isLeafNode=i=>i.children==null,name$2="fixed",context={maxChunkSize:262144},type="Stateless",withMaxChunkSize=i=>({type:"Stateless",context:{maxChunkSize:i},name:name$2,cut:cut$1}),cut$1=({maxChunkSize:i},{byteLength:e},t)=>{const n=e/i|0,r=new Array(n).fill(i),s=t?e-n*i:0;return s>0&&r.push(s),r},FixedSize=Object.freeze(Object.defineProperty({__proto__:null,context,cut:cut$1,name:name$2,type,withMaxChunkSize},Symbol.toStringTag,{value:"Module"}));function from({name:i,code:e,encode:t}){return new Hasher(i,e,t)}class Hasher{constructor(e,t,n){O(this,"name");O(this,"code");O(this,"encode");this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?create$7(this.code,t):t.then(n=>create$7(this.code,n))}else throw Error("Unknown type, must be binary type")}}function sha(i){return async e=>new Uint8Array(await crypto.subtle.digest(i,e))}const sha256=from({name:"sha2-256",code:18,encode:sha("SHA-256")});class Node{constructor(e,t,n){this.id=e,this.children=t,this.metadata=n}}const withWidth=i=>({open:()=>open({width:i}),write:write$1,close:close$3}),defaults$3={width:174},open=({width:i}=defaults$3)=>({width:i,head:null,leafIndex:[],nodeIndex:[],lastID:0}),write$1=(i,e)=>{if(e.length===0)return{layout:i,nodes:EMPTY,leaves:EMPTY};{let{lastID:t}=i;const[n,r]=i.head?[null,(e.unshift(i.head),e)]:e.length===1&&i.leafIndex.length===0?[e[0],EMPTY]:[null,e];if(r.length===0)return{layout:{...i,head:n},nodes:EMPTY,leaves:EMPTY};{const s=[...i.leafIndex],o=[];for(const a of r){const l={id:++t,content:a};o.push(l),s.push(l.id)}return s.length>i.width?flush({...i,leafIndex:s,head:n,lastID:t},o):{layout:{...i,head:n,leafIndex:s,lastID:t},leaves:o,nodes:EMPTY}}}},flush=(i,e=EMPTY,t=[],n=!1)=>{let{lastID:r}=i;const s=i.nodeIndex.map(c=>[...c]),o=[...i.leafIndex],{width:a}=i;for(;o.length>a||o.length>0&&n;){grow(s,1);const c=new Node(++r,o.splice(0,a));s[0].push(c.id),t.push(c)}let l=0;for(;l<s.length;){const c=s[l];for(l++;c.length>a||c.length>0&&n&&l<s.length;){const d=new Node(++r,c.splice(0,a));grow(s,l+1),s[l].push(d.id),t.push(d)}}return{layout:{...i,lastID:r,leafIndex:o,nodeIndex:s},leaves:e,nodes:t}},close$3=(i,e)=>{const t=i;if(i.head)return{root:{id:1,content:i.head,metadata:e},leaves:EMPTY,nodes:EMPTY};if(i.leafIndex.length===0)return{root:{id:1,metadata:e},leaves:EMPTY,nodes:EMPTY};{const{nodes:n,layout:r}=flush(t,EMPTY,[],!0),{nodeIndex:s}=r,o=s.length-1,a=s[o];if(a.length===1){const l=n[n.length-1];return n.length=n.length-1,{root:l,nodes:n,leaves:EMPTY}}else return{root:new Node(r.lastID+1,a,e),nodes:n,leaves:EMPTY}}},grow=(i,e)=>{for(;i.length<e;)i.push([]);return i},EMPTY=[],defaults$2=()=>({chunker:FixedSize,fileChunkEncoder:UnixFSLeaf,smallFileEncoder:UnixFSLeaf,fileEncoder:UnixFS,fileLayout:withWidth(174),hasher:sha256,linker:{createLink:CID.createV1}}),configure$2=i=>({...defaults$2(),...i}),UnixFSLeaf={code:code$1,name:name$3,encode:encodeFileChunk},create$4=({writer:i,metadata:e={},settings:t=defaults$2()})=>new FileWriterView(init$1(i,e,configure$2(t))),write=async(i,e)=>(await perform(i,send({type:"write",bytes:e})),i),close$2=async(i,{releaseLock:e=!1,closeWriter:t=!1}={})=>{await perform(i,send({type:"close"}));const{state:n}=i;if(n.status==="linked")return t?await i.state.writer.close():e&&i.state.writer.releaseLock(),n.link;panic(`Expected writer to be in 'linked' state after close, but it is in "${n.status}" instead`)},perform=(i,e)=>fork$1(loop(e,t=>{const{state:n,effect:r}=update(t,i.state);return i.state=n,r}));class FileWriterView{constructor(e){this.state=e}get writer(){return this.state.writer}get settings(){return this.state.config}write(e){return write(this,e)}close(e){return close$2(this,e)}}const defaults$1=defaults$2,create$3=({writer:i,settings:e=defaults$1(),metadata:t={}})=>new DirectoryWriter({writer:i,metadata:t,settings:e,entries:new Map,closed:!1}),set=(i,e,t,{overwrite:n=!1}={})=>{const r=asWritable(i.state);if(e.includes("/"))throw new Error(`Directory entry name "${e}" contains forbidden "/" character`);if(!n&&r.entries.has(e))throw new Error(`Directory already contains entry with name "${e}"`);return r.entries.set(e,t),i},remove=(i,e)=>(asWritable(i.state).entries.delete(e),i),asWritable=i=>{if(i.closed)throw new Error("Can not change written directory, but you can .fork() and make changes to it");return i},close$1=async(i,{closeWriter:e=!1,releaseLock:t=!1}={})=>{const{writer:n,settings:r,metadata:s}=asWritable(i.state);i.state.closed=!0;const o=[...links(i)],a=createFlatDirectory(o,s),l=encodeDirectory(a),c=await r.hasher.digest(l),d=r.linker.createLink(code$1,c);return(n.desiredSize||0)<=0&&await n.ready,n.write({cid:d,bytes:l}),e?await n.close():t&&n.releaseLock(),{cid:d,dagByteLength:cumulativeDagByteLength(l,o)}},links=function*({state:i}){for(const[e,{dagByteLength:t,cid:n}]of i.entries)yield{name:e,dagByteLength:t,cid:n}},fork=({state:i},{writer:e=i.writer,metadata:t=i.metadata,settings:n=i.settings}={})=>new DirectoryWriter({writer:e,metadata:t,settings:n,entries:new Map(i.entries.entries()),closed:!1});class DirectoryWriter{constructor(e){this.state=e}get writer(){return this.state.writer}get settings(){return this.state.settings}links(){return links(this)}set(e,t,n){return set(this,e,t,n)}remove(e){return remove(this,e)}fork(e){return fork(this,e)}close(e){return close$1(this,e)}entries(){return this.state.entries.entries()}has(e){return this.state.entries.has(e)}get size(){return this.state.entries.size}}var murmurHash3js={exports:{}};(function(i,e){(function(t,n){var r={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function s(u){if(!Array.isArray(u)&&!ArrayBuffer.isView(u))return!1;for(var g=0;g<u.length;g++)if(!Number.isInteger(u[g])||u[g]<0||u[g]>255)return!1;return!0}function o(u,g){return(u&65535)*g+(((u>>>16)*g&65535)<<16)}function a(u,g){return u<<g|u>>>32-g}function l(u){return u^=u>>>16,u=o(u,2246822507),u^=u>>>13,u=o(u,3266489909),u^=u>>>16,u}function c(u,g){u=[u[0]>>>16,u[0]&65535,u[1]>>>16,u[1]&65535],g=[g[0]>>>16,g[0]&65535,g[1]>>>16,g[1]&65535];var m=[0,0,0,0];return m[3]+=u[3]+g[3],m[2]+=m[3]>>>16,m[3]&=65535,m[2]+=u[2]+g[2],m[1]+=m[2]>>>16,m[2]&=65535,m[1]+=u[1]+g[1],m[0]+=m[1]>>>16,m[1]&=65535,m[0]+=u[0]+g[0],m[0]&=65535,[m[0]<<16|m[1],m[2]<<16|m[3]]}function d(u,g){u=[u[0]>>>16,u[0]&65535,u[1]>>>16,u[1]&65535],g=[g[0]>>>16,g[0]&65535,g[1]>>>16,g[1]&65535];var m=[0,0,0,0];return m[3]+=u[3]*g[3],m[2]+=m[3]>>>16,m[3]&=65535,m[2]+=u[2]*g[3],m[1]+=m[2]>>>16,m[2]&=65535,m[2]+=u[3]*g[2],m[1]+=m[2]>>>16,m[2]&=65535,m[1]+=u[1]*g[3],m[0]+=m[1]>>>16,m[1]&=65535,m[1]+=u[2]*g[2],m[0]+=m[1]>>>16,m[1]&=65535,m[1]+=u[3]*g[1],m[0]+=m[1]>>>16,m[1]&=65535,m[0]+=u[0]*g[3]+u[1]*g[2]+u[2]*g[1]+u[3]*g[0],m[0]&=65535,[m[0]<<16|m[1],m[2]<<16|m[3]]}function h(u,g){return g%=64,g===32?[u[1],u[0]]:g<32?[u[0]<<g|u[1]>>>32-g,u[1]<<g|u[0]>>>32-g]:(g-=32,[u[1]<<g|u[0]>>>32-g,u[0]<<g|u[1]>>>32-g])}function f(u,g){return g%=64,g===0?u:g<32?[u[0]<<g|u[1]>>>32-g,u[1]<<g]:[u[1]<<g-32,0]}function p(u,g){return[u[0]^g[0],u[1]^g[1]]}function y(u){return u=p(u,[0,u[0]>>>1]),u=d(u,[4283543511,3981806797]),u=p(u,[0,u[0]>>>1]),u=d(u,[3301882366,444984403]),u=p(u,[0,u[0]>>>1]),u}r.x86.hash32=function(u,g){if(r.inputValidation&&!s(u))return n;g=g||0;for(var m=u.length%4,$=u.length-m,v=g,b=0,w=3432918353,_=461845907,k=0;k<$;k=k+4)b=u[k]|u[k+1]<<8|u[k+2]<<16|u[k+3]<<24,b=o(b,w),b=a(b,15),b=o(b,_),v^=b,v=a(v,13),v=o(v,5)+3864292196;switch(b=0,m){case 3:b^=u[k+2]<<16;case 2:b^=u[k+1]<<8;case 1:b^=u[k],b=o(b,w),b=a(b,15),b=o(b,_),v^=b}return v^=u.length,v=l(v),v>>>0},r.x86.hash128=function(u,g){if(r.inputValidation&&!s(u))return n;g=g||0;for(var m=u.length%16,$=u.length-m,v=g,b=g,w=g,_=g,k=0,S=0,E=0,x=0,N=597399067,C=2869860233,L=951274213,D=2716044179,T=0;T<$;T=T+16)k=u[T]|u[T+1]<<8|u[T+2]<<16|u[T+3]<<24,S=u[T+4]|u[T+5]<<8|u[T+6]<<16|u[T+7]<<24,E=u[T+8]|u[T+9]<<8|u[T+10]<<16|u[T+11]<<24,x=u[T+12]|u[T+13]<<8|u[T+14]<<16|u[T+15]<<24,k=o(k,N),k=a(k,15),k=o(k,C),v^=k,v=a(v,19),v+=b,v=o(v,5)+1444728091,S=o(S,C),S=a(S,16),S=o(S,L),b^=S,b=a(b,17),b+=w,b=o(b,5)+197830471,E=o(E,L),E=a(E,17),E=o(E,D),w^=E,w=a(w,15),w+=_,w=o(w,5)+2530024501,x=o(x,D),x=a(x,18),x=o(x,N),_^=x,_=a(_,13),_+=v,_=o(_,5)+850148119;switch(k=0,S=0,E=0,x=0,m){case 15:x^=u[T+14]<<16;case 14:x^=u[T+13]<<8;case 13:x^=u[T+12],x=o(x,D),x=a(x,18),x=o(x,N),_^=x;case 12:E^=u[T+11]<<24;case 11:E^=u[T+10]<<16;case 10:E^=u[T+9]<<8;case 9:E^=u[T+8],E=o(E,L),E=a(E,17),E=o(E,D),w^=E;case 8:S^=u[T+7]<<24;case 7:S^=u[T+6]<<16;case 6:S^=u[T+5]<<8;case 5:S^=u[T+4],S=o(S,C),S=a(S,16),S=o(S,L),b^=S;case 4:k^=u[T+3]<<24;case 3:k^=u[T+2]<<16;case 2:k^=u[T+1]<<8;case 1:k^=u[T],k=o(k,N),k=a(k,15),k=o(k,C),v^=k}return v^=u.length,b^=u.length,w^=u.length,_^=u.length,v+=b,v+=w,v+=_,b+=v,w+=v,_+=v,v=l(v),b=l(b),w=l(w),_=l(_),v+=b,v+=w,v+=_,b+=v,w+=v,_+=v,("00000000"+(v>>>0).toString(16)).slice(-8)+("00000000"+(b>>>0).toString(16)).slice(-8)+("00000000"+(w>>>0).toString(16)).slice(-8)+("00000000"+(_>>>0).toString(16)).slice(-8)},r.x64.hash128=function(u,g){if(r.inputValidation&&!s(u))return n;g=g||0;for(var m=u.length%16,$=u.length-m,v=[0,g],b=[0,g],w=[0,0],_=[0,0],k=[2277735313,289559509],S=[1291169091,658871167],E=0;E<$;E=E+16)w=[u[E+4]|u[E+5]<<8|u[E+6]<<16|u[E+7]<<24,u[E]|u[E+1]<<8|u[E+2]<<16|u[E+3]<<24],_=[u[E+12]|u[E+13]<<8|u[E+14]<<16|u[E+15]<<24,u[E+8]|u[E+9]<<8|u[E+10]<<16|u[E+11]<<24],w=d(w,k),w=h(w,31),w=d(w,S),v=p(v,w),v=h(v,27),v=c(v,b),v=c(d(v,[0,5]),[0,1390208809]),_=d(_,S),_=h(_,33),_=d(_,k),b=p(b,_),b=h(b,31),b=c(b,v),b=c(d(b,[0,5]),[0,944331445]);switch(w=[0,0],_=[0,0],m){case 15:_=p(_,f([0,u[E+14]],48));case 14:_=p(_,f([0,u[E+13]],40));case 13:_=p(_,f([0,u[E+12]],32));case 12:_=p(_,f([0,u[E+11]],24));case 11:_=p(_,f([0,u[E+10]],16));case 10:_=p(_,f([0,u[E+9]],8));case 9:_=p(_,[0,u[E+8]]),_=d(_,S),_=h(_,33),_=d(_,k),b=p(b,_);case 8:w=p(w,f([0,u[E+7]],56));case 7:w=p(w,f([0,u[E+6]],48));case 6:w=p(w,f([0,u[E+5]],40));case 5:w=p(w,f([0,u[E+4]],32));case 4:w=p(w,f([0,u[E+3]],24));case 3:w=p(w,f([0,u[E+2]],16));case 2:w=p(w,f([0,u[E+1]],8));case 1:w=p(w,[0,u[E]]),w=d(w,k),w=h(w,31),w=d(w,S),v=p(v,w)}return v=p(v,[0,u.length]),b=p(b,[0,u.length]),v=c(v,b),b=c(b,v),v=y(v),b=y(b),v=c(v,b),b=c(b,v),("00000000"+(v[0]>>>0).toString(16)).slice(-8)+("00000000"+(v[1]>>>0).toString(16)).slice(-8)+("00000000"+(b[0]>>>0).toString(16)).slice(-8)+("00000000"+(b[1]>>>0).toString(16)).slice(-8)},i.exports&&(e=i.exports=r),e.murmurHash3=r})()})(murmurHash3js,murmurHash3js.exports);var murmurHash3jsExports=murmurHash3js.exports,murmurhash3jsRevisited=murmurHash3jsExports;const mur=getDefaultExportFromCjs(murmurhash3jsRevisited);new TextEncoder;mur.x64.hash126;const murmur364=from({name:"murmur3-x64-64",code:34,encode:i=>fromHex(mur.x64.hash128(i)).subarray(0,8)});new TextEncoder;const toInt=(i,e,t)=>{let n=e/8|0,r=e%8,s=t,o=0;for(;s>0&&n<i.byteLength;){const a=i[n],l=8-r,c=l<s?l:s,d=8-r-c,f=(255>>r&a)>>d;o=(o<<c)+f,s-=c,n++,r=0}return o},utf8=new TextEncoder,hash64=i=>murmur364.encode(i),configure$1=({bitWidth:i=8,hash:e=hash64})=>{const t=e(new Uint8Array).byteLength,n={bitWidth:i,hash:e,hashSize:t};return{at:(o,a)=>read(o,a,n),from:o=>utf8.encode(o),size:1/0}},read=(i,e=0,{bitWidth:t=8,hash:n,hashSize:r})=>{const s=r*8;let o=0,a=t,l=t*e;for(;a>0;){const c=l/s>>0,d=n(c===0?i:appendByte(i,c)),h=s<=l?l%s:l,f=s-h,p=f<a?f:a;o=(o<<p)+toInt(d,h,p),a-=p,l+=p}return o},appendByte=(i,e)=>{const t=new Uint8Array(i.byteLength+1).fill(e,i.byteLength);return t.set(i),t},bitWidth=8;configure$1({bitWidth});const createWriter=({writable:i,settings:e=defaults$2()})=>new FileSystemWriter({writer:i.getWriter(),settings:e}),close=async(i,{releaseLock:e=!0,closeWriter:t=!0}={})=>(t?await i.writer.close():e&&i.writer.releaseLock(),i);class FileSystemWriter{constructor({writer:e,settings:t}){this.writer=e,this.settings=configure$2(t)}createFileWriter({settings:e=this.settings,metadata:t}={}){return create$4({writer:this.writer,settings:e,metadata:t})}createDirectoryWriter({settings:e=this.settings,metadata:t}={}){return create$3({writer:this.writer,settings:e,metadata:t})}close(e){return close(this,e)}}const bytecode=new Uint8Array([0,97,115,109,1,0,0,0,1,94,15,96,2,127,127,0,96,1,127,1,127,96,2,127,127,1,127,96,3,127,127,127,1,127,96,1,127,0,96,3,127,127,127,0,96,4,127,127,127,127,0,96,4,127,127,127,127,1,127,96,0,0,96,1,127,1,126,96,5,127,127,127,127,127,0,96,6,127,127,127,127,127,127,0,96,0,1,127,96,6,127,127,127,127,127,127,1,127,96,2,126,127,1,127,2,129,1,4,3,119,98,103,29,95,95,119,98,103,95,99,111,112,121,84,111,95,99,50,98,54,101,56,49,50,50,52,52,57,52,55,99,100,0,7,3,119,98,103,29,95,95,119,98,103,95,108,101,110,103,116,104,95,57,99,100,101,49,54,102,97,56,99,100,101,49,102,99,99,0,1,3,119,98,103,26,95,95,119,98,105,110,100,103,101,110,95,111,98,106,101,99,116,95,100,114,111,112,95,114,101,102,0,4,3,119,98,103,16,95,95,119,98,105,110,100,103,101,110,95,116,104,114,111,119,0,0,3,96,95,1,4,3,7,10,11,2,0,2,2,3,14,0,4,12,0,6,6,5,0,0,0,10,6,6,5,0,5,6,0,5,0,0,5,2,0,1,13,3,5,0,0,3,5,0,7,0,0,4,1,1,0,4,0,4,4,0,5,4,1,1,0,2,7,0,1,2,5,0,1,1,1,0,1,8,2,2,1,8,8,0,1,1,1,1,0,2,2,1,1,9,9,9,0,4,4,5,1,112,1,18,18,5,3,1,0,17,6,9,1,127,1,65,128,128,192,0,11,7,152,1,9,6,109,101,109,111,114,121,2,0,16,95,95,119,98,103,95,114,97,98,105,110,95,102,114,101,101,0,62,6,99,114,101,97,116,101,0,49,20,99,114,101,97,116,101,87,105,116,104,80,111,108,121,110,111,109,105,97,108,0,41,3,99,117,116,0,26,10,99,117,116,95,98,117,102,102,101,114,0,27,31,95,95,119,98,105,110,100,103,101,110,95,97,100,100,95,116,111,95,115,116,97,99,107,95,112,111,105,110,116,101,114,0,81,17,95,95,119,98,105,110,100,103,101,110,95,109,97,108,108,111,99,0,53,15,95,95,119,98,105,110,100,103,101,110,95,102,114,101,101,0,68,9,23,1,0,65,1,11,17,97,58,94,98,95,59,19,25,50,72,42,13,38,80,79,98,96,10,184,127,95,210,31,2,15,127,1,126,35,0,65,16,107,34,11,36,0,2,64,2,64,32,0,65,245,1,79,4,64,65,128,128,124,65,8,65,8,16,66,65,20,65,8,16,66,106,65,16,65,8,16,66,106,107,65,119,113,65,125,106,34,2,65,0,65,16,65,8,16,66,65,2,116,107,34,1,32,1,32,2,75,27,32,0,77,13,2,32,0,65,4,106,65,8,16,66,33,4,65,232,135,192,0,40,2,0,69,13,1,65,0,32,4,107,33,3,2,64,2,64,2,127,65,0,32,4,65,128,2,73,13,0,26,65,31,32,4,65,255,255,255,7,75,13,0,26,32,4,65,6,32,4,65,8,118,103,34,0,107,118,65,1,113,32,0,65,1,116,107,65,62,106,11,34,6,65,2,116,65,244,137,192,0,106,40,2,0,34,0,4,64,32,4,32,6,16,64,116,33,7,65,0,33,1,3,64,2,64,32,0,16,85,34,2,32,4,73,13,0,32,2,32,4,107,34,2,32,3,79,13,0,32,0,33,1,32,2,34,3,13,0,65,0,33,3,12,3,11,32,0,65,20,106,40,2,0,34,2,32,5,32,2,32,0,32,7,65,29,118,65,4,113,106,65,16,106,40,2,0,34,0,71,27,32,5,32,2,27,33,5,32,7,65,1,116,33,7,32,0,13,0,11,32,5,4,64,32,5,33,0,12,2,11,32,1,13,2,11,65,0,33,1,65,1,32,6,116,16,69,65,232,135,192,0,40,2,0,113,34,0,69,13,3,32,0,16,74,104,65,2,116,65,244,137,192,0,106,40,2,0,34,0,69,13,3,11,3,64,32,0,32,1,32,0,16,85,34,1,32,4,79,32,1,32,4,107,34,5,32,3,73,113,34,2,27,33,1,32,5,32,3,32,2,27,33,3,32,0,16,63,34,0,13,0,11,32,1,69,13,2,11,65,244,138,192,0,40,2,0,34,0,32,4,79,65,0,32,3,32,0,32,4,107,79,27,13,1,32,1,34,0,32,4,16,90,33,6,32,0,16,17,2,64,32,3,65,16,65,8,16,66,79,4,64,32,0,32,4,16,76,32,6,32,3,16,65,32,3,65,128,2,79,4,64,32,6,32,3,16,16,12,2,11,32,3,65,3,118,34,1,65,3,116,65,236,135,192,0,106,33,5,2,127,65,228,135,192,0,40,2,0,34,2,65,1,32,1,116,34,1,113,4,64,32,5,40,2,8,12,1,11,65,228,135,192,0,32,1,32,2,114,54,2,0,32,5,11,33,1,32,5,32,6,54,2,8,32,1,32,6,54,2,12,32,6,32,5,54,2,12,32,6,32,1,54,2,8,12,1,11,32,0,32,3,32,4,106,16,60,11,32,0,16,92,34,3,69,13,1,12,2,11,65,16,32,0,65,4,106,65,16,65,8,16,66,65,123,106,32,0,75,27,65,8,16,66,33,4,2,64,2,64,2,64,2,127,2,64,2,64,65,228,135,192,0,40,2,0,34,1,32,4,65,3,118,34,0,118,34,2,65,3,113,69,4,64,32,4,65,244,138,192,0,40,2,0,77,13,7,32,2,13,1,65,232,135,192,0,40,2,0,34,0,69,13,7,32,0,16,74,104,65,2,116,65,244,137,192,0,106,40,2,0,34,1,16,85,32,4,107,33,3,32,1,16,63,34,0,4,64,3,64,32,0,16,85,32,4,107,34,2,32,3,32,2,32,3,73,34,2,27,33,3,32,0,32,1,32,2,27,33,1,32,0,16,63,34,0,13,0,11,11,32,1,34,0,32,4,16,90,33,5,32,0,16,17,32,3,65,16,65,8,16,66,73,13,5,32,0,32,4,16,76,32,5,32,3,16,65,65,244,138,192,0,40,2,0,34,1,69,13,4,32,1,65,3,118,34,1,65,3,116,65,236,135,192,0,106,33,7,65,252,138,192,0,40,2,0,33,6,65,228,135,192,0,40,2,0,34,2,65,1,32,1,116,34,1,113,69,13,2,32,7,40,2,8,12,3,11,2,64,32,2,65,127,115,65,1,113,32,0,106,34,3,65,3,116,34,0,65,244,135,192,0,106,40,2,0,34,5,65,8,106,40,2,0,34,2,32,0,65,236,135,192,0,106,34,0,71,4,64,32,2,32,0,54,2,12,32,0,32,2,54,2,8,12,1,11,65,228,135,192,0,32,1,65,126,32,3,119,113,54,2,0,11,32,5,32,3,65,3,116,16,60,32,5,16,92,33,3,12,7,11,2,64,65,1,32,0,65,31,113,34,0,116,16,69,32,2,32,0,116,113,16,74,104,34,2,65,3,116,34,0,65,244,135,192,0,106,40,2,0,34,3,65,8,106,40,2,0,34,1,32,0,65,236,135,192,0,106,34,0,71,4,64,32,1,32,0,54,2,12,32,0,32,1,54,2,8,12,1,11,65,228,135,192,0,65,228,135,192,0,40,2,0,65,126,32,2,119,113,54,2,0,11,32,3,32,4,16,76,32,3,32,4,16,90,34,5,32,2,65,3,116,32,4,107,34,2,16,65,65,244,138,192,0,40,2,0,34,0,4,64,32,0,65,3,118,34,0,65,3,116,65,236,135,192,0,106,33,7,65,252,138,192,0,40,2,0,33,6,2,127,65,228,135,192,0,40,2,0,34,1,65,1,32,0,116,34,0,113,4,64,32,7,40,2,8,12,1,11,65,228,135,192,0,32,0,32,1,114,54,2,0,32,7,11,33,0,32,7,32,6,54,2,8,32,0,32,6,54,2,12,32,6,32,7,54,2,12,32,6,32,0,54,2,8,11,65,252,138,192,0,32,5,54,2,0,65,244,138,192,0,32,2,54,2,0,32,3,16,92,33,3,12,6,11,65,228,135,192,0,32,1,32,2,114,54,2,0,32,7,11,33,1,32,7,32,6,54,2,8,32,1,32,6,54,2,12,32,6,32,7,54,2,12,32,6,32,1,54,2,8,11,65,252,138,192,0,32,5,54,2,0,65,244,138,192,0,32,3,54,2,0,12,1,11,32,0,32,3,32,4,106,16,60,11,32,0,16,92,34,3,13,1,11,2,64,2,64,2,64,2,64,2,64,2,64,2,64,2,64,65,244,138,192,0,40,2,0,34,0,32,4,73,4,64,65,248,138,192,0,40,2,0,34,0,32,4,75,13,2,32,11,65,8,65,8,16,66,32,4,106,65,20,65,8,16,66,106,65,16,65,8,16,66,106,65,128,128,4,16,66,16,51,32,11,40,2,0,34,8,13,1,65,0,33,3,12,9,11,65,252,138,192,0,40,2,0,33,2,32,0,32,4,107,34,1,65,16,65,8,16,66,73,4,64,65,252,138,192,0,65,0,54,2,0,65,244,138,192,0,40,2,0,33,0,65,244,138,192,0,65,0,54,2,0,32,2,32,0,16,60,32,2,16,92,33,3,12,9,11,32,2,32,4,16,90,33,0,65,244,138,192,0,32,1,54,2,0,65,252,138,192,0,32,0,54,2,0,32,0,32,1,16,65,32,2,32,4,16,76,32,2,16,92,33,3,12,8,11,32,11,40,2,8,33,12,65,132,139,192,0,32,11,40,2,4,34,10,65,132,139,192,0,40,2,0,106,34,1,54,2,0,65,136,139,192,0,65,136,139,192,0,40,2,0,34,0,32,1,32,0,32,1,75,27,54,2,0,2,64,2,64,65,128,139,192,0,40,2,0,4,64,65,140,139,192,0,33,0,3,64,32,0,16,77,32,8,70,13,2,32,0,40,2,8,34,0,13,0,11,12,2,11,65,160,139,192,0,40,2,0,34,0,69,32,8,32,0,73,114,13,3,12,7,11,32,0,16,87,13,0,32,0,16,88,32,12,71,13,0,32,0,34,1,40,2,0,34,5,65,128,139,192,0,40,2,0,34,2,77,4,127,32,5,32,1,40,2,4,106,32,2,75,5,65,0,11,13,3,11,65,160,139,192,0,65,160,139,192,0,40,2,0,34,0,32,8,32,8,32,0,75,27,54,2,0,32,8,32,10,106,33,1,65,140,139,192,0,33,0,2,64,2,64,3,64,32,1,32,0,40,2,0,71,4,64,32,0,40,2,8,34,0,13,1,12,2,11,11,32,0,16,87,13,0,32,0,16,88,32,12,70,13,1,11,65,128,139,192,0,40,2,0,33,9,65,140,139,192,0,33,0,2,64,3,64,32,0,40,2,0,32,9,77,4,64,32,0,16,77,32,9,75,13,2,11,32,0,40,2,8,34,0,13,0,11,65,0,33,0,11,32,9,32,0,16,77,34,6,65,20,65,8,16,66,34,15,107,65,105,106,34,1,16,92,34,0,65,8,16,66,32,0,107,32,1,106,34,0,32,0,65,16,65,8,16,66,32,9,106,73,27,34,13,16,92,33,14,32,13,32,15,16,90,33,0,65,8,65,8,16,66,33,3,65,20,65,8,16,66,33,5,65,16,65,8,16,66,33,2,65,128,139,192,0,32,8,32,8,16,92,34,1,65,8,16,66,32,1,107,34,1,16,90,34,7,54,2,0,65,248,138,192,0,32,10,65,8,106,32,2,32,3,32,5,106,106,32,1,106,107,34,3,54,2,0,32,7,32,3,65,1,114,54,2,4,65,8,65,8,16,66,33,5,65,20,65,8,16,66,33,2,65,16,65,8,16,66,33,1,32,7,32,3,16,90,32,1,32,2,32,5,65,8,107,106,106,54,2,4,65,156,139,192,0,65,128,128,128,1,54,2,0,32,13,32,15,16,76,65,140,139,192,0,41,2,0,33,16,32,14,65,8,106,65,148,139,192,0,41,2,0,55,2,0,32,14,32,16,55,2,0,65,152,139,192,0,32,12,54,2,0,65,144,139,192,0,32,10,54,2,0,65,140,139,192,0,32,8,54,2,0,65,148,139,192,0,32,14,54,2,0,3,64,32,0,65,4,16,90,33,1,32,0,65,7,54,2,4,32,6,32,1,34,0,65,4,106,75,13,0,11,32,9,32,13,70,13,7,32,9,32,13,32,9,107,34,0,32,9,32,0,16,90,16,61,32,0,65,128,2,79,4,64,32,9,32,0,16,16,12,8,11,32,0,65,3,118,34,0,65,3,116,65,236,135,192,0,106,33,2,2,127,65,228,135,192,0,40,2,0,34,1,65,1,32,0,116,34,0,113,4,64,32,2,40,2,8,12,1,11,65,228,135,192,0,32,0,32,1,114,54,2,0,32,2,11,33,0,32,2,32,9,54,2,8,32,0,32,9,54,2,12,32,9,32,2,54,2,12,32,9,32,0,54,2,8,12,7,11,32,0,40,2,0,33,3,32,0,32,8,54,2,0,32,0,32,0,40,2,4,32,10,106,54,2,4,32,8,16,92,34,5,65,8,16,66,33,2,32,3,16,92,34,1,65,8,16,66,33,0,32,8,32,2,32,5,107,106,34,6,32,4,16,90,33,7,32,6,32,4,16,76,32,3,32,0,32,1,107,106,34,0,32,4,32,6,106,107,33,4,32,0,65,128,139,192,0,40,2,0,71,4,64,65,252,138,192,0,40,2,0,32,0,70,13,4,32,0,40,2,4,65,3,113,65,1,71,13,5,2,64,32,0,16,85,34,5,65,128,2,79,4,64,32,0,16,17,12,1,11,32,0,65,12,106,40,2,0,34,2,32,0,65,8,106,40,2,0,34,1,71,4,64,32,1,32,2,54,2,12,32,2,32,1,54,2,8,12,1,11,65,228,135,192,0,65,228,135,192,0,40,2,0,65,126,32,5,65,3,118,119,113,54,2,0,11,32,4,32,5,106,33,4,32,0,32,5,16,90,33,0,12,5,11,65,128,139,192,0,32,7,54,2,0,65,248,138,192,0,65,248,138,192,0,40,2,0,32,4,106,34,0,54,2,0,32,7,32,0,65,1,114,54,2,4,32,6,16,92,33,3,12,7,11,65,248,138,192,0,32,0,32,4,107,34,1,54,2,0,65,128,139,192,0,65,128,139,192,0,40,2,0,34,2,32,4,16,90,34,0,54,2,0,32,0,32,1,65,1,114,54,2,4,32,2,32,4,16,76,32,2,16,92,33,3,12,6,11,65,160,139,192,0,32,8,54,2,0,12,3,11,32,0,32,0,40,2,4,32,10,106,54,2,4,65,128,139,192,0,40,2,0,65,248,138,192,0,40,2,0,32,10,106,16,36,12,3,11,65,252,138,192,0,32,7,54,2,0,65,244,138,192,0,65,244,138,192,0,40,2,0,32,4,106,34,0,54,2,0,32,7,32,0,16,65,32,6,16,92,33,3,12,3,11,32,7,32,4,32,0,16,61,32,4,65,128,2,79,4,64,32,7,32,4,16,16,32,6,16,92,33,3,12,3,11,32,4,65,3,118,34,0,65,3,116,65,236,135,192,0,106,33,2,2,127,65,228,135,192,0,40,2,0,34,1,65,1,32,0,116,34,0,113,4,64,32,2,40,2,8,12,1,11,65,228,135,192,0,32,0,32,1,114,54,2,0,32,2,11,33,0,32,2,32,7,54,2,8,32,0,32,7,54,2,12,32,7,32,2,54,2,12,32,7,32,0,54,2,8,32,6,16,92,33,3,12,2,11,65,164,139,192,0,65,255,31,54,2,0,65,152,139,192,0,32,12,54,2,0,65,144,139,192,0,32,10,54,2,0,65,140,139,192,0,32,8,54,2,0,65,248,135,192,0,65,236,135,192,0,54,2,0,65,128,136,192,0,65,244,135,192,0,54,2,0,65,244,135,192,0,65,236,135,192,0,54,2,0,65,136,136,192,0,65,252,135,192,0,54,2,0,65,252,135,192,0,65,244,135,192,0,54,2,0,65,144,136,192,0,65,132,136,192,0,54,2,0,65,132,136,192,0,65,252,135,192,0,54,2,0,65,152,136,192,0,65,140,136,192,0,54,2,0,65,140,136,192,0,65,132,136,192,0,54,2,0,65,160,136,192,0,65,148,136,192,0,54,2,0,65,148,136,192,0,65,140,136,192,0,54,2,0,65,168,136,192,0,65,156,136,192,0,54,2,0,65,156,136,192,0,65,148,136,192,0,54,2,0,65,176,136,192,0,65,164,136,192,0,54,2,0,65,164,136,192,0,65,156,136,192,0,54,2,0,65,184,136,192,0,65,172,136,192,0,54,2,0,65,172,136,192,0,65,164,136,192,0,54,2,0,65,180,136,192,0,65,172,136,192,0,54,2,0,65,192,136,192,0,65,180,136,192,0,54,2,0,65,188,136,192,0,65,180,136,192,0,54,2,0,65,200,136,192,0,65,188,136,192,0,54,2,0,65,196,136,192,0,65,188,136,192,0,54,2,0,65,208,136,192,0,65,196,136,192,0,54,2,0,65,204,136,192,0,65,196,136,192,0,54,2,0,65,216,136,192,0,65,204,136,192,0,54,2,0,65,212,136,192,0,65,204,136,192,0,54,2,0,65,224,136,192,0,65,212,136,192,0,54,2,0,65,220,136,192,0,65,212,136,192,0,54,2,0,65,232,136,192,0,65,220,136,192,0,54,2,0,65,228,136,192,0,65,220,136,192,0,54,2,0,65,240,136,192,0,65,228,136,192,0,54,2,0,65,236,136,192,0,65,228,136,192,0,54,2,0,65,248,136,192,0,65,236,136,192,0,54,2,0,65,128,137,192,0,65,244,136,192,0,54,2,0,65,244,136,192,0,65,236,136,192,0,54,2,0,65,136,137,192,0,65,252,136,192,0,54,2,0,65,252,136,192,0,65,244,136,192,0,54,2,0,65,144,137,192,0,65,132,137,192,0,54,2,0,65,132,137,192,0,65,252,136,192,0,54,2,0,65,152,137,192,0,65,140,137,192,0,54,2,0,65,140,137,192,0,65,132,137,192,0,54,2,0,65,160,137,192,0,65,148,137,192,0,54,2,0,65,148,137,192,0,65,140,137,192,0,54,2,0,65,168,137,192,0,65,156,137,192,0,54,2,0,65,156,137,192,0,65,148,137,192,0,54,2,0,65,176,137,192,0,65,164,137,192,0,54,2,0,65,164,137,192,0,65,156,137,192,0,54,2,0,65,184,137,192,0,65,172,137,192,0,54,2,0,65,172,137,192,0,65,164,137,192,0,54,2,0,65,192,137,192,0,65,180,137,192,0,54,2,0,65,180,137,192,0,65,172,137,192,0,54,2,0,65,200,137,192,0,65,188,137,192,0,54,2,0,65,188,137,192,0,65,180,137,192,0,54,2,0,65,208,137,192,0,65,196,137,192,0,54,2,0,65,196,137,192,0,65,188,137,192,0,54,2,0,65,216,137,192,0,65,204,137,192,0,54,2,0,65,204,137,192,0,65,196,137,192,0,54,2,0,65,224,137,192,0,65,212,137,192,0,54,2,0,65,212,137,192,0,65,204,137,192,0,54,2,0,65,232,137,192,0,65,220,137,192,0,54,2,0,65,220,137,192,0,65,212,137,192,0,54,2,0,65,240,137,192,0,65,228,137,192,0,54,2,0,65,228,137,192,0,65,220,137,192,0,54,2,0,65,236,137,192,0,65,228,137,192,0,54,2,0,65,8,65,8,16,66,33,5,65,20,65,8,16,66,33,2,65,16,65,8,16,66,33,1,65,128,139,192,0,32,8,32,8,16,92,34,0,65,8,16,66,32,0,107,34,0,16,90,34,3,54,2,0,65,248,138,192,0,32,10,65,8,106,32,1,32,2,32,5,106,106,32,0,106,107,34,5,54,2,0,32,3,32,5,65,1,114,54,2,4,65,8,65,8,16,66,33,2,65,20,65,8,16,66,33,1,65,16,65,8,16,66,33,0,32,3,32,5,16,90,32,0,32,1,32,2,65,8,107,106,106,54,2,4,65,156,139,192,0,65,128,128,128,1,54,2,0,11,65,0,33,3,65,248,138,192,0,40,2,0,34,0,32,4,77,13,0,65,248,138,192,0,32,0,32,4,107,34,1,54,2,0,65,128,139,192,0,65,128,139,192,0,40,2,0,34,2,32,4,16,90,34,0,54,2,0,32,0,32,1,65,1,114,54,2,4,32,2,32,4,16,76,32,2,16,92,33,3,11,32,11,65,16,106,36,0,32,3,11,242,6,1,5,127,32,0,16,93,34,0,32,0,16,85,34,2,16,90,33,1,2,64,2,64,2,64,32,0,16,86,13,0,32,0,40,2,0,33,3,2,64,32,0,16,75,69,4,64,32,2,32,3,106,33,2,32,0,32,3,16,91,34,0,65,252,138,192,0,40,2,0,71,13,1,32,1,40,2,4,65,3,113,65,3,71,13,2,65,244,138,192,0,32,2,54,2,0,32,0,32,2,32,1,16,61,15,11,32,2,32,3,106,65,16,106,33,0,12,2,11,32,3,65,128,2,79,4,64,32,0,16,17,12,1,11,32,0,65,12,106,40,2,0,34,4,32,0,65,8,106,40,2,0,34,5,71,4,64,32,5,32,4,54,2,12,32,4,32,5,54,2,8,12,1,11,65,228,135,192,0,65,228,135,192,0,40,2,0,65,126,32,3,65,3,118,119,113,54,2,0,11,2,64,32,1,16,73,4,64,32,0,32,2,32,1,16,61,12,1,11,2,64,2,64,2,64,65,128,139,192,0,40,2,0,32,1,71,4,64,32,1,65,252,138,192,0,40,2,0,71,13,1,65,252,138,192,0,32,0,54,2,0,65,244,138,192,0,65,244,138,192,0,40,2,0,32,2,106,34,1,54,2,0,32,0,32,1,16,65,15,11,65,128,139,192,0,32,0,54,2,0,65,248,138,192,0,65,248,138,192,0,40,2,0,32,2,106,34,1,54,2,0,32,0,32,1,65,1,114,54,2,4,32,0,65,252,138,192,0,40,2,0,70,13,1,12,2,11,32,1,16,85,34,3,32,2,106,33,2,2,64,32,3,65,128,2,79,4,64,32,1,16,17,12,1,11,32,1,65,12,106,40,2,0,34,4,32,1,65,8,106,40,2,0,34,1,71,4,64,32,1,32,4,54,2,12,32,4,32,1,54,2,8,12,1,11,65,228,135,192,0,65,228,135,192,0,40,2,0,65,126,32,3,65,3,118,119,113,54,2,0,11,32,0,32,2,16,65,32,0,65,252,138,192,0,40,2,0,71,13,2,65,244,138,192,0,32,2,54,2,0,12,3,11,65,244,138,192,0,65,0,54,2,0,65,252,138,192,0,65,0,54,2,0,11,65,156,139,192,0,40,2,0,32,1,79,13,1,65,128,128,124,65,8,65,8,16,66,65,20,65,8,16,66,106,65,16,65,8,16,66,106,107,65,119,113,65,125,106,34,0,65,0,65,16,65,8,16,66,65,2,116,107,34,1,32,1,32,0,75,27,69,13,1,65,128,139,192,0,40,2,0,69,13,1,65,8,65,8,16,66,33,0,65,20,65,8,16,66,33,1,65,16,65,8,16,66,33,2,65,0,2,64,65,248,138,192,0,40,2,0,34,4,32,2,32,1,32,0,65,8,107,106,106,34,2,77,13,0,65,128,139,192,0,40,2,0,33,1,65,140,139,192,0,33,0,2,64,3,64,32,0,40,2,0,32,1,77,4,64,32,0,16,77,32,1,75,13,2,11,32,0,40,2,8,34,0,13,0,11,65,0,33,0,11,32,0,16,87,13,0,32,0,65,12,106,40,2,0,26,12,0,11,65,0,16,18,107,71,13,1,65,248,138,192,0,40,2,0,65,156,139,192,0,40,2,0,77,13,1,65,156,139,192,0,65,127,54,2,0,15,11,32,2,65,128,2,73,13,1,32,0,32,2,16,16,65,164,139,192,0,65,164,139,192,0,40,2,0,65,127,106,34,0,54,2,0,32,0,13,0,16,18,26,15,11,15,11,32,2,65,3,118,34,3,65,3,116,65,236,135,192,0,106,33,1,2,127,65,228,135,192,0,40,2,0,34,2,65,1,32,3,116,34,3,113,4,64,32,1,40,2,8,12,1,11,65,228,135,192,0,32,2,32,3,114,54,2,0,32,1,11,33,3,32,1,32,0,54,2,8,32,3,32,0,54,2,12,32,0,32,1,54,2,12,32,0,32,3,54,2,8,11,185,5,1,8,127,65,43,65,128,128,196,0,32,0,40,2,0,34,5,65,1,113,34,3,27,33,6,32,2,32,3,106,33,4,65,148,133,192,0,65,0,32,5,65,4,113,27,33,7,65,1,33,3,2,64,2,64,32,0,40,2,8,65,1,71,4,64,32,0,32,6,32,7,16,46,13,1,12,2,11,2,64,2,64,2,64,2,64,32,0,65,12,106,40,2,0,34,8,32,4,75,4,64,32,5,65,8,113,13,4,65,0,33,3,32,8,32,4,107,34,4,33,5,65,1,32,0,45,0,32,34,8,32,8,65,3,70,27,65,3,113,65,1,107,14,2,1,2,3,11,32,0,32,6,32,7,16,46,13,4,12,5,11,65,0,33,5,32,4,33,3,12,1,11,32,4,65,1,118,33,3,32,4,65,1,106,65,1,118,33,5,11,32,3,65,1,106,33,3,32,0,65,28,106,40,2,0,33,8,32,0,40,2,4,33,4,32,0,40,2,24,33,9,2,64,3,64,32,3,65,127,106,34,3,69,13,1,32,9,32,4,32,8,40,2,16,17,2,0,69,13,0,11,65,1,15,11,65,1,33,3,32,4,65,128,128,196,0,70,13,1,32,0,32,6,32,7,16,46,13,1,32,0,40,2,24,32,1,32,2,32,0,40,2,28,40,2,12,17,3,0,13,1,32,0,40,2,28,33,1,32,0,40,2,24,33,0,65,0,33,3,2,127,3,64,32,5,32,3,32,5,70,13,1,26,32,3,65,1,106,33,3,32,0,32,4,32,1,40,2,16,17,2,0,69,13,0,11,32,3,65,127,106,11,32,5,73,33,3,12,1,11,32,0,40,2,4,33,9,32,0,65,48,54,2,4,32,0,45,0,32,33,10,32,0,65,1,58,0,32,32,0,32,6,32,7,16,46,13,0,65,0,33,3,32,8,32,4,107,34,4,33,5,2,64,2,64,2,64,65,1,32,0,45,0,32,34,6,32,6,65,3,70,27,65,3,113,65,1,107,14,2,0,1,2,11,65,0,33,5,32,4,33,3,12,1,11,32,4,65,1,118,33,3,32,4,65,1,106,65,1,118,33,5,11,32,3,65,1,106,33,3,32,0,65,28,106,40,2,0,33,6,32,0,40,2,4,33,4,32,0,40,2,24,33,7,2,64,3,64,32,3,65,127,106,34,3,69,13,1,32,7,32,4,32,6,40,2,16,17,2,0,69,13,0,11,65,1,15,11,65,1,33,3,32,4,65,128,128,196,0,70,13,0,32,0,40,2,24,32,1,32,2,32,0,40,2,28,40,2,12,17,3,0,13,0,32,0,40,2,28,33,2,32,0,40,2,24,33,3,65,0,33,1,2,64,3,64,32,1,32,5,70,13,1,32,1,65,1,106,33,1,32,3,32,4,32,2,40,2,16,17,2,0,69,13,0,11,65,1,33,3,32,1,65,127,106,32,5,73,13,1,11,32,0,32,10,58,0,32,32,0,32,9,54,2,4,65,0,15,11,32,3,15,11,32,0,40,2,24,32,1,32,2,32,0,65,28,106,40,2,0,40,2,12,17,3,0,11,220,6,1,6,127,2,64,2,64,2,64,32,2,65,9,79,4,64,32,3,32,2,16,12,34,2,13,1,65,0,15,11,65,0,33,2,65,128,128,124,65,8,65,8,16,66,65,20,65,8,16,66,106,65,16,65,8,16,66,106,107,65,119,113,65,125,106,34,1,65,0,65,16,65,8,16,66,65,2,116,107,34,5,32,5,32,1,75,27,32,3,77,13,1,65,16,32,3,65,4,106,65,16,65,8,16,66,65,123,106,32,3,75,27,65,8,16,66,33,5,32,0,16,93,34,1,32,1,16,85,34,6,16,90,33,4,2,64,2,64,2,64,2,64,2,64,2,64,2,64,32,1,16,75,69,4,64,32,6,32,5,79,13,1,32,4,65,128,139,192,0,40,2,0,70,13,2,32,4,65,252,138,192,0,40,2,0,70,13,3,32,4,16,73,13,7,32,4,16,85,34,7,32,6,106,34,8,32,5,73,13,7,32,8,32,5,107,33,6,32,7,65,128,2,73,13,4,32,4,16,17,12,5,11,32,1,16,85,33,4,32,5,65,128,2,73,13,6,32,4,32,5,65,4,106,79,65,0,32,4,32,5,107,65,129,128,8,73,27,13,5,32,1,40,2,0,34,6,32,4,106,65,16,106,33,7,32,5,65,31,106,65,128,128,4,16,66,33,4,65,0,34,5,69,13,6,32,5,32,6,106,34,1,32,4,32,6,107,34,0,65,112,106,34,2,54,2,4,32,1,32,2,16,90,65,7,54,2,4,32,1,32,0,65,116,106,16,90,65,0,54,2,4,65,132,139,192,0,65,132,139,192,0,40,2,0,32,4,32,7,107,106,34,0,54,2,0,65,160,139,192,0,65,160,139,192,0,40,2,0,34,2,32,5,32,5,32,2,75,27,54,2,0,65,136,139,192,0,65,136,139,192,0,40,2,0,34,2,32,0,32,2,32,0,75,27,54,2,0,12,9,11,32,6,32,5,107,34,4,65,16,65,8,16,66,73,13,4,32,1,32,5,16,90,33,6,32,1,32,5,16,55,32,6,32,4,16,55,32,6,32,4,16,11,12,4,11,65,248,138,192,0,40,2,0,32,6,106,34,6,32,5,77,13,4,32,1,32,5,16,90,33,4,32,1,32,5,16,55,32,4,32,6,32,5,107,34,5,65,1,114,54,2,4,65,248,138,192,0,32,5,54,2,0,65,128,139,192,0,32,4,54,2,0,12,3,11,65,244,138,192,0,40,2,0,32,6,106,34,6,32,5,73,13,3,2,64,32,6,32,5,107,34,4,65,16,65,8,16,66,73,4,64,32,1,32,6,16,55,65,0,33,4,65,0,33,6,12,1,11,32,1,32,5,16,90,34,6,32,4,16,90,33,7,32,1,32,5,16,55,32,6,32,4,16,65,32,7,32,7,40,2,4,65,126,113,54,2,4,11,65,252,138,192,0,32,6,54,2,0,65,244,138,192,0,32,4,54,2,0,12,2,11,32,4,65,12,106,40,2,0,34,9,32,4,65,8,106,40,2,0,34,4,71,4,64,32,4,32,9,54,2,12,32,9,32,4,54,2,8,12,1,11,65,228,135,192,0,65,228,135,192,0,40,2,0,65,126,32,7,65,3,118,119,113,54,2,0,11,32,6,65,16,65,8,16,66,79,4,64,32,1,32,5,16,90,33,4,32,1,32,5,16,55,32,4,32,6,16,55,32,4,32,6,16,11,12,1,11,32,1,32,8,16,55,11,32,1,13,3,11,32,3,16,4,34,5,69,13,1,32,5,32,0,32,3,32,1,16,85,65,120,65,124,32,1,16,75,27,106,34,1,32,1,32,3,75,27,16,14,32,0,16,5,15,11,32,2,32,0,32,3,32,1,32,1,32,3,75,27,16,14,26,32,0,16,5,11,32,2,15,11,32,1,16,75,26,32,1,16,92,11,135,6,2,18,127,7,126,35,0,65,16,107,34,5,36,0,32,5,66,0,55,2,4,32,5,65,136,129,192,0,40,2,0,54,2,0,32,1,53,2,164,32,33,23,32,1,40,2,160,32,33,11,32,1,65,16,106,41,3,0,33,28,32,1,41,3,144,32,33,24,32,1,41,3,0,33,25,32,1,41,3,8,33,29,32,1,40,2,168,32,33,15,32,1,41,3,136,32,33,26,32,1,40,2,152,32,33,17,2,64,65,0,32,1,40,2,156,32,34,16,32,3,77,34,7,69,32,4,27,13,0,32,23,66,63,131,33,27,32,16,32,3,32,7,27,33,14,32,2,32,11,107,33,18,65,0,32,11,107,33,19,32,2,32,15,106,33,20,32,11,65,1,106,65,2,73,33,21,3,64,2,64,2,64,32,10,32,17,106,32,3,73,4,64,32,10,32,15,106,33,6,32,21,69,13,1,32,26,33,23,12,2,11,32,4,69,32,3,32,10,70,114,13,3,32,5,40,2,4,32,8,70,4,64,32,5,32,8,16,44,32,5,40,2,8,33,8,11,32,5,40,2,0,32,8,65,2,116,106,32,3,32,10,107,54,2,0,32,5,32,5,40,2,8,65,1,106,54,2,8,12,3,11,32,10,32,20,106,33,12,32,6,32,11,106,33,13,32,3,32,6,32,3,32,6,75,27,34,22,32,6,107,33,9,32,11,33,7,32,26,33,23,2,64,2,64,3,64,32,9,69,13,2,32,28,32,29,32,7,65,1,70,27,32,23,133,34,23,32,27,136,167,34,6,65,128,2,79,13,1,32,1,32,6,65,3,116,106,65,136,16,106,41,3,0,32,12,49,0,0,32,23,66,8,134,132,133,33,23,32,9,65,127,106,33,9,32,12,65,1,106,33,12,32,7,65,127,106,34,7,13,0,11,32,13,33,6,12,2,11,32,6,65,128,2,65,200,128,192,0,16,37,0,11,32,22,32,3,65,184,128,192,0,16,37,0,11,2,64,2,64,32,6,32,14,79,13,0,32,6,33,9,32,23,32,25,131,32,24,81,13,0,2,64,2,64,3,64,32,9,32,19,106,32,3,79,13,1,32,9,32,3,79,13,2,32,1,32,9,32,18,106,45,0,0,65,3,116,106,65,8,106,41,3,0,32,23,133,34,23,32,27,136,167,34,13,65,128,2,73,4,64,32,9,65,1,106,34,7,32,14,79,13,5,32,2,32,9,106,33,12,32,7,33,9,32,1,32,13,65,3,116,106,65,136,16,106,41,3,0,32,12,49,0,0,32,23,66,8,134,132,133,34,23,32,25,131,32,24,81,13,5,12,1,11,11,32,13,65,128,2,65,248,128,192,0,16,37,0,11,32,9,32,11,107,32,3,65,216,128,192,0,16,37,0,11,32,3,32,6,32,3,32,6,75,27,32,3,65,232,128,192,0,16,37,0,11,32,6,33,7,11,32,5,40,2,4,32,8,70,4,64,32,5,32,8,16,44,32,5,40,2,8,33,8,11,32,5,40,2,0,32,8,65,2,116,106,32,7,32,10,107,54,2,0,32,5,32,5,40,2,8,65,1,106,34,8,54,2,8,32,7,32,16,106,34,6,32,3,32,6,32,3,77,34,6,27,33,14,32,7,33,10,32,6,13,0,32,4,13,0,11,11,32,0,32,5,41,3,0,55,2,0,32,0,65,8,106,32,5,65,8,106,40,2,0,54,2,0,32,5,65,16,106,36,0,11,223,4,2,4,127,7,126,35,0,65,160,32,107,34,6,36,0,32,6,65,16,106,65,128,16,16,24,32,5,65,127,106,33,8,32,1,41,3,0,34,14,121,34,13,167,33,1,65,1,33,9,2,64,3,64,32,11,33,10,32,1,32,11,121,34,12,167,79,4,64,3,64,32,1,32,14,32,13,32,12,125,134,32,10,133,34,10,121,34,12,167,79,13,0,11,11,32,8,4,64,65,0,33,7,3,64,32,7,65,1,106,33,7,32,1,32,10,66,8,134,34,10,121,34,12,167,79,4,64,3,64,32,1,32,14,32,13,32,12,125,134,32,10,133,34,10,121,34,12,167,79,13,0,11,11,32,7,32,8,71,13,0,11,11,32,11,167,33,7,32,9,69,13,1,32,6,65,16,106,32,7,65,3,116,106,32,10,55,3,0,32,11,66,255,1,84,33,9,32,11,66,1,124,34,10,33,11,32,10,66,128,2,82,13,0,11,32,6,65,144,16,106,65,128,16,16,24,66,63,32,13,125,66,63,131,33,16,66,0,33,11,3,64,32,11,32,16,134,34,15,33,10,32,1,32,15,121,34,12,167,79,4,64,32,15,33,10,3,64,32,1,32,14,32,13,32,12,125,134,32,10,133,34,10,121,34,12,167,79,13,0,11,11,32,6,65,144,16,106,32,11,167,65,3,116,106,32,10,32,15,132,55,3,0,32,11,66,1,124,34,10,33,11,32,10,66,128,2,82,13,0,11,32,6,41,3,16,34,10,65,55,32,1,107,34,7,65,63,113,173,136,167,34,1,65,255,1,77,4,64,32,6,65,144,16,106,32,1,65,3,116,106,41,3,0,33,11,32,6,65,8,106,32,5,16,30,32,6,65,0,54,2,152,32,32,6,32,6,41,3,8,55,3,144,32,2,64,32,5,69,4,64,32,6,65,0,54,2,152,32,12,1,11,32,6,65,144,32,106,32,5,16,33,11,32,0,65,8,106,32,6,65,16,106,65,128,16,16,14,26,32,0,65,136,16,106,32,6,65,144,16,106,65,128,16,16,14,26,32,0,32,5,54,2,160,32,32,0,32,4,54,2,156,32,32,0,32,3,54,2,152,32,32,0,32,7,54,2,164,32,32,0,65,0,32,3,32,5,107,34,1,32,1,32,3,75,27,54,2,168,32,32,0,32,11,32,10,66,8,134,66,1,132,133,55,3,136,32,32,0,66,0,55,3,144,32,32,0,66,127,32,2,65,63,113,173,134,66,127,133,55,3,0,32,6,65,144,32,106,16,56,32,6,65,160,32,106,36,0,15,11,32,1,65,128,2,65,152,128,192,0,16,37,0,11,32,7,65,128,2,65,168,128,192,0,16,37,0,11,251,4,1,11,127,35,0,65,48,107,34,2,36,0,32,2,65,36,106,65,188,132,192,0,54,2,0,32,2,65,3,58,0,40,32,2,66,128,128,128,128,128,4,55,3,8,32,2,32,0,54,2,32,32,2,65,0,54,2,24,32,2,65,0,54,2,16,2,64,2,64,2,64,32,1,40,2,8,34,10,69,4,64,32,1,65,20,106,40,2,0,34,4,69,13,1,32,1,40,2,0,33,3,32,1,40,2,16,33,0,32,4,65,3,116,65,120,106,65,3,118,65,1,106,34,7,33,5,3,64,32,3,65,4,106,40,2,0,34,4,4,64,32,2,40,2,32,32,3,40,2,0,32,4,32,2,40,2,36,40,2,12,17,3,0,13,4,11,32,0,40,2,0,32,2,65,8,106,32,0,65,4,106,40,2,0,17,2,0,13,3,32,0,65,8,106,33,0,32,3,65,8,106,33,3,32,5,65,127,106,34,5,13,0,11,12,1,11,32,1,65,12,106,40,2,0,34,0,69,13,0,32,0,65,5,116,34,11,65,96,106,65,5,118,65,1,106,33,7,32,1,40,2,0,33,3,3,64,32,3,65,4,106,40,2,0,34,0,4,64,32,2,40,2,32,32,3,40,2,0,32,0,32,2,40,2,36,40,2,12,17,3,0,13,3,11,32,2,32,5,32,10,106,34,4,65,28,106,45,0,0,58,0,40,32,2,32,4,65,4,106,41,2,0,66,32,137,55,3,8,32,4,65,24,106,40,2,0,33,6,32,1,40,2,16,33,8,65,0,33,9,65,0,33,0,2,64,2,64,2,64,32,4,65,20,106,40,2,0,65,1,107,14,2,0,2,1,11,32,6,65,3,116,32,8,106,34,12,40,2,4,65,15,71,13,1,32,12,40,2,0,40,2,0,33,6,11,65,1,33,0,11,32,2,32,6,54,2,20,32,2,32,0,54,2,16,32,4,65,16,106,40,2,0,33,0,2,64,2,64,2,64,32,4,65,12,106,40,2,0,65,1,107,14,2,0,2,1,11,32,0,65,3,116,32,8,106,34,6,40,2,4,65,15,71,13,1,32,6,40,2,0,40,2,0,33,0,11,65,1,33,9,11,32,2,32,0,54,2,28,32,2,32,9,54,2,24,32,8,32,4,40,2,0,65,3,116,106,34,0,40,2,0,32,2,65,8,106,32,0,40,2,4,17,2,0,13,2,32,3,65,8,106,33,3,32,11,32,5,65,32,106,34,5,71,13,0,11,11,65,0,33,0,32,7,32,1,40,2,4,73,34,3,69,13,1,32,2,40,2,32,32,1,40,2,0,32,7,65,3,116,106,65,0,32,3,27,34,1,40,2,0,32,1,40,2,4,32,2,40,2,36,40,2,12,17,3,0,69,13,1,11,65,1,33,0,11,32,2,65,48,106,36,0,32,0,11,205,4,1,4,127,32,0,32,1,16,90,33,2,2,64,2,64,2,64,32,0,16,86,13,0,32,0,40,2,0,33,3,2,64,32,0,16,75,69,4,64,32,1,32,3,106,33,1,32,0,32,3,16,91,34,0,65,252,138,192,0,40,2,0,71,13,1,32,2,40,2,4,65,3,113,65,3,71,13,2,65,244,138,192,0,32,1,54,2,0,32,0,32,1,32,2,16,61,15,11,32,1,32,3,106,65,16,106,33,0,12,2,11,32,3,65,128,2,79,4,64,32,0,16,17,12,1,11,32,0,65,12,106,40,2,0,34,4,32,0,65,8,106,40,2,0,34,5,71,4,64,32,5,32,4,54,2,12,32,4,32,5,54,2,8,12,1,11,65,228,135,192,0,65,228,135,192,0,40,2,0,65,126,32,3,65,3,118,119,113,54,2,0,11,32,2,16,73,4,64,32,0,32,1,32,2,16,61,12,2,11,2,64,65,128,139,192,0,40,2,0,32,2,71,4,64,32,2,65,252,138,192,0,40,2,0,71,13,1,65,252,138,192,0,32,0,54,2,0,65,244,138,192,0,65,244,138,192,0,40,2,0,32,1,106,34,1,54,2,0,32,0,32,1,16,65,15,11,65,128,139,192,0,32,0,54,2,0,65,248,138,192,0,65,248,138,192,0,40,2,0,32,1,106,34,1,54,2,0,32,0,32,1,65,1,114,54,2,4,32,0,65,252,138,192,0,40,2,0,71,13,1,65,244,138,192,0,65,0,54,2,0,65,252,138,192,0,65,0,54,2,0,15,11,32,2,16,85,34,3,32,1,106,33,1,2,64,32,3,65,128,2,79,4,64,32,2,16,17,12,1,11,32,2,65,12,106,40,2,0,34,4,32,2,65,8,106,40,2,0,34,2,71,4,64,32,2,32,4,54,2,12,32,4,32,2,54,2,8,12,1,11,65,228,135,192,0,65,228,135,192,0,40,2,0,65,126,32,3,65,3,118,119,113,54,2,0,11,32,0,32,1,16,65,32,0,65,252,138,192,0,40,2,0,71,13,1,65,244,138,192,0,32,1,54,2,0,11,15,11,32,1,65,128,2,79,4,64,32,0,32,1,16,16,15,11,32,1,65,3,118,34,2,65,3,116,65,236,135,192,0,106,33,1,2,127,65,228,135,192,0,40,2,0,34,3,65,1,32,2,116,34,2,113,4,64,32,1,40,2,8,12,1,11,65,228,135,192,0,32,2,32,3,114,54,2,0,32,1,11,33,2,32,1,32,0,54,2,8,32,2,32,0,54,2,12,32,0,32,1,54,2,12,32,0,32,2,54,2,8,11,235,2,1,3,127,2,64,2,64,2,64,2,64,32,1,65,9,79,4,64,65,16,65,8,16,66,32,1,75,13,1,12,2,11,32,0,16,4,33,3,12,2,11,65,16,65,8,16,66,33,1,11,65,128,128,124,65,8,65,8,16,66,65,20,65,8,16,66,106,65,16,65,8,16,66,106,107,65,119,113,65,125,106,34,4,65,0,65,16,65,8,16,66,65,2,116,107,34,2,32,2,32,4,75,27,32,1,107,32,0,77,13,0,32,1,65,16,32,0,65,4,106,65,16,65,8,16,66,65,123,106,32,0,75,27,65,8,16,66,34,4,106,65,16,65,8,16,66,106,65,124,106,16,4,34,2,69,13,0,32,2,16,93,33,0,2,64,32,1,65,127,106,34,3,32,2,113,69,4,64,32,0,33,1,12,1,11,32,2,32,3,106,65,0,32,1,107,113,16,93,33,2,65,16,65,8,16,66,33,3,32,0,16,85,32,2,65,0,32,1,32,2,32,0,107,32,3,75,27,106,34,1,32,0,107,34,2,107,33,3,32,0,16,75,69,4,64,32,1,32,3,16,55,32,0,32,2,16,55,32,0,32,2,16,11,12,1,11,32,0,40,2,0,33,0,32,1,32,3,54,2,4,32,1,32,0,32,2,106,54,2,0,11,32,1,16,75,13,1,32,1,16,85,34,2,65,16,65,8,16,66,32,4,106,77,13,1,32,1,32,4,16,90,33,0,32,1,32,4,16,55,32,0,32,2,32,4,107,34,4,16,55,32,0,32,4,16,11,12,1,11,32,3,15,11,32,1,16,92,32,1,16,75,26,11,216,2,1,3,127,35,0,65,16,107,34,2,36,0,32,0,40,2,0,33,0,2,64,32,1,65,255,0,77,4,64,32,0,40,2,8,34,3,32,0,65,4,106,40,2,0,70,4,64,32,0,32,3,16,23,32,0,40,2,8,33,3,11,32,0,32,3,65,1,106,54,2,8,32,0,40,2,0,32,3,106,32,1,58,0,0,12,1,11,32,2,65,0,54,2,12,2,127,32,1,65,128,16,79,4,64,32,1,65,128,128,4,79,4,64,32,2,32,1,65,63,113,65,128,1,114,58,0,15,32,2,32,1,65,18,118,65,240,1,114,58,0,12,32,2,32,1,65,6,118,65,63,113,65,128,1,114,58,0,14,32,2,32,1,65,12,118,65,63,113,65,128,1,114,58,0,13,65,4,12,2,11,32,2,32,1,65,63,113,65,128,1,114,58,0,14,32,2,32,1,65,12,118,65,224,1,114,58,0,12,32,2,32,1,65,6,118,65,63,113,65,128,1,114,58,0,13,65,3,12,1,11,32,2,32,1,65,63,113,65,128,1,114,58,0,13,32,2,32,1,65,6,118,65,192,1,114,58,0,12,65,2,11,33,1,32,0,65,4,106,40,2,0,32,0,65,8,106,34,4,40,2,0,34,3,107,32,1,73,4,64,32,0,32,3,32,1,16,22,32,4,40,2,0,33,3,11,32,0,40,2,0,32,3,106,32,2,65,12,106,32,1,16,14,26,32,4,32,1,32,3,106,54,2,0,11,32,2,65,16,106,36,0,65,0,11,185,2,1,7,127,2,64,32,2,65,15,77,4,64,32,0,33,3,12,1,11,32,0,65,0,32,0,107,65,3,113,34,4,106,33,5,32,4,4,64,32,0,33,3,32,1,33,6,3,64,32,3,32,6,45,0,0,58,0,0,32,6,65,1,106,33,6,32,3,65,1,106,34,3,32,5,73,13,0,11,11,32,5,32,2,32,4,107,34,2,65,124,113,34,7,106,33,3,2,64,32,1,32,4,106,34,4,65,3,113,4,64,32,7,65,1,72,13,1,32,4,65,3,116,34,1,65,24,113,33,8,65,0,32,1,107,65,24,113,33,9,32,4,65,124,113,34,6,65,4,106,33,1,32,6,40,2,0,33,6,3,64,32,5,32,6,32,8,118,32,1,40,2,0,34,6,32,9,116,114,54,2,0,32,1,65,4,106,33,1,32,5,65,4,106,34,5,32,3,73,13,0,11,12,1,11,32,7,65,1,72,13,0,32,4,33,1,3,64,32,5,32,1,40,2,0,54,2,0,32,1,65,4,106,33,1,32,5,65,4,106,34,5,32,3,73,13,0,11,11,32,2,65,3,113,33,2,32,4,32,7,106,33,1,11,32,2,65,1,78,4,64,32,2,32,3,106,33,2,3,64,32,3,32,1,45,0,0,58,0,0,32,1,65,1,106,33,1,32,3,65,1,106,34,3,32,2,73,13,0,11,11,32,0,11,183,2,2,5,127,1,126,35,0,65,48,107,34,4,36,0,65,39,33,2,2,64,32,0,66,144,206,0,84,4,64,32,0,33,7,12,1,11,3,64,32,4,65,9,106,32,2,106,34,3,65,124,106,32,0,32,0,66,144,206,0,128,34,7,66,144,206,0,126,125,167,34,5,65,255,255,3,113,65,228,0,110,34,6,65,1,116,65,232,133,192,0,106,47,0,0,59,0,0,32,3,65,126,106,32,5,32,6,65,228,0,108,107,65,255,255,3,113,65,1,116,65,232,133,192,0,106,47,0,0,59,0,0,32,2,65,124,106,33,2,32,0,66,255,193,215,47,86,32,7,33,0,13,0,11,11,32,7,167,34,3,65,227,0,74,4,64,32,2,65,126,106,34,2,32,4,65,9,106,106,32,7,167,34,3,32,3,65,255,255,3,113,65,228,0,110,34,3,65,228,0,108,107,65,255,255,3,113,65,1,116,65,232,133,192,0,106,47,0,0,59,0,0,11,2,64,32,3,65,10,78,4,64,32,2,65,126,106,34,2,32,4,65,9,106,106,32,3,65,1,116,65,232,133,192,0,106,47,0,0,59,0,0,12,1,11,32,2,65,127,106,34,2,32,4,65,9,106,106,32,3,65,48,106,58,0,0,11,32,1,32,4,65,9,106,32,2,106,65,39,32,2,107,16,6,32,4,65,48,106,36,0,11,164,2,1,5,127,32,0,66,0,55,2,16,32,0,2,127,65,0,32,1,65,128,2,73,13,0,26,65,31,32,1,65,255,255,255,7,75,13,0,26,32,1,65,6,32,1,65,8,118,103,34,2,107,118,65,1,113,32,2,65,1,116,107,65,62,106,11,34,2,54,2,28,32,2,65,2,116,65,244,137,192,0,106,33,3,32,0,33,4,2,64,2,64,2,64,2,64,65,232,135,192,0,40,2,0,34,5,65,1,32,2,116,34,6,113,4,64,32,3,40,2,0,33,3,32,2,16,64,33,2,32,3,16,85,32,1,71,13,1,32,3,33,2,12,2,11,65,232,135,192,0,32,5,32,6,114,54,2,0,32,3,32,0,54,2,0,12,3,11,32,1,32,2,116,33,5,3,64,32,3,32,5,65,29,118,65,4,113,106,65,16,106,34,6,40,2,0,34,2,69,13,2,32,5,65,1,116,33,5,32,2,34,3,16,85,32,1,71,13,0,11,11,32,2,40,2,8,34,1,32,4,54,2,12,32,2,32,4,54,2,8,32,4,32,2,54,2,12,32,4,32,1,54,2,8,32,0,65,0,54,2,24,15,11,32,6,32,0,54,2,0,11,32,0,32,3,54,2,24,32,4,32,4,54,2,8,32,4,32,4,54,2,12,11,182,2,1,5,127,32,0,40,2,24,33,4,2,64,2,64,32,0,32,0,40,2,12,70,4,64,32,0,65,20,65,16,32,0,65,20,106,34,1,40,2,0,34,3,27,106,40,2,0,34,2,13,1,65,0,33,1,12,2,11,32,0,40,2,8,34,2,32,0,40,2,12,34,1,54,2,12,32,1,32,2,54,2,8,12,1,11,32,1,32,0,65,16,106,32,3,27,33,3,3,64,32,3,33,5,32,2,34,1,65,20,106,34,3,40,2,0,34,2,69,4,64,32,1,65,16,106,33,3,32,1,40,2,16,33,2,11,32,2,13,0,11,32,5,65,0,54,2,0,11,2,64,32,4,69,13,0,2,64,32,0,32,0,40,2,28,65,2,116,65,244,137,192,0,106,34,2,40,2,0,71,4,64,32,4,65,16,65,20,32,4,40,2,16,32,0,70,27,106,32,1,54,2,0,32,1,13,1,12,2,11,32,2,32,1,54,2,0,32,1,13,0,65,232,135,192,0,65,232,135,192,0,40,2,0,65,126,32,0,40,2,28,119,113,54,2,0,15,11,32,1,32,4,54,2,24,32,0,40,2,16,34,2,4,64,32,1,32,2,54,2,16,32,2,32,1,54,2,24,11,32,0,65,20,106,40,2,0,34,0,69,13,0,32,1,65,20,106,32,0,54,2,0,32,0,32,1,54,2,24,11,11,111,1,12,127,65,148,139,192,0,40,2,0,34,2,69,4,64,65,164,139,192,0,65,255,31,54,2,0,65,0,15,11,65,140,139,192,0,33,6,3,64,32,2,34,1,40,2,8,33,2,32,1,40,2,4,33,3,32,1,40,2,0,33,4,32,1,65,12,106,40,2,0,26,32,1,33,6,32,5,65,1,106,33,5,32,2,13,0,11,65,164,139,192,0,32,5,65,255,31,32,5,65,255,31,75,27,54,2,0,32,8,11,162,2,2,4,127,1,126,35,0,65,48,107,34,2,36,0,32,1,65,4,106,33,4,2,64,32,1,40,2,4,4,64,65,132,131,192,0,40,2,0,33,5,12,1,11,32,1,40,2,0,33,3,32,2,66,0,55,2,12,32,2,65,132,131,192,0,40,2,0,34,5,54,2,8,32,2,32,2,65,8,106,54,2,20,32,2,65,40,106,32,3,65,16,106,41,2,0,55,3,0,32,2,65,32,106,32,3,65,8,106,41,2,0,55,3,0,32,2,32,3,41,2,0,55,3,24,32,2,65,20,106,32,2,65,24,106,16,10,26,32,4,65,8,106,32,2,65,16,106,40,2,0,54,2,0,32,4,32,2,41,3,8,55,2,0,11,32,2,65,32,106,34,3,32,4,65,8,106,40,2,0,54,2,0,32,1,65,12,106,65,0,54,2,0,32,4,41,2,0,33,6,32,1,65,8,106,65,0,54,2,0,32,1,32,5,54,2,4,32,2,32,6,55,3,24,65,12,65,4,16,70,34,1,69,4,64,65,12,65,4,16,89,0,11,32,1,32,2,41,3,24,55,2,0,32,1,65,8,106,32,3,40,2,0,54,2,0,32,0,65,244,131,192,0,54,2,4,32,0,32,1,54,2,0,32,2,65,48,106,36,0,11,137,2,1,4,127,35,0,65,48,107,34,4,36,0,2,64,32,2,32,3,106,34,3,32,2,79,4,64,65,4,33,2,32,1,40,2,4,34,6,65,1,116,34,5,32,3,32,5,32,3,75,27,34,3,65,4,32,3,65,4,75,27,34,3,65,255,255,255,255,3,113,32,3,71,4,64,65,0,33,2,11,32,3,65,2,116,33,5,2,64,32,6,4,64,32,1,40,2,0,33,7,32,4,65,40,106,65,4,54,2,0,32,4,32,6,65,2,116,54,2,36,32,4,32,7,54,2,32,12,1,11,32,4,65,0,54,2,32,11,32,4,65,16,106,32,5,32,2,32,4,65,32,106,16,28,65,1,33,2,32,4,40,2,16,65,1,71,4,64,32,4,40,2,20,33,2,32,1,32,3,54,2,4,32,1,32,2,54,2,0,65,0,33,2,12,2,11,32,4,65,8,106,32,4,40,2,20,32,4,65,24,106,40,2,0,16,71,32,0,32,4,41,3,8,55,2,4,12,1,11,32,0,32,3,54,2,4,32,0,65,8,106,65,0,54,2,0,65,1,33,2,11,32,0,32,2,54,2,0,32,4,65,48,106,36,0,11,138,2,1,3,127,35,0,65,32,107,34,4,36,0,65,1,33,5,65,224,135,192,0,65,224,135,192,0,40,2,0,34,6,65,1,106,54,2,0,2,64,65,168,139,192,0,40,2,0,65,1,70,4,64,65,172,139,192,0,40,2,0,65,1,106,33,5,12,1,11,65,168,139,192,0,65,1,54,2,0,11,65,172,139,192,0,32,5,54,2,0,2,64,2,64,32,6,65,0,72,32,5,65,2,75,114,13,0,32,4,32,3,54,2,28,32,4,32,2,54,2,24,65,212,135,192,0,40,2,0,34,2,65,127,76,13,0,65,212,135,192,0,32,2,65,1,106,34,2,54,2,0,65,212,135,192,0,65,220,135,192,0,40,2,0,34,3,4,127,65,216,135,192,0,40,2,0,32,4,65,8,106,32,0,32,1,40,2,16,17,0,0,32,4,32,4,41,3,8,55,3,16,32,4,65,16,106,32,3,40,2,20,17,0,0,65,212,135,192,0,40,2,0,5,32,2,11,65,127,106,54,2,0,32,5,65,1,77,13,1,11,0,11,35,0,65,16,107,34,2,36,0,32,2,32,1,54,2,12,32,2,32,0,54,2,8,0,11,187,1,1,2,127,35,0,65,32,107,34,3,36,0,2,64,32,1,32,2,106,34,2,32,1,73,13,0,32,0,65,4,106,40,2,0,34,1,65,1,116,34,4,32,2,32,4,32,2,75,27,34,2,65,8,32,2,65,8,75,27,33,2,2,64,32,1,4,64,32,3,65,24,106,65,1,54,2,0,32,3,32,1,54,2,20,32,3,32,0,40,2,0,54,2,16,12,1,11,32,3,65,0,54,2,16,11,32,3,32,2,32,3,65,16,106,16,29,32,3,40,2,0,65,1,70,4,64,32,3,65,8,106,40,2,0,34,0,69,13,1,32,3,40,2,4,32,0,16,89,0,11,32,3,40,2,4,33,1,32,0,65,4,106,32,2,54,2,0,32,0,32,1,54,2,0,32,3,65,32,106,36,0,15,11,16,78,0,11,187,1,1,3,127,35,0,65,32,107,34,2,36,0,2,64,32,1,65,1,106,34,3,32,1,73,13,0,32,0,65,4,106,40,2,0,34,1,65,1,116,34,4,32,3,32,4,32,3,75,27,34,3,65,8,32,3,65,8,75,27,33,3,2,64,32,1,4,64,32,2,65,24,106,65,1,54,2,0,32,2,32,1,54,2,20,32,2,32,0,40,2,0,54,2,16,12,1,11,32,2,65,0,54,2,16,11,32,2,32,3,32,2,65,16,106,16,29,32,2,40,2,0,65,1,70,4,64,32,2,65,8,106,40,2,0,34,0,69,13,1,32,2,40,2,4,32,0,16,89,0,11,32,2,40,2,4,33,1,32,0,65,4,106,32,3,54,2,0,32,0,32,1,54,2,0,32,2,65,32,106,36,0,15,11,16,78,0,11,145,1,1,2,127,32,1,65,15,75,4,64,32,0,65,0,32,0,107,65,3,113,34,3,106,33,2,32,3,4,64,3,64,32,0,65,0,58,0,0,32,0,65,1,106,34,0,32,2,73,13,0,11,11,32,2,32,1,32,3,107,34,1,65,124,113,34,3,106,33,0,32,3,65,1,78,4,64,3,64,32,2,65,0,54,2,0,32,2,65,4,106,34,2,32,0,73,13,0,11,11,32,1,65,3,113,33,1,11,32,1,65,1,78,4,64,32,0,32,1,106,33,1,3,64,32,0,65,0,58,0,0,32,0,65,1,106,34,0,32,1,73,13,0,11,11,11,171,1,1,2,127,35,0,65,48,107,34,2,36,0,32,1,65,4,106,33,3,32,1,40,2,4,69,4,64,32,1,40,2,0,33,1,32,2,66,0,55,2,12,32,2,65,132,131,192,0,40,2,0,54,2,8,32,2,32,2,65,8,106,54,2,20,32,2,65,40,106,32,1,65,16,106,41,2,0,55,3,0,32,2,65,32,106,32,1,65,8,106,41,2,0,55,3,0,32,2,32,1,41,2,0,55,3,24,32,2,65,20,106,32,2,65,24,106,16,10,26,32,3,65,8,106,32,2,65,16,106,40,2,0,54,2,0,32,3,32,2,41,3,8,55,2,0,11,32,0,65,244,131,192,0,54,2,4,32,0,32,3,54,2,0,32,2,65,48,106,36,0,11,155,1,1,1,127,35,0,65,48,107,34,5,36,0,32,5,65,8,106,32,1,16,48,32,5,40,2,12,33,1,32,5,65,16,106,32,5,40,2,8,32,2,32,3,32,4,65,0,71,16,8,32,3,4,64,32,2,16,5,11,32,1,32,1,40,2,0,65,127,106,54,2,0,32,5,65,40,106,32,5,65,24,106,40,2,0,34,3,54,2,0,32,5,32,5,41,3,16,55,3,32,32,5,40,2,36,32,3,75,4,64,32,5,65,32,106,32,3,16,45,32,5,40,2,40,33,3,11,32,5,40,2,32,33,1,32,0,32,3,54,2,4,32,0,32,1,54,2,0,32,5,65,48,106,36,0,11,158,1,1,2,127,35,0,65,48,107,34,4,36,0,32,4,65,8,106,32,1,16,48,32,4,40,2,12,33,1,32,4,40,2,8,33,5,32,4,32,2,54,2,32,32,4,65,16,106,32,5,32,4,65,32,106,32,3,65,0,71,16,32,32,1,32,1,40,2,0,65,127,106,54,2,0,32,4,65,40,106,32,4,65,24,106,40,2,0,34,1,54,2,0,32,4,32,4,41,3,16,55,3,32,32,4,40,2,36,32,1,75,4,64,32,4,65,32,106,32,1,16,45,32,4,40,2,40,33,1,11,32,4,40,2,32,33,2,32,0,32,1,54,2,4,32,0,32,2,54,2,0,32,4,65,48,106,36,0,11,166,1,1,2,127,2,64,2,64,2,64,32,2,4,64,65,1,33,4,32,1,65,0,78,13,1,12,2,11,32,0,32,1,54,2,4,65,1,33,4,12,1,11,2,64,2,64,2,64,2,64,32,3,40,2,0,34,5,4,64,32,3,40,2,4,34,3,69,4,64,32,1,13,2,12,4,11,32,5,32,3,32,2,32,1,16,67,34,3,69,13,2,12,4,11,32,1,69,13,2,11,32,1,32,2,16,70,34,3,13,2,11,32,0,32,1,54,2,4,32,2,33,1,12,3,11,32,2,33,3,11,32,0,32,3,54,2,4,65,0,33,4,12,1,11,65,0,33,1,11,32,0,32,4,54,2,0,32,0,65,8,106,32,1,54,2,0,11,151,1,1,2,127,2,64,2,64,2,64,2,64,2,127,2,64,2,64,2,127,65,1,34,3,32,1,65,0,72,13,0,26,32,2,40,2,0,34,4,69,13,1,32,2,40,2,4,34,2,13,4,32,1,13,2,65,1,12,3,11,33,3,65,0,33,1,12,6,11,32,1,13,0,65,1,12,1,11,32,1,65,1,16,70,11,34,2,69,13,1,12,2,11,32,4,32,2,65,1,32,1,16,67,34,2,13,1,11,32,0,32,1,54,2,4,65,1,33,1,12,1,11,32,0,32,2,54,2,4,65,0,33,3,11,32,0,32,3,54,2,0,32,0,65,8,106,32,1,54,2,0,11,113,1,3,127,35,0,65,16,107,34,3,36,0,2,64,2,64,2,64,32,1,32,1,65,255,255,255,255,3,113,70,4,64,32,1,65,2,116,34,2,65,0,72,13,1,32,2,69,13,2,32,2,65,4,16,70,34,4,13,3,32,2,65,4,16,89,0,11,16,78,0,11,32,3,65,8,106,32,1,65,0,16,71,16,78,0,11,65,4,33,4,11,32,0,32,1,54,2,4,32,0,32,4,54,2,0,32,3,65,16,106,36,0,11,141,1,1,5,127,2,64,2,64,32,1,40,2,4,34,3,32,2,79,4,64,32,3,69,13,2,32,3,65,2,116,33,3,32,1,40,2,0,33,4,32,2,65,2,116,34,5,69,4,64,65,4,33,6,32,3,69,13,2,32,4,16,5,12,2,11,32,4,32,3,65,4,32,5,16,67,34,6,13,1,32,0,32,5,54,2,4,32,0,65,8,106,65,4,54,2,0,65,1,33,7,12,2,11,65,220,129,192,0,65,36,65,128,130,192,0,16,47,0,11,32,1,32,2,54,2,4,32,1,32,6,54,2,0,11,32,0,32,7,54,2,0,11,152,1,1,3,127,35,0,65,32,107,34,4,36,0,32,4,65,8,106,32,2,40,2,0,34,5,16,1,34,2,16,35,32,4,32,2,54,2,24,32,4,32,4,40,2,12,54,2,20,32,4,32,4,40,2,8,34,6,54,2,16,32,5,32,6,32,2,65,0,16,0,34,2,65,36,79,4,64,32,2,16,2,11,32,4,32,4,65,16,106,34,2,40,2,8,54,2,4,32,4,32,2,40,2,0,54,2,0,32,0,32,1,32,4,40,2,0,32,4,40,2,4,32,3,16,8,32,4,65,16,106,34,0,40,2,4,4,64,32,0,40,2,0,16,5,11,32,4,65,32,106,36,0,11,127,1,3,127,32,0,40,2,4,32,0,40,2,8,34,2,107,32,1,73,4,64,32,0,32,2,32,1,16,43,32,0,40,2,8,33,2,11,32,0,40,2,0,32,2,65,2,116,106,33,3,32,1,65,2,79,4,64,32,1,65,127,106,33,4,3,64,32,3,65,0,54,2,0,32,3,65,4,106,33,3,32,4,65,127,106,34,4,13,0,11,32,1,32,2,106,65,127,106,33,2,11,32,0,32,1,4,127,32,3,65,0,54,2,0,32,2,65,1,106,5,32,2,11,54,2,8,11,148,1,1,2,127,35,0,65,16,107,34,3,36,0,32,0,65,20,106,40,2,0,33,4,2,64,2,127,2,64,2,64,32,0,65,4,106,40,2,0,14,2,0,1,3,11,32,4,13,2,65,0,33,0,65,132,131,192,0,12,1,11,32,4,13,1,32,0,40,2,0,34,4,40,2,4,33,0,32,4,40,2,0,11,33,4,32,3,32,0,54,2,4,32,3,32,4,54,2,0,32,3,65,168,132,192,0,32,1,40,2,8,32,2,16,21,0,11,32,3,65,0,54,2,4,32,3,32,0,54,2,0,32,3,65,148,132,192,0,32,1,40,2,8,32,2,16,21,0,11,86,1,2,127,35,0,65,16,107,34,2,36,0,2,64,2,64,32,1,65,0,78,4,64,32,1,69,13,1,32,1,16,54,34,3,13,2,32,1,65,1,16,89,0,11,32,2,65,8,106,32,1,65,0,16,71,16,78,0,11,65,1,33,3,11,32,0,32,1,54,2,4,32,0,32,3,54,2,0,32,2,65,16,106,36,0,11,117,1,3,127,32,0,32,0,16,92,34,0,65,8,16,66,32,0,107,34,2,16,90,33,0,65,248,138,192,0,32,1,32,2,107,34,1,54,2,0,65,128,139,192,0,32,0,54,2,0,32,0,32,1,65,1,114,54,2,4,65,8,65,8,16,66,33,2,65,20,65,8,16,66,33,3,65,16,65,8,16,66,33,4,32,0,32,1,16,90,32,4,32,3,32,2,65,8,107,106,106,54,2,4,65,156,139,192,0,65,128,128,128,1,54,2,0,11,108,1,1,127,35,0,65,48,107,34,3,36,0,32,3,32,1,54,2,4,32,3,32,0,54,2,0,32,3,65,28,106,65,2,54,2,0,32,3,65,44,106,65,14,54,2,0,32,3,66,2,55,2,12,32,3,65,216,133,192,0,54,2,8,32,3,65,14,54,2,36,32,3,32,3,65,32,106,54,2,24,32,3,32,3,54,2,40,32,3,32,3,65,4,106,54,2,32,32,3,65,8,106,32,2,16,57,0,11,84,1,1,127,35,0,65,32,107,34,2,36,0,32,2,32,0,40,2,0,54,2,4,32,2,65,24,106,32,1,65,16,106,41,2,0,55,3,0,32,2,65,16,106,32,1,65,8,106,41,2,0,55,3,0,32,2,32,1,41,2,0,55,3,8,32,2,65,4,106,32,2,65,8,106,16,10,32,2,65,32,106,36,0,11,81,1,1,127,35,0,65,192,32,107,34,2,36,0,2,64,32,1,4,64,32,1,40,2,0,13,1,32,1,65,0,54,2,0,32,2,65,8,106,32,1,65,184,32,16,14,26,32,0,32,2,65,16,106,65,176,32,16,14,26,32,1,16,5,32,2,65,192,32,106,36,0,15,11,16,82,0,11,16,83,0,11,81,1,1,127,35,0,65,192,32,107,34,1,36,0,32,1,65,16,106,32,0,65,176,32,16,14,26,65,184,32,65,8,16,70,34,0,69,4,64,65,184,32,65,8,16,89,0,11,32,0,65,0,54,2,0,32,0,65,4,106,32,1,65,12,106,65,180,32,16,14,26,32,1,65,192,32,106,36,0,32,0,11,80,1,1,127,35,0,65,224,192,0,107,34,6,36,0,32,6,32,0,173,32,1,173,66,32,134,132,55,3,176,32,32,6,32,6,65,176,32,106,32,2,32,3,32,4,32,5,16,9,32,6,65,176,32,106,32,6,65,176,32,16,14,26,32,6,65,176,32,106,16,40,32,6,65,224,192,0,106,36,0,11,78,1,2,127,32,0,40,2,0,34,3,65,4,106,40,2,0,32,3,65,8,106,34,4,40,2,0,34,0,107,32,2,73,4,64,32,3,32,0,32,2,16,22,32,4,40,2,0,33,0,11,32,3,40,2,0,32,0,106,32,1,32,2,16,14,26,32,4,32,0,32,2,106,54,2,0,65,0,11,71,1,1,127,35,0,65,16,107,34,3,36,0,32,3,32,0,32,1,32,2,16,20,2,64,32,3,40,2,0,65,1,70,4,64,32,3,65,8,106,40,2,0,34,0,69,13,1,32,3,40,2,4,32,0,16,89,0,11,32,3,65,16,106,36,0,15,11,16,78,0,11,71,1,1,127,35,0,65,16,107,34,2,36,0,32,2,32,0,32,1,65,1,16,20,2,64,32,2,40,2,0,65,1,70,4,64,32,2,65,8,106,40,2,0,34,0,69,13,1,32,2,40,2,4,32,0,16,89,0,11,32,2,65,16,106,36,0,15,11,16,78,0,11,69,1,1,127,35,0,65,16,107,34,2,36,0,32,2,32,0,32,1,16,31,2,64,32,2,40,2,0,65,1,70,4,64,32,2,65,8,106,40,2,0,34,0,69,13,1,32,2,40,2,4,32,0,16,89,0,11,32,2,65,16,106,36,0,15,11,16,78,0,11,75,0,2,64,2,127,32,1,65,128,128,196,0,71,4,64,65,1,32,0,40,2,24,32,1,32,0,65,28,106,40,2,0,40,2,16,17,2,0,13,1,26,11,32,2,13,1,65,0,11,15,11,32,0,40,2,24,32,2,65,0,32,0,65,28,106,40,2,0,40,2,12,17,3,0,11,71,1,1,127,35,0,65,32,107,34,3,36,0,32,3,65,20,106,65,0,54,2,0,32,3,65,148,133,192,0,54,2,16,32,3,66,1,55,2,4,32,3,32,1,54,2,28,32,3,32,0,54,2,24,32,3,32,3,65,24,106,54,2,0,32,3,32,2,16,57,0,11,58,1,1,127,2,64,32,1,4,64,32,1,40,2,0,34,2,65,127,70,13,1,32,1,32,2,65,1,106,54,2,0,32,0,32,1,54,2,4,32,0,32,1,65,8,106,54,2,0,15,11,16,82,0,11,16,83,0,11,63,1,1,127,35,0,65,224,192,0,107,34,4,36,0,32,4,65,128,128,192,0,32,0,32,1,32,2,32,3,16,9,32,4,65,176,32,106,32,4,65,176,32,16,14,26,32,4,65,176,32,106,16,40,32,4,65,224,192,0,106,36,0,11,68,1,2,127,32,1,40,2,4,33,2,32,1,40,2,0,33,3,65,8,65,4,16,70,34,1,69,4,64,65,8,65,4,16,89,0,11,32,1,32,2,54,2,4,32,1,32,3,54,2,0,32,0,65,132,132,192,0,54,2,4,32,0,32,1,54,2,0,11,57,1,1,127,32,1,65,16,118,64,0,33,2,32,0,65,0,54,2,8,32,0,65,0,32,1,65,128,128,124,113,32,2,65,127,70,34,1,27,54,2,4,32,0,65,0,32,2,65,16,116,32,1,27,54,2,0,11,104,1,3,127,35,0,65,16,107,34,1,36,0,32,0,40,2,12,34,2,69,4,64,65,140,131,192,0,65,43,65,212,131,192,0,16,47,0,11,32,0,40,2,8,34,3,69,4,64,65,140,131,192,0,65,43,65,228,131,192,0,16,47,0,11,32,1,32,2,54,2,8,32,1,32,0,54,2,4,32,1,32,3,54,2,0,32,1,40,2,0,32,1,40,2,4,32,1,40,2,8,16,34,0,11,42,0,2,64,32,0,65,124,75,13,0,32,0,69,4,64,65,4,15,11,32,0,32,0,65,125,73,65,2,116,16,70,34,0,69,13,0,32,0,15,11,0,11,34,1,1,127,2,64,32,0,65,1,16,12,34,1,69,13,0,32,1,16,93,16,75,13,0,32,1,32,0,16,24,11,32,1,11,42,0,32,0,32,0,40,2,4,65,1,113,32,1,114,65,2,114,54,2,4,32,0,32,1,106,65,4,106,34,0,32,0,40,2,0,65,1,114,54,2,0,11,32,1,1,127,2,64,32,0,40,2,4,34,1,69,13,0,32,0,40,2,0,32,1,65,2,116,69,13,0,16,5,11,11,52,1,1,127,35,0,65,16,107,34,2,36,0,32,2,32,1,54,2,12,32,2,32,0,54,2,8,32,2,65,148,133,192,0,54,2,4,32,2,65,148,133,192,0,54,2,0,32,2,16,52,0,11,30,0,2,64,32,0,65,4,106,40,2,0,69,13,0,32,0,40,2,0,34,0,69,13,0,32,0,16,5,11,11,32,1,1,127,2,64,32,0,40,2,4,34,1,69,13,0,32,0,65,8,106,40,2,0,69,13,0,32,1,16,5,11,11,33,0,32,0,32,1,65,3,114,54,2,4,32,0,32,1,106,65,4,106,34,0,32,0,40,2,0,65,1,114,54,2,0,11,35,0,32,2,32,2,40,2,4,65,126,113,54,2,4,32,0,32,1,65,1,114,54,2,4,32,0,32,1,106,32,1,54,2,0,11,28,1,1,127,35,0,65,176,32,107,34,1,36,0,32,1,32,0,16,39,32,1,65,176,32,106,36,0,11,25,1,1,127,32,0,40,2,16,34,1,4,127,32,1,5,32,0,65,20,106,40,2,0,11,11,18,0,65,0,65,25,32,0,65,1,118,107,32,0,65,31,70,27,11,22,0,32,0,32,1,65,1,114,54,2,4,32,0,32,1,106,32,1,54,2,0,11,16,0,32,0,32,1,106,65,127,106,65,0,32,1,107,113,11,12,0,32,0,32,1,32,2,32,3,16,7,11,11,0,32,1,4,64,32,0,16,5,11,11,15,0,32,0,65,1,116,34,0,65,0,32,0,107,114,11,8,0,32,0,32,1,16,12,11,16,0,32,0,32,2,54,2,4,32,0,32,1,54,2,0,11,19,0,32,0,65,132,132,192,0,54,2,4,32,0,32,1,54,2,0,11,13,0,32,0,45,0,4,65,2,113,65,1,118,11,10,0,65,0,32,0,107,32,0,113,11,11,0,32,0,45,0,4,65,3,113,69,11,12,0,32,0,32,1,65,3,114,54,2,4,11,13,0,32,0,40,2,0,32,0,40,2,4,106,11,17,0,65,240,132,192,0,65,17,65,132,133,192,0,16,47,0,11,14,0,32,0,40,2,0,26,3,64,12,0,11,0,11,11,0,32,0,53,2,0,32,1,16,15,11,11,0,32,0,35,0,106,36,0,35,0,11,12,0,65,152,130,192,0,65,27,16,84,0,11,13,0,65,179,130,192,0,65,207,0,16,84,0,11,9,0,32,0,32,1,16,3,0,11,10,0,32,0,40,2,4,65,120,113,11,10,0,32,0,40,2,4,65,1,113,11,10,0,32,0,40,2,12,65,1,113,11,10,0,32,0,40,2,12,65,1,118,11,25,0,32,0,32,1,65,208,135,192,0,40,2,0,34,0,65,1,32,0,27,17,0,0,0,11,7,0,32,0,32,1,106,11,7,0,32,0,32,1,107,11,7,0,32,0,65,8,106,11,7,0,32,0,65,120,106,11,12,0,66,203,147,239,186,234,202,252,189,107,11,13,0,66,209,174,152,196,153,131,178,247,132,127,11,13,0,66,192,168,233,135,216,232,146,217,222,0,11,3,0,1,11,3,0,1,11,11,186,7,1,0,65,128,128,192,0,11,176,7,5,168,178,223,5,243,61,0,115,114,99,47,99,104,117,110,107,101,114,46,114,115,0,0,8,0,16,0,14,0,0,0,89,0,0,0,41,0,0,0,8,0,16,0,14,0,0,0,123,0,0,0,13,0,0,0,8,0,16,0,14,0,0,0,182,0,0,0,41,0,0,0,8,0,16,0,14,0,0,0,183,0,0,0,23,0,0,0,8,0,16,0,14,0,0,0,190,0,0,0,41,0,0,0,8,0,16,0,14,0,0,0,191,0,0,0,41,0,0,0,8,0,16,0,14,0,0,0,192,0,0,0,23,0,0,0,4,0,0,0,0,0,0,0,47,114,117,115,116,99,47,99,102,97,52,97,99,54,54,99,49,57,52,48,52,54,102,54,51,49,99,101,48,55,54,99,55,53,53,49,54,101,99,102,100,101,98,55,55,101,101,47,108,105,98,114,97,114,121,47,97,108,108,111,99,47,115,114,99,47,114,97,119,95,118,101,99,46,114,115,84,114,105,101,100,32,116,111,32,115,104,114,105,110,107,32,116,111,32,97,32,108,97,114,103,101,114,32,99,97,112,97,99,105,116,121,144,0,16,0,76,0,0,0,171,1,0,0,9,0,0,0,4,0,0,0,0,0,0,0,110,117,108,108,32,112,111,105,110,116,101,114,32,112,97,115,115,101,100,32,116,111,32,114,117,115,116,114,101,99,117,114,115,105,118,101,32,117,115,101,32,111,102,32,97,110,32,111,98,106,101,99,116,32,100,101,116,101,99,116,101,100,32,119,104,105,99,104,32,119,111,117,108,100,32,108,101,97,100,32,116,111,32,117,110,115,97,102,101,32,97,108,105,97,115,105,110,103,32,105,110,32,114,117,115,116,0,0,1,0,0,0,0,0,0,0,99,97,108,108,101,100,32,96,79,112,116,105,111,110,58,58,117,110,119,114,97,112,40,41,96,32,111,110,32,97,32,96,78,111,110,101,96,32,118,97,108,117,101,108,105,98,114,97,114,121,47,115,116,100,47,115,114,99,47,112,97,110,105,99,107,105,110,103,46,114,115,0,183,1,16,0,28,0,0,0,240,1,0,0,31,0,0,0,183,1,16,0,28,0,0,0,241,1,0,0,30,0,0,0,2,0,0,0,12,0,0,0,4,0,0,0,3,0,0,0,4,0,0,0,8,0,0,0,4,0,0,0,5,0,0,0,6,0,0,0,16,0,0,0,4,0,0,0,7,0,0,0,8,0,0,0,4,0,0,0,8,0,0,0,4,0,0,0,9,0,0,0,10,0,0,0,4,0,0,0,4,0,0,0,4,0,0,0,11,0,0,0,12,0,0,0,13,0,0,0,108,105,98,114,97,114,121,47,97,108,108,111,99,47,115,114,99,47,114,97,119,95,118,101,99,46,114,115,99,97,112,97,99,105,116,121,32,111,118,101,114,102,108,111,119,0,0,0,84,2,16,0,28,0,0,0,6,2,0,0,5,0,0,0,16,0,0,0,0,0,0,0,1,0,0,0,17,0,0,0,105,110,100,101,120,32,111,117,116,32,111,102,32,98,111,117,110,100,115,58,32,116,104,101,32,108,101,110,32,105,115,32,32,98,117,116,32,116,104,101,32,105,110,100,101,120,32,105,115,32,0,0,164,2,16,0,32,0,0,0,196,2,16,0,18,0,0,0,48,48,48,49,48,50,48,51,48,52,48,53,48,54,48,55,48,56,48,57,49,48,49,49,49,50,49,51,49,52,49,53,49,54,49,55,49,56,49,57,50,48,50,49,50,50,50,51,50,52,50,53,50,54,50,55,50,56,50,57,51,48,51,49,51,50,51,51,51,52,51,53,51,54,51,55,51,56,51,57,52,48,52,49,52,50,52,51,52,52,52,53,52,54,52,55,52,56,52,57,53,48,53,49,53,50,53,51,53,52,53,53,53,54,53,55,53,56,53,57,54,48,54,49,54,50,54,51,54,52,54,53,54,54,54,55,54,56,54,57,55,48,55,49,55,50,55,51,55,52,55,53,55,54,55,55,55,56,55,57,56,48,56,49,56,50,56,51,56,52,56,53,56,54,56,55,56,56,56,57,57,48,57,49,57,50,57,51,57,52,57,53,57,54,57,55,57,56,57,57,0,131,1,9,112,114,111,100,117,99,101,114,115,2,8,108,97,110,103,117,97,103,101,1,4,82,117,115,116,0,12,112,114,111,99,101,115,115,101,100,45,98,121,3,5,114,117,115,116,99,37,49,46,53,57,46,48,45,110,105,103,104,116,108,121,32,40,99,102,97,52,97,99,54,54,99,32,50,48,50,50,45,48,49,45,48,54,41,6,119,97,108,114,117,115,6,48,46,49,57,46,48,12,119,97,115,109,45,98,105,110,100,103,101,110,18,48,46,50,46,55,57,32,40,57,98,48,100,52,48,99,55,97,41]),activate=()=>init(bytecode);let wasm;const heap=new Array(32).fill(void 0);heap.push(void 0,null,!0,!1);function getObject(i){return heap[i]}let heap_next=heap.length;function dropObject(i){i<36||(heap[i]=heap_next,heap_next=i)}function takeObject(i){const e=getObject(i);return dropObject(i),e}let cachedTextDecoder=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});cachedTextDecoder.decode();let cachegetUint8Memory0=null;function getUint8Memory0(){return(cachegetUint8Memory0===null||cachegetUint8Memory0.buffer!==wasm.memory.buffer)&&(cachegetUint8Memory0=new Uint8Array(wasm.memory.buffer)),cachegetUint8Memory0}function getStringFromWasm0(i,e){return cachedTextDecoder.decode(getUint8Memory0().subarray(i,i+e))}function getArrayU8FromWasm0(i,e){return getUint8Memory0().subarray(i/1,i/1+e)}function addHeapObject(i){heap_next===heap.length&&heap.push(heap.length+1);const e=heap_next;return heap_next=heap[e],heap[e]=i,e}function create$2(i,e,t,n){var r=wasm.create(i,e,t,n);return Rabin.__wrap(r)}const u32CvtShim=new Uint32Array(2);new BigUint64Array(u32CvtShim.buffer);function _assertClass(i,e){if(!(i instanceof e))throw new Error(`expected instance of ${e.name}`);return i.ptr}let cachegetInt32Memory0=null;function getInt32Memory0(){return(cachegetInt32Memory0===null||cachegetInt32Memory0.buffer!==wasm.memory.buffer)&&(cachegetInt32Memory0=new Int32Array(wasm.memory.buffer)),cachegetInt32Memory0}function getArrayI32FromWasm0(i,e){return getInt32Memory0().subarray(i/4,i/4+e)}let stack_pointer=32;function addBorrowedObject(i){if(stack_pointer==1)throw new Error("out of js stack");return heap[--stack_pointer]=i,stack_pointer}function cut_buffer(i,e,t){try{const o=wasm.__wbindgen_add_to_stack_pointer(-16);_assertClass(i,Rabin),wasm.cut_buffer(o,i.ptr,addBorrowedObject(e),t);var n=getInt32Memory0()[o/4+0],r=getInt32Memory0()[o/4+1],s=getArrayI32FromWasm0(n,r).slice();return wasm.__wbindgen_free(n,r*4),s}finally{wasm.__wbindgen_add_to_stack_pointer(16),heap[stack_pointer++]=void 0}}class Rabin{static __wrap(e){const t=Object.create(Rabin.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();wasm.__wbg_rabin_free(e)}}async function load(i,e){if(typeof Response=="function"&&i instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(i,e)}catch(n){if(i.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n);else throw n}const t=await i.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(i,e);return t instanceof WebAssembly.Instance?{instance:t,module:i}:t}}async function init(i){typeof i>"u"&&(i=new URL("wasm_bg.wasm",import.meta.url));const e={};e.wbg={},e.wbg.__wbg_copyTo_c2b6e812244947cd=function(r,s,o,a){var l=getObject(r).copyTo(getArrayU8FromWasm0(s,o),a>>>0);return addHeapObject(l)},e.wbg.__wbg_length_9cde16fa8cde1fcc=function(r){var s=getObject(r).length;return s},e.wbg.__wbindgen_object_drop_ref=function(r){takeObject(r)},e.wbg.__wbindgen_throw=function(r,s){throw new Error(getStringFromWasm0(r,s))};const{instance:t,module:n}=await load(i,e);return wasm=t.exports,init.__wbindgen_wasm_module=n,wasm}let wait=activate().then(()=>{wait={then:i=>i()}});const create$1=(i,e,t,n)=>wait.then(()=>{const r=create$2(i,e,t,n);return r.maxSize=t,r.minSize=e,r.windowSize=n,r}),cutBuffer=(i,e,t=!1)=>!t&e.byteLength<i.maxSize?none:cut_buffer(i,e,t),none=new Uint32Array(0),AVARAGE=262144,WINDOW=16,name$1="rabin",defaults=()=>configure({avg:AVARAGE}),configure=({avg:i,min:e=i/3|0,max:t=i+i/2|0,window:n=WINDOW})=>({avg:i,min:e,max:t,window:n}),create=async(i=defaults())=>({type:"Stateless",context:await create$1(Math.floor(Math.log2(i.avg)),i.min,i.max,i.window),name:name$1,cut}),cut=(i,e,t)=>cutBuffer(i,e,t),name="raw",code=85;function encode(i){return coerce(i)}function decode(i){return coerce(i)}const raw=Object.freeze(Object.defineProperty({__proto__:null,code,decode,encode,name},Symbol.toStringTag,{value:"Module"}));configure$2({fileChunkEncoder:raw,smallFileEncoder:raw});function encodeHeader(i){const e=encode$3({version:1,roots:i}),t=varint.encode(e.length),n=new Uint8Array(t.length+e.length);return n.set(t,0),n.set(e,t.length),n}function encodeBlock(i){const e=varint.encode(i.cid.bytes.length+i.bytes.length),t=new Uint8Array(e.length+i.cid.bytes.length+i.bytes.length);return t.set(e),t.set(i.cid.bytes,e.length),t.set(i.bytes,e.length+i.cid.bytes.length),t}class CAREncoderStream extends TransformStream{constructor(e=[]){super({start:t=>t.enqueue(encodeHeader(e)),transform:(t,n)=>{n.enqueue(encodeBlock(t)),this.finalBlock=t}}),this.finalBlock=null}}const ingestTree=async({root:i,onStatusUpdate:e})=>{const{readable:t,writable:n}=new TransformStream,r=createWriter({writable:n,settings:{chunker:await create()}}),s=[];t.pipeTo(new WritableStream({write(d){s.push(d)}})),e==null||e("Ingesting Tree…"),await c(i);const o=new ReadableStream({pull(d){s.length>0?d.enqueue(s.shift()):d.close()}});if(!s||s.length===0)throw new Error("No blocks generated.");const a=s.at(-1);if(!a)throw new Error("No root block found.");const l=[];return await o.pipeThrough(new CAREncoderStream([a.cid])).pipeTo(new WritableStream({write(d){l.push(d)}})),URL.createObjectURL(new Blob(l));async function c(d){var f;if(e==null||e(`Ingesting Directory: ${d.title}`),!d.children)throw new Error(`Not A Directory: ${d.title}`);const h=r.createDirectoryWriter();for(const p of d.children)if(!(!p.selected&&p.getSelectedNodes().length===0))if(p.children)await r.ready,h.set(p.title,await c(p));else{const y=r.createFileWriter(),u=await((f=p.data.handle)==null?void 0:f.getFile());if(!u)throw new Error(`Invalid File Handle: ${p.title}`);e==null||e(`Ingesting File: ${p.title}`),await u.stream().pipeTo(new WritableStream({async write(m){await r.ready,await y.write(m)}}));const g=await y.close();await r.ready,h.set(p.title,g)}return h.close()}},wunderFiles=({mount:i,...e})=>{const t=document.getElementById(i);return t.replaceChildren(),new Wunderbaum({element:t,selectMode:"hier",checkbox:!0,columns:[{id:"*",title:"Path",width:"300px"},{id:"childCount",title:"Children",width:"70px",classes:"wb-numeric"},{id:"size",title:"Size",width:"120px",classes:"wb-numeric"}],render:n=>{const{node:r}=n;for(const s of Object.values(n.renderColInfosById))if(s.elem){let o=r.data[s.id];typeof o=="number"&&(o=o.toLocaleString()),o&&s.id==="size"&&(o=`${o} B`),s.elem.textContent=o}},...e})},ingest=async(i,e,t,n)=>{if(!get$1(e))throw new Error("No tree defined.");try{set$1(t,proxy(await ingestTree({root:get$1(e).root,onStatusUpdate:r=>{get$1(n).push(r)}})))}finally{set$1(n,proxy([]))}};var root_2=template('<meta name="description" content="Collaborative Filesystem">'),root_4=template('<li class="svelte-17rz90c"> </li>'),root_3=template('<ol class="svelte-17rz90c"></ol>'),on_click=(i,e)=>{set$1(e,!0)},root_6=template('<button class="btn btn-primary bg-green">Generate CAR Archive</button>'),root_7=template('<a class="button svelte-17rz90c">Download <code>spider.car</code></a>'),root_5=template('<nav class="svelte-17rz90c"><button class="btn btn-primary bg-green">Begin A Spider</button> <!> <!></nav>'),root_9=template('<h2 class="svelte-17rz90c"> </h2>'),root_8=template('<div id="content" class="svelte-17rz90c"><!> <!></div>'),root_1=template('<header class="svelte-17rz90c"><h1 class="svelte-17rz90c">Mïmis: Collaborative Filesystem</h1></header> <main class="flex align-center svelte-17rz90c"><!> <!> <section id="display" class="svelte-17rz90c"><div id="fs-tree" class="svelte-17rz90c"></div> <!></section></main>',1);function _page(i,e){push$1(e,!0);let t=state(void 0),n=state(void 0),r=state(void 0),s=state(void 0),o=state(proxy([])),a=state(!1);const l=g=>{g.length>0&&readTree({dirs:g,onStatusUpdate:m=>{get$1(o).push(m)}}).then(m=>{const $=v=>{v.selected=!0;for(const b of v.children??[])$(b);return v};return m.map(v=>$(v))}).then(m=>{set$1(s,proxy(wunderFiles({source:m,mount:"fs-tree",activate:async $=>{$.node.data.handle?(set$1(t,proxy($.node.title)),set$1(n,proxy(await $.node.data.handle.getFile()))):set$1(t,proxy(set$1(n,void 0)))}})))}).finally(()=>{set$1(o,proxy([]))})};var c=root_1();head(g=>{var m=root_2();$document.title="Mïmis",append$1(g,m)});var d=sibling(first_child(c),2),h=child(d);if_block(h,()=>get$1(o).length>0,g=>{var m=root_3();each$1(m,21,()=>get$1(o).slice(-35),index,($,v)=>{var b=root_4(),w=child(b,!0);reset(b),template_effect(()=>set_text(w,get$1(v))),append$1($,b)}),reset(m),append$1(g,m)},g=>{var m=root_5(),$=child(m);$.__click=[on_click,a];var v=sibling($,2);if_block(v,()=>get$1(s),w=>{var _=root_6();_.__click=[ingest,s,r,o],append$1(w,_)});var b=sibling(v,2);if_block(b,()=>get$1(r),w=>{var _=root_7();template_effect(()=>set_attribute(_,"download",`spider.${new Date().toISOString()}.car`)),template_effect(()=>set_attribute(_,"href",get$1(r))),append$1(w,_)}),reset(m),append$1(g,m)});var f=sibling(h,2);BeginDialog(f,{get open(){return get$1(a)},set open(g){set$1(a,proxy(g))},onsubmit:l});var p=sibling(f,2),y=child(p),u=sibling(y,2);if_block(u,()=>get$1(n),g=>{var m=root_8(),$=child(m);if_block($,()=>get$1(t),b=>{var w=root_9(),_=child(w,!0);reset(w),template_effect(()=>set_text(_,get$1(t))),append$1(b,w)});var v=sibling($,2);Content(v,{get content(){return get$1(n)}}),reset(m),append$1(g,m)}),reset(p),reset(d),template_effect(()=>toggle_class(y,"accompanied",!!get$1(n))),append$1(i,c),pop()}delegate(["click"]);export{_page as component,_page$1 as universal};

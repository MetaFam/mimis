var f0=Object.defineProperty;var Cu=t=>{throw TypeError(t)};var d0=(t,e,r)=>e in t?f0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var x=(t,e,r)=>d0(t,typeof e!="symbol"?e+"":e,r),Bu=(t,e,r)=>e.has(t)||Cu("Cannot "+r);var sr=(t,e,r)=>(Bu(t,e,"read from private field"),r?r.call(t):e.get(t)),Kn=(t,e,r)=>e.has(t)?Cu("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Jn=(t,e,r,n)=>(Bu(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);import{c as no,a as Me,t as ut,d as h0}from"../chunks/B0aKdqwy.js";import{p as Or,f as ni,g as O,a as Pr,k as al,t as Ct,c as Ee,r as be,ai as Rt,s as Te,y as me,aI as fa,x as Pe,b as Ds,aK as Su,ah as io}from"../chunks/CQfgzv8N.js";import{s as Es,m as p0}from"../chunks/Dt4mPaC1.js";import{i as wn}from"../chunks/CO0nzAtl.js";import{h as g0}from"../chunks/CGHArPXR.js";import{s as Le,b as y0,c as da,d as ha,a as Yt,r as m0,e as w0}from"../chunks/D1uSOVHS.js";import{d as Ei,e as vn}from"../chunks/Dl6e9S1K.js";import{b as b0}from"../chunks/D2td8yzq.js";import{p as ke}from"../chunks/DNA0eAxf.js";import{b as mt}from"../chunks/BdSkgYt3.js";import{T as D0}from"../chunks/CQbym6Aj.js";import{g as vs,c as ko}from"../chunks/Cpj98o6Y.js";import{s as E0}from"../chunks/DUmr2o37.js";import{p as Ht}from"../chunks/CAuH8Fuy.js";import{t as Ui}from"../chunks/Dh12mlPd.js";import{c as xe}from"../chunks/CqmPMOek.js";import{e as v0}from"../chunks/BqyEloG3.js";import{c as A0}from"../chunks/DbcUevMW.js";import"../chunks/DiWnjXnh.js";function x0(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function Pn(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function C0(t){return new TextEncoder().encode(t)}function B0(t){return new TextDecoder().decode(t)}function S0(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,u=t.charAt(0),f=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function d(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var b=0,g=0,D=0,v=y.length;D!==v&&y[D]===0;)D++,b++;for(var E=(v-D)*c+1>>>0,F=new Uint8Array(E);D!==v;){for(var T=y[D],k=0,I=E-1;(T!==0||k<g)&&I!==-1;I--,k++)T+=256*F[I]>>>0,F[I]=T%a>>>0,T=T/a>>>0;if(T!==0)throw new Error("Non-zero carry");g=k,D++}for(var _=E-g;_!==E&&F[_]===0;)_++;for(var $=u.repeat(b);_<E;++_)$+=t.charAt(F[_]);return $}function p(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var b=0;if(y[b]!==" "){for(var g=0,D=0;y[b]===u;)g++,b++;for(var v=(y.length-b)*f+1>>>0,E=new Uint8Array(v);y[b];){var F=r[y.charCodeAt(b)];if(F===255)return;for(var T=0,k=v-1;(F!==0||T<D)&&k!==-1;k--,T++)F+=a*E[k]>>>0,E[k]=F%256>>>0,F=F/256>>>0;if(F!==0)throw new Error("Non-zero carry");D=T,b++}if(y[b]!==" "){for(var I=v-D;I!==v&&E[I]===0;)I++;for(var _=new Uint8Array(g+(v-I)),$=g;I!==v;)_[$++]=E[I++];return _}}}function w(y){var b=p(y);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:p,decode:w}}var F0=S0,k0=F0;let T0=class{constructor(e,r,n){x(this,"name");x(this,"prefix");x(this,"baseEncode");this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},I0=class{constructor(e,r,n){x(this,"name");x(this,"prefix");x(this,"baseDecode");x(this,"prefixCodePoint");this.name=e,this.prefix=r;const i=r.codePointAt(0);if(i===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=i,this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ul(this,e)}},N0=class{constructor(e){x(this,"decoders");this.decoders=e}or(e){return ul(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function ul(t,e){return new N0({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}let _0=class{constructor(e,r,n,i){x(this,"name");x(this,"prefix");x(this,"baseEncode");x(this,"baseDecode");x(this,"encoder");x(this,"decoder");this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new T0(e,r,n),this.decoder=new I0(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function As({name:t,prefix:e,encode:r,decode:n}){return new _0(t,e,r,n)}function vi({name:t,prefix:e,alphabet:r}){const{encode:n,decode:i}=k0(r,t);return As({prefix:e,name:t,encode:n,decode:s=>Pn(i(s))})}function O0(t,e,r,n){const i={};for(let c=0;c<e.length;++c)i[e[c]]=c;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,u=0,f=0;for(let c=0;c<s;++c){const d=i[t[c]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[f++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o}function P0(t,e,r){const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o!==0&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s}function tt({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return As({prefix:e,name:t,encode(i){return P0(i,n,r)},decode(i){return O0(i,n,r,t)}})}const Qe=vi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),U0=vi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),$0=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Qe,base58flickr:U0},Symbol.toStringTag,{value:"Module"})),Tr=tt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),L0=tt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),R0=tt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),M0=tt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),V0=tt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),H0=tt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),j0=tt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),z0=tt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),G0=tt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),q0=Object.freeze(Object.defineProperty({__proto__:null,base32:Tr,base32hex:V0,base32hexpad:j0,base32hexpadupper:z0,base32hexupper:H0,base32pad:R0,base32padupper:M0,base32upper:L0,base32z:G0},Symbol.toStringTag,{value:"Module"})),Ki=vi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),W0=vi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),K0=Object.freeze(Object.defineProperty({__proto__:null,base36:Ki,base36upper:W0},Symbol.toStringTag,{value:"Module"}));var J0=cl,Fu=128,Y0=127,Z0=~Y0,X0=Math.pow(2,31);function cl(t,e,r){e=e||[],r=r||0;for(var n=r;t>=X0;)e[r++]=t&255|Fu,t/=128;for(;t&Z0;)e[r++]=t&255|Fu,t>>>=7;return e[r]=t|0,cl.bytes=r-n+1,e}var Q0=To,ep=128,ku=127;function To(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw To.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&ku)<<i:(o&ku)*Math.pow(2,i),i+=7}while(o>=ep);return To.bytes=s-n,r}var tp=Math.pow(2,7),rp=Math.pow(2,14),np=Math.pow(2,21),ip=Math.pow(2,28),sp=Math.pow(2,35),op=Math.pow(2,42),ap=Math.pow(2,49),up=Math.pow(2,56),cp=Math.pow(2,63),lp=function(t){return t<tp?1:t<rp?2:t<np?3:t<ip?4:t<sp?5:t<op?6:t<ap?7:t<up?8:t<cp?9:10},fp={encode:J0,decode:Q0,encodingLength:lp},Zi=fp;function Io(t,e=0){return[Zi.decode(t,e),Zi.decode.bytes]}function Xi(t,e,r=0){return Zi.encode(t,e,r),e}function Qi(t){return Zi.encodingLength(t)}function ci(t,e){const r=e.byteLength,n=Qi(t),i=n+Qi(r),s=new Uint8Array(i+r);return Xi(t,s,0),Xi(r,s,n),s.set(e,i),new ga(t,r,e,s)}function pa(t){const e=Pn(t),[r,n]=Io(e),[i,s]=Io(e.subarray(n)),o=e.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new ga(r,i,o,e)}function dp(t,e){if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&x0(t.bytes,r.bytes)}}let ga=class{constructor(e,r,n,i){x(this,"code");x(this,"size");x(this,"digest");x(this,"bytes");this.code=e,this.size=r,this.digest=n,this.bytes=i}};function Tu(t,e){const{bytes:r,version:n}=t;switch(n){case 0:return pp(r,No(t),e??Qe.encoder);default:return gp(r,No(t),e??Tr.encoder)}}const Iu=new WeakMap;function No(t){const e=Iu.get(t);if(e==null){const r=new Map;return Iu.set(t,r),r}return e}var tl;let ee=class it{constructor(e,r,n,i){x(this,"code");x(this,"version");x(this,"multihash");x(this,"bytes");x(this,"/");x(this,tl,"CID");this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==Yn)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==yp)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return it.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=ci(e,r);return it.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return it.equals(this,e)}static equals(e,r){const n=r;return n!=null&&e.code===n.code&&e.version===n.version&&dp(e.multihash,n.multihash)}toString(e){return Tu(this,e)}toJSON(){return{"/":Tu(this)}}link(){return this}[(tl=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const r=e;if(r instanceof it)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:i,multihash:s,bytes:o}=r;return new it(n,i,s,o??Nu(n,i,s.bytes))}else if(r[mp]===!0){const{version:n,multihash:i,code:s}=r,o=pa(i);return it.create(n,s,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Yn)throw new Error(`Version 0 CID must use dag-pb (code: ${Yn}) block encoding`);return new it(e,r,n,n.bytes)}case 1:{const i=Nu(e,r,n.bytes);return new it(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return it.create(0,Yn,e)}static createV1(e,r){return it.create(1,e,r)}static decode(e){const[r,n]=it.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=it.inspectBytes(e),n=r.size-r.multihashSize,i=Pn(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");const s=i.subarray(r.multihashSize-r.digestSize),o=new ga(r.multihashCode,r.digestSize,s,i);return[r.version===0?it.createV0(o):it.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[d,p]=Io(e.subarray(r));return r+=p,d};let i=n(),s=Yn;if(i===18?(i=0,r=0):s=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const o=r,a=n(),u=n(),f=r+u,c=f-o;return{version:i,codec:s,multihashCode:a,digestSize:u,multihashSize:c,size:f}}static parse(e,r){const[n,i]=hp(e,r),s=it.decode(i);if(s.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return No(s).set(n,e),s}};function hp(t,e){switch(t[0]){case"Q":{const r=e??Qe;return[Qe.prefix,r.decode(`${Qe.prefix}${t}`)]}case Qe.prefix:{const r=e??Qe;return[Qe.prefix,r.decode(t)]}case Tr.prefix:{const r=e??Tr;return[Tr.prefix,r.decode(t)]}case Ki.prefix:{const r=e??Ki;return[Ki.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function pp(t,e,r){const{prefix:n}=r;if(n!==Qe.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=e.get(n);if(i==null){const s=r.encode(t).slice(1);return e.set(n,s),s}else return i}function gp(t,e,r){const{prefix:n}=r,i=e.get(n);if(i==null){const s=r.encode(t);return e.set(n,s),s}else return i}const Yn=112,yp=18;function Nu(t,e,r){const n=Qi(t),i=n+Qi(e),s=new Uint8Array(i+r.byteLength);return Xi(t,s,0),Xi(e,s,n),s.set(r,i),s}const mp=Symbol.for("@ipld/js-cid/CID");function An(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}const wp=vi({prefix:"9",name:"base10",alphabet:"0123456789"}),bp=Object.freeze(Object.defineProperty({__proto__:null,base10:wp},Symbol.toStringTag,{value:"Module"})),Dp=tt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ep=tt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),vp=Object.freeze(Object.defineProperty({__proto__:null,base16:Dp,base16upper:Ep},Symbol.toStringTag,{value:"Module"})),Ap=tt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),xp=Object.freeze(Object.defineProperty({__proto__:null,base2:Ap},Symbol.toStringTag,{value:"Module"})),ll=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),Cp=ll.reduce((t,e,r)=>(t[r]=e,t),[]),Bp=ll.reduce((t,e,r)=>{const n=e.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${e}`);return t[n]=r,t},[]);function Sp(t){return t.reduce((e,r)=>(e+=Cp[r],e),"")}function Fp(t){const e=[];for(const r of t){const n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);const i=Bp[n];if(i==null)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}const kp=As({prefix:"ðŸš€",name:"base256emoji",encode:Sp,decode:Fp}),Tp=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:kp},Symbol.toStringTag,{value:"Module"})),xs=tt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ip=tt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Cs=tt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Np=tt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),_p=Object.freeze(Object.defineProperty({__proto__:null,base64:xs,base64pad:Ip,base64url:Cs,base64urlpad:Np},Symbol.toStringTag,{value:"Module"})),Op=tt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Pp=Object.freeze(Object.defineProperty({__proto__:null,base8:Op},Symbol.toStringTag,{value:"Module"})),Up=As({prefix:"\0",name:"identity",encode:t=>B0(t),decode:t=>C0(t)}),$p=Object.freeze(Object.defineProperty({__proto__:null,identity:Up},Symbol.toStringTag,{value:"Module"})),Lp=new TextEncoder,Rp=new TextDecoder,Mp="json",Vp=512;function Hp(t){return Lp.encode(JSON.stringify(t))}function jp(t){return JSON.parse(Rp.decode(t))}const zp=Object.freeze(Object.defineProperty({__proto__:null,code:Vp,decode:jp,encode:Hp,name:Mp},Symbol.toStringTag,{value:"Module"})),Gp="raw",qp=85;function Wp(t){return Pn(t)}function Kp(t){return Pn(t)}const Jp=Object.freeze(Object.defineProperty({__proto__:null,code:qp,decode:Kp,encode:Wp,name:Gp},Symbol.toStringTag,{value:"Module"})),fl=0,Yp="identity",dl=Pn;function Zp(t){return ci(fl,dl(t))}const Kr={code:fl,name:Yp,encode:dl,digest:Zp},Xp=Object.freeze(Object.defineProperty({__proto__:null,identity:Kr},Symbol.toStringTag,{value:"Module"}));function hl({name:t,code:e,encode:r}){return new Qp(t,e,r)}class Qp{constructor(e,r,n){x(this,"name");x(this,"code");x(this,"encode");this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?ci(this.code,r):r.then(n=>ci(this.code,n))}else throw Error("Unknown type, must be binary type")}}function pl(t){return async e=>new Uint8Array(await crypto.subtle.digest(t,e))}const ya=hl({name:"sha2-256",code:18,encode:pl("SHA-256")}),eg=hl({name:"sha2-512",code:19,encode:pl("SHA-512")}),tg=Object.freeze(Object.defineProperty({__proto__:null,sha256:ya,sha512:eg},Symbol.toStringTag,{value:"Module"})),es={...$p,...xp,...Pp,...bp,...vp,...q0,...K0,...$0,..._p,...Tp},rg={...tg,...Xp},ng={raw:Jp,json:zp};function xn(t=0){return new Uint8Array(t)}function gl(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const _u=gl("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),so=gl("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=xn(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),yl={utf8:_u,"utf-8":_u,hex:es.base16,latin1:so,ascii:so,binary:so,...es};function Ze(t,e="utf8"){const r=yl[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}const ig=Math.pow(2,7),sg=Math.pow(2,14),og=Math.pow(2,21),ma=Math.pow(2,28),wa=Math.pow(2,35),ba=Math.pow(2,42),Da=Math.pow(2,49),Ae=128,st=127;function er(t){if(t<ig)return 1;if(t<sg)return 2;if(t<og)return 3;if(t<ma)return 4;if(t<wa)return 5;if(t<ba)return 6;if(t<Da)return 7;if(Number.MAX_SAFE_INTEGER!=null&&t>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function ml(t,e,r=0){switch(er(t)){case 8:e[r++]=t&255|Ae,t/=128;case 7:e[r++]=t&255|Ae,t/=128;case 6:e[r++]=t&255|Ae,t/=128;case 5:e[r++]=t&255|Ae,t/=128;case 4:e[r++]=t&255|Ae,t>>>=7;case 3:e[r++]=t&255|Ae,t>>>=7;case 2:e[r++]=t&255|Ae,t>>>=7;case 1:{e[r++]=t&255,t>>>=7;break}default:throw new Error("unreachable")}return e}function ag(t,e,r=0){switch(er(t)){case 8:e.set(r++,t&255|Ae),t/=128;case 7:e.set(r++,t&255|Ae),t/=128;case 6:e.set(r++,t&255|Ae),t/=128;case 5:e.set(r++,t&255|Ae),t/=128;case 4:e.set(r++,t&255|Ae),t>>>=7;case 3:e.set(r++,t&255|Ae),t>>>=7;case 2:e.set(r++,t&255|Ae),t>>>=7;case 1:{e.set(r++,t&255),t>>>=7;break}default:throw new Error("unreachable")}return e}function wl(t,e){let r=t[e],n=0;if(n+=r&st,r<Ae||(r=t[e+1],n+=(r&st)<<7,r<Ae)||(r=t[e+2],n+=(r&st)<<14,r<Ae)||(r=t[e+3],n+=(r&st)<<21,r<Ae)||(r=t[e+4],n+=(r&st)*ma,r<Ae)||(r=t[e+5],n+=(r&st)*wa,r<Ae)||(r=t[e+6],n+=(r&st)*ba,r<Ae)||(r=t[e+7],n+=(r&st)*Da,r<Ae))return n;throw new RangeError("Could not decode varint")}function ug(t,e){let r=t.get(e),n=0;if(n+=r&st,r<Ae||(r=t.get(e+1),n+=(r&st)<<7,r<Ae)||(r=t.get(e+2),n+=(r&st)<<14,r<Ae)||(r=t.get(e+3),n+=(r&st)<<21,r<Ae)||(r=t.get(e+4),n+=(r&st)*ma,r<Ae)||(r=t.get(e+5),n+=(r&st)*wa,r<Ae)||(r=t.get(e+6),n+=(r&st)*ba,r<Ae)||(r=t.get(e+7),n+=(r&st)*Da,r<Ae))return n;throw new RangeError("Could not decode varint")}function Bs(t,e,r=0){return e==null&&(e=xn(er(t))),e instanceof Uint8Array?ml(t,e,r):ag(t,e,r)}function Ai(t,e=0){return t instanceof Uint8Array?wl(t,e):ug(t,e)}function Jr(t,e){e==null&&(e=t.reduce((i,s)=>i+s.length,0));const r=xn(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}class cg{constructor(){x(this,"index",0);x(this,"input","")}new(e){return this.index=0,this.input=e,this}readAtomically(e){const r=this.index,n=e();return n===void 0&&(this.index=r),n}parseWith(e){const r=e();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{const r=this.readChar();if(r===e)return r})}readSeparator(e,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(e)===void 0))return n()})}readNumber(e,r,n,i){return this.readAtomically(()=>{let s=0,o=0;const a=this.peekChar();if(a===void 0)return;const u=a==="0",f=2**(8*i)-1;for(;;){const c=this.readAtomically(()=>{const d=this.readChar();if(d===void 0)return;const p=Number.parseInt(d,e);if(!Number.isNaN(p))return p});if(c===void 0)break;if(s*=e,s+=c,s>f||(o+=1,r!==void 0&&o>r))return}if(o!==0)return!n&&u&&o>1?void 0:s})}readIPv4Addr(){return this.readAtomically(()=>{const e=new Uint8Array(4);for(let r=0;r<e.length;r++){const n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;e[r]=n}return e})}readIPv6Addr(){const e=r=>{for(let n=0;n<r.length/2;n++){const i=n*2;if(n<r.length-3){const o=this.readSeparator(":",n,()=>this.readIPv4Addr());if(o!==void 0)return r[i]=o[0],r[i+1]=o[1],r[i+2]=o[2],r[i+3]=o[3],[i+4,!0]}const s=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(s===void 0)return[i,!1];r[i]=s>>8,r[i+1]=s&255}return[r.length,!1]};return this.readAtomically(()=>{const r=new Uint8Array(16),[n,i]=e(r);if(n===16)return r;if(i||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const s=new Uint8Array(14),o=16-(n+2),[a]=e(s.subarray(0,o));return r.set(s.subarray(0,a),16-a),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const bl=45,lg=15,Cn=new cg;function fg(t){if(!(t.length>lg))return Cn.new(t).parseWith(()=>Cn.readIPv4Addr())}function dg(t){if(t.includes("%")&&(t=t.split("%")[0]),!(t.length>bl))return Cn.new(t).parseWith(()=>Cn.readIPv6Addr())}function hg(t){if(t.includes("%")&&(t=t.split("%")[0]),!(t.length>bl))return Cn.new(t).parseWith(()=>Cn.readIPAddr())}function jt(t,e="utf8"){const r=yl[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}function pg(t){return!!fg(t)}function gg(t){return!!dg(t)}function Dl(t){return!!hg(t)}const Ou=pg,yg=gg,El=function(t){let e=0;if(t=t.toString().trim(),Ou(t)){const r=new Uint8Array(e+4);return t.split(/\./g).forEach(n=>{r[e++]=parseInt(n,10)&255}),r}if(yg(t)){const r=t.split(":",8);let n;for(n=0;n<r.length;n++){const s=Ou(r[n]);let o;s&&(o=El(r[n]),r[n]=Ze(o.slice(0,2),"base16")),o!=null&&++n<8&&r.splice(n,0,Ze(o.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);const s=[n,1];for(n=9-r.length;n>0;n--)s.push("0");r.splice.apply(r,s)}const i=new Uint8Array(e+16);for(n=0;n<r.length;n++){const s=parseInt(r[n],16);i[e++]=s>>8&255,i[e++]=s&255}return i}throw new Error("invalid ip address")},mg=function(t,e=0,r){e=~~e,r=r??t.length-e;const n=new DataView(t.buffer);if(r===4){const i=[];for(let s=0;s<r;s++)i.push(t[e+s]);return i.join(".")}if(r===16){const i=[];for(let s=0;s<r;s+=2)i.push(n.getUint16(e+s).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},Et=-1,li={},_o={},wg=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,Et,"ip6zone"],[43,8,"ipcidr"],[53,Et,"dns",!0],[54,Et,"dns4",!0],[55,Et,"dns6",!0],[56,Et,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,Et,"unix",!1,!0],[421,Et,"ipfs"],[421,Et,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,Et,"garlic64"],[448,0,"tls"],[449,Et,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,Et,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[481,Et,"http-path"],[777,Et,"memory"]];wg.forEach(t=>{const e=bg(...t);_o[e.code]=e,li[e.name]=e});function bg(t,e,r,n,i){return{code:t,size:e,name:r,resolvable:!!n,path:!!i}}function ye(t){if(typeof t=="number"){if(_o[t]!=null)return _o[t];throw new Error(`no protocol with code: ${t}`)}else if(typeof t=="string"){if(li[t]!=null)return li[t];throw new Error(`no protocol with name: ${t}`)}throw new Error(`invalid protocol id type: ${typeof t}`)}ye("ip4");ye("ip6");ye("ipcidr");function vl(t,e){switch(ye(t).code){case 4:case 41:return Eg(e);case 42:return uo(e);case 43:return Ze(e,"base10");case 6:case 273:case 33:case 132:return Al(e).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return uo(e);case 421:return Cg(e);case 444:return $u(e);case 445:return $u(e);case 466:return xg(e);case 481:return globalThis.encodeURIComponent(uo(e));default:return Ze(e,"base16")}}function Pu(t,e){switch(ye(t).code){case 4:return Uu(e);case 41:return Uu(e);case 42:return ao(e);case 43:return jt(e,"base10");case 6:case 273:case 33:case 132:return Ea(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return ao(e);case 421:return vg(e);case 444:return Bg(e);case 445:return Sg(e);case 466:return Ag(e);case 481:return ao(globalThis.decodeURIComponent(e));default:return jt(e,"base16")}}const oo=Object.values(es).map(t=>t.decoder),Dg=function(){let t=oo[0].or(oo[1]);return oo.slice(2).forEach(e=>t=t.or(e)),t}();function Uu(t){if(!Dl(t))throw new Error("invalid ip address");return El(t)}function Eg(t){const e=mg(t,0,t.length);if(e==null)throw new Error("ipBuff is required");if(!Dl(e))throw new Error("invalid ip address");return e}function Ea(t){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function Al(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function ao(t){const e=jt(t),r=Uint8Array.from(Bs(e.length));return Jr([r,e],r.length+e.length)}function uo(t){const e=Ai(t);if(t=t.slice(er(e)),t.length!==e)throw new Error("inconsistent lengths");return Ze(t)}function vg(t){let e;t[0]==="Q"||t[0]==="1"?e=pa(Qe.decode(`z${t}`)).bytes:e=ee.parse(t).multihash.bytes;const r=Uint8Array.from(Bs(e.length));return Jr([r,e],r.length+e.length)}function Ag(t){const e=Dg.decode(t),r=Uint8Array.from(Bs(e.length));return Jr([r,e],r.length+e.length)}function xg(t){const e=Ai(t),r=t.slice(er(e));if(r.length!==e)throw new Error("inconsistent lengths");return"u"+Ze(r,"base64url")}function Cg(t){const e=Ai(t),r=t.slice(er(e));if(r.length!==e)throw new Error("inconsistent lengths");return Ze(r,"base58btc")}function Bg(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const r=Tr.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=Ea(n);return Jr([r,i],r.length+i.length)}function Sg(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const r=Tr.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=Ea(n);return Jr([r,i],r.length+i.length)}function $u(t){const e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=Ze(e,"base32"),i=Al(r);return`${n}:${i}`}function Fg(t){t=Oo(t);const e=[],r=[];let n=null;const i=t.split("/").slice(1);if(i.length===1&&i[0]==="")return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let s=0;s<i.length;s++){const o=i[s],a=ye(o);if(a.size===0){e.push([a.code]),r.push([a.code]);continue}if(s++,s>=i.length)throw Bl("invalid address: "+t);if(a.path===!0){n=Oo(i.slice(s).join("/")),e.push([a.code,Pu(a.code,n)]),r.push([a.code,n]);break}const u=Pu(a.code,i[s]);e.push([a.code,u]),r.push([a.code,vl(a.code,u)])}return{string:xl(r),bytes:Cl(e),tuples:e,stringTuples:r,path:n}}function Lu(t){const e=[],r=[];let n=null,i=0;for(;i<t.length;){const s=Ai(t,i),o=er(s),a=ye(s),u=kg(a,t.slice(i+o));if(u===0){e.push([s]),r.push([s]),i+=o;continue}const f=t.slice(i+o,i+o+u);if(i+=u+o,i>t.length)throw Bl("Invalid address Uint8Array: "+Ze(t,"base16"));e.push([s,f]);const c=vl(s,f);if(r.push([s,c]),a.path===!0){n=c;break}}return{bytes:Uint8Array.from(t),string:xl(r),tuples:e,stringTuples:r,path:n}}function xl(t){const e=[];return t.map(r=>{const n=ye(r[0]);return e.push(n.name),r.length>1&&r[1]!=null&&e.push(r[1]),null}),Oo(e.join("/"))}function Cl(t){return Jr(t.map(e=>{const r=ye(e[0]);let n=Uint8Array.from(Bs(r.code));return e.length>1&&e[1]!=null&&(n=Jr([n,e[1]])),n}))}function kg(t,e){if(t.size>0)return t.size/8;if(t.size===0)return 0;{const r=Ai(e instanceof Uint8Array?e:Uint8Array.from(e));return r+er(r)}}function Oo(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function Bl(t){return new Error("Error parsing address: "+t)}const Tg=Symbol.for("nodejs.util.inspect.custom"),Sl=Symbol.for("@multiformats/js-multiaddr/multiaddr"),Ig=[ye("dns").code,ye("dns4").code,ye("dns6").code,ye("dnsaddr").code];class Ng extends Error{constructor(e="No available resolver"){super(e),this.name="NoAvailableResolverError"}}var rl,En,Fr,bi,Di;const mn=class mn{constructor(e){x(this,"bytes");Kn(this,En);Kn(this,Fr);Kn(this,bi);Kn(this,Di);x(this,rl,!0);e==null&&(e="");let r;if(e instanceof Uint8Array)r=Lu(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);r=Fg(e)}else if(ts(e))r=Lu(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=r.bytes,Jn(this,En,r.string),Jn(this,Fr,r.tuples),Jn(this,bi,r.stringTuples),Jn(this,Di,r.path)}toString(){return sr(this,En)}toJSON(){return this.toString()}toOptions(){let e,r,n,i,s="";const o=ye("tcp"),a=ye("udp"),u=ye("ip4"),f=ye("ip6"),c=ye("dns6"),d=ye("ip6zone");for(const[w,y]of this.stringTuples())w===d.code&&(s=`%${y??""}`),Ig.includes(w)&&(r=o.name,i=443,n=`${y??""}${s}`,e=w===c.code?6:4),(w===o.code||w===a.code)&&(r=ye(w).name,i=parseInt(y??"")),(w===u.code||w===f.code)&&(r=ye(w).name,n=`${y??""}${s}`,e=w===f.code?6:4);if(e==null||r==null||n==null||i==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:n,transport:r,port:i}}protos(){return sr(this,Fr).map(([e])=>Object.assign({},ye(e)))}protoCodes(){return sr(this,Fr).map(([e])=>e)}protoNames(){return sr(this,Fr).map(([e])=>ye(e).name)}tuples(){return sr(this,Fr).map(([e,r])=>r==null?[e]:[e,r])}stringTuples(){return sr(this,bi).map(([e,r])=>r==null?[e]:[e,r])}encapsulate(e){return e=new mn(e),new mn(this.toString()+e.toString())}decapsulate(e){const r=e.toString(),n=this.toString(),i=n.lastIndexOf(r);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new mn(n.slice(0,i))}decapsulateCode(e){const r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===e)return new mn(Cl(r.slice(0,n)));return this}getPeerId(){try{let e=[];this.stringTuples().forEach(([n,i])=>{n===li.p2p.code&&e.push([n,i]),n===li["p2p-circuit"].code&&(e=[])});const r=e.pop();if((r==null?void 0:r[1])!=null){const n=r[1];return n[0]==="Q"||n[0]==="1"?Ze(Qe.decode(`z${n}`),"base58btc"):Ze(ee.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){return sr(this,Di)}equals(e){return An(this.bytes,e.bytes)}async resolve(e){const r=this.protos().find(s=>s.resolvable);if(r==null)return[this];const n=_g.get(r.name);if(n==null)throw new Ng(`no available resolver for ${r.name}`);return(await n(this,e)).map(s=>wt(s))}nodeAddress(){const e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const r=(e??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[(rl=Sl,Tg)](){return`Multiaddr(${sr(this,En)})`}};En=new WeakMap,Fr=new WeakMap,bi=new WeakMap,Di=new WeakMap;let Po=mn;const _g=new Map;function ts(t){return!!(t!=null&&t[Sl])}function wt(t){return new Po(t)}const Og=["string","number","bigint","symbol"],Pg=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Ug(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";const e=typeof t;if(Og.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if($g(t))return"Buffer";const r=Lg(t);return r||"Object"}function $g(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function Lg(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(Pg.includes(e))return e}class A{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}A.uint=new A(0,"uint",!0);A.negint=new A(1,"negint",!0);A.bytes=new A(2,"bytes",!0);A.string=new A(3,"string",!0);A.array=new A(4,"array",!1);A.map=new A(5,"map",!1);A.tag=new A(6,"tag",!1);A.float=new A(7,"float",!0);A.false=new A(7,"false",!0);A.true=new A(7,"true",!0);A.null=new A(7,"null",!0);A.undefined=new A(7,"undefined",!0);A.break=new A(7,"break",!0);class M{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const Un=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Rg=new TextDecoder,Mg=new TextEncoder;function rs(t){return Un&&globalThis.Buffer.isBuffer(t)}function va(t){return t instanceof Uint8Array?rs(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const Vg=Un?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):Mu(t,e,r):(t,e,r)=>r-e>64?Rg.decode(t.subarray(e,r)):Mu(t,e,r),Fl=Un?t=>t.length>64?globalThis.Buffer.from(t):Ru(t):t=>t.length>64?Mg.encode(t):Ru(t),or=t=>Uint8Array.from(t),Aa=Un?(t,e,r)=>rs(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),Hg=Un?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),va(globalThis.Buffer.concat(t,e))):(t,e)=>{const r=new Uint8Array(e);let n=0;for(let i of t)n+i.length>r.length&&(i=i.subarray(0,r.length-n)),r.set(i,n),n+=i.length;return r},jg=Un?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function zg(t,e){if(rs(t)&&rs(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function Ru(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e}function Mu(t,e,r){const n=[];for(;e<r;){const i=t[e];let s=null,o=i>239?4:i>223?3:i>191?2:1;if(e+o<=r){let a,u,f,c;switch(o){case 1:i<128&&(s=i);break;case 2:a=t[e+1],(a&192)===128&&(c=(i&31)<<6|a&63,c>127&&(s=c));break;case 3:a=t[e+1],u=t[e+2],(a&192)===128&&(u&192)===128&&(c=(i&15)<<12|(a&63)<<6|u&63,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:a=t[e+1],u=t[e+2],f=t[e+3],(a&192)===128&&(u&192)===128&&(f&192)===128&&(c=(i&15)<<18|(a&63)<<12|(u&63)<<6|f&63,c>65535&&c<1114112&&(s=c))}}s===null?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),e+=o}return kl(n)}const Vu=4096;function kl(t){const e=t.length;if(e<=Vu)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Vu));return r}const Gg=256;class Tl{constructor(e=Gg){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const i=r.length-(this.maxCursor-this.cursor)-1;r.set(e,i)}else{if(r){const i=r.length-(this.maxCursor-this.cursor)-1;i<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=jg(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){const n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=Aa(n,0,this.cursor)}else r=Hg(this.chunks,this.cursor);return e&&this.reset(),r}}const Z="CBOR decode error:",Gr="CBOR encode error:";function $n(t,e,r){if(t.length-e<r)throw new Error(`${Z} not enough data for type`)}const et=[24,256,65536,4294967296,BigInt("18446744073709551616")];function rn(t,e,r){$n(t,e,1);const n=t[e];if(r.strict===!0&&n<et[0])throw new Error(`${Z} integer encoded in more bytes than necessary (strict decode)`);return n}function nn(t,e,r){$n(t,e,2);const n=t[e]<<8|t[e+1];if(r.strict===!0&&n<et[1])throw new Error(`${Z} integer encoded in more bytes than necessary (strict decode)`);return n}function sn(t,e,r){$n(t,e,4);const n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<et[2])throw new Error(`${Z} integer encoded in more bytes than necessary (strict decode)`);return n}function on(t,e,r){$n(t,e,8);const n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],i=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],s=(BigInt(n)<<BigInt(32))+BigInt(i);if(r.strict===!0&&s<et[3])throw new Error(`${Z} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(r.allowBigInt===!0)return s;throw new Error(`${Z} integers outside of the safe integer range are not supported`)}function qg(t,e,r,n){return new M(A.uint,rn(t,e+1,n),2)}function Wg(t,e,r,n){return new M(A.uint,nn(t,e+1,n),3)}function Kg(t,e,r,n){return new M(A.uint,sn(t,e+1,n),5)}function Jg(t,e,r,n){return new M(A.uint,on(t,e+1,n),9)}function an(t,e){return _t(t,0,e.value)}function _t(t,e,r){if(r<et[0]){const n=Number(r);t.push([e|n])}else if(r<et[1]){const n=Number(r);t.push([e|24,n])}else if(r<et[2]){const n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<et[3]){const n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{const n=BigInt(r);if(n<et[4]){const i=[e|27,0,0,0,0,0,0,0];let s=Number(n&BigInt(4294967295)),o=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=s&255,s=s>>8,i[7]=s&255,s=s>>8,i[6]=s&255,s=s>>8,i[5]=s&255,i[4]=o&255,o=o>>8,i[3]=o&255,o=o>>8,i[2]=o&255,o=o>>8,i[1]=o&255,t.push(i)}else throw new Error(`${Z} encountered BigInt larger than allowable range`)}}an.encodedSize=function(e){return _t.encodedSize(e.value)};_t.encodedSize=function(e){return e<et[0]?1:e<et[1]?2:e<et[2]?3:e<et[3]?5:9};an.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};function Yg(t,e,r,n){return new M(A.negint,-1-rn(t,e+1,n),2)}function Zg(t,e,r,n){return new M(A.negint,-1-nn(t,e+1,n),3)}function Xg(t,e,r,n){return new M(A.negint,-1-sn(t,e+1,n),5)}const xa=BigInt(-1),Il=BigInt(1);function Qg(t,e,r,n){const i=on(t,e+1,n);if(typeof i!="bigint"){const s=-1-i;if(s>=Number.MIN_SAFE_INTEGER)return new M(A.negint,s,9)}if(n.allowBigInt!==!0)throw new Error(`${Z} integers outside of the safe integer range are not supported`);return new M(A.negint,xa-BigInt(i),9)}function Ca(t,e){const r=e.value,n=typeof r=="bigint"?r*xa-Il:r*-1-1;_t(t,e.type.majorEncoded,n)}Ca.encodedSize=function(e){const r=e.value,n=typeof r=="bigint"?r*xa-Il:r*-1-1;return n<et[0]?1:n<et[1]?2:n<et[2]?3:n<et[3]?5:9};Ca.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};function xi(t,e,r,n){$n(t,e,r+n);const i=Aa(t,e+r,e+r+n);return new M(A.bytes,i,r+n)}function ey(t,e,r,n){return xi(t,e,1,r)}function ty(t,e,r,n){return xi(t,e,2,rn(t,e+1,n))}function ry(t,e,r,n){return xi(t,e,3,nn(t,e+1,n))}function ny(t,e,r,n){return xi(t,e,5,sn(t,e+1,n))}function iy(t,e,r,n){const i=on(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Z} 64-bit integer bytes lengths not supported`);return xi(t,e,9,i)}function ns(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===A.string?Fl(t.value):t.value),t.encodedBytes}function Ss(t,e){const r=ns(e);_t(t,e.type.majorEncoded,r.length),t.push(r)}Ss.encodedSize=function(e){const r=ns(e);return _t.encodedSize(r.length)+r.length};Ss.compareTokens=function(e,r){return sy(ns(e),ns(r))};function sy(t,e){return t.length<e.length?-1:t.length>e.length?1:zg(t,e)}function Ci(t,e,r,n,i){const s=r+n;$n(t,e,s);const o=new M(A.string,Vg(t,e+r,e+s),s);return i.retainStringBytes===!0&&(o.byteValue=Aa(t,e+r,e+s)),o}function oy(t,e,r,n){return Ci(t,e,1,r,n)}function ay(t,e,r,n){return Ci(t,e,2,rn(t,e+1,n),n)}function uy(t,e,r,n){return Ci(t,e,3,nn(t,e+1,n),n)}function cy(t,e,r,n){return Ci(t,e,5,sn(t,e+1,n),n)}function ly(t,e,r,n){const i=on(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Z} 64-bit integer string lengths not supported`);return Ci(t,e,9,i,n)}const fy=Ss;function Ln(t,e,r,n){return new M(A.array,n,r)}function dy(t,e,r,n){return Ln(t,e,1,r)}function hy(t,e,r,n){return Ln(t,e,2,rn(t,e+1,n))}function py(t,e,r,n){return Ln(t,e,3,nn(t,e+1,n))}function gy(t,e,r,n){return Ln(t,e,5,sn(t,e+1,n))}function yy(t,e,r,n){const i=on(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Z} 64-bit integer array lengths not supported`);return Ln(t,e,9,i)}function my(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Z} indefinite length items not allowed`);return Ln(t,e,1,1/0)}function Ba(t,e){_t(t,A.array.majorEncoded,e.value)}Ba.compareTokens=an.compareTokens;Ba.encodedSize=function(e){return _t.encodedSize(e.value)};function Rn(t,e,r,n){return new M(A.map,n,r)}function wy(t,e,r,n){return Rn(t,e,1,r)}function by(t,e,r,n){return Rn(t,e,2,rn(t,e+1,n))}function Dy(t,e,r,n){return Rn(t,e,3,nn(t,e+1,n))}function Ey(t,e,r,n){return Rn(t,e,5,sn(t,e+1,n))}function vy(t,e,r,n){const i=on(t,e+1,n);if(typeof i=="bigint")throw new Error(`${Z} 64-bit integer map lengths not supported`);return Rn(t,e,9,i)}function Ay(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Z} indefinite length items not allowed`);return Rn(t,e,1,1/0)}function Sa(t,e){_t(t,A.map.majorEncoded,e.value)}Sa.compareTokens=an.compareTokens;Sa.encodedSize=function(e){return _t.encodedSize(e.value)};function xy(t,e,r,n){return new M(A.tag,r,1)}function Cy(t,e,r,n){return new M(A.tag,rn(t,e+1,n),2)}function By(t,e,r,n){return new M(A.tag,nn(t,e+1,n),3)}function Sy(t,e,r,n){return new M(A.tag,sn(t,e+1,n),5)}function Fy(t,e,r,n){return new M(A.tag,on(t,e+1,n),9)}function Fa(t,e){_t(t,A.tag.majorEncoded,e.value)}Fa.compareTokens=an.compareTokens;Fa.encodedSize=function(e){return _t.encodedSize(e.value)};const ky=20,Ty=21,Iy=22,Ny=23;function _y(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${Z} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new M(A.null,null,1):new M(A.undefined,void 0,1)}function Oy(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${Z} indefinite length items not allowed`);return new M(A.break,void 0,1)}function ka(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${Z} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${Z} Infinity values are not supported`)}return new M(A.float,t,e)}function Py(t,e,r,n){return ka(Ia(t,e+1),3,n)}function Uy(t,e,r,n){return ka(Na(t,e+1),5,n)}function $y(t,e,r,n){return ka(Pl(t,e+1),9,n)}function Ta(t,e,r){const n=e.value;if(n===!1)t.push([A.float.majorEncoded|ky]);else if(n===!0)t.push([A.float.majorEncoded|Ty]);else if(n===null)t.push([A.float.majorEncoded|Iy]);else if(n===void 0)t.push([A.float.majorEncoded|Ny]);else{let i,s=!1;(!r||r.float64!==!0)&&(_l(n),i=Ia(Mt,1),n===i||Number.isNaN(n)?(Mt[0]=249,t.push(Mt.slice(0,3)),s=!0):(Ol(n),i=Na(Mt,1),n===i&&(Mt[0]=250,t.push(Mt.slice(0,5)),s=!0))),s||(Ly(n),i=Pl(Mt,1),Mt[0]=251,t.push(Mt.slice(0,9)))}}Ta.encodedSize=function(e,r){const n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){_l(n);let i=Ia(Mt,1);if(n===i||Number.isNaN(n))return 3;if(Ol(n),i=Na(Mt,1),n===i)return 5}return 9};const Nl=new ArrayBuffer(9),Tt=new DataView(Nl,1),Mt=new Uint8Array(Nl,0);function _l(t){if(t===1/0)Tt.setUint16(0,31744,!1);else if(t===-1/0)Tt.setUint16(0,64512,!1);else if(Number.isNaN(t))Tt.setUint16(0,32256,!1);else{Tt.setFloat32(0,t);const e=Tt.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)Tt.setUint16(0,31744,!1);else if(r===0)Tt.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{const i=r-127;i<-24?Tt.setUint16(0,0):i<-14?Tt.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):Tt.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function Ia(t,e){if(t.length-e<2)throw new Error(`${Z} not enough data for float16`);const r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;const n=r>>10&31,i=r&1023;let s;return n===0?s=i*2**-24:n!==31?s=(i+1024)*2**(n-25):s=i===0?1/0:NaN,r&32768?-s:s}function Ol(t){Tt.setFloat32(0,t,!1)}function Na(t,e){if(t.length-e<4)throw new Error(`${Z} not enough data for float32`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function Ly(t){Tt.setFloat64(0,t,!1)}function Pl(t,e){if(t.length-e<8)throw new Error(`${Z} not enough data for float64`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}Ta.compareTokens=an.compareTokens;function De(t,e,r){throw new Error(`${Z} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function Fs(t){return()=>{throw new Error(`${Z} ${t}`)}}const H=[];for(let t=0;t<=23;t++)H[t]=De;H[24]=qg;H[25]=Wg;H[26]=Kg;H[27]=Jg;H[28]=De;H[29]=De;H[30]=De;H[31]=De;for(let t=32;t<=55;t++)H[t]=De;H[56]=Yg;H[57]=Zg;H[58]=Xg;H[59]=Qg;H[60]=De;H[61]=De;H[62]=De;H[63]=De;for(let t=64;t<=87;t++)H[t]=ey;H[88]=ty;H[89]=ry;H[90]=ny;H[91]=iy;H[92]=De;H[93]=De;H[94]=De;H[95]=Fs("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)H[t]=oy;H[120]=ay;H[121]=uy;H[122]=cy;H[123]=ly;H[124]=De;H[125]=De;H[126]=De;H[127]=Fs("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)H[t]=dy;H[152]=hy;H[153]=py;H[154]=gy;H[155]=yy;H[156]=De;H[157]=De;H[158]=De;H[159]=my;for(let t=160;t<=183;t++)H[t]=wy;H[184]=by;H[185]=Dy;H[186]=Ey;H[187]=vy;H[188]=De;H[189]=De;H[190]=De;H[191]=Ay;for(let t=192;t<=215;t++)H[t]=xy;H[216]=Cy;H[217]=By;H[218]=Sy;H[219]=Fy;H[220]=De;H[221]=De;H[222]=De;H[223]=De;for(let t=224;t<=243;t++)H[t]=Fs("simple values are not supported");H[244]=De;H[245]=De;H[246]=De;H[247]=_y;H[248]=Fs("simple values are not supported");H[249]=Py;H[250]=Uy;H[251]=$y;H[252]=De;H[253]=De;H[254]=De;H[255]=Oy;const tr=[];for(let t=0;t<24;t++)tr[t]=new M(A.uint,t,1);for(let t=-1;t>=-24;t--)tr[31-t]=new M(A.negint,t,1);tr[64]=new M(A.bytes,new Uint8Array(0),1);tr[96]=new M(A.string,"",1);tr[128]=new M(A.array,0,1);tr[160]=new M(A.map,0,1);tr[244]=new M(A.false,!1,1);tr[245]=new M(A.true,!0,1);tr[246]=new M(A.null,null,1);function Ry(t){switch(t.type){case A.false:return or([244]);case A.true:return or([245]);case A.null:return or([246]);case A.bytes:return t.value.length?void 0:or([64]);case A.string:return t.value===""?or([96]):void 0;case A.array:return t.value===0?or([128]):void 0;case A.map:return t.value===0?or([160]):void 0;case A.uint:return t.value<24?or([Number(t.value)]):void 0;case A.negint:if(t.value>=-24)return or([31-Number(t.value)])}}const My={float64:!1,mapSorter:jy,quickEncodeToken:Ry};function Vy(){const t=[];return t[A.uint.major]=an,t[A.negint.major]=Ca,t[A.bytes.major]=Ss,t[A.string.major]=fy,t[A.array.major]=Ba,t[A.map.major]=Sa,t[A.tag.major]=Fa,t[A.float.major]=Ta,t}const Ul=Vy(),co=new Tl;class is{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${Gr} object contains circular references`);return new is(r,e)}}const Er={null:new M(A.null,null),undefined:new M(A.undefined,void 0),true:new M(A.true,!0),false:new M(A.false,!1),emptyArray:new M(A.array,0),emptyMap:new M(A.map,0)},Nr={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new M(A.float,t):t>=0?new M(A.uint,t):new M(A.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new M(A.uint,t):new M(A.negint,t)},Uint8Array(t,e,r,n){return new M(A.bytes,t)},string(t,e,r,n){return new M(A.string,t)},boolean(t,e,r,n){return t?Er.true:Er.false},null(t,e,r,n){return Er.null},undefined(t,e,r,n){return Er.undefined},ArrayBuffer(t,e,r,n){return new M(A.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new M(A.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[Er.emptyArray,new M(A.break)]:Er.emptyArray;n=is.createCheck(n,t);const i=[];let s=0;for(const o of t)i[s++]=Ji(o,r,n);return r.addBreakTokens?[new M(A.array,t.length),i,new M(A.break)]:[new M(A.array,t.length),i]},Object(t,e,r,n){const i=e!=="Object",s=i?t.keys():Object.keys(t),o=i?t.size:s.length;if(!o)return r.addBreakTokens===!0?[Er.emptyMap,new M(A.break)]:Er.emptyMap;n=is.createCheck(n,t);const a=[];let u=0;for(const f of s)a[u++]=[Ji(f,r,n),Ji(i?t.get(f):t[f],r,n)];return Hy(a,r),r.addBreakTokens?[new M(A.map,o),a,new M(A.break)]:[new M(A.map,o),a]}};Nr.Map=Nr.Object;Nr.Buffer=Nr.Uint8Array;for(const t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Nr[`${t}Array`]=Nr.DataView;function Ji(t,e={},r){const n=Ug(t),i=e&&e.typeEncoders&&e.typeEncoders[n]||Nr[n];if(typeof i=="function"){const o=i(t,n,e,r);if(o!=null)return o}const s=Nr[n];if(!s)throw new Error(`${Gr} unsupported type: ${n}`);return s(t,n,e,r)}function Hy(t,e){e.mapSorter&&t.sort(e.mapSorter)}function jy(t,e){const r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);const i=r.type.major,s=Ul[i].compareTokens(r,n);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function $l(t,e,r,n){if(Array.isArray(e))for(const i of e)$l(t,i,r,n);else r[e.type.major](t,e,n)}function Ll(t,e,r){const n=Ji(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){const i=r.quickEncodeToken(n);if(i)return i;const s=e[n.type.major];if(s.encodedSize){const o=s.encodedSize(n,r),a=new Tl(o);if(s(a,n,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return va(a.chunks[0])}}return co.reset(),$l(co,n,e,r),co.toBytes(!0)}function zy(t,e){return e=Object.assign({},My,e),Ll(t,Ul,e)}const Gy={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class qy{constructor(e,r={}){this._pos=0,this.data=e,this.options=r}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const e=this.data[this._pos];let r=tr[e];if(r===void 0){const n=H[e];if(!n)throw new Error(`${Z} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const i=e&31;r=n(this.data,this._pos,i,this.options)}return this._pos+=r.encodedLength,r}}const fi=Symbol.for("DONE"),ks=Symbol.for("BREAK");function Wy(t,e,r){const n=[];for(let i=0;i<t.value;i++){const s=di(e,r);if(s===ks){if(t.value===1/0)break;throw new Error(`${Z} got unexpected break to lengthed array`)}if(s===fi)throw new Error(`${Z} found array but not enough entries (got ${i}, expected ${t.value})`);n[i]=s}return n}function Ky(t,e,r){const n=r.useMaps===!0,i=n?void 0:{},s=n?new Map:void 0;for(let o=0;o<t.value;o++){const a=di(e,r);if(a===ks){if(t.value===1/0)break;throw new Error(`${Z} got unexpected break to lengthed map`)}if(a===fi)throw new Error(`${Z} found map but not enough entries (got ${o} [no key], expected ${t.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${Z} non-string keys not supported (got ${typeof a})`);if(r.rejectDuplicateMapKeys===!0&&(n&&s.has(a)||!n&&a in i))throw new Error(`${Z} found repeat map key "${a}"`);const u=di(e,r);if(u===fi)throw new Error(`${Z} found map but not enough entries (got ${o} [no value], expected ${t.value})`);n?s.set(a,u):i[a]=u}return n?s:i}function di(t,e){if(t.done())return fi;const r=t.next();if(r.type===A.break)return ks;if(r.type.terminal)return r.value;if(r.type===A.array)return Wy(r,t,e);if(r.type===A.map)return Ky(r,t,e);if(r.type===A.tag){if(e.tags&&typeof e.tags[r.value]=="function"){const n=di(t,e);return e.tags[r.value](n)}throw new Error(`${Z} tag not supported (${r.value})`)}throw new Error("unsupported")}function Jy(t,e){if(!(t instanceof Uint8Array))throw new Error(`${Z} data to decode must be a Uint8Array`);e=Object.assign({},Gy,e);const r=e.tokenizer||new qy(t,e),n=di(r,e);if(n===fi)throw new Error(`${Z} did not find any content to decode`);if(n===ks)throw new Error(`${Z} got unexpected break`);return[n,t.subarray(r.pos())]}function Rl(t,e){const[r,n]=Jy(t,e);if(n.length>0)throw new Error(`${Z} too many terminals, data makes no sense`);return r}const Ml=42;function Vl(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}function Yy(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;const e=ee.asCID(t);if(!e)return null;const r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new M(A.tag,Ml),new M(A.bytes,r)]}function Zy(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Xy(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const Uo={float64:!0,typeEncoders:{Object:Yy,undefined:Zy,number:Xy}},Qy={...Uo,typeEncoders:{...Uo.typeEncoders}};function em(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return ee.decode(t.subarray(1))}const ss={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};ss.tags[Ml]=em;const tm={...ss,tags:ss.tags.slice()},rm="dag-cbor",nm=113,Hl=t=>zy(t,Uo),jl=t=>Rl(Vl(t),ss),im=Object.freeze(Object.defineProperty({__proto__:null,code:nm,decode:jl,decodeOptions:tm,encode:Hl,encodeOptions:Qy,name:rm,toByteView:Vl},Symbol.toStringTag,{value:"Module"}));class sm extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){const r=this.inRecursive[this.inRecursive.length-1];r&&(r.type===A.array&&(r.elements++,r.elements!==1&&e.push([44])),r.type===A.map&&(r.elements++,r.elements!==1&&(r.elements%2===1?e.push([44]):e.push([58]))))}[A.uint.major](e,r){this.prefix(e);const n=String(r.value),i=[];for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);e.push(i)}[A.negint.major](e,r){this[A.uint.major](e,r)}[A.bytes.major](e,r){throw new Error(`${Gr} unsupported type: Uint8Array`)}[A.string.major](e,r){this.prefix(e);const n=Fl(JSON.stringify(r.value));e.push(n.length>32?va(n):n)}[A.array.major](e,r){this.prefix(e),this.inRecursive.push({type:A.array,elements:0}),e.push([91])}[A.map.major](e,r){this.prefix(e),this.inRecursive.push({type:A.map,elements:0}),e.push([123])}[A.tag.major](e,r){}[A.float.major](e,r){if(r.type.name==="break"){const o=this.inRecursive.pop();if(o){if(o.type===A.array)e.push([93]);else if(o.type===A.map)e.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(r.value===void 0)throw new Error(`${Gr} unsupported type: undefined`);if(this.prefix(e),r.type.name==="true"){e.push([116,114,117,101]);return}else if(r.type.name==="false"){e.push([102,97,108,115,101]);return}else if(r.type.name==="null"){e.push([110,117,108,108]);return}const n=String(r.value),i=[];let s=!1;for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o),!s&&(i[o]===46||i[o]===101||i[o]===69)&&(s=!0);s||(i.push(46),i.push(48)),e.push(i)}}function om(t,e){if(Array.isArray(t[0])||Array.isArray(e[0]))throw new Error(`${Gr} complex map keys are not supported`);const r=t[0],n=e[0];if(r.type!==A.string||n.type!==A.string)throw new Error(`${Gr} non-string map keys are not supported`);if(r<n)return-1;if(r>n)return 1;throw new Error(`${Gr} unexpected duplicate map keys, this is not supported`)}const am={addBreakTokens:!0,mapSorter:om};function um(t,e){return e=Object.assign({},am,e),Ll(t,new sm,e)}class zl{constructor(e,r={}){this._pos=0,this.data=e,this.options=r,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;e===32||e===9||e===13||e===10;)e=this.data[++this._pos]}expect(e){if(this.data.length-this._pos<e.length)throw new Error(`${Z} unexpected end of input at position ${this._pos}`);for(let r=0;r<e.length;r++)if(this.data[this._pos++]!==e[r])throw new Error(`${Z} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){const e=this._pos;let r=!1,n=!1;const i=a=>{for(;!this.done();){const u=this.ch();if(a.includes(u))this._pos++;else break}};if(this.ch()===45&&(r=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,n=!0;else return new M(A.uint,0,this._pos-e);if(i([48,49,50,51,52,53,54,55,56,57]),r&&this._pos===e+1)throw new Error(`${Z} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${Z} unexpected token at position ${this._pos}`);n=!0,this._pos++,i([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,i([48,49,50,51,52,53,54,55,56,57]));const s=String.fromCharCode.apply(null,this.data.subarray(e,this._pos)),o=parseFloat(s);return n?new M(A.float,o,this._pos-e):this.options.allowBigInt!==!0||Number.isSafeInteger(o)?new M(o>=0?A.uint:A.negint,o,this._pos-e):new M(o>=0?A.uint:A.negint,BigInt(s),this._pos-e)}parseString(){if(this.ch()!==34)throw new Error(`${Z} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let s=this._pos,o=0;s<this.data.length&&o<65536;s++,o++){const a=this.data[s];if(a===92||a<32||a>=128)break;if(a===34){const u=String.fromCharCode.apply(null,this.data.subarray(this._pos,s));return this._pos=s+1,new M(A.string,u,o)}}const e=this._pos,r=[],n=()=>{if(this._pos+4>=this.data.length)throw new Error(`${Z} unexpected end of unicode escape sequence at position ${this._pos}`);let s=0;for(let o=0;o<4;o++){let a=this.ch();if(a>=48&&a<=57)a-=48;else if(a>=97&&a<=102)a=a-97+10;else if(a>=65&&a<=70)a=a-65+10;else throw new Error(`${Z} unexpected unicode escape character at position ${this._pos}`);s=s*16+a,this._pos++}return s},i=()=>{const s=this.ch();let o=null,a=s>239?4:s>223?3:s>191?2:1;if(this._pos+a>this.data.length)throw new Error(`${Z} unexpected unicode sequence at position ${this._pos}`);let u,f,c,d;switch(a){case 1:s<128&&(o=s);break;case 2:u=this.data[this._pos+1],(u&192)===128&&(d=(s&31)<<6|u&63,d>127&&(o=d));break;case 3:u=this.data[this._pos+1],f=this.data[this._pos+2],(u&192)===128&&(f&192)===128&&(d=(s&15)<<12|(u&63)<<6|f&63,d>2047&&(d<55296||d>57343)&&(o=d));break;case 4:u=this.data[this._pos+1],f=this.data[this._pos+2],c=this.data[this._pos+3],(u&192)===128&&(f&192)===128&&(c&192)===128&&(d=(s&15)<<18|(u&63)<<12|(f&63)<<6|c&63,d>65535&&d<1114112&&(o=d))}o===null?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|o&1023),r.push(o),this._pos+=a};for(;!this.done();){const s=this.ch();let o;switch(s){case 92:if(this._pos++,this.done())throw new Error(`${Z} unexpected string termination at position ${this._pos}`);switch(o=this.ch(),this._pos++,o){case 34:case 39:case 92:case 47:r.push(o);break;case 98:r.push(8);break;case 116:r.push(9);break;case 110:r.push(10);break;case 102:r.push(12);break;case 114:r.push(13);break;case 117:r.push(n());break;default:throw new Error(`${Z} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new M(A.string,kl(r),this._pos-e);default:if(s<32)throw new Error(`${Z} invalid control character at position ${this._pos}`);s<128?(r.push(s),this._pos++):i()}}throw new Error(`${Z} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new M(A.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new M(A.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new M(A.null,null,4);case 102:return this.expect([102,97,108,115,101]),new M(A.false,!1,5);case 116:return this.expect([116,114,117,101]),new M(A.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${Z} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new M(A.break,void 0,1);if(this.ch()!==44)throw new Error(`${Z} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new M(A.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new M(A.break,void 0,1);if(this.ch()!==44)throw new Error(`${Z} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new M(A.break,void 0,1);const e=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${Z} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${Z} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}}function cm(t,e){return e=Object.assign({tokenizer:new zl(t,e)},e),Rl(t,e)}function lm(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}function fm(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;const e=ee.asCID(t);if(!e)return null;const r=e.toString();return[new M(A.map,1/0,1),new M(A.string,"/",1),new M(A.string,r,r.length),new M(A.break,void 0,1)]}function os(t){const e=xs.encode(t).slice(1);return[new M(A.map,1/0,1),new M(A.string,"/",1),new M(A.map,1/0,1),new M(A.string,"bytes",5),new M(A.string,e,e.length),new M(A.break,void 0,1),new M(A.break,void 0,1)]}function Ut(t){return os(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function dm(t){return os(new Uint8Array(t))}function hm(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function pm(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const gm={typeEncoders:{Object:fm,Buffer:os,Uint8Array:os,Int8Array:Ut,Uint16Array:Ut,Int16Array:Ut,Uint32Array:Ut,Int32Array:Ut,Float32Array:Ut,Float64Array:Ut,Uint8ClampedArray:Ut,BigInt64Array:Ut,BigUint64Array:Ut,DataView:Ut,ArrayBuffer:dm,undefined:hm,number:pm}};class ym extends zl{constructor(e,r){super(e,r),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const e=this._next();if(e.type===A.map){const r=this._next();if(r.type===A.string&&r.value==="/"){const n=this._next();if(n.type===A.string){if(this._next().type!==A.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new M(A.tag,42,0)}if(n.type===A.map){const i=this._next();if(i.type===A.string&&i.value==="bytes"){const s=this._next();if(s.type===A.string){for(let a=0;a<2;a++)if(this._next().type!==A.break)throw new Error("Invalid encoded Bytes form");const o=xs.decode(`m${s.value}`);return new M(A.bytes,o,s.value.length)}this.tokenBuffer.push(s)}this.tokenBuffer.push(i)}this.tokenBuffer.push(n)}this.tokenBuffer.push(r)}return e}}const $o={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};$o.tags[42]=ee.parse;const mm="dag-json",wm=297,Gl=t=>um(t,gm),ql=t=>{const e=lm(t),r=Object.assign($o,{tokenizer:new ym(e,$o)});return cm(e,r)},Hu=t=>bm.decode(Gl(t)),bm=new TextDecoder,Dm=t=>ql(Em.encode(t)),Em=new TextEncoder,vm=Object.freeze(Object.defineProperty({__proto__:null,code:wm,decode:ql,encode:Gl,format:Hu,name:mm,parse:Dm,stringify:Hu},Symbol.toStringTag,{value:"Module"})),Am=new TextDecoder;function _a(t,e){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");const i=t[e++];if(r+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[r,e]}function as(t,e){let r;[r,e]=_a(t,e);const n=e+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,n),n]}function Wl(t,e){let r;return[r,e]=_a(t,e),[r&7,r>>3,e]}function xm(t){const e={},r=t.length;let n=0;for(;n<r;){let i,s;if([i,s,n]=Wl(t,n),s===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=as(t,n)}else if(s===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let o;[o,n]=as(t,n),e.Name=Am.decode(o)}else if(s===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=_a(t,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${s}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function Cm(t){const e=t.length;let r=0,n,i=!1,s;for(;r<e;){let a,u;if([a,u,r]=Wl(t,r),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(u===1){if(s)throw new Error("protobuf: (PBNode) duplicate Data section");[s,r]=as(t,r),n&&(i=!0)}else if(u===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let f;[f,r]=as(t,r),n.push(xm(f))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${u}`)}if(r>e)throw new Error("protobuf: (PBNode) unexpected end of data");const o={};return s&&(o.Data=s),o.Links=n||[],o}const Kl=new TextEncoder,ju=2**32,Bm=2**31;function Sm(t,e){let r=e.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");r=ii(e,r,t.Tsize)-1,e[r]=24}if(typeof t.Name=="string"){const n=Kl.encode(t.Name);r-=n.length,e.set(n,r),r=ii(e,r,n.length)-1,e[r]=18}return t.Hash&&(r-=t.Hash.length,e.set(t.Hash,r),r=ii(e,r,t.Hash.length)-1,e[r]=10),e.length-r}function Fm(t){const e=Tm(t),r=new Uint8Array(e);let n=e;if(t.Data&&(n-=t.Data.length,r.set(t.Data,n),n=ii(r,n,t.Data.length)-1,r[n]=10),t.Links)for(let i=t.Links.length-1;i>=0;i--){const s=Sm(t.Links[i],r.subarray(0,n));n-=s,n=ii(r,n,s)-1,r[n]=18}return r}function km(t){let e=0;if(t.Hash){const r=t.Hash.length;e+=1+r+bn(r)}if(typeof t.Name=="string"){const r=Kl.encode(t.Name).length;e+=1+r+bn(r)}return typeof t.Tsize=="number"&&(e+=1+bn(t.Tsize)),e}function Tm(t){let e=0;if(t.Data){const r=t.Data.length;e+=1+r+bn(r)}if(t.Links)for(const r of t.Links){const n=km(r);e+=1+n+bn(n)}return e}function ii(t,e,r){e-=bn(r);const n=e;for(;r>=Bm;)t[e++]=r&127|128,r/=128;for(;r>=128;)t[e++]=r&127|128,r>>>=7;return t[e]=r,n}function bn(t){return t%2===0&&t++,Math.floor((Im(t)+6)/7)}function Im(t){let e=0;return t>=ju&&(t=Math.floor(t/ju),e=32),t>=65536&&(t>>>=16,e+=16),t>=256&&(t>>>=8,e+=8),e+Nm[t]}const Nm=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],_m=["Data","Links"],Om=["Hash","Name","Tsize"],Lo=new TextEncoder;function Jl(t,e){if(t===e)return 0;const r=t.Name?Lo.encode(t.Name):[],n=e.Name?Lo.encode(e.Name):[];let i=r.length,s=n.length;for(let o=0,a=Math.min(i,s);o<a;++o)if(r[o]!==n[o]){i=r[o],s=n[o];break}return i<s?-1:s<i?1:0}function zu(t,e){return!Object.keys(t).some(r=>!e.includes(r))}function Yl(t){if(typeof t.asCID=="object"){const r=ee.asCID(t);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Hash){let r=ee.asCID(t.Hash);try{r||(typeof t.Hash=="string"?r=ee.parse(t.Hash):t.Hash instanceof Uint8Array&&(r=ee.decode(t.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(e.Hash=r)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof t.Name=="string"&&(e.Name=t.Name),typeof t.Tsize=="number"&&(e.Tsize=t.Tsize),e}function Zl(t){if((t instanceof Uint8Array||typeof t=="string")&&(t={Data:t}),typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Data!==void 0)if(typeof t.Data=="string")e.Data=Lo.encode(t.Data);else if(t.Data instanceof Uint8Array)e.Data=t.Data;else throw new TypeError("Invalid DAG-PB form");if(t.Links!==void 0)if(Array.isArray(t.Links))e.Links=t.Links.map(Yl),e.Links.sort(Jl);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function Xl(t){if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form");if(!zu(t,_m))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let e=0;e<t.Links.length;e++){const r=t.Links[e];if(!r||typeof r!="object"||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!zu(r,Om))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(r.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash==null||!r.Hash["/"]||r.Hash["/"]!==r.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0){if(typeof r.Tsize!="number"||r.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(e>0&&Jl(r,t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function Pm(t,e=[]){return Zl({Data:t,Links:e})}function Um(t,e,r){return Yl({Hash:r,Name:t,Tsize:e})}function $m(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}const Lm="dag-pb",Rm=112;function Mm(t){Xl(t);const e={};return t.Links&&(e.Links=t.Links.map(r=>{const n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),t.Data&&(e.Data=t.Data),Fm(e)}function Vm(t){const e=$m(t),r=Cm(e),n={};return r.Data&&(n.Data=r.Data),r.Links&&(n.Links=r.Links.map(i=>{const s={};try{s.Hash=ee.decode(i.Hash)}catch{}if(!s.Hash)throw new Error("Invalid Hash field found in link, expected CID");return i.Name!==void 0&&(s.Name=i.Name),i.Tsize!==void 0&&(s.Tsize=i.Tsize),s})),n}const Hm=Object.freeze(Object.defineProperty({__proto__:null,code:Rm,createLink:Um,createNode:Pm,decode:Vm,encode:Mm,name:Lm,prepare:Zl,validate:Xl},Symbol.toStringTag,{value:"Module"}));function jm(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function Oa(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function zm(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,u=t.charAt(0),f=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function d(y){if(y instanceof Uint8Array||(ArrayBuffer.isView(y)?y=new Uint8Array(y.buffer,y.byteOffset,y.byteLength):Array.isArray(y)&&(y=Uint8Array.from(y))),!(y instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(y.length===0)return"";for(var b=0,g=0,D=0,v=y.length;D!==v&&y[D]===0;)D++,b++;for(var E=(v-D)*c+1>>>0,F=new Uint8Array(E);D!==v;){for(var T=y[D],k=0,I=E-1;(T!==0||k<g)&&I!==-1;I--,k++)T+=256*F[I]>>>0,F[I]=T%a>>>0,T=T/a>>>0;if(T!==0)throw new Error("Non-zero carry");g=k,D++}for(var _=E-g;_!==E&&F[_]===0;)_++;for(var $=u.repeat(b);_<E;++_)$+=t.charAt(F[_]);return $}function p(y){if(typeof y!="string")throw new TypeError("Expected String");if(y.length===0)return new Uint8Array;var b=0;if(y[b]!==" "){for(var g=0,D=0;y[b]===u;)g++,b++;for(var v=(y.length-b)*f+1>>>0,E=new Uint8Array(v);y[b];){var F=r[y.charCodeAt(b)];if(F===255)return;for(var T=0,k=v-1;(F!==0||T<D)&&k!==-1;k--,T++)F+=a*E[k]>>>0,E[k]=F%256>>>0,F=F/256>>>0;if(F!==0)throw new Error("Non-zero carry");D=T,b++}if(y[b]!==" "){for(var I=v-D;I!==v&&E[I]===0;)I++;for(var _=new Uint8Array(g+(v-I)),$=g;I!==v;)_[$++]=E[I++];return _}}}function w(y){var b=p(y);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:p,decode:w}}var Gm=zm,qm=Gm;class Wm{constructor(e,r,n){x(this,"name");x(this,"prefix");x(this,"baseEncode");this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Km{constructor(e,r,n){x(this,"name");x(this,"prefix");x(this,"baseDecode");x(this,"prefixCodePoint");if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Ql(this,e)}}class Jm{constructor(e){x(this,"decoders");this.decoders=e}or(e){return Ql(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function Ql(t,e){return new Jm({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}class Ym{constructor(e,r,n,i){x(this,"name");x(this,"prefix");x(this,"baseEncode");x(this,"baseDecode");x(this,"encoder");x(this,"decoder");this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Wm(e,r,n),this.decoder=new Km(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function ef({name:t,prefix:e,encode:r,decode:n}){return new Ym(t,e,r,n)}function tf({name:t,prefix:e,alphabet:r}){const{encode:n,decode:i}=qm(r,t);return ef({prefix:e,name:t,encode:n,decode:s=>Oa(i(s))})}function Zm(t,e,r,n){const i={};for(let c=0;c<e.length;++c)i[e[c]]=c;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,u=0,f=0;for(let c=0;c<s;++c){const d=i[t[c]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[f++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o}function Xm(t,e,r){const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o!==0&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s}function Bt({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return ef({prefix:e,name:t,encode(i){return Xm(i,n,r)},decode(i){return Zm(i,n,r,t)}})}Bt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});Bt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const rf=Bt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});Bt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function lr(t){return rf.encode(t).slice(1)}function Xt(t){return rf.decode(`u${t}`)}const Yi=Bt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});Bt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});Bt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});Bt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});Bt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});Bt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});Bt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});Bt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});Bt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const Sr=tf({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});tf({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Qm=nf,Gu=128,ew=127,tw=~ew,rw=Math.pow(2,31);function nf(t,e,r){e=e||[],r=r||0;for(var n=r;t>=rw;)e[r++]=t&255|Gu,t/=128;for(;t&tw;)e[r++]=t&255|Gu,t>>>=7;return e[r]=t|0,nf.bytes=r-n+1,e}var nw=Ro,iw=128,qu=127;function Ro(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Ro.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&qu)<<i:(o&qu)*Math.pow(2,i),i+=7}while(o>=iw);return Ro.bytes=s-n,r}var sw=Math.pow(2,7),ow=Math.pow(2,14),aw=Math.pow(2,21),uw=Math.pow(2,28),cw=Math.pow(2,35),lw=Math.pow(2,42),fw=Math.pow(2,49),dw=Math.pow(2,56),hw=Math.pow(2,63),pw=function(t){return t<sw?1:t<ow?2:t<aw?3:t<uw?4:t<cw?5:t<lw?6:t<fw?7:t<dw?8:t<hw?9:10},gw={encode:Qm,decode:nw,encodingLength:pw},us=gw;function Mo(t,e=0){return[us.decode(t,e),us.decode.bytes]}function cs(t,e,r=0){return us.encode(t,e,r),e}function ls(t){return us.encodingLength(t)}function yw(t,e){const r=e.byteLength,n=ls(t),i=n+ls(r),s=new Uint8Array(i+r);return cs(t,s,0),cs(r,s,n),s.set(e,i),new Pa(t,r,e,s)}function mw(t){const e=Oa(t),[r,n]=Mo(e),[i,s]=Mo(e.subarray(n)),o=e.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new Pa(r,i,o,e)}function ww(t,e){if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&jm(t.bytes,r.bytes)}}class Pa{constructor(e,r,n,i){x(this,"code");x(this,"size");x(this,"digest");x(this,"bytes");this.code=e,this.size=r,this.digest=n,this.bytes=i}}function Wu(t,e){const{bytes:r,version:n}=t;switch(n){case 0:return Dw(r,Vo(t),e??Sr.encoder);default:return Ew(r,Vo(t),e??Yi.encoder)}}const Ku=new WeakMap;function Vo(t){const e=Ku.get(t);if(e==null){const r=new Map;return Ku.set(t,r),r}return e}var nl;class Ve{constructor(e,r,n,i){x(this,"code");x(this,"version");x(this,"multihash");x(this,"bytes");x(this,"/");x(this,nl,"CID");this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==Zn)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==vw)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ve.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=yw(e,r);return Ve.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Ve.equals(this,e)}static equals(e,r){const n=r;return n!=null&&e.code===n.code&&e.version===n.version&&ww(e.multihash,n.multihash)}toString(e){return Wu(this,e)}toJSON(){return{"/":Wu(this)}}link(){return this}[(nl=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const r=e;if(r instanceof Ve)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:i,multihash:s,bytes:o}=r;return new Ve(n,i,s,o??Ju(n,i,s.bytes))}else if(r[Aw]===!0){const{version:n,multihash:i,code:s}=r,o=mw(i);return Ve.create(n,s,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Zn)throw new Error(`Version 0 CID must use dag-pb (code: ${Zn}) block encoding`);return new Ve(e,r,n,n.bytes)}case 1:{const i=Ju(e,r,n.bytes);return new Ve(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Ve.create(0,Zn,e)}static createV1(e,r){return Ve.create(1,e,r)}static decode(e){const[r,n]=Ve.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=Ve.inspectBytes(e),n=r.size-r.multihashSize,i=Oa(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");const s=i.subarray(r.multihashSize-r.digestSize),o=new Pa(r.multihashCode,r.digestSize,s,i);return[r.version===0?Ve.createV0(o):Ve.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[d,p]=Mo(e.subarray(r));return r+=p,d};let i=n(),s=Zn;if(i===18?(i=0,r=0):s=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const o=r,a=n(),u=n(),f=r+u,c=f-o;return{version:i,codec:s,multihashCode:a,digestSize:u,multihashSize:c,size:f}}static parse(e,r){const[n,i]=bw(e,r),s=Ve.decode(i);if(s.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Vo(s).set(n,e),s}}function bw(t,e){switch(t[0]){case"Q":{const r=e??Sr;return[Sr.prefix,r.decode(`${Sr.prefix}${t}`)]}case Sr.prefix:{const r=e??Sr;return[Sr.prefix,r.decode(t)]}case Yi.prefix:{const r=e??Yi;return[Yi.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function Dw(t,e,r){const{prefix:n}=r;if(n!==Sr.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=e.get(n);if(i==null){const s=r.encode(t).slice(1);return e.set(n,s),s}else return i}function Ew(t,e,r){const{prefix:n}=r,i=e.get(n);if(i==null){const s=r.encode(t);return e.set(n,s),s}else return i}const Zn=112,vw=18;function Ju(t,e,r){const n=ls(t),i=n+ls(e),s=new Uint8Array(i+r.byteLength);return cs(t,s,0),cs(e,s,n),s.set(r,i),s}const Aw=Symbol.for("@ipld/js-cid/CID");function xw(t){const[e,r,n]=t;return{payload:r,signatures:[{protected:e,signature:n}],link:Ve.decode(Xt(r))}}function Cw(t){const e={signature:Xt(t.signature)};return t.header&&(e.header=t.header),t.protected&&(e.protected=Xt(t.protected)),e}function Bw(t){return{payload:Xt(t.payload),signatures:t.signatures.map(Cw)}}function Sw(t){const e={signature:lr(t.signature)};return t.header&&(e.header=t.header),t.protected&&(e.protected=lr(t.protected)),e}function Fw(t){const e={payload:lr(t.payload),signatures:t.signatures.map(Sw)};try{return e.pld=Ho(Tw(t.payload)),e}catch{try{return e.link=Ve.decode(new Uint8Array(t.payload)),e}catch{throw new Error("Invalid payload, must be either JSON or CID")}}}function Ho(t){if(typeof t=="string"){if(t.startsWith("ipfs://"))return Ve.parse(t.slice(7))}else{if(Array.isArray(t))return t.map(Ho);if(kw(t)){const e={};for(const r in t)e[r]=Ho(t[r]);return e}}return t}function kw(t){return typeof t=="object"&&t!==null}function Tw(t){return JSON.parse(new TextDecoder().decode(t))}function Iw(t){const[e,r,n,i,s]=t,o={ciphertext:i,iv:n,protected:e,tag:s};return r&&(o.recipients=[{encrypted_key:r}]),o}function Nw(t){const e={};return t.encrypted_key&&(e.encrypted_key=Xt(t.encrypted_key)),t.header&&(e.header=t.header),e}function _w(t){const e={ciphertext:Xt(t.ciphertext),protected:Xt(t.protected),iv:Xt(t.iv),tag:Xt(t.tag)};return t.aad&&(e.aad=Xt(t.aad)),t.recipients&&(e.recipients=t.recipients.map(Nw)),t.unprotected&&(e.unprotected=t.unprotected),e}function Ow(t){const e={};return t.encrypted_key&&(e.encrypted_key=lr(t.encrypted_key)),t.header&&(e.header=t.header),e}function Pw(t){const e={ciphertext:lr(t.ciphertext),protected:lr(t.protected),iv:lr(t.iv),tag:lr(t.tag)};return t.aad&&(e.aad=lr(t.aad)),t.recipients&&(e.recipients=t.recipients.map(Ow)),t.unprotected&&(e.unprotected=t.unprotected),e}const Uw="dag-jose",$w=133;function sf(t){return"payload"in t&&typeof t.payload=="string"&&"signatures"in t&&Array.isArray(t.signatures)}function Lw(t){return"payload"in t&&t.payload instanceof Uint8Array&&"signatures"in t&&Array.isArray(t.signatures)}function Rw(t){return"ciphertext"in t&&t.ciphertext instanceof Uint8Array&&"iv"in t&&t.iv instanceof Uint8Array&&"protected"in t&&t.protected instanceof Uint8Array&&"tag"in t&&t.tag instanceof Uint8Array}function of(t){return"ciphertext"in t&&typeof t.ciphertext=="string"&&"iv"in t&&typeof t.iv=="string"&&"protected"in t&&typeof t.protected=="string"&&"tag"in t&&typeof t.tag=="string"}function af(t){if(typeof t=="string"){const e=t.split(".");if(e.length===3)return xw(e);if(e.length===5)return Iw(e);throw new Error("Not a valid JOSE string")}if(sf(t)||of(t))return t;throw new Error("Not a valid unencoded JOSE object")}function Mw(t){typeof t=="string"&&(t=af(t));let e;if(sf(t))e=Bw(t);else if(of(t))e=_w(t);else throw new Error("Not a valid JOSE object");return new Uint8Array(Hl(e))}function Vw(t){let e;try{e=jl(t)}catch{throw new Error("Not a valid DAG-JOSE object")}if(Lw(e))return Fw(e);if(Rw(e))return Pw(e);throw new Error("Not a valid DAG-JOSE object")}const Hw=Object.freeze(Object.defineProperty({__proto__:null,code:$w,decode:Vw,encode:Mw,name:Uw,toGeneral:af},Symbol.toStringTag,{value:"Module"}));function yr(t){const e=new globalThis.AbortController;function r(){e.abort();for(const s of t)(s==null?void 0:s.removeEventListener)!=null&&s.removeEventListener("abort",r)}for(const s of t){if((s==null?void 0:s.aborted)===!0){r();break}(s==null?void 0:s.addEventListener)!=null&&s.addEventListener("abort",r)}function n(){for(const s of t)(s==null?void 0:s.removeEventListener)!=null&&s.removeEventListener("abort",r)}const i=e.signal;return i.clear=n,i}const jw="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let zw=(t=21)=>{let e="",r=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)e+=jw[r[t]&63];return e};function Gw(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var qw=Gw;const Ww=vs(qw),uf=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,Ua=Ww(),Ts=uf&&!Ua,Kw=Ua&&uf,Jw=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!Ua,Is=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;async function*Ns(t,e={}){const r=t.getReader();try{for(;;){const n=await r.read();if(n.done)return;yield n.value}}finally{e.preventCancel!==!0&&await r.cancel(),r.releaseLock()}}function Yu(t,e){for(const r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Yw(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Yu(t,r)}catch{r.message=t.message,r.stack=t.stack;const i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),Yu(new i,r)}}var Zw=Yw;const Qt=vs(Zw);function _s(t){const[e,r]=t[Symbol.asyncIterator]!=null?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:i=>{n.push(i)},next:()=>n.length>0?{done:!1,value:n.shift()}:e.next(),[r](){return this}}}function Xw(t){return t[Symbol.asyncIterator]!=null}function Zu(t,e){let r=0;if(Xw(t))return async function*(){for await(const u of t)yield e(u,r++)}();const n=_s(t),{value:i,done:s}=n.next();if(s===!0)return function*(){}();const o=e(i,r++);if(typeof o.then=="function")return async function*(){yield await o;for await(const u of n)yield e(u,r++)}();const a=e;return function*(){yield o;for(const u of n)yield a(u,r++)}()}let Qw=class extends Error{constructor(r){super(r.statusText);x(this,"response");this.name="HTTPError",this.response=r}};class eb extends Error{constructor(e="Invalid mtime"){super(e),this.name="InvalidMtimeError"}}function Bn(t){return ArrayBuffer.isView(t)||t instanceof ArrayBuffer}function fs(t){return t.constructor!=null&&(t.constructor.name==="Blob"||t.constructor.name==="File")&&typeof t.stream=="function"}function jo(t){return typeof t=="object"&&(t.path!=null||t.content!=null)}function ds(t){return typeof(t==null?void 0:t.getReader)=="function"}function cf(t){if(t!=null)return typeof t=="string"&&(t=parseInt(t,8)),t&4095}function tb(t){return Object.prototype.hasOwnProperty.call(t,"secs")}function rb(t){return Object.prototype.hasOwnProperty.call(t,"Seconds")}function nb(t){return Array.isArray(t)}function Os(t){if(t!=null){if(tb(t)&&(t={secs:t.secs,nsecs:t.nsecs}),rb(t)&&(t={secs:BigInt(t.Seconds),nsecs:t.FractionalNanoseconds}),nb(t)&&(t={secs:BigInt(t[0]),nsecs:t[1]}),t instanceof Date){const e=t.getTime(),r=Math.floor(e/1e3);t={secs:BigInt(r),nsecs:(e-r*1e3)*1e3}}if(typeof t=="bigint"){const e=t/BigInt(1e9),r=t-e*BigInt(1e9);t={secs:e,nsecs:Number(r)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(t.nsecs!=null&&(t.nsecs<0||t.nsecs>999999999))throw new eb("mtime-nsecs must be within the range [0,999999999]");return t}}}async function*ib(t,e){if(typeof t=="string"||t instanceof String||Bn(t)||fs(t)||t._readableState!=null)throw Qt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(ds(t)&&(t=Ns(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const r=_s(t),{value:n,done:i}=await r.peek();if(i===!0){yield*[];return}if(r.push(n),Number.isInteger(n))throw Qt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState!=null){yield*Zu(r,async s=>lo({content:s},e));return}if(Bn(n)){yield lo({content:r},e);return}if(jo(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||ds(n)||fs(n)){yield*Zu(r,async s=>lo(s,e));return}}throw jo(t)?Qt(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):Qt(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}async function lo(t,e){const{path:r,mode:n,mtime:i,content:s}=t,o={path:r??"",mode:cf(n),mtime:Os(i)};return s!=null?o.content=await e(s):r==null&&(o.content=await e(t)),o}const lf=Symbol.for("@libp2p/peer-id");class Nt extends Error{constructor(e="Invalid parameters"){super(e),this.name="InvalidParametersError"}}x(Nt,"name","InvalidParametersError");class $a extends Error{constructor(e="Invalid public key"){super(e),this.name="InvalidPublicKeyError"}}x($a,"name","InvalidPublicKeyError");class ff extends Error{constructor(e="Invalid Multihash"){super(e),this.name="InvalidMultihashError"}}x(ff,"name","InvalidMultihashError");class La extends Error{constructor(e="Unsupported key type"){super(e),this.name="UnsupportedKeyTypeError"}}x(La,"name","UnsupportedKeyTypeError");function sb(t){return t[Symbol.asyncIterator]!=null}function df(t){if(sb(t))return(async()=>{const r=[];for await(const n of t)r.push(n);return r})();const e=[];for(const r of t)e.push(r);return e}async function hf(t){if(Bn(t))return new Blob([t]);if(typeof t=="string"||t instanceof String)return new Blob([t.toString()]);if(fs(t))return t;if(ds(t)&&(t=Ns(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const e=_s(t),{value:r,done:n}=await e.peek();if(n===!0)return Xu(e);if(e.push(r),Number.isInteger(r))return new Blob([Uint8Array.from(await df(e))]);if(Bn(r)||typeof r=="string"||r instanceof String)return Xu(e)}throw new Nt(`Unexpected input: ${t}`)}async function Xu(t){const e=[];for await(const r of t)e.push(r);return new Blob(e)}function ob(t){return ib(t,hf)}function Ra(t){if(t!=null)return typeof t=="string"?t:t.toString(8).padStart(4,"0")}async function Qu(t,e,r={},n){const i=[],s=new FormData;let o=0,a=0;for await(const{content:u,path:f,mode:c,mtime:d}of ob(t)){let p="";const w=u!=null?"file":"dir";o>0&&(p=`-${o}`);let y=w+p;const b=[];if(c!=null&&b.push(`mode=${Ra(c)}`),d!=null){const{secs:g,nsecs:D}=d;b.push(`mtime=${g}`),D!=null&&b.push(`mtime-nsecs=${D}`)}if(b.length>0&&(y=`${y}?${b.join("&")}`),u!=null){s.set(y,u,f!=null?encodeURIComponent(f):void 0);const g=a+u.size;i.push({name:f,start:a,end:g}),a=g}else if(f!=null)s.set(y,new File([""],encodeURIComponent(f),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");o++}return{total:a,parts:i,headers:r,body:s}}async function Ur(t,e,r={},n=`-----------------------------${zw()}`){let i=Qu;return Kw&&(i=Qu),i(t,e,r,n)}function rt(t){if(t==null)return t;const e=/^[A-Z]+$/,r={};return Object.keys(t).reduce((n,i)=>(e.test(i)?n[i.toLowerCase()]=t[i]:e.test(i[0])?n[i[0].toLowerCase()+i.slice(1)]=t[i]:n[i]=t[i],n),r)}function L({arg:t,searchParams:e,hashAlg:r,mtime:n,mode:i,...s}={}){e!=null&&(s={...s,...e}),r!=null&&(s.hash=r),n!=null&&(n=Os(n),s.mtime=n.secs,s.mtimeNsecs=n.nsecs),i!=null&&(s.mode=Ra(i)),isNaN(s.timeout)||(s.timeout=`${s.timeout}ms`),t==null?t=[]:Array.isArray(t)||(t=[t]);const o=new URLSearchParams(s);return t.forEach(a=>{o.append("arg",a)}),o}function pf(t){return async function*(r,n={}){const i=new AbortController,s=yr([i.signal,n.signal]);try{const{headers:o,body:a,total:u,parts:f}=await Ur(r,i,n.headers),[c,d]=typeof n.progress=="function"?ab(u,n.progress,f):[void 0,void 0],p=await t.post("add",{searchParams:L({"stream-channels":!0,...n,progress:!!c}),onUploadProgress:d,signal:s,headers:o,body:a});for await(let w of p.ndjson())w=rt(w),w.hash!==void 0?yield cb(w):c!=null&&c(w.bytes??0,w.name)}finally{s.clear()}}}const ab=(t,e,r)=>r!=null?[void 0,ub(t,r,e)]:[e,void 0],ub=(t,e,r)=>{let n=0;const i=e.length;return({loaded:s,total:o})=>{const a=Math.floor(s/o*t);for(;n<i;){const{start:u,end:f,name:c}=e[n];if(a<f){r(a-u,c);break}else r(f-u,c),n+=1}}};function cb({name:t,hash:e,size:r,mode:n,mtime:i,mtimeNsecs:s}){const o={path:t,cid:ee.parse(e),size:parseInt(r)};return n!=null&&(o.mode=parseInt(n,8)),i!=null&&(o.mtime={secs:i,nsecs:s??0}),o}function lb(t){return t[Symbol.asyncIterator]!=null}function Ps(t){if(lb(t))return(async()=>{let r;for await(const n of t)r=n;return r})();let e;for(const r of t)e=r;return e}async function*fb(t,e){if(t==null)throw Qt(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT");if(typeof t=="string"||t instanceof String){yield $i(t.toString(),e);return}if(Bn(t)||fs(t)){yield $i(t,e);return}if(ds(t)&&(t=Ns(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const r=_s(t),{value:n,done:i}=await r.peek();if(i===!0){yield{content:[]};return}if(r.push(n),Number.isInteger(n)||Bn(n)||typeof n=="string"||n instanceof String){yield $i(r,e);return}throw Qt(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(jo(t)){yield $i(t,e);return}throw Qt(new Error('Unexpected input: cannot convert "'+typeof t+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function $i(t,e){const{path:r,mode:n,mtime:i,content:s}=t,o={path:r??"",mode:cf(n),mtime:Os(i)};return s!=null?o.content=await e(s):r==null&&(o.content=await e(t)),o}function db(t){return fb(t,hf)}function hb(t){const e=pf(t);return async function(n,i={}){const s=db(n),o=e(s,i),a=await Ps(o);if(a==null)throw new Error("Invalid body");return a}}function ec(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function pb(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Us(t,...e){if(!pb(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function gb(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ec(t.outputLen),ec(t.blockLen)}function hs(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function yb(t,e){Us(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const pn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function fo(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Kt(t,e){return t<<32-e|t>>>e}function mb(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Ma(t){return typeof t=="string"&&(t=mb(t)),Us(t),t}function wb(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];Us(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}class gf{clone(){return this._cloneInto()}}function yf(t){const e=n=>t().update(Ma(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function mf(t=32){if(pn&&typeof pn.getRandomValues=="function")return pn.getRandomValues(new Uint8Array(t));if(pn&&typeof pn.randomBytes=="function")return pn.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function bb(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),u=n?4:0,f=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+f,a,n)}function Db(t,e,r){return t&e^~t&r}function Eb(t,e,r){return t&e^t&r^e&r}class wf extends gf{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=fo(this.buffer)}update(e){hs(this);const{view:r,buffer:n,blockLen:i}=this;e=Ma(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const u=fo(e);for(;i<=s-o;o+=i)this.process(u,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){hs(this),yb(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let d=o;d<i;d++)r[d]=0;bb(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=fo(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=u/4,c=this.get();if(f>c.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<f;d++)a.setUint32(4*d,c[d],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}}const Li=BigInt(2**32-1),zo=BigInt(32);function bf(t,e=!1){return e?{h:Number(t&Li),l:Number(t>>zo&Li)}:{h:Number(t>>zo&Li)|0,l:Number(t&Li)|0}}function vb(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=bf(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const Ab=(t,e)=>BigInt(t>>>0)<<zo|BigInt(e>>>0),xb=(t,e,r)=>t>>>r,Cb=(t,e,r)=>t<<32-r|e>>>r,Bb=(t,e,r)=>t>>>r|e<<32-r,Sb=(t,e,r)=>t<<32-r|e>>>r,Fb=(t,e,r)=>t<<64-r|e>>>r-32,kb=(t,e,r)=>t>>>r-32|e<<64-r,Tb=(t,e)=>e,Ib=(t,e)=>t,Nb=(t,e,r)=>t<<r|e>>>32-r,_b=(t,e,r)=>e<<r|t>>>32-r,Ob=(t,e,r)=>e<<r-32|t>>>64-r,Pb=(t,e,r)=>t<<r-32|e>>>64-r;function Ub(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const $b=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Lb=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Rb=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Mb=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,Vb=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),Hb=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,oe={fromBig:bf,split:vb,toBig:Ab,shrSH:xb,shrSL:Cb,rotrSH:Bb,rotrSL:Sb,rotrBH:Fb,rotrBL:kb,rotr32H:Tb,rotr32L:Ib,rotlSH:Nb,rotlSL:_b,rotlBH:Ob,rotlBL:Pb,add:Ub,add3L:$b,add3H:Lb,add4L:Rb,add4H:Mb,add5H:Hb,add5L:Vb},[jb,zb]=oe.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),vr=new Uint32Array(80),Ar=new Uint32Array(80);class Gb extends wf{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:u,Eh:f,El:c,Fh:d,Fl:p,Gh:w,Gl:y,Hh:b,Hl:g}=this;return[e,r,n,i,s,o,a,u,f,c,d,p,w,y,b,g]}set(e,r,n,i,s,o,a,u,f,c,d,p,w,y,b,g){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=f|0,this.El=c|0,this.Fh=d|0,this.Fl=p|0,this.Gh=w|0,this.Gl=y|0,this.Hh=b|0,this.Hl=g|0}process(e,r){for(let E=0;E<16;E++,r+=4)vr[E]=e.getUint32(r),Ar[E]=e.getUint32(r+=4);for(let E=16;E<80;E++){const F=vr[E-15]|0,T=Ar[E-15]|0,k=oe.rotrSH(F,T,1)^oe.rotrSH(F,T,8)^oe.shrSH(F,T,7),I=oe.rotrSL(F,T,1)^oe.rotrSL(F,T,8)^oe.shrSL(F,T,7),_=vr[E-2]|0,$=Ar[E-2]|0,X=oe.rotrSH(_,$,19)^oe.rotrBH(_,$,61)^oe.shrSH(_,$,6),J=oe.rotrSL(_,$,19)^oe.rotrBL(_,$,61)^oe.shrSL(_,$,6),W=oe.add4L(I,J,Ar[E-7],Ar[E-16]),he=oe.add4H(W,k,X,vr[E-7],vr[E-16]);vr[E]=he|0,Ar[E]=W|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:u,Dh:f,Dl:c,Eh:d,El:p,Fh:w,Fl:y,Gh:b,Gl:g,Hh:D,Hl:v}=this;for(let E=0;E<80;E++){const F=oe.rotrSH(d,p,14)^oe.rotrSH(d,p,18)^oe.rotrBH(d,p,41),T=oe.rotrSL(d,p,14)^oe.rotrSL(d,p,18)^oe.rotrBL(d,p,41),k=d&w^~d&b,I=p&y^~p&g,_=oe.add5L(v,T,I,zb[E],Ar[E]),$=oe.add5H(_,D,F,k,jb[E],vr[E]),X=_|0,J=oe.rotrSH(n,i,28)^oe.rotrBH(n,i,34)^oe.rotrBH(n,i,39),W=oe.rotrSL(n,i,28)^oe.rotrBL(n,i,34)^oe.rotrBL(n,i,39),he=n&s^n&a^s&a,R=i&o^i&u^o&u;D=b|0,v=g|0,b=w|0,g=y|0,w=d|0,y=p|0,{h:d,l:p}=oe.add(f|0,c|0,$|0,X|0),f=a|0,c=u|0,a=s|0,u=o|0,s=n|0,o=i|0;const z=oe.add3L(X,W,R);n=oe.add3H(z,$,J,he),i=z|0}({h:n,l:i}=oe.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=oe.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:u}=oe.add(this.Ch|0,this.Cl|0,a|0,u|0),{h:f,l:c}=oe.add(this.Dh|0,this.Dl|0,f|0,c|0),{h:d,l:p}=oe.add(this.Eh|0,this.El|0,d|0,p|0),{h:w,l:y}=oe.add(this.Fh|0,this.Fl|0,w|0,y|0),{h:b,l:g}=oe.add(this.Gh|0,this.Gl|0,b|0,g|0),{h:D,l:v}=oe.add(this.Hh|0,this.Hl|0,D|0,v|0),this.set(n,i,s,o,a,u,f,c,d,p,w,y,b,g,D,v)}roundClean(){vr.fill(0),Ar.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const qb=yf(()=>new Gb);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $s=BigInt(0),Ls=BigInt(1),Wb=BigInt(2);function Yr(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Bi(t){if(!Yr(t))throw new Error("Uint8Array expected")}function hr(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Kb=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Zr(t){Bi(t);let e="";for(let r=0;r<t.length;r++)e+=Kb[t[r]];return e}function gn(t){const e=t.toString(16);return e.length&1?"0"+e:e}function Va(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?$s:BigInt("0x"+t)}const ar={_0:48,_9:57,A:65,F:70,a:97,f:102};function tc(t){if(t>=ar._0&&t<=ar._9)return t-ar._0;if(t>=ar.A&&t<=ar.F)return t-(ar.A-10);if(t>=ar.a&&t<=ar.f)return t-(ar.a-10)}function Sn(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=tc(t.charCodeAt(s)),a=tc(t.charCodeAt(s+1));if(o===void 0||a===void 0){const u=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}n[i]=o*16+a}return n}function qr(t){return Va(Zr(t))}function Dn(t){return Bi(t),Va(Zr(Uint8Array.from(t).reverse()))}function Fn(t,e){return Sn(t.toString(16).padStart(e*2,"0"))}function hi(t,e){return Fn(t,e).reverse()}function Jb(t){return Sn(gn(t))}function Re(t,e,r){let n;if(typeof e=="string")try{n=Sn(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Yr(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function Xr(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];Bi(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}function Yb(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function Zb(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const ho=t=>typeof t=="bigint"&&$s<=t;function Rs(t,e,r){return ho(t)&&ho(e)&&ho(r)&&e<=t&&t<r}function It(t,e,r,n){if(!Rs(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function Df(t){let e;for(e=0;t>$s;t>>=Ls,e+=1);return e}function Xb(t,e){return t>>BigInt(e)&Ls}function Qb(t,e,r){return t|(r?Ls:$s)<<BigInt(e)}const Ha=t=>(Wb<<BigInt(t-1))-Ls,po=t=>new Uint8Array(t),rc=t=>Uint8Array.from(t);function Ef(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=po(t),i=po(t),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...d)=>r(i,n,...d),u=(d=po())=>{i=a(rc([0]),d),n=a(),d.length!==0&&(i=a(rc([1]),d),n=a())},f=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const p=[];for(;d<e;){n=a();const w=n.slice();p.push(w),d+=n.length}return Xr(...p)};return(d,p)=>{o(),u(d);let w;for(;!(w=p(f()));)u();return o(),w}}const e1={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Yr(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Mn(t,e,r={}){const n=(i,s,o)=>{const a=e1[s];if(typeof a!="function")throw new Error("invalid validator function");const u=t[i];if(!(o&&u===void 0)&&!a(u,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+u)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}const t1=()=>{throw new Error("not implemented")};function pi(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}const r1=Object.freeze(Object.defineProperty({__proto__:null,aInRange:It,abool:hr,abytes:Bi,bitGet:Xb,bitLen:Df,bitMask:Ha,bitSet:Qb,bytesToHex:Zr,bytesToNumberBE:qr,bytesToNumberLE:Dn,concatBytes:Xr,createHmacDrbg:Ef,ensureBytes:Re,equalBytes:Yb,hexToBytes:Sn,hexToNumber:Va,inRange:Rs,isBytes:Yr,memoized:pi,notImplemented:t1,numberToBytesBE:Fn,numberToBytesLE:hi,numberToHexUnpadded:gn,numberToVarBytesBE:Jb,utf8ToBytes:Zb,validateObject:Mn},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ye=BigInt(0),Ne=BigInt(1),jr=BigInt(2),n1=BigInt(3),Go=BigInt(4),nc=BigInt(5),ic=BigInt(8);function Ie(t,e){const r=t%e;return r>=Ye?r:e+r}function i1(t,e,r){if(e<Ye)throw new Error("invalid exponent, negatives unsupported");if(r<=Ye)throw new Error("invalid modulus");if(r===Ne)return Ye;let n=Ne;for(;e>Ye;)e&Ne&&(n=n*t%r),t=t*t%r,e>>=Ne;return n}function Oe(t,e,r){let n=t;for(;e-- >Ye;)n*=n,n%=r;return n}function qo(t,e){if(t===Ye)throw new Error("invert: expected non-zero number");if(e<=Ye)throw new Error("invert: expected positive modulus, got "+e);let r=Ie(t,e),n=e,i=Ye,s=Ne;for(;r!==Ye;){const a=n/r,u=n%r,f=i-s*a;n=r,r=u,i=s,s=f}if(n!==Ne)throw new Error("invert: does not exist");return Ie(i,e)}function s1(t){const e=(t-Ne)/jr;let r,n,i;for(r=t-Ne,n=0;r%jr===Ye;r/=jr,n++);for(i=jr;i<t&&i1(i,e,t)!==t-Ne;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+Ne)/Go;return function(u,f){const c=u.pow(f,o);if(!u.eql(u.sqr(c),f))throw new Error("Cannot find square root");return c}}const s=(r+Ne)/jr;return function(a,u){if(a.pow(u,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let f=n,c=a.pow(a.mul(a.ONE,i),r),d=a.pow(u,s),p=a.pow(u,r);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let w=1;for(let b=a.sqr(p);w<f&&!a.eql(b,a.ONE);w++)b=a.sqr(b);const y=a.pow(c,Ne<<BigInt(f-w-1));c=a.sqr(y),d=a.mul(d,y),p=a.mul(p,c),f=w}return d}}function o1(t){if(t%Go===n1){const e=(t+Ne)/Go;return function(n,i){const s=n.pow(i,e);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%ic===nc){const e=(t-nc)/ic;return function(n,i){const s=n.mul(i,jr),o=n.pow(s,e),a=n.mul(i,o),u=n.mul(n.mul(a,jr),o),f=n.mul(a,n.sub(u,n.ONE));if(!n.eql(n.sqr(f),i))throw new Error("Cannot find square root");return f}}return s1(t)}const a1=(t,e)=>(Ie(t,e)&Ne)===Ne,u1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function c1(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=u1.reduce((n,i)=>(n[i]="function",n),e);return Mn(t,r)}function l1(t,e,r){if(r<Ye)throw new Error("invalid exponent, negatives unsupported");if(r===Ye)return t.ONE;if(r===Ne)return e;let n=t.ONE,i=e;for(;r>Ye;)r&Ne&&(n=t.mul(n,i)),i=t.sqr(i),r>>=Ne;return n}function f1(t,e){const r=new Array(e.length),n=e.reduce((s,o,a)=>t.is0(o)?s:(r[a]=s,t.mul(s,o)),t.ONE),i=t.inv(n);return e.reduceRight((s,o,a)=>t.is0(o)?s:(r[a]=t.mul(s,r[a]),t.mul(s,o)),i),r}function vf(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Ms(t,e,r=!1,n={}){if(t<=Ye)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=vf(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:s,MASK:Ha(i),ZERO:Ye,ONE:Ne,create:u=>Ie(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Ye<=u&&u<t},is0:u=>u===Ye,isOdd:u=>(u&Ne)===Ne,neg:u=>Ie(-u,t),eql:(u,f)=>u===f,sqr:u=>Ie(u*u,t),add:(u,f)=>Ie(u+f,t),sub:(u,f)=>Ie(u-f,t),mul:(u,f)=>Ie(u*f,t),pow:(u,f)=>l1(a,u,f),div:(u,f)=>Ie(u*qo(f,t),t),sqrN:u=>u*u,addN:(u,f)=>u+f,subN:(u,f)=>u-f,mulN:(u,f)=>u*f,inv:u=>qo(u,t),sqrt:n.sqrt||(u=>(o||(o=o1(t)),o(a,u))),invertBatch:u=>f1(a,u),cmov:(u,f,c)=>c?f:u,toBytes:u=>r?hi(u,s):Fn(u,s),fromBytes:u=>{if(u.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+u.length);return r?Dn(u):qr(u)}});return Object.freeze(a)}function Af(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function xf(t){const e=Af(t);return e+Math.ceil(e/2)}function d1(t,e,r=!1){const n=t.length,i=Af(e),s=xf(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=r?Dn(t):qr(t),a=Ie(o,e-Ne)+Ne;return r?hi(a,i):Fn(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sc=BigInt(0),Ri=BigInt(1);function go(t,e){const r=e.negate();return t?r:e}function Cf(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function yo(t,e){Cf(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function h1(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function p1(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const mo=new WeakMap,Bf=new WeakMap;function wo(t){return Bf.get(t)||1}function Sf(t,e){return{constTimeNegate:go,hasPrecomputes(r){return wo(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>sc;)n&Ri&&(i=i.add(s)),s=s.double(),n>>=Ri;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=yo(n,e),o=[];let a=r,u=a;for(let f=0;f<i;f++){u=a,o.push(u);for(let c=1;c<s;c++)u=u.add(a),o.push(u);a=u.double()}return o},wNAF(r,n,i){const{windows:s,windowSize:o}=yo(r,e);let a=t.ZERO,u=t.BASE;const f=BigInt(2**r-1),c=2**r,d=BigInt(r);for(let p=0;p<s;p++){const w=p*o;let y=Number(i&f);i>>=d,y>o&&(y-=c,i+=Ri);const b=w,g=w+Math.abs(y)-1,D=p%2!==0,v=y<0;y===0?u=u.add(go(D,n[b])):a=a.add(go(v,n[g]))}return{p:a,f:u}},wNAFUnsafe(r,n,i,s=t.ZERO){const{windows:o,windowSize:a}=yo(r,e),u=BigInt(2**r-1),f=2**r,c=BigInt(r);for(let d=0;d<o;d++){const p=d*a;if(i===sc)break;let w=Number(i&u);if(i>>=c,w>a&&(w-=f,i+=Ri),w===0)continue;let y=n[p+Math.abs(w)-1];w<0&&(y=y.negate()),s=s.add(y)}return s},getPrecomputes(r,n,i){let s=mo.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&mo.set(n,i(s))),s},wNAFCached(r,n,i){const s=wo(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=wo(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){Cf(n,e),Bf.set(r,n),mo.delete(r)}}}function Ff(t,e,r,n){if(h1(r,t),p1(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=Df(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,u=new Array(a+1).fill(i),f=Math.floor((e.BITS-1)/o)*o;let c=i;for(let d=f;d>=0;d-=o){u.fill(i);for(let w=0;w<n.length;w++){const y=n[w],b=Number(y>>BigInt(d)&BigInt(a));u[b]=u[b].add(r[w])}let p=i;for(let w=u.length-1,y=i;w>0;w--)y=y.add(u[w]),p=p.add(y);if(c=c.add(p),d!==0)for(let w=0;w<o;w++)c=c.double()}return c}function ja(t){return c1(t.Fp),Mn(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...vf(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $t=BigInt(0),pt=BigInt(1),Mi=BigInt(2),g1=BigInt(8),y1={zip215:!0};function m1(t){const e=ja(t);return Mn(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function w1(t){const e=m1(t),{Fp:r,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:u}=e,f=Mi<<BigInt(a*8)-pt,c=r.create,d=Ms(e.n,e.nBitLength),p=e.uvRatio||((C,S)=>{try{return{isValid:!0,value:r.sqrt(C*r.inv(S))}}catch{return{isValid:!1,value:$t}}}),w=e.adjustScalarBytes||(C=>C),y=e.domain||((C,S,P)=>{if(hr("phflag",P),S.length||P)throw new Error("Contexts/pre-hash are not supported");return C});function b(C,S){It("coordinate "+C,S,$t,f)}function g(C){if(!(C instanceof E))throw new Error("ExtendedPoint expected")}const D=pi((C,S)=>{const{ex:P,ey:V,ez:K}=C,Y=C.is0();S==null&&(S=Y?g1:r.inv(K));const te=c(P*S),ie=c(V*S),Q=c(K*S);if(Y)return{x:$t,y:pt};if(Q!==pt)throw new Error("invZ was invalid");return{x:te,y:ie}}),v=pi(C=>{const{a:S,d:P}=e;if(C.is0())throw new Error("bad point: ZERO");const{ex:V,ey:K,ez:Y,et:te}=C,ie=c(V*V),Q=c(K*K),ge=c(Y*Y),we=c(ge*ge),ce=c(ie*S),ve=c(ge*c(ce+Q)),se=c(we+c(P*c(ie*Q)));if(ve!==se)throw new Error("bad point: equation left != right (1)");const pe=c(V*K),_e=c(Y*te);if(pe!==_e)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(S,P,V,K){this.ex=S,this.ey=P,this.ez=V,this.et=K,b("x",S),b("y",P),b("z",V),b("t",K),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(S){if(S instanceof E)throw new Error("extended point not allowed");const{x:P,y:V}=S||{};return b("x",P),b("y",V),new E(P,V,pt,c(P*V))}static normalizeZ(S){const P=r.invertBatch(S.map(V=>V.ez));return S.map((V,K)=>V.toAffine(P[K])).map(E.fromAffine)}static msm(S,P){return Ff(E,d,S,P)}_setWindowSize(S){k.setWindowSize(this,S)}assertValidity(){v(this)}equals(S){g(S);const{ex:P,ey:V,ez:K}=this,{ex:Y,ey:te,ez:ie}=S,Q=c(P*ie),ge=c(Y*K),we=c(V*ie),ce=c(te*K);return Q===ge&&we===ce}is0(){return this.equals(E.ZERO)}negate(){return new E(c(-this.ex),this.ey,this.ez,c(-this.et))}double(){const{a:S}=e,{ex:P,ey:V,ez:K}=this,Y=c(P*P),te=c(V*V),ie=c(Mi*c(K*K)),Q=c(S*Y),ge=P+V,we=c(c(ge*ge)-Y-te),ce=Q+te,ve=ce-ie,se=Q-te,pe=c(we*ve),_e=c(ce*se),Be=c(we*se),He=c(ve*ce);return new E(pe,_e,He,Be)}add(S){g(S);const{a:P,d:V}=e,{ex:K,ey:Y,ez:te,et:ie}=this,{ex:Q,ey:ge,ez:we,et:ce}=S;if(P===BigInt(-1)){const Ot=c((Y-K)*(ge+Q)),Ge=c((Y+K)*(ge-Q)),Rr=c(Ge-Ot);if(Rr===$t)return this.double();const ln=c(te*Mi*ce),fn=c(ie*Mi*we),j=fn+ln,re=Ge+Ot,ue=fn-ln,qe=c(j*Rr),Gt=c(re*ue),dn=c(j*ue),rr=c(Rr*re);return new E(qe,Gt,rr,dn)}const ve=c(K*Q),se=c(Y*ge),pe=c(ie*V*ce),_e=c(te*we),Be=c((K+Y)*(Q+ge)-ve-se),He=_e-pe,je=_e+pe,ze=c(se-P*ve),nt=c(Be*He),Ft=c(je*ze),$r=c(Be*ze),Lr=c(He*je);return new E(nt,Ft,Lr,$r)}subtract(S){return this.add(S.negate())}wNAF(S){return k.wNAFCached(this,S,E.normalizeZ)}multiply(S){const P=S;It("scalar",P,pt,n);const{p:V,f:K}=this.wNAF(P);return E.normalizeZ([V,K])[0]}multiplyUnsafe(S,P=E.ZERO){const V=S;return It("scalar",V,$t,n),V===$t?T:this.is0()||V===pt?this:k.wNAFCachedUnsafe(this,V,E.normalizeZ,P)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return k.unsafeLadder(this,n).is0()}toAffine(S){return D(this,S)}clearCofactor(){const{h:S}=e;return S===pt?this:this.multiplyUnsafe(S)}static fromHex(S,P=!1){const{d:V,a:K}=e,Y=r.BYTES;S=Re("pointHex",S,Y),hr("zip215",P);const te=S.slice(),ie=S[Y-1];te[Y-1]=ie&-129;const Q=Dn(te),ge=P?f:r.ORDER;It("pointHex.y",Q,$t,ge);const we=c(Q*Q),ce=c(we-pt),ve=c(V*we-K);let{isValid:se,value:pe}=p(ce,ve);if(!se)throw new Error("Point.fromHex: invalid y coordinate");const _e=(pe&pt)===pt,Be=(ie&128)!==0;if(!P&&pe===$t&&Be)throw new Error("Point.fromHex: x=0 and x_0=1");return Be!==_e&&(pe=c(-pe)),E.fromAffine({x:pe,y:Q})}static fromPrivateKey(S){return $(S).point}toRawBytes(){const{x:S,y:P}=this.toAffine(),V=hi(P,r.BYTES);return V[V.length-1]|=S&pt?128:0,V}toHex(){return Zr(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,pt,c(e.Gx*e.Gy)),E.ZERO=new E($t,pt,pt,$t);const{BASE:F,ZERO:T}=E,k=Sf(E,a*8);function I(C){return Ie(C,n)}function _(C){return I(Dn(C))}function $(C){const S=r.BYTES;C=Re("private key",C,S);const P=Re("hashed private key",s(C),2*S),V=w(P.slice(0,S)),K=P.slice(S,2*S),Y=_(V),te=F.multiply(Y),ie=te.toRawBytes();return{head:V,prefix:K,scalar:Y,point:te,pointBytes:ie}}function X(C){return $(C).pointBytes}function J(C=new Uint8Array,...S){const P=Xr(...S);return _(s(y(P,Re("context",C),!!i)))}function W(C,S,P={}){C=Re("message",C),i&&(C=i(C));const{prefix:V,scalar:K,pointBytes:Y}=$(S),te=J(P.context,V,C),ie=F.multiply(te).toRawBytes(),Q=J(P.context,ie,Y,C),ge=I(te+Q*K);It("signature.s",ge,$t,n);const we=Xr(ie,hi(ge,r.BYTES));return Re("result",we,r.BYTES*2)}const he=y1;function R(C,S,P,V=he){const{context:K,zip215:Y}=V,te=r.BYTES;C=Re("signature",C,2*te),S=Re("message",S),P=Re("publicKey",P,te),Y!==void 0&&hr("zip215",Y),i&&(S=i(S));const ie=Dn(C.slice(te,2*te));let Q,ge,we;try{Q=E.fromHex(P,Y),ge=E.fromHex(C.slice(0,te),Y),we=F.multiplyUnsafe(ie)}catch{return!1}if(!Y&&Q.isSmallOrder())return!1;const ce=J(K,ge.toRawBytes(),Q.toRawBytes(),S);return ge.add(Q.multiplyUnsafe(ce)).subtract(we).clearCofactor().equals(E.ZERO)}return F._setWindowSize(8),{CURVE:e,getPublicKey:X,sign:W,verify:R,ExtendedPoint:E,utils:{getExtendedPublicKey:$,randomPrivateKey:()=>o(r.BYTES),precompute(C=8,S=E.BASE){return S._setWindowSize(C),S.multiply(BigInt(3)),S}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const za=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),oc=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const b1=BigInt(1),ac=BigInt(2);BigInt(3);const D1=BigInt(5),E1=BigInt(8);function v1(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=za,a=t*t%s*t%s,u=Oe(a,ac,s)*a%s,f=Oe(u,b1,s)*t%s,c=Oe(f,D1,s)*f%s,d=Oe(c,e,s)*c%s,p=Oe(d,r,s)*d%s,w=Oe(p,n,s)*p%s,y=Oe(w,i,s)*w%s,b=Oe(y,i,s)*w%s,g=Oe(b,e,s)*c%s;return{pow_p_5_8:Oe(g,ac,s)*t%s,b2:a}}function A1(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function x1(t,e){const r=za,n=Ie(e*e*e,r),i=Ie(n*n*e,r),s=v1(t*i).pow_p_5_8;let o=Ie(t*n*s,r);const a=Ie(e*o*o,r),u=o,f=Ie(o*oc,r),c=a===t,d=a===Ie(-t,r),p=a===Ie(-t*oc,r);return c&&(o=u),(d||p)&&(o=f),a1(o,r)&&(o=Ie(-o,r)),{isValid:c||d,value:o}}const C1=Ms(za,void 0,!0),B1={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:C1,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:E1,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:qb,randomBytes:mf,adjustScalarBytes:A1,uvRatio:x1},S1=w1(B1),kf=32;function F1(t,e,r){return S1.verify(e,r instanceof Uint8Array?r:r.subarray(),t)}class k1{constructor(e){x(this,"type","Ed25519");x(this,"raw");this.raw=If(e,kf)}toMultihash(){return Kr.digest(uh(this))}toCID(){return ee.createV1(114,this.toMultihash())}toString(){return Qe.encode(this.toMultihash().bytes).substring(1)}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:An(this.raw,e.raw)}verify(e,r){return F1(this.raw,r,e)}}function Tf(t){return t=If(t,kf),new k1(t)}function If(t,e){if(t=Uint8Array.from(t??[]),t.length!==e)throw new Nt(`Key must be a Uint8Array of length ${e}, got ${t.length}`);return t}const Ga=new Float32Array([-0]),kr=new Uint8Array(Ga.buffer);function T1(t,e,r){Ga[0]=t,e[r]=kr[0],e[r+1]=kr[1],e[r+2]=kr[2],e[r+3]=kr[3]}function I1(t,e){return kr[0]=t[e],kr[1]=t[e+1],kr[2]=t[e+2],kr[3]=t[e+3],Ga[0]}const qa=new Float64Array([-0]),ot=new Uint8Array(qa.buffer);function N1(t,e,r){qa[0]=t,e[r]=ot[0],e[r+1]=ot[1],e[r+2]=ot[2],e[r+3]=ot[3],e[r+4]=ot[4],e[r+5]=ot[5],e[r+6]=ot[6],e[r+7]=ot[7]}function _1(t,e){return ot[0]=t[e],ot[1]=t[e+1],ot[2]=t[e+2],ot[3]=t[e+3],ot[4]=t[e+4],ot[5]=t[e+5],ot[6]=t[e+6],ot[7]=t[e+7],qa[0]}const O1=BigInt(Number.MAX_SAFE_INTEGER),P1=BigInt(Number.MIN_SAFE_INTEGER);class at{constructor(e,r){x(this,"lo");x(this,"hi");this.lo=e|0,this.hi=r|0}toNumber(e=!1){if(!e&&this.hi>>>31>0){const r=~this.lo+1>>>0;let n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(e=!1){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const r=~this.lo+1>>>0;let n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(e=!1){return this.toBigInt(e).toString()}zzEncode(){const e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){const e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){const e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}static fromBigInt(e){if(e===0n)return Wr;if(e<O1&&e>P1)return this.fromNumber(Number(e));const r=e<0n;r&&(e=-e);let n=e>>32n,i=e-(n<<32n);return r&&(n=~n|0n,i=~i|0n,++i>uc&&(i=0n,++n>uc&&(n=0n))),new at(Number(i),Number(n))}static fromNumber(e){if(e===0)return Wr;const r=e<0;r&&(e=-e);let n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new at(n,i)}static from(e){return typeof e=="number"?at.fromNumber(e):typeof e=="bigint"?at.fromBigInt(e):typeof e=="string"?at.fromBigInt(BigInt(e)):e.low!=null||e.high!=null?new at(e.low>>>0,e.high>>>0):Wr}}const Wr=new at(0,0);Wr.toBigInt=function(){return 0n};Wr.zzEncode=Wr.zzDecode=function(){return this};Wr.length=function(){return 1};const uc=4294967296n;function U1(t){let e=0,r=0;for(let n=0;n<t.length;++n)r=t.charCodeAt(n),r<128?e+=1:r<2048?e+=2:(r&64512)===55296&&(t.charCodeAt(n+1)&64512)===56320?(++n,e+=4):e+=3;return e}function $1(t,e,r){if(r-e<1)return"";let i;const s=[];let o=0,a;for(;e<r;)a=t[e++],a<128?s[o++]=a:a>191&&a<224?s[o++]=(a&31)<<6|t[e++]&63:a>239&&a<365?(a=((a&7)<<18|(t[e++]&63)<<12|(t[e++]&63)<<6|t[e++]&63)-65536,s[o++]=55296+(a>>10),s[o++]=56320+(a&1023)):s[o++]=(a&15)<<12|(t[e++]&63)<<6|t[e++]&63,o>8191&&((i??(i=[])).push(String.fromCharCode.apply(String,s)),o=0);return i!=null?(o>0&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))}function Nf(t,e,r){const n=r;let i,s;for(let o=0;o<t.length;++o)i=t.charCodeAt(o),i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&((s=t.charCodeAt(o+1))&64512)===56320?(i=65536+((i&1023)<<10)+(s&1023),++o,e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128);return r-n}function Lt(t,e){return RangeError(`index out of range: ${t.pos} + ${e??1} > ${t.len}`)}function Vi(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}class L1{constructor(e){x(this,"buf");x(this,"pos");x(this,"len");x(this,"_slice",Uint8Array.prototype.subarray);this.buf=e,this.pos=0,this.len=e.length}uint32(){let e=4294967295;if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Lt(this,10);return e}int32(){return this.uint32()|0}sint32(){const e=this.uint32();return e>>>1^-(e&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw Lt(this,4);return Vi(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw Lt(this,4);return Vi(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw Lt(this,4);const e=I1(this.buf,this.pos);return this.pos+=4,e}double(){if(this.pos+8>this.len)throw Lt(this,4);const e=_1(this.buf,this.pos);return this.pos+=8,e}bytes(){const e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw Lt(this,e);return this.pos+=e,r===n?new Uint8Array(0):this.buf.subarray(r,n)}string(){const e=this.bytes();return $1(e,0,e.length)}skip(e){if(typeof e=="number"){if(this.pos+e>this.len)throw Lt(this,e);this.pos+=e}else do if(this.pos>=this.len)throw Lt(this);while(this.buf[this.pos++]&128);return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${e} at offset ${this.pos}`)}return this}readLongVarint(){const e=new at(0,0);let r=0;if(this.len-this.pos>4){for(;r<4;++r)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw Lt(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,e}if(this.len-this.pos>4){for(;r<5;++r)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;r<5;++r){if(this.pos>=this.len)throw Lt(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw Lt(this,8);const e=Vi(this.buf,this.pos+=4),r=Vi(this.buf,this.pos+=4);return new at(e,r)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const e=wl(this.buf,this.pos);return this.pos+=er(e),e}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function R1(t){return new L1(t instanceof Uint8Array?t:t.subarray())}function _f(t,e,r){const n=R1(t);return e.decode(n,void 0,r)}function M1(t){let n,i=8192;return function(o){if(o<1||o>4096)return xn(o);i+o>8192&&(n=xn(8192),i=0);const a=n.subarray(i,i+=o);return i&7&&(i=(i|7)+1),a}}class ei{constructor(e,r,n){x(this,"fn");x(this,"len");x(this,"next");x(this,"val");this.fn=e,this.len=r,this.next=void 0,this.val=n}}function bo(){}class V1{constructor(e){x(this,"head");x(this,"tail");x(this,"len");x(this,"next");this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}}const H1=M1();function j1(t){return globalThis.Buffer!=null?xn(t):H1(t)}class Wo{constructor(){x(this,"len");x(this,"head");x(this,"tail");x(this,"states");this.len=0,this.head=new ei(bo,0,0),this.tail=this.head,this.states=null}_push(e,r,n){return this.tail=this.tail.next=new ei(e,r,n),this.len+=r,this}uint32(e){return this.len+=(this.tail=this.tail.next=new G1((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this}int32(e){return e<0?this._push(Hi,10,at.fromNumber(e)):this.uint32(e)}sint32(e){return this.uint32((e<<1^e>>31)>>>0)}uint64(e){const r=at.fromBigInt(e);return this._push(Hi,r.length(),r)}uint64Number(e){return this._push(ml,er(e),e)}uint64String(e){return this.uint64(BigInt(e))}int64(e){return this.uint64(e)}int64Number(e){return this.uint64Number(e)}int64String(e){return this.uint64String(e)}sint64(e){const r=at.fromBigInt(e).zzEncode();return this._push(Hi,r.length(),r)}sint64Number(e){const r=at.fromNumber(e).zzEncode();return this._push(Hi,r.length(),r)}sint64String(e){return this.sint64(BigInt(e))}bool(e){return this._push(Do,1,e?1:0)}fixed32(e){return this._push(Xn,4,e>>>0)}sfixed32(e){return this.fixed32(e)}fixed64(e){const r=at.fromBigInt(e);return this._push(Xn,4,r.lo)._push(Xn,4,r.hi)}fixed64Number(e){const r=at.fromNumber(e);return this._push(Xn,4,r.lo)._push(Xn,4,r.hi)}fixed64String(e){return this.fixed64(BigInt(e))}sfixed64(e){return this.fixed64(e)}sfixed64Number(e){return this.fixed64Number(e)}sfixed64String(e){return this.fixed64String(e)}float(e){return this._push(T1,4,e)}double(e){return this._push(N1,8,e)}bytes(e){const r=e.length>>>0;return r===0?this._push(Do,1,0):this.uint32(r)._push(q1,r,e)}string(e){const r=U1(e);return r!==0?this.uint32(r)._push(Nf,r,e):this._push(Do,1,0)}fork(){return this.states=new V1(this),this.head=this.tail=new ei(bo,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ei(bo,0,0),this.len=0),this}ldelim(){const e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=e.next,this.tail=r,this.len+=n),this}finish(){let e=this.head.next;const r=j1(this.len);let n=0;for(;e!=null;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r}}function Do(t,e,r){e[r]=t&255}function z1(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}class G1 extends ei{constructor(r,n){super(z1,r,n);x(this,"next");this.next=void 0}}function Hi(t,e,r){for(;t.hi!==0;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}function Xn(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function q1(t,e,r){e.set(t,r)}globalThis.Buffer!=null&&(Wo.prototype.bytes=function(t){const e=t.length>>>0;return this.uint32(e),e>0&&this._push(W1,e,t),this},Wo.prototype.string=function(t){const e=globalThis.Buffer.byteLength(t);return this.uint32(e),e>0&&this._push(K1,e,t),this});function W1(t,e,r){e.set(t,r)}function K1(t,e,r){t.length<40?Nf(t,e,r):e.utf8Write!=null?e.utf8Write(t,r):e.set(jt(t),r)}function J1(){return new Wo}function Of(t,e){const r=J1();return e.encode(t,r,{lengthDelimited:!1}),r.finish()}var ps;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})(ps||(ps={}));function Pf(t,e,r,n){return{name:t,type:e,encode:r,decode:n}}function Y1(t){function e(i){if(t[i.toString()]==null)throw new Error("Invalid enum value");return t[i]}const r=function(s,o){const a=e(s);o.int32(a)},n=function(s){const o=s.int32();return e(o)};return Pf("enum",ps.VARINT,r,n)}function Uf(t,e){return Pf("message",ps.LENGTH_DELIMITED,t,e)}var dt;(function(t){t.RSA="RSA",t.Ed25519="Ed25519",t.secp256k1="secp256k1"})(dt||(dt={}));var Ko;(function(t){t[t.RSA=0]="RSA",t[t.Ed25519=1]="Ed25519",t[t.secp256k1=2]="secp256k1"})(Ko||(Ko={}));(function(t){t.codec=()=>Y1(Ko)})(dt||(dt={}));var kn;(function(t){let e;t.codec=()=>(e==null&&(e=Uf((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),dt.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={},o=n==null?r.len:r.pos+n;for(;r.pos<o;){const a=r.uint32();switch(a>>>3){case 1:{s.Type=dt.codec().decode(r);break}case 2:{s.Data=r.bytes();break}default:{r.skipType(a&7);break}}}return s})),e),t.encode=r=>Of(r,t.codec()),t.decode=(r,n)=>_f(r,t.codec(),n)})(kn||(kn={}));var cc;(function(t){let e;t.codec=()=>(e==null&&(e=Uf((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),dt.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n,i={})=>{const s={},o=n==null?r.len:r.pos+n;for(;r.pos<o;){const a=r.uint32();switch(a>>>3){case 1:{s.Type=dt.codec().decode(r);break}case 2:{s.Data=r.bytes();break}default:{r.skipType(a&7);break}}}return s})),e),t.encode=r=>Of(r,t.codec()),t.decode=(r,n)=>_f(r,t.codec(),n)})(cc||(cc={}));const Z1=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),xr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Cr=new Uint32Array(64);class X1 extends wf{constructor(){super(64,32,8,!1),this.A=xr[0]|0,this.B=xr[1]|0,this.C=xr[2]|0,this.D=xr[3]|0,this.E=xr[4]|0,this.F=xr[5]|0,this.G=xr[6]|0,this.H=xr[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:u}=this;return[e,r,n,i,s,o,a,u]}set(e,r,n,i,s,o,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,r){for(let d=0;d<16;d++,r+=4)Cr[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const p=Cr[d-15],w=Cr[d-2],y=Kt(p,7)^Kt(p,18)^p>>>3,b=Kt(w,17)^Kt(w,19)^w>>>10;Cr[d]=b+Cr[d-7]+y+Cr[d-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:u,G:f,H:c}=this;for(let d=0;d<64;d++){const p=Kt(a,6)^Kt(a,11)^Kt(a,25),w=c+p+Db(a,u,f)+Z1[d]+Cr[d]|0,b=(Kt(n,2)^Kt(n,13)^Kt(n,22))+Eb(n,i,s)|0;c=f,f=u,u=a,a=o+w|0,o=s,s=i,i=n,n=w+b|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,f=f+this.G|0,c=c+this.H|0,this.set(n,i,s,o,a,u,f,c)}roundClean(){Cr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const $f=yf(()=>new X1);/*!
 * MIT License
 * 
 * Copyright (c) 2017-2024 Peculiar Ventures, LLC
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const Q1="[object ArrayBuffer]";class Ce{static isArrayBuffer(e){return Object.prototype.toString.call(e)===Q1}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,r){if(e.constructor===r)return e;if(this.isArrayBuffer(e))return new r(e);if(this.isArrayBufferView(e))return new r(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,r){const n=Ce.toUint8Array(e),i=Ce.toUint8Array(r);if(n.length!==i.byteLength)return!1;for(let s=0;s<n.length;s++)if(n[s]!==i[s])return!1;return!0}static concat(...e){let r;Array.isArray(e[0])&&!(e[1]instanceof Function)||Array.isArray(e[0])&&e[1]instanceof Function?r=e[0]:e[e.length-1]instanceof Function?r=e.slice(0,e.length-1):r=e;let n=0;for(const o of r)n+=o.byteLength;const i=new Uint8Array(n);let s=0;for(const o of r){const a=this.toUint8Array(o);i.set(a,s),s+=a.length}return e[e.length-1]instanceof Function?this.toView(i,e[e.length-1]):i.buffer}}const Eo="string",eD=/^[0-9a-f\s]+$/i,tD=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,rD=/^[a-zA-Z0-9-_]+$/;class lc{static fromString(e){const r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n.buffer}static toString(e){const r=Ce.toUint8Array(e);let n="";for(let s=0;s<r.length;s++)n+=String.fromCharCode(r[s]);return decodeURIComponent(escape(n))}}class Jt{static toString(e,r=!1){const n=Ce.toArrayBuffer(e),i=new DataView(n);let s="";for(let o=0;o<n.byteLength;o+=2){const a=i.getUint16(o,r);s+=String.fromCharCode(a)}return s}static fromString(e,r=!1){const n=new ArrayBuffer(e.length*2),i=new DataView(n);for(let s=0;s<e.length;s++)i.setUint16(s*2,e.charCodeAt(s),r);return n}}class Ue{static isHex(e){return typeof e===Eo&&eD.test(e)}static isBase64(e){return typeof e===Eo&&tD.test(e)}static isBase64Url(e){return typeof e===Eo&&rD.test(e)}static ToString(e,r="utf8"){const n=Ce.toUint8Array(e);switch(r.toLowerCase()){case"utf8":return this.ToUtf8String(n);case"binary":return this.ToBinary(n);case"hex":return this.ToHex(n);case"base64":return this.ToBase64(n);case"base64url":return this.ToBase64Url(n);case"utf16le":return Jt.toString(n,!0);case"utf16":case"utf16be":return Jt.toString(n);default:throw new Error(`Unknown type of encoding '${r}'`)}}static FromString(e,r="utf8"){if(!e)return new ArrayBuffer(0);switch(r.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return Jt.fromString(e,!0);case"utf16":case"utf16be":return Jt.fromString(e);default:throw new Error(`Unknown type of encoding '${r}'`)}}static ToBase64(e){const r=Ce.toUint8Array(e);if(typeof btoa<"u"){const n=this.ToString(r,"binary");return btoa(n)}else return Buffer.from(r).toString("base64")}static FromBase64(e){const r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!Ue.isBase64(r))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(r)):new Uint8Array(Buffer.from(r,"base64")).buffer}static FromBase64Url(e){const r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!Ue.isBase64Url(r))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(r.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,r=Ue.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.FromBinary(e);case"utf8":return lc.fromString(e);case"utf16":case"utf16be":return Jt.fromString(e);case"utf16le":case"usc2":return Jt.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${r}'`)}}static ToUtf8String(e,r=Ue.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.ToBinary(e);case"utf8":return lc.toString(e);case"utf16":case"utf16be":return Jt.toString(e);case"utf16le":case"usc2":return Jt.toString(e,!0);default:throw new Error(`Unknown type of encoding '${r}'`)}}static FromBinary(e){const r=e.length,n=new Uint8Array(r);for(let i=0;i<r;i++)n[i]=e.charCodeAt(i);return n.buffer}static ToBinary(e){const r=Ce.toUint8Array(e);let n="";for(let i=0;i<r.length;i++)n+=String.fromCharCode(r[i]);return n}static ToHex(e){const r=Ce.toUint8Array(e);let n="";const i=r.length;for(let s=0;s<i;s++){const o=r[s];o<16&&(n+="0"),n+=o.toString(16)}return n}static FromHex(e){let r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!Ue.isHex(r))throw new TypeError("Argument 'hexString' is not HEX encoded");r.length%2&&(r=`0${r}`);const n=new Uint8Array(r.length/2);for(let i=0;i<r.length;i=i+2){const s=r.slice(i,i+2);n[i/2]=parseInt(s,16)}return n.buffer}static ToUtf16String(e,r=!1){return Jt.toString(e,r)}static FromUtf16String(e,r=!1){return Jt.fromString(e,r)}static Base64Padding(e){const r=4-e.length%4;if(r<4)for(let n=0;n<r;n++)e+="=";return e}static formatString(e){return(e==null?void 0:e.replace(/[\n\r\t ]/g,""))||""}}Ue.DEFAULT_UTF8_ENCODING="utf8";/*!
 Copyright (c) Peculiar Ventures, LLC
*/function Tn(t,e){let r=0;if(t.length===1)return t[0];for(let n=t.length-1;n>=0;n--)r+=t[t.length-1-n]*Math.pow(2,e*n);return r}function Qr(t,e,r=-1){const n=r;let i=t,s=0,o=Math.pow(2,e);for(let a=1;a<8;a++){if(t<o){let u;if(n<0)u=new ArrayBuffer(a),s=a;else{if(n<a)return new ArrayBuffer(0);u=new ArrayBuffer(n),s=n}const f=new Uint8Array(u);for(let c=a-1;c>=0;c--){const d=Math.pow(2,c*e);f[s-c-1]=Math.floor(i/d),i-=f[s-c-1]*d}return u}o*=Math.pow(2,e)}return new ArrayBuffer(0)}function Jo(...t){let e=0,r=0;for(const s of t)e+=s.length;const n=new ArrayBuffer(e),i=new Uint8Array(n);for(const s of t)i.set(s,r),r+=s.length;return i}function Lf(){const t=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const a=t[0]===255&&t[1]&128,u=t[0]===0&&(t[1]&128)===0;(a||u)&&this.warnings.push("Needlessly long format")}const e=new ArrayBuffer(this.valueHex.byteLength),r=new Uint8Array(e);for(let a=0;a<this.valueHex.byteLength;a++)r[a]=0;r[0]=t[0]&128;const n=Tn(r,8),i=new ArrayBuffer(this.valueHex.byteLength),s=new Uint8Array(i);for(let a=0;a<this.valueHex.byteLength;a++)s[a]=t[a];return s[0]&=127,Tn(s,8)-n}function nD(t){const e=t<0?t*-1:t;let r=128;for(let n=1;n<8;n++){if(e<=r){if(t<0){const o=r-e,a=Qr(o,8,n),u=new Uint8Array(a);return u[0]|=128,a}let i=Qr(e,8,n),s=new Uint8Array(i);if(s[0]&128){const o=i.slice(0),a=new Uint8Array(o);i=new ArrayBuffer(i.byteLength+1),s=new Uint8Array(i);for(let u=0;u<o.byteLength;u++)s[u+1]=a[u];s[0]=0}return i}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function iD(t,e){if(t.byteLength!==e.byteLength)return!1;const r=new Uint8Array(t),n=new Uint8Array(e);for(let i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0}function At(t,e){const r=t.toString(10);if(e<r.length)return"";const n=e-r.length,i=new Array(n);for(let o=0;o<n;o++)i[o]="0";return i.join("").concat(r)}/*!
 * Copyright (c) 2014, GMO GlobalSign
 * Copyright (c) 2015-2022, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */function gs(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function Wa(t){let e=0,r=0;for(let i=0;i<t.length;i++){const s=t[i];e+=s.byteLength}const n=new Uint8Array(e);for(let i=0;i<t.length;i++){const s=t[i];n.set(new Uint8Array(s),r),r+=s.byteLength}return n.buffer}function mr(t,e,r,n){return e instanceof Uint8Array?e.byteLength?r<0?(t.error="Wrong parameter: inputOffset less than zero",!1):n<0?(t.error="Wrong parameter: inputLength less than zero",!1):e.byteLength-r-n<0?(t.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(t.error="Wrong parameter: inputBuffer has zero length",!1):(t.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class Ka{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return Wa(this.items)}}const Qn=[new Uint8Array([1])],fc="0123456789",Vn="",zt=new ArrayBuffer(0),Ja=new Uint8Array(0),gi="EndOfContent",Rf="OCTET STRING",Mf="BIT STRING";function wr(t){var e;return e=class extends t{constructor(...n){var i;super(...n);const s=n[0]||{};this.isHexOnly=(i=s.isHexOnly)!==null&&i!==void 0?i:!1,this.valueHexView=s.valueHex?Ce.toUint8Array(s.valueHex):Ja}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(n){this.valueHexView=new Uint8Array(n)}fromBER(n,i,s){const o=n instanceof ArrayBuffer?new Uint8Array(n):n;if(!mr(this,o,i,s))return-1;const a=i+s;return this.valueHexView=o.subarray(i,a),this.valueHexView.length?(this.blockLength=s,a):(this.warnings.push("Zero buffer length"),i)}toBER(n=!1){return this.isHexOnly?n?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",zt)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:Ue.ToHex(this.valueHexView)}}},e.NAME="hexBlock",e}class un{constructor({blockLength:e=0,error:r=Vn,warnings:n=[],valueBeforeDecode:i=Ja}={}){this.blockLength=e,this.error=r,this.warnings=n,this.valueBeforeDecodeView=Ce.toUint8Array(i)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:Ue.ToHex(this.valueBeforeDecodeView)}}}un.NAME="baseBlock";class bt extends un{fromBER(e,r,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}bt.NAME="valueBlock";class Vf extends wr(un){constructor({idBlock:e={}}={}){var r,n,i,s;super(),e?(this.isHexOnly=(r=e.isHexOnly)!==null&&r!==void 0?r:!1,this.valueHexView=e.valueHex?Ce.toUint8Array(e.valueHex):Ja,this.tagClass=(n=e.tagClass)!==null&&n!==void 0?n:-1,this.tagNumber=(i=e.tagNumber)!==null&&i!==void 0?i:-1,this.isConstructed=(s=e.isConstructed)!==null&&s!==void 0?s:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let r=0;switch(this.tagClass){case 1:r|=0;break;case 2:r|=64;break;case 3:r|=128;break;case 4:r|=192;break;default:return this.error="Unknown tag class",zt}if(this.isConstructed&&(r|=32),this.tagNumber<31&&!this.isHexOnly){const i=new Uint8Array(1);if(!e){let s=this.tagNumber;s&=31,r|=s,i[0]=r}return i.buffer}if(!this.isHexOnly){const i=Qr(this.tagNumber,7),s=new Uint8Array(i),o=i.byteLength,a=new Uint8Array(o+1);if(a[0]=r|31,!e){for(let u=0;u<o-1;u++)a[u+1]=s[u]|128;a[o]=s[o-1]}return a.buffer}const n=new Uint8Array(this.valueHexView.byteLength+1);if(n[0]=r|31,!e){const i=this.valueHexView;for(let s=0;s<i.length-1;s++)n[s+1]=i[s]|128;n[this.valueHexView.byteLength]=i[i.length-1]}return n.buffer}fromBER(e,r,n){const i=Ce.toUint8Array(e);if(!mr(this,i,r,n))return-1;const s=i.subarray(r,r+n);if(s.length===0)return this.error="Zero buffer length",-1;switch(s[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(s[0]&32)===32,this.isHexOnly=!1;const a=s[0]&31;if(a!==31)this.tagNumber=a,this.blockLength=1;else{let u=1,f=this.valueHexView=new Uint8Array(255),c=255;for(;s[u]&128;){if(f[u-1]=s[u]&127,u++,u>=s.length)return this.error="End of input reached before message was fully decoded",-1;if(u===c){c+=255;const p=new Uint8Array(c);for(let w=0;w<f.length;w++)p[w]=f[w];f=this.valueHexView=new Uint8Array(c)}}this.blockLength=u+1,f[u-1]=s[u]&127;const d=new Uint8Array(u);for(let p=0;p<u;p++)d[p]=f[p];f=this.valueHexView=new Uint8Array(u),f.set(d),this.blockLength<=9?this.tagNumber=Tn(f,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return r+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}Vf.NAME="identificationBlock";class Hf extends un{constructor({lenBlock:e={}}={}){var r,n,i;super(),this.isIndefiniteForm=(r=e.isIndefiniteForm)!==null&&r!==void 0?r:!1,this.longFormUsed=(n=e.longFormUsed)!==null&&n!==void 0?n:!1,this.length=(i=e.length)!==null&&i!==void 0?i:0}fromBER(e,r,n){const i=Ce.toUint8Array(e);if(!mr(this,i,r,n))return-1;const s=i.subarray(r,r+n);if(s.length===0)return this.error="Zero buffer length",-1;if(s[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=s[0]===128,this.isIndefiniteForm)return this.blockLength=1,r+this.blockLength;if(this.longFormUsed=!!(s[0]&128),this.longFormUsed===!1)return this.length=s[0],this.blockLength=1,r+this.blockLength;const o=s[0]&127;if(o>8)return this.error="Too big integer",-1;if(o+1>s.length)return this.error="End of input reached before message was fully decoded",-1;const a=r+1,u=i.subarray(a,a+o);return u[o-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=Tn(u,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=o+1,r+this.blockLength}toBER(e=!1){let r,n;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return r=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(r),n[0]=128),r;if(this.longFormUsed){const i=Qr(this.length,8);if(i.byteLength>127)return this.error="Too big length",zt;if(r=new ArrayBuffer(i.byteLength+1),e)return r;const s=new Uint8Array(i);n=new Uint8Array(r),n[0]=i.byteLength|128;for(let o=0;o<i.byteLength;o++)n[o+1]=s[o];return r}return r=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(r),n[0]=this.length),r}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}Hf.NAME="lengthBlock";const q={};class ht extends un{constructor({name:e=Vn,optional:r=!1,primitiveSchema:n,...i}={},s){super(i),this.name=e,this.optional=r,n&&(this.primitiveSchema=n),this.idBlock=new Vf(i),this.lenBlock=new Hf(i),this.valueBlock=s?new s(i):new bt(i)}fromBER(e,r,n){const i=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),i)}toBER(e,r){const n=r||new Ka;r||jf(this);const i=this.idBlock.toBER(e);if(n.write(i),this.lenBlock.isIndefiniteForm)n.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,n),n.write(new ArrayBuffer(2));else{const s=this.valueBlock.toBER(e);this.lenBlock.length=s.byteLength;const o=this.lenBlock.toBER(e);n.write(o),n.write(s)}return r?zt:n.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return e==="ascii"?this.onAsciiEncoding():Ue.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${Ue.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;const r=this.toBER(),n=e.toBER();return iD(r,n)}}ht.NAME="BaseBlock";function jf(t){if(t instanceof q.Constructed)for(const e of t.valueBlock.value)jf(e)&&(t.lenBlock.isIndefiniteForm=!0);return!!t.lenBlock.isIndefiniteForm}class zf extends ht{constructor({value:e=Vn,...r}={},n){super(r,n),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,r,n){const i=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),i)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}zf.NAME="BaseStringBlock";class Gf extends wr(bt){constructor({isHexOnly:e=!0,...r}={}){super(r),this.isHexOnly=e}}Gf.NAME="PrimitiveValueBlock";var qf;class Wf extends ht{constructor(e={}){super(e,Gf),this.idBlock.isConstructed=!1}}qf=Wf;q.Primitive=qf;Wf.NAME="PRIMITIVE";function sD(t,e){if(t instanceof e)return t;const r=new e;return r.idBlock=t.idBlock,r.lenBlock=t.lenBlock,r.warnings=t.warnings,r.valueBeforeDecodeView=t.valueBeforeDecodeView,r}function Vs(t,e=0,r=t.length){const n=e;let i=new ht({},bt);const s=new un;if(!mr(s,t,e,r))return i.error=s.error,{offset:-1,result:i};if(!t.subarray(e,e+r).length)return i.error="Zero buffer length",{offset:-1,result:i};let a=i.idBlock.fromBER(t,e,r);if(i.idBlock.warnings.length&&i.warnings.concat(i.idBlock.warnings),a===-1)return i.error=i.idBlock.error,{offset:-1,result:i};if(e=a,r-=i.idBlock.blockLength,a=i.lenBlock.fromBER(t,e,r),i.lenBlock.warnings.length&&i.warnings.concat(i.lenBlock.warnings),a===-1)return i.error=i.lenBlock.error,{offset:-1,result:i};if(e=a,r-=i.lenBlock.blockLength,!i.idBlock.isConstructed&&i.lenBlock.isIndefiniteForm)return i.error="Indefinite length form used for primitive encoding form",{offset:-1,result:i};let u=ht;switch(i.idBlock.tagClass){case 1:if(i.idBlock.tagNumber>=37&&i.idBlock.isHexOnly===!1)return i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:i};switch(i.idBlock.tagNumber){case 0:if(i.idBlock.isConstructed&&i.lenBlock.length>0)return i.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:i};u=q.EndOfContent;break;case 1:u=q.Boolean;break;case 2:u=q.Integer;break;case 3:u=q.BitString;break;case 4:u=q.OctetString;break;case 5:u=q.Null;break;case 6:u=q.ObjectIdentifier;break;case 10:u=q.Enumerated;break;case 12:u=q.Utf8String;break;case 13:u=q.RelativeObjectIdentifier;break;case 14:u=q.TIME;break;case 15:return i.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:i};case 16:u=q.Sequence;break;case 17:u=q.Set;break;case 18:u=q.NumericString;break;case 19:u=q.PrintableString;break;case 20:u=q.TeletexString;break;case 21:u=q.VideotexString;break;case 22:u=q.IA5String;break;case 23:u=q.UTCTime;break;case 24:u=q.GeneralizedTime;break;case 25:u=q.GraphicString;break;case 26:u=q.VisibleString;break;case 27:u=q.GeneralString;break;case 28:u=q.UniversalString;break;case 29:u=q.CharacterString;break;case 30:u=q.BmpString;break;case 31:u=q.DATE;break;case 32:u=q.TimeOfDay;break;case 33:u=q.DateTime;break;case 34:u=q.Duration;break;default:{const f=i.idBlock.isConstructed?new q.Constructed:new q.Primitive;f.idBlock=i.idBlock,f.lenBlock=i.lenBlock,f.warnings=i.warnings,i=f}}break;case 2:case 3:case 4:default:u=i.idBlock.isConstructed?q.Constructed:q.Primitive}return i=sD(i,u),a=i.fromBER(t,e,i.lenBlock.isIndefiniteForm?r:i.lenBlock.length),i.valueBeforeDecodeView=t.subarray(n,n+i.blockLength),{offset:a,result:i}}function oD(t){if(!t.byteLength){const e=new ht({},bt);return e.error="Input buffer has zero length",{offset:-1,result:e}}return Vs(Ce.toUint8Array(t).slice(),0,t.byteLength)}function aD(t,e){return t?1:e}class Ir extends bt{constructor({value:e=[],isIndefiniteForm:r=!1,...n}={}){super(n),this.value=e,this.isIndefiniteForm=r}fromBER(e,r,n){const i=Ce.toUint8Array(e);if(!mr(this,i,r,n))return-1;if(this.valueBeforeDecodeView=i.subarray(r,r+n),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),r;let s=r;for(;aD(this.isIndefiniteForm,n)>0;){const o=Vs(i,s,n);if(o.offset===-1)return this.error=o.result.error,this.warnings.concat(o.result.warnings),-1;if(s=o.offset,this.blockLength+=o.result.blockLength,n-=o.result.blockLength,this.value.push(o.result),this.isIndefiniteForm&&o.result.constructor.NAME===gi)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===gi?this.value.pop():this.warnings.push("No EndOfContent block encoded")),s}toBER(e,r){const n=r||new Ka;for(let i=0;i<this.value.length;i++)this.value[i].toBER(e,n);return r?zt:n.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const r of this.value)e.value.push(r.toJSON());return e}}Ir.NAME="ConstructedValueBlock";var Kf;class Hn extends ht{constructor(e={}){super(e,Ir),this.idBlock.isConstructed=!0}fromBER(e,r,n){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const i=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return i===-1?(this.error=this.valueBlock.error,i):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),i)}onAsciiEncoding(){const e=[];for(const n of this.valueBlock.value)e.push(n.toString("ascii").split(`
`).map(i=>`  ${i}`).join(`
`));const r=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${r} :
${e.join(`
`)}`:`${r} :`}}Kf=Hn;q.Constructed=Kf;Hn.NAME="CONSTRUCTED";class Jf extends bt{fromBER(e,r,n){return r}toBER(e){return zt}}Jf.override="EndOfContentValueBlock";var Yf;class Zf extends ht{constructor(e={}){super(e,Jf),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}Yf=Zf;q.EndOfContent=Yf;Zf.NAME=gi;var Xf;class Ya extends ht{constructor(e={}){super(e,bt),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,r,n){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=n,r+n>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):r+n}toBER(e,r){const n=new ArrayBuffer(2);if(!e){const i=new Uint8Array(n);i[0]=5,i[1]=0}return r&&r.write(n),n}onAsciiEncoding(){return`${this.constructor.NAME}`}}Xf=Ya;q.Null=Xf;Ya.NAME="NULL";class Qf extends wr(bt){constructor({value:e,...r}={}){super(r),r.valueHex?this.valueHexView=Ce.toUint8Array(r.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,r,n){const i=Ce.toUint8Array(e);return mr(this,i,r,n)?(this.valueHexView=i.subarray(r,r+n),n>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,Lf.call(this),this.blockLength=n,r+n):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}Qf.NAME="BooleanValueBlock";var ed;let td=class extends ht{constructor(e={}){super(e,Qf),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};ed=td;q.Boolean=ed;td.NAME="BOOLEAN";class rd extends wr(Ir){constructor({isConstructed:e=!1,...r}={}){super(r),this.isConstructed=e}fromBER(e,r,n){let i=0;if(this.isConstructed){if(this.isHexOnly=!1,i=Ir.prototype.fromBER.call(this,e,r,n),i===-1)return i;for(let s=0;s<this.value.length;s++){const o=this.value[s].constructor.NAME;if(o===gi){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(o!==Rf)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,i=super.fromBER(e,r,n),this.blockLength=n;return i}toBER(e,r){return this.isConstructed?Ir.prototype.toBER.call(this,e,r):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}rd.NAME="OctetStringValueBlock";var nd;class Hs extends ht{constructor({idBlock:e={},lenBlock:r={},...n}={}){var i,s;(i=n.isConstructed)!==null&&i!==void 0||(n.isConstructed=!!(!((s=n.value)===null||s===void 0)&&s.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...r,isIndefiniteForm:!!n.isIndefiniteForm},...n},rd),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,r,n){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,n===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),r;if(!this.valueBlock.isConstructed){const s=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(r,r+n);try{if(s.byteLength){const o=Vs(s,0,s.byteLength);o.offset!==-1&&o.offset===n&&(this.valueBlock.value=[o.result])}}catch{}}return super.fromBER(e,r,n)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?Hn.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${Ue.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const e=[];for(const r of this.valueBlock.value)r instanceof Hs&&e.push(r.valueBlock.valueHexView);return Ce.concat(e)}}nd=Hs;q.OctetString=nd;Hs.NAME=Rf;class id extends wr(Ir){constructor({unusedBits:e=0,isConstructed:r=!1,...n}={}){super(n),this.unusedBits=e,this.isConstructed=r,this.blockLength=this.valueHexView.byteLength}fromBER(e,r,n){if(!n)return r;let i=-1;if(this.isConstructed){if(i=Ir.prototype.fromBER.call(this,e,r,n),i===-1)return i;for(const a of this.value){const u=a.constructor.NAME;if(u===gi){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(u!==Mf)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const f=a.valueBlock;if(this.unusedBits>0&&f.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=f.unusedBits}return i}const s=Ce.toUint8Array(e);if(!mr(this,s,r,n))return-1;const o=s.subarray(r,r+n);if(this.unusedBits=o[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const a=o.subarray(1);try{if(a.byteLength){const u=Vs(a,0,a.byteLength);u.offset!==-1&&u.offset===n-1&&(this.value=[u.result])}}catch{}}return this.valueHexView=o.subarray(1),this.blockLength=o.length,r+n}toBER(e,r){if(this.isConstructed)return Ir.prototype.toBER.call(this,e,r);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return zt;const n=new Uint8Array(this.valueHexView.length+1);return n[0]=this.unusedBits,n.set(this.valueHexView,1),n.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}id.NAME="BitStringValueBlock";var sd;class Za extends ht{constructor({idBlock:e={},lenBlock:r={},...n}={}){var i,s;(i=n.isConstructed)!==null&&i!==void 0||(n.isConstructed=!!(!((s=n.value)===null||s===void 0)&&s.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...r,isIndefiniteForm:!!n.isIndefiniteForm},...n},id),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,r,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,r,n)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return Hn.prototype.onAsciiEncoding.call(this);{const e=[],r=this.valueBlock.valueHexView;for(const i of r)e.push(i.toString(2).padStart(8,"0"));const n=e.join("");return`${this.constructor.NAME} : ${n.substring(0,n.length-this.valueBlock.unusedBits)}`}}}sd=Za;q.BitString=sd;Za.NAME=Mf;var od;function uD(t,e){const r=new Uint8Array([0]),n=new Uint8Array(t),i=new Uint8Array(e);let s=n.slice(0);const o=s.length-1,a=i.slice(0),u=a.length-1;let f=0;const c=u<o?o:u;let d=0;for(let p=c;p>=0;p--,d++){switch(!0){case d<a.length:f=s[o-d]+a[u-d]+r[0];break;default:f=s[o-d]+r[0]}switch(r[0]=f/10,!0){case d>=s.length:s=Jo(new Uint8Array([f%10]),s);break;default:s[o-d]=f%10}}return r[0]>0&&(s=Jo(r,s)),s}function dc(t){if(t>=Qn.length)for(let e=Qn.length;e<=t;e++){const r=new Uint8Array([0]);let n=Qn[e-1].slice(0);for(let i=n.length-1;i>=0;i--){const s=new Uint8Array([(n[i]<<1)+r[0]]);r[0]=s[0]/10,n[i]=s[0]%10}r[0]>0&&(n=Jo(r,n)),Qn.push(n)}return Qn[t]}function cD(t,e){let r=0;const n=new Uint8Array(t),i=new Uint8Array(e),s=n.slice(0),o=s.length-1,a=i.slice(0),u=a.length-1;let f,c=0;for(let d=u;d>=0;d--,c++)switch(f=s[o-c]-a[u-c]-r,!0){case f<0:r=1,s[o-c]=f+10;break;default:r=0,s[o-c]=f}if(r>0)for(let d=o-u+1;d>=0;d--,c++)if(f=s[o-c]-r,f<0)r=1,s[o-c]=f+10;else{r=0,s[o-c]=f;break}return s.slice()}class Xa extends wr(bt){constructor({value:e,...r}={}){super(r),this._valueDec=0,r.valueHex&&this.setValueHex(),e!==void 0&&(this.valueDec=e)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=Lf.call(this)))}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(nD(e))}get valueDec(){return this._valueDec}fromDER(e,r,n,i=0){const s=this.fromBER(e,r,n);if(s===-1)return s;const o=this.valueHexView;return o[0]===0&&o[1]&128?this.valueHexView=o.subarray(1):i!==0&&o.length<i&&(i-o.length>1&&(i=o.length+1),this.valueHexView=o.subarray(i-o.length)),s}toDER(e=!1){const r=this.valueHexView;switch(!0){case(r[0]&128)!==0:{const n=new Uint8Array(this.valueHexView.length+1);n[0]=0,n.set(r,1),this.valueHexView=n}break;case(r[0]===0&&(r[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(e)}fromBER(e,r,n){const i=super.fromBER(e,r,n);return i===-1||this.setValueHex(),i}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=this.valueHexView.length*8-1;let r=new Uint8Array(this.valueHexView.length*8/3),n=0,i;const s=this.valueHexView;let o="",a=!1;for(let u=s.byteLength-1;u>=0;u--){i=s[u];for(let f=0;f<8;f++){if((i&1)===1)switch(n){case e:r=cD(dc(n),r),o="-";break;default:r=uD(r,dc(n))}n++,i>>=1}}for(let u=0;u<r.length;u++)r[u]&&(a=!0),a&&(o+=fc.charAt(r[u]));return a===!1&&(o+=fc.charAt(0)),o}}od=Xa;Xa.NAME="IntegerValueBlock";Object.defineProperty(od.prototype,"valueHex",{set:function(t){this.valueHexView=new Uint8Array(t),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});var ad;class pr extends ht{constructor(e={}){super(e,Xa),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return gs(),BigInt(this.valueBlock.toString())}static fromBigInt(e){gs();const r=BigInt(e),n=new Ka,i=r.toString(16).replace(/^-/,""),s=new Uint8Array(Ue.FromHex(i));if(r<0){const a=new Uint8Array(s.length+(s[0]&128?1:0));a[0]|=128;const f=BigInt(`0x${Ue.ToHex(a)}`)+r,c=Ce.toUint8Array(Ue.FromHex(f.toString(16)));c[0]|=128,n.write(c)}else s[0]&128&&n.write(new Uint8Array([0])),n.write(s);return new pr({valueHex:n.final()})}convertToDER(){const e=new pr({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new pr({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}ad=pr;q.Integer=ad;pr.NAME="INTEGER";var ud;class cd extends pr{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}ud=cd;q.Enumerated=ud;cd.NAME="ENUMERATED";class Yo extends wr(bt){constructor({valueDec:e=-1,isFirstSid:r=!1,...n}={}){super(n),this.valueDec=e,this.isFirstSid=r}fromBER(e,r,n){if(!n)return r;const i=Ce.toUint8Array(e);if(!mr(this,i,r,n))return-1;const s=i.subarray(r,r+n);this.valueHexView=new Uint8Array(n);for(let a=0;a<n&&(this.valueHexView[a]=s[a]&127,this.blockLength++,!!(s[a]&128));a++);const o=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength;a++)o[a]=this.valueHexView[a];return this.valueHexView=o,s[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=Tn(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}set valueBigInt(e){gs();let r=BigInt(e).toString(2);for(;r.length%7;)r="0"+r;const n=new Uint8Array(r.length/7);for(let i=0;i<n.length;i++)n[i]=parseInt(r.slice(i*7,i*7+7),2)+(i+1<n.length?128:0);this.fromBER(n.buffer,0,n.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const i=this.valueHexView,s=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength-1;o++)s[o]=i[o]|128;return s[this.blockLength-1]=i[this.blockLength-1],s.buffer}const r=Qr(this.valueDec,7);if(r.byteLength===0)return this.error="Error during encoding SID value",zt;const n=new Uint8Array(r.byteLength);if(!e){const i=new Uint8Array(r),s=r.byteLength-1;for(let o=0;o<s;o++)n[o]=i[o]|128;n[s]=i[s]}return n}toString(){let e="";if(this.isHexOnly)e=Ue.ToHex(this.valueHexView);else if(this.isFirstSid){let r=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",r-=40):(e="2.",r-=80),e+=r.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}Yo.NAME="sidBlock";class ld extends bt{constructor({value:e=Vn,...r}={}){super(r),this.value=[],e&&this.fromString(e)}fromBER(e,r,n){let i=r;for(;n>0;){const s=new Yo;if(i=s.fromBER(e,i,n),i===-1)return this.blockLength=0,this.error=s.error,i;this.value.length===0&&(s.isFirstSid=!0),this.blockLength+=s.blockLength,n-=s.blockLength,this.value.push(s)}return i}toBER(e){const r=[];for(let n=0;n<this.value.length;n++){const i=this.value[n].toBER(e);if(i.byteLength===0)return this.error=this.value[n].error,zt;r.push(i)}return Wa(r)}fromString(e){this.value=[];let r=0,n=0,i="",s=!1;do if(n=e.indexOf(".",r),n===-1?i=e.substring(r):i=e.substring(r,n),r=n+1,s){const o=this.value[0];let a=0;switch(o.valueDec){case 0:break;case 1:a=40;break;case 2:a=80;break;default:this.value=[];return}const u=parseInt(i,10);if(isNaN(u))return;o.valueDec=u+a,s=!1}else{const o=new Yo;if(i>Number.MAX_SAFE_INTEGER){gs();const a=BigInt(i);o.valueBigInt=a}else if(o.valueDec=parseInt(i,10),isNaN(o.valueDec))return;this.value.length||(o.isFirstSid=!0,s=!0),this.value.push(o)}while(n!==-1)}toString(){let e="",r=!1;for(let n=0;n<this.value.length;n++){r=this.value[n].isHexOnly;let i=this.value[n].toString();n!==0&&(e=`${e}.`),r?(i=`{${i}}`,this.value[n].isFirstSid?e=`2.{${i} - 80}`:e+=i):e+=i}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}}ld.NAME="ObjectIdentifierValueBlock";var fd;class Qa extends ht{constructor(e={}){super(e,ld),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}fd=Qa;q.ObjectIdentifier=fd;Qa.NAME="OBJECT IDENTIFIER";class Zo extends wr(un){constructor({valueDec:e=0,...r}={}){super(r),this.valueDec=e}fromBER(e,r,n){if(n===0)return r;const i=Ce.toUint8Array(e);if(!mr(this,i,r,n))return-1;const s=i.subarray(r,r+n);this.valueHexView=new Uint8Array(n);for(let a=0;a<n&&(this.valueHexView[a]=s[a]&127,this.blockLength++,!!(s[a]&128));a++);const o=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength;a++)o[a]=this.valueHexView[a];return this.valueHexView=o,s[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=Tn(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const i=this.valueHexView,s=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength-1;o++)s[o]=i[o]|128;return s[this.blockLength-1]=i[this.blockLength-1],s.buffer}const r=Qr(this.valueDec,7);if(r.byteLength===0)return this.error="Error during encoding SID value",zt;const n=new Uint8Array(r.byteLength);if(!e){const i=new Uint8Array(r),s=r.byteLength-1;for(let o=0;o<s;o++)n[o]=i[o]|128;n[s]=i[s]}return n.buffer}toString(){let e="";return this.isHexOnly?e=Ue.ToHex(this.valueHexView):e=this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}Zo.NAME="relativeSidBlock";class dd extends bt{constructor({value:e=Vn,...r}={}){super(r),this.value=[],e&&this.fromString(e)}fromBER(e,r,n){let i=r;for(;n>0;){const s=new Zo;if(i=s.fromBER(e,i,n),i===-1)return this.blockLength=0,this.error=s.error,i;this.blockLength+=s.blockLength,n-=s.blockLength,this.value.push(s)}return i}toBER(e,r){const n=[];for(let i=0;i<this.value.length;i++){const s=this.value[i].toBER(e);if(s.byteLength===0)return this.error=this.value[i].error,zt;n.push(s)}return Wa(n)}fromString(e){this.value=[];let r=0,n=0,i="";do{n=e.indexOf(".",r),n===-1?i=e.substring(r):i=e.substring(r,n),r=n+1;const s=new Zo;if(s.valueDec=parseInt(i,10),isNaN(s.valueDec))return!0;this.value.push(s)}while(n!==-1);return!0}toString(){let e="",r=!1;for(let n=0;n<this.value.length;n++){r=this.value[n].isHexOnly;let i=this.value[n].toString();n!==0&&(e=`${e}.`),r&&(i=`{${i}}`),e+=i}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}}dd.NAME="RelativeObjectIdentifierValueBlock";var hd;class pd extends ht{constructor(e={}){super(e,dd),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}hd=pd;q.RelativeObjectIdentifier=hd;pd.NAME="RelativeObjectIdentifier";var gd;class si extends Hn{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}gd=si;q.Sequence=gd;si.NAME="SEQUENCE";var yd;let md=class extends Hn{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};yd=md;q.Set=yd;md.NAME="SET";class wd extends wr(bt){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=Vn}toJSON(){return{...super.toJSON(),value:this.value}}}wd.NAME="StringValueBlock";class bd extends wd{}bd.NAME="SimpleStringValueBlock";class St extends zf{constructor({...e}={}){super(e,bd)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,Ce.toUint8Array(e))}fromString(e){const r=e.length,n=this.valueBlock.valueHexView=new Uint8Array(r);for(let i=0;i<r;i++)n[i]=e.charCodeAt(i);this.valueBlock.value=e}}St.NAME="SIMPLE STRING";class Dd extends St{fromBuffer(e){this.valueBlock.valueHexView=Ce.toUint8Array(e);try{this.valueBlock.value=Ue.ToUtf8String(e)}catch(r){this.warnings.push(`Error during "decodeURIComponent": ${r}, using raw string`),this.valueBlock.value=Ue.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(Ue.FromUtf8String(e)),this.valueBlock.value=e}}Dd.NAME="Utf8StringValueBlock";var Ed;class cn extends Dd{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}Ed=cn;q.Utf8String=Ed;cn.NAME="UTF8String";class vd extends St{fromBuffer(e){this.valueBlock.value=Ue.ToUtf16String(e),this.valueBlock.valueHexView=Ce.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(Ue.FromUtf16String(e))}}vd.NAME="BmpStringValueBlock";var Ad;class xd extends vd{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}Ad=xd;q.BmpString=Ad;xd.NAME="BMPString";class Cd extends St{fromBuffer(e){const r=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),n=new Uint8Array(r);for(let i=0;i<n.length;i+=4)n[i]=n[i+3],n[i+1]=n[i+2],n[i+2]=0,n[i+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(r))}fromString(e){const r=e.length,n=this.valueBlock.valueHexView=new Uint8Array(r*4);for(let i=0;i<r;i++){const s=Qr(e.charCodeAt(i),8),o=new Uint8Array(s);if(o.length>4)continue;const a=4-o.length;for(let u=o.length-1;u>=0;u--)n[i*4+u+a]=o[u]}this.valueBlock.value=e}}Cd.NAME="UniversalStringValueBlock";var Bd;class Sd extends Cd{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}Bd=Sd;q.UniversalString=Bd;Sd.NAME="UniversalString";var Fd;class kd extends St{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}Fd=kd;q.NumericString=Fd;kd.NAME="NumericString";var Td;class Id extends St{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}Td=Id;q.PrintableString=Td;Id.NAME="PrintableString";var Nd;class _d extends St{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}Nd=_d;q.TeletexString=Nd;_d.NAME="TeletexString";var Od;class Pd extends St{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}Od=Pd;q.VideotexString=Od;Pd.NAME="VideotexString";var Ud;class $d extends St{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}Ud=$d;q.IA5String=Ud;$d.NAME="IA5String";var Ld;class Rd extends St{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}Ld=Rd;q.GraphicString=Ld;Rd.NAME="GraphicString";var Md;class eu extends St{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}Md=eu;q.VisibleString=Md;eu.NAME="VisibleString";var Vd;class Hd extends St{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}Vd=Hd;q.GeneralString=Vd;Hd.NAME="GeneralString";var jd;class zd extends St{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}jd=zd;q.CharacterString=jd;zd.NAME="CharacterString";var Gd;class tu extends eu{constructor({value:e,valueDate:r,...n}={}){if(super(n),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let i=0;i<e.length;i++)this.valueBlock.valueHexView[i]=e.charCodeAt(i)}r&&(this.fromDate(r),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,Ce.toUint8Array(e)))}toBuffer(){const e=this.toString(),r=new ArrayBuffer(e.length),n=new Uint8Array(r);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return r}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const n=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(n===null){this.error="Wrong input string for conversion";return}const i=parseInt(n[1],10);i>=50?this.year=1900+i:this.year=2e3+i,this.month=parseInt(n[2],10),this.day=parseInt(n[3],10),this.hour=parseInt(n[4],10),this.minute=parseInt(n[5],10),this.second=parseInt(n[6],10)}toString(e="iso"){if(e==="iso"){const r=new Array(7);return r[0]=At(this.year<2e3?this.year-1900:this.year-2e3,2),r[1]=At(this.month,2),r[2]=At(this.day,2),r[3]=At(this.hour,2),r[4]=At(this.minute,2),r[5]=At(this.second,2),r[6]="Z",r.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}Gd=tu;q.UTCTime=Gd;tu.NAME="UTCTime";var qd;class Wd extends tu{constructor(e={}){var r;super(e),(r=this.millisecond)!==null&&r!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let r=!1,n="",i="",s=0,o,a=0,u=0;if(e[e.length-1]==="Z")n=e.substring(0,e.length-1),r=!0;else{const d=new Number(e[e.length-1]);if(isNaN(d.valueOf()))throw new Error("Wrong input string for conversion");n=e}if(r){if(n.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(n.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let d=1,p=n.indexOf("+"),w="";if(p===-1&&(p=n.indexOf("-"),d=-1),p!==-1){if(w=n.substring(p+1),n=n.substring(0,p),w.length!==2&&w.length!==4)throw new Error("Wrong input string for conversion");let y=parseInt(w.substring(0,2),10);if(isNaN(y.valueOf()))throw new Error("Wrong input string for conversion");if(a=d*y,w.length===4){if(y=parseInt(w.substring(2,4),10),isNaN(y.valueOf()))throw new Error("Wrong input string for conversion");u=d*y}}}let f=n.indexOf(".");if(f===-1&&(f=n.indexOf(",")),f!==-1){const d=new Number(`0${n.substring(f)}`);if(isNaN(d.valueOf()))throw new Error("Wrong input string for conversion");s=d.valueOf(),i=n.substring(0,f)}else i=n;switch(!0){case i.length===8:if(o=/(\d{4})(\d{2})(\d{2})/ig,f!==-1)throw new Error("Wrong input string for conversion");break;case i.length===10:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,f!==-1){let d=60*s;this.minute=Math.floor(d),d=60*(d-this.minute),this.second=Math.floor(d),d=1e3*(d-this.second),this.millisecond=Math.floor(d)}break;case i.length===12:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,f!==-1){let d=60*s;this.second=Math.floor(d),d=1e3*(d-this.second),this.millisecond=Math.floor(d)}break;case i.length===14:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,f!==-1){const d=1e3*s;this.millisecond=Math.floor(d)}break;default:throw new Error("Wrong input string for conversion")}const c=o.exec(i);if(c===null)throw new Error("Wrong input string for conversion");for(let d=1;d<c.length;d++)switch(d){case 1:this.year=parseInt(c[d],10);break;case 2:this.month=parseInt(c[d],10);break;case 3:this.day=parseInt(c[d],10);break;case 4:this.hour=parseInt(c[d],10)+a;break;case 5:this.minute=parseInt(c[d],10)+u;break;case 6:this.second=parseInt(c[d],10);break;default:throw new Error("Wrong input string for conversion")}if(r===!1){const d=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=d.getUTCFullYear(),this.month=d.getUTCMonth(),this.day=d.getUTCDay(),this.hour=d.getUTCHours(),this.minute=d.getUTCMinutes(),this.second=d.getUTCSeconds(),this.millisecond=d.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){const r=[];return r.push(At(this.year,4)),r.push(At(this.month,2)),r.push(At(this.day,2)),r.push(At(this.hour,2)),r.push(At(this.minute,2)),r.push(At(this.second,2)),this.millisecond!==0&&(r.push("."),r.push(At(this.millisecond,3))),r.push("Z"),r.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}qd=Wd;q.GeneralizedTime=qd;Wd.NAME="GeneralizedTime";var Kd;class Jd extends cn{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}Kd=Jd;q.DATE=Kd;Jd.NAME="DATE";var Yd;class Zd extends cn{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}Yd=Zd;q.TimeOfDay=Yd;Zd.NAME="TimeOfDay";var Xd;class Qd extends cn{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}Xd=Qd;q.DateTime=Xd;Qd.NAME="DateTime";var eh;class th extends cn{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}eh=th;q.Duration=eh;th.NAME="Duration";var rh;class nh extends cn{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}rh=nh;q.TIME=rh;nh.NAME="TIME";class hc extends Error{constructor(e="An error occurred while verifying a message"){super(e),this.name="VerificationError"}}class lD extends Error{constructor(e="Missing Web Crypto API"){super(e),this.name="WebCryptoMissingError"}}const pc={get(t=globalThis){const e=t.crypto;if((e==null?void 0:e.subtle)==null)throw new lD("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return e}};async function fD(t,e,r){const n=await pc.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return pc.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,e,r instanceof Uint8Array?r:r.subarray())}function dD(t){if(t.kty!=="RSA")throw new Nt("invalid key type");if(t.n==null)throw new Nt("invalid key modulus");return jt(t.n,"base64url").length*8}class hD{constructor(e,r){x(this,"type","RSA");x(this,"_key");x(this,"_raw");x(this,"_multihash");this._key=e,this._multihash=r}get raw(){return this._raw==null&&(this._raw=mD(this._key)),this._raw}toMultihash(){return this._multihash}toCID(){return ee.createV1(114,this._multihash)}toString(){return Qe.encode(this.toMultihash().bytes).substring(1)}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:An(this.raw,e.raw)}verify(e,r){return fD(this._key,r,e)}}const pD=8192,gD=18;function yD(t){const{result:e}=oD(t),r=e.valueBlock.value[1].valueBlock.value[0].valueBlock.value;return{kty:"RSA",n:gc(r[0]),e:gc(r[1])}}function mD(t){if(t.n==null||t.e==null)throw new Nt("JWK was missing components");const r=new si({value:[new si({value:[new Qa({value:"1.2.840.113549.1.1.1"}),new Ya]}),new Za({valueHex:new si({value:[pr.fromBigInt(yc(jt(t.n,"base64url"))),pr.fromBigInt(yc(jt(t.e,"base64url")))]}).toBER()})]}).toBER();return new Uint8Array(r,0,r.byteLength)}function gc(t){let e=t.valueBlock.valueHexView;for(;e[0]===0;)e=e.subarray(1);return Ze(e,"base64url")}function yc(t){const e=[];return t.forEach(function(r){let n=r.toString(16);n.length%2>0&&(n=`0${n}`),e.push(n)}),BigInt("0x"+e.join(""))}function wD(t){const e=yD(t);if(dD(e)>pD)throw new $a("Key size is too large");const r=$f(kn.encode({Type:dt.RSA,Data:t})),n=ci(gD,r);return new hD(e,n)}class ih extends gf{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,gb(e);const n=Ma(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return hs(this),this.iHash.update(e),this}digestInto(e){hs(this),Us(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const sh=(t,e,r)=>new ih(t,e).update(r).digest();sh.create=(t,e)=>new ih(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function mc(t){t.lowS!==void 0&&hr("lowS",t.lowS),t.prehash!==void 0&&hr("prehash",t.prehash)}function bD(t){const e=ja(t);Mn(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:DD,hexToBytes:ED}=r1;class vD extends Error{constructor(e=""){super(e)}}const cr={Err:vD,_tlv:{encode:(t,e)=>{const{Err:r}=cr;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=gn(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?gn(i.length/2|128):"";return gn(t)+s+i+e},decode(t,e){const{Err:r}=cr;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const u=i&127;if(!u)throw new r("tlv.decode(long): indefinite length not supported");if(u>4)throw new r("tlv.decode(long): byte length is too big");const f=e.subarray(n,n+u);if(f.length!==u)throw new r("tlv.decode: length bytes not complete");if(f[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const c of f)o=o<<8|c;if(n+=u,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=cr;if(t<fr)throw new e("integer: negative integers are not allowed");let r=gn(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=cr;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return DD(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=cr,i=typeof t=="string"?ED(t):t;Bi(i);const{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:u}=n.decode(2,s),{v:f,l:c}=n.decode(2,u);if(c.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(f)}},hexFromSig(t){const{_tlv:e,_int:r}=cr,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),s=n+i;return e.encode(48,s)}},fr=BigInt(0),Je=BigInt(1);BigInt(2);const wc=BigInt(3);BigInt(4);function AD(t){const e=bD(t),{Fp:r}=e,n=Ms(e.n,e.nBitLength),i=e.toBytes||((b,g,D)=>{const v=g.toAffine();return Xr(Uint8Array.from([4]),r.toBytes(v.x),r.toBytes(v.y))}),s=e.fromBytes||(b=>{const g=b.subarray(1),D=r.fromBytes(g.subarray(0,r.BYTES)),v=r.fromBytes(g.subarray(r.BYTES,2*r.BYTES));return{x:D,y:v}});function o(b){const{a:g,b:D}=e,v=r.sqr(b),E=r.mul(v,b);return r.add(r.add(E,r.mul(b,g)),D)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(b){return Rs(b,Je,e.n)}function u(b){const{allowedPrivateKeyLengths:g,nByteLength:D,wrapPrivateKey:v,n:E}=e;if(g&&typeof b!="bigint"){if(Yr(b)&&(b=Zr(b)),typeof b!="string"||!g.includes(b.length))throw new Error("invalid private key");b=b.padStart(D*2,"0")}let F;try{F=typeof b=="bigint"?b:qr(Re("private key",b,D))}catch{throw new Error("invalid private key, expected hex or "+D+" bytes, got "+typeof b)}return v&&(F=Ie(F,E)),It("private key",F,Je,E),F}function f(b){if(!(b instanceof p))throw new Error("ProjectivePoint expected")}const c=pi((b,g)=>{const{px:D,py:v,pz:E}=b;if(r.eql(E,r.ONE))return{x:D,y:v};const F=b.is0();g==null&&(g=F?r.ONE:r.inv(E));const T=r.mul(D,g),k=r.mul(v,g),I=r.mul(E,g);if(F)return{x:r.ZERO,y:r.ZERO};if(!r.eql(I,r.ONE))throw new Error("invZ was invalid");return{x:T,y:k}}),d=pi(b=>{if(b.is0()){if(e.allowInfinityPoint&&!r.is0(b.py))return;throw new Error("bad point: ZERO")}const{x:g,y:D}=b.toAffine();if(!r.isValid(g)||!r.isValid(D))throw new Error("bad point: x or y not FE");const v=r.sqr(D),E=o(g);if(!r.eql(v,E))throw new Error("bad point: equation left != right");if(!b.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class p{constructor(g,D,v){if(this.px=g,this.py=D,this.pz=v,g==null||!r.isValid(g))throw new Error("x required");if(D==null||!r.isValid(D))throw new Error("y required");if(v==null||!r.isValid(v))throw new Error("z required");Object.freeze(this)}static fromAffine(g){const{x:D,y:v}=g||{};if(!g||!r.isValid(D)||!r.isValid(v))throw new Error("invalid affine point");if(g instanceof p)throw new Error("projective point not allowed");const E=F=>r.eql(F,r.ZERO);return E(D)&&E(v)?p.ZERO:new p(D,v,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const D=r.invertBatch(g.map(v=>v.pz));return g.map((v,E)=>v.toAffine(D[E])).map(p.fromAffine)}static fromHex(g){const D=p.fromAffine(s(Re("pointHex",g)));return D.assertValidity(),D}static fromPrivateKey(g){return p.BASE.multiply(u(g))}static msm(g,D){return Ff(p,n,g,D)}_setWindowSize(g){y.setWindowSize(this,g)}assertValidity(){d(this)}hasEvenY(){const{y:g}=this.toAffine();if(r.isOdd)return!r.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){f(g);const{px:D,py:v,pz:E}=this,{px:F,py:T,pz:k}=g,I=r.eql(r.mul(D,k),r.mul(F,E)),_=r.eql(r.mul(v,k),r.mul(T,E));return I&&_}negate(){return new p(this.px,r.neg(this.py),this.pz)}double(){const{a:g,b:D}=e,v=r.mul(D,wc),{px:E,py:F,pz:T}=this;let k=r.ZERO,I=r.ZERO,_=r.ZERO,$=r.mul(E,E),X=r.mul(F,F),J=r.mul(T,T),W=r.mul(E,F);return W=r.add(W,W),_=r.mul(E,T),_=r.add(_,_),k=r.mul(g,_),I=r.mul(v,J),I=r.add(k,I),k=r.sub(X,I),I=r.add(X,I),I=r.mul(k,I),k=r.mul(W,k),_=r.mul(v,_),J=r.mul(g,J),W=r.sub($,J),W=r.mul(g,W),W=r.add(W,_),_=r.add($,$),$=r.add(_,$),$=r.add($,J),$=r.mul($,W),I=r.add(I,$),J=r.mul(F,T),J=r.add(J,J),$=r.mul(J,W),k=r.sub(k,$),_=r.mul(J,X),_=r.add(_,_),_=r.add(_,_),new p(k,I,_)}add(g){f(g);const{px:D,py:v,pz:E}=this,{px:F,py:T,pz:k}=g;let I=r.ZERO,_=r.ZERO,$=r.ZERO;const X=e.a,J=r.mul(e.b,wc);let W=r.mul(D,F),he=r.mul(v,T),R=r.mul(E,k),z=r.add(D,v),C=r.add(F,T);z=r.mul(z,C),C=r.add(W,he),z=r.sub(z,C),C=r.add(D,E);let S=r.add(F,k);return C=r.mul(C,S),S=r.add(W,R),C=r.sub(C,S),S=r.add(v,E),I=r.add(T,k),S=r.mul(S,I),I=r.add(he,R),S=r.sub(S,I),$=r.mul(X,C),I=r.mul(J,R),$=r.add(I,$),I=r.sub(he,$),$=r.add(he,$),_=r.mul(I,$),he=r.add(W,W),he=r.add(he,W),R=r.mul(X,R),C=r.mul(J,C),he=r.add(he,R),R=r.sub(W,R),R=r.mul(X,R),C=r.add(C,R),W=r.mul(he,C),_=r.add(_,W),W=r.mul(S,C),I=r.mul(z,I),I=r.sub(I,W),W=r.mul(z,he),$=r.mul(S,$),$=r.add($,W),new p(I,_,$)}subtract(g){return this.add(g.negate())}is0(){return this.equals(p.ZERO)}wNAF(g){return y.wNAFCached(this,g,p.normalizeZ)}multiplyUnsafe(g){const{endo:D,n:v}=e;It("scalar",g,fr,v);const E=p.ZERO;if(g===fr)return E;if(this.is0()||g===Je)return this;if(!D||y.hasPrecomputes(this))return y.wNAFCachedUnsafe(this,g,p.normalizeZ);let{k1neg:F,k1:T,k2neg:k,k2:I}=D.splitScalar(g),_=E,$=E,X=this;for(;T>fr||I>fr;)T&Je&&(_=_.add(X)),I&Je&&($=$.add(X)),X=X.double(),T>>=Je,I>>=Je;return F&&(_=_.negate()),k&&($=$.negate()),$=new p(r.mul($.px,D.beta),$.py,$.pz),_.add($)}multiply(g){const{endo:D,n:v}=e;It("scalar",g,Je,v);let E,F;if(D){const{k1neg:T,k1:k,k2neg:I,k2:_}=D.splitScalar(g);let{p:$,f:X}=this.wNAF(k),{p:J,f:W}=this.wNAF(_);$=y.constTimeNegate(T,$),J=y.constTimeNegate(I,J),J=new p(r.mul(J.px,D.beta),J.py,J.pz),E=$.add(J),F=X.add(W)}else{const{p:T,f:k}=this.wNAF(g);E=T,F=k}return p.normalizeZ([E,F])[0]}multiplyAndAddUnsafe(g,D,v){const E=p.BASE,F=(k,I)=>I===fr||I===Je||!k.equals(E)?k.multiplyUnsafe(I):k.multiply(I),T=F(this,D).add(F(g,v));return T.is0()?void 0:T}toAffine(g){return c(this,g)}isTorsionFree(){const{h:g,isTorsionFree:D}=e;if(g===Je)return!0;if(D)return D(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:D}=e;return g===Je?this:D?D(p,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return hr("isCompressed",g),this.assertValidity(),i(p,this,g)}toHex(g=!0){return hr("isCompressed",g),Zr(this.toRawBytes(g))}}p.BASE=new p(e.Gx,e.Gy,r.ONE),p.ZERO=new p(r.ZERO,r.ONE,r.ZERO);const w=e.nBitLength,y=Sf(p,e.endo?Math.ceil(w/2):w);return{CURVE:e,ProjectivePoint:p,normPrivateKeyToScalar:u,weierstrassEquation:o,isWithinCurveOrder:a}}function xD(t){const e=ja(t);return Mn(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function CD(t){const e=xD(t),{Fp:r,n}=e,i=r.BYTES+1,s=2*r.BYTES+1;function o(R){return Ie(R,n)}function a(R){return qo(R,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:c,isWithinCurveOrder:d}=AD({...e,toBytes(R,z,C){const S=z.toAffine(),P=r.toBytes(S.x),V=Xr;return hr("isCompressed",C),C?V(Uint8Array.from([z.hasEvenY()?2:3]),P):V(Uint8Array.from([4]),P,r.toBytes(S.y))},fromBytes(R){const z=R.length,C=R[0],S=R.subarray(1);if(z===i&&(C===2||C===3)){const P=qr(S);if(!Rs(P,Je,r.ORDER))throw new Error("Point is not on curve");const V=c(P);let K;try{K=r.sqrt(V)}catch(ie){const Q=ie instanceof Error?": "+ie.message:"";throw new Error("Point is not on curve"+Q)}const Y=(K&Je)===Je;return(C&1)===1!==Y&&(K=r.neg(K)),{x:P,y:K}}else if(z===s&&C===4){const P=r.fromBytes(S.subarray(0,r.BYTES)),V=r.fromBytes(S.subarray(r.BYTES,2*r.BYTES));return{x:P,y:V}}else{const P=i,V=s;throw new Error("invalid Point, expected length of "+P+", or uncompressed "+V+", got "+z)}}}),p=R=>Zr(Fn(R,e.nByteLength));function w(R){const z=n>>Je;return R>z}function y(R){return w(R)?o(-R):R}const b=(R,z,C)=>qr(R.slice(z,C));class g{constructor(z,C,S){this.r=z,this.s=C,this.recovery=S,this.assertValidity()}static fromCompact(z){const C=e.nByteLength;return z=Re("compactSignature",z,C*2),new g(b(z,0,C),b(z,C,2*C))}static fromDER(z){const{r:C,s:S}=cr.toSig(Re("DER",z));return new g(C,S)}assertValidity(){It("r",this.r,Je,n),It("s",this.s,Je,n)}addRecoveryBit(z){return new g(this.r,this.s,z)}recoverPublicKey(z){const{r:C,s:S,recovery:P}=this,V=k(Re("msgHash",z));if(P==null||![0,1,2,3].includes(P))throw new Error("recovery id invalid");const K=P===2||P===3?C+e.n:C;if(K>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const Y=P&1?"03":"02",te=u.fromHex(Y+p(K)),ie=a(K),Q=o(-V*ie),ge=o(S*ie),we=u.BASE.multiplyAndAddUnsafe(te,Q,ge);if(!we)throw new Error("point at infinify");return we.assertValidity(),we}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Sn(this.toDERHex())}toDERHex(){return cr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Sn(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const D={isValidPrivateKey(R){try{return f(R),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const R=xf(e.n);return d1(e.randomBytes(R),e.n)},precompute(R=8,z=u.BASE){return z._setWindowSize(R),z.multiply(BigInt(3)),z}};function v(R,z=!0){return u.fromPrivateKey(R).toRawBytes(z)}function E(R){const z=Yr(R),C=typeof R=="string",S=(z||C)&&R.length;return z?S===i||S===s:C?S===2*i||S===2*s:R instanceof u}function F(R,z,C=!0){if(E(R))throw new Error("first arg must be private key");if(!E(z))throw new Error("second arg must be public key");return u.fromHex(z).multiply(f(R)).toRawBytes(C)}const T=e.bits2int||function(R){if(R.length>8192)throw new Error("input is too large");const z=qr(R),C=R.length*8-e.nBitLength;return C>0?z>>BigInt(C):z},k=e.bits2int_modN||function(R){return o(T(R))},I=Ha(e.nBitLength);function _(R){return It("num < 2^"+e.nBitLength,R,fr,I),Fn(R,e.nByteLength)}function $(R,z,C=X){if(["recovered","canonical"].some(ve=>ve in C))throw new Error("sign() legacy options not supported");const{hash:S,randomBytes:P}=e;let{lowS:V,prehash:K,extraEntropy:Y}=C;V==null&&(V=!0),R=Re("msgHash",R),mc(C),K&&(R=Re("prehashed msgHash",S(R)));const te=k(R),ie=f(z),Q=[_(ie),_(te)];if(Y!=null&&Y!==!1){const ve=Y===!0?P(r.BYTES):Y;Q.push(Re("extraEntropy",ve))}const ge=Xr(...Q),we=te;function ce(ve){const se=T(ve);if(!d(se))return;const pe=a(se),_e=u.BASE.multiply(se).toAffine(),Be=o(_e.x);if(Be===fr)return;const He=o(pe*o(we+Be*ie));if(He===fr)return;let je=(_e.x===Be?0:2)|Number(_e.y&Je),ze=He;return V&&w(He)&&(ze=y(He),je^=1),new g(Be,ze,je)}return{seed:ge,k2sig:ce}}const X={lowS:e.lowS,prehash:!1},J={lowS:e.lowS,prehash:!1};function W(R,z,C=X){const{seed:S,k2sig:P}=$(R,z,C),V=e;return Ef(V.hash.outputLen,V.nByteLength,V.hmac)(S,P)}u.BASE._setWindowSize(8);function he(R,z,C,S=J){var je;const P=R;z=Re("msgHash",z),C=Re("publicKey",C);const{lowS:V,prehash:K,format:Y}=S;if(mc(S),"strict"in S)throw new Error("options.strict was renamed to lowS");if(Y!==void 0&&Y!=="compact"&&Y!=="der")throw new Error("format must be compact or der");const te=typeof P=="string"||Yr(P),ie=!te&&!Y&&typeof P=="object"&&P!==null&&typeof P.r=="bigint"&&typeof P.s=="bigint";if(!te&&!ie)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let Q,ge;try{if(ie&&(Q=new g(P.r,P.s)),te){try{Y!=="compact"&&(Q=g.fromDER(P))}catch(ze){if(!(ze instanceof cr.Err))throw ze}!Q&&Y!=="der"&&(Q=g.fromCompact(P))}ge=u.fromHex(C)}catch{return!1}if(!Q||V&&Q.hasHighS())return!1;K&&(z=e.hash(z));const{r:we,s:ce}=Q,ve=k(z),se=a(ce),pe=o(ve*se),_e=o(we*se),Be=(je=u.BASE.multiplyAndAddUnsafe(ge,pe,_e))==null?void 0:je.toAffine();return Be?o(Be.x)===we:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:F,sign:W,verify:he,ProjectivePoint:u,Signature:g,utils:D}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function BD(t){return{hash:t,hmac:(e,...r)=>sh(t,e,wb(...r)),randomBytes:mf}}function SD(t,e){const r=n=>CD({...t,...BD(n)});return{...r(e),create:r}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const oh=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),bc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),FD=BigInt(1),Xo=BigInt(2),Dc=(t,e)=>(t+e/Xo)/e;function kD(t){const e=oh,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),f=t*t*t%e,c=f*f*t%e,d=Oe(c,r,e)*c%e,p=Oe(d,r,e)*c%e,w=Oe(p,Xo,e)*f%e,y=Oe(w,i,e)*w%e,b=Oe(y,s,e)*y%e,g=Oe(b,a,e)*b%e,D=Oe(g,u,e)*g%e,v=Oe(D,a,e)*b%e,E=Oe(v,r,e)*c%e,F=Oe(E,o,e)*y%e,T=Oe(F,n,e)*f%e,k=Oe(T,Xo,e);if(!Qo.eql(Qo.sqr(k),t))throw new Error("Cannot find square root");return k}const Qo=Ms(oh,void 0,void 0,{sqrt:kD}),yi=SD({a:BigInt(0),b:BigInt(7),Fp:Qo,n:bc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=bc,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-FD*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=Dc(s*t,e),u=Dc(-n*t,e);let f=Ie(t-a*r-u*i,e),c=Ie(-a*n-u*s,e);const d=f>o,p=c>o;if(d&&(f=e-f),p&&(c=e-c),f>o||c>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:f,k2neg:p,k2:c}}}},$f);BigInt(0);yi.ProjectivePoint;function TD(t){return t==null?!1:typeof t.then=="function"&&typeof t.catch=="function"&&typeof t.finally=="function"}function ID(t,e,r){const n=ya.digest(r instanceof Uint8Array?r:r.subarray());if(TD(n))return n.then(({digest:i})=>yi.verify(e,i,t)).catch(i=>{throw new hc(String(i))});try{return yi.verify(e,n.digest,t)}catch(i){throw new hc(String(i))}}class ND{constructor(e){x(this,"type","secp256k1");x(this,"raw");x(this,"_key");this._key=OD(e),this.raw=_D(this._key)}toMultihash(){return Kr.digest(uh(this))}toCID(){return ee.createV1(114,this.toMultihash())}toString(){return Qe.encode(this.toMultihash().bytes).substring(1)}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:An(this.raw,e.raw)}verify(e,r){return ID(this._key,r,e)}}function ah(t){return new ND(t)}function _D(t){return yi.ProjectivePoint.fromHex(t).toRawBytes(!0)}function OD(t){try{return yi.ProjectivePoint.fromHex(t),t}catch(e){throw new $a(String(e))}}function PD(t){const{Type:e,Data:r}=kn.decode(t),n=r??new Uint8Array;switch(e){case dt.RSA:return wD(n);case dt.Ed25519:return Tf(n);case dt.secp256k1:return ah(n);default:throw new La}}function UD(t){const{Type:e,Data:r}=kn.decode(t.digest),n=r??new Uint8Array;switch(e){case dt.Ed25519:return Tf(n);case dt.secp256k1:return ah(n);default:throw new La}}function uh(t){return kn.encode({Type:dt[t.type],Data:t.raw})}const ch=Symbol.for("nodejs.util.inspect.custom"),$D=114;var il;class ru{constructor(e){x(this,"type");x(this,"multihash");x(this,"publicKey");x(this,"string");x(this,il,!0);this.type=e.type,this.multihash=e.multihash,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}toString(){return this.string==null&&(this.string=Qe.encode(this.multihash.bytes).slice(1)),this.string}toMultihash(){return this.multihash}toCID(){return ee.createV1($D,this.multihash)}toJSON(){return this.toString()}equals(e){var r;if(e==null)return!1;if(e instanceof Uint8Array)return An(this.multihash.bytes,e);if(typeof e=="string")return this.toString()===e;if(((r=e==null?void 0:e.toMultihash())==null?void 0:r.bytes)!=null)return An(this.multihash.bytes,e.toMultihash().bytes);throw new Error("not valid Id")}[(il=lf,ch)](){return`PeerId(${this.toString()})`}}class LD extends ru{constructor(r){super({...r,type:"RSA"});x(this,"type","RSA");x(this,"publicKey");this.publicKey=r.publicKey}}class RD extends ru{constructor(r){super({...r,type:"Ed25519"});x(this,"type","Ed25519");x(this,"publicKey");this.publicKey=r.publicKey}}class MD extends ru{constructor(r){super({...r,type:"secp256k1"});x(this,"type","secp256k1");x(this,"publicKey");this.publicKey=r.publicKey}}const VD=2336;var sl,ol;class HD{constructor(e){x(this,"type","url");x(this,"multihash");x(this,"publicKey");x(this,"url");x(this,sl,!0);this.url=e.toString(),this.multihash=Kr.digest(jt(this.url))}[(ol=ch,sl=lf,ol)](){return`PeerId(${this.url})`}toString(){return this.toCID().toString()}toMultihash(){return this.multihash}toCID(){return ee.createV1(VD,this.toMultihash())}toJSON(){return this.toString()}equals(e){return e==null?!1:(e instanceof Uint8Array&&(e=Ze(e)),e.toString()===this.toString())}}function vt(t,e){let r;if(t.charAt(0)==="1"||t.charAt(0)==="Q")r=pa(Qe.decode(`z${t}`));else throw new Nt('Please pass a multibase decoder for strings that do not start with "1" or "Q"');return jD(r)}function jD(t){if(GD(t))return new LD({multihash:t});if(zD(t))try{const e=UD(t);if(e.type==="Ed25519")return new RD({multihash:t,publicKey:e});if(e.type==="secp256k1")return new MD({multihash:t,publicKey:e})}catch{const r=Ze(t.digest);return new HD(new URL(r))}throw new ff("Supplied PeerID Multihash is invalid")}function zD(t){return t.code===Kr.code}function GD(t){return t.code===ya.code}function lh(t){return async function(r={}){const n=await t.post("bitswap/stat",{searchParams:L(r),signal:r.signal,headers:r.headers});return qD(await n.json())}}function qD(t){return{provideBufLen:t.ProvideBufLen,wantlist:(t.Wantlist??[]).map(e=>ee.parse(e["/"])),peers:(t.Peers??[]).map(e=>vt(e)),blocksReceived:BigInt(t.BlocksReceived),dataReceived:BigInt(t.DataReceived),blocksSent:BigInt(t.BlocksSent),dataSent:BigInt(t.DataSent),dupBlksReceived:BigInt(t.DupBlksReceived),dupDataReceived:BigInt(t.DupDataReceived)}}function WD(t){return async function(r,n={}){return((await(await t.post("bitswap/wantlist",{signal:n.signal,searchParams:L({...n,peer:r.toString()}),headers:n.headers})).json()).Keys??[]).map(s=>ee.parse(s["/"]))}}function KD(t){return async function(r={}){return((await(await t.post("bitswap/wantlist",{signal:r.signal,searchParams:L(r),headers:r.headers})).json()).Keys??[]).map(i=>ee.parse(i["/"]))}}function JD(t){return{wantlist:KD(t),wantlistForPeer:WD(t),stat:lh(t)}}function fh(t){return async function(r,n={}){const i=await t.post("block/get",{signal:n.signal,searchParams:L({arg:r.toString(),...n}),headers:n.headers});return new Uint8Array(await i.arrayBuffer())}}function YD(t){return async function e(r,n={}){const i=new AbortController,s=yr([i.signal,n.signal]);let o;try{o=await(await t.post("block/put",{signal:s,searchParams:L(n),...await Ur([r],i,n.headers)})).json()}catch(a){if(n.format==="dag-pb")return await e(r,{...n,format:"protobuf"});if(n.format==="dag-cbor")return await e(r,{...n,format:"cbor"});throw a}finally{s.clear()}return ee.parse(o.Key)}}function ZD(t){return async function*(r,n={}){Array.isArray(r)||(r=[r]);const i=await t.post("block/rm",{signal:n.signal,searchParams:L({arg:r.map(s=>s.toString()),"stream-channels":!0,...n}),headers:n.headers});for await(const s of i.ndjson())yield XD(s)}}function XD(t){const e={cid:ee.parse(t.Hash)};return t.Error!=null&&(e.error=new Error(t.Error)),e}function QD(t){return async function(r,n={}){const s=await(await t.post("block/stat",{signal:n.signal,searchParams:L({arg:r.toString(),...n}),headers:n.headers})).json();return{cid:ee.parse(s.Key),size:s.Size}}}function eE(t){return{get:fh(t),put:YD(t),rm:ZD(t),stat:QD(t)}}function tE(t){return async function(r,n={}){const i=await t.post("bootstrap/add",{signal:n.signal,searchParams:L({arg:r,...n}),headers:n.headers}),{Peers:s}=await i.json();return{Peers:s.map(o=>wt(o))}}}function rE(t){return async function(r={}){const n=await t.post("bootstrap/list",{signal:r.signal,searchParams:L(r),headers:r.headers}),{Peers:i}=await n.json();return{Peers:i.map(s=>wt(s))}}}function nE(t){return async function(r,n={}){const i=await t.post("bootstrap/rm",{signal:n.signal,searchParams:L({arg:r,...n}),headers:n.headers}),{Peers:s}=await i.json();return{Peers:s.map(o=>wt(o))}}}function iE(t){return{add:tE(t),list:rE(t),rm:nE(t)}}function sE(t){return async function*(r,n={}){yield*(await t.post("cat",{signal:n.signal,searchParams:L({arg:r.toString(),...n}),headers:n.headers})).iterator()}}function oE(t){return async function(r={}){return(await t.post("commands",{signal:r.signal,searchParams:L(r),headers:r.headers})).json()}}function aE(t){return async function(r={}){return await(await t.post("config/show",{signal:r.signal,searchParams:L({...r}),headers:r.headers})).json()}}function uE(t){return async function(r,n={}){if(r==null)throw new Error("key argument is required");return(await(await t.post("config",{signal:n.signal,searchParams:L({arg:r,...n}),headers:n.headers})).json()).Value}}function cE(t){return async function(r,n={}){const s=await(await t.post("config/profile/apply",{signal:n.signal,searchParams:L({arg:r,...n}),headers:n.headers})).json();return{original:s.OldCfg,updated:s.NewCfg}}}function lE(t){return{apply:cE(t)}}function fE(t){return async function(r,n={}){const i=new AbortController,s=yr([i.signal,n.signal]);try{await(await t.post("config/replace",{signal:s,searchParams:L(n),...await Ur([jt(JSON.stringify(r))],i,n.headers)})).text()}finally{s.clear()}}}function dE(t){return async function(r,n,i={}){if(typeof r!="string")throw new Error("Invalid key type");const s={...i,...hE(r,n)};await(await t.post("config",{signal:i.signal,searchParams:L(s),headers:i.headers})).text()}}function hE(t,e){switch(typeof e){case"boolean":return{arg:[t,e.toString()],bool:!0};case"string":return{arg:[t,e]};default:return{arg:[t,JSON.stringify(e)],json:!0}}}function pE(t){return{getAll:aE(t),get:uE(t),set:dE(t),replace:fE(t),profiles:lE(t)}}function gE(t){return async function*(r,n={}){yield*(await t.post("dag/export",{signal:n.signal,searchParams:L({arg:r.toString()}),headers:n.headers})).iterator()}}function yE(t){return t[Symbol.asyncIterator]!=null}function mE(t){if(yE(t))return(async()=>{for await(const e of t)return e})();for(const e of t)return e}async function*Ec(t,e,r,n,i){const s=async f=>{const c=await r.getCodec(f.code),d=await n(f,i);return c.decode(d)},o=e.split("/").filter(Boolean);let a=await s(t),u=t;for(;o.length>0;){const f=o.shift();if(f==null)throw Qt(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(a,f))a=a[f],yield{value:a,remainderPath:o.join("/")};else throw Qt(new Error(`no link named "${f}" under ${u}`),"ERR_NO_LINK");const c=ee.asCID(a);c!=null&&(u=c,a=await s(a))}yield{value:a,remainderPath:""}}function wE(t,e){const r=fh(t);return async function(i,s={}){if(s.path!=null){const c=s.localResolve===!0?await mE(Ec(i,s.path,e,r,s)):await Ps(Ec(i,s.path,e,r,s));if(c==null)throw Qt(new Error("Not found"),"ERR_NOT_FOUND");return c}const o=await e.getCodec(i.code),a=await r(i,s);return{value:o.decode(a),remainderPath:""}}}function bE(t){return async function*(r,n={}){const i=new AbortController,s=yr([i.signal,n.signal]);try{const{headers:o,body:a}=await Ur(r,i,n.headers),u=await t.post("dag/import",{signal:s,headers:o,body:a,searchParams:L({"pin-roots":n.pinRoots})});for await(const{Root:f}of u.ndjson())if(f!==void 0){const{Cid:{"/":c},PinErrorMsg:d}=f;yield{root:{cid:ee.parse(c),pinErrorMsg:d}}}}finally{s.clear()}}}function DE(t,e){return async function(n,i={}){const s={storeCodec:"dag-cbor",hashAlg:"sha2-256",...i};let o;if(s.inputCodec!=null){if(!(n instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");o=n}else o=(await e.getCodec(s.storeCodec??"dag-cbor")).encode(n),s.inputCodec=s.storeCodec;const a=new AbortController,u=yr([a.signal,s.signal]);try{const c=await(await t.post("dag/put",{timeout:s.timeout,signal:u,searchParams:L(s),...await Ur([o],a,s.headers)})).json();return ee.parse(c.Cid["/"])}finally{u.clear()}}}function EE(t){return async function(r,n={}){const s=await(await t.post("dag/resolve",{signal:n.signal,searchParams:L({arg:`${r}${n.path!=null?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers})).json();return{cid:ee.parse(s.Cid["/"]),remainderPath:s.RemPath}}}function vE(t,e){return{export:gE(t),get:wE(t,e),import:bE(t),put:DE(t,e),resolve:EE(t)}}const AE=0,xE=1,CE=2,BE=3,SE=4,FE=5,kE=6,TE=7;function jn(t){var e;if(t.Type===AE)return{name:"SENDING_QUERY",type:t.Type};if(t.Type===xE)return{from:vt(t.ID),name:"PEER_RESPONSE",type:t.Type,messageType:0,messageName:"PUT_VALUE",closer:(t.Responses??[]).map(({ID:r,Addrs:n})=>({id:vt(r),multiaddrs:n.map(i=>wt(i)),protocols:[]})),providers:(t.Responses??[]).map(({ID:r,Addrs:n})=>({id:vt(r),multiaddrs:n.map(i=>wt(i)),protocols:[]}))};if(t.Type===CE){let r={id:t.ID??vt(t.ID),multiaddrs:[],protocols:[]};return((e=t.Responses)==null?void 0:e.length)>0&&(r={id:vt(t.Responses[0].ID),multiaddrs:t.Responses[0].Addrs.map(n=>wt(n)),protocols:[]}),{name:"FINAL_PEER",type:t.Type,peer:r}}if(t.Type===BE)return{name:"QUERY_ERROR",type:t.Type,error:new Error(t.Extra)};if(t.Type===SE)return{name:"PROVIDER",type:t.Type,providers:t.Responses.map(({ID:r,Addrs:n})=>({id:vt(r),multiaddrs:n.map(i=>wt(i)),protocols:[]}))};if(t.Type===FE)return{name:"VALUE",type:t.Type,value:jt(t.Extra,"base64pad")};if(t.Type===kE){const r=t.Responses.map(({ID:n})=>vt(n));if(r.length===0)throw new Error("No peer found");return{name:"ADDING_PEER",type:t.Type,peer:r[0]}}if(t.Type===TE)return{name:"DIALING_PEER",type:t.Type,peer:vt(t.ID)};throw new Error("Unknown DHT event type")}function IE(t){return async function*(r,n={}){const i=await t.post("dht/query",{signal:n.signal,searchParams:L({arg:r.toString(),...n}),headers:n.headers});for await(const s of i.ndjson())yield jn(s)}}var vc;(function(t){t[t.SENDING_QUERY=0]="SENDING_QUERY",t[t.PEER_RESPONSE=1]="PEER_RESPONSE",t[t.FINAL_PEER=2]="FINAL_PEER",t[t.QUERY_ERROR=3]="QUERY_ERROR",t[t.PROVIDER=4]="PROVIDER",t[t.VALUE=5]="VALUE",t[t.ADDING_PEER=6]="ADDING_PEER",t[t.DIALING_PEER=7]="DIALING_PEER"})(vc||(vc={}));var Ac;(function(t){t[t.PUT_VALUE=0]="PUT_VALUE",t[t.GET_VALUE=1]="GET_VALUE",t[t.ADD_PROVIDER=2]="ADD_PROVIDER",t[t.GET_PROVIDERS=3]="GET_PROVIDERS",t[t.FIND_NODE=4]="FIND_NODE",t[t.PING=5]="PING"})(Ac||(Ac={}));function NE(t){return{query:IE(t)}}function _E(t){return async function(r={}){return(await t.post("diag/cmds",{signal:r.signal,searchParams:L(r),headers:r.headers})).json()}}function OE(t){return async function(r={}){return(await t.post("diag/net",{signal:r.signal,searchParams:L(r),headers:r.headers})).json()}}function PE(t){return async function(r={}){return(await t.post("diag/sys",{signal:r.signal,searchParams:L(r),headers:r.headers})).json()}}function UE(t){return{cmds:_E(t),net:OE(t),sys:PE(t)}}function $E(t){return async function(r,n,i={}){const s=Array.isArray(r)?r:[r];await(await t.post("files/cp",{signal:i.signal,searchParams:L({arg:s.concat(n).map(a=>ee.asCID(a)!=null?`/ipfs/${a}`:a),...i}),headers:i.headers})).text()}}function LE(t){return async function(r,n={}){if(typeof r!="string")throw new Error("ipfs.files.flush requires a path");const s=await(await t.post("files/flush",{signal:n.signal,searchParams:L({arg:r,...n}),headers:n.headers})).json();return ee.parse(s.Cid)}}function ea(t){const e=rt(t);return Object.prototype.hasOwnProperty.call(e,"mode")&&(e.mode=parseInt(e.mode,8)),Object.prototype.hasOwnProperty.call(e,"mtime")&&(e.mtime={secs:e.mtime,nsecs:e.mtimeNsecs??0},delete e.mtimeNsecs),e}function RE(t){return async function*(r,n={}){if(r==null)throw new Error("ipfs.files.ls requires a path");const i=await t.post("files/ls",{signal:n.signal,searchParams:L({arg:ee.asCID(r)!=null?`/ipfs/${r}`:r,long:!0,...n,stream:!0}),headers:n.headers});for await(const s of i.ndjson())if("Entries"in s)for(const o of s.Entries??[])yield xc(ea(o));else yield xc(ea(s))}}function xc(t){return t.hash!=null&&(t.cid=ee.parse(t.hash)),delete t.hash,t.type=t.type===1?"directory":"file",t}function ME(t){return async function(r,n={}){await(await t.post("files/mkdir",{signal:n.signal,searchParams:L({arg:r,...n}),headers:n.headers})).text()}}function VE(t){return async function(r,n,i={}){Array.isArray(r)||(r=[r]),await(await t.post("files/mv",{signal:i.signal,searchParams:L({arg:r.concat(n),...i}),headers:i.headers})).text()}}function HE(t){if(zE(t))return async function*(){const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)return;yield n}}finally{e.releaseLock()}}();if(jE(t))return t;throw new Error("unknown stream")}function jE(t){return t[Symbol.asyncIterator]!=null}function zE(t){return typeof(t==null?void 0:t.getReader)=="function"}function GE(t){return async function*(r,n={}){const i=await t.post("files/read",{signal:n.signal,searchParams:L({arg:r,count:n.length,...n}),headers:n.headers});if(i.body==null)throw new Error("Invalid response body");yield*HE(i.body)}}function qE(t){return async function(r,n={}){const i=await t.post("files/rm",{signal:n.signal,searchParams:L({arg:r,...n}),headers:n.headers}),s=await i.text();if(s!==""){const o=new Qw(i);throw o.message=s,o}}}function dh(t){return async function(r,n={}){const s=await(await t.post("files/stat",{signal:n.signal,searchParams:L({arg:r,...n}),headers:n.headers})).json();return s.WithLocality=s.WithLocality??!1,WE(ea(s))}}function WE(t){return t.cid=ee.parse(t.hash),delete t.hash,t}function KE(t){return async function(r,n,i={}){const s=new AbortController,o=yr([s.signal,i.signal]);try{await(await t.post("files/write",{signal:o,searchParams:L({arg:r,streamChannels:!0,count:i.length,...i}),...await Ur([{content:n,path:"arg",mode:Ra(i.mode),mtime:Os(i.mtime)}],s,i.headers)})).text()}finally{o.clear()}}}function JE(t){return{cp:$E(t),flush:LE(t),ls:RE(t),mkdir:ME(t),mv:VE(t),read:GE(t),rm:qE(t),stat:dh(t),write:KE(t)}}function YE(t){return function(){const r=new URL(t.opts.base??"");return{host:r.hostname,port:r.port,protocol:r.protocol,pathname:r.pathname,"api-path":r.pathname}}}function ZE(t){return async function*(r,n={}){const i={arg:`${r instanceof Uint8Array?ee.decode(r):r}`,...n};yield*(await t.post("get",{signal:n.signal,searchParams:L(i),headers:n.headers})).iterator()}}function hh(t){return async function(r={}){const i=await(await t.post("id",{signal:r.signal,searchParams:L({arg:r.peerId!=null?r.peerId.toString():void 0,...r}),headers:r.headers})).json(),s={...rt(i)};return s.id=vt(s.id),s.addresses!=null&&(s.addresses=s.addresses.map(o=>wt(o))),s}}function XE(t){const e=hh(t);return async function(n={}){var i;try{const s=await e(n);return!!((i=s==null?void 0:s.addresses)!=null&&i.length)}catch{return!1}}}const QE={type:"ed25519"};function ev(t){return async function(r,n=QE){const s=await(await t.post("key/gen",{signal:n.signal,searchParams:L({arg:r,...n}),headers:n.headers})).json();return rt(s)}}function tv(t){return async function(r,n,i,s={}){const a=await(await t.post("key/import",{signal:s.signal,searchParams:L({arg:r,pem:n,password:i,...s}),headers:s.headers})).json();return rt(a)}}function rv(t){return async function(r={}){return((await(await t.post("key/list",{signal:r.signal,searchParams:L(r),headers:r.headers})).json()).Keys??[]).map(s=>rt(s))}}function nv(t){return async function(r,n,i={}){const s=await t.post("key/rename",{signal:i.signal,searchParams:L({arg:[r,n],...i}),headers:i.headers});return rt(await s.json())}}function iv(t){return async function(r,n={}){const s=await(await t.post("key/rm",{signal:n.signal,searchParams:L({arg:r,...n}),headers:n.headers})).json();return rt(s.Keys[0])}}function sv(t){return{gen:ev(t),import:tv(t),list:rv(t),rename:nv(t),rm:iv(t)}}const In=1e3,Nn=In*60,_n=Nn*60,en=_n*24,ov=en*7,av=en*365.25;function ph(t,e){try{if(typeof t=="string"&&t.length>0)return uv(t);if(typeof t=="number"&&isFinite(t))return e!=null&&e.long?lv(t):cv(t);throw new Error("Value is not a string or number.")}catch(r){const n=fv(r)?`${r.message}. value=${JSON.stringify(t)}`:"An unknown error has occured.";throw new Error(n)}}function uv(t){if(t=String(t),t.length>100)throw new Error("Value exceeds the maximum length of 100 characters.");const e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return NaN;const r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*av;case"weeks":case"week":case"w":return r*ov;case"days":case"day":case"d":return r*en;case"hours":case"hour":case"hrs":case"hr":case"h":return r*_n;case"minutes":case"minute":case"mins":case"min":case"m":return r*Nn;case"seconds":case"second":case"secs":case"sec":case"s":return r*In;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:throw new Error(`The unit ${n} was matched, but no matching case exists.`)}}function cv(t){const e=Math.abs(t);return e>=en?`${Math.round(t/en)}d`:e>=_n?`${Math.round(t/_n)}h`:e>=Nn?`${Math.round(t/Nn)}m`:e>=In?`${Math.round(t/In)}s`:`${t}ms`}function lv(t){const e=Math.abs(t);return e>=en?ji(t,e,en,"day"):e>=_n?ji(t,e,_n,"hour"):e>=Nn?ji(t,e,Nn,"minute"):e>=In?ji(t,e,In,"second"):`${t} ms`}function ji(t,e,r,n){const i=e>=r*1.5;return`${Math.round(t/r)} ${n}${i?"s":""}`}function fv(t){return typeof t=="object"&&t!==null&&"message"in t}function dv(t){r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=i,r.enabled=o,r.humanize=ph,r.destroy=f,Object.keys(t).forEach(c=>{r[c]=t[c]}),r.names=[],r.skips=[],r.formatters={};function e(c){let d=0;for(let p=0;p<c.length;p++)d=(d<<5)-d+c.charCodeAt(p),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(c){let d,p=null,w,y;function b(...g){if(!b.enabled)return;const D=b,v=Number(new Date),E=v-(d||v);D.diff=E,D.prev=d,D.curr=v,d=v,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let F=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(k,I)=>{if(k==="%%")return"%";F++;const _=r.formatters[I];if(typeof _=="function"){const $=g[F];k=_.call(D,$),g.splice(F,1),F--}return k}),r.formatArgs.call(D,g),(D.log||r.log).apply(D,g)}return b.namespace=c,b.useColors=r.useColors(),b.color=r.selectColor(c),b.extend=n,b.destroy=r.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(w!==r.namespaces&&(w=r.namespaces,y=r.enabled(c)),y),set:g=>{p=g}}),typeof r.init=="function"&&r.init(b),b}function n(c,d){const p=r(this.namespace+(typeof d>"u"?":":d)+c);return p.log=this.log,p}function i(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let d;const p=(typeof c=="string"?c:"").split(/[\s,]+/),w=p.length;for(d=0;d<w;d++)p[d]&&(c=p[d].replace(/\*/g,".*?"),c[0]==="-"?r.skips.push(new RegExp("^"+c.substr(1)+"$")):r.names.push(new RegExp("^"+c+"$")))}function s(){const c=[...r.names.map(a),...r.skips.map(a).map(d=>"-"+d)].join(",");return r.enable(""),c}function o(c){if(c[c.length-1]==="*")return!0;let d,p;for(d=0,p=r.skips.length;d<p;d++)if(r.skips[d].test(c))return!1;for(d=0,p=r.names.length;d<p;d++)if(r.names[d].test(c))return!0;return!1}function a(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function u(c){return c instanceof Error?c.stack??c.message:c}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.setupFormatters(r.formatters),r.enable(r.load()),r}var hv={};const Zt=Dv(),pv=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function gv(){var t,e,r,n,i;return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&((t=navigator.userAgent)==null?void 0:t.toLowerCase().match(/(edge|trident)\/(\d+)/))!=null?!1:typeof document<"u"&&((r=(e=document.documentElement)==null?void 0:e.style)==null?void 0:r.WebkitAppearance)||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&((n=navigator.userAgent)==null?void 0:n.toLowerCase().match(/firefox\/(\d+)/))!=null&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&((i=navigator.userAgent)==null?void 0:i.toLowerCase().match(/applewebkit\/(\d+)/))}function yv(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+ph(this.diff),!this.useColors)return;const e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}const mv=console.debug??console.log??(()=>{});function wv(t){try{t?Zt==null||Zt.setItem("debug",t):Zt==null||Zt.removeItem("debug")}catch{}}function bv(){let t;try{t=Zt==null?void 0:Zt.getItem("debug")}catch{}return!t&&typeof globalThis.process<"u"&&"env"in globalThis.process&&(t=hv.DEBUG),t}function Dv(){try{return localStorage}catch{}}function Ev(t){t.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}}const xt=dv({formatArgs:yv,save:wv,load:bv,useColors:gv,setupFormatters:Ev,colors:pv,storage:Zt,log:mv});xt.formatters.b=t=>t==null?"undefined":Qe.baseEncode(t);xt.formatters.t=t=>t==null?"undefined":Tr.baseEncode(t);xt.formatters.m=t=>t==null?"undefined":xs.baseEncode(t);xt.formatters.p=t=>t==null?"undefined":t.toString();xt.formatters.c=t=>t==null?"undefined":t.toString();xt.formatters.k=t=>t==null?"undefined":t.toString();xt.formatters.a=t=>t==null?"undefined":t.toString();xt.formatters.e=t=>t==null?"undefined":Cc(t.stack)??Cc(t.message)??t.toString();function vv(t){const e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=t,e.destroy=()=>!0,e.extend=()=>e,e}function nu(t){let e=vv(`${t}:trace`);return xt.enabled(`${t}:trace`)&&xt.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(e=xt(`${t}:trace`)),Object.assign(xt(t),{error:xt(`${t}:error`),trace:e})}function Cc(t){if(t!=null&&(t=t.trim(),t.length!==0))return t}var Av=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype};const ys=Av,{hasOwnProperty:gh}=Object.prototype,{propertyIsEnumerable:xv}=Object,On=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0}),Cv=ko,Bc={concatArrays:!1,ignoreUndefined:!1},js=t=>{const e=[];for(const r in t)gh.call(t,r)&&e.push(r);if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(t);for(const n of r)xv.call(t,n)&&e.push(n)}return e};function zn(t){return Array.isArray(t)?Bv(t):ys(t)?Sv(t):t}function Bv(t){const e=t.slice(0,0);return js(t).forEach(r=>{On(e,r,zn(t[r]))}),e}function Sv(t){const e=Object.getPrototypeOf(t)===null?Object.create(null):{};return js(t).forEach(r=>{On(e,r,zn(t[r]))}),e}const yh=(t,e,r,n)=>(r.forEach(i=>{typeof e[i]>"u"&&n.ignoreUndefined||(i in t&&t[i]!==Object.getPrototypeOf(t)?On(t,i,ta(t[i],e[i],n)):On(t,i,zn(e[i])))}),t),Fv=(t,e,r)=>{let n=t.slice(0,0),i=0;return[t,e].forEach(s=>{const o=[];for(let a=0;a<s.length;a++)gh.call(s,a)&&(o.push(String(a)),s===t?On(n,i++,s[a]):On(n,i++,zn(s[a])));n=yh(n,s,js(s).filter(a=>!o.includes(a)),r)}),n};function ta(t,e,r){return r.concatArrays&&Array.isArray(t)&&Array.isArray(e)?Fv(t,e,r):!ys(e)||!ys(t)?zn(e):yh(t,e,js(e),r)}var kv=function(...t){const e=ta(zn(Bc),this!==Cv&&this||{},Bc);let r={_:{}};for(const n of t)if(n!==void 0){if(!ys(n))throw new TypeError("`"+n+"` is not an Option Object");r=ta(r,{_:n},e)}return r._};const mh=vs(kv);let Tv=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;de.year=de.yr=de.y=6e4*60*24*365.25;de.month=de.b=6e4*60*24*(365.25/12);de.week=de.wk=de.w=6e4*60*24*7;de.day=de.d=6e4*60*24;de.hour=de.hr=de.h=6e4*60;de.minute=de.min=de.m=6e4;de.second=de.sec=de.s=1e3;de.millisecond=de.millisec=de.ms=1;de.Âµs=de.Î¼s=de.us=de.microsecond=1/1e3;de.nanosecond=de.ns=1/1e6;function de(t="",e="ms"){var r=null,n;return t=(t+"").replace(/(\d)[,_](\d)/g,"$1$2"),t.replace(Tv,function(i,s,o){if(o)o=o.toLowerCase();else if(n){for(var a in de)if(de[a]<n){o=a;break}}else o=e;Object.prototype.hasOwnProperty.call(de,o)?o=de[o]:Object.prototype.hasOwnProperty.call(de,o.replace(/s$/,""))?o=de[o.replace(/s$/,"")]:o=null,o&&(r=(r||0)+Math.abs(parseFloat(s,10))*o,n=o)}),r&&r/(de[e]||1)*(t[0]==="-"?-1:1)}const Iv=()=>{},Nv=typeof navigator<"u"&&navigator.product==="ReactNative";function _v(){return Nv?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const oi=self.URL,wh=_v();let Ov=class{constructor(e="",r=wh){this.super=new oi(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return oi.createObjectURL(e)}static revokeObjectURL(e){oi.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function Pv(t){if(typeof t=="string")return new oi(t).toString();if(!(t instanceof oi)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",i=t.protocol?t.protocol+"//":"",s=t.host||"",o=t.hostname||"",a=t.search||(t.query?"?"+t.query:""),u=t.hash||"",f=t.pathname||"",c=t.path||f+a;return`${i}${e||r}${s||o+n}${c}${u}`}}var bh={URLWithLegacySupport:Ov,URLSearchParams:self.URLSearchParams,defaultBase:wh,format:Pv};const{URLWithLegacySupport:Sc,format:Uv}=bh;var $v=(t,e={},r={},n)=>{let i=e.protocol?e.protocol.replace(":",""):"http";i=(r[i]||n||i)+":";let s;try{s=new Sc(t)}catch{s={}}const o=Object.assign({},e,{protocol:i||s.protocol,host:e.host||s.host});return new Sc(t,Uv(o)).toString()};const{URLWithLegacySupport:Lv,format:Rv,URLSearchParams:Mv,defaultBase:Vv}=bh,Hv=$v;var zi={URL:Lv,URLSearchParams:Mv,format:Rv,relative:Hv,defaultBase:Vv};class Dh extends Error{constructor(e="Request timed out"){super(e),this.name="TimeoutError"}}class jv extends Error{constructor(e="The operation was aborted."){super(e),this.name="AbortError"}}class Fc extends Error{constructor(r){super(r.statusText);x(this,"response");this.name="HTTPError",this.response=r}}const zv=globalThis.fetch,iu=globalThis.Headers,Gv=globalThis.Request,Eh=globalThis.Response,qv=async(t,e={})=>{const r=new XMLHttpRequest;r.open(e.method??"GET",t.toString(),!0);const{timeout:n,headers:i}=e,s=Number(n);if(!isNaN(s)&&s>0&&s<1/0&&(r.timeout=s),e.overrideMimeType!=null&&r.overrideMimeType(e.overrideMimeType),i!=null)for(const[o,a]of new iu(i))r.setRequestHeader(o,a);return e.signal!=null&&(e.signal.onabort=()=>{r.abort()}),e.onUploadProgress!=null&&(r.upload.onprogress=e.onUploadProgress),r.responseType="arraybuffer",new Promise((o,a)=>{const u=f=>{switch(f.type){case"error":{o(Eh.error());break}case"load":{o(new Yv(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:Jv(r.getAllResponseHeaders())}));break}case"timeout":{a(new Dh);break}case"abort":{a(new jv);break}}};r.onerror=u,r.onload=u,r.ontimeout=u,r.onabort=u,r.send(e.body)})},Wv=zv,Kv=(t,e={})=>e.onUploadProgress!=null?qv(t,e):Wv(t,e),Jv=t=>{const e=new iu;for(const r of t.trim().split(/[\r\n]+/)){const n=r.indexOf(": ");n>0&&e.set(r.slice(0,n),r.slice(n+1))}return e};class Yv extends Eh{constructor(e,r,n){super(r,n),Object.defineProperty(this,"url",{value:e})}}const kc=mh.bind({ignoreUndefined:!0}),Gi=nu("kubo-rpc-client:fetch"),Zv={throwHttpErrors:!0,credentials:"same-origin"},yt=class yt{constructor(e={}){x(this,"opts");this.opts=kc({},Zv,e)}async fetch(e,r={}){const n=kc({},this.opts,r),i=new iu(n.headers);if(typeof e!="string"&&!(e instanceof zi.URL||e instanceof Gv))throw new TypeError("`resource` must be a string, URL, or Request");const s=new zi.URL(e.toString(),n.base),{searchParams:o,transformSearchParams:a,json:u}=n;o!=null&&(typeof a=="function"?s.search=a(new zi.URLSearchParams(n.searchParams)):s.search=new zi.URLSearchParams(n.searchParams).toString()),u!=null&&(n.body=JSON.stringify(n.json),i.set("content-type","application/json"));const f=[n.signal];n.timeout!=null&&isNaN(n.timeout)&&n.timeout>0&&f.push(AbortSignal.timeout(n.timeout));const c=yr(f);try{globalThis.ReadableStream!=null&&n.body instanceof globalThis.ReadableStream&&(Ts||Is)&&(n.body=new Blob(await df(Ns(n.body)))),Gi.trace("outgoing headers",n.headers),Gi.trace("%s %s",n.method,s);const d=await Kv(s.toString(),{...n,signal:n.signal,timeout:void 0,headers:i,duplex:"half"});if(Gi("%s %s %d",n.method,s,d.status),Gi.trace("incoming headers",d.headers),!d.ok&&n.throwHttpErrors===!0)throw n.handleError!=null&&await n.handleError(d),new Fc(d);return d.iterator=async function*(){yield*Qv(d.body)},d.ndjson=async function*(){for await(const p of Xv(d.iterator()))r.transform!=null?yield r.transform(p):yield p},d}finally{c.clear()}}async post(e,r={}){return this.fetch(e,{...r,method:"POST"})}async get(e,r={}){return this.fetch(e,{...r,method:"GET"})}async put(e,r={}){return this.fetch(e,{...r,method:"PUT"})}async delete(e,r={}){return this.fetch(e,{...r,method:"DELETE"})}async options(e,r={}){return this.fetch(e,{...r,method:"OPTIONS"})}};x(yt,"HTTPError",Fc),x(yt,"TimeoutError",Dh),x(yt,"post",async(e,r)=>new yt(r).post(e,r)),x(yt,"get",async(e,r)=>new yt(r).get(e,r)),x(yt,"put",async(e,r)=>new yt(r).put(e,r)),x(yt,"delete",async(e,r)=>new yt(r).delete(e,r)),x(yt,"options",async(e,r)=>new yt(r).options(e,r));let zr=yt;const Xv=async function*(t){const e=new TextDecoder;let r="";for await(const n of t){r+=e.decode(n,{stream:!0});const i=r.split(/\r?\n/);for(let s=0;s<i.length-1;s++){const o=i[s].trim();o.length>0&&(yield JSON.parse(o))}r=i[i.length-1]}r+=e.decode(),r=r.trim(),r.length!==0&&(yield JSON.parse(r))},Qv=t=>{if(eA(t))return t;if(rA(t)){const e=t[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:e.next.bind(e),return(r){return t.destroy(),typeof e.return=="function"?e.return():Promise.resolve({done:!0,value:r})}}}}}if(tA(t)){const e=t.getReader();return async function*(){try{for(;;){const{done:r,value:n}=await e.read();if(r)return;n!=null&&(yield n)}}finally{e.releaseLock()}}()}throw new TypeError("Body can't be converted to AsyncIterable")},eA=t=>t!==null&&typeof t[Symbol.asyncIterator]=="function",tA=t=>t!=null&&typeof t.getReader=="function",rA=t=>Object.prototype.hasOwnProperty.call(t,"readable")&&Object.prototype.hasOwnProperty.call(t,"writable"),nA=[ye("tcp").code,ye("dns").code,ye("dnsaddr").code,ye("dns4").code,ye("dns6").code];function Tc(t){var e;return(e=vh("sni",t))==null?void 0:e[1]}function Ic(t){var r;const e=(r=vh("tcp",t))==null?void 0:r[1];return e==null?"":`:${e}`}function vh(t,e){let r;try{r=ye(t).code}catch{return}for(const[n,i]of e)if(n===r&&i!=null)return[n,i]}function Nc(t){return t.some(([e,r])=>e===ye("tls").code)}function gt(t,e,r){const n=Ah[ye(t).name];if(n==null)throw new Error(`Can't interpret protocol ${ye(t).name}`);const i=n(e,r);return t===ye("ip6").code?`[${i}]`:i}const Ah={ip4:(t,e)=>t,ip6:(t,e)=>e.length===0?t:`[${t}]`,tcp:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`tcp://${gt(r[0],r[1]??"",e)}:${t}`},udp:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`udp://${gt(r[0],r[1]??"",e)}:${t}`},dnsaddr:(t,e)=>t,dns4:(t,e)=>t,dns6:(t,e)=>t,dns:(t,e)=>t,ipfs:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${gt(r[0],r[1]??"",e)}/ipfs/${t}`},p2p:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${gt(r[0],r[1]??"",e)}/p2p/${t}`},http:(t,e)=>{const r=Nc(e),n=Tc(e),i=Ic(e);if(r&&n!=null)return`https://${n}${i}`;const s=r?"https://":"http://",o=e.pop();if(o==null)throw new Error("Unexpected end of multiaddr");let a=gt(o[0],o[1]??"",e);return a=a.replace("tcp://",""),`${s}${a}`},"http-path":(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");const n=gt(r[0],r[1]??"",e),i=decodeURIComponent(t);return`${n}/${i}`},tls:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return gt(r[0],r[1]??"",e)},sni:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return gt(r[0],r[1]??"",e)},https:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");let n=gt(r[0],r[1]??"",e);return n=n.replace("tcp://",""),`https://${n}`},ws:(t,e)=>{const r=Nc(e),n=Tc(e),i=Ic(e);if(r&&n!=null)return`wss://${n}${i}`;const s=r?"wss://":"ws://",o=e.pop();if(o==null)throw new Error("Unexpected end of multiaddr");let a=gt(o[0],o[1]??"",e);return a=a.replace("tcp://",""),`${s}${a}`},wss:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");let n=gt(r[0],r[1]??"",e);return n=n.replace("tcp://",""),`wss://${n}`},"p2p-websocket-star":(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${gt(r[0],r[1]??"",e)}/p2p-websocket-star`},"p2p-webrtc-star":(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${gt(r[0],r[1]??"",e)}/p2p-webrtc-star`},"p2p-webrtc-direct":(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${gt(r[0],r[1]??"",e)}/p2p-webrtc-direct`}};function iA(t,e){const n=wt(t).stringTuples(),i=n.pop();if(i==null)throw new Error("Unexpected end of multiaddr");const s=ye(i[0]),o=Ah[s.name];if(o==null)throw new Error(`No interpreter found for ${s.name}`);let a=o(i[1]??"",n);return nA.includes(i[0])&&(a=a.replace(/^.*:\/\//,""),i[1]==="443"?a=`https://${a}`:a=`http://${a}`),(a.startsWith("http://")||a.startsWith("https://")||a.startsWith("ws://")||a.startsWith("wss://"))&&(a=new URL(a).toString(),a.endsWith("/")&&(a=a.substring(0,a.length-1))),a}function _c(t){try{t=iA(wt(t))}catch{}return t=t.toString(),t}const Oc=nu("js-kubo-rpc-client:lib:error-handler"),sA=mh.bind({ignoreUndefined:!0}),oA=Ts||Is?location.protocol:"http",aA=Ts||Is?location.hostname:"localhost",uA=Ts||Is?location.port:"5001",cA=(t={})=>{let e,r={},n;if(typeof t=="string"||ts(t))e=new URL(_c(t));else if(t instanceof URL)e=t;else if(typeof t.url=="string"||ts(t.url))e=new URL(_c(t.url)),r=t;else if(t.url instanceof URL)e=t.url,r=t;else{r=t??{};const i=(r.protocol??oA).replace(":",""),s=(r.host??aA).split(":")[0],o=r.port??uA;e=new URL(`${i}://${s}:${o}`)}if(r.apiPath!=null?e.pathname=r.apiPath:(e.pathname==="/"||e.pathname===void 0)&&(e.pathname="api/v0"),Jw){const i=Iv();n=r.agent??new i({keepAlive:!0,maxSockets:6})}return{...r,host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:n}},lA=async t=>{let e;try{if((t.headers.get("Content-Type")??"").startsWith("application/json")){const n=await t.json();Oc(n),e=n.Message??n.message}else e=await t.text()}catch(n){Oc("Failed to parse error response",n),e=n.message}let r=new zr.HTTPError(t);throw e!=null&&(e.includes("deadline has elapsed")&&(r=new zr.TimeoutError),e.includes("context deadline exceeded")&&(r=new zr.TimeoutError),e.includes("request timed out")&&(r=new zr.TimeoutError),r.message=e),r},fA=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,Pc=t=>t.replace(fA,function(e){return"-"+e.toLowerCase()}),dA=t=>typeof t=="string"?de(t)??0:t;class hA extends zr{constructor(e={}){const r=cA(e);super({timeout:r.timeout!=null?dA(r.timeout):void 0,headers:r.headers,base:`${r.url}`,handleError:lA,transformSearchParams:i=>{const s=new URLSearchParams;for(const[o,a]of i)a!=="undefined"&&a!=="null"&&o!=="signal"&&o!=="timeout"&&s.append(Pc(o),a),o==="timeout"&&!isNaN(parseInt(a))&&s.append(Pc(o),a);return s},agent:r.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;const n=this.fetch;this.fetch=async(i,s={})=>(typeof i=="string"&&!i.startsWith("/")&&(i=`${r.url}/${i}`),n.call(this,i,sA(s,{method:"POST"})))}}const pA=async t=>Promise.reject(new Error(`No base found for "${t}"`));class gA{constructor(e){x(this,"_basesByName");x(this,"_basesByPrefix");x(this,"_loadBase");this._basesByName={},this._basesByPrefix={},this._loadBase=e.loadBase??pA;for(const r of e.bases)this.addBase(r)}addBase(e){if(this._basesByName[e.name]!=null&&this._basesByPrefix[e.prefix]!=null)throw new Error(`Codec already exists for codec "${e.name}"`);this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}removeBase(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}async getBase(e){if(this._basesByName[e]!=null)return this._basesByName[e];if(this._basesByPrefix[e]!=null)return this._basesByPrefix[e];const r=await this._loadBase(e);return this._basesByName[r.name]==null&&this._basesByPrefix[r.prefix]==null&&this.addBase(r),r}listBases(){return Object.values(this._basesByName)}}const yA=async t=>Promise.reject(new Error(`No codec found for "${t}"`));class mA{constructor(e){x(this,"_codecsByName");x(this,"_codecsByCode");x(this,"_loadCodec");this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec??yA;for(const r of e.codecs)this.addCodec(r)}addCodec(e){if(this._codecsByName[e.name]!=null||this._codecsByCode[e.code]!=null)throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){const r=typeof e=="string"?this._codecsByName:this._codecsByCode;if(r[e]!=null)return r[e];const n=await this._loadCodec(e);return r[e]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}}const wA=async t=>Promise.reject(new Error(`No hasher found for "${t}"`));class bA{constructor(e){x(this,"_hashersByName");x(this,"_hashersByCode");x(this,"_loadHasher");this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher??wA;for(const r of e.hashers)this.addHasher(r)}addHasher(e){if(this._hashersByName[e.name]!=null||this._hashersByCode[e.code]!=null)throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){const r=typeof e=="string"?this._hashersByName:this._hashersByCode;if(r[e]!=null)return r[e];const n=await this._loadHasher(e);return r[e]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}}function DA(t){return async function(e,r,n={}){const i=await t.post("log/level",{signal:n.signal,searchParams:L({arg:[e,r],...n}),headers:n.headers});return rt(await i.json())}}function EA(t){return async function(r={}){return(await(await t.post("log/ls",{signal:r.signal,searchParams:L(r),headers:r.headers})).json()).Strings}}function vA(t){return async function*(r={}){yield*(await t.post("log/tail",{signal:r.signal,searchParams:L(r),headers:r.headers})).ndjson()}}function AA(t){return{level:DA(t),ls:EA(t),tail:vA(t)}}function xA(t){return async function*(r,n={}){const i=`${r instanceof Uint8Array?ee.decode(r):r}`;async function s(a){let u=a.Hash;if(u.includes("/")===!0){const c=u.startsWith("/ipfs/")===!0?u:`/ipfs/${u}`;u=(await dh(t)(c)).cid}else u=ee.parse(u);return{name:a.Name,path:i+(a.Name!=null?`/${a.Name}`:""),size:a.Size,cid:u,type:CA(a)}}const o=await t.post("ls",{signal:n.signal,searchParams:L({arg:i,...n}),headers:n.headers});for await(let a of o.ndjson()){if(a=a.Objects,a==null)throw new Error("expected .Objects in results");if(a=a[0],a==null)throw new Error("expected one array in results.Objects");const u=a.Links;if(!Array.isArray(u))throw new Error("expected one array in results.Objects[0].Links");if(u.length===0){yield s(a);return}yield*u.map(s)}}}function CA(t){switch(t.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}function BA(t){return async function(r={}){const n=await t.post("dns",{signal:r.signal,searchParams:L(r),headers:r.headers});return rt(await n.json())}}function SA(t){return async function(r,n={}){const i=await t.post("name/publish",{signal:n.signal,searchParams:L({arg:`${r}`,...n}),headers:n.headers});return rt(await i.json())}}function FA(t){return async function(r,n={}){const i=await t.post("name/pubsub/cancel",{signal:n.signal,searchParams:L({arg:r,...n}),headers:n.headers});return rt(await i.json())}}function kA(t){return async function(r={}){const n=await t.post("name/pubsub/state",{signal:r.signal,searchParams:L(r),headers:r.headers});return rt(await n.json())}}function TA(t){return async function(r={}){return(await(await t.post("name/pubsub/subs",{signal:r.signal,searchParams:L(r),headers:r.headers})).json()).Strings??[]}}function IA(t){return{cancel:FA(t),state:kA(t),subs:TA(t)}}function NA(t){return async function*(r,n={}){const i=await t.post("name/resolve",{signal:n.signal,searchParams:L({arg:r,stream:!0,...n}),headers:n.headers});for await(const s of i.ndjson())yield s.Path}}function _A(t){return{publish:SA(t),resolve:NA(t),pubsub:IA(t)}}function OA(t){return async function(r,n,i={}){const s=await t.post("object/patch/add-link",{signal:i.signal,searchParams:L({arg:[`${r}`,n.Name??n.name??"",(n.Hash??n.cid??"").toString()??null],...i}),headers:i.headers}),{Hash:o}=await s.json();return ee.parse(o)}}function PA(t){return async function(r,n,i={}){const s=await t.post("object/patch/rm-link",{signal:i.signal,searchParams:L({arg:[`${r}`,n.Name??n.name??null],...i}),headers:i.headers}),{Hash:o}=await s.json();return ee.parse(o)}}function UA(t){return{addLink:OA(t),rmLink:PA(t)}}function $A(t,e){return{patch:UA(t)}}function LA(t){return Symbol.iterator in t}function RA(t){return Symbol.asyncIterator in t}function Uc(t){return ee.asCID(t)!=null}async function*xh(t){if(t==null)throw new Nt(`Unexpected input: ${t}`);const e=ee.asCID(t);if(e!=null){yield lt({cid:e});return}if(typeof t=="string"){yield lt({path:t});return}if(t.cid!=null||t.path!=null)return yield lt(t);if(LA(t)){const r=t[Symbol.iterator](),n=r.next();if(n.done===!0)return r;if(Uc(n.value)){yield lt({cid:n.value});for(const i of r)yield lt({cid:i});return}if(typeof n.value=="string"){yield lt({path:n.value});for(const i of r)yield lt({path:i});return}if(n.value.cid!=null||n.value.path!=null){yield lt(n.value);for(const i of r)yield lt(i);return}throw new Nt(`Unexpected input: ${typeof t}`)}if(RA(t)){const r=t[Symbol.asyncIterator](),n=await r.next();if(n.done===!0)return r;if(Uc(n.value)){yield lt({cid:n.value});for await(const i of r)yield lt({cid:i});return}if(typeof n.value=="string"){yield lt({path:n.value});for await(const i of r)yield lt({path:i});return}if(n.value.cid!=null||n.value.path!=null){yield lt(n.value);for await(const i of r)yield lt(i);return}throw new Nt(`Unexpected input: ${typeof t}`)}throw new Nt(`Unexpected input: ${typeof t}`)}function lt(t){const e=t.cid??`${t.path}`;if(e==null)throw new Nt("Unexpected input: Please path either a CID or an IPFS path");const r={path:e,recursive:t.recursive!==!1};return t.metadata!=null&&(r.metadata=t.metadata),r}function Ch(t){return async function*(r,n={}){for await(const{path:i,recursive:s,metadata:o}of xh(r)){const a=await t.post("pin/add",{signal:n.signal,searchParams:L({...n,arg:i,recursive:s,metadata:o!=null?JSON.stringify(o):void 0,stream:!0}),headers:n.headers});for await(const u of a.ndjson()){if(u.Pins!=null){for(const f of u.Pins)yield ee.parse(f);continue}yield ee.parse(u)}}}}function MA(t){const e=Ch(t);return async function(n,i={}){const s=await Ps(e([{path:n.toString(),...i}],i));if(s==null)throw new Error("No response received");return s}}function $c(t,e,r){const n={type:t,cid:ee.parse(e)};return r!=null&&(n.metadata=r),n}function VA(t){return async function*(r={}){let n=[];r.paths!=null&&(n=Array.isArray(r.paths)?r.paths:[r.paths]);const i=await t.post("pin/ls",{signal:r.signal,searchParams:L({...r,arg:n.map(s=>`${s}`),stream:!0}),headers:r.headers});for await(const s of i.ndjson()){if(s.Keys!=null){for(const o of Object.keys(s.Keys))yield $c(s.Keys[o].Type,o,s.Keys[o].Metadata);return}yield $c(s.Type,s.Cid,s.Metadata)}}}const Bh=({Name:t,Status:e,Cid:r})=>({cid:ee.parse(r),name:t,status:e}),Sh=t=>{if(typeof t=="string"&&t!=="")return t;throw new TypeError("service name must be passed")},Fh=t=>{if(ee.asCID(t)!=null)return t.toString();throw new TypeError(`CID instance expected instead of ${typeof t}`)},su=({service:t,cid:e,name:r,status:n,all:i})=>{const s=L({service:Sh(t),name:r,force:i===!0?!0:void 0});if(e!=null)for(const o of e)s.append("cid",Fh(o));if(n!=null)for(const o of n)s.append("status",o);return s},HA=(t,{service:e,background:r,name:n,origins:i})=>{const s=L({arg:Fh(t),service:Sh(e),name:n,background:r===!0?!0:void 0});if(i!=null)for(const o of i)s.append("origin",o.toString());return s};function jA(t){return async function(r,{timeout:n,signal:i,headers:s,...o}){const a=await t.post("pin/remote/add",{timeout:n,signal:i,headers:s,searchParams:HA(r,o)});return Bh(await a.json())}}function zA(t){return async function*({timeout:r,signal:n,headers:i,...s}){const o=await t.post("pin/remote/ls",{timeout:r,signal:n,headers:i,searchParams:su(s)});for await(const a of o.ndjson())yield Bh(a)}}function GA(t){return async function({timeout:r,signal:n,headers:i,...s}){await t.post("pin/remote/rm",{timeout:r,signal:n,headers:i,searchParams:su({...s,all:!0})})}}function qA(t){return async function({timeout:r,signal:n,headers:i,...s}){await t.post("pin/remote/rm",{timeout:r,signal:n,headers:i,searchParams:su({...s,all:!1})})}}function WA(t){const e=String(t);if(e==="undefined")throw Error("endpoint is required");return e[e.length-1]==="/"?e.slice(0,-1):e}function KA(t){const e={service:t.Service,endpoint:new URL(t.ApiEndpoint)};return t.Stat!=null&&(e.stat=JA(t.Stat)),e}function JA(t){switch(t.Status){case"valid":{const{Pinning:e,Pinned:r,Queued:n,Failed:i}=t.PinCount;return{status:"valid",pinCount:{queued:n,pinning:e,pinned:r,failed:i}}}case"invalid":return{status:"invalid"};default:return{status:t.Status}}}function YA(t){return async function(r,n){const{endpoint:i,key:s,headers:o,timeout:a,signal:u}=n;await t.post("pin/remote/service/add",{timeout:a,signal:u,searchParams:L({arg:[r,WA(i),s]}),headers:o})}}function ZA(t){return async function(r={}){const{stat:n,headers:i,timeout:s,signal:o}=r;return(await(await t.post("pin/remote/service/ls",{timeout:s,signal:o,headers:i,searchParams:n===!0?L({stat:n}):void 0})).json()).RemoteServices.map(KA)}}function XA(t){return async function(r,n={}){await t.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:L({arg:r})})}}function QA(t){return{add:YA(t),ls:ZA(t),rm:XA(t)}}function e2(t){return{add:jA(t),ls:zA(t),rm:qA(t),rmAll:GA(t),service:QA(t)}}function kh(t){return async function*(r,n={}){for await(const{path:i,recursive:s}of xh(r)){const o=new URLSearchParams(n.searchParams);o.append("arg",`${i}`),s!=null&&o.set("recursive",String(s));const a=await t.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:L({...n,arg:`${i}`,recursive:s})});for await(const u of a.ndjson()){if(u.Pins!=null){yield*u.Pins.map(f=>ee.parse(f));continue}yield ee.parse(u)}}}}function t2(t){const e=kh(t);return async function(n,i={}){const s=await Ps(e([{path:n.toString(),...i}],i));if(s==null)throw new Error("No response received");return s}}function r2(t){return{addAll:Ch(t),add:MA(t),ls:VA(t),rmAll:kh(t),rm:t2(t),remote:e2(t)}}function n2(t){return async function*(r,n={}){yield*(await t.post("ping",{signal:n.signal,searchParams:L({arg:`${r}`,...n}),headers:n.headers,transform:rt})).ndjson()}}const i2=t=>Array.isArray(t)?t.map(ra):t,ra=t=>Ze(ti(t)),ti=t=>Cs.decode(t),s2=t=>BigInt(`0x${Ze(Cs.decode(t),"base16")}`),ou=t=>Cs.encode(jt(t));function o2(t){return async function(r={}){const{Strings:n}=await(await t.post("pubsub/ls",{signal:r.signal,searchParams:L(r),headers:r.headers})).json();return i2(n)??[]}}function a2(t){return async function(r,n={}){const i=await t.post("pubsub/peers",{signal:n.signal,searchParams:L({arg:ou(r),...n}),headers:n.headers}),{Strings:s}=await i.json();return s??[]}}function u2(t){return async function(r,n,i={}){const s=L({arg:ou(r),...i}),o=new AbortController,a=yr([o.signal,i.signal]);try{await(await t.post("pubsub/pub",{signal:a,searchParams:s,...await Ur([n],o,i.headers)})).text()}finally{a.clear()}}}const c2=nu("js-kubo-rpc-client:pubsub:subscribe");function l2(t,e){return async function(n,i,s={}){s.signal=e.subscribe(n,i,s.signal);let o,a;const u=new Promise((c,d)=>{o=c,a=d}),f=setTimeout(()=>{o()},1e3);return t.post("pubsub/sub",{signal:s.signal,searchParams:L({arg:ou(n),...s}),headers:s.headers}).catch(c=>{e.unsubscribe(n,i),a(c)}).then(c=>{clearTimeout(f),c!=null&&(f2(c,{onMessage:d=>{if(i!=null){if(typeof i=="function"){i(d);return}typeof i.handleEvent=="function"&&i.handleEvent(d)}},onEnd:()=>{e.unsubscribe(n,i)},onError:s.onError}),o())}),u}}async function f2(t,{onMessage:e,onEnd:r,onError:n}){n=n??c2;try{for await(const i of t.ndjson())try{if(i.from==null)continue;i.from!=null&&i.seqno!=null?e({type:"signed",from:vt(i.from),data:ti(i.data),sequenceNumber:s2(i.seqno),topic:ra(i.topicIDs[0]),key:i.key!=null?PD(ti(i.key??"u")):void 0,signature:ti(i.signature??"u")}):e({type:"unsigned",data:ti(i.data),topic:ra(i.topicIDs[0])})}catch(s){s.message=`Failed to parse pubsub message: ${s.message}`,n(s,!1,i)}}catch(i){d2(i)||n(i,!0)}finally{r()}}const d2=t=>{switch(t.type){case"aborted":return!0;case"abort":return!0;default:return t.name==="AbortError"}};class h2{constructor(){x(this,"_subs");this._subs=new Map}subscribe(e,r,n){const i=this._subs.get(e)??[];if(i.find(o=>o.handler===r)!=null)throw new Error(`Already subscribed to ${e} with this handler`);const s=new AbortController;return this._subs.set(e,[{handler:r,controller:s}].concat(i)),n!=null&&n.addEventListener("abort",()=>{this.unsubscribe(e,r)}),s.signal}unsubscribe(e,r){const n=this._subs.get(e)??[];let i;r!=null?(this._subs.set(e,n.filter(s=>s.handler!==r)),i=n.filter(s=>s.handler===r)):(this._subs.set(e,[]),i=n),(this._subs.get(e)??[]).length===0&&this._subs.delete(e),i.forEach(s=>{s.controller.abort()})}}function p2(t,e){return async function(n,i){e.unsubscribe(n,i)}}function g2(t){const e=new h2;return{ls:o2(t),peers:a2(t),publish:u2(t),subscribe:l2(t,e),unsubscribe:p2(t,e)}}function y2(t){return async function*(r={}){yield*(await t.post("refs/local",{signal:r.signal,transform:rt,searchParams:L(r),headers:r.headers})).ndjson()}}function m2(t){async function*e(r,n={}){const i=Array.isArray(r)?r:[r];yield*(await t.post("refs",{signal:n.signal,searchParams:L({arg:i.map(o=>`${o instanceof Uint8Array?ee.decode(o):o}`),...n}),headers:n.headers,transform:rt})).ndjson()}return Object.assign(e,{local:y2(t)})}function w2(t){return async function*(r={}){yield*(await t.post("repo/gc",{signal:r.signal,searchParams:L(r),headers:r.headers,transform:i=>{var s;return{err:i.Error!=null?new Error(i.Error):null,cid:((s=i.Key)==null?void 0:s["/"])!=null?ee.parse(i.Key["/"]):null}}})).ndjson()}}function Th(t){return async function(r={}){const i=await(await t.post("repo/stat",{signal:r.signal,searchParams:L(r),headers:r.headers})).json();return{numObjects:BigInt(i.NumObjects),repoSize:BigInt(i.RepoSize),repoPath:i.RepoPath,version:i.Version,storageMax:BigInt(i.StorageMax)}}}function b2(t){return async function(r={}){return(await(await t.post("repo/version",{signal:r.signal,searchParams:L(r),headers:r.headers})).json()).Version}}function D2(t){return{gc:w2(t),stat:Th(t),version:b2(t)}}function E2(t){return async function(r,n={}){const i=await t.post("resolve",{signal:n.signal,searchParams:L({arg:r,...n}),headers:n.headers}),{Path:s}=await i.json();return s}}function v2(t){return async function*(r,n={}){const i=await t.post("routing/findpeer",{signal:n.signal,searchParams:L({arg:r.toString(),stream:!0,...n}),headers:n.headers});for await(const s of i.ndjson())yield jn(s)}}function A2(t){return async function*(r,n={}){const i=await t.post("routing/findprovs",{signal:n.signal,searchParams:L({arg:r.toString(),...n}),headers:n.headers});for await(const s of i.ndjson())yield jn(s)}}function x2(t){return async function*(r,n={}){const i=await t.post("routing/get",{signal:n.signal,searchParams:L({arg:r instanceof Uint8Array?Ze(r):r.toString(),...n}),headers:n.headers});for await(const s of i.ndjson())yield jn(s)}}function C2(t){return async function*(r,n={recursive:!1}){const i=Array.isArray(r)?r:[r],s=await t.post("routing/provide",{signal:n.signal,searchParams:L({arg:i.map(o=>o.toString()),...n}),headers:n.headers});for await(const o of s.ndjson())yield jn(o)}}function B2(t){return async function*(r,n,i={}){const s=new AbortController,o=yr([s.signal,i.signal]);try{const a=await t.post("routing/put",{signal:o,searchParams:L({arg:r instanceof Uint8Array?Ze(r):r.toString(),stream:!0,...i}),...await Ur([n],s,i.headers)});for await(const u of a.ndjson())yield jn(u)}finally{o.clear()}}}function S2(t){return{findPeer:v2(t),findProvs:A2(t),get:x2(t),provide:C2(t),put:B2(t)}}function F2(t){return async function*(r={}){yield*(await t.post("stats/bw",{signal:r.signal,searchParams:L(r),headers:r.headers,transform:i=>({totalIn:BigInt(i.TotalIn),totalOut:BigInt(i.TotalOut),rateIn:parseFloat(i.RateIn),rateOut:parseFloat(i.RateOut)})})).ndjson()}}function k2(t){return{bitswap:lh(t),repo:Th(t),bw:F2(t)}}function T2(t){return async function(r={}){await(await t.post("shutdown",{signal:r.signal,searchParams:L(r),headers:r.headers})).text()}}function I2(t){return async function(r={}){const n=await t.post("swarm/addrs",{signal:r.signal,searchParams:L(r),headers:r.headers}),{Addrs:i}=await n.json();return Object.keys(i).map(s=>({id:vt(s),addrs:(i[s]??[]).map(o=>wt(o))}))}}function N2(t){return async function(r,n={}){const i=await t.post("swarm/connect",{signal:n.signal,searchParams:L({arg:r,...n}),headers:n.headers}),{Strings:s}=await i.json();return s??[]}}function _2(t){return async function(r,n={}){const i=await t.post("swarm/disconnect",{signal:n.signal,searchParams:L({arg:r,...n}),headers:n.headers}),{Strings:s}=await i.json();return s??[]}}function O2(t){return async function(r={}){const n=await t.post("swarm/addrs/local",{signal:r.signal,searchParams:L(r),headers:r.headers}),{Strings:i}=await n.json();return(i??[]).map(s=>wt(s))}}function P2(t){return async function(r={}){return((await(await t.post("swarm/peers",{signal:r.signal,searchParams:L(r),headers:r.headers})).json()).Peers??[]).map(s=>({addr:wt(s.Addr),peer:vt(s.Peer),muxer:s.Muxer,latency:s.Latency,streams:s.Streams,direction:s.Direction==null?void 0:s.Direction===0?"inbound":"outbound"}))}}function U2(t){return{addrs:I2(t),connect:N2(t),disconnect:_2(t),localAddrs:O2(t),peers:P2(t)}}function $2(t){return async function(r={}){const n=await t.post("version",{signal:r.signal,searchParams:L(r),headers:r.headers});return{...rt(await n.json()),"ipfs-http-client":"1.0.0"}}}class L2{constructor(e){x(this,"bases");x(this,"codecs");x(this,"hashers");x(this,"bitswap");x(this,"block");x(this,"bootstrap");x(this,"config");x(this,"dag");x(this,"dht");x(this,"diag");x(this,"files");x(this,"key");x(this,"log");x(this,"name");x(this,"object");x(this,"pin");x(this,"pubsub");x(this,"refs");x(this,"repo");x(this,"routing");x(this,"stats");x(this,"swarm");x(this,"add");x(this,"addAll");x(this,"cat");x(this,"get");x(this,"ls");x(this,"id");x(this,"version");x(this,"stop");x(this,"ping");x(this,"resolve");x(this,"commands");x(this,"mount");x(this,"isOnline");x(this,"getEndpointConfig");var a,u,f,c,d,p;const r=new hA(e),n={name:Kr.name,code:Kr.code,encode:w=>w,decode:w=>w},i=Object.values(es);(((a=e.ipld)==null?void 0:a.bases)??[]).forEach(w=>i.push(w)),this.bases=new gA({bases:i,loadBase:(u=e.ipld)==null?void 0:u.loadBase});const s=Object.values(ng);[Hm,im,vm,Hw,n].concat(((f=e.ipld)==null?void 0:f.codecs)??[]).forEach(w=>{s.push(w)}),this.codecs=new mA({codecs:s,loadCodec:(c=e.ipld)==null?void 0:c.loadCodec});const o=Object.values(rg);(((d=e.ipld)==null?void 0:d.hashers)??[]).forEach(w=>o.push(w)),this.hashers=new bA({hashers:o,loadHasher:(p=e.ipld)==null?void 0:p.loadHasher}),this.bitswap=JD(r),this.block=eE(r),this.bootstrap=iE(r),this.config=pE(r),this.dag=vE(r,this.codecs),this.dht=NE(r),this.diag=UE(r),this.files=JE(r),this.key=sv(r),this.log=AA(r),this.name=_A(r),this.object=$A(r,this.codecs),this.pin=r2(r),this.pubsub=g2(r),this.refs=m2(r),this.repo=D2(r),this.routing=S2(r),this.stats=k2(r),this.swarm=U2(r),this.add=hb(r),this.addAll=pf(r),this.cat=sE(r),this.get=ZE(r),this.ls=xA(r),this.id=hh(r),this.version=$2(r),this.stop=T2(r),this.ping=n2(r),this.resolve=E2(r),this.commands=oE(r),this.mount=BA(r),this.isOnline=XE(r),this.getEndpointConfig=YE(r)}}function R2(t){return new L2(t)}function M2(t={}){return(typeof t=="string"||ts(t)||t instanceof URL)&&(t={url:t}),R2(t)}var V2=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,H2=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,j2=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,vo={Space_Separator:V2,ID_Start:H2,ID_Continue:j2},$e={isSpaceSeparator(t){return typeof t=="string"&&vo.Space_Separator.test(t)},isIdStartChar(t){return typeof t=="string"&&(t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="$"||t==="_"||vo.ID_Start.test(t))},isIdContinueChar(t){return typeof t=="string"&&(t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||t==="$"||t==="_"||t==="â€Œ"||t==="â€"||vo.ID_Continue.test(t))},isDigit(t){return typeof t=="string"&&/[0-9]/.test(t)},isHexDigit(t){return typeof t=="string"&&/[0-9A-Fa-f]/.test(t)}};let na,ft,dr,ms,_r,Vt,Ke,au,ai;var z2=function(e,r){na=String(e),ft="start",dr=[],ms=0,_r=1,Vt=0,Ke=void 0,au=void 0,ai=void 0;do Ke=G2(),K2[ft]();while(Ke.type!=="eof");return typeof r=="function"?ia({"":ai},"",r):ai};function ia(t,e,r){const n=t[e];if(n!=null&&typeof n=="object")if(Array.isArray(n))for(let i=0;i<n.length;i++){const s=String(i),o=ia(n,s,r);o===void 0?delete n[s]:Object.defineProperty(n,s,{value:o,writable:!0,enumerable:!0,configurable:!0})}else for(const i in n){const s=ia(n,i,r);s===void 0?delete n[i]:Object.defineProperty(n,i,{value:s,writable:!0,enumerable:!0,configurable:!0})}return r.call(t,e,n)}let ae,ne,ri,ur,fe;function G2(){for(ae="default",ne="",ri=!1,ur=1;;){fe=gr();const t=Ih[ae]();if(t)return t}}function gr(){if(na[ms])return String.fromCodePoint(na.codePointAt(ms))}function N(){const t=gr();return t===`
`?(_r++,Vt=0):t?Vt+=t.length:Vt++,t&&(ms+=t.length),t}const Ih={default(){switch(fe){case"	":case"\v":case"\f":case" ":case"Â ":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":N();return;case"/":N(),ae="comment";return;case void 0:return N(),Se("eof")}if($e.isSpaceSeparator(fe)){N();return}return Ih[ft]()},comment(){switch(fe){case"*":N(),ae="multiLineComment";return;case"/":N(),ae="singleLineComment";return}throw Fe(N())},multiLineComment(){switch(fe){case"*":N(),ae="multiLineCommentAsterisk";return;case void 0:throw Fe(N())}N()},multiLineCommentAsterisk(){switch(fe){case"*":N();return;case"/":N(),ae="default";return;case void 0:throw Fe(N())}N(),ae="multiLineComment"},singleLineComment(){switch(fe){case`
`:case"\r":case"\u2028":case"\u2029":N(),ae="default";return;case void 0:return N(),Se("eof")}N()},value(){switch(fe){case"{":case"[":return Se("punctuator",N());case"n":return N(),Vr("ull"),Se("null",null);case"t":return N(),Vr("rue"),Se("boolean",!0);case"f":return N(),Vr("alse"),Se("boolean",!1);case"-":case"+":N()==="-"&&(ur=-1),ae="sign";return;case".":ne=N(),ae="decimalPointLeading";return;case"0":ne=N(),ae="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":ne=N(),ae="decimalInteger";return;case"I":return N(),Vr("nfinity"),Se("numeric",1/0);case"N":return N(),Vr("aN"),Se("numeric",NaN);case'"':case"'":ri=N()==='"',ne="",ae="string";return}throw Fe(N())},identifierNameStartEscape(){if(fe!=="u")throw Fe(N());N();const t=sa();switch(t){case"$":case"_":break;default:if(!$e.isIdStartChar(t))throw Lc();break}ne+=t,ae="identifierName"},identifierName(){switch(fe){case"$":case"_":case"â€Œ":case"â€":ne+=N();return;case"\\":N(),ae="identifierNameEscape";return}if($e.isIdContinueChar(fe)){ne+=N();return}return Se("identifier",ne)},identifierNameEscape(){if(fe!=="u")throw Fe(N());N();const t=sa();switch(t){case"$":case"_":case"â€Œ":case"â€":break;default:if(!$e.isIdContinueChar(t))throw Lc();break}ne+=t,ae="identifierName"},sign(){switch(fe){case".":ne=N(),ae="decimalPointLeading";return;case"0":ne=N(),ae="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":ne=N(),ae="decimalInteger";return;case"I":return N(),Vr("nfinity"),Se("numeric",ur*(1/0));case"N":return N(),Vr("aN"),Se("numeric",NaN)}throw Fe(N())},zero(){switch(fe){case".":ne+=N(),ae="decimalPoint";return;case"e":case"E":ne+=N(),ae="decimalExponent";return;case"x":case"X":ne+=N(),ae="hexadecimal";return}return Se("numeric",ur*0)},decimalInteger(){switch(fe){case".":ne+=N(),ae="decimalPoint";return;case"e":case"E":ne+=N(),ae="decimalExponent";return}if($e.isDigit(fe)){ne+=N();return}return Se("numeric",ur*Number(ne))},decimalPointLeading(){if($e.isDigit(fe)){ne+=N(),ae="decimalFraction";return}throw Fe(N())},decimalPoint(){switch(fe){case"e":case"E":ne+=N(),ae="decimalExponent";return}if($e.isDigit(fe)){ne+=N(),ae="decimalFraction";return}return Se("numeric",ur*Number(ne))},decimalFraction(){switch(fe){case"e":case"E":ne+=N(),ae="decimalExponent";return}if($e.isDigit(fe)){ne+=N();return}return Se("numeric",ur*Number(ne))},decimalExponent(){switch(fe){case"+":case"-":ne+=N(),ae="decimalExponentSign";return}if($e.isDigit(fe)){ne+=N(),ae="decimalExponentInteger";return}throw Fe(N())},decimalExponentSign(){if($e.isDigit(fe)){ne+=N(),ae="decimalExponentInteger";return}throw Fe(N())},decimalExponentInteger(){if($e.isDigit(fe)){ne+=N();return}return Se("numeric",ur*Number(ne))},hexadecimal(){if($e.isHexDigit(fe)){ne+=N(),ae="hexadecimalInteger";return}throw Fe(N())},hexadecimalInteger(){if($e.isHexDigit(fe)){ne+=N();return}return Se("numeric",ur*Number(ne))},string(){switch(fe){case"\\":N(),ne+=q2();return;case'"':if(ri)return N(),Se("string",ne);ne+=N();return;case"'":if(!ri)return N(),Se("string",ne);ne+=N();return;case`
`:case"\r":throw Fe(N());case"\u2028":case"\u2029":J2(fe);break;case void 0:throw Fe(N())}ne+=N()},start(){switch(fe){case"{":case"[":return Se("punctuator",N())}ae="value"},beforePropertyName(){switch(fe){case"$":case"_":ne=N(),ae="identifierName";return;case"\\":N(),ae="identifierNameStartEscape";return;case"}":return Se("punctuator",N());case'"':case"'":ri=N()==='"',ae="string";return}if($e.isIdStartChar(fe)){ne+=N(),ae="identifierName";return}throw Fe(N())},afterPropertyName(){if(fe===":")return Se("punctuator",N());throw Fe(N())},beforePropertyValue(){ae="value"},afterPropertyValue(){switch(fe){case",":case"}":return Se("punctuator",N())}throw Fe(N())},beforeArrayValue(){if(fe==="]")return Se("punctuator",N());ae="value"},afterArrayValue(){switch(fe){case",":case"]":return Se("punctuator",N())}throw Fe(N())},end(){throw Fe(N())}};function Se(t,e){return{type:t,value:e,line:_r,column:Vt}}function Vr(t){for(const e of t){if(gr()!==e)throw Fe(N());N()}}function q2(){switch(gr()){case"b":return N(),"\b";case"f":return N(),"\f";case"n":return N(),`
`;case"r":return N(),"\r";case"t":return N(),"	";case"v":return N(),"\v";case"0":if(N(),$e.isDigit(gr()))throw Fe(N());return"\0";case"x":return N(),W2();case"u":return N(),sa();case`
`:case"\u2028":case"\u2029":return N(),"";case"\r":return N(),gr()===`
`&&N(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw Fe(N());case void 0:throw Fe(N())}return N()}function W2(){let t="",e=gr();if(!$e.isHexDigit(e)||(t+=N(),e=gr(),!$e.isHexDigit(e)))throw Fe(N());return t+=N(),String.fromCodePoint(parseInt(t,16))}function sa(){let t="",e=4;for(;e-- >0;){const r=gr();if(!$e.isHexDigit(r))throw Fe(N());t+=N()}return String.fromCodePoint(parseInt(t,16))}const K2={start(){if(Ke.type==="eof")throw Hr();Ao()},beforePropertyName(){switch(Ke.type){case"identifier":case"string":au=Ke.value,ft="afterPropertyName";return;case"punctuator":qi();return;case"eof":throw Hr()}},afterPropertyName(){if(Ke.type==="eof")throw Hr();ft="beforePropertyValue"},beforePropertyValue(){if(Ke.type==="eof")throw Hr();Ao()},beforeArrayValue(){if(Ke.type==="eof")throw Hr();if(Ke.type==="punctuator"&&Ke.value==="]"){qi();return}Ao()},afterPropertyValue(){if(Ke.type==="eof")throw Hr();switch(Ke.value){case",":ft="beforePropertyName";return;case"}":qi()}},afterArrayValue(){if(Ke.type==="eof")throw Hr();switch(Ke.value){case",":ft="beforeArrayValue";return;case"]":qi()}},end(){}};function Ao(){let t;switch(Ke.type){case"punctuator":switch(Ke.value){case"{":t={};break;case"[":t=[];break}break;case"null":case"boolean":case"numeric":case"string":t=Ke.value;break}if(ai===void 0)ai=t;else{const e=dr[dr.length-1];Array.isArray(e)?e.push(t):Object.defineProperty(e,au,{value:t,writable:!0,enumerable:!0,configurable:!0})}if(t!==null&&typeof t=="object")dr.push(t),Array.isArray(t)?ft="beforeArrayValue":ft="beforePropertyName";else{const e=dr[dr.length-1];e==null?ft="end":Array.isArray(e)?ft="afterArrayValue":ft="afterPropertyValue"}}function qi(){dr.pop();const t=dr[dr.length-1];t==null?ft="end":Array.isArray(t)?ft="afterArrayValue":ft="afterPropertyValue"}function Fe(t){return ws(t===void 0?`JSON5: invalid end of input at ${_r}:${Vt}`:`JSON5: invalid character '${Nh(t)}' at ${_r}:${Vt}`)}function Hr(){return ws(`JSON5: invalid end of input at ${_r}:${Vt}`)}function Lc(){return Vt-=5,ws(`JSON5: invalid identifier character at ${_r}:${Vt}`)}function J2(t){console.warn(`JSON5: '${Nh(t)}' in strings is not valid ECMAScript; consider escaping`)}function Nh(t){const e={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(e[t])return e[t];if(t<" "){const r=t.charCodeAt(0).toString(16);return"\\x"+("00"+r).substring(r.length)}return t}function ws(t){const e=new SyntaxError(t);return e.lineNumber=_r,e.columnNumber=Vt,e}var Y2=function(e,r,n){const i=[];let s="",o,a,u="",f;if(r!=null&&typeof r=="object"&&!Array.isArray(r)&&(n=r.space,f=r.quote,r=r.replacer),typeof r=="function")a=r;else if(Array.isArray(r)){o=[];for(const b of r){let g;typeof b=="string"?g=b:(typeof b=="number"||b instanceof String||b instanceof Number)&&(g=String(b)),g!==void 0&&o.indexOf(g)<0&&o.push(g)}}return n instanceof Number?n=Number(n):n instanceof String&&(n=String(n)),typeof n=="number"?n>0&&(n=Math.min(10,Math.floor(n)),u="          ".substr(0,n)):typeof n=="string"&&(u=n.substr(0,10)),c("",{"":e});function c(b,g){let D=g[b];switch(D!=null&&(typeof D.toJSON5=="function"?D=D.toJSON5(b):typeof D.toJSON=="function"&&(D=D.toJSON(b))),a&&(D=a.call(g,b,D)),D instanceof Number?D=Number(D):D instanceof String?D=String(D):D instanceof Boolean&&(D=D.valueOf()),D){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof D=="string")return d(D);if(typeof D=="number")return String(D);if(typeof D=="object")return Array.isArray(D)?y(D):p(D)}function d(b){const g={"'":.1,'"':.2},D={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let v="";for(let F=0;F<b.length;F++){const T=b[F];switch(T){case"'":case'"':g[T]++,v+=T;continue;case"\0":if($e.isDigit(b[F+1])){v+="\\x00";continue}}if(D[T]){v+=D[T];continue}if(T<" "){let k=T.charCodeAt(0).toString(16);v+="\\x"+("00"+k).substring(k.length);continue}v+=T}const E=f||Object.keys(g).reduce((F,T)=>g[F]<g[T]?F:T);return v=v.replace(new RegExp(E,"g"),D[E]),E+v+E}function p(b){if(i.indexOf(b)>=0)throw TypeError("Converting circular structure to JSON5");i.push(b);let g=s;s=s+u;let D=o||Object.keys(b),v=[];for(const F of D){const T=c(F,b);if(T!==void 0){let k=w(F)+":";u!==""&&(k+=" "),k+=T,v.push(k)}}let E;if(v.length===0)E="{}";else{let F;if(u==="")F=v.join(","),E="{"+F+"}";else{let T=`,
`+s;F=v.join(T),E=`{
`+s+F+`,
`+g+"}"}}return i.pop(),s=g,E}function w(b){if(b.length===0)return d(b);const g=String.fromCodePoint(b.codePointAt(0));if(!$e.isIdStartChar(g))return d(b);for(let D=g.length;D<b.length;D++)if(!$e.isIdContinueChar(String.fromCodePoint(b.codePointAt(D))))return d(b);return b}function y(b){if(i.indexOf(b)>=0)throw TypeError("Converting circular structure to JSON5");i.push(b);let g=s;s=s+u;let D=[];for(let E=0;E<b.length;E++){const F=c(String(E),b);D.push(F!==void 0?F:"null")}let v;if(D.length===0)v="[]";else if(u==="")v="["+D.join(",")+"]";else{let E=`,
`+s,F=D.join(E);v=`[
`+s+F+`,
`+g+"]"}return i.pop(),s=g,v}};const Z2={parse:z2,stringify:Y2};var Rc=Z2,X2=ut('<img class="svelte-re623r">'),Q2=ut("<audio controls><source></audio>"),ex=ut('<video controls class="svelte-re623r"><source> <track kind="captions"></video>',2),tx=ut(`<object class="svelte-re623r"><p>Your browser can't render an <code>&lt;object&gt;</code> of type <q></q>.</p></object>`);function uu(t,e){Or(e,!0);const{debug:r}=xe;let n=Ht(e,"content",15);const{cid:i,title:s,type:o}=e.datum;let a=al(()=>{if(o==null)return"undefined";const[p,w,y]=Array.from(o.match(/^([^/]+)\/(.*)$/)??[]);return r&&console.debug({klass:w,ext:y}),y!=="svg+xml"?w:"object"});var u=no(),f=ni(u);{var c=p=>{var w=X2();Le(w,"id",i),Le(w,"alt",s),mt(w,y=>n(y),()=>n()),Ct(y=>Le(w,"src",y),[()=>Ui({cid:i})]),Me(p,w)},d=p=>{var w=no(),y=ni(w);{var b=D=>{var v=Q2();Le(v,"id",i),Le(v,"tabindex",-1);var E=Ee(v);Le(E,"type",o),be(v),mt(v,F=>n(F),()=>n()),Ct(F=>Le(E,"src",F),[()=>Ui({cid:i})]),Me(D,v)},g=D=>{var v=no(),E=ni(v);{var F=k=>{var I=ex();Le(I,"id",i),Le(I,"tabindex",-1);var _=Ee(I);Le(_,"type",o),Rt(2),be(I),mt(I,$=>n($),()=>n()),Ct($=>Le(_,"src",$),[()=>Ui({cid:i})]),Me(k,I)},T=k=>{var I=tx();Le(I,"id",i),Le(I,"title",s),Le(I,"type",o);var _=Ee(I),$=Te(Ee(_),3);$.textContent=o,Rt(),be(_),be(I),mt(I,X=>n(X),()=>n()),Ct(X=>Le(I,"data",X),[()=>Ui({cid:i})]),Me(k,I)};wn(E,k=>{O(a)==="video"?k(F):k(T,!1)},!0)}Me(D,v)};wn(y,D=>{O(a)==="audio"?D(b):D(g,!1)},!0)}Me(p,w)};wn(f,p=>{O(a)==="image"?p(c):p(d,!1)})}Me(t,u),Pr()}var rx=(t,e)=>{var r;return(r=e())==null?void 0:r.close()},nx=(t,e)=>{var r;return(r=e())==null?void 0:r.close()},ix=(t,e,r)=>{const n=new CustomEvent("datum-delete",{detail:{id:e.datum.id},bubbles:!0});r().dispatchEvent(n)},sx=ut('<dialog><h1> </h1> <button id="x" commandfor="close" class="svelte-1dmd0h1">â¨¯</button> <form class="svelte-1dmd0h1"><!> <nav class="svelte-1dmd0h1"><button id="cancel" type="button" commandfor="close" class="svelte-1dmd0h1"><u>C</u>ancel</button> <button id="delete" class="svelte-1dmd0h1"><u>R</u>emove</button></nav></form></dialog>');function ox(t,e){Or(e,!0);let r=Ht(e,"handle",15,null),n=Pe(null);var i=sx(),s=Ee(i),o=Ee(s);be(s);var a=Te(s,2);a.__click=[rx,r];var u=Te(a,2),f=Ee(u);uu(f,{get datum(){return e.datum}});var c=Te(f,2),d=Ee(c);d.__click=[nx,r];var p=Te(d,2);p.__click=[ix,e,r],mt(p,w=>me(n,w),()=>O(n)),be(c),be(u),be(i),mt(i,w=>r(w),()=>r()),Ct(()=>Es(o,`Delete ${e.datum.title??""}?`)),vn("open",i,()=>{console.debug({opened:r()}),fa().then(()=>{var w;return(w=O(n))==null?void 0:w.focus()})}),vn("submit",u,w=>w.preventDefault()),Me(t,i),Pr()}Ei(["click"]);var _h={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,r,n,i){var s=["","webkit","Moz","MS","ms","o"],o=r.createElement("div"),a="function",u=Math.round,f=Math.abs,c=Date.now;function d(l,h,m){return setTimeout(E(l,m),h)}function p(l,h,m){return Array.isArray(l)?(w(l,m[h],m),!0):!1}function w(l,h,m){var B;if(l)if(l.forEach)l.forEach(h,m);else if(l.length!==i)for(B=0;B<l.length;)h.call(m,l[B],B,l),B++;else for(B in l)l.hasOwnProperty(B)&&h.call(m,l[B],B,l)}function y(l,h,m){var B="DEPRECATED METHOD: "+h+`
`+m+` AT 
`;return function(){var U=new Error("get-stack-trace"),G=U&&U.stack?U.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",le=e.console&&(e.console.warn||e.console.log);return le&&le.call(e.console,B,G),l.apply(this,arguments)}}var b;typeof Object.assign!="function"?b=function(h){if(h===i||h===null)throw new TypeError("Cannot convert undefined or null to object");for(var m=Object(h),B=1;B<arguments.length;B++){var U=arguments[B];if(U!==i&&U!==null)for(var G in U)U.hasOwnProperty(G)&&(m[G]=U[G])}return m}:b=Object.assign;var g=y(function(h,m,B){for(var U=Object.keys(m),G=0;G<U.length;)(!B||B&&h[U[G]]===i)&&(h[U[G]]=m[U[G]]),G++;return h},"extend","Use `assign`."),D=y(function(h,m){return g(h,m,!0)},"merge","Use `assign`.");function v(l,h,m){var B=h.prototype,U;U=l.prototype=Object.create(B),U.constructor=l,U._super=B,m&&b(U,m)}function E(l,h){return function(){return l.apply(h,arguments)}}function F(l,h){return typeof l==a?l.apply(h&&h[0]||i,h):l}function T(l,h){return l===i?h:l}function k(l,h,m){w(X(h),function(B){l.addEventListener(B,m,!1)})}function I(l,h,m){w(X(h),function(B){l.removeEventListener(B,m,!1)})}function _(l,h){for(;l;){if(l==h)return!0;l=l.parentNode}return!1}function $(l,h){return l.indexOf(h)>-1}function X(l){return l.trim().split(/\s+/g)}function J(l,h,m){if(l.indexOf&&!m)return l.indexOf(h);for(var B=0;B<l.length;){if(m&&l[B][m]==h||!m&&l[B]===h)return B;B++}return-1}function W(l){return Array.prototype.slice.call(l,0)}function he(l,h,m){for(var B=[],U=[],G=0;G<l.length;){var le=l[G][h];J(U,le)<0&&B.push(l[G]),U[G]=le,G++}return B=B.sort(function(Xe,ct){return Xe[h]>ct[h]}),B}function R(l,h){for(var m,B,U=h[0].toUpperCase()+h.slice(1),G=0;G<s.length;){if(m=s[G],B=m?m+U:h,B in l)return B;G++}return i}var z=1;function C(){return z++}function S(l){var h=l.ownerDocument||l;return h.defaultView||h.parentWindow||e}var P=/mobile|tablet|ip(ad|hone|od)|android/i,V="ontouchstart"in e,K=R(e,"PointerEvent")!==i,Y=V&&P.test(navigator.userAgent),te="touch",ie="pen",Q="mouse",ge="kinect",we=25,ce=1,ve=2,se=4,pe=8,_e=1,Be=2,He=4,je=8,ze=16,nt=Be|He,Ft=je|ze,$r=nt|Ft,Lr=["x","y"],Ot=["clientX","clientY"];function Ge(l,h){var m=this;this.manager=l,this.callback=h,this.element=l.element,this.target=l.options.inputTarget,this.domHandler=function(B){F(l.options.enable,[l])&&m.handler(B)},this.init()}Ge.prototype={handler:function(){},init:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(S(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&I(this.element,this.evEl,this.domHandler),this.evTarget&&I(this.target,this.evTarget,this.domHandler),this.evWin&&I(S(this.element),this.evWin,this.domHandler)}};function Rr(l){var h,m=l.options.inputClass;return m?h=m:K?h=Ks:Y?h=Ti:V?h=Js:h=ki,new h(l,ln)}function ln(l,h,m){var B=m.pointers.length,U=m.changedPointers.length,G=h&ce&&B-U===0,le=h&(se|pe)&&B-U===0;m.isFirst=!!G,m.isFinal=!!le,G&&(l.session={}),m.eventType=h,fn(l,m),l.emit("hammer.input",m),l.recognize(m),l.session.prevInput=m}function fn(l,h){var m=l.session,B=h.pointers,U=B.length;m.firstInput||(m.firstInput=ue(h)),U>1&&!m.firstMultiple?m.firstMultiple=ue(h):U===1&&(m.firstMultiple=!1);var G=m.firstInput,le=m.firstMultiple,We=le?le.center:G.center,Xe=h.center=qe(B);h.timeStamp=c(),h.deltaTime=h.timeStamp-G.timeStamp,h.angle=Dt(We,Xe),h.distance=rr(We,Xe),j(m,h),h.offsetDirection=dn(h.deltaX,h.deltaY);var ct=Gt(h.deltaTime,h.deltaX,h.deltaY);h.overallVelocityX=ct.x,h.overallVelocityY=ct.y,h.overallVelocity=f(ct.x)>f(ct.y)?ct.x:ct.y,h.scale=le?zh(le.pointers,B):1,h.rotation=le?Ws(le.pointers,B):0,h.maxPointers=m.prevInput?h.pointers.length>m.prevInput.maxPointers?h.pointers.length:m.prevInput.maxPointers:h.pointers.length,re(m,h);var Wt=l.element;_(h.srcEvent.target,Wt)&&(Wt=h.srcEvent.target),h.target=Wt}function j(l,h){var m=h.center,B=l.offsetDelta||{},U=l.prevDelta||{},G=l.prevInput||{};(h.eventType===ce||G.eventType===se)&&(U=l.prevDelta={x:G.deltaX||0,y:G.deltaY||0},B=l.offsetDelta={x:m.x,y:m.y}),h.deltaX=U.x+(m.x-B.x),h.deltaY=U.y+(m.y-B.y)}function re(l,h){var m=l.lastInterval||h,B=h.timeStamp-m.timeStamp,U,G,le,We;if(h.eventType!=pe&&(B>we||m.velocity===i)){var Xe=h.deltaX-m.deltaX,ct=h.deltaY-m.deltaY,Wt=Gt(B,Xe,ct);G=Wt.x,le=Wt.y,U=f(Wt.x)>f(Wt.y)?Wt.x:Wt.y,We=dn(Xe,ct),l.lastInterval=h}else U=m.velocity,G=m.velocityX,le=m.velocityY,We=m.direction;h.velocity=U,h.velocityX=G,h.velocityY=le,h.direction=We}function ue(l){for(var h=[],m=0;m<l.pointers.length;)h[m]={clientX:u(l.pointers[m].clientX),clientY:u(l.pointers[m].clientY)},m++;return{timeStamp:c(),pointers:h,center:qe(h),deltaX:l.deltaX,deltaY:l.deltaY}}function qe(l){var h=l.length;if(h===1)return{x:u(l[0].clientX),y:u(l[0].clientY)};for(var m=0,B=0,U=0;U<h;)m+=l[U].clientX,B+=l[U].clientY,U++;return{x:u(m/h),y:u(B/h)}}function Gt(l,h,m){return{x:h/l||0,y:m/l||0}}function dn(l,h){return l===h?_e:f(l)>=f(h)?l<0?Be:He:h<0?je:ze}function rr(l,h,m){m||(m=Lr);var B=h[m[0]]-l[m[0]],U=h[m[1]]-l[m[1]];return Math.sqrt(B*B+U*U)}function Dt(l,h,m){m||(m=Lr);var B=h[m[0]]-l[m[0]],U=h[m[1]]-l[m[1]];return Math.atan2(U,B)*180/Math.PI}function Ws(l,h){return Dt(h[1],h[0],Ot)+Dt(l[1],l[0],Ot)}function zh(l,h){return rr(h[0],h[1],Ot)/rr(l[0],l[1],Ot)}var Gh={mousedown:ce,mousemove:ve,mouseup:se},qh="mousedown",Wh="mousemove mouseup";function ki(){this.evEl=qh,this.evWin=Wh,this.pressed=!1,Ge.apply(this,arguments)}v(ki,Ge,{handler:function(h){var m=Gh[h.type];m&ce&&h.button===0&&(this.pressed=!0),m&ve&&h.which!==1&&(m=se),this.pressed&&(m&se&&(this.pressed=!1),this.callback(this.manager,m,{pointers:[h],changedPointers:[h],pointerType:Q,srcEvent:h}))}});var Kh={pointerdown:ce,pointermove:ve,pointerup:se,pointercancel:pe,pointerout:pe},Jh={2:te,3:ie,4:Q,5:ge},du="pointerdown",hu="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(du="MSPointerDown",hu="MSPointerMove MSPointerUp MSPointerCancel");function Ks(){this.evEl=du,this.evWin=hu,Ge.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}v(Ks,Ge,{handler:function(h){var m=this.store,B=!1,U=h.type.toLowerCase().replace("ms",""),G=Kh[U],le=Jh[h.pointerType]||h.pointerType,We=le==te,Xe=J(m,h.pointerId,"pointerId");G&ce&&(h.button===0||We)?Xe<0&&(m.push(h),Xe=m.length-1):G&(se|pe)&&(B=!0),!(Xe<0)&&(m[Xe]=h,this.callback(this.manager,G,{pointers:m,changedPointers:[h],pointerType:le,srcEvent:h}),B&&m.splice(Xe,1))}});var Yh={touchstart:ce,touchmove:ve,touchend:se,touchcancel:pe},Zh="touchstart",Xh="touchstart touchmove touchend touchcancel";function pu(){this.evTarget=Zh,this.evWin=Xh,this.started=!1,Ge.apply(this,arguments)}v(pu,Ge,{handler:function(h){var m=Yh[h.type];if(m===ce&&(this.started=!0),!!this.started){var B=Qh.call(this,h,m);m&(se|pe)&&B[0].length-B[1].length===0&&(this.started=!1),this.callback(this.manager,m,{pointers:B[0],changedPointers:B[1],pointerType:te,srcEvent:h})}}});function Qh(l,h){var m=W(l.touches),B=W(l.changedTouches);return h&(se|pe)&&(m=he(m.concat(B),"identifier")),[m,B]}var e0={touchstart:ce,touchmove:ve,touchend:se,touchcancel:pe},t0="touchstart touchmove touchend touchcancel";function Ti(){this.evTarget=t0,this.targetIds={},Ge.apply(this,arguments)}v(Ti,Ge,{handler:function(h){var m=e0[h.type],B=r0.call(this,h,m);B&&this.callback(this.manager,m,{pointers:B[0],changedPointers:B[1],pointerType:te,srcEvent:h})}});function r0(l,h){var m=W(l.touches),B=this.targetIds;if(h&(ce|ve)&&m.length===1)return B[m[0].identifier]=!0,[m,m];var U,G,le=W(l.changedTouches),We=[],Xe=this.target;if(G=m.filter(function(ct){return _(ct.target,Xe)}),h===ce)for(U=0;U<G.length;)B[G[U].identifier]=!0,U++;for(U=0;U<le.length;)B[le[U].identifier]&&We.push(le[U]),h&(se|pe)&&delete B[le[U].identifier],U++;if(We.length)return[he(G.concat(We),"identifier"),We]}var n0=2500,gu=25;function Js(){Ge.apply(this,arguments);var l=E(this.handler,this);this.touch=new Ti(this.manager,l),this.mouse=new ki(this.manager,l),this.primaryTouch=null,this.lastTouches=[]}v(Js,Ge,{handler:function(h,m,B){var U=B.pointerType==te,G=B.pointerType==Q;if(!(G&&B.sourceCapabilities&&B.sourceCapabilities.firesTouchEvents)){if(U)i0.call(this,m,B);else if(G&&s0.call(this,B))return;this.callback(h,m,B)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function i0(l,h){l&ce?(this.primaryTouch=h.changedPointers[0].identifier,yu.call(this,h)):l&(se|pe)&&yu.call(this,h)}function yu(l){var h=l.changedPointers[0];if(h.identifier===this.primaryTouch){var m={x:h.clientX,y:h.clientY};this.lastTouches.push(m);var B=this.lastTouches,U=function(){var G=B.indexOf(m);G>-1&&B.splice(G,1)};setTimeout(U,n0)}}function s0(l){for(var h=l.srcEvent.clientX,m=l.srcEvent.clientY,B=0;B<this.lastTouches.length;B++){var U=this.lastTouches[B],G=Math.abs(h-U.x),le=Math.abs(m-U.y);if(G<=gu&&le<=gu)return!0}return!1}var mu=R(o.style,"touchAction"),wu=mu!==i,bu="compute",Du="auto",Ys="manipulation",Mr="none",Gn="pan-x",qn="pan-y",Ii=a0();function Zs(l,h){this.manager=l,this.set(h)}Zs.prototype={set:function(l){l==bu&&(l=this.compute()),wu&&this.manager.element.style&&Ii[l]&&(this.manager.element.style[mu]=l),this.actions=l.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var l=[];return w(this.manager.recognizers,function(h){F(h.options.enable,[h])&&(l=l.concat(h.getTouchAction()))}),o0(l.join(" "))},preventDefaults:function(l){var h=l.srcEvent,m=l.offsetDirection;if(this.manager.session.prevented){h.preventDefault();return}var B=this.actions,U=$(B,Mr)&&!Ii[Mr],G=$(B,qn)&&!Ii[qn],le=$(B,Gn)&&!Ii[Gn];if(U){var We=l.pointers.length===1,Xe=l.distance<2,ct=l.deltaTime<250;if(We&&Xe&&ct)return}if(!(le&&G)&&(U||G&&m&nt||le&&m&Ft))return this.preventSrc(h)},preventSrc:function(l){this.manager.session.prevented=!0,l.preventDefault()}};function o0(l){if($(l,Mr))return Mr;var h=$(l,Gn),m=$(l,qn);return h&&m?Mr:h||m?h?Gn:qn:$(l,Ys)?Ys:Du}function a0(){if(!wu)return!1;var l={},h=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(m){l[m]=h?e.CSS.supports("touch-action",m):!0}),l}var Ni=1,kt=2,hn=4,br=8,nr=br,Wn=16,qt=32;function ir(l){this.options=b({},this.defaults,l||{}),this.id=C(),this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=Ni,this.simultaneous={},this.requireFail=[]}ir.prototype={defaults:{},set:function(l){return b(this.options,l),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(l){if(p(l,"recognizeWith",this))return this;var h=this.simultaneous;return l=_i(l,this),h[l.id]||(h[l.id]=l,l.recognizeWith(this)),this},dropRecognizeWith:function(l){return p(l,"dropRecognizeWith",this)?this:(l=_i(l,this),delete this.simultaneous[l.id],this)},requireFailure:function(l){if(p(l,"requireFailure",this))return this;var h=this.requireFail;return l=_i(l,this),J(h,l)===-1&&(h.push(l),l.requireFailure(this)),this},dropRequireFailure:function(l){if(p(l,"dropRequireFailure",this))return this;l=_i(l,this);var h=J(this.requireFail,l);return h>-1&&this.requireFail.splice(h,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(l){return!!this.simultaneous[l.id]},emit:function(l){var h=this,m=this.state;function B(U){h.manager.emit(U,l)}m<br&&B(h.options.event+Eu(m)),B(h.options.event),l.additionalEvent&&B(l.additionalEvent),m>=br&&B(h.options.event+Eu(m))},tryEmit:function(l){if(this.canEmit())return this.emit(l);this.state=qt},canEmit:function(){for(var l=0;l<this.requireFail.length;){if(!(this.requireFail[l].state&(qt|Ni)))return!1;l++}return!0},recognize:function(l){var h=b({},l);if(!F(this.options.enable,[this,h])){this.reset(),this.state=qt;return}this.state&(nr|Wn|qt)&&(this.state=Ni),this.state=this.process(h),this.state&(kt|hn|br|Wn)&&this.tryEmit(h)},process:function(l){},getTouchAction:function(){},reset:function(){}};function Eu(l){return l&Wn?"cancel":l&br?"end":l&hn?"move":l&kt?"start":""}function vu(l){return l==ze?"down":l==je?"up":l==Be?"left":l==He?"right":""}function _i(l,h){var m=h.manager;return m?m.get(l):l}function Pt(){ir.apply(this,arguments)}v(Pt,ir,{defaults:{pointers:1},attrTest:function(l){var h=this.options.pointers;return h===0||l.pointers.length===h},process:function(l){var h=this.state,m=l.eventType,B=h&(kt|hn),U=this.attrTest(l);return B&&(m&pe||!U)?h|Wn:B||U?m&se?h|br:h&kt?h|hn:kt:qt}});function Oi(){Pt.apply(this,arguments),this.pX=null,this.pY=null}v(Oi,Pt,{defaults:{event:"pan",threshold:10,pointers:1,direction:$r},getTouchAction:function(){var l=this.options.direction,h=[];return l&nt&&h.push(qn),l&Ft&&h.push(Gn),h},directionTest:function(l){var h=this.options,m=!0,B=l.distance,U=l.direction,G=l.deltaX,le=l.deltaY;return U&h.direction||(h.direction&nt?(U=G===0?_e:G<0?Be:He,m=G!=this.pX,B=Math.abs(l.deltaX)):(U=le===0?_e:le<0?je:ze,m=le!=this.pY,B=Math.abs(l.deltaY))),l.direction=U,m&&B>h.threshold&&U&h.direction},attrTest:function(l){return Pt.prototype.attrTest.call(this,l)&&(this.state&kt||!(this.state&kt)&&this.directionTest(l))},emit:function(l){this.pX=l.deltaX,this.pY=l.deltaY;var h=vu(l.direction);h&&(l.additionalEvent=this.options.event+h),this._super.emit.call(this,l)}});function Xs(){Pt.apply(this,arguments)}v(Xs,Pt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Mr]},attrTest:function(l){return this._super.attrTest.call(this,l)&&(Math.abs(l.scale-1)>this.options.threshold||this.state&kt)},emit:function(l){if(l.scale!==1){var h=l.scale<1?"in":"out";l.additionalEvent=this.options.event+h}this._super.emit.call(this,l)}});function Qs(){ir.apply(this,arguments),this._timer=null,this._input=null}v(Qs,ir,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Du]},process:function(l){var h=this.options,m=l.pointers.length===h.pointers,B=l.distance<h.threshold,U=l.deltaTime>h.time;if(this._input=l,!B||!m||l.eventType&(se|pe)&&!U)this.reset();else if(l.eventType&ce)this.reset(),this._timer=d(function(){this.state=nr,this.tryEmit()},h.time,this);else if(l.eventType&se)return nr;return qt},reset:function(){clearTimeout(this._timer)},emit:function(l){this.state===nr&&(l&&l.eventType&se?this.manager.emit(this.options.event+"up",l):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function eo(){Pt.apply(this,arguments)}v(eo,Pt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Mr]},attrTest:function(l){return this._super.attrTest.call(this,l)&&(Math.abs(l.rotation)>this.options.threshold||this.state&kt)}});function to(){Pt.apply(this,arguments)}v(to,Pt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:nt|Ft,pointers:1},getTouchAction:function(){return Oi.prototype.getTouchAction.call(this)},attrTest:function(l){var h=this.options.direction,m;return h&(nt|Ft)?m=l.overallVelocity:h&nt?m=l.overallVelocityX:h&Ft&&(m=l.overallVelocityY),this._super.attrTest.call(this,l)&&h&l.offsetDirection&&l.distance>this.options.threshold&&l.maxPointers==this.options.pointers&&f(m)>this.options.velocity&&l.eventType&se},emit:function(l){var h=vu(l.offsetDirection);h&&this.manager.emit(this.options.event+h,l),this.manager.emit(this.options.event,l)}});function Pi(){ir.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}v(Pi,ir,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ys]},process:function(l){var h=this.options,m=l.pointers.length===h.pointers,B=l.distance<h.threshold,U=l.deltaTime<h.time;if(this.reset(),l.eventType&ce&&this.count===0)return this.failTimeout();if(B&&U&&m){if(l.eventType!=se)return this.failTimeout();var G=this.pTime?l.timeStamp-this.pTime<h.interval:!0,le=!this.pCenter||rr(this.pCenter,l.center)<h.posThreshold;this.pTime=l.timeStamp,this.pCenter=l.center,!le||!G?this.count=1:this.count+=1,this._input=l;var We=this.count%h.taps;if(We===0)return this.hasRequireFailures()?(this._timer=d(function(){this.state=nr,this.tryEmit()},h.interval,this),kt):nr}return qt},failTimeout:function(){return this._timer=d(function(){this.state=qt},this.options.interval,this),qt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==nr&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Dr(l,h){return h=h||{},h.recognizers=T(h.recognizers,Dr.defaults.preset),new ro(l,h)}Dr.VERSION="2.0.7",Dr.defaults={domEvents:!1,touchAction:bu,enable:!0,inputTarget:null,inputClass:null,preset:[[eo,{enable:!1}],[Xs,{enable:!1},["rotate"]],[to,{direction:nt}],[Oi,{direction:nt},["swipe"]],[Pi],[Pi,{event:"doubletap",taps:2},["tap"]],[Qs]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var u0=1,Au=2;function ro(l,h){this.options=b({},Dr.defaults,h||{}),this.options.inputTarget=this.options.inputTarget||l,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=l,this.input=Rr(this),this.touchAction=new Zs(this,this.options.touchAction),xu(this,!0),w(this.options.recognizers,function(m){var B=this.add(new m[0](m[1]));m[2]&&B.recognizeWith(m[2]),m[3]&&B.requireFailure(m[3])},this)}ro.prototype={set:function(l){return b(this.options,l),l.touchAction&&this.touchAction.update(),l.inputTarget&&(this.input.destroy(),this.input.target=l.inputTarget,this.input.init()),this},stop:function(l){this.session.stopped=l?Au:u0},recognize:function(l){var h=this.session;if(!h.stopped){this.touchAction.preventDefaults(l);var m,B=this.recognizers,U=h.curRecognizer;(!U||U&&U.state&nr)&&(U=h.curRecognizer=null);for(var G=0;G<B.length;)m=B[G],h.stopped!==Au&&(!U||m==U||m.canRecognizeWith(U))?m.recognize(l):m.reset(),!U&&m.state&(kt|hn|br)&&(U=h.curRecognizer=m),G++}},get:function(l){if(l instanceof ir)return l;for(var h=this.recognizers,m=0;m<h.length;m++)if(h[m].options.event==l)return h[m];return null},add:function(l){if(p(l,"add",this))return this;var h=this.get(l.options.event);return h&&this.remove(h),this.recognizers.push(l),l.manager=this,this.touchAction.update(),l},remove:function(l){if(p(l,"remove",this))return this;if(l=this.get(l),l){var h=this.recognizers,m=J(h,l);m!==-1&&(h.splice(m,1),this.touchAction.update())}return this},on:function(l,h){if(l!==i&&h!==i){var m=this.handlers;return w(X(l),function(B){m[B]=m[B]||[],m[B].push(h)}),this}},off:function(l,h){if(l!==i){var m=this.handlers;return w(X(l),function(B){h?m[B]&&m[B].splice(J(m[B],h),1):delete m[B]}),this}},emit:function(l,h){this.options.domEvents&&c0(l,h);var m=this.handlers[l]&&this.handlers[l].slice();if(!(!m||!m.length)){h.type=l,h.preventDefault=function(){h.srcEvent.preventDefault()};for(var B=0;B<m.length;)m[B](h),B++}},destroy:function(){this.element&&xu(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function xu(l,h){var m=l.element;if(m.style){var B;w(l.options.cssProps,function(U,G){B=R(m.style,G),h?(l.oldCssProps[B]=m.style[B],m.style[B]=U):m.style[B]=l.oldCssProps[B]||""}),h||(l.oldCssProps={})}}function c0(l,h){var m=r.createEvent("Event");m.initEvent(l,!0,!0),m.gesture=h,h.target.dispatchEvent(m)}b(Dr,{INPUT_START:ce,INPUT_MOVE:ve,INPUT_END:se,INPUT_CANCEL:pe,STATE_POSSIBLE:Ni,STATE_BEGAN:kt,STATE_CHANGED:hn,STATE_ENDED:br,STATE_RECOGNIZED:nr,STATE_CANCELLED:Wn,STATE_FAILED:qt,DIRECTION_NONE:_e,DIRECTION_LEFT:Be,DIRECTION_RIGHT:He,DIRECTION_UP:je,DIRECTION_DOWN:ze,DIRECTION_HORIZONTAL:nt,DIRECTION_VERTICAL:Ft,DIRECTION_ALL:$r,Manager:ro,Input:Ge,TouchAction:Zs,TouchInput:Ti,MouseInput:ki,PointerEventInput:Ks,TouchMouseInput:Js,SingleTouchInput:pu,Recognizer:ir,AttrRecognizer:Pt,Tap:Pi,Pan:Oi,Swipe:to,Pinch:Xs,Rotate:eo,Press:Qs,on:k,off:I,each:w,merge:D,extend:g,assign:b,inherit:v,bindFn:E,prefixed:R});var l0=typeof e<"u"?e:typeof self<"u"?self:{};l0.Hammer=Dr,t.exports?t.exports=Dr:e[n]=Dr})(window,document,"Hammer")})(_h);var ax=_h.exports;const ux=vs(ax);function xo({condition:t=()=>!0,branch:e={if:()=>{},else:()=>{}}}){return()=>{var r,n;return t!=null&&t()?(r=e==null?void 0:e.if)==null?void 0:r.call(e):(n=e==null?void 0:e.else)==null?void 0:n.call(e)}}var cx=()=>{},lx=(t,e,r,n,i,s)=>{t.stopImmediatePropagation(),["z","Escape"].includes(t.key)?e().close():["Enter","ArrowRight"].includes(t.key)?r(1):["ArrowLeft"].includes(t.key)?r(-1):[" "].includes(t.key)&&O(n)instanceof HTMLMediaElement?i["play|pause"]():["m"].includes(t.key)&&O(n)instanceof HTMLMediaElement?i["(un)?mute"]():["+","="].includes(t.key)?s({factor:1.2}):["-","_"].includes(t.key)?s({factor:.8}):["f"].includes(t.key)&&O(n)instanceof HTMLMediaElement?i.fullscreen():console.debug({"dialog:onkeypress":{"ðŸ”‘":t.key}})},fx=ut('<dialog class="zoom svelte-1fdhmlk"><h1 class="svelte-1fdhmlk"> </h1> <!></dialog>');function dx(t,e){Or(e,!0);let r=Ht(e,"handle",15,null),n=Pe(null);const{debug:i}=xe;function s({factor:y=1,scale:b=0}){if(!O(n))throw new Error("`content` is null.");const g=getComputedStyle(O(n));let D=Number(g.scale);isNaN(D)&&(D=1);let v=D*y+b;i&&console.debug({zoom:D,factor:y,scale:b,next:v}),O(n).style.scale=String(v),r().style.setProperty("--max-width","auto"),r().style.setProperty("--max-height","auto")}function o({factor:y=1,scale:b=0}){if(!O(n))throw new Error("`content` is null.");if(!(O(n)instanceof HTMLMediaElement))i&&console.warn("`content` is not a media element.");else{const g=O(n).volume;let D=g*y+b;i&&console.debug({volume:g,factor:y,scale:b,next:D})}}function a({factor:y=1,scale:b=0}){if(!O(n))throw new Error("`content` is null.");if(!(O(n)instanceof HTMLMediaElement))i&&console.warn("`content` is not a media element.");else{const g=O(n).currentTime;let D=g*y+b;i&&console.debug({time:g,factor:y,scale:b,next:D}),O(n).currentTime=D}}const u=(()=>{const b=Object.fromEntries(["play|pause","(un)?mute","fullscreen"].map(g=>[g,()=>{}]));if(!O(n))i&&console.warn("`content` is null.");else if(!(O(n)instanceof HTMLMediaElement))i&&console.warn("`content` is not a media element.");else{const g=O(n);Object.assign(b,{"play|pause":xo({condition:()=>g.paused,branch:{if:()=>g.play(),else:()=>g.pause()}}),"(un)?mute":xo({branch:{if:()=>g.muted=!g.muted}}),fullscreen:xo({condition:()=>!!document.fullscreenElement,branch:{if:()=>document.exitFullscreen(),else:()=>g.requestFullscreen()}})})}return b})();function f(y){var D,v,E,F,T;let b=r();const g=y>=0;if(Math.abs(y)>0)do b=(v=(D=b.closest("li"))==null?void 0:D[g?"previousElementSibling":"nextElementSibling"])==null?void 0:v.querySelector(".zoom"),b||(b=(T=(F=(E=r().closest("li"))==null?void 0:E.parentElement)==null?void 0:F[g?"lastElementChild":"firstElementChild"])==null?void 0:T.querySelector(".zoom")),y+=g?-1:1;while(Math.abs(y)>0&&b);b&&(r().close(),b.showModal())}Ds(()=>{const y=new ux(r());y.get("pinch").set({enable:!0}),y.on("swiperight",()=>{f(1)}),y.on("swipeleft",()=>{f(-1)}),y.on("panright",()=>{a({scale:2})}),y.on("panleft",()=>{a({scale:-2})}),y.on("panup",()=>{o({scale:20})}),y.on("pandown",()=>{o({scale:-20})}),y.on("pinchin",()=>{s({factor:.8})}),y.on("pinchout",()=>{s({factor:1.2})}),y.on("tap",()=>{var b;(b=u["play/pause"])==null||b.call(u)}),y.on("doubletap",()=>{r().close()})});var c=fx();c.__click=[cx],c.__keydown=[lx,r,f,n,u,s];var d=Ee(c),p=Ee(d,!0);be(d);var w=Te(d,2);uu(w,{get datum(){return e.datum},get content(){return O(n)},set content(y){me(n,ke(y))}}),be(c),mt(c,y=>r(y),()=>r()),Ct(()=>Es(p,e.datum.title)),Me(t,c),Pr()}Ei(["click","keydown"]);var hx=(t,e,r)=>{var n;t.preventDefault(),console.debug({"summary:onclick":{open:(n=O(e))==null?void 0:n.open,content:O(r),evt:t}})},px=ut('<details><summary class="svelte-16ok2cr"></summary> <!></details> <!> <!>',1);function gx(t,e){Or(e,!0);const{debug:r}=xe;class n extends Error{constructor(){super("Not a media element.")}}let i=Ht(e,"datum",11,null),s=Ht(e,"open",15,!1),o=Pe(null),a=Pe(null);if(i()==null)throw new Error(" `null` `datum`.");const{id:u,cid:f,title:c,type:d}=i();let p=Pe(null),w=Pe(null),y=Pe(null);const{single:b}=xe;Ds(()=>{var C;e.index===0&&((C=O(o))==null||C.focus())});function g(C){const{play:S=null,pitch:P=null}=C??{};if(!(O(a)instanceof HTMLMediaElement)){if(P===!1)return;throw r&&console.debug({rejecting:O(a)}),new n}(O(a).paused||S===!0)&&S!==!1?(r&&console.debug({playing:O(a)}),O(a).play()):(r&&console.debug({pausing:O(a)}),O(a).pause())}xe.register(g,{itemId:u});function D(C){O(p)&&((!s()||(C==null?void 0:C.open)===!0)&&(C==null?void 0:C.open)!==!1?(r&&console.debug({opening:O(p)}),s(!0)):(r&&console.debug({closing:O(p)}),s(!1),g({play:!1,pitch:!1})))}xe.register(D,{itemId:u});function v(){return s()}xe.register(v,{itemId:u});function E(){var C,S,P,V,K;r&&console.debug({zoom:{datum:i(),open:(C=O(y))==null?void 0:C.open,modal:(S=O(y))==null?void 0:S.matches(":modal")}}),(P=O(y))!=null&&P.matches(":modal")?(V=O(y))==null||V.close():(K=O(y))==null||K.showModal()}xe.register(E,{itemId:u});function F(){var C;(C=O(w))==null||C.showModal()}xe.register(F,{itemId:u});let T=al(()=>s()?{open:s()}:{});var k=px(),I=ni(k),_=C=>{C.ctrlKey&&s()&&E()},$=C=>{const S=C.currentTarget;r&&console.debug({"details:onkeypress":{"ðŸ”‘":C.key,open:S.open}}),C.key==="Escape"?D({open:!1}):S.open&&C.key==="Enter"&&(C.preventDefault(),D({open:!1}))},X=C=>{var S;if(/^Arrow(Up|Down)$/.test(C.key)){const P=C.currentTarget.closest("li"),V=C.key.endsWith("Up")?P==null?void 0:P.previousElementSibling:P==null?void 0:P.nextElementSibling;if(!V)return;(S=V.querySelector("summary"))==null||S.focus(),C.preventDefault()}};let J;var W=Ee(I);Le(W,"tabindex",0),W.__click=[hx,p,a],W.textContent=c,mt(W,C=>me(o,C),()=>O(o));var he=Te(W,2);uu(he,{get datum(){return i()},get content(){return O(a)},set content(C){me(a,ke(C))}}),be(I),mt(I,C=>me(p,C),()=>O(p));var R=Te(I,2);ox(R,{get datum(){return i()},get handle(){return O(w)},set handle(C){me(w,ke(C))}});var z=Te(R,2);dx(z,{get datum(){return i()},get handle(){return O(y)},set handle(C){me(y,ke(C))}}),Ct(()=>{J=y0(I,J,{...O(T),name:`file${(b?"":`-${e.index+1}`)??""}`,id:`deets-${e.index+1}`,onclick:_,onkeypress:$,onkeydown:X},"svelte-16ok2cr"),Le(W,"id",`sum-${e.index+1}`)}),vn("keypress",W,C=>{const S=C.currentTarget.closest("details");S&&(r&&console.debug({"summary:onclick":{"ðŸ”‘":C.key,open:S==null?void 0:S.open,content:O(a),evt:C}}),S.open&&C.key===" "&&(C.preventDefault(),C.stopImmediatePropagation()))}),Me(t,k),Pr()}Ei(["click"]);var yx=ut('<div class="border-solid rounded p-2 bg-white dark:bg-white/25"> </div>');function mx(t,e){Or(e,!0);var r=yx(),n=Ee(r,!0);be(r),Ct(()=>Es(n,e.datum.title)),Me(t,r),Pr()}function wx(t){if(Array.isArray(t))return t}function bx(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,a=[],u=!0,f=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=s.call(r)).done)&&(a.push(n.value),a.length!==e);u=!0);}catch(c){f=!0,i=c}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(f)throw i}}return a}}function oa(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Oh(t,e){if(t){if(typeof t=="string")return oa(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oa(t,e):void 0}}function Dx(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cu(t,e){return wx(t)||bx(t,e)||Oh(t,e)||Dx()}var tn={},Si={};Object.defineProperty(Si,"__esModule",{value:!0});Si.bind=void 0;function Ex(t,e){var r=e.type,n=e.listener,i=e.options;return t.addEventListener(r,n,i),function(){t.removeEventListener(r,n,i)}}Si.bind=Ex;var zs={},yn=ko&&ko.__assign||function(){return yn=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},yn.apply(this,arguments)};Object.defineProperty(zs,"__esModule",{value:!0});zs.bindAll=void 0;var vx=Si;function Mc(t){if(!(typeof t>"u"))return typeof t=="boolean"?{capture:t}:t}function Ax(t,e){if(e==null)return t;var r=yn(yn({},t),{options:yn(yn({},Mc(e)),Mc(t.options))});return r}function xx(t,e,r){var n=e.map(function(i){var s=Ax(i,r);return(0,vx.bind)(t,s)});return function(){n.forEach(function(s){return s()})}}zs.bindAll=xx;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.bindAll=t.bind=void 0;var e=Si;Object.defineProperty(t,"bind",{enumerable:!0,get:function(){return e.bind}});var r=zs;Object.defineProperty(t,"bindAll",{enumerable:!0,get:function(){return r.bindAll}})})(tn);var Ph="data-pdnd-honey-pot";function Uh(t){return t instanceof Element&&t.hasAttribute(Ph)}function $h(t){var e=document.elementsFromPoint(t.x,t.y),r=cu(e,2),n=r[0],i=r[1];return n?Uh(n)?i??null:n:null}function mi(t){"@babel/helpers - typeof";return mi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mi(t)}function Cx(t,e){if(mi(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(mi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bx(t){var e=Cx(t,"string");return mi(e)=="symbol"?e:e+""}function Fi(t,e,r){return(e=Bx(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Lh=2147483647;function Vc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Vc(Object(r),!0).forEach(function(n){Fi(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var wi=2,jc=wi/2;function Sx(t){return{x:Math.floor(t.x),y:Math.floor(t.y)}}function Fx(t){return{x:t.x-jc,y:t.y-jc}}function kx(t){return{x:Math.max(t.x,0),y:Math.max(t.y,0)}}function Tx(t){return{x:Math.min(t.x,window.innerWidth-wi),y:Math.min(t.y,window.innerHeight-wi)}}function zc(t){var e=t.client,r=Tx(kx(Fx(Sx(e))));return DOMRect.fromRect({x:r.x,y:r.y,width:wi,height:wi})}function Gc(t){var e=t.clientRect;return{left:"".concat(e.left,"px"),top:"".concat(e.top,"px"),width:"".concat(e.width,"px"),height:"".concat(e.height,"px")}}function Ix(t){var e=t.client,r=t.clientRect;return e.x>=r.x&&e.x<=r.x+r.width&&e.y>=r.y&&e.y<=r.y+r.height}function Nx(t){var e=t.initial,r=document.createElement("div");r.setAttribute(Ph,"true");var n=zc({client:e});Object.assign(r.style,Hc(Hc({backgroundColor:"transparent",position:"fixed",padding:0,margin:0,boxSizing:"border-box"},Gc({clientRect:n})),{},{pointerEvents:"auto",zIndex:Lh})),document.body.appendChild(r);var i=tn.bind(window,{type:"pointermove",listener:function(o){var a={x:o.clientX,y:o.clientY};n=zc({client:a}),Object.assign(r.style,Gc({clientRect:n}))},options:{capture:!0}});return function(o){var a=o.current;if(i(),Ix({client:a,clientRect:n})){r.remove();return}function u(){f(),r.remove()}var f=tn.bindAll(window,[{type:"pointerdown",listener:u},{type:"pointermove",listener:u},{type:"focusin",listener:u},{type:"focusout",listener:u},{type:"dragstart",listener:u},{type:"dragenter",listener:u},{type:"dragover",listener:u}],{capture:!0})}}function _x(){var t=null;function e(){return t=null,tn.bind(window,{type:"pointermove",listener:function(i){t={x:i.clientX,y:i.clientY}},options:{capture:!0}})}function r(){var n=null;return function(s){var o=s.eventName,a=s.payload;if(o==="onDragStart"){var u,f=a.location.initial.input,c=(u=t)!==null&&u!==void 0?u:{x:f.clientX,y:f.clientY};n=Nx({initial:c})}if(o==="onDrop"){var d,p=a.location.current.input;(d=n)===null||d===void 0||d({current:{x:p.clientX,y:p.clientY}}),n=null,t=null}}}return{bindEvents:e,getOnPostDispatch:r}}function Ox(t){if(Array.isArray(t))return oa(t)}function Px(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ux(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rh(t){return Ox(t)||Px(t)||Oh(t)||Ux()}function lu(t){var e=null;return function(){if(!e){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var o=t.apply(this,i);e={result:o}}return e.result}}var $x=lu(function(){return navigator.userAgent.includes("Firefox")}),Gs=lu(function(){var e=navigator,r=e.userAgent;return r.includes("AppleWebKit")&&!r.includes("Chrome")}),aa={isLeavingWindow:Symbol("leaving"),isEnteringWindow:Symbol("entering")};function Lx(t){var e=t.dragLeave;return Gs()?e.hasOwnProperty(aa.isLeavingWindow):!1}(function(){if(typeof window>"u"||!Gs())return;function e(){return{enterCount:0,isOverWindow:!1}}var r=e();function n(){r=e()}tn.bindAll(window,[{type:"dragstart",listener:function(){r.enterCount=0,r.isOverWindow=!0}},{type:"drop",listener:n},{type:"dragend",listener:n},{type:"dragenter",listener:function(s){!r.isOverWindow&&r.enterCount===0&&(s[aa.isEnteringWindow]=!0),r.isOverWindow=!0,r.enterCount++}},{type:"dragleave",listener:function(s){r.enterCount--,r.isOverWindow&&r.enterCount===0&&(s[aa.isLeavingWindow]=!0,r.isOverWindow=!1)}}],{capture:!0})})();function Rx(t){return"nodeName"in t}function Mx(t){return Rx(t)&&t.ownerDocument!==document}function Vx(t){var e=t.dragLeave,r=e.type,n=e.relatedTarget;return r!=="dragleave"?!1:Gs()?Lx({dragLeave:e}):n==null?!0:$x()?Mx(n):n instanceof HTMLIFrameElement}function Hx(t){var e=t.onDragEnd;return[{type:"pointermove",listener:function(){var r=0;return function(){if(r<20){r++;return}e()}}()},{type:"pointerdown",listener:e}]}function ui(t){return{altKey:t.altKey,button:t.button,buttons:t.buttons,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}var jx=function(e){var r=[],n=null,i=function(){for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];r=a,!n&&(n=requestAnimationFrame(function(){n=null,e.apply(void 0,r)}))};return i.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},i},Co=jx(function(t){return t()}),Wi=function(){var t=null;function e(n){var i=requestAnimationFrame(function(){t=null,n()});t={frameId:i,fn:n}}function r(){t&&(cancelAnimationFrame(t.frameId),t.fn(),t=null)}return{schedule:e,flush:r}}();function zx(t){var e=t.source,r=t.initial,n=t.dispatchEvent,i={dropTargets:[]};function s(a){n(a),i={dropTargets:a.payload.location.current.dropTargets}}var o={start:function(u){var f=u.nativeSetDragImage,c={current:r,previous:i,initial:r};s({eventName:"onGenerateDragPreview",payload:{source:e,location:c,nativeSetDragImage:f}}),Wi.schedule(function(){s({eventName:"onDragStart",payload:{source:e,location:c}})})},dragUpdate:function(u){var f=u.current;Wi.flush(),Co.cancel(),s({eventName:"onDropTargetChange",payload:{source:e,location:{initial:r,previous:i,current:f}}})},drag:function(u){var f=u.current;Co(function(){Wi.flush();var c={initial:r,previous:i,current:f};s({eventName:"onDrag",payload:{source:e,location:c}})})},drop:function(u){var f=u.current,c=u.updatedSourcePayload;Wi.flush(),Co.cancel(),s({eventName:"onDrop",payload:{source:c??e,location:{current:f,previous:i,initial:r}}})}};return o}var ua={isActive:!1};function Mh(){return!ua.isActive}function Gx(t){return t.dataTransfer?t.dataTransfer.setDragImage.bind(t.dataTransfer):null}function qx(t){var e=t.current,r=t.next;if(e.length!==r.length)return!0;for(var n=0;n<e.length;n++)if(e[n].element!==r[n].element)return!0;return!1}function Wx(t){var e=t.event,r=t.dragType,n=t.getDropTargetsOver,i=t.dispatchEvent;if(!Mh())return;var s=Kx({event:e,dragType:r,getDropTargetsOver:n});ua.isActive=!0;var o={current:s};Bo({event:e,current:s.dropTargets});var a=zx({source:r.payload,dispatchEvent:i,initial:s});function u(w){var y=qx({current:o.current.dropTargets,next:w.dropTargets});o.current=w,y&&a.dragUpdate({current:o.current})}function f(w){var y=ui(w),b=Uh(w.target)?$h({x:y.clientX,y:y.clientY}):w.target,g=n({target:b,input:y,source:r.payload,current:o.current.dropTargets});g.length&&(w.preventDefault(),Bo({event:w,current:g})),u({dropTargets:g,input:y})}function c(){o.current.dropTargets.length&&u({dropTargets:[],input:o.current.input}),a.drop({current:o.current,updatedSourcePayload:null}),d()}function d(){ua.isActive=!1,p()}var p=tn.bindAll(window,[{type:"dragover",listener:function(y){f(y),a.drag({current:o.current})}},{type:"dragenter",listener:f},{type:"dragleave",listener:function(y){Vx({dragLeave:y})&&(u({input:o.current.input,dropTargets:[]}),r.startedFrom==="external"&&c())}},{type:"drop",listener:function(y){if(o.current={dropTargets:o.current.dropTargets,input:ui(y)},!o.current.dropTargets.length){c();return}y.preventDefault(),Bo({event:y,current:o.current.dropTargets}),a.drop({current:o.current,updatedSourcePayload:r.type==="external"?r.getDropPayload(y):null}),d()}},{type:"dragend",listener:function(y){o.current={dropTargets:o.current.dropTargets,input:ui(y)},c()}}].concat(Rh(Hx({onDragEnd:c}))),{capture:!0});a.start({nativeSetDragImage:Gx(e)})}function Bo(t){var e,r=t.event,n=t.current,i=(e=n[0])===null||e===void 0?void 0:e.dropEffect;i!=null&&r.dataTransfer&&(r.dataTransfer.dropEffect=i)}function Kx(t){var e=t.event,r=t.dragType,n=t.getDropTargetsOver,i=ui(e);if(r.startedFrom==="external")return{input:i,dropTargets:[]};var s=n({input:i,source:r.payload,target:e.target,current:[]});return{input:i,dropTargets:s}}var qc={canStart:Mh,start:Wx},ca=new Map;function Jx(t){var e=t.typeKey,r=t.mount,n=ca.get(e);if(n)return n.usageCount++,n;var i={typeKey:e,unmount:r(),usageCount:1};return ca.set(e,i),i}function Yx(t){var e=Jx(t);return function(){e.usageCount--,!(e.usageCount>0)&&(e.unmount(),ca.delete(t.typeKey))}}function qs(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(){e.forEach(function(i){return i()})}}function Vh(t,e){var r=e.attribute,n=e.value;return t.setAttribute(r,n),function(){return t.removeAttribute(r)}}function Wc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Br(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Wc(Object(r),!0).forEach(function(n){Fi(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function So(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Zx(t))||e){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var f=r.next();return o=f.done,f},e:function(f){a=!0,s=f},f:function(){try{o||r.return==null||r.return()}finally{if(a)throw s}}}}function Zx(t,e){if(t){if(typeof t=="string")return Kc(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Kc(t,e):void 0}}function Kc(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Fo(t){return t.slice(0).reverse()}function Xx(t){var e=t.typeKey,r=t.defaultDropEffect,n=new WeakMap,i="data-drop-target-for-".concat(e),s="[".concat(i,"]");function o(w){return n.set(w.element,w),function(){return n.delete(w.element)}}function a(w){return qs(Vh(w.element,{attribute:i,value:"true"}),o(w))}function u(w){var y,b,g,D,v=w.source,E=w.target,F=w.input,T=w.result,k=T===void 0?[]:T;if(E==null)return k;if(!(E instanceof Element))return E instanceof Node?u({source:v,target:E.parentElement,input:F,result:k}):k;var I=E.closest(s);if(I==null)return k;var _=n.get(I);if(_==null)return k;var $={input:F,source:v,element:_.element};if(_.canDrop&&!_.canDrop($))return u({source:v,target:_.element.parentElement,input:F,result:k});var X=(y=(b=_.getData)===null||b===void 0?void 0:b.call(_,$))!==null&&y!==void 0?y:{},J=(g=(D=_.getDropEffect)===null||D===void 0?void 0:D.call(_,$))!==null&&g!==void 0?g:r,W={data:X,element:_.element,dropEffect:J,isActiveDueToStickiness:!1};return u({source:v,target:_.element.parentElement,input:F,result:[].concat(Rh(k),[W])})}function f(w){var y=w.eventName,b=w.payload,g=So(b.location.current.dropTargets),D;try{for(g.s();!(D=g.n()).done;){var v,E=D.value,F=n.get(E.element),T=Br(Br({},b),{},{self:E});F==null||(v=F[y])===null||v===void 0||v.call(F,T)}}catch(k){g.e(k)}finally{g.f()}}var c={onGenerateDragPreview:f,onDrag:f,onDragStart:f,onDrop:f,onDropTargetChange:function(y){var b=y.payload,g=new Set(b.location.current.dropTargets.map(function(S){return S.element})),D=new Set,v=So(b.location.previous.dropTargets),E;try{for(v.s();!(E=v.n()).done;){var F,T=E.value;D.add(T.element);var k=n.get(T.element),I=g.has(T.element),_=Br(Br({},b),{},{self:T});if(k==null||(F=k.onDropTargetChange)===null||F===void 0||F.call(k,_),!I){var $;k==null||($=k.onDragLeave)===null||$===void 0||$.call(k,_)}}}catch(S){v.e(S)}finally{v.f()}var X=So(b.location.current.dropTargets),J;try{for(X.s();!(J=X.n()).done;){var W,he,R=J.value;if(!D.has(R.element)){var z=Br(Br({},b),{},{self:R}),C=n.get(R.element);C==null||(W=C.onDropTargetChange)===null||W===void 0||W.call(C,z),C==null||(he=C.onDragEnter)===null||he===void 0||he.call(C,z)}}}catch(S){X.e(S)}finally{X.f()}}};function d(w){c[w.eventName](w)}function p(w){var y=w.source,b=w.target,g=w.input,D=w.current,v=u({source:y,target:b,input:g});if(v.length>=D.length)return v;for(var E=Fo(D),F=Fo(v),T=[],k=0;k<E.length;k++){var I,_=E[k],$=F[k];if($!=null){T.push($);continue}var X=T[k-1],J=E[k-1];if((X==null?void 0:X.element)!==(J==null?void 0:J.element))break;var W=n.get(_.element);if(!W)break;var he={input:g,source:y,element:W.element};if(W.canDrop&&!W.canDrop(he)||!((I=W.getIsSticky)!==null&&I!==void 0&&I.call(W,he)))break;T.push(Br(Br({},_),{},{isActiveDueToStickiness:!0}))}return Fo(T)}return{dropTargetForConsumers:a,getIsOver:p,dispatchEvent:d}}function Qx(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=eC(t))||e){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var f=r.next();return o=f.done,f},e:function(f){a=!0,s=f},f:function(){try{o||r.return==null||r.return()}finally{if(a)throw s}}}}function eC(t,e){if(t){if(typeof t=="string")return Jc(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jc(t,e):void 0}}function Jc(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Yc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function tC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Yc(Object(r),!0).forEach(function(n){Fi(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rC(){var t=new Set,e=null;function r(s){e&&(!s.canMonitor||s.canMonitor(e.canMonitorArgs))&&e.active.add(s)}function n(s){var o=tC({},s);return t.add(o),r(o),function(){t.delete(o),e&&e.active.delete(o)}}function i(s){var o=s.eventName,a=s.payload;if(o==="onGenerateDragPreview"){e={canMonitorArgs:{initial:a.location.initial,source:a.source},active:new Set};var u=Qx(t),f;try{for(u.s();!(f=u.n()).done;){var c=f.value;r(c)}}catch(g){u.e(g)}finally{u.f()}}if(e){for(var d=Array.from(e.active),p=0,w=d;p<w.length;p++){var y=w[p];if(e.active.has(y)){var b;(b=y[o])===null||b===void 0||b.call(y,a)}}o==="onDrop"&&(e.active.clear(),e=null)}}return{dispatchEvent:i,monitorForConsumers:n}}function nC(t){var e=t.typeKey,r=t.mount,n=t.dispatchEventToSource,i=t.onPostDispatch,s=t.defaultDropEffect,o=rC(),a=Xx({typeKey:e,defaultDropEffect:s});function u(d){n==null||n(d),a.dispatchEvent(d),o.dispatchEvent(d),i==null||i(d)}function f(d){var p=d.event,w=d.dragType;qc.start({event:p,dragType:w,getDropTargetsOver:a.getIsOver,dispatchEvent:u})}function c(){function d(){var p={canStart:qc.canStart,start:f};return r(p)}return Yx({typeKey:e,mount:d})}return{registerUsage:c,dropTarget:a.dropTargetForConsumers,monitor:o.monitorForConsumers}}var iC=lu(function(){return navigator.userAgent.toLocaleLowerCase().includes("android")}),sC="pdnd:android-fallback",Zc="text/plain",oC="text/uri-list",aC="application/vnd.pdnd",bs=new WeakMap;function uC(t){return bs.set(t.element,t),function(){bs.delete(t.element)}}var Xc=_x(),fu=nC({typeKey:"element",defaultDropEffect:"move",mount:function(e){return qs(Xc.bindEvents(),tn.bind(document,{type:"dragstart",listener:function(n){var i,s,o,a,u,f;if(e.canStart(n)&&!n.defaultPrevented&&n.dataTransfer){var c=n.target;if(!(c instanceof HTMLElement))return null;var d=bs.get(c);if(!d)return null;var p=ui(n),w={element:d.element,dragHandle:(i=d.dragHandle)!==null&&i!==void 0?i:null,input:p};if(d.canDrag&&!d.canDrag(w))return n.preventDefault(),null;if(d.dragHandle){var y=$h({x:p.clientX,y:p.clientY});if(!d.dragHandle.contains(y))return n.preventDefault(),null}var b=(s=(o=d.getInitialDataForExternal)===null||o===void 0?void 0:o.call(d,w))!==null&&s!==void 0?s:null;if(b)for(var g=0,D=Object.entries(b);g<D.length;g++){var v=cu(D[g],2),E=v[0],F=v[1];n.dataTransfer.setData(E,F??"")}iC()&&!n.dataTransfer.types.includes(Zc)&&!n.dataTransfer.types.includes(oC)&&n.dataTransfer.setData(Zc,sC),n.dataTransfer.setData(aC,"");var T={element:d.element,dragHandle:(a=d.dragHandle)!==null&&a!==void 0?a:null,data:(u=(f=d.getInitialData)===null||f===void 0?void 0:f.call(d,w))!==null&&u!==void 0?u:{}},k={type:"element",payload:T,startedFrom:"internal"};e.start({event:n,dragType:k})}}}))},dispatchEventToSource:function(e){var r,n,i=e.eventName,s=e.payload;(r=bs.get(s.source.element))===null||r===void 0||(n=r[i])===null||n===void 0||n.call(r,s)},onPostDispatch:Xc.getOnPostDispatch()}),cC=fu.dropTarget,Hh=fu.monitor;function lC(t){return qs(fu.registerUsage(),uC(t),Vh(t.element,{attribute:"draggable",value:"true"}))}function Qc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function el(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Qc(Object(r),!0).forEach(function(n){Fi(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var fC={top:function(e,r){return Math.abs(r.y-e.top)},right:function(e,r){return Math.abs(e.right-r.x)},bottom:function(e,r){return Math.abs(e.bottom-r.y)},left:function(e,r){return Math.abs(r.x-e.left)}},jh=Symbol("closestEdge");function dC(t,e){var r,n,i=e.element,s=e.input,o=e.allowedEdges,a={x:s.clientX,y:s.clientY},u=i.getBoundingClientRect(),f=o.map(function(d){return{edge:d,value:fC[d](u,a)}}),c=(r=(n=f.sort(function(d,p){return d.value-p.value})[0])===null||n===void 0?void 0:n.edge)!==null&&r!==void 0?r:null;return el(el({},t),{},Fi({},jh,c))}function la(t){var e;return(e=t[jh])!==null&&e!==void 0?e:null}function hC(t){var e=t.list,r=t.startIndex,n=t.finishIndex;if(r===-1||n===-1)return e;var i=Array.from(e),s=i.splice(r,1),o=cu(s,1),a=o[0];return i.splice(n,0,a),i}function pC(t){var e=t.startIndex,r=t.closestEdgeOfTarget,n=t.indexOfTarget,i=t.axis;if(e===-1||n===-1||e===n)return e;if(r==null)return n;var s=i==="vertical"&&r==="bottom"||i==="horizontal"&&r==="right",o=e<n;return o?s?n:n-1:s?n+1:n}function gC(t){var e=t.list,r=t.startIndex,n=t.closestEdgeOfTarget,i=t.indexOfTarget,s=t.axis;return hC({list:e,startIndex:r,finishIndex:pC({closestEdgeOfTarget:n,startIndex:r,indexOfTarget:i,axis:s})})}var yC={none:0,small:100,medium:350,large:700};function mC(t){t.animate([{backgroundColor:"var(--ds-background-selected, #E9F2FF)"},{}],{duration:yC.large,easing:"cubic-bezier(0.25, 0.1, 0.25, 1.0)",iterations:1})}function wC(){return{x:0,y:0}}function bC(t){var e=t.render,r=t.nativeSetDragImage,n=t.getOffset,i=n===void 0?wC:n,s=document.createElement("div");Object.assign(s.style,{position:"fixed",top:0,left:0,zIndex:Lh,pointerEvents:"none"}),document.body.append(s);var o=e({container:s});queueMicrotask(function(){var f=i({container:s});if(Gs()){var c=s.getBoundingClientRect();if(c.width===0)return;s.style.left="-".concat(c.width-1e-4,"px")}r==null||r(s,f.x,f.y)});function a(){u(),o==null||o(),document.body.removeChild(s)}var u=Hh({onDragStart:a,onDrop:a})}function DC(t){return function(e){var r=e.container;return Object.assign(r.style,{borderLeft:"".concat(t.x," solid transparent"),borderTop:"".concat(t.y," solid transparent")}),{x:0,y:0}}}var EC="Invariant failed";function vC(t,e){if(!t)throw new Error(EC)}var AC=ut("<div></div>");function xC(t,e){let r=Ht(e,"edge",3,"top"),n=Ht(e,"gap",3,"0.5rem");const i=2,s=8,o=(i-s)/2,a=`calc(-0.5 * (${n()} + ${i}px))`;var u=AC();Ct(()=>{da(u,ha(["drop-indicator",`${r()}`]),"svelte-m9rsq0"),Yt(u,"--line-thickness",`${i}px`),Yt(u,"--line-offset",a),Yt(u,"--terminal-size",`${s}px`),Yt(u,"--terminal-radius",`${s/2}px`),Yt(u,"--negative-terminal-size",`-${s}px`),Yt(u,"--offset-terminal",`${o}px`),Yt(u,"position","absolute"),Yt(u,"pointer-events","none")}),Me(t,u)}var CC=ut("<li><!> <!></li>");function BC(t,e){Or(e,!0);const r={type:"idle"};let n=Ht(e,"datum",15,null);if(n()==null)throw new Error("`null` `datum`.");let i=Pe(null),s=Pe(ke(r)),o=Pe(!1);Ds(()=>(vC(O(i)),qs(lC({element:O(i),getInitialData(){return n()},onGenerateDragPreview({nativeSetDragImage:p}){bC({nativeSetDragImage:p,getOffset:DC({x:"1rem",y:"0.5rem"}),render({container:w}){e.preview!=null&&(me(s,ke({type:"preview",container:w})),p0(e.preview,{target:w,props:{datum:n()}}))}})},onDragStart(){me(s,ke({type:"is-dragging"}))},onDrop(){me(s,ke(r))}}),cC({element:O(i),canDrop({source:p}){return p.element===O(i)?!1:e.isDatum(p.data)},getData({input:p}){return n()==null?{}:O(i)==null?n():dC(n(),{element:O(i),input:p,allowedEdges:["top","bottom"]})},getIsSticky(){return!0},onDragEnter({self:p}){const w=la(p.data);me(s,ke({type:"is-dragging-over",closestEdge:w}))},onDrag({self:p}){const w=la(p.data);me(s,ke({type:"is-dragging-over",closestEdge:w}))},onDragLeave(){me(s,ke(r))},onDrop(){me(s,ke(r))}}))));const a=()=>{var p;xe.activeId=((p=n())==null?void 0:p.id)??null};var u=CC();u.__focusin=a,u.__click=p=>{a(),(!p.ctrlKey||!O(o))&&xe.retrieve("toggleOpen",{useActive:!0})()};var f=Ee(u);A0(f,()=>e.row,(p,w)=>{w(p,{get index(){return e.index},get datum(){return n()},set datum(y){n(y)},get open(){return O(o)},set open(y){me(o,ke(y))}})});var c=Te(f,2);{var d=p=>{xC(p,{get edge(){return O(s).closestEdge},gap:"0.5rem"})};wn(c,p=>{O(s).type==="is-dragging-over"&&O(s).closestEdge&&p(d)})}be(u),mt(u,p=>me(i,p),()=>O(i)),Ct(p=>{var w,y;Le(u,"data-element-id",(w=n())==null?void 0:w.id),da(u,ha(p),"svelte-1iaogg8"),Yt(u,"view-transition-name",`item-${(y=n())==null?void 0:y.id}`)},[()=>{var p;return(p=e.rowClasses)==null?void 0:p.call(e,O(s).type)}]),vn("keypress",u,()=>{}),Me(t,u),Pr()}Ei(["focusin","click"]);var SC=ut("<ol></ol>");function FC(t,e){Or(e,!0);let r=Ht(e,"data",31,()=>ke([])),n=Ht(e,"history",27,()=>ke([])),i=Pe(null);const s=a=>e.isDatum?e.isDatum(a):!0;Ds(()=>Hh({canMonitor({source:a}){return s(a.data)},onDrop({location:a,source:u}){const[f]=a.current.dropTargets;if(!f)return;const{data:c}=u,{data:d}=f;if(!s(c)||!s(d))return;const p=v=>r().findIndex(({id:E})=>E===v),w=p(c.id),y=p(d.id);if(y<0||w<0)return;const b=la(d),g=async()=>{var F;n().push([...r()]);const v={idx:w},E={idx:y};if(O(i)){for(const T of[v,E])T.elem=(F=O(i))==null?void 0:F.querySelector(`li:nth-of-type(${T.idx+1})`),T.color=getComputedStyle(T.elem).borderColor;v.elem&&v.color&&E.elem&&E.color&&(v.elem.style.borderColor=v.color,E.elem.style.borderColor=E.color)}r(gC({list:r(),startIndex:w,indexOfTarget:y,closestEdgeOfTarget:b,axis:"vertical"})),await fa(),v.elem&&v.color&&E.elem&&E.color&&(v.elem.style.borderColor=E.color,E.elem.style.borderColor=v.color)};"startViewTransition"in document?document.startViewTransition(g):g();const D=document.querySelector(`[data-element-id="${c.id}"]`);D instanceof HTMLElement&&mC(D)}}));var o=SC();v0(o,23,r,a=>a.id,(a,u,f)=>{BC(a,{get row(){return e.row},get rowClasses(){return e.rowClasses},get preview(){return e.preview},isDatum:s,get index(){return O(f)},get datum(){return r()[O(f)]},set datum(c){r(r()[O(f)]=c,!0)}})}),be(o),mt(o,a=>me(i,a),()=>O(i)),Ct(a=>da(o,ha(a)),[()=>[...Array.from(e.listClasses??[]),"sortable-list"]]),Me(t,o),Pr()}var kC=ut('<dialog><h1>Keyboard & Touch Navigation</h1> <form method="dialog"><button id="close" class="svelte-invagy">â¨¯</button> <ul class="svelte-invagy"><li><kbd>?</kbd>: (Display|Hide) these shortcuts.</li> <li><kbd>â†‘</kbd> | <kbd>â†“</kbd>: Highlight the (previous|next) entry.</li> <li><kbd>enter</kbd>: (Expand|Collapse) the highlighted entry.</li> <li><kbd>e</kbd>: Edit the title of the highlighted entry.</li> <li><kbd>c</kbd>: Copy the highlighted entry to a different list.</li> <li><kbd>x</kbd> / <kbd>delete</kbd> / <kbd>backspace</kbd>: Delete the highlighted entry.</li> <li><kbd>s</kbd> | <kbd>n</kbd>: (Save|Load) the current configuration (to|from) Neo4j.</li> <li><kbd>j</kbd>: Jump to a specific entry number.</li> <li><kbd>m</kbd>, (<kbd>â†‘</kbd> | <kbd>â†“</kbd>), <kbd>enter</kbd>: Move the selected entry (up|down).</li> <li><kbd>d</kbd> | <kbd>l</kbd>: (Down)?Load the congfiguration as JSON5.</li> <li><kbd>p</kbd> | <kbd>b</kbd>: (Publish|Load) a CBOR representation of the list (to|from) IPFS pub/sub.</li> <li><kbd>a</kbd>: Add local files to the list <em>(removing duplicates)</em>.</li> <li><kbd>v</kbd>: View all entries.</li> <li><kbd>h</kbd>: Hide all entries.</li> <li><kbd>u</kbd> | <kbd>r</kbd>: (Un|Re)do the last change.</li> <li><kbd><i>space</i></kbd>: <ul class="svelte-invagy"><li>If the highlighted entry is collapsed, expand it.</li> <li>If the expanded entry is media, (play|pause) it.</li> <li>If the expanded entry is not media, collapse it.</li></ul></li> <li><kbd>z</kbd>: Zoom in on the highlighted entry: <ul class="svelte-invagy"><li><kbd>z</kbd> / <kbd>escape</kbd>: Zoom out.</li> <li><kbd>ctrl</kbd> âž• <kbd>â†’</kbd> / <kbd>â†’</kbd> â¨¯ 2 / <kbd>enter</kbd> / <em>swipe</em> <kbd>â†’</kbd>: View the next entry.</li> <li><kbd>ctrl</kbd> âž• <kbd>â†</kbd> / <kbd>â†</kbd> â¨¯ 2 / <em>swipe</em> <kbd>â†</kbd>: View the previous entry.</li> <li>(<em>pan</em>)? <kbd>â†’</kbd> | (<em>pan</em>)? <kbd>â†</kbd>: Seek (forward|back) by 2 seconds.</li> <li><kbd>â†’</kbd> â¨¯ 2, <kbd>â†’</kbd>+ | <kbd>â†</kbd> â¨¯ 2, <kbd>â†’</kbd>+: Seek (forward|back) by 1 minute.</li> <li>(<kbd>â†’</kbd> | <kbd>â†</kbd>) â‰¥ 2sec: Seek (forward|back) by 7Â½% for each additional 1Â½ second held.</li> <li><kbd>0</kbd>â€“<kbd>9</kbd>: Seek to 0â€“90% of the way through the media.</li> <li><kbd>â†‘</kbd> | <kbd>â†“</kbd>: (In|De)crease the volume by â…•.</li> <li><kbd>ctrl</kbd> âž• (<kbd>â†‘</kbd> | <kbd>â†“</kbd>) / (<em>pan</em>)? (<kbd>â†‘</kbd> | <kbd>â†“</kbd>): (In|De)crease the volume by 75%.</li> <li><kbd>space</kbd>: (Play|Pause) media.</li> <li><kbd>m</kbd>: (Un)?Mute media.</li> <li><kbd>f</kbd>: Toggle fullscreen.</li></ul></li></ul> <ul id="controls" class="svelte-invagy"><li><button id="ok">OK</button></li></ul></form></dialog>');function TC(t,e){let r=Ht(e,"handle",15,null);var n=kC();mt(n,i=>r(i),()=>r()),Me(t,n)}var IC=ut('<meta name="description" class="svelte-1t6afbf">'),NC=(t,e)=>{var r;return(r=O(e))==null?void 0:r.click()},_C=ut('<section class="svelte-1t6afbf"><p class="svelte-1t6afbf">Loadingâ€¦</p> <progress class="svelte-1t6afbf"> </progress></section>'),OC=(t,e,r)=>e(t,r),PC=(t,e)=>{var r;return(r=O(e))==null?void 0:r.click()},UC=(t,e,r)=>e(t,r),$C=ut('<p class="svelte-1t6afbf">No entries yet.</p>'),LC=ut('<header class="svelte-1t6afbf"><h1 class="svelte-1t6afbf">Merge List</h1></header> <main class="svelte-1t6afbf"><form class="svelte-1t6afbf"><label class="svelte-1t6afbf"><button id="add-file" type="button" class="svelte-1t6afbf"><!></button> <input type="file" accept="image/*,video/*,audio/*" multiple class="svelte-1t6afbf"></label></form> <ul id="controls" class="svelte-1t6afbf"><li class="svelte-1t6afbf"><button id="save" type="button" class="svelte-1t6afbf">ðŸ–«</button> <dialog open class="svelte-1t6afbf">Save</dialog></li> <li class="svelte-1t6afbf"><form class="svelte-1t6afbf"><label class="svelte-1t6afbf"><button id="export" type="button" class="svelte-1t6afbf">â­±</button> <input type="file" accept="*json5,*.json" multiple class="svelte-1t6afbf"></label></form> <dialog open class="svelte-1t6afbf">Import</dialog></li> <li class="svelte-1t6afbf"><button id="export" type="button" class="svelte-1t6afbf">â­³</button> <dialog open class="svelte-1t6afbf">Export</dialog></li> <li class="svelte-1t6afbf"><button id="undo" type="button" class="svelte-1t6afbf">â†º</button> <dialog open class="svelte-1t6afbf">Undo</dialog></li> <li class="svelte-1t6afbf"><button id="shortcuts" type="button" class="svelte-1t6afbf">âŒ¨</button> <dialog open class="svelte-1t6afbf">Shortcuts</dialog></li> <li class="svelte-1t6afbf"><button id="show" type="button" class="svelte-1t6afbf">âŸ±</button> <dialog open class="svelte-1t6afbf">Show All</dialog></li> <li class="svelte-1t6afbf"><button id="hide" type="button" class="svelte-1t6afbf">âŸ°</button> <dialog open class="svelte-1t6afbf">Hide All</dialog></li> <li class="svelte-1t6afbf"><label class="button svelte-1t6afbf" id="single"><input type="checkbox" class="svelte-1t6afbf"> â… </label> <dialog open class="svelte-1t6afbf">Single<br class="svelte-1t6afbf">Visible</dialog></li></ul> <!> <!></main>',1);function gB(t,e){Or(e,!0);const{debug:r}=xe;let n=Pe(ke([])),i=M2(E0.ipfsAPI),s=Pe(!1),o=Pe(!1),a=Pe(!1),u=Pe(ke([])),f=Pe(0),c=Pe(0),d=Pe(0),p=Pe(null),w=Pe(null),y=Pe(null);const b=(j,re={})=>{D0({text:j,duration:16e3,close:!0,gravity:"bottom",position:"center",stopOnFocus:!0,style:{background:"linear-gradient(to right, #1E396A, #F32587)"},...re}).showToast()},g=j=>j.map((re,ue)=>({id:Su(d),...re}));async function D(j){var re;try{Array.isArray(j)||(j=[j]),me(c,ke(j.reduce((Dt,{size:Ws})=>Dt+Ws,0)));const ue={chunker:"rabin",cidVersion:1,progress:Dt=>{me(f,O(f)+Dt)},timeout:6e4};r&&console.debug({Adding:j,"Total Size":O(c),options:ue});let qe=[],Gt=0;for await(const{cid:Dt}of i.addAll(j,ue))qe.push({id:Su(d),cid:Dt.toString(),title:j[Gt].name.replace(/\.[^.]*$/,""),type:j[Gt].type}),Gt++;g(qe),r&&console.debug({Added:qe});const dn=O(n).map(({cid:Dt})=>Dt),rr=qe.filter(({cid:Dt})=>!dn.includes(Dt));r&&console.debug({infos:qe,"Unique Entries":rr}),me(n,ke(O(n).concat(rr)))}catch(ue){throw console.error({"IPFS Add Error":ue}),((re=ue.response)==null?void 0:re.status)===0?new Error("Couldnâ€™t connect to IPFS."):ue}}async function v(j){const re=await Promise.all(j.map(async ue=>Rc.parse(await ue.text())));me(n,ke(g(re.flat())))}async function E(j,re){var ue;try{j.preventDefault(),me(s,!0);const qe=(ue=j.currentTarget)==null?void 0:ue.files;if(!qe)return;await re.call(re,Array.from(qe))}catch(qe){b(qe.message)}finally{me(s,!1)}}function F(){try{me(o,!0)}finally{me(o,!1)}}xe.register(F);function T(){if(O(u).length===0)return;const j=async()=>{const re=O(u).pop();me(n,ke(re)),me(a,O(u).length>0),await fa()};"startViewTransition"in document?document.startViewTransition(j):j()}xe.register(T);function k(){var j;(j=O(y))==null||j.showModal()}xe.register(k);async function I(){xe.single=!1;const j=xe.retrieveAll("toggleOpen");for(const re of j)re({open:!0})}xe.register(I);async function _(){const j=xe.retrieveAll("toggleOpen");for(const re of j)re({open:!1})}xe.register(_);function $(){var j;(j=O(p))==null||j.click()}xe.register($);function X(){const j=O(n).map(({id:qe,...Gt})=>Gt),re=Rc.stringify(j,null,2),ue=document.createElement("a");ue.href=URL.createObjectURL(new Blob([re],{type:"application/json"})),ue.download=`mÃ¯mis config.${new Date().toISOString()}.json5`,r&&console.debug({Downloading:O(n),href:ue.href,name:ue.download}),ue.style.display="none",document.body.appendChild(ue),ue.click(),setTimeout(()=>{document.body.removeChild(ue),URL.revokeObjectURL(ue.href)},100)}xe.register(X);var J=LC();g0(j=>{var re=IC();io.title="MÃ¯mis: Merge List",Le(re,"content","Ordered list of files to be combined with others in the same namespace."),Me(j,re)}),vn("datum-delete",io,j=>{const{id:re}=j.detail;O(u).push([...O(n)]),me(n,ke(O(n).filter(ue=>ue.id!==re)))}),vn("keypress",io,j=>{var re,ue;j.key==="a"?(re=O(p))==null||re.click():j.key==="?"?k():j.key==="s"?F():j.key==="u"?T():j.key==="v"?I():j.key==="h"?_():j.key==="d"?X():j.key==="l"?(ue=O(w))==null||ue.click():j.key==="z"?xe.retrieve("zoom",{useActive:!0})():j.key==="delete"&&xe.retrieve("remove",{useActive:!0})()});var W=Te(ni(J),2),he=Ee(W),R=Ee(he),z=Ee(R);z.__click=[NC,p];var C=Ee(z);{var S=j=>{var re=_C(),ue=Te(Ee(re),2),qe=Ee(ue);be(ue),be(re),Ct(()=>{Le(ue,"max",O(c)),w0(ue,O(f)),Es(qe,`${O(f)/O(c)*100}%`)}),Me(j,re)},P=j=>{var re=h0("Add Files");Me(j,re)};wn(C,j=>{O(s)?j(S):j(P,!1)})}be(z);var V=Te(z,2);V.__change=[OC,E,D],mt(V,j=>me(p,j),()=>O(p)),be(R),be(he);var K=Te(he,2),Y=Ee(K),te=Ee(Y);te.__click=F,Rt(2),be(Y);var ie=Te(Y,2),Q=Ee(ie),ge=Ee(Q),we=Ee(ge);we.__click=[PC,w];var ce=Te(we,2);ce.__change=[UC,E,v],mt(ce,j=>me(w,j),()=>O(w)),be(ge),be(Q),Rt(2),be(ie);var ve=Te(ie,2),se=Ee(ve);se.__click=X,Rt(2),be(ve);var pe=Te(ve,2),_e=Ee(pe);_e.__click=T,Rt(2),be(pe);var Be=Te(pe,2),He=Ee(Be);He.__click=k,Rt(2),be(Be);var je=Te(Be,2),ze=Ee(je);ze.__click=I,Rt(2),be(je);var nt=Te(je,2),Ft=Ee(nt);Ft.__click=_,Rt(2),be(nt);var $r=Te(nt,2),Lr=Ee($r),Ot=Ee(Lr);m0(Ot),Yt(Ot,"display","none"),Rt(),be(Lr),Rt(2),be($r),be(K);var Ge=Te(K,2);{var Rr=j=>{var re=$C();Me(j,re)},ln=j=>{FC(j,{id:"entries",row:gx,preview:mx,get data(){return O(n)},set data(re){me(n,ke(re))},get history(){return O(u)},set history(re){me(u,ke(re))}})};wn(Ge,j=>{O(n).length===0?j(Rr):j(ln,!1)})}var fn=Te(Ge,2);TC(fn,{get handle(){return O(y)},set handle(j){me(y,ke(j))}}),be(W),Ct((j,re)=>{z.disabled=O(s),te.disabled=!O(a)||O(o),(void 0)(te,"saving",O(o)),we.disabled=O(s),_e.disabled=O(u).length===0||O(o),ze.disabled=j,Ft.disabled=re},[()=>O(n).length===0||xe.any("isOpen"),()=>O(n).length===0||!xe.any("isOpen")]),b0(Ot,()=>xe.single,j=>xe.single=j),Me(t,J),Pr()}Ei(["click","change"]);export{gB as component};

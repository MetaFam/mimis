import"../chunks/disclose-version.Bg9kRutz.js";import{az as Bt,o as Jt,aA as Rt,x as It,aB as Kt,p as Qt,aC as Gt,w as s,m as Vt,s as j,f as I,t as B,a as Xt,aD as Yt,a7 as Zt,c as U,a4 as dt,y as w,r as k}from"../chunks/runtime.BXk13jFn.js";import{d as $t,e as te,s as K}from"../chunks/render.BR4r8p3e.js";import{p as ee,a as ut,i as J}from"../chunks/props.DKft77Wj.js";import{e as Y,i as pt,t as D,s as ae}from"../chunks/class.ClIoSUzw.js";import{a as g,t as z,c as yt,d as Z}from"../chunks/template.rShIjToA.js";import{h as re}from"../chunks/svelte-head.DB7hvReC.js";import{r as se,s as ht,a as gt}from"../chunks/attributes.CPRq1iUu.js";import{s as oe,a as ne}from"../chunks/store.Cj1e4UbX.js";import{p as ie,i as ce,a as le,r as de}from"../chunks/entry.BB6IjTCC.js";function bt(a,r,u){Bt(()=>{var i=Jt(()=>r(a,u==null?void 0:u())||{});if(u&&(i!=null&&i.update)){var n=!1,f={};Rt(()=>{var v=u();It(v),n&&Kt(f,v)&&(f=v,i.update(v))}),n=!0}if(i!=null&&i.destroy)return()=>i.destroy()})}function ue(a){const r=JSON.parse(a);return r.data&&(r.data=ie(r.data)),r}function nt(a){return HTMLElement.prototype.cloneNode.call(a)}function me(a,r=()=>{}){const u=async({action:n,result:f,reset:v=!0,invalidateAll:p=!0})=>{f.type==="success"&&(v&&HTMLFormElement.prototype.reset.call(a),p&&await ce()),(location.origin+location.pathname===n.origin+n.pathname||f.type==="redirect"||f.type==="error")&&le(f)};async function i(n){var A,N,L,O,e;if(((A=n.submitter)!=null&&A.hasAttribute("formmethod")?n.submitter.formMethod:nt(a).method)!=="post")return;n.preventDefault();const v=new URL((N=n.submitter)!=null&&N.hasAttribute("formaction")?n.submitter.formAction:nt(a).action),p=(L=n.submitter)!=null&&L.hasAttribute("formenctype")?n.submitter.formEnctype:nt(a).enctype,y=new FormData(a),M=(O=n.submitter)==null?void 0:O.getAttribute("name");M&&y.append(M,((e=n.submitter)==null?void 0:e.getAttribute("value"))??"");const F=new AbortController;let H=!1;const E=await r({action:v,cancel:()=>H=!0,controller:F,formData:y,formElement:a,submitter:n.submitter})??u;if(H)return;let x;try{const t=new Headers({accept:"application/json","x-sveltekit-action":"true"});p!=="multipart/form-data"&&t.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(p)?p:"application/x-www-form-urlencoded");const c=p==="multipart/form-data"?y:new URLSearchParams(y),l=await fetch(v,{method:"POST",headers:t,cache:"no-store",body:c,signal:F.signal});x=ue(await l.text()),x.type==="error"&&(x.status=l.status)}catch(t){if((t==null?void 0:t.name)==="AbortError")return;x={type:"error",error:t}}E({action:v,formData:y,formElement:a,update:t=>u({action:v,result:x,reset:t==null?void 0:t.reset,invalidateAll:t==null?void 0:t.invalidateAll}),result:x})}return HTMLFormElement.prototype.addEventListener.call(a,"submit",i),{destroy(){HTMLFormElement.prototype.removeEventListener.call(a,"submit",i)}}}var _t="mz3PUW_p",xt=["#FFC700","#FF0000","#2E3191","#41BBC7"],wt=3500,kt=.5,At=150,jt="mix",Pt=12,zt="",Mt=!0,Et=800,Lt=1600;function ve(a,r={}){let{colors:u=xt,duration:i=wt,force:n=kt,particleCount:f=At,particleShape:v=jt,particleSize:p=Pt,particleClass:y=zt,destroyAfterDone:M=Mt,stageHeight:F=Et,stageWidth:H=Lt}=r;(function(e){if(document.querySelector("style[data-neoconfetti]"))return;const t=it("style");t.dataset.neoconfetti="",t.textContent=e,ct(document.head,t)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),a.classList.add("mz3PUW_c"),a.style.setProperty("--sh",F+"px");let C=[],E=[];const x=()=>Q(P()*(ge-1)),A=(e,t)=>v!=="rectangles"&&(e==="circles"||be(t));function N(e,t){const c=x(),l=A(v,c),o=(b,S)=>e.style.setProperty(b,S+"");o("--xlp",lt($(Ht(t,90)-180),0,180,-H/2,H/2)+"px"),o("--dc",i-Q(1e3*P())+"ms");const d=P()<pe?R(P()*ye,2):0;o("--x1",d),o("--x2",-1*d),o("--x3",d),o("--x4",R($(lt($(Ht(t,90)-180),0,180,-1,1)),4)),o("--y1",R(P()*Wt,4)),o("--y2",R(P()*n*(Dt()?1:-1),4)),o("--y3",Wt),o("--y4",R(he(lt($(t-180),0,180,n,-n),0),4)),o("--w",(l?p:Q(4*P())+p/2)+"px"),o("--h",(l?p:Q(2*P())+p)+"px");const m=c.toString(2).padStart(3,"0").split("");o("--hr",m.map(b=>+b/2+"").join(" ")),o("--r",m.join(" ")),o("--rd",R(P()*(fe-St)+St)+"ms"),o("--br",l?"50%":0)}let L;function O(){a.innerHTML="",clearTimeout(L),C=Ut(f,u),E=function(e,t=[],c){const l=[];for(const{color:o}of t){const d=it("div");d.className=`${_t} ${c}`,d.style.setProperty("--bgc",o);const m=it("div");ct(d,m),ct(e,d),l.push(d)}return l}(a,C,y);for(const[e,t]of Ct(E))N(t,C[+e].degree);L=setTimeout(()=>{M&&(a.innerHTML="")},i)}return O(),{update(e){const t=e.particleCount??At,c=e.particleShape??jt,l=e.particleSize??Pt,o=e.particleClass??zt,d=e.colors??xt,m=e.stageHeight??Et,b=e.duration??wt,S=e.force??kt,h=e.stageWidth??Lt,_=e.destroyAfterDone??Mt;C=Ut(t,d);let T=!1;if(t===f){E=Array.from(a.querySelectorAll(`.${_t}`));for(const[G,{color:tt}]of Ct(C)){const q=E[+G];JSON.stringify(u)!==JSON.stringify(d)&&q.style.setProperty("--bgc",tt),c!==v&&q.style.setProperty("--br",A(c,x())?"50%":"0"),o!==y&&(y&&q.classList.remove(y),o&&q.classList.add(o))}}else T=!0;M&&!_&&clearTimeout(L),a.style.setProperty("--sh",m+"px"),i=b,u=d,n=S,f=t,v=c,p=l,y=o,M=_,F=m,H=h,T&&O()},destroy(){a.innerHTML="",clearTimeout(L)}}}var St=200,fe=800,pe=.1,ye=.3,Wt=.5,$=Math.abs,P=Math.random,Q=Math.round,he=Math.max,it=a=>document.createElement(a),ct=(a,r)=>a.appendChild(r),Ut=(a,r)=>Array.from({length:a},(u,i)=>({color:r[i%r.length],degree:360*i/a})),R=(a,r=2)=>Q((a+Number.EPSILON)*10**r)/10**r,lt=(a,r,u,i,n)=>(a-r)*(n-i)/(u-r)+i,Ht=(a,r)=>a+r>360?a+r-360:a+r,Dt=()=>P()>.5,Ct=Object.entries,ge=6,be=a=>a!==1&&Dt();const Ft="(prefers-reduced-motion: reduce)",_e=()=>window.matchMedia(Ft).matches,xe=de(_e(),a=>{{const r=i=>{a(i.matches)},u=window.matchMedia(Ft);return u.addEventListener("change",r),()=>{u.removeEventListener("change",r)}}});function Tt(a,r,u){var n;a.preventDefault();const i=a.target.getAttribute("data-key");i==="backspace"?(dt(r,ut(s(r).slice(0,-1))),(n=u())!=null&&n.badGuess&&u(u().badGuess=!1,!0)):s(r).length<5&&dt(r,s(r)+i)}var we=z('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l">'),ke=z('<div class="letter svelte-1pg2j5l"> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"></div>'),Ae=z('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div class="row svelte-1pg2j5l"></div>',1),je=z('<p class="svelte-1pg2j5l"> </p>'),Pe=z('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),ze=z('<button formaction="?/update" name="key"> </button>'),Me=z('<div class="row svelte-1pg2j5l"></div>'),Ee=z('<div class="keyboard svelte-1pg2j5l"><button data-key="enter" class="svelte-1pg2j5l">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),Le=z('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),Se=z('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div class="grid svelte-1pg2j5l"></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function Be(a,r){Qt(r,!0);const u=oe(),i=()=>ne(xe,"$reducedMotion",u);let n=ee(r,"form",15),f=w(()=>r.data.answers.at(-1)==="xxxxx"),v=w(()=>s(f)?-1:r.data.answers.length),p=Gt(ut(r.data.guesses[s(v)]||""));Vt(()=>{dt(p,ut(r.data.guesses[s(v)]||""))});let y=w(()=>s(p).length===5);const M=w(()=>{let e={},t={};return r.data.answers.forEach((c,l)=>{const o=r.data.guesses[l];for(let d=0;d<5;d+=1){const m=o[d];c[d]==="x"?(e[m]="exact",t[m]="correct"):e[m]||(e[m]=c[d]==="c"?"close":"missing",t[m]=c[d]==="c"?"present":"absent")}}),{classnames:e,description:t}}),F=w(()=>s(M).classnames),H=w(()=>s(M).description);function C(e){var t;e.metaKey||e.key==="Enter"&&!s(y)||(t=document.querySelector(`[data-key="${e.key}" i]`))==null||t.dispatchEvent(new MouseEvent("click",{cancelable:!0}))}var E=Se();te("keydown",Yt,C),re(e=>{var t=we();Zt.title="Sverdle",g(e,t)});var x=j(I(E),2),A=j(U(x),2);Y(A,20,()=>Array.from(Array(6).keys()),e=>e,(e,t)=>{var c=Ae();const l=w(()=>t===s(v));var o=I(c),d=U(o);k(o);var m=j(o,2);Y(m,20,()=>Array.from(Array(5).keys()),b=>b,(b,S)=>{var h=ke();const _=w(()=>s(l)?s(p):r.data.guesses[t]),T=w(()=>{var W;return(W=r.data.answers[t])==null?void 0:W[S]}),G=w(()=>{var W;return((W=s(_))==null?void 0:W[S])??""}),tt=w(()=>s(l)&&S===s(_).length),q=w(()=>s(T)==="x"),mt=w(()=>s(T)==="c"),vt=w(()=>s(T)==="_");var ft=U(h),et=j(ft),Nt=U(et);J(Nt,()=>s(q),W=>{var V=Z("(correct)");g(W,V)},W=>{var V=yt(),Ot=I(V);J(Ot,()=>s(mt),rt=>{var X=Z("(present)");g(rt,X)},rt=>{var X=yt(),qt=I(X);J(qt,()=>s(vt),st=>{var ot=Z("(absent)");g(st,ot)},st=>{var ot=Z("empty");g(st,ot)},!0),g(rt,X)},!0),g(W,V)}),k(et);var at=j(et,2);se(at),k(h),B(()=>{D(h,"exact",s(q)),D(h,"close",s(mt)),D(h,"missing",s(vt)),D(h,"selected",s(tt)),K(ft,`${s(G)??""} `),at.disabled=!s(l),ht(at,s(G))}),g(b,h)}),k(m),B(()=>{K(d,`Row ${t+1}`),D(m,"current",s(l))}),g(e,c)}),k(A);var N=j(A,2),L=U(N);J(L,()=>s(f)||r.data.answers.length>=6,e=>{var t=Pe(),c=I(t);J(c,()=>!s(f)&&r.data.answer,d=>{var m=je(),b=U(m);k(m),B(()=>K(b,`the answer was "${r.data.answer??""}"`)),g(d,m)});var l=j(c,2),o=U(l);k(l),B(()=>K(o,`${(s(f)?"you won :)":"game over :(")??""} play again?`)),g(e,t)},e=>{var t=Ee(),c=U(t),l=j(c,2);l.__click=[Tt,p,n];var o=j(l,2);Y(o,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],pt,(d,m)=>{var b=Me();Y(b,21,()=>m,pt,(S,h)=>{var _=ze();_.__click=[Tt,p,n];var T=U(_,!0);k(_),B(()=>{gt(_,"data-key",s(h)),ae(_,`${s(F)[s(h)]??""} svelte-1pg2j5l`),_.disabled=s(y),ht(_,s(h)),gt(_,"aria-label",`${s(h)??""} ${(s(H)[s(h)]||"")??""}`),K(T,s(h))}),g(S,_)}),k(b),g(d,b)}),k(t),B(()=>{c.disabled=!s(y),D(c,"selected",s(y))}),g(e,t)}),k(N),k(x),bt(x,(e,t)=>me(e,t),()=>()=>({update:e})=>{e({reset:!1})});var O=j(x,2);J(O,()=>s(f),e=>{var t=Le();bt(t,(c,l)=>ve(c,l),()=>({particleCount:i()?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),g(e,t)}),B(()=>{var e;D(A,"playing",!s(f)),D(A,"bad-guess",(e=n())==null?void 0:e.badGuess)}),g(a,E),Xt()}$t(["click"]);export{Be as component};

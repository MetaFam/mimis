var zh=Object.defineProperty;var ka=t=>{throw TypeError(t)};var Gh=(t,e,r)=>e in t?zh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var g=(t,e,r)=>Gh(t,typeof e!="symbol"?e+"":e,r),Ia=(t,e,r)=>e.has(t)||ka("Cannot "+r);var $t=(t,e,r)=>(Ia(t,e,"read from private field"),r?r.call(t):e.get(t)),yn=(t,e,r)=>e.has(t)?ka("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),mn=(t,e,r,n)=>(Ia(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);import{t as kr,a as Dt,d as qh,c as Wh}from"../chunks/C8TbCyJI.js";import{p as Jh,ae as ur,d as Zh,c as Ye,s as Dr,t as Pr,a as Kh,a5 as kt,i as le,ac as Xh,r as ze,f as Yh,aA as Qh}from"../chunks/-1OJfg0W.js";import{s as gi}from"../chunks/C98pv6io.js";import{i as wi}from"../chunks/DCdVZ8bZ.js";import{e as ed}from"../chunks/BgzcZ9EW.js";import{h as td}from"../chunks/BDWLlJom.js";import{s as vt,a as rd}from"../chunks/Dif0L2tj.js";import{d as nd}from"../chunks/sIr-e1iE.js";import{p as hs}from"../chunks/7ymiA-OT.js";import{b as sd}from"../chunks/Bq3yQm3i.js";import{T as id}from"../chunks/COzGs9ai.js";import{g as vo,c as od}from"../chunks/Cpj98o6Y.js";import{t as yi}from"../chunks/CGwgS8Je.js";import{s as ad}from"../chunks/CU2DF7iH.js";function cd(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function an(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function ld(t){return new TextEncoder().encode(t)}function ud(t){return new TextDecoder().decode(t)}function fd(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function f(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var y=0,p=0,v=0,S=w.length;v!==S&&w[v]===0;)v++,y++;for(var b=(S-v)*l+1>>>0,B=new Uint8Array(b);v!==S;){for(var O=w[v],T=0,_=b-1;(O!==0||T<p)&&_!==-1;_--,T++)O+=256*B[_]>>>0,B[_]=O%a>>>0,O=O/a>>>0;if(O!==0)throw new Error("Non-zero carry");p=T,v++}for(var $=b-p;$!==b&&B[$]===0;)$++;for(var I=c.repeat(y);$<b;++$)I+=t.charAt(B[$]);return I}function h(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var y=0;if(w[y]!==" "){for(var p=0,v=0;w[y]===c;)p++,y++;for(var S=(w.length-y)*u+1>>>0,b=new Uint8Array(S);w[y];){var B=r[w.charCodeAt(y)];if(B===255)return;for(var O=0,T=S-1;(B!==0||O<v)&&T!==-1;T--,O++)B+=a*b[T]>>>0,b[T]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");v=O,y++}if(w[y]!==" "){for(var _=S-v;_!==S&&b[_]===0;)_++;for(var $=new Uint8Array(p+(S-_)),I=p;_!==S;)$[I++]=b[_++];return $}}}function m(w){var y=h(w);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:h,decode:m}}var hd=fd,dd=hd;let pd=class{constructor(e,r,n){g(this,"name");g(this,"prefix");g(this,"baseEncode");this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},gd=class{constructor(e,r,n){g(this,"name");g(this,"prefix");g(this,"baseDecode");g(this,"prefixCodePoint");this.name=e,this.prefix=r;const s=r.codePointAt(0);if(s===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=s,this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Qc(this,e)}},wd=class{constructor(e){g(this,"decoders");this.decoders=e}or(e){return Qc(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function Qc(t,e){return new wd({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}let yd=class{constructor(e,r,n,s){g(this,"name");g(this,"prefix");g(this,"baseEncode");g(this,"baseDecode");g(this,"encoder");g(this,"decoder");this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new pd(e,r,n),this.decoder=new gd(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function qs({name:t,prefix:e,encode:r,decode:n}){return new yd(t,e,r,n)}function qn({name:t,prefix:e,alphabet:r}){const{encode:n,decode:s}=dd(r,t);return qs({prefix:e,name:t,encode:n,decode:i=>an(s(i))})}function md(t,e,r,n){const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const f=s[t[l]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o}function bd(t,e,r){const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o!==0&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i}function Te({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return qs({prefix:e,name:t,encode(s){return bd(s,n,r)},decode(s){return md(s,n,r,t)}})}const _e=qn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),xd=qn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),vd=Object.freeze(Object.defineProperty({__proto__:null,base58btc:_e,base58flickr:xd},Symbol.toStringTag,{value:"Module"})),or=Te({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ed=Te({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Sd=Te({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Bd=Te({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ad=Te({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),kd=Te({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Id=Te({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Cd=Te({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),_d=Te({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Nd=Object.freeze(Object.defineProperty({__proto__:null,base32:or,base32hex:Ad,base32hexpad:Id,base32hexpadupper:Cd,base32hexupper:kd,base32pad:Sd,base32padupper:Bd,base32upper:Ed,base32z:_d},Symbol.toStringTag,{value:"Module"})),ds=qn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Td=qn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Ud=Object.freeze(Object.defineProperty({__proto__:null,base36:ds,base36upper:Td},Symbol.toStringTag,{value:"Module"}));var $d=el,Ca=128,Dd=-128,Pd=Math.pow(2,31);function el(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Pd;)e[r++]=t&255|Ca,t/=128;for(;t&Dd;)e[r++]=t&255|Ca,t>>>=7;return e[r]=t|0,el.bytes=r-n+1,e}var Od=ji,Rd=128,_a=127;function ji(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw ji.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&_a)<<s:(o&_a)*Math.pow(2,s),s+=7}while(o>=Rd);return ji.bytes=i-n,r}var Ld=Math.pow(2,7),Fd=Math.pow(2,14),Vd=Math.pow(2,21),Md=Math.pow(2,28),Hd=Math.pow(2,35),jd=Math.pow(2,42),zd=Math.pow(2,49),Gd=Math.pow(2,56),qd=Math.pow(2,63),Wd=function(t){return t<Ld?1:t<Fd?2:t<Vd?3:t<Md?4:t<Hd?5:t<jd?6:t<zd?7:t<Gd?8:t<qd?9:10},Jd={encode:$d,decode:Od,encodingLength:Wd},vs=Jd;function zi(t,e=0){return[vs.decode(t,e),vs.decode.bytes]}function Es(t,e,r=0){return vs.encode(t,e,r),e}function Ss(t){return vs.encodingLength(t)}function On(t,e){const r=e.byteLength,n=Ss(t),s=n+Ss(r),i=new Uint8Array(s+r);return Es(t,i,0),Es(r,i,n),i.set(e,s),new So(t,r,e,i)}function Eo(t){const e=an(t),[r,n]=zi(e),[s,i]=zi(e.subarray(n)),o=e.subarray(n+i);if(o.byteLength!==s)throw new Error("Incorrect length");return new So(r,s,o,e)}function Zd(t,e){if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&cd(t.bytes,r.bytes)}}let So=class{constructor(e,r,n,s){g(this,"code");g(this,"size");g(this,"digest");g(this,"bytes");this.code=e,this.size=r,this.digest=n,this.bytes=s}};function Na(t,e){const{bytes:r,version:n}=t;switch(n){case 0:return Xd(r,Gi(t),e??_e.encoder);default:return Yd(r,Gi(t),e??or.encoder)}}const Ta=new WeakMap;function Gi(t){const e=Ta.get(t);if(e==null){const r=new Map;return Ta.set(t,r),r}return e}var Wc;let J=class Pe{constructor(e,r,n,s){g(this,"code");g(this,"version");g(this,"multihash");g(this,"bytes");g(this,"/");g(this,Wc,"CID");this.code=r,this.version=e,this.multihash=n,this.bytes=s,this["/"]=s}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==bn)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Qd)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Pe.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=On(e,r);return Pe.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Pe.equals(this,e)}static equals(e,r){const n=r;return n!=null&&e.code===n.code&&e.version===n.version&&Zd(e.multihash,n.multihash)}toString(e){return Na(this,e)}toJSON(){return{"/":Na(this)}}link(){return this}[(Wc=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const r=e;if(r instanceof Pe)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:s,multihash:i,bytes:o}=r;return new Pe(n,s,i,o??Ua(n,s,i.bytes))}else if(r[ep]===!0){const{version:n,multihash:s,code:i}=r,o=Eo(s);return Pe.create(n,i,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==bn)throw new Error(`Version 0 CID must use dag-pb (code: ${bn}) block encoding`);return new Pe(e,r,n,n.bytes)}case 1:{const s=Ua(e,r,n.bytes);return new Pe(e,r,n,s)}default:throw new Error("Invalid version")}}static createV0(e){return Pe.create(0,bn,e)}static createV1(e,r){return Pe.create(1,e,r)}static decode(e){const[r,n]=Pe.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=Pe.inspectBytes(e),n=r.size-r.multihashSize,s=an(e.subarray(n,n+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");const i=s.subarray(r.multihashSize-r.digestSize),o=new So(r.multihashCode,r.digestSize,i,s);return[r.version===0?Pe.createV0(o):Pe.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[f,h]=zi(e.subarray(r));return r+=h,f};let s=n(),i=bn;if(s===18?(s=0,r=0):i=n(),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);const o=r,a=n(),c=n(),u=r+c,l=u-o;return{version:s,codec:i,multihashCode:a,digestSize:c,multihashSize:l,size:u}}static parse(e,r){const[n,s]=Kd(e,r),i=Pe.decode(s);if(i.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Gi(i).set(n,e),i}};function Kd(t,e){switch(t[0]){case"Q":{const r=e??_e;return[_e.prefix,r.decode(`${_e.prefix}${t}`)]}case _e.prefix:{const r=e??_e;return[_e.prefix,r.decode(t)]}case or.prefix:{const r=e??or;return[or.prefix,r.decode(t)]}case ds.prefix:{const r=e??ds;return[ds.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function Xd(t,e,r){const{prefix:n}=r;if(n!==_e.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const s=e.get(n);if(s==null){const i=r.encode(t).slice(1);return e.set(n,i),i}else return s}function Yd(t,e,r){const{prefix:n}=r,s=e.get(n);if(s==null){const i=r.encode(t);return e.set(n,i),i}else return s}const bn=112,Qd=18;function Ua(t,e,r){const n=Ss(t),s=n+Ss(e),i=new Uint8Array(s+r.byteLength);return Es(t,i,0),Es(e,i,n),i.set(r,s),i}const ep=Symbol.for("@ipld/js-cid/CID");function Wr(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}const tp=qn({prefix:"9",name:"base10",alphabet:"0123456789"}),rp=Object.freeze(Object.defineProperty({__proto__:null,base10:tp},Symbol.toStringTag,{value:"Module"})),np=Te({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),sp=Te({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),ip=Object.freeze(Object.defineProperty({__proto__:null,base16:np,base16upper:sp},Symbol.toStringTag,{value:"Module"})),op=Te({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),ap=Object.freeze(Object.defineProperty({__proto__:null,base2:op},Symbol.toStringTag,{value:"Module"})),tl=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),cp=tl.reduce((t,e,r)=>(t[r]=e,t),[]),lp=tl.reduce((t,e,r)=>{const n=e.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${e}`);return t[n]=r,t},[]);function up(t){return t.reduce((e,r)=>(e+=cp[r],e),"")}function fp(t){const e=[];for(const r of t){const n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);const s=lp[n];if(s==null)throw new Error(`Non-base256emoji character: ${r}`);e.push(s)}return new Uint8Array(e)}const hp=qs({prefix:"ðŸš€",name:"base256emoji",encode:up,decode:fp}),dp=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:hp},Symbol.toStringTag,{value:"Module"})),Ws=Te({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),pp=Te({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Js=Te({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),gp=Te({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),wp=Object.freeze(Object.defineProperty({__proto__:null,base64:Ws,base64pad:pp,base64url:Js,base64urlpad:gp},Symbol.toStringTag,{value:"Module"})),yp=Te({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),mp=Object.freeze(Object.defineProperty({__proto__:null,base8:yp},Symbol.toStringTag,{value:"Module"})),bp=qs({prefix:"\0",name:"identity",encode:t=>ud(t),decode:t=>ld(t)}),xp=Object.freeze(Object.defineProperty({__proto__:null,identity:bp},Symbol.toStringTag,{value:"Module"})),vp=new TextEncoder,Ep=new TextDecoder,Sp="json",Bp=512;function Ap(t){return vp.encode(JSON.stringify(t))}function kp(t){return JSON.parse(Ep.decode(t))}const Ip=Object.freeze(Object.defineProperty({__proto__:null,code:Bp,decode:kp,encode:Ap,name:Sp},Symbol.toStringTag,{value:"Module"})),Cp="raw",_p=85;function Np(t){return an(t)}function Tp(t){return an(t)}const Up=Object.freeze(Object.defineProperty({__proto__:null,code:_p,decode:Tp,encode:Np,name:Cp},Symbol.toStringTag,{value:"Module"})),rl=0,$p="identity",nl=an;function Dp(t){return On(rl,nl(t))}const br={code:rl,name:$p,encode:nl,digest:Dp},Pp=Object.freeze(Object.defineProperty({__proto__:null,identity:br},Symbol.toStringTag,{value:"Module"}));function sl({name:t,code:e,encode:r}){return new Op(t,e,r)}class Op{constructor(e,r,n){g(this,"name");g(this,"code");g(this,"encode");this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?On(this.code,r):r.then(n=>On(this.code,n))}else throw Error("Unknown type, must be binary type")}}function il(t){return async e=>new Uint8Array(await crypto.subtle.digest(t,e))}const Bo=sl({name:"sha2-256",code:18,encode:il("SHA-256")}),Rp=sl({name:"sha2-512",code:19,encode:il("SHA-512")}),Lp=Object.freeze(Object.defineProperty({__proto__:null,sha256:Bo,sha512:Rp},Symbol.toStringTag,{value:"Module"})),Bs={...xp,...ap,...mp,...rp,...ip,...Nd,...Ud,...vd,...wp,...dp},Fp={...Lp,...Pp},Vp={raw:Up,json:Ip};function Jr(t=0){return new Uint8Array(t)}function ol(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const $a=ol("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),mi=ol("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Jr(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),al={utf8:$a,"utf-8":$a,hex:Bs.base16,latin1:mi,ascii:mi,binary:mi,...Bs};function Ie(t,e="utf8"){const r=al[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}const Mp=Math.pow(2,7),Hp=Math.pow(2,14),jp=Math.pow(2,21),Ao=Math.pow(2,28),ko=Math.pow(2,35),Io=Math.pow(2,42),Co=Math.pow(2,49),oe=128,Oe=127;function Nt(t){if(t<Mp)return 1;if(t<Hp)return 2;if(t<jp)return 3;if(t<Ao)return 4;if(t<ko)return 5;if(t<Io)return 6;if(t<Co)return 7;if(Number.MAX_SAFE_INTEGER!=null&&t>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function cl(t,e,r=0){switch(Nt(t)){case 8:e[r++]=t&255|oe,t/=128;case 7:e[r++]=t&255|oe,t/=128;case 6:e[r++]=t&255|oe,t/=128;case 5:e[r++]=t&255|oe,t/=128;case 4:e[r++]=t&255|oe,t>>>=7;case 3:e[r++]=t&255|oe,t>>>=7;case 2:e[r++]=t&255|oe,t>>>=7;case 1:{e[r++]=t&255,t>>>=7;break}default:throw new Error("unreachable")}return e}function zp(t,e,r=0){switch(Nt(t)){case 8:e.set(r++,t&255|oe),t/=128;case 7:e.set(r++,t&255|oe),t/=128;case 6:e.set(r++,t&255|oe),t/=128;case 5:e.set(r++,t&255|oe),t/=128;case 4:e.set(r++,t&255|oe),t>>>=7;case 3:e.set(r++,t&255|oe),t>>>=7;case 2:e.set(r++,t&255|oe),t>>>=7;case 1:{e.set(r++,t&255),t>>>=7;break}default:throw new Error("unreachable")}return e}function ll(t,e){let r=t[e],n=0;if(n+=r&Oe,r<oe||(r=t[e+1],n+=(r&Oe)<<7,r<oe)||(r=t[e+2],n+=(r&Oe)<<14,r<oe)||(r=t[e+3],n+=(r&Oe)<<21,r<oe)||(r=t[e+4],n+=(r&Oe)*Ao,r<oe)||(r=t[e+5],n+=(r&Oe)*ko,r<oe)||(r=t[e+6],n+=(r&Oe)*Io,r<oe)||(r=t[e+7],n+=(r&Oe)*Co,r<oe))return n;throw new RangeError("Could not decode varint")}function Gp(t,e){let r=t.get(e),n=0;if(n+=r&Oe,r<oe||(r=t.get(e+1),n+=(r&Oe)<<7,r<oe)||(r=t.get(e+2),n+=(r&Oe)<<14,r<oe)||(r=t.get(e+3),n+=(r&Oe)<<21,r<oe)||(r=t.get(e+4),n+=(r&Oe)*Ao,r<oe)||(r=t.get(e+5),n+=(r&Oe)*ko,r<oe)||(r=t.get(e+6),n+=(r&Oe)*Io,r<oe)||(r=t.get(e+7),n+=(r&Oe)*Co,r<oe))return n;throw new RangeError("Could not decode varint")}function Zs(t,e,r=0){return e==null&&(e=Jr(Nt(t))),e instanceof Uint8Array?cl(t,e,r):zp(t,e,r)}function Wn(t,e=0){return t instanceof Uint8Array?ll(t,e):Gp(t,e)}function xr(t,e){e==null&&(e=t.reduce((s,i)=>s+i.length,0));const r=Jr(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return r}class qp{constructor(){g(this,"index",0);g(this,"input","")}new(e){return this.index=0,this.input=e,this}readAtomically(e){const r=this.index,n=e();return n===void 0&&(this.index=r),n}parseWith(e){const r=e();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{const r=this.readChar();if(r===e)return r})}readSeparator(e,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(e)===void 0))return n()})}readNumber(e,r,n,s){return this.readAtomically(()=>{let i=0,o=0;const a=this.peekChar();if(a===void 0)return;const c=a==="0",u=2**(8*s)-1;for(;;){const l=this.readAtomically(()=>{const f=this.readChar();if(f===void 0)return;const h=Number.parseInt(f,e);if(!Number.isNaN(h))return h});if(l===void 0)break;if(i*=e,i+=l,i>u||(o+=1,r!==void 0&&o>r))return}if(o!==0)return!n&&c&&o>1?void 0:i})}readIPv4Addr(){return this.readAtomically(()=>{const e=new Uint8Array(4);for(let r=0;r<e.length;r++){const n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;e[r]=n}return e})}readIPv6Addr(){const e=r=>{for(let n=0;n<r.length/2;n++){const s=n*2;if(n<r.length-3){const o=this.readSeparator(":",n,()=>this.readIPv4Addr());if(o!==void 0)return r[s]=o[0],r[s+1]=o[1],r[s+2]=o[2],r[s+3]=o[3],[s+4,!0]}const i=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(i===void 0)return[s,!1];r[s]=i>>8,r[s+1]=i&255}return[r.length,!1]};return this.readAtomically(()=>{const r=new Uint8Array(16),[n,s]=e(r);if(n===16)return r;if(s||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const i=new Uint8Array(14),o=16-(n+2),[a]=e(i.subarray(0,o));return r.set(i.subarray(0,a),16-a),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const ul=45,Wp=15,Zr=new qp;function Jp(t){if(!(t.length>Wp))return Zr.new(t).parseWith(()=>Zr.readIPv4Addr())}function Zp(t){if(t.includes("%")&&(t=t.split("%")[0]),!(t.length>ul))return Zr.new(t).parseWith(()=>Zr.readIPv6Addr())}function Kp(t,e=!1){if(t.includes("%")&&(t=t.split("%")[0]),t.length>ul)return;const r=Zr.new(t).parseWith(()=>Zr.readIPAddr());if(r)return e&&r.length===4?Uint8Array.from([0,0,0,0,0,0,0,0,0,0,255,255,r[0],r[1],r[2],r[3]]):r}function mt(t,e="utf8"){const r=al[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}function Xp(t){return!!Jp(t)}function Yp(t){return!!Zp(t)}function fl(t){return!!Kp(t)}const Da=Xp,Qp=Yp,hl=function(t){let e=0;if(t=t.toString().trim(),Da(t)){const r=new Uint8Array(e+4);return t.split(/\./g).forEach(n=>{r[e++]=parseInt(n,10)&255}),r}if(Qp(t)){const r=t.split(":",8);let n;for(n=0;n<r.length;n++){const i=Da(r[n]);let o;i&&(o=hl(r[n]),r[n]=Ie(o.slice(0,2),"base16")),o!=null&&++n<8&&r.splice(n,0,Ie(o.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);const i=[n,1];for(n=9-r.length;n>0;n--)i.push("0");r.splice.apply(r,i)}const s=new Uint8Array(e+16);for(n=0;n<r.length;n++){const i=parseInt(r[n],16);s[e++]=i>>8&255,s[e++]=i&255}return s}throw new Error("invalid ip address")},eg=function(t,e=0,r){e=~~e,r=r??t.length-e;const n=new DataView(t.buffer);if(r===4){const s=[];for(let i=0;i<r;i++)s.push(t[e+i]);return s.join(".")}if(r===16){const s=[];for(let i=0;i<r;i+=2)s.push(n.getUint16(e+i).toString(16));return s.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},Qe=-1,Rn={},qi={},tg=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,Qe,"ip6zone"],[43,8,"ipcidr"],[53,Qe,"dns",!0],[54,Qe,"dns4",!0],[55,Qe,"dns6",!0],[56,Qe,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,Qe,"unix",!1,!0],[421,Qe,"ipfs"],[421,Qe,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,Qe,"garlic64"],[448,0,"tls"],[449,Qe,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,Qe,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[481,Qe,"http-path"],[777,Qe,"memory"]];tg.forEach(t=>{const e=rg(...t);qi[e.code]=e,Rn[e.name]=e});function rg(t,e,r,n,s){return{code:t,size:e,name:r,resolvable:!!n,path:!!s}}function ne(t){if(typeof t=="number"){if(qi[t]!=null)return qi[t];throw new Error(`no protocol with code: ${t}`)}else if(typeof t=="string"){if(Rn[t]!=null)return Rn[t];throw new Error(`no protocol with name: ${t}`)}throw new Error(`invalid protocol id type: ${typeof t}`)}ne("ip4");ne("ip6");ne("ipcidr");function dl(t,e){switch(ne(t).code){case 4:case 41:return sg(e);case 42:return vi(e);case 43:return Ie(e,"base10");case 6:case 273:case 33:case 132:return pl(e).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return vi(e);case 421:return cg(e);case 444:return Ra(e);case 445:return Ra(e);case 466:return ag(e);case 481:return globalThis.encodeURIComponent(vi(e));default:return Ie(e,"base16")}}function Pa(t,e){switch(ne(t).code){case 4:return Oa(e);case 41:return Oa(e);case 42:return xi(e);case 43:return mt(e,"base10");case 6:case 273:case 33:case 132:return _o(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return xi(e);case 421:return ig(e);case 444:return lg(e);case 445:return ug(e);case 466:return og(e);case 481:return xi(globalThis.decodeURIComponent(e));default:return mt(e,"base16")}}const bi=Object.values(Bs).map(t=>t.decoder),ng=function(){let t=bi[0].or(bi[1]);return bi.slice(2).forEach(e=>t=t.or(e)),t}();function Oa(t){if(!fl(t))throw new Error("invalid ip address");return hl(t)}function sg(t){const e=eg(t,0,t.length);if(e==null)throw new Error("ipBuff is required");if(!fl(e))throw new Error("invalid ip address");return e}function _o(t){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function pl(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function xi(t){const e=mt(t),r=Uint8Array.from(Zs(e.length));return xr([r,e],r.length+e.length)}function vi(t){const e=Wn(t);if(t=t.slice(Nt(e)),t.length!==e)throw new Error("inconsistent lengths");return Ie(t)}function ig(t){let e;t[0]==="Q"||t[0]==="1"?e=Eo(_e.decode(`z${t}`)).bytes:e=J.parse(t).multihash.bytes;const r=Uint8Array.from(Zs(e.length));return xr([r,e],r.length+e.length)}function og(t){const e=ng.decode(t),r=Uint8Array.from(Zs(e.length));return xr([r,e],r.length+e.length)}function ag(t){const e=Wn(t),r=t.slice(Nt(e));if(r.length!==e)throw new Error("inconsistent lengths");return"u"+Ie(r,"base64url")}function cg(t){const e=Wn(t),r=t.slice(Nt(e));if(r.length!==e)throw new Error("inconsistent lengths");return Ie(r,"base58btc")}function lg(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const r=or.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const s=_o(n);return xr([r,s],r.length+s.length)}function ug(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const r=or.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const s=_o(n);return xr([r,s],r.length+s.length)}function Ra(t){const e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=Ie(e,"base32"),s=pl(r);return`${n}:${s}`}function fg(t){t=Wi(t);const e=[],r=[];let n=null;const s=t.split("/").slice(1);if(s.length===1&&s[0]==="")return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let i=0;i<s.length;i++){const o=s[i],a=ne(o);if(a.size===0){e.push([a.code]),r.push([a.code]);continue}if(i++,i>=s.length)throw yl("invalid address: "+t);if(a.path===!0){n=Wi(s.slice(i).join("/")),e.push([a.code,Pa(a.code,n)]),r.push([a.code,n]);break}const c=Pa(a.code,s[i]);e.push([a.code,c]),r.push([a.code,dl(a.code,c)])}return{string:gl(r),bytes:wl(e),tuples:e,stringTuples:r,path:n}}function La(t){const e=[],r=[];let n=null,s=0;for(;s<t.length;){const i=Wn(t,s),o=Nt(i),a=ne(i),c=hg(a,t.slice(s+o));if(c===0){e.push([i]),r.push([i]),s+=o;continue}const u=t.slice(s+o,s+o+c);if(s+=c+o,s>t.length)throw yl("Invalid address Uint8Array: "+Ie(t,"base16"));e.push([i,u]);const l=dl(i,u);if(r.push([i,l]),a.path===!0){n=l;break}}return{bytes:Uint8Array.from(t),string:gl(r),tuples:e,stringTuples:r,path:n}}function gl(t){const e=[];return t.map(r=>{const n=ne(r[0]);return e.push(n.name),r.length>1&&r[1]!=null&&e.push(r[1]),null}),Wi(e.join("/"))}function wl(t){return xr(t.map(e=>{const r=ne(e[0]);let n=Uint8Array.from(Zs(r.code));return e.length>1&&e[1]!=null&&(n=xr([n,e[1]])),n}))}function hg(t,e){if(t.size>0)return t.size/8;if(t.size===0)return 0;{const r=Wn(e instanceof Uint8Array?e:Uint8Array.from(e));return r+Nt(r)}}function Wi(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function yl(t){return new Error("Error parsing address: "+t)}const dg=Symbol.for("nodejs.util.inspect.custom"),ml=Symbol.for("@multiformats/js-multiaddr/multiaddr"),pg=[ne("dns").code,ne("dns4").code,ne("dns6").code,ne("dnsaddr").code];class gg extends Error{constructor(e="No available resolver"){super(e),this.name="NoAvailableResolverError"}}var Jc,qr,nr,zn,Gn;const Hr=class Hr{constructor(e){g(this,"bytes");yn(this,qr);yn(this,nr);yn(this,zn);yn(this,Gn);g(this,Jc,!0);e==null&&(e="");let r;if(e instanceof Uint8Array)r=La(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);r=fg(e)}else if(As(e))r=La(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=r.bytes,mn(this,qr,r.string),mn(this,nr,r.tuples),mn(this,zn,r.stringTuples),mn(this,Gn,r.path)}toString(){return $t(this,qr)}toJSON(){return this.toString()}toOptions(){let e,r,n,s,i="";const o=ne("tcp"),a=ne("udp"),c=ne("ip4"),u=ne("ip6"),l=ne("dns6"),f=ne("ip6zone");for(const[m,w]of this.stringTuples())m===f.code&&(i=`%${w??""}`),pg.includes(m)&&(r=o.name,s=443,n=`${w??""}${i}`,e=m===l.code?6:4),(m===o.code||m===a.code)&&(r=ne(m).name,s=parseInt(w??"")),(m===c.code||m===u.code)&&(r=ne(m).name,n=`${w??""}${i}`,e=m===u.code?6:4);if(e==null||r==null||n==null||s==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:n,transport:r,port:s}}protos(){return $t(this,nr).map(([e])=>Object.assign({},ne(e)))}protoCodes(){return $t(this,nr).map(([e])=>e)}protoNames(){return $t(this,nr).map(([e])=>ne(e).name)}tuples(){return $t(this,nr).map(([e,r])=>r==null?[e]:[e,r])}stringTuples(){return $t(this,zn).map(([e,r])=>r==null?[e]:[e,r])}encapsulate(e){return e=new Hr(e),new Hr(this.toString()+e.toString())}decapsulate(e){const r=e.toString(),n=this.toString(),s=n.lastIndexOf(r);if(s<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new Hr(n.slice(0,s))}decapsulateCode(e){const r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===e)return new Hr(wl(r.slice(0,n)));return this}getPeerId(){try{let e=[];this.stringTuples().forEach(([n,s])=>{n===Rn.p2p.code&&e.push([n,s]),n===Rn["p2p-circuit"].code&&(e=[])});const r=e.pop();if((r==null?void 0:r[1])!=null){const n=r[1];return n[0]==="Q"||n[0]==="1"?Ie(_e.decode(`z${n}`),"base58btc"):Ie(J.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){return $t(this,Gn)}equals(e){return Wr(this.bytes,e.bytes)}async resolve(e){const r=this.protos().find(i=>i.resolvable);if(r==null)return[this];const n=wg.get(r.name);if(n==null)throw new gg(`no available resolver for ${r.name}`);return(await n(this,e)).map(i=>Ke(i))}nodeAddress(){const e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const r=(e??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[(Jc=ml,dg)](){return`Multiaddr(${$t(this,qr)})`}};qr=new WeakMap,nr=new WeakMap,zn=new WeakMap,Gn=new WeakMap;let Ji=Hr;const wg=new Map;function As(t){return!!(t!=null&&t[ml])}function Ke(t){return new Ji(t)}const yg=["string","number","bigint","symbol"],mg=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function bg(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";const e=typeof t;if(yg.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(xg(t))return"Buffer";const r=vg(t);return r||"Object"}function xg(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function vg(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(mg.includes(e))return e}class d{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}d.uint=new d(0,"uint",!0);d.negint=new d(1,"negint",!0);d.bytes=new d(2,"bytes",!0);d.string=new d(3,"string",!0);d.array=new d(4,"array",!1);d.map=new d(5,"map",!1);d.tag=new d(6,"tag",!1);d.float=new d(7,"float",!0);d.false=new d(7,"false",!0);d.true=new d(7,"true",!0);d.null=new d(7,"null",!0);d.undefined=new d(7,"undefined",!0);d.break=new d(7,"break",!0);class N{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const cn=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Eg=new TextDecoder,Sg=new TextEncoder;function ks(t){return cn&&globalThis.Buffer.isBuffer(t)}function No(t){return t instanceof Uint8Array?ks(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const Bg=cn?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):Va(t,e,r):(t,e,r)=>r-e>64?Eg.decode(t.subarray(e,r)):Va(t,e,r),bl=cn?t=>t.length>64?globalThis.Buffer.from(t):Fa(t):t=>t.length>64?Sg.encode(t):Fa(t),Pt=t=>Uint8Array.from(t),To=cn?(t,e,r)=>ks(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),Ag=cn?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),No(globalThis.Buffer.concat(t,e))):(t,e)=>{const r=new Uint8Array(e);let n=0;for(let s of t)n+s.length>r.length&&(s=s.subarray(0,r.length-n)),r.set(s,n),n+=s.length;return r},kg=cn?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function Ig(t,e){if(ks(t)&&ks(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function Fa(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e}function Va(t,e,r){const n=[];for(;e<r;){const s=t[e];let i=null,o=s>239?4:s>223?3:s>191?2:1;if(e+o<=r){let a,c,u,l;switch(o){case 1:s<128&&(i=s);break;case 2:a=t[e+1],(a&192)===128&&(l=(s&31)<<6|a&63,l>127&&(i=l));break;case 3:a=t[e+1],c=t[e+2],(a&192)===128&&(c&192)===128&&(l=(s&15)<<12|(a&63)<<6|c&63,l>2047&&(l<55296||l>57343)&&(i=l));break;case 4:a=t[e+1],c=t[e+2],u=t[e+3],(a&192)===128&&(c&192)===128&&(u&192)===128&&(l=(s&15)<<18|(a&63)<<12|(c&63)<<6|u&63,l>65535&&l<1114112&&(i=l))}}i===null?(i=65533,o=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|i&1023),n.push(i),e+=o}return xl(n)}const Ma=4096;function xl(t){const e=t.length;if(e<=Ma)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Ma));return r}const Cg=256;class vl{constructor(e=Cg){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const s=r.length-(this.maxCursor-this.cursor)-1;r.set(e,s)}else{if(r){const s=r.length-(this.maxCursor-this.cursor)-1;s<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,s),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=kg(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){const n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=To(n,0,this.cursor)}else r=Ag(this.chunks,this.cursor);return e&&this.reset(),r}}const j="CBOR decode error:",wr="CBOR encode error:";function ln(t,e,r){if(t.length-e<r)throw new Error(`${j} not enough data for type`)}const Ne=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Ir(t,e,r){ln(t,e,1);const n=t[e];if(r.strict===!0&&n<Ne[0])throw new Error(`${j} integer encoded in more bytes than necessary (strict decode)`);return n}function Cr(t,e,r){ln(t,e,2);const n=t[e]<<8|t[e+1];if(r.strict===!0&&n<Ne[1])throw new Error(`${j} integer encoded in more bytes than necessary (strict decode)`);return n}function _r(t,e,r){ln(t,e,4);const n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<Ne[2])throw new Error(`${j} integer encoded in more bytes than necessary (strict decode)`);return n}function Nr(t,e,r){ln(t,e,8);const n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],s=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],i=(BigInt(n)<<BigInt(32))+BigInt(s);if(r.strict===!0&&i<Ne[3])throw new Error(`${j} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(r.allowBigInt===!0)return i;throw new Error(`${j} integers outside of the safe integer range are not supported`)}function _g(t,e,r,n){return new N(d.uint,Ir(t,e+1,n),2)}function Ng(t,e,r,n){return new N(d.uint,Cr(t,e+1,n),3)}function Tg(t,e,r,n){return new N(d.uint,_r(t,e+1,n),5)}function Ug(t,e,r,n){return new N(d.uint,Nr(t,e+1,n),9)}function Tr(t,e){return ft(t,0,e.value)}function ft(t,e,r){if(r<Ne[0]){const n=Number(r);t.push([e|n])}else if(r<Ne[1]){const n=Number(r);t.push([e|24,n])}else if(r<Ne[2]){const n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<Ne[3]){const n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{const n=BigInt(r);if(n<Ne[4]){const s=[e|27,0,0,0,0,0,0,0];let i=Number(n&BigInt(4294967295)),o=Number(n>>BigInt(32)&BigInt(4294967295));s[8]=i&255,i=i>>8,s[7]=i&255,i=i>>8,s[6]=i&255,i=i>>8,s[5]=i&255,s[4]=o&255,o=o>>8,s[3]=o&255,o=o>>8,s[2]=o&255,o=o>>8,s[1]=o&255,t.push(s)}else throw new Error(`${j} encountered BigInt larger than allowable range`)}}Tr.encodedSize=function(e){return ft.encodedSize(e.value)};ft.encodedSize=function(e){return e<Ne[0]?1:e<Ne[1]?2:e<Ne[2]?3:e<Ne[3]?5:9};Tr.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};function $g(t,e,r,n){return new N(d.negint,-1-Ir(t,e+1,n),2)}function Dg(t,e,r,n){return new N(d.negint,-1-Cr(t,e+1,n),3)}function Pg(t,e,r,n){return new N(d.negint,-1-_r(t,e+1,n),5)}const Uo=BigInt(-1),El=BigInt(1);function Og(t,e,r,n){const s=Nr(t,e+1,n);if(typeof s!="bigint"){const i=-1-s;if(i>=Number.MIN_SAFE_INTEGER)return new N(d.negint,i,9)}if(n.allowBigInt!==!0)throw new Error(`${j} integers outside of the safe integer range are not supported`);return new N(d.negint,Uo-BigInt(s),9)}function $o(t,e){const r=e.value,n=typeof r=="bigint"?r*Uo-El:r*-1-1;ft(t,e.type.majorEncoded,n)}$o.encodedSize=function(e){const r=e.value,n=typeof r=="bigint"?r*Uo-El:r*-1-1;return n<Ne[0]?1:n<Ne[1]?2:n<Ne[2]?3:n<Ne[3]?5:9};$o.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};function Jn(t,e,r,n){ln(t,e,r+n);const s=To(t,e+r,e+r+n);return new N(d.bytes,s,r+n)}function Rg(t,e,r,n){return Jn(t,e,1,r)}function Lg(t,e,r,n){return Jn(t,e,2,Ir(t,e+1,n))}function Fg(t,e,r,n){return Jn(t,e,3,Cr(t,e+1,n))}function Vg(t,e,r,n){return Jn(t,e,5,_r(t,e+1,n))}function Mg(t,e,r,n){const s=Nr(t,e+1,n);if(typeof s=="bigint")throw new Error(`${j} 64-bit integer bytes lengths not supported`);return Jn(t,e,9,s)}function Is(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===d.string?bl(t.value):t.value),t.encodedBytes}function Ks(t,e){const r=Is(e);ft(t,e.type.majorEncoded,r.length),t.push(r)}Ks.encodedSize=function(e){const r=Is(e);return ft.encodedSize(r.length)+r.length};Ks.compareTokens=function(e,r){return Hg(Is(e),Is(r))};function Hg(t,e){return t.length<e.length?-1:t.length>e.length?1:Ig(t,e)}function Zn(t,e,r,n,s){const i=r+n;ln(t,e,i);const o=new N(d.string,Bg(t,e+r,e+i),i);return s.retainStringBytes===!0&&(o.byteValue=To(t,e+r,e+i)),o}function jg(t,e,r,n){return Zn(t,e,1,r,n)}function zg(t,e,r,n){return Zn(t,e,2,Ir(t,e+1,n),n)}function Gg(t,e,r,n){return Zn(t,e,3,Cr(t,e+1,n),n)}function qg(t,e,r,n){return Zn(t,e,5,_r(t,e+1,n),n)}function Wg(t,e,r,n){const s=Nr(t,e+1,n);if(typeof s=="bigint")throw new Error(`${j} 64-bit integer string lengths not supported`);return Zn(t,e,9,s,n)}const Jg=Ks;function un(t,e,r,n){return new N(d.array,n,r)}function Zg(t,e,r,n){return un(t,e,1,r)}function Kg(t,e,r,n){return un(t,e,2,Ir(t,e+1,n))}function Xg(t,e,r,n){return un(t,e,3,Cr(t,e+1,n))}function Yg(t,e,r,n){return un(t,e,5,_r(t,e+1,n))}function Qg(t,e,r,n){const s=Nr(t,e+1,n);if(typeof s=="bigint")throw new Error(`${j} 64-bit integer array lengths not supported`);return un(t,e,9,s)}function e0(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${j} indefinite length items not allowed`);return un(t,e,1,1/0)}function Do(t,e){ft(t,d.array.majorEncoded,e.value)}Do.compareTokens=Tr.compareTokens;Do.encodedSize=function(e){return ft.encodedSize(e.value)};function fn(t,e,r,n){return new N(d.map,n,r)}function t0(t,e,r,n){return fn(t,e,1,r)}function r0(t,e,r,n){return fn(t,e,2,Ir(t,e+1,n))}function n0(t,e,r,n){return fn(t,e,3,Cr(t,e+1,n))}function s0(t,e,r,n){return fn(t,e,5,_r(t,e+1,n))}function i0(t,e,r,n){const s=Nr(t,e+1,n);if(typeof s=="bigint")throw new Error(`${j} 64-bit integer map lengths not supported`);return fn(t,e,9,s)}function o0(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${j} indefinite length items not allowed`);return fn(t,e,1,1/0)}function Po(t,e){ft(t,d.map.majorEncoded,e.value)}Po.compareTokens=Tr.compareTokens;Po.encodedSize=function(e){return ft.encodedSize(e.value)};function a0(t,e,r,n){return new N(d.tag,r,1)}function c0(t,e,r,n){return new N(d.tag,Ir(t,e+1,n),2)}function l0(t,e,r,n){return new N(d.tag,Cr(t,e+1,n),3)}function u0(t,e,r,n){return new N(d.tag,_r(t,e+1,n),5)}function f0(t,e,r,n){return new N(d.tag,Nr(t,e+1,n),9)}function Oo(t,e){ft(t,d.tag.majorEncoded,e.value)}Oo.compareTokens=Tr.compareTokens;Oo.encodedSize=function(e){return ft.encodedSize(e.value)};const h0=20,d0=21,p0=22,g0=23;function w0(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${j} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new N(d.null,null,1):new N(d.undefined,void 0,1)}function y0(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${j} indefinite length items not allowed`);return new N(d.break,void 0,1)}function Ro(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${j} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${j} Infinity values are not supported`)}return new N(d.float,t,e)}function m0(t,e,r,n){return Ro(Fo(t,e+1),3,n)}function b0(t,e,r,n){return Ro(Vo(t,e+1),5,n)}function x0(t,e,r,n){return Ro(kl(t,e+1),9,n)}function Lo(t,e,r){const n=e.value;if(n===!1)t.push([d.float.majorEncoded|h0]);else if(n===!0)t.push([d.float.majorEncoded|d0]);else if(n===null)t.push([d.float.majorEncoded|p0]);else if(n===void 0)t.push([d.float.majorEncoded|g0]);else{let s,i=!1;(!r||r.float64!==!0)&&(Bl(n),s=Fo(wt,1),n===s||Number.isNaN(n)?(wt[0]=249,t.push(wt.slice(0,3)),i=!0):(Al(n),s=Vo(wt,1),n===s&&(wt[0]=250,t.push(wt.slice(0,5)),i=!0))),i||(v0(n),s=kl(wt,1),wt[0]=251,t.push(wt.slice(0,9)))}}Lo.encodedSize=function(e,r){const n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){Bl(n);let s=Fo(wt,1);if(n===s||Number.isNaN(n))return 3;if(Al(n),s=Vo(wt,1),n===s)return 5}return 9};const Sl=new ArrayBuffer(9),at=new DataView(Sl,1),wt=new Uint8Array(Sl,0);function Bl(t){if(t===1/0)at.setUint16(0,31744,!1);else if(t===-1/0)at.setUint16(0,64512,!1);else if(Number.isNaN(t))at.setUint16(0,32256,!1);else{at.setFloat32(0,t);const e=at.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)at.setUint16(0,31744,!1);else if(r===0)at.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{const s=r-127;s<-24?at.setUint16(0,0):s<-14?at.setUint16(0,(e&2147483648)>>16|1<<24+s,!1):at.setUint16(0,(e&2147483648)>>16|s+15<<10|n>>13,!1)}}}function Fo(t,e){if(t.length-e<2)throw new Error(`${j} not enough data for float16`);const r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;const n=r>>10&31,s=r&1023;let i;return n===0?i=s*2**-24:n!==31?i=(s+1024)*2**(n-25):i=s===0?1/0:NaN,r&32768?-i:i}function Al(t){at.setFloat32(0,t,!1)}function Vo(t,e){if(t.length-e<4)throw new Error(`${j} not enough data for float32`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function v0(t){at.setFloat64(0,t,!1)}function kl(t,e){if(t.length-e<8)throw new Error(`${j} not enough data for float64`);const r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}Lo.compareTokens=Tr.compareTokens;function ie(t,e,r){throw new Error(`${j} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function Xs(t){return()=>{throw new Error(`${j} ${t}`)}}const P=[];for(let t=0;t<=23;t++)P[t]=ie;P[24]=_g;P[25]=Ng;P[26]=Tg;P[27]=Ug;P[28]=ie;P[29]=ie;P[30]=ie;P[31]=ie;for(let t=32;t<=55;t++)P[t]=ie;P[56]=$g;P[57]=Dg;P[58]=Pg;P[59]=Og;P[60]=ie;P[61]=ie;P[62]=ie;P[63]=ie;for(let t=64;t<=87;t++)P[t]=Rg;P[88]=Lg;P[89]=Fg;P[90]=Vg;P[91]=Mg;P[92]=ie;P[93]=ie;P[94]=ie;P[95]=Xs("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)P[t]=jg;P[120]=zg;P[121]=Gg;P[122]=qg;P[123]=Wg;P[124]=ie;P[125]=ie;P[126]=ie;P[127]=Xs("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)P[t]=Zg;P[152]=Kg;P[153]=Xg;P[154]=Yg;P[155]=Qg;P[156]=ie;P[157]=ie;P[158]=ie;P[159]=e0;for(let t=160;t<=183;t++)P[t]=t0;P[184]=r0;P[185]=n0;P[186]=s0;P[187]=i0;P[188]=ie;P[189]=ie;P[190]=ie;P[191]=o0;for(let t=192;t<=215;t++)P[t]=a0;P[216]=c0;P[217]=l0;P[218]=u0;P[219]=f0;P[220]=ie;P[221]=ie;P[222]=ie;P[223]=ie;for(let t=224;t<=243;t++)P[t]=Xs("simple values are not supported");P[244]=ie;P[245]=ie;P[246]=ie;P[247]=w0;P[248]=Xs("simple values are not supported");P[249]=m0;P[250]=b0;P[251]=x0;P[252]=ie;P[253]=ie;P[254]=ie;P[255]=y0;const Tt=[];for(let t=0;t<24;t++)Tt[t]=new N(d.uint,t,1);for(let t=-1;t>=-24;t--)Tt[31-t]=new N(d.negint,t,1);Tt[64]=new N(d.bytes,new Uint8Array(0),1);Tt[96]=new N(d.string,"",1);Tt[128]=new N(d.array,0,1);Tt[160]=new N(d.map,0,1);Tt[244]=new N(d.false,!1,1);Tt[245]=new N(d.true,!0,1);Tt[246]=new N(d.null,null,1);function E0(t){switch(t.type){case d.false:return Pt([244]);case d.true:return Pt([245]);case d.null:return Pt([246]);case d.bytes:return t.value.length?void 0:Pt([64]);case d.string:return t.value===""?Pt([96]):void 0;case d.array:return t.value===0?Pt([128]):void 0;case d.map:return t.value===0?Pt([160]):void 0;case d.uint:return t.value<24?Pt([Number(t.value)]):void 0;case d.negint:if(t.value>=-24)return Pt([31-Number(t.value)])}}const S0={float64:!1,mapSorter:k0,quickEncodeToken:E0};function B0(){const t=[];return t[d.uint.major]=Tr,t[d.negint.major]=$o,t[d.bytes.major]=Ks,t[d.string.major]=Jg,t[d.array.major]=Do,t[d.map.major]=Po,t[d.tag.major]=Oo,t[d.float.major]=Lo,t}const Il=B0(),Ei=new vl;class Cs{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${wr} object contains circular references`);return new Cs(r,e)}}const Zt={null:new N(d.null,null),undefined:new N(d.undefined,void 0),true:new N(d.true,!0),false:new N(d.false,!1),emptyArray:new N(d.array,0),emptyMap:new N(d.map,0)},cr={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new N(d.float,t):t>=0?new N(d.uint,t):new N(d.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new N(d.uint,t):new N(d.negint,t)},Uint8Array(t,e,r,n){return new N(d.bytes,t)},string(t,e,r,n){return new N(d.string,t)},boolean(t,e,r,n){return t?Zt.true:Zt.false},null(t,e,r,n){return Zt.null},undefined(t,e,r,n){return Zt.undefined},ArrayBuffer(t,e,r,n){return new N(d.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new N(d.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[Zt.emptyArray,new N(d.break)]:Zt.emptyArray;n=Cs.createCheck(n,t);const s=[];let i=0;for(const o of t)s[i++]=ps(o,r,n);return r.addBreakTokens?[new N(d.array,t.length),s,new N(d.break)]:[new N(d.array,t.length),s]},Object(t,e,r,n){const s=e!=="Object",i=s?t.keys():Object.keys(t),o=s?t.size:i.length;if(!o)return r.addBreakTokens===!0?[Zt.emptyMap,new N(d.break)]:Zt.emptyMap;n=Cs.createCheck(n,t);const a=[];let c=0;for(const u of i)a[c++]=[ps(u,r,n),ps(s?t.get(u):t[u],r,n)];return A0(a,r),r.addBreakTokens?[new N(d.map,o),a,new N(d.break)]:[new N(d.map,o),a]}};cr.Map=cr.Object;cr.Buffer=cr.Uint8Array;for(const t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))cr[`${t}Array`]=cr.DataView;function ps(t,e={},r){const n=bg(t),s=e&&e.typeEncoders&&e.typeEncoders[n]||cr[n];if(typeof s=="function"){const o=s(t,n,e,r);if(o!=null)return o}const i=cr[n];if(!i)throw new Error(`${wr} unsupported type: ${n}`);return i(t,n,e,r)}function A0(t,e){e.mapSorter&&t.sort(e.mapSorter)}function k0(t,e){const r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);const s=r.type.major,i=Il[s].compareTokens(r,n);return i===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),i}function Cl(t,e,r,n){if(Array.isArray(e))for(const s of e)Cl(t,s,r,n);else r[e.type.major](t,e,n)}function _l(t,e,r){const n=ps(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){const s=r.quickEncodeToken(n);if(s)return s;const i=e[n.type.major];if(i.encodedSize){const o=i.encodedSize(n,r),a=new vl(o);if(i(a,n,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return No(a.chunks[0])}}return Ei.reset(),Cl(Ei,n,e,r),Ei.toBytes(!0)}function I0(t,e){return e=Object.assign({},S0,e),_l(t,Il,e)}const C0={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class _0{constructor(e,r={}){this._pos=0,this.data=e,this.options=r}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const e=this.data[this._pos];let r=Tt[e];if(r===void 0){const n=P[e];if(!n)throw new Error(`${j} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const s=e&31;r=n(this.data,this._pos,s,this.options)}return this._pos+=r.encodedLength,r}}const Ln=Symbol.for("DONE"),Ys=Symbol.for("BREAK");function N0(t,e,r){const n=[];for(let s=0;s<t.value;s++){const i=Fn(e,r);if(i===Ys){if(t.value===1/0)break;throw new Error(`${j} got unexpected break to lengthed array`)}if(i===Ln)throw new Error(`${j} found array but not enough entries (got ${s}, expected ${t.value})`);n[s]=i}return n}function T0(t,e,r){const n=r.useMaps===!0,s=n?void 0:{},i=n?new Map:void 0;for(let o=0;o<t.value;o++){const a=Fn(e,r);if(a===Ys){if(t.value===1/0)break;throw new Error(`${j} got unexpected break to lengthed map`)}if(a===Ln)throw new Error(`${j} found map but not enough entries (got ${o} [no key], expected ${t.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${j} non-string keys not supported (got ${typeof a})`);if(r.rejectDuplicateMapKeys===!0&&(n&&i.has(a)||!n&&a in s))throw new Error(`${j} found repeat map key "${a}"`);const c=Fn(e,r);if(c===Ln)throw new Error(`${j} found map but not enough entries (got ${o} [no value], expected ${t.value})`);n?i.set(a,c):s[a]=c}return n?i:s}function Fn(t,e){if(t.done())return Ln;const r=t.next();if(r.type===d.break)return Ys;if(r.type.terminal)return r.value;if(r.type===d.array)return N0(r,t,e);if(r.type===d.map)return T0(r,t,e);if(r.type===d.tag){if(e.tags&&typeof e.tags[r.value]=="function"){const n=Fn(t,e);return e.tags[r.value](n)}throw new Error(`${j} tag not supported (${r.value})`)}throw new Error("unsupported")}function U0(t,e){if(!(t instanceof Uint8Array))throw new Error(`${j} data to decode must be a Uint8Array`);e=Object.assign({},C0,e);const r=e.tokenizer||new _0(t,e),n=Fn(r,e);if(n===Ln)throw new Error(`${j} did not find any content to decode`);if(n===Ys)throw new Error(`${j} got unexpected break`);return[n,t.subarray(r.pos())]}function Nl(t,e){const[r,n]=U0(t,e);if(n.length>0)throw new Error(`${j} too many terminals, data makes no sense`);return r}const Tl=42;function Ul(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}function $0(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;const e=J.asCID(t);if(!e)return null;const r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new N(d.tag,Tl),new N(d.bytes,r)]}function D0(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function P0(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const Zi={float64:!0,typeEncoders:{Object:$0,undefined:D0,number:P0}},O0={...Zi,typeEncoders:{...Zi.typeEncoders}};function R0(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return J.decode(t.subarray(1))}const _s={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};_s.tags[Tl]=R0;const L0={..._s,tags:_s.tags.slice()},F0="dag-cbor",V0=113,$l=t=>I0(t,Zi),Dl=t=>Nl(Ul(t),_s),M0=Object.freeze(Object.defineProperty({__proto__:null,code:V0,decode:Dl,decodeOptions:L0,encode:$l,encodeOptions:O0,name:F0,toByteView:Ul},Symbol.toStringTag,{value:"Module"}));class H0 extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){const r=this.inRecursive[this.inRecursive.length-1];r&&(r.type===d.array&&(r.elements++,r.elements!==1&&e.push([44])),r.type===d.map&&(r.elements++,r.elements!==1&&(r.elements%2===1?e.push([44]):e.push([58]))))}[d.uint.major](e,r){this.prefix(e);const n=String(r.value),s=[];for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);e.push(s)}[d.negint.major](e,r){this[d.uint.major](e,r)}[d.bytes.major](e,r){throw new Error(`${wr} unsupported type: Uint8Array`)}[d.string.major](e,r){this.prefix(e);const n=bl(JSON.stringify(r.value));e.push(n.length>32?No(n):n)}[d.array.major](e,r){this.prefix(e),this.inRecursive.push({type:d.array,elements:0}),e.push([91])}[d.map.major](e,r){this.prefix(e),this.inRecursive.push({type:d.map,elements:0}),e.push([123])}[d.tag.major](e,r){}[d.float.major](e,r){if(r.type.name==="break"){const o=this.inRecursive.pop();if(o){if(o.type===d.array)e.push([93]);else if(o.type===d.map)e.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(r.value===void 0)throw new Error(`${wr} unsupported type: undefined`);if(this.prefix(e),r.type.name==="true"){e.push([116,114,117,101]);return}else if(r.type.name==="false"){e.push([102,97,108,115,101]);return}else if(r.type.name==="null"){e.push([110,117,108,108]);return}const n=String(r.value),s=[];let i=!1;for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o),!i&&(s[o]===46||s[o]===101||s[o]===69)&&(i=!0);i||(s.push(46),s.push(48)),e.push(s)}}function j0(t,e){if(Array.isArray(t[0])||Array.isArray(e[0]))throw new Error(`${wr} complex map keys are not supported`);const r=t[0],n=e[0];if(r.type!==d.string||n.type!==d.string)throw new Error(`${wr} non-string map keys are not supported`);if(r<n)return-1;if(r>n)return 1;throw new Error(`${wr} unexpected duplicate map keys, this is not supported`)}const z0={addBreakTokens:!0,mapSorter:j0};function G0(t,e){return e=Object.assign({},z0,e),_l(t,new H0,e)}class Pl{constructor(e,r={}){this._pos=0,this.data=e,this.options=r,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;e===32||e===9||e===13||e===10;)e=this.data[++this._pos]}expect(e){if(this.data.length-this._pos<e.length)throw new Error(`${j} unexpected end of input at position ${this._pos}`);for(let r=0;r<e.length;r++)if(this.data[this._pos++]!==e[r])throw new Error(`${j} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){const e=this._pos;let r=!1,n=!1;const s=a=>{for(;!this.done();){const c=this.ch();if(a.includes(c))this._pos++;else break}};if(this.ch()===45&&(r=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,n=!0;else return new N(d.uint,0,this._pos-e);if(s([48,49,50,51,52,53,54,55,56,57]),r&&this._pos===e+1)throw new Error(`${j} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${j} unexpected token at position ${this._pos}`);n=!0,this._pos++,s([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,s([48,49,50,51,52,53,54,55,56,57]));const i=String.fromCharCode.apply(null,this.data.subarray(e,this._pos)),o=parseFloat(i);return n?new N(d.float,o,this._pos-e):this.options.allowBigInt!==!0||Number.isSafeInteger(o)?new N(o>=0?d.uint:d.negint,o,this._pos-e):new N(o>=0?d.uint:d.negint,BigInt(i),this._pos-e)}parseString(){if(this.ch()!==34)throw new Error(`${j} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let i=this._pos,o=0;i<this.data.length&&o<65536;i++,o++){const a=this.data[i];if(a===92||a<32||a>=128)break;if(a===34){const c=String.fromCharCode.apply(null,this.data.subarray(this._pos,i));return this._pos=i+1,new N(d.string,c,o)}}const e=this._pos,r=[],n=()=>{if(this._pos+4>=this.data.length)throw new Error(`${j} unexpected end of unicode escape sequence at position ${this._pos}`);let i=0;for(let o=0;o<4;o++){let a=this.ch();if(a>=48&&a<=57)a-=48;else if(a>=97&&a<=102)a=a-97+10;else if(a>=65&&a<=70)a=a-65+10;else throw new Error(`${j} unexpected unicode escape character at position ${this._pos}`);i=i*16+a,this._pos++}return i},s=()=>{const i=this.ch();let o=null,a=i>239?4:i>223?3:i>191?2:1;if(this._pos+a>this.data.length)throw new Error(`${j} unexpected unicode sequence at position ${this._pos}`);let c,u,l,f;switch(a){case 1:i<128&&(o=i);break;case 2:c=this.data[this._pos+1],(c&192)===128&&(f=(i&31)<<6|c&63,f>127&&(o=f));break;case 3:c=this.data[this._pos+1],u=this.data[this._pos+2],(c&192)===128&&(u&192)===128&&(f=(i&15)<<12|(c&63)<<6|u&63,f>2047&&(f<55296||f>57343)&&(o=f));break;case 4:c=this.data[this._pos+1],u=this.data[this._pos+2],l=this.data[this._pos+3],(c&192)===128&&(u&192)===128&&(l&192)===128&&(f=(i&15)<<18|(c&63)<<12|(u&63)<<6|l&63,f>65535&&f<1114112&&(o=f))}o===null?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|o&1023),r.push(o),this._pos+=a};for(;!this.done();){const i=this.ch();let o;switch(i){case 92:if(this._pos++,this.done())throw new Error(`${j} unexpected string termination at position ${this._pos}`);switch(o=this.ch(),this._pos++,o){case 34:case 39:case 92:case 47:r.push(o);break;case 98:r.push(8);break;case 116:r.push(9);break;case 110:r.push(10);break;case 102:r.push(12);break;case 114:r.push(13);break;case 117:r.push(n());break;default:throw new Error(`${j} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new N(d.string,xl(r),this._pos-e);default:if(i<32)throw new Error(`${j} invalid control character at position ${this._pos}`);i<128?(r.push(i),this._pos++):s()}}throw new Error(`${j} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new N(d.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new N(d.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new N(d.null,null,4);case 102:return this.expect([102,97,108,115,101]),new N(d.false,!1,5);case 116:return this.expect([116,114,117,101]),new N(d.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${j} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new N(d.break,void 0,1);if(this.ch()!==44)throw new Error(`${j} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new N(d.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new N(d.break,void 0,1);if(this.ch()!==44)throw new Error(`${j} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new N(d.break,void 0,1);const e=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${j} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${j} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}}function q0(t,e){return e=Object.assign({tokenizer:new Pl(t,e)},e),Nl(t,e)}function W0(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}function J0(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;const e=J.asCID(t);if(!e)return null;const r=e.toString();return[new N(d.map,1/0,1),new N(d.string,"/",1),new N(d.string,r,r.length),new N(d.break,void 0,1)]}function Ns(t){const e=Ws.encode(t).slice(1);return[new N(d.map,1/0,1),new N(d.string,"/",1),new N(d.map,1/0,1),new N(d.string,"bytes",5),new N(d.string,e,e.length),new N(d.break,void 0,1),new N(d.break,void 0,1)]}function ht(t){return Ns(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function Z0(t){return Ns(new Uint8Array(t))}function K0(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function X0(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const Y0={typeEncoders:{Object:J0,Buffer:Ns,Uint8Array:Ns,Int8Array:ht,Uint16Array:ht,Int16Array:ht,Uint32Array:ht,Int32Array:ht,Float32Array:ht,Float64Array:ht,Uint8ClampedArray:ht,BigInt64Array:ht,BigUint64Array:ht,DataView:ht,ArrayBuffer:Z0,undefined:K0,number:X0}};class Q0 extends Pl{constructor(e,r){super(e,r),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const e=this._next();if(e.type===d.map){const r=this._next();if(r.type===d.string&&r.value==="/"){const n=this._next();if(n.type===d.string){if(this._next().type!==d.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new N(d.tag,42,0)}if(n.type===d.map){const s=this._next();if(s.type===d.string&&s.value==="bytes"){const i=this._next();if(i.type===d.string){for(let a=0;a<2;a++)if(this._next().type!==d.break)throw new Error("Invalid encoded Bytes form");const o=Ws.decode(`m${i.value}`);return new N(d.bytes,o,i.value.length)}this.tokenBuffer.push(i)}this.tokenBuffer.push(s)}this.tokenBuffer.push(n)}this.tokenBuffer.push(r)}return e}}const Ki={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Ki.tags[42]=J.parse;const ew="dag-json",tw=297,Ol=t=>G0(t,Y0),Rl=t=>{const e=W0(t),r=Object.assign(Ki,{tokenizer:new Q0(e,Ki)});return q0(e,r)},Ha=t=>rw.decode(Ol(t)),rw=new TextDecoder,nw=t=>Rl(sw.encode(t)),sw=new TextEncoder,iw=Object.freeze(Object.defineProperty({__proto__:null,code:tw,decode:Rl,encode:Ol,format:Ha,name:ew,parse:nw,stringify:Ha},Symbol.toStringTag,{value:"Module"})),ow=new TextDecoder;function Mo(t,e){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");const s=t[e++];if(r+=n<28?(s&127)<<n:(s&127)*2**n,s<128)break}return[r,e]}function Ts(t,e){let r;[r,e]=Mo(t,e);const n=e+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,n),n]}function Ll(t,e){let r;return[r,e]=Mo(t,e),[r&7,r>>3,e]}function aw(t){const e={},r=t.length;let n=0;for(;n<r;){let s,i;if([s,i,n]=Ll(t,n),i===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(s!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${s}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=Ts(t,n)}else if(i===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(s!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${s}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let o;[o,n]=Ts(t,n),e.Name=ow.decode(o)}else if(i===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(s!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${s}) for Tsize`);[e.Tsize,n]=Mo(t,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${i}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function cw(t){const e=t.length;let r=0,n,s=!1,i;for(;r<e;){let a,c;if([a,c,r]=Ll(t,r),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(c===1){if(i)throw new Error("protobuf: (PBNode) duplicate Data section");[i,r]=Ts(t,r),n&&(s=!0)}else if(c===2){if(s)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let u;[u,r]=Ts(t,r),n.push(aw(u))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(r>e)throw new Error("protobuf: (PBNode) unexpected end of data");const o={};return i&&(o.Data=i),o.Links=n||[],o}const Fl=new TextEncoder,ja=2**32,lw=2**31;function uw(t,e){let r=e.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");r=Cn(e,r,t.Tsize)-1,e[r]=24}if(typeof t.Name=="string"){const n=Fl.encode(t.Name);r-=n.length,e.set(n,r),r=Cn(e,r,n.length)-1,e[r]=18}return t.Hash&&(r-=t.Hash.length,e.set(t.Hash,r),r=Cn(e,r,t.Hash.length)-1,e[r]=10),e.length-r}function fw(t){const e=dw(t),r=new Uint8Array(e);let n=e;if(t.Data&&(n-=t.Data.length,r.set(t.Data,n),n=Cn(r,n,t.Data.length)-1,r[n]=10),t.Links)for(let s=t.Links.length-1;s>=0;s--){const i=uw(t.Links[s],r.subarray(0,n));n-=i,n=Cn(r,n,i)-1,r[n]=18}return r}function hw(t){let e=0;if(t.Hash){const r=t.Hash.length;e+=1+r+jr(r)}if(typeof t.Name=="string"){const r=Fl.encode(t.Name).length;e+=1+r+jr(r)}return typeof t.Tsize=="number"&&(e+=1+jr(t.Tsize)),e}function dw(t){let e=0;if(t.Data){const r=t.Data.length;e+=1+r+jr(r)}if(t.Links)for(const r of t.Links){const n=hw(r);e+=1+n+jr(n)}return e}function Cn(t,e,r){e-=jr(r);const n=e;for(;r>=lw;)t[e++]=r&127|128,r/=128;for(;r>=128;)t[e++]=r&127|128,r>>>=7;return t[e]=r,n}function jr(t){return t%2===0&&t++,Math.floor((pw(t)+6)/7)}function pw(t){let e=0;return t>=ja&&(t=Math.floor(t/ja),e=32),t>=65536&&(t>>>=16,e+=16),t>=256&&(t>>>=8,e+=8),e+gw[t]}const gw=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],ww=["Data","Links"],yw=["Hash","Name","Tsize"],Xi=new TextEncoder;function Vl(t,e){if(t===e)return 0;const r=t.Name?Xi.encode(t.Name):[],n=e.Name?Xi.encode(e.Name):[];let s=r.length,i=n.length;for(let o=0,a=Math.min(s,i);o<a;++o)if(r[o]!==n[o]){s=r[o],i=n[o];break}return s<i?-1:i<s?1:0}function za(t,e){return!Object.keys(t).some(r=>!e.includes(r))}function Ml(t){if(typeof t.asCID=="object"){const r=J.asCID(t);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Hash){let r=J.asCID(t.Hash);try{r||(typeof t.Hash=="string"?r=J.parse(t.Hash):t.Hash instanceof Uint8Array&&(r=J.decode(t.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(e.Hash=r)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof t.Name=="string"&&(e.Name=t.Name),typeof t.Tsize=="number"&&(e.Tsize=t.Tsize),e}function Hl(t){if((t instanceof Uint8Array||typeof t=="string")&&(t={Data:t}),typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Data!==void 0)if(typeof t.Data=="string")e.Data=Xi.encode(t.Data);else if(t.Data instanceof Uint8Array)e.Data=t.Data;else throw new TypeError("Invalid DAG-PB form");if(t.Links!==void 0)if(Array.isArray(t.Links))e.Links=t.Links.map(Ml),e.Links.sort(Vl);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function jl(t){if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form");if(!za(t,ww))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let e=0;e<t.Links.length;e++){const r=t.Links[e];if(!r||typeof r!="object"||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!za(r,yw))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(r.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash==null||!r.Hash["/"]||r.Hash["/"]!==r.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0){if(typeof r.Tsize!="number"||r.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(e>0&&Vl(r,t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function mw(t,e=[]){return Hl({Data:t,Links:e})}function bw(t,e,r){return Ml({Hash:r,Name:t,Tsize:e})}function xw(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}const vw="dag-pb",Ew=112;function Sw(t){jl(t);const e={};return t.Links&&(e.Links=t.Links.map(r=>{const n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),t.Data&&(e.Data=t.Data),fw(e)}function Bw(t){const e=xw(t),r=cw(e),n={};return r.Data&&(n.Data=r.Data),r.Links&&(n.Links=r.Links.map(s=>{const i={};try{i.Hash=J.decode(s.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return s.Name!==void 0&&(i.Name=s.Name),s.Tsize!==void 0&&(i.Tsize=s.Tsize),i})),n}const Aw=Object.freeze(Object.defineProperty({__proto__:null,code:Ew,createLink:bw,createNode:mw,decode:Bw,encode:Sw,name:vw,prepare:Hl,validate:jl},Symbol.toStringTag,{value:"Module"}));function kw(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function Ho(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function Iw(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function f(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var y=0,p=0,v=0,S=w.length;v!==S&&w[v]===0;)v++,y++;for(var b=(S-v)*l+1>>>0,B=new Uint8Array(b);v!==S;){for(var O=w[v],T=0,_=b-1;(O!==0||T<p)&&_!==-1;_--,T++)O+=256*B[_]>>>0,B[_]=O%a>>>0,O=O/a>>>0;if(O!==0)throw new Error("Non-zero carry");p=T,v++}for(var $=b-p;$!==b&&B[$]===0;)$++;for(var I=c.repeat(y);$<b;++$)I+=t.charAt(B[$]);return I}function h(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var y=0;if(w[y]!==" "){for(var p=0,v=0;w[y]===c;)p++,y++;for(var S=(w.length-y)*u+1>>>0,b=new Uint8Array(S);w[y];){var B=r[w.charCodeAt(y)];if(B===255)return;for(var O=0,T=S-1;(B!==0||O<v)&&T!==-1;T--,O++)B+=a*b[T]>>>0,b[T]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");v=O,y++}if(w[y]!==" "){for(var _=S-v;_!==S&&b[_]===0;)_++;for(var $=new Uint8Array(p+(S-_)),I=p;_!==S;)$[I++]=b[_++];return $}}}function m(w){var y=h(w);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:h,decode:m}}var Cw=Iw,_w=Cw;class Nw{constructor(e,r,n){g(this,"name");g(this,"prefix");g(this,"baseEncode");this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Tw{constructor(e,r,n){g(this,"name");g(this,"prefix");g(this,"baseDecode");g(this,"prefixCodePoint");if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return zl(this,e)}}class Uw{constructor(e){g(this,"decoders");this.decoders=e}or(e){return zl(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function zl(t,e){return new Uw({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}class $w{constructor(e,r,n,s){g(this,"name");g(this,"prefix");g(this,"baseEncode");g(this,"baseDecode");g(this,"encoder");g(this,"decoder");this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new Nw(e,r,n),this.decoder=new Tw(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function Gl({name:t,prefix:e,encode:r,decode:n}){return new $w(t,e,r,n)}function ql({name:t,prefix:e,alphabet:r}){const{encode:n,decode:s}=_w(r,t);return Gl({prefix:e,name:t,encode:n,decode:i=>Ho(s(i))})}function Dw(t,e,r,n){const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const f=s[t[l]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|f,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o}function Pw(t,e,r){const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o!==0&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i}function it({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return Gl({prefix:e,name:t,encode(s){return Pw(s,n,r)},decode(s){return Dw(s,n,r,t)}})}it({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});it({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const Wl=it({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});it({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function Lt(t){return Wl.encode(t).slice(1)}function At(t){return Wl.decode(`u${t}`)}const gs=it({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});it({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});it({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});it({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});it({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});it({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});it({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});it({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});it({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const er=ql({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});ql({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Ow=Jl,Ga=128,Rw=-128,Lw=Math.pow(2,31);function Jl(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Lw;)e[r++]=t&255|Ga,t/=128;for(;t&Rw;)e[r++]=t&255|Ga,t>>>=7;return e[r]=t|0,Jl.bytes=r-n+1,e}var Fw=Yi,Vw=128,qa=127;function Yi(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw Yi.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&qa)<<s:(o&qa)*Math.pow(2,s),s+=7}while(o>=Vw);return Yi.bytes=i-n,r}var Mw=Math.pow(2,7),Hw=Math.pow(2,14),jw=Math.pow(2,21),zw=Math.pow(2,28),Gw=Math.pow(2,35),qw=Math.pow(2,42),Ww=Math.pow(2,49),Jw=Math.pow(2,56),Zw=Math.pow(2,63),Kw=function(t){return t<Mw?1:t<Hw?2:t<jw?3:t<zw?4:t<Gw?5:t<qw?6:t<Ww?7:t<Jw?8:t<Zw?9:10},Xw={encode:Ow,decode:Fw,encodingLength:Kw},Us=Xw;function Qi(t,e=0){return[Us.decode(t,e),Us.decode.bytes]}function $s(t,e,r=0){return Us.encode(t,e,r),e}function Ds(t){return Us.encodingLength(t)}function Yw(t,e){const r=e.byteLength,n=Ds(t),s=n+Ds(r),i=new Uint8Array(s+r);return $s(t,i,0),$s(r,i,n),i.set(e,s),new jo(t,r,e,i)}function Qw(t){const e=Ho(t),[r,n]=Qi(e),[s,i]=Qi(e.subarray(n)),o=e.subarray(n+i);if(o.byteLength!==s)throw new Error("Incorrect length");return new jo(r,s,o,e)}function ey(t,e){if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&kw(t.bytes,r.bytes)}}class jo{constructor(e,r,n,s){g(this,"code");g(this,"size");g(this,"digest");g(this,"bytes");this.code=e,this.size=r,this.digest=n,this.bytes=s}}function Wa(t,e){const{bytes:r,version:n}=t;switch(n){case 0:return ry(r,eo(t),e??er.encoder);default:return ny(r,eo(t),e??gs.encoder)}}const Ja=new WeakMap;function eo(t){const e=Ja.get(t);if(e==null){const r=new Map;return Ja.set(t,r),r}return e}var Zc;class Be{constructor(e,r,n,s){g(this,"code");g(this,"version");g(this,"multihash");g(this,"bytes");g(this,"/");g(this,Zc,"CID");this.code=r,this.version=e,this.multihash=n,this.bytes=s,this["/"]=s}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==xn)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==sy)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Be.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=Yw(e,r);return Be.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Be.equals(this,e)}static equals(e,r){const n=r;return n!=null&&e.code===n.code&&e.version===n.version&&ey(e.multihash,n.multihash)}toString(e){return Wa(this,e)}toJSON(){return{"/":Wa(this)}}link(){return this}[(Zc=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const r=e;if(r instanceof Be)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:s,multihash:i,bytes:o}=r;return new Be(n,s,i,o??Za(n,s,i.bytes))}else if(r[iy]===!0){const{version:n,multihash:s,code:i}=r,o=Qw(s);return Be.create(n,i,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==xn)throw new Error(`Version 0 CID must use dag-pb (code: ${xn}) block encoding`);return new Be(e,r,n,n.bytes)}case 1:{const s=Za(e,r,n.bytes);return new Be(e,r,n,s)}default:throw new Error("Invalid version")}}static createV0(e){return Be.create(0,xn,e)}static createV1(e,r){return Be.create(1,e,r)}static decode(e){const[r,n]=Be.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=Be.inspectBytes(e),n=r.size-r.multihashSize,s=Ho(e.subarray(n,n+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");const i=s.subarray(r.multihashSize-r.digestSize),o=new jo(r.multihashCode,r.digestSize,i,s);return[r.version===0?Be.createV0(o):Be.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[f,h]=Qi(e.subarray(r));return r+=h,f};let s=n(),i=xn;if(s===18?(s=0,r=0):i=n(),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);const o=r,a=n(),c=n(),u=r+c,l=u-o;return{version:s,codec:i,multihashCode:a,digestSize:c,multihashSize:l,size:u}}static parse(e,r){const[n,s]=ty(e,r),i=Be.decode(s);if(i.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return eo(i).set(n,e),i}}function ty(t,e){switch(t[0]){case"Q":{const r=e??er;return[er.prefix,r.decode(`${er.prefix}${t}`)]}case er.prefix:{const r=e??er;return[er.prefix,r.decode(t)]}case gs.prefix:{const r=e??gs;return[gs.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function ry(t,e,r){const{prefix:n}=r;if(n!==er.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const s=e.get(n);if(s==null){const i=r.encode(t).slice(1);return e.set(n,i),i}else return s}function ny(t,e,r){const{prefix:n}=r,s=e.get(n);if(s==null){const i=r.encode(t);return e.set(n,i),i}else return s}const xn=112,sy=18;function Za(t,e,r){const n=Ds(t),s=n+Ds(e),i=new Uint8Array(s+r.byteLength);return $s(t,i,0),$s(e,i,n),i.set(r,s),i}const iy=Symbol.for("@ipld/js-cid/CID");function oy(t){const[e,r,n]=t;return{payload:r,signatures:[{protected:e,signature:n}],link:Be.decode(At(r))}}function ay(t){const e={signature:At(t.signature)};return t.header&&(e.header=t.header),t.protected&&(e.protected=At(t.protected)),e}function cy(t){return{payload:At(t.payload),signatures:t.signatures.map(ay)}}function ly(t){const e={signature:Lt(t.signature)};return t.header&&(e.header=t.header),t.protected&&(e.protected=Lt(t.protected)),e}function uy(t){const e={payload:Lt(t.payload),signatures:t.signatures.map(ly)};try{return e.pld=to(hy(t.payload)),e}catch{try{return e.link=Be.decode(new Uint8Array(t.payload)),e}catch{throw new Error("Invalid payload, must be either JSON or CID")}}}function to(t){if(typeof t=="string"){if(t.startsWith("ipfs://"))return Be.parse(t.slice(7))}else{if(Array.isArray(t))return t.map(to);if(fy(t)){const e={};for(const r in t)e[r]=to(t[r]);return e}}return t}function fy(t){return typeof t=="object"&&t!==null}function hy(t){return JSON.parse(new TextDecoder().decode(t))}function dy(t){const[e,r,n,s,i]=t,o={ciphertext:s,iv:n,protected:e,tag:i};return r&&(o.recipients=[{encrypted_key:r}]),o}function py(t){const e={};return t.encrypted_key&&(e.encrypted_key=At(t.encrypted_key)),t.header&&(e.header=t.header),e}function gy(t){const e={ciphertext:At(t.ciphertext),protected:At(t.protected),iv:At(t.iv),tag:At(t.tag)};return t.aad&&(e.aad=At(t.aad)),t.recipients&&(e.recipients=t.recipients.map(py)),t.unprotected&&(e.unprotected=t.unprotected),e}function wy(t){const e={};return t.encrypted_key&&(e.encrypted_key=Lt(t.encrypted_key)),t.header&&(e.header=t.header),e}function yy(t){const e={ciphertext:Lt(t.ciphertext),protected:Lt(t.protected),iv:Lt(t.iv),tag:Lt(t.tag)};return t.aad&&(e.aad=Lt(t.aad)),t.recipients&&(e.recipients=t.recipients.map(wy)),t.unprotected&&(e.unprotected=t.unprotected),e}const my="dag-jose",by=133;function Zl(t){return"payload"in t&&typeof t.payload=="string"&&"signatures"in t&&Array.isArray(t.signatures)}function xy(t){return"payload"in t&&t.payload instanceof Uint8Array&&"signatures"in t&&Array.isArray(t.signatures)}function vy(t){return"ciphertext"in t&&t.ciphertext instanceof Uint8Array&&"iv"in t&&t.iv instanceof Uint8Array&&"protected"in t&&t.protected instanceof Uint8Array&&"tag"in t&&t.tag instanceof Uint8Array}function Kl(t){return"ciphertext"in t&&typeof t.ciphertext=="string"&&"iv"in t&&typeof t.iv=="string"&&"protected"in t&&typeof t.protected=="string"&&"tag"in t&&typeof t.tag=="string"}function Xl(t){if(typeof t=="string"){const e=t.split(".");if(e.length===3)return oy(e);if(e.length===5)return dy(e);throw new Error("Not a valid JOSE string")}if(Zl(t)||Kl(t))return t;throw new Error("Not a valid unencoded JOSE object")}function Ey(t){typeof t=="string"&&(t=Xl(t));let e;if(Zl(t))e=cy(t);else if(Kl(t))e=gy(t);else throw new Error("Not a valid JOSE object");return new Uint8Array($l(e))}function Sy(t){let e;try{e=Dl(t)}catch{throw new Error("Not a valid DAG-JOSE object")}if(xy(e))return uy(e);if(vy(e))return yy(e);throw new Error("Not a valid DAG-JOSE object")}const By=Object.freeze(Object.defineProperty({__proto__:null,code:by,decode:Sy,encode:Ey,name:my,toGeneral:Xl},Symbol.toStringTag,{value:"Module"}));function zt(t){const e=new globalThis.AbortController;function r(){e.abort();for(const i of t)(i==null?void 0:i.removeEventListener)!=null&&i.removeEventListener("abort",r)}for(const i of t){if((i==null?void 0:i.aborted)===!0){r();break}(i==null?void 0:i.addEventListener)!=null&&i.addEventListener("abort",r)}function n(){for(const i of t)(i==null?void 0:i.removeEventListener)!=null&&i.removeEventListener("abort",r)}const s=e.signal;return s.clear=n,s}const Ay="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let ky=(t=21)=>{let e="",r=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)e+=Ay[r[t]&63];return e};function Iy(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var Cy=Iy;const _y=vo(Cy),Yl=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,zo=_y(),Qs=Yl&&!zo,Ny=zo&&Yl,Ty=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!zo,ei=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;async function*ti(t,e={}){const r=t.getReader();try{for(;;){const n=await r.read();if(n.done)return;yield n.value}}finally{e.preventCancel!==!0&&await r.cancel(),r.releaseLock()}}function Ka(t,e){for(const r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Uy(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Ka(t,r)}catch{r.message=t.message,r.stack=t.stack;const s=function(){};return s.prototype=Object.create(Object.getPrototypeOf(t)),Ka(new s,r)}}var $y=Uy;const It=vo($y);function ri(t){const[e,r]=t[Symbol.asyncIterator]!=null?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:s=>{n.push(s)},next:()=>n.length>0?{done:!1,value:n.shift()}:e.next(),[r](){return this}}}function Dy(t){return t[Symbol.asyncIterator]!=null}function Xa(t,e){let r=0;if(Dy(t))return async function*(){for await(const c of t)yield e(c,r++)}();const n=ri(t),{value:s,done:i}=n.next();if(i===!0)return function*(){}();const o=e(s,r++);if(typeof o.then=="function")return async function*(){yield await o;for await(const c of n)yield e(c,r++)}();const a=e;return function*(){yield o;for(const c of n)yield a(c,r++)}()}let Py=class extends Error{constructor(r){super(r.statusText);g(this,"response");this.name="HTTPError",this.response=r}};class Oy extends Error{constructor(e="Invalid mtime"){super(e),this.name="InvalidMtimeError"}}function Kr(t){return ArrayBuffer.isView(t)||t instanceof ArrayBuffer}function Ps(t){return t.constructor!=null&&(t.constructor.name==="Blob"||t.constructor.name==="File")&&typeof t.stream=="function"}function ro(t){return typeof t=="object"&&(t.path!=null||t.content!=null)}function Os(t){return typeof(t==null?void 0:t.getReader)=="function"}function Ql(t){if(t!=null)return typeof t=="string"&&(t=parseInt(t,8)),t&4095}function Ry(t){return Object.prototype.hasOwnProperty.call(t,"secs")}function Ly(t){return Object.prototype.hasOwnProperty.call(t,"Seconds")}function Fy(t){return Array.isArray(t)}function ni(t){if(t!=null){if(Ry(t)&&(t={secs:t.secs,nsecs:t.nsecs}),Ly(t)&&(t={secs:BigInt(t.Seconds),nsecs:t.FractionalNanoseconds}),Fy(t)&&(t={secs:BigInt(t[0]),nsecs:t[1]}),t instanceof Date){const e=t.getTime(),r=Math.floor(e/1e3);t={secs:BigInt(r),nsecs:(e-r*1e3)*1e3}}if(typeof t=="bigint"){const e=t/BigInt(1e9),r=t-e*BigInt(1e9);t={secs:e,nsecs:Number(r)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(t.nsecs!=null&&(t.nsecs<0||t.nsecs>999999999))throw new Oy("mtime-nsecs must be within the range [0,999999999]");return t}}}async function*Vy(t,e){if(typeof t=="string"||t instanceof String||Kr(t)||Ps(t)||t._readableState!=null)throw It(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(Os(t)&&(t=ti(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const r=ri(t),{value:n,done:s}=await r.peek();if(s===!0){yield*[];return}if(r.push(n),Number.isInteger(n))throw It(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState!=null){yield*Xa(r,async i=>Si({content:i},e));return}if(Kr(n)){yield Si({content:r},e);return}if(ro(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||Os(n)||Ps(n)){yield*Xa(r,async i=>Si(i,e));return}}throw ro(t)?It(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):It(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")}async function Si(t,e){const{path:r,mode:n,mtime:s,content:i}=t,o={path:r??"",mode:Ql(n),mtime:ni(s)};return i!=null?o.content=await e(i):r==null&&(o.content=await e(t)),o}const eu=Symbol.for("@libp2p/peer-id");class ut extends Error{constructor(e="Invalid parameters"){super(e),this.name="InvalidParametersError"}}g(ut,"name","InvalidParametersError");class Go extends Error{constructor(e="Invalid public key"){super(e),this.name="InvalidPublicKeyError"}}g(Go,"name","InvalidPublicKeyError");class tu extends Error{constructor(e="Invalid Multihash"){super(e),this.name="InvalidMultihashError"}}g(tu,"name","InvalidMultihashError");class qo extends Error{constructor(e="Unsupported key type"){super(e),this.name="UnsupportedKeyTypeError"}}g(qo,"name","UnsupportedKeyTypeError");function My(t){return t[Symbol.asyncIterator]!=null}function ru(t){if(My(t))return(async()=>{const r=[];for await(const n of t)r.push(n);return r})();const e=[];for(const r of t)e.push(r);return e}async function nu(t){if(Kr(t))return new Blob([t]);if(typeof t=="string"||t instanceof String)return new Blob([t.toString()]);if(Ps(t))return t;if(Os(t)&&(t=ti(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const e=ri(t),{value:r,done:n}=await e.peek();if(n===!0)return Ya(e);if(e.push(r),Number.isInteger(r))return new Blob([Uint8Array.from(await ru(e))]);if(Kr(r)||typeof r=="string"||r instanceof String)return Ya(e)}throw new ut(`Unexpected input: ${t}`)}async function Ya(t){const e=[];for await(const r of t)e.push(r);return new Blob(e)}function Hy(t){return Vy(t,nu)}function Wo(t){if(t!=null)return typeof t=="string"?t:t.toString(8).padStart(4,"0")}async function Qa(t,e,r={},n){const s=[],i=new FormData;let o=0,a=0;for await(const{content:c,path:u,mode:l,mtime:f}of Hy(t)){let h="";const m=c!=null?"file":"dir";o>0&&(h=`-${o}`);let w=m+h;const y=[];if(l!=null&&y.push(`mode=${Wo(l)}`),f!=null){const{secs:p,nsecs:v}=f;y.push(`mtime=${p}`),v!=null&&y.push(`mtime-nsecs=${v}`)}if(y.length>0&&(w=`${w}?${y.join("&")}`),c!=null){i.set(w,c,u!=null?encodeURIComponent(u):void 0);const p=a+c.size;s.push({name:u,start:a,end:p}),a=p}else if(u!=null)i.set(w,new File([""],encodeURIComponent(u),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");o++}return{total:a,parts:s,headers:r,body:i}}async function lr(t,e,r={},n=`-----------------------------${ky()}`){let s=Qa;return Ny&&(s=Qa),s(t,e,r,n)}function Ue(t){if(t==null)return t;const e=/^[A-Z]+$/,r={};return Object.keys(t).reduce((n,s)=>(e.test(s)?n[s.toLowerCase()]=t[s]:e.test(s[0])?n[s[0].toLowerCase()+s.slice(1)]=t[s]:n[s]=t[s],n),r)}function C({arg:t,searchParams:e,hashAlg:r,mtime:n,mode:s,...i}={}){e!=null&&(i={...i,...e}),r!=null&&(i.hash=r),n!=null&&(n=ni(n),i.mtime=n.secs,i.mtimeNsecs=n.nsecs),s!=null&&(i.mode=Wo(s)),isNaN(i.timeout)||(i.timeout=`${i.timeout}ms`),t==null?t=[]:Array.isArray(t)||(t=[t]);const o=new URLSearchParams(i);return t.forEach(a=>{o.append("arg",a)}),o}function su(t){return async function*(r,n={}){const s=new AbortController,i=zt([s.signal,n.signal]);try{const{headers:o,body:a,total:c,parts:u}=await lr(r,s,n.headers),[l,f]=typeof n.progress=="function"?jy(c,n.progress,u):[void 0,void 0],h=await t.post("add",{searchParams:C({"stream-channels":!0,...n,progress:!!l}),onUploadProgress:f,signal:i,headers:o,body:a});for await(let m of h.ndjson())m=Ue(m),m.hash!==void 0?yield Gy(m):l!=null&&l(m.bytes??0,m.name)}finally{i.clear()}}}const jy=(t,e,r)=>r!=null?[void 0,zy(t,r,e)]:[e,void 0],zy=(t,e,r)=>{let n=0;const s=e.length;return({loaded:i,total:o})=>{const a=Math.floor(i/o*t);for(;n<s;){const{start:c,end:u,name:l}=e[n];if(a<u){r(a-c,l);break}else r(u-c,l),n+=1}}};function Gy({name:t,hash:e,size:r,mode:n,mtime:s,mtimeNsecs:i}){const o={path:t,cid:J.parse(e),size:parseInt(r)};return n!=null&&(o.mode=parseInt(n,8)),s!=null&&(o.mtime={secs:s,nsecs:i??0}),o}function qy(t){return t[Symbol.asyncIterator]!=null}function si(t){if(qy(t))return(async()=>{let r;for await(const n of t)r=n;return r})();let e;for(const r of t)e=r;return e}async function*Wy(t,e){if(t==null)throw It(new Error(`Unexpected input: ${t}`),"ERR_UNEXPECTED_INPUT");if(typeof t=="string"||t instanceof String){yield Qn(t.toString(),e);return}if(Kr(t)||Ps(t)){yield Qn(t,e);return}if(Os(t)&&(t=ti(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const r=ri(t),{value:n,done:s}=await r.peek();if(s===!0){yield{content:[]};return}if(r.push(n),Number.isInteger(n)||Kr(n)||typeof n=="string"||n instanceof String){yield Qn(r,e);return}throw It(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(ro(t)){yield Qn(t,e);return}throw It(new Error('Unexpected input: cannot convert "'+typeof t+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function Qn(t,e){const{path:r,mode:n,mtime:s,content:i}=t,o={path:r??"",mode:Ql(n),mtime:ni(s)};return i!=null?o.content=await e(i):r==null&&(o.content=await e(t)),o}function Jy(t){return Wy(t,nu)}function Zy(t){const e=su(t);return async function(n,s={}){const i=Jy(n),o=e(i,s),a=await si(o);if(a==null)throw new Error("Invalid body");return a}}function ec(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ky(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ii(t,...e){if(!Ky(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Xy(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ec(t.outputLen),ec(t.blockLen)}function Rs(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Yy(t,e){ii(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Or=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Bi(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Et(t,e){return t<<32-e|t>>>e}function Qy(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Jo(t){return typeof t=="string"&&(t=Qy(t)),ii(t),t}function em(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];ii(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}class iu{clone(){return this._cloneInto()}}function ou(t){const e=n=>t().update(Jo(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function au(t=32){if(Or&&typeof Or.getRandomValues=="function")return Or.getRandomValues(new Uint8Array(t));if(Or&&typeof Or.randomBytes=="function")return Or.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function tm(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}function rm(t,e,r){return t&e^~t&r}function nm(t,e,r){return t&e^t&r^e&r}class cu extends iu{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Bi(this.buffer)}update(e){Rs(this);const{view:r,buffer:n,blockLen:s}=this;e=Jo(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Bi(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Rs(this),Yy(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let f=o;f<s;f++)r[f]=0;tm(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=Bi(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,l[f],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}}const es=BigInt(2**32-1),no=BigInt(32);function lu(t,e=!1){return e?{h:Number(t&es),l:Number(t>>no&es)}:{h:Number(t>>no&es)|0,l:Number(t&es)|0}}function sm(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=lu(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const im=(t,e)=>BigInt(t>>>0)<<no|BigInt(e>>>0),om=(t,e,r)=>t>>>r,am=(t,e,r)=>t<<32-r|e>>>r,cm=(t,e,r)=>t>>>r|e<<32-r,lm=(t,e,r)=>t<<32-r|e>>>r,um=(t,e,r)=>t<<64-r|e>>>r-32,fm=(t,e,r)=>t>>>r-32|e<<64-r,hm=(t,e)=>e,dm=(t,e)=>t,pm=(t,e,r)=>t<<r|e>>>32-r,gm=(t,e,r)=>e<<r|t>>>32-r,wm=(t,e,r)=>e<<r-32|t>>>64-r,ym=(t,e,r)=>t<<r-32|e>>>64-r;function mm(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const bm=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),xm=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,vm=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Em=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,Sm=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),Bm=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,Q={fromBig:lu,split:sm,toBig:im,shrSH:om,shrSL:am,rotrSH:cm,rotrSL:lm,rotrBH:um,rotrBL:fm,rotr32H:hm,rotr32L:dm,rotlSH:pm,rotlSL:gm,rotlBH:wm,rotlBL:ym,add:mm,add3L:bm,add3H:xm,add4L:vm,add4H:Em,add5H:Bm,add5L:Sm},[Am,km]=Q.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Kt=new Uint32Array(80),Xt=new Uint32Array(80);class Im extends cu{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:f,Fl:h,Gh:m,Gl:w,Hh:y,Hl:p}=this;return[e,r,n,s,i,o,a,c,u,l,f,h,m,w,y,p]}set(e,r,n,s,i,o,a,c,u,l,f,h,m,w,y,p){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=f|0,this.Fl=h|0,this.Gh=m|0,this.Gl=w|0,this.Hh=y|0,this.Hl=p|0}process(e,r){for(let b=0;b<16;b++,r+=4)Kt[b]=e.getUint32(r),Xt[b]=e.getUint32(r+=4);for(let b=16;b<80;b++){const B=Kt[b-15]|0,O=Xt[b-15]|0,T=Q.rotrSH(B,O,1)^Q.rotrSH(B,O,8)^Q.shrSH(B,O,7),_=Q.rotrSL(B,O,1)^Q.rotrSL(B,O,8)^Q.shrSL(B,O,7),$=Kt[b-2]|0,I=Xt[b-2]|0,M=Q.rotrSH($,I,19)^Q.rotrBH($,I,61)^Q.shrSH($,I,6),L=Q.rotrSL($,I,19)^Q.rotrBL($,I,61)^Q.shrSL($,I,6),V=Q.add4L(_,L,Xt[b-7],Xt[b-16]),X=Q.add4H(V,T,M,Kt[b-7],Kt[b-16]);Kt[b]=X|0,Xt[b]=V|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:f,El:h,Fh:m,Fl:w,Gh:y,Gl:p,Hh:v,Hl:S}=this;for(let b=0;b<80;b++){const B=Q.rotrSH(f,h,14)^Q.rotrSH(f,h,18)^Q.rotrBH(f,h,41),O=Q.rotrSL(f,h,14)^Q.rotrSL(f,h,18)^Q.rotrBL(f,h,41),T=f&m^~f&y,_=h&w^~h&p,$=Q.add5L(S,O,_,km[b],Xt[b]),I=Q.add5H($,v,B,T,Am[b],Kt[b]),M=$|0,L=Q.rotrSH(n,s,28)^Q.rotrBH(n,s,34)^Q.rotrBH(n,s,39),V=Q.rotrSL(n,s,28)^Q.rotrBL(n,s,34)^Q.rotrBL(n,s,39),X=n&i^n&a^i&a,A=s&o^s&c^o&c;v=y|0,S=p|0,y=m|0,p=w|0,m=f|0,w=h|0,{h:f,l:h}=Q.add(u|0,l|0,I|0,M|0),u=a|0,l=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const D=Q.add3L(M,V,A);n=Q.add3H(D,I,L,X),s=D|0}({h:n,l:s}=Q.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=Q.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Q.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=Q.add(this.Dh|0,this.Dl|0,u|0,l|0),{h:f,l:h}=Q.add(this.Eh|0,this.El|0,f|0,h|0),{h:m,l:w}=Q.add(this.Fh|0,this.Fl|0,m|0,w|0),{h:y,l:p}=Q.add(this.Gh|0,this.Gl|0,y|0,p|0),{h:v,l:S}=Q.add(this.Hh|0,this.Hl|0,v|0,S|0),this.set(n,s,i,o,a,c,u,l,f,h,m,w,y,p,v,S)}roundClean(){Kt.fill(0),Xt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Cm=ou(()=>new Im);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const oi=BigInt(0),ai=BigInt(1),_m=BigInt(2);function vr(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Kn(t){if(!vr(t))throw new Error("Uint8Array expected")}function Vt(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Nm=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Er(t){Kn(t);let e="";for(let r=0;r<t.length;r++)e+=Nm[t[r]];return e}function Vr(t){const e=t.toString(16);return e.length&1?"0"+e:e}function Zo(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?oi:BigInt("0x"+t)}const Ot={_0:48,_9:57,A:65,F:70,a:97,f:102};function tc(t){if(t>=Ot._0&&t<=Ot._9)return t-Ot._0;if(t>=Ot.A&&t<=Ot.F)return t-(Ot.A-10);if(t>=Ot.a&&t<=Ot.f)return t-(Ot.a-10)}function Xr(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=tc(t.charCodeAt(i)),a=tc(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function yr(t){return Zo(Er(t))}function zr(t){return Kn(t),Zo(Er(Uint8Array.from(t).reverse()))}function Yr(t,e){return Xr(t.toString(16).padStart(e*2,"0"))}function Vn(t,e){return Yr(t,e).reverse()}function Tm(t){return Xr(Vr(t))}function Ee(t,e,r){let n;if(typeof e=="string")try{n=Xr(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(vr(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}function Sr(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];Kn(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}function Um(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function $m(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const Ai=t=>typeof t=="bigint"&&oi<=t;function ci(t,e,r){return Ai(t)&&Ai(e)&&Ai(r)&&e<=t&&t<r}function lt(t,e,r,n){if(!ci(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function uu(t){let e;for(e=0;t>oi;t>>=ai,e+=1);return e}function Dm(t,e){return t>>BigInt(e)&ai}function Pm(t,e,r){return t|(r?ai:oi)<<BigInt(e)}const Ko=t=>(_m<<BigInt(t-1))-ai,ki=t=>new Uint8Array(t),rc=t=>Uint8Array.from(t);function fu(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=ki(t),s=ki(t),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...f)=>r(s,n,...f),c=(f=ki())=>{s=a(rc([0]),f),n=a(),f.length!==0&&(s=a(rc([1]),f),n=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const h=[];for(;f<e;){n=a();const m=n.slice();h.push(m),f+=n.length}return Sr(...h)};return(f,h)=>{o(),c(f);let m;for(;!(m=h(u()));)c();return o(),m}}const Om={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||vr(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function hn(t,e,r={}){const n=(s,i,o)=>{const a=Om[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return t}const Rm=()=>{throw new Error("not implemented")};function Mn(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}const Lm=Object.freeze(Object.defineProperty({__proto__:null,aInRange:lt,abool:Vt,abytes:Kn,bitGet:Dm,bitLen:uu,bitMask:Ko,bitSet:Pm,bytesToHex:Er,bytesToNumberBE:yr,bytesToNumberLE:zr,concatBytes:Sr,createHmacDrbg:fu,ensureBytes:Ee,equalBytes:Um,hexToBytes:Xr,hexToNumber:Zo,inRange:ci,isBytes:vr,memoized:Mn,notImplemented:Rm,numberToBytesBE:Yr,numberToBytesLE:Vn,numberToHexUnpadded:Vr,numberToVarBytesBE:Tm,utf8ToBytes:$m,validateObject:hn},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ke=BigInt(0),ge=BigInt(1),pr=BigInt(2),Fm=BigInt(3),so=BigInt(4),nc=BigInt(5),sc=BigInt(8);function de(t,e){const r=t%e;return r>=ke?r:e+r}function Vm(t,e,r){if(e<ke)throw new Error("invalid exponent, negatives unsupported");if(r<=ke)throw new Error("invalid modulus");if(r===ge)return ke;let n=ge;for(;e>ke;)e&ge&&(n=n*t%r),t=t*t%r,e>>=ge;return n}function ye(t,e,r){let n=t;for(;e-- >ke;)n*=n,n%=r;return n}function io(t,e){if(t===ke)throw new Error("invert: expected non-zero number");if(e<=ke)throw new Error("invert: expected positive modulus, got "+e);let r=de(t,e),n=e,s=ke,i=ge;for(;r!==ke;){const a=n/r,c=n%r,u=s-i*a;n=r,r=c,s=i,i=u}if(n!==ge)throw new Error("invert: does not exist");return de(s,e)}function Mm(t){const e=(t-ge)/pr;let r,n,s;for(r=t-ge,n=0;r%pr===ke;r/=pr,n++);for(s=pr;s<t&&Vm(s,e,t)!==t-ge;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+ge)/so;return function(c,u){const l=c.pow(u,o);if(!c.eql(c.sqr(l),u))throw new Error("Cannot find square root");return l}}const i=(r+ge)/pr;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,l=a.pow(a.mul(a.ONE,s),r),f=a.pow(c,i),h=a.pow(c,r);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let m=1;for(let y=a.sqr(h);m<u&&!a.eql(y,a.ONE);m++)y=a.sqr(y);const w=a.pow(l,ge<<BigInt(u-m-1));l=a.sqr(w),f=a.mul(f,w),h=a.mul(h,l),u=m}return f}}function Hm(t){if(t%so===Fm){const e=(t+ge)/so;return function(n,s){const i=n.pow(s,e);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%sc===nc){const e=(t-nc)/sc;return function(n,s){const i=n.mul(s,pr),o=n.pow(i,e),a=n.mul(s,o),c=n.mul(n.mul(a,pr),o),u=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),s))throw new Error("Cannot find square root");return u}}return Mm(t)}const jm=(t,e)=>(de(t,e)&ge)===ge,zm=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Gm(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=zm.reduce((n,s)=>(n[s]="function",n),e);return hn(t,r)}function qm(t,e,r){if(r<ke)throw new Error("invalid exponent, negatives unsupported");if(r===ke)return t.ONE;if(r===ge)return e;let n=t.ONE,s=e;for(;r>ke;)r&ge&&(n=t.mul(n,s)),s=t.sqr(s),r>>=ge;return n}function Wm(t,e){const r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function hu(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function li(t,e,r=!1,n={}){if(t<=ke)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=hu(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:s,BYTES:i,MASK:Ko(s),ZERO:ke,ONE:ge,create:c=>de(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ke<=c&&c<t},is0:c=>c===ke,isOdd:c=>(c&ge)===ge,neg:c=>de(-c,t),eql:(c,u)=>c===u,sqr:c=>de(c*c,t),add:(c,u)=>de(c+u,t),sub:(c,u)=>de(c-u,t),mul:(c,u)=>de(c*u,t),pow:(c,u)=>qm(a,c,u),div:(c,u)=>de(c*io(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>io(c,t),sqrt:n.sqrt||(c=>(o||(o=Hm(t)),o(a,c))),invertBatch:c=>Wm(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>r?Vn(c,i):Yr(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return r?zr(c):yr(c)}});return Object.freeze(a)}function du(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function pu(t){const e=du(t);return e+Math.ceil(e/2)}function Jm(t,e,r=!1){const n=t.length,s=du(e),i=pu(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=r?zr(t):yr(t),a=de(o,e-ge)+ge;return r?Vn(a,s):Yr(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ic=BigInt(0),ts=BigInt(1);function Ii(t,e){const r=e.negate();return t?r:e}function gu(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Ci(t,e){gu(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function Zm(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function Km(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const _i=new WeakMap,wu=new WeakMap;function Ni(t){return wu.get(t)||1}function yu(t,e){return{constTimeNegate:Ii,hasPrecomputes(r){return Ni(r)!==1},unsafeLadder(r,n,s=t.ZERO){let i=r;for(;n>ic;)n&ts&&(s=s.add(i)),i=i.double(),n>>=ts;return s},precomputeWindow(r,n){const{windows:s,windowSize:i}=Ci(n,e),o=[];let a=r,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,s){const{windows:i,windowSize:o}=Ci(r,e);let a=t.ZERO,c=t.BASE;const u=BigInt(2**r-1),l=2**r,f=BigInt(r);for(let h=0;h<i;h++){const m=h*o;let w=Number(s&u);s>>=f,w>o&&(w-=l,s+=ts);const y=m,p=m+Math.abs(w)-1,v=h%2!==0,S=w<0;w===0?c=c.add(Ii(v,n[y])):a=a.add(Ii(S,n[p]))}return{p:a,f:c}},wNAFUnsafe(r,n,s,i=t.ZERO){const{windows:o,windowSize:a}=Ci(r,e),c=BigInt(2**r-1),u=2**r,l=BigInt(r);for(let f=0;f<o;f++){const h=f*a;if(s===ic)break;let m=Number(s&c);if(s>>=l,m>a&&(m-=u,s+=ts),m===0)continue;let w=n[h+Math.abs(m)-1];m<0&&(w=w.negate()),i=i.add(w)}return i},getPrecomputes(r,n,s){let i=_i.get(n);return i||(i=this.precomputeWindow(n,r),r!==1&&_i.set(n,s(i))),i},wNAFCached(r,n,s){const i=Ni(r);return this.wNAF(i,this.getPrecomputes(i,r,s),n)},wNAFCachedUnsafe(r,n,s,i){const o=Ni(r);return o===1?this.unsafeLadder(r,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,r,s),n,i)},setWindowSize(r,n){gu(n,e),wu.set(r,n),_i.delete(r)}}}function mu(t,e,r,n){if(Zm(r,t),Km(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=uu(BigInt(r.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),u=Math.floor((e.BITS-1)/o)*o;let l=s;for(let f=u;f>=0;f-=o){c.fill(s);for(let m=0;m<n.length;m++){const w=n[m],y=Number(w>>BigInt(f)&BigInt(a));c[y]=c[y].add(r[m])}let h=s;for(let m=c.length-1,w=s;m>0;m--)w=w.add(c[m]),h=h.add(w);if(l=l.add(h),f!==0)for(let m=0;m<o;m++)l=l.double()}return l}function Xo(t){return Gm(t.Fp),hn(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...hu(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dt=BigInt(0),Ge=BigInt(1),rs=BigInt(2),Xm=BigInt(8),Ym={zip215:!0};function Qm(t){const e=Xo(t);return hn(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function eb(t){const e=Qm(t),{Fp:r,n,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,u=rs<<BigInt(a*8)-Ge,l=r.create,f=li(e.n,e.nBitLength),h=e.uvRatio||((E,x)=>{try{return{isValid:!0,value:r.sqrt(E*r.inv(x))}}catch{return{isValid:!1,value:dt}}}),m=e.adjustScalarBytes||(E=>E),w=e.domain||((E,x,k)=>{if(Vt("phflag",k),x.length||k)throw new Error("Contexts/pre-hash are not supported");return E});function y(E,x){lt("coordinate "+E,x,dt,u)}function p(E){if(!(E instanceof b))throw new Error("ExtendedPoint expected")}const v=Mn((E,x)=>{const{ex:k,ey:R,ez:G}=E,z=E.is0();x==null&&(x=z?Xm:r.inv(G));const Y=l(k*x),K=l(R*x),H=l(G*x);if(z)return{x:dt,y:Ge};if(H!==Ge)throw new Error("invZ was invalid");return{x:Y,y:K}}),S=Mn(E=>{const{a:x,d:k}=e;if(E.is0())throw new Error("bad point: ZERO");const{ex:R,ey:G,ez:z,et:Y}=E,K=l(R*R),H=l(G*G),se=l(z*z),ae=l(se*se),xe=l(K*x),fe=l(se*l(xe+H)),ce=l(ae+l(k*l(K*H)));if(fe!==ce)throw new Error("bad point: equation left != right (1)");const be=l(R*G),$e=l(z*Y);if(be!==$e)throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(x,k,R,G){this.ex=x,this.ey=k,this.ez=R,this.et=G,y("x",x),y("y",k),y("z",R),y("t",G),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(x){if(x instanceof b)throw new Error("extended point not allowed");const{x:k,y:R}=x||{};return y("x",k),y("y",R),new b(k,R,Ge,l(k*R))}static normalizeZ(x){const k=r.invertBatch(x.map(R=>R.ez));return x.map((R,G)=>R.toAffine(k[G])).map(b.fromAffine)}static msm(x,k){return mu(b,f,x,k)}_setWindowSize(x){T.setWindowSize(this,x)}assertValidity(){S(this)}equals(x){p(x);const{ex:k,ey:R,ez:G}=this,{ex:z,ey:Y,ez:K}=x,H=l(k*K),se=l(z*G),ae=l(R*K),xe=l(Y*G);return H===se&&ae===xe}is0(){return this.equals(b.ZERO)}negate(){return new b(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:x}=e,{ex:k,ey:R,ez:G}=this,z=l(k*k),Y=l(R*R),K=l(rs*l(G*G)),H=l(x*z),se=k+R,ae=l(l(se*se)-z-Y),xe=H+Y,fe=xe-K,ce=H-Y,be=l(ae*fe),$e=l(xe*ce),Fe=l(ae*ce),xt=l(fe*xe);return new b(be,$e,xt,Fe)}add(x){p(x);const{a:k,d:R}=e,{ex:G,ey:z,ez:Y,et:K}=this,{ex:H,ey:se,ez:ae,et:xe}=x;if(k===BigInt(-1)){const ba=l((z-G)*(se+H)),xa=l((z+G)*(se-H)),pi=l(xa-ba);if(pi===dt)return this.double();const va=l(Y*rs*xe),Ea=l(K*rs*ae),Sa=Ea+va,Ba=xa+ba,Aa=Ea-va,Vh=l(Sa*pi),Mh=l(Ba*Aa),Hh=l(Sa*Aa),jh=l(pi*Ba);return new b(Vh,Mh,jh,Hh)}const fe=l(G*H),ce=l(z*se),be=l(K*R*xe),$e=l(Y*ae),Fe=l((G+z)*(H+se)-fe-ce),xt=$e-be,Jt=$e+be,Ut=l(ce-k*fe),Oh=l(Fe*xt),Rh=l(Jt*Ut),Lh=l(Fe*Ut),Fh=l(xt*Jt);return new b(Oh,Rh,Fh,Lh)}subtract(x){return this.add(x.negate())}wNAF(x){return T.wNAFCached(this,x,b.normalizeZ)}multiply(x){const k=x;lt("scalar",k,Ge,n);const{p:R,f:G}=this.wNAF(k);return b.normalizeZ([R,G])[0]}multiplyUnsafe(x,k=b.ZERO){const R=x;return lt("scalar",R,dt,n),R===dt?O:this.is0()||R===Ge?this:T.wNAFCachedUnsafe(this,R,b.normalizeZ,k)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return T.unsafeLadder(this,n).is0()}toAffine(x){return v(this,x)}clearCofactor(){const{h:x}=e;return x===Ge?this:this.multiplyUnsafe(x)}static fromHex(x,k=!1){const{d:R,a:G}=e,z=r.BYTES;x=Ee("pointHex",x,z),Vt("zip215",k);const Y=x.slice(),K=x[z-1];Y[z-1]=K&-129;const H=zr(Y),se=k?u:r.ORDER;lt("pointHex.y",H,dt,se);const ae=l(H*H),xe=l(ae-Ge),fe=l(R*ae-G);let{isValid:ce,value:be}=h(xe,fe);if(!ce)throw new Error("Point.fromHex: invalid y coordinate");const $e=(be&Ge)===Ge,Fe=(K&128)!==0;if(!k&&be===dt&&Fe)throw new Error("Point.fromHex: x=0 and x_0=1");return Fe!==$e&&(be=l(-be)),b.fromAffine({x:be,y:H})}static fromPrivateKey(x){return I(x).point}toRawBytes(){const{x,y:k}=this.toAffine(),R=Vn(k,r.BYTES);return R[R.length-1]|=x&Ge?128:0,R}toHex(){return Er(this.toRawBytes())}}b.BASE=new b(e.Gx,e.Gy,Ge,l(e.Gx*e.Gy)),b.ZERO=new b(dt,Ge,Ge,dt);const{BASE:B,ZERO:O}=b,T=yu(b,a*8);function _(E){return de(E,n)}function $(E){return _(zr(E))}function I(E){const x=r.BYTES;E=Ee("private key",E,x);const k=Ee("hashed private key",i(E),2*x),R=m(k.slice(0,x)),G=k.slice(x,2*x),z=$(R),Y=B.multiply(z),K=Y.toRawBytes();return{head:R,prefix:G,scalar:z,point:Y,pointBytes:K}}function M(E){return I(E).pointBytes}function L(E=new Uint8Array,...x){const k=Sr(...x);return $(i(w(k,Ee("context",E),!!s)))}function V(E,x,k={}){E=Ee("message",E),s&&(E=s(E));const{prefix:R,scalar:G,pointBytes:z}=I(x),Y=L(k.context,R,E),K=B.multiply(Y).toRawBytes(),H=L(k.context,K,z,E),se=_(Y+H*G);lt("signature.s",se,dt,n);const ae=Sr(K,Vn(se,r.BYTES));return Ee("result",ae,r.BYTES*2)}const X=Ym;function A(E,x,k,R=X){const{context:G,zip215:z}=R,Y=r.BYTES;E=Ee("signature",E,2*Y),x=Ee("message",x),k=Ee("publicKey",k,Y),z!==void 0&&Vt("zip215",z),s&&(x=s(x));const K=zr(E.slice(Y,2*Y));let H,se,ae;try{H=b.fromHex(k,z),se=b.fromHex(E.slice(0,Y),z),ae=B.multiplyUnsafe(K)}catch{return!1}if(!z&&H.isSmallOrder())return!1;const xe=L(G,se.toRawBytes(),H.toRawBytes(),x);return se.add(H.multiplyUnsafe(xe)).subtract(ae).clearCofactor().equals(b.ZERO)}return B._setWindowSize(8),{CURVE:e,getPublicKey:M,sign:V,verify:A,ExtendedPoint:b,utils:{getExtendedPublicKey:I,randomPrivateKey:()=>o(r.BYTES),precompute(E=8,x=b.BASE){return x._setWindowSize(E),x.multiply(BigInt(3)),x}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yo=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),oc=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const tb=BigInt(1),ac=BigInt(2);BigInt(3);const rb=BigInt(5),nb=BigInt(8);function sb(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=Yo,a=t*t%i*t%i,c=ye(a,ac,i)*a%i,u=ye(c,tb,i)*t%i,l=ye(u,rb,i)*u%i,f=ye(l,e,i)*l%i,h=ye(f,r,i)*f%i,m=ye(h,n,i)*h%i,w=ye(m,s,i)*m%i,y=ye(w,s,i)*m%i,p=ye(y,e,i)*l%i;return{pow_p_5_8:ye(p,ac,i)*t%i,b2:a}}function ib(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function ob(t,e){const r=Yo,n=de(e*e*e,r),s=de(n*n*e,r),i=sb(t*s).pow_p_5_8;let o=de(t*n*i,r);const a=de(e*o*o,r),c=o,u=de(o*oc,r),l=a===t,f=a===de(-t,r),h=a===de(-t*oc,r);return l&&(o=c),(f||h)&&(o=u),jm(o,r)&&(o=de(-o,r)),{isValid:l||f,value:o}}const ab=li(Yo,void 0,!0),cb={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:ab,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:nb,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Cm,randomBytes:au,adjustScalarBytes:ib,uvRatio:ob},lb=eb(cb),bu=32;function ub(t,e,r){return lb.verify(e,r instanceof Uint8Array?r:r.subarray(),t)}class fb{constructor(e){g(this,"type","Ed25519");g(this,"raw");this.raw=vu(e,bu)}toMultihash(){return br.digest(Qf(this))}toCID(){return J.createV1(114,this.toMultihash())}toString(){return _e.encode(this.toMultihash().bytes).substring(1)}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:Wr(this.raw,e.raw)}verify(e,r){return ub(this.raw,r,e)}}function xu(t){return t=vu(t,bu),new fb(t)}function vu(t,e){if(t=Uint8Array.from(t??[]),t.length!==e)throw new ut(`Key must be a Uint8Array of length ${e}, got ${t.length}`);return t}const Qo=new Float32Array([-0]),sr=new Uint8Array(Qo.buffer);function hb(t,e,r){Qo[0]=t,e[r]=sr[0],e[r+1]=sr[1],e[r+2]=sr[2],e[r+3]=sr[3]}function db(t,e){return sr[0]=t[e],sr[1]=t[e+1],sr[2]=t[e+2],sr[3]=t[e+3],Qo[0]}const ea=new Float64Array([-0]),Re=new Uint8Array(ea.buffer);function pb(t,e,r){ea[0]=t,e[r]=Re[0],e[r+1]=Re[1],e[r+2]=Re[2],e[r+3]=Re[3],e[r+4]=Re[4],e[r+5]=Re[5],e[r+6]=Re[6],e[r+7]=Re[7]}function gb(t,e){return Re[0]=t[e],Re[1]=t[e+1],Re[2]=t[e+2],Re[3]=t[e+3],Re[4]=t[e+4],Re[5]=t[e+5],Re[6]=t[e+6],Re[7]=t[e+7],ea[0]}const wb=BigInt(Number.MAX_SAFE_INTEGER),yb=BigInt(Number.MIN_SAFE_INTEGER);class Le{constructor(e,r){g(this,"lo");g(this,"hi");this.lo=e|0,this.hi=r|0}toNumber(e=!1){if(!e&&this.hi>>>31>0){const r=~this.lo+1>>>0;let n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(e=!1){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const r=~this.lo+1>>>0;let n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(e=!1){return this.toBigInt(e).toString()}zzEncode(){const e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){const e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){const e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}static fromBigInt(e){if(e===0n)return mr;if(e<wb&&e>yb)return this.fromNumber(Number(e));const r=e<0n;r&&(e=-e);let n=e>>32n,s=e-(n<<32n);return r&&(n=~n|0n,s=~s|0n,++s>cc&&(s=0n,++n>cc&&(n=0n))),new Le(Number(s),Number(n))}static fromNumber(e){if(e===0)return mr;const r=e<0;r&&(e=-e);let n=e>>>0,s=(e-n)/4294967296>>>0;return r&&(s=~s>>>0,n=~n>>>0,++n>4294967295&&(n=0,++s>4294967295&&(s=0))),new Le(n,s)}static from(e){return typeof e=="number"?Le.fromNumber(e):typeof e=="bigint"?Le.fromBigInt(e):typeof e=="string"?Le.fromBigInt(BigInt(e)):e.low!=null||e.high!=null?new Le(e.low>>>0,e.high>>>0):mr}}const mr=new Le(0,0);mr.toBigInt=function(){return 0n};mr.zzEncode=mr.zzDecode=function(){return this};mr.length=function(){return 1};const cc=4294967296n;function mb(t){let e=0,r=0;for(let n=0;n<t.length;++n)r=t.charCodeAt(n),r<128?e+=1:r<2048?e+=2:(r&64512)===55296&&(t.charCodeAt(n+1)&64512)===56320?(++n,e+=4):e+=3;return e}function bb(t,e,r){if(r-e<1)return"";let s;const i=[];let o=0,a;for(;e<r;)a=t[e++],a<128?i[o++]=a:a>191&&a<224?i[o++]=(a&31)<<6|t[e++]&63:a>239&&a<365?(a=((a&7)<<18|(t[e++]&63)<<12|(t[e++]&63)<<6|t[e++]&63)-65536,i[o++]=55296+(a>>10),i[o++]=56320+(a&1023)):i[o++]=(a&15)<<12|(t[e++]&63)<<6|t[e++]&63,o>8191&&((s??(s=[])).push(String.fromCharCode.apply(String,i)),o=0);return s!=null?(o>0&&s.push(String.fromCharCode.apply(String,i.slice(0,o))),s.join("")):String.fromCharCode.apply(String,i.slice(0,o))}function Eu(t,e,r){const n=r;let s,i;for(let o=0;o<t.length;++o)s=t.charCodeAt(o),s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&((i=t.charCodeAt(o+1))&64512)===56320?(s=65536+((s&1023)<<10)+(i&1023),++o,e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128);return r-n}function pt(t,e){return RangeError(`index out of range: ${t.pos} + ${e??1} > ${t.len}`)}function ns(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}class xb{constructor(e){g(this,"buf");g(this,"pos");g(this,"len");g(this,"_slice",Uint8Array.prototype.subarray);this.buf=e,this.pos=0,this.len=e.length}uint32(){let e=4294967295;if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,pt(this,10);return e}int32(){return this.uint32()|0}sint32(){const e=this.uint32();return e>>>1^-(e&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw pt(this,4);return ns(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw pt(this,4);return ns(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw pt(this,4);const e=db(this.buf,this.pos);return this.pos+=4,e}double(){if(this.pos+8>this.len)throw pt(this,4);const e=gb(this.buf,this.pos);return this.pos+=8,e}bytes(){const e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw pt(this,e);return this.pos+=e,r===n?new Uint8Array(0):this.buf.subarray(r,n)}string(){const e=this.bytes();return bb(e,0,e.length)}skip(e){if(typeof e=="number"){if(this.pos+e>this.len)throw pt(this,e);this.pos+=e}else do if(this.pos>=this.len)throw pt(this);while(this.buf[this.pos++]&128);return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${e} at offset ${this.pos}`)}return this}readLongVarint(){const e=new Le(0,0);let r=0;if(this.len-this.pos>4){for(;r<4;++r)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw pt(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,e}if(this.len-this.pos>4){for(;r<5;++r)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;r<5;++r){if(this.pos>=this.len)throw pt(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw pt(this,8);const e=ns(this.buf,this.pos+=4),r=ns(this.buf,this.pos+=4);return new Le(e,r)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const e=ll(this.buf,this.pos);return this.pos+=Nt(e),e}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function vb(t){return new xb(t instanceof Uint8Array?t:t.subarray())}function Su(t,e,r){const n=vb(t);return e.decode(n,void 0,r)}function Eb(t){let n,s=8192;return function(o){if(o<1||o>4096)return Jr(o);s+o>8192&&(n=Jr(8192),s=0);const a=n.subarray(s,s+=o);return s&7&&(s=(s|7)+1),a}}class Sn{constructor(e,r,n){g(this,"fn");g(this,"len");g(this,"next");g(this,"val");this.fn=e,this.len=r,this.next=void 0,this.val=n}}function Ti(){}class Sb{constructor(e){g(this,"head");g(this,"tail");g(this,"len");g(this,"next");this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}}const Bb=Eb();function Ab(t){return globalThis.Buffer!=null?Jr(t):Bb(t)}class oo{constructor(){g(this,"len");g(this,"head");g(this,"tail");g(this,"states");this.len=0,this.head=new Sn(Ti,0,0),this.tail=this.head,this.states=null}_push(e,r,n){return this.tail=this.tail.next=new Sn(e,r,n),this.len+=r,this}uint32(e){return this.len+=(this.tail=this.tail.next=new Ib((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this}int32(e){return e<0?this._push(ss,10,Le.fromNumber(e)):this.uint32(e)}sint32(e){return this.uint32((e<<1^e>>31)>>>0)}uint64(e){const r=Le.fromBigInt(e);return this._push(ss,r.length(),r)}uint64Number(e){return this._push(cl,Nt(e),e)}uint64String(e){return this.uint64(BigInt(e))}int64(e){return this.uint64(e)}int64Number(e){return this.uint64Number(e)}int64String(e){return this.uint64String(e)}sint64(e){const r=Le.fromBigInt(e).zzEncode();return this._push(ss,r.length(),r)}sint64Number(e){const r=Le.fromNumber(e).zzEncode();return this._push(ss,r.length(),r)}sint64String(e){return this.sint64(BigInt(e))}bool(e){return this._push(Ui,1,e?1:0)}fixed32(e){return this._push(vn,4,e>>>0)}sfixed32(e){return this.fixed32(e)}fixed64(e){const r=Le.fromBigInt(e);return this._push(vn,4,r.lo)._push(vn,4,r.hi)}fixed64Number(e){const r=Le.fromNumber(e);return this._push(vn,4,r.lo)._push(vn,4,r.hi)}fixed64String(e){return this.fixed64(BigInt(e))}sfixed64(e){return this.fixed64(e)}sfixed64Number(e){return this.fixed64Number(e)}sfixed64String(e){return this.fixed64String(e)}float(e){return this._push(hb,4,e)}double(e){return this._push(pb,8,e)}bytes(e){const r=e.length>>>0;return r===0?this._push(Ui,1,0):this.uint32(r)._push(Cb,r,e)}string(e){const r=mb(e);return r!==0?this.uint32(r)._push(Eu,r,e):this._push(Ui,1,0)}fork(){return this.states=new Sb(this),this.head=this.tail=new Sn(Ti,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Sn(Ti,0,0),this.len=0),this}ldelim(){const e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=e.next,this.tail=r,this.len+=n),this}finish(){let e=this.head.next;const r=Ab(this.len);let n=0;for(;e!=null;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r}}function Ui(t,e,r){e[r]=t&255}function kb(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}class Ib extends Sn{constructor(r,n){super(kb,r,n);g(this,"next");this.next=void 0}}function ss(t,e,r){for(;t.hi!==0;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}function vn(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function Cb(t,e,r){e.set(t,r)}globalThis.Buffer!=null&&(oo.prototype.bytes=function(t){const e=t.length>>>0;return this.uint32(e),e>0&&this._push(_b,e,t),this},oo.prototype.string=function(t){const e=globalThis.Buffer.byteLength(t);return this.uint32(e),e>0&&this._push(Nb,e,t),this});function _b(t,e,r){e.set(t,r)}function Nb(t,e,r){t.length<40?Eu(t,e,r):e.utf8Write!=null?e.utf8Write(t,r):e.set(mt(t),r)}function Tb(){return new oo}function Bu(t,e){const r=Tb();return e.encode(t,r,{lengthDelimited:!1}),r.finish()}var Ls;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})(Ls||(Ls={}));function Au(t,e,r,n){return{name:t,type:e,encode:r,decode:n}}function Ub(t){function e(s){if(t[s.toString()]==null)throw new Error("Invalid enum value");return t[s]}const r=function(i,o){const a=e(i);o.int32(a)},n=function(i){const o=i.int32();return e(o)};return Au("enum",Ls.VARINT,r,n)}function ku(t,e){return Au("message",Ls.LENGTH_DELIMITED,t,e)}var He;(function(t){t.RSA="RSA",t.Ed25519="Ed25519",t.secp256k1="secp256k1"})(He||(He={}));var ao;(function(t){t[t.RSA=0]="RSA",t[t.Ed25519=1]="Ed25519",t[t.secp256k1=2]="secp256k1"})(ao||(ao={}));(function(t){t.codec=()=>Ub(ao)})(He||(He={}));var Qr;(function(t){let e;t.codec=()=>(e==null&&(e=ku((r,n,s={})=>{s.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),He.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),s.lengthDelimited!==!1&&n.ldelim()},(r,n,s={})=>{const i={},o=n==null?r.len:r.pos+n;for(;r.pos<o;){const a=r.uint32();switch(a>>>3){case 1:{i.Type=He.codec().decode(r);break}case 2:{i.Data=r.bytes();break}default:{r.skipType(a&7);break}}}return i})),e),t.encode=r=>Bu(r,t.codec()),t.decode=(r,n)=>Su(r,t.codec(),n)})(Qr||(Qr={}));var lc;(function(t){let e;t.codec=()=>(e==null&&(e=ku((r,n,s={})=>{s.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),He.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),s.lengthDelimited!==!1&&n.ldelim()},(r,n,s={})=>{const i={},o=n==null?r.len:r.pos+n;for(;r.pos<o;){const a=r.uint32();switch(a>>>3){case 1:{i.Type=He.codec().decode(r);break}case 2:{i.Data=r.bytes();break}default:{r.skipType(a&7);break}}}return i})),e),t.encode=r=>Bu(r,t.codec()),t.decode=(r,n)=>Su(r,t.codec(),n)})(lc||(lc={}));const $b=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Yt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Qt=new Uint32Array(64);class Db extends cu{constructor(){super(64,32,8,!1),this.A=Yt[0]|0,this.B=Yt[1]|0,this.C=Yt[2]|0,this.D=Yt[3]|0,this.E=Yt[4]|0,this.F=Yt[5]|0,this.G=Yt[6]|0,this.H=Yt[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let f=0;f<16;f++,r+=4)Qt[f]=e.getUint32(r,!1);for(let f=16;f<64;f++){const h=Qt[f-15],m=Qt[f-2],w=Et(h,7)^Et(h,18)^h>>>3,y=Et(m,17)^Et(m,19)^m>>>10;Qt[f]=y+Qt[f-7]+w+Qt[f-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let f=0;f<64;f++){const h=Et(a,6)^Et(a,11)^Et(a,25),m=l+h+rm(a,c,u)+$b[f]+Qt[f]|0,y=(Et(n,2)^Et(n,13)^Et(n,22))+nm(n,s,i)|0;l=u,u=c,c=a,a=o+m|0,o=i,i=s,s=n,n=m+y|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,c,u,l)}roundClean(){Qt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Iu=ou(()=>new Db);/*!
 * MIT License
 * 
 * Copyright (c) 2017-2024 Peculiar Ventures, LLC
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const Pb="[object ArrayBuffer]";class ue{static isArrayBuffer(e){return Object.prototype.toString.call(e)===Pb}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,r){if(e.constructor===r)return e;if(this.isArrayBuffer(e))return new r(e);if(this.isArrayBufferView(e))return new r(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,r){const n=ue.toUint8Array(e),s=ue.toUint8Array(r);if(n.length!==s.byteLength)return!1;for(let i=0;i<n.length;i++)if(n[i]!==s[i])return!1;return!0}static concat(...e){let r;Array.isArray(e[0])&&!(e[1]instanceof Function)||Array.isArray(e[0])&&e[1]instanceof Function?r=e[0]:e[e.length-1]instanceof Function?r=e.slice(0,e.length-1):r=e;let n=0;for(const o of r)n+=o.byteLength;const s=new Uint8Array(n);let i=0;for(const o of r){const a=this.toUint8Array(o);s.set(a,i),i+=a.length}return e[e.length-1]instanceof Function?this.toView(s,e[e.length-1]):s.buffer}}const $i="string",Ob=/^[0-9a-f\s]+$/i,Rb=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,Lb=/^[a-zA-Z0-9-_]+$/;class uc{static fromString(e){const r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n.buffer}static toString(e){const r=ue.toUint8Array(e);let n="";for(let i=0;i<r.length;i++)n+=String.fromCharCode(r[i]);return decodeURIComponent(escape(n))}}class St{static toString(e,r=!1){const n=ue.toArrayBuffer(e),s=new DataView(n);let i="";for(let o=0;o<n.byteLength;o+=2){const a=s.getUint16(o,r);i+=String.fromCharCode(a)}return i}static fromString(e,r=!1){const n=new ArrayBuffer(e.length*2),s=new DataView(n);for(let i=0;i<e.length;i++)s.setUint16(i*2,e.charCodeAt(i),r);return n}}class me{static isHex(e){return typeof e===$i&&Ob.test(e)}static isBase64(e){return typeof e===$i&&Rb.test(e)}static isBase64Url(e){return typeof e===$i&&Lb.test(e)}static ToString(e,r="utf8"){const n=ue.toUint8Array(e);switch(r.toLowerCase()){case"utf8":return this.ToUtf8String(n);case"binary":return this.ToBinary(n);case"hex":return this.ToHex(n);case"base64":return this.ToBase64(n);case"base64url":return this.ToBase64Url(n);case"utf16le":return St.toString(n,!0);case"utf16":case"utf16be":return St.toString(n);default:throw new Error(`Unknown type of encoding '${r}'`)}}static FromString(e,r="utf8"){if(!e)return new ArrayBuffer(0);switch(r.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return St.fromString(e,!0);case"utf16":case"utf16be":return St.fromString(e);default:throw new Error(`Unknown type of encoding '${r}'`)}}static ToBase64(e){const r=ue.toUint8Array(e);if(typeof btoa<"u"){const n=this.ToString(r,"binary");return btoa(n)}else return Buffer.from(r).toString("base64")}static FromBase64(e){const r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!me.isBase64(r))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(r)):new Uint8Array(Buffer.from(r,"base64")).buffer}static FromBase64Url(e){const r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!me.isBase64Url(r))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(r.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,r=me.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.FromBinary(e);case"utf8":return uc.fromString(e);case"utf16":case"utf16be":return St.fromString(e);case"utf16le":case"usc2":return St.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${r}'`)}}static ToUtf8String(e,r=me.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.ToBinary(e);case"utf8":return uc.toString(e);case"utf16":case"utf16be":return St.toString(e);case"utf16le":case"usc2":return St.toString(e,!0);default:throw new Error(`Unknown type of encoding '${r}'`)}}static FromBinary(e){const r=e.length,n=new Uint8Array(r);for(let s=0;s<r;s++)n[s]=e.charCodeAt(s);return n.buffer}static ToBinary(e){const r=ue.toUint8Array(e);let n="";for(let s=0;s<r.length;s++)n+=String.fromCharCode(r[s]);return n}static ToHex(e){const r=ue.toUint8Array(e);let n="";const s=r.length;for(let i=0;i<s;i++){const o=r[i];o<16&&(n+="0"),n+=o.toString(16)}return n}static FromHex(e){let r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!me.isHex(r))throw new TypeError("Argument 'hexString' is not HEX encoded");r.length%2&&(r=`0${r}`);const n=new Uint8Array(r.length/2);for(let s=0;s<r.length;s=s+2){const i=r.slice(s,s+2);n[s/2]=parseInt(i,16)}return n.buffer}static ToUtf16String(e,r=!1){return St.toString(e,r)}static FromUtf16String(e,r=!1){return St.fromString(e,r)}static Base64Padding(e){const r=4-e.length%4;if(r<4)for(let n=0;n<r;n++)e+="=";return e}static formatString(e){return(e==null?void 0:e.replace(/[\n\r\t ]/g,""))||""}}me.DEFAULT_UTF8_ENCODING="utf8";/*!
 Copyright (c) Peculiar Ventures, LLC
*/function en(t,e){let r=0;if(t.length===1)return t[0];for(let n=t.length-1;n>=0;n--)r+=t[t.length-1-n]*Math.pow(2,e*n);return r}function Br(t,e,r=-1){const n=r;let s=t,i=0,o=Math.pow(2,e);for(let a=1;a<8;a++){if(t<o){let c;if(n<0)c=new ArrayBuffer(a),i=a;else{if(n<a)return new ArrayBuffer(0);c=new ArrayBuffer(n),i=n}const u=new Uint8Array(c);for(let l=a-1;l>=0;l--){const f=Math.pow(2,l*e);u[i-l-1]=Math.floor(s/f),s-=u[i-l-1]*f}return c}o*=Math.pow(2,e)}return new ArrayBuffer(0)}function co(...t){let e=0,r=0;for(const i of t)e+=i.length;const n=new ArrayBuffer(e),s=new Uint8Array(n);for(const i of t)s.set(i,r),r+=i.length;return s}function Cu(){const t=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const a=t[0]===255&&t[1]&128,c=t[0]===0&&(t[1]&128)===0;(a||c)&&this.warnings.push("Needlessly long format")}const e=new ArrayBuffer(this.valueHex.byteLength),r=new Uint8Array(e);for(let a=0;a<this.valueHex.byteLength;a++)r[a]=0;r[0]=t[0]&128;const n=en(r,8),s=new ArrayBuffer(this.valueHex.byteLength),i=new Uint8Array(s);for(let a=0;a<this.valueHex.byteLength;a++)i[a]=t[a];return i[0]&=127,en(i,8)-n}function Fb(t){const e=t<0?t*-1:t;let r=128;for(let n=1;n<8;n++){if(e<=r){if(t<0){const o=r-e,a=Br(o,8,n),c=new Uint8Array(a);return c[0]|=128,a}let s=Br(e,8,n),i=new Uint8Array(s);if(i[0]&128){const o=s.slice(0),a=new Uint8Array(o);s=new ArrayBuffer(s.byteLength+1),i=new Uint8Array(s);for(let c=0;c<o.byteLength;c++)i[c+1]=a[c];i[0]=0}return s}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function Vb(t,e){if(t.byteLength!==e.byteLength)return!1;const r=new Uint8Array(t),n=new Uint8Array(e);for(let s=0;s<r.length;s++)if(r[s]!==n[s])return!1;return!0}function nt(t,e){const r=t.toString(10);if(e<r.length)return"";const n=e-r.length,s=new Array(n);for(let o=0;o<n;o++)s[o]="0";return s.join("").concat(r)}/*!
 * Copyright (c) 2014, GMO GlobalSign
 * Copyright (c) 2015-2022, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */function Fs(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function ta(t){let e=0,r=0;for(let s=0;s<t.length;s++){const i=t[s];e+=i.byteLength}const n=new Uint8Array(e);for(let s=0;s<t.length;s++){const i=t[s];n.set(new Uint8Array(i),r),r+=i.byteLength}return n.buffer}function Gt(t,e,r,n){return e instanceof Uint8Array?e.byteLength?r<0?(t.error="Wrong parameter: inputOffset less than zero",!1):n<0?(t.error="Wrong parameter: inputLength less than zero",!1):e.byteLength-r-n<0?(t.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(t.error="Wrong parameter: inputBuffer has zero length",!1):(t.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class ra{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return ta(this.items)}}const En=[new Uint8Array([1])],fc="0123456789",dn="",bt=new ArrayBuffer(0),na=new Uint8Array(0),Hn="EndOfContent",_u="OCTET STRING",Nu="BIT STRING";function qt(t){var e;return e=class extends t{constructor(...n){var s;super(...n);const i=n[0]||{};this.isHexOnly=(s=i.isHexOnly)!==null&&s!==void 0?s:!1,this.valueHexView=i.valueHex?ue.toUint8Array(i.valueHex):na}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(n){this.valueHexView=new Uint8Array(n)}fromBER(n,s,i){const o=n instanceof ArrayBuffer?new Uint8Array(n):n;if(!Gt(this,o,s,i))return-1;const a=s+i;return this.valueHexView=o.subarray(s,a),this.valueHexView.length?(this.blockLength=i,a):(this.warnings.push("Zero buffer length"),s)}toBER(n=!1){return this.isHexOnly?n?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",bt)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:me.ToHex(this.valueHexView)}}},e.NAME="hexBlock",e}class Ur{constructor({blockLength:e=0,error:r=dn,warnings:n=[],valueBeforeDecode:s=na}={}){this.blockLength=e,this.error=r,this.warnings=n,this.valueBeforeDecodeView=ue.toUint8Array(s)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:me.ToHex(this.valueBeforeDecodeView)}}}Ur.NAME="baseBlock";class Xe extends Ur{fromBER(e,r,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}Xe.NAME="valueBlock";class Tu extends qt(Ur){constructor({idBlock:e={}}={}){var r,n,s,i;super(),e?(this.isHexOnly=(r=e.isHexOnly)!==null&&r!==void 0?r:!1,this.valueHexView=e.valueHex?ue.toUint8Array(e.valueHex):na,this.tagClass=(n=e.tagClass)!==null&&n!==void 0?n:-1,this.tagNumber=(s=e.tagNumber)!==null&&s!==void 0?s:-1,this.isConstructed=(i=e.isConstructed)!==null&&i!==void 0?i:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let r=0;switch(this.tagClass){case 1:r|=0;break;case 2:r|=64;break;case 3:r|=128;break;case 4:r|=192;break;default:return this.error="Unknown tag class",bt}if(this.isConstructed&&(r|=32),this.tagNumber<31&&!this.isHexOnly){const s=new Uint8Array(1);if(!e){let i=this.tagNumber;i&=31,r|=i,s[0]=r}return s.buffer}if(!this.isHexOnly){const s=Br(this.tagNumber,7),i=new Uint8Array(s),o=s.byteLength,a=new Uint8Array(o+1);if(a[0]=r|31,!e){for(let c=0;c<o-1;c++)a[c+1]=i[c]|128;a[o]=i[o-1]}return a.buffer}const n=new Uint8Array(this.valueHexView.byteLength+1);if(n[0]=r|31,!e){const s=this.valueHexView;for(let i=0;i<s.length-1;i++)n[i+1]=s[i]|128;n[this.valueHexView.byteLength]=s[s.length-1]}return n.buffer}fromBER(e,r,n){const s=ue.toUint8Array(e);if(!Gt(this,s,r,n))return-1;const i=s.subarray(r,r+n);if(i.length===0)return this.error="Zero buffer length",-1;switch(i[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(i[0]&32)===32,this.isHexOnly=!1;const a=i[0]&31;if(a!==31)this.tagNumber=a,this.blockLength=1;else{let c=1,u=this.valueHexView=new Uint8Array(255),l=255;for(;i[c]&128;){if(u[c-1]=i[c]&127,c++,c>=i.length)return this.error="End of input reached before message was fully decoded",-1;if(c===l){l+=255;const h=new Uint8Array(l);for(let m=0;m<u.length;m++)h[m]=u[m];u=this.valueHexView=new Uint8Array(l)}}this.blockLength=c+1,u[c-1]=i[c]&127;const f=new Uint8Array(c);for(let h=0;h<c;h++)f[h]=u[h];u=this.valueHexView=new Uint8Array(c),u.set(f),this.blockLength<=9?this.tagNumber=en(u,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return r+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}Tu.NAME="identificationBlock";class Uu extends Ur{constructor({lenBlock:e={}}={}){var r,n,s;super(),this.isIndefiniteForm=(r=e.isIndefiniteForm)!==null&&r!==void 0?r:!1,this.longFormUsed=(n=e.longFormUsed)!==null&&n!==void 0?n:!1,this.length=(s=e.length)!==null&&s!==void 0?s:0}fromBER(e,r,n){const s=ue.toUint8Array(e);if(!Gt(this,s,r,n))return-1;const i=s.subarray(r,r+n);if(i.length===0)return this.error="Zero buffer length",-1;if(i[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=i[0]===128,this.isIndefiniteForm)return this.blockLength=1,r+this.blockLength;if(this.longFormUsed=!!(i[0]&128),this.longFormUsed===!1)return this.length=i[0],this.blockLength=1,r+this.blockLength;const o=i[0]&127;if(o>8)return this.error="Too big integer",-1;if(o+1>i.length)return this.error="End of input reached before message was fully decoded",-1;const a=r+1,c=s.subarray(a,a+o);return c[o-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=en(c,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=o+1,r+this.blockLength}toBER(e=!1){let r,n;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return r=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(r),n[0]=128),r;if(this.longFormUsed){const s=Br(this.length,8);if(s.byteLength>127)return this.error="Too big length",bt;if(r=new ArrayBuffer(s.byteLength+1),e)return r;const i=new Uint8Array(s);n=new Uint8Array(r),n[0]=s.byteLength|128;for(let o=0;o<s.byteLength;o++)n[o+1]=i[o];return r}return r=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(r),n[0]=this.length),r}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}Uu.NAME="lengthBlock";const F={};class je extends Ur{constructor({name:e=dn,optional:r=!1,primitiveSchema:n,...s}={},i){super(s),this.name=e,this.optional=r,n&&(this.primitiveSchema=n),this.idBlock=new Tu(s),this.lenBlock=new Uu(s),this.valueBlock=i?new i(s):new Xe(s)}fromBER(e,r,n){const s=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return s===-1?(this.error=this.valueBlock.error,s):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),s)}toBER(e,r){const n=r||new ra;r||$u(this);const s=this.idBlock.toBER(e);if(n.write(s),this.lenBlock.isIndefiniteForm)n.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,n),n.write(new ArrayBuffer(2));else{const i=this.valueBlock.toBER(e);this.lenBlock.length=i.byteLength;const o=this.lenBlock.toBER(e);n.write(o),n.write(i)}return r?bt:n.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return e==="ascii"?this.onAsciiEncoding():me.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${me.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;const r=this.toBER(),n=e.toBER();return Vb(r,n)}}je.NAME="BaseBlock";function $u(t){if(t instanceof F.Constructed)for(const e of t.valueBlock.value)$u(e)&&(t.lenBlock.isIndefiniteForm=!0);return!!t.lenBlock.isIndefiniteForm}class Du extends je{constructor({value:e=dn,...r}={},n){super(r,n),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,r,n){const s=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return s===-1?(this.error=this.valueBlock.error,s):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),s)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}Du.NAME="BaseStringBlock";class Pu extends qt(Xe){constructor({isHexOnly:e=!0,...r}={}){super(r),this.isHexOnly=e}}Pu.NAME="PrimitiveValueBlock";var Ou;class Ru extends je{constructor(e={}){super(e,Pu),this.idBlock.isConstructed=!1}}Ou=Ru;F.Primitive=Ou;Ru.NAME="PRIMITIVE";function Mb(t,e){if(t instanceof e)return t;const r=new e;return r.idBlock=t.idBlock,r.lenBlock=t.lenBlock,r.warnings=t.warnings,r.valueBeforeDecodeView=t.valueBeforeDecodeView,r}function ui(t,e=0,r=t.length){const n=e;let s=new je({},Xe);const i=new Ur;if(!Gt(i,t,e,r))return s.error=i.error,{offset:-1,result:s};if(!t.subarray(e,e+r).length)return s.error="Zero buffer length",{offset:-1,result:s};let a=s.idBlock.fromBER(t,e,r);if(s.idBlock.warnings.length&&s.warnings.concat(s.idBlock.warnings),a===-1)return s.error=s.idBlock.error,{offset:-1,result:s};if(e=a,r-=s.idBlock.blockLength,a=s.lenBlock.fromBER(t,e,r),s.lenBlock.warnings.length&&s.warnings.concat(s.lenBlock.warnings),a===-1)return s.error=s.lenBlock.error,{offset:-1,result:s};if(e=a,r-=s.lenBlock.blockLength,!s.idBlock.isConstructed&&s.lenBlock.isIndefiniteForm)return s.error="Indefinite length form used for primitive encoding form",{offset:-1,result:s};let c=je;switch(s.idBlock.tagClass){case 1:if(s.idBlock.tagNumber>=37&&s.idBlock.isHexOnly===!1)return s.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:s};switch(s.idBlock.tagNumber){case 0:if(s.idBlock.isConstructed&&s.lenBlock.length>0)return s.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:s};c=F.EndOfContent;break;case 1:c=F.Boolean;break;case 2:c=F.Integer;break;case 3:c=F.BitString;break;case 4:c=F.OctetString;break;case 5:c=F.Null;break;case 6:c=F.ObjectIdentifier;break;case 10:c=F.Enumerated;break;case 12:c=F.Utf8String;break;case 13:c=F.RelativeObjectIdentifier;break;case 14:c=F.TIME;break;case 15:return s.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:s};case 16:c=F.Sequence;break;case 17:c=F.Set;break;case 18:c=F.NumericString;break;case 19:c=F.PrintableString;break;case 20:c=F.TeletexString;break;case 21:c=F.VideotexString;break;case 22:c=F.IA5String;break;case 23:c=F.UTCTime;break;case 24:c=F.GeneralizedTime;break;case 25:c=F.GraphicString;break;case 26:c=F.VisibleString;break;case 27:c=F.GeneralString;break;case 28:c=F.UniversalString;break;case 29:c=F.CharacterString;break;case 30:c=F.BmpString;break;case 31:c=F.DATE;break;case 32:c=F.TimeOfDay;break;case 33:c=F.DateTime;break;case 34:c=F.Duration;break;default:{const u=s.idBlock.isConstructed?new F.Constructed:new F.Primitive;u.idBlock=s.idBlock,u.lenBlock=s.lenBlock,u.warnings=s.warnings,s=u}}break;case 2:case 3:case 4:default:c=s.idBlock.isConstructed?F.Constructed:F.Primitive}return s=Mb(s,c),a=s.fromBER(t,e,s.lenBlock.isIndefiniteForm?r:s.lenBlock.length),s.valueBeforeDecodeView=t.subarray(n,n+s.blockLength),{offset:a,result:s}}function Hb(t){if(!t.byteLength){const e=new je({},Xe);return e.error="Input buffer has zero length",{offset:-1,result:e}}return ui(ue.toUint8Array(t).slice(),0,t.byteLength)}function jb(t,e){return t?1:e}class ar extends Xe{constructor({value:e=[],isIndefiniteForm:r=!1,...n}={}){super(n),this.value=e,this.isIndefiniteForm=r}fromBER(e,r,n){const s=ue.toUint8Array(e);if(!Gt(this,s,r,n))return-1;if(this.valueBeforeDecodeView=s.subarray(r,r+n),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),r;let i=r;for(;jb(this.isIndefiniteForm,n)>0;){const o=ui(s,i,n);if(o.offset===-1)return this.error=o.result.error,this.warnings.concat(o.result.warnings),-1;if(i=o.offset,this.blockLength+=o.result.blockLength,n-=o.result.blockLength,this.value.push(o.result),this.isIndefiniteForm&&o.result.constructor.NAME===Hn)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===Hn?this.value.pop():this.warnings.push("No EndOfContent block encoded")),i}toBER(e,r){const n=r||new ra;for(let s=0;s<this.value.length;s++)this.value[s].toBER(e,n);return r?bt:n.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const r of this.value)e.value.push(r.toJSON());return e}}ar.NAME="ConstructedValueBlock";var Lu;class pn extends je{constructor(e={}){super(e,ar),this.idBlock.isConstructed=!0}fromBER(e,r,n){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const s=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return s===-1?(this.error=this.valueBlock.error,s):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),s)}onAsciiEncoding(){const e=[];for(const n of this.valueBlock.value)e.push(n.toString("ascii").split(`
`).map(s=>`  ${s}`).join(`
`));const r=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${r} :
${e.join(`
`)}`:`${r} :`}}Lu=pn;F.Constructed=Lu;pn.NAME="CONSTRUCTED";class Fu extends Xe{fromBER(e,r,n){return r}toBER(e){return bt}}Fu.override="EndOfContentValueBlock";var Vu;class Mu extends je{constructor(e={}){super(e,Fu),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}Vu=Mu;F.EndOfContent=Vu;Mu.NAME=Hn;var Hu;class sa extends je{constructor(e={}){super(e,Xe),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,r,n){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=n,r+n>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):r+n}toBER(e,r){const n=new ArrayBuffer(2);if(!e){const s=new Uint8Array(n);s[0]=5,s[1]=0}return r&&r.write(n),n}onAsciiEncoding(){return`${this.constructor.NAME}`}}Hu=sa;F.Null=Hu;sa.NAME="NULL";class ju extends qt(Xe){constructor({value:e,...r}={}){super(r),r.valueHex?this.valueHexView=ue.toUint8Array(r.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,r,n){const s=ue.toUint8Array(e);return Gt(this,s,r,n)?(this.valueHexView=s.subarray(r,r+n),n>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,Cu.call(this),this.blockLength=n,r+n):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}ju.NAME="BooleanValueBlock";var zu;let Gu=class extends je{constructor(e={}){super(e,ju),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};zu=Gu;F.Boolean=zu;Gu.NAME="BOOLEAN";class qu extends qt(ar){constructor({isConstructed:e=!1,...r}={}){super(r),this.isConstructed=e}fromBER(e,r,n){let s=0;if(this.isConstructed){if(this.isHexOnly=!1,s=ar.prototype.fromBER.call(this,e,r,n),s===-1)return s;for(let i=0;i<this.value.length;i++){const o=this.value[i].constructor.NAME;if(o===Hn){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(o!==_u)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,s=super.fromBER(e,r,n),this.blockLength=n;return s}toBER(e,r){return this.isConstructed?ar.prototype.toBER.call(this,e,r):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}qu.NAME="OctetStringValueBlock";var Wu;class fi extends je{constructor({idBlock:e={},lenBlock:r={},...n}={}){var s,i;(s=n.isConstructed)!==null&&s!==void 0||(n.isConstructed=!!(!((i=n.value)===null||i===void 0)&&i.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...r,isIndefiniteForm:!!n.isIndefiniteForm},...n},qu),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,r,n){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,n===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),r;if(!this.valueBlock.isConstructed){const i=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(r,r+n);try{if(i.byteLength){const o=ui(i,0,i.byteLength);o.offset!==-1&&o.offset===n&&(this.valueBlock.value=[o.result])}}catch{}}return super.fromBER(e,r,n)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?pn.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${me.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const e=[];for(const r of this.valueBlock.value)r instanceof fi&&e.push(r.valueBlock.valueHexView);return ue.concat(e)}}Wu=fi;F.OctetString=Wu;fi.NAME=_u;class Ju extends qt(ar){constructor({unusedBits:e=0,isConstructed:r=!1,...n}={}){super(n),this.unusedBits=e,this.isConstructed=r,this.blockLength=this.valueHexView.byteLength}fromBER(e,r,n){if(!n)return r;let s=-1;if(this.isConstructed){if(s=ar.prototype.fromBER.call(this,e,r,n),s===-1)return s;for(const a of this.value){const c=a.constructor.NAME;if(c===Hn){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(c!==Nu)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const u=a.valueBlock;if(this.unusedBits>0&&u.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=u.unusedBits}return s}const i=ue.toUint8Array(e);if(!Gt(this,i,r,n))return-1;const o=i.subarray(r,r+n);if(this.unusedBits=o[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const a=o.subarray(1);try{if(a.byteLength){const c=ui(a,0,a.byteLength);c.offset!==-1&&c.offset===n-1&&(this.value=[c.result])}}catch{}}return this.valueHexView=o.subarray(1),this.blockLength=o.length,r+n}toBER(e,r){if(this.isConstructed)return ar.prototype.toBER.call(this,e,r);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return bt;const n=new Uint8Array(this.valueHexView.length+1);return n[0]=this.unusedBits,n.set(this.valueHexView,1),n.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}Ju.NAME="BitStringValueBlock";var Zu;class ia extends je{constructor({idBlock:e={},lenBlock:r={},...n}={}){var s,i;(s=n.isConstructed)!==null&&s!==void 0||(n.isConstructed=!!(!((i=n.value)===null||i===void 0)&&i.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...r,isIndefiniteForm:!!n.isIndefiniteForm},...n},Ju),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,r,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,r,n)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return pn.prototype.onAsciiEncoding.call(this);{const e=[],r=this.valueBlock.valueHexView;for(const s of r)e.push(s.toString(2).padStart(8,"0"));const n=e.join("");return`${this.constructor.NAME} : ${n.substring(0,n.length-this.valueBlock.unusedBits)}`}}}Zu=ia;F.BitString=Zu;ia.NAME=Nu;var Ku;function zb(t,e){const r=new Uint8Array([0]),n=new Uint8Array(t),s=new Uint8Array(e);let i=n.slice(0);const o=i.length-1,a=s.slice(0),c=a.length-1;let u=0;const l=c<o?o:c;let f=0;for(let h=l;h>=0;h--,f++){switch(!0){case f<a.length:u=i[o-f]+a[c-f]+r[0];break;default:u=i[o-f]+r[0]}switch(r[0]=u/10,!0){case f>=i.length:i=co(new Uint8Array([u%10]),i);break;default:i[o-f]=u%10}}return r[0]>0&&(i=co(r,i)),i}function hc(t){if(t>=En.length)for(let e=En.length;e<=t;e++){const r=new Uint8Array([0]);let n=En[e-1].slice(0);for(let s=n.length-1;s>=0;s--){const i=new Uint8Array([(n[s]<<1)+r[0]]);r[0]=i[0]/10,n[s]=i[0]%10}r[0]>0&&(n=co(r,n)),En.push(n)}return En[t]}function Gb(t,e){let r=0;const n=new Uint8Array(t),s=new Uint8Array(e),i=n.slice(0),o=i.length-1,a=s.slice(0),c=a.length-1;let u,l=0;for(let f=c;f>=0;f--,l++)switch(u=i[o-l]-a[c-l]-r,!0){case u<0:r=1,i[o-l]=u+10;break;default:r=0,i[o-l]=u}if(r>0)for(let f=o-c+1;f>=0;f--,l++)if(u=i[o-l]-r,u<0)r=1,i[o-l]=u+10;else{r=0,i[o-l]=u;break}return i.slice()}class oa extends qt(Xe){constructor({value:e,...r}={}){super(r),this._valueDec=0,r.valueHex&&this.setValueHex(),e!==void 0&&(this.valueDec=e)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=Cu.call(this)))}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(Fb(e))}get valueDec(){return this._valueDec}fromDER(e,r,n,s=0){const i=this.fromBER(e,r,n);if(i===-1)return i;const o=this.valueHexView;return o[0]===0&&o[1]&128?this.valueHexView=o.subarray(1):s!==0&&o.length<s&&(s-o.length>1&&(s=o.length+1),this.valueHexView=o.subarray(s-o.length)),i}toDER(e=!1){const r=this.valueHexView;switch(!0){case(r[0]&128)!==0:{const n=new Uint8Array(this.valueHexView.length+1);n[0]=0,n.set(r,1),this.valueHexView=n}break;case(r[0]===0&&(r[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(e)}fromBER(e,r,n){const s=super.fromBER(e,r,n);return s===-1||this.setValueHex(),s}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=this.valueHexView.length*8-1;let r=new Uint8Array(this.valueHexView.length*8/3),n=0,s;const i=this.valueHexView;let o="",a=!1;for(let c=i.byteLength-1;c>=0;c--){s=i[c];for(let u=0;u<8;u++){if((s&1)===1)switch(n){case e:r=Gb(hc(n),r),o="-";break;default:r=zb(r,hc(n))}n++,s>>=1}}for(let c=0;c<r.length;c++)r[c]&&(a=!0),a&&(o+=fc.charAt(r[c]));return a===!1&&(o+=fc.charAt(0)),o}}Ku=oa;oa.NAME="IntegerValueBlock";Object.defineProperty(Ku.prototype,"valueHex",{set:function(t){this.valueHexView=new Uint8Array(t),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});var Xu;class Mt extends je{constructor(e={}){super(e,oa),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return Fs(),BigInt(this.valueBlock.toString())}static fromBigInt(e){Fs();const r=BigInt(e),n=new ra,s=r.toString(16).replace(/^-/,""),i=new Uint8Array(me.FromHex(s));if(r<0){const a=new Uint8Array(i.length+(i[0]&128?1:0));a[0]|=128;const u=BigInt(`0x${me.ToHex(a)}`)+r,l=ue.toUint8Array(me.FromHex(u.toString(16)));l[0]|=128,n.write(l)}else i[0]&128&&n.write(new Uint8Array([0])),n.write(i);return new Mt({valueHex:n.final()})}convertToDER(){const e=new Mt({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new Mt({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}Xu=Mt;F.Integer=Xu;Mt.NAME="INTEGER";var Yu;class Qu extends Mt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}Yu=Qu;F.Enumerated=Yu;Qu.NAME="ENUMERATED";class lo extends qt(Xe){constructor({valueDec:e=-1,isFirstSid:r=!1,...n}={}){super(n),this.valueDec=e,this.isFirstSid=r}fromBER(e,r,n){if(!n)return r;const s=ue.toUint8Array(e);if(!Gt(this,s,r,n))return-1;const i=s.subarray(r,r+n);this.valueHexView=new Uint8Array(n);for(let a=0;a<n&&(this.valueHexView[a]=i[a]&127,this.blockLength++,!!(i[a]&128));a++);const o=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength;a++)o[a]=this.valueHexView[a];return this.valueHexView=o,i[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=en(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}set valueBigInt(e){Fs();let r=BigInt(e).toString(2);for(;r.length%7;)r="0"+r;const n=new Uint8Array(r.length/7);for(let s=0;s<n.length;s++)n[s]=parseInt(r.slice(s*7,s*7+7),2)+(s+1<n.length?128:0);this.fromBER(n.buffer,0,n.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const s=this.valueHexView,i=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength-1;o++)i[o]=s[o]|128;return i[this.blockLength-1]=s[this.blockLength-1],i.buffer}const r=Br(this.valueDec,7);if(r.byteLength===0)return this.error="Error during encoding SID value",bt;const n=new Uint8Array(r.byteLength);if(!e){const s=new Uint8Array(r),i=r.byteLength-1;for(let o=0;o<i;o++)n[o]=s[o]|128;n[i]=s[i]}return n}toString(){let e="";if(this.isHexOnly)e=me.ToHex(this.valueHexView);else if(this.isFirstSid){let r=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",r-=40):(e="2.",r-=80),e+=r.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}lo.NAME="sidBlock";class ef extends Xe{constructor({value:e=dn,...r}={}){super(r),this.value=[],e&&this.fromString(e)}fromBER(e,r,n){let s=r;for(;n>0;){const i=new lo;if(s=i.fromBER(e,s,n),s===-1)return this.blockLength=0,this.error=i.error,s;this.value.length===0&&(i.isFirstSid=!0),this.blockLength+=i.blockLength,n-=i.blockLength,this.value.push(i)}return s}toBER(e){const r=[];for(let n=0;n<this.value.length;n++){const s=this.value[n].toBER(e);if(s.byteLength===0)return this.error=this.value[n].error,bt;r.push(s)}return ta(r)}fromString(e){this.value=[];let r=0,n=0,s="",i=!1;do if(n=e.indexOf(".",r),n===-1?s=e.substring(r):s=e.substring(r,n),r=n+1,i){const o=this.value[0];let a=0;switch(o.valueDec){case 0:break;case 1:a=40;break;case 2:a=80;break;default:this.value=[];return}const c=parseInt(s,10);if(isNaN(c))return;o.valueDec=c+a,i=!1}else{const o=new lo;if(s>Number.MAX_SAFE_INTEGER){Fs();const a=BigInt(s);o.valueBigInt=a}else if(o.valueDec=parseInt(s,10),isNaN(o.valueDec))return;this.value.length||(o.isFirstSid=!0,i=!0),this.value.push(o)}while(n!==-1)}toString(){let e="",r=!1;for(let n=0;n<this.value.length;n++){r=this.value[n].isHexOnly;let s=this.value[n].toString();n!==0&&(e=`${e}.`),r?(s=`{${s}}`,this.value[n].isFirstSid?e=`2.{${s} - 80}`:e+=s):e+=s}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}}ef.NAME="ObjectIdentifierValueBlock";var tf;class aa extends je{constructor(e={}){super(e,ef),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}tf=aa;F.ObjectIdentifier=tf;aa.NAME="OBJECT IDENTIFIER";class uo extends qt(Ur){constructor({valueDec:e=0,...r}={}){super(r),this.valueDec=e}fromBER(e,r,n){if(n===0)return r;const s=ue.toUint8Array(e);if(!Gt(this,s,r,n))return-1;const i=s.subarray(r,r+n);this.valueHexView=new Uint8Array(n);for(let a=0;a<n&&(this.valueHexView[a]=i[a]&127,this.blockLength++,!!(i[a]&128));a++);const o=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength;a++)o[a]=this.valueHexView[a];return this.valueHexView=o,i[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=en(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const s=this.valueHexView,i=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength-1;o++)i[o]=s[o]|128;return i[this.blockLength-1]=s[this.blockLength-1],i.buffer}const r=Br(this.valueDec,7);if(r.byteLength===0)return this.error="Error during encoding SID value",bt;const n=new Uint8Array(r.byteLength);if(!e){const s=new Uint8Array(r),i=r.byteLength-1;for(let o=0;o<i;o++)n[o]=s[o]|128;n[i]=s[i]}return n.buffer}toString(){let e="";return this.isHexOnly?e=me.ToHex(this.valueHexView):e=this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}uo.NAME="relativeSidBlock";class rf extends Xe{constructor({value:e=dn,...r}={}){super(r),this.value=[],e&&this.fromString(e)}fromBER(e,r,n){let s=r;for(;n>0;){const i=new uo;if(s=i.fromBER(e,s,n),s===-1)return this.blockLength=0,this.error=i.error,s;this.blockLength+=i.blockLength,n-=i.blockLength,this.value.push(i)}return s}toBER(e,r){const n=[];for(let s=0;s<this.value.length;s++){const i=this.value[s].toBER(e);if(i.byteLength===0)return this.error=this.value[s].error,bt;n.push(i)}return ta(n)}fromString(e){this.value=[];let r=0,n=0,s="";do{n=e.indexOf(".",r),n===-1?s=e.substring(r):s=e.substring(r,n),r=n+1;const i=new uo;if(i.valueDec=parseInt(s,10),isNaN(i.valueDec))return!0;this.value.push(i)}while(n!==-1);return!0}toString(){let e="",r=!1;for(let n=0;n<this.value.length;n++){r=this.value[n].isHexOnly;let s=this.value[n].toString();n!==0&&(e=`${e}.`),r&&(s=`{${s}}`),e+=s}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}}rf.NAME="RelativeObjectIdentifierValueBlock";var nf;class sf extends je{constructor(e={}){super(e,rf),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}nf=sf;F.RelativeObjectIdentifier=nf;sf.NAME="RelativeObjectIdentifier";var of;class _n extends pn{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}of=_n;F.Sequence=of;_n.NAME="SEQUENCE";var af;class cf extends pn{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}}af=cf;F.Set=af;cf.NAME="SET";class lf extends qt(Xe){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=dn}toJSON(){return{...super.toJSON(),value:this.value}}}lf.NAME="StringValueBlock";class uf extends lf{}uf.NAME="SimpleStringValueBlock";class ot extends Du{constructor({...e}={}){super(e,uf)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,ue.toUint8Array(e))}fromString(e){const r=e.length,n=this.valueBlock.valueHexView=new Uint8Array(r);for(let s=0;s<r;s++)n[s]=e.charCodeAt(s);this.valueBlock.value=e}}ot.NAME="SIMPLE STRING";class ff extends ot{fromBuffer(e){this.valueBlock.valueHexView=ue.toUint8Array(e);try{this.valueBlock.value=me.ToUtf8String(e)}catch(r){this.warnings.push(`Error during "decodeURIComponent": ${r}, using raw string`),this.valueBlock.value=me.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(me.FromUtf8String(e)),this.valueBlock.value=e}}ff.NAME="Utf8StringValueBlock";var hf;class $r extends ff{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}hf=$r;F.Utf8String=hf;$r.NAME="UTF8String";class df extends ot{fromBuffer(e){this.valueBlock.value=me.ToUtf16String(e),this.valueBlock.valueHexView=ue.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(me.FromUtf16String(e))}}df.NAME="BmpStringValueBlock";var pf;class gf extends df{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}pf=gf;F.BmpString=pf;gf.NAME="BMPString";class wf extends ot{fromBuffer(e){const r=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),n=new Uint8Array(r);for(let s=0;s<n.length;s+=4)n[s]=n[s+3],n[s+1]=n[s+2],n[s+2]=0,n[s+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(r))}fromString(e){const r=e.length,n=this.valueBlock.valueHexView=new Uint8Array(r*4);for(let s=0;s<r;s++){const i=Br(e.charCodeAt(s),8),o=new Uint8Array(i);if(o.length>4)continue;const a=4-o.length;for(let c=o.length-1;c>=0;c--)n[s*4+c+a]=o[c]}this.valueBlock.value=e}}wf.NAME="UniversalStringValueBlock";var yf;class mf extends wf{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}yf=mf;F.UniversalString=yf;mf.NAME="UniversalString";var bf;class xf extends ot{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}bf=xf;F.NumericString=bf;xf.NAME="NumericString";var vf;class Ef extends ot{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}vf=Ef;F.PrintableString=vf;Ef.NAME="PrintableString";var Sf;class Bf extends ot{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}Sf=Bf;F.TeletexString=Sf;Bf.NAME="TeletexString";var Af;class kf extends ot{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}Af=kf;F.VideotexString=Af;kf.NAME="VideotexString";var If;class Cf extends ot{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}If=Cf;F.IA5String=If;Cf.NAME="IA5String";var _f;class Nf extends ot{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}_f=Nf;F.GraphicString=_f;Nf.NAME="GraphicString";var Tf;class ca extends ot{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}Tf=ca;F.VisibleString=Tf;ca.NAME="VisibleString";var Uf;class $f extends ot{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}Uf=$f;F.GeneralString=Uf;$f.NAME="GeneralString";var Df;class Pf extends ot{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}Df=Pf;F.CharacterString=Df;Pf.NAME="CharacterString";var Of;class la extends ca{constructor({value:e,valueDate:r,...n}={}){if(super(n),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let s=0;s<e.length;s++)this.valueBlock.valueHexView[s]=e.charCodeAt(s)}r&&(this.fromDate(r),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,ue.toUint8Array(e)))}toBuffer(){const e=this.toString(),r=new ArrayBuffer(e.length),n=new Uint8Array(r);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return r}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const n=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(n===null){this.error="Wrong input string for conversion";return}const s=parseInt(n[1],10);s>=50?this.year=1900+s:this.year=2e3+s,this.month=parseInt(n[2],10),this.day=parseInt(n[3],10),this.hour=parseInt(n[4],10),this.minute=parseInt(n[5],10),this.second=parseInt(n[6],10)}toString(e="iso"){if(e==="iso"){const r=new Array(7);return r[0]=nt(this.year<2e3?this.year-1900:this.year-2e3,2),r[1]=nt(this.month,2),r[2]=nt(this.day,2),r[3]=nt(this.hour,2),r[4]=nt(this.minute,2),r[5]=nt(this.second,2),r[6]="Z",r.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}Of=la;F.UTCTime=Of;la.NAME="UTCTime";var Rf;class Lf extends la{constructor(e={}){var r;super(e),(r=this.millisecond)!==null&&r!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let r=!1,n="",s="",i=0,o,a=0,c=0;if(e[e.length-1]==="Z")n=e.substring(0,e.length-1),r=!0;else{const f=new Number(e[e.length-1]);if(isNaN(f.valueOf()))throw new Error("Wrong input string for conversion");n=e}if(r){if(n.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(n.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let f=1,h=n.indexOf("+"),m="";if(h===-1&&(h=n.indexOf("-"),f=-1),h!==-1){if(m=n.substring(h+1),n=n.substring(0,h),m.length!==2&&m.length!==4)throw new Error("Wrong input string for conversion");let w=parseInt(m.substring(0,2),10);if(isNaN(w.valueOf()))throw new Error("Wrong input string for conversion");if(a=f*w,m.length===4){if(w=parseInt(m.substring(2,4),10),isNaN(w.valueOf()))throw new Error("Wrong input string for conversion");c=f*w}}}let u=n.indexOf(".");if(u===-1&&(u=n.indexOf(",")),u!==-1){const f=new Number(`0${n.substring(u)}`);if(isNaN(f.valueOf()))throw new Error("Wrong input string for conversion");i=f.valueOf(),s=n.substring(0,u)}else s=n;switch(!0){case s.length===8:if(o=/(\d{4})(\d{2})(\d{2})/ig,u!==-1)throw new Error("Wrong input string for conversion");break;case s.length===10:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,u!==-1){let f=60*i;this.minute=Math.floor(f),f=60*(f-this.minute),this.second=Math.floor(f),f=1e3*(f-this.second),this.millisecond=Math.floor(f)}break;case s.length===12:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,u!==-1){let f=60*i;this.second=Math.floor(f),f=1e3*(f-this.second),this.millisecond=Math.floor(f)}break;case s.length===14:if(o=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,u!==-1){const f=1e3*i;this.millisecond=Math.floor(f)}break;default:throw new Error("Wrong input string for conversion")}const l=o.exec(s);if(l===null)throw new Error("Wrong input string for conversion");for(let f=1;f<l.length;f++)switch(f){case 1:this.year=parseInt(l[f],10);break;case 2:this.month=parseInt(l[f],10);break;case 3:this.day=parseInt(l[f],10);break;case 4:this.hour=parseInt(l[f],10)+a;break;case 5:this.minute=parseInt(l[f],10)+c;break;case 6:this.second=parseInt(l[f],10);break;default:throw new Error("Wrong input string for conversion")}if(r===!1){const f=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=f.getUTCFullYear(),this.month=f.getUTCMonth(),this.day=f.getUTCDay(),this.hour=f.getUTCHours(),this.minute=f.getUTCMinutes(),this.second=f.getUTCSeconds(),this.millisecond=f.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){const r=[];return r.push(nt(this.year,4)),r.push(nt(this.month,2)),r.push(nt(this.day,2)),r.push(nt(this.hour,2)),r.push(nt(this.minute,2)),r.push(nt(this.second,2)),this.millisecond!==0&&(r.push("."),r.push(nt(this.millisecond,3))),r.push("Z"),r.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}Rf=Lf;F.GeneralizedTime=Rf;Lf.NAME="GeneralizedTime";var Ff;class Vf extends $r{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}Ff=Vf;F.DATE=Ff;Vf.NAME="DATE";var Mf;class Hf extends $r{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}Mf=Hf;F.TimeOfDay=Mf;Hf.NAME="TimeOfDay";var jf;class zf extends $r{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}jf=zf;F.DateTime=jf;zf.NAME="DateTime";var Gf;class qf extends $r{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}Gf=qf;F.Duration=Gf;qf.NAME="Duration";var Wf;class Jf extends $r{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}Wf=Jf;F.TIME=Wf;Jf.NAME="TIME";class dc extends Error{constructor(e="An error occurred while verifying a message"){super(e),this.name="VerificationError"}}class qb extends Error{constructor(e="Missing Web Crypto API"){super(e),this.name="WebCryptoMissingError"}}const pc={get(t=globalThis){const e=t.crypto;if((e==null?void 0:e.subtle)==null)throw new qb("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return e}};async function Wb(t,e,r){const n=await pc.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return pc.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,e,r instanceof Uint8Array?r:r.subarray())}function Jb(t){if(t.kty!=="RSA")throw new ut("invalid key type");if(t.n==null)throw new ut("invalid key modulus");return mt(t.n,"base64url").length*8}class Zb{constructor(e,r){g(this,"type","RSA");g(this,"_key");g(this,"_raw");g(this,"_multihash");this._key=e,this._multihash=r}get raw(){return this._raw==null&&(this._raw=Qb(this._key)),this._raw}toMultihash(){return this._multihash}toCID(){return J.createV1(114,this._multihash)}toString(){return _e.encode(this.toMultihash().bytes).substring(1)}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:Wr(this.raw,e.raw)}verify(e,r){return Wb(this._key,r,e)}}const Kb=8192,Xb=18;function Yb(t){const{result:e}=Hb(t),r=e.valueBlock.value[1].valueBlock.value[0].valueBlock.value;return{kty:"RSA",n:gc(r[0]),e:gc(r[1])}}function Qb(t){if(t.n==null||t.e==null)throw new ut("JWK was missing components");const r=new _n({value:[new _n({value:[new aa({value:"1.2.840.113549.1.1.1"}),new sa]}),new ia({valueHex:new _n({value:[Mt.fromBigInt(wc(mt(t.n,"base64url"))),Mt.fromBigInt(wc(mt(t.e,"base64url")))]}).toBER()})]}).toBER();return new Uint8Array(r,0,r.byteLength)}function gc(t){let e=t.valueBlock.valueHexView;for(;e[0]===0;)e=e.subarray(1);return Ie(e,"base64url")}function wc(t){const e=[];return t.forEach(function(r){let n=r.toString(16);n.length%2>0&&(n=`0${n}`),e.push(n)}),BigInt("0x"+e.join(""))}function e1(t){const e=Yb(t);if(Jb(e)>Kb)throw new Go("Key size is too large");const r=Iu(Qr.encode({Type:He.RSA,Data:t})),n=On(Xb,r);return new Zb(e,n)}class Zf extends iu{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Xy(e);const n=Jo(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Rs(this),this.iHash.update(e),this}digestInto(e){Rs(this),ii(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Kf=(t,e,r)=>new Zf(t,e).update(r).digest();Kf.create=(t,e)=>new Zf(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function yc(t){t.lowS!==void 0&&Vt("lowS",t.lowS),t.prehash!==void 0&&Vt("prehash",t.prehash)}function t1(t){const e=Xo(t);hn(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:r1,hexToBytes:n1}=Lm;class s1 extends Error{constructor(e=""){super(e)}}const Rt={Err:s1,_tlv:{encode:(t,e)=>{const{Err:r}=Rt;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,s=Vr(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");const i=n>127?Vr(s.length/2|128):"";return Vr(t)+i+s+e},decode(t,e){const{Err:r}=Rt;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const u=e.subarray(n,n+c);if(u.length!==c)throw new r("tlv.decode: length bytes not complete");if(u[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=Rt;if(t<Ft)throw new e("integer: negative integers are not allowed");let r=Vr(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=Rt;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return r1(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=Rt,s=typeof t=="string"?n1(t):t;Kn(s);const{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,i),{v:u,l}=n.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(t){const{_tlv:e,_int:r}=Rt,n=e.encode(2,r.encode(t.r)),s=e.encode(2,r.encode(t.s)),i=n+s;return e.encode(48,i)}},Ft=BigInt(0),Ae=BigInt(1);BigInt(2);const mc=BigInt(3);BigInt(4);function i1(t){const e=t1(t),{Fp:r}=e,n=li(e.n,e.nBitLength),s=e.toBytes||((y,p,v)=>{const S=p.toAffine();return Sr(Uint8Array.from([4]),r.toBytes(S.x),r.toBytes(S.y))}),i=e.fromBytes||(y=>{const p=y.subarray(1),v=r.fromBytes(p.subarray(0,r.BYTES)),S=r.fromBytes(p.subarray(r.BYTES,2*r.BYTES));return{x:v,y:S}});function o(y){const{a:p,b:v}=e,S=r.sqr(y),b=r.mul(S,y);return r.add(r.add(b,r.mul(y,p)),v)}if(!r.eql(r.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(y){return ci(y,Ae,e.n)}function c(y){const{allowedPrivateKeyLengths:p,nByteLength:v,wrapPrivateKey:S,n:b}=e;if(p&&typeof y!="bigint"){if(vr(y)&&(y=Er(y)),typeof y!="string"||!p.includes(y.length))throw new Error("invalid private key");y=y.padStart(v*2,"0")}let B;try{B=typeof y=="bigint"?y:yr(Ee("private key",y,v))}catch{throw new Error("invalid private key, expected hex or "+v+" bytes, got "+typeof y)}return S&&(B=de(B,b)),lt("private key",B,Ae,b),B}function u(y){if(!(y instanceof h))throw new Error("ProjectivePoint expected")}const l=Mn((y,p)=>{const{px:v,py:S,pz:b}=y;if(r.eql(b,r.ONE))return{x:v,y:S};const B=y.is0();p==null&&(p=B?r.ONE:r.inv(b));const O=r.mul(v,p),T=r.mul(S,p),_=r.mul(b,p);if(B)return{x:r.ZERO,y:r.ZERO};if(!r.eql(_,r.ONE))throw new Error("invZ was invalid");return{x:O,y:T}}),f=Mn(y=>{if(y.is0()){if(e.allowInfinityPoint&&!r.is0(y.py))return;throw new Error("bad point: ZERO")}const{x:p,y:v}=y.toAffine();if(!r.isValid(p)||!r.isValid(v))throw new Error("bad point: x or y not FE");const S=r.sqr(v),b=o(p);if(!r.eql(S,b))throw new Error("bad point: equation left != right");if(!y.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(p,v,S){if(this.px=p,this.py=v,this.pz=S,p==null||!r.isValid(p))throw new Error("x required");if(v==null||!r.isValid(v))throw new Error("y required");if(S==null||!r.isValid(S))throw new Error("z required");Object.freeze(this)}static fromAffine(p){const{x:v,y:S}=p||{};if(!p||!r.isValid(v)||!r.isValid(S))throw new Error("invalid affine point");if(p instanceof h)throw new Error("projective point not allowed");const b=B=>r.eql(B,r.ZERO);return b(v)&&b(S)?h.ZERO:new h(v,S,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(p){const v=r.invertBatch(p.map(S=>S.pz));return p.map((S,b)=>S.toAffine(v[b])).map(h.fromAffine)}static fromHex(p){const v=h.fromAffine(i(Ee("pointHex",p)));return v.assertValidity(),v}static fromPrivateKey(p){return h.BASE.multiply(c(p))}static msm(p,v){return mu(h,n,p,v)}_setWindowSize(p){w.setWindowSize(this,p)}assertValidity(){f(this)}hasEvenY(){const{y:p}=this.toAffine();if(r.isOdd)return!r.isOdd(p);throw new Error("Field doesn't support isOdd")}equals(p){u(p);const{px:v,py:S,pz:b}=this,{px:B,py:O,pz:T}=p,_=r.eql(r.mul(v,T),r.mul(B,b)),$=r.eql(r.mul(S,T),r.mul(O,b));return _&&$}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:p,b:v}=e,S=r.mul(v,mc),{px:b,py:B,pz:O}=this;let T=r.ZERO,_=r.ZERO,$=r.ZERO,I=r.mul(b,b),M=r.mul(B,B),L=r.mul(O,O),V=r.mul(b,B);return V=r.add(V,V),$=r.mul(b,O),$=r.add($,$),T=r.mul(p,$),_=r.mul(S,L),_=r.add(T,_),T=r.sub(M,_),_=r.add(M,_),_=r.mul(T,_),T=r.mul(V,T),$=r.mul(S,$),L=r.mul(p,L),V=r.sub(I,L),V=r.mul(p,V),V=r.add(V,$),$=r.add(I,I),I=r.add($,I),I=r.add(I,L),I=r.mul(I,V),_=r.add(_,I),L=r.mul(B,O),L=r.add(L,L),I=r.mul(L,V),T=r.sub(T,I),$=r.mul(L,M),$=r.add($,$),$=r.add($,$),new h(T,_,$)}add(p){u(p);const{px:v,py:S,pz:b}=this,{px:B,py:O,pz:T}=p;let _=r.ZERO,$=r.ZERO,I=r.ZERO;const M=e.a,L=r.mul(e.b,mc);let V=r.mul(v,B),X=r.mul(S,O),A=r.mul(b,T),D=r.add(v,S),E=r.add(B,O);D=r.mul(D,E),E=r.add(V,X),D=r.sub(D,E),E=r.add(v,b);let x=r.add(B,T);return E=r.mul(E,x),x=r.add(V,A),E=r.sub(E,x),x=r.add(S,b),_=r.add(O,T),x=r.mul(x,_),_=r.add(X,A),x=r.sub(x,_),I=r.mul(M,E),_=r.mul(L,A),I=r.add(_,I),_=r.sub(X,I),I=r.add(X,I),$=r.mul(_,I),X=r.add(V,V),X=r.add(X,V),A=r.mul(M,A),E=r.mul(L,E),X=r.add(X,A),A=r.sub(V,A),A=r.mul(M,A),E=r.add(E,A),V=r.mul(X,E),$=r.add($,V),V=r.mul(x,E),_=r.mul(D,_),_=r.sub(_,V),V=r.mul(D,X),I=r.mul(x,I),I=r.add(I,V),new h(_,$,I)}subtract(p){return this.add(p.negate())}is0(){return this.equals(h.ZERO)}wNAF(p){return w.wNAFCached(this,p,h.normalizeZ)}multiplyUnsafe(p){const{endo:v,n:S}=e;lt("scalar",p,Ft,S);const b=h.ZERO;if(p===Ft)return b;if(this.is0()||p===Ae)return this;if(!v||w.hasPrecomputes(this))return w.wNAFCachedUnsafe(this,p,h.normalizeZ);let{k1neg:B,k1:O,k2neg:T,k2:_}=v.splitScalar(p),$=b,I=b,M=this;for(;O>Ft||_>Ft;)O&Ae&&($=$.add(M)),_&Ae&&(I=I.add(M)),M=M.double(),O>>=Ae,_>>=Ae;return B&&($=$.negate()),T&&(I=I.negate()),I=new h(r.mul(I.px,v.beta),I.py,I.pz),$.add(I)}multiply(p){const{endo:v,n:S}=e;lt("scalar",p,Ae,S);let b,B;if(v){const{k1neg:O,k1:T,k2neg:_,k2:$}=v.splitScalar(p);let{p:I,f:M}=this.wNAF(T),{p:L,f:V}=this.wNAF($);I=w.constTimeNegate(O,I),L=w.constTimeNegate(_,L),L=new h(r.mul(L.px,v.beta),L.py,L.pz),b=I.add(L),B=M.add(V)}else{const{p:O,f:T}=this.wNAF(p);b=O,B=T}return h.normalizeZ([b,B])[0]}multiplyAndAddUnsafe(p,v,S){const b=h.BASE,B=(T,_)=>_===Ft||_===Ae||!T.equals(b)?T.multiplyUnsafe(_):T.multiply(_),O=B(this,v).add(B(p,S));return O.is0()?void 0:O}toAffine(p){return l(this,p)}isTorsionFree(){const{h:p,isTorsionFree:v}=e;if(p===Ae)return!0;if(v)return v(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:p,clearCofactor:v}=e;return p===Ae?this:v?v(h,this):this.multiplyUnsafe(e.h)}toRawBytes(p=!0){return Vt("isCompressed",p),this.assertValidity(),s(h,this,p)}toHex(p=!0){return Vt("isCompressed",p),Er(this.toRawBytes(p))}}h.BASE=new h(e.Gx,e.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const m=e.nBitLength,w=yu(h,e.endo?Math.ceil(m/2):m);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function o1(t){const e=Xo(t);return hn(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function a1(t){const e=o1(t),{Fp:r,n}=e,s=r.BYTES+1,i=2*r.BYTES+1;function o(A){return de(A,n)}function a(A){return io(A,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:f}=i1({...e,toBytes(A,D,E){const x=D.toAffine(),k=r.toBytes(x.x),R=Sr;return Vt("isCompressed",E),E?R(Uint8Array.from([D.hasEvenY()?2:3]),k):R(Uint8Array.from([4]),k,r.toBytes(x.y))},fromBytes(A){const D=A.length,E=A[0],x=A.subarray(1);if(D===s&&(E===2||E===3)){const k=yr(x);if(!ci(k,Ae,r.ORDER))throw new Error("Point is not on curve");const R=l(k);let G;try{G=r.sqrt(R)}catch(K){const H=K instanceof Error?": "+K.message:"";throw new Error("Point is not on curve"+H)}const z=(G&Ae)===Ae;return(E&1)===1!==z&&(G=r.neg(G)),{x:k,y:G}}else if(D===i&&E===4){const k=r.fromBytes(x.subarray(0,r.BYTES)),R=r.fromBytes(x.subarray(r.BYTES,2*r.BYTES));return{x:k,y:R}}else{const k=s,R=i;throw new Error("invalid Point, expected length of "+k+", or uncompressed "+R+", got "+D)}}}),h=A=>Er(Yr(A,e.nByteLength));function m(A){const D=n>>Ae;return A>D}function w(A){return m(A)?o(-A):A}const y=(A,D,E)=>yr(A.slice(D,E));class p{constructor(D,E,x){this.r=D,this.s=E,this.recovery=x,this.assertValidity()}static fromCompact(D){const E=e.nByteLength;return D=Ee("compactSignature",D,E*2),new p(y(D,0,E),y(D,E,2*E))}static fromDER(D){const{r:E,s:x}=Rt.toSig(Ee("DER",D));return new p(E,x)}assertValidity(){lt("r",this.r,Ae,n),lt("s",this.s,Ae,n)}addRecoveryBit(D){return new p(this.r,this.s,D)}recoverPublicKey(D){const{r:E,s:x,recovery:k}=this,R=T(Ee("msgHash",D));if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");const G=k===2||k===3?E+e.n:E;if(G>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const z=k&1?"03":"02",Y=c.fromHex(z+h(G)),K=a(G),H=o(-R*K),se=o(x*K),ae=c.BASE.multiplyAndAddUnsafe(Y,H,se);if(!ae)throw new Error("point at infinify");return ae.assertValidity(),ae}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new p(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Xr(this.toDERHex())}toDERHex(){return Rt.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Xr(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const v={isValidPrivateKey(A){try{return u(A),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const A=pu(e.n);return Jm(e.randomBytes(A),e.n)},precompute(A=8,D=c.BASE){return D._setWindowSize(A),D.multiply(BigInt(3)),D}};function S(A,D=!0){return c.fromPrivateKey(A).toRawBytes(D)}function b(A){const D=vr(A),E=typeof A=="string",x=(D||E)&&A.length;return D?x===s||x===i:E?x===2*s||x===2*i:A instanceof c}function B(A,D,E=!0){if(b(A))throw new Error("first arg must be private key");if(!b(D))throw new Error("second arg must be public key");return c.fromHex(D).multiply(u(A)).toRawBytes(E)}const O=e.bits2int||function(A){if(A.length>8192)throw new Error("input is too large");const D=yr(A),E=A.length*8-e.nBitLength;return E>0?D>>BigInt(E):D},T=e.bits2int_modN||function(A){return o(O(A))},_=Ko(e.nBitLength);function $(A){return lt("num < 2^"+e.nBitLength,A,Ft,_),Yr(A,e.nByteLength)}function I(A,D,E=M){if(["recovered","canonical"].some(fe=>fe in E))throw new Error("sign() legacy options not supported");const{hash:x,randomBytes:k}=e;let{lowS:R,prehash:G,extraEntropy:z}=E;R==null&&(R=!0),A=Ee("msgHash",A),yc(E),G&&(A=Ee("prehashed msgHash",x(A)));const Y=T(A),K=u(D),H=[$(K),$(Y)];if(z!=null&&z!==!1){const fe=z===!0?k(r.BYTES):z;H.push(Ee("extraEntropy",fe))}const se=Sr(...H),ae=Y;function xe(fe){const ce=O(fe);if(!f(ce))return;const be=a(ce),$e=c.BASE.multiply(ce).toAffine(),Fe=o($e.x);if(Fe===Ft)return;const xt=o(be*o(ae+Fe*K));if(xt===Ft)return;let Jt=($e.x===Fe?0:2)|Number($e.y&Ae),Ut=xt;return R&&m(xt)&&(Ut=w(xt),Jt^=1),new p(Fe,Ut,Jt)}return{seed:se,k2sig:xe}}const M={lowS:e.lowS,prehash:!1},L={lowS:e.lowS,prehash:!1};function V(A,D,E=M){const{seed:x,k2sig:k}=I(A,D,E),R=e;return fu(R.hash.outputLen,R.nByteLength,R.hmac)(x,k)}c.BASE._setWindowSize(8);function X(A,D,E,x=L){var Jt;const k=A;D=Ee("msgHash",D),E=Ee("publicKey",E);const{lowS:R,prehash:G,format:z}=x;if(yc(x),"strict"in x)throw new Error("options.strict was renamed to lowS");if(z!==void 0&&z!=="compact"&&z!=="der")throw new Error("format must be compact or der");const Y=typeof k=="string"||vr(k),K=!Y&&!z&&typeof k=="object"&&k!==null&&typeof k.r=="bigint"&&typeof k.s=="bigint";if(!Y&&!K)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let H,se;try{if(K&&(H=new p(k.r,k.s)),Y){try{z!=="compact"&&(H=p.fromDER(k))}catch(Ut){if(!(Ut instanceof Rt.Err))throw Ut}!H&&z!=="der"&&(H=p.fromCompact(k))}se=c.fromHex(E)}catch{return!1}if(!H||R&&H.hasHighS())return!1;G&&(D=e.hash(D));const{r:ae,s:xe}=H,fe=T(D),ce=a(xe),be=o(fe*ce),$e=o(ae*ce),Fe=(Jt=c.BASE.multiplyAndAddUnsafe(se,be,$e))==null?void 0:Jt.toAffine();return Fe?o(Fe.x)===ae:!1}return{CURVE:e,getPublicKey:S,getSharedSecret:B,sign:V,verify:X,ProjectivePoint:c,Signature:p,utils:v}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function c1(t){return{hash:t,hmac:(e,...r)=>Kf(t,e,em(...r)),randomBytes:au}}function l1(t,e){const r=n=>a1({...t,...c1(n)});return{...r(e),create:r}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xf=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),bc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),u1=BigInt(1),fo=BigInt(2),xc=(t,e)=>(t+e/fo)/e;function f1(t){const e=Xf,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,f=ye(l,r,e)*l%e,h=ye(f,r,e)*l%e,m=ye(h,fo,e)*u%e,w=ye(m,s,e)*m%e,y=ye(w,i,e)*w%e,p=ye(y,a,e)*y%e,v=ye(p,c,e)*p%e,S=ye(v,a,e)*y%e,b=ye(S,r,e)*l%e,B=ye(b,o,e)*w%e,O=ye(B,n,e)*u%e,T=ye(O,fo,e);if(!ho.eql(ho.sqr(T),t))throw new Error("Cannot find square root");return T}const ho=li(Xf,void 0,void 0,{sqrt:f1}),jn=l1({a:BigInt(0),b:BigInt(7),Fp:ho,n:bc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=bc,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-u1*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,o=BigInt("0x100000000000000000000000000000000"),a=xc(i*t,e),c=xc(-n*t,e);let u=de(t-a*r-c*s,e),l=de(-a*n-c*i,e);const f=u>o,h=l>o;if(f&&(u=e-u),h&&(l=e-l),u>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:f,k1:u,k2neg:h,k2:l}}}},Iu);BigInt(0);jn.ProjectivePoint;function h1(t){return t==null?!1:typeof t.then=="function"&&typeof t.catch=="function"&&typeof t.finally=="function"}function d1(t,e,r){const n=Bo.digest(r instanceof Uint8Array?r:r.subarray());if(h1(n))return n.then(({digest:s})=>jn.verify(e,s,t)).catch(s=>{throw new dc(String(s))});try{return jn.verify(e,n.digest,t)}catch(s){throw new dc(String(s))}}class p1{constructor(e){g(this,"type","secp256k1");g(this,"raw");g(this,"_key");this._key=w1(e),this.raw=g1(this._key)}toMultihash(){return br.digest(Qf(this))}toCID(){return J.createV1(114,this.toMultihash())}toString(){return _e.encode(this.toMultihash().bytes).substring(1)}equals(e){return e==null||!(e.raw instanceof Uint8Array)?!1:Wr(this.raw,e.raw)}verify(e,r){return d1(this._key,r,e)}}function Yf(t){return new p1(t)}function g1(t){return jn.ProjectivePoint.fromHex(t).toRawBytes(!0)}function w1(t){try{return jn.ProjectivePoint.fromHex(t),t}catch(e){throw new Go(String(e))}}function y1(t){const{Type:e,Data:r}=Qr.decode(t),n=r??new Uint8Array;switch(e){case He.RSA:return e1(n);case He.Ed25519:return xu(n);case He.secp256k1:return Yf(n);default:throw new qo}}function m1(t){const{Type:e,Data:r}=Qr.decode(t.digest),n=r??new Uint8Array;switch(e){case He.Ed25519:return xu(n);case He.secp256k1:return Yf(n);default:throw new qo}}function Qf(t){return Qr.encode({Type:He[t.type],Data:t.raw})}const eh=Symbol.for("nodejs.util.inspect.custom"),b1=114;var Kc;class ua{constructor(e){g(this,"type");g(this,"multihash");g(this,"publicKey");g(this,"string");g(this,Kc,!0);this.type=e.type,this.multihash=e.multihash,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}toString(){return this.string==null&&(this.string=_e.encode(this.multihash.bytes).slice(1)),this.string}toMultihash(){return this.multihash}toCID(){return J.createV1(b1,this.multihash)}toJSON(){return this.toString()}equals(e){var r;if(e==null)return!1;if(e instanceof Uint8Array)return Wr(this.multihash.bytes,e);if(typeof e=="string")return this.toString()===e;if(((r=e==null?void 0:e.toMultihash())==null?void 0:r.bytes)!=null)return Wr(this.multihash.bytes,e.toMultihash().bytes);throw new Error("not valid Id")}[(Kc=eu,eh)](){return`PeerId(${this.toString()})`}}class x1 extends ua{constructor(r){super({...r,type:"RSA"});g(this,"type","RSA");g(this,"publicKey");this.publicKey=r.publicKey}}class v1 extends ua{constructor(r){super({...r,type:"Ed25519"});g(this,"type","Ed25519");g(this,"publicKey");this.publicKey=r.publicKey}}class E1 extends ua{constructor(r){super({...r,type:"secp256k1"});g(this,"type","secp256k1");g(this,"publicKey");this.publicKey=r.publicKey}}const S1=2336;var Xc,Yc;class B1{constructor(e){g(this,"type","url");g(this,"multihash");g(this,"publicKey");g(this,"url");g(this,Xc,!0);this.url=e.toString(),this.multihash=br.digest(mt(this.url))}[(Yc=eh,Xc=eu,Yc)](){return`PeerId(${this.url})`}toString(){return this.toCID().toString()}toMultihash(){return this.multihash}toCID(){return J.createV1(S1,this.toMultihash())}toJSON(){return this.toString()}equals(e){return e==null?!1:(e instanceof Uint8Array&&(e=Ie(e)),e.toString()===this.toString())}}function rt(t,e){let r;if(t.charAt(0)==="1"||t.charAt(0)==="Q")r=Eo(_e.decode(`z${t}`));else throw new ut('Please pass a multibase decoder for strings that do not start with "1" or "Q"');return A1(r)}function A1(t){if(I1(t))return new x1({multihash:t});if(k1(t))try{const e=m1(t);if(e.type==="Ed25519")return new v1({multihash:t,publicKey:e});if(e.type==="secp256k1")return new E1({multihash:t,publicKey:e})}catch{const r=Ie(t.digest);return new B1(new URL(r))}throw new tu("Supplied PeerID Multihash is invalid")}function k1(t){return t.code===br.code}function I1(t){return t.code===Bo.code}function th(t){return async function(r={}){const n=await t.post("bitswap/stat",{searchParams:C(r),signal:r.signal,headers:r.headers});return C1(await n.json())}}function C1(t){return{provideBufLen:t.ProvideBufLen,wantlist:(t.Wantlist??[]).map(e=>J.parse(e["/"])),peers:(t.Peers??[]).map(e=>rt(e)),blocksReceived:BigInt(t.BlocksReceived),dataReceived:BigInt(t.DataReceived),blocksSent:BigInt(t.BlocksSent),dataSent:BigInt(t.DataSent),dupBlksReceived:BigInt(t.DupBlksReceived),dupDataReceived:BigInt(t.DupDataReceived)}}function _1(t){return async function(r,n={}){return((await(await t.post("bitswap/wantlist",{signal:n.signal,searchParams:C({...n,peer:r.toString()}),headers:n.headers})).json()).Keys??[]).map(i=>J.parse(i["/"]))}}function N1(t){return async function(r={}){return((await(await t.post("bitswap/wantlist",{signal:r.signal,searchParams:C(r),headers:r.headers})).json()).Keys??[]).map(s=>J.parse(s["/"]))}}function T1(t){return{wantlist:N1(t),wantlistForPeer:_1(t),stat:th(t)}}function rh(t){return async function(r,n={}){const s=await t.post("block/get",{signal:n.signal,searchParams:C({arg:r.toString(),...n}),headers:n.headers});return new Uint8Array(await s.arrayBuffer())}}function U1(t){return async function e(r,n={}){const s=new AbortController,i=zt([s.signal,n.signal]);let o;try{o=await(await t.post("block/put",{signal:i,searchParams:C(n),...await lr([r],s,n.headers)})).json()}catch(a){if(n.format==="dag-pb")return await e(r,{...n,format:"protobuf"});if(n.format==="dag-cbor")return await e(r,{...n,format:"cbor"});throw a}finally{i.clear()}return J.parse(o.Key)}}function $1(t){return async function*(r,n={}){Array.isArray(r)||(r=[r]);const s=await t.post("block/rm",{signal:n.signal,searchParams:C({arg:r.map(i=>i.toString()),"stream-channels":!0,...n}),headers:n.headers});for await(const i of s.ndjson())yield D1(i)}}function D1(t){const e={cid:J.parse(t.Hash)};return t.Error!=null&&(e.error=new Error(t.Error)),e}function P1(t){return async function(r,n={}){const i=await(await t.post("block/stat",{signal:n.signal,searchParams:C({arg:r.toString(),...n}),headers:n.headers})).json();return{cid:J.parse(i.Key),size:i.Size}}}function O1(t){return{get:rh(t),put:U1(t),rm:$1(t),stat:P1(t)}}function R1(t){return async function(r,n={}){const s=await t.post("bootstrap/add",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers}),{Peers:i}=await s.json();return{Peers:i.map(o=>Ke(o))}}}function L1(t){return async function(r={}){const n=await t.post("bootstrap/list",{signal:r.signal,searchParams:C(r),headers:r.headers}),{Peers:s}=await n.json();return{Peers:s.map(i=>Ke(i))}}}function F1(t){return async function(r,n={}){const s=await t.post("bootstrap/rm",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers}),{Peers:i}=await s.json();return{Peers:i.map(o=>Ke(o))}}}function V1(t){return{add:R1(t),list:L1(t),rm:F1(t)}}function M1(t){return async function*(r,n={}){yield*(await t.post("cat",{signal:n.signal,searchParams:C({arg:r.toString(),...n}),headers:n.headers})).iterator()}}function H1(t){return async function(r={}){return(await t.post("commands",{signal:r.signal,searchParams:C(r),headers:r.headers})).json()}}function j1(t){return async function(r={}){return await(await t.post("config/show",{signal:r.signal,searchParams:C({...r}),headers:r.headers})).json()}}function z1(t){return async function(r,n={}){if(r==null)throw new Error("key argument is required");return(await(await t.post("config",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers})).json()).Value}}function G1(t){return async function(r,n={}){const i=await(await t.post("config/profile/apply",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers})).json();return{original:i.OldCfg,updated:i.NewCfg}}}function q1(t){return{apply:G1(t)}}function W1(t){return async function(r,n={}){const s=new AbortController,i=zt([s.signal,n.signal]);try{await(await t.post("config/replace",{signal:i,searchParams:C(n),...await lr([mt(JSON.stringify(r))],s,n.headers)})).text()}finally{i.clear()}}}function J1(t){return async function(r,n,s={}){if(typeof r!="string")throw new Error("Invalid key type");const i={...s,...Z1(r,n)};await(await t.post("config",{signal:s.signal,searchParams:C(i),headers:s.headers})).text()}}function Z1(t,e){switch(typeof e){case"boolean":return{arg:[t,e.toString()],bool:!0};case"string":return{arg:[t,e]};default:return{arg:[t,JSON.stringify(e)],json:!0}}}function K1(t){return{getAll:j1(t),get:z1(t),set:J1(t),replace:W1(t),profiles:q1(t)}}function X1(t){return async function*(r,n={}){yield*(await t.post("dag/export",{signal:n.signal,searchParams:C({arg:r.toString()}),headers:n.headers})).iterator()}}function Y1(t){return t[Symbol.asyncIterator]!=null}function Q1(t){if(Y1(t))return(async()=>{for await(const e of t)return e})();for(const e of t)return e}async function*vc(t,e,r,n,s){const i=async u=>{const l=await r.getCodec(u.code),f=await n(u,s);return l.decode(f)},o=e.split("/").filter(Boolean);let a=await i(t),c=t;for(;o.length>0;){const u=o.shift();if(u==null)throw It(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(a,u))a=a[u],yield{value:a,remainderPath:o.join("/")};else throw It(new Error(`no link named "${u}" under ${c}`),"ERR_NO_LINK");const l=J.asCID(a);l!=null&&(c=l,a=await i(a))}yield{value:a,remainderPath:""}}function ex(t,e){const r=rh(t);return async function(s,i={}){if(i.path!=null){const l=i.localResolve===!0?await Q1(vc(s,i.path,e,r,i)):await si(vc(s,i.path,e,r,i));if(l==null)throw It(new Error("Not found"),"ERR_NOT_FOUND");return l}const o=await e.getCodec(s.code),a=await r(s,i);return{value:o.decode(a),remainderPath:""}}}function tx(t){return async function*(r,n={}){const s=new AbortController,i=zt([s.signal,n.signal]);try{const{headers:o,body:a}=await lr(r,s,n.headers),c=await t.post("dag/import",{signal:i,headers:o,body:a,searchParams:C({"pin-roots":n.pinRoots})});for await(const{Root:u}of c.ndjson())if(u!==void 0){const{Cid:{"/":l},PinErrorMsg:f}=u;yield{root:{cid:J.parse(l),pinErrorMsg:f}}}}finally{i.clear()}}}function rx(t,e){return async function(n,s={}){const i={storeCodec:"dag-cbor",hashAlg:"sha2-256",...s};let o;if(i.inputCodec!=null){if(!(n instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");o=n}else o=(await e.getCodec(i.storeCodec??"dag-cbor")).encode(n),i.inputCodec=i.storeCodec;const a=new AbortController,c=zt([a.signal,i.signal]);try{const l=await(await t.post("dag/put",{timeout:i.timeout,signal:c,searchParams:C(i),...await lr([o],a,i.headers)})).json();return J.parse(l.Cid["/"])}finally{c.clear()}}}function nx(t){return async function(r,n={}){const i=await(await t.post("dag/resolve",{signal:n.signal,searchParams:C({arg:`${r}${n.path!=null?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers})).json();return{cid:J.parse(i.Cid["/"]),remainderPath:i.RemPath}}}function sx(t,e){return{export:X1(t),get:ex(t,e),import:tx(t),put:rx(t,e),resolve:nx(t)}}const ix=0,ox=1,ax=2,cx=3,lx=4,ux=5,fx=6,hx=7;function gn(t){var e;if(t.Type===ix)return{name:"SENDING_QUERY",type:t.Type};if(t.Type===ox)return{from:rt(t.ID),name:"PEER_RESPONSE",type:t.Type,messageType:0,messageName:"PUT_VALUE",closer:(t.Responses??[]).map(({ID:r,Addrs:n})=>({id:rt(r),multiaddrs:n.map(s=>Ke(s)),protocols:[]})),providers:(t.Responses??[]).map(({ID:r,Addrs:n})=>({id:rt(r),multiaddrs:n.map(s=>Ke(s)),protocols:[]}))};if(t.Type===ax){let r={id:t.ID??rt(t.ID),multiaddrs:[],protocols:[]};return((e=t.Responses)==null?void 0:e.length)>0&&(r={id:rt(t.Responses[0].ID),multiaddrs:t.Responses[0].Addrs.map(n=>Ke(n)),protocols:[]}),{name:"FINAL_PEER",type:t.Type,peer:r}}if(t.Type===cx)return{name:"QUERY_ERROR",type:t.Type,error:new Error(t.Extra)};if(t.Type===lx)return{name:"PROVIDER",type:t.Type,providers:t.Responses.map(({ID:r,Addrs:n})=>({id:rt(r),multiaddrs:n.map(s=>Ke(s)),protocols:[]}))};if(t.Type===ux)return{name:"VALUE",type:t.Type,value:mt(t.Extra,"base64pad")};if(t.Type===fx){const r=t.Responses.map(({ID:n})=>rt(n));if(r.length===0)throw new Error("No peer found");return{name:"ADDING_PEER",type:t.Type,peer:r[0]}}if(t.Type===hx)return{name:"DIALING_PEER",type:t.Type,peer:rt(t.ID)};throw new Error("Unknown DHT event type")}function dx(t){return async function*(r,n={}){const s=await t.post("dht/query",{signal:n.signal,searchParams:C({arg:r.toString(),...n}),headers:n.headers});for await(const i of s.ndjson())yield gn(i)}}var Ec;(function(t){t[t.SENDING_QUERY=0]="SENDING_QUERY",t[t.PEER_RESPONSE=1]="PEER_RESPONSE",t[t.FINAL_PEER=2]="FINAL_PEER",t[t.QUERY_ERROR=3]="QUERY_ERROR",t[t.PROVIDER=4]="PROVIDER",t[t.VALUE=5]="VALUE",t[t.ADDING_PEER=6]="ADDING_PEER",t[t.DIALING_PEER=7]="DIALING_PEER"})(Ec||(Ec={}));var Sc;(function(t){t[t.PUT_VALUE=0]="PUT_VALUE",t[t.GET_VALUE=1]="GET_VALUE",t[t.ADD_PROVIDER=2]="ADD_PROVIDER",t[t.GET_PROVIDERS=3]="GET_PROVIDERS",t[t.FIND_NODE=4]="FIND_NODE",t[t.PING=5]="PING"})(Sc||(Sc={}));function px(t){return{query:dx(t)}}function gx(t){return async function(r={}){return(await t.post("diag/cmds",{signal:r.signal,searchParams:C(r),headers:r.headers})).json()}}function wx(t){return async function(r={}){return(await t.post("diag/net",{signal:r.signal,searchParams:C(r),headers:r.headers})).json()}}function yx(t){return async function(r={}){return(await t.post("diag/sys",{signal:r.signal,searchParams:C(r),headers:r.headers})).json()}}function mx(t){return{cmds:gx(t),net:wx(t),sys:yx(t)}}function bx(t){return async function(r,n,s={}){const i=Array.isArray(r)?r:[r];await(await t.post("files/cp",{signal:s.signal,searchParams:C({arg:i.concat(n).map(a=>J.asCID(a)!=null?`/ipfs/${a}`:a),...s}),headers:s.headers})).text()}}function xx(t){return async function(r,n={}){if(typeof r!="string")throw new Error("ipfs.files.flush requires a path");const i=await(await t.post("files/flush",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers})).json();return J.parse(i.Cid)}}function po(t){const e=Ue(t);return Object.prototype.hasOwnProperty.call(e,"mode")&&(e.mode=parseInt(e.mode,8)),Object.prototype.hasOwnProperty.call(e,"mtime")&&(e.mtime={secs:e.mtime,nsecs:e.mtimeNsecs??0},delete e.mtimeNsecs),e}function vx(t){return async function*(r,n={}){if(r==null)throw new Error("ipfs.files.ls requires a path");const s=await t.post("files/ls",{signal:n.signal,searchParams:C({arg:J.asCID(r)!=null?`/ipfs/${r}`:r,long:!0,...n,stream:!0}),headers:n.headers});for await(const i of s.ndjson())if("Entries"in i)for(const o of i.Entries??[])yield Bc(po(o));else yield Bc(po(i))}}function Bc(t){return t.hash!=null&&(t.cid=J.parse(t.hash)),delete t.hash,t.type=t.type===1?"directory":"file",t}function Ex(t){return async function(r,n={}){await(await t.post("files/mkdir",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers})).text()}}function Sx(t){return async function(r,n,s={}){Array.isArray(r)||(r=[r]),await(await t.post("files/mv",{signal:s.signal,searchParams:C({arg:r.concat(n),...s}),headers:s.headers})).text()}}function Bx(t){if(kx(t))return async function*(){const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)return;yield n}}finally{e.releaseLock()}}();if(Ax(t))return t;throw new Error("unknown stream")}function Ax(t){return t[Symbol.asyncIterator]!=null}function kx(t){return typeof(t==null?void 0:t.getReader)=="function"}function Ix(t){return async function*(r,n={}){const s=await t.post("files/read",{signal:n.signal,searchParams:C({arg:r,count:n.length,...n}),headers:n.headers});if(s.body==null)throw new Error("Invalid response body");yield*Bx(s.body)}}function Cx(t){return async function(r,n={}){const s=await t.post("files/rm",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers}),i=await s.text();if(i!==""){const o=new Py(s);throw o.message=i,o}}}function nh(t){return async function(r,n={}){const i=await(await t.post("files/stat",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers})).json();return i.WithLocality=i.WithLocality??!1,_x(po(i))}}function _x(t){return t.cid=J.parse(t.hash),delete t.hash,t}function Nx(t){return async function(r,n,s={}){const i=new AbortController,o=zt([i.signal,s.signal]);try{await(await t.post("files/write",{signal:o,searchParams:C({arg:r,streamChannels:!0,count:s.length,...s}),...await lr([{content:n,path:"arg",mode:Wo(s.mode),mtime:ni(s.mtime)}],i,s.headers)})).text()}finally{o.clear()}}}function Tx(t){return{cp:bx(t),flush:xx(t),ls:vx(t),mkdir:Ex(t),mv:Sx(t),read:Ix(t),rm:Cx(t),stat:nh(t),write:Nx(t)}}function Ux(t){return function(){const r=new URL(t.opts.base??"");return{host:r.hostname,port:r.port,protocol:r.protocol,pathname:r.pathname,"api-path":r.pathname}}}function $x(t){return async function*(r,n={}){const s={arg:`${r instanceof Uint8Array?J.decode(r):r}`,...n};yield*(await t.post("get",{signal:n.signal,searchParams:C(s),headers:n.headers})).iterator()}}function sh(t){return async function(r={}){const s=await(await t.post("id",{signal:r.signal,searchParams:C({arg:r.peerId!=null?r.peerId.toString():void 0,...r}),headers:r.headers})).json(),i={...Ue(s)};return i.id=rt(i.id),i.addresses!=null&&(i.addresses=i.addresses.map(o=>Ke(o))),i}}function Dx(t){const e=sh(t);return async function(n={}){var s;try{const i=await e(n);return!!((s=i==null?void 0:i.addresses)!=null&&s.length)}catch{return!1}}}const Px={type:"ed25519"};function Ox(t){return async function(r,n=Px){const i=await(await t.post("key/gen",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers})).json();return Ue(i)}}function Rx(t){return async function(r,n,s,i={}){const a=await(await t.post("key/import",{signal:i.signal,searchParams:C({arg:r,pem:n,password:s,...i}),headers:i.headers})).json();return Ue(a)}}function Lx(t){return async function(r={}){return((await(await t.post("key/list",{signal:r.signal,searchParams:C(r),headers:r.headers})).json()).Keys??[]).map(i=>Ue(i))}}function Fx(t){return async function(r,n,s={}){const i=await t.post("key/rename",{signal:s.signal,searchParams:C({arg:[r,n],...s}),headers:s.headers});return Ue(await i.json())}}function Vx(t){return async function(r,n={}){const i=await(await t.post("key/rm",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers})).json();return Ue(i.Keys[0])}}function Mx(t){return{gen:Ox(t),import:Rx(t),list:Lx(t),rename:Fx(t),rm:Vx(t)}}const tn=1e3,rn=tn*60,nn=rn*60,Ar=nn*24,Hx=Ar*7,jx=Ar*365.25;function ih(t,e){try{if(typeof t=="string"&&t.length>0)return zx(t);if(typeof t=="number"&&isFinite(t))return e!=null&&e.long?qx(t):Gx(t);throw new Error("Value is not a string or number.")}catch(r){const n=Wx(r)?`${r.message}. value=${JSON.stringify(t)}`:"An unknown error has occured.";throw new Error(n)}}function zx(t){if(t=String(t),t.length>100)throw new Error("Value exceeds the maximum length of 100 characters.");const e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return NaN;const r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*jx;case"weeks":case"week":case"w":return r*Hx;case"days":case"day":case"d":return r*Ar;case"hours":case"hour":case"hrs":case"hr":case"h":return r*nn;case"minutes":case"minute":case"mins":case"min":case"m":return r*rn;case"seconds":case"second":case"secs":case"sec":case"s":return r*tn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:throw new Error(`The unit ${n} was matched, but no matching case exists.`)}}function Gx(t){const e=Math.abs(t);return e>=Ar?`${Math.round(t/Ar)}d`:e>=nn?`${Math.round(t/nn)}h`:e>=rn?`${Math.round(t/rn)}m`:e>=tn?`${Math.round(t/tn)}s`:`${t}ms`}function qx(t){const e=Math.abs(t);return e>=Ar?is(t,e,Ar,"day"):e>=nn?is(t,e,nn,"hour"):e>=rn?is(t,e,rn,"minute"):e>=tn?is(t,e,tn,"second"):`${t} ms`}function is(t,e,r,n){const s=e>=r*1.5;return`${Math.round(t/r)} ${n}${s?"s":""}`}function Wx(t){return typeof t=="object"&&t!==null&&"message"in t}function Jx(t){r.debug=r,r.default=r,r.coerce=c,r.disable=i,r.enable=s,r.enabled=o,r.humanize=ih,r.destroy=u,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let f=0;for(let h=0;h<l.length;h++)f=(f<<5)-f+l.charCodeAt(h),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(l){let f,h=null,m,w;function y(...p){if(!y.enabled)return;const v=y,S=Number(new Date),b=S-(f||S);v.diff=b,v.prev=f,v.curr=S,f=S,p[0]=r.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");let B=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,(T,_)=>{if(T==="%%")return"%";B++;const $=r.formatters[_];if(typeof $=="function"){const I=p[B];T=$.call(v,I),p.splice(B,1),B--}return T}),r.formatArgs.call(v,p),(v.log||r.log).apply(v,p)}return y.namespace=l,y.useColors=r.useColors(),y.color=r.selectColor(l),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(m!==r.namespaces&&(m=r.namespaces,w=r.enabled(l)),w),set:p=>{h=p}}),typeof r.init=="function"&&r.init(y),y}function n(l,f){const h=r(this.namespace+(typeof f>"u"?":":f)+l);return h.log=this.log,h}function s(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let f;const h=(typeof l=="string"?l:"").split(/[\s,]+/),m=h.length;for(f=0;f<m;f++)h[f]&&(l=h[f].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.substr(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function i(){const l=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),l}function o(l){if(l[l.length-1]==="*")return!0;let f,h;for(f=0,h=r.skips.length;f<h;f++)if(r.skips[f].test(l))return!1;for(f=0,h=r.names.length;f<h;f++)if(r.names[f].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack??l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.setupFormatters(r.formatters),r.enable(r.load()),r}var Zx={};const Bt=rv(),Kx=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Xx(){var t,e,r,n,s;return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&((t=navigator.userAgent)==null?void 0:t.toLowerCase().match(/(edge|trident)\/(\d+)/))!=null?!1:typeof document<"u"&&((r=(e=document.documentElement)==null?void 0:e.style)==null?void 0:r.WebkitAppearance)||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&((n=navigator.userAgent)==null?void 0:n.toLowerCase().match(/firefox\/(\d+)/))!=null&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&((s=navigator.userAgent)==null?void 0:s.toLowerCase().match(/applewebkit\/(\d+)/))}function Yx(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+ih(this.diff),!this.useColors)return;const e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(r++,s==="%c"&&(n=r))}),t.splice(n,0,e)}const Qx=console.debug??console.log??(()=>{});function ev(t){try{t?Bt==null||Bt.setItem("debug",t):Bt==null||Bt.removeItem("debug")}catch{}}function tv(){let t;try{t=Bt==null?void 0:Bt.getItem("debug")}catch{}return!t&&typeof globalThis.process<"u"&&"env"in globalThis.process&&(t=Zx.DEBUG),t}function rv(){try{return localStorage}catch{}}function nv(t){t.j=function(e){try{return JSON.stringify(e)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}}const st=Jx({formatArgs:Yx,save:ev,load:tv,useColors:Xx,setupFormatters:nv,colors:Kx,storage:Bt,log:Qx});st.formatters.b=t=>t==null?"undefined":_e.baseEncode(t);st.formatters.t=t=>t==null?"undefined":or.baseEncode(t);st.formatters.m=t=>t==null?"undefined":Ws.baseEncode(t);st.formatters.p=t=>t==null?"undefined":t.toString();st.formatters.c=t=>t==null?"undefined":t.toString();st.formatters.k=t=>t==null?"undefined":t.toString();st.formatters.a=t=>t==null?"undefined":t.toString();st.formatters.e=t=>t==null?"undefined":Ac(t.stack)??Ac(t.message)??t.toString();function sv(t){const e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=t,e.destroy=()=>!0,e.extend=()=>e,e}function fa(t){let e=sv(`${t}:trace`);return st.enabled(`${t}:trace`)&&st.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(e=st(`${t}:trace`)),Object.assign(st(t),{error:st(`${t}:error`),trace:e})}function Ac(t){if(t!=null&&(t=t.trim(),t.length!==0))return t}var iv=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype};const Vs=iv,{hasOwnProperty:oh}=Object.prototype,{propertyIsEnumerable:ov}=Object,sn=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0}),av=od,kc={concatArrays:!1,ignoreUndefined:!1},hi=t=>{const e=[];for(const r in t)oh.call(t,r)&&e.push(r);if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(t);for(const n of r)ov.call(t,n)&&e.push(n)}return e};function wn(t){return Array.isArray(t)?cv(t):Vs(t)?lv(t):t}function cv(t){const e=t.slice(0,0);return hi(t).forEach(r=>{sn(e,r,wn(t[r]))}),e}function lv(t){const e=Object.getPrototypeOf(t)===null?Object.create(null):{};return hi(t).forEach(r=>{sn(e,r,wn(t[r]))}),e}const ah=(t,e,r,n)=>(r.forEach(s=>{typeof e[s]>"u"&&n.ignoreUndefined||(s in t&&t[s]!==Object.getPrototypeOf(t)?sn(t,s,go(t[s],e[s],n)):sn(t,s,wn(e[s])))}),t),uv=(t,e,r)=>{let n=t.slice(0,0),s=0;return[t,e].forEach(i=>{const o=[];for(let a=0;a<i.length;a++)oh.call(i,a)&&(o.push(String(a)),i===t?sn(n,s++,i[a]):sn(n,s++,wn(i[a])));n=ah(n,i,hi(i).filter(a=>!o.includes(a)),r)}),n};function go(t,e,r){return r.concatArrays&&Array.isArray(t)&&Array.isArray(e)?uv(t,e,r):!Vs(e)||!Vs(t)?wn(e):ah(t,e,hi(e),r)}var fv=function(...t){const e=go(wn(kc),this!==av&&this||{},kc);let r={_:{}};for(const n of t)if(n!==void 0){if(!Vs(n))throw new TypeError("`"+n+"` is not an Option Object");r=go(r,{_:n},e)}return r._};const ch=vo(fv);let hv=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;te.year=te.yr=te.y=6e4*60*24*365.25;te.month=te.b=6e4*60*24*(365.25/12);te.week=te.wk=te.w=6e4*60*24*7;te.day=te.d=6e4*60*24;te.hour=te.hr=te.h=6e4*60;te.minute=te.min=te.m=6e4;te.second=te.sec=te.s=1e3;te.millisecond=te.millisec=te.ms=1;te.Âµs=te.Î¼s=te.us=te.microsecond=1/1e3;te.nanosecond=te.ns=1/1e6;function te(t="",e="ms"){var r=null,n;return t=(t+"").replace(/(\d)[,_](\d)/g,"$1$2"),t.replace(hv,function(s,i,o){if(o)o=o.toLowerCase();else if(n){for(var a in te)if(te[a]<n){o=a;break}}else o=e;Object.prototype.hasOwnProperty.call(te,o)?o=te[o]:Object.prototype.hasOwnProperty.call(te,o.replace(/s$/,""))?o=te[o.replace(/s$/,"")]:o=null,o&&(r=(r||0)+Math.abs(parseFloat(i,10))*o,n=o)}),r&&r/(te[e]||1)*(t[0]==="-"?-1:1)}const dv=()=>{},pv=typeof navigator<"u"&&navigator.product==="ReactNative";function gv(){return pv?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const Nn=self.URL,lh=gv();let wv=class{constructor(e="",r=lh){this.super=new Nn(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return Nn.createObjectURL(e)}static revokeObjectURL(e){Nn.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function yv(t){if(typeof t=="string")return new Nn(t).toString();if(!(t instanceof Nn)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",s=t.protocol?t.protocol+"//":"",i=t.host||"",o=t.hostname||"",a=t.search||(t.query?"?"+t.query:""),c=t.hash||"",u=t.pathname||"",l=t.path||u+a;return`${s}${e||r}${i||o+n}${l}${c}`}}var uh={URLWithLegacySupport:wv,URLSearchParams:self.URLSearchParams,defaultBase:lh,format:yv};const{URLWithLegacySupport:Ic,format:mv}=uh;var bv=(t,e={},r={},n)=>{let s=e.protocol?e.protocol.replace(":",""):"http";s=(r[s]||n||s)+":";let i;try{i=new Ic(t)}catch{i={}}const o=Object.assign({},e,{protocol:s||i.protocol,host:e.host||i.host});return new Ic(t,mv(o)).toString()};const{URLWithLegacySupport:xv,format:vv,URLSearchParams:Ev,defaultBase:Sv}=uh,Bv=bv;var os={URL:xv,URLSearchParams:Ev,format:vv,relative:Bv,defaultBase:Sv};class fh extends Error{constructor(e="Request timed out"){super(e),this.name="TimeoutError"}}class Av extends Error{constructor(e="The operation was aborted."){super(e),this.name="AbortError"}}class Cc extends Error{constructor(r){super(r.statusText);g(this,"response");this.name="HTTPError",this.response=r}}const kv=globalThis.fetch,ha=globalThis.Headers,Iv=globalThis.Request,hh=globalThis.Response,Cv=async(t,e={})=>{const r=new XMLHttpRequest;r.open(e.method??"GET",t.toString(),!0);const{timeout:n,headers:s}=e,i=Number(n);if(!isNaN(i)&&i>0&&i<1/0&&(r.timeout=i),e.overrideMimeType!=null&&r.overrideMimeType(e.overrideMimeType),s!=null)for(const[o,a]of new ha(s))r.setRequestHeader(o,a);return e.signal!=null&&(e.signal.onabort=()=>{r.abort()}),e.onUploadProgress!=null&&(r.upload.onprogress=e.onUploadProgress),r.responseType="arraybuffer",new Promise((o,a)=>{const c=u=>{switch(u.type){case"error":{o(hh.error());break}case"load":{o(new Uv(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:Tv(r.getAllResponseHeaders())}));break}case"timeout":{a(new fh);break}case"abort":{a(new Av);break}}};r.onerror=c,r.onload=c,r.ontimeout=c,r.onabort=c,r.send(e.body)})},_v=kv,Nv=(t,e={})=>e.onUploadProgress!=null?Cv(t,e):_v(t,e),Tv=t=>{const e=new ha;for(const r of t.trim().split(/[\r\n]+/)){const n=r.indexOf(": ");n>0&&e.set(r.slice(0,n),r.slice(n+1))}return e};class Uv extends hh{constructor(e,r,n){super(r,n),Object.defineProperty(this,"url",{value:e})}}const _c=ch.bind({ignoreUndefined:!0}),as=fa("kubo-rpc-client:fetch"),$v={throwHttpErrors:!0,credentials:"same-origin"},Je=class Je{constructor(e={}){g(this,"opts");this.opts=_c({},$v,e)}async fetch(e,r={}){const n=_c({},this.opts,r),s=new ha(n.headers);if(typeof e!="string"&&!(e instanceof os.URL||e instanceof Iv))throw new TypeError("`resource` must be a string, URL, or Request");const i=new os.URL(e.toString(),n.base),{searchParams:o,transformSearchParams:a,json:c}=n;o!=null&&(typeof a=="function"?i.search=a(new os.URLSearchParams(n.searchParams)):i.search=new os.URLSearchParams(n.searchParams).toString()),c!=null&&(n.body=JSON.stringify(n.json),s.set("content-type","application/json"));const u=[n.signal];n.timeout!=null&&isNaN(n.timeout)&&n.timeout>0&&u.push(AbortSignal.timeout(n.timeout));const l=zt(u);try{globalThis.ReadableStream!=null&&n.body instanceof globalThis.ReadableStream&&(Qs||ei)&&(n.body=new Blob(await ru(ti(n.body)))),as.trace("outgoing headers",n.headers),as.trace("%s %s",n.method,i);const f=await Nv(i.toString(),{...n,signal:n.signal,timeout:void 0,headers:s,duplex:"half"});if(as("%s %s %d",n.method,i,f.status),as.trace("incoming headers",f.headers),!f.ok&&n.throwHttpErrors===!0)throw n.handleError!=null&&await n.handleError(f),new Cc(f);return f.iterator=async function*(){yield*Pv(f.body)},f.ndjson=async function*(){for await(const h of Dv(f.iterator()))r.transform!=null?yield r.transform(h):yield h},f}finally{l.clear()}}async post(e,r={}){return this.fetch(e,{...r,method:"POST"})}async get(e,r={}){return this.fetch(e,{...r,method:"GET"})}async put(e,r={}){return this.fetch(e,{...r,method:"PUT"})}async delete(e,r={}){return this.fetch(e,{...r,method:"DELETE"})}async options(e,r={}){return this.fetch(e,{...r,method:"OPTIONS"})}};g(Je,"HTTPError",Cc),g(Je,"TimeoutError",fh),g(Je,"post",async(e,r)=>new Je(r).post(e,r)),g(Je,"get",async(e,r)=>new Je(r).get(e,r)),g(Je,"put",async(e,r)=>new Je(r).put(e,r)),g(Je,"delete",async(e,r)=>new Je(r).delete(e,r)),g(Je,"options",async(e,r)=>new Je(r).options(e,r));let gr=Je;const Dv=async function*(t){const e=new TextDecoder;let r="";for await(const n of t){r+=e.decode(n,{stream:!0});const s=r.split(/\r?\n/);for(let i=0;i<s.length-1;i++){const o=s[i].trim();o.length>0&&(yield JSON.parse(o))}r=s[s.length-1]}r+=e.decode(),r=r.trim(),r.length!==0&&(yield JSON.parse(r))},Pv=t=>{if(Ov(t))return t;if(Lv(t)){const e=t[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:e.next.bind(e),return(r){return t.destroy(),typeof e.return=="function"?e.return():Promise.resolve({done:!0,value:r})}}}}}if(Rv(t)){const e=t.getReader();return async function*(){try{for(;;){const{done:r,value:n}=await e.read();if(r)return;n!=null&&(yield n)}}finally{e.releaseLock()}}()}throw new TypeError("Body can't be converted to AsyncIterable")},Ov=t=>t!==null&&typeof t[Symbol.asyncIterator]=="function",Rv=t=>t!=null&&typeof t.getReader=="function",Lv=t=>Object.prototype.hasOwnProperty.call(t,"readable")&&Object.prototype.hasOwnProperty.call(t,"writable"),Fv=[ne("tcp").code,ne("dns").code,ne("dnsaddr").code,ne("dns4").code,ne("dns6").code];function Nc(t){var e;return(e=dh("sni",t))==null?void 0:e[1]}function Tc(t){var r;const e=(r=dh("tcp",t))==null?void 0:r[1];return e==null?"":`:${e}`}function dh(t,e){let r;try{r=ne(t).code}catch{return}for(const[n,s]of e)if(n===r&&s!=null)return[n,s]}function Uc(t){return t.some(([e,r])=>e===ne("tls").code)}function qe(t,e,r){const n=ph[ne(t).name];if(n==null)throw new Error(`Can't interpret protocol ${ne(t).name}`);const s=n(e,r);return t===ne("ip6").code?`[${s}]`:s}const ph={ip4:(t,e)=>t,ip6:(t,e)=>e.length===0?t:`[${t}]`,tcp:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`tcp://${qe(r[0],r[1]??"",e)}:${t}`},udp:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`udp://${qe(r[0],r[1]??"",e)}:${t}`},dnsaddr:(t,e)=>t,dns4:(t,e)=>t,dns6:(t,e)=>t,dns:(t,e)=>t,ipfs:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${qe(r[0],r[1]??"",e)}/ipfs/${t}`},p2p:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${qe(r[0],r[1]??"",e)}/p2p/${t}`},http:(t,e)=>{const r=Uc(e),n=Nc(e),s=Tc(e);if(r&&n!=null)return`https://${n}${s}`;const i=r?"https://":"http://",o=e.pop();if(o==null)throw new Error("Unexpected end of multiaddr");let a=qe(o[0],o[1]??"",e);return a=a.replace("tcp://",""),`${i}${a}`},"http-path":(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");const n=qe(r[0],r[1]??"",e),s=decodeURIComponent(t);return`${n}/${s}`},tls:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return qe(r[0],r[1]??"",e)},sni:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return qe(r[0],r[1]??"",e)},https:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");let n=qe(r[0],r[1]??"",e);return n=n.replace("tcp://",""),`https://${n}`},ws:(t,e)=>{const r=Uc(e),n=Nc(e),s=Tc(e);if(r&&n!=null)return`wss://${n}${s}`;const i=r?"wss://":"ws://",o=e.pop();if(o==null)throw new Error("Unexpected end of multiaddr");let a=qe(o[0],o[1]??"",e);return a=a.replace("tcp://",""),`${i}${a}`},wss:(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");let n=qe(r[0],r[1]??"",e);return n=n.replace("tcp://",""),`wss://${n}`},"p2p-websocket-star":(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${qe(r[0],r[1]??"",e)}/p2p-websocket-star`},"p2p-webrtc-star":(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${qe(r[0],r[1]??"",e)}/p2p-webrtc-star`},"p2p-webrtc-direct":(t,e)=>{const r=e.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${qe(r[0],r[1]??"",e)}/p2p-webrtc-direct`}};function Vv(t,e){const n=Ke(t).stringTuples(),s=n.pop();if(s==null)throw new Error("Unexpected end of multiaddr");const i=ne(s[0]),o=ph[i.name];if(o==null)throw new Error(`No interpreter found for ${i.name}`);let a=o(s[1]??"",n);return Fv.includes(s[0])&&(a=a.replace(/^.*:\/\//,""),s[1]==="443"?a=`https://${a}`:a=`http://${a}`),(a.startsWith("http://")||a.startsWith("https://")||a.startsWith("ws://")||a.startsWith("wss://"))&&(a=new URL(a).toString(),a.endsWith("/")&&(a=a.substring(0,a.length-1))),a}function $c(t){try{t=Vv(Ke(t))}catch{}return t=t.toString(),t}const Dc=fa("js-kubo-rpc-client:lib:error-handler"),Mv=ch.bind({ignoreUndefined:!0}),Hv=Qs||ei?location.protocol:"http",jv=Qs||ei?location.hostname:"localhost",zv=Qs||ei?location.port:"5001",Gv=(t={})=>{let e,r={},n;if(typeof t=="string"||As(t))e=new URL($c(t));else if(t instanceof URL)e=t;else if(typeof t.url=="string"||As(t.url))e=new URL($c(t.url)),r=t;else if(t.url instanceof URL)e=t.url,r=t;else{r=t??{};const s=(r.protocol??Hv).replace(":",""),i=(r.host??jv).split(":")[0],o=r.port??zv;e=new URL(`${s}://${i}:${o}`)}if(r.apiPath!=null?e.pathname=r.apiPath:(e.pathname==="/"||e.pathname===void 0)&&(e.pathname="api/v0"),Ty){const s=dv();n=r.agent??new s({keepAlive:!0,maxSockets:6})}return{...r,host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:n}},qv=async t=>{let e;try{if((t.headers.get("Content-Type")??"").startsWith("application/json")){const n=await t.json();Dc(n),e=n.Message??n.message}else e=await t.text()}catch(n){Dc("Failed to parse error response",n),e=n.message}let r=new gr.HTTPError(t);throw e!=null&&(e.includes("deadline has elapsed")&&(r=new gr.TimeoutError),e.includes("context deadline exceeded")&&(r=new gr.TimeoutError),e.includes("request timed out")&&(r=new gr.TimeoutError),r.message=e),r},Wv=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,Pc=t=>t.replace(Wv,function(e){return"-"+e.toLowerCase()}),Jv=t=>typeof t=="string"?te(t)??0:t;class Zv extends gr{constructor(e={}){const r=Gv(e);super({timeout:r.timeout!=null?Jv(r.timeout):void 0,headers:r.headers,base:`${r.url}`,handleError:qv,transformSearchParams:s=>{const i=new URLSearchParams;for(const[o,a]of s)a!=="undefined"&&a!=="null"&&o!=="signal"&&o!=="timeout"&&i.append(Pc(o),a),o==="timeout"&&!isNaN(parseInt(a))&&i.append(Pc(o),a);return i},agent:r.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;const n=this.fetch;this.fetch=async(s,i={})=>(typeof s=="string"&&!s.startsWith("/")&&(s=`${r.url}/${s}`),n.call(this,s,Mv(i,{method:"POST"})))}}const Kv=async t=>Promise.reject(new Error(`No base found for "${t}"`));class Xv{constructor(e){g(this,"_basesByName");g(this,"_basesByPrefix");g(this,"_loadBase");this._basesByName={},this._basesByPrefix={},this._loadBase=e.loadBase??Kv;for(const r of e.bases)this.addBase(r)}addBase(e){if(this._basesByName[e.name]!=null&&this._basesByPrefix[e.prefix]!=null)throw new Error(`Codec already exists for codec "${e.name}"`);this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}removeBase(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}async getBase(e){if(this._basesByName[e]!=null)return this._basesByName[e];if(this._basesByPrefix[e]!=null)return this._basesByPrefix[e];const r=await this._loadBase(e);return this._basesByName[r.name]==null&&this._basesByPrefix[r.prefix]==null&&this.addBase(r),r}listBases(){return Object.values(this._basesByName)}}const Yv=async t=>Promise.reject(new Error(`No codec found for "${t}"`));class Qv{constructor(e){g(this,"_codecsByName");g(this,"_codecsByCode");g(this,"_loadCodec");this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec??Yv;for(const r of e.codecs)this.addCodec(r)}addCodec(e){if(this._codecsByName[e.name]!=null||this._codecsByCode[e.code]!=null)throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){const r=typeof e=="string"?this._codecsByName:this._codecsByCode;if(r[e]!=null)return r[e];const n=await this._loadCodec(e);return r[e]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}}const eE=async t=>Promise.reject(new Error(`No hasher found for "${t}"`));class tE{constructor(e){g(this,"_hashersByName");g(this,"_hashersByCode");g(this,"_loadHasher");this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher??eE;for(const r of e.hashers)this.addHasher(r)}addHasher(e){if(this._hashersByName[e.name]!=null||this._hashersByCode[e.code]!=null)throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){const r=typeof e=="string"?this._hashersByName:this._hashersByCode;if(r[e]!=null)return r[e];const n=await this._loadHasher(e);return r[e]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}}function rE(t){return async function(e,r,n={}){const s=await t.post("log/level",{signal:n.signal,searchParams:C({arg:[e,r],...n}),headers:n.headers});return Ue(await s.json())}}function nE(t){return async function(r={}){return(await(await t.post("log/ls",{signal:r.signal,searchParams:C(r),headers:r.headers})).json()).Strings}}function sE(t){return async function*(r={}){yield*(await t.post("log/tail",{signal:r.signal,searchParams:C(r),headers:r.headers})).ndjson()}}function iE(t){return{level:rE(t),ls:nE(t),tail:sE(t)}}function oE(t){return async function*(r,n={}){const s=`${r instanceof Uint8Array?J.decode(r):r}`;async function i(a){let c=a.Hash;if(c.includes("/")===!0){const l=c.startsWith("/ipfs/")===!0?c:`/ipfs/${c}`;c=(await nh(t)(l)).cid}else c=J.parse(c);return{name:a.Name,path:s+(a.Name!=null?`/${a.Name}`:""),size:a.Size,cid:c,type:aE(a)}}const o=await t.post("ls",{signal:n.signal,searchParams:C({arg:s,...n}),headers:n.headers});for await(let a of o.ndjson()){if(a=a.Objects,a==null)throw new Error("expected .Objects in results");if(a=a[0],a==null)throw new Error("expected one array in results.Objects");const c=a.Links;if(!Array.isArray(c))throw new Error("expected one array in results.Objects[0].Links");if(c.length===0){yield i(a);return}yield*c.map(i)}}}function aE(t){switch(t.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}function cE(t){return async function(r={}){const n=await t.post("dns",{signal:r.signal,searchParams:C(r),headers:r.headers});return Ue(await n.json())}}function lE(t){return async function(r,n={}){const s=await t.post("name/publish",{signal:n.signal,searchParams:C({arg:`${r}`,...n}),headers:n.headers});return Ue(await s.json())}}function uE(t){return async function(r,n={}){const s=await t.post("name/pubsub/cancel",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers});return Ue(await s.json())}}function fE(t){return async function(r={}){const n=await t.post("name/pubsub/state",{signal:r.signal,searchParams:C(r),headers:r.headers});return Ue(await n.json())}}function hE(t){return async function(r={}){return(await(await t.post("name/pubsub/subs",{signal:r.signal,searchParams:C(r),headers:r.headers})).json()).Strings??[]}}function dE(t){return{cancel:uE(t),state:fE(t),subs:hE(t)}}function pE(t){return async function*(r,n={}){const s=await t.post("name/resolve",{signal:n.signal,searchParams:C({arg:r,stream:!0,...n}),headers:n.headers});for await(const i of s.ndjson())yield i.Path}}function gE(t){return{publish:lE(t),resolve:pE(t),pubsub:dE(t)}}function wE(t){return async function(r,n,s={}){const i=await t.post("object/patch/add-link",{signal:s.signal,searchParams:C({arg:[`${r}`,n.Name??n.name??"",(n.Hash??n.cid??"").toString()??null],...s}),headers:s.headers}),{Hash:o}=await i.json();return J.parse(o)}}function yE(t){return async function(r,n,s={}){const i=await t.post("object/patch/rm-link",{signal:s.signal,searchParams:C({arg:[`${r}`,n.Name??n.name??null],...s}),headers:s.headers}),{Hash:o}=await i.json();return J.parse(o)}}function mE(t){return{addLink:wE(t),rmLink:yE(t)}}function bE(t,e){return{patch:mE(t)}}function xE(t){return Symbol.iterator in t}function vE(t){return Symbol.asyncIterator in t}function Oc(t){return J.asCID(t)!=null}async function*gh(t){if(t==null)throw new ut(`Unexpected input: ${t}`);const e=J.asCID(t);if(e!=null){yield Ve({cid:e});return}if(typeof t=="string"){yield Ve({path:t});return}if(t.cid!=null||t.path!=null)return yield Ve(t);if(xE(t)){const r=t[Symbol.iterator](),n=r.next();if(n.done===!0)return r;if(Oc(n.value)){yield Ve({cid:n.value});for(const s of r)yield Ve({cid:s});return}if(typeof n.value=="string"){yield Ve({path:n.value});for(const s of r)yield Ve({path:s});return}if(n.value.cid!=null||n.value.path!=null){yield Ve(n.value);for(const s of r)yield Ve(s);return}throw new ut(`Unexpected input: ${typeof t}`)}if(vE(t)){const r=t[Symbol.asyncIterator](),n=await r.next();if(n.done===!0)return r;if(Oc(n.value)){yield Ve({cid:n.value});for await(const s of r)yield Ve({cid:s});return}if(typeof n.value=="string"){yield Ve({path:n.value});for await(const s of r)yield Ve({path:s});return}if(n.value.cid!=null||n.value.path!=null){yield Ve(n.value);for await(const s of r)yield Ve(s);return}throw new ut(`Unexpected input: ${typeof t}`)}throw new ut(`Unexpected input: ${typeof t}`)}function Ve(t){const e=t.cid??`${t.path}`;if(e==null)throw new ut("Unexpected input: Please path either a CID or an IPFS path");const r={path:e,recursive:t.recursive!==!1};return t.metadata!=null&&(r.metadata=t.metadata),r}function wh(t){return async function*(r,n={}){for await(const{path:s,recursive:i,metadata:o}of gh(r)){const a=await t.post("pin/add",{signal:n.signal,searchParams:C({...n,arg:s,recursive:i,metadata:o!=null?JSON.stringify(o):void 0,stream:!0}),headers:n.headers});for await(const c of a.ndjson()){if(c.Pins!=null){for(const u of c.Pins)yield J.parse(u);continue}yield J.parse(c)}}}}function EE(t){const e=wh(t);return async function(n,s={}){const i=await si(e([{path:n.toString(),...s}],s));if(i==null)throw new Error("No response received");return i}}function Rc(t,e,r){const n={type:t,cid:J.parse(e)};return r!=null&&(n.metadata=r),n}function SE(t){return async function*(r={}){let n=[];r.paths!=null&&(n=Array.isArray(r.paths)?r.paths:[r.paths]);const s=await t.post("pin/ls",{signal:r.signal,searchParams:C({...r,arg:n.map(i=>`${i}`),stream:!0}),headers:r.headers});for await(const i of s.ndjson()){if(i.Keys!=null){for(const o of Object.keys(i.Keys))yield Rc(i.Keys[o].Type,o,i.Keys[o].Metadata);return}yield Rc(i.Type,i.Cid,i.Metadata)}}}const yh=({Name:t,Status:e,Cid:r})=>({cid:J.parse(r),name:t,status:e}),mh=t=>{if(typeof t=="string"&&t!=="")return t;throw new TypeError("service name must be passed")},bh=t=>{if(J.asCID(t)!=null)return t.toString();throw new TypeError(`CID instance expected instead of ${typeof t}`)},da=({service:t,cid:e,name:r,status:n,all:s})=>{const i=C({service:mh(t),name:r,force:s===!0?!0:void 0});if(e!=null)for(const o of e)i.append("cid",bh(o));if(n!=null)for(const o of n)i.append("status",o);return i},BE=(t,{service:e,background:r,name:n,origins:s})=>{const i=C({arg:bh(t),service:mh(e),name:n,background:r===!0?!0:void 0});if(s!=null)for(const o of s)i.append("origin",o.toString());return i};function AE(t){return async function(r,{timeout:n,signal:s,headers:i,...o}){const a=await t.post("pin/remote/add",{timeout:n,signal:s,headers:i,searchParams:BE(r,o)});return yh(await a.json())}}function kE(t){return async function*({timeout:r,signal:n,headers:s,...i}){const o=await t.post("pin/remote/ls",{timeout:r,signal:n,headers:s,searchParams:da(i)});for await(const a of o.ndjson())yield yh(a)}}function IE(t){return async function({timeout:r,signal:n,headers:s,...i}){await t.post("pin/remote/rm",{timeout:r,signal:n,headers:s,searchParams:da({...i,all:!0})})}}function CE(t){return async function({timeout:r,signal:n,headers:s,...i}){await t.post("pin/remote/rm",{timeout:r,signal:n,headers:s,searchParams:da({...i,all:!1})})}}function _E(t){const e=String(t);if(e==="undefined")throw Error("endpoint is required");return e[e.length-1]==="/"?e.slice(0,-1):e}function NE(t){const e={service:t.Service,endpoint:new URL(t.ApiEndpoint)};return t.Stat!=null&&(e.stat=TE(t.Stat)),e}function TE(t){switch(t.Status){case"valid":{const{Pinning:e,Pinned:r,Queued:n,Failed:s}=t.PinCount;return{status:"valid",pinCount:{queued:n,pinning:e,pinned:r,failed:s}}}case"invalid":return{status:"invalid"};default:return{status:t.Status}}}function UE(t){return async function(r,n){const{endpoint:s,key:i,headers:o,timeout:a,signal:c}=n;await t.post("pin/remote/service/add",{timeout:a,signal:c,searchParams:C({arg:[r,_E(s),i]}),headers:o})}}function $E(t){return async function(r={}){const{stat:n,headers:s,timeout:i,signal:o}=r;return(await(await t.post("pin/remote/service/ls",{timeout:i,signal:o,headers:s,searchParams:n===!0?C({stat:n}):void 0})).json()).RemoteServices.map(NE)}}function DE(t){return async function(r,n={}){await t.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:C({arg:r})})}}function PE(t){return{add:UE(t),ls:$E(t),rm:DE(t)}}function OE(t){return{add:AE(t),ls:kE(t),rm:CE(t),rmAll:IE(t),service:PE(t)}}function xh(t){return async function*(r,n={}){for await(const{path:s,recursive:i}of gh(r)){const o=new URLSearchParams(n.searchParams);o.append("arg",`${s}`),i!=null&&o.set("recursive",String(i));const a=await t.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:C({...n,arg:`${s}`,recursive:i})});for await(const c of a.ndjson()){if(c.Pins!=null){yield*c.Pins.map(u=>J.parse(u));continue}yield J.parse(c)}}}}function RE(t){const e=xh(t);return async function(n,s={}){const i=await si(e([{path:n.toString(),...s}],s));if(i==null)throw new Error("No response received");return i}}function LE(t){return{addAll:wh(t),add:EE(t),ls:SE(t),rmAll:xh(t),rm:RE(t),remote:OE(t)}}function FE(t){return async function*(r,n={}){yield*(await t.post("ping",{signal:n.signal,searchParams:C({arg:`${r}`,...n}),headers:n.headers,transform:Ue})).ndjson()}}const VE=t=>Array.isArray(t)?t.map(wo):t,wo=t=>Ie(Bn(t)),Bn=t=>Js.decode(t),ME=t=>BigInt(`0x${Ie(Js.decode(t),"base16")}`),pa=t=>Js.encode(mt(t));function HE(t){return async function(r={}){const{Strings:n}=await(await t.post("pubsub/ls",{signal:r.signal,searchParams:C(r),headers:r.headers})).json();return VE(n)??[]}}function jE(t){return async function(r,n={}){const s=await t.post("pubsub/peers",{signal:n.signal,searchParams:C({arg:pa(r),...n}),headers:n.headers}),{Strings:i}=await s.json();return i??[]}}function zE(t){return async function(r,n,s={}){const i=C({arg:pa(r),...s}),o=new AbortController,a=zt([o.signal,s.signal]);try{await(await t.post("pubsub/pub",{signal:a,searchParams:i,...await lr([n],o,s.headers)})).text()}finally{a.clear()}}}const GE=fa("js-kubo-rpc-client:pubsub:subscribe");function qE(t,e){return async function(n,s,i={}){i.signal=e.subscribe(n,s,i.signal);let o,a;const c=new Promise((l,f)=>{o=l,a=f}),u=setTimeout(()=>{o()},1e3);return t.post("pubsub/sub",{signal:i.signal,searchParams:C({arg:pa(n),...i}),headers:i.headers}).catch(l=>{e.unsubscribe(n,s),a(l)}).then(l=>{clearTimeout(u),l!=null&&(WE(l,{onMessage:f=>{if(s!=null){if(typeof s=="function"){s(f);return}typeof s.handleEvent=="function"&&s.handleEvent(f)}},onEnd:()=>{e.unsubscribe(n,s)},onError:i.onError}),o())}),c}}async function WE(t,{onMessage:e,onEnd:r,onError:n}){n=n??GE;try{for await(const s of t.ndjson())try{if(s.from==null)continue;s.from!=null&&s.seqno!=null?e({type:"signed",from:rt(s.from),data:Bn(s.data),sequenceNumber:ME(s.seqno),topic:wo(s.topicIDs[0]),key:s.key!=null?y1(Bn(s.key??"u")):void 0,signature:Bn(s.signature??"u")}):e({type:"unsigned",data:Bn(s.data),topic:wo(s.topicIDs[0])})}catch(i){i.message=`Failed to parse pubsub message: ${i.message}`,n(i,!1,s)}}catch(s){JE(s)||n(s,!0)}finally{r()}}const JE=t=>{switch(t.type){case"aborted":return!0;case"abort":return!0;default:return t.name==="AbortError"}};class ZE{constructor(){g(this,"_subs");this._subs=new Map}subscribe(e,r,n){const s=this._subs.get(e)??[];if(s.find(o=>o.handler===r)!=null)throw new Error(`Already subscribed to ${e} with this handler`);const i=new AbortController;return this._subs.set(e,[{handler:r,controller:i}].concat(s)),n!=null&&n.addEventListener("abort",()=>{this.unsubscribe(e,r)}),i.signal}unsubscribe(e,r){const n=this._subs.get(e)??[];let s;r!=null?(this._subs.set(e,n.filter(i=>i.handler!==r)),s=n.filter(i=>i.handler===r)):(this._subs.set(e,[]),s=n),(this._subs.get(e)??[]).length===0&&this._subs.delete(e),s.forEach(i=>{i.controller.abort()})}}function KE(t,e){return async function(n,s){e.unsubscribe(n,s)}}function XE(t){const e=new ZE;return{ls:HE(t),peers:jE(t),publish:zE(t),subscribe:qE(t,e),unsubscribe:KE(t,e)}}function YE(t){return async function*(r={}){yield*(await t.post("refs/local",{signal:r.signal,transform:Ue,searchParams:C(r),headers:r.headers})).ndjson()}}function QE(t){async function*e(r,n={}){const s=Array.isArray(r)?r:[r];yield*(await t.post("refs",{signal:n.signal,searchParams:C({arg:s.map(o=>`${o instanceof Uint8Array?J.decode(o):o}`),...n}),headers:n.headers,transform:Ue})).ndjson()}return Object.assign(e,{local:YE(t)})}function e2(t){return async function*(r={}){yield*(await t.post("repo/gc",{signal:r.signal,searchParams:C(r),headers:r.headers,transform:s=>{var i;return{err:s.Error!=null?new Error(s.Error):null,cid:((i=s.Key)==null?void 0:i["/"])!=null?J.parse(s.Key["/"]):null}}})).ndjson()}}function vh(t){return async function(r={}){const s=await(await t.post("repo/stat",{signal:r.signal,searchParams:C(r),headers:r.headers})).json();return{numObjects:BigInt(s.NumObjects),repoSize:BigInt(s.RepoSize),repoPath:s.RepoPath,version:s.Version,storageMax:BigInt(s.StorageMax)}}}function t2(t){return async function(r={}){return(await(await t.post("repo/version",{signal:r.signal,searchParams:C(r),headers:r.headers})).json()).Version}}function r2(t){return{gc:e2(t),stat:vh(t),version:t2(t)}}function n2(t){return async function(r,n={}){const s=await t.post("resolve",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers}),{Path:i}=await s.json();return i}}function s2(t){return async function*(r,n={}){const s=await t.post("routing/findpeer",{signal:n.signal,searchParams:C({arg:r.toString(),stream:!0,...n}),headers:n.headers});for await(const i of s.ndjson())yield gn(i)}}function i2(t){return async function*(r,n={}){const s=await t.post("routing/findprovs",{signal:n.signal,searchParams:C({arg:r.toString(),...n}),headers:n.headers});for await(const i of s.ndjson())yield gn(i)}}function o2(t){return async function*(r,n={}){const s=await t.post("routing/get",{signal:n.signal,searchParams:C({arg:r instanceof Uint8Array?Ie(r):r.toString(),...n}),headers:n.headers});for await(const i of s.ndjson())yield gn(i)}}function a2(t){return async function*(r,n={recursive:!1}){const s=Array.isArray(r)?r:[r],i=await t.post("routing/provide",{signal:n.signal,searchParams:C({arg:s.map(o=>o.toString()),...n}),headers:n.headers});for await(const o of i.ndjson())yield gn(o)}}function c2(t){return async function*(r,n,s={}){const i=new AbortController,o=zt([i.signal,s.signal]);try{const a=await t.post("routing/put",{signal:o,searchParams:C({arg:r instanceof Uint8Array?Ie(r):r.toString(),stream:!0,...s}),...await lr([n],i,s.headers)});for await(const c of a.ndjson())yield gn(c)}finally{o.clear()}}}function l2(t){return{findPeer:s2(t),findProvs:i2(t),get:o2(t),provide:a2(t),put:c2(t)}}function u2(t){return async function*(r={}){yield*(await t.post("stats/bw",{signal:r.signal,searchParams:C(r),headers:r.headers,transform:s=>({totalIn:BigInt(s.TotalIn),totalOut:BigInt(s.TotalOut),rateIn:parseFloat(s.RateIn),rateOut:parseFloat(s.RateOut)})})).ndjson()}}function f2(t){return{bitswap:th(t),repo:vh(t),bw:u2(t)}}function h2(t){return async function(r={}){await(await t.post("shutdown",{signal:r.signal,searchParams:C(r),headers:r.headers})).text()}}function d2(t){return async function(r={}){const n=await t.post("swarm/addrs",{signal:r.signal,searchParams:C(r),headers:r.headers}),{Addrs:s}=await n.json();return Object.keys(s).map(i=>({id:rt(i),addrs:(s[i]??[]).map(o=>Ke(o))}))}}function p2(t){return async function(r,n={}){const s=await t.post("swarm/connect",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers}),{Strings:i}=await s.json();return i??[]}}function g2(t){return async function(r,n={}){const s=await t.post("swarm/disconnect",{signal:n.signal,searchParams:C({arg:r,...n}),headers:n.headers}),{Strings:i}=await s.json();return i??[]}}function w2(t){return async function(r={}){const n=await t.post("swarm/addrs/local",{signal:r.signal,searchParams:C(r),headers:r.headers}),{Strings:s}=await n.json();return(s??[]).map(i=>Ke(i))}}function y2(t){return async function(r={}){return((await(await t.post("swarm/peers",{signal:r.signal,searchParams:C(r),headers:r.headers})).json()).Peers??[]).map(i=>({addr:Ke(i.Addr),peer:rt(i.Peer),muxer:i.Muxer,latency:i.Latency,streams:i.Streams,direction:i.Direction==null?void 0:i.Direction===0?"inbound":"outbound"}))}}function m2(t){return{addrs:d2(t),connect:p2(t),disconnect:g2(t),localAddrs:w2(t),peers:y2(t)}}function b2(t){return async function(r={}){const n=await t.post("version",{signal:r.signal,searchParams:C(r),headers:r.headers});return{...Ue(await n.json()),"ipfs-http-client":"1.0.0"}}}class x2{constructor(e){g(this,"bases");g(this,"codecs");g(this,"hashers");g(this,"bitswap");g(this,"block");g(this,"bootstrap");g(this,"config");g(this,"dag");g(this,"dht");g(this,"diag");g(this,"files");g(this,"key");g(this,"log");g(this,"name");g(this,"object");g(this,"pin");g(this,"pubsub");g(this,"refs");g(this,"repo");g(this,"routing");g(this,"stats");g(this,"swarm");g(this,"add");g(this,"addAll");g(this,"cat");g(this,"get");g(this,"ls");g(this,"id");g(this,"version");g(this,"stop");g(this,"ping");g(this,"resolve");g(this,"commands");g(this,"mount");g(this,"isOnline");g(this,"getEndpointConfig");var a,c,u,l,f,h;const r=new Zv(e),n={name:br.name,code:br.code,encode:m=>m,decode:m=>m},s=Object.values(Bs);(((a=e.ipld)==null?void 0:a.bases)??[]).forEach(m=>s.push(m)),this.bases=new Xv({bases:s,loadBase:(c=e.ipld)==null?void 0:c.loadBase});const i=Object.values(Vp);[Aw,M0,iw,By,n].concat(((u=e.ipld)==null?void 0:u.codecs)??[]).forEach(m=>{i.push(m)}),this.codecs=new Qv({codecs:i,loadCodec:(l=e.ipld)==null?void 0:l.loadCodec});const o=Object.values(Fp);(((f=e.ipld)==null?void 0:f.hashers)??[]).forEach(m=>o.push(m)),this.hashers=new tE({hashers:o,loadHasher:(h=e.ipld)==null?void 0:h.loadHasher}),this.bitswap=T1(r),this.block=O1(r),this.bootstrap=V1(r),this.config=K1(r),this.dag=sx(r,this.codecs),this.dht=px(r),this.diag=mx(r),this.files=Tx(r),this.key=Mx(r),this.log=iE(r),this.name=gE(r),this.object=bE(r,this.codecs),this.pin=LE(r),this.pubsub=XE(r),this.refs=QE(r),this.repo=r2(r),this.routing=l2(r),this.stats=f2(r),this.swarm=m2(r),this.add=Zy(r),this.addAll=su(r),this.cat=M1(r),this.get=$x(r),this.ls=oE(r),this.id=sh(r),this.version=b2(r),this.stop=h2(r),this.ping=FE(r),this.resolve=n2(r),this.commands=H1(r),this.mount=cE(r),this.isOnline=Dx(r),this.getEndpointConfig=Ux(r)}}function v2(t){return new x2(t)}function E2(t={}){return(typeof t=="string"||As(t)||t instanceof URL)&&(t={url:t}),v2(t)}/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Lc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function _t(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Lc(Object(r),!0).forEach(function(n){S2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lc(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ws(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ws=function(e){return typeof e}:ws=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ws(t)}function S2(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jt(){return jt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jt.apply(this,arguments)}function B2(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function A2(t,e){if(t==null)return{};var r=B2(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var k2="1.15.6";function Ht(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Wt=Ht(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Xn=Ht(/Edge/i),Fc=Ht(/firefox/i),Tn=Ht(/safari/i)&&!Ht(/chrome/i)&&!Ht(/android/i),ga=Ht(/iP(ad|od|hone)/i),Eh=Ht(/chrome/i)&&Ht(/android/i),Sh={capture:!1,passive:!1};function re(t,e,r){t.addEventListener(e,r,!Wt&&Sh)}function ee(t,e,r){t.removeEventListener(e,r,!Wt&&Sh)}function Ms(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function Bh(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function yt(t,e,r,n){if(t){r=r||document;do{if(e!=null&&(e[0]===">"?t.parentNode===r&&Ms(t,e):Ms(t,e))||n&&t===r)return t;if(t===r)break}while(t=Bh(t))}return null}var Vc=/\s+/g;function et(t,e,r){if(t&&e)if(t.classList)t.classList[r?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(Vc," ").replace(" "+e+" "," ");t.className=(n+(r?" "+e:"")).replace(Vc," ")}}function q(t,e,r){var n=t&&t.style;if(n){if(r===void 0)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(r=t.currentStyle),e===void 0?r:r[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=r+(typeof r=="string"?"":"px")}}function Gr(t,e){var r="";if(typeof t=="string")r=t;else do{var n=q(t,"transform");n&&n!=="none"&&(r=n+" "+r)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(r)}function Ah(t,e,r){if(t){var n=t.getElementsByTagName(e),s=0,i=n.length;if(r)for(;s<i;s++)r(n[s],s);return n}return[]}function Ct(){var t=document.scrollingElement;return t||document.documentElement}function Se(t,e,r,n,s){if(!(!t.getBoundingClientRect&&t!==window)){var i,o,a,c,u,l,f;if(t!==window&&t.parentNode&&t!==Ct()?(i=t.getBoundingClientRect(),o=i.top,a=i.left,c=i.bottom,u=i.right,l=i.height,f=i.width):(o=0,a=0,c=window.innerHeight,u=window.innerWidth,l=window.innerHeight,f=window.innerWidth),(e||r)&&t!==window&&(s=s||t.parentNode,!Wt))do if(s&&s.getBoundingClientRect&&(q(s,"transform")!=="none"||r&&q(s,"position")!=="static")){var h=s.getBoundingClientRect();o-=h.top+parseInt(q(s,"border-top-width")),a-=h.left+parseInt(q(s,"border-left-width")),c=o+i.height,u=a+i.width;break}while(s=s.parentNode);if(n&&t!==window){var m=Gr(s||t),w=m&&m.a,y=m&&m.d;m&&(o/=y,a/=w,f/=w,l/=y,c=o+l,u=a+f)}return{top:o,left:a,bottom:c,right:u,width:f,height:l}}}function Mc(t,e,r){for(var n=ir(t,!0),s=Se(t)[e];n;){var i=Se(n)[r],o=void 0;if(o=s>=i,!o)return n;if(n===Ct())break;n=ir(n,!1)}return!1}function on(t,e,r,n){for(var s=0,i=0,o=t.children;i<o.length;){if(o[i].style.display!=="none"&&o[i]!==W.ghost&&(n||o[i]!==W.dragged)&&yt(o[i],r.draggable,t,!1)){if(s===e)return o[i];s++}i++}return null}function wa(t,e){for(var r=t.lastElementChild;r&&(r===W.ghost||q(r,"display")==="none"||e&&!Ms(r,e));)r=r.previousElementSibling;return r||null}function ct(t,e){var r=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==W.clone&&(!e||Ms(t,e))&&r++;return r}function Hc(t){var e=0,r=0,n=Ct();if(t)do{var s=Gr(t),i=s.a,o=s.d;e+=t.scrollLeft*i,r+=t.scrollTop*o}while(t!==n&&(t=t.parentNode));return[e,r]}function I2(t,e){for(var r in t)if(t.hasOwnProperty(r)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[r][n])return Number(r)}return-1}function ir(t,e){if(!t||!t.getBoundingClientRect)return Ct();var r=t,n=!1;do if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var s=q(r);if(r.clientWidth<r.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||r.clientHeight<r.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!r.getBoundingClientRect||r===document.body)return Ct();if(n||e)return r;n=!0}}while(r=r.parentNode);return Ct()}function C2(t,e){if(t&&e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function Di(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Un;function kh(t,e){return function(){if(!Un){var r=arguments,n=this;r.length===1?t.call(n,r[0]):t.apply(n,r),Un=setTimeout(function(){Un=void 0},e)}}}function _2(){clearTimeout(Un),Un=void 0}function Ih(t,e,r){t.scrollLeft+=e,t.scrollTop+=r}function Ch(t){var e=window.Polymer,r=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):r?r(t).clone(!0)[0]:t.cloneNode(!0)}function _h(t,e,r){var n={};return Array.from(t.children).forEach(function(s){var i,o,a,c;if(!(!yt(s,e.draggable,t,!1)||s.animated||s===r)){var u=Se(s);n.left=Math.min((i=n.left)!==null&&i!==void 0?i:1/0,u.left),n.top=Math.min((o=n.top)!==null&&o!==void 0?o:1/0,u.top),n.right=Math.max((a=n.right)!==null&&a!==void 0?a:-1/0,u.right),n.bottom=Math.max((c=n.bottom)!==null&&c!==void 0?c:-1/0,u.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var Ze="Sortable"+new Date().getTime();function N2(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(s){if(!(q(s,"display")==="none"||s===W.ghost)){t.push({target:s,rect:Se(s)});var i=_t({},t[t.length-1].rect);if(s.thisAnimationDuration){var o=Gr(s,!0);o&&(i.top-=o.f,i.left-=o.e)}s.fromRect=i}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(I2(t,{target:n}),1)},animateAll:function(n){var s=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var i=!1,o=0;t.forEach(function(a){var c=0,u=a.target,l=u.fromRect,f=Se(u),h=u.prevFromRect,m=u.prevToRect,w=a.rect,y=Gr(u,!0);y&&(f.top-=y.f,f.left-=y.e),u.toRect=f,u.thisAnimationDuration&&Di(h,f)&&!Di(l,f)&&(w.top-f.top)/(w.left-f.left)===(l.top-f.top)/(l.left-f.left)&&(c=U2(w,h,m,s.options)),Di(f,l)||(u.prevFromRect=l,u.prevToRect=f,c||(c=s.options.animation),s.animate(u,w,f,c)),c&&(i=!0,o=Math.max(o,c),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},c),u.thisAnimationDuration=c)}),clearTimeout(e),i?e=setTimeout(function(){typeof n=="function"&&n()},o):typeof n=="function"&&n(),t=[]},animate:function(n,s,i,o){if(o){q(n,"transition",""),q(n,"transform","");var a=Gr(this.el),c=a&&a.a,u=a&&a.d,l=(s.left-i.left)/(c||1),f=(s.top-i.top)/(u||1);n.animatingX=!!l,n.animatingY=!!f,q(n,"transform","translate3d("+l+"px,"+f+"px,0)"),this.forRepaintDummy=T2(n),q(n,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),q(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){q(n,"transition",""),q(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},o)}}}}function T2(t){return t.offsetWidth}function U2(t,e,r,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))*n.animation}var Rr=[],Pi={initializeByDefault:!0},Yn={mount:function(e){for(var r in Pi)Pi.hasOwnProperty(r)&&!(r in e)&&(e[r]=Pi[r]);Rr.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Rr.push(e)},pluginEvent:function(e,r,n){var s=this;this.eventCanceled=!1,n.cancel=function(){s.eventCanceled=!0};var i=e+"Global";Rr.forEach(function(o){r[o.pluginName]&&(r[o.pluginName][i]&&r[o.pluginName][i](_t({sortable:r},n)),r.options[o.pluginName]&&r[o.pluginName][e]&&r[o.pluginName][e](_t({sortable:r},n)))})},initializePlugins:function(e,r,n,s){Rr.forEach(function(a){var c=a.pluginName;if(!(!e.options[c]&&!a.initializeByDefault)){var u=new a(e,r,e.options);u.sortable=e,u.options=e.options,e[c]=u,jt(n,u.defaults)}});for(var i in e.options)if(e.options.hasOwnProperty(i)){var o=this.modifyOption(e,i,e.options[i]);typeof o<"u"&&(e.options[i]=o)}},getEventProperties:function(e,r){var n={};return Rr.forEach(function(s){typeof s.eventProperties=="function"&&jt(n,s.eventProperties.call(r[s.pluginName],e))}),n},modifyOption:function(e,r,n){var s;return Rr.forEach(function(i){e[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[r]=="function"&&(s=i.optionListeners[r].call(e[i.pluginName],n))}),s}};function $2(t){var e=t.sortable,r=t.rootEl,n=t.name,s=t.targetEl,i=t.cloneEl,o=t.toEl,a=t.fromEl,c=t.oldIndex,u=t.newIndex,l=t.oldDraggableIndex,f=t.newDraggableIndex,h=t.originalEvent,m=t.putSortable,w=t.extraEventProperties;if(e=e||r&&r[Ze],!!e){var y,p=e.options,v="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Wt&&!Xn?y=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(y=document.createEvent("Event"),y.initEvent(n,!0,!0)),y.to=o||r,y.from=a||r,y.item=s||r,y.clone=i,y.oldIndex=c,y.newIndex=u,y.oldDraggableIndex=l,y.newDraggableIndex=f,y.originalEvent=h,y.pullMode=m?m.lastPutMode:void 0;var S=_t(_t({},w),Yn.getEventProperties(n,e));for(var b in S)y[b]=S[b];r&&r.dispatchEvent(y),p[v]&&p[v].call(e,y)}}var D2=["evt"],We=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=n.evt,i=A2(n,D2);Yn.pluginEvent.bind(W)(e,r,_t({dragEl:U,parentEl:we,ghostEl:Z,rootEl:he,nextEl:dr,lastDownEl:ys,cloneEl:pe,cloneHidden:rr,dragStarted:An,putSortable:Ce,activeSortable:W.active,originalEvent:s,oldIndex:Mr,oldDraggableIndex:$n,newIndex:tt,newDraggableIndex:tr,hideGhostForTarget:$h,unhideGhostForTarget:Dh,cloneNowHidden:function(){rr=!0},cloneNowShown:function(){rr=!1},dispatchSortableEvent:function(a){Me({sortable:r,name:a,originalEvent:s})}},i))};function Me(t){$2(_t({putSortable:Ce,cloneEl:pe,targetEl:U,rootEl:he,oldIndex:Mr,oldDraggableIndex:$n,newIndex:tt,newDraggableIndex:tr},t))}var U,we,Z,he,dr,ys,pe,rr,Mr,tt,$n,tr,cs,Ce,Fr=!1,Hs=!1,js=[],fr,gt,Oi,Ri,jc,zc,An,Lr,Dn,Pn=!1,ls=!1,ms,De,Li=[],yo=!1,zs=[],di=typeof document<"u",us=ga,Gc=Xn||Wt?"cssFloat":"float",P2=di&&!Eh&&!ga&&"draggable"in document.createElement("div"),Nh=function(){if(di){if(Wt)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Th=function(e,r){var n=q(e),s=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=on(e,0,r),o=on(e,1,r),a=i&&q(i),c=o&&q(o),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Se(i).width,l=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+Se(o).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&a.float&&a.float!=="none"){var f=a.float==="left"?"left":"right";return o&&(c.clear==="both"||c.clear===f)?"vertical":"horizontal"}return i&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=s&&n[Gc]==="none"||o&&n[Gc]==="none"&&u+l>s)?"vertical":"horizontal"},O2=function(e,r,n){var s=n?e.left:e.top,i=n?e.right:e.bottom,o=n?e.width:e.height,a=n?r.left:r.top,c=n?r.right:r.bottom,u=n?r.width:r.height;return s===a||i===c||s+o/2===a+u/2},R2=function(e,r){var n;return js.some(function(s){var i=s[Ze].options.emptyInsertThreshold;if(!(!i||wa(s))){var o=Se(s),a=e>=o.left-i&&e<=o.right+i,c=r>=o.top-i&&r<=o.bottom+i;if(a&&c)return n=s}}),n},Uh=function(e){function r(i,o){return function(a,c,u,l){var f=a.options.group.name&&c.options.group.name&&a.options.group.name===c.options.group.name;if(i==null&&(o||f))return!0;if(i==null||i===!1)return!1;if(o&&i==="clone")return i;if(typeof i=="function")return r(i(a,c,u,l),o)(a,c,u,l);var h=(o?a:c).options.group.name;return i===!0||typeof i=="string"&&i===h||i.join&&i.indexOf(h)>-1}}var n={},s=e.group;(!s||ws(s)!="object")&&(s={name:s}),n.name=s.name,n.checkPull=r(s.pull,!0),n.checkPut=r(s.put),n.revertClone=s.revertClone,e.group=n},$h=function(){!Nh&&Z&&q(Z,"display","none")},Dh=function(){!Nh&&Z&&q(Z,"display","")};di&&!Eh&&document.addEventListener("click",function(t){if(Hs)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Hs=!1,!1},!0);var hr=function(e){if(U){e=e.touches?e.touches[0]:e;var r=R2(e.clientX,e.clientY);if(r){var n={};for(var s in e)e.hasOwnProperty(s)&&(n[s]=e[s]);n.target=n.rootEl=r,n.preventDefault=void 0,n.stopPropagation=void 0,r[Ze]._onDragOver(n)}}},L2=function(e){U&&U.parentNode[Ze]._isOutsideThisEl(e.target)};function W(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=jt({},e),t[Ze]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Th(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:W.supportPointer!==!1&&"PointerEvent"in window&&(!Tn||ga),emptyInsertThreshold:5};Yn.initializePlugins(this,t,r);for(var n in r)!(n in e)&&(e[n]=r[n]);Uh(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:P2,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?re(t,"pointerdown",this._onTapStart):(re(t,"mousedown",this._onTapStart),re(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(re(t,"dragover",this),re(t,"dragenter",this)),js.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),jt(this,N2())}W.prototype={constructor:W,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Lr=null)},_getDirection:function(e,r){return typeof this.options.direction=="function"?this.options.direction.call(this,e,r,U):this.options.direction},_onTapStart:function(e){if(e.cancelable){var r=this,n=this.el,s=this.options,i=s.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,c=(a||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||c,l=s.filter;if(q2(n),!U&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||s.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Tn&&c&&c.tagName.toUpperCase()==="SELECT")&&(c=yt(c,s.draggable,n,!1),!(c&&c.animated)&&ys!==c)){if(Mr=ct(c),$n=ct(c,s.draggable),typeof l=="function"){if(l.call(this,e,c,this)){Me({sortable:r,rootEl:u,name:"filter",targetEl:c,toEl:n,fromEl:n}),We("filter",r,{evt:e}),i&&e.preventDefault();return}}else if(l&&(l=l.split(",").some(function(f){if(f=yt(u,f.trim(),n,!1),f)return Me({sortable:r,rootEl:f,name:"filter",targetEl:c,fromEl:n,toEl:n}),We("filter",r,{evt:e}),!0}),l)){i&&e.preventDefault();return}s.handle&&!yt(u,s.handle,n,!1)||this._prepareDragStart(e,a,c)}}},_prepareDragStart:function(e,r,n){var s=this,i=s.el,o=s.options,a=i.ownerDocument,c;if(n&&!U&&n.parentNode===i){var u=Se(n);if(he=i,U=n,we=U.parentNode,dr=U.nextSibling,ys=n,cs=o.group,W.dragged=U,fr={target:U,clientX:(r||e).clientX,clientY:(r||e).clientY},jc=fr.clientX-u.left,zc=fr.clientY-u.top,this._lastX=(r||e).clientX,this._lastY=(r||e).clientY,U.style["will-change"]="all",c=function(){if(We("delayEnded",s,{evt:e}),W.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!Fc&&s.nativeDraggable&&(U.draggable=!0),s._triggerDragStart(e,r),Me({sortable:s,name:"choose",originalEvent:e}),et(U,o.chosenClass,!0)},o.ignore.split(",").forEach(function(l){Ah(U,l.trim(),Fi)}),re(a,"dragover",hr),re(a,"mousemove",hr),re(a,"touchmove",hr),o.supportPointer?(re(a,"pointerup",s._onDrop),!this.nativeDraggable&&re(a,"pointercancel",s._onDrop)):(re(a,"mouseup",s._onDrop),re(a,"touchend",s._onDrop),re(a,"touchcancel",s._onDrop)),Fc&&this.nativeDraggable&&(this.options.touchStartThreshold=4,U.draggable=!0),We("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||r)&&(!this.nativeDraggable||!(Xn||Wt))){if(W.eventCanceled){this._onDrop();return}o.supportPointer?(re(a,"pointerup",s._disableDelayedDrag),re(a,"pointercancel",s._disableDelayedDrag)):(re(a,"mouseup",s._disableDelayedDrag),re(a,"touchend",s._disableDelayedDrag),re(a,"touchcancel",s._disableDelayedDrag)),re(a,"mousemove",s._delayedDragTouchMoveHandler),re(a,"touchmove",s._delayedDragTouchMoveHandler),o.supportPointer&&re(a,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(c,o.delay)}else c()}},_delayedDragTouchMoveHandler:function(e){var r=e.touches?e.touches[0]:e;Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){U&&Fi(U),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;ee(e,"mouseup",this._disableDelayedDrag),ee(e,"touchend",this._disableDelayedDrag),ee(e,"touchcancel",this._disableDelayedDrag),ee(e,"pointerup",this._disableDelayedDrag),ee(e,"pointercancel",this._disableDelayedDrag),ee(e,"mousemove",this._delayedDragTouchMoveHandler),ee(e,"touchmove",this._delayedDragTouchMoveHandler),ee(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,r){r=r||e.pointerType=="touch"&&e,!this.nativeDraggable||r?this.options.supportPointer?re(document,"pointermove",this._onTouchMove):r?re(document,"touchmove",this._onTouchMove):re(document,"mousemove",this._onTouchMove):(re(U,"dragend",this),re(he,"dragstart",this._onDragStart));try{document.selection?bs(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,r){if(Fr=!1,he&&U){We("dragStarted",this,{evt:r}),this.nativeDraggable&&re(document,"dragover",L2);var n=this.options;!e&&et(U,n.dragClass,!1),et(U,n.ghostClass,!0),W.active=this,e&&this._appendGhost(),Me({sortable:this,name:"start",originalEvent:r})}else this._nulling()},_emulateDragOver:function(){if(gt){this._lastX=gt.clientX,this._lastY=gt.clientY,$h();for(var e=document.elementFromPoint(gt.clientX,gt.clientY),r=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(gt.clientX,gt.clientY),e!==r);)r=e;if(U.parentNode[Ze]._isOutsideThisEl(e),r)do{if(r[Ze]){var n=void 0;if(n=r[Ze]._onDragOver({clientX:gt.clientX,clientY:gt.clientY,target:e,rootEl:r}),n&&!this.options.dragoverBubble)break}e=r}while(r=Bh(r));Dh()}},_onTouchMove:function(e){if(fr){var r=this.options,n=r.fallbackTolerance,s=r.fallbackOffset,i=e.touches?e.touches[0]:e,o=Z&&Gr(Z,!0),a=Z&&o&&o.a,c=Z&&o&&o.d,u=us&&De&&Hc(De),l=(i.clientX-fr.clientX+s.x)/(a||1)+(u?u[0]-Li[0]:0)/(a||1),f=(i.clientY-fr.clientY+s.y)/(c||1)+(u?u[1]-Li[1]:0)/(c||1);if(!W.active&&!Fr){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Z){o?(o.e+=l-(Oi||0),o.f+=f-(Ri||0)):o={a:1,b:0,c:0,d:1,e:l,f};var h="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");q(Z,"webkitTransform",h),q(Z,"mozTransform",h),q(Z,"msTransform",h),q(Z,"transform",h),Oi=l,Ri=f,gt=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Z){var e=this.options.fallbackOnBody?document.body:he,r=Se(U,!0,us,!0,e),n=this.options;if(us){for(De=e;q(De,"position")==="static"&&q(De,"transform")==="none"&&De!==document;)De=De.parentNode;De!==document.body&&De!==document.documentElement?(De===document&&(De=Ct()),r.top+=De.scrollTop,r.left+=De.scrollLeft):De=Ct(),Li=Hc(De)}Z=U.cloneNode(!0),et(Z,n.ghostClass,!1),et(Z,n.fallbackClass,!0),et(Z,n.dragClass,!0),q(Z,"transition",""),q(Z,"transform",""),q(Z,"box-sizing","border-box"),q(Z,"margin",0),q(Z,"top",r.top),q(Z,"left",r.left),q(Z,"width",r.width),q(Z,"height",r.height),q(Z,"opacity","0.8"),q(Z,"position",us?"absolute":"fixed"),q(Z,"zIndex","100000"),q(Z,"pointerEvents","none"),W.ghost=Z,e.appendChild(Z),q(Z,"transform-origin",jc/parseInt(Z.style.width)*100+"% "+zc/parseInt(Z.style.height)*100+"%")}},_onDragStart:function(e,r){var n=this,s=e.dataTransfer,i=n.options;if(We("dragStart",this,{evt:e}),W.eventCanceled){this._onDrop();return}We("setupClone",this),W.eventCanceled||(pe=Ch(U),pe.removeAttribute("id"),pe.draggable=!1,pe.style["will-change"]="",this._hideClone(),et(pe,this.options.chosenClass,!1),W.clone=pe),n.cloneId=bs(function(){We("clone",n),!W.eventCanceled&&(n.options.removeCloneOnHide||he.insertBefore(pe,U),n._hideClone(),Me({sortable:n,name:"clone"}))}),!r&&et(U,i.dragClass,!0),r?(Hs=!0,n._loopId=setInterval(n._emulateDragOver,50)):(ee(document,"mouseup",n._onDrop),ee(document,"touchend",n._onDrop),ee(document,"touchcancel",n._onDrop),s&&(s.effectAllowed="move",i.setData&&i.setData.call(n,s,U)),re(document,"drop",n),q(U,"transform","translateZ(0)")),Fr=!0,n._dragStartId=bs(n._dragStarted.bind(n,r,e)),re(document,"selectstart",n),An=!0,window.getSelection().removeAllRanges(),Tn&&q(document.body,"user-select","none")},_onDragOver:function(e){var r=this.el,n=e.target,s,i,o,a=this.options,c=a.group,u=W.active,l=cs===c,f=a.sort,h=Ce||u,m,w=this,y=!1;if(yo)return;function p(k,R){We(k,w,_t({evt:e,isOwner:l,axis:m?"vertical":"horizontal",revert:o,dragRect:s,targetRect:i,canSort:f,fromSortable:h,target:n,completed:S,onMove:function(z,Y){return fs(he,r,U,s,z,Se(z),e,Y)},changed:b},R))}function v(){p("dragOverAnimationCapture"),w.captureAnimationState(),w!==h&&h.captureAnimationState()}function S(k){return p("dragOverCompleted",{insertion:k}),k&&(l?u._hideClone():u._showClone(w),w!==h&&(et(U,Ce?Ce.options.ghostClass:u.options.ghostClass,!1),et(U,a.ghostClass,!0)),Ce!==w&&w!==W.active?Ce=w:w===W.active&&Ce&&(Ce=null),h===w&&(w._ignoreWhileAnimating=n),w.animateAll(function(){p("dragOverAnimationComplete"),w._ignoreWhileAnimating=null}),w!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(n===U&&!U.animated||n===r&&!n.animated)&&(Lr=null),!a.dragoverBubble&&!e.rootEl&&n!==document&&(U.parentNode[Ze]._isOutsideThisEl(e.target),!k&&hr(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),y=!0}function b(){tt=ct(U),tr=ct(U,a.draggable),Me({sortable:w,name:"change",toEl:r,newIndex:tt,newDraggableIndex:tr,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=yt(n,a.draggable,r,!0),p("dragOver"),W.eventCanceled)return y;if(U.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||w._ignoreWhileAnimating===n)return S(!1);if(Hs=!1,u&&!a.disabled&&(l?f||(o=we!==he):Ce===this||(this.lastPutMode=cs.checkPull(this,u,U,e))&&c.checkPut(this,u,U,e))){if(m=this._getDirection(e,n)==="vertical",s=Se(U),p("dragOverValid"),W.eventCanceled)return y;if(o)return we=he,v(),this._hideClone(),p("revert"),W.eventCanceled||(dr?he.insertBefore(U,dr):he.appendChild(U)),S(!0);var B=wa(r,a.draggable);if(!B||H2(e,m,this)&&!B.animated){if(B===U)return S(!1);if(B&&r===e.target&&(n=B),n&&(i=Se(n)),fs(he,r,U,s,n,i,e,!!n)!==!1)return v(),B&&B.nextSibling?r.insertBefore(U,B.nextSibling):r.appendChild(U),we=r,b(),S(!0)}else if(B&&M2(e,m,this)){var O=on(r,0,a,!0);if(O===U)return S(!1);if(n=O,i=Se(n),fs(he,r,U,s,n,i,e,!1)!==!1)return v(),r.insertBefore(U,O),we=r,b(),S(!0)}else if(n.parentNode===r){i=Se(n);var T=0,_,$=U.parentNode!==r,I=!O2(U.animated&&U.toRect||s,n.animated&&n.toRect||i,m),M=m?"top":"left",L=Mc(n,"top","top")||Mc(U,"top","top"),V=L?L.scrollTop:void 0;Lr!==n&&(_=i[M],Pn=!1,ls=!I&&a.invertSwap||$),T=j2(e,n,i,m,I?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,ls,Lr===n);var X;if(T!==0){var A=ct(U);do A-=T,X=we.children[A];while(X&&(q(X,"display")==="none"||X===Z))}if(T===0||X===n)return S(!1);Lr=n,Dn=T;var D=n.nextElementSibling,E=!1;E=T===1;var x=fs(he,r,U,s,n,i,e,E);if(x!==!1)return(x===1||x===-1)&&(E=x===1),yo=!0,setTimeout(V2,30),v(),E&&!D?r.appendChild(U):n.parentNode.insertBefore(U,E?D:n),L&&Ih(L,0,V-L.scrollTop),we=U.parentNode,_!==void 0&&!ls&&(ms=Math.abs(_-Se(n)[M])),b(),S(!0)}if(r.contains(U))return S(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ee(document,"mousemove",this._onTouchMove),ee(document,"touchmove",this._onTouchMove),ee(document,"pointermove",this._onTouchMove),ee(document,"dragover",hr),ee(document,"mousemove",hr),ee(document,"touchmove",hr)},_offUpEvents:function(){var e=this.el.ownerDocument;ee(e,"mouseup",this._onDrop),ee(e,"touchend",this._onDrop),ee(e,"pointerup",this._onDrop),ee(e,"pointercancel",this._onDrop),ee(e,"touchcancel",this._onDrop),ee(document,"selectstart",this)},_onDrop:function(e){var r=this.el,n=this.options;if(tt=ct(U),tr=ct(U,n.draggable),We("drop",this,{evt:e}),we=U&&U.parentNode,tt=ct(U),tr=ct(U,n.draggable),W.eventCanceled){this._nulling();return}Fr=!1,ls=!1,Pn=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),mo(this.cloneId),mo(this._dragStartId),this.nativeDraggable&&(ee(document,"drop",this),ee(r,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Tn&&q(document.body,"user-select",""),q(U,"transform",""),e&&(An&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Z&&Z.parentNode&&Z.parentNode.removeChild(Z),(he===we||Ce&&Ce.lastPutMode!=="clone")&&pe&&pe.parentNode&&pe.parentNode.removeChild(pe),U&&(this.nativeDraggable&&ee(U,"dragend",this),Fi(U),U.style["will-change"]="",An&&!Fr&&et(U,Ce?Ce.options.ghostClass:this.options.ghostClass,!1),et(U,this.options.chosenClass,!1),Me({sortable:this,name:"unchoose",toEl:we,newIndex:null,newDraggableIndex:null,originalEvent:e}),he!==we?(tt>=0&&(Me({rootEl:we,name:"add",toEl:we,fromEl:he,originalEvent:e}),Me({sortable:this,name:"remove",toEl:we,originalEvent:e}),Me({rootEl:we,name:"sort",toEl:we,fromEl:he,originalEvent:e}),Me({sortable:this,name:"sort",toEl:we,originalEvent:e})),Ce&&Ce.save()):tt!==Mr&&tt>=0&&(Me({sortable:this,name:"update",toEl:we,originalEvent:e}),Me({sortable:this,name:"sort",toEl:we,originalEvent:e})),W.active&&((tt==null||tt===-1)&&(tt=Mr,tr=$n),Me({sortable:this,name:"end",toEl:we,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){We("nulling",this),he=U=we=Z=dr=pe=ys=rr=fr=gt=An=tt=tr=Mr=$n=Lr=Dn=Ce=cs=W.dragged=W.ghost=W.clone=W.active=null,zs.forEach(function(e){e.checked=!0}),zs.length=Oi=Ri=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":U&&(this._onDragOver(e),F2(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],r,n=this.el.children,s=0,i=n.length,o=this.options;s<i;s++)r=n[s],yt(r,o.draggable,this.el,!1)&&e.push(r.getAttribute(o.dataIdAttr)||G2(r));return e},sort:function(e,r){var n={},s=this.el;this.toArray().forEach(function(i,o){var a=s.children[o];yt(a,this.options.draggable,s,!1)&&(n[i]=a)},this),r&&this.captureAnimationState(),e.forEach(function(i){n[i]&&(s.removeChild(n[i]),s.appendChild(n[i]))}),r&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,r){return yt(e,r||this.options.draggable,this.el,!1)},option:function(e,r){var n=this.options;if(r===void 0)return n[e];var s=Yn.modifyOption(this,e,r);typeof s<"u"?n[e]=s:n[e]=r,e==="group"&&Uh(n)},destroy:function(){We("destroy",this);var e=this.el;e[Ze]=null,ee(e,"mousedown",this._onTapStart),ee(e,"touchstart",this._onTapStart),ee(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(ee(e,"dragover",this),ee(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(r){r.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),js.splice(js.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!rr){if(We("hideClone",this),W.eventCanceled)return;q(pe,"display","none"),this.options.removeCloneOnHide&&pe.parentNode&&pe.parentNode.removeChild(pe),rr=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(rr){if(We("showClone",this),W.eventCanceled)return;U.parentNode==he&&!this.options.group.revertClone?he.insertBefore(pe,U):dr?he.insertBefore(pe,dr):he.appendChild(pe),this.options.group.revertClone&&this.animate(U,pe),q(pe,"display",""),rr=!1}}};function F2(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function fs(t,e,r,n,s,i,o,a){var c,u=t[Ze],l=u.options.onMove,f;return window.CustomEvent&&!Wt&&!Xn?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=e,c.from=t,c.dragged=r,c.draggedRect=n,c.related=s||e,c.relatedRect=i||Se(e),c.willInsertAfter=a,c.originalEvent=o,t.dispatchEvent(c),l&&(f=l.call(u,c,o)),f}function Fi(t){t.draggable=!1}function V2(){yo=!1}function M2(t,e,r){var n=Se(on(r.el,0,r.options,!0)),s=_h(r.el,r.options,Z),i=10;return e?t.clientX<s.left-i||t.clientY<n.top&&t.clientX<n.right:t.clientY<s.top-i||t.clientY<n.bottom&&t.clientX<n.left}function H2(t,e,r){var n=Se(wa(r.el,r.options.draggable)),s=_h(r.el,r.options,Z),i=10;return e?t.clientX>s.right+i||t.clientY>n.bottom&&t.clientX>n.left:t.clientY>s.bottom+i||t.clientX>n.right&&t.clientY>n.top}function j2(t,e,r,n,s,i,o,a){var c=n?t.clientY:t.clientX,u=n?r.height:r.width,l=n?r.top:r.left,f=n?r.bottom:r.right,h=!1;if(!o){if(a&&ms<u*s){if(!Pn&&(Dn===1?c>l+u*i/2:c<f-u*i/2)&&(Pn=!0),Pn)h=!0;else if(Dn===1?c<l+ms:c>f-ms)return-Dn}else if(c>l+u*(1-s)/2&&c<f-u*(1-s)/2)return z2(e)}return h=h||o,h&&(c<l+u*i/2||c>f-u*i/2)?c>l+u/2?1:-1:0}function z2(t){return ct(U)<ct(t)?1:-1}function G2(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,r=e.length,n=0;r--;)n+=e.charCodeAt(r);return n.toString(36)}function q2(t){zs.length=0;for(var e=t.getElementsByTagName("input"),r=e.length;r--;){var n=e[r];n.checked&&zs.push(n)}}function bs(t){return setTimeout(t,0)}function mo(t){return clearTimeout(t)}di&&re(document,"touchmove",function(t){(W.active||Fr)&&t.cancelable&&t.preventDefault()});W.utils={on:re,off:ee,css:q,find:Ah,is:function(e,r){return!!yt(e,r,e,!1)},extend:C2,throttle:kh,closest:yt,toggleClass:et,clone:Ch,index:ct,nextTick:bs,cancelNextTick:mo,detectDirection:Th,getChild:on,expando:Ze};W.get=function(t){return t[Ze]};W.mount=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(W.utils=_t(_t({},W.utils),n.utils)),Yn.mount(n)})};W.create=function(t,e){return new W(t,e)};W.version=k2;var ve=[],kn,bo,xo=!1,Vi,Mi,Gs,In;function W2(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(r){var n=r.originalEvent;this.sortable.nativeDraggable?re(document,"dragover",this._handleAutoScroll):this.options.supportPointer?re(document,"pointermove",this._handleFallbackAutoScroll):n.touches?re(document,"touchmove",this._handleFallbackAutoScroll):re(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(r){var n=r.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?ee(document,"dragover",this._handleAutoScroll):(ee(document,"pointermove",this._handleFallbackAutoScroll),ee(document,"touchmove",this._handleFallbackAutoScroll),ee(document,"mousemove",this._handleFallbackAutoScroll)),qc(),xs(),_2()},nulling:function(){Gs=bo=kn=xo=In=Vi=Mi=null,ve.length=0},_handleFallbackAutoScroll:function(r){this._handleAutoScroll(r,!0)},_handleAutoScroll:function(r,n){var s=this,i=(r.touches?r.touches[0]:r).clientX,o=(r.touches?r.touches[0]:r).clientY,a=document.elementFromPoint(i,o);if(Gs=r,n||this.options.forceAutoScrollFallback||Xn||Wt||Tn){Hi(r,this.options,a,n);var c=ir(a,!0);xo&&(!In||i!==Vi||o!==Mi)&&(In&&qc(),In=setInterval(function(){var u=ir(document.elementFromPoint(i,o),!0);u!==c&&(c=u,xs()),Hi(r,s.options,u,n)},10),Vi=i,Mi=o)}else{if(!this.options.bubbleScroll||ir(a,!0)===Ct()){xs();return}Hi(r,this.options,ir(a,!1),!1)}}},jt(t,{pluginName:"scroll",initializeByDefault:!0})}function xs(){ve.forEach(function(t){clearInterval(t.pid)}),ve=[]}function qc(){clearInterval(In)}var Hi=kh(function(t,e,r,n){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,c=Ct(),u=!1,l;bo!==r&&(bo=r,xs(),kn=e.scroll,l=e.scrollFn,kn===!0&&(kn=ir(r,!0)));var f=0,h=kn;do{var m=h,w=Se(m),y=w.top,p=w.bottom,v=w.left,S=w.right,b=w.width,B=w.height,O=void 0,T=void 0,_=m.scrollWidth,$=m.scrollHeight,I=q(m),M=m.scrollLeft,L=m.scrollTop;m===c?(O=b<_&&(I.overflowX==="auto"||I.overflowX==="scroll"||I.overflowX==="visible"),T=B<$&&(I.overflowY==="auto"||I.overflowY==="scroll"||I.overflowY==="visible")):(O=b<_&&(I.overflowX==="auto"||I.overflowX==="scroll"),T=B<$&&(I.overflowY==="auto"||I.overflowY==="scroll"));var V=O&&(Math.abs(S-s)<=o&&M+b<_)-(Math.abs(v-s)<=o&&!!M),X=T&&(Math.abs(p-i)<=o&&L+B<$)-(Math.abs(y-i)<=o&&!!L);if(!ve[f])for(var A=0;A<=f;A++)ve[A]||(ve[A]={});(ve[f].vx!=V||ve[f].vy!=X||ve[f].el!==m)&&(ve[f].el=m,ve[f].vx=V,ve[f].vy=X,clearInterval(ve[f].pid),(V!=0||X!=0)&&(u=!0,ve[f].pid=setInterval((function(){n&&this.layer===0&&W.active._onTouchMove(Gs);var D=ve[this.layer].vy?ve[this.layer].vy*a:0,E=ve[this.layer].vx?ve[this.layer].vx*a:0;typeof l=="function"&&l.call(W.dragged.parentNode[Ze],E,D,t,Gs,ve[this.layer].el)!=="continue"||Ih(ve[this.layer].el,E,D)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&h!==c&&(h=ir(h,!1)));xo=u}},30),Ph=function(e){var r=e.originalEvent,n=e.putSortable,s=e.dragEl,i=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,c=e.unhideGhostForTarget;if(r){var u=n||i;a();var l=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r,f=document.elementFromPoint(l.clientX,l.clientY);c(),u&&!u.el.contains(f)&&(o("spill"),this.onSpill({dragEl:s,putSortable:n}))}};function ya(){}ya.prototype={startIndex:null,dragStart:function(e){var r=e.oldDraggableIndex;this.startIndex=r},onSpill:function(e){var r=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var s=on(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(r,s):this.sortable.el.appendChild(r),this.sortable.animateAll(),n&&n.animateAll()},drop:Ph};jt(ya,{pluginName:"revertOnSpill"});function ma(){}ma.prototype={onSpill:function(e){var r=e.dragEl,n=e.putSortable,s=n||this.sortable;s.captureAnimationState(),r.parentNode&&r.parentNode.removeChild(r),s.animateAll()},drop:Ph};jt(ma,{pluginName:"removeOnSpill"});W.mount(new W2);W.mount(ma,ya);async function J2(t,e,r){var n;try{t.preventDefault(),kt(e,!0);const s=(n=t.currentTarget)==null?void 0:n.files;if(!s)return;await r(Array.from(s))}catch(s){id({text:s.message,duration:16e3,close:!0,gravity:"bottom",position:"center",stopOnFocus:!0,style:{background:"linear-gradient(to right, #1E396A, #F32587)"}}).showToast()}finally{kt(e,!1)}}function Z2(t,e,r,n){try{kt(e,!0),r(),console.debug({entries:le(n)})}finally{kt(e,!1)}}function K2(t,e,r,n,s){if(e.length===0)return;console.debug({pre:[...le(r)]}),n();const{from:i,to:o}=e.pop();console.debug({post:[...le(r)],from:i,to:o});const[a]=le(r).splice(o,1);le(r).splice(i,0,a),kt(r,hs(le(r))),console.debug({undid:[...le(r)]}),kt(s,e.length>0)}var X2=kr('<meta name="description">'),Y2=t=>{var e;(e=t.currentTarget.form)==null||e.elements.namedItem("toAdd").click()},Q2=kr("<section><p>Loadingâ€¦</p> <progress> </progress></section>"),eS=kr('<img class="svelte-13kxth4">'),tS=kr('<video controls class="svelte-13kxth4"><source> <track kind="captions"></video>',2),rS=kr('<object class="svelte-13kxth4"></object>'),nS=kr('<li class="svelte-13kxth4"><details name="file" class="svelte-13kxth4"><summary class="svelte-13kxth4"> </summary> <button type="button" class="svelte-13kxth4"><!></button></details></li>'),sS=kr('<main class="svelte-13kxth4"><form><label><button id="add-file" type="button" class="svelte-13kxth4"><!></button> <input type="file" accept="image/*,video/*" name="toAdd" multiple class="svelte-13kxth4"></label> <section id="controls" class="svelte-13kxth4"><button id="save" type="button" class="svelte-13kxth4"> </button> <button id="undo" type="button" class="svelte-13kxth4">Undo</button></section></form> <ol id="entries" class="svelte-13kxth4"></ol></main>');function _S(t,e){Jh(e,!0);let r=ur(hs([])),n=E2(ad.ipfsAPI),s=ur(!1),i=ur(!1),o=ur(!1),a=hs([]),c=ur(0),u=ur(0);async function l(M){Array.isArray(M)||(M=[M]),kt(u,hs(M.reduce((A,{size:D})=>A+D,0)));const L={chunker:"rabin",cidVersion:1,progress:A=>{kt(c,le(c)+A)}};let V=[];const X=await n.addAll(M,L);for await(const{cid:A}of X)V.push(A);V.forEach((A,D)=>{le(r).push({cid:A.toString(),title:M[D].name.split(".").slice(0,-1).join("."),type:M[D].type})})}function f(){var L;const M=Object.fromEntries(Array.from(((L=le(h))==null?void 0:L.children)??[]).map((V,X)=>[V.dataset.cid,X]));le(r).sort((V,X)=>M[V.cid]-M[X.cid])}let h=ur(null);Zh(()=>{if(!le(h))throw new Error("No `#entries` found.");new W(le(h),{animation:150,chosenClass:"chosen",onStart:M=>{const L=M.item.querySelector("details");L&&(L.open=!1)},onEnd:M=>{const{oldIndex:L,newIndex:V}=M;if(L!==V){if(L==null)throw new Error("`from` is `null`.");if(V==null)throw new Error("`to` is `null`.");a.push({from:L,to:V}),kt(o,!0)}}})});var m=sS();td(M=>{var L=X2();Xh.title="MÃ¯mis: Merge List",vt(L,"content","Ordered list of files to be combined with others in the same namespace."),Dt(M,L)});var w=Ye(m),y=Ye(w),p=Ye(y);p.__click=[Y2];var v=Ye(p);{var S=M=>{var L=Q2(),V=Dr(Ye(L),2),X=Ye(V);ze(V),ze(L),Pr(()=>{vt(V,"max",le(u)),rd(V,le(c)),gi(X,`${le(c)/le(u)*100}%`)}),Dt(M,L)},b=M=>{var L=qh("Add a File");Dt(M,L)};wi(v,M=>{le(s)?M(S):M(b,!1)})}ze(p);var B=Dr(p,2);B.__change=[J2,s,l],ze(y);var O=Dr(y,2),T=Ye(O);T.__click=[Z2,i,f,r];var _=Ye(T,!0);ze(T);var $=Dr(T,2);$.__click=[K2,a,r,f,o],ze(O),ze(w);var I=Dr(w,2);ed(I,21,()=>le(r),({cid:M,title:L,type:V})=>M,(M,L)=>{let V=()=>le(L).cid,X=()=>le(L).title,A=()=>le(L).type;var D=nS(),E=Ye(D),x=Ye(E),k=Ye(x,!0);ze(x);var R=Dr(x,2);R.__click=K=>{const H=K.currentTarget.closest("details");H!=null&&H.open&&(H.open=!1)};var G=Ye(R);{var z=K=>{var H=eS();Pr(se=>{vt(H,"src",se),vt(H,"alt",X())},[()=>yi({cid:V()})]),Dt(K,H)},Y=K=>{var H=Wh(),se=Yh(H);{var ae=fe=>{var ce=tS(),be=Ye(ce);Qh(2),ze(ce),Pr($e=>{vt(be,"src",$e),vt(be,"type",A())},[()=>yi({cid:V()})]),Dt(fe,ce)},xe=fe=>{var ce=rS();Pr(be=>{vt(ce,"data",be),vt(ce,"title",X())},[()=>yi({cid:V()})]),Dt(fe,ce)};wi(se,fe=>{var ce;(ce=A())!=null&&ce.startsWith("video/")?fe(ae):fe(xe,!1)},!0)}Dt(K,H)};wi(G,K=>{var H;(H=A())!=null&&H.startsWith("image/")&&!A().endsWith("/svg+xml")?K(z):K(Y,!1)})}ze(R),ze(E),ze(D),Pr(()=>{vt(D,"data-cid",V()),vt(D,"data-title",X()),gi(k,X())}),Dt(M,D)}),ze(I),sd(I,M=>kt(h,M),()=>le(h)),ze(m),Pr(()=>{p.disabled=le(s),T.disabled=!le(o)||le(i),gi(_,le(i)?"Savingâ€¦":"Save"),$.disabled=a.length===0||le(i)}),Dt(t,m),Kh()}nd(["click","change"]);export{_S as component};

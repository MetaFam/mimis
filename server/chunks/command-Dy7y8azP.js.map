{"version":3,"file":"command-Dy7y8azP.js","sources":["../../../.svelte-kit/adapter-node/chunks/command.js"],"sourcesContent":["import { get_request_store } from \"@sveltejs/kit/internal/server\";\nimport { c as create_validator, r as run_remote_function } from \"./query.js\";\n// @__NO_SIDE_EFFECTS__\nfunction command(validate_or_fn, maybe_fn) {\n  const fn = maybe_fn ?? validate_or_fn;\n  const validate = create_validator(validate_or_fn, maybe_fn);\n  const __ = { type: \"command\", id: \"\", name: \"\" };\n  const wrapper = (arg) => {\n    const { event, state } = get_request_store();\n    if (state.is_endpoint_request) {\n      if (![\"POST\", \"PUT\", \"PATCH\", \"DELETE\"].includes(event.request.method)) {\n        throw new Error(\n          `Cannot call a command (\\`${__.name}(${maybe_fn ? \"...\" : \"\"})\\`) from a ${event.request.method} handler`\n        );\n      }\n    } else if (!event.isRemoteRequest) {\n      throw new Error(\n        `Cannot call a command (\\`${__.name}(${maybe_fn ? \"...\" : \"\"})\\`) during server-side rendering`\n      );\n    }\n    state.refreshes ??= {};\n    const promise = Promise.resolve(run_remote_function(event, state, true, arg, validate, fn));\n    promise.updates = () => {\n      throw new Error(`Cannot call '${__.name}(...).updates(...)' on the server`);\n    };\n    return (\n      /** @type {ReturnType<RemoteCommand<Input, Output>>} */\n      promise\n    );\n  };\n  Object.defineProperty(wrapper, \"__\", { value: __ });\n  Object.defineProperty(wrapper, \"pending\", {\n    get: () => 0\n  });\n  return wrapper;\n}\nexport {\n  command as c\n};\n"],"names":[],"mappings":";;;AAEA;AACA,SAAS,OAAO,CAAC,cAAc,EAAE,QAAQ,EAAE;AAC3C,EAAE,MAAM,EAAE,GAAG,QAAQ,IAAI,cAAc;AACvC,EAAE,MAAM,QAAQ,GAAG,gBAAgB,CAAC,cAAc,EAAE,QAAQ,CAAC;AAC7D,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,SAAS,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE;AAClD,EAAE,MAAM,OAAO,GAAG,CAAC,GAAG,KAAK;AAC3B,IAAI,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,iBAAiB,EAAE;AAChD,IAAI,IAAI,KAAK,CAAC,mBAAmB,EAAE;AACnC,MAAM,IAAI,CAAC,CAAC,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;AAC9E,QAAQ,MAAM,IAAI,KAAK;AACvB,UAAU,CAAC,yBAAyB,EAAE,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,QAAQ,GAAG,KAAK,GAAG,EAAE,CAAC,YAAY,EAAE,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ;AAClH,SAAS;AACT,MAAM;AACN,IAAI,CAAC,MAAM,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE;AACvC,MAAM,MAAM,IAAI,KAAK;AACrB,QAAQ,CAAC,yBAAyB,EAAE,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE,QAAQ,GAAG,KAAK,GAAG,EAAE,CAAC,iCAAiC;AACtG,OAAO;AACP,IAAI;AACJ,IAAI,KAAK,CAAC,SAAS,KAAK,EAAE;AAC1B,IAAI,MAAM,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,mBAAmB,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,EAAE,QAAQ,EAAE,EAAE,CAAC,CAAC;AAC/F,IAAI,OAAO,CAAC,OAAO,GAAG,MAAM;AAC5B,MAAM,MAAM,IAAI,KAAK,CAAC,CAAC,aAAa,EAAE,EAAE,CAAC,IAAI,CAAC,iCAAiC,CAAC,CAAC;AACjF,IAAI,CAAC;AACL,IAAI;AACJ;AACA,MAAM;AACN;AACA,EAAE,CAAC;AACH,EAAE,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC;AACrD,EAAE,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,SAAS,EAAE;AAC5C,IAAI,GAAG,EAAE,MAAM;AACf,GAAG,CAAC;AACJ,EAAE,OAAO,OAAO;AAChB;;;;"}